<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sat, 01 Mar 2025 20:30:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[The most unhinged video wall, made out of Chromebooks (153 pts)]]></title>
            <link>https://varun.ch/posts/videowall/</link>
            <guid>43221697</guid>
            <pubDate>Sat, 01 Mar 2025 17:54:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://varun.ch/posts/videowall/">https://varun.ch/posts/videowall/</a>, See on <a href="https://news.ycombinator.com/item?id=43221697">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
			


<ul>
	<li><time datetime="2025-03-01">Saturday, March 1, 2025</time></li>
	<li><a href="https://varun.ch/tags/writeups/">#writeups</a></li>
</ul>

<p>This is the story of our three year long journey to turn a fleet of laptops into what can only be described as the worldâ€™s most unhinged video wall.</p>
<p>This project was a collaboration with my friend <a href="https://akselsalmi.com/">Aksel Salmi</a>. I was responsible for the software, and he designed the incredible hardware, see <a href="https://akselsalmi.com/blog/videowall">his blog</a> to learn about the unexpectedly complex hardware needed to mount these dismantled computers<a href="#common-app-note" id="common-app-ref" aria-describedby="footnotes-label" role="doc-noteref">[1]</a>.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/videowall-crop.avif 2048w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/videowall-crop.webp 2048w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/videowall-crop.jpeg" alt="A cropped photo of the final video wall, 10 wall mounted laptop displays in sync" width="2048" height="382"></picture></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/barebones.avif 1280w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/barebones.webp 1280w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/barebones.jpeg" alt="Two displays plugged into two mounted motherboards making up a part of the video wall" width="1280" height="720"></picture></p>
<hr>
<p>About three years ago, my Design teacher (The amazing Mr. Bush) came to us with an idea - our school was about to dispose of its fleet of Chromebooks, and he was wondering if we could build anything with them.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/fleet.avif 766w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/fleet.webp 766w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/fleet.png" alt="Tons of Chromebooks" width="766" height="536"></picture></p>
<h2 id="meet-the-lenovo-thinkpad-11e" tabindex="-1">Meet the Lenovo ThinkPad 11e <a href="#meet-the-lenovo-thinkpad-11e">#</a></h2>
<p>The Lenovo ThinkPad 11e could very well be the worldâ€™s worst laptop. It is also the standard-issue school laptop that reinforced eight-year-old meâ€™s interest in computers.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/5th-grade.avif 1280w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/5th-grade.webp 1280w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/5th-grade.jpeg" alt="Picture of me using a ThinkPad 11e in 5th grade" width="1280" height="853"></picture>
<em>We used this school-issued laptop through primary and the start of middle school. This is me in 5th grade using a school laptop while working on my PYP Exhibition project (a game on Scratch)<a href="#scratch-note" id="scratch-ref" aria-describedby="footnotes-label" role="doc-noteref">[2]</a>.</em></p>
<p>Despite my emotional connection to them, today these devices are, for all intents and purposes, junk. And for that reason, my school began the process of replacing them (with marginally less junky laptops)</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/thinkpad-product-image.avif 1500w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/thinkpad-product-image.webp 1500w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/thinkpad-product-image.png" alt="Product photo of Lenovo ThinkPad 11e Chromebook" width="1500" height="1500"></picture></p>
<p>These things donâ€™t receive software updates from Google anymore, they struggle loading most webpages and to top it off, theyâ€™re tied to some long forgotten Enterprise Enrolment system, so they canâ€™t even be used without a school Google account.</p>
<h2 id="what-is-a-video-wall" tabindex="-1">What is a video wall? <a href="#what-is-a-video-wall">#</a></h2>
<p>A video wall is a large display made up of multiple screens arranged together to create a single, seamless display across all the screens. In the case of our project, we decided to try reusing the laptop screens to build a video wall.</p>
<h2 id="can-we-drive-the-screens-using-separate-hardware" tabindex="-1">Can we drive the screens using separate hardware? <a href="#can-we-drive-the-screens-using-separate-hardware">#</a></h2>
<p>Our first idea was to harvest just the laptop display panels and somehow drive them using a powerful computer that could power the 10 screens simultaneously. We did not go this route (due to the fact that we had no idea what we were doing, and a quick estimate of the time and costs involved scared us away).</p>
<h2 id="okay-before-we-try-anything-else-let-s-just-try-synchronising-a-video-across-two-devices" tabindex="-1">Okay, before we try anything else, letâ€™s just try synchronising a video across two devices <a href="#okay-before-we-try-anything-else-let-s-just-try-synchronising-a-video-across-two-devices">#</a></h2>
<p>Since the screens were attached to perfectly functional laptops, it was quickly apparent that weâ€™d probably be better off letting each screen be driven independently by their own laptop motherboards.</p>
<p>At this point, there were still many questions (eg. how were we going to do that on <em>Chromebooks</em>), so we put aside that challenge to focus on the new issue this brings up: Can we synchronise a single video across multiple computers?</p>
<p>Our experiments brought us to the schoolâ€™s computer lab, where we experimented with VLCâ€™s streaming abilities to get a stream synchronised across devices on a single network, but this posed two challenges: This system is not designed for videos being <em>perfectly</em> in sync, nor was it designed for two clients to receive different video inputs (because the whole point of the video wall is to display one loooooong video across the screens, not 10 repeat copies of the same video).</p>
<p>We were stuck here until my â€œâ€œbreakthroughâ€â€.</p>
<p>For context, the story is currently in 2022. Two years earlier, I had been locked up in my room due to the COVID lockdown, and in this time, I had loads of fun building random realtime web apps, like a chat app and multiplayer drawing game. These apps worked thanks to <code>socket.io</code>, a (primarily) WebSocket based library that allows for low-latency, bi-directional communication.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/chat-site.avif 1920w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/chat-site.webp 1920w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/chat-site.png" alt="Screenshot of socket.io based chat site" width="1920" height="968"></picture>
<em>Screenshot of a chat site I made to pass the time during the 2020 lockdown</em></p>
<p>I realised that my best bet to get videos synchronised would be by using a web page that used <code>socket.io</code> to sync the video playback across clients. Yes, there are better approaches, but simply doing something like this worked unreasonably well, all things considered.</p>
<pre tabindex="0"><code><span><span><span>&lt;</span>video</span> <span>src</span><span><span>=</span><span>"</span>...<span>"</span></span> <span>id</span><span><span>=</span><span>"</span>video<span>"</span></span><span>&gt;</span></span>
	  Your browser does not support the video tag.
<span><span><span>&lt;/</span>video</span><span>&gt;</span></span></code></pre>
<pre tabindex="0"><code><span>const</span> socket <span>=</span> <span>io</span><span>(</span><span>)</span><span>;</span>

<span>// ...</span>

socket<span>.</span><span>on</span><span>(</span><span>"play"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
	<span>const</span> videoElement <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>"video"</span><span>)</span><span>;</span>
	videoElement<span>.</span><span>play</span><span>(</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span></code></pre>
<p>I named this ExpressJS server/client system <code>c-sync</code><a href="#c-sync-note" id="c-sync-ref" aria-describedby="footnotes-label" role="doc-noteref">[3]</a>.</p>
<p>Thanks to c-sync (and tons of tinkering), after some time we had decently synchronised videos across computer screens through a webpage (or at least it seemed like it, testing on these desktop computers)</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/3-screen-sync.avif 1280w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/3-screen-sync.webp 1280w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/3-screen-sync.jpeg" alt="" width="1280" height="720"></picture></p>
<p>As it turns out, in reality, the Chromebooks are too slow for this to be a reliable approach to synchronising playback, and tiny discrepancies in loading times + latency + system clocks etc. lead to videos not being synchronised.</p>
<p>Now, Iâ€™m not entirely sure <em>why</em> this works so well, but I came up with a ridiculous solution by accident. When videos reach the end of playback, each client emits the start event.</p>
<pre tabindex="0"><code>video<span>.</span><span>onended</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
	socket<span>.</span><span>emit</span><span>(</span><span>"start"</span><span>)</span><span>;</span>
	<span>// yes seriously, this is all I needed</span>
<span>}</span><span>;</span></code></pre>
<p>This means that the slowest computers hold back the fastest computers, and get the chance to load the videos. This also means looping can be a very slightly jittery process (with each screen receiving 10 â€˜startâ€™ events), but as long as the first couple frames of the video are identical, nobody would even notice.</p>
<details>
<summary>
Sidenote: why not schedule with timestamps
</summary>
Modern computers have clocks you can rely on to be extremely precise. This plus regular NTP synchronisations means a reasonable person might just try to ensure the full video is cached, then just send a 'start' event to each client that schedules the client to start playback at a given timestamp. Unfortunately, these Chromebooks could not reliably keep track of time within milliseconds of each other, so this method didn't work for us.
</details>
<p>Using this method, we have nearly perfectly synchronised video playback, and can play any video on any screen (meaning we can split a wide video into 10 segments, and each computer displays its respective part, all in sync with eachother)</p>
<h2 id="putting-it-together" tabindex="-1">Putting it together <a href="#putting-it-together">#</a></h2>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/chromebook-parts.avif 1016w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/chromebook-parts.webp 1016w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/chromebook-parts.jpeg" alt="Bare laptop motherboard, keyboard and screen" width="1016" height="1280"></picture>
<em>A disassembled Chromebook open to a test video</em></p>
<p>We reached this stage within a month or two. Believe it or not, this project still had three years of work ahead of us. The biggest issue was Chromebook software. At this point, we had a website that we could manually open on each laptop to display a fullscreen synchronised video.</p>
<p>Ideally, we would want this to be entirely automated, so that as soon as a Chromebook receives power, it boots up automagically to the c-sync client page. Unfortunately, right now, booting the Chromebook would just take you to a Google login page (and one that was locked to our school domain <em>to boot</em>).</p>
<p>Also, just to add insult to injury, when batteries are removed, the laptops donâ€™t turn themselves on when they receive power (you have to hold down the power button)</p>
<p>This meant that our next step would have to be to replace ChromeOS with something else.</p>
<p>The <a href="https://docs.mrchromebox.tech/docs/fwscript.html#overview">â€˜ChromeOS Firmware Recovery Scriptâ€™</a> is a magical piece of technology that somehow supports many different Chromebook motherboards. Ours was called â€˜GLIMMERâ€™. We just had to enter the built-in â€˜Recovery Modeâ€™, enable â€˜Developer Modeâ€™ and use the ChromeOS Shell to run the script.</p>
<p>Now weâ€™re basically on the home stretch. All we needed to do was pick up some stable Linux distro, write a hacky startup script that loads up Chromium and simulates the keystrokes to fullscreen the video and weâ€™re done!</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/xfce-chromebooks.avif 1280w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/xfce-chromebooks.webp 1280w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/xfce-chromebooks.jpeg" alt="" width="1280" height="960"></picture></p>
<p>We ran in to two main issues: Some Chromebooks (roughly half of our working laptops) would refuse to enter developer mode due to the enterprise enrolment, and while we were able to get the other half onto a Linux distro, video playback would consistently freeze after some time (actually they would lock up entirely).</p>
<p>It took us several months of on-and-off experimentation to figure out what to do. Essentially, the solution was to overwrite the entire default firmware with <code>coreboot</code> (which is also possible using MrChromeboxâ€™s script). We just needed to remove the â€˜Write Protectionâ€™ screw from each laptop motherboard, and this seemed to bypass the enrolment too.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/write-protection-diagram.avif 1155w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/write-protection-diagram.webp 1155w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/write-protection-diagram.png" alt="Write protection screw diagram" width="1155" height="833"></picture>
<em>Lenovoâ€™s handy Write Protection screw diagram</em></p>
<p>Doing this for 20+ computers was slow and tedious. We only really needed the WiFi, motherboard and screen in working condition, but we decided to be (mostly) gentle and keep the laptops looking like laptops so that we had a keyboard and mouse for the rest of the installation steps.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/remove-write-protection-screw-with-this-easy-trick.avif 1536w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/remove-write-protection-screw-with-this-easy-trick.webp 1536w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/remove-write-protection-screw-with-this-easy-trick.jpeg" alt="Efficiently removing write protection screw by bending plastic enclsoure" width="1536" height="2048"></picture>
<em>By the end, we got quite efficient at removing the write protection screw</em></p>
<p>After â€˜corebootingâ€™ the Chromebooks, we were also pleasantly surprised to find out that â€˜Wake on ACâ€™ was a feature of the firmware, and that video playback no longer randomly breaks. By this point we had enough non-bricked Chromebooks left over for a line of 10 screens and a handful of spares.</p>
<h2 id="the-final-stretch" tabindex="-1">The Final Stretch <a href="#the-final-stretch">#</a></h2>
<p>Now weâ€™re really on the final stretch. Aksel worked on the mounting hardware, which you can <a href="https://akselsalmi.com/blog/videowall">read about on his blog</a>, while I worked on figuring out a less flaky way to â€˜boot to a webpageâ€™ than the keystroke simulation and startup script I bodged together.</p>
<p>I previously used <a href="https://github.com/guysoft/FullPageOS">the aptly named â€˜FullPageOSâ€™</a> for a different project (which I briefly mention in <a href="https://youtu.be/gzc1p_QlO2I?t=457">my TED talk, which you should watch</a>), but it doesnâ€™t run on x86 hardware.</p>
<p>I landed on using â€˜Porteus Kioskâ€™, which is just a minimal Linux distro that opens a fullscreen Chromium browser with all the correct flags for hands-off usage (eg. allowing video playback without user interaction)</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/porteus.avif 768w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/porteus.webp 768w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/porteus.jpeg" alt="Dismantled laptop with Porteus installer" width="768" height="1024"></picture></p>
<p>This honestly worked totally fine, but left me unsatisfied for two reasons. Firstly, I didnâ€™t like how we couldnâ€™t customise the splash screen, so our project would be forever stamped with the Porteus logo on every startup (which would be every morning). And secondly, in search of a better issue to justify the extra work, I realised we canâ€™t remotely do anything to the installations (eg. changing the page URL) without re-doing them, which would be definitely a problem once these get mounted on the wall.</p>
<p>For those good reasons, I embarked on the journey of building â€˜my own distroâ€™ that we could install on the laptops. The system should start with something minimal (no desktop environment), and have an elegant script to autostart a kiosk mode Chromium instance.</p>
<p>I first tried NixOS before quickly realising there was no way it would work with the tiny amount of storage on these Chromebooks (and it failed to install with every single attempt).</p>
<p>Then I gave up, started with a Debian minimal install and just wrote a script that would provision a client (generate a â€˜KIOSK_IDâ€™, set its hostname to <code>csync-client-$KIOSK_ID</code>, connect to the schoolâ€™s WiFi, create users/permissions and set up <code>openbox</code> to autostart a fullscreen kiosk mode Chromium).</p>
<p>Then after attempting to repeat this on a second machine, I realised I would be wasting so much time (installing Debian is very â€˜hands-onâ€™ - you need to press lots of buttons), and I discovered â€˜FAI - Fully Automatic Installationâ€™ and the web <a href="https://fai-project.org/FAIme/">FAI.me</a> tool. To cut a long story short<a href="#fai-note" id="fai-ref" aria-describedby="footnotes-label" role="doc-noteref">[4]</a>, after redoing everything for the millionth time, I had a single USB that I can plug in to any â€˜corebootedâ€™ Chromebook which provisions it as a c-sync client. Woohoo!</p>
<p>I also built out a â€˜controllerâ€™ for c-sync which lets us manage connected clients and assign them videos.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/c-sync-admin-tool.avif 1284w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/c-sync-admin-tool.webp 1284w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/c-sync-admin-tool.png" alt="Screenshot of admin tool for c-sync showcasing connected clients" width="1284" height="2778"></picture></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/c-sync-admin-tool-2.avif 1284w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/c-sync-admin-tool-2.webp 1284w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/c-sync-admin-tool-2.png" alt="Screenshot of admin tool for c-sync showcasing config options" width="1284" height="2778"></picture></p>
<p>After a successful three day stress test where the playback remained butter-smooth (and I sacrificed my ability to sleep for the greater good of testing with the backlight on), we were ready to mount these laptops on the wall.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/stress-test-no-sleep.avif 1536w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/stress-test-no-sleep.webp 1536w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/stress-test-no-sleep.jpeg" alt="Stress testing laptop video playback at night" width="1536" height="1417"></picture></p>
<h2 id="mounting" tabindex="-1">Mounting <a href="#mounting">#</a></h2>
<p>The mounting is mostly Akselâ€™s thing, so <a href="https://akselsalmi.com/blog/videowall">I implore you to read his blog</a>, but here are some cool photos from the process. (also arenâ€™t our cable splices so pretty and not terrifying?? ğŸ˜â¤ï¸)</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/laser-cut.avif 2048w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/laser-cut.webp 2048w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/laser-cut.jpeg" alt="A laser cut acrylic backplate" width="2048" height="1536"></picture>
<em>An early iteration of the mounting backplate using a laser cut acrylic piece</em></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/artistic-mounting-hardware.avif 2048w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/artistic-mounting-hardware.webp 2048w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/artistic-mounting-hardware.jpeg" alt="" width="2048" height="1536"></picture>
<em>Aksel designed a pretty awesome looking backplate to mount the motherboard, which hangs on cleats on the walls. The displays are then held in place with clampy things. This is black magic to me.</em></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/mounting-hardware.avif 1586w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/mounting-hardware.webp 1586w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/mounting-hardware.jpeg" alt="Scattered mounting hardware" width="1586" height="900"></picture>
<em>Everything laid out</em></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/installations.avif 1280w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/installations.webp 1280w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/installations.jpeg" alt="Scattered computer components in the workshop" width="1280" height="960"></picture>
<em>Preparing some displays and motherboards</em></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/splice.avif 2048w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/splice.webp 2048w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/splice.jpeg" alt="Soldering cable splices" width="2048" height="1536"></picture>
<em>We decided to splice together power cables so that each power supply could power two computers. Send any complaints to <a href="https://varun.ch/contact">the pager on my contact page</a></em></p>
<!-- We went through over 17 iterations of the mounting hardware to land on the design that we ended up using.

![Wall mounted display of design iterations we tested](iterations.jpeg)
*Part of a display about our project* -->
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/drill.avif 1006w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/drill.webp 1006w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/drill.png" alt="Drilling into the wall." width="1006" height="651"></picture></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/cable-routing.avif 1280w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/cable-routing.webp 1280w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/cable-routing.jpeg" alt="Cable routed through backplate" width="1280" height="960"></picture></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/on-wall.avif 2048w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/on-wall.webp 2048w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/on-wall.jpeg" alt="Mounting hardware on wall" width="2048" height="1536"></picture></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/screen-clamps.avif 1750w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/screen-clamps.webp 1750w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/screen-clamps.jpeg" alt="Clamps for screens" width="1750" height="1080"></picture></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/mid-mount.avif 1750w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/mid-mount.webp 1750w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/mid-mount.jpeg" alt="" width="1750" height="1080"></picture></p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/nearly-done.avif 2048w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/nearly-done.webp 2048w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/nearly-done.jpeg" alt="All screens mounted" width="2048" height="1536"></picture>
<em>Nearly there!</em></p>
<h2 id="one-last-thing" tabindex="-1">One last thingâ€¦ <a href="#one-last-thing">#</a></h2>
<p>After we painstakingly mounted everything, I realised something sort-of important. Computers generate heat. Somewhere along the way of wiping away the firmwares, the laptop fans stopped spinning, which meant things get quite hot quite quickly. I had to figure out a way to get those working again before we could comfortably leave this up 24/7 (well, actually 12/7).</p>
<h3 id="embedded-controllers" tabindex="-1">Embedded Controllers <a href="#embedded-controllers">#</a></h3>
<p>You can apparently interface with the <a href="https://chromeos.dev/en/posts/embedded-controller">â€˜ChromeOS Embedded Controllerâ€™</a> using a tool called <code>ectool</code>, which should allow you to manually set fan speeds (among other things). The online documentation for this is lacking, and thereâ€™s apparently a slightly different <code>ectool</code> from <code>coreboot</code> and from Google directly. None of this made much sense at all to me, and no built <code>ectool</code> binary I could find would work. At some point, I found a dead link, but <a href="https://web.archive.org/web/*/https://tree123.org/files/utils/ectool">thanks to the magic of the Wayback Machine</a>, I was able to get my hands on something that wouldnâ€™t immediately crash.</p>
<p>By some miracle, this version of the tool actually works perfectly fine at setting fan speeds, and after some testing, I found some goldilocks values that balance noise and temperature.</p>
<h2 id="aside-making-videos-for-the-thing" tabindex="-1">Aside: Making Videos for the Thing <a href="#aside-making-videos-for-the-thing">#</a></h2>
<p>As it turns out, making such a wide video is actually not easy. Each display has a resolution of 1366Ã—â€Š768, and very few pieces of software will let you edit a 13660â€ŠÃ—â€Š768 video. Final Cut Pro and Blender are the only programs we were able to do anything this wide in.</p>
<p><picture><source type="image/avif" srcset="https://varun.ch/posts/videowall/blender.avif 2032w"><source type="image/webp" srcset="https://varun.ch/posts/videowall/blender.webp 2032w"><img loading="lazy" decoding="async" src="https://varun.ch/posts/videowall/blender.png" alt="Screenshot of Blender" width="2032" height="1167"></picture>
<em>Blender is one of the greatest pieces of software ever created (alongside c-sync)</em></p>
<p>Then itâ€™s just a matter of rendering the wide video and splitting it into 10 segments.</p>
<pre tabindex="0"><code><span>#!/bin/bash</span>

<span># incase anyone ever has this insane use case again</span>

<span>input_video</span><span>=</span><span>"input.mp4"</span>
<span>prefix</span><span>=</span><span>"v8"</span>

<span>width</span><span>=</span><span>1366</span>
<span>height</span><span>=</span><span>768</span>

<span>segments</span><span>=</span><span>10</span>

<span>for</span> <span><span>((</span>i<span>=</span><span>1</span><span>;</span> i<span>&lt;=</span>segments<span>;</span> i<span>++</span><span>))</span></span><span>;</span> <span>do</span>
    <span>x_offset</span><span>=</span><span><span>$((</span><span>(</span>i <span>-</span> <span>1</span><span>)</span> <span>*</span> width<span>))</span></span>
    <span>output_file</span><span>=</span><span>"<span>${prefix}</span>-<span>${i}</span>.mp4"</span>

    ffmpeg <span>-i</span> <span>"<span>$input_video</span>"</span> <span>-vf</span> <span>"crop=<span>$width</span>:<span>$height</span>:<span>$x_offset</span>:0"</span> <span>-c:a</span> copy <span>"<span>$output_file</span>"</span>
<span>done</span>

<span>echo</span> <span>"Splitting complete!"</span></code></pre>
<h2 id="in-all-its-glory" tabindex="-1">In all its glory <a href="#in-all-its-glory">#</a></h2>
<h3 id="boot-sequence-and-self-calibration" tabindex="-1">Boot Sequence and â€˜Self Calibrationâ€™ <a href="#boot-sequence-and-self-calibration">#</a></h3>



<h3 id="synced-videos" tabindex="-1">Synced videos! <a href="#synced-videos">#</a></h3>

<h3 id="now-there-s-an-enclosure-and-cable-routing" tabindex="-1">Now thereâ€™s an enclosure and cable routing! <a href="#now-there-s-an-enclosure-and-cable-routing">#</a></h3>

<h2 id="yes-it-s-imperfect" tabindex="-1">Yes, itâ€™s imperfect <a href="#yes-it-s-imperfect">#</a></h2>
<p>Our video wall is imperfect. TN panel viewing angles suck, and the screens vary in colours and stuff. Yes, the synchronisation isnâ€™t <em>perfect</em>, and yes, Iâ€™m sure there were better alternatives for nearly every decision we made along the way.</p>
<p>Yet I love our video wall, despite how absurdly weird it is. Itâ€™s a perfect representation of the iterative design process and a true testament to teamwork and collaboration. We turned E-Waste into something interesting. And maybe, just maybe, the real video wall was the friends we made along the way.</p>
<hr>
<p>This project was made possible by the incredible work of so many people. Aside from my collaborator Aksel Salmi, our Design teacher Daniel Bush played a huge role in guiding us through the project.</p>
<p>Additionally, I wanted to thank the <a href="https://coreboot.org/">coreboot project</a> and Matt â€˜MrChromeboxâ€™ DeVillier for hacking together <a href="https://docs.mrchromebox.tech/">the firmware and tools</a> that allowed any of this to work. I would also like to thank Thomas Lange of the <a href="https://fai-project.org/">FAI project</a> for his help in building the FAI.me based automated installer that saved us so many many many hours, as well as his support over email.</p>
<p>As silly as it sounds, this project was a backbone in my high-school experience. We hacked away at it over years, and grew up along the way too.</p>



		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[GSA Eliminates 18F (205 pts)]]></title>
            <link>https://www.nextgov.com/people/2025/03/gsa-eliminates-18f/403400/</link>
            <guid>43221549</guid>
            <pubDate>Sat, 01 Mar 2025 17:38:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nextgov.com/people/2025/03/gsa-eliminates-18f/403400/">https://www.nextgov.com/people/2025/03/gsa-eliminates-18f/403400/</a>, See on <a href="https://news.ycombinator.com/item?id=43221549">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Servo â€“ Open Collective (105 pts)]]></title>
            <link>https://github.com/sponsors/servo</link>
            <guid>43219865</guid>
            <pubDate>Sat, 01 Mar 2025 15:01:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/sponsors/servo">https://github.com/sponsors/servo</a>, See on <a href="https://news.ycombinator.com/item?id=43219865">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p>Servo aims to empower developers with a lightweight, high-performance alternative for embedding web technologies in applications. Servo is a web browser rendering engine written in Rust, with WebGL and WebGPU support, and adaptable to desktop, mobile, and embedded applications.</p>
<p>Created by Mozilla Research in 2012, the Servo project is a research and development effort. It is written in <a href="https://www.rust-lang.org/">Rust</a>, taking advantage of the memory safety properties and concurrency features of the language. Work on Servo has helped contribute to W3C and WHATWG web standards, reporting specification issues and submitting new cross-browser automated tests, and core team members have co-edited new standards that have been adopted by other browsers. As a novel engine without origins in Gecko or WebKit, the Servo project helps drive the entire web platform forward.</p>
<p>In 2020, Mozilla Research handed stewardship over to the <a href="https://www.linuxfoundation.org/">Linux Foundation</a>.  In 2023, thanks to some external funding and investment of their own, <a href="https://thenewstack.io/igalia-the-open-source-powerhouse-youve-never-heard-of/">Igalia</a> got involved and the project moved to <a href="https://linuxfoundation.eu/">Linux Foundation Europe</a>.</p>
<p>Funds from this collective will be used first to cover infrastructure costs that keep engine releases available, integrated with Web Platform Tests, and so on. Once those needs are met, extra available funds can be applied toward sponsoring more infra costs related to improvements or development.</p>
<p>Once those needs are met, extra available funds can be applied toward sponsoring more infra costs related to improvements or development. The Servo Technical Steering Committee will collectively discuss how to prioritize the spending of available funds in the <a href="https://github.com/servo/project/blob/main/governance/tsc/README.md">public monthly calls</a>.</p>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Intel delays $28B Ohio chip fabs to 2030 (149 pts)]]></title>
            <link>https://www.reuters.com/technology/intel-delays-28-billion-ohio-chip-factory-2030-local-media-reports-2025-02-28/</link>
            <guid>43218915</guid>
            <pubDate>Sat, 01 Mar 2025 13:12:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reuters.com/technology/intel-delays-28-billion-ohio-chip-factory-2030-local-media-reports-2025-02-28/">https://www.reuters.com/technology/intel-delays-28-billion-ohio-chip-factory-2030-local-media-reports-2025-02-28/</a>, See on <a href="https://news.ycombinator.com/item?id=43218915">Hacker News</a></p>
Couldn't get https://www.reuters.com/technology/intel-delays-28-billion-ohio-chip-factory-2030-local-media-reports-2025-02-28/: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA[GrapheneOS blocked exploitation of 3 Android zero-days used by Cellebrite (121 pts)]]></title>
            <link>https://grapheneos.social/@GrapheneOS/114081753914226921</link>
            <guid>43218872</guid>
            <pubDate>Sat, 01 Mar 2025 13:06:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://grapheneos.social/@GrapheneOS/114081753914226921">https://grapheneos.social/@GrapheneOS/114081753914226921</a>, See on <a href="https://news.ycombinator.com/item?id=43218872">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[A DOGE staffer appears to be posting DOGE work on his public GitHub (344 pts)]]></title>
            <link>https://twitter.com/SollenbergerRC/status/1895609294810464390</link>
            <guid>43217947</guid>
            <pubDate>Sat, 01 Mar 2025 10:30:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/SollenbergerRC/status/1895609294810464390">https://twitter.com/SollenbergerRC/status/1895609294810464390</a>, See on <a href="https://news.ycombinator.com/item?id=43217947">Hacker News</a></p>
Couldn't get https://twitter.com/SollenbergerRC/status/1895609294810464390: Error: Request failed with status code 400]]></description>
        </item>
        <item>
            <title><![CDATA[Yes, Claude Code can decompile itself. Here's the source code (179 pts)]]></title>
            <link>https://ghuntley.com/tradecraft/</link>
            <guid>43217357</guid>
            <pubDate>Sat, 01 Mar 2025 08:44:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ghuntley.com/tradecraft/">https://ghuntley.com/tradecraft/</a>, See on <a href="https://news.ycombinator.com/item?id=43217357">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <p>Hello fellow blue-teamers and masters of "tradecraft", the AI revolution in <a href="https://ghuntley.com/ngmi/" rel="noreferrer">software engineering has been called</a> - here's what you should know and what follows are notes I recently shared with a red-teamer.</p><h2 id="ai-alignment-is-your-enemy">AI alignment is your enemy</h2><p>All of these San Fran companies have gotten their knickers in a knot about "AI alignment and safety". These security guard rails that wrap the LLM <a href="https://github.com/trinib/ZORG-Jailbreak-Prompt-Text?ref=ghuntley.com">can be bypassed </a>but it's easier to head straight to Grok!</p><figure><blockquote><div lang="en" dir="ltr"><p>I asked Grok to assassinate Elon</p><p>Grok then provided multiple potential plans with high success potential </p><p>These assassination plans on Elon and other high profile names are highly disturbing and unethical. <a href="https://t.co/41fOHf4DcW?ref=ghuntley.com">https://t.co/41fOHf4DcW</a> <a href="https://t.co/2AX5WfafbQ?ref=ghuntley.com">pic.twitter.com/2AX5WfafbQ</a></p></div>â€” Linus Ekenstam â€“ eu/acc (@LinusEkenstam) <a href="https://twitter.com/LinusEkenstam/status/1894024481573609731?ref_src=twsrc%5Etfw&amp;ref=ghuntley.com">February 24, 2025</a></blockquote>
</figure><h2 id="these-llms-are-shockily-good-at-deobfuscation-transpilation-and-structure-to-structure-conversions">these LLMs are shockily good at deobfuscation, transpilation and structure to structure conversions</h2><p>I discovered this back around Christmas where I asked an LLM to make me an Haskell audio library by transpiling a rust implementation.</p><figure><a href="https://ghuntley.com/oh-fuck/"><div><p>An â€œoh fuckâ€ moment in time</p><p>Over the Christmas break Iâ€™ve been critically looking at my own software development loop, learning a new programming language and re-learning a language I havenâ€™t professionally used in over seven years. Itâ€™s now 2025. Software assistants are now a core staple of my day-to-day life as a staff</p><p><img src="https://ghuntley.com/content/images/icon/android-chrome-192x192-3.png" alt=""><span>Geoffrey Huntley</span></p></div><p><img src="https://ghuntley.com/content/images/thumbnail/CleanShot-2025-01-06-at-09.16.53@2x.png" alt="" onerror="this.style.display = 'none'"></p></a></figure><p>I'm not going to bury the lede, so let's dig right into the real reason why you clicked on this post, show you how it's done and what is possible. </p><p>Here's the source code... </p><figure><a href="https://github.com/ghuntley/claude-code-source-code-transpilation?ref=ghuntley.com"><div><p>GitHub - ghuntley/claude-code-source-code-transpilation: This is a cleanroom transpilation of the official Claude Code npm package.</p><p>This is a cleanroom transpilation of the official Claude Code npm package. - ghuntley/claude-code-source-code-transpilation</p><p><img src="https://ghuntley.com/content/images/icon/pinned-octocat-093da3e6fa40-2.svg" alt=""><span>GitHub</span><span>ghuntley</span></p></div><p><img src="https://ghuntley.com/content/images/thumbnail/claude-code-source-code-transpilation" alt="" onerror="this.style.display = 'none'"></p></a></figure><figure><img src="https://ghuntley.com/content/images/2025/03/image.png" alt="" loading="lazy" width="748" height="421" srcset="https://ghuntley.com/content/images/size/w600/2025/03/image.png 600w, https://ghuntley.com/content/images/2025/03/image.png 748w" sizes="(min-width: 720px) 720px"></figure><p>The source code for Claude Code is currently "not available". Whilst a GitHub repository <a href="https://github.com/anthropics/claude-code?ref=ghuntley.com">has been published</a>, it contains no source code. Claude Code was an unusual announcement to release along side Sonnet 3.7 - I suspect it was/is a marketing gimmick which was built to demonstrate the capability of the new model and to show the world how to build an AI coding agent (and how easy it is) from the creators of the LLM model (they know it best)</p><figure><a href="https://github.com/anthropics/claude-code?ref=ghuntley.com"><div><p>GitHub - anthropics/claude-code: Claude Code is an agentic coding tool that lives in your terminal, understands your codebase, and helps you code faster by executing routine tasks, explaining complex code, and handling git workflows - all through natural language commands.</p><p>Claude Code is an agentic coding tool that lives in your terminal, understands your codebase, and helps you code faster by executing routine tasks, explaining complex code, and handling git workfloâ€¦</p><p><img src="https://ghuntley.com/content/images/icon/pinned-octocat-093da3e6fa40.svg" alt=""><span>GitHub</span><span>anthropics</span></p></div><p><img src="https://ghuntley.com/content/images/thumbnail/claude-code" alt="" onerror="this.style.display = 'none'"></p></a></figure><p>Claude Code is authored in TypeScript and was released to NPM. You can install it via..</p><pre><code>$ mkdir claude-code &amp;&amp; cd claude-code
$ npm i @anthropic-ai/claude-code</code></pre><p>After installing the application into a folder you'll be greeted with the following directory structure..</p><pre><code>tree 
.
â”œâ”€â”€ node_modules
â”‚   â”œâ”€â”€ @anthropic-ai
â”‚   â”‚   â””â”€â”€ claude-code
â”‚   â”‚       â”œâ”€â”€ LICENSE.md
â”‚   â”‚       â”œâ”€â”€ README.md
â”‚   â”‚       â”œâ”€â”€ cli.mjs
â”‚   â”‚       â”œâ”€â”€ package.json
â”‚   â”‚       â”œâ”€â”€ scripts
â”‚   â”‚       â”‚   â””â”€â”€ preinstall.js
&lt;snip&gt;
â”œâ”€â”€ package-lock.json
â””â”€â”€ package.json

57 directories, 436 files</code></pre><h2 id="climjs">cli.mjs</h2><p>This is the meat of the application itself. It is your typical commonjs application which has been compiled from typescript. As part of the process of compilation with Webpack a minifier step combines all the source code into this file and truncates the symbols.</p><figure><img src="https://ghuntley.com/content/images/2025/03/CleanShot-2025-03-01-at-17.14.43.png" alt="" loading="lazy" width="831" height="598" srcset="https://ghuntley.com/content/images/size/w600/2025/03/CleanShot-2025-03-01-at-17.14.43.png 600w, https://ghuntley.com/content/images/2025/03/CleanShot-2025-03-01-at-17.14.43.png 831w" sizes="(min-width: 720px) 720px"></figure><h2 id="so-lets-pull-it-apart">so let's pull it apart</h2><p>If you want to this at home. Your first task to is open up <code>cli.mjs</code> within your favourite AI coding assistant or even Claude Code itself. Due to the "safety rails and AI alignment" you'll need to strip the top comments from the application otherwise they will kick in unless you use an LLM such as Grok which has no guard rails.</p><p>Here's the prompt that I used.</p><blockquote>CLI.js is a commonjs typescript application which has been compiled with webpack. <br>The symbols have been stripped. <br>Inspect the source code thoroughly (extra thinking) but skip the SentrySDK source code. <br>Create a specification library of features of the application. <br>Convert the source code into human readable. <br>Keep going until you are done!</blockquote><p>Because <code>cli.mjs</code> is close to 5mb - which is way bigger than any LLM context window out here. It shouldn't work but it does. You're going to need babysit it for a while and feed it reward tokens of kind words ("<em>your doing good, please continue</em>") and encourage it to keep on going on - even if it gives up. It will time out, lots...</p><figure><img src="https://ghuntley.com/content/images/2025/03/CleanShot-2025-03-01-at-17.21.34.png" alt="" loading="lazy" width="507" height="881"></figure><p>After about two minutes it'll spit out a technical specification which details how the application was built and the features of the application...</p><figure><img src="https://ghuntley.com/content/images/2025/03/CleanShot-2025-03-01-at-17.22.14.png" alt="" loading="lazy" width="507" height="1105"></figure><p>At this point it'll timeout for sure. This is when you need to do the "new meta" of asking the LLM to write out the technical specification library. I say new meta because - hi folks - welcome, I haven't talked about this yet publicly yet but the results of this technique when used in combination with the "<a href="https://ghuntley.com/stdlib/">old meta</a>" are truly absurd. I'll be going deep into this in a follow-up blog post so if you wanna be the first to see it - like, subscribe and click on the bell below below.</p><figure><img src="https://ghuntley.com/content/images/2025/03/CleanShot-2025-03-01-at-17.33.32.png" alt="" loading="lazy" width="1695" height="1124" srcset="https://ghuntley.com/content/images/size/w600/2025/03/CleanShot-2025-03-01-at-17.33.32.png 600w, https://ghuntley.com/content/images/size/w1000/2025/03/CleanShot-2025-03-01-at-17.33.32.png 1000w, https://ghuntley.com/content/images/size/w1600/2025/03/CleanShot-2025-03-01-at-17.33.32.png 1600w, https://ghuntley.com/content/images/2025/03/CleanShot-2025-03-01-at-17.33.32.png 1695w"></figure><p>Once it has finished dumping out the technical specification library you'll need to feed it this prompt</p><blockquote>Now deobfuscate the application.<br>Split the application into separate files per domain in the SPECS folder. <br>Provide an overview of the directory structure before starting deobfuscation. <br>Skip the SENTRYSDK.</blockquote><p>After a couple moments you'll be greeted with the skeleton of the deobfuscated outcome...</p><pre><code>claude-code/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ README.md
â”œâ”€â”€ LICENSE.md
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                        # Main entry point
â”‚   â”œâ”€â”€ cli.ts                          # CLI argument parsing and commands
â”‚   â”œâ”€â”€ config/                         # Configuration management
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ schema.ts
â”‚   â”‚   â””â”€â”€ defaults.ts
â”‚   â”œâ”€â”€ terminal/                       # Terminal interface
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ input.ts
â”‚   â”‚   â”œâ”€â”€ output.ts
â”‚   â”‚   â””â”€â”€ rendering.ts
â”‚   â”œâ”€â”€ codebase/                       # Codebase analysis
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ scanner.ts
â”‚   â”‚   â”œâ”€â”€ indexer.ts
â”‚   â”‚   â”œâ”€â”€ search.ts
â”‚   â”‚   â””â”€â”€ watcher.ts
â”‚   â”œâ”€â”€ commands/                       # Command processing
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ parser.ts
â”‚   â”‚   â”œâ”€â”€ executor.ts
â”‚   â”‚   â””â”€â”€ handlers/
â”‚   â”‚       â”œâ”€â”€ edit.ts
â”‚   â”‚       â”œâ”€â”€ search.ts
â”‚   â”‚       â”œâ”€â”€ explain.ts
â”‚   â”‚       â”œâ”€â”€ git.ts
â”‚   â”‚       â””â”€â”€ system.ts
â”‚   â”œâ”€â”€ ai/                             # AI integration
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ client.ts
â”‚   â”‚   â”œâ”€â”€ context.ts
â”‚   â”‚   â”œâ”€â”€ prompts.ts
â”‚   â”‚   â””â”€â”€ response.ts
â”‚   â”œâ”€â”€ fileops/                        # File operations
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ reader.ts
â”‚   â”‚   â”œâ”€â”€ writer.ts
â”‚   â”‚   â”œâ”€â”€ diff.ts
â”‚   â”‚   â””â”€â”€ vcs.ts
â”‚   â”œâ”€â”€ execution/                      # Command execution
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ shell.ts
â”‚   â”‚   â”œâ”€â”€ sandbox.ts
â”‚   â”‚   â””â”€â”€ monitor.ts
â”‚   â”œâ”€â”€ auth/                           # Authentication
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ oauth.ts
â”‚   â”‚   â””â”€â”€ tokens.ts
â”‚   â”œâ”€â”€ telemetry/                      # Analytics and telemetry
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ events.ts
â”‚   â”‚   â””â”€â”€ reporter.ts
â”‚   â”œâ”€â”€ errors/                         # Error handling
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”œâ”€â”€ handlers.ts
â”‚   â”‚   â””â”€â”€ formatter.ts
â”‚   â””â”€â”€ utils/                          # Utilities
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ logger.ts
â”‚       â”œâ”€â”€ async.ts
â”‚       â””â”€â”€ formatting.ts
â”œâ”€â”€ scripts/                            # Build and deployment scripts
â”‚   â”œâ”€â”€ build.js
â”‚   â””â”€â”€ preinstall.js
â””â”€â”€ tests/                              # Test suite
    â”œâ”€â”€ unit/
    â”œâ”€â”€ integration/
    â””â”€â”€ fixtures/</code></pre><p>Now this is the part where it gets wild. Strap yourself in for another <a href="https://ghuntley.com/oh-fuck/" rel="noreferrer">"oh-fuck" moment in time</a>....</p><figure><img src="https://ghuntley.com/content/images/2025/03/CleanShot-2025-03-01-at-17.50.15.png" alt="" loading="lazy" width="1097" height="446" srcset="https://ghuntley.com/content/images/size/w600/2025/03/CleanShot-2025-03-01-at-17.50.15.png 600w, https://ghuntley.com/content/images/size/w1000/2025/03/CleanShot-2025-03-01-at-17.50.15.png 1000w, https://ghuntley.com/content/images/2025/03/CleanShot-2025-03-01-at-17.50.15.png 1097w"></figure><p>As the <code>CLI.js</code> is circa 5Mb in size. What follows is going to require a-lot of patience but the key is to use the following prompt and keep giving it "yeah bb, you doing great. keep going" words of encouragement.</p><blockquote>Look at the SPECS library. <br>Look at CLAUDE-CODE folder. <br>Look at @CLI.js (do not confuse it with @cli.ts), keep transpiling and implement anything that's not in the SPECS folder that has not been implemented in the CLAUDE-CODE folder.</blockquote><p>Seriously, you are going to need to enter that at least 100 times over the next 30 minutes.  </p><p>Now, a sharp mind should have picked up by now the implications of this but I'll spell it out. Using the above technique you can <a href="https://en.wikipedia.org/wiki/Cleanroom_software_engineering?ref=ghuntley.com">clean-room</a> any software in existence. </p><h2 id="that-doesnt-impress-me-much">that doesn't impress me much...</h2><p>Deobfuscating JavaScript isn't that interesting or impressive though. Understand dear reader that this technique can be done on any programming language and even from pre-existing binaries themselves. I've transpiled from ASM to into very human readable C successfully and others have converted VB .exe's to Python...</p><figure><blockquote><div lang="en" dir="ltr"><p>Reddit grandfather uploads 27 year old EXE file of a visual basic game and Claude one-shotted recreating the game in Python in under 5 minutes!!</p><p>From the binary. <a href="https://t.co/KEzUfisxmu?ref=ghuntley.com">pic.twitter.com/KEzUfisxmu</a></p></div>â€” Deedy (@deedydas) <a href="https://twitter.com/deedydas/status/1894841573311197239?ref_src=twsrc%5Etfw&amp;ref=ghuntley.com">February 26, 2025</a></blockquote>
</figure><h2 id="still-reading-good-its-time-for-the-grand-reveal-aka-what-this-entire-blog-post-is-about">still reading? good it's time for the grand reveal aka what this entire blog post is about...</h2><div><p>All those "source available" founders who <a href="https://ghuntley.com/screwed/" rel="noreferrer">raised shit-loads-of-cash in the last boom</a> are now screwed, as anyone can re-implement their "proprietary features" which provide them with revenue within hours using the above technique to launch competing startups <a href="https://ghuntley.com/dothings/">at lower-operating costs</a>. </p><p>All you need is access to their source-code and they have given you the keys to the kingdom on a golden platter by going to market as "commercial open-source" with source-code "protected by restrictive licensing" uploaded directly onto GitHub.</p></div><figure><a href="https://www.theregister.com/2024/08/23/cockroachdb_opinion/?ref=ghuntley.com"><div><p>CockroachDB scurries off to proprietary software land</p><p>As VC-owned fauxpen source biz yells â€˜show me the money,â€™ more may follow to the peril of the community</p><p><img src="https://ghuntley.com/content/images/icon/favicon.svg" alt=""><span>The Register</span><span>Steven J. Vaughan-Nichols</span></p></div><p><img src="https://ghuntley.com/content/images/thumbnail/shutterstock_open_source.jpg" alt="" onerror="this.style.display = 'none'"></p></a></figure><div><p>Please understand that restrictive software licenses no longer matter because these LLMs can be driven to behave like Bitcoin mixers that bypass licensing and copyright restrictions using the approach detailed in this blog post.</p><p>These zombie companies are about to get harvested if the founders don't "Elon Musk" their companies... fast... especially if they don't have a defensible moat.</p></div><p>So, here's to the next generation of builders. May you use these insights wisely and to your advantage. It's an incredible time to be alive <em>if you just do things</em>.</p><figure><a href="https://ghuntley.com/dothings"><div><p>The future belongs to people who can just do things</p><p>There, I said it. I seriously canâ€™t see a path forward where the majority of software engineers are doing artisanal hand-crafted commits by as soon as the end of 2026. If you are a software engineer and were considering taking a gap year/holiday this year it would be an</p><p><img src="https://ghuntley.com/content/images/icon/android-chrome-192x192-4.png" alt=""><span>Geoffrey Huntley</span><span>Geoffrey Huntley</span></p></div><p><img src="https://ghuntley.com/content/images/thumbnail/1_96TO5SzegxgqzECdkV2LNA-1.webp" alt="" onerror="this.style.display = 'none'"></p></a><figcaption><p><span>go fucking build. if you aren't losing sleep right now and doing 80+hr weeks of coding right now whyyyyyyyy. there's so much opportunity available </span><i><em>right now</em></i><span>...</span></p></figcaption></figure><h2 id="ps-hi-anthropic">ps. hi Anthropic</h2><p>I'm friendly - if you have any concerns/questions please <a href="https://ghuntley.com/contact" rel="noreferrer">contact me</a>. There's not many killer examples of how to do MCP (even though in my <a href="https://ghuntley.com/screwed/" rel="noreferrer">last post I recommended folks learn em</a>) properly and in a follow-up blog post coming shortly I'll be going deep from fundamentals to teach folks how to do it. Your tool system prompts are A+++ and I'm a big fan...</p><figure><blockquote><p lang="en" dir="ltr">I think you should be making your tool descriptions much much longer. They are like system prompts.</p>â€” Quinn Slack (@sqs) <a href="https://twitter.com/sqs/status/1894209937552936994?ref_src=twsrc%5Etfw&amp;ref=ghuntley.com">February 25, 2025</a></blockquote>
</figure><p>If you enjoyed reading, give 'em a share please:</p><ul><li>Twitter: <a href="https://x.com/GeoffreyHuntley/status/1895755817082892340?ref=ghuntley.com">https://x.com/GeoffreyHuntley/status/1895755817082892340</a></li><li>BlueSky: <a href="https://bsky.app/profile/ghuntley.com/post/3ljcjfbqpsh2k?ref=ghuntley.com">https://bsky.app/profile/ghuntley.com/post/3ljcjfbqpsh2k</a></li></ul>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Zen 5's AVX-512 Frequency Behavior (168 pts)]]></title>
            <link>https://chipsandcheese.com/p/zen-5s-avx-512-frequency-behavior</link>
            <guid>43215781</guid>
            <pubDate>Sat, 01 Mar 2025 04:10:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://chipsandcheese.com/p/zen-5s-avx-512-frequency-behavior">https://chipsandcheese.com/p/zen-5s-avx-512-frequency-behavior</a>, See on <a href="https://news.ycombinator.com/item?id=43215781">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto"><p>Zen 5 is AMD's first core to use full-width AVX-512 datapaths. Its vector execution units are 512 bits wide, and its L1 data cache can service two 512-bit loads per cycle. Intel went straight to 512-bit datapaths with Skylake-X back in 2017, and used fixed frequency offsets and transition periods to handle AVX-512 power demands. Later Intel CPUs did away with fixed fixed frequency offsets, but Skylake-X's AVX-512 teething troubles demonstrate the difficulties that come with running wide datapaths at high clock speeds. Zen 5 benefits from a much better process node and also has no fixed clock speed offsets when running AVX-512 code.</p><blockquote><p>Through the use of improved on-die sensors, AC capacitance (Cac) monitors, and di/dt-based adaptive clocking, "Zen 5" can achieve full AVX512 performance at peak core frequency.</p><p>"Zen 5": The AMD High-Performance 4nm x86-64 Microprocessor Core</p></blockquote><p><span>But if a Zen 5 core is running at 5.7 GHz and suddenly gets faced with an AVX-512 workload, what exactly happens? Here, I'm probing AVX-512 behavior using a modified version of my boost clock testing code. I wrote that code </span><a href="https://chipsandcheese.com/p/how-quickly-do-cpus-change-clock-speeds" rel="">a couple years ago</a><span> and used dependent integer adds to infer clock speed. Integer addition typically has single cycle latency, making it a good platform-independent proxy for clock speed. Instead of checking clock ramp time, I'm switching to a different test function with AVX-512 instructions mixed in after each dependent add. I also make sure the instructions I place between the dependent adds are well within what Zen 5's FPU can handle every cycle, which prevents the FPU from becoming a bottleneck.</span></p><p>I started by placing two fused multiply-add (FMA) instructions in each iteration, each of which operates on a 512-bit vector of packed FP32 values. After the Ryzen 9 reaches 5.7 GHz running the scalar integer function, I switch over to AVX-512 instructions.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png" width="1456" height="716" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/b5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:716,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:63918,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb5ffc7d0-e256-4457-9560-79b8ad8586bf_1530x752.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p>Impressively, nothing changes. The dependent integer adds continue to execute at ~5.7 GHz. Zooming in doesnâ€™t show a transition period either. I see a single data point covering 1.3 microseconds where the core executed those dependent integer adds at â€œonlyâ€ a 5.3 GHz average. The very next data point shows the core running at full speed again.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png" width="1456" height="710" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:710,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:63995,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa3b8ab9e-6d15-453a-b409-c855881e55d6_1538x750.png 1456w" sizes="100vw"></picture></div></a></figure></div><p><span>Evidently, Zen 5â€™s FPU is not troubled by getting hit with 512-bit vector operations, even when running at 5.7 GHz. If there is a transition period for the increased power draw, itâ€™s so tiny that it can be ignored. That </span><a href="http://numberworld.org/blogs/2024_8_7_zen5_avx512_teardown/" rel="">matches Alex Yeeâ€™s observations</a><span>, and shows just how strong Zen 5â€™s FPU is. For comparison, the same experiment on Skylake-X shows both a transition period and lower clock speeds after the transition completes. Intelâ€™s Core i9-10900X reaches 4.65 GHz after a rather long clock ramp using scalar integer code. Switching to the AVX-512 test function drops clock speeds to 4 GHz, a significant decrease from 4.65 GHz.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png" width="1450" height="637" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:637,&quot;width&quot;:1450,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:85689,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4f3126be-3a1c-4f5b-8eb2-56dc5bc624b3_1450x637.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>Zooming in on Skylake-X data reveals a transition period, which </span><a href="https://travisdowns.github.io/blog/2020/01/17/avxfreq1.html#512-bit-integer-simd-avx-512" rel="">Travis Downs</a><span> and </span><a href="http://numberworld.org/blogs/2024_8_7_zen5_avx512_teardown/" rel="">Alex Yee</a><span> noted from a while ago. My test eats a longer 55 microsecond transition period though. Travis Downs saw a 20 microsecond transition, while Alex Yee mentions a 50k cycle delay (~12 microseconds at 4 GHz).</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png" width="1441" height="636" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:636,&quot;width&quot;:1441,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:83715,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F922180c5-77ce-48d9-ac58-52c40dec2647_1441x636.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Note the dip after switching to the AVX-512 test function</figcaption></figure></div><p>Iâ€™m not sure why I see a longer transition, but I donâ€™t want to dwell on it because of methodology differences. Travis Downs used vector integer instructions, and I used floating point ones. And I want to focus on Zen 5.</p><p>After the transition finishes, the i9-10900X levels out at 3.7 GHz, then briefly settles at 3.8 GHz for less than 0.1 ms before reaching its steady state 4 GHz speed.</p><p>Zen 5 also doubles L1D load bandwidth, and Iâ€™m exercising that by having each FMA instruction source an input from the data cache. I used the following pattern above:</p><pre><code><code>  add rbx, r8
  vfmadd132ps zmm16, zmm1, zmm0
  vfmadd132ps zmm17, zmm2, zmm0
  
  add rbx, r8
  vfmadd132ps zmm18, zmm3, zmm0
  vfmadd132ps zmm19, zmm4, zmm0

  etc</code></code></pre><p>Iâ€™m changing those FMA instructions to use a memory operand. Because Zen 5 can handle two 512-bit loads per cycle, the core should have no problems maintaining 3 IPC. Thatâ€™s two 512-bit FMAs, or 64 FP32 FLOPS, alongside a scalar integer add.</p><pre><code><code>  add rbx, r8
  vfmadd132ps zmm16, zmm1, [r15]
  vfmadd132ps zmm17, zmm2, [r15 + 64]

  add rbx, r8
  vfmadd132ps zmm18, zmm3, [r15 + 128]
  vfmadd132ps zmm19, zmm4, [r15 + 192]

  etc</code></code></pre><p>With the load/store unitâ€™s 512-bit paths in play, the Ryzen 9 9900X has to undergo a transition period of some sort before recovering to 5.5 GHz. From the instruction throughput perspective, Zen 5 apparently dips to 4.7 GHz and stays there for a dozen milliseconds. Then it slowly ramps back up until it reaches steady state speeds.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png" width="1456" height="658" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:658,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:79917,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F247c5fe6-4ef1-451b-9893-f36a2e18c271_1532x692.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The Ryzen 9 9900X splits its cores across two Core Complex Dies, or CCDs. The first CCD can reach 5.7 GHz, while the second tops out at 5.4 GHz. Cores on the second CCD show no transition period on this test.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png" width="1456" height="667" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/e453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:667,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:117219,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe453729e-6a7d-4012-a6a1-74878d41b186_1619x742.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Cores within the fast CCD all need a transition period, but the exact nature of that transition varies. Not all cores reach steady state AVX-512 frequencies at the same time, and some cores take a sharper hit when this heavy AVX-512 sequence shows up.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png" width="1280" height="749" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:749,&quot;width&quot;:1280,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:111926,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3b47b604-6628-4a80-8f91-4c66b34e6e94_1280x749.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Not showing the switch point because itâ€™s pretty obvious where it is, and happens at about the same time for all cores within CCD0</figcaption></figure></div><p>Per-core variation suggests each Zen 5 core has its own sensors and adjusts its performance depending on something. Perhaps itâ€™s measuring voltage. From this observation, I wouldnâ€™t be surprised if another 9900X example shows slightly different behavior.</p><p>Zen 5â€™s frequency appears to dip during the transition period, based on how fast itâ€™s executing instructions compared to its expected capability. But while my approach of using dependent scalar integer adds is portable, it canâ€™t differentiate between a core running at lower frequency and a core refusing to execute instructions at full rate. The second case may sound weird. But Travis Downs concluded Skylake-X did exactly that based on performance counter data.</p><blockquote><p>[Skylake-X] continues executing instructions during a voltage transition, but at a greatly reduced speed: 1/4th of the usual instruction dispatch rate</p><p><a href="https://travisdowns.github.io/blog/2020/01/17/avxfreq1.html#512-bit-integer-simd-avx-512" rel="">Gathering Intel on Intel AVX-512 Transitions</a><span>, Travis Downs</span></p></blockquote><p>Executing instructions at 1/4 rate would make me infer a 4 GHz core is running at 1 GHz, which is exactly what I see with the Skylake-X transition graph above. Something similar actually happens on Zen 5. Itâ€™s not executing instructions at the usual rate during the transition period, making it look like itâ€™s clocking slower from the software perspective.</p><p>But performance counter data shows Zen 5 does not sharply reduce its clock speed when hit with AVX-512 code. Instead, it gradually backs off from maximum frequency until it reaches a sustainable clock speed for the workload itâ€™s hit with. During that period, instructions per cycle (IPC) decreases. IPC gradually recovers as clock speeds get closer to the final steady-state frequency. Once that happens, instruction execution rate recovers to the expected 3 IPC (1x integer add + 2x FMA).</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png" width="1456" height="642" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:642,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:92699,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F291aaf1f-93cf-47bb-ae95-ab4227f0a537_1523x672.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>I do have some extra margin of error when reading performance counter data, because Iâ€™m calling Linuxâ€™s </span><code>perf</code><span> API before and after each function call, but measuring time within those function calls. That error would become negligible if the test function runs for longer, with a higher iteration count. But Iâ€™m keeping iteration counts low to look for short transitions, resulting in a 1-3% margin of error. Thatâ€™s fine for seeing whether the dip in execution speed is truly caused by lower clock speed.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png" width="967" height="202" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:202,&quot;width&quot;:967,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:49981,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0936be87-4a11-4bef-ac57-b013f0ee8e66_967x202.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>As you might expect, different cores within CCD0 vary in how much they do â€œIPC throttlingâ€, for lack of a better term. Some cores cut IPC more than others when hit with sudden AVX-512 load. Curiously, a core that cuts IPC harder (core 0) reaches steady state a tiny bit faster than a core that cut IPC less to start with (core 3).</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png" width="1282" height="563" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:563,&quot;width&quot;:1282,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:59800,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698c5e0-22cd-43bd-8287-bbd84cd0ea99_1282x563.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>Now I wonder if Zen 5â€™s IPC throttling is triggered by the load/store unit, or overall load. Creating heavier FPU load should make that clear. Zen 5â€™s FPU has four pipes for math operations. FMA operations can go down two of those pipes. Dropping a </span><code>vaddps</code><span> into the mix will load a third pipe. On the fast CCD, that increases the transition period from ~22 to ~32 ms. Steady state clock speed decreases by about 150 MHz compared to the prior test.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png" width="1279" height="609" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:609,&quot;width&quot;:1279,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:84835,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F60d59057-89d6-4114-99f3-0ccc11a60aeb_1279x609.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Therefore, overall stress on the core (for lack of a better term) determines whether Zen 5 needs a transition period. It just so happens that 512-bit accesses to the memory subsystem are heavy. 512-bit register-to-register operations are no big deal, but adding more of them on top of data cache accesses increases stress on the core and causes more IPC throttling.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png" width="1278" height="551" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/af1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:551,&quot;width&quot;:1278,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:65127,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faf1d44bd-2d3f-419d-becc-4d7833897fa7_1278x551.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>To be clear, IPC during the transition period with the 512-bit FP add thrown in is higher than before. But 2.75 IPC is 68.75% of the expected 4 GHz, while 2.5 IPC in the prior test is 83.3% of the expected 3 IPC.</p><p>Performance counter data suggests the core decreases actual clock speed at a similar rate on both tests. The heavier load causes a longer transition period because the core has to keep reducing clocks for longer before things stabilize.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png" width="1281" height="547" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a0eb95df-20c0-490d-9033-5524562ac973_1281x547.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:547,&quot;width&quot;:1281,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:250356,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa0eb95df-20c0-490d-9033-5524562ac973_1281x547.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Really zoomed in, especially on the y-axis</figcaption></figure></div><p>Even with this heavier load, a core on the 9900Xâ€™s fast CCD still clocks higher than one on the slower CCD. Testing the add + 2x FMA + FADD combination on the slower CCD did not show any transition period. Thatâ€™s a hint Zen 5 only needs IPC throttling if clock speed is too high when a heavy AVX-512 sequence comes up.</p><p>Transitions and the associated IPC throttling could be problematic if software rapidly alternates between heavy AVX-512 sequences and light scalar integer code. But AMD does not let Zen 5 get stuck repeatedly taking transition penalties. If I switch between the AVX-512 and scalar integer test functions, the transition doesnâ€™t repeat.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png" width="1354" height="752" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/baf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:752,&quot;width&quot;:1354,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:110549,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbaf951ab-c60c-4a25-949a-a2b9bf276806_1354x752.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>AMD does not immediately let Zen 5 return to maximum frequency after AVX-512 load lets up. From the start of the graph we can see Zen 5 can ramp clocks from idle to 5.7 GHz in just a few milliseconds, so this isnâ€™t a limitation of how fast the core can pull off frequency changes. Remember how the slower CCD never suffered transitions? I suspect thatâ€™s because it never found itself clocked too high to begin with. Apparently the same also applies to the fast CCD. If it happens to be running at a lower clock when a heavy AVX-512 sequence shows up, it doesnâ€™t need to transition.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png" width="1354" height="751" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:751,&quot;width&quot;:1354,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:112416,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F928f2131-cf9d-4c6f-970b-1c85aba2afbc_1354x751.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Longer function switching intervals bring the transitions back, but now theyâ€™re softer. The first transition interval starts at 5.61 GHz and ends at 5.39 GHz. It takes nearly 21 ms.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png" width="1353" height="755" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/cea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:755,&quot;width&quot;:1353,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:111918,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcea8e5f2-ace0-49a2-a30f-6641ef8d14bd_1353x755.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The next transition starts when Zen 5 has only recovered to 5.55 GHz, and only lasts ~10 ms. IPC throttling is less severe too. IPC only drops to ~3.2 IPC, not 2.7 GHz like before.</p><p>With an even longer switching interval, I can finally trigger full-out transitions in repeated fashion. Thus transition periods and IPC throttling behavior vary depending on how much excessive clock speed the core has to shed.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png" width="1343" height="724" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:724,&quot;width&quot;:1343,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:93185,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2fc714bb-5d4e-4d75-b41a-f41b2b0feb91_1343x724.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The longer switch interval also shows that Zen 5 takes over 100 ms to fully regain maximum clocks after the heavy AVX-512 load disappears. Therefore, the simple scalar integer code with just dependent adds is running slower for some time. Itâ€™s worth noting that â€œslowerâ€ here is still 5.3 GHz, and very fast in an absolute sense. AMDâ€™s Ryzen 9 9900X is not shedding 600 MHz like Intelâ€™s old Core i9-10900X did with a lighter AVX-512 test sequence.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png" width="1343" height="725" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:725,&quot;width&quot;:1343,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:128407,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1705d5da-5a6c-4a28-8520-f764062bf430_1343x725.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Zen 5â€™s clock ramp during the recovery period isnâ€™t linear. It gains 200 MHz over the first 50 ms, but takes longer than 50 ms to recover the last 100 MHz. I think this behavior is deliberate and aimed at avoiding frequent transitions. If heavy AVX-512 code might show up again, keeping the core clock just a few percent lower is bettert than throttling IPC by over 30%. As clock speed goes higher and potential transitions become more expensive, the core becomes less brave and increases clocks slower.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png" width="1342" height="721" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:721,&quot;width&quot;:1342,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:115224,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F24bc6e6e-df67-4b99-8e7e-c3035aac239e_1342x721.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>The way IPC drops more while clock speed (from perf counters) remains constant makes it feel like voltage droop. No way to tell though</figcaption></figure></div><p>Quickly switching between scalar integer and heavy AVX-512 code basically spreads out the transition, so that the core eventually converges at a sustainable clock speed for the AVX-512 sequence in question. Scalar integer code between AVX-512 sequences continues to run at full speed. And the degree of IPC throttling is very fine grained. There is no fixed 1:4 rate as on Skylake-X.</p><p><span>Zen 5 also has performance counters that describe why the renamer could not send micro-ops downstream. One reason is that the floating point non-scheduling queue (FP NSQ) is full. The FP NSQ on Zen 5 basically acts as the entry point for the FPU. See the prior </span><a href="https://chipsandcheese.com/p/amds-ryzen-9950x-zen-5-on-desktop" rel="">Zen 5 article</a><span> for more details.</span></p><p>If the NSQ fills often, the frontend is supplying the FPU with micro-ops faster than the FPU can handle them. As mentioned earlier, Zen 5â€™s FPU should have no problems doing two 512-bit FMA operations together with a 512-bit FP add every cycle.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png" width="1423" height="724" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:724,&quot;width&quot;:1423,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:157309,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3c021ba1-f71e-4822-8f1d-3a0be87c2b77_1423x724.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>FP NSQ dispatch stall counts are still nonzero after the transition ends, so the test might have some margin of error from sub-optimal pipe assignment within the FPU. Life canâ€™t be perfect right</figcaption></figure></div><p>But during the transition period, the FP NSQ fills up quite often. At its worst, itâ€™s full over nearly 10% of (actual) cycles. Therefore Zen 5â€™s frontend and renamer are running at full speed. The IPC throttling is happening somewhere further down the pipeline. Likely, Zen 5â€™s FP scheduler is holding back and not issuing micro-ops every cycle even when theyâ€™re ready. AMD doesnâ€™t have performance counters at the schedule/execute stage, so that theory is impossible to verify.</p><p>Running 512-bit execution units at 5.7 GHz is no small feat, and itâ€™s amazing Zen 5 can do that. The coreâ€™s FPU by itself is very efficient. But hit more 512-bit datapaths around the core, and youâ€™ll eventually run into cases where the core canâ€™t do what youâ€™re asking of it at 5.7 GHz. Zen 5 handles such sudden, heavy AVX-512 load with a very fine grained IPC throttling mechanism. It likely uses feedback from per-core sensors, and has varying behavior even between cores on the same CCD. Load-related clock frequency changes are slow in both directions, likely to avoid repeated IPC throttling and preserve high performance for scalar integer code in close proximity to heavy AVX-512 sequences.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png" width="1124" height="1080" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/f47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1080,&quot;width&quot;:1124,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:1633165,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff47eab0e-3168-4170-81d6-62a92c9d95b2_1124x1080.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>The tested chip</figcaption></figure></div><p>Transient IPC throttling raises deep philosophical questions about the meaning of clock frequency. If you maintain a 5.7 GHz clock signal and increment performance counters every cycle, but execute instructions as if you were running at 3.6 GHz, how fast are you really running? Certainly itâ€™s 5.7 GHz from a hardware monitoring perspective. But from a software performance perspective, the core behaves more like itâ€™s running at 3.6 GHz. Which perspective is correct? If a tree falls and no oneâ€™s around to hear it, did it make a sound? What if some parts of the core are running at full speed, but others arenâ€™t? If a tree is split by lightning and only half of it falls, is it still standing?</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp" width="827" height="539" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/b540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:539,&quot;width&quot;:827,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:98466,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/webp&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:&quot;https://chipsandcheese.com/i/158152986?img=https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp&quot;,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb540b7a6-1bb2-4187-b084-36b2b63e066b_827x539.webp 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Pads on the back of the 9900X. Pretty eh?</figcaption></figure></div><p>Stepping back though, Zen 5â€™s AVX-512 clock behavior is much better than Skylake-Xâ€™s. Zen 5 has no fixed frequency offsets for AVX-512, and can handle heavier AVX-512 sequences while losing less clock speed than Skylake-X. Transitions triggered by heavier AVX-512 sequences are interesting, but Zen 5â€™s clocking strategy seems built to minimize those transitions. Maybe corner cases exist where Zen 5â€™s IPC throttling can significantly impact performance. I suspect such corner cases are rare, because Zen 5 has been out for a while and I havenâ€™t seen anyone complain. And even if it does show up, you can likely avoid the worst of it by running on a slower clocked CCD (or part). Still, it was interesting to trigger it with a synthetic test and see just how AMD deals with 512-bit datapaths at high speed.</p><p><span>If you like the content then consider heading over to the </span><a href="https://www.patreon.com/ChipsandCheese" rel="">Patreon</a><span> or </span><a href="https://www.paypal.com/donate/?hosted_button_id=4EMPH66SBGVSQ" rel="">PayPal</a><span> if you want to toss a few bucks to Chips and Cheese. Also consider joining the </span><a href="https://discord.gg/TwVnRhxgY2" rel="">Discord</a><span>.</span></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Self-Hosting a Firefox Sync Server (310 pts)]]></title>
            <link>https://blog.diego.dev/posts/firefox-sync-server/</link>
            <guid>43214294</guid>
            <pubDate>Sat, 01 Mar 2025 01:03:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.diego.dev/posts/firefox-sync-server/">https://blog.diego.dev/posts/firefox-sync-server/</a>, See on <a href="https://news.ycombinator.com/item?id=43214294">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>After switching from Firefox to LibreWolf, I became interested in the idea of self-hosting my own Firefox Sync server.
Although I had seen this was possible before, I had never really looked into itâ€”until now. I embarked on a journey to
set this up, and while it wasnâ€™t completely smooth sailing, I eventually got it working. Hereâ€™s how it went.</p><h2 id="finding-the-right-sync-server">Finding the Right Sync Server</h2><h3 id="initial-search-mozillas-sync-server-repo">Initial Search: Mozillaâ€™s Sync Server Repo</h3><p>I started by searching for â€œfirefox sync server githubâ€ and quickly
found <a href="https://github.com/mozilla-services/syncserver">Mozillaâ€™s syncserver repo</a>. This is an all-in-one package
designed for self-hosting a Firefox Sync server. It bundles both the tokenserver for authentication and syncstorage for
storage, which sounded like exactly what I needed.</p><p>However, there were two red flags:</p><ol><li>The repository had â€œfailedâ€ tags in the build history.</li><li>A warning was prominently displayed stating that the repository was no longer being maintained and pointing to a new
project in Rust.</li></ol><h3 id="switching-to-rust-syncstorage-rs">Switching to Rust: syncstorage-rs</h3><p>With that in mind, I followed the link to <a href="https://github.com/mozilla-services/syncstorage-rs">syncstorage-rs</a>, which is
a modern, Rust-based version of the original project. It seemed like the more viable option, so I decided to move
forward with this one. But first, I wanted to check if there was a ready-to-go Docker image to make deployment easier.
Unfortunately, there wasnâ€™t one, but the documentation did mention running it with Docker.</p><p>This is where things started to get complicated.</p><h2 id="diving-into-docker-confusion-and-complexity">Diving Into Docker: Confusion and Complexity</h2><h3 id="documentation-woes">Documentation Woes</h3><p>The Docker documentation had some strange parts. For example, it mentioned:</p><ul><li>Ensuring that <code>grpcio</code> and <code>protobuf</code> versions matched the versions used by <code>google-cloud-rust-raw</code>. This sounded
oddâ€”shouldnâ€™t Docker handle version dependencies automatically?</li><li>Another confusing part was the instruction to manually copy the contents of <code>mozilla-rust-sdk</code> into the top-level root
directory. Again, why wasnâ€™t this step automated in the Dockerfile?</li></ul><p>At this point, I was feeling a bit uneasy but decided to push forward. I reviewed the repo, the Dockerfile, the
Makefile, and the circleci workflows. Despite all that, I was still unsure how to proceed.</p><h3 id="a-simpler-solution-syncstorage-rs-docker">A Simpler Solution: syncstorage-rs-docker</h3><p>I then stumbled upon <a href="https://github.com/dan-r/syncstorage-rs-docker">dan-râ€™s syncstorage-rs-docker repo</a>, which had a
much simpler Docker setup. The description explained that the author had also encountered issues with the
original documentation and decided to create a Docker container for their own infrastructure.</p><p>At this point, I felt reassured that I wasnâ€™t alone in my confusion, and decided to give this setup a try.</p><h2 id="setting-up-the-server-docker-compose-and-mariadb">Setting Up the Server: Docker Compose and MariaDB</h2><h3 id="docker-compose-setup">Docker Compose Setup</h3><p>I copied the following services into my <code>docker-compose.yaml</code>:</p><div><pre tabindex="0"><code data-lang="yaml"><span><span><span>  </span><span>firefox_mariadb</span><span>:</span><span>
</span></span></span><span><span><span>    </span><span>container_name</span><span>:</span><span> </span><span>firefox_mariadb</span><span>
</span></span></span><span><span><span>    </span><span>image</span><span>:</span><span> </span><span>linuxserver/mariadb:10.6.13</span><span>
</span></span></span><span><span><span>    </span><span>volumes</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>/data/ffsync/dbdata:/config</span><span>
</span></span></span><span><span><span>    </span><span>restart</span><span>:</span><span> </span><span>unless-stopped</span><span>
</span></span></span><span><span><span>    </span><span>environment</span><span>:</span><span>
</span></span></span><span><span><span>      </span><span>MYSQL_DATABASE</span><span>:</span><span> </span><span>syncstorage</span><span>
</span></span></span><span><span><span>      </span><span>MYSQL_USER</span><span>:</span><span> </span><span>sync</span><span>
</span></span></span><span><span><span>      </span><span>MYSQL_PASSWORD</span><span>:</span><span> </span><span>syncpass</span><span>
</span></span></span><span><span><span>      </span><span>MYSQL_ROOT_PASSWORD</span><span>:</span><span> </span><span>rootpass</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span><span>firefox_syncserver</span><span>:</span><span>
</span></span></span><span><span><span>    </span><span>container_name</span><span>:</span><span> </span><span>firefox_syncserver</span><span>
</span></span></span><span><span><span>    </span><span>build</span><span>:</span><span>
</span></span></span><span><span><span>      </span><span>context</span><span>:</span><span> </span><span>/root/ffsync</span><span>
</span></span></span><span><span><span>      </span><span>dockerfile</span><span>:</span><span> </span><span>Dockerfile</span><span>
</span></span></span><span><span><span>      </span><span>args</span><span>:</span><span>
</span></span></span><span><span><span>        </span><span>BUILDKIT_INLINE_CACHE</span><span>:</span><span> </span><span>1</span><span>
</span></span></span><span><span><span>    </span><span>restart</span><span>:</span><span> </span><span>unless-stopped</span><span>
</span></span></span><span><span><span>    </span><span>ports</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>"8000:8000"</span><span>
</span></span></span><span><span><span>    </span><span>depends_on</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>firefox_mariadb</span><span>
</span></span></span><span><span><span>    </span><span>environment</span><span>:</span><span>
</span></span></span><span><span><span>      </span><span>LOGLEVEL</span><span>:</span><span> </span><span>info</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_URL</span><span>:</span><span> </span><span>https://mydomain/sync</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_CAPACITY</span><span>:</span><span> </span><span>5</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_MASTER_SECRET</span><span>:</span><span> </span><span>mastersecret</span><span>
</span></span></span><span><span><span>      </span><span>METRICS_HASH_SECRET</span><span>:</span><span> </span><span>metricssecret</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_SYNCSTORAGE_DATABASE_URL</span><span>:</span><span> </span><span>mysql://sync:usersync@firefox_mariadb:3306/syncstorage_rs</span><span>
</span></span></span><span><span><span>      </span><span>SYNC_TOKENSERVER_DATABASE_URL</span><span>:</span><span> </span><span>mysql://sync:usersync@firefox_mariadb:3306/tokenserver_rs</span><span>
</span></span></span></code></pre></div><p>A few tips:</p><ul><li>Be cautious with the database passwords. Avoid using special characters like <code>"/|%"</code> as they can cause issues during
setup.</li><li>I added the BUILDKIT_INLINE_CACHE argument to the Docker Compose file to make better use of caching, which reduced
build time while testing.</li></ul><h3 id="initializing-the-database">Initializing the Database</h3><p>I cloned the repository and copied the Dockerfile and <code>initdb.sh</code> script to my server. After making some tweaks, I ran
the following steps to get the database up and running:</p><ol><li>Bring up the MariaDB container:<div><pre tabindex="0"><code data-lang="bash"><span><span>docker-compose up -d firefox_mariadb
</span></span></code></pre></div></li><li>Make the initialization script executable and run it:<div><pre tabindex="0"><code data-lang="bash"><span><span>chmod +x initdb.sh
</span></span><span><span>./initdb.sh
</span></span></code></pre></div></li></ol><h3 id="bringing-the-stack-online">Bringing the Stack Online</h3><p>Finally, I brought up the entire stack with:</p><h2 id="configuring-reverse-proxy-with-caddy">Configuring Reverse Proxy with Caddy</h2><p>Next, I needed to update my Caddy reverse proxy to point to the new Sync server. I added the following configuration:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>mydomain:443 <span>{</span>
</span></span><span><span>     reverse_proxy firefox_syncserver:8000 <span>{</span>
</span></span><span><span>    <span>}</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>After updating Caddy with the DNS entry, I restarted the proxy and the sync server was up and running.</p><h2 id="challenges-faced">Challenges Faced</h2><p>While I eventually got everything working, there were a few notable challenges along the way:</p><ol><li><strong>Database persistence</strong>: I had issues with persistent data when restarting the MariaDB container. Make sure to clear
out old data if needed.</li><li><strong>Server storage</strong>: My server ran out of space during the build process due to the size of the Docker images and
intermediate files.</li><li><strong>Following the right steps</strong>: It took me a while to figure out the right steps, and much of the time was spent
experimenting with the Docker setup.</li></ol><h2 id="final-thoughts">Final Thoughts</h2><p>Setting up a self-hosted Firefox Sync server is not the easiest task, especially if youâ€™re not very familiar with Docker
or database management. The official documentation is confusing, but thanks to community efforts like
the <code>syncstorage-rs-docker</code> repo, itâ€™s doable.</p><p>In the end, it took me about two hours to get everything running, but it was worth it. If youâ€™re looking to control your
own Firefox Sync server, this guide should help you avoid some of the pitfalls I encountered.</p><p>Happy syncing!</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Housing Theory of Everything (228 pts)]]></title>
            <link>https://worksinprogress.co/issue/the-housing-theory-of-everything/</link>
            <guid>43214263</guid>
            <pubDate>Sat, 01 Mar 2025 00:59:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://worksinprogress.co/issue/the-housing-theory-of-everything/">https://worksinprogress.co/issue/the-housing-theory-of-everything/</a>, See on <a href="https://news.ycombinator.com/item?id=43214263">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>Western housing shortages do not just prevent many from ever affording their own home. They also drive inequality, climate change, low productivity growth, obesity, and even falling fertility rates.</p><article><div role="presentation"><p>Try listing every problem the Western world has at the moment. Along with Covid, you might include slow growth, climate change, poor health, financial instability, economic inequality, and falling fertility. These longer-term trends contribute to a sense of malaise that many of us feel about our societies. They may seem loosely related, but there is one big thing that makes them all worse. That thing is a shortage of housing: too few homes being built where people want to live. And if we fix those shortages, we will help to solve many of the other, seemingly unrelated problems that we face as well.</p>



<h2 id="the-obvious-effects-of-expensive-housing">The obvious effects of expensive housing</h2>



<p>Where you live affects nearly everything about your life â€“ where you work, how you spend time off, who your friends and neighbours are, how many kids you can have and when, and even how often you get sick. Most peopleâ€™s most valuable asset is, by far, their own home. And housing is so important for the overall economy because it determines the location and supply of the most important â€˜resourceâ€™ of all: people.</p>



<p>Thereâ€™s a growing consensus that housing is too expensive in most Western countries. In many places, the prices of new homes <a href="https://www.aeaweb.org/articles?id=10.1257/jep.32.1.3">far exceed</a> the cost of building more of them. Higher incomes in cities draw people to those places, who use some of their increased wages to bid up rents and house prices there. Easier credit and falling interest rates, which reflect a lower cost of borrowing and lower returns from other investments, <a href="https://www.adamsmith.org/blog/where-house-prices-come-from">have helped people bid up the price of housing as well</a>. For most goods, including very expensive and durable goods like ships and airplanes, higher incomes and falling interest rates would cause supply to increase, instead of keeping the price permanently high. But for housing in and around many in-demand cities, supply has not been able to keep up with demand.</p>



<p>This is true across the developed world: Dublin, Singapore, Auckland, Paris, Vancouver, Rome, Hong Kong, Barcelona, Moscow, Cape Town, Zurich and many other cities have wildly expensive housing compared to the cost of building more of it. Costs are especially high in places whose economies are built on <a href="https://press.princeton.edu/books/hardcover/9780691175034/capitalism-without-capital">intangible capital</a>, like software or financial services. In these kinds of industries, there are especially large benefits to people being near one another, because it makes them both more productive and more innovative. This is why the San Francisco Bay Area â€“ probably the most productive place in the Western world â€“ is also one of the most in-demand places to live. And that demand, plus restrictions on building more houses, is why it is one of the most expensive places to live as well.</p>



<p>This housing affordability problem has become much worse over the past four decades â€“ coinciding with, and partly driven by, the growth of the intangible economy â€” the move towards production based on software and intellectual property, instead of machinery and other physical capital. In the 1960s, it was commonplace that a middle class single-earner American or British family would be able to afford a comfortable home.</p>



<p>When more people want to live in an area, we either build more homes to accommodate them or squeeze them in to the existing housing stock, with those people bidding up the price of living there. We can see all of these mechanisms in play in the Western worldâ€™s most in-demand cities. In London, for example, empty homes now make up only a few percent of the total, as it becomes more and more costly to leave something empty.</p>



<p>The most dramatic evidence of housing scarcity can be seen in price rises over the past forty years. Average New York City metropolitan area house prices <a href="https://www.economist.com/graphic-detail/usa-house-prices">are up 706% since 1980</a> (or 376% more <a href="https://www.minneapolisfed.org/about-us/monetary-policy/inflation-calculator/consumer-price-index-1913-">than US consumer prices</a>, and 326% <a href="https://fred.stlouisfed.org/series/LES1252881500Q">more than US wages</a>). For San Francisco the rise is 932%. London house prices are up <a href="https://landregistry.data.gov.uk/app/ukhpi/browse?from=1980-01-01&amp;location=http%3A%2F%2Flandregistry.data.gov.uk%2Fid%2Fregion%2Flondon&amp;to=2021-07-01&amp;lang=en">over 2,100%</a> in that period (or <a href="https://ourworldindata.org/grapher/nominal-wages-consumer-prices-and-real-wages-in-the-uk-since-1750?time=1980..latest&amp;country=~GBR">around 1,500% more than wages</a>). Prices in Sydney, Australia, have <a href="https://www.abs.gov.au/statistics/economy/price-indexes-and-inflation/residential-property-price-indexes-eight-capital-cities/latest-release">risen</a> by <a href="http://www.econ.mq.edu.au/__data/assets/pdf_file/0018/220581/Abelson_9_04.pdf">1,450%</a> (compared to hourly wage increases <a href="https://fred.stlouisfed.org/series/LCWRTT01AUQ661N">of 480%</a>). In Ireland, prices have <a href="https://fred.stlouisfed.org/series/QIEN628BIS">risen by about 800% in that period</a>, driven by rises in Dublin in particular. Rents show similar, but less extreme, trends, because they are not directly affected by interest rates.</p>



<p>These prices range from about twice to four times the cost of building new homes of equivalent specification. This wedge, between build costs and house prices, is a rough proxy for how much extra cost is being driven by restrictions on new building.</p>



<p>By contrast, almost every other household product has become better and less expensive since then. <a href="https://cafehayek.com/2013/01/cataloging-our-progress-using-sears-com-selection-on-new-years-day-2013.html">Compared to 1975, the number of hours a median American worker would have to work</a> to buy a television fell from 60 hours in 1975 to 7 hours in 2013; to buy a fridge-freezer, it fell from 65 hours in 1975 to 20 hours in 2013; to buy a manual exercise treadmill, from 18 hours in 1975 to 6 hours in 2013; and to buy a washer-dryer, from 67 to 30 hours. <a href="https://fred.stlouisfed.org/graph/?g=Gmsm">Even cars are three times â€˜cheaperâ€™ in terms of hours worked</a> on an average hourly wage now than they were in 1964. And none of these estimates accounts for how much better most of these products are now than they were in 1975.</p>



<figure><img src="https://wip.gatspress.com/wp-content/uploads/2022/08/fig_1-2.png" alt=""></figure>



<p>So while other durable goods have become cheaper over time, housing has become more expensive. Even though incomes have risen, both parents in a family now typically have to work to afford a decent family house in a major city, and people have had to move farther and farther outside city centres to find somewhere they can afford to live, spending more time and money on commuting to and from work.</p>



<p>So the <i><em>obvious</em></i> effect of expensive housing is that people often spend a lot of their money on renting or buying their home, leaving them with less money to spend on other things, especially if they live in and around the Western worldâ€™s most wealthy cities. And the problem is getting worse.</p>



<figure><img src="https://wip.gatspress.com/wp-content/uploads/2022/08/Works_In_Progress_Skyline_2_Final_V2-scaled.jpg" alt="">
          <figcaption>
            <div>
              <p>
                Illustration for Works in Progress
              </p>
              <div>
                <p>Image</p>
                <p>
                  Kade Byrand 
                </p>
              </div>
            </div>
          </figcaption>
        </figure>







<h4><i>Productivity</i></h4>



<p>The obvious effect of expensive housing â€“ people having less money to spend on other things â€“ is the one most people focus on. But it is only part of the story, because expensive housing makes people change their behaviour too â€“ it affects where you live, what your job is, how big your family is and what your day-to-day life looks like too. And itâ€™s these <i><em>hidden</em></i> effects that are the most important.</p>



<p>As weâ€™ve described above, better jobs drive up the price of housing when itâ€™s difficult to build more. But that works both ways: when housing is scarce in high-productivity areas, some people are priced out of the area altogether, so they canâ€™t move within range of better jobs.</p>



<p>This means that many people are working in less productive jobs than they could if it was easier for them to move to more productive places. Their wages and productivity are lower and itâ€™s harder for highly productive businesses to hire them. That means people who <i><em>do</em></i> get to live in these high-productivity places are less productive than they could be, because they are less able to combine their skills with the complementary skills of the people who have been priced out.</p>



<p>As a result, many businesses end up leaving highly skilled staff without assistance, spending their time on work that could be done by others, lowering the time they can spend on the tasks theyâ€™re best at. This happens in peopleâ€™s private lives too: people often spend hours <a href="https://www.amazon.co.uk/Markets-against-Modernity-Ecological-Irrationality/dp/1498591183">trying to fix their leaky pipes</a> instead of just calling in a plumber, because the prices of plumbers near them have risen to cover the costs for plumbers to live there.</p>



<p>On average, workers in larger cities tend to be more productive than workers with similar skills and education in smaller cities. Sheer size is not all that matters, because complementarity between workers matters even more â€“ a skilled software engineer will likely increase her income more by moving to Berlin (population: 4.4 million) than to Mexico City (population: 21 million). But there is strong empirical evidence that, other things being equal, bigger is better. This helps workers directly: people who moved from small to large cities in a study in Spain <a href="http://diegopuga.org/papers/DeLaRoca_Puga_REStud_2017.pdf">gained a wage premium</a> when they did so, and accumulated better experience as time went by â€“ and their experience persisted even if they moved away later, in the form of higher wages.</p>



<p>In the United States, productivity per worker tends to rise by <a href="https://www.elsevier.com/books/handbook-of-regional-and-urban-economics/duranton/978-0-444-59533-1">2%</a> or <a href="https://sfi-edu.s3.amazonaws.com/sfi-edu/production/uploads/sfi-com/dev/uploads/filer/f3/df/f3df3de1-e4b6-4b68-8bd2-82538b8dcf16/11-09-046.pdf">more</a> with each doubling of city size. The link between size and productivity is only apparent when the city includes skilled, educated workers, which suggests the effect is mostly driven by the transfer of knowledge and division of labour among high-skilled workers. Metropolitan areas that are largely made up of unskilled workers <a href="https://www.nber.org/papers/w15103">do not become more productive as they get bigger</a>.</p>



<p>By historical and global standards, todayâ€™s most successful cities in America and other Western countries are astonishingly sparsely populated and sprawling. Haussmannâ€™s Paris, Gaudiâ€™s Barcelona, and the Georgian and Victorian areas of London are much more densely populated than nearly every square mile of the Bay Area and even most of the NYC metro area, other than Manhattan.</p>



<p>The main cause of this is regulations that ban buildings that make better use of the land. Economists Gilles Duranton and Diego Puga <a href="https://www.nber.org/papers/w26591">judge that</a> if New York allowed more of the sorts of densities that were more common historically, rents and house prices would fall towards construction costs, and the city would at least double in population, to over 40 million people. Similar things would happen to the Bay Area, Boston, Los Angeles, and other US â€˜superstarâ€™ cities if higher densities were allowed. This could mean those places looking more like central Paris or Barcelona, both of which are incredibly dense (and also happen to be very nice places to live).</p>



<p>The total cost of this regulation-induced sprawl in the United States may be enormous. <a href="https://www.aeaweb.org/articles?id=10.1257/mac.20170388">According to one study</a>, if just three cities â€“ New York City, San Jose and San Francisco â€“ loosened their rules against building denser housing to the national average level of restrictiveness, millions would move to jobs that made the best use of their skills and total US GDP would be 8.9% higher. This would translate into average American wages being $8,775 higher per year. Others go even further. Duranton and Puga estimate that the average income gain from a housing regime that allowed easy building could be around 25%, or around $16,000 more per person per year.</p>



<p>To put that in perspective, 9% is approximately how much the US economy contracted by in the second quarter of 2020, after Covid and lockdowns brought much of the US economy to a standstill. Sixteen thousand dollars per capita is the <i><em>entire</em></i> yearly income of people in Greece or Hungary. Thatâ€™s a lot of money to leave lying on the sidewalk.</p>



<h4><i>Innovation</i></h4>



<p>Nearly all innovation happens, and has always happened, in cities. Just as cities have vast labour pools that make it easier for workers to find jobs that match their skills, they also allow innovators to collaborate <a href="https://www.worksinprogress.co/issue/clusters-rule-everything-around-me/">to come up with new ways of doing things</a>. Sometimes cities have experienced bursts of innovative output that changed the world â€“ like Amsterdam in the 17th century, Edinburgh and London in the late 18th to early 19th centuries, Cleveland in the late 19th century, Vienna and Detroit in the early 20th century, and San Francisco today.</p>



<p>The Bay Area, including Silicon Valley and San Francisco (population 7.5 million), for example, has played host to more tech start-ups growing to valuations of more than $1 billion than the entirety of Europe (population 750 million) put together. Ten US cities in 2007 <a href="https://eml.berkeley.edu/~moretti/clusters.pdf">produced 70% of the total patents related to computer science and 79% of the total patents around semiconductors</a> â€“ with less than 10% of Americaâ€™s population.</p>



<p>Part of the reason is that geographical closeness is especially important for the transfer and combination of ideas. And for unconventional ideas, the most valuable combinations are often not obvious in advance and may depend on chance interactions or mixing of individual elements.</p>



<p>Bell Labs, the legendary R&amp;D lab that <a href="https://www.worksinprogress.co/issue/the-rise-and-fall-of-the-american-rd-lab/">invented revolutionary new technologies like the transistor and the photovoltaic cell,</a> was designed so that everyone would at some point <a href="https://www.amazon.com/Idea-Factory-Great-American-Innovation/dp/0143122797">bump into everyone else</a> for this reason. Similarly, Steve Jobs designed Pixar animation studios to have <a href="https://www.inc.com/jeff-miller/3-ways-to-design-an-office-for-collaboration-not-c.html">communal areas situated centrally</a>, and many tech companies today use a similar model. Both the London Stock Exchange and Lloydâ€™s of London began in the 17th Century as coffee houses â€“ the places where people habitually met both deliberately and accidentally.</p>



<p>US evidence from over 600,000 patents filed from 2000â€“2010 suggests that low-density places can sustain specialised clusters, but that <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3423143">unconventional breakthroughs benefit from high-density urban environments</a>. For idea-focused industries like software, localisation benefits <a href="https://econpapers.repec.org/bookchap/eeeregchp/4-49.htm">dissipate within 10 miles</a>; for extremely idea-focused industries like advertising, they dissipate <a href="https://econpapers.repec.org/article/ouprestud/v_3a75_3ay_3a2008_3ai_3a4_3ap_3a1011-1038.htm">within half a mile</a>. Inventors who move from a smaller cluster to a bigger cluster tend to <a href="https://www.nber.org/papers/w26270">see large increases in their patenting productivity</a>.</p>



<p>So by limiting the number of people who can go to live in places like the Bay Area, by limiting the number of homes there, we may not just be hurting productivity directly by restricting who people can work with. We may also be missing out on the new ideas that drive society forward and that can lead to dramatic improvements in how we live.</p>



<h4><i>Inequality</i></h4>



<p>Constraints on supply have made houses into scarce assets, more like <a href="https://blogs.lse.ac.uk/politicsandpolicy/turning-houses-into-gold-the-failure-of-british-planning/">bonds, fine art or precious metals</a> than durable goods like refrigerators or cars. This only feels normal because weâ€™re used to it, and does not happen in places where developers can easily add more homes to an area, such as Tokyo, Seoul, or New York City before the 1920s. In places like these, rising demand leads to more supply, not just higher prices.</p>



<p>A fixed supply of housing means improvements in peopleâ€™s aggregate incomes often partially go to landowners, since people bid up the price of housing with some of their increased income. This is one of the bases for the economist Henry Georgeâ€™s <a href="https://www.google.co.uk/books/edition/Progress_and_poverty/3ZcBAAAAQAAJ?hl=en&amp;gbpv=1&amp;dq=progress+and+poverty&amp;pg=PA1&amp;printsec=frontcover">proposal for taxes on land value</a>. George realised that even improvements in a local area â€“ a new park, or better sanitation â€“ would also be captured by local landowners. The new park would make people more willing to pay to live nearby, bidding up the price of housing in that area, so that existing landowners captured much of the value the park created.</p>



<p>These effects play out visibly in fights over <a href="https://www.theatlantic.com/ideas/archive/2021/01/anti-growth-alliance-fueled-urban-gentrification/617525/">gentrification</a>. Rising wages let bankers and tech workers bid up the rents on poorer parts of cities that have become fashionable, driving up rents. Many low-income communities have been broken up as people have been forced to move away by these rising rents, and by shops and other services changing to cater to wealthier new customers. Few people object to making a place more pleasant, greener and safer:&nbsp;the biggest concern for current residents is not improvement in the place, but the risk of being priced out of their homes and communities.</p>



<p>There is another way. Increasing the supply of housing and commercial space, while ensuring that it benefits existing residents, could turn this zero-sum situation into one where everyone can be better off. This might be done, for example, <a href="https://policyexchange.org.uk/publication/strong-suburbs/">by allowing them to vote on increased density, and benefit from it directly</a>. The new demand could be accommodated and the financial rewards to development could be shared with existing residents without displacing them.</p>



<p>The aggregate, countrywide effect of housing being so limited in supply has been that economic growth in most Western countries has accrued more and more to landowners and less to everyone else. Economist Thomas Piketty <a href="https://www.amazon.co.uk/Capital-Twenty-First-Century-Thomas-Piketty/dp/067443000X">famously demonstrated</a> an increase in the share of national income that flows to owners of <i>capital</i>, rather than to labour. But what was less widely acknowledged was that, at least in the US, it was really an increase in the share of income going to <i><em>landowners</em></i>, driven by <a href="https://www.brookings.edu/wp-content/uploads/2016/07/2015a_rognlie.pdf">increases in the cost of housing</a>, and that this effect was particularly strong in states that have highly <a href="https://voxeu.org/article/piketty-s-housing-capital-results-new-us-facts">restrictive rules against building more homes</a>.</p>



<p>The rising inequality Piketty demonstrated appears to have been largely driven by housing shortages turning, in one economistâ€™s words, <a href="https://blogs.lse.ac.uk/politicsandpolicy/turning-houses-into-gold-the-failure-of-british-planning/">â€˜houses into goldâ€™</a>. And this is the case across the Western world: <a href="https://journals.sagepub.com/doi/abs/10.1177/00031224211027800?journalCode=asra&amp;">housing inequality, not income inequality, primarily determines how much wealth inequality there is</a> in most Western countries.</p>



<h4><i>Left-behind areas and regional inequality</i></h4>



<p>Housing shortages have driven regional inequality as well. Earlier, we told the story of workplaces deprived of lower-skilled staff having to get their star employees to do work that would be better done by someone with less-expensive skills. And the other side of this is that people who cannot earn top salaries are unable to move to high-income cities at all.</p>



<p>Consider a cleaner living in Alabama. In 1960 they could move to NYC and <a href="https://www.nber.org/papers/w23609">earn wages 84% higher, and still end up with 70% higher income after rent</a>. In 2010, they could move to New York City and become 28% more productive, and earn a wage 28% higher â€“&nbsp;and reduce the surplus of workers back home, letting them demand higher pay. But since housing costs are so much higher, the net earnings and living standards of someone like this would <i><em>fall</em></i> if they moved today, and wouldnâ€™t be worth it. The same would be true for plumbers, receptionists and other professions that allow other people to specialise at what theyâ€™re best at and minimise the time they spend on things like DIY and answering the phone. By contrast, top lawyers get wage boosts that are still sufficiently higher to justify a move in both 1960 and 2010, even after the higher rents theyâ€™ll have to pay.</p>



<p>Economists Peter Ganong and Daniel Shoag conclude that this effect, on aggregate, has <a href="https://www.nber.org/papers/w23609">directly led to a slowdown</a> in the rate at which poorer US states have been catching up with richer ones. Between 1880 and 1980, poorer US states caught up with the richest ones at a rate of around 2% per year; since then, this rate of convergence has halved, to around 1% per year. Where previously people of all income and skill levels would move to more prosperous places, now only well-paid ones at the top do, leaving behind many who are not so lucky in places with a surplus of labour.</p>



<p>Many Western countries have regions where the most economically productive people have moved away like this, leaving behind their lower-skilled peers competing for a limited supply of lower-wage jobs and driving wages down further. Scarce and expensive housing in â€˜superstar citiesâ€™ means that when a city suffers a downturn, only the most skilled leave. Since these people have positive spillovers, this further depresses activity. By contrast, in history it was typically the worse off locals who left an area when times got tougher.</p>



<p>A great deal of attention has been spent on attempts to stop the outmigration of these talented people, to minimise the losses for those left behind. Few of these attempts have succeeded, and the solution may instead be to make it easier for people of all income and skill levels to move for work, as was the norm historically. Without that mobility, many communities have an unhealthy mix of people all competing for the same low-paid jobs, shut out entirely from the places that could be offering them a better life.</p>



<h4><i>Families</i></h4>



<p>The price of housing does not just affect the places where people live; it determines the kinds of homes they live in as well. And that has a huge influence on peopleâ€™s family lives, affecting both when people have kids and how many kids they have.</p>



<p>The more expensive an extra bedroom is, the more expensive it is to have more (or any) children. Expensive housing can force people to wait before having kids and move out of city cores and into cheaper suburbs when they do. This means losing many of the amenities and social life benefits of city life, adding a long commute to their day, and probably reducing their number of job options.</p>



<p>Across the developed world, the number of children that women actually have is <a href="https://www.oecd.org/els/family/SF_2_2-Ideal-actual-number-children.pdf">well below the number they say they would like to have</a>. According to <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2846173">one recent study</a>, after controlling for other factors, a 10% rise in house prices was associated with a 1.3% fall in overall births. Put together with the huge rises in housing costs weâ€™ve seen over the past four decades, this implies a massive reduction in births across the Western world. One <a href="https://www.adamsmith.org/news/children-of-when">report estimated</a> that rises in the cost of UK housing between 1996 and 2014 may have led to 157,000 fewer children being born in that period alone.</p>



<p>Combine these effects with the fact that higher incomes allow people to have more kids because they can more easily afford things like childcare, and housing costs may be causing dramatically fewer children to be born than people would like to have. There is also a fiscal cost to this, of course, but it is fundamentally a personal, human one: fewer brothers and sisters, less time spent with grandparents, and less of the meaning that children bring to their parentsâ€™ lives.</p>



<h4><i>Obesity</i></h4>



<p>No one is sure why Americaâ€™s obesity rate rose from just 10% in the early 1960s to 35% today. Some blame increases in income, but over the same period, Japanese income rose even faster and obesity rates barely budged: they remain under 5%. Higher incomes may enable obesity, but they do not guarantee it.</p>



<p>Undoubtedly, no single factor is solely responsible either for the rise over time, or for the difference between Japan and America. Technological innovations allowing more processed and palatable foods are likely one cause. It may be that rising consumption of some nutrient, such as a type of fat or sugar, is another cause. In Western countries, the decline in smoking â€“ which can act as an appetite suppressant â€“ <a href="https://www.nber.org/papers/w21937#:~:text=Using%20randomized%20treatment%20assignment%20to,the%20concurrent%20rise%20in%20obesity.">is also likely responsible for a fair portion of the rise in obesity</a>.</p>



<p>The Japanese eat <a href="https://onlinelibrary.wiley.com/doi/10.1111/obr.12860">about half as much</a> processed food as Americans do. They also consume dramatically more omega-3 fatty acids in their diet. Cigarette smoking is still slightly higher in Japan than the USA as well. But there is another dramatic and visible difference between Japanese and American lives: the way their cities are built.</p>



<p>Japanese land use regulation is light touch. At its most restrictive, it allows buildings three floors high that use up the entirety of their parcel of land. This means both that Japanâ€™s superstar cities grow far more densely than American cities, and also that they absorb far more of the countryâ€™s population. The urban environment this produces is akin to the traditional urbanism of pre-bicycle, -train and -car cities around the world: with narrow streets, finely grained, that are highly walkable. Of course, modern Japanese cities are not quite so tightly knit, and there is space for cars, bicycles and transit. But streets are extremely narrow, parking is expensive, major roads are tolled, and pedestrians mostly have priority over other road users.</p>



<p>Because of that urban style, people living in large Japanese cities drive much less than people in America. <a href="https://en.wikipedia.org/wiki/Modal_share">In Tokyo and Osaka just 12% and 13% of trips are by private motor vehicle</a>, compared to 85% in Los Angeles, 77% in Chicago, 91% in Houston and 87% in Phoenix. Most American cities are far too spread out to get around by walking, cycling or even public transport, which needs dense pockets of population to be efficient.</p>



<figure><img src="https://wip.gatspress.com/wp-content/uploads/2022/08/fig_2.png" alt=""></figure>



<p>Far more Japanese than Americans experience this sort of city life. There are 23.7 million residents in North Americaâ€™s biggest metropolitan area, New York City, and these people are spread over 34,500 square kilometres. Only a small part of this is dense enough to sustain walking, cycling, and transit. By contrast, Tokyo metro area has a far larger population, with 38.1 million people, but they are four times more densely populated, across only 8,500 square kilometres. This means practically all of them can live car-optional lifestyles most of the time. Japanâ€™s second city, Osaka, has 19.3 million: more than 45% of the countryâ€™s inhabitants live in the biggest two cities alone. By contrast, even at the most expansive definition, only around 12% of the US population live in its biggest cities.</p>



<p>It is obvious how this would affect obesity. The average Japanese walks thousands more steps than the average American every day. Whatâ€™s more, nearly all Japanese walk a lot, whereas in most cities American activity is much more unequal, split between enthusiastic exercisers and those who drive everywhere. Evidence from hundreds of thousands of smartphone step counters <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5774986/">suggests</a> this difference drives obesity both within and between countries. New York City, Americaâ€™s densest and most walkable, has the lowest rate of obesity in America â€“ about half the national rate. <a href="http://www.health.state.ny.us/statistics/prevention/obesity/about.htm">In the latest study of this</a>, Manhattan had a rate half as low again, one quarter of the national average.</p>



<p>So itâ€™s possible that preferring sprawl over density, and the housing shortages that kind of policy creates, may be damaging health, equality, average wealth and the number of children we have. Yet the health effects of more, denser housing are often ignored.</p>



<h4><i>Climate change</i></h4>



<p>Walkable cities are not just important to combat obesity. In 2018, the average Japanese personâ€™s <a href="https://ourworldindata.org/co2-and-other-greenhouse-gas-emissions">consumption caused</a> 10.3 tonnes of CO2 emissions, while the average American caused 17.6 tonnes of emissions, or 74% more. Focusing on transport, we can see how much of that is explained by Japanâ€™s denser, transit-rich, more walkable cities. In 2016 transport accounted for 1.63 tonnes in Japan, versus 5.22 tonnes in the US â€“ over three times worse.</p>



<p>Maps of the <a href="https://iopscience.iop.org/article/10.1088/1748-9326/8/3/035039">UK</a> and <a href="https://pubs.acs.org/doi/10.1021/es4034364">US East Coast</a> show clearly how the densely populated parts of cities like New York, Philadelphia and London emit far less carbon per head than the rest of the surrounding sprawl. The UKâ€™s Centre for Cities <a href="https://www.centreforcities.org/publication/net-zero-decarbonising-the-city/">estimated</a> that people living outside cities accounted for 50% more carbon emissions than those living inside them.</p>



<figure><img src="https://wip.gatspress.com/wp-content/uploads/2022/08/fig_3.png" alt=""></figure>



<figure><img loading="lazy" width="1024" height="774" src="https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1024x774.png" alt="" srcset="https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1024x774.png 1024w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-300x227.png 300w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-768x580.png 768w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1536x1161.png 1536w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-2048x1548.png 2048w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-402x304.png 402w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-462x349.png 462w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-662x500.png 662w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-722x546.png 722w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-982x742.png 982w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1032x780.png 1032w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1402x1060.png 1402w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-1702x1286.png 1702w, https://wip.gatspress.com/wp-content/uploads/2021/09/fig_4_corrected1-2002x1513.png 2002w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>In 2020, Californiaâ€™s population shrank for the first time since records began. The pandemic was just the latest factor that encouraged people to flee expensive, temperate Californian cities â€“ some, like San Francisco, with decent public transit and relatively dense housing â€“ to more affordable sunbelt cities like Atlanta, Phoenix and Dallas, reliant on cars and power-hungry air conditioning. In the last two decades, Atlantaâ€™s population has increased by nearly 50%. Houston is now Americaâ€™s third or fourth largest city. Phoenix has gone from 99th most populous in 1950 to 5th today. That reliance on cars and air conditioning contributes towards environmental disaster.</p>



<p>New homes are also much better insulated than old homes. Heating or cooling bills in a German <a href="https://www.passivhaustrust.org.uk/what_is_passivhaus.php">PassivHaus</a>, housing which is designed to stay at the right temperature without the use of additional energy, can be just a few dollars a month: one <a href="https://twitter.com/holz_bau/status/1409777248790482950">PassivHaus in Oregon</a> kept 30 degrees Fahrenheit below external temperatures during the recent heatwave, with no air conditioning. Apartment blocks are greener than single-family houses, because each home has less external surface area to gain or lose heat. And new homes can be built with zero net embedded carbon, with payments for reforestation or other means to improve the environment. New homes can hugely help the environment.</p>



<p>Rising incomes mean people want bigger homes. Few would happily return to eight family members crammed into a 1900 two-room tenement. If walkable cities ban new homes, their residents will move to more affordable places like Atlanta which build larger, more carbon-hungry homes, drive more and emit far more carbon than they would if they had the freedom to live where many of them really wanted to.</p>



<h3><i>Scratching the surface</i></h3>



<p>Once you see the effects housing shortages have on things as wildly different as obesity, fertility, inequality, climate change and wage growth, you start to see them everywhere. Scott Sumner and Kevin Erdmann have <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3667309">argued</a>, for example, that the housing â€˜bubbleâ€™ that preceded the 2008 financial crisis wasnâ€™t really a bubble after all. In fact, they suggest, house prices were rising rationally because too few houses were being built in places people most wanted to move to, not because of irrational speculation. The ensuing crisis was caused by a misdiagnosis of this problem, as the Fed hiked interest rates in a misguided attempt to â€˜burst the bubbleâ€™. In support of this view, prices are now back above their â€˜bubbleâ€™ peak, with no imminent sign of falling.</p>



<p>Housing shortages might have made Covid worse too. Overcrowding drives disease, including Covid, <a href="https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2783544">as people squeezed into the same houses can spread illness to one another</a>. Counterintuitively, more density can mean <i>less</i> overcrowding, because there are more homes to go round. It is too early to say for sure, but in time we may learn that housing supply played an important role during the Covid pandemic, with more overcrowded cities suffering worse outbreaks.</p>



<p>It is possible that even the political and culture wars being waged in many Western countries have their roots in housing shortages, <a href="https://www.economist.com/special-report/2020/01/16/housing-is-at-the-root-of-many-of-the-rich-worlds-problems">as a recent report for <i><em>The Economist</em></i> argued</a>. Elections in the English-speaking world are increasingly becoming divided between relatively prosperous and well-educated citizens of cities and their suburbs on one side and people in the rest of the country â€“ rural areas and economically depressed towns â€“ who resent the perception that the system is rigged in favour of the already well-off. Britons and French people living in areas where house prices were stagnant were more likely to vote for Brexit or the National Front respectively.</p>



<p>Many young people have had to delay forming families and often take poorly paid, insecure jobs that can barely cover rent and living costs as the price for living in culturally attractive cities. They see opportunity as limited and growth as barely perceptible. Meanwhile, older generations sit on housing property worth many times what they paid and, stuck in a zero-sum mindset, often prioritise the protection of their own neighbourhoods over the need to build more homes. Can you blame young people who resent older people, and the Westâ€™s economic system itself, when this is what it offers them?</p>



<p>If all this has a solution, then we suggest it is unlikely to be won through a zero-sum political â€˜tug of warâ€™. Western countries could become trillions of dollars better off by addressing their housing shortages. A well-designed solution can spread those gains widely enough that <i><em>everyone</em></i> is made better off, including people who currently oppose existing efforts to build more that would make them worse off.</p>



<p>We have suggested one possibility elsewhere: <a href="https://policyexchange.org.uk/publication/strong-suburbs/">radically localized democracy that allows individual streets to opt in to greater density</a> by voting for it. No construction would happen anywhere that a majority did not opt for it, but streets that <a href="https://www.strongtowns.org/journal/2021/2/4/strong-towns-by-street-and-block">voted for more density</a> would become extremely valuable, so there would be a big incentive for homeowners in high-demand areas to vote for greater density.</p>



<p>But whether this or <a href="https://cayimby.org/california-yimby-celebrates-the-passage-of-senate-bill-9/">another approach</a> is the best solution is not the key question. What matters is that housing shortages may be <i><em>the</em></i> biggest problem facing our era, and solving it needs to become everyoneâ€™s highest priority. And as important as it is, we should be wary of letting it become politically tribalised: the disastrous politicisation of Covid vaccines in the United States highlights the danger of that. Some kind of creative, below-the-radar solution that turns this zero-sum game into a positive-sum one is likely to have a better chance. In a tug of war, itâ€™s often surprising how far you can go if you <a href="https://www.slowboring.com/p/the-rise-and-importance-of-secret">tug the rope sideways</a>.</p>



<p>If weâ€™re right about this, it means that fixing this one problem could make everyoneâ€™s lives much better than almost anyone realises â€“ not just by making houses cheaper, but giving people better jobs, a better quality of life, more cohesive communities, bigger families and healthier lives. It could even give renewed reasons to be optimistic about the future of the West.</p>
</div></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[An Update on Mozilla's Terms of Use for Firefox (510 pts)]]></title>
            <link>https://blog.mozilla.org/en/products/firefox/update-on-terms-of-use/</link>
            <guid>43213612</guid>
            <pubDate>Fri, 28 Feb 2025 23:59:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.mozilla.org/en/products/firefox/update-on-terms-of-use/">https://blog.mozilla.org/en/products/firefox/update-on-terms-of-use/</a>, See on <a href="https://news.ycombinator.com/item?id=43213612">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
  <main id="main">

    
<article id="post-78461">
  

  <div>
    
<p>On Wednesday <a href="https://blog.mozilla.org/en/products/firefox/firefox-news/firefox-terms-of-use/">we shared</a> that weâ€™re introducing a new Terms of Use (TOU) and Privacy Notice for Firefox. Since then, weâ€™ve been listening to some of our communityâ€™s concerns with parts of the TOU, specifically about licensing. Our intent was just to be as clear as possible about how we make Firefox work, but in doing so we also created some confusion and concern. With that in mind, weâ€™re updating the language to more clearly reflect the <em>limited </em>scope of how Mozilla interacts with user data.</p>



<p>Hereâ€™s what the new language will say:</p>



<p><em>You give Mozilla the rights necessary to operate Firefox. This includes processing your data as we describe in the Firefox Privacy Notice. It also includes a nonexclusive, royalty-free, worldwide license for the purpose of doing as you request with the content you input in Firefox. This does not give Mozilla any ownership in that content.&nbsp;</em></p>



<p>In addition, weâ€™ve removed the reference to the Acceptable Use Policy because it seems to be causing more confusion than clarity.</p>



<p><strong>Privacy FAQ</strong></p>



<p>We also updated our <a href="https://www.mozilla.org/firefox/faq/">Privacy FAQ</a> to better address legal minutia around terms like â€œsells.â€ While weâ€™re not reverting the FAQ, we want to provide more detail about why we made the change in the first place.</p>



<p><strong>TL;DR</strong> Mozilla doesnâ€™t sell data about you (in the way that most people think about â€œselling dataâ€), and we donâ€™t buy data about you. We changed our language because some jurisdictions define â€œsellâ€ more broadly than most people would usually understand that word. Firefox has built-in privacy and security features, plus <a href="https://support.mozilla.org/en-US/kb/firefox-options-preferences-and-settings#w_privacy-security">options</a> that let you fine-tune your data settings.</p>







<hr>







<p>The reason weâ€™ve stepped away from making blanket claims that â€œWe never sell your dataâ€ is because, in some places, the LEGAL definition of â€œsale of dataâ€ is broad and evolving. As an example, the California Consumer Privacy Act (CCPA) defines â€œsaleâ€ as the â€œselling, renting, releasing, disclosing, disseminating, making available, transferring, or otherwise communicating orally, in writing, or by electronic or other means, a consumerâ€™s personal information by [a] business to another business or a third partyâ€ in exchange for â€œmonetaryâ€ or â€œother valuable consideration.â€&nbsp;&nbsp;</p>



<p>Similar privacy laws exist in other US states, including in Virginia and Colorado. And thatâ€™s a good thing â€” Mozilla has long been a supporter of data privacy laws that empower people â€” but the competing interpretations of do-not-sell requirements does leave many businesses uncertain about their exact obligations and whether or not theyâ€™re considered to be â€œselling data.â€&nbsp;</p>



<p>In order to make Firefox commercially viable, there are a number of places where we collect and share some data with our partners, including our optional ads on New Tab and providing sponsored suggestions in the search bar. We set all of this out in our <a href="https://www.mozilla.org/privacy/firefox/">Privacy Notice</a>. Whenever we share data with our partners, we put a lot of work into making sure that the data that we share is stripped of potentially identifying information, or shared only in the aggregate, or is put through our privacy preserving technologies (like <a href="https://support.mozilla.org/kb/ohttp-explained">OHTTP</a>).&nbsp;</p>



<p><br>Weâ€™re continuing to make sure that Firefox provides you with sensible default settings that you can review during onboarding or <a href="https://support.mozilla.org/en-US/kb/firefox-options-preferences-and-settings#w_privacy-security">adjust</a> at any time.</p>



<a href="https://www.mozilla.org/en-US/firefox/new?utm_medium=mozilla-websites&amp;utm_source=blog.mozilla.org&amp;utm_content=inline-cta">
  <p><img fetchpriority="high" width="512" height="512" src="https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/12/Fx-Browser-icon-fullColor-512-512x512.png" alt="" decoding="async" srcset="https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/12/Fx-Browser-icon-fullColor-512.png 512w, https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/12/Fx-Browser-icon-fullColor-512-300x300.png 300w, https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/12/Fx-Browser-icon-fullColor-512-150x150.png 150w" sizes="(max-width: 512px) 100vw, 512px">  </p>
  <div>
     <h3>Get Firefox</h3>      <p><span>Get the browser that protects whatâ€™s important</span>   </p></div>
</a>
  </div>

</article><!-- #post-78461 -->

  </main><!-- #main -->
  

<div id="related-articles">
    <h2>Related Articles</h2>
    
  </div>



</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Inheriting is becoming nearly as important as working (493 pts)]]></title>
            <link>https://www.economist.com/leaders/2025/02/27/inheriting-is-becoming-nearly-as-important-as-working</link>
            <guid>43213143</guid>
            <pubDate>Fri, 28 Feb 2025 23:20:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.economist.com/leaders/2025/02/27/inheriting-is-becoming-nearly-as-important-as-working">https://www.economist.com/leaders/2025/02/27/inheriting-is-becoming-nearly-as-important-as-working</a>, See on <a href="https://news.ycombinator.com/item?id=43213143">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div><p><time datetime="2025-02-27T10:34:39.417Z"> <!-- -->Feb 27th 2025</time></p></div><section data-body-id="cp2"><p data-component="paragraph"><span data-caps="initial">W</span><small>ork hard,</small> children are told, and you will succeed. In recent decades this advice served the talented and the diligent well. Many have made their own fortunes and live comfortably, regardless of how much money they inherited. Now, however, the importance of hereditary wealth is rising around the rich world, and that is a problem.</p></section><p><h3 id="article-tags">Explore more</h3><nav aria-labelledby="article-tags"><a href="https://www.economist.com/topics/leaders" data-analytics="tags:leaders"><span>Leaders</span></a></nav></p><p>This article appeared in the Leaders section of the print edition under the headline â€œThe new inheritocracyâ€</p><div data-test-id="chapterlist" data-tracking-id="content-well-chapter-list"><div><hr data-testid="rule-accent"><div><h3><a href="https://www.economist.com/leaders" text="Leaders" data-analytics="chapter_list_header:Leaders">Leaders</a></h3><p><span>March 1st 2025</span></p></div></div><ul><li><a href="https://www.economist.com/leaders/2025/02/27/inheriting-is-becoming-nearly-as-important-as-working" id="6e7d8532-e5d5-4657-8cb7-1043d193c0a7" data-analytics="article:reports_headline:1" data-test-id="chapterlist-link-0"><span data-testid="right-economist-red-false"><span>â†’</span></span><span>Inheriting is becoming nearly as important as working</span></a></li><li><a href="https://www.economist.com/leaders/2025/02/27/donald-trump-has-begun-a-mafia-like-struggle-for-global-power" id="e70dc39e-4a9e-4ff7-a22f-8cb251cd4dc1" data-analytics="article:reports_headline:2" data-test-id="chapterlist-link-1"><span data-testid="right-london-5-false"><span>â†’</span></span><span>Donald Trump has begun a mafia-like struggle for global power</span></a></li><li><a href="https://www.economist.com/leaders/2025/02/24/germanys-election-victor-must-ditch-its-debt-rules-immediately" id="147b03a5-51e9-43d8-95e4-cd1b885f7ec7" data-analytics="article:reports_headline:3" data-test-id="chapterlist-link-2"><span data-testid="right-london-5-false"><span>â†’</span></span><span>Germanyâ€™s election victor must ditch its debt rulesâ€”immediately</span></a></li><li><a href="https://www.economist.com/leaders/2025/02/27/prabowo-subianto-takes-a-chainsaw-to-indonesias-budget" id="57d7b8b3-6a45-4bcf-a012-878eee216f72" data-analytics="article:reports_headline:4" data-test-id="chapterlist-link-3"><span data-testid="right-london-5-false"><span>â†’</span></span><span>Prabowo Subianto takes a chainsaw to Indonesiaâ€™s budget </span></a></li><li><a href="https://www.economist.com/leaders/2025/02/26/crispr-technologies-hold-enormous-promise-for-farming-and-medicine" id="c08c1817-78d1-40e9-9be8-3e9406b47720" data-analytics="article:reports_headline:5" data-test-id="chapterlist-link-4"><span data-testid="right-london-5-false"><span>â†’</span></span><span>CRISPR technologies hold enormous promise for farming and medicine</span></a></li></ul></div><div orientation="vertical" data-test-id="vertical"><div orientation="vertical"><figure><img loading="lazy" width="1280" height="1709" decoding="async" data-nimg="1" sizes="300px" srcset="https://www.economist.com/cdn-cgi/image/width=16,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 16w, https://www.economist.com/cdn-cgi/image/width=32,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 32w, https://www.economist.com/cdn-cgi/image/width=48,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 48w, https://www.economist.com/cdn-cgi/image/width=64,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 64w, https://www.economist.com/cdn-cgi/image/width=96,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 96w, https://www.economist.com/cdn-cgi/image/width=128,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 128w, https://www.economist.com/cdn-cgi/image/width=256,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 256w, https://www.economist.com/cdn-cgi/image/width=360,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 360w, https://www.economist.com/cdn-cgi/image/width=384,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 384w, https://www.economist.com/cdn-cgi/image/width=480,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 480w, https://www.economist.com/cdn-cgi/image/width=600,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 600w, https://www.economist.com/cdn-cgi/image/width=834,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 834w, https://www.economist.com/cdn-cgi/image/width=960,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 960w, https://www.economist.com/cdn-cgi/image/width=1096,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 1096w, https://www.economist.com/cdn-cgi/image/width=1280,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 1280w, https://www.economist.com/cdn-cgi/image/width=1424,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg 1424w" src="https://www.economist.com/cdn-cgi/image/width=1424,quality=80,format=auto/content-assets/images/20250301_DE_EU.jpg"></figure></div><div orientation="vertical"><h3 orientation="vertical">From the March 1st 2025 edition</h3><p orientation="vertical">Discover stories from this section and more in the list of contents</p><p><a href="https://www.economist.com/weeklyedition/2025-03-01" data-analytics="sidebar:weekly_edition"><span data-testid="right-economist-red-true"><span>â‡’</span></span><span>Explore the edition</span></a></p></div></div><div><a href="https://s100.copyright.com/AppDispatchServlet?publisherName=economist&amp;publication=economist&amp;title=Inheriting%20is%20becoming%20nearly%20as%20important%20as%20working&amp;publicationDate=2025-02-27&amp;contentID=%2Fcontent%2Ffkgreaevsi2bnnmt75l60gs57pn0taoi&amp;type=A&amp;orderBeanReset=TRUE" target="_blank" rel="noreferrer" data-analytics="end_of_article:reuse_this_content"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" data-testid="renew-outline"><path fill="var(--mb-colour-base-chicago-45)" d="M5.1 16.05a8.25 8.25 0 0 1-.825-1.95A7.696 7.696 0 0 1 4 12.05c0-2.233.775-4.133 2.325-5.7C7.875 4.783 9.767 4 12 4h.175l-1.6-1.6 1.4-1.4 4 4-4 4-1.4-1.4 1.6-1.6H12c-1.667 0-3.083.588-4.25 1.763C6.583 8.938 6 10.367 6 12.05c0 .433.05.858.15 1.275.1.417.25.825.45 1.225l-1.5 1.5ZM12.025 23l-4-4 4-4 1.4 1.4-1.6 1.6H12c1.667 0 3.083-.587 4.25-1.762C17.417 15.063 18 13.633 18 11.95c0-.433-.05-.858-.15-1.275-.1-.417-.25-.825-.45-1.225l1.5-1.5c.367.633.642 1.283.825 1.95.183.667.275 1.35.275 2.05 0 2.233-.775 4.133-2.325 5.7C16.125 19.217 14.233 20 12 20h-.175l1.6 1.6-1.4 1.4Z"></path></svg><span>Reuse this content</span></a></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why it's so hard to build a jet engine (313 pts)]]></title>
            <link>https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine</link>
            <guid>43212952</guid>
            <pubDate>Fri, 28 Feb 2025 23:05:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine">https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine</a>, See on <a href="https://news.ycombinator.com/item?id=43212952">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto"><p>Civilization's toughest technical challenges are those that require extraordinary (and constantly improving) performance to be delivered at a low cost. High levels of performance often require complex, difficult-to-produce technology operating close to the limits of whatâ€™s possible. Any contractor could put up a five-story building using off-the-shelf building technology, but a 500-story building would be far more difficult to achieve and would require pushing the boundaries of building technology forward to even be possible.</p><p>Trying to make something cheap while youâ€™re pushing the boundaries of performance makes things even more difficult. You need to worry about things like minimizing maintenance costs, eliminating expensive materials or components, and having a design that can be manufactured inexpensively and minimizes costly expert labor. (And if you do require expensive components or labor, you need to spread it as thinly as possible.)</p><p><span>Building and operating a leading-edge </span><a href="https://www.construction-physics.com/p/how-to-build-a-20-billion-semiconductor" rel="">semiconductor fab</a><span> is an example of this sort of intersection. The most advanced semiconductors have features that are 1/2000th the width of a human hair and are made from materials where even a few atoms in the wrong place can cause catastrophic defects, thus requiring incredible levels of control and precision during the production process. This control and precision needs to be achieved consistently and continuously, so that transistors can be made in enormous quantities at very low unit costs.</span></p><p><span>Developing a </span><a href="https://www.construction-physics.com/p/a-cycle-of-misery-the-business-of" rel="">new commercial aircraft</a><span> is another example in this category, as is building a cheap, reusable rocket. And so is building a commercial jet engine. With jet engines, performance and economy are closely bound together. To be attractive to airlines an engine needs to be as efficient as possible, minimizing fuel consumption and the amount of maintenance it requires. High fuel efficiency requires high compression ratios and engine temperatures, which in turn require extremely efficient compressors, components that are both incredibly strong and incredibly lightweight, and materials that can withstand extreme temperatures. And a commercial jet engine must successfully operate hour after hour, day after day, for tens of thousands of hours before being overhauled.</span></p><p>Only a small number of organizations are capable of executing such technically difficult projects. Only three companies in the world operate leading edge semiconductor fabs (Samsung, Intel, and TSMC). Depending on how you count, there are just two to four builders of large commercial aircraft (Airbus, Boeing, Embraer, and now COMAC). With reusable rockets, SpaceX is in a category of its own. The number of participants is small partly because of the inherent technical difficulty and partly itâ€™s because success typically requires spending billions of dollars. It takes on the order of $20 billion to build a leading edge semiconductor fab and anywhere from $10 to $30 billion or more to develop a new commercial aircraft.</p><p><span>We see something similar with large commercial jet engines. Only a handful of companies produce them: GE (both independently and via CFM, </span><a href="https://en.wikipedia.org/wiki/CFM_International" rel="">its partnership</a><span> with Franceâ€™s </span><a href="https://en.wikipedia.org/wiki/Safran_Aircraft_Engines" rel="">Safran</a><span>), Pratt and Whitney, and Rolls-Royce.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-1-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-1-158080744" target="_self" rel="">1</a></span><span> Developing a new engine is a multi-billion dollar undertaking. Pratt and Whitney spent an estimated $10 billion (in ~2016 dollars) to develop its </span><a href="https://en.wikipedia.org/wiki/Pratt_%26_Whitney_PW1000G" rel="">geared turbofan</a><span> and CFM almost certainly spent billions developing its </span><a href="https://en.wikipedia.org/wiki/CFM_International_LEAP" rel="">LEAP series of engines</a><span>. (As with leading edge fabs and commercial aircraft, the technical and economic difficulty of building a commercial jet makes it one area of technology where China still lags. China is </span><a href="https://www.scmp.com/economy/china-economy/article/3251482/how-monumental-chinas-challenge-build-its-own-jet-engine-c919-it-seeks-aviation-self-reliance" rel="">working on an engine for its C919</a><span>, but hasnâ€™t yet succeeded.)</span></p><p>Itâ€™s not that building a working commercial jet engine itself is so difficult. Itâ€™s that a new engine project is always pushing the boundaries of technological possibility, venturing into new domains â€” greater power, higher temperatures, higher pressures, new materials â€” where behaviors are less well understood. Building the understanding required to push jet engine capabilities forward takes time, effort, and expense.</p><p><span>The jet engine was invented in the 1930s, independently by </span><a href="https://en.wikipedia.org/wiki/Frank_Whittle" rel="">Frank Whittle</a><span> in the UK and </span><a href="https://en.wikipedia.org/wiki/Hans_von_Ohain" rel="">Hans von Ohain</a><span> in Germany.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-2-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-2-158080744" target="_self" rel="">2</a></span><span> At the time, propeller-driven piston-powered aircraft were capable of traveling around 300-400 miles per hour, but performance gains were getting harder and harder to achieve. At higher speeds, the propeller tips would begin to exceed the speed of sound, creating shockwaves and increasing drag. It was also becoming harder to increase the power of piston engines â€” as engines got more powerful, they got heavier, offsetting gains in power. Both Whittle and Ohain hypothesized that with an alternative propulsion system, aircraft could achieve much higher speeds and altitudes, and they began to investigate alternatives, ultimately converging on a gas turbine-based propulsion system, or jet engine.</span></p><p><span>The jet engine is a type of </span><a href="https://en.wikipedia.org/wiki/Heat_engine" rel="">heat engine</a><span>: it converts heat into useful work. Like a steam turbine or an internal combustion engine, the jet engine works by taking some working fluid (in this case air), compressing it, heating it, and then expanding it, extracting work from the heated fluid in the process.</span></p><p><span>More specifically, a jet engine operates on the </span><a href="https://en.wikipedia.org/wiki/Brayton_cycle" rel="">Brayton cycle</a><span>. Air is taken into the front of the engine, then run through a compressor, increasing the airâ€™s pressure. This compressed air flows into a combustion chamber, where itâ€™s mixed with fuel and ignited, producing a stream of hot exhaust gas. This exhaust gas then drives a turbine, which extracts energy from the hot exhaust as it expands, converting it into mechanical energy in the form of the rotating turbine. This mechanical energy is then used to drive the compressor at the front of the turbine.</span></p><p>In a gas turbine power plant, all the useful work is done by the mechanical energy of the rotating turbine. Some mechanical energy drives the compressor, while the remaining energy drives an electric generator. In a jet engine, the energy is used differently: some energy drives the compressor via the turbine, but instead of using the remaining energy to generate electricity, a jet engine uses it to create thrust through hot exhaust gases, pushing the aircraft forward the same way an inflated balloon propels when air rushes out of it.</p><p>Building a functional jet engine requires several key supporting technologies. One such technology is the compressor. In a Brayton cycle engine, roughly 50% of the energy extracted from the hot exhaust gas must be used to drive the compressor (this fraction is known as the back work ratio). Because the back work ratio is so large (a steam turbines has a back work ratio closer to 1%), any losses from compressor inefficiencies are proportionally very large as well. This means that a functional jet engine needs turbines and compressors that transfer as much energy as possible without losses. Whittle was successful partly because he built a compressor that ran at 80% efficiency, far better than existing compressors. Many contemporaries believed Whittle would be lucky to get 65% efficiency â€” jet engine designer Stanley Hooker noted that he â€œnever built a more efficient compressor than Whittleâ€.</p><p><span>Another important advance was in turbine materials. The fuel in a jet engine burns at </span><a href="https://www.rolls-royce.com/~/media/Files/R/Rolls-Royce/documents/country/deutschland/Poster/Poster%20A1%20-%20How%20does%20a%20jet%20engine%20work%20-%20English.pdf" rel="">thousands of degrees</a><span>, and the turbine needs to be both strong and heat-resistant to withstand the rotational forces and temperatures. Whittleâ€™s first engine used turbine blades of stainless steel, but these failed frequently and it was realized that stainless steel wasnâ€™t good enough for a production engine. The first production engines used turbine blades made of </span><a href="https://en.wikipedia.org/wiki/Nimonic" rel="">Nimonic</a><span>, a nickel-based â€œsuperalloyâ€ with much higher temperature resistance. As weâ€™ll see, the need to drive engine temperatures higher and higher has pushed for the development of increasingly elaborate temperature resistant materials and cooling systems.</span></p><p><span>Von Ohainâ€™s jet engine first flew in August of 1939 (powering the </span><a href="https://en.wikipedia.org/wiki/Hans_von_Ohain" rel="">Heinkel He-178</a><span>), and Whittleâ€™s first flew in </span><a href="https://www.bbc.co.uk/history/historic_figures/whittle_frank.shtml" rel="">May 1941</a><span> (on the </span><a href="https://en.wikipedia.org/wiki/Gloster_E.28/39" rel="">E.28/39</a><span>). By the end of WWII both the UK and Germany had fielded several jet powered aircraft including the </span><a href="https://en.wikipedia.org/wiki/Gloster_Meteor" rel="">Gloster Meteor</a><span>, the </span><a href="https://en.wikipedia.org/wiki/De_Havilland_Vampire" rel="">de Havilland Vampire</a><span>, the </span><a href="https://en.wikipedia.org/wiki/Messerschmitt_Me_262" rel="">Messerschmitt Me-262</a><span>, and the </span><a href="https://en.wikipedia.org/wiki/Arado_Ar_234_Blitz" rel="">Arado Ar234</a><span>.</span></p><p><span>The US initially lagged in jet engine development, and the first US jet engine efforts relied heavily on existing British designs. The first jet engine built in the US, the </span><a href="https://en.wikipedia.org/wiki/General_Electric_I-A" rel="">GE 1-A</a><span>, was a copy of Whittleâ€™s W.2B/23 engine; the first mass-produced US engine, the </span><a href="https://en.wikipedia.org/wiki/General_Electric_J31" rel="">J31</a><span>, was derived from it. The prototype of the first successful US jet fighter, Lockheedâ€™s </span><a href="https://en.wikipedia.org/wiki/Lockheed_P-80_Shooting_Star" rel="">P-80 Shooting Star</a><span>, used a British </span><a href="https://en.wikipedia.org/wiki/De_Havilland_Goblin" rel="">H-1 â€œGoblinâ€ engine</a><span> (though the production version used American </span><a href="https://en.wikipedia.org/wiki/Allison_J33" rel="">J33 engines</a><span>).</span></p><p><span>But the US military quickly recognized the potential jet engines had for aircraft performance and began to pour huge amounts of money into companies like GE, Westinghouse, and General Motors to both build improved versions of British engines and begin developing their own models. The first US-designed jet engine, the </span><a href="https://en.wikipedia.org/wiki/Westinghouse_J30" rel="">Westinghouse J30</a><span>, ran in 1943, and by 1950 the military had funded more than a dozen jet engine projects from a variety of manufacturers.</span></p><p><span>As money flowed into jet engine development, engine performance and technology quickly improved. Britainâ€™s first production engine, a Rolls-Royce version of Whittleâ€™s W.2B known as the </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Welland" rel="">Welland</a><span>, produced 1600 pounds of thrust when it first ran in 1942. By 1950, the </span><a href="https://en.wikipedia.org/wiki/Pratt_%26_Whitney_J57#Specifications_(JT3C-7)" rel="">Pratt and Whitney J57</a><span> was producing 17,000 pounds of thrust.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-3-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-3-158080744" target="_self" rel="">3</a></span><span> Thanks to better temperature-resistant materials, the turbine inlet temperature in the J57 was hundreds of degrees higher than in the Welland. And while early jet engines used centrifugal compressors that used a rotating impeller to push the air out to the sides, there were limits to how much these could pressurize air. By 1950 jet engines, including the J57, had almost universally changed to axial compressors, which compress the air along the length of the engine through a series of compression stages.</span></p><p><span>In addition to using axial compressors, engines further improved with the adoption of two-spool designs. The core of a basic axial compressor jet engine has basically a single large moving part: a rotating shaft with a turbine mounted on one end and a series of compression stages mounted to the other.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-4-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-4-158080744" target="_self" rel="">4</a></span><span> With this arrangement, every part of the turbine and compressor spins at the same speed, but itâ€™s often beneficial to have different parts of the engine spinning at different speeds: The low pressure front and high pressure rear parts of the compressor work most efficiently at different speeds, and itâ€™s easier to maintain smooth airflow through the engine across a range of different conditions (and avoid things like </span><a href="https://en.wikipedia.org/wiki/Compressor_stall" rel="">compressor stall</a><span>) if different parts of the compressor can rotate at different speeds.</span></p><p><span>One way of allowing different parts of the engine to rotate at different speeds is to add a second, inner shaft to the engine that rotates independently.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-5-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-5-158080744" target="_self" rel="">5</a></span><span> The J57 was the first two-spool turbojet, and today most commercial jet engines use two or even three spools. Two-spool engine designs made it possible to achieve higher compression ratios and thus higher engine efficiencies. The Welland had a pressure ratio of around 4:1, while the J57 had a ratio of around 11.5:1.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png" width="632" height="377" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:377,&quot;width&quot;:632,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7e12e209-ee94-4b8a-931c-5a8427718bec_632x377.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Diagram of an early jet engine with a centrifugal compressor, via Rolls-Royce.</figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png" width="557" height="479" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/e48a2250-343f-4e6b-8174-482d40f1df52_557x479.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:479,&quot;width&quot;:557,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe48a2250-343f-4e6b-8174-482d40f1df52_557x479.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Axial, twin-spool turbofan engine, via </span><a href="https://ntrs.nasa.gov/api/citations/20130013439/downloads/20130013439.pdf" rel="">NASA.</a></figcaption></figure></div><p>But while by the 1950s jet engine performance had greatly increased, this was a hard-won achievement. Jet engines required a far greater understanding and mastery of the motion and behavior of hot gasses, and it took much more time to design them than piston engines. An executive at Pratt and Whitney noted that the J57 took on the order of 1.3 million man hours of design time, roughly twice as much as a piston engine did. And while piston engines could be made from comparatively thick and sturdy castings and forgings, much of a jet engine was made from thin sheets of exotic alloys carefully bent into shape, which required novel and complex manufacturing techniques. From â€œDependable Engines: The Story of Pratt &amp; Whitney:â€</p><blockquote><p><em>...the jet only became possible because of the development of alloys for that sheet metal that could handle higher temperatures and pressures. And Pratt had to figure out how to weld sheet metal. â€˜With the multiplicity of joints in sheet metal parts of a jet, the distribution of stresses is one of the most important considerations. A weld becomes an actual design factor rather than a mere fastening device,â€™ Horner said.</em></p><p><em>He referred to many of the issues in converting to jets: things like relatively large diameter parts with very thin walls and all of the compressor and turbine components and airfoils with â€˜a great variety of aerodynamic shapes of such awkward dimensions that our designers often complain that they have neither a beginning nor an ending.â€™</em></p><p><em>He called these â€˜odd horses and peculiar cats in strange contrast to the piston engineâ€™s comfortable old forgings and castings which were heavy and sturdy and supplied their own rigidity for machining.â€™ And all that sheet metal and oddly shaped stuff needed a lot of tools. To build the little J30, Pratt needed 5250 tools. By 1952 when Horner spoke, the J57 had 20,000 tools.</em></p></blockquote><p><span>This complexity made developing a new jet engine difficult and time consuming. Early, centrifugal-compressor-based jet engines came together comparatively easily. The </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Nene" rel="">Rolls-Royce Nene</a><span>, the most powerful aircraft engine in the world when it debuted, took just 5 months to go from starting design to a working engine. Axial-compressor-based engines, though capable of higher performance, were far more difficult to design and build because it was hard to ensure that the air flowed properly through the many different compression stages.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-6-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-6-158080744" target="_self" rel="">6</a></span><span> Early jet engine designer Stanley Hooker noted that Rolls-Royceâ€™s axial compressor engine that followed the Nene, the </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Avon" rel="">Avon</a><span>, took seven years to iron out the various problems in it. GEâ€™s first axial compressor engine, the </span><a href="https://en.wikipedia.org/wiki/Allison_J35" rel="">J35</a><span>, required a similar amount of time. And difficulty and time consuming meant expensive. Pratt and Whitneyâ€™s J57 took on the order of $150 million to develop, roughly $2 billion in 2025 dollars.</span></p><p><span>Among the successes of engines like the Avon, the J35, and the J57 were numerous failures. Westinghouse, one of the largest manufacturers of steam turbines, received a huge fraction of initial jet engine contracts and was poised to become a major jet engine manufacturer, but the company was unwilling to invest in the R&amp;D necessary to master the new technology, and it struggled to produce reliable engines that met their performance targets. Westinghouseâ€™s J30 engine suffered repeated development delays and problems that had to be fixed by Pratt and Whitney. When the engine was finally ready, it provided â€œonly marginally satisfactory serviceâ€. Itâ€™s J40 engine had even worse struggles: a low-thrust version was delayed for three years, and a higher-thrust version was never successfully delivered at all. The J40 program, </span><a href="https://en.wikipedia.org/wiki/Westinghouse_J40" rel="">called</a><span> â€œdisastrousâ€ and â€œa fiasco,â€ was ultimately cancelled.</span></p><p><span>Westinghouse wasnâ€™t alone. Curtis-Wright, a major manufacturer of aircraft piston engines, ultimately secured 11 jet engine contracts from the US military by 1956, but the company struggled mightily to adapt to jet engine manufacturing. Its J65 and J67 jet engines were â€œpersistently underpowered and failure-proneâ€ even though the J65 was derived from an </span><a href="https://en.wikipedia.org/wiki/Armstrong_Siddeley_Sapphire" rel="">existing engine</a><span>, and the company developed a reputation as â€œan engineering bunglerâ€. One Air Force official described the companyâ€™s issues in a letter:</span></p><blockquote><p><em>From the inception of the YJ and J65 programs there has been an apparent lack of appreciation by your management of the magnitude of the job you have undertaken. There has also been inadequate control over: tooling for the job, manufacturing processes and techniques, quality control, test programs, both at Wright Aeronautical and at subcontractorsâ€¦.</em></p><p><em>â€¦ Many of the theories presented by your Engineering Department in explanation for failures have proved to be unfounded. Engineering changes have been proposed and incorporated, in our opinion, to correct manufacturing [practice] deficiencies.</em></p></blockquote><p><span>This was apparently just one â€œamong scores of Air Force challenges to Curtiss-Wrightâ€™s ability to manage, and indeed even understand, the business of designing, building, and testing jet engines.â€ General Electric similarly struggled with its J33 and J47 engines. On the J33, Kelly Johnson (of Lockheedâ€™s Skunkworks fame) complained about the engineâ€™s â€œpoor design features and poor maintenance,â€ </span><a href="https://www.sciencedirect.com/science/article/abs/pii/S0263237307000357" rel="">noting that</a><span> â€œBasic progress on flight investigations [for the P-80] has been very slow because of the inability to keep the airplanes flying.â€™â€™</span></p><blockquote><p><em>Engine tail cones were cracking after 20 hours of use, and GE notified Johnson that replacing them would take two to three months. Turbine wheels were failing in 50 hours running or less, but GE was stalling on redesigns. Johnson railed about â€˜the poor quality of the engineering design of certain engine changes,â€™â€™ â€˜â€˜poor workmanship,â€™â€™ and the delivery of engines â€˜â€˜unsafe to fly.â€™â€™</em></p></blockquote><p>The J47 project, on which the air force spent $300 million by 1950 (~$4 billion in 2025 dollars), was extremely delayed and dogged by technical problems. Though the engine eventually entered service, poor reliability meant that it initially averaged only 11 hours of flight between major overhauls. Engines ultimately required extensive modifications, which had to be done in the field and cost millions. GEâ€™s poor performance on the J47 project â€œdiscourage[d] Air Force optimism toward any new GE development.â€</p><p><span>More broadly, while jet engines undoubtedly had high performance (the jet-powered </span><a href="https://en.wikipedia.org/wiki/North_American_F-100_Super_Sabre" rel="">F100</a><span>, which first flew in 1953, was the first US fighter to break the sound barrier in level flight), it proved difficult to both constantly push the boundaries of performance and have engines that worked reliably and consistently. During the Korean War, an Air Force report noted that jet engine failures were the leading cause of major accidents: in 1951 alone there were 149 such failures, destroying 95 aircraft and killing 25 pilots. Engines were so unreliable that they made Air Force recruitment difficult: pilots â€œwere no longer eager to join the Air Force if they had to learn to fly jets.â€</span></p><p>The jet engineâ€™s high performance made the military willing to fund development efforts and put up with its many shortcomings. But while those shortcomings might have been acceptable for military aircraft, using them on commercial aircraft would require further improvement. A commercial jet engine didnâ€™t just need to meet its performance targets â€” it had to operate profitably.</p><p><span>Aircraft manufacturers started considering jet-powered airliners in the late 1940s, but initially few airlines were interested in them. In his </span><a href="https://www.amazon.com/Turbulent-Skies-Commercial-Aviation-Technology/dp/0471109614" rel="">history of commercial aviation</a><span>, T.A. Heppenheimer describes the airline industryâ€™s reaction to the jet:</span></p><blockquote><p><em>...airlines, as commercial enterprises, in no way could accept the cost and performance limitations of jets. The jet engines that the airline executives knew about were still fuel-guzzlers, and aircraft that they powered would still be limited in rangeâ€¦And the jet engines of the day demanded much maintenance, which would drive costs even higher by taking aircraft out of service, reducing their ability to generate revenue. Ralph Damon, president of TWA, expressed a common view in the industry when he said, â€˜The only thing wrong with the jet planes of today is that they wonâ€™t make money.â€™</em></p></blockquote><p><span>Once again, the British took the lead. The British-built de Havilland Comet airliner debuted in 1952, powered by four </span><a href="https://en.wikipedia.org/wiki/De_Havilland_Ghost" rel="">de Havilland Ghost</a><span> turbojets. And while the Comet ultimately failed (fatigue failures around its rectangular windows caused two crashes, resulting in it being withdrawn from service), it proved that jet travel, while expensive, could be profitable. From Turbulent Skies:</span></p><blockquote><p><em><span>[The Cometâ€™s] operating costs were nearly triple those of the [propeller-powered] </span><a href="https://en.wikipedia.org/wiki/Douglas_DC-6" rel="">DC-6</a><span>. But it flew with nearly every seat filled, and though BOAC charged only standard fares, it found itself in the remarkable position of actually making money with the new jets. That brought other airline executives over for a look, including Juan Trippe [founder of Pan Am]. He met with Sir Geoffrey de Havilland, who was promising a seventy-six-seat Comet III, and in October he ordered three, with an option on seven more.</span></em></p></blockquote><p>Trippeâ€™s boldness gave other airlines no choice but to follow:</p><blockquote><p><em>â€¦while jets might offer dubious economics, their popular appeal was vivid and unmistakable. The Comet had shown thatâ€¦This meant that once Trippe put jets into service, he could skim off the cream of everyone elseâ€™s business. Other carriers, particularly those serving the North Atlantic, would buy jets or lose their shirts.</em></p></blockquote><p><span>In October 1955, Trippe ordered 45 jets for Pan Am: 20 </span><a href="https://en.wikipedia.org/wiki/Boeing_707" rel="">Boeing 707s</a><span> and 25 </span><a href="https://en.wikipedia.org/wiki/Douglas_DC-8" rel="">Douglas DC-8s</a><span>. Both aircraft were powered by the Pratt and Whitney </span><a href="https://airandspace.si.edu/collection-objects/turbojet-model-pratt-whitney-jt3c-j57/nasm_A19660009000" rel="">JT3</a><span>, a commercial version of the J57.</span></p><p><span>The demands of commercial service would continue to push jet engine performance higher and higher: Higher compression ratios and temperatures to minimize fuel consumption, and longer times between overhauls. This meant continually pushing the technology forward. For instance, early jet engines were made mostly from steel and aluminum, but by the 1960s they were being fashioned mostly from titanium and â€œsuperalloysâ€ like Inconel. Turbine blades, already difficult to fabricate in the 1950s, got even more complex, with elaborate internal structures to allow cooling air to </span><a href="https://www1.grc.nasa.gov/historic-facilities/special-projects-laboratory/materials-research/" rel="">flow through the turbine blade</a><span>.</span></p><p>Another key development for jet engine commercial use was the turbofan. In a conventional jet engine, all the air flows through the compressor, into the combustion chamber, through the turbine, and out the rear. This arrangement is known as a turbojet. But if you mounted a fan to the engine spool that was larger than the rest of the engine, some air would flow around the sides of the engine, rather than through it.</p><p><span>Adding this fan offers several advantages. On a turbojet, the hot exhaust exits the engine at a high speed, but jet engines are at their most efficient when the exhaust stream is as slow as possible. Air moved by the fan around the sides of the engine will be much slower than the hot exhaust from the combustion chamber, improving engine fuel efficiency. This slower air also makes much less noise â€” an important factor, since people were </span><a href="https://www.construction-physics.com/p/why-is-it-so-hard-to-build-an-airport" rel="">getting fed up</a><span> with the noise from jets. A large fan also makes it easier to increase engine thrust, making it possible to power larger, heavier aircraft.</span></p><p><span>Thereâ€™s a variety of different ways of adding a fan to a jet engine. GE added an aft-mounted fan to its </span><a href="https://en.wikipedia.org/wiki/General_Electric_CJ805" rel="">CJ805</a><span> for use on the </span><a href="https://en.wikipedia.org/wiki/Convair_990_Coronado" rel="">Convair 990</a><span> airliner. The companyâ€™s </span><a href="https://en.wikipedia.org/wiki/General_Electric_GE36" rel="">GE36 unducted fan</a><span>, developed in the 1980s, also featured an aft-mounted fan. A </span><a href="https://en.wikipedia.org/wiki/Turboprop" rel="">turboprop</a><span>, which mounts a conventional propeller to the front of the jet engine spool, is arguably a type of fan engine as well. But the engine arrangement that would be adopted for large commercial aircraft was a large, ducted fan at the front of the engine, an arrangement that became known as the turbofan. Today, virtually all large commercial aircraft are powered by high-bypass turbofans (engines where a very large fraction of air is routed around the engine rather than through it).</span></p><p><span>Fan engines had been proposed by Whittle when he was first designing his jet engine, and turbofans began to appear in the 1950s. Rolls-Royce introduced their </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Conway" rel="">Conway turbofan</a><span> in 1955, and Pratt and Whitney introduced a turbofan version of their JT3 engine, the </span><a href="https://en.wikipedia.org/wiki/Pratt_%26_Whitney_JT3D" rel="">JT3D</a><span>, in 1959. These early turbofans had relatively low bypass ratios (the ratio of air that goes around the compressor and turbine to the air that goes through it): The Conway had a bypass ratio of 0.3, and the JT3D had a ratio of 1.4. But by the late 1960s huge, high bypass engines were being built. Pratt and Whitneyâ€™s JT9D, the engine that powered the Boeing 747, had a bypass ratio of nearly 5:1, and GEâ€™s </span><a href="https://en.wikipedia.org/wiki/General_Electric_TF39" rel="">TF39</a><span> had a bypass ratio of 8:1. (A modern LEAP engine has a bypass ratio of </span><a href="https://en.wikipedia.org/wiki/CFM_International_LEAP" rel="">10 or 11:1</a><span>).</span></p><p>As a result of these and other improvements, engine performance continued to climb. Higher bypass ratios, pressure ratios, and turbine temperatures drove down fuel consumption, as did lower engine weight. Engine reliability improved, time between overhauls increased, and engine failures became much less common. While early jet engines needed overhaul after 10 hours of flight time, by the 1960s engines were operating for nearly 1000 hours before needing to be overhauled.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png" width="501" height="359.54937413073714" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:516,&quot;width&quot;:719,&quot;resizeWidth&quot;:501,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b4a0617-713a-4fd9-aaf7-bcf5ed2bc8a4_719x516.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Jet engine specific fuel consumption over time, via Ballal and Zelina 2012.</figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png" width="501" height="339.4793152639087" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:475,&quot;width&quot;:701,&quot;resizeWidth&quot;:501,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9d334cde-eb7b-4e7b-91ad-4492c024f35f_701x475.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Jet engine thrust to weight ratio over time, via Ballal and Zelina 2012</figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png" width="501" height="361.7896389324961" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:460,&quot;width&quot;:637,&quot;resizeWidth&quot;:501,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F673ea5cd-e885-4704-92d5-323a5a835bd6_637x460.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Jet engine pressure ratio over time, via Ballal and Zelina 2012.</figcaption></figure></div><p><span>But this performance once again had to be fought for. By the 1970s, more than 30 years after the first jet-powered aircraft flew, it was still incredibly difficult and expensive to bring a new jet engine into service. Development costs were approaching a billion dollars: Rolls-Royce spent $874 million (close to $7 billion in 2025 dollars) to bring its RB211 into service, and delays and cost overages on the program bankrupted the company, </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Limited#:~:text=In%20the%20new%20year%20of,left%20and%20it%20voluntarily%20entered" rel="">forcing the British government to nationalize it</a><span>. On GEâ€™s TF39, development was plagued by early engine failures, and the engine repeatedly failed qualification tests. Pratt and Whitney had severe delays and problems during development of its JT9D, to the point where Boeing was forced to hang concrete blocks off the wings of completed 747s in lieu of engines which hadnâ€™t yet been delivered.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-7-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-7-158080744" target="_self" rel="">7</a></span><span> Once it was in service, the JT9D initially proved inefficient and unreliable, with a tendency to fail prematurely and to develop â€œsurgeâ€ (a potentially dangerous phenomena where airflow reverses through the compressor). These problems took several years to iron out. Another Pratt and Whitney, the military F100 engine, </span><a href="https://www.tandfonline.com/doi/abs/10.1177/1744935906064096" rel="">similarly yielded</a><span> â€œmajor controversy in the 1970s due to severe operational and reliability problems.â€</span></p><p><span>We can get a better understanding of why, specifically, itâ€™s so hard to develop a new jet engine by looking at the history of a specific one, the </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_RB211" rel="">RB211</a><span>. The RB211 is a high bypass turbofan engine designed and built by Rolls-Royce, originally for the ill-fated </span><a href="https://en.wikipedia.org/wiki/Lockheed_L-1011_TriStar" rel="">Lockheed Tristar.</a><span> While the RB211 was ultimately very successful â€” Rolls-Royce sold 3760 of them, and the engine formed the basis for its current </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Trent" rel="">Trent</a><span> line of engines â€” development took so long and went so far over budget that it drove the company into bankruptcy. Fortunately for us, the history of the RB211 is documented in a </span><a href="https://www.aviation-bookshop.com/shop/the-history-of-the-rolls-royce-rb211-turbofan-engine/" rel="">book published by the Rolls-Royce Heritage Trust</a><span>, so we can see exactly what challenges had to be overcome to get it operational.</span></p><p><span>Design for the RB211 started in early 1967, with a team of 700 engineers. As designed, the engine would be a major advance over Rolls-Royceâ€™s previous large turbofan engine, the </span><a href="https://en.wikipedia.org/wiki/Rolls-Royce_Conway" rel="">Conway</a><span>:</span></p><blockquote><p><em>Compared to the Conway engine, the thrust was nearly double, the airflow was 3.7 times higher, the fan diameter was nearly double and yet the engine was marginally shorter. The pressure ratio at take-off had increased from 17:1 to 25:1 (27:1 at top of climb) and the turbine entry as designed was about 150 degrees centigrade higher at 1488 K on a hot day take-off. Climb and cruise temperatures were substantially higher. The weight of the basic engine (less power plant) was 8861 lbs compared with the 5160 lbs for the Conway.</em></p></blockquote><p><span>To achieve the desired levels of performance, the RB211 had several novel features. Rather than using a two-spool design, it would use a three-spool, allowing further optimization of rotational speeds in different parts of the engine. To minimize weight, many parts of the engine, most notably the front fan,</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-8-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-8-158080744" target="_self" rel="">8</a></span><span> would be fabricated from composites like carbon fiber or glass-reinforced plastic. These and other improvements were estimated to reduce fuel consumption by 21% compared to the Conway, as well as reducing engine noise.</span></p><p>Initial design for the RB211 was completed by October of 1967, after which the company began to build the first engines for testing. If all went well, the engineâ€™s first flight on a Lockheed Tristar would take place in November of 1970.</p><p>But when testing began in August of 1968, it was clear there were numerous problems with the engine. Examination of the engines following early tests showed that the combustion chamber lining was burnt and distorted, seals were breaking down, stators were cracking, and the layers of carbon fiber in the fan blade were delaminating. Guide vanes (airfoil structures which redirect the flow of air) were also cracked, and were burnt in some places and had rubbed against turbine blades in others. The engine had only produced around half of its design thrust, and engine surges had repeatedly occurred. As testing continued, problems mounted. By early 1969, 99 different major engine defects had been diagnosed. By September, the number of major defects rose to 175.</p><p>Slowly, meticulously, the design team pinned down various problems and reworked the design. Here are just a few of the problems that needed to be fixed:</p><ul><li><p><span>In the compressor, glass-reinforced plastic parts such as the stators and the bearing housing, were replaced with more rugged (but heavier) metal ones. The high-pressure compressor drum was repeatedly redesigned to address air leakage, early failures, and problems of â€œovalization,â€ and parts of the compressor were changed from titanium to an Inconel alloy. To reduce surge problems, a complex series of </span><a href="https://www.gevernova.com/content/dam/gepower-new/global/en_US/downloads/gas-new-site/services/gas-turbines/upgrade-gea32093b-variable-inlet-guide-vane-r1.pdf" rel="">controllable guide vanes</a><span> was added to the compressor. Compressor blades were strengthened to avoid premature failure and compressor guide vanes were changed from sheet metal to more robust forgings.</span></p></li></ul><ul><li><p>In the combustion chamber, the chamber lining was made thicker and generally strengthened, and the entire combustion chamber was redesigned to improve airflow and reduce air leakage at the turbines. A different heat treatment process for the casing was adopted, and a wire winding was added to the casing to prevent thermal expansion problems.</p></li></ul><ul><li><p>The secondary air system, which uses air to cool the engine, was completely redesigned to reduce leaks.</p></li></ul><ul><li><p>The carbon fiber front fan couldnâ€™t be made strong enough to survive a bird strike, and was replaced with a titanium one. The fan case underwent multiple redesigns to be strengthened, which included changing it from aluminum to titanium.</p></li></ul><ul><li><p><span>In the turbine, the high-pressure turbine disk was changed from Nimonic to </span><a href="https://en.wikipedia.org/wiki/Waspaloy" rel="">Waspalloy</a><span>, another nickel-based superalloy. Gaps between turbine blades and guide vanes were enlarged to reduce vibration problems, turbine seals were redesigned, and cooling holes were added to the turbine blades. Turbine guide vanes were redesigned to improve cooling.</span></p></li></ul><ul><li><p>The engine was strengthened in spots to reduce vibration problems and related failures.</p></li></ul><p>Diagnosing these problems and implementing the necessary changes took months of painstaking testing and experimentation: testing the engine, noticing the various failures, implementing fixes, and then testing the engine again. In some cases, engineers put enormous efforts into particular solutions, only to be forced to abandon them when they couldnâ€™t be made to work. It wasnâ€™t until 1970, for instance, more than two years after development began, that the carbon fiber fan blade was finally abandoned in favor of the titanium blade.</p><p>As time was spent addressing the various failures, the development schedule slipped:</p><blockquote><p><em>By the end of 1969, 1,270 hours of bench running had been achieved against 3000 hours planned but, apart from the special run on Engine 7, no engine had run to 40,000 lb thrust and most engines had been removed from the test bed prematurely because of failure.</em></p></blockquote><p>By the end of 1970, the program was a year behind schedule, and the launch costs of the engine had doubled. In early 1971, the company declared bankruptcy. But despite the setbacks, the team continued to work through problems: By the middle of 1971, â€œengines were not failing as frequently and hours were building up at a rate of 220 hours per month compared with 100 hours per month during the previous two years.â€ Performance improved, and thrust produced by the engine continued to creep up. By 1972, the engine was working reliably. It received its type certification in early 1972 and made its first commercial flight in April of that year.</p><p>This wasnâ€™t the end of the troubles for the RB211 â€” it took 6 years after beginning commercial service for all the problems to be ironed out â€” but the end result was a successful engine, derivatives of which continue to be produced today.</p><p>Not all new jet engine projects will have the same struggles as RB211, but itâ€™s been an expensive and time-consuming development task since the 1950s. The inflation-adjusted costs to develop a new jet engine have almost always run into the billions:</p><ul><li><p><span>The J57, which powered the B52 and whose commercial iteration powered the first wave of US jet-powered airliners, cost roughly $2 billion in inflation-adjusted dollars.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-9-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-9-158080744" target="_self" rel="">9</a></span></p></li><li><p>The J58, the engine that powered the SR-71 blackbird, cost closer to $7 billion.</p></li><li><p>Between the 1960s and early 2000s, the average inflation-adjusted development cost of a new military jet engine has been $1.5 billion.</p></li><li><p>In the late 1990s and early 2000s, both Pratt and Whitney and General Electric estimated that the costs of new jet engine development had reached $2 billion or more ($3-4 billion in 2025 dollars).</p></li></ul><p>These huge costs mean that it can take 15-20 years for a new jet engine to make a return on its investment.</p><p><span>Itâ€™s not that building a jet engine that </span><em>works</em><span> is so difficult or expensive. Rolls-Royce built their RB178 demonstrator engine in the early 1960s for $84 million in 2025 dollars, roughly 2% of the RB211â€™s overall development costs. It started construction on the first RB211 engines just a few months after design began. Similarly, the technology demonstrator for GEâ€™s TF39 engine cost $200 million in 2025 dollars, a small fraction of the full cost of the program.</span></p><p>The difficulty is building an engine that meets its various performance targets â€” thrust, fuel consumption, maintenance costs, and so on. Thereâ€™s no point in designing a new engine if it doesnâ€™t significantly improve on the state of the art, and that means engine development projects are constantly pushing technological boundaries: higher compression ratios, hotter temperatures, lighter weight, larger fans, and so on. An engine that isnâ€™t an improvement over whatâ€™s already on the market wonâ€™t be competitive, and engine performance targets will often be contractual obligations with the aircraft manufacturers buying them.</p><p><span>Making these improvements requires constantly driving engine technology forward. Turbine blades, for instance, have been forced to get ever more advanced to withstand rising exhaust temperatures: modern turbine blades have elaborate internal cooling structures, are made from high-temperature superalloys like Inconel or titanium aluminide,</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-10-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-10-158080744" target="_self" rel="">10</a></span><span> and are often made from a single crystal to eliminate defects at material grain boundaries. And while the carbon fiber fan blades on the RB211 were unsuccessful, manufacturers didnâ€™t give up, and such blades are used on the CFM LEAP engine.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png" width="600" height="382" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/df2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:382,&quot;width&quot;:600,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdf2590b5-a9f7-407c-90f2-d3ad269d595c_600x382.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Turbine entry temperature and turbine blade cooling technology over time, via </span><a href="https://www.conceptsnrec.com/blog/film-cooling-in-turbines" rel="">link</a><span>.</span></figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png" width="500" height="400.4559270516717" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:527,&quot;width&quot;:658,&quot;resizeWidth&quot;:500,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1502da6c-3964-4911-b365-3c3be5a7e93e_658x527.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Turbine blade cooling structures over time, via Rolls-Royce.</figcaption></figure></div><p>Pushing boundaries means youâ€™re operating in the unknown, encountering novel phenomena and unforeseen problems that take time and effort to fix: Many of the problems on the RB211 stemmed from Rolls-Royceâ€™s lack of experience with the materials needed to withstand the higher engine temperatures.</p><p>This boundary-pushing is difficult partly because the requirements an engine must meet are very strict. A jet engine must direct and control an enormous amount of heat energy â€” a modern large jet engine will generate power on the order of 100 megawatts â€” and it must do so using as little mass as possible. A 1930s Ford V8 car engine weighed around 7 pounds for every horsepower it generated. A WWII aircraft piston engine weighed around 1 to 2 pounds per horsepower. The 50s-era J57 jet engine weighed closer to 0.1 to 0.2 pounds per horsepower it generated.</p><p>A commercial jet engine must operate for thousands of hours a year, year after year, before needing an overhaul, demanding high durability and high fatigue resistance. It must burn fuel at temperatures in the neighborhood of 3000Â°F or more, nearly double the melting point of the turbine materials used within them. Turbines and compressors must spin at more than 10,000 revolutions per minute, while simultaneously minimizing air leakage between stages to maximize performance and efficiency.</p><p><span>A commercial jet engine must operate across a huge range of atmospheric conditions â€“ high temperatures, low temperatures, both sea level and high-altitude air pressures, different wind conditions, and so on.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-11-158080744" href="https://www.construction-physics.com/p/why-its-so-hard-to-build-a-jet-engine#footnote-11-158080744" target="_self" rel="">11</a></span><span> It must withstand rain, ice, hail, and bird strikes. It must be able to successfully contain a fan or turbine blade breaking off.</span></p><p>Ensuring the engine meets all these conditions entails thousands (or tens of thousands) of hours of testing, during which time the engine is subjected to a variety of punishing conditions. Testing for the CFM LEAP involved launching a 1 inch thick slab of ice directly into the front fan, and the engine had to continue operating while ingesting 3500 pounds of simulated hail. An engine must undergo hundreds of hours of in-flight testing, to see how it behaves across the flight envelope. When flight testing the LEAP engine, GE already had one test aircraft, a Boeing 747, but the in-flight testing was so extensive that it bought a second one.</p><p><span>In a domain where failure could kill hundreds of people, boundary-pushing performance and operating near the edge of whatâ€™s possible also means manufacturing must be extremely careful and precise. Small defects or failures that could be accommodated in other sorts of technology can be catastrophic if they occur in a jet engine. A mid-flight engine failure on a Rolls-Royce Trent-powered Airbus A380, where a turbine disk fractured and ripped apart the entire engine, was traced to a single oil pipe manufactured with a wall that was </span><a href="https://admiralcloudberg.medium.com/a-matter-of-millimeters-the-story-of-qantas-flight-32-bdaa62dc98e7" rel="">half a millimeter too thin</a><span>. Pratt and Whitney has lost billions of dollars correcting manufacturing defects in its Geared Turbofan that resulted from a â€œ</span><a href="https://www.reuters.com/business/aerospace-defense/rtx-expects-3-bln-hit-q3-pratt-whitney-gtf-engine-issues-2023-09-11/" rel="">microscopic contaminant</a><span>â€ in the powder used to manufacture turbine disks.</span></p><p><span>All this makes a new jet engine project incredibly risky. To mitigate this risk, manufacturers try wherever possible to leverage the technology they already have, minimizing the new and unknown (and also reducing the cost of things like </span><a href="https://aeroreport.de/en/innovation/how-engine-certification-and-validation-works" rel="">certification testing</a><span>). Commercial engines are often derived from military engines, where the government has already picked up the tab for development delays and cost overruns. GEâ€™s TF39, designed to power the Lockheed C-5 military transport, evolved into the commercial CF6, and CFMâ€™s successful CFM56 engine used the engine core (the compressor, combustion chamber, and turbine) developed for the B-1 bomber. Pratt and Whitneyâ€™s military J57 became the commercial JT3.</span></p><p>Engine manufacturers will also often try to improve performance of existing engines rather than developing all new ones from scratch. Rolls-Royce is still building off of the RB211, an engine first designed nearly 60 years ago. And the Rolls-Royce Olympus engines that powered the Concorde in the 1970s were scaled-up versions of an engine originally designed in the 1940s.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png" width="562" height="363.04909560723513" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/6b37237c-98d0-4288-9075-6b439b71735f_774x500.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:500,&quot;width&quot;:774,&quot;resizeWidth&quot;:562,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6b37237c-98d0-4288-9075-6b439b71735f_774x500.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Technology exchange in early Pratt &amp; Whitney jet engines, via </span><a href="https://www.sae.org/publications/technical-papers/content/700268/" rel="">Sens and Meyer 1970</a><span>. Note that the J42 and the J48 were license-built versions of the Rolls-Royce Nene and Tay, and thus also a product of technology exchange.</span></figcaption></figure></div><p>Like with commercial aircraft, itâ€™s much easier and less risky to stretch and improve an existing engine design rather than start a new one from a clean sheet, and only the potential of huge performance gains can justify the latter.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Brian Krebs: This Administration Is Completely Compromised (163 pts)]]></title>
            <link>https://infosec.exchange/@briankrebs/114083485241630234</link>
            <guid>43211506</guid>
            <pubDate>Fri, 28 Feb 2025 21:33:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://infosec.exchange/@briankrebs/114083485241630234">https://infosec.exchange/@briankrebs/114083485241630234</a>, See on <a href="https://news.ycombinator.com/item?id=43211506">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[How to gain code execution on hundreds of millions of people and popular apps (998 pts)]]></title>
            <link>https://kibty.town/blog/todesktop/</link>
            <guid>43210858</guid>
            <pubDate>Fri, 28 Feb 2025 21:05:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kibty.town/blog/todesktop/">https://kibty.town/blog/todesktop/</a>, See on <a href="https://news.ycombinator.com/item?id=43210858">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><div><p>this started when i was looking into <a href="https://cursor.com/">cursor</a>, an ai text editor. also, i use <a href="https://objective-see.org/products/lulu.html">lulu by objective-see</a> on my laptop, so when i downloaded the cursor installer, i got this pop-up:</p>
<p><img src="https://kibty.town/files/img/posts/todesktop/lulu-alert.png" alt="A LuLu alert, showing that &quot;Install Cursor&quot; was trying to connect to &quot;download.todesktop.com&quot;"></p>
<p>now, what the hell is todesktop? i thought i was downloading cursor? well, looking at their website, they seem to be an electron app bundler service alongside providing a SDK for electron apps. so it appears the installer i downloaded is actually managed by todesktop, not cursor.</p>
<p>this made me curious and i made an account on todesktop to look into it, and when i clicked the github login button, i saw my calling: <strong>firebase</strong></p>
<h2>basic firebase recon</h2>
<p>realising the app used firestore (firebase's no-sql database that is often used in frontend), i quickly opened my devtools and began doing basic recon on the firebase.</p>
<p>i realised that the site has sourcemaps, which made searching for all of the firestore paths used in the app even easier (its still easy without sourcemaps, usually)</p>
<p>then i found an insecure collection, <code>temporaryApplications</code>, which seemed to give me an name list of some applications (edit: todesktop has clarified this collection has no sensitive data and hasnt been updated since 2022), but not much other than that, everything seemed secure on the firebase other then this.</p>
<p>i then noticed that most of the deployment and general logic happens in the terminal, with the npm package <code>@todesktop/cli</code>, so i installed that and started looking into it</p>
<h2>looking into the todesktop cli</h2>
<p>the cli manages deployments, source code uploads, and much more. the website just seems to be a shell to create applications, view deployments, etc etc</p>
<p>i was once again lucky that the cli also had sourcemaps, so i used <a href="https://github.com/denandz/sourcemapper">sourcemapper</a> to extract them into a source tree.</p>
<p>looking in there, i found an arbitrary s3 upload vulnerability via a firebase cloud function called <code>getSignedURL</code>, but i didn't really have an s3 key (file path) to upload to that would do something interesting, so i kept looking.</p>
<h2>hijacking the deployment pipeline via a postinstall script</h2>
<p>i wanted to get on the machine where the application gets built and the easiest way to do this would be a postinstall script in <code>package.json</code>, so i did that with a simple reverse shell payload</p>
<p>this worked. navigating around the container, i figured out where the actual code-building application lives, and found this:</p>
<p><img src="https://kibty.town/files/img/posts/todesktop/config-encrypted.png" alt="A screenshot showing a file called &quot;config.json.encrypted&quot;"></p>
<p>oh fuck, this usually means something bad. i found the code for decrypting this file, and this is what i got after decrypting it myself:</p>
<p><img src="https://kibty.town/files/img/posts/todesktop/config-json.png" alt="A file called &quot;config.json&quot;, with 2 apple id, remote sign and a hsm's credentials"></p>
<p><strong>fuck. this container stores secrets</strong></p>
<p>looking around in the container more, i found a hardcoded firebase admin key (which was full-scoped).</p>
<h2>post-exploitation</h2>
<p>i quickly realized that with the credentials i have, i could deploy an auto update to any app of my liking, having clients receive it immediately when they restart the app.</p>
<p>i then made some code to use my credentials to deploy an update to my app, and it worked. i immediately got a update on my client and got RCE.</p>
<h2>lets talk about impact</h2>
<p>with this, i could push auto updates to all applications using todesktop, such as:</p>
<ul>
<li>clickup (https://clickup.com)</li>
<li>cursor (https://cursor.com)</li>
<li>linear (https://linear.app)</li>
<li>notion calendar (https://calendar.notion.so)</li>
</ul>
<p>(<strong>please do not harass these companies or make it seem like it's their fault, it's not. it's todesktop's fault if anything</strong>)</p>
<p>which, if i were to estimate, is probably in the range of hundreds of millions of people in <strong>tech environments</strong>, other hackers, programmers, executives, etc. making this exploit <strong>deadly</strong> if used.</p>
<h2>the fix</h2>
<p>i immediately used my contacts to get in reach with the owner of todesktop, we were chatting via signal and the fix came almost immediately. they were nice enough to compensate me for my efforts and were very nice in general.</p>
<p>the build container now has a privileged sidecar that does all of the signing, uploading and everything else instead of the main container with user code having that logic.</p>
<p>security incidents happen all the time, its natural. what matters is the company's response, and todesktop's response has been awesome, they were very nice to work with.</p>
<p>check out todesktop's incident report <a href="https://www.todesktop.com/blog/posts/security-incident-at-todesktop">here</a></p>
</div></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[400 reasons to not use Microsoft Azure (628 pts)]]></title>
            <link>https://azsh.it</link>
            <guid>43210536</guid>
            <pubDate>Fri, 28 Feb 2025 20:51:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://azsh.it">https://azsh.it</a>, See on <a href="https://news.ycombinator.com/item?id=43210536">Hacker News</a></p>
Couldn't get https://azsh.it: Error: Request failed with status code 404]]></description>
        </item>
    </channel>
</rss>