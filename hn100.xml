<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Wed, 18 Sep 2024 03:30:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Apple Mobile Processors Are Now Made in America. By TSMC (234 pts)]]></title>
            <link>https://timculpan.substack.com/p/apple-mobile-processors-are-now-made</link>
            <guid>41574844</guid>
            <pubDate>Wed, 18 Sep 2024 01:38:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://timculpan.substack.com/p/apple-mobile-processors-are-now-made">https://timculpan.substack.com/p/apple-mobile-processors-are-now-made</a>, See on <a href="https://news.ycombinator.com/item?id=41574844">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p>Good Evening from Taipei,</p><p>TSMC’s first Arizona chips are now in production, and Apple is ready to be the first cab off the rank with mobile processors made using the foundry’s 5nm process.</p><p><span>Apple’s A16 SoC, which first debuted two years ago in the </span><a href="https://www.apple.com/newsroom/2022/09/apple-debuts-iphone-14-pro-and-iphone-14-pro-max/" rel="">iPhone 14 Pro</a><span>, is currently being manufactured at Phase 1 of TSMC’s Fab 21 in Arizona in small, but significant, numbers, my sources tell me. Volume will ramp up considerably when the second stage of the Phase 1 fab is completed and production is underway, putting the Arizona project on track to hit its </span><a href="https://pr.tsmc.com/english/news/3122" rel="">target for production in the first-half of 2025</a><span>. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png" width="1456" height="972" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/a8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:972,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:23260265,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa8ee10c5-f75f-469f-8c34-796fb90f4369_6400x4272.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p><span>These A16 chips are made with the same N4P process as TSMC uses for the A16 produced in Taiwan, I am told. Confusingly, N4P is sometimes called a 4nm node and sometimes 5nm, but it’s part of </span><a href="https://www.tsmc.com/english/dedicatedFoundry/technology/platform_HPC_tech_advancedTech" rel="">the broader 5nm family of processes</a><span> — TSMC calls it an </span><em>enhanced</em><span> version of 5nm. Call it 4nm if you like, I won’t correct you.</span></p><p>“The Arizona project is proceeding as planned with good progress,” Nina Kao, a spokeswoman for TSMC told me. She declined to comment on clients or products made at the facility.</p><div data-attrs="{&quot;url&quot;:&quot;https://timculpan.substack.com/p/apple-mobile-processors-are-now-made?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;}" data-component-name="CaptionedButtonToDOM"><p><em>Tell people about the exclusive news you’re reading right now, and where you heard it first.</em></p><p data-attrs="{&quot;url&quot;:&quot;https://timculpan.substack.com/p/apple-mobile-processors-are-now-made?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;}" data-component-name="ButtonCreateButton"><a href="https://timculpan.substack.com/p/apple-mobile-processors-are-now-made?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share" rel=""><span>Share</span></a></p></div><p><span>This is a BFD. TSMC Arizona is the marquee project of the US government’s $39 billion </span><a href="https://crsreports.congress.gov/product/pdf/R/R47523" rel="">CHIPS for America Fund</a><span> under the CHIPS Act. Six months ago, I thought Apple might tap Arizona for a less-consequential chip like the H-series used in AirPods. I was surprised when I heard it was the A16. The fact that they went for the most-advanced chip they could manage on US soil, in terms of both technology and volume, shows Apple and TSMC want to start big.</span></p><p><span>(I believe there may be other products also in production at TSMC Arizona, but I don’t have much information on them. </span><em><span>If you do, contact me </span><a href="mailto: tculpan@proton.me" rel="">here</a><span>.</span></em><span>)</span></p><p><span>Currently TSMC is achieving yields in Arizona that are </span><em>slightly behin</em><span>d what’s enjoyed back home in Taiwan (basically, neck and neck). Most important, though, is that improvements are moving so rapidly that true yield parity between Taiwan and Arizona is expected to be reached in coming months.</span></p><p><span>I can’t tell you which Apple device these A16 chips will go into. One possibility is that they’re slated for one of the upcoming iPads, though perhaps not the iPad Mini since </span><a href="https://www.dallasnews.com/business/technology/2024/09/09/everything-to-expect-from-apples-iphone-16-launch-monday/" rel="">Mark Gurman believes</a><span> they’re to be launched around October. Another likelihood is the next iteration of the iPhone SE, which makes sense since it’s supposedly </span><a href="https://www.bloomberg.com/news/newsletters/2024-08-11/iphone-16-preview-bigger-screens-new-colors-camera-button-ai-and-a18-chip-lzpk5495" rel="">based on the iPhone 14</a><span> which uses the A16 processor and is expected next year.</span></p><p>Normally, media outlets will pad out their reportage with lots of background and history. I’ll leave it here. That’s the scoop: Apple’s A16 mobile processors are in production at TSMC on American soil, and that choice of product is hugely significant.</p><p><em>Note to media: yes, you can cite or sum this report. But proper credit is required with a link to this page (you know that I know the rules). Something like: “independent journalist Tim Culpan reported.”</em><span> </span><em>Thanks</em></p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Entire Independent Board of Directors of 23andMe Resigns (218 pts)]]></title>
            <link>https://investors.23andme.com/news-releases/news-release-details/independent-directors-23andme-resign-board/</link>
            <guid>41573034</guid>
            <pubDate>Tue, 17 Sep 2024 21:31:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://investors.23andme.com/news-releases/news-release-details/independent-directors-23andme-resign-board/">https://investors.23andme.com/news-releases/news-release-details/independent-directors-23andme-resign-board/</a>, See on <a href="https://news.ycombinator.com/item?id=41573034">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

                <p>SOUTH SAN FRANCISCO, Calif., Sept.  17, 2024  (GLOBE NEWSWIRE) -- The independent directors of the Board of 23andMe Holding Co. (Nasdaq: ME), today sent the following letter to Anne Wojcicki, Chief Executive Officer, Co-Founder, and Chair of the Board of Directors of 23andMe, in which the independent directors have provided their resignation from the Board, effective immediately:<br></p>  <p>Dear Anne,</p>  <p>We, the independent directors of the 23andMe Board, hereby tender our resignations, effective immediately.</p>  <p>After months of work, we have yet to receive from you a fully financed, fully diligenced, actionable proposal that is in the best interests of the non-affiliated shareholders. We believe the Special Committee and the Board have provided ample time for you to submit such a proposal. That we have not seen any notable progress over the last 5 months leads us to believe no such proposal is forthcoming. The Special Committee is therefore unwilling to consider further extensions, and the Board agrees with the Special Committee’s determination.</p>  <p>While we continue to wholeheartedly support the Company’s mission and believe deeply in the value of the personalized health and wellness offering that you have articulated, it is also clear that we differ on the strategic direction for the Company going forward. Because of that difference and because of your concentrated voting power, we believe that it is in the best interests of the Company’s shareholders that we resign from the Board rather than have a protracted and distracting difference of view with you as to the direction of the Company.</p>  <p>We are proud of what 23andMe has achieved in pioneering direct access to genetic information, and we have been honored to have had the opportunity to be part of those efforts.</p>  <p>Sincerely,</p>  <p>/s/</p>  <p>Roelof Botha, Patrick Chung, Sandra Hernández, M.D., Neal Mohan, Valerie Montgomery Rice M.D., Richard Scheller, Ph.D., Peter J. Taylor</p>  <p><strong>About 23andMe</strong></p>  <p>23andMe is a genetics-led consumer healthcare and biopharmaceutical company empowering a healthier future. For more information, please visit www.23andMe.com.</p>  <p><strong>Forward-Looking Statements</strong></p>  <p>This press release contains forward-looking statements within the meaning of Section 27A of the Securities Act of 1933, as amended, and Section 21E of the Securities Exchange Act of 1934, as amended. All statements, other than statements of historical fact, included or incorporated in this press release, including statements regarding 23andMe’s strategy, are forward-looking statements. The words "believes," "anticipates," "estimates," "plans," "expects," "intends," "may," "could," "should," "potential," "likely," "projects," “predicts,” "continue," "will," “schedule,” and "would" or, in each case, their negative or other variations or comparable terminology, are intended to identify forward-looking statements, although not all forward-looking statements contain these identifying words. These forward-looking statements are predictions based on 23andMe’s current expectations and projections about future events and various assumptions. 23andMe cannot guarantee that it will actually achieve the plans, intentions, or expectations disclosed in its forward-looking statements and you should not place undue reliance on 23andMe’s forward-looking statements. These forward-looking statements involve a number of risks, uncertainties (many of which are beyond the control of 23andMe), or other assumptions that may cause actual results or performance to differ materially from those expressed or implied by these forward-looking statements. The forward-looking statements contained herein are also subject generally to other risks and uncertainties that are described from time to time in the Company’s filings with the Securities and Exchange Commission, including under Item 1A, “Risk Factors” in the Company’s most recent Annual Report on Form 10-K, as filed with the Securities and Exchange Commission, and as revised and updated by our Quarterly Reports on Form 10-Q and Current Reports on Form 8-K. The statements made herein are made as of the date of this press release and, except as may be required by law, 23andMe undertakes no obligation to update them, whether as a result of new information, developments, or otherwise.</p>  <p><strong>Contact</strong></p>  <p>Adam Pollack <br>Joele Frank, Wilkinson Brimmer Katcher<br>212-355-4449</p>  <p><img alt="" src="https://ml.globenewswire.com/media/NWU1YjEwMTAtMmJhZC00ODVhLWEzMzQtMWU3YWNlY2MyYTExLTEyMTk5OTY=/tiny/23andMe-Inc-.png" referrerpolicy="no-referrer-when-downgrade">
  
      </p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Double Irish Dutch Sandwich: End of a Tax Evasion Strategy (143 pts)]]></title>
            <link>https://conversableeconomist.com/2024/09/12/the-double-irish-dutch-sandwich-end-of-a-tax-evasion-strategy/</link>
            <guid>41571911</guid>
            <pubDate>Tue, 17 Sep 2024 19:51:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://conversableeconomist.com/2024/09/12/the-double-irish-dutch-sandwich-end-of-a-tax-evasion-strategy/">https://conversableeconomist.com/2024/09/12/the-double-irish-dutch-sandwich-end-of-a-tax-evasion-strategy/</a>, See on <a href="https://news.ycombinator.com/item?id=41571911">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-19065">
	<div>
			
<p>I wrote a decade ago about the <a href="https://conversableeconomist.com/2014/07/16/double-irish-dutch-sandwich/" title="">Double Irish Dutch Sandwich</a>, a strategy for corporations to evade taxes that was widespread and large-scale enough to come to the attention of the International Monetary Fund. But due to various changes in national and international tax agreements, the strategy seems to have faded substantially. Ana Maria Santacreu and&nbsp;<strong>&nbsp;</strong>Samuel Moore  of the St. Louis Fed provide some background in “<a href="https://www.stlouisfed.org/on-the-economy/2024/aug/unpacking-discrepancies-american-irish-royalty-reporting" title="">Unpacking Discrepancies in American and Irish Royalty Reporting</a>” (August 08, 2024). </p>



<p>For those who don’t keep up to speed on the details of international tax evasion schemes, Santacreu and Moore describe the Double Irish Dutch Sandwich works like this:</p>



<blockquote>
<p>The Double Irish with a Dutch Sandwich tax scheme, as illustrated in the third figure, involved a complex arrangement between a U.S. parent company (USP) and three foreign subsidiaries. The first Irish subsidiary (I1) was incorporated in Ireland but managed from Bermuda, allowing it to avoid both Irish and U.S. taxes. The second Irish subsidiary (I2) was incorporated and managed in Ireland. The purpose of I2 is to control foreign distribution and collect income. A Dutch subsidiary (N) acted as an intermediary between I2 and I1 to avoid Irish taxes.</p>



<p>The scheme worked by exploiting specific provisions in Irish and U.S. tax laws. A USP would transfer intellectual property ownership to I1. Then, I2 would sublicense the intellectual property from I1 and pay royalties. These royalties would flow from I2 to N, and then from N to I1, taking advantage of European Union tax regulations. This structure allowed profits to be shifted to tax havens like Bermuda, effectively minimizing tax liabilities for the entire corporate structure.</p>
</blockquote>







<figure><img data-recalc-dims="1" decoding="async" width="712" height="313" data-attachment-id="19369" data-permalink="https://conversableeconomist.com/2024/09/12/the-double-irish-dutch-sandwich-end-of-a-tax-evasion-strategy/image-76/" data-orig-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/image-4.png?fit=827%2C363&amp;ssl=1" data-orig-size="827,363" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/image-4.png?fit=300%2C132&amp;ssl=1" data-large-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/image-4.png?fit=712%2C313&amp;ssl=1" tabindex="0" role="button" src="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/image-4.png?resize=712%2C313&amp;ssl=1" alt="" srcset="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/image-4.png?w=827&amp;ssl=1 827w, https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/image-4.png?resize=300%2C132&amp;ssl=1 300w, https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/image-4.png?resize=768%2C337&amp;ssl=1 768w" sizes="(max-width: 712px) 100vw, 712px"></figure>



<p>However, a combination of Irish tax reforms in 2015 and changes in the <a href="https://conversableeconomist.com/2024/08/12/us-tax-policy-the-coming-storm-in-2025/" title="">US Tax Cuts and Jobs Act of 2017 </a>made this strategy ineffective: “Consequently, Irish companies began paying royalties directly to American parent companies instead of routing them through tax havens.”</p>



<p>The shifts in royalty payments tell the story. This figure shows royalty payments by Irish companies to the US, which doubled from since 2019 to 2021. </p>



<figure><img data-recalc-dims="1" decoding="async" width="660" height="527" data-attachment-id="19374" data-permalink="https://conversableeconomist.com/2024/09/12/the-double-irish-dutch-sandwich-end-of-a-tax-evasion-strategy/irish-1/" data-orig-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-1.jpg?fit=660%2C527&amp;ssl=1" data-orig-size="660,527" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="irish 1" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-1.jpg?fit=300%2C240&amp;ssl=1" data-large-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-1.jpg?fit=660%2C527&amp;ssl=1" tabindex="0" role="button" src="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-1.jpg?resize=660%2C527&amp;ssl=1" alt="" srcset="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-1.jpg?w=660&amp;ssl=1 660w, https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-1.jpg?resize=300%2C240&amp;ssl=1 300w" sizes="(max-width: 660px) 100vw, 660px"></figure>



<p>Conversely, tax payments from Ireland and from Netherlands to Bermuda, well-known for it’s near-zero corporate taxes, went way down–showing a decilne in corporate profits being routed through Bermuda. </p>



<figure><img data-recalc-dims="1" decoding="async" width="644" height="510" data-attachment-id="19375" data-permalink="https://conversableeconomist.com/2024/09/12/the-double-irish-dutch-sandwich-end-of-a-tax-evasion-strategy/irish-2/" data-orig-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-2.jpg?fit=644%2C510&amp;ssl=1" data-orig-size="644,510" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="irish 2" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-2.jpg?fit=300%2C238&amp;ssl=1" data-large-file="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-2.jpg?fit=644%2C510&amp;ssl=1" tabindex="0" role="button" src="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-2.jpg?resize=644%2C510&amp;ssl=1" alt="" srcset="https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-2.jpg?w=644&amp;ssl=1 644w, https://i0.wp.com/conversableeconomist.com/wp-content/uploads/2024/09/irish-2.jpg?resize=300%2C238&amp;ssl=1 300w" sizes="(max-width: 644px) 100vw, 644px"></figure>



<p>I’m sure the international tax lawyers around the world are strategizing new tax evasion strategies even as I write these words. But it’s worth remembering that there are two large costs at play here. The obvious loss is to government revenue, but the more subtle and still very real loss is the diversion of high-powered talent from what could have been gains in efficiency and productivity to focus instead on corporate reorganizations and tax evasion games. </p>




		</div> <!-- .entry-body -->
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[macOS Sequoia 15 may bypass DNS encryption (352 pts)]]></title>
            <link>https://www.obdev.at/blog/warning-macos-sequoia-15-may-bypass-dns-encryption/</link>
            <guid>41571862</guid>
            <pubDate>Tue, 17 Sep 2024 19:46:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.obdev.at/blog/warning-macos-sequoia-15-may-bypass-dns-encryption/">https://www.obdev.at/blog/warning-macos-sequoia-15-may-bypass-dns-encryption/</a>, See on <a href="https://news.ycombinator.com/item?id=41571862">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

<main role="main">
<article>

<section>
<figure>
<img src="https://www.obdev.at/Images/odblog/nhi5-DNS.png">
</figure>

<p>When you enter a hostname in your web browser (e.g., apple.com), that name must first be translated into an IP address so your computer can connect to the server. This lookup is usually performed unencrypted, meaning your Internet provider and other parties monitoring your connection can see which sites you visit. To protect these lookups from prying eyes, Little Snitch 6 offers a new feature: DNS encryption. With DNS encryption enabled, all name lookups are routed through Little Snitch and performed in encrypted form.</p>
<p>For this purpose, Little Snitch registers a DNS proxy. macOS then sends <strong>all</strong> DNS requests to that proxy, which in turn performs the lookup in encrypted form. The key point here is that <strong>all</strong> requests must be routed through the proxy.</p>
<h2>But…</h2>
<p>While investigating a DNS-related issue on macOS 15 Sequoia, we discovered that some DNS requests—particularly those made via certain low-level legacy APIs—were not being received by our proxy!</p>
<p>There appears to be a bug in macOS Sequoia causing <strong>some</strong> requests to bypass the installed DNS proxy and be sent unencrypted to the system’s default name server instead.</p>
<p>Note that this bug likely affects any kind of DNS proxy, not just Little Snitch.</p>
<p>So, if you rely on the new DNS encryption feature of Little Snitch 6, or if you are using another third-party DNS proxy, be aware that some DNS lookups may bypass the proxy until Apple provides a fix in a future macOS update.</p>
<p><strong>Note:</strong> DNS lookups performed via higher-level APIs do not appear to be affected by this bug. For example, your web-browsing in Safari or Chrome still fully benefits from encrypted lookups. Firefox, on the other hand, does seem to be affected.</p>
<h2>How to Reproduce</h2>
<ol>
<li>Enable DNS encryption in Little Snitch &gt; Settings.</li>
<li>Start <a href="https://www.wireshark.org/">Wireshark</a> with a capture filter for <code>port 53</code>.</li>
<li>Run the following code in an Xcode playground:</li>
</ol>
<pre><code>import Foundation

let domain = "dnsproxytest.com"
var result: UnsafeMutablePointer&lt;addrinfo&gt;?
let status = getaddrinfo(domain, nil, nil, &amp; result)</code></pre>
<p>You will notice that the lookup for <code>dnsproxytest.com</code> can be seen in Wireshark in unencrypted form on UDP port 53 (the default for unencrypted lookups).</p>
<p>Additionally, you will see that Little Snitch Network Monitor does not display any traffic for the lookup because the lookup completely bypasses the network filter!</p>
<p>We have reported this bug to Apple and hope for a fix soon. Please stay tuned, we will keep you updated here.</p>
<h2>Update 2024-09-17, 7:10 p.m.</h2>
<p>After further investigation, we found that this bug has already existed at least since macOS 14.5 Sonoma (maybe even earlier, but we currently don’t have access to an older 14.x system for testing).</p></section>
</article>
</main>

			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Swift 6 (330 pts)]]></title>
            <link>https://www.swift.org/blog/announcing-swift-6/</link>
            <guid>41571606</guid>
            <pubDate>Tue, 17 Sep 2024 19:20:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.swift.org/blog/announcing-swift-6/">https://www.swift.org/blog/announcing-swift-6/</a>, See on <a href="https://news.ycombinator.com/item?id=41571606">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="main">
<article>
  <header>
    

    <time pubdate="" datetime="2024-09-17T06:00:00-04:00">September 17, 2024</time>
    
  </header>

  <p>We’re delighted to announce the general availability of Swift 6. This is a major new release that expands Swift to more platforms and domains.</p>

<p>Many people know of Swift as a language for app development, with a million apps on the App Store. But Swift is great for more than just apps. Swift’s safety, speed, and approachability make it a great choice for many other use cases including libraries, internet-scale services, and the most performance-critical and secure code.</p>

<p>Swift 6 scales even further through new low-level programming features, an embedded Swift language subset, expanded Linux and Windows support, new cross-platform APIs including the new Swift Testing library, and more.</p>

<p>Read on for a deep dive into changes to the language, standard libraries, debugging, platform support, and next steps for getting started with Swift 6.</p>

<h2 id="language-and-standard-library">Language and Standard Library <a title="Permalink for Language and Standard Library section" href="#language-and-standard-library">
            <!--?xml version="1.0" encoding="utf-8"?--> 
          </a></h2>



<p>Swift has long offered memory safety, ensuring that variables are initialized before they’re used, memory isn’t accessed after it’s been deallocated, and array indices are checked for out-of-bounds errors.  Swift 6 now includes a new, opt-in language mode that extends Swift’s safety guarantees to prevent data races in concurrent code by diagnosing potential data races in your code as compiler errors.</p>

<p>Data-race safety checks were previously available as warnings in Swift 5.10 through the <code>-strict-concurrency=complete</code> compiler flag. Thanks to improved <code>Sendable</code> inference and new compiler analysis for transferring mutable state from one actor to another, Swift 6 warnings about data-race safety have fewer false positives. You can find more information about the Swift 6 language mode and how to migrate at <a href="http://swift.org/migration">Swift.org/migration</a>.</p>

<p>Swift 6 marks the start of the journey to make data-race safety dramatically easier. The usability of data-race safety remains an area of active development, and your feedback will help shape future improvements.</p>

<p>Swift 6 also comes with a new <a href="https://developer.apple.com/documentation/synchronization">Synchronization library</a> for low-level concurrency APIs, including atomic operations and a new mutex API.</p>



<p>Swift 6 enables functions to specify the type of error that they throw as part of their signature. This feature is useful in generic code that forwards along errors thrown in client code, or in resource-constrained environments that cannot allocate memory, such as in embedded Swift code.</p>

<p>For example:</p>

<div><pre><code><span>func</span> <span>parseRecord</span><span>(</span><span>from</span> <span>string</span><span>:</span> <span>String</span><span>)</span> <span>throws</span><span>(</span><span>ParseError</span><span>)</span> <span>-&gt;</span> <span>Record</span> <span>{</span> 
  <span>// ... </span>
<span>}</span>
</code></pre></div>

<p>A call to <code>parseRecord(from:)</code> will either return a <code>Record</code> instance or throw an error of type <code>ParseError</code>. A <code>do..catch</code> block will infer <code>ParseError</code> as the type of the <code>error</code> variable:</p>

<div><pre><code><span>do</span> <span>{</span>
  <span>let</span> <span>record</span> <span>=</span> <span>try</span> <span>parseRecord</span><span>(</span><span>from</span><span>:</span> <span>myString</span><span>)</span>
<span>}</span> <span>catch</span> <span>{</span>
  <span>// 'error' has type 'ParseError'</span>
<span>}</span>
</code></pre></div>

<p>Typed throws generalizes over throwing and non-throwing functions. A function that is specified as <code>throws</code> (without a specific error type) is equivalent to one that specifies <code>throws(any Error)</code>, whereas a non-throwing function is equivalent to one that specifies <code>throws(Never)</code>. Calls to functions that are <code>throws(Never)</code> are non-throwing and don’t require error handling at the call site.</p>

<p>Typed throws can also be used in generic functions to propagate error types from parameters, in a manner that is more precise than <code>rethrows</code>. For example, the <code>Sequence.map</code> method can propagate the thrown error type from its closure parameter, indicating that it only throws the same type of errors as the closure:</p>

<div><pre><code><span>extension</span> <span>Sequence</span> <span>{</span>
  <span>func</span> <span>map</span><span>&lt;</span><span>T</span><span>,</span> <span>E</span><span>&gt;</span><span>(</span><span>_</span> <span>body</span><span>:</span> <span>(</span><span>Element</span><span>)</span> <span>throws</span><span>(</span><span>E</span><span>)</span> <span>-&gt;</span> <span>T</span><span>)</span> <span>throws</span><span>(</span><span>E</span><span>)</span> <span>-&gt;</span> <span>[</span><span>T</span><span>]</span> <span>{</span> 
    <span>// ... </span>
  <span>}</span>
<span>}</span>
</code></pre></div>

<p>When given a closure that throws <code>ParseError</code>, <code>map</code> will throw <code>ParseError</code>. When given a non-throwing closure, <code>E</code> is inferred to <code>Never</code> and <code>map</code> will not throw.</p>



<p>Swift 5.9 introduced non-copyable types with the <code>~Copyable</code> syntax for modeling resources with unique ownership, and writing performance-conscious code by eliminating the runtime overhead associated with copying. Swift 6 now supports these types with the generics system, making it possible to write generic code that works with both copyable and non-copyable types.</p>

<p>For example:</p>

<div><pre><code><span>protocol</span> <span>Drinkable</span><span>:</span> <span>~Copyable</span> <span>{</span>
  <span>consuming</span> <span>func</span> <span>use</span><span>()</span>
<span>}</span>

<span>struct</span> <span>Coffee</span><span>:</span> <span>Drinkable</span><span>,</span> <span>~Copyable</span> <span>{</span> <span>/* ... */</span> <span>}</span>
<span>struct</span> <span>Water</span><span>:</span> <span>Drinkable</span> <span>{</span> <span>/* ... */</span> <span>}</span>

<span>func</span> <span>drink</span><span>(</span><span>item</span><span>:</span> <span>consuming</span> <span>some</span> <span>Drinkable</span> <span>&amp;</span> <span>~Copyable</span><span>)</span> <span>{</span>
  <span>item</span><span>.</span><span>use</span><span>()</span>
<span>}</span>

<span>drink</span><span>(</span><span>item</span><span>:</span> <span>Coffee</span><span>())</span>
<span>drink</span><span>(</span><span>item</span><span>:</span> <span>Water</span><span>())</span>
</code></pre></div>

<p>The <code>Drinkable</code> protocol has no requirement that its conforming types are <code>Copyable</code>. This means both the non-copyable type <code>Coffee</code> and copyable type <code>Water</code> can be passed into the generic <code>drink</code> function.</p>

<p>Switch statements can now be written to avoid copying within enum pattern-matching operations. This means that switch statements can be used with non-copyable payloads and can also provide performance benefits for copyable payloads, especially those based on copy-on-write containers like <code>Array</code> and <code>Dictionary</code>.</p>

<p>Non-copyable types are already used throughout the standard libraries. For instance, the new <code>Atomic</code> type in the Synchronization library is based on <code>~Copyable</code>, <code>Optional</code> and <code>Result</code> can now wrap non-copyable types, and the unsafe buffer pointer types can now point to non-copyable elements. C++ interoperability also uses non-copyable types to expose C++ move-only types to Swift.</p>



<p>Swift 5.9 introduced bidirectional interoperability with C++ to seamlessly bring Swift to more existing projects. Swift 6 expands interoperability support to C++ move-only types, virtual methods, default arguments, and more standard library types including <code>std::map</code> and <code>std::optional</code>.</p>

<p>C++ types that do not have a copy constructor can now be accessed from Swift 6 as non-copyable types with <code>~Copyable</code>. And for those times when it’s useful to expose a C++ type with a copy constructor as <code>~Copyable</code> in Swift for better performance, a new <code>SWIFT_NONCOPYABLE</code> annotation can be applied to the C++ type.</p>

<p>Swift now also supports calls of C++ virtual methods on types annotated as <code>SWIFT_SHARED_REFERENCE</code> or <code>SWIFT_IMMORTAL_REFERENCE</code>.</p>

<p>When calling C++ functions or methods that have default argument values for some of their parameters, Swift now respects these default values, rather than requiring you to explicitly pass an argument.</p>



<p>Swift 6 includes a preview of <a href="https://github.com/swiftlang/swift-evolution/blob/main/visions/embedded-swift.md">Embedded Swift</a>, a language subset and compilation mode suitable for embedded software development, such as programming microcontrollers. The toolchain supports ARM and RISC-V bare-metal targets.</p>

<p>Embedded Swift produces small and standalone binaries by relying on generic specialization. Since it doesn’t rely on a runtime or type metadata, Embedded Swift is suitable for platforms with tight memory constraints as well as use in low-level environments with limited runtime dependencies.</p>

<p>Embedded Swift remains an experimental feature, with ongoing development before stable support in a future Swift release.</p>



<p>Swift 6 rounds out the set of low-level integer primitives with the addition of signed and unsigned <a href="https://github.com/swiftlang/swift-evolution/blob/main/proposals/0425-int128.md">128-bit integer types</a>. These are available on all Swift platforms, and provide the same API as other fixed-width integer types in the standard library.</p>



<p>Swift 6 introduces a number of productivity enhancements, including <a href="https://developer.apple.com/documentation/swift/sequence/count(where:)"><code>count(where:)</code></a> to streamline counting the number of elements in a sequence that satisfy a predicate, <a href="https://www.swift.org/blog/pack-iteration/">pack iteration</a> for writing natural <code>for</code>-loops over the elements in a value parameter pack, access control for imports to keep implementation details from leaking into your public APIs, <code>@attached(body)</code> macros for synthesizing and augmenting function implementations, expression macros as default arguments, and more.</p>

<p>You can find a complete list of language proposals that were accepted through the <a href="https://github.com/swiftlang/swift-evolution">Swift Evolution</a> process and implemented in Swift 6 on the <a href="https://www.swift.org/swift-evolution/#?version=6.0">Swift Evolution dashboard</a>.</p>





<p>Swift 6 provides a new debugging macro to easily customize how an object is displayed in LLDB when using the <code>p</code> command, and in the variables view in Xcode and VSCode, by using a formatting scheme that does not run arbitrary code.</p>

<p>Types that conform to <code>CustomDebugStringConvertible</code> provide a <code>debugDescription</code> property that returns a string describing the object. In LLDB, the <code>po</code> command calls this computed property on an object. In contrast, the <code>p</code> command uses LLDB’s type summary formatters to directly format the object using its stored property values.</p>

<p><a href="https://developer.apple.com/documentation/swift/debugdescription()"><code>@DebugDescription</code></a> is a new macro in the standard library which lets you specify LLDB type summaries for your own types directly in code. The macro processes the <code>debugDescription</code> property, translating simple string interpolations involving stored properties into LLDB type summaries. This allows LLDB to use your custom formatting even when using <code>p</code>, and also in Xcode or VSCode’s variable display windows. The macro can use an existing conformance to <code>CustomDebugStringConvertible</code>, or you can provide a separate string interpolation only for use in LLDB’s <code>p</code> command. Providing a separate LLDB description string is useful if your <code>CustomDebugStringConvertible</code> implementation doesn’t meet the requirements of the <code>@DebugDescription</code> macro, or if you’re familiar with the <a href="https://lldb.llvm.org/use/variable.html#summary-strings">LLDB Summary String syntax</a> and you want to use it directly.</p>

<p>For example, the following code customizes how <code>po</code> in LLDB displays the <code>Organization</code> type with a conformance to <code>CustomDebugStringConvertible</code>, and the <code>@DebugDescription</code> macro exposes this custom formatting to the <code>p</code> command and the variables view:</p>

<div><pre><code><span>@DebugDescription</span>
<span>struct</span> <span>Organization</span><span>:</span> <span>CustomDebugStringConvertible</span> <span>{</span>
  <span>var</span> <span>id</span><span>:</span> <span>String</span>
  <span>var</span> <span>name</span><span>:</span> <span>String</span>
  <span>var</span> <span>manager</span><span>:</span> <span>Person</span>
  <span>// ... and more</span>

  <span>var</span> <span>debugDescription</span><span>:</span> <span>String</span> <span>{</span>
    <span>"#</span><span>\(</span><span>id</span><span>)</span><span> </span><span>\(</span><span>name</span><span>)</span><span> [</span><span>\(</span><span>manager</span><span>.</span><span>name</span><span>)</span><span>]"</span>
  <span>}</span>
<span>}</span>
</code></pre></div>

<div><pre><code>(lldb) p myOrg
(Organization) myOrg = "`#100 Worldwide Travel [Jonathan Swift]`" 
</code></pre></div>



<p>Swift 6 dramatically improves startup performance in the debugger when you use explicit module builds. When debugging locally-built code, LLDB can now import explicitly-built Swift and Clang modules directly from the project build artifacts. This avoids the need to recompile implicit Clang module dependencies from source, which can take a long time, and it’s very sensitive to issues with header search paths. If the first <code>p</code> or <code>po</code> command in LLDB takes a long time due to Clang module compilation, or if your debugging is frequently blocked by Clang header import problems, consider adopting explicit modules in your project!</p>





<p>Swift 6 unifies the implementation of <a href="https://developer.apple.com/documentation/foundation/">Foundation</a> across all platforms. The modern, portable Swift implementation provides consistency across platforms, it’s more robust, and it’s open source. macOS and iOS started using the Swift implementation of Foundation alongside Swift 5.9, and Swift 6 brings these improvements to Linux and Windows.</p>

<p>Core types like <code>JSONDecoder</code>, <code>URL</code>, <code>Calendar</code>, <code>FileManager</code>, <code>ProcessInfo</code>, and more have been completely reimplemented in Swift. These types share their implementation with macOS 15 and iOS 18, providing a new level of cross-platform consistency, reliability, and performance. Recently released APIs like <code>FormatStyle</code>, <code>ParseStrategy</code>, <code>Predicate</code>, and <code>JSON5</code>, from past macOS and iOS releases are now available on all Swift platforms. New Foundation APIs like <code>Expression</code>, calendar enumeration improvements, calendar recurrence rules, format style enhancements, and more are available simultaneously on macOS, iOS, Linux, and Windows - and they were built with community involvement.</p>

<p>If your Linux or Windows app imports the <code>Foundation</code> library from the Swift toolchain today, you get all of these improvements for free. And if your app is particularly sensitive to binary size, you can now import the <code>FoundationEssentials</code> library, which provides a more targeted subset of Foundation’s features that omits internationalization and localization data.</p>



<p>Swift 6 introduces Swift Testing, a new testing library designed from the ground up for Swift. It includes expressive APIs that make it easy to write and organize tests. It provides detailed output when a test fails using macros like <code>#expect</code>. And it scales to large codebases with features like parameterization to easily repeat a test with different arguments.</p>

<p>For example:</p>

<div><pre><code><span>@Test</span><span>(</span><span>"Continents mentioned in videos"</span><span>,</span> <span>arguments</span><span>:</span> <span>[</span>
  <span>"A Beach"</span><span>,</span>
  <span>"By the Lake"</span><span>,</span>
  <span>"Camping in the Woods"</span>
<span>])</span>
<span>func</span> <span>mentionedContinents</span><span>(</span><span>videoName</span><span>:</span> <span>String</span><span>)</span> <span>async</span> <span>throws</span> <span>{</span>
  <span>let</span> <span>videoLibrary</span> <span>=</span> <span>try</span> <span>await</span> <span>VideoLibrary</span><span>()</span>
  <span>let</span> <span>video</span> <span>=</span> <span>try</span> <span>#require</span><span>(</span><span>await</span> <span>videoLibrary</span><span>.</span><span>video</span><span>(</span><span>named</span><span>:</span> <span>videoName</span><span>))</span>
  <span>#expect(video.mentionedContinents.count &lt;= 3)</span>
<span>}</span>
</code></pre></div>

<p>Swift Testing takes full advantage of macros. Its <code>@Test</code> and <code>@Suite</code> attached macros declare test functions and suite types respectively, and they accept arguments (known as traits) to customize various behaviors. The <code>#expect</code> and <code>#require</code> expression macros validate expected behaviors, and capture rich representation of expressions and their sub-values to produce detailed failure messages.</p>

<p>Since Swift Testing is included directly in Swift 6 toolchains, you can <code>import Testing</code> without needing to declare a package dependency. This means your tests do not need to build Swift Testing or its dependencies (including swift-syntax), and its macro implementation comes prebuilt. The package manager in Swift 6 automatically builds and runs Swift Testing tests in addition to XCTests (if present), and shows results from both libraries in log output. Swift Testing supports all platforms that Swift officially supports, including all Apple platforms, Linux, and Windows.</p>

<p>To learn more about this new open source project, visit the <a href="https://github.com/swiftlang/swift-testing">swift-testing</a> repository on GitHub, and get involved with its ongoing development <a href="https://forums.swift.org/c/related-projects/swift-testing/103">on the forums</a>.</p>



<p>Swift is designed to support development and execution on all major operating systems, and platform consistency and expansion underpins Swift’s ability to reach new programming domains. Swift 6 brings major improvements to Linux and Windows across the board, including support for more Linux distributions and Windows architectures. Toolchains for all of the following platforms are available for download from <a href="https://www.swift.org/install/">Swift.org/install</a>.</p>



<p>Swift 6 supports building fully statically linked executables for Linux; these have no external dependencies, so they are ideal for situations where you want to copy a program directly onto a system or into a container and run it without installing any extra software. The SDK can also be used to cross-compile to Linux from other platforms. Learn how to <a href="https://www.swift.org/documentation/articles/static-linux-getting-started.html">get started with the static SDK for Linux</a> on <a href="http://swift.org/">Swift.org</a>.</p>



<p>Swift 6 adds official support and testing for Debian and Fedora, as well as on Ubuntu 24.04.</p>



<p>Prebuilt toolchains are now available for the arm64 architecture, which provides improved compiler performance for Windows on ARM hosts. In Swift 6, the Swift package manager also parallelizes builds across multiple cores on Windows by default. On a 10-core machine, this can improve build performance by up to a factor of 10!</p>





<p>You can try out these exciting new developments in Swift 6 today! Install the official Swift 6 toolchains for macOS, Linux, and Windows at <a href="https://www.swift.org/install/">Swift.org/install</a>.</p>



<p><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/">The Swift Programming Language</a> book has been updated to reflect the latest Swift 6 syntax and features. It serves as the official Swift guide and an excellent starting point for learning the language.</p>

<p>To help kickstart your Swift journey, <a href="https://www.swift.org/getting-started/">Swift.org/getting-started</a> offers tutorials for various use cases, including building a cross-platform library, a web service using Vapor, and an embedded application for a microcontroller. There are also articles for diving deeper into some of Swift’s most popular features.</p>



<p>The Swift package ecosystem is continuously growing with new technologies to help you with a variety of tasks in your projects. You can explore package highlights at <a href="https://www.swift.org/packages/">Swift.org/packages</a>, which features popular package categories and a selection of new and notable packages that are hand-curated from an open nomination process every month.</p>



<p>Your experience with Swift 6 and your feedback can help shape the future evolution of the language, the tools, the package ecosystem, and the community. You can get involved by sharing your packages, documentation improvements, educational content, bug reports and enhancement requests, code contributions, and participating in forum discussions. Learn more at <a href="http://swift.org/contributing">Swift.org/contributing</a>.</p>

<p>Swift 6 is the culmination of countless contributions from members across the Swift community, and it marks a decade of building this incredible language, ecosystem, and community together. Thank you to everyone who participated in development and provided feedback. Your contributions make Swift a better language.</p>


  
</article>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Krazam: High Agency Individual Contributor [video] (190 pts)]]></title>
            <link>https://www.youtube.com/watch?v=dLTUqPue9sQ</link>
            <guid>41571454</guid>
            <pubDate>Tue, 17 Sep 2024 19:07:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.youtube.com/watch?v=dLTUqPue9sQ">https://www.youtube.com/watch?v=dLTUqPue9sQ</a>, See on <a href="https://news.ycombinator.com/item?id=41571454">Hacker News</a></p>
Couldn't get https://www.youtube.com/watch?v=dLTUqPue9sQ: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon employees: 'I'd rather go back to school than work in an office again' (114 pts)]]></title>
            <link>https://fortune.com/2024/09/17/amazon-andy-jassy-rto-mandate-employees-angry/</link>
            <guid>41570981</guid>
            <pubDate>Tue, 17 Sep 2024 18:25:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://fortune.com/2024/09/17/amazon-andy-jassy-rto-mandate-employees-angry/">https://fortune.com/2024/09/17/amazon-andy-jassy-rto-mandate-employees-angry/</a>, See on <a href="https://news.ycombinator.com/item?id=41570981">Hacker News</a></p>
<div id="readability-page-1" class="page"><p><a href="https://fortune.com/company/amazon-com/" target="_blank" aria-label="Go to https://fortune.com/company/amazon-com/">Amazon</a> employees are slamming the company’s return-to-office policy and plotting their exit less than 24 hours after CEO Andy Jassy announced that they must return to the office five days a week from January.</p><div>



<p>While some Amazon workers are ripping into the company’s toughened RTO policy on social media, others are even blasting their employer in the company’s internal Slack channel.</p>



<p>“Please do note that this is (in a lot of cases) significantly more strict and out of its mind than many teams operated under pre-COVID,” one staffer wrote on Slack, according to <a href="https://www.businessinsider.com/amazon-workers-blast-strict-rto-mandate-five-days-week-2024-9" target="_blank" aria-label="Go to https://www.businessinsider.com/amazon-workers-blast-strict-rto-mandate-five-days-week-2024-9" rel="noopener"><em>Business Insider.</em></a></p>



<p>“This is not ‘going back’ to how it was before. It’s just going backwards.”&nbsp;</p>



<p>Another employee suggested they’d rather be put on the company’s aggressive <a href="https://fortune.com/2024/03/20/amazon-layoffs-performance-review-tech-human-resources-andy-jassy/" target="_self" aria-label="Go to https://fortune.com/2024/03/20/amazon-layoffs-performance-review-tech-human-resources-andy-jassy/">performance improvement plan</a> than comply with the mandate: “Can I negotiate my manager to PIP me… Take my money and leave?”</p>



<p>Employees aren’t just talking about quitting, a small few have already changed their status on <a href="https://fortune.com/company/linkedin/" target="_blank" aria-label="Go to https://fortune.com/company/linkedin/">LinkedIn</a> to #opentowork as they openly search for more flexible jobs.</p>



<p>“Amazon has announced 5 day RTO, which is unfortunate because I’m interested in working for a living, not live-action role playing and virtue signaling,” an Amazon Web Services engineer <a href="https://www.linkedin.com/feed/update/urn:li:activity:7241512219354480640/" target="_blank" aria-label="Go to https://www.linkedin.com/feed/update/urn:li:activity:7241512219354480640/" rel="noopener">posted</a> on the networking platform.</p>



<p>“If you have remote opportunities available, please message me. Nothing is off the table. I’d rather go back to school than work in an office again.”</p>



<p>A <span>commentator on&nbsp;<a href="https://www.reddit.com/r/technology/comments/1fiaso5/amazon_tells_employees_to_return_to_office_five/" target="_blank" aria-label="Go to https://www.reddit.com/r/technology/comments/1fiaso5/amazon_tells_employees_to_return_to_office_five/" rel="noopener">Reddit</a>&nbsp;who claims to have worked at Amazon for three years sai</span>d that they’re mentally checking out of their current role while they hunt for another.</p>



<p>“Probably going to soft quit and get a new job. F—k Jassy,” the user wrote, describing the measure as a “swift kick to the nuts.”</p>







<p>Amazon veteran, Jassy—who took the helm after Jeff Bezos <a href="https://fortune.com/2023/11/03/jeff-bezos-moving-from-seattle-washington-to-miami-florida-amazon-blue-origin/" target="_self" aria-label="Go to https://fortune.com/2023/11/03/jeff-bezos-moving-from-seattle-washington-to-miami-florida-amazon-blue-origin/">stepped down</a> in 2021—issued a <a href="https://www.aboutamazon.com/news/company-news/ceo-andy-jassy-latest-update-on-amazon-return-to-office-manager-team-ratio" target="_blank" aria-label="Go to https://www.aboutamazon.com/news/company-news/ceo-andy-jassy-latest-update-on-amazon-return-to-office-manager-team-ratio" rel="noopener">memo</a> to all staffers yesterday that said they will be required to work in the office “the way we were before the onset of COVID.”</p>



<p>“Before the pandemic, it was not a given that folks could work remotely two days a week, and that will also be true moving forward—our expectation is that people will be in the office outside of extenuating circumstances,” Jassy, who started working at the $1.94 trillion tech giant in 1997, wrote.</p>



<p>Of course, many people moved to the suburbs and made childcare arrangements according to the company’s current 3 day in-office policy—or as Jassy puts it “set up their personal lives in such a way that returning to the office consistently five days per week will require some adjustments.”</p>



<p>That’s why the 56-year-old said that the new stricter enforcement will not kick in until the new year to “help ensure a smooth transition.”</p>



<p>The CEO added that moving forward remote working will be reserved for emergency scenarios like “if you or your child” is sick.</p>



<h2>‘What better way to cut jobs’</h2>



<p>Jassy positioned the changes at Amazon—which also include a flattened hierarchy and no more hot desking—as a better way to work.</p>



<p>“We’ve observed that it’s easier for our teammates to learn, model, practice, and strengthen our culture; collaborating, brainstorming, and inventing are simpler and more effective; teaching and learning from one another are more seamless; and, teams tend to be better connected to one another,” Jassy insisted.</p>



<p>However, some disgruntled proffesionals have suggested that the new policy is designed to reduce its current 1.5 million-plus headcount.</p>



<p>“This is a layoff in disguise,” one user complained on Reddit. “Return to the office or you’re fired and we don’t have to pay any severance or unemployment.”</p>



<p>“What better way to cut jobs than to force everyone back into the office and watch people quit in droves,” another wrote.</p>



<p>Amazon didn’t respond to <em>Fortune’s</em> request for comment, including whether the policy is a thinly veiled headcount reduction.</p>



<p>However, the company has previously used its in-office mandate to cut out defiant workers.</p>



<p>Earlier this year, Amazon managers were given the green light to <a href="https://fortune.com/2023/10/20/amazon-return-to-office-mandate-manager-guidelines/" target="_self" aria-label="Go to https://fortune.com/2023/10/20/amazon-return-to-office-mandate-manager-guidelines/">fire employees</a> who fail to show face three days a week in the office.&nbsp;</p>



<p>Meanwhile the company’s “return-to-hub” mandate in July forced remote workers to pick working (and in some cases <a href="https://www.cnbc.com/2023/08/22/amazon-employees-are-quitting-after-they-were-told-to-relocate-states.html" target="_blank" aria-label="Go to https://www.cnbc.com/2023/08/22/amazon-employees-are-quitting-after-they-were-told-to-relocate-states.html" rel="noopener">relocating</a>) to the closest office to them—or resign.</p>



<p><em>Are you an Amazon employee who’s planning to quit because of the new RTO policy? Fortune wants to hear from you. Email <a href="mailto:orianna.royle@fortune.com" target="_blank" aria-label="Go to mailto:orianna.royle@fortune.com" rel="noopener">orianna.royle@fortune.com</a></em></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[GraalPy – A high-performance embeddable Python 3 runtime for Java (203 pts)]]></title>
            <link>https://www.graalvm.org/python/</link>
            <guid>41570708</guid>
            <pubDate>Tue, 17 Sep 2024 18:04:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.graalvm.org/python/">https://www.graalvm.org/python/</a>, See on <a href="https://news.ycombinator.com/item?id=41570708">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <p>
              <h4>Using Python from Java with GraalVM</h4>
            </p>
            <p>
              <h5>GraalPy brings the world of Python data science libraries to Java
                and other languages running on GraalVM. Using GraalVM's
                polyglot interfaces, it is now easier than ever to embed Python
                code in Java applications and with good performance to boot!
                Oracle GraalVM also includes sandboxing option to run Python native extensions like
                NumPy, SciPy, or Matplotlib in a managed Java application.
              </h5>
            </p>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[OpenTelemetry Tracing in < 200 lines of code (126 pts)]]></title>
            <link>https://jeremymorrell.dev/blog/minimal-js-tracing/</link>
            <guid>41570163</guid>
            <pubDate>Tue, 17 Sep 2024 17:21:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jeremymorrell.dev/blog/minimal-js-tracing/">https://jeremymorrell.dev/blog/minimal-js-tracing/</a>, See on <a href="https://news.ycombinator.com/item?id=41570163">Hacker News</a></p>
<div id="readability-page-1" class="page"><article> <p>Developers tend to treat tracing as deep magic, and OpenTelemetry is no exception. OpenTelemetry may be even
<em>more</em> mysterious given how many concepts your are exposed to even with
<a href="https://github.com/open-telemetry/opentelemetry-js/blob/9c30124e764e08bd6ccf8dbfbe426a8531c20352/examples/basic-tracer-node/index.js">beginning examples</a>.
<a href="#footnote-1" id="footnote-ref-1" data-footnote-ref="true" aria-describedby="footnote-label"><code>[1]</code></a></p>
<p>It also doesn’t help that as part of building a mature, battle-tested tracing library, the code itself tends to become
more and more cryptic over time, contorting itself to avoid edge-cases, work across many environments, and optimize
code paths to avoid impacting performance of its host applications. <a href="https://github.com/open-telemetry/opentelemetry-js-contrib/blob/12adb4354f09ade438cd96340bdfd1f715b5fed3/plugins/node/opentelemetry-instrumentation-express/src/instrumentation.ts#L153-L327">Auto-instrumentation is particularly prone to
inscrutibility</a> as it seeks to auto-magically wrap code that may never have been intended to be wrapped or extended.</p>
<p>It’s no wonder then that most developers approach tracing libraries as unknownable black boxes. We add them to our
applications, cross our fingers, and hope they give us useful information when the pager goes off at 2am.</p>
<p>They are likely a lot simpler than you expect! Once you peel back the layers, I find a useful mental model of tracing
looks like “fancy logging” combined with “context propagation” a.k.a “passing some IDs around”.</p>
<h3 id="logs">Logs</h3>
<p>Developers tend to be very comfortable with logs. We start off with “Hello world!”, and they stay with us forever after.
We reach for them to add <code>console.log("potato")</code> to see if our code is even being run (even though the debugger is
like <em>right there</em>).</p>
<p>Logs are useful! Though hopefully someone comes along and convinces you that your logs should always be structured as sets of key / value pairs.</p>
<blockquote><div lang="en" dir="ltr"><p>If you make one New Year’s resolution related to modernizing your infrastructure and preparing for the brave new world of distributed systems, I suggest this:</p><p>Structure your logs.</p><p>You won’t be sorry. You will eventually be so, so glad you did.</p><p>Just do it.</p></div>— Charity Majors (@mipsytipsy) <a href="https://twitter.com/mipsytipsy/status/951272678345687040?ref_src=twsrc%5Etfw">January 11, 2018</a></blockquote> 
<p>It’s nice to have some consistency in your logs: make sure each one has a consistently-formatted timestamp or includes a field like
“name” so you can easily find them when searching. You probably have found yourself writing a helper function like this in your projects:</p>
<pre tabindex="0" data-language="javascript"><code><span><span>log</span><span>(</span><span>"user-authenticated"</span><span>, { userId, remaingingRateLimit });</span></span>
<span></span>
<span><span>// ...</span></span>
<span></span>
<span><span>function</span><span> log</span><span>(</span><span>name</span><span>, </span><span>attributes</span><span> =</span><span> {}) {</span></span>
<span><span>  console.</span><span>log</span><span>(</span></span>
<span><span>    JSON</span><span>.</span><span>format</span><span>({</span></span>
<span><span>      name,</span></span>
<span><span>      timestamp: </span><span>new</span><span> Date</span><span>().</span><span>getTime</span><span>(),</span></span>
<span><span>      ...</span><span>attributes,</span></span>
<span><span>    })</span></span>
<span><span>  );</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<pre tabindex="0" data-language="js"><code><span><span>{ </span><span>"timestamp"</span><span>: </span><span>1725845013447</span><span>, </span><span>"name"</span><span>: </span><span>"user-authenticated"</span><span>, </span><span>"userId"</span><span>: </span><span>"1234"</span><span>, </span><span>"remaingingRateLimit"</span><span>: </span><span>100</span><span> }</span></span>
<span></span></code></pre>
<p>You might also have written something to help track how long some sub-task takes:</p>
<pre tabindex="0" data-language="javascript"><code><span><span>logTiming</span><span>(</span><span>"query-user-info"</span><span>, () </span><span>=&gt;</span><span> {</span></span>
<span><span>  db.</span><span>fetchUserInfo</span><span>();</span></span>
<span><span>});</span></span>
<span></span>
<span><span>// ....</span></span>
<span></span>
<span><span>function</span><span> logTiming</span><span>(</span><span>name</span><span>, </span><span>attributes</span><span> =</span><span> {}, </span><span>lambda</span><span>) {</span></span>
<span><span>  let</span><span> startTime </span><span>=</span><span> new</span><span> Date</span><span>().</span><span>getTime</span><span>();</span></span>
<span></span>
<span><span>  // run some subtask</span></span>
<span><span>  lambda</span><span>();</span></span>
<span></span>
<span><span>  let</span><span> durationMs </span><span>=</span><span> new</span><span> Date</span><span>().</span><span>getTime</span><span>() </span><span>-</span><span> startTime;</span></span>
<span><span>  log</span><span>(name, { durationMs, </span><span>...</span><span>attributes });</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<pre tabindex="0" data-language="js"><code><span><span>{ </span><span>"timestamp"</span><span>: </span><span>1725845013447</span><span>, </span><span>"name"</span><span>: </span><span>"query-user-info"</span><span>, </span><span>"durationMs"</span><span>: </span><span>12</span><span> }</span></span>
<span></span></code></pre>
<p>If so, congrats! You’re halfway to re-inventing trace spans.</p>
<h2 id="spans-are-fancy-log-lines">Spans are ✨fancy✨ log lines</h2>
<p>A trace is built-up of spans. The example below shows a single trace with 4 different spans:</p>
<p><img src="https://jeremymorrell.dev/_astro/trace-example.CjGDJS25_1rbk53.webp" alt="A Honeycomb screenshot of a trace waterfall" width="1930" height="318" loading="lazy" decoding="async"></p>
<p>You can think of a span as a collection of key / value pairs, much like a log line, with a few required fields.
Spans must have:</p>
<ul>
<li>a name</li>
<li>a timestamp</li>
<li>a duration</li>
<li>a set of IDs: trace ID, span ID, and a parent span ID. More about these later</li>
</ul>
<p>All other fields can be added as additional keys and values in an <code>attributes</code> map.</p>
<p>In code this might look something like this:</p>
<pre tabindex="0" data-language="javascript"><code><span><span>let</span><span> span </span><span>=</span><span> new</span><span> Span</span><span>(</span><span>"api-req"</span><span>);</span></span>
<span><span>let</span><span> resp </span><span>=</span><span> await</span><span> api</span><span>(</span><span>"get-user-limits"</span><span>);</span></span>
<span><span>span.</span><span>setAttributes</span><span>({ responseCode: resp.code });</span></span>
<span><span>span.</span><span>End</span><span>();</span></span>
<span><span>console.</span><span>log</span><span>(span);</span></span>
<span></span>
<span><span>// ...</span></span>
<span></span>
<span><span>class</span><span> Span</span><span> {</span></span>
<span><span>  constructor</span><span>(</span><span>name</span><span>, </span><span>context</span><span> =</span><span> {}, </span><span>attributes</span><span> =</span><span> new</span><span> Map</span><span>()) {</span></span>
<span><span>    this</span><span>.startTime </span><span>=</span><span> new</span><span> Date</span><span>().</span><span>getTime</span><span>();</span></span>
<span><span>    this</span><span>.traceID </span><span>=</span><span> context.traceID </span><span>??</span><span> crypto.</span><span>randomBytes</span><span>(</span><span>16</span><span>).</span><span>toString</span><span>(</span><span>"hex"</span><span>);</span></span>
<span><span>    this</span><span>.parentSpanID </span><span>=</span><span> context.spanID </span><span>??</span><span> undefined</span><span>;</span></span>
<span><span>    this</span><span>.spanID </span><span>=</span><span> crypto.</span><span>randomBytes</span><span>(</span><span>8</span><span>).</span><span>toString</span><span>(</span><span>"hex"</span><span>);</span></span>
<span><span>    this</span><span>.name </span><span>=</span><span> name;</span></span>
<span><span>    this</span><span>.attributes </span><span>=</span><span> attributes;</span></span>
<span><span>  }</span></span>
<span></span>
<span><span>  setAttributes</span><span>(</span><span>keyValues</span><span>) {</span></span>
<span><span>    for</span><span> (</span><span>let</span><span> [key, value] </span><span>of</span><span> Object.</span><span>entries</span><span>(keyValues)) {</span></span>
<span><span>      this</span><span>.attributes.</span><span>set</span><span>(key, value);</span></span>
<span><span>    }</span></span>
<span><span>  }</span></span>
<span></span>
<span><span>  end</span><span>() {</span></span>
<span><span>    this</span><span>.durationMs </span><span>=</span><span> new</span><span> Date</span><span>().</span><span>getTime</span><span>() </span><span>-</span><span> this</span><span>.startTime;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>This output would be:</p>
<pre tabindex="0" data-language="plaintext"><code><span><span>Span {</span></span>
<span><span>  startTime: 1722436476271,</span></span>
<span><span>  traceID: 'cfd3fd1ad40f008fea72e06901ff722b',</span></span>
<span><span>  parentSpanID: undefined,</span></span>
<span><span>  spanID: '6b65f0c5db08556d',</span></span>
<span><span>  name: 'api-req',</span></span>
<span><span>  attributes: Map(0) {</span></span>
<span><span>    "responseCode": 200</span></span>
<span><span>  },</span></span>
<span><span>  durationMs: 3903</span></span>
<span><span>}</span></span>
<span><span></span></span></code></pre>
<p>which we could format as an equivalent log line:</p>
<pre tabindex="0" data-language="json"><code><span><span>{</span></span>
<span><span>  "startTime"</span><span>: </span><span>1722436476271</span><span>,</span></span>
<span><span>  "traceID"</span><span>: </span><span>"cfd3fd1ad40f008fea72e06901ff722b"</span><span>,</span></span>
<span><span>  "spanID"</span><span>: </span><span>"6b65f0c5db08556d"</span><span>,</span></span>
<span><span>  "name"</span><span>: </span><span>"api-req"</span><span>,</span></span>
<span><span>  "responseCode"</span><span>: </span><span>200</span><span>,</span></span>
<span><span>  "durationMs"</span><span>: </span><span>3903</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<h2 id="traces-are-collections-of-spans">Traces are collections of spans</h2>
<p>If you want to see all of the logs from a particular request, you have likely done something like:</p>
<pre tabindex="0" data-language="javascript"><code><span><span>// generate a request id and inherit one from your platform</span></span>
<span><span>let</span><span> requestID </span><span>=</span><span> req.headers[</span><span>"X-REQUEST-ID"</span><span>];</span></span>
<span><span>// ...</span></span>
<span><span>log</span><span>(</span><span>"api-request-start"</span><span>, { requestID });</span></span>
<span><span>let</span><span> resp </span><span>=</span><span> await</span><span> apiRequest</span><span>();</span></span>
<span><span>log</span><span>(</span><span>"api-request-end"</span><span>, { requestID });</span></span>
<span></span></code></pre>
<p>which would allow you to search for a particular request id to see what happened while that particular request was executed:</p>
<pre tabindex="0" data-language="json"><code><span><span>{ </span><span>"timestamp"</span><span>: </span><span>1722436476271</span><span>, </span><span>"requestID"</span><span>: </span><span>"1234"</span><span>, </span><span>"name"</span><span>: </span><span>"fetch-user-permissions"</span><span> }</span></span>
<span><span>{ </span><span>"timestamp"</span><span>: </span><span>1722436476321</span><span>, </span><span>"requestID"</span><span>: </span><span>"1234"</span><span>, </span><span>"name"</span><span>: </span><span>"api-request-start"</span><span> }</span></span>
<span><span>{ </span><span>"timestamp"</span><span>: </span><span>1722436476345</span><span>, </span><span>"requestID"</span><span>: </span><span>"1234"</span><span>, </span><span>"name"</span><span>: </span><span>"api-request-end"</span><span> }</span></span>
<span><span>{ </span><span>"timestamp"</span><span>: </span><span>1722436476431</span><span>, </span><span>"requestID"</span><span>: </span><span>"1234"</span><span>, </span><span>"name"</span><span>: </span><span>"update-db-record"</span><span> }</span></span>
<span><span>{ </span><span>"timestamp"</span><span>: </span><span>1722436476462</span><span>, </span><span>"requestID"</span><span>: </span><span>"1234"</span><span>, </span><span>"name"</span><span>: </span><span>"create-email-job"</span><span> }</span></span>
<span></span></code></pre>
<p>Tracing execution like this can get you surprisingly far! But we can do better.</p>
<p>Trace spans have 3 different IDs that make up the Trace Context. The first two are really simple:</p>
<ul>
<li><strong>Span ID</strong>: a random ID for each span</li>
<li><strong>Trace ID</strong>: a random ID that multiple spans can share</li>
</ul>
<p>The last one is a little more complicated:</p>
<ul>
<li><strong>Parent Span ID</strong>: the Span ID that was the active span when this span was created</li>
</ul>
<p>The Parent Span ID is what allows a system to create a <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">DAG</a>
out of each trace once it has received each individual span. When rendered as a tree this results in
the waterfall view we all know and love, but it’s important to remember that this is only one possible
visualization of the data.</p>
<p><img src="https://jeremymorrell.dev/_astro/trace-example.CjGDJS25_1rbk53.webp" alt="A Honeycomb screenshot of a trace waterfall" width="1930" height="318" loading="lazy" decoding="async"></p>
<h2 id="existing-in-the-context">Existing in the context</h2>
<p>Our context only really needs two values: the trace id, and the id of the current span. When
we create a new span, we can inherit the <code>spanID</code> if one exists, generate a new <code>spanID</code>,
and set the new context.</p>
<pre tabindex="0" data-language="js"><code><span><span>let</span><span> context </span><span>=</span><span> {</span></span>
<span><span>  traceID: </span><span>"cfd3fd1ad40f008fea72e06901ff722b"</span><span>,</span></span>
<span><span>  spanID: </span><span>"6b65f0c5db08556d"</span><span>,</span></span>
<span><span>};</span></span>
<span></span></code></pre>
<p>We need some way of passing this context around our application. We could do this manually:</p>
<pre tabindex="0" data-language="js"><code><span><span>let</span><span> { span, newContext } </span><span>=</span><span> new</span><span> Span</span><span>(</span><span>"api-req"</span><span>, oldContext);</span></span>
<span></span></code></pre>
<p>Indeed, this is <a href="https://github.com/open-telemetry/opentelemetry-go/blob/b37e8a9860f03b78baf2c3ca0edcbc6c7f8fd969/example/namedtracer/main.go#L65">how it is done in the official Go SDK</a> however in most languages
this is done implicitly and handled automatically by the library. In Ruby or Python you can use a thread
local variable, but in Node you would use <a href="https://nodejs.org/api/async_context.html#class-asynclocalstorage">AsyncLocalStorage</a>.</p>
<p>At this point it helps to wrap our span creation in a helper function:</p>
<pre tabindex="0" data-language="js"><code><span><span>import</span><span> { AsyncLocalStorage } </span><span>from</span><span> "node:async_hooks"</span><span>;</span></span>
<span></span>
<span><span>let</span><span> asyncLocalStorage </span><span>=</span><span> new</span><span> AsyncLocalStorage</span><span>();</span></span>
<span><span>// start with an empty context</span></span>
<span><span>asyncLocalStorage.</span><span>enterWith</span><span>({ traceID: </span><span>undefined</span><span>, spanID: </span><span>undefined</span><span> });</span></span>
<span></span>
<span><span>async</span><span> function</span><span> startSpan</span><span>(</span><span>name</span><span>, </span><span>lambda</span><span>) {</span></span>
<span><span>  let</span><span> ctx </span><span>=</span><span> asyncLocalStorage.</span><span>getStore</span><span>();</span></span>
<span><span>  let</span><span> span </span><span>=</span><span> new</span><span> Span</span><span>(name, ctx, </span><span>new</span><span> Map</span><span>());</span></span>
<span><span>  await</span><span> asyncLocalStorage.</span><span>run</span><span>(span.</span><span>getContext</span><span>(), lambda, span);</span></span>
<span><span>  span.</span><span>end</span><span>();</span></span>
<span><span>  console.</span><span>log</span><span>(span);</span></span>
<span><span>}</span></span>
<span></span>
<span><span>startSpan</span><span>(</span><span>"parent"</span><span>, </span><span>async</span><span> (</span><span>parentSpan</span><span>) </span><span>=&gt;</span><span> {</span></span>
<span><span>  parentSpan.</span><span>setAttributes</span><span>({ outerSpan: </span><span>true</span><span> });</span></span>
<span><span>  startSpan</span><span>(</span><span>"child"</span><span>, </span><span>async</span><span> (</span><span>childSpan</span><span>) </span><span>=&gt;</span><span> {</span></span>
<span><span>    childSpan.</span><span>setAttributes</span><span>({ outerSpan: </span><span>false</span><span> });</span></span>
<span><span>  });</span></span>
<span><span>});</span></span>
<span></span></code></pre>
<p>And with that we have the core of our tracing library done! 🎉</p>
<pre tabindex="0" data-language="js"><code><span><span>Span {</span></span>
<span><span>  startTime</span><span>: </span><span>1725850276756</span><span>,</span></span>
<span><span>  traceID</span><span>: </span><span>'b8d002c2f6ae1291e0bd29c9791c9756'</span><span>,</span></span>
<span><span>  parentSpanID</span><span>: </span><span>'50f527cbf40230c3'</span><span>,</span></span>
<span><span>  name</span><span>: </span><span>'child'</span><span>,</span></span>
<span><span>  attributes</span><span>: </span><span>Map</span><span>(</span><span>1</span><span>) { </span><span>'outerSpan'</span><span> =&gt;</span><span> false</span><span> },</span></span>
<span><span>  spanID</span><span>: </span><span>'8037a93b6ed25c3a'</span><span>,</span></span>
<span><span>  durationMs</span><span>: </span><span>11.087375000000002</span></span>
<span><span>}</span></span>
<span><span>Span {</span></span>
<span><span>  startTime</span><span>: </span><span>1725850276744</span><span>,</span></span>
<span><span>  traceID</span><span>: </span><span>'b8d002c2f6ae1291e0bd29c9791c9756'</span><span>,</span></span>
<span><span>  parentSpanID</span><span>: </span><span>undefined</span><span>,</span></span>
<span><span>  name</span><span>: </span><span>'parent'</span><span>,</span></span>
<span><span>  attributes</span><span>: </span><span>Map</span><span>(</span><span>1</span><span>) { </span><span>'outerSpan'</span><span> =&gt;</span><span> true</span><span> },</span></span>
<span><span>  spanID</span><span>: </span><span>'50f527cbf40230c3'</span><span>,</span></span>
<span><span>  durationMs</span><span>: </span><span>26.076625</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>Our tracing library is perfectly usable even at <a href="https://github.com/jmorrell/minimal-nodejs-otel-tracer/blob/5ff45161aa2d6c0c6d0a41139803d54a2f88829d/simple_tracer.js">under 60 LoC</a>
but it has 2 big drawbacks:</p>
<ul>
<li>We have to manually add it everywhere</li>
<li>It also is restricted to a single system. We do not have a mechanism for passing the trace
context between any two systems in our larger service.</li>
</ul>
<p>Let’s fix that!</p>
<h2 id="going-distributed">Going distributed</h2>
<p>Distributed tracing sounds scary and intimidating, but it generally means that tracing
context can be passed around between systems so that you can track what operation kicked off
what other operation, and that all of this data gets reported to the same place at the end.</p>
<p>Whenever we make an HTTP call to another system, we need to pass along the Trace ID and the
Current Span ID. We could add these two fields to all of our HTTP payloads manually but
there’s a <a href="https://www.w3.org/TR/trace-context/">W3C standard</a> for how to encode this into
an HTTP header so that it gets sent as metadata for every request. The <code>traceparent</code> header
looks like:</p>
<pre tabindex="0" data-language="log"><code><span><span>00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01</span></span>
<span></span></code></pre>
<p>There is a full specification to digest and implement here, but for our purposes today we can ignore
most of this and think of it as conforming to this format:</p>
<pre tabindex="0" data-language="log"><code><span><span>00</span><span>-{ Trace ID}-{ Parent Span ID }-</span><span>01</span></span>
<span></span></code></pre>
<p>which allows us to parse and serialize our trace context with some simple functions:</p>
<pre tabindex="0" data-language="js"><code><span><span>let</span><span> getTraceParent</span><span> =</span><span> (</span><span>ctx</span><span>) </span><span>=&gt;</span><span> `00-${</span><span>ctx</span><span>.</span><span>traceID</span><span>}-${</span><span>ctx</span><span>.</span><span>spanID</span><span>}-01`</span><span>;</span></span>
<span></span>
<span><span>let</span><span> parseTraceParent</span><span> =</span><span> (</span><span>header</span><span>) </span><span>=&gt;</span><span> ({</span></span>
<span><span>  traceID: header.</span><span>split</span><span>(</span><span>"-"</span><span>)[</span><span>1</span><span>],</span></span>
<span><span>  spanID: header.</span><span>split</span><span>(</span><span>"-"</span><span>)[</span><span>2</span><span>],</span></span>
<span><span>});</span></span>
<span></span></code></pre>
<p>We need to be sure to add it to our outgoing requests, and parse it on any incoming requests.
Instrumentation helps with that.</p>
<h2 id="wrap-stuff-in-other-stuff">Wrap stuff in other stuff</h2>
<p><em>Instrumentation</em> is a fancy term for “wrap some other code in our code so we can track stuff”. Real
tracing libraries sometimes go to extreme lengths to make wrapping built-in or popular libraries
happen behind the scenes when you configure the library. We’re not going to be doing that.</p>
<p>Instead we’ll provide some <a href="https://hono.dev/docs/guides/middleware">middleware</a> for the
<a href="https://hono.dev/">Hono</a> web framework that the user can manually add.</p>
<pre tabindex="0" data-language="js"><code><span><span>async</span><span> function</span><span> honoMiddleware</span><span>(</span><span>c</span><span>, </span><span>next</span><span>) {</span></span>
<span><span>  // check the incoming request for the traceparent header</span></span>
<span><span>  // if it exists parse and inherit the trace context</span></span>
<span><span>  let</span><span> context </span><span>=</span><span> EMPTY_CONTEXT</span><span>;</span></span>
<span><span>  if</span><span> (c.req.</span><span>header</span><span>(</span><span>"traceparent"</span><span>)) {</span></span>
<span><span>    context </span><span>=</span><span> parseTraceParent</span><span>(c.req.</span><span>header</span><span>(</span><span>"traceparent"</span><span>));</span></span>
<span><span>  }</span></span>
<span></span>
<span><span>  // set the context and wrap the whole req / res operation in a span</span></span>
<span><span>  await</span><span> setContext</span><span>(context, </span><span>async</span><span> () </span><span>=&gt;</span><span> {</span></span>
<span><span>    await</span><span> startSpan</span><span>(</span><span>`${</span><span>c</span><span>.</span><span>req</span><span>.</span><span>method</span><span>} ${</span><span>c</span><span>.</span><span>req</span><span>.</span><span>path</span><span>}`</span><span>, </span><span>async</span><span> (</span><span>span</span><span>) </span><span>=&gt;</span><span> {</span></span>
<span><span>      // Before we let our app handle the request, let's pull some info about</span></span>
<span><span>      // it off and add it to our trace.</span></span>
<span><span>      span.</span><span>setAttributes</span><span>({</span></span>
<span><span>        "http.request.method"</span><span>: c.req.method,</span></span>
<span><span>        "http.request.path"</span><span>: c.req.path,</span></span>
<span><span>      });</span></span>
<span></span>
<span><span>      // let our app handle the request</span></span>
<span><span>      await</span><span> next</span><span>();</span></span>
<span></span>
<span><span>      // Pull information about how our app responded</span></span>
<span><span>      span.</span><span>setAttributes</span><span>({</span></span>
<span><span>        "http.response.status_code"</span><span>: c.res.status,</span></span>
<span><span>      });</span></span>
<span><span>    });</span></span>
<span><span>  });</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>We also need to handle making outgoing HTTP calls and making sure we attach the <code>traceparent</code>
header. There is no built-in concept of middleware for the built-in <code>fetch</code> command, so instead
we’re going to wrap it like a javascript burrito. We’ll have to do this ourselves, but it’s not
so bad, <a href="https://github.com/open-telemetry/opentelemetry-js/blob/9c30124e764e08bd6ccf8dbfbe426a8531c20352/experimental/packages/opentelemetry-instrumentation-fetch/src/fetch.ts#L304">especially compared to what doing it for real looks like</a>.</p>
<pre tabindex="0" data-language="js"><code><span><span>// pass the original function into our wrapping logic</span></span>
<span><span>function</span><span> patchFetch</span><span>(</span><span>originalFetch</span><span>) {</span></span>
<span><span>  // return a function with the same signature, but that executes our logic too</span></span>
<span><span>  return</span><span> async</span><span> function</span><span> patchedFetch</span><span>(</span><span>resource</span><span>, </span><span>options</span><span> =</span><span> {}) {</span></span>
<span><span>    // generate and add the traceparent header</span></span>
<span><span>    let</span><span> ctx </span><span>=</span><span> getContext</span><span>();</span></span>
<span></span>
<span><span>    if</span><span> (</span><span>!</span><span>options.headers) {</span></span>
<span><span>      options.headers </span><span>=</span><span> {};</span></span>
<span><span>    }</span></span>
<span><span>    options.headers[</span><span>"traceparent"</span><span>] </span><span>=</span><span> getTraceParent</span><span>(ctx);</span></span>
<span></span>
<span><span>    // run the underlying fetch function, but wrap it in a span and</span></span>
<span><span>    // pull out some info while we're at it</span></span>
<span><span>    let</span><span> resp;</span></span>
<span><span>    await</span><span> startSpan</span><span>(</span><span>"fetch"</span><span>, </span><span>async</span><span> (</span><span>span</span><span>) </span><span>=&gt;</span><span> {</span></span>
<span><span>      span.</span><span>setAttributes</span><span>({ </span><span>"http.url"</span><span>: resource });</span></span>
<span><span>      resp </span><span>=</span><span> await</span><span> originalFetch</span><span>(resource, options);</span></span>
<span><span>      span.</span><span>setAttributes</span><span>({ </span><span>"http.response.status_code"</span><span>: resp.status });</span></span>
<span><span>    });</span></span>
<span></span>
<span><span>    // pass along fetch's response. It's like we were never here</span></span>
<span><span>    return</span><span> resp;</span></span>
<span><span>  };</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p><a href="https://github.com/jmorrell/minimal-nodejs-otel-tracer/blob/5ff45161aa2d6c0c6d0a41139803d54a2f88829d/index.js">Here’s</a> a quick little app
to show off our tracer in action.</p>
<h2 id="lets-send-this-to-honeycomb">Let’s send this to Honeycomb</h2>
<p>We can log out our spans to the terminal, but that’s not a great user experience. Before we look
at OpenTelemetry, I think it’s instructive to look at <a href="https://docs.honeycomb.io/api/tag/Events#operation/createEvents">Honeycomb’s Event’s API</a>.
Before <a href="https://honeycomb.io/">Honeycomb</a> went all-in on OpenTelemetry they had a much simpler
just-send-us-JSON approach. They no longer recommend it, but we can still use this API today
for our toy project.</p>
<p>You can see the full exporter code <a href="https://github.com/jmorrell/minimal-nodejs-otel-tracer/blob/5ff45161aa2d6c0c6d0a41139803d54a2f88829d/honeycomb-exporter.js">here</a>,
but the logic for building the payload is the interesting bit:</p>
<pre tabindex="0" data-language="js"><code><span><span>// literally put all of the data together in one big json blob... like a log line!</span></span>
<span><span>// and then POST it to their API</span></span>
<span><span>function</span><span> spanToHoneycombJSON</span><span>(</span><span>span</span><span>) {</span></span>
<span><span>  return</span><span> {</span></span>
<span><span>    ...</span><span>Object.</span><span>fromEntries</span><span>(globalAttributes),</span></span>
<span><span>    ...</span><span>Object.</span><span>fromEntries</span><span>(span.attributes),</span></span>
<span><span>    name: span.name,</span></span>
<span><span>    trace_id: span.traceID,</span></span>
<span><span>    span_id: span.spanID,</span></span>
<span><span>    parent_span_id: span.parentSpanID,</span></span>
<span><span>    start_time: span.startTime,</span></span>
<span><span>    duration_ms: span.durationMs,</span></span>
<span><span>  };</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>Since we’re not using a standard format you do have to tell Honeycomb which field maps to Trace ID, Span ID,
etc in the dataset configuration, but this is all the data needed to build up the trace waterfall!</p>
<p><img src="https://jeremymorrell.dev/_astro/honeycomb-events-trace.DaOklNq9_1IiUjy.webp" alt="Honeycomb trace waterfall view" width="2490" height="1814" loading="lazy" decoding="async"></p>
<h2 id="wheres-the-opentelemetry">Where’s the OpenTelemetry?</h2>
<p>So we have our <del>fancy logs</del> tracing set up, and instrumentation and context propagation
are actually pretty simple, but OpenTelemetry is a big, complicated standard! Have you
read through <a href="https://opentelemetry.io/docs/specs/otel/trace/sdk/">the specification</a>!?</p>
<p>And… that’s not wrong. OpenTelemetry is a big project, however we only need one small
part of it for our purposes. When you install an OpenTelemetry SDK for your langauge
it emits data in the <a href="https://opentelemetry.io/docs/specs/otlp/">OpenTelemetry Protocol (OTLP)</a>.
Every OpenTelemetry SDK in every language emits OTLP. The <a href="https://github.com/open-telemetry/opentelemetry-collector">OpenTelemetry
Collector</a> is a collection of
tools for receiving OTLP, transforming OTLP, translating other formats to OTLP.
You could say OTLP is kind of a big deal.</p>
<p>OTLP has <a href="https://github.com/open-telemetry/opentelemetry-proto/blob/6f589125b0b7d708c9b0f32916378182ac1e123d/opentelemetry/proto/trace/v1/trace.proto#L86">its own protobuf specification</a>
so you can efficiently compress telemetry data into a binary message that will be the same
across any platform, OS, or CPU architecture. We could generate a JavaScript module to
parse and emit these protobuf messages from the <code>.proto</code> files, but that sounds like
too much work.</p>
<p>Protobuf also defines a <a href="https://opentelemetry.io/docs/specs/otlp/#json-protobuf-encoding">JSON mapping</a> as part
of the spec, and the specification repo has <a href="https://github.com/open-telemetry/opentelemetry-proto/blob/6f589125b0b7d708c9b0f32916378182ac1e123d/examples/trace.json">a handy example for us to start from</a>, so let’s keep it simple instead.</p>
<p>Generating this payload is a bit more complicated than Honeycomb’s old events format. There are some
new terms like “resource” and “scope”, and we have to massage the attributes a bit. However if you
squint, you can see that it’s all the same data. <a href="https://github.com/jmorrell/minimal-nodejs-otel-tracer/blob/5ff45161aa2d6c0c6d0a41139803d54a2f88829d/tracer.js#L107-L179">Full version here</a></p>
<pre tabindex="0" data-language="js"><code><span><span>function</span><span> spanToOTLP</span><span>(</span><span>span</span><span>) {</span></span>
<span><span>  return</span><span> {</span></span>
<span><span>    resourceSpans: [</span></span>
<span><span>      {</span></span>
<span><span>        resource: {</span></span>
<span><span>          attributes: </span><span>toAttributes</span><span>(Object.</span><span>fromEntries</span><span>(globalAttributes)),</span></span>
<span><span>        },</span></span>
<span><span>        scopeSpans: [</span></span>
<span><span>          {</span></span>
<span><span>            scope: {</span></span>
<span><span>              name: </span><span>"minimal-tracer"</span><span>,</span></span>
<span><span>              version: </span><span>"0.0.1"</span><span>,</span></span>
<span><span>              attributes: [],</span></span>
<span><span>            },</span></span>
<span><span>            spans: [</span></span>
<span><span>              {</span></span>
<span><span>                traceId: span.traceID,</span></span>
<span><span>                spanId: span.spanID,</span></span>
<span><span>                parentSpanId: span.parentSpanID,</span></span>
<span><span>                name: span.name,</span></span>
<span><span>                startTimeUnixNano: span.startTime </span><span>*</span><span> Math.</span><span>pow</span><span>(</span><span>10</span><span>, </span><span>6</span><span>),</span></span>
<span><span>                endTimeUnixNano:</span></span>
<span><span>                  (span.startTime </span><span>+</span><span> span.elapsedMs) </span><span>*</span><span> Math.</span><span>pow</span><span>(</span><span>10</span><span>, </span><span>6</span><span>),</span></span>
<span><span>                kind: </span><span>2</span><span>,</span></span>
<span><span>                attributes: </span><span>toAttributes</span><span>(Object.</span><span>fromEntries</span><span>(span.attributes)),</span></span>
<span><span>              },</span></span>
<span><span>            ],</span></span>
<span><span>          },</span></span>
<span><span>        ],</span></span>
<span><span>      },</span></span>
<span><span>    ],</span></span>
<span><span>  };</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>However the power of standards means that we’re no longer limited to just one vendor. We can now send this to any service that accepts OpenTelemetry!</p>
<p><a href="https://honeycomb.io/">Honeycomb</a> still works, of course.</p>
<p><img src="https://jeremymorrell.dev/_astro/honeycomb-otel-trace.BKZRMlZy_2nl6Mq.webp" alt="A Honeycomb screenshot of a trace waterfall" width="2970" height="1412" loading="lazy" decoding="async"></p>
<p><a href="https://baselime.io/">Baselime</a> too!</p>
<p><img src="https://jeremymorrell.dev/_astro/baselime-trace.BiwEmaJ5_1NBeYh.webp" alt="A Baselime screenshot of a trace waterfall" width="1752" height="700" loading="lazy" decoding="async"></p>
<p>We can visualize our telemetry locally using <a href="https://github.com/CtrlSpice/otel-desktop-viewer">otel-desktop-viewer</a>!</p>
<p><img src="https://jeremymorrell.dev/_astro/otel-desktop-viewer-trace.BNYaiaaR_1h40fM.webp" alt="OTel desktop viewer trace waterfall" width="3000" height="1354" loading="lazy" decoding="async"></p>
<p>We can even render our data in the terminal with <a href="https://github.com/ymtdzzz/otel-tui"><code>otel-tui</code></a></p>
<p><img src="https://jeremymorrell.dev/_astro/otel-tui-trace.BFXJsSO2_8cUDt.webp" alt="A trace rendered in the terminal" width="2426" height="1331" loading="lazy" decoding="async"></p>
<h2 id="thats-it">That’s it!?</h2>
<p>That’s it! In <a href="https://github.com/jmorrell/minimal-nodejs-otel-tracer/blob/ad35d40e3255715b7fb69bcd367f66f1e5cd2a57/tracer.js">181 lines of code</a> we’ve implemented tracing, trace context propagation, instrumentation, and exported it in a standard format that any vendor or tool should be able
to accept. Thanks to the magic of 🌈standards🌈.</p>
<h2 id="is-this-you-know-legal">Is this… you know… legal?</h2>
<p>If you were paying attention, there are a lot of <a href="https://opentelemetry.io/docs/specs/otel/">OpenTelemetry specifications</a> around
how an OpenTelemetry SDK should be structured and behave. Our little library doesn’t do almost any of that. This is just for
learning but one could imagine a simplified non-compliant SDK such as <a href="https://github.com/evanderkoogh/otel-cf-workers">this one for Cloudflare
Workers</a>. It emits OTLP but doesn’t conform to all of the SDK specifications.
How should we think about this?</p>
<p>At the <a href="https://events.linuxfoundation.org/open-telemetry-community-day/">OTel Community Day</a> last June, OpenTelemetry cofounder
<a href="https://twitter.com/tedsuo">Ted Young</a> was asked a similar question. I wrote down his answer as best as I could. Lightly paraphrased:</p>
<blockquote>
<p>We don’t care about the spec. We care about that the black box participates in tracing and emits OTLP and semantic conventions. The true spec is the data.</p>
</blockquote>
<p>I take that to mean, while official SDKs are expected to follow the spec, it’s reasonable for other implementations
to deviate as long as an outside observer cannot tell the difference from the behavior. Our little library does’t quite
pass due to the shortcuts taken in parsing the <code>traceparent</code> header, but it would not take much more code to fix this.</p>
<p>If OpenTelemetry continues to be successful I expect OTLP, the ability to emit and receive it, will get built into everything:
your IDE tooling, the platform you deploy on, the framework on which you are building, even hardware. Some day your internet-connected
dryer will almost certainly speak OTLP, if it doesn’t already.</p>
<h2 id="hold-on-why-is-opentelemetry-js-so-much-bigger">Hold on… why is <a href="https://github.com/open-telemetry/opentelemetry-js">opentelemetry-js</a> so much bigger?</h2>
<p>If we can build a functional tracer in under 200 lines, why does the official JavaScript SDK have so much more code?</p>
<p>It might help to go over a non-exhaustive list of things the offical SDK handles that our little learning library doesn’t:</p>
<ul>
<li>Buffer and batch outgoing telemetry data in a more efficient format. Don’t send one-span-per-http request in production. Your vendor will want to have words.</li>
<li><a href="https://github.com/open-telemetry/opentelemetry-js?tab=readme-ov-file#supported-runtimes">Work in both the browser and in Node environments</a></li>
<li>Gracefully handle errors, wrap this library around your core functionality at your own peril</li>
<li>Be incredibly configurable. Need to do something that isn’t bog standard? You can probably make it happen</li>
<li>Automagically wrap common libraries in robust, battle-tested instrumentation</li>
<li>Optimized for performance when used in your code’s tight loops</li>
<li>Conform to <a href="https://opentelemetry.io/docs/concepts/semantic-conventions/">semantic conventions</a></li>
<li>Support two whole other types of telemetry: metrics and logging</li>
</ul>
<p>And more! I hope this post has given you a better mental model for the work happening under all of the production hardening and
extensibility that tends to build up on these libraries when they have to be used in the real world. A library that can reliably
work across most places we deploy JavaScript and meet a very broad range of user needs is highly non-trivial.</p>
<p>But tracing? We know that’s just ✨fancy logging✨ right?</p>
<p>All code for this post can be found <a href="https://github.com/jmorrell/minimal-nodejs-otel-tracer">at <code>jmorrell/minimal-nodejs-otel-tracer</code> on Github</a>.</p>
<hr>
<p><a href="#footnote-ref-1" id="footnote-1"><code>[1]</code></a> Count the concepts in this <a href="https://github.com/open-telemetry/opentelemetry-js/blob/9c30124e764e08bd6ccf8dbfbe426a8531c20352/examples/basic-tracer-node/index.js">simple example</a></p>
<ol>
<li><code>Tracer</code></li>
<li><code>TracerProvider</code></li>
<li><code>SpanExporter</code></li>
<li><code>SpanProcessor</code></li>
<li><code>Resource</code></li>
<li><code>Attribute</code></li>
<li><code>Event</code></li>
<li><code>Span</code></li>
<li><code>Context</code></li>
<li>Both an API <strong>and</strong> and SDK</li>
<li>Semantic Conventions</li>
</ol>
<p>This is intimidating to even senior developers. OpenTelemetry knows this learning curve is a problem and has spun up <a href="https://github.com/open-telemetry/community/blob/ed572bd319edf1092e8e21808307f2eb0424a631/projects/developer_experience.md">a new SIG</a>
to work on improving the developer experience.</p> </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Pixtral 12B (122 pts)]]></title>
            <link>https://mistral.ai/news/pixtral-12b/</link>
            <guid>41569723</guid>
            <pubDate>Tue, 17 Sep 2024 16:50:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mistral.ai/news/pixtral-12b/">https://mistral.ai/news/pixtral-12b/</a>, See on <a href="https://news.ycombinator.com/item?id=41569723">Hacker News</a></p>
Couldn't get https://mistral.ai/news/pixtral-12b/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Open Scanner, an open-source document scanning app for iPhone (169 pts)]]></title>
            <link>https://github.com/pencilresearch/OpenScanner</link>
            <guid>41569557</guid>
            <pubDate>Tue, 17 Sep 2024 16:36:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/pencilresearch/OpenScanner">https://github.com/pencilresearch/OpenScanner</a>, See on <a href="https://news.ycombinator.com/item?id=41569557">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">Open Scanner</h2><a id="user-content-open-scanner" aria-label="Permalink: Open Scanner" href="#open-scanner"></a></p>
<p dir="auto">Open Scanner is a fast, free document scanning app for iPhone. You can <a href="https://apps.apple.com/app/id6578414558" rel="nofollow">download it from the App Store</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">About the app</h2><a id="user-content-about-the-app" aria-label="Permalink: About the app" href="#about-the-app"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">What is Open Scanner?</h3><a id="user-content-what-is-open-scanner" aria-label="Permalink: What is Open Scanner?" href="#what-is-open-scanner"></a></p>
<p dir="auto">Open Scanner scans your receipts, notes, textbooks, and anything else you point your iPhone at.</p>
<p dir="auto">It saves your scans into its built-in library, and syncs them to all your devices.</p>
<p dir="auto">Unlike other scanner apps, Open Scanner is free, and always will be: no ads, no in-app purchases, no subscriptions.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Why should I trust Open Scanner?</h3><a id="user-content-why-should-i-trust-open-scanner" aria-label="Permalink: Why should I trust Open Scanner?" href="#why-should-i-trust-open-scanner"></a></p>
<p dir="auto">Open Scanner is open source (MIT License). That means another app developer can take the source code and audit it, or republish it as their own app.</p>
<p dir="auto">You can even run your own private version of Open Scanner on your iPhone, if you’re adventurous.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">What permissions does Open Scanner ask for?</h3><a id="user-content-what-permissions-does-open-scanner-ask-for" aria-label="Permalink: What permissions does Open Scanner ask for?" href="#what-permissions-does-open-scanner-ask-for"></a></p>
<p dir="auto">Open Scanner will prompt you for the following permissions:</p>
<ul dir="auto">
<li><strong>Camera</strong>: Required for scanning your documents.</li>
<li><strong>Location</strong>: Optional. If you grant location permission, Open Scanner will annotate your scans with location data.</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">What data does Open Scanner collect?</h3><a id="user-content-what-data-does-open-scanner-collect" aria-label="Permalink: What data does Open Scanner collect?" href="#what-data-does-open-scanner-collect"></a></p>
<p dir="auto">Please see <a href="https://openscanner.app/#privacy" rel="nofollow">Open Scanner's privacy policy</a>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Who made Open Scanner?</h3><a id="user-content-who-made-open-scanner" aria-label="Permalink: Who made Open Scanner?" href="#who-made-open-scanner"></a></p>
<p dir="auto"><a href="https://pencilresearch.com/" rel="nofollow">Pencil Research</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">About this project</h2><a id="user-content-about-this-project" aria-label="Permalink: About this project" href="#about-this-project"></a></p>
<p dir="auto">This project's purpose is to provide iPhone users with a free (and ad-free), privacy-respecting, and auditable document scanning app.</p>
<p dir="auto">Open Scanner is written in Swift and built with SwiftUI. It uses Core Data for data storage, and CloudKit for synchronization. It supports iOS 16.0+ and visionOS 1.2+.</p>
<p dir="auto">Contributions to the project, either as issues or pull requests, are welcome.</p>
<p dir="auto">The version numbers in <a href="https://github.com/pencilresearch/OpenScanner/releases">Releases</a> correspond to the version numbers in Open Scanner's App Store listing.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[WonderWorld: Interactive 3D Scene Generation from a Single Image (116 pts)]]></title>
            <link>https://kovenyu.com/wonderworld/</link>
            <guid>41569544</guid>
            <pubDate>Tue, 17 Sep 2024 16:35:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kovenyu.com/wonderworld/">https://kovenyu.com/wonderworld/</a>, See on <a href="https://news.ycombinator.com/item?id=41569544">Hacker News</a></p>
<div id="readability-page-1" class="page">
    <div>
            <div>
                    <p><img src="https://kovenyu.com/wonderworld/logo.png" alt="WonderWorld:">
                    </p>
                </div>
            <p>
                    <em>Interactive</em> 3D Scene Generation from a Single Image
                </p>

            
            
            

            

        </div>




    <section>
        <div>
                    
                    <p>
                            <em>WonderWorld</em> allows real-time rendering and fast scene generation. 
                            This allows a user to navigate existing contents, and specify <em>where</em> and <em>what</em> to generate.
                            Here are examples where a user specifies scene contents (via text) and locations (via camera movement).
                        </p>
                </div>

        

        <div>
          <p>First-Person View</p>
          <p>Fixed Bird-Eye View</p>
        </div>

        <div>

            <div>
                <p><img data-lazy="interactive/cathedral_2.jpg" src="https://kovenyu.com/wonderworld/interactive/cathedral_2.jpg"></p><p>Holy Spirit Cathedral</p>
            </div>

            <div>
                <p><img data-lazy="interactive/city_hall.jpg" src="https://kovenyu.com/wonderworld/interactive/city_hall.jpg"></p><p>Ho Chi Minh City Hall</p>
            </div>

            <div>
                <p><img data-lazy="interactive/monet_village.jpg" src="https://kovenyu.com/wonderworld/interactive/monet_village.jpg"></p><p>Village</p>
            </div>

            <div>
                <p><img data-lazy="interactive/marienplatz.jpg" src="https://kovenyu.com/wonderworld/interactive/marienplatz.jpg"></p><p>Marienplatz</p>
            </div>

            <div>
                <p><img data-lazy="interactive/forbidden.jpg" src="https://kovenyu.com/wonderworld/interactive/forbidden.jpg"></p><p>Forbidden City</p>
            </div>

            <div>
                <p><img data-lazy="interactive/taj_mahal_monet.jpg" src="https://kovenyu.com/wonderworld/interactive/taj_mahal_monet.jpg"></p><p>Taj Mahal</p>
            </div>

            <div>
                <p><img data-lazy="interactive/minecraft.jpg" src="https://kovenyu.com/wonderworld/interactive/minecraft.jpg"></p><p>Minecraft</p>
            </div>

        </div>

    </section>


    <section>
        <div>
                    
                    <p>
                            Here are some examples of generated scenes with different camera path styles: <b>rotational</b>, <b>curvy</b>, and <b>straight</b>.
                        </p>
                </div>

        

        <div>

            <div>
                <p><img data-lazy="complete/minecraft.jpg" src="https://kovenyu.com/wonderworld/complete/minecraft.jpg"></p><p>Minecraft</p>
            </div>

            <div>
                <p><img data-lazy="complete/venice.jpg" src="https://kovenyu.com/wonderworld/complete/venice.jpg"></p><p>Venice</p>
            </div>

            <div>
                <p><img data-lazy="complete/main_square.jpg" src="https://kovenyu.com/wonderworld/complete/main_square.jpg"></p><p>Main Square</p>
            </div>

            <div>
                <p><img data-lazy="complete/zelda.jpg" src="https://kovenyu.com/wonderworld/complete/zelda.jpg"></p><p>Zelda</p>
            </div>

            <div>
                <p><img data-lazy="complete/campus.jpg" src="https://kovenyu.com/wonderworld/complete/campus.jpg"></p><p>Stanford Campus</p>
            </div>

            <div>
                <p><img data-lazy="complete/city_hall_monet.png" src="https://kovenyu.com/wonderworld/complete/city_hall_monet.png"></p><p>Kremlin Park</p>
            </div>

            <div>
                <p><img data-lazy="complete/arc_de_triomf.jpg" src="https://kovenyu.com/wonderworld/complete/arc_de_triomf.jpg"></p><p>Arc de Triomf</p>
            </div>

            <div>
                <p><img data-lazy="complete/garden_monet.jpg" src="https://kovenyu.com/wonderworld/complete/garden_monet.jpg"></p><p>Garden</p>
            </div>

            <div>
                <p><img data-lazy="complete/cathedral.jpg" src="https://kovenyu.com/wonderworld/complete/cathedral.jpg"></p><p>Segovia Cathedral</p>
            </div>

            <div>
                <p><img data-lazy="complete/real_westlake.jpg" src="https://kovenyu.com/wonderworld/complete/real_westlake.jpg"></p><p>Westlake</p>
            </div>

            <div>
                <p><img data-lazy="complete/animation_lakeside_2.jpg" src="https://kovenyu.com/wonderworld/complete/animation_lakeside_2.jpg"></p><p>Lakeside</p>
            </div>

            <div>
                <p><img data-lazy="complete/university_pathway.jpg" src="https://kovenyu.com/wonderworld/complete/university_pathway.jpg"></p><p>University Pathway</p>
            </div>

        </div>

    </section>

    <div>
                  
                  <p>
                          <b>Keyboard:</b> Move by "W/A/S/D", look around by "I/J/K/L". <br>
                          <b>Touch Screen:</b> Move by one-finger drag, look around by two-finger drag. <br>
                          <b>Note:</b> After loading, please click on the canvas to activate control. The rendering here is done on your device in real-time. Loading a scene (~100MB) may take a while.
                      </p>
                  
                  
                  
              </div>

    <div id="approach">
                    
                    <p><img src="https://kovenyu.com/wonderworld/approach.jpg" ,="">
                    </p>
                    <p>
                        <em>WonderWorld</em> takes a single image as input and generates connected diverse 3D scenes to form a virtual world. 
                        Users can specify new scene contents and styles via text, and specify where to generate new scenes via camera movement
                        as our system allows real-time rendering.
                        Our system generates a single 3D scene in less than 10 seconds thank to our Fast LAyered Gaussian Surfels (FLAGS) representation
                        that has two key designs:
                        Firstly, our layered design requires only a single image to generate a scene, whereas existing scene generation methods require progressively 
                        generating multiple views.
                        Secondly, our surfel design enables a geometry-based initialization, so that optimization is conceptually a "fine-tuning" 
                        that is must faster than other representations (e.g., NeRF and Gaussian Splatting) that need to optimize geometry from scratch.
                    </p>
                </div>


    <div id="abstract">
                    
                    <p>
                        We present WonderWorld, a novel framework for <em>interactive</em> 3D scene generation that 
                        enables users to interactively specify scene contents and layout and see the created scenes in low latency.
                        The major challenge lies in achieving fast generation of 3D scenes.
                        Existing scene generation approaches fall short of speed as they often require 
                        (1) progressively generating many views and depth maps, and (2) time-consuming optimization of the scene representations. 
                        We introduce the Fast LAyered Gaussian Surfels (FLAGS) as our scene representation and an algorithm 
                        to generate it from a single view. Our approach does not need multiple views, 
                        and it leverages a geometry-based initialization that significantly reduces optimization time. 
                        Another challenge is generating coherent geometry that allows all scenes to be connected. 
                        We introduce the guided depth diffusion that allows partial conditioning of depth estimation.
                        WonderWorld generates connected and diverse 3D scenes in less than 10 seconds on a single A6000 GPU, 
                        enabling real-time user interaction and exploration.
                        We demonstrate the potential of WonderWorld for user-driven content creation and exploration in virtual environments.
                    </p>
                </div>

    <div id="citation">
                        <p>
@article{yu2024wonderworld,
    title={WonderWorld: Interactive 3D Scene Generation from a Single Image},
    author={Hong-Xing Yu and Haoyi Duan and Charles Herrmann and William T. Freeman and Jiajun Wu},
    journal={arXiv:2406.09394},
    year={2024}
}
                        </p>
                        </div>

    <section>
        <div id="approach">
                    
                    <ul>
                            <li>
                                [CVPR2024] <a href="https://kovenyu.com/wonderjourney/">
                                    <b>WonderJourney</b>: Going from Anywhere to Everywhere
                            </a></li><a href="https://kovenyu.com/wonderjourney/">
                        </a></ul><a href="https://kovenyu.com/wonderjourney/">
                    
                </a></div><a href="https://kovenyu.com/wonderjourney/">
    </a></section><a href="https://kovenyu.com/wonderjourney/">


    
    
    




</a></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Things you should know about Windows Input, but would rather not (154 pts)]]></title>
            <link>https://ph3at.github.io/posts/Windows-Input/</link>
            <guid>41568418</guid>
            <pubDate>Tue, 17 Sep 2024 15:08:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ph3at.github.io/posts/Windows-Input/">https://ph3at.github.io/posts/Windows-Input/</a>, See on <a href="https://news.ycombinator.com/item?id=41568418">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><h2 id="motivation">Motivation</h2><p>When you are developing a game for PC – or porting one – then you will have to deal with user input, generally from three distinct categories of sources: <strong>mouse</strong>, <strong>keyboard</strong>, and <strong>gamepads</strong>.</p><p>At first, it could reasonably be assumed that mouse and keyboard should be the simplest parts of this to deal with, but in reality, they are not – at least if we are talking about Windows. In fact, <strong><em>several extremely popular AAA games ship with severe mouse input issues when specific high-end mice are used</em></strong>, and some popular engines have issues that are still extant.</p><p>In this article we’ll explore a few reasons why that is the case, and end up with a solution that works but is still unsatisfactory. I assume that there is a whole other level of complexity involved in properly dealing with accessories like steering wheels, flight sticks, and so on in simulators, but so far I never had the pleasure of working on a game that required this, and this article will not cover those types of input devices.</p><blockquote><p>If you are already an expert on game input on Windows, please skip directly to <a href="#our-current-solution">our current solution</a> and tell us how to do it better, because I hope fervently that it’s not the best!</p></blockquote><blockquote><p>While the vast majority of this article is about mouse input, we also recently discovered something really interesting about xinput performance that we will share <a href="#a-note-on-xinput">towards the end of the article</a>.</p></blockquote><h2 id="background--raw-input">Background – Raw Input</h2><p>In Windows, there are many ways to receive input from the user. The most traditional one is to receive Windows messages, which are sent to your application’s message queue. This is how you receive keyboard and mouse input in a typical Windows application. However, this method has a few drawbacks when it comes to games.</p><p>The most notable of these drawbacks is that you cannot use the message queue to receive precise and unaltered mouse input, which is particularly important for any game where the mouse is used to control a 3D camera. Traditional input is meant to control a cursor, and the system will apply acceleration and other transformations to the input before it reaches your application, and also won’t give you sub-pixel precision.</p><blockquote><p>If your game only has cursor-based input, e.g. a strategy game or point-and-click adventure, then you can probably get away with ignoring everything mouse-related in this article and just blissfully use standard Windows messages.</p></blockquote><p>The solution to this problem is to use the <a href="https://learn.microsoft.com/en-us/windows/win32/inputdev/using-raw-input">Raw Input API</a>, which allows you to receive input from devices like mice and keyboards in a raw, unaltered form. This is the API that most games use to receive input from the mouse, and the linked article provides a good overview of how to use it, which I will not repeat here.</p><p>So, why the somewhat whiny undertone of this article? Oh, we’re just getting started.</p><p><a href="https://ph3at.github.io/assets/2024-09-16-Windows-Input/razer-viper-8k-hero.jpg"><img data-src="/assets/2024-09-16-Windows-Input/razer-viper-8k-hero.jpg" alt="A Razer Viper mouse with 8k polling rate" width="90%" id="fancyimg" data-proofer-ignore="" src="https://ph3at.github.io/assets/2024-09-16-Windows-Input/razer-viper-8k-hero.jpg"></a> <em>A Razer Viper mouse with 8k polling rate – I assume that all of these people stare in bewilderment as to why some of their games drop by 100 FPS when they use it (Image source: Razer)</em></p><h2 id="using-raw-input"><span>Using Raw Input</span><a href="#using-raw-input"><i></i></a></h2><p>If you are familiar with the Raw Input API, or just read the linked documentation, then you might believe that I’m just getting at the importance of using buffered input rather than processing individual events, but really, that wouldn’t be too bad or worth an article. The real problem is that it is not nearly as simple as that – in fact, as far as I can tell, <strong>there is no good general way to do this at all</strong>.</p><p>Let’s step back a bit – for those who have not done this before, there are two ways to receive raw input from a device:</p><ol><li><p>Using <strong>standard reads</strong> from the device, which is the most straightforward way to do it. This basically just involves receiving additional messages of type <code>WM_INPUT</code> in your message queue, which you can then process.</p></li><li><p>Using <strong>buffered reads</strong>, where you access all extant raw input events at once by calling <code>GetRawInputBuffer</code>.</p></li></ol><p>As you might surmise, the latter method is designed to be more performant, as message handling of individual events using the message queue is not particularly efficient.</p><p>Now, actually doing this, and doing it correctly, is not as easy as it should be – or maybe I just missed something. As far as I can tell, to prevent problems related to “losing” messages that occur at specific points in time, while only processing raw input in batched form, you need to do something like the following:</p><div><p><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td><pre><span>processRawInput</span><span>();</span> <span>// this does the whole `GetRawInputBuffer` thing</span>

<span>// peek all messages *except* WM_INPUT</span>
<span>// except when we don't have focus, then we peek all messages so we wake up consistently</span>
<span>MSG</span> <span>msg</span><span>{};</span>
<span>auto</span> <span>peekNotInput</span> <span>=</span> <span>[</span><span>&amp;</span><span>]</span> <span>{</span>
  <span>if</span><span>(</span><span>!</span><span>g_window</span><span>-&gt;</span><span>hasFocus</span><span>())</span> <span>{</span>
    <span>return</span> <span>PeekMessage</span><span>(</span><span>&amp;</span><span>msg</span><span>,</span> <span>NULL</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>PM_REMOVE</span><span>);</span>
  <span>}</span>
  <span>auto</span> <span>ret</span> <span>=</span> <span>PeekMessage</span><span>(</span><span>&amp;</span><span>msg</span><span>,</span> <span>NULL</span><span>,</span> <span>0</span><span>,</span> <span>WM_INPUT</span><span>-</span><span>1</span><span>,</span> <span>PM_REMOVE</span><span>);</span>
  <span>if</span> <span>(</span><span>!</span><span>ret</span><span>)</span> <span>{</span>
    <span>ret</span> <span>=</span> <span>PeekMessage</span><span>(</span><span>&amp;</span><span>msg</span><span>,</span> <span>NULL</span><span>,</span> <span>WM_INPUT</span><span>+</span><span>1</span><span>,</span> <span>std</span><span>::</span><span>numeric_limits</span><span>&lt;</span><span>UINT</span><span>&gt;::</span><span>max</span><span>(),</span> <span>PM_REMOVE</span><span>);</span>
  <span>}</span>
  <span>return</span> <span>ret</span><span>;</span>
<span>};</span>

<span>while</span> <span>(</span><span>peekNotInput</span><span>())</span> <span>{</span>
  <span>TranslateMessage</span><span>(</span><span>&amp;</span><span>msg</span><span>);</span>
  <span>DispatchMessage</span><span>(</span><span>&amp;</span><span>msg</span><span>);</span>
<span>}</span>

<span>runOneFrame</span><span>();</span> <span>// this is where the game logic is</span>
</pre></td></tr></tbody></table></code></p></div><p>As shown in the code snippet above, you need to peek all messages except <code>WM_INPUT</code> to ensure that you don’t lose any messages that occur between the times you are processing batched raw input and “normal” messages. This is not made particularly clear in the documentation, and it’s also not made particularly easy by the API, but a few extra lines of code can solve the problem.</p><p>All of this <em>still</em> wouldn’t be a big deal, just the normal amount of scuff you expect when working on an operating system which has a few decades of backwards compatibility to maintain. So, let’s get to the real problem.</p><h2 id="the-real-problem"><span>The Real Problem</span><a href="#the-real-problem"><i></i></a></h2><p>Let’s assume you did all this correctly, and are now receiving raw input from the mouse, in a buffered way, as suggested. You might think that you are done, but you are not. In fact, you are <em>still</em> just getting started.</p><p><a href="https://ph3at.github.io/assets/2024-09-16-Windows-Input/frametime_comparison.png"><img data-src="/assets/2024-09-16-Windows-Input/frametime_comparison.png" alt="Comparison Frametime Chart with and without mouse movement" width="90%" id="fancyimg" data-proofer-ignore="" src="https://ph3at.github.io/assets/2024-09-16-Windows-Input/frametime_comparison.png"></a> <em>Comparison between no mouse movement (upper part) and mouse movement (lower part), everything else equal</em></p><p>What you see above is a comparison of the frametime performance chart of a game, in the exact same scene. The only difference is that in the lower part, the mouse is being vigorously shaken about – and not just any mouse, but a high-end one with a polling rate of 8 kHz. As you can see, just moving the mouse around destroys performance, dropping from being consistently pegged at the soft FPS cap (around 360 FPS) to ~133 FPS and becoming completely unstable. <strong><em>Just by vigorous mouse movement.</em></strong></p><p>Now you might think “Aha, he included this to show how important it is to use batched processing!”. Sadly not, what you see above <em>is, in fact, the performance of the game when using batched raw input processing</em>. Let’s talk about why this is the case, and what to do about it.</p><h2 id="the-bane-of-legacy-input"><span>The Bane of Legacy Input</span><a href="#the-bane-of-legacy-input"><i></i></a></h2><p>To make a long story short, the problem is so-called <strong>“legacy input”</strong>. When you initialize raw input for a device using <code>RegisterRawInputDevices</code>, you can specify the <code>RIDEV_NOLEGACY</code> flag. This flag prevents the system from generating “legacy” messages, such as <code>WM_MOUSEMOVE</code>. And there we have our problem: if you don’t specify this flag, then the system will generate both raw input messages and legacy messages, and the latter will still clutter your message queue.</p><p>So once again, why am I whining about this? Just disable legacy input, right? Indeed, that completely solves the performance issue – as long as you do everything else correctly as outlined above of course.</p><p>And then you congratulate yourself on a job well done, and move on to the next task. A few days later after the build is pushed to beta testers, you get a bug report that the game window can no longer be moved around. And then you realize that you just disabled the system’s ability to move the window around, because that is done using legacy input.</p><blockquote><p>Disabling legacy input disables any form of input interaction that you would normally expect to be handled by the system.</p></blockquote><p>So what can we do about this? Here is a short list of things I considered, or even fully implemented, and which either don’t work, can not actually be done, or are just silly in terms of complexity:</p><ol><li><p><strong>Use a separate message-only window and thread for input processing</strong>. This seemed like a good solution, so I went through the trouble of implementing it. It basically involves creating an entirely separate invisible window and registering raw input with it rather than the main window. A bit of a hassle, but it seemed like it would resolve the issue and do it “right”. No luck: the system will still generate high-frequency legacy messages for the main window, even if the raw input device is registered with the other window.</p><blockquote><p>Raw input affects the entire process, even though the API takes a window handle.</p></blockquote></li><li><p><strong>Only disable legacy input in fullscreen modes</strong>. This would at least solve the problem for the vast majority of users, but it’s not possible, as far as I can tell. You seemingly <strong>cannot</strong> switch between legacy and raw input once you’ve enabled it. You might think <code>RIDEV_REMOVE</code> would help, but that completely removes all input that the device generates, including both legacy and raw input.</p><blockquote><p>You can’t switch between legacy and raw input once you’ve enabled it.</p></blockquote></li><li><p><strong>Use a separate process to provide raw input</strong>. This is a bit of a silly idea, but it’s one that I can think of that would actually work. You could create a separate process that provides raw input to the main process, and then use some form of IPC to communicate the input. This would be a massive hassle, and I really don’t want to support something like that, but I’m pretty sure it would work.</p></li><li><p><strong>Disable legacy input, create your own legacy input events at low frequency</strong>. Another one in the category of “silly ideas that probably could work”, but there are a <em>lot</em> of legacy messages and this would be another support nightmare.</p></li><li><p><strong>Move everything else out of the thread that does the main message queue processing</strong>. This is something I would probably try if I was doing greenfield development, but it’s a massive change to make to an existing codebase, as in our porting use case. And it would still mean that this one thread is spending tons of time uselessly going through input messages.</p></li></ol><p>So option 1 and 2 would be somewhat viable, but the former doesn’t actually work, and the latter is not possible. The others are, in my opinion, too silly to explore for actually shipping a game, or infeasible for a porting project.</p><p>So perhaps now you can see both why there are AAA games shipping on PC which break with 8 kHz mice, and why I’m <em>just a bit</em> frustrated with the situation. So what are we actually doing?</p><h2 id="our-current-solution">Our Current Solution</h2><p>Our current solution is very dumb and seems like it shouldn’t work, or at least have some severe repercussions, but so far it does seem to work fine and not have any issues. It’s a bit of a hack, but it’s the best we’ve got so far.</p><p>This solution involves <strong>keeping legacy input enabled</strong>, but using <strong>batched raw input for actual game input</strong>. And then the stupid trick: <strong>prevent performance collapse by just not processing more than <code>N</code> message queue events per frame.</strong></p><p>We are currently working with <code>N=5</code>, but that’s a somewhat random choice. When I tried this I had a lot of concerns: what if tons of messages build up? What if the window becomes unresponsive? I didn’t worry about the game input itself, because we rapidly and with very low latency get all the buffered raw input events, but the window interactions might become unresponsive due to message buildup.</p><p>After quite a lot of testing with an 8 kHz mouse, none of that seems to happen, even if you really try to make it happen.</p><p>So, that’s where we are: an entirely unsatisfactory solution that seems to work fine, and provides 8k raw input without performance collapse and without affecting “legacy” windows interactions. If you know how to actually do this properly, please write a comment to this post, or failing that send an email, stop me in the street and tell me, or even send a carrier pigeon. I would be very grateful.</p><h2 id="a-note-on-xinput">A Note on XInput</h2><p>This is completely unrelated to the rest of the article, other than being about input, but I found it interesting and it might be new to some. When you use the XInput API to work with gamepads, you might think there is very little you can do wrong. It’s an exceedingly simple API, and mostly you just use <code>XInputGetState</code>. However, the documentation has this curious note, which is quite easy to miss:</p><blockquote><p>For performance reasons, don’t call XInputGetState for an ‘empty’ user slot every frame. We recommend that you space out checks for new controllers every few seconds instead.</p></blockquote><p>This is not an empty phrase: we have observed performance losses of 10-15% in extremely CPU-limited cases just by calling <code>XInputGetState</code> for all controllers every frame while none are connected!</p><p>I have no idea why the API would be designed like this, and not have some internal event-based tracking that makes calls for disconnected controller slots essentially free, but there you have it. You actually have to implement your own fallback mechanism to avoid this performance hit, since there’s no alternative API (at least in pure XInput) to tell you whether a controller is connected.</p><p>This is another area where an existing API is quite unsatisfactory – you generally want to avoid things that make every Nth frame take longer than the ones surrounding it, so you’d need to move all that to another thread. But it’s still much easier to deal with than the raw mouse input / high polling rate issue.</p><h2 id="conclusion">Conclusion</h2><p>Game input in Windows ain’t great. I hope this article saves someone the time it took me to delve into this rabbit hole, and as I said above I’d love to hear from you if you know how to do this truly <strong>properly</strong>.</p><p><em>And we haven’t even gone into keyboard layouts yet!</em> Are you a QWERTZ user and have you ever wondered why some games have default bindings that have actions on e.g. <code>Z</code>, <code>X</code> and <code>C</code>, which makes no sense on your input device? But that’s a story for another day.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Rio-labs/rio: WebApps in pure Python. No JavaScript, HTML and CSS needed (174 pts)]]></title>
            <link>https://github.com/rio-labs/rio</link>
            <guid>41567711</guid>
            <pubDate>Tue, 17 Sep 2024 14:05:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/rio-labs/rio">https://github.com/rio-labs/rio</a>, See on <a href="https://news.ycombinator.com/item?id=41567711">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://github.com/rio-labs/rio/blob/main/assets/readme_logo.svg?raw=true"><img src="https://github.com/rio-labs/rio/raw/main/assets/readme_logo.svg?raw=true" alt="Rio Logo"></a>
</p>
<div dir="auto">
  <p><strong>Rio</strong> is an easy to use framework for creating websites and apps and is based <strong>entirely on Python</strong>. 🐍
  <br>
  You <strong>won't need a single line of HTML, CSS, or
  JavaScript</strong> to create beautiful, modern apps.</p><p>
  <a href="https://rio.dev/get-started?s=pl1" rel="nofollow">Tutorial</a> - <a href="https://rio.dev/examples?s=g8r" rel="nofollow">Examples</a> - <a href="https://discord.gg/7ejXaPwhyH" rel="nofollow">Discord</a> - <a href="https://rio.dev/docs?s=o1z" rel="nofollow">Docs</a> - <a href="https://github.com/rio-labs/rio">Source Code</a></p><p>
  Rio brings React-style components to Python. Pull from a wealth of built-in
  components and combine them to create your own custom components. Then combine
  those into entire apps. Best of all, Rio apps can run both locally on your
  machine and on the web.
</p></div>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/83e0970258e6bc8904cbe739046e87b8c3ad134a0bc8700e01c5fdf67f6e348b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f52696f2d6f75746c696e652e7376673f636f6c6f723d25323331316538653365266c696e6b3d687474707325334125324625324672696f2e646576267374796c653d666c61742d737175617265266c6f676f3d646174613a696d6167652f737667253262786d6c3b6261736536342c5044393462577767646d567963326c76626a30694d5334774969426c626d4e765a476c755a7a3069565652474c54676949484e305957356b59577876626d5539496d3576496a382b436a787a646d634b4943416764326c6b64476739496a45774d4449754d54413149676f674943426f5a576c6e61485139496a45304f546b754f4441314e79494b49434167646d6c6c64304a76654430694d434177494449324e5334784e4441794f53417a4f5459754f44497a4e546b694369416749485a6c636e4e7062323439496a45754d53494b4943416761575139496e4e325a7a67354e69494b49434167654731734f6e4e7759574e6c50534a77636d567a5a584a325a53494b4943416765473173626e4d39496d6830644841364c79393364336375647a4d7562334a6e4c7a49774d44417663335a6e49676f674943423462577875637a707a646d6339496d6830644841364c79393364336375647a4d7562334a6e4c7a49774d44417663335a6e49676f674943423462577875637a70795a475939496d6830644841364c79393364336375647a4d7562334a6e4c7a45354f546b764d4449764d6a4974636d526d4c584e35626e52686543317563794d6943694167494868746247357a4f6d4e6a50534a6f644852774f69387659334a6c59585270646d566a623231746232357a4c6d39795a79397563794d6943694167494868746247357a4f6d526a50534a6f644852774f6938766348567962433576636d63765a474d765a57786c6257567564484d764d5334784c79492b5047526c5a6e4d4b49434167494342705a4430695a47566d637a67354d4349674c7a343862575630595752686447454b49434167494342705a4430696257563059575268644745344f544d69506a78795a475936556b5247506a786a597a705862334a7243694167494341674943416749484a6b5a6a7068596d393164443069496a34385a474d365a6d397962574630506d6c745957646c4c334e325a797434625777384c32526a4f6d5a76636d3168644434385a474d3664486c775a516f6749434167494341674943416749484a6b5a6a70795a584e7664584a6a5a5430696148523063446f764c334231636d777562334a6e4c32526a4c32526a62576c306558426c4c314e3061577873535731685a3255694943382b5043396a597a705862334a72506a7776636d526d4f6c4a45526a34384c32316c6447466b59585268506a786e436941674943416761575139496d7868655756794d53494b4943416749434230636d467563325a76636d3039496e52795957357a624746305a5367794e6934304d544d344e4463734e5441754d6a63784d7a5570496a34386347463061416f67494341674943416761575139496e42686447677849676f6749434167494341676333523562475539496d5a706247773649325a6d5a6d5a6d5a6a746d615778734c57397759574e7064486b364d54747a64484a766132557464326c6b644767364d4334794e6a51314f444d6943694167494341674943426b50534a74494330344c6a67774d7a41344d444d734c5455774c6a49334d544d3149474d674c5445314c6a49334e6a55314f5463734d4334344e6a41314d6a51674c5445344c6a597a4d54677a4e4463734d5463754e5451304e544579494330784e79347a4e6a63304d5455334c4449354c6a6b324f446b314d6941774c6a55784d7a63794e7977784e6934794e4451784e6a5978494330784c6a49784d7a45354e79777a4d6934334d546b794f5463674d5334794e6a67314d5463734e4467754e7a59324e7a6b7a494467754d5451784d5467314c4445304c6a63784d4441784d6941794e6934774e7a63324e7a59784c4445344c6a67304f546b334d69417a4f5334344e7a63304f4449734d6a59754e7a63774d544d3049444d774c6a4d334f446b324d6977784e5334774e6a59314e5341324d4334334e5463354d6a55734d7a41754d544d7a4d54417849446b784c6a457a4e6a67344e7977304e5334784f546b324e5445674c544d304c6a67794d6a4d354f4377784e7934324d4459324f4341744e7a41754d6a49324d5445334c444d304c6a45304e7a677a494330784d4451754e6a59774e5441324f4377314d6934304e6a55794f4341744d6a41754d444d334e7a63314d6977784d5334304f4445304e4341744d7a51754e7a63344d5467334d69777a4e6934354e6a59354f4341744d6a51754d5441784d546b324d6977314f5334314f5449784d5341784d5334794f546b7a4d5377794e5334324d44513349444d354c6a63304d6a6b784d53777a4d7934334d5459354e5341324d6934304e7a49794d4467734e4455754f5459344d4449674e5467754f5455354d54417a4c4449354c6a41354e444578494445784e7934334d5441314d7a55734e5467754e6a51344e4449674d5463324c6a63344f5445314e5377344e7934304e7a5532494445304c6a41324d5449784c444d754f5459344d7a59674d6a51754d444d324e7a59734c5445794c6a41794d7a45674d6a45754f4441774e7a6b734c5449304c6a557a4d6a49674c5441754e5451794f4455734c5445334c6a677a4d545533494445754d6a55344d5459734c544d314c6a6b774d6a6b79494330784c6a49324f444d324c4330314d7934314d7a59304f4341744f4334784e4441324d7977744d5451754e7a45774e7a45674c5449324c6a41334e6a6b794c4330784f4334344e5445354f4341744d7a6b754f4463334d546b734c5449324c6a63334d5463794943307a4d43347a4e7a59774e6977744d5455754d4463784d5455674c5459774c6a67774d44637a4c43307a4d4334784e4445784e7941744f5445754d5451324e4449734c5451314c6a49784d7a413049444d304c6a55774f4463354c4330784e79347a4e7a4d334e7941324f5334304e5455354e7977744d7a4d754f5449314e6a55674d54417a4c6a59334d6a6b344c4330314d5334344e4459324d7941794d4334784f5455784d7977744d5445754d4441324d6a67674d7a55754d7a67324e4451734c544d324c6a4d774d444131494449314c6a59774d7a4d344c4330314f4334354f4441354e434244494449794e4334334d4459794d7977314f4334344e7a49314d7a51674d546b324c6a41314d4459334c4455774c6a51344e6a59304d5341784e7a4d754d5459334d6a59734d7a67754d6a4d344d546b78494445314d5334784f5449794e6977794e79347a4e446b794f5455674d5449324c6a49304e6a4d354c4445304c6a6b7a4f54597a4f4341784d4459754d5449784d5463734e4334354f5463324d6a6334494463774c6a41304d5463784f5377744d5449754f446b354d6a6b3549444d7a4c6a6b324d6a49324f4377744d7a41754e7a6b324d6a4931494330794c6a45784e7a45344d7a51734c5451344c6a59354d7a45314d6942734943307a4c6a4d334d6a59334e7a63734c5445754d6a45344e446b7949486f694943382b5043396e506a777663335a6e50676f3d"><img src="https://camo.githubusercontent.com/83e0970258e6bc8904cbe739046e87b8c3ad134a0bc8700e01c5fdf67f6e348b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f52696f2d6f75746c696e652e7376673f636f6c6f723d25323331316538653365266c696e6b3d687474707325334125324625324672696f2e646576267374796c653d666c61742d737175617265266c6f676f3d646174613a696d6167652f737667253262786d6c3b6261736536342c5044393462577767646d567963326c76626a30694d5334774969426c626d4e765a476c755a7a3069565652474c54676949484e305957356b59577876626d5539496d3576496a382b436a787a646d634b4943416764326c6b64476739496a45774d4449754d54413149676f674943426f5a576c6e61485139496a45304f546b754f4441314e79494b49434167646d6c6c64304a76654430694d434177494449324e5334784e4441794f53417a4f5459754f44497a4e546b694369416749485a6c636e4e7062323439496a45754d53494b4943416761575139496e4e325a7a67354e69494b49434167654731734f6e4e7759574e6c50534a77636d567a5a584a325a53494b4943416765473173626e4d39496d6830644841364c79393364336375647a4d7562334a6e4c7a49774d44417663335a6e49676f674943423462577875637a707a646d6339496d6830644841364c79393364336375647a4d7562334a6e4c7a49774d44417663335a6e49676f674943423462577875637a70795a475939496d6830644841364c79393364336375647a4d7562334a6e4c7a45354f546b764d4449764d6a4974636d526d4c584e35626e52686543317563794d6943694167494868746247357a4f6d4e6a50534a6f644852774f69387659334a6c59585270646d566a623231746232357a4c6d39795a79397563794d6943694167494868746247357a4f6d526a50534a6f644852774f6938766348567962433576636d63765a474d765a57786c6257567564484d764d5334784c79492b5047526c5a6e4d4b49434167494342705a4430695a47566d637a67354d4349674c7a343862575630595752686447454b49434167494342705a4430696257563059575268644745344f544d69506a78795a475936556b5247506a786a597a705862334a7243694167494341674943416749484a6b5a6a7068596d393164443069496a34385a474d365a6d397962574630506d6c745957646c4c334e325a797434625777384c32526a4f6d5a76636d3168644434385a474d3664486c775a516f6749434167494341674943416749484a6b5a6a70795a584e7664584a6a5a5430696148523063446f764c334231636d777562334a6e4c32526a4c32526a62576c306558426c4c314e3061577873535731685a3255694943382b5043396a597a705862334a72506a7776636d526d4f6c4a45526a34384c32316c6447466b59585268506a786e436941674943416761575139496d7868655756794d53494b4943416749434230636d467563325a76636d3039496e52795957357a624746305a5367794e6934304d544d344e4463734e5441754d6a63784d7a5570496a34386347463061416f67494341674943416761575139496e42686447677849676f6749434167494341676333523562475539496d5a706247773649325a6d5a6d5a6d5a6a746d615778734c57397759574e7064486b364d54747a64484a766132557464326c6b644767364d4334794e6a51314f444d6943694167494341674943426b50534a74494330344c6a67774d7a41344d444d734c5455774c6a49334d544d3149474d674c5445314c6a49334e6a55314f5463734d4334344e6a41314d6a51674c5445344c6a597a4d54677a4e4463734d5463754e5451304e544579494330784e79347a4e6a63304d5455334c4449354c6a6b324f446b314d6941774c6a55784d7a63794e7977784e6934794e4451784e6a5978494330784c6a49784d7a45354e79777a4d6934334d546b794f5463674d5334794e6a67314d5463734e4467754e7a59324e7a6b7a494467754d5451784d5467314c4445304c6a63784d4441784d6941794e6934774e7a63324e7a59784c4445344c6a67304f546b334d69417a4f5334344e7a63304f4449734d6a59754e7a63774d544d3049444d774c6a4d334f446b324d6977784e5334774e6a59314e5341324d4334334e5463354d6a55734d7a41754d544d7a4d54417849446b784c6a457a4e6a67344e7977304e5334784f546b324e5445674c544d304c6a67794d6a4d354f4377784e7934324d4459324f4341744e7a41754d6a49324d5445334c444d304c6a45304e7a677a494330784d4451754e6a59774e5441324f4377314d6934304e6a55794f4341744d6a41754d444d334e7a63314d6977784d5334304f4445304e4341744d7a51754e7a63344d5467334d69777a4e6934354e6a59354f4341744d6a51754d5441784d546b324d6977314f5334314f5449784d5341784d5334794f546b7a4d5377794e5334324d44513349444d354c6a63304d6a6b784d53777a4d7934334d5459354e5341324d6934304e7a49794d4467734e4455754f5459344d4449674e5467754f5455354d54417a4c4449354c6a41354e444578494445784e7934334d5441314d7a55734e5467754e6a51344e4449674d5463324c6a63344f5445314e5377344e7934304e7a5532494445304c6a41324d5449784c444d754f5459344d7a59674d6a51754d444d324e7a59734c5445794c6a41794d7a45674d6a45754f4441774e7a6b734c5449304c6a557a4d6a49674c5441754e5451794f4455734c5445334c6a677a4d545533494445754d6a55344d5459734c544d314c6a6b774d6a6b79494330784c6a49324f444d324c4330314d7934314d7a59304f4341744f4334784e4441324d7977744d5451754e7a45774e7a45674c5449324c6a41334e6a6b794c4330784f4334344e5445354f4341744d7a6b754f4463334d546b734c5449324c6a63334d5463794943307a4d43347a4e7a59774e6977744d5455754d4463784d5455674c5459774c6a67774d44637a4c43307a4d4334784e4445784e7941744f5445754d5451324e4449734c5451314c6a49784d7a413049444d304c6a55774f4463354c4330784e79347a4e7a4d334e7941324f5334304e5455354e7977744d7a4d754f5449314e6a55674d54417a4c6a59334d6a6b344c4330314d5334344e4459324d7941794d4334784f5455784d7977744d5445754d4441324d6a67674d7a55754d7a67324e4451734c544d324c6a4d774d444131494449314c6a59774d7a4d344c4330314f4334354f4441354e434244494449794e4334334d4459794d7977314f4334344e7a49314d7a51674d546b324c6a41314d4459334c4455774c6a51344e6a59304d5341784e7a4d754d5459334d6a59734d7a67754d6a4d344d546b78494445314d5334784f5449794e6977794e79347a4e446b794f5455674d5449324c6a49304e6a4d354c4445304c6a6b7a4f54597a4f4341784d4459754d5449784d5463734e4334354f5463324d6a6334494463774c6a41304d5463784f5377744d5449754f446b354d6a6b3549444d7a4c6a6b324d6a49324f4377744d7a41754e7a6b324d6a4931494330794c6a45784e7a45344d7a51734c5451344c6a59354d7a45314d6942734943307a4c6a4d334d6a59334e7a63734c5445754d6a45344e446b7949486f694943382b5043396e506a777663335a6e50676f3d" alt="Rio" data-canonical-src="https://img.shields.io/badge/Rio-outline.svg?color=%2311e8e3e&amp;link=https%3A%2F%2Frio.dev&amp;style=flat-square&amp;logo=data:image/svg%2bxml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjEwMDIuMTA1IgogICBoZWlnaHQ9IjE0OTkuODA1NyIKICAgdmlld0JveD0iMCAwIDI2NS4xNDAyOSAzOTYuODIzNTkiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2Zzg5NiIKICAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+PGRlZnMKICAgICBpZD0iZGVmczg5MCIgLz48bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGE4OTMiPjxyZGY6UkRGPjxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+PC9jYzpXb3JrPjwvcmRmOlJERj48L21ldGFkYXRhPjxnCiAgICAgaWQ9ImxheWVyMSIKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi40MTM4NDcsNTAuMjcxMzUpIj48cGF0aAogICAgICAgaWQ9InBhdGgxIgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MC4yNjQ1ODMiCiAgICAgICBkPSJtIC04LjgwMzA4MDMsLTUwLjI3MTM1IGMgLTE1LjI3NjU1OTcsMC44NjA1MjQgLTE4LjYzMTgzNDcsMTcuNTQ0NTEyIC0xNy4zNjc0MTU3LDI5Ljk2ODk1MiAwLjUxMzcyNywxNi4yNDQxNjYxIC0xLjIxMzE5NywzMi43MTkyOTcgMS4yNjg1MTcsNDguNzY2NzkzIDguMTQxMTg1LDE0LjcxMDAxMiAyNi4wNzc2NzYxLDE4Ljg0OTk3MiAzOS44Nzc0ODIsMjYuNzcwMTM0IDMwLjM3ODk2MiwxNS4wNjY1NSA2MC43NTc5MjUsMzAuMTMzMTAxIDkxLjEzNjg4Nyw0NS4xOTk2NTEgLTM0LjgyMjM5OCwxNy42MDY2OCAtNzAuMjI2MTE3LDM0LjE0NzgzIC0xMDQuNjYwNTA2OCw1Mi40NjUyOCAtMjAuMDM3Nzc1MiwxMS40ODE0NCAtMzQuNzc4MTg3MiwzNi45NjY5OCAtMjQuMTAxMTk2Miw1OS41OTIxMSAxMS4yOTkzMSwyNS42MDQ3IDM5Ljc0MjkxMSwzMy43MTY5NSA2Mi40NzIyMDgsNDUuOTY4MDIgNTguOTU5MTAzLDI5LjA5NDExIDExNy43MTA1MzUsNTguNjQ4NDIgMTc2Ljc4OTE1NSw4Ny40NzU2IDE0LjA2MTIxLDMuOTY4MzYgMjQuMDM2NzYsLTEyLjAyMzEgMjEuODAwNzksLTI0LjUzMjIgLTAuNTQyODUsLTE3LjgzMTU3IDEuMjU4MTYsLTM1LjkwMjkyIC0xLjI2ODM2LC01My41MzY0OCAtOC4xNDA2MywtMTQuNzEwNzEgLTI2LjA3NjkyLC0xOC44NTE5OCAtMzkuODc3MTksLTI2Ljc3MTcyIC0zMC4zNzYwNiwtMTUuMDcxMTUgLTYwLjgwMDczLC0zMC4xNDExNyAtOTEuMTQ2NDIsLTQ1LjIxMzA0IDM0LjUwODc5LC0xNy4zNzM3NyA2OS40NTU5NywtMzMuOTI1NjUgMTAzLjY3Mjk4LC01MS44NDY2MyAyMC4xOTUxMywtMTEuMDA2MjggMzUuMzg2NDQsLTM2LjMwMDA1IDI1LjYwMzM4LC01OC45ODA5NCBDIDIyNC43MDYyMyw1OC44NzI1MzQgMTk2LjA1MDY3LDUwLjQ4NjY0MSAxNzMuMTY3MjYsMzguMjM4MTkxIDE1MS4xOTIyNiwyNy4zNDkyOTUgMTI2LjI0NjM5LDE0LjkzOTYzOCAxMDYuMTIxMTcsNC45OTc2Mjc4IDcwLjA0MTcxOSwtMTIuODk5Mjk5IDMzLjk2MjI2OCwtMzAuNzk2MjI1IC0yLjExNzE4MzQsLTQ4LjY5MzE1MiBsIC0zLjM3MjY3NzcsLTEuMjE4NDkyIHoiIC8+PC9nPjwvc3ZnPgo="></a>
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/a23c18174fcfadee56c6ab57cd31f51989852fb95a38dda37580a29c61092a1a/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f72696f2d75693f636f6c6f723d25323331316538653365267374796c653d666c61742d737175617265"><img src="https://camo.githubusercontent.com/a23c18174fcfadee56c6ab57cd31f51989852fb95a38dda37580a29c61092a1a/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f72696f2d75693f636f6c6f723d25323331316538653365267374796c653d666c61742d737175617265" alt="Version" data-canonical-src="https://img.shields.io/pypi/v/rio-ui?color=%2311e8e3e&amp;style=flat-square"></a>
  
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/884c408912334729b8ddd086e7518cef48ec5570557f40650fb78cdb10597b61/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f72696f2d75693f7374796c653d666c61742d737175617265"><img src="https://camo.githubusercontent.com/884c408912334729b8ddd086e7518cef48ec5570557f40650fb78cdb10597b61/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f72696f2d75693f7374796c653d666c61742d737175617265" alt="Python Version" data-canonical-src="https://img.shields.io/pypi/pyversions/rio-ui?style=flat-square"></a>
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/989c7de84bff428d031b1a93f755748e2fdee2c027aae293433107424a56266e/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f72696f2d75693f636f6c6f723d25323331316538653365267374796c653d666c61742d737175617265"><img src="https://camo.githubusercontent.com/989c7de84bff428d031b1a93f755748e2fdee2c027aae293433107424a56266e/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f72696f2d75693f636f6c6f723d25323331316538653365267374796c653d666c61742d737175617265" alt="License" data-canonical-src="https://img.shields.io/pypi/l/rio-ui?color=%2311e8e3e&amp;style=flat-square"></a>
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/406ddb1400aae02dfcdee382dbe424af7a229b2adf7d306f61aec3317c03c208/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f72696f2d6c6162732f72696f3f7374796c653d666c61742d737175617265"><img src="https://camo.githubusercontent.com/406ddb1400aae02dfcdee382dbe424af7a229b2adf7d306f61aec3317c03c208/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f72696f2d6c6162732f72696f3f7374796c653d666c61742d737175617265" alt="GitHub Stars" data-canonical-src="https://img.shields.io/github/stars/rio-labs/rio?style=flat-square"></a>
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/2a795c56a8e50f94e4c2a5820e27af93303905feca7e989b28b8717d1c78caf9/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f72696f2d75693f636f6c6f723d25323331316538653365267374796c653d666c61742d737175617265"><img src="https://camo.githubusercontent.com/2a795c56a8e50f94e4c2a5820e27af93303905feca7e989b28b8717d1c78caf9/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f72696f2d75693f636f6c6f723d25323331316538653365267374796c653d666c61742d737175617265" alt="Downloads" data-canonical-src="https://img.shields.io/pypi/dm/rio-ui?color=%2311e8e3e&amp;style=flat-square"></a>
</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/41641225/328815476-44279406-0c2d-47e2-98b5-4582722054b2.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjY1OTQ1MDIsIm5iZiI6MTcyNjU5NDIwMiwicGF0aCI6Ii80MTY0MTIyNS8zMjg4MTU0NzYtNDQyNzk0MDYtMGMyZC00N2UyLTk4YjUtNDU4MjcyMjA1NGIyLmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MTclMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTE3VDE3MzAwMlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZmMzA0Njg0NzZiYTBmNjgzYzIwMDg5ZDhlNjk5ODA0MWFhOTgzZGJkNzU4NDkxOGFlNDczMmJlN2ZjYzQ1MDUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.XQtOoIR-8GoegXyadZpIXG-DPhf1BUcQKxPSwkJxM7w"><img src="https://private-user-images.githubusercontent.com/41641225/328815476-44279406-0c2d-47e2-98b5-4582722054b2.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjY1OTQ1MDIsIm5iZiI6MTcyNjU5NDIwMiwicGF0aCI6Ii80MTY0MTIyNS8zMjg4MTU0NzYtNDQyNzk0MDYtMGMyZC00N2UyLTk4YjUtNDU4MjcyMjA1NGIyLmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MTclMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTE3VDE3MzAwMlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZmMzA0Njg0NzZiYTBmNjgzYzIwMDg5ZDhlNjk5ODA0MWFhOTgzZGJkNzU4NDkxOGFlNDczMmJlN2ZjYzQ1MDUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.XQtOoIR-8GoegXyadZpIXG-DPhf1BUcQKxPSwkJxM7w" alt="Image Generation Example" data-animated-image=""></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Features 🧩</h2><a id="user-content-features-" aria-label="Permalink: Features 🧩" href="#features-"></a></p>
<ul dir="auto">
<li>Modern, <strong>declarative UI</strong> framework</li>
<li><strong>100% Python</strong> - Zero HTML, CSS, or JavaScript required</li>
<li>Over <strong>50 Built-in components</strong> for common UI elements, such as <code>rio.Switch</code>, <code>rio.Button</code>, and <code>rio.Text</code>, and many more</li>
<li>Integrates with <strong>modern Python tooling</strong>: Thanks to being <strong>entirely Type Safe</strong> editors can give you instant suggestions and highlight problems right away</li>
<li>Apps can run <strong>both locally and on the web</strong></li>
<li><strong>Dev tools</strong> included</li>
<li><strong>Open Source &amp; Free forever</strong></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Example ⌨️</h2><a id="user-content-example-️" aria-label="Permalink: Example ⌨️" href="#example-️"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Define a component that counts button clicks
class ButtonClicker(rio.Component):
    # Define the attributes of the component. Rio will watch these
    # for changes and automatically update the GUI.
    clicks: int = 0

    # Define a method that increments the click count. We'll later
    # make a button that calls this method whenever it is pressed.
    def _on_press(self) -> None:
        self.clicks += 1

    # Define the `build` method. This method essentially tells rio
    # what a ButtonClicker component looks like. Whenever the state
    # of the ButtonClicker component changes, rio will call its
    # `build` method and update the GUI according to the output.
    def build(self) -> rio.Component:
        return rio.Column(
            rio.Button('Click me', on_press=self._on_press),
            rio.Text(f'You clicked the button {self.clicks} time(s)'),
        )

# Create an App and tell it to display a ButtonClicker when it starts
app = rio.App(build=ButtonClicker)
app.run_in_browser()  # Or `app.run_in_window()` to run as local app!"><pre><span># Define a component that counts button clicks</span>
<span>class</span> <span>ButtonClicker</span>(<span>rio</span>.<span>Component</span>):
    <span># Define the attributes of the component. Rio will watch these</span>
    <span># for changes and automatically update the GUI.</span>
    <span>clicks</span>: <span>int</span> <span>=</span> <span>0</span>

    <span># Define a method that increments the click count. We'll later</span>
    <span># make a button that calls this method whenever it is pressed.</span>
    <span>def</span> <span>_on_press</span>(<span>self</span>) <span>-&gt;</span> <span>None</span>:
        <span>self</span>.<span>clicks</span> <span>+=</span> <span>1</span>

    <span># Define the `build` method. This method essentially tells rio</span>
    <span># what a ButtonClicker component looks like. Whenever the state</span>
    <span># of the ButtonClicker component changes, rio will call its</span>
    <span># `build` method and update the GUI according to the output.</span>
    <span>def</span> <span>build</span>(<span>self</span>) <span>-&gt;</span> <span>rio</span>.<span>Component</span>:
        <span>return</span> <span>rio</span>.<span>Column</span>(
            <span>rio</span>.<span>Button</span>(<span>'Click me'</span>, <span>on_press</span><span>=</span><span>self</span>.<span>_on_press</span>),
            <span>rio</span>.<span>Text</span>(<span>f'You clicked the button <span><span>{</span><span>self</span>.<span>clicks</span><span>}</span></span> time(s)'</span>),
        )

<span># Create an App and tell it to display a ButtonClicker when it starts</span>
<span>app</span> <span>=</span> <span>rio</span>.<span>App</span>(<span>build</span><span>=</span><span>ButtonClicker</span>)
<span>app</span>.<span>run_in_browser</span>()  <span># Or `app.run_in_window()` to run as local app!</span></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation 🛠️</h2><a id="user-content-installation-️" aria-label="Permalink: Installation 🛠️" href="#installation-️"></a></p>
<p dir="auto">Rio is available on PyPI, so you can install it using pip:</p>

<p dir="auto"><h2 tabindex="-1" dir="auto">Getting Started 🎓</h2><a id="user-content-getting-started-" aria-label="Permalink: Getting Started 🎓" href="#getting-started-"></a></p>
<p dir="auto">Rio comes with a very helpful command line utility to help you out. Create a new project in one short command:</p>

<p dir="auto">You can choose from a variety of built-in templates to get you started. Here's a complete example to create a project based on the tic-tac-toe template:</p>
<div dir="auto" data-snippet-clipboard-copy-content="rio new my-project --type website --template &quot;Tic-Tac-Toe&quot;
cd my-project
rio run"><pre>rio new my-project --type website --template <span><span>"</span>Tic-Tac-Toe<span>"</span></span>
<span>cd</span> my-project
rio run</pre></div>
<p dir="auto">You'll have your first app up and running in seconds!</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Status: In Development 🚧</h2><a id="user-content-status-in-development-" aria-label="Permalink: Status: In Development 🚧" href="#status-in-development-"></a></p>
<p dir="auto">Rio is still in development. We're working hard to bring you the best possible
experience. If you have any feedback, please let us know on <a href="https://discord.gg/7ejXaPwhyH" rel="nofollow">our Discord server</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Contributing 🤝</h2><a id="user-content-contributing-" aria-label="Permalink: Contributing 🤝" href="#contributing-"></a></p>
<p dir="auto"><strong>Every project thrives with a helping hand</strong>, and that's especially true for
Rio. <strong>There are lots of ways to jump in</strong>, like adding new features, fixing
bugs, or just sharing your ideas. Check out our <a href="https://github.com/rio-labs/rio/blob/main/CONTRIBUTING.md">Contributing
Guide</a> when submitting
a Pull Request to the project. Rio keeps getting better with new features
rolling out every week. <strong>Star ⭐ and 👀 watch this repo to stay in the loop!</strong></p>
<p dir="auto">Unless you explicitly state otherwise, any contribution submitted for inclusion
in Rio shall be licensed under the terms of the Apache-2.0 license, without any
additional terms or conditions.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Community Support 🫶</h2><a id="user-content-community-support-" aria-label="Permalink: Community Support 🫶" href="#community-support-"></a></p>
<p dir="auto"><strong>Join the Rio adventure and be part of an awesome fellowship! Here is how to get in touch:</strong></p>
<ul dir="auto">
<li><a href="https://discord.gg/7ejXaPwhyH" rel="nofollow">Discord</a> (Level up your Rio skills! <strong>Join our Discord server</strong> to chat with other developers and discuss how to contribute.)</li>
<li><a href="https://github.com/rio-labs/rio">GitHub</a> (<strong>Spot a bug?</strong> Issues are the perfect place to let us know. Feeling super-helpful? Try fixing an existing issue and submit a PR!)</li>
<li><a href="https://github.com/rio-labs/rio/discussions">Community Forum</a> (<strong>Join our community forum on Github</strong> for asking questions and discussions)</li>
<li><a href="https://github.com/rio-labs/rio/discussions/categories/feature-requests">Feature Requests</a> (Cleanest way to <strong>request a feature</strong> on GitHub)</li>
</ul>
<p dir="auto">For general help using Rio, please refer to the <a href="https://rio.dev/docs?s=t9s" rel="nofollow">official Rio documentation</a>.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Dozens of Hezbollah members said to be seriously injured  as devices explode (699 pts)]]></title>
            <link>https://www.timesofisrael.com/liveblog_entry/dozens-of-hezbollah-members-said-serious-injured-in-beirut-as-devices-explode-in-alleged-israeli-op/</link>
            <guid>41567573</guid>
            <pubDate>Tue, 17 Sep 2024 13:49:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.timesofisrael.com/liveblog_entry/dozens-of-hezbollah-members-said-serious-injured-in-beirut-as-devices-explode-in-alleged-israeli-op/">https://www.timesofisrael.com/liveblog_entry/dozens-of-hezbollah-members-said-serious-injured-in-beirut-as-devices-explode-in-alleged-israeli-op/</a>, See on <a href="https://news.ycombinator.com/item?id=41567573">Hacker News</a></p>
Couldn't get https://www.timesofisrael.com/liveblog_entry/dozens-of-hezbollah-members-said-serious-injured-in-beirut-as-devices-explode-in-alleged-israeli-op/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Finic – Open source platform for building browser automations (104 pts)]]></title>
            <link>https://github.com/finic-ai/finic</link>
            <guid>41567387</guid>
            <pubDate>Tue, 17 Sep 2024 13:26:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/finic-ai/finic">https://github.com/finic-ai/finic</a>, See on <a href="https://news.ycombinator.com/item?id=41567387">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">
🦊 Finic
</h2><a id="user-content--finic" aria-label="Permalink: 
🦊 Finic
" href="#-finic"></a></p>
<p dir="auto">Build and deploy browser agents.</p>

<p dir="auto">
<a href="https://github.com/psychicapi/psychic/blob/main/LICENSE">
    <img src="https://camo.githubusercontent.com/5718e3ff0366e533ae9a50b5b34e7a1dcf1542e2d22332ec39c23ab3dd682736/68747470733a2f2f696d672e736869656c64732e696f2f7374617469632f76313f6c6162656c3d6c6963656e7365266d6573736167653d41706163686520322e3026636f6c6f723d626c7565" alt="License" data-canonical-src="https://img.shields.io/static/v1?label=license&amp;message=Apache 2.0&amp;color=blue">
</a>
<a href="https://github.com/psychicapi/psychic/issues?q=is%3Aissue+is%3Aclosed">
    <img src="https://camo.githubusercontent.com/941717002ea201001cbbfa15b00673b77c50ac45723c1db4414ea316106c6268/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732d636c6f7365642f707379636869636170692f707379636869633f636f6c6f723d626c7565" alt="Issues" data-canonical-src="https://img.shields.io/github/issues-closed/psychicapi/psychic?color=blue">
</a>
  <a href="https://docs.finic.io/" rel="nofollow">
    <img src="https://camo.githubusercontent.com/81bf64618acd68acb6a107ab472995890348609a6675172834a9aae1b097e175/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63756d656e746174696f6e2d626c7565" data-canonical-src="https://img.shields.io/badge/documentation-blue">
  </a>
  <a href="https://www.ycombinator.com/companies/finic" rel="nofollow">
    <img src="https://camo.githubusercontent.com/b1a5b7ea6c8c675d0cc3c11af99508f0df7cf41644febd064c47a157a6a59cf3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4261636b6564253230627925323059253230436f6d62696e61746f722d6f72616e6765" data-canonical-src="https://img.shields.io/badge/Backed%20by%20Y%20Combinator-orange">
  </a>
  <a href="https://discord.gg/eyZMSxBPsd" rel="nofollow">
    <img src="https://camo.githubusercontent.com/1a0a69c3728a0d88374d45bd5dff69521e4b34018f33c4c2ba27bd3c3ace098f/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f313133313834343831353030353432393739303f6c6f676f3d646973636f7264" data-canonical-src="https://img.shields.io/discord/1131844815005429790?logo=discord">
  </a>
</p>
<p dir="auto"><a href="https://finic.ai/" rel="nofollow">Finic</a> is a cloud platform designed to simplify the deployment and management of browser-based automation agents, with a focus on fault-tolerant execution. It’s designed for quickly launching bots, scrapers, RPA integrationsm and other jobs that depend on multiple authenticated web services.</p>
<p dir="auto">Finic is designed to be <strong>unopionated about the development process</strong>, and simply provide network-level utilities and infrastructure to help you make your agents reliable and scalable.</p>
<p dir="auto">Currently, <a href="https://github.com/microsoft/playwright-python">Playwright</a> is supported for interacting with DOM elements and <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="nofollow">BeautifulSoup</a> is recommended (though not required) for parsing HTML.</p>
<details open="">
  <summary>
    
    <span aria-label="Video description Automating.Browser.Interactions.mp4">Automating.Browser.Interactions.mp4</span>
    <span></span>
  </summary>

  <video src="https://private-user-images.githubusercontent.com/14931371/368185947-19e45af1-5295-45f5-9a65-b4e833a98485.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjY2MjY5MDEsIm5iZiI6MTcyNjYyNjYwMSwicGF0aCI6Ii8xNDkzMTM3MS8zNjgxODU5NDctMTllNDVhZjEtNTI5NS00NWY1LTlhNjUtYjRlODMzYTk4NDg1Lm1wND9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTE4VDAyMzAwMVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWY2YTllMTk2ZTFhZmU1OGZiNTFjNjc1NGQyN2M5NmExMzg3MjkyNjE0ZGQ1NDFlNjRiOTY2MTg5YTA0ODg0ODcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.AlvASeoe944ZpuFDm7bjn9llg2gnb6jMtn6zjVB4oEs" data-canonical-src="https://private-user-images.githubusercontent.com/14931371/368185947-19e45af1-5295-45f5-9a65-b4e833a98485.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjY2MjY5MDEsIm5iZiI6MTcyNjYyNjYwMSwicGF0aCI6Ii8xNDkzMTM3MS8zNjgxODU5NDctMTllNDVhZjEtNTI5NS00NWY1LTlhNjUtYjRlODMzYTk4NDg1Lm1wND9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTE4VDAyMzAwMVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWY2YTllMTk2ZTFhZmU1OGZiNTFjNjc1NGQyN2M5NmExMzg3MjkyNjE0ZGQ1NDFlNjRiOTY2MTg5YTA0ODg0ODcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.AlvASeoe944ZpuFDm7bjn9llg2gnb6jMtn6zjVB4oEs" controls="controls" muted="muted">

  </video>
</details>

<p dir="auto"><h2 tabindex="-1" dir="auto">Features:</h2><a id="user-content-features" aria-label="Permalink: Features:" href="#features"></a></p>
<ul dir="auto">
<li><strong>Cloud Deployment:</strong> Deploy a pre-configured Playwright container to Finic Cloud with a single command. Trigger agents from the Finic dashboard or API.</li>
<li><strong>Secure Credential Management:</strong> Safely store and access credentials using Finic’s built-in secret manager.</li>
<li><strong>Monitoring:</strong> Track agent execution and view detailed logs through the Finic dashboard.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Quickstart</h2><a id="user-content-quickstart" aria-label="Permalink: Quickstart" href="#quickstart"></a></p>
<p dir="auto">Install Finic.</p>

<p dir="auto">Create a new agent with boilerplate code that logs into a website and extracts HTML content.</p>
<div dir="auto" data-snippet-clipboard-copy-content="create-finic-app example-project
cd example-project"><pre>create-finic-app example-project
<span>cd</span> example-project</pre></div>
<p dir="auto">Run your agent locally.</p>
<div dir="auto" data-snippet-clipboard-copy-content="poetry install
poetry run start"><pre>poetry install
poetry run start</pre></div>
<p dir="auto">Deploy your agent to Finic Cloud.</p>

<p dir="auto">View and run your agent from the <a href="https://app.finic.io/agents" rel="nofollow">Finic dashboard</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">🚧 Roadmap</h2><a id="user-content--roadmap" aria-label="Permalink: 🚧 Roadmap" href="#-roadmap"></a></p>
<ul dir="auto">
<li>Automated deployment from GitHub.</li>
<li>Containers with X11 installed for advanced UI automation.</li>
<li>Session impersonation - sync session tokens to the secret manager so your agents can use them.</li>
<li>Self healing selectors - use LLMs to propose code fixes when the content changes on target websites.</li>
<li>Scheduling and orchestration features to define workflows composed of multiple agents.</li>
<li>Automatically detect rate limits and back off to maximize throughput.</li>
<li>Set custom timeouts with no upper bound, useful for long running tasks or always-on agents.</li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA["Four Seconds to Hot Up the Disintegrator, Google Had Told Me It Wasn't Enough" (251 pts)]]></title>
            <link>https://quoteinvestigator.com/2024/09/16/hot-sf/</link>
            <guid>41567301</guid>
            <pubDate>Tue, 17 Sep 2024 13:16:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://quoteinvestigator.com/2024/09/16/hot-sf/">https://quoteinvestigator.com/2024/09/16/hot-sf/</a>, See on <a href="https://news.ycombinator.com/item?id=41567301">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
		<main id="main">

			
<article id="post-445764">
		
	
	<div>
		
<h4><strong>Raymond Chandler? Barry N. Malzberg? Vlad<br>Savov? Apocryphal?</strong></h4>



<figure><a href="https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07.jpg"><img fetchpriority="high" decoding="async" width="1024" height="1017" src="https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07-1024x1017.jpg" alt="" srcset="https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07-1024x1017.jpg 1024w, https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07-300x298.jpg 300w, https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07-150x150.jpg 150w, https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07-768x763.jpg 768w, https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07-1536x1526.jpg 1536w, https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07-1568x1557.jpg 1568w, https://77c054.p3cdn1.secureserver.net/wp-content/uploads/2024/09/sfdevice07.jpg 2048w" sizes="(max-width: 1024px) 100vw, 1024px"></a><figcaption><strong>A science fictional device of unknown purpose</strong></figcaption></figure>



<p><strong>Question for Quote Investigator: </strong>Apparently, sometime during the 1950s a popular writer of detective fiction crafted a short passage parodying science fiction. Within the passage the word “Google” appeared long before the company Google existed. The passage displayed remarkable prescience. The word “Google” referred to an entity that provided information. Would you please explore this topic and provide a citation?</p>



<p><strong>Reply from Quote Investigator: </strong>The writer Raymond Chandler is best known as the creator of the hardboiled detective character Philip Marlowe. In 1953 Chandler sent a letter to a friend which included a jargon-filled passage parodying science fiction writing. Boldface added to excerpts by <strong>QI</strong>:<sup data-fn="ff8d2b0d-dcda-4a73-823e-bfdbc411f44a"><a href="#ff8d2b0d-dcda-4a73-823e-bfdbc411f44a" id="ff8d2b0d-dcda-4a73-823e-bfdbc411f44a-link">1</a></sup></p>



<blockquote>
<p>Did you ever read what they call Science Fiction. It’s a scream. It is written like this: <strong>“I checked out with K 19 on Aldabaran III, and stepped out through the crummalite hatch on my 22 Model Sirus Hardtop. I cocked the timejector in secondary and waded through the bright blue manda grass. My breath froze into pink pretzels.”</strong></p>
</blockquote>



<p>The final sentence of Chandler’s passage included the word “Google”:<sup data-fn="586089a3-2066-4980-b374-0508cf457454"><a href="#586089a3-2066-4980-b374-0508cf457454" id="586089a3-2066-4980-b374-0508cf457454-link">2</a></sup></p>



<blockquote>
<p>“The sudden brightness swung me around and the Fourth Moon had already risen. <strong>I had exactly four seconds to hot up the disintegrator and Google had told me it wasn’t enough. </strong>He was right.”</p>



<p>They pay brisk money for this crap?</p>
</blockquote>



<p>Chandler used the pronoun “he” when referring back to “Google”; hence, the character “Google” may have been a male human, a male alien, or a personified computing device.</p>



<p>Chandler played cricket when he was young, and he may have been influenced by the term “google” which is applied to balls which break or swerve. Alternatively, Chandler may have been influenced by the comic strip character Barney Google or by the term “Googol” which refers to the enormous number 10<sup>100</sup> which can be written as 1 followed by one hundred zeroes.</p>



<p>Below are additional selected citations in chronological order.</p>



<p>In 1990 the science fiction anthology “Universe 1” included a story by Barry N. Malzberg which began with a reprint of Chandler’s letter. Malzberg’s goal was to construct an entertaining story which included every phrase of Chandler’s mocking prose.<sup data-fn="69955daa-ed3b-41e0-97e9-3f858a261555"><a href="#69955daa-ed3b-41e0-97e9-3f858a261555" id="69955daa-ed3b-41e0-97e9-3f858a261555-link">3</a></sup> Here is an excerpt from Malzberg’s tale:<sup data-fn="139e8dd4-5381-489a-8423-8e5b5b179ce2"><a href="#139e8dd4-5381-489a-8423-8e5b5b179ce2" id="139e8dd4-5381-489a-8423-8e5b5b179ce2-link">4</a></sup></p>



<blockquote>
<p>I <strong>waded through the bright blue manda grass</strong> toward the beckoning Bryll, feeling the pull of the mud as I tried to clamber away, retain balance. This more than anything else they enjoy, taking our dignity, making us cartoons, yanking from us the solemnity of our distress and placing us on a flat and colorful map where we deal with pale, exploded forms who may or may not be representative of the Brylls themselves. We do not know if it is submission or some parody of conquest. <strong>My breath froze into pink pretzels </strong>as I squeaked.</p>
</blockquote>



<p>Sergey Brin and Larry Page were the original creators of a search engine called Backrub which was renamed Google in 1997. It is natural to wonder whether they might have somehow encountered the passage written by Chandler, but there is no evidence supporting that possibility. Instead, the book “In the Plex” by journalist Steven Levy presented the following explanation for the name choice:<sup data-fn="a4271451-ada1-4156-8078-6a253d965441"><a href="#a4271451-ada1-4156-8078-6a253d965441" id="a4271451-ada1-4156-8078-6a253d965441-link">5</a></sup></p>



<blockquote>
<p>In September 1997, Page and Brin renamed BackRub to something they hoped would be suitable for a business . . . <strong>Page’s dorm roommate suggested they call it “googol.” </strong>. . . “The name reflected the scale of what we were doing,” Brin explained a few years later. “It actually became a better choice of name later on, because now we have billions of pages and images and groups and documents, and hundreds of millions of searches a day.” <strong>Page misspelled the word,</strong> which was just as well since the Internet address for the correct spelling was already taken. “Google” was available. “It was easy to type and memorable,” says Page.</p>
</blockquote>



<p>In 2006 “The Wit &amp; Wisdom of Great Writers” compiled by Nick Holt included an entry which reprinted part of the Chandler’s science fiction passage while crediting Chandler.<sup data-fn="75d0a7d7-a979-4a52-9292-f65fdf61a5be"><a href="#75d0a7d7-a979-4a52-9292-f65fdf61a5be" id="75d0a7d7-a979-4a52-9292-f65fdf61a5be-link">6</a></sup></p>



<p>In 2015 “The Verge” website posted an article titled “Google was a 1953 Raymond Chandler joke” by journalist Vlad Savov. The piece reprinted the passage and included this comment:<sup data-fn="dab43b5f-6a57-45ef-9d82-c7d8e2d5d507"><a href="#dab43b5f-6a57-45ef-9d82-c7d8e2d5d507" id="dab43b5f-6a57-45ef-9d82-c7d8e2d5d507-link">7</a></sup></p>



<blockquote>
<p>Chandler indulges in a brilliantly entertaining, paragraph-long parody of sci-fi writing, which hits every trope and cliché of the genre. Oh, and he namedrops Google some 45 years before Larry and Sergey registered the domain.</p>
</blockquote>



<p>In conclusion, Raymond Chandler did use the term “Google” in a 1953 letter to a friend. It appeared within a comical science-fiction pastiche filled with jargon; however, the precise meaning of “Google” was unclear. “Google” was the source of information, and Chandler used the pronoun “he” when referring back to “Google”.</p>



<p>Acknowledgement: Great thanks to the anonymous person whose inquiry led QI to formulate this question and perform this exploration. Thanks to Rich Lowenthal who told QI about the use of the term google in cricket. Also, thanks to John Baker for his feedback.</p>



<p>Image Notes: A science fictional device of unknown purpose. This is a public domain image.</p>


<ol><li id="ff8d2b0d-dcda-4a73-823e-bfdbc411f44a">1981, Selected Letters of Raymond Chandler by Raymond Chandler, Edited by Frank MacShane, Letter To: H. N. Swanson, Letter Date: March 14, 1953, Start Page 337, Quote Page 338, Columbia University Press, New York. (Verified with scans) <a href="#ff8d2b0d-dcda-4a73-823e-bfdbc411f44a-link" aria-label="Jump to footnote reference 1">↩︎</a></li><li id="586089a3-2066-4980-b374-0508cf457454">1981, Selected Letters of Raymond Chandler by Raymond Chandler, Edited by Frank MacShane, Letter To: H. N. Swanson, Letter Date: March 14, 1953, Start Page 337, Quote Page 338, Columbia University Press, New York. (Verified with scans) <a href="#586089a3-2066-4980-b374-0508cf457454-link" aria-label="Jump to footnote reference 2">↩︎</a></li><li id="69955daa-ed3b-41e0-97e9-3f858a261555">1990, Universe 1, Edited by Robert Silverberg and Karen Haber, (Comment by editors Robert Silverberg and Karen Haber on the short story “Playback” by Barry N. Malzberg), Quote Page 82, A Foundation Book: Doubleday, New York. (Verified with scans) <a href="#69955daa-ed3b-41e0-97e9-3f858a261555-link" aria-label="Jump to footnote reference 3">↩︎</a></li><li id="139e8dd4-5381-489a-8423-8e5b5b179ce2">1990, Universe 1, Edited by Robert Silverberg and Karen Haber, Story: Playback by Barry N. Malzberg, Start Page 82, Quote Page 86, A Foundation Book: Doubleday, New York. (Verified with scans) <a href="#139e8dd4-5381-489a-8423-8e5b5b179ce2-link" aria-label="Jump to footnote reference 4">↩︎</a></li><li id="a4271451-ada1-4156-8078-6a253d965441">2011, In the Plex: How Google Thinks, Works and Shapes Our Lives by Steven Levy, Part One: The World According To Google, Quote Page 30 and 31, Simon &amp; Schuster, New York. (Verified with scans) <a href="#a4271451-ada1-4156-8078-6a253d965441-link" aria-label="Jump to footnote reference 5">↩︎</a></li><li id="75d0a7d7-a979-4a52-9292-f65fdf61a5be">2006 Copyright, The Wit &amp; Wisdom of Great Writers, Compiled by Nick Holt, Chapter: Books Are More Than Books, Quote Page 88, House of Raven, King’s Sutton, England. (Verified with scans) <a href="#75d0a7d7-a979-4a52-9292-f65fdf61a5be-link" aria-label="Jump to footnote reference 6">↩︎</a></li><li id="dab43b5f-6a57-45ef-9d82-c7d8e2d5d507">Website: The Verge, Article title: Google was a 1953 Raymond Chandler joke, Article author: Vlad Savov, Date on website: August 12, 2015, Website description: Technology news from Vox media. (Accessed theverge.com on September 14, 2024) <a href="https://www.theverge.com/2015/8/12/9136311/raymond-chandler-google-letters">link</a> <a href="#dab43b5f-6a57-45ef-9d82-c7d8e2d5d507-link" aria-label="Jump to footnote reference 7">↩︎</a></li></ol>



	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article><!-- #post-445764 -->

	<nav aria-label="Posts">
		<h2>Post navigation</h2>
		
	</nav>
		</main><!-- #main -->
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Hezbollah pager explosions kill several people in Lebanon (661 pts)]]></title>
            <link>https://www.reuters.com/world/middle-east/dozens-hezbollah-members-wounded-lebanon-when-pagers-exploded-sources-witnesses-2024-09-17/</link>
            <guid>41567299</guid>
            <pubDate>Tue, 17 Sep 2024 13:15:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reuters.com/world/middle-east/dozens-hezbollah-members-wounded-lebanon-when-pagers-exploded-sources-witnesses-2024-09-17/">https://www.reuters.com/world/middle-east/dozens-hezbollah-members-wounded-lebanon-when-pagers-exploded-sources-witnesses-2024-09-17/</a>, See on <a href="https://news.ycombinator.com/item?id=41567299">Hacker News</a></p>
Couldn't get https://www.reuters.com/world/middle-east/dozens-hezbollah-members-wounded-lebanon-when-pagers-exploded-sources-witnesses-2024-09-17/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Rga: Ripgrep, but also search in PDFs, E-Books, Office documents, zip, etc. (323 pts)]]></title>
            <link>https://github.com/phiresky/ripgrep-all</link>
            <guid>41567262</guid>
            <pubDate>Tue, 17 Sep 2024 13:11:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/phiresky/ripgrep-all">https://github.com/phiresky/ripgrep-all</a>, See on <a href="https://news.ycombinator.com/item?id=41567262">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">rga: ripgrep, but also search in PDFs, E-Books, Office documents, zip, tar.gz, etc.</h2><a id="user-content-rga-ripgrep-but-also-search-in-pdfs-e-books-office-documents-zip-targz-etc" aria-label="Permalink: rga: ripgrep, but also search in PDFs, E-Books, Office documents, zip, tar.gz, etc." href="#rga-ripgrep-but-also-search-in-pdfs-e-books-office-documents-zip-targz-etc"></a></p>
<p dir="auto">rga is a line-oriented search tool that allows you to look for a regex in a multitude of file types. rga wraps the awesome <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a> and enables it to search in pdf, docx, sqlite, jpg, movie subtitles (mkv, mp4), etc.</p>
<p dir="auto"><a href="https://github.com/phiresky/ripgrep-all"><img src="https://camo.githubusercontent.com/5387fa8d96e5760861f378b36c0e6f1d84c5b0dafbe2e8354e6adfac80ac0e40/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f7265706f2d6769746875622e636f6d2532467068697265736b79253246726970677265702d2d616c6c2d696e666f726d6174696f6e616c2e737667" alt="github repo" data-canonical-src="https://img.shields.io/badge/repo-github.com%2Fphiresky%2Fripgrep--all-informational.svg"></a>
<a href="https://crates.io/crates/ripgrep-all" rel="nofollow"><img src="https://camo.githubusercontent.com/c1fff664a51d2e626f4f3bef813fd10430ce1b0daa5c61c78f5eb17cb677a4a6/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f726970677265702d616c6c2e737667" alt="Crates.io" data-canonical-src="https://img.shields.io/crates/v/ripgrep-all.svg"></a>
<a href="https://www.reddit.com/r/rustjerk/top/?sort=top&amp;t=all" rel="nofollow"><img src="https://camo.githubusercontent.com/00f69a4f5b9b22f7c302c1c3ebe8da26b76918c2364925b862bda41de264c4d4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f6e63757272656e63792d666561726c6573732d737563636573732e737667" alt="fearless concurrency" data-canonical-src="https://img.shields.io/badge/concurrency-fearless-success.svg"></a></p>
<p dir="auto">For more detail, see this introductory blogpost: <a href="https://phiresky.github.io/blog/2019/rga--ripgrep-for-zip-targz-docx-odt-epub-jpg/" rel="nofollow">https://phiresky.github.io/blog/2019/rga--ripgrep-for-zip-targz-docx-odt-epub-jpg/</a></p>
<p dir="auto">rga will recursively descend into archives and match text in every file type it knows.</p>
<p dir="auto">Here is an <a href="https://github.com/phiresky/ripgrep-all/tree/master/exampledir/demo">example directory</a> with different file types:</p>
<div data-snippet-clipboard-copy-content="demo/
├── greeting.mkv
├── hello.odt
├── hello.sqlite3
└── somearchive.zip
├── dir
│ ├── greeting.docx
│ └── inner.tar.gz
│ └── greeting.pdf
└── greeting.epub"><pre><code>demo/
├── greeting.mkv
├── hello.odt
├── hello.sqlite3
└── somearchive.zip
├── dir
│ ├── greeting.docx
│ └── inner.tar.gz
│ └── greeting.pdf
└── greeting.epub
</code></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/phiresky/ripgrep-all/blob/master/doc/demodir.png"><img src="https://github.com/phiresky/ripgrep-all/raw/master/doc/demodir.png" alt="rga output"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Integration with fzf</h2><a id="user-content-integration-with-fzf" aria-label="Permalink: Integration with fzf" href="#integration-with-fzf"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/phiresky/ripgrep-all/blob/master/doc/rga-fzf.gif"><img src="https://github.com/phiresky/ripgrep-all/raw/master/doc/rga-fzf.gif" alt="rga-fzf" data-animated-image=""></a></p>
<p dir="auto">See <a href="https://github.com/phiresky/ripgrep-all/wiki/fzf-Integration">the wiki</a> for instructions of integrating rga with fzf.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">INSTALLATION</h2><a id="user-content-installation" aria-label="Permalink: INSTALLATION" href="#installation"></a></p>
<p dir="auto">Linux x64, macOS and Windows binaries are available <a href="https://github.com/phiresky/ripgrep-all/releases/latest">in GitHub Releases</a>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Linux</h3><a id="user-content-linux" aria-label="Permalink: Linux" href="#linux"></a></p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Arch Linux</h4><a id="user-content-arch-linux" aria-label="Permalink: Arch Linux" href="#arch-linux"></a></p>
<p dir="auto"><code>pacman -S ripgrep-all</code></p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Nix</h4><a id="user-content-nix" aria-label="Permalink: Nix" href="#nix"></a></p>
<p dir="auto"><code>nix-env -iA nixpkgs.ripgrep-all</code></p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Debian-based</h4><a id="user-content-debian-based" aria-label="Permalink: Debian-based" href="#debian-based"></a></p>
<p dir="auto">download the <a href="https://github.com/phiresky/ripgrep-all/releases/latest">rga binary</a> and get the dependencies like this:</p>
<p dir="auto"><code>apt install ripgrep pandoc poppler-utils ffmpeg</code></p>
<p dir="auto">If ripgrep is not included in your package sources, get it from <a href="https://github.com/BurntSushi/ripgrep/releases">here</a>.</p>
<p dir="auto">rga will search for all binaries it calls in $PATH and the directory itself is in.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Windows</h3><a id="user-content-windows" aria-label="Permalink: Windows" href="#windows"></a></p>
<p dir="auto">Note that installing via <a href="https://chocolatey.org/packages/ripgrep-all" rel="nofollow">chocolatey</a> or <a href="https://github.com/ScoopInstaller/Main/blob/master/bucket/rga.json">scoop</a> is the only supported download method. If you download the binary from releases manually, you will not get the dependencies (for example pdftotext from poppler).</p>
<p dir="auto">If you get an error like <code>VCRUNTIME140.DLL could not be found</code>, you need to install <a href="https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads" rel="nofollow">vc_redist.x64.exe</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Chocolatey</h4><a id="user-content-chocolatey" aria-label="Permalink: Chocolatey" href="#chocolatey"></a></p>
<div data-snippet-clipboard-copy-content="choco install ripgrep-all"><pre><code>choco install ripgrep-all
</code></pre></div>
<p dir="auto"><h4 tabindex="-1" dir="auto">Scoop</h4><a id="user-content-scoop" aria-label="Permalink: Scoop" href="#scoop"></a></p>

<p dir="auto"><h3 tabindex="-1" dir="auto">Homebrew/Linuxbrew</h3><a id="user-content-homebrewlinuxbrew" aria-label="Permalink: Homebrew/Linuxbrew" href="#homebrewlinuxbrew"></a></p>
<p dir="auto"><code>rga</code> can be installed with <a href="https://formulae.brew.sh/formula/ripgrep-all#default" rel="nofollow">Homebrew</a>:</p>
<p dir="auto"><code>brew install rga</code></p>
<p dir="auto">To install the dependencies that are each not strictly necessary but very useful:</p>
<p dir="auto"><code>brew install pandoc poppler ffmpeg</code></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">MacPorts</h3><a id="user-content-macports" aria-label="Permalink: MacPorts" href="#macports"></a></p>
<p dir="auto"><code>rga</code> can also be installed on macOS via <a href="https://ports.macports.org/port/ripgrep-all/" rel="nofollow">MacPorts</a>:</p>
<p dir="auto"><code>sudo port install ripgrep-all</code></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Compile from source</h3><a id="user-content-compile-from-source" aria-label="Permalink: Compile from source" href="#compile-from-source"></a></p>
<p dir="auto">rga should compile with stable Rust (v1.75.0+, check with <code>rustc --version</code>). To build it, run the following (or the equivalent in your OS):</p>
<div data-snippet-clipboard-copy-content="~$ apt install build-essential pandoc poppler-utils ffmpeg ripgrep cargo
~$ cargo install --locked ripgrep_all
~$ rga --version    # this should work now"><pre><code>~$ apt install build-essential pandoc poppler-utils ffmpeg ripgrep cargo
~$ cargo install --locked ripgrep_all
~$ rga --version    # this should work now
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Available Adapters</h2><a id="user-content-available-adapters" aria-label="Permalink: Available Adapters" href="#available-adapters"></a></p>
<p dir="auto">rga works with <em>adapters</em> that adapt various file formats. It comes with a few adapters integrated:</p>

<p dir="auto">You can also add <strong>custom adapters</strong>. See <a href="https://github.com/phiresky/ripgrep-all/wiki">the wiki</a> for more information.</p>

<p dir="auto">Adapters:</p>
<ul dir="auto">
<li>
<p dir="auto"><strong>pandoc</strong>
Uses pandoc to convert binary/unreadable text documents to plain markdown-like text
Runs: pandoc --from= --to=plain --wrap=none --markdown-headings=atx<br>
Extensions: .epub, .odt, .docx, .fb2, .ipynb, .html, .htm</p>
</li>
<li>
<p dir="auto"><strong>poppler</strong>
Uses pdftotext (from poppler-utils) to extract plain text from PDF files
Runs: pdftotext - -<br>
Extensions: .pdf<br>
Mime Types: application/pdf</p>
</li>
<li>
<p dir="auto"><strong>postprocpagebreaks</strong>
Adds the page number to each line for an input file that specifies page breaks as ascii page break character.
Mainly to be used internally by the poppler adapter.<br>
Extensions: .asciipagebreaks</p>
</li>
<li>
<p dir="auto"><strong>ffmpeg</strong>
Uses ffmpeg to extract video metadata/chapters, subtitles, lyrics, and other metadata<br>
Extensions: .mkv, .mp4, .avi, .mp3, .ogg, .flac, .webm</p>
</li>
<li>
<p dir="auto"><strong>zip</strong>
Reads a zip file as a stream and recurses down into its contents<br>
Extensions: .zip, .jar<br>
Mime Types: application/zip</p>
</li>
<li>
<p dir="auto"><strong>decompress</strong>
Reads compressed file as a stream and runs a different extractor on the contents.<br>
Extensions: .als, .bz2, .gz, .tbz, .tbz2, .tgz, .xz, .zst<br>
Mime Types: application/gzip, application/x-bzip, application/x-xz, application/zstd</p>
</li>
<li>
<p dir="auto"><strong>tar</strong>
Reads a tar file as a stream and recurses down into its contents<br>
Extensions: .tar</p>
</li>
<li>
<p dir="auto"><strong>sqlite</strong>
Uses sqlite bindings to convert sqlite databases into a simple plain text format<br>
Extensions: .db, .db3, .sqlite, .sqlite3<br>
Mime Types: application/x-sqlite3</p>
</li>
</ul>
<p dir="auto">The following adapters are disabled by default, and can be enabled using '--rga-adapters=+foo,bar':</p>
<ul dir="auto">
<li><strong>mail</strong>
Reads mailbox/mail files and runs extractors on the contents and attachments.<br>
Extensions: .mbox, .mbx, .eml<br>
Mime Types: application/mbox, message/rfc822</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">USAGE:</h2><a id="user-content-usage" aria-label="Permalink: USAGE:" href="#usage"></a></p>
<blockquote>
<p dir="auto">rga [RGA OPTIONS] [RG OPTIONS] PATTERN [PATH ...]</p>
</blockquote>
<p dir="auto"><h2 tabindex="-1" dir="auto">FLAGS:</h2><a id="user-content-flags" aria-label="Permalink: FLAGS:" href="#flags"></a></p>
<p dir="auto"><strong>--rga-accurate</strong></p>
<blockquote>
<p dir="auto">Use more accurate but slower matching by mime type</p>
</blockquote>
<blockquote>
<p dir="auto">By default, rga will match files using file extensions. Some programs,
such as sqlite3, don't care about the file extension at all, so users
sometimes use any or no extension at all. With this flag, rga will try
to detect the mime type of input files using the magic bytes (similar
to the `file` utility), and use that to choose the adapter.
Detection is only done on the first 8KiB of the file, since we can't
always seek on the input (in archives).</p>
</blockquote>
<p dir="auto"><strong>--rga-no-cache</strong></p>
<blockquote>
<p dir="auto">Disable caching of results</p>
</blockquote>
<blockquote>
<p dir="auto">By default, rga caches the extracted text, if it is small enough, to a
database in ${XDG_CACHE_DIR-~/.cache}/ripgrep-all on Linux,
<em>~/Library/Caches/ripgrep-all</em> on macOS, or
C:\Users\username\AppData\Local\ripgrep-all on Windows. This way,
repeated searches on the same set of files will be much faster. If you
pass this flag, all caching will be disabled.</p>
</blockquote>
<p dir="auto"><strong>-h</strong>, <strong>--help</strong></p>
<blockquote>
<p dir="auto">Prints help information</p>
</blockquote>
<p dir="auto"><strong>--rga-list-adapters</strong></p>
<blockquote>
<p dir="auto">List all known adapters</p>
</blockquote>
<p dir="auto"><strong>--rga-print-config-schema</strong></p>
<blockquote>
<p dir="auto">Print the JSON Schema of the configuration file</p>
</blockquote>
<p dir="auto"><strong>--rg-help</strong></p>
<blockquote>
<p dir="auto">Show help for ripgrep itself</p>
</blockquote>
<p dir="auto"><strong>--rg-version</strong></p>
<blockquote>
<p dir="auto">Show version of ripgrep itself</p>
</blockquote>
<p dir="auto"><strong>-V</strong>, <strong>--version</strong></p>
<blockquote>
<p dir="auto">Prints version information</p>
</blockquote>
<p dir="auto"><h2 tabindex="-1" dir="auto">OPTIONS:</h2><a id="user-content-options" aria-label="Permalink: OPTIONS:" href="#options"></a></p>
<p dir="auto"><strong>--rga-adapters=</strong>&lt;adapters&gt;...</p>
<blockquote>
<p dir="auto">Change which adapters to use and in which priority order (descending)</p>
</blockquote>
<blockquote>
<p dir="auto">"foo,bar" means use only adapters foo and bar. "-bar,baz" means
use all default adapters except for bar and baz. "+bar,baz" means
use all default adapters and also bar and baz.</p>
</blockquote>
<p dir="auto"><strong>--rga-cache-compression-level=</strong>&lt;compression-level&gt;</p>
<blockquote>
<p dir="auto">ZSTD compression level to apply to adapter outputs before storing in
cache db</p>
</blockquote>
<blockquote>
<p dir="auto">Ranges from 1 - 22 [default: 12]</p>
</blockquote>
<p dir="auto"><strong>--rga-config-file=</strong>&lt;config-file-path&gt;</p>
<p dir="auto"><strong>--rga-max-archive-recursion=</strong>&lt;max-archive-recursion&gt;</p>
<blockquote>
<p dir="auto">Maximum nestedness of archives to recurse into [default: 5]</p>
</blockquote>
<p dir="auto"><strong>--rga-cache-max-blob-len=</strong>&lt;max-blob-len&gt;</p>
<blockquote>
<p dir="auto">Max compressed size to cache</p>
</blockquote>
<blockquote>
<p dir="auto">Longest byte length (after compression) to store in cache. Longer
adapter outputs will not be cached and recomputed every time.</p>
</blockquote>
<blockquote>
<p dir="auto">Allowed suffixes on command line: k M G [default: 2000000]</p>
</blockquote>
<p dir="auto"><strong>--rga-cache-path=</strong>&lt;path&gt;</p>
<blockquote>
<p dir="auto">Path to store cache db [default: /home/phire/.cache/ripgrep-all]</p>
</blockquote>
<p dir="auto"><strong>-h</strong> shows a concise overview, <strong>--help</strong> shows more detail and
advanced options.</p>
<p dir="auto">All other options not shown here are passed directly to rg, especially
[PATTERN] and [PATH ...]</p>

<p dir="auto"><h2 tabindex="-1" dir="auto">Config</h2><a id="user-content-config" aria-label="Permalink: Config" href="#config"></a></p>
<p dir="auto">The config file location leverage the mechanisms defined by</p>
<ul dir="auto">
<li>the <a href="https://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html" rel="nofollow">XDG base directory</a> and
the <a href="https://www.freedesktop.org/wiki/Software/xdg-user-dirs/" rel="nofollow">XDG user directory</a> specifications on Linux (ex: <code>~/.config/ripgrep-all/config.jsonc</code>)</li>
<li>the <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd378457.aspx" rel="nofollow">Known Folder</a> API on Windows (ex:  <code>C:\Users\Alice\AppData\Roaming\ripgrep-all/config.jsonc</code>)</li>
<li>the <a href="https://developer.apple.com/library/content/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW6" rel="nofollow">Standard Directories</a>
guidelines on macOS (ex: <code>~/Library/Application Support/ripgrep-all/config.jsonc</code>)</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Development</h2><a id="user-content-development" aria-label="Permalink: Development" href="#development"></a></p>
<p dir="auto">To enable debug logging:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export RUST_LOG=debug
export RUST_BACKTRACE=1"><pre><span>export</span> RUST_LOG=debug
<span>export</span> RUST_BACKTRACE=1</pre></div>
<p dir="auto">Also remember to disable caching with <code>--rga-no-cache</code> or clear the cache
(<code>~/Library/Caches/rga</code> on macOS, <code>~/.cache/rga</code> on other Unixes,
or <code>C:\Users\username\AppData\Local\rga</code> on Windows)
to debug the adapters.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Nix and Direnv</h3><a id="user-content-nix-and-direnv" aria-label="Permalink: Nix and Direnv" href="#nix-and-direnv"></a></p>
<p dir="auto">You can use the provided <a href="https://github.com/phiresky/ripgrep-all/blob/master/flake.nix"><code>flake.nix</code></a> to setup all build- and
run-time dependencies:</p>
<ol dir="auto">
<li>Enable <a href="https://wiki.nixos.org/wiki/Flakes" rel="nofollow">Flakes</a> in your Nix configuration.</li>
<li>Add <a href="https://direnv.net/" rel="nofollow"><code>direnv</code></a> to your profile:
<code>nix profile install nixpkgs#direnv</code></li>
<li><code>cd</code> into the directory where you have cloned this directory.</li>
<li>Allow use of <a href="https://github.com/phiresky/ripgrep-all/blob/master/.envrc"><code>.envrc</code></a>: <code>direnv allow</code></li>
<li>After the dependencies have been installed, your shell will now have all of
the necessary development dependencies.</li>
</ol>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Centrality of Stupidity in Mathematics (219 pts)]]></title>
            <link>https://mathforlove.com/2024/09/the-centrality-of-stupidity-in-mathematics/</link>
            <guid>41566446</guid>
            <pubDate>Tue, 17 Sep 2024 11:15:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mathforlove.com/2024/09/the-centrality-of-stupidity-in-mathematics/">https://mathforlove.com/2024/09/the-centrality-of-stupidity-in-mathematics/</a>, See on <a href="https://news.ycombinator.com/item?id=41566446">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    
        
    <article id="post-19861">
    
    
    <div>
         <p><a href="https://journals.biologists.com/jcs/article/121/11/1771/30038/The-importance-of-stupidity-in-scientific-research"><em>The Importance of Stupidity in Scientific Research</em></a> – published in 2008 in the Journal of Cell Science – is one of those wonderful essays that turns your understanding of “being smart” on its head. There are enough implications for education here that it’s worth reading the entire thing.</p>
<blockquote><p>[W]e don’t do a good enough job of teaching our students<br>
how to be productively stupid – that is, if we don’t feel stupid it<br>
means we’re not really trying. —Martin Schwartz</p></blockquote>
<p><a href="https://mathforlove.com/wp-content/uploads/2024/09/Importance-of-being-stupid-in-research.jpg"><img fetchpriority="high" decoding="async" src="https://mathforlove.com/wp-content/uploads/2024/09/Importance-of-being-stupid-in-research-791x1024.jpg" alt="" width="791" height="1024" srcset="https://mathforlove.com/wp-content/uploads/2024/09/Importance-of-being-stupid-in-research-791x1024.jpg 791w, https://mathforlove.com/wp-content/uploads/2024/09/Importance-of-being-stupid-in-research-232x300.jpg 232w, https://mathforlove.com/wp-content/uploads/2024/09/Importance-of-being-stupid-in-research-768x994.jpg 768w, https://mathforlove.com/wp-content/uploads/2024/09/Importance-of-being-stupid-in-research-1187x1536.jpg 1187w, https://mathforlove.com/wp-content/uploads/2024/09/Importance-of-being-stupid-in-research-600x776.jpg 600w, https://mathforlove.com/wp-content/uploads/2024/09/Importance-of-being-stupid-in-research.jpg 1275w" sizes="(max-width: 791px) 100vw, 791px"></a>[Hat tip to @KevinDKohl for the share on twitter. The original article can be found<a href="https://journals.biologists.com/jcs/article/121/11/1771/30038/The-importance-of-stupidity-in-scientific-research"> here</a>.]</p>
<p>The idea of confronting one’s own stupidity and living with it productively – even joyfully! – feels even more central to me in mathematics than in science. The article touches on learning science, but it’s really about research. Stupidity is part of confronting the new, and being a capable science student means you might not have to face it that much when you’re merely absorbing the knowledge that previous scientists have already uncovered.</p>
<p>Math seems different to me. Everyone who learns math is familiar with the experience of being stuck on some new idea or problem, banging their head against it, and then, when they finally understand the answer (or having someone tell them), feeling stupid. There’s something fundamental in the nature of mathematics that makes it easy once you get it, and impossible before.</p>
<p>To wit: there’s an old joke where a professor is lecturing and remarks, “It’s obvious why this equation holds, of course.” A brave student raises her hand and says what everyone is thinking: “Could you please explain it? It doesn’t seem obvious.” The professor looks at the equation. “Isn’t it obvious?” He starts mumbling to himself. He starts to write on the white board, then stops. Finally he just stands there, looking at the board. Ten minutes pass. The students shift awkwardly and the seconds tick by. Suddenly the professor exclaims, “Aha! It <i>is</i> obvious!”</p>
<p>I’ve had numerous experiences in mathematics that left me feeling stupid. The one that made it clearest, I think, was taking real analysis in college. There’s a technical business with <i>epsilons</i> and <i>deltas</i>: one arbitrarily small value has to be smaller than another, thus proving that a function is continuous in a more rigorous way than high school calculus ever bothers to consider. It was arcane and baffling when I took the course. Six months later, it felt so simple that I couldn’t understand what my problem had been. Why had I been so stupid before, that this obvious mathematical idea had eluded me?</p>
<p>My personal theory about this (and this is untested, as far as I know) is that mathematics is somewhat unique in the way new learning develops in the mind. Piaget studied mathematical leaps in understanding in young children, and noticed that there are almost switches that flip at certain ages: before they’ve flipped, an idea is essentially impossible to understand; after, they’re obvious.</p>
<p>A classic example from Piaget is conservation of volume. (It’s worth checking out the video below if you’re not familiar with this one.) A child confirms two quantities of liquid are the same, sees one poured into a taller, thinner glass, and then says that the taller one has more water in it, <i>despite seeing it proved that the two have the same amount of liquid</i>.</p>
<p><iframe title="A typical child on Piaget's conservation tasks" width="500" height="375" src="https://www.youtube.com/embed/gnArvcWaH6I?start=78&amp;feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe></p>
<p>Is the boy stupid? No. None of us were, and we all went through this phase. At some age, none of us could see that the amount of liquid stays constant. But once you see it, it’s impossible not to see it. And it’s almost impossible to imagine how it wouldn’t be obvious to anyone.</p>
<p>I suspect that mathematical understanding requires similar mental leaps, no matter how long you study it. It’s almost as if we construct new highways in our mind. As long as the construction goes on, no cars drive on it, and our mind hits the same confusion again and again. Then one day, the new road opens, and we “get it.” Once the cars can drive from one side of our mind to the other, the new idea feels obvious. And more, you are so changed by the new perspective that <i>you can’t even understand your own prior lack of understanding</i>. I don’t know any other field of study that so regularly gives you this experience. And if you track topics in mathematics, you can see this happening again and again: with base 10, fractions, algebra, calculus… it’s all hard, until it suddenly feels easy.</p>
<p>These jumps in comprehension can be thrilling, and they’re one reason math is so fun. But they do create a challenge for the student. The evidence that you learned something hard is that you feel like you’re stupid. That stupidity is essential to the process, not of pushing at the boundaries of what is known, but simply of getting your mind to take in tools and ideas more abstract than it was ever meant to learn. Students need to know that this feeling is the norm when it comes to learning math.</p>
<p>The centrality of stupidity can be especially challenging for the teacher. Being in the position of understanding means that we are distanced from someone who doesn’t understand. It takes an act of remembering that borders on wholesale invention to get a sense of how someone couldn’t see what seems so obvious once you see it. What’s happening in their mind? If you couldn’t understand your own inability from a few weeks ago, how do you understand theirs?</p>
<p>I’ve come to believe that one of the best ways to address the centrality of stupidity is to take on two opposing efforts at once: you need to assure students that they are <i>not</i> stupid, while at the same time communicating that feeling like they are stupid is totally natural. The message isn’t that they <i>shouldn’t</i> be feeling stupid – that denies their honest feeling to learning the subject. The message is that <i>of course</i> they’re feeling stupid… that’s how everyone <i>has</i> to feel in order to learn math!</p>
<p>It’s all just another reason math is deviously difficult, and spectacularly wonderful to learn. Is there any other study that changes you so deeply, and so often?</p>

    </div>

</article><!-- #post-19861 -->

       
 

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Signatures of gravitational atoms from black hole mergers (103 pts)]]></title>
            <link>https://physics.aps.org/articles/v17/133</link>
            <guid>41566287</guid>
            <pubDate>Tue, 17 Sep 2024 10:45:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://physics.aps.org/articles/v17/133">https://physics.aps.org/articles/v17/133</a>, See on <a href="https://news.ycombinator.com/item?id=41566287">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><p><time>September 16, 2024</time>•  <i>Physics</i> 17, 133</p><p>Gravitational-wave signals from black hole mergers could reveal the presence of “gravitational atoms”—black holes surrounded by clouds of axions or other light bosons.</p><figure><div>
<p><a data-reveal-id="figure-modal-1" href="https://physics.aps.org/assets/ad46e3c2-c1eb-45dc-b92b-752f8c1c669c/e133_2.png"><img alt="Figure caption" src="https://physics.aps.org/assets/4d93511f-2145-426b-ae20-b0fc6c110a27/e133_2_medium.png"></a><img alt="expand figure" src="https://cdn.journals.aps.org/development/physics/images/icon-expand.svg">
</p>
<p>G. M. Tomaselli and G. Bertone/University of Amsterdam; T. F. M. Spieksma/Niels Bohr Institute</p>
</div>
<figcaption><a data-reveal-id="figure-modal-1" href="https://physics.aps.org/assets/ad46e3c2-c1eb-45dc-b92b-752f8c1c669c/e133_2.png"><b>Figure 1:</b></a> A depiction of an astrophysical object orbiting a central black hole with a dipolar cloud, “a gravitational atom.” The cloud represents a dipolar state around the black hole, with the color gradient corresponding to the cloud’s energy density.</figcaption></figure>
<p id="d5e117">Subrahmanyan Chandrasekhar famously stated that black holes are “the most perfect macroscopic objects there are in the Universe: The only elements in their construction are our concepts of space and time.” His observation relates to the fact that astrophysical black holes, as described by the Kerr spacetime, can be characterized by just two parameters: mass and spin. However, things might get more complex. Theorists have predicted that if a bosonic field interacts with a Kerr black hole, perturbations in the field can grow to form a cloud around the black hole, creating a “gravitational atom,” in which the bosons surrounding the black hole behave somewhat like the electrons surrounding an atomic nucleus [<a href="#c1" data-ref-target="c1">1</a>] (Fig.  <a href="#f1" data-ref-target="f1">1</a>). What’s more, if such a gravitational atom is part of a binary involving a second black hole, excitations and ionization processes akin to those occurring in hydrogen atoms may affect how the black hole binary evolves. Now Giovanni Tomaselli of the University of Amsterdam and two collaborators have explored the various evolutionary paths such binaries can follow [<a href="#c2" data-ref-target="c2">2</a>, <a href="#c3" data-ref-target="c3">3</a>]. Considering a general set of black hole orbital motions—including those with eccentricity and inclination—the trio has pinpointed potentially detectable features of gravitational atoms in binaries.</p>
<p id="d5e131">How the lives of black hole binaries in a vacuum play out is a tale that has been told in many different scenarios since the seminal work of Philip Peters in the 1960s [<a href="#c4" data-ref-target="c4">4</a>]. As the binary evolves, the loss of energy and angular momentum carried away by gravitational waves slowly shrinks the binary’s orbit. If the binary is initially in a highly eccentric state, gravitational waves will also efficiently circularize the orbital motion. Therefore, we expect to find vacuum binaries at the end of their lives in a quasicircular motion. The main assumption behind this expectation is that binaries evolve adiabatically through a sequence of quasistationary states. This process unfolds through a balance of conserved quantities. That’s because the sum of the energy and angular momentum possessed by the binary and radiated by the gravitational waves should remain constant throughout the binary’s evolution.</p>
<p id="d5e136">But a rotating black hole need not be in a vacuum. It could conceivably be surrounded by a cloud of bosons. This cloud will grow via the so-called superradiant instability, which amplifies small field perturbations by stealing rotational energy from the black hole and using such energy to power the expansion of the cloud. In their investigation, Tomaselli and his collaborators focused on black holes embedded within a cloud of bosons whose masses lie in the range 10<sup>–20</sup>–10<sup>–10</sup>eV. These so-called ultralight bosons arise from several extensions of the standard model of particle physics and include axions that are being considered as dark matter candidates.</p>
<p id="d5e144">If a black hole in a binary has such a cloud—that is, if the black hole is a gravitational atom—the binary’s orbital motion could excite cloud states, causing transitions between energy levels or even “ionizing” the atom [<a href="#c5" data-ref-target="c5">5</a>–<a href="#c7" data-ref-target="c7">7</a>]. The term “gravitational atom” is not a stretch. The cloud’s evolution is described by the Schrödinger equation and the energy levels are hydrogen-like in the nonrelativistic limit. Fully grasping the impact of gravitational atoms on binary evolution is an intricate problem even in the simplest possible scenario. Tomaselli and his collaborators dissected the life histories of gravitational atoms for orbits that have arbitrary eccentricities and arbitrary inclinations of the black hole spin with respect to the orbital plane. They also elucidated many complicated features, such as the occurrence of resonant atom-like transitions and the sudden cessation of transitions between states due to the breakdown of orbital resonances. They characterized some of these features analytically, providing ready-to-use formulas for others.</p>
<p id="d5e152"> Two other features the researchers considered are floating and sinking orbits. As a binary evolves, it can enter a resonant state in which the orbital evolution is slowed down because of the transfer of angular momentum between the cloud and the binary. This so-called floating enables the binary to remain longer in a resonant state, which can end the cloud’s existence by depleting it of particles. Sinking orbits, on the other hand, are those that evolve faster such that the orbital motion gives the cloud a chance to survive, as the short time between transitions might not be enough to deplete the cloud. Floating and sinking orbits—together with ionization and the many possible types of resonances (hyperfine, fine, and Bohr)—should be accounted for in order to properly describe the evolution of such atomic binaries.</p>
<figure><div>
<p><a data-reveal-id="figure-modal-2" href="https://physics.aps.org/assets/4b7e5c7f-40ee-4687-8453-18e6d9edbe1d/e133_3.png"><img alt="Figure caption" src="https://physics.aps.org/assets/723a4116-8337-426a-8209-2ccefdc50f1d/e133_3_medium.png"></a><img alt="expand figure" src="https://cdn.journals.aps.org/development/physics/images/icon-expand.svg">
</p>
<p>G. M. Tomaselli <i>et al.</i> [<a href="#c3">3</a>]; adapted by APS/Carin Cain</p>
</div>
<figcaption><a data-reveal-id="figure-modal-2" href="https://physics.aps.org/assets/4b7e5c7f-40ee-4687-8453-18e6d9edbe1d/e133_3.png"><b>Figure 2:</b></a> The evolution of gravitational binaries in the eccentricity–inclination plane, as calculated by Tomaselli and his collaborators under the assumption that the system is on a floating orbit. Two different binary mass ratios are depicted.</figcaption></figure>
<p id="d5e173">The results derived by Tomaselli and his collaborators enrich the usual picture of vacuum binary evolution in various ways. They show that, even though in most scenarios the cloud easily fades away through a floating resonant process, it leaves a legacy: The binary remains eccentric, and both eccentricity and inclination angle change continuously in a way that depends on the initial state of the system (Fig.  <a href="#f2" data-ref-target="f2">2</a>). This outcome is in clear contrast with the simpler picture of a binary in vacuum, where circularization should be more efficient. This type of evolution leaves an interesting prospect: The presence of the bosons—and possibly the identification of their nature—could be inferred from the orbital parameters of binary populations. Another possibility, also explored by Tomaselli and his collaborators, has the cloud surviving for certain inclination angles of the binary, corresponding to nearly counter-rotating black holes. In such cases, the gravitational atom evolves to a state with sinking orbits. According to Tomaselli and his collaborators, these sinking-orbit binaries can retain their cloud in the inspiral phase, when the gravitational signals produced by the black holes enter the detection window of the Laser Interferometer Space Antenna (LISA) and other future gravitational-wave detectors. These conclusions are corroborated by the findings independently obtained by a team at the German Electron Synchrotron DESY and Hamburg University, Germany [<a href="#c8" data-ref-target="c8">8</a>].</p>
<p id="d5e181">Further work should scrutinize the assumptions of the picture presented by Tomaselli and his collaborators. For instance, the simplifying assumption of adiabatic evolution through a progression of orbits amounts to a bold hypothesis that should be taken with care, as different parts of the orbits might experience different physical effects. Additionally, relativistic corrections might be important to forecast the lives of binaries with gravitational atoms, which was only recently explored in the quasicircular case [<a href="#c9" data-ref-target="c9">9</a>, <a href="#c10" data-ref-target="c10">10</a>]. Nonetheless, the new work provides powerful guidance in the search for smoking-gun features of binary systems with gravitational atoms.</p><section><h2>References</h2><ol><li id="c1"><span>S. Detweiler, “Klein-Gordon equation and rotating black holes,” <a href="http://dx.doi.org/10.1103/PhysRevD.22.2323"><span>Phys. Rev. D</span> <b>22</b>, 2323 (1980)</a>.</span></li><li id="c2"><span>G. M. Tomaselli <i>et al.</i>, “Legacy of boson clouds on black hole binaries,” <a href="http://dx.doi.org/10.1103/PhysRevLett.133.121402"><span>Phys. Rev. Lett.</span> <b>133</b>, 121402 (2024)</a>.</span></li><li id="c3"><span>G. M. Tomaselli <i>et al.</i>, “Resonant history of gravitational atoms in black hole binaries,” <a href="http://dx.doi.org/10.1103/PhysRevD.110.064048"><span>Phys. Rev. D</span> <b>110</b>, 064048 (2024)</a>.</span></li><li id="c4"><span>P. C. Peters, “Gravitational radiation and the motion of two point masses,” <a href="http://dx.doi.org/10.1103/PhysRev.136.B1224"><span>Phys. Rev.</span> <b>136</b>, B1224 (1964)</a>.</span></li><li id="c5"><span>D. Baumann <i>et al.</i>, “Probing ultralight bosons with binary black holes,” <a href="http://dx.doi.org/10.1103/PhysRevD.99.044001"><span>Phys. Rev. D</span> <b>99</b>, 044001 (2019)</a>.</span></li><li id="c6"><span>D. Baumann <i>et al.</i>, “Gravitational collider physics,” <a href="http://dx.doi.org/10.1103/PhysRevD.101.083019"><span>Phys. Rev. D</span> <b>101</b>, 083019 (2020)</a>.</span></li><li id="c7"><span>D. Baumann <i>et al.</i>, “Sharp signals of boson clouds in black hole binary inspirals,” <a href="http://dx.doi.org/10.1103/PhysRevLett.128.221102"><span>Phys. Rev. Lett.</span> <b>128</b>, 221102 (2022)</a>.</span></li><li id="c8"><span>M. Bošković <i>et al.</i>, “Signatures of ultralight bosons in the orbital eccentricity of binary black holes,” <a href="http://dx.doi.org/10.1103/PhysRevLett.133.121401"><span>Phys. Rev. Lett.</span> <b>133</b>, 121401 (2024)</a>.</span></li><li id="c9"><span>F. Duque <i>et al.</i>, “Axion weak leaks: Extreme mass-ratio inspirals in ultra-light dark matter,” Phys. Rev. Lett. (to be published) <a href="http://arxiv.org/abs/2312.06767">arXiv:2312.06767</a>.</span></li><li id="c10"><span>R. Brito and S. Shah, “Extreme mass-ratio inspirals into black holes surrounded by scalar clouds,” <a href="http://dx.doi.org/10.1103/PhysRevD.108.084019"><span>Phys. Rev. D</span> <b>108</b>, 084019 (2023)</a>.</span></li></ol></section><section><h2>About the Author</h2><div><p><img alt="Image of Caio F. B. Macedo" src="https://physics.aps.org/assets/3794c8ae-6112-4247-94ae-b9375ddf19e7" width="125"></p><p>Caio F. B. Macedo is an adjunct professor of physics at the Federal University of Pará in Brazil. After receiving his PhD in physics at the same university in 2015, he held a postdoctoral position at the Instituto Superior Técnico in Portugal. His research is focused on compact objects and fundamental fields, centered in perturbation theory.</p></div></section><hr><section><h2>Subject Areas</h2></section><section><h2>Related Articles</h2><section><p><a href="https://physics.aps.org/articles/v17/s98"><img alt="The Solar System as a Black Hole Detector" src="https://physics.aps.org/assets/10.1103/Physics.17.s98/figure/1/large"></a></p></section><section><p><a href="https://physics.aps.org/articles/v17/s101"><img alt="Dark Matter Search in Gravitational-Wave Data" src="https://physics.aps.org/assets/10.1103/Physics.17.s101/figure/1/large"></a></p></section><section><p><a href="https://physics.aps.org/articles/v17/s99"><img alt="Gamma-Ray Burst Tightens Constraints on Quantum Gravity" src="https://physics.aps.org/assets/10.1103/Physics.17.s99/figure/1/large"></a></p></section><a href="https://physics.aps.org/browse"> More Articles</a></section></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[47-year-old Voyager 1 fired up thrusters it hasn't used in decades (157 pts)]]></title>
            <link>https://www.cnn.com/2024/09/16/science/voyager-1-thruster-issue/index.html</link>
            <guid>41564009</guid>
            <pubDate>Tue, 17 Sep 2024 04:08:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cnn.com/2024/09/16/science/voyager-1-thruster-issue/index.html">https://www.cnn.com/2024/09/16/science/voyager-1-thruster-issue/index.html</a>, See on <a href="https://news.ycombinator.com/item?id=41564009">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-uri="cms.cnn.com/_components/video-resource/instances/cm15hvwus0013356kv39tulky@published" data-component-name="video-resource" data-editable="lede" data-fixed-ratio="16x9" data-parent-uri="cms.cnn.com/_components/video-resource/instances/h_a8638e760133be6802be607a37acc1d1@published" data-video-id="business/2023/05/09/nasa-voyager-power-suzanne-dodd-linda-spilker-scn-contd-mc-gr-orig.cnn-business" data-media-id="me1447a3c55d8799f3de1f3355eb1d61fa21ac45b7" data-live="" data-analytics-aggregate-events="true" data-custom-experience="" data-asset-type="hlsTs" data-auth-type="none" data-content-type="mediasource-clip" data-medium-env="prod" data-autostart="disabled" data-show-ads="true" data-source="CNN Business" data-featured-video="true" data-headline="How NASA keeps its 47-year-old Voyager spacecraft going" data-has-video-player="true" data-description="At NASA's Jet Propulsion Laboratory, Voyager project manager Suzanne Dodd and project scientist Linda Spilker share the steps they're taking to ensure that the Voyager spacecraft can keep sending new data back to Earth for as long as possible." data-duration="02:14" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
                <a href=&quot;http://www.cnn.com/business/&quot; class=&quot;video-resource__source-url&quot;>CNN Business</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/171202144108-03-voyager-spacecraft-concept-art.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/171202144108-03-voyager-spacecraft-concept-art.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="false" data-show-html="<!-- unable to render partial show without a supplied context -->" data-byline-html="<div data-uri=&quot;cms.cnn.com/_components/byline/instances/byline_h_a8638e760133be6802be607a37acc1d1-video-resource@published&quot; class=&quot;byline&quot; data-editable=&quot;settings&quot;>
		<div class=&quot;byline__images&quot;>
		</div>
		<div class=&quot;byline__names&quot;>
			<span class=&quot;byline__name&quot;>Faye Chiu</span>
		</div>
</div>" data-timestamp-html="<div
  class=&quot;timestamp vossi-timestamp-primary-core-light&quot;
  data-uri=&quot;cms.cnn.com/_components/timestamp/instances/cm15hvx4u0015356kfb2a6zl8@published&quot;
  data-editable=&quot;settings&quot;
>
  Updated
        6:17 PM EDT, Mon September 16, 2024
    </div>" data-check-event-based-preview="" data-is-vertical-video-embed="false" data-network-id="" data-publish-date="2023-05-09T21:08:48Z" data-video-section="business" data-canonical-url="https://www.cnn.com/videos/business/2023/05/09/nasa-voyager-power-suzanne-dodd-linda-spilker-scn-contd-mc-gr-orig.cnn-business" data-branding-key="" data-video-slug="nasa-voyager-power-suzanne-dodd-linda-spilker-scn-contd-mc-gr-orig" data-first-publish-slug="nasa-voyager-power-suzanne-dodd-linda-spilker-scn-contd-mc-gr-orig" data-video-tags="aviation and aerospace industry,business and industry sectors,business, economy and trade,companies,domestic alerts,domestic-health and science,government organizations - us,iab-aviation industry,iab-business and finance,iab-industries,iab-science,iab-space and astronomy,international alerts,international-health and science,jet propulsion laboratory,nasa,space and astronomy,space industry,spacecraft and satellites,us federal departments and agencies,us government independent agencies" data-details="" data-freewheel-lede="true">

                    


<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/video-player/instances/h_a8638e760133be6802be607a37acc1d1@published" data-name="03 voyager spacecraft concept art" data-component-name="video-player" data-observe-resizes="" data-original-ratio="0.5626666666666666" data-original-height="1688" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/171202144108-03-voyager-spacecraft-concept-art.jpg?c=original" data-unselectable="true" id="player-cms.cnn.com/_components/video-player/instances/h_a8638e760133be6802be607a37acc1d1@published" data-title="" data-show-ads="true" data-is-vertical-video-embed="false" data-custom-experience="" data-autostart="disabled" data-is-vertical-video="false" data-fixed-ratio="16x9" data-headline="How NASA keeps its 47-year-old Voyager spacecraft going" data-auth-type="none" data-video-resource-parent-uri="cms.cnn.com/_components/video-resource/instances/h_a8638e760133be6802be607a37acc1d1@published" data-live="" data-content-type="mediasource-clip" data-video-resource-uri="cms.cnn.com/_components/video-resource/instances/cm15hvwus0013356kv39tulky@published" data-poster-image-override="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/171202144108-03-voyager-spacecraft-concept-art.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/171202144108-03-voyager-spacecraft-concept-art.jpg?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-video-id="business/2023/05/09/nasa-voyager-power-suzanne-dodd-linda-spilker-scn-contd-mc-gr-orig.cnn-business" data-media-id="me1447a3c55d8799f3de1f3355eb1d61fa21ac45b7" data-duration="02:14" data-description="At NASA's Jet Propulsion Laboratory, Voyager project manager Suzanne Dodd and project scientist Linda Spilker share the steps they're taking to ensure that the Voyager spacecraft can keep sending new data back to Earth for as long as possible." data-check-event-based-preview="" data-network-id="" data-publish-date="2023-05-09T21:08:48Z" data-video-section="business" data-canonical-url="https://www.cnn.com/videos/business/2023/05/09/nasa-voyager-power-suzanne-dodd-linda-spilker-scn-contd-mc-gr-orig.cnn-business" data-branding-key="" data-video-slug="nasa-voyager-power-suzanne-dodd-linda-spilker-scn-contd-mc-gr-orig" data-first-publish-slug="nasa-voyager-power-suzanne-dodd-linda-spilker-scn-contd-mc-gr-orig" data-video-tags="aviation and aerospace industry,business and industry sectors,business, economy and trade,companies,domestic alerts,domestic-health and science,government organizations - us,iab-aviation industry,iab-business and finance,iab-industries,iab-science,iab-space and astronomy,international alerts,international-health and science,jet propulsion laboratory,nasa,space and astronomy,space industry,spacecraft and satellites,us federal departments and agencies,us government independent agencies">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/171202144108-03-voyager-spacecraft-concept-art.jpg?c=16x9&amp;q=w_1280,c_fill" alt="03 voyager spacecraft concept art" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1688" width="3000"></picture>
    </div>

                    
                <div>
                    <p>How NASA keeps its 47-year-old Voyager spacecraft going
                </p>
                    
                </div>
</div><div data-editable="content" itemprop="articleBody" data-reorderable="content">
                  
<p data-uri="cms.cnn.com/_components/editor-note/instances/cm15hsq4e0003356ka3c288nm@published" data-editable="text" data-component-name="editor-note" data-article-gutter="true">
    <em>Sign up for CNN’s Wonder Theory science newsletter.&nbsp;</em><a href="https://www.cnn.com/newsletters/wonder-theory?source=nl-acq_article"><em>Explore the universe with news on fascinating discoveries, scientific advancements and more</em></a>.
</p>

  <p><cite>
      <span data-editable="location"></span>
      <span data-editable="source">CNN</span>
        &nbsp;—&nbsp;
    </cite>
</p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hsax9000m64qrbj9r6kgz@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Engineers at NASA have successfully fired up a set of thrusters Voyager 1 hasn’t used in decades to solve an issue that could keep the 47-year-old spacecraft from communicating with Earth from billions of miles away.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000d356kk0lnlkhk@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            When Voyager 1 lifted off to space on September 5, 1977, no one expected that the probe would still be operating today.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000e356kk0xumxdq@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            As a result of its exceptionally long-lived mission, Voyager 1 experiences issues as its parts age in the frigid outer reaches beyond our solar system. When an issue crops up, engineers at NASA’s Jet Propulsion Laboratory in Pasadena, California, have to get creative while still being careful of how the spacecraft will react to any changes.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000f356k61svp3tj@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Currently the farthest spacecraft from Earth, Voyager 1 is about 15 billion miles (24 billion kilometers) away. The probe operates beyond the heliosphere — the sun’s bubble of magnetic fields and particles that extends well beyond Pluto’s orbit — where its instruments directly sample interstellar space.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000g356klwq3x0nl@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Earlier this year, engineers spotted an issue when the fuel tube inside one of Voyager’s thrusters became clogged. If the thrusters are clogged, they can’t generate as much force to keep the spacecraft steady. Voyager’s thrusters keep the spacecraft oriented in a way that it can communicate with Earth.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000h356k8egheh00@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            If Voyager 1 isn’t positioned in such a way so that its antenna is pointed at Earth, the spacecraft can’t “hear” commands from mission control or send back data, according to Calla Cofield, media relations specialist at JPL.
    </p>

    <div data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000i356knlff36yb@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true"><p>
            “If the thrusters that keep the antenna pointed at Earth get clogged, that would be end of mission,” she said.</p><p>  The team realized it would have to send commands to the spacecraft to switch to another set of thrusters, but the fix wouldn’t be a simple one.
    </p></div>

<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300}" data-uri="cms.cnn.com/_components/image/instances/cm15hwy8u001d356kn7bwroa1@published" data-name="jpegPIA17462.jpg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5627027027027027" data-original-height="1041" data-original-width="1850" data-url="https://media.cnn.com/api/v1/images/stellar/prod/jpegpia17462.jpg?c=original" data-editable="settings">
       <picture><source height="1041" width="1850" media="(min-width: 1280px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/jpegpia17462.jpg?q=w_1110,c_fill/f_webp" type="image/webp"><source height="1041" width="1850" media="(min-width: 960px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/jpegpia17462.jpg?q=w_1015,c_fill/f_webp" type="image/webp"><source height="1041" width="1850" media="(min-width: 480px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/jpegpia17462.jpg?q=w_1160,c_fill/f_webp" type="image/webp"><source height="1041" width="1850" media="(max-width: 479px)" srcset="https://media.cnn.com/api/v1/images/stellar/prod/jpegpia17462.jpg?q=w_680,c_fill/f_webp" type="image/webp"><img src="https://media.cnn.com/api/v1/images/stellar/prod/jpegpia17462.jpg?q=w_1110,c_fill" alt="An artist's concept depicts NASA's Voyager 1 spacecraft entering interstellar space, or the space between stars." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1041" width="1850" loading="lazy"></picture>
    </div>

  

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000j356kvmnmlsui@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            It’s not the first time Voyager 1 has needed to switch over to another set of thrusters in recent decades. Fortunately, the spacecraft has three sets of thrusters: two sets of attitude propulsion thrusters and one set devoted to trajectory correction maneuvers.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000k356k2ihwj82m@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Voyager 1 used the thrusters for a variety of purposes as it flew by planets such as Jupiter and Saturn in 1979 and 1980, respectively.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000l356kilhsekhc@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Now, the spacecraft is traveling on an unchanging path away from our solar system, so it just requires one set of thrusters to help keep its antenna pointed at Earth. To fuel the thrusters, liquid hydrazine is converted into gas and released in about 40 short puffs per day to keep Voyager 1 oriented correctly.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000m356kp8f1xm22@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Over time, engineers discovered that a fuel tube inside the thrusters can become clogged with silicon dioxide, a byproduct of the fuel tank’s rubber diaphragm aging. As the thrusters become clogged, they generate less force.
    </p>

  


    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000n356k826xmu5q@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            In 2002, the team commanded Voyager 1 to switch to its second set of attitude propulsion thrusters when the first set showed signs of clogging. Engineers switched again to the trajectory correction thruster set in 2018 when the second set also appeared clogged.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000o356koea4hpa8@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            But when the team recently checked on the status of Voyager’s trajectory correction thrusters, they were even more clogged than the previous two sets of thrusters.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000p356k0jccl6ql@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            When the team initially switched Voyager over to the trajectory correction thrusters six years ago, the tube opening was 0.01 inches (0.25 millimeters) across. But now, clogging has reduced it to 0.0015 inches (0.035 millimeters) — half the width of a human hair, according to NASA.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000q356ks4r6q5j7@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            It was time to rotate back to another set of attitude propulsion thrusters.
    </p>

  

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000r356k86e0x3zs@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            As Voyager 1 and its twin probe, Voyager 2, have aged, the mission team has slowly turned off nonessential systems on both spacecraft to conserve power, including heaters. As a result, components on Voyager 1 are colder now, and the team knew it couldn’t just send a command to Voyager 1 to switch immediately to one of the attitude propulsion thrusters without doing something to warm them up.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000s356kqzxsz9pb@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            But Voyager 1 doesn’t have enough power to switch any heaters back on without turning something else off, and its scientific instruments are too valuable to shut off in case they don’t come back on, the team said.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000t356ka4b80mki@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            After going back to the drawing board, the team realized it could shut off one of the spacecraft’s main heaters for about an hour, which would enable engineers to turn on the thruster heaters and safely make the switch.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000u356k0gxerimf@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            This plan worked, and by August 27, Voyager 1 was back to relying on one of its original thruster sets to stay in touch with Earth.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000v356kf29yd0b2@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The team has taken steps to use the thrusters less, and it is expecting to get another two to three years out of the original set, said Todd Barber, Voyager propulsion engineer.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000w356ks4pq4lsm@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Once the spacecraft has exhausted this thruster set, Voyager 1’s remaining option is the other already clogged set of attitude propulsion thrusters.
    </p>

  


    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000x356kdjkofmgu@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            “All the decisions we will have to make going forward are going to require a lot more analysis and caution than they once did,” said Suzanne Dodd, Voyager’s project manager, in a statement.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000y356k31p1ashf@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Voyager 2 has also gone through thruster swaps in 1999 and 2019, and “the situation there is less dire,” Barber said. Voyager 2 has traveled more than 12 billion miles (20 billion kilometers) from Earth.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cm15hvs9u000z356kv9p2adm5@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The information collected by these long-lived probes is helping scientists learn about the cometlike shape of the heliosphere and how it protects Earth from energized particles and radiation in interstellar space.
    </p>

              </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Fixing an Elgato HD60 S HDMI capture device with the help of Ghidra (473 pts)]]></title>
            <link>https://www.downtowndougbrown.com/2024/09/fixing-an-elgato-hd60-s-hdmi-capture-device-with-the-help-of-ghidra/</link>
            <guid>41564003</guid>
            <pubDate>Tue, 17 Sep 2024 04:06:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.downtowndougbrown.com/2024/09/fixing-an-elgato-hd60-s-hdmi-capture-device-with-the-help-of-ghidra/">https://www.downtowndougbrown.com/2024/09/fixing-an-elgato-hd60-s-hdmi-capture-device-with-the-help-of-ghidra/</a>, See on <a href="https://news.ycombinator.com/item?id=41564003">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
				
<p>This post has a little bit of everything. Hardware diagnostics, some suspiciously similar datasheets from two separate Taiwan chip manufacturers, and firmware reverse engineering. Read on if that sounds like fun!</p>



<p>Lately, I’ve been enjoying watching random electronics repair channels on YouTube. There’s something oddly satisfying about watching someone take a broken device from totally nonfunctional to perfectly working, all by replacing a $0.05 capacitor that has failed shorted or maybe a blown $0.75 IC. Two of my favorite channels about this topic are <a href="https://www.youtube.com/@BuyitFixit" data-type="link" data-id="https://www.youtube.com/@BuyitFixit" target="_blank" rel="noreferrer noopener">Buy it Fix it</a> and <a href="https://www.youtube.com/@StezStixFix" data-type="link" data-id="https://www.youtube.com/@StezStixFix" target="_blank" rel="noreferrer noopener">StezStix Fix?</a>.</p>



<p>The videos inspired me. I thought, “I should totally try this!” So I went on eBay and looked for broken devices. I have a pretty decent understanding of how video encoders and decoders work, so I thought it would be a fun project to try to fix an HDMI capture card. I found a broken Elgato Game Capture HD60 S USB 3.0 device. The listing said that nothing happened when you plugged it in.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hd60s.jpg" target="_blank" rel="noreferrer noopener"><img fetchpriority="high" decoding="async" width="1024" height="680" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hd60s.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hd60s.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hd60s-300x199.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hd60s-768x510.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>When it arrived, I was able to verify exactly what the listing said. Nothing showed up on my computer when I plugged it in. I cracked it open and had a look at what was happening internally when it powered up. I started by poking around at voltages on the board with it plugged in, and it was pretty obvious that something was dragging the power rails down. Little did I know at that point what I was getting myself into.</p>



<p>Honestly I could tell what was getting hot just by feeling around with my finger, but this was a good excuse to use my thermal camera to take some fun pictures.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot1.jpg" target="_blank" rel="noreferrer noopener"><img decoding="async" width="240" height="320" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot1.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot1.jpg 240w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot1-225x300.jpg 225w" sizes="(max-width: 240px) 100vw, 240px"></a></figure>



<p>In this one, the red cursor indicating the hottest point in the image is pointing to a small chip in the upper-left corner of the board marked “fiVJVE”.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE.jpg" target="_blank" rel="noreferrer noopener"><img decoding="async" width="300" height="243" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE-300x243.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE-300x243.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE-1024x830.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE-768x623.jpg 768w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE.jpg 1332w" sizes="(max-width: 300px) 100vw, 300px"></a></figure>



<p>This was pretty clearly some kind of a switching regulator, which I concluded due to its proximity to the “2R2” inductor (meaning 2.2 uH). Measuring the pins, I could see 5V going in, but obviously something was wrong because the voltage at the inductor (the output) was far too low.</p>



<p>There was also another fiVJVE chip on the board, with a pretty much identical circuit next to another 2.2 uH inductor. The circuit was missing a component, but I was pretty sure it was normal because the solder blobs looked like they came that way from the factory. It wasn’t getting hot, but it was also putting out a low voltage so I suspected something was wrong with it too:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE2.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="300" height="219" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE2-300x219.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE2-300x219.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE2-1024x747.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE2-768x560.jpg 768w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/fiVJVE2.jpg 1238w" sizes="(max-width: 300px) 100vw, 300px"></a></figure>



<p>In the heat image above you can see another area on the board (near the bottom) that was also getting hot. It turns out it was actually originating from the other side:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot2.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="240" height="320" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot2.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot2.jpg 240w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot2-225x300.jpg 225w" sizes="(max-width: 240px) 100vw, 240px"></a></figure>



<p>Yeah, that’s my finger in the picture. It helped adjust the levels in the image so the chip that’s getting hot is easier to pinpoint. This chip was labeled PFNI:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/PFNI.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="300" height="216" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/PFNI-300x216.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/PFNI-300x216.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/PFNI-768x554.jpg 768w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/PFNI.jpg 975w" sizes="(max-width: 300px) 100vw, 300px"></a></figure>



<p>OK, so what could I do with this information? I found two chips that were getting hot, and another chip that likely wasn’t putting out its correct voltage. I started out by trying to identify what they were. Small chips with markings like this can be quite difficult to figure out. Luckily, there are a few SMD marking code search engines out there. Searching <a href="https://smd.yooneed.one/" target="_blank" rel="noreferrer noopener">smd.yooneed.one</a> for fiVJ didn’t result in any exact matches, but it did point out that the code “fi” went with the Fitipower FP6121-IS9P. This led me to <a href="https://www.fitipower.com/en" target="_blank" rel="noreferrer noopener">Fitipower’s website</a>, where I saw they had a bunch of different chips. Using Google’s help I was eventually able to narrow it down to being the FP6373A.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="725" height="315" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image.png 725w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-300x130.png 300w" sizes="(max-width: 725px) 100vw, 725px"></a></figure>



<p>The pinout made sense on the board, and the fiV marking also matched. Yay! Now I had an idea what I was looking for. The PFNI chip ended up being even easier to identify. Google led me straight to the <a href="https://www.ti.com/product/TPS60403" target="_blank" rel="noreferrer noopener">TI TPS60403DBV voltage inverter</a>:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-1.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="678" height="331" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-1.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-1.png 678w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-1-300x146.png 300w" sizes="(max-width: 678px) 100vw, 678px"></a></figure>



<p>One thing in common with all of these chips is they were all taking in 5V for their input and I was measuring that their outputs all had a pretty low resistance to ground. I started wondering if maybe someone fried this device by somehow putting more than 5V into it. How they did that, I have no idea.</p>



<p>I wasn’t sure why the other FP6373A regulator wasn’t getting hot. It wasn’t putting out much voltage and nothing else was getting hot on the board, so I decided to try injecting voltage on its output power rail instead to see where the low resistance was coming from. I could deduce its correct output voltage because it was going to a Winbond W25Q32JVSSIQ SPI flash chip rated for 2.7 to 3.6V. I was pretty sure it was on a 3.3V rail. I soldered wires to the regulator’s output and ground and used my bench power supply to inject 2.7V into the circuit with a small controlled current that I could slowly turn up. The idea was that I could find what was getting hot on the board and determine what to blame for this power rail being bad.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/powerinjection.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="549" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/powerinjection.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/powerinjection.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/powerinjection-300x161.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/powerinjection-768x412.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>This process pretty quickly revealed the FP6373A itself as the root problem.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot3.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="240" height="320" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot3.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot3.jpg 240w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/hot3-225x300.jpg 225w" sizes="(max-width: 240px) 100vw, 240px"></a></figure>



<p>I think maybe during normal operation when it was being supplied with 5V, it was putting itself into some kind of safety shutdown mode and killing its output power rail. The datasheet does mention overcurrent and overtemperature shutdown capability. When I injected voltage directly, the regulator couldn’t shut off the power rail so it had no choice but to get hot and announce “hey, I’m the problem!” through my thermal camera.</p>



<p>This was actually great. I wasn’t totally confident about whether the TI chip was to blame rather than something downstream of it, but since two other chips on the 5V rail were also fried, I thought a good first step would be to replace all three of them and see what would happen. Unfortunately the FP6373A isn’t available at the usual US distributors, but I was able to find it for sale on <a href="https://www.lcsc.com/" target="_blank" rel="noreferrer noopener">LCSC</a> at $0.17 a pop, and the TI chip was conveniently also available there for $0.58. Would it really be this easy? Just replace three chips totaling less than a dollar in value, even in quantities of 1? The shipping and handling was orders of magnitude more expensive than just the parts themselves!</p>



<p>After the parts arrived from China, I was able to successfully replace them. I’m always paranoid about upsetting nearby resistors and capacitors when I’m using hot air, so I like to use Kapton tape to shield everything else.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/removal.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="619" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/removal-1024x619.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/removal-1024x619.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/removal-300x181.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/removal-768x465.jpg 768w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/removal.jpg 1339w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>The process of soldering in the new chips was mostly easy, but the ground pins did soak up quite a bit of heat. I think this PCB design doesn’t have great thermal relief on the grounds. I did accidentally lift a pad for one of the regulators, but it wasn’t connected to anything (the “PG” signal) so there was no harm done. The fact that it wasn’t connected to anything was exactly why it was so easy to lift it. Also, the heat that the ground pin was eating up misled me into thinking I could use the same heat on the other pins.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldered.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="643" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldered.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldered.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldered-300x188.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldered-768x482.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>In addition to my lifted pad (middle pin on the right), you can see here how much trouble I had soldering the ground pin (middle pin on the left). It really didn’t want to heat up. I probably could have heated the whole board to help my soldering iron out, but hey, it’s connected.</p>



<p>Anyway, after replacing all three chips, it worked! None of the new chips were getting hot, the HD60 S showed up as a USB device when plugged in, and it worked perfectly for capturing and passing through an HDMI signal. I was pretty excited to successfully fix it, but there was still a problem: none of the indicator lights worked. There are seven white LEDs and seven red LEDs, and they are supposed to <a href="https://help.elgato.com/hc/en-us/articles/360058716852-Elgato-Game-Capture-HD60-S-Status-Lights-LEDs" target="_blank" rel="noreferrer noopener">do various things to tell you what’s going on</a>. The white lights are supposed to blink twice when you first plug it in, for example.</p>



<p>This was a little deflating. I had kind of fixed it, but not really. Now what?</p>



<p>Back to the drawing board. I looked closer at the PCB to understand how the LEDs work. The relevant chip is the IT1504, made by <a href="https://www.innochip.com.tw/" target="_blank" rel="noreferrer noopener">Innochip</a>. Looking further at <a href="http://www.innochip.com.tw/datasheet/IT1504.pdf" target="_blank" rel="noreferrer noopener">its datasheet</a>, it is a 16-channel LED driver chip. You talk to it with a serial data interface that appears to be very similar to SPI. It turns out a lot of LED driver chips from many manufacturers such as Toshiba and ST also use this same communication scheme. At first I though it was odd, but it seems pretty standard. It’s a variant of SPI where you send a particular number of clock pulses to choose which command you want to perform.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504probe.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="556" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504probe.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504probe.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504probe-300x163.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504probe-768x417.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>I monitored the relevant data input pins on the IT1504 using my oscilloscope, and I could definitely see some traffic being sent to it. By the way, I followed the traces and discovered that the IT1504 is being controlled by a Nuvoton M031LD2AE microcontroller, which is an ARM Cortex-M0.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nuvoton.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="300" height="300" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nuvoton-300x300.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nuvoton-300x300.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nuvoton-150x150.jpg 150w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nuvoton.jpg 512w" sizes="(max-width: 300px) 100vw, 300px"></a></figure>



<p>The presence of SPI traffic here proved it was at least trying to do <em>something</em>, so I assumed that the LED driver chip was probably fried. That presented a pretty big problem though: how could I find a replacement for the IT1504? It wasn’t stocked anywhere. LCSC didn’t have it, and of course none of the US distributors had it either. I couldn’t even find any sellers on AliExpress or utsource.</p>



<p>I reached out to Innotech, who surprisingly wrote back the next day and kindly offered to send me a few free samples for the price of shipping, but then realized they only have full reels in stock so they couldn’t send me any samples. That was nice of them to check, but I definitely wasn’t going to buy a full reel of IT1504 chips just to fix this one problem.</p>



<p>This pushed me toward a huge search all over the internet for LED drivers to try to find a suitable equivalent replacement. The IT1504 datasheet I had access to didn’t include the full command info, so I wasn’t sure exactly what I was looking for. There were several discontinued parts from other well-known manufacturers that looked similar, but I wasn’t finding any exact matches. That’s when I discovered something really strange.</p>



<p>I somehow stumbled upon <a href="https://www.mblock.com.tw/en" data-type="link" data-id="https://www.mblock.com.tw/en" target="_blank" rel="noreferrer noopener">Macroblock</a>‘s product offerings. Specifically, the MBI5040. The datasheet seemed to match up pretty well with the IT1504. In fact, a little too well. Here is an example of what I mean (click if you want it larger so you can read it):</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-2.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="357" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-2-1024x357.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-2-1024x357.png 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-2-300x105.png 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-2-768x268.png 768w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-2.png 1278w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Here are a few more side-by-side comparisons to really hit the point home:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-3.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="992" height="1024" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-3-992x1024.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-3-992x1024.png 992w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-3-291x300.png 291w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-3-768x793.png 768w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-3.png 1302w" sizes="(max-width: 992px) 100vw, 992px"></a></figure>



<p>They’re almost exactly the same! Everything is laid out in precisely the same order. The current output specs differ slightly, but aside from that, they’re the exact same product, right down to having identical block diagrams. The wording has been tweaked here and there, but both of these datasheets are clearly from the same source. These companies are both based in Taiwan. Maybe one of them licensed the design from the other? Or perhaps there is some industrial espionage going on? There is definitely some funky stuff going on with the fonts on the Innochip datasheet’s general description page. It randomly switches around between serif and sans-serif. It’s the kind of thing you notice when you’re reading an email that somebody sent and you can tell they’ve obviously been copying and pasting while writing it. That doesn’t necessarily mean anything, but I thought it was weird.</p>



<p>Heck, even the part numbers are pretty much the same. If you pretend that the capital letter “I” in MBI5040 is really the number 1, you have MB<strong>1504</strong>0 and IT<strong>1504</strong>.</p>



<p>I have no idea which product is the original here, but either way, this was really good news for me. I had successfully discovered another chip that would likely be suitable as a replacement for my assumed-to-be-fried IT1504. Additionally, the MBI5040 datasheet actually had command info, so if it came down to it, I could dive deeper and really try to understand what the SPI traffic was doing. I was able to find the MBI5040GF available for purchase on both AliExpress and utsource, so I bought a few.</p>



<p>Replacing the LED driver chip was a pretty simple job. Once again I used Kapton tape to protect me from myself.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504removed.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="576" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504removed.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504removed.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504removed-300x169.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504removed-768x432.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderingreplacement.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1004" height="417" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderingreplacement.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderingreplacement.jpg 1004w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderingreplacement-300x125.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderingreplacement-768x319.jpg 768w" sizes="(max-width: 1004px) 100vw, 1004px"></a></figure>



<p>I was feeling pretty good about my situation at this point. I cleaned up all the flux residue and anxiously plugged in the HD60 S to my computer.</p>



<p>Video capture worked fine, so I didn’t make it any worse, but the lights were still not working! What in the world? Next I started wondering if perhaps the LEDs themselves were broken. I rigged up my bench power supply and a resistor so that I could pass current through them (without the whole device powered on, of course), and the LEDs all tested out fine physically. I was able to light each one up.</p>



<p>I was totally out of ideas at this point. A brand new chip didn’t fix it, and the LEDs were known good. That’s when I started searching on Google and found something shocking: apparently the LEDs going out on these Elgato HD60 S capture cards is a known problem that multiple people have experienced. In particular I found two different Reddit posts with four unique users complaining about running into this same problem:</p>



<ul>
<li><a href="https://www.reddit.com/r/elgato/comments/pcvtqj/why_doesnt_my_elgato_hd60s_light_up/" target="_blank" rel="noreferrer noopener">https://www.reddit.com/r/elgato/comments/pcvtqj/why_doesnt_my_elgato_hd60s_light_up/</a></li>



<li><a href="https://www.reddit.com/r/Twitch/comments/qfdxuu/elgato_hd60_s_can_anyone_help_me_with_this_issue/hhzsvez/" target="_blank" rel="noreferrer noopener">https://www.reddit.com/r/Twitch/comments/qfdxuu/elgato_hd60_s_can_anyone_help_me_with_this_issue/hhzsvez/</a></li>
</ul>



<p>Not only that, but sometime during this whole saga I also bought another “dead” HD60 S on eBay that turned out to work fine but had the exact same LED fault. It was starting to look like this indicator light failure was actually quite common!</p>



<p>So yeah. It’s very likely that the LEDs on this one weren’t working even before the voltage regulators originally got fried. This led me to a new bonus challenge: Could I figure out why the LEDs didn’t work and fix them? After all, I now had two different units both experiencing this failure and I knew of at least four other people with the same problem. If you go to the parent post at the second link above, there’s a video that shows how the white LEDs are expected to flash white twice when you first plug it in.</p>



<p>My first idea was to verify that the actual LED circuitry on the board was functional. To perform this test, I lifted the relevant SPI input pins on my replacement MBI5040 LED driver and soldered wires to them, as well as ground:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderedwires1.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1021" height="779" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderedwires1.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderedwires1.jpg 1021w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderedwires1-300x229.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/solderedwires1-768x586.jpg 768w" sizes="(max-width: 1021px) 100vw, 1021px"></a></figure>



<p>This allowed me to rig something up with a Raspberry Pi Pico to manually control the LEDs by sending the appropriate commands as documented in the MBI5040 datasheet. I’ll let this picture speak for itself:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/litup.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="617" height="1024" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/litup.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/litup.jpg 617w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/litup-181x300.jpg 181w" sizes="(max-width: 617px) 100vw, 617px"></a></figure>



<p>It was at this point that I became very confident there was nothing physically wrong with my repaired HD60 S at all. I could perfectly control the lights with my Pi Pico, so the circuit was fine. The Nuvoton Cortex-M0 microcontroller was simply never deciding to turn them on.</p>



<p>This whole MBI5040 replacement story was all for nothing! I was so proud of myself for finding a suitable substitute IC, but it was all mostly just a big waste of time. The original chip was probably fine all along. I decided to confirm that theory just to be sure. I put the original IT1504 chip back onto the board. In order to avoid having to bend pins, I covered the 3 pads that I wanted to avoid soldering to the chip with Kapton tape. This kept them insulated, and then I just soldered all of the other pins normally.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="576" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered-300x169.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered-768x432.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Then I resoldered the wires and repeated the experiment with the Pi Pico. No surprises here — the original chip was totally fine too. After I was done tinkering, I simply pulled the Kapton tape out and then was able to solder the remaining 3 pins normally. I thought this solution was pretty clever and saved me some time! Here’s a view after I pulled out the tape, but before I soldered them down.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered2.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="276" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered2.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered2.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered2-300x81.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/it1504resoldered2-768x207.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>And yes, I know pin 1 looks messy. Once again, it’s a ground pin and I guess they didn’t add thermals on the ground pins on this board. It was a pain to solder. I fixed it up afterward though.</p>



<p>So yeah. The original IT1504 chip worked fine. I was a little annoyed, but this side quest wasn’t entirely a waste of time. Getting ahold of the MBI5040 datasheet importantly gave me a perfect reference for how the LEDs are controlled by software. It was looking more and more like this was a software problem as opposed to a hardware problem. I was invested in this problem at this point. I couldn’t give up now!</p>



<p>I began the next phase of this project with a simple idea: ask Elgato if there is some kind of known issue with the status lights. Maybe there was a setting I was missing that allowed you to disable them. Essentially, they politely told me to take a hike:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-9.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="668" height="180" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-9.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-9.png 668w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-9-300x81.png 300w" sizes="(max-width: 668px) 100vw, 668px"></a></figure>



<p>That’s okay. I felt like solving it on my own anyway. I decided to focus on understanding what was going on in the firmware running in the Nuvoton M031LD2AE microcontroller. By a stroke of pure luck, I had <a href="https://www.downtowndougbrown.com/2023/09/porting-my-mac-rom-simm-programmer-from-avr-to-arm/" data-type="post" data-id="3566" target="_blank" rel="noreferrer noopener">gained some experience last year with Nuvoton MCUs when working on my Mac ROM SIMM programmer</a>. I already had a <a href="https://www.nuvoton.com/tool-and-software/debugger-and-programmer/1-to-1-debugger-and-programmer/nu-link2-me/" target="_blank" rel="noreferrer noopener">Nu-Link2-Me</a> that was bundled with the dev board I bought for that project. The next step was to figure out how to access the programming pins on the microcontroller. It turns out that there are a couple of small JST connectors on the board: a 4-pin one and a 6-pin one. Tracing out the pins one by one, it quickly became apparent that the 4-pin JST connector was for programming the MCU! I hooked it up using the only 4-pin JST cable I had on hand, which had grabbers on the other end.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nulink.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="643" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nulink.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nulink.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nulink-300x188.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/nulink-768x482.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>I didn’t check, but I think it’s a pretty good educated guess that the 6-pin JST connector next to it is for programming the Altera MAX II CPLD that is also on this board. It just makes sense.</p>



<p>I didn’t care about the CPLD though. I tried to read the firmware out of the Nuvoton chip using NuMicro ICP Programming Tool, but of course Elgato protected the contents:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-4.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="304" height="180" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-4.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-4.png 304w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-4-300x178.png 300w" sizes="(max-width: 304px) 100vw, 304px"></a></figure>



<p>Never fear, though. It turns out that Elgato includes the latest firmware with their 4K Capture Utility:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-5.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="878" height="651" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-5.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-5.png 878w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-5-300x222.png 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-5-768x569.png 768w" sizes="(max-width: 878px) 100vw, 878px"></a></figure>



<p>Reading the included ElgatoDeviceCapabilities.json file in the same folder also provided some insight. This firmware is specifically for the version of the device with USB product ID 118 (0x0076), which definitely matches mine. Elgato refers to this device as the “Game Capture HD60 S Rev.4”:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-6.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="355" height="464" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-6.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-6.png 355w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-6-230x300.png 230w" sizes="(max-width: 355px) 100vw, 355px"></a></figure>



<p>The firmware was already up to date when I checked in the 4K Capture Utility. You can also control-click the settings icon to enable an Update Firmware button, but it did nothing because the newest firmware was already installed on it:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-7.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="748" height="530" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-7.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-7.png 748w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-7-300x213.png 300w" sizes="(max-width: 748px) 100vw, 748px"></a></figure>



<p>This was great though! The FW_HD60_S_MCU.bin file looked very much like a normal Cortex-M0 firmware binary. You can tell by looking at the start of it in a hex editor. The very first 4-byte word should be the initial stack pointer, so something in RAM. Then following that is a bunch of interrupt vectors including the reset vector.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-8.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="622" height="262" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-8.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-8.png 622w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-8-300x126.png 300w" sizes="(max-width: 622px) 100vw, 622px"></a></figure>



<p>This all checked out. 0x20000E70 looks like a valid stack pointer, and each 4-byte word following that looks like a valid flash address. It looks exactly like a Cortex-M0 vector table. I loaded it into <a href="https://ghidra-sre.org/" data-type="link" data-id="https://ghidra-sre.org/" target="_blank" rel="noreferrer noopener">Ghidra</a> and also used <a href="https://github.com/leveldown-security/SVD-Loader-Ghidra" target="_blank" rel="noreferrer noopener">SVD-Loader</a> to try to map out some of the registers. I had to modify the SVD file (M031AE_v1.svd), which I got from the <a href="https://www.keil.arm.com/packs/numicro_dfp-nuvoton/devices/" target="_blank" rel="noreferrer noopener">NuMicro_DFP pack on keil.arm.com</a>, to get it to load with the plugin. Apparently it doesn’t like if you have multiple addressBlocks per peripheral, so I modified the first one in each peripheral to contain the full range of addresses.</p>



<p>And thus began the humongous effort of trying to figure out what this little MCU was actually doing.</p>



<p>The SVD file helped me identify the various peripherals being used: mostly GPIO, a timer, and I<sup>2</sup>C. <a href="https://github.com/OpenNuvoton/M031BSP/" target="_blank" rel="noreferrer noopener">Nuvoton’s M031BSP project</a> was very valuable for identifying a ton of functions. I did it by hand, which was probably slightly insane, but I wasn’t sure what compiler had been used. Since I knew which pins were hooked up to the LED controller chip, I was fairly quickly able to identify functions that control the LEDs. It was hard to understand their purpose in the grand scheme of things though. Sometimes they were buried deep inside multiple layers of function calls.</p>



<p>Knowing that I<sup>2</sup>C was being used was very helpful, because I saw there were other chips onboard that would communicate through it: the ITE IT6802E and IT66121FN. The IT6802E is an HDMI receiver. I don’t have any detailed documentation for it, but I’m pretty sure it converts an incoming HDMI signal into a parallel data stream suitable for the capture portion of the device to read in. The IT66121FN is the opposite. It takes a parallel data stream and sends it out as HDMI. This would be necessary for the passthrough functionality, providing an HDMI output signal to go through to your TV or monitor.</p>



<p>Anyway, I found some ITE driver code in some random GitHub projects <a href="https://github.com/densengithub/DB_C10" target="_blank" rel="noreferrer noopener">such as this one</a>, which quickly helped me identify a bunch of functions and variables as belonging to ITE’s drivers. This helped me gain a better understanding of what was happening in the firmware. I actually spent way too much time on this, but I think it was useful in the long run. Plus, it was good practice with Ghidra.</p>



<p>Once I had a good idea of the overall structure of the firmware, I decided to try figuring out how I could debug the code. The chip was protected, but I figured that I should be able to erase it and reflash the firmware. To be safe, I desoldered the original M031LD2AE chip and put a new empty one onto my board instead. They only cost $1.14 on Digi-Key in quantities of 1. Why not?</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldernuvoton.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="576" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldernuvoton.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldernuvoton.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldernuvoton-300x169.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/soldernuvoton-768x432.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>When I flashed FW_HD60_S_MCU.bin onto my brand-new blank chip, it definitely worked fine, but it re-protected itself so I couldn’t do any debugging! The offending code was pretty easy to find in Ghidra. There’s a function that is called to update the config registers with the proper locked state as well as the number of 512-byte data flash pages to reserve from the application ROM.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-10.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="669" height="835" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-10.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-10.png 669w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-10-240x300.png 240w" sizes="(max-width: 669px) 100vw, 669px"></a></figure>



<p>I simply had to hack this function to always leave the chip unlocked. Then I reflashed the chip and I was finally able to debug the code! I inserted some breakpoints and stepped through the initialization code with OpenOCD and GDB to figure out why the LEDs weren’t being controlled. I found some places in the code where LED control would happen, but they were being skipped. I decided to force the code to run by filling in register values and RAM in GDB, and sure enough, I was able to at least force the lights to turn on. So clearly the code was there to control the lights, but it wasn’t running for whatever reason.</p>



<p>This chip unlocking mess led me down another rabbit hole. I assumed that the original Nuvoton MCU I removed had some other protected contents like a bootloader, so I decided to see if I could extract it by installing my new unlocked firmware file as an update through Elgato’s software. The idea was that after my new unlocked firmware was installed, the protection would be disabled and then I could read out the entire contents with my Nu-Link2-Me. Why would I want to do this? Well, it would just be nice to have as a backup in case I screwed up one of the chips, plus the bootloader might contain other clues.</p>



<p>I tried it out on my <em>other</em> HD60 S with broken LEDs which still had its stock Nuvoton MCU fitted. This required modifying ElgatoDeviceCapabilities.json to point to my unlocked firmware. I also had to change the version listed in this same file so that it would think it was out of date. After making these changes, the 4K Capture Utility allowed to install my new firmware through the normal firmware update mechanism. The utility did tell me the firmware update failed after it finished (more on that later).</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/update3.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="552" height="190" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/update3.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/update3.png 552w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/update3-300x103.png 300w" sizes="(max-width: 552px) 100vw, 552px"></a></figure>



<p>This totally freaked me out because it appeared to brick the device. It didn’t work as a capture card anymore. But luckily, but I was left with an unlocked chip, just as I had hoped! This allowed me to read out the rest of the content of the flash that had previously been protected, including the LDROM (containing Elgato’s first-stage bootloader), data flash contents, and the correct original config register contents. This was <strong>really</strong> exciting because it meant I now had everything I would need in order to completely program a brand new Nuvoton MCU to contain Elgato’s stock firmware, including their bootloader. I rewrote the original Elgato firmware back to this second HD60 S’s APROM (application ROM) using Nuvoton’s tools, and re-locked the chip. Thankfully, this fully restored it to working order — except for the LEDs of course.</p>



<p>I also disassembled their small LDROM bootloader that I was able to read out of the chip, but it wasn’t really anything exciting. It receives commands and data over I<sup>2</sup>C and is capable of reflashing the APROM. Interestingly I discovered that if the chip is set for unprotected mode, the bootloader actually waits around for update commands instead of booting the application firmware. So Elgato is using the locked/unlocked bit as a way of signifying whether it should stay in the bootloader or not, which I find to be a little bit weird. That completely explained why my second HD60 S stopped working after I installed my unlocked firmware — it was stuck in the bootloader waiting forever because the chip was unprotected.</p>



<p>Anyway, I’ve really started to ramble on about things unrelated to the LED problem. Let’s get back on track. The point I’m trying to make here is that I was able to read out all of the stock microcontroller contents, which gave me the confidence I desperately needed in order to start tinkering even further to figure out the LED problem. I was kind of stuck at this point though. Why was the Nuvoton chip not controlling the LEDs? Some of the LED control happened over I<sup>2</sup>C from something else, so I was beginning to worry that the actual problem was once again at a different level.</p>



<p>Fortunately though, I was gaining a better understanding of the architecture of the entire product at this point. Here’s a broad overview of how it works:</p>



<ul>
<li>The main Cypress/Infineon CYUSB3014 USB 3.0 peripheral chip, which I haven’t mentioned until now, is an ARM926EJ-S. It sends commands to the Nuvoton MCU over I<sup>2</sup>C. This is the chip that actually communicates with the host PC through the USB 3.0 port.</li>



<li>The Nuvoton ARM Cortex-M0 microcontroller sets up and monitors the ITE video receiver and transmitter chips through a separate I<sup>2</sup>C bus.</li>



<li>The Nuvoton MCU also controls the LEDs.</li>



<li>The Nuvoton MCU communicates status information back to the CYUSB3014 through I<sup>2</sup>C.</li>



<li>The CYUSB3014 receives the video data stream from the IT6802E (likely through the MAX II CPLD, putting it in a format suitable for the CYUSB3014 to grab) and sends it to the computer over USB.</li>
</ul>



<p>I thought I would take a break from the Nuvoton chip for a while and start trying to understand the main Cypress processor instead. Yes, as I just mentioned above, there are two different ARM processors working together to implement the video capture functionality. Fortunately, Cypress/Infineon also provides a free SDK for these USB chips. The firmware is stored unprotected in the Winbond W25Q32JVSSIQ flash chip that I talked about very early on when I thought this was purely going to be a hardware repair project.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/spiflash.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="576" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/spiflash.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/spiflash.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/spiflash-300x169.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/spiflash-768x432.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>I desoldered the SPI flash chip and read it back using a programmer. It’s a 4 MB (32-megabit) chip. I also tried to do it in-circuit without removing the chip first, but I didn’t have any luck. I even accidentally knocked a small 0402 0.1 uF decoupling capacitor (seen above on the right) off the PCB while I was trying to clip onto it. Luckily the capacitor wasn’t damaged and I was able to put it right back on.</p>



<p>After dumping the chip contents, I used it to start trying to work my way through understanding what the CYUSB3014 was doing. I was able to use Cypress’s existing SDK binaries to help identify a lot of the functions in the dump. It turns out that the Cypress SDK uses the ThreadX RTOS under the hood.</p>



<p>I really didn’t want to dive deep into this firmware to the same level that I did for the Nuvoton chip though. I was already worn out from that disassembly. At the very least, I was able to see that the Cypress chip sends commands over I<sup>2</sup>C to the Nuvoton chip.</p>



<p>Looking through the rest of the SPI flash dump, I could see that starting at offset 0x300000, there were a bunch of small data chunks that looked like little pictures. Here’s an example:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-11.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="620" height="478" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-11.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-11.png 620w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-11-300x231.png 300w" sizes="(max-width: 620px) 100vw, 620px"></a></figure>



<p>I couldn’t figure out why there would be little pictures in the flash chip here. What would the purpose be? It made me wonder if maybe it was some kind of small icon, since I’ve seen similar data for icons while analyzing old Mac ROM dumps. Given the context of this blog post, you might be screaming at me right now telling me what this data obviously is, but at the time I was totally oblivious.</p>



<p>I ended up solving this mystery as soon as I started looking into what was going on with five unknown GPIO pins in the firmware on the Nuvoton chip. There were a bunch of functions that controlled these pins, but I wasn’t sure what they did. I traced them out on the PCB and discovered they were going to a <a href="https://www.diodes.com/assets/Datasheets/PI5C3257.pdf">Diodes Incorporated PI5C3257 quad 2:1 mux/demux bus switch</a>.</p>



<p>This was the magic discovery that finally unblocked me. This bus switch is being used to decide whether the CYUSB3014 chip or the Nuvoton microcontroller should be wired up to the SPI flash chip. Prior to this moment, I thought that the SPI flash was entirely dedicated to the CYUSB3014. In reality, the Nuvoton microcontroller takes over control of the SPI flash after the CYUSB3014 has finished booting. This enabled me to disassemble a bunch of new functions which were all related to bit-banging SPI transactions, as well as higher-level functions for SPI flash chip erasing/reading/writing.</p>



<p>A light bulb went off in my head. Yes, these chunks of data in the flash chip <strong>were</strong> pictures! But not in the conventional sense. They were describing the various LED animations. Each set of 16 bytes is an animation frame written to the 14 LEDs. In the example above, a single red LED turns on and six of the seven white LEDs do stuff. The last two bytes in each row are a delay time before moving onto the next frame. The first 16 bytes looked kind of weird though. They looked like they possibly contained some header data for the animation or something.</p>



<p>I also found some code that was reading data from the start of the 0x300000 section, but in my SPI flash dump that section was pretty much completely empty:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-12.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="622" height="285" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-12.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-12.png 622w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-12-300x137.png 300w" sizes="(max-width: 622px) 100vw, 622px"></a></figure>



<p>Everything was starting to make sense. There was a check in the Nuvoton MCU firmware to see if the first two bytes contained the 16-bit word value 0xAA55:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-17.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="636" height="287" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-17.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-17.png 636w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-17-300x135.png 300w" sizes="(max-width: 636px) 100vw, 636px"></a></figure>



<p>In my dumps of the SPI flash chip contents from my units with nonfunctional LEDs, that section of the chip was empty. It was programmed as all 0x00. The firmware was bypassing all of the LED control code because expected data wasn’t stored starting at 0x300000 in the flash chip! I confirmed this data was missing on both of the HD60 S devices I was testing with.</p>



<p>Unless I wanted to go overboard trying to figure out how to artificially populate all this data from scratch, I had no choice but to buy a third HD60 S that was confirmed to be fully functional. That’s what I ended up doing. Unfortunately it was an older revision and had a completely different PCB, but it was still based on the CYUSB3014. It also used a Nuvoton microcontroller, but it was a different model. It still had an IT1504 for LED control though, as well as a Winbond SPI flash chip, so that was promising.</p>



<p>I confirmed that its LEDs worked fine, and then I dumped the SPI flash. By this point, I had figured out how to dump the flash contents without any soldering by forcing the CYUSB3014 to boot over USB (removing a jumper on the board) and then uploading a Cypress-provided RAM bootloader capable of dumping the SPI flash (cyfxflashprog.img), but I don’t want to stray too far from the LED issue at this point. Here’s the start of the good data at 0x300000:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-13.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="621" height="463" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-13.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-13.png 621w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-13-300x224.png 300w" sizes="(max-width: 621px) 100vw, 621px"></a></figure>



<p>Okay, that data makes way more sense. The first 16-bit word (little-endian) is 0xAA55 just like the firmware was looking for. It also has a bunch of other header data, indicating there are 26 different LED animations, and including info about whether they are even animations at all. To be honest, I haven’t figured out what every piece of this data actually means, but each animation has a 16-byte summary. They start at 0x300008. I think the last 4 bytes for each animation are probably a CRC-32 of something.</p>



<p>Also, if you noticed in the original chip dump, there was a section starting at 0x3000B8 with a bunch of 0xE5 bytes. This is the dot correction data that gets loaded into the IT1504. Based on the decompilation above, it’s actually supposed to be at 0x3007F8, which is exactly where it is in the good dump:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-14.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="624" height="62" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-14.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-14.png 624w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-14-300x30.png 300w" sizes="(max-width: 624px) 100vw, 624px"></a></figure>



<p>The 0x521114A7 that follows is a CRC-32 of the preceding 16 bytes of data.</p>



<p>Further inspection revealed that the data in the SPI flash of the broken devices differed quite a bit. In fact, they were different from each other as well. This led me to believe that the animation data was probably corrupted in them. For example, here’s what the animation at 0x31E000 looks like in the good HD60 S’s dump:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-15.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="621" height="541" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-15.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-15.png 621w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-15-300x261.png 300w" sizes="(max-width: 621px) 100vw, 621px"></a></figure>



<p>Notice how there is no weird header at the top like the original “picture” I was inspecting from one of the other dumps? It just immediately starts with animation data that is consistent with the rest of the nearby data. It’s also longer. This data makes a lot more sense. On the other hand, it was corrupted in two completely different ways in my two HD60 S devices with nonfunctional LEDs.</p>



<p>Several (but not all) of the animations in my nonworking devices started with a weird “AB 03 12 39” header. I don’t think the header is supposed to be there. Maybe there was a bug in an update procedure or something? The Nuvoton firmware indeed has functions capable of erasing and rewriting data to the SPI flash chip. I’m wondering if that code ended up running and somehow destroying the original contents.</p>



<p>You may be able to guess what I did with this new knowledge. I took the original SPI flash contents from the two devices with nonfunctional status lights, and simply replaced all the LED data starting at 0x300000 with the data from the working one. Then I flashed this new “hybrid” image to the non-working devices. Oh, I should point out that each device has its own unique flash dump. The USB serial number is embedded in there somewhere. So I preferred to preserve the data from 0 to 0x2FFFFF for each individual device.</p>



<p>I wasn’t entirely sure what to expect by trying this. The good SPI flash data came from an older revision of the product with a different Nuvoton microcontroller, but it sure looked like it matched what the newer firmware was looking for.</p>



<p>Here’s a picture of what I saw as soon as I powered one of the problematic devices after I reflashed its SPI flash chip:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success1.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="768" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success1.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success1.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success1-300x225.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success1-768x576.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>It freaking worked. The white lights flashed twice, and then the red lights briefly flashed once.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success2.jpg" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="768" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success2.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success2.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success2-300x225.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/success2-768x576.jpg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<p>I think the red flash just means the signal was lost, because it also does it every single time I unplug an HDMI source from it. The older model doesn’t do this red flash on every powerup, but maybe it’s just a firmware difference about whether it should say “signal lost” immediately at startup with nothing plugged in. I’ve seen some mention online of red lights meaning that the signal is HDCP-protected, but I think that’s a different longer red blink which I’ve also seen when I first plug in my iPhone as an HDMI source.</p>



<p>I’ve also noticed that some of the animations that Elgato says it should do, like when I start or stop recording, don’t play on this newer model, even though they work fine with the older model. I haven’t been able to figure out if this is just a known difference with how the newer model works. I may try to get a good SPI flash dump of the correct LED animations from a newer matching model to confirm it for sure, but I have a feeling the animation data will be identical.</p>



<p>I also recently realized that the raw data for each animation is sitting around in C:\Program Files\Elgato\GameCapture\Animations if you have the older Game Capture utility installed, or /Applications/Game Capture HD.app/Contents/Resources/Animations on Mac.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-16.png" target="_blank" rel="noreferrer noopener"><img loading="lazy" decoding="async" width="655" height="786" src="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-16.png" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-16.png 655w, https://www.downtowndougbrown.com/wp-content/uploads/2024/09/image-16-250x300.png 250w" sizes="(max-width: 655px) 100vw, 655px"></a></figure>



<p>Looking through each file (01.ani, 02.ani, etc.), it looks like the animation data perfectly matches my dump of the older working device. The bytes for each LED are out of order, but if I reorder them correctly, I can create an identical copy of all of the animation data that I extracted from the good flash chip.</p>



<p>Since those animations live inside the Game Capture app (or next to it), it seems as though the software has the capability to load them into the flash chip. I wonder if that explains how the stored animation data ended up corrupted in the first place. A botched update perhaps? That would make sense to me. Maybe they disabled the ability for their software to upload them after they discovered it was screwing up people’s devices? It might be interesting to disassemble the Windows and/or Mac software and try to figure out how to convince it to directly upload the animations, but I’m honestly out of motivation to do that at this point. It looks like LedCtrlDll.dll might be an interesting file to look at if anyone else is hooked enough to continue diving deeper. It contains classes with interesting names like Ub530LedSpiRom and I2cIO_Ub530. Some quick disassembly in Ghidra indeed shows it creating a 0x80C-byte array for the header data that would go into the flash chip at 0x300000, and populating the contents with the dot correction data.</p>



<p>One last thing I noticed is if I do a firmware update of the HD60 S inside of Elgato’s 4K Capture Utility in Windows, it doesn’t wait long enough. It seems to work fine on Mac, but Windows has some issues. The firmware update is still in progress when it tells me that it failed. If I sit there and wait, eventually the lights flash on the unit and it successfully reboots into the new firmware. If instead I unplug it quickly after Elgato’s software tells me the update failed, I end up with an incomplete flash. I wonder if this has fooled people into bricking their devices? Especially if the status LEDs don’t work at all. I was able to successfully fix this problem by increasing the updateDurationSec in ElgatoDeviceCapabilities.json from 40 to 80. I get the feeling Elgato’s firmware update functionality is a little flaky, at least on Windows. In Elgato’s defense, <a href="https://help.elgato.com/hc/en-us/articles/360027955132-Firmware-updates-and-Elgato-hardware" target="_blank" rel="noreferrer noopener">they specifically recommend <em>not</em> to update firmware on the HD60 S unless their tech support tells you to</a>. And they hide the functionality behind a special key combination when entering the settings screen.</p>



<p>I would like to figure out a way to share how to easily fix the LEDs for anyone else who runs into this problem, but the process is admittedly quite convoluted. It requires you to begin a firmware update (modifying ElgatoDeviceCapabilities.json to even allow you to install an update in the first place) and immediately unplug the device — otherwise the Nuvoton MCU takes control of the SPI flash, and you really need the Cypress chip to be in control in order to reflash its contents. Then, you remove the jumper on the PCB (instructing the Cypress chip to boot from USB), upload cyfxflashprog.img to RAM using download_fx3, and use a modified version of fx3_spitest to download the entire SPI flash contents and replace it with your patched LED section. Those are tools from the CYUSB3014 SDK. Finally, you unplug it, put the jumper back in, plug it back in, and perform a normal firmware update in 4K Capture Utility to restore the firmware back to the Nuvoton chip. You ignore the update failure message and wait another minute or so, and eventually it boots back up with working LEDs. If there ends up being enough interest in recovering these things, it might be possible for me to throw something together to automate the process, or at least provide binaries for everything. It would also be nice to figure out how to use Elgato’s software to directly reprogram the LED animations. For now though, I’m just going to sit back, relax, and celebrate my victory on this!</p>



<p>So in conclusion, yes, it really was that simple. All I needed to do was replace three chips for a total of less than $1 to bring this thing back to life. Every bit of extra time and money I spent on this project after that was all about figuring out a well-known indicator LED problem that really had nothing to do with my actual repair. I put way more effort into this than I should have, and yes I am probably a tiny bit crazy for actually doing this, but at least I now have an answer and fix for why the LEDs don’t work on some of these capture cards. It’s some sort of software/programming/update bug. I’m not sure which. Way to go Elgato!</p>
			  
			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Void, an open-source Cursor/GitHub Copilot alternative (326 pts)]]></title>
            <link>https://voideditor.com</link>
            <guid>41563958</guid>
            <pubDate>Tue, 17 Sep 2024 03:58:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://voideditor.com">https://voideditor.com</a>, See on <a href="https://news.ycombinator.com/item?id=41563958">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><section><h2>The AI Features You Love.</h2><div><div><h2>Tab</h2><p>Press 'Tab' to apply autocomplete.</p><p><img src="https://voideditor.com/demos/autocomplete3.png" alt="Tab"></p></div><div><h2>Ctrl + K</h2><p>Edit your selection inline.</p><p><img src="https://voideditor.com/demos/inline4.png" alt="Ctrl + K"></p></div><div><h2>Ctrl + L</h2><p>Ask questions and include files. </p><p><img src="https://voideditor.com/demos/sidebar4.png" alt="Ctrl + L"></p></div></div></section><section><h2><p>Powered by VS Code.</p></h2><div><p>Void is a fork of VS Code. We let you transfer over all your themes, keybinds, and settings in one click. </p></div><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10.8634 13.9195C10.6568 14.0195 10.4233 14.0246 10.2185 13.9444C10.1162 13.9044 10.021 13.843 9.93997 13.7614L4.81616 9.06268L2.58433 10.7656C2.37657 10.9241 2.08597 10.9111 1.89301 10.7347L1.17719 10.0802C0.941168 9.86437 0.940898 9.49112 1.17661 9.27496L3.11213 7.5L1.17661 5.72504C0.940898 5.50888 0.941168 5.13563 1.17719 4.91982L1.89301 4.2653C2.08597 4.08887 2.37657 4.07588 2.58433 4.2344L4.81616 5.93732L9.93997 1.23855C9.97037 1.20797 10.0028 1.18023 10.0368 1.15538C10.2748 0.981429 10.5922 0.949298 10.8634 1.08048L13.5399 2.37507C13.8212 2.5111 14 2.79721 14 3.11109V8H10.752V4.53356L6.86419 7.5L10.752 10.4664V8H14V11.8889C14 12.2028 13.8211 12.4889 13.5399 12.625L10.8634 13.9195Z"></path></svg><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M406.6 374.6l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224l-293.5 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288l293.5 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"></path></svg><p><img alt="A slice of the void" loading="lazy" width="70" height="70" decoding="async" data-nimg="1" srcset="https://voideditor.com/_next/image?url=%2Fvoid%2Flogo_cube_noshadow.png&amp;w=96&amp;q=75 1x, https://voideditor.com/_next/image?url=%2Fvoid%2Flogo_cube_noshadow.png&amp;w=256&amp;q=75 2x" src="https://voideditor.com/_next/image?url=%2Fvoid%2Flogo_cube_noshadow.png&amp;w=256&amp;q=75"></p></div></section></div><section><p>Host your own models locally, or communicate directly with your favorites.  </p><div><div><p>Host Locally</p><p>Never run out of API credits again. We offer tools like Ollama to host quality models locally.</p></div><div><p>Go Direct</p><p>Send direct to Claude, GPT, or Gemini. Unlike other editors, we don't act as a middleman to your LLM calls.</p></div></div></section></div>]]></description>
        </item>
    </channel>
</rss>