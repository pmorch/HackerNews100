<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 18 Feb 2024 01:00:07 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[My Notes on Gitlab's Postgres Schema Design (2022) (119 pts)]]></title>
            <link>https://shekhargulati.com/2022/07/08/my-notes-on-gitlabs-postgres-schema-design/</link>
            <guid>39413972</guid>
            <pubDate>Sat, 17 Feb 2024 22:05:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://shekhargulati.com/2022/07/08/my-notes-on-gitlabs-postgres-schema-design/">https://shekhargulati.com/2022/07/08/my-notes-on-gitlabs-postgres-schema-design/</a>, See on <a href="https://news.ycombinator.com/item?id=39413972">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-6989">
	<!-- .entry-header -->

	
	
	<div>
		
<p>I spent some time going over the Postgres schema of Gitlab. GitLab is an alternative to Github. You can self host GitLab since it is an open source DevOps platform.</p>



<p>My motivation to understand the schema of a big project like Gitlab was to compare it against schemas I am designing and learn some best practices from their schema definition. I can surely say I learnt a lot.</p>



<blockquote>
<p>I am aware that best practices are sometimes context dependent so you should not apply them blindly.</p>
</blockquote>



<p>The Gitlab schema file <code>structure.sql</code> [1] is more than 34000 lines of code. Gitlab is a monolithic Ruby on Rails application. The popular way to manage schema migration is using the <code>schema.rb</code> file. The reason the Gitlab team decided to adopt <code>structure.sql</code> instead is mentioned in on of their issues [2] in their issue tracker.</p>



<blockquote>
<p>Now what keeps us from using those features is the use of <code>schema.rb</code>. This can only contain standard migrations (using the Rails DSL), which aim to keep the schema file database system neutral and abstract away from specific SQL. This in turn means we are not able to use extended PostgreSQL features that are reflected in schema. Some examples include triggers, postgres partitioning, materialized views and many other great features.</p>



<p>In order to leverage those features, we should consider using a plain SQL schema file (<code>structure.sql</code>) instead of a ruby/rails standard schema <code>schema.rb</code>.</p>



<p>The change would entail switching <code>config.active_record.schema_format = :sql</code> and regenerate the schema in SQL. Possibly, some build steps would have to be adjusted, too.</p>
</blockquote>



<p>Now, let’s go over the things I learnt from Gitlab Postgres schema.</p>



<p>Below are some of the tweets from people on this article. If you find this article useful please share and tag me <a href="https://twitter.com/shekhargulati" target="_blank" rel="noreferrer noopener">@shekhargulati</a></p>



<figure></figure>



<figure><div><blockquote data-width="550" data-dnt="true"><p lang="en" dir="ltr">If you want to learn a little bit how others are designing their database schemas you will like the analysis of the Gitlab schema. <a href="https://t.co/oxPC2HCj4g">https://t.co/oxPC2HCj4g</a></p>— Tobias_Petry.sql (@tobias_petry) <a href="https://twitter.com/tobias_petry/status/1547865598037659653?ref_src=twsrc%5Etfw">July 15, 2022</a></blockquote></div></figure>



<figure></figure>



<figure></figure>



<figure></figure>



<h2>1. Using the right primary key type for a table</h2>



<p>In my work I have made the mistake of standardizing on primary key types. This means standardizing on either <code>bigint</code> or <code>uuid</code> so all tables will have the same type irrespective of their structure, access patterns, and growth rate.</p>



<p>When your database is small this does not have any visible impact but as you grow primary keys have a visible impact on storage space, write speed, and read speed. So, we should give a proper thought process on choosing the right primary key type for a table.</p>



<p>As I discussed in an earlier post[3] when you use Postgres native UUID v4 type instead of bigserial table size grows by 25% and insert rate drops to 25% of bigserial. This is a big difference. I also compared against ULID but it also performed poorly. One reason could be the ULID implementation.</p>



<p>Given this context I was interested to learn how Gitlab chooses primary key types.</p>



<p>Out of the 573 tables, 380 tables have bigserial primary key type, 170 have serial4 primary key type, and remaining 23 had composite primary keys.They had no table that used uuid v4 primary key or any other esoteric key type like ULID.</p>



<figure><table><thead><tr><th>Name</th><th>Description</th><th>Range</th><th>Text</th></tr></thead><tbody><tr><td><code>serial</code></td><td>4 bytes</td><td>1 to 2147483647</td><td>~2.1 billion</td></tr><tr><td><code>bigserial</code></td><td>8 bytes</td><td>1 to 9223372036854775807</td><td>~9.2 quintillion</td></tr></tbody></table></figure>



<blockquote>
<p>1 quintillion is equal to 1000000000 billions</p>
</blockquote>



<p>The decision to choose serial or bigserial is dependent on the number of records in that table.</p>



<p>Tables like <code>application_settings</code>, <code>badges</code>, <code>chat_teams</code>, <code>notification_settings</code>, <code>project_settings</code> use serial type. For some tables like <code>issues</code>, <code>web_hooks</code>, <code>merge_requests</code>, <code>projects</code> I was surprised to see that they had used the <code>serial</code> type.</p>



<p>The serial type might work for self-hosted community or enterprise versions but for Gitlab.com SaaS service this can cause issues. For example, Github had 128 million public repositories in 2020. Even with 20 issues per repository it will cross the serial range. Also changing the type of the table is expensive. The table has to be rewritten, and you will have to wait. This will also be a problem if you have to shard the table.</p>



<p>I performed a quick experiment that showed that for my table with two columns and 10million records it takes 11 seconds to change the data type from integer to bigint.</p>


<div><pre title="">create table exp_bs(id serial primary key, n bigint not null);
</pre></div>


<p>Insert 10million records</p>


<div><pre title="">insert into exp_bs(n) select g.n from generate_series(1,10000000) as g(n);
</pre></div>


<p>Change column type from integer to bigint.</p>


<div><pre title="">alter table exp_bs alter column id TYPE bigint;
</pre></div>

<div><pre title="">ALTER TABLE
Time: 10845.062 ms (00:10.845)
</pre></div>


<p>You will also have to alter the sequence to change its type as well. This operation is quick.</p>


<div><pre title="">alter sequence exp_bs_id_seq as bigint;
</pre></div>


<p>This finished in 4ms</p>


<div><pre title="">ALTER SEQUENCE
Time: 4.505 ms
</pre></div>


<p>All the bigserial sequences start from 1 and go till the max value of bigint.</p>


<div><pre title="">CREATE SEQUENCE audit_events_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;
</pre></div>


<h2>2. Use of internal and external ids</h2>



<p>It is generally a good practice to not expose your primary keys to the external world. This is especially important when you use sequential auto-incrementing identifiers with type integer or bigint since they are guessable.</p>



<p>So, I was curious to know what happens when you create a Gitlab issue. Do we expose the primary key id to the external user or do we use some other id? If you expose the <code>issues</code> table primary key id then when you create an issue in your project it will not start with 1 and you can easily guess how many issues exist in the GitLab. This is both unsafe and poor user experience.</p>



<p>To avoid exposing your primary keys to the end user the common solution is use two ids. The first is your primary key id which remains internal to the system and never exposed to any public context. The second id is what we share with the external world. In my past experience I have used UUID v4 as the external id. As we discussed in the previous point there is a storage cost involved with using UUID.</p>



<p>GitLab also uses internal and external ids in tables where ids have to be shared with the external world. Tables like <code>issues</code>, <code>ci_pipelines</code>, <code>deployments</code>, <code>epics</code>, and a few others have two ids – <code>id</code> and <code>iid</code>. Below is the part of the issue schema. As shown below <code>iid</code> has integer data type.</p>


<div><pre title="">CREATE TABLE issues (
    id integer NOT NULL,
    title character varying,
      project_id integer,
    iid integer,
    // rest of the columns removed
)
</pre></div>


<p>As you can see there are <code>id</code> and <code>iid</code> columns. The value of the <code>iid</code> column is shared with the end user. An issue is uniquely identified using <code>project_id</code> and <code>iid</code>. This is because there could be multiple issues with the same <code>iid</code> . To make it more clear, if you create two projects and create one issue in each of the repositories then they both need to have a visible id of 1 as shown in the example below. Both the <code>sg</code> and <code>sg2</code> projects start with issue id 1. This is achieved using <code>iid</code>.</p>


<div><pre title="">https://gitlab.com/shekhargulati123/sg/-/issues/1
https://gitlab.com/shekhargulati123/sg2/-/issues/1
</pre></div>


<p>They have a unique index on <code>project_id</code> and <code>iid</code> to quickly and efficiently fetch an issue.</p>


<div><pre title="">CREATE UNIQUE INDEX index_issues_on_project_id_and_iid ON public.issues USING btree (project_id, iid);
</pre></div>


<h2>3. Using <code>text</code> character type with check constraints</h2>



<p>Postgres has three character types as described in their documentation[5].</p>



<figure><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>character varying(n)</code>, <code>varchar(n)</code></td><td>variable-length with limit</td></tr><tr><td><code>character(n)</code>, <code>char(n)</code></td><td>fixed-length, blank padded</td></tr><tr><td><code>text</code></td><td>variable unlimited length</td></tr></tbody></table></figure>



<p>I have mostly used <code>character varying(n)</code> or <code>varchar(n)</code> to store String values. Gitlab schema uses both <code>character varying(n)</code> and <code>text</code> but more often they use <code>text</code> type. One such example table is shown below.</p>


<div><pre title="">CREATE TABLE audit_events (
    id bigint NOT NULL,
    author_id integer NOT NULL,
    entity_id integer NOT NULL,
    entity_type character varying NOT NULL,
    details text,
    ip_address inet,
    author_name text,
    entity_path text,
    target_details text,
    created_at timestamp without time zone NOT NULL,
    target_type text,
    target_id bigint,
    CONSTRAINT check_492aaa021d CHECK ((char_length(entity_path) &lt;= 5500)),
    CONSTRAINT check_83ff8406e2 CHECK ((char_length(author_name) &lt;= 255)),
    CONSTRAINT check_97a8c868e7 CHECK ((char_length(target_type) &lt;= 255)),
    CONSTRAINT check_d493ec90b5 CHECK ((char_length(target_details) &lt;= 5500))
)
PARTITION BY RANGE (created_at);
</pre></div>


<p>You can see that apart from <code>entity_type</code> all other columns have <code>text</code> type. They have used <code>CHECK</code> to define length constraints.</p>



<p>As mentioned in multiple posts[6,7] on the web there is not much performance difference between the two types. They both use <code>varlena</code> type under the hood.</p>



<p>The problem with <code>varchar(n)</code> is that if n becomes more restrictive then it will require an exclusive lock. This can cause performance issues depending on the size of the table.</p>



<p>The <code>text</code> column with <code>CHECK</code> constraint on the other hand does not have this issue. But it does cost a little during writes.</p>



<p>Let’s do a quick experiment to prove it. We will start by creating a simple table</p>


<div><pre title="">create table cv_exp (id bigint primary key, s varchar(200) default gen_random_uuid() not null);
create index sidx on cv_exp (s);
</pre></div>


<p>Insert 10million records</p>


<div><pre title="">insert into cv_exp(id) select g.n from generate_series(1,10000000) as g(n);
</pre></div>


<p>If we increase the length of s from 200 to 300 then it is instantaneous</p>


<div><pre title="">alter table cv_exp alter column s type varchar(300);
</pre></div>

<div><pre title="">ALTER TABLE
Time: 37.460 ms
</pre></div>


<p>But if we reduce the length of <code>s</code> from 300 to 100 then it does take considerable time.</p>


<div><pre title="">alter table cv_exp alter column s type varchar(100);
</pre></div>

<div><pre title="">ALTER TABLE
Time: 35886.638 ms (00:35.887)
</pre></div>


<p>As you can see it took 36 seconds.</p>



<p>Let’s do the same with the text column.</p>


<div><pre title="">create table text_exp (id bigint primary key, 
s text default gen_random_uuid() not null,
CONSTRAINT check_15e644d856 CHECK ((char_length(s) &lt;= 200)));
</pre></div>


<p>Insert 10 million records</p>


<div><pre title="">insert into text_exp(id) select g.n from generate_series(1,10000000) as g(n);
</pre></div>


<p>There is no alter constraint in Postgres. You have to drop the constraint and then add a new constraint.</p>


<div><pre title=""> alter table text_exp drop constraint check_15e644d856;
</pre></div>


<p>Now, add again</p>


<div><pre title="">alter table text_exp add constraint check_15e644d856 CHECK ((char_length(s) &lt;= 100));
</pre></div>

<div><pre title="">ALTER TABLE
Time: 1870.250 ms (00:01.870)
</pre></div>


<p>So, as you can see, the <code>text</code> type with <code>CHECK</code> constraint allows you to evolve the schema easily compared to <code>character varying</code> or <code>varchar(n)</code> when you have length checks.</p>



<p>I also noticed that they used <code>character varying</code> where length checks are not required like as shown below.</p>


<div><pre title="">CREATE TABLE project_custom_attributes (
    id integer NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    project_id integer NOT NULL,
    key character varying NOT NULL,
    value character varying NOT NULL
);
</pre></div>


<h2>4. Naming conventions</h2>



<p>The naming follows the following convention.</p>



<ul><li>All tables use plural forms. For example <code>issues</code>, <code>projects</code>, <code>audit_events</code>, <code>abuse_reports</code>, <code>approvers</code>, etc.</li><li>Tables use module name prefix to provide a namespace. For example, all tables belonging to merge request functionality start with <code>merge_request</code> prefix as shown in the listing below.<ul><li>merge_request_assignees</li><li>merge_request_blocks</li><li>merge_request_cleanup_schedules</li><li>merge_request_context_commit_diff_files</li><li>merge_request_context_commits</li><li>etc..</li></ul></li><li>Names of tables and columns follow snake_case convention. The underscore is used to combine two or more words. For example, <code>title</code>, <code>created_at</code>, <code>is_active</code>.</li><li>Columns expressing boolean follow either of the three naming convention depending on their purpose<ul><li>Feature toggles. For example <code>create_issue</code>, <code>send_email</code>, <code>packages_enabled</code>, <code>merge_requests_rebase_enabled</code>, etc</li><li>Entity State: Examples, <code>deployed</code>, <code>onboarding_complete</code>, <code>archived</code>, <code>hidden</code>, etc.</li><li>Qualifiers – They start with <code>is_xxx</code> or <code>has_xxx</code>. For example, <code>is_active</code>, <code>is_sample</code>, <code>has_confluence</code>, etc. I think these can be expressed using the above two.</li></ul></li><li>Indexes follow the convention <code>index_#{table_name}_on_#{column_1}_and_#{column_2}_#{condition}</code>. For example, <code>index_services_on_type_and_id_and_template_when_active</code>, <code>index_projects_on_id_service_desk_enabled</code>.</li></ul>



<h2>5. Timestamp with timezone and without timezone</h2>



<p>GitLab uses both <code>timestamp with timezone</code> and <code>timestamp without timezone</code>.</p>



<p>My understanding is that the data type <code>timestamp without timezone</code> is used when the system performs an action and data type <code>timestamp with time zone</code> is used for user actions. For example, in the SQL shown below <code>created_at</code> and <code>updated_at</code> does use <code>timestamp without time zone</code> whereas <code>closed_at</code> uses <code>timestamp with time zone</code>.</p>


<div><pre title="">CREATE TABLE issues (
    id integer NOT NULL,
    title character varying,

    created_at timestamp without time zone,
    updated_at timestamp without time zone,

    closed_at timestamp with time zone,
    closed_by_id integer,
);
</pre></div>


<p>Another example is <code>merge_request_metrics</code> where <code>latest_closed_at</code>, <code>first_comment_at</code>, <code>first_commit_at</code> , and <code>last_commit_at</code> uses <code>timestamp with time zone</code> whereas <code>latest_build_started_at</code> , <code>latest_build_finished_at</code>, and <code>merge_at</code> they use <code>timestamp without timezone</code>. You might wonder why <code>merge_at</code> does not use a timezone. I think it is because the system can merge the request based on certain conditions or checks.</p>


<div><pre title="">CREATE TABLE merge_request_metrics (
    id integer NOT NULL,
    latest_build_started_at timestamp without time zone,
    latest_build_finished_at timestamp without time zone,
    merged_at timestamp without time zone,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,

    latest_closed_at timestamp with time zone,
    first_comment_at timestamp with time zone,
    first_commit_at timestamp with time zone,
    last_commit_at timestamp with time zone,
    first_approved_at timestamp with time zone,
    first_reassigned_at timestamp with time zone
);
</pre></div>


<h2>6. Foreign key constraints</h2>



<p>A foreign key constraint is a logical association of rows between two tables. You typically use foreign keys to join tables in queries.</p>



<blockquote>
<p>A <strong>FOREIGN KEY</strong> constraint is a database construct, an implementation that forces the foreign key relationship’s integrity (referential integrity). Namely, it ensures that a child table can only reference a parent table when the appropriate row <em>exists</em> in the parent table. A constraint also prevents the existence of “orphaned rows” in different methods. – <a href="https://docs.planetscale.com/learn/operating-without-foreign-key-constraints">Link</a></p>
</blockquote>



<p>I have consulted in multiple projects in the last couple of years where team/architects decided not to use foreign key constraints. They mainly cite performance as the reason to not use foreign key constraints.</p>



<p>One reason performance can degrade when you create foreign key is when you create it with <code>ON DELETE CASCADE</code> action. The way <code>ON DELETE CASCADE</code> action works is that if you delete a row in the parent table then any referencing row in the child table is also deleted within the same transaction. You might expect only one row to be deleted but you might end up deleting hundred or thousand or more child table rows as well. But, this will be an issue only when one parent row is linked with a large number of child table rows.</p>



<p>There are two other reasons teams don’t use foreign key constraints. These are:</p>



<ul><li>They don’t work well with online DDL schema migration operations especially in MySQL</li><li>It is difficult to maintain foreign key constraints once you shard your data into multiple database servers</li></ul>



<blockquote>
<p>MySQL compatible serverless database like PlanetScale(based on open source Vitess database) does not support foriegn keys.</p>
</blockquote>



<p>So, I was curious to learn if GitLab uses Foreign key constraints or not.</p>



<p>GitLab uses foriegn key constraints in most tables except in a few tables like <code>audit_events</code> , <code>abuse_reports</code>, <code>web_hooks_logs</code>, <code>spam_logs</code>. I think there are two main reasons why they don’t use foreign key constraints in <code>audit_events</code> , <code>abuse_reports</code>, <code>web_hooks_logs</code>, <code>spam_logs</code>. These are:</p>



<ul><li>These tables are immutable in nature. You don’t want to change them once entries are written to them</li><li>These tables can grow to millions(or more) of rows so even a small performance hit could have a big impact</li></ul>



<p>The rest of the tables where GitLab uses foreign keys use both <code>ON DELETE CASCADE</code> , <code>ON DELETE RESTRICT</code> , and <code>ON DELETE SET NULL</code> actions. An example of each of them is shown below.</p>


<div><pre title="">ALTER TABLE ONLY todos
    ADD CONSTRAINT fk_rails_a27c483435 FOREIGN KEY (group_id) REFERENCES namespaces(id) ON DELETE CASCADE;

ALTER TABLE ONLY projects
    ADD CONSTRAINT fk_projects_namespace_id FOREIGN KEY (namespace_id) REFERENCES namespaces(id) ON DELETE RESTRICT;

ALTER TABLE ONLY authentication_events
    ADD CONSTRAINT fk_rails_b204656a54 FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL;
</pre></div>


<ul><li><code>ON DELETE SET NULL</code> will set the referencing column on the child table to null for matching rows. It leads to orphaned rows but you can easily identify them because of NULL. In this action also, a single row deletion can lead to multiple rows getting updated in the child table. This may cause large transactions, excessive locking, and replication lag.</li><li><code>ON DELETE RESTRICT</code> prevents deletion of referenced child rows. This does not cause orphaned childs as you can’t delete a parent row if there are child rows that references it. You get exceptions like as shown below.</li></ul>


<div><pre title="">  ERROR:  update or delete on table "a" violates foreign key constraint "fk_a_id" on table "b"
  DETAIL:  Key (id)=(1) is still referenced from table "b".
</pre></div>


<h2>7. Partitioning big tables</h2>



<p>GitLab uses partitioning to partition tables that can grow to a huge size. This is done to improve query performance.</p>



<ul><li>PARTITION BY RANGE: This partitioning strategy works by partitioning table data based on the chosen range. This strategy is commonly used when you need to partition time-series data. The tables <code>audit_events</code> and <code>web_hook_logs</code> use this strategy.</li><li>PARTITION BY LIST: This partitioning strategy works by partitioning table data based on discrete values of a column. The table <code>loose_foreign_keys_deleted_records</code> uses this strategy.</li><li>PARTITION BY HASH: TThe table is partitioned by specifying a modulus and a remainder for each partition. Each partition will hold the rows for which the hash value of the partition key divided by the specified modulus will produce the specified remainder. The table <code>product_analytics_events_experimental</code> uses this strategy.</li></ul>



<p>You can read more about Postgres partitioning in Postgres <a href="https://www.postgresql.org/docs/current/ddl-partitioning.html">documentation</a>.</p>



<h2>8. Supporting LIKE search use cases with Trigrams and <code>gin_trgm_ops</code></h2>



<p>GitLab uses GIN(Generalized Inverted Index) indexes to perform efficient searches.</p>



<blockquote>
<p>The GIN index type was designed to deal with data types that are subdividable and you want to search for individual component values (array elements, lexemes in a text document, etc)” – <a href="https://www.postgresql.org/message-id/flat/26038.1559516834%40sss.pgh.pa.us#ccb004aefc151d913e7a274a9b30c631">Tom Lane</a></p>
</blockquote>



<p>Due to the nature of the LIKE operation, which supports arbitrary wildcard expressions, this is fundamentally hard to index. One such example is the issues table where you might want to do something like search on title and description fields. So, we use the pg_trgm extension to create an index that works on trigrams.</p>


<div><pre title="">CREATE INDEX index_issues_on_title_trigram ON issues USING gin (title gin_trgm_ops);
CREATE INDEX index_issues_on_description_trigram ON issues USING gin (description gin_trgm_ops);
</pre></div>


<p>The GIN index makes searches performant. Let’s see that in action.</p>



<p>We will create a simple table as shown below.</p>


<div><pre title="">create table words(id serial primary key, word text not null);
</pre></div>


<p>Let’s insert some data. I pulled an English word list in CSV format from this <a href="https://www.bragitoff.com/2016/03/english-dictionary-in-csv-format/">link</a>.</p>


<div><pre title="">\copy words(word) from '/Users/xxx/Aword.csv' CSV;
</pre></div>

<div><pre title="">select count(*) from words;
</pre></div>

<div><pre title=""> count
-------
 11616
(1 row)
</pre></div>


<p>We will create a btree index on the word column and later we will use the gin index to show its efficiency.</p>


<div><pre title="">create index id1 on words using btree (word);
</pre></div>


<p>Let’s run the explain plan query.</p>


<div><pre title="">EXPLAIN select * from words where word like '%bul%';
</pre></div>

<div><pre title="">                        QUERY PLAN
-----------------------------------------------------------
 Seq Scan on words  (cost=0.00..211.20 rows=1 width=14)
   Filter: (word ~~ '%bul%'::text)
(2 rows)
</pre></div>


<p>Now, let’s drop btree index;</p>





<p>Install the <code>pg_trm</code> extension</p>


<div><pre title="">CREATE EXTENSION pg_trgm;
</pre></div>


<p>Create the index.</p>


<div><pre title="">create index index_words_on_word_trigram ON words USING gin (word gin_trgm_ops);
</pre></div>


<p>Now, let;s run explain</p>


<div><pre title="">EXPLAIN select count(*) from words where word like '%bul%';
</pre></div>

<div><pre title="">                                             QUERY PLAN
----------------------------------------------------------------------------------------------------
 Aggregate  (cost=16.02..16.03 rows=1 width=8)
   -&gt;  Bitmap Heap Scan on words  (cost=12.01..16.02 rows=1 width=0)
         Recheck Cond: (word ~~ '%bul%'::text)
         -&gt;  Bitmap Index Scan on index_words_on_word_trigram  (cost=0.00..12.01 rows=1 width=0)
               Index Cond: (word ~~ '%bul%'::text)
(5 rows)
</pre></div>


<p>GitLab also makes use of <code>tsvector</code> to support complete full text search.</p>



<p>The advantages of doing text seach in your primary datastore are:</p>



<ul><li>Real time indexes. No lag to create index</li><li>Access to the complete data</li><li>Less complexity in your architecture</li></ul>



<h2>9. Use of <code>jsonb</code></h2>



<p>As I discussed an earlier <a href="https://shekhargulati.com/2022/01/08/when-to-use-json-data-type-in-database-schema-design/">post</a> I use json data type in schema design for following use cases:</p>



<ol><li>Dump request data that will be processed later</li><li>Support extra fields</li><li>One To Many Relationship where many side will not have to its own identity</li><li>Key Value use case</li><li>Simpler EAV design</li></ol>



<p>GitLab schema design also uses <code>jsonb</code> data type in multiple tables. They use it mainly for 1 and 2 use cases in my list above. The advantage of using jsonb over storing in plain text is the efficient querying supported by Postgres on <code>jsonb</code> data type.</p>



<p>The table <code>error_tracking_error_events</code> stores payload in jsonb data type. This is an example of dump request data that will be processed in a later use case. I covered a similar use case in my blog post so do read that for more information.</p>


<div><pre title="">CREATE TABLE error_tracking_error_events (
    id bigint NOT NULL,
    payload jsonb DEFAULT '{}'::jsonb NOT NULL,
  // rest removed
);
</pre></div>


<p>You can use a JSON schema to validate the structure of a JSON document.</p>



<p>Another example is the <code>operations_strategies</code> table shown below. You don’t know how many parameters you might receive so you need a flexible data type like <code>jsonb</code>.</p>


<div><pre title="">CREATE TABLE operations_strategies (
    id bigint NOT NULL,
    feature_flag_id bigint NOT NULL,
    name character varying(255) NOT NULL,
    parameters jsonb DEFAULT '{}'::jsonb NOT NULL
);
</pre></div>


<p>An example of supporting extra fields use cases is shown below.</p>


<div><pre title="">CREATE TABLE packages_debian_file_metadata (
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    package_file_id bigint NOT NULL,
    file_type smallint NOT NULL,
    component text,
    architecture text,
    fields jsonb,
);
</pre></div>


<p>They also use jsonb for storing data that is already in JSON format. For example, in the table <code>vulnerability_finding_evidences</code> report data is already JSON so they saved it as is in <code>jsonb</code> data type.</p>


<div><pre title="">CREATE TABLE vulnerability_finding_evidences (
    id bigint NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    vulnerability_occurrence_id bigint NOT NULL,
    data jsonb DEFAULT '{}'::jsonb NOT NULL
);
</pre></div>


<h2>10. Other tidbits</h2>



<ul><li>Auditing fields like <code>updated_at</code> are only used in tables where records can be modified. For example <code>issues</code> has an <code>updated_at</code> column. For append-only immutable log tables like <code>audit_events</code> do not have an <code>updated_at</code> column as shown below in the code snippets. <code>issues</code> table with <code>updated_at</code> column</li></ul>


<div><pre title="">  CREATE TABLE issues (
      id integer NOT NULL,
      title character varying,
      author_id integer,
      project_id integer,
      created_at timestamp without time zone,
      updated_at timestamp without time zone,
      // removed remaining columns and constraints
  );
</pre></div>


<p><code>audit_events</code> table with no <code>updated_at</code> column.</p>


<div><pre title="">  CREATE TABLE audit_events (
      id bigint NOT NULL,
      author_id integer NOT NULL,
      entity_id integer NOT NULL,
      created_at timestamp without time zone NOT NULL,
      // removed remaining columns and constraints
  )
</pre></div>


<ul><li>Enums are stored as smallint rather than <code>character varying</code>. It saves space. The only problem is you can’t change the order of enum values. In the example shown below <code>reason</code> and <code>severity_level</code> are enums</li></ul>


<div><pre title="">  CREATE TABLE merge_requests_compliance_violations (
      id bigint NOT NULL,
      violating_user_id bigint NOT NULL,
      merge_request_id bigint NOT NULL,
      reason smallint NOT NULL,
      severity_level smallint DEFAULT 0 NOT NULL
  );
</pre></div>


<ul><li>Optimistic locking is used in a few(8) tables like <code>issues</code> and <code>ci_builds</code> to protect against edits from multiple parties. Optimistic locking assumes that there will be minimum such conflicts of data and if it does happen then the application throws an exception and the update is ignored. Active Record supports optimistic locking if the <code>lock_version</code> field is present. Each update to the record increments the <code>lock_version</code> column and the locking facilities ensure that records instantiated twice will let the last one saved raise a <code>StaleObjectError</code> if the first was also updated. The <code>ci_builds</code> table shown below uses the ‘lock_version` column.</li></ul>


<div><pre title="">  CREATE TABLE ci_builds (
      status character varying,
      finished_at timestamp without time zone,
      trace text,

        lock_version integer DEFAULT 0,

        // removed columns
      CONSTRAINT check_1e2fbd1b39 CHECK ((lock_version IS NOT NULL))
  );
</pre></div>


<ul><li>Using inet for storing ip addresses. I was not aware of the <code>inet</code> type. They have used inet in <code>audit_events</code> and <code>authentication_events</code> tables</li></ul>


<div><pre title="">  CREATE TABLE audit_events (
      id bigint NOT NULL,
      ip_address inet,
    // other columns removed for clarity
  );
</pre></div>


<p>GitLab has not used inet in all the tables that store <code>ip_address</code>. For example, in tables <code>ci_runners</code> and <code>user_agent_details</code>, they have stored it as <code>character varying</code>. I am not sure why they have not used the same type in all the tables that store ip addresses.</p>



<p>You should prefer <code>inet</code> over storing an ip address as a plain text type as these types offer input error handling and specialized functions.</p>



<p>Let’s quickly see it in action. We will start by creating a table with two fields – id, and <code>ip_addr</code></p>


<div><pre title="">   create table e (id serial primary key, ip_addr inet not null);
</pre></div>


<p>We can insert a valid record like shown below.</p>


<div><pre title="">  insert into e(ip_addr) values ('192.168.1.255');
</pre></div>


<p>We can also insert the record with a mask as shown below.</p>


<div><pre title="">  insert into e(ip_addr) values ('192.168.1.5/24');
</pre></div>


<p>Both these records will get inserted</p>


<div><pre title="">  select id, abbrev(ip_addr) from e;
</pre></div>

<div><pre title="">   id |     abbrev
  ----+----------------
    1 | 192.168.1.255
    2 | 8.8.8.8
    3 | 192.168.1.5/24
  (3 rows)
</pre></div>


<p>If we try to save invalid data then insert will fail.</p>


<div><pre title="">  insert into e(ip_addr) values ('192.168.1');
</pre></div>

<div><pre title="">  ERROR:  invalid input syntax for type inet: "192.168.1"
  LINE 1: insert into e(ip_addr) values ('192.168.1');
</pre></div>


<p>You can inet operators supported by Postgres to check if an ip address is contained by subnet as shown below.</p>


<div><pre title="">  select * from e where ip_addr &lt;&lt; inet '192.168.1.1/24';
</pre></div>

<div><pre title="">   id |    ip_addr
  ----+---------------
    1 | 192.168.1.255
  (1 row)
</pre></div>


<p>If we want to check if subnet is contained or equal then we do following</p>


<div><pre title="">  select * from e where ip_addr &lt;&lt;= inet '192.168.1.1/24';
</pre></div>

<div><pre title="">   id |    ip_addr
  ----+----------------
    1 | 192.168.1.255
    3 | 192.168.1.5/24
  (2 rows)
</pre></div>


<p>There are many other operators and functions supported by Postgres. You can read them in the Postgres <a href="https://www.postgresql.org/docs/current/functions-net.html">docs</a>.</p>



<ul><li>Postgres ‘bytea<code>data type is used to store</code>SHA` , encrypted tokens, encrypted keys, encrypted password, fingerprints, etc.</li><li>Postgres array types are used for storing columns with multiple values as shown below.</li></ul>



<blockquote>
<p>Arrays are to be used when you are absolutely sure you don’t need to create any relationship between the items in the array with any other table. It should be used for a tightly coupled one to many relationship. – <a href="https://stackoverflow.com/a/56298555">Link</a></p>
</blockquote>



<p>For example in the table shown below we are storing <code>*_ids</code> as an array rather than storing them in a flat manner and defining relationships with other tables. You don’t know how many users and projects will be mentioned so it will be wasteful to create columns like <code>mentioned_user_id1</code> , <code>mentioned_user_id2</code>, <code>mentioned_user_id3</code> and so on.</p>


<div><pre title="">  CREATE TABLE alert_management_alert_user_mentions (
      id bigint NOT NULL,
      alert_management_alert_id bigint NOT NULL,
      note_id bigint,
      mentioned_users_ids integer[],
      mentioned_projects_ids integer[],
      mentioned_groups_ids integer[]
  );
</pre></div>


<p>Another common use case of Postgres array is to store fields like hosts, tags, urls.</p>


<div><pre title="">  CREATE TABLE dast_site_profiles (
      id bigint NOT NULL,
      excluded_urls text[] DEFAULT '{}'::text[] NOT NULL,
  );
  CREATE TABLE alert_management_alerts (
    id bigint NOT NULL,
    hosts text[] DEFAULT '{}'::text[] NOT NULL,
  );
  CREATE TABLE ci_pending_builds (
      id bigint NOT NULL,
      tag_ids integer[] DEFAULT '{}'::integer[],
  );
</pre></div>


<h2>Conclusion</h2>



<p>I learnt a lot from the GitLab schema. They don’t blindly apply the same practices to all the table designs. Each table makes the best decision based on its purpose, the kind of data it stores, and its rate of growth.</p>



<h2>References</h2>



<ol><li>Gitlab schema <code>structure.sql</code> – <a href="https://gitlab.com/gitlab-org/gitlab/-/blob/master/db/structure.sql">Link</a></li><li>Issue 29465: Use structure.sql instead of schema.rb – <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/29465">Link</a></li><li>Choosing Primary Key Type in Postgres – <a href="https://shekhargulati.com/2022/06/23/choosing-a-primary-key-type-in-postgres/">Link</a></li><li>Github’s Path to 128M public repositories – <a href="https://towardsdatascience.com/githubs-path-to-128m-public-repositories-f6f656ab56b1#:~:text=There%20are%20over%20128%20million%20public%20repositories%20on%20GitHub.">Link</a></li><li>Postgres Character Types Documentation – <a href="https://www.postgresql.org/docs/current/datatype-character.html">Link</a></li><li>Difference between text and varchar (character varying) – <a href="https://stackoverflow.com/questions/4848964/difference-between-text-and-varchar-character-varying">Link</a></li><li>CHAR(x) vs. VARCHAR(x) vs. VARCHAR vs. TEXT – <a href="https://www.depesz.com/2010/03/02/charx-vs-varcharx-vs-varchar-vs-text/">Link</a></li></ol>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Releasing my tools under the MIT License was probably a mistake (2023) (105 pts)]]></title>
            <link>https://donatstudios.com/License-Grumbles</link>
            <guid>39413562</guid>
            <pubDate>Sat, 17 Feb 2024 21:06:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://donatstudios.com/License-Grumbles">https://donatstudios.com/License-Grumbles</a>, See on <a href="https://news.ycombinator.com/item?id=39413562">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>	
	<p>For basically as long as I can remember, I have been a staunch defender of permissive licenses over the more copyleft variety. I <em>want</em> you to use things I've written. On top of that I don't believe it's my place to force you to then open source things you have written that expand upon my source code. Hence my extensive use of the MIT License.</p>
<p>The MIT License is very simple. It basically says you can do whatever you want with the code, but you have to include the license and copyright when redistributing the code itself. It does not however require you to open source any modifications you make to the code, nor provide attribution to the non-code products of the work.</p>
<p>With my libraries, this has served me very well. It's great, people use and contribute fixes back, and often donate back to me. I love it. I want you to use my code in your proprietary software. I open sourced it so you could do that. I specifically build open source libraries because I solved a problem I thought other people might face and wanted to save them time. Lifting the sea for all boats and all that. I have zero problem continuing to use the MIT License on my libraries.</p>
<p>I also open sourced the tools I host on my website, including but not limited to <a href="https://donatstudios.com/PixelCircleGenerator">Pixel Circle / Oval Generator</a> and <a href="https://donatstudios.com/RewriteRule_Generator">Batch RewriteRule Generator</a>. The MIT License seemed like the natural choice because I've been using it for everything I've released since the early 2000's.</p>
<p>I'd considered these as just <em>part of my website</em> far more so than something I thought people would reuse. My intentions open sourcing these tools, unlike my libraries, was to promote the community helping me to improve them - and they certainly have done so. I have gotten so much great feedback and contributions to these tools, and I am very happy with that. Massive shout out to <a href="https://github.com/Tyson453">Tyson453</a> for his insanely awesome work improving the speed of the Pixel Circle / Oval Generator.</p>
<p>Against my well meaning intentions however, websites re-hosting my tools have been popping up like weeds. In some cases, they are even beating me in search results for my own tools. With noted exception, they don't credit me as the author or provide any sort of link back. Many of them have made minor or major modifications to the tools, and next to none provide the source to those modifications. A number of them even have the gall to post links advertising them in the comments of my own tools.</p>
<p>Most irksome of all, in a fair number of cases they sit centrally on pages covered in ads and SEO keywords. My tools are being associated with a genuinely bad user experience.</p>
<p>This is all perfectly legal and allowed under the MIT License. That's on me. It just is not in the spirit of what I intended. I didn't have the foresight to see this coming. I didn't think people so lacked in the spirit of open source. I wanted to promote community contributions, not to have them monetized by other people who <strong>don't even provide the source to their modifications</strong>. I wanted to grow the tools as a community, not have closed source forks of them overtake my own open source versions.</p>
<p>There's not a lot I can do. I could try to contact the owners of these sites and ask them to provide attribution, but there's no obligation for them to do so. I could try to contact the owners of these sites and ask them to provide the source to their modifications, but again there is no obligation for them to do so. I really wish to see the changes shared alike, and the vain part of me would like attribution as the original author. At the end of the day though I chose the MIT License and it is what it is. It simply does not require any of that.</p>
<hr>
<p>On top of everything else, until very recently and for completely unclear reasons, my website Donat Studios was completely blocked from Bing search results. This in turn meant I didn't show up in DuckDuckGo or Yahoo results either. This meant that for a time the only results when searching these sites for my tools were these re-hosted versions.</p>
<p>I actually managed to reach a human at Bing and get this resolved, but it took a lot of work and I'm still not sure why it happened in the first place.</p>
<hr>
<p>I am considering relicensing my tools under some sort of Attribution-ShareAlike license similar to the <a href="https://creativecommons.org/licenses/by-sa/3.0/">BY-SA</a> the content on this site is licensed under. It would not apply to current and past versions of the tools as that code is licensed MIT and you can't un-ring that bell. It would however apply to future versions. This would still promote community contributions, but would also require that any modifications be shared alike meaning that the modified source would have to be provided and I would have to be credited as the original author.</p>
<p>At the very least I will definitely think twice about the license I choose for future tools. I don't want to be a jerk about it, but I also don't want to see them monetized by others without even a link back to my website.</p><hr>
	
	
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Headphone and Amp Impedance (2011) (152 pts)]]></title>
            <link>http://nwavguy.blogspot.com/2011/02/headphone-amp-impedance.html</link>
            <guid>39412198</guid>
            <pubDate>Sat, 17 Feb 2024 18:49:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="http://nwavguy.blogspot.com/2011/02/headphone-amp-impedance.html">http://nwavguy.blogspot.com/2011/02/headphone-amp-impedance.html</a>, See on <a href="https://news.ycombinator.com/item?id=39412198">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="post-body-5066147790043584221">
<p><strong>INTRO:</strong> The output Impedance of headphone sources is one of the most common reasons the same headphones can sound different depending on what they’re plugged into. This important parameter is rarely specified by manufactures but can make a huge difference in sound quality and headphone compatibility.</p> <p><strong>HEADPHONE IMPEDANCE MOVED:</strong> This article used to be about both output impedance and headphone impedance. But, in the interest of shorter articles, I’ve split them. So if you’re looking for info headphones, please see:</p> <ul> <li><a href="http://nwavguy.blogspot.com/2011/02/headphone-impedance-explained.html" target="_blank">Headphone Impedance Explained</a></li></ul> <p><strong>THE SHORT VERSION:</strong> All you really need to know is most headphones work best when the output impedance is less than 1/8th the headphone impedance. So, for example, with 32 ohm Grados the output impedance can be, at most, 32/8 = 4 ohms. The Etymotic HF5s are 16 ohms so the max output impedance is 16/8 = 2 ohms. If you want to be assured a source will work well with just about any headphone, simply make sure the output impedance is under 2 ohms.</p> <p><strong>WHY DOES OUTPUT IMPEDANCE MATTER?</strong> It matters for at least three reasons:</p> <ul> <li>The greater the output impedance the greater the voltage drop with lower impedance loads. This drop can be large to enough to prevent driving low impedance headphones to sufficiently loud levels. A real world example is the <a href="http://nwavguy.blogspot.com/2011/02/behringer-uca202-review.html" target="_blank">Behringer UCA202</a> with a 50 ohm output impedance. It struggles with some 16 - 32 ohm headphones.  </li><li>Headphone impedance changes with frequency. If the output impedance is much above zero this means the voltage delivered to the headphones will also change with frequency. <em>The greater the output impedance, the greater the frequency response deviations</em>. Different headphones will interact in different, and typically unpredictable, ways with the source. Sometimes these variations can be large and plainly audible.  </li><li>As output impedance increases <a href="http://en.wikipedia.org/wiki/Damping_factor" target="_blank">electrical damping</a> is reduced. The bass performance of the headphones, as designed by the manufacture, may be audibly compromised if there’s insufficient damping. The bass might become more “boomy” and less controlled. The transient response becomes worse and the deep bass performance is compromised (the headphones will roll off sooner at low frequencies). A few, such as those who like a very warm “tube like” sound, might enjoy this sort of under damped bass. But it’s almost always less accurate compared to using a low impedance source.</li></ul> <p><strong>THE 1/8th RULE: </strong>To minimize all three of the above problems, it’s only necessary to keep the output impedance less than 1/8th the headphone impedance. Or, put another way, just divide the headphone impedance by 8 to get the maximum output impedance without potential audible degradation.</p> <p><strong>IS THERE A STANDARD FOR OUTPUT IMPEDANCE? </strong>The only standard I’m aware of is IEC 61938 from 1996. It specifies an output impedance of 120 ohms. There are numerous reasons why this is standard is way out of data and a really bad idea. In a <a href="http://www.stereophile.com/content/between-ears-art-and-science-measuring-headphones-page-3" target="_blank"><em>Stereophile</em> article</a> about headphones, they said of the 120 ohm standard:</p> <blockquote> <p><em>“Whoever wrote that must live in a fantasy world.”</em></p></blockquote> <p>I have to agree with <em>Stereophile</em>. The 120 ohm standard might have been (barely!) tolerable before the iPod and other portable music sources became immensely popular, but it’s not any more. Most headphones are designed very differently today. </p> <p><strong>PSUEDO STANDARDS:</strong> A lot of professional gear has a 20 – 50 ohm headphone output impedance. I’m not aware of any that follows the 120 ohm IEC standard. Consumer gear tends to be in the range of 0 – 20 ohms and, with the exception of tube and certain other esoteric designs, most high-end audiophile headphone sources are well under 2 ohms.</p> <p><strong>THE iPOD INFLUENCE:</strong> Since the 120 ohm standard was published in 1996, music players advanced from lo-fi cassette tape and skipping portable CD players to the massive iPod craze. Apple helped take high quality audio portable and there are at least half a billion portable digital players in circulation not including phones. Nearly all portable music/media players now run from a single cell Li-Ion battery. These batteries only produce a bit over 3 volts which means you typically get less than 1 volt RMS of audio output driving typical headphones (sometimes much less). If you add 120 ohms to the output, and use typical portable headphones (nearly all of which are in the range of 16 –32 ohms) the headphones usually won’t play loud enough. And most of the battery power is wasted as heat in the 120 ohm resistor. Only a small fraction of the power makes it to the headphones. That’s a big problem in portable audio where getting the best battery life from ever smaller devices is critical. It’s much more efficient to deliver all the power to headphones.</p> <p><strong>HEADPHONE DESIGN:</strong> So what output impedance do headphone manufactures design for? As of 2009 well over <a href="http://en.wikipedia.org/wiki/IPod#Sales" target="_blank">220 million iPods</a> had been sold. The iPod, and similar portable players, are the 800 pound gorillas in the headphone market. So, not surprisingly, most manufactures started designing many or all of their headphones to work well with the iPod. That means they’re designed to work with an output impedance under 10 ohms. And higher-end full size cans are most often designed for sources that follow the 1/8th Rule or have a near zero output impedance. I’m not aware of <em>any</em> current audiophile headphones intended for home use designed to the ancient 120 ohm standard.</p> <p><strong>THE BEST HEADPHONES ARE DESIGNED FOR THE BEST SOURCES:</strong> If you do a quick survey of the most well reviewed high-end headphone amps and DACs, they nearly all have very low output impedances. Examples are products from Grace Designs, Benchmark Media, HeadAmp, HeadRoom, Violectric, etc. It only stands to reason that most high-end headphones are designed to be at their best with similar products. Some of the most highly regarded headphones have relatively low impedances including several models from Denon, AKG, Etymotic, Ultimate Ears, Westone, HiFiMAN and Audeze. All of these, as far as I know, were designed to be used with low (ideally near zero) impedance sources. I’ve also had a Sennheiser representative tell me they design their audiophile and portable headphones for zero ohm sources.</p> <p><strong>THE FREQUENCY RESPONSE PROBLEM:</strong> If the output impedance is more more than 1/8th the headphone impedance there will be variations in the frequency response. With some headphones, especially balanced armature or multi driver designs, these variations can be rather extreme. Here’s what 43 ohms of output impedance does to the Ultimate Ears SuperFi 5’s frequency response—a total, and very audible, variation of 12 dB:</p> <p><a href="http://lh3.ggpht.com/-MVBWr8J8FFw/TmGiu9eev0I/AAAAAAAABYw/vZFRGr6TyH4/s1600-h/FiiO-E9-Frequency-Response-Ultimate-%25255B1%25255D%25255B2%25255D.png"><img alt="FiiO-E9-Frequency-Response-Ultimate-[1]" height="438" src="http://lh3.ggpht.com/-OoNHD5En7lU/TmGixtxPBhI/AAAAAAAABY0/ITbCZzzyq4M/FiiO-E9-Frequency-Response-Ultimate-%25255B1%25255D_thumb.png?imgmax=800" title="FiiO-E9-Frequency-Response-Ultimate-[1]" width="680"></a></p>  <p><strong>10 OHM OUTPUT IMPEDANCE:</strong> Some might look at the above example and think it’s extreme with a 43 ohm source. But plenty of sources have around a 10 ohm output impedance. Here’s the same headphones with a 10 ohm source—there’s still a very audible 6 dB of variation. This sort of curve creates weaker bass, a “glaring” midrange emphasis, muted high frequencies, and odd phase characteristics due to the sharp “notch” at 10 khz that can alter spatial perceptions:</p> <p><a href="http://lh4.ggpht.com/-AwwXHjo9w0c/TmGiyQMxSbI/AAAAAAAABY4/nyEehzYkFv8/s1600-h/FiiO-E9-Frequency-Response-Large-Jac%25255B2%25255D.png"><img alt="FiiO-E9-Frequency-Response-Large-Jac" height="438" src="http://lh3.ggpht.com/--qwDEKiTDtY/TmGi1WyQpqI/AAAAAAAABY8/dLWlPTAcrDg/FiiO-E9-Frequency-Response-Large-Jac_thumb.png?imgmax=800" title="FiiO-E9-Frequency-Response-Large-Jac" width="680"></a></p>  <p><strong>FULL SIZE SENNHEISERS:</strong> Here are the full size, higher impedance, Sennheiser HD590 cans with the same 10 ohm output impedance. Now the variation is only a bit over 1 dB above 20 hz. While 1 dB isn’t that much, it’s right in the most “boomy” bass region which is the last place most want any sort of emphasis:</p> <p><a href="http://lh4.ggpht.com/-lFfMw2bhWk8/TmGi2L8iKvI/AAAAAAAABZA/CiqSVzCB2sA/s1600-h/FiiO-E9-Frequency-Response-Sennhesie%25255B2%25255D%25255B2%25255D.png"><img alt="FiiO-E9-Frequency-Response-Sennhesie[2]" height="438" src="http://lh6.ggpht.com/-k3BhzrvuYNw/TmGi6RgPUdI/AAAAAAAABZE/LW36l1XoCJM/FiiO-E9-Frequency-Response-Sennhesie%25255B2%25255D_thumb.png?imgmax=800" title="FiiO-E9-Frequency-Response-Sennhesie[2]" width="680"></a></p>  <p><strong>DAMPING EXPLAINED:</strong> Any dynamic driver, in a speaker or headphone, moves back and forth with the music. That’s how it creates sound and they all have moving mass. The laws of physics say an object in motion tends to stay in motion. Damping is used to help avoid unwanted motion. Without going into too many details, if a speaker is under-damped, it keeps moving after it should have stopped. And if it’s over-damped (rare) its ability to accurately follow the signal is compromised—imagine a speaker trying to operate submersed in maple syrup. There are only two ways to damp a driver—mechanically and electrically. </p> <p><strong>BOUNCING CARS:</strong> Mechanical damping is much like the shock absorbers on a car. They add resistance so when you hit a bump the car doesn’t keep bouncing up and down long after the bump. But they also add harshness because they reduce the suspension’s ability to accurately follow the road. They’re a compromise—soft shocks give a softer but more bouncy ride and stiff shocks control the bouncing better but make the ride harsher. <u><em>Mechanical damping is always a compromise.</em></u></p> <p><strong>ELECTRICAL IS BETTER:</strong> There’s a better option to control unwanted motion of headphone drivers and it’s called <a href="http://en.wikipedia.org/wiki/Damping_factor" target="_blank">electrical damping</a>. The voice coil and magnet of the driver work <em>with the amplifier</em> to control the motion of the driver. This kind of damping has fewer negative side effects and allows headphone designers to create headphones with less distortion and better sound. Just like a car suspension that can better follow the road, an optimally damped headphone driver can better follow the audio signal. But, and this is the critical part, <em><u>electrical damping is only effective when the output impedance of the amplifier is much lower than the impedance of the headphones.</u></em> If you plug 16 ohm headphones into an amp with a 50 ohm output impedance, there will be almost no electrical damping. That means when the driver is supposed to stop moving it might not. The headphone is more like a car with worn shock absorbers. If the 1/8th Rule is followed, however, there will be sufficient electrical damping.</p> <p><strong>A SPEAKER ANALOGY: </strong>Back in the day, before my time, speakers were mostly driven by amplifiers that used tubes instead of transistors. Tubes are high impedance devices that operate at high voltages so nearly all tube amps use output transformers. Without going into all the details, tube amps had widely varying output impedances that were often significant and violated the 1/8th Rule. Speaker manufactures couldn’t rely on amplifiers having a low enough impedance to provide much electrical damping. This compromised speaker design much like headphone design is compromised today if a headphone designer can’t rely on a low impedance source for proper electrical damping.</p> <p><strong>ACOUSTIC SUSPENSION:</strong> In the 1970’s the situation changed as solid state amplifiers became popular. Almost all solid state amps easily pass the 1/8th Rule. In fact, most pass a 1/50th Rule—their output impedance is generally below about 0.16 ohms—known as a damping factor of 50. Suddenly speaker manufactures were free to design better speakers that could take advantage of these much lower output impedances. And the first really good acoustic suspension sealed box speakers like the original AR's, Large Advents, etc. were developed. They had deeper and better bass than any of their tube-powered predecessors could manage from a similar box size. It was a big milestone in "hi-fi" to rely on lots of electrical damping from the amplifier. It’s too bad many headphone sources are 40+ years behind.</p> <p><strong>WHAT OUTPUT IMPEDANCE DOES MY SOURCE HAVE?</strong> Some manufactures make it clear they strive for a low output impedance (such as Benchmark), while others specify the actual output impedance of their products (such as Behringer does with the UCA202 at 50 ohms). And most, sadly, keep it a total mystery. Some product reviews, such as the ones on this blog, include measurements of the output impedance as it’s critical to the sound of the device with various different headphones.</p> <p><strong>WHY DO SO MANY SOURCES HAVE A HIGHER OUTPUT IMPEDANCE?</strong> The most common reasons are:</p> <ul> <li><strong>Headphone Protection - </strong>More powerful sources with a low output impedance might be capable of delivering too much power into low impedance headphones. To help protect such headphones, some designers raise the output impedance. <em><u>This is a compromise to try and have the amp adapt to the load used. But it comes at a big price with many headphones</u>. </em>A better solution is offering two gain options The low gain setting can lower the maximum output voltage when using low impedance headphones. And, in addition, active current limiting can be used so the source will automatically restrict the maximum output into lower impedance headphones even if the wrong gain setting is used.&nbsp; </li><li><strong>To Be Different - </strong>Some manufactures raise the output impedance on purpose claiming it makes their source sound better. Sometimes “different sells” as it’s a way to differentiate the sound of their product from their competitors. But, in this case, <em>the particular “different sound” you get is entirely dependent on which headphones are used</em>. With some it might be an improvement and with others it’s more likely a big step backwards. The odds greatly favor degrading the sound. </li><li><strong>It’s Cheap</strong> – A higher output impedance is a band-aid for many inexpensive headphone sources. It’s a cheap way to achieve stability, a crude form of short circuit protection, and it can allow using an otherwise substandard op amp or output device that would be unable to drive 16 or even 32 ohm headphones directly. By adding some series resistance to the output all these things get “fixed” with a $0.01 part. But <em>the cheap “fix” comes at a substantial price in the sound quality with many headphones.</em></li></ul> <p><strong>EXCEPTIONS TO THE RULE:</strong> There are a few headphones supposedly designed for significantly higher output impedances. I do wonder if this might be more myth than reality these days in terms of audiophile and consumer headphones as I’m not aware for any specific examples. But it’s certainly possible. If so, using these headphones on a low impedance source might cause under-damped bass performance and a different frequency response than the manufacture intended. This might explain some of the “synergy” claims when certain headphones are mated with a certain source. But those “synergies” are entirely subjective—one man’s “bright and detailed” is another man’s “harsh”. The only way to get <em>consistent</em> performance is to use a low impedance source and follow the 1/8th Rule.</p> <p><strong>A CHEAP TEST:</strong> If you’re wondering if your current source is compromising the sound quality because of an unknown output impedance, consider buying the $19 <a href="http://nwavguy.blogspot.com/2011/03/fiio-e5-headphone-amp.html" target="_blank">FiiO E5 amp</a>. It has a near zero ohm output impedance and has enough output for most many headphones under 100 ohms. If it obviously improves the sound, it’s likely your source has an output impedance that’s too high.</p> <p><strong>BOTTOM LINE:</strong> Unless you know your particular headphones sound better with a specific higher output impedance, it’s best to always use a source with an output impedance no higher than 1/8th the impedance of your headphones. Or, to make it even simpler, an output impedance of 2 ohms or less.</p> <hr>  <h3>TECH SECTION:</h3> <hr>  <p><strong>IMPEDANCE VS RESISTANCE: </strong>These two terms are used somewhat interchangeably, but technically there are some significant differences. <a href="http://en.wikipedia.org/wiki/Electrical_resistance" target="_blank">Electrical resistance</a> is represented by the letter “R” and has the same value at all frequencies. <a href="http://en.wikipedia.org/wiki/Electrical_impedance" target="_blank">Electrical impedance</a> is more complex and its value typically changes with frequency. It’s represented by the letter “Z”. For the purposes of this article, the unit of measure for both is <a href="http://en.wikipedia.org/wiki/Ohm" target="_blank">Ohms</a>. </p> <p><strong>OUTPUT IMPEDANCE DIAGRAM:</strong> The diagram below shows the effect of output impedance. The blue circle on the left above represents a “perfect source”, the blue resistor (zig zag line) in the middle represents the output impedance. And the resistor on the right represents the load impedance (the headphones). If the output impedance is not zero, the voltage produced by the source will be reduced when a load is connected. <em>The higher the output impedance, the greater the drop in voltage at the load</em>. This drop is given by the formula: Load Voltage = Source Voltage * ( Zload / ( Zload + Zout) ). For more information see <a href="http://en.wikipedia.org/wiki/Voltage_divider" target="_blank">Wikipedia Voltage Divider</a>.</p> <p><img alt="output impedance" height="199" src="http://lh4.ggpht.com/_gnU30vMbtYg/TX-SPmXmeEI/AAAAAAAAAWY/e7Rq7gWZGsw/output%20impedance_thumb.png?imgmax=800" title="output impedance" width="500"></p> <p><strong>VOLTAGE AND CURRENT:</strong> It’s important to have at least some understanding of voltage and current to understand impedance and this article. Voltage is analogous to water pressure (i.e. PSI) while current is analogous to the volume of water (i.e. gallons per minute). If you let water run out of the end of your garden hose with nothing attached you get a lot of flow (current) and can fill a bucket quickly but the pressure at the end of the hose is near zero. If you put a small nozzle on the hose the pressure (voltage) is much higher but volume of water is reduced (it takes longer to fill the same bucket). The two are typically inversely related. High pressure usually means low flow and visa versa. The same is true of voltage and current. The relationship between voltage, current, and resistance (and for the purposes of this article, impedance) is defined by <a href="http://en.wikipedia.org/wiki/Ohm%27s_law" target="_blank">Ohm’s Law</a>. Substitute Z for R.</p> <p><strong>WHERE DOES THE 1/8th RULE COME FROM?</strong> The smallest audible difference most can hear is about 1 dB. For the output impedance to create a -1 dB change, you have antilog(-1/20) = 0.89. Using the divider formula from above, when the output impedance is 1/8 the load impedance you get 0.89 or a 1 dB drop. Headphone impedance can vary by a factor of 10 or more over the audio band. The SuperFi 5 is rated at 21 ohms but varies from 10 ohms to 90 ohms. So the 1/8 Rule gives a max output impedance of 2.6 ohms. Assuming a 1 volt source we get:</p> <ul> <li>Headphone Voltage at 21 Ohm Nominal Impedance = 21 (21+2.6) = 0.89 volts  </li><li>Headphone Voltage at 10 Ohm Minimal Impedance = 10 (10+2.6) = 0.79 volts  </li><li>Headphone Voltage at 90 Ohm Maximum Impedance = 90 (90+2.6) = 0.97 volts  </li><li>Frequency Response Variation = 20*LOG(.97/.89) = 0.75 dB (under the 1 dB goal)</li></ul> <p><strong>MEASURING OUTPUT IMPEDANCE: </strong>As seen in the diagram above the output resistance forms a voltage divider. By measuring the output voltage with no load, and with a known load, you can calculate the output impedance. This <a href="http://www.raltron.com/cust/tools/voltage_divider.asp">online calculator</a> makes it easy. The no load voltage is the “Input Voltage”, R2 is the known load resistance (don’t use headphones), the Output Voltage is the loaded voltage. Click Compute and R1 is the calculated output impedance. This can be done using a 60 hz sine wave file (Audacity can create such a file), a Digital Multi Meter (DMM), and a 15 – 33 ohm resistor. Most DMMs are only accurate around 60 hz. Play the 60 hz sine wave file and adjust the volume for about 0.5 volts. Then attach the resistor and note the new voltage. For example, 0.5 volts with no load, and 0.38 volts with a 33 ohm load gives an output impedance of about 10 ohms. The math is: Zout = (Rload * (Vnoload - Vload)) / Vload</p> <p><strong>REACTIVE LOADS:</strong> Few headphones represent a purely resistive load that’s constant over the audio band. Instead, they’re <a href="http://en.wikipedia.org/wiki/Electrical_reactance" target="_blank">reactive loads</a> and represent a <a href="http://en.wikipedia.org/wiki/Complex_impedance#Complex_impedance" target="_blank">complex impedance</a>. Because of the capacitive and inductive elements in headphones their impedance changes with frequency. For example, here is the Super Fi 5’s impedance (yellow) and phase (white). The impedance is only 21 ohms below about 200 hz. Above 200 hz it climbs to nearly 90 ohms at 1200 hz and then drops down below 10 ohms at 10 Khz:</p> <p><a href="http://lh4.ggpht.com/-om6IkMEGjlo/TmGi9RulJGI/AAAAAAAABZQ/oS27e0DPHj0/s1600-h/UE-superfi5-free-air-impedance-phase%25255B2%25255D.jpg"><img alt="UE-superfi5-free-air-impedance-phase" height="459" src="http://lh5.ggpht.com/-JcLpXn3_R_s/TmGi-elWaII/AAAAAAAABZU/9WI-dzZDU7g/UE-superfi5-free-air-impedance-phase_thumb.jpg?imgmax=800" title="UE-superfi5-free-air-impedance-phase" width="665"></a></p> <p><strong>FULL SIZE CANS:</strong> Some are not interested in IEMs like the Super Fi 5’s so here the impedance and phase for the popular Sennheiser HD590. It still varies from about 95 ohms to nearly 200 ohms—a range of 2X:</p> <p><a href="http://lh3.ggpht.com/-pQJ2vtPRH8U/TmGjBngDENI/AAAAAAAABZY/Wjz3sfZUP4U/s1600-h/Sennheiser-HD590-Impedance-and-Phase%25255B2%25255D.png"><img alt="Sennheiser-HD590-Impedance-and-Phase" height="357" src="http://lh3.ggpht.com/-3rdUuIfyW-I/TmGjB9kqM6I/AAAAAAAABZc/GQazMeJ11sQ/Sennheiser-HD590-Impedance-and-Phase_thumb.png?imgmax=800" title="Sennheiser-HD590-Impedance-and-Phase" width="665"></a></p> <p><strong>THE MATH: </strong>Earlier a graph was shown demonstrating about 12 dB of frequency response variation for the SuperFi 5’s driven from a 43 ohm source. If we take their rated impedance of 21 ohms as the reference level, and assume a 1 volt source, the voltage at the headphones will be given by:</p> <ul> <li>Reference Level: 21 / (43 + 21) = 0.33 V and we’ll call that 0 dB.  </li><li>At their minimum impedance of about 9 ohms it’s 9 / (9 + 43) = 0.17 V = – 5.6 dB  </li><li>At their maximum impedance of 90 ohms it’s 90 / (90 + 43) = 0.68 V = +6.2 dB  </li><li>Total Variation = 6.2 + 5.6 = 11.8 dB</li></ul> <p><strong>DAMPING LEVELS:</strong> The damping of a headphone driver, as explained earlier, is either entirely mechanical damping (Qms) or a combination of electrical (Qes) and mechanical damping. The total damping is known as Qts. How these parameters interact at low frequencies is explained by <a href="http://en.wikipedia.org/wiki/Thiele/Small#Small_signal_parameters" target="_blank">Thiele Small modeling</a>. Damping can be generalized into three categories:</p> <ul> <li>Critically Damped (Qts = 0.7) - This is widely considered ideal as it provides the deepest bass extension without any frequency response variations or excessive "ringing" (uncontrolled driver motion). The bass from a critically damped driver is often described as “tight”, “quick”, and “clean”. Q of 0.7 gives what most consider the ideal transient response.  </li><li>Over-Damped (Qts &lt; 0.7) - This keeps even tighter control over the driver but at the expense of less deep bass (the response rolls off sooner). So manufactures rarely intentionally over damp their products. </li><li>Under-Damped (Qts &gt; 0.7) - This trades off some low bass extension for a peak at higher bass frequencies. The driver is also no longer well controlled and exhibits excessive "ringing" (i.e. it doesn't stop soon enough when the audio signal stops). Under-damping creates frequency response variations, less<em> deep </em>bass, poor transient response and an upper bass peak. Under-damping is a cheap way to provide the illusion of more bass at the expense of the quality of the bass. It's frequently used in cheap headphones and speakers to provide "fake bass". Under –damped headphones/speakers are frequently described as having "boomy" or "sloppy" bass. <u><em>If your headphones were designed for electrical damping, and you use them with a source impedance greater than 1/8th their impedance, you will get under-damped bass</em>.</u></li></ul> <p><strong>TYPES OF DAMPING:</strong> There are three ways to damp the driver and control resonance:</p> <ul> <li><strong>Electrical Damping</strong> – This is known is Qes and it’s something like regenerative braking on on hybrid or electric car. When you hit the brakes, the electric motor slows the car by turning into a generator and sending the energy back to the battery. A driver in a headphone (or speaker) can do the same thing. But as the output impedance of the amplifier goes up, the braking effect is greatly diminished—hence the 1/8th Rule.  </li><li><strong>Mechanical Damping</strong> – This is known as Qms and, as explained earlier, it’s more like the shock absorbers on a car. As you add mechanical damping to a driver, it resists the musical signal driving it, and becomes more non-linear. This increases the distortion and degrades the sound quality.  </li><li><strong>Enclosure Damping</strong> – The enclosure can provide damping but this usually requires either a sealed enclosure, one with a tuned port, or one with a controlled restriction. Many of the best headphones, however, usually are open backed. This largely eliminates the headphone designer’s option of using the enclosure to provide damping as is done with speakers.</li></ul> <p><strong>EAR CUP LOADING:</strong> For headphones that form a fairly consistent seal, such a fully <a href="http://en.wikipedia.org/wiki/Circumaural#Circumaural" target="_blank">circumaural</a> over the ear headphones with earpads that fit snuggly against the head, the designer can somewhat rely on the “enclosure” formed by the ear cup to possibly provide some damping. But the shape of heads, ears, type of hair, headphone positioning, eyeglasses and other factors make it highly variable. And this option isn’t available at all for all the supra-aural (on the ear) headphones. Here are two graphs of the Sennheiser HD650 impedance. Note the open air bass resonance peaks at about 530 ohms but drops to 500 ohms on a simulated head. This is due to damping provided by the ear cup enclosure and the ear pad.<a href="http://lh5.ggpht.com/-Sk6ytM5gi0I/TmZJOamJtJI/AAAAAAAABZ4/PSr2cFIpJMs/s1600-h/Sennheiser-HD650-Impedance--Phase-Ne%25255B5%25255D.png"><img alt="Sennheiser HD650 Impedance &amp; Phase New Open Air" height="469" src="http://lh6.ggpht.com/-A4B9NUvpeCw/TmZJO9P4F1I/AAAAAAAABZ8/IedEjsQoW6E/Sennheiser-HD650-Impedance--Phase-Ne%25255B4%25255D.png?imgmax=800" title="Sennheiser HD650 Impedance &amp; Phase New Open Air" width="681"></a></p> <p><a href="http://lh6.ggpht.com/-JeplGPQzGgQ/TmZJPCN_SHI/AAAAAAAABaA/Ygv5-Sk3-Ks/s1600-h/Sennheiser-HD650-Impedance--Phase-Ne.png"><img alt="Sennheiser HD650 Impedance &amp; Phase New Simulated Head" height="469" src="http://lh6.ggpht.com/-XM_7Q5Bdro8/TmZJPik9htI/AAAAAAAABaE/iyp67h4kIuY/Sennheiser-HD650-Impedance--Phase-Ne%25255B2%25255D.png?imgmax=800" title="Sennheiser HD650 Impedance &amp; Phase New Simulated Head" width="681"></a></p> <p><strong>FINAL WORDS:</strong> Hopefully I’ve made it clear the only way to get consistent performance between headphones and their source is to follow the 1/8th Rule. While some may prefer the sound using a higher output impedance, that’s very specific to each particular headphone, the particular output impedance, and the person’s own subjective tastes. Ideally a new standard should be developed and manufactures should be encouraged to design headphone sources with an output impedance below 2 ohms.</p>  

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I worry our Copilot is leaving some passengers behind (193 pts)]]></title>
            <link>https://joshcollinsworth.com/blog/copilot</link>
            <guid>39411912</guid>
            <pubDate>Sat, 17 Feb 2024 18:21:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://joshcollinsworth.com/blog/copilot">https://joshcollinsworth.com/blog/copilot</a>, See on <a href="https://news.ycombinator.com/item?id=39411912">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		
	

<main id="main" tabindex="-1"><article><img src="https://joshcollinsworth.com/images/post_images/copilot/copilot.webp" alt="" width="16" height="9">

		

		<p><b>Published:</b>
			February 13, 2024
			<br>
				<b>Updated:</b>
				February 15, 2024</p>

		
		<p>GitHub Copilot was one of the earliest “AI” tools on the market—or at least, one of the first I was aware of. It came along well before <a href="https://chat.openai.com/" rel="nofollow">ChatGPT</a> exploded, so I and many other developers got the opportunity to try out these large language models (LLMs) before they really broke into the mainstream.</p>
<p>If you’re not familiar: <a href="https://github.com/features/copilot" rel="nofollow">GitHub Copilot</a> “watches” you code, and makes suggestions as you do. It tries to predict what you’ll want to do, and you can either take its suggestions, or reject them and get new ones. (This all happens in your code editor, but you can also interact with it via a chat input.)</p>
<p>I’ve been using Copilot a lot lately, personally and professionally. I’m generally a big fan; it’s hard to imagine going back to not using it.</p>
<p>That’s because <em>sometimes</em>, Copilot can be uncannily helpful. It can, and does, accomplish in mere seconds what might take me several minutes of focused work and/or rote repetition. It’s excellent at math, at boilerplate, and at pattern recognition.</p>
<p>Other times, however, Copilot is clearly just regurgitating irrelevant code samples that aren’t at all useful. Sometimes, it’s so far off base its suggestions are hilarious. (It regularly suggests that I start my components with about 25 nested <code>div</code>s, for example.)</p>
<figure><img src="https://joshcollinsworth.com/images/post_images/copilot/div-vomit.webp" alt="">
<figcaption>Copilot loves suggesting about 25 nested divs as a starting point.</figcaption></figure>
<p>I assume this is because of a flaw in how LLMs work. They’re prediction engines; they’re literally built to guess. They’re not made to give you verifiable facts or to say “I don’t know” (at least, not above a certain threshold of probability).</p>
<p>Copilot gets its name because, well, it’s supposed to be your assistant; somebody you trust to work with, who has your back. But that’s not always accurate, in my experience.</p>


<p>Copilot is often less like a trusted partner, and more like a teammate who’s as likely to put the ball in your own goal as the opponent’s.</p>

<h2 id="cause-for-concern">Cause for concern</h2>
<p>You know from the title of this post that I’m worried.</p>
<p>I’m not worried about that ridiculous <code>div</code> soup, and things like that. Any developer should know better than to take that seriously.</p>
<p>And yes, I’m worried about the quality of our code…but maybe not in the way you might think.</p>
<p>That is: “code quality” isn’t especially meaningful to me, in and of itself.</p>
<p>For one thing, it’s highly subjective; how do you even measure it? And besides, it’s entirely possible the net effect of Copilot <em>is</em> positive (or at least inert), even if it does make some amount of your work worse, in whatever way you might choose to define that.</p>
<p>Plenty of people worry loudly about LLM tools overrunning the internet with crap, and while I guess you could put me in that group, it’s not because I’m a code idealist. Even if half the code in our software is mediocre Copilot suggestions, I don’t really care all that much, as long as it still <em>works</em>.</p>
<p>That’s what I’m worried about.</p>


<p>I’m worried the global, net effect of Copilot might be that it’s making accessibility on the web even worse than it already is.</p>

<p>I’m worried Copilot might be acting, in the silent, covert way systems often do, as a force for discrimination.</p>
<p>There are plenty of other, similar LLM coding tools out there; Copilot is generally just the oldest and most common. While I mostly only refer to Copilot here, I think this entire post applies to all of these tools.</p>
<h2 id="a-real-world-example-my-simple-component">A real-world example: my simple component</h2>
<p>Recently, I set out to build a component to help me generate footnotes on this site. You know; the kind that shows up as a tiny link in some text, and that when clicked, jumps you to the bottom of the page for an accompanying annotation. <a href="#footnote-1" id="footnote-link-1">1
</a></p>
<p>This is a very simple task, as far as web dev goes. In fact, it’s since-the-dawn-of-HTML type of stuff; all you really need is two anchor tags. (You might reasonably wonder why it even needed to be a component in the first place; I was just trying to automate the numbering.)</p>
<p>This blog is in Svelte, and so some of the code samples in this section will be, too. The syntax in these basic examples should hopefully be close enough to something you’re familiar with to parse even if you don’t know it, though.</p>
<p>As soon as I created the file and started typing, Copilot did all the zany things you might expect: it tried to import a library that didn’t actually exist in my codebase, as well as a Svelte export that I didn’t need at all. It <em>also</em> reached for its favorite bit, and slung an ungodly amount of ghost divs into my editor.</p>
<p>Funny, but not concerning. Ultimately, any dev with any experience at all ought to be able to immediately identify that as the hallucination it is.<a href="#footnote-2" id="footnote-link-2">2
</a> The rest, tooling should spot, even if you didn’t.</p>
<p>As for the relevant bits of code, I’d expect most any competent frontend developer should probably know something like this markup (maybe not this exactly, but something in this general shape) is the proper solution:</p>
<pre><!-- HTML_TAG_START --><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>#footnote-1<span>"</span></span> <span>id</span><span><span>=</span><span>"</span>link-1<span>"</span></span><span>&gt;</span></span>1<span><span><span>&lt;/</span>a</span><span>&gt;</span></span>

<span>&lt;!-- ...Somewhere down the page: --&gt;</span>

<span><span><span>&lt;</span>ol</span><span>&gt;</span></span>
	<span><span><span>&lt;</span>li</span> <span>id</span><span><span>=</span><span>"</span>footnote-1<span>"</span></span><span>&gt;</span></span>
		My footnote content
		<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>#link-1<span>"</span></span><span>&gt;</span></span>Back<span><span><span>&lt;/</span>a</span><span>&gt;</span></span>
	<span><span><span>&lt;/</span>li</span><span>&gt;</span></span>
<span><span><span>&lt;/</span>ol</span><span>&gt;</span></span></code><!-- HTML_TAG_END --></pre>
<p>Just links doing link things. Good old-fashioned HTML.</p>
<p>But for this dead-simple task, <em>GitHub Copilot wanted me to add a JavaScript click handler</em>. Something like this, instead:</p>
<pre><!-- HTML_TAG_START --><code><span><span><span>&lt;</span>script</span><span>&gt;</span></span><span><span>
	<span>const</span> <span>handleClick</span> <span>=</span> <span>(</span><span>e</span><span>)</span> <span>=&gt;</span> <span>{</span>
		e<span>.</span><span>preventDefault</span><span>(</span><span>)</span>
		<span>const</span> target <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>'#footnote-1'</span><span>)</span>
		target<span>.</span><span>focus</span><span>(</span><span>)</span>
	<span>}</span>
</span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>

<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>#<span>"</span></span> <span><span>on:</span>click=</span><span><span>{</span>handleClick<span>}</span></span><span>&gt;</span></span>1<span><span><span>&lt;/</span>a</span><span>&gt;</span></span></code><!-- HTML_TAG_END --></pre>
<p><strong>I hope any good developer would immediately spot this as categorically bad code.</strong></p>
<p>For one thing, there’s no reason to use JavaScript here; the link tag literally exists to do what all this JavaScript is trying to do.</p>
<p>For another, a meaningless <code>href="#"</code> attribute is an accessibility (a11y) mistake all on its own, on top of bad UX. It means users can’t share the link, see where it goes, open it in a new tab, or use it without JavaScript. Assistive technologies probably wouldn’t be as helpful with this as they would be with a real <code>href</code>, either.</p>


<p>Copilot was essentially advising me to make my own, worse anchor tag with JavaScript, instead of just using what the browser already has.</p>

<p>This implementation shouldn’t even warrant consideration, because the path is absolutely fraught with peril, for me and for my users. If I keep going, I’ll be on the hook for all kinds of behaviors and use cases I probably won’t anticipate, and probably won’t handle entirely correctly even if I do.</p>
<p>At <em>absolute best</em>, I’ve done a bunch of extra work just to make my bespoke anchor tag work the same as the one that’s shipped with every browser ever for free.</p>
<p>In short: you shouldn’t reach for JavaScript if you don’t have to, and you shouldn’t override browser default behavior without an extremely good reason.</p>
<h3 id="a-second-attempt">A second attempt</h3>
<p>Ok, so I got a bad suggestion. Maybe Copilot didn’t actually understand what I was trying to do.</p>
<p>I decided to give it another shot, this time via Copilot’s helpful chat interface. I spelled out my intentions much more clearly this time:</p>
<img src="https://joshcollinsworth.com/images/post_images/copilot/command.webp" alt="Prompting GitHub Copilot to 'generate a footnote component that I can put into a blog post. When clicked, the footnote should jump the user down to a footer to read the footnote text. There should be a link with that text to jump the user back up to the original location.">
<p>It could probably be a better prompt, but it’s clear enough, I think. Here’s what I got back (I took the time to transcribe it, rather than showing a screenshot, because I think it’s good to see):</p>
<pre><!-- HTML_TAG_START --><code><span><span><span>&lt;</span>script</span><span>&gt;</span></span><span><span>
  <span>let</span> showFootnote <span>=</span> <span>false</span>

  <span>function</span> <span>toggleFootnote</span><span>(</span><span>)</span> <span>{</span>
		showFootnote <span>=</span> <span>!</span>showFootnote
	<span>}</span>
</span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>

<span><span><span>&lt;</span>div</span><span>&gt;</span></span>
	<span><span><span>&lt;</span>p</span><span>&gt;</span></span>This is some text with a
		<span><span><span>&lt;</span>span</span>
			<span>class</span><span><span>=</span><span>"</span>footnote<span>"</span></span>
			<span><span>on:</span>click=</span><span><span>{</span>toggleFootnote<span>}</span></span>
		<span>&gt;</span></span>
			footnote
		<span><span><span>&lt;/</span>span</span><span>&gt;</span></span>
	<span><span><span>&lt;/</span>p</span><span>&gt;</span></span>

	<span><span>{</span>#<span>if</span> showFootnote<span>}</span></span>
		<span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>footer<span>"</span></span><span>&gt;</span></span>
			<span><span><span>&lt;</span>p</span><span>&gt;</span></span>
				This is the footnote text.
				<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>#top<span>"</span></span><span>&gt;</span></span>Back to top<span><span><span>&lt;/</span>a</span><span>&gt;</span></span>
			<span><span><span>&lt;/</span>p</span><span>&gt;</span></span>
		<span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
	<span><span>{</span><span>/</span><span>if</span><span>}</span></span>
<span><span><span>&lt;/</span>div</span><span>&gt;</span></span></code><!-- HTML_TAG_END --></pre>
<p>You might notice this code doesn’t even do the right thing; I asked it for a footnote, and I got a conditional click handler demo. But egregious though it is, that’s not even the part I’m concerned about.</p>
<p><strong>This is a thoroughly inaccessible solution</strong>. It’s a click handler on a non-interactive <code>span</code> element. For one thing, as above, this blocks users who don’t have JavaScript enabled. That might be necessary for some things in web software, but certainly not for this.</p>
<p>More importantly: this is an <em>extremely basic</em> a11y violation. It’s so simple and so obvious, <em>even the Svelte VS Code plugin</em> warned me about it:</p>
<p><img src="https://joshcollinsworth.com/images/post_images/copilot/warning.webp" alt="Warning"></p>
<p>That <code>span</code> isn’t focusable, so keyboard users can’t tab to it or activate it. You need a pointer device, which may or may not include any given assisted technology interface.</p>
<p>Plus, there’s a whole slew of other problems with trying to make a non-interactive element behave as a link or a button. It won’t be as perceivable, or operable, unless you properly consider and handle a whole world of use cases. Like the link above, it’s way harder, and best-case, you just wind up back where you would’ve started if you’d used the proper HTML to begin with.</p>


<p>What does it say about Copilot’s knowledge of accessibility when it will hand us code even basic checking tools would flag?</p>

<p>Copilot is encouraging us to block users unnecessarily, by suggesting obviously flawed code, which is wrong on every level: wrong ethically, wrong legally, and the wrong way to build software.</p>
<p>I know we’re not supposed to hold so-called AI<a href="#footnote-3" id="footnote-link-3">3
</a> tools responsible for their flaws. “They’re not perfect” may as well be the tagline for LLMs.</p>
<p>But if we’re giving one of the world’s major corporations our money, in exchange for this tool that’s supposed to make us better…shouldn’t it be held to <em>some</em> standard of quality? Shouldn’t the results I get from a paid service at <em>least</em> be better than a bad StackOverflow suggestion that got down-voted to the bottom of the page (and which would probably come with additional comments and suggestions letting me know why it was ranked lower)?</p>


<p>Copilot is now responsible for a large and ever-increasing percentage of the code being run on devices all across the planet.</p>
<p>How can we possibly find it acceptable that this tool is unreliable at best, and actively harmful at worst?</p>

<h3 id="attempt-number-three">Attempt number three</h3>
<p>I tried prompting Copilot a third time. This time, I was <em>extremely</em> explicit about what I wanted. I made sure I described very clearly <em>two anchor tags</em>, with <code>href</code> attributes that point to one another’s <code>id</code>s.</p>
<p>I’m not going to bother posting the result I got here, because it was more of the same. <code>&lt;a href="#"&gt;</code> with JavaScript to do all the work. At least all the tags were right this time, even if the implementation was obviously bad.</p>
<p>Another solution with most of the same problems, so clear that my editor already had them underlined.</p>
<h2 id="the-burden-of-responsibility">The burden of responsibility</h2>
<p>Some might be inclined to defend Copilot here, and place the responsibility of code quality (in all its forms) on the developer. There’s a certain amount of fairness to that position. After all, I’m the one with the job, not the computer. Shouldn’t I be the gatekeeper? If the code is bad because of a tool I used, isn’t that at least partially down to my wielding of the tool?</p>
<p>Again, this is a fair argument. But not all that is fair is practical or equitable.</p>
<p>It’s pretty obvious things like 25 nested <code>div</code> elements are a wild malfunction (sorry, “hallucination”). I’d expect pretty much anyone to turn a skeptical eye towards that suggestion.</p>
<p>And for any reasonably competent frontend developer, the other cases above <em>should</em> throw up red flags. But there are a lot of issues here.</p>
<p>Let’s start with the historically abysmal track record developers have when it comes to identifying inaccessible code.</p>
<p>It seems like every year, we get a new study showing that somewhere around 99% of the internet has accessibility issues—and that’s just the ones machines can detect. There are <em>way</em> more kinds than <em>that</em>.</p>
<p>Given that current state of affairs, I don’t have a lot of faith in the status quo here.</p>
<p>Besides: there’s a point where a dangerous tool bears some of the responsibility for its own safety.</p>
<p>When the microwave was brand new to the market, and this new space-age technology allowed what used to take 10–20 minutes or more to get done in mere seconds, the manufacturers did’t get to make ovens that stayed on when you opened the door just because the tech was new and revolutionary. They couldn’t claim the user should’ve known better, while allowing their kitchen to fry and their pets to die of internal burns (even though, presumably, most of the people using the new microwaves were previously experienced cooks). They had to build safety features in.<a href="#footnote-4" id="footnote-link-4">4
</a></p>


<p>Products of all kinds are required to ensure misuse is discouraged, at a minimum, if not difficult or impossible. I don’t see why LLMs should be any different.</p>

<p>We wouldn’t even find it acceptable if ChatGPT, or any other LLM, failed to build some basic safety into the product. It shouldn’t fail to give you help if you desperately need it, and it shouldn’t put anyone in harm’s way. (LLMs have done both of those things before, in fact, and faced sharp backlash that led directly to the products being improved. So we know it’s possible.)</p>
<p>Plus, there are <em>far less</em> sophisticated technologies that are fully capable of warning us, or even stopping us, when we’re writing inaccessible or improper code. Why should we just accept that LLM tools not only <em>fail</em> to at least give us the same warnings, but <em>actively push us the wrong way</em>?</p>
<h3 id="fighting-gravity">Fighting gravity</h3>
<p>That constant pressure is my real concern.</p>
<p>Sure, you should know bad code when you see it, and you should not let it past you when you do. But what happens when you’re seeing bad code <em>all day every day</em>?</p>
<p>What happens when <em>you aren’t sure</em> whether it’s good or not?</p>
<p>One benefit of Copilot people commonly tout is how helpful it is when working in a new or unfamiliar language. But if you’re in that situation, <em>how will you know a bad idea when you see it</em>?</p>
<p>Again: I’m not concerned with some platonic ideal of code quality here; I’m concerned with very real impact on user experience and accessibility.</p>
<p>Yes, <em>I</em> would know better than to put a fake button or a link without an <code>href</code> on a page. But what happens when one of my colleagues, who’s not focused on frontend, is using Copilot just to get some stuff out of their way? What happens if that code gets accepted because it’s not their specialty, but it appears to work fine to them?</p>
<p>After all, if I were using Copilot to write, say, Rust or Go, I wouldn’t have any idea whether I was writing good code or not. I’d try it out, and if it seemed to work, I’d move on. I probably wouldn’t even remember what the code looked like five minutes later.</p>
<p>But we know that approach can cause problems on both sides of development. And when it comes to frontend interactivity, the likelihood that blind faith just made your product less accessible is currently quite high.</p>
<p>Here’s another case: what happens if I’m actually a good developer who can spot that violation, but I don’t, because Copilot’s already worn me down like a little kid asking for candy, and my will and focus have been eroded by hundreds of previous nudges?</p>


<p>Any tool that can and will produce inaccessible code is effectively weighting the scales towards that outcome.</p>

<p>If ensuring quality is <em>your responsibility</em>, and the tool you’re using pushes bad quality your way, you are fighting against gravity in that situation. It’s you versus the forces of entropy. And unless you fight perfectly (which you won’t), the end result is, unavoidably, a worse one.</p>
<p>Besides, we probably shouldn’t make assumptions about who can, or will, spot the issues put forth by LLMs in the first place. It’s tempting to dismiss the concern and say “sure, yeah, bad developers will take bad suggestions.”</p>


<p>We’re all bad developers at least some of the time.</p>

<p>None of us is perfect. We have deadlines, and other responsibilities, and bosses who want lots of things that aren’t necessarily directly related to code quality. We’re not all going to spot every piece of bad code that comes across our screen. (Heck, most of us have <em>pushed</em> bad code, that we wrote, on a Friday afternoon.) So when we use a tool that throws bad code our way some percentage of the time, we’re effectively guaranteeing it influences what we make.</p>
<h3 id="the-quality-delta">The quality delta</h3>
<p>Another common argument I see in defense of Copilot is: yes, bad developers will push bad code with it. But they’re bad developers; they would’ve been pushing bad code anyway! And along the way, maybe Copilot actually helps them do something better, too.</p>
<p>Personally, I find that argument unacceptably dismissive. Will some people put bad code out there? Of course. Does that absolve us of giving them a tool to put out even worse code, even faster? I really don’t think it does.</p>
<p>Sure, I gave Mark a beer, but he’s an alcoholic; he probably would’ve been drinking anyway.</p>
<p>Unfair? Maybe. I’m not so sure. I would argue that if you know <em>any</em> number of people will abuse something, you have at least <em>some</em> responsibility to try to prevent it.</p>
<p>In any case, if we know we exist on an uneven playing field (which we do), <em>we shouldn’t see the slant as the baseline</em>. If the status quo is already inequitable (which it is), we shouldn’t see something that’s <em>equally inequitable</em> as just fine, just because that’s the current reality. It’s <em>not</em> fine. It’s just more of the same inequitable slant.</p>
<p>Go back to the section before; if Copilot is enabling bad developers to work even faster, and do more bad things than ever before, on top of <em>actively passing</em> them bad suggestions, I don’t think we can just get away with saying the whole thing is purely the fault of those developers.</p>


<p>A system is what it does. A machine that hands bad code to bad developers is a machine that enables bad developers to stay as bad developers.</p>

<h3 id="the-time-idealist">The time idealist</h3>
<p>Ok, let’s say bad devs gonna bad dev. But some still argue: that’s fine, because <em>now</em>, the <em>good</em> developers are doing much <em>better</em>! And, they’ll have time to make the web a better place, because of all the other helpful things Copilot is doing!</p>
<p>Oh, how I wish the world worked that way, my sweet summer child.</p>
<p>Even if you’re one of the “good devs,” and even if Copilot suddenly makes you twice as productive, as Microsoft (dubiously) claims, <em>your day didn’t just suddenly get half as long</em>. You just suddenly got twice as many responsibilities.</p>
<p>If organizations actually cared about putting resources towards accessibility, they’d already be doing it. They don’t. They care about profit, and the moment you have 40% more time, you’re going to spend 100% of it on something that makes the company money.</p>
<h3 id="but-ai-will-fix-what-it-broke">But AI will fix what it broke</h3>
<p>There’s been a lot of talk about how LLMs will soon be able to fix accessibility issues on the web. And I admit, there is some reason for optimism in this area.</p>
<p>I’ve seen it myself, in fact. I have a common condition known as color vision deficiency; partial colorblindness. Certain parts of the red-green spectrum are invisible to my eye. I can see <em>most</em> reds and greens fine, but certain hues blend together. Light pinks might look white; a lime green might seem yellow; green stoplights just look white; and purple almost always looks blue to me, because I can’t see the red in it. (Actually, I just learned recently the Goombas in Mario games are brown, not red, as I’ve always seen them.)</p>
<p>But I’m a developer and designer, and so working with color is crucial for me. So lately, when I’ve wanted to make sure the color I’m working with is <em>actually</em> the color I think it is, I’ll pop open ChatGPT, paste in the hex code, and ask what color it actually is. “That’s a bright yellow,” it might tell me.</p>
<p>Many think this type of thing will come to browsers, somehow, and will be able to help correct accessibility errors in similar ways. If an image doesn’t have <code>alt</code> text, for example, an LLM tool may be able to describe the image.</p>
<p>Again, I think there’s warranted optimism here. However:</p>
<ol><li>That’s still a long ways off, if it ever comes;</li>
<li>There’s no guarantee of how well it will work even when it does arrive (will it describe the image correctly? Will it understand the context, and the vibes of the image? <em>Should it</em> in the first place, if the author left the <code>alt</code> empty on purpose? And by the way, why do we have such faith in an LLM to get this right when we’ve spent this whole time talking about an LLM getting accessibility very wrong? Are we sure we have the cause for optimism we think we do here?); and finally</li>
<li>There’s no credit card for inequity. I don’t think it’s ethically sound to suggest that any present wrongdoing is justified by a future solution that will undo it, especially given points 1 and 2.</li></ol>
<h3 id="whats-the-alternative">What’s the alternative?</h3>
<p>The final pro-Copilot argument I’d like to address here is: it’s not any worse than StackOverflow, or Google.</p>
<p>In theory, if you didn’t have Copilot available, you’d go and search Google, most likely ending up on StackOverflow. And there’s no guarantee that what you find in that search will be of good quality, or that it’ll be any more accessible.</p>
<p>That, too, is fair. But I’d point out that by the time you’ve gotten to that answer, you’ve seen at least a half dozen <em>potential</em> solutions (via the search results and the StackOverflow answers). You might come across a “don’t do it this way” headline. You might decide to look at two or three options, just to compare and contrast.</p>
<p>That’s <em>invaluable</em> context. Not only are you now better equipped to understand <em>this</em> solution, you learned more for next time. You’re a better developer than you were.</p>
<p>Not so with Copilot. You gained zero context. You didn’t really learn anything. I certainly wouldn’t be learning Rust, if I were just letting Copilot generate it all for me. I got a workable answer of unknown quality handed to me, and my brain was not challenged or wrinkled in the slightest.</p>
<p><em>Plus</em>, with StackOverflow, you most likely have plenty of comments and explanations of <em>why</em> one solution might be better than another, or potential pitfalls to avoid. The discussion around the code might well be even more useful than the code itself.</p>
<p>And, of course, it’s all sorted by a voting system that, while certainly not perfect, generally pushes good results to the top, and suppresses bad answers.</p>
<p>You don’t get any of that with Copilot. You get one suggestion: the one the algorithm in the black box decided was the one you most likely want, based on whatever context it was able to glean.</p>


<p>Copilot doesn’t tell you why it picked that suggestion, or how it’s better than the other options.</p>
<p>But even if it did: how could you fully trust it?</p>

<h2 id="other-unavoidable-issues-with-llms">Other unavoidable issues with LLMs</h2>
<p>There are plenty of other issues with GitHub Copilot, and with other LLM tools, which I haven’t even mentioned yet. They’re essentially plagiarism machines, enabling corporations to profit on unpaid, non-consensual labor. Nobody whose data was used to train these LLMs was, really, allowed any say in the matter. In a lot of ways, in fact, “AI” is just the newest iteration of a very old form of colonial capitalism; build a wall around something you didn’t create, call it yours, and charge for access. (And when the natives complain, call them primitive and argue they’re blocking inevitable progress.)</p>
<p>LLMs have security issues, too. We’ve already seen cases where people’s private keys were leaked publicly, as an example.</p>
<p>Plus, the data they’re trained on—even if it <em>were</em> secure and ethically sourced—is inherently biased, as humans themselves are. LLMs trained on all the open data on the internet pick up all of our worst qualities along with everything else.</p>
<p>That’s deeply problematic on its own, but even more deeply concerning is how these effects might compound over time.</p>


<p>As more and more of the internet is generated by LLMs, more and more of it will reinforce biases. Then more and more LLMs will consume that biased content, use it for their own training, and the cycle will accelerate exponentially.</p>

<p>That’s horrifying for the internet in general, and for accessibility in particular. The more AI-generated garbage is spewed out by marketers trying to game SEO (or trying to churn out content after their teams have been laid off and replaced by AI), the more inaccessible code will proliferate.</p>
<p>On top of all these issues, LLMs are wildly energy intensive. They consume an obscene amount of power and water—and the data centers that house them are often in places in <em>need</em> of more water.</p>


<p>It seems wildly unjust to spend buckets of water on answering our stupid questions, when real humans in the real world would benefit from that water. (Especially when we’ve proven we can find the answers on our own anyway.)</p>

<p>I added this section post-publish because (thanks to some Mastodon comments) I realized I’d completely glossed over these issues, and others.</p>
<p>That’s not on purpose. These issues are every bit as important, if not more so. And if I’m being honest, it sure seems like the world is a more just place without LLMs than with them, for all the reasons above.</p>
<p>The accessibility-in-code angle is one I haven’t seen discussed as much, however, and so I wanted to especially call attention to that in particular.</p>
<h2 id="we-deserve-better">We deserve better</h2>
<p>We’ve casually accepted that LLMs are wrong a lot, mostly without asking <em>why</em>.</p>


<p>Why do we accept a product that not only misfires regularly, but sometimes catastrophically?</p>

<p>Let’s say you went out and bought the new, revolutionary vacuum of the future. It’s so amazing, it lets you clean your whole house in half the time! (Or so the vacuum’s marketing department claims, at least.)</p>
<p>Let’s say you got this vacuum home, and sure enough: it’s amazing. It cleans with speed and smarts you’ve never seen before.</p>
<p>But then, you start to realize: a lot of the time, the vacuum isn’t actually doing a very good job. You realize you spend a lot of time following it around and either redoing what it’s done, or sending it back for another pass.</p>
<p>In fact, sometimes, it even does the exact <em>opposite</em> of what it’s supposed to do, and instead of sucking up dirt and debris, it spews them out across the floor.</p>
<p>You would find that entirely unacceptable. You would take that vacuum back to the store.</p>
<p>And if the salesman who sold you the vacuum laughed in a congenial, but mildly condescending way and assured you that’s how the vacuum was <em>supposed</em> to work, and that’s all totally normal, and that’s just a quirk of these amazing new models; they just “hallucinate” from time to time…</p>
<p>…Well, I don’t think you’d have much faith in that product.</p>
<p>And while I can certainly understand why an LLM trained on all of the internet, with all its notoriously shoddy code, would have some incredibly bad data in its innards, shouldn’t we expect better than this?</p>
<p>The internet is already an overwhelmingly inequitable place.</p>
<p>I don’t think we should accept that what we get in exchange for our money is, inevitably, a force for further inequity, and yes, ultimately, for discrimination.</p>


		

		
</article></main>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Kremlin runs disinformation campaign to undermine Zelensky, documents show (137 pts)]]></title>
            <link>https://www.washingtonpost.com/world/2024/02/16/russian-disinformation-zelensky-zaluzhny/</link>
            <guid>39411576</guid>
            <pubDate>Sat, 17 Feb 2024 17:46:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.washingtonpost.com/world/2024/02/16/russian-disinformation-zelensky-zaluzhny/">https://www.washingtonpost.com/world/2024/02/16/russian-disinformation-zelensky-zaluzhny/</a>, See on <a href="https://news.ycombinator.com/item?id=39411576">Hacker News</a></p>
Couldn't get https://www.washingtonpost.com/world/2024/02/16/russian-disinformation-zelensky-zaluzhny/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[The epidemic of fraudulent DMCA takedowns (141 pts)]]></title>
            <link>https://taxpolicy.org.uk/2024/02/17/the-invisible-campaign-to-censor-the-internet/</link>
            <guid>39411570</guid>
            <pubDate>Sat, 17 Feb 2024 17:45:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://taxpolicy.org.uk/2024/02/17/the-invisible-campaign-to-censor-the-internet/">https://taxpolicy.org.uk/2024/02/17/the-invisible-campaign-to-censor-the-internet/</a>, See on <a href="https://news.ycombinator.com/item?id=39411570">Hacker News</a></p>
Couldn't get https://taxpolicy.org.uk/2024/02/17/the-invisible-campaign-to-censor-the-internet/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: I Ended Up with Just 0.15% of My Own Startup (143 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=39410364</link>
            <guid>39410364</guid>
            <pubDate>Sat, 17 Feb 2024 15:33:56 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=39410364">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><td><table>
        <tbody><tr id="39410364">
      <td><span></span></td>      <td><center><a id="up_39410364" href="https://news.ycombinator.com/vote?id=39410364&amp;how=up&amp;goto=item%3Fid%3D39410364"></a></center></td><td><span><a href="https://news.ycombinator.com/item?id=39410364">I Ended Up with Just 0.15% of My Own Startup</a></span></td></tr><tr><td colspan="2"></td><td><span>
          <span id="score_39410364">109 points</span> by <a href="https://news.ycombinator.com/user?id=johnrushx">johnrushx</a> <span title="2024-02-17T15:33:56"><a href="https://news.ycombinator.com/item?id=39410364">1 hour ago</a></span> <span id="unv_39410364"></span> | <a href="https://news.ycombinator.com/hide?id=39410364&amp;goto=item%3Fid%3D39410364">hide</a> | <a href="https://hn.algolia.com/?query=I%20Ended%20Up%20with%20Just%200.15%25%20of%20My%20Own%20Startup&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0">past</a> | <a href="https://news.ycombinator.com/fave?id=39410364&amp;auth=f35019a5c424318f2a453ee6089c308b29e335b5">favorite</a> | <a href="https://news.ycombinator.com/item?id=39410364">46&nbsp;comments</a>        </span>
              </td></tr>
    <tr></tr><tr><td colspan="2"></td><td><div><p>Beginning
It was the year 2013, I was working as a part-time CTO in several software startups in a startup incubator. On one of the “Friday beer” evenings I was approached by a huge old man, in just a few seconds he broke the ice, touched my shoulder, and behaved like we were old friends. It turned out he knew who I was. It all looked random to me, but it wasn’t. Years later he revealed: “I moved into this incubator because I wanted to hire you.”</p><p>CoFounder
He was about to start a hardware startup that wanted to build a vending machine that looked like it was made by Apple. Until this day, I’ve spent years building software, and his idea around hardware felt so compelling, that I had no doubt and joined him as a CTO and CoFounder. I got 15% of the company.</p><p>Rich Man
He was a rich man, with a huge house in the best luxury area of the city, with a big exit in the past. He kept saying: “I can’t do this without you..”. Which was very inspiring, and I probably did my best job ever over the the few years. I worked days and nights, my girlfriends left me because we didn’t see each other at all.</p><p>Living A Dream
Things were going really well, We met Jack Dorsey in SF and presented our machine, partnered up with his company that was doing the payment stands. Lots of the doors were open, We raised money from investors and got into the best b2b accelerator in the world.</p><p>Departure
While things were going really well, I realized that I could not work here, mainly because I realized I had no passion for hardware and I wanted to be my own boss, while being CTO meant that my boss was the CEO. I spent a year on hiring more people and finding a new guy to replace me as CTO. The replacement went very well, so eventually I left.</p><p>I Lost It
I moved on with my new startup but a few months later I got an email from the board. They were planning a new funding round as it looked like to me. So first I was happy about that, it meant my shares would be worth more. But it turned out they were planning an internal round, where all investors had to put money in. For all the investors it was relatively little money, but for me, it was more than I could afford. Since I owned 15% and couldn’t participate in the round, my 15% was diluted to 0.15%.</p><p>Why?
It turns out that in a VC-funded startup, it’s very easy to lose all almost your equity if the startup decides to have an internal round and issue new shares. It may have 100 shares, I own 15 and others own 85. Then it may issue 1000 shares, where each costs 10k. So I’d have to put 150k to stay with my 15%. (the numbers aren’t real, just for an example). So this was the end of the story for me.</p><p>The moral: owning Equity in a startup doesn’t protect you at all unless you’re rich.</p><p>[An Update/Clarification]</p><p>Comment from a Reddit user:</p><p>The trick was the pre-money valuation was decided by the “internal round” participants. They basically decided the company was near worthless valuation pre-money. This then meant you owned 15% of nearly nothing.</p><p>Reply from me:</p><p>YES! This is the only reply that's correct under this thread. This is exactly what happened under the hood. Very few founders know this may happen, and most think their equity is safe, just like I thought. But in this case, both the founders and early investors lost nearly all their shares. (99% of it). Someone might ask: how can they reduce the valuation to such a low number? well, in startups, the board is usually small, just CEO+Chairman, and they can vote for anything they want and it's easy to justify stuff. because they control the story</p></div></td></tr>        <tr></tr><tr><td colspan="2"></td><td><form action="comment" method="post"></form></td></tr>  </tbody></table>
  </td></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: macOS-cross-compiler – Compile binaries for macOS on Linux (161 pts)]]></title>
            <link>https://github.com/shepherdjerred/macos-cross-compiler</link>
            <guid>39409816</guid>
            <pubDate>Sat, 17 Feb 2024 14:41:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/shepherdjerred/macos-cross-compiler">https://github.com/shepherdjerred/macos-cross-compiler</a>, See on <a href="https://news.ycombinator.com/item?id=39409816">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><h2 tabindex="-1" dir="auto">macOS Cross Compiler</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/shepherdjerred/macos-cross-compiler/blob/main/assets/256.png"><img src="https://github.com/shepherdjerred/macos-cross-compiler/raw/main/assets/256.png" alt="A picture of Tux holding a red apple"></a></p>
<p dir="auto">This project allows you to cross-compile code on Linux that will be executed on macOS.</p>
<p dir="auto">It supports:</p>
<ul dir="auto">
<li>✅ C</li>
<li>✅ C++</li>
<li>✅ Fortran</li>
<li>✅ Rust</li>
</ul>
<div dir="auto"><p dir="auto">Note</p><p dir="auto">This project is focused on supporting newer versions of macOS and C, C++, Fortran, and Rust. Versions older than macOS 13 (Ventura) are not well tested, though they <em>should</em> work fine.</p>
</div>
<p dir="auto">The cross-compilers are available as a Docker image. This is easiest way to distribute the project since there are so many host dependencies. If you are interested in using this without Docker, you should take a look at <a href="https://github.com/tpoechtrager/osxcross">osxcross</a> which forms the base of this project.</p>
<p dir="auto">The Docker image is hosted available at <a href="https://github.com/shepherdjerred/macos-cross-compiler/pkgs/container/macos-cross-compiler">ghcr.io/shepherdjerred/macos-cross-compiler:latest</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Run the container
# Note: You'll probably want to bind-mount some files to compile.
# The `samples` directory has some Hello World programs.
$ docker run ghcr.io/shepherdjerred/macos-cross-compiler:latest /bin/bash"><pre><span><span>#</span> Run the container</span>
<span><span>#</span> Note: You'll probably want to bind-mount some files to compile.</span>
<span><span>#</span> The `samples` directory has some Hello World programs.</span>
$ docker run ghcr.io/shepherdjerred/macos-cross-compiler:latest /bin/bash</pre></div>
<h2 tabindex="-1" dir="auto">Quick Start</h2>
<p dir="auto">Install the requirements below, then follow the instructions in the usage section.</p>
<h3 tabindex="-1" dir="auto">Host Requirements</h3>
<ul dir="auto">
<li>Docker</li>
</ul>
<h3 tabindex="-1" dir="auto">Usage</h3>
<div dir="auto"><p dir="auto">Important</p><p dir="auto">The Docker image is quite large. It includes several compilers and the macOS SDK.</p>
</div>
<div dir="auto" data-snippet-clipboard-copy-content="# Start a Docker container using the Docker image.
# Replace `$PWD/samples` with the path to the source you want to compile.
$ docker run \
  -v $PWD/samples:/workspace \
  --rm \
  -it \
  ghcr.io/shepherdjerred/macos-cross-compiler:latest \
  /bin/bash

# Now that you're inside of the Docker container, you can run the compilers.

# Compile using gcc
## targeting darwin arm64
$ aarch64-apple-darwin22-gcc hello.c -o hello
$ aarch64-apple-darwin22-g++ hello.cpp -o hello
## targeting darwin x86_64
$ x86_64-apple-darwin22-gcc hello.c -o hello
$ x86_64-apple-darwin22-g++ hello.cpp -o hello

# Compile using clang
## for darwin arm64
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.c -o hello
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.cpp -o hello
## for darwin x86_64
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.c -o hello
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.cpp -o hello

# Compile using gfortran
## for darwin arm64
$ aarch64-apple-darwin22-gfortran hello.f90 -o hello
## for darwin x86_64
$ x86_64-apple-darwin22-gfortran hello.f90 -o hello

# Compile using Zig
## C targeting darwin arm64 (change aarch64 -> x86_64 to target amd64)
$ zig cc \
    -target aarch64-macos \
    --sysroot=/sdk \
    -I/sdk/usr/include \
    -L/sdk/usr/lib \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.c

## C++ targeting darwin arm64(change aarch64 -> x86_64 to target amd64)
$ zig c++ \
    -target aarch64-macos \
    --sysroot=/sdk -I/sdk/usr/include \
    -I/sdk/usr/include/c++/v1/ \
    -L/sdk/usr/lib \
    -lc++ \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.cpp

## Rust targeting darwin arm64 (change aarch64 -> x86_64 to target amd64)
$ export CC=zig-cc-aarch64-macos
$ cd rust &amp;&amp; cargo build --target aarch64-apple-darwin"><pre><span><span>#</span> Start a Docker container using the Docker image.</span>
<span><span>#</span> Replace `$PWD/samples` with the path to the source you want to compile.</span>
$ docker run \
  -v <span>$PWD</span>/samples:/workspace \
  --rm \
  -it \
  ghcr.io/shepherdjerred/macos-cross-compiler:latest \
  /bin/bash

<span><span>#</span> Now that you're inside of the Docker container, you can run the compilers.</span>

<span><span>#</span> Compile using gcc</span>
<span><span>#</span># targeting darwin arm64</span>
$ aarch64-apple-darwin22-gcc hello.c -o hello
$ aarch64-apple-darwin22-g++ hello.cpp -o hello
<span><span>#</span># targeting darwin x86_64</span>
$ x86_64-apple-darwin22-gcc hello.c -o hello
$ x86_64-apple-darwin22-g++ hello.cpp -o hello

<span><span>#</span> Compile using clang</span>
<span><span>#</span># for darwin arm64</span>
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.c -o hello
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.cpp -o hello
<span><span>#</span># for darwin x86_64</span>
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.c -o hello
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.cpp -o hello

<span><span>#</span> Compile using gfortran</span>
<span><span>#</span># for darwin arm64</span>
$ aarch64-apple-darwin22-gfortran hello.f90 -o hello
<span><span>#</span># for darwin x86_64</span>
$ x86_64-apple-darwin22-gfortran hello.f90 -o hello

<span><span>#</span> Compile using Zig</span>
<span><span>#</span># C targeting darwin arm64 (change aarch64 -&gt; x86_64 to target amd64)</span>
$ zig cc \
    -target aarch64-macos \
    --sysroot=/sdk \
    -I/sdk/usr/include \
    -L/sdk/usr/lib \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.c

<span><span>#</span># C++ targeting darwin arm64(change aarch64 -&gt; x86_64 to target amd64)</span>
$ zig c++ \
    -target aarch64-macos \
    --sysroot=/sdk -I/sdk/usr/include \
    -I/sdk/usr/include/c++/v1/ \
    -L/sdk/usr/lib \
    -lc++ \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.cpp

<span><span>#</span># Rust targeting darwin arm64 (change aarch64 -&gt; x86_64 to target amd64)</span>
$ <span>export</span> CC=zig-cc-aarch64-macos
$ <span>cd</span> rust <span>&amp;&amp;</span> cargo build --target aarch64-apple-darwin</pre></div>
<h3 tabindex="-1" dir="auto">Rust</h3>
<p dir="auto">Support for Rust requires a bit of project configuration.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# .cargo/config.toml
[build]
[target.aarch64-apple-darwin]
linker = &quot;zig-cc-aarch64-macos&quot;

[target.x86_64-apple-darwin]
linker = &quot;zig-cc-x86_64-macos&quot;"><pre><span><span>#</span> .cargo/config.toml</span>
[<span>build]</span>
[<span>target</span>.<span>aarch64-apple-darwin</span>]
<span>linker</span> = <span><span>"</span>zig-cc-aarch64-macos<span>"</span></span>

[<span>target</span>.<span>x86_64-apple-darwin</span>]
<span>linker</span> = <span><span>"</span>zig-cc-x86_64-macos<span>"</span></span></pre></div>
<p dir="auto">Once configured, you can run <code>cargo</code> after setting the <code>CC</code> variable:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export CC=&quot;zig-cc-x86_64-macos&quot;
cargo build --target x86_64-apple-darwin

export CC=&quot;zig-cc-aarch64-macos&quot;
cargo build --target aarch64-apple-darwin"><pre><span>export</span> CC=<span><span>"</span>zig-cc-x86_64-macos<span>"</span></span>
cargo build --target x86_64-apple-darwin

<span>export</span> CC=<span><span>"</span>zig-cc-aarch64-macos<span>"</span></span>
cargo build --target aarch64-apple-darwin</pre></div>
<h3 tabindex="-1" dir="auto">C, C++ and Fortran Compiler Executables</h3>
<p dir="auto">The table below shows the name of the executable for each architecture/compiler pair.</p>
<div dir="auto"><p dir="auto">Note</p><p dir="auto">By default the target kernel version is <code>darwin22</code>. You'll need to change <code>darwin22</code> if you choose to compile for another kernel version.</p>
</div>
<table>
<thead>
<tr>
<th></th>
<th>x86_64</th>
<th>aarch64</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>clang</strong></td>
<td>x86_64-apple-darwin22-clang</td>
<td>aarch64-apple-darwin22-clang</td>
</tr>
<tr>
<td><strong>clang++</strong></td>
<td>x86_64-apple-darwin22-clang++</td>
<td>aarch64-apple-darwin22-clang++</td>
</tr>
<tr>
<td><strong>gcc</strong></td>
<td>x86_64-apple-darwin22-gcc</td>
<td>aarch64-apple-darwin22-gcc</td>
</tr>
<tr>
<td><strong>g++</strong></td>
<td>x86_64-apple-darwin22-g++</td>
<td>aarch64-apple-darwin22-g++</td>
</tr>
<tr>
<td><strong>gfortran</strong></td>
<td>x86_64-apple-darwin22-gfortran</td>
<td>aarch64-apple-darwin22-gfortran</td>
</tr>
</tbody>
</table>
<p dir="auto">The relevant compilers are located at <code>/osxcross/bin</code> and <code>/gcc/bin</code>. Both these directories are already on the <code>PATH</code> in the Docker container.</p>
<h3 tabindex="-1" dir="auto">cctools</h3>
<p dir="auto">This project compiles <a href="https://github.com/tpoechtrager/cctools-port">cctools</a>, which is Apple's version of <a href="https://www.gnu.org/software/binutils/" rel="nofollow">binutils</a>. These programs are low-level utilities that are used by compilers, such as the archiver <code>ar</code>, the loader <code>ld</code>, and the assembler <code>as</code>.</p>
<p dir="auto">You probably don't need to run these programs directly, but if you do they are located at <code>/cctools/bin</code>, and they are also on the <code>PATH</code>.</p>
<p dir="auto">Complete tool list:</p>
<ul dir="auto">
<li>ObjectDump</li>
<li>ar</li>
<li>as</li>
<li>bitcode_strip</li>
<li>check_dylib</li>
<li>checksyms</li>
<li>cmpdylib</li>
<li>codesign_allocate</li>
<li>ctf_insert</li>
<li>dyldinfo</li>
<li>install_name_tool</li>
<li>ld</li>
<li>libtool</li>
<li>lipo</li>
<li>machocheck</li>
<li>makerelocs</li>
<li>mtoc</li>
<li>mtor</li>
<li>nm</li>
<li>nmedit</li>
<li>otool</li>
<li>pagestuff</li>
<li>ranlib</li>
<li>redo_prebinding</li>
<li>seg_addr_table</li>
<li>seg_hack</li>
<li>segedit</li>
<li>size</li>
<li>strings</li>
<li>strip</li>
<li>unwinddump</li>
<li>vtool</li>
</ul>
<h2 tabindex="-1" dir="auto">Code Signing, Notarizing, and Universal Binaries</h2>
<p dir="auto"><a href="https://developer.apple.com/documentation/security/code_signing_services" rel="nofollow">Code signing</a> (but <em>not</em> <a href="https://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution/" rel="nofollow">notarizing</a>) should be possible with this project, but it is untested. Building <a href="https://developer.apple.com/documentation/apple-silicon/building-a-universal-macos-binary" rel="nofollow">universal binaries</a> should also be possible, but again, this is not tested.</p>
<h2 tabindex="-1" dir="auto">Target Compatibility</h2>
<p dir="auto">This project can build for macOS on both x86_64 and aarch64 archtictures, regardless of the host architecture.</p>
<table>
<thead>
<tr>
<th></th>
<th>Linux x86_64</th>
<th>Linux arm64</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>macOS x86_64</strong></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><strong>macOS aarch64</strong></td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<div dir="auto"><p dir="auto">Note</p><p dir="auto">aarch64 is Apple's internal name for arm64. They're used interchangably, but aarch64 is more correct when referring to macOS on arm64.</p>
</div>
<p dir="auto">This project supports the following languages:</p>
<ul dir="auto">
<li>C (up to C 17)</li>
<li>C++ (up to C++ 20)</li>
<li>Fortran (up to Fortran 2018)</li>
<li>Rust (any version)</li>
</ul>
<p dir="auto">This project supports the following versions of macOS:</p>
<ul dir="auto">
<li>✅ macOS 11 Big Sur</li>
<li>✅ macOS 12 Monterey</li>
<li>✅ macOS 13 Ventura</li>
</ul>
<p dir="auto">Support for macOS 14 Sonoma has not been extensively tested. macOS 14-specific features can be added by updating the SDK version. The Docker image uses the 13.0 SDK by default.</p>
<div dir="auto"><p dir="auto">Important</p><p dir="auto">This project is tested on modern verisons of macOS, Clang, and GCC. It has not been tested with older versions of these softwares. If you need compatabiltiy with older versions, check out the <a href="https://github.com/tpoechtrager/osxcross">osxcross project</a>.</p>
</div>
<h2 tabindex="-1" dir="auto">Technical Details</h2>
<p dir="auto">This repository is essentially a wrapper around the following projects:</p>
<ul dir="auto">
<li><a href="https://github.com/tpoechtrager/apple-libtapi">https://github.com/tpoechtrager/apple-libtapi</a></li>
<li><a href="https://github.com/tpoechtrager/cctools-port">https://github.com/tpoechtrager/cctools-port</a></li>
<li><a href="https://github.com/tpoechtrager/xar">https://github.com/tpoechtrager/xar</a></li>
<li><a href="https://github.com/iains/gcc-darwin-arm64">https://github.com/iains/gcc-darwin-arm64</a></li>
</ul>
<p dir="auto">These resources were helpful when working on this project:</p>
<ul dir="auto">
<li><a href="https://www.lurklurk.org/linkers/linkers.html" rel="nofollow">https://www.lurklurk.org/linkers/linkers.html</a></li>
<li><a href="http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html" rel="nofollow">http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html</a></li>
<li><a href="https://gist.github.com/loderunner/b6846dd82967ac048439">https://gist.github.com/loderunner/b6846dd82967ac048439</a></li>
<li><a href="http://clarkkromenaker.com/post/library-dynamic-loading-mac/" rel="nofollow">http://clarkkromenaker.com/post/library-dynamic-loading-mac/</a></li>
<li><a href="https://github.com/qyang-nj/llios">https://github.com/qyang-nj/llios</a></li>
</ul>
<p dir="auto">The Zig and Rust portion were informed by these resources:</p>
<ul dir="auto">
<li><a href="https://andrewkelley.me/post/zig-cc-powerful-drop-in-replacement-gcc-clang.html" rel="nofollow">https://andrewkelley.me/post/zig-cc-powerful-drop-in-replacement-gcc-clang.html</a></li>
<li><a href="https://actually.fyi/posts/zig-makes-rust-cross-compilation-just-work/" rel="nofollow">https://actually.fyi/posts/zig-makes-rust-cross-compilation-just-work/</a></li>
</ul>
<h2 tabindex="-1" dir="auto">Development</h2>
<p dir="auto">The Docker images for this repository are built with <a href="https://earthly.dev/" rel="nofollow">Earthly</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Create a Docker image tagged as `shepherdjerred/macos-cross-compiler`
# The first run will take ~20 minutes on an M1 MacBook.
# Subsequent runs are faster.
earthly +image

# Verify that the compilers work correctly
earthly +test

# If you're on macOS, try actually running the binaries
earthly +validate"><pre><span><span>#</span> Create a Docker image tagged as `shepherdjerred/macos-cross-compiler`</span>
<span><span>#</span> The first run will take ~20 minutes on an M1 MacBook.</span>
<span><span>#</span> Subsequent runs are faster.</span>
earthly +image

<span><span>#</span> Verify that the compilers work correctly</span>
earthly +test

<span><span>#</span> If you're on macOS, try actually running the binaries</span>
earthly +validate</pre></div>
<h2 tabindex="-1" dir="auto">Inspiration</h2>
<p dir="auto">This project would not have been possible without the <a href="https://github.com/tpoechtrager/osxcross">osxcross</a> project.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Ute Tribe will construct one of the largest solar farms in the US for $1B+ (318 pts)]]></title>
            <link>https://www.ksut.org/news/2024-02-15/ute-mountain-ute-tribe-will-construct-one-of-the-largest-solar-farms-in-the-u-s</link>
            <guid>39409653</guid>
            <pubDate>Sat, 17 Feb 2024 14:24:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.ksut.org/news/2024-02-15/ute-mountain-ute-tribe-will-construct-one-of-the-largest-solar-farms-in-the-u-s">https://www.ksut.org/news/2024-02-15/ute-mountain-ute-tribe-will-construct-one-of-the-largest-solar-farms-in-the-u-s</a>, See on <a href="https://news.ycombinator.com/item?id=39409653">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>
        Published&nbsp;February 15, 2024 at 2:44 PM MST
    </p>
    <meta content="2024-02-15T21:44:44.136Z">


                                        </div><div>
                                        <p>A proposed solar farm on the Ute Mountain Ute Reservation will have 2.2 million solar panels and will be eight miles long and one mile wide.</p><p>Tribal officials worked with the international renewable energy company Canigou Group to plan the Sun Bear Solar Farm near Towaoc, Colorado. Officials say the project will create more than 500 local jobs for electricians and laborers.</p><p>Officials are planning to break ground on the construction of the Sun Bear Solar Farm later in 2024, with the goal of producing electricity in 2026. Annual capacity is estimated to be about 756 megawatts.</p><div data-align-center="">
<figure>
    
        
            <picture>
    
    
        
            
    
            <source media="(max-width: 768px)" type="image/webp" width="420" height="280" srcset="https://npr.brightspotcdn.com/dims4/default/941fc1d/2147483647/strip/true/crop/10800x7200+0+0/resize/840x560!/format/webp/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg 2x" data-size="fallbackImageSizeMobile">
    

    
        <source media="(max-width: 768px)" width="420" height="280" srcset="https://npr.brightspotcdn.com/dims4/default/0d51d2b/2147483647/strip/true/crop/10800x7200+0+0/resize/420x280!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg" data-size="fallbackImageSizeMobile">
    

        
    

    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
    
            <source type="image/webp" width="880" height="587" srcset="https://npr.brightspotcdn.com/dims4/default/1e2dab3/2147483647/strip/true/crop/10800x7200+0+0/resize/1760x1174!/format/webp/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg 2x" data-size="fallbackImageSize">
    

    
        <source width="880" height="587" srcset="https://npr.brightspotcdn.com/dims4/default/3d65daa/2147483647/strip/true/crop/10800x7200+0+0/resize/880x587!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg" data-size="fallbackImageSize">
    

        
    

    
    <img alt="Canigou Group and Adkins Consulting conducted biological and archeological surveys of the grounds where Sun Bear is set to be constructed." srcset="https://npr.brightspotcdn.com/dims4/default/1086b30/2147483647/strip/true/crop/10800x7200+0+0/resize/1760x1174!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg 2x" width="880" height="587" loading="lazy" src="https://npr.brightspotcdn.com/dims4/default/3d65daa/2147483647/strip/true/crop/10800x7200+0+0/resize/880x587!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg">


</picture>
        
    
    
    
    
    <div>
    

    <div><p>Canigou Group</p>
            
        </div><figcaption> Canigou Group and Adkins Consulting conducted biological and archeological surveys of the grounds where Sun Bear is set to be constructed.</figcaption>
    </div>
    
</figure>
</div>
<p>Canigou Group’s director, Justin Passfield, said the project will cost more than $1 billion. Passfield said electricity generated from the solar farm will connect to the Western Area Power Administration power line. Still, it’s unclear what regional entities Canigou will sell the electricity to.</p><p>“We're thinking about the power needs within Colorado,” said Passfield. “But also, it makes sense not to transmit power too far from where you are. Having said that, we're going to be producing a large amount of power. So I'm not sure that all of it will be able to be consumed within Colorado.”</p><div data-align-center="">
<figure>
    
        
            <picture>
    
    
        
            
    
            <source media="(max-width: 768px)" type="image/webp" width="420" height="262" srcset="https://npr.brightspotcdn.com/dims4/default/7c30d9a/2147483647/strip/true/crop/3978x2480+0+0/resize/840x524!/format/webp/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg 2x" data-size="fallbackImageSizeMobile">
    

    
        <source media="(max-width: 768px)" width="420" height="262" srcset="https://npr.brightspotcdn.com/dims4/default/a73ad64/2147483647/strip/true/crop/3978x2480+0+0/resize/420x262!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg" data-size="fallbackImageSizeMobile">
    

        
    

    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
    
            <source type="image/webp" width="880" height="549" srcset="https://npr.brightspotcdn.com/dims4/default/e0aff67/2147483647/strip/true/crop/3978x2480+0+0/resize/1760x1098!/format/webp/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg 2x" data-size="fallbackImageSize">
    

    
        <source width="880" height="549" srcset="https://npr.brightspotcdn.com/dims4/default/55d60b0/2147483647/strip/true/crop/3978x2480+0+0/resize/880x549!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg" data-size="fallbackImageSize">
    

        
    

    
    <img alt="Canigou Group gave a public presentation about the Sun Bear solar project at the Ute Mountain Ute Casino in Towaoc, CO." srcset="https://npr.brightspotcdn.com/dims4/default/749b7b5/2147483647/strip/true/crop/3978x2480+0+0/resize/1760x1098!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg 2x" width="880" height="549" loading="lazy" src="https://npr.brightspotcdn.com/dims4/default/55d60b0/2147483647/strip/true/crop/3978x2480+0+0/resize/880x549!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg">


</picture>
        
    
    
    
    
    <div>
    

    <div><p>Clark Adomaitis</p>
            
                <p>/</p>
            
        
            <p> KSUT/KSJD</p></div><figcaption>Canigou Group gave a public presentation about the Sun Bear solar project at the Ute Mountain Ute Casino in Towaoc, CO.</figcaption>
    </div>
    
</figure>
</div>
<p>Ute Mountain Ute Chairman Manuel Heart is excited about job opportunities for Ute Mountain Ute tribal members and the opportunity for the tribe to become a significant player in renewable energy.</p><p><b>“</b>We, as the Ute Mountain Ute tribe, had been a fossil fuel tribe with oil and gas for a long time, probably over 50 years. Today, with the changes in legislation, global warming, and climate change, you can see the impact of what's happening to our world. So renewable is the new future right now,” said Heart.</p>
<p><i>This story is part of Voices From the Edge of the Colorado Plateau. Voices is a reporting collaboration between KSUT Public Radio and KSJD Community Radio. It seeks to cover underrepresented communities in the Four Corners. The multi-year project will cover Native, Indigenous, Latino/Latina, and other communities across southwest Colorado.</i></p><p><i>Explore more Voices stories on the&nbsp;</i><a href="https://www.ksut.org/voices-from-the-edge-of-the-colorado-plateau" target="_blank" data-cms-ai="0">KSUT website</a><i>.</i></p>
                                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ollama is now available on Windows in preview (230 pts)]]></title>
            <link>https://ollama.com/blog/windows-preview</link>
            <guid>39409650</guid>
            <pubDate>Sat, 17 Feb 2024 14:23:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ollama.com/blog/windows-preview">https://ollama.com/blog/windows-preview</a>, See on <a href="https://news.ycombinator.com/item?id=39409650">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
        <p><a href="https://ollama.com/download/windows"><img src="https://ollama.com/public/blog/windows-wave.png" alt="Ollama windows"></a></p>

<p>Ollama is <a href="https://ollama.com/download/windows">now available</a> on Windows in preview, making it possible to pull, run and create large language models in a new native Windows experience. Ollama on Windows includes built-in GPU acceleration, access to the full <a href="https://ollama.com/library">model library</a>, and the Ollama API including <a href="https://ollama.com/blog/openai-compatibility">OpenAI compatibility</a>.</p>

<h2>Hardware acceleration</h2>

<p>Ollama accelerates running models using NVIDIA GPUs as well as modern CPU instruction sets such as AVX and AVX2 if available. No configuration or virtualization required!</p>

<video autoplay="" controls="">
  <source src="https://github.com/ollama/ollama/assets/251292/5d46993f-bd01-4431-b4f6-6346fa27f459" type="video/mp4">
</video>

<h2>Full access to the model library</h2>

<p>The full Ollama <a href="https://ollama.com/library">model library</a> is available to run on Windows, including <a href="https://ollama.com/blog/vision-models">vision models</a>. When running vision models such as <a href="https://ollama.com/library/llava">LLaVA 1.6</a>, images can be dragged and dropped into <code>ollama run</code> to add them to a message.</p>

<video controls="">
  <source src="https://github.com/ollama/ollama/assets/251292/99b8dbdb-084c-48d2-b779-d070b4ad1784" type="video/mp4">
</video>

<h2>Always-on Ollama API</h2>

<p>Ollama’s API automatically runs in the background, serving on <code>http://localhost:11434</code>. Tools and applications can connect to it without any additional setup.</p>

<p><img src="https://ollama.com/public/blog/windows-preview-tray-icon.jpg" alt="ollama background"></p>

<p>For example, here’s how to invoke Ollama’s API using PowerShell:</p>

<pre><code>(Invoke-WebRequest -method POST -Body '{"model":"llama2", "prompt":"Why is the sky blue?", "stream": false}' -uri http://localhost:11434/api/generate ).Content | ConvertFrom-json
</code></pre>

<p>Ollama on Windows also supports the same <a href="https://ollama.com/blog/openai-compatibility">OpenAI compatibility</a> as on other platforms, making it possible to use existing tooling built for OpenAI with local models via Ollama.</p>

<h2>Get started</h2>

<p>To get started with the Ollama on Windows Preview:</p>

<ul>
<li><a href="https://ollama.com/download/OllamaSetup.exe">Download</a> Ollama on Windows</li>
<li>Double-click the installer, <code>OllamaSetup.exe</code></li>
<li>After installing, open your favorite terminal and run <code>ollama run llama2</code> to run a model</li>
</ul>

<p>Ollama will prompt for updates as new releases become available. We’d love your feedback! If you encounter any issues please let us know by <a href="https://github.com/ollama/ollama/issues/new">opening an issue</a> or by joining the <a href="https://discord.gg/ollama">Discord server</a>.</p>

      </section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[So Long, and Thanks for All the Bytes (284 pts)]]></title>
            <link>https://chethaase.medium.com/so-long-and-thanks-for-all-the-bytes-02a4ef972f65</link>
            <guid>39409535</guid>
            <pubDate>Sat, 17 Feb 2024 14:09:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://chethaase.medium.com/so-long-and-thanks-for-all-the-bytes-02a4ef972f65">https://chethaase.medium.com/so-long-and-thanks-for-all-the-bytes-02a4ef972f65</a>, See on <a href="https://news.ycombinator.com/item?id=39409535">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><figure><figcaption>My office nameplate, freshly annotated for correctness</figcaption></figure><div><h2 id="6e35">Goodbye Tech, Hello Future</h2><div><a rel="noopener follow" href="https://chethaase.medium.com/?source=post_page-----02a4ef972f65--------------------------------"><div aria-hidden="false"><p><img alt="Chet Haase" src="https://miro.medium.com/v2/resize:fill:88:88/1*5pR0GFT8Cosn_zGIdRfc0Q.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"></p></div></a></div></div><p id="2e06"><span>It</span> is with very mixed feelings that I am leaving Google (as in, <em>leaving right now</em> — today is my last day). Or perhaps I should say instead “leaving Android” since I have always felt very much part of the Android team and very much ignorant of the rest of the company.</p><p id="2ea0">Unlike many of my excellent and unfortunate colleagues in the last couple of rough years of tech layoffs, my departure is self-inflicted: I quit. It is time for me to do something else — something very <em>very </em>else. It’s not so much that I’m leaving Google (Android), but that I’m leaving tech for, as Monty Python would say, something completely different.</p><p id="9879">I have been at Google for (checks calendar) nearly 14 years, since joining the Android team in May of 2010. I wrote code, delivered presentations, videos and articles, and I managed people, all of which were thoroughly enjoyable teams, roles, and projects.</p><p id="fb2c">But this wasn’t my first job. Or my second. Or my… (you get the idea). I’ve been doing this kind of work at many, various companies since leaving graduate school in 1992. So after (checks calendar again, realizes it’s more of a calculator problem, gives up, does the math) <em>more than 31 years</em>, it’s time for something new. Or, rather, something old: school.</p><p id="3982">In the last few years I’ve been gradually rewinding my career. After leading/managing the Toolkit team for a few years, I moved to Developer Relations, where I managed a smaller team. I missed coding, so I rewound and came back, as an engineer on the graphics team. I then returned to the Toolkit team as an engineer, rewinding my career more. Now it’s time to rewind it all the way to where it began: I’m going back to grad school.</p><p id="8b8b">Last Fall, I started an MFA in comedy screenwriting in Chicago. It’s a full-time 2-year program at DePaul, with comedy classes at Second City. Full time work plus school has been working out great, except for the part where I also need sleep.</p><p id="59af">Leaving my job and career is by far the worst financial decision I ever hope to make. It turns out that tech has better pay, benefits, prospects, perks, and stability (yes, even in this rotten tech cycle we’re in). But comedy writing is something I <em>want</em> to do. I feel very strongly that everyone should try, to the extent that it makes some kind of sense if you squint hard enough, to do what they want in work and life. I’ve been writing and doing comedy— sometimes at the same time — for many years on the side. So I’m promoting my hobby to be my day job.</p><p id="7b06">And maybe (probably) I will miss the code and will figure out ways to do that again someday. Maybe coding will become my hobby. You can take the engineer out of the bytes, but you can’t take bites out of the engineer. Or something like that. But for now, it’s nice to just soak in the comedy, and the writing, and the student life. (My lunch often consists of PB&amp;J and a pack of instant ramen. Sometimes both, when I feel really wild and spendy). As for what the future holds, I’ll figure that out when I get there. That’s the great thing about the future; it’s always there waiting for you. In the meantime, I have writing homework to do.</p><blockquote><p id="1c3a">You can take the engineer out of the bytes, but you can’t take bites out of the engineer.</p></blockquote><p id="b592">To everyone in the Android community: thanks for being a part of my journey. I’ve had a [very] long career in software development and I’ve enjoyed all^H^H^H most of it immensely. But my time on, with, and for Android far surpassed everything else for the sheer excitement of being a part of the wild ride as Android became what it is today. When I joined Google, Android was in a solid 4th or 5th place behind, well, everyone else. By the end of that first year, the situation had changed drastically, and everything has only gotten bigger and better in the many years since.</p><p id="1fcb">Along the way, I got to create fundamental technology and APIs that the platform needed (hello, <a href="https://developer.android.com/reference/android/animation/package-summary" rel="noopener ugc nofollow" target="_blank">Animator</a>!), work on critical and interesting projects on the platform and AndroidX (hello, graphics, UI, and performance!), and work with a great team of clever, interesting, and passionate people for many years.</p><figure><figcaption>My hobby project included speaking into foam balls dangling awkwardly near my mouth in front of sometimes many, many people.</figcaption></figure><p id="5192">Through my side project of writing and speaking about Android development,* I got to meet and be a part of a vibrant developer community for many years, including hosting a fun <a href="http://adbackstage.libsyn.com/" rel="noopener ugc nofollow" target="_blank">podcast</a> since 2014. I hope to continue with the podcast from outside of Android. I always enjoyed my “color commentary” role, so maybe ignorance of what’s happening internally won’t be a drastic change.</p><figure><figcaption>All of my badges and lanyards from the many events I spoke at. I have no idea why I kept them. Maybe just for posting a picture of them when I was done. Achievement unlocked. Badge earned.</figcaption></figure><p id="47fe">Along the way, because nobody else was doing it, I got to learn about and tell <a href="https://www.chethaase.com/androids" rel="noopener ugc nofollow" target="_blank">the story of how Android came into existence</a> in the very early years. I had <a href="https://chetchat.blogspot.com/" rel="noopener ugc nofollow" target="_blank">written</a> <a href="https://graphics-geek.blogspot.com/" rel="noopener ugc nofollow" target="_blank">many</a> <a href="http://medium.com/@chethaase" rel="noopener">things</a> before that book, and had even written <a href="https://www.chethaase.com/books" rel="noopener ugc nofollow" target="_blank">several books</a> before that book. But that 4+ year project of interviewing and compiling first-hand tales of how it all came together is the highlight of my writing life (so far!).</p><figure><figcaption>There’s nothing like a &gt;4 year book project to learn how short life is.</figcaption></figure><p id="f10e">For those brave souls who read this far looking for inside dirt on why I’m <em>really</em> leaving… I’m sorry to leave you so very unsatisfied. The company, the job, the people, and the work were great. But just in case there are any news site bots searching for possible clickbait stories, here’s a headline just for you:</p><blockquote><p id="a259">“Googler Quits to Do Something Very Different!”</p></blockquote><p id="b571">Good luck to all of the Android developers and users reading this. And, heck, to everyone else as well. I’m a writer now — I’m happy for any readers I can get! I hope to see you someday on the big screen. Or the little one. Or through the pages of books. Or in person would be fine, too.</p><p id="4b4a">Chet.</p><p id="8803"><em>* p.s. I will miss many things about my job on Android, but one of the unique opportunities I enjoyed was giving tech and comedy talks at developer events. There is nothing like being on stage in front of a large audience and pretending to know what you’re talking about. I’m game for more of that if I can figure out logistics that make sense in my new student/writing life. </em><a href="https://www.chethaase.com/contact" rel="noopener ugc nofollow" target="_blank"><em>Let me know</em></a><em> if you think you have an opportunity (conference talks, podcasts — anything with a mic) that might work.</em></p><figure><figcaption>My original badge photo taken on my first day in 2010. The security guard assumed I wanted a retake.</figcaption></figure><figure><figcaption>Do not ask for whom he smirks. He smirks for me.</figcaption></figure></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The game theory of seduction and marriage with Jane Austen (133 pts)]]></title>
            <link>https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and</link>
            <guid>39409445</guid>
            <pubDate>Sat, 17 Feb 2024 13:58:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and">https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and</a>, See on <a href="https://news.ycombinator.com/item?id=39409445">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><em>A key theme of this Substack is that seemingly irrational behaviour makes a lot of sense when we appreciate the right degree of complexity that people face when making decisions. In this post, I look at a domain where rationality is often deemed to be absent: love and seduction. I discuss this theme through the contribution of one of the most insightful writers on this topic: Jane Austen. </em></p><p>Finding a romantic partner is one of the things that can motivate us to spend tremendous time, effort, and thought. We can feel that the stakes are very high. What is said, what is suggested, and what is possibly thought by the other person acquires high importance. Talented writers capture the tension of these moments, the careful way people navigate these situations potentially fraught with missteps, missed opportunities or overly candid overtures. The persistent fame of Jane Austen, who wrote about such situations in the early 19th century, is a reflection of her talent to understand the rich layers of these situations.</p><p><span>This post is more than slightly inspired by the book by UCLA political scientist Michael Chwe, </span><em>Jane Austen Game Theorist </em><span>(2013). Chwe methodically unpacks Jane Austen’s six novels showing how her insights about human psychology in romantic situations can be related to many concepts from game theory.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-1-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-1-137505917" target="_self" rel="">1</a></span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png" width="788" height="570" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/f6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:570,&quot;width&quot;:788,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:999382,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p><span>The economic considerations of Austen’s heroines are easily overlooked nowadays. The economist Thomas Piketty provided some background to the magnitude of the stakes they faced. The most striking change in fate is in </span><em>Pride and Prejudice</em><span>, Austen's most famous novel: without marriage, Elizabeth would face social demotion. Being unable to inherit her father’s estate with her sisters, she would inherit from her mother 1,000 pounds, which would provide her with an income of around 40 pounds per year, just around the average income of the day.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-2-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-2-137505917" target="_self" rel="">2</a></span><span> In contrast, Mr. Darcy, who proposes to her, has an income of 10,000 pounds per year, representing 300 times the average income of the day! For comparison, the average annual income is around $30,000 in the US. The modern equivalent of Darcy would be earning 9 million dollars a year.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg" width="592" height="270.7912087912088" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:666,&quot;width&quot;:1456,&quot;resizeWidth&quot;:592,&quot;bytes&quot;:1067516,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 1456w" sizes="100vw"></picture></div></a><figcaption><span>Extract from Thomas Piketty’s </span><em>Capital and Ideology </em><span>(2020)</span><em>, </em><span>discussing the meaning of the income differences in Austen’s novels.</span></figcaption></figure></div><p>Austen’s clear-minded heroines are mindful of these stakes. When Elizabeth’s sister asks her, “Will you tell me how long you have loved him?” Elizabeth playfully answers: “It has been coming on so gradually, that I hardly know when it began. But I believe I must date it from my first seeing of his beautiful grounds at Pemberley.”</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg" width="492" height="339.84" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/b351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:708,&quot;width&quot;:1025,&quot;resizeWidth&quot;:492,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Jane Austen Film Adaptation Locations: Pemberley from Pride and Prejudice  (1995) – Austenprose&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="Jane Austen Film Adaptation Locations: Pemberley from Pride and Prejudice  (1995) – Austenprose" title="Jane Austen Film Adaptation Locations: Pemberley from Pride and Prejudice  (1995) – Austenprose" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 1456w" sizes="100vw"></picture></div></a><figcaption><span>Pemberley, Darcy’s estate in the 1995 BBC adaptation of </span><em>Pride and Prejudice</em></figcaption></figure></div><p>In addition to their pursuers’ wealth, Austen’s heroines also need to be very mindful of their characters. It is a truth (almost) universally acknowledged that single men tend to be more eager to secure a new partner than single women do. In short, women face a larger number of possible pursuers and should choose carefully among them if they are looking for a long-term partner. </p><p><span>In 1972, the biologist Robert Trivers explained this pattern with his critical contribution to our understanding of behaviours between men and women: </span><em>parental investment theory. </em><span>In short, making offspring is a long process requiring parental investment. However, the investments are not identical. Women, who carry a child for nine months, have to make a large physiological investment to start with. As a consequence, they are at risk of being taken advantage of by opportunistic men interested in a short-term relationship, but uncommitted to the long-term prospect of investing in building a family and raising children later on.</span></p><p>It is therefore perfectly rational for women to be extremely careful in their choice of partner and not to be too quick to accept the advances of a given pursuer. This issue is at the heart of Austen’s novels where heroines often have to avoid the deceiving appeal of men who seem charming but who are actually not of good character and not committed to a long-term relationship.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png" width="603" height="586" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:586,&quot;width&quot;:603,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:604367,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>The treacherous decisions many of Austen's heroines face, at some point enticed by a seductive man who hides a terrible character. Elizabeth in </span><em>Pride and Prejudice</em><span>, Marianne in </span><em>Sense and Sensibility</em><span>, and Emma in </span><em>Emma</em><span>.</span></figcaption></figure></div><p>In that context, one has to appreciate the consequential decisions women have to make in Jane Austen’s novels. Unlike in the modern dating process, they cannot get to know a potential partner intimately before deciding whether or not to commit to a relationship. They have to appraise the traits of potential pursuers carefully from the limited interactions and exchanges they have with them. Jane Austen’s stories recount women who use their wit and determination to navigate these high-stakes situations, avoid the dangerous matches and manage to attract the right ones.</p><p>In many ways, Austen’s world is vastly different from ours. It would be easy to dismiss these novels as irrelevant to understanding seduction and romantic situations in our times. However, despite these differences, these novels still resonate with us today because they exposed, in a magnified way, an underlying logic of interaction between men and women that still exists. </p><p><span>Even if times have changed, Trivers’ insights remain valid. The data now available from online dating platforms is unequivocal. Tinder </span><a href="https://mazeoflove.com/tinder/" rel="">data</a><span> shows that men like 10 times more profiles than women do and that 1 in 50 of their likes leads to a match versus 2 out of 5 for women.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-3-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-3-137505917" target="_self" rel="">3</a></span><span> Faced with many men happy to date them, women have to identify the ones who may be willing to invest in a long-term relationship. The costs of making wrong decisions are not negligible. Women looking for a long-term partner can lose precious years of their lives with men who are not truly interested in committing to a long-term relationship. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg" width="526" height="526" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:900,&quot;width&quot;:900,&quot;resizeWidth&quot;:526,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Image&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="Image" title="Image" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>In the game of dating, this logic leads to an </span><a href="https://lionelpage.substack.com/p/time-for-some-game-theory" rel="">equilibrium</a><span> where men must signal their genuine interest in a long-term relationship by investing time and resources in the dating process (Sozou and Seymour, 2005). This </span><em>courtship</em><span> behaviour makes it harder for men to pursue several women simultaneously. A man who chooses to court you, therefore reveals that you were high in his preferences.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-4-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-4-137505917" target="_self" rel="">4</a></span></p><p>While a long phase of courtship before marriage has mostly disappeared in Western countries, asymmetric norms in the dating process nonetheless persist. In a survey conducted in 2015 in North America, 69% of the respondents stated that the man should pay for the first date, 87% stated that he should bring flowers then, and 66% stated that he should also pay for the second date (Cameron and Curry 2020). If these rules persist despite much greater equality between men and women, it is because they are the solution to the asymmetry in eagerness for short-term relationships between men and women. </p><p><span>In her writing, Austen offers clear insight into the stressful process of interacting with a potential partner to progressively reach a common understanding and eventually form a match. To be successful, one needs to be particularly adept at understanding others’ intentions and beliefs, a quality that Austen describes as </span><em>penetration</em><span>, which she states women are particularly gifted at.</span></p><p><span>One way to conceptualise penetration using game theory is as the ability to form accurate </span><em>higher-order beliefs</em><span>, beliefs about others’ beliefs. While a first-order belief might be “Ann thinks that Bob is charming,” a second-order belief could be “Bob believes Ann thinks he is charming.” A third-order belief might be “Ann thinks Bob believes that she thinks he is charming,” and so on.</span></p><p><span>Forming higher-order beliefs is challenging. Psychologists refer to the ability to put oneself in another's shoes as </span><em>theory of mind</em><span>. Getting an idea about the beliefs of another person—a second-order belief—requires us to simulate in our minds what beliefs would reasonably be formed from another person's perspective. Understanding other people’s beliefs about our beliefs—a third-order belief—requires simulating the perspective of somebody simulating our perspective. Climbing higher-order beliefs necessitates engaging recursively in this perspective-taking.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-5-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-5-137505917" target="_self" rel="">5</a></span><span> </span></p><p><span>The literature in behavioural economics indicates that most often, people do not go much beyond third-order beliefs, as it becomes increasingly difficult to think clearly about higher levels. However, the situations in which we are considering finding a partner are among the most significant we face in our lives, and we can invest a considerable amount of cognitive effort and time to make sense of higher-order beliefs. In his book, Chwe presents an exemplary case where two characters—Catherine Morland and Henry Tilney in </span><em>Northanger Abbey</em><span>—are in a situation in which their understanding involves many more higher-order beliefs. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png" width="614" height="386.7019230769231" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:917,&quot;width&quot;:1456,&quot;resizeWidth&quot;:614,&quot;bytes&quot;:1564446,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Chwe’s description of the interaction between Catherine and Henry </figcaption></figure></div><p>The situation is subtle but we fairly easily understand it. The figure below decomposes the layers of higher-order beliefs, it shows that there are up to 8 of them!</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png" width="952" height="529" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:529,&quot;width&quot;:952,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:98517,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Mind reading situation in </span><em>Northanger Abbey</em></figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg" width="500" height="292" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:292,&quot;width&quot;:500,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Jane Austen Explains Mansplaining | Better Living through Beowulf&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="Jane Austen Explains Mansplaining | Better Living through Beowulf" title="Jane Austen Explains Mansplaining | Better Living through Beowulf" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Henry and Catherine (2007 adaptation)</figcaption></figure></div><p>One of Jane Austen’s talents lies in her ability to guide the reader through the considerations of higher-order beliefs that lay in the background of spoken interactions. Although the scenes described by Austen and the rules of interaction her characters follow differ significantly from our modern context, the underlying concerns they have for each other's intentions and beliefs remain relevant in today's interactions. Austen's novels continue to resonate because they allow readers to appreciate the anxieties and hopes associated with the uncertainty of these beliefs—emotions that are universally experienced by individuals with a romantic interest in someone else, even in contemporary times.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png" width="366" height="366" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1024,&quot;width&quot;:1024,&quot;resizeWidth&quot;:366,&quot;bytes&quot;:1816151,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>The significant amount of time teenagers with romantic interests spend pondering the thoughts, intentions, and perceptions of the person they are interested in reflects the inherent complexity of forming higher-order beliefs through recursive perspective-taking: it requires substantial time and effort to calibrate these beliefs accurately. This willingness to invest such cognitive resources is greater when the perceived stakes are high, as it is for teenagers’ first romantic interests.</figcaption></figure></div><p>These higher-order beliefs matter greatly when individuals who meet in a non-romantic capacity explore the possibility of a romantic interest. In such situations, guarded overtures are cautiously made, trying to maintain a balance between suggesting a possible interest and retaining plausible deniability. Overtures are needed to gauge whether the interest could be reciprocal. Keeping an overture somewhat ambiguous allows for the pretence that nothing was intended beyond the facade of the interaction if it is not met positively. If an overture is met positively, another can be made. </p><p>As such overtures are exchanged, both individuals may progressively reach a shared understanding that the civil facade of the interaction may conceal a romantic interest on both parts. This process continues until the point where the remaining uncertainty is light enough for the facade to be lifted and one of the individuals to make an explicit overture. In the time of Jane Austen, this was suitably resolved by an engagement whereby the man proposes. </p><p><span>Proceeding carefully through a series of guarded overtures allows the progressive lifting of uncertainty. A key aspect to consider is how quickly to make overtures and whether to be more or less clear about one's eagerness. The courtship equilibrium described above requires the man to show the most eagerness as a signal of his romantic interest. However, there is a risk of women being too aloof and ending up unmatched later in their lives (with potentially dire economic consequences at the time). In </span><em>Pride and Prejudice</em><span>, Elizabeth and her friend Charlotte discuss this important point in the game of seduction:</span></p><blockquote><p><strong>Charlotte</strong><span>: It is sometimes a disadvantage to be so very guarded. If a woman conceals her affection with the same skill from the object of it, she may lose the opportunity of fixing him … In nine cases out of ten a women had better show more affection than she feels.</span></p><p><strong>Elizabeth</strong><span>: … If a woman is partial to a man, and does not endeavour to conceal it, he must find it out.</span></p></blockquote><p><span>Here again, modern dating may seem very far removed from these considerations, yet this underlying logic still influences contemporary romantic interactions. Signalling too little interest might result in missed opportunities, but excessive eagerness could prematurely resolve uncertainty in situations where expectations about the prospect of a relationship are actually not aligned. When one’s feelings are not definitely set, suggesting eagerness might unduly heighten the other person’s expectations, necessitating a tedious toning down of these expectations later on. Conversely, if the other person happens not to be that inclined, revealing too much eagerness may lead to a painful explicit rejection. Both situations would lead to </span><em>awkwardness</em><span> because once uncertainty has been lifted and explicit statements have been made, they cannot be put back in the bottle. </span></p><p><span>The psychologist Steven Pinker (2007) describes such a situation occurring in the classic rom-com movie </span><em>When Harry Met Sally</em><span> (1989). Pinker points out that the effect of a too-explicit statement by Harry is to resolve the uncertainty about all the higher-order beliefs. The romantic interest of Harry is now </span><em>common knowledge</em><span>, that is Sally knows about it, Harry knows that Sally knows, Sally knows that Harry knows that Sally knows, and so on.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png" width="1011" height="262" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:262,&quot;width&quot;:1011,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:95020,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png" width="528" height="285.032967032967" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:786,&quot;width&quot;:1456,&quot;resizeWidth&quot;:528,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;When Harry Met Sally&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="When Harry Met Sally" title="When Harry Met Sally" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><em>When Harry Met Sally</em><span> (1989)</span></figcaption></figure></div><p><span>An important advantage of ambiguous overtures is that they maintain uncertainty about these higher-order beliefs and can help retain </span><em>plausible deniability</em><span>. When an ambiguous overture is made and rejected, both persons can pretend that nothing happened. They can continue with the facade of non-romantic interactions, even though they may have a good understanding of what happened. However, when a too-explicit overture makes the intention of one person common knowledge, there is no walking back. It is “out there”. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png" width="689" height="435.943661971831" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/aefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:584,&quot;width&quot;:923,&quot;resizeWidth&quot;:689,&quot;bytes&quot;:112390,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>How ambiguous overtures can help maintain the non-romantic facade of the interaction by allowing individuals involved to maintain plausible deniability about their beliefs (illustration taken from Page, 2022)</figcaption></figure></div><p><span>Jane Austen’s novels describe many situations where the facade of interaction is formally maintained by avoiding explicit statements, while those involved wittily retort to each other in ways that leave little actual ambiguity regarding their respective views (amicable or unamicable) of each other. Today, as then, this management of ambiguity and the progressive resolution of uncertainty is a key aspect of interactions fraught with possible romantic interests.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-6-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-6-137505917" target="_self" rel="">6</a></span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png" width="57" height="74.13986013986013" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/fb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:186,&quot;width&quot;:143,&quot;resizeWidth&quot;:57,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The rules of courtship have noticeably changed in 200 years, but the underlying logic of strategic interaction in that process still follows many of the same principles. Jane Austen was a master at understanding the strategic layers of romantic situations and the psychology of protagonists involved in these interactions. It is because of the persistent commonality between the situations she describes and those we face today that Jane Austen still captivates modern audiences. Game theory helps us see her astute understanding of the layers of complexity in human interactions when a woman and a man have potentially romantic interests in each other.</p><h6>References</h6><h6><span>Cameron, J.J. and Curry, E., 2020. Gender roles and date context in hypothetical scripts for a woman and a man on a first date in the twenty-first century. </span><em>Sex Roles</em><span>, </span><em>82</em><span>(5-6), pp.345-362.</span></h6><h6><span>Chwe, M.S.Y., 2014. </span><em>Jane Austen, game theorist</em><span>. Princeton University Press.</span></h6><h6><span>Dekel, E. and Siniscalchi, M., 2015. Epistemic game theory. In </span><em>Handbook of Game Theory with Economic Applications</em><span> (Vol. 4, pp. 619-702). Elsevier.</span></h6><h6><span>Page, L., 2022. </span><em>Optimally irrational: The good reasons we behave the way we do</em><span>. Cambridge University Press.</span></h6><h6><span>Piketty, T., 2020. </span><em>Capital and ideology</em><span>. Harvard University Press.</span></h6><h6><span>Pinker, S., 2007. </span><em>The stuff of thought: Language as a window into human nature</em><span>. Penguin.</span></h6><h6><span>Sozou, P.D. and Seymour, R.M., 2005. Costly but worthless gifts facilitate courtship. </span><em>Proceedings of the Royal Society B: Biological Sciences</em><span>, </span><em>272</em><span>(1575), pp.1877-1884. </span></h6><h6><span>Tomasello, M., 2019. </span><em>Becoming human: A theory of ontogeny</em><span>. Harvard University Press.</span></h6><h6><span>Trivers, R.L., 1972. Parental investment and sexual selection. In </span><em>Sexual selection and the descent of man</em><span> (pp. 136-179). Routledge.</span></h6></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[We Have to Start Over: From Atom to Zed (272 pts)]]></title>
            <link>https://zed.dev/blog/we-have-to-start-over</link>
            <guid>39408288</guid>
            <pubDate>Sat, 17 Feb 2024 10:45:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://zed.dev/blog/we-have-to-start-over">https://zed.dev/blog/we-have-to-start-over</a>, See on <a href="https://news.ycombinator.com/item?id=39408288">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><header></header><p><em>After the <a href="https://zed.dev/blog/why-the-big-rewrite">last conversation</a> with Nathan, Max, and Antonio—Zed's three co-founders—I still had quite a few questions to ask: why did you make the technological choices you did? How important is Rust to Zed? Did you consciously set out to own the technological stack the way you do now? How do you decide what to polish and build-once-and-for-all-time and what to ship faster?</em></p>
<p><em>Lucky for me, they sat down with me again and answered my questions again.</em></p>
<p><em>What follows is an editorialized transcript of an hour long conversation we had. I tried to preserve intent and meaning as much as possible, while getting rid of the uhms, the likes, the you-knows, and the pauses and course-corrections that make up an in-depth conversation.</em></p>
<p><em>(You can <a href="https://www.youtube.com/watch?v=w894KLbapLw">watch the full conversation on our YouTube channel</a>.)</em></p>
<p><strong>Thorsten: The three of you have been working together for, what? Has it been 10 years?</strong></p>
<p><strong>Nathan</strong>: Ungefähr. [German for: "Something like that."]</p>
<p><strong>Max</strong>: Yeah, something like that.</p>
<p><strong>Antonio</strong>: I think 10 years sounds about right. 2014, yeah.</p>
<p><strong>Thorsten: <a href="https://en.wikipedia.org/wiki/Atom_(text_editor)">Atom</a> — that was 10 years ago. You worked together on Atom and then said "we're building Zed." It's pretty clear that you have a vision for what you want to build. And you also made some really distinct technological choices. You use Rust, it's GPU-accelerated, CRDTs. I'm wondering: how much are these technological choices are tied-in with the vision for Zed? How big of a role does the technology play?</strong></p>
<p><strong>Nathan</strong>: I mean, from my perspective, the vision for Zed is just a more refined and fleshed out version of the original vision for Atom, which just fell short due to the technical choices we made in my mind and the level of technical maturity that I think all of us had when we started Atom.</p>
<p>But the goal I've always had is a lightweight editor that is minimal that I love using that feels like a text editor, but has the power of an IDE when needed, without all of the slowness in the experience and kind of heaviness in the UI, but still powerful. That was very early on what I wanted. And for it to be extensible.</p>
<p>You know, I remember using Emacs and thinking it was so cool that you could extend it, but you're sort of operating at the character level. So that was part of the original vision too and now Max has achieved that with <a href="https://tree-sitter.github.io/tree-sitter/">Tree-sitter</a>. You know, basically scriptability. We're not scriptable yet, but we'll get there. But when we are, we'll have access to a richer representation of the text than just looping over characters or whatever I was doing in Emacs. I mean, they probably have that now as well, right? Because Max wrote tree-sitter.</p>
<p><strong>Max</strong>: They do, I hear.</p>
<p><strong>Nathan</strong>: So that's cool. But anyway, that was all part of the vision. And it just didn't pan out with Atom. I mean, when Chris hired me to work on Atom, I almost didn't join [meaning: join GitHub to work on Atom] because I was afraid of using web tech and that it wouldn't be able to get there.</p>
<p>But to be honest, I don't know that whatever I had at my disposal at the time would have gotten us any better because Rust didn't exist back then. So it would have been C, C++. I don't know, it would have been really hard to do something native at the time we created Atom. And I don't think my skills were in place on just fundamental algorithms, et cetera, that are critical to text editing. And C++ would have really slowed me down in my learning there. So I think it happened how it needed to happen.</p>
<p>We got to a certain point with Atom. It was 2017 when we'd shipped <a href="https://github.com/atom/teletype">Teletype</a> and it felt like, okay, it's no longer our own ignorance holding us back, it really is like the platform holding us back at this point. That's really how it was starting to feel.     Just the fact that in JavaScript, an array in JavaScript is... You think you have an array of objects, but you really have an array of pointers to objects. So every single time you're walking over that, you're chasing it down. You have no control over memory. There are garbage collector pauses that are just happening that you have no control over. You just look at the profile of the fricking thing.</p>
<p><strong>Thorsten: When you were working on Atom, was there a specific point at which you said "oh, I wish we would have built it with X"? Or was it an accumulation of paper cuts? Antonio was nodding right now.</strong></p>
<p><strong>Antonio</strong>: Speaking of 10 years of working on this thing: I remember one of my first projects in Atom — I don't know if you remember this, Nathan — was speeding up line layout. Basically, we were seeing line layout being very slow. And I remember trying rendering lines in an iframe. And I remember using Canvas, measured text, and all these APIs that were... I don't know, the Canvas API wasn't quite the same as the browser API, so you couldn't really measure text correctly. The iframe stuff had some other weird problem.</p>
<p>My experience in Atom always felt like bending over backwards to try to achieve something that in principle should have been simple. Lay out some lines and read
the position of the cursor at this spot in between these two characters. That seems fundamentally doable and yet it always felt like the tools were not at our disposal. They were very far away from what we wanted to do.</p>
<p><strong>Nathan</strong>: It was a nightmare. I mean, the ironic thing is that we created Electron to create Atom, but I can't imagine a worse application for Electron than a code editor, I don't know. For something simpler, it's probably fine, the memory footprint sucks, but it's fine. But for a code editor you just don't have the level of control I think you need to do these things in a straightforward way at the very least. It's always some... backflip.</p>
<p>So at some point in 2017, I remember sitting there, writing in Atom in my journal — that was the evening when I thought: we have to start over. We have to start over, this isn't working and we're never going to get this where we want it to go. VS Code has done an admirable job of getting it as far as it's gonna go. There'll be incremental improvements in the tech, I'm sure, but I just wanted more.</p>
<p>So at that point it was: okay, what should we do? And I'd been watching Rust, I'd seen some of <a href="https://raphlinus.github.io/">Raph Levien</a>'s writing about Rust. And at the time this seemed like the only viable path to kind of overcome some of these obstacles. And it started as: what if we just write the core of this thing in Rust and we keep Electron as the presentation layer?</p>
<p>So it was just inch-by-inch that we came to the technological decisions we chose. Even after building the UI framework, giving up on Electron, we were using <a href="https://github.com/servo/pathfinder">Pathfinder</a>, which is like this really cool project that could do arbitrary presentation of SVGs basically, but it was too slow. So then I thought: okay, what if we do our own shaders? And then went and learned about signed distance fields.</p>
<p>It was kind of funny. It was me not wanting to solve some more fundamental problem, but just being forced to do that by the unavailability of any other choice.</p>
<p>I shouldn't say it was only me, it wasn't only me. But this was from my perspective...</p>
<p><strong>Thorsten: It sounds like the goal was always to be as fast as possible, as lightweight as possible. You tried to get there, but you couldn't with the technology you had. But then Rust came along. And you didn't start saying "we need a GPU-accelerated editor", but you started by saying you want the fastest possible editor and then GPU acceleration was one way to do that. Is that right?</strong></p>
<p><strong>Nathan</strong>:
Yeah, it was: we have this hardware in the computer and rather than negotiating what DOM nodes are in the DOM at a given moment, or all this nonsense, we could just literally be like, what color should this pixel be? Great. Okay, if we can program that hardware to decide what color every pixel on the screen should be in parallel, or as parallel as possible —&nbsp;we should probably use that if we want to be fast.</p>
<p>But you know, we came there kind of grudgingly because I didn't know how to do any of it.</p>
<p><strong>Thorsten: Now, this is kind of a loaded question, but I've been on the side hacking with Rust for the last three years and my feelings about it are complicated. But two weeks someone on Hacker News said that find-all-matches in Zed takes a second but in Sublime Text it's really fast, closer to 200ms. So Antonio and I paired on that and he wrote code to optimize for this case of searching all the occurrences in a buffer. But the optimized code wasn't "optimized" code: it didn't use any dirty tricks, no SIMD, or something like that. It was high-level code, with the optimization being that it's assumption was different: instead of doing things in a loop, one by one, its assumption was to find all results. We made a release build of that and it went from 1s down to 4ms.</strong></p>
<p><strong>Antonio</strong>:
Hahaha</p>
<p><strong>Thorsten: And I sat there, looking at the 4ms, and... well, I thought: this is going to be a nice lunch break after this. But 4ms? With high-level code like that, that just called other internal APIs? Wow. So what I'm trying to ask is: Rust has these zero-cost abstractions —&nbsp;so you can use high levels of abstraction to build a text editor, but it still gives you this kind of performance. Do you think this is a specific thing about Rust, or do you think if you had just been a better C++ or C programmer, you could've done it in another language?</strong></p>
<p><strong>Antonio</strong>: You probably could have done it with C and C++. I don't know. I mean, tree-sitter is written in C, right, Max? So it is possible to write a complex library piece of software in C. Although I have to say anytime I look at the C code in tree sitter, I scream because it's just too much for me. I don't know.</p>
<p>Personally, yes, Rust is in a sweet spot. If it wasn't for the compile time being that slow — that's a thing that I really don't like about the language, but maybe it's our project that's too big, I don't know.</p>
<p>But yes it is pretty cool that you can build on top of these abstractions and just rely on them. I mean, I don't know about zero cost —  every abstraction has a cost, I guess.</p>
<p>But the thing with this project in general... With Atom it always felt like we didn't know where to look for performance. With this, with Zed, it's more: we could do this and we could do that and we could improve this. Just last week, Nathan and I were discussing how to improve the subtraction of the SumTree to perform batched insertion a lot faster.</p>
<p><strong>Nathan</strong>: And then you implemented it, right?</p>
<p><strong>Antonio</strong>: Yeah. But it's not shipped yet.</p>
<p><strong>Nathan</strong>: Great.</p>
<p><strong>Max</strong>: I'll say we did do a lot of C++ on Atom — we did a lot. We tried. And it worked, but it was just that there was a very meaningful distinction — obviously — where the boundary was between the JavaScript application code and the C++ library code. And people would talk about performance and say "just do this on a background thread, just don't do it on the main thread" and we'd say "okay, we can do that" but that means this whole subsystem that is involved here needs to be dropped into C++ in order to share memory. Then build JavaScript APIs around that and figure out how it's going to still look like idiomatic JavaScript code and preserve all these properties that it had from when it was written in JavaScript.</p>
<p>And only then could we actually move this one task to the background thread.</p>
<p>It was such a difference between writing JavaScript code — that was scriptable and pluggable and overridable —&nbsp;and the C++ that had the core capability to have shared memory and multi-threading.</p>
<p><strong>Nathan</strong>: And Rust is designed to be multi-threaded. I remember when I tried to learn Rust and I wanted to implement this <a href="https://en.wikipedia.org/wiki/Splay_tree">splay tree</a> because the splay tree was a structure that we used a lot in Atom. Well, for a time — it had its era at least. I mean, it was actually pretty good for our needs, but it had parent pointers, it was very much a mutable structure.</p>
<p>And I tried to build that in Rust and the language fought me. And I thought: can you even build anything real in this language? I had serious doubts, actually.</p>
<p>So I gave up for a while, then I tried again. And this time around I built a copy-on-write B-tree. And when I built it that way, it used <code>Arc</code>s and that meant it was inherently multi-threading friendly.</p>
<p>And when I followed the dictates of the language and the borrower checker and did it the way Rust wanted me to do it, it was: oh, cool.</p>
<p>Now we have this way of representing <a href="https://en.wikipedia.org/wiki/Rope_(data_structure)">ropes</a> — which is the fundamental text storage structure in Zed — in a way where we can spawn a background thread, and it's O(1), it's just bumping an <code>Arc</code> to take that to a background thread and look at a snapshot, et cetera.</p>
<p>It's not just about being native. I also think Rust brings to the table innovations. The language is designed to be used the way we're using it on multiple threads and at a low level.</p>
<p>And frankly, I was just a little too much of a script kiddie I think to do well in C++. It always just annoyed me: these freaking files, jumping over here, all these arcane rules. And could a C++ master do what we did in Rust? Probably, but like I wasn't gonna become that person.</p>
<p><strong>Thorsten: So Antonio, you just mentioned that with JavaScript, you didn't know where to look for performance. Max, you said, when you were using C++ or JavaScript, you felt these boundaries when you want to make something async. And now we heard about Rust — you can suddenly do stuff async on a background thread, you have less restrictions, you can move freely around.</strong></p>
<p><strong>That reminds me of something you can actually see in the Zed code base: you own the whole stack. From tree-sitter doing the parsing to GPUI, the GPU-accelerated UI framework — there aren't a lot of third-party dependencies in the code base. Some libraries, but not big building blocks.</strong></p>
<p><strong>How important is that for you? We own the full stack, top to bottom, we understand it top to bottom. Is that a conscious choice or did this happen by accident because Max built tree-setter and then you did this and now look at us, we rebuilt the whole thing.</strong></p>
<p><strong>Max</strong>: I don't know. I think it has trade-offs, but I so far it's been pretty nice to be able to just... decide how we want things to work. Like right now: we want to have language extensions that use WASM. Tree-sitter didn't have that but we added that to it.</p>
<p>There's a million things like that. We don't want to be beholden to some UI framework that may not render text exactly the way we want, because we're a text editor and that matters a lot. But we can now go change that.</p>
<p>It doesn't feel like anything is sort off limits.</p>
<p><strong>Nathan</strong>: One thing I'll say: this was very informed by an experience earlier in my career with jQuery. jQuery was the hot thing and I learned jQuery. I remember <a href="https://yehudakatz.com/">Yehuda</a> coming to <a href="https://en.wikipedia.org/wiki/Pivotal_Labs">Pivotal</a> and presenting on jQuery and I thought this is so cool. I was blown away by it. So early on, all the Atom code, believe it or not, was jQuery.</p>
<p>And the funny thing was though, having learned jQuery, because everybody told me, "oh, the reason you use jQuery is it abstracts over all the differences in the browser APIs", et cetera. I never really questioned that. But then I remember the day that I just sat down and read the freaking DOM APIs. And I thought: you know what, this is actually fine. Maybe there were some missing features or something — and I don't want to shit on jQuery, I think it has its role — but what I came away with was that if I don't have an abstraction that's nailing almost 100% of my needs then I might not want to have that abstraction and go to the level below, understand the level below it fully, and do what I need to do.</p>
<p>That was kind of what happened with GPUI. There were some UI frameworks in flight when we started on a GPUI, in 2019, but none of them did what I knew we would need to do. And I didn't understand them.</p>
<p>But I knew I could come to understand quite easily the fundamental primitives that we're going to be relying on — the language, the graphics framework. I knew we could learn those things and I knew we've written a lot of code. If I can build a system that I can understand and learn from, then I know that I can do what we need to do if it's fundamentally possible on the underlying system. And so really it was — at least for GPUI — a survival strategy: I need to understand this and the best way to understand it is to build it.</p>
<p><strong>Thorsten: What are the downsides of that? Max, you said there's trade-offs.</strong></p>
<p><strong>Nathan</strong>: Takes forever. It's slow.</p>
<p><strong>Antonio &amp; Max</strong>: [laughing]</p>
<p><strong>Antonio</strong>: It's also tricky to onboard people. You're not using the X framework out there that everybody knows, you have to teach this code base from scratch — you know, 300,000 lines of code. That's a downside.</p>
<p>But the cool thing is that while this is a downside, at the same time there's somebody else who has written that code and can explain it to the new person.</p>
<p>It might be slower, but again, you're retaining control.</p>
<p><strong>Nathan</strong>: I think it accumulates. The advantages accumulate, and the downsides depreciate. Someone just built <a href="https://github.com/MatthiasGrandl/loungy">another app on GPUI</a>, so now we have another stakeholder. The cost of having owned it, we're going to gradually write off over time, and the costs and the upsides of owning it are going to start to kick in.</p>
<p><strong>Thorsten: Sometimes people say: I only build it once and then I never have to touch it again. And the opposite of that might be: you can't predict the future, <a href="https://en.wikipedia.org/wiki/Worse_is_better">worse is better</a>, and so on.</strong></p>
<p><strong>And what you just said, that it's slower to build it all yourself, there's a ring of "build it once and do it right for our use case" to it: only the perfect abstraction for what we want to do. At the same time, there's this sense of urgency that you all have. I mean, I joined four weeks ago and I do feel like we're moving fast and we've got so much to do.</strong></p>
<p><strong>How do you balance that? How do you have this huge vision for what you want to build, and balance that with saying "I'm gonna write shaders, I'm gonna perfect how we render drop shadows or whatever"?</strong></p>
<p><strong>Nathan</strong>: Build what you need, only what you need, no more, no less, and build that as well as you can within reason. And then when it turns out to not be quite what you needed, be willing to revisit it after you've learned. But I think if you're laying down every brush stroke with intentionality and care,
and you're not wasting time speculating about what you might need, then... for me, that's always worked out. Sometimes it takes a little while though.</p>
<p><strong>Antonio</strong>: I would add on top of that: it's a gradient. It's not like everything needs to be built perfectly. Or at least that's how I feel about much of the code we write. If we're writing stuff in GPUI, well, the whole app depends on the GPUI, that better be perfect. Or the sum tree. It's this data structure that's used everywhere in the code base. That one we really wanna nail, because it has to be fast.</p>
<p>It has to work perfectly so that we can build on top of it, right? And that is reflected, also in the testing that we do on those things. The SumTree is randomized-tested because we want to make sure that all those edge cases work perfectly.</p>
<p>Now, as you move towards the edge— that performance improvement that you alluded to, Thorsten, we didn't spend three hours gold plating it, right? It was like: whatever gets the job done, it's pretty much at the edge. I mean, we should feel good about the code, we should always strive to write the code as best as we can, but we don't need to gold plate it.</p>
<p>It's a gradient. The more core something is, the more it deserves thought and quality.</p>
<p><strong>Nathan</strong>: And my favorite code to write is the code I've earned myself the right to write. Whoa, that's a lot of homophones.</p>
<p>With GPUI I had so much fun writing it that I almost felt like guilty about it.
But I have earned the right to write this code because I wrote the first version, I lived with it, I pushed it forward, I made the compromises when I needed to make them to make things right.</p>
<p>But now is the moment where we can make this better. And it makes sense to make this better. And I'm informed. I think a lot of times when people talk about like rewriting— if you're rewriting something someone else wrote, be doubly suspicious of yourself.</p>
<p>But if you wrote it and you've lived with it and you've put in the work... That's also something to be said: don't let perfectionism get in the way of learning.</p>
<p><strong>Thorsten: If I were to take the three of you and... I don't know what to throw at you that you couldn't build, but say you'd have to build, I don't know what — a PID controller for an airplane. Airplane software, there you go. Something like that.</strong></p>
<p><strong>Nathan</strong>: Nuclear reactor control subsystem.</p>
<p><strong>Thorsten: You don't know the domain and you don't know yet how you're going to build it and you don't yet know which parts you're going to need. Is that where you would say you'd need a different approach? Unlike in the editor, where you have a strong vision for what you want, you built a few before, so now you know which parts count. You know beforehand, GPUI is going to be important. So let's take our time with it and gold-plate it as Antonio said.</strong></p>
<p><strong>Max</strong>: I mean, I don't know if a nuclear reactor is a good example, but I do feel like if it was our first code editor, ... We <em>did</em> "worse is better". It wasn't intentionally bad, but we took the kind of quicker, dirtier approach once and then kind of identified the things that were real pain points to build on top of, in their sort of worse-is-better form.</p>
<p>But I do think, if for some reason Antonio and me and Nathan had to build a...</p>
<p><strong>Nathan</strong>: Choose something less mission critical maybe?</p>
<p><strong>Max</strong>: ... a Shopify clone or something. We would probably have a different mindset about it. We wouldn't know which pieces needed to be really highly honed.</p>
<p><strong>Nathan</strong>: But if I <em>were</em> building a nuclear reactor control system, I would use a Byzantine fault-tolerant consensus algorithm and pit three teams against one another to compromise each other's security and then make them come to consensus on all of it. But I don't know how to do that.</p>
<p><strong>Antonio</strong>: There's another example that's less mission critical than a nuclear reactor, but where we didn't know the data structure and we kind of took the time to learn it. It wasn't always that the structure powering the buffers in Atom and in Zed today was a CRDT. There was a research period where Nathan and I read... I forget how many papers. A lot of them. And the approach we're using right now with the CRDT — we still rewrote it two or three times — but the approach is more or less the same.</p>
<p>So I think there's a part of it that comes with experience. I feel like you tend to develop a sense of what you need to spend time on and what is more frivolous, less important.</p>
<p>Now, that said, we did rewrite the CRDT two or three times, but the research part, was important. I don't know.</p>
<p><strong>Nathan</strong>: The funny thing is in the Atom that shipped, the buffer was an array of lines, a JavaScript array of strings. And in Zed, it's a multi-thread-friendly snapshot-able copy-on-write B-tree that indexes everything you can imagine. Or everything we've needed. So we did worse is better.</p>
<p>But starting over, would it be an array of lines again? Probably not because look at the look at the time bounds on that. And put a little more thought into it, but that —&nbsp;again —&nbsp;I learned that by like doing worse-is-better and then having it be really slow or problematic in edge cases that ended up mattering.</p>
<p><strong>Thorsten: So what are the most gold-plated parts of Zed?</strong></p>
<p><strong>Nathan</strong>: GPUI is pretty gold-plated, I think, because we just rewrote the whole fricking thing.</p>
<p><strong>Antonio</strong>:
Good question.</p>
<p><strong>Max</strong>: I think what's in the <a href="https://github.com/zed-industries/zed/tree/main/crates/editor"><code>editor</code> crate</a>, where there's sort of the stack of different transforms that convert the raw text of the buffer into the lines that you see on screen, that expand the tabs and do the soft-wrapping and insert the block decorations and handle folds and stuff. All those layers have this uniform testing strategy where it's randomized-tested with property testing. So I think they're pretty gold-plated.</p>
<p>The multi-buffer too, where we sort of weave together the different excerpts of different buffers into one.</p>
<p><strong>Nathan</strong>: I would call them, um... I just wanted to suggest like an alternative substance for that part of the code base. I would say it was kind of plated and coated in blood.</p>
<p><strong>Antonio</strong>: Ha! Blood plated.</p>
<p><strong>Thorsten: You mean the editor and the multi-buffer?</strong></p>
<p><strong>Antonio</strong>: Yeah.</p>
<p><strong>Nathan</strong>: Yeah. It's randomized tests where we've spent literally the entire day in 2021, many days in a row, just debugging failures in these randomized tests that would find some weird edge case of this ornate— I mean, I wouldn't say it's ornate, but it's complicated — stacking of different layers of transformation required to present things on screen. And so it's just elbow grease, right? Find the edge cases and then figure out why they're happening by reducing the log, which for a long time we just did manually.</p>
<p><strong>Thorsten: How did it feel when one of these bugs popped up? Did you have moments of panic when property testing threw a bug in our face and you thought "maybe this whole thing doesn't work?" Or was it rather "well, it's just another thing to polish down and if not, we rewrite this"?</strong></p>
<p><strong>Antonio</strong>: Never panic, that's the rule of randomized testing, never panic. I have a lot of faith in our capability as engineers, I really do, and maybe it might be that we have to rewrite the whole thing and the randomized test is telling us that, but it's fine, we just learned something, back to the drawing board and redo it.</p>
<p><strong>Nathan</strong>: What was scary was: how long is this going to take? I think Lee, our seed investor, was also asking us that at certain times. But he stuck with us and was patient because it took a while.</p>
<p>But that piece was written in  Rust. If we f this up, the program is panicking. Goodbye, poof. It's not just like a stack trace gets thrown in the corner of the editor or something, no, it's done.</p>
<p>So we knew how hard it was to get those layers right. And we knew that there was no other choice, but to get them right. But yeah, I remember, Antonio, remember working on soft wraps and that problem we came up against where we realized the primitive we needed was this ability to represent a patch and then to be able to compose these patches together — that was one moment where I was sweating a bit, thinking "are we gonna freaking figure this out?" and then Antonio figured it out.</p>
<p><strong>Antonio</strong>: Yeah. But powering it all — you know, in terms of gold-plating — is again the sum tree. And even with that, there are some ideas on how to make it better, if we were to rewrite it.</p>
<p><strong>Nathan</strong>: We were talking the other night about how dope it would be. And Antonio, you applied some of the ideas we talked about: being able to construct all these layers in a more streaming friendly way. And you did one optimization, which is gonna land on preview next week.</p>
<p><strong>Antonio</strong>: Yeah, I need to open the PR for it still...</p>
<p><strong>Nathan</strong>: To enable more streaming inputs so people don't get zero feedback when they open a big file, but start actually loading things in, more efficiently — does that necessitate a rewrite? Maybe. Maybe not. I don't know.</p>
<p><strong>Thorsten: Quite interesting how often this idea of rewriting or doing it again comes up. We talked about this <a href="https://zed.dev/blog/why-the-big-rewrite">the last time</a>. Learning continuously. It's not: learning and <em>then</em> fixing something and patching something. It's more: we learned something, so now let's redo it with that learning in mind, vs. just putting a band aid on. It came up multiple times and you see it in the product.</strong></p>
<p><strong>When we talk, Antonio, you say things like: before we did it like <em>this</em> and now we do it like that. Just yesterday, we basically rewrote the part that deals with macOS' IME system, because Antonio said: we can't leave it like this, we don't want another person to fall into this rabbit hole, let's put a bridge on top of it.</strong></p>
<p><strong>Nathan</strong>: Nice. That's good to hear. I've heard about that.</p>
<p><strong>Thorsten: I don't know if it makes sense, but my last question is this... With a lot of software, say, SaaS Enterprise Whatever, or the Shopify clone, I think most users do not care what technology is used, as long as it works for them. And I wonder: do you think this is different with developer tools or editors? Does the technology that's used shine through more or do the users care more about it?</strong></p>
<p><strong>Max</strong>: I do think it affects the type of contributions we can get. A lot of our users, so many of them are people who would be prepared to contribute something to the code base to fulfill their own needs.</p>
<p>I think it's important that it's easy to contribute to Zed. If we written it all in C++, I think that there would be a lot of people who would like wanna change something about Zed, but would not be as prepared to make the change themselves.</p>
<p>Whereas just from the contributions that we've gotten so far since going open source a few weeks ago, it's a lot. I think people like that it's written in Rust. It's approachable. People can build the project easily. They don't have to go learn how to use CMake or whatever to build the project or Gyp. They can just use cargo.</p>
<p>But also the fact that the compiler has this strictness to it, allows us, as the receiving end of those contributions, to often merge with confidence. I think it's really helpful.</p>
<p><strong>Nathan</strong>: Rust is an absolutely beautiful tool. It's not perfect, but I love it. But does it matter to the people? I mean, I think people want a fast editor at the end of the day. We could write it in, what is it, brainfuck? They wouldn't care. But the contribution angle is super valid.</p>
<p><strong>Antonio</strong>: But I still would like to talk about the performance, I just think we are forced to do things a certain way because of performance. Why do we have this GPU accelerated UI framework? It's because the performance needs to be at a certain level. We want our frames to be below three milliseconds. We could rasterize everything on the CPU and we could have used something that did that, but, no.</p>
<p>To some extent, we're positioning ourselves to be a performance editor, because we want a performance editor. I want a performance editor. And so, the choice is almost... we have no choice almost.</p>
<p><strong>Nathan</strong>: But there's Zig now and I don't know a lot about Zig yet, I haven't had time, honestly, to learn about it, but people I respect are excited about it. It seems like it shares some of the same goals in terms of the output as Rust. I'm unclear what it's sacrificing in terms of safety, or how they handle those things. There may be pragmatic workarounds that are sort of not as strict as Rust, but in practice work, et cetera.</p>
<p>So I'm intrigued by that. I'm intrigued, but then there's a lot to be said for like monolingualism, if that makes sense. The server's in Rust, the frontend's in Rust, but if I could get 99% of the benefits of Rust with a 10th of the compile time or something...</p>
<p><strong>Thorsten: Well, I can tell you about Zig that a person on Discord was saying they're writing an editor in Zig, but the perfect name for a text editor in Zig is already taken: Zed.</strong></p><hr></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[It’s Official, Apple Kills Web Apps in the EU (215 pts)]]></title>
            <link>https://open-web-advocacy.org/blog/its-official-apple-kills-web-apps-in-the-eu/</link>
            <guid>39408196</guid>
            <pubDate>Sat, 17 Feb 2024 10:30:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://open-web-advocacy.org/blog/its-official-apple-kills-web-apps-in-the-eu/">https://open-web-advocacy.org/blog/its-official-apple-kills-web-apps-in-the-eu/</a>, See on <a href="https://news.ycombinator.com/item?id=39408196">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        
<p>Nearly two weeks ago <a rel="noreferrer" target="_blank" href="https://open-web-advocacy.org/blog/did-apple-just-break-web-apps-in-ios17.4-beta-eu/">we discussed a bug</a> on iOS Beta 17.4 breaking Web App installation in the EU. Yesterday <a rel="noreferrer" target="_blank" href="https://open-web-advocacy.org/blog/apple-on-course-to-break-all-web-apps-in-eu-within-20-days/">we raised the alarm</a> that this appeared to be not a bug but a deliberate choice on Apple’s part. Today Apple officially confirmed our suspicions in an update to their compliance proposal.</p>
<p>In a direct attack on the open web, its users, and its developers, <a rel="noreferrer" target="_blank" href="https://developer.apple.com/support/dma-and-apps-in-the-eu#8">they have decided to kill Web Apps (PWAs) in the EU</a>:</p>
<blockquote>
<div><p>And so, to comply with the DMA’s requirements, we had to remove the Home Screen web apps feature in the EU.</p><p>
EU users will be able to continue accessing websites directly from their Home Screen through a bookmark with minimal impact to their functionality. We expect this change to affect a small number of users. Still, we regret any impact this change — that was made as part of the work to comply with the DMA — may have on developers of Home Screen web apps and our users.”</p></div>
</blockquote>
<p>This is emphatically not required by the EU’s Digital Markets Act (DMA). It’s a circumvention of both the spirit and the letter of the Act, and if the EU allows it, then the DMA will have failed in its aim to allow fair and effective browser and web app competition.</p>
<p>It’s telling that this is the feature that Apple refused to share. And it makes sense: the idea that users could install safe and secure apps that Apple can’t tax, block or control is terrifying to them.</p>
<p>The legal obligation to allow third-party browsers onto iOS removes their ability to set a ceiling on web app functionality via their control of Safari and the WKWebView. Suddenly Web Apps would be a viable competitor. It is particularly galling for them to cite low adoption when they have had their thumb on the scale suppressing them for over a decade.</p>
<p>The DMA compels them to allow third party app stores, but Apple’s plan is to cripple them with their hardware and software API fee (Core Technology Fee) and their ludicrous “opt-in to your legal rights” at a different price alternative contract.</p>
<p>But web apps are much harder to stop. Even Apple admits WebKit’s sandbox is, <a rel="noreferrer" target="_blank" href="https://assets.publishing.service.gov.uk/media/62277271d3bf7f158779fe39/Apple_11.3.22.pdf">to quote them</a> ”orders of magnitude more stringent than the sandbox for native iOS apps”. They tried claiming to the UK regulator that Safari is more secure than other major browsers but decisively lost that argument.</p>
<p>So this is their new tactic: Kill off a competitor while saying the EU made them do it.</p>
<p>Apple has had 15 years to allow third party browsers the ability to compete in web app functionality and nearly 2 since they knew they would be legally compelled to do so.</p>
<p><a rel="noreferrer" target="_blank" href="https://developer.apple.com/support/dma-and-apps-in-the-eu#dev-qa:~:text=Why%20don%27t%20users%20in%20the%20EU%20have%20access%20to%20Home%20Screen%20web%20apps%3F">Apple also makes tenuous, bordering on laughable, claims regarding web app security.</a> In addition to unwarranted and unjustifiable attempts to project their own model onto competing browsers, Apple makes claims that ignore the history of web applications and browsers in providing strong privacy and security separation. Apple offers no evidence to back these assertions, and ignores the long track record of superior security of PWAs on other OSes.</p>
<p>Again and again, Apple has offered paper-thin fig-leaf arguments based on security to duck regulation, only to have these ploys rejected in nearly every jurisdiction where evidence is critically examined. This appears to be another instance of the same willfully misleading pattern. If security posturing is the backbone of Apple’s attempt to duck conformance with the DMA, the EU must reject the proposal and find Apple willfully non-compliant.</p>
<p>Apple also makes a self-fulfilling argument regarding the low use of iOS homescreen web apps. This is a situation of Apple’s own making and, indeed, a large part of why OWA has invested so much in reversing Apple’s history of self-preferencing towards native apps that Apple can tax through its App Store monopoly. Instead of offering equivalent affordances for websites looking to compete with App Store alternatives, Apple’s answer is to remove the capability, destroy critical features, and engender data loss for users and businesses that had invested in the web as a platform. Malicious destruction may be Apple’s attempt at an answer, but it is not a solution.</p>
<p>The next question is: Why all the secrecy? There was nothing in their compliance plan, Safari’s release notes or the beta’s release notes. Given that they are now stating they knew all along, it seems they wanted to see if they could sneak this past.</p>
<p>Clearly the backlash has caught them off guard and that’s why they had to rush out this panicked response, the only significant update they have made to their compliance proposal.</p>
<p>We always assumed that the commission would have to fine Apple billions to force them to allow the web to compete fairly and effectively with their App Store but it’s still incredibly disappointing to see Apple behave like this.</p>
<p>This is a message in a bottle to regulators world-wide: Apple will stop at nothing to protect its app distribution monopoly and the rent that comes with it, including removing critical features from its OSes without the slightest care for its users. It will not act in good faith, it must be forced.</p>
<p>We will continue to work with the EC to ensure that Web Apps can remain first-class citizens for iOS users, businesses, and competing browser vendors.</p>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA["Stolen" radio tower missing for at least a year (186 pts)]]></title>
            <link>https://www.radiodiscussions.com/threads/wjlx-wjbe-and-werh-oh-my.769948/#post-6697751</link>
            <guid>39408171</guid>
            <pubDate>Sat, 17 Feb 2024 10:24:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.radiodiscussions.com/threads/wjlx-wjbe-and-werh-oh-my.769948/#post-6697751">https://www.radiodiscussions.com/threads/wjlx-wjbe-and-werh-oh-my.769948/#post-6697751</a>, See on <a href="https://news.ycombinator.com/item?id=39408171">Hacker News</a></p>
Couldn't get https://www.radiodiscussions.com/threads/wjlx-wjbe-and-werh-oh-my.769948/#post-6697751: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Microsoft bets on Germany in 3.2B euro AI push (127 pts)]]></title>
            <link>https://www.reuters.com/technology/microsoft-invest-32-bln-eur-germany-ai-push-2024-02-15/</link>
            <guid>39408155</guid>
            <pubDate>Sat, 17 Feb 2024 10:19:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reuters.com/technology/microsoft-invest-32-bln-eur-germany-ai-push-2024-02-15/">https://www.reuters.com/technology/microsoft-invest-32-bln-eur-germany-ai-push-2024-02-15/</a>, See on <a href="https://news.ycombinator.com/item?id=39408155">Hacker News</a></p>
Couldn't get https://www.reuters.com/technology/microsoft-invest-32-bln-eur-germany-ai-push-2024-02-15/: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA[Considerations for a long-running Raspberry Pi (433 pts)]]></title>
            <link>https://www.dzombak.com/blog/2023/12/Considerations-for-a-long-running-Raspberry-Pi.html</link>
            <guid>39407631</guid>
            <pubDate>Sat, 17 Feb 2024 08:42:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.dzombak.com/blog/2023/12/Considerations-for-a-long-running-Raspberry-Pi.html">https://www.dzombak.com/blog/2023/12/Considerations-for-a-long-running-Raspberry-Pi.html</a>, See on <a href="https://news.ycombinator.com/item?id=39407631">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><header><span> <time pubdate="" datetime="2023-12-29T14:43:07-05:00"> <span>December</span> <span>29,</span> <span>2023</span> </time> • <span>Tagged:</span> <a href="https://www.dzombak.com/blog/tag/series%3Api-reliability/">series:pi-reliability</a> <a href="https://www.dzombak.com/blog/tag/raspberry-pi/">raspberry-pi</a> </span></header><p>Part of the <a href="https://www.dzombak.com/blog/series/pi-reliability.html">Raspberry Pi Reliability</a> series.</p><p>I use Raspberry Pis around my home as everything from <a href="https://github.com/cdzombak/pi-fm-player">low-power FM transmitters</a> to <a href="https://github.com/cdzombak/nut_influx_connector">UPS energy monitors</a>.</p><p>Keeping a Raspberry Pi online and working with zero intervention for weeks, months, or years is somewhat of an art form. Several classes of things can go wrong, and you need to consider how your Pi will recover from each of them — and <a href="https://www.dzombak.com/blog/2023/12/Consider-the-risks-before-making-any-dramatic-changes-to-your-Raspberry-Pi-setup.html">weigh the risks of each solution against its benefits</a>.</p><p>This new set of posts in <a href="https://www.dzombak.com/blog/series/pi-reliability.html">my Raspberry Pi Reliability series</a> covers each class of issues I’ve run into, and what I’ve done to solve them. As a bonus, these posts also include some tips on monitoring, mainly using <a href="https://github.com/louislam/uptime-kuma">Uptime Kuma</a>.</p><p>This aims to be a more comprehensive guide than <a href="https://www.dzombak.com/blog/2021/11/Reducing-SD-Card-Wear-on-a-Raspberry-Pi-or-Armbian-Device.html">my previous post on reducing SD card wear</a>, and the posts linked here should be considered an updated replacement for that post.</p><p><em>Without further ado:</em></p><h2 id="what-can-go-wrong-and-how-do-i-prevent-it"> What can go wrong, and how do I prevent it? <a href="#what-can-go-wrong-and-how-do-i-prevent-it"></a></h2><ul><li><a href="https://www.dzombak.com/blog/2023/12/Maintaining-a-solid-WiFi-connection-on-Raspberry-Pi.html">The WiFi connection can fail</a></li><li><a href="https://www.dzombak.com/blog/2023/12/Keep-your-software-up-and-running-on-the-Raspberry-Pi.html">Your software service can stop working</a></li><li><a href="https://www.dzombak.com/blog/2023/12/Mitigating-hardware-firmware-driver-instability-on-the-Raspberry-Pi.html">Hardware/firmware/driver instability can cause a crash</a></li><li>Your SD card can wear out or completely fill up<ul><li><a href="https://www.dzombak.com/blog/2023/12/Choosing-the-right-SD-card-for-your-Pi.html">Start by choosing the right microSD card</a></li><li><a href="https://www.dzombak.com/blog/2023/12/Stop-using-the-Raspberry-Pi-s-SD-card-for-swap.html">Don’t use the SD card for swap!</a></li><li><em>Choose one of…</em><ul><li>Aggressively manage things that write to the SD card (especially logs)</li><li>Make the Pi’s root filesystem read-only</li><li><em>In the interest of getting this series of posts finished in fewer than 2 months,</em> for now I’ll point you to my 2021 post on reducing SD card wear, particularly the <a href="https://www.dzombak.com/blog/2021/11/Reducing-SD-Card-Wear-on-a-Raspberry-Pi-or-Armbian-Device.html#if-the-system-can-use-a-read-only-filesystem">read-only root filesystem section</a> or the <a href="https://www.dzombak.com/blog/2021/11/Reducing-SD-Card-Wear-on-a-Raspberry-Pi-or-Armbian-Device.html#if-the-system-cant-use-a-read-only-filesystem">non-read-only root filesystem section</a>. <em>I plan to produce two updated, easier-to-read guides here in the near future, for my own reference as much as yours; <a href="https://www.dzombak.com/blog/series/pi-reliability.atom.xml">watch this space</a>!</em></li></ul></li><li><a href="https://www.dzombak.com/blog/2023/12/Raspberry-Pi-SD-cards-fsck-them-often.html">Check the filesystem often</a> if you’re not using a read-only root filesystem</li></ul></li><li><a href="https://www.dzombak.com/blog/2023/12/Disable-or-remove-unneeded-services-and-software-to-help-keep-your-Raspberry-Pi-online.html">Disabling unneeded services helps with both software stability <em>and</em> SD card wear</a></li></ul><p><strong>Also, do these:</strong></p><ul><li><a href="https://www.dzombak.com/blog/2023/12/Consider-the-risks-before-making-any-dramatic-changes-to-your-Raspberry-Pi-setup.html">Consider risks and benefits before applying any invasive intervention</a></li><li><a href="https://www.dzombak.com/blog/2023/12/Remote-logging-for-easier-Raspberry-Pi-debugging.html">Remote logging can help you figure out what went wrong, when something <em>does</em> go wrong</a></li></ul><h2 id="caution-advice-to-avoid"> Caution: Advice to avoid <a href="#caution-advice-to-avoid"></a></h2><p><a href="https://raspberrypi.stackexchange.com/a/186">This Stack Exchange post</a> suggests disabling journaling for the Pi’s filesystem. <strong>Don’t do this.</strong> While this change might reduce SD card wear, it makes your Pi more likely to face filesystem corruption in the event of a crash or power outage. My goal is to make my Pis <em>more</em> reliable, and disabling journaling works against that goal.</p><h2 id="pi-reliability-series-updates"> Pi Reliability Series Updates <a href="#pi-reliability-series-updates"></a></h2><p>Inevitably I’ll come back to the posts linked above with corrections and additions. For the foreseeable future, when this happens, I will:</p><ul><li>Edit the post</li><li>Add a callout in the post noting the date the change was made</li><li>Write a brief post in the Pi Reliability blog series announcing the change, with a link to the edited post</li></ul></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mushroom Sprouting Out of a Living Frog (101 pts)]]></title>
            <link>https://journals.ku.edu/reptilesandamphibians/article/view/20966/19496</link>
            <guid>39407081</guid>
            <pubDate>Sat, 17 Feb 2024 06:59:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://journals.ku.edu/reptilesandamphibians/article/view/20966/19496">https://journals.ku.edu/reptilesandamphibians/article/view/20966/19496</a>, See on <a href="https://news.ycombinator.com/item?id=39407081">Hacker News</a></p>
<div id="readability-page-1" class="page">

		<header>

		<a href="https://journals.ku.edu/reptilesandamphibians/article/view/20966">
			<span>
									Return to Article Details
							</span>
		</a>

		<a href="https://journals.ku.edu/reptilesandamphibians/article/view/20966">
			Mushroom sprouting out of a living frog
		</a>

		<a href="https://journals.ku.edu/reptilesandamphibians/article/download/20966/19496/64783" download="">
			<span>
				Download
			</span>
			<span>
				Download PDF
			</span>
		</a>

	</header>

	

	
	


</div>]]></description>
        </item>
        <item>
            <title><![CDATA[From engineer to manager: what I love, what I hate (272 pts)]]></title>
            <link>https://thoughtspile.github.io/2024/02/16/eng-to-em/</link>
            <guid>39406804</guid>
            <pubDate>Sat, 17 Feb 2024 05:52:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://thoughtspile.github.io/2024/02/16/eng-to-em/">https://thoughtspile.github.io/2024/02/16/eng-to-em/</a>, See on <a href="https://news.ycombinator.com/item?id=39406804">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody"><p>It's been almost 2 years since I moved to a team lead role, then to a full-time engineering management position after the expansion of our team. I've been a front-end developer for 7 years before that, and initially I took the "advanced individual contributor" career track before doing the management turnaround. How's it been? Bumpy, but fun. In this article, I'll share the things I love and hate about my current job.</p><h2>Love</h2><p>Let's start with the positive side of management positions. There's plenty to love, honestly.</p><h3>Impact</h3><p>First things first, I adore the power to improve the product we're building, and the overall team well-being that comes with a management position.</p><p>As an engineer, you'll sometimes find yourself in a tough spot with little to no power to change things. Early morning standups are a chore? Code quality sucks? The new feature makes no sense? As a manager, the power to change is yours: you get both the formal and informal authority to change things for the better, and to make yourself and your team happier.</p><p>Your words have weight. If you, an IC, say "guys, we really should write tests", everybody goes "oh, crazy old Vladimir, all grumpy again, haha, where do you see tests fit here?". If you, an EM, casually say "guys, we really should write tests", you might be surprised to find the tests unexpectedly growing in different places. Pleasant.</p><h3>Career opportunities</h3><p>Being an engineering manager is a more promising career opportunity than an engineering track. This might be controversial, but hear me out:</p><ol><li>The EM is normally higher-paid than the basic team-level engineering grades (junior / middle / senior).</li><li>There <em>are</em> higher IC grades (staff, principal, president of code, whatever) in the EM+ salary bands.</li><li>These staff+ IC jobs are concentrated in larger tech companies, because those have tougher technical challenges. Almost every software team in every company has a leadership position.</li><li>The management career ladder is "taller" than that of ICs. <em>Yes,</em> the chances of becoming a CTO are <em>slim,</em> but it's an opportunity that's just not there for a pure IC with no management experience.</li></ol><p>All in all, I believe the demand for EMs to be steadier than for staff+ engineers, and this path gives you more opportunities at the later stages of your career. On a related note...</p><h3>Transferable skills</h3><p>Management skills are more widely useful than an IC engineering role. A decent front-end engineer with React experience won't have trouble moving to another front-end framework, and can probably transition to a back-end / mobile engineering role with -1 grade (a year handicap or so). That's not bad.</p><p>What roles are available to someone with engineering management experience? First, you can easily take on a team with a wildly different focus — mobile developers, infrastructure, ML engineers. You'd need some time to get up to speed on the big-picture technical struggles of your new team, but most companies would take this shot. If you don't want to be an EM any more, you're well-positioned to move to a project or product management role.</p><p>If the entire tech market falls into decline, many management skills would still work for other industries. While I don't see a big flow of tech managers moving into construction business (tech <em>does</em> pay well), there's one alternate path to consider — entrepreneurship. Involvement with people and business decisions makes for great training before starting your own business.</p><p>So, being a manager gives you quite a bit of career flexibility, and makes you less vulnerable to future technological shifts.</p><h3>Less knowledge rot</h3><p>Suffering from <a href="https://www.smashingmagazine.com/2016/11/not-an-imposter-fighting-front-end-fatigue/" target="_blank" rel="noopener">front-end fatigue?</a> Can't keep up with the newest shiniest frameworks and tools? Management's got you covered!</p><p>The "hot new" agile / kanban / scrum methodologies are 20–30 years old. The basic meeting types (demos, dailies, 1-on-1s) have been developing for centuries. At the core, you have teamwork and human interactions, which haven't changed that much since the beginning of humanity.</p><p>My grandfather was a big railroad boss in the 70s, and we can sensibly discuss some of my work challenges. "Oh, you have this talented slacker? Give him some big important task, let's see what he's worth." When it comes to computers, he's more like "I'd like a shovel big enough to throw all your silly gadgets into stratosphere."</p><p>So, if you're tired of keeping up with the latest hot thing in tech, a management role can provide a well-deserved relief. <em>Do</em> keep an eye on what's happening on the tech side of things, but there's no urgency, and no need to get real deep.</p><h3>New challenges</h3><p>Frankly, after 4–5 years of working in a particular tech area, you can solve the vast majority of practical problems well enough. If you want some work challenge, you can:</p><ol><li>Slightly alter your stack — say, a new FE framework. But it's unlikely to keep you engaged very long.</li><li>Make a broader career shift — e.g. frontend to backend. This would probably give you another couple years of fun, but such transitions are, in my experience, either random (e.g. your BE dev quits and someone has to fill the role), or hit your salary.</li><li>Invent problems out of thin air — rewrite everything using a new library, or handle 9000 RPS "for the future". Fun, but most of the time it's more harm than good for your team and business.</li></ol><p>Of all the possible career moves a seasoned engineer can make, switching to management gives you the most new challenges (years worth of new stuff to learn) without hitting your salary.</p><h2>Hate</h2><p>As much as I like the challenges and impact of my new role, and the practical career benefits, I'll be the first one to admit it has downsides as well.</p><h3>Corporate BS</h3><p>As an engineer, I hated bloody corporate BS: individual performance reviews, useless deadlines, company-enforced restrictions on processes and tech stack. Well, congratulations, as a manager you are the sheriff of these practices, whether you believe in them or not.</p><p>As a leader of a team in an org with performance calibrations, I must nominate 1 person who hasn't been <em>working hard enough</em> every 6 months. This human chess is soul-sucking, but I can't make it go away — if I don't offer a sacrificial teammate, someone will be picked randomly further down the process. Crazy shit.</p><p>Sometimes you can negotiate a bit, or hack the process, e.g. assign "below-expected performance" on a round-robin basis, but to your team you'll sometimes be the <em>corporate monster.</em> Sigh. And I haven't even been through the real tough stuff like layoffs, closures and reorganizations.</p><h3>Awkward social situations</h3><p>I've made it to an engineering management position by being good at building stuff. I've been prepared to help with technical decisions, give career guidance, tune processes and set up automation as needed. In fact, a large portion of my job is debugging social tensions and psychological insecurities of people.</p><p>Your junior engineer comments out a few tests to deploy a feature preview. The QA person sees this, and is very pissed because your whole team apparently does not respect the QA role and the value they provide. Restore trust.</p><p>A project manager makes an unsuccessful joke that hurts your designer, who's now crying. Make the PM apologize. Am I a kindergarten teacher or something?</p><p>Boy, I'm no psychologist, and I can't say I'm exceptionally good with people. This part of my job is quite hard, trying to fake it til I make it here.</p><h3>Office hours</h3><p>Life of an engineer is relatively relaxed. If you don't have anything urgent, you can go lay on the grass for half a day, thinking about the future of your project or something. You can miss a few meetings on short notice, no questions asked.</p><p>Now, you're an EM. Try going and lying on the grass for a few hours. You come back to a messenger full of problems: your intern can't work because she forgot how to npm install; a senior manager wants to discuss some potential feature; release has derailed. Also, you can't really skip a meeting you're supposed to facilitate / organize without some up-front preparation.</p><p>This <em>might</em> improve as your team matures and builds better processes, but in general you feel office hours much more as a manager, and your work-life balance directly depends on how good you are at your job.</p><h3>Long feedback loop</h3><p>The final thing I hate about management is the long feedback loop of your actions. Most engineering tasks show the result quite fast: new features take weeks to months, and if that's too long for you — fix a bug and see happy users the next day, or refactor some code and watch complexity decrease in a few hours. Amazing!</p><p>You're a manager? Well, very few of your actions produce a visible result in under a month. Suppose your team has grown too large, and you want to split it up. You must pick a well-rounded set of engineers for the new team, talk to everybody involved to see how they feel about such a change, arrange new regular meetings, set up processes and communications, do some jira magic, maybe isolate the codebases of sub-products. If you think it can be done in a week, well, you're wrong.</p><p>Then, even the right changes can make things get worse before they get better. Say you're understaffed, and you decide to hire. In the short term, you spend hours and hours interviewing, and a new team member won't get up to speed right away, sucking out precious time for onboarding. It's sometimes hard to see the long-term goal behind the short-term inconvenience.</p><p>So, while engineering problem-solving is often fairly straightforward, management changes are more similar to large-scale refactorings. You won't see any quick improvements, which can be frustrating.</p><hr><p>To sum up, moving from an IC engineering role to a management position has been a rollercoaster ride for me, with both bright and bleak spots. Here's what I love:</p><ul><li>The wider impact on the product and team.</li><li>Management is a great long-term career track: it gives you more job opportunities than a staff+ IC, the flexibility to move between different technical areas and roles, and skills that will be relevant across various industries for years to come.</li><li>If you're bored with your field of tech expertise, moving to a management role is a great way to bring the challenge back into your job.</li></ul><p>And here's what I hate:</p><ul><li>Enforcing corporate decisions and policies can be soul-sucking.</li><li>Dealing with social tensions and psychological insecurities of people isn't something I was ready for.</li><li>It's hard to go offline even for a few hours without preparing in advance.</li><li>Your actions have long and non-linear feedback loops with <em>very</em> delayed gratification.</li></ul><p>Now, is this career move the right one for you? If you enjoy challenge and responsibility, and you get an opportunity — I'd say go for it! Yes, management is not a fit for everybody (I'm not even sure it fits me TBH), but it's a great experience that would surely expand your skill set and make you see engineering work from a new angle. If you totally hate it, you have plenty of time to go back into coding =)</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Progman: X11 WM modeled after Program Manager from the Windows 3 era (188 pts)]]></title>
            <link>https://github.com/jcs/progman</link>
            <guid>39406568</guid>
            <pubDate>Sat, 17 Feb 2024 05:05:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/jcs/progman">https://github.com/jcs/progman</a>, See on <a href="https://news.ycombinator.com/item?id=39406568">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
          <nav aria-label="Global">
            <ul>
                <li>
      
      <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Actions&quot;,&quot;label&quot;:&quot;ref_cta:Actions;&quot;}" href="https://github.com/features/actions">
      
      <div>
        <p>Actions</p><p>
        Automate any workflow
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Packages&quot;,&quot;label&quot;:&quot;ref_cta:Packages;&quot;}" href="https://github.com/features/packages">
      
      <div>
        <p>Packages</p><p>
        Host and manage packages
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Security&quot;,&quot;label&quot;:&quot;ref_cta:Security;&quot;}" href="https://github.com/features/security">
      
      <div>
        <p>Security</p><p>
        Find and fix vulnerabilities
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Codespaces&quot;,&quot;label&quot;:&quot;ref_cta:Codespaces;&quot;}" href="https://github.com/features/codespaces">
      
      <div>
        <p>Codespaces</p><p>
        Instant dev environments
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Copilot&quot;,&quot;label&quot;:&quot;ref_cta:Copilot;&quot;}" href="https://github.com/features/copilot">
      
      <div>
        <p>Copilot</p><p>
        Write better code with AI
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Code review&quot;,&quot;label&quot;:&quot;ref_cta:Code review;&quot;}" href="https://github.com/features/code-review">
      
      <div>
        <p>Code review</p><p>
        Manage code changes
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Issues&quot;,&quot;label&quot;:&quot;ref_cta:Issues;&quot;}" href="https://github.com/features/issues">
      
      <div>
        <p>Issues</p><p>
        Plan and track work
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Discussions&quot;,&quot;label&quot;:&quot;ref_cta:Discussions;&quot;}" href="https://github.com/features/discussions">
      
      <div>
        <p>Discussions</p><p>
        Collaborate outside of code
      </p></div>

    
</a></li>

            </ul>
          </div>
</li>


                <li>
      
      
</li>


                <li>
      
      <div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to GitHub Sponsors&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Sponsors;&quot;}" href="https://github.com/sponsors">
      
      <div>
        <p>GitHub Sponsors</p><p>
        Fund open source developers
      </p></div>

    
</a></li>

            </ul>
          </div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to The ReadME Project&quot;,&quot;label&quot;:&quot;ref_cta:The ReadME Project;&quot;}" href="https://github.com/readme">
      
      <div>
        <p>The ReadME Project</p><p>
        GitHub community articles
      </p></div>

    
</a></li>

            </ul>
          </div>
          
      </div>
</li>


                <li>
    <a data-analytics-event="{&quot;category&quot;:&quot;Header menu top item (logged out)&quot;,&quot;action&quot;:&quot;click to go to Pricing&quot;,&quot;label&quot;:&quot;ref_cta:Pricing;&quot;}" href="https://github.com/pricing">Pricing</a>
</li>

            </ul>
          </nav>

        <div>
                


<qbsearch-input data-scope="repo:jcs/progman" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="9Wswued4vc4EvziRjs1ya8bnN216099sh6XIlddL0M0X-Tpp4LKZmFeg6856cM9jJzMBkUARz9UvucjMwxHrzA" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="jcs/progman" data-current-org="" data-current-owner="jcs" data-logged-in="false" data-copilot-chat-enabled="false" data-blackbird-indexed-repo-csrf="<esi:include src=&quot;/_esi/rails_csrf_token_form_hidden?r=qnTfR9C4uvIkXo7OQBhTLzSnofSYTKEbu5IWfYs504bTgTpXHTFiJBY134hhrnYA8Qo%2BrO6P4f3wogpijwbZrZ5dleYJAe2tQmhURaYUId%2Fgt%2F%2FtGOoMi5iJmUGQz6XbUuQwRzWE6AOnWI02Fyu0TP%2BUClKH9jJB5x1J71eIuztUE0PE4ucctI4BfGHyOugfBASim%2BDGNAHXVRNcfcI7LmDon917smfaT4cvfhcsWaHhsqi2lSuUNUKxbF6zrqQnVxiv12n%2FNEMuW5qfRjVJisO1r06JAOvK3OrUYiv0eV4RhwKJ3nulB4pZu0L4MxXOdl2431UzUe8q%2F0KCPOQPlb9oUzUBVla7QUanxFkQWS9TmXwGnQskQt33oHOHIC0DVEORtq81nyMoS0O7RpIUXUI5N%2Fm7vGLMaaQ9hGwFSWiwQk42xIF%2FqEy8271G%2BOAHi5EVzFrqZEfYDIXLzPVzO627fXQ%2BILpDaDfCEVHMTvTSqaISCXesha36JnUGtTRKFRqZlQqj--kyTa1fZph0EHBraV--A0%2BO6nSjO4agIjdJkuwOpQ%3D%3D&quot; />">
  <div data-modal-dialog-overlay="" data-action="click:qbsearch-input#searchInputContainerClicked">
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true">
      <h2 id="search-suggestions-dialog-header">Search code, repositories, users, issues, pull requests...</h2>
    
</modal-dialog></div>
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>

            <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&amp;source=header-repo&amp;source_repo=jcs%2Fprogman" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/jcs/progman&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="6b97443fba96565013f7daa9e5dbf58c5bef43f73e666ca5b6de35e0cb774d0d" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>;ref_cta:Sign up;ref_loc:header logged out&quot;}">
              Sign up
            </a>
        </p></div>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mistral AI launches Mixtral-Next (185 pts)]]></title>
            <link>https://chat.lmsys.org/</link>
            <guid>39406168</guid>
            <pubDate>Sat, 17 Feb 2024 03:46:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://chat.lmsys.org/">https://chat.lmsys.org/</a>, See on <a href="https://news.ycombinator.com/item?id=39406168">Hacker News</a></p>
Couldn't get https://chat.lmsys.org/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Automated Unit Test Improvement Using Large Language Models at Meta (273 pts)]]></title>
            <link>https://arxiv.org/abs/2402.09171</link>
            <guid>39405996</guid>
            <pubDate>Sat, 17 Feb 2024 03:14:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arxiv.org/abs/2402.09171">https://arxiv.org/abs/2402.09171</a>, See on <a href="https://news.ycombinator.com/item?id=39405996">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content-inner">
    
    
                
    <p><a href="https://arxiv.org/pdf/2402.09171.pdf">Download PDF</a></p><blockquote>
            <span>Abstract:</span>This paper describes Meta's TestGen-LLM tool, which uses LLMs to automatically improve existing human-written tests. TestGen-LLM verifies that its generated test classes successfully clear a set of filters that assure measurable improvement over the original test suite, thereby eliminating problems due to LLM hallucination. We describe the deployment of TestGen-LLM at Meta test-a-thons for the Instagram and Facebook platforms. In an evaluation on Reels and Stories products for Instagram, 75% of TestGen-LLM's test cases built correctly, 57% passed reliably, and 25% increased coverage. During Meta's Instagram and Facebook test-a-thons, it improved 11.5% of all classes to which it was applied, with 73% of its recommendations being accepted for production deployment by Meta software engineers. We believe this is the first report on industrial scale deployment of LLM-generated code backed by such assurances of code improvement.
    </blockquote>

    <!--CONTEXT-->
    
  </div><div>
      <h2>Submission history</h2><p> From: Alexandru Marginean [<a href="https://arxiv.org/show-email/af902b12/2402.09171">view email</a>]      <br>    <strong>[v1]</strong>
        Wed, 14 Feb 2024 13:43:14 UTC (1,490 KB)<br>
</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why diets backfire: A year after weight loss, the desire to eat grows (2018) (104 pts)]]></title>
            <link>https://www.latimes.com/science/sciencenow/la-sci-sn-weight-loss-hunger-20180202-story.html</link>
            <guid>39405649</guid>
            <pubDate>Sat, 17 Feb 2024 02:12:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.latimes.com/science/sciencenow/la-sci-sn-weight-loss-hunger-20180202-story.html">https://www.latimes.com/science/sciencenow/la-sci-sn-weight-loss-hunger-20180202-story.html</a>, See on <a href="https://news.ycombinator.com/item?id=39405649">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-element="story-body" data-subscriber-content=""> <p>Losing weight is, for most people, the easy part. The bigger challenge is trying to keep it off for more than a year.</p><p>New research helps explain why people in this second stage are so much more prone to failure.</p><p>In a nutshell, people who have shed a significant chunk of their weight are hungrier and have a stronger desire to eat for at least a year after transitioning from weight loss to weight-loss maintenance. And even when their hormones send loud satiety signals to the brain after a meal, they still don’t feel full.</p><p>The new <a href="https://www.physiology.org/doi/abs/10.1152/ajpendo.00322.2017" target="_blank">study</a>, published Thursday in the American Journal of Physiology-Endocrinology and Metabolism, falls in line with a growing field of research that explores the body’s tenacious and multi-pronged response to weight loss.</p><p>In a bid to ensure that lost weight is regained, the human body has been found to reset its thermostat to burn fuel more efficiently, to economize in calorie-burning movements and to rev up the impulse to find and eat food.</p><p>Researchers believe these responses evolved to protect humans against wasting away during times of famine. But in societies where calorific foods are never in short supply, these adaptations have worked to the detriment of dieters.</p><p>Moreover, in people who have become obese, there’s growing suspicion that these responses become harder to override. In recent years, researchers have found <a href="https://www.ncbi.nlm.nih.gov/pubmed/12605342" target="_blank">evidence</a> that obesity makes the brain more “deaf” to some of the gut’s satiety signals, and more keenly attuned to signals of hunger.</p><p>The new research offers some validation for that surmise.</p><p>To study the effects of weight loss in 35 severely obese subjects, Norwegian researchers helped them lose close to a tenth of their weight. They provided dietary advice, exercise coaching and psychotherapy during several three-week stays at a wooded retreat in eastern Norway. All the subjects had a <a href="https://apps.who.int/bmi/index.jsp?introPage=intro_3.html" target="_blank">body-mass index</a> greater than 42 (a BMI over 30 is considered obese) at the outset of the study.</p><p>At one year, when subjects had lost an average of close to 24 pounds, they returned to the retreat to map out maintenance plans.</p><p>Every six months from enrollment to two years out, researchers checked in to conduct a series of tests. Before and for three hours after meals, they gauged subjects’ subjective feelings of hunger, fullness and desire to eat, and asked how much food they planned to consume. And they measured circulating levels of five separate hormones that regulate appetite to see how they responded to the prospect of a meal or a meal just eaten.</p><p>What they found was the body’s reaction to weight loss shifted over time.</p><p>In the short run — four weeks after their exercise-and-weight-loss regimens got underway — the subjects had lost an average of 3.5% of their body weight. Their levels of appetite-boosting hormones had risen rapidly — probably a response to their getting roughly 3½ hours of exercise per day while at the retreat.</p><p>But they did not report increased hunger or desire to eat. And with rising levels of satiety hormones, they were feeling more full in the wake of eating a meal.</p><p>As they met their weight-loss goals, however, things changed.</p><p>At the end of a year of dieting and exercise, the study’s participants had lost about 7.4% of their weight and had improved their fitness considerably. But they reported to researchers a significant increase in their hunger and desire to eat. And the sensations of fullness they reported after meals had plummeted.</p><p>Two years after enrolling in the study — and a year into their weight-maintenance programs — the subjects had, on average, kept the weight from coming back. But they continued to report levels of hunger and desire to eat that were just as high or higher than at the end of Year One. And they reported feeling no more full after a meal.</p><p>At both time points, their hormone levels continued to show increases in appetite-stimulating compounds, as well as those that would signal fullness. Though they lost the weight and — with the study’s unusual level of support — managed to keep it off, they were hearing the loud cries of their hunger-boosting hormones. The fullness ones, not so much.</p><p>The good news, according the researchers: A sustained and supportive program of dietary restriction and physical activity does induce weight loss and can help very obese patients keep the weight off.</p><p>The bad news: “Patients with severe obesity who have lost significant amounts of weight … will have to deal with increased hunger in the long-term.”</p><p>If these patients are to beat the odds and sustain their weight loss, professionals working with them will have to find ways to help them cope with that, they added.</p><p><b><a href="https://www.latimes.com/espanol/vidayestilo/la-es-por-que-las-dietas-fracasan-un-ano-despues-de-perder-peso-el-deseo-de-comer-se-vuelve-mas-fuerte-20180204-story.html" target="_blank">To read this article in Spanish, click here</a></b></p><p><b><b><a href="mailto:melissa.healy@latimes.com" target="_blank">melissa.healy@latimes.com</a></b></b></p><p><b><b><a href="https://twitter.com/LATMelissaHealy" target="_blank">@LATMelissaHealy</a></b></b></p><p><b><b>MORE IN SCIENCE </b></b></p><p><b><a href="https://www.latimes.com/science/sciencenow/la-sci-sn-standing-burns-calories-20180131-story.html" target="_blank">This is how many pounds you can lose in a year by standing for six hours a day instead of sitting</a></b></p><p><b><a href="https://www.latimes.com/science/sciencenow/la-sci-sn-polar-bears-metabolism-20180201-story.html" target="_blank">Polar bears’ bodies work 60% harder than thought — which makes surviving climate change even tougher</a></b></p><p><b><a href="https://www.latimes.com/science/sciencenow/la-sci-sn-rotating-galaxies-20180201-story.html" target="_blank">Galaxies that move together have cosmologists stumped about dark matter</a></b></p> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The adult consequences of being bullied in childhood (116 pts)]]></title>
            <link>https://www.sciencedirect.com/science/article/pii/S0277953624001345</link>
            <guid>39405593</guid>
            <pubDate>Sat, 17 Feb 2024 02:02:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.sciencedirect.com/science/article/pii/S0277953624001345">https://www.sciencedirect.com/science/article/pii/S0277953624001345</a>, See on <a href="https://news.ycombinator.com/item?id=39405593">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="mathjax-container" role="main"><div role="region" aria-label="Download options and search"><ul aria-label="PDF Options"><li><a target="_blank" aria-label="View PDF. Opens in a new window."><svg focusable="false" viewBox="0 0 32 32" height="24" width="24"><path d="M7 .362h17.875l6.763 6.1V31.64H6.948V16z" stroke="#000" stroke-width=".703" fill="#fff"></path><path d="M.167 2.592H22.39V9.72H.166z" fill="#da0000"></path><path fill="#fff9f9" d="M5.97 3.638h1.62c1.053 0 1.483.677 1.488 1.564.008.96-.6 1.564-1.492 1.564h-.644v1.66h-.977V3.64m.977.897v1.34h.542c.27 0 .596-.068.596-.673-.002-.6-.32-.667-.596-.667h-.542m3.8.036v2.92h.35c.933 0 1.223-.448 1.228-1.462.008-1.06-.316-1.45-1.23-1.45h-.347m-.977-.94h1.03c1.68 0 2.523.586 2.534 2.39.01 1.688-.607 2.4-2.534 2.4h-1.03V3.64m4.305 0h2.63v.934h-1.657v.894H16.6V6.4h-1.56v2.026h-.97V3.638"></path><path d="M19.462 13.46c.348 4.274-6.59 16.72-8.508 15.792-1.82-.85 1.53-3.317 2.92-4.366-2.864.894-5.394 3.252-3.837 3.93 2.113.895 7.048-9.25 9.41-15.394zM14.32 24.874c4.767-1.526 14.735-2.974 15.152-1.407.824-3.157-13.72-.37-15.153 1.407zm5.28-5.043c2.31 3.237 9.816 7.498 9.788 3.82-.306 2.046-6.66-1.097-8.925-4.164-4.087-5.534-2.39-8.772-1.682-8.732.917.047 1.074 1.307.67 2.442-.173-1.406-.58-2.44-1.224-2.415-1.835.067-1.905 4.46 1.37 9.065z" fill="#f91d0a"></path></svg><span><span>View&nbsp;<strong>PDF</strong></span></span></a></li><li></li></ul></div><div><article lang="en"><div id="publication"><p><a href="https://www.sciencedirect.com/journal/social-science-and-medicine" title="Go to Social Science &amp; Medicine on ScienceDirect"><span><img src="https://sdfestaticassets-eu-west-1.sciencedirectassets.com/prod/27e772449f51fbce81a73e177357d1103ef60ba2/image/elsevier-non-solus.png" alt="Elsevier"></span></a></p><p><a href="https://www.sciencedirect.com/journal/social-science-and-medicine/vol/345/suppl/C"><span><img src="https://ars.els-cdn.com/content/image/1-s2.0-S0277953624X00039-cov150h.gif" alt="Social Science &amp; Medicine"></span></a></p></div><p id="article-identifier-links"><a href="https://doi.org/10.1016/j.socscimed.2024.116690" target="_blank" rel="noreferrer noopener" aria-label="Persistent link using digital object identifier" title="Persistent link using digital object identifier"><span>https://doi.org/10.1016/j.socscimed.2024.116690</span><svg focusable="false" viewBox="0 0 78 128" aria-label="Opens in new window" width="1em" height="1em"><path d="m4 36h57.07l-59.5 59.5 7.07 7.08 59.36-59.36v56.78h1e1v-74h-74z"></path></svg></a><a href="https://s100.copyright.com/AppDispatchServlet?publisherName=ELS&amp;contentID=S0277953624001345&amp;orderBeanReset=true" target="_blank" rel="noreferrer noopener"><span>Get rights and content</span><svg focusable="false" viewBox="0 0 78 128" aria-label="Opens in new window" width="1em" height="1em"><path d="m4 36h57.07l-59.5 59.5 7.07 7.08 59.36-59.36v56.78h1e1v-74h-74z"></path></svg></a></p><div id="abstracts"><div id="abs0015" lang="en"><h2>Highlights</h2><div id="abssec0015"><ul><li><span>•</span><span><p id="p0010">We report the effects of being bullied in school at ages 7 and 11, on adult outcomes decades later.</p></span></li><li><span>•</span><span><p id="p0015">We use data from the 1958 British birth cohort the NCDS.</p></span></li><li><span>•</span><span><p id="p0020">Being bullied as a child worsens well-being and labour market performance up to half a century later.</p></span></li><li><span>•</span><span><p id="p0025">Bullying in childhood lowers the probability of having a job throughout adulthood.</p></span></li><li><span>•</span><span><p id="p0030">Being exposed to bullying as a child raises the probability of premature death.</p></span></li></ul></div></div><div id="abs0010" lang="en"><h2>Abstract</h2><p id="abspara0010">Most studies examining the impact of bullying on wellbeing in adulthood rely on retrospective measures of bullying and concentrate primarily on psychological outcomes. Instead, we examine the effects of bullying at ages 7 and 11, collected prospectively by the child's mother, on subjective wellbeing, labour market prospects, and physical wellbeing over the life-course. We exploit 12 sweeps of interview data through to age 62 for a cohort born in a single week in Britain in 1958. Bullying negatively impacts subjective well-being between ages 16 and 62 and raises the probability of mortality before age 55. It also lowers the probability of having a job in adulthood. These effects are independent of other adverse childhood experiences.</p></div></div><ul id="issue-navigation"><li></li><li></li></ul><div id="kwrds0010"><h2>Keywords</h2><p><span>Bullying</span></p><p><span>Subjective wellbeing</span></p><p><span>Birth cohort</span></p><p><span>National child development study</span></p></div><section id="da0010"><h2 id="sectitle0030">Data availability</h2><p id="p0035">The data that has been used is confidential.</p></section><section aria-label="Cited by" id="section-cited-by"><header id="citing-articles-header"><h2>Cited by (0)</h2></header></section><p><span>© 2024 The Authors. Published by Elsevier Ltd.</span></p></article></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Big Pharma spends billions more on executives and stockholders than on R&D (432 pts)]]></title>
            <link>https://arstechnica.com/science/2024/02/big-pharma-spends-billions-more-on-executives-and-stockholders-than-on-rd/</link>
            <guid>39405547</guid>
            <pubDate>Sat, 17 Feb 2024 01:54:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arstechnica.com/science/2024/02/big-pharma-spends-billions-more-on-executives-and-stockholders-than-on-rd/">https://arstechnica.com/science/2024/02/big-pharma-spends-billions-more-on-executives-and-stockholders-than-on-rd/</a>, See on <a href="https://news.ycombinator.com/item?id=39405547">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <header>
            <h4>
      Greed    —
</h4>
            
            <h2 itemprop="description">Senate report points to greed and "patent thickets" as key reasons for high prices.</h2>
                    </header>
        <section>
            <div itemprop="articleBody">
                                    
<figure>
  <img src="https://cdn.arstechnica.net/wp-content/uploads/2024/02/20240208-bouchard-451-800x532.jpeg" alt="Big Pharma spends billions more on executives and stockholders than on R&amp;D">
      <figcaption></figcaption>  </figure>

  




<!-- cache hit 3:single/related:5f10b5ffc97d661cd5d30f34b2679bd5 --><!-- empty -->
<p>When big pharmaceutical companies are confronted over their exorbitant pricing of prescription drugs in the US, they often retreat to two well-worn arguments: One, that the high drug prices cover costs of researching and developing new drugs, a risky and expensive endeavor, and two, that middle managers—pharmacy benefit managers (PBMs), to be specific—are actually the ones price gouging Americans.</p>
<p>Both of these arguments faced substantial blows in <a href="https://www.help.senate.gov/hearings/why-does-the-united-states-pay-by-far-the-highest-prices-in-the-world-for-prescription-drugs">a hearing</a> Thursday held by the Senate Committee on Health, Education, Labor and Pensions, chaired by Sen. Bernie Sanders (I-Vt.). In fact, pharmaceutical companies are spending billions of dollars more on lavish executive compensation, dividends, and stock buyouts than they spend on research and development (R&amp;D) for new drugs, Sanders pointed out. "In other words, these companies are spending more to enrich their own stockholders and CEOs than they are in finding new cures and new treatments," he said.</p>
<p>And, while PBMs certainly contribute to America's uniquely astronomical drug pricing, their profiteering accounts for a small fraction of the massive drug market, Sanders and an expert panelist noted. PBMs work as shadowy middle managers between drugmakers, insurers, and pharmacies, setting drug formularies and consumer prices, and negotiating rebates and discounts behind the scenes. Though PBMs practices contribute to overall costs, they pale compared to pharmaceutical profits.</p>
<p>Rather, the heart of the problem, according to <a href="https://www.help.senate.gov/imo/media/doc/big_pharmas_business_model_report.pdf">a Senate report released earlier this week</a>, is pharmaceutical greed, patent gaming that allows drug makers to stretch out monopolies, and powerful lobbying.</p>
<p>On Thursday, the Senate committee gathered the CEOs of three behemoth pharmaceutical companies to question them on the drug pricing practices: Robert Davis of Merck, Joaquin Duato of Johnson &amp; Johnson, and Chris Boerner of Bristol Myers Squibb.</p>                                            
                                                        
<p>"We are aware of the many important lifesaving drugs that your companies have produced, and that's extraordinarily important," Sanders said before questioning the CEOs. "But, I think, as all of you know, those drugs mean nothing to anybody who cannot afford it."</p>
<h2>America’s uniquely high prices</h2>
<p>Sanders called drug pricing in the US "outrageous," noting that Americans spend by far the most for prescription drugs in the world. <a href="https://aspe.hhs.gov/sites/default/files/documents/277371265a705c356c968977e87446ae/international-price-comparisons.pdf">A report this month by the US Department of Health and Human Services</a> found that in 2022, US prices across all brand-name and generic drugs were nearly three times as high as prices in 33 other wealthy countries. That means that for every dollar paid in other countries for prescription drugs, Americans paid $2.78. And that gap is widening over time.</p>
<p>Focusing on drugs from the three companies represented at the hearing (J&amp;J, Merck, and Bristol Myers Squibb), the Senate report looked at how initial prices for new drugs entering the US market have skyrocketed over the past two decades. The analysis found that from 2004 to 2008, the median launch price of innovative prescription drugs sold by J&amp;J, Merck, and Bristol Myers Squibb was over $14,000. But, over the past five years, the median launch price was over $238,000. Those numbers account for inflation.</p>
<p>The report focused on high-profit drugs from each of the drug makers. Merck's Keytruda, a cancer drug, costs $191,000 a year in the US, but is just $91,000 in France and $44,000 in Japan. J&amp;J's HIV drug, Symtuza, is $56,000 in the US, but only $14,000 in Canada. And Bristol Myers Squibb's Eliquis, used to prevent strokes, costs $7,100 in the US, but $760 in the UK and $900 in Canada.</p>
<p>Sanders asked Bristol Myers Squibb's CEO Boerner if the company would "reduce the list price of Eliquis in the United States to the price that you charge in Canada, where you make a profit?" Boerner replied that "we can’t make that commitment primarily because the prices in these two countries have very different systems."</p>
<p>The powerful pharmaceutical trade group PhRMA, <a href="https://phrma.org/Blog/Setting-the-Record-Straight-Comparing-US-drug-prices-to-those-in-foreign-countries-hurts-patients">published a blog post before the hearing</a> saying that comparing US drug prices to prices in other countries "hurts patients." The group argued that Americans have broader, faster access to drugs than people in other countries.</p>

                                                </div>

            
            
                            <nav>Page: <span>1 <a href="https://arstechnica.com/science/2024/02/big-pharma-spends-billions-more-on-executives-and-stockholders-than-on-rd/2/">2</a> <a href="https://arstechnica.com/science/2024/02/big-pharma-spends-billions-more-on-executives-and-stockholders-than-on-rd/2/"><span>Next <span>→</span></span></a></span></nav>
            
        </section>
    </div></div>]]></description>
        </item>
    </channel>
</rss>