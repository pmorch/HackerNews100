<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Tue, 30 Jan 2024 00:00:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Alzheimer’s cases tied to no-longer-used medical procedure (153 pts)]]></title>
            <link>https://www.statnews.com/2024/01/29/first-transmitted-alzheimers-disease-cases-growth-hormone-cadavers/</link>
            <guid>39183063</guid>
            <pubDate>Mon, 29 Jan 2024 21:39:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.statnews.com/2024/01/29/first-transmitted-alzheimers-disease-cases-growth-hormone-cadavers/">https://www.statnews.com/2024/01/29/first-transmitted-alzheimers-disease-cases-growth-hormone-cadavers/</a>, See on <a href="https://news.ycombinator.com/item?id=39183063">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
	<p><span><span>L</span></span>ONDON — There was something odd about these Alzheimer’s cases.</p>
<p>Part of it was the patients’ presentations: Some didn’t have the classic symptoms of the condition. But it was also that the patients were in their 40s and 50s, even their 30s, far younger than people who normally develop the disease. They didn’t even have the known genetic mutations that can set people on the course for such early-onset Alzheimer’s.</p>
<p>But this small handful of patients did share a particular history. As children, they had received growth hormone taken from the brains of human cadavers, which used to be a treatment for a number of conditions that caused short stature. Now, decades later, they were showing signs of Alzheimer’s. In the interim, scientists had discovered that that type of hormone treatment they got could unwittingly transfer bits of protein into recipients’ brains. In some cases, it had induced a fatal brain disease called Creutzfeldt-Jakob disease, or CJD — a finding that led to the banning of the procedure 40 years ago.</p>
<p>It seemed that it wasn’t just the proteins behind CJD that could get transferred. As the scientific team treating the patients <a href="https://www.nature.com/articles/s41591-023-02729-2" target="_blank" rel="noopener">reported Monday</a> in the journal Nature Medicine, the hormone transplant seeded the beta-amyloid protein that’s a hallmark of Alzheimer’s in some recipients’ brains, which, decades later, propagated into disease-causing plaques. They are the first known cases of transmitted Alzheimer’s disease, likely a scientific anomaly yet a finding that adds another wrinkle <a href="https://www.statnews.com/2019/06/25/alzheimers-cabal-thwarted-progress-toward-cure/" rel="">to ongoing arguments about what truly causes Alzheimer’s</a>.</p>
<p>“It looks real that some of these people developed early-onset Alzheimer’s because of that [hormone treatment],” said Ben Wolozin, an expert on neurodegenerative diseases at Boston University’s medical school, who was not involved in the study.</p>
		
		
<p>Other outside scientists agreed that they found the findings legitimate, in particular because only people who had received cadaveric growth hormone prepared in a particular way — a method that doesn’t eliminate protein bits — went on to develop dementia.</p>
<p>Such incidents of illness are known as “iatrogenic,” meaning the result of a medical procedure. In conditions like iatrogenic CJD, the transmissible agents are known as prions — basically, misfolded pieces of protein that go on to cause disease, like a sort of infectious bug.</p>
<p>Researchers debate the definition of a prion and whether it could include amyloid. But regardless, the paper’s authors “provide tantalizing evidence that, under extraordinary circumstances, Alzheimer’s disease is transmissible by a prion-like mechanism,” Mathias Jucker of Germany’s University of Tübingen and Lary Walker of Emory University <a href="https://www.nature.com/articles/s41591-023-02768-9" target="_blank" rel="noopener">wrote in a commentary</a> also published Monday.</p>
<p>Both the study’s authors and outside researchers stressed Alzheimer’s is not some contagious disease that you could catch by caring for a relative, for example. Cases tied to cadaveric growth hormone treatment are also no longer possible; a synthetic hormone has been used instead for decades. The paper’s authors, who run a special prion disease research and treatment center in London, describe just five Alzheimer’s patients out of the more than 1,800 people who were known to have received cadaveric growth hormone in the U.K. from 1959 to 1985. Still, the researchers said the findings were a reminder of the continuing importance of practices like sterilizing neurosurgical instruments, which, in theory, could transfer prions if not properly cleaned between patients.</p>
<p>But in addition to being a scientific curiosity — and another example of the fallout of the use of cadaveric growth hormone — these cases could also stir up the decades-long, oft-contentious fight over the roots of Alzheimer’s.</p>
<p>“We think from a public health point of view, this is probably going to be a relatively small number of patients,” said John Collinge of the MRC Prion Unit at University College London, the senior author of the paper. “However, the implications of this paper we think are broader with respect to disease mechanisms — that it looks like what’s going on in Alzheimer’s disease is very similar in many respects to what happens in the human prion diseases like CJD, with the propagation of these abnormal aggregates of misfolded proteins and misshapen proteins.”</p>
<p>Many scientists believe that beta-amyloid plays a role in the development of Alzheimer’s, and therapies that can clear the protein from people’s brains have finally, after decades of failed attempts, <a href="https://www.statnews.com/2023/07/06/leqembi-alzheimers-fda-approval-eisai-biogen/" rel="">started showing</a> some <a href="https://www.statnews.com/2023/07/17/alzheimers-disease-donanemab-eli-lilly-detailed-data/" rel="">benefits for patients</a>. But most experts also think amyloid isn’t solely responsible. So in these cases, was there something else going on in addition to the amyloid transfer?</p>
<p>“It raises questions about whether amyloid alone is able to cause problems,” said Marc Dhenain, an Alzheimer’s expert at the French research center CEA, who was not involved in the new study.</p>
<p>Outside researchers said they were also left scratching their heads about some of the findings. They said there was limited information, with findings reported from just a few patients, and data like genetic sequencing and autopsy results available from just a sample of them.</p>
<p>They noted, however, that there didn’t seem to be much inflammation in the patients’ brains, another hallmark of Alzheimer’s that can be induced by amyloid. They also wondered why there was so little presence of another protein called tau in the people’s brains despite their cognitive losses, even though tau levels often correlate to cognitive decline. Some researchers speculated that the patients may have had some other genetic mutation that could increase their risk of Alzheimer’s. Two of the patients had intellectual disabilities, another risk factor.</p>
<p>“Can the pathology be transmitted? Yes, it can, and that’s important conceptually,” Wolozin said. “The question is, what’s driving disease? There are many weird things about these rare cases. What’s unclear from the images is, why would they develop such severe dementia that quickly?”</p>
		
		
<p>Globally, <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3358170/" target="_blank" rel="noopener">more than 200 cases of iatrogenic CJD</a> have been documented in recipients of cadaveric human growth hormone, with the bulk of patients in France, the U.K., and the U.S. And for years, researchers have been gathering clues that there may be an iatrogenic form of Alzheimer’s as well. (The vast majority of Alzheimer’s cases are what’s known as sporadic, developing among older people. There are also some early-onset cases that are tied to inherited mutations.)</p>
<p>In 2015, the UCL prion researchers <a href="https://pubmed.ncbi.nlm.nih.gov/26354483/" target="_blank" rel="noopener">reported</a> finding lots of beta-amyloid in the brains of patients who died of iatrogenic CJD, including a buildup in the brain’s blood vessels, which is known as cerebral amyloid angiopathy and which is seen in most people with Alzheimer’s. It led them to hypothesize that the hormones the patient received had been contaminated not just with the CJD prions, but seeds of amyloid as well. It also made them wonder whether the patients, had CJD not killed them, would have gone on to develop Alzheimer’s.</p>
<p>The paper describes eight patients who were treated at the U.K.’s National Prion Clinic from 2017 to 2022, none of whom had CJD and only some of whom were found to have Alzheimer’s. They had received the hormone treatment as children for different causes of short stature: some had brain tumors, others had developmental conditions, others just lacked their own natural hormone.</p>
<p>Five of them had been diagnosed with Alzheimer’s or likely had Alzheimer’s disease, with their symptoms starting between the ages of 38 and 55. Among the other three patients, two had some cognitive impairments, while the third was asymptomatic.</p>
<p>The researchers noted that the presentation of iatrogenic CJD often differs from that of the more common sporadic cases, so it’s possible the transmitted Alzheimer’s cases would look somewhat distinct from typical cases.</p>
<p>Gargi Banerjee, the lead author of the paper, said the UCL researchers considered other possible causes of these patients’ Alzheimer’s. Given the age of the patients, these weren’t sporadic cases, which almost always develop only later in life. The patients didn’t have known genetic mutations that could cause early-onset dementia. The researchers also considered the underlying reasons why the patients had received the hormone in the first place — was it a result of their cancer treatment or congenital conditions? — but that wasn’t a likely explanation either.</p>
<p>“The thing about this group is thinking about them as a whole,” she said. “In the people who did have symptoms, they had various different illnesses, but the only combined fact was that they all had this particular type of growth hormone, this particular preparation in childhood. … There was no other unifying cause for this.”</p>
</section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A Tour of the Lisps (123 pts)]]></title>
            <link>https://www.fosskers.ca/en/blog/rounds-of-lisp</link>
            <guid>39182721</guid>
            <pubDate>Mon, 29 Jan 2024 21:15:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.fosskers.ca/en/blog/rounds-of-lisp">https://www.fosskers.ca/en/blog/rounds-of-lisp</a>, See on <a href="https://news.ycombinator.com/item?id=39182721">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>2023 seems to have been the year where I "made the rounds" of a number of major Lisps. There were several elements that lead to this. Firstly must have been my exposure to Elixir in 2022, which introduced me to the idea of debugging live systems and "staying in your program". Secondly must have been my chief complaint of Rust; although it is a wonderful language and ecosystem in many ways, you can't say that it's beautiful, which my previous love Haskell very much was. Thirdly then must been the talk <a href="https://www.youtube.com/watch?v=8Ab3ArE8W3s&amp;pp=ygUnc3RvcCB3cml0aW5nIGRlYWQgcHJvZ3JhbXMgamFjayBkb25vdmFu">Stop Writing Dead Programs</a> by Jack Rusher, which opened my eyes to the prevalence of the write-compile-run development cycle and how we can escape from it. And last was my day-to-day usage of Emacs, whose configuration language is also a Lisp. Thanks Henrik.</p><p>Over the past year I published software in five Lisps: Guile, Common Lisp, Fennel, Clojure, and Emacs Lisp. Based on some questions I received from a Doom Emacs community member, I'll talk about each of these and reveal where I am now in my views and usage of Lisp languages.</p><h2 id="org8bd351">Questions</h2><h3 id="org92cbde">What was the purpose of doing the rounds?</h3><p>It happened organically, I didn't plan to do it.</p><p>I mostly switched away from Haskell to Rust during COVID, sometime during 2020. I had some time off, decided to learn both Go and Rust, and was happier with the latter as I found that I could very much "speak Haskell" in it while gaining <a href="https://www.fosskers.ca/en/blog/rust-software-dev">other modern benefits</a> like the Ownership system. Very little compromise for massive gain.</p><p>Yet I've always had a love for terser, elegant languages, and I've always had a soft spot for Lisps. I like Rust, but somehow it didn't feel like home. The purpose of the rounds was to once and for all find a language that could satisfy my needs as a working software developer, but also "tickle my fancy" in terms of day-to-day joy and match my values as a person.</p><h3 id="orgf72a8b">What draws you to a Lisp dialect?</h3><p>Beauty in programs is important. I generally believe that beautiful code is less likely to be buggy, since beauty and simplicity are related, simplicity is the dual of complexity, and complexity is the womb from which bugs emerge.</p><p>Lisps are beautiful. Code is generally quite terse thanks to its syntax. And something interesting happens with even a bit of serious Lisp experience: you stop seeing the parentheses. Not that they'd be a bother if you did; the parens allow "structural editing" which can speed up your editing. You're no longer bound to characters and lines, you can swap and move entire s-expressions freely. And besides, modern editor setups handle the parenthesis balancing for you. I spend no extra time herding parentheses, but I can see how this would have been an issue in the past.</p><p>So I'm clearly drawn to the aesthetics, as I was in my Haskell years. But what drew me to the particular Lisps I tried?</p><p><span>Guile</span> has Scheme's cleanliness and consistency. It's also a GNU language and installed by default on many systems, and there was a part of me that loved <i>the
freedom, man, yeah</i>. It was here that I discovered Transducers and fell in love, proceeding to port the paradigm to <a href="https://git.sr.ht/~fosskers/cl-transducers">Common Lisp</a>, <a href="https://git.sr.ht/~fosskers/transducers.fnl">Fennel</a>, and <a href="https://git.sr.ht/~fosskers/transducers.el">Emacs Lisp</a>. Guile though is hard to produce larger projects in if you aren't using Guix, since there exists no non-Guix-based dependency management.</p><p><span>Common Lisp</span> is the classic. It has its historical warts, but I found an active ecosystem and enthusiastic community. Best-in-class debuggability and interactivity for any language I've used. Have you ever wanted to debug external library code, but from within your program? While it's running? In prod across the network? Well you can. It's also a compiled language but allows hotswapping like Erlang, and has a static type system if you want it for API-hardening and performance tuning. It's definitely a power user's language. There are modern libraries for papering over some of the historical stdlib API oddities, although discovering these is sometimes difficult. There is also no "one Common Lisp", you need to <a href="https://github.com/CodyReichert/awesome-cl#implementations">pick an implementation</a> to work with. No LSP either, although existing editor integrations are of sufficently high quality and predate the notion of LSPs, so they aren't particularly missed.</p><p><a href="https://fennel-lang.org/">Fennel</a> is simple and clean. It compiles to Lua, shares its semantics, and can trivially use Lua libraries. The <a href="https://tic80.com/">TIC-80</a> supports it natively for retro game development, which I used to write <a href="https://tic80.com/play?cart=3375">Snake</a> and a port of the classic TI83 game <a href="https://fosskers.itch.io/falldown">Falldown</a>. It's tooling improves with time and you can produce static binaries with it, but direct vendoring is the recommended dependency management strategy. It also lacks Common Lisp's debuggability, given that it sits entirely within Lua's runtime.</p><p><span>Clojure</span> is what happens when a smart, experienced developer sits down for two years and thinks about what a programming language really needs to be to get work done in the real world. And Rich Hickey did an excellent job. Clojure is very clean, has best-in-class ergonomics, and best-in-class tooling. Great data structure literals. Its community is also very strong and <a href="https://www.clojuriststogether.org/">self-funds</a> many of the popular projects. Its heavy integration with the JVM turns a lot of people off (myself included), but there are <a href="https://github.com/babashka/babashka">alternate platforms</a> available, including an upcoming <a href="https://github.com/jank-lang/jank/">C++-based native implementation</a> which I've had my eye on for some time. Clojure can definitely be said to have "brought Lisp into the modern age", and I used it to power the <a href="https://git.sr.ht/~fosskers/faur">AUR data mirror</a> that <a href="https://github.com/fosskers/aura">Aura</a> uses. Unfortunately Clojure does have famously poor error messages, and while it has some of Common Lisp's prod-debuggability and hotswapping, I always miss having the Condition System.</p><p>And finally, the strength of <span>Emacs Lisp</span> is that it's always at hand. Best-in-class discoverability due to editor integration, and especially in combination with Org Mode it's easiest to whip out quick code samples. I write a lot of small script-like functionality in it, which is then always available without leaving the editor and is only one button press away from executing. It also has a very active <a href="https://melpa.org/#/">ecosystem</a> and community projects like <a href="https://github.com/doomemacs/doomemacs/">Doom Emacs</a>. Given how old it is though, senior even to Common Lisp, it has some historical cruft and lacks "obvious" things like first-class async. Makes for some really clean editor config, though!</p><p>As you can see, each dialect has its strengths but is not without drawbacks.</p><h3 id="org8270ce">What have you learned, big-picture-wise, from doing the rounds?</h3><p>Several things.</p><p>First, I learned that I had been obsessing over Order. In things being "just so", especially with regards to the type system. I've overhauled Aura enough times to know that I gain joy from pushing puzzle pieces into place, but that doesn't necessarily lead to a state of "being done" and freedom in the <a href="https://medium.com/@bre/the-cult-of-done-manifesto-724ca1c2ff13">Getting Stuff Done</a> sense. Type systems are great for maintainability, but especially through my exposure to Clojure-thinking and live, in-editor testing like:</p><div><pre><code><span id="1"><a href="#1"></a>(<span>comment</span></span>
<span id="2"><a href="#2"></a>  (clojure.str/join <span>"foo"</span> <span>"bar"</span>))</span></code></pre></div><p>and leaving a <code>repl.clj</code> or <code>repl.lisp</code> file around in every project filled with little utilities for live testing, I've come around to the idea that:</p><blockquote><p>It's okay to start dynamic and tighten down the API later with gradual-typing
mechanisms once the domain crystalizes.</p></blockquote><p>Some Lisps have such things, such as Common Lisp, Racket, and Clojure. Heck even Simon Peyton-Jones, the inventor of Haskell, has <a href="https://codersatwork.com/">gone on record</a> saying:</p><blockquote><p>...dynamic languages are still interesting and important. There are programs you
can write which can't be typed by a particular type system but which
nevertheless don't "go wrong" at runtime, which is the gold standard - don't
segfault, don't add integers to characters. They're just fine.</p><p>I think to try to specify all that a program should do, you get specifications
that are themselves so complicated that you're not longer confident that they
say what you intended.</p></blockquote><p>The harder it is to test things in-editor, the more you need top-down structure like type systems and unit tests. Lisp makes in-editor testing very easy.</p><p>Now second, I learned that I had never truly debugged before. The tools provided particularly by Common Lisp and to a slightly lesser degree Clojure allow me to <span>be inside my program</span> at all times. Why do print-line-debugging to find out what's happening at a location in code when you can just be inside your program and inspect everything live as it's running? I had never known that this existed as a paradigm. The write-compile-run cycle we usually suffer through in other languages is silly, and I do feel this pain in Rust.</p><p>Third, that Lisps are mostly not about writing macros. I have written perhaps two small ones. Functions do the job the vast majority of the time. No, I'd say "the center of Lisp", if it's anywhere, is the interactive REPL-based development. And that doesn't mean you should be typing things into a REPL prompt manually like a Neanderthal; modern setups have you type directly into your editor and <i>send</i> the code to the REPL, receiving the result as an in-editor overlay. It's quite pretty (see the <code>comment</code> example above).</p><p>And finally fourth, I got confirmation that Lisps are entirely usable in the modern day. Real, working, maintainable software can be written for basically <a href="https://store.steampowered.com/app/1261430/Kandria/">any domain</a>. And did you know salaries for Lisp languages <a href="https://survey.stackoverflow.co/2023/#salary-and-experience-by-language">seem to be quite high</a>?</p><h3 id="org2133ee">What's your current mental model of an "ideal Lisp"?</h3><p>It would be something like a fusion of Clojure and Common Lisp, but with stronger-yet-still-optional static typing features. Enums are great, traits/typeclasses are great, so let's have those when we want them. Maybe the latter isn't as necessary if you're doing generic-dispatch properly.</p><p>I like Functional Programming, and I'm not married to CLOS. Structs do the job just fine for me, but maybe I'm missing something.</p><p>I'd want the debuggability of Common Lisp for sure, and its ability to compile natively. Rich was both right and wrong about parens; I'm not offended by CL-style paren usage, for example in this <code>let</code>:</p><div><pre>(let* ((foo (bar 5))
       (baz (zoo foo)))
  #(foo baz))</pre></div><p>versus</p><div><pre><code><span id="1"><a href="#1"></a>(<span>let</span> [foo (bar <span>5</span>)</span>
<span id="2"><a href="#2"></a>      bar (zoo foo)]</span>
<span id="3"><a href="#3"></a>  [foo baz])</span></code></pre></div><p>Yet as seen in the second example, I <span>do</span> want special brackets for well-used collections like vectors, maps, and sets.</p><p>After that I'd be happy with good tooling and a talented community.</p><p>As an aside, it should be known that some folks have gone to great lengths to embed other languages inside Common Lisp, namely <a href="https://github.com/coalton-lang/coalton">Coalton</a>, a Haskell-like Lisp, and <a href="https://github.com/phantomics/april">April</a>, which is APL. These can be easily slotted into existing CL programs.</p><h3 id="org3c9725">Do you believe s-expressions are the be-all-end-all of Lisp syntax?</h3><p>Yes, because of structural editing and because Lisp isn't APL or <a href="https://www.uiua.org/">Uiua</a>. Something is lost when you still want to be a word-based language but insist on whitespace-only like Python or Haskell. Efforts to abandon parentheses for fear that they turn away theoretical new users are misguided. Mature people can see past such surface details. Growth for its own sake is not a virtue.</p><h3 id="org309a3e">How can newcomers get the most out of learning Lisp?</h3><ol><li>Start with a proper setup.</li><li>Embrace the REPL.</li><li>Immerse yourself.</li><li>Get help.</li></ol><p>Immersion is the best way to learn a human language; so too of programming. Configuring your <a href="https://github.com/doomemacs/doomemacs/">Editor</a> (another option: <a href="https://lem-project.github.io/">Lem</a>), your <a href="https://github.com/atlas-engineer/nyxt">Browser</a>, or your <a href="https://guix.gnu.org/">OS</a> in a Lisp is a good way to stay immersed.</p><p>You'll also want to build something real. Naturally as in any project, if you don't have a goal in mind you aren't going to get very far, so I'd also say that the next time you want to build something, just pick a Lisp to do it in.</p><p>Before that though, you'll want to make sure you have a proper setup. Get the <a href="https://github.com/joaotavora/sly">editor modes</a>, find the LSPs, download the dependency managers, grab the <a href="https://github.com/justinbarclay/parinfer-rust-mode">paren-balancers</a>.</p><p>If you want help, check out the Clojure Slack. They're very welcoming there. For Common Lisp, see my article on <a href="https://www.fosskers.ca/en/blog/common-lisp">Common Lisp resources</a>. Consider also joining the Doom Emacs Discord server or the Lisp Discord server. Also try to find meetups in your area. You might be surprised at how much is happening in this world.</p><p>If you just want to get your feet wet, consider <a href="https://exercism.org/">Exercism</a>.</p><p>Overall, I'd say start with Clojure, get a feel for the style, then swing over to Common Lisp to see what each is missing. If you've built something real in either, you should have gotten a feel for what the paradigm offers. I personally don't feel you necessarily need to slog through a giant 1000-page textbook to learn a Lisp. That includes the famous <a href="https://en.wikipedia.org/wiki/Structure_and_Interpretation_of_Computer_Programs">Structure and Interpretation of Computer
Programs</a>. At the end of the day, you just need to write code, and no amount of reading will ever be a substitute for that.</p><h2 id="orgca5e2f">Conclusion</h2><p>I find myself <a href="https://codeberg.org/fosskers/filepaths">writing Common Lisp</a> lately. I had a moment at work recently where odd behaviour in our Rust application code was likely due to a bug in a library, but I couldn't debug it <i>right there</i> to confirm the problem. What follows is a clone, patch, push, re-pin, retest, ok, merge, release, re-pin again... you get it. I noticed myself thinking "if this were Common Lisp this debug would have taken 30 seconds." So here I am, at least for my personal coding.</p><p>Both Common Lisp and Lisps in general are "chill cafés". The communities are small enough to find yourself a nice window seat, and projects are generally well-written. The folks themselves are self-selecting and I've had nothing but positive experiences.</p><p>Have I found my "one true language"? Well, no, because there isn't such a thing. No matter which tool we pick, we'll always <a href="https://www.fosskers.ca/en/blog/subsetting-your-life">have to choose an inner subset</a> of features to adopt, at least until "the next stage". And as nice as newer languages like Clojure and Rust are, these aren't Man's final programming languages. But I'm happy for now.</p><h2 id="orgc547d5">Feedback</h2><p>Here are my responses to some questions I got regarding the article.</p><blockquote><p>What about other Schemes like Chicken, Chez, Gambit, etc.? Like CL, the Scheme
implementation you pick can affect your day to day experience a lot.</p></blockquote><p>I had tried Chicken a bit in 2022 (I think). It seemed like a decent package, although I turned away nonetheless. Racket I had also tried in the past but moved on for similar reasons.</p><p>To me, the Schemes seem like good languages, but when doing software development the language itself <a href="https://www.fosskers.ca/en/blog/software-dev-langs">isn't all there is to it</a>.</p><blockquote><p>What about Clojure's Condition System library, Farolero?</p></blockquote><p><a href="https://github.com/IGJoshua/farolero">I have tried this</a>. It's a solid attempt at introducing as much of the Condition System as possible given the underlying platform's capabilities. Although, since it's not first-class, it isn't trivial to integrate across libraries. Probably decent for application development.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Boardzilla, a framework for making web-based board games (233 pts)]]></title>
            <link>https://www.boardzilla.io/</link>
            <guid>39180953</guid>
            <pubDate>Mon, 29 Jan 2024 19:12:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.boardzilla.io/">https://www.boardzilla.io/</a>, See on <a href="https://news.ycombinator.com/item?id=39180953">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div><p><img alt="Rawr!" src="https://www.boardzilla.io/boardzilla-logo.svg"></p><h2>Digital board games made easy.</h2><p><a href="https://discord.gg/bdjpdmuZpH">Join us on Discord</a></p></div><div><h2>Games</h2><div><a href="https://www.boardzilla.io/g/7-wonders-duel"><div><h2>7 Wonders Duel</h2><p>For 2 players</p></div></a><a href="https://www.boardzilla.io/g/cursed"><div><h2>Cursed</h2><p>For 1 player</p></div></a><a href="https://www.boardzilla.io/g/hex"><div><h2>Hex</h2><p>For 2 players</p></div></a><a href="https://www.boardzilla.io/g/powergrid"><div><h2>Power Grid</h2><p>For 2 to 4 players</p></div></a></div></div><div><h2>Boardzilla is a place for playing and developing board games all within your browser. Boardzilla makes it easy to express the game rules and provides players with a simple interface to the choices available to them.</h2><p><a href="https://www.boardzilla.io/why">Find out more</a></p></div><div><h2>Ready to make your own game?</h2><p><a href="https://docs.boardzilla.io/">Read the documentation</a></p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Evergrande, once China's biggest property developer, ordered to liquidate (124 pts)]]></title>
            <link>https://www.wsj.com/articles/evergrande-faces-imminent-liquidation-after-talks-with-top-creditors-break-down-4af5f657</link>
            <guid>39180898</guid>
            <pubDate>Mon, 29 Jan 2024 19:09:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.wsj.com/articles/evergrande-faces-imminent-liquidation-after-talks-with-top-creditors-break-down-4af5f657">https://www.wsj.com/articles/evergrande-faces-imminent-liquidation-after-talks-with-top-creditors-break-down-4af5f657</a>, See on <a href="https://news.ycombinator.com/item?id=39180898">Hacker News</a></p>
Couldn't get https://www.wsj.com/articles/evergrande-faces-imminent-liquidation-after-talks-with-top-creditors-break-down-4af5f657: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA[An Air Force officer who spent $11M searching Earhart's plane may have found it (179 pts)]]></title>
            <link>https://www.businessinsider.com/sonar-image-pilot-amelia-earhart-plane-found-pacific-ocean-2024</link>
            <guid>39179031</guid>
            <pubDate>Mon, 29 Jan 2024 17:20:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.businessinsider.com/sonar-image-pilot-amelia-earhart-plane-found-pacific-ocean-2024">https://www.businessinsider.com/sonar-image-pilot-amelia-earhart-plane-found-pacific-ocean-2024</a>, See on <a href="https://news.ycombinator.com/item?id=39179031">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-component-type="content-lock" data-load-strategy="exclude">
                                  <ul><li>Tony Romeo believes he's discovered Amelia Earhart's long-lost aircraft.</li><li>Romeo said he captured an image of an aircraft-shaped object on the floor of the Pacific Ocean.</li><li>Experts say the location seems roughly correct, but clearer images are needed.</li></ul><!-- Excluded mobile ad on desktop --><div id="formContainer" data-component-type="inline-newsletter-module" data-event-label="insider_today" data-newsletter-id="1" data-newsletter-title="Insider Today" data-acq-source="transportationinlinesignup">
                        
                        
                          <div>
                              <p>Thanks for signing up!</p>
                              
                              <p>
                              Access your favorite topics in a personalized feed while you're on the go.
                                    </p>
                            </div>
                        
                            <div>
                                <p><img src="https://www.businessinsider.com/public/assets/rebrand/newsletter-bull.png" data-old-src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E" data-src="/public/assets/rebrand/newsletter-bull.png">
                              
                              
                              
                              </p>    </div>
                        
                          
                        </div><p>A pilot and former US Air Force intelligence officer believes an image he captured using sonar on a high-tech unmanned submersible may have finally answered one of America's most baffling mysteries: What caused the disappearance of the iconic pilot <a target="_blank" href="https://www.businessinsider.com/how-did-amelia-earhart-die-2017-7" data-analytics-product-module="body_link" rel="">Amelia Earhart</a> at the height of her fame?</p><p>Tony Romeo is one of a long line of researchers and hobbyists to have taken up the search for Earhart's distinctive Lockheed 10-E Electra plane, which disappeared over the Pacific Ocean along with its famous pilot and its navigator, Fred Noonan, during an attempt to circumnavigate the globe in July of 1937.</p>
                          <figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/jpeg" data-srcs="{&quot;https://i.insider.com/65b5bfcd6c8f0a134f7a6c71&quot;:{&quot;contentType&quot;:&quot;image/jpeg&quot;,&quot;aspectRatioW&quot;:1552,&quot;aspectRatioH&quot;:1096}}" alt="Amelia Earhart, 40, stands next to a Lockheed Electra 10E, before her last flight in 1937." itemprop="contentUrl">
                        </p>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  Amelia Earhart, 40, standing next to a Lockheed Electra 10E, before her last flight in 1937 from Oakland, California.
                                </figcaption>
                                
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          AP Photo
                          
                          </span>
                              </span>
                          </figure>
                        <p>The mystery surrounding Earhart's disappearance has long puzzled researchers and spurred <a target="_blank" href="https://www.businessinsider.com/amelia-earhart-conspiracy-theories-2018-5" data-analytics-product-module="body_link" rel="">conspiracy theories</a> over the years, including the Japanese taking her prisoner and her being a government spy.</p><p>But Romeo, a former real-estate investor who sold commercial properties to raise the $11 million needed to begin funding the search, returned in December from a roughly 100-day voyage at sea with a sonar image that he believes shows the lost plane in the ocean's depths.</p><!-- Excluded mobile ad on desktop --><h2>A high-tech search at sea</h2><p>His expedition, which was carried out using a $9 million high-tech unmanned submersible "Hugin" drone manufactured by the Norwegian company <a target="_blank" href="https://markets.businessinsider.com/news/stocks/kongsberg-gets-nok-1-2-bln-order-from-lockheed-martin-1032649045" data-analytics-product-module="body_link" rel="">Kongsberg</a> and a research crew of 16, started last September in Tarawa, Kiribati, covering 5,200 square miles of the ocean floor, <a target="_blank" href="https://www.wsj.com/science/amelia-earhart-lost-plane-found-843e9e9c" data-analytics-product-module="body_link" rel=" nofollow">The Wall Street Journal</a> reported.</p><p>It was a dream Romeo had for years before making it a reality.</p><p>"This has been a story that's always intrigued me, and all the things in my life kind of collided at the right moment," Romeo, whose father and brothers are also pilots, told Business Insider. "I was getting out of real estate and looking for a new project so even though I really started about 18 months ago, this was something I've been thinking and researching for a long time."</p>
                          <figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/jpeg" data-srcs="{&quot;https://i.insider.com/65b5bfd3ac2de4f17ee52049&quot;:{&quot;contentType&quot;:&quot;image/jpeg&quot;,&quot;aspectRatioW&quot;:3000,&quot;aspectRatioH&quot;:1747}}" alt="Amelia Earhart's plane rising into the air after a 4,000-foot run at the start of the flight from Oakland, California, on March 17, 1937." itemprop="contentUrl">
                        </p>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  Amelia Earhart took off from the airport in her £10,000 Flying Laboratory for Honolulu on the first leg of her round-the-world flight.
                                </figcaption>
                                
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          AP Photo
                          
                          </span>
                              </span>
                          </figure>
                        <p>Roughly a month into the trip, the team captured a sonar image of the plane-shaped object about 100 miles from Howland Island — but didn't discover the image in the submersible's data until the 90th day of the voyage, making it impractical to turn back to get a closer look.</p><!-- Excluded mobile ad on desktop --><p>Experts have shown interest in the finding, with Dorothy Cochrane, a curator at the Smithsonian Institution's National Air and Space Museum, telling The Journal that the reported location where the image was taken was just about right, geographically, compared with where <a target="_blank" href="https://www.businessinsider.com/amelia-earhart-disappearance-explained-photo-national-archives-history-2017-7" data-analytics-product-module="body_link" rel="">Earhart's flight</a> is believed to have gone down.</p>
                          <figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/jpeg" data-srcs="{&quot;https://i.insider.com/65b5cabf6c8f0a134f7a6cc7&quot;:{&quot;contentType&quot;:&quot;image/jpeg&quot;,&quot;aspectRatioW&quot;:1474,&quot;aspectRatioH&quot;:1102}}" alt="A presumed flight path from the last leg of Earhart's journey" itemprop="contentUrl">
                        </p>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  A map of where Earhart's plane is believed to have gone missing along her presumed flight path.
                                </figcaption>
                                
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          Google Maps
                          
                          </span>
                              </span>
                          </figure>
                        <p>But others say they need clearer views and more details, such as the plane's serial number.</p><p>"Until you physically take a look at this, there's no way to say for sure what that is," Andrew Pietruszka, an underwater archaeologist at the Scripps Institution of Oceanography, told The Journal.</p><p>Romeo, who said the search might be "the most exciting thing I'll ever do in my life," added that he planned to return to the area to try to capture better images using autonomous or robotic submersibles equipped with cameras and sonar to get closer to the object, which rests more than 16,500 feet beneath the surface.</p><!-- Excluded mobile ad on desktop --><p>Romeo told BI that if it wasn't <a target="_blank" href="https://www.businessinsider.com/how-investigators-use-new-techniques-to-solve-amelia-earhart-mystery-2019-7" data-analytics-product-module="body_link" rel="">Earhart's plane</a>, the object he found could be a different missing aircraft lost in the Pacific or — less interestingly, perhaps — another manmade object that fell off a shipping container. But as of now, he's feeling confident he's made a groundbreaking discovery due to the distinctive shape of the fuselage, tail, and wings.</p>
                          <figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/jpeg" data-srcs="{&quot;https://i.insider.com/65b5c0c36c8f0a134f7a6c89&quot;:{&quot;contentType&quot;:&quot;image/jpeg&quot;,&quot;aspectRatioW&quot;:692,&quot;aspectRatioH&quot;:272}}" alt="A sonar image of an object underwater is displayed next to a diagram of Amelia Earhart's missing plane." itemprop="contentUrl">
                        </p>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  Romeo and his company, Deep Sea Vision, discovered an object of similar size and shape to Amelia Earhart's iconic plane deep in the Pacific Ocean.
                                </figcaption>
                                
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          Deep Sea Vision
                          
                          </span>
                              </span>
                          </figure>
                        <p>"The next step is confirmation —&nbsp;we've got to go back out with different sorts of sensors and really photograph it well and take a look at how the artifact is sitting on the seabed," Romeo told BI. "Once that step is done, lots of people will be involved. The Smithsonian, the family, there'll be some investors involved because it'll be an expensive operation, but then we're thinking: 'How do we lift the plane? How do we salvage it?'"</p><p>He added: "I don't think we're there yet. But I do think Americans want to see this in the Smithsonian; that's where it belongs. Not the bottom of the ocean."</p><h2>A decadeslong mystery</h2><p>Hopeful explorers have pumped millions of dollars into expeditions to find Earhart's lost plane over the years, but her last known location has made the searches difficult.</p><!-- Excluded mobile ad on desktop --><p>"It's very deep water, and the area that she could've possibly been in is huge," Tom Dettweiler, a sonar expert, told The Journal.</p><p>One team who searched for Earhart's aircraft in 2009 said on Twitter that following its 2,500-square-mile search near Howland Island, close to where Romeo conducted his search, it only knew where the aviator wasn't.</p><p>Earhart, who was the first woman to fly solo across the Atlantic and the US, was declared legally dead on January 5, 1939, two years after she vanished. But her legacy has lived on, and she continues to fascinate people worldwide.</p><p>"It was one of the great <a target="_blank" href="https://www.businessinsider.com/phenomena-science-cant-explain-2019-1" data-analytics-product-module="body_link" rel="">mysteries of the 20th century</a> and still now into the 21st century," Cochrane told The Journal. "We're all hopeful that the mystery will be solved."</p><!-- Excluded mobile ad on desktop --><h2>The dateline theory</h2><p>Romeo believes he's taken a massive step toward answering vital questions surrounding the famous pilot's disappearance after scouring decades of clues and potential leads to her location, including the "dateline theory."</p><p>The theory, which Romeo relied on partly to guide his search, suggests that when Earhart crossed over the international dateline during her 20-hour flight, her navigation system became inaccurate and misdirected her by about 60 miles, potentially leading to a tragic end.</p>
                          <figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/jpeg" data-srcs="{&quot;https://i.insider.com/65b5bfd06c8f0a134f7a6c77&quot;:{&quot;contentType&quot;:&quot;image/jpeg&quot;,&quot;aspectRatioW&quot;:3000,&quot;aspectRatioH&quot;:2327}}" alt="Amelia Earhart wears a string of leis around her neck after landing in Honolulu, Hawaii." itemprop="contentUrl">
                        </p>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  Earhart after landing in Honolulu after a speedy flight from Oakland, California, in March 1936. 
                                </figcaption>
                                
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          AP Photo
                          
                          </span>
                              </span>
                          </figure>
                        <p>Romeo said if he received confirmation that he'd found Earhart's plane, hopefully during another voyage planned for later this year, the company he created as part of the search would continue trying to solve other mysteries held in the ocean.</p><p>"There's lots of cool stuff in the Pacific —&nbsp;WWII aircraft and <a target="_blank" href="https://www.businessinsider.com/mh370-theories-dead-ends-unanswered-questions-ahead-of-major-new-report-2018-7" data-analytics-product-module="body_link" rel="">flight MH370</a> are still out there, and maybe we can make a run at that at some point," Romeo told BI. "I'm not announcing yet that we are, but I'd love to collaborate with other folks on other projects since we've got the state-of-the-art equipment. There's only a couple of these in the world, and finding these things out is in demand."</p>
                      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Meta AI releases Code Llama 70B (449 pts)]]></title>
            <link>https://twitter.com/AIatMeta/status/1752013879532782075</link>
            <guid>39178886</guid>
            <pubDate>Mon, 29 Jan 2024 17:11:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/AIatMeta/status/1752013879532782075">https://twitter.com/AIatMeta/status/1752013879532782075</a>, See on <a href="https://news.ycombinator.com/item?id=39178886">Hacker News</a></p>
Couldn't get https://twitter.com/AIatMeta/status/1752013879532782075: Error: Request failed with status code 400]]></description>
        </item>
        <item>
            <title><![CDATA[Oxide Computer releases distribution of illumos intended to power the Oxide Rack (293 pts)]]></title>
            <link>https://github.com/oxidecomputer/helios</link>
            <guid>39178521</guid>
            <pubDate>Mon, 29 Jan 2024 16:47:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/oxidecomputer/helios">https://github.com/oxidecomputer/helios</a>, See on <a href="https://news.ycombinator.com/item?id=39178521">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
          <nav aria-label="Global">
            <ul>
                <li>
      
      <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Actions&quot;,&quot;label&quot;:&quot;ref_cta:Actions;&quot;}" href="https://github.com/features/actions">
      
      <div>
        <p>Actions</p><p>
        Automate any workflow
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Packages&quot;,&quot;label&quot;:&quot;ref_cta:Packages;&quot;}" href="https://github.com/features/packages">
      
      <div>
        <p>Packages</p><p>
        Host and manage packages
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Security&quot;,&quot;label&quot;:&quot;ref_cta:Security;&quot;}" href="https://github.com/features/security">
      
      <div>
        <p>Security</p><p>
        Find and fix vulnerabilities
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Codespaces&quot;,&quot;label&quot;:&quot;ref_cta:Codespaces;&quot;}" href="https://github.com/features/codespaces">
      
      <div>
        <p>Codespaces</p><p>
        Instant dev environments
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Copilot&quot;,&quot;label&quot;:&quot;ref_cta:Copilot;&quot;}" href="https://github.com/features/copilot">
      
      <div>
        <p>Copilot</p><p>
        Write better code with AI
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Code review&quot;,&quot;label&quot;:&quot;ref_cta:Code review;&quot;}" href="https://github.com/features/code-review">
      
      <div>
        <p>Code review</p><p>
        Manage code changes
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Issues&quot;,&quot;label&quot;:&quot;ref_cta:Issues;&quot;}" href="https://github.com/features/issues">
      
      <div>
        <p>Issues</p><p>
        Plan and track work
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Discussions&quot;,&quot;label&quot;:&quot;ref_cta:Discussions;&quot;}" href="https://github.com/features/discussions">
      
      <div>
        <p>Discussions</p><p>
        Collaborate outside of code
      </p></div>

    
</a></li>

            </ul>
          </div>
</li>


                <li>
      
      
</li>


                <li>
      
      <div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to GitHub Sponsors&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Sponsors;&quot;}" href="https://github.com/sponsors">
      
      <div>
        <p>GitHub Sponsors</p><p>
        Fund open source developers
      </p></div>

    
</a></li>

            </ul>
          </div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to The ReadME Project&quot;,&quot;label&quot;:&quot;ref_cta:The ReadME Project;&quot;}" href="https://github.com/readme">
      
      <div>
        <p>The ReadME Project</p><p>
        GitHub community articles
      </p></div>

    
</a></li>

            </ul>
          </div>
          
      </div>
</li>


                <li>
    <a data-analytics-event="{&quot;category&quot;:&quot;Header menu top item (logged out)&quot;,&quot;action&quot;:&quot;click to go to Pricing&quot;,&quot;label&quot;:&quot;ref_cta:Pricing;&quot;}" href="https://github.com/pricing">Pricing</a>
</li>

            </ul>
          </nav>

        <div>
                


<qbsearch-input data-scope="repo:oxidecomputer/helios" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="xVGn1tBX4mVNIYMaWz1EV2b50WFWX9rY5oGgSfKDRKV06itPaiK5lIrHel7S_OaFuLHYTZ4e3KEF9iaYXO8ZDg" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="oxidecomputer/helios" data-current-org="oxidecomputer" data-current-owner="" data-logged-in="false" data-copilot-chat-enabled="false" data-blackbird-indexed-repo-csrf="<esi:include src=&quot;/_esi/rails_csrf_token_form_hidden?r=wEC4bs8ZuebuxYaGzi73AipCD8HuAyAQ0%2Bkn6jJHBmjlFkBCNeNikSnf4SO53sb2lwmxXKDKgLI%2F6wqhb2xzxrLYSwjUE3Y0Els04YUcGEAQBn310qRt2WDpUjVJQT3IBUquv8oiDoOkVhHCeX2ZKO%2FwKPljX4YQJL7OYcOn7sz%2BVgViDNBMm9TYLAiBQqbwdetEc7bza0xT%2BDH6NGq5OMz363h%2B7nZcmQQmR%2FYnP852T%2FceuTXLxhxYrhuhANrHIZhkWNKvbFdfZ6rZRihhdwPXYp24C0KyME62GPlPIjp%2FzzKokfUZAEE9jcJEKZKySJ4E9I6lhfOcPp2DiL8U95h2Grciz%2Bw0lBfu6jF5BS4Z0LQnFwu3E1LEFTkOP2ms%2FfwEyg46T%2BqSvJXmESU4nNFhWaL436a4UadivRSU8D6Glb5VIoXmoc0UVmR18k52w88iPYnGYkd23zJ1FggUNO6t3nRlbgvI9HQIT70gWaC5FvboagsWjVrMA3JJYKGPk%2BpxwuwhB%2F5Gq0oTweO1dbHc--6Qskg8QHWmNlcdi1--qaY8KMgjlltTsUE0w8urcA%3D%3D&quot; />">
  <div data-modal-dialog-overlay="" data-action="click:qbsearch-input#searchInputContainerClicked">
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true">
      <h2 id="search-suggestions-dialog-header">Search code, repositories, users, issues, pull requests...</h2>
    
</modal-dialog></div>
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-disabled="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-disabled="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>

            <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&amp;source=header-repo&amp;source_repo=oxidecomputer%2Fhelios" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/oxidecomputer/helios&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="954a652804e1eac88ae7a8241ce48cd1e8cb10a6092939703d95b074ab405d35" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>;ref_cta:Sign up;ref_loc:header logged out&quot;}">
              Sign up
            </a>
        </p></div>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Phrasing – learn every language, to any level (108 pts)]]></title>
            <link>https://phrasing.app/playground</link>
            <guid>39177467</guid>
            <pubDate>Mon, 29 Jan 2024 15:38:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://phrasing.app/playground">https://phrasing.app/playground</a>, See on <a href="https://news.ycombinator.com/item?id=39177467">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[The Apple Vision Pro’s missing apps (172 pts)]]></title>
            <link>https://stratechery.com/2024/the-apple-vision-pros-missing-apps/</link>
            <guid>39176899</guid>
            <pubDate>Mon, 29 Jan 2024 14:53:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://stratechery.com/2024/the-apple-vision-pros-missing-apps/">https://stratechery.com/2024/the-apple-vision-pros-missing-apps/</a>, See on <a href="https://news.ycombinator.com/item?id=39176899">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-12205">
	<!-- .entry-header -->

	<div>
		<p>Om Malik has been observing, writing about, and investing in technology for going on three decades; that’s one reason I find his unabashed enthusiasm for the Apple Vision Pro to be notable. Malik wrote <a href="https://om.co/2024/01/08/vision-pro-is-coming/">on his blog</a>:</p>
<blockquote><p>
  Apple touts Vision Pro as a new canvas for productivity and a new way to play games. Maybe, maybe not. Just as the Apple Watch is primarily a health-related device that also does other things, including phone calls, text messages, and making payments. Similarly, the primary function for Vision Pro is ‘media’ — especially how we consume it on the go. Give it a few weeks, and more people will come to the same conclusion.</p>
<p>  In 2019,&nbsp;<a href="https://om.co/2019/01/13/so-what-can-apple-do-next/">I wrote an essay</a>&nbsp;about the future of television (screen):</p>
<blockquote><p>
    With that caveat, I think both, the big (TV) and biggest (movie theater) screens are going to go the way of the DVD. We could replace those with a singular, more personal screen — that will sit on our face. Yes, virtual reality headsets are essentially the television and theaters of the future. They aren’t good enough just yet — but can get better in the years to come as technologies to make the headsets improve.
  </p></blockquote>
<p>  Apple has made that headset. Apple Vision Pro has ultra-high-resolution displays that deliver more pixels than a 4K TV for each eye. This gives you a screen that feels 100 feet wide with support for HDR content. The audio experience is just spectacular. In time, Apple’s marketing machine will push the simple message — for $3,500, you get a full-blown replacement for a reference-quality home theater, which would typically cost ten times as much and require you to live in a McMansion.
</p></blockquote>
<p>Malik expounded on this point last week in a <a href="https://stratechery.com/2024/an-interview-with-om-malik-about-techs-history-and-future/">Stratechery Interview</a>:</p>
<blockquote><p>
  But the thing is you actually have to be mobile-native to actually appreciate something like this. So if you’ve grown up watching a 75-inch screen television, you probably would not really appreciate it as much. But if you are like me who’s been watching iPad for ten-plus years as my main video consumption device, this is the obvious next step. If you live in Asia, like you live in Taiwan, people don’t have big homes, they don’t have 85-inch screen televisions. Plus, you have six, seven, eight people living in the same house, they don’t get screen time to watch things so they watch everything on their phone. I think you see that behavior and you see this is going to be the iPod.
</p></blockquote>
<p>The iPod was a truly personal device, which was not only what people wanted, but also a great business: why sell one stereo to a household when you can sell an iPod to every individual? You can imagine Apple feeling the same about the long-term trajectory of the Vision Pro: why sell a TV that sits on the wall of the living room when you can sell every individual a TV of their own? You can be sure that Apple isn’t just marketing this device to people who live alone: the EyeSight feature only makes sense if you are wearing the Vision Pro around other people.</p>
<p>I already commented about the dystopian nature of this vision <a href="https://stratechery.com/2023/apple-vision/">when the Vision Pro was announced</a>; for now I’m interested in the business aspects of this vision, and the iPod is a good place to start.</p>
<h3>The iPod and the Music Labels</h3>
<p>The iPod story actually starts with the Mac, and Apple’s vision of a “Digital Hub.” The company released iMovie in 1999, iDVD and iTunes two years later, and iPhoto a year after that. The release order is interesting: Apple thought that home movies would be the big new market for PCs, but the emergence of Napster in 1999 made it clear that music was a much more interesting market (digital cameras, meanwhile, were only just becoming a thing). That laid the groundwork for the iPod, which was released in the fall of 2001. I documented this history in <a href="https://stratechery.com/2017/apple-and-the-oak-tree/">Apple and the Oak Tree</a> and noted:</p>
<blockquote><p>
  One of my favorite artifacts from the brief period between the introduction of iTunes and the release of the iPod was Apple’s “Rip. Mix. Burn.” advertising campaign.</p>
<p>  <a href="https://stratechery.com/2017/apple-and-the-oak-tree/"><img loading="lazy" decoding="async" src="https://i0.wp.com/stratechery.com/wp-content/uploads/2017/08/rip-mix-burn.jpg?resize=600%2C283&amp;ssl=1" alt="Apple's Rip. Mix. Burn. iMac campaign" width="600" height="283" srcset="https://i0.wp.com/stratechery.com/wp-content/uploads/2017/08/rip-mix-burn.jpg?w=600&amp;ssl=1 600w, https://i0.wp.com/stratechery.com/wp-content/uploads/2017/08/rip-mix-burn.jpg?resize=300%2C142&amp;ssl=1 300w" sizes="(max-width: 600px) 100vw, 600px" data-recalc-dims="1"></a></p>
<p>  What is particularly amazing (that is, beyond the cringe-inducing television ad) is that Apple was arguably encouraging illegal behavior: it was likely legal to rip and probably legal to burn, presuming the CD that you made was for your own personal use. It certainly was not legal to share.
</p></blockquote>
<p>The iPod was predicated on the reality of file-sharing as well:</p>
<blockquote><p>
  And yet, as much as “Rip. Mix. Burn.” may have walked the line of legality, the reality of iTunes — and the iPod that followed — was well on the other side of that line. Apple knew better than anyone that the iPod’s tagline — 1,000 songs in your pocket — was predicated on users having 1,000 digital songs, not via the laborious procedure of ripping legally purchased CDs, but rather via Napster and its progeny. By the spring of 2003 Apple had introduced the iTunes Music Store, a seamless and legal way to download DRM-protected digital music, but particularly in those early days the value of the iTunes Music Store to Apple was not so much that it was a selling point to consumers, but rather a means by which Apple could play dumb about how it was that its burgeoning number of iPod customers came to fill up their music libraries.
</p></blockquote>
<p>That description of the iTunes Music Store is perhaps a touch cynical, but it is impossible to ignore the importance of music piracy in Apple’s original deal with the record labels. Apple was able to make a deal in part because it was offering the carrot of increased digital revenue, but it was certainly aided by the stick of piracy obliterating CD sales.</p>
<p><img loading="lazy" decoding="async" src="https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-4.png?resize=640%2C390&amp;ssl=1" alt="The carrot and stick of the iTunes Music Store" width="640" height="390" srcset="https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-4.png?w=1280&amp;ssl=1 1280w, https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-4.png?resize=300%2C183&amp;ssl=1 300w, https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-4.png?resize=1024%2C623&amp;ssl=1 1024w, https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-4.png?resize=768%2C467&amp;ssl=1 768w, https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-4.png?resize=1035%2C630&amp;ssl=1 1035w" sizes="(max-width: 640px) 100vw, 640px" data-recalc-dims="1"></p>
<p>Over the next few years the record labels would become increasingly resentful of Apple’s position in the market, but they certainly weren’t going anywhere; by 2008 iTunes was their biggest source of revenue, and it’s all but impossible for an ongoing business to give up revenue just because they think the arrangement under which they make that revenue is unfair.</p>
<h3>The App Store</h3>
<p>The iTunes Music Store does still exist, although its revenue contribution to the labels has long been eclipsed by streaming. It’s more important contribution to modern computing is that it provided the foundation for the App Store.</p>
<p>The App Store didn’t exist when Apple launched its iPhone in 2007; Apple provided a suite of apps that made the iPhone more capable than anything else on the market, and assumed the web would take care of the rest. Developers, though, wanted to build apps; in September 2007 <a href="https://github.com/chockenberry/mobile-twitterrific">Iconfactory released Twitterific</a>, a Twitter client that ran on jail-broken iPhone devices, and more apps followed. The following year Apple gave its eager developers what they wanted: an officially supported SDK and an App Store to distribute their apps, for free or for pay; in the case of the latter Apple would, just as it did with songs, keep 30% of the purchase price (and cover processing fees).</p>
<p>This period of the App Store didn’t require any sticks: the capability of the iPhone was carrot enough, and, over the next few years, as the iPhone exploded in popularity, the market opportunity afforded by the App Store proved even more attractive. A better analogy to what Apple provided was gas for the fire, particularly with the release of in-app purchase capabilities in 2009. Now developers could offer free versions of their apps and convert consumers down the line, or sell consumables, a very profitable approach for games.</p>
<p>That, though, is where App Store innovation stopped, at least for a while. By 2013, when I started Stratechery, I was wondering <a href="https://stratechery.com/2013/why-doesnt-apple-enable-sustainable-businesses-on-the-app-store/">Why Doesn’t Apple Enable Sustainable Businesses on the App Store?</a>, by which I meant trials, paid updates, and built-in subscription support. The latter (along with associated trials) finally showed up in 2016, but at that point developer frustration with the App Store had been growing right alongside Apple’s services revenues: productivity apps shared my concerns about sustainability, while “reader” apps like streaming services were frustrated that they couldn’t sign up new users in the app, or even point them to the web; game developers, meanwhile, hated giving away 30% of their revenue.</p>
<p>It’s fair to note that an unacknowledged driver of much of this frustration was surely the fact that the app market matured from the heady days of the early App Store. No one is particularly worried about restrictions or missing capabilities or revenue shares when there is a landgrab for new users’ homescreens; by the end of the decade, though, mature businesses were locked in a zero sum game for user attention and dollars. In that environment the money Apple was taking, despite the fact the lack of flexibility entailed in terms of business model, was much more of an irritant; still, it’s all but impossible for an ongoing business to give up revenue just because they think the arrangement under which they make that revenue is unfair.</p>
<h3>The Epic Case</h3>
<p>I keep saying “all but impossible” because Epic is the exception that proved the rule: in <a href="https://stratechery.com/2020/apple-epic-and-the-app-store/">August 2020</a> Epic updated Fortnite to include an alternative in-app purchase flow, was subsequently kicked out of the App Store by Apple, and proceeded to file an antitrust lawsuit against the iPhone maker. I documented this saga from beginning to end, including:</p>
<ul>
<li><a href="https://stratechery.com/2020/apple-epic-and-the-app-store/">Apple, Epic, and the App Store</a>, which provided a history of the App Store and Epic’s lawsuit at the time it was filed.</li>
<li><a href="https://stratechery.com/2021/app-store-arguments/">App Store Arguments</a>, which I wrote at the conclusion of the trial, explained why I expected Epic to lose, even as I hoped that Apple would voluntarily make pro-developer changes in the App Store.</li>
<li><a href="https://stratechery.com/2021/the-apple-v-epic-decision/">The Apple v. Epic Decision</a>, which reviewed the judge’s decision that favored Apple in 10 of the 11 counts.</li>
</ul>
<p>The 11th count that Epic prevailed on required Apple to allow developers to steer users to a website to make a purchase; while its implementation was delayed while both parties <a href="https://stratechery.com/2023/apple-epic-and-the-court-of-appeals-apples-federal-victory-epics-california-win/">filed appeals</a>, the lawsuit reached the end of the road last week when the Supreme Court denied certiorari. That meant that Apple had to allow steering, and the company did so in the most restrictive way possible: developers had to use an Apple-granted entitlement to put a link on one screen of their app, and pay Apple 27% of any conversions that happened on the developer’s website within 7 days of clicking said link.</p>
<p>Many developers were outraged, but the company’s tactics were <a href="https://stratechery.com/2024/the-supreme-court-declines-to-hear-apple-epic-apples-predictable-response/">exactly what I expected</a>:</p>
<blockquote><p>
  To that end, I wouldn’t be surprised if Apple does the same in this case: developers who steer users to their website may be required to provide auditable conversion numbers and give Apple 27%, and oh-by-the-way, they still have to include an in-app purchase flow (that costs 30% and includes payment processor fees and converts much better). In other words, nothing changes — unless it goes in the other direction: if Apple is going to go to the trouble to build out an auditing arm, then it could very well go after all of the revenue for everyone with an app in the App Store, whether they acquire a user through in-app purchase or not. The reason not to do so before was some combination of goodwill, questionable legality, and most importantly the sheer hassle of it all. At this point, though, it’s not clear if any of those will be deterrents going forward…</p>
<p>  Apple has shown, again and again and again, that it is only going to give up App Store revenue kicking-and-screaming; indeed, the company has actually gone the other way, particularly with its crackdown over the last few years on apps that only sold subscriptions on the web (and didn’t include an in-app purchase as well). This is who Apple is, at least when it comes to the App Store.
</p></blockquote>
<p>The crackdown I’m referring to was pure stick: <a href="https://stratechery.com/2020/xscale-and-arm-in-the-cloud-hey-versus-apple-apples-iap-campaign/">Apple refused to approve upgrades to SaaS apps</a> that had been in the App Store for years unless they added in-app purchase; developers <a href="https://twitter.com/benthompson/status/1273079296618201093">complained</a> but this time the reality of it being impossible for an ongoing business to give up revenue meant they didn’t have any choice but to do extra work so that Apple could have a cut.</p>
<h3>Vision Pro’s Missing Apps</h3>
<p>The Apple Vision Pro started pre-sales last week, but the biggest surprise came via two stories from Bloomberg. <a href="https://www.bloomberg.com/news/articles/2024-01-17/watching-netflix-on-apple-vision-pro-you-ll-have-to-use-the-web">First</a>:</p>
<blockquote><p>
  Netflix Inc. isn’t planning to launch an app for Apple Inc.’s upcoming Vision Pro headset, marking a high-profile snub of the new technology by the world’s biggest video subscription service. Rather than designing a Vision Pro app — or even just supporting its existing iPad app on the platform — Netflix is essentially taking a pass. The company, which competes with Apple in streaming, said in a statement that users interested in watching its content on the device can do so from the web.
</p></blockquote>
<p><a href="https://www.bloomberg.com/news/articles/2024-01-18/youtube-and-spotify-join-netflix-in-not-launching-apple-vision-pro-apps">Second</a>:</p>
<blockquote><p>
  Google’s YouTube and Spotify Technology SA, the world’s most popular video and music services, are joining Netflix Inc. in steering clear of Apple Inc.’s upcoming mixed-reality headset. YouTube said in a statement Thursday that it isn’t planning to launch a new app for the Apple Vision Pro, nor will it allow its longstanding iPad application to work on the device — at least, for now. YouTube, like Netflix, is recommending that customers use a web browser if they want to see its content: “YouTube users will be able to use YouTube in Safari on the Vision Pro at launch.” Spotify also isn’t currently planning a new app for visionOS — the Vision Pro’s operating system — and doesn’t expect to enable its iPad app to run on the device when it launches, according to a person familiar with matter. But the music service will still likely work from a web browser.
</p></blockquote>
<p>These are a big loss: Malik made the case about why the Vision Pro is the best TV ever, but it will launch without native access to the largest premium streaming service and the largest repository of online video period. I myself am very excited about the productivity use cases of the Vision Pro, which for me includes listening to music while I work; no Spotify makes that harder.</p>
<p>There are, to be sure, valid business reasons for all three services to have not built a native app; <a href="https://medium.com/@mingchikuo/apple-vision-pro-shipment-growth-may-be-below-market-expectations-apple-vision-pro%E5%87%BA%E8%B2%A8%E6%88%90%E9%95%B7%E5%8F%AF%E8%83%BD%E4%BD%8E%E6%96%BC%E5%B8%82%E5%A0%B4%E9%A0%90%E6%9C%9F-7a5eeb613ab0">the latest prediction from Apple supply chain analyst Ming-Chi Kuo</a> put first-year sales at around 500,000 units, which as a tiny percentage of these services’ user bases may not be worth the investment. Apple’s solution, though, is to simply use a pre-existing iPad app; that all three companies declined to do even that is notable. Nebula CEO Dave Wiskus observed <a href="https://twitter.com/dwiskus/status/1748354772531282213">on X</a>:</p>
<div>
<blockquote data-dnt="true">
<p lang="en" dir="ltr">2003: Steve Jobs brings the big five record labels together in a landmark deal to sell their songs digitally for $0.99 each on the iTunes Store.</p>
<p>2024: Apple can’t convince streaming video companies to check the “allow iPad app” box.</p>
<p>— Dave Wiskus (@dwiskus) <a href="https://twitter.com/dwiskus/status/1748354772531282213?ref_src=twsrc%5Etfw">January 19, 2024</a></p></blockquote>
</div>
<p>The Apple Vision Pro app shelves will not be bare in terms of video content; the company says in a <a href="https://www.apple.com/newsroom/2024/01/apple-previews-new-entertainment-experiences-launching-with-apple-vision-pro/">press release</a>:</p>
<blockquote><p>
  Users will also be able to download and stream TV shows, films, sports, and more with apps from top streaming services, including Disney+, ESPN, NBA, MLB, PGA Tour, Max, Discovery+, Amazon Prime Video, Paramount+, Peacock, Pluto TV, Tubi, Fubo, Crunchyroll, Red Bull TV, IMAX, TikTok, and the 2023 App Store Award-winning MUBI. Users can also watch popular online and streaming video using Safari and other browsers.
</p></blockquote>
<p>It’s not clear how many of these apps are truly native versus iPad apps with the Vision Pro check box, but the absence of Netflix and YouTube do stand out, and their absence is, without question, a total failure for Apple’s developer relations team.</p>
<p>The blame, though, likely goes to the App Store: Apple has been making Netflix in particular jump through hoops for years when it comes to precisely what language the service can or cannot present to customers who can’t sign up in the app, and also can’t be directed to the web. The current version’s language is fairly anondyne (although it has been <a href="https://149384716.v2.pressablecdn.com/wp-content/uploads/2024/01/vision-pro-apps-3.png">spicier in the past</a>):</p>
<p><img loading="lazy" decoding="async" src="https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-2.png?resize=640%2C447&amp;ssl=1" alt="Netflix's language in its iOS app for new users" width="640" height="447" srcset="https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-2.png?w=1280&amp;ssl=1 1280w, https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-2.png?resize=300%2C210&amp;ssl=1 300w, https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-2.png?resize=1024%2C715&amp;ssl=1 1024w, https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-2.png?resize=768%2C536&amp;ssl=1 768w, https://i0.wp.com/stratechery.com/wp-content/uploads/2024/01/vision-pro-apps-2.png?resize=902%2C630&amp;ssl=1 902w" sizes="(max-width: 640px) 100vw, 640px" data-recalc-dims="1"></p>
<p>Apple may be unhappy that Netflix viewers have to go to the Netflix website to watch the service on the Vision Pro (and thus can’t download shows for watching offline, like on a plane); Netflix might well point out that that going to the web is exactly what Apple makes Netflix customers do to sign up for the service.<sup id="rf1-12205"><a href="#fn1-12205" title="There is an exception for Netflix specifically: if you download a Netflix game <a href=&quot;https://stratechery.com/2023/netflix-earnings-netflixs-licensing-pitch-netflix-gaming-revisited/&quot;>you can sign up with in-app purchase</a>, which the company would almost certainly prefer not to offer but, thanks to Apple’s aforementioned crack-down on SaaS app sign-ups, requires." rel="footnote">1</a></sup></p>
<h3>Developers On Strike</h3>
<p>It’s certainly possible that I’m reading too much into these absences: maybe these three companies simply didn’t get enough Visions Pro to build a native app, and felt uncomfortable releasing their iPad versions without knowing how useful they would be. YouTube in particular, given that much of its usage is free, likely has less of a beef with Apple than Netflix or Spotify do, and it’s easy enough to believe that Google just isn’t a company that moves that fast these days.</p>
<p>Still, there’s no question that the biggest beneficiary of these companies being on the Vision Pro — and, correspondingly, the biggest loser from their absence — is Apple. The company is launching an audacious and ambitious new product, and there are major partners in its ecosystem that aren’t interested in helping.</p>
<p>This is the consequence of fashioning App Store policies as a stick: until there is a carrot of a massive user base, it’s hard to see why developers of any size would be particularly motivated to build experiences for the Vision Pro, which will make it that much more difficult to attract said massive user base. Apple was happy to remind users that, when it came to the iPhone, <a href="https://www.youtube.com/watch?v=szrsfeyLzyg">there’s an app for that</a>; in the case of the Vision Pro, there may not be: this is the one and only chance for developers to go on strike without suffering an Epic-like fate, and some of them are taking it.</p>
<p>For now, Apple appears to be so supply-constrained that it doesn’t matter; the company will likely sell as many units as it can make. I would guess that Apple’s strategy with regards to developer hold-outs will be to wait them out, trusting that it can sell enough devices that developers can’t go on strike forever. I certainly think this approach is more likely than offering any sort of concessions to developers, on any of its platforms.</p>
<h3>A Disney Double-Down?</h3>
<p>The other option may be an even greater investment in content by Apple itself. This could take the form of more Apple TV+ shows and sports deals like MLS, but the most interesting possibility is deepening its partnership with Disney. The entertainment giant is looking for a tech partner to invest in its ESPN streaming service, and the Vision Pro makes Apple a compelling candidate. From <a href="https://stratechery.com/2023/bob-iger-on-cnbc-the-end-of-linear-tv-espn-and-strategic-partnerships-and-apple/">an Update last summer</a>:</p>
<blockquote><p>
  What does seem notable was Iger’s call out of Apple’s headset; I can attest that the sports experience on the Vision Pro is extraordinary, and remember that Iger appeared on stage at the event to say that Disney would be working with Apple to bring content to the device; here is the sports portion of the video he played at WWDC:</p>

<p>  I have to say, one almost gets the impression that the Apple Vision sports-watching experience might have single-handedly convinced Iger to keep ESPN! What does seem likely is that Apple is probably Iger’s preferred partner, and there certainly is upside for Apple — probably more upside than any other tech company — primarily because of the Vision Pro. The single most important factor in the Vision Pro’s success will likely be how quickly entertainment is built for it, and as Cook noted while introducing Iger, “The Walt Disney Company is the world’s leader in entertainment.”
</p></blockquote>
<p>I heard from a lot of people after that Update who were very skeptical that any sort of deal would be struck, in large part because Apple is so difficult to partner with (the company seems continually surprised that not everyone negotiates like the record labels under siege from Napster). And, it should be noted, Disney is showing up on Day One for the Vision Pro launch; why partner if the content is already there?</p>
<p>And yet, Apple’s most potent response to ecosystem intransigence may be to double down: Disney with a war chest (via an Apple partnership) would be a far more formidable competitor to Netflix, and ESPN with a VR camera at every game it televises would, in my estimation, make the Vision Pro an essential purchase for every sports fan. I once argued that <a href="https://stratechery.com/2016/apple-should-buy-netflix/">Apple Should Buy Netflix</a> the last time the two companies were at odds, but the weakness in that argument is that simply having money another company needs isn’t a compelling enough case; when it comes to Disney the payoff is the Apple Vision Pro having that much more great content that much sooner, not only making the headset a success but also making it impossible for other streaming businesses to not serve their customers just because they think the arrangement under which they operate is unfair.</p>
<hr><ol><li id="fn1-12205"><p>There is an exception for Netflix specifically: if you download a Netflix game <a href="https://stratechery.com/2023/netflix-earnings-netflixs-licensing-pitch-netflix-gaming-revisited/">you can sign up with in-app purchase</a>, which the company would almost certainly prefer not to offer but, thanks to Apple’s aforementioned crack-down on SaaS app sign-ups, requires.&nbsp;<a href="#rf1-12205" title="Return to footnote 1.">↩</a></p></li></ol>
	</div><!-- .entry-content -->
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why Walmart pays its truck drivers 6 figures (149 pts)]]></title>
            <link>https://www.freightwaves.com/news/how-walmart-uses-trucking-to-dominate-american-retail</link>
            <guid>39176877</guid>
            <pubDate>Mon, 29 Jan 2024 14:51:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.freightwaves.com/news/how-walmart-uses-trucking-to-dominate-american-retail">https://www.freightwaves.com/news/how-walmart-uses-trucking-to-dominate-american-retail</a>, See on <a href="https://news.ycombinator.com/item?id=39176877">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-504392">
	

	<div id="entry-content">
		
<p data-beyondwords-marker="8dd5baad-38cf-4842-849f-6e19e61393d3">One Walmart truck driver says he has 15 years left of working, and he intends to spend them hauling loads for Walmart. “Barring a lottery win or marrying a sugar mama, I don’t see myself going anywhere,” said the Texas-based driver, who asked not to have his name included as he is not authorized to speak on behalf of the company.</p>







<p data-beyondwords-marker="d9aacada-376e-4c45-81b8-93a8340b45df">Such loyalty to a single company is unusual in trucking, an industry notorious for massive turnover. And the Texas trucker isn’t alone in his dedication to Walmart. One of the best jobs you can get in trucking is at Walmart. <a href="https://corporate.walmart.com/news/2022/04/07/drive-in-opportunity-walmart-raises-driver-pay-and-launches-private-fleet-development-program">The uber-retailer says</a> truck drivers can make up to $110,000 in their first year at the company. That’s twice the nationwide median pay of a truck driver, and certainly above <a href="https://corporate.walmart.com/askwalmart/how-much-do-walmart-associates-make">the $17.50 an hour</a> that the average Walmart associate earns. Home time, paid vacation and good health insurance are also guaranteed for Walmart company drivers. These offerings are elusive in the trucking world.</p>







<p data-beyondwords-marker="e7df8d37-546e-42ca-950d-7b3224abffe0">It’s not out of the goodness of Walmart’s corporate heart that it pays truck drivers a truckload. Rather, truckers are key to Walmart’s retail dominance — and they have been from the start. Without a highly engaged trucking workforce, it’s not likely that the company would have flourished in the way it has. The Fortune 1 company prioritized supply chain long before it became a buzzword.</p>







<p data-beyondwords-marker="f5baf673-c5b8-444f-8626-f64bd53fca99">“At Walmart, we believe in offering our drivers a competitive compensation package to attract the best drivers in the industry,” a Walmart spokesperson told FreightWaves in an emailed statement.&nbsp;&nbsp;</p>



<figure data-beyondwords-marker="9af8cc1d-793c-4149-8477-f8e1c32431f9"><img decoding="async" width="1600" height="1059" src="https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-2.jpeg" alt="" srcset="https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-2.jpeg 1600w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-2-600x397.jpeg 600w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-2-1200x794.jpeg 1200w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-2-768x508.jpeg 768w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-2-1536x1017.jpeg 1536w" sizes="(max-width: 1600px) 100vw, 1600px"><figcaption><em>Walmart company drivers are historically some of the most elite in the industry. (Photo: Jim Allen/FreightWaves)</em></figcaption></figure>



<p data-beyondwords-marker="66a4f40e-3ab5-4981-a610-0944076f4876">Walmart employs some 14,000 drivers, which makes it comparable to some of the largest for-hire fleets in the U.S. It’s added 5,800 drivers to the company in the past five years alone.&nbsp;</p>







<p data-beyondwords-marker="61cc4cfe-b165-467e-913f-bfa6d31567d4">Recently, Walmart has shifted some of its strategies around recruiting those new drivers. In 2018, Walmart changed its truck driving recruitment program to allow more drivers to pass its program. A senior vice president at Walmart <a href="https://finance.yahoo.com/news/walmart-successfully-recruited-truck-drivers-122937062.html">told Yahoo! Finance</a> at the time it was because of a “shortage” of truck drivers. (Those who study the trucking industry <a href="https://www.bls.gov/opub/mlr/2019/article/is-the-us-labor-market-for-truck-drivers-broken.htm">dispute that such a shortage exists</a>, concluding that drivers leave the industry for jobs with better pay and hours.)</p>







<p data-beyondwords-marker="394e993e-0a74-4eae-8828-e86069f7cff4">Last year, Walmart announced another key pivot. The <a href="https://www.freightwaves.com/news/walmart-expands-in-house-driver-hiring-training-program">company said in January 2023</a>, building on a pilot it launched the <a href="https://corporate.walmart.com/news/2022/04/07/drive-in-opportunity-walmart-raises-driver-pay-and-launches-private-fleet-development-program">year before</a>, that it would allow Walmart associates living in participating locations to apply to a 12-week CDL program. For perhaps the first time, a Walmart company driver doesn’t need years of experience to get behind the wheel of its branded 18-wheelers. It may be that Walmart’s tack on trucking is changing.&nbsp;</p>







<h2 data-beyondwords-marker="8a201039-55d3-4ac3-87de-2de23e3a39bd" id="h-operating-in-the-boondocks-forced-walmart-to-become-a-distribution-whiz">Operating in the boondocks forced Walmart to become a distribution whiz</h2>







<p data-beyondwords-marker="fd3e035a-b533-434b-b7fa-ae25df3bbe1a">Decades before Walmart became the biggest company in the world — raking in $611 billion in revenue last year — its leadership team couldn’t find anyone to haul freight to its first stores. Walmart operated mostly in the boondocks, far from where most trucking companies wanted to go.</p>







<p data-beyondwords-marker="32a80ef4-869b-4c38-99d4-40f09f7ea116">“We couldn’t find anybody who wanted to run their trucks 60 or 70 miles out of the way into these little towns where we were operating,” Don Sonderquist, an early Walmart executive, explained in an interview <a href="https://theyoungtreps.com/wp-content/uploads/2021/03/sam_walton-made_in_america.pdf">published in 1992</a>. “We were totally ignored by the distributors and the jobbers. That’s not only how we came to build our own distribution system, it’s also how we got used to beating the heck out of everybody on prices.”</p>







<p data-beyondwords-marker="0463b21b-88a3-4dc7-b48c-9a0cf4930657">This forced founder Sam Walton to build up his own network of suppliers, too. Walmart elected to work directly with the brands it sells in-store, which still allows the company unusual control over the minutiae of the products of some very large companies, according to journalist Charles Fishman, the author of the 2006 book “The Wal-Mart Effect.”</p>







<figure data-beyondwords-marker="e922ebce-85d8-4182-8ce2-35e019f20b83"><img loading="lazy" decoding="async" width="1600" height="900" src="https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-3.jpeg" alt="" srcset="https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-3.jpeg 1600w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-3-600x338.jpeg 600w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-3-1200x675.jpeg 1200w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-3-768x432.jpeg 768w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-3-1536x864.jpeg 1536w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-3-390x220.jpeg 390w" sizes="(max-width: 1600px) 100vw, 1600px"><figcaption><em>Walmart employed 2.1 million associates, per its 2022 financial statement. It’s the largest private employer in the world. (Photo: Jim Allen/FreightWaves)</em></figcaption></figure>







<p data-beyondwords-marker="a982dd1c-d09e-4130-97c9-79493c2e9cfd">This hyperfocus on supply chain and distribution shaped key decisions from the top to the bottom of Walmart’s operations. That’s according to two people who have closely studied Walmart: Fishman and historian Nelson Lichtenstein, author of the 2006 book “Wal-Mart: The Face of Twenty-First-Century Capitalism” and professor at the University of California, Santa Barbara.</p>







<p data-beyondwords-marker="2613a98e-07de-460a-8a58-83f51e742567">When Walmart sought to open a new store, Fishman and Lichtenstein explained, it built the distribution center. Then, it built stores within a one-day drive of that distribution center. This might seem like an obvious strategy in 2024, but it was somewhat revolutionary in the mid-20th century. Kmart, for example, targeted the same blue-collar Americans that Walmart did. However, Kmart would simply plop stores into suburbs that had plenty of customers. Distribution was an afterthought.</p>







<p data-beyondwords-marker="1a716f30-0896-44fd-bae2-f564ecb135bb">“Walmart has become the largest company in human history by doing something that was already being done, better than anyone else did it,” Fishman said. “Logistics and transportation is one of the things that made Walmart, Walmart, and allowed them to outcompete.”</p>







<h2 data-beyondwords-marker="4056585e-82f7-45df-82fc-dd968c660a58" id="h-so-why-is-walmart-so-obsessed-with-its-truckers">So … why is Walmart so obsessed with its truckers?</h2>







<p data-beyondwords-marker="da760775-c730-4d4f-a7f7-ea2f405a0546">Kroger, Home Depot, Target and the like all operate huge supply chains and obviously manage to get their shelves robustly stocked — without the front-and-center obsession on supply chain. Walmart’s supply chain, though, is different for a few key reasons. Professor Brian Gibson, executive director of the Center for Supply Chain Innovation at Auburn University, laid it out:</p>







<ul data-beyondwords-marker="61760d03-5096-4296-99b9-3cd543dda28d">
<li data-beyondwords-marker="b9acc781-0284-4cb2-bd24-7f77a92a2618">Walmart is just, well, bigger than any other retailer. It has 4,616 stores, compared to fewer than 2,000 for Target, around 2,200 for Home Depot and 2,750 for Kroger. Walmart also has a larger average square footage per store, too.</li>
</ul>



<ul data-beyondwords-marker="3445c5f7-3db8-45e1-ac96-a4218f270c96">
<li data-beyondwords-marker="3889d350-1d62-40dc-81b5-7991c01b8bbc">Walmart has a mix of grocery and general merchandise, which adds complexity to its trucking network.</li>
</ul>



<ul data-beyondwords-marker="bdb10324-e7d4-4f44-a3dd-942287249a87">
<li data-beyondwords-marker="7cd90b3b-83cc-433d-8bec-42ba5fb396a8">As a result of its large, private fleet, Walmart has unusual clout among equipment manufacturers and other trucking service providers. It’s the type of status that’s usually reserved for companies that <em>only </em>do trucking.</li>
</ul>







<p data-beyondwords-marker="4130dfc0-bb57-4e73-91df-d7171aec82a7">“Walmart’s mission is to save people money so they can live better,” the Walmart spokesperson said in an emailed statement. “Managing our own distribution and trucking networks helps us better serve our customer and manage costs.”</p>







<figure data-beyondwords-marker="6c4c9632-6ab9-4de3-9fb2-43584f3b6c28"><img loading="lazy" decoding="async" width="1600" height="900" src="https://www.freightwaves.com/wp-content/uploads/2024/01/22/image.jpeg" alt="" srcset="https://www.freightwaves.com/wp-content/uploads/2024/01/22/image.jpeg 1600w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-600x338.jpeg 600w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1200x675.jpeg 1200w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-768x432.jpeg 768w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1536x864.jpeg 1536w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-390x220.jpeg 390w" sizes="(max-width: 1600px) 100vw, 1600px"><figcaption><em>Walmart employs around 14,000 truck drivers. The retailer hired nearly 6,000 in the last five years. (Photo: Jim Allen/FreightWaves)&nbsp;&nbsp;</em></figcaption></figure>







<p data-beyondwords-marker="023e0528-b7b7-4ccd-8924-aa803eb1d715">The importance of distribution is perhaps incredibly obvious. If stuff is not on the shelves, customers aren’t going to be buying that stuff. Customers would ultimately buy less during that visit and, if they get fed up by a consistent lack of stuff, eventually not at all. The stuff has to be moved safely and on time across the country. If paying top dollar makes that happen, then it’s sensible for Walmart to agree to do that.&nbsp;</p>







<p data-beyondwords-marker="830b6ace-7eb3-47b6-95fc-19c94f264a4f">“They wanted to pay them good money because it was the absolute core of their, of their business — to get this stuff from the distribution center to the store at precisely the right time with no screw-ups,” Lichtenstein said. “That was crucial.”</p>







<p data-beyondwords-marker="496d0d5c-a78a-451a-8118-98f7f7531ce6">Paying truck drivers top dollar also makes sense because Walmart doesn’t employ <em>that </em>many of them. The company has about 14,000 truck drivers and 1.6 million associates. Each of those truck drivers holds a lot of power over the shopping experience of a Walmart store.</p>







<p data-beyondwords-marker="c20b4b36-e0fb-40bf-903e-a72e55e39c2c">“One associate here or there can have a positive impact, but it’s not going to change the economics of the store,” Fishman said. “A truck driver is going to really matter. They have an outsized impact on the way the company runs.”</p>







<p data-beyondwords-marker="02affaa7-8d8e-40d0-9f62-78ba5916c91b">Paying six figures to 14,000 employees may seem reasonable enough for Walmart. “It’s not even 1% of their staff,” Fishman said.&nbsp;</p>







<h2 data-beyondwords-marker="6b526b1b-f9d6-45f7-a9dd-ad3cbacd6f36" id="h-walmart-is-remodeling-some-of-its-trucker-policies-nbsp">Walmart is remodeling some of its trucker policies&nbsp;</h2>







<p data-beyondwords-marker="54e57326-54f8-4676-8405-95c53e368041">Walmart is now changing its truck driver hiring policies. Until 2022, the company required 30 months of driver experience before one could be considered for the company driver role. That year, the company began piloting a program that allowed Walmart associates to go to a 12-week driver training program and become fleet drivers. Walmart expanded the program nationwide. (Outside applicants still need 30 months of training, and not every associate who applies is admitted to the program.)</p>







<p data-beyondwords-marker="30895f29-e1f1-48ee-9bfc-e988adf6e84f">“We started the Associate-to-Driver program because we wanted to tap into our own talent pool of incredible associates and give them opportunity to develop their career,” the Walmart spokesperson said in a written statement. “It’s been a great opportunity for our associates to continue to grow their careers without having to leave the company.”</p>







<p data-beyondwords-marker="e66e080b-8d9c-4d90-a713-a6a1dc07585f">The spokesperson said the company requires all trainees to pass the same skills assessment as external hires. Then, they’re partnered with a mentor for six weeks of continued training.</p>







<p data-beyondwords-marker="75919ed4-01fc-4c8d-b730-920a1b1959a1">It’s a sensible move for Walmart to train from within; its current CEO, Doug McMillon, started as an hourly associate. “I think it’s a recognition that [you value] your own employees better than somebody walking in off the street,” GIbson said.</p>







<h2 data-beyondwords-marker="854eb036-4cec-4872-8e90-68962d48b2f9" id="h-the-truck-driver-shortage-debate-appears-again">The truck driver shortage debate appears… again</h2>







<p data-beyondwords-marker="1ff6c81e-3834-4dfe-99fc-c9fca4791852">Some Walmart drivers aren’t delighted.&nbsp;</p>







<p data-beyondwords-marker="8b5ea380-9f56-4e72-9694-63386a852ed9">The Texas-based Walmart truck driver, who joined the company two years ago, said the retailer could attract more drivers by raising its pay. “Raise the driver’s pay and you’ll retain and attract [experienced drivers],” he said.</p>







<p data-beyondwords-marker="d6bf850d-68e8-4c6d-96df-7a9321012c30">Another Texas-based truck driver, who joined Walmart seven years ago, said he fears it’s a sign that Walmart is approaching trucking in the same way as large for-hire fleets, which see typical turnover rates around 94%.</p>







<p data-beyondwords-marker="93bb122a-e2a5-44c5-9161-b4c37f59340c">“Back in the day, you used to need a decade before you’re even looked at to get on with Walmart,” he said. (The driver asked not to have his name included as he is not authorized to speak on behalf of the company.)</p>







<p data-beyondwords-marker="0ad65c61-0264-400e-b43c-099fb2939f02">Both complaints get at the heart of an ongoing debate in the trucking industry: the so-called <a href="https://www.freightwaves.com/news/why-trucking-embraces-alarming-turnover-rates">truck driver shortage</a>. Trucking employers maintain that they’re unable to hire drivers due to a persistent shortage — caused largely by demographic issues and the lifestyle of trucking. However, researchers (and truck drivers themselves) disagree. Studies suggest the massive turnover seen by large fleets keeps them scrambling to hire new workers; one March 2019 study <a href="https://www.bls.gov/opub/mlr/2019/article/is-the-us-labor-market-for-truck-drivers-broken.htm">published by the Bureau of Labor Statistics</a> concluded that “price signals” would lead to a more stable trucking workforce.</p>







<p data-beyondwords-marker="3b98a943-7726-4bb5-ab95-1ab226690ab4">A company, like Walmart, that pays six figures and offers good benefits should not struggle with turnover. On the other hand, Walmart needs to hire more drivers as the retailer expands operations and current truckers retire. Walmart has hired nearly 6,000 new drivers in the past five years.&nbsp;</p>







<h2 data-beyondwords-marker="84563572-42be-4d95-9545-9cf07299dafe" id="h-experts-believe-walmart-wants-more-control-over-training-its-truckers">Experts believe Walmart wants more control over training its truckers</h2>







<p data-beyondwords-marker="4fbe9cbf-d502-46a9-b3c2-8066c2d5ed68">From the perspective of these supply chain experts, it doesn’t seem like the associate-to-driver program is necessarily a way to cut costs. Gibson said Walmart has been “very aggressive” in recruiting drivers in recent years. It may have simply tapped out of the current supply of drivers.&nbsp;</p>







<p data-beyondwords-marker="f5602cf6-e924-416a-bf64-22aa95726674">“I think this is just the latest in the evolution of the hiring process for Walmart,” Gibson said. “Going internal has been proven to be a good strategy by other organizations.”</p>







<figure data-beyondwords-marker="fdcbfe2b-2b75-4d65-8069-6c6e5f412b11"><img loading="lazy" decoding="async" width="1600" height="900" src="https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1.jpeg" alt="" srcset="https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1.jpeg 1600w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1-600x338.jpeg 600w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1-1200x675.jpeg 1200w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1-768x432.jpeg 768w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1-1536x864.jpeg 1536w, https://www.freightwaves.com/wp-content/uploads/2024/01/22/image-1-390x220.jpeg 390w" sizes="(max-width: 1600px) 100vw, 1600px"><figcaption><em>Many trucking fleets hire new drivers to save money on wages, but that might not be Walmart’s tactic here. (Photo: Jim Allen/FreightWaves)</em></figcaption></figure>



<p data-beyondwords-marker="c1dadc81-21ba-4303-b85e-24e1d869ccca">What’s more, the associate-to-driver program could be a way to better mold the Walmart truck driver.&nbsp;</p>







<p data-beyondwords-marker="a07f3b08-360e-4b0a-a428-4bc8c3035133">“You take somebody who’s been with another company, they’ve developed habits, they’ve developed styles, they know certain systems –&nbsp; for the good and the bad,” Gibson said. “If they’ve developed any bad habits over time, you can train your new drivers the way you want, the way you need on your systems and try to focus on the skills, capabilities and safety issues that are directly of importance to your organization.”</p>







<p data-beyondwords-marker="c697eaa3-f346-4721-b620-abcf0845497c">Fishman agreed. An associate-turned-driver might not bring years of trucking experience, but they certainly <em>get </em>Walmart.&nbsp;</p>



<p data-beyondwords-marker="1dc91d8d-015c-4350-9f36-501cecfb0607">“It’s possible in this wave of hiring that [outside trucking hires] are diluting this Walmart culture,” Fishman said. “Truck drivers are famously independent.”</p>







<p data-beyondwords-marker="110fadae-784c-4ae5-99ff-204956fa13b9"><em>What do you think of Walmart’s trucking fleet? Email </em><a href="https://www.freightwaves.com/cdn-cgi/l/email-protection#cfbdbfbdaaa2aeaca48fa9bdaaa6a8a7bbb8aeb9aabce1aca0a2"><em><span data-cfemail="f5878587909894969eb59387909c929d818294839086db969a98">[email&nbsp;protected]</span></em></a><em> with your thoughts. And don’t forget to </em><a href="http://freightwaves.com/modes"><em>subscribe to MODES</em></a><em>.&nbsp;</em></p>
			</div>
	
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[What I talk about when I talk about query optimizer (part 1): IR design (150 pts)]]></title>
            <link>https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/</link>
            <guid>39176797</guid>
            <pubDate>Mon, 29 Jan 2024 14:45:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/">https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/</a>, See on <a href="https://news.ycombinator.com/item?id=39176797">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>I recently came across an insightful article on SQL Query Optimizers by <a href="https://github.com/leiysky">@leiysky</a> on <a href="https://zhuanlan.zhihu.com/p/680046526">Zhihu</a>, and I must say it was excellent! To make it accessible to a wider audience, I have translated the piece into English. Enjoy reading!</p><p>Please note that <a href="https://github.com/leiysky">@leiysky</a> deserves full credit for the quality of this article. Any mistakes are solely due to my inadequate translation skills.</p><p>Alright, let's begin!</p><hr><p>During our recent conversation, <a href="https://github.com/skyzh">Mr. Chi</a> and I discussed his latest project at CMU called <a href="https://github.com/cmu-db/optd">optd</a>, which is a query optimizer library developed using the Cascades framework. We ended up griping together about various design and implementation aspects of database optimizers. It was at that moment when I realized the intriguing nature of certain technical subjects and decided to take note of them.</p><p>So, I've made the decision to launch a series where we'll cover everything about query optimizers—ranging from algorithm basics to engineering techniques, technological evolution to project implementation, and even some insider industry gossip.</p><p>The inspiration of the title comes from <a href="https://en.wikipedia.org/wiki/What_I_Talk_About_When_I_Talk_About_Running">Haruki Murakami's book</a>, which I highly recommend. The book is a collection of essays that Murakami wrote about his experience as a runner. The title is a reference to a collection of short stories by Raymond Carver, "What We Talk About When We Talk About Love", which Murakami translated into Japanese.</p><p>Software development is a skill just as running is, everyone can do it by practising but not everyone will have the same feelings about it. I'd like to share some personal thoughts and experiences about query optimizers, and I hope that you will find them interesting.</p><p>Today, let's begin by discussing the topic of <strong>IR Design</strong>, focusing on common design patterns in optimizers and the underlying considerations.</p><h2 id="what-is-a-query-optimizer">What is a Query Optimizer?</h2><p>Before we officially start the discussion, I'd like to clarify the definition of a query optimizer.</p><p>In general, a query optimizer is a database component that <strong>optimizes the execution plan of queries</strong>. However, different databases have various methods for optimizing queries. For instance, some may directly rewrite the AST, perform transformations during AST lowering, or dynamically rewrite during query execution.</p><p>To unify the concept, I will refer to all parts from the <em>SQL parser</em> to the <em>SQL Executor</em> collectively as the <strong>Query Optimizer</strong>.</p><h2 id="what-is-ir">What is IR?</h2><p>Friends familiar with compilation technology should be very familiar with the term <code>IR</code>. IR stands for Intermediate Representation, which is commonly used in compilers for different programming languages like Rust's HIR &amp; MIR and LLVM's LLVM IR. IR serves as a structural representation of programming languages, enabling the compiler to conduct various analyses and optimizations more effectively.</p><p>If SQL is considered a programming language, then relational databases function as virtual machines that execute SQL, similar to how the JVM executes Java. The query optimizer is responsible for translating SQL statements (Java code) into execution plans (Java bytecode) for the executor (Java runtime) to execute. Consequently, it is essential to design different IRs for SQL when developing a query optimizer.</p><h2 id="what-does-sql-ir-look-like">What does SQL IR look like?</h2><p>Typical database projects are divided into several modules: Parser, Analyzer/Binder, Optimizer, and Executor. These components process SQL statements sequentially to transform them into query results. In our context, the Optimizer includes both the Analyzer and Optimizer modules mentioned earlier.</p><h3 id="ast">AST</h3><p>SQL is a declarative language that mimics natural language syntax. It is based on <a href="https://en.wikipedia.org/wiki/Relational_algebra">relational algebra</a> and can describe operations on sets, mapping them to queries on tabular data (tables).</p><p>To facilitate processing, like the vast majority of compilers, we will first parse SQL language into an AST (Abstract Syntax Tree). A typical SQL AST is illustrated as follows:</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/ast.png" alt="Query AST"></p><p>In the SQL AST, we generally divide nodes into two types: Statement (Stmt) and Expression (Expr). The root node of each SQL AST is always a Statement, which may contain some Clauses as well as Expressions. An Expression is a recursive structure that includes various operators and function calls, and even nested Statements (Subqueries).</p><p>One interesting aspect of SQL is the blurred boundary between Statements and Expressions in SELECT Statements. This occurs because SELECT Statements are recursive and must address operator precedence issues (UNION/EXCEPT/INTERSECT). Additionally, only SELECT Statements can interact with Expressions recursively, which should be considered when designing an SQL AST.</p><h3 id="relational-algebra">Relational Algebra</h3><p>The theoretical foundation of the SQL language is relational algebra, and every query statement corresponds to a representation in relational algebra. For example:</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/relational_algebra.png" alt="Relational algebra"></p><p>Since the expression of relational algebra is also a recursive tree structure, many systems naturally convert SQL AST into an execution plan similar to the one shown below. We refer to each node as an <strong>operator</strong>, and we call the entire operator tree a <strong>query plan</strong>.</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/algebra_plan.png" alt="Algebra plan"></p><p>Of course, there are exceptions among the many systems. For example, IBM, as a pioneering, introduced the Query Graph Model (QGM) in its Starburst system. This representation is quite abstract and hardcodes many properties into QGM, making it exceptionally difficult to understand. Its claimed extensibility is also questionable.</p><p><em>Due to space limitations, I won't elaborate here; if interested, you can read the related papers <a href="https://dl.acm.org/doi/pdf/10.1145/66926.66962">Extensible Query Processing in Starburst</a> and <a href="https://dl.acm.org/doi/pdf/10.1145/141484.130294">Extensible/Rule Based Query Rewrite Optimization in Starburst</a>.</em></p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/QGM.png" alt="QGM"></p><p>Currently, mainstream databases have essentially adopted the representation of relational algebra (such as IBM's <a href="https://en.wikipedia.org/wiki/IBM_System_R">System R</a> and <a href="https://en.wikipedia.org/wiki/IBM_Db2">DB2</a>, Oracle's various database products, <a href="https://en.wikipedia.org/wiki/Microsoft_SQL_Server">Microsoft's SQL Server</a> series, open-source <a href="https://en.wikipedia.org/wiki/PostgreSQL">PostgreSQL</a> and <a href="https://en.wikipedia.org/wiki/MySQL">MySQL</a> 8.0). Based on this foundation, they have developed numerous optimization frameworks and execution frameworks. Therefore, choosing to use the abstraction of relational algebra when designing SQL IR is a foolproof decision.</p><p>By utilizing the various axioms and theorems of relational algebra, we can perform a variety of transformations on SQL IR to achieve optimization while ensuring correctness. Specific optimization rules and algorithms will be discussed in subsequent articles.</p><h2 id="my-best-engineering-practices">(My) Best Engineering Practices</h2><p>There is a cognitive bias known as <em>the curse of knowledge</em>, which occurs when one assumes that others possess the same level of knowledge during communication.</p><p>This phenomenon is quite common in software development. People who have experience writing certain types of code and those who don't often struggle to communicate effectively, even if they share the same theoretical foundation (algorithms, programming languages, or domain knowledge). The reason for this lies in the significant flexibility of software engineering; there are multiple ways to implement the same functionality, each with its own set of challenges.</p><p>To eliminate such communication barriers, various technical fields have developed their own set of idioms or design patterns. New projects built on these practices can avoid a lot of unnecessary trouble. The same is true for the field of databases; however, due to its niche nature and high degree of commercialization, knowledge circulated among the public is very scarce, and engineering practices are scattered across various open-source projects.</p><p>In this article, I will build a SQL IR from scratch based on my own best practices, which will facilitate the progressive sharing of some design considerations. Due to personal preference, I will use Rust to write code. Friends who are not familiar with Rust need not worry; as long as you have a basic understanding of C/C++, you can comprehend the logic behind Rust's code.</p><h3 id="hello-world">Hello, world!</h3><p>When we learn a new programming language, the first program we generally encounter is "hello world".</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>main</span>()<span> </span>{<span>
</span></span></span><span><span><span>    </span>println!(<span>"Hello, world!"</span>);<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>Therefore, we will also start by building our IR from the SQL version of "hello world".</p><div><pre tabindex="0"><code data-lang="sql"><span><span><span>create</span><span> </span><span>table</span><span> </span>t(a<span> </span><span>int</span>);<span>
</span></span></span><span><span><span></span><span>select</span><span> </span><span>*</span><span> </span><span>from</span><span> </span>t;<span>
</span></span></span></code></pre></div><p>Translating this SQL statement into relational algebra is very straightforward; we denote it as <code>Get(t)</code>, which means to return all the data in set <code>t</code>. To represent such a query, we can define a simple struct called <code>Get</code>.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>struct</span> <span>Get</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>table: <span>String</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>fn</span> <span>plan</span>()<span> </span>-&gt; <span>Get</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>// select * from t;
</span></span></span><span><span><span></span><span>    </span>Get<span> </span>{<span>
</span></span></span><span><span><span>        </span>table: <span>"t"</span>.to_string(),<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>This simple SQL IR is now complete. With the <code>Get</code>, we can represent all queries similar to <code>select * from xxx</code>. Isn't it very straightforward?</p><h3 id="select--project">Select &amp; Project</h3><p>Next, we can add more features to this IR, supporting additional SQL clauses. For example:</p><div><pre tabindex="0"><code data-lang="sql"><span><span><span>create</span><span> </span><span>table</span><span> </span>t(a<span> </span><span>int</span>,<span> </span>b<span> </span><span>int</span>);<span>
</span></span></span><span><span><span></span><span>select</span><span> </span>a<span> </span><span>from</span><span> </span>t<span> </span><span>where</span><span> </span>a<span> </span><span>=</span><span> </span><span>1</span>;<span>
</span></span></span></code></pre></div><p>This SQL query, when translated into relational algebra, can be denoted as <code>Project(Select(Get(t), a = 1), a)</code>. The <code>Select</code> operator can filter data based on the provided predicate, while the <code>Project</code> operator can trim the set to obtain the required attribute. To represent such a query, we need to add more struct definitions.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>struct</span> <span>Get</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>table: <span>String</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>struct</span> <span>Select</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>get: <span>Get</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>predicate: <span>String</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>struct</span> <span>Project</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>select: <span>Select</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>project: <span>String</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>fn</span> <span>plan</span>()<span> </span>-&gt; <span>Project</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>// select a from t where a = 1;
</span></span></span><span><span><span></span><span>    </span>Project<span> </span>{<span>
</span></span></span><span><span><span>        </span>select: <span>Select</span><span> </span>{<span>
</span></span></span><span><span><span>            </span>get: <span>Get</span><span> </span>{<span>
</span></span></span><span><span><span>                </span>table: <span>"t"</span>.to_string(),<span>
</span></span></span><span><span><span>            </span>},<span>
</span></span></span><span><span><span>            </span>predicate: <span>"a = 1"</span>.to_string(),<span>
</span></span></span><span><span><span>        </span>},<span>
</span></span></span><span><span><span>        </span>project: <span>"a"</span>.to_string(),<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>Upon arriving here, we are confronted with several questions: According to the theorem of relational algebra, can <code>Project</code> act as a child of <code>Select</code>? Given that Select is optional for an SQL query, how should this be reflected in the code?</p><p>To address these issues, we can introduce some features of dynamic dispatch. In C++/Java, inheritance is commonly used to represent an <code>Operator</code>, for example:</p><div><pre tabindex="0"><code data-lang="cpp"><span><span><span>class</span> <span>Operator</span> {};
</span></span><span><span><span>class</span> <span>Get</span> <span>:</span> <span>public</span> Operator {};
</span></span><span><span><span>class</span> <span>Select</span> <span>:</span> <span>public</span> Operator {
</span></span><span><span>    Operator<span>*</span> _child;
</span></span><span><span>};
</span></span><span><span><span>class</span> <span>Project</span> <span>:</span> <span>public</span> Operator {
</span></span><span><span>    Operator<span>*</span> _child;
</span></span><span><span>};
</span></span></code></pre></div><p>In Rust, we have a more convenient option that allows us to enjoy the benefits of both static typing and dynamic dispatch, which is <code>enum</code>. Rust's enum is an ADT (Algebraic Data Type), also known as tagged union, and it can represent our operators very conveniently:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>enum</span> <span>Operator</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>Get<span> </span>{<span>
</span></span></span><span><span><span>        </span>table: <span>String</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Select<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>predicate: <span>String</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Project<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>projects: <span>String</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>fn</span> <span>plan</span>()<span> </span>-&gt; <span>Operator</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>// select a from t where a = 1;
</span></span></span><span><span><span></span><span>    </span>Operator::Project<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span>::new(Operator::Select<span> </span>{<span>
</span></span></span><span><span><span>            </span>child: <span>Box</span>::new(Operator::Get<span> </span>{<span>
</span></span></span><span><span><span>                </span>table: <span>"t"</span>.to_string(),<span>
</span></span></span><span><span><span>            </span>}),<span>
</span></span></span><span><span><span>            </span>predicate: <span>"a = 1"</span>.to_string(),<span>
</span></span></span><span><span><span>        </span>}),<span>
</span></span></span><span><span><span>        </span>project: <span>"a"</span>.to_string(),<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>With this, we can freely represent operator trees of various shapes, and the design of the IR begins to get on the right track.</p><h3 id="scalar-expression">Scalar expression</h3><p>Although we have introduced the operators <code>Select</code> and <code>Project</code>, the <code>Select Predicate</code> and <code>Project Expression</code> still exist in the form of strings, which cannot meet the requirements for analysis and optimization. Therefore, we need to design an IR for these expressions as well.</p><p>Looking back, after being processed by the Parser, SQL strings are transformed into AST, and the expressions within them become Expr nodes, roughly like this:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>enum</span> <span>Expr</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>ColumnRef(ColumnRef),<span>
</span></span></span><span><span><span>    </span>Literal(Literal),<span>
</span></span></span><span><span><span>    </span>Function(Function),<span>
</span></span></span><span><span><span>    </span>BinaryOp(BinaryOp),<span>
</span></span></span><span><span><span>    </span>UnaryOp(UnaryOp),<span>
</span></span></span><span><span><span>    </span>Subquery(SelectStmt),<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>The expression itself is a recursive structure, and the <code>Expr</code> node of AST is also a recursive structure. Can we lazily use the <code>Expr</code> node directly as part of our SQL IR? Let's give it a try first.</p><p>After replacing string with <code>Expr</code>, we can obtain:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>enum</span> <span>Operator</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>Get<span> </span>{<span>
</span></span></span><span><span><span>        </span>table: <span>String</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Select<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>predicate: <span>Expr</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Project<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>projects: <span>Vec</span><span>&lt;</span>Expr<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>Next, let's try some common analysis using the given SQL statement to see if it works well:</p><div><pre tabindex="0"><code data-lang="sql"><span><span><span>select</span><span> </span>a<span> </span><span>from</span><span> </span>t<span>
</span></span></span><span><span><span></span><span>where</span><span> </span><span>exists</span><span> </span>(<span>select</span><span> </span><span>*</span><span> </span><span>from</span><span> </span>t1<span> </span><span>where</span><span> </span>t.a<span> </span><span>=</span><span> </span>t1.a)<span>
</span></span></span></code></pre></div><ol><li>Q: Which tables and columns does <code>Expr</code> in <code>Project</code> depend on? A: It uses a column called <code>a</code>, but I don't know which table it belongs to, maybe this column doesn't even exist.</li><li>Q: What is the return type of <code>Expr</code> in <code>Project</code>? A: I don't know, there is no type information included in <code>Expr</code>.</li><li>Q: Is the subquery in <code>Select</code> a <a href="https://en.wikipedia.org/wiki/Correlated_subquery">correlated subquery</a>? A: I don't know, the subquery in <code>Expr</code> is just an unprocessed AST.</li></ol><p>Ok, it seems that <code>Expr</code> is not as useful as we imagined. In order to conduct the above analysis, we need to design a more informative IR. To distinguish it from <code>Expr</code>, we will name it <code>ScalarExpr</code>.</p><p>Summarizing the above analysis, our requirements for ScalarExpr are as follows:</p><ol><li>All identifiers must be resolved to fully qualified names.</li><li>Type information needs to be injected and undergo type check.</li><li>All subqueries need to be transformed into SQL IR form.</li></ol><p>Combining the above requirements, along with some desugar, <code>ScalarExpr</code> would look something like this:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>enum</span> <span>ScalarExpr</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>ColumnRef(<span>Vec</span><span>&lt;</span>Identifier<span>&gt;</span>,<span> </span>Type),<span>
</span></span></span><span><span><span>    </span>Literal(Value,<span> </span>Type),<span>
</span></span></span><span><span><span>    </span>Function(Signature,<span> </span><span>Vec</span><span>&lt;</span>Self<span>&gt;</span>),<span>
</span></span></span><span><span><span>    </span>Subquery(Quantifier,<span> </span><span>Box</span><span>&lt;</span>Operator<span>&gt;</span>),<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>In this way, the design of the expression's IR is also formed. Let's integrate the entire set of SQL IR together.</p><h3 id="the-ir">The IR</h3><p>After the above design, we have:</p><ul><li><code>Operator</code>, a tree structure capable of flexibly expressing various SQL queries.</li><li><code>ScalarExpr</code>, providing rich semantic information.</li></ul><p>Although some key operators are still missing, such as <code>Join</code>, <code>Union</code>, <code>Aggregate</code>, etc. However, since the overall framework is already very clear, we can follow the same pattern and add them as well.</p><p>After integration, we have a fairly perfect SQL IR.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>enum</span> <span>ScalarExpr</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>ColumnRef(<span>Vec</span><span>&lt;</span>Identifier<span>&gt;</span>,<span> </span>Type),<span>
</span></span></span><span><span><span>    </span>Literal(Value,<span> </span>Type),<span>
</span></span></span><span><span><span>    </span>Function(Signature,<span> </span><span>Vec</span><span>&lt;</span>Self<span>&gt;</span>),<span>
</span></span></span><span><span><span>    </span>Subquery(Quantifier,<span> </span><span>Box</span><span>&lt;</span>Operator<span>&gt;</span>),<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>enum</span> <span>Operator</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>Get<span> </span>{<span>
</span></span></span><span><span><span>        </span>table: <span>String</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Select<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>predicate: <span>ScalarExpr</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Project<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>projects: <span>Vec</span><span>&lt;</span>ScalarExpr<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Join<span> </span>{<span>
</span></span></span><span><span><span>        </span>kind: <span>JoinKind</span>,<span>
</span></span></span><span><span><span>        </span>condition: <span>ScalarExpr</span>,<span>
</span></span></span><span><span><span>        </span>left: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>right: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>UnionAll<span> </span>{<span>
</span></span></span><span><span><span>        </span>left: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>right: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Aggregate<span> </span>{<span>
</span></span></span><span><span><span>        </span>group_by: <span>Vec</span><span>&lt;</span>ScalarExpr<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>aggr_exprs: <span>Vec</span><span>&lt;</span>ScalarExpr<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>Because it is too perfect, I have decided to give this IR an imposing name - <code>The IR</code>.</p><h3 id="property-derivation">Property Derivation</h3><p>When we want to analyze and optimize IR, we always need to obtain some properties of the IR. We can calculate these properties by writing an analyzer that traverses the entire IR, but this requires a lot of effort to maintain the state of the context in which the IR is located.</p><p>Fortunately, SQL as a declarative query language for data flow is quite simple, and we can use its features to calculate properties.</p><p>The data flow and parent-child relationships between operators in <code>The IR</code> are closely related and presented as a DAG (directed acyclic graph), where all data flows from child nodes to parent nodes.</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/DAG.png" alt="Untitled"></p><p>Under this characteristic, it is simple to compute the property of a certain IR node. It only requires recursively computing the property of each child node and then calculating its own property based on these properties. We refer to this process as <code>property derivation</code>.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>struct</span> <span>Property</span>;<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>fn</span> <span>derive_property</span>(op: <span>&amp;</span><span>Operator</span>)<span> </span>-&gt; <span>Property</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>// Calculate the properties of the children operators.
</span></span></span><span><span><span></span><span>    </span><span>let</span><span> </span>children_property: <span>Vec</span><span>&lt;</span>Property<span>&gt;</span><span> </span><span>=</span><span> </span>op<span>
</span></span></span><span><span><span>        </span>.children()<span>
</span></span></span><span><span><span>        </span>.map(derive_property)<span>
</span></span></span><span><span><span>        </span>.collect();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>    </span><span>// Calculate property with the children properties.
</span></span></span><span><span><span></span><span>    </span>op.calculate_property(<span>&amp;</span>children_property)<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>In SQL optimization, commonly used properties can be divided into two categories: <code>relational/logical properties</code> that describe the characteristics of a data set and <code>physical properties</code> that describe the physical characteristics of the data.</p><p>Common relational properties include:</p><ul><li>Information about the <code>attributes/columns</code> contained in the dataset</li><li><code>Cardinality</code> of the dataset, indicating the number of records in the dataset</li><li><code>Statistics</code>, representing the data distribution of attributes</li><li><code>Constraints</code>, representing constraints on attributes, such as <code>NOT NULL</code></li><li><code>Functional dependency</code>, indicating the functional dependency relationship between attributes</li></ul><p>Common physical properties include:</p><ul><li>Order</li><li>Degree of parallelism (DOP)</li><li>Data distribution</li><li>Data partition</li></ul><p>Combining the properties of relational algebra, we can describe the differences between types of properties.</p><p>Assuming there are relations <code>R</code> and <code>S</code>: the relational property of <code>R</code> is <code>RP_R</code>, and the physical property is <code>PP_R</code>; the relational property of <code>S</code> is <code>RP_S</code>, and the physical property is <code>PP_S</code>.</p><p>We can obtain:</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/property.svg" alt=""></p><p>It is not difficult to see that the equivalence relationship between two relations can determine the equivalence relationship of relational properties, but the equivalence relationship of physical properties is not affected by the equivalence relationship of relations.</p><p><em>The content about combining properties with specific query optimization algorithms will be discussed in detail in subsequent articles.</em></p><p>With property derivation, we can use theorems from relational algebra to optimize <code>The IR</code> while ensuring correctness.</p><p>So the next question is, what should the property look like?</p><h3 id="relational-properties">Relational properties</h3><p>The most important part of relational property is the representation of attributes. In naive relational algebra, each relation is composed of sets of tuples, and each attribute in a tuple has its own unique name. It is natural for us to directly consider using the tuple schema as the representation of attributes.</p><p>Let's first recall how a table is created.</p><p>In SQL, we use DDL (Data Definition Language) to create and manage various tables. When creating a table, we need to specify its table schema, which includes the specific definition of each column in the table, corresponding to attributes in relational algebra. The structure of the table schema might look something like this:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>struct</span> <span>TableSchema</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>name: <span>String</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>columns: <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>struct</span> <span>ColumnDefinition</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>name: <span>String</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>column_type: <span>Type</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>not_null: <span>bool</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>Since <code>ColumnDefinition</code> and attribute have a one-to-one correspondence, can we directly use <code>ColumnDefinition</code> to represent the property of attribute?</p><p>We can try adding support for attributes in <code>The IR</code> first.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>derive_attributes</span>(op: <span>&amp;</span><span>Operator</span>)<span> </span>-&gt; <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>// Calculate the attributes of the children operators.
</span></span></span><span><span><span></span><span>    </span><span>let</span><span> </span>children_attributes: <span>Vec</span><span>&lt;</span><span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;&gt;</span><span> </span><span>=</span><span>
</span></span></span><span><span><span>        </span>op.children().iter().map(derive_attributes).collect();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>    </span><span>// Calculate attributes with the children attributes.
</span></span></span><span><span><span></span><span>    </span>op.calculate_attributes(<span>&amp;</span>children_attributes)<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>First, we need to make some modifications to <code>The IR</code> and add table schema information for the <code>Get</code> operator.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>enum</span> <span>Operator</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>Get<span> </span>{<span>
</span></span></span><span><span><span>        </span>table: <span>String</span>,<span>
</span></span></span><span><span><span>        </span>schema: <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span><span>// Nothing changed for other variants
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>Then we implement <code>attribute derivation</code> for the <code>Operator</code>.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>impl</span><span> </span>Operator<span> </span>{<span>
</span></span></span><span><span><span>    </span><span>fn</span> <span>calculate_attributes</span>(<span>&amp;</span>self,<span> </span>children: <span>&amp;</span>[<span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span>])<span> </span>-&gt; <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>        </span><span>match</span><span> </span>self<span> </span>{<span>
</span></span></span><span><span><span>            </span>Operator::Get<span> </span>{<span> </span>schema,<span> </span><span>..</span><span> </span>}<span> </span><span>=&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>                </span><span>let</span><span> </span>attributes<span> </span><span>=</span><span> </span>schema.clone();<span>
</span></span></span><span><span><span>                </span>attributes<span>
</span></span></span><span><span><span>            </span>}<span>
</span></span></span><span><span><span>            </span>Operator::Select<span> </span>{<span> </span><span>..</span><span> </span>}<span> </span><span>=&gt;</span><span> </span>children[<span>0</span>].clone(),<span>
</span></span></span><span><span><span>            </span>Operator::Join<span> </span>{<span> </span><span>..</span><span> </span>}<span> </span><span>=&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>                </span><span>let</span><span> </span><span>mut</span><span> </span>attributes<span> </span><span>=</span><span> </span>children[<span>0</span>].clone();<span>
</span></span></span><span><span><span>                </span>attributes.extend(children[<span>1</span>].clone());<span>
</span></span></span><span><span><span>                </span>attributes<span>
</span></span></span><span><span><span>            </span>}<span>
</span></span></span><span><span><span>            </span>Operator::UnionAll<span> </span>{<span> </span><span>..</span><span> </span>}<span> </span><span>=&gt;</span><span> </span>children[<span>0</span>].clone(),<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>            </span>Operator::Project<span> </span>{<span> </span><span>..</span><span> </span>}<span> </span><span>=&gt;</span><span> </span>todo!(),<span>
</span></span></span><span><span><span>            </span>Operator::Aggregate<span> </span>{<span> </span><span>..</span><span> </span>}<span> </span><span>=&gt;</span><span> </span>todo!(),<span>
</span></span></span><span><span><span>        </span>}<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>Most of the operator implementations went smoothly, but it can be seen that <code>Project</code> and <code>Aggregate</code> have been marked as todo. At this point, we will find that <code>Project</code> and <code>Aggregate</code> cannot directly generate their own attributes using <code>children attributes</code>.</p><p>Going back to relational algebra, the purpose of <code>Project</code> is to trim the shape of tuples or modify the name of attributes. This kind of SQL expression like <code>SELECT a + 1 AS b FROM t</code> cannot be expressed as a naive <code>Project</code>; as for <code>Aggregate</code>, it is not even present in basic relational algebra, it is an extension to relational algebra.</p><p>The theory of relational algebra no longer exists!</p><p>However, despite this, the project still needs to continue. We need to introduce some <em>village rules</em> to expand the definition of relational algebra. Here we provide the formal definitions of <code>Project</code> and <code>Aggregate</code> in <code>The IR</code>.</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/project.svg" alt=""></p><p><code>Project</code> represents the attributes in relationship <code>R</code> as input, output a tuple consisting of <code>n</code> function mappings <code>f_1</code> to <code>f_n</code>.</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/aggregate.svg" alt=""></p><p><code>Aggregate</code> represents grouping the tuples in relationship <code>R</code> according to <code>m</code> attributes <code>k_1</code> to <code>k_m</code>, and applying <code>n</code> function mappings <code>f_1</code> to <code>f_n</code> on each group, finally outputting the grouped tuples.</p><p>The biggest change in this <em>village rule</em> is the introduction of <code>derived columns</code>. For columns directly from tables in SQL, we call them <code>base table columns</code>; for columns calculated through <code>Project</code>/<code>Aggregate</code>, we call them <code>derived columns</code>.</p><p>Before introducing the concept of <code>derived columns</code>, we could ensure that all data sources would ultimately point to the <code>Get</code> operator. However, after its introduction, this convention was broken and a concept similar to <code>scope</code> in programming languages emerged. We need to be more careful when optimizing.</p><p>After having <em>village rule</em>, we can also achieve <code>attribute derivation</code> for <code>Project</code> and <code>Aggregate</code>. However, at the same time, we also need to make some modifications to the structure of <code>The IR</code>.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>enum</span> <span>Operator</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>Project<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>projects: <span>Vec</span><span>&lt;</span>(ScalarExpr,<span> </span><span>String</span>)<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span><span>// Others
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>impl</span><span> </span>Operator<span> </span>{<span>
</span></span></span><span><span><span>    </span><span>fn</span> <span>calculate_attributes</span>(<span>&amp;</span>self,<span> </span>children: <span>&amp;</span>[<span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span>])<span> </span>-&gt; <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>        </span><span>match</span><span> </span>self<span> </span>{<span>
</span></span></span><span><span><span>            </span>Operator::Project<span> </span>{<span> </span>projects,<span> </span><span>..</span><span> </span>}<span> </span><span>=&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>                </span><span>let</span><span> </span>attributes: <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span><span>=</span><span> </span>projects<span>
</span></span></span><span><span><span>                    </span>.iter()<span>
</span></span></span><span><span><span>                    </span>.map(<span>|</span>(expr,<span> </span>alias)<span>|</span><span> </span>ColumnDefinition<span> </span>{<span>
</span></span></span><span><span><span>                        </span>name: <span>alias</span>.clone(),<span>
</span></span></span><span><span><span>                        </span>column_type: <span>expr</span>.column_type(),<span>
</span></span></span><span><span><span>                        </span>not_null: <span>expr</span>.nullable(),<span>
</span></span></span><span><span><span>                    </span>})<span>
</span></span></span><span><span><span>                    </span>.collect();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>                </span>attributes<span>
</span></span></span><span><span><span>            </span>}<span>
</span></span></span><span><span><span>            </span>Operator::Aggregate<span> </span>{<span>
</span></span></span><span><span><span>                </span>group_by,<span>
</span></span></span><span><span><span>                </span>aggr_exprs,<span>
</span></span></span><span><span><span>                </span><span>..</span><span>
</span></span></span><span><span><span>            </span>}<span> </span><span>=&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>                </span><span>let</span><span> </span><span>mut</span><span> </span>attributes: <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span><span>=</span><span> </span>group_by<span>
</span></span></span><span><span><span>                    </span>.iter()<span>
</span></span></span><span><span><span>                    </span>.map(<span>|</span>expr<span>|</span><span> </span>ColumnDefinition<span> </span>{<span>
</span></span></span><span><span><span>                        </span>name: <span>expr</span>.name(),<span>
</span></span></span><span><span><span>                        </span>column_type: <span>expr</span>.column_type(),<span>
</span></span></span><span><span><span>                        </span>not_null: <span>expr</span>.nullable(),<span>
</span></span></span><span><span><span>                    </span>})<span>
</span></span></span><span><span><span>                    </span>.collect();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>                </span>attributes.extend(aggr_exprs.iter().map(<span>|</span>expr<span>|</span><span> </span>ColumnDefinition<span> </span>{<span>
</span></span></span><span><span><span>                    </span>name: <span>expr</span>.name(),<span>
</span></span></span><span><span><span>                    </span>column_type: <span>expr</span>.column_type(),<span>
</span></span></span><span><span><span>                    </span>not_null: <span>expr</span>.nullable(),<span>
</span></span></span><span><span><span>                </span>}));<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>                </span>attributes<span>
</span></span></span><span><span><span>            </span>}<span>
</span></span></span><span><span><span>            </span><span>// Others
</span></span></span><span><span><span></span><span>        </span>}<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>In this way, we can calculate the attributes property for all operators. Come and try it out!</p><p>First, let's take a look at the most common and effective optimization in SQL - <code>predicate pushdown</code>. This optimization can reduce the computational workload of other operators by pushing down the <code>Select</code> operator into other operators, while ensuring that the overall query result remains unchanged. It is very concise and elegant.</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/select_push_down_project.png" alt="Select push down"></p><p>Let's try to implement this optimization on <code>The IR</code>. The idea is very simple, just swap the positions of <code>Select</code> and <code>Project</code> based on the relational algebra theorem. However, since we introduced derived columns, we must check if the predicate in <code>Select</code> depends on the column generated by <code>Project</code>.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>push_down_select_project</span>(op: <span>&amp;</span><span>Operator</span>)<span> </span>-&gt; <span>Option</span><span>&lt;</span>Operator<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>match</span><span> </span>op<span> </span>{<span>
</span></span></span><span><span><span>        </span>Operator::Select<span> </span>{<span>
</span></span></span><span><span><span>            </span>child: <span>project</span><span> </span><span>@</span><span> </span><span>box</span><span> </span>Operator::Project<span> </span>{<span> </span>child,<span> </span>projects<span> </span>},<span>
</span></span></span><span><span><span>            </span>predicate,<span>
</span></span></span><span><span><span>        </span>}<span> </span><span>=&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>            </span><span>let</span><span> </span>project_attributes: <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span><span>=</span><span> </span>derive_attributes(<span>&amp;</span>project);<span>
</span></span></span><span><span><span>            </span><span>let</span><span> </span>predicate_used_columns: <span>Vec</span><span>&lt;</span><span>String</span><span>&gt;</span><span> </span><span>=</span><span> </span>predicate.used_columns();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>            </span><span>// Check if the predicate uses any column from the project.
</span></span></span><span><span><span></span><span>            </span><span>let</span><span> </span>used_derived_columns<span> </span><span>=</span><span> </span>predicate_used_columns.iter().any(<span>|</span>used_column<span>|</span><span> </span>{<span>
</span></span></span><span><span><span>                </span>project_attributes<span>
</span></span></span><span><span><span>                    </span>.iter()<span>
</span></span></span><span><span><span>                    </span>.any(<span>|</span>attr<span>|</span><span> </span>attr.name<span> </span><span>==</span><span> </span><span>*</span>used_column)<span>
</span></span></span><span><span><span>            </span>});<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>            </span><span>if</span><span> </span>used_derived_columns<span> </span>{<span>
</span></span></span><span><span><span>                </span><span>None</span><span>
</span></span></span><span><span><span>            </span>}<span> </span><span>else</span><span> </span>{<span>
</span></span></span><span><span><span>                </span><span>Some</span>(Operator::Project<span> </span>{<span>
</span></span></span><span><span><span>                    </span>child: <span>Box</span>::new(Operator::Select<span> </span>{<span>
</span></span></span><span><span><span>                        </span>child: <span>child</span>.clone(),<span>
</span></span></span><span><span><span>                        </span>predicate: <span>predicate</span>.clone(),<span>
</span></span></span><span><span><span>                    </span>}),<span>
</span></span></span><span><span><span>                    </span>projects: <span>projects</span>.clone(),<span>
</span></span></span><span><span><span>                </span>})<span>
</span></span></span><span><span><span>            </span>}<span>
</span></span></span><span><span><span>        </span>}<span>
</span></span></span><span><span><span>        </span>_<span> </span><span>=&gt;</span><span> </span><span>None</span>,<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>It seems to be basically usable now, which is delightful. Let's try a more complex example, such as trying SQL with <code>Join</code>:</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/select_push_down_join.png" alt="Select push down"></p><p>Because <code>Join</code> does not generate additional <code>derived columns</code> like <code>Project</code>, the logic for checking will be relatively simpler. Let's first implement an optimization that attempts to push <code>Select</code> down to the left child of <code>Join</code>:</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>push_down_select_join_left</span>(op: <span>&amp;</span><span>Operator</span>)<span> </span>-&gt; <span>Option</span><span>&lt;</span>Operator<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>match</span><span> </span>op<span> </span>{<span>
</span></span></span><span><span><span>        </span>Operator::Select<span> </span>{<span>
</span></span></span><span><span><span>            </span>child: <span>join</span><span> </span><span>@</span><span> </span><span>box</span><span> </span>Operator::Join<span> </span>{<span> </span>left,<span> </span>right,<span> </span><span>..</span><span> </span>},<span>
</span></span></span><span><span><span>            </span>predicate,<span>
</span></span></span><span><span><span>        </span>}<span> </span><span>=&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>            </span><span>let</span><span> </span>left_attributes: <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span><span>=</span><span> </span>derive_attributes(<span>&amp;</span>left);<span>
</span></span></span><span><span><span>            </span><span>let</span><span> </span>predicate_used_columns: <span>Vec</span><span>&lt;</span><span>String</span><span>&gt;</span><span> </span><span>=</span><span> </span>predicate.used_columns();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>            </span><span>// Check if the predicate only uses column from left.
</span></span></span><span><span><span></span><span>            </span><span>let</span><span> </span>only_left<span> </span><span>=</span><span> </span>predicate_used_columns<span>
</span></span></span><span><span><span>                </span>.iter()<span>
</span></span></span><span><span><span>                </span>.all(<span>|</span>used_column<span>|</span><span> </span>left_attributes.iter().any(<span>|</span>attr<span>|</span><span> </span>attr.name<span> </span><span>==</span><span> </span><span>*</span>used_column));<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>            </span><span>if</span><span> </span>only_left<span> </span>{<span>
</span></span></span><span><span><span>                </span><span>Some</span>(Operator::Join<span> </span>{<span>
</span></span></span><span><span><span>                    </span>left: <span>Box</span>::new(Operator::Select<span> </span>{<span>
</span></span></span><span><span><span>                        </span>child: <span>left</span>.clone(),<span>
</span></span></span><span><span><span>                        </span>predicate: <span>predicate</span>.clone(),<span>
</span></span></span><span><span><span>                    </span>}),<span>
</span></span></span><span><span><span>                    </span>right: <span>right</span>.clone(),<span>
</span></span></span><span><span><span>                    </span><span>..</span>join.clone()<span>
</span></span></span><span><span><span>                </span>})<span>
</span></span></span><span><span><span>            </span>}<span> </span><span>else</span><span> </span>{<span>
</span></span></span><span><span><span>                </span><span>None</span><span>
</span></span></span><span><span><span>            </span>}<span>
</span></span></span><span><span><span>        </span>}<span>
</span></span></span><span><span><span>        </span>_<span> </span><span>=&gt;</span><span> </span><span>None</span>,<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>Everything looks great, but the devil often hides in the details. Let's take a look at the output of this example in <code>PostgreSQL</code>:</p><div><pre tabindex="0"><code data-lang="fallback"><span><span>leiysky=# create table t(a int);
</span></span><span><span>CREATE TABLE
</span></span><span><span>leiysky=# create table t1(a int);
</span></span><span><span>CREATE TABLE
</span></span><span><span>leiysky=# insert into t values(1);
</span></span><span><span>INSERT 0 1
</span></span><span><span>leiysky=# insert into t1 values(1);
</span></span><span><span>INSERT 0 1
</span></span><span><span>leiysky=# select * from t, t1 where t.a = 1;
</span></span><span><span> a | a
</span></span><span><span>---+---
</span></span><span><span> 1 | 1
</span></span><span><span>(1 row)
</span></span></code></pre></div><p>The final result returned has two attributes called <code>a</code>. In the current implementation of <code>The IR</code>, we cannot know which side this <code>Select</code> should be pushed down to. Because when we check which side the predicate that depends on <code>a</code> can be pushed down to, we will find that both sides of the <code>Join</code> can satisfy it. Although it is not allowed to have multiple columns with the same name in the same table, there is no such restriction between different tables.</p><p>As the open-source database product with the highest support for ANSI SQL, PostgreSQL naturally handles this kind of problem very well. Through the <code>EXPLAIN</code> statement, we can see that it pushes down the <code>Select</code> to the correct place.</p><div><pre tabindex="0"><code data-lang="fallback"><span><span>leiysky=# explain(verbose) select * from t, t1 where t.a = 1;
</span></span><span><span>                              QUERY PLAN
</span></span><span><span>----------------------------------------------------------------------
</span></span><span><span> Nested Loop  (cost=0.00..491.78 rows=33150 width=8)
</span></span><span><span>   Output: t.a, t1.a
</span></span><span><span>   -&gt;  Seq Scan on public.t1  (cost=0.00..35.50 rows=2550 width=4)
</span></span><span><span>         Output: t1.a
</span></span><span><span>   -&gt;  Materialize  (cost=0.00..41.94 rows=13 width=4)
</span></span><span><span>         Output: t.a
</span></span><span><span>         -&gt;  Seq Scan on public.t  (cost=0.00..41.88 rows=13 width=4)
</span></span><span><span>               Output: t.a
</span></span><span><span>               Filter: (t.a = 1)
</span></span><span><span>(9 rows)
</span></span></code></pre></div><p>As a perfect SQL IR, <code>The IR</code> must also have its own solution. If we carefully observe this query, we will find that the predicate of <code>Select</code> is represented by a qualified name. If an unqualified name is used, PostgreSQL will throw such an error:</p><div><pre tabindex="0"><code data-lang="fallback"><span><span>leiysky=# select * from t, t1 where a = 1;
</span></span><span><span>ERROR:  column reference "a" is ambiguous
</span></span><span><span>LINE 1: select * from t, t1 where a = 1;
</span></span></code></pre></div><p>Because in the current context, <code>a</code> is ambiguous, but <code>t.a</code> is not. Let's try using qualified name to represent attribute property to solve this problem. For this purpose, we need to make some code changes.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>struct</span> <span>QualifiedName</span>(<span>pub</span><span> </span><span>Vec</span><span>&lt;</span><span>String</span><span>&gt;</span>);<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>impl</span><span> </span>QualifiedName<span> </span>{<span>
</span></span></span><span><span><span>    </span><span>/// If the current name can be used to refer another name
</span></span></span><span><span><span></span><span>    </span><span>pub</span><span> </span><span>fn</span> <span>can_refer</span>(<span>&amp;</span>self,<span> </span>other: <span>&amp;</span><span>Self</span>)<span> </span>-&gt; <span>bool</span> {<span>
</span></span></span><span><span><span>        </span>self.<span>0.</span>len()<span> </span><span>&lt;=</span><span> </span>other.<span>0.</span>len()<span> 
</span></span></span><span><span><span>          </span><span>&amp;&amp;</span><span> </span>self.<span>0.</span>iter().zip(other.<span>0.</span>iter()).all(<span>|</span>(a,<span> </span>b)<span>|</span><span> </span>a<span> </span><span>==</span><span> </span>b)<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>struct</span> <span>ColumnDefinition</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>/// Use qualified name
</span></span></span><span><span><span></span><span>    </span><span>pub</span><span> </span>name: <span>QualifiedName</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>column_type: <span>Type</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>not_null: <span>bool</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>fn</span> <span>resolve_attribute</span>(<span>
</span></span></span><span><span><span>    </span>attributes: <span>&amp;</span>[ColumnDefinition],<span>
</span></span></span><span><span><span>    </span>name: <span>&amp;</span><span>QualifiedName</span>,<span>
</span></span></span><span><span><span></span>)<span> </span>-&gt; <span>Option</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>let</span><span> </span>candidates: <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span><span>=</span><span> </span>attributes<span>
</span></span></span><span><span><span>        </span>.iter()<span>
</span></span></span><span><span><span>        </span>.filter(<span>|</span>attr<span>|</span><span> </span>attr.name.can_refer(name))<span>
</span></span></span><span><span><span>        </span>.collect();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>    </span><span>if</span><span> </span>candidates.len()<span> </span><span>==</span><span> </span><span>1</span><span> </span>{<span>
</span></span></span><span><span><span>        </span><span>Some</span>(candidates[<span>0</span>].clone())<span>
</span></span></span><span><span><span>    </span>}<span> </span><span>else</span><span> </span><span>if</span><span> </span>candidates.len()<span> </span><span>&gt;</span><span> </span><span>1</span><span> </span>{<span>
</span></span></span><span><span><span>        </span>panic!(<span>"Watch out, ambiguous reference found!"</span>)<span>
</span></span></span><span><span><span>    </span>}<span>else</span><span> </span>{<span>
</span></span></span><span><span><span>        </span><span>None</span><span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>fn</span> <span>push_down_select_join_left</span>(op: <span>&amp;</span><span>Operator</span>)<span> </span>-&gt; <span>Option</span><span>&lt;</span>Operator<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>match</span><span> </span>op<span> </span>{<span>
</span></span></span><span><span><span>        </span>Operator::Select<span> </span>{<span>
</span></span></span><span><span><span>            </span>child: <span>join</span><span> </span><span>@</span><span> </span><span>box</span><span> </span>Operator::Join<span> </span>{<span> </span>left,<span> </span>right,<span> </span><span>..</span><span> </span>},<span>
</span></span></span><span><span><span>            </span>predicate,<span>
</span></span></span><span><span><span>        </span>}<span> </span><span>=&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>            </span><span>let</span><span> </span>left_attributes: <span>Vec</span><span>&lt;</span>ColumnDefinition<span>&gt;</span><span> </span><span>=</span><span> </span>derive_attributes(<span>&amp;</span>left);<span>
</span></span></span><span><span><span>            </span><span>let</span><span> </span>predicate_used_columns: <span>Vec</span><span>&lt;</span>QualifiedName<span>&gt;</span><span> </span><span>=</span><span> </span>predicate.used_columns();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>            </span><span>// Check if the predicate only uses column from left.
</span></span></span><span><span><span></span><span>            </span><span>let</span><span> </span>only_left<span> </span><span>=</span><span> </span>predicate_used_columns<span>
</span></span></span><span><span><span>                </span>.iter()<span>
</span></span></span><span><span><span>                </span>.all(<span>|</span>used_column<span>|</span><span> </span>resolve_attribute(<span>&amp;</span>left_attributes,<span> </span>used_column).is_some());<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>            </span><span>if</span><span> </span>only_left<span> </span>{<span>
</span></span></span><span><span><span>                </span><span>Some</span>(Operator::Join<span> </span>{<span>
</span></span></span><span><span><span>                    </span>left: <span>Box</span>::new(Operator::Select<span> </span>{<span>
</span></span></span><span><span><span>                        </span>child: <span>left</span>.clone(),<span>
</span></span></span><span><span><span>                        </span>predicate: <span>predicate</span>.clone(),<span>
</span></span></span><span><span><span>                    </span>}),<span>
</span></span></span><span><span><span>                    </span>right: <span>right</span>.clone(),<span>
</span></span></span><span><span><span>                    </span><span>..</span>join.clone()<span>
</span></span></span><span><span><span>                </span>})<span>
</span></span></span><span><span><span>            </span>}<span> </span><span>else</span><span> </span>{<span>
</span></span></span><span><span><span>                </span><span>None</span><span>
</span></span></span><span><span><span>            </span>}<span>
</span></span></span><span><span><span>        </span>}<span>
</span></span></span><span><span><span>        </span>_<span> </span><span>=&gt;</span><span> </span><span>None</span>,<span>
</span></span></span><span><span><span>    </span>}<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>In this way, the above problem is solved, and we have the ability to handle complex attribute references. However, there is still a long way to go before achieving a perfect solution. Let's take another example:</p><div><pre tabindex="0"><code data-lang="fallback"><span><span>leiysky=# select * from (select * from t1) as t, t1 where t.a = 1;
</span></span><span><span> a | a
</span></span><span><span>---+---
</span></span><span><span> 1 | 1
</span></span><span><span>(1 row)
</span></span></code></pre></div><p>Although SQL does not allow the use of multiple identical table names in the same <code>FROM</code> clause, we can bypass this by using an <code>inlined view</code> or <code>CTE</code>. According to our current implementation, when processing <code>t.a = 1</code>, we have two <code>t1.a</code> attributes instead of <code>t.a</code> because we did not handle the alias of the inlined view. Therefore, we need to add a <code>Project</code> specifically for renaming attributes.</p><p>So the problem arises again, because we only renamed some columns and treated them as derived columns, which added a lot of burden to our Select pushdown. Therefore, we must modify the definition of <code>The IR</code> and various related codes to serve the mapping of names.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>enum</span> <span>Operator</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>Project<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span><span>// (Expression, Source name, Alias)
</span></span></span><span><span><span></span><span>        </span>projects: <span>Vec</span><span>&lt;</span>(ScalarExpr,<span> </span>QualifiedName,<span> </span>QualifiedName)<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span><span>// Others
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>These problems can be solved by writing a little more code, but take a look at the next example. I believe that most people will go crazy just like me:</p><div><pre tabindex="0"><code data-lang="fallback"><span><span>leiysky=# select a from t natural join t1;
</span></span><span><span> a
</span></span><span><span>---
</span></span><span><span> 1
</span></span><span><span>(1 row)
</span></span><span><span>
</span></span><span><span>leiysky=# select t.a from t natural join t1;
</span></span><span><span> a
</span></span><span><span>---
</span></span><span><span> 1
</span></span><span><span>(1 row)
</span></span><span><span>
</span></span><span><span>leiysky=# select t1.a from t natural join t1;
</span></span><span><span> a
</span></span><span><span>---
</span></span><span><span> 1
</span></span><span><span>(1 row)
</span></span><span><span>
</span></span><span><span>leiysky=# select * from t natural join t1;
</span></span><span><span> a
</span></span><span><span>---
</span></span><span><span> 1
</span></span><span><span>(1 row)
</span></span><span><span>
</span></span><span><span>leiysky=# select a from t join t1 on t.a = t1.a;
</span></span><span><span>ERROR:  column reference "a" is ambiguous
</span></span><span><span>LINE 1: select a from t join t1 on t.a = t1.a;
</span></span></code></pre></div><p>Of course, we can add all kinds of strange restrictions to the code, create difficult-to-maintain loopholes to maintain this property, and ensure the correctness of these properties while optimizing. But for lazy programmers, finding a simpler design is a better choice.</p><p>Welcome to the Deep Water Zone.</p><h3 id="the-ir-made-simple">The IR made simple</h3><p>The initial version of <code>The IR</code> was very concise and elegant, but in order to achieve more functionality and support more complex requirements, we added a lot of information that we don't want to focus on.</p><p>In general, the ideal state of The IR should be:</p><ul><li>Having a concise algebraic structure</li><li>Operator nodes being completely independent from each other</li><li>Not having to deal with names (only for debugging and display purposes)</li></ul><p>Let's take a moment to reflect, does IR really rely on name? We initially used name to represent attributes mainly based on intuition and reused the table schema. However, there is a lot of useless information embedded in the name, which is of no help to our optimization. It's similar to various symbol names in programming languages that eventually become memory addresses and register numbers during program execution.</p><p>Without a name, attributes cannot be distinguished. Is a name really such an inconvenient thing?</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/name_inconvenient.png" alt="Is Name such a inconvenient thing?"></p><blockquote><p>NOTE: the above image means "Is a name really such an inconvenient thing?"</p></blockquote><p>Ultimately, what we need is to assign a unique id to each attribute, whether it is an integer or a string. Our sole purpose is to differentiate and reference attributes using these ids. All name resolution will be handled in AST lowering; I only want the attribute id!</p><p>After the redesign, we have changed the way attributes are represented and also made some changes to <code>The IR</code>'s definition. By default, we use int64 as the attribute id type.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>type</span> <span>Id</span><span> </span><span>=</span><span> </span><span>i64</span>;<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>struct</span> <span>Attribute</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>id: <span>Id</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>column_type: <span>Type</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>nullable: <span>Type</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>enum</span> <span>ScalarExpr</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>ColumnRef(Id),<span>
</span></span></span><span><span><span>    </span><span>// Others
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>The design of the id generally cannot be separated from the corresponding context. In SQL IR, the common design methods for attribute id can mainly be divided into two categories:</p><ul><li>One is based on the abstraction of tuple attribute that we have used before, using the index of attribute in tuple as its id. We call this kind of id as <code>local id</code>. The characteristic of this design is that the id of the same logical attribute will change with different operators it belongs to. The advantage of this design is that it can be inferred from the operator tree without relying on external states for maintenance. However, a disadvantage is that frequent remapping of ids is required when converting operators.</li><li>Another method is to maintain a global id generator and assign a unique id to all attributes in SQL IR. We call this kind of id as <code>global id</code>. The advantage of this design is that it decouples attributes from tuple schema and allows representation using an unordered collection structure like <code>HashMap&lt;Id, Attribute&gt;</code>. It also helps property derivation through set operations and reduces maintenance complexity. However, a disadvantage is that operator trees using global ids depend on external states and cannot exist independently.</li></ul><p>The use of these two different designs will have a significant impact on the specific implementation of the optimizer.</p><p>For example, regarding this optimization:</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/split_disjunction.png" alt="Split disjuntion"></p><p>When there are suitable indexes available, this optimization can avoid full table scans and improve performance.</p><p>If using the <code>local id</code> design, implementing this optimization is very simple, just need to copy the entire operator tree and finally connect them with <code>UnionAll</code>.</p><p>But if using the <code>global id</code> design, this is a non-trivial operation, even can be said to be very painful. In order to distinguish different attributes, we must generate new IDs for all attributes while copying the operator tree at the same time, and then replace all places that reference these attributes with new IDs. This will cause many troubles when the query is more complex.</p><p>For example, when optimizing join order:</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/commute_join.png" alt="Commute join"></p><p>According to the commutative law of <code>Join</code> operators, we can legally exchange the left and right child of a <code>Join</code>.</p><p>When using <code>global id</code> design, because attributes can be represented as an unordered set, this operation has no impact on property derivation.</p><p>However, when using <code>local id</code> design, this operation becomes extremely painful.</p><p>Apart from optimization-related parts, there are also significant differences in representing <code>correlated subqueries</code>. Correlated subquery is a special type of subquery that can access attributes outside its own scope. We refer to accessing such special attributes as <code>outer reference</code>.</p><p><img src="https://xuanwo.io/2024/02-what-i-talk-about-when-i-talk-about-query-optimizer-part-1/correlated_subquery.png" alt="Correlated subquery"></p><p>Many programming languages also support similar operations, which allow accessing variables that are not defined within the function by binding them to a specific environment. This special type of function is called a <code>closure</code>.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>main</span>()<span> </span>{<span>
</span></span></span><span><span><span>    </span><span>let</span><span> </span>a<span> </span><span>=</span><span> </span><span>1</span>;<span>
</span></span></span><span><span><span>    </span><span>let</span><span> </span>f<span> </span><span>=</span><span> </span><span>||</span><span> </span>{<span>
</span></span></span><span><span><span>        </span><span>let</span><span> </span>b<span> </span><span>=</span><span> </span>a;<span> </span><span>// a is captured from outside
</span></span></span><span><span><span></span><span>        </span>println!(<span>"</span><span>{}</span><span>"</span>,<span> </span>b);<span>
</span></span></span><span><span><span>    </span>};<span> </span><span>// f is a closure
</span></span></span><span><span><span></span><span>
</span></span></span><span><span><span>    </span>f();<span> </span><span>// stdout: 1
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>The design using <code>global id</code> can determine whether the subquery is correlated through attribute property calculation. However, when using local id design, we generally need to maintain an additional <code>scope id</code> in the <code>ColumnRef</code> of scalar expression, which is very cumbersome to implement.</p><p><em>Correlated subquery is a very big topic, and we may discuss it in subsequent articles.</em></p><p>It can be seen that both designs have their own advantages and disadvantages. In engineering practice, we need to choose a suitable design based on our own needs. Personally, I think <code>global id</code> is a better design because it can easily solve problems in most cases.</p><p>After the transformation using <code>global id</code>, the code of <code>The IR</code> can be greatly simplified.</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>pub</span><span> </span><span>type</span> <span>Id</span><span> </span><span>=</span><span> </span><span>i64</span>;<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>struct</span> <span>Context</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>id_gen: <span>Id</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>struct</span> <span>Attribute</span><span> </span>{<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>id: <span>Id</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>column_type: <span>Type</span>,<span>
</span></span></span><span><span><span>    </span><span>pub</span><span> </span>nullable: <span>Type</span>,<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>type</span> <span>AttributeSet</span><span> </span><span>=</span><span> </span>HashMap<span>&lt;</span>Id,<span> </span>Attribute<span>&gt;</span>;<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>enum</span> <span>ScalarExpr</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>ColumnRef(Id),<span>
</span></span></span><span><span><span>    </span>Literal(Value,<span> </span>Type),<span>
</span></span></span><span><span><span>    </span>Function(Signature,<span> </span><span>Vec</span><span>&lt;</span>Self<span>&gt;</span>),<span>
</span></span></span><span><span><span>    </span>Subquery(Quantifier,<span> </span><span>Box</span><span>&lt;</span>Operator<span>&gt;</span>),<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>pub</span><span> </span><span>enum</span> <span>Operator</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>Get<span> </span>{<span>
</span></span></span><span><span><span>        </span>table: <span>String</span>,<span>
</span></span></span><span><span><span>        </span>output_columns: <span>AttributeSet</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Select<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>predicate: <span>ScalarExpr</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Project<span> </span>{<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>projects: <span>Vec</span><span>&lt;</span>(ScalarExpr,<span> </span>Id)<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Join<span> </span>{<span>
</span></span></span><span><span><span>        </span>kind: <span>JoinKind</span>,<span>
</span></span></span><span><span><span>        </span>condition: <span>ScalarExpr</span>,<span>
</span></span></span><span><span><span>        </span>left: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>right: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>UnionAll<span> </span>{<span>
</span></span></span><span><span><span>        </span>left: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>right: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span>    </span>Aggregate<span> </span>{<span>
</span></span></span><span><span><span>        </span>group_by: <span>Vec</span><span>&lt;</span>ScalarExpr<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>aggr_exprs: <span>Vec</span><span>&lt;</span>(ScalarExpr,<span> </span>Id)<span>&gt;</span>,<span>
</span></span></span><span><span><span>        </span>child: <span>Box</span><span>&lt;</span>Self<span>&gt;</span>,<span>
</span></span></span><span><span><span>    </span>},<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre></div><p>After transferring the complexity to the AST lowerer, we can confidently say that <code>The IR</code> is now a production-ready SQL IR. It supports all SQL operations and common optimizations, has a user-friendly API, and is also very easy to understand.</p><p>What's more important is that no one understands <code>The IR</code> better than the readers of this article, and any reader can easily extend The IR according to their own needs.</p><h2 id="afterword">Afterword</h2><p>Finally, we have reached the end of this article.</p><p>As the opening of the series, in this article I simply discussed some focal points in SQL IR design without delving into the details of various algorithms.</p><p>However, sharing the design process of IR is an interesting thing. Understanding multiple IRs is like understanding why a roadside tree grows crooked. To someone seeing it for the first time, the tree's unusual shape is puzzling. However, locals who have lived around it are aware of its backstory: when it was young, the tree became bent due to the habit of hanging preserved meat on its branches.</p><p>This little thing is an important reason for the final result, but it is too insignificant to be voluntarily shared by those who know - of course, in reality, no one often cares about the reasons behind it either.</p><p>Database development is a niche field with many engineering practices and experiences. These experiences are rarely circulated among people and I don't want them to disappear with changing times like America's moon landing technology; hence my original intention to write this series of articles came about.</p><p>In the next article, I will share related content about optimizer architecture; please stay tuned.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Dr Strangelove at 60 (103 pts)]]></title>
            <link>https://www.bbc.com/culture/article/20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece</link>
            <guid>39176730</guid>
            <pubDate>Mon, 29 Jan 2024 14:38:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.com/culture/article/20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece">https://www.bbc.com/culture/article/20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece</a>, See on <a href="https://news.ycombinator.com/item?id=39176730">Hacker News</a></p>
<div id="readability-page-1" class="page"><section id="culturearticle20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece"><div id="headline-culturearticle20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece"><div><p>(Image credit: </p><!-- --><p>Getty Images</p><!-- --><p>)</p></div><div><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7dd3k.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7dd3k.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7dd3k.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7dd3k.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7dd3k.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7dd3k.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7dd3k.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7dd3k.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="Peter Sellers in Dr Strangelove" src="https://ychef.files.bbci.co.uk/976x549/p0h7dd3k.jpg" alt="Peter Sellers in Dr Strangelove" id=""></picture></div></div><div><article><div><p>As Stanley Kubrick's satirical masterpiece Dr Strangelove turns 60, an ongoing mystery endures: who was the real-life inspiration for his demonic central character?</p><div><p>I</p><div><p>In 1999, a reporter from Scientific American asked the 91-year-old physicist Edward Teller whether it was true that <a href="https://www.scientificamerican.com/article/infamy-and-honor-at-the-a/">he had been the real-life template for Dr Strangelove</a>, the chilling scientific adviser played by Peter Sellers in Stanley Kubrick's movie Dr Strangelove or: How I Learned to Stop Worrying and Love the Bomb.</p>
<p>Rumours had been circulating ever since the movie's release on 29 January 1964. After all, Teller had worked with Robert Oppenheimer on the atomic bomb (he is played by Benny Safdie in <a href="https://www.bbc.com/culture/article/20230719-a-magnificent-story-of-a-tragic-american-genius">Christopher Nolan's film</a>) and went on to spearhead the far more powerful hydrogen bomb. He had a terrifying reputation and a Hungarian accent as pronounced as Strangelove's German one. When Teller made headlines again in the 1980s as the brains behind President Reagan's so-called "Star Wars" defence initiative, several newspapers <a href="https://www.newspapers.com/newspage/570682311/">called him</a> "the real Dr Strangelove".</p>
<p><strong>More like this:<br></strong>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="https://www.bbc.com/culture/article/20230726-the-one-thing-oppenheimer-gets-wrong">The one thing Oppenheimer gets wrong<br></a>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="https://www.bbc.com/culture/article/20190808-was-napoleon-the-greatest-film-never-made">Was Kubrick's Napoleon the greatest film never made?<br></a>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="https://www.bbc.com/culture/article/20211112-the-overlooked-masterpiece-warning-of-a-cold-war-apocalypse">The overlooked masterpiece warning of Cold War apocalypse</a></p>
<p>But Teller exploded at the reporter. "My name is not Strangelove," he snapped. "I don't know about Strangelove. I'm not interested in Strangelove. What else can I say?…&nbsp;Look, say it three times more and I throw you out of this office." Teller died in 2003, a year before the publication of Peter Goodchild's biography Edward Teller: The Real Dr Strangelove, on the cover of which he is pictured wearing Sellers' spectacles in a still from the movie. It is unlikely he would have appreciated it.</p></div></div><div id="culture/article/20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece-p0h7dc81"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7dc81.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7dc81.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7dc81.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7dc81.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7dc81.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7dc81.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7dc81.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7dc81.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="Benny Safdie played Edward Teller in Christopher Nolan's Oppenheimer (Credit: Universal)" src="https://ychef.files.bbci.co.uk/976x549/p0h7dc81.jpg" alt="Benny Safdie played Edward Teller in Christopher Nolan's Oppenheimer (Credit: Universal)" id=""></picture><div><p>Benny Safdie played Edward Teller in Christopher Nolan's Oppenheimer (Credit: Universal)</p></div></div><div><p>It might seem strange that a fictional character was required to sell the story of one of the most consequential individuals of the 20th Century, but even now, on its 60th anniversary, Dr Strangelove is synonymous with the politics of nuclear war. Later this year, Armando Iannucci's stage version <a href="https://www.theguardian.com/stage/2023/sep/26/steve-coogan-armando-iannucci-dr-strangelove-play">will open in the West End</a>, with Steve Coogan taking on Peter Sellers' trio of roles.</p></div><div><blockquote><h2>Nothing is as unforgettable as the late-arriving Dr Strangelove himself: the sinister, amoral nuclear scientist</h2></blockquote></div><div><p>Kubrick's masterstroke was to perceive grisly comedy and lethal irony where most people saw only horror. Prior to Dr Strangelove, the only significant movie about world-ending nuclear war was Stanley Kramer's sombre, elegiac On the Beach, from 1959. Kubrick saw the value in making it funny. "If the modern world could be summed up in a single word it would be absurd," he wrote in his notes. "The only truly creative response to this is the comic vision of life." The film is packed with memorable scenes, lines and performances but nothing as unforgettable as the late-arriving Dr Strangelove himself: the sinister, amoral nuclear scientist who devolves into <em>sieg heiling</em> lunacy.</p>
<p>Goodchild's biography is excellent but its subtitle owes more to marketing than accuracy, because Teller was not the only "real" Dr Strangelove. Other possibilities mooted over the years are the mathematician John von Neumann, the nuclear strategist Herman Kahn, the German rocket scientist Wernher von Braun and the foreign policy expert Henry Kissinger. Despite all the speculation, Kubrick never clarified the character's origins. So did he base Strangelove on one of them, all of them, or none of them? Does the real Dr Strangelove even exist?</p>
<p><strong>Kubrick's 'White House Rasputin'</strong></p>
<p>One reason for the mystery is that Strangelove was not present in Kubrick's source material. Writing as Peter Bryant, the Welsh former RAF officer Peter George published a novel in 1958 that was called Two Hours to Doom in the UK and Red Alert in the US. It was inspired by a recent media panic about the possibility that an accidental war could be set in motion by "a nervous, psychotic or fanatical launch officer", as Carl Dreher put it in the Nation.</p>
<p>In Red Alert, a back-up plan to secure the US's nuclear deterrent in the event of the president's death results in a situation where one demented general can order a strike on the USSR that only he can call off. The novel tracks the desperate efforts of the American and Soviet governments to avert a full-scale nuclear exchange. It sold a quarter of a million copies in the US alone.</p></div><div id="culture/article/20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece-p0h7db6d"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7db6d.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7db6d.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7db6d.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7db6d.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7db6d.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7db6d.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7db6d.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7db6d.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="Despite all the speculation, Kubrick (pictured on set) never clarified the character's origins (Credit: Getty Images)" src="https://ychef.files.bbci.co.uk/976x549/p0h7db6d.jpg" alt="Despite all the speculation, Kubrick (pictured on set) never clarified the character's origins (Credit: Getty Images)" id=""></picture><div><p>Despite all the speculation, Kubrick (pictured on set) never clarified the character's origins (Credit: Getty Images)</p></div></div><div><p>Kubrick was already plotting a movie about nuclear war when, in 1961, a defence strategist in London gave him George's novel with the disclaimer that such a dire chain of events was impossible. Kubrick didn't care&nbsp;– the story confirmed his belief that the logic of nuclear deterrence was insane&nbsp;– so he optioned the novel, and asked George to collaborate on a screenplay. But Kubrick agonised over whether to make a straight adaptation, a more realistic drama or a satirical comedy. In spring 1962 he came up with a new character, a "White House Rasputin" called Dr Otto Strangelove, who became his gateway to a "<a href="https://faroutmagazine.co.uk/stanley-kubrick-realised-dr-strangelove-was-comedy/">nightmare comedy</a>". Kubrick hired the satirist Terry Southern to spice up the screenplay with jokes about sex and death.</p></div><div><blockquote><h2>The most compelling candidate for a real-life Strangelove is the only one who sounded nothing like him</h2></blockquote></div><div><p>The five potential models for Strangelove&nbsp;– Teller, Von Neumann, Kissinger, Von Braun and Kahn&nbsp;– had superficial similarities. They all worked in weapons development or Cold War strategy, and all but Kahn had thick European accents. Teller and von Neumann, two of the brilliant Hungarian refugees who worked on the Manhattan Project, both argued that the pursuit of knowledge was a scientist's paramount duty, regardless of the consequences. "I do not want the hydrogen bomb because it would kill more people," Teller once insisted. "I wanted the hydrogen bomb because it was <em>new</em>… I am afraid of ignorance."</p></div><div id="culture/article/20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece-p0h7db9r"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7db9r.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7db9r.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7db9r.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7db9r.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7db9r.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7db9r.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7db9r.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7db9r.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="Peter Sellers played the sinister Dr Strangelove along with two other characters in Kubrick's 1964 film (Credit: Getty Images)" src="https://ychef.files.bbci.co.uk/976x549/p0h7db9r.jpg" alt="Peter Sellers played the sinister Dr Strangelove along with two other characters in Kubrick's 1964 film (Credit: Getty Images)" id=""></picture><div><p>Peter Sellers played the sinister Dr Strangelove along with two other characters in Kubrick's 1964 film (Credit: Getty Images)</p></div></div><div><p>Of the five, Kissinger is the least plausible inspiration. The future secretary of state was not a national figure in 1964, and was not linked to the character until the 1970s. Von Neumann, the genius – who made foundational contributions to computing, game theory, climate modelling and AI – used a wheelchair (like Strangelove) prior to his death from cancer in 1957 but he was a famously amiable character. Teller was more intimidating, and widely associated with the H-bomb, but nobody involved in the movie brought up his name. Peter Sellers explicitly cited Von Braun (like Strangelove, a former Nazi) but he also claimed that he took the accent from <a href="https://www.bbc.com/culture/article/20200227-weegee-photos-of-crime-scenes-and-people-on-the-margins">Weegee</a>, the celebrated Austrian-American photographer who documented the making of the movie, and the black glove from Rotwang in Fritz Lang's 1927 sci-fi classic Metropolis, one of cinema's first "mad scientists".</p>
<p><strong>The most likely prototype</strong></p>
<p>The most compelling candidate for a real-life Strangelove is the only one who sounded nothing like him. Born in New Jersey in 1922, Herman Kahn was raised in the Bronx. His chewy New York accent, working-class origins and immense girth contributed to his becoming the US's first celebrity nuclear strategist. Journalists compared him to the comedians Jackie Gleason and Zero Mostel, not just physically but temperamentally. "I can be really funny about nuclear war," <a href="https://www.nytimes.com/1968/12/01/archives/oneman-think-tank-oneman-think-tank.html">Kahn bragged</a>.</p>
<p>Kahn became famous in 1960 with the publication of his bestselling book On Thermonuclear War. Kahn, who was wargaming potential conflicts for the US government's RAND Corporation, believed that talking about nuclear war in terms of the end of humanity was dangerous, and that it was reckless not to consider a plan for victory and survival. In his mind, he was both a pragmatist and an optimist. But his book managed to offend hawks and doves alike, not to mention his own colleagues. Some readers found it psychopathic and obscene. <a href="https://www.washingtonpost.com/archive/local/1983/07/08/herman-kahn-dies-leading-strategic-theorist/49d3c849-d180-4fcb-ad3e-b9fad28ee9b2/">One reviewer called it</a> "a moral tract on mass murder: how to plan it, how to commit it, how to get away with it, how to justify it".</p></div><div id="culture/article/20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece-p0h7db1p"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7db1p.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7db1p.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7db1p.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7db1p.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7db1p.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7db1p.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7db1p.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7db1p.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="Foreign policy expert Henry Kissinger was one of the many real people touted as the inspiration for the character (Credit: Getty Images)" src="https://ychef.files.bbci.co.uk/976x549/p0h7db1p.jpg" alt="Foreign policy expert Henry Kissinger was one of the many real people touted as the inspiration for the character (Credit: Getty Images)" id=""></picture><div><p>Foreign policy expert Henry Kissinger was one of the many real people touted as the inspiration for the character (Credit: Getty Images)</p></div></div><div><p>Because the scenarios imagined by the think-tank wargamers were a kind of speculative fiction, their research included novels. Kahn approvingly cited Red Alert in On Thermonuclear War. In George's novel, the Soviets have developed an annihilating superweapon: a cluster of bombs, encased in cobalt, that could produce enough radiation to kill everyone on earth. Although the cobalt bomb never existed, it was an object of horrified fascination from the 1950s through to the early 70s, featuring in movies from On the Beach to Beneath the Planet of the Apes. Kahn argued that such a weapon would be a useless deterrent because nobody would ever use it, but he gave it a name that was too dramatic for its own good: the Doomsday Machine.</p>
<p>Kubrick borrowed Kahn's coinage for the cobalt bomb in his movie. General Buck Turgidson (George C Scott) quotes the most hair-raising sections from Kahn's book almost verbatim, Strangelove lifts from the chapter about underground shelters, and President Muffley (Sellers again) references Kahn's most notorious line: "Will the survivors envy the dead?" The word "megadeath", meaning one million deaths per nuclear explosion, was Kahn's invention, too. Strangelove even works at the RAND-like "Bland Corporation" (not all the movie's jokes are good). In one draft of the screenplay, Strangelove complains about the backlash to his Kahn-like book The Facts on Nuclear War. The numerous debts to On Thermonuclear War were not lost on Kahn, who suggested to an aghast Kubrick that he receive a percentage of the movie's box office.</p></div><div id="culture/article/20240129-dr-strangelove-at-60-the-mystery-behind-kubricks-cold-war-masterpiece-p0h7d9yq"><picture><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7d9yq.webp" type="image/webp"><source media="(min-width:1200px)" srcset="https://ychef.files.bbci.co.uk/1600x900/p0h7d9yq.jpg" type="image/jpeg"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7d9yq.webp" type="image/webp"><source media="(min-width:880px)" srcset="https://ychef.files.bbci.co.uk/1280x720/p0h7d9yq.jpg" type="image/jpeg"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7d9yq.webp" type="image/webp"><source media="(min-width:576px)" srcset="https://ychef.files.bbci.co.uk/976x549/p0h7d9yq.jpg" type="image/jpeg"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7d9yq.webp" type="image/webp"><source media="(min-width:224px)" srcset="https://ychef.files.bbci.co.uk/624x351/p0h7d9yq.jpg" type="image/jpeg"><img loading="lazy" draggable="false" title="The nuclear strategist Herman Kahn makes the most compelling candidate for a real-life Strangelove (Credit: Getty Images)" src="https://ychef.files.bbci.co.uk/976x549/p0h7d9yq.jpg" alt="The nuclear strategist Herman Kahn makes the most compelling candidate for a real-life Strangelove (Credit: Getty Images)" id=""></picture><div><p>The nuclear strategist Herman Kahn makes the most compelling candidate for a real-life Strangelove (Credit: Getty Images)</p></div></div><div><p>It's no surprise, then, that when the movie came out, both The Daily Mail and The Times claimed that Kahn was the prototype for Strangelove. But the Spectator <a href="http://archive.spectator.co.uk/article/28th-february-1964/11/dr-strangelove-and-dr-kahn">dismissed the idea</a>: "If Dr Strangelove is the type of the inhuman technician, utterly indifferent to the consequences of the exploitation of his discoveries, not only is Dr Kahn not the prototype of Dr Strangelove. He is almost the exact opposite of him. The difference, to put it succinctly, is that Dr Strangelove is mad and Dr Kahn is sane." Certainly Kahn's gregarious energy was nothing like Strangelove's cold intensity. "How could my son be Dr Strangelove?" protested Kahn's own father in 1968. "He is so warm and considerate."</p>
<p>As it happens, Kahn was definitely the basis for the nuclear strategist Dr Groeteschele in Fail Safe, Sidney Lumet's much more earnest 1964 film about a nuclear strike triggered by a computer error. But the media only cared about Strangelove. "Kubrick is a friend of mine," Kahn told Newsweek. "He told me Dr Strangelove wasn't supposed to be me." Yet three years later <a href="https://www.nytimes.com/1968/12/01/archives/oneman-think-tank-oneman-think-tank.html">he changed his story</a>, claiming that the character was in fact a hybrid of Kissinger, Von Braun and himself. Unlike Teller, he was far from offended by the gossip. It bolstered his celebrity and his income.</p>
<p>As for the other candidates, writes Peter Goodchild, the Strangelove connection was "a stigma… enhancing their links with the nuclear nightmare". Despite his biography's subtitle, Goodchild argues that Strangelove was "clearly a composite", not a caricature of one individual. In fact, the hunt for the "real" Strangelove smudges Kubrick's satirical point.</p>
<p>While researching the movie, Kubrick was shocked by how the experts' professional pride "seemed to completely overcome any personal involvement in the possible destruction of their world". Strangelove is the demonic personification of a way of thinking about war&nbsp;– highly intelligent yet bloodlessly abstracted from the reality of human suffering&nbsp;– that infected many scientists, strategists and politicians during the Cold War, and has not disappeared. He is not a man but an attitude, and attitudes are immortal.</p>
<p><em>Dorian Lynskey is the author of Everything Must Go: The Stories We Tell About the End of the World (April 2024).</em></p>
<p><em>If you liked this story,&nbsp;</em><a href="https://cloud.email.bbc.com/SignUp10_08?&amp;at_bbc_team=studios&amp;at_medium=Onsite&amp;at_objective=acquisition&amp;at_ptr_name=bbc.com&amp;at_link_origin=featuresarticle&amp;at_campaign=essentiallist&amp;at_campaign_type=owned&amp;&amp;" target="_self"><strong>sign up for The Essential List newsletter</strong></a><em>&nbsp;– a handpicked selection of features, videos and can't-miss news delivered to your inbox every Friday.</em></p>
<p><em>If you would like to comment on this story or anything else you have seen on BBC Culture, head over to our&nbsp;</em><a href="https://www.facebook.com/pages/BBC-Culture/237388053065908" target="_blank"><strong><em>Facebook</em></strong></a><em>&nbsp;page or message us on</em>&nbsp;<a href="https://twitter.com/bbc_culture" target="_blank"><strong><em>Twitter</em></strong></a><em>.</em></p></div></div></article></div>;</section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: WhisperFusion – Ultra-low latency conversations with an AI chatbot (237 pts)]]></title>
            <link>https://github.com/collabora/WhisperFusion</link>
            <guid>39176570</guid>
            <pubDate>Mon, 29 Jan 2024 14:23:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/collabora/WhisperFusion">https://github.com/collabora/WhisperFusion</a>, See on <a href="https://news.ycombinator.com/item?id=39176570">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
          <nav aria-label="Global">
            <ul>
                <li>
      
      <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Actions&quot;,&quot;label&quot;:&quot;ref_cta:Actions;&quot;}" href="https://github.com/features/actions">
      
      <div>
        <p>Actions</p><p>
        Automate any workflow
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Packages&quot;,&quot;label&quot;:&quot;ref_cta:Packages;&quot;}" href="https://github.com/features/packages">
      
      <div>
        <p>Packages</p><p>
        Host and manage packages
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Security&quot;,&quot;label&quot;:&quot;ref_cta:Security;&quot;}" href="https://github.com/features/security">
      
      <div>
        <p>Security</p><p>
        Find and fix vulnerabilities
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Codespaces&quot;,&quot;label&quot;:&quot;ref_cta:Codespaces;&quot;}" href="https://github.com/features/codespaces">
      
      <div>
        <p>Codespaces</p><p>
        Instant dev environments
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Copilot&quot;,&quot;label&quot;:&quot;ref_cta:Copilot;&quot;}" href="https://github.com/features/copilot">
      
      <div>
        <p>Copilot</p><p>
        Write better code with AI
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Code review&quot;,&quot;label&quot;:&quot;ref_cta:Code review;&quot;}" href="https://github.com/features/code-review">
      
      <div>
        <p>Code review</p><p>
        Manage code changes
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Issues&quot;,&quot;label&quot;:&quot;ref_cta:Issues;&quot;}" href="https://github.com/features/issues">
      
      <div>
        <p>Issues</p><p>
        Plan and track work
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Discussions&quot;,&quot;label&quot;:&quot;ref_cta:Discussions;&quot;}" href="https://github.com/features/discussions">
      
      <div>
        <p>Discussions</p><p>
        Collaborate outside of code
      </p></div>

    
</a></li>

            </ul>
          </div>
</li>


                <li>
      
      
</li>


                <li>
      
      <div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to GitHub Sponsors&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Sponsors;&quot;}" href="https://github.com/sponsors">
      
      <div>
        <p>GitHub Sponsors</p><p>
        Fund open source developers
      </p></div>

    
</a></li>

            </ul>
          </div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to The ReadME Project&quot;,&quot;label&quot;:&quot;ref_cta:The ReadME Project;&quot;}" href="https://github.com/readme">
      
      <div>
        <p>The ReadME Project</p><p>
        GitHub community articles
      </p></div>

    
</a></li>

            </ul>
          </div>
          
      </div>
</li>


                <li>
    <a data-analytics-event="{&quot;category&quot;:&quot;Header menu top item (logged out)&quot;,&quot;action&quot;:&quot;click to go to Pricing&quot;,&quot;label&quot;:&quot;ref_cta:Pricing;&quot;}" href="https://github.com/pricing">Pricing</a>
</li>

            </ul>
          </nav>

        <div>
                


<qbsearch-input data-scope="repo:collabora/WhisperFusion" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="EpderkQmzwZWZjtEBp_ci3g30ORawTqe9_L0q6exzAdtpJ23_zD1txVsoHSl6rolLQ9CfNPzCpAmJDq5XZJ2Aw" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="collabora/WhisperFusion" data-current-org="collabora" data-current-owner="" data-logged-in="false" data-copilot-chat-enabled="false" data-blackbird-indexed-repo-csrf="<esi:include src=&quot;/_esi/rails_csrf_token_form_hidden?r=lKk0N%2BvSREfLl6Gv8W%2F7Caj1twyYpCG1Ex8qMxYNpFdKkYQR3v0SOfkjJ8cbsn3%2F6a9bw3kfi7IdbeuuaClly9SnUkGUrH5R3WqB7RVBh1oFCj1oHpPM6ppQ8xJEywqNpNRzqYp95C5M2%2BjA4y8M9bbviWM8UEfhiqQ8K43HfkK8AXIG9ocnNVHw%2B9s3Sx20eq7kRE7rZbB3vm6PyCpNmR2D672lYlIr93AzkuoHDQHGXNwTM%2FxdqqOrmRwVOG8L5m4OWehcgu1P4CcjRMPym6zFOriTfhDye5XWKcNgREZUMk6gC3EhUd%2Faw3gvI3N3R4B7ge%2FRQm%2FbETXLYCe8bJ1OJ%2FyHPiT%2F6TVQ%2FvWcB7US5ZfLDPhSfFOeGma7hqRHOavfrNvNFijl7jQFCe2qJjD%2B2sOTkUYmMwXPDCtOm34nwf5DK1s1tykWMGorqlaua32OSOLmdaJlo44A5psBuGLKtTi7qojMgFnphrZc3vdBmBir2mBdAGQIzqTHFTe82knQw%2FP2sxYNjFzDBOXrcehUfhmn5Q%3D%3D--JliSJ25C2HxVFKia--Pc2N8foPDj9yp9W%2BC%2Fb9JQ%3D%3D&quot; />">
  <div data-modal-dialog-overlay="" data-action="click:qbsearch-input#searchInputContainerClicked">
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true">
      <h2 id="search-suggestions-dialog-header">Search code, repositories, users, issues, pull requests...</h2>
    
</modal-dialog></div>
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-disabled="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-disabled="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>

            <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&amp;source=header-repo&amp;source_repo=collabora%2FWhisperFusion" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/collabora/WhisperFusion&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="0e33672d0f145f127f21cec22948937ab34624b8e062771fc310b88ff5db5c0a" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>;ref_cta:Sign up;ref_loc:header logged out&quot;}">
              Sign up
            </a>
        </p></div>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon and iRobot call off their planned acquisition (179 pts)]]></title>
            <link>https://www.cnbc.com/2024/01/29/amazon-terminates-irobot-deal-vacuum-maker-to-lay-off-31percent-of-staff.html</link>
            <guid>39176297</guid>
            <pubDate>Mon, 29 Jan 2024 13:59:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cnbc.com/2024/01/29/amazon-terminates-irobot-deal-vacuum-maker-to-lay-off-31percent-of-staff.html">https://www.cnbc.com/2024/01/29/amazon-terminates-irobot-deal-vacuum-maker-to-lay-off-31percent-of-staff.html</a>, See on <a href="https://news.ycombinator.com/item?id=39176297">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="RegularArticle-ArticleBody-5" data-module="ArticleBody" data-test="articleBody-2" data-analytics="RegularArticle-articleBody-5-2"><div id="ArticleBody-InlineImage-107339500" data-test="InlineImage"><p>The iRobot headquarters in Bedford, Massachusetts, US, on Friday, June 16, 2023. Amazon.com Inc.'s proposed $1.7 billion deal to buy robot vacuum firm iRobot Corp. was given the all-clear by the UKs antitrust agency. Photographer: Sophie Park/Bloomberg via Getty Images</p><p>Bloomberg | Bloomberg | Getty Images</p></div><div><p><span data-test="QuoteInBody" id="RegularArticle-QuoteInBody-1"><a href="https://www.cnbc.com/quotes/AMZN/">Amazon</a><span><span id="-WatchlistDropdown" data-analytics-id="-WatchlistDropdown"></span></span></span> said on Monday it would not move forward with a planned acquisition of vacuum-maker <span data-test="QuoteInBody" id="RegularArticle-QuoteInBody-2"><a href="https://www.cnbc.com/quotes/IRBT/">iRobot</a><span><span id="-WatchlistDropdown" data-analytics-id="-WatchlistDropdown"></span></span></span>, with the two companies <a href="https://www.prnewswire.com/news-releases/amazon-and-irobot-agree-to-terminate-pending-acquisition-302046311.html" target="_blank">saying</a> in a release there was "no path to regulatory approval for the deal."</p><p>The Roomba maker also <a href="https://www.prnewswire.com/news-releases/irobot-announces-operational-restructuring-plan-to-position-company-for-the-future-302046345.html" target="_blank">announced</a> it would lay off 31% of its employees, around 350 people, and that its chair and CEO, Colin Angle, would step down effective immediately.</p><p>Shares of iRobot fell 10% in morning trading on the news.</p><p>The fate of the deal was plunged into uncertainty after The Wall Street Journal <a href="https://www.cnbc.com/2024/01/18/irobot-shares-tank-30percent-on-report-eu-plans-to-block-amazon-acquisition.html">reported</a> that the European Union would not offer regulatory approval.</p><p>The European Commission, the executive body of the EU, launched a probe in July, saying that the proposed deal could result in Amazon hindering iRobot rivals from competing on Amazon's online marketplace. The commission argued that Amazon could delist or reduce rival products' prominence in search results or elsewhere.</p><p>"Our in-depth investigation preliminarily showed that the acquisition of iRobot would have enabled Amazon to foreclose iRobot's rivals by restricting or degrading access to the Amazon Stores," Margrethe&nbsp;Vestager, the European Commission's executive vice president, said in a statement. She added that Amazon's control over the marketplace "could have restricted competition in the market for robot vacuum cleaners, leading to higher prices, lower quality, and less innovation for consumers."</p><p>"We're disappointed that Amazon's acquisition of iRobot could not proceed," David Zapolsky, senior vice president and general counsel at Amazon, said in a release.</p><p>iRobot said it would focus on margin improvements, reduce spending on research and development, and pause all work on "non-floorcare" products, including its air purifiers and robotic lawn mowers.</p><p>"The termination of the agreement with Amazon is disappointing, but iRobot now turns toward the future with a focus and commitment to continue building thoughtful robots and intelligent home innovations that make life better," iRobot's Angle said in a release.</p><p>Amazon will pay iRobot a previously agreed upon $94 million breakup fee. The terminated deal, first announced in 2022, would have originally valued iRobot at roughly $1.7 billion.</p><p>The robotic vacuum maker has a market capitalization of under $400 million, following Monday's news and prior reports that the EU would move to block the deal.</p><p>In July, iRobot entered into a $200 million financing facility from the Carlyle Group, in order to fund the company's operations as a stopgap until the Amazon deal closed.</p><p>Amazon declined to provide a comment beyond the release.</p><p>Regulators around the world have moved to scrutinize large technology companies, citing potential anti-competitive effects. Amazon is also one of the subjects of <a href="https://www.cnbc.com/2024/01/25/ftc-looking-into-ai-deals-at-amazon-alphabet-microsoft-openai-.html">a Federal Trade Commission inquiry</a> into the investments and partnerships between Big Tech and artificial intelligence developers such as Anthropic and OpenAI.</p><p>In Europe, both Britain's Competition and Markets Authority and the EU's European Commission have delayed or halted several deals. Those include <span data-test="QuoteInBody" id="RegularArticle-QuoteInBody-7"><a href="https://www.cnbc.com/quotes/META/">Meta</a><span><span id="-WatchlistDropdown" data-analytics-id="-WatchlistDropdown"></span></span></span>'s <a href="https://www.cnbc.com/2023/05/23/meta-sells-giphy-to-shutterstock-at-a-loss-in-a-53-million-deal.html">acquisition </a>of Giphy, <span data-test="QuoteInBody" id="RegularArticle-QuoteInBody-9"><a href="https://www.cnbc.com/quotes/ADBE/">Adobe</a><span><span id="-WatchlistDropdown" data-analytics-id="-WatchlistDropdown"></span></span></span>'s terminated<a href="https://www.cnbc.com/2023/12/18/adobe-and-figma-call-off-20-billion-merger.html"> acquisition </a>of Figma and <span data-test="QuoteInBody" id="RegularArticle-QuoteInBody-11"><a href="https://www.cnbc.com/quotes/MSFT/">Microsoft's</a><span><span id="-WatchlistDropdown" data-analytics-id="-WatchlistDropdown"></span></span></span> investment <a href="https://www.cnbc.com/2023/12/08/microsofts-investment-in-openai-faces-initial-review-from-uk-cma.html">in OpenAI</a>, as well as Microsoft's <a href="https://www.cnbc.com/2023/10/13/microsoft-closes-activision-blizzard-deal-after-regulatory-review.html">purchase of Activision Blizzard</a>.</p><p><em>— CNBC's Annie Palmer contributed reporting.</em></p><p><strong>WATCH: Amazon-iRobot deal a 'no-brainer'</strong></p></div><div id="Placeholder-ArticleBody-Video-107099722" data-test="VideoPlaceHolder" role="region" tabindex="0" data-vilynx-id="7000257513" aria-labelledby="Placeholder-ArticleBody-Video-107099722"><p><img src="https://image.cnbcfm.com/api/v1/image/107099723-16597130431659713039-24714965193-1080pnbcnews.jpg?v=1659713042&amp;w=750&amp;h=422&amp;vtcrop=y" alt="Amazon's acquisition of iRobot a no-brainer for company's robotics plans, says WSJ's Stern"><span></span><span></span></p></div><div><p><em><strong>Don't miss these stories from CNBC PRO:</strong></em></p><ul><li><a href="https://www.cnbc.com/2024/01/24/forget-the-magnificent-7-these-nasdaq-stocks-are-next-in-line-to-lead-rally-according-to-the-charts.html">Forget the 'Magnificent 7,' these Nasdaq stocks are next in line to lead the rally, according to the charts</a></li><li><a href="https://www.cnbc.com/2024/01/23/nvidia-is-deeply-overbought-and-due-for-consolidation-says-chart-analyst.html">Nvidia is now 'deeply overbought' and due for 'consolidation,' says chart analyst</a></li><li><a href="https://www.cnbc.com/2024/01/24/zepbound-is-off-to-a-strong-start-but-heres-what-eli-lilly-investors-are-watching.html">Eli Lilly's Zepbound is off to a strong start, but here's what needs to happen to push shares higher</a></li><li><a href="https://www.cnbc.com/2024/01/26/investors-are-shifting-into-this-type-of-bond-fund-at-the-fastest-pace-in-three-years.html">Investors are shifting into this type of bond fund at the fastest pace in three years</a></li></ul></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Florida House of Representatives approves bill to ban social media for kids < 16 (297 pts)]]></title>
            <link>https://abcnews.go.com/GMA/Family/florida-house-representatives-approves-bill-ban-social-media/story?id=106672586</link>
            <guid>39175883</guid>
            <pubDate>Mon, 29 Jan 2024 13:20:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://abcnews.go.com/GMA/Family/florida-house-representatives-approves-bill-ban-social-media/story?id=106672586">https://abcnews.go.com/GMA/Family/florida-house-representatives-approves-bill-ban-social-media/story?id=106672586</a>, See on <a href="https://news.ycombinator.com/item?id=39175883">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-testid="prism-article-body"><p>Legislators in the Florida House of Representatives on Wednesday approved what could be the strictest regulation on <a data-testid="prism-linkbase" href="https://www.goodmorningamerica.com/family/story/penelope-cruz-why-kids-dont-social-media-106479786" target="_blank">social media and kids</a> in the country.</p><p>Florida <a data-testid="prism-linkbase" href="https://myfloridahouse.gov/Sections/Bills/billsdetail.aspx?BillId=80134&amp;sui=QATRKlZHGFw=-638416255520920466" target="_blank">House Bill 1</a> would prohibit children under the age of 16 from using most social media platforms, regardless of parental approval.</p><p>The social media platforms the bill would target include any site that tracks user activity, allows children to upload content or uses addictive features designed to cause compulsive use.</p><p>The House passed the bill by a vote of 106 to 13, with many Democrats joining the chamber's Republican majority in support of the bill. It now heads to the Republican-controlled Senate for consideration.</p><p>State Rep. Fiona McFarland, a Republican, described social media as "digital fentanyl" for kids when promoting the bill on the House floor.</p><p>"It's like a digital fentanyl, and even the most plugged-in parent or attuned teen has a hard time shutting the door against these addictive features," McFarland said.</p><p>Another Republican legislator, state Rep. Tyler Sirois, also argued in support of the bill, saying that social media platforms are "taking advantage of kids growing up."</p><p>Most social media platforms currently have a minimum user age of 13.</p><section data-testid="prism-collection"><header><p><h2>Editor’s Picks</h2></p></header></section><p>The bill would allow the termination of social media accounts belonging to kids under 16, including the deletion of information for pre-existing accounts. It would also require that social media sites use "reasonable age verification methods" to verify users' ages.</p><div data-testid="prism-inline-image"><figure data-testid="prism-figure"><img alt="PHOTO: The Florida State capitol." data-testid="prism-image" draggable="false" src="https://i.abcnewsfe.com/a/4147653e-c8f1-4791-be5b-8352124cd09d/fl-state-cap-rf-gty-ml-231204_1701717450664_hpMain.jpg"><figcaption><div data-testid="prism-caption"><p><span data-testid="prism-truncate"><span><span>The Florida State capitol.</span></span></span></p><p><span>STOCK PHOTO/Getty Images</span></p></div></figcaption></figure></div><p>The bill is opposed by those who argue that it infringes on First Amendment and parental rights.</p><p>Meta, the parent company of Facebook and Instagram, argued that social media regulation should be overseen on on a federal basis, and that parental approval should be sufficient for minors' use of social media, <a data-testid="prism-linkbase" href="https://abcnews.go.com/Health/wireStory/florida-house-passes-bill-ban-social-media-accounts-106655448" target="_blank">according to The Associated Press</a>.</p><p>"Many teens today leverage the internet and apps to responsibly gather information and learn about new opportunities, including part-time jobs, higher education, civic or church gatherings, and military service," Meta representative Caulder Harvill-Childs wrote to the House Judiciary Committee, according to the AP. "By banning teens under 16, Florida risks putting its young people at a disadvantage versus teens elsewhere."</p><p>The legislative action in Florida comes at a time when social media companies, as well as parents, legislators and medical providers, are trying to figure out how to approach social media and kids.</p><p>Meta on Thursday <a data-testid="prism-linkbase" href="https://about.fb.com/news/2024/01/introducing-stricter-message-settings-for-teens-on-instagram-and-facebook/" target="_blank">announced a series of new safety measures</a> aimed at teens, including restricting private messages from strangers and instituting new parental controls.</p><div data-testid="prism-inline-image"><figure data-testid="prism-figure"><img alt="PHOTO:Stock photo" data-testid="prism-image" draggable="false" src="https://i.abcnewsfe.com/a/dbe56266-83ea-439a-9e6f-fa92a1c372ad/Kids-smartphones-gty-jm-240125_1706195412194_hpMain.jpg"><figcaption><div data-testid="prism-caption"><p><span data-testid="prism-truncate"><span><span>Stock photo</span></span></span></p><p><span>Lakshmiprasad S/Getty Images/iStockphoto</span></p></div></figcaption></figure></div><p>The new safety measures came just one day after New York City Mayor Eric Adams <a data-testid="prism-linkbase" href="https://abcnews.go.com/US/new-york-city-mayor-eric-adams-declares-social/story?id=106647634" target="_blank">classified social media as a "public health hazard</a>" and an "environmental toxin," saying young people must be protected from "harm" online.</p><p>In his State of the City address Wednesday, Adams claimed TikTok, YouTube and Facebook are "fueling a mental health crisis by designing their platforms with addictive and dangerous features."</p><p>"We are the first major American city to take this step and call out the danger of social media like this," the mayor said. "Just as the surgeon general did with tobacco and guns, we are treating social media like other public health hazards and ensuring that tech companies take responsibility for their products."</p><p>Last year, the <a data-testid="prism-linkbase" href="https://www.goodmorningamerica.com/wellness/story/american-psychological-association-issues-advisory-teens-social-media-99228135" target="_blank">American Psychological Association</a> issued first-of-its-kind recommendations intended to help teenagers use social media safely, including setting time limits, encouraging family discussions about social media and parental monitoring.</p><p>The U.S. Surgeon General last year also issued an <a data-testid="prism-linkbase" href="https://www.goodmorningamerica.com/wellness/story/us-surgeon-general-issues-major-advisory-social-media-99514661" target="_blank">advisory warning of an urgent public health issue</a> regarding social media usage and youth mental health.</p><p>In the advisory, released in May, Dr. Vivek H. Murthy called for more research to determine the extent of mental health impacts on young people, including the type of content generating the most harm, societal factors that could protect youth and ways in which social media can be beneficial.</p><p>"To date, the burden of protecting youth has fallen predominantly on children, adolescents and their families," Murthy wrote. "The entire burden of mitigating the risk of harm of social media cannot be placed on the shoulders of children and parents."</p><p>Murthy called on social media companies to prioritize safety and privacy in their product designs and ensure minimum age requirements are enforced. He said he believes 13 is "too early" for kids to be on social media, describing the age as a "time when kids are developing their identity, their sense of self."</p><p>The advisory also outlined how policymakers can enact change in three ways: creating policies limiting access to potentially harmful content, developing curricula about digital and media literacy in schools, and increasing funding for related research.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[—-libcurl (619 pts)]]></title>
            <link>https://everything.curl.dev/libcurl/libcurl</link>
            <guid>39175873</guid>
            <pubDate>Mon, 29 Jan 2024 13:19:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://everything.curl.dev/libcurl/libcurl">https://everything.curl.dev/libcurl/libcurl</a>, See on <a href="https://news.ycombinator.com/item?id=39175873">Hacker News</a></p>
<div id="readability-page-1" class="page"><div spellcheck="false" translate="no"><div data-key="daff5dd5ff7e41708eab25d3419ee91e"><p><span data-key="0f025ecef15f4153ad46d7f5a95380ee"><span data-offset-key="0f025ecef15f4153ad46d7f5a95380ee:0">/********* Sample code generated by the curl command-line tool **********</span></span></p></div><div data-key="5307085a79c94d4bb02dd92321ccadfc"><p><span data-key="a293c80ce6ef48298908ecc9d759da45"><span data-offset-key="a293c80ce6ef48298908ecc9d759da45:0"> * All curl_easy_setopt() options are documented at:</span></span></p></div><div data-key="50230daff08146e39fcd7cb7d037a058"><p><span data-key="e5ed583ada874fcaba91b25b927fe68d"><span data-offset-key="e5ed583ada874fcaba91b25b927fe68d:0"> * https://curl.se/libcurl/c/curl_easy_setopt.html</span></span></p></div><div data-key="85d5fd51143e4a93b694167652c57058"><p><span data-key="b2c2cfd870c34c8082095aac095762c6"><span data-offset-key="b2c2cfd870c34c8082095aac095762c6:0"> ************************************************************************/</span></span></p></div><div data-key="9d7565c41a9645bb92812b6395ae721e"><p><span data-key="dbbe66ed4b7841c2950ba437ce51bb5e"><span data-offset-key="dbbe66ed4b7841c2950ba437ce51bb5e:0">int main(int argc, char *argv[])</span></span></p></div><div data-key="e9bb8973abc441aaacc0ccaa1819e49c"><p><span data-key="d1bdc00067b54603b2c20bd74539f72d"><span data-offset-key="d1bdc00067b54603b2c20bd74539f72d:0">  curl_easy_setopt(hnd, CURLOPT_URL, "http://example.com");</span></span></p></div><div data-key="0dd993c320cb4b14b27cc372bae1b51a"><p><span data-key="2be04c0e3c344046a8c58245de53fc5a"><span data-offset-key="2be04c0e3c344046a8c58245de53fc5a:0">  curl_easy_setopt(hnd, CURLOPT_NOPROGRESS, 1L);</span></span></p></div><div data-key="30523ac9cd2c47b0b599921fee5c8e22"><p><span data-key="5e8eb77d0e924422a808ca23d1542696"><span data-offset-key="5e8eb77d0e924422a808ca23d1542696:0">  curl_easy_setopt(hnd, CURLOPT_USERAGENT, "curl/7.45.0");</span></span></p></div><div data-key="20271606c9c24e3fae57eabea922e513"><p><span data-key="142ff4328c874741bf79ce2a9dfbb4e1"><span data-offset-key="142ff4328c874741bf79ce2a9dfbb4e1:0">  curl_easy_setopt(hnd, CURLOPT_MAXREDIRS, 50L);</span></span></p></div><div data-key="c34ad54198ce4e7085c58a24b2dc01ce"><p><span data-key="e05b2a5a9f9e4e6996de58d89c105484"><span data-offset-key="e05b2a5a9f9e4e6996de58d89c105484:0">  curl_easy_setopt(hnd, CURLOPT_SSH_KNOWNHOSTS,</span></span></p></div><div data-key="3daef237f699490f9de401ea45daad75"><p><span data-key="fc09cb91046e4fbd8ed5d4e301a1c78d"><span data-offset-key="fc09cb91046e4fbd8ed5d4e301a1c78d:0">                   "/home/daniel/.ssh/known_hosts");</span></span></p></div><div data-key="1982749114ef4285a7710255ba553c61"><p><span data-key="1ca86b33439b4d7db41901acc5561773"><span data-offset-key="1ca86b33439b4d7db41901acc5561773:0">  curl_easy_setopt(hnd, CURLOPT_TCP_KEEPALIVE, 1L);</span></span></p></div><div data-key="bd445540a8d249d087a1a319d3f5415b"><p><span data-key="d29cdb2f8aea44b3bd8d399f55898e52"><span data-offset-key="d29cdb2f8aea44b3bd8d399f55898e52:0">  /* Here is a list of options the curl code used that cannot get</span></span></p></div><div data-key="62c055e569d24d54aa228ada2d8a55b7"><p><span data-key="797d45247f2540c1a184b919266cec8c"><span data-offset-key="797d45247f2540c1a184b919266cec8c:0">     generated as source easily. You may select to either not use them or</span></span></p></div><div data-key="14e6b80b43884665a23b3eb9b5828bbd"><p><span data-key="c15fc10190f7494eabe00e85e528e80b"><span data-offset-key="c15fc10190f7494eabe00e85e528e80b:0">  CURLOPT_WRITEDATA set to a objectpointer</span></span></p></div><div data-key="4fb574047c984052bb1b03bb65e267ce"><p><span data-key="a56b41de3be44bab8a5efd6b74c0c41d"><span data-offset-key="a56b41de3be44bab8a5efd6b74c0c41d:0">  CURLOPT_WRITEFUNCTION set to a functionpointer</span></span></p></div><div data-key="88b35a78f38b4084a2730ce547474b43"><p><span data-key="6c0a83350bbd47f990ea28bf50ded54d"><span data-offset-key="6c0a83350bbd47f990ea28bf50ded54d:0">  CURLOPT_READDATA set to a objectpointer</span></span></p></div><div data-key="02d68ef58d984749ab902bc20227e1f2"><p><span data-key="e8cd292c1c8e43fca9828f6eb7aa0f18"><span data-offset-key="e8cd292c1c8e43fca9828f6eb7aa0f18:0">  CURLOPT_READFUNCTION set to a functionpointer</span></span></p></div><div data-key="f3cf5381c9ac4c3aae4dd4b998c7c31b"><p><span data-key="3e0546cbb1a34233af6f3a3cab21889e"><span data-offset-key="3e0546cbb1a34233af6f3a3cab21889e:0">  CURLOPT_SEEKDATA set to a objectpointer</span></span></p></div><div data-key="748d207f5adc49d4864567bad89f4512"><p><span data-key="54e3cb54e3974fe286cfa6c583c8579b"><span data-offset-key="54e3cb54e3974fe286cfa6c583c8579b:0">  CURLOPT_SEEKFUNCTION set to a functionpointer</span></span></p></div><div data-key="cb87e2715393471bb54640c81336f6f0"><p><span data-key="0e9d835bdd24490bbf376840eb71dbfd"><span data-offset-key="0e9d835bdd24490bbf376840eb71dbfd:0">  CURLOPT_ERRORBUFFER set to a objectpointer</span></span></p></div><div data-key="d6a3e8ec3abd4be2888a2535c1fa270c"><p><span data-key="7b5502f6f74f4262937789ab6a00da46"><span data-offset-key="7b5502f6f74f4262937789ab6a00da46:0">  CURLOPT_STDERR set to a objectpointer</span></span></p></div><div data-key="40fa451aa0e847a495c3b46b353d4c78"><p><span data-key="e27d65fea01c4c0db776f634cd7e84ad"><span data-offset-key="e27d65fea01c4c0db776f634cd7e84ad:0">  CURLOPT_HEADERFUNCTION set to a functionpointer</span></span></p></div><div data-key="1b5a82ecad7444049cf59a122c081836"><p><span data-key="b0f3600d73304954a5477afd878c5eee"><span data-offset-key="b0f3600d73304954a5477afd878c5eee:0">  CURLOPT_HEADERDATA set to a objectpointer</span></span></p></div><div data-key="9ed3fab823c844158e713df6f7f31813"><p><span data-key="615f6868b05c4d7093df23dc42e6006b"><span data-offset-key="615f6868b05c4d7093df23dc42e6006b:0">  ret = curl_easy_perform(hnd);</span></span></p></div><div data-key="a03056afb1b44a02a38590334c059f47"><p><span data-key="49d18ac9d6e44c71bdd81accf00c9c40"><span data-offset-key="49d18ac9d6e44c71bdd81accf00c9c40:0">/**** End of sample code ****/</span></span></p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Svelte Native: The Svelte Mobile Development Experience (130 pts)]]></title>
            <link>https://svelte-native.technology/</link>
            <guid>39175393</guid>
            <pubDate>Mon, 29 Jan 2024 12:13:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://svelte-native.technology/">https://svelte-native.technology/</a>, See on <a href="https://news.ycombinator.com/item?id=39175393">Hacker News</a></p>
<div id="readability-page-1" class="page"><div slot="what">
			<p>Svelte Native is a new approach to building mobile applications using NativeScript. Where other JavaScript
				mobile development frameworks like React Native and NativeScript-Vue do the bulk of their work on
				the <em>mobile device</em>, Svelte Native shifts that work into a <em>compile step</em> that happens
				when you build your app.</p>

			<p>Instead of using techniques like virtual DOM diffing, Svelte writes code that surgically updates the native
				view widgets when the state of your app changes.</p>
		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Harmonics Explorer (264 pts)]]></title>
            <link>https://teropa.info/harmonics-explorer/</link>
            <guid>39174549</guid>
            <pubDate>Mon, 29 Jan 2024 09:51:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://teropa.info/harmonics-explorer/">https://teropa.info/harmonics-explorer/</a>, See on <a href="https://news.ycombinator.com/item?id=39174549">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Japan: Moon lander Slim comes back to life and resumes mission (287 pts)]]></title>
            <link>https://www.bbc.co.uk/news/world-asia-68125589</link>
            <guid>39173775</guid>
            <pubDate>Mon, 29 Jan 2024 07:43:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.co.uk/news/world-asia-68125589">https://www.bbc.co.uk/news/world-asia-68125589</a>, See on <a href="https://news.ycombinator.com/item?id=39173775">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><main id="main-content" data-testid="main-content"><article><header></header><div data-component="image-block"><figure><p><span><picture><source srcset="https://ichef.bbci.co.uk/news/240/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg.webp 240w, https://ichef.bbci.co.uk/news/320/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg.webp 320w, https://ichef.bbci.co.uk/news/480/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg.webp 480w, https://ichef.bbci.co.uk/news/624/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg.webp 624w, https://ichef.bbci.co.uk/news/800/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg.webp 800w, https://ichef.bbci.co.uk/news/976/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg.webp 976w" type="image/webp"><img alt="Slim artwork" srcset="https://ichef.bbci.co.uk/news/240/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg 240w, https://ichef.bbci.co.uk/news/320/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg 320w, https://ichef.bbci.co.uk/news/480/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg 480w, https://ichef.bbci.co.uk/news/624/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg 624w, https://ichef.bbci.co.uk/news/800/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg 800w, https://ichef.bbci.co.uk/news/976/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg 976w" src="https://ichef.bbci.co.uk/news/976/cpsprodpb/1366B/production/_132376497_mediaitem132376496.jpg" width="976" height="549" loading="eager"></picture></span><span role="text"><span>Image source, </span>Jaxa</span></p><figcaption><span>Image caption, </span><p>Artwork: Jaxa has become the fifth national space agency to land on the Moon</p></figcaption></figure></div><div data-component="text-block"><p><b>Japan's Moon lander has resumed operations after being shut for a week </b><a href="https://www.bbc.com/news/science-environment-68091389">due to a power supply issue</a><b>.</b></p></div><div data-component="text-block"><p>The Japan Aerospace Exploration Agency said it re-established contact with the lander Sunday night, indicating that the glitch had been fixed.</p></div><div data-component="text-block"><p>Its solar cells are working again after a shift in lighting conditions allowed it to catch sunlight, the agency said.</p></div><div data-component="text-block"><p>It could not generate power when it landed on 20 January as the solar cells pointed away from the Sun.</p></div><div data-component="text-block"><p>With the Smart Lander for Investigating Moon (Slim) spacecraft, Japan became only the fifth country to achieve a soft touchdown on the Moon after the US, the former Soviet Union, China and India.</p></div><div data-component="text-block"><p>The spacecraft ran on battery power for several hours before authorities decided to turn it off to allow for a possible recovery of electricity when the angle of sunlight changed.</p></div><div data-component="text-block"><p>In a post on X, formerly Twitter, Jaxa shared a photograph taken by Slim of a nearby rock that it nicknamed a "toy poodle".</p></div><div data-component="text-block"><p>The lander will analyse the composition of rocks in its search for clues about the origin of the moon, Jaxa said.</p></div><div data-component="text-block"><p>Slim landed at the edge of an equatorial crater known as Shioli, within 55m (180 ft) of its target in a crater. Jaxa described it as an "unprecedented pinpoint landing".</p></div><div data-component="text-block"><p>The landing technology could allow future exploration of hilly Moon poles seen as a potential sources of fuel, water and oxygen, the agency said.</p></div><div data-component="text-block"><p>The Slim mission came after several earlier attempts by Japan failed, including one by the start-up iSpace, which saw its lunar lander crash when its onboard computer became confused about its altitude above the Moon.</p></div><div data-component="text-block"><p>Jaxa could not immediately say until when Slim will operate on the Moon. It has previously said the lander was not designed to survive a lunar night. A lunar night, which is when the surface of the Moon is not exposed to the Sun, lasts about 14 days.</p></div><div data-component="text-block"><p>Statistically, it has proven very hard to land on the Moon. Only about half of all attempts have succeeded.</p></div><div data-component="text-block"><p>Prior to Japan, India was the most recent nation to join the elite club of countries that have achieved this. Its Chandrayaan-3's rover touched down near the lunar south pole in August 2023 - an area on the Moon's surface that no human had reached before.</p></div><div data-component="text-block"><p>Earlier this month, a US spacecraft launched by a private operator ended its lunar mission in flames over the Pacific. In August last year, <a href="https://www.bbc.com/news/world-europe-66562629">Russia's first lunar spacecraft in decades crashed</a> into the Moon after spinning out of control.</p></div><section data-component="links-block"><p><h2>More on this story</h2></p></section></article></main></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Modern CSS One-Line Upgrades (230 pts)]]></title>
            <link>https://moderncss.dev/12-modern-css-one-line-upgrades/</link>
            <guid>39173308</guid>
            <pubDate>Mon, 29 Jan 2024 06:21:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://moderncss.dev/12-modern-css-one-line-upgrades/">https://moderncss.dev/12-modern-css-one-line-upgrades/</a>, See on <a href="https://news.ycombinator.com/item?id=39173308">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-episode="34">
    <article>
      <span></span>
      
      <p>Sometimes, improving your application CSS just takes a one-line upgrade or enhancement! Learn about 12 properties to start incorporating into your projects, and enjoy reducing technical debt, removing JavaScript, and scoring easy wins for user experience.</p>
<p>Properties are explored for the following categories:</p>
<ul>
<li><strong><a href="#stable-upgrades">Stable Upgrades</a></strong>: fix a hack or issue by replacing older techniques</li>
<li><strong><a href="#stable-enhancements">Stable Enhancements</a></strong>: provide an improved experience with well-supported modern properties</li>
<li><strong><a href="#progressive-enhancements">Progressive Enhancements</a></strong>: provide an upgraded experience when these properties are supported without causing harm in unsupporting browsers</li>
</ul>
<div>
<h2 id="stable-upgrades"><strong>Stable Upgrades</strong></h2>
</div>
<p>The following well-supported properties can help fix a hack or long-standing issue by replacing older techniques.</p>
<div>
<h3 id="aspect-ratio">aspect-ratio</h3>
</div>
<p>Have you ever used the “<a href="https://css-tricks.com/aspect-ratio-boxes/">padding hack</a>” to force an aspect ratio such as 16:9 for video embeds? As of September 2021, the <code>aspect-ratio</code> property is stable in evergreen browsers and is the only property needed to define an aspect ratio.</p>
<p>For an HD video, you can just use <code>aspect-ratio: 16/9</code>. For a perfect square, only <code>aspect-ratio: 1</code> is required since the implied second value is also <code>1 </code>.</p>
<details open="">
  <summary>CSS for "Basic use of aspect-ratio"</summary>
<pre><code><span>.aspect-ratio-hd</span> <span>{</span>
  <span>aspect-ratio</span><span>:</span> 16/9<span>;</span>
<span>}</span>

<span>.aspect-ratio-square</span> <span>{</span>
  <span>aspect-ratio</span><span>:</span> 1<span>;</span>
<span>}</span>
</code></pre>
</details>


<p>Of note, an applied <code>aspect-ratio</code> is forgiving and will allow content to take precedence. This means that when content would cause the element to exceed the ratio in at least one dimension, the element will still grow or change shape to accommodate the content. To prevent or control this behavior, you can add additional dimension properties, like <code>max-width</code>, which may be necessary to avoid expanding out of a flex or grid container.</p>
<details open="">
  <summary>CSS for "Forgiving aspect-ratio"</summary>
<pre><code><span>/* Applied to the flexbox children which have a size constraint from their parent */</span>
<span>.aspect-ratio-square</span> <span>{</span>
  <span>aspect-ratio</span><span>:</span> 1<span>;</span>
<span>}</span>
</code></pre>
</details>

<div>
  <p>
    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iste molestias maiores velit quaerat debitis incidunt delectus nulla, quibusdam fugit eos? Fugiat asperiores assumenda nulla corrupti, sit repellendus ducimus necessitatibus voluptates.
  </p>
  <p>
    Lorem, ipsum dolor sit amet consectetur adipisicing elit.
  </p>
  <p>
    Iste molestias maiores velit quaerat debitis incidunt delectus nulla, quibusdam fugit eos?
  </p>
</div>
<p>If you are hesitant to fully replace the padding hack and still want to provide some dimension guardrails, review the <a href="https://smolcss.dev/#smol-aspect-ratio-gallery">Smol Aspect Ratio Gallery</a> for a progressively enhanced solution to <code>aspect-ratio</code>.</p>
<div>
<h3 id="object-fit">object-fit</h3>
</div>
<p>This is actually the oldest property in this list, but it solves an important issue and definitely fits the sentiment of a one-line upgrade.</p>
<p>The use of <code>object-fit</code> causes an <code>img</code> or other <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Replaced_element">replaced element</a> to act as the container for its contents and have the those contents adopt resizing behavior similar to <code>background-size</code>.</p>
<p>While there are a few values available for <code>object-fit</code>, the following are the ones you’re most likely to use:</p>
<ul>
<li><code>cover</code> - the image resizes to <em>cover</em> the element, and maintains its aspect-ratio so that the content is not distorted</li>
<li><code>scale-down</code> - the image resizes (if needed) <em>within</em> the element so that it is fully visible without being clipped and maintains its aspect-ratio, which may lead to extra space (”letterboxing”) around the image if the element has a different rendered aspect-ratio</li>
</ul>
<p>In either case, <code>object-fit</code> is an excellent property pairing with <code>aspect-ratio</code> to ensure images are not distorted when you apply a custom aspect ratio.</p>
<details open="">
  <summary>CSS for "Use of object-fit with aspect-ratio"</summary>
<pre><code><span>.image</span> <span>{</span>
  <span>object-fit</span><span>:</span> cover<span>;</span>
  <span>aspect-ratio</span><span>:</span> 1<span>;</span>

  <span>/* Optional: constrain image size */</span>
  <span>max-block-size</span><span>:</span> 250px<span>;</span>
<span>}</span>
</code></pre>
</details>

<div>
<p><img src="https://moderncss.dev/img/posts/photo.jpg" alt="A closeup of a siamese cat peeking over an object only their head visible from the eyes up to their ears.">
</p>
</div>
<blockquote>
<p>Review my <a href="https://egghead.io/lessons/css-apply-aspect-ratio-sizing-to-images-with-css-object-fit?af=2s65ms">explanation of object-fit</a> in this free egghead video lesson.</p>
</blockquote>
<div>
<h3 id="margin-inline">margin-inline</h3>
</div>
<p>One of many logical properties, <code>margin-inline</code> functions as a shorthand for setting the inline (left and right in horizontal writing modes) margin.</p>
<p>The replacement here is simple:</p>
<pre><code><span>/* Before */</span>
<span>margin-left</span><span>:</span> auto<span>;</span>
<span>margin-right</span><span>:</span> auto<span>;</span>

<span>/* After */</span>
<span>margin-inline</span><span>:</span> auto<span>;</span></code></pre>
<p>Logical properties have been available for a couple of years and now have <a href="https://caniuse.com/css-logical-props">support upwards of 98%</a> (with occasional prefixing). Review this article from Ahmad Shadeed to learn more about <a href="https://ishadeed.com/article/css-logical-properties/">using logical properties</a> and their importance for sites with international audiences.</p>
<div>
<h2 id="stable-enhancements"><strong>Stable Enhancements</strong></h2>
</div>
<p>These well-supported modern CSS properties can provide an improved experience, and may also allow replacing older methods or even JavaScript-aided solutions. Fallback solutions are not likely to be needed, although this is dependent on your specific application considerations, and testing is always encouraged.</p>
<div>
<h3 id="text-underline-offset">text-underline-offset</h3>
</div>
<p>The use of <code>text-underline-offset</code> allows you to control the distance between the text baseline and the underline. This property has become a part of my standard reset, applied as follows:</p>
<pre><code><span>a:not([class])</span> <span>{</span>
	<span>text-underline-offset</span><span>:</span> 0.25em<span>;</span>
<span>}</span></code></pre>
<p>You can use this offset to clear descenders as well as (subjectively) improve legibility, particularly when links are grouped in close proximity, such as a bulleted list of links.</p>
<p>This upgrade may replace older hacks like a border or pseudo-element, or even a gradient background, especially when used with its friends:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-color">text-decoration-color</a> to change the underline color</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-thickness">text-decoration-thickness</a> to change the underline stroke thickness.</li>
</ul>
<div>
<h3 id="outline-offset">outline-offset</h3>
</div>
<p>Have you been using <code>box-shadow</code> or perhaps a pseudo-element to supply a custom outline when you wanted distance between the element and outline on focus?</p>
<p>Good news! The long-available <code>outline-offset</code> property (<a href="https://caniuse.com/?search=outline-offset">as early as 2006</a>!) may be one you missed, and it enables pushing the outline away from the element with a positive value or pulling it into the element with a negative value.</p>
<p>In the demo, the gray solid line is the element border, and the blue dashed line is the outline being positioned via <code>outline-offset</code>.</p>
<details open="">
  <summary>CSS for "Positive and negative outline-offset"</summary>
<pre><code><span>.outline-offset</span> <span>{</span>
  <span>outline</span><span>:</span> 2px dashed blue<span>;</span>
  <span>outline-offset</span><span>:</span> <span>var</span><span>(</span>--outline-offset<span>,</span> .5em<span>)</span><span>;</span>
<span>}</span>
</code></pre>
</details>

<div>
<p><span>Positive offset</span>
  <span>Negative offset</span>
</p>
</div>
<p><strong>Reminder</strong>: outlines are <em>not</em> computed as part of the element’s box size, so increasing the distance will not increase the amount of space an element occupies. This is similar to how <code>box-shadow</code> is rendered without impacting the element size as well.</p>
<blockquote>
<p>Learn more about <a href="https://moderncss.dev/modern-css-upgrades-to-improve-accessibility/#focus-visibility">using outline-offset as an accessibility improvement</a> for focus visibility.</p>
</blockquote>
<div>
<h3 id="scroll-margin-topbottom">scroll-margin-top/bottom</h3>
</div>
<p>The <code>scroll-margin</code> set of properties (and corresponding <code>scroll-padding</code>) allows adding an offset to an element in the context of the scroll position. In other words, adding <code>scroll-padding-top</code> can increase scroll offset above the element but doesn’t affect its layout position within the document.</p>
<p>Why is this useful? Well, it can alleviate issues caused by a sticky nav element covering content when an anchor link is activated. Using <code>scroll-margin-top</code> we can increase the space above the element when it is scrolled to via navigation to account for the space occupied by the sticky nav.</p>
<p>I like to include a generic starting rule in my reset for any element with an <code>[id]</code> attribute given it has the potential to become an anchor link.</p>
<pre><code><span>[id]</span> <span>{</span>
	<span>scroll-margin-top</span><span>:</span> 2rem<span>;</span>
<span>}</span></code></pre>
<p>An alternative selector is explored in the Modern CSS article on <a href="https://moderncss.dev/modern-css-for-dynamic-component-based-architecture/#css-reset-additions">component-based architecture</a> and is also in use on this site, as can be tested by using the links from the article table of contents sidebar.</p>
<p>For a more robust solution when accounting for the overlap of sticky, fixed, or absolute positioned elements, you may want to use a custom property with a fallback value. Then, with the assistance of JavaScript, measure the real distance needed and <a href="https://12daysofweb.dev/2021/css-custom-properties/#accessing-and-setting-custom-properties-with-javascript">update the custom property value</a>.</p>
<pre><code><span>[id]</span> <span>{</span>
	<span>/* Update --scroll-margin with JS if needed */</span>
	<span>scroll-margin-top</span><span>:</span> <span>var</span><span>(</span>--scroll-margin<span>,</span> 2rem<span>)</span><span>;</span>
<span>}</span></code></pre>
<p>I encourage you to also update this solution further and use the logical property equivalents: <code>scroll-padding-block-start</code> and <code>-block-end</code>.</p>
<div>
<h3 id="color-scheme">color-scheme</h3>
</div>
<p>You may be familiar with the <code>prefers-color-scheme</code> media query to customize dark and light themes. The CSS property <code>color-scheme</code> is an opt-in to adapting browser UI elements including form controls, scrollbars, and CSS system colors. The adaptation asks the browser to render those items with either a <code>light</code> or <code>dark</code> scheme, and the property allows defining a preference order.</p>
<p>If you’re enabling adapting your entire application, set the following on the <code>:root</code>, which says to preference a <code>dark</code> theme (or flip the order to preference a <code>light</code> theme).</p>
<pre><code><span>:root</span> <span>{</span>
	<span>color-scheme</span><span>:</span> dark light<span>;</span>
<span>}</span></code></pre>
<p>You can also define <code>color-scheme</code> on individual elements, such as adjusting form controls within an element with a dark background for improved contrast.</p>
<pre><code><span>.dark-background</span> <span>{</span>
	<span>color-scheme</span><span>:</span> dark<span>;</span>
<span>}</span></code></pre>
<p>Learn from Sara Joy’s presentation about how to <a href="https://www.youtube.com/watch?v=Lye56NHGtLA">use color-scheme for easy dark mode</a>, and more about incorporating this feature.</p>
<div>
<h3 id="accent-color">accent-color</h3>
</div>
<p>If you’ve ever wanted to change the color of checkboxes or radio buttons, you’ve been seeking <code>accent-color</code>. With this property, you can modify the <code>:checked</code> appearance of radio buttons and checkboxes and the filled-in state for both the progress element and range input. The browser’s default focus “halo” may also be adjusted if you do not have another override.</p>
<details open="">
  <summary>CSS for "Effect of using accent-color"</summary>
<pre><code><span>:root</span> <span>{</span>
  <span>accent-color</span><span>:</span> mediumvioletred<span>;</span>
<span>}</span>
</code></pre>
</details>

<div>
<p><label>
    
    Radio
  </label>
  <label>
    
    Checkbox
  </label>
  <label>
    Range<br>
    
  </label>
  <label>
    Progress<br>
    <progress max="100" value="70">70%</progress>
  </label>
</p>
</div>
<p>Consider adding both <code>accent-color</code> and <code>color-scheme</code> to your baseline application styles for a quick win toward custom theme management.</p>
<blockquote>
<p>If you need more comprehensive custom styling for form controls, review the Modern CSS series beginning with <a href="https://moderncss.dev/pure-css-custom-styled-radio-buttons/">radio buttons</a>.</p>
</blockquote>
<div>
<h3 id="width-fit-content">width: fit-content</h3>
</div>
<p>One of my favorite CSS hidden gems is the use of <code>fit-content</code> to “shrink wrap” an element to its contents.</p>
<p>Whereas you may have used an inline display value such as <code>display: inline-block</code> to reduce an element’s width to the content size, an upgrade to <code>width: fit-content</code> will achieve the same effect. The advantage of <code>width: fit-content</code> is that it leaves the <code>display</code> value available, thereby not changing the position of the element in the layout unless you adjust that as well. The computed box size will adjust to the dimensions created by <code>fit-content</code>.</p>
<details open="">
  <summary>CSS for "Basic usage of fit-content"</summary>
<pre><code><span>.fit-content</span> <span>{</span>
  <span>width</span><span>:</span> fit-content<span>;</span>
<span>}</span>
</code></pre>
</details>

<div>
<p>Using fit-content</p>
<p>Without the use of fit-content</p>
</div>
<p>The <code>fit-content</code> value is one of several <a href="https://moderncss.dev/contextual-spacing-for-intrinsic-web-design/">keywords that enable intrinsic sizing</a>.</p>
<p>Consider the secondary upgrade for this technique to the logical property equivalent of <code>inline-size: fit-content</code>.</p>
<div>
<h2 id="progressive-enhancements"><strong>Progressive Enhancements</strong></h2>
</div>
<p>This last set of properties provides an upgraded experience when they are supported and can be used without fear of causing harm in unsupporting browsers. This means they do not need a fallback method even though they are more recent additions to modern CSS.</p>
<div>
<h3 id="overscroll-behavior">overscroll-behavior</h3>
</div>
<p>The default behavior of contained scroll regions - areas with limited dimensions where overflow is allowed to be scrolled - is that when the scroll runs out in the element, the scroll interaction passes to the background page. This can be jarring at best, and frustrating at worst for your users.</p>
<p>Use of <code>overscroll-behavior: contain</code> will isolate the scrolling to the contained region, preventing continuing the scroll by moving it to the parent page once the scroll boundary is reached. This is useful in contexts such as a sidebar of navigation links, which may have an independent scroll from the main page content, which may be a long article or documentation page.</p>
<details open="">
  <summary>CSS for "Basic usage of overscroll-behavior"</summary>
<pre><code><span>.sidebar, .article</span> <span>{</span>
  <span>overscroll-behavior</span><span>:</span> contain<span>;</span>
<span>}</span>
</code></pre>
</details>

<div>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime nobis consectetur earum!</p>
    <p>Aliquid a praesentium quis in consequuntur mollitia laboriosam illum nemo commodi aut?</p>
    <p>Doloremque sapiente quos dignissimos sequi cupiditate commodi nemo non perspiciatis placeat totam.</p>
    <p>Reiciendis, at nulla! Hic nemo eius atque laborum consequuntur iusto exercitationem quasi.</p>
    <p>Est, assumenda amet culpa veritatis maxime debitis? Suscipit error amet quas sed?</p>
    <p>Magnam exercitationem neque error deleniti consequuntur, dolor repellat quo perferendis dicta sunt.</p>
    <p>Ipsum id repellat velit laudantium vel autem eos non aperiam qui nobis?</p>
    <p>Ratione maxime neque numquam minima, omnis dolorem temporibus laboriosam dolor atque suscipit?</p>
    <p>Dolores assumenda dolore similique eaque, odio voluptatibus. Aliquid iusto nostrum iste? Exercitationem.</p>
    <p>Quos adipisci ea ullam amet blanditiis voluptatibus, fuga laborum sed facere quasi!</p>
    <p>Odio rerum labore veritatis esse eaque quae debitis possimus ea omnis vitae.</p>
    <p>Quasi eum obcaecati laborum eaque nostrum numquam tempore reprehenderit qui beatae debitis?</p>
    <p>Optio atque fugit quia reprehenderit dolor rem et delectus praesentium ratione provident.</p>
    <p>Sed accusamus at architecto dolore minima error, assumenda amet nam perferendis odit?</p>
    <p>Et eius enim est hic doloribus reiciendis qui cupiditate? Autem, iure cupiditate?</p>
  </div>
<div>
<h3 id="text-wrap">text-wrap</h3>
</div>
<p>One of the newest properties (as of 2023) is <code>text-wrap</code>, which has two values that solve the type-setting problem of unbalanced lines. This includes preventing “orphans,” which describes a lonely word sitting by itself in the last text line.</p>
<p>The first available value is <code>balance</code>, which has a goal of evening out the number of characters per line of text.</p>
<p>There is a limitation of six lines of wrapped text, so the technique is best used on headlines or other shorter text passages. Limiting the scope of application also helps limit the impact on page rendering speed.</p>
<details open="">
  <summary>CSS for "Applying text-wrap: balance"</summary>
<pre><code><span>:is(h1, h2, h3, h4, .text-balance)</span> <span>{</span>
  <span>text-wrap</span><span>:</span> balance<span>;</span>

  <span>/* For demonstration */</span>
  <span>max-inline-size</span><span>:</span> 25ch<span>;</span>
<span>}</span>
</code></pre>
</details>

<div>
<p>This text has been balanced by text-wrap</p>
<p>This text has not been balanced by text-wrap</p>
</div>
<p>The other value of <code>pretty</code> specifically addresses preventing orphans and can be more broadly applied. The algorithm behind <code>pretty</code> will evaluate the last four lines in a text block to work out adjustments as needed to ensure the last line has two or more words.</p>
<details open="">
  <summary>CSS for "Applying text-wrap: balance"</summary>
<pre><code><span>p</span> <span>{</span>
  <span>text-wrap</span><span>:</span> pretty<span>;</span>

  <span>/* For demonstration */</span>
  <span>max-inline-size</span><span>:</span> 35ch<span>;</span>
<span>}</span>
</code></pre>
</details>

<div>
<p><strong>With text-wrap: pretty</strong></p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore cupiditate aliquid, facere explicabo voluptatibus iure! Saepe nostrum quasi corporis totam accusamus beatae obcaecati rerum fugiat minima perferendis voluptatibus.</p>
<p><strong>Without</strong></p>
<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore cupiditate aliquid, facere explicabo voluptatibus iure! Saepe nostrum quasi corporis totam accusamus beatae obcaecati rerum fugiat minima perferendis voluptatibus.</p>
</div>
<p>Use of <code>text-wrap</code> is a great progressive enhancement. However, any adjustments do not change an element's computed width, so a side-effect in some layouts may be an increase in unwanted space next to the text.</p>
<div>
<h3 id="scrollbar-gutter">scrollbar-gutter</h3>
</div>
<p>In some scenarios, the appearance or disappearance of scrollbars can cause an unwanted layout shift. For example, when a dialog overlay is displayed and the background page adds <code>overflow: hidden</code> to prevent scrolling, causing a shift from removing the no longer needed scrollbars.</p>
<p>The modern CSS property <code>scrollbar-gutter</code> enables a reservation of space for scrollbars in the layout, which prevents that undesirable shift. When there’s no need for a scrollbar, the browser will still paint a gutter as extra space created in addition to any padding on the scroll container.</p>
<blockquote>
<p><strong>Important</strong>: This property only has an effect when the user’s system settings are <em>not</em> for “overlay” scrollbars, as in the default for Mac OS, where the scrollbar only appears as an overlay on content that is actively being scrolled. Do not drop padding in favor of <code>scrollbar-gutter</code> since you will lose all intended space when overlay scrollbars are in use.</p>
</blockquote>
<p>Since this is visually apparent extra space, you may choose to assign this property using two keywords: <code>scrollbar-gutter: stable both-edges</code>. The use of <code>stable</code> by itself only adds a gutter where the scrollbar would otherwise be, while the addition of <code>both-edges</code> preferences adding the space to the opposite side of the scroll container, too. This ensures visual balance when the layout doesn’t yet need scrollbars to be visible. See <a href="https://defensivecss.dev/tip/scrollbar-gutter/">a visual of using scrollbar-gutter</a> from Ahmad Shadeed.</p>
<hr>
<p>Be sure to review more of the articles here to upgrade your CSS knowledge even more! A great place to start is <a href="https://moderncss.dev/topics/">the topics list.</a></p>

      
    </article>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ubuntu Looking at Applying Low-Latency Optimizations to Its Generic Kernel (117 pts)]]></title>
            <link>https://www.phoronix.com/news/Ubuntu-Low-Lat-Generic-Kernel</link>
            <guid>39173229</guid>
            <pubDate>Mon, 29 Jan 2024 06:09:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.phoronix.com/news/Ubuntu-Low-Lat-Generic-Kernel">https://www.phoronix.com/news/Ubuntu-Low-Lat-Generic-Kernel</a>, See on <a href="https://news.ycombinator.com/item?id=39173229">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><img alt="UBUNTU" src="https://www.phoronix.com/assets/categories/ubuntu.webp" width="100" height="100"></p><p>
Ubuntu has long provided a "low-latency" kernel build intended for industrial embedded systems and other latency sensitive environments. Ahead of Ubuntu 24.04 LTS, Canonical is looking at applying those low-latency optimizations to their generic kernel build.
</p><p>
Ubuntu 24.04 LTS keeps getting more interesting from the performance department... From being aggressive in <a href="https://www.phoronix.com/news/Ubuntu-24.04-Will-Use-Linux-6.8">targeting the Linux 6.8 kernel</a>, <a href="https://www.phoronix.com/news/Ubuntu-Frame-Pointers-Default">frame pointers by default</a>, <a href="https://www.phoronix.com/review/ubuntu-x86-64-v3-benchmark">experimenting with Ubuntu x86-64-v3 builds</a>, and more, this next long-term support release of Ubuntu Linux is looking quite interesting. The latest is now considering applying their low-latency changes to the generic kernel build used by Ubuntu.
</p><p>
Ubuntu's low-latency kernel is mostly Kconfig configuration changes applied to their kernel build that they are now at least considering to make by default. <a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/2051342">This Launchpad bug report elaborates</a>:
</p><blockquote>Ubuntu provides the "lowlatency" kernel: a kernel optimized for applications that have special "low latency" requirements.
<p>
Currently, this kernel does not include any specific UBUNTU SAUCE patches to improve the extra "low latency" requirements, but the only difference is a small subset of .config options.
</p><p>
Almost all these options are now configurable either at boot-time or even at run-time, with the only exception of CONFIG_HZ (250 in the generic kernel vs 1000 in the lowlatency kernel).
</p><p>
Maintaining a separate kernel for a single config option seems a bit overkill and it is a significant cost of engineering hours, build time, regression testing time and resources. Not to mention the risk of the low-latency kernel falling behind and not being perfectly in sync with the latest generic kernel.
</p><p>
Enabling the low-latency settings in the generic kernel has been evaluated before, but it has been never finalized due to the potential risk of performance regressions in CPU-intensive applications (increasing HZ from 250 to 1000 may introduce more kernel jitter in number crunching workloads). The outcome of the original proposal resulted in a re-classification of the lowlatency kernel as a desktop-oriented kernel, enabling additional low latency features (LP: #2023007).</p></blockquote>
<p>Among the changes in the low-latency kernel are enabling CONFIG_NO_HZ_FULL for full tickless mode, CONFIG_RCU_NOCB_CPU for moving RCU callbacks to the KThread context, CONFIG_RCU_LAZY for batch RCU callbacks, and CONFIG_HZ=1000 for 1000Hz to improve system responsiveness.
</p><p>
The worry is primarily over risking HPC / server workload performance. But, hey, I invite that as an opportunity now to run some fresh Phoronix benchmarks of the Ubuntu kernel offerings in the coming days...
</p><p><img src="https://www.phoronix.net/image.php?id=epyc-8324p-siena&amp;image=amd_epyc8324_3_med" alt="AMD EPYC server CPUs"></p>
<p>The matter of applying the low-latency settings to Ubuntu's generic kernel build are still to be determined and those wanting to find the latest can do so via <a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/2051342">this Launchpad bug</a>. It will be interesting to see what they decide and what other performance changes they may pursue for Ubuntu 24.04 LTS.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Global Room-Temperature Superconductivity in Graphite (111 pts)]]></title>
            <link>https://onlinelibrary.wiley.com/doi/10.1002/qute.202300230</link>
            <guid>39173150</guid>
            <pubDate>Mon, 29 Jan 2024 05:57:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://onlinelibrary.wiley.com/doi/10.1002/qute.202300230">https://onlinelibrary.wiley.com/doi/10.1002/qute.202300230</a>, See on <a href="https://news.ycombinator.com/item?id=39173150">Hacker News</a></p>
Couldn't get https://onlinelibrary.wiley.com/doi/10.1002/qute.202300230: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Why is Maxwell's theory so hard to understand? (2007) [pdf] (227 pts)]]></title>
            <link>https://www.damtp.cam.ac.uk/user/tong/em/dyson.pdf</link>
            <guid>39172859</guid>
            <pubDate>Mon, 29 Jan 2024 05:00:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.damtp.cam.ac.uk/user/tong/em/dyson.pdf">https://www.damtp.cam.ac.uk/user/tong/em/dyson.pdf</a>, See on <a href="https://news.ycombinator.com/item?id=39172859">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Why You've Never Been in a Plane Crash (275 pts)]]></title>
            <link>https://asteriskmag.com/issues/05/why-you-ve-never-been-in-a-plane-crash</link>
            <guid>39172858</guid>
            <pubDate>Mon, 29 Jan 2024 05:00:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://asteriskmag.com/issues/05/why-you-ve-never-been-in-a-plane-crash">https://asteriskmag.com/issues/05/why-you-ve-never-been-in-a-plane-crash</a>, See on <a href="https://news.ycombinator.com/item?id=39172858">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    
    <div data-mode="add-marker">
        <p><img id="marker" src="https://asteriskmag.com/assets/img/asterisk_mark.png" title="save highlight"></p><!-- <a href="https://asteriskmag.com/about/#highlights"><img id="help" src="https://asteriskmag.com/assets/img/asterisk_help.png" title="about highlights"></a> -->
        
    </div>

    <section>
                
                   <h2>
                   
                    <span>Kyra Dempsey</span>
                            </h2>
            </section>
    <section id="rangyscope">
                    <p>The United States leads the world in airline safety. That’s because of the way we assign blame when accidents do happen.</p>
                <div>
                                            <div><p>What is the worst imaginable consequence of making a mistake? For some, it might be this:</p><p>“I really thought I was going to die,” said USAir passenger Laurel Bravo, speaking to the Associated Press. “The row ahead of us just disappeared. The seats all went flying downward…”</p></div>
                                            <div><figure>
      <p><img src="https://asteriskmag.com/media/pages/issues/05/why-you-ve-never-been-in-a-plane-crash/0c2e2d9fb3-1705939485/120623_am_05_opener_mm_web.png" alt="">
  </p>
    <p>
    Illustrations: Mike McQuade  </p>
  </figure>
</div>
                                            <div><p>For the 89 passengers and crew aboard USAir flight 1493, it had been an unremarkable flight from takeoff in Columbus, Ohio, to touchdown at Los Angeles International Airport. That evening, the first of February 1991, the weather was perfectly clear, the Boeing 737 had a clean sheet with no mechanical faults, and with the runway in sight from 25 miles out, the approach was uneventful. Flying the plane from the right seat, First Officer David Kelly pulled the nose up to ease the touchdown and greased it onto runway 24 Left. He then brought the nose back down, smooth and steady. And then, without time to even shout, all hell broke loose.</p><p>&nbsp;Kelly would later recall seeing the brief flash of a propeller before he instinctively pushed the brake pedal to the floor, but it was much too late. With a powerful jolt and a metallic screech, the 737 plowed into a small commuter plane, crushing the hapless turboprop beneath and propelling it forward down the runway at over 90 miles an hour. In the cabin of the 737, the lights went out and fire billowed past the windows. Locked together, the two planes veered left, crossed a grass strip and a taxiway, and collided at freeway speed with an abandoned airport fire station.</p><p>The impact instantly killed all 12 people aboard the commuter plane, as well as the USAir captain, Colin Shaw, but the ordeal for the survivors was far from over. The small plane’s fuel tanks burst during the crash. A pool of fuel ignited underneath the USAir 737, sending plumes of smoke into the cabin. Passengers fought their way to the exits amid choking fumes, braving long drops and roaring flames in their frantic rush to escape. Not everyone made it: firefighters would later discover the bodies of 19 passengers and a flight attendant lying in the aisle, where they collapsed. Two more badly burned passengers would later die in hospital, bringing the final death toll to 35.</p><p>But that was yet to come. In fact, in the first few minutes after the accident, airport officials didn’t even know that two planes were involved. Air traffic controllers told fire crews that a Boeing 737 crashed, but as firefighters worked the scene, they reported discovering a propeller in the wreckage. The Boeing 737 is a jet; it doesn’t have any propellers. Clearly another airplane was involved, but which one — and why was it there?</p><p>***</p></div>
                                            <div><p>At the LAX control tower, local controller Robin Lee Wascher was taken off duty — as is standard practice after a crash. After hearing about the propeller, she knew she must have cleared USAir flight 1493 to land on an occupied runway. As tower supervisors searched for any sign of a missing commuter flight, Wascher left the room. Replaying the events in her mind, she realized that the missing plane was SkyWest flight 5569, a 19-seat Fairchild Metroliner twin turboprop bound for Palmdale. Several minutes before clearing the USAir jet to land, she had told flight 5569 to “taxi into position and hold” on runway 24L. But she could not recall having cleared it for takeoff. The plane was probably still sitting “in position” on the runway waiting for her instructions when the USAir 737 plowed into it from behind. It was a devastating realization, but an important one, so in an act of great bravery, she returned to the tower, pointed to flight 5569, and told her supervisor, “This is what I believe USAir hit.”</p><p><strong>***</strong></p><p>According to the timeline later reconstructed by the National Transportation Safety Board, the pilot of SkyWest 5569 asked for permission to take off from a location partway down the runway called Intersection 45. Wascher cleared the flight to enter the runway at this location, but she didn’t give takeoff clearance because another Metroliner from a rival commuter airline already had permission to cross the runway ahead of it.&nbsp;</p><p>Several events then occurred in quick succession. First, the second Metroliner tuned in to the wrong frequency, and she had to track it down and reissue its clearance to cross the runway. Then a Southwest flight announced that it was ready to enter runway 24L, so she told it to hold short. And finally, another SkyWest flight took off on runway 24R and had to be handed to the next controller. Unfortunately, amid these multiple distractions, she simply forgot that SkyWest 5569 was still sitting on runway 24L, awaiting takeoff clearance. Moments later, she cleared USAir flight 1493 to land, unaware that she was making a catastrophic error.</p><p>The fact that Wascher made a mistake was self-evident, as was the fact that that mistake led, more or less directly, to the deaths of 35 people. The media and the public began to question the fate of Ms. Wascher. Should she be punished? Should she lose her job? Did she commit an offense?&nbsp;</p><p>How the authorities choose to handle such a mistake says a lot about our society’s conceptions of justice, culpability, agency, empathy, and even vengeance, because the moral dilemma of what to do about Robin Wascher exists as a struggle between diverging values and, in fact, diverging <em>value systems</em>, rooted in the relative prioritization of individual and systemic responsibility.</p><p>Cutting straight to the case, Wascher was not punished in any way. At first, after being escorted, inconsolable, from the tower premises, her colleagues took her to a hotel and stood guard outside her room to keep the media at bay. Months later, Wascher testified before the NTSB hearings, providing a faithful and earnest recounting of the events as she recalled them. She was even given the opportunity to return to the control tower, but she declined. No one was ever charged with a crime.&nbsp;</p><p>As the aviation industry has learned through hard-won experience, that’s usually how it should be.</p></div>
                                            <div><figure>
      <p><img src="https://asteriskmag.com/media/pages/issues/05/why-you-ve-never-been-in-a-plane-crash/eec9c50587-1704925948/spot_1_web.png" alt="">
  </p>
  </figure>
</div>
                                            <p><h2><strong>A brief history of blame</strong></h2>
</p>
                                            <div><p>In the aftermath of a disaster, our immediate reaction is often to search for some <em>person</em> to blame. Authorities frequently vow to “find those responsible” and “hold them to account,” as though disasters happen only when some grinning mischief-maker slams a big red button labeled “press for catastrophe.” That’s not to say that negligence ought to go unpunished. Sometimes there really is a malefactor to blame, but equally often there isn’t, and the result is that normal people who just made a mistake are caught up in the dragnet of vengeance, like the famous 2009 case of six Italian seismologists who were charged for failing to predict a deadly earthquake. But when that happens, what is actually accomplished? Has anything been made <em>better</em>? Or have we simply kicked the can down the road?&nbsp;</p><p>It’s often much more productive to ask <em>why</em> than to ask <em>who</em>. In some industries, this is called a “blameless postmortem,” and in aviation, it’s a long-standing, internationally formalized tradition. In the mid-20th century, when technical investigations of aircraft accidents were first being standardized, an understanding emerged that many crashes were not the result of any particular person’s actions. Most famously, in 1956, the Civil Aeronautics Board’s Bureau of Aviation Safety, the predecessor to today’s NTSB, concluded that no one was at fault in a collision of two airliners over the Grand Canyon because the two crews likely could not have seen each other coming until it was too late. The cause of the accident, they determined, was the lack of any positive means to prevent midair collisions.&nbsp;</p><p>The exact origins of this norm are debatable, but we might speculate that it arose from several factors, including the lack of survivors or witnesses in many early aircraft accidents, which left scant evidence with which to assign fault; the fact that pilots held high status in society and many were reluctant to blame them in the absence of such evidence; and the presumption that flying was dangerous and that disaster was not always an aberration of nature. These realities likely predisposed aeronautical experts to think in terms other than blame.</p><p>The end result was that the aviation industry became one of the first to embrace the concept of a “blameless postmortem” as a legally codified principle underpinning all investigations. In 1951, compelled by the reality that their industry was not widely regarded as safe, aviation experts from around the world gathered to compose Annex 13 to the Chicago Convention on International Civil Aviation. This seminal document aimed to standardize the conduct of air accident investigations among all member states of the International Civil Aviation Organization.&nbsp;</p><p>Annex 13 holds that the primary purpose of an aircraft accident investigation is to prevent future accidents — a decision that implicitly privileged prevention above the search for liability. Conducting a police-style investigation that faults a deceased pilot does nothing to affect the probability of future accidents. To follow the spirit of Annex 13, investigators must ask how others could be prevented from making the same mistakes in the future. This document, and in particular this provision, formed the basis for the modern practice of aircraft accident investigation. Most aircraft accident reports around the world today open with some variant of the principle, such as the NTSB’s disclaimer:</p><p>The NTSB does not assign fault or blame for an accident or incident; rather, as specified by NTSB regulation, “accident/incident investigations are fact-finding proceedings with no formal issues and no adverse parties…and are not conducted for the purpose of determining the rights or liabilities of any person.”</p><p>When liability is not a concern, an investigation has leeway to draw more meaningful conclusions. In the case of the disaster in Los Angeles, if you listen to the tower tapes, you can easily identify the moment Wascher cleared two planes to use the same runway. But if you remove her from the equation, you haven’t made anything safer. That’s because there was nothing special about Wascher — she was simply an average controller with an average record, who came into work that day thinking she would safely control planes for a few hours and then go home. That’s why in interviews with national media her colleagues hammered home a fundamental truth: that what happened to her could have happened to any of them. And if that was the case, then the true cause of the disaster lay somewhere higher, with the way air traffic control was handled at LAX on a systemic level.</p></div>
                                            <p><h2><strong>Lessons in Los Angeles</strong></h2>
</p>
                                            <div><p>If 35 people can die because a single controller made a single mistake, that’s not a system in which we can place our trust. Humans are fallible creatures who make poor decisions, misinterpret data, and forget things. In a system where lives may depend on the accuracy of a single person, disaster is not only probable but, given enough time, <em>inevitable</em>. Barring cases of anomalous recklessness or incompetence, it won’t matter who is sitting in the controller’s chair when the collision happens. And the only way to fix such a system is to end the reliance on individuals by putting in place safeguards against error.</p><p>That’s where the NTSB steps in to uncover the overarching circumstances that made disaster possible. Why was the system dependent on one controller’s accuracy? What factors increased the probability of a mistake? The agency ultimately wrote a lengthy report on these questions, but the findings can be boiled down to the following:</p><p><strong>1.</strong> LAX was equipped with ground radar that helped identify the locations of airplanes on the airport surface. However, it was custom built and finding spare parts was hard, so it was frequently out of service. The ground radar display at Wascher’s station was not working on the day of the accident.</p><p><strong>2.</strong> It was difficult for Wascher to see Intersection 45, where the SkyWest plane was located, because lights on a newly constructed terminal blocked her view.</p><p><strong>3.</strong> After clearing the USAir plane to land, Wascher failed to recognize her mistake because she became distracted searching for information about another plane. This information was supposed to have been passed to her by another controller but was not. The information transmission hierarchy at the facility was such that the task of resolving missing data fell to Wascher rather than intermediate controllers whose areas of responsibility were less safety-critical.</p><p><strong>4</strong>. Although it’s inherently risky to instruct a plane to hold on the runway at night or in low visibility, it was legal to do so, and this was done all the time.</p><p><strong>5.</strong> Although there was an alarm system to warn of impending midair collisions, it could not warn controllers about traffic conflicts on the ground.</p><p><strong>6.</strong> Pilot procedure at SkyWest was to turn on most of the airplane’s lights only after receiving takeoff clearance. Since SkyWest flight 5569 was never cleared for takeoff, most of its lights were off, rendering it almost impossible for the USAir pilots to see.</p><p>With these facts in mind, the events of that night begin to make a lot more sense. In fact, it becomes plain that Wascher’s mistake was only one factor among many, a slight jolt that toppled a house of cards, rather than an earthquake that brought down a solidly constructed edifice. And as a result of these findings, genuine safety improvements have been made, including more reliable ground radar at more airports, automated ground collision alerting technologies, and a national ban on clearing planes to hold on the runway in low visibility. None of these improvements would have been made if the inquiry stopped at <em>who</em> instead of asking <em>why</em>.</p><p>The key takeaway from the success of this approach is that safety improvements are best achieved when an honest mistake is treated as such, regardless of the consequences. This principle underpins what is known in several advanced industries as the “just culture” concept. A just organizational culture recognizes that a high level of operational safety can be achieved only when the root causes of human error are examined; who made a mistake is far less important than why it was made.&nbsp;</p><p>A just culture encourages self-reporting of errors in order to gather as much data about those errors as possible. In contrast, an organization without a just culture will be left unaware of its own vulnerabilities because employees hide their mistakes for fear of retribution. Such an organization will discover those vulnerabilities only when they result in consequences that are impossible to hide.</p><p>Sometimes disasters happen anyway, and when they do, it’s equally critical that the just culture is upheld. Although it can be hard to accept that a mistake that led to loss of life might go unpunished, just culture doesn’t permit us to discriminate based on the magnitude of the consequences — only on the attitude of the person who committed the error. If they were acting in good faith when the mistake occurred, then a harsh reaction would undermine the trust between employees and management that facilitates the just culture. But even more importantly, it would undermine the blameless investigative process that makes modern aviation so safe. Investigative agencies like the NTSB rely on truthful statements from those involved in an accident in order to determine what happened and why, and the truth can’t be acquired when individuals fear punishment for speaking it. Indeed, if Wascher were charged with a crime, her lawyers would have been required to produce a defense, and the investigative waters would have been forever clouded.</p></div>
                                            <div><figure>
      <p><img src="https://asteriskmag.com/media/pages/issues/05/why-you-ve-never-been-in-a-plane-crash/e53c58d375-1704925960/spot_2_web.png" alt="">
  </p>
  </figure>
</div>
                                            <p><h2><strong>Sticking the landing</strong></h2>
</p>
                                            <div><p>Examples of this problem can be found throughout aviation history. For instance, in 1983 an Air Canada Boeing 767 famously landed on a drag strip in Manitoba after running out of fuel in flight, an incident known as the “Gimli Glider.” The captain of the flight was found to have taken off without working fuel gauges, in direct contradiction of airworthiness requirements, which stipulate that at least one gauge must be working.</p><p>At that time accident investigations in Canada were assigned to a commission of inquiry led by a judge who possessed the power to recommend criminal prosecution of anyone involved (a power that the NTSB does not wield). During the investigation, the flight’s captain told investigators that he examined the master minimum equipment list, which describes the systems that may be inoperative when dispatching an airplane. He allegedly observed that at least one fuel gauge was required but then learned from a maintenance technician that Air Canada “Maintenance Central” had cleared the plane to fly in that condition, overriding the MMEL.</p><p>However, everyone else who was present, including the first officer and two maintenance techs, denied that anyone had mentioned a clearance from Maintenance Central or that the MMEL was ever consulted. Indeed, not only did Maintenance Central not give the claimed clearance, it lacked the authority to do so even if it wanted to. Considering this testimony, it seems likely that the captain simply failed to check whether dispatch with two inoperative fuel gauges was allowed. But because he could have exposed himself to the threat of prosecution if he admitted to such a lapse, he (or his lawyers) may have come up with the alternative story in order to preclude the possibility of retaliation. Therefore, the exact reason why he decided to take off with no fuel gauges couldn’t be determined conclusively.</p><p>Fortunately, in many countries (including present-day Canada) this is not the case. Not only does the NTSB have no law enforcement power, but its findings are legally inadmissible as evidence of liability. In the United States, Robin Wascher is a shining example of bravery in truth-telling, but plenty of other pilots and controllers who made mistakes have done the same, because assurances exist that what they tell the NTSB will not be used in court.</p><p>Sometimes, employers independently decide to fire pilots involved in accidents, but the practice is subject to heavy criticism from pilots’ unions and just culture experts. Equally as often, pilots who make honest mistakes get to keep their jobs, such as the first officer aboard American Airlines flight 1420, whose failure to arm the ground spoilers before landing in Little Rock in 1999 contributed to a runway overrun accident that killed 11 people. As of 2019 he was still flying for American Airlines — and had been promoted to captain — because his mistake was due to deeper cultural issues in the airline industry. And besides, given what he went through, it’s hard to imagine that he would ever forget to arm the spoilers again.</p><p><strong>***</strong></p><p>The efficacy of just culture and the blameless postmortem is hardly in doubt. The United States has achieved the safest airline industry in the world through rigorous root cause analysis made possible only by a commitment to transparency, justice, and truth. While nothing humanity builds is invincible, the safeguards that we have erected against human error are so formidable that in the 33 years since the crash at LAX, there hasn’t been another fatal runway collision at any U.S. airport with a control tower, even as the media breathlessly reports every near miss. Globally, airline accidents of all causes have been almost eliminated, even as global air traffic increases year-on-year. In 1972, by most measurements the nadir of global aviation safety, approximately one in 200,000 airline passengers worldwide did not reach their destination alive. Half a century later in 2022, this number was one in 17 million. In the U.S., where airline safety has always led the global average, no scheduled passenger airline has had a fatal crash in 15 years.</p><p>The laws of the universe dictate that this unbroken record will one day end, but it’s also true that if we believe responsibility for human errors to lie with the individual, then many more people would be senselessly sacrificed — not only those of the passengers aboard our planes but those of the pilots and air traffic controllers who are responsible for them. Recognizing that mistakes are inevitable has made us all safer by directing our collective energy toward the cause, rather than the symptoms — because the cause of the Los Angeles disaster was not Robin Wascher forgetting about an airplane, but rather an unforgiving system that required her to act with inhuman consistency. Our own humanity compels us to withhold judgment because it makes flying safer, because justice demands it, and because empathy is rewarded in kind.</p></div>
                                         
                </div>
        
    </section>

 
               <section>
                      <p><strong>Kyra Dempsey</strong> is a Seattle-based aviation writer who publishes accident and incident breakdowns for professional and lay audiences under the name Admiral Cloudberg.</p>                                 </section>
       


    <section>            
        <p>
            Published February 2024        </p>
        
        <p>Have something to say? Email us at <a href="mailto:letters@asteriskmag.com">letters@asteriskmag.com</a>.</p>                                
    </section>
      
    
    

    <!--tags-->
     

    
                
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Eagle 7B: Soaring past Transformers (376 pts)]]></title>
            <link>https://blog.rwkv.com/p/eagle-7b-soaring-past-transformers</link>
            <guid>39172837</guid>
            <pubDate>Mon, 29 Jan 2024 04:55:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.rwkv.com/p/eagle-7b-soaring-past-transformers">https://blog.rwkv.com/p/eagle-7b-soaring-past-transformers</a>, See on <a href="https://news.ycombinator.com/item?id=39172837">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png" width="1200" height="967.5824175824176" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:1174,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:7661615,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6bbd31a7-21b4-4ff6-b43f-8735d1decf25_2048x1652.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>An eagle, flying past a transformer-looking robot</figcaption></figure></div><p>Eagle 7B is a 7.52B parameter model that:</p><ul><li><p><span>Built on the </span><a href="https://wiki.rwkv.com/" rel="">RWKV-v5 architecture</a><br><span>(a linear transformer with 10-100x+ lower inference cost)</span></p></li><li><p><a href="https://blog.rwkv.com/p/the-worlds-greenest-ai-model-rwkvs" rel="">Ranks as the world’s greenest 7B model (per token)</a></p></li><li><p>Trained on 1.1 Trillion Tokens across 100+ languages</p></li><li><p>Outperforms all 7B class models in multi-lingual benchmarks</p></li><li><p>Approaches Falcon (1.5T), LLaMA2 (2T), Mistral (&gt;2T?) level of performance in English evals</p></li><li><p>Trade blows with MPT-7B (1T) in English evals</p></li><li><p><a href="https://www.isattentionallyouneed.com/" rel="">All while being an “Attention-Free Transformer”</a><br></p></li></ul><p><span>We are releasing RWKV-v5 Eagle 7B, </span><a href="https://blog.rwkv.com/p/rwkv-joins-the-linux-foundation-as" rel="">licensed as Apache 2.0 license, under the Linux Foundation</a><span>, and can be used personally or commercially without restrictions</span></p><ul><li><p><a href="https://huggingface.co/RWKV/v5-Eagle/blob/main/RWKV-v5-Eagle-World-7B-v2-20240128-ctx4096.pth" rel="">Download from Huggingface</a><span>, and use it anywhere (even locally)</span></p></li><li><p><span>Use our reference </span><a href="https://pypi.org/project/rwkv/" rel="">pip inference package</a><span>, or any other community inference options (</span><a href="https://github.com/josStorer/RWKV-Runner" rel="">Desktop App</a><span>, </span><a href="https://github.com/saharNooby/rwkv.cpp" rel="">RWKV.cpp</a><span>, </span><a href="https://wiki.rwkv.com/basic/play.html" rel="">etc</a><span>)</span></p></li><li><p><a href="https://github.com/RWKV/RWKV-infctx-trainer" rel="">Fine-tune using our Infctx trainer</a></p></li><li><p><a href="https://huggingface.co/spaces/BlinkDL/RWKV-Gradio-2" rel="">Try it online on Huggingface</a></p></li><li><p><a href="https://github.com/huggingface/transformers/pull/26963" rel="">[Pending PR] Get it merged into Huggingface transformers!</a></p></li></ul><p><span>We performed multi-lingual performance across the following benchmarks: </span><a href="https://github.com/EleutherAI/lm-evaluation-harness?tab=readme-ov-file#advanced-usage-tips" rel="">xLAMBDA</a><span>, </span><a href="https://huggingface.co/datasets/Muennighoff/xstory_cloze" rel="">xStoryCloze</a><span>, </span><a href="https://huggingface.co/datasets/Muennighoff/xwinograd" rel="">xWinograd</a><span>, </span><a href="https://huggingface.co/datasets/xcopa" rel="">xCopa</a></p><p>Across a total of 23 languages</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png" width="1200" height="362.6373626373626" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:440,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:185118,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F432a507a-d2a1-4741-b196-d34a411aa960_1462x442.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png" width="1200" height="358.5164835164835" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:435,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:129293,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F51648027-6abf-4b05-88c0-06175e3b9cb5_1739x519.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Most of these benchmarks cover common sense reasoning, in their respective languages. And show a huge overall jump in multi-lingual performance for RWKV v4-to-v5 architecture. And the v2 world dataset.</p><p>It should also be noted, that there is a lack of multi-lingual benchmarks, as the above covers approximately the top 23 languages.</p><p>This makes it hard to evaluate model language performance directly over the remaining 75+ languages, over the total 100+ trained languages. A shortcoming we hope to improve in future models.</p><p>English performance was measured across 12 separate benchmarks, across commonsense reasoning, and world knowledge</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png" width="1200" height="206.86813186813185" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:251,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:349737,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6ea68f59-8f76-48ea-b4c6-15f292c8a46c_2559x441.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Once again we see a huge overall jump from RWKV v4-to-v5 architecture. And the v2 world dataset.</p><p>Where v4 previously lost out to MPT-7b, the top model in the 1T token tier. </p><p>v5 begins trading blows in benchmarks, in some cases even coming on top in certain benchmarks ( LAMBADA, StoryCloze16, WinoGrande, HeadQA_en, Sciq ) over Falcon, or even llama2.</p><p>In addition, v5 performance starts to fall in line with the expected transformer performance level, with its given approximate token training count.</p><p>With Mistral-7B maintaining its lead with its rumored 2~7 Trillion token training.</p><p>We expect to narrow the gap, as we train an additional 1T token, to cross the llama2 line and hopefully reach the mistral line.</p><p>Alternatively, as a base model, which is lightly tuned (really small instruct set mixed in), we are eager to see how the various community and instruct-tuned variants</p><p>A notable observation was that our checkpoints near the 300 Billion token point, show similar performance to pythia-6.9b</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png" width="988" height="268" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:268,&quot;width&quot;:988,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:85110,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97b32c55-9a16-4a70-9e1e-8d2370721660_988x268.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>This is consistent with previous pile-based experiments on our RWKV-v4 architecture, that linear transformers like RWKV scale similarly in performance levels to transformers, with the same token count training.</p><p>If so, it does repeat the question. If the exact architecture, matter less than the data for the model eval performance?</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png" width="616" height="463" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/f819aa3e-d559-41a9-879a-2a157c323787_616x463.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:463,&quot;width&quot;:616,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:61048,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff819aa3e-d559-41a9-879a-2a157c323787_616x463.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>CUDA computational cost, for RWKV-based architecture vs transformer models - that quadratic-vs-linear really scales!</figcaption></figure></div><p><span>If true, perhaps we should seek more efficient and scalable architecture, to increase accessibility, drive the cost of AI downwards for everyone, and </span><a href="https://blog.rwkv.com/p/the-worlds-greenest-ai-model-rwkvs" rel="">lessen the impact on our environment.</a></p><p>A common feedback we receive for the RWKV multi-lingual approach is</p><ul><li><p>it hurts our English evaluation scores and slows the growth of linear transformers </p></li><li><p>that it is not fair to compare the multi-lingual performance of a multi-lingual model -vs- a purely English model</p></li></ul><p>And for most parts, we agree on both points.</p><p>But we have no plans on changing this, as we are building AI for the world - which is not just an English world.</p><p><a href="https://preply.com/en/blog/english-language-statistics/#:~:text=Current%20research%20suggests%20that%20the,widely%20spoken%20language%20in%202022%3F" rel="">In 2023, only 17% of the world's population speaks English</a><br><a href="https://preply.com/en/blog/english-language-statistics/#:~:text=Current%20research%20suggests%20that%20the,widely%20spoken%20language%20in%202022%3F" rel="">( 1.3 billion people ) </a></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png" width="1280" height="615" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:615,&quot;width&quot;:1280,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:394289,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3f204b8b-69d2-47d7-b7b0-cd284ac7892b_1280x615.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>World Map showing the distribution of regions and people who are fluent in English (source: Wikipedia)</figcaption></figure></div><p><span>However, by ensuring support for the top 25 languages in the world and beyond, we can cover approximately </span><a href="https://en.wikipedia.org/wiki/List_of_languages_by_number_of_native_speakers#Top_languages_by_population" rel="">4 billion people, or 50% of the world</a></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png" width="780" height="533" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/f8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:533,&quot;width&quot;:780,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:139698,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff8f5d7d9-604f-439e-a4fe-8c4869003cca_780x533.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Incomplete map, of regions where the Eagle Language model will support entirely or partially</figcaption></figure></div><p>This aligns well with the team’s common goal, of getting AI to support everyone, not just by allowing it to run cheaply and affordably even on lower-end hardware. But by supporting their language.</p><p><span>A major example of this in our community is the </span><a href="https://discord.gg/dy9YWXjV" rel="">Indonesian-NLP discord group</a><span>, which finetunes an Indonesian language model from the RWKV line of base models.</span></p><p>Allowing them to build strong language-specific models - on a cheap affordable basis (ie. single node), without needing to do half a million dollars of pre-training.</p><p>This release marks the release of the strongest linear transformer (in terms of eval benchmarks) to date. </p><p>While it may not have succeeded in passing LLaMA2 and Mistral. It provides strong evidence of the following</p><ul><li><p>The RWKV-v5 model architecture scales similarly to transformer performance with a similar token count</p></li><li><p>You can achieve a near LLaMA2-like level of performance, with a substantially lower inference cost</p></li><li><p><span>While supporting multi-lingual levels of performance</span><br></p></li></ul><p>We plan to follow by pushing further ahead with</p><ul><li><p>[Feb 2024] An updated RWKV v5: Eagle paper, where we will go deeper in-depth on the architecture changes since v4, and the model benchmarks and evals</p></li><li><p>[Feb 2024] A further 1T token in training (2T total), for direct comparisons with the LLaMA2 7B model</p></li><li><p>[Mar 2024] An MoE model based on the v5 Eagle 2T model</p></li><li><p>[Mar 2024] RWKV-v6: “Finch” 1.5B, 3B world models</p></li></ul><blockquote><p>Disclaimer: All dates are approximate, and is heavily subjected to compute avaliability from our sponsors/provider</p></blockquote><p>We are grateful and would like to thank the following key groups:</p><ul><li><p><a href="https://stability.ai/" rel="">StabilityAI</a><span> for the bulk of the computing provided to train this foundation model</span></p></li><li><p><a href="https://www.eleuther.ai/" rel="">EleutherAI</a><span> for their support, especially in the ongoing paper-writing process</span></p></li><li><p><a href="https://lfaidata.foundation/" rel="">Linux Foundation AI &amp; Data group</a><span> for supporting and hosting the RWKV project</span></p></li></ul><p><span>Along with the various developers, working on the growing collection of </span><a href="https://wiki.rwkv.com/" rel="">RWKV-related projects</a><span>.</span></p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[New Renderers for GTK (325 pts)]]></title>
            <link>https://blog.gtk.org/2024/01/28/new-renderers-for-gtk/</link>
            <guid>39172377</guid>
            <pubDate>Mon, 29 Jan 2024 03:24:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.gtk.org/2024/01/28/new-renderers-for-gtk/">https://blog.gtk.org/2024/01/28/new-renderers-for-gtk/</a>, See on <a href="https://news.ycombinator.com/item?id=39172377">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-9754">
	<!-- .entry-header -->

	
	
	<div>
		<p>Recently, GTK gained not one, but two new renderers: one for GL and one for Vulkan.</p>
<p>Since naming is hard, we reused existing names and called them “ngl” and “vulkan”. They are built from the same <a href="https://gitlab.gnome.org/GNOME/gtk/-/tree/main/gsk/gpu">sources</a>, therefore we also call them “unified” renderers.</p>
<p>But what is exciting about them?</p>
<h3>A single source</h3>
<p>As mentioned already, the two renderers are built from the same source. It is modeled to follow Vulkan apis, with some abstractions to cover the differences between Vulkan and GL (more specifically, GL 3.3+ and GLES 3.0+). This lets us share much of the infrastructure for walking the scene graph, maintaining transforms and other state, caching textures and glyphs, and will make it easier to keep both renderers up-to-date and on-par.</p>
<p>Could this unified approach be extended further, to cover a Metal-based renderer on macOS or a DirectX-based one on Windows? Possibly. The advantage of the Vulkan/GL combination is that they share basically the same shader language (GLSL, with some variations). That isn’t the case for Metal or DirectX. For those platforms, we either need to duplicate the shaders or use a translation tool like <a href="https://github.com/KhronosGroup/SPIRV-Cross">SPIRV-Cross</a>.</p>
<p>If that is the kind of thing that excites you, help is welcome.</p>
<h3>Implementation details</h3>
<p>The old GL renderer uses simple shaders for each rendernode type and frequently resorts to offscreen rendering for more complex content. The unified renderers have (more capable) per-node shaders too, but instead of relying on offscreens, they will also use a complex shader that interprets data from a buffer. In game programming, this approach is known as a <a href="https://dolphin-emu.org/blog/2017/07/30/ubershaders/">ubershader</a>.</p>
<p>The unified renderer implementation is less optimized than the old GL renderer, and has been written with a focus on correctness and maintainability. As a consequence, it can handle much more varied rendernode trees correctly.</p>
<p>Here is an harmless-looking example:</p>
<pre>repeat {
  bounds: 0 0 50 50;
  child: border {
    outline: 0 0 4.3 4.3;
    widths: 1.3;
  }
}</pre>
<figure id="attachment_9883" aria-describedby="caption-attachment-9883"><a href="https://blog.gtk.org/files/2024/01/difficult.png"><img decoding="async" src="https://blog.gtk.org/files/2024/01/difficult.png" alt="" width="120" height="50"></a><figcaption id="caption-attachment-9883">gl (left) ngl (right)</figcaption></figure>
<figure id="attachment_9886" aria-describedby="caption-attachment-9886"><a href="https://blog.gtk.org/files/2024/01/difficult-zoom.png"><img decoding="async" src="https://blog.gtk.org/files/2024/01/difficult-zoom-300x125.png" alt="" width="300" height="125" srcset="https://blog.gtk.org/files/2024/01/difficult-zoom-300x125.png 300w, https://blog.gtk.org/files/2024/01/difficult-zoom.png 600w" sizes="(max-width: 300px) 85vw, 300px"></a><figcaption id="caption-attachment-9886">A close-up view</figcaption></figure>
<h3>New capabilities</h3>
<p>We wouldn’t have done all this work, if there wasn’t some tangible benefit. Of course, there’s new features and capabilities. Lets look at some:</p>
<p><em>Antialiasing. </em>A big problem with the old GL renderer is that it will just lose fine details. If something is small enough to fall between the boundaries of a single line of pixels, it will simply disappear. In particular this can affect&nbsp; underlines, such as mnemonics. The unified renderers handle such cases better, by doing antialiasing. This helps not just for preserving fine detail, but also prevents jagged outlines of primitives.</p>
<figure id="attachment_9805" aria-describedby="caption-attachment-9805"><a href="https://blog.gtk.org/files/2024/01/aa.png"><img decoding="async" src="https://blog.gtk.org/files/2024/01/aa-300x150.png" alt="" width="300" height="150" srcset="https://blog.gtk.org/files/2024/01/aa-300x150.png 300w, https://blog.gtk.org/files/2024/01/aa-1024x512.png 1024w, https://blog.gtk.org/files/2024/01/aa-768x384.png 768w, https://blog.gtk.org/files/2024/01/aa-1200x600.png 1200w, https://blog.gtk.org/files/2024/01/aa.png 1280w" sizes="(max-width: 300px) 85vw, 300px"></a><figcaption id="caption-attachment-9805">Close-up view of GL vs NGL</figcaption></figure>
<p><em>Fractional scaling. </em>Antialiasing is also the basis that lets us handle fractional scales properly. If your&nbsp; 1200 × 800 window is set to be scaled to 125 %, with the unified renderers, we will use a framebuffer of size 1500 × 1000 for it, instead of letting the compositor downscale a 2400 × 1600 image. Much less pixels, and a sharper image.</p>
<p><em>Arbitrary gradients. </em>The old GL renderer handles linear, radial and conic gradients with up to 6 color stops. The unified renders allow an <em>unlimited</em> number of color stops. The new renderers also apply antialiasing to gradients, so sharp edges will have smooth lines.</p>
<figure id="attachment_9895" aria-describedby="caption-attachment-9895"><a href="https://blog.gtk.org/files/2024/01/lg1.png"><img loading="lazy" decoding="async" src="https://blog.gtk.org/files/2024/01/lg1.png" alt="" width="301" height="47"></a><figcaption id="caption-attachment-9895">A linear gradient with 64 color stops</figcaption></figure>
<p><em>Dmabufs. </em>As a brief detour from the new renderers, we worked on dmabuf support and graphics offloading <a href="https://blog.gtk.org/2023/11/15/introducing-graphics-offload/">last fall</a>. The new renderers support this and extend it to create dmabufs when asked to produce a texture via the <a href="https://docs.gtk.org/gsk4/method.Renderer.render_texture.html">render_texture</a> api (currently, just the Vulkan renderer).</p>
<h3>Any sharp edges?</h3>
<p>As is often the case, with new capabilities comes the potential for new gotchas. Here are some things to be aware of, as an app developer:</p>
<p><em>No more glshader nodes.</em> Yes, they made for some fancy demos for 4.0, but they are very much tied to the old GL renderer, since they make assumptions about the GLSL api exposed by that renderer. Therefore, the new renderers don’t support them.</p>
<p>You have been warned in the docs:</p>
<blockquote><p>If there is a problem, this function returns FALSE and reports an error. You should use this function before relying on the shader for rendering and use a fallback with a simpler shader or without shaders if it fails.</p></blockquote>
<p>Thankfully, many uses of the glshader node are no longer necessary, since GTK has gained new features since 4.0, such as mask nodes and support for straight-alpha textures.</p>
<p><em>Fractional positions.</em> The old GL renderer is rounding things, so you could get away with handing it fractional positions. The new renderers will place things where you tell it. This can sometimes have unintended <a href="https://gitlab.gnome.org/GNOME/gtk/-/issues/6361">consequences</a>, so should be on the lookout and make sure that your positions are where they should be.</p>
<p>In particular, look out for out for cairo-style drawing where you place lines at half-pixel positions so they fill out one row of pixels precisely.</p>
<p><em>Driver problems. </em>The new renderers are using graphics drivers in new and different ways, so there is potential for triggering problems on that side.</p>
<p>Please file problems you see against GTK even if they look like driver issues, since it is useful for us to get an overview how well (or badly) the new code works with the variety of drivers and hardware out there.</p>
<h3>But is it faster?</h3>
<p>No, the new renderers are not faster (yet).</p>
<p>The old GL renderer is heavily optimized for speed. It also uses much simpler shaders, and does not do the math that is needed for features such as antialiasing. We want to make the new renderers faster eventually, but the new features and correctness make them very exciting, even before we reach that goal. All of the GPU-based renderers are more than fast enough to render todays GTK apps at 60 or 144 fps.</p>
<p>That being said, the Vulkan renderer comes close to matching and surpassing the old GL renderer in some unscientific benchmarks. The new GL renderer is slower for some reason that we have not tracked down yet.</p>
<h3>New defaults</h3>
<p>In the just-released 4.13.6 snapshot, we have made the ngl renderer the new default. This is a trial balloon — the renderers need wider testing with different apps too verify that they are ready for production. If significant problems appear, we can revert back to the gl renderer for 4.14.</p>
<p>We decided not make the Vulkan renderer the default yet, since it is behind the GL renderers in a few application integration aspects: the webkit GTK4 port works with GL, not with Vulkan, and GtkGLArea and GtkMediaStream currently both produce GL textures that the Vulkan renderer can’t directly import. All of these issues will hopefully be addressed in the not-too-distant future, and then we will revisit the default renderer decision.</p>
<p>If you are using GTK on very old hardware, you may be better off with the old GL renderer, since it makes fewer demands on the GPU. You can override the renderer selection using the GSK_RENDERER environment variable:</p>
<pre>GSK_RENDERER=gl</pre>
<h3>Future plans and possibilities</h3>
<p>The new renderers are a good foundation to implement things that we’ve wanted to have for a long time, such as</p>
<ul>
<li>Proper color handling (including HDR)</li>
<li>Path rendering on the GPU</li>
<li>Possibly including glyph rendering</li>
<li>Off-the-main-thread rendering</li>
<li>Performance (on old and less powerful devices)</li>
</ul>
<p>Some of these will be a focus of our work in the near and medium-term future.</p>
<h3>Summary</h3>
<p>The new renderers have some exciting features, with more to come.</p>
<p>Please try them out, and let us know what works and what doesn’t work for you.</p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Hell is other people: performance management at Big Tech (252 pts)]]></title>
            <link>https://lcamtuf.substack.com/p/hell-is-other-people-performance</link>
            <guid>39172054</guid>
            <pubDate>Mon, 29 Jan 2024 02:24:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lcamtuf.substack.com/p/hell-is-other-people-performance">https://lcamtuf.substack.com/p/hell-is-other-people-performance</a>, See on <a href="https://news.ycombinator.com/item?id=39172054">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p>I spent a fair portion of my adult life working for large tech companies. In all my interactions with peers, no other topic caused as much cynicism and angst as the question of performance management — that is, the labyrinthine processes the companies follow for deciding who to fire and who to reward for exemplary work.</p><p>Much of this anxiety arose from the belief that Big Tech wanted to instill a cutthroat environment where you’re always compelled to do your best. I don’t think that’s true: in rapidly growing companies with easy access to funding, there is no intrinsic incentive to fire mediocre staff. The process is stressful to managers, legally risky, and harmful to morale. This tendency to accumulate slack is precisely why profitable tech companies panic and go through overdue layoffs whenever the economic outlook turns for the worse.</p><p>The actual reason for performance management is that your employees are sticklers for fairness. The exact dollar figure on your paycheck matters a lot less than knowing there’s another person who does less and somehow earns more. As a manager, in every other 1:1, you hear your subordinates comparing themselves to others and demanding explanations for any perceived slights. Harboring low performers has corrosive effects on team dynamics — doubly so in places that attract talent through the mythos of only hiring the best.</p><p>For a long time, the prevailing corporate approach to performance management was to let the manager decide. After all, they had the expertise and the familiarity with the problem space, so it was believed that they’re best equipped to dole out punishment and deliver rewards. But this led to problems: some teams developed a reputation for leniency, and others for being too harsh. More insidiously, the setup allowed rumors to spread: a manager could be accused of giving preferential treatment to their buddies or love interests, with no way to disprove such claims; every company sooner or later developed extensive lore of this sort.</p><p>All this changed with Google. In its early years, the company sought to do things differently, and reinventing performance management was fair game. Google ultimately converged on a peer-based system where your performance is evaluated not by your boss, but by a selection of your coworkers. This promised greater fairness and improved transparency. Over the years, the model spread like a wildfire to other tech companies — and sometimes beyond.</p><p>Of course, the model imposed considerable burden across the company: once or twice a year, the entire business would grind to a halt as every employee was writing self-assessments and peer feedback, and then a significant proportion of senior staff was serving on committees. But the benefits seemed obvious — and well worth the price.</p><p>Except, the benefits never really materialized. The problem is that every employee is judged by their ability to get work done; in most roles, this depends on being able to get along with others, including strangers with different sensibilities and unfamiliar backgrounds. Providing honest, critical feedback is a significant and ultimately unnecessary social risk. It doesn’t help that the burden of the process prompts most to put the bare minimum of effort into individual reviews; a handful of platitudes is usually enough to get you through it and get back to work.</p><p>In the end, the feedback for most employees ends up being overwhelmingly positive — and uniformly bland. The usual exceptions are the absolute worst performers who wouldn’t survive under any other performance management regime; as well as a handful of unlucky folks who deliver solid results but lack social grace and self-promotion skills.</p><p>This outcome puts the organization in an unenviable position. To fix this, the managers are tasked with “interpreting” the feedback to arrive at some sort of a normalized ranking that can be used as a basis for firings, promotions, and bonuses. This happens behind the scenes in stuffy multi-hour meetings where the data is shuffled and massaged until it fits on some reasonable curve. The illusion of a peer-driven system is maintained — but in reality, for layoffs and compensation, the manager almost always makes the call, and peer feedback seldom reveals anything new.</p><p>To be fair, the promotion process can be different: in many places, it’s delegated to an independent committee of senior employees. The panel is unlikely to promote if the manager doesn’t support the bid, but on the flip side, having your manager’s blessing doesn’t guarantee success. The goal is to maintain a consistently high bar, but this comes at a hefty price. The committee is tasked with deciphering voluminous but sloppy feedback without the benefit of knowing the employee or understanding their work. In the end, they regularly deliver random, unsatisfying verdicts. “You’re doing great, we just need to structure your packet differently for the next cycle” is a common utterance when delivering the bad news.</p><p>The kicker is that the internal perception of this Google-originating process isn’t necessarily any better than that of what it sought to replace. At a great organizational cost, it merely traded the accusations of manager-level favoritism for grander conspiracy theories — sinister corporate agendas divined from the words of secretive, amorphous committees.</p><p>The promise of a more egalitarian performance management process is a part of the mythos of Big Tech; but it’s also a fascinating study of painting oneself into a corner, unable to walk back.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A writer fabricated a series of stories for Atlas Obscura (202 pts)]]></title>
            <link>https://thewalrus.ca/around-the-world-in-eighty-lies/</link>
            <guid>39172029</guid>
            <pubDate>Mon, 29 Jan 2024 02:18:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://thewalrus.ca/around-the-world-in-eighty-lies/">https://thewalrus.ca/around-the-world-in-eighty-lies/</a>, See on <a href="https://news.ycombinator.com/item?id=39172029">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-162064">

	
	
	
	<div>
		<!-- Ad-Auris -->
		
		<p><span>T</span><span>he story was charming:</span> a short article about soups, continually replenished for decades, secreted in jars across oceans. The soups, according to one source, were “older than Taylor Swift.” I devoured the article, published in December 2022 on <em><a href="https://www.atlasobscura.com/" rel="noopener" target="_blank">Atlas Obscura</a></em>, an online publication billed as “best-in-class journalism about hidden places, incredible history, scientific marvels, and gastronomical wonders,” and texted it to a few soup-obsessed friends. Then I forgot about it for months until the weather turned chilly and I pulled up the link again, only to notice the article had changed. An italicized editor’s note had been added to the top, which began: “This article has been retracted as it does not meet Atlas Obscura’s editorial standards.” The note went on to state that multiple details and interviews had been fabricated. </p>

<p>Intrigued, I did a Google search for the author, Blair Mastbaum. His social media profiles and Wikipedia page suggested an American writer in his mid-forties, very active on Instagram, where he posted captionless photos of his travels in Europe. Mastbaum had written ten other articles for <em>Atlas Obscura</em>, eight of which, it turned out, had similar retractions. Topics ranged widely: acoustic archeology, Hawaiian cultural appropriation, an obscure dialect of sign language. Mastbaum’s first retracted story had been published in January 2022; the last one more than a year later. </p>

<p>His final article, from February 2023, was about the Scottish town of Moffat implementing “dark weeks” to protect the night sky from artificial lighting. Except: the townsfolk of Moffat had never done such a thing; experts and locals quoted in the story had never been contacted or interviewed, and at least one does not seem to actually exist. It was an astonishing volume of lies packed neatly into an 1,100-word article. Fiction masquerading as journalism is nothing new, but in the age of Google Alerts and plagiarism checkers, it seems like it ought to be impossible to sustain a year-long series of audacious lies. How can a writer still pull off a con like this? And given the endless opportunities for scamming anonymously, why would anyone undertake such revealing and labour-intensive deceptions? </p>
<p>Founded in 2009, <em>Atlas Obscura</em> is an online publication specializing in descriptions and stories of offbeat destinations, created as the antithesis of the well-trod itineraries offered by popular guidebooks. It has attracted millions of dollars in funding and expanded into a travel planning app, a retail review site, and a food-focused vertical called Gastro Obscura. The editorial mission is to tell true stories that seem, at first glance, to be stranger than fiction, which is perhaps why Mastbaum’s strange fictions seemed so plausible. His stories weren’t outlandish; they were well researched and populated with factual details, with believable quotes attributed to real people. Writing them was at least as much work as reporting truthfully would have been, suggesting they weren’t born of intellectual or professional laziness but some other, more inscrutable, motivation. </p>
<p>It seems likely that everything unravelled with the final article about Moffat, which also bore the longest editor’s note—perhaps Mastbaum had gotten carried away with his ornamental flourishes. One of the sources who denied speaking with Mastbaum, an urban planner from Poland named Agata Łopuszyńska, replied to my message in which I’d asked how she had found out about the article. “That’s a crazy story,” she wrote back. Łopuszyńska learned about the article when a man from a dark-sky organization in the UK emailed to ask her about it. She had never been to Scotland or heard of Mastbaum and was shocked to see quotes, and even photographs included in the article, attributed to her. Soon after other baffled sources reached out to <em>Atlas Obscura</em>, Łopuszyńska was contacted by an editor, who told her about an email exchange between himself and Łopuszyńska that Mastbaum had provided as proof that he had interviewed her. It even included a fake Polish phone number, Łopuszyńska said, which Mastbaum had told <em>Atlas Obscura</em> he had used to contact her on WhatsApp. Łopuszyńska doesn’t use WhatsApp. The email exchange had been fabricated. Most bizarre was a one-word email (“hello”) Łopuszyńska found in her junk folder, sent by Mastbaum two weeks after the story had been published. </p>

<p>Łopuszyńska wished the entire article had been removed from <em>Atlas Obscura</em>’s website, not just appended with an editor’s note. “For me it would be best to no longer see my name in such a scam,” she wrote to me. When I spoke with Samir S. Patel, editor-in-chief of <em>Atlas Obscura</em>, he acknowledged that they had unpublished some of Mastbaum’s stories. “But that’s not proper journalistic practice,” he said. When the errors in the Moffat piece came to light, the website conducted an investigation and temporarily unpublished stories as other issues emerged. Afterward, they republished those stories, without their images and with the addition of editor’s notes. “We want there to be a record,” he explained. It was the same approach taken by the <em>New York Times</em> in 2002, when its editors discovered errors and fabrications in Michael Finkel’s reporting on child slavery in West Africa, and in 2003, when the newspaper discovered that staff reporter Jayson Blair had fabricated details in at least thirty-six stories.</p>
<p>For Patel, a Brooklyn-based science journalist who joined <em>Atlas Obscura</em> in 2017, the incident was perplexing and painful. Mastbaum’s stories didn’t raise any red flags, he said; details were spot-checked by editors, and notes were provided whenever they had questions. They didn’t suspect anything was amiss until a reader reached out to them. Once they realized there were problems with the story, he explained, they did a complete review of all of Mastbaum’s work, reaching out to every single source and documenting the inconsistencies in an editor’s note. According to Patel, Mastbaum ghosted them after the editors notified him of the full review. Patel still stands behind their editorial process. “I wouldn’t say we’ve changed it,” he says. “But I’ll put it this way: it’s changed us a little bit.” They’re a little less trusting than they used to be. </p>
<p>A constellation of online profiles suggests Mastbaum is a lapsed novelist and former copywriter who lives in Europe with his partner, filmmaker Scott Coffey. Coffey is best known for writing and directing the 2005 film <em>Ellie Parker</em>, starring the Australian actress Naomi Watts. When Mastbaum organized a GoFundMe for Coffey’s dental expenses in the summer of 2023, a donor named Naomi Watts contributed $2,000—a detail worthy of a fabulist. On Instagram, Mastbaum documented his travels in the UK and Spain, places that later appeared in his <em>Atlas Obscura</em> stories. Online, it’s easy to glean enough details about a stranger’s life to assemble a vivid but superficial portrait of them—but impossible to map their mysterious interior trajectory, from writing queer coming-of-age novels to publishing fraudulent travel journalism. </p>
<p>Aside from <em>Atlas Obscura</em>, his only significant journalism credit, Mastbaum published similar stories on a now-idle Substack: quirky, detailed digressions into cultural practices and his experiences abroad. Most were about Europe, but one caught my eye because it was about a nation closer to home: the Kwakwaka’wakw tribes of coastal BC. The post included a quote from Jennifer Kramer, an associate professor of anthropology and museum curator at the University of British Columbia. I sent her an email to ask if she had ever spoken with this writer. No, she wrote back quickly, adding, “It is disturbing to learn that he has falsely cited me.” Some details included in the post, Kramer told me, were accurate, while others were completely wrong. I looked up a quote attributed to the famous anthropologist Franz Boas and found that it came from a book by another scholar, written eight years after Boas died. The overall effect of the post was similar to that of one of those AI-generated images of a person with too many fingers: almost but not quite convincing. “Parts of the descriptions stem from accuracy but they have become distorted or read completely wrong to produce stereotypical or offensive results,” Kramer replied. (I ran the Substack post through Copyleaks, an online tool that promises to tell you “with exceptional accuracy” whether a piece of text has been authored by AI. It came back as definitively human.)</p>
<p>Patel said the review of Mastbaum’s reporting by <em>Atlas Obscura</em> editors revealed a similarly confounding mix of fact and fiction. “Some [of his sources] got back to us and said, ‘Yes, this is an accurate reflection of the conversation that I had with this writer.’ Others got back to us and said, ‘I feel like I said this, but I don’t think I said this in this case.’ Or ‘I have said this, but I didn’t talk to this writer and I’ve never heard of this person in my life.’” Two of Mastbaum’s earliest articles passed editorial review, apparently free of falsehoods. </p>

<p>Mastbaum’s stories continue a long tradition of journalistic fabrications, which often involve the distortion of some exotic culture or milieu: Finkel’s falsified reporting on child slavery in West Africa; Stephen Glass’s fictionalized voyage into the heart of a hacker convention; Janet Cooke’s story “Jimmy’s World,” a sordid tale about the eponymous eight-year-old heroin addict that was briefly honoured with a Pulitzer Prize before Cooke’s lies unravelled. There’s a kind of dynamic voyeurism at play, appealing to stereotypes and preconceived ideas, which lends it the quality that Stephen Colbert once described as “truthiness.” The reader feels as though they are peering through a window into the real world, unaware that the very pane of glass they are looking through is warped. The lies themselves are harmful, but so too is our inability to recognize them. </p>
<p>For Nieman Lab, professor and journalist Charlie Beckett writes, “In the wake of all the untrustworthy content online, journalists have forgotten that it used to be axiomatic that ‘you shouldn’t believe what you read in the papers.’” Patel pointed out the same thing to me. “Go back a hundred years . . . and people took journalism with a grain of salt,” he said. “Then there was a period where journalists were really trusted and seen as gatekeepers—the Cronkite era.” Now we’re back in a cynical phase: in 2023, the Reuters Institute Digital News Report found only 37 percent of English-speaking Canadians trust the news. </p>
<p>It’s not a bad thing that we’re more skeptical of the media, that we challenge what confronts us with questions. The problem is that skepticism itself does not equip us to distinguish between fact and fiction. In 2019, almost 40 percent of surveyed Canadians admitted in an Ipsos poll that they had been suckered at least once by fake news, a percentage that perhaps not coincidentally spiked with the advent of AI tools like Midjourney and DALL-E 3, which can produce increasingly realistic-looking images. And after another year of layoffs that continued to decimate the hollowed-out media industry, it’s also harder for media organizations to stay on top of. Patel acknowledged that <em>Atlas Obscura</em> relies on editors to check articles, but few outlets allocate a budget or time to dedicated fact checking. </p>
<p>Distrust of mainstream media is one reason why a growing number of people are relying on social media, like TikTok, as a primary source of news, despite the fact that platforms are rife with misinformation: a 2022 investigation by NewsGuard found that one in five search results on TikTok contained false claims. But examples of misinformation spawn indiscriminately across platforms, because they share a fundamental structure: they are designed to incentivize engagement. It’s a technological expression of the fabricator’s logic—a hierarchy of attention over accuracy. </p>
<p>Mastbaum’s fabrications were convincing for the same reason any fakery is: burnished with captivating details and memorable quotes, they were almost better than real. Why a middle-aged former novelist would craft such elaborate fabrications and lies about old broth for fifty cents a word is harder to answer. Mastbaum didn’t respond to my emails or DMs on Instagram for comment, but I didn’t really expect him to. He knows as well as I do that the real explanation could never be as interesting as a story.</p>
<!-- AI CONTENT END 1 -->
		<div id="sexy_author_bio_widget-2"><p><a href="https://thewalrus.ca/author/michelle-cyca/" target="_top"><img alt="Michelle Cyca" src="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2070%2070'%3E%3C/svg%3E" data-src="https://secure.gravatar.com/avatar/a74142760f0970563f3dcdcb8b6f5b94?s=70&amp;d=mm&amp;r=pg" data-srcset="https://secure.gravatar.com/avatar/a74142760f0970563f3dcdcb8b6f5b94?s=140&amp;d=mm&amp;r=pg 2x" height="70" width="70"></a></p><p>Michelle Cyca is a contributing writer at The Walrus. She has written for <em>Maclean’s</em>, the <em>Vancouver Sun</em>, and <em>Chatelaine</em>.</p></div>	</div><!-- .entry-content -->

	
	<!-- .entry-footer -->

		
</article></div>]]></description>
        </item>
    </channel>
</rss>