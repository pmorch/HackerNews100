<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Wed, 13 Nov 2024 19:30:03 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[MIT engineers make converting CO2 into useful products more practical (103 pts)]]></title>
            <link>https://news.mit.edu/2024/mit-engineers-make-converting-co2-into-products-more-practical-1113</link>
            <guid>42126984</guid>
            <pubDate>Wed, 13 Nov 2024 15:42:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://news.mit.edu/2024/mit-engineers-make-converting-co2-into-products-more-practical-1113">https://news.mit.edu/2024/mit-engineers-make-converting-co2-into-products-more-practical-1113</a>, See on <a href="https://news.ycombinator.com/item?id=42126984">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody">
          

            <p>As the world struggles to reduce greenhouse gas emissions, researchers are seeking practical, economical ways to capture carbon dioxide and convert it into useful products, such as transportation fuels, chemical feedstocks, or even building materials. But so far, such attempts have struggled to reach economic viability.</p><p>New research by engineers at MIT could lead to rapid improvements in a variety of electrochemical systems that are under development to convert carbon dioxide into a valuable commodity. The team developed a new design for the electrodes used in these systems, which increases the efficiency of the conversion process.</p><p>The findings are reported today in the journal <em>Nature Communications</em>, in a paper by MIT doctoral student Simon Rufer, professor of mechanical engineering Kripa Varanasi, and three others.</p><p>‚ÄúThe CO2 problem is a big challenge for our times, and we are using all kinds of levers to solve and address this problem,‚Äù Varanasi says. It will be essential to find practical ways of removing the gas, he says, either from sources such as power plant emissions, or straight out of the air or the oceans. But then, once the CO2 has been removed, it has to go somewhere.</p><p>A wide variety of systems have been developed for converting that captured gas into a useful chemical product, Varanasi says. ‚ÄúIt‚Äôs not that we can‚Äôt do it ‚Äî we can do it. But the question is how can we make this efficient? How can we make this cost-effective?‚Äù</p><p>In the new study, the team focused on the electrochemical conversion of CO2 to ethylene, a widely used chemical that can be made into a variety of plastics as well as fuels, and which today is made from petroleum. But the approach they developed could also be applied to producing other high-value chemical products as well, including methane, methanol, carbon monoxide, and others, the researchers say.</p><p>Currently, ethylene sells for about $1,000 per ton, so the goal is to be able to meet or beat that price. The electrochemical process that converts CO2 into ethylene involves a water-based solution and a catalyst material, which come into contact along with an electric current in a device called a gas diffusion electrode.</p><p>There are two competing characteristics of the gas diffusion electrode materials that affect their performance: They must be good electrical conductors so that the current that drives the process doesn‚Äôt get wasted through resistance heating, but they must also be ‚Äúhydrophobic,‚Äù or water repelling, so the water-based electrolyte solution doesn‚Äôt leak through and interfere with the reactions taking place at the electrode surface.</p><p>Unfortunately, it‚Äôs a tradeoff. Improving the conductivity reduces the hydrophobicity, and vice versa. Varanasi and his team set out to see if they could find a way around that conflict, and after many months of work, they did just that.</p><p>The solution, devised by Rufer and Varanasi, is elegant in its simplicity. They used a plastic material, PTFE (essentially Teflon), that has been known to have good hydrophobic properties. However, PTFE‚Äôs lack of conductivity means that electrons must travel through a very thin catalyst layer, leading to significant voltage drop with distance. To overcome this limitation, the researchers wove a series of conductive copper wires through the very thin sheet of the PTFE.</p><p>‚ÄúThis work really addressed this challenge, as we can now get both conductivity and hydrophobicity,‚Äù Varanasi says.</p><p>Research on potential carbon conversion systems tends to be done on very small, lab-scale samples, typically less than 1-inch (2.5-centimeter) squares. To demonstrate the potential for scaling up, Varanasi‚Äôs team produced a sheet 10 times larger in area and demonstrated its effective performance.</p><p>To get to that point, they had to do some basic tests that had apparently never been done before, running tests under identical conditions but using electrodes of different sizes to analyze the relationship between conductivity and electrode size. They found that conductivity dropped off dramatically with size, which would mean much more energy, and thus cost, would be needed to drive the reaction.</p><p>‚ÄúThat‚Äôs exactly what we would expect, but it was something that nobody had really dedicatedly investigated before,‚Äù Rufer says. In addition, the larger sizes produced more unwanted chemical byproducts besides the intended ethylene.</p><p>Real-world industrial applications would require electrodes that are perhaps 100 times larger than the lab versions, so adding the conductive wires will be necessary for making such systems practical, the researchers say. They also developed a model which captures the spatial variability in voltage and product distribution on electrodes due to ohmic losses. The model along with the experimental data they collected enabled them to calculate the optimal spacing for conductive wires to counteract the drop off in conductivity.</p><p>In effect, by weaving the wire through the material, the material is divided into smaller subsections determined by the spacing of the wires. ‚ÄúWe split it into a bunch of little subsegments, each of which is effectively a smaller electrode,‚Äù Rufer says. ‚ÄúAnd as we‚Äôve seen, small electrodes can work really well.‚Äù</p><p>Because the copper wire is so much more conductive than the PTFE material, it acts as a kind of superhighway for electrons passing through, bridging the areas where they are confined to the substrate and face greater resistance.</p><p>To demonstrate that their system is robust, the researchers ran a test electrode for 75 hours continuously, with little change in performance. Overall, Rufer says, their system ‚Äúis the first PTFE-based electrode which has gone beyond the lab scale on the order of 5 centimeters or smaller. It‚Äôs the first work that has progressed into a much larger scale and has done so without sacrificing efficiency.‚Äù</p><p>The weaving process for incorporating the wire can be easily integrated into existing manufacturing processes, even in a large-scale roll-to-roll process, he adds.</p><p>‚ÄúOur approach is very powerful because it doesn‚Äôt have anything to do with the actual catalyst being used,‚Äù Rufer says. ‚ÄúYou can sew this micrometric copper wire into any gas diffusion electrode you want, independent of catalyst morphology or chemistry. So, this approach can be used to scale anybody‚Äôs electrode.‚Äù</p><p>‚ÄúGiven that we will need to process gigatons of CO2 annually to combat the CO2 challenge, we really need to think about solutions that can scale,‚Äù Varanasi says. ‚ÄúStarting with this mindset enables us to identify critical bottlenecks and develop innovative approaches that can make a meaningful impact in solving the problem. Our hierarchically conductive electrode is a result of such thinking.‚Äù</p><p>The research team included MIT graduate students Michael Nitzsche and Sanjay Garimella,&nbsp; as well as Jack Lake PhD ‚Äô23. The work was supported by Shell, through the MIT Energy Initiative.</p>        

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Bluetooth USB Peripheral Relay ‚Äì Bridge Bluetooth Devices to USB (173 pts)]]></title>
            <link>https://github.com/bahaaador/bluetooth-usb-peripheral-relay</link>
            <guid>42125863</guid>
            <pubDate>Wed, 13 Nov 2024 13:24:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/bahaaador/bluetooth-usb-peripheral-relay">https://github.com/bahaaador/bluetooth-usb-peripheral-relay</a>, See on <a href="https://news.ycombinator.com/item?id=42125863">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">Bluetooth USB HID Relay</h2><a id="user-content-bluetooth-usb-hid-relay" aria-label="Permalink: Bluetooth USB HID Relay" href="#bluetooth-usb-hid-relay"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">A delightfully over-engineered solution to an unusual modern problem!</h3><a id="user-content-a-delightfully-over-engineered-solution-to-an-unusual-modern-problem" aria-label="Permalink: A delightfully over-engineered solution to an unusual modern problem!" href="#a-delightfully-over-engineered-solution-to-an-unusual-modern-problem"></a></p>
<p dir="auto">Use Bluetooth peripherals with Bluetooth-disabled computers.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/bahaaador/bluetooth-usb-peripheral-relay/blob/main/assets/bluetooth-usb-peripheral-relay-image.png"><img src="https://github.com/bahaaador/bluetooth-usb-peripheral-relay/raw/main/assets/bluetooth-usb-peripheral-relay-image.png" alt="Bluetooth USB HID Relay Overview"></a></p>
<p dir="auto">This project creates a Bluetooth USB HID relay using a Raspberry Pi Zero (or similar OTG-enabled single-board computer). It allows you to use Bluetooth keyboards and mice with computers that have Bluetooth disabled, by presenting the board as a composite USB HID device.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Inspiration</h2><a id="user-content-inspiration" aria-label="Permalink: Inspiration" href="#inspiration"></a></p>
<p dir="auto">This project was born out of a desire to help a friend who couldn't use his favorite Bluetooth mouse and keyboard due to Bluetooth being disabled on his work laptop. As someone who enjoys tinkering and problem-solving, I saw this as an opportunity to create something useful while learning more about Linux internals, USB gadgets, and Go programming. The Raspberry Pi Zero became the perfect bridge, connecting Bluetooth peripherals to computers that wouldn't normally allow it.</p>
<section data-identity="1879b375-f4d2-4153-848d-d6b700f7bb21" data-host="https://viewscreen.githubusercontent.com" data-src="https://viewscreen.githubusercontent.com/markdown/mermaid?docs_host=https%3A%2F%2Fdocs.github.com" data-type="mermaid" aria-label="mermaid rendered output container">
  <div dir="auto" data-json="{&quot;data&quot;:&quot;graph TD\n    B(Keyboard) -- Bluetooth --&amp;gt;  A{\&quot;HID &amp;lt;br&amp;gt; (Raspberry Pi Zero)\&quot;}\n    C(Mouse) -- Bluetooth --&amp;gt; A\n    A -- USB--&amp;gt; D(Host Computer)\n&quot;}" data-plain="graph TD
    B(Keyboard) -- Bluetooth -->  A{&quot;HID <br> (Raspberry Pi Zero)&quot;}
    C(Mouse) -- Bluetooth --> A
    A -- USB--> D(Host Computer)
">
      <pre lang="mermaid" aria-label="Raw mermaid code">graph TD
    B(Keyboard) -- Bluetooth --&gt;  A{"HID &lt;br&gt; (Raspberry Pi Zero)"}
    C(Mouse) -- Bluetooth --&gt; A
    A -- USB--&gt; D(Host Computer)
</pre>
    </div>
  <span role="presentation">
    <span data-view-component="true">
      <span>Loading</span>
</span>
  </span>
</section>

<p dir="auto"><h2 tabindex="-1" dir="auto">Features</h2><a id="user-content-features" aria-label="Permalink: Features" href="#features"></a></p>
<ul dir="auto">
<li>Connects to Bluetooth keyboards and mice</li>
<li>Presents itself as a composite USB HID device (keyboard and mouse) to the host computer</li>
<li>Works with Windows, Mac, and Linux computers</li>
<li>Automatically starts the relay service at boot</li>
<li>Configures the board as a USB OTG device</li>
<li>Includes a script to help pair Bluetooth devices</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Components</h2><a id="user-content-components" aria-label="Permalink: Components" href="#components"></a></p>
<ul dir="auto">
<li>Raspberry Pi Zero or other single-board computer capable of USB OTG</li>
<li>DietPi or another lightweight Linux distribution</li>
<li>Bash scripts for setup and configuration</li>
<li>Go program for handling Bluetooth input and USB HID output</li>
<li>Systemd service for automatic startup</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Prerequisites</h2><a id="user-content-prerequisites" aria-label="Permalink: Prerequisites" href="#prerequisites"></a></p>
<p dir="auto">Before building and running the project, ensure you have the following installed:</p>
<ol dir="auto">
<li>
<p dir="auto">Go (version 1.21 or later)</p>
<p dir="auto">On most Linux distributions, including Raspberry Pi OS (formerly Raspbian), you can install Go using:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo apt-get update
sudo apt-get install golang"><pre>sudo apt-get update
sudo apt-get install golang</pre></div>
</li>
<li>
<p dir="auto">Task runner using:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sh -c &quot;$(curl --location https://taskfile.dev/install.sh)&quot; -- -d -b ~/.local/bin"><pre>sh -c <span><span>"</span><span><span>$(</span>curl --location https://taskfile.dev/install.sh<span>)</span></span><span>"</span></span> -- -d -b <span>~</span>/.local/bin</pre></div>
<p dir="auto">or</p>
<div dir="auto" data-snippet-clipboard-copy-content="go install github.com/go-task/task/v3/cmd/task@latest"><pre>go install github.com/go-task/task/v3/cmd/task@latest</pre></div>
</li>
</ol>
<blockquote>
<p dir="auto">Note: You may need to add $(go env GOPATH)/bin to your PATH environment variable with the second command.</p>
</blockquote>
<p dir="auto"><h2 tabindex="-1" dir="auto"><g-emoji alias="warning">‚ö†Ô∏è</g-emoji> Caution</h2><a id="user-content-Ô∏è-caution" aria-label="Permalink: ‚ö†Ô∏è Caution" href="#Ô∏è-caution"></a></p>
<p dir="auto"><strong>Please read before proceeding:</strong></p>
<p dir="auto">This project is currently in an experimental state and has only been tested on a limited number of devices. While it works well for my use case, please be aware that:</p>
<ul dir="auto">
<li>The scripts modify system-level configurations and USB settings</li>
<li>Incorrect USB gadget configuration could potentially require a fresh OS installation to recover</li>
<li>The project has only been tested on a small number of devices and configurations</li>
<li>This is a personal project, not production-ready software</li>
</ul>
<p dir="auto"><strong>Before running this project, you should:</strong></p>
<ul dir="auto">
<li>Only use it on devices where you can easily reinstall the OS if needed</li>
<li>Carefully review all scripts and code before execution</li>
<li>Have a backup plan in case something goes wrong</li>
<li>Be comfortable with Linux system administration and USB configurations</li>
</ul>
<p dir="auto">I cannot guarantee this will work on all devices or configurations. Proceed at your own risk.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Setup</h2><a id="user-content-setup" aria-label="Permalink: Setup" href="#setup"></a></p>
<ol dir="auto">
<li>
<p dir="auto">Log in to your Raspberry Pi Zero.</p>
</li>
<li>
<p dir="auto">Clone this repository to your board.</p>
</li>
<li>
<p dir="auto">Run the setup scripts in the following order:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo chmod +x scripts/*.sh # make sure all scripts are executable
sudo ./scripts/setup_usb_host.sh # enable the USB host and load the necessary modules
sudo reboot
sudo ./scripts/setup_bluetooth.sh # enable and start the bluetooth service
sudo ./scripts/setup_gadgets.sh # create the gadget and configure the USB strings"><pre>sudo chmod +x scripts/<span>*</span>.sh <span><span>#</span> make sure all scripts are executable</span>
sudo ./scripts/setup_usb_host.sh <span><span>#</span> enable the USB host and load the necessary modules</span>
sudo reboot
sudo ./scripts/setup_bluetooth.sh <span><span>#</span> enable and start the bluetooth service</span>
sudo ./scripts/setup_gadgets.sh <span><span>#</span> create the gadget and configure the USB strings</span></pre></div>
</li>
<li>
<p dir="auto">Pair your Bluetooth devices manually or using the script:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo ./scripts/pair_devices.sh"><pre>sudo ./scripts/pair_devices.sh</pre></div>
</li>
<li>
<p dir="auto">Build and install the service:</p>
<div dir="auto" data-snippet-clipboard-copy-content="task build
sudo task service:install"><pre>task build
sudo task service:install</pre></div>
</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto">Connect the board to the target computer via USB. This will turn the board on and start the service automatically (assuming it was installed and enabled using the steps above) the bluetooth peripherals should connect automatically as well and the service will retry if they are not connected momentarily. Both Windows and MacOS have been tested and should work.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Tasks</h2><a id="user-content-tasks" aria-label="Permalink: Tasks" href="#tasks"></a></p>
<p dir="auto">This project uses Task runner for common operations:</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">General tasks</h3><a id="user-content-general-tasks" aria-label="Permalink: General tasks" href="#general-tasks"></a></p>
<ul dir="auto">
<li><code>task --list</code> - List all available tasks</li>
<li><code>task build</code> - Build the project</li>
<li><code>task clean</code> - Clean build artifacts</li>
<li><code>task test</code> - Run tests</li>
<li><code>task run</code> - Build and run the application</li>
<li><code>task doctor</code> - Run the diagnose tool</li>
<li><code>task simulate</code> - Run the simulate tool</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Service Management</h3><a id="user-content-service-management" aria-label="Permalink: Service Management" href="#service-management"></a></p>
<ul dir="auto">
<li><code>task service:install</code> - Install and enable the service</li>
<li><code>task service:status</code> - Check service status</li>
<li><code>task service:logs</code> - View service logs</li>
<li><code>task service:restart</code> - Restart the service</li>
<li><code>task service:start</code> - Start the service</li>
<li><code>task service:stop</code> - Stop the service</li>
<li><code>task service:uninstall</code> - Remove the service</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Diagnostic Tools</h2><a id="user-content-diagnostic-tools" aria-label="Permalink: Diagnostic Tools" href="#diagnostic-tools"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">I/O Doctor</h3><a id="user-content-io-doctor" aria-label="Permalink: I/O Doctor" href="#io-doctor"></a></p>
<p dir="auto">This tool will check for connected Bluetooth devices and display all incoming events from your Bluetooth keyboard and mouse, helping you debug connection and input issues.</p>

<p dir="auto"><h3 tabindex="-1" dir="auto">Input Simulation</h3><a id="user-content-input-simulation" aria-label="Permalink: Input Simulation" href="#input-simulation"></a></p>
<p dir="auto">To test the USB HID output without Bluetooth devices:</p>

<p dir="auto">This interactive tool allows you to:</p>
<ol dir="auto">
<li>Move the mouse in a circle pattern</li>
<li>Type a test message
These simulations help verify that the USB HID device is working correctly on the host computer.</li>
</ol>
<p dir="auto"><h3 tabindex="-1" dir="auto">Uninstall and remove gadget</h3><a id="user-content-uninstall-and-remove-gadget" aria-label="Permalink: Uninstall and remove gadget" href="#uninstall-and-remove-gadget"></a></p>
<p dir="auto">To uninstall the service:</p>

<p dir="auto">To remove the gadget and restore the USB host configuration:</p>
<div dir="auto" data-snippet-clipboard-copy-content="./scripts/uninstall/undo_setup_gadgets.sh
./scripts/uninstall/undo_setup_usb_host.sh"><pre>./scripts/uninstall/undo_setup_gadgets.sh
./scripts/uninstall/undo_setup_usb_host.sh</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Development</h2><a id="user-content-development" aria-label="Permalink: Development" href="#development"></a></p>
<p dir="auto">This project can be used as is or as basis for other types of USB gadgets. It can also serve as a learning opportunity for:</p>
<ul dir="auto">
<li>Linux internals</li>
<li>Creating USB gadgets</li>
<li>Using Go for hardware interfacing</li>
<li>Setting up systemd services</li>
<li>Configuring single-board computers as USB OTG devices</li>
<li>Bluetooth device pairing and management</li>
</ul>
<p dir="auto">It's been a fun journey of discovery, and I hope others find it useful or inspiring for their own projects!</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Compatibility</h2><a id="user-content-compatibility" aria-label="Permalink: Compatibility" href="#compatibility"></a></p>
<p dir="auto">Tested with DietPi 64bit as host and Windows 10 and MacOS USB clients to which the keyboard and mouse were connected. No issues with latency or input delay. My friend have been using this setup for a few days now and it works great.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Issues and Support</h2><a id="user-content-issues-and-support" aria-label="Permalink: Issues and Support" href="#issues-and-support"></a></p>
<p dir="auto">Found a bug or have a suggestion? Please feel free to create an issue on GitHub! I'm actively maintaining this project and would be happy to look into any problems or improvements you identify. While this is a personal project, I'm committed to helping others get it working and making it better.</p>
<p dir="auto">Your feedback and contributions help make this project more reliable for everyone! üíú</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">References</h2><a id="user-content-references" aria-label="Permalink: References" href="#references"></a></p>
<ul dir="auto">
<li><a href="https://cdn-learn.adafruit.com/downloads/pdf/turning-your-raspberry-pi-zero-into-a-usb-gadget.pdf" rel="nofollow">Adafruit Guide: Turning your Raspberry Pi Zero into a USB Gadget</a></li>
<li><a href="https://www.isticktoit.net/?p=1383" rel="nofollow">Composite USB Gadgets on the Raspberry Pi Zero</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">This project is licensed under the MIT License - see the <a href="https://github.com/bahaaador/bluetooth-usb-peripheral-relay/blob/main/LICENSE">LICENSE</a> file for details.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Qwen2.5-Coder-32B is an LLM that can code well that runs on my Mac (149 pts)]]></title>
            <link>https://simonwillison.net/2024/Nov/12/qwen25-coder/</link>
            <guid>42123909</guid>
            <pubDate>Wed, 13 Nov 2024 08:16:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://simonwillison.net/2024/Nov/12/qwen25-coder/">https://simonwillison.net/2024/Nov/12/qwen25-coder/</a>, See on <a href="https://news.ycombinator.com/item?id=42123909">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-permalink-context="/2024/Nov/12/qwen25-coder/">

<p>12th November 2024</p>



<p>There‚Äôs a whole lot of buzz around the new <a href="https://qwenlm.github.io/blog/qwen2.5-coder-family/">Qwen2.5-Coder Series</a> of open source (Apache 2.0 licensed) LLM releases from Alibaba‚Äôs Qwen research team. On first impression it looks like the buzz is well deserved.</p>
<p>Qwen claim:</p>
<blockquote>
<p>Qwen2.5-Coder-32B-Instruct has become the current SOTA open-source code model, matching the coding capabilities of GPT-4o.</p>
</blockquote>
<p>That‚Äôs a <em>big</em> claim for a 32B model that‚Äôs small enough that it can run on my 64GB MacBook Pro M2. The Qwen published scores look impressive, comparing favorably with GPT-4o and Claude 3.5 Sonnet (October 2024) edition across various code-related benchmarks:</p>
<p><img src="https://static.simonwillison.net/static/2024/qwen-scores.jpg" alt="In benchmark comparisons, Qwen 2.5 Coder (32B Instruct) outperforms both GPT-4o and Claude 3.5 Sonnet on LiveCodeBench, Spider, and BIRD-SQL metrics, falls behind on MBPP, Aider, and CodeArena, shows mixed results on MultiPL-E, and performs similarly on HumanEval and McEval benchmarks."></p>
<p>How about benchmarks from other researchers? Paul Gauthier‚Äôs <a href="https://aider.chat/docs/leaderboards/">Aider benchmarks</a> have a great reputation and <a href="https://twitter.com/paulgauthier/status/1856018124031832236">Paul reports</a>:</p>
<blockquote>
<p>The new Qwen 2.5 Coder models did very well on aider‚Äôs code editing benchmark. The 32B Instruct model scored in between GPT-4o and 3.5 Haiku.</p>
<p>84% 3.5 Sonnet,
75% 3.5 Haiku,
74% Qwen2.5 Coder 32B,
71% GPT-4o,
69% Qwen2.5 Coder 14B,
58% Qwen2.5 Coder 7B</p>
<p><img src="https://static.simonwillison.net/static/2024/qwen-paul.jpg" alt="Those numbers as a chart"></p>
</blockquote>
<p>That was for the Aider ‚Äúwhole edit‚Äù benchmark. The ‚Äúdiff‚Äù benchmark <a href="https://twitter.com/paulgauthier/status/1856042640279777420">scores well</a> too, with Qwen2.5 Coder 32B tying with GPT-4o (but a little behind Claude 3.5 Haiku).</p>
<p>Given these scores (and the <a href="https://www.reddit.com/r/LocalLLaMA/comments/1gp84in/qwen25coder_32b_the_ai_thats_revolutionizing/">positive buzz on Reddit</a>) I had to try it for myself.</p>
<p>My attempts to run the <a href="https://huggingface.co/Qwen/Qwen2.5-Coder-32B-Instruct-GGUF">Qwen/Qwen2.5-Coder-32B-Instruct-GGUF</a> Q8 using <a href="https://github.com/simonw/llm-gguf">llm-gguf</a> were a bit too slow, because I don‚Äôt have that compiled to use my Mac‚Äôs GPU at the moment.</p>
<p>But both the <a href="https://ollama.com/">Ollama</a> version <em>and</em> the <a href="https://github.com/ml-explore/mlx">MLX</a> version worked great!</p>
<p>I installed the Ollama version using:</p>
<pre><code>ollama pull qwen2.5-coder:32b
</code></pre>
<p>That fetched a 20GB quantized file. I ran a prompt through that using my <a href="https://llm.datasette.io/">LLM</a> tool and Sergey Alexandrov‚Äôs <a href="https://github.com/taketwo/llm-ollama">llm-ollama</a> plugin like this:</p>
<pre><code>llm install llm-ollama
llm models # Confirming the new model is present
llm -m qwen2.5-coder:32b 'python function that takes URL to a CSV file and path to a SQLite database, fetches the CSV with the standard library, creates a table with the right columns and inserts the data'
</code></pre>
<p>Here‚Äôs <a href="https://gist.github.com/simonw/0a47f9e35a50d4e25a47826f4ab75dda">the result</a>. The code worked, but I had to work around a frustrating <code>ssl</code> bug first (which wouldn‚Äôt have been an issue if I‚Äôd allowed the model to use <code>requests</code> or <code>httpx</code> instead of the standard library).</p>
<p>I also tried running it using the Apple Silicon fast array framework MLX using the <a href="https://github.com/riccardomusmeci/mlx-llm">mlx-llm</a> library directly, run via <a href="https://github.com/astral-sh/uv">uv</a> like this:</p>
<pre><code>uv run --with mlx-lm \
  mlx_lm.generate \
  --model mlx-community/Qwen2.5-Coder-32B-Instruct-8bit \
  --max-tokens 4000 \
  --prompt 'write me a python function that renders a mandelbrot fractal as wide as the current terminal'
</code></pre>
<p>That gave me a <em>very</em> <a href="https://gist.github.com/simonw/1cc1e0418a04dbd19cd281cf9b43666f">satisfying result</a>‚Äîwhen I ran the code it generated in a terminal I got this:</p>
<p><img src="https://static.simonwillison.net/static/2024/mlx-fractal.jpg" alt="macOS terminal window displaying a pleasing mandelbrot fractal as ASCII art"></p>
<p>This is a really promising development. 32GB is just small enough that I can run the model on my Mac without having to quit every other application I‚Äôm running, and both the speed and the quality of the results feel genuinely competitive with the current best of the hosted models.</p>

<p>Given that code assistance is probably around 80% of my LLM usage at the moment this is a meaningfully useful release for how I engage with this class of technology.</p>


</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Docker Compose Isn't Enough (113 pts)]]></title>
            <link>https://blog.tealok.tech/post/docker-compose-isnt-enough/</link>
            <guid>42122690</guid>
            <pubDate>Wed, 13 Nov 2024 03:42:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.tealok.tech/post/docker-compose-isnt-enough/">https://blog.tealok.tech/post/docker-compose-isnt-enough/</a>, See on <a href="https://news.ycombinator.com/item?id=42122690">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
			<h2 id="summary">Summary</h2>
<p><!-- raw HTML omitted --><a href="https://docs.docker.com/compose/">Docker-compose</a><!-- raw HTML omitted --> is a tool for working with Docker containers. It solves very real problems with deploying complex applications. By itself it is not enough to make self-hosting applications simple enough for the mass-market. What we need is something like docker-compose, but at a higher level of abstraction that has a concept of SQL databases, local caches, durable storage, service discovery, and resource management.</p>
<h2 id="what-does-docker-do">What does docker do?</h2>
<p>I‚Äôm actually going to assume that you‚Äôre already familiar with <a href="https://www.docker.com/resources/what-container/">containerization</a> as popularized by Docker. Metaphorically, you can think of some host system with an unknown configuration like a ship. The ship can be large or small, efficient or not. It has a method for holding some number of containers. It doesn‚Äôt need to care what‚Äôs in them, only that they are a standard shape and strength.</p>
<p>A basic system diagram running containers looks like this:</p>
<p><img src="https://blog.tealok.tech/post/docker-compose-isnt-enough/containers-without-compose.png" alt="A stacked-block diagram. At the bottom is the system hardware. Above that is the operating system. Above that is the container runtime, reverse web proxy, and database which run on the operating system. Above the container runtime are containers for an application, including a webapp container and an API container" title="If I had an artist on staff I would have put these blocks into a happy whale-shaped container ship for hopefully obvious reasons."></p>
<p>You‚Äôve got some hardware with an operating system and a container runtime. Containers run within the runtime and talk to some other services like databases or a webserver.</p>
<h2 id="what-does-docker-compose-do">What does docker-compose do?</h2>
<p><!-- raw HTML omitted --><a href="https://docs.docker.com/compose/">Docker-compose</a><!-- raw HTML omitted --> is a tool for specifying groups of containers that work together. I‚Äôm also going to assume in this article that you‚Äôre familiar with the basics. <!-- raw HTML omitted -->Docker-compose<!-- raw HTML omitted --> kinda breaks our metaphor - within shipping there‚Äôs no reason a given ship would need to position some number of containers together and let them communicate with each other.</p>
<p>This may seem like a minor point, but I want to expand upon it. The entire point of containers is simplifying operations by standardizing the interface. <code>Docker-compose</code> breaks the standardization and recreates the problems that containers originally solved. Within shipping there is the concept of the <a href="https://en.wikipedia.org/wiki/Intermodal_freight_transport">intermodal freight system</a>. <code>Docker-compose</code> should have been like intermodal freight - standardizing interactions between commonly used tools and reducing the cost of switching carrying networks.</p>
<p>That said, <code>docker-compose</code> has been extremely popular as a tool for specifying how to deploy self-hosted applications. It‚Äôs declarative and makes it possible to get multiple separate processes (web server, database, cache, background workers, API) to communicate with each other. In order explain where <code>docker-compose</code> falls short it‚Äôs useful to build up to an example.</p>
<h3 id="pihole">Pihole</h3>
<p>Let‚Äôs look at an application that lots of people want to self-host: <a href="https://pi-hole.net/">Pihole</a>. Here‚Äôs <a href="https://github.com/pi-hole/docker-pi-hole/blob/master/examples/docker-compose.yml.example">an example docker-compose file</a>:</p>
<pre tabindex="0"><code># https://github.com/pi-hole/docker-pi-hole/blob/master/README.md

services:
  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    # For DHCP it is recommended to remove these ports and instead add: network_mode: "host"
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "67:67/udp"
      - "80:80/tcp"
    environment:
      TZ: 'America/Chicago'
      # WEBPASSWORD: 'set a secure password here or it will be random'
    # Volumes store your data between container upgrades
    volumes:
      - './etc-pihole:/etc/pihole'
      - './etc-dnsmasq.d:/etc/dnsmasq.d'
    #   https://github.com/pi-hole/docker-pi-hole#note-on-capabilities
    cap_add:
      - NET_ADMIN
    restart: unless-stopped # Recommended but not required (DHCP needs NET_ADMIN)  
</code></pre><p>This is pretty complex because pihole is a DNS server. We have the <code>name</code> and the <code>image</code> to use, then a slew of ports to open up (53 for the DNS queries, 67 for DHCP, 80 for the web admin interface). There‚Äôs some <code>environment</code> that gets passed to the container, including the timezone we are running in and the ability to set a password. <code>Volumes</code> mounts some data from the host into the container, in this case it‚Äôs two different directories that store configuration data that can be changed from the web interface. <code>Cap_add</code> grants additional capabilities to the container, <code>NET_ADMIN</code> specifies the ability to configure network interfaces. Finally, <code>restart</code> specifies the behavior when the container crashes. In this case we bring it back up since our entire network is going to depend on it.</p>
<p>Whew! That‚Äôs a lot of stuff! And this is running just one container for pihole. It could, in theory, have a separate container for the web admin interface, a separate database, a batch processing container, and on and on.</p>
<p>Pihole could be more like Jitsi Meet</p>
<h3 id="jitsi-meet">Jitsi Meet</h3>
<p><a href="https://jitsi.org/jitsi-meet/">Jitsi Meet</a> is complex software. It comes with <a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-docker/">a system</a> for <em>generating</em> a <code>docker-compose</code> configuration. That configuration involves 4 different containers in a single network, 7 volumes, 9 ports, and 200+ lines of environment configuration.</p>
<p>I won‚Äôt reproduce it here.</p>
<p>This is a bit extreme, but not very much.</p>
<p>Let‚Äôs look at some others.</p>
<h3 id="other-applications">Other Applications</h3>
<p>I‚Äôm going to choose a few applications that are popular in the self-hosting community, and that I‚Äôm familiar with. Some have a single <code>docker-compose</code> configuration, others use scripts to generate it, others have a menu of configurations that you choose from.</p>
<table>
<thead>
<tr>
<th>Software</th>
<th>Containers</th>
<th>Ports</th>
<th>Volumes</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://docs.goauthentik.io/docs/install-config/install/docker-compose">Authentik</a></td>
<td>postgres, redis, server, worker</td>
<td>http, https</td>
<td>database, redis</td>
</tr>
<tr>
<td><a href="https://github.com/nextcloud/all-in-one/blob/main/compose.yaml">Nextcloud</a></td>
<td>master, caddy (optional)</td>
<td>http (main), http (service), https</td>
<td>master</td>
</tr>
<tr>
<td><a href="https://immich.app/docs/install/docker-compose/">Immich</a></td>
<td>server, machine-learning, redis, postgres</td>
<td>2283 (?)</td>
<td>upload, localtime, cache, postgres-data</td>
</tr>
<tr>
<td><a href="https://jellyfin.org/docs/general/installation/container/">Jellyfin</a></td>
<td>jellyfin</td>
<td>None - host networking</td>
<td>config, cache, media1, media2, fonts</td>
</tr>
<tr>
<td><a href="https://docs.paperless-ngx.com/setup/">Paperless NGX</a></td>
<td>redis, db, webserver</td>
<td>http</td>
<td>cache, postgres-data, data, media, export, consume</td>
</tr>
</tbody>
</table>
<p>On the positive side <code>docker-compose</code> is <strong>far</strong> <strong>easier than raw docker commands.</strong> Each of these configurations would take dozens, if not hundreds of <code>docker</code> commands to reproduce. <code>Docker-compose</code> is a huge improvement over the existing alternatives.</p>
<h2 id="the-problem">The Problem</h2>
<p>The problem is that <code>docker-compose</code> is <strong>too flexible</strong>, <strong>too detailed,</strong> and <strong>operates at the wrong layer of abstraction</strong>. Each of the applications above have some kind of HTTP-handling process. Each of them have a cache or a database (or both). Every single one has one or more volumes for dealing with persistent data.</p>
<p>These applications leave database backup as an exercise for the system operator. Getting back to the shipping metaphor, let‚Äôs pretend databases are our railway lines. If you run multiple container workloads on a single host using <code>docker-compose</code> it‚Äôs like hand building a crane out of wood to move your container to your rail lines rather than enjoying the benefits of <a href="https://en.wikipedia.org/wiki/Container_crane">container cranes</a>.</p>
<p>The problem is best detailed by looking closely at the number #1 issue when using <code>docker-compose</code> - reverse http(s) proxies.</p>
<h3 id="reverse-http-proxies">Reverse HTTP proxies</h3>
<p>A reverse HTTP proxy is a program that receives incoming HTTP requests and forwards them on to another program. It stands in as a proxy for the program itself on <em>incoming</em> requests. The fact that it‚Äôs incoming instead of outgoing is what makes it a ‚Äúreverse‚Äù proxy.</p>
<p>Each of the programs above have some kind of administrative or user interface that is served over HTTP.</p>
<p>For each program the developers must decide: do we include a web server or not?</p>
<p>Frankly, you‚Äôre damned if you do. You‚Äôre also damned if you don‚Äôt.</p>
<h4 id="included-web-server">Included Web Server</h4>
<p>If you include a web server then your program will work, including the browser-based interface. It will only work on a particular port, and unless you use host networking, a specific container-only IP address.</p>
<p>If you run IPv4 networking and more than one container with a web server, you‚Äôll need to remap their ports on the host. Then you‚Äôll need a reverse proxy, with its bespoke configuration, to pass web requests to this web server. You have at least two web servers to serve one application.</p>
<p>If every program does this we end up deploying multiple redundant programs doing approximately the same work, taking up compute resources.</p>
<h4 id="no-web-server">No Web Server</h4>
<p>If you don‚Äôt include a web server then at least you aren‚Äôt wasting resources through redundant server processes. Instead, you have to configure the application without an administrative interface (config files, environment variables) so that it can communicate with the web server you provide. This may include generating static assets (HTML, CSS), setting headers (CORS, Authentication), and breaking requests out to different ports based on their path.</p>
<h4 id="dns">DNS</h4>
<p>Your web interface is going to have an address, whether it‚Äôs available on the public internet or not. If you want TLS (<a href="https://smallstep.com/blog/use-tls/">and you do</a>) then you‚Äôll need a name, not just an IP address. If you run multiple services on a single host you‚Äôll need to route requests either by domain name or by path (please choose domain name).</p>
<p>If your service is publicly addressable, you can register a domain name and use <a href="https://letsencrypt.org/">Let‚Äôs Encrypt</a>. If your service is not publicly addressable, you can <a href="https://smallstep.com/docs/step-ca/">run your own certificate authority</a>. Either way, you‚Äôre going to need an automated system for getting new certificates, or you‚Äôre going to need incredible patience for toil.</p>
<h4 id="ports">Ports</h4>
<p>Really, the problem is ports. <code>Docker-compose</code> allows for exposing and remapping ports. This is great if you want arbitrarily complex networking setups.</p>
<p>We want to be able to support arbitrarily complex networking setups.</p>
<p>We don‚Äôt want applications to actually use them.</p>
<p>What we want is for an application like Immich not to say ‚ÄúI expose some networked service on port 2283, read the manual and find out what it is and how dangerous it might be!‚Äù What we want is for Immich to say ‚ÄúI need an HTTPS proxy in front of me to handle client requests. Please let me know what domain name it‚Äôs using so I can configure myself internally accordingly.‚Äù</p>
<h3 id="databases">Databases</h3>
<p>Okay, I said reverse proxies are the #1 issue. Databases are issue #1 ¬Ω</p>
<p>Docker <a href="https://docs.docker.com/get-started/docker-concepts/running-containers/persisting-container-data/">says</a>:</p>
<p>‚ÄúWhen a container starts, it uses the files and configuration provided by the image. Each container is able to create, modify, and delete files and does so without affecting any other containers. When the container is deleted,** these file changes are also deleted**.‚Äù (emphasis mine)</p>
<p>So a <code>docker-compose</code> file says it needs a database. By nature, that database container is going to delete everything when the database stops. The smart developer then adds a volume to the <code>docker-compose</code> file to store the database contents.</p>
<p>What happens if I hit the machine with a sledgehammer?</p>
<p>Your volume won‚Äôt save you.</p>
<h4 id="n12-or-something">N+1=2 or something</h4>
<p>You can save your database from my sledgehammer, or at least the resulting consequences to your application, by having an off-site backup.</p>
<p>Do you know how to backup Authentik?</p>
<p>Me neither.</p>
<p>I could probably do okay by iterating over all of the volumes on the service and copying the files in the volume. That may be wasteful and capture files I don‚Äôt care about. It may also produce corruption unless I take the service offline.</p>
<p>You could modify the <code>docker-compose</code> configuration and add in a sidecar that stops the database server and exports its databases into a backup-friendly format, then export that from the cluster.</p>
<p>You could also do some <a href="https://www.howtoforge.com/tutorial/how-to-use-snapshots-clones-and-replication-in-zfs-on-linux">crazy stuff </a>with filesystem-level replication.</p>
<p>There be dragons.</p>
<h4 id="waste">Waste</h4>
<p>Did you know that one database server can service many logical databases? It can! So, if each of your services bundles a separate database server process we are wasting compute resources, just like a reverse proxy. Nobody needs 5 copies of Postgres fighting for context switches on the same system. Run one Postgres, have it manage 5 databases.</p>
<p>Can one learn this power? Not from <code>docker-compose</code></p>
<h3 id="in-pictures">In Pictures</h3>
<p>To summarize the problem I drew this pretty diagram of services running with docker-compose:</p>
<p><img src="https://blog.tealok.tech/post/docker-compose-isnt-enough/containers-with-compose.png" alt="Another block diagram that starts with hardware, an operating system, and a container runtime. This time we have multiple database containers in the container runtime talking to volumes and a port remapper between the webapp containers and the reverse proxy. There‚Äôs duplicate containers for everything." title="This image really understates how annoying it is to have dozens of services that need manual port remapping and how annoying it is to figure out what the hell any given application is doing with each of the 5 ports they want to expose."></p>
<h2 id="the-solution">The Solution</h2>
<p>Okay, maybe not ‚Äúthe‚Äù solution, not yet, but certainly <strong>a solution</strong>.</p>
<p>Let‚Äôs move up a layer of abstraction. Instead of talking about meaningless interchangeable container images and opaque network protocols let‚Äôs add some semantics. Our semantics are going to delimit the kinds of containers that we can depend on: databases, reverse web proxy, cache, static web assets, etc.</p>
<h3 id="an-example-in-semantics">An Example in Semantics</h3>
<p>Here‚Äôs a configuration for a pretend web app  in <code>docker-compose</code>:</p>
<pre tabindex="0"><code>services:
 web:
   build: .
   ports:
     - "8000:5000"
 redis:
   image: "redis:alpine"
</code></pre><p>From the view of docker this is just two containers on the same network (which is implied) and exposing a single port. The actual type of containers and the protocol of the port is meaningless.</p>
<p>Now I‚Äôm going to introduce a new configuration format for my higher-level semantic constructs. I‚Äôm not using YAML, <a href="https://news.ycombinator.com/item?id=12423733">it‚Äôs garbage</a>. I‚Äôm going to use TOML</p>
<pre tabindex="0"><code>service = "mywebapp"
build = "."

[https]
reverse-proxy = true

[cache]
variant = "redis"
</code></pre><p>In this snippet I‚Äôm providing a name for the application. I‚Äôm still building a container image from the current directory. I‚Äôm specifying that I want an https-capable reverse proxy. I don‚Äôt specify a port - the container will always use a standard port for incoming requests from the reverse proxy. That‚Äôs because I didn‚Äôt tell you, but each of these containers gets an IPv6 address within a specific subnet, so all the containers on a host don‚Äôt have to fight for the same pool of ports. I also specify I want a caching service, one that specifically speaks ‚Äúredis‚Äù, but the actual provider is up to the runtime.</p>
<h3 id="solution-1">Solution #1</h3>
<p>This already solves most of the reverse proxy problems:</p>
<ul>
<li>Each program requests a reverse proxy, it doesn‚Äôt instantiate one. No duplication, no waste.</li>
<li>That reverse proxy provides the DNS name the program runs at on a standard environment variable. It‚Äôs not configurable on purpose.</li>
<li>The reverse proxy can be informed by the container of assets that should be extracted from the container image and made available by the reverse proxy. The runtime handles the extraction.</li>
<li>The reverse proxy forwards all paths (that aren‚Äôt static assets) to the program without the need for configuration in the reverse proxy. The application will need to conform to this rather than doing whatever the developers think of and being a snowflake.</li>
</ul>
<h3 id="solution-15">Solution #1.5</h3>
<p>Okay, so what about databases?</p>
<pre tabindex="0"><code>service = "myphotoapp"
image = "github.com/eliribble/iminurphotos"

[https]
reverse-proxy = true

[database]
variant = "sql:2023"
permissions = "full"
</code></pre><p>The only new items here are the <code>database</code> section. It specifies we need a database that complies with the 2023 version of the SQL standard and that the program expects ‚Äúfull‚Äù permissions. This means the applications will create the schema and populate the tables and will take no care to coordinate with other programs within the database.</p>
<p>If an application needs a specific database it can specify a given variant. In general, I‚Äôd encourage app developers to be standards-compliant and avoid requiring specific database variants. This allows operators the freedom to choose a database that‚Äôs best for them.</p>
<p>With this configuration - database owned outside the application - operators are free to stream replication to a second host, create backups, and store those backups however they see fit. This only needs to be configured once and any number of applications can benefit.</p>
<h3 id="what-about-ports">What About Ports?</h3>
<p>Like I said before, each program gets its own IPv6 address that‚Äôs routable over the network the host is on. This means I can run Jellyfin and Paperless NGX on the same host and they can both use <a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">well-known port numbers</a> for HTTP (80). Since we care about security, we‚Äôre going to use a firewall to prevent anything but the reverse proxy from accessing that port.</p>
<p>Applications that bind to port 443 are expected to terminate their own TLS and have a facility for handling certificates. This doesn‚Äôt need to be negotiated or configured. If the application binds to that well-known port, it‚Äôs expected they are using the corresponding protocol, and they are responsible for it.</p>
<p>Pihole should still bind port 53, which is the standard for DNS. Since it has a valid IP address on the network, it can receive DHCP on port 67 and respond properly.</p>
<p>In a lot of ways we got here because containers default to IPv4. This meant there was contention between containers for the host‚Äôs port numbers. This meant we couldn‚Äôt use standard port numbers. Then we had to communicate what we were doing on non-standard port numbers out-of-band through product documentation.</p>
<p>If you start with IPv6 you can have multiple addresses on a single adapter. Then you can have an address per container. Then you can use standard port numbers. Then you can add semantics to your runtime about the right ways to handle the different protocols. Adding all of this together makes it possible to have a single runtime that can run all your applications with standardized interfaces.</p>
<h3 id="moar-pictures">Moar Pictures</h3>
<p><img src="https://blog.tealok.tech/post/docker-compose-isnt-enough/containers-with-tealok.png" alt="‚ÄúAnother block diagram. Hardware and operating system on the bottom. The container runtime has just one block - the Tealok runtime. Within that runtime is the webproxy, database, and storage volumes. It also has an arrow out to offsite backups. Above the Tealok runtime is a number of application containers.‚Äù" title="I haven't decided yet whether or not Tealok should enforce an application having a single container. I'm leaning toward doing it. It certainly makes the diagram cleaner."></p>
<h2 id="tealok---a-new-container-runtime">Tealok - A New Container Runtime</h2>
<p>Tealok is a runtime we‚Äôre building for running containers. It‚Äôs like an <a href="https://en.wikipedia.org/wiki/Intermodal_freight_transport">intermodal freight transport system</a> in the <a href="https://www.docker.com/resources/what-container/">ongoing extended metaphor</a> Docker started over a decade ago. Tealok imposes certain constraints on containers and provides standardized interfaces.</p>
<p>Tealok runs on Linux hosts. You tell it what applications you want to run and it runs them. The applications tell Tealok what they need and Tealok supplies it to the application. Tealok gets TLS certificates, runs a reverse proxy, sets up DNS records, and makes backups. For operators it helps avoid waste, ensure consistent good practices, and reduces the burden of managing individual snowflake deployment configurations. For application developers it makes it easier to make decisions about how their application is deployed.</p>
<p>Tealok‚Äôs designed to make hosting applications operationally simple. So simple, in fact, that anyone who can use a phone can have a Tealok and own their own cloud computing. This means owning your data, owning your services, and owning your destiny. Join us by <a href="https://mailing-list.tealok.tech/subscription/form">subscribing to our mailing list</a>, <a href="https://www.tealok.tech/hardware.html">preordering some hardware</a>, or <a href="https://github.com/tealok-tech/tealok">contributing to the project</a>.</p>

		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[80286 ATX mainboard based on the IBM 5170 AT PC (122 pts)]]></title>
            <link>https://github.com/rodneyknaap/atx-286at-v1-mainboard</link>
            <guid>42122642</guid>
            <pubDate>Wed, 13 Nov 2024 03:34:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/rodneyknaap/atx-286at-v1-mainboard">https://github.com/rodneyknaap/atx-286at-v1-mainboard</a>, See on <a href="https://news.ycombinator.com/item?id=42122642">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">ATX form factor 80286 AT mainboard PCB Rev 1</h2><a id="user-content-atx-form-factor-80286-at-mainboard-pcb-rev-1" aria-label="Permalink: ATX form factor 80286 AT mainboard PCB Rev 1" href="#atx-form-factor-80286-at-mainboard-pcb-rev-1"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rodneyknaap/atx-286at-v1-mainboard/blob/main/286-AT-PC-ATX-mainboard_Rev1_3Dviewer_2.png"><img src="https://github.com/rodneyknaap/atx-286at-v1-mainboard/raw/main/286-AT-PC-ATX-mainboard_Rev1_3Dviewer_2.png" alt="A 3D view picture of the mainboard design generated by KiCad"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rodneyknaap/atx-286at-v1-mainboard/blob/main/ISA-Memory-subsystem-Rev1-top-view2.png"><img src="https://github.com/rodneyknaap/atx-286at-v1-mainboard/raw/main/ISA-Memory-subsystem-Rev1-top-view2.png" alt="A 3D view picture of the ISA Memory card design generated by KiCad"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rodneyknaap/atx-286at-v1-mainboard/blob/main/Img_4692s.jpg"><img src="https://github.com/rodneyknaap/atx-286at-v1-mainboard/raw/main/Img_4692s.jpg" alt="A photo of the finalized system with all upgrades enabled"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Current status(okt 2024): This project is built, fully functional, now able to operate at 20MHz CPU speed.</h2><a id="user-content-current-statusokt-2024-this-project-is-built-fully-functional-now-able-to-operate-at-20mhz-cpu-speed" aria-label="Permalink: Current status(okt 2024): This project is built, fully functional, now able to operate at 20MHz CPU speed." href="#current-statusokt-2024-this-project-is-built-fully-functional-now-able-to-operate-at-20mhz-cpu-speed"></a></p>
<p dir="auto">See at the bottom for the latest developments!</p>
<p dir="auto">The project consists of a ATX mainboard and a ISA memory card.</p>
<p dir="auto">Purpose and permitted use, cautions for a potential builder of this design
This project was created for historical purposes out of love for historical computing designs and for the purpose of enabling computing enthousiasts with a sufficient level of building and troubleshooting expertise to be able to experience the technology by building and troubleshooting the hardware described in this project. Due to the level of this project, it may be suitable as a project for students to get into. If there are any questions from teachers who like to teach about this technology I would be happy to answer them. It may be really interesting to analyse the elaborate and complex CPU timing and 8 bit to 16 bit data byte translation and DMA mechanisms in an educational setting.</p>
<p dir="auto">Besides the GPL3 license there are a few warnings and usage restrictions applicable:
No guarantees of function or fitness for any particular or useful purpose is given, building and using this design is at the sole responsibility of the builder.</p>
<p dir="auto">Do not attempt this project unless you have the necessary electronics assembly expertise and experience, and know how to observe all electronics safety guidelines which are applicable.</p>
<p dir="auto">It is not permitted to use the computer built from this design without the assumption of the possibility of loss of data or malfunction of the connected device. To be used strictly for personal hobby and experimental purposes only. No applications are permitted where failure of the device could result in damage or injury of any kind.</p>
<p dir="auto">If you plan to use this design or any part of it in new designs, the acknowledgement of the designer and the design sources and inspirations, historical and modern, of all subparts contained within this design should be included and respected in your publication, to accredit the hard work, time and effort dedicated by the people before you who contributed to make your project possible.</p>
<p dir="auto">No guarantee for any proper operation or suitability for any possible use or purpose is given, using the resulting hardware from this design is purely educational and experimental and not intended for serious applications. Loss of data is likely and to be expected when connecting any storage device or storage media to the resulting system from this design, or when configuring or operating any storage device or media with the system of this design.</p>
<p dir="auto">When connecting this system to a computer network which contains stored information on it, it is at the sole responsibility and risk of the person making the connection, no guarantee is given against data loss or data corruption, malfunctions or failure of the whole computer network and/or any information contained inside it on other devices and media which are connected to the same network.</p>
<p dir="auto">When building this project, the builder assumes personal responsibility for troubleshooting it and using the necessary care and expertise to make it function properly as defined by the design. You can email me with questions, but I will reply only if I have time and if I find the question to be valid. Which will probably also lead to an update here. I want to primarily dedicate my time to new project development, I am not able to do any user support, so that's why I provide the elaborate info here which will be expanded if needed.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Acknowledgements</h2><a id="user-content-acknowledgements" aria-label="Permalink: Acknowledgements" href="#acknowledgements"></a></p>
<p dir="auto">This project was inspired by:</p>
<ul dir="auto">
<li>IBM Corporation who introduced the 16 bit AT concept after their PC and XT product lines</li>
<li>concept and software of the XT-IDE universal BIOS <a href="https://www.xtideuniversalbios.org/" rel="nofollow">https://www.xtideuniversalbios.org</a></li>
<li>discussions with members of the German DOS Reloaded forum
<a href="https://dosreloaded.de/forum/thread/6811-diy-diskretes-logik-atx-turbo-at-286-mainboard-ohne-chipsatz/" rel="nofollow">https://dosreloaded.de/forum/thread/6811-diy-diskretes-logik-atx-turbo-at-286-mainboard-ohne-chipsatz/</a></li>
<li>discussions with members of the VCF forum
<a href="https://forum.vcfed.org/index.php?threads/project-to-create-an-atx-80286-mainboard-based-on-the-ibm-5170.1243108/" rel="nofollow">https://forum.vcfed.org/index.php?threads/project-to-create-an-atx-80286-mainboard-based-on-the-ibm-5170.1243108/</a>
I want to thank users Makefile, acgs, sergey, Timo W., sharkcz, Hpela, Alvaro64, Chuck(G), Theoryboy, modem7, Toporty√°n, Hak Foo, sorphin, ajacocks, Eudimorphodon, lowen, jonny64, HoJoPo, mogwaay, upnorth and sqpat for their responses, constructive ideas and discussions, and technical feedback!</li>
</ul>
<p dir="auto">In particular I want to thank Johann (jonny64) who took an active concern and participation in my project to help reverse engineer the PAL chips on the 5170 mainboard.
This process has been extremely difficult and Johann helped a lot by programming python scripts to quickly be able to analyze large volumes of logic equation information.
Resulting from our cooperation Johann has developed a reverse engineering python program called "pete" and a script which can generate the PAL fuse maps from reverse analysis which can be directly programmed into a GAL. He is planning, or has published his work in the mean time on GitHub so be sure to search for his project here if you are doing similar work on PAL ICs used in old devices.</p>
<p dir="auto">User Alvaro64 from Spain was very kind to provide friendly discussions and various information and he even offered me to borrow his legacy Intel mainboard for checking and analysis.</p>
<p dir="auto">I was happy to see some reactions from Sergey who also did some amazing work to design and build various classic PCs. He developed a BIOS of his own and a HD Floppy supporting BIOS extension.</p>
<p dir="auto">User lowen gave me some very useful time saving tips in using CPLD programmable logic from Atmel/Microchip, to be able to more easily and quickly get started with suitable CPLD parts in this project.
This will be my first programmable logic project which I will explain below.
User Eudomorphodon provided me some valuable feedback in terms of which type of logic would be possible to exist within the IBM PALS which was a big issue and problem to determine exactly what IBM did in their PAL programming, literally costing me a few weeks.
User sharkcz was very helpful for pointing me to the Copam PC-501 schematics where I found more clues about the 80287 coprocessor control circuits which are also located in a PAL on the IBM 5170.
User Chuck(G) also provided various information and wrote extensive useful information about PAL chips and how to reverse engineer them.</p>
<p dir="auto">I thank Charles MacDonald for developing his PAL read adapter and PA.EXE software which reduces the logic equations.
As I mentioned, Johann(jonny64) developed his own version of a PAL analyzer named "pete" which can do a few more advanced things to be able to do very important logic reductions and conclusions on RAW PAL read data from Charles' adapter. Especially is "pete" able to detect certain inputs on a PAL which sometimes switch to operating as an output. So the scripts Johann made can conclude this mode of operation by itself and also can reduce the subsequent logic consequences of this operation mode in the logic equations. If we don't have this automatic function from pete, it will be the person doing the analysis who will need to reason what is happening back from the observations, which is what I have initially done myself, it was quite a frustrating process to discover what was happening exactly inside the PAL U87 which caused me a lot of stress and lost sleep!</p>
<p dir="auto">Also a special thanks goes out to user LimeProgramming (Adam) here on GitHub for making his excellent USB to serial mouse project with the RP2040!
<a href="https://github.com/LimeProgramming/USB-serial-mouse-adapter">https://github.com/LimeProgramming/USB-serial-mouse-adapter</a>
He kindly agrees for his project to be integrated into mine in a modified form, thank you Adam!</p>
<p dir="auto">During my work I always keep meeting other enthousiasts, a special mention deserves Luca (Retro*Tech) from Italy who supported me with encouraging words and expressed the kind wish to contribute some helpful hardware items for my research and development work. Thanks Luca!</p>
<p dir="auto">Thanks to sqpat for the friendly discussions about how to enhance my project, for sending me two of his verified high clock rate 286 CPUs, and for his suggested assembly code to make a shadow copy of all ROM code into shadow RAM. This change made 20MHz operation a reality! Do remember to check out <a href="https://github.com/sqpat/RealDOOM">his project RealDoom here on GitHub</a>!</p>
<p dir="auto">Thank you dreNorteR for your helpful assembly code contributions and X86 programming tips for detecting a warm boot to support shadow copy functions!</p>
<p dir="auto">Everyone else who showed an interest in my work and commented and replied to all my posts, thanks for your help and friendship!</p>
<ul dir="auto">
<li>datasheets, application notes and specifications by:
Intel (80286 datasheet)
LG Semiconductors (Goldstar) (GM82C765 FDC, GM16C550)
Standard Microsystems Corporation (FDC37C65C datasheet, FDC register access table)
Realtek (RTL8019AS)
NCR (53C400 SCSI)</li>
</ul>
<p dir="auto">Acknowledgements of people who were instrumental in preceeding developments upon which this design was elaborated:</p>
<p dir="auto"><a href="https://www.ibm.com/ibm/history/exhibits/builders/builders_estridge.html" rel="nofollow">Don Estridge</a>
<a href="https://www.ibm.com/ibm/history/exhibits/pc25/pc25_birth.html" rel="nofollow">IBM PC development team</a>
<a href="https://arstechnica.com/gadgets/2017/06/ibm-pc-history-part-1/" rel="nofollow">Some historical info</a>
<a href="https://www.ibm.com/ibm/history/exhibits/builders/builders_lowe.html" rel="nofollow">Bill Lowe</a></p>
<p dir="auto"><a href="https://www.xtideuniversalbios.org/" rel="nofollow">XT-IDE universal BIOS project development team for developing the XT-IDE BIOS</a>
Amazing and extremely efficient software, fast disk access for XT and various AT computers.
Works with every IDE drive I have tested. Still under active development earlier in 2023.</p>
<p dir="auto">All source data remains the copyright of the original creators and must be respected.
This design is only released for hobby computing enthousiasts and educational purposes, no profit is to be made from this design or derived work from it.</p>
<p dir="auto">I have taken time to respectfully include all the above acknowledgements. This project has taken me almost a year up to the present time starting from all the research work I have done. If anyone or anything is left out, that is absolutely not intentional, please contact me and I will be happy to update this page further.</p>
<p dir="auto">After elaborately studying the available source design files which inspired the system, I conceived this design with my own variations, circuit additions and changes which I see as improvements according to my personal design views and preferences.</p>
<p dir="auto">My purpose was a good and clear recreation in my own methods, and never to exactly copy the original.
This project also serves to document the historical 16 bit AT PC design by implementing the fundamental concepts in a functional build which incorporates a lot of the original design concepts and functions which Don Estridge of IBM conceived. I admire Don and his work and I will attempt to explain in this text why his 16 bit AT concept was so important and elemental in promoting the industry standard development process!</p>
<p dir="auto">I have designed various I/O control circuits using the chip manufacturer datasheets to determine the proper interfacing methods, ports etc suitable for this 286 AT design.
I also searched in many IO port documents to determine how to interface the onboard devices.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">How the project took more solid form</h2><a id="user-content-how-the-project-took-more-solid-form" aria-label="Permalink: How the project took more solid form" href="#how-the-project-took-more-solid-form"></a></p>
<p dir="auto">I started by finding a suitable mainboard for study, testing and analysis. I found a few examples from NCR and ARC however these proved to be frustratingly unstable and in a poorly operating condition. By no means would I have been able to base this project on those designs. Luckily I found an Ebay auction which offered an IBM 5170 mainboard for a very reasonable price. I repaired this mainboard and I have extensively tested it out. The IBM has the added advantage of being completely documented in their schematics which was very useful for this project.</p>
<p dir="auto">I proceeded to draft modern KiCad schematics for the 5170 and subsequently modified the IBM designs to suit this project as much as possible. This involved removing the DRAM support logic and parity checking mechanisms from the schematics. Next I needed to reverse engineer the contents of PAL U87 which is elemental in the 5170 operation. Without the U87 design, a 5170 and its schematics will be useless and missing the vital operating circuits without which we have no AT! At the time there was not any documentation of the logic contained inside U87 to be found anywhere. So I proceeded to discover the logic by analysis. I used the method developed by Charles MacDonald initially and discussed with Johann to develop a utility program python script which I needed to form my conclusions about the actual operation of the U87 PAL.
Finally we succeeded to crack the design and even further simplify the logic equations of U87 to their most likely original PAL source code as originally created, probably by Don Estridge himself. If anyone has more information on how he developed the AT, please contact me, I am very much interested!</p>
<p dir="auto">After I had the complete design of the 5170, I had to evaluate the large amount of logic chips which would be involved in case I would choose to use TTL chips only to implement the whole design. From the equations of U87, I could conclude why IBM chose this path of development. Adding all this additional logic would make the PCB even larger and make this whole concept impossible to properly implement on a single PCB in a practical PCB size. So I have concluded that I will need to use programmable logic in order to reduce the PCB area needed. And since I needed to use programmable logic anyway, I decided I had better do it properly to benefit from this concept the most. So I chose the ATF1508AS CPLD with the help and advice of user lowen.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Development path leading up to the first design revision</h2><a id="user-content-development-path-leading-up-to-the-first-design-revision" aria-label="Permalink: Development path leading up to the first design revision" href="#development-path-leading-up-to-the-first-design-revision"></a></p>
<p dir="auto">After reverse engineering PAL U87, I proceeded to draft schematics and did some initial parts placements on the mainboard. This quickly led me to conclude that in order to integrate many necessary devices onboard as planned, I would need to shift the entire memory subsystem and decoder CPLD onto a ISA adapter card. The BIOS and option ROM EPROMS are still placed on the mainboard because I like it more this way in a more traditional view of typical mainboards of the time.</p>
<p dir="auto">I proceeded to draft my modified and new design of this project into schematics using KiCad and Quartus.</p>
<p dir="auto">The complete design including my changes and additions is contained in and needs:</p>
<ul dir="auto">
<li>a full ATX size mainboard PCB</li>
<li>three 84 pin PLCC CPLDs which can be plugged into through-hole sockets</li>
<li>a ISA memory subsystem card PCB containing the footprints for a total of 15MB of fully decoded SRAM memory.
This card provides 640KB of conventional memory, 128KB of UMBs at D0000 and E0000 segments with disable jumpers, and 14MB of XMS memory.
Each set of two 512KB SRAM ICs provides an additional megabyte of RAM for the system.
The amount of memory can be chosen by populating the desired amount of SRAM chips.
So basically this ISA slot card takes the function of the historically more typical DRAM SIMMs and implements the full PC memory space in SRAM memory.
Please note to observe the pin 1 mark of your particular RAM ICs and make sure you are not using a reversed pinout SRAM which would need to be soldered in flipped over orientation!</li>
</ul>
<p dir="auto">The mainboard provides two 16 bit IDE ports, a 8 bit SCSI port, a floppy drive interface, 16 bit Realtek LAN, USB to serial mouse using RP2040, discrete simplified LPT port, ATX power supply control, reset logic, and various LEDs to indicate certain system functions. The 64k BIOS is contained in two EPROMs on the mainboard and there is also a 32kb sized option ROM EPROM socket included on the mainboard. The design of this project is meant to use the XT-IDE BIOS option ROM software developed by XT IDE universal BIOS team, which needs to be configured and programmed into an option ROM EPROM IC which can be placed in the option ROM socket on the mainboard.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">My appreciation for Don Estridge and his amazing AT concept</h2><a id="user-content-my-appreciation-for-don-estridge-and-his-amazing-at-concept" aria-label="Permalink: My appreciation for Don Estridge and his amazing AT concept" href="#my-appreciation-for-don-estridge-and-his-amazing-at-concept"></a></p>
<p dir="auto">IBM released the 5170 on the market for a price which no competitor on the PC market could equal at the time. For a long period of time, the AT went without any competition!
IBM even could not meet the demand of new units.
The 5170 offered substantial performance increases which raised the PC standard to a whole new level of usage, and formed a true competing product for mini computers at the time.
But the AT was much more than those aspects when you dive deep into the technology which powers it. IBM succeeded in creating a 16 bit PC which achieved 100% compatibility with all previous 8-bit hardware and software. When you study how this was done, you realize it was no small thing! In order to achieve this they created some pretty ingenious mechanisms of 8 to 16 bit data byte conversions for which they even synchronized and modified the CPU cycles on the 80286 by delaying them while the data bytes are being converted with perfect timings. The more I studied this principle, the more respect I developed for the work by IBM engineers. To provide such advanced conversion technology in the AT was a stroke of genious and this has played an extremely important role in the historic success of the 16 bit AT PC and it further solidified the success of the emerging industry standard. When you look at computer history, this achievement of true backward compatibility is truly amazing to behold and in my opinion this is a much overlooked fact. To the user it is almost invisible because everything simply works and is fully functional. 8 And 16 bit technology just works seemlessly and perfectly together. But for those who study everything in full detail, this reveils some amazing technology and circuits developed by IBM which deserve some proper respect and credit.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">BIOS to use</h2><a id="user-content-bios-to-use" aria-label="Permalink: BIOS to use" href="#bios-to-use"></a></p>
<p dir="auto">I recommend using a BIOS other than the IBM one mainly because the IBM BIOS is known to contain restrictions in operation and verifies the clock speed to lockout operation if the speed is raised.
So any similar BIOS to the IBM 5170 from other sources would possibly qualify to run on this project.
There have been BIOS code produced by ARC, COPAM, NCR and MR BIOS to name a few examples.
MR BIOS is the most elegant BIOS at the moment. It may sometimes misdetect the COM port chip, erasing the CMOS RAM will reset detection.
Recommended to backup the CMOS RAM with a utility to file as soon as the COM port is detected.
Restoring that file and a CTRL-ALT-DEL ensures that you can use the mouse properly.
The Quadtel BIOS for 5170 is best at detecting all hardware though less elegant looking, but 100% reliable.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Project status (july 2024)</h2><a id="user-content-project-status-july-2024" aria-label="Permalink: Project status (july 2024)" href="#project-status-july-2024"></a></p>
<p dir="auto">The mainboard and ISA memory card are built and extensively tested.
The CPLD programs are verified and debugged, and latest versions are uploaded here in a single archive containing all the CPLD design projects and JED files.</p>
<p dir="auto">There is no Turbo function in the design, the CPU internal clock speed is verified at 16Mhz, tested for many hours.
Recommended a Harris 286 rated at 16Mhz. Higher speeds pending, waiting for further testing and verification.
When using sockets, please find tight fitting and reliable ones.
There is a lot of garbage being sold on the internet, stable contacts are a requirement of 16Mhz CPU clock operation.
If your system freezes, the most likely reason is a loose contact so re-insert all ICs.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rodneyknaap/atx-286at-v1-mainboard/blob/main/Rev_1_PCB_Prototype_photo.jpg"><img src="https://github.com/rodneyknaap/atx-286at-v1-mainboard/raw/main/Rev_1_PCB_Prototype_photo.jpg" alt="A photo of the assembled Rev1 prototype test setup"></a></p>
<p dir="auto">It is currently not recommended to add the RTL8019AS chip on the mainboard.
On my setup this created a lot of interference.
In fact I recommend a UMC UM9008 LAN card instead.
FTP transfer works most reliable when "putting" a large archive backup for example into the remote FTP server.
This allows to transfer gigabytes without any freeze.
For archiving and backups ARJ is recommended on this type of system.
If you want to play Doom, I highly recommend the Doom8088 project here at GitHub
Make sure to add enough RAM, for example 8 chips will make 4MB of RAM.
All RAM should be added in sequence, and will be automatically detected by the BIOS.
All RAM above 1MB is technically XMS memory (HIMEM.SYS) and DOS can be loaded into high memory.
128 KB of UMB blocks in segment D and E fully available for loading TSR drivers, needs UMB RAM clearing and UMB driver by Marco van Zwetselaar same as on XT PC.</p>
<p dir="auto">VGA card: recommended a Trident TVGA9000B card. Otherwise just test what you have.
Usually older and slower cards may not work at 16Mhz CPU clock.</p>
<p dir="auto">The DMA controllers operate at 5.33Mhz at 1/3 division from 16Mhz FDC clock, this is slightly over spec but with newer date DMA chips this seems fine. Tested and verified formatting and booting from floppy disks, using disk images to restore to floppy disk, all appears to function 100% reliably using this DMA clock speed. This can benefit games where sound data is loaded via DMA for example so the game routines experience less delays from loading the sound.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Please read these notes:</h2><a id="user-content-please-read-these-notes" aria-label="Permalink: Please read these notes:" href="#please-read-these-notes"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Recommended changes/additions besides PCB assembly:</h2><a id="user-content-recommended-changesadditions-besides-pcb-assembly" aria-label="Permalink: Recommended changes/additions besides PCB assembly:" href="#recommended-changesadditions-besides-pcb-assembly"></a></p>
<ul dir="auto">
<li>pulldown 15k on PEREQ</li>
<li>pullup 10k on /ERROR (free resistor on RN2 pin 2)</li>
<li>R10 SHOULD BE SHORTED, CONNECT PIN2 OF KBC TO GROUND IS MORE STABLE</li>
<li>Pico LEDS wrong resistors should be 1k resnet</li>
<li>R72 R73 R74 not needed short these connections</li>
<li>polarity hdd leds reversed on silkscreen, check schematic should be reversed</li>
<li>use R23 of 300 ohms, works best</li>
<li>S0 AND S1 PULL UP 4K7</li>
<li>use 10k resistor networks on all ISA data and address lines. Best to solder a resistor network on the transceivers which is the easiest.</li>
<li>These 10k resistors are not required but add to system stability</li>
<li>the RTL8019AS cannot be used, leave it out</li>
<li>40MHz oscillator provides 20MHz to the CPU.</li>
</ul>
<p dir="auto">Check Limeprogramming USB to serial project for programming RP2040 on GitHub. Pins see the schematic of mainboard, same numbering as RP2040, using some wires and pin strips the RP2040 can be directly plugged in.
See the VCF project thread for other details.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">The core AT components are fully verified in my test build</h2><a id="user-content-the-core-at-components-are-fully-verified-in-my-test-build" aria-label="Permalink: The core AT components are fully verified in my test build" href="#the-core-at-components-are-fully-verified-in-my-test-build"></a></p>
<p dir="auto">All the information on this GitHub page is openly provided for informational purposes only for everyone interested in such a project, with all the clear cautions and understanding that anything you do is at your own sole risk and responsibility and no operation or useful purpose is implied or possible, please carefully read and understand the contents of all comments above.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">replacement logic for the 82284 and 82288 is fully developed</h2><a id="user-content-replacement-logic-for-the-82284-and-82288-is-fully-developed" aria-label="Permalink: replacement logic for the 82284 and 82288 is fully developed" href="#replacement-logic-for-the-82284-and-82288-is-fully-developed"></a></p>
<p dir="auto">I have replaced all the output system control signals previously coming from the 82284 and 82288 with my own custom logic.
So this makes the 82284 and 82288 chips no longer necessary for this project. This means that some level of rewiring is needed for the current PCB. I have done these upgrades in such a way that a minimal amount of wires will need to be added. Compared to the whole system it's not that much.
The System controller now receives the double clock frequency from an oscillator, and controls the CPU clock, CPU synchronization to the /RES input and system /RESET net.
All the system control is now generated by the System control CPLD by extensive state machine logic which I created. I was inspired after finding an article by Doug Kern of AMD in a documentation book full of applications for AMD programmable logic. So one of the example application was the replacement of the 82284 and 82288. Doug had created his own version of the 82284 and 82288 using a custom CPU cycle type. After a few brief tests using his method, I decided to design my own version of such logic. Basically I started from scratch, having only the datasheets of the 82284, 82288, and 80286 as a source of information. I have done many measurements and analysis of the system and the resulting design is my recreation. After seeing what Doug created using a state machine model of logic, I also decided to design my own state machine which facilitates very straight forward interpretation of the state bits in other logic areas. So the system controller now outputs all the system control signals, and we no longer need the 82284 and 82288. This upgrade also allows much faster logic to take over these functions inside the CPLDs.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Shadow RAM for all the ROM code</h2><a id="user-content-shadow-ram-for-all-the-rom-code" aria-label="Permalink: Shadow RAM for all the ROM code" href="#shadow-ram-for-all-the-rom-code"></a></p>
<p dir="auto">When working with CPU speeds of 20MHz and higher, it's no longer reliable to use ROM chips to initialize the system from. So I started work on a Shadow RAM system, encouraged by sqpat and dreNorteR on the VCF forums. Sqpat and dreNorteR gave me some sound advice on the assembly commands needed for shadow copying the BIOS and option ROM space into a shadow RAM area. I changed the RESET jump command to jump into my code, which then continues to jump into the BIOS INIT/POST entry point. Next I developed a system to switch the Shadow RAM into place after the copy is completed by writing to a memory location in the 0C0000 memory region. After testing this system, immediately I saw a big improvement in my 20MHz tests.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Replacing the 74LS646</h2><a id="user-content-replacing-the-74ls646" aria-label="Permalink: Replacing the 74LS646" href="#replacing-the-74ls646"></a></p>
<p dir="auto">The 74LS646 used in the IBM 5170 AT design is another part which needs substitution. So I proceeded to analyze and rewrite the logic of the 74LS646, specifically as used in the 5170 AT logic. The result is that the 74LS646 can be replaced by a single 74F245 transceiver and a 74F574 latch. I have tested this solution extensively and it now has the added advantage that the functions of the 74LS646 can now be replaced with much faster 74F type logic.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rodneyknaap/atx-286at-v1-mainboard/blob/main/74LS646_REPLACEMENT_245_574.png"><img src="https://github.com/rodneyknaap/atx-286at-v1-mainboard/raw/main/74LS646_REPLACEMENT_245_574.png" alt="Schematic of 74LS646 replacement - section to be wired in"></a>
Schematic of 74LS646 replacement - section to be wired in place of the actual 74LS646</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rodneyknaap/atx-286at-v1-mainboard/blob/main/74LS646_REPLACEMENT_CONTROL.png"><img src="https://github.com/rodneyknaap/atx-286at-v1-mainboard/raw/main/74LS646_REPLACEMENT_CONTROL.png" alt="Schematic of 74LS646 replacement - section inside the System controller CPLD"></a>
Schematic of 74LS646 replacement - control logic inside the System controller CPLD generating the control inputs for the replacement ICs.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Regarding the real time clock</h2><a id="user-content-regarding-the-real-time-clock" aria-label="Permalink: Regarding the real time clock" href="#regarding-the-real-time-clock"></a></p>
<p dir="auto">I have done extensive testing with the RTC and CMOS RAM chip. In my tests, I achieved the most reliable results using a DS12885 chip, which I recommend using. The two jumpers next to the RTC need to be set accordingly for the DS12885 chip. Also, I suggest that no battery is really needed as long as you leave the ATX PSU on the power cable and the back power switch set to the ON position. The circuits on the mainboard will provide power to the RTC and RTC clock generator in order to advance the system clock and keep the CMOS settings. So there is no need to be working with potentially harmful batteries in the system if you prefer not to, as I also do.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Getting 20MHz to function reliably</h2><a id="user-content-getting-20mhz-to-function-reliably" aria-label="Permalink: Getting 20MHz to function reliably" href="#getting-20mhz-to-function-reliably"></a></p>
<p dir="auto">Operating the system at 20MHz needs a few modifications:</p>
<ul dir="auto">
<li>Shadow RAM</li>
<li>CPU clock cycle control, meaning to manipulate the CPU clock for certain operations like reading the VGA BIOS, accessing the VGA RAM. These memory map areas are behind the VGA controller and thus this interpretation of memory causes some delays which needs adjustment of the cycles. I have created decoding which can also be expanded and upgraded to facilitate other areas of memory or I/O as needed to accommodate slower expansion cards or system chips.</li>
<li>extending the ALE signal, the ALE signal is normally of the same period length as one double CPU clock. However around 18MHz and above, this is simply getting too short for the address latches on the ISA slots to reliably store the address states for all the cycles. So this means that the ALE signal needs further enhancement. I have tried various mechanisms, and the best result was achieved by extending the ALE signal to start earlier at the CPU assertion of S1/S0 status signals, and to remain within the CPU state of T_STATUS. Using this method can extend the ALE signal long enough to reliably be able to catch the address states at 20MHz.</li>
<li>changing the logic type of many of the transceivers and latches in the system to speed up the bus.</li>
<li>At 20MHz, the System controller CPLD has difficulty terminating the cycles at 1 wait state, which results in skewing the cycle termination one cycle more than the logic is set to. Which is fine for I/O operations which are inherently slower than fast memory access. For speeding up the 16 bit memory access I have reduced the circuit to zero wait states. With the added wait state by frequency limits of the System controller, we now get a single wait state. This results in 13322 writes per millisecond using the "VIDSPEED.EXE *" test.</li>
<li>the option ROM is now no longer a separate ROM chip but included in the system BIOS ROM positions. The SA16 line needs to be wired to pin 1 on both these ROMS and the memory decoder in the 20MHz version is already updated to support this. The lower half of the ROM chips provides 32KB of option ROM space at 0C8000 - 0CFFFF. This allows for example XT-IDE ROM routines to run at fast 16 bit RAM speeds using the shadow RAM system. So the option ROM socket needs to be left empty and the ROMs replaced with fast types of 64KB flash ROM chips which support the standard DIP ROM pin locations.</li>
</ul>
<p dir="auto">Mostly the system now operates on 74F logic. Certain areas need HCT, ALS and HC logic.
20MHz Is really stretching the capabilities of the 10ns CPLDs. I am not sure how much higher the system could run, though I have been able to get into the MR BIOS menu at 25 MHz a few times. But that is far from a functional system. At 20MHz, in windows there is some minor graphics glitching going on, though it's nothing like freezing the system or causing resets. Other than some glitching, the system keeps running fine. In DOS the system is completely stable and I have not seen any problems running games or software in DOS.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Shadow copy routines in assembly source code:</h2><a id="user-content-shadow-copy-routines-in-assembly-source-code" aria-label="Permalink: Shadow copy routines in assembly source code:" href="#shadow-copy-routines-in-assembly-source-code"></a></p>
<div data-snippet-clipboard-copy-content="section .text
global main

main:
in al,0x64       ;read kbc status thank you dreNorteR
test al,0x04     ;bit 2 clear on powerup
jnz goto_init    ;if not clear, assume shadow RAM already initialized

mov cx,0xf000   ; thank you sqpat for inspiring this solution
mov ds,cx	; source segment
mov cx,0xf000	
mov es,cx	; destination segment
mov cx,0x8000	; number of copies 32768 x 2 bytes
xor di,di	; clear di destination index register
xor si,si	; clear si source index register
rep movsw	; repeat copy instruction in word mode cx times
mov cx,0xC800
mov ds,cx	; source segment
mov cx,0xC800
mov es,cx	; destination segment
mov cx,0x4000	; number of copies 16384 x 2 bytes
xor di,di	; clear di destination index register
xor si,si	; clear si source index register
rep movsw	; repeat copy instruction in word mode cx times
mov cx,0xC000	; switch the shadow RAM in place of the ROM area now
mov ds,cx	; load segment pointer with 0xC000 for register indirect write operation
xor di,di	; clear offset pointer to 0x0000
mov [ds:di], cx	; write contents of cx into memory location 0xC000:0x0000

goto_init:
jmp 0xF000:0xE05B	; jump to BIOS INIT and POST start address to initialize the system"><pre><code>section .text
global main

main:
in al,0x64       ;read kbc status thank you dreNorteR
test al,0x04     ;bit 2 clear on powerup
jnz goto_init    ;if not clear, assume shadow RAM already initialized

mov cx,0xf000   ; thank you sqpat for inspiring this solution
mov ds,cx	; source segment
mov cx,0xf000	
mov es,cx	; destination segment
mov cx,0x8000	; number of copies 32768 x 2 bytes
xor di,di	; clear di destination index register
xor si,si	; clear si source index register
rep movsw	; repeat copy instruction in word mode cx times
mov cx,0xC800
mov ds,cx	; source segment
mov cx,0xC800
mov es,cx	; destination segment
mov cx,0x4000	; number of copies 16384 x 2 bytes
xor di,di	; clear di destination index register
xor si,si	; clear si source index register
rep movsw	; repeat copy instruction in word mode cx times
mov cx,0xC000	; switch the shadow RAM in place of the ROM area now
mov ds,cx	; load segment pointer with 0xC000 for register indirect write operation
xor di,di	; clear offset pointer to 0x0000
mov [ds:di], cx	; write contents of cx into memory location 0xC000:0x0000

goto_init:
jmp 0xF000:0xE05B	; jump to BIOS INIT and POST start address to initialize the system
</code></pre></div>
<p dir="auto">I should mention, building this system is an advanced work, not for novice builders. The designs need some understanding of the system in order to be able to do the modification wiring on the mainboard. You will need to know which signal goes where by looking at the quartus projects. Some signals are wired between the CPLDs which carry the same net names. I am working on a layout upgrade to include all the changes, which will eventually be released, however this is a lot of work because many areas of the PCB need to be reworked. Changing some of the logic also invites moving circuits around slightly, which will cost even more time than the modifications. I also decided to not include the RTL8019AS and the SCSI controller. The SCSI chips are too hard to find, and the RTL8019AS proved not a stable device on this system. Instead I decided to use a ISA card with a UMC9008AF network chip. I may decide to take an easier path and simply connect everything together in the new configuration, and just leaving some empty spaces on the board where chips were removed. Maybe it's not efficient, however the function of the system is the real goal that we want to achieve.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">What's next now?</h2><a id="user-content-whats-next-now" aria-label="Permalink: What's next now?" href="#whats-next-now"></a></p>
<p dir="auto">Since we have a working AT concept system design, it's now possible to upgrade the core 5170 system concept into a 486 based AT PC design. I will attempt to first feature a 486DX type CPU and forcing it in 16 bit mode. This will make the transition later into a full 32 bit system more easy. So I am working on this concept now. This new design will feature one of more FPGAs for replacing much of the system logic, and to provide and control the system RAM memory. It's my intention to use the fastest affordable memory type which can hopefully support a very clock-efficient CPU function in the new design. The system will be featured using custom cards which fulfill certain functions. Such as a FPGA and memory card, a CPU card, and a core AT logic card. I also have ideas to design the system in such a way that also other solutions would be possible to form a system. Such as when a mainboard with chipset logic is badly damaged because of battery chemicals, someone could opt to move the chipset ICs onto a card and use that card to form a new ATX PC system. Basically it would be giving new life to the chipset ICs in a new design. These are just some of the research phase outlines of the next project, so due to alteration depending on what will be the best design method in my vision.</p>
<p dir="auto">I will continue my work in <a href="https://github.com/rodneyknaap/atx-486at-mainboard">a new project repository here on GitHub</a> which features research, development and design information for my next generation system.
This system will support at least the 286 CPU and the 486DX CPU, and later possibly others.</p>
<p dir="auto">Updated last on oktober 20th, 2024.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Micron launches 60TB PCIe gen5 SSD with 12GB/s read speeds (135 pts)]]></title>
            <link>https://www.micron.com/products/storage/ssd/data-center-ssd/6550-ion</link>
            <guid>42122434</guid>
            <pubDate>Wed, 13 Nov 2024 02:53:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.micron.com/products/storage/ssd/data-center-ssd/6550-ion">https://www.micron.com/products/storage/ssd/data-center-ssd/6550-ion</a>, See on <a href="https://news.ycombinator.com/item?id=42122434">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="featuredcontent-c51baab6d8" data-cmp-data-layer="{&quot;featuredcontent-c51baab6d8&quot;:{&quot;@type&quot;:&quot;micron/components/content/featuredcontent&quot;,&quot;repo:modifyDate&quot;:&quot;2024-11-12T12:35:34Z&quot;,&quot;dc:title&quot;:&quot;DOWNLOAD PRODUCT BRIEF&quot;,&quot;dc:description&quot;:&quot;Micron 6550 ION NVMe‚Ñ¢ is a 60TB SSD available in both 30.72TB or 61.44TB capacities&quot;}}">
  
    <div>
      
    

      
  
  <h2>
    The world‚Äôs fastest and most energy-efficient 60TB SSD 
  </h2>

      
    <div><p>The Micron 6550 ION SSD is the world‚Äôs first 60TB PCIe Gen5 data center SSD, built to deliver unparalleled performance, energy efficiency and density. It‚Äôs ideal for meeting the increasing demands of AI workloads in AI data lakes, high-performance computing (HPC), big data and analytics environments.‚ÄØ</p>
<p>With capacity up to 61.44TB, the 6550 ION SSD provides the high capacity needed for growing AI workloads while delivering best-in-class performance and up to 20% lower SSD power consumption than competitive SSDs.<sup><a href="#fn1" target="_self">1,2,3</a></sup>&nbsp;Its best-in-class power efficiency for AI workloads helps enable increased data center savings and sustainability.<sup><a href="#fn1" target="_self">4</a></sup></p>
<p>As the first 60TB SSD in an E3.S form factor, the 6550 ION SSD provides industry-leading storage density and helps customers reduce their data center footprint up to 67%.&nbsp;</p>
<p>The 6550 ION SSD is also equipped with OCP 2.5 intelligent management capabilities, helping bring cloud-scale capabilities to enterprise data centers.<sup><a href="#fn1" target="_self">5</a></sup> Designed for end-to-end security, it safeguards data with features like SED, SPDM 1.2 and secure encrypted environment (SEE).<sup><a href="#fn1" target="_self">6&nbsp;</a></sup></p>
</div>

      
    

    </div>
    
    <div>
<p><img src="https://dmassets.micron.com/is/image/microntechnology/product-6550-group-front-white%3A3-2-all-others?ts=1731414934546&amp;dpr=off" loading="lazy" itemprop="contentUrl" width="1280" height="768" alt="Micron 6550 ION NVMe SSD ">
    
    
    
</p>

    

</div>

  
</div><div data-cmp-data-layer="{&quot;text-cc4c38187a&quot;:{&quot;@type&quot;:&quot;micron/components/content/text&quot;,&quot;repo:modifyDate&quot;:&quot;2024-11-12T12:35:35Z&quot;,&quot;xdm:text&quot;:&quot;<p>1.&amp;nbsp;The Micron 6550 ION offers a capacity of up to 61.44TB. Comparisons are made with other 61.44TB NVMe SSDs from Samsung, Solidigm and Western Digital.&amp;nbsp;</p>\r\n<p>2.&amp;nbsp;These comparisons use publicly available competitor information from published sources at the time of the 6550 ION launch, with the 6550 ION and Western Digital drive using a maximum power of 20W and Samsung and Solidigm drives using 25W, resulting in up to 20% less maximum power consumption for the 6550 ION.</p>\r\n<p>3.&amp;nbsp;The Micron 6550 ION 61.44TB SSD at 20W provides better performance/watt than competing 61.44TB SSDs at 20W and 25W, resulting in up to 20% power savings. Performance per watt claims are based on publicly available competitor information per footnote 1.</p>\r\n<p>4.&amp;nbsp;Tests conducted by Micron engineering using a maximum power limit of 20W for the Micron 6550 ION and the Solidigm D5-P5336 using 25W maximum for all tests in this section.</p>\r\n<p>5.&amp;nbsp;The Micron 6550 ION SSD complies with most, but not all, requirements of the Open Compute Project (OCP) Datacenter NVMe SSD Specification 2.5. For more information, see the <a href=\&quot;https://www.opencompute.org/documents/datacenter-nvme-ssd-specification-v2-5-pdf\&quot; target=\&quot;_blank\&quot;>OCP 2.5 public specification</a>.</p>\r\n<p>6.&amp;nbsp;No hardware, software or system can provide absolute security under all conditions. Micron assumes no liability for lost, stolen or corrupted data arising from the use of any Micron products, including those products that incorporate any of the mentioned security features.</p>\r\n<p>7.&amp;nbsp;Fill time calculation = 100% 128KB sequential writes per specification performance vs. competitive drives, per footnotes 1 and 2, until the drive‚Äôs usable capacity is full.</p>\r\n&quot;}}" id="fn1" data-component="container">
    <p>1.&nbsp;The Micron 6550 ION offers a capacity of up to 61.44TB. Comparisons are made with other 61.44TB NVMe SSDs from Samsung, Solidigm and Western Digital.&nbsp;</p>
<p>2.&nbsp;These comparisons use publicly available competitor information from published sources at the time of the 6550 ION launch, with the 6550 ION and Western Digital drive using a maximum power of 20W and Samsung and Solidigm drives using 25W, resulting in up to 20% less maximum power consumption for the 6550 ION.</p>
<p>3.&nbsp;The Micron 6550 ION 61.44TB SSD at 20W provides better performance/watt than competing 61.44TB SSDs at 20W and 25W, resulting in up to 20% power savings. Performance per watt claims are based on publicly available competitor information per footnote 1.</p>
<p>4.&nbsp;Tests conducted by Micron engineering using a maximum power limit of 20W for the Micron 6550 ION and the Solidigm D5-P5336 using 25W maximum for all tests in this section.</p>
<p>5.&nbsp;The Micron 6550 ION SSD complies with most, but not all, requirements of the Open Compute Project (OCP) Datacenter NVMe SSD Specification 2.5. For more information, see the <a href="https://www.opencompute.org/documents/datacenter-nvme-ssd-specification-v2-5-pdf" target="_blank">OCP 2.5 public specification</a>.</p>
<p>6.&nbsp;No hardware, software or system can provide absolute security under all conditions. Micron assumes no liability for lost, stolen or corrupted data arising from the use of any Micron products, including those products that incorporate any of the mentioned security features.</p>
<p>7.&nbsp;Fill time calculation = 100% 128KB sequential writes per specification performance vs. competitive drives, per footnotes 1 and 2, until the drive‚Äôs usable capacity is full.</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[No GPS required: our app can now locate underground trains (831 pts)]]></title>
            <link>https://blog.transitapp.com/go-underground/</link>
            <guid>42122085</guid>
            <pubDate>Wed, 13 Nov 2024 01:46:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.transitapp.com/go-underground/">https://blog.transitapp.com/go-underground/</a>, See on <a href="https://news.ycombinator.com/item?id=42122085">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    
<h6><a href="https://blog.transitapp.com/fr/go-dans-le-metro/">En fran√ßais svp</a></h6>







<p>In the twisting vaults of a subway, metro, or U-Bahn, there‚Äôs often no reliable cell service, wifi, or GPS.&nbsp;</p>



<p>Which means you had no good way of keeping track of your stops or ETA when underground.</p>


<div>
<figure><img decoding="async" width="750" height="300" data-attachment-id="14507" data-permalink="https://blog.transitapp.com/go-underground/blue-dot-lagging-en-v2/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Blue-dot-lagging-EN-v2.gif" data-orig-size="750,300" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Blue-dot-lagging-EN-v2" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Blue-dot-lagging-EN-v2-705x300.gif" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Blue-dot-lagging-EN-v2.gif" src="https://blog.transitapp.com/wp-content/uploads/2024/10/Blue-dot-lagging-EN-v2.gif" alt="GIF: representation of a vehicle location not being updated when there is no GPS"></figure></div>


<p>You had to look out the window for signs on the platform, listen for station announcements, or tilt your neck 90¬∞ to read one of those digital screens. How perfectly quaint!</p>



<p><strong>Here‚Äôs the bad news:</strong> we don‚Äôt have a hundred billion dollars to build ground-penetrating GPS satellites. <strong>The good news:</strong> we have √âtienne, Ayser, Jonathan and Luc!</p>



<p>Thanks to our clever engineering, we can now predict your location in a subway tunnel using your phone‚Äôs vibration signature. Simply:</p>



<p>1. Start a trip with GO</p>



<figure><img decoding="async" width="2000" height="534" data-attachment-id="14752" data-permalink="https://blog.transitapp.com/go-underground/go-flows-en-2/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/GO-flows-EN-1.png" data-orig-size="2000,534" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="GO-flows EN" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/GO-flows-EN-1-705x510.png" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/GO-flows-EN-1.png" src="https://blog.transitapp.com/wp-content/uploads/2024/10/GO-flows-EN-1.png" alt="" srcset="https://blog.transitapp.com/wp-content/uploads/2024/10/GO-flows-EN-1.png 2000w, https://blog.transitapp.com/wp-content/uploads/2024/10/GO-flows-EN-1-768x205.png 768w, https://blog.transitapp.com/wp-content/uploads/2024/10/GO-flows-EN-1-1536x410.png 1536w" sizes="(max-width: 2000px) 100vw, 2000px"><figcaption>You can start a GO trip directly from the line details screen or from a trip you planned</figcaption></figure>



<p>2. Ta-da! We‚Äôll show your predicted location on the map, count down the stations, and update your ETA</p>



<p>Yes. Even without knowing your GPS coordinates.</p>



<figure><img decoding="async" width="1200" height="780" data-attachment-id="14767" data-permalink="https://blog.transitapp.com/go-underground/nycmtl-en-v5/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/NYCMTL-EN-v5.gif" data-orig-size="1200,780" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="NYC+MTL-EN-v5" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/NYCMTL-EN-v5-705x510.gif" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/NYCMTL-EN-v5.gif" src="https://blog.transitapp.com/wp-content/uploads/2024/10/NYCMTL-EN-v5.gif" alt=""></figure>



<p><em>Now, for a peek behind our magic curtain‚Ä¶</em></p>


<div>
<figure><img decoding="async" width="1036" height="748" data-attachment-id="14562" data-permalink="https://blog.transitapp.com/go-underground/separateur2x-2/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/separateur@2x-1.png" data-orig-size="1036,748" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="seÃÅparateur@2x" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/separateur@2x-1-705x510.png" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/separateur@2x-1.png" src="https://blog.transitapp.com/wp-content/uploads/2024/10/separateur@2x-1.png" alt="" srcset="https://blog.transitapp.com/wp-content/uploads/2024/10/separateur@2x-1.png 1036w, https://blog.transitapp.com/wp-content/uploads/2024/10/separateur@2x-1-705x510.png 705w, https://blog.transitapp.com/wp-content/uploads/2024/10/separateur@2x-1-768x555.png 768w" sizes="(max-width: 1036px) 100vw, 1036px"></figure></div>


<h4><strong>Step 1: basic motion classification</strong></h4>



<p>Once you enter a train tunnel with bad GPS, the magic begins. First, we have to figure out where you are between stations. For that, we need to confirm that you‚Äôre on a moving train!</p>



<p>To get our bearings, let‚Äôs look at some accelerometer data from Stephen, the fastest-walking Transit employee, which he recorded on his phone during his commute to our Montreal office:</p>



<figure><img decoding="async" width="2000" height="830" data-attachment-id="14749" data-permalink="https://blog.transitapp.com/go-underground/phone-acceleration-during-a-commute-en/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Phone-acceleration-during-a-commute-EN.png" data-orig-size="2000,830" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Phone acceleration during a commute EN" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Phone-acceleration-during-a-commute-EN-705x510.png" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Phone-acceleration-during-a-commute-EN.png" src="https://blog.transitapp.com/wp-content/uploads/2024/10/Phone-acceleration-during-a-commute-EN.png" alt="" srcset="https://blog.transitapp.com/wp-content/uploads/2024/10/Phone-acceleration-during-a-commute-EN.png 2000w, https://blog.transitapp.com/wp-content/uploads/2024/10/Phone-acceleration-during-a-commute-EN-768x319.png 768w, https://blog.transitapp.com/wp-content/uploads/2024/10/Phone-acceleration-during-a-commute-EN-1536x637.png 1536w" sizes="(max-width: 2000px) 100vw, 2000px"></figure>



<p>Fast but also meticulous, Stephen labeled the different parts of his trip, like:</p>



<ul>
<li>when he started walking</li>



<li>when he descended a set of stairs</li>



<li>when he was waiting on the platform</li>



<li>when the train started moving, when it stopped, etc.<br></li>
</ul>



<p>With inspiration from one of our <a href="https://en.wikipedia.org/wiki/Fourier_transform">favourite French mathematicians</a>, we can clean up Stephen‚Äôs acceleration data and turn it into frequency data, which can start to give us an idea about what‚Äôs happening on a moving train vs. elsewhere.</p>



<figure><img decoding="async" width="2000" height="800" data-attachment-id="14668" data-permalink="https://blog.transitapp.com/go-underground/frequencies-during-a-commute-4/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Frequencies-during-a-commute-5.png" data-orig-size="2000,800" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Frequencies during a commute" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Frequencies-during-a-commute-5-705x510.png" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Frequencies-during-a-commute-5.png" src="https://blog.transitapp.com/wp-content/uploads/2024/10/Frequencies-during-a-commute-5.png" alt="Spectrogram showing frequencies in hertz (Hz) during a trip in the subway, with the vertical axis indicating frequencies (0 to 12 Hz) and the horizontal axis showing the elapsed time in seconds. Colors vary to represent the intensity of frequencies at different moments.&quot;" srcset="https://blog.transitapp.com/wp-content/uploads/2024/10/Frequencies-during-a-commute-5.png 2000w, https://blog.transitapp.com/wp-content/uploads/2024/10/Frequencies-during-a-commute-5-768x307.png 768w, https://blog.transitapp.com/wp-content/uploads/2024/10/Frequencies-during-a-commute-5-1536x614.png 1536w" sizes="(max-width: 2000px) 100vw, 2000px"></figure>



<p>There‚Äôs a few clues. For one, when Stephen‚Äôs train is moving his phone vibrates at ~5 Hz, versus ~2 Hz when he‚Äôs walking. But the pattern isn‚Äôt clear-cut, with lots of random noise and harmonic frequencies (those fainter pink lines cascading above the more vivid red ones) muddying up the picture.</p>



<p>To definitively say ‚Äúthis is a moving train‚Äù vs. ‚Äúthis is not‚Äù we need to train a machine to classify motion types ‚Äî a task which requires A LOT of training data.</p>



<hr>



<h4><strong>Step 2: gathering ground truth</strong></h4>



<p>We asked Stephen and his valiant colleagues to repeat the exercise: but now labeling data for hundreds of trips across dozens of cities, so that we could build a generalized model to say ‚Äúyes! moving train!‚Äù regardless of the type of train or tracks being used.</p>



<p>Our trusty emissaries √âtienne and Elijah were sent down from Montreal to collect vibration data on our app‚Äôs most popular underground system: the <a href="https://transitapp.com/en/region/nyc">New York City</a> subway.</p>


<div>
<figure><img decoding="async" width="2000" height="1860" data-attachment-id="14446" data-permalink="https://blog.transitapp.com/go-underground/photo-elijahetienne-2/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-ElijahEtienne-1.png" data-orig-size="2000,1860" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="photo-Elijah+Etienne" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-ElijahEtienne-1-705x510.png" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-ElijahEtienne-1.png" src="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-ElijahEtienne-1.png" alt=" √âtienne and Elijah taking the bus and subway in NYC" srcset="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-ElijahEtienne-1.png 2000w, https://blog.transitapp.com/wp-content/uploads/2024/10/photo-ElijahEtienne-1-768x714.png 768w, https://blog.transitapp.com/wp-content/uploads/2024/10/photo-ElijahEtienne-1-1536x1428.png 1536w" sizes="(max-width: 2000px) 100vw, 2000px"><figcaption><em> √âtienne and Elijah on a hunt for truth. (The under-ground truth‚Ñ¢)</em></figcaption></figure></div>


<p>Armed with iPhones, Androids, and MetroCards, they spent a week riding the MTA‚Äôs buses and trains, labeling each step of every trip:</p>


<div>
<figure><img decoding="async" width="2000" height="1994" data-attachment-id="14448" data-permalink="https://blog.transitapp.com/go-underground/photo-phones-2/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-phones-2.png" data-orig-size="2000,1994" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="photo-phones" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-phones-2-705x510.png" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-phones-2.png" src="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-phones-2.png" alt="Phone used during the &quot;Ground Truth&quot; quest with app tool to provide info" srcset="https://blog.transitapp.com/wp-content/uploads/2024/10/photo-phones-2.png 2000w, https://blog.transitapp.com/wp-content/uploads/2024/10/photo-phones-2-768x766.png 768w, https://blog.transitapp.com/wp-content/uploads/2024/10/photo-phones-2-1536x1531.png 1536w, https://blog.transitapp.com/wp-content/uploads/2024/10/photo-phones-2-350x350.png 350w" sizes="(max-width: 2000px) 100vw, 2000px"></figure></div>


<p>We‚Äôd rely on their data for clues to distinguish between on-a-train vibrations vs. other vibrations in a train station.</p>



<p>Which meant Elijah and √âtienne had to ride the escalators and elevators up and down for hours at a time, vigilantly annotating each time they stopped to catch their breath.</p>



<p>They eventually rode every subway line in New York, from the Bronx to Brighton Beach, across the Queensboro, Manhattan, and Williamsburg Bridges (where there is cell service) back through the rickety Canarsie Tunnel (where there is not).</p>



<hr>



<h4><strong>Step 3: training our motion classifier</strong></h4>



<p>After cleaning and processing our data, we could begin training our motion classifier to distinguish ‚Äúmoving train!‚Äù from ‚Äúnot moving train!‚Äù.</p>



<p>We start by feeding the model our unlabelled sensor data and ask it to randomly guess whether the phone is on a moving train, a stopped train, walking, going up an escalator, et cetera. We verify these guesses against our manual annotations (the ‚Äúground truth‚Äù) and add logic to guide our model to more accurate predictions.</p>



<p>After a great deal of tinkering, our model can now confidently predict if someone is on a moving train ‚Äì or if their phone is just vibin‚Äô.</p>



<figure><img decoding="async" width="2000" height="640" data-attachment-id="14656" data-permalink="https://blog.transitapp.com/go-underground/predicting-motion-state-from-frequencies-clean-3/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Predicting-motion-state-from-frequencies-Clean-2.png" data-orig-size="2000,640" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Predicting motion state from frequencies Clean" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Predicting-motion-state-from-frequencies-Clean-2-705x510.png" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Predicting-motion-state-from-frequencies-Clean-2.png" src="https://blog.transitapp.com/wp-content/uploads/2024/10/Predicting-motion-state-from-frequencies-Clean-2.png" alt="" srcset="https://blog.transitapp.com/wp-content/uploads/2024/10/Predicting-motion-state-from-frequencies-Clean-2.png 2000w, https://blog.transitapp.com/wp-content/uploads/2024/10/Predicting-motion-state-from-frequencies-Clean-2-768x246.png 768w, https://blog.transitapp.com/wp-content/uploads/2024/10/Predicting-motion-state-from-frequencies-Clean-2-1536x492.png 1536w" sizes="(max-width: 2000px) 100vw, 2000px"></figure>



<p>Now that we know when a rider is moving underground, the next step is to make that information useful: <strong>where, precisely, is their train?</strong></p>



<hr>



<h4><strong>Step 4: making a location prediction</strong></h4>



<p>It was time to add one last model to the mix, aptly named <strong><em>The Mixer.</em></strong></p>



<p>We trained this model to weigh‚Ä¶</p>



<ol>
<li>the motion type prediction<strong> </strong>(aka ‚Äúis this a moving train?‚Äù)&nbsp;</li>



<li>the last-known location of the user</li>



<li>whether the last-known location came recently or a long time ago</li>



<li>the train schedule</li>
</ol>



<p>‚Ä¶to predict the user‚Äôs <strong><em>current</em></strong> <strong>location</strong>.</p>



<p>It now makes the right location prediction 90% of the time.</p>



<figure><img decoding="async" width="2000" height="1150" data-attachment-id="14671" data-permalink="https://blog.transitapp.com/go-underground/location-updates-during-a-train-ride-2/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Location-updates-during-a-train-ride-1.png" data-orig-size="2000,1150" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Location updates during a train ride" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Location-updates-during-a-train-ride-1-705x510.png" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/Location-updates-during-a-train-ride-1.png" src="https://blog.transitapp.com/wp-content/uploads/2024/10/Location-updates-during-a-train-ride-1.png" alt="" srcset="https://blog.transitapp.com/wp-content/uploads/2024/10/Location-updates-during-a-train-ride-1.png 2000w, https://blog.transitapp.com/wp-content/uploads/2024/10/Location-updates-during-a-train-ride-1-768x442.png 768w, https://blog.transitapp.com/wp-content/uploads/2024/10/Location-updates-during-a-train-ride-1-1536x883.png 1536w" sizes="(max-width: 2000px) 100vw, 2000px"><figcaption><em>A list of cellular pings during an RER trip in Paris ‚Äî you can see the underground part of this west-to-east ride (on the left) gets a few sporadic location updates via GPS and Bluetooth/wifi scanning. With these location updates, we can calibrate our underground location predictions in the areas without coverage. When the user pops above ground to areas with cell service (on the right)? We go back to using standard GPS locations.</em></figcaption></figure>



<p>This is the holy grail of underground detection:<strong> since you can predict where a rider is, you can show them where they are on a map, update their ETA, and tell them when to get off at the right station.</strong></p>



<p>It‚Äôs a step up from the status quo method of detecting your location underground. No more relying on spotty GPS ‚Äî or bobbing and weaving between incomprehensibly tall humans to read those digital screens!</p>



<figure><img decoding="async" width="1000" height="750" data-attachment-id="14777" data-permalink="https://blog.transitapp.com/go-underground/nyc-mixer-en-v7/" data-orig-file="https://blog.transitapp.com/wp-content/uploads/2024/10/NYC-mixer-EN-v7.gif" data-orig-size="1000,750" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="NYC-mixer-EN-v7" data-image-description="" data-image-caption="" data-medium-file="https://blog.transitapp.com/wp-content/uploads/2024/10/NYC-mixer-EN-v7-705x510.gif" data-large-file="https://blog.transitapp.com/wp-content/uploads/2024/10/NYC-mixer-EN-v7.gif" src="https://blog.transitapp.com/wp-content/uploads/2024/10/NYC-mixer-EN-v7.gif" alt=""></figure>



<p><strong>What‚Äôs even more wonderful? Our station counting works completely offline. </strong>Both of our models (the motion classifier, and the mixer) have been compressed into tiny files that run on your phone, without sending any data to Transit‚Äôs servers.</p>



<p>No tracking. No cookies. Your vibration data is your own damn business!</p>



<hr>



<h4><strong>Want to try out our underground detection for yourself?</strong></h4>



<p>Easy: just find yourself an underground train, open Transit, start a trip with GO, and watch the stations tick down, one-by-one! We‚Äôve helped riders detect 1.5 million underground stations and ~400,000 trips during our initial tests.</p>



<p>GO‚Äôs step-by-step navigation was already being used by millions of aboveground riders in<a href="https://transitapp.com/en/region"> 600+ cities</a> ‚Äî including folks propelled by bikes, since our launch of <a href="https://blog.transitapp.com/go-bike/">GO Bike</a> last month.</p>



<p>Now, their subterranean train-riding counterparts can rely on it more confidently in areas with bad service, so Transit can be their guiding light from end-to-end in every tunnel.</p>







<p><a href="https://transitapp.com/download.html?utm_source=blog_transit&amp;utm_medium=referral&amp;utm_campaign=button_blog_article">Try it in the app</a></p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[From BSP to ESP ‚Äì How S3ctor Abused Quake Editors to Redefine the Morrowind Mod (111 pts)]]></title>
            <link>https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/</link>
            <guid>42121957</guid>
            <pubDate>Wed, 13 Nov 2024 01:23:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/">https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/</a>, See on <a href="https://news.ycombinator.com/item?id=42121957">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p>From BSP To ESP ‚Äì How S3ctor Abused Quake Editors to Redefine the Morrowind Modding Experience          <span>2024-11-08 - jvoisin</span>
        </p>
        
<p><a href="https://gitlab.com/magicaldave1">S3ctor</a> is a core developer of OpenMW, and has, like most of us to be fair, odd interests. This is the incredible story how he mixed two immensely cool things: Quake, and Morrowind, narrated by our hero himself!</p>



<p>Possibly the first thing anybody who has met me in person will say about me is that I am obsessed with game engines ‚Äì and while OpenMW is my baby, my first love was <a href="https://en.wikipedia.org/wiki/Id_Tech">idTech</a>. At eight years old, I picked up a steel-book copy of Doom 3. Surprisingly, I ended up spending more time with the extras than the game itself. The developer documentary and Carmack‚Äôs E3 talk about the render pipeline and engine design captivated me completely. I have distinct memories of my young self barely understanding <a href="https://en.wikipedia.org/wiki/Shadow_volume#Depth_fail">Carmack‚Äôs Reverse.</a> I tried to explain it to other kids, to absolutely no reaction. Nobody else really understood, but it was the coolest thing in the world to me. All of this is to say that I have been interested in this technology since before I could read.</p>



<p>What we‚Äôre going to explore today is the history and process through which I developed a brand-new workflow for the OpenMW engine that allows modders to utilize arguably the most powerful component of old idTech ‚Äì the brush-based level editor.</p>



<p>In order to fully grasp what we‚Äôre about to discuss, you‚Äôll need some background on both early idTech and OpenMW/Morrowind. First things first: many modern game engines use a <em>mesh</em>-based workflow. This is somewhat like building a house. The artists are carpenters, creating individual pieces (3D models) independently. Then, level designers ‚Äì the general contractors in this analogy ‚Äì take these pieces into the engine‚Äôs toolbox and construct the game world around them.</p>



<p>In the modern era, studios have mastered the mesh-based workflow, building their entire operations around it. However, no individual can match the output of a full studio. Take <a href="https://www.blender.org/">Blender</a>, for instance. It‚Äôs an incredible tool, but its complexity matches its capabilities. Learning Blender, or any game engine for that matter, is no small feat.</p>



<p>The mesh-based workflow is intentionally designed to separate level designers and artists. While this isn‚Äôt necessarily bad, it does add a layer of complexity that brush-based games simply don‚Äôt have. Blender won‚Äôt light a scene the same way your engine will, nor will it handle post-processing, interactivity, or your game‚Äôs unique features. It‚Äôs an amazingly flexible tool ‚Äì but it‚Äôs not tailor made for the experience your game is meant to provide. Nor are <a href="https://en.wikipedia.org/wiki/Autodesk_3ds_Max">Max</a>, <a href="https://en.wikipedia.org/wiki/Autodesk_Maya">Maya</a>, <a href="https://crocotile3d.com/">Crocotile</a>, or whatever your preferred modeling tool is.</p>



<p>In contrast, brush-based workflows blur these lines. Here, the level designer wears multiple hats, acting as both a formal designer and a modeler. This approach, inherited by Half-Life through its modified Quake engine, persists in Valve‚Äôs design philosophy even today, driving their continued innovation and industry-redefining success.</p>



<p>This was a very difficult concept for me to come to grips with, having always modded and developed OpenMW ‚Äì it didn‚Äôt even <em>occur</em> to me that it was possible to go outside the mesh-based workflow. So let us now demonstrate the difference.</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image.png"><img fetchpriority="high" decoding="async" width="1024" height="647" data-attachment-id="6640" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-4/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image.png" data-orig-size="1488,940" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-300x190.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-1024x647.png" src="https://openmw.org/wp-content/uploads/2024/11/image-1024x647.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-1024x647.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-300x190.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-768x485.png 768w, https://openmw.org/wp-content/uploads/2024/11/image.png 1488w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure></div>


<p>Here‚Äôs an image of a house in OpenCS, OpenMW‚Äôs native game development tool. You can see the frame of the room is made up of four static pieces which I‚Äôve been glued together. This type of prefabbing makes it impossible to add little details or variations into the structure of an existing asset, you need to change the one, or make a new one. Let‚Äôs now attempt to reproduce this in my favorite Quake editor ‚Äì <a href="https://trenchbroom.github.io/">Trenchbroom</a>!</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-1.png"><img decoding="async" width="907" height="893" data-attachment-id="6641" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-5/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-1.png" data-orig-size="907,893" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-1-300x295.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-1.png" src="https://openmw.org/wp-content/uploads/2024/11/image-1.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-1.png 907w, https://openmw.org/wp-content/uploads/2024/11/image-1-300x295.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-1-768x756.png 768w" sizes="(max-width: 907px) 100vw, 907px"></a></figure></div>


<p>In just a couple of moments, we‚Äôve got the frame for a brand-new one. Here, there are six ‚Äúbrushes‚Äù ‚Äì I really dislike this term as it can be extremely confusing. Brushes are simply individual polyhedron ‚Äì cubes, pyramids, anything that could be expressed as a single convex shape is considered a brush. Notice I mentioned <code>convex</code> explicitly ‚Äì this is a key detail, as the mathematics behind brush-based workflows necessitate that all shaped be convex. More on this later.</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-2.png"><img decoding="async" width="1024" height="476" data-attachment-id="6642" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-6/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-2.png" data-orig-size="1916,890" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-2-300x139.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-2-1024x476.png" src="https://openmw.org/wp-content/uploads/2024/11/image-2-1024x476.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-2-1024x476.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-2-300x139.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-2-768x357.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-2-1536x713.png 1536w, https://openmw.org/wp-content/uploads/2024/11/image-2.png 1916w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure></div>


<p>And here‚Äôs an entire room! It‚Äôs not a very good one, though, so let‚Äôs make a variant with a door.</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-3.png"><img loading="lazy" decoding="async" width="556" height="859" data-attachment-id="6643" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-7/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-3.png" data-orig-size="556,859" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-3-194x300.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-3.png" src="https://openmw.org/wp-content/uploads/2024/11/image-3.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-3.png 556w, https://openmw.org/wp-content/uploads/2024/11/image-3-194x300.png 194w" sizes="auto, (max-width: 556px) 100vw, 556px"></a></figure></div>


<p>Now let‚Äôs iterate a bit, bring the wall trim out some, change a few textures here and there‚Ä¶</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-4.png"><img loading="lazy" decoding="async" width="1024" height="188" data-attachment-id="6644" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-8/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-4.png" data-orig-size="1918,353" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-4-300x55.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-4-1024x188.png" src="https://openmw.org/wp-content/uploads/2024/11/image-4-1024x188.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-4-1024x188.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-4-300x55.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-4-768x141.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-4-1536x283.png 1536w, https://openmw.org/wp-content/uploads/2024/11/image-4.png 1918w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure></div>


<p>We‚Äôve now got three brand new template sets of our own to work with. Just like in real life construction, we can expand and tweak these as we build each unique house or area. No two homes need to be identical ‚Äì we‚Äôve got the freedom to customize! While these assets were whipped up quickly for this article, there‚Äôs plenty of room for improvements and personal touches. The key takeaway here is the accessibility and rapid iteration of our tooling. We‚Äôve streamlined the level design process by eliminating the need for separate 3D modeling tools. Naturally, you won‚Äôt be animating here, but you‚Äôre not meant to ‚Äì Quake editors are level editors, not entire replacements for modeling software.</p>



<p>But wait, now I‚Äôm back to talking about idTech stuff again ‚Äì this is supposed to be about Morrowind, isn‚Äôt it? Well, I‚Äôve been modding OpenMW for a couple of years and in that time used the engine itself as a springboard to get further into game development, netcode, and C++ in general! In that time I‚Äôve made a decent few friends whom I‚Äôm proud to call that. <a href="https://github.com/EpochWon)">Epoch</a> was the first person who‚Äôd turned me onto the concept of Trenchbroom in general ‚Äì we‚Äôd discussed it offhandedly a few times while probing for features we could implement into OpenMW‚Äôs rendering pipeline.</p>



<p>Later, at some point, a mutual acquaintance of ours challenged me to a match of Fortnite. <em>Insulted</em>, I did what any old-school gamer like myself would do: I rolled a Quake 3 server at <a href="https://s3kshun8.games/">https://s3kshun8.games</a> and challenged him to a match instead. As it turns out, our mutual friend was <em>also</em> a fan of Quake and within minutes was mopping the floor with me. But, nevertheless, Epoch and I continued diving into the depths of modding idTech to see what we could come up with.</p>



<p>Our first idea was to port Morrowind assets into Quake. Everything goes downhill from here. First came Stroggvarine:</p>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-5.png"><img loading="lazy" decoding="async" width="1024" height="576" data-attachment-id="6646" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-9/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-5.png" data-orig-size="1488,837" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-5-300x169.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-5-1024x576.png" src="https://openmw.org/wp-content/uploads/2024/11/image-5-1024x576.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-5-1024x576.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-5-300x169.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-5-768x432.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-5.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Then Crassius Curio.</p>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-6.png"><img loading="lazy" decoding="async" width="1024" height="576" data-attachment-id="6647" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-10/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-6.png" data-orig-size="1488,837" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-6-300x169.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-6-1024x576.png" src="https://openmw.org/wp-content/uploads/2024/11/image-6-1024x576.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-6-1024x576.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-6-300x169.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-6-768x432.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-6.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Then Epoch had an even worse idea: </p>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-7.png"><img loading="lazy" decoding="async" width="1024" height="576" data-attachment-id="6648" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-11/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-7.png" data-orig-size="1488,837" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-7-300x169.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-7-1024x576.png" src="https://openmw.org/wp-content/uploads/2024/11/image-7-1024x576.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-7-1024x576.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-7-300x169.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-7-768x432.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-7.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Okay, so, now we‚Äôve got characters in, what about <em>structures</em>? How could we recreate Balmora, Vivec, or Sadrith Mora in Quake 3? (Tell me you wouldn‚Äôt play FFA in Sadrith Mora, I dare you) There <em>seemed</em> to be a solution to this according to some old research I dug up from <a href="http://katsbits.com/">katsbits.com</a>. I found their discord and joined, looking to figure out how to integrate 3d models into a Quake 3 map using patches. I got all the details, but, it just seemed like too much work at the time and the process was so‚Ä¶ raw, and based on old tools ‚Äì I never did give it much of a chance to get fleshed out.</p>



<p>Because along the way, I had another, much better idea. I‚Äôd started playing with Quake editors like <a href="https://valvedev.info/tools/jack/">JACK</a> and <a href="https://github.com/Garux/netradiant-custom">NetRadiant-Custom</a>, trying to learn how the level design flow worked ‚Äì and I immediately fell in love. Having tried and failed (not particularly seriously) to use Blender many times, having a way to make my own assets felt as though I‚Äôd unlocked the missing piece to being able to ship an entire game on my own. I wondered, idly, if we could apply this to Morrowind somehow. And then I noticed an <code>export to .obj file</code> button in Trenchbroom. The tool itself did this, to some degree, so I <em>knew</em> it had to be possible, beyond all shadow of a doubt ‚Äì it <em>was</em> doable. So I sidled on over to the Trenchbroom GitHub and <a href="https://github.com/TrenchBroom/TrenchBroom/issues/4448">opened a discussion</a> about it.</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-8.png"><img loading="lazy" decoding="async" width="657" height="369" data-attachment-id="6649" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-12/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-8.png" data-orig-size="657,369" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-8-300x168.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-8.png" src="https://openmw.org/wp-content/uploads/2024/11/image-8.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-8.png 657w, https://openmw.org/wp-content/uploads/2024/11/image-8-300x168.png 300w" sizes="auto, (max-width: 657px) 100vw, 657px"></a><figcaption>The very first attempt at loading a Quake map in OpenMW.</figcaption></figure></div>


<p>What you see above is the first attempt at getting a Quake map into Morrowind. We exported a map out of Trenchbroom, imported the OBJ into blender, and re-exported the NIF. Textures got lost and the scale is all wrong ‚Äì it‚Äôs actually a lot smaller here than it should‚Äôve been. At the time, we had no idea what the scaling ratio would be between Morrowind and Quake 1. As it turns out, this was really simple ‚Äì there‚Äôs no fancy asset-level scaling happening in either engine with regard to assets. The only scaling difference between the two engines is that a Quake 1 player is almost exactly half the height in units of the default male Dunmer in Morrowind.</p>



<p>You might be curious about how we figured that out. Well, Quake editors define the player as some or another kind of game object, whose bounding box is displayed in the editor. Like this:</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-9.png"><img loading="lazy" decoding="async" width="159" height="280" data-attachment-id="6650" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-13/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-9.png" data-orig-size="159,280" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-9.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-9.png" src="https://openmw.org/wp-content/uploads/2024/11/image-9.png" alt=""></a></figure></div>


<p>The player themselves is represented in Morrowind.fgd file like this:</p>



<p><code>@baseclass size(-16 -16 -34, 16 16 33) color(0 255 0) = PlayerClass []</code></p>



<p>The same line exists in Quake.fgd, there the player is 56 units tall:</p>



<p><br><code>@baseclass base(Appearflags) size(-16 -16 -24, 16 16 32) color(0 255 0) = PlayerClass []</code></p>



<p>All we actually had to do was launch OpenMW and check the player‚Äôs bounding box like so:</p>



<p><br><code>self:getBoundingBox().halfSize.z</code> </p>



<p>and there we go. We prefer building at smaller scale, so, we just based the Morrowind.fgd off the halfsize instead of the player‚Äôs true height and build at half scale by convention. It‚Äôs just easier.</p>



<p>Having figured the basics out, the <em>real</em> work could now begin. What we needed at this point, was a compiler ‚Äì except instead of compiling a <em>BSP</em>, we‚Äôd be compiling an <em>ESP</em>. But it‚Äôs the same concept Quake uses ‚Äì in-development, maps are passed around as text-based source files, and then a compiler converts them into actual 3D geometry, gameobjects, et cetera.</p>



<p>Inside of a <code>.map</code> file, brushes are stored as a set of planes with some data about their extents and mapped textures.</p>



<p>For reference, here‚Äôs a simple cube ‚Äì the default map Trenchbroom creates along with each new document:</p>



<pre><code>// brush 0
{
( -64 -64 -16 ) ( -64 -63 -16 ) ( -64 -64 -15 ) __TB_empty [ 0 -1 0 0 ] [ 0 0 -1 0 ] 0 0.25 0.25
( -64 -64 -16 ) ( -64 -64 -15 ) ( -63 -64 -16 ) __TB_empty [ 1 0 0 0 ] [ 0 0 -1 0 ] 0 0.25 0.25
( -64 -64 -16 ) ( -63 -64 -16 ) ( -64 -63 -16 ) __TB_empty [ -1 0 0 0 ] [ 0 -1 0 0 ] 0 0.25 0.25
( 64 64 16 ) ( 64 65 16 ) ( 65 64 16 ) __TB_empty [ 1 0 0 0 ] [ 0 -1 0 0 ] 0 0.25 0.25
( 64 64 16 ) ( 65 64 16 ) ( 64 64 17 ) __TB_empty [ -1 0 0 0 ] [ 0 0 -1 0 ] 0 0.25 0.25
( 64 64 16 ) ( 64 64 17 ) ( 64 65 16 ) __TB_empty [ 0 1 0 0 ] [ 0 0 -1 0 ] 0 0.25 0.25
}</code></pre>



<p>By convention, they‚Äôre numbered, but this is not a crucial aspect of the format. The important bit is that this is a representation of each face of the cube, stored as three (three-dimensional) points. These three points define a plane which is a half-space ‚Äì an infinite set of points bounded by a plane. It sounds complicated, and the mathematics are, but essentially ‚Äì you‚Äôre looking at each side of a cube here.</p>



<p>BSP compilers then use a range of techniques to extrapolate vertices from these half-spaces, such as computing them directly, or the original Quake compiler‚Äôs approach of using a large cube to determine points of intersection. For more of the mathematical details, you can read up <a href="https://quakewiki.org/wiki/Quake_Map_Format">here</a>. Originally I attempted to reproduce this approach on my own with little success ‚Äì I tried many variations on the formula, and eventually hit one that seemed to work, but actually, was only valid on perfect cubes. It did work on every possible cube, though. But only cubes.</p>



<p>Defeated, I researched further and learned about <a href="https://github.com/QodotPlugin/Qodot">Qodot</a>. I wasn‚Äôt the first person to have this idea. Now known as <a href="https://github.com/func-godot">func_godot</a>, a project already existed which used Trenchbroom in another unintended engine. Digging around in their repositories didn‚Äôt net me much, until I stumbled into <a href="https://github.com/QodotPlugin/shambler/">this</a> little ditty. Apparently, the original developer of Qodot suddenly got <em>very</em> into Rust one day and rewrote all of the necessary tooling in Rust and then vanished. The team was very cagey about discussing this particular developer, and they seemed to have been gone for a while, and I couldn‚Äôt reach them for months. It happened to be <em>precisely</em> what I needed in ways I didn‚Äôt even think of originally, and seemingly was all mine to whatever I pleased with.</p>



<p>Now we‚Äôre really going to get into technical details, so please bear with me ‚Äì I‚Äôll take you through it as best as I can, and I pinky-promise this won‚Äôt be half as bad as you think it‚Äôll be! Once you‚Äôve built a map, the final step is to compile it and get it in-game. So how does the compilation process work for OpenMW? Let‚Äôs crack open the <a href="https://github.com/magicaldave/Morrobroom">Morrobroom</a> source code and take a high-level overview of what it‚Äôs doing.</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-10.png"><img loading="lazy" decoding="async" width="1024" height="388" data-attachment-id="6651" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-14/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-10.png" data-orig-size="1367,518" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-10-300x114.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-10-1024x388.png" src="https://openmw.org/wp-content/uploads/2024/11/image-10-1024x388.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-10-1024x388.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-10-300x114.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-10-768x291.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-10.png 1367w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure></div>


<p>It all starts‚Ä¶ with startup arguments. Not a lot to see here ‚Äì you give it a path to a <code>.map</code> file, the ESP it‚Äôs supposed to save to, and an optional scale argument to increase or decrease the overall asset size. This is handy for making maps for both Morrowind and Quake (yes, really).</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-11.png"><img loading="lazy" decoding="async" width="1024" height="438" data-attachment-id="6652" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-15/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-11.png" data-orig-size="1079,461" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-11-300x128.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-11-1024x438.png" src="https://openmw.org/wp-content/uploads/2024/11/image-11-1024x438.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-11-1024x438.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-11-300x128.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-11-768x328.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-11.png 1079w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure></div>


<p><br>Some key points here ‚Äì <code>MapData</code> is a class which does the necessary Shambler calls in order to get all of the texture and geometry data out of <a href="https://quake.fandom.com/wiki/Shambler_(Q1)">Shambler</a> and into a struct we can work with later. This includes the texture info, entity data, vertices, vertex normals, et cetera. We then loop over all <em>brush</em> entities inside of the map and generate a <code>Mesh</code> from them. The Mesh struct is halfway between a custom representation and an actual NIF file ‚Äì there‚Äôs just a little bit of extra info there to make the compiler work properly. This segment is also responsible for making sure that game objects do not have duplicate definitions inside of the final ESP file.</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-12.png"><img loading="lazy" decoding="async" width="600" height="333" data-attachment-id="6653" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-16/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-12.png" data-orig-size="600,333" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-12-300x167.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-12.png" src="https://openmw.org/wp-content/uploads/2024/11/image-12.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-12.png 600w, https://openmw.org/wp-content/uploads/2024/11/image-12-300x167.png 300w" sizes="auto, (max-width: 600px) 100vw, 600px"></a></figure></div>


<p>We then get the reference‚Äôs object ID and if assigned, the model override which they‚Äôve been given. Trenchbroom doesn‚Äôt support OpenMW‚Äôs primary model format, NIF, so the best we can do is just tell it to use a different asset instead of the one the mapper put together. I‚Äôll omit the next part, but, we simply do a big match against the name of the type of the brush entity, and use that to decide if it should become a light, or an NPC, or a door, et cetera.</p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-13.png"><img loading="lazy" decoding="async" width="776" height="437" data-attachment-id="6654" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-17/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-13.png" data-orig-size="776,437" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-13-300x169.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-13.png" src="https://openmw.org/wp-content/uploads/2024/11/image-13.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-13.png 776w, https://openmw.org/wp-content/uploads/2024/11/image-13-300x169.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-13-768x432.png 768w" sizes="auto, (max-width: 776px) 100vw, 776px"></a></figure></div>


<p><br>Finally we get the center point of each brush asset and use that position as the reference position in-engine. This means they‚Äôll be placed in the same spot in-game as they were in Trenchbroom. Buried underneath all this are also advanced model editing options, such as configuring alpha testing vertex colors, and whether or not collisions are used. More features are consistently being added over time as we improve the compiler and find new things to add!</p>



<p>That was a highly simplified overview, but, that‚Äôs the entire main loop for the OpenMW compiler. There is a lot more code which was not showed or explained for brevity ‚Äì please do review the Morrobroom GitHub or simply reach out if you have any questions about it! So, now, all compiler‚Äôd up and nowhere to go‚Ä¶ What do I do from here?</p>



<p>Well, naturally, you try to port Quake whole-hog into Morrowind at this point. What else <em>would</em> you do as a responsible Morrowind-modding Rustacean who really needs a job and plays too much Quake? Now, this gets into dicey legal territory. I refuse to publish the compiled assets myself, because this is an area that‚Äôs way too ambiguous for me to mess with. However, it‚Äôs worth mentioning that the Quake community tosses around the entire texture set for the game all over the place, and way back when, John Romero released the map sources <em>claiming</em> that he made them GPL, but that claim has been disputed. Now, John Romero can get away with just saying he made the maps GPL and nobody‚Äôs gonna go argue with <em>him</em> about that, but I don‚Äôt have that luxury.</p>



<p>Instead, I will just share some screenshots and mention that both the necessary textures and .map sources are easy to get, if you‚Äôd like to reproduce this for yourself:</p>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-14.png"><img loading="lazy" decoding="async" width="1024" height="576" data-attachment-id="6655" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-18/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-14.png" data-orig-size="1488,837" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-14-300x169.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-14-1024x576.png" src="https://openmw.org/wp-content/uploads/2024/11/image-14-1024x576.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-14-1024x576.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-14-300x169.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-14-768x432.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-14.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Is it cursed? Yes. Is it my crowning achievement as a technologist? Probably also yes. So far. We still have even further to go. You might notice the maps are empty. We don‚Äôt support quake entities yet, and we dropped porting official Quake because of above licensing issues I wasn‚Äôt able to get solid answers on. Enter <a href="https://librequake.queer.sh/">LibreQuake</a> ‚Äì much like FreeDoom, LibreQuake is an open-source reimplementation of the game code and assets that made up Quake. It‚Äôs not the exact same thing, but it‚Äôs intended to be visually and technically compatible with any Quake engine or mod.</p>



<p>And thus began the port. First came the shotgun:<br></p>


<div>
<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-15.png"><img loading="lazy" decoding="async" width="1024" height="576" data-attachment-id="6656" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-19/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-15.png" data-orig-size="1136,639" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-15-300x169.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-15-1024x576.png" src="https://openmw.org/wp-content/uploads/2024/11/image-15-1024x576.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-15-1024x576.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-15-300x169.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-15-768x432.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-15.png 1136w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure></div>


<p>This is the first screenshot I took with it, but it worked! Later versions have much better bullet spread and are actually capable of killing targets which they hit. They even use real objects, although it‚Äôd be much more efficient if we simply used raycasts to do hit scanning instead of these slow-moving projectiles.</p>



<p>We‚Äôre almost done, actually. Research is ongoing into porting creatures. Fortunately, LibreQuake has the source <code>.blend</code> files in its repository, so this won‚Äôt be too awful to figure out‚Ä¶ eventually. However, I‚Äôd like to demonstrate Epoch‚Äôs technique he developed for reproducing the Quake skybox! You might‚Äôve noticed in previous images the sky looks really odd.</p>



<p>This is because The Quake sky was implemented at a time before transparency in textures was a common technique ‚Äì the sky there is actually one texture, folded on top of itself, with the black pixels masked out, and then the result scrolls across any brush which uses the sky texture. Epoch‚Äôs postprocess shader is able to replicate this effect, mostly, by essentially utilizing a greenscreen. We place green sky brushes as usual, and then:<br></p>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-16.png"><img loading="lazy" decoding="async" width="1024" height="576" data-attachment-id="6657" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-20/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-16.png" data-orig-size="1488,837" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-16-300x169.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-16-1024x576.png" src="https://openmw.org/wp-content/uploads/2024/11/image-16-1024x576.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-16-1024x576.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-16-300x169.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-16-768x432.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-16.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>It has all the problems of a typical greenscreen though:<br></p>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-17.png"><img loading="lazy" decoding="async" width="1024" height="538" data-attachment-id="6658" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-21/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-17.png" data-orig-size="1920,1008" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-17-300x158.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-17-1024x538.png" src="https://openmw.org/wp-content/uploads/2024/11/image-17-1024x538.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-17-1024x538.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-17-300x158.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-17-768x403.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-17-1536x806.png 1536w, https://openmw.org/wp-content/uploads/2024/11/image-17.png 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Later, we‚Äôll be able to implement a much nicer version of this technique by using Morrobroom to apply animations directly to these assets and <em>maybe</em> use alpha testing to similarly mask out the black pixels. The great thing about it is‚Ä¶ We don‚Äôt even know yet!</p>



<p>So what‚Äôs the value add in all this? Well, we‚Äôre able to iterate much faster on level design and create more unique assets than almost anybody else using this engine. They‚Äôre not necessarily as high fidelity, but they‚Äôre much more satisfying to work with and really allow to execute one‚Äôs artistic vision. Our results speak for themselves: !</p>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-18.png"><img loading="lazy" decoding="async" width="1024" height="676" data-attachment-id="6659" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-22/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-18.png" data-orig-size="1488,983" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-18-300x198.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-18-1024x676.png" src="https://openmw.org/wp-content/uploads/2024/11/image-18-1024x676.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-18-1024x676.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-18-300x198.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-18-768x507.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-18.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-19.png"><img loading="lazy" decoding="async" width="1024" height="551" data-attachment-id="6660" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-23/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-19.png" data-orig-size="1488,800" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-19-300x161.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-19-1024x551.png" src="https://openmw.org/wp-content/uploads/2024/11/image-19-1024x551.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-19-1024x551.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-19-300x161.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-19-768x413.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-19.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-20.png"><img loading="lazy" decoding="async" width="1024" height="551" data-attachment-id="6661" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-24/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-20.png" data-orig-size="1488,800" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-20-300x161.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-20-1024x551.png" src="https://openmw.org/wp-content/uploads/2024/11/image-20-1024x551.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-20-1024x551.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-20-300x161.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-20-768x413.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-20.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-22.png"><img loading="lazy" decoding="async" width="1024" height="551" data-attachment-id="6663" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-26/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-22.png" data-orig-size="1488,800" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-22-300x161.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-22-1024x551.png" src="https://openmw.org/wp-content/uploads/2024/11/image-22-1024x551.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-22-1024x551.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-22-300x161.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-22-768x413.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-22.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<figure><a href="https://openmw.org/wp-content/uploads/2024/11/image-23.png"><img loading="lazy" decoding="async" width="1024" height="651" data-attachment-id="6664" data-permalink="https://openmw.org/2024/from-bsp-to-esp-how-s3ctor-abused-quake-editors-to-redefine-the-morrowind-modding-experience/image-27/" data-orig-file="https://openmw.org/wp-content/uploads/2024/11/image-23.png" data-orig-size="1488,946" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://openmw.org/wp-content/uploads/2024/11/image-23-300x191.png" data-large-file="https://openmw.org/wp-content/uploads/2024/11/image-23-1024x651.png" src="https://openmw.org/wp-content/uploads/2024/11/image-23-1024x651.png" alt="" srcset="https://openmw.org/wp-content/uploads/2024/11/image-23-1024x651.png 1024w, https://openmw.org/wp-content/uploads/2024/11/image-23-300x191.png 300w, https://openmw.org/wp-content/uploads/2024/11/image-23-768x488.png 768w, https://openmw.org/wp-content/uploads/2024/11/image-23.png 1488w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p><br>What you see above are maps which Epoch and I produced together, and he worked to develop baked lighting, normal, and specular maps for. Along with a creepy postprocess fog visible in the last image. The first image is a set of 2500 chunks procedurally generated based on the Trenchbroom maps we made. Eat your heart out, Starfield!</p>



<p>If you want to know more about our stack, the OpenMW project, or just to talk, <a href="https://discord.gg/YegsVV3aRb">please do reach out</a>! I love discussing this topic and am always open to explore game development concepts (and OpenMW) with new friends.</p>



<h2>What does this mean for OpenCS?</h2>



<p>Great things. Trenchbroom has a very similar stack to OpenCS ‚Äì both are Qt-based level editing applications running OpenGL. The similarities <em>mostly</em> end there, though, and in a good way. I borrowed some of Trenchbroom‚Äôs code for <a href="https://gitlab.com/OpenMW/openmw/-/merge_requests/3974">an early attempt</a> at Windows dark mode support. My implementation didn‚Äôt manifest, but the relevant Trenchbroom bits from that old MR will allow better usage of the ALT key in our editor to more closely reflect the orbit camera behavior of the original TESCS.</p>



<p>Additionally, I‚Äôve (politely) butted heads with the Trenchbroom author once or twice about adding new preferences in TB ‚Äì something which they are <em>very</em> resistant to. And rightly so! I‚Äôve spoken with many people who thought they had feature requests for OpenCS and it turned out they were asking for something buried in its preferences menu.</p>



<p>Finally, after implementing <a href="https://gitlab.com/OpenMW/openmw/-/merge_requests/3675">!3675</a>, I realized we could do even better than that when it comes to moving objects in the editor. In Trenchbroom, you simply hold shift to move an object only along whichever of the X and Y axes has moved further, and alt to move on the Z axis. It‚Äôs not at all like how TESCS works, but it‚Äôs very fast once you‚Äôre used to it and far less laborious than either my or Blender‚Äôs versions of the same feature.</p>



<p>To cap this article, I‚Äôd like to also share <a href="https://assetstore.unity.com/packages/tools/level-design/tremble-map-importer-277805">Tremble</a>, the Unity integration for Trenchbroom, and <a href="https://forums.unrealengine.com/t/hammuer-a-hammer-worldcraft-map-importer-for-unreal-engine/50145">HammUEr</a>, the Unreal integration. You can use Quake-based workflows in essentially any 3D-capable game engine! Consider using it if you find Blender difficult or just don‚Äôt have the time or interest. It might just revolutionize the way you think about level design.</p>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Ask HN: How to deal with a serious mental health breakdown? (132 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=42121630</link>
            <guid>42121630</guid>
            <pubDate>Wed, 13 Nov 2024 00:34:28 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=42121630">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><td><table>
        <tbody><tr id="42121630">
      <td><span></span></td>      <td><center><a id="up_42121630" href="https://news.ycombinator.com/vote?id=42121630&amp;how=up&amp;goto=item%3Fid%3D42121630"></a></center></td><td><span><a href="https://news.ycombinator.com/item?id=42121630">Ask HN: How to deal with a serious mental health breakdown?</a></span></td></tr><tr><td colspan="2"></td><td><span>
          <span id="score_42121630">101 points</span> by <a href="https://news.ycombinator.com/user?id=satori99">satori99</a> <span title="2024-11-13T00:34:28 1731458068"><a href="https://news.ycombinator.com/item?id=42121630">5 hours ago</a></span> <span id="unv_42121630"></span> | <a href="https://news.ycombinator.com/hide?id=42121630&amp;goto=item%3Fid%3D42121630">hide</a> | <a href="https://hn.algolia.com/?query=Ask%20HN%3A%20How%20to%20deal%20with%20a%20serious%20mental%20health%20breakdown%3F&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0">past</a> | <a href="https://news.ycombinator.com/fave?id=42121630&amp;auth=5080ced61014484f42eba08ffc24dfb23f1c15c2">favorite</a> | <a href="https://news.ycombinator.com/item?id=42121630">50&nbsp;comments</a>        </span>
              </td></tr>
    <tr><td></td></tr><tr><td colspan="2"></td><td><div><p>I am dealing with a delicate problem concerning my housemate who has recently had a very serious mental health breakdown.</p><p>This man is my friend of a decade and a housemate for 5 (uneventful) years. He began behaving erratically last week, and got progressivlely worse over the last weekend to the point where he was not really making any sense at all anymore. ("Reality is an illusion - but he knows the truth now" type stuff). He was not sleeping and began talking to himself.</p><p>I no choice but to call his family and also a mental health crisis team. The crisis team arrived first with police and forcibly entered his space.</p><p>This made him very angry, both at them and me, and he was forcibly removed to a hospital where I understand that he is refusing any sort of treatment and cannot be forced.</p><p>His family arrived to pack some things for his stay and found a half-written suicide note in his room. He is claiming it is "creative writing".</p><p>My flatmate is fiercely intelligent, and very highly educated. He is a professional working scientist and way smarter than me, or almost anyone I know.</p><p>He is insisting on returning to our house (as his legal right) but obviously I am very worried about him and terrified of making wrong decisions for both myself and him.</p><p>I know am not responsible for him, but his family are not really helping him properly (imo) either and he is my friend.</p><p>Has anyone dealt with a situation like this before? I am lost and desperate for advice.</p><p>dang: please delete this post if you deem it inappropriate.</p></div></td></tr>        <tr><td></td></tr><tr><td colspan="2"></td><td><form action="comment" method="post"></form></td></tr>  </tbody></table>
  </td></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[3600 MHz Raspberry Pi 5 with Liquid Nitrogen (188 pts)]]></title>
            <link>https://skatterbencher.com/2024/11/11/3600-mhz-raspberry-pi-5-with-liquid-nitrogen/</link>
            <guid>42120385</guid>
            <pubDate>Tue, 12 Nov 2024 22:18:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://skatterbencher.com/2024/11/11/3600-mhz-raspberry-pi-5-with-liquid-nitrogen/">https://skatterbencher.com/2024/11/11/3600-mhz-raspberry-pi-5-with-liquid-nitrogen/</a>, See on <a href="https://news.ycombinator.com/item?id=42120385">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-8837">
	<div>
		
		
		<div>
			<ul>
				
				<li><span></span> <span>posted on <a href="https://skatterbencher.com/2024/11/11/3600-mhz-raspberry-pi-5-with-liquid-nitrogen/" rel="bookmark"><time datetime="2024-11-11T12:00:00+08:00">November 11, 2024</time><time datetime="2024-10-13T18:12:12+08:00">October 13, 2024</time></a></span></li>
				<li> <a href="https://skatterbencher.com/2024/11/11/3600-mhz-raspberry-pi-5-with-liquid-nitrogen/#respond">No Comment</a></li>
				
			</ul>
		</div>
		<p><img data-od-removed-fetchpriority="high" data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[4][self::DIV]/*[1][self::IMG]" width="1920" height="1080" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/wfrpi5a_th_v3-jpg.webp" alt="pi 5 amplified" decoding="async" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/wfrpi5a_th_v3-jpg.webp 1920w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/wfrpi5a_th_v3-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/wfrpi5a_th_v3-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/wfrpi5a_th_v3-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/wfrpi5a_th_v3-1536x864.webp 1536w" sizes="(max-width: 1920px) 100vw, 1920px" data-has-transparency="false" data-dominant-color="696566"></p>

<p>I tried everything but couldn‚Äôt turn this Raspberry Pi 5 into the World‚Äôs Fastest Pi 5. Unfortunately, we can‚Äôt quite claim that title ‚Ä¶ despite the software reporting 4 GHz.</p>



<figure data-od-added-id="" id="embed-optimizer-b65c7c2ecfc14d9bb852e6c120704813"></figure>



<div id="ez-toc-container">
<p>Table of Contents</p>
<nav><ul><li><a href="#Introduction" title="Introduction">Introduction</a></li><li><a href="#Raspberry_Pi_OS_NUMA_Patch" title="Raspberry Pi OS + NUMA Patch">Raspberry Pi OS + NUMA Patch</a></li><li><a href="#Liquid_Nitrogen_Cooling" title="Liquid Nitrogen Cooling">Liquid Nitrogen Cooling</a></li><li><a href="#Raspberry_Pi_%E2%80%9CAmplified%E2%80%9D" title="Raspberry Pi ‚ÄúAmplified‚Äù">Raspberry Pi ‚ÄúAmplified‚Äù</a><ul><li><a href="#ElmorLabs_AMPLE-X1" title="ElmorLabs AMPLE-X1">ElmorLabs AMPLE-X1</a></li></ul></li><li><a href="#Crystal_Oscillator" title="Crystal Oscillator">Crystal Oscillator</a><ul><li><a href="#ElmorLabs_ECB" title="ElmorLabs ECB">ElmorLabs ECB</a></li></ul></li><li><a href="#Conclusive_Thoughts" title="Conclusive Thoughts">Conclusive Thoughts</a></li></ul></nav></div>
<h2><span id="Introduction"></span>Introduction<span></span></h2>



<p>We tried everything to make our Pi the fastest Pi in the world. That includes changing the operating system, subzero cooling with liquid nitrogen, boosting the power circuitry, and even swapping out the crystal oscillator.In this blog post I try to share some of the findings and insights from the several weeks of Pi hacking in collaboration with ElmorLabs. </p>



<p>Let‚Äôs start where we left off: in <a href="https://skatterbencher.com/2024/07/18/skatterbencher-77-raspberry-pi-5-overclocked-to-3000-mhz/">SkatterBencher #77</a> I overclocked the Raspberry Pi 5 to 3 GHz with a slightly improved air cooler. It appears that the PMIC voltage controller is a key limiting factor for achieving higher frequencies. Not only does the PMIC impose voltage configuration limitations but we also saw the Pi shut down at high power consumption levels.</p>



<figure><img data-od-added-loading="" data-od-replaced-sizes="(max-width: 1024px) 100vw, 1024px" data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[11][self::FIGURE]/*[1][self::IMG]" loading="lazy" data-dominant-color="898282" data-has-transparency="false" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/skatterbencher-pi5-1024x576.webp" alt="skatterbencher pi 5 with cooling" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/skatterbencher-pi5-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/skatterbencher-pi5-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/skatterbencher-pi5-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/skatterbencher-pi5-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/skatterbencher-pi5-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></figure>



<p>Therefore, I decided to beef up the power circuitry using the ElmorLabs AMPLE-X1. But I‚Äôll get back to that later, because the first concern for maximizing performance is the operating system.</p>



<h2><span id="Raspberry_Pi_OS_NUMA_Patch"></span>Raspberry Pi OS + NUMA Patch<span></span></h2>



<p>In preparation for the record attempt, it‚Äôs important to prepare the operating system first. Coming from Ubuntu in my SkatterBencher guide, there‚Äôs two things we can improve:</p>



<ol>
<li>Change to the official Raspberry Pi OS, and</li>



<li>Apply the NUMA patch</li>
</ol>



<p>The official Raspberry Pi operating system can easily be <a href="https://www.raspberrypi.com/software/operating-systems/" target="_blank" rel="noreferrer noopener">downloaded from the website</a>. Alternatively, you can also use the Raspberry Pi Imager software which does all the hard work for you.</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/rpi-imager-jpg.webp" data-slb-active="1" data-slb-asset="30032314" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[17][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="c5658f" data-has-transparency="false" loading="lazy" decoding="async" width="721" height="514" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/rpi-imager-jpg.webp" alt="raspberry pi imager" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/rpi-imager-jpg.webp 721w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/rpi-imager-300x214.webp 300w" sizes="auto, (max-width: 721px) 100vw, 721px"></a></figure>



<p>I first learned about the <a href="https://www.tomshardware.com/raspberry-pi/raspberry-pi-5-patch-boosts-performance-up-to-18-via-numa-emulation-geekbench-tests-reveal-gains-in-both-single-and-multi-threaded-performance" target="_blank" rel="noreferrer noopener">NUMA patch</a> when discussing Raspberry Pi overclocking on the Tom‚Äôs Hardware Guide <a href="https://skatterbencher.com/2024/06/28/talking-raspberry-pi-5-overclocking-on-the-pi-cast-181/" target="_blank" rel="noreferrer noopener">The Pi Cast #181</a> a couple of months ago. It boils down to this: <a href="https://lore.kernel.org/lkml/20240625125803.38038-1-tursulin@igalia.com/" target="_blank" rel="noreferrer noopener">NUMA emulation</a> enables the BCM2721 memory controller to better utilize parallelism in physical memory chip organization.</p>



<p>I followed <a href="https://www.jeffgeerling.com/blog/2024/numa-emulation-speeds-pi-5-and-other-improvements">Jeff Geerling‚Äôs guide</a> on enabling the NUMA patch. Combining the Raspberry Pi operating system and applying the NUMA emulation patch improved the benchmark performance significantly.</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide5-png.webp" data-slb-active="1" data-slb-asset="1889388592" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[20][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="4d614f" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide5-1024x576.webp" alt="raspberry pi 5 performance improvement" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide5-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide5-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide5-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide5-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide5-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<h2><span id="Liquid_Nitrogen_Cooling"></span>Liquid Nitrogen Cooling<span></span></h2>



<p>The next step of preparing the Raspberry Pi for higher voltages and frequencies is ensuring we have superior cooling. Preferably, extreme cooling like liquid nitrogen. The place to be for liquid nitrogen testing in Taipei, Taiwan, is of course the <a href="https://elmorlabs.com/" target="_blank" rel="noreferrer noopener">ElmorLabs</a> office.</p>



<p>The Raspberry Pi 5 has a small-footprint PCB with quite a lot of tall components spread around the PCB. So, we can‚Äôt use a regular container like our AI LN2 container or the ElmorLabs Volcano. However, we found this tiny chipset LN2 pot. This container is heavy enough that it can just sit on top of the SoC and provide enough cooling even at ambient. After all, the SoC is barely using any power.</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4325_1200-jpg.webp" data-slb-active="1" data-slb-asset="69356750" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[24][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="807f81" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="575" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4325_1200-1024x575.webp" alt="raspberry pi 5 liquid nitrogen" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4325_1200-1024x575.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4325_1200-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4325_1200-768x431.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4325_1200-jpg.webp 1200w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>I first ran Geekbench at 3200 MHz as a performance sanity check and <a href="https://browser.geekbench.com/v6/cpu/7600778" target="_blank" rel="noreferrer noopener">I achieved</a> 1000 in single-core and 2000 in multi-core in for the first time.</p>



<p>Then, I tried increasing the operating frequency with low ambient temperatures of 20 degrees Celsius. However, as you can see, with ambient temperatures I could only set the clock to 3600 MHz. Once I tried 3700 MHz the Pi would lock up.</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/3700max-png.webp" data-slb-active="1" data-slb-asset="942446652" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[27][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="434545" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/3700max-1024x576.webp" alt="raspberry pi 5 3600 mhz maximum frequency" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/3700max-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/3700max-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/3700max-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/3700max-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/3700max-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Reducing the temperature to minus 40 degrees resulted in the same type of crash: the Pi just locks up at 3.7 GHz. Strange! I also hooked up the ElmorLabs EVC2 to talk to the Renesas PMIC directly and elevate every voltage rail. However, none of them seemed to have any impact on the maximum clock frequency.</p>



<p>For those interested: the Raspberry Pi 5 only starts having operating problems around -90 degrees Celsius. Not bad at all!</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/90c_neg-png.webp" data-slb-active="1" data-slb-asset="2053815885" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[30][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="141516" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/90c_neg-1024x576.webp" alt="raspberry pi 5 -94.1C temperature reporting" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/90c_neg-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/90c_neg-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/90c_neg-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/90c_neg-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/90c_neg-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Hitting a frequency wall at any temperature is &nbsp;rather odd behavior because any modern SoCs should normally scale with both temperature and voltage, unless there‚Äôs an external bottleneck imposing a limit. But the lack of temperature scaling suggests that perhaps there would also be a lack of voltage scaling.</p>



<p>But, there‚Äôs only one way to find out!</p>



<h2><span id="Raspberry_Pi_%E2%80%9CAmplified%E2%80%9D"></span>Raspberry Pi ‚ÄúAmplified‚Äù<span></span></h2>



<p>In the <a href="https://skatterbencher.com/2024/07/18/skatterbencher-77-raspberry-pi-5-overclocked-to-3000-mhz/">SkatterBencher guide</a>, I mention that the Raspberry Pi is shutting down in high load scenarios which use the NEON instructions.</p>



<blockquote>
<p><em>‚ÄúIf we have a closer look at the PassMark benchmark, we find that the benchmark crashes specifically at the NEON sub-test. [‚Ä¶] If we track the current, voltage, and power of the VDD_core during the workload, we find that the NEON subtest is significantly more power-intensive than any other benchmark. We can see peak current exceeding 15 amps and the power consumption exceeding 18 watts.</em></p>



<p><em>When the benchmark crashes, the Raspberry Pi shuts down, and we can‚Äôt even communicate with the PMIC unless we manually press the power button. This suggests the instability is not caused by too high frequency, but perhaps some other mechanism such as over-current or over-temperature protection. Based on the voltage telemetry provided by the Python script, it doesn‚Äôt seem like it‚Äôs an under-volt issue. However, unfortunately, the PMIC debug options are not available at the moment.‚Äù</em></p>
<cite>SkatterBencher #77: Raspberry Pi 5 Overclocked to 3000 MHz</cite></blockquote>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide54-png.webp" data-slb-active="1" data-slb-asset="1865554606" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[36][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="525248" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide54-1024x576.webp" alt="Raspberry Pi 5 passmark" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide54-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide54-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide54-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide54-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/Slide54-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>To address this problem ‚Äì as well as the 1.2V voltage limit ‚Äì we need to beef up the power circuit. And, once again, ElmorLabs comes to the rescue with the Ample-X1 Power Card.</p>



<h3><span id="ElmorLabs_AMPLE-X1"></span>ElmorLabs AMPLE-X1<span></span></h3>



<p>The <a href="https://www.elmorlabs.com/product/elmorlabs-ample-x1-power-card/" target="_blank" rel="noreferrer noopener">ElmorLabs AMPLE-X1</a> is a power card that uses a single-phase step-down buck converter. It is optimized for operating from a 12V power supply but can work with down to 4.5V input. It achieves up to 91.7% efficiency and the parameters can be monitored and controlled digitally by connecting it to EVC2.</p>



<p>To hook up the AMPLE-X1 to the Raspberry Pi 5, we need to perform some hard-to-reverse and definitely-warranty-voiding modifications.</p>



<ol>
<li>Remove the inductors of the 4-phase SoC to disconnect the PMIC from the SoC.</li>



<li>Scratch off the PCB mask to expose more of the copper plane for Vcc and Gnd.</li>



<li>Solder thick, short wires between the Raspberry Pi and the AMPLE-X1.</li>



<li>Make sure the AMPLE-X1 is set by default around 1.0V (it can provide up to 5.0V!)</li>
</ol>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/vdd_core-png.webp" data-slb-active="1" data-slb-asset="595866690" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[42][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="676d60" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/vdd_core-1024x576.webp" alt="raspberry pi 5 vdd_core 4-phase inductors" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/vdd_core-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/vdd_core-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/vdd_core-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/vdd_core-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/vdd_core-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Once that‚Äôs done, it‚Äôs time to try if the Pi still boots up. This is not guaranteed because sometimes the SoC has two-way communication with the PMIC to ensure correct bootup procedure. Luckily, it works. The important step is to turn on the AMPLE-X1 power to the SoC before connecting the USB Type-C to power the other rails and initiate bootup.</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_20240830_181157_2000-jpg.webp" data-slb-active="1" data-slb-asset="2139903168" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[44][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="6f6365" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="759" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_20240830_181157_2000-1024x759.webp" alt="raspberry pi 5 modified with elmorlabs ample-x1 power board" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_20240830_181157_2000-1024x759.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_20240830_181157_2000-300x222.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_20240830_181157_2000-768x569.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_20240830_181157_2000-1536x1138.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_20240830_181157_2000-jpg.webp 2000w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Now, we can use the <a href="https://elmorlabs.com/product/elmorlabs-evc2se/">ElmorLabs EVC2</a> to adjust the output voltage as well as monitor the output current and power. You can use the EVC2 on a secondary system, like a Windows laptop, or use the unofficial Linux package available for download from the ElmorLabs discord here: <a href="https://discord.com/channels/514312075686838282/830630797962641468/1204348733249159218" target="_blank" rel="noreferrer noopener">https://discord.com/channels/514312075686838282/830630797962641468/1204348733249159218</a> (<a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/EVC2_1.0.1.18_Linux.zip" target="_blank" rel="noreferrer noopener">backup</a>).</p>



<p>Here‚Äôs an example of the AMPLE-X1 peaking at 25.5W during a Passmark run.</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/raspberry-pi-passmark-25w-png.webp" data-slb-active="1" data-slb-asset="724240424" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[47][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="5c6063" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/raspberry-pi-passmark-25w-1024x576.webp" alt="raspberry pi 5 25w during passmark" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/raspberry-pi-passmark-25w-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/raspberry-pi-passmark-25w-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/raspberry-pi-passmark-25w-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/raspberry-pi-passmark-25w-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/raspberry-pi-passmark-25w-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>With the beefed-up power circuit, we can now increase the voltage to get higher frequency. We tried increasing the voltage from 1.2V all the way up to 1.55V. Unfortunately, we didn‚Äôt achieve a single additional step of MHz. This is, unfortunately, aligns with the lack of temperature scaling.</p>



<p>But why?</p>



<h2><span id="Crystal_Oscillator"></span>Crystal Oscillator<span></span></h2>



<p>There are many reasons why the SoC frequency wouldn‚Äôt scale with temperature or voltage. For example, it could be a PLL locking problem like we‚Äôve seen with <a href="https://skatterbencher.com/2023/08/23/5800-mhz-intel-tiger-lake-with-liquid-nitrogen/">Intel Tiger Lake</a>. Or it could be that a specific IP block linked to the Arm cores is also getting overclocked. Or, it could be a specific PLL ratio being unstable.</p>



<p>Unfortunately, most of these issues are hard to debug without the proper development tools. However, we can try one last thing to see if maybe the Arm core PLL is causing issues: swapping out the crystal oscillator. The idea is simple: we swap the fixed crystal oscillator with a variable oscillator. That allows us to change the PLL ratio for frequencies exceeding 3.6 GHz.</p>



<h3><span id="ElmorLabs_ECB"></span>ElmorLabs ECB<span></span></h3>



<p>The default clock crystal is a 54MHz crystal which is on the backside of the PCB. It can be removed with some heat. Next, we replace it with the <a href="https://elmorlabs.com/product/elmorlabs-ecb-external-clock-board/">ElmorLabs External Clock Board</a>. Now, we can adjust the input clock lower or higher than the default 54 MHz.</p>



<figure>
<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/osc-png.webp" data-slb-active="1" data-slb-asset="716051814" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[55][self::FIGURE]/*[1][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="636a5e" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" data-id="8855" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/osc-1024x576.webp" alt="raspberry pi 5 54 mhz crystal oscillator" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/osc-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/osc-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/osc-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/osc-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/osc-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb-png.webp" data-slb-active="1" data-slb-asset="871129916" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[55][self::FIGURE]/*[2][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="65685f" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" data-id="8856" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb-1024x576.webp" alt="raspberry pi 5 crystal oscillator elmorlabs ecb modification" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>
</figure>



<p>Upwards, we immediately ran into a limitation of around 56 MHz. However, downwards adjustment was much easier, and the Raspberry Pi 5 could go as low as 46 MHz.</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb_46mhz-png.webp" data-slb-active="1" data-slb-asset="933138521" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[57][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="7f797a" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb_46mhz-1024x576.webp" alt="elmorlabs ecb at 46 mhz" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb_46mhz-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb_46mhz-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb_46mhz-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb_46mhz-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/el_ecb_46mhz-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>With 46 MHz, we can set the Arm frequency to 4000 MHz. As you can see, the Broadcom vcgencmd tool also reports as 4 GHz. But of course, the real frequency is much lower because the crystal oscillator reference clock is lower. The actual frequency is 4,000 / 54 x 46 = 3,407 MHz.</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4399_2000-jpg.webp" data-slb-active="1" data-slb-asset="1169865935" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[59][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="515159" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="575" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4399_2000-1024x575.webp" alt="raspberry pi 5 4000 mhz shot" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4399_2000-1024x575.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4399_2000-300x168.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4399_2000-768x431.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4399_2000-1536x862.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/IMG_4399_2000-jpg.webp 2000w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Again, we run into the same frequency wall as we saw with temperature and voltage adjustments: about 3.4 GHz for benchmarks and 3.6 GHz as maximum configurable frequency.</p>



<p>Oh, I did try to run Geekbench at the fake 4 GHz and, good news, it was able to catch the result isn‚Äôt legitimate. Great job!</p>



<figure><a href="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/gb6-png.webp" data-slb-active="1" data-slb-asset="2073517750" data-slb-group="8837"><img data-od-xpath="/*[1][self::HTML]/*[2][self::BODY]/*[2][self::DIV]/*[2][self::DIV]/*[1][self::DIV]/*[1][self::MAIN]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::DIV]/*[1][self::ARTICLE]/*[1][self::DIV]/*[62][self::FIGURE]/*[1][self::A]/*[1][self::IMG]" data-dominant-color="d9dadb" data-has-transparency="false" loading="lazy" decoding="async" width="1024" height="576" src="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/gb6-1024x576.webp" alt="geekbench 5 pi 5 illegal timer result" srcset="https://cdn.skatterbencher.com/wp-content/uploads/2024/10/gb6-1024x576.webp 1024w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/gb6-300x169.webp 300w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/gb6-768x432.webp 768w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/gb6-1536x864.webp 1536w, https://cdn.skatterbencher.com/wp-content/uploads/2024/10/gb6-png.webp 1920w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<h2><span id="Conclusive_Thoughts"></span>Conclusive Thoughts<span></span></h2>



<p>So, that‚Äôs basically it ‚Ä¶ we‚Äôve tried everything we could reasonably come up with to push the Raspberry Pi 5 to 4 GHz. But despite the much lower temperatures, much higher voltages, and even a different crystal oscillator ‚Ä¶ 3.6 GHz is the highest possible frequency.</p>



<p>But all things considered, I‚Äôm still very happy to have put in the time and effort to learn about Raspberry Pi overclocking. It gave me the opportunity to learn more about Linux and ARM, as well as pursue really advanced hardware modifications. I see this experience as a pivotal work forming a foundation for future experiments.</p>



<p>I want to thank Jon from ElmorLabs for all the help and tools provided for this overclocking experiment. Without his help, this project would not have been possible!</p>



<p>I thank you for reading and <a href="https://www.patreon.com/skatterbencher">the Patreons</a> for the support. If you have any questions or comments, please drop them in the comment section below.&nbsp;</p>



<p>See you next time!</p>
	</div><!-- .entry-content -->
		</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[M4 Mac mini's efficiency is incredible (543 pts)]]></title>
            <link>https://www.jeffgeerling.com/blog/2024/m4-mac-minis-efficiency-incredible</link>
            <guid>42120311</guid>
            <pubDate>Tue, 12 Nov 2024 22:08:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.jeffgeerling.com/blog/2024/m4-mac-minis-efficiency-incredible">https://www.jeffgeerling.com/blog/2024/m4-mac-minis-efficiency-incredible</a>, See on <a href="https://news.ycombinator.com/item?id=42120311">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="block-jeffgeerling-system-main">
          
<article>

  

      
  
  <div><p>I had to pause some of my work getting <a href="https://github.com/geerlingguy/raspberry-pi-pcie-devices/issues/680">a current-gen AMD graphics card running on the Pi 5</a> and <a href="https://github.com/geerlingguy/sbc-reviews/issues/52">testing a 192-core AmpereOne server</a> to quickly post on the M4's efficiency.</p>

<p><img width="700" height="auto" src="https://www.jeffgeerling.com/sites/default/files/images/m4-mac-mini-on-desk.jpg" alt="M4 Mac mini on desk"></p>

<p>I expected M4 to be better than M1/M2 (I haven't personally tested M3), and I hoped it would at least match the previous total-system-power efficiency king, a tiny arm SBC with an RK3588 SoC... but I didn't expect it to jump forward <em>32%</em>. Efficiency gains on the Arm systems I test typically look like 2-5% year over year.</p>

<p>The M4 mini I just bought reaches <strong>6.74 Gflops/W</strong> on the HPL benchmark.</p>

<p>I can get 283 Gflops at 42W, versus 264 at 66W on my M1 Max Mac Studio (for a round 4.00 Gflops/W).</p>

<p>The chip isn't the <em>fastest</em> at everything, but it's certainly the most <em>efficient</em> CPU I've ever tested. And that scales down to idle power, too‚Äîit hovers between 3-4W at idle‚Äîwhich is about the same as a <em>Raspberry Pi</em>.</p>

<p>This is total system power draw, too‚Äînot just the CPU.</p>

<p>And the system I bought includes 10 Gigabit Ethernet and 32 GB of RAM; most systems I've used consume 4-6W just <em>running the 10 GbE controller</em>!</p>

<p>In <a href="https://www.myelectronics.nl/us/19-inch-125u-rack-mount-for-3x-mac-mini-2024.html">1.25U of rack space</a>, you could run three Mac minis, idling around 10W, giving almost a teraflop of CPU performance. (Not to mention there's a fast GPU/NPU, 10 GbE, and tons of high speed Thunderbolt IO in the back.)</p>

<p><em>If only they didn't put the power button on the bottom.</em></p>

<p>You can check out all my <a href="https://github.com/geerlingguy/top500-benchmark">top500-benchmark results</a> on GitHub, and follow my progress <a href="https://github.com/geerlingguy/sbc-reviews/issues/57">testing out the M4 mini here</a>.</p>

<p>I haven't tested an M4 Pro Mac mini yet, so I'm not sure if the efficiency is any better or worse.</p></div>
      
  
</article>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Five Unusual Raku Features (248 pts)]]></title>
            <link>https://buttondown.com/hillelwayne/archive/five-unusual-raku-features/</link>
            <guid>42120090</guid>
            <pubDate>Tue, 12 Nov 2024 21:48:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://buttondown.com/hillelwayne/archive/five-unusual-raku-features/">https://buttondown.com/hillelwayne/archive/five-unusual-raku-features/</a>, See on <a href="https://news.ycombinator.com/item?id=42120090">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                
                    <date>
                        
                            November 12, 2024
                        </date>
                
                
                
                    <h2>
                        Junctions, whatevers, hypers, and more!
                    </h2>
                

                

                
                    
                        <h3><em>Logic for Programmers</em> is now in Beta!</h3>
<p><a href="https://leanpub.com/logic/" target="_blank">v0.5 marks the official end of alpha</a>! With the new version, all of the content I wanted to put in the book is now present, and all that's left is copyediting, proofreading, and formatting. Which will probably take as long as it took to actually write the book. You can see the release notes on the leanpub page.</p>
<p>And I've got a snazzy new cover:</p>
<p><img alt="The logic for programmers cover, a 40x zoom of a bird feather" src="https://assets.buttondown.email/images/26c75f1e-e60a-4328-96e5-9878d96d3e53.png?w=960&amp;fit=max"></p>
<p>(I don't actually like the cover that much but it <em>looks</em> official enough until I can pay an actual cover designer.)</p>
<h2>"Five" Unusual Raku Features</h2>
<p>Last year I started learning Raku, and the sheer bizarreness of the language left me describing it as <a href="https://buttondown.com/hillelwayne/archive/raku-a-language-for-gremlins/" target="_blank">a language for gremlins</a>. Now that I've used it in anger for over a year, I have a better way of describing it:</p>
<blockquote>
<p>Raku is a laboratory for language features.</p>
</blockquote>
<p>This is why it has <a href="https://docs.raku.org/language/concurrency" target="_blank">five different models of concurrency</a> and eighteen ways of doing anything else, because the point is to <em>see</em> what happens. It also explains why many of the features interact so strangely and why there's all that odd edge-case behavior. Getting 100 experiments polished and playing nicely with each other is much harder than running 100 experiments; we can sort out the polish <em>after</em> we figure out which ideas are good ones.</p>
<p>So here are "five" Raku experiments you could imagine seeing in another programming language. If you squint.</p>
<h3><a href="https://docs.raku.org/type/Junction" target="_blank">Junctions</a></h3>
<p>Junctions are "superpositions of possible values". Applying an operation to a junction instead applies it to every value inside the junction.  </p>
<div><pre><span></span><code>&gt; <span>2</span><span>|</span><span>10</span>
<span>any</span>(<span>2</span>, <span>10</span>)

&gt; <span>2</span><span>&amp;10</span> + <span>3</span>
<span>all</span>(<span>5</span>, <span>13</span>)

&gt;(<span>1</span><span>&amp;2</span>) + (<span>10</span><span>^</span><span>20</span>)
<span>all</span>(<span>one</span>(<span>11</span>, <span>21</span>), <span>one</span>(<span>12</span>, <span>22</span>))
</code></pre></div>
<p>As you can probably tell from the <code>all</code>s and <code>any</code>s, junctions are a feature meant for representing boolean formula. There's no way to destructure a junction, and the only way to use it is to collapse it to a boolean first.</p>
<div><pre><span></span><code>&gt; (<span>1</span><span>&amp;2</span>) + (<span>10</span><span>^</span><span>20</span>) &lt; <span>15</span>
<span>all</span>(<span>one</span>(<span>True</span>, <span>False</span>), <span>one</span>(<span>True</span>, <span>False</span>))

<span># so coerces junctions to booleans</span>
&gt; <span>so</span> (<span>1</span><span>&amp;2</span>) + (<span>10</span><span>^</span><span>20</span>) &lt; <span>15</span>
<span>True</span>

&gt; <span>so</span> (<span>1</span><span>&amp;2</span>) + (<span>10</span><span>^</span><span>20</span>) &gt; <span>0</span>
<span>False</span>

&gt; <span>16</span> %% (<span>3</span><span>&amp;5</span>) ?? <span>"fizzbuzz"</span> !! *
*
</code></pre></div>
<p>The real interesting thing for me is how Raku elegantly uses junctions to represent quantifiers. In most languages, you either have the function <code>all(list[T], T -&gt; bool)</code> or the method <code>[T].all(T -&gt; bool)</code>, both of which apply the test to every element of the list. In Raku, though, <code>list.all</code> doesn't take <em>anything</em>, it's just a niladic method that turns the list into a junction. </p>
<div><pre><span></span><code>&gt; <span>my</span> <span>$x</span> = <span>&lt;1 2 3&gt;</span>.<span>all</span>
<span>all</span>(<span>1</span>, <span>2</span>, <span>3</span>)
&gt; <span>is-prime</span>(<span>$x</span>)
<span>all</span>(<span>False</span>, <span>True</span>, <span>True</span>)
</code></pre></div>
<p>This means we can combine junctions. If Raku didn't already have a <code>unique</code> method, we could build it by saying "are all elements equal to exactly one element?"</p>
<div><pre><span></span><code>&gt; <span>so</span> {.<span>all</span> == .<span>one</span>}(<span>&lt;1 2 3 7&gt;</span>)
<span>True</span>

&gt; <span>so</span> {.<span>all</span> == .<span>one</span>}(<span>&lt;1 2 3 7 2&gt;</span>)
<span>False</span>
</code></pre></div>
<h3><a href="https://docs.raku.org/type/Whatever" target="_blank">Whatevers</a></h3>
<p><code>*</code> is the "whatever" symbol and has a lot of different roles in Raku.<sup id="fnref:analogs"><a href="#fn:analogs">1</a></sup> Some functions and operators have special behavior when passed a <code>*</code>. In a range or sequence, <code>*</code> means "unbound".</p>
<div><pre><span></span><code>&gt; <span>1</span>..*
<span>1</span><span>..</span><span>Inf</span>

&gt; (<span>2</span>,<span>4</span>,<span>8</span>...*)[<span>17</span>]
<span>262144</span>
</code></pre></div>
<p>The main built-in use, though, is that expressions with <code>*</code> are lifted into anonymous functions. This is called "whatever-priming" and produces a <code>WhateverCode</code>, which is indistinguishable from other functions except for the type.</p>
<div><pre><span></span><code>&gt; {<span>$_</span> + <span>10</span>}(<span>2</span>)
<span>12</span>

&gt; (* + <span>10</span>)(<span>2</span>)
<span>12</span>

&gt; (^<span>10</span>).<span>map</span>(* % <span>2</span>)
(<span>0</span> <span>1</span> <span>0</span> <span>1</span> <span>0</span> <span>1</span> <span>0</span> <span>1</span> <span>0</span> <span>1</span>)
</code></pre></div>
<p>There's actually a bit of weird behavior here: if <em>two</em> whatevers appear in the expression, they become separate positional variables. <code>(2, 30, 4, 50).map(* + *)</code> returns <code>(32, 45)</code>. This makes it easy to express <a href="https://docs.raku.org/language/operators#infix_..." target="_blank">a tricky Fibonacci definition</a> but otherwise I don't see how it's better than making each <code>*</code> the same value.</p>
<p>Regardless, priming is useful because <em>so many</em> Raku methods are overloaded to take functions. You get the last element of a list with <code>l[*-1]</code>. This <em>looks</em> like standard negative-index syntax, but what actually happens is that when <code>[]</code> is passed a function, it passes in list length and looks up the result. So if the list has 10 elements, <code>l[*-1] = l[10-1] = l[9]</code>, aka the last element. Similarly, <code>l.head(2)</code> is the first two elements of a list, <code>l.head(*-2)</code> is all-but-the-last-two.</p>
<p>We can pass other functions to <code>[]</code>, which e.g. makes implementing ring buffers easy.</p>
<div><pre><span></span><code>&gt; <span>my</span> <span>@x</span> = ^<span>10</span>
[<span>0</span> <span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span>]

&gt; <span>@x</span>[<span>95</span> % *]--; <span>@x</span>
[<span>0</span> <span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>4</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span>]
</code></pre></div>
<h3><a href="https://docs.raku.org/language/regexes" target="_blank">Regular Expressions</a></h3>
<p>There are two basic standards for regexes: POSIX regexes and Perl-compatible regexes (PCRE). POSIX regexes are a terrible mess of backslashes and punctuation. PCRE is backwards compatible with POSIX and is a more terrible mess of backslashes and punctuation. Most languages follow the PCRE standard, but Perl 6 breaks backwards compatibility with an entirely new regex syntax. </p>
<p>The most obvious improvement: <a href="https://docs.raku.org/language/regexes#Subrules" target="_blank">composability</a>. In most languages  "combine" two regexes by concating their strings together, which is terrible for many, many reasons. Raku has the standard "embed another regex" syntax: <code>/&lt; foo &gt;+/</code> matches one-or-more of the <code>foo</code> regex without <code>foo</code> "leaking" into the top regex. </p>
<p>This already does a lot to make regexes more tractable: you can break a complicated regular expression down into simpler and more legible parts. And in fact this is how Raku supports <a href="https://docs.raku.org/language/grammars" target="_blank">parsing grammars</a> as a builtin language feature. I've only used grammars once but it <a href="https://www.hillelwayne.com/post/picat/" target="_blank">was quite helpful</a>.</p>
<p>Since we're breaking backwards compatibility anyway, we can now add lots of small QOLs. There's a <a href="https://docs.raku.org/language/regexes#Modified_quantifier:_%,_%%" target="_blank">value separator</a> modifier: <code>\d+ % ','</code> matches <code>1</code> / <code>1,2</code> / <code>1,1,4</code> but not <code>1,</code> or <code>12</code>. <a href="https://docs.raku.org/language/regexes#Lookaround_assertions" target="_blank">Lookaheads</a> and non-capturing groups aren't nonsense glyphs. <code>r1 &amp;&amp; r2</code> only matches strings that match <em>both</em> <code>r1</code> and <code>r2</code>. Backtracking can be stopped with <a href="https://docs.raku.org/language/regexes#Preventing_backtracking:_:" target="_blank">:</a>. Whitespace is ignored by default and has to be explicitly enabled in match patterns.</p>
<p>There's more stuff Raku does with actually <em>processing</em> regular expressions, but the regex notation is something that might actually appear in another language someday. </p>

<h3><a href="https://docs.raku.org/language/operators#Hyper_operators" target="_blank">Hyperoperators</a></h3>
<p>This is a small one compared to the other features, but it's also the thing I miss most often in other languages. The most basic form <code>l&gt;&gt;.method</code> is basically equivalent to <code>map</code>, except it also recursively descends into sublists.</p>
<div><pre><span></span><code>&gt; [<span>1</span>, [<span>2</span>, <span>3</span>], <span>4</span>]&gt;&gt;.<span>succ</span>
[<span>2</span> [<span>3</span> <span>4</span>] <span>5</span>]
</code></pre></div>
<p>This is more useful than it looks because any function call <code>f(list, *args)</code> can be rewritten in "method form" <code>list.&amp;f(*args)</code>, so <code>&gt;&gt;.</code> becomes the generalized mapping operator. You can use it with whatevers, too.</p>
<div><pre><span></span><code>&gt; [<span>1</span>, [<span>2</span>, <span>3</span>], <span>4</span>]&gt;&gt;.&amp;(*+<span>1</span>)
[<span>2</span> [<span>3</span> <span>4</span>] <span>5</span>]
</code></pre></div>
<p>Anyway, the more generalized <em>binary</em> hyperoperator <code>l1 &lt;&lt; op &gt;&gt; l2</code><sup id="fnref:spaces"><a href="#fn:spaces">2</a></sup> applies <code>op</code> elementwise to the two lists, looping the shorter list until the longer list is exhausted. <code>&gt;&gt;op&gt;&gt;</code> / <code>&lt;&lt; op&lt;&lt;</code> are the same except they instead loop until the lhs/rhs list is exhausted. Whew!</p>
<div><pre><span></span><code>&gt; [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>] <span>&lt;&lt;+&gt;</span>&gt; [<span>10</span>, <span>20</span>]
[<span>11</span> <span>22</span> <span>13</span> <span>24</span> <span>15</span>]

&gt; [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>] <span>&lt;&lt;+&lt;&lt; [10, 20]</span>
<span>[11 22]</span>

<span>&gt; [1, 2, 3, 4, 5] &gt;&gt;</span>+&gt;&gt; [<span>10</span>, <span>20</span>]
[<span>11</span> <span>22</span> <span>13</span> <span>24</span> <span>15</span>]

<span># Also works with single values</span>
&gt; [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>] <span>&lt;&lt;+&gt;</span>&gt; <span>10</span>
[<span>11</span> <span>12</span> <span>13</span> <span>14</span> <span>15</span>]

<span># Does weird things with nested lists too</span>
&gt; [<span>1</span>, [<span>2</span>, <span>3</span>], <span>4</span>, <span>5</span>] <span>&lt;&lt;+&gt;</span>&gt; [<span>10</span>, <span>20</span>]
[<span>11</span> [<span>22</span> <span>23</span>] <span>14</span> <span>25</span>]
</code></pre></div>
<p>Also for some reason the hyperoperators have separate behaviors on two hashes, either applying <code>op</code> to the union/intersection/hash difference. </p>
<p>Anyway it's a super weird (meta)operator but it's also quite useful! It's the closest thing I've seen to <a href="https://hillelwayne.com/post/j-notation/" target="_blank">J verbs</a> outside an APL. I like using it to run the same formula on multiple possible inputs at once.</p>
<div><pre><span></span><code>(<span>20</span> * <span>10</span> <span>&lt;&lt;-&gt;</span>&gt; (<span>21</span>, <span>24</span>)) <span>&lt;&lt;*&gt;</span>&gt; (<span>10</span>, <span>100</span>)
(<span>1790</span> <span>17600</span>)
</code></pre></div>
<p>Incidentally, it's called the hyperoperator because it evaluates all of the operations in parallel. Explicit loops can be parallelized by prefixing them with <a href="https://docs.raku.org/language/statement-prefixes#hyper,_race" target="_blank"><code>hyper</code></a>.</p>
<h3><a href="https://docs.raku.org/type/Pair" target="_blank">Pair Syntax</a></h3>
<p>I've talked about pairs a little in <a href="https://buttondown.com/hillelwayne/archive/unusual-basis-types-in-programming-languages/" target="_blank">this newsletter</a>, but the gist is that Raku hashes are composed of a set of pairs <code>key =&gt; value</code>. The pair is the basis type, the hash is the collection of pairs. There's also a <em>ton</em> of syntactic sugar for concisely specifying pairs via "colon syntax":</p>
<div><pre><span></span><code>&gt; <span>my</span> <span>$x</span> = <span>3</span>; :<span>$x</span>
<span>x</span> =&gt; <span>3</span>

&gt; :<span>a</span><span>&lt;$x&gt;</span>
<span>a</span> =&gt; <span>"$x"</span>

&gt; :<span>a</span>(<span>$x</span>)
<span>a</span> =&gt; <span>3</span>

&gt; :<span>3</span><span>a</span>
<span>a</span> =&gt; <span>3</span>
</code></pre></div>
<p>The most important sugars are <code>:key</code> and <code>:!key</code>, which map to <code>key =&gt; True</code> and <code>key =&gt; False</code>. This is a really elegant way to add flags to a methods! Take the definition of <a href="https://docs.raku.org/type/Str#method_match" target="_blank">match</a>:</p>
<div><pre><span></span><code><span>method</span> <span>match</span>(<span>$pat</span>, 
    :<span>continue</span>(:<span>$c</span>), :<span>pos</span>(:<span>$p</span>), :<span>global</span>(:<span>$g</span>), 
    :<span>overlap</span>(:<span>$ov</span>), :<span>exhaustive</span>(:<span>$ex</span>), 
    :<span>st</span>(:<span>$nd</span>), :<span>rd</span>(:<span>$th</span>), :<span>$nth</span>, :<span>$x</span> --&gt; <span>Match</span>)
</code></pre></div>
<p>Probably should also mention that in a definition, <code>:f(:$foo)</code> defines the parameter <code>$foo</code> but <a href="https://docs.raku.org/language/signatures#Argument_aliases" target="_blank">also aliases it</a> to <code>:f</code>, so you can set the flag with <code>:f</code> or <code>:foo</code>. Colon-pairs defined in the signature can be passed in anywhere, or even stuck together:</p>
<div><pre><span></span><code>&gt; <span>"abab"</span>.<span>match</span>(<span>/../</span>)
ÔΩ¢<span>ab</span>ÔΩ£
&gt; <span>"abab"</span>.<span>match</span>(<span>/../</span>, :<span>g</span>)
(ÔΩ¢<span>ab</span>ÔΩ£ ÔΩ¢<span>ab</span>ÔΩ£)
&gt; <span>"abab"</span>.<span>match</span>(<span>/../</span>, :<span>g</span>, :<span>ov</span>)
(ÔΩ¢<span>ab</span>ÔΩ£ ÔΩ¢<span>ba</span>ÔΩ£ ÔΩ¢<span>ab</span>ÔΩ£)

<span># Out of order stuck together</span>
&gt; <span>"abab"</span>.<span>match</span>(:<span>g:ov</span>,<span> /../</span>)
(ÔΩ¢<span>ab</span>ÔΩ£ ÔΩ¢<span>ba</span>ÔΩ£ ÔΩ¢<span>ab</span>ÔΩ£)
</code></pre></div>
<p>So that leads to extremely concise method configuration. Definitely beats <code>match(global=True, overlap=True)</code>!</p>
<p>And for some reason you can place keyword arguments <em>after</em> the function call:</p>
<div><pre><span></span><code>&gt; <span>"abab"</span>.<span>match</span>(:<span>g</span>,<span> /../</span>):<span>ov:2nd</span>
ÔΩ¢<span>ba</span>ÔΩ£
</code></pre></div>
<h2>The next-gen lab: Slangs and RakuAST</h2>
<p>These are features I have no experience in and <em>certainly</em> are not making their way into other languages, but they really expand the explorable space of new features. <a href="https://raku.land/zef:lizmat/Slangify" target="_blank">Slangs</a> are modifications to the Raku syntax. This can be used for things like <a href="https://raku.land/zef:elcaro/Slang::Otherwise" target="_blank">modifying loop syntax</a>, <a href="https://raku.land/zef:raku-community-modules/Slang::Piersing" target="_blank">changing identifiers</a>, or adding <a href="https://raku.land/zef:raku-community-modules/OO::Actors" target="_blank">actors</a> or <a href="https://raku.land/github:MattOates/BioInfo" target="_blank">DNA sequences</a> to the base language.</p>
<p>I <em>barely</em> understand <a href="https://dev.to/lizmat/rakuast-for-early-adopters-576n" target="_blank">RakuAST</a>. I <em>think</em> the idea is that all Raku expressions can be parsed as an AST from inside Raku itself.</p>
<div><pre><span></span><code>&gt; <span>Q/my $x; $x++/</span>.<span>AST</span>
<span>RakuAST::StatementList</span>.<span>new</span>(
  <span>RakuAST::Statement::Expression</span>.<span>new</span>(
    <span>expression</span> =&gt; <span>RakuAST::VarDeclaration::Simple</span>.<span>new</span>(
      <span>sigil</span>       =&gt; <span>"\$"</span>,
      <span>desigilname</span> =&gt; <span>RakuAST::Name</span>.<span>from-identifier</span>(<span>"x"</span>)
    )
  ),
  <span>RakuAST::Statement::Expression</span>.<span>new</span>(
    <span>expression</span> =&gt; <span>RakuAST::ApplyPostfix</span>.<span>new</span>(
      <span>operand</span> =&gt; <span>RakuAST::Var::Lexical</span>.<span>new</span>(<span>"\$x"</span>),
      <span>postfix</span> =&gt; <span>RakuAST::Postfix</span>.<span>new</span>(<span>"++"</span>)
    )
  )
)
</code></pre></div>
<p>This allows for things like writing Raku in different languages:</p>
<div><pre><span></span><code><span>say</span> <span>Q/my $x; put $x/</span>.<span>AST</span>.<span>DEPARSE</span>(<span>"NL"</span>)
<span>mijn</span> <span>$x</span>;
<span>zeg-het</span> <span>$x</span>
</code></pre></div>
<h3>Bonus experiment</h3>
<p>Raku comes with a "<a href="https://rakudo.org/star" target="_blank">Rakudo Star</a>" installation, which comes with a set of <a href="https://github.com/rakudo/star/blob/master/etc/modules.txt" target="_blank">blessed third party modules</a> preinstalled. I love this! It's a great compromise between the maintainer burdens of a large standard library and the user burdens of making everybody find the right packages in the ecosystem.</p>
<hr>
<h2>Blog Rec</h2>
<p>Feel obligated to recommend some Raku blogs! Elizabeth Mattijsen posts <a href="https://dev.to/lizmat" target="_blank">a ton of stuff</a> to dev.to about Raku internals. <a href="https://www.codesections.com/blog/" target="_blank">Codesections</a> has a pretty good blog; he's the person who eventually got me to try out Raku. Finally, the <a href="https://raku-advent.blog/" target="_blank">Raku Advent Calendar</a> is a great dive into advanced Raku techniques. Bad news is it only updates once a year, good news is it's 25 updates that once a year.</p>

                    
                

                
                    <p><em>If you're reading this on the web, you can subscribe <a href="https://buttondown.com/hillelwayne" target="_blank">here</a>. Updates are once a week. My main website is <a href="https://www.hillelwayne.com/" target="_blank">here</a>.</em></p>
<p><em>My new book, </em>Logic for Programmers<em>, is now in early access! Get it <a href="https://leanpub.com/logic/" target="_blank">here</a>.</em></p>
                

            </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Spotify's Car Thing, due for bricking, is getting an open source second life (120 pts)]]></title>
            <link>https://arstechnica.com/gaming/2024/11/firmware-hacks-are-rejuvenating-spotifys-car-thing-before-the-company-bricks-it/</link>
            <guid>42119869</guid>
            <pubDate>Tue, 12 Nov 2024 21:26:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arstechnica.com/gaming/2024/11/firmware-hacks-are-rejuvenating-spotifys-car-thing-before-the-company-bricks-it/">https://arstechnica.com/gaming/2024/11/firmware-hacks-are-rejuvenating-spotifys-car-thing-before-the-company-bricks-it/</a>, See on <a href="https://news.ycombinator.com/item?id=42119869">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                      
                      
          <p>Spotify has lost all enthusiasm for the little music devices it sold for just half a year. Firmware hackers, as usually happens, have a lot more interest and have stepped in to save, and upgrade, a potentially useful gadget.</p>
<p>Spotify's idea a couple years ago was a car-focused device for those who lacked Apple CarPlay, Android Auto, or built-in Spotify support in their vehicles, or just wanted a dedicated Spotify screen. The <a href="https://carthing.spotify.com/">Car Thing</a> was a $100 doodad with a 4-inch touchscreen and knob that attached to the dashboard (or into a CD slot drive). All it could do was play Spotify, and only if you were a paying member, but that could be an upgrade for owners of older cars, or people who wanted a little desktop music controller.</p>
<p>But less than half a year after it fully released its first hardware device, <a href="https://arstechnica.com/gadgets/2024/05/pleas-for-open-sourcing-refunds-as-spotify-plans-to-brick-car-thing-devices/">Spotify gave up on the Car Thing</a>&nbsp;due to "several factors, including product demand and supply chain issues." A Spotify rep told Ars that the Car Thing was meant "to learn more about how people listen in the car," and now it was "time to say goodbye to the devices entirely." Spotify indicated&nbsp;<a href="https://arstechnica.com/gadgets/2024/05/spotify-wont-open-source-car-thing-but-starts-refund-process/">it would offer refunds</a>, though not guaranteed, and moved forward with plans to brick the device in December 2024.</p>
<h2>It was always open source, just not publicly</h2>
<p>Enter Dammit Jeff, a YouTuber who dove into his device and shows off some alternative software ideas for it (as we first saw <a href="https://blog.adafruit.com/2024/11/12/what-to-do-with-the-spotify-car-thing/">on Adafruit's blog</a>). He even likes the little thing, noting that its wheel feels great, and that the four buttons on the top‚Äîoriginally meant for favorite playlists‚Äîpresent a lot of possibilities.</p>

          
                      
                  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Spanish police arrest ex-fraud chief after ‚Ç¨20M found in walls of his house (105 pts)]]></title>
            <link>https://www.theguardian.com/world/2024/nov/12/spanish-police-arrest-ex-fraud-chief-after-20m-found-in-walls-of-his-house</link>
            <guid>42119575</guid>
            <pubDate>Tue, 12 Nov 2024 20:49:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/world/2024/nov/12/spanish-police-arrest-ex-fraud-chief-after-20m-found-in-walls-of-his-house">https://www.theguardian.com/world/2024/nov/12/spanish-police-arrest-ex-fraud-chief-after-20m-found-in-walls-of-his-house</a>, See on <a href="https://news.ycombinator.com/item?id=42119575">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="maincontent"><p>Spain has arrested one of its top police officers after ‚Ç¨20m (¬£17m) was found hidden in the walls of his house, as part of an investigation into the country‚Äôs largest-ever cocaine bust.</p><p>√ìscar S√°nchez Gil was until recently the head of the fraud and anti-money laundering division of Spain‚Äôs national police force in Madrid.</p><p>Officers arrested him last week along with 15 other people, including his romantic partner, who is also a police officer in the Madrid region, a police source said without naming her.</p><p>During the raid, police found the ‚Ç¨20m, in cash, hidden in the walls and ceilings of the couple‚Äôs home in Alcal√° de Henares, a town of about 195,000 inhabitants located 18 miles (30km) east of the Spanish capital.</p><p>Officers also found ‚Ç¨1m in his office, hidden in two locked cupboards, in bills of ‚Ç¨50-500, according to the police source.</p><p>The couple have been charged with drug trafficking, money-laundering, corruption and membership of a criminal organisation after last week appearing before a Madrid court, which remanded them in custody, a judicial source said.</p><p>Spanish media said the arrests were linked to the seizure last month of 13 tonnes of cocaine that <a href="https://www.theguardian.com/world/2024/nov/07/spanish-police-seize-record-cocaine-haul-in-banana-shipment-from-equador" data-link-name="in body link">arrived in the southern port of Algeciras from Ecuador‚Äôs largest city Guayaquil</a> ‚Äì a drug-trafficking hub ‚Äì hidden among crates of bananas.</p><p>Police said the drug bust ‚Äì which they only announced last week ‚Äì is the largest-ever haul of cocaine in Spain and ‚Äúone of the largest seizures in the world‚Äù.</p><p>The container was destined for a Spanish importer based in the south-eastern coastal town of Alicante ‚Äúwho had been receiving large quantities of fruit imported from Ecuador for years‚Äù, the authorities said.</p><p>Police searched several homes and offices in Madrid and Alicante after the cocaine seizure. These operations uncovered links between the importer and S√°nchez Gil, according to Spanish media reports.</p><p>He was already under suspicion by his colleagues who had tapped his phone, daily newspaper El Mundo reported.</p><p>The father-of-three, who is in his 40s and lives in a brick house protected by metal gates, is suspected of having worked for the drug traffickers for ‚Äúat least five years‚Äù, a source told the newspaper.</p><figure data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.NewsletterSignupBlockElement"><a data-ignore="global-link-styling" href="#EmailSignup-skip-link-12">skip past newsletter promotion</a><p id="EmailSignup-skip-link-12" tabindex="0" aria-label="after newsletter promotion" role="note">after newsletter promotion</p></figure><p>During these years, he allegedly provided them with information on the surveillance of containers in Spanish ports, which enabled them to avoid checks, according to a source close to the investigation.</p><p>While his lifestyle was not ostentatious, the large sums of money found in his home led police officers quoted by El Mundo to compare his house ‚Äúto that of Pablo Escobar‚Äù, the notorious Colombian drug baron who was shot dead by police in 1993.</p><p>A nephew of Escobar once said he found a plastic bag with money worth $18m hidden in the wall of one of his uncle‚Äôs houses.</p><p>Part of the money S√°nchez Gil amassed in recent years was laundered through the purchase of crypto-currencies and a large fleet of private hire vehicles registered in the name of one of his relatives, El Mundo reported.</p><p>Spain is a main entry point for drugs into <a href="https://www.theguardian.com/world/europe-news" data-link-name="in body link" data-component="auto-linked-tag">Europe</a> because of its close ties with former colonies in Latin America such as major cocaine producers Colombia and Peru, and its proximity to Morocco, a top cannabis producer.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Russian family lived alone in the Siberian wilderness for 40 years (2013) (157 pts)]]></title>
            <link>https://www.smithsonianmag.com/history/this-russian-family-lived-alone-in-the-siberian-wilderness-for-40-years-unaware-of-world-war-ii-or-the-moon-landing-7354256/</link>
            <guid>42119219</guid>
            <pubDate>Tue, 12 Nov 2024 20:13:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.smithsonianmag.com/history/this-russian-family-lived-alone-in-the-siberian-wilderness-for-40-years-unaware-of-world-war-ii-or-the-moon-landing-7354256/">https://www.smithsonianmag.com/history/this-russian-family-lived-alone-in-the-siberian-wilderness-for-40-years-unaware-of-world-war-ii-or-the-moon-landing-7354256/</a>, See on <a href="https://news.ycombinator.com/item?id=42119219">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>

    <div data-article-body="">

        

      

      <p>Siberian summers do not last long. The snows linger into May, and the cold weather returns again during September, freezing the <a href="https://www.britannica.com/science/taiga">taiga</a> into a still life awesome in its desolation: endless miles of straggly pine and birch forests scattered with sleeping bears and hungry wolves; steep-sided mountains; white-water rivers that pour in torrents through the valleys; thousands of miles of icy bogs. This forest is one of the last and greatest of Earth‚Äôs wildernesses. It stretches from Russia‚Äôs Arctic regions to as far south as Mongolia, and east from the Urals to the Pacific: millions of square miles of sparsely populated nothingness.</p>

<p>When the warm days do arrive, though, the taiga blooms, and for a few short months it can seem almost welcoming. It is then that man can see most clearly into this hidden world‚Äînot on land, for the taiga can swallow whole armies of explorers, but from the air. Siberia is the source of most of Russia‚Äôs oil and mineral resources, and, over the years, even its most distant parts have been overflown by oil prospectors and surveyors on their way to backwoods camps where the work of extracting wealth is carried on.</p>

<p>Thus it was in the remote south of the forest in the summer of 1978. A helicopter sent to find a safe spot to land a party of geologists was skimming the tree line 100 or so miles from the Mongolian border when it dropped into the thickly wooded valley of an unnamed tributary of the <a href="http://www.britannica.com/EBchecked/topic/364/Abakan-River">Abakan River</a>, a seething ribbon of water rushing through dangerous terrain. The valley walls were narrow, with sides that were close to vertical in places, and the skinny pine and birch trees swaying in the rotors‚Äô downdraft were so thickly clustered that there was little chance of finding a spot to set the aircraft down.</p>

<figure>
  
    <img src="https://th-thumbnailer.cdn-si-edu.com/xQV8b6gRMOmmZaks2c9h4JUFIvM=/fit-in/1072x0/filters:focal(1936x1309:1937x1310)/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/filer_public/33/f0/33f09488-fa83-493b-9398-d3473a8bb56e/gettyimages-1154193170.jpg" alt="Sayan Mountains" loading="lazy">
  

  <figcaption>
    
      The Lykov family lived in remote regions of the Siberian taiga for more than 40 years‚Äîutterly isolated and more than 150 miles from the nearest human settlement.&nbsp;
    
    
      <span>Amzanyta via Getty Images</span>
    
  </figcaption>
</figure>
<p>However, peering intently through his windscreen in search of a landing place, the pilot saw something that should not have been there. It was a clearing on a mountainside, wedged between the pine and larch and scored with what looked like long, dark furrows. The baffled helicopter crew made several passes before reluctantly concluding that this was evidence of human habitation‚Äîa garden that, from the size and shape of the clearing, must have been there for a long time.</p>

<p>It was an astounding discovery. The mountain was more than 150 miles from the nearest settlement in an area that had never been explored. The Soviet authorities had no records of anyone living in the district.</p>

<p>The four scientists sent into the district to prospect for iron ore were told about the pilots‚Äô sighting, and it perplexed and worried them. ‚ÄúIn the taiga, it‚Äôs less dangerous to run across a wild animal than a stranger,‚Äù as Russian journalist Vasily Peskov wrote in <em><a href="https://www.amazon.com/Lost-Taiga-Fifty-Year-Religious-Wilderness/dp/0385472099">Lost in the Taiga: One Russian Family‚Äôs 50-Year Struggle for Survival and Religious Freedom in the Siberian Wilderness</a></em>. Rather than wait at their own temporary base, ten miles away, the scientists decided to investigate. The group‚Äôs leader, a geologist named Galina Pismenskaya, said they ‚Äúchose a fine day and put gifts in our packs for our potential friends‚Äù‚Äîthough, just to be sure, she recalled, ‚ÄúI did check the pistol that hung at my side.‚Äù</p>

<div>
    <p><a href="http://www.amazon.com/gp/product/0385472099/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0385472099&amp;linkCode=as2&amp;tag=smithsonianco-20&amp;linkId=V5BIMPHAZKVXG4KX" target="_blank">
        <img src="https://th-thumbnailer.cdn-si-edu.com/Jt2ks7KY7MryXtCc-H5cRDket40=/fit-in/300x0/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/embedly/embedly_image_c8b23cddde22dcb0ea8ad675005691312b34a08e.jpg" alt="Preview thumbnail for Lost in the Taiga">
      </a>
    </p>
    <div>
      <h3><a href="http://www.amazon.com/gp/product/0385472099/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0385472099&amp;linkCode=as2&amp;tag=smithsonianco-20&amp;linkId=V5BIMPHAZKVXG4KX" target="_blank">Lost in the Taiga</a></h3>
      <p>A Russian journalist provides a haunting account of the Lykovs, a family of Old Believers, or members of a fundamentalist sect, who in 1932 went to live in the depths of the Siberian Taiga and survived for more than fifty years apart from the modern world.</p>
      </div>
  </div>
<p>As the intruders scrambled up the mountain, heading for the spot pinpointed by their pilots, they began to come across signs of human activity: a rough path, a staff, a log laid across a stream and finally a small shed filled with birch-bark containers of cut-up dried potatoes. Pismenskaya told Peskov:</p>

<blockquote>
<p>Beside a stream there was a dwelling. Blackened by time and rain, the hut was piled up on all sides with taiga rubbish‚Äîbark, poles, planks. If it hadn‚Äôt been for a window the size of my backpack pocket, it would have been hard to believe that people lived there. But they did, no doubt about it. ‚Ä¶ Our arrival had been noticed, as we could see.</p>

<p>The low door creaked, and the figure of a very old man emerged into the light of day, straight out of a fairy tale. Barefoot. Wearing a patched and repatched shirt made of sacking. He wore trousers of the same material, also in patches, and had an uncombed beard. His hair was disheveled. He looked frightened and was very attentive. ‚Ä¶ We had to say something, so I began: ‚ÄúGreetings, grandfather! We‚Äôve come to visit.‚Äù</p>

<p>The old man did not reply immediately. ‚Ä¶ Finally, we heard a soft, uncertain voice: ‚ÄúWell, since you have traveled this far, you might as well come in.‚Äù</p>
</blockquote>

<p>The sight that greeted the geologists as they entered the cabin was like something from the Middle Ages. Jerry-built from whatever materials came to hand, the dwelling was not much more than a burrow‚Äî‚Äúa low, soot-blackened log kennel that was as cold as a cellar,‚Äù with a floor consisting of potato peel and pine-nut shells, wrote Peskov. Looking around in the dim light, the visitors saw that it consisted of a single room. It was cramped, musty and indescribably filthy, propped up by sagging joists‚Äîand, astonishingly, home to a family of five. As Pismenskaya told the author:</p>

<blockquote>
<p>[The] silence was suddenly broken by sobs and lamentations. Only then did we see the silhouettes of two women. One was in hysterics, praying: ‚ÄúThis is for our sins, our sins.‚Äù The other, keeping behind a post ‚Ä¶ sank slowly to the floor. The light from the little window fell on her wide, terrified eyes, and we realized we had to get out of there as quickly as possible.</p>
</blockquote>

<p>Led by Pismenskaya, the scientists backed hurriedly out of the hut and retreated to a spot a few yards away, where they took out some provisions and began to eat. After about half an hour, the door of the cabin creaked open, and the old man and his two daughters emerged‚Äîno longer panicked and, though still obviously frightened, ‚Äúfrankly curious.‚Äù Warily, the three strange figures approached and sat down with their visitors, rejecting everything that they were offered‚Äîjam, tea, bread‚Äîwith a muttered, ‚ÄúWe are not allowed that!‚Äù When Pismenskaya asked, ‚ÄúHave you ever eaten bread?‚Äù the old man answered: ‚ÄúI have. But they have not. They have never seen it.‚Äù At least he was intelligible. The daughters spoke a language distorted by a lifetime of isolation. ‚ÄúWhen the sisters talked to each other, it sounded like a slow, blurred cooing.‚Äù</p>

<figure>
  
    <img src="https://th-thumbnailer.cdn-si-edu.com/jJ6-d97maReHxD5ywHNlV964490=/fit-in/1072x0/filters:focal(1803x2257:1804x2258)/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/filer_public/ee/54/ee545ea4-588d-4734-b3d6-6759c334c839/gettyimages-113635573.jpg" alt="Peter the Great" loading="lazy">
  

  <figcaption>
    
      Peter the Great‚Äôs attempts to modernize the Russia of the early 18th century found a focal point in a campaign to end the wearing of beards‚Äîwhich was anathema to Karp Lykov and the Old Believers.
    
    
      <span>Universal History Archive / Getty Images</span>
    
  </figcaption>
</figure>
<p>Slowly, over several visits, the full story of the family emerged. The old man‚Äôs name was Karp Osipovich Lykov, and he was an <a href="https://www.britannica.com/topic/Old-Believers">Old Believer</a>‚Äîa member of a fundamentalist Russian Orthodox sect, worshiping in a style unchanged since the 17th century. Old Believers had been <a href="http://books.google.co.uk/books?id=fZKbsRzTvLkC&amp;pg=PA27&amp;dq=old+believers+peter+the+great&amp;hl=en&amp;sa=X&amp;ei=08kBUa65LKWc0QW3qYCICA&amp;ved=0CC4Q6AEwADgK#v=onepage&amp;q=old%20believers%20peter%20the%20great&amp;f=false">persecuted</a> since the days of Peter the Great, and Lykov talked about it as though it had happened only yesterday. For him, Peter was a personal enemy and ‚Äúthe Antichrist in human form‚Äù‚Äîa point he insisted had been amply proved by the czar‚Äôs <a href="http://books.google.co.uk/books?id=-Ag2bbYzgacC&amp;pg=PA72&amp;dq=peter+the+great+beard+tax&amp;hl=en&amp;sa=X&amp;ei=ookCUZW8I-eS0QWbtYCYBA&amp;ved=0CDoQ6AEwAg#v=onepage&amp;q=peter%20the%20great%20beard%20tax&amp;f=false">campaign to modernize Russia</a> by forcibly ‚Äú[chopping] off the beards of Christians.‚Äù These centuries-old hatreds were conflated with more recent grievances; Karp was prone to complain in the same breath about a merchant who had refused to make a gift of 26 <em><a href="https://financial-dictionary.thefreedictionary.com/Pood">poods </a></em>of salt to the Old Believers sometime around 1900. As the geologists filled him in on what he‚Äôd missed, he used a similar lens to form opinions about current events:</p>

<blockquote>
<p>The events that had excited the world were unknown here. The Lykovs did not know any famous names and had heard only vaguely about the past war. When in recalling the ‚Äúfirst world war‚Äù with Karp Osipovich the geologists engaged him in conversation about the last one, he shook his head: ‚ÄúWhat is this, a second time, and always the Germans. A curse on Peter. He flirted with them. That is so.‚Äù</p>
</blockquote>

<p>Things had only gotten worse for the Lykov family when the <a href="http://books.google.co.uk/books?id=8jkFD4ZXjd8C&amp;printsec=frontcover&amp;dq=The+Plot+to+Kill+God:+Findings+from+the+Soviet+Experiment+in+Secularization&amp;hl=en&amp;sa=X&amp;ei=k4oCUbmnO4ml0AWT4YCoAg&amp;ved=0CDEQ6AEwAA#v=onepage&amp;q=The%20Plot%20to%20Kill%20God%3A%20Findings%20from%20the%20Soviet%20Experiment%20in%20Secularization&amp;f=false">atheist Bolsheviks</a> took power. Under the Soviets, isolated Old Believer communities that had fled to Siberia to escape persecution began to retreat ever further from civilization. During the purges of the 1930s, with Christianity itself under assault, a Communist patrol had shot Lykov‚Äôs brother on the outskirts of their village while Lykov knelt working beside him. He had responded by scooping up his family and <a href="https://www.vice.com/en/article/meet-the-last-lykov-000001-v20n4/">bolting into the forest</a>.</p>

<figure>
  
    <img src="https://th-thumbnailer.cdn-si-edu.com/jXNSNjDWxVHBkrkaf_HURwdBDc4=/fit-in/1072x0/filters:focal(250x207:251x208)/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/filer/a4/3a/a43a6200-1298-4d0e-8db2-c0753d6e22e7/russian_family_8.jpg" alt="The Lykovs' homestead" loading="lazy">
  

  <figcaption>
    
      The Lykovs' homestead seen from a Soviet reconnaissance plane, 1980
    
    
  </figcaption>
</figure>
<p>That was in 1936, and there were only four Lykovs then‚ÄîKarp; his wife, Akulina; a son named Savin, who was around 9 years old; and Natalia, a daughter who was only 2. Taking their possessions and some seeds, they had retreated ever deeper into the taiga, building themselves a succession of crude dwelling places, until at last they had fetched up in this desolate spot. Two more children had been born in the wild‚ÄîDmitry in 1940 and Agafia in 1944‚Äîand their knowledge of the outside world came entirely from their parents‚Äô stories. The family‚Äôs principal entertainment, Peskov noted, ‚Äúwas for everyone to recount their dreams.‚Äù</p>

<p>The Lykov children knew there were places called cities where humans lived crammed together in tall buildings. They had heard there were countries other than Russia. But such concepts were no more than abstractions to them. Their only reading matter was prayer books and an ancient family Bible. Akulina had taught her children to read and write using sharpened birch sticks dipped into honeysuckle juice as pen and ink. When Agafia was later shown a video of a horse on the geologists‚Äô television set, she recognized it from her mother‚Äôs stories. ‚ÄúA steed!‚Äù she exclaimed. ‚ÄúPapa, a steed!‚Äù</p>

<p>But if the family‚Äôs isolation was hard to grasp, the unmitigated harshness of their lives was not. Traveling to the Lykov homestead on foot was astonishingly arduous, as Peskov would later learn firsthand. On his first visit to the Lykovs in the 1980s, the writer‚Äîwho would appoint himself the family‚Äôs chief chronicler‚Äînoted that ‚Äúwe traversed 250 kilometers [155 miles] without seeing a single human dwelling!‚Äù</p>

<p>Isolation made survival in the wilderness close to impossible. Dependent solely on their own resources, the Lykovs struggled to replace the few things they had brought into the taiga with them. They fashioned birch-bark galoshes in place of shoes. Clothes were patched and repatched until they fell apart, then replaced with hemp cloth grown from seed.</p>

<figure>
  
    <img src="https://th-thumbnailer.cdn-si-edu.com/aAy_FSV7VbXwe16uHJ4lBz11W74=/fit-in/1072x0/filters:focal(250x182:251x183)/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/filer/c7/86/c7861f2d-f328-463b-ac87-c7d39b7eeff5/russian_family_2.jpg" alt="Cabin" loading="lazy">
  

  <figcaption>
    
      The Lykovs lived in this hand-built log cabin, lit by a single window and warmed by a smoky wood-fired stove.
    
    
  </figcaption>
</figure>
<p>The Lykovs had carried a crude spinning wheel and, incredibly, the components of a loom into the taiga with them. A couple of kettles served them well for many years, but when rust finally overcame them, the only replacements they could fashion came from birch bark. Since these could not be placed in a fire, it became far harder to cook. By the time the Lykovs were discovered, their staple diet was potato patties mixed with ground rye and hemp seeds.</p>

<p>In some respects, Peskov wrote, the taiga did offer abundance: ‚ÄúBeside the dwelling ran a cold, clear stream. Stands of larch, spruce, pine and birch yielded all that anyone could take. ‚Ä¶ Bilberries and raspberries were close to hand, firewood as well, and pine nuts fell right on the roof.‚Äù</p>

<p>Yet the Lykovs lived permanently on the edge of famine. It was not until the late 1950s, when Dmitry reached manhood, that they first trapped animals for their meat and skins. Lacking guns or even bows, they could hunt only by digging traps or pursuing prey across the mountains until the animals collapsed from exhaustion. Dmitry built up ‚Äúastonishing endurance‚Äù and could hunt barefoot in winter, sometimes returning to the hut after several days with a young elk across his shoulders. More often than not, though, there was no meat, and their diet gradually became more monotonous. Wild animals destroyed their crop of carrots, and Agafia recalled the late 1950s as ‚Äúthe hungry years‚Äù:</p>

<blockquote>
<p>We ate the rowanberry leaf, roots, grass, mushrooms, potato tops and bark. We were hungry all the time. Every year we held a council to decide whether to eat everything up or leave some for seed.</p>
</blockquote>

<p>Famine was an ever-present danger in these circumstances, and in 1960 it snowed in June. The hard frost killed everything growing in their garden, and by spring the family had been reduced to eating leather shoes, bark and straw. Akulina chose to see her children fed, and in February 1961 she died of starvation.</p>

<p>The rest of the family were saved by what they regarded as a miracle: a single grain of rye sprouted in their pea patch. The Lykovs put up a fence around the shoot and guarded it zealously night and day to keep off mice and squirrels. At harvest time, the solitary spike yielded 18 grains, and from this they painstakingly rebuilt their rye crop.</p>

<figure>
  
    <img src="https://th-thumbnailer.cdn-si-edu.com/GazHUSo5HLHoT3F0r7ZVsacKx3g=/fit-in/1072x0/filters:focal(236x169:237x170)/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/filer/6f/d6/6fd6e023-a7a8-4e70-b57c-ed9c6d8dad2c/russian_family_7.jpg" alt="Lykovs with geologist" loading="lazy">
  

  <figcaption>
    
      A Russian press photo of Karp Lykov (second left) with Dmitry and Agafia, accompanied by a Soviet geologist
    
    
  </figcaption>
</figure>
<p>As the Soviet geologists got to know the Lykov family, they realized that they had underestimated their abilities and intelligence. Old Karp was usually delighted by the latest innovations that the scientists brought up from their camp, and though he steadfastly refused to believe that man had set foot on the moon, he adapted swiftly to the idea of satellites. The Lykovs had noticed them as early as the 1950s, when ‚Äúthe stars began to go quickly across the sky,‚Äù and Karp himself conceived a theory to explain this: ‚ÄúPeople have thought up something and are sending out fires that are very like stars.‚Äù</p>

<p>‚ÄúWhat amazed him most of all,‚Äù Peskov recorded, ‚Äúwas a transparent cellophane package. ‚ÄòLord, what have they thought up‚Äîit is glass, but it crumples!‚Äô‚Äù Even at the end of his life, when he was in his 80s, Karp held grimly to his status as head of the family. His eldest child, Savin, dealt with this by casting himself as the family‚Äôs unbending arbiter in matters of religion. ‚ÄúSavin was strong in his faith, but he was a harsh man,‚Äù his own father said of him, and Karp seems to have worried about what would happen to his family after he died if Savin took control. Certainly the eldest son would have encountered little resistance from Natalia, who always struggled to replace her mother as cook, seamstress and nurse.</p>

<p>The two younger children, on the other hand, were more open to change and innovation. ‚ÄúFanaticism was not terribly marked in Agafia,‚Äù Peskov wrote, and in time he came to realize that the youngest of the Lykovs ‚Äúhad a sense of humor and irony and knew how to poke fun at herself.‚Äù Agafia‚Äôs unusual speech‚Äîshe had a singsong voice and stretched simple words into polysyllables‚Äîconvinced some of her visitors she was slow-witted. On the contrary, she was markedly intelligent, helping Savin with the difficult task, in a family that possessed no calendars, of keeping track of time. She thought nothing of hard work, either, excavating a new cellar by hand late in the fall and working on by moonlight when the sun had set. Asked by an astonished Peskov whether she was not frightened to be out alone in the wilderness after dark, she replied: ‚ÄúWhat is there to be afraid of?‚Äù</p><figure>
    <div data-type="video">
    <p>Surviving in the Siberian Wilderness for 70 Years (Full Length)</p>
    
    <p><img src="https://i.ytimg.com/vi/tt2AYafET68/maxresdefault.jpg" data-video-id="tt2AYafET68"></p>
  </div>
    
</figure>
<p>Of all the Lykovs, though, the geologists‚Äô favorite was Dmitry, a consummate outdoorsman who knew all of the taiga‚Äôs moods. He was the most curious and perhaps the most forward-looking member of the family. It was he who had built the family stove, and all the birch-bark buckets that they used to store food. Perhaps it was no surprise that he was also the most enraptured by the scientists‚Äô technology. Once relations had improved to the point that the Lykovs could be persuaded to visit the Soviets‚Äô camp, downstream, he spent many happy hours in its little sawmill, marveling at how easily a circular saw and lathes could finish wood. ‚ÄúIt‚Äôs not hard to figure,‚Äù Peskov wrote. ‚ÄúThe log that took Dmitry a day or two to plane was transformed into handsome, even boards before his very eyes. Dmitry felt the boards with his palm and said: ‚ÄòFine!‚Äô‚Äù</p>

<p>Karp Lykov fought a long and losing battle with himself to keep all this modernity at bay. When they first got to know the geologists, the family would accept only a single gift‚Äîsalt. (Living without it for four decades, Karp said, had been ‚Äútrue torture.‚Äù) Over time, however, they began to take more. They welcomed the assistance of their special friend among the geologists‚Äîa driller named Yerofei Sedov, who spent much of his spare time helping them to plant and harvest crops. They eventually accepted blankets, wool socks, grain and even a flashlight. Once, when Agafia was asked why she would use a battery-powered flashlight when she wouldn‚Äôt accept matches, she ‚Äúdidn‚Äôt know how to respond,‚Äù wrote Peskov. ‚ÄúShe only confirmed that matches were indeed a sinful thing.‚Äù Meanwhile, the sin of television, which the family encountered at the geologists‚Äô camp, ‚Äúproved irresistible for them‚Äù:</p>

<blockquote>
<p>On their rare appearances in camp, they would invariably sit down and watch. Karp Osipovich sat directly in front of the screen. Agafia watched, poking her head out from behind a door. She tried to pray away her transgression immediately‚Äîwhispering, crossing herself‚Äîand once again stuck her head out. The old man prayed afterward, diligently and in one fell swoop.</p>
</blockquote>

<p>Perhaps the saddest aspect of the Lykovs‚Äô strange story is the rapidity with which the family went into decline after they re-established contact with the outside world. In the fall of 1981, three of the four children followed their mother to the grave. According to Peskov, their deaths were not, as some have <a href="https://www.vice.com/en/article/meet-the-last-lykov-000001-v20n4/">speculated</a>, the result of exposure to diseases to which they had no immunity. Both Savin and Natalia suffered from kidney failure, most likely a result of their harsh diet. But Dmitry died of pneumonia, which might have begun as an infection he acquired from his new friends.</p>

<figure>
  
    <img src="https://th-thumbnailer.cdn-si-edu.com/sUKgPcA_rvPwURa-Ht9or-e1v58=/fit-in/1072x0/filters:focal(246x212:247x213)/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/filer/2b/c4/2bc48668-d13a-40b0-b577-a4bf2200ad5b/russian_family_9.jpg" alt="The Lykovs' graves" loading="lazy">
  

  <figcaption>
    
      The Lykovs' graves. Today, Agafia is the only surviving member of the family of six.
    
    
  </figcaption>
</figure>
<p>His death shook the geologists, who tried desperately to save him. They offered to call in a helicopter and have him evacuated to a hospital. But Dmitry, in extremis, would abandon neither his family nor the religion he had practiced all his life. ‚ÄúWe are not allowed that,‚Äù he whispered just before he died. ‚ÄúA man lives for howsoever long God grants.‚Äù</p>

<p>When all three Lykovs had been buried, the geologists attempted to talk Karp and Agafia into leaving the forest and returning to be with relatives who had survived the persecutions of the purge years, and who still lived on in the same old villages. But neither of the survivors would hear of it.</p>

<p>Agafia did accept one invitation around this time. The Soviet government offered to take her on tour across the country, and she agreed to go. Her father stayed behind, but she spent a month on the road, soaking up everything she had missed. When the trip ended, she returned to her old life. ‚ÄúIt‚Äôs scary out there,‚Äù Agafia told <a href="https://www.vice.com/en/article/meet-the-last-lykov-000001-v20n4/"><em>Vice</em></a> in 2013. ‚ÄúYou can‚Äôt breathe. There are cars everywhere. There is no clean air. Each car that passes by leaves so many toxins in the air. You have no other option but to stay at home.‚Äù</p>

<p>Soon after Agafia‚Äôs sojourn, Karp Lykov died in his sleep on February 16, 1988, 27 years to the day after his wife, Akulina. Agafia buried him on the mountain slopes with the help of the geologists, then turned and headed back to her home. The Lord would provide, and <a href="https://stranniki.blogspot.com/2009/02/how-to-live-substantively-in-our-times.html">she would stay</a>, she said‚Äîas indeed she did. ‚ÄúThe taiga reclaimed her,‚Äù author Isabel Colegate wrote in <em><a href="https://www.amazon.com/Pelican-Wilderness-Hermits-Solitaries-Recluses/dp/158243591X">A Pelican in the Wilderness: Hermits, Solitaries and Recluses</a></em>. ‚ÄúShe felt it was her home.‚Äù</p>

<figure>
  
    <img src="https://th-thumbnailer.cdn-si-edu.com/Hw8HhRXpXkiYQ6Eh-9FumwQG3aE=/fit-in/1072x0/filters:focal(1280x963:1281x964)/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/filer_public/05/78/057865c3-53b1-48bf-adc4-49450e717869/ap792731058301.jpg" alt="Agafia Lykova in 2016" loading="lazy">
  

  <figcaption>
    
      Agafia Lykova receiving medical care in 2016. She continued to live in remote locations after her father‚Äôs death, though she has traveled on rare occasions.&nbsp;
    
    
      <span>Yekaterina Romanova / Komsomolskaya Pravda via AP</span>
    
  </figcaption>
</figure>
<p>More than 30 years later, this child of the taiga lives on in the wilderness. However, as her health has declined‚Äîshe turned 80 earlier this year‚Äîshe has started <a href="https://www.thetimes.com/uk/politics/article/agafia-the-soviet-peasant-queen-of-putins-russia-finds-an-oligarch-for-a-friend-bd0w0xhhp">accepting more help</a>. Lately, much of that help comes from the Russian billionaire <a href="https://www.forbes.com/profile/oleg-deripaska/">Oleg Deripaska</a>, who paid for a new wooden cottage to be built for her several years ago. She also acquired a satellite telephone, which she uses daily, and volunteers frequently travel to her isolated home to deliver supplies and help her manage daily affairs, particularly during the cold winters.</p>

<p>Agafia will not leave. But we must leave her, seen through the eyes of Sedov on the day of her father‚Äôs funeral:</p>

<blockquote>
<p>I looked back to wave to Agafia. She was standing by the river break like a statue. She wasn‚Äôt crying. She nodded: ‚ÄúGo on, go on.‚Äù We went another kilometer and I looked back. She was still standing there.</p>
</blockquote>

      
        
  <div>
      <p>Get the latest <strong>History</strong> stories in your inbox?</p>
      
    </div>


      

      
      

      
        


  
    
      
    
  
    
      
    
  

  


      

      
      

      
        
          <section>
            <nav>Filed Under:
              
                
                  <a href="https://www.smithsonianmag.com/tag/forests/">Forests</a>, 
                
              
                
                  <a href="https://www.smithsonianmag.com/tag/geology/">Geology</a>, 
                
              
                
                  <a href="https://www.smithsonianmag.com/tag/history/">History</a>, 
                
              
                
                  <a href="https://www.smithsonianmag.com/tag/nature/">Nature</a>, 
                
              
                
                  <a href="https://www.smithsonianmag.com/tag/religion/">Religion</a>, 
                
              
                
                  <a href="https://www.smithsonianmag.com/tag/russia/">Russia </a>, 
                
              
                
              
                
                  <a href="https://www.smithsonianmag.com/tag/world-war-ii/">World War II</a>
                
              
            </nav>
          </section>
        
      

    </div>

    

  </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Voice acting in Space Quest V (105 pts)]]></title>
            <link>https://github.com/cdb-boop/Space-Quest-V-Voice-Acting-Mod</link>
            <guid>42119141</guid>
            <pubDate>Tue, 12 Nov 2024 20:07:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/cdb-boop/Space-Quest-V-Voice-Acting-Mod">https://github.com/cdb-boop/Space-Quest-V-Voice-Acting-Mod</a>, See on <a href="https://news.ycombinator.com/item?id=42119141">Hacker News</a></p>
Couldn't get https://github.com/cdb-boop/Space-Quest-V-Voice-Acting-Mod: Error: Request failed with status code 404]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Jelly ‚Äì A simpler shared inbox for small teams (308 pts)]]></title>
            <link>https://letsjelly.com/</link>
            <guid>42119042</guid>
            <pubDate>Tue, 12 Nov 2024 19:55:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://letsjelly.com/">https://letsjelly.com/</a>, See on <a href="https://news.ycombinator.com/item?id=42119042">Hacker News</a></p>
<div id="readability-page-1" class="page">
    
    

    <main>
      
      


<div id="why-jelly">
    <p>Small teams with shared email addresses (i.e. hello@ or support@) have been stuck between a rock and a hard place for far too long.</p>

    <p>Sharing a login to an inbox requires a delicate dance to avoid stepping on toes and missing important replies. When that inevitably breaks down, the search for tools leads you through a swamp of overpriced help-desk tools with overcomplicated features built for much, much larger teams.</p>

    <p>Whether you‚Äôre doing customer support, dealing with clients, managing your community, or something else entirely, we believe your team deserves better. That‚Äôs why we built <strong>Jelly</strong>.</p>

    <p><strong>Jelly</strong> is our take on a shared inbox. It‚Äôs just email, with a few handy features built for <em>teams</em>:</p>

    <ul>
      <li>Everyone on your team has their own login and can take point on an email. It‚Äôs as simple as saying ‚ÄúI‚Äôve got this.‚Äù Always see who-has-what at a glance and say goodbye to stepping on each other‚Äôs toes!</li>
      
      <li>Everyone can easily keep track of all communications across the team with a robust notification system and activity log. No more losing conversations in someone else‚Äôs inbox!</li>
    </ul>

    <p><mark><strong>Jelly</strong> has been a real game-changer for our team, and we‚Äôre confident it will be for yours too.</mark></p>

    <p>Oh, and did we mention it‚Äôs <em>affordable</em>? There are plenty of shared inboxes out there, but they‚Äôre incredibly expensive and bloated with features that small teams don‚Äôt need. How expensive? Try $20+ per user per month. That‚Äôs over $240 a year just for one user‚Äîin this economy!?</p>

    <p><strong>Jelly</strong> charges a reasonable flat fee per account, so you can bring your whole team without having to worry about seat limits. Even our plan table is simple and straight-forward:</p>
  </div>

<div data-controller="pricing" id="pricing">
      <div>
        <header>
          
          <span>Everything most teams need</span>
        </header>
        <ul>
          <li>
            <i></i>
            <strong>Unlimited</strong> team members
          </li>
          <li>
            <i></i>
            <strong>Unlimited</strong> conversations
          </li>
          <li>
            <i></i>
            Up to 3 shared email addresses
          </li>
          <li>
            <i></i>
            Real human support
          </li>
        </ul>
        
        
        <p><a href="https://app.letsjelly.com/signup">
          Try for free
          <i></i>
</a>      </p></div>

      <div>
        <p>Limited time intro pricing!</p>
        <header>
          <div>
            <h2>Royal Jelly üëë</h2>
            
          </div>
          <span>Extra features for teams that need more</span>
        </header>
        <ul>
          <li>
            <i></i>
            <strong>Unlimited</strong> team members
          </li>
          <li>
            <i></i>
            <strong>Unlimited</strong> conversations
          </li>
          <li>
            <i></i>
            <strong>Unlimited</strong> shared email addresses
          </li>
          <li>
            <i></i>
            Real human support
          </li>
          <li>
            <i></i>
            Slack integration
          </li>
          <li>
            <p><span>Coming soon</span></p>
            Enhanced contacts
          </li>
          <li>
            <p><span>Coming soon</span></p>
            Stats &amp; reporting
          </li>
          <li>
            <p><span>Coming soon</span></p>
            Sync sent mail
          </li>
          <li>
            <p><span>Coming soon</span></p>
            ...and more planned!
          </li>
        </ul>
        
        
        <p><a href="https://app.letsjelly.com/signup">
          Try for free
          <i></i>
</a>      </p></div>
    </div>

<div id="why-jelly">
    <p>It might sound cliche, but we‚Äôre being honest when we say that <strong>Jelly</strong> is built for small teams by a small team. We are <a target="_blank" href="https://www.goodenough.us/?utm_source=jelly&amp;utm_medium=jelly_homepage">Good Enough</a>, a team of six decent people who just wanted a decent way to do email together.</p>

    <p>
      We‚Äôve made some other decent apps we think are good enough too, like
      <a target="_blank" href="https://albumwhale.com/?utm_source=jelly&amp;utm_medium=jelly_homepage">Album Whale</a>,
      <a target="_blank" href="https://letterbird.co/?utm_source=jelly&amp;utm_medium=jelly_homepage">Letterbird</a>,
      <a target="_blank" href="https://pika.page/?utm_source=jelly&amp;utm_medium=jelly_homepage">Pika</a>, and
      <a target="_blank" href="https://yay.boo/?utm_source=jelly&amp;utm_medium=jelly_homepage">Yay.Boo!</a>
    </p>

    <p>
      If you‚Äôd like to get in touch, we‚Äôd love to hear from you. <a target="_blank" href="https://letterbird.co/jelly">Email us</a>, or
      find us on <a href="https://mastodon.world/@goodenoughllc" target="_blank">Mastodon</a>,
      <a href="https://www.threads.net/@good.enough.llc" target="_blank">Threads</a>, or
      <s>Twitter</s> <a href="https://twitter.com/goodenoughllc" target="_blank">X</a>.
      (Gosh, can we all just agree on one social media network already?)
    </p>

    </div>

    </main>
    

    
  

</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mom jailed for letting 10-year-old walk alone to town (208 pts)]]></title>
            <link>https://reason.com/2024/11/11/mom-jailed-for-letting-10-year-old-walk-alone-to-town/</link>
            <guid>42118970</guid>
            <pubDate>Tue, 12 Nov 2024 19:48:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://reason.com/2024/11/11/mom-jailed-for-letting-10-year-old-walk-alone-to-town/">https://reason.com/2024/11/11/mom-jailed-for-letting-10-year-old-walk-alone-to-town/</a>, See on <a href="https://news.ycombinator.com/item?id=42118970">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
							<p>It was dinnertime on October 30, 2024, when police handcuffed Brittany Patterson in front of three of her four children and drove her to the station in Fannin County, Georgia. She was then fingerprinted, photographed, and dressed in an orange jumpsuit.</p> <p>Hours earlier, around noon, Patterson had driven her eldest son to a medical appointment. Her youngest son, 11-year-old Soren, intended to come along but wasn't around when it was time to leave.</p> <p>"I figured he was in the woods, or at grandma's house," says Patterson, who lives on 16 acres with her kids and her father. (Her husband works out of state). There is no shortage of family in the vicinity. Patterson's mother and sisters live just two minutes away.</p> <p>Soren, however, was not playing in the woods. He had decided to walk to downtown Mineral Bluff, a town of just 370 people. It's not quite a mile from his house. A woman who saw him walking alongside the road‚Äîspeed limit: 25 in some places, 35 in others‚Äîasked him if he was OK. He said yes.</p> <p>Nevertheless, she called the police.</p> <p>A female sheriff picked up the boy and called Patterson. "She asked me if I knew he was downtown and I said no," says Patterson.</p> <p>Patterson was upset that Soren had gone to town without letting anyone know, but says there was hardly reason to worry.</p> <p>"I was not panicking as I know the roads and know he is mature enough to walk there without incident," she says.</p> <p>The sheriff disagreed.</p> <p>"She kept mentioning how he could have been run over, or kidnapped or 'anything' could have happened," recalls Patterson.</p> <p>The sheriff drove Soren home and left him with his grandfather. After returning to the house, Patterson scolded her son‚Äîand that, she thought, was that.</p> <p>But at 6:30 p.m. that night, the sheriff returned with another officer. They told Patterson to turn around and put her hands behind her back. As three of her kids watched, Patterson was handcuffed. The sheriff took her purse and phone, put her in the cruiser, and hauled her off to jail.</p> <p>To Patterson, none of this made sense. She had grown up in the area with plenty of unsupervised time to wander and play and was raising her kids that way, too.</p> <p>"The mentality here is more Free-Range," she says.</p> <p>Patterson was soon released on a $500 bail. The next day, a case manager from the Division of Family and Children Services (DFCS) came out for a home visit, and even went to interview Patterson's oldest son at his school. The case manager told Patterson that everything seemed fine, but declined to comment to&nbsp;<em>Reason.</em></p> <p>A few days later, DFCS presented Patterson with a "safety plan" for her to sign. It would require her to delegate a "safety person" to be a "knowing participant and guardian" and watch over the children whenever she leaves home. The plan would also require Patterson to download an app onto her son's phone allowing for his location to be monitored. (The day when it will be illegal <em>not </em>to track one's kids is rapidly approaching.)</p> <p>Patterson did not want to be compelled to track her son. Recalling <a href="https://reason.com/2022/02/08/melissa-henderson-babysit-covid-arrest-blairsville/" target="_blank" rel="nofollow noopener" data-saferedirecturl="https://www.google.com/url?q=https://reason.com/2022/02/08/melissa-henderson-babysit-covid-arrest-blairsville/&amp;source=gmail&amp;ust=1731429996083000&amp;usg=AOvVaw0uzP0i7GRjdBZYR4CSUa5A">a similar case</a>, she contacted attorney David DeLugas. DeLugas is the head of <a href="https://urldefense.proofpoint.com/v2/url?u=https-3A__parentsusa.org_&amp;d=DwMFaQ&amp;c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&amp;r=AhsXuq61LSf9ONOz2FqVCWNi_6wlXzjX7EkJk9i4a_M&amp;m=uGEjrCTYW0kC3XPjlZTDSnHAlmwgqqqehpLIb1H6ER4yldng9J9kwNCirDnhMg67&amp;s=1DHhL3QqSmE0g1NOy-dcq9GymTkkx9R7gbqUWGhjy5E&amp;e=" target="_blank" rel="nofollow noopener" data-saferedirecturl="https://www.google.com/url?q=https://urldefense.proofpoint.com/v2/url?u%3Dhttps-3A__parentsusa.org_%26d%3DDwMFaQ%26c%3DeuGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM%26r%3DAhsXuq61LSf9ONOz2FqVCWNi_6wlXzjX7EkJk9i4a_M%26m%3DuGEjrCTYW0kC3XPjlZTDSnHAlmwgqqqehpLIb1H6ER4yldng9J9kwNCirDnhMg67%26s%3D1DHhL3QqSmE0g1NOy-dcq9GymTkkx9R7gbqUWGhjy5E%26e%3D&amp;source=gmail&amp;ust=1731429996083000&amp;usg=AOvVaw0GuAUUqYOk0Gm0ouAhKW7H">ParentsUSA,</a>&nbsp;a nonprofit that&nbsp;often&nbsp;provides pro bono legal help to parents wrongly arrested and prosecuted for child neglect. A&nbsp;<a href="https://www.gofundme.com/f/support-parentsusas-fight-for-brits-parental-rights?attribution_id=sl:1363500d-cb3c-4d79-997a-0c5ca2fad915&amp;utm_campaign=man_sharesheet_ft&amp;utm_medium=customer&amp;utm_source=copy_link" target="_blank" rel="nofollow noopener" data-saferedirecturl="https://www.google.com/url?q=https://www.gofundme.com/f/support-parentsusas-fight-for-brits-parental-rights?attribution_id%3Dsl:1363500d-cb3c-4d79-997a-0c5ca2fad915%26utm_campaign%3Dman_sharesheet_ft%26utm_medium%3Dcustomer%26utm_source%3Dcopy_link&amp;source=gmail&amp;ust=1731429996083000&amp;usg=AOvVaw10jJyPh0D-pBo9Jm2gwY1B">GoFundMe</a> has been established to help ParentsUSA cover the Pattersons' legal expenses.</p> <p>As Patterson's counsel, DeLugas called the assistant district attorney (ADA) to discuss the case. He recorded the conversation, which is legal in Georgia. The ADA told DeLugas that if Patterson would sign the safety plan, the criminal charges would be dropped.</p> <p>DeLugas responded that if Patterson had to sign a safety plan simply because her son walked someplace without her knowing his exact location, it would stop him from visiting friends or having any independence whatsoever. But the ADA maintained that Soren had been in danger, and thus a safety plan was necessary.</p> <p>The matter was left unsettled.</p> <p>With safety plans, the veiled threat is that if you don't sign, your children could be taken away, says DeLugas. In this case, he says, the unspoken deal seems to be: Sign it and the state won't prosecute. If the state&nbsp;<em>does&nbsp;</em>prosecute, Patterson could face a reckless conduct charge, a $1,000 fine, and a year in jail.</p> <p>DeLugas would like to see Georgia pass a law that permits the authorities to check up on kids and then leave them be as long as they aren't hurt, in distress, or in actual, immediate danger from an identifiable source. Meanwhile, as if this case could not get weirder, DCFS just mailed Soren a birthday card signed by the case manager. Soren turned 11 over the weekend.</p> <p>Birthday greetings do not change the facts. Patterson knows that refusing to sign the safety plan could get her in trouble. But she is resolute.</p> <p>"I will not sign," she says.</p>						</div></div>]]></description>
        </item>
    </channel>
</rss>