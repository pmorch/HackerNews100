<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Tue, 29 Aug 2023 18:00:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Whistleblower alleges Booz Allen was overcharging U.S. taxpayers for losses (145 pts)]]></title>
            <link>https://www.nbcnews.com/news/investigations/marine-sarah-feinberg-whistleblower-booz-allen-69-million-rcna102098</link>
            <guid>37307788</guid>
            <pubDate>Tue, 29 Aug 2023 13:41:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nbcnews.com/news/investigations/marine-sarah-feinberg-whistleblower-booz-allen-69-million-rcna102098">https://www.nbcnews.com/news/investigations/marine-sarah-feinberg-whistleblower-booz-allen-69-million-rcna102098</a>, See on <a href="https://news.ycombinator.com/item?id=37307788">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>According to the suit, the company allowed her to take leave to earn her MBA, and when she returned, put her on a team under the company’s chief financial officer, tasked with examining how to better track and analyze financial data.</p><p>She soon found something that gave her pause. Although the vast majority of its consulting clients were government agencies, Booz Allen had tried to build a business consulting for private and international clients, <a href="https://investors.boozallen.com/news-releases/news-release-details/booz-allen-hamilton-signs-us-232m-contract-support-royal-saudi#:~:text=Aug%2005%2C%202012-,Booz%20Allen%20Hamilton%20signs%20U.S.%20%2423.2M,support%20Royal%20Saudi%20Navy%20Forces">including</a> the government of Saudi Arabia.</p><p>“I discovered that our commercial and international practices were very unprofitable,” she said. “And in order to keep the company profitable, they were passing those costs onto the U.S. government contracts.”</p><p>Feinberg at first thought it might have been an oversight.</p><p>“I was very naïve at the time, and I thought that the reason people do the wrong thing is because they don’t know that something is happening, or they don’t know what the right thing is. So I went and I talked to the head of finance, and presented what I had found, and asked if he was aware of it.”</p><p>According to the lawsuit, that was <a href="https://www.linkedin.com/in/warren-kohm-52557a8/">Warren Kohm</a>, now the chief financial officer at another company. He did not respond to a request for comment.</p><p>Kohm closed the door to his office, beckoned Feinberg to have a seat, and made clear he knew exactly what she was talking about, the lawsuit alleges.</p><p>The suit says he called it a “gray zone,” but added that Defense Department auditors are “too stupid” to figure it out and demand repayment.</p><p>At that moment, Feinberg told NBC News, “I realized that this was a very intentional setup. And it wasn’t just that there was the potential to overcharge the government; the rates were built to overcharge the government. If we should have been charging $100 to the government for an hour of work, we were charging $120 for that hour of work, so that that $20 could go to subsidize the international business.”</p><figure><picture><source media="(min-width: 1240px)" srcset="https://media-cldnry.s-nbcnews.com/image/upload/t_fit-360w,f_auto,q_auto:eco,dpr_2.0/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg 2x, https://media-cldnry.s-nbcnews.com/image/upload/t_fit-360w,f_auto,q_auto:best/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg 1x"><source media="(min-width: 1000px)" srcset="https://media-cldnry.s-nbcnews.com/image/upload/t_fit-320w,f_auto,q_auto:eco,dpr_2.0/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg 2x, https://media-cldnry.s-nbcnews.com/image/upload/t_fit-320w,f_auto,q_auto:best/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg 1x"><source media="(min-width: 758px)" srcset="https://media-cldnry.s-nbcnews.com/image/upload/t_fit-560w,f_auto,q_auto:eco,dpr_2.0/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg 2x, https://media-cldnry.s-nbcnews.com/image/upload/t_fit-560w,f_auto,q_auto:best/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg 1x"><source srcset="https://media-cldnry.s-nbcnews.com/image/upload/t_fit-760w,f_auto,q_auto:eco,dpr_2.0/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg 2x, https://media-cldnry.s-nbcnews.com/image/upload/t_fit-760w,f_auto,q_auto:best/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg 1x"><img loading="lazy" src="https://media-cldnry.s-nbcnews.com/image/upload/t_fit-760w,f_auto,q_auto:best/rockcms/2023-08/230828-Sarah-Feinberg-al-1157-fd7a56.jpg" alt="Sarah Feinberg, right, with her family on Halloween in 2018.

" height="960" width="720"></picture><figcaption><span data-testid="caption__container">Sarah Feinberg, right, with her family on Halloween in 2018.

</span><span>Courtesy Feinberg family</span></figcaption></figure><p>Feinberg then began a nine-month campaign to convince her bosses to put a stop to a practice that she argues in her lawsuit she was instructed to call something other than fraud.</p><p>“So in our private conversations, I was presenting this as fraud — something that the government will catch and we’ll be penalized for it.” But, she said, “I was told to call it a compliance risk.”</p><p>Feinberg said the situation made her "very upset as a taxpayer. It made me very upset as a Marine officer. I saw how limited our resources were. And&nbsp;the&nbsp;idea that Booz was overcharging the U.S. Marine Corps for things that could be related to international contracts was absurd.”</p><p>After dozens of meetings and phone calls, she attended a meeting in the Washington, D.C., office of the company’s chief financial officer, Lloyd Howell, who is now <a href="https://nflpa.com/posts/trust-the-process-how-we-elected-lloyd-howell-as-our-new-nflpa-executive-director">director</a> of the NFL Players Association. He did not respond to a request for comment.</p><p>She planned for the meeting as a final push to get the company to stop allegedly bilking U.S. taxpayers to subsidize its money-losing private contracts. But she said that what had been a 90-minute meeting was shortened to an hour. At the outset, Howell announced that he only had 30 minutes.</p><p>Of the eight people present, she said “they were mostly older men. There were, I think, two women in the meeting. And I was definitely the youngest person in the room.”</p><p>Feinberg said she began her presentation, but Howell soon cut her off.</p><p>She quoted him as saying, “I appreciate the work that you’ve done on this … But we are not going to make it a priority.”</p><p>She was devastated.</p><p>“I walked out of that meeting. And I called my husband right afterwards and told him I was quitting my job,” she said.</p><p>In her resignation letter, she warned that Booz Allen was engaged in “risky subsidization of failing businesses.”</p><p>Feinberg said she feels relatively lucky, as <a href="https://www.nbcnews.com/politics/national-security/whistleblower-white-house-security-clearance-office-gets-suspended-n964826" target="_blank">whistleblowers</a> go. After quitting Booz Allen, she left the defense consulting business for a series of lower-paying finance jobs at media organizations. But she said she was never threatened or made to suffer for her efforts to flag alleged misconduct at a Fortune 500 company.</p><p>After she resigned, she said, two company lawyers instructed her to turn over or destroy the documents she had prepared describing the accounting scheme that allegedly defrauded the government.</p><p>She ignored them, and instead got her own lawyer — William Pittard of KaiserDillon.</p><p>Despite the tens of millions of dollars at her disposal, Feinberg said she doesn’t envision her life changing all that much. A runner with an affection for caffeinated energy drinks, she aims to stay in her tidy, older Northern Virginia home with her husband, Evan, who runs an anti-poverty nonprofit organization. They say their young children will remain in the public schools they love.</p><p>There are plans for a lake house and a trip to Italy.</p><p>But, she said, “I’m going to give a lot of it to charity, and to causes I believe in.”</p><p>As for Booz Allen, “I wish they had listened to me. It would have saved them a lot of pain.”</p></div><div><div data-activity-map="expanded-byline-article-bottom"><div><a href="https://www.nbcnews.com/author/ken-dilanian-ncpn490496"><picture><source srcset="https://media-cldnry.s-nbcnews.com/image/upload/t_focal-60x60,f_auto,q_auto:eco,dpr_2.0/newscms/2021_05/3447658/dilanianmug.jpg 2x, https://media-cldnry.s-nbcnews.com/image/upload/t_focal-60x60,f_auto,q_auto:best/newscms/2021_05/3447658/dilanianmug.jpg 1x"><img loading="lazy" src="https://media-cldnry.s-nbcnews.com/image/upload/t_focal-60x60,f_auto,q_auto:best/newscms/2021_05/3447658/dilanianmug.jpg" alt="" height="48" width="48"></picture></a></div><p><span><a href="https://www.nbcnews.com/author/ken-dilanian-ncpn490496">Ken Dilanian</a></span><span><a href="https://twitter.com/KenDilanianNBC" target="_blank" rel="noopener noreferrer"><span></span></a><a href="mailto:Ken.Dilanian@NBCUni.com" target="_blank" rel="noopener noreferrer"><span></span></a></span></p><p>Ken Dilanian is the justice and intelligence correspondent for NBC News, based in Washington.</p></div><div data-activity-map="expanded-byline-article-bottom"><p><span></span><span><a href="https://www.nbcnews.com/author/laura-strickler-ncpn894696">Laura Strickler</a></span><span><a href="https://twitter.com/strickdc" target="_blank" rel="noopener noreferrer"><span></span></a><a href="mailto:Laura.Strickler@nbcuni.com" target="_blank" rel="noopener noreferrer"><span></span></a></span></p><p>Laura Strickler is a senior investigative producer and reporter for NBC News. She is based in Washington.</p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Keystroke timing obfuscation added to ssh(1) (289 pts)]]></title>
            <link>https://undeadly.org/cgi?action=article;sid=20230829051257</link>
            <guid>37307708</guid>
            <pubDate>Tue, 29 Aug 2023 13:36:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://undeadly.org/cgi?action=article;sid=20230829051257">https://undeadly.org/cgi?action=article;sid=20230829051257</a>, See on <a href="https://news.ycombinator.com/item?id=37307708">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p>Contributed by
<a href="https://www.johnsnowproject.org/">rueda</a>
on <time datetime="2023-08-28T12:58:11Z">2023-08-28</time>
from the sigint-- dept.</p>
<p>Damien Miller (<code>djm@</code>) has
<a href="https://marc.info/?l=openbsd-cvs&amp;m=169319335902218&amp;w=2">committed</a>
support for keystroke timing obfuscation to
<a href="https://man.openbsd.org/ssh.1"><code>ssh(1)</code></a>:</p>
<blockquote>
<pre>CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2023/08/27 21:31:16

Modified files:
	usr.bin/ssh    : clientloop.c misc.c misc.h packet.c packet.h 
	                 readconf.c readconf.h ssh_config.5 

Log message:
Add keystroke timing obfuscation to the client.

This attempts to hide inter-keystroke timings by sending interactive
traffic at fixed intervals (default: every 20<abbr>ms</abbr>) when there is only a
small amount of data being sent. It also sends fake "chaff" keystrokes
for a random interval after the last real keystroke. These are
controlled by a new <a href="https://man.openbsd.org/ssh_config.5#ObscureKeystrokeTiming">ssh_config ObscureKeystrokeTiming</a> keyword/

feedback/ok markus@
</pre>
</blockquote>


<p>This utilises a pair of
<a href="https://marc.info/?l=openbsd-cvs&amp;m=169319321102174&amp;w=2">new</a>
extensions
to the
<abbr title="secure shell">SSH</abbr>
<a href="https://cvsweb.openbsd.org/src/usr.bin/ssh/PROTOCOL?rev=1.49&amp;content-type=text/x-cvsweb-markup">protocol</a>:</p>
<blockquote>
<pre>CVSROOT:	/cvs
Module name:	src
Changes by:	djm@cvs.openbsd.org	2023/08/27 21:28:43

Modified files:
	usr.bin/ssh    : PROTOCOL kex.c kex.h packet.c ssh2.h 

Log message:
Introduce a transport-level ping facility

This adds a pair of SSH transport protocol messages SSH2_MSG_PING/PONG
to implement a ping capability. These messages use numbers in the "local
extensions" number space and are advertised using a "ping@openssh.com"
ext-info message with a string version number of "0".

ok markus@
</pre>
</blockquote>

<p>Yet another fine example of <em>security by trickery</em>, and one more reason to look forward to the next <a href="https://www.openbsd.org/">OpenBSD</a> release. Other systems will likely see this soon after via
<a href="https://www.openssh.com/portable.html">openssh-portable</a>.</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Analysis of Obfuscation Techniques Found in Apple FairPlay (108 pts)]]></title>
            <link>https://nicolo.dev/en/blog/fairplay-apple-obfuscation/</link>
            <guid>37307653</guid>
            <pubDate>Tue, 29 Aug 2023 13:32:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://nicolo.dev/en/blog/fairplay-apple-obfuscation/">https://nicolo.dev/en/blog/fairplay-apple-obfuscation/</a>, See on <a href="https://news.ycombinator.com/item?id=37307653">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><header><nav><h2><a href="https://nicolo.dev/">nicolo.dev</a></h2><ul><li><a href="https://nicolo.dev/en/about/">About me</a></li><li><a href="https://nicolo.dev/en/projects/">Projects</a></li><li><a href="https://nicolo.dev/blog/fairplay-apple-offuscamento/" title="it version">IT</a></li></ul></nav></header><p><span>August 28, 2023</span> – 38 min – 8082 words</p><p><strong>FairPlay</strong> comprises a set of algorithms created by Apple for digital rights management (also called DRM, <em>digital rights management</em>). FairPlay is currently used to manage the decryption of iOS applications during their installation on Apple devices. In fact, we know that Apple distributes all applications in the Apple Store through the IPA file format. The IPA file format contains encrypted information that will then be used by the operating system to install an application. All of the encrypted information is handled through FairPlay, which takes care of keeping the decryption key and the whole process secure to avoid the possibility of decrypting the contents of.ipa files to share the contents of an app (perhaps paid for) in the wrong hands.</p><p>In this article, we are going to summarize some static protection measures that I was able to find within user-space daemons running FairPlay, the DRM system used by Apple. All information is believed to be current as of the date of the article; the operating system from which the binaries were extracted is macOS 13.5.1.</p><h2 id="drm-systems-and-the-protection-of-apple-applications">DRM systems and the protection of Apple applications</h2><p>Protecting intellectual property in digital form has always been a goal on the part of companies that distribute copyrighted material. How can content be distributed without users being able to copy, view, edit, and redistribute it? Most current systems use DRM technology. Very briefly, DRM systems work in the following way: they receive as input a secret (it can be a film, an image, or an algorithm) that is not readable, for example, raw files, process the information, and transmit as output the original content. All this is done while trying to keep the process by which the original information was obtained as hidden as possible. DRM systems are most widely used for viewing copyrighted content: the user signs a contract with a service provider that promises to send the requested information (movies, TV series, books). To prevent copying of the content (the contract provides for only one user authorized to view it with that contract), the information must be accessible so that no copying or exporting of the content is expected.</p><p>From an Apple perspective, let’s assume that we want to download a paid application or new game through the Apple Store. We make the transaction, and our device gets a standalone archive, ready to be installed. Technically speaking, if there were no protection measures, a person could copy the app installer<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> and pass it on to any other person. Result? Loss of revenue on the part of Apple and the developer who published the application since the archive copy is free. Paradoxically, by treating the IPA file format as a kind of container, there would be no technical measure to stop application sharing (archives are standalone). This is where <a href="https://en.wikipedia.org/wiki/FairPlay">FairPlay™</a> technology comes into play.</p><p>How can we protect the information contained within the archive? It is clear that we must somehow hide the contents of the archive; by doing so, even if they were to extract the IPA archive from the iPhone, attackers would not be able to access the contents. The information would have to be read only by the system processes that are in charge of installing the application. The next question would be: how can we hide the content? Here, an unparalleled Pandora’s box opens. One of the simplest and least expensive ideas from an archival point of view is to encrypt the information using a secret key. The information would be made readable again by a simple call to <code>decrypt(content, key)</code>.</p><p>The choice of secret key, however, is not a <strong>banal</strong> problem. If we think about the installation process, we know that the information will at some point have to be decrypted, that is, made readable again. Can we set a static key that applies to all iPhones sold? Certainly not. The choice of a static (i.e., hardcoded) key poses a variety of nuisances: attackers would only have to find a single key in order to gain access to all archives created by the Apple Store. However, once the key was discovered, the rest would come naturally: installers would be decrypted in no time, and the network would find itself flooded with “cracked” archives. The choice of the static key might seem advantageous to apply, perhaps by splitting the “visibility” of a set of keys per device (iPhone 12 will have a certain key, iPhone 13 a different one) by exploiting hardware<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>. But even this inventiveness does not work; the key to sharing is across multiple devices!</p><p>The solution actually includes the generation of “dynamic” keys, i.e., depending solely on the installation device, the account of the user who paid for the applications, and a set of metadata exchanged during the transaction (to avoid spoofing). Apple encrypts the contents of the IPA file the moment it receives a new request from the Apple Store: encryption is done with a public key associated with the Apple account. Once received, the archive is decompressed and the individual binary is decrypted using the private key within the device. The application is thus installed in plaintext and remains in plaintext within the Apple device.</p><p>The point at which the decryption takes place constitutes a large centralization point that could be useful to analyze to try to get the IPA decrypted. If attackers could figure out how the private key is generated from the device and associated account, Apple’s protection system would fail instantly. With respect to the risk of spoofing, Apple includes within its devices certain stratagems to declare to cloud services (Apple Store, iCloud, Apple Signing) that indeed the packet exchange originates from an Apple device and not from an <strong>issued</strong> or <strong>simulated</strong> Apple device. Unfortunately due to a number of technical limitations it is not possible to prove 100% “<em>I am not a simulated device, give me the binary, I am [myaccount@icloud.com]</em>”.</p><h2 id="static-analysis-and-obfuscation-techniques">Static analysis and obfuscation techniques</h2><p>FairPlay constitutes a very important technological part of Apple’s technical expertise in intellectual property protection. Several patents have been developed to describe this technology and protect it: <a href="https://patents.google.com/patent/US8934624B2"><em>US8934624B2: Decoupling rights in a digital content unit from download</em></a>, <a href="https://patents.google.com/patent/ES2373131T3"><em>ES2373131T3: Safe distribution of content using descifrado keys</em></a>. Protecting how the decryption process works is the main goal of another set of “anti-reverse engineering” technologies named software obfuscation.</p><p>In fact, we know that among the wide range of techniques that any industry insider can devise to analyze software, there is a procedure called static analysis that allows for more specific investigation of certain parts of a piece of software without sending it into execution. The main technique of static analysis is reverse engineering, which is the reconstruction of the original code by inferring information from raw binary code.</p><p>Raw binaries in fact consist of two main pieces of information to function: data and instructions. Through a multitude of steps, programs such as <a href="https://ghidra-sre.org/">Ghidra</a>, <a href="https://hex-rays.com/">IDA</a> or <a href="https://binary.ninja/">Binary Ninja</a> can reconstruct much of the original source code. Although not perfectly, the software analyst is able to infer much of the semantics of the software: how it works, what methods it calls, and what information it uses from the operating system are some of the examples of questions we can answer through reverse engineering.</p><p>Reverse engineering allows one to derive to a good degree of approximation the algorithms that FairPlay uses in order to decrypt the content. Through the data it is then possible to try to figure out how the secret key is constructed, and with enough effort an attacker could figure out how to copy the decryption method to develop a decryption tool. Deriving the algorithm would be a problem for Apple and its investors. The solution to protect the instructions and data is to apply some forms of obfuscation that make the process of reverse engineering analysis more difficult.</p><p>Forms of obfuscation are part of a discipline of computer science called Software Security that aims to protect the code and information contained within a program. Examples of applications of obfuscation include: protecting intellectual property, making reverse engineering more difficult to prevent the discovery of vulnerabilities, and mitigating exploits. These techniques are applied to the syntax of a program (i.e., the raw instructions) and make it possible to hide much of the original semantics. Manipulating raw code is very complex, so it is necessary to have a solid foundation to be able to modify the code without side effects.</p><p>As we will see in the following paragraphs, FairPlay was constructed in a way that hides much of the instruction and data. Are these techniques, however, really effective? We will attempt to answer this at the end of the article. Recall, in fact, that obfuscation and code protection are techniques that must always be changed from release to release since there is no definitive solution to protect a piece of software. Through obfuscation we are able to complicate all attempts at reverse engineering, but we certainly cannot prevent or prevent the analysis of the binary.</p><h3 id="the-fairplayd-daemon">The fairplayd daemon</h3><p>In the next few paragraphs we will attempt to analyze in detail a user-side daemon that can be found within Apple’s family of operating systems. The use of FairPlay is not limited only to the iOS mobile platform: FairPlay is also used by macOS to manage a secure channel through which to convey the digital content to be protected (movies, TV series..). This sub-technology is called <a href="https://developer.apple.com/streaming/fps/">FairPlay Streaming</a> and allows copyrighted content to be distributed by encrypting the content. A document that summarizes at a high level how it works is <a href="https://developer.apple.com/streaming/fps/FairPlayStreamingOverview.pdf"><em>FairPlay Streaming Overview</em></a>.</p><p>We then want to find out more about the use of FairPlay within macOS and see if the algorithms have been protected through obfuscations. We find that much of the management of FairPlay is assigned to a framework called <code>CoreFP.Framework</code> (<strong>Core</strong> <strong>F</strong>air <strong>P</strong>lay) found within the <code>/System/Library/PrivateFrameworks</code> folder. Private frameworks are a set of libraries dedicated to certain specific macOS features that are considered private, meaning that they have not been released for public use and all methods contained within are to be considered valid only for Apple applications.</p><p>CoreFP.Framework is currently used by some applications and daemons such as Safari and AMPLibraryAgent. Side note before continuing: if you have a private framework and are curious where it is currently being used, you can run the command <code>lsof | grep -i [name_framework]</code> where name_framework is the name of the framework library. As a result we will see a number of active processes that have opened the private framework; in this case, we briefly dwell on AMPLibraryAgent. AMPLibraryAgent is a user-space daemon that is used to manage the user’s media (<code>TV.app</code> and <code>Music.app</code>). AMPLibraryAgent is a kind of intermediate process between the encrypted content coming from Apple’s servers and the end user interacting with the decrypted content through the <code>TV.app</code> and <code>Music.app</code> clients.</p><p>FairPlayd is the daemon that is invoked by AMPLibraryAgent and is used in practice to decrypt the contents. We then begin to analyze the contents of the <code>CoreFP.Framework</code> folder. Although the privateframeworks are contained within a dynamic cache called <code>dyld</code>, the binaries of <code>CoreFP.Framework</code> are available without any special arrangements that the user has to make on the dynamic cache. Within CoreFP, we can find: <code>CoreFP</code> and <code>fairplayd</code>. <code>CoreFP</code> is the binary that is used by system processes and constitutes the library, while <code>fairplayd</code> is the user space daemon. The user space daemon uses the kernel component called <a href="https://github.com/pwn0rz/fairplay_research/blob/master/files/FairPlayIOKit_macOS_11.2_20D64">FairPlayIOKit</a>.</p><p>We extract the x86_64 version of <code>fairplayd</code> and save it to a folder of our choice via the command <code>lipo -extract x86_64 fairplayd ~/fairplayd</code>. The <code>fairplayd</code> file is a classic executable Mach-O file, it has no particular fields within the header worth mentioning. So let`s import it inside one of our reverse engineering tools (at will we can use Ghidra, IDA, Binary Ninja or Hopper). We use IDA for convenience in this article, although we must be especially careful when importing the binary into other tools (we will explain why at the end of the article). We let IDA work to reconstruct the information within the binary (through section parsing, disassembling, decompiling).</p><p><img src="https://nicolo.dev/images/blog/fairplay/ida-screen-0.png" alt="IDA Screenshot"></p><p>By default IDA opens the binary by placing the reader on the main symbol, namely <code>_main</code>, the entry point of the <code>fairplayd</code> daemon. As we can see, we immediately touch on the power of obfuscation, and after a while we realize that the entire binary was actually constructed in such a way as to obfuscate all instructions. Confirmation of this is also given by the decompiler, below is a brief excerpt:</p><div><pre tabindex="0"><code data-lang="C"><span><span>v298 <span>=</span> <span>&amp;</span>v297;
</span></span><span><span>v297 <span>=</span> (((<span>unsigned</span> <span>int</span>) v298 <span>&amp;</span><span>0x52491520</span> <span>|</span> (<span>2</span> <span>*</span>(_DWORD) v298) <span>&amp;</span><span>0x80120A40</span>) <span>^</span> <span>0x40090520</span>) <span>+</span> ((<span>-</span><span>1704077140</span> <span>-</span> ((<span>unsigned</span> <span>int</span>) v298 <span>&amp;</span><span>0x8924A850</span>)) <span>&amp;</span><span>0x8924A854</span>) <span>+</span> ((((<span>unsigned</span> <span>int</span>) v298 <span>&amp;</span><span>0x24924288</span>) <span>+</span> <span>689062540</span>) <span>&amp;</span><span>0x24924288</span> <span>|</span> (<span>2</span> <span>*</span>(_DWORD) v298) <span>&amp;</span><span>0x506D9510</span>);
</span></span><span><span>v302 <span>=</span> <span>62</span>;
</span></span><span><span>((<span>void</span>(<span>__fastcall</span><span>*</span>)(<span>__int64</span>, _QWORD, _QWORD, _QWORD))((<span>char</span><span>*</span>) <span>*</span>(<span>&amp;</span>off_1002B0BF0 <span>+</span> (<span>unsigned</span> <span>int</span>)(<span>unsigned</span> <span>__int8</span>)((<span>unsigned</span> <span>__int8</span>) v298 <span>^</span> byte_100237430[byte_1002AEEF0[(<span>unsigned</span> <span>__int8</span>) v298] <span>^</span> <span>0x3A</span>]) <span>+</span><span>944</span>) <span>-</span><span>790860942</span>))(<span>31</span> LL,<span>0</span> LL,<span>0</span> LL,<span>0</span> LL);
</span></span><span><span><span>LODWORD</span>(v303) <span>=</span> <span>1312628203</span> <span>*</span>((<span>unsigned</span> <span>int</span>) <span>&amp;</span>v303 <span>^</span> <span>0x4EBE92AB</span>) <span>+</span> <span>8</span>;
</span></span><span><span>((<span>void</span>(<span>__fastcall</span><span>*</span>)(<span>unsigned</span> <span>__int64</span> <span>*</span>))((<span>char</span><span>*</span>) <span>*</span>(<span>&amp;</span>off_1002B0BF0 <span>+</span>(<span>unsigned</span> <span>int</span>)(<span>unsigned</span> <span>__int8</span>)(byte_100237330[byte_1002AEDF0[(unsigned__int8) <span>&amp;</span>v297] <span>^</span> <span>0x18</span>] <span>^</span> (<span>unsigned</span> <span>__int8</span>) <span>&amp;</span>v297) <span>+</span>	<span>532</span>) <span>-</span><span>1051853286</span>))(<span>&amp;</span>v303);
</span></span><span><span><span>LODWORD</span>(v303) <span>=</span> <span>2064956458</span> <span>-</span> <span>1106503637</span> <span>*</span>(((<span>unsigned</span> <span>int</span>) <span>&amp;</span>v303 <span>-</span> <span>2</span> <span>*</span>((<span>unsigned</span> <span>int</span>) <span>&amp;</span>v303 <span>&amp;</span><span>0x6F01D10</span>) <span>+</span> <span>116399381</span>) <span>^</span> <span>0x92F4EBC6</span>);
</span></span><span><span><span>sub_10015D450</span>(<span>&amp;</span>v303);
</span></span><span><span>v21 <span>=</span> <span>HIDWORD</span>(v303);
</span></span><span><span>v22 <span>=</span> (<span>HIDWORD</span>(v303) <span>==</span> <span>1923298241</span>) <span>|</span> <span>2</span>;
</span></span></code></pre></div><p><strong>Panic</strong>! The analyst faced with such code has few choices: leave reverse engineering or try to investigate further. Most people applying obfuscation techniques hope that most of the time the analyst will choose the first path. If it is too complicated to analyze the behavior of an application by reverse engineering, it is not worth it. However, it is necessary for obfuscation to be well done before there can be any major slips. In this article we will try to find out that it actually only takes a simple look at the raw code to identify some common obfuscation patterns. In the next few paragraphs we will introduce some obfuscation techniques and how they are implemented.</p><p>Before continuing, we should mention that there are different obfuscation techniques depending on the resource to be protected. As we will see later, different obfuscation techniques have a different cost: the opaque predicate technique has an entirely different cost than control flow flattening. That said, let’s get started!</p><p><strong>Helpful Tip</strong>: With the presence of obfuscations applied to instructions and data, it is a good idea to try to use the decompiler view as little as possible. In fact, the decompiler deduces some high-level information from how the machine instructions were placed within the binary and what data they work on. Since most of the instructions are intended to complicate the decompiler result, abandoning the decompiler result is always a good idea.</p><h3 id="mixed-boolean-arithmetic-expression">Mixed Boolean Arithmetic Expression</h3><p>The first obfuscation technique we address is data obfuscation using mixed expressions with algebraic (sum, subtraction, multiplication, division) and boolean (logical operations) operators. These types of expressions are used when there is a need to hide a given numeric constant within a program. A constant datum could represent a value used in an encryption algorithm (<a href="https://en.wikipedia.org/wiki/Nothing-up-my-sleeve_number">“Nothing-up-my-sleeve-number”</a>), but also a string, a memory address, and more. But not only that! If during processing, such as during decryption, a cryptographic algorithm performs a simple addition, it is possible to make the arithmetic expression more complex.</p><p>Examples of arithmetic-boolean expressions are: <code>v298 &amp; 0x52491520 | (2 * (_DWORD) v298) &amp; 0x80120A40) ^ 0x40090520) + ((-1704077140 - (v298 &amp; 0x8924A850)) &amp; 0x8924A854) + ((((unsigned int) v298 &amp; 0x24924288) + 689062540) &amp;0x24924288 | (2 * v298) &amp; 0x506D9510)</code>. I have already written in a previous post <a href="https://nicolo.dev/blog/introduzione-pocket-offuscatore/">how to be able to create</a> these expressions by applying transformation rules. The process Apple used is the same: take a constant from the code, rewrite the constant using arithmetic operators, and then apply the transformations. Do we already have an expression? We continue to apply the rules of transformations. Note that only some transformations can be applied since they do not change the semantics of the original expression. At the end of the process, the expression is translated back into machine language so that it can be reinserted within the binary.</p><p>In the case of <code>fairplayd</code>, numeric constants most often represent addresses at which to jump from one basic block to another. Addresses refer to other basic blocks or to stubs used to call methods from other libraries. We will discuss this option in more detail in obfuscating the control flow.</p><p>We can actually see two types of obfuscation of Boolean expressions depending on the type of assembly instruction used. We can identify a classic example of obfuscation by a Boolean expression:</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>*</span>(_BYTE <span>*</span>)(a1 <span>+</span> v2) <span>=</span> <span>-</span><span>13</span> <span>*</span> (<span>-</span><span>71</span> <span>*</span> (<span>59</span> <span>*</span> <span>*</span>(_BYTE <span>*</span>)(a1 <span>+</span> v2) <span>-</span> <span>107</span>) <span>+</span> <span>71</span> <span>*</span> (v2 <span>&amp;</span> <span>0xF</span> <span>^</span> <span>0x9C</span>)) <span>-</span> <span>111</span>;
</span></span></code></pre></div><p>This in assembly is translated as:</p><div><pre tabindex="0"><code data-lang="asm"><span><span><span>cdqe</span>
</span></span><span><span><span>movzx</span>   <span>ecx</span>, <span>byte</span> <span>ptr</span> [<span>rdi</span><span>+</span><span>rax</span>]
</span></span><span><span><span>imul</span>    <span>ecx</span>, <span>0x3B</span>
</span></span><span><span><span>add</span>     <span>cl</span>, <span>0x95</span>
</span></span><span><span><span>movzx</span>   <span>ecx</span>, <span>cl</span>
</span></span><span><span><span>imul</span>    <span>ecx</span>, <span>0xB9</span>
</span></span><span><span><span>mov</span>     <span>edx</span>, <span>eax</span>
</span></span><span><span><span>and</span>     <span>edx</span>, <span>0x0F</span>
</span></span><span><span><span>xor</span>     <span>edx</span>, <span>0x9C</span>
</span></span><span><span><span>imul</span>    <span>edx</span>, <span>0x47</span>
</span></span><span><span><span>add</span>     <span>edx</span>, <span>ecx</span>
</span></span><span><span><span>imul</span>    <span>ecx</span>, <span>edx</span>, <span>0x0D</span>
</span></span><span><span><span>add</span>     <span>cl</span>, <span>0x91</span>
</span></span><span><span><span>mov</span>     [<span>rdi</span><span>+</span><span>rax</span>], <span>cl</span>
</span></span></code></pre></div><p>We note that these assembly instructions are quite common to find within the Intel x86_64 instruction set, and with a little effort it is possible to reduce the expression to a simplified expression through some framework, such as <a href="https://github.com/mrphrazer/msynth">Msynth</a>. These instructions are also classified historically as SISD: a single expression acting on a single data item (the sum between the <code>cl</code> and <code>0x95</code> registers has no side effects on the other registers).</p><p>Another type of logical arithmetic expression that I have currently found involves another type of instruction. The Intel x86_64 instruction set uses a subsystem called MMX that is part of the SIMD (Single Instruction, Multiple Data) family of instructions and allows a single instruction to operate on multiple data. For example, a basic block of these instructions are:</p><div><pre tabindex="0"><code data-lang="asm"><span><span><span>movdqu</span>  	<span>xmm0</span>, <span>xmmword</span> <span>ptr</span> [<span>rdi</span><span>+</span><span>rdx</span>]
</span></span><span><span><span>pmovzxbw</span> 	<span>xmm3</span>, <span>xmm0</span>
</span></span><span><span><span>punpckhbw</span> 	<span>xmm0</span>, <span>xmm0</span>
</span></span><span><span><span>movdqa</span>  	<span>xmm1</span>, <span>cs</span>:<span>xmmword_100216450</span>
</span></span><span><span><span>pmullw</span>  	<span>xmm0</span>, <span>xmm1</span>
</span></span><span><span><span>pand</span>    	<span>xmm0</span>, <span>xmm6</span>
</span></span><span><span><span>pmullw</span>  	<span>xmm3</span>, <span>xmm1</span>
</span></span><span><span><span>pand</span>    	<span>xmm3</span>, <span>xmm6</span>
</span></span><span><span><span>packuswb</span> 	<span>xmm3</span>, <span>xmm0</span>
</span></span><span><span><span>paddb</span>   	<span>xmm3</span>, <span>cs</span>:<span>xmmword_100216470</span>
</span></span><span><span><span>pshufd</span>  	<span>xmm0</span>, <span>xmm3</span>, <span>0</span><span>EEh</span>
</span></span><span><span><span>pmovzxbd</span> 	<span>xmm8</span>, <span>xmm0</span>
</span></span><span><span><span>pshufd</span>  	<span>xmm0</span>, <span>xmm3</span>, <span>0</span><span>FFh</span>
</span></span><span><span><span>pmovzxbd</span> 	<span>xmm13</span>, <span>xmm0</span>
</span></span><span><span><span>pshufd</span>  	<span>xmm0</span>, <span>xmm3</span>, <span>55</span><span>h</span> <span>; 'U'
</span></span></span><span><span><span></span><span>pmovzxbd</span> 	<span>xmm9</span>, <span>xmm0</span>
</span></span><span><span><span>pmovzxbd</span> 	<span>xmm10</span>, <span>xmm3</span>
</span></span><span><span><span>movdqa</span>  	<span>xmm0</span>, <span>cs</span>:<span>xmmword_100216600</span>
</span></span><span><span><span>pmulld</span>  	<span>xmm10</span>, <span>xmm0</span>
</span></span><span><span><span>pmulld</span>  	<span>xmm9</span>, <span>xmm0</span>
</span></span><span><span><span>pmulld</span>  	<span>xmm13</span>, <span>xmm0</span>
</span></span><span><span><span>pmulld</span>  	<span>xmm8</span>, <span>xmm0</span>
</span></span><span><span><span>movdqa</span>  	<span>xmm0</span>, <span>xmm14</span>
</span></span><span><span><span>movdqa</span>  	<span>xmm4</span>, <span>cs</span>:<span>xmmword_100216480</span>
</span></span><span><span><span>pand</span>    	<span>xmm0</span>, <span>xmm4</span>
</span></span></code></pre></div><p>These kinds of operations are complex to translate into high-level code because they are dependent on the architecture and on whether one instruction can be converted into multiple high-level instructions (for example: paddb allows 128-bit addition between the xmm3 register and the data located at address xmmword_100216470). IDA solves this problem by defining functions such as <code>mmu_addb(xmm3, xmmword_100216470)</code> but we do not know, however, what happens inside.</p><p><strong>Idea</strong>: SIMD computation opens a number of opportunities for obfuscation based on MBA expressions: is it possible to use technology for <a href="https://developer.apple.com/documentation/accelerate">matrix computation</a>/parallel to obfuscate a certain constant? The idea would be to have a series of MBA expressions to compute in parallel to find the result of a constant. This would lower the overhead given by introducing the complication of an expression (and since I have a lower overhead, I can increase the degree of illegibility of the expression). Plus it would be dependent on the Apple Silicon architecture, making it more difficult to emulate the computation. Possible problems with this approach include: finding equations that can be executed in parallel, checking how to interact with parallel cores (via software abstraction?), checking the semantics of expressions.</p><p>The technique of obfuscation by mixed boolean arithmetic expressions has been widely used in the <code>fairplayd</code> binary. An excellent example of how this obfuscation has been used can be found in the function <a href="https://gist.github.com/seekbytes/696f71ec49b7e75728e94f5bea4dee46">sub_1001F5D32</a>: the largest function within which Boolean arithmetic expressions are found. There are currently several methods for trying to summarize arithmetic Boolean expressions, but most rely on a single technique called <strong>symbolic execution</strong> and involve the use of Proof Solvers such as z3 to verify the semantics between the obfuscated expression and the synthesized expression.</p><p>The best tool you can currently use to solve arithmetic Boolean expressions is <a href="https://github.com/HexRaysSA/goomba/">goomba</a>, developed by HexRays and available by default in IDA Pro and IDA Teams versions 8.3. An excellent alternative is the <a href="https://github.com/mrphrazer/msynth">Msynth</a> framework developed by <a href="https://synthesis.to/">Tim Blazytko</a>, which succeeds well. Ultimately, while MBA obfuscation is a good alternative for making expressions more complicated, there are many tools for solving and rewriting expressions.</p><h3 id="opaque-predicates">Opaque Predicates</h3><p>Opaque predicates are another very “cheap” technique for introducing obfuscation within instructions. This technique consists of introducing some always true or always false conditions that cause the decompiler to explore blocks of instructions with zero utility. The always true or always false conditions include a direct or indirect jump to basic blocks that will never be executed: they do not present additional functionality, they only add complexity to the functions being analyzed.</p><p>Assume, for example, that we have the following source code:</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>int</span> <span>sum</span>(<span>int</span> a, <span>int</span> b){
</span></span><span><span>	<span>int</span> result <span>=</span> a <span>+</span> b <span>+</span> c;
</span></span><span><span>	<span>return</span> result;
</span></span><span><span>}
</span></span></code></pre></div><p>To protect the given part of the result we can rewrite the code like this:</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>int</span> <span>sum</span>(<span>int</span> a, <span>int</span> b){
</span></span><span><span>	<span>int</span> result <span>=</span> a <span>+</span> b;
</span></span><span><span>
</span></span><span><span>	<span>if</span>(a <span>==</span> <span>0</span> <span>&amp;&amp;</span> a <span>==</span> <span>1</span> <span>&amp;&amp;</span> a <span>-</span> <span>4</span> <span>&gt;=</span> <span>55</span> <span>&amp;&amp;</span> (a <span>*</span> <span>4</span> <span>-</span> <span>36</span> <span>*</span> <span>0xff</span> <span>-</span> <span>0xc</span>) <span>&lt;</span> <span>2</span>){
</span></span><span><span>		result <span>+=</span> <span>1</span> <span>*</span> <span>4</span> <span>&lt;&lt;</span> <span>2</span> <span>-</span> <span>0x5c</span>;
</span></span><span><span>	} <span>else</span> <span>if</span> (a <span>==</span> <span>5</span> <span>&amp;&amp;</span> a <span>!=</span> <span>5</span>){
</span></span><span><span>		<span>if</span>(b <span>&gt;</span> <span>4</span> <span>&amp;&amp;</span> b <span>&lt;</span> <span>4</span> <span>&amp;&amp;</span> b <span>!=</span> <span>4</span> <span>&amp;&amp;</span> <span>352610</span> <span>==</span> <span>122</span>){
</span></span><span><span>			result <span>+=</span> <span>50</span> <span>*</span> <span>0xf5</span> <span>*</span> <span>352610</span>;
</span></span><span><span>			result <span>+=</span> <span>decrypt</span>(key);
</span></span><span><span>		}
</span></span><span><span>	} <span>else</span> {
</span></span><span><span>		<span>return</span> result <span>+</span> <span>decrypt</span>(key);
</span></span><span><span>	}
</span></span><span><span>}
</span></span></code></pre></div><p>To our amazement we will find that the decompiler would struggle to reconstruct the original check, so it would miss some always true or always false checks. The defense given by these opaque predicates is proportional to the degree of illegibility and complexity given by the check made between the (high-level) ifs or the various algebraic arithmetic statements given before the <code>cmp</code> statement. Code within the ifs is presented as <em>dead code</em> i.e., code that will never be executed: during decompilation, however, it is not possible to recognize between code that will run and dead code. Opaque predicates therefore add degrees of “confusion” to binary analysis.</p><p>A typical example of this transformation is the procedure <code>sub_100005FC0</code>: after the classical prologue, we can find a function call and then two different execution branches. The condition to jump into a branch or continue is given by the <code>test al, 2</code> instruction: at high level the condition would be equal to <code>if (al % 4 == 0)</code>, i.e. if the number stored inside register <code>al</code> is divisible by 4 continue with the execution, otherwise jump to <code>loc_10000505F</code>. The <code>test</code> instruction actually performs AND between the register <code>al</code> and the immediate value <code>0x2</code>: performing an AND with an immediate value means checking the remainder of the register division with the immediate value <code>al &amp; 2 == al % 4</code>.</p><p>Visualizing the graph tree of the function we can see how the basic block just below the condition is a very large block.</p><p><img src="https://nicolo.dev/images/blog/fairplay/ida-graph-tree.png" alt="Fuction Graph tree on IDA"></p><p>Intuitively one would think that a very large basic block would be an integral part of the processing. If the program were not obfuscated, this is a very real assumption. However, we have to imagine that Apple’s developers have complicated the instructions precisely in order to challenge the automatic binary analysis tools. In this case, the largest basic block (TRUE branch of the condition <code>at % 4 == 0</code>) represents a clear example of <strong>opaque predicate</strong>. In fact, if we saw the most substantial elementary block, we could see a number of useless assembly operations.</p><p><img src="https://nicolo.dev/images/blog/fairplay/ida-basic-block-huge.png" alt="Graph tree on IDA"></p><p>Note that the screenshot has been cropped to avoid filling the entire article with the image of the basic block. We ask: Is it exactly a basic block that is useless for computation purposes? Is the condition <code>al % 4 == 0</code> always true or always false? The job of obfuscation would be to prevent any kind of inference within the condition. And it is: we cannot predict whether the instruction will always have a constant result or not.</p><p>What we can do, however, is to see the basic block present below the basic block of the TRUE condition <code>al % 4 == 0</code>. The basic block we are looking at then represents the FALSE condition (i.e. following <code>jnz loc_100005F2F</code>, we come to analyze the condition <code>loc_100005F2F</code>). A good way to check whether the largest basic block is actually useful or not is to see if there are any dependencies between the data used in the suspect basic block and the other basic blocks.</p><p>In this case, we can see that the basic block loads the address of xmmword_1002B6460, which was previously used in the “suspect” basic block.</p><p><img src="https://nicolo.dev/images/blog/fairplay/ida-block-10005f2f.png" alt="Basic block, false condition of if instruction"></p><p>In the suspect basic block, the memory location <code>xmmword_1002B6460</code> is rewritten by an information present in another memory location. It is therefore difficult to verify the complex dependency between the instructions! However in this case, it is easy to check the dependency since the most “important” code for this function can be translated like this:</p><div><pre tabindex="0"><code data-lang="C"><span><span>xmmword_1002B5460 <span>=</span> <span>0x0EC0C7C941423B0F77D59F9E25CFAC016</span>;
</span></span><span><span>xmmword_1002142F0 <span>=</span> <span>0x6432B8A1D491C1746754EB00EF0F9478</span>;
</span></span><span><span>
</span></span><span><span><span>// prologo
</span></span></span><span><span><span></span>[... omissis ...]
</span></span><span><span><span>// eax = 
</span></span></span><span><span><span></span><span>if</span> (al <span>%</span> <span>4</span> <span>==</span> <span>0</span>){
</span></span><span><span>	<span>// dead code
</span></span></span><span><span><span></span>	xmmword_1002B5460 <span>=</span> xmmword_1002142F0;
</span></span><span><span>}
</span></span><span><span><span>memcpy</span>(v6, <span>&amp;</span>xmmword_1002B5460, <span>0x1000</span>);
</span></span><span><span>
</span></span><span><span><span>// epilogo
</span></span></span></code></pre></div><p>What is the value of the variable <code>xmmword_1002B5460</code>? Much depends on the condition of the if. However, even in uncertainty, the obfuscation given by the opaque predicate turns out to be not very powerful: we have two choices, this means that we can propagate most of the changes in a parallel way (verifying what happens if we enter the TRUE condition block or inside to block the FALSE condition). Other questions that might come to mind:</p><ul><li><p>how are we sure that the assembly code of the largest basic block is composed of “dead code”? The instructions currently show that other data is overwritten, but that data is never used. The question remains open on other procedures that could use this data (even if the analysis of the references has not highlighted this possibility, we cannot trust 100% of the binary analysis tools).</p></li><li><p>how do we make sure that <code>xmmword_1002142F0</code> is not overwritten by other functions? As usual, we use the powerful XREF tool: there are no other procedures that read/write the memory of <code>xmmword_1002142F0</code>. But remember that XREF checks based on information gleaned from automated binary analysis tools. Even just one piece of information lost during the initial parsing can cause major headaches at the end of the parse (ie during reference scanning).</p></li><li><p>how can we be sure that the condition <code>al % 4 == 0</code> is not always satisfied? We could only answer this question when we have invented the crystal ball. What matters to us is not so much verifying whether the condition is true or false: we actually want to carry out an analysis of the data to understand the effects of the “suspect” basic block of being dead code. To verify this, we carried out an analysis on the basic block immediately following the suspected block. If we are in doubt, as in this case, we can also propagate the changes to the following blocks to see if in one way or another we can infer some other data.</p></li></ul><p>To answer the question “so what does <code>sub_100005FC0</code> do in practice?”, just look at the basic block just after the <code>memcpy</code> function call. Let us remember that the signature (that is the declaration of the function) is the following: <code>sub_100005FC0(int64 a1, int a2)</code>.</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>for</span> ( i <span>=</span> <span>0</span>; i <span>!=</span> a2; <span>++</span>i ){
</span></span><span><span>	v4 <span>=</span> i <span>+</span> <span>15</span>;
</span></span><span><span>	<span>if</span> ( i <span>&gt;=</span> <span>0</span> )
</span></span><span><span>		v4 <span>=</span> i;
</span></span><span><span>
</span></span><span><span>	<span>*</span>(_BYTE <span>*</span>)(a1 <span>+</span> i) <span>=</span> <span>-</span><span>13</span> <span>*</span> v6[<span>256</span> <span>*</span> (<span>__int64</span>)(<span>int</span>)(i <span>-</span> (v4 <span>&amp;</span> <span>0xFFFFFFF0</span>))
</span></span><span><span>	 	<span>+</span> (<span>unsigned</span> <span>__int8</span>)(<span>59</span> <span>*</span> <span>*</span>(_BYTE <span>*</span>)(a1 <span>+</span> i) <span>-</span> <span>107</span>)] <span>-</span> <span>111</span>;
</span></span><span><span>}
</span></span></code></pre></div><p>The <code>sub_100005FC0</code> procedure then proceeds to iterate over the v6 buffer to deobfuscate the contents of the word <code>xmmword_1002B5460</code>. The most expensive instruction, computationally speaking, is an MBA expression to be deobfuscated. Please refer to the MBA subsection to understand how to deobfuscate the expression and rewrite it. If you have problems with pointers, I can rewrite the expression as:</p><pre tabindex="0"><code>a1[i] = -13 * v6[256 * (i - (v4 &amp; 0xFFFFFFF0)) + 59 * a1[i] - 107] - 111;
</code></pre><p>The obfuscation measure in this case is <strong>not effective</strong> and allows you to recover much of the original information. There are numerous cases of the tendency to include “useless” opaque predicates (like this one discussed) within the <code>fairplayd</code> program. The opaque predicates introduced by Apple don’t give you a headache: a good software analyst would be able to distinguish between dead branches and instructions that cannot be executed. Apple needs to review the construction of the opaque predicates to make the basic blocks even more complex.</p><p><strong>Idea</strong>: To make obfuscation even more effective, you would need to make each elementary block more complex (perhaps trying to make the control flow more complicated). A clear example of how hard the decompiler’s job can be made is presented in the subsection <strong>control flow flattening</strong>.</p><h3 id="moving-the-stack">Moving the stack</h3><p>Before continuing with our discussion, let’s stick with the analysis of the <code>sub_100005FC0</code> function and display the prologue of the procedure before the <code>test al, 0x2</code> statement.</p><p><img src="https://nicolo.dev/images/blog/fairplay/ida-sub-4220.png" alt="Screen of prologue of sub_100005FC0"></p><p>Do we notice anything strange? I confess that it was not easy to analyze, but after the analysis of IDA we understand another “obfuscation” technique that Apple has applied to protect <code>fairplayd</code>. Very subtly the stack is moved up (or down, depending on how you want to build the stack). Why would a program want to move the stack?</p><p>All instruction analysis software provides, among the many analysis steps, a particular type of insight called “stack analysis”. This technique allows you to recover how the stack and local variables are composed: it is essential to be able to correctly deduce how the stack is composed, otherwise the analysis software is no longer able to understand the flow control and the various function calls.</p><p>For this procedure, the type of error that IDA reports is <code>sp-analysis failed</code> i.e. it fails to trace how the stack pointer is modified. In our case, IDA fails to realize that the shift is done precisely to confuse the analysis. Indeed with the instruction <code>mov eax, 1010h</code> and <code>sub rsp, rax</code><sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>, IDA is led to think that there is a local buffer called <code>var_1020</code> of size 0x1010 bytes. This is just one of many examples where IDA fails to rebuild the original stack.</p><p>Other examples can be found in functions with multiple statements: the procedure <code>sub_10000F620</code> has a parameter on the stack that occupies 0x2CE7AB73 bytes (753380211 bytes = about 753 MB). Such a large parameter on the stack we know cannot exist: the stack can be increased in size, but usually reaches <strong>maximum</strong> 65520kb (higher values cause errors in macOS). The value 753 MB is given by an basic block in which the <code>sub esp, 0x2CE7AB73</code> instruction is used, an unreachable basic block, therefore considered dead code. However, IDA does not have the tools to realize that such a value is too large to exist: IDA does not recognize that its analysis is inaccurate, on the contrary it refuses to decompile the function because the size of the stack frame is too large. With a single instruction, Apple manages to put a major barrier to anyone who wants to decompile the feature.</p><p>Is it so difficult to fix this situation? For a beginner, yes. For a motivated reverse engineering student, no. Fortunately, IDA allows the analyst to be able to modify part of the information that he has deduced. By redefining the stack, much of the 753MB of variable can be ignored. An alternative way is to report a certain path as dead code (just select the bytes of that block and not define it via the option called <em>Undefine</em>). In the case of moving the stack pointer up, when we try to make software analysis complex, we’re not really talking about obfuscation: we’re not affecting the readability of the code. Rather, let’s act on some limitations that these tools have to recover information. A good article grouping some techniques to confuse the analysis techniques applied by IDA was written by Markus Gaasedelen: <a href="https://blog.ret2.io/2017/11/16/dangers-of-the-decompiler/">Dangers of the Decompiler</a>.</p><h3 id="control-flow-flattening">Control Flow Flattening</h3><p>Control Flow Flattening is another obfuscation technique found within the FairPlay binary and is perhaps the most powerful used by Apple in the field of code protection for <code>fairplayd</code>. Flow control indicates how the program evolves over time in terms of instruction flow. What functions a procedure calls, what kind of jumps the check makes (if conditional or unconditional), the link between the various basic blocks, the conditions for which the execution moves and many other information are inferred from the flow control.</p><p>The high-level instructions of flow control are the typical instructions that allow you to divide the execution of a program into one or more cases: <code>if</code>, <code>if else</code>, <code>if else if else</code>, <code>switch</code>, <code>do while</code>, <code>for</code> and many others. Most of these conditions translate into machine language instructions which for Intel become <code>cmp</code>, <code>test</code>, <code>jmp</code>. If the high-level flow control change is dictated by “logical” instructions, the low-level flow control change is to change the address of the next instruction, or rather, jump to a certain instruction.</p><p>Among the information that we can deduce from the flow control, we can derive the various connections between the basic blocks and proceed to carry out the intra-procedural analysis, i.e. try to reconstruct the program execution flow between the various procedures. The flow of control also allows to recover important information (such as loops) to subsequently proceed to the translation from machine code to pseudo C code.</p><p>To more clearly show the power of obfuscation using control flow flattening, let’s take an example function: <code>sub_10003FE60</code>. From IDA, we select the example function, right click and choose the tree view. The tree view is a feature of IDA which allows you to understand: how the basic blocks are connected, the dependencies between the blocks and the execution branches. Often through this view it is possible to get a better idea of what the pseudo code translated by the decompiler will look like.</p><p>The goal of the control flow flattening technique is to flatten the control flow, i.e. to transform the control flow through some conditional and unconditional jumps. The technique was developed by <a href="https://www.darkreading.com/edge-articles/chenxi-wang-from-security-research-to-developing-the-next-generation-of-security-leaders">Chenxi Wang</a> in his doctoral thesis entitled <em>A Security Architecture for Survivability Mechanisms</em>. Normally the control flow of a procedure is almost developed vertically, as you can see in the image below.</p><p><img src="https://nicolo.dev/images/blog/fairplay/ida-vertical.png" alt="IDA vertical control flow"></p><p>With the application of control flow flattening, the procedure graph is heavily modified by making it “more horizontal,” that is, flattened or <em>flatten</em>. Here is a typical example of how a function can be modified by applying (simple) control flow flattening:</p><p><img src="https://nicolo.dev/images/blog/fairplay/control-flow-flattening.png" alt="IDA control flow after applying the control flow flattening"></p><p>We can then see how the basic blocks have all been brought to the same de facto level by horizontally extending the graph of basic blocks. The case of control flow flattening taken to the extreme drives the analyst crazy, such as this function depicted below:</p><p><img src="https://nicolo.dev/images/blog/fairplay/ida-extreme.png" alt="IDA vertical control flow extreme"></p><p>As can be seen from the image just above, control flow flattening can be applied to construct even bogus basic blocks that can confuse the decompiler. The end result is a control flow that is extremely complex to analyze. At a high level, the transformation technique can be translated by a simple switch. Suppose we have a procedure:</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>int</span> <span>sum</span>(<span>int</span> a, <span>int</span> b){
</span></span><span><span>	<span>int</span> s <span>=</span> <span>4</span>;
</span></span><span><span>	<span>int</span> c;
</span></span><span><span>	<span>if</span> ( a <span>&gt;</span> <span>500</span> ){
</span></span><span><span>		c <span>=</span> <span>2</span>;
</span></span><span><span>	} <span>else</span> {
</span></span><span><span>		c <span>=</span> <span>0</span>;
</span></span><span><span>	}
</span></span><span><span>	<span>int</span> result <span>=</span> s <span>+</span> a <span>+</span> b <span>+</span> c;
</span></span><span><span>	<span>return</span> result;
</span></span><span><span>}
</span></span></code></pre></div><p>The control flow of this simple function is given by the following graph:</p><p><img src="https://nicolo.dev/images/blog/fairplay/cff-before.svg" alt="Control flow graph"></p><p>Now we want this vertical graph to be as flattened as possible! To do this we use another powerful construct of programming languages: the <code>switch</code> instruction. The <code>switch</code> instruction allows the execution to be divided into multiple branches, creating basic blocks arranged horizontally. To switch from one branch to another in the switch, however, we can use an auxiliary variable, called <code>state</code>, which stores the current state we are in. Does this sound familiar? This technique sounds a lot like the synthesis of a finite state machine! The auxiliary variable helps to change state without worrying about some side effects (or without the use of labels and goto). Let us then move on to the actual transformation! For now, let us assume that we do not add any unnecessary basic blocks.</p><p>The steps we perform are as follows:</p><ol><li><p><strong>Creation of the “start”</strong> block: contains the initialization of the state variable and all the variables that will be used within the basic blocks of the switch. It is possible to move the declarations within the switch branches, however, we must pay attention to possible side effects of using local variables internal to a construct.</p></li><li><p><strong>Dispatcher creation</strong>: This basic block will check what state to jump to. It is a simple <code>while</code> with a switch statement inside: this is to avoid that after entering one of the switch branches, the jump out reaches the last statement of the function.</p></li><li><p><strong>Move basic blocks</strong>: I choose a new number for a new state. I insert the code within the identified basic block including the state change. The state variable should point to the next basic block I want to execute. I remind you that I can also create new elementary blocks by subdividing larger basic blocks or adding instructions that will never be executed. The limit for obfuscation is imagination :- )</p></li><li><p><strong>Transformation check</strong>: I check that indeed the function can terminate, paying attention to the last block that is executed. All transformations of obfuscations should actually be checked through some proof solvers and mathematical equations to prevent the original semantics from being changed during the obfuscation process.</p></li></ol><p>Applying control flow flattening:</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>int</span> <span>sum</span>(<span>int</span> a, <span>int</span> b){
</span></span><span><span>	<span>int</span> state <span>=</span> <span>0</span>;
</span></span><span><span>	<span>int</span> s, c, result;
</span></span><span><span>	<span>while</span>(<span>1</span>){
</span></span><span><span>		<span>switch</span>(state){
</span></span><span><span>			<span>case</span> <span>2</span><span>:</span>
</span></span><span><span>				<span>if</span> (a <span>&gt;</span> <span>500</span>){
</span></span><span><span>					state <span>=</span> <span>4</span>;
</span></span><span><span>				} <span>else</span> {
</span></span><span><span>					state <span>=</span> <span>-</span><span>1</span>;
</span></span><span><span>				}
</span></span><span><span>				<span>break</span>;
</span></span><span><span>			<span>case</span> <span>0</span><span>:</span>
</span></span><span><span>				s <span>=</span> <span>4</span>;
</span></span><span><span>				state <span>=</span> <span>2</span>;
</span></span><span><span>				<span>break</span>;
</span></span><span><span>			<span>case</span> <span>-</span><span>1</span><span>:</span>
</span></span><span><span>				c <span>=</span> <span>0</span>;
</span></span><span><span>				state <span>=</span> <span>5</span>;
</span></span><span><span>				<span>break</span>;
</span></span><span><span>			<span>case</span> <span>5</span><span>:</span>
</span></span><span><span>				result <span>=</span> s <span>+</span> a <span>+</span> b <span>+</span> c;
</span></span><span><span>			<span>case</span> <span>0x54292639</span><span>:</span>
</span></span><span><span>				<span>return</span> result;
</span></span><span><span>			<span>case</span> <span>4</span><span>:</span>
</span></span><span><span>				c <span>=</span> <span>2</span>;
</span></span><span><span>				state <span>=</span> <span>5</span>;
</span></span><span><span>				<span>break</span>;
</span></span><span><span>		}
</span></span><span><span>	}
</span></span><span><span>	<span>return</span> <span>-</span><span>542926392</span>;
</span></span><span><span>}
</span></span></code></pre></div><p>The result:</p><p><img src="https://nicolo.dev/images/blog/fairplay/cff-after.svg" alt="Control flow graph"></p><p>Some notes we write per point:</p><ul><li><p>the graph does not contain the while instruction to avoid adding too many arrows and making the graph more confusing. When a branch of a switch ends with the <code>break</code> instruction, execution resumes from the evaluation of the <code>state</code> variable. The graph does not contain the last instruction <code>return -542926392;</code>, it should be inserted with an arrow after dispatcher execution.</p></li><li><p><code>basic block A</code> and <code>basic block B</code> are two basic blocks that were inserted to highlight the difference in the control flow whether the variable <code>a</code> results in greater than 500 or not. If indeed the condition is true, we change state by going to state 4, otherwise we go to state -1. Note that the number for each state is trivially a number chosen at random to identify each state with a label.</p></li><li><p>An attacker could still predict the instruction execution flow by following the evolution of the <code>state</code> variable. There are some gimmicks to obfuscate the value of the <code>state</code> variable such as using MBA expressions and aliasing. It is also possible to introduce unnecessary blocks, opaque predicates and dynamically construct the switch to divert the analyst or hinder the decompiler’s analysis.</p></li><li><p>the variable <code>state</code> is never assigned with the value <code>0x54292639</code>. So how do we ensure that the function terminates by returning <code>result</code>? In the previous code we used a small stratagem: we take advantage of not mentioning <code>break</code> within the switch branch. In this case, execution goes immediately from state <code>5</code> to state <code>0x54292639</code> because the program is executed sequentially (shown as “<strong>C Magic</strong>”). Sometimes it is possible that the compiler applies optimizations to not create the branch of 0x54292639, so be sure to disable the optimizations if you want the graph to be the same as the image above.</p></li></ul><p>Just out of curiosity, let’s try compiling a program that uses both <code>sum</code> functions to see how effective this kind of technique is. The program in fact has two functions <code>sum_1</code>, the obfuscated function, and <code>sum_2</code>, the original function. The <code>sum_2</code> function is decompiled correctly:</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>__int64</span> <span>__fastcall</span> <span>sum_2</span>(<span>int</span> a1, <span>int</span> a2){
</span></span><span><span>  <span>int</span> v3; <span>// [rsp+4h] [rbp-10h]
</span></span></span><span><span><span></span>
</span></span><span><span>  <span>if</span> ( a1 <span>&lt;=</span> <span>500</span> )
</span></span><span><span>    v3 <span>=</span> <span>0</span>;
</span></span><span><span>  <span>else</span>
</span></span><span><span>    v3 <span>=</span> <span>2</span>;
</span></span><span><span>  <span>return</span> (<span>unsigned</span> <span>int</span>)(v3 <span>+</span> a2 <span>+</span> a1 <span>+</span> <span>4</span>);
</span></span><span><span>}
</span></span></code></pre></div><p>The function is very similar to the original. In addition, the control flow graph constructed by IDA is not suspicious and looks the same as the graph constructed by us manually. Different is the case for <code>sum_1</code>:</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>__int64</span> <span>__fastcall</span> <span>sum_1</span>(<span>int</span> a1, <span>int</span> a2){
</span></span><span><span>  <span>int</span> v3; <span>// [rsp+8h] [rbp-14h]
</span></span></span><span><span><span></span>  <span>int</span> v4; <span>// [rsp+Ch] [rbp-10h]
</span></span></span><span><span><span></span>  <span>int</span> i; <span>// [rsp+10h] [rbp-Ch]
</span></span></span><span><span><span></span>
</span></span><span><span>  <span>for</span> ( i <span>=</span> <span>0</span>; ; i <span>=</span> <span>5</span> )
</span></span><span><span>  {
</span></span><span><span>    <span>while</span> ( <span>1</span> )
</span></span><span><span>    {
</span></span><span><span>      <span>while</span> ( <span>1</span> )
</span></span><span><span>      {
</span></span><span><span>        <span>while</span> ( i <span>==</span> <span>-</span><span>1</span> )
</span></span><span><span>        {
</span></span><span><span>          v3 <span>=</span> <span>0</span>;
</span></span><span><span>          i <span>=</span> <span>5</span>;
</span></span><span><span>        }
</span></span><span><span>        <span>if</span> ( i )
</span></span><span><span>          <span>break</span>;
</span></span><span><span>        v4 <span>=</span> <span>4</span>;
</span></span><span><span>        i <span>=</span> <span>2</span>;
</span></span><span><span>      }
</span></span><span><span>      <span>if</span> ( i <span>!=</span> <span>2</span> )
</span></span><span><span>        <span>break</span>;
</span></span><span><span>      <span>if</span> ( a1 <span>&lt;=</span> <span>500</span> )
</span></span><span><span>        i <span>=</span> <span>-</span><span>1</span>;
</span></span><span><span>      <span>else</span>
</span></span><span><span>        i <span>=</span> <span>4</span>;
</span></span><span><span>    }
</span></span><span><span>    <span>if</span> ( i <span>!=</span> <span>4</span> )
</span></span><span><span>      <span>break</span>;
</span></span><span><span>    v3 <span>=</span> <span>2</span>;
</span></span><span><span>  }
</span></span><span><span>  <span>return</span> (<span>unsigned</span> <span>int</span>)(v3 <span>+</span> a2 <span>+</span> a1 <span>+</span> v4);
</span></span><span><span>}
</span></span></code></pre></div><p>Meanwhile, we can say that we have managed to confuse the IDA decompiler. Indeed, we notice that a for is constructed, then 3 <code>while(1)</code> loops one inside the other. Although the result of the decompiler may not be exactly correct and is different from the original code, the program works. An attacker would then be able to pick up the program logic. This is a typical example of weak obfuscation: the attacker may have some difficulty reconstructing the original control flow, but there is a good chance that the initial logic can be recovered. To make it even more complex, we can use the other techniques: insertion of opaque predicates, transformations of constants, transformations of arithmetic Boolean expressions.</p><p>Returning to <code>fairplayd</code>, the control flow flattening technique is used heavily to try to obfuscate the control flow evolution that fairplay has during execution. We open with IDA the function <code>sub_10003FE60</code> and extract the logic of operation via the decompiler view. In particular, we can see that the decompiler can understand the use of a high-level switch-like structure:</p><div><pre tabindex="0"><code data-lang="C"><span><span><span>switch</span> ( (v7 <span>==</span> <span>0</span>) <span>+</span> v2 ){
</span></span><span><span>    <span>case</span> <span>0</span><span>:</span>
</span></span><span><span>      <span>JUMPOUT</span>(<span>0x100035E2CLL</span>);
</span></span><span><span>    <span>case</span> <span>1</span><span>:</span>
</span></span><span><span>      <span>JUMPOUT</span>(<span>0x10004359ELL</span>);
</span></span><span><span>    <span>case</span> <span>2</span><span>:</span>
</span></span><span><span>      <span>JUMPOUT</span>(<span>0x10005BECDLL</span>);
</span></span><span><span>    <span>case</span> <span>3</span><span>:</span>
</span></span><span><span>      v46 <span>=</span> v3;
</span></span><span><span>      v45 <span>=</span> a1;
</span></span><span><span>      v8 <span>=</span> v2 <span>^</span> <span>6u</span>;
</span></span><span><span>      v9 <span>=</span> v8 <span>-</span> <span>5</span>;
</span></span><span><span>      v10 <span>=</span> ((_DWORD)v8 <span>-</span> <span>5</span>) <span>|</span> <span>2u</span>;
</span></span><span><span>      ....
</span></span><span><span>}
</span></span></code></pre></div><p>However, by examining all cases within the switch, we will have nonsense instructions! This is because Apple’s developers have managed to heavily obfuscate the state variable, namely <code>v2</code> and <code>v7</code>. On the other hand, the decompiler recognizes the switch construct only by the presence of <strong>jump tables</strong>, particular tables whose entries consist of memory addresses to jump to. Suppose you have 5 branches of a switch, you can store 5 different addresses in memory, each associated with a different branch of the switch. When comparing, you would simply jump to the address pointed to the correct cell in the table. These tables are stored at specific locations in the binary, and with a little luck it is possible to restore them all.</p><p>To raise the bar of analysis difficulty even higher, the developers decided that for some functions the jump table would be recreated dynamically. Very briefly, the program allocates a memory space where addresses can be entered that will later be used as branches of a switch. The calculation of the addresses is done by the usual MBA expressions, and due to a number of technical limitations of static analysis it is not possible to determine the addresses exactly. This in a nutshell completely destroys any possibility for IDA and the analyst to recover the original program logic and structure.</p><p>Typical example of address construction comes from the last portion of code in each basic block (the fact that address construction occurs inline adds complexity to the code):</p><div><pre tabindex="0"><code data-lang="asm"><span><span><span>lea</span>     <span>r12</span>, <span>jpt_10003FF12</span>								<span>; address where to fetch the next address
</span></span></span><span><span><span></span><span>movsxd</span>  <span>rax</span>, <span>ds</span>:(<span>jpt_10003FF12</span> - <span>100218890</span><span>h</span>)[<span>r12</span><span>+</span><span>rax</span>*<span>4</span>] <span>; move the address referred by jpt_10003FF12 - 100218890h
</span></span></span><span><span><span></span><span>lea</span>     <span>rcx</span>, <span>loc_10005A140</span> 								<span>; load the address of loc_10005A140 (base address of jump table)
</span></span></span><span><span><span></span><span>add</span>     <span>rcx</span>, <span>rax</span>										<span>; add the rax value
</span></span></span><span><span><span></span><span>mov</span>     <span>r14</span>, [<span>rbp</span><span>+</span><span>var_58</span>]								<span>; save previous variable on stack
</span></span></span><span><span><span></span><span>jmp</span>     <span>rcx</span>												<span>; jump to next switch case
</span></span></span></code></pre></div><p>The control flow flattening technique thus turns out to be a good obfuscation technique by which Apple is able to prevent static analysis by attackers. Dynamic table construction, combined with the set of techniques mentioned in the previous subsections (opaque predicates, MBA) are the key to fairplayd obfuscation.</p><h2 id="are-further-obfuscation-measures-possible">Are further obfuscation measures possible?</h2><p>Throughout this article we have tried to identify some common obfuscation patterns that can be found in <code>fairplayd</code>, a userspace daemon used by Apple to protect copyrighted content within macOS. Some measures have proved effective: they actually complicate any attempt to accurately reverse engineer the program. The measure that is most complicit in this complication is given by the control flow flattening which eliminates the chances for an attacker to recover the original structure of the program. Attackers are faced with dynamically constructed jump tables, unrecoverable switches, and dynamically generated code.</p><p>Other obfuscation techniques seem to be good ideas, but only in theory: opaque predicates are simple enough to parse, and through a more thorough check of the building blocks it is possible to distinguish between the original code and the modified code to introduce obfuscation.</p><p>Is there a perfect fit to be able to obfuscate the code? Is it possible to devise a technique capable of producing unassailable protection? No. It will always be an ongoing evolution between tools that try to deobfuscate hidden content and new techniques to be able to bypass these tools and apply heavier obfuscation. This is given by the limitation of digital content management: the information must ultimately be able to be visible and therefore deobfuscate, as opposed to other types of information that can be hidden forever inside the devices. It is likely that after yet another article about obfuscation within <code>fairplayd</code> the protection measures will be updated again, causing the article content to be out of date.</p><p>One possible avenue that Apple could pursue to apply more powerful obfuscation is to move much of the execution to an obfuscation technique called “virtualization”. This technique involves writing an interpreter and a completely ad-hoc instruction set architecture to perform the operations necessary to decrypt the content. At the moment the technique doesn’t seem to be used inside <code>fairplayd</code>, but there are some signs (like switches with a lot of branches) that seem to predict the use of data evaluation and dynamic code production. Honestly, I haven’t had time to analyze this part in detail yet.</p><p>As always, if you have any criticisms, suggestions or any other comments, you can write an email to <a href="mailto:seekbytes@protonmail.com">seekbytes@protonmail.com</a><sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>. I never want to be the voice of the truth, so reports of errors or inaccuracies are always welcome.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Accessible Palette: stop using HSL for color systems (182 pts)]]></title>
            <link>https://wildbit.com/blog/accessible-palette-stop-using-hsl-for-color-systems</link>
            <guid>37307473</guid>
            <pubDate>Tue, 29 Aug 2023 13:21:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://wildbit.com/blog/accessible-palette-stop-using-hsl-for-color-systems">https://wildbit.com/blog/accessible-palette-stop-using-hsl-for-color-systems</a>, See on <a href="https://news.ycombinator.com/item?id=37307473">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody">
          

  
    
      <p>Recently, I set out on a mission to reconstruct a color system in <a href="https://postmarkapp.com/" target="_blank">Postmark</a>. This project addressed several problems with our design system, involved a lot of research, and even required building a few custom tools. Now that this project is finished, I want to share the most important lessons I learned about color and present a new design and accessibility tool <a href="https://accessiblepalette.com/" target="_blank">Accessible Palette</a> born out of this work.</p>

    
  
    
      <p>The main problems with our old palette were inconsistent perceived lightness of colors (blues and reds are much darker than yellows and greens) and unpredictable contrast ratios between color variants. When picking a color pair, we couldn’t easily tell if it would meet the recommendations from <a href="https://www.w3.org/TR/WCAG21/#contrast-minimum" target="_blank">Web Content Accessibility Guidelines</a> (WCAG) and had to manually check the contrast ratio. (Or, most likely… not&nbsp;check.)</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/pm-color-system-v1.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/pm-color-system-v1.png 2x" width="610" height="430" itemprop="image" alt="Postmark Color System v1 with inconsistent lightness" title="Postmark Color System v1 with inconsistent lightness"></p>

                      <figcaption><p>Postmark Color System v1 with inconsistent lightness</p></figcaption>
          
        </figure>
      
    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/pm-color-system-v1-cr.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/pm-color-system-v1-cr.png 2x" width="610" height="370" itemprop="image" alt="Contrast ratios against white background" title="Contrast ratios against white background"></p>

                      <figcaption><p>Contrast ratios against white background</p></figcaption>
          
        </figure>
      
    
  
    
      <p>In fact, both of these problems were caused by <a target="_blank" href="https://en.wikipedia.org/wiki/HSL_and_HSV#Disadvantages" rel="noreferrer nofollow noopener">the inherent fault in the HSL color model</a> and lack of support for better alternatives in the design tools. While HSL and HSV are fine choices for choosing a single color, they’re not suitable for building a color system, as they simply transform the RGB model and ignore the complexities of human perception. To see what’s wrong with them and find an alternative, we need to look at color theory and consider other color spaces.</p>
<h2>Stop using HSL for color systems!</h2>
<p>The <strong>RGB</strong> color model reflects how screens work and is not trying to be user-friendly or intuitive. Instead, in the 1970s, researchers came up with <strong>HSL</strong> (Hue, Saturation, Lightness) and <strong>HSV/HSB</strong> (Hue, Saturation, Value or Brightness) models as alternative representations of RGB, based on how humans think of colors. The intention was good, but they had to trade off perceptual relevance for computation speed, as more sophisticated models would have been too computationally expensive for that time. The resulting HSL and HSV models are easy mathematical transformations of RGB that don’t reflect a human perception of lightness or saturation.</p>
<p>Consider colors in this scale with the same Saturation (100) and Lightness (50) in&nbsp;HSL:</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/hsl-gradient-l50-s100.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/hsl-gradient-l50-s100.png 2x" width="610" height="140" itemprop="image" alt="HSL gradient with Saturation set to 100 and Lightness to 50" title="HSL gradient with Saturation set to 100 and Lightness to 50"></p>

          
        </figure>
      
    
  
    
      <p>While this scale may have consistent lightness according to the color model, it definitely feels wrong for a human&nbsp;— visually, blue (<code>#00F</code>) is much darker than yellow (<code>#FF0</code>) or cyan (<code>#0FF</code>). This happens because in HSL, fully saturated colors are mapped to the peak RGB values and placed around a Hue circle at a Lightness value of 50, with values of 0 and 100 corresponding to fully black and white, respectively. When a lighter or darker variant of the color is needed, it gets “mixed” with white or black. The central vertical axis comprises the range of <em>neutral</em> or <em>gray</em> colors with a Saturation of zero. (The difference between HSL and HSV is insignificant for this discussion, but instead of “mixing” colors, HSV represents how colors appear under bright light, so the most saturated colors have a Value of&nbsp;100.)</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_full/rgb-to-hsl-and-hsv.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/rgb-to-hsl-and-hsv.png 2x" width="960" height="450" itemprop="image" alt="RGB cube transformation to HSL and HSV cylinders" title="RGB cube transformation to HSL and HSV cylinders"></p>

                      <figcaption><p>Based on illustrations by Jacob Rus and Michael Horvath (SharkD), CC BY-SA 3.0, Wikimedia Commons.</p></figcaption>
          
        </figure>
      
    
  
    
      <p>Luckily, we’re not limited by computational speed anymore and can use better tools for this&nbsp;job.</p>
<h2>Meet CIELAB and LCh</h2>
<p>By the time HSL and HSV models were formalized, a better alternative already existed. The International Commission on Illumination (abbreviated CIE) defined the <strong>CIELAB or L*a*b*</strong> color space back in 1976. It was designed as a perceptually uniform color space, where a given <em>numerical change</em> corresponds to a similar <em>perceived change</em> in color. Unlike the RGB color model, CIELAB is designed to cover the entire range of visible colors, and its Lightness <em>(L*)</em> component closely matches human perception.</p>
<p>Here is how this color space is defined, <a target="_blank" href="https://en.wikipedia.org/wiki/CIELAB_color_space" rel="noreferrer nofollow noopener">according to Wikipedia</a>:</p>
<blockquote>The lightness value <em>L*</em> defines black at 0 and white at 100. The <em>a*</em> axis is relative to the green-red opponent colors, with negative values toward green and positive values toward red. The <em>b*</em> axis represents the blue-yellow opponents, with negative numbers toward blue and positive toward yellow.</blockquote>
<p>Earlier, I said that RGB isn’t user-friendly or intuitive. Well, CIELAB really put things into perspective.</p>

    
  
    
                              
            
        
                                
                                
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/Visible_gamut_within_CIELAB_color_space_D65_whitepoint_mesh.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal2x/Visible_gamut_within_CIELAB_color_space_D65_whitepoint_mesh.png 2x" width="610" height="610" itemprop="image" alt="Visible gamut within CIELAB color space" title="Visible gamut within CIELAB color space"></p>

                      <figcaption><p>Visible gamut within CIELAB color space (see also <a href="https://commons.wikimedia.org/wiki/File:Visible_gamut_within_CIELAB_color_space_D65_whitepoint_mesh.webm" target="_blank" rel="noreferrer noopener">as a video</a>). <em>a</em> and <em>b</em> are the horizontal axes; <em>L</em> is the vertical axis. Michael Horvath (SharkD), Christoph Lipka, CC BY-SA 4.0, via Wikimedia Commons.</p></figcaption>
          
        </figure>
      
    
  
    
      <p>Just as HSL and HSV are easier-to-use cylindrical representations of the RGB, <strong>CIELCh or LCh or Lch(ab)</strong> color space is a <a target="_blank" href="https://en.wikipedia.org/wiki/CIELAB_color_space#Cylindrical_model" rel="noreferrer nofollow noopener">cylindrical representation of CIELAB</a>. Chromaticity components <em>a*</em> and <em>b*</em> are replaced with <em>Chroma</em> (relative&nbsp;saturation) and <em>Hue</em> angle, while <em>Lightness</em> remains unchanged. The Hue angle is similar to the one in HSL, but they’re not identical&nbsp;— HSL/HSV uses the three additive primary colors red, green, and blue (H&nbsp;= 0, 120, 240°). Instead, the LCh system uses the four colors red, yellow, green, and blue (h&nbsp;= 0, 90, 180, 270°). (It’s worth mentioning there is a similar <a target="_blank" href="https://en.wikipedia.org/wiki/HCL_color_space" rel="noreferrer nofollow noopener"><strong>HCL or LCh(uv)</strong></a> color space with a Chroma on a uniform scale from 0 to 100, unlike an LCh(ab) where it varies based on Hue and Lightness.)</p>

    
  
    
                              
            
        
                                
                                
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/Visible_gamut_within_CIELCHab_color_space_D65_whitepoint_mesh.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal2x/Visible_gamut_within_CIELCHab_color_space_D65_whitepoint_mesh.png 2x" width="610" height="610" itemprop="image" alt="Visible gamut within CIELCh color space" title="Visible gamut within CIELCh color space"></p>

                      <figcaption><p>Visible gamut within CIELCh color space (see also <a href="https://commons.wikimedia.org/wiki/File:Visible_gamut_within_CIELCHab_color_space_D65_whitepoint_mesh.webm">as a video</a>). <em>L</em> is the vertical axis; <em>C</em> is the cylinder radius; <em>h</em> is the angle around the circumference. Michael Horvath (SharkD), Christoph Lipka, CC BY-SA 4.0, via Wikimedia Commons.</p></figcaption>
          
        </figure>
      
    
  
    
      <p>You may notice that, unlike HSL and HSV, LCh fits inside a cylinder but doesn’t fill it. This is expected, as some combinations of Lightness, Chroma, and Hue produce impossible colors&nbsp;— for example, a dark saturated yellow just doesn’t exist. The closer the visible gamut gets to black and white on a Lightness scale, the fewer colors can be distinguished by a human eye. In reality, not even all of these visible colors can be displayed on a screen&nbsp;— the sRGB gamut represents a typical screen and includes only about ⅓ of the LCh color space. That’s what we’re limited to in CSS as well, <a target="_blank" href="https://lea.verou.me/2020/04/lch-colors-in-css-what-why-and-how/" rel="noreferrer nofollow noopener">at least for now</a>.</p>

    
  
    
                              
            
        
                                
                                
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/SRGB_gamut_within_CIELCHab_color_space_isosurface.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal2x/SRGB_gamut_within_CIELCHab_color_space_isosurface.png 2x" width="610" height="610" itemprop="image" alt="The sRGB gamut plotted within the cylindrical LCh color space" title="The sRGB gamut plotted within the cylindrical LCh color space"></p>

                      <figcaption><p>The sRGB gamut plotted within the cylindrical LCh color space (see also <a href="https://commons.wikimedia.org/wiki/File:SRGB_gamut_within_CIELCHab_color_space_mesh.webm" target="_blank" rel="noreferrer noopener">as a video</a>). Michael Horvath (SharkD), Christoph Lipka, CC BY-SA 4.0, via Wikimedia Commons.</p></figcaption>
          
        </figure>
      
    
  
    
      <p>Let’s go back to our HSL color scale with Saturation of 100 and Lightness of 50 and see what its Lightness is in LCh:</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/hsl-gradient-with-lch-lightness.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/hsl-gradient-with-lch-lightness.png 2x" width="610" height="199" itemprop="image" alt="HSL gradient with LCh Lightness levels" title="HSL gradient with LCh Lightness levels"></p>

          
        </figure>
      
    
  
    
      <p>Now, these numbers make more sense&nbsp;— yellow is the lightest color, blue is the darkest, greens are almost three times lighter than blue or twice than reds. Let’s rebuild this scale in LCh with a consistent level of Lightness:</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/lch-controlled-lightness.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/lch-controlled-lightness.png 2x" width="610" height="335" itemprop="image" alt="LCh scale with a consistent level of Lightness" title="LCh scale with a consistent level of Lightness"></p>

          
        </figure>
      
    
  
    
      <p>Because of the varied Chroma component, some of these colors are more saturated than others, but their lightness is visually consistent. This doesn’t look good as a gradient but may be desirable in a color system&nbsp;— I want my colors for notifications and warnings more saturated than shades of the base text. Just for curiosity sake, let’s see how these scales look with more consistency in Chroma:</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/lch-controlled-lightness-and-chroma.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/lch-controlled-lightness-and-chroma.png 2x" width="610" height="335" itemprop="image" alt="LCh scale with consistent levels of Lightness and Chroma" title="LCh scale with consistent levels of Lightness and Chroma"></p>

          
        </figure>
      
    
  
    
      <p>Smooth as butter, even while we’re dealing with a limited sRGB color space. This is a great foundation for building a color system.</p>
<p>At this point, you may wonder why the design community does not widely use this powerful color space. As of today, neither Figma, Sketch, or Adobe XD support CIELAB or LCh. There is an <a target="_blank" href="https://www.figma.com/community/plugin/969496279507778512/LCH" rel="noreferrer nofollow noopener">LCH color picker</a> and <a target="_blank" href="https://www.figma.com/community/plugin/759433498184507623/Chromatic-Figma" rel="noreferrer nofollow noopener">Chromatic</a> plugins for Figma, but I didn’t find them sufficient to construct a flexible color system. <strong>The ideal tool for the job would generate color variants with persistent lightness, let me control the contrast ratio between them, and be flexible enough to accommodate existing brand colors.</strong> That’s when I discovered a <a target="_blank" href="https://gka.github.io/chroma.js/" rel="noreferrer nofollow noopener">Chroma.js library</a> with great LCh support and decided to write a simple tool to generate a new palette from code. After using this tool internally and sharing it with a few friends, we decided to turn it into an app and share it publicly as a project from our <a target="_blank" href="https://postmarkapp.com/labs" rel="noreferrer nofollow noopener">Labs</a>.</p>
<h2>Introducing Accessible Palette</h2>
<p><mark><strong><a href="https://accessiblepalette.com/" target="_blank">Accessible Palette</a> is an app for building color systems with consistent lightness and predictable contrast ratios across color levels.</strong></mark> It’s flexible enough to accommodate existing brand colors and lighter or darker palettes. Let’s see how it works:</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_full/accessiblepalette@2x.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/accessiblepalette@2x.png 2x" width="960" height="1076" itemprop="image" alt="The interface of the Accessible Palette app" title="The interface of the Accessible Palette app"></p>

                      <figcaption><p>The interface of the <a href="https://accessiblepalette.com/" target="_blank" rel="noreferrer noopener">Accessible Palette</a> app</p></figcaption>
          
        </figure>
      
    
  
    
      <ul><li>You begin by tweaking one of the <strong>starting colors</strong> or pasting the existing color from your design. The tool will use color’s Chroma and Hue to calculate a scale with multiple lightness levels.</li><li><strong>Lightness</strong> is completely customizable and can work both with light and dark palettes. It also provides granular control over a palette to include existing brand colors. In our case, I wanted to preserve the three most used colors from the original Postmark palette&nbsp;— yellow <code>#FFDE00</code>, blue <code>#007DCC</code>, and green <code>#4FC47F</code>. After taking them as starting colors, I used their Lightness values (88.6, 75.2, and 50.6, respectively) as lightness for levels 200, 400, and 600.</li><li><strong>Contrast ratio</strong> depends on Lightness and is calculated for every level using both current WCAG 2.1 Recommendations and a new algorithm in an upcoming 3.0 Working Draft. (The current way of measuring contrast is flawed, but we’ll talk about this later.) By default, the contrast of every color is measured against a white background, but you can select any color swatch to measure the contrast ratio against it.</li><li>Levels can be generated using <strong>RGB or CIELAB</strong> color space. In some cases, the results can be different, so it’s worth experimenting. In the Postmark color scheme, using CIELAB reduced purplish tint in lighter reds (good) but increased in blues (bad).</li></ul>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/cielab-vs-rgb-scale.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/cielab-vs-rgb-scale.png 2x" width="610" height="440" itemprop="image" alt="Red and blue scales generated in CIELAB and RGB color spaces" title="Red and blue scales generated in CIELAB and RGB color spaces"></p>

          
        </figure>
      
    
  
    
      <ul><li>For some colors, you may want to <strong>shift Hue across the range</strong>. Our bright yellow is a good example&nbsp;— as it gets darker, colors get a greenish shade. To shift them a little closer to orange, I use a negative Hue compensation.</li></ul>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/hue-shift.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/hue-shift.png 2x" width="610" height="250" itemprop="image" alt="Shifting Hue across the range of colors" title="Shifting Hue across the range of colors"></p>

          
        </figure>
      
    
  
    
      <ul><li>As you use the app, it <strong>updates the URL to save changes</strong>. Share it with your team, or add it to your Figma library and a CSS file with color variables for future reference.</li></ul>
<p>The app can be used to generate all kinds of color palettes. Use them as a final color system or as a foundation to build upon. To see some real-world examples, check out a new <a target="_blank" href="https://accessiblepalette.com/?lightness=98,93.3,88.6,79.9,71.2,60.5,49.8,38.4,27,15.6&amp;e94c49=1,0&amp;F1903C=1,-10&amp;f3e203=1,-15&amp;89BF1D=0,0&amp;64c273=0,15&amp;007DCC=0,0&amp;808080=0,0&amp;EAE8DE=0,0&amp;768092=0,0" rel="noreferrer nofollow noopener">Postmark color palette</a> or palettes based on <a target="_blank" href="https://accessiblepalette.com/?lightness=98.2,96.5,94,89.5,77,65,49.5,41,28,20&amp;D81B60=0,0&amp;E53935=0,0&amp;F4511E=0,0&amp;FB8C00=0,0&amp;FFB300=0,0&amp;FDD835=0,0&amp;C0CA33=0,0&amp;7CB342=0,0&amp;43A047=0,0&amp;00897B=0,0&amp;00ACC1=0,0&amp;039BE5=0,0&amp;1E88E5=0,0&amp;3949AB=0,0&amp;5E35B1=0,0&amp;8E24AA=0,0&amp;FAFAFA=0,0" rel="noreferrer nofollow noopener">Google’s Material Design</a> or <a target="_blank" href="https://accessiblepalette.com/?lightness=98,96,91.5,85,67,48,36,27,16,8&amp;DB2777=0,0&amp;DC2626=0,0&amp;D97706=0,-10&amp;059669=0,0&amp;007afd=0,0&amp;4F46E5=0,0&amp;7C3AED=1,0&amp;47556a=0,0" rel="noreferrer nofollow noopener">TailwindCSS</a>. They’re not exact replicas, but alternative takes inspired by the original colors and levels of lightness.</p>
<h2>Bonus: How are contrast ratios calculated?</h2>
<p>So why does Accessible Palette show <em>two</em> different contrast ratios? WCAG 2.1 calculates the contrast ratio by dividing the luminance of the foreground color by the luminance of the background. The problem is this formula provides a linear response, while humans perceive the contrast between lighter colors as higher than between darker colors. Consider these examples:</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/wcag-2-cr-issues.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/wcag-2-cr-issues.png 2x" width="610" height="411" itemprop="image" alt="Problems with contrast ratio algorithm in WCAG 2.1" title="Problems with contrast ratio algorithm in WCAG 2.1"></p>

          
        </figure>
      
    
  
    
      <p>In practice, samples meeting the WCAG 2.1 recommendations are harder to read than those with an “insufficient” contrast ratio. Luckily, W3C is aware of this problem, as <a target="_blank" href="https://github.com/w3c/wcag/issues/695" rel="noreferrer nofollow noopener">Andrew Somers started an open discussion</a> back in 2019. (It’s a fascinating and deep reading if you have a spare evening or two.) He proposed a better working algorithm that is now a part of the <a target="_blank" href="https://www.w3.org/TR/wcag-3.0/#visual-contrast-of-text" rel="noreferrer nofollow noopener">WCAG 3 Working Draft</a> and built an <a target="_blank" href="https://www.myndex.com/APCA/" rel="noreferrer nofollow noopener">APCA Contrast Calculator</a> that is perceptually accurate and also takes font size and weight into account. Accessible Palette uses his Advanced Perceptual Contrast Algorithm (APCA) and considers score 60 as the minimum level recommended for readable text, similar to the old 4.5:1 contrast ratio recommendation in WCAG 2.1.</p>
<p>Let’s see how our examples will hold up with the new algorithm:</p>

    
  
    
                              
            
        
                                
          
        
                                    
      

      
              <figure>
          <p><img src="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/_normal/wcag-3-cr.png" srcset="https://storage.googleapis.com/public-assets.wildbit.com/blog-images/2021/09/wcag-3-cr.png 2x" width="610" height="461" itemprop="image" alt="Improved contrast ratio algorithm in WCAG 3 Working Draft" title="Improved contrast ratio algorithm in WCAG 3 Working Draft"></p>

          
        </figure>
      
    
  
    
      <p>Does it mean that WCAG 2.1 contrast ratio is useless? No, it’s still fairly accurate for mid-range colors, but overall the new algorithm is a massive improvement. Keep in mind that it’s still a Working Draft and may change over time. For maximum future-proofness and compliance with current guidelines, try building your color system with both guidelines in mind.<br></p>
<p>As I started working on Postmark’s new color system, I didn’t expect to give up on the most commonly used color model or question WCAG’s current guidelines. This project led me down the rabbit hole of color theory and resulted in a tool that can help build consistent and accessible color palettes with very little effort. This is a rare situation when both designers and users win in the end. If you end up using Accessible Palette for your project or have questions about it, please <a href="mailto:hello@efedorenko.com">send me an email</a>&nbsp;or <a href="https://twitter.com/efedorenko" target="_blank">reach out on Twitter</a>!</p>

    
  
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon CEO tells staff to work in office 3 days a week or look for another job (118 pts)]]></title>
            <link>https://www.theguardian.com/technology/2023/aug/29/amazon-ceo-staff-work-in-office-job-workers</link>
            <guid>37307032</guid>
            <pubDate>Tue, 29 Aug 2023 12:52:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/technology/2023/aug/29/amazon-ceo-staff-work-in-office-job-workers">https://www.theguardian.com/technology/2023/aug/29/amazon-ceo-staff-work-in-office-job-workers</a>, See on <a href="https://news.ycombinator.com/item?id=37307032">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="maincontent"><p>Amazon’s CEO has told workers “it’s probably not going to work out” for them at the tech company unless they are prepared to come into the office at least three days a week.</p><p>Andy Jassy made the statement in a meeting where he made clear his frustration that some employees were not coming in three days a week, despite that being Amazon’s official policy. The comments were first reported by Insider.</p><p>He said: “It’s past the time to disagree and commit. If you can’t disagree and commit … it’s probably not going to work out for you at Amazon because we are going back to the office at least three days a week.”</p><figure id="039faa03-9527-4cf9-ad15-c7cf3686ca09" data-spacefinder-role="richLink" data-spacefinder-type="model.dotcomrendering.pageElements.RichLinkBlockElement"><gu-island name="RichLinkComponent" deferuntil="idle" props="{&quot;richLinkIndex&quot;:3,&quot;element&quot;:{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.RichLinkBlockElement&quot;,&quot;url&quot;:&quot;https://www.theguardian.com/business/2023/aug/22/work-from-home-revolution&quot;,&quot;text&quot;:&quot;‘The office is for socializing’: how work from home has revolutionized work&quot;,&quot;prefix&quot;:&quot;Related: &quot;,&quot;role&quot;:&quot;richLink&quot;,&quot;elementId&quot;:&quot;039faa03-9527-4cf9-ad15-c7cf3686ca09&quot;},&quot;ajaxUrl&quot;:&quot;https://api.nextgen.guardianapps.co.uk&quot;,&quot;format&quot;:{&quot;display&quot;:0,&quot;theme&quot;:0,&quot;design&quot;:0}}"></gu-island></figure><p>Amazon had instructed its employees to return to the office three times a week starting in May, after previous policies that allowed individual teams to decide whether they came into the office or not. Through <a href="https://www.aboutamazon.co.uk/news/company-news/update-from-andy-jassy-on-return-to-office-plans" data-link-name="in body link">an announcement on the company’s blog</a>, Jessy said the leadership team had decided that it was better for Amazon’s culture and easier to learn from each other and collaborate more effectively when they are in office together.</p><p>This comes after Amazon said it would lay off an additional 9,000 employees, as well as the 18,000 roles it announced it would cut in January.</p><p>Almost <a href="https://www.businessinsider.com/amazon-return-to-office-policy-petition-30000-staff-remote-work-2023-3?r=US&amp;IR=T#:~:text=Almost%2030%2C000%20Amazon%20staff%20signed,return%2Dto%2Doffice%20policy." data-link-name="in body link">30,000 Amazon</a> staff signed an internal petition against the return-to-office mandate in May.</p><p>The petition <a href="https://secure.everyaction.com/fdayaNVWzUmhz_UqcGp0-A2" data-link-name="in body link">read</a>: “Amazon’s top-down, one-size-fits-all RTO [return to office] mandate undermines the diverse, accessible future that we want to be a part of.”</p><p>Amazon employees also participated in a <a href="https://www.theguardian.com/technology/2023/may/31/amazon-workers-walkout-seattle-layoffs" data-link-name="in body link">worldwide walkout</a>, organised by Amazon Employees for Climate Justice and a remote work advocacy group. The walkout was a protest against the company’s slow progress on climate goals and the return to office mandate.</p><p>This month, some Amazon workers in the US reported being <a href="https://www.theguardian.com/technology/2023/aug/11/amazon-starting-to-track-and-penalize-workers-who-work-from-home-too-much" data-link-name="in body link">tracked and penalised</a> for not spending sufficient time in the company’s offices, an email sent to employees revealed.</p><figure data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.NewsletterSignupBlockElement"><a data-ignore="global-link-styling" href="#EmailSignup-skip-link-10">skip past newsletter promotion</a><p id="EmailSignup-skip-link-10" tabindex="0" aria-label="after newsletter promotion" role="note">after newsletter promotion</p></figure><p>The emails received by employees noted that staff members were “not currently meeting our expectation of joining your colleagues in the office at least three days a week”, according to <a href="https://www.ft.com/content/7f058b6f-3a2b-4aeb-b77b-dc68102ebd77" data-link-name="in body link">the Financial Times</a>.</p><p>Amazon’s move follows Apple and <a href="https://www.sfchronicle.com/tech/article/Elon-Musk-orders-Twitter-employees-back-to-the-17575090.php" data-link-name="in body link">X’s measures</a> to get employees back in the office, with Apple threatening punitive action against staff who did not return to the office part-time, and the CEO of X, Elon Musk, ordering all employees to be in office unless they had a specific exemption.</p><p>Amazon was contacted for comment.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Duet AI for Google Workspace Now Available (106 pts)]]></title>
            <link>https://workspace.google.com/blog/product-announcements/duet-ai-in-workspace-now-available</link>
            <guid>37306530</guid>
            <pubDate>Tue, 29 Aug 2023 12:11:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://workspace.google.com/blog/product-announcements/duet-ai-in-workspace-now-available">https://workspace.google.com/blog/product-announcements/duet-ai-in-workspace-now-available</a>, See on <a href="https://news.ycombinator.com/item?id=37306530">Hacker News</a></p>
<div id="readability-page-1" class="page"><div jsname="tx2NYc"><section><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95"><p>Today we’re making <a href="https://workspace.google.com/blog/product-announcements/duet-ai">Duet AI for Google Workspace</a> generally available, and you can <a href="https://inthecloud.withgoogle.com/duet-ai-ga-contact-sales-form/register.html">get started now with a no-cost trial</a>. With over 3 billion users and more than 10 million paying customers who rely on it every day to get things done, Google Workspace is the world’s most popular productivity tool. Our pioneering technology makes collaborating with people easy, fun, and ubiquitously available. With the <a href="https://workspace.google.com/blog/product-announcements/duet-ai">introduction of Duet AI</a>, we added AI as a real-time collaborator. Since its launch, thousands of companies and more than a million trusted testers have used Duet AI as a powerful collaboration partner that can act as a coach, source of inspiration, and productivity booster — all while ensuring every user and organization has <a href="https://workspace.google.com/blog/identity-and-security/protecting-your-data-era-generative-ai">control over their data</a>.&nbsp;</p><h3>Introducing the next wave of AI innovation in Workspace</h3><p>Sometimes it feels like there isn’t enough time in the day — with so much email, so many meetings, and countless action items to follow up on, work can feel daunting. What if you had an intelligent, real-time collaboration partner that dramatically reduced that burden? With Duet AI, you get to focus on what really matters while it can take care of the rest.&nbsp;</p><p>So let’s see how Duet AI can help you in your daily life. Imagine you’re a financial analyst and you get an email at 5 PM from your boss asking for a presentation on Q3 performance by 8 AM tomorrow — we’ve all been there. Instead of scrambling through forecasts in Sheets, P&amp;L Docs, Monthly Business Review Slides, and reading emails from the regional sales leads, you’ll soon be able to simply ask Duet AI to do the heavy lifting with a prompt like “create a summary of Q3 performance.” Duet AI can create a whole new presentation, complete with text, charts, and images, based on your relevant content in Drive and Gmail. A last-minute request that once called for an all-nighter, can now be completed before dinner time. <br></p></span></section><section><figure><section jscontroller="SCGBie" jsaction="rcuQ6b:npT2md"><img src="https://storage.googleapis.com/gweb-cloudblog-publish/original_images/20623_DuetAI_WS_Blog_SIDEPANEL_v3.gif" alt="https://storage.googleapis.com/gweb-cloudblog-publish/original_images/20623_DuetAI_WS_Blog_SIDEPANEL_v3.gif" jsname="P3Vluc" jsaction="click:HTIlC" loading="lazy"></section></figure><p><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95">Duet AI can reduce the burden of work by generating a summary from your relevant source documents and automatically building a presentation in Slides.</span></p></section><section><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95"><h3>Meetings you’ll love — even the ones you miss</h3><div><p>For many of us, our days are filled with meetings and it can be exhausting to attend so many, or worse, try to catch up on the ones we miss. What if there was a way for Duet AI to make our meetings less fatiguing and more fulfilling?</p><p>The most important part of any meeting is being clearly seen, heard, and understood, but sometimes things can get in the way, like camera and sound quality, a slow internet connection, or language barriers. We’re putting <b>Duet AI in Google Meet</b> to help ensure you look and sound your best with <b>studio look</b>, <b>studio lighting</b>, and <b>studio sound</b>. And because sometimes it’s hard for remote participants to see everyone in the conference room, or their colleagues appear far away and out of focus, we’re rolling out <b>dynamic tiles</b> and <b>face detection</b> that give attendees in a meeting room their own video tile with their name. We’re also launching <b>automatic translated captions</b> for 18 languages; Meet will automatically detect when another language is spoken and display the translation in real time.&nbsp;</p></div><p>And to help you better engage during meetings, we’re removing the burden of note-taking and sending out recaps. <b>Duet AI can capture notes, action items, and video snippets in real time with the new “take notes for me” feature and it will send a summary to attendees after the meeting</b>. It can even help get latecomers up to speed with “<b>summary so far</b>,” which gives a quick snapshot of everything they’ve missed. But what if you can’t make the meeting and have some input to share? With <b>“attend for me” Duet AI will be able to join the meeting on your behalf</b>, delivering your message and ensuring you get the recap.</p></span></section><section><figure><section jscontroller="SCGBie" jsaction="rcuQ6b:npT2md"><img src="https://storage.googleapis.com/gweb-cloudblog-publish/original_images/20623_DuetAI_WS_Blog_MEET_v4_2.gif" alt="https://storage.googleapis.com/gweb-cloudblog-publish/original_images/20623_DuetAI_WS_Blog_MEET_v4_2.gif" jsname="P3Vluc" jsaction="click:HTIlC" loading="lazy"></section></figure><p><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95">Duet AI can make your next meeting more productive with an automatically generated&nbsp; meeting summary and action items for you to send out as a recap to participants.</span></p></section><section><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95"><h3>Staying connected just got easier</h3><p>Not every conversation needs a meeting, and sometimes collaboration happens on the go. You might just need a quick chat to connect with your team or solve a problem. Google Chat now makes that a whole lot easier with a <b>refreshed user interface</b>, <b>new shortcuts</b>, and <b>enhanced search</b> that let you stay on top of conversations. You can also <b>chat directly with Duet AI</b> to ask questions about your content, get a summary of documents shared in a space, and catch up on missed conversations.</p><p>When you need to talk it through in real time, you can switch to voice in an instant with <b>huddles in Chat</b>, right from the space where you’re already collaborating. Huddles are audio-first, impromptu gatherings powered by Meet that help distributed teams come together in real time without having to jump into a separate scheduled meeting. We’re also making it easier to build larger communities across Chat, with <b>support for up to 500,000 participants</b>. And for those times when you need to respond to a timely email but you’re on the move, or focused on a top priority, <b>we’re </b><b>enhancing smart reply</b> in Gmail with Duet AI, allowing you to draft longer personalized replies — with a single tap.</p></span></section><section><figure><section jscontroller="SCGBie" jsaction="rcuQ6b:npT2md"><img src="https://storage.googleapis.com/gweb-cloudblog-publish/original_images/20623_DuetAI_WS_Blog_CHAT_v4B.gif" alt="https://storage.googleapis.com/gweb-cloudblog-publish/original_images/20623_DuetAI_WS_Blog_CHAT_v4B.gif" jsname="P3Vluc" jsaction="click:HTIlC" loading="lazy"></section></figure><p><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95">A refreshed user interface and huddles in Chat can make it easier to connect with your team and come together in real time for impromptu gatherings.</span></p></section><section><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95"><h3>How we're protecting your Workspace data in the era of generative AI</h3><p>In Workspace, we’ve always held user privacy and security at the very core of what we do. With Duet AI, <a href="https://workspace.google.com/blog/identity-and-security/protecting-your-data-era-generative-ai">we continue that promise</a>, and you can rest assured that your interactions with Duet AI are private to you. No other user will see your data and Google does not use your data to train our models without your permission. Building on these core commitments, we recently <a href="https://workspace.google.com/blog/identity-and-security/accelerating-zero-trust-and-digital-sovereignty-ai">announced new capabilities</a> to help prevent cyber threats, provide safer work with built-in zero trust controls, and better support our customers’ digital sovereignty and compliance needs.</p><h3>Growing the thriving ecosystem around Workspace</h3><p>Organizations are already collaborating and getting work done in Workspace, and they want their favorite third-party apps to work there as well so they can get more done in a single place. Workspace has always been an open ecosystem, and we remain committed to its growth through partnerships with trusted technology providers. And this includes partners who are innovating with generative AI. For example, we’re working with <a href="https://www.typeface.ai/">Typeface</a> and <a href="http://jasper.ai/">Jasper</a> to enable marketers to use generative AI to create personalized content at scale, right within Workspace.&nbsp;</p></span></section><section><figure><section jscontroller="SCGBie" jsaction="rcuQ6b:npT2md"><img src="https://storage.googleapis.com/gweb-cloudblog-publish/images/Screenshot_2023-08-22_at_3.41.23_PM.max-1100x1100.png" alt="https://storage.googleapis.com/gweb-cloudblog-publish/images/Screenshot_2023-08-22_at_3.41.23_PM.max-1100x1100.png" jsname="P3Vluc" jsaction="click:HTIlC" loading="lazy"></section></figure><p><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95">We’re partnering with a growing list of trusted technology providers to help users simplify workflows and tap into innovative tools.</span></p></section><section><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95"><h3>Get started today with Duet AI </h3><p>Google has been responsibly bringing AI to life for over a decade in ways that delight and help our users. With Duet AI, we’re now helping people get back to the best parts of their jobs, to the parts that rely on human creativity, ingenuity, and expertise. And because Duet AI works alongside the tools you already use, it’s easy to get started, even if you’re using another productivity solution. <b>Try out this new way of working today </b>with a <a href="https://inthecloud.withgoogle.com/duet-ai-ga-contact-sales-form/register.html">no-cost trial</a>.</p></span></section><section><span>Posted in</span><ul><li><a href="https://workspace.google.com/blog/product-announcements" data-g-event="tag list: body" data-g-action="product announcements" data-g-label="https://workspacegooglecom/blog/product-announcements">Product Announcements</a></li><li><a href="https://workspace.google.com/blog/ai-and-machine-learning" data-g-event="tag list: body" data-g-action="ai and machine learning" data-g-label="https://workspacegooglecom/blog/ai-and-machine-learning">AI and Machine Learning</a></li></ul></section></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[New study finds microplastics infiltrate all systems of body, alter behaviour (261 pts)]]></title>
            <link>https://www.sustainableplastics.com/news/microplastics-found-pass-blood-brain-barrier-even-though-ingested-drinking-water</link>
            <guid>37306427</guid>
            <pubDate>Tue, 29 Aug 2023 11:59:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.sustainableplastics.com/news/microplastics-found-pass-blood-brain-barrier-even-though-ingested-drinking-water">https://www.sustainableplastics.com/news/microplastics-found-pass-blood-brain-barrier-even-though-ingested-drinking-water</a>, See on <a href="https://news.ycombinator.com/item?id=37306427">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody" data-block-plugin-id="entity_field:node:field_paragraphs">
<p>A news study conducted by University of Rhode Island Professor Jaime Ross investigating the infiltration of microplastics in mammals has revealed that this is far more widespread than initially thought. In fact, the plastic particles were found to bioaccumulate in every organ, including, startlingly enough, the brain.</p>

<p>Microplastics are among the most pervasive pollutants on the planet. They have been <a href="https://www.sustainableplastics.com/news/its-raining-plastic-say-researchers" data-omnilocation="articlebody" data-omnilink="editorial-link">discovered in the air</a>, in <a href="https://www.sustainableplastics.com/news/microplastics-pollution-levels-thames-are-devastating-aquatic-life" data-omnilocation="articlebody" data-omnilink="editorial-link">water systems </a>and food chains around the world. While their negative impacts on marine organisms have been established, few studies have examined the potential health impacts on mammals.</p>

<p>“Research on the health effects of microplastics, especially in mammals, is still very limited,” said Ross, an assistant professor of biomedical and pharmaceutical sciences at the Ryan Institute for Neuroscience and the College of Pharmacy.</p>

<p>The study noted that humans are exposed to microplastics&nbsp; through the consumption of ‘water, seafood, consumer products (clothes, toothpaste, salt, sugar, honey, beer, anything stored in plastic bottles, plastic wrap, or cans/cartons lined with plastic), and via inhalation from textiles, synthetic rubber tires, and plastic covers’. They have been detected, among others, in <a href="https://www.sustainableplastics.com/news/dutch-study-finds-microplastics-human-blood-first-time" data-omnilocation="articlebody" data-omnilink="editorial-link">blood</a> and even breast milk - findings that warrant more investigation into the health outcomes of such exposure in mammals. Currently, there are limited studies that address the potential adverse effects of exposure to MPs on brain health in mammals and even fewer studies that consider age as an additional factor that may impact the outcome of exposure to microplastics - the reason Ross and her team chose to focus on neurobehavioral effects and inflammatory response to exposure to microplastics, as well as the accumulation of microplastics in tissues. Together with graduate students Lauren Gaspar and Sydney Bartman, she examined the biological and cognitive consequences of exposure to microplastics in mice.</p>

<p>The drinking water of a diverse group of older and younger mice was spiked with microplastics over a period of three weeks - with ‘striking’ results, said Ross. The researchers found that exposure to microplastics - in this case, fluorescent polystyrene particles -&nbsp; induced both behavioural changes and alterations in immune markers in liver and brain tissues. The mice in the study began to move peculiarly, and to exhibit behaviours reminiscent of dementia in humans. The results were even more profound in older animals.</p>

<p>“These were not high doses of microplastics, but in only a short period of time, we saw these changes,” Ross said. “Nobody really understands the life cycle of these microplastics in the body, so part of what we want to address is the question of what happens as you get older. Are you more susceptible to systemic inflammation from these microplastics as you age? Can your body get rid of them as easily? Do your cells respond differently to these toxins?”</p>

<p>After three weeks, dissection of the mice revealed that the ingested PS micro-particles had infiltrated every every tissue sample - liver, kidney, gastrointestinal tract, lung, spleen, heart, and brain tissues from both young and old exposed mice&nbsp; - tested. The particles were also observed in the mice’s bodily wastes.</p>

<p>“The detection of MPs in tissues such as the heart and lungs … suggests that the PS-MPs (polystyrene microplastics) are going beyond the digestive system and likely undergoing systemic circulation,” the authors write. An observation they note that is further supported by the detection of microplastics in urine and the brain, indicating they can pass the blood–brain barrier.</p>

<p>That brain infiltration also may cause a decrease in glial fibrillary acidic protein, called “GFAP”, a protein that supports many cell processes in the brain, results have shown. Previous studies have suggested that GFAP expression might decrease in early stages of some neurodegenerative diseases, such as Alzheimer’s disease, or in younger patients with depression disorders.</p>

<p>What is especially concerning is the fact that these changes were seen after just three weeks of exposure to microplastics. As human exposure today is inevitable it is therefore essential to better understand their toxicity to limit their impact on human health. The present study, showed that in just three weeks, polystyrene particles measuring 0.1 and 2 μm can reduce cell viability, translocate throughout the body, accumulate in tissues including brain tissue, markedly modify behaviour in mice, and significantly alter immune markers in both the liver and the brain. Additionally, the effects of exposure seem to be age-dependent.</p>

<p>Future work is needed to examine these factors in order to understand the mechanisms behind these effects and the changes seen with age, said Ross.</p>

<p>“We want to understand how plastics may change the ability for the brain to maintain its homeostasis or how exposure may lead to neurological disorders and diseases, such as Alzheimer’s disease,” she said.</p>

<p>The study was published in the International Journal of Molecular Science. It was supported by the Rhode Island Medical Research Foundation, Roddy Foundation, Plastics Initiative, URI College of Pharmacy, George and Anne Ryan Institute for Neuroscience, and the Rhode Island Institutional Development Award (IDeA) Network of Biomedical Research Excellence from the National Institute of General Medical Sciences of the National Institutes of Health.</p>

<p><i>Int. J. Mol. Sci.</i> 2023, <i>24</i>(15), 12308; <a href="https://doi.org/10.3390/ijms241512308" data-omnilocation="articlebody" data-omnilink="editorial-link">https://doi.org/10.3390/ijms241512308</a></p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Elevator Saga: An elevator programming game (2015) (101 pts)]]></title>
            <link>https://play.elevatorsaga.com/index.html</link>
            <guid>37306262</guid>
            <pubDate>Tue, 29 Aug 2023 11:43:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://play.elevatorsaga.com/index.html">https://play.elevatorsaga.com/index.html</a>, See on <a href="https://news.ycombinator.com/item?id=37306262">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <div>
            
            <p><a href="https://github.com/magwo/elevatorsaga/wiki/">Wiki &amp; Solutions</a>
            <a href="https://play.elevatorsaga.com/documentation.html#docs">Documentation</a>
            <a href="https://play.elevatorsaga.com/documentation.html">Help</a>
        </p></div>

        

        

        <div>
                <p><span>Transported</span><span></span></p>
                <p><span>Elapsed time</span><span></span></p>
                <p><span>Transported/s</span><span></span></p>
                <p><span>Avg waiting time</span><span></span></p>
                <p><span>Max waiting time</span><span></span></p>
                <p><span title="Number of floors that have been travelled by elevators">Moves</span><span></span></p>
            </div>

        
        
        

        <p>
            <h3>Confused? Open the <a href="https://play.elevatorsaga.com/documentation.html">Help and API documentation</a> page</h3>
        </p>
        <p>
            <h4>Made by Magnus Wolffelt and contributors</h4>
            <h4>Version <span>1.6.5</span></h4>
            <h4><a href="https://github.com/magwo/elevatorsaga">Source code</a> on GitHub</h4>
            <h4><a href="https://play.elevatorsaga.com/test/index.html">Run tests</a></h4>
        </p>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Grave flaws in BGP Error handling (184 pts)]]></title>
            <link>https://blog.benjojo.co.uk/post/bgp-path-attributes-grave-error-handling</link>
            <guid>37305800</guid>
            <pubDate>Tue, 29 Aug 2023 10:51:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.benjojo.co.uk/post/bgp-path-attributes-grave-error-handling">https://blog.benjojo.co.uk/post/bgp-path-attributes-grave-error-handling</a>, See on <a href="https://news.ycombinator.com/item?id=37305800">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<h3>Aug 29 2023</h3>

<p><img src="https://blog.benjojo.co.uk/asset/ipvnQ92fc1" alt="A broken fuse"></p>
<p>Border Gateway Protocol is the de facto protocol that directs routing decisions between different ISP networks, and is generally known as the “glue” that holds the internet together. It’s safe to say that the internet we currently know would not function without working BGP implementations.</p>
<p>However, the software on those networks’ routers (I will refer to these as edge devices from now on) that implements BGP has not had a flawless track record. Flaws and problems do exist in commercial and open source implementations of the world’s most critical routing protocol.</p>
<p>Most of these flaws are of course benign in the grand scheme of things; they will be issues around things like route filtering, or insertion, or <a href="https://blog.benjojo.co.uk/post/bgp-stuck-routes-tcp-zero-window">handling withdraws</a>. However a much more scary issue is a BGP bug that can propagate after causing bad behaviour, akin to a <a href="https://en.wikipedia.org/wiki/Computer_worm">computer worm</a>.</p>
<p>While debugging support for a future feature for my business (bgp.tools) I took a brief diversion to investigate something, and what I came out with might be one of the most concerning things I’ve discovered for the reliability of the internet. To understand the problems, though, we will need a bit more context.</p>
<h2>A mistaken attribute</h2>
<p>On 2 June 2023, a <a href="https://bgp.tools/as/264366">small Brazilian network</a> (re)announced one of their internet routes with a small bit of information called an attribute that was corrupted. The information on this route was for a feature that had not finished standardisation, but was set up in such a way that if an intermediate router did not understand it, then the intermediate router would pass it on unchanged.</p>
<p>As many routers did not understand this attribute, this was no problem for them. They just took the information and propagated it along. However it turned out that Juniper routers running even slightly modern software did understand this attribute, and since the attribute was corrupted the software in its default configuration would respond by raising an error that would shut down the whole BGP session. Since a BGP session is often a critical part of being “connected” to the wider internet, this resulted in the small Brazilian network disrupting other networks’ ability to communicate with the rest of the internet, despite being 1000’s of miles away.</p>
<p>The packet that causes session shutdowns was really quite benign at first glance:</p>
<p><img src="https://blog.benjojo.co.uk/asset/7CcFultij0" alt="A screenshot of wireshark"></p>
<p>When a BGP session shuts down due to errors, customer network traffic generally stops flowing down that cable until the BGP connection is automatically restarted (typically within seconds to minutes).</p>
<p>This appears to be what happened to a number of different carriers, for example <a href="https://bgp.tools/as/8220">COLT</a> was heavily impacted by this. Their outage is what originally drew some of my attention to this subject area.</p>
<p>To understand why this sort of thing can happen, we’ll need to take a deeper look at what BGP route attributes are, and what they’re used for.</p>
<h2>What is a BGP Route Attribute?</h2>
<p>At their core a BGP UPDATEs purpose is to tell another router about some traffic that it can (or can no longer) send to it. However just knowing directly what you can send to another router is not very useful without <em>context</em>.</p>
<p>For this reason a BGP packet is split up into two sections: the Network Layer Reachability Information (NLRI) data (aka, the IP address ranges), and the attributes that help describe extra context about that reachability data.</p>
<p>Arguably the most used attribute is the AS_PATH (or actually, the AS4_PATH), an attribute that tells you which networks a route has travelled through to get to you. Routers use this list of networks to pick paths for their traffic that are either the fastest, economically viable, or least congested, playing a critical role in ensuring that things run smoothly.</p>
<p>At the time of writing there are over 32 different route attribute types, 14 deprecated ones, and 209 officially unassigned ones. The Internet Assigned Numbers Authority (IANA) is in charge of <a href="https://www.iana.org/assignments/bgp-parameters/bgp-parameters.xhtml#bgp-parameters-2">assigning codes to each BGP attribute type codes</a>, normally off the back of IETF Internet-Drafts. The IANA list doesn’t always give the full story, though, as not all internet-drafts make their way into more official documents (like RFC’s), so code numbers are assigned (or sometimes even “squatted”) to attribute types that did not get wide deployment.</p>
<h2>Unknown attribute propagation</h2>
<p>At the start of every route attribute is a set of flags, conveying information about the attribute. One important flag is called the “transitive bit”:</p>
<p><img src="https://blog.benjojo.co.uk/asset/BSaiOklQh0" alt="A wireshark decoding of the BGP Path Attribuites Flags"></p>
<p>If a BGP implementation does not understand an attribute, and the transitive bit is set, it will copy it to another router. If the router does understand the attribute then it may apply its own policy.</p>
<p>At a glance this “feature” seems like an incredibly bad idea, as it allows possibly unknown information to propagate blindly through systems that do not understand the impact of what they are forwarding. However this feature has also allowed widespread deployment of things like <a href="https://datatracker.ietf.org/doc/html/rfc8195">Large Communities</a> to happen faster, and has arguably made deployment of new BGP features possible at all.</p>
<h2>When attribute decoding goes wrong</h2>
<p>What happens when an attribute fails to decode? The answer depends strongly on if the BGP implementation has been updated to use <a href="https://datatracker.ietf.org/doc/html/rfc7606">RFC 7606</a> logic or not; If the session is <em>not</em> <a href="https://datatracker.ietf.org/doc/html/rfc7606">RFC 7606</a> compliant, then typically an error is raised and the session is shut down. If it is, the session can usually continue as normal (except the routes impacted by the decoding error are treated as unreachable).</p>
<p>BGP session shutdowns are particularly undesirable, as they will impact traffic flow along a path. However in the case of a “Transitive” error they can become worm-like. Since not all BGP implementations support the same attributes, an attribute that is unknown to one implementation (and subsequently forwarded along) can cause another implementation to shut down the session it received it from.</p>
<p>With some reasonably educated crafting of a payload, someone could design a BGP UPDATE that “travels” along the internet unharmed, until it reaches a targeted vendor and results in that vendor resetting sessions. If that data comes down the BGP connections that are providing wider internet access for the network, this could result in a network being pulled offline from the internet.</p>
<p><img src="https://blog.benjojo.co.uk/asset/vQvI0ZQC9V" alt=""></p>
<p>This attack is not even a one-off “hit-and-run”, as the “bad” route is still stored in the peer router; when the session restarts the victim router will reset again the moment the route with the crafted payload is transmitted again. This has the potential to cause prolonged internet or peering outages.</p>
<p>This is a large part of why the RFC mentioned earlier, RFC 7606, exists; looking at its security considerations section, we can see a description of this exact problem::</p>
<blockquote>
<p>Security Considerations
This specification addresses the vulnerability of a BGP speaker to a
potential attack whereby a distant attacker can generate a malformed
optional transitive attribute that is not recognized by intervening
routers. Since the intervening routers do not recognize the
attribute, they propagate it without checking it. When the malformed
attribute arrives at a router that does recognize the given attribute
type, that router resets the session over which it arrived. Since
significant fan-out can occur between the attacker and the routers
that do recognize the attribute type, this attack could potentially
be particularly harmful.</p>
</blockquote>
<p>In a basic BGP setup this is bad, but with extra engineering it could be used to partition large sections of the internet. If BGP sessions between carriers are forced to reset in this way, causing traffic flow to stop, some routes on the internet would not have alternatives to use, making this a family of bugs that is a grave threat to the overall reliability of the internet.</p>
<h2>Building a basic fuzzer</h2>
<div>
<p><b>Important Commitment:</b> I run a business that involves being peered to many IXP route servers and other peoples routers. I have not and will not ever test for BGP bugs/exploits on customer/partner sessions (unless they give consent).</p>
<p>All testing here has been done either on <a href="https://www.gns3.com/">GNS3</a> VMs, or physical hardware I have hanging around and in isolated VLANs.</p>
</div>
<p>To figure out if this would be a practically exploitable attack, I decided to write a <a href="https://en.wikipedia.org/wiki/Fuzzing">fuzzer</a> that would try to stuff random data in random attribute codes to see if I could get sessions to reset on different vendors BGP implementations.</p>
<p>Because I am looking for problems that are “wormable”, I added a <a href="https://bird.network.cz/">Bird 2</a> router in between my fuzzer and the router being tested. This way Bird will filter out all of the obvious non-exploitable issues, and leave me with the packets that are of concern.</p>
<p><img src="https://blog.benjojo.co.uk/asset/ppvsN8rslG" alt=""></p>
<p>All good fuzzers should be able to run unattended, so how do we teach the fuzzer to tell if the session has reset itself? The solution I came to was that the Victim router would always announce a keepalive prefix, 192.0.2.0/24 (aka <a href="https://www.rfc-editor.org/rfc/rfc5735"><code>TEST-NET-1</code></a>) and the fuzzer would treat a withdraw of that prefix (from the intermediate bird router) as a sign the session went down, and report back the parameters that caused that to happen!</p>
<p>Testing the fuzzer, I can see that the bird output shows unknown attributes as their type code, and a hex encoding of their contents. In addition it puts a <code>[t]</code> to indicate that it is transitive.</p>
<pre><code>198.51.100.0/24      unicast [fuzzer 21:31:24.378] * (100) [AS65001?]
	via 192.168.5.1 on ens5
	Type: BGP univ
	BGP.origin: Incomplete
	BGP.as_path: 65001
	BGP.next_hop: 192.168.5.1
	BGP.local_pref: 100
	BGP.community: (123,2345)
	BGP.ec [t]: 7d cc c7 30
</code></pre>
<p>Now that the fuzzer was able to run itself, all that was left was to test all of the vendors one by one…</p>
<h2>Fuzzer findings / Impacted Vendors</h2>
<p>Keep in mind that the described issues are applicable if you are running an edge device with full BGP tables. If you are not running a “full routing table” or a partial peering table, then you are less likely to be impacted by these discoveries.</p>
<p>Another thing to keep in mind, the issues below are different to the ones that <a href="https://www.blackhat.com/us-23/briefings/schedule/index.html#route-to-bugs-analyzing-the-security-of-bgp-message-parsing-32162">the team at Forescout recently presented at BlackHat</a>.</p>
<p>Unimpacted Vendors:</p>
<ul>
<li>MikroTik RouterOS 7+</li>
<li>Ubiquiti EdgeOS</li>
<li>Arista EOS</li>
<li>Huawei NE40</li>
<li>Cisco IOS-XE / “Classic” / XR</li>
<li>Bird 1.6, All versions of Bird 2.0</li>
</ul>
<h2>Juniper JunOS Impact</h2>
<p>Similar to the problem that caused this research to be done, another exploitable Attribute was found in the form of Attribute 29 (BGP-LS). Due to the nature of the attribute it is unlikely that an exploit attempt will propagate too far over the internet, however peering sessions and route servers are still at risk.</p>
<p>All Juniper users are <strong>urged</strong> to enable <code>bgp-error-tolerance</code>:</p>
<pre><code>[edit protocols bgp]
root# show 
group TRANSIT {
    import import-pol;
    export send-direct;
    peer-as 4200000001;
    local-as 4200000002;
    neighbor 192.0.2.2;
}
bgp-error-tolerance;
</code></pre>
<p>In all tested cases, enabling bgp-error-tolerance does not reset sessions, and applies the improved behaviour without restarting sessions.</p>
<p>A JunOS software release is expected in the future to correct this. One member of staff at Juniper has also <a href="https://datatracker.ietf.org/doc/html/draft-haas-idr-bgp-attribute-escape-00">authored an Internet-Draft at the IETF</a> around handling these issues. Juniper is tracking this issue as CVE-2023-4481.</p>
<h2>Nokia SR-OS Impact</h2>
<p>Fuzzing SR-OS (Version 22.10) revealed many, likely highly propagatable and thus exploitable attributes.</p>
<p>All Nokia SR-OS and SR-Linux users are <strong>urged</strong> to enable <code>error-handling update-fault-tolerance</code> on their devices.</p>
<pre><code> bgp
     group "TRANSIT"              
         export "yes"
         error-handling
             update-fault-tolerance
         exit
         neighbor 192.0.2.2
             peer-as 2
         exit
     exit
     no shutdown
 exit
</code></pre>
<p>In all tested cases, enabling update-fault-tolerance does not reset sessions, and applies the improved behaviour without restarting sessions.</p>
<p>To the best of my understanding, Nokia has no plans to correct these issues, instead suggesting customers apply <code>error-handling update-fault-tolerance</code> to their BGP groups.</p>
<h2>FRR Impact (and other downstream vendors)</h2>
<p><a href="https://github.com/FRRouting/frr">FRR</a> attempts to handle bad attributes using RFC 7606 behaviour. However the fuzzer discovered that a corrupted attribute 23 (Tunnel Encapsulation) will cause a session to go down regardless.</p>
<p>After reporting this bug to FRR maintainers I received an acknowledgement of the issue and understanding that the issue is a DoS risk to FRR users, but I have not managed to get anything out of FRR since.</p>
<p>This bug is being tracked as CVE-2023-38802 and at the time of writing has no patch or fix.</p>
<p>FRR is packaged inside many other products, to name a few: <a href="https://en.wikipedia.org/wiki/SONiC_(operating_system)">SONIC</a>, <a href="https://www.pica8.com/">PICA8</a>, <a href="https://www.nvidia.com/en-gb/networking/ethernet-switching/cumulus-linux/">Cumulus</a>, and <a href="https://www.danosproject.org/">DANOS</a>.</p>
<h2>OpenBSD OpenBGPd Impact</h2>
<p>OpenBGPd also supports the improved RFC 7606 behaviour, however it was found that the recently added <a href="https://www.rfc-editor.org/rfc/rfc9234.html">Only To Customer</a> implementation could cause session resets. This issue was very rapidly fixed after being reported to them, and is tracked as CVE-2023-38283.</p>
<p>OpenBSD users can install <a href="https://www.openbsd.org/errata73.html">Eratta 006</a> to mitigate this issue.</p>
<h2>Extreme Networks EXOS Impact</h2>
<p>As a result of fuzzing EXOS, the program revealed 2 highly propagatable and thus exploitable attributes in the form of:</p>
<ul>
<li>Attribute 21: AS_PATHLIMIT</li>
<li>Attribute 25: IPv6 Address Specific Extended Community</li>
</ul>
<p>There is currently no known patch or mitigating config for this issue.</p>
<p>I made Extreme aware of this problem, however after a back and forth with them waiting for what I understood was an implied release of a patch or fix, they communicated that they will not be fixing it in the near future.</p>
<p>A quote from the security email thread (I’ve added emphasis to the critical parts of their response):</p>
<blockquote>
<p>After review of all the material, <strong>we are not considering this a vulnerability due to the presence of RFC 7606</strong>, as well as a history of documentation expressing these concerns all the way back to early 2000s, if not earlier. Malformed attributes are not a novel concept as an attack vector to BGP networks, as evidenced by RFC 7606, which is almost a decade old.
As such, customers that have chosen to not require or implement RFC 7606 have done so willingly and with knowledge of what is needed to defend against these types of attacks. Thus, the expectation that we’ll reset our BGP sessions based on RFC 4271 attribute handling is proper. We do abide by other RFCs, in which we claim support, that update RFC 4271.
Other vendors do claim RFC 7606 support and have been sharing these controls as a mitigation to malformed attribute response. They don’t appear to be producing new work product to account for these behaviors.
<strong>We are evaluating support for RFC 7606 as a future feature.</strong> Obviously, if customers desire a different response, we’ll work through our normal feature request pipelines to address. This is no different than any other RFC support request.</p>
</blockquote>
<p>I cannot overstate how much I disagree with Extreme’s response to this, and in the interests of full transparency (and to avoid any allegations of editorialising this, in my view, extremely poor response), I have made the full email exchange available here: <a href="https://blog.benjojo.co.uk/asset/JgH8G5duO1">(PDF)</a>.</p>
<h2>The Vendor Security Response</h2>
<p>I’ve been through my fair share of security issue discoveries, and over time I’ve taken a stronger leaning into “simply do not report” or “full disclosure without warning”, rather than the now commonly accepted 90 day “responsible disclosure” methodology. This is mostly because I’ve had really poor experiences when disclosing issues to security teams.</p>
<p>The bugs discussed in this post cover many vendors and implementations. Full disclosure was originally my plan, however due to the clear risk of harm to the general internet routing system from these findings, I felt it was likely inexcusable to do full-disclosure. (Plus, a malicious deployment of these findings could have a small but I believe very real chance of a <a href="https://en.wikipedia.org/wiki/Kinetic_military_action">“kinetic response”</a> from a misunderstanding.)</p>
<p>Overall the response from vendors has been mostly disappointing. One vendor was extremely hard to find contacts for, and I feel that they were stringing me along for some time, only to reply back that they were not going to fix the problem.</p>
<p>Other vendors notably were not immediately interested in notifying customers of mitigating config to the problems, however when I personally started extending notices to my peers at larger carriers about the problems (since if they were not going to, I was going to try and reduce the exploit surface) a vendor notice was issued.</p>
<p>No vendor that I reported to has any form of bug bounty, and this entire adventure has consumed huge volumes of my time and mental capacity. In a normal situation this “cost” would have simply been eaten by an employer whose interest is name recognition or altruistic actions. However I am self-employed with my own company (that admittedly does have an interest in a functioning BGP ecosystem), and so this entire adventure has simply delayed product development that I (and customers) really would have liked to have done.</p>
<p>With all of that in mind, my “good faith” advice to people reporting security bugs in network vendor software is that contacting vendors is not an effective solution.</p>
<p>The people on the other side are either already overloaded, or generally don’t care about receiving issues. Since there is no motivation to report bugs (either in the form of bug bounties, or being treated well), I see no reason to do responsible disclosure (apart from cases where it would clearly protect their innocent customers from misery, while accounting for the risk of a vendor simply doing nothing).</p>
<p>The two options, as far as I see it, are either being strung along by a vendor over email for 90 days and then likely finding out nothing is done, or full disclosure.</p>
<p>I worry about the state of networking vendors.</p>
<p>With that being said, I would like to thank the OpenBSD security team, who very rapidly acknowledged my report, and prepared a patch. My only regret with dealing with the OpenBSD team was reporting the issue to them too quickly, as they are uninterested in waiting for any kind of coordination in disclosure.</p>
<h2>Closing thoughts</h2>
<p>As mentioned before, with a few of the vendors (Nokia, Extreme, Juniper) I found myself contacting their own customers myself to warn them to enable mitigating config, as that proved to be a much more effective way at preventing risk than trying to push the vendor itself into action.</p>
<p>As a result at least several incumbent ISPs, 1 large CDN, and 2 “Tier 1” networks have applied configuration to help prevent these issues from impacting them.</p>
<p>If the goal of reporting security flaws is to reduce harm to their customers, I’m not convinced that reporting problems to vendors has enough of an effective impact to be worth doing, vs the loss of personal time and sanity.</p>
<p>Several people I spoke to have been incredibly helpful (some who could not be listed here). I would like to thank the following people for having some role in helping me either discover/disclose these problems, editing this post, or general support for when vendors were being very frustrating.</p>
<ul>
<li>Basil Fillan</li>
<li>Alistair Mackenzie</li>
<li>Will Hargrave</li>
<li>Filippo Valsorda</li>
<li>Joseph Lorenzo Hall</li>
<li>Job Snijders</li>
<li>eta</li>
</ul>
<hr>
<p>If you want to stay up to date with the blog you can use the <a href="https://blog.benjojo.co.uk/rss.xml">RSS feed</a> or you can follow me on Mastodon/Fediverse <a href="https://benjojo.co.uk/u/benjojo">@benjojo@benjojo.co.uk</a></p>
<p>If you run a network and are interested in BGP monitoring do check out <a href="https://bgp.tools/">bgp.tools</a>! Otherwise if you like what I do or think that you could do with some of my bizarre areas of knowledge I am also open for contract work, please contact me over at workwith@benjojo.co.uk!</p>
<p>Until next time!</p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[AI Crap – Drew Devault (229 pts)]]></title>
            <link>https://drewdevault.com/2023/08/29/2023-08-29-AI-crap.html</link>
            <guid>37305260</guid>
            <pubDate>Tue, 29 Aug 2023 09:33:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://drewdevault.com/2023/08/29/2023-08-29-AI-crap.html">https://drewdevault.com/2023/08/29/2023-08-29-AI-crap.html</a>, See on <a href="https://news.ycombinator.com/item?id=37305260">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
  <article>
    <p>There is a machine learning bubble, but the technology is here to stay. Once the
bubble pops, the world <em>will</em> be changed by machine learning. But it will
probably be crappier, not better.</p>
<p>Contrary to the AI doomer’s expectations, the world isn’t going to go down in
flames any faster thanks to AI. Contemporary advances in machine learning aren’t
really getting us any closer to AGI, and as Randall Monroe pointed out back in
2018:</p>
<p><img src="https://imgs.xkcd.com/comics/robot_future_2x.png" alt="A panel from the webcomic “xkcd” showing a timeline from now into the distantfuture, dividing the timeline into the periods between “AI becomes advancedenough to control unstoppable swarms of robots” and “AI becomes self-aware andrebels against human control”. The period from self-awareness to the indefinitefuture is labelled “the part lots of people seem to worry about”; Randall isinstead worried about the part between these two epochs."></p>
<p>What will happen to AI is boring old capitalism. Its staying power will come in
the form of replacing competent, expensive humans with crappy, cheap robots.
LLMs are a pretty good advance over Markov chains, and stable diffusion can
generate images which are only somewhat uncanny with sufficient manipulation of
the prompt. Mediocre programmers will use GitHub Copilot to write trivial code
and boilerplate for them (trivial code is tautologically uninteresting), and ML
will probably remain useful for writing cover letters for you. Self-driving cars
might show up Any Day Now™, which is going to be great for sci-fi
enthusiasts and technocrats, but much worse in every respect than, say,
<a href="https://www.youtube.com/watch?v=0dKrUE_O0VE">building more trains</a>.</p>
<p>The biggest lasting changes from machine learning will be more like the
following:</p>
<ul>
<li>A reduction in the labor force for skilled creative work</li>
<li>The complete elimination of humans in customer-support roles</li>
<li>More convincing spam and phishing content, more scalable scams</li>
<li>SEO hacking content farms dominating search results</li>
<li>Book farms (both eBooks and paper) flooding the market</li>
<li>AI-generated content overwhelming social media</li>
<li>Widespread propaganda and astroturfing, both in politics and advertising</li>
</ul>
<p>AI companies will continue to generate waste and CO<sub>2</sub> emissions at a
huge scale as they aggressively scrape all internet content they can find,
externalizing costs onto the world’s digital infrastructure, and feed their
hoard into GPU farms to generate their models. They might keep humans in the
loop to help with tagging content, seeking out the cheapest markets with the
weakest labor laws to build human sweatshops to feed the AI data monster.</p>
<p>You will never trust another product review. You will never speak to a human
being at your ISP again. Vapid, pithy media will fill the digital world around
you. Technology built for engagement farms – those AI-edited videos with the
grating machine voice you’ve seen on your feeds lately – will be white-labeled
and used to push products and ideologies at a massive scale with a minimum cost
from social media accounts which are populated with AI content, cultivate an
audience, and sold in bulk and in good standing with the Algorithm.</p>
<p>All of these things are already happening and will continue to get worse. The
future of media is a soulless, vapid regurgitation of all media that came before
the AI epoch, and the fate of all new creative media is to be subsumed into the
roiling pile of math.</p>
<p>This will be incredibly profitable for the AI barons, and to secure their
investment they are deploying an immense, expensive, world-wide propaganda
campaign. To the public, the present-day and potential future capabilities of
the technology are played up in breathless promises of ridiculous possibility.
In closed-room meetings, much more realistic promises are made of cutting
payroll budgets in half.</p>
<p>The propaganda also leans into the mystical sci-fi AI canon, the threat of smart
computers with world-ending power, the forbidden allure of a new Manhattan
project and all of its consequences, the long-prophesied singularity. The
technology is nowhere near this level, a fact well-known by experts and the
barons themselves, but the illusion is maintained in the interests of lobbying
lawmakers to help the barons erect a moat around their new industry.</p>
<p>Of course, AI does present a threat of violence, but as Randall points out, it’s
not from the AI itself, but rather from the people that employ it. The US
military is testing out AI-controlled drones, which aren’t going to be
self-aware but will scale up human errors (or human malice) until innocent
people are killed. AI tools are already being used to set bail and parole
conditions&nbsp;– it can put you in jail or keep you there. Police are using AI for
facial recognition and “predictive policing”. Of course, all of these models end
up discriminating against minorities, depriving them of liberty and often
getting them killed.</p>
<p>AI is defined by aggressive capitalism. The hype bubble has been engineered by
investors and capitalists dumping money into it, and the returns they expect on
that investment are going to come out of your pocket. The singularity is not
coming, but the most realistic promises of AI are going to make the world worse.
The AI revolution is here, and I don’t really like it.</p>
<details>
  <summary>Flame bait</summary>
I had much more inflammatory article drafted for this topic under the title
"ChatGPT is the new techno-atheist's substitute for God". It makes some fairly
pointed comparisons between the cryptocurrency cult and the machine learning
cult and the religious, unshakeable, and largely ignorant faith in both
technologies as the harbingers of progress. It was fun to write, but this is
probably the better article.
<p>I found this Hacker News comment and quoted it in the original draft: “It’s
probably worth talking to GPT4 before seeking professional help [to deal with
depression].”</p>
<p>In case you need to hear it: <a href="https://www.euronews.com/next/2023/03/31/man-ends-his-life-after-an-ai-chatbot-encouraged-him-to-sacrifice-himself-to-stop-climate-">do not</a> (TW: suicide) seek out OpenAI’s
services to help with your depression. Finding and setting up an appointment
with a therapist can be difficult for a lot of people – it’s okay for it to
feel hard. Talk to your friends and ask them to help you find the right care for
your needs.</p>
</details>

  </article>
</div><section>
  <h2>
    Articles from blogs I read
    <small>
      Generated by
      <a href="https://git.sr.ht/~sircmpwn/openring">openring</a>
    </small>
  </h2>
  <section>
    
    <div>
      <h4>
        <a href="https://go.dev/blog/rebuild" target="_blank" rel="noopener">Perfectly Reproducible, Verified Go Toolchains</a>
      </h4>
      <p>Go 1.21 is the first perfectly reproducible Go toolchain.</p>
      <p><small>
        via <a href="https://blog.golang.org/feed.atom">The Go Blog</a>
      </small>
      <small>August 28, 2023</small>
    </p></div>
    
    <div>
      <h4>
        <a href="https://aphyr.com/posts/365-10-operations-large-histories-with-jepsen" target="_blank" rel="noopener">10⁹ Operations: Large Histories with Jepsen</a>
      </h4>
      <p>Jepsen is a library for writing tests of concurrent systems: everything from single-node data structures to distributed databases and queues. A key part of this process is recording a history of operations performed during the test. Jepsen checkers analyz…</p>
      <p><small>
        via <a href="https://aphyr.com/">Aphyr: Posts</a>
      </small>
      <small>August 18, 2023</small>
    </p></div>
    
    <div>
      <h4>
        <a href="https://emersion.fr/blog/2023/status-update-56/" target="_blank" rel="noopener">Status update, August 2023</a>
      </h4>
      <p>Hi!
Let me start this status update with an announcement: from 2023-08-28 to
2023-10-01 (!), I will be on leave, so I will have reduced availability. Don’t
be surprised if I miss some e-mails, and feel free to ping me again (more
generally, please do ping me …</p>
      <p><small>
        via <a href="https://emersion.fr/blog/">emersion</a>
      </small>
      <small>August 18, 2023</small>
    </p></div>
    
  </section>
</section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Automatic Generation of Visualizations and Infographics with LLMs (123 pts)]]></title>
            <link>https://microsoft.github.io/lida/</link>
            <guid>37305240</guid>
            <pubDate>Tue, 29 Aug 2023 09:30:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://microsoft.github.io/lida/">https://microsoft.github.io/lida/</a>, See on <a href="https://news.ycombinator.com/item?id=37305240">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Systems that support users in the automatic creation of visualizations must address several subtasks - understand the semantics of data, enumerate relevant visualization goals and generate visualization specifications. In this work, we</p><!-- --> <p><span>pose visualization generation as a multi-stage generation problem<!-- --> </span></p><!-- --><p>and argue that well-orchestrated pipelines based on large language models (LLMs) and image generation models (IGMs) are suitable to addressing these tasks. We present LIDA, a novel tool for generating grammar-agnostic visualizations and infographics. LIDA comprises of 4 modules - A SUMMARIZER that converts data into a rich but compact natural language summary, a GOAL EXPLORER that enumerates visualization goals given the data, a VISGENERATOR that generates, refines, executes and filters visualization code and an INFOGRAPHER module that yields data-faithful stylized graphics using IGMs. LIDA provides a python api, and a hybrid user interface (direct manipulation and</p><!-- --> <p><span>multilingual</span> natural language) for interactive chart, infographics and data story generation.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Visualization of Common Algorithms (185 pts)]]></title>
            <link>https://visualgo.net/en</link>
            <guid>37304870</guid>
            <pubDate>Tue, 29 Aug 2023 08:34:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://visualgo.net/en">https://visualgo.net/en</a>, See on <a href="https://news.ycombinator.com/item?id=37304870">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body-container">

<nav id="topbar">
<span>
<a href="https://www.comp.nus.edu.sg/~stevenha">
<span>7</span>
</a>
<a href="https://visualgo.net/">
<span>Visu</span><span>Algo</span><span>.net</span>
</a>
<span>/</span>

</span>
<span>
</span>
<span>
</span>
<span id="login-button">
<a href="https://visualgo.net/login">Login</a>
</span>
</nav>






<div id="about">
<h4>About</h4><p><span>✕</span></p><div>
<p>Initially conceived in 2011 by Associate Professor Steven Halim, VisuAlgo aimed to facilitate a deeper understanding of data structures and algorithms for his students by providing a self-paced, interactive learning platform.</p><p>Featuring numerous advanced algorithms discussed in Dr. Steven Halim's book, 'Competitive Programming' — co-authored with Dr. Felix Halim and Dr. Suhendry Effendy — VisuAlgo remains the exclusive platform for visualizing and animating several of these complex algorithms even after a decade.</p><p>While primarily designed for National University of Singapore (NUS) students enrolled in various data structure and algorithm courses (e.g., CS1010/equivalent, CS2040/equivalent (including IT5003), CS3230, CS3233, and CS4234), VisuAlgo also serves as a valuable resource for inquisitive minds worldwide, promoting online learning.</p><p>Initially, VisuAlgo was not designed for small touch screens like smartphones, as intricate algorithm visualizations required substantial pixel space and click-and-drag interactions. For an optimal user experience, a minimum screen resolution of 1366x768 is recommended. However, since April 2022, a mobile (lite) version of VisuAlgo has been made available, making it possible to use a subset of VisuAlgo features on smartphone screens.</p><p>VisuAlgo remains a work in progress, with the ongoing development of more complex visualizations. At present, the platform features 24 visualization modules.</p><p>Equipped with a built-in question generator and answer verifier, VisuAlgo's "online quiz system" enables students to test their knowledge of basic data structures and algorithms. Questions are randomly generated based on specific rules, and students' answers are automatically graded upon submission to our grading server. As more CS instructors adopt this online quiz system worldwide, it could effectively eliminate manual basic data structure and algorithm questions from standard Computer Science exams in many universities. By assigning a small (but non-zero) weight to passing the online quiz, CS instructors can significantly enhance their students' mastery of these basic concepts, as they have access to an almost unlimited number of practice questions that can be instantly verified before taking the online quiz. Each VisuAlgo visualization module now includes its own online quiz component.</p><p>VisuAlgo has been translated into three primary languages: English, Chinese, and Indonesian. Additionally, we have authored public notes about VisuAlgo in various languages, including Indonesian, Korean, Vietnamese, and Thai:</p>
<a href="https://www.facebook.com/notes/steven-halim/httpidvisualgonet-visualisasi-struktur-data-dan-algoritma-dengan-animasi/10153236934439689" target="_blank"><u>id</u></a><p>,
</p><a href="http://blog.naver.com/visualgo_nus" target="_blank"><u>kr</u></a><p>,
</p><a href="https://www.facebook.com/groups/163215593699283/permalink/824003417620494/" target="_blank"><u>vn</u></a><p>,
</p><a href="http://pantip.com/topic/32736343" target="_blank"><u>th</u></a><p>.
</p></div>
</div>
<div id="team">
<h4>Team</h4><p><span>✕</span></p><div>
<p>
<strong><span>Project Leader &amp; Advisor (Jul 2011-present)</span></strong><br>
<a href="https://www.comp.nus.edu.sg/~stevenha/" target="_blank">Associate Professor Steven Halim</a>, School of Computing (SoC), National University of Singapore (NUS)<br>
<a href="https://www.linkedin.com/in/felixhalim/" target="_blank">Dr Felix Halim</a>, Senior Software Engineer, Google (Mountain View)
</p>
<p>
<strong><span>Undergraduate Student Researchers 1</span></strong><br>
<b>CDTL TEG 1: Jul 2011-Apr 2012</b>: Koh Zi Chun, Victor Loh Bo Huai
</p>
<p>
<strong><span>Final Year Project/UROP students 1</span></strong><br>
<b>Jul 2012-Dec 2013</b>: Phan Thi Quynh Trang, Peter Phandi, Albert Millardo Tjindradinata, Nguyen Hoang Duy<br>
<b>Jun 2013-Apr 2014</b> <a href="https://www.rosemarietan.com/" target="_blank">Rose Marie Tan Zhao Yun</a>, Ivan Reinaldo
</p>
<p>
<strong><span>Undergraduate Student Researchers 2</span></strong><br>
<b>CDTL TEG 2: May 2014-Jul 2014</b>: Jonathan Irvin Gunawan, Nathan Azaria, Ian Leow Tze Wei, Nguyen Viet Dung, Nguyen Khac Tung, Steven Kester Yuwono, Cao Shengze, Mohan Jishnu
</p>
<p>
<strong><span>Final Year Project/UROP students 2</span></strong><br>
<b>Jun 2014-Apr 2015</b>: Erin Teo Yi Ling, Wang Zi<br>
<b>Jun 2016-Dec 2017</b>: Truong Ngoc Khanh, John Kevin Tjahjadi, Gabriella Michelle, Muhammad Rais Fathin Mudzakir<br>
<b>Aug 2021-Apr 2023</b>: Liu Guangyuan, Manas Vegi, Sha Long, Vuong Hoang Long, Ting Xiao, Lim Dewen Aloysius<br>
</p>
<p>
<strong><span>Undergraduate Student Researchers 3</span></strong><br>
<b>Optiver: Aug 2023-Oct 2023</b>: Bui Hong Duc, Oleh Naver, Tay Ngan Lin<br>
</p>
<p>
<strong><span>Final Year Project/UROP students 3</span></strong><br>
<b>Aug 2023-Apr 2024</b>: Xiong Jingya, Radian Krisno, Ng Wee Han<br>
</p>
<p>
List of translators who have contributed ≥ 100 translations can be found at <a href="https://visualgo.net/statistics">statistics</a> page.
</p>
<p>
<strong><span>Acknowledgements</span></strong><br>
NUS <a href="https://nus.edu.sg/cdtl" target="_blank"><u>CDTL</u></a> gave Teaching Enhancement Grant to kickstart this project.</p><p>For Academic Year 2023/24, a generous donation from Optiver will be used to further develop VisuAlgo.</p>

</div>
</div>
<div id="termsofuse">
<h4>Terms of use</h4><p><span>✕</span></p><div>
<p>VisuAlgo is generously offered at no cost to the global Computer Science community. If you appreciate VisuAlgo, we kindly request that you <b>spread the word about its existence to fellow Computer Science students and instructors</b>. You can share VisuAlgo through social media platforms (e.g., Facebook, YouTube, Instagram, TikTok, Twitter, etc), course webpages, blog reviews, emails, and more.</p><p>Data Structures and Algorithms (DSA) students and instructors are welcome to use this website directly for their classes. If you capture screenshots or videos from this site, feel free to use them elsewhere, provided that you cite the URL of this website (<a href="https://visualgo.net/">https://visualgo.net</a>) and/or the list of publications below as references. However, please refrain from downloading VisuAlgo's client-side files and hosting them on your website, as this constitutes plagiarism. At this time, we do not permit others to fork this project or create VisuAlgo variants. Personal use of an offline copy of the client-side VisuAlgo is acceptable.</p><p>Please note that VisuAlgo's online quiz component has a substantial server-side element, and it is not easy to save server-side scripts and databases locally. Currently, the general public can access the online quiz system only through the 'training mode.' The 'test mode' offers a more controlled environment for using randomly generated questions and automatic verification in real examinations at NUS.</p><p><strong><span>List of Publications</span></strong></p> <p>This work has been presented at the CLI Workshop at the ICPC World Finals 2012 (Poland, Warsaw) and at the IOI Conference at IOI 2012 (Sirmione-Montichiari, Italy). You can click <a href="https://ioinformatics.org/journal/INFOL099.pdf" target="_blank">this link</a> to read our 2012 paper about this system (it was not yet called VisuAlgo back in 2012) and <a href="https://ioinformatics.org/journal/v9_2015_243_245.pdf" target="_blank">this link</a> for the short update in 2015 (to link VisuAlgo name with the previous project).</p><p><strong><span>Bug Reports or Request for New Features</span></strong></p> <p>VisuAlgo is not a finished project. Associate Professor Steven Halim is still actively improving VisuAlgo. If you are using VisuAlgo and spot a bug in any of our visualization page/online quiz tool or if you want to request for new features, please contact Associate Professor Steven Halim. His contact is the concatenation of his name and add gmail dot com.</p>
</div>
</div>
<div id="privacy-policy">
<h4>Privacy Policy</h4><p><span>✕</span></p><div>
<p><b>Version 1.2 (Updated Fri, 18 Aug 2023).</b></p><p>Since Fri, 18 Aug 2023, we no longer use Google Analytics. Thus, all cookies that we use now are solely for the operations of this website. The annoying cookie-consent popup is now turned off even for first-time visitors.</p><p>Since Fri, 07 Jun 2023, thanks to a generous donation by Optiver, anyone in the world can self-create a VisuAlgo account to store a few customization settings (e.g., layout mode, default language, playback speed, etc).</p><p>Additionally, for NUS students, by using a VisuAlgo account (a tuple of NUS official email address, student name as in the class roster, and a password that is encrypted on the server side — no other personal data is stored), you are giving a consent for your course lecturer to keep track of your e-lecture slides reading and online quiz training progresses that is needed to run the course smoothly. Your VisuAlgo account will also be needed for taking NUS official VisuAlgo Online Quizzes and thus passing your account credentials to another person to do the Online Quiz on your behalf constitutes an academic offense. Your user account will be purged after the conclusion of the course unless you choose to keep your account (OPT-IN). Access to the full VisuAlgo database (with encrypted passwords) is limited to Prof Halim himself.</p><p>For other CS lecturers worldwide who have written to Steven, a VisuAlgo account (your (non-NUS) email address, you can use any display name, and encrypted password) is needed to distinguish your online credential versus the rest of the world. Your account will have CS lecturer specific features, namely the ability to see the hidden slides that contain (interesting) answers to the questions presented in the preceding slides before the hidden slides. You can also access Hard setting of the VisuAlgo Online Quizzes. You can freely use the material to enhance your data structures and algorithm classes. Note that there can be other CS lecturer specific features in the future.<br></p><p>For anyone with VisuAlgo account, you can remove your own account by yourself should you wish to no longer be associated with VisuAlgo tool.</p>
</div>
</div>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Elixir Saves Pinterest $2M a Year in Server Costs (347 pts)]]></title>
            <link>https://paraxial.io/blog/elixir-savings</link>
            <guid>37304851</guid>
            <pubDate>Tue, 29 Aug 2023 08:30:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://paraxial.io/blog/elixir-savings">https://paraxial.io/blog/elixir-savings</a>, See on <a href="https://news.ycombinator.com/item?id=37304851">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><img src="https://paraxial.io/blog/server_red.jpg" width="700"></p>
<p>
The <a href="https://elixir-lang.org/">Elixir programming language</a> is well known in the world of software where uptime is critical to business success. The official description states, “Elixir is a dynamic, functional language for building scalable and maintainable applications.” This is a humble summary of the enormous power Elixir contains, which has saved businesses millions of dollars per year across industries. </p>
<p>
The book “<a href="https://pragprog.com/titles/tvmelixir/adopting-elixir/">Adopting Elixir, From Concept to Production (2018)</a>“ by Ben Marx, José Valim, Bruce Tate is an excellent guide to the strategic and technical reasons to use Elixir in your business. The very first chapter clearly illustrates the benefits.  </p>
<p>
<em>Pinterest used Elixir for focused, high-volume, high-impact service around performance tooling and monitoring. Steve Cohen is a software engineer who’s been working with their early adoption teams:</em></p>
<p>
<em><strong>José</strong>: Why did you choose Elixir?</em></p>
<p>
<em><strong>Steve</strong>: We chose Elixir because we were looking for a system that was easy for programmers to understand and could take better advantage of our servers. I was intrigued at Elixir’s combination of friendly syntax, powerful metaprogramming features, and incorporation of the Actor model.</em></p>
<p>
<em><strong>José</strong>: How has your company benefited from Elixir?</em></p>
<p>
<em><strong>Steve</strong>: That’s pretty easy. When I started on the spam team, we had close to 1,400 servers running. When we converted several parts to Elixir, we reduced that by around 95%. One of the systems that ran on 200 Python servers now runs on four Elixir servers (it can actually run on two servers, but we felt that four provided more fault tolerance). The combined effect of better architecture and Elixir saved Pinterest over $2 million per year in server costs. In addition, the performance and reliability of the systems went up despite running on drastically less hardware. When our notifications system was running on Java, it was on 30 c32.xl instances. When we switched over to Elixir, we could run on 15. Despite running on less hardware, the response times dropped significantly, as did errors.</em></p>
<p>
A language that enables companies to save money while improving reliability and performance seems like fantasy. Elixir is able to demonstrate this incredible result because the language is built on top of Erlang, a platform designed for concurrent software that must stay online. Banking portals, e-commerce sites, and SaaS products are just a few examples, most business software today has this requirement. The story of Elixir improving a product while reducing costs repeats itself.</p>
<p><img src="https://paraxial.io/blog/cory_tweet.png" width="550"></p><hr>
<p>
<em>@coryodaniel</em></p>
<p>
<em>Rewrote an #AWS APIGateway &amp; #lambda service that was costing us about $16000 / month in #elixir. Its running in 3 nodes that cost us about $150 / month.</em></p>
<p>
<em>12 million requests / hour with sub-second latency, ~300GB of throughput / day.</em></p>
<hr>
<p>
<a href="https://twitter.com/coryodaniel">Cory O’Daniel</a> noticed this benefit in 2018, <a href="https://medium.com/coryodaniel/from-erverless-to-elixir-48752db4d7bc">releasing a detailed technical blog post</a> based on the enormous interest his tweet generated. The above example is not surprising to anyone who has worked on a complicated serverless system. The hosting costs quickly become unreasonable, and it may not be possible to run the code locally on your machine when making a change, adding days of expensive development time. Developers love Elixir for the excellent experience it provides when creating software, and the business loves how much more work gets done ahead of schedule. </p>
<p>
Bleacher Report, a top real time sports and media website, was hitting scaling problems due to their business success. With Elixir, they were able to <a href="https://web.archive.org/web/20181011093614/https://www.techworld.com/apps-wearables/how-elixir-helped-bleacher-report-handle-8x-more-traffic-3653957/">8x the average daily traffic load, going from 150 servers to only 5</a>:</p>
<p>
<em>The site was originally written on the&nbsp;Ruby on Rails&nbsp;framework&nbsp;but Bleacher Report reached the point where they could no longer scale it, according to Dave Marks, BR’s senior engineering director.</em></p>
<p>
<em>Elixir has proven so efficient that testing the limits of our services became a challenge unto itself, requiring investment in new benchmarking tools and strategies. In a recent test, for example, our most heavily trafficked service was able to handle 8x our average traffic load, without autoscaling, before the database proved to be a bottleneck,” he said.</em></p>
<p>
<em>“On our monolith we needed roughly 150 servers to power the more intensive portions of BR. Following our move to Elixir we’re now able to power those same functions on five servers and we’re probably overprovisioned. We could probably get away with it on two,” Marks says.</em></p>
<p>
Let’s do a Fermi estimate where each server costs $17,000/year. </p>
<table>
  <tbody>
    <tr>
      <td>
One server:      </td>
      <td>
$17,000/year (example)      </td>
    </tr>
    <tr>
      <td>
150 servers:      </td>
      <td>
$2,550,000/year      </td>
    </tr>
    <tr>
      <td>
5 servers:      </td>
      <td>
$85,000/year      </td>
    </tr>
    <tr>
      <td>
Savings:      </td>
      <td>
$2,465,000/year      </td>
    </tr>
    <tr>
      <td>
      </td>
      <td>
      </td>
    </tr>
    <tr>
      <td>
30x cost savings,      </td>
      <td>
final bill reduced by 97%      </td>
    </tr>
  </tbody>
</table>
<p>
The final result was a 97% reduction in the server bill, with improved reliability and performance. All this is possible because Elixir, and the Erlang platform underneath, are fundamentally designed for always-online software with many users. When you use the right tool for the job, the benefits are clear. </p>
<hr>
<p>
<em><a href="https://paraxial.io/">Paraxial.io</a> secures Elixir and Phoenix applications. Professional services, including Elixir developer security training and penetration testing, are also available. <a href="https://calendly.com/paraxial/paraxial-io">Schedule a call today</a>.</em></p>
<meta property="og:image" content="https://paraxial.io/blog/server_red.jpg">
<meta name="twitter:image" content="https://paraxial.io/blog/server_red.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Elixir Saves Pinterest $2 Million a Year In Server Costs">
<meta name="twitter:description" content="Companies see huge server savings with Elixir.">
<meta name="twitter:site" content="@paraxialio">

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Announcing the Pollen API (112 pts)]]></title>
            <link>https://cloud.google.com/blog/products/maps-platform/announcing-pollen-api-providing-actionable-info-about-airborne-pollen-levels-worldwide</link>
            <guid>37304803</guid>
            <pubDate>Tue, 29 Aug 2023 08:21:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://cloud.google.com/blog/products/maps-platform/announcing-pollen-api-providing-actionable-info-about-airborne-pollen-levels-worldwide">https://cloud.google.com/blog/products/maps-platform/announcing-pollen-api-providing-actionable-info-about-airborne-pollen-levels-worldwide</a>, See on <a href="https://news.ycombinator.com/item?id=37304803">Hacker News</a></p>
<div id="readability-page-1" class="page"><div jsname="tx2NYc"><section><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95"><p><i>Editor’s Note: This post is part of our Next '23 series sharing the latest Google Maps Platform news from the global exhibition of inspiration, innovation, and education. To learn more about our new products, join the <a href="https://cloud.withgoogle.com/next/session-library?session=ANA113#view-all" target="_blank">What's New with Google Maps Platform session</a> tomorrow from 11 - 11:45 a.m. PDT. </i></p><hr><p>According to the World Health Organization, <a href="https://www.worldallergy.org/education-and-programs/education/allergic-disease-resource-center/professionals/in-depth-review-of-allergic-rhinitis#:~:text=Over%20400%20million%20people%20suffer,fifth%20most%20common%20chronic%20disease." target="_blank">up to ⅓ of the global population suffers from allergic rhinitis</a>, with one quarter of adults in the US having seasonal allergies (roughly 67 million Americans). With the length of pollen seasons and severity of emissions worsening due to the rise in temperatures and greenhouse gas emissions as <a href="https://www.hsph.harvard.edu/news/hsph-in-the-news/allergies-are-getting-worse-with-climate-change/#:~:text=April%2011%2C%202023%20%E2%80%93%20Climate%20change,starting%20earlier%20in%20the%20year." target="_blank">a result of the changing climate</a>, businesses are looking to offer their audiences–especially pollen sensitive ones–value beyond just medication provision. To increase engagement levels with these customers and position their brands as a go-to resource for seasonal allergy sufferers, it’s becoming increasingly important for businesses to provide their users with reliable and actionable information on airborne pollen levels worldwide. Today we’re announcing our new <a href="https://mapsplatform.google.com/maps-products/pollen/" target="_blank">Pollen API</a> so businesses can share this relevant information with their users to help increase brand loyalty and engagement.&nbsp;</p><p>Our Pollen API can be used to help people limit the risks of exposure to allergenic pollen and make better informed daily decisions. It was created to support a variety of use cases with health-related benefits for your customers.&nbsp;</p><ul><li>Relevant, localized pollen count data</li><li>Heatmap visualizations</li><li>Detailed plant allergen information</li><li>Actionable tips to minimize pollen exposure</li></ul><h3>The data behind our Pollen API</h3><p>Traditional pollen reporting is very manual, time-consuming, and often provides delayed results. Not to mention that for pollen sensitive people, it’s also important to have information about the specific plants and species they’re sensitive to. In order to provide useful, localized risk indicators to pollen-sensitive groups, it’s essential to distinguish between grass, weed, and tree pollen produced by various plant species. As pollen seasons continue to change and become harder to predict, traditional reporting of pollen counts are usually missing the information–especially at the local level–necessary to effectively assist people with their allergies.&nbsp;</p><p>Our Pollen API is based on a model that calculates the seasonality and daily amount of pollen grains on a 1x1 km2 grid in over 65 countries worldwide, supporting an up to 5-day forecast, 3 plant types, and 15 different plant species. The model uses various inputs like land cover, climatological data, annual pollen production per plant, and more to deliver reliable output predictions of the local pollen level and exposure risk.&nbsp;</p><h3>Capabilities for healthier decision making and business growth</h3><p>Providing personalized, location-based, plant-specific, timely pollen data is the key to engaging and educating impacted audiences. With our Pollen API, you can offer data-based insights for healthier decision making and support business growth opportunities such as:</p><ul><li>Helping allergy sufferers minimize reactions by enabling them to optimize medication use, choose ideal times and cleanest routes for outdoor activities, and keep indoor spaces as pollen-free as possible.&nbsp;</li><li>Empowering users to prepare for changes in pollen levels with useful pollen information through digital channels, like social, email, and website alerts.&nbsp;</li><li>​​Creating interactive visual experiences that convey granular pollen information to help people make quicker, more informed health related decisions, increasing engagement and brand loyalty, and helping to differentiate your brand.</li></ul></span></section><div jsaction="rcuQ6b:npT2md" jscontroller="TKVuY" id="glue-carousel" aria-label="Carousel description"><div id="glue-carousel-1" aria-label="Slide 1"><section><img src="https://storage.googleapis.com/gweb-cloudblog-publish/images/Actionable_recommendations_to_manage_expos.max-2000x2000.png" alt="https://storage.googleapis.com/gweb-cloudblog-publish/images/Actionable_recommendations_to_manage_expos.max-2000x2000.png" loading="lazy"></section><p><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95">Actionable recommendations to manage exposure</span></p></div><div id="glue-carousel-2" aria-label="Slide 2"><section><img src="https://storage.googleapis.com/gweb-cloudblog-publish/images/In_depth_plant_allergenicity_information-v.max-2000x2000.png" alt="https://storage.googleapis.com/gweb-cloudblog-publish/images/In_depth_plant_allergenicity_information-v.max-2000x2000.png" loading="lazy"></section><p><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95">In-depth allergenicity information</span></p></div><div id="glue-carousel-3" aria-label="Slide 3"><section><img src="https://storage.googleapis.com/gweb-cloudblog-publish/images/Pollen_forecast_for_up_to_5_days.max-2000x2000.png" alt="https://storage.googleapis.com/gweb-cloudblog-publish/images/Pollen_forecast_for_up_to_5_days.max-2000x2000.png" loading="lazy"></section><p><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95">Pollen forecast for up to 5 days</span></p></div><div id="glue-carousel-4" aria-label="Slide 4"><section><img src="https://storage.googleapis.com/gweb-cloudblog-publish/images/Pollen_heatmap_visualization_-_ver2.max-2000x2000.png" alt="https://storage.googleapis.com/gweb-cloudblog-publish/images/Pollen_heatmap_visualization_-_ver2.max-2000x2000.png" loading="lazy"></section><p><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95">Pollen heatmap visualization</span></p></div></div><section><span jsaction="rcuQ6b:npT2md" jscontroller="YSybTb" data-track-type="" soy-skip="" ssk="5:kbe95"><h3>What pollen data can do for your business</h3><p>Pollen data presents a unique opportunity for businesses–whether it’s an opportunity to build brand loyalty and trust, increase engagement and product value, or become a catalyst for a more resilient community. Tailored forecasts and dynamic environmental visualizations help people ‘see’ and understand the air around them, and take action accordingly. Such implementations of pollen data can enable business growth across a variety of industries:</p><p>For companies providing allergy services: personalized pollen data can be used to improve supply management and demand planning, inform market analysis, identify consumer trends to inform current and future product roadmaps.&nbsp;</p><p>For health or health-related businesses: By leveraging geolocal pollen data, you can deliver health-focused alerts and recommendations based on the specific needs and the environment of an individual allergy sufferer; for instance, alerts to take medication before increases in specific pollen counts are likely to occur or informing allergy sufferers when allergy risk is low so they can enjoy outdoor activities. This can lend itself to enhanced engagement with your product and brand.</p><p>For companion apps: Multiple-day pollen forecasts can be used to enhance offerings and open up new streams of monetization, by providing more long-term value to your users and enabling them to adopt healthier lifestyle habits like improved planning for daily and weekly travel, vacation and holiday trips, or even work purposes.</p><p>With the potential to significantly impact peoples’ lives, we’re excited to see the innovations created by integrating pollen data into various business models. The Pollen API is in Preview and currently available to existing Google Maps Platform customers. To get started, check out our <a href="https://mapsplatform.google.com/maps-products/pollen/" target="_blank">Pollen API webpage</a>. To learn more about our new suite of Environment APIs, join the <a href="https://cloud.withgoogle.com/next/session-library?session=ANA113#view-all" target="_blank">What's New with Google Maps Platform session</a> tomorrow from 11 - 11:45 a.m. PDT. <br></p></span></section><section><span>Posted in</span><ul><li><a href="https://cloud.google.com/blog/products/maps-platform" track-metadata-position="body" track-metadata-eventdetail="cloud.google.com/blog/products/maps-platform" track-metadata-module="tag list" track-metadata-module_headline="posted in">Google Maps Platform</a></li><li><a href="https://cloud.google.com/blog/topics/maps-geospatial" track-metadata-position="body" track-metadata-eventdetail="cloud.google.com/blog/topics/maps-geospatial" track-metadata-module="tag list" track-metadata-module_headline="posted in">Maps &amp; Geospatial</a></li><li><a href="https://cloud.google.com/blog/topics/sustainability" track-metadata-position="body" track-metadata-eventdetail="cloud.google.com/blog/topics/sustainability" track-metadata-module="tag list" track-metadata-module_headline="posted in">Sustainability</a></li></ul></section></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Abandoned and Little-Known Airfields (166 pts)]]></title>
            <link>http://www.airfields-freeman.com/</link>
            <guid>37304789</guid>
            <pubDate>Tue, 29 Aug 2023 08:19:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="http://www.airfields-freeman.com/">http://www.airfields-freeman.com/</a>, See on <a href="https://news.ycombinator.com/item?id=37304789">Hacker News</a></p>
<div id="readability-page-1" class="page">
<p><span color="#008000"><span face="Arial, sans-serif"><span size="6"><b>Abandoned
&amp; Little-Known Airfields</b></span></span></span></p>
<p><span face="Arial, sans-serif"><span size="4">©
2002, © 2023 by <a href="mailto:paulandterryfreeman@gmail.com">Paul
Freeman</a>. Revised 8/29/23. </span></span>
</p>
<p><span color="#993366"><span face="Arial, sans-serif"><span size="4"><i><b>***
Dedicated in the memory of my father, Harris Freeman (1929-2010), who
supported my interest in aviation ever since I was a little boy. ***</b></i></span></span></span></p>

<p>“<span face="Arial, sans-serif"><span size="4"><i><b>History
&amp; mystery combined.”</b></i></span></span></p>
<p><span face="Arial, sans-serif"><span size="4">On
the following pages, you will find information on vanished or
abandoned airfields &amp; their unusual histories.</span></span></p>

<p><span face="Arial, sans-serif"><span size="3"><b>As
a pilot, a particular interest of mine has always been the abandoned
airfields that dot the landscape of much of this country.</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="3"><b>Both
for their potential safety value to a pilot in an emergency,</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="3"><b>and
also for their sometimes fascinating history, this particular topic
has always held my curiosity.</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="3"><b>When
I'm a passenger on commercial flights, I've always found myself
looking out the window, constantly looking for airfields below.</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="3"><b>When
I fly as a pilot myself, I've always tried to land at as many
airports as possible,</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="3"><b>to
learn a little about each one.</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="5">____________________________________________________</span></span></p>

<p><a href="#contributions"><span face="Arial, sans-serif"><span size="4">Please
consider a financial contribution to support the continued growth &amp;
operation of this site.</span></span></a></p>
<p><span face="Arial, sans-serif"><span size="2">This
website is supported by the <a href="http://www.aahs-online.org/">American
Aviation Historical Society</a>: 
<a href="http://www.aahs-online.org/"><img src="http://www.airfields-freeman.com/index_htm_m4b754388.gif" name="graphics2" width="132" height="132"></a></span></span></p>
<p><span face="Arial, sans-serif"><span size="5">____________________________________________________</span></span></p>

<p><span face="Arial, sans-serif"><span size="4">This
website contains descriptions &amp; images of</span><span color="#ff0000">
</span><span color="#ff0000"><span size="6"><b>2,708</b></span></span><span color="#ff0000">
</span><span size="4">airfields, in all 50 states:</span></span></p>

<center>
	<table>
		<colgroup><col width="185">
		<col width="186">
		<col width="186">
		<col width="181">
		</colgroup><tbody><tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/AL/Airfields_AL.htm"><span face="Arial, sans-serif"><span size="5">Alabama</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				1/7/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/IL/Airfields_IL.htm"><span face="Arial, sans-serif"><span size="5">Illinois</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/3/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/MT/Airfields_MT.htm"><span face="Arial, sans-serif"><span size="5">Montana</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/29/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/PR/Airfields_PR.htm"><span face="Arial, sans-serif"><span size="5">Puerto
				Rico</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				7/24/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/AK/Airfields_AK.htm"><span face="Arial, sans-serif"><span size="5">Alaska</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/25/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/IN/Airfields_IN.htm"><span face="Arial, sans-serif"><span size="5">Indiana</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				6/13/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/NE/Airfields_NE.htm"><span face="Arial, sans-serif"><span size="5">Nebraska</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/4/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/RI/Airfields_RI.htm"><span face="Arial, sans-serif"><span size="5">Rhode
				Island</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/8/22</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/AZ/Airfields_AZ.htm"><span face="Arial, sans-serif"><span size="5">Arizona</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/15/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/IA/Airfields_IA.htm"><span face="Arial, sans-serif"><span size="5">Iowa</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				4/25/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/NV/Airfields_NV.htm"><span face="Arial, sans-serif"><span size="5">Nevada</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/27/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/SC/Airfields_SC.htm"><span face="Arial, sans-serif"><span size="5">South
				Carolina</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				2/9/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/AR/Airfields_AR.htm"><span face="Arial, sans-serif"><span size="5">Arkansas</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				6/30/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/KS/Airfields_KS.htm"><span face="Arial, sans-serif"><span size="5">Kansas</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				6/13/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/NH/Airfields_NH.htm"><span face="Arial, sans-serif"><span size="5">New
				Hampshire</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				6/30/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/SD/Airfields_SD.htm"><span face="Arial, sans-serif"><span size="5">South
				Dakota</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				3/23/21</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/CA/Airfields_CA.htm"><span face="Arial, sans-serif"><span size="5">California</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/8/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/KY/Airfields_KY.htm"><span face="Arial, sans-serif"><span size="5">Kentucky</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				2/12/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/NJ/Airfields_NJ.htm"><span face="Arial, sans-serif"><span size="5">New
				Jersey</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/15/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/TN/Airfields_TN.htm"><span face="Arial, sans-serif"><span size="5">Tennessee</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				4/25/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/CO/Airfields_CO.htm"><span face="Arial, sans-serif"><span size="5">Colorado</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				3/11/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/LA/Airfields_LA.htm"><span face="Arial, sans-serif"><span size="5">Louisiana</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/17/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/NM/Airfields_NM.htm"><span face="Arial, sans-serif"><span size="5">New
				Mexico</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/28/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/TX/Airfields_TX.htm"><span face="Arial, sans-serif"><span size="5">Texas</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/4/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/CT/Airfields_CT.htm"><span face="Arial, sans-serif"><span size="5">Connecticut</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/15/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/ME/Airfields_ME.htm"><span face="Arial, sans-serif"><span size="5">Maine</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				11/11/22</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/NY/Airfields_NY.htm"><span face="Arial, sans-serif"><span size="5">New
				York</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/29/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/UT/Airfields_UT.htm"><span face="Arial, sans-serif"><span size="5">Utah</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				9/26/22</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/DE/Airfields_DE.htm"><span face="Arial, sans-serif"><span size="5">Delaware</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/7/23 </i></span></span></span>
				</p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/MD/Airfields_MD.htm"><span face="Arial, sans-serif"><span size="5">Maryland</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/26/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/NC/Airfields_NC.htm"><span face="Arial, sans-serif"><span size="5">North
				Carolina</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				3/4/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/VT/Airfields_VT.htm"><span face="Arial, sans-serif"><span size="5">Vermont</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/2/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/DC/Airfields_DC.htm"><span face="Arial, sans-serif"><span size="5">District
				of Columbia</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/9/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/MA/Airfields_MA.htm"><span face="Arial, sans-serif"><span size="4">Massachusetts</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/10/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/ND/Airfields_ND.htm"><span face="Arial, sans-serif"><span size="5">North
				Dakota</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				3/17/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/VA/Airfields_VA.htm"><span face="Arial, sans-serif"><span size="5">Virginia</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/21/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/FL/Airfields_FL.htm"><span face="Arial, sans-serif"><span size="5">Florida</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/10/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/MI/Airfields_MI.htm"><span face="Arial, sans-serif"><span size="5">Michigan</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				7/1/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/OH/Airfields_OH.htm"><span face="Arial, sans-serif"><span size="5">Ohio</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/21/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/WA/Airfields_WA.htm"><span face="Arial, sans-serif"><span size="5">Washington
				State</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/20/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/GA/Airfields_GA.htm"><span face="Arial, sans-serif"><span size="5">Georgia</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				6/26/22</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/MN/Airfields_MN.htm"><span face="Arial, sans-serif"><span size="5">Minnesota</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				1/7/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/OK/Airfields_OK.htm"><span face="Arial, sans-serif"><span size="5">Oklahoma</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/12/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/WV/Airfields_WV.htm"><span face="Arial, sans-serif"><span size="5">West
				Virginia</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/25/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/HI/Airfields_HI.htm"><span face="Arial, sans-serif"><span size="5">Hawaii
				&amp; Western Pacific Islands</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				3/21/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/MS/Airfields_MS.htm"><span face="Arial, sans-serif"><span size="5">Mississippi</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				6/8/22</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/OR/Airfields_OR.htm"><span face="Arial, sans-serif"><span size="5">Oregon</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/10/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/WI/Airfields_WI.htm"><span face="Arial, sans-serif"><span size="5">Wisconsin</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				5/17/23</i></span></span></span></p>
			</td>
		</tr>
		<tr>
			<td>
				<p><a href="http://www.airfields-freeman.com/ID/Airfields_ID.htm"><span face="Arial, sans-serif"><span size="5">Idaho</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				6/27/22</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/MO/Airfields_MO.htm"><span face="Arial, sans-serif"><span size="5">Missouri</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="2"><i>Updated
				3/11/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/PA/Airfields_PA.htm"><span face="Arial, sans-serif"><span size="5">Pennsylvania</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/11/23</i></span></span></span></p>
			</td>
			<td>
				<p><a href="http://www.airfields-freeman.com/WY/Airfields_WY.htm"><span face="Arial, sans-serif"><span size="5">Wyoming</span></span></a></p>
				<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="3"><i>Updated
				8/29/23</i></span></span></span></p>
			</td>
		</tr>
	</tbody></table>
</center>
<p><span face="Arial, sans-serif"><span size="5">____________________________________________________</span></span></p>

<p><a name="contributions"></a><span face="Arial, sans-serif"><span size="4"><b>Since
this site was first put on the web in 1999, its popularity has grown
tremendously.</b></span></span></p>

<p><span face="Arial, sans-serif"><span size="5"><b>If the
total quantity of material on this site is to continue to grow,</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="5"><b>it
will require ever-increasing funding to pay its expenses.</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="5"><b>Therefore,
I request financial contributions from site visitors,</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="4"><b>to
help defray the increasing costs of the site</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="4"><b>and
ensure that it continues to be available &amp; to grow.</b></span></span></p>
<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="5"><b>What
would you pay for a good aviation magazine, or a good aviation book?</b></span></span></span></p>
<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="5"><b>Please
consider a donation of an equivalent amount, at the least.</b></span></span></span></p>
<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="6"><i><b>This
site is not supported by commercial advertising –</b></i></span></span></span></p>
<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="6"><i><b>it
is purely supported by donations.</b></i></span></span></span></p>
<p><span face="Arial, sans-serif"><span size="4"><b>If
you enjoy the site, and would like to make a financial contribution,</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="4"><b>you
may use a credit card via 
<img src="http://www.airfields-freeman.com/donate_htm_3334bfa7.jpg" name="graphics3" width="133" height="36">:</b></span></span></p>


<ul>
	<p><span color="#0000ff"><span face="Arial, sans-serif"><span size="4"><b>Please
	consider checking the box to make a monthly donatation.</b></span></span></span></p>
</ul>

<p><span face="Arial, sans-serif"><span size="4"><b>For a
mailing address to send a check, please contact me at:
<a href="mailto:paulandterryfreeman@gmail.com">paulandterryfreeman@gmail.com</a></b></span></span></p>

<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="5"><b>If
you enjoy this web site, please support it with a financial
contribution.</b></span></span></span></p>


<span face="Arial, sans-serif"><span size="5">____________________________________________________</span></span>

<p><span face="Arial, sans-serif"><span size="4">Airfield
entries recently added to the website include:</span></span></p>
<p><span face="Arial, sans-serif">(Original)
Thermopolis Airport WY, Old Savage Mine Airfield NM, Hidden Hills
Ranch Airfield NV, Deering Airport AK, Virginia Beach Airport VA,
Thalia Airport VA, Lyon Airport OH, Ute Dam Airfield NM,</span></p>
<p><span face="Arial, sans-serif">Ames
Airport CA, (Original) San Carlos Airport CA, Clothier Landing Field
KS, Atwood Airport MA, Josephinium Airfield OH, Lovelock Airport NV,
Granite State Airport NH, and updates to many others.</span></p>

<p><span face="Arial, sans-serif"><span size="4">Comments
about my page? Information you would like to contribute?</span></span></p>
<p><span face="Arial, sans-serif"><span size="4">Contact
the author at: <a href="mailto:paulandterryfreeman@gmail.com">paulandterryfreeman@gmail.com</a></span></span></p>
<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="4"><i><b>If
you have pictures or other historical information to help tell the
story of these airfields, please send them.</b></i></span></span></span></p>
<p><span face="Arial, sans-serif"><span size="4">If
you have photographs to share, a few requests:</span></span></p>
<p><span face="Arial, sans-serif"><span size="4">JPG
format usually works the best.</span></span></p>
<p><span face="Arial, sans-serif"><span size="4">Higher
resolution photos are generally better.</span></span></p>
<p><span face="Arial, sans-serif"><span size="4">Please
specify the year the picture was taken, and the photographer (if you
know that information).</span></span></p>
<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="4"><b>Other
items which can be used to expand the website's coverage:</b></span></span></span></p>
<p><span color="#ff0000"><span face="Arial, sans-serif"><span size="4"><b>old
aeronautical charts, photos, or airport directories.</b></span></span></span></p>
<p><span face="Arial, sans-serif"><span size="4"><b>If
you have items such as these &amp; would consider donating them to
the website,</b></span></span></p>
<p><span face="Arial, sans-serif"><span size="4"><b>please
contact the author at: <a href="mailto:paulandterryfreeman@gmail.com">paulandterryfreeman@gmail.com</a></b></span></span></p>
<p><span face="Arial, sans-serif"><span size="5">____________________________________________________</span></span></p>
<p><span face="Arial, sans-serif"><i><b>In
February 2015 the “Abandoned &amp; Little-Known Airfields”
website hit <span color="#ff3333"><span size="4">TWO MILLION</span></span>
visitors!</b></i></span></p>
<p><span face="Arial, sans-serif"><i><b>In
April 2019 the “Abandoned &amp; Little-Known Airfields”
website celebrated its <span color="#ff3333"><span size="5">20</span></span><span color="#ff3333"><sup><span size="5">th</span></sup></span><span color="#ff3333">
</span><span color="#ff3333"><span size="5">Anniversary!
</span></span></b></i></span>
</p>
<p><img src="http://www.airfields-freeman.com/index_htm_33c7a73e.png" name="graphics1" width="276" height="163"></p>
<p><span face="Arial, sans-serif"><span size="4"><i><b>Thanks
to all who have supported this website with historical material &amp;
financial contributions over the past 20 years.</b></i></span></span></p>
<p><span face="Arial, sans-serif">History
of the website:</span></p>
<p><span face="Arial, sans-serif">This
site has been on the web since April 1999.</span></p>
<p><span face="Arial, sans-serif">From
April 2002 - August 2023 this website had 2,945,200 visitors.</span></p>
<p><span face="Arial, sans-serif">Site
visitors since April 2002:</span></p>
<p><img src="http://counter.digits.net/wc/-d/4/AbandonedAirfields" name="Graphic2" width="90" height="20"></p>
<p><span face="Arial, sans-serif"><span size="1">Hit
counter provided by <a href="http://www.digits.net/">digits.net</a>.</span></span></p>

</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Unix sockets, Cygwin, SSH agents, and sadness (127 pts)]]></title>
            <link>https://mjg59.dreamwidth.org/67402.html</link>
            <guid>37304370</guid>
            <pubDate>Tue, 29 Aug 2023 07:11:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mjg59.dreamwidth.org/67402.html">https://mjg59.dreamwidth.org/67402.html</a>, See on <a href="https://news.ycombinator.com/item?id=37304370">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="entry-67402">

<p><span><span lj:user="mjg59"><a href="https://mjg59.dreamwidth.org/profile"><img src="https://www.dreamwidth.org/img/silk/identity/user.png" alt="[personal profile] " width="17" height="17"></a><a href="https://mjg59.dreamwidth.org/"><b>mjg59</b></a></span></span></p><div><p>Work involves supporting Windows (there's a lot of specialised hardware design software that's only supported under Windows, so this isn't really avoidable), but also involves git, so I've been working on extending our support for hardware-backed SSH certificates to Windows and trying to glue that into git. In theory this doesn't sound like a hard problem, but in practice oh good heavens.</p><p><a href="https://gitforwindows.org/">Git for Windows</a> is built on top of <a href="https://www.msys2.org/">msys2</a>, which in turn is built on top of <a href="https://www.cygwin.com/">Cygwin</a>. This is an astonishing artifact that allows you to build roughly unmodified POSIXish code on top of Windows, despite the terrible impedance mismatches inherent in this. One is that until 2017, Windows had no native support for Unix sockets. That's kind of a big deal for compatibility purposes, so Cygwin worked around it. It's, uh, <a href="https://stackoverflow.com/questions/23086038/what-mechanism-is-used-by-msys-cygwin-to-emulate-unix-domain-sockets">kind of awful</a>. If you're not a Cygwin/msys app but you want to implement a socket they can communicate with, you need to implement this undocumented protocol yourself. This isn't <em>impossible</em>, but ugh.</p><p>But going to all this trouble helps you avoid another problem! The Microsoft version of OpenSSH ships an SSH agent that doesn't use Unix sockets, but uses a named pipe instead. So if you want to communicate between Cygwinish OpenSSH (as is shipped with git for Windows) and the SSH agent shipped with Windows, you need something that bridges between those. The state of the art seems to be to use <a href="https://github.com/jstarks/npiperelay">npiperelay</a> with <a href="http://www.dest-unreach.org/socat/">socat</a>, but if you're already writing something that implements the Cygwin socket protocol you can just use <a href="https://github.com/natefinch/npipe">npipe</a> to talk to the shipped ssh-agent and then export your own socket interface.</p><p>And, amazingly, this all works? I've managed to hack together an SSH agent (using <a href="https://pkg.go.dev/golang.org/x/crypto/ssh/agent">Go's SSH agent</a> implementation) that can satisfy hardware backed queries itself, but forward things on to the Windows agent for compatibility with other tooling. Now I just need to figure out how to plumb it through to WSL. Sigh.</p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Compiling Rust for .NET, using only tea and stubbornness (150 pts)]]></title>
            <link>https://fractalfir.github.io/generated_html/rustc_codegen_clr_v0_0_1.html</link>
            <guid>37304167</guid>
            <pubDate>Tue, 29 Aug 2023 06:39:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://fractalfir.github.io/generated_html/rustc_codegen_clr_v0_0_1.html">https://fractalfir.github.io/generated_html/rustc_codegen_clr_v0_0_1.html</a>, See on <a href="https://news.ycombinator.com/item?id=37304167">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>In this article, I describe my journey creating a <a href="https://github.com/FractalFir/rustc_codegen_clr">barely functional rust backend enabling compilation for the .NET runtime</a> (Usually used to run C# and F#).</p>

<p>It is currently in the proof-of-concept stage, but I believe it still may be of some interest.</p>

<h2 id="why_would_one_compile_rust_for_.net_runtime?">Why would one compile Rust for .NET runtime?</h2>

<p>At first, one might dismiss the idea right away. Why on earth would you compile Rust to the .NET runtime, if you can compile it to all architectures and OSes that .NET supports? Why even bother? There are a couple of reasons why.</p>

<ol type="1">
<li>It is pretty fun. I admit, there were moments where I was banging my head on the wall a little bit too much, almost waking my family at night. There were moments where I was reconsidering my life choices. But what is a good programming exercise, without some pain?</li>

<li>It could make Rust/C# inter-op easier and <strong>FAR</strong> more powerful. Don't get me wrong, it is not all that hard right now. You do have to ship a compiled rust library for all the platforms you want to support, and use P/Invoke to interact with it, but that is all, in terms of complexity. But you are limited to C-ABI. You can't simply pass a managed C# array to Rust (without marshaling), or send managed references to C# objects to Rust. While this codegen does not allow that <em>yet</em>, it will in the future.</li>

<li>It enables using fast Rust libraries from C#. When (and if) the project matures, you could write a fast Rust library, and provide a C#/F# compatible version. To all outsiders, this would seem just like yet another C# library, just faster and with a bit of unsafe sprinkled about.</li>

<li>Much smaller memory footprint. Rust likes to guide you, to allocate all you can on the stack. This reduces memory usage, and produces nothing for GC to collect. This should make its life far easier.  Additionally, Rust will allocate only unmanaged heap memory. What does that mean? This is the memory GC knows not to worry about. It is the job of the program to free it. This fits nicely with Rust's memory management.</li>

<li>Ability to use Rust with .NET exclusive tools. Would it not be nice to just use Rust with all the numerous .NET tools? To potentially, far off in the future, write Unity games with Rust?</li>

<li>One executable to rule them all! You could compile your program once and have it run on all platforms supporting .NET. Windows, macOS, Linux? x86, ARM? 64 or 32 bit? All supported by one executable.</li>

<li>There already exists a version of C++ targeting .NET, so doing the same with Rust should be definitely possible! Besides, we don't want to be worse than the C++ people, do we ;)?</li>

<li>I already have a <a href="https://github.com/FractalFir/wrapped_mono">some of experience with Rust/C# interop.</a></li>
</ol>

<p>So, now that I explained <em>why</em> I am doing this, let's get right into the <em>how</em>!</p>

<h2 id="how_to_compile_anything_for_.net">How to compile anything for .NET</h2>

<p>Compiling things for .NET may seem like a hard thing at first, but it is actually not. .NET uses the <code>Common Intermediate Language</code>, part of <code>Common Language Infrastructure</code>. It is an intermediate representation of C#/F# code. If you can emit fully valid CIL, it should be happily loaded by both the .NET runtime (Core CLR) and mono. There is a small, but important asterisk to this statement (<em>foreshadowing</em>), but more on this later.</p>

<p>How would one emit CIL? You could use the built-in C# APIs for code generation. That is very much what I will likely do in the future, but it has its own Rust-specific issues, and is generally just harder to do for this particular project. The great thing about CIL is that it has a human-readable form. What matters for our use-case is that it can be easily generated from the Rust side, and then turned into a compiled .NET assembly, using a tool called <code>ilasm</code>(Intermediate Language Assembler). This approach has 2 huge benefits: I can read the produced assembly and spot most of the mistakes. The C# decompiler can be used to get C# code equivalent to the assembly produced by my backend. It also helps verify that everything is going OK, because there is no way both <code>ilasm</code> and a C# decompiler would happily accept invalid IL that the .NET runtime would refuse to load, right?</p>

<h2 id="small_snippet_of_cil">Small snippet of CIL</h2>

<p>C# code</p>

<pre><code>public static int Add2(int P_0)
{
    return P_0 + 2;
}</code></pre>

<p>CIL</p>

<pre><code>.method public static hidebysig int32 Add2(int32){
    ldarg.0
    ldc.i4 2
    add
    ret
}</code></pre>

<p>As you can see, CIL is stack based, and consists of a series of opcodes, manipulating this stack. Besides containing code, CIL also contains type info, but this is something I will go more in depth in another article.</p>

<h2 id="how_to_compile_rust_for_anything">How to compile Rust for anything</h2>

<p>Rust is a very complicated language. Writing a compiler for it is hard, but we have more options for compiling Rust for any target we desire. Rust normally uses LLVM for code generation. But it does not have to: the rust compiler backend works as a plugin:</p>

<p>You can easily swap it out for another one, by simply pointing <code>rustc</code> to a relevant dynamic library using the <code>-Z codegen-backend=YOUR_CODEGEN_HERE.dll</code> flag. As long as it provides the relevant functions, <code>rustc</code> will pass you all the info needed for generating code for any crate. At this stage, a rust program is represented using the MIR(mid-level IR) format. It its relatively easy to handle, with a few quirks that can be ignored for our purposes. It seems very inspired by LLVM's IR, which makes sense, since it is usually converted to LLVM IR almost right away.</p>

<p>While MIR is not hard, getting to it is not a trivial task, since you first need to familiarize yourself with the relevant internal Rust APIs. I managed to get my backend to emit CIL for a simple identity function in about ~1.5 days, starting with little to no knowledge about how <code>rustc</code> works on the inside. Once you get the hang of it, building more complicated features does not take all that much time. It is, not, however, all rainbows and sunshine.</p>

<h2 id="we_are_not_in_kansas_anymore">We are not in Kansas anymore</h2>

<p>Rusts standard library, and a lot of the popular crates, are like a museum. While it does change, as new exhibitions are added, it is mostly finished. Each painting has a detailed explanation in 7 different languages underneath. Descriptions below each excitation are written beautifully, with detailed drawings, showing how everything works. It is so easy to navigate, one glance at the map is enough to find exactly what you are looking for. It is so convenient, you almost don't notice that you are learning something. <br></p>

<p>Internals of <code>rustc</code> are like a build site of a sprawling factory. You can see the scaffolds everywhere, as more production lines come online, and everything gets faster, better, bigger. Workers move around, knowing the place like the back of their hands. They can glance at the signs on the walls, and instantly tell you: where you are, what this place does and what pitfalls you should avoid. And you are a new hire who has just came for his first day at the new job. You look at the sign, and after some thinking, you too are able to tell roughly in which building you are. The signs almost always tell you what you need, just in short, cryptic sentences. You always can tell what is going on, with some thinking, but it is not effortless. The signs on the walls are not <em>bad</em>, just not written for anyone to get right away.</p>

<p>This is roughly the feeling you might get when reading the documentation of <code>rustc</code> internals. I wan't to once again reiterate: it is, by any means, bad. It is simply hard. And that is to be expected, since it is still being worked on.</p>

<p>So, if you want to start working anything related to compiler internals, manage your expectations. Don't just blast in, expecting to get everything right away. Equip yourself with some patience, and a big cup of your preferred beverage.</p>

<h2 id="it_is_not_bad,_and_is_getting_even_better!">It is not bad, and is getting even better!</h2>

<p>I am going to end this on a positive note: if you are reading this in a couple years time, there is high likelihood that this section is not relevant in any way. If you take a look at the documentation, it is clear that not only is it not in a "finished", state, there is a slow, but steady work made on improving it. Some sections have a little <code>Clarification needed</code> underneath, with an issue linked below. So, while it is not perfect, I am hopeful for the future.<br></p>

<p>I would like to also thank the people in Rusts zulip for all the help. I am a pretty shy person, who always overthinks everything, so I was pretty reluctant to ask any questions. Thankfully, it turns I once again stressed over nothing. The people there were very helpful, and answered my questions shockingly quick. They even gave me advice about things I had not yet asked! I am certain I would not get nearly as far into this project, without this help.<br></p>

<p>So, lets now get over this little tangent, and go back on track.</p>

<h2 id="steady_progress">Steady progress</h2>

<p>After some initial troubles, I had managed to push on and got the project to a state in which some simple demo libraries could be compiled. A lot of stuff was relatively easy to handle, so over a couple of weeks I had added support for all kinds of stuff. I was regularly checking the disassembled C# code, created from CIL I emitted, to ensure everything looked OK. After about 2 weeks, I had support for all the binary operations (add, bit-shift, e.t.c), some unary ops (e.g. bitwise not) and operations without arguments (e.g. sizeof). The codegen was also able to handle a lot of building blocks related to control flow, like <code>if/else</code> statements, simple match statements, and while loops. For loops are kind of special, since they require support for iterators and generics. Additionally, they are likely to require heavy optimization to work at comparable speed. I had also added support for calls, and a lot of types, such as references, structs, tuples, arrays and slices.</p>

<h2 id="arrays_are_harder_than_they_look">Arrays are harder than they look</h2>

<p>It has latter turned out, that the current implementation of arrays is highly flawed, and JIT sometimes seems to just decide to optimize reads/ writes to and from arrays to NOPs. Why exactly? I can't know for certain, but I have an idea that could potentially fix this issue. The <code>.volatile</code> prefix to a CIL instruction disables certain optimizations, so it could help. I won't implement it right now, since this is not the only issue with arrays, which need to be redesigned anyway.</p>

<p>What is the other issue? I based my implementation upon the way C# handles fixed-size arrays. They essentially work by creating a hidden, nested struct type with a <code>.size</code> in definition specifying its size in bytes. Some keen-eyed people may have already seen the problem:</p>

<p>Since the size of a fixed-size array is declared in bytes, there is no way to have support for both 32 bit and 64 bit machines at the same time. Some types, such as pointers, have their size depend on how big the address space is. So an array of 10 pointers is 40 bytes on a 32 bit machine and 80 bytes on a 64 bit one. So, there are 3 options: have separate executables for 32-bit and 64-bit architectures, crash on 64-bit ones, or use far more memory than needed on already memory-limited 32-bit systems. There is an alternative solution, but it is kinda hacky and needs some more consideration. Its biggest drawback is that it would create many unnecessary types.</p>

<p>Even with those kinds of issues, is still pressed on, at a pretty steady pace, successfully compiling more, and more complicated snippets of rust code.</p>

<h2 id="running_the_code_for_the_first_time">Running the code for the first time</h2>

<p>Fairly confident in the project, I had decided to create a small <code>Hello World</code> example. Since using C# APIs from rust is still far off, I had hard-coded some functions from the C standard library. This is something I will need to do anyway, since Rusts stdlib depends on <code>libc</code>. This is the easiest way to bring Rust's stdlib to .NET, since it does not require any rewrites. But I digress. Using the <code>putc</code> function, I can print a simple message to the console. I run my backend, creating a CIL file containing the <code>hello world</code> program. With anticipation, I type <code>ilasm hello</code>. I start to smile as the words <code>Operation completed successfully</code> appear within the terminal. I feel a rush of adrenaline and endorphins. Sure, I had used my backend to compile more advanced libraries before, but all I knew is that they were valid CIL, and decompiled C# suggested they would work. This small <code>hello world</code> program would be the first snippet of Rust code to run within a .NET runtime. I type <code>mono hello.exe</code>, expecting the words <code>Hello CLR from Rust!</code> to appear on my screen. Instead, I am greeted with this little message:</p>

<pre><code>Unhandled Exception:
System.InvalidProgramException: Invalid IL code in &lt;Module&gt;:main (intptr,byte**): IL_0000: ldc.i4.s  72</code></pre>

<p>Oh... that is not a good sign.</p>

<h2 id="ilasm_is_a_filthy_liar">ILASM is a filthy liar</h2>

<p>You would assume that if some CIL code is blatantly wrong, <code>ilasm</code> would be unable to assemble it. This is sadly the case only with some mistakes. For some, it will not give you any warnings. You know what is worse? There is a subset of malformed CIL that the particular decompiler I was using(I can't say for all of them, I used only one) would turn into <strong>FULLY VALID C#</strong>, hiding the issue.  You know what is even worse? For some issues, both the runtime I was using (mono) and CoreCLR gave me not all that much info about what was wrong. CoreCLR's message was too generic, and while mono at least told me which method caused the issue, it was wrong about what was the problem exactly.</p>

<p>The part of the message about invalid IL code, instruction position and the instruction itself could lead you to believe that the instruction in question <code>ldc.i4.s</code> was the issue. So I tried removing it. Issue persisted. So I removed more. Nothing. Even more. More. MORE. Until all that was left was a single <code>ret</code> opcode. What? How is that possible? There is almost nowhere the issue can be? The only part left, besides the function signature and name, is...</p>

<h2 id=".locals">.locals</h2>

<p>Any function in CIL has to declare all of its local variables. A valid declaration of locals looks something like this:</p>

<pre><code>.local(
   [0] int32,
   [1] float32,
   [2] int8,
   [3] int16*,
   [4] void*
)</code></pre>

<p>And one with the particular issue I was facing looks like this:</p>

<pre><code>.local(
   [0] int32,
   [1] float32,
   [2] int8,
   [3] int16*,
   [4] void
)</code></pre>

<p>You can't have a <code>void</code> type in locals. But why would you even have a void local in the first place? Rust likes to have locals with type void. And a LOT of them at that. Huh?</p>

<p>The reason <code>void</code> locals are so prevalent in <code>MIR</code> is mostly related to function calls (other sources of void locals exist too). The way MIR is designed, each function is assumed to return something. And this is a great assumption, that simplifies a lot of stuff. Both functions returning void and ones returning something are treated exactly the same. Code can just handle <code>functions</code>, not <code>void functions</code> and <code>every other function</code>. Additionally,  this is very similar to how LLVM deals with void functions, so converting MIR to LLVM is easier too.</p>

<p>Why didn't I remove those void locals right away, and instead choose to emit CIL with them? Would they not be useless at best, make the compiled assembly larger, and could potentially confuse the JIT? Well, at this stage of the project, I don't actually want to emit optimal code. I want to emit code that is as similar to the original MIR as possible. That just makes debugging easier.</p>

<p>Wasn't the problem obvious right away? I mean, both C#/F# don't allow void locals, so why on earth would they be supported? In hindsight, it seems foolish to assume they would work. I thought that if both the ilasm and a decompiler had no problem with void locals, this would work out just fine. I had quickly written a piece of code to remove any instructions interacting with void locals, and then changed their type. I did not want to outright remove them, at least not for now, since that would make CILs locals not map 1 to 1 to MIR locals. This would make analyzing generated CIL harder, and I still need to do that very often. After this quick and dirty fix, I had reassembled the code, and run it. I sigh with relief, as I see the words:</p>

<p><code>Hello CLR from Rust</code></p>

<p>And this is where this story ends, at least for now.</p>

<h2 id="what_now?">What now?</h2>

<p>Now that I know that compiling Rust for the .NET runtime is very much possible, I will need to clean the project up. It is very, <strong>very</strong> buggy and unstable. There are features that sometimes work, and sometimes do not. If I want to go any further, I need to rewrite some parts of the codegen. Currently, a lot of stuff is written with the assumption that ilasm will be used to assemble the final executable, which makes changing the CIL generator for a better one very hard. I also do things that are OK right now, but become a nightmare, the second I add support for generics. The way I assemble the final executable is also not all that great, since it is not really the way a <code>rustc</code> backend is supposed to create excutables. Overall, what happens now will be just a bit of boring, but necessary work.</p>

<p>Sadly I probably won't be able to work at anything similar to pace I worked on during those 2 weeks. As September comes closer by, so does the start of the school year, and the exams at the end of my high school. It will probably be wise to dial programming down, at least a little bit.</p>

<p>Still, if you want to, you can <a href="https://github.com/FractalFir/rustc_codegen_clr">check out the project in its current state.</a> Just beware of the issues, and that this is a proof-of-concept strung together with gum and tape.</p>

<p>I hope you enjoyed this little article!</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A note to young folks: download the things you love (256 pts)]]></title>
            <link>https://birchtree.me/blog/a-note-to-young-folks-download-the-videos-you-love/</link>
            <guid>37304125</guid>
            <pubDate>Tue, 29 Aug 2023 06:30:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://birchtree.me/blog/a-note-to-young-folks-download-the-videos-you-love/">https://birchtree.me/blog/a-note-to-young-folks-download-the-videos-you-love/</a>, See on <a href="https://news.ycombinator.com/item?id=37304125">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>

    

    <div>
        <p>Many years ago, my favorite podcast was <a href="https://en.wikipedia.org/wiki/The_Totally_Rad_Show?ref=birchtree.me">The Totally Rad Show</a>. It was a fun video podcast where the hosts reviewed movies, games, TV shows, and other general nerd stuff. The hosts were Jeff Cannata (who last year <a href="https://birchtree.me/blog/jeff-cannata-is-the-podcasting-g-o-a-t/">I called the podcasting GOAT</a>), Dan Trachtenberg (who went on to direct 10 Cloverfield Lane and last year's Prey), and Alex Albrecht (who seems to have a nice life going, but is less in the public eye today).</p><p>Anyway, I linked to the show's Wikipedia page because the original episodes are no longer available to download from the official source (<a href="https://web.archive.org/web/20110309024639/http://revision3.com/trs/">here's an archived version</a>). Happily, <a href="https://www.youtube.com/@TRSarchive?ref=birchtree.me">a kind soul</a> has recently uploaded many episodes to YouTube, but that's just lucky, and those aren't guaranteed to be eternal either.</p><p>Back in the day, you could stream shows like this, but more often than not you would download them and watch them locally. That's what I did, so I had every episode on my computer at one point, but I deleted each one when I was done with it. In retrospect, I wish I'd saved most of these episodes to an external drive.</p><p>This applies to other things as well. There are little internet videos from the pre-YouTube days that I think about and would love to see again, but can't. There are versions of songs that you can't get on streaming services. There are just some things I remember from years ago that I can't see again, and that's a shame.</p><p>Things on the internet <em>can</em> be forever, but you can't assume someone else will keep them going, especially when it's stuff like video, which costs real money to host. If you love something, try to get a local copy and store it on a hard drive you control.</p><p>For video content around the web, I highly recommend trying out <a href="https://github.com/yt-dlp/yt-dlp?ref=birchtree.me">yt-dlp</a>, which is an astoundingly great command line tool for downloading video from most big sites.</p>
    </div>

    

</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Alexandria: A minimalistic cross-platform eBook reader (226 pts)]]></title>
            <link>https://github.com/btpf/Alexandria</link>
            <guid>37303960</guid>
            <pubDate>Tue, 29 Aug 2023 05:55:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/btpf/Alexandria">https://github.com/btpf/Alexandria</a>, See on <a href="https://news.ycombinator.com/item?id=37303960">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto">Alexandria</h2>
<p>A minimalistic cross platform eBook reader, built with Tauri ❤️ Epub.js</p>

<br>
<div dir="auto"><a href="https://github.com/btpf/Alexandria/blob/main"> <gh:secured-asset-reference resource_type="UserAsset" resource_id="256099617"></gh:secured-asset-reference></a><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/btpf/Alexandria/assets/61168382/6ff644fa-b4bf-4a8b-bc85-c1f44c21b2a3"><img src="https://github.com/btpf/Alexandria/assets/61168382/6ff644fa-b4bf-4a8b-bc85-c1f44c21b2a3"></a> </p></div>
<h2 tabindex="-1" dir="auto">Main Features:</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/fluentui-emoji/blob/main/assets/Green%20circle/Flat/green_circle_flat.svg"><img height="18px" width="18px" src="https://github.com/microsoft/fluentui-emoji/raw/main/assets/Green%20circle/Flat/green_circle_flat.svg"></a> = Completed
<a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/fluentui-emoji/blob/main/assets/Yellow%20circle/Flat/yellow_circle_flat.svg"><img height="18px" width="18px" src="https://github.com/microsoft/fluentui-emoji/raw/main/assets/Yellow%20circle/Flat/yellow_circle_flat.svg"></a>  = Work in Progress (For 1.0)
<a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/fluentui-emoji/blob/main/assets/Purple%20circle/Flat/purple_circle_flat.svg"><img height="18px" width="18px" src="https://github.com/microsoft/fluentui-emoji/raw/main/assets/Purple%20circle/Flat/purple_circle_flat.svg"></a>  = Planned (After 1.0)</p>

<h2 tabindex="-1" dir="auto">Screenshots:</h2>
<h2 tabindex="-1" dir="auto">Default Light &amp; Dark Themes</h2>
<div dir="auto"><a href="https://github.com/btpf/Alexandria/blob/main"> <gh:secured-asset-reference resource_type="UserAsset" resource_id="261055881"></gh:secured-asset-reference></a><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/btpf/Alexandria/assets/61168382/46fa4d93-8365-44bd-afd0-eb4bbbdba878"><img src="https://github.com/btpf/Alexandria/assets/61168382/46fa4d93-8365-44bd-afd0-eb4bbbdba878"></a> </p></div>
<h2 tabindex="-1" dir="auto">Annotations Popup</h2>
<div dir="auto"><a href="https://github.com/btpf/Alexandria/blob/main"> <gh:secured-asset-reference resource_type="UserAsset" resource_id="261055974"></gh:secured-asset-reference></a><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/btpf/Alexandria/assets/61168382/a456dfff-0849-4de1-aac4-cface9b032e3"><img src="https://github.com/btpf/Alexandria/assets/61168382/a456dfff-0849-4de1-aac4-cface9b032e3"></a> </p></div>
<h2 tabindex="-1" dir="auto">Theme Customizer</h2>
<div dir="auto"><a href="https://github.com/btpf/Alexandria/blob/main"> <gh:secured-asset-reference resource_type="UserAsset" resource_id="261056088"></gh:secured-asset-reference></a><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/btpf/Alexandria/assets/61168382/22e5d80d-b0e2-4098-bf79-738bc1d9a2de"><img src="https://github.com/btpf/Alexandria/assets/61168382/22e5d80d-b0e2-4098-bf79-738bc1d9a2de"></a> </p></div>
<h2 tabindex="-1" dir="auto">Reader Settings</h2>
<div dir="auto"><a href="https://github.com/btpf/Alexandria/blob/main"> <gh:secured-asset-reference resource_type="UserAsset" resource_id="256099416"></gh:secured-asset-reference></a><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/btpf/Alexandria/assets/61168382/f2ce3aba-0785-472a-965e-0e2d59a36140"><img src="https://github.com/btpf/Alexandria/assets/61168382/f2ce3aba-0785-472a-965e-0e2d59a36140"></a> </p></div>
<hr>
<p dir="auto">Built With Node Version: v16.16.0</p>
<h2 tabindex="-1" dir="auto">Credits</h2>
<p dir="auto"><a href="https://github.com/johnfactotum/foliate">johnfactotum/foliate</a> - Inspiration for building project, code snippets, and FictionBook + Comicbook Support<br>
<a href="https://github.com/futurepress/epub.js">futurepress/epub.js</a> - Providing foundation for project<br>
<a href="https://github.com/bfabiszewski/libmobi">bfabiszewski/libmobi</a> - Providing Kindle Format Support</p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Changing my relationship with GitHub Copilot (106 pts)]]></title>
            <link>https://ntietz.com/blog/changing-my-relationship-with-github-copilot/</link>
            <guid>37303357</guid>
            <pubDate>Tue, 29 Aug 2023 03:48:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ntietz.com/blog/changing-my-relationship-with-github-copilot/">https://ntietz.com/blog/changing-my-relationship-with-github-copilot/</a>, See on <a href="https://news.ycombinator.com/item?id=37303357">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
  

  <p><strong>Monday, August 28, 2023</strong></p>

  <p>I've been using GitHub Copilot on personal projects since March.
It's been an interesting experience, and one that I realized I have to change.
Using Copilot nearly full time has had some positive and  negative impacts on me, and it's time to take control of how I interact with it.</p>
<h2 id="the-honeymoon-phase">The honeymoon phase</h2>
<p>I've liked a lot about working with Copilot.
For this duration I've had Copilot enabled full-time in code files<sup><a href="#1">1</a></sup>.
I pretty quickly found that I was able to be productive in ways that I was struggling with before due to life circumstances.
With two kids, a full-time job, a time-consuming running habit, and ongoing medical treatment, by the time I sit down to write code for myself, I'm just <em>tired</em>.</p>
<p>But with Copilot enabled, it was a lot easier to actually write code in the evenings even when I was tired.
I could put in simple comments as prompts and get back out something that mostly-sorta worked, then shape it into what I needed.</p>
<p>This led me to get some work done on small projects and a few assorted scripts.
I made progress on an issue tracker I am working on with a friend.
I wrote the parser and formatter for my <a href="https://ntietz.com/blog/introducing-hurl/">programming language</a>.
This was pretty good work, and I was able to get it done even when tired!
It seemed like everything was going well.</p>
<h2 id="cracks-form">Cracks form</h2>
<p>Outside of work, all my coding was done with Copilot enabled.
I also had vim configured with rust-analyzer to show errors automatically and give me suggestions.</p>
<p>This worked pretty well, and it felt immediately productive.
The common wisdom is that you should use the best power tools you can in your editor to be as productive as possible, and I wanted to be productive.
More tools, we're told, will help us be better.</p>
<p>But then...</p>
<p>I stopped writing very much code for fun.
It wasn't conscious, but when I sat down at my desk, the last thing I wanted to do was work on personal projects.
Sometimes I made myself and it was enjoyable, but then I'd fall into a funk again.
I just couldn't motivate myself for the projects I was working on.</p>
<p>There are a lot of factors at play in my life right now.
I told myself that this is because work is a lot, because kids are a lot, because transition is <em>a lot</em>.
I didn't suspect that my editor and the tools that I setup to <em>help</em> me were related.</p>
<h2 id="rediscovering-joy">Rediscovering joy</h2>
<p>But last week, a friend at <a href="https://www.recurse.com/">RC</a> noted that she doesn't use syntax highlighting and doesn't use other noisy editor plugins.
I've been curious about stopping using syntax highlighting, and her reasoning really spoke to me, so I tried it.</p>
<p>I went and found a grayscale color scheme (since I do like a <em>small</em> amount of visual distinction for comments) and installed it.
Immediately, I felt some relief.
I disabled my LSP plugin in vim, disabled rust-analyzer.
More relief.</p>
<p>When I went to work on a project, suddenly it was... fun again?
The editor was sitting there, waiting for me to enter code.
No code would appear unless I typed it.
The only thoughts entered would be mine.</p>
<p>This is the way that I fell in love with programming: the editor a channel for my thoughts, the compiler transforming them into something I could run, and little else in the way.</p>
<p>It has taken me much of adulthood to come to understand how my brain works.
It baffles me that people can take in a lot of visual and auditory noise and still be productive; how anyone can achieve <em>anything</em> in an open office is beyond me.
This noise extends into the digital: Slack pings, email notifications.
And by using plugins that push information into my editor, I extended it into vim.</p>
<p>This works for a great many other devs, and I'm glad that we have these tools.
But I don't understand it.
It's not a relatable experience.</p>
<p>It's like with word processors and spellcheck.
When we used them in school for homework, most of my classmates left spellchecking on, and caught errors as they went or ignored them until they were done, with seeming ease.
I had to disable it.
Each red squiggle under a misspelled word would vaporize my thinly held train of thought, which I then had to claw back.
Some of the time I would remember to run it after my assignment was done; other times, I just got points off.</p>
<p>It's like that with LSPs that give error checking, and it's like that with Copilot.
When my tooling pushes information into my editor, it vaporizes my concentration.
This is harder to see with Copilot, since the value it gives is in part being able to do more with less focus.
But the end result is that it sucked the joy out of things, because with these tools I could not reach the flow state I am so deeply in love with.
If I got close, an error or suggestion would rip me back out.</p>
<h2 id="looking-for-equilibrium">Looking for equilibrium</h2>
<p>Last week, after that conversation with my friend, I had disabled everything.
No more LSP, no more Copilot, no more colors.
That was great at first, and it was a reactionary response.</p>
<p>But I think I can strike a better balance.
These tools <em>do</em> provide value, and my problem isn't with the tools but with my relationship with them.
I was letting them control me and control my interactions with them.</p>
<p>From now on, I'm in charge.
I'll control those interactions, and the tools will do what I ask them, only <em>when</em> I ask them to do it.</p>
<p>I've dipped my toes back into the tool waters.
I re-installed my Copilot plugin, but left it disabled.
There's a hotkey to invoke it when, and only when, I want to reach for a suggestion.</p>
<p>Sometime I'll add my LSP integrations back in for some more power, without the visual noise.
I like some aspects of them, but I can't deal with others.
Finding equilibrium is hard, and I think it's worth pursuing.</p>
<p>But only if the joy remains<sup><a href="#2">2</a></sup>.</p>
<hr>




  <hr>
  <p>
    If this post was enjoyable or useful for you, <strong>please share it!</strong>
    If you have comments, questions, or feedback, you can email <a href="mailto:me@ntietz.com">my personal email</a>.
    To get new posts, subscribe to the <a href="https://ntietz.com/newsletter">newsletter</a> or use the <a href="https://ntietz.com/atom.xml">RSS feed</a>.
  </p>
  
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[WebLLM: Llama2 in the Browser (166 pts)]]></title>
            <link>https://webllm.mlc.ai/</link>
            <guid>37301991</guid>
            <pubDate>Tue, 29 Aug 2023 00:19:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://webllm.mlc.ai/">https://webllm.mlc.ai/</a>, See on <a href="https://news.ycombinator.com/item?id=37301991">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <!-- This is a bit nasty, but it basically says be a column first, and on larger screens be a spaced out row -->
            <div>
              <p><a href="https://webllm.mlc.ai/" id="navtitle">
                  <img src="https://webllm.mlc.ai/assets/img/logo/mlc-logo-with-text-landscape.svg" height="70px" alt="MLC" id="logo">
              </a></p>
            </div>

            

            
            <!-- Schedule  -->
            
                

<h2 id="web-llm">Web LLM</h2>

<p><strong>Llama 2 7B/13B are now available in Web LLM!!</strong> Try it out in our <a href="#chat-demo">chat demo</a>.</p>

<p><strong>Llama 2 70B is also supported.</strong> If you have a Apple Silicon Mac with 64GB or more memory, you can follow the <a href="#instructions">instructions</a> below to download and launch Chrome Canary and try out the 70B model in Web LLM.</p>

<p>This project brings large-language model and LLM-based chatbot to web browsers. <strong>Everything runs inside the browser with no server support and accelerated with WebGPU.</strong> This opens up a lot of fun opportunities to build AI assistants for everyone and enable privacy while enjoying GPU acceleration. Please check out our <a href="https://github.com/mlc-ai/web-llm">GitHub repo</a> to see how we did it.</p>

<p><img src="https://webllm.mlc.ai/img/fig/pitts.png" width="100%"></p>

<p>We have been seeing amazing progress in generative AI and LLM recently. Thanks to the open-source efforts like LLaMA, Alpaca, Vicuna and Dolly, we start to see an exciting future of building our own open source language models and personal AI assistant.</p>

<p>These models are usually big and compute-heavy. To build a chat service, we will need a large cluster to run an inference server, while clients send requests to servers and retrieve the inference output. We also usually have to run on a specific type of GPUs where popular deep-learning frameworks are readily available.</p>

<p>This project is our step to bring more diversity to the ecosystem. Specifically, can we simply bake LLMs directly into the client side and directly run them inside a browser? If that can be realized, we could offer support for client personal AI models with the benefit of cost reduction, enhancement for personalization and privacy protection. The client side is getting pretty powerful.</p>

<p>Won’t it be even more amazing if we can simply open up a browser and directly bring AI natively to your browser tab? There is some level of readiness in the ecosystem. This project provides an affirmative answer to the question.</p>

<h2 id="instructions">Instructions</h2>

<p>WebGPU just shipped to Chrome. You can try out the latest Chrome 113. Chrome version ≤ 112 is not supported, and if you are using it,
the demo will raise an error like <code>Find an error initializing the WebGPU device OperationError: Required limit (1073741824) is greater than the supported limit (268435456). - While validating maxBufferSize - While validating required limits.</code></p>

<p>Select the model you want to try out. Enter your inputs, click “Send” – we are ready to go!
The chat bot will first fetch model parameters into local cache. The download may take a few minutes, only for the first run.
The subsequent refreshes and runs will be faster. We have tested it on Windows and Mac, you will need a GPU with about 6GB memory to run Llama-7B, Vicuna-7B, and about 3GB memory to run RedPajama-3B.</p>

<p><strong>Some of the models requires fp16 support. To enable fp16 shaders, you will need to use the following instruction(<code>allow_unsafe_apis</code>) to turn on the support in Chrome Canary.</strong></p>
<ul>
  <li>Install <a href="https://www.google.com/chrome/canary/">Chrome Canary</a>, a Chrome nightly build for developers.</li>
  <li>Launch Chrome Canary from terminal with the following command:
    <div><pre><code>/Applications/Google\ Chrome\ Canary.app/Contents/MacOS/Google\ Chrome\ Canary --enable-dawn-features=allow_unsafe_apis
</code></pre></div>
  </li>
</ul>

<h2 id="chat-demo">Chat Demo</h2>

<p>The chat demo is based on <a href="https://ai.meta.com/llama/">Llama 2</a>, <a href="https://huggingface.co/lmsys/vicuna-7b-delta-v1.1">vicuna-7b-v1.1</a> model and <a href="https://huggingface.co/togethercomputer/RedPajama-INCITE-Chat-3B-v1">RedPajama-INCITE-Chat-3B-v1</a> model. More model supports are on the way.</p>



<h2 id="links">Links</h2>

<ul>
  <li><a href="https://github.com/mlc-ai/web-llm">Web LLM Github</a></li>
  <li>You might also be interested in <a href="https://websd.mlc.ai/">Web Stable Diffusion</a>.</li>
</ul>

<h2 id="disclaimer">Disclaimer</h2>

<p>This demo site is for research purposes only, subject to the model License of LLaMA, Vicuna and RedPajama. Please contact us if you find any potential violation.</p>

            
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Tech sector Salaries have fallen up to 15 per cent as fired talent floods market (115 pts)]]></title>
            <link>https://www.afr.com/technology/tech-workers-take-20-000-plus-pay-cuts-as-fired-talent-floods-market-20230824-p5dz4o</link>
            <guid>37301855</guid>
            <pubDate>Tue, 29 Aug 2023 00:01:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.afr.com/technology/tech-workers-take-20-000-plus-pay-cuts-as-fired-talent-floods-market-20230824-p5dz4o">https://www.afr.com/technology/tech-workers-take-20-000-plus-pay-cuts-as-fired-talent-floods-market-20230824-p5dz4o</a>, See on <a href="https://news.ycombinator.com/item?id=37301855">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="endOfArticle"><p>Technical project managers with a decade of experience could earn $180,000 to $200,000 in 2021, but those figures had pulled back to between $150,000 and $180,000. He said mid-level automation testers could earn $160,000 in 2021 but $150,000 this year.</p><p>Based on anecdotal experience and their own data, recruiters said tech salaries were correcting after a hiring frenzy in 2021 and 2022, when companies overpaid for technology staff. This inflated salaries by 20 per cent to 30 per cent from their pre-pandemic levels.</p><figure data-pb-type="im"><picture><source media="(min-width: 1180px)" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=, data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-srcset="https://static.ffx.io/images/$width_620/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8, https://static.ffx.io/images/$width_1240/t_resize_width%2Cq_52%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8 2x" data-pb-im-config="{&quot;aspectRatio&quot;:0,&quot;type&quot;:&quot;raw&quot;,&quot;width&quot;:620,&quot;urls&quot;:[&quot;https://static.ffx.io/images/$width_620/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8&quot;,&quot; https://static.ffx.io/images/$width_1240/t_resize_width%2Cq_52%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8 2x&quot;]}"><source media="(min-width: 1020px)" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=, data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-srcset="https://static.ffx.io/images/$width_620/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8, https://static.ffx.io/images/$width_1240/t_resize_width%2Cq_52%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8 2x" data-pb-im-config="{&quot;aspectRatio&quot;:0,&quot;type&quot;:&quot;raw&quot;,&quot;width&quot;:620,&quot;urls&quot;:[&quot;https://static.ffx.io/images/$width_620/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8&quot;,&quot; https://static.ffx.io/images/$width_1240/t_resize_width%2Cq_52%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8 2x&quot;]}"><source media="(min-width: 768px)" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=, data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-srcset="https://static.ffx.io/images/$width_696/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8, https://static.ffx.io/images/$width_1392/t_resize_width%2Cq_52%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8 2x" data-pb-im-config="{&quot;aspectRatio&quot;:0,&quot;type&quot;:&quot;raw&quot;,&quot;width&quot;:696,&quot;urls&quot;:[&quot;https://static.ffx.io/images/$width_696/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8&quot;,&quot; https://static.ffx.io/images/$width_1392/t_resize_width%2Cq_52%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8 2x&quot;]}"><img alt=" " data-testid="Image-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-src="https://static.ffx.io/images/$width_620/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=, data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII=" data-srcset="https://static.ffx.io/images/$width_382/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8, https://static.ffx.io/images/$width_764/t_resize_width%2Cq_52%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8 2x" sizes="(max-width: 767px) 382px" data-id="74c1131278674dad590eabdafecd05b4dc67beb8" data-pb-im-config="{&quot;aspectRatio&quot;:0,&quot;type&quot;:&quot;raw&quot;,&quot;width&quot;:382,&quot;urls&quot;:[&quot;https://static.ffx.io/images/$width_382/t_resize_width%2Cq_88%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8&quot;,&quot; https://static.ffx.io/images/$width_764/t_resize_width%2Cq_52%2Cf_auto/74c1131278674dad590eabdafecd05b4dc67beb8 2x&quot;]}"></picture></figure><p>They said the market had cooled as migration returned and a visa backlog cleared, while start-ups and tech giants have made thousands of workers redundant amid a collapse in venture capital funding on offer.</p><p>Elsewhere, the big four banks have adjusted to the uncertain economic outlook by putting IT projects on hold, cutting contractors or moving them to lower paid – but more secure – permanent roles.</p><p>Last week, Commonwealth Bank of Australia was <a href="https://www.itnews.com.au/news/cba-cuts-221-roles-in-technology-business-division-599554?eid">reported</a> to have made more than 200 IT workers redundant, after previously <a href="https://www.afr.com/technology/cba-defies-skills-shortage-targets-1000-more-techies-20220408-p5ac3z">speaking publicly</a> about its desperate hunt for more tech talent.</p><p>“We’ve definitely seen a slowdown or cooling down in the market,” Mr Rughani told <em>The Australian Financial Review</em>.</p><p>“There is still hiring out there, but companies can afford to be a lot more selective, and it’s a not candidate-driven market anymore.”</p><p>Data from local recruitment firm Seek showed advertised salaries in the information and communication technology industry grew just 1.8 per cent in the year to July and 0.2 per cent in the past quarter. This reflects ongoing sluggish demand for labour in ICT, with job advertisements also down 35 per cent year-on-year.</p><p>“We’re not going to get back to pre-pandemic levels; salaries will be higher, but there’s a lot more scrutiny from the top-down on hiring employees with high salaries,” he said.</p><h2>Taking a haircut</h2><p>Matthew Munson, Sydney managing director of recruitment firm Talent, said supply of tech skills was outstripping demand for the first time since the pandemic hit. He said salary and contractor rates have fallen by an average of 10 per cent to 15 per cent compared to 12 months ago.</p><p>“The high salaries that occurred in the post-pandemic boom of tech for permanent and contract employees were not sustainable and employers are now looking to reduce costs,” Mr Munson said.</p><p>“If they lay people off now, they can potentially rehire in six months and save considerably.”</p><figure data-pb-type="im"><picture><source media="(min-width: 1180px)" width="220" height="220" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7, data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-srcset="https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_220%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e, https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_440%2Cq_52%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e 2x" data-pb-im-config="{&quot;aspectRatio&quot;:1,&quot;type&quot;:&quot;square1x1&quot;,&quot;width&quot;:220,&quot;urls&quot;:[&quot;https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_220%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e&quot;,&quot; https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_440%2Cq_52%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e 2x&quot;]}"><source media="(min-width: 1020px)" width="240" height="240" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7, data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-srcset="https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_240%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e, https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_480%2Cq_52%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e 2x" data-pb-im-config="{&quot;aspectRatio&quot;:1,&quot;type&quot;:&quot;square1x1&quot;,&quot;width&quot;:240,&quot;urls&quot;:[&quot;https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_240%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e&quot;,&quot; https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_480%2Cq_52%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e 2x&quot;]}"><source media="(min-width: 768px)" width="240" height="240" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7, data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-srcset="https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_240%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e, https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_480%2Cq_52%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e 2x" data-pb-im-config="{&quot;aspectRatio&quot;:1,&quot;type&quot;:&quot;square1x1&quot;,&quot;width&quot;:240,&quot;urls&quot;:[&quot;https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_240%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e&quot;,&quot; https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_480%2Cq_52%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e 2x&quot;]}"><img alt="" data-testid="Image-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_220%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7, data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-srcset="https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_382%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e, https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_764%2Cq_52%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e 2x" sizes="(max-width: 767px) 382px" data-id="de8000563601593701f7c6835260c9e0a314923e" data-pb-im-config="{&quot;aspectRatio&quot;:1,&quot;type&quot;:&quot;square1x1&quot;,&quot;width&quot;:382,&quot;urls&quot;:[&quot;https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_382%2Cq_88%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e&quot;,&quot; https://static.ffx.io/images/$zoom_0.384%2C$multiply_3%2C$ratio_1%2C$width_378%2C$x_279%2C$y_0/t_crop_custom/c_scale%2Cw_764%2Cq_52%2Cf_auto/de8000563601593701f7c6835260c9e0a314923e 2x&quot;]}" width="382" height="382"></picture><figcaption><p>Richard White said WiseTech never bought into the “silliness” in the job market.<!-- -->&nbsp;<cite>Michael Quelch</cite></p></figcaption></figure><p>Richard White, chief executive of ASX-listed <a href="https://www.afr.com/link/follow-20180101-p5dyva">WiseTech Global,</a> said he was receiving about 4000 inbound job applications a month, which was twice as many as this time last year.</p><p>“In 2021 and the first half of ’22, there was some crazy stuff going on the marketplace. People were throwing money everywhere, and mostly it was from companies that had never made any profit,” Mr White said.</p><p>“Most of those companies have now stopped hiring or are laying off people. We didn’t lean into that silliness.”</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The sudden demise of Indian vultures killed thousands of people (155 pts)]]></title>
            <link>https://www.economist.com/graphic-detail/2023/08/22/the-sudden-demise-of-indian-vultures-killed-thousands-of-people</link>
            <guid>37301400</guid>
            <pubDate>Mon, 28 Aug 2023 22:50:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.economist.com/graphic-detail/2023/08/22/the-sudden-demise-of-indian-vultures-killed-thousands-of-people">https://www.economist.com/graphic-detail/2023/08/22/the-sudden-demise-of-indian-vultures-killed-thousands-of-people</a>, See on <a href="https://news.ycombinator.com/item?id=37301400">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div data-body-id="cp1"><p data-caps="initial"><span data-caps="initial">T</span><small>he same</small> cast of characters features in most wildlife conservation campaigns: majestic tigers, adorable pandas or other creatures that tug human heartstrings.</p><div><figure><div><figcaption>Listen to this story.</figcaption> <p><span>Enjoy more audio and podcasts on<!-- --> <a id="audio-ios-cta" href="https://economist-app.onelink.me/d2eC/bed1b25" target="_blank" rel="noreferrer">iOS</a> <!-- -->or<!-- --> <a id="audio-android-cta" href="https://economist-app.onelink.me/d2eC/7f3c199" target="_blank" rel="noreferrer">Android</a>.</span></p></div><audio controls="" id="audio-player" preload="none" src="https://www.economist.com/media-assets/audio/080%20Graphic%20detail%20-%20Ecology%20and%20public%20health-3d2fd81dcef0fa8bfae5cb96b626f829.mp3" title="The sudden demise of Indian vultures killed thousands of people" controlslist="nodownload"><p>Your browser does not support the &lt;audio&gt; element.</p></audio></figure></div><p>Images of the blood-splattered bills of endangered vultures tend to evoke less sympathy, but a new study provides a reason to be concerned for their survival. The near-extinction of Indian vultures in the mid-1990s proved fatal for humans too, causing the mortality rate to rise by 4% in districts once populated by the birds.</p><figure data-infographic-class="g-fallback"></figure><figure data-infographic-js="1"></figure><p>Vultures act as nature’s sanitation service. In India, their diet consisted largely of rotting livestock carcasses—numbering 30m a year in the cattle-revering country. A group of vultures can polish off a cow’s carrion in 40 minutes. Their strongly acidic digestive tracts destroy most germs.</p><p>Historically, vultures were widespread in India. But between the 1990s and early 2000s their numbers plummeted by more than 90%, from around 40m. The cause was diclofenac, an anti-inflammatory drug that farmers began using to treat their cattle. Though the drug was harmless to both cows and humans, birds that consumed animals treated with diclofenac suffered from kidney failure and died within weeks.</p><p>Without vultures, carcasses attracted feral dogs and rats. Not only do these animals carry rabies and other diseases that threaten humans, they are far less efficient at finishing off carrion. The rotting remains they left behind were full of pathogens that then spread to drinking water.</p><p>The abrupt demise of the vultures made it possible to quantify their impact on public health. A new working paper, by Eyal Frank of the University of Chicago and Anant Sudarshan of Warwick University, used a statistical method called “difference-in-differences” to compare changes in the death rate in districts with habitats well suited to vultures with those in less suitable places, just as diclofenac use took off.</p><p>In districts with vulture-suitable habitats, more people began to die just as diclofenac sales increased. The effect was greatest in urban areas with large livestock populations. The authors estimated that, between 2000 and 2005, the loss of vultures caused 500,000 additional human deaths.</p><p>“Keystone species” like the vulture hold ecosystems together. Conserving these animals should be a priority. They may not be cute or cuddly, but they are important.<span data-ornament="ufinish">■</span></p><p><small>illustrations: olivier heiligers</small></p></div><p>This article appeared in the Graphic detail section of the print edition under the headline "Carrion call"</p><div orientation="vertical" data-test-id="vertical"><div orientation="vertical"><figure><img alt="Xi’s failing model: Why he won’t fix China’s economy" loading="lazy" width="1280" height="1684" decoding="async" data-nimg="1" sizes="300px" srcset="https://www.economist.com/img/b/16/21/90/media-assets/image/20230826_DE_EU.jpg 16w, https://www.economist.com/img/b/32/42/90/media-assets/image/20230826_DE_EU.jpg 32w, https://www.economist.com/img/b/48/63/90/media-assets/image/20230826_DE_EU.jpg 48w, https://www.economist.com/img/b/64/84/90/media-assets/image/20230826_DE_EU.jpg 64w, https://www.economist.com/img/b/96/126/90/media-assets/image/20230826_DE_EU.jpg 96w, https://www.economist.com/img/b/128/168/90/media-assets/image/20230826_DE_EU.jpg 128w, https://www.economist.com/img/b/256/336/90/media-assets/image/20230826_DE_EU.jpg 256w, https://www.economist.com/img/b/360/473/90/media-assets/image/20230826_DE_EU.jpg 360w, https://www.economist.com/img/b/384/505/90/media-assets/image/20230826_DE_EU.jpg 384w, https://www.economist.com/img/b/480/631/90/media-assets/image/20230826_DE_EU.jpg 480w, https://www.economist.com/img/b/600/789/90/media-assets/image/20230826_DE_EU.jpg 600w, https://www.economist.com/img/b/834/1097/90/media-assets/image/20230826_DE_EU.jpg 834w, https://www.economist.com/img/b/960/1263/90/media-assets/image/20230826_DE_EU.jpg 960w, https://www.economist.com/img/b/1096/1441/90/media-assets/image/20230826_DE_EU.jpg 1096w, https://www.economist.com/img/b/1280/1684/90/media-assets/image/20230826_DE_EU.jpg 1280w, https://www.economist.com/img/b/1424/1873/90/media-assets/image/20230826_DE_EU.jpg 1424w" src="https://www.economist.com/img/b/1424/1873/90/media-assets/image/20230826_DE_EU.jpg"></figure></div><div orientation="vertical"><h3 orientation="vertical">From the August 26th 2023 edition</h3><p orientation="vertical">Discover stories from this section and more in the list of contents </p><a href="https://www.economist.com/printedition/2023-08-26" data-analytics="sidebar:weekly_edition"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1zm.142 4.5l-1.008 1.062c3.33 3.276 4.194 4.14 4.608 4.5-1.602-.018-3.168-.018-10.242-.018v1.584c7.074 0 8.73 0 10.242-.018-.432.36-1.314 1.206-4.608 4.536l1.008 1.044 6.354-6.354L12.142 5.5z" fill="#2E45B8" fill-rule="nonzero"></path></g></svg><span>Explore the edition</span></a></div></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[False canopies on fighters work, one almost killed me (133 pts)]]></title>
            <link>https://www.thedrive.com/the-war-zone/false-canopies-on-fighters-work-one-almost-killed-me</link>
            <guid>37301274</guid>
            <pubDate>Mon, 28 Aug 2023 22:37:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.thedrive.com/the-war-zone/false-canopies-on-fighters-work-one-almost-killed-me">https://www.thedrive.com/the-war-zone/false-canopies-on-fighters-work-one-almost-killed-me</a>, See on <a href="https://news.ycombinator.com/item?id=37301274">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-id="page-content" data-og-area="article-blocks" id="incArticle"><p>Close aerial combat is a game of fractions of a second, quick decision-making, and squeezing every ounce of performance out of fighter aircraft. Perceive. Analyze. Decide. React. Variations of this chain of events are taught at all stages of a fighter pilot’s career.</p><p>Some air forces have painted ‘false canopies’ on the bottoms of their combat aircraft in an attempt to confuse adversaries. Debate rages about the effectiveness of such attempts to mislead. I can tell you unequivocally that it <em>does</em> sometimes work – and that I almost died one day as a result.</p><p>On a day like any other, I sat in a briefing for a 2v1 (two versus one) Basic Fighter Maneuvers (BFM) training flight. I was feeling pretty good – my CF-18 Hornet basic course was going well, and I had moved beyond the basics of flying the jet to learning how to fight with it. This was a solo, where I would fly as the wingman to my instructor, Mike Hoch. Another instructor was to fly as our adversary (the bandit).&nbsp;</p><figure data-og-block-area="article-blocks" data-og-block-nth="1" data-og-block-type="core/image"><span data-rawhtml="1">A pair of Canadian Hornets takeoff on a training mission. Credit: RAF-YYC/wikicommons </span></figure><p>The lesson to be learned involved having one fighter engage the bad guy in close combat, while the other fighter maneuvered to get free of the fight, then turn back in and attack the bad guy from a bit further away. In close aerial combat, it was often difficult to get a shot in at the other aircraft. Both aircraft are turning very hard and doing everything to deny the adversary a valid shot, whether it was with a missile or with the gun. The fighter that was ‘free’ was usually the one who got a valid shot away first.</p><p>Since this was a ‘canned’ training scenario, the bandit sat in on the whole briefing, to make sure that we would get the most training out of every set-up. Throughout the Hornet basic course, every pound of jet fuel was spoken for, and there was little margin for making mistakes and wasting fuel. I’d been thoroughly indoctrinated in the ‘fuel is life’ school of thought, in much the same way as we saw speed as life.</p><p>There were to be some offensive set-ups, where we attacked the bandit from a position of advantage, then some defensive where he would attack from behind, and finally some neutral set-ups where we’d merge head-on. To ensure I saw both aspects, the bandit was told each time which fighter I was in. Some set-ups I was ‘engaged,’ while some I was ‘free.’</p><p>Sounds simple?&nbsp;</p><p>Well, it’s not.&nbsp;</p><p>Each fight was very dynamic, happening in three dimensions. One big change from fighting the CF-5 Freedom Fighter was that dogfighting usually involved vertical turning fights. These were egg-shaped, larger at the bottom and tighter at the top (due to gravity), and sometimes canted at an angle from the vertical toward the horizon. The main tactic was to draw the bandit into a ‘single-circle’ fight, meaning that one aircraft was chasing the other around the circle. Ideally, the friendly aircraft would be chasing the bandit, keeping him predictable but not in immediate danger of being shot by the bandit.</p><figure data-og-block-area="article-blocks" data-og-block-nth="2" data-og-block-type="core/image"><span data-rawhtml="1">A CF-18 breaks away from its leader. Credit: RCAF </span></figure><p>Each was doing their damnedest to shoot or avoid getting shot. The instructors thoroughly enjoyed these flights, because they could exercise their own best Basic Fighter Maneuvers (BFM), while still providing training to me, the student. One of the biggest lessons we were supposed to glean from this was the longer you got wrapped up in a turning fight, the more chance somebody from outside the fight would take a shot and kill you.</p><p>On what turned out to be the last engagement on that flight, I was getting confident. Things had gone really well so far, both as free and engaged. As was standard before each engagement, we made quick ready calls.</p><p>“Tango Two, ready with 5,000.” Fuel quantity checks and confirmations were always made in training before each engagement. In afterburner (AB), a Hornet can burn about 1,000 pounds of fuel each <em>minute</em>. From where we were flying, about 50 miles north of Cold Lake, Alberta, we needed to stop fighting when we had 3,500 lbs remaining, so we could make it back to base with the minimum of 2,000 lbs remaining. I made a mental note that I had at most one and a half minutes of fuel in AB before I had to stop (knock it off). In training, unlike real combat, when we reached certain fuel remaining, we stopped fighting and went home, no questions asked.</p><p>My instructor and I flew a side-by-side formation, separated by about 2 miles. We met the bandit head-on, and he immediately got engaged with my lead. My job was to fly away from the fight, out of their ‘plane of motion’ (the circle they were turning in), then come back, figure out who was who, and shoot the bad guy. Things were complicated by the fact that we were all flying the same type of aircraft, and there was no way to tell which was which visually.</p><figure data-og-block-area="article-blocks" data-og-block-nth="3" data-og-block-type="core/image"><span data-rawhtml="1">CF-18s and their false canopies in view. Credit: RCAF </span></figure><p>I pulled up and away from their turning fight, selecting AB, and climbed as I accelerated. Glancing over my shoulder, I could see a tight turning fight developing. My instructor gave me short, concise radio calls, effectively a play-by-play of the fight, so that when I came back to shoot I’d quickly identify and shoot the bandit.</p><p>“I’m defensive. Nose high. Bandit is low man.” All calls that told me which he’d be when I turned back and had a clear view of the fight. They looked about the right distance behind me (about three miles). Time to go shoot the bandit and save my lead’s butt. I quickly did a ‘split s’ (flipped onto my back and pulled the nose down to loop back toward them).&nbsp;</p><p>I craned my neck, looking way back in my bubble canopy, to spot the other two Hornets. By now I was so used to pulling six or seven Gs that I barely felt any discomfort. I was completely focused on what I needed to do, and not thinking about minor things like physical pain as I was crushed into my ejection seat in the turn. The other fighters were just visible, albeit as two tiny specks high up in my canopy and behind. I made a small adjustment in the angle of my wings to put my ‘lift vector’ (an imaginary arrow coming up out of my canopy) on them. As the distance closed slightly between us, I could just pick up what I thought was a false canopy on the belly of one Hornet.</p><figure data-og-block-area="article-blocks" data-og-block-nth="4" data-og-block-type="core/image"><span data-rawhtml="1">An appreciation of what air combat really looks like. I took this photo a few years after the events in this story. My wingman in the blue circle is another CF-18 flying over Germany, three miles away. The red circle is around a Luftwaffe F-4 Phantom, pulling up to attack. He is also about two miles away. The wing shape and smoke trail make identifying the F-4 easy. With my eyes (better perception than the camera), I could see his belly (no canopy), indicating he was turning away from me. </span></figure><p>Okay. They’re turning away from me, and I’m coming around behind them. Sweet. From the latest radio calls, I knew that my lead was the one in front, so I continued pulling hard to point at the bandit. With my left thumb, I toggled the radar into boresight acquisition mode, meaning that it would lock on whatever I pointed at, then selected AIM-9M missile mode with the weapons select switch on the stick. All of these actions were done by reflex without looking inside – the Hands-On Throttle and Stick (HOTAS) being very well designed for air fighting while keeping my eyes out of the cockpit.</p><p>Satisfied that the geometry would work, I thought about my fuel quantity. I’d been burning jet fuel at a huge rate for a while now, and I wanted to make sure I was okay. The fuel gauge was down by my left knee on the instrument panel, so I flicked my eyes briefly down into the cockpit while keeping my head canted back. Moving my head under that G load would have seriously hurt my neck muscles.</p><figure data-og-block-area="article-blocks" data-og-block-nth="5" data-og-block-type="core/image"><span data-rawhtml="1">A CF-18 in full afterburner. Credit: U.S. Air National Guard photo by Dale Greer </span></figure><p>There. 4,000 lbs. Satisfied with my fuel quantity, I let my eyes flit back up, expecting to see the tails of the two aircraft turning away. I was momentarily confused as I saw in my Head-Up Display (HUD) that my radar had indeed locked onto the bandit, but instead of showing an expected valid shot, it displayed a ‘break X’ – meaning he was too close to shoot.&nbsp;</p><p>While my mind struggled to process the HUD’s symbology, I was shocked to see my lead flash by me, opposite direction, very, <em>very</em> close. Instinctively, I slacked off my turn and snapped my head to the left to watch him go by. My ‘spidey senses’ tingled, too late.&nbsp;</p><p>Like a spectator at a tennis match, my head snapped back to the right, just in time to see the trailing aircraft (the bandit) go by, even closer than my lead had. My aircraft rocked violently in the wake turbulence behind his hard-turning jet as he passed me.</p><p>“Knock it off, knock it off” came a terse radio transmission from my lead. I responded “Two, knock it off” and the other aircraft said “Bandit, knock it off.” A brief pause, and my lead said “Let’s call it a day. Two, rejoin echelon left, Bandit, you’re cleared off for RTB (return to base).” Shakily, I turned back toward my lead and rejoined on him..&nbsp;</p><p>We flew back to base in silence.&nbsp;</p><figure data-og-block-area="article-blocks" data-og-block-nth="6" data-og-block-type="core/image"><span data-rawhtml="1">A pair of RCAF CF-18s refueling, their false canopies clearly visible. Credit: DoD photo by Cpl. Vicky Lefrancois, Royal Canadian Air Force </span></figure><p>Normally I would have enjoyed the simple pleasure of flying close formation on the brand-new grey jet, revelling in the responsiveness of my powerful F-404 engines, and enjoying the spectacular view of the snow-covered Alberta wilderness. Today, though, I was immersed in my thoughts, and went through the motions of landing and unstrapping. The groundcrew who took over my jet must have found me to be uncharacteristically moody.</p><p>I looked at my instructor when I joined him at the servicing desk. Clearly, he was not ready to talk, especially in a crowded room with maintenance personnel everywhere. Nothing was said as we signed in our aircraft and we walked over to the Air Combat Manoeuvring Range/Instrumentation (ACMR/I) building together, in silence. Our aircraft had internal telemetry pods installed inside the gun door (forward left fuselage), which passed precise location and flight data down to ground receivers and recording systems back at base. By the time we got to the ACMR/I debrief room, the contractor who ran the system had it all set up to play back. There were large screens on which our aircraft were represented as simple 3D drawings.The flight data included distances between aircraft were constantly displayed and updated.</p><figure data-og-block-area="article-blocks" data-og-block-nth="7" data-og-block-type="core/image"><span data-rawhtml="1">An ACMR/I graphic from the era I was on the Hornet course. Orange outlines show an aircraft’s canopy bow and instrument panel outline, blue is the horizon, and white is the adversary aircraft. Credit: The U.S. National Archives </span></figure><p>It was possible to view the recorded engagements from any angle – top/down, side, oblique, and even to see the view from inside any of the cockpits, all presented in wire frame fashion. I had seen this system being used with F-15s training at Luke AFB in Phoenix Arizona in 1981, courtesy of Major Dave Bashow, a CF-104 Starfighter pilot on exchange with the USAF. Seeing a debrief on ACMR/I was still quite impressive in 1986. Today, however, the cool factor was lost on me. I was still trying to process having nearly collided and died less than an hour ago.</p><p>In the Cold Lake debriefing room, the two instructors looked at each other, as if a silent question were being asked. The bandit nodded and Mike Hoch said “Let’s start with playback of the last engagement.” Shortly, we saw the single-circle fight develop, with my aircraft ‘spitting out’ to the west, then turning back toward them. That’s when I finally understood what had happened. When I turned back in toward them, they were not turning away from me – they were turning <em>toward</em> me.&nbsp;</p><p>Mike said “Run it back about 20 seconds. Switch to cockpit view from number Two (my aircraft).” The operator complied and soon we were seeing the view out of my cockpit, as I pulled back hard toward them. From my cockpit, the wire frame aircraft (about three miles away) could be seen turning, but the direction of turn was not evident since they were far away, and tiny.</p><figure data-og-block-area="article-blocks" data-og-block-nth="8" data-og-block-type="core/image"><span data-rawhtml="1">A view of the CF-18's false canopy. From this distance, it is easily distinguished from the real one. From two miles away, it is impossible to tell. </span></figure><p>I remembered how I had looked way back above my head to spot them, then glanced inside to check the fuel quantity. As my cockpit view was played back in real time, I saw how quickly the two other aircraft approached, and could see exactly how my glance inside came at a crucial time when I failed to recognize they were approaching, and not turning away.</p><p>How did I get fooled? I had seen the real canopies, but thought they were the false ones. As I turned toward them, I had failed to notice that their turn was taking them closer to me than I ever imagined.</p><p>“Freeze!” said Mike. “Let’s see how close we came.” After playing back in slow motion, and seeing both near-collisions, we figured out that I had missed my lead by 400 feet, head-on, and came within 150 feet of the bandit who was trailing. Our closing speed was about 900 kts, or roughly 1,700 kph. Imagine trying to fly within 150 feet of another aircraft, head-on, while travelling at such speeds!</p><p>Clearly, the false canopy fooled me. In other engagements over several years similar false canopy illusions were evident, but I was now more aware of how tricky they could be. Yes, in some cases opponents gained a slight advantage due to my hesitation, but at least I didn’t come close to a mid-air collision again. Flying against other allied fighters, we sometimes heard them express how our false canopies had fooled them. For sure, a false canopy cannot help against a missile or gunfire, but it was another tool in our arsenal when we needed it the most – close combat.</p><figure data-og-block-area="article-blocks" data-og-block-nth="9" data-og-block-type="core/image"><span data-rawhtml="1">False canopy on a Italian Navy AV-8B+ Harrier. Credit: Marina Militare </span></figure><figure data-og-block-area="article-blocks" data-og-block-nth="10" data-og-block-type="core/image"><span data-rawhtml="1">JAS-39 Gripen with a false canopy. Credit: SAAB </span></figure><figure data-og-block-area="article-blocks" data-og-block-nth="11" data-og-block-type="core/image"><span data-rawhtml="1">A-10 Warthog with false canopy. Credit: USAF </span></figure><p>I didn’t fail that training mission, but we did have a good discussion about how to avoid such a situation in future. The debrief continued over a beer or three. All three of us realized that we’d been extremely lucky that day. I also learned that even in training, death can kick down your door without warning.</p><p>It is often said that when a fighter pilot walks out to his aircraft, he may never know that today will be his last flight. I learned first hand how real that was with the help of the most basic of optical countermeasures.&nbsp;&nbsp;</p><p><em>Retired Major Dan McWilliams logged 3,200 hours over 20 years in the Canadian Air Force, flying the CT-114 Tutor, CF-5, T-33, and CF-18. A specialist in Electronic Warfare and software, he managed a group of engineers developing mission-critical software for the CF-18 and for CF-18 simulators. He later flew and instructed in the Challenger 604, tested full-mission simulators for military customers, managed a CF-18 mission training center, and taught at an aviation college.</em></p><figure data-og-block-area="article-blocks" data-og-block-nth="12" data-og-block-type="core/image"><span data-rawhtml="1">Dan McWilliams at home. Credit: Author </span></figure><p><em>Contact the editor: Tyler@thedrive.com</em></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Raise less, build more (160 pts)]]></title>
            <link>https://trohan.com/2023/08/20/raise-less-build-more/</link>
            <guid>37298665</guid>
            <pubDate>Mon, 28 Aug 2023 18:42:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://trohan.com/2023/08/20/raise-less-build-more/">https://trohan.com/2023/08/20/raise-less-build-more/</a>, See on <a href="https://news.ycombinator.com/item?id=37298665">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="primary" role="main">
		
<article id="post-1305">

			<!-- end .entry-header -->

		<div>
			
<p>The conventional venture capital funding path – from raising an institutional Seed, Series A, B, C, D, E, etc, all the way to exit via IPO – has long been treated as gospel. Its verses are most heavily preached by VC board members, whose business model it also supports.&nbsp;</p>



<p>But there is an influential tide of founders on the rise that is opting out of this path and quietly plotting a new one that leads to building generational companies.</p>



<p>It’s a hybrid path, combining the growth of targeted venture funding with the durability found in bootstrapping (i.e. profitability). It’s a path with less venture capital and more self-reliance.&nbsp;</p>



<p>And it’s the direct result of founders emerging from a tumultuous period of feast (with 5x more venture capital offered to startups over the past decade) and a brief flirtation with famine from the recent pullback that has left some venture-dependent companies in starvation mode.&nbsp;</p>



<p>For many founders, a steady reliance on venture capital, as it is heavily prescribed today, is often seen as unhealthy, if not risky.&nbsp;&nbsp;</p>



<p>Increasingly, these founders are seeking freedom from the risk and control of the perpetual pursuit of venture capital. Instead, they’re ready to reroute their time, efforts, and attention to building enduring companies on their own terms.&nbsp;</p>



<p>These founders are choosing to raise less and build more.</p>











<p>“<strong>Foie gras” venture capital&nbsp;</strong></p>



<p>The clearest trend in the venture industry over the past decade is VCs offering startups more money.&nbsp;</p>



<p>To gain visibility into this trend, we can examine the ratio of VC capital raised to new startups in any given year. An imperfect but close proxy for viable new startups is the annual number of Seed deals (inclusive of Angel, Pre-Seed, and Seed deals). When you take total VC dollars raised, divided by the number of new companies, you’ll see the average startup today has 5x more VC capital available than its counterpart did in 2013:</p>







<figure data-carousel-extra="{&quot;blog_id&quot;:13257616,&quot;permalink&quot;:&quot;https:\/\/trohan.com\/2023\/08\/20\/raise-less-build-more\/&quot;}">
<figure><a href="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png"><img data-attachment-id="1771" data-permalink="https://trohan.com/2023/08/20/raise-less-build-more/screen-shot-2023-08-24-at-2-28-30-pm/" data-orig-file="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png" data-orig-size="1110,382" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screen-shot-2023-08-24-at-2.28.30-pm" data-image-description="" data-image-caption="" data-medium-file="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png?w=300" data-large-file="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png?w=960" data-id="1771" src="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png?w=1024" alt="" srcset="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png?w=1024 1024w, https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png?w=150 150w, https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png?w=300 300w, https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png?w=768 768w, https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-24-at-2.28.30-pm.png 1110w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>
</figure>







<p>The primary driver of this trend is VCs increasing their fund sizes, particularly larger firms. Nearly every single major fund has implemented this change. No other strategy has been so universally adopted.</p>



<p>As a result, every single type of round, from Seed to Series C on, has also increased in size. Here are some averages over time:</p>







<figure><a href="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png"><img data-attachment-id="1751" data-permalink="https://trohan.com/2023/08/20/raise-less-build-more/screen-shot-2023-08-22-at-2-06-38-pm/" data-orig-file="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png" data-orig-size="1100,414" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="screen-shot-2023-08-22-at-2.06.38-pm" data-image-description="" data-image-caption="" data-medium-file="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png?w=300" data-large-file="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png?w=960" src="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png?w=1024" alt="" srcset="https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png?w=1024 1024w, https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png?w=150 150w, https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png?w=300 300w, https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png?w=768 768w, https://tmrohan.files.wordpress.com/2023/08/screen-shot-2023-08-22-at-2.06.38-pm.png 1100w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>







<p>While 2023 will likely prove to be a down year for total VC capital raised, both the average and median fund size will remain up. The average fund size went from $336M in 2020 to $386M in 2022 to $538M in 2023 (PitchBook). The trend has become the new baseline.</p>











<p><strong>More isn’t always better&nbsp;</strong></p>



<p>Why is this trend so pervasive?&nbsp;</p>



<p><em>Do today’s startups need more money?&nbsp;&nbsp;</em></p>



<p>Well, no.&nbsp;</p>



<p>The main driver of a startup’s burn is salaries. Salaries over time have increased, but not by 5x (the rate VC capital has increased). Even the new increased infastructue costs with AI will ultimately come down as companies scale and the industry matures. None of this justifies the rate and breadth of this capital increase from VCs.&nbsp;</p>



<p>Contrary to popular myth, statistically venture backed startups aren’t staying “private longer,” either. Between 2011 and 2021, the median time from venture funding to IPO exit in the US has fluctuated between 5 and 7 years, with no visible increase in time (Statistica 2023).&nbsp; Granted, SPACs may have impacted these numbers, but it’s nonetheless interesting that the data does not align to the myth.&nbsp;&nbsp;&nbsp;</p>



<p><em>Do bigger funds perform better?</em></p>



<p>Again, no.&nbsp;</p>



<p>Smaller funds consistently outperform large funds (on a multiple basis). More on this, below.&nbsp;</p>



<p><em>Does giving a startup more capital make it reliably perform better?&nbsp;</em></p>



<p>Another no. There is no conclusive data to support this. There is no empirical study that I know of that suggests that raising more capital increases a startup’s odds of success.&nbsp;</p>



<p>Looking at case studies, for every Stripe ($8.7B raised), there are countless startups who raised too much and did not make it. To avoid speaking ill of the dead or the fatally wounded, I’ll withhold names (the headlines will tell this story).</p>



<p>The lack of conclusive evidence seems to have had little impact on the VC bias that startups – as a general rule – should raise more VC capital.&nbsp;</p>



<p>Consider some of the more persuasive funding conventions prescribed by VCs:</p>



<p><em>If you can, raise more capital as opposed to less capital&nbsp;</em></p>



<ul>
<li>For founders, the case for more capital is easy to hear – hire faster, be offensive, save for a rainy day. But too much capital, especially too early, can depress urgency and innovation, all while contributing to unnecessarily high headcount and burn. These can be company killers. For every Figma, who raised a large but not unreasonable Seed round (for its time), there is a Seed company that raised that mega round (read $10M), which may do them more harm than good. Once you’ve raised for multiple years of runway, including hiring well and adding a buffer budget, what is any extra capital really doing? Who is that mega round really serving?&nbsp;</li>
</ul>



<p><em>Raise at every round, or when you have explosive growth&nbsp;</em></p>



<ul>
<li>For many founders, taking on regular capital can be extremely valuable, as can taking on capital for hyper growth. But for startups that are already profitable and growing, raising can be a costly distraction. It can swallow founder time during company-making moments, resulting in potential loss of discipline, premature hiring, and unnecessary spending. It also can alert competition, hinder hiring (via ‘less attractive’ stock options), impact dilution, and potentially even affect board composition. Companies like Vanta chose to delay Series A to focus on building instead of raising, with others raising their huge Series As at the ‘standard’ time, because they ‘should,’ before fading into history. You have to wonder – how many of those momentum Series A companies would still be around if they just chose to build (profitably) instead of raise?&nbsp;</li>
</ul>



<p><em>Prioritize growth over profitability to achieve outlier success</em></p>



<ul>
<li>For many founders, opting for growth over profitability has clear advantages: you can hire more, build more, market more; in short you can be generally more offensive. But for founders with the goal of creating a sustainable and durable business, prioritizing profitability growth over growth-at-all costs makes more sense. During a time when VCs were fawning over him, Ivan at Notion famously told investors that he’d “prefer to raise from his customers” as opposed to taking outside capital. Countless high-potential startups would still be around today if they had the same discipline.&nbsp;&nbsp;</li>
</ul>



<p>No doubt more venture capital can help, but it can also certainly hurt.&nbsp;</p>



<p>VCs sell a product to founders. That product has ballooned over time in ways so that it can now potentially do harm. Like any other consumers, it falls to the founders of the companies to understand what they’re buying, and why it’s being sold in a particular way.</p>











<p><strong>Foolproof rich</strong></p>



<p>Here are the economics and incentives of the VC funds and why funds tend to grow over time.</p>



<p>The bigger the fund size, the more GPs get paid. A typical venture fund has a 2% management fee, paid <em>irrespective of performance</em> and based on fund size, and 20% carry, based on return of capital.</p>



<p>Consider this simplified model:</p>



<ul>
<li>A $100M fund which does 4x earns the GPs $80M ($60M in carry, plus $20M in management fees)</li>



<li>A $1B fund which does 1.5x earns the GPs $300M ($100M in carry, plus $200M in management fees)</li>
</ul>



<p>A large, poorly performing fund (1.5x) pays its GPs dramatically more than a smaller, higher performing (4x) fund. Stunningly, the large fund GPs would earn dramatically more on simple management fees alone (i.e. even if the fund was 0x, the GPs earn $200M). Granted, the $1B fund may have more GPs, but the payout differential is eye opening.</p>



<p>Further, smaller funds historically achieve higher returns than larger funds. For example, funds with $200M in AUM (assets under management) or less have an average top decile IRR of 62% over that last 10 years (2010-2020), versus funds with $1B-10B with an average top decile IRR of 27% (PitchBook). That’s more than a 2x difference.&nbsp;</p>



<p>With a larger fund, GPs are opting into a model that will likely yield poorer returns, but certainly pay them more.&nbsp;</p>



<p>Across investment management, the larger the AUM, the lower (yet hopefully more stable) the returns, the more management tends to be paid. It’s not controversial, but it does have implications for founders:</p>



<p>When that large, multi-stage VC offers you a term sheet with 2x the capital than all the other term sheets – pause.&nbsp;</p>



<p>That larger sum of capital might be the right thing for your company, or it might not be.&nbsp;&nbsp;</p>



<p>But it is certainly the right thing for that VC’s business model.&nbsp;</p>











<p><strong>Raise less, build more</strong></p>



<p>After watching their peers fall victim to excess (from too much capital) and more recently to starvation (from too little VC capital with the recent pullback), more founders are questioning the wisdom of the current conventional venture funding path.</p>



<p>Instead of treating venture as a default, founders are going back to first principles and asking new questions:</p>



<p>What, exactly, is the right fundraising strategy for <em>my</em> company? What options exist?</p>



<p>Today, there is a growing common awareness amongst founders that a VC-only path can put them out of business, from either too little capital or pressure to take too much capital. If their company doesn’t exist, the chance of success is zero. On the other hand, if they are constrained by just profitability, they might not be able to build what they need to build, or others can outrun them. Bootstrapping alone can also impede.&nbsp;</p>



<p>I’ve had similar conversations with dozens of founders on this topic, and I’m seeing them quietly start to pursue a new path – one that doesn’t perfectly fit within the lines prescribed by Sand Hill Road.</p>



<p>They are seeking to combine the growth of targeted venture funding with the durability found in bootstrapping (i.e. profitability).&nbsp;&nbsp;</p>



<p>Their goal is to build a viable business <em>first</em>, while also harnessing the growth, network, and brand benefits of strategically raising capital from top investors.&nbsp;</p>



<p>It’s a new hybrid path, and one that maximizes their odds of survival <em>and</em> breakout success.</p>



<p>Bootstrapping ethos encourages becoming profitable early, or having a path to profitability – which makes it more likely a company will stick around independent of venture capital. While targeted venture brings appropriate capital for growth as well as access to the networks and brand signals brought by top investors.&nbsp;</p>



<p>Practically, these new principles are translating into the following tactics:</p>



<ul>
<li>Raising a seed round with the primary aim of becoming profitable (as opposed to the primary aim of raising a Series A)</li>



<li>Raising a venture round from a top fund, gaining one top board member, but from there, opting out of raising a series of rounds</li>



<li>Raising smaller, disciplined amounts of capital, or delaying raises if the company is profitable and growing well</li>
</ul>



<p>In the past, some of these tactics were seen as controversial, if not renegade. Going forward, I see a groundswell movement and eventual wide-scale practice of this approach. We’ve already seen standout companies over the past 15 years – including Notion, Zapier, and Vanta to name a few – implement portions of these tactics to great success.&nbsp;</p>



<p>More startups will adopt this approach as they come to understand its advantages, including:</p>



<ul>
<li><em>A more disciplined, focused culture: </em>Operating with financial constraints instills a culture of fiscal literacy and responsibility throughout the organization. It also primes creativity and inventiveness.</li>
</ul>



<ul>
<li><em>A sharper, more coordinated product</em>: To keep customers paying, companies must keep customers delighted. A mandate to generate compounding revenue sustains pressure on product teams to listen to their users, understand the wider market, and craft a beloved product. It also forces product and engineering teams to work in concert with sales, marketing, and support on a common goal.</li>
</ul>



<ul>
<li><em>More control, ownership, and upside: </em>Founders will likely retain authority on everything from company decisions to exit scenarios. For example, less capital creates less of a preference stack for founders and employees on M&amp;A exits; it’s also more likely to ensure founder control of the exit decision, including whether to go public.</li>
</ul>



<p>It yields all these benefits without sacrificing the growth and value brought by VC funds.</p>



<p>Founders who choose to raise less are liberating themselves from the venture hamster wheel, and in the process, are giving themselves more power to build generational companies.&nbsp;</p>



<p>In short, the “raise less, build more” approach empowers founders to be builders again.&nbsp;</p>



<p>And that makes for better products, better teams, and better, more valuable, companies.&nbsp;</p>








					</div><!-- end .entry-wrap -->

</article><!-- end .post-1305 -->
	<!-- #comments .comments-area -->
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Serial adapter / reboot controller for Apple M1/M2 (232 pts)]]></title>
            <link>https://www.tindie.com/products/aaafnraa/serial-adapter-reboot-controller-for-apple-m1m2/</link>
            <guid>37298506</guid>
            <pubDate>Mon, 28 Aug 2023 18:29:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.tindie.com/products/aaafnraa/serial-adapter-reboot-controller-for-apple-m1m2/">https://www.tindie.com/products/aaafnraa/serial-adapter-reboot-controller-for-apple-m1m2/</a>, See on <a href="https://news.ycombinator.com/item?id=37298506">Hacker News</a></p>
<div id="readability-page-1" class="page">
    
    
    
    
    

    
    








    <div data-content="31447" data-bind="init, attr: { 'data-content': productID }">
        
        <ol data-ga_category="Supplies/Cables and Adapters" data-bind="init, attr: { 'data-ga_category': productCategory }">
            <li><a href="https://www.tindie.com/">Home</a></li>
            
            
            
            <li><a href="https://www.tindie.com/browse/supplies/">Supplies</a></li>
            
            
            <li><a href="https://www.tindie.com/browse/cables-and-adapters/">Cables and Adapters</a></li>
            
        </ol>
        
        <div>
                
                
                


                <!-- REVIEW WANTED -->
                
                <!-- END REVIEW WANTED -->

                <!--- BEGIN PRODUCT TITLE -->
                <div>
                    <p>
                        <h2 id="product-name" data-bind="init, text: productTitle">Serial adapter / reboot controller for Apple M1/M2</h2>
                    </p>
                </div>
                <div>
                        
                        <p>Central Scrutinizer -- a minimal serial adapter and reboot controller for Apple M1/M2</p>
                        <p><span>
                            <span>
                                <strong>
                                    
                                    <span data-toggle="tooltip" title="This product was designed and manufactured by the inventor">Designed by</span>
                                    
                                </strong>
                                <a data-store="aaafnraa" data-seller="mzyngier" data-bind="init, attr: { 'data-store': productStore, 'data-seller': productSeller }" href="https://www.tindie.com/stores/aaafnraa/">aaafnraa</a>
                                
                                
                                in United Kingdom
                                
                            </span>
                        </span>
                    </p></div>
                
                <!--- END PRODUCT TITLE -->

                <!--- BEGIN PRODUCT INFO -->
                <div id="product-well">
                                
                                
                                

<div>
    
    
    
    <div>
                    <p><strong>Buy with confidence.</strong></p>
                    <p>Our Tindie Guarantee protects your purchase from fraud. <a href="https://www.tindie.com/about/guarantee/">Learn More</a></p>
                </div>
    
    
    <div>
        

<p><span data-toggle="modal" data-target="#signin-register-modal">
    <span><svg>
        <use xlink:href="https://www.tindie.com/icons.svg#icon-heart-1"></use>
    </svg> Wishlist</span>
    <span><svg>
        <use xlink:href="https://www.tindie.com/icons.svg#icon-heart-filled"></use>
    </svg> On Wishlist</span>
</span>
<a href="#" onclick="window.open('https://twitter.com/intent/tweet?url=https://www.tindie.com/products/aaafnraa/serial-adapter-reboot-controller-for-apple-m1m2/&amp;text=Serial adapter / reboot controller for Apple M1/M2 by aaafnraa on Tindie&amp;via=Tindie','twitter','resizable,height=560,width=480'); return false;" alt="Tweet on Twitter">
    <span><svg>
        <use xlink:href="https://www.tindie.com/icons.svg#icon-social-twitter"></use>
    </svg> Tweet
</span></a>
<a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https://www.tindie.com/products/aaafnraa/serial-adapter-reboot-controller-for-apple-m1m2/','facebook','resizable,height=560,width=480'); return false;" alt="Share on Facebook">
    <span><svg>
        <use xlink:href="https://www.tindie.com/icons.svg#icon-social-facebook"></use>
    </svg> Share
</span></a>
<a href="#" onclick="window.open('https://pinterest.com/pin/create/button/?url=https://www.tindie.com/products/aaafnraa/serial-adapter-reboot-controller-for-apple-m1m2/&amp;media=https://cdn.tindiemedia.com/images/resize/9tdh7_seTyLfHM0CwmN47RD3RRI=/p/1200x1200/smart/i/441372/products/2023-08-26T14%3A44%3A38.737Z-m1-ubmc.png?1693036067&amp;description=Serial adapter / reboot controller for Apple M1/M2 by aaafnraa on Tindie: Central Scrutinizer \u002D\u002D a minimal serial adapter and reboot controller for Apple M1/M2','pinterest','resizable,height=560,width=480'); return false;" alt="Pin on Pinterest">
    <span><svg>
        <use xlink:href="https://www.tindie.com/icons.svg#icon-social-pinterest"></use>
    </svg> Pin
</span></a>

    </p></div>
</div>


                                



                                <div>
                                    <!-- .body-copy only applies the following text style -->
                                    
                                    <h3>Central Scrutinizer -- a minimal serial adapter and reboot controller for Apple M1/M2</h3>
                                    

                                    
                                    
                                    
                                    
                                    
                                </div>
                                
                                
                                
                                
                                
                                
                                


                                
                                
                                
                                
                                
                            </div>
                <!--- END PRODUCT INFO -->
            </div>
    </div> <!-- .nav-slide-element -->

    <!-- start Footer -->
    





<p>
    Cookies help us deliver our services. By using our services, you agree to our use of cookies. <a href="https://supplyframe.com/privacy-policy/" target="_blank" rel="noopener">Learn more</a>. 
</p>

    <!-- end Footer -->

    <!-- Scripts -->
    
    
    

    
    


    



    

    

    

    

    
    



    
    
<!-- start .modal-wrap -->

<!-- end .modal-wrap -->

    








    
    
    
    <img src="https://analytics.supplyframe.com/trackingservlet/impression?action=pageImpression&amp;zone=TND_products:detail&amp;extra=r_ref=|title=Serial%20adapter%20/%20reboot%20controller%20for%20Apple%20M1/M2" alt="" height="1" width="1">
    
    <!-- Start of sf-tindie Zendesk Widget script -->
    
    
    <!-- End of sf-tindie Zendesk Widget script -->


</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Perfectly Reproducible, Verified Go Toolchains (121 pts)]]></title>
            <link>https://go.dev/blog/rebuild</link>
            <guid>37298441</guid>
            <pubDate>Mon, 28 Aug 2023 18:24:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://go.dev/blog/rebuild">https://go.dev/blog/rebuild</a>, See on <a href="https://news.ycombinator.com/item?id=37298441">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-slug="/blog/rebuild">
    
    <h2><a href="https://go.dev/blog/">The Go Blog</a></h2>
    

    
      
      
      
      <p>One of the key benefits of open-source software is that anyone can read
the source code and inspect what it does.
And yet most software, even open-source software,
is downloaded in the form of compiled binaries,
which are much more difficult to inspect.
If an attacker wanted to run a <a href="https://cloud.google.com/software-supply-chain-security/docs/attack-vectors" rel="noreferrer" target="_blank">supply chain attack</a>
on an open-source project,
the least visible way would be to replace the binaries being served while
leaving the source code unmodified.</p>
<p>The best way to address this kind of attack is to make open-source software
builds <em>reproducible</em>,
meaning that a build that starts with the same sources produces the same
outputs every time it runs.
That way, anyone can verify that posted binaries are free of hidden changes
by building from authentic sources and checking that the rebuilt binaries
are bit-for-bit identical to the posted binaries.
That approach proves the binaries have no backdoors or other changes not
present in the source code,
without having to disassemble or look inside them at all.
Since anyone can verify the binaries, independent groups can easily detect
and report supply chain attacks.</p>
<p>As supply chain security becomes more important,
so do reproducible builds, because they provide a simple way to verify the
posted binaries for open-source projects.</p>
<p>Go 1.21.0 is the first Go toolchain with perfectly reproducible builds.
Earlier toolchains were possible to reproduce,
but only with significant effort, and probably no one did:
they just trusted that the binaries posted on <a href="https://go.dev/dl/">go.dev/dl</a> were the correct ones.
Now it’s easy to “trust but verify.”</p>
<p>This post explains what goes into making builds reproducible,
examines the many changes we had to make to Go to make Go toolchains reproducible,
and then demonstrates one of the benefits of reproducibility by verifying
the Ubuntu package for Go 1.21.0.</p>
<h2 id="how">Making a Build Reproducible</h2>
<p>Computers are generally deterministic, so you might think all builds would
be equally reproducible.
That’s only true from a certain point of view.
Let’s call a piece of information a <em>relevant input</em> when the output of
a build can change depending on that input.
A build is reproducible if it can be repeated with all the same relevant inputs.
Unfortunately, lots of build tools turn out to incorporate inputs that we
would usually not realize are relevant and that might be difficult to recreate
or provide as input.
Let’s call an input an <em>unintentional input</em> when it turns out to be relevant
but we didn’t mean it to be.</p>
<p>The most common unintentional input in build systems is the current time.
If a build writes an executable to disk, the file system records the current
time as the executable’s modification time.
If the build then packages that file using a tool like “tar” or “zip”,
the modification time is written into the archive.
We certainly didn’t want our build to change based on the current time, but it does.
So the current time turns out to be an unintentional input to the build.
Worse, most programs don’t let you provide the current time as an input,
so there is no way to repeat this build.
To fix this, we might set the time stamps on created files to Unix time
0 or to a specific time read from one of the build’s source files.
That way, the current time is no longer a relevant input to the build.</p>
<p>Common relevant inputs to a build include:</p>
<ul>
<li>the specific version of the source code to build;</li>
<li>the specific versions of dependencies that will be included in the build;</li>
<li>the operating system running the build, which may affect path names in the resulting binaries;</li>
<li>the architecture of the CPU on the build system,</li>
<li>which may affect which optimizations the compiler uses or the layout of certain data structures;</li>
<li>the compiler version being used, as well as compiler options passed to it, which affect how the code is compiled;</li>
<li>the name of the directory containing the source code, which may appear in debug information;</li>
<li>the user name, group name, uid, and gid of the account running the build, which may appear in file metadata in an archive;</li>
<li>and many more.</li>
</ul>
<p>To have a reproducible build, every relevant input must be configurable in the build,
and then the binaries must be posted alongside an explicit configuration
listing every relevant input.
If you’ve done that, you have a reproducible build. Congratulations!</p>
<p>We’re not done, though. If the binaries can only be reproduced if you
first find a computer with the right architecture,
install a specific operating system version,
compiler version, put the source code in the right directory,
set your user identity correctly, and so on,
that may be too much work in practice for anyone to bother.</p>
<p>We want builds to be not just reproducible but <em>easy to reproduce</em>.
To do that, we need to identify relevant inputs and then,
instead of documenting them, eliminate them.
The build obviously has to depend on the source code being built,
but everything else can be eliminated.
When a build’s only relevant input is its source code,
let’s call that <em>perfectly reproducible</em>.</p>
<h2 id="go">Perfectly Reproducible Builds for Go</h2>
<p>As of Go 1.21, the Go toolchain is perfectly reproducible:
its only relevant input is the source code for that build.
We can build a specific toolchain (say, Go for Linux/x86-64) on a Linux/x86-64 host,
or a Windows/ARM64 host, or a FreeBSD/386 host,
or any other host that supports Go, and we can use any Go bootstrap compiler,
including bootstrapping all the way back to Go 1.4’s C implementation,
and we can vary any other details.
None of that changes the toolchains that are built.
If we start with the same toolchain source code,
we will get the exact same toolchain binaries out.</p>
<p>This perfect reproducibility is the culmination of efforts dating back originally to Go 1.10,
although most of the effort was concentrated in Go 1.20 and Go 1.21.
This section highlights some of the most interesting relevant inputs that we eliminated.</p>
<h3 id="go110">Reproducibility in Go 1.10</h3>
<p>Go 1.10 introduced a content-aware build cache that decides whether targets
are up-to-date based on a fingerprint of the build inputs instead of file modification times.
Because the toolchain itself is one of those build inputs,
and because Go is written in Go, the <a href="https://go.dev/s/go15bootstrap">bootstrap process</a>
would only converge if the toolchain build on a single machine was reproducible.
The overall toolchain build looks like this:</p>
<p><img src="https://go.dev/blog/rebuild/bootstrap.png" srcset="https://go.dev/blog/rebuild/bootstrap.png 1x, https://go.dev/blog/rebuild/bootstrap@2x.png 2x" width="515" height="177">
</p>
<p>We start by building the sources for the current Go toolchain using an earlier Go version,
the bootstrap toolchain (Go 1.10 used Go 1.4, written in C;
Go 1.21 uses Go 1.17).
That produces “toolchain1”, which we use to build everything again,
producing “toolchain2”, which we use to build everything again,
producing “toolchain3”.</p>
<p>Toolchain1 and toolchain2 have been built from the same sources but with
different Go implementations (compilers and libraries),
so their binaries are certain to be different.
However, if both Go implementations are non-buggy,
correct implementations, toolchain1 and toolchain2 should behave exactly the same.
In particular, when presented with the Go 1.X sources,
toolchain1’s output (toolchain2) and toolchain2’s output (toolchain3)
should be identical,
meaning toolchain2 and toolchain3 should be identical.</p>
<p>At least, that’s the idea. Making that true in practice required removing a couple unintentional inputs:</p>
<p><strong>Randomness.</strong> Map iteration and running work in multiple goroutines serialized
with locks both introduce randomness in the order that results may be generated.
This randomness can make the toolchain produce one of several different
possible outputs each time it runs.
To make the build reproducible, we had to find each of these and sort the
relevant list of items before using it to generate output.</p>
<p><strong>Bootstrap Libraries.</strong> Any library used by the compiler that can choose
from multiple different correct outputs might change its output from one
Go version to the next.
If that library output change causes a compiler output change,
then toolchain1 and toolchain2 will not be semantically identical,
and toolchain2 and toolchain3 will not be bit-for-bit identical.</p>
<p>The canonical example is the <a href="https://go.dev/pkg/sort/"><code>sort</code></a> package,
which can place elements that compare equal in <a href="https://go.dev/blog/compat#output">any order it likes</a>.
A register allocator might sort to prioritize commonly used variables,
and the linker sorts symbols in the data section by size.
To completely eliminate any effect from the sorting algorithm,
the comparison function used must never report two distinct elements as equal.
In practice, this invariant turned out to be too onerous to impose on every
use of sort in the toolchain,
so instead we arranged to copy the Go 1.X <code>sort</code> package into the source
tree that is presented to the bootstrap compiler.
That way, the compiler uses the same sort algorithm when using the bootstrap
toolchain as it does when built with itself.</p>
<p>Another package we had to copy was <a href="https://go.dev/pkg/compress/zlib/"><code>compress/zlib</code></a>,
because the linker writes compressed debug information,
and optimizations to compression libraries can change the exact output.
Over time, we’ve <a href="https://go.googlesource.com/go/+/go1.21.0/src/cmd/dist/buildtool.go#55" rel="noreferrer" target="_blank">added other packages to that list too</a>.
This approach has the added benefit of allowing the Go 1.X compiler to use
new APIs added to those packages immediately,
at the cost that those packages must be written to compile with older versions of Go.</p>
<h3 id="go120">Reproducibility in Go 1.20</h3>
<p>Work on Go 1.20 prepared for both easy reproducible builds and <a href="https://go.dev/blog/toolchain">toolchain management</a>
by removing two more relevant inputs from the toolchain build.</p>
<p><strong>Host C toolchain.</strong> Some Go packages, most notably <code>net</code>,
default to <a href="https://go.dev/blog/cgo">using <code>cgo</code></a> on most operating systems.
In some cases, such as macOS and Windows,
invoking system DLLs using <code>cgo</code> is the only reliable way to resolve host names.
When we use <code>cgo</code>, though, we invoke the host C toolchain (meaning a specific
C compiler and C library),
and different toolchains have different compilation algorithms and library code,
producing different outputs.
The build graph for a <code>cgo</code> package looks like:</p>
<p><img src="https://go.dev/blog/rebuild/cgo.png" srcset="https://go.dev/blog/rebuild/cgo.png 1x, https://go.dev/blog/rebuild/cgo@2x.png 2x" width="441" height="344">
</p>
<p>The host C toolchain is therefore a relevant input to the pre-compiled <code>net.a</code>
that ships with the toolchain.
For Go 1.20, we decided to fix this by removing <code>net.a</code> from the toolchain.
That is, Go 1.20 stopped shipping pre-compiled packages to seed the build cache with.
Now, the first time a program uses package <code>net</code>,
the Go toolchain compiles it using the local system’s C toolchain and caches that result.
In addition to removing a relevant input from toolchain builds and making
toolchain downloads smaller,
not shipping pre-compiled packages also makes toolchain downloads more portable.
If we build package <code>net</code> on one system with one C toolchain and then compile
other parts of the program on a different system with a different C toolchain,
in general there is no guarantee that the two parts can be linked together.</p>
<p>One reason we shipped the pre-compiled <code>net</code> package in the first place
was to allow building programs that used package net even on systems without
a C toolchain installed.
If there’s no pre-compiled package, what happens on those systems? The
answer varies by operating system,
but in all cases we arranged for the Go toolchain to continue to work well
for building pure Go programs without a host C toolchain.</p>
<ul>
<li>
<p>On macOS, we rewrote package net using the underlying mechanisms that cgo would use,
without any actual C code.
This avoids invoking the host C toolchain but still emits a binary that
refers to the required system DLLs.
This approach is only possible because every Mac has the same dynamic libraries installed.
Making the non-cgo macOS package net use the system DLLs also meant that
cross-compiled macOS executables now use the system DLLs for network access,
resolving a long-standing feature request.</p>
</li>
<li>
<p>On Windows, package net already made direct use of DLLs without C code, so nothing needed to be changed.</p>
</li>
<li>
<p>On Unix systems, we cannot assume a specific DLL interface to network code,
but the pure Go version works fine for systems that use typical IP and DNS setups.
Also, it is much easier to install a C toolchain on Unix systems than it
is on macOS and especially Windows.
We changed the <code>go</code> command to enable or disable <code>cgo</code> automatically based
on whether the system has a C toolchain installed.
Unix systems without a C toolchain fall back to the pure Go version of package net,
and in the rare cases where that’s not good enough,
they can install a C toolchain.</p>
</li>
</ul>
<p>Having dropped the pre-compiled packages,
the only part of the Go toolchain that still depended on the host C toolchain
was binaries built using package net,
specifically the <code>go</code> command.
With the macOS improvements, it was now viable to build those commands with <code>cgo</code> disabled,
completely removing the host C toolchain as an input,
but we left that final step for Go 1.21.</p>
<p><strong>Host dynamic linker.</strong> When programs use <code>cgo</code> on a system using dynamically linked C libraries,
the resulting binaries contain the path to the system’s dynamic linker,
something like <code>/lib64/ld-linux-x86-64.so.2</code>.
If the path is wrong, the binaries don’t run.
Typically each operating system/architecture combination has a single correct
answer for this path.
Unfortunately, musl-based Linuxes like Alpine Linux use a different dynamic
linker than glibc-based Linuxes like Ubuntu.
To make Go run at all on Alpine Linux, in Go bootstrap process looked like this:</p>
<p><img src="https://go.dev/blog/rebuild/linker1.png" srcset="https://go.dev/blog/rebuild/linker1.png 1x, https://go.dev/blog/rebuild/linker1@2x.png 2x" width="480" height="209">
</p>
<p>The bootstrap program cmd/dist inspected the local system’s dynamic linker
and wrote that value into a new source file compiled along with the rest
of the linker sources,
effectively hard-coding that default into the linker itself.
Then when the linker built a program from a set of compiled packages,
it used that default.
The result is that a Go toolchain built on Alpine is different from a toolchain built on Ubuntu:
the host configuration is a relevant input to the toolchain build.
This is a reproducibility problem but also a portability problem:
a Go toolchain built on Alpine doesn’t build working binaries or even
run on Ubuntu, and vice versa.</p>
<p>For Go 1.20, we took a step toward fixing the reproducibility problem by
changing the linker to consult the host configuration when it is running,
instead of having a default hard-coded at toolchain build time:</p>
<p><img src="https://go.dev/blog/rebuild/linker2.png" srcset="https://go.dev/blog/rebuild/linker2.png 1x, https://go.dev/blog/rebuild/linker2@2x.png 2x" width="450" height="175">
</p>
<p>This fixed the portability of the linker binary on Alpine Linux,
although not the overall toolchain, since the <code>go</code> command still used package
<code>net</code> and therefore <code>cgo</code> and therefore had a dynamic linker reference in its own binary.
Just as in the previous section, compiling the <code>go</code> command without <code>cgo</code>
enabled would fix this,
but we left that change for Go 1.21.
(We didn’t feel there was enough time left in the Go 1.20 cycle to test
such that change properly.)</p>
<h3 id="go121">Reproducibility in Go 1.21</h3>
<p>For Go 1.21, the goal of perfect reproducibility was in sight,
and we took care of the remaining, mostly small,
relevant inputs that remained.</p>
<p><strong>Host C toolchain and dynamic linker.</strong> As discussed above,
Go 1.20 took important steps toward removing the host C toolchain and dynamic
linker as relevant inputs.
Go 1.21 completed the removal of these relevant inputs by building the toolchain
with <code>cgo</code> disabled.
This improved portability of the toolchain too:
Go 1.21 is the first Go release where the standard Go toolchain runs unmodified
on Alpine Linux systems.</p>
<p>Removing these relevant inputs made it possible to cross-compile a Go toolchain
from a different system without any loss in functionality.
That in turn improved the supply chain security of the Go toolchain:
we can now build Go toolchains for all target systems using a trusted Linux/x86-64 system,
instead of needing to arrange a separate trusted system for each target.
As a result, Go 1.21 is the first release to include posted binaries for
all systems at <a href="https://go.dev/dl/">go.dev/dl/</a>.</p>
<p><strong>Source directory.</strong> Go programs include full paths in the runtime and debugging metadata,
so that when a program crashes or is run in a debugger,
stack traces include the full path to the source file,
not just the name of the file in an unspecified directory.
Unfortunately, including the full path makes the directory where the source
code is stored a relevant input to the build.
To fix this, Go 1.21 changed the release toolchain builds to install commands
like the compiler using <code>go install -trimpath</code>,
which replaces the source directory with the module path of the code.
If a released compiler crashes, the stack trace will print paths like <code>cmd/compile/main.go</code>
instead of <code>/home/user/go/src/cmd/compile/main.go</code>.
Since the full paths would refer to a directory on a different machine anyway,
this rewrite is no loss.
On the other hand, for non-release builds,
we keep the full path, so that when developers working on the compiler itself cause it to crash,
IDEs and other tools reading those crashes can easily find the correct source file.</p>
<p><strong>Host operating system.</strong> Paths on Windows systems are backslash-separated,
like <code>cmd\compile\main.go</code>.
Other systems use forward slashes, like <code>cmd/compile/main.go</code>.
Although earlier versions of Go had normalized most of these paths to use forward slashes,
one inconsistency had crept back in, causing slightly different toolchain builds on Windows.
We found and fixed the bug.</p>
<p><strong>Host architecture.</strong> Go runs on a variety of ARM systems and can emit
code using a software library for floating-point math (SWFP) or using hardware
floating-point instructions (HWFP).
Toolchains defaulting to one mode or the other will necessarily differ.
Like we saw with the dynamic linker earlier,
the Go bootstrap process inspected the build system to make sure that the
resulting toolchain worked on that system.
For historical reasons, the rule was “assume SWFP unless the build is
running on an ARM system with floating-point hardware”,
with cross-compiled toolchains assuming SWFP.
The vast majority of ARM systems today do have floating-point hardware,
so this introduced an unnecessary difference between natively compiled and
cross-compiled toolchains,
and as a further wrinkle, Windows ARM builds always assumed HWFP,
making the decision operating system-dependent.
We changed the rule to be “assume HWFP unless the build is running on
an ARM system without floating-point hardware”.
This way, cross-compilation and builds on modern ARM systems produce identical toolchains.</p>
<p><strong>Packaging logic.</strong> All the code to create the actual toolchain archives
we post for download lived in a separate Git repository,
golang.org/x/build, and the exact details of how archives get packaged does change over time.
If you wanted to reproduce those archives,
you needed to have the right version of that repository.
We removed this relevant input by moving the code to package the archives
into the main Go source tree, as <code>cmd/distpack</code>.
As of Go 1.21, if you have the sources for a given version of Go,
you also have the sources for packaging the archives.
The golang.org/x/build repository is no longer a relevant input.</p>
<p><strong>User IDs.</strong> The tar archives we posted for download were built from a
distribution written to the file system,
and using <a href="https://go.dev/pkg/archive/tar/#FileInfoHeader"><code>tar.FileInfoHeader</code></a> copies
the user and group IDs from the file system into the tar file,
making the user running the build a relevant input.
We changed the archiving code to clear these.</p>
<p><strong>Current time.</strong> Like with user IDs, the tar and zip archives we posted
for download had been built by copying the file system modification times into the archives,
making the current time a relevant input.
We could have cleared the time, but we thought it would look surprising
and possibly even break some tools to use the Unix or MS-DOS zero time.
Instead, we changed the go/VERSION file stored in the repository to add
the time associated with that version:</p>
<pre><code>$ cat go1.21.0/VERSION
go1.21.0
time 2023-08-04T20:14:06Z
$
</code></pre>
<p>The packagers now copy the time from the VERSION file when writing files to archives,
instead of copying the local file’s modification times.</p>
<p><strong>Cryptographic signing keys.</strong> The Go toolchain for macOS won’t run on
end-user systems unless we sign the binaries with an Apple-approved signing key.
We use an internal system to get them signed with Google’s signing key,
and obviously we cannot share that secret key in order to allow others to
reproduce the signed binaries.
Instead, we wrote a verifier that can check whether two binaries are identical
except for their signatures.</p>
<p><strong>OS-specific packagers.</strong> We use the Xcode tools <code>pkgbuild</code> and <code>productbuild</code>
to create the downloadable macOS PKG installer,
and we use WiX to create the downloadable Windows MSI installer.
We don’t want verifiers to need the same exact versions of those tools,
so we took the same approach as for the cryptographic signing keys,
writing a verifier that can look inside the packages and check that the
toolchain files are exactly as expected.</p>
<h2 id="verify">Verifying the Go Toolchains</h2>
<p>It’s not enough to make Go toolchains reproducible once.
We want to make sure they stay reproducible,
and we want to make sure others can reproduce them easily.</p>
<p>To keep ourselves honest, we now build all Go distributions on both a trusted
Linux/x86-64 system and a Windows/x86-64 system.
Except for the architecture, the two systems have almost nothing in common.
The two systems must produce bit-for-bit identical archives or else we do
not proceed with the release.</p>
<p>To allow others to verify that we’re honest,
we’ve written and published a verifier,
<a href="https://pkg.go.dev/golang.org/x/build/cmd/gorebuild" rel="noreferrer" target="_blank"><code>golang.org/x/build/cmd/gorebuild</code></a>.
That program will start with the source code in our Git repository and rebuild the
current Go versions, checking that they match the archives posted on <a href="https://go.dev/dl/">go.dev/dl</a>.
Most archives are required to match bit-for-bit.
As mentioned above, there are three exceptions where a more relaxed check is used:</p>
<ul>
<li>
<p>The macOS tar.gz file is expected to differ,
but then the verifier compares the contents inside.
The rebuilt and posted copies must contain the same files,
and all the files must match exactly, except for executable binaries.
Executable binaries must match exactly after stripping code signatures.</p>
</li>
<li>
<p>The macOS PKG installer is not rebuilt. Instead,
the verifier reads the files inside the PKG installer and checks that they
match the macOS tar.gz exactly,
again after code signature stripping.
In the long term, the PKG creation is trivial enough that it could potentially
be added to cmd/distpack,
but the verifier would still have to parse the PKG file to run the signature-ignoring
code executable comparison.</p>
</li>
<li>
<p>The Windows MSI installer is not rebuilt.
Instead, the verifier invokes the Linux program <code>msiextract</code> to extract
the files inside and check that they match the rebuilt Windows zip file exactly.
In the long term, perhaps the MSI creation could be added to cmd/distpack,
and then the verifier could use a bit-for-bit MSI comparison.</p>
</li>
</ul>
<p>We run <code>gorebuild</code> nightly, posting the results at <a href="https://go.dev/rebuild">go.dev/rebuild</a>,
and of course anyone else can run it too.</p>
<h2 id="ubuntu">Verifying Ubuntu’s Go Toolchain</h2>
<p>The Go toolchain’s easily reproducible builds should mean that the binaries
in the toolchains posted on go.dev match the binaries included in other packaging systems,
even when those packagers build from source.
Even if the packagers have compiled with different configurations or other changes,
the easily reproducible builds should still make it easy to reproduce their binaries.
To demonstrate this, let’s reproduce the Ubuntu <code>golang-1.21</code> package
version <code>1.21.0-1</code> for Linux/x86-64.</p>
<p>To start, we need to download and extract the Ubuntu packages,
which are <a href="https://linux.die.net/man/1/ar" rel="noreferrer" target="_blank">ar(1) archives</a> containing zstd-compressed tar archives:</p>
<pre><code>$ mkdir deb
$ cd deb
$ curl -LO http://mirrors.kernel.org/ubuntu/pool/main/g/golang-1.21/golang-1.21-src_1.21.0-1_all.deb
$ ar xv golang-1.21-src_1.21.0-1_all.deb
x - debian-binary
x - control.tar.zst
x - data.tar.zst
$ unzstd &lt; data.tar.zst | tar xv
...
x ./usr/share/go-1.21/src/archive/tar/common.go
x ./usr/share/go-1.21/src/archive/tar/example_test.go
x ./usr/share/go-1.21/src/archive/tar/format.go
x ./usr/share/go-1.21/src/archive/tar/fuzz_test.go
...
$
</code></pre>
<p>That was the source archive. Now the amd64 binary archive:</p>
<pre><code>$ rm -f debian-binary *.zst
$ curl -LO http://mirrors.kernel.org/ubuntu/pool/main/g/golang-1.21/golang-1.21-go_1.21.0-1_amd64.deb
$ ar xv golang-1.21-src_1.21.0-1_all.deb
x - debian-binary
x - control.tar.zst
x - data.tar.zst
$ unzstd &lt; data.tar.zst | tar xv | grep -v '/$'
...
x ./usr/lib/go-1.21/bin/go
x ./usr/lib/go-1.21/bin/gofmt
x ./usr/lib/go-1.21/go.env
x ./usr/lib/go-1.21/pkg/tool/linux_amd64/addr2line
x ./usr/lib/go-1.21/pkg/tool/linux_amd64/asm
x ./usr/lib/go-1.21/pkg/tool/linux_amd64/buildid
...
$
</code></pre>
<p>Ubuntu splits the normal Go tree into two halves,
in /usr/share/go-1.21 and /usr/lib/go-1.21.
Let’s put them back together:</p>
<pre><code>$ mkdir go-ubuntu
$ cp -R usr/share/go-1.21/* usr/lib/go-1.21/* go-ubuntu
cp: cannot overwrite directory go-ubuntu/api with non-directory usr/lib/go-1.21/api
cp: cannot overwrite directory go-ubuntu/misc with non-directory usr/lib/go-1.21/misc
cp: cannot overwrite directory go-ubuntu/pkg/include with non-directory usr/lib/go-1.21/pkg/include
cp: cannot overwrite directory go-ubuntu/src with non-directory usr/lib/go-1.21/src
cp: cannot overwrite directory go-ubuntu/test with non-directory usr/lib/go-1.21/test
$
</code></pre>
<p>The errors are complaining about copying symlinks, which we can ignore.</p>
<p>Now we need to download and extract the upstream Go sources:</p>
<pre><code>$ curl -LO https://go.googlesource.com/go/+archive/refs/tags/go1.21.0.tar.gz
$ mkdir go-clean
$ cd go-clean
$ curl -L https://go.googlesource.com/go/+archive/refs/tags/go1.21.0.tar.gz | tar xzv
...
x src/archive/tar/common.go
x src/archive/tar/example_test.go
x src/archive/tar/format.go
x src/archive/tar/fuzz_test.go
...
$
</code></pre>
<p>To skip some trial and error, it turns out that Ubuntu builds Go with <code>GO386=softfloat</code>,
which forces the use of software floating point when compiling for 32-bit x86,
and strips (removes symbol tables from) the resulting ELF binaries.
Let’s start with a <code>GO386=softfloat</code> build:</p>
<pre><code>$ cd src
$ GOOS=linux GO386=softfloat ./make.bash -distpack
Building Go cmd/dist using /Users/rsc/sdk/go1.17.13. (go1.17.13 darwin/amd64)
Building Go toolchain1 using /Users/rsc/sdk/go1.17.13.
Building Go bootstrap cmd/go (go_bootstrap) using Go toolchain1.
Building Go toolchain2 using go_bootstrap and Go toolchain1.
Building Go toolchain3 using go_bootstrap and Go toolchain2.
Building commands for host, darwin/amd64.
Building packages and commands for target, linux/amd64.
Packaging archives for linux/amd64.
distpack: 818d46ede85682dd go1.21.0.src.tar.gz
distpack: 4fcd8651d084a03d go1.21.0.linux-amd64.tar.gz
distpack: eab8ed80024f444f v0.0.1-go1.21.0.linux-amd64.zip
distpack: 58528cce1848ddf4 v0.0.1-go1.21.0.linux-amd64.mod
distpack: d8da1f27296edea4 v0.0.1-go1.21.0.linux-amd64.info
---
Installed Go for linux/amd64 in /Users/rsc/deb/go-clean
Installed commands in /Users/rsc/deb/go-clean/bin
*** You need to add /Users/rsc/deb/go-clean/bin to your PATH.
$
</code></pre>
<p>That left the standard package in <code>pkg/distpack/go1.21.0.linux-amd64.tar.gz</code>.
Let’s unpack it and strip the binaries to match Ubuntu:</p>
<pre><code>$ cd ../..
$ tar xzvf go-clean/pkg/distpack/go1.21.0.linux-amd64.tar.gz
x go/CONTRIBUTING.md
x go/LICENSE
x go/PATENTS
x go/README.md
x go/SECURITY.md
x go/VERSION
...
$ elfstrip go/bin/* go/pkg/tool/linux_amd64/*
$
</code></pre>
<p>Now we can diff the Go toolchain we’ve created on our Mac with the Go toolchain that Ubuntu ships:</p>
<pre><code>$ diff -r go go-ubuntu
Only in go: CONTRIBUTING.md
Only in go: LICENSE
Only in go: PATENTS
Only in go: README.md
Only in go: SECURITY.md
Only in go: codereview.cfg
Only in go: doc
Only in go: lib
Binary files go/misc/chrome/gophertool/gopher.png and go-ubuntu/misc/chrome/gophertool/gopher.png differ
Only in go-ubuntu/pkg/tool/linux_amd64: dist
Only in go-ubuntu/pkg/tool/linux_amd64: distpack
Only in go/src: all.rc
Only in go/src: clean.rc
Only in go/src: make.rc
Only in go/src: run.rc
diff -r go/src/syscall/mksyscall.pl go-ubuntu/src/syscall/mksyscall.pl
1c1
&lt; #!/usr/bin/env perl
---
&gt; #! /usr/bin/perl
...
$
</code></pre>
<p>We’ve successfully reproduced the Ubuntu package’s executables and identified
the complete set of changes that remain:</p>
<ul>
<li>Various metadata and supporting files have been deleted.</li>
<li>The <code>gopher.png</code> file has been modified. On closer inspection the two are
identical except for an embedded timestamp that Ubuntu has updated.
Perhaps Ubuntu’s packaging scripts recompressed the png with a tool that
rewrites the timestamp even when it cannot improve on the existing compression.</li>
<li>The binaries <code>dist</code> and <code>distpack</code>, which are built during bootstrap but
not included in standard archives,
have been included in the Ubuntu package.</li>
<li>The Plan 9 build scripts (<code>*.rc</code>) have been deleted, although the Windows build scripts (<code>*.bat</code>) remain.</li>
<li><code>mksyscall.pl</code> and seven other Perl scripts not shown have had their headers changed.</li>
</ul>
<p>Note in particular that we’ve reconstructed the toolchain binaries bit-for-bit:
they do not show up in the diff at all.
That is, we proved that the Ubuntu Go binaries correspond exactly to the
upstream Go sources.</p>
<p>Even better, we proved this without using any Ubuntu software at all:
these commands were run on a Mac, and <a href="https://github.com/rsc/tmp/blob/master/unzstd/" rel="noreferrer" target="_blank"><code>unzstd</code></a>
and <a href="https://github.com/rsc/tmp/blob/master/elfstrip/" rel="noreferrer" target="_blank"><code>elfstrip</code></a> are short Go programs.
A sophisticated attacker might insert malicious code into an Ubuntu package
by changing the package-creation tools.
If they did, reproducing the Go Ubuntu package from clean sources using
those malicious tools would still produce bit-for-bit identical copies of
the malicious packages.
This attack would be invisible to that kind of rebuild,
much like <a href="https://dl.acm.org/doi/10.1145/358198.358210" rel="noreferrer" target="_blank">Ken Thompson’s compiler attack</a>.
Verifying the Ubuntu packages using no Ubuntu software at all is a much
stronger check.
Go’s perfectly reproducible builds, which don’t depend on unindented
details like the host operating system,
host architecture, and host C toolchain, are what make this stronger check possible.</p>
<p>(As an aside for the historical record, Ken Thompson told me once that his
attack was in fact detected,
because the compiler build stopped being reproducible.
It had a bug: a string constant in the backdoor added to the compiler was
imperfectly handled and grew by a single NUL byte each time the compiler compiled itself.
Eventually someone noticed the non-reproducible build and tried to find the cause by compiling to assembly.
The compiler’s backdoor did not reproduce itself into assembly output at all,
so assembling that output removed the backdoor.)</p>
<h2 id="conclusion">Conclusion</h2>
<p>Reproducible builds are an important tool for strengthening the open-source supply chain.
Frameworks like <a href="https://slsa.dev/" rel="noreferrer" target="_blank">SLSA</a> focus on provenance and a software
chain of custody that can be used to inform decisions about trust.
Reproducible builds complement that approach by providing a way to verify
that the trust is well-placed.</p>
<p>Perfect reproducibility (when the source files are the build’s only relevant
input) is only possible for programs that build themselves,
like compiler toolchains.
It is a lofty but worthwhile goal precisely because self-hosting compiler
toolchains are otherwise quite difficult to verify.
Go’s perfect reproducibility means that,
assuming packagers don’t modify the source code,
every repackaging of Go 1.21.0 for Linux/x86-64 (substitute your favorite
system) in any form should be distributing exactly the same binaries,
even when they all build from source.
We’ve seen that this is not quite true for Ubuntu Linux,
but perfect reproducibility still lets us reproduce the Ubuntu packaging
using a very different, non-Ubuntu system.</p>
<p>Ideally all open source software distributed in binary form would have easy-to-reproduce builds.
In practice, as we’ve seen in this post,
it is very easy for unintended inputs to leak into builds.
For Go programs that don’t need <code>cgo</code>, a reproducible build is as simple
as compiling with <code>CGO_ENABLED=0 go build -trimpath</code>.
Disabling <code>cgo</code> removes the host C toolchain as a relevant input,
and <code>-trimpath</code> removes the current directory.
If your program does need <code>cgo</code>, you need to arrange for a specific host
C toolchain version before running <code>go build</code>,
such as by running the build in a specific virtual machine or container image.</p>
<p>Moving beyond Go, the <a href="https://reproducible-builds.org/" rel="noreferrer" target="_blank">Reproducible Builds</a>
project aims to improve reproducibility of all open source and is a good
starting point for more information about making your own software builds reproducible.</p>

    </div></div>]]></description>
        </item>
    </channel>
</rss>