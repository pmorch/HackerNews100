<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Mon, 11 Sep 2023 08:00:06 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[RestGPT (118 pts)]]></title>
            <link>https://github.com/Yifan-Song793/RestGPT</link>
            <guid>37462125</guid>
            <pubDate>Mon, 11 Sep 2023 02:22:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/Yifan-Song793/RestGPT">https://github.com/Yifan-Song793/RestGPT</a>, See on <a href="https://news.ycombinator.com/item?id=37462125">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto">RestGPT</h2>
<p dir="auto">This is the code for the paper <a href="https://arxiv.org/abs/2306.06624" rel="nofollow">RestGPT: Connecting Large Language Models with Real-World RESTful APIs</a>.</p>
<p dir="auto">This work aims to construct a <strong>large language model based autonomous agent, RestGPT, to control real-world applications</strong>, such as movie database and music player. To achieve this, we connect LLMs with <strong>RESTful APIs</strong> and tackle the practical challenges of planning, API calling, and response parsing. To fully evaluate the performance of RestGPT, we propose <strong>RestBench</strong>, a high-quality test set which consists of two real-world scenarios and human-annotated instructions with gold solution paths.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Yifan-Song793/RestGPT/blob/main/imgs/intro.png"><img src="https://github.com/Yifan-Song793/RestGPT/raw/main/imgs/intro.png" alt="intro"></a></p>
<h2 tabindex="-1" dir="auto">What's New</h2>
<ul dir="auto">
<li><strong>[Next]</strong> The demo is under-construction.</li>
<li><strong>[2023/8/29]</strong> Code for RestGPT is released.</li>
<li><strong>[2023/8/28]</strong> The second version of our <a href="https://arxiv.org/abs/2306.06624" rel="nofollow">paper</a> is released.</li>
<li><strong>[2023/6/13]</strong> Our <a href="https://arxiv.org/abs/2306.06624" rel="nofollow">paper</a> is released.</li>
</ul>
<h2 tabindex="-1" dir="auto">RestGPT</h2>
<p dir="auto">RestGPT adopts an iterative coarse-to-fine online planning framework and uses an executor to call RESTful APIs. Here is an overview of RestGPT.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Yifan-Song793/RestGPT/blob/main/imgs/model.png"><img src="https://github.com/Yifan-Song793/RestGPT/raw/main/imgs/model.png" alt="model"></a></p>
<p dir="auto">Modules:</p>
<ul dir="auto">
<li>Planner: generating natural language sub-task for current step.</li>
<li>API selector: mapping the coarse high-level sub-task to finer API calling plan.</li>
<li>Executor: executing the API calling plan.
<ul dir="auto">
<li>Caller: organizing API parameters based on the API plan and API documentation.</li>
<li>Parser: generating Python code to parse the API response based on the response schema.</li>
</ul>
</li>
</ul>
<p dir="auto">Here is an example of using TMDB movie database to search for the number of movies directed by Sofia Coppola.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Yifan-Song793/RestGPT/blob/main/imgs/example.gif"><img src="https://github.com/Yifan-Song793/RestGPT/raw/main/imgs/example.gif" alt="example" data-animated-image=""></a></p>
<h2 tabindex="-1" dir="auto">Data</h2>
<p dir="auto">We also introduce RestBench to evaluate the performance of RestGPT. RestBench is a high-quality test set consisting of TMDB movie database and Spotify music player scenarios. We collect realistic user instructions with human-annotated gold solution paths. Here are examples of RestBench:</p>
<p dir="auto">TMDB example:</p>
<ul dir="auto">
<li>Instruction: Who is the director of today's most trending movie?</li>
<li>Gold solution path
<ul dir="auto">
<li>GET /trending/{media_type}/{time_window}</li>
<li>GET /movie/{movie_id}/credits</li>
</ul>
</li>
</ul>
<p dir="auto">Spotify example:</p>
<ul dir="auto">
<li>Instruction: Make me a playlist containing three songs of Mariah Carey and name it 'Love Mariah'.</li>
<li>Gold solution path
<ul dir="auto">
<li>GET /search</li>
<li>GET /me</li>
<li>POST /usres/{user_id}/playlists</li>
<li>POST /playlists/{playlist_id}/tracks</li>
</ul>
</li>
</ul>
<p dir="auto">Below is the statistics of the data. We report the number of instructions with different lengths of solution path:</p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>#APIs</th>
<th>Len-1</th>
<th>Len-2</th>
<th>Len-3</th>
<th>Len-4</th>
<th>Avg. Len.</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr>
<td>TMDB</td>
<td>54</td>
<td>5</td>
<td>66</td>
<td>27</td>
<td>2</td>
<td>2.3</td>
<td>100</td>
</tr>
<tr>
<td>Spotify</td>
<td>40</td>
<td>8</td>
<td>18</td>
<td>22</td>
<td>9</td>
<td>2.6</td>
<td>57</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto">Setup</h2>
<div dir="auto" data-snippet-clipboard-copy-content="pip install langchain colorama tiktoken spotipy openai"><pre>pip install langchain colorama tiktoken spotipy openai</pre></div>
<p dir="auto">create <code>logs</code> folder</p>
<p dir="auto">Get OpenAI key from OpenAI, TMDB key from <a href="https://developer.themoviedb.org/docs/getting-started" rel="nofollow">https://developer.themoviedb.org/docs/getting-started</a>, and Spotify key from <a href="https://developer.spotify.com/documentation/web-api" rel="nofollow">https://developer.spotify.com/documentation/web-api</a></p>
<p dir="auto">Fill in your own key in <code>config.yaml</code></p>
<h2 tabindex="-1" dir="auto">(Optional) Initialize the Spotify Environment</h2>
<p dir="auto"><strong>WARNING: this will remove all your data from spotify!</strong></p>

<h2 tabindex="-1" dir="auto">Run</h2>
<p dir="auto">The code can be run using the following command:</p>

<p dir="auto">Then Input the scenario (TMDB/Spotify) and instruction.</p>
<p dir="auto">We also provide two scripts to run RestGPT on RestBench:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# TMDB
python run_tmdb.py

# Spotify, please open Spotify on your device
python run_spotify.py"><pre><span><span>#</span> TMDB</span>
python run_tmdb.py

<span><span>#</span> Spotify, please open Spotify on your device</span>
python run_spotify.py</pre></div>
<p dir="auto"><code>run_tmdb.py</code> will sequentially execute all instructions of RestBench-TMDB. Regarding RestBench-Spotify, you should manually modify the <code>query_idx</code> before executing the instructions.</p>
<h2 tabindex="-1" dir="auto">Citation</h2>
<p dir="auto">If you find this repo useful, please cite us.</p>
<div dir="auto" data-snippet-clipboard-copy-content="@misc{song2023restgpt,
      title={RestGPT: Connecting Large Language Models with Real-World RESTful APIs}, 
      author={Yifan Song and Weimin Xiong and Dawei Zhu and Wenhao Wu and Han Qian and Mingbo Song and Hailiang Huang and Cheng Li and Ke Wang and Rong Yao and Ye Tian and Sujian Li},
      year={2023},
      eprint={2306.06624},
      archivePrefix={arXiv},
      primaryClass={cs.CL}
}"><pre><span>@misc</span>{<span>song2023restgpt</span>,
      <span>title</span>=<span><span>{</span>RestGPT: Connecting Large Language Models with Real-World RESTful APIs<span>}</span></span>, 
      <span>author</span>=<span><span>{</span>Yifan Song and Weimin Xiong and Dawei Zhu and Wenhao Wu and Han Qian and Mingbo Song and Hailiang Huang and Cheng Li and Ke Wang and Rong Yao and Ye Tian and Sujian Li<span>}</span></span>,
      <span>year</span>=<span><span>{</span>2023<span>}</span></span>,
      <span>eprint</span>=<span><span>{</span>2306.06624<span>}</span></span>,
      <span>archivePrefix</span>=<span><span>{</span>arXiv<span>}</span></span>,
      <span>primaryClass</span>=<span><span>{</span>cs.CL<span>}</span></span>
}</pre></div>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Microsoft has not stopped forcing Edge on Windows 11 users (407 pts)]]></title>
            <link>https://www.ctrl.blog/entry/windows-system-components-default-edge.html</link>
            <guid>37461449</guid>
            <pubDate>Mon, 11 Sep 2023 00:25:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.ctrl.blog/entry/windows-system-components-default-edge.html">https://www.ctrl.blog/entry/windows-system-components-default-edge.html</a>, See on <a href="https://news.ycombinator.com/item?id=37461449">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="https://schema.org/articleBody">
        <p>Microsoft published <a href="https://blogs.windows.com/windows-insider/2023/08/25/announcing-windows-11-insider-preview-build-23531-dev-channel/" rel="external" title="“Announcing Windows 11 Insider Preview Build 23531 (Dev Channel)”">a blog post on the <cite>Windows Insider Blog</cite></a> in <time datetime="2023-08-25">late August</time> with a vague statement saying that “Windows system components“ were to begin respecting the default web browser setting. Windows 10 and 11 regularly bypass this setting and force-open links in Microsoft Edge instead. In my extensive testing, I haven’t found any changes in the new Windows Insider version.</p>
        <p>You may have read stories in the tech media celebrating that Windows will finally respect the default browser setting. This reporting seems to have been done completely without verification and based entirely on a misunderstanding. The source of the confusion is this one highlighted but vague entry in the changelog for a recent Windows 11 Insider preview build:</p>
        <figure>
          <blockquote cite="https://blogs.windows.com/windows-insider/2023/08/25/announcing-windows-11-insider-preview-build-23531-dev-channel/">
            <p>In the European Economic Area (<abbr>EEA</abbr>), Windows system components use the default browser to open links.</p>
          </blockquote>
          <figcaption>
            <p><a href="https://blogs.windows.com/windows-insider/2023/08/25/announcing-windows-11-insider-preview-build-23531-dev-channel/" rel="external" title="“Announcing Windows 11 Insider Preview Build 23531 (Dev Channel)”"><cite>Announcing Windows 11 Insider Preview Build 23531 (Dev Channel)</cite></a>, Amanda Langowski Brandon LeBlanc</p>
          </figcaption>
        </figure>
        <p>The highlight makes it sound like Microsoft has finally caved to regulatory pressure from the European Union (<abbr>EU</abbr>). The software powerhouse has abused the dominant market position of its Windows operating system to promote its Edge web browser and services for too long.</p>
        <p>I’ve followed this developing story closely over the years. I even developed the popular open-source <a href="https://www.ctrl.blog/entry/edgedeflector-default-browser.html" title="“EdgeDeflector enforces your default browser setting in Windows”">EdgeDeflector program</a> that hijacked web links destined for Microsoft Edge and directed them back to your default web browser. Microsoft finally reacted and <a href="https://www.ctrl.blog/entry/microsoft-edge-protocol-competition.html" title="“Windows now blocks Edge browser competitors from opening links”">blocked EdgeDeflector from working</a> once the Mozilla Firefox and Brave browsers began <a href="https://www.ctrl.blog/entry/anti-competitive-browser-edges.html" title="“Brave and Firefox to intercept links that force-open in Microsoft Edge”">building the functionality into their web browsers</a>.</p>
        <p>Excitedly, I installed the new Windows Insider build and began testing the changes to see them in action. At first, I didn’t believe my findings. <em>Nothing</em> had changed from the current version of Windows 11.</p>
        <ul>
          <li>The new Windows version still strongly discourages changing the default browser away from Microsoft Edge.</li>
          <li>After system updates, the new version still aggressively prompts you with a captive full-screen experience on start-up to reset your default web browser to Microsoft Edge.</li>
          <li>Web links in primary surfaces still force-open Microsoft Edge — including links in the new Copilot, Start menu, Search on the taskbar and desktop, Windows Spotlight, first-party apps (Outlook, Teams, News, Weather, and more), and Widgets on the taskbar (formerly called News and Weather).</li>
        </ul>
        <p>I’ve verified my findings in the Home and Professional editions of Windows and even the <abbr title="European Union">EU</abbr>-specific “N” variants of each edition. I’ve tested in two configurations for Norway (<abbr title="European Economic Area">EEA</abbr> member) and Germany (<abbr title="European Economic Area">EEA</abbr> and <abbr title="European Union">EU</abbr> member). For both tests, I installed devices with region and locale settings matching the desired country with <abbr title="Internet Protocol">IP</abbr> addresses and geolocation sensor data to match.</p>
        <p>I’ve checked, double-, and triple-checked my findings. <em>Nothing has changed.</em> Web links still force-open in Microsoft Edge instead of your default web browser.</p>
        <p>Microsoft first announced the changes for Windows Insider build 23531 (Developer channel). I waited for two more releases and retested with builds 23536 and 23541, both from the Developer channel. I also retested with the Canary channel, which is even further ahead on the development tree than the Developer channel.</p>
        <p>Microsoft sometimes gradually rolls out changes in the Windows Insider program to a limited set of users. It does not document publicly which new changes are gradually rolled out. However, there were only two new experiments in build 23531. None of them are related to default browser settings or Microsoft Edge. The new changes to default browser handling may be a gradual rollout, though.</p>
        <p>Microsoft was vague about the change, and neither its customers nor the tech media verified their assumptions before running with the story. Despite not having implemented the changes everyone assumed it had, it has received lots of positive press attention for doing the right thing.</p>
        <p>I have not found anyone commenting on whether this change worked for them in the many and extensive discussions on Hacker News, Reddit, and other social media. I’ve also not found any traces of confirmation or checks in the hundreds of news sites that ran the story nor in their comment sections. There has also been no mention of it in the Insider Feedback Hub or any subsequent Windows Insider build announcements or changelogs.</p>
        <p>I have <em>not</em> reached out to Microsoft for a comment on this story. Frankly, at this point, I rather assume they hate me personally more than they hate their average customers. Microsoft has also refused to make statements to <a href="https://www.theregister.com/2023/08/30/microsoft_windows_11_bing/" rel="external" title="“After injecting pop-up ads for Bing into Windows, Microsoft now bends to Europe on links”">The Register</a> and <a href="https://www.theverge.com/2023/9/5/23859537/microsoft-windows-11-default-browser-links-eu-eea-changes" rel="external" title="”Microsoft to stop forcing Windows 11 users into Edge in EU countries“">The Verge</a> for their stories on the vague changes.</p>
        <p><small>Disclaimer: I am an employee of <em>Vivaldi Technologies</em>, a competitor to Microsoft Edge. This website is my personal blog, and the views and findings expressed here do not represent my employer. I’m also the developer of EdgeDeflector, the circumvention program described in the article.</small></p>
      </div><div>
        <h3>Abbreviations</h3>
        <dl>
          <p>
            <dt><dfn><abbr>EEA</abbr></dfn></dt>
            <dd>European Economic Area</dd>
          </p>
          <p>
            <dt><dfn><abbr>EU</abbr></dfn></dt>
            <dd>European Union</dd>
          </p>
          <p>
            <dt><dfn><abbr>IP</abbr></dfn></dt>
            <dd>Internet Protocol</dd>
          </p>
        </dl>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Awk book’s 60-line version of Make (147 pts)]]></title>
            <link>https://benhoyt.com/writings/awk-make/</link>
            <guid>37460815</guid>
            <pubDate>Sun, 10 Sep 2023 22:36:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://benhoyt.com/writings/awk-make/">https://benhoyt.com/writings/awk-make/</a>, See on <a href="https://news.ycombinator.com/item?id=37460815">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="container">

<p>September 2023</p>

<blockquote>
  <p><strong>Go to:</strong> <a href="#original-awk-version">AWK Make</a> | <a href="#how-it-works">How it works</a> | <a href="#python-version">Python Make</a> | <a href="#conclusion">Conclusion</a></p>
</blockquote>

<p>In the wonderful book <em>The AWK Programming Language</em> by Aho, Weinberger, and Kernighan, there are a few pages at the end of chapter 7 that present a simplified version of the Make utility – written in a single page of AWK code.</p>

<p>Before we look at that, I want to mention that the <a href="https://awk.dev/">second edition</a> of the AWK book is coming out next month. Brian Kernighan’s done a great job of updating it, most notably with a new chapter on <a href="https://en.wikipedia.org/wiki/Exploratory_data_analysis">exploratory data analysis</a>, and adding proper CSV support to AWK to enable this. I was honoured to be asked to review a draft of the second edition.</p>

<p>AWK still shines for exploring data in 2023, especially with the new <code>--csv</code> option. CSV mode has also been <a href="https://git.savannah.gnu.org/cgit/gawk.git/tree/NEWS">added to Gawk</a> (GNU AWK), the most widely-installed version of AWK. My own <a href="https://github.com/benhoyt/goawk">GoAWK</a> implementation has had <a href="https://benhoyt.com/writings/goawk-csv/">proper CSV support</a> for some time, and I’ve added the <code>--csv</code> option to match the others.</p>

<p>The second edition of the book still includes the Make program, though it’s been made more readable with the <a href="https://github.com/benhoyt/awkmake/commit/a5793b2b55168959f3f2e976d1e409401cd8aac4">addition</a> of some “spacing and bracing” – this took it from 50 lines to 62 lines.</p>

<p>This article presents the Make program, to show how AWK is not just great for one-liners, but <a href="https://maximullaris.com/awk.html">can be used</a> as a scripting language too – though whether you <em>should</em> or not is another question.</p>

<p>I’m then going to compare what the same program would look like in Python, and briefly discuss when you’d choose AWK or Python for this kind of thing.</p>

<p>It should go without saying, but I intend this purely as a learning exercise (for me and my readers), not a program I’d recommend you use to build your projects!</p>

<h2 id="original-awk-version">Original AWK version</h2>

<p>The second edition of the book introduces the Make program as follows. (For what it’s worth, I find the term “target” confusing here – I think “source” or “dependency” would fit better.)</p>

<blockquote>
  <p>This section develops a
rudimentary updating program, patterned after the Unix <code>make</code> command, that
is based on the depth-first search technique of the previous section.</p>

  <p>To use the updater, one must explicitly describe what the components of the
system are, how they depend upon one another, and what commands are needed
to construct them. We’ll assume these dependencies and commands are stored
in a file, called a <code>makefile</code>, that contains a sequence of rules of the form</p>

  <div><pre><code>name:   t1 t2 ... tn
        commands
</code></pre></div>

  <p>The first line of a rule is a dependency relation that states that the program or
file <em>name</em> depends on the targets <em>t1</em>, <em>t2</em>, …, <em>tn</em> where each <em>ti</em> is a filename or
another <em>name</em>. Following each dependency relation may be one or more lines of
<em>commands</em> that list the commands necessary to generate <em>name</em>. Here is an
example of a <code>makefile</code> for a small program with two C files called <code>a.c</code> and <code>b.c</code>, and a <code>yacc</code>
grammar file <code>c.y</code>, a typical program-development application.</p>

  <div><pre><code>prog:   a.o b.o c.o
        gcc a.o b.o c.o -ly -o prog
a.o:    prog.h a.c
        gcc -c prog.h a.c
b.o:    prog.h b.c
        gcc -c prog.h b.c
c.o:    c.c
        gcc -c c.c
c.c:    c.y
        yacc c.y
        mv y.tab.c c.c
print:
        pr prog.h a.c b.c c.y
</code></pre></div>

  <p>The first line states that <code>prog</code> depends on the target files <code>a.o</code>, <code>b.o</code>, and <code>c.o</code>.
The second line says that <code>prog</code> is generated by using the C compiler command
<code>gcc</code> to link <code>a.o</code>, <code>b.o</code>, <code>c.o</code>, and a <code>yacc</code> library <code>y</code> into the file <code>prog</code>. The next rule
(third line) states that <code>a.o</code> depends on the targets <code>prog.h</code> and <code>a.c</code> and is
created by compiling these targets; <code>b.o</code> is the same. The file <code>c.o</code> depends on
<code>c.c</code>, which in turn depends on <code>c.y</code>, which has to be processed by the <code>yacc</code>
parser generator. Finally, the name <code>print</code> does not depend on any target; by
convention, for targetless names <code>make</code> will always perform the associated action,
in this case printing all the source files with the command <code>pr</code>.</p>

  <p>The dependency relations in the <code>makefile</code> can be represented by a graph
in which there is an edge from node <em>x</em> to node <em>y</em> whenever there is a dependency
rule with <em>x</em> on the left side and <em>y</em> one of the targets on the right. For a rule
with no targets, a successorless node with the name on the left is created. For
the <code>makefile</code> above, we have the following dependency graph:</p>

  <div><pre><code>                  prog                 print
                /   |   \
               /    |    \
            a.o    b.o    c.o
           /   \  /   \      \
          /     \/     \      \
        a.c   prog.h   b.c     c.c
                                |
                               c.y
</code></pre></div>
</blockquote>

<p>It’s a highly-simplified version of Make, of course, but still has the core concepts of outputs, dependencies, and build commands.</p>

<p>Before we look at how it works, I’ve included the full source code below, as it appears in the second edition of the AWK book. Click on the bold text to expand it, or skip down to “How it works” to see the code explained in detail.</p>

<details>
  <summary><strong>The AWK book’s Make program (full source code).</strong></summary>

  <div><pre><code><span>BEGIN</span> <span>{</span>
    <span>while</span> <span>(</span><span>getline</span> <span>&lt;</span><span>"makefile"</span> <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>$0</span> <span>~</span> <span>/^</span><span>[</span><span>A-Za-z</span><span>]</span><span>/</span><span>)</span> <span>{</span>  <span>#  $1: $2 $3 ...</span>
            <span>sub</span><span>(</span><span>/:/</span><span>,</span> <span>""</span><span>)</span>
            <span>if</span> <span>(</span><span>++</span><span>names</span><span>[</span><span>nm</span> <span>=</span> <span>$1</span><span>]</span> <span>&gt;</span> <span>1</span><span>)</span>
                <span>error</span><span>(</span><span>nm</span> <span>" is multiply defined"</span><span>)</span>
            <span>for</span> <span>(</span><span>i</span> <span>=</span> <span>2</span><span>;</span> <span>i</span> <span>&lt;=</span> <span>NF</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span># remember targets</span>
                <span>slist</span><span>[</span><span>nm</span><span>,</span> <span>++</span><span>scnt</span><span>[</span><span>nm</span><span>]]</span> <span>=</span> <span>$i</span>
        <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>$0</span> <span>~</span> <span>/^</span><span>\t</span><span>/</span><span>)</span> <span>{</span>      <span># remember cmd for</span>
            <span>cmd</span><span>[</span><span>nm</span><span>]</span> <span>=</span> <span>cmd</span><span>[</span><span>nm</span><span>]</span> <span>$0</span> <span>"\n"</span> <span>#   current name</span>
        <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>NF</span> <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>
            <span>error</span><span>(</span><span>"illegal line in makefile: "</span> <span>$0</span><span>)</span>
        <span>}</span>
    <span>}</span>

    <span>ages</span><span>()</span>      <span># compute initial ages</span>

    <span>if</span> <span>(</span><span>ARGV</span><span>[</span><span>1</span><span>]</span> <span>in</span> <span>names</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>update</span><span>(</span><span>ARGV</span><span>[</span><span>1</span><span>])</span> <span>==</span> <span>0</span><span>)</span>
            <span>print</span> <span>ARGV</span><span>[</span><span>1</span><span>]</span> <span>" is up to date"</span>
    <span>}</span> <span>else</span> <span>{</span>
        <span>error</span><span>(</span><span>ARGV</span><span>[</span><span>1</span><span>]</span> <span>" is not in makefile"</span><span>)</span>
    <span>}</span>
<span>}</span>

<span>function</span> <span>ages</span><span>(</span>      <span>f</span><span>,</span><span>n</span><span>,</span><span>t</span><span>)</span> <span>{</span>
    <span>for</span> <span>(</span><span>t</span> <span>=</span> <span>1</span><span>;</span> <span>(</span><span>"ls -t"</span> <span>|</span> <span>getline</span> <span>f</span><span>)</span> <span>&gt;</span> <span>0</span><span>;</span> <span>t</span><span>++</span><span>)</span>
        <span>age</span><span>[</span><span>f</span><span>]</span> <span>=</span> <span>t</span>         <span># all existing files get an age</span>
    <span>close</span><span>(</span><span>"ls -t"</span><span>)</span>

    <span>for</span> <span>(</span><span>n</span> <span>in</span> <span>names</span><span>)</span>
        <span>if</span> <span>(</span><span>!</span><span>(</span><span>n</span> <span>in</span> <span>age</span><span>))</span>   <span># if n has not been created</span>
            <span>age</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>9999</span>  <span># make n really old</span>
<span>}</span>

<span>function</span> <span>update</span><span>(</span><span>n</span><span>,</span>   <span>changed</span><span>,</span><span>i</span><span>,</span><span>s</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span><span>!</span><span>(</span><span>n</span> <span>in</span> <span>age</span><span>))</span>
        <span>error</span><span>(</span><span>n</span> <span>" does not exist"</span><span>)</span>
    <span>if</span> <span>(</span><span>!</span><span>(</span><span>n</span> <span>in</span> <span>names</span><span>))</span>
        <span>return</span> <span>0</span>
    <span>changed</span> <span>=</span> <span>0</span>
    <span>visited</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>1</span>
    <span>for</span> <span>(</span><span>i</span> <span>=</span> <span>1</span><span>;</span> <span>i</span> <span>&lt;=</span> <span>scnt</span><span>[</span><span>n</span><span>];</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>visited</span><span>[</span><span>s</span> <span>=</span> <span>slist</span><span>[</span><span>n</span><span>,</span> <span>i</span><span>]]</span> <span>==</span> <span>0</span><span>)</span>
            <span>update</span><span>(</span><span>s</span><span>)</span>
        <span>else</span> <span>if</span> <span>(</span><span>visited</span><span>[</span><span>s</span><span>]</span> <span>==</span> <span>1</span><span>)</span>
            <span>error</span><span>(</span><span>s</span> <span>" and "</span> <span>n</span> <span>" are circularly defined"</span><span>)</span>
        <span>if</span> <span>(</span><span>age</span><span>[</span><span>s</span><span>]</span> <span>&lt;=</span> <span>age</span><span>[</span><span>n</span><span>])</span>
            <span>changed</span><span>++</span>
    <span>}</span>
    <span>visited</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>2</span>
    <span>if</span> <span>(</span><span>changed</span> <span>||</span> <span>scnt</span><span>[</span><span>n</span><span>]</span> <span>==</span> <span>0</span><span>)</span> <span>{</span>
        <span>printf</span><span>(</span><span>"%s"</span><span>,</span> <span>cmd</span><span>[</span><span>n</span><span>])</span>
        <span>system</span><span>(</span><span>cmd</span><span>[</span><span>n</span><span>])</span>  <span># execute cmd associated with n</span>
        <span>ages</span><span>()</span>          <span># recompute all ages</span>
        <span>age</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>0</span>      <span># make n very new</span>
        <span>return</span> <span>1</span>
    <span>}</span>
    <span>return</span> <span>0</span>
<span>}</span>

<span>function</span> <span>error</span><span>(</span><span>s</span><span>)</span> <span>{</span> <span>print</span> <span>"error: "</span> <span>s</span><span>;</span> <span>exit</span> <span>}</span>
</code></pre></div>
</details>

<h2 id="how-it-works">How it works</h2>

<p>There’s an explanation of how the program works in the book, but I’ll explain it in my own words here, focussing on the aspects I find interesting.</p>

<p>The <code>BEGIN</code> block is the main entry point for a program like this. Unlike most AWK programs which implicitly read lines from standard input, this one uses an explicit loop with <code>getline</code> to read the <code>makefile</code>:</p>

<div><pre><code><span>BEGIN</span> <span>{</span>
    <span>while</span> <span>(</span><span>getline</span> <span>&lt;</span><span>"makefile"</span> <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>$0</span> <span>~</span> <span>/^</span><span>[</span><span>A-Za-z</span><span>]</span><span>/</span><span>)</span> <span>{</span>  <span>#  $1: $2 $3 ...</span>
            <span>sub</span><span>(</span><span>/:/</span><span>,</span> <span>""</span><span>)</span>
            <span>if</span> <span>(</span><span>++</span><span>names</span><span>[</span><span>nm</span> <span>=</span> <span>$1</span><span>]</span> <span>&gt;</span> <span>1</span><span>)</span>
                <span>error</span><span>(</span><span>nm</span> <span>" is multiply defined"</span><span>)</span>
            <span>for</span> <span>(</span><span>i</span> <span>=</span> <span>2</span><span>;</span> <span>i</span> <span>&lt;=</span> <span>NF</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span># remember targets</span>
                <span>slist</span><span>[</span><span>nm</span><span>,</span> <span>++</span><span>scnt</span><span>[</span><span>nm</span><span>]]</span> <span>=</span> <span>$i</span>
        <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>$0</span> <span>~</span> <span>/^</span><span>\t</span><span>/</span><span>)</span> <span>{</span>      <span># remember cmd for</span>
            <span>cmd</span><span>[</span><span>nm</span><span>]</span> <span>=</span> <span>cmd</span><span>[</span><span>nm</span><span>]</span> <span>$0</span> <span>"\n"</span> <span>#   current name</span>
        <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>NF</span> <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>
            <span>error</span><span>(</span><span>"illegal line in makefile: "</span> <span>$0</span><span>)</span>
        <span>}</span>
    <span>}</span>
    <span>...</span>
<span>}</span>
</code></pre></div>

<p>The <code>getline &lt;filename</code> is a redirect clause that opens <code>makefile</code> (the first time) and reads it line-by-line until the end. If the line (<code>$0</code>) starts with a letter (<code>/^[A-Za-z]/</code>), it’s considered a <code>name: targets</code> rule.</p>

<p>The <code>sub(/:/, "")</code> call removes the colon from the current line (the <code>$0</code> is implicit in the two-argument form of <code>sub</code>).</p>

<p>We then ensure that this rule hasn’t already been defined by checking the <code>names</code> array. An AWK array is actually an <em>associative array</em>, an old-school term for a key-value map.</p>

<p>The inner <code>for</code> loop adds each target (or dependency) to the <code>slist</code> / <code>scnt</code> data structure. This is really a map of lists, but it’s flattened to work around the fact that AWK doesn’t support nested collections. The body of the loop is very terse:</p>

<div><pre><code><span>for</span> <span>(</span><span>i</span> <span>=</span> <span>2</span><span>;</span> <span>i</span> <span>&lt;=</span> <span>NF</span><span>;</span> <span>i</span><span>++</span><span>)</span>
    <span>slist</span><span>[</span><span>nm</span><span>,</span> <span>++</span><span>scnt</span><span>[</span><span>nm</span><span>]]</span> <span>=</span> <span>$i</span>
</code></pre></div>

<p>This loops through each dependency: every field <code>$i</code> from field 2 to <code>NF</code> (the number of fields in the line).</p>

<p>For each dependency, it increments <code>scnt[nm]</code>, the count of sources for the current rule (<code>nm</code>). Then, store the dependency <code>$i</code> in <code>slist</code>, indexed by the multi-key name and count. AWK simulates multi-dimensional or multi-key arrays by creating a concatenated key where each key is separated by the <code>SUBSEP</code> separator (which defaults to <code>"\x1c"</code>).</p>

<p>After the loop, in the <code>prog</code> example we’d end up with <code>slist</code> and <code>scnt</code> looking like this:</p>

<div><pre><code>slist
    a.o,1:  prog.h
    a.o,2:  a.c
    b.o,1:  prog.h
    b.o,2:  b.c
    c.c,1:  c.y
    c.o,1:  c.c
    prog,1: a.o
    prog,2: b.o
    prog,3: c.o

scnt
    a.o:  2
    b.o:  2
    c.c:  1
    c.o:  1
    prog: 3
</code></pre></div>

<p>Coming back up, if the line starts with a tab, it’s a command, so we append it to the name’s command string:</p>

<div><pre><code><span>cmd</span><span>[</span><span>nm</span><span>]</span> <span>=</span> <span>cmd</span><span>[</span><span>nm</span><span>]</span> <span>$0</span> <span>"\n"</span>
</code></pre></div>

<p>Otherwise, if the line is not a blank line (<code>NF &gt; 0</code>), it’s a <code>makefile</code> error.</p>

<p>Finally, after reading the <code>makefile</code> in the <code>while</code> loop, we uses <code>ages()</code> to compute the ages of all files in the current directory, and then call <code>update(ARGV[1])</code> to update the rule passed on the command line:</p>

<div><pre><code><span>BEGIN</span> <span>{</span>
    <span>...</span>
    <span>ages</span><span>()</span>      <span># compute initial ages</span>

    <span>if</span> <span>(</span><span>ARGV</span><span>[</span><span>1</span><span>]</span> <span>in</span> <span>names</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>update</span><span>(</span><span>ARGV</span><span>[</span><span>1</span><span>])</span> <span>==</span> <span>0</span><span>)</span>
            <span>print</span> <span>ARGV</span><span>[</span><span>1</span><span>]</span> <span>" is up to date"</span>
    <span>}</span> <span>else</span> <span>{</span>
        <span>error</span><span>(</span><span>ARGV</span><span>[</span><span>1</span><span>]</span> <span>" is not in makefile"</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>The <code>ages</code> function is where things start to get interesting:</p>

<div><pre><code><span>function</span> <span>ages</span><span>(</span>      <span>f</span><span>,</span><span>n</span><span>,</span><span>t</span><span>)</span> <span>{</span>
    <span>for</span> <span>(</span><span>t</span> <span>=</span> <span>1</span><span>;</span> <span>(</span><span>"ls -t"</span> <span>|</span> <span>getline</span> <span>f</span><span>)</span> <span>&gt;</span> <span>0</span><span>;</span> <span>t</span><span>++</span><span>)</span>
        <span>age</span><span>[</span><span>f</span><span>]</span> <span>=</span> <span>t</span>         <span># all existing files get an age</span>
    <span>close</span><span>(</span><span>"ls -t"</span><span>)</span>

    <span>for</span> <span>(</span><span>n</span> <span>in</span> <span>names</span><span>)</span>
        <span>if</span> <span>(</span><span>!</span><span>(</span><span>n</span> <span>in</span> <span>age</span><span>))</span>   <span># if n has not been created</span>
            <span>age</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>9999</span>  <span># make n really old</span>
<span>}</span>
</code></pre></div>

<p>The parameter names <code>f</code>, <code>n</code>, and <code>t</code> are prefixed with a bunch of spaces to show they’re actually local variables, and not expected as arguments. This is an AWK quirk (which Kernighan regrets): the only way to define local variables is as function parameters, and if a function is called with fewer arguments than it has parameters, the extras take on the default value (0 for numbers, <code>""</code> for strings). So you’ll see these extra spaces a lot in AWK function definitions.</p>

<p>The next thing is quite neat: AWK supports shell-like <code>|</code> syntax to pipe the output of a program, one <code>getline</code> at a time, to a variable (in this case <code>f</code>). The <code>ls -t</code> command lists files in the current directory ordered by modification time, newest first.</p>

<p>After the loop that’s assigned each file’s age to <code>age[f]</code>, we call <code>close</code> to close the <code>ls -t</code> pipe and avoid too many open file handles.</p>

<p>Finally, we loop through the rule names and assign an arbitrary large number to <code>age[n]</code> to pretend that files that haven’t been created are really old and need to be updated.</p>

<p>Next is the recursive <code>update</code> function, where the meat of the algorithm lives:</p>

<div><pre><code><span>function</span> <span>update</span><span>(</span><span>n</span><span>,</span>   <span>changed</span><span>,</span><span>i</span><span>,</span><span>s</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span><span>!</span><span>(</span><span>n</span> <span>in</span> <span>age</span><span>))</span>
        <span>error</span><span>(</span><span>n</span> <span>" does not exist"</span><span>)</span>
    <span>if</span> <span>(</span><span>!</span><span>(</span><span>n</span> <span>in</span> <span>names</span><span>))</span>
        <span>return</span> <span>0</span>
    <span>changed</span> <span>=</span> <span>0</span>
    <span>visited</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>1</span>
    <span>for</span> <span>(</span><span>i</span> <span>=</span> <span>1</span><span>;</span> <span>i</span> <span>&lt;=</span> <span>scnt</span><span>[</span><span>n</span><span>];</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
        <span>if</span> <span>(</span><span>visited</span><span>[</span><span>s</span> <span>=</span> <span>slist</span><span>[</span><span>n</span><span>,</span> <span>i</span><span>]]</span> <span>==</span> <span>0</span><span>)</span>
            <span>update</span><span>(</span><span>s</span><span>)</span>
        <span>else</span> <span>if</span> <span>(</span><span>visited</span><span>[</span><span>s</span><span>]</span> <span>==</span> <span>1</span><span>)</span>
            <span>error</span><span>(</span><span>s</span> <span>" and "</span> <span>n</span> <span>" are circularly defined"</span><span>)</span>
        <span>if</span> <span>(</span><span>age</span><span>[</span><span>s</span><span>]</span> <span>&lt;=</span> <span>age</span><span>[</span><span>n</span><span>])</span>
            <span>changed</span><span>++</span>
    <span>}</span>
    <span>visited</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>2</span>
    <span>if</span> <span>(</span><span>changed</span> <span>||</span> <span>scnt</span><span>[</span><span>n</span><span>]</span> <span>==</span> <span>0</span><span>)</span> <span>{</span>
        <span>printf</span><span>(</span><span>"%s"</span><span>,</span> <span>cmd</span><span>[</span><span>n</span><span>])</span>
        <span>system</span><span>(</span><span>cmd</span><span>[</span><span>n</span><span>])</span>  <span># execute cmd associated with n</span>
        <span>ages</span><span>()</span>          <span># recompute all ages</span>
        <span>age</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>0</span>      <span># make n very new</span>
        <span>return</span> <span>1</span>
    <span>}</span>
    <span>return</span> <span>0</span>
<span>}</span>
</code></pre></div>

<p>Once again you’ll note the parameter list: <code>n</code> is an expected argument (the name to update), and <code>changed,i,s</code> are the locals.</p>

<p>After initial checks, we loop through the list of dependencies by iterating from <code>slist[n, 1]</code> to <code>slist[n, scnt[n]]</code>. If we haven’t visited this dependency yet, we perform a depth-first traversal of the dependency graph by recursively calling <code>update</code> to see if we need to update that dependency first:</p>

<div><pre><code><span>if</span> <span>(</span><span>visited</span><span>[</span><span>s</span> <span>=</span> <span>slist</span><span>[</span><span>n</span><span>,</span> <span>i</span><span>]]</span> <span>==</span> <span>0</span><span>)</span>
    <span>update</span><span>(</span><span>s</span><span>)</span>
</code></pre></div>

<p>The recursion is terminated by the <code>if (!(n in names)) return 0</code> block near the top. We stop when the file being updated isn’t in the list of rule names – which is a leaf node in the dependency graph.</p>

<p>The block <code>if (age[s] &lt;= age[n]) changed++</code> increments the <code>changed</code> count if any dependency is newer than the age of the current file being updated.</p>

<p>After the traversal loop, if any of the dependencies or sub-dependencies had changed, we run the associated command using <code>system()</code>, recompute the ages of all files, and <code>return 1</code> to the caller to indicate we did make an update.</p>

<p>The <code>scnt[n] == 0</code> clause handles the case where the rule being updated doesn’t have any dependencies specified, like the <code>print</code> rule in the example. In that case, always re-run its command.</p>

<p>And there you have it! A minimalist Make in one page of AWK.</p>

<h2 id="python-version">Python version</h2>

<p>For interest, I ported the book’s AWK Make to Python, and have included it below. Once again, click the bold text to expand the program.</p>

<details>
  <summary><strong>My Python port of the Make program (full source code).</strong></summary>

  <div><pre><code><span>import</span> <span>os</span><span>,</span> <span>re</span><span>,</span> <span>sys</span>

<span>slist</span> <span>=</span> <span>{}</span>  <span># slist[name] is list of rule's sources
</span><span>cmd</span> <span>=</span> <span>{}</span>    <span># cmd[name] is shell command to run for rule
</span>
<span>def</span> <span>main</span><span>():</span>
    <span>for</span> <span>line</span> <span>in</span> <span>open</span><span>(</span><span>'makefile'</span><span>):</span>
        <span>if</span> <span>re</span><span>.</span><span>match</span><span>(</span><span>'[A-Za-z]'</span><span>,</span> <span>line</span><span>):</span>
            <span>line</span> <span>=</span> <span>line</span><span>.</span><span>replace</span><span>(</span><span>':'</span><span>,</span> <span>''</span><span>)</span>
            <span>fields</span> <span>=</span> <span>line</span><span>.</span><span>split</span><span>()</span>
            <span>nm</span> <span>=</span> <span>fields</span><span>[</span><span>0</span><span>]</span>
            <span>if</span> <span>nm</span> <span>in</span> <span>slist</span><span>:</span>
                <span>error</span><span>(</span><span>f</span><span>'</span><span>{</span><span>nm</span><span>}</span><span> is multiply defined'</span><span>)</span>
            <span>slist</span><span>[</span><span>nm</span><span>]</span> <span>=</span> <span>fields</span><span>[</span><span>1</span><span>:]</span>    <span># remember targets
</span>        <span>elif</span> <span>line</span><span>.</span><span>startswith</span><span>(</span><span>'</span><span>\t</span><span>'</span><span>):</span>   <span># remember cmd for current name
</span>            <span>cmd</span><span>[</span><span>nm</span><span>]</span> <span>=</span> <span>cmd</span><span>.</span><span>get</span><span>(</span><span>nm</span><span>,</span> <span>''</span><span>)</span> <span>+</span> <span>line</span>
        <span>elif</span> <span>line</span><span>.</span><span>strip</span><span>():</span>
            <span>error</span><span>(</span><span>f</span><span>'illegal line in makefile: </span><span>{</span><span>line</span><span>}</span><span>'</span><span>)</span>
    <span>if</span> <span>sys</span><span>.</span><span>argv</span><span>[</span><span>1</span><span>]</span> <span>in</span> <span>slist</span><span>:</span>
        <span>if</span> <span>not</span> <span>update</span><span>(</span><span>sys</span><span>.</span><span>argv</span><span>[</span><span>1</span><span>]):</span>
            <span>print</span><span>(</span><span>sys</span><span>.</span><span>argv</span><span>[</span><span>1</span><span>],</span> <span>'is up to date'</span><span>)</span>
    <span>else</span><span>:</span>
        <span>error</span><span>(</span><span>f</span><span>'</span><span>{</span><span>sys</span><span>.</span><span>argv</span><span>[</span><span>1</span><span>]</span><span>}</span><span> is not in makefile'</span><span>)</span>

<span>def</span> <span>mtime</span><span>(</span><span>n</span><span>):</span>
    <span>try</span><span>:</span>
        <span>return</span> <span>os</span><span>.</span><span>stat</span><span>(</span><span>n</span><span>).</span><span>st_mtime</span>
    <span>except</span> <span>FileNotFoundError</span><span>:</span>
        <span>return</span> <span>0</span>  <span># mark as old if it doesn't exist
</span>
<span>def</span> <span>update</span><span>(</span><span>n</span><span>,</span> <span>visited</span><span>=</span><span>{}):</span>
    <span>ntime</span> <span>=</span> <span>mtime</span><span>(</span><span>n</span><span>)</span>
    <span>if</span> <span>n</span> <span>not</span> <span>in</span> <span>slist</span> <span>and</span> <span>ntime</span> <span>==</span> <span>0</span><span>:</span>
        <span>error</span><span>(</span><span>f</span><span>'</span><span>{</span><span>n</span><span>}</span><span> does not exist'</span><span>)</span>
    <span>if</span> <span>n</span> <span>not</span> <span>in</span> <span>slist</span><span>:</span>
        <span>return</span> <span>0</span>
    <span>changed</span> <span>=</span> <span>False</span>
    <span>visited</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>1</span>
    <span>for</span> <span>s</span> <span>in</span> <span>slist</span><span>.</span><span>get</span><span>(</span><span>n</span><span>,</span> <span>[]):</span>
        <span>if</span> <span>s</span> <span>not</span> <span>in</span> <span>visited</span><span>:</span>
            <span>update</span><span>(</span><span>s</span><span>)</span>
        <span>elif</span> <span>visited</span><span>[</span><span>s</span><span>]</span> <span>==</span> <span>1</span><span>:</span>
            <span>error</span><span>(</span><span>f</span><span>'</span><span>{</span><span>s</span><span>}</span><span> and </span><span>{</span><span>n</span><span>}</span><span> are circularly defined'</span><span>)</span>
        <span>if</span> <span>mtime</span><span>(</span><span>s</span><span>)</span> <span>&gt;</span> <span>ntime</span><span>:</span>
            <span>changed</span> <span>=</span> <span>True</span>
    <span>visited</span><span>[</span><span>n</span><span>]</span> <span>=</span> <span>2</span>
    <span>if</span> <span>changed</span> <span>or</span> <span>len</span><span>(</span><span>slist</span><span>.</span><span>get</span><span>(</span><span>n</span><span>,</span> <span>[]))</span> <span>==</span> <span>0</span><span>:</span>
        <span>print</span><span>(</span><span>cmd</span><span>[</span><span>n</span><span>],</span> <span>end</span><span>=</span><span>''</span><span>)</span>
        <span>os</span><span>.</span><span>system</span><span>(</span><span>cmd</span><span>[</span><span>n</span><span>])</span>  <span># execute cmd associated with n
</span>        <span>return</span> <span>1</span>
    <span>return</span> <span>0</span>

<span>def</span> <span>error</span><span>(</span><span>msg</span><span>):</span>
    <span>print</span><span>(</span><span>'error:'</span><span>,</span> <span>msg</span><span>,</span> <span>file</span><span>=</span><span>sys</span><span>.</span><span>stderr</span><span>)</span>
    <span>sys</span><span>.</span><span>exit</span><span>(</span><span>1</span><span>)</span>

<span>if</span> <span>__name__</span> <span>==</span> <span>'__main__'</span><span>:</span>
    <span>main</span><span>()</span>
</code></pre></div>
</details>

<p>It’s very similar in structure to the original AWK version, though I made two simplifications which I think make it somewhat easier to understand:</p>

<ol>
  <li>Simpler data structures to avoid the <code>slist</code> / <code>scnt</code> quirkiness – in Python we can just use a dictionary of lists. (<a href="https://github.com/benhoyt/awkmake/commit/490e5d210bdd4a7ce61292c73f1ec3f06da090eb">See diff.</a>)</li>
  <li>Determine ages more directly using <code>os.stat()</code> to fetch file modification times (mtimes), rather than using the <code>ls -t</code> trick. This also removes the need for the <code>age</code> map and the <code>ages</code> function. (<a href="https://github.com/benhoyt/awkmake/commit/7bb6a6de06a329551678fb90073a268342baf049">See diff.</a>)</li>
</ol>

<p>I didn’t plan for this, but even if you include the <code>import</code> line and the <code>if __name__ == '__main__'</code> dance, it’s 58 lines of code – basically the same length as the AWK program.</p>

<p>When making the Python version, I realized we could simplify the AWK version in a similar way:</p>

<ol>
  <li>It’s conceptually simpler to store the <code>slist</code> directly as an AWK array: a key-value map where the key is the rule name and the value is the list of dependencies as a space-separated string (just like in the <code>makefile</code>). We can use <code>split</code> as needed to turn the dependencies string into a list (an array from 1 to the number of dependencies). This avoids the need for <code>scnt</code> and <code>names</code> altogether. (<a href="https://github.com/benhoyt/awkmake/pull/2/commits/45b5c4de5ec4c5b09830fdf06b00f4e0c7f7886e">See diff.</a>)</li>
  <li>Similar to the Python version, we can get the mtime directly by shelling out to <code>stat</code>, instead of listing all files in age order with <code>ls -t</code>. I’ve used <code>stat --format %y</code> to do this. I believe this is a GNU extension, so it’s not as portable as <code>ls -t</code>, but it’s simpler and avoids the need for recomputing the <code>age</code> array. (<a href="https://github.com/benhoyt/awkmake/pull/2/commits/d5cd8cc3cdeebce953dc2b15c9fedca3eef5ceca">See diff.</a>)</li>
</ol>

<p>For what it’s worth, the modified version is four lines shorter than the original. I think the simpler <code>slist</code> is clearer, and I like the more direct approach to fetching mtimes, though I realize the lack of portability of <code>stat --format</code> is a downside (macOS’s <code>stat</code> looks <a href="https://ss64.com/osx/stat.html">quite different</a>).</p>

<h2 id="conclusion">Conclusion</h2>

<p>The AWK Make program is a neat little piece of code that shows how useful a language AWK is, even for medium-sized scripts.</p>

<p>However, Python is definitely a nicer language for this kind of thing: it has much richer data types, better tools like <code>os.stat</code>, and local variables without quirky syntax.</p>

<p>I consider AWK amazing, but I think it should remain where it excels: for exploratory data analysis and for one-liner data extraction scripts.</p>

<p>As the author of GoAWK, which has had native CSV support for a while, I’m especially pleased to see both Kernighan’s “one true AWK” and Gawk gain proper CSV support in the form of the <code>--csv</code> option. Kernighan’s <a href="https://github.com/onetrueawk/awk/commit/c76017e59eb71b5403d44fb974a83bf71462eb39#diff-b335630551682c19a781afebcf4d07bf978fb1f8ac04c6bf87428ed5106870f5">AWK updates</a> will be merged soon, and Gawk will <a href="http://git.savannah.gnu.org/cgit/gawk.git/tree/NEWS">include this feature in version 5.3.0</a>, which is coming out soon.</p>

<p>You can also view my <a href="https://github.com/benhoyt/awkmake">awkmake</a> repo on GitHub, which contains the full source for both the AWK book’s Make program and my Python version, as well as a runnable example project based on the example in the AWK book.</p>

<p>I’d love it if you <a href="https://github.com/sponsors/benhoyt/">sponsored me on GitHub</a> – it will motivate me to work on my open source projects and write more good content. Thanks!</p>


</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[$400M in assets to bankrupt in 45-minutes because of a failed deployment (2014) (372 pts)]]></title>
            <link>https://dougseven.com/2014/04/17/knightmare-a-devops-cautionary-tale/</link>
            <guid>37459495</guid>
            <pubDate>Sun, 10 Sep 2023 20:07:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://dougseven.com/2014/04/17/knightmare-a-devops-cautionary-tale/">https://dougseven.com/2014/04/17/knightmare-a-devops-cautionary-tale/</a>, See on <a href="https://news.ycombinator.com/item?id=37459495">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		<p>I was speaking at a conference last year on the topics of DevOps, Configuration as Code, and Continuous Delivery and used the following story to demonstrate the importance making deployments fully automated and repeatable as part of a DevOps/Continuous Delivery initiative. Since that conference I have been asked by several people to share the story through my blog. This story is true – this really happened. This is my telling of the story based on what I have read (I was not involved in this).</p>
<p>This is the story of how a company with nearly $400 million in assets went bankrupt in 45-minutes because of a failed deployment.</p>
<h2>Background</h2>
<p>Knight Capital Group is an American global financial services firm engaging in <a href="http://en.wikipedia.org/wiki/Market_making">market making</a>, electronic execution, and institutional sales and trading. In 2012 Knight was the largest trader in US equities with market share of around 17% on each the NYSE and NASDAQ. Knight’s Electronic Trading Group (ETG) managed an average daily trading volume of more than 3.3 billion trades daily, trading over 21 billion dollars…daily. That’s no joke!</p>
<p>On July 31, 2012 Knight had approximately $365 million in cash and equivalents.</p>
<p>The NYSE was planning to launch a new <a href="http://www.nyse.com/press/1341483497580.html" target="_blank">Retail Liquidity Program</a> (a program meant to provide improved pricing to retail investors through retail brokers, like Knight) on August 1, 2012. In preparation for this event Knight updated their automated, high-speed, algorithmic router that send orders into the market for execution known as SMARS. One of the core functions of SMARS is to receive orders from other components of Knights trading platform (“parent” orders) and then send one or more “child” orders out for execution. In other words, SMARS would receive large orders from the trading platform and break them up into multiple smaller orders in order to find a buyer/seller match for the volume of shares. The larger the parent order, the more child orders would be generated.</p>
<p>The update to SMARS was intended to replace old, unused code referred to as “Power Peg” – functionality that Knight hadn’t used in 8-years (why code that had been dead for 8-years was still present in the code base is a mystery, but that’s not the point). The code that that was updated repurposed an old flag that was used to activate the Power Peg functionality. The code was thoroughly tested and proven to work correctly and reliably. What could possibly go wrong?</p>
<h2>What Could Possibly Go Wrong? Indeed!</h2>
<p>Between July 27, 2012 and July 31, 2012 Knight manually deployed the new software to a limited number of servers per day – eight (8) servers in all. This is what the <a href="http://www.sec.gov/litigation/admin/2013/34-70694.pdf" target="_blank">SEC filing</a> says about the manual deployment process (BTW – if there is an SEC filing about your deployment something may have gone terribly wrong).</p>
<blockquote><p>“During the deployment of the new code, however, one of Knight’s technicians did not copy the new code to one of the eight SMARS computer servers. Knight did not have a second technician review this deployment and no one at Knight realized that the Power Peg code had not been removed from the eighth server, nor the new RLP code added. Knight had no written procedures that required such a review.<br>
SEC Filing | Release No. 70694 | October 16, 2013</p></blockquote>
<p>At 9:30 AM Eastern Time on August 1, 2012 the markets opened and Knight began processing orders from broker-dealers on behalf of their customers for the new Retail Liquidity Program. The seven (7) servers that had the correct SMARS deployment began processing these orders correctly. Orders sent to the eighth server triggered the supposable repurposed flag and brought back from the dead the old Power Peg code.</p>
<h2>Attack of the Killer Code Zombies</h2>
<p>Its important to understand what the “dead” Power Peg code was meant to do. This functionality was meant to count the shares bought/sold against a parent order as child orders were executed. Power Peg would instruct the the system to stop routing child orders once the parent order was fulfilled. Basically, Power Peg would keep track of the child orders and stop them once the parent order was completed. In 2005 Knight moved this cumulative tracking functionality to an earlier stage in the code execution (thus removing the count tracking from the Power Peg functionality).</p>
<p>When the Power Peg flag on the eighth server was activated the Power Peg functionality began routing child orders for execution, but wasn’t tracking the amount of shares against the parent order – somewhat like an endless loop.</p>
<h2>45 Minutes of Hell</h2>
<p>Imagine what would happen if you had a system capable of sending automated, high-speed orders into the market without any tracking to see if enough orders had been executed. Yes, it was that bad.</p>
<p>When the market opened at 9:30 AM people quickly knew something was wrong. By 9:31 AM it was evident to many people on Wall Street that something serious was happening. The market was being flooded with orders out of the ordinary for regular trading volumes on certain stocks. By 9:32 AM many people on Wall Street were wondering why it hadn’t stopped. This was an eternity in high-speed trading terms. Why hadn’t someone hit the kill-switch on whatever system was doing this? As it turns out there was no kill switch. During the first 45-minutes of trading Knight’s executions constituted more than 50% of the trading volume, driving certain stocks up over 10% of their value. As a result other stocks decreased in value in response to the erroneous trades.</p>
<p>To make things worse, Knight’s system began sending automated email messages earlier in the day – as early as 8:01 AM (when SMARS had processed orders eligible for pre-market trading). The email messages references SMARS and identified an error as “Power Peg disabled.” Between 8:01 AM and 9:30 AM there were 97 of these emails sent to Knight personnel. Of course these emails were not designed as system alerts and therefore no one looked at them right away. Oops.</p>
<p>During the 45-minutes of Hell that Knight experienced they attempted several counter measures to try and stop the erroneous trades. There was no kill-switch (and no documented procedures for how to react) so they were left trying to diagnose the issue in a live trading environment where 8 million shares were being traded every minute . Since they were unable to determine what was causing the erroneous orders they reacted by uninstalling the new code from the servers it was deployed to correctly. In other words, they removed the working code and left the broken code. This only amplified the issues causing additional parent orders to activate the Power Peg code on all servers, not just the one that wasn’t deployed to correctly. Eventually they were able to stop the system – after 45 minutes of trading.</p>
<p>In the first 45-minutes the market was open the Power Peg code received and processed 212 parent orders. As a result SMARS sent millions of child orders into the market resulting in 4 million transactions against 154 stocks for more than 397 million shares. For you stock market junkies this meant the Knight assumed approximately $3.5 billion net long positions in 80 stocks and $3.15 billion net short positions in 74 stocks. In laymen’s terms, Knight Capital Group realized a $460 million loss in 45-minutes. Remember, Knight only has $365 million in cash and equivalents. In 45-minutes Knight went from being the largest trader in US equities and a major market maker in the NYSE and NASDAQ to bankrupt. They had 48-hours to raise the capital necessary to cover their losses (which they managed to do with a $400 million investment from around a half-dozen investors). Knight Capital Group was eventually acquired by Getco LLC (December 2012) and the merged company is now called KCG Holdings.</p>
<h2>A Lesson to Learn</h2>
<p>The events of August 1, 2012 should be a lesson to all development and operations teams. It is not enough to build great software and test it; you also have to ensure it is delivered to market correctly so that your customers get the value you are delivering (and so you don’t bankrupt your company). The engineer(s) who deployed SMARS are not solely to blame here – the process Knight had set up was not appropriate for the risk they were exposed to. Additionally their process (or lack thereof) was inherently prone to error. Any time your deployment process relies on humans reading and following instructions you are exposing yourself to risk. Humans make mistakes. The mistakes could be in the instructions, in the interpretation of the instructions, or in the execution of the instructions.</p>
<p>Deployments need to be automated and repeatable and as free from potential human error as possible. Had Knight implemented an automated deployment system – complete with configuration, deployment and test automation – the error that cause the Knightmare would have been avoided.</p>
<p>A couple of the principles for Continuous Delivery apply here (even if you are not implementing a full Continuous Delivery process):</p>
<ul>
<li>Releasing software should be a repeatable, reliable process.</li>
<li>Automate as much as is reasonable.</li>
</ul>
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why is the ocean salty? (2022) (169 pts)]]></title>
            <link>https://www.usgs.gov/faqs/why-ocean-salty</link>
            <guid>37459371</guid>
            <pubDate>Sun, 10 Sep 2023 19:56:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.usgs.gov/faqs/why-ocean-salty">https://www.usgs.gov/faqs/why-ocean-salty</a>, See on <a href="https://news.ycombinator.com/item?id=37459371">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Oceans cover about 70 percent&nbsp;of the Earth's surface and about <a href="https://www.usgs.gov/special-topics/water-science-school/science/how-much-water-there-earth">97 percent of all water on and in the Earth is saline</a>—there's a lot of salty water on our planet. By some estimates, if the salt in the ocean could be removed and spread evenly over the Earth’s land surface it would form a layer more than 500 feet (166 meters) thick, about the height of a 40-story office building. But, where did all this salt come from? Salt in the ocean comes from rocks on land. Here's how it works:</p>
<p>From precipitation to the land to the rivers to the sea....</p>
<p>The&nbsp;<a href="https://www.usgs.gov/special-topics/water-science-school/science/precipitation-and-water-cycle">rain that falls</a>&nbsp;on the land contains some dissolved carbon dioxide from the surrounding air. This causes the rainwater to be slightly acidic due to carbonic acid. The rain physically erodes the rock and the acids chemically break down the rocks and carries salts and minerals along in a dissolved state as ions. The ions in the&nbsp;<a href="https://www.usgs.gov/special-topic/water-science-school/science/runoff-surface-and-overland-water-runoff?qt-science_center_objects=0#qt-science_center_objects">runoff</a>&nbsp;are carried to the streams and rivers and then to the ocean. Many of the dissolved ions are used by organisms in the ocean and are removed from the water. Others are not used up and are left for long periods of time where their concentrations increase over time.</p>
<p>The two ions that are present most often in seawater are&nbsp;chloride and sodium. These two make up over 90% of all dissolved ions in seawater. The concentration of salt in seawater (its salinity) is about 35 parts per thousand; in other words, about 3.5% of the weight of seawater comes from the dissolved salts. In a cubic mile of seawater, the weight of the salt&nbsp;(as sodium chloride) would be about 120 million tons. A cubic mile of seawater can also&nbsp;contain up to 25 pounds of gold and up to 45 pounds of silver! But before you go out and try alchemy on seawater, just think about how big a cubic mile is: 1 cubic mile contains 1,101,117,147,000 gallons of water!</p>
<p>Learn more:</p>
<ul>
<li><a href="https://www.usgs.gov/special-topics/water-science-school/science/why-ocean-salty">USGS Water Science School - Why is the Ocean Salty?</a></li>
<li><a href="https://oceanservice.noaa.gov/facts/whysalty.html">NOAA -&nbsp;Why is the ocean salty?</a></li>
</ul>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A design system for the federal government (118 pts)]]></title>
            <link>https://designsystem.digital.gov/</link>
            <guid>37459341</guid>
            <pubDate>Sun, 10 Sep 2023 19:53:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://designsystem.digital.gov/">https://designsystem.digital.gov/</a>, See on <a href="https://news.ycombinator.com/item?id=37459341">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main-content">
  <div>
        <h2>
          A design system for the federal government.
        </h2>
        <p>
          We make it easier to build accessible, mobile-friendly government
          websites.
        </p>
        <p><a href="https://designsystem.digital.gov/whats-new/updates/2022/04/28/introducing-uswds-3-0/">Introducing USWDS 3.0</a>
        <a href="https://designsystem.digital.gov/documentation/migration/">
          Migrating to USWDS 3.0
        </a>
      </p></div>

  
  <div>
        
        <div>
          <p><img src="https://designsystem.digital.gov/img/home/ui-component.svg" alt="" width="72" height="72"></p><div>
            
            <h2>Components</h2>
             <p>Browse all USWDS components, and get UX, accessibility, and implementation guidance.</p>

            <p>
              <a href="https://designsystem.digital.gov/components/">Browse components</a>
            </p>
          </div>
        </div>
        
        <div>
          <p><img src="https://designsystem.digital.gov/img/home/page-templates.svg" alt="" width="72" height="72"></p><div>
            
            <h2>Patterns</h2>
             <p>Use our guidance to craft effective and inclusive user experiences.</p>

            <p>
              <a href="https://designsystem.digital.gov/patterns/">Explore pattern guidance</a>
            </p>
          </div>
        </div>
        
        <div>
          <p><img src="https://designsystem.digital.gov/img/home/design-tokens.svg" alt="" width="72" height="72"></p><div>
            
            <h2>Design tokens</h2>
             <p>Learn how to get started using design tokens, the building blocks of USWDS component design.</p>

            <p>
              <a href="https://designsystem.digital.gov/design-tokens/">View design tokens</a>
            </p>
          </div>
        </div>
        
        <div>
          <p><img src="https://designsystem.digital.gov/img/home/utilities.svg" alt="" width="72" height="72"></p><div>
            
            <h2>Utilities</h2>
             <p>Adapt your designs and deliver prototypes quickly and consistently without touching a line of CSS.</p>

            <p>
              <a href="https://designsystem.digital.gov/utilities/">Build with utilities</a>
            </p>
          </div>
        </div>
        
      </div>
  
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A Senior Engineer's Check-List (2019) (216 pts)]]></title>
            <link>https://littleblah.com/post/2019-09-01-senior-engineer-checklist/</link>
            <guid>37458283</guid>
            <pubDate>Sun, 10 Sep 2023 17:57:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://littleblah.com/post/2019-09-01-senior-engineer-checklist/">https://littleblah.com/post/2019-09-01-senior-engineer-checklist/</a>, See on <a href="https://news.ycombinator.com/item?id=37458283">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<div id="control-accordion">
<h3>Controls (click to expand)</h3>

</div>
<p>
This is a simple checklist, and while it is useful to any software engineer, it is especially useful to senior engineers.
</p><table id="datatable">
<thead>
<tr>
<th rowspan="1">#</th>
<th rowspan="1">Task</th>
<th colspan="1">Effort</th>
<th colspan="1">Category</th>
<th colspan="2">Impact</th>
</tr>
<tr>
<th></th>
<th>
Task
</th>
<th>
</th>
<th>
</th>
<th>
Career
</th>
<th>
Company
</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Understand the business aspect of your work, and what makes money. Eventually, only that matters.</td>
<td>high</td>
<td>leadership</td>
<td>high</td>
<td>high</td>
</tr>
<tr>
<td>2</td>
<td>Get involved with hiring for your team and company, and maintain a high bar for hiring quality candidates.</td>
<td>medium</td>
<td>hiring</td>
<td>low</td>
<td>high</td>
</tr>
<tr>
<td>3</td>
<td>Design and develop systems appropriate to scale, extensibility, and scope of the problem. Avoid over-engineering.</td>
<td>high</td>
<td>technology</td>
<td>medium</td>
<td>medium</td>
</tr>
<tr>
<td>4</td>
<td>Question everything and ask "why" repetitively until you get to the root of problems and situations.</td>
<td>high</td>
<td>technology</td>
<td>medium</td>
<td>low</td>
</tr>
<tr>
<td>5</td>
<td>Demand accountability and ownership from others.</td>
<td>high</td>
<td>leadership</td>
<td>low</td>
<td>medium</td>
</tr>
<tr>
<td>6</td>
<td>Once you understand the company's needs, lead at least one high-impact project with a clear definition and target of successful delivery.</td>
<td>high</td>
<td>leadership</td>
<td>high</td>
<td>high</td>
</tr>
<tr>
<td>7</td>
<td>Work towards disambiguating ambiguous problem statements.</td>
<td>high</td>
<td>leadership</td>
<td>medium</td>
<td>medium</td>
</tr>
<tr>
<td>8</td>
<td>Cultivate relationships with other teams and develop trust.</td>
<td>high</td>
<td>network</td>
<td>medium</td>
<td>medium</td>
</tr>
<tr>
<td>9</td>
<td>Do not be adamant about your views. Listen to others and accept that there is more than one way to look at a problem statement, and multiple valid solutions to a problem.</td>
<td>medium</td>
<td>network</td>
<td>medium</td>
<td>low</td>
</tr>
<tr>
<td>10</td>
<td>Be involved with multiple projects as a consultant, a reviewer and/or a mentor.</td>
<td>medium</td>
<td>network</td>
<td>medium</td>
<td>medium</td>
</tr>
<tr>
<td>11</td>
<td>Follow the principles of extreme ownership.</td>
<td>high</td>
<td>leadership</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>12</td>
<td>Have strong mentors to help you navigate and grow in the company.</td>
<td>high</td>
<td>mentor</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>13</td>
<td>Take projects with high risk and high rewards.</td>
<td>high</td>
<td>growth</td>
<td>high</td>
<td>high</td>
</tr>
<tr>
<td>14</td>
<td>Strive for deep technical expertise in technologies used in your team.</td>
<td>high</td>
<td>growth</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>15</td>
<td>Ask for stretch projects from your manager, or help her identify one for you.</td>
<td>medium</td>
<td>growth</td>
<td>high</td>
<td>high</td>
</tr>
<tr>
<td>16</td>
<td>Discuss the goals of your manager, and how you align your work with it.</td>
<td>medium</td>
<td>managers</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>17</td>
<td>Invest time in networking effectively with seniors, peers, and juniors.</td>
<td>medium</td>
<td>network</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>18</td>
<td>Be a mentor to a couple of junior engineers.</td>
<td>medium</td>
<td>mentor</td>
<td>low</td>
<td>medium</td>
</tr>
<tr>
<td>19</td>
<td>Increase your breadth of knowledge in the domain of your team/company.</td>
<td>high</td>
<td>growth</td>
<td>high</td>
<td>high</td>
</tr>
<tr>
<td>20</td>
<td>Drive your one-on-ones. Maintain a list of topics for the next one-on-one discussion.</td>
<td>medium</td>
<td>one-on-one</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>21</td>
<td>Discuss problems with your manager, but have some solutions beforehand.</td>
<td>medium</td>
<td>managers</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>22</td>
<td>Increase your breadth of knowledge in technology.</td>
<td>high</td>
<td>growth</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>23</td>
<td>Explore emerging technologies by building small prototypes.</td>
<td>high</td>
<td>growth</td>
<td>medium</td>
<td>low</td>
</tr>
<tr>
<td>24</td>
<td>Read a few technical books every year.</td>
<td>high</td>
<td>growth</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>25</td>
<td>Before suggesting the next big shiny technology for your production stack, understand its pros and cons thoroughly.</td>
<td>high</td>
<td>technology</td>
<td>medium</td>
<td>high</td>
</tr>
<tr>
<td>26</td>
<td>Schedule a regular one-on-one with your manager</td>
<td>low</td>
<td>one-on-one</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>27</td>
<td>Schedule a regular one-on-one with your skip level manager</td>
<td>low</td>
<td>one-on-one</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>28</td>
<td>[Reminder] One-on-one usually is not a status meeting</td>
<td>medium</td>
<td>one-on-one</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>29</td>
<td>Involve the manager in your personal life (just a little though)</td>
<td>low</td>
<td>managers</td>
<td>low</td>
<td>low</td>
</tr>
<tr>
<td>30</td>
<td>Actively seek feedback from your manager</td>
<td>low</td>
<td>managers</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>31</td>
<td>Keep your manager up-to-date in things you are involved with, but don't get bogged down in unnecessary detail</td>
<td>low</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>32</td>
<td>Keep your manager up-to-date in things you are blocked on</td>
<td>low</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>33</td>
<td>Keep your manager up-to-date on people you have difficulty working with</td>
<td>medium</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>34</td>
<td>Give constructive feedback to your manager</td>
<td>medium</td>
<td>managers</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>35</td>
<td>If you are overworked, let your manager know</td>
<td>low</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>36</td>
<td>If you are under-utilized, ask your manager for areas to explore</td>
<td>medium</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>37</td>
<td>If you have an ineffective or neglectful manager, talk to your manager about your expectations</td>
<td>low</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>38</td>
<td>If you have a micromanager, talk to your manager about your expectations</td>
<td>low</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>39</td>
<td>If you have an abusive manager, talk to your skip manager or HR with data points</td>
<td>low</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>40</td>
<td>If you have an ineffective skip manager and ineffective manager, switch the team or company</td>
<td>high</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>41</td>
<td>If you do not have a cordial relationship with your manager, switch the team or company</td>
<td>high</td>
<td>managers</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>42</td>
<td>[Reminder] Leverage = impact produced/time invested. Use leverage as a yardstick for effectiveness</td>
<td>high</td>
<td>growth</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>43</td>
<td>Measure what you want to improve. Make efforts measurable</td>
<td>medium</td>
<td>growth</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>44</td>
<td>Maintain high visibility of projects which have a high risk</td>
<td>high</td>
<td>growth</td>
<td>high</td>
<td>medium</td>
</tr>
<tr>
<td>45</td>
<td>To deal with difficult folks, discuss with your managers and mentors</td>
<td>low</td>
<td>network</td>
<td>low</td>
<td>low</td>
</tr>
<tr>
<td>46</td>
<td>To deal with difficult folks, fall back to first principles</td>
<td>low</td>
<td>network</td>
<td>low</td>
<td>low</td>
</tr>
<tr>
<td>47</td>
<td>Be reachable to other engineers</td>
<td>low</td>
<td>network</td>
<td>low</td>
<td>low</td>
</tr>
<tr>
<td>48</td>
<td>Have a huge bias for action and delivery, but do not over-compromise on quality. Push back if required</td>
<td>high</td>
<td>leadership</td>
<td>medium</td>
<td>medium</td>
</tr>
<tr>
<td>49</td>
<td>Simplify code, systems, and architectures relentlessly</td>
<td>high</td>
<td>technology</td>
<td>low</td>
<td>high</td>
</tr>
<tr>
<td>50</td>
<td>Demand high-quality work from others, but be pragmatic</td>
<td>medium</td>
<td>technology</td>
<td>low</td>
<td>high</td>
</tr>
<tr>
<td>51</td>
<td>Prioritize fixing tech-debt in code, systems, and architecture when the incremental cost to develop keeps rising</td>
<td>high</td>
<td>technology</td>
<td>low</td>
<td>medium</td>
</tr>
<tr>
<td>52</td>
<td>Document extensively, and demand it from others. Document "why" more than "how"</td>
<td>high</td>
<td>technology</td>
<td>low</td>
<td>medium</td>
</tr>
<tr>
<td>53</td>
<td>Avoid politics, but have right folks vouch for your work</td>
<td>high</td>
<td>politics</td>
<td>medium</td>
<td>low</td>
</tr>
<tr>
<td>54</td>
<td>When dealing with politics, fall back to first principles</td>
<td>high</td>
<td>politics</td>
<td>low</td>
<td>low</td>
</tr>
<tr>
<td>55</td>
<td>If politics thrives due to team or company culture, switch</td>
<td>high</td>
<td>politics</td>
<td>high</td>
<td>low</td>
</tr>
<tr>
<td>56</td>
<td>Try not to get involved in office gossip</td>
<td>low</td>
<td>politics</td>
<td>medium</td>
<td>low</td>
</tr>
<tr>
<td>57</td>
<td>Avoid stretching yourself too thin to be effective</td>
<td>medium</td>
<td>leadership</td>
<td>medium</td>
<td>low</td>
</tr>
<tr>
<td>58</td>
<td>Respect code and systems that came before you. There are reasons for every code and every guard that exists in production</td>
<td>low</td>
<td>technology</td>
<td>low</td>
<td>medium</td>
</tr>
<tr>
<td>59</td>
<td>Before you suggest major refactors, ensure you understand the system deeply</td>
<td>medium</td>
<td>technology</td>
<td>medium</td>
<td>high</td>
</tr>
<tr>
<td>60</td>
<td>Resist the urge to refactor major systems to achieve simplification, because there's a risk you will end up with a similarly complex system after some time</td>
<td>medium</td>
<td>technology</td>
<td>medium</td>
<td>high</td>
</tr>
</tbody>
</table>
<div id="simpleList">
<ol>
<li>Understand the business aspect of your work, and what makes money. Eventually, only that matters.</li>
<li>Get involved with hiring for your team and company, and maintain a high bar for hiring quality candidates.</li>
<li>Design and develop systems appropriate to scale, extensibility, and scope of the problem. Avoid over-engineering.</li>
<li>Question everything and ask "why" repetitively until you get to the root of problems and situations.</li>
<li>Demand accountability and ownership from others.</li>
<li>Once you understand the company's needs, lead at least one high-impact project with a clear definition and target of successful delivery.</li>
<li>Work towards disambiguating ambiguous problem statements.</li>
<li>Cultivate relationships with other teams and develop trust.</li>
<li>Do not be adamant about your views. Listen to others and accept that there is more than one way to look at a problem statement, and multiple valid solutions to a problem.</li>
<li>Be involved with multiple projects as a consultant, a reviewer and/or a mentor.</li>
<li>Follow the principles of extreme ownership.</li>
<li>Have strong mentors to help you navigate and grow in the company.</li>
<li>Take projects with high risk and high rewards.</li>
<li>Strive for deep technical expertise in technologies used in your team.</li>
<li>Ask for stretch projects from your manager, or help her identify one for you.</li>
<li>Discuss the goals of your manager, and how you align your work with it.</li>
<li>Invest time in networking effectively with seniors, peers, and juniors.</li>
<li>Be a mentor to a couple of junior engineers.</li>
<li>Increase your breadth of knowledge in the domain of your team/company.</li>
<li>Drive your one-on-ones. Maintain a list of topics for the next one-on-one discussion.</li>
<li>Discuss problems with your manager, but have some solutions beforehand.</li>
<li>Increase your breadth of knowledge in technology.</li>
<li>Explore emerging technologies by building small prototypes.</li>
<li>Read a few technical books every year.</li>
<li>Before suggesting the next big shiny technology for your production stack, understand its pros and cons thoroughly.</li>
<li>Schedule a regular one-on-one with your manager</li>
<li>Schedule a regular one-on-one with your skip level manager</li>
<li>[Reminder] One-on-one usually is not a status meeting</li>
<li>Involve the manager in your personal life (just a little though)</li>
<li>Actively seek feedback from your manager</li>
<li>Keep your manager up-to-date in things you are involved with, but don't get bogged down in unnecessary detail</li>
<li>Keep your manager up-to-date in things you are blocked on</li>
<li>Keep your manager up-to-date on people you have difficulty working with</li>
<li>Give constructive feedback to your manager</li>
<li>If you are overworked, let your manager know</li>
<li>If you are under-utilized, ask your manager for areas to explore</li>
<li>If you have an ineffective or neglectful manager, talk to your manager about your expectations</li>
<li>If you have a micromanager, talk to your manager about your expectations</li>
<li>If you have an abusive manager, talk to your skip manager or HR with data points</li>
<li>If you have an ineffective skip manager and ineffective manager, switch the team or company</li>
<li>If you do not have a cordial relationship with your manager, switch the team or company</li>
<li>[Reminder] Leverage = impact produced/time invested. Use leverage as a yardstick for effectiveness</li>
<li>Measure what you want to improve. Make efforts measurable</li>
<li>Maintain high visibility of projects which have a high risk</li>
<li>To deal with difficult folks, discuss with your managers and mentors</li>
<li>To deal with difficult folks, fall back to first principles</li>
<li>Be reachable to other engineers</li>
<li>Have a huge bias for action and delivery, but do not over-compromise on quality. Push back if required</li>
<li>Simplify code, systems, and architectures relentlessly</li>
<li>Demand high-quality work from others, but be pragmatic</li>
<li>Prioritize fixing tech-debt in code, systems, and architecture when the incremental cost to develop keeps rising</li>
<li>Document extensively, and demand it from others. Document "why" more than "how"</li>
<li>Avoid politics, but have right folks vouch for your work</li>
<li>When dealing with politics, fall back to first principles</li>
<li>If politics thrives due to team or company culture, switch</li>
<li>Try not to get involved in office gossip</li>
<li>Avoid stretching yourself too thin to be effective</li>
<li>Respect code and systems that came before you. There are reasons for every code and every guard that exists in production</li>
<li>Before you suggest major refactors, ensure you understand the system deeply</li>
<li>Resist the urge to refactor major systems to achieve simplification, because there's a risk you will end up with a similarly complex system after some time</li>
</ol>
</div>
<div id="simpleDetailedList">
<ol>
<li>Understand the business aspect of your work, and what makes money. Eventually, only that matters.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: leadership</li>
</span>
</ul>
</li>
<li>Get involved with hiring for your team and company, and maintain a high bar for hiring quality candidates.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: hiring</li>
</span>
</ul>
</li>
<li>Design and develop systems appropriate to scale, extensibility, and scope of the problem. Avoid over-engineering.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Question everything and ask "why" repetitively until you get to the root of problems and situations.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Demand accountability and ownership from others.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: leadership</li>
</span>
</ul>
</li>
<li>Once you understand the company's needs, lead at least one high-impact project with a clear definition and target of successful delivery.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: leadership</li>
</span>
</ul>
</li>
<li>Work towards disambiguating ambiguous problem statements.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: leadership</li>
</span>
</ul>
</li>
<li>Cultivate relationships with other teams and develop trust.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: network</li>
</span>
</ul>
</li>
<li>Do not be adamant about your views. Listen to others and accept that there is more than one way to look at a problem statement, and multiple valid solutions to a problem.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: network</li>
</span>
</ul>
</li>
<li>Be involved with multiple projects as a consultant, a reviewer and/or a mentor.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: network</li>
</span>
</ul>
</li>
<li>Follow the principles of extreme ownership.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: leadership</li>
</span>
</ul>
</li>
<li>Have strong mentors to help you navigate and grow in the company.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: mentor</li>
</span>
</ul>
</li>
<li>Take projects with high risk and high rewards.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Strive for deep technical expertise in technologies used in your team.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Ask for stretch projects from your manager, or help her identify one for you.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Discuss the goals of your manager, and how you align your work with it.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>Invest time in networking effectively with seniors, peers, and juniors.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: network</li>
</span>
</ul>
</li>
<li>Be a mentor to a couple of junior engineers.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: mentor</li>
</span>
</ul>
</li>
<li>Increase your breadth of knowledge in the domain of your team/company.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Drive your one-on-ones. Maintain a list of topics for the next one-on-one discussion.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: one-on-one</li>
</span>
</ul>
</li>
<li>Discuss problems with your manager, but have some solutions beforehand.
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>Increase your breadth of knowledge in technology.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Explore emerging technologies by building small prototypes.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Read a few technical books every year.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Before suggesting the next big shiny technology for your production stack, understand its pros and cons thoroughly.
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Schedule a regular one-on-one with your manager
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: one-on-one</li>
</span>
</ul>
</li>
<li>Schedule a regular one-on-one with your skip level manager
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: one-on-one</li>
</span>
</ul>
</li>
<li>[Reminder] One-on-one usually is not a status meeting
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: one-on-one</li>
</span>
</ul>
</li>
<li>Involve the manager in your personal life (just a little though)
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>Actively seek feedback from your manager
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>Keep your manager up-to-date in things you are involved with, but don't get bogged down in unnecessary detail
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>Keep your manager up-to-date in things you are blocked on
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>Keep your manager up-to-date on people you have difficulty working with
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>Give constructive feedback to your manager
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>If you are overworked, let your manager know
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>If you are under-utilized, ask your manager for areas to explore
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>If you have an ineffective or neglectful manager, talk to your manager about your expectations
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>If you have a micromanager, talk to your manager about your expectations
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>If you have an abusive manager, talk to your skip manager or HR with data points
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>If you have an ineffective skip manager and ineffective manager, switch the team or company
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>If you do not have a cordial relationship with your manager, switch the team or company
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: managers</li>
</span>
</ul>
</li>
<li>[Reminder] Leverage = impact produced/time invested. Use leverage as a yardstick for effectiveness
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Measure what you want to improve. Make efforts measurable
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>Maintain high visibility of projects which have a high risk
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: growth</li>
</span>
</ul>
</li>
<li>To deal with difficult folks, discuss with your managers and mentors
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: network</li>
</span>
</ul>
</li>
<li>To deal with difficult folks, fall back to first principles
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: network</li>
</span>
</ul>
</li>
<li>Be reachable to other engineers
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: network</li>
</span>
</ul>
</li>
<li>Have a huge bias for action and delivery, but do not over-compromise on quality. Push back if required
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: leadership</li>
</span>
</ul>
</li>
<li>Simplify code, systems, and architectures relentlessly
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Demand high-quality work from others, but be pragmatic
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Prioritize fixing tech-debt in code, systems, and architecture when the incremental cost to develop keeps rising
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Document extensively, and demand it from others. Document "why" more than "how"
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Avoid politics, but have right folks vouch for your work
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: politics</li>
</span>
</ul>
</li>
<li>When dealing with politics, fall back to first principles
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: politics</li>
</span>
</ul>
</li>
<li>If politics thrives due to team or company culture, switch
<ul>
<span>
<li><b>Effort</b>: high</li>
<li><b>Career Impact</b>: high</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: politics</li>
</span>
</ul>
</li>
<li>Try not to get involved in office gossip
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: politics</li>
</span>
</ul>
</li>
<li>Avoid stretching yourself too thin to be effective
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: low</li>
<li><b>Category</b>: leadership</li>
</span>
</ul>
</li>
<li>Respect code and systems that came before you. There are reasons for every code and every guard that exists in production
<ul>
<span>
<li><b>Effort</b>: low</li>
<li><b>Career Impact</b>: low</li>
<li><b>Company Impact</b>: medium</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Before you suggest major refactors, ensure you understand the system deeply
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
<li>Resist the urge to refactor major systems to achieve simplification, because there's a risk you will end up with a similarly complex system after some time
<ul>
<span>
<li><b>Effort</b>: medium</li>
<li><b>Career Impact</b>: medium</li>
<li><b>Company Impact</b>: high</li>
<li><b>Category</b>: technology</li>
</span>
</ul>
</li>
</ol>
</div>
<hr>
<h2>Resources</h2>
<div id="accordion">
<h3>click to expand</h3>
<div>
<p><span>Note</span>: <a href="https://github.com/littleblah/senior-engineer-checklist" target="_blank">This is the source</a> of the data in the checklist. Pull requests are welcome.</p>
<p>This page refreshes daily. So this page might be lagging by couple of hours.</p>
<h2>My Definitions</h2>
<p>These are my definitions, and may not exactly align with yours. If you want, you can download this list as a CSV (download button is present in table view), and create your own version.</p>
<p>
<span>Senior Engineer</span>: Someone who has these basic attributes
</p><ul>
<li>Couple of years of Relevant Practical Experience <i>(Exact number of years is not easy to identify since we are looking at having variety of experiences over time rather than similar experience repeated over years)</i> </li>
<li>Influence within and across teams</li>
<li>Breadth of knowledge of technologies</li>
<li>Depth in one or more domains and/or technologies</li>
</ul>

<p><span>Effort</span>: Effort of a task as compared to others in the list. This may not exactly align with level of effort of the task for you.</p>
<p><span>Category</span>: Category of the task.</p>
<p><span>Career Impact</span>: Level of impact on your career growth.</p>
<p><span>Company Impact</span>: Level of impact on your company and your team.</p>
<p><span>Difficulty</span>: I did not see a point of listing difficulty. What may be difficult for one may not be for other.</p>
<h2>References</h2>
<ul>
<h3>Books (Non-affiliate links)</h3>
<ul>
<li>
<a href="https://www.amazon.com/Managers-Path-Leaders-Navigating-Growth/dp/1491973897" target="_blank">The manager's Path</a>
</li>
<li>
<a href="https://www.amazon.com/Mythical-Man-Month-Software-Engineering-Anniversary/dp/0201835959" target="_blank">The Mythical Man-Month</a>
</li>
</ul>
<h3>Articles and Discussions</h3>
<ul>
</ul>
</ul>
</div>
</div>
<hr>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Goodbye to Thien-Thi Nguyen (204 pts)]]></title>
            <link>https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00713.html</link>
            <guid>37457796</guid>
            <pubDate>Sun, 10 Sep 2023 17:08:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00713.html">https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00713.html</a>, See on <a href="https://news.ycombinator.com/item?id=37457796">Hacker News</a></p>
<div id="readability-page-1" class="page">
<center>




</center>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00712.html">Date Prev</a>][<a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00714.html">Date Next</a>][<a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00705.html">Thread Prev</a>][<a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00715.html">Thread Next</a>][<a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/index.html#00713">Date Index</a>][<a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/threads.html#00713">Thread Index</a>]

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->

<hr>
<table>
<tbody>
<tr>
<td>
<b>From</b>: </td>
<td>
Amin Bandali</td>
</tr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->

<tr>
<td>
<b>Subject</b>: </td>
<td>
Goodbye to Thien-Thi Nguyen</td>
</tr>

<tr>
<td>
<b>Date</b>: </td>
<td>
Sat, 09 Sep 2023 23:55:05 -0400</td>
</tr>

<tr>
<td>
<b>User-agent</b>: </td>
<td>
Gnus/5.13 (Gnus v5.13) Emacs/30.0.50 (gnu/linux)</td>
</tr>

</tbody>
</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>We have learned with deep sadness that Thien-Thi Nguyen (ttn) died in
October 2022.  Thien-Thi was a hacker, artist, writer, and long-time
maintainer and contributor to many GNU programs as well as other free
software packages.  He was the GNU maintainer of the rcs, guile-sdl,
alive, and superopt packages, and he was working on GNU Go as well.

Thien-Thi especially loved GNU Emacs, GNU Taler, and GNU Go: he was
the author and maintainer of the xpm, gnugo, ascii-art-to-unicode,
and hideshow GNU Emacs packages and made substantial contributions to
many others such as vc, as well as to GNU Taler and its documentation.

We greatly miss Thien-Thi in the free software community - his death
is a great loss to the Free World.


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>

<hr>
<table>
<tbody><tr><td>[Prev in Thread]</td>
<td><b>Current Thread</b></td>
<td>[Next in Thread]</td></tr></tbody></table>
<ul>
<li><span color="#666666"><strong>Goodbye to Thien-Thi Nguyen</strong>,
<em>Amin Bandali</em></span>&nbsp;<b>&lt;=</b>
</li></ul>

<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00712.html">Re: Treesit Regression In ec4d29c4494f32acf0ff7c5632a1d951d957f084</a></strong>
</li>
<li>Next by Date:
<strong><a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00714.html">Re: Treesit Regression In ec4d29c4494f32acf0ff7c5632a1d951d957f084</a></strong>
</li>
<li>Previous by thread:
<strong><a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00705.html">Treesit Regression In ec4d29c4494f32acf0ff7c5632a1d951d957f084</a></strong>
</li>
<li>Next by thread:
<strong><a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/msg00715.html">Re: Clojure mode</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/index.html#00713"><strong>Date</strong></a></li>
<li><a href="https://lists.gnu.org/archive/html/emacs-devel/2023-09/threads.html#00713"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->


</div>]]></description>
        </item>
        <item>
            <title><![CDATA[What I have changed my mind about in software development (116 pts)]]></title>
            <link>https://henrikwarne.com/2023/09/10/what-i-have-changed-my-mind-about-in-software-development/</link>
            <guid>37457208</guid>
            <pubDate>Sun, 10 Sep 2023 16:12:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://henrikwarne.com/2023/09/10/what-i-have-changed-my-mind-about-in-software-development/">https://henrikwarne.com/2023/09/10/what-i-have-changed-my-mind-about-in-software-development/</a>, See on <a href="https://news.ycombinator.com/item?id=37457208">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
				
<p>I really like this quote from Jeff Bezos:</p>



<p><em>“Anybody who doesn’t change their mind a lot is dramatically underestimating the complexity of the world we live in.”</em></p>



<p>Lately I have been thinking about what I have changed my mind about in software development. Here are the things I came up with:</p>



<figure><a href="https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg"><img data-attachment-id="2339" data-permalink="https://henrikwarne.com/2023/09/10/what-i-have-changed-my-mind-about-in-software-development/stenmur/" data-orig-file="https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg" data-orig-size="4624,1862" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;1.79&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;EB2103&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1694092271&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.73&quot;,&quot;iso&quot;:&quot;100&quot;,&quot;shutter_speed&quot;:&quot;0.0084033613445378&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="stenmur" data-image-description="" data-image-caption="" data-medium-file="https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg?w=300" data-large-file="https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg?w=500" width="4624" height="1862" src="https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg?w=1024" alt="" srcset="https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg?w=1024 1024w, https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg?w=150 150w, https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg?w=300 300w, https://henrikwarne1.files.wordpress.com/2023/09/stenmur.jpg?w=768 768w" sizes="(max-width: 4624px) 100vw, 4624px"></a></figure>



<p><strong>Self-documenting code.</strong> I used to think that the names of the classes, methods and variables should be enough to understand what the program does. No comments should be needed. Over the years I have realized that some comments are needed and useful. These days I add comments when there is something particularly tricky, either with the implementation, or in the domain. Every time I came back to code where I wrote a comment, I am happy that I took the time to do it. I have written more about this in <a href="https://henrikwarne.com/2021/06/15/on-comments-in-code/">On Comments in Code</a>.  </p>



<p><strong>Unit testing private methods.</strong> I wrote a blog post called <a href="https://henrikwarne.com/2014/02/09/unit-testing-private-methods/">Unit Testing Private Methods</a>, where I argued that you might as well make them package private, so you can easily write tests for them. However, several people commented and argued that you can test the private methods through the public interface. After a bit of thinking, I ended up agreeing with them, and changed my approach.</p>



<p><strong>Using an IDE.</strong> Many years ago, I was using Emacs when writing code. I was quite happy with that, and didn’t particularly feel that anything was lacking. However, one day my colleague Johan showed me what IntelliJ IDEA could do. I was sold, and never looked back. The biggest difference is navigation – it is so much easier to move around in a code base with one. Nowadays, I can’t imagine not using an IDE. I have written more on this in <a href="https://henrikwarne.com/2012/06/17/programmer-productivity-emacs-versus-intellij-idea/">Programmer Productivity: Emacs versus IntelliJ IDEA</a>.</p>



<p><strong>Using a debugger.</strong> I like <a href="https://henrikwarne.com/2014/01/01/finding-bugs-debugger-versus-logging/">trouble shooting using log statements</a> and <em>printf</em>. It is simple and effective, and works in many situations. However, when I started writing Go code several years ago, my colleague Erik showed me how nice it is to explore the state of the program when a test case fails. I had used debuggers before, but he showed me a great use case for them.</p>



<p><strong>Working remotely.</strong> Even during the pandemic, when I was working from home full time, I was <a href="https://henrikwarne.com/2020/06/09/working-from-home-cons-and-pros/">skeptical of working remotely</a>. However, I have changed my mind, and I now think working from home is great. The downside is still that I miss the face-to-face interactions. But working remotely allows me to work for companies I previously could not work for. Not having to commute is a another big plus. On balance, I think the advantages outweigh the disadvantages.</p>



<p><strong>Using ChatGPT.</strong> When ChatGPT came out, I was impressed with what it could do. However,  I was a bit skeptical of exactly how it would work in software development. But my colleague Filip kept telling me of all the cases where he used ChatGPT to help with development. So I decided to put some more effort into seeing how I could use it. For me, the main use has been for minor stand-alone tasks. For example, to generate a first draft of a Python script, to write a <em>SQL INSERT/UPDATE</em> trigger, or giving me a <em>sed</em> regular expression that removes the initial time stamp (when present) from log lines. In all these cases, it has been a great time saver.</p>



<h2>Conclusion</h2>



<p>Am I changing my mind about enough things? I don’t know. But it is definitely worthwhile to once in a while examine your beliefs about how to develop software. In many of the above cases, it took somebody else to show me, or convince me, of other ways of working. My conclusion is that collaboration and pair programming is important for spreading good ideas.</p>



<p>What have you changed your mind about when it comes to software development? Let me know in the comments.</p>




							</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[New Bézier curves for vector graphics (165 pts)]]></title>
            <link>https://ad8e.pages.dev/curve</link>
            <guid>37457051</guid>
            <pubDate>Sun, 10 Sep 2023 15:56:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ad8e.pages.dev/curve">https://ad8e.pages.dev/curve</a>, See on <a href="https://news.ycombinator.com/item?id=37457051">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main"><h2>Remodeling Béziers</h2>
<p>This article is about how math creates an easier-to-use version of Béziers. We'll show examples of issues with Béziers, then discuss the issues academically, then derive a curve that fixes the problems (and can draw circles!).</p>
<p>This is a Bézier. You can drag the handles. The green lines represent curvature.</p>

<p>Béziers are a little unintuitive to use, because it's not always clear where to put the control points, or how long the handles should be. This leads to a lot of trial and error. To see for yourself, use the handles below to align the black and pink curves.</p>

<p><label>Show answer</label></p>
<p>Click "Show answer" when done. You probably got the curve right, but you had to go back and forth between the two handles, iterating the curve. You couldn't set each handle to the correct position on the first try. (I can't do it either.)</p>
<p>Here's another one:</p>

<p><label>Show answer</label></p>
<p>You probably got the curve close, but your handles are way off.</p>
<p>Adjust the middle node:</p>

<p><label>Show answer</label></p>
<p>I don't know of a reasonable way to guess the right location.</p>
<p>These illustrate the following problems with Béziers:</p>
<ol>
<li>It's hard to guess the correct handle length on the first try; you have to see the result and adjust iteratively.</li>
<li>The correct value of a handle depends on too many other things. If you move a node or handle, then you have to adjust its handles, then re-adjust the neighboring handles, then re-adjust the first handles, then re-adjust the neighboring handles, etc. You can't set each handle to the correct value on its own. In mathematics, this means they are "non-orthogonal".</li>
<li>Widely different inputs can lead to similar outputs, and then you have to adjust neighboring handles a lot. In mathematics, this means the output-to-input map is "poorly conditioned". This becomes an issue when it is not axis-aligned, like the second example.</li>
<li>There's no obvious way to figure out where to put nodes.</li>
</ol>
<p>And there are three more problems:</p>
<ol start="5">
<li>Béziers can't represent circles. If you try to approximate one by hand, it'll look lopsided.</li>
<li>Deleting existing nodes from a curve creates a mess.</li>
<li>It's hard to keep curvature continuous across a node; you'd have to stare at curvature combs and fiddle a lot.</li>
</ol>
<p>Mathematics resolves these issues.</p>
<h2>Local and global</h2>
<p>The words "local" and "global" appear in disparate domains in mathematics, like parallel evolution. These concepts are broadly useful.</p>
<p>Small and simple objects are "local". Large and complex objects are "global". For example, your house is a global object, and each room is a local object. If you want to know whether the whole house is painted white (a global property), you can check whether each individual room is painted white (a local property). This splits the global task into smaller local tasks.</p>
<p>The key insight is: Local properties are easy, and global properties are hard. Whenever global objects can be decomposed into local objects, it's more convenient to work with the local objects. This is the backbone of the <a href="https://math.stackexchange.com/questions/34053/list-of-local-to-global-principles">local to global principle</a>.</p>
<p>A curve is determined by a finite number of points on the screen - those points are the artist's interface. These points should control the curve <em>locally</em>, determining the curve in a small region.</p>
<p>In geometry, the standard local description of a curve is its derivatives, like a Taylor series. (We can safely ignore analyticity, thanks to Stone-Weierstrass.) The zeroth derivative is position - where the curve is. The first derivative is direction - which way the curve points. The second derivative is curvature - how curvy the curve is. These three parameters are easy for humans to understand, and artists don't use higher derivatives. So the points should control position, direction, and curvature. These three parameters produce a circular arc.</p>
<p>Local control is easy to draw with, because you just need to match behavior at points:</p>
<ul>
<li>You understand what an input point does - it chooses a circular arc for the nearby curve.</li>
<li>It's easy to position input points - put them where you want to change the curve.</li>
</ul>
<p>This explains the underlying issue with Béziers. Bézier controls are local for position and direction, but not local for curvature. Local position and local direction coincide with the easy tasks - placing the node on the curve and setting the handle direction. Non-local curvature coincides with the hard task - setting handle length. So it's failure of locality causing the issues.</p>
<h2>Given local behavior, how do we create a global curve?</h2>
<p>The user only inputs a finite number of points. It's best if the correct curve extends naturally between these points, requiring as few correction points as possible.</p>
<p>Because of locality, a curve between two points is determined solely by these two points, and ignores any points farther away.</p>
<p>Each point specifies either 0, 1, or 2 derivatives. Remember that the 0th derivative is position, the 1st derivative is direction, and the 2nd derivative is curvature. If you specify a higher derivative (like curvature), you specify all its lower derivatives as well (like position and direction). So given two points and a number of derivatives for each point (0 1 2), we have to come up with a curve.</p>
<p>If each point specifies only its position (the derivative numbers are 0 0), the curve is a line.</p>
<p>If one point specifies direction and the other specifies position (derivatives are 1 0), then the curve is a circle.</p>
<p>That's the easy cases. For the rest, we need math. We specify some possible axioms, then choose which ones to satisfy.</p>
<ol>
<li>Primacy of lines and circles. The desired curves are disproportionately lines and circles. If the points express a line or circle, then the curve is a line or circle.</li>
<li>Affirmation invariance. Adding extra derivatives that agree with the existing curve should keep the curve the same.</li>
<li>Affine transformation. Affine transformation of the points causes affine transformation of the curve. This is important for drawing 3D objects (which most things are). For example, ellipses are circles on a 3D plane, projected down to your 2D surface. They are an affine transformation of a circle.</li>
<li>Subdivision (strong). If we truncate a curve specified by points with N and M derivatives, then the two endpoints of the snipped curve have N and M derivatives.</li>
<li>Subdivision (weak). If we truncate a curve specified by points with N and M derivatives, then the two endpoints of the snipped curve have at most max(N, M) derivatives.</li>
<li>Finite length. Curves don't travel to infinity. (For example, a parabola does.)</li>
<li>Non-singularity. When the input varies smoothly, the output also varies smoothly.</li>
</ol>
<p>Unfortunately, not all these axioms can be satisfied simultaneously. So we have to make some tradeoffs, just like <a href="https://en.wikipedia.org/wiki/Arrow%27s_impossibility_theorem">Arrow's impossibility theorem</a>. An example is that axioms 1 + 3 together create the conic sections - whose paths travel to infinity, and hence cannot satisfy axioms 6 or 7.</p>
<p>If both points specify direction (1 1), then a parabola satisfies axioms 3, 4, and 5. It's equivalent to a quadratic Bézier. The best UI control is the intersection of the handles, which satisfies axiom 7.</p>
<p>An alternative is to choose <code>sin(angle/2)</code> as the weight for a rational quadratic Bézier. This satisfies axioms 1, 2, and 6 (and 7 with the right UI). The curve is always an ellipse. If the directions are perpendicular, then the points are the maximum and minimum curvature points of an ellipse.</p>
<p>If one point specifies direction and curvature, and the other point specifies only position (2 0), then the previous choices are still available: ellipses and parabolas. There's an additional alternative, where the direction and curvature are mirrored to the other point across the line between them. This satisfies axioms 1, 2, 3, and symmetry.</p>
<p>If one point specifies direction and curvature, and the other point specifies direction (2 1), then we get a uniquely determined conic section, and axioms 1, 2, 3, 4, and 5 are satisfied. These are ellipses, parabolas, and hyperbolas. Curves which travel to infinity should have their handles flipped.</p>
<p>If both points specify direction and curvature (2 2), then the curve is overspecified for a conic, so we have choices to make.</p>
<p>Here's one possible solution. Blue circles control curvature.</p>

Now blue circular handles control radius:

<p>The handles determine the radius of a circular arc near the point. The in-between is interpolated.</p>
<p>There are better curves; I didn't look too hard. This one respects axioms 1, 2, 3, and 6. 4 and 5 are probably achievable with a week of work. This one happens to be computationally efficient. It flips when the handles cross parallel, but this flip can be adjusted with more work (letting you represent a whole circle with one point).</p>
<p>This curve is a rational cubic Bézier. You can read it in <code>final3()</code> in the source code, or follow these steps:</p>
<ol>
<li>Affine transform the two input points so that the intersection of their directions creates an isosceles right triangle, with the two points forming the hypotenuse. (Like the first of the two diagrams above.)</li>
<li>Let the curvatures of the points be <code>c</code> and <code>k</code>. Draw a rational cubic Bézier. Let <code>r = √(8c)/3/(c + k)</code>, <code>s = √(8k)/3/(c + k)</code>. The second control point has weight <code>w = 3krr/2 + s</code> and is proportion <code>r/w</code> between the first and second control points. The third control point is calculated symmetrically by exchanging the input points.</li>
<li>Affine transform the curve back to the original position.</li>
</ol>
<p>The old list of problems with Béziers is fixed:</p>
<ol>
<li>The handle length can be set on the first or second try; just match a small arc around the point.</li>
<li>The correct handle length only depends on a small region around the point, not anything else. After it's set, moving nodes and other handles won't interfere; it'll still be correct.</li>
<li>High condition numbers for the inverse map are axis-aligned.</li>
<li>Placing nodes is simple. (Put them at the largest deviations, and on inflection points.)</li>
<li>Circles are easy to draw.</li>
<li>Deleting existing nodes from a curve leaves the curve in good shape.</li>
<li>The curvature is well behaved (the green lines). At a smooth node, the curvature is equal on both sides - no jump discontinuities.</li>
</ol>
<p>Here's a trick that turns curve-finding from a boring math problem into an interesting geometry problem. The subdivision axiom is secretly reversible:</p>
<ul>
<li>Extension axiom: Any curve has a unique curve that extends it, which produces the original curve when subdivided. This extension continues forever, so the curve must either loop back to itself or approach a singularity. This infinitely-continuing curve is called a "parent curve".</li>
</ul>
<p>Finding a set of parent curves is a very intuitive process. Each parent curve extends infinitely, ending in loops or singularities, and every curve is just a short snippet of a parent curve. For example, the parent curves for conics are the parabolas and hyperbolas (which extend forever) and the ellipses (which loop). You can try to construct your own parent curves, using these constraints as a guide:</p>
<ol start="0">
<li>Any pair of points, containing the information {position, direction, curvature}, must belong to exactly one parent curve.
<ul>
<li>Since conics create every valid symmetric tuple, your parent curves can have no axis of symmetry unless they are conics.</li>
</ul>
</li>
<li>Parent curves should be useful curves to draw with. So singularities should generally be points at infinity. Spirals aren't useful, so they are disallowed.</li>
<li>The curves should behave well with inflection points; this is necessary to cover the lack of inflection points with conic sections. So the curve should be non-degenerate when one point has curvature 0.</li>
</ol>
<p>Which curves do you think are elegant or useful? Is there an optimal set of parent curves?</p>
<p>Here are some possible approaches:</p>
<ol>
<li>Try existing classes of curves with nice properties, like cardioids, conic generalizations, or other geometric shapes. See if any of them form parametrized families. <a href="https://en.wikipedia.org/wiki/List_of_curves">Here's a list.</a></li>
<li>Create parametrized families of curves directly. The interesting case is with singularities at infinity, where curvatures approach 0. Some promising classes are <a href="https://sci-hub.ru/https://doi.org/10.1016/j.cagd.2009.06.003">complex rational Béziers</a>, rational Béziers, and curves on the complex plane. For example, conic sections have a nice polar form.</li>
<li>Eyeball the loop case, where one curvature is zero and the other is not.</li>
</ol>
<h2>Future work</h2>
<p>These control systems can be extended to curves and surfaces in 3D. And to curves on 3D surfaces.</p>
<p>With a suitable UI, animations should be convenient. Conics express the sine wave, which is the physically natural "ease-in-out", a spring force. They also express the parabola, the physically natural "ease-in", a constant force (like gravity).</p>
<p>2 2's curve can be improved. There's also alternative UIs for the node handles that allow inflection points away from input points.</p>
<p>If you develop drawing software, you can implement these curves. They are easier to learn than Béziers, and are easier to be accurate with. No more staring at curvature combs needed.</p>
<p>Discussion: <a href="https://news.ycombinator.com/item?id=37457051">Hacker News</a>, <a href="https://app.element.io/#/room/#localcurves:matrix.org">Temporary chatroom</a></p>
<p>Author: Kevin Yin</p>
<p>Visualizations are thanks to <a href="https://omrelli.ug/g9/gallery/">G9</a> and took minimal effort.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Peredvizhnikov Engine is a fully lock-free game engine written in C++20 (329 pts)]]></title>
            <link>https://github.com/eduard-permyakov/peredvizhnikov-engine</link>
            <guid>37456471</guid>
            <pubDate>Sun, 10 Sep 2023 15:03:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine">https://github.com/eduard-permyakov/peredvizhnikov-engine</a>, See on <a href="https://news.ycombinator.com/item?id=37456471">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/docs/images/peredvizhnikov-engine-logo.png"><img src="https://github.com/eduard-permyakov/peredvizhnikov-engine/raw/master/docs/images/peredvizhnikov-engine-logo.png" alt="logo"></a></h2>
<p dir="auto">Peredvizhnikov Engine is a fully lock-free game engine written in C++20. It implements the <em>actor model</em> of concurrent computation on top of the language's coroutine primitives.</p>
<p dir="auto">Using the <em>actor model</em> abstraction, it is possible to develop complex, parallel logic while being wholly isolated from the details of inter-thread synchronization. A completely lock-free implementation of the model brings with it many advantages, namely guaranteed progress even in the presence of arbitrary thread termination, deadlock-freedom, predictable latency in reacting to critical events, and fault-tolerance.</p>
<p dir="auto">In fact, the degree of fault-tolerance in Peredvizhnikov Engine is so great, that the engine is guaranteed to continue running even when any of the worker threads is asynchronously killed. You may <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/test/test_fault_tolerance.cpp">verify this yourself</a>.</p>
<p dir="auto">The implementation is founded upon a mix of classical and novel ideas in lock-free programming. It includes <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/src/atomic_struct.cpp">a novel implementation of Software Transactional Memory</a>, <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/src/lockfree_sequenced_queue.cpp">a new kind of lock-free queue</a>, <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/src/atomic_work.cpp">an original lock-free serialization primitive</a>, <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/src/atomic_shared_ptr.cpp">a lock-free std::atomic_shared_ptr</a>, <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/src/scheduler.cpp">a lock-free scheduler</a>, <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/src/alloc.cpp">a lock-free memory allocator</a> and plenty more!</p>
<p dir="auto">For a detailed breakdown of all the lock-free algorithms that went into realizing the engine, rationale for the design, benchmarks, and more, please take a look at the accompanying document: <a href="https://github.com/eduard-permyakov/peredvizhnikov-engine/blob/master/docs/lockfree.pdf">Peredvizhnikov Engine: Design and Implementation of a Completely Lock-Free Scheduler</a>.</p>
<h2 tabindex="-1" dir="auto">Building Peredvizhnikov Engine</h2>
<p dir="auto">At the moment, the only supported platform is Linux. Clang++ 16 is required to build the sources.</p>
<ol dir="auto">
<li><code>git clone https://github.com/eduard-permyakov/peredvizhnikov-engine.git</code></li>
<li><code>cd peredvizhnikov-engine</code></li>
<li><code>make -j16 DEBUG=0</code></li>
</ol>
<h2 tabindex="-1" dir="auto">License</h2>
<p dir="auto">The source code of Peredvizhnikov Engine is freely available under the GPLv3 license. However, I may grant permission to use parts or all of the code under a different license on a case-by-case basis. Please inquire by e-mail.</p>
<h2 tabindex="-1" dir="auto">Contact</h2>
<p dir="auto">You may contact me with any questions, comments, or concerns pertaining to the source code or the underlying algorithms.</p>
<p dir="auto">In addition, I am currently actively seeking employment. Please don't hesitate to reach out regarding any suitable opportunities.</p>
<p dir="auto">My e-mail is: <a href="mailto:edward.permyakov@gmail.com">edward.permyakov@gmail.com</a></p>
</article>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How does Linux NAT a ping? (284 pts)]]></title>
            <link>https://devnonsense.com/posts/how-does-linux-nat-a-ping/</link>
            <guid>37455621</guid>
            <pubDate>Sun, 10 Sep 2023 13:28:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://devnonsense.com/posts/how-does-linux-nat-a-ping/">https://devnonsense.com/posts/how-does-linux-nat-a-ping/</a>, See on <a href="https://news.ycombinator.com/item?id=37455621">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content"><p>A few months ago, I found myself wondering how a command like <code>ping 1.1.1.1</code> works from within a private network.</p><p>In most private networks, multiple hosts connect to the Internet through a router. For IPv4, the router performs network address translation (NAT) by rewriting the original host’s source address to the router’s public IP address. The router can lookup the correct host for a reply packet based on the packet’s <em>port</em> field, at least for protocols like TCP and UDP.</p><p>But a command like <code>ping</code> doesn’t use TCP or UDP; it uses ICMP, and those packets do <em>not</em> have a port field. So how does NAT work for ICMP packets?</p><p>This led me down a deep rabbit hole: running experiments in network namespaces, capturing packets, reading RFCs, and tracing through the Linux source code. This post summarizes what I did and learned along the way.<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup></p><p><em>Before these experiments, I hadn’t spent much time in the Linux networking code – this is something new I’m learning. If I’ve made any mistakes please <a href="https://devnonsense.com/contact">let me know</a> so I can correct them.</em></p><details open=""><summary><b>Table of contents</b></summary><nav id="TableOfContents"><ul><li><a href="#experiment-setup">Experiment setup</a><ul><li><a href="#step-1-connect-two-clients-to-a-bridge">Step 1: Connect two clients to a bridge</a></li><li><a href="#step-2-connect-natbox-and-server">Step 2: Connect natbox and server</a></li><li><a href="#step-3-configure-routing-and-nat">Step 3: Configure routing and NAT</a></li></ul></li><li><a href="#packet-capture">Packet capture</a></li><li><a href="#rfc-792">RFC 792</a></li><li><a href="#ping-source-code">Ping source code</a></li><li><a href="#id-conflict">ID conflict</a></li><li><a href="#netfilter-conntrack-and-nat">Netfilter, conntrack, and NAT</a></li><li><a href="#bpftrace">bpftrace</a></li><li><a href="#conclusion">Conclusion</a></li></ul></nav></details><h2 id="experiment-setup">Experiment setup</h2><p>One of the best ways to understand Linux networking is through experimentation. These days, it’s easy to run experiments using <a href="https://www.man7.org/linux/man-pages/man7/network_namespaces.7.html">network namespaces</a> to simulate multiple devices on a single Linux machine.</p><p>This is the setup I wanted to test:</p><p><img src="https://devnonsense.com/img/icmp-nat-setup.svg" alt="Diagram showing the setup of the experiment"></p><p>There are two clients (client1 and client2) connected to a router (natbox) performing NAT from private network 192.168.99.0/24 to public network 10.0.100.0/24. The clients, natbox, and server are each separate network namespaces. Once everything is ready, a <code>ping</code> from either client to the server at <code>10.0.100.2</code> should get a reply!</p><p>For these experiments, I used a Fedora 38 Server VM running version 6.2.9 of the Linux kernel. Most of the below commands (<code>ip</code>, <code>iptables</code>, <code>tcpdump</code>, etc.) were run as the root user.<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup></p><h3 id="step-1-connect-two-clients-to-a-bridge">Step 1: Connect two clients to a bridge</h3><p>The first step is to create two clients connected to a bridge, like this:
<img src="https://devnonsense.com/img/icmp-nat-clients-and-bridge.svg" alt="Diagram showing two clients connected to a bridge"></p><p>To set it up:</p><div><pre tabindex="0"><code data-lang="bash"><span><span><span># Create a network namespace for each client.</span>
</span></span><span><span>ip netns add <span>"client1"</span>
</span></span><span><span>ip netns add <span>"client2"</span>
</span></span><span><span>
</span></span><span><span><span># Create a virtual bridge.</span>
</span></span><span><span>ip link add name <span>"br0"</span> <span>type</span> bridge
</span></span><span><span>ip link <span>set</span> dev <span>"br0"</span> up
</span></span><span><span>
</span></span><span><span><span># Disable iptables processing for bridges so rules don't block traffic over br0.</span>
</span></span><span><span>sysctl -w net.bridge.bridge-nf-call-iptables<span>=</span><span>0</span>
</span></span><span><span>
</span></span><span><span><span># Connect client1 to the bridge with a veth pair and assign IP address 192.168.99.1</span>
</span></span><span><span>ip link add dev <span>"vethclient1"</span> <span>type</span> veth peer name <span>"eth0"</span> netns <span>"client1"</span>
</span></span><span><span>ip link <span>set</span> <span>"vethclient1"</span> master <span>"br0"</span>
</span></span><span><span>ip link <span>set</span> <span>"vethclient1"</span> up
</span></span><span><span>ip -n <span>"client1"</span> addr add dev <span>"eth0"</span> <span>"192.168.99.1/24"</span>
</span></span><span><span>ip -n <span>"client1"</span> link <span>set</span> dev <span>"eth0"</span> up
</span></span><span><span>
</span></span><span><span><span># Same for client2, with IP address 192.168.99.2</span>
</span></span><span><span>ip link add dev <span>"vethclient2"</span> <span>type</span> veth peer name <span>"eth0"</span> netns <span>"client2"</span>
</span></span><span><span>ip link <span>set</span> <span>"vethclient2"</span> master <span>"br0"</span>
</span></span><span><span>ip link <span>set</span> <span>"vethclient2"</span> up
</span></span><span><span>ip -n <span>"client2"</span> addr add dev <span>"eth0"</span> <span>"192.168.99.2/24"</span>
</span></span><span><span>ip -n <span>"client2"</span> link <span>set</span> dev <span>"eth0"</span> up
</span></span></code></pre></div><p>If this worked, then:</p><ul><li><code>ip netns</code> should show <code>client1</code> and <code>client2</code>.</li><li><code>ip -n client1 addr</code> and <code>ip -n client2 addr</code> should show <code>192.168.99.1</code> and <code>192.168.99.2</code> respectively, and the <code>eth0</code> interface should show “state UP”.</li></ul><p>Now the two clients can ping each other over the bridge:</p><div><pre tabindex="0"><code data-lang="bash"><span><span><span># ping client1 -&gt; client2</span>
</span></span><span><span>ip netns <span>exec</span> client1 ping 192.168.99.2
</span></span><span><span>
</span></span><span><span><span># ping client2 -&gt; client1</span>
</span></span><span><span>ip netns <span>exec</span> client2 ping 192.168.99.1
</span></span></code></pre></div><h3 id="step-2-connect-natbox-and-server">Step 2: Connect natbox and server</h3><p>Next, create network namespaces for the natbox and server:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>ip netns add <span>"natbox"</span>
</span></span><span><span>ip netns add <span>"server"</span>
</span></span></code></pre></div><p>Then connect the natbox to the bridge:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>ip link add dev <span>"vethnatbox"</span> <span>type</span> veth peer name <span>"eth0"</span> netns <span>"natbox"</span>
</span></span><span><span>ip link <span>set</span> <span>"vethnatbox"</span> master <span>"br0"</span>
</span></span><span><span>ip link <span>set</span> <span>"vethnatbox"</span> up
</span></span><span><span>ip -n <span>"natbox"</span> addr add dev <span>"eth0"</span> <span>"192.168.99.3/24"</span>
</span></span><span><span>ip -n <span>"natbox"</span> link <span>set</span> dev <span>"eth0"</span> up
</span></span></code></pre></div><p>The natbox needs a second interface in the 10.0.100.0/24 network, so add that and call it “eth1”. Since there’s only one server, there’s no need for a bridge – just connect the natbox and server directly with a veth pair:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>ip -n <span>"natbox"</span> link add <span>"eth1"</span> <span>type</span> veth peer name <span>"eth1"</span> netns <span>"server"</span>
</span></span><span><span>ip -n <span>"natbox"</span> addr add dev <span>"eth1"</span> <span>"10.0.100.1/24"</span>
</span></span><span><span>ip -n <span>"natbox"</span> link <span>set</span> dev <span>"eth1"</span> up
</span></span><span><span>ip -n <span>"server"</span> addr add dev <span>"eth1"</span> <span>"10.0.100.2/24"</span>
</span></span><span><span>ip -n <span>"server"</span> link <span>set</span> dev <span>"eth1"</span> up
</span></span></code></pre></div><p>Now the natbox can reach both clients and the server. Test it with ping:</p><div><pre tabindex="0"><code data-lang="bash"><span><span><span># ping natbox -&gt; client1</span>
</span></span><span><span>ip netns <span>exec</span> natbox ping 192.168.99.1
</span></span><span><span>
</span></span><span><span><span># ping natbox -&gt; client2</span>
</span></span><span><span>ip netns <span>exec</span> natbox ping 192.168.99.2
</span></span><span><span>
</span></span><span><span><span># ping natbox -&gt; server</span>
</span></span><span><span>ip netns <span>exec</span> natbox ping 10.0.100.2
</span></span></code></pre></div><p>At this point, every network namespace, interface, and veth pair has been created:
<img src="https://devnonsense.com/img/icmp-nat-setup.svg" alt="Diagram showing the setup of the experiment"></p><p>However, the client cannot yet ping the server because the natbox isn’t forwarding traffic between its interfaces or performing NAT.</p><h3 id="step-3-configure-routing-and-nat">Step 3: Configure routing and NAT</h3><p>Add a default route in each client to send traffic to the natbox:</p><pre tabindex="0"><code>ip -n client1 route add 0.0.0.0/0 via 192.168.99.3
ip -n client2 route add 0.0.0.0/0 via 192.168.99.3
</code></pre><p>For security reasons, Linux does not forward packets between interfaces unless specifically enabled. So configure the natbox to forward traffic by setting <code>net.ipv4.ip_forward</code>:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>ip netns <span>exec</span> natbox sysctl <span>"net.ipv4.ip_forward=1"</span>
</span></span></code></pre></div><p>At this point, packets from a client will reach the server. However, these packets will retain the original source IP in the 192.168.99.0/24 network, so replies from the server back to this IP will go… nowhere. Fix it by configuring the natbox to NAT the traffic from a client IP (in network 192.168.99.0/24) to the natbox’s public IP (10.0.100.1/24). The easiest way to do this is to add a MASQUERADE rule to the iptables “nat” chain:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>ip netns <span>exec</span> natbox iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE
</span></span></code></pre></div><p>At last, clients can reach the server through the natbox! Test it with ping:</p><div><pre tabindex="0"><code data-lang="bash"><span><span><span># ping client1 -&gt; server via natbox</span>
</span></span><span><span>ip netns <span>exec</span> natbox ping 10.0.100.2
</span></span><span><span>
</span></span><span><span><span># ping client2 -&gt; server via natbox</span>
</span></span><span><span>ip netns <span>exec</span> natbox ping 10.0.100.2
</span></span></code></pre></div><h2 id="packet-capture">Packet capture</h2><p>Now capture ICMP packets from both client and server network namespaces.</p><div><pre tabindex="0"><code data-lang="bash"><span><span>ip netns <span>exec</span> client1 tcpdump -n icmp
</span></span><span><span>ip netns <span>exec</span> server tcpdump -n icmp
</span></span></code></pre></div><p>This is the tcpdump for client1:</p><pre tabindex="0"><code>08:01:33.549598 IP 192.168.99.1 &gt; 10.0.100.2: ICMP echo request, id 31428, seq 1, length 64
08:01:33.549661 IP 10.0.100.2 &gt; 192.168.99.1: ICMP echo reply, id 31428, seq 1, length 64
08:01:34.610605 IP 192.168.99.1 &gt; 10.0.100.2: ICMP echo request, id 31428, seq 2, length 64
08:01:34.610654 IP 10.0.100.2 &gt; 192.168.99.1: ICMP echo reply, id 31428, seq 2, length 64
</code></pre><p>… and the corresponding tcpdump for the server:</p><pre tabindex="0"><code>08:01:33.549643 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 31428, seq 1, length 64
08:01:33.549654 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 31428, seq 1, length 64
08:01:34.446611 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 33391, seq 1, length 64
08:01:34.446619 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 33391, seq 1, length 64
08:01:34.610635 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 31428, seq 2, length 64
08:01:34.610646 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 31428, seq 2, length 64
08:01:35.506411 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 33391, seq 2, length 64
08:01:35.506423 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 33391, seq 2, length 64
</code></pre><p>These captures show that:</p><ul><li>Traffic is being NAT’d. By the time an ICMP echo request reaches the server (10.0.100.2), its source IP has been rewritten to the IP of the natbox (10.0.100.1).</li><li>Each client has a different “id” field (in the capture above, client1 has ID 31428 and client2 has ID 33391).</li></ul><p>The “id” field seemed like it might allow the natbox to distinguish reply packets destined for each client. But what does the “id” field mean, and how is it chosen?</p><h2 id="rfc-792">RFC 792</h2><p>ICMP is a very, very old protocol. It is defined in <a href="https://datatracker.ietf.org/doc/html/rfc792">RFC 792</a>, which was published in 1981. The RFC specifies the exact structure of an ICMP echo and echo reply message:</p><pre tabindex="0"><code>    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |     Code      |          Checksum             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Identifier          |        Sequence Number        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Data ...
   +-+-+-+-+-
</code></pre><p>The “type” field distinguishes an echo request (8) from an echo reply (1). Code is always 0 (I guess it isn’t used for anything?). What about “sequence number” and “identifier”?</p><blockquote><p>If code = 0, an identifier to aid in matching echos and replies,
may be zero…</p><p>If code = 0, a sequence number to aid in matching echos and
replies, may be zero…</p><p>The identifier and sequence number may be used by the echo sender
to aid in matching the replies with the echo requests. For
example, the identifier might be used like a port in TCP or UDP to
identify a session, and the sequence number might be incremented
on each echo request sent. The echoer returns these same values
in the echo reply.</p></blockquote><p>The RFC doesn’t say anything about how the IDs are actually chosen. That’s not part of the protocol specification, so the next step is to look at an implementation – in this case, the source code for the <code>ping</code> command.</p><h2 id="ping-source-code">Ping source code</h2><p>The <code>ping</code> command is part of the “iputils” package, with source code available at <a href="https://github.com/iputils/iputils">github.com/iputils/iputils</a>. There is a <a href="https://github.com/iputils/iputils/blob/b50711313236696e322b38fb34c0b11cc13cc526/ping/ping.c#L1511-L1519">comment</a> just before <code>ping4_send_probe</code>:</p><div><pre tabindex="0"><code data-lang="c"><span><span><span>/*
</span></span></span><span><span><span> * pinger --
</span></span></span><span><span><span> * 	Compose and transmit an ICMP ECHO REQUEST packet.  The IP packet
</span></span></span><span><span><span> * will be added on by the kernel.  The ID field is a random number,
</span></span></span><span><span><span> * and the sequence number is an ascending integer.  The first several bytes
</span></span></span><span><span><span> * of the data portion are used to hold a UNIX "timeval" struct in VAX
</span></span></span><span><span><span> * byte-order, to compute the round-trip time.
</span></span></span><span><span><span> */</span>
</span></span></code></pre></div><p>So <code>ping</code> chooses the identifier randomly. It’s a bit difficult to see where this actually happens in the code, but from what I understand:</p><ol><li>There is a <code>struct ping_rts</code> that has a field <code>ident</code>.</li><li>The <code>ident</code> field <a href="https://github.com/iputils/iputils/blob/b50711313236696e322b38fb34c0b11cc13cc526/ping/ping.c#L327C9-L327C9">defaults to <code>-1</code></a>, but can be <a href="https://github.com/iputils/iputils/blob/b50711313236696e322b38fb34c0b11cc13cc526/ping/ping.c#L375-L378">overridden by the CLI flag “-e”</a> to any value between zero and <code>IDENTIFIER_MAX</code> (0xFFFF).</li><li>When <code>rts-&gt;ident == -1</code>, <code>ping</code> binds to a socket with type <code>SOCK_DGRAM</code> and protocol <code>IPPROTO_ICMP</code>. <a href="https://github.com/iputils/iputils/blob/b50711313236696e322b38fb34c0b11cc13cc526/ping/ping.c#L893-L895">In this configuration, it does not modify <code>source.sin_port</code></a>, so the source port is zero.</li></ol><p>I didn’t find much documentation for how Linux implements <code>SOCK_DGRAM</code> sockets with <code>IPPROTO_ICMP</code>, except for this description from the <a href="https://lore.kernel.org/lkml/20110413113204.GB6948@albatros/T/">mailing list “net: ipv4: add IPPROTO_ICMP socket kind”</a>:</p><blockquote><p>ICMP headers given to send() are checked and sanitized. The type must be
ICMP_ECHO and the code must be zero (future extensions might relax this,
see below). <strong>The id is set to the number (local port) of the socket</strong>, the
checksum is always recomputed.</p></blockquote><p>I suspect that when <code>ping</code> doesn’t specify a source port (<code>source.sin_port == 0</code>), then the Linux kernel chooses a free port at random. This port then gets used as the ID for ICMP packets.</p><h2 id="id-conflict">ID conflict</h2><p>What happens if two <code>ping</code> processes on different hosts both choose the exact same ID? Test it using <code>ping -e</code> to explicitly set the ICMP ID to the same value for both clients:</p><div><pre tabindex="0"><code data-lang="bash"><span><span><span># ping from client1 -&gt; server with ICMP ID 999</span>
</span></span><span><span>ip netns <span>exec</span> client1 ping 10.0.100.2 -e <span>999</span>
</span></span><span><span>
</span></span><span><span><span># ping from client2 -&gt; server with ICMP ID 999</span>
</span></span><span><span>ip netns <span>exec</span> client2 ping 10.0.100.2 -e <span>999</span>
</span></span></code></pre></div><p>This time, the packet capture from the server shows something different:</p><pre tabindex="0"><code>10:22:18.807289 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 999, seq 1, length 64
10:22:18.807300 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 999, seq 1, length 64
10:22:19.838650 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 999, seq 2, length 64
10:22:19.838661 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 999, seq 2, length 64
10:22:20.011677 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 30218, seq 1, length 64
10:22:20.011687 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 30218, seq 1, length 64
10:22:20.862591 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 999, seq 3, length 64
10:22:20.862603 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 999, seq 3, length 64
10:22:21.054598 IP 10.0.100.1 &gt; 10.0.100.2: ICMP echo request, id 30218, seq 2, length 64
10:22:21.054614 IP 10.0.100.2 &gt; 10.0.100.1: ICMP echo reply, id 30218, seq 2, length 64
</code></pre><p>One of the clients is using ID 999, but the other one is using ID 30218. Where did that second ID come from? Time to go to the Linux source code.</p><h2 id="netfilter-conntrack-and-nat">Netfilter, conntrack, and NAT</h2><p>The kernel subsystem responsible for implementing iptables rules is called “netfilter.” The iptables MASQUERADE rule is responsible for NAT’ing packets, so the NAT implementation for ICMP must be in netfilter. Grep’ing through the <code>net/netfilter</code> directory in the Linux repository, I found a few places where the ICMP “id” field is used:</p><ul><li>In “nf_nat_core.c” the function <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L580"><code>nf_nat_setup_info</code></a> calls <code>get_unique_tuple</code>, which calls <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L380"><code>nf_nat_l4proto_unique_tuple</code></a>. There is a switch statement with a case for <code>IPPROTO_ICMP</code>, and a reference to <code>&amp;tuple-&gt;src.u.icmp.id</code>.</li><li>In “nf_nat_proto.c” the function <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_proto.c#L419"><code>nf_nat_manip_pkt</code></a> calls <code>nf_nat_ipv4_manip_pkt</code>, which calls <code>l4proto_manip_pkt</code>. When the protocol is <code>IPPROTO_ICMP</code> this calls <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_proto.c#L223"><code>icmp_manip_pkt</code>, which has a line <code>hdr-&gt;un.echo.id = tuple-&gt;src.u.icmp.id</code></a>.</li></ul><p>In order to NAT packets, netfilter needs to store something called a <em>connection</em>. For TCP, not surprisingly, this represents the TCP connection, uniquely identified by the 5-tuple (src IP, src port, dst IP, dst port, L4 protocol). However, in netfilter the term “connection” has a broader meaning: it can correlate outgoing and incoming packets <em>even for connectionless protocols</em> like UDP and ICMP.</p><p>Examining the <a href="https://elixir.bootlin.com/linux/v6.2.9/source/include/net/netfilter/nf_conntrack.h#L75"><code>nf_conn</code></a> data structure:</p><ul><li><code>nf_conn</code> has a field <code>struct nf_conntrack_tuple_hash tuplehash[IP_CT_DIR_MAX]</code>. There are two tuple hashes, one for outgoing packets and one for incoming packets (<code>IP_CT_DIR_ORIGINAL</code> and <code>IP_CT_DIR_REPLY</code> respectively).</li><li>Each <code>nf_conntrack_tuple_hash</code> has a field <code>nf_conntrack_tuple tuple</code> with the tuple uniquely identifying the connection.</li><li>Each tuple is split into a part that can be manipulated, called <code>src</code>, and a part that is immutable called <code>dst</code>.<ul><li><code>src</code> has type <code>struct nf_conntrack_man</code>, which has an IP address (<code>union nf_inet_addr u3</code>) and protocol-specific fields (<code>union nf_conntrack_man_proto u</code>). For ICMP, the protocol-specific field is <code>__be16 id</code>.</li><li><code>dst</code> has the unmodified IP address as well as the ICMP <code>type</code> and <code>code</code> fields.</li></ul></li></ul><p>Connection tracking and NAT are closely related. To NAT a packet, netfilter needs to “remember” how it modified the outgoing packet so it can reverse those modifications on the reply packet. It does so by representing the modifications in a connection.</p><p>For ICMP, I believe netfilter works like this:</p><ol><li>When natbox receives an ICMP echo, <code>nf_nat_setup_info</code> creates a new connection. This is where it chooses whether it needs to rewrite the source IP address and/or the ICMP id field on the outgoing packet.</li><li>For each incoming and outgoing ICMP packet, the function <code>nf_nat_manip_pkt</code> sets the source IP and ICMP id field to whatever is set in the connection. The argument <code>ip_conntrack_dir dir</code> determines whether the packet is treated as an outgoing echo (rewrite the source IP) or incoming reply (rewrite the destination IP).</li></ol><p><a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L580"><code>nf_nat_setup_info</code></a> is responsible for choosing the ICMP ID for the NAT’d packets. The NAT rewrites happen in <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L504"><code>get_unique_tuple</code></a>.</p><p>Here are the key steps:</p><ol><li>On <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L541">line 541</a>, <code>find_best_ips_proto(zone, tuple, range, ct, maniptype)</code> rewrites the source IP address.</li><li>On <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L548">lines 548-560</a>, <code>nf_nat_used_tuple(tuple, ct)</code> checks whether the tuple is already being used; if not, the current tuple is returned. This explains why when two clients use <em>different</em> ICMP IDs, those IDs are preserved in the NAT’d packets.</li><li>On <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L563">line 563</a>, <code>nf_nat_l4proto_unique_tuple</code> is called to perform protocol-specific NAT (in this case manipulating the ICMP ID field).</li><li>In <code>nf_nat_l4proto_unique_tuple</code> <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L393">lines 393-403</a> set <code>keyptr = &amp;tuple-&gt;src.u.icmp.id</code> to choose the ICMP ID field as the “key” to NAT, then jumps to <code>find_free_id</code> at the end of the function.</li><li><code>find_free_id</code> on <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L471">line 471</a> calls <code>get_random_u16()</code> to generate a random ID, adjusts the value into the range<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup> of valid ICMP IDs (on <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L485">line 485</a>), then checks if it’s used (another call to <code>nf_nat_used_tuple</code> on <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L486">line 486</a>).</li><li>If a tuple with the random ID not yet used, then it gets returned. Otherwise, netfilter searches for an unused ID from progressively smaller ranges starting at random offsets (<a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L483">lines 483-494</a>).</li><li>If an unused tuple cannot be found within a maximum number of attempts, then <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L491"><code>nf_nat_l4_proto_unique_tuple</code> returns</a>, leaving the duplicate ID in the connection. Later, <a href="https://elixir.bootlin.com/linux/v6.2.9/source/net/netfilter/nf_nat_core.c#L502">__nf_conntrack_confirm will detect the duplicate and drop the packet</a>.</li></ol><h2 id="bpftrace">bpftrace</h2><p>To verify my understanding of the netfilter code, I used a tool called <a href="https://github.com/iovisor/bpftrace/"><code>bpftrace</code></a>.<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup> After much tinkering, I ended up with this program to trace the kernel functions <code>nf_nat_setup_info</code> and <code>nf_nat_manip_pkt</code>:</p><pre tabindex="0"><code>// from linux/socket.h
#define AF_INET		2	/* Internet IP Protocol 	*/

// from net/netfilter/nf_nat.h
enum nf_nat_manip_type {
	NF_NAT_MANIP_SRC,
	NF_NAT_MANIP_DST
};

// from include/uapi/linux/netfilter/nf_conntrack_tuple_common.h
// Use #define instead of enum so we can use these in bpftrace array indices.
#define IP_CT_DIR_ORIGINAL 0
#define IP_CT_DIR_REPLY 1

kprobe:nf_nat_setup_info {
	// nf_nat_setup_info gets called twice, once in the prerouting chain
	// to modify the destination (actually a no-op), and once in the output
	// chain to modify the source (which is what we care about).
	$mtype = arg2;
	if ($mtype != NF_NAT_MANIP_SRC) {
		return;
	}

	$conn = (struct nf_conn *)arg0;
	if ($conn-&gt;tuplehash[IP_CT_DIR_ORIGINAL].tuple.dst.protonum == IPPROTO_ICMP) {
		@setupConn[tid] = $conn;
	}
}

kretprobe:nf_nat_setup_info {
	if (@setupConn[tid] == none) {
		return;
	}
	$conn = (struct nf_conn *)@setupConn[tid];
	$origTuple = $conn-&gt;tuplehash[IP_CT_DIR_ORIGINAL].tuple;
	$replyTuple = $conn-&gt;tuplehash[IP_CT_DIR_REPLY].tuple;
	printf("nf_nat_setup_info: origTuple.addr=%s, origTuple.id=%d, replyTuple.addr=%s, replyTuple.id=%d\n",
		ntop(AF_INET, $origTuple.src.u3.ip),
		bswap($origTuple.src.u.icmp.id),
		ntop(AF_INET, $replyTuple.src.u3.ip),
		bswap($replyTuple.src.u.icmp.id));
	delete(@setupConn[tid]);
}

kprobe:nf_nat_manip_pkt {
	$mtype = arg2;
	$skb = (struct sk_buff *)arg0;
	$iphdr = (struct iphdr *)$skb-&gt;data;
	$icmphdr = (struct icmphdr *)($skb-&gt;data + $iphdr-&gt;ihl * 4);
	printf("nf_nat_manip_pkt before: mtype=%d, saddr=%s, daddr=%s, icmp.type=%d, icmp.id=%d\n",
		$mtype,
		ntop(AF_INET, $iphdr-&gt;saddr),
		ntop(AF_INET, $iphdr-&gt;daddr),
		bswap($icmphdr-&gt;type),
		bswap($icmphdr-&gt;un.echo.id));
	@manipType[tid] = $mtype;
	@manipSkb[tid] = $skb
}

kretprobe:nf_nat_manip_pkt {
	$mtype = @manipType[tid];
	$skb = @manipSkb[tid];
	$iphdr = (struct iphdr *)$skb-&gt;data;
	$icmphdr = (struct icmphdr *)($skb-&gt;data + $iphdr-&gt;ihl * 4);
	printf("nf_nat_manip_pkt after: mtype=%d, saddr=%s, daddr=%s, icmp.type=%d, icmp.id=%d\n",
		$mtype,
		ntop(AF_INET, $iphdr-&gt;saddr),
		ntop(AF_INET, $iphdr-&gt;daddr),
		bswap($icmphdr-&gt;type),
		bswap($icmphdr-&gt;un.echo.id));
	delete(@manipType[tid]);
	delete(@manipSkb[tid]);
}
</code></pre><p>The important parts are:</p><ul><li><p><code>kprobe</code> traces when a kernel function is called, and <code>kretprobe</code> traces when the function returns.</p></li><li><p><code>kretprobe</code> cannot access function arguments directly, so store the arguments in a BPF map on entry and retrieve them on exit. For example, <code>kprobe:nf_nat_setup_info</code> writes the netfilter connection argument to <code>@setupConn[tid]</code> (a BPF map keyed by thread ID). Then <code>kretprobe:nf_nat_setup_info</code> reads the connection from the map and deletes the entry.</p></li><li><p><code>struct sk_buff</code> is how the Linux kernel <a href="https://docs.kernel.org/networking/skbuff.html">represents a packet</a>.</p></li><li><p><code>bswap</code> reverses byte order, which is used to convert from big endian (network byte order) to little endian.</p></li><li><p><code>ntop</code> returns the string representation of an IP address.</p></li><li><p>The BPF program can reference kernel data structures like <code>sk_buff</code> and <code>nf_conn</code> without including any headers. This is the magic of BPF Type Format (BTF) available in recent versions of the Linux kernel.</p></li><li><p>I tested this program on Linux kernel version 6.2.9. It may or may not work on other kernel versions.</p></li></ul><p>To execute the program, I saved the above code to a file called <code>trace.bt</code> then ran <code>bpftrace trace.bt</code> as root. This is what the output looks like with two clients pinging the server using the same ICMP ID (999):</p><pre tabindex="0"><code>$ bpftrace trace.bt
Attaching 4 probes...
nf_nat_setup_info: origTuple.addr=192.168.99.1, origTuple.id=999, replyTuple.addr=10.0.100.2, replyTuple.id=999
nf_nat_manip_pkt before: mtype=0, saddr=192.168.99.1, daddr=10.0.100.2, icmp.type=8, icmp.id=999
nf_nat_manip_pkt after: mtype=0, saddr=10.0.100.1, daddr=10.0.100.2, icmp.type=8, icmp.id=999
nf_nat_manip_pkt before: mtype=1, saddr=10.0.100.2, daddr=10.0.100.1, icmp.type=0, icmp.id=999
nf_nat_manip_pkt after: mtype=1, saddr=10.0.100.2, daddr=192.168.99.1, icmp.type=0, icmp.id=999
nf_nat_setup_info: origTuple.addr=192.168.99.2, origTuple.id=999, replyTuple.addr=10.0.100.2, replyTuple.id=32809
nf_nat_manip_pkt before: mtype=0, saddr=192.168.99.2, daddr=10.0.100.2, icmp.type=8, icmp.id=999
nf_nat_manip_pkt after: mtype=0, saddr=10.0.100.1, daddr=10.0.100.2, icmp.type=8, icmp.id=32809
nf_nat_manip_pkt before: mtype=1, saddr=10.0.100.2, daddr=10.0.100.1, icmp.type=0, icmp.id=32809
nf_nat_manip_pkt after: mtype=1, saddr=10.0.100.2, daddr=192.168.99.2, icmp.type=0, icmp.id=999
</code></pre><p>The output shows that <code>nf_nat_setup_info</code> gets called twice, once for each client.<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup> For the first client (IP 192.168.99.1), both the original and reply tuple have the ICMP ID sent by the client (999). For the second client (IP 192.168.99.2), however, the reply tuple has been <em>rewritten</em> to ID 32809. For both clients, the source IP address has been rewritten to the IP of the natbox (10.0.100.2).</p><p>Once <code>nf_nat_setup_info</code> has created the connection, <code>nf_nat_manip_pkt</code> modifies the echo and echo reply ICMP packets. For the echo packet, <code>mtype=0</code> (<code>NF_NAT_MANIP_SRC</code>) because the source IP is rewritten. Likewise, the reply packet has <code>mtype=1</code> (<code>NF_NAT_MANIP_DST</code>) to rewrite the destination IP of the incoming reply back to the original client IP.</p><h2 id="conclusion">Conclusion</h2><p>So that is how Linux NATs a ping! In the end, maybe the answer isn’t very surprising – and, in fact, I discovered much later that most of this behavior is documented in the <a href="https://netfilter.org/documentation/HOWTO/netfilter-hacking-HOWTO-4.html#ss4.4">Netfilter Hacking HOWTO</a>. But it was a fun journey, and it’s nice to know exactly where this magic happens in the code.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Google no longer offers new domain registrations (142 pts)]]></title>
            <link>https://domains.google/</link>
            <guid>37455574</guid>
            <pubDate>Sun, 10 Sep 2023 13:20:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://domains.google/">https://domains.google/</a>, See on <a href="https://news.ycombinator.com/item?id=37455574">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      <p><span aria-level="2" role="heading">
          An update on domains
    </span>
      </p>
      <p><span>
          Google no longer offers new domain registrations, but try&nbsp;Squarespace
    </span></p>
      <div>
            <p><a href="https://domains.squarespace.com/?channel=bd&amp;subchannel=google-domain&amp;campaign=&amp;subcampaign=&amp;source=google_domain_referral&amp;utm_source=google_domain_referral&amp;utm_medium=bd&amp;utm_content=google-domain&amp;utm_term=&amp;utm_campaign=" rel="noreferrer noopener" target="_blank" data-ga4-event="dahlia_select" data-ga4-eventparams="{&quot;contentType&quot;: &quot;cta&quot;, &quot;moduleName&quot;: &quot;purchase domain squarespace&quot;, &quot;itemId&quot;: &quot;purchase domain squarespace - hero&quot;}">
      <span>
          Get a new domain from&nbsp;Squarespace
    </span>
  </a>

      </p></div>
      <p><span>
          On September 7, 2023 Squarespace acquired all domain registrations and related customer accounts from Google Domains. Customers and domains will be transitioned over the next few months. <a href="https://support.google.com/domains/answer/13689670">Learn&nbsp;more.</a>
    </span></p>
      <div>
            <p><a href="https://domains.google.com/registrar" rel="noreferrer noopener" target="_blank" data-ga4-event="dahlia_select" data-ga4-eventparams="{&quot;contentType&quot;: &quot;link&quot;, &quot;moduleName&quot;: &quot;manage domains&quot;, &quot;itemId&quot;: &quot;manage domains - hero&quot;}">
      Already a Google Domains customer? Manage&nbsp;your&nbsp;current&nbsp;domains
  </a>

      </p></div>
      <p><span>
          This is an affiliate link. If you make a purchase from Squarespace, we may earn a&nbsp;commission.
    </span>
      </p>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Earth had hottest 3-months on record; unprecedented sea temps & extreme weather (349 pts)]]></title>
            <link>https://public.wmo.int/en/media/press-release/earth-had-hottest-three-month-period-record-unprecedented-sea-surface</link>
            <guid>37455534</guid>
            <pubDate>Sun, 10 Sep 2023 13:14:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://public.wmo.int/en/media/press-release/earth-had-hottest-three-month-period-record-unprecedented-sea-surface">https://public.wmo.int/en/media/press-release/earth-had-hottest-three-month-period-record-unprecedented-sea-surface</a>, See on <a href="https://news.ycombinator.com/item?id=37455534">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p><strong>Bonn and Geneva, 6 September 2023 (ECMWF and WMO)</strong> -&nbsp;Earth just had its hottest three months on record, according to the European Union-funded&nbsp;<a href="https://wmo.us9.list-manage.com/track/click?u=618614864060486033e4590d6&amp;id=fa16212f5d&amp;e=3e6d95b4e5">Copernicus Climate Change Service (C3S)</a> implemented by ECMWF. Global sea surface temperatures are at unprecedented highs for the third consecutive month and Antarctic sea ice extent remains at a record low for the time of year.</p>

<p>It was the hottest August on record – by a large margin – and the second hottest ever month after July 2023, according to the Copernicus Climate Change Service ERA 5 dataset. August as a whole is estimated to have been around 1.5°C warmer than the preindustrial average for 1850-1900, <a href="https://climate.copernicus.eu/summer-2023-hottest-record">according to the C3S monthly climate bulletin.</a></p>

<p>The year so far (January to August) is the second warmest on record behind 2016, when there was a powerful warming El Niño event.</p>

<p>August as a whole saw the highest global monthly average sea surface temperatures on record across all months, at 20.98°C. Temperatures exceeded the previous record (March 2016) every single day in August.</p>

<p>Antarctic sea ice extent remained at a record low level for the time of year, with a monthly value 12% below average, by far the largest negative anomaly for August since satellite observations began in the late 1970s. Arctic sea ice extent was 10% below average, but well above the record minimum of August 2012.</p>

<p>WMO consolidates data from C3S and five other international datasets for its climate monitoring activities and its State of the Climate reports<em>.&nbsp;</em></p>

<p>A report in May from WMO and the UK's Met Office predicted&nbsp;that there is a 98% likelihood that at least one of the next five years will be the warmest on record and a 66% chance of&nbsp;temporarily&nbsp;exceeding 1.5°C above the 1850-1900 average for at least one of the five years.&nbsp;This does not mean that we will permanently exceed the 1.5°C level specified in the Paris Agreement which refers to long-term warming over many years.</p>



<p>&nbsp;&nbsp;<img alt="red chart on black background" title="Copernicus ECMWF: warmest months on record" data-delta="1" typeof="foaf:Image" src="https://ane4bf-datap1.s3-eu-west-1.amazonaws.com/wmocms/s3fs-public/ckeditor/files/6b8d528f-36ee-43c2-920e-44fec02063f9.png?ni8DG4pTlOSP8XsKWzThg.Qp8pa0Rrfi" width="1893" height="1225"></p>



<p><strong>Commentary</strong></p>

<p>“Our planet has just endured a season of simmering -- the hottest summer on record. Climate breakdown has begun.&nbsp;Scientists have long warned what our fossil fuel addiction will unleash. Surging temperatures demand a surge in action. Leaders must turn up the heat now for climate solutions. We can still avoid the worst of climate chaos – and we don’t have a moment to lose,&nbsp;“<strong> <em>said UN Secretary-General António Guterres.</em></strong><em>&nbsp;</em></p>

<p>“The northern hemisphere just had a summer of extremes – with repeated heatwaves fuelling devastating wildfires, harming health, disrupting daily lives and wreaking a lasting toll on the environment. In the southern hemisphere Antarctic sea ice extent was literally off the charts, and the global sea surface temperature was once again at a new record. It is worth noting that this is happening BEFORE we see the full warming impact of the El Niño event, which typically plays out in the second year after it develops” s<em>ays <strong>World Meteorological Organization Secretary-General Prof. Petteri Taalas.</strong></em></p>

<p>“Eight months into 2023, so far we are experiencing the second warmest year to date, only fractionally cooler than 2016, and August was estimated to be around 1.5°C warmer than pre-industrial levels. What we are observing, not only new extremes but the persistence of these record-breaking conditions, and the impacts these have on both people and planet, are a clear consequence of the warming of the climate system,” <em>comments <strong>Carlo Buontempo, Director of the Copernicus Climate Change Service, ECMWF.</strong></em></p>



<p>&nbsp;<img alt="red, white and blue chart on black background " title="Copernicus ECMWF sea surface temperature anamolies" data-delta="3" typeof="foaf:Image" src="https://ane4bf-datap1.s3-eu-west-1.amazonaws.com/wmocms/s3fs-public/ckeditor/files/timeseries_era5_daily_sst_60S-60N_1940-2023_0.png?VQ1ajBah_dEP8011aB6lGYOICJWwlNp1" width="2550" height="1650"></p>



<p>Notes for Editors</p>

<p><em>The World Meteorological Organization is the UN system's authoritative voice on weather climate and water.</em></p>

<p><em>C3S, implemented by the European Centre for Medium-Range Weather Forecasts (ECMWF) on behalf of the European Commission, routinely monitors climate and has also been closely following recent development of global air and sea surface temperatures. The monthly report and associated assets is <a href="https://climate.copernicus.eu/summer-2023-hottest-record">here</a>.</em></p>

<p>More information on the sea surface temperatures in August 2023 can be found&nbsp;<a data-auth="NotApplicable" data-linkindex="7" href="https://climate.copernicus.eu/record-high-global-sea-surface-temperatures-continue-august?utm_source=press&amp;utm_medium=referral&amp;utm_campaign=CBaugust23" rel="noopener noreferrer" target="_blank">here.</a></p>

<p>More information about climate variables in August and climate updates of previous months as well as high-resolution graphics and the video can be downloaded&nbsp;<a data-auth="NotApplicable" data-linkindex="8" href="https://climate.copernicus.eu/climate-bulletins?utm_source=press&amp;utm_medium=referral&amp;utm_campaign=CBaugust23" rel="noopener noreferrer" target="_blank">here</a>.</p>

<p>Answers to frequently asked questions regarding temperature monitoring can be found&nbsp;<a data-auth="NotApplicable" data-linkindex="9" href="https://climate.copernicus.eu/temperature-qas?utm_source=press&amp;utm_medium=referral&amp;utm_campaign=CBaugust23" rel="noopener noreferrer" target="_blank">here</a>.</p>








  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Is air conditioning making cities hotter? (142 pts)]]></title>
            <link>https://www.euronews.com/green/2023/08/30/fact-check-is-air-conditioning-making-cities-hotter</link>
            <guid>37455382</guid>
            <pubDate>Sun, 10 Sep 2023 12:51:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.euronews.com/green/2023/08/30/fact-check-is-air-conditioning-making-cities-hotter">https://www.euronews.com/green/2023/08/30/fact-check-is-air-conditioning-making-cities-hotter</a>, See on <a href="https://news.ycombinator.com/item?id=37455382">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>
        A study found that waste heat generated by a city’s worth of air conditioners during a heatwave can raise the outside temperature by more than 2 degrees Celsius. 
    </p><div><p>As Europe faces more frequent and more intense heatwaves, you might have considered taking the plunge and buying an air conditioning unit.</p><p>But while you'd be forgiven for thinking it’s cooling things down, it’s actually doing the exact opposite, it’s heating things up.</p><p>In France, the use of <a href="https://www.euronews.com/green/2023/08/02/europe-reluctantly-turns-to-air-conditioning-as-heatwaves-bite-data-shows"><strong>air conditioning</strong></a> has become the subject of debate after left-wing MP Mathilde Panot said during an interview, “the temperature of a city can be increased by up to 2 degrees Celsius due to the use of AC [air conditioning].”</p><p>Was she right?</p><h2>Where did the French MP get this statistic from?</h2><p>It comes from a study published in 2020 that was based on a scenario in which air conditioners are used in all buildings of a city like Paris to maintain an interior temperature of 23 degrees Celsius during a heatwave.&nbsp;</p><p>Temperature increases due to <a href="https://www.euronews.com/green/2023/08/28/air-conditioning-use-has-more-than-doubled-in-europe-since-1990"><strong>air conditioning</strong></a> (AC) use "depend on the time of day and the characteristics of the heatwave, mainly its intensity", according to the study.</p><p>The scientists used the deadly 2003 heatwave which killed more than 14,000 people in France to model their predictions.&nbsp;</p><p>They found that, after "Nine days of a heat wave similar to the one of 2003," the systematic use of AC during that time would increase air temperature "by up to 2.4°C".</p><h2>Why does air conditioning increase the temperature?</h2><p>How is that possible? Because air conditioners work like a <a href="https://www.euronews.com/green/2023/02/20/heat-pumps-avoided-8m-tonnes-of-co2-emissions-in-europe-last-year-which-country-sold-the-m"><strong>heat pump</strong></a>, cooling a room by releasing hot air outside.&nbsp;</p><p>Air conditioners use more electricity than any other appliance in the home. They consume 10% of global electricity and leak harmful planet-warming gases into the atmosphere.</p><p>The link between AC use and increasing temperatures in cities has already been documented.&nbsp;</p><p>According to research published in 2014 in the Journal of Geophysical Research: Atmospheres, excess heat generated by a city’s worth of air conditioners can increase the outside temperature by 1 to 1.5 degrees Celsius at night.</p><p>And as cities are only likely to grow hotter as a result of climate change, that means that citizens are likely to demand more indoor air conditioning.</p><p>Heatwaves that would have been a once-in-a-decade event in the 1800s iare now more intense and happen nearly three times as often, according to the <a href="https://www.euronews.com/green/2023/03/21/how-can-ipccs-report-be-turned-into-action-politicians-and-environmentalists-weigh-in"><strong>latest IPCC report</strong></a>.</p><h2>Air conditioner use is set to triple worldwide by 2050</h2><p>In 2019, 20% of EU households owned an AC unit, according to the European Environment Agency<a href="https://www.eea.europa.eu/publications/cooling-buildings-sustainably-in-europe"><strong>.</strong></a></p><p>The number of air conditioners worldwide is predicted to rise from 1.6 billion units today to 5.6 billion units by the middle of this century, according to a 2018 report issued by the International Energy Agency.</p><p>By 2050 all the air conditioners in the world would use as much electricity as <a href="https://www.euronews.com/green/2023/08/29/air-pollution-is-deadlier-than-smoking-new-study-finds"><strong>China</strong></a> does for all activities today, according to the report's predictions.&nbsp;</p><p>What are some alternatives to air conditioners? The scientists behind the 2020 study suggest other options to help cool down cities: including creating more green spaces, insulating buildings, and better advising the population on how to keep cool during a heatwave.</p><p>If all of these measures are taken, the study claims these actions could significantly "cool outdoor air temperatures up to 4.2°C at night".</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The molecule DIM reduces biofilms causing dental plaque: study (112 pts)]]></title>
            <link>https://scitechdaily.com/90-reduction-scientists-discover-natural-molecule-that-eradicates-plaques-and-cavities/</link>
            <guid>37455106</guid>
            <pubDate>Sun, 10 Sep 2023 12:11:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://scitechdaily.com/90-reduction-scientists-discover-natural-molecule-that-eradicates-plaques-and-cavities/">https://scitechdaily.com/90-reduction-scientists-discover-natural-molecule-that-eradicates-plaques-and-cavities/</a>, See on <a href="https://news.ycombinator.com/item?id=37455106">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div id="attachment_228158"><p><img aria-describedby="caption-attachment-228158" decoding="async" fetchpriority="high" src="https://scitechdaily.com/images/Dental-Cavities-Chewing-Teeth.jpg?ezimgfmt=rs%3Adevice%2Frscb2-1" alt="Dental Cavities Chewing Teeth" width="777" height="522" srcset="" sizes="" ezimgfmt="rs rscb2 src ng ngcb2 srcset" loading="eager" importance="high"></p><p id="caption-attachment-228158">Scientists have discovered that the molecule DIM reduces biofilms causing dental plaque by 90%. Its addition to toothpaste and mouthwash could revolutionize dental hygiene.</p></div><h3>3,3′-Diindolylmethane (DIM) decreased the <em>Streptococcus mutans</em> biofilm, a leading contributor to plaque and cavities, by 90%.</h3><p>A significant portion of the global population experiences persistent issues with dental plaque and cavities or will face them at some time. While toothpaste, mouthwash, and routine dental visits help in prevention, there’s always room for improvement.</p><p>Researchers from <a href="https://scitechdaily.com/tag/ben-gurion-university-of-the-negev/amp/">Ben-Gurion University of the Negev</a>, in collaboration with teams from Sichuan University and the <a href="https://scitechdaily.com/tag/national-university-of-singapore/">National University of Singapore</a>, have identified that 3,3′-Diindolylmethane (DIM) – a naturally occurring molecule also referred to as bisindole – can reduce biofilms responsible for plaque and cavities by a remarkable 90%.</p><p>The molecule is also found to have anti-carcinogenic properties.</p><p>Their findings were recently published in the journal <em>Antibiotics.</em></p><p>Your mouth is a great reservoir for bacteria such as&nbsp;<em>S.</em>&nbsp;<em>mutans</em>, which is believed to be one of the primary actors in dental cavities.&nbsp;<em>S. mutans</em> grows in the moist and sugary atmosphere of your mouth after food in a biofilm that coats your teeth. Biofilm generates plaque, attacks enamel, and causes cavities. The scientists found that the bisindole (DIM) disrupted that biofilm by 90% and therefore the bacterium was not given a chance to grow.</p><p>“The molecule, which was found to have low toxicity, could be added to toothpastes and mouthwashes to greatly improve dental hygiene,” says lead author Prof. Ariel Kushmaro of the Avram and Stella Goldstein-Goren Department of Biotechnology Engineering. He is also a member of the Ilse Katz Institute for Nanoscale Science and Technology and the Goldman Sonnenfeldt School of Sustainability and Climate Change.</p><p>Reference: “3,3′-Diindolylmethane (DIM): A Potential Therapeutic Agent against Cariogenic <em>Streptococcus mutans</em> Biofilm” by Yifat Baruch, Karina Golberg, Qun Sun, Karina Yew-Hoong Gin, Robert S. Marks and Ariel Kushmaro, 6 June 2023, <em>Antibiotics</em>.<br><a href="https://doi.org/10.3390/antibiotics12061017">DOI: 10.3390/antibiotics12061017</a></p><p>The study was conducted with his student Yifat Baruch, and Dr. Karina Golberg, as well as Prof. Robert S. Marks of the same department and Qun Sun<sup>&nbsp;</sup>of Sichuan University, and Karina Yew-Hoong Gin<sup>&nbsp;</sup>of the National University of Singapore.<span data-ez-ph-id="608"></span></p><p>The research was supported by the International Research and Development Program of Sichuan (2019YFH0113) and SMART innovation grant ING-000398 (Singapore).</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[“Make” as a Static Site Generator (2022) (253 pts)]]></title>
            <link>https://www.karl.berlin/static-site.html</link>
            <guid>37454853</guid>
            <pubDate>Sun, 10 Sep 2023 11:30:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.karl.berlin/static-site.html">https://www.karl.berlin/static-site.html</a>, See on <a href="https://news.ycombinator.com/item?id=37454853">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

<p>Static site generators are in fashion for good reasons. The resulting pages are easy to host, fast and extremely low on maintenance while being sufficient for many use cases.
As I learned when <a href="https://www.karl.berlin/blog.html">setting up my blog</a>, writing a simple script myself is faster and more satisfying than learning one of the other site builders and customizing it to my needs.
This time, I only need a plain site without automatically updated timestamps or an RSS-feed, so I can go even simpler than by blog script.</p>
<h2>Basic setup</h2>
<p>To get the site into a working state, I require the following functionality:</p>

<ul>
<li>All input files reside in the <code>source</code> directory, in the same layout as I want them in the output.</li>
<li>During processing, add a header to all HTML files.</li>
<li>Copy all other files to the <code>build</code> directory as they are.</li>
</ul>
<p>Each of these points results in one rule in the Makefile:</p>
<pre><code># The `build` target depends on all output files in the `build` directory. It
# does not do anything by itself, but causes one of the following rules to be
# applied for each file.
build: $(patsubst source/%,build/%,$(shell find source -type f))

# For each .html file do `cat header.html $input &gt; $output`.
build/%.html: source/%.html header.html Makefile
	@mkdir -p $(dir $@)
	cat header.html $&lt; &gt; $@

# Copy all other files without changes.
build/%: source/%
	cp $&lt; $@
</code></pre>
<p>With a corresponding <code>header.html</code> and these rules in place, calling <code>make build</code> will create a <code>build</code> directory that can be browsed locally or uploaded to any web server.</p>
<h2>Variations</h2>
<p>This is really all you need, but the real strength of this approach is that it is so simple, that you can trivially extend it to fit different needs. Let me show you a few examples!</p>
<h3>Mark Current Page</h3>
<p>It is helpful to highlight the current page in the navigation so that the visitor sees where he is within the site at a glance. To do this, we search for the link within the navigation and replace the link with a highlighted version. The specifics vary depending on your markup. I'm using the following code to add the <code>current</code> class to the link tag:</p>
<pre><code>build/%.html: source/%.html header.html Makefile
	@mkdir -p $(dir $@)
	sed -E 's|(href="$(subst source,,$&lt;))|class="current" \1|' header.html | cat - $&lt; &gt; $@
</code></pre>
<h3>Generate Page From Markdown</h3>
<p>If you dislike writing HTML or if you have existing content in markdown format, you can pipe your markdown content through a markdown-to-HTML converter of you choice (I like <a href="https://github.com/karlb/smu">smu</a>).</p>
<pre><code>build/%.html: source/%.html header.html Makefile
	@mkdir -p $(dir $@)
	smu $&lt; | cat header.html - &gt; $@
</code></pre>
<p>Since we still assume that <code>build/foo.html</code> is built from <code>source/foo.html</code>, you should keep the <code>.html</code> suffix for the markdown files or modify the rules to look for <code>.md</code> files as input.</p>
<h2>Little Helpers</h2>
<p>You can not only modify the site generation itself. Convenience features can also be added as additional make targets.</p>
<h3>Serve Site Locally</h3>
<p>Not all sites can be accurately previewed by opening the local files in your browser.
The most common reason for this is using absolute links instead of relative ones.
In those cases, you will want to run a small test web server locally to preview your site.
Python is already installed on many systems and comes with a web server this is suitable for the task.</p>
<pre><code>serve:
	python -m http.server -d build
</code></pre>
<h3>Rebuild on Change</h3>
<p>If you work a lot on your site, manually rebuilding after each change is a hassle.
Just use <a href="https://eradman.com/entrproject/"><code>entr</code></a> (or <a href="https://linux.die.net/man/1/inotifywait"><code>inotifywait</code></a> if you want to avoid the dependency) to rebuild automatically when a file in the source directory changes.</p>
<pre><code>watch:
	find source header.html Makefile | entr make build
</code></pre>
<h3>Upload to GitHub Pages</h3>
<p>I store my repositories on GitHub, so using GitHub Pages to host the resulting HTML is a natural choice.
Getting the commands just right so that you don't have to care about git details when publishing is a bit tricky, but easy enough in the end.
The approach is based on <a href="https://sangsoonam.github.io/2019/02/08/using-git-worktree-to-deploy-github-pages.html">Sangsoo Nam's post</a>.</p>
<pre><code>deploy:
	git worktree add public_html gh-pages
	cp -rf build/* public_html
	cd public_html &amp;&amp; \
	  git add --all &amp;&amp; \
	  git commit -m "Deploy to github pages" &amp;&amp; \
	  git push origin gh-pages
	git worktree remove public_html
</code></pre>
<h2>Summary</h2>
<p>Having your own static site generator in only six simple lines in a Makefile is great!
There are no exotic dependencies, nothing to maintain and you can quickly adapt it to your needs.
A page I built using this approach is available at <a href="https://github.com/karlb/astridbartel.de">https://github.com/karlb/astridbartel.de</a> and can serve as a real world example.</p>
<small>Written on 2022-06-14.</small>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I wired up my bike's GPS to order me pizza during a gravel race (287 pts)]]></title>
            <link>https://steele.blue/geofence-pizza-ordering/</link>
            <guid>37454766</guid>
            <pubDate>Sun, 10 Sep 2023 11:12:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://steele.blue/geofence-pizza-ordering/">https://steele.blue/geofence-pizza-ordering/</a>, See on <a href="https://news.ycombinator.com/item?id=37454766">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>As harvest season begins here in the Midwest, I once again celebrate by grinding Nebraska gravel at the <a href="https://www.gravel-worlds.com/the-long-voyage">Gravel Worlds Long Voyage</a> bike race.
As in previous years (<a href="https://steele.blue/gravel-worlds">2021</a>) (<a href="https://steele.blue/serverless-bike-gps">2022</a>), I spent more time writing code for a marginally-useful project than I did training. But hey, I finished!</p>
<p><span>
      <a href="https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/b4e28/matt-gw.jpg" target="_blank" rel="noopener">
    <span></span>
  <picture>
          <source srcset="https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/3e828/matt-gw.webp 192w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/e6f2f/matt-gw.webp 384w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/8b983/matt-gw.webp 768w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/b2d4b/matt-gw.webp 1152w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/0abaa/matt-gw.webp 1536w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/11d0e/matt-gw.webp 4005w" sizes="(max-width: 768px) 100vw, 768px" type="image/webp">
          <source srcset="https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/7809d/matt-gw.jpg 192w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/4ecad/matt-gw.jpg 384w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/212bf/matt-gw.jpg 768w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/5ef17/matt-gw.jpg 1152w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/ac99c/matt-gw.jpg 1536w,
https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/b4e28/matt-gw.jpg 4005w" sizes="(max-width: 768px) 100vw, 768px" type="image/jpeg">
          <img src="https://steele.blue/static/9edd5fd38a7e5307edffcc6c56066780/212bf/matt-gw.jpg" alt="Matt riding on Gravel Worlds" title="" loading="lazy" decoding="async">
        </picture>
  </a>
    </span></p>
<h2>Fueled by Pizza</h2>
<p>My goal this year involved optimizing my food choices during the race: pizza from <a href="https://www.caseys.com/">Casey's General Store</a>.
These convenience stores are S-Tier options when out in the middle of nowhere.
In addition to snacks and drinks, most Casey's have a kitchen, and have pretty decent grab 'n go slices of pizza.</p>
<p><span>
      <a href="https://steele.blue/static/7a9200edb092ed758a6ad507f4287d98/6aca1/self-serve-pizza.jpg" target="_blank" rel="noopener">
    <span></span>
  <picture>
          <source srcset="https://steele.blue/static/7a9200edb092ed758a6ad507f4287d98/3e828/self-serve-pizza.webp 192w,
https://steele.blue/static/7a9200edb092ed758a6ad507f4287d98/e6f2f/self-serve-pizza.webp 384w,
https://steele.blue/static/7a9200edb092ed758a6ad507f4287d98/c1dc5/self-serve-pizza.webp 650w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp">
          <source srcset="https://steele.blue/static/7a9200edb092ed758a6ad507f4287d98/7809d/self-serve-pizza.jpg 192w,
https://steele.blue/static/7a9200edb092ed758a6ad507f4287d98/4ecad/self-serve-pizza.jpg 384w,
https://steele.blue/static/7a9200edb092ed758a6ad507f4287d98/6aca1/self-serve-pizza.jpg 650w" sizes="(max-width: 650px) 100vw, 650px" type="image/jpeg">
          <img src="https://steele.blue/static/7a9200edb092ed758a6ad507f4287d98/6aca1/self-serve-pizza.jpg" alt="A sample of the pizza on offer at a Casey's" title="" loading="lazy" decoding="async">
        </picture>
  </a>
    </span></p>
<p>My problem: last year, there were so many faster riders ahead of me, that <strong>all the pizza was taken by the time I made it to the stops.</strong> This is an outrage!</p>
<p>This year, I knew I had to do better. But with time winding down on improving my fitness, I had to resort to the latent superpower of software hackery.
My thought: <strong>why not have a fresh pizza ordered ahead of time, scheduled precisely for when I arrived?</strong></p>
<p>More precisely, I could write a script that ordered a pizza for me, GPS-triggered by my bike leaving a geofence about an hour from the stop. Building this <a href="https://steele.blue/serverless-bike-gps">on top of the serverless GPS tracker I made last year</a> should fit into the architecture pretty well.</p>
<h2>Casey's Pizza API When</h2>
<p><span>
      <a href="https://steele.blue/static/f1fdd6640cd5211fda59075e28ff7c6e/e185b/pizza-diagram.png" target="_blank" rel="noopener">
    <span></span>
  <picture>
          <source srcset="https://steele.blue/static/f1fdd6640cd5211fda59075e28ff7c6e/3e828/pizza-diagram.webp 192w,
https://steele.blue/static/f1fdd6640cd5211fda59075e28ff7c6e/e6f2f/pizza-diagram.webp 384w,
https://steele.blue/static/f1fdd6640cd5211fda59075e28ff7c6e/c0989/pizza-diagram.webp 691w" sizes="(max-width: 691px) 100vw, 691px" type="image/webp">
          <source srcset="https://steele.blue/static/f1fdd6640cd5211fda59075e28ff7c6e/8514f/pizza-diagram.png 192w,
https://steele.blue/static/f1fdd6640cd5211fda59075e28ff7c6e/804b2/pizza-diagram.png 384w,
https://steele.blue/static/f1fdd6640cd5211fda59075e28ff7c6e/e185b/pizza-diagram.png 691w" sizes="(max-width: 691px) 100vw, 691px" type="image/png">
          <img src="https://steele.blue/static/f1fdd6640cd5211fda59075e28ff7c6e/e185b/pizza-diagram.png" alt="Architecture diagram" title="" loading="lazy" decoding="async">
        </picture>
  </a>
    </span></p>
<p>The overall design: I setup a geofence within the AWS Location service, which was monitoring my GPS tracker.
When my tracker exited the geofence, it would trigger a Lambda function that calculates an ETA for my next stop, and orders the pizza.</p>
<p>The problem: Casey's doesn't have a public API for online ordering.
So I had to resort to alternate approaches. More specifically, I fell back to <strong>screen scraping the website</strong>, everyone's favorite hack.
I've had to screen-scrape for other projects (such as <a href="https://steele.blue/secret-strava">updating privacy on Strava activities</a>), but since Casey's website was a complex React app that rendered everything on the client, I had to use a more powerful scraper; this time powered by <a href="https://playwright.dev/">Playwright</a>.</p>
<p>Getting Playwright to run in a Lambda was An Experience. Full writeup <a href="https://steele.blue/playwright-on-lambda">here</a>.</p>
<p>To keep track of the status, I also setup a push notification to be delivered to my phone (and watch) on a success or failure. Configuring Web Push to work on iOS devices is probably worthy of its own post.</p>
<h2>Pizza False Positive</h2>
<p>I had the triggering geofence configured around mile 180 of the race, with the pizza setup to be delivered at mile 200.</p>
<p><span>
      <a href="https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/b17f8/pizza-watch.jpg" target="_blank" rel="noopener">
    <span></span>
  <picture>
          <source srcset="https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/3e828/pizza-watch.webp 192w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/e6f2f/pizza-watch.webp 384w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/8b983/pizza-watch.webp 768w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/b2d4b/pizza-watch.webp 1152w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/0abaa/pizza-watch.webp 1536w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/fad48/pizza-watch.webp 1600w" sizes="(max-width: 768px) 100vw, 768px" type="image/webp">
          <source srcset="https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/7809d/pizza-watch.jpg 192w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/4ecad/pizza-watch.jpg 384w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/212bf/pizza-watch.jpg 768w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/5ef17/pizza-watch.jpg 1152w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/ac99c/pizza-watch.jpg 1536w,
https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/b17f8/pizza-watch.jpg 1600w" sizes="(max-width: 768px) 100vw, 768px" type="image/jpeg">
          <img src="https://steele.blue/static/e1196b964a5d4a318c649926731f0d76/212bf/pizza-watch.jpg" alt="A push notification indicating pizza was delivered" title="" loading="lazy" decoding="async">
        </picture>
  </a>
    </span></p>
<p>As I left the geofence, I got a push notification on my watch saying that the pizza had been successfully ordered.</p>
<p>But when I made it to the stop, <strong>there was nothing at the counter, and they had no record of an order</strong>. And sure enough, I checked my account, and no order had been placed.
<strong>False positive.</strong></p>
<p>There were a few pre-made slices available, so I picked those up. They left a bitter taste in my mouth, not just because they weren't especially fresh. Through the rest of the 300-mile race, all I could think about was what might have went wrong with my function.</p>
<p><span>
      <a href="https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/b17f8/pizza-slices.jpg" target="_blank" rel="noopener">
    <span></span>
  <picture>
          <source srcset="https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/3e828/pizza-slices.webp 192w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/e6f2f/pizza-slices.webp 384w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/8b983/pizza-slices.webp 768w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/b2d4b/pizza-slices.webp 1152w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/0abaa/pizza-slices.webp 1536w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/fad48/pizza-slices.webp 1600w" sizes="(max-width: 768px) 100vw, 768px" type="image/webp">
          <source srcset="https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/7809d/pizza-slices.jpg 192w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/4ecad/pizza-slices.jpg 384w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/212bf/pizza-slices.jpg 768w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/5ef17/pizza-slices.jpg 1152w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/ac99c/pizza-slices.jpg 1536w,
https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/b17f8/pizza-slices.jpg 1600w" sizes="(max-width: 768px) 100vw, 768px" type="image/jpeg">
          <img src="https://steele.blue/static/dc526fd97ae4db5306832ed8945751be/212bf/pizza-slices.jpg" alt="A pair of dirty legs, eating slices of pre-made pizza" title="" loading="lazy" decoding="async">
        </picture>
  </a>
    </span></p>
<p>After finishing the race, I made it to a computer and quickly checked the logs to see what had gone wrong. But to my chagrin, there was nothing in the logs indicating what caused the failure; it was just a silent success. I had nothing to go on to try and debug.</p>
<p>A few days later, I enhanced the Lambda to capture a video of the browser in action and upload it to an S3 bucket for analysis. Running a test of the updated behavior, <strong>it finally worked</strong>. I picked up a fresh Hawaiian pizza, and we enjoyed the pie from the comfort of our home.</p>
<p>I'm still not entirely sure why it worked. My going theory is that the Lambda had terminated processing as soon as the final <code>form.submit()</code> went through in the embedded Playwright browser. It's quite possible that the online ordering website saw that the browser never received a Success response, and didn't fully process the order.
My guess is that the additional time spent processing and uploading the video gave the browser sufficient time to clean up properly, with serendipity in timing.</p>
<h2>Pizza Lessons</h2>
<p>While I was bummed the pizza ordering functionality didn't run, I think it's in a good spot to try again in upcoming races.
I also learned a lot while building this out:</p>
<ul>
<li>Consistently screen-scraping a React client-side app with a browser running in the cloud: possible, but boy howdy is it finicky. If I were to redo project, I may opt for reverse engineering one of their native apps, focusing on triggering their APIs directly</li>
<li>Having a good workflow to simulate geospatial behavior is necessary. At first, I setup a geofence around my house for testing, but having to leave for a walk at 11pm gets pretty old, pretty fast</li>
<li>That said, don't skimp on real-world testing. Prior to the race, I was mostly testing the function by running it on my local workstation, not in a Lambda. The successes of the local functions gave me false confidence that everything was working as expected</li>
<li>If you're worried about running out of Casey's pizza during a gravel race, another option is to just let the groups ahead of you get more than 30 minutes ahead, so they have plenty of time to make more slices</li>
</ul>
<p>The code is available on GitHub: <a href="https://github.com/mattdsteele/spot-tracker-tracker/tree/main/pizza-function">https://github.com/mattdsteele/spot-tracker-tracker/tree/main/pizza-function</a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[New JFK assassination revelation could upend the lone gunman theory (249 pts)]]></title>
            <link>https://www.vanityfair.com/news/2023/09/new-jfk-assassination-revelation-upend-lone-gunman</link>
            <guid>37454707</guid>
            <pubDate>Sun, 10 Sep 2023 10:59:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.vanityfair.com/news/2023/09/new-jfk-assassination-revelation-upend-lone-gunman">https://www.vanityfair.com/news/2023/09/new-jfk-assassination-revelation-upend-lone-gunman</a>, See on <a href="https://news.ycombinator.com/item?id=37454707">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-testid="ArticlePageChunks"><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>He has kept his secret for 60 years.</p><p><strong>Paul Landis</strong> was one of two Secret Service agents tasked with guarding first lady Jacqueline Kennedy on November 22, 1963—the day President John F. Kennedy was assassinated. In a new book, <a data-offer-url="https://www.amazon.com/Final-Witness-Kennedy-Service-Silence/dp/1641609443" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://cna.st/affiliate-link/HR4R9gBZvZ4obp8cqsotyF1isewS25CYVHxrjcTEHpWnPkNciKMvpjqEB44jKjyUogEZRRHky5sahMh2UGBPGMk6hp3mn7RSvpuziBEcEnfcMrFNDo6BSYZ4fdcVVcKP8ZmY4Fc4dSxksAtopMDmPSLUpy839nQ8pj6TsF5sYoAVgfekXtMMe22n2AD&quot;}" href="https://cna.st/affiliate-link/HR4R9gBZvZ4obp8cqsotyF1isewS25CYVHxrjcTEHpWnPkNciKMvpjqEB44jKjyUogEZRRHky5sahMh2UGBPGMk6hp3mn7RSvpuziBEcEnfcMrFNDo6BSYZ4fdcVVcKP8ZmY4Fc4dSxksAtopMDmPSLUpy839nQ8pj6TsF5sYoAVgfekXtMMe22n2AD" rel="sponsored" target="_blank"><em>The Final Witness</em></a><em>,</em> to be published in October, Landis claims to have seen something that afternoon that he had never publicly admitted before. His secret, coming to light only now, will certainly reorient how historians and laymen perceive that grave and harrowing event. His account also raises questions about whether there might have been a second gunman in Dallas that day.</p><p>After much prodding and reflection, Landis, now 88, made the decision to begin laying out his recollections for publication. Because I have written three books on presidential history, and because Landis’s publisher, Chicago Review Press, happens to be my publisher, an editor there asked me to read a copy of the galley and offer my comments, which I did quite eagerly. In fact, I was so taken with Landis’s backstory and, upon spending time with him, so drawn to the facets of his tale that are not answered in the book (whose details were <a href="https://www.nytimes.com/2023/09/09/us/politics/jfk-assassination-witness-paul-landis.html">first reported</a> in <em>The New York Times</em>), that I probed further, maintaining a healthy dose of skepticism.</p><p>And yet, as I got to know him during more than a dozen meetings this past year, I was won over by his integrity and by the way his account of what he witnessed in Dallas—and in the grave months of American mourning that followed—remained consistent and unwavering. Over time, Landis and I became close. As a result, I am writing this assessment of his narrative (and of his motives for coming out with his story) not only as a historian and armchair investigator but as Landis’s confidant.</p><p>Twenty-three-year-old Paul Landis applied to become a Secret Service agent in 1958. He came from Worthington, Ohio, a suburb of Columbus, and had graduated from Ohio Wesleyan University 15 months earlier. A neighborhood boy, Bob Foster, who was friends with Landis’s sister, had joined the Secret Service two years before. After speaking with Foster, Landis thought being in the Secret Service sounded like the “coolest job in the universe.”</p><p>Landis was intrigued. But because he has always been slight of build, his immediate concern was whether he could meet the minimum height requirement (five feet, eight inches). During the physical exam, he stretched himself like a rubber band and, as he recalls, barely made it.</p><p>He started work in October 1959, at the time the youngest special agent, at 24. Just over a year later, John Kennedy was elected president; soon the young recruit was assigned the job of guarding the Kennedy children and, eventually, along with Special Agent <strong>Clint Hill,</strong> Mrs. Kennedy herself. Not all agents were given code names, but as a result of Landis’s new assignment, and because of his youth and boyish looks, he was eventually christened “Debut.”</p><p>Landis found himself deep in the inner workings of <a href="https://www.vanityfair.com/news/2004/05/jackie-kennedy-200405" target="_blank">Camelot</a>, coinciding with the apex of Jackie’s popularity. As an international superstar, she was the Princess Di of her era, and Landis was on hand as the media followed her every move. Landis traveled with the first lady and her daughter, <strong>Caroline,</strong> to Italy in 1962. (John Jr., her young son, remained back home.) Landis was the agent who helped speed and accompany Jackie to the Otis Air Force Base emergency facilities when she went into premature labor with son Patrick, who died two days after his birth in August 1963. That October, at the suggestion of Jackie’s sister, <a href="http://www.vanityfair.com/style/2016/04/jackie-kennedy-lee-radziwill-sisterhood" target="_blank">Lee Radziwill</a>, a trip to Greece followed for an excursion aboard the luxury yacht of the shipping magnate Aristotle Onassis.</p></div><div data-testid="RowWrapper"><figure><p><span>First lady Jackie Kennedy and Landis (second from left) in Italy; August 30, 1962</span><span>From AP.</span></p></figure><figure><p><span>Jackie Kennedy, her sister, Lee Radziwill, and Landis (far right) at a museum in Greece; October 8, 1963</span><span>Raoul Fornezza/AP.</span></p></figure></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>Then came November 22, 1963. A month after returning from Greece, Landis stood on the right rear running board of the Secret Service follow-up car, code-named “Halfback,” in the president’s motorcade as the vehicle headed from Dallas’s Love Field airport to a luncheon at the city’s Trade Mart. Landis was approximately 15 feet away when Kennedy was mortally wounded, a close witness to unspeakable horror.</p><p>That horror was compounded when the president’s limo reached Parkland Memorial Hospital, where Landis and Clint Hill tried to coax Jackie to release the president, whom, by that point, she had cradled in her lap. Climbing into the back seat area, which had been spattered with blood and brains and bullet fragments, both agents, according to their subsequent accounts, gently encouraged the first lady to let go.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>As she did—standing up to follow Hill and another agent, Roy Kellerman, who lifted her husband’s body onto a gurney and raced into the hospital—Landis saw and did something that he has kept secret for six decades, he says now. He claims he spotted a bullet resting on the top of the back of the seat. He says he picked it up, put it in his pocket, and brought it into the hospital. Then, upon entering Trauma Room No. 1 (at that stage, he was the only nonmedical person in the room besides Mrs. Kennedy, and both stayed for only a short period), he insists, he placed the bullet on a white cotton blanket on the president’s stretcher.</p><p>This secret, as it turns out, may upend <a href="https://www.archives.gov/research/jfk/select-committee-report/part-1a.html" target="_blank">key conclusions</a> of the Warren Commission, the body created by President Lyndon Johnson to investigate the assassination.</p><p>The sad fact is that Landis—though required to provide his version of events to the Secret Service (and, in a second report, to what would become the Warren Commission)—never sat for an interview before the FBI and never testified before the commission itself. He left the Secret Service months after the assassination and before the panel had finished its work and issued its report.</p><p>Landis, to this day, attests that in the first few years following the assassination, he was simply unable to overcome his PTSD from witnessing the murder firsthand. He says that the mental image of the president’s head, exploding, had become a recurring flashback. He maintains that he desperately tried to push down the memories. He also says he felt unable to read anything in detail about the assassination until some 50 years later, starting in 2014, when he began to come to grips with all that he had witnessed, suppressed, and finally processed.</p><figure><p><span>Landis holding up John F. Kennedy Jr. on the South Lawn of the White House; 1962</span><span>By Cecil Stoughton/White House Photographs/John F. Kennedy Presidential Library and Museum, Boston.</span></p></figure><p>Landis, two years shy of his 90th birthday, remains vigorous. He exercises daily and plays golf once a week. He works a steady job as a security guard and a kind of welcome ambassador at the Cleveland History Center.</p><p>But still, the <a href="https://www.vanityfair.com/news/2008/11/conspiracy200811" target="_blank">JFK conspiracy hounds</a> are legion, and with his new book’s publication, Landis can expect intense scrutiny. I made myself available to him as a way of helping to prepare him for what was to come.</p><p>In writing this analysis of his account, I have tried to determine if his story was possible, seen against the mountains of evidence, not to mention newly released documents collected over the years by the Warren Commission, congressional probes, <a href="https://www.vanityfair.com/news/2013/11/jfk-assassination-anniversary-books" target="_blank">countless individual authors</a>, and a kind of industry that has evolved, in which dozens upon dozens of “researchers” trade information and, inevitably, misinformation.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>Over the decades, there have been endless theories surrounding the assassination, but not one of them considered that a Secret Service agent might have brought a fully intact bullet, found on top of the rear seat of the limousine, into Parkland Memorial Hospital and placed it on the president’s stretcher. Not one.</p><p>So there is virtue in looking anew at the evidence that was collected in 1963 and attempting to draw some tentative conclusions.</p><p>My own conclusion is that Landis’s story, for several reasons, is not just possible; it in fact makes more sense than the core finding of the Warren Commission, known as the “single bullet” theory.</p><p>That theory posits that a single bullet caused all of the wounds in Kennedy’s neck as well as all of the serious injuries to Texas governor John Connally—who was sitting in front of the president at the time—including the shattering of four inches of Connolly’s fifth rib and the fracturing of a major bone in his right wrist.</p><p>Yet the bullet that Landis now claims to have discovered that morning emerged largely intact and only moderately damaged, its base having been squeezed in.</p><p>By possibly placing the “magic bullet” theory in doubt, Landis’s disclosure raises as many questions as it answers. I will try to address some of them here.</p><p>First, it makes sense to retrace the main tenets of the Warren Commission’s official version of the assassination. According to the panel’s final report, issued in September 1964, three gunshots rang out as the president’s limousine passed by the Texas School Book Depository building in Dallas. Witnesses’ auditory memory differed, their testimony ranging from two to six shots. Most, however, recalled hearing a trio of blasts.</p><p>Three spent shells, in fact, were found under a window on the sixth floor of the book depository. Nearby, partially hidden by some cartons, a rifle with a scope was discovered, a cheap Mannlicher-Carcano. Lee Harvey Oswald, the man history identifies as the lone assassin, worked in that building. The commission determined that the three shots all came from the sixth floor of the book depository.</p><p>The commission concluded that two of the three shots had hit the occupants of the limousine: One bullet had transited Kennedy’s neck and then, most probably, hit Governor Connally, and one had fatally wounded Kennedy, striking his head. (Connally survived the attack, later becoming President Richard Nixon’s Treasury secretary.)</p><p>In the view of the task force, one of the shots had likely missed the limo and, though the conjecture was inconclusive, possibly struck a nearby cement curb, sending a fragment that hit a spectator some distance away, near an overpass, slightly grazing his face.</p><p>But what of the ammunition itself? Two large bullet fragments were found in the front seat of the limo, and slivers of lead fragments were recovered from an area below the jump seat where the governor’s wife, Nellie Connally, had been sitting.</p><figure><p><span>President Kennedy and the first lady with Texas governor John Connally; November 22, 1963</span><span>Bettmann/Getty Images.</span></p></figure><p>At Parkland Memorial Hospital, on the day of the assassination, an additional intact bullet was discovered on a stretcher. Through testing, commission investigators determined that the copper-jacketed, 6.5-millimeter bullet matched the rifling of the Mannlicher-Carcano that had been abandoned on the sixth floor of the depository. Testing on the bullet fragments resulted in a similar finding.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>One key point to raise here concerns a fundamental underpinning of the Warren Commission report: the supposition that the retrieved intact bullet had been discovered on Governor Connally’s stretcher, not on Kennedy’s. It was from this assumption, in part, that the commission reached its pivotal conclusion: The available evidence indicated that “the bullet found on the Governor’s stretcher”—the single bullet—“could have caused all his wounds.” Over time, critics have referred to it as the “pristine” or “magic” bullet.</p><p>Moreover, if that single bullet did <em>not</em> cause the damage, then ballistics tests performed at the time suggest it would have been almost impossible for Oswald to have fired all three shots within the tight, multi-second time frame derived from the other main piece of evidence of the assassination: the Zapruder film, a <a data-offer-url="https://www.life.com/history/jfks-assassination-how-life-brought-the-zapruder-film-to-light/" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.life.com/history/jfks-assassination-how-life-brought-the-zapruder-film-to-light/&quot;}" href="https://www.life.com/history/jfks-assassination-how-life-brought-the-zapruder-film-to-light/" rel="nofollow noopener" target="_blank">26.6-second home movie</a> recorded in color by bystander Abraham Zapruder, a local clothing manufacturer who happened to have brought along his Bell &amp; Howell 8mm camera that day and, by happenstance, captured the entire sequence of the assassination.</p><p>In his book, Paul Landis now says that when Jackie Kennedy stood up to enter Parkland, he looked over and saw that a bullet was improbably sitting on top of the rear seat of the limo, right around the spot where the limo’s detachable roof, which had been removed that day, would have otherwise been affixed to the trunk. Also, amid the blood and gore, Landis remembers, were two bullet fragments on the back seat, next to where Jackie had been sitting.</p><p>Landis contends that he reached over, picked up the lone bullet nestled in the crevice, and decided to place it in his pocket, mindful that if it were left there, precariously, it might be overlooked, pilfered by an unauthorized passerby, or misplaced once the president’s body was removed. Accompanying the first lady into Parkland, he says, he brought the bullet with him and, without conferring with Mrs. Kennedy, his fellow agents, or hospital staffers, placed it on JFK’s stretcher, thinking it needed to be with the body for the autopsy. As such, he contradicts a key linchpin underlying the findings of the Warren Commission. The bullet—as Landis tells it—was not from Connally’s stretcher.</p><p>From Landis’s description, three lines of inquiry emerge.</p><p>First, how did a largely intact bullet wind up on the ledge of the back seat, where JFK had been riding when he was shot?</p><p>Second, if Landis’s account is accurate, could Lee Harvey Oswald—who shot the president from a vantage point <em>behind</em> the motorcade—have acted alone, as the Warren Commission theorized?</p><p>And finally, why did Landis decide to keep this information to himself for six decades?</p></div><div data-testid="RowWrapper"><figure><p><span>A view of the Kennedys’ motorcade</span><span>Corbis/Getty Images.</span></p></figure></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>There is no way to know for sure how the undamaged bullet ended up on top of the rear seat. But there seem to be only two real possibilities, both of which can be inferred from the Zapruder film. One way is that an undercharged bullet, having already been lodged in the president’s back from an initial gunshot, was jolted out of his body after a subsequent shot to the head caused his upper body to be thrown violently back against the seat, bouncing off of it with great force. A second possibility is that at some point in those hectic moments, the bullet fell out of the president’s back and onto the first lady’s clothing (her white-gloved hand did brush hard against his back, around where the bullet could have been embedded at the moment of the final shot). As one can see in the Zapruder film, Jackie, at this stage, climbed onto the trunk of the speeding car, possibly to look for or retrieve a portion of her husband’s skull—or out of sheer panic to take cover from further gunshots. In fact, the section of the back seat over which she stretched corresponds to the spot where Landis says he found the bullet.</p><p>The autopsy evidence, as developed the night of the assassination, supports either one of these results.</p><p>A short recap is in order. Initially, President Kennedy was declared dead at Parkland—his body lying face-up on the table after the surgical team had performed a tracheotomy, hoping to provide needed oxygen through a ventilator to keep him breathing (which by that time was described as gasping or <a href="https://www.google.com/search?sca_esv=558593241&amp;rlz=1C1GCEA_enUS913US913&amp;sxsrf=AB5stBjGKpe8xhb1GKxgYo20DdGjFHlKCQ:1692557166565&amp;q=parkland+anesthesiologist,+jfk&amp;tbm=vid&amp;source=lnms&amp;sa=X&amp;ved=2ahUKEwjq67Ll8uuAAxUvIzQIHfFbDBAQ0pQJegQIChAB&amp;biw=1280&amp;bih=603&amp;dpr=1.5#fpstate=ive&amp;vld=cid:ab3501ab,vid:DX58vrL5ZiA" target="_blank">agonal respiration</a>). These emergency room doctors used what they believed was an entry bullet wound in the front of the president’s neck to create the tracheotomy. They were apparently unaware of a bullet hole in the president’s back.</p><p>But later that night, an autopsy began at Bethesda Naval Hospital, near Washington, DC. During the procedure, doctors examined the president’s remains, only to discover a small bullet hole in the right shoulder, about five inches down from the top of the collar. This injury had gone unnoticed at Parkland since the president was declared dead before his body could be surveyed in its entirety. The Bethesda pathologists were puzzled when they probed the wound because it clearly was an entrance puncture, but it did not seem to have an exit wound, even though X-rays showed no bullet in the body.</p><p>In fact, the shoulder wound was shallow. Two doctors found that they could not pass more than half a pinky finger into the opening. Metal probes likewise uncovered no path of the bullet through the body.</p><p>Standing in proximity to the doctors were two FBI agents, Frank O’Neill and Jim Sibert, who had been dispatched by the bureau’s director, J. Edgar Hoover, to witness the autopsy and recover bullets or bullet fragments for the FBI lab. In their written statement, the agents discussed the frustration of the Bethesda doctors when they could not locate a bullet or exit wound for the projectile that had entered the president’s shoulder.</p><p>That night, according to the agents’ account, one of them placed a call to the FBI lab and found out that a “stretcher bullet” had been discovered at Parkland. Doctors used this information to theorize that “this accounted for no bullet being located which had entered the back region and that since external cardiac massage had been performed at Parkland Hospital, it was entirely possible that through such movement the bullet had worked its way back out of the point of entry and had fallen on the stretcher.”</p><p>The next morning, the Bethesda pathologists, as stated in their Warren Commission testimony, were told by Parkland doctors that the wound in the front of Kennedy’s neck was more than just the result of the tracheotomy they had performed. In fact, the Parkland team stated, there had been a bullet hole in the anterior (front) of the neck, and the ER staff had used that wound to create the tracheotomy. No one at the autopsy, according to FBI agents Sibert and O’Neill, had suspected there was a hole in the <em>front</em> of the president’s neck. With this new information, the Bethesda doctors revised their findings and assumed that the front wound was an exit for the bullet that had entered the president’s body from the back.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><figure><p><span>Warren Commission members Hale Boggs, John Cooper, and Richard Russell leave the Texas School Book Depository after inspecting President Kennedy’s assassination scene</span><span>Bettmann/Getty Images.</span></p></figure><p>There were problems with this inference. The neck and shoulder had not been sectioned by those performing the autopsy to establish a bullet path. And by the time of the revelation of the front-neck injury, the president’s body had been brought to the White House to lay in repose in the East Room. (The next day, it lay in state in the Capitol rotunda.) Further, the wound in the back, according to Silbert and O’Neill, did not align with the location of the front-neck wound; such a pathway would have required a bullet traveling from the book depository, behind the motorcade, to have changed course inside the president’s body so as to exit higher up, through the neck, without hitting any bone to alter its course.</p><p>Agents O’Neill and Sibert didn’t buy it. “I do not see how the bullet that entered below the shoulder in the back could have come out the front of the throat,” O’Neill told the House Select Committee on Assassinations in 1978.</p><p>Landis’s discovery of the bullet on top of the rear seat, if true, comports with the initial finding: that the bullet had lodged superficially in the president’s back before being dislodged by the final blast to his head. It also explains the “pristine” nature of the bullet.</p><p>The genesis of the “single bullet” theory was twofold.</p><p>First, the Zapruder footage showed Kennedy reacting to the bullet that hit him in the back—and then, apparently, exited through the front of his neck (his arms spasmodically began to rise, elbows out, fists shielding his throat)—<em>about a second or so</em> before Connally seemed to react to his own wounding. To the Warren Commission staff, that double reaction on the part of the two men was puzzling. Given the type of weapon Oswald was using, there would have been no way for him to have gotten off two firings in such a short span of time.</p><p>Secondly, when the panel attempted to recreate the shooting in a manner consistent with the Zapruder film, FBI marksmen found that it took about 2.3 seconds to shoot, reload the bolt-action rifle, aim, and shoot again. Given Governor Connally’s reaction time, there did not appear to have been enough time for Oswald to have taken a second shot so quickly, let alone with any accuracy.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p><strong>Howard Willens,</strong> an assistant counsel to the Warren Commission, and the author of the 2013 book <em>History Will Prove Us Right,</em> wrote about this dilemma: “If the interval between the first and second shots covered a span of less than 2.25 seconds, the time estimated to be necessary for the assassin to fire two shots, it might suggest that a second rifle was involved.”</p><p>The commission’s solution, however, championed by staff attorney Arlen Specter (who would become a US senator from Pennsylvania), was that the same bullet that hit Kennedy must have gone on to hit Connally on his right side. Connally’s second-later response was explained by the commission as a “delayed reaction” to an earlier wounding.</p><p>But, as noted, that theory depended on the single bullet having been found on Connally’s stretcher at Parkland Memorial Hospital, not on Kennedy’s stretcher.</p><p>The panel’s members speculated that the bullet, after causing Kennedy’s and Connally’s wounds, ended up superficially stuck in Connally’s left leg and must have dropped onto his stretcher once inside the hospital.</p><p>That said, the original evidence from 1963 is far from clear on this point.</p></div><div data-testid="RowWrapper"><figure><p><span>President Kennedy stands on the Texas airstrip with Jackie Kennedy and Governor John Connally</span><span>Bettmann/Getty Images.</span></p></figure><figure><p><span>Governor Connally recovering in his hospital room with his wife, Nellie</span><span>Bettmann/Getty Images.</span></p></figure></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>The provenance of the bullet is also important in supporting or refuting Paul Landis’s purported memory. How was that bullet found? And how did it make its way to the FBI lab in Washington, DC, on the night of the assassination?</p><p>Landis’s recollection, as stated above, is that he found the undeformed bullet on top of the back seat of the limousine. “It was resting in a seam where the tufted leather padding ended against the car’s metal body,” he writes. When Jackie Kennedy stood up to follow her husband into the hospital, he saw it. He picked up the bullet, worried that souvenir seekers or others might take it or move it.</p><p>Upon arriving inside the emergency room, as stated above, he was jammed in with the first lady and a gathering horde of doctors and nurses. Standing near the feet of the president’s body, Landis left the bullet on his stretcher, as he believed it was crucial evidence and needed for the autopsy, which, under Texas law, should have taken place in Dallas.</p><p>But then a new chain of events overtook the gruesome sequence surrounding the assassination. A decision was made to transfer the president’s body, along with the first lady, Vice President Johnson, and others, back to Air Force One at Love Field. And with new tasks taking precedence for Landis—and the overwhelming national shock of the first assassination of an American president in 62 years (since the death of William McKinley in 1901)—the special agent simply never gave the bullet a second thought, he says. He had left it where someone would find it.</p><p>Landis didn’t make reference to the bullet in either of the two reports he submitted, hastily written in the turbulent days following the assassination. One short file, written two days after the funeral, didn’t even mention Parkland Memorial Hospital. A second, typed three days later—a day after <em>Life</em> magazine journalist Theodore White interviewed Jackie at the Kennedy compound in Hyannis Port, in what became known, famously, as the “Camelot” interview—was drafted during a time of deep shock and trauma.</p><p>That Thanksgiving, November 28—three days after the state funeral at which world leaders marched behind Mrs. Kennedy in the streets of Washington, DC—Landis and Hill traveled to Hyannis Port in a security capacity, protecting Jackie and her children. The agents had no time off to regroup or get their bearings. Sleep had eluded them. Landis had been up for practically four days straight. In the months after Lyndon Johnson was sworn in and assumed the presidential reins, Landis’s role switched from being part of the overall White House protection group to working full time for the former first lady. (Congress passed an act to authorize this service.) With this change of responsibilities, he found it hard to think of much beyond the weeks ahead. And if his thoughts did migrate back to November 22, he dwelled on the horrific scenes of the assassination, and rarely on what he says he considered a minor detail: the fact that he had picked up a bullet and placed it next to the president’s body.</p><p>The evidence from 1963 makes it fully plausible that the stretcher on which the bullet was found could have been President Kennedy’s. How so? A Parkland Memorial Hospital engineer, Darrell Tomlinson, was asked on November 22, before the president’s remains had been taken from the hospital to travel back north, to set the controls of the elevator in the emergency area—the one that had taken the wounded Governor Connally up to the second floor for surgery—so that the elevator would only be operable manually. The security team had determined that only people with official clearance would be allowed access; Tomlinson was instructed to control who got on the elevator and where they would go.</p><p>When he pushed the button to open the elevator, he later recalled, there was a stretcher in the elevator—one that the Warren Commission presumed was Governor Connally’s stretcher, returned from the surgery floor. Tomlinson testified that the stretcher had some sheets on it and a white covering on the pad, but no bullet. He moved the stretcher out of the elevator and placed it against a wall.</p><p>However, Tomlinson testified that there was <em>another</em> stretcher already in the hall, which had been placed in front of a men’s restroom in the corner. <em>That</em> stretcher had bloody sheets and some used medical paraphernalia on it.</p><p>Tomlinson said that sometime later, “an intern or doctor,” in order to use the bathroom, pushed the stretcher out of the way but failed to return it to its spot against the wall after leaving. Tomlinson roughly pushed it back against the wall, and when he did so, he claimed, a bullet rolled out from under the mat. This was clearly not Connally’s stretcher.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><figure><p><span>Jackie Kennedy looking into the ambulance, November 22, 1963. Landis stands just behind her (third from right).</span><span>Bettmann/Getty Images.</span></p></figure><p>Arlen Specter, who had traveled to Dallas to take Tomlinson’s deposition in March 1964, was thunderstruck when Tomlinson relayed this scenario. To judge from a transcript of that conversation, Specter spent much of the remainder of his time with Tomlinson essentially trying to talk him out of his recollection, causing a distressed Tomlinson to say he just was not sure about his memory.</p><p>But the Q&amp;A itself clearly suggests that Tomlinson, unprompted and unbadgered, had a cogent recollection that a bullet, wherever else it ultimately ended up, had come from the stretcher that had already been left in the hall in front of the men’s room.</p><p>In its final report, the Warren Commission mentioned nothing about this detail from Tomlinson’s account. Instead, the panel largely dismissed Tomlinson’s testimony, writing that even though he was “not certain whether the bullet came from the Connally stretcher or the adjacent one,” the commission “has concluded that the bullet came from the Governor’s stretcher.”</p><p>And what of the contemporaneous evidence from the witnesses who provided care to the governor in the emergency room and on the surgery floor?</p><p>When Connally was brought in from the limo, he was in great distress. He was taken to Trauma Room No. 2, where his clothes were immediately cut off. No one saw a bullet sticking out of his leg when his pants were removed. Neither was a bullet seen on the stretcher nor found in his clothing. Once stabilized, he was wheeled to the emergency room elevator and taken to surgery on the second floor.</p><p>Connally was then transported from the emergency room stretcher and placed on an operating table. No one testified to having seen a bullet on that stretcher. All of the medical paraphernalia on Connally’s stretcher was removed by a nurse before the stretcher was put back in the elevator. And the attendant who placed that stretcher onto the elevator did not recall having seen a bullet.</p><p>Darrell Tomlinson, however, went further. He said that as soon as he found the bullet, he alerted O.P. Wright, the chief of security at the hospital. Wright, in turn, gave the bullet to Secret Service agent Dick Johnsen, who was in the process of leaving the hospital with the president’s casket and Mrs. Kennedy. Johnsen wrapped the bullet in a handkerchief and placed it in his pocket. He then rode on Air Force One back to Washington.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>Johnsen was assigned to sit with the casket and near Mrs. Kennedy in the back of Air Force One on the return journey to the nation’s capital. The body, the widow, and the bullet all returned to Washington on the same plane, in close proximity.</p><p>When Johnsen got back to the White House, he typed a short note to describe the bullet and how he ended up with it. “The attached expended bullet was received by me about 5 min., prior to Mrs. Kennedy’s departure from the hospital,” he wrote. “It was found on one of the stretchers located in the emergency ward of the hospital. Also on this same stretcher were rubber gloves, a stethoscope and other doctor’s paraphernalia.”</p><p>Johnsen dated his note: “7:30 p.m., Nov. 22, 1963.”</p><p>Johnsen then handed over the bullet to the director of the Secret Service, James Rowley. Rowley, finally, gave the bullet to the FBI that very night; it was signed in as the first piece of evidence in the assassination investigation, labeled with the designation “Q1.”</p><p>That evening, the initial supposition was that the bullet had come from JFK’s stretcher because the autopsy doctors at Bethesda, attempting to understand the whereabouts of the bullet that had entered Kennedy’s back, thought it might have been lodged in his back and then fallen out when rigorous chest massages were performed at Parkland.</p><p>It was only after the autopsy (and after the president’s body had been moved to the White House) that Parkland doctors told the pathologists that they had used a bullet wound in the front of Kennedy’s neck to make a tracheotomy.</p><p>Upon hearing this, the autopsy doctors tentatively revised their thesis and surmised that the bullet that entered Kennedy’s back must have exited through the front of his neck.</p><p>And so the problem started: The Warren Commission could not explain what happened to the bullet if it exited through the <em>front</em> of Kennedy’s neck. Howard Willens described the Warren Commission staff’s internal debate: “There was one basic question that now seems very simple,” he wrote. “Where did the bullet go after it exited the president’s neck?”</p><p>Paul Landis, in effect, answers that question: It ended up in a crevice on top of the back seat. It seems unlikely that the bullet traversed the president’s body and exited through the front of his neck.</p><p>Maybe the bullet entered the president’s back only superficially; these WW II–vintage bullets, after all, were notoriously undercharged with gunpowder. If this were the case, it might have indeed fallen out when he was violently struck with the final shot; when Mrs. Kennedy, at one point, pushed him down onto the seat; or when she clambered onto the trunk, the bullet falling off of her and onto the top of the back seat.</p><p>To be fair to the record, the Warren Commission’s findings suggested that Kennedy’s stretcher was not the stretcher in the elevator lobby because the nurses who had treated the president testified that once they’d been informed that a casket had arrived at Parkland, they had removed bloody sheets from his stretcher before moving it across the hall to Trauma Room No. 2.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>But given the blood-soaked scene described by all of the medical personnel in Trauma Room No. 1, it is not unreasonable to assume that an orderly in Trauma Room No. 2 preemptively moved the president’s stretcher into the hall, stained sheets, medical paraphernalia, and all, to be further cleaned up by other attendants.</p></div><div data-testid="RowWrapper"><figure><p><span>Attorney General Robert Kennedy, Senator Edward Kennedy, the first lady, and Landis (far right) walking during the funeral procession on November 25, 1963</span><span>Bettmann/Getty Images.</span></p></figure></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>What does all this mean when considering whether Lee Harvey Oswald, as proposed by the Warren Commission, was the lone assassin? It certainly raises the stakes that another shooter might have been involved.</p><p>First, if the “pristine” bullet did not travel through both Kennedy and Connally, somehow ending up on Connally’s stretcher, then it stands to reason that Connally might have actually been hit by a separate bullet, coming from above and to the rear. The FBI recreation suggests that Oswald would not have had enough time to get off two separate shots so quickly as to hit Connally after wounding the president in the back. A second shooter must be considered.</p><p>And what about the bullet wound in the front of Kennedy’s neck? In one of the earliest critiques of the Warren Commission report, <strong>Josiah Thompson,</strong> author of <em>Six Seconds in Dallas,</em> proposed, not unreasonably, that the front-neck wound might have come from a bullet or bone fragment that was driven down and exited through the president’s throat from the final blast to his skull.</p><p>But there are other, darker explanations arising from the secrecy surrounding the X-rays and photographs taken at the autopsy and then not made public for decades. Jerrol F. Custer, the principal X-ray technician at the autopsy, testified in 1997 that there were several small metallic fragments in the cervical spine (the spinal region directly below the skull), which were visible in an X-ray, and that this was one of three X-ray exposures he took that night that went missing from the collection in the National Archives. This might have contained evidence of a shot from the front of the motorcade—a frangible bullet that disintegrated into tiny pieces after entry into the body. A heavy lift, for sure, but medical staffers who saw the front-of-the-neck wound before the tracheotomy believed it was an entrance wound because of its neatness.</p><p>Though some observers, down through the years, have mentioned the possibility of a second shooter, perhaps positioned on the so-called “grassy knoll” area along the route of the motorcade, neither this article nor Landis’s book has the insight or forensic expertise to hazard any new conclusions in this area. Others will have to analyze the evidence in full to see where it now leads. But, without question, this revelation will spark major debates. And that should not be surprising. The Warren Commission report, though lauded right after it was issued, has had its share of credibility detractors as time has passed. In 2013, a week before the 50th anniversary of the assassination, <a href="https://news.gallup.com/poll/165893/majority-believe-jfk-killed-conspiracy.aspx" target="_blank">public opinion polls</a> found that more than 60% of Americans believed the president’s murder had not been the work of one man, as the commission contended, but part of some kind of conspiracy.</p><p>There are many reasons for this skepticism, including a growing public distrust toward governmental pronouncements. And yet a chronic source of questioning has been the commission’s claim that a single bullet wounded both Kennedy and Connally, emerging mostly undamaged after having done so much damage.</p><p>Perhaps Landis’s revelations will offer a critical mass of additional conjecture to prompt a reassessment of the “magic bullet” theory.</p><p>The more confounding question, in my view, is a simple, human one: Why did Paul Landis decide to keep this information to himself for 60 years? The answer is complicated. But it is in many ways understandable if one considers his predicament at the time and in the years that followed.</p><p>Upon leaving the bullet on Kennedy’s stretcher, Landis explains today, he felt that he had done the right thing, expecting an autopsy and mindful of the need for the bullet to remain with the body. Like all of the Secret Service members on hand that day—and, indeed, the entire nation—he was also racked with grief and loss (to say nothing of PTSD, which was an unrecognized condition at the time). For Landis, however, a man who had been a constant presence in his life had been slain right in front of him—a man whose wife’s safety had been, in part, his own responsibility.</p><p>But soon the intensity of the moment enveloped him. Landis’s focus turned to responding to Mrs. Kennedy at Parkland; attending to the needs of the family upon the return of the remains to the capital; accompanying Jackie and the president’s brother Robert F. Kennedy during the nine-hour wait at Bethesda as the autopsy proceeded; remaining on protective duty during one of the riskiest state funerals in history; and then staying on in <a href="https://www.vanityfair.com/style/society/2014/10/jacqueline-kennedy-jfk-assassination-depression" target="_blank">Jackie’s peripatetic orbit</a> for the next several months—unable to find the time to properly attempt to cope with the raw trauma he had experienced.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>In May, nearly six months after the assassination, Landis realized that the ordeal had taken its toll; concerned about his own mental health, he decided he couldn’t take it anymore. By August, at age 29, he had left the Secret Service. At the time, the Warren Commission had not issued its report, nor had Landis been interviewed for it; the public had not yet heard of the “single bullet” theory.</p><p>From that point onward, Landis now says, he withdrew from his more public-facing life, adamantly refusing to read more about the assassination. He avoided most requests for interviews by the media. He assumed, without looking at the final report, that the Warren Commission must have gotten it right.</p><p>Then, around 2010, things began to thaw. A project by Secret Service agent <strong>Gerald Blaine</strong> brought Landis out of his shell. Blaine was writing a book, <em>The Kennedy Detail,</em> with <strong>Lisa McCubbin,</strong> and Landis agreed to participate, mainly, he says, because his friend Clint Hill had also signed on. The agents met in Dallas to film an accompanying documentary, and Landis discovered he was not alone in feeling guilty and isolated following the assassination. But even then, Landis was not yet prepared to tell his own story.</p></div><div data-testid="RowWrapper"><figure><p><span>Jackie Kennedy mourns at the funeral with children Caroline and John, brothers-in-law Ted and Robert, and Landis</span><span>From Getty Images.</span></p></figure></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>That all changed in 2014 when Landis finally read a 1967 book on the assassination—a gift from a friend. When he began to page through <em>Six Seconds in Dallas,</em> by Josiah Thompson, he first saw that CE 399—the “pristine” bullet—was believed to have come from Governor Connally’s stretcher. Landis claims today that he immediately reached out to Clint Hill to tell him that he brought the bullet into Parkland and left it on the president’s stretcher, not the governor’s. He needed to correct this record.</p><p>One issue at the time was that the Secret Service was struggling with <a href="https://www.nbcnews.com/news/us-news/long-list-breaches-scandals-secret-service-under-obama-n215751" target="_blank">very public scandals</a>, ranging from breaches of the White House grounds by intruders to accusations of liaisons with prostitutes in South America. And so, in deference to the troubles roiling the agency, Landis decided to remain mum.</p><p>In late 2015, however, Landis had a change of heart, he insists. He spoke with former Secret Service director Lewis Merletti, who had lived nearby, in Beachwood, Ohio, as the former head of security for the Cleveland Browns. Landis told Merletti of his secret; soon thereafter, Landis began the odyssey of carefully writing his book.</p><p>In the intervening seven years, he struggled with his conscience. His guilt, in my estimation, stemmed in part from a creeping concern that others might accuse him of having done something wrong by moving the bullet. Moreover, he must have worried, to some degree, about not having spoken out about finding the bullet in the first place—and not having sought to clarify the record more speedily once it became apparent to him that many historians and the public at large had cast doubt on the findings of the Warren Commission. Another factor amplifying his angst, I would imagine, was that the longer he remained silent, the harder it became to speak out.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>Adding to his concerns, I’m sure, was the fact that Landis had been criticized—unfairly, in my view—for having stayed out most of the night before the assassination. Over the years, journalists and others have written sporadically about how “nine members” of the Kennedy Secret Service contingent went out drinking into the wee hours of November 22. A detailed report, with statements by the agents, was gathered following the assassination, and those comments are included as part of the record in the Warren Commission report <a data-offer-url="https://www.maryferrell.org/showDoc.html?docId=1135#relPageId=680" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.maryferrell.org/showDoc.html?docId=1135#relPageId=680&quot;}" href="https://www.maryferrell.org/showDoc.html?docId=1135#relPageId=680" rel="nofollow noopener" target="_blank">volumes</a>.</p><p>That investigation showed that around midnight on November 21, the Secret Service agents arrived in Fort Worth at the Hotel Texas with the president and first lady. Kennedy had <a data-offer-url="https://www.jfklibrary.org/asset-viewer/archives/JFKWHF/WHN17/JFKWHF-WHN17/JFKWHF-WHN17" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.jfklibrary.org/asset-viewer/archives/JFKWHF/WHN17/JFKWHF-WHN17/JFKWHF-WHN17&quot;}" href="https://www.jfklibrary.org/asset-viewer/archives/JFKWHF/WHN17/JFKWHF-WHN17/JFKWHF-WHN17" rel="nofollow noopener" target="_blank">barnstormed</a> the state that day with events and motorcades in San Antonio and Houston. Though exhausted and famished, the agents were nonetheless used to putting in long hours in service to a youthful, hard-charging—and sometimes hard-partying—president. Double shifts were not uncommon.</p><p>Some members of the group, seeking food, were encouraged by Merriman Smith, a respected wire service reporter with United Press International, to visit a complimentary room set up by the Fort Worth Press Club in a nearby hotel. By that late hour, however, the food was gone. Several agents had a beer or two. Some had mixed drinks. Landis, for his part, professed to having had a scotch and soda.</p><p>Still hungry, the agents were told of a late-night coffeehouse, The Cellar, that might have something to eat. The Cellar was known for its “beatnik” performers—poetry-reading and guitar-playing—and a female waitstaff that wore skimpy outfits. Landis was among the agents who went to The Cellar, where, as he mentioned in one of his 1963 statements to authorities, he had two “Salty Dicks”—a local concoction that might or might not have had alcohol. Landis attested that he drank grapefruit juice, which he says today had no alcohol. At 4 a.m. CT, he says, he left to retire to his hotel.</p><p>By 8 a.m., Landis had breakfast and was asked by Roy Kellerman, the man in charge of the entire unit, to assist in protection for the president, who had decided to give an impromptu speech in front of the Hotel Texas. He later helped escort Mrs. Kennedy to a breakfast sponsored by the Fort Worth Chamber of Commerce at the hotel. He contends that he and his fellow agents that day were amped up by the heightened alertness involved with a presidential motorcade. They were likely stoked, as well, by the adrenaline of the crowds and the excitement and pomp. To a man, everyone involved who was interviewed for the Warren Commission said that all of the agents, including those who had gone out the night before, showed up on time for work, exhibiting no effects of excess drinking. Photos from that morning and day, in fact, show Landis bright-eyed and working diligently in his protective capacity.</p><p>Columnist Drew Pearson, however, got wind of the late-night excursion and in the week following the assassination published an exposé about the agents’ behavior. It caused an uproar. The incident, in fact, has continued to attract attention: In 2014, author <strong>Susan Cheever,</strong> finishing up a book called <em>Drinking in America,</em> reconstructed her own <a href="https://www.vanityfair.com/news/politics/2014/10/secret-service-jfk-assassination" target="_blank">narrative of the evening</a> for <em>Vanity Fair,</em> quoting both Paul Landis and Clint Hill.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><div><p>I believe there is little reason to think that late-night alcohol consumption contributed to the agents’ response times or decision-making that day. Hill, who had been out with the others, reacted quickly in trying to get to the limo. In a six-second incident, he did not make it in time. The agent on the running board in front of Landis, Jack Ready, started to jump off himself but was called back by the agent in charge of that car, Emory Roberts, who feared that Ready might be run over and realized that Hill was already on his way toward the vehicle. Roberts had not been out the night before, drinking or otherwise. The same is true of the only agent who really had a chance to avert disaster, driver Bill Greer, who might have taken evasive action with the president’s limo once the shooting started. The agent next to Greer in the front passenger seat of the presidential limo, Roy Kellerman, likewise didn’t react in time. Kellerman had not been out drinking; he had gone straight to bed once they checked into the Hotel Texas.</p><p>Landis recognized that, despite any accusations to the contrary, there was nothing he could have done to prevent the tragedy. He also knew that he risked being criticized for having stayed out most of the night and having violated Secret Service policy by drinking any alcohol that might possibly impair him “if called upon to perform an official duty.” This no doubt contributed to his overall reluctance to come forward.</p><p>More to the point, I sense that he had an underlying guilt about what he <em>might</em> have done. He had found a bullet—the first piece of evidence logged into the record of the assassination of a US president—and then he went on his way, alone, in private.</p><p>He understands today how history might have changed had he told the pathologists at Bethesda that night where the “stretcher bullet” had come from—but he was not the one in the autopsy room (Kellerman and Greer were), and he had his hands full with the stream of family and mourners who arrived on the hospital’s 17th floor to console Jackie.</p><p>Landis is an upright, respected, private man. His moral authority and personal credibility have always been two hallmarks of his persona. My gut tells me that in his own way, he didn’t want to be the guy who had done a good deed under intense pressure, and then, forevermore, was raked over the coals for it. Which is how society often treats people these days. That anxiety might well have led to a sense of regret—even though his initial actions had been completely laudable.</p><p>In addition, he was in his late 20s at the time, a man whose values were grounded in those of the 1950s and ’60s. Silence and discretion, to him, had always been virtues. And he didn’t feel that it was appropriate to change his stripes and “go public”—drawing attention to his own behavior—when conspiracy theorists ran rampant, when other agents had been in the press over the years, and when President Kennedy had been killed, in effect, on his watch.</p><p>All of this, I contend, contributed to his years of silence.</p><p>But nothing, as I see it—and as Landis himself sees it—should detract from the fact that he has now come forward with his version of what happened on that dreadful day. And history will be the better for it.</p><hr><p><em>James David Robenalt is an attorney and</em> Washington Post <em>contributor. He is the author of four nonfiction books:</em> The Harding Affair; Linking Rings; Ballots and Bullets; <em>and</em> January 1973: Watergate, Roe v. Wade, Vietnam, and the Month That Changed America Forever.</p></div><div data-testid="LinkStack"><ul><li data-testid="LinkStackBullet"></li><li data-testid="LinkStackBullet"></li><li data-testid="LinkStackBullet"></li><li data-testid="LinkStackBullet"></li><li data-testid="LinkStackBullet"><p><a href="https://www.vanityfair.com/style/2023/08/kyle-deschanel-the-rothschild-who-wasnt" target="_blank">Meet Kyle Deschanel</a>, the Pretend Playboy Who Seems to Have Fooled Half of Manhattan</p></li><li data-testid="LinkStackBullet"></li><li data-testid="LinkStackBullet"></li><li data-testid="LinkStackBullet"></li></ul></div></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Nginx Unit – Universal web app server (581 pts)]]></title>
            <link>https://github.com/nginx/unit</link>
            <guid>37453854</guid>
            <pubDate>Sun, 10 Sep 2023 08:10:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/nginx/unit">https://github.com/nginx/unit</a>, See on <a href="https://news.ycombinator.com/item?id=37453854">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto">NGINX Unit</h2>
<h2 tabindex="-1" dir="auto">Universal Web App Server</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/nginx/unit/blob/master/docs/unitlogo.svg"><img src="https://github.com/nginx/unit/raw/master/docs/unitlogo.svg" alt="NGINX Unit Logo"></a></p>
<p dir="auto">NGINX Unit is a lightweight and versatile open-source server that has
two primary capabilities:</p>
<ul dir="auto">
<li>serves static media assets,</li>
<li>runs application code in seven languages.</li>
</ul>
<p dir="auto">Unit compresses several layers of the modern application stack into a potent,
coherent solution with a focus on performance, low latency, and scalability. It
is intended as a universal building block for any web architecture regardless
of its complexity, from enterprise-scale deployments to your pet's homepage.</p>
<p dir="auto">Its native <a href="#openapi-specification">RESTful JSON API</a> enables dynamic
updates with zero interruptions and flexible configuration, while its
out-of-the-box productivity reliably scales to production-grade workloads. We
achieve that with a complex, asynchronous, multithreading architecture
comprising multiple processes to ensure security and robustness while getting
the most out of today's computing platforms.</p>
<h2 tabindex="-1" dir="auto">Quick Installation</h2>
<h3 tabindex="-1" dir="auto">macOS</h3>
<div dir="auto" data-snippet-clipboard-copy-content="$ brew install nginx/unit/unit"><pre>$ <span>brew install nginx/unit/unit</span></pre></div>
<p dir="auto">For details and available language packages, see the
<a href="https://unit.nginx.org/installation/#homebrew" rel="nofollow">docs</a>.</p>
<h3 tabindex="-1" dir="auto">Docker</h3>

<p dir="auto">For a description of image tags, see the
<a href="https://unit.nginx.org/installation/#docker-images" rel="nofollow">docs</a>.</p>
<h3 tabindex="-1" dir="auto">Amazon Linux, Fedora, RedHat</h3>
<div dir="auto" data-snippet-clipboard-copy-content="$ wget https://raw.githubusercontent.com/nginx/unit/master/tools/setup-unit &amp;&amp; chmod +x setup-unit
# ./setup-unit repo-config &amp;&amp; yum install unit
# ./setup-unit welcome"><pre>$ <span>wget https://raw.githubusercontent.com/nginx/unit/master/tools/setup-unit <span>&amp;&amp;</span> chmod +x setup-unit</span>
# <span>./setup-unit repo-config <span>&amp;&amp;</span> yum install unit</span>
# <span>./setup-unit welcome</span></pre></div>
<p dir="auto">For details and available language packages, see the
<a href="https://unit.nginx.org/installation/#official-packages" rel="nofollow">docs</a>.</p>
<h3 tabindex="-1" dir="auto">Debian, Ubuntu</h3>
<div dir="auto" data-snippet-clipboard-copy-content="$ wget https://raw.githubusercontent.com/nginx/unit/master/tools/setup-unit &amp;&amp; chmod +x setup-unit
# ./setup-unit repo-config &amp;&amp; apt install unit
# ./setup-unit welcome"><pre>$ <span>wget https://raw.githubusercontent.com/nginx/unit/master/tools/setup-unit <span>&amp;&amp;</span> chmod +x setup-unit</span>
# <span>./setup-unit repo-config <span>&amp;&amp;</span> apt install unit</span>
# <span>./setup-unit welcome</span></pre></div>
<p dir="auto">For details and available language packages, see the
<a href="https://unit.nginx.org/installation/#official-packages" rel="nofollow">docs</a>.</p>
<h2 tabindex="-1" dir="auto">Running a Hello World App</h2>
<p dir="auto">Unit runs apps in a
<a href="https://unit.nginx.org/howto/samples/" rel="nofollow">variety of languages</a>.
Let's consider a basic example,
choosing PHP for no particular reason.</p>
<p dir="auto">Suppose you saved a PHP script as <code>/www/helloworld/index.php</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="<?php echo &quot;Hello, PHP on Unit!&quot;; ?>"><pre><span>&lt;?php</span> <span>echo</span> "<span>Hello, PHP on Unit!</span>"; <span>?&gt;</span></pre></div>
<p dir="auto">To run it on Unit with the <code>unit-php</code> module installed, first set up an
application object. Let's store our first config snippet in a file called
<code>config.json</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
    &quot;helloworld&quot;: {
        &quot;type&quot;: &quot;php&quot;,
        &quot;root&quot;: &quot;/www/helloworld/&quot;
    }
}"><pre>{
    <span>"helloworld"</span>: {
        <span>"type"</span>: <span><span>"</span>php<span>"</span></span>,
        <span>"root"</span>: <span><span>"</span>/www/helloworld/<span>"</span></span>
    }
}</pre></div>
<p dir="auto">Saving it as a file isn't necessary, but can come in handy with larger objects.</p>
<p dir="auto">Now, <code>PUT</code> it into the <code>/config/applications</code> section of Unit's control API,
usually available by default via a Unix domain socket:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# curl -X PUT --data-binary @config.json --unix-socket  \
       /path/to/control.unit.sock http://localhost/config/applications"><pre># <span>curl -X PUT --data-binary @config.json --unix-socket  \</span>
<span>       /path/to/control.unit.sock http://localhost/config/applications</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="
{
	&quot;success&quot;: &quot;Reconfiguration done.&quot;
}"><pre>{
	<span>"success"</span>: <span><span>"</span>Reconfiguration done.<span>"</span></span>
}</pre></div>
<p dir="auto">Next, reference the app from a listener object in the <code>/config/listeners</code>
section of the API.  This time, we pass the config snippet straight from the
command line:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# curl -X PUT -d '{&quot;127.0.0.1:8000&quot;: {&quot;pass&quot;: &quot;applications/helloworld&quot;}}'  \
       --unix-socket /path/to/control.unit.sock http://localhost/config/listeners"><pre># <span>curl -X PUT -d <span><span>'</span>{"127.0.0.1:8000": {"pass": "applications/helloworld"}}<span>'</span></span>  \</span>
<span>       --unix-socket /path/to/control.unit.sock http://localhost/config/listeners</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="{
    &quot;success&quot;: &quot;Reconfiguration done.&quot;
}"><pre>{
    <span>"success"</span>: <span><span>"</span>Reconfiguration done.<span>"</span></span>
}</pre></div>
<p dir="auto">Now Unit accepts requests at the specified IP and port, passing them to the
application process. Your app works!</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ curl 127.0.0.1:8080

      Hello, PHP on Unit!"><pre>$ <span>curl 127.0.0.1:8080</span>

<span>      Hello, PHP on Unit!</span></pre></div>
<p dir="auto">Finally, query the entire <code>/config</code> section of the control API:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# curl --unix-socket /path/to/control.unit.sock http://localhost/config/"><pre># <span>curl --unix-socket /path/to/control.unit.sock http://localhost/config/</span></pre></div>
<p dir="auto">Unit's output should contain both snippets, neatly organized:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
    &quot;listeners&quot;: {
        &quot;127.0.0.1:8080&quot;: {
            &quot;pass&quot;: &quot;applications/helloworld&quot;
        }
    },

    &quot;applications&quot;: {
        &quot;helloworld&quot;: {
            &quot;type&quot;: &quot;php&quot;,
            &quot;root&quot;: &quot;/www/helloworld/&quot;
        }
    }
}"><pre>{
    <span>"listeners"</span>: {
        <span>"127.0.0.1:8080"</span>: {
            <span>"pass"</span>: <span><span>"</span>applications/helloworld<span>"</span></span>
        }
    },

    <span>"applications"</span>: {
        <span>"helloworld"</span>: {
            <span>"type"</span>: <span><span>"</span>php<span>"</span></span>,
            <span>"root"</span>: <span><span>"</span>/www/helloworld/<span>"</span></span>
        }
    }
}</pre></div>
<p dir="auto">For full details of configuration management, see the
<a href="https://unit.nginx.org/configuration/#configuration-management" rel="nofollow">docs</a>.</p>
<h2 tabindex="-1" dir="auto">OpenAPI Specification</h2>
<p dir="auto">Our <a href="https://github.com/nginx/unit/blob/master/docs/unit-openapi.yaml">OpenAPI specification</a> aims to simplify
configuring and integrating NGINX Unit deployments and provide an authoritative
source of knowledge about the control API.</p>
<p dir="auto">Although the specification is still in the early beta stage, it is a promising
step forward for the NGINX Unit community. While working on it, we kindly ask
you to experiment and provide feedback to help improve its functionality and
usability.</p>
<h2 tabindex="-1" dir="auto">Community</h2>
<ul dir="auto">
<li>
<p dir="auto">The go-to place to start asking questions and share your thoughts is
our <a href="https://community.nginx.org/joinslack" rel="nofollow">Slack channel</a>.</p>
</li>
<li>
<p dir="auto">Our <a href="https://github.com/nginx/unit/issues">GitHub issues page</a> offers
space for a more technical discussion at your own pace.</p>
</li>
<li>
<p dir="auto">The <a href="https://github.com/orgs/nginx/projects/1">project map</a> on
GitHub sheds some light on our current work and plans for the future.</p>
</li>
<li>
<p dir="auto">Our <a href="https://unit.nginx.org/" rel="nofollow">official website</a> may provide answers
not easily found otherwise.</p>
</li>
<li>
<p dir="auto">Get involved with the project by contributing! See the
<a href="https://github.com/nginx/unit/blob/master/CONTRIBUTING.md">contributing guide</a> for details.</p>
</li>
<li>
<p dir="auto">To reach the team directly, subscribe to the
<a href="https://mailman.nginx.org/mailman/listinfo/unit" rel="nofollow">mailing list</a>.</p>
</li>
<li>
<p dir="auto">For security issues, <a href="https://github.com/nginx/unit/blob/master/security-alert@nginx.org">email us</a>, mentioning
NGINX Unit in the subject and following the <a href="https://www.first.org/cvss/v3.1/specification-document" rel="nofollow">CVSS
v3.1</a> spec.</p>
</li>
</ul>
</article>
          </div></div>]]></description>
        </item>
    </channel>
</rss>