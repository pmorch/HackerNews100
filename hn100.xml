<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Thu, 19 Sep 2024 16:30:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Pivotal Tracker will shut down (172 pts)]]></title>
            <link>https://www.pivotaltracker.com/blog/2024-09-18-end-of-life</link>
            <guid>41591622</guid>
            <pubDate>Thu, 19 Sep 2024 13:25:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.pivotaltracker.com/blog/2024-09-18-end-of-life">https://www.pivotaltracker.com/blog/2024-09-18-end-of-life</a>, See on <a href="https://news.ycombinator.com/item?id=41591622">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-swiftype-name="body" data-swiftype-type="text">
          <p>The VMware Tanzu division is announcing the end-of-life (EOL) for the Pivotal Tracker offering, effective April 30, 2025.</p>

<p>Customers with active Pivotal Tracker subscriptions may continue to use the offering through April 30, 2025, after which time the offering will sunset. You can export your data any time before April 30, 2025.</p>

<p>It is recommended to migrate any needed data out of Pivotal Tracker on a timely basis. Please review the instructions to export data <a href="https://www.pivotaltracker.com/help/articles/csv_import_export/">here</a>. If you have any issue in migrating data, <a href="mailto:support@pivotaltracker.com">raise a support ticket</a>. The VMware Tanzu division will not provide any support for migrating data beyond April 30, 2025.</p>

<p>Thank you,
VMware Tanzu Division</p>

<hr>
<h2 id="faq">FAQ</h2>

<h3 id="1-what-accounts-does-this-affect">1. What accounts does this affect?</h3>
<ul>
  <li>All accounts, whether under a free, sponsored (academic or non-profit), paid monthly/annual, or Enterprise subscription plan. They will remain available until April 30, 2025. No further renewals or transactions will take place.</li>
</ul>

<h3 id="2-how-do-i-download-my-project-data">2. How do I download my project data?</h3>
<ul>
  <li>Please see <a href="https://www.pivotaltracker.com/help/articles/csv_import_export/">our CSV export Help Center article</a> for assistance with exporting your project stories, epics, history and file attachments. We will be adding additional guidance to our Help Center over the next few months based on any new information we receive as well as the feedback we receive from you.</li>
</ul>

<h3 id="3-will-i-have-access-to-my-past-invoices">3. Will I have access to my past invoices?</h3>
<ul>
  <li>Yes, your past invoices will remain available on the existing <a href="https://www.pivotaltracker.com/help/articles/managing_your_account/#the-plans--billing-page">Plans &amp; Billing page</a>.</li>
</ul>

<h3 id="4-will-it-be-possible-to-create-new-users-or-accounts">4. Will it be possible to create new users or accounts?</h3>
<ul>
  <li>It will no longer be possible to sign up for Tracker without an invite or create new accounts. However, it will still be possible to invite new users to your account/projects, as long as you don’t exceed your collaborator limit.</li>
</ul>

        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Chili. Rust port of Spice, a low-overhead parallelization library (120 pts)]]></title>
            <link>https://github.com/dragostis/chili</link>
            <guid>41591449</guid>
            <pubDate>Thu, 19 Sep 2024 13:04:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/dragostis/chili">https://github.com/dragostis/chili</a>, See on <a href="https://news.ycombinator.com/item?id=41591449">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">chili</h2><a id="user-content-chili" aria-label="Permalink: chili" href="#chili"></a></p>
<p dir="auto"><a href="https://crates.io/crates/chili" rel="nofollow"><img src="https://camo.githubusercontent.com/c46860cb575bafe36a6be9f31657ea7284156b402dacac251c2e11e590fb8d2f/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f6368696c692e737667" alt="Crates.io" data-canonical-src="https://img.shields.io/crates/v/chili.svg"></a>
<a href="https://docs.rs/chili" rel="nofollow"><img src="https://camo.githubusercontent.com/ba01867190b37ab33b8213bf36d07e90c21058c078ed3f5dd262694f7b6bd0b8/68747470733a2f2f646f63732e72732f6368696c692f62616467652e737667" alt="Docs" data-canonical-src="https://docs.rs/chili/badge.svg"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Rust port of <a href="https://github.com/judofyr/spice">Spice</a>, a low-overhead parallelization library</h2><a id="user-content-rust-port-of-spice-a-low-overhead-parallelization-library" aria-label="Permalink: Rust port of Spice, a low-overhead parallelization library" href="#rust-port-of-spice-a-low-overhead-parallelization-library"></a></p>
<p dir="auto">Very low-overhead parallelization primitive, almost identical to
<a href="https://docs.rs/rayon/latest/rayon/fn.join.html" rel="nofollow"><code>rayon::join</code></a>. At any fork point during computation, it <em>may</em> run the two
passed closures in parallel.</p>
<p dir="auto">It works best in cases where there are many small computations and where it is
expensive to estimate how many are left on the current branch in order to stop trying to share work across threads.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Example</h2><a id="user-content-example" aria-label="Permalink: Example" href="#example"></a></p>
<p dir="auto">The following example sums up all nodes in a binary tree in parallel.</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn sum(node: &amp;Node, scope: &amp;mut Scope<'_>) -> u64 {
    let (left, right) = scope.join(
        |s| node.left.as_deref().map(|n| sum(n, s)).unwrap_or_default(),
        |s| node.right.as_deref().map(|n| sum(n, s)).unwrap_or_default(),
    );

    node.val + left + right
}"><pre><span>fn</span> <span>sum</span><span>(</span><span>node</span><span>:</span> <span>&amp;</span><span>Node</span><span>,</span> <span>scope</span><span>:</span> <span>&amp;</span><span>mut</span> <span>Scope</span><span>&lt;</span><span>'</span>_<span>&gt;</span><span>)</span> -&gt; <span>u64</span> <span>{</span>
    <span>let</span> <span>(</span>left<span>,</span> right<span>)</span> = scope<span>.</span><span>join</span><span>(</span>
        |s| node<span>.</span><span>left</span><span>.</span><span>as_deref</span><span>(</span><span>)</span><span>.</span><span>map</span><span>(</span>|n| <span>sum</span><span>(</span>n<span>,</span> s<span>)</span><span>)</span><span>.</span><span>unwrap_or_default</span><span>(</span><span>)</span><span>,</span>
        |s| node<span>.</span><span>right</span><span>.</span><span>as_deref</span><span>(</span><span>)</span><span>.</span><span>map</span><span>(</span>|n| <span>sum</span><span>(</span>n<span>,</span> s<span>)</span><span>)</span><span>.</span><span>unwrap_or_default</span><span>(</span><span>)</span><span>,</span>
    <span>)</span><span>;</span>

    node<span>.</span><span>val</span> + left + right
<span>}</span></pre></div>
<p dir="auto">This is the ideal example since per-node computation is very cheap and the
nodes don't keep track of how many descendants are left.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Benchmarks</h2><a id="user-content-benchmarks" aria-label="Permalink: Benchmarks" href="#benchmarks"></a></p>
<p dir="auto">The following benchmarks measure the time it takes to sum up all the values in
a balanced binary tree with varying number of nodes.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">AMD Ryzen 7 4800HS (8 cores)</h3><a id="user-content-amd-ryzen-7-4800hs-8-cores" aria-label="Permalink: AMD Ryzen 7 4800HS (8 cores)" href="#amd-ryzen-7-4800hs-8-cores"></a></p>
<p dir="auto">While the improvement over the baseline in the 134M nodes case is close to the
theoretical maximum, it's worth noting that the actual time per node is 0.8ns
vs. a theoretical 1.8 / 8 = 0.2ns, if we're to compare against the 1K nodes
case.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Number of nodes</th>
<th>Baseline</th>
<th>Rayon</th>
<th>chili</th>
<th>Baseline / chili</th>
</tr>
</thead>
<tbody>
<tr>
<td>1023</td>
<td>1.8 µs</td>
<td>51.1 µs</td>
<td>3.4 µs</td>
<td><strong>x0.53</strong></td>
</tr>
<tr>
<td>16777215</td>
<td>94.4 ms</td>
<td>58.1 ms</td>
<td>13.6 ms</td>
<td><strong>x6.94</strong></td>
</tr>
<tr>
<td>134217727</td>
<td>797.5 ms</td>
<td>497.2 ms</td>
<td>101.8 ms</td>
<td><strong>x7.83</strong></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h3 tabindex="-1" dir="auto">Apple M1 (8 cores)</h3><a id="user-content-apple-m1-8-cores" aria-label="Permalink: Apple M1 (8 cores)" href="#apple-m1-8-cores"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Number of nodes</th>
<th>Baseline</th>
<th>Rayon</th>
<th>chili</th>
<th>Baseline / chili</th>
</tr>
</thead>
<tbody>
<tr>
<td>1023</td>
<td>1.6 µs</td>
<td>29.2 µs</td>
<td>3.5 µs</td>
<td><strong>x0.46</strong></td>
</tr>
<tr>
<td>16777215</td>
<td>39.4 ms</td>
<td>40.5 ms</td>
<td>11.2 ms</td>
<td><strong>x3.51</strong></td>
</tr>
<tr>
<td>67108863</td>
<td>156.5 ms</td>
<td>167.1 ms</td>
<td>44.3 ms</td>
<td><strong>x3.53</strong></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h3 tabindex="-1" dir="auto">chili overhead on AMD Ryzen 7 4800HS (8 cores)</h3><a id="user-content-chili-overhead-on-amd-ryzen-7-4800hs-8-cores" aria-label="Permalink: chili overhead on AMD Ryzen 7 4800HS (8 cores)" href="#chili-overhead-on-amd-ryzen-7-4800hs-8-cores"></a></p>
<p dir="auto">The overhead in the 1K nodes case remains approximately constant with respect
to the number of threads.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Number of nodes</th>
<th>Baseline</th>
<th>1 thread</th>
<th>2 threads</th>
<th>4 threads</th>
<th>8 threads</th>
</tr>
</thead>
<tbody>
<tr>
<td>1023</td>
<td>1.8 ns</td>
<td>3.5 ns</td>
<td>3.5 ns</td>
<td>3.5 ns</td>
<td>3.5 ns</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[US health system ranks last compared with peer nations, report finds – US news (129 pts)]]></title>
            <link>https://www.theguardian.com/us-news/2024/sep/18/american-health-system-ranks-last</link>
            <guid>41588717</guid>
            <pubDate>Thu, 19 Sep 2024 05:08:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/us-news/2024/sep/18/american-health-system-ranks-last">https://www.theguardian.com/us-news/2024/sep/18/american-health-system-ranks-last</a>, See on <a href="https://news.ycombinator.com/item?id=41588717">Hacker News</a></p>
Couldn't get https://www.theguardian.com/us-news/2024/sep/18/american-health-system-ranks-last: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla has fired their Chief Product Officer after cancer diagnosis (164 pts)]]></title>
            <link>https://mastodon.social/@stevetex/113162099798398758</link>
            <guid>41588667</guid>
            <pubDate>Thu, 19 Sep 2024 05:00:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mastodon.social/@stevetex/113162099798398758">https://mastodon.social/@stevetex/113162099798398758</a>, See on <a href="https://news.ycombinator.com/item?id=41588667">Hacker News</a></p>
Couldn't get https://mastodon.social/@stevetex/113162099798398758: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Ask HN: My son might be blind – how to best support (276 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=41588200</link>
            <guid>41588200</guid>
            <pubDate>Thu, 19 Sep 2024 03:27:43 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=41588200">Hacker News</a></p>
Couldn't get https://news.ycombinator.com/item?id=41588200: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Nintendo Files Suit for Infringement of Patent Rights Against Pocketpair, Inc (283 pts)]]></title>
            <link>https://www.nintendo.co.jp/corporate/release/en/2024/240919.html</link>
            <guid>41587214</guid>
            <pubDate>Thu, 19 Sep 2024 00:37:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nintendo.co.jp/corporate/release/en/2024/240919.html">https://www.nintendo.co.jp/corporate/release/en/2024/240919.html</a>, See on <a href="https://news.ycombinator.com/item?id=41587214">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="single_frame">
        <div>
          <p>September 19, 2024</p>
          <p>To Whom It May Concern</p>
          <p>
            The Pokémon Company<br>
            Nintendo Co., Ltd.
          </p>
        </div>
      
      <div>

        <p>
          Nintendo Co., Ltd. (HQ: Kyoto, Minami-ku, Japan; Representative Director and President: Shuntaro Furukawa, “Nintendo” hereafter), together with The Pokémon Company, filed a patent infringement lawsuit in the Tokyo District Court against Pocketpair, Inc. (HQ: 2-10-2 Higashigotanda, Shinagawa-ku, Tokyo, “Defendant” hereafter) on September 18, 2024.
        </p>
        <p>
          This lawsuit seeks an injunction against infringement and compensation for damages on the grounds that <i>Palworld</i>, a game developed and released by the Defendant, infringes multiple patent rights.
        </p>
        <p>
          Nintendo will continue to take necessary actions against any infringement of its intellectual property rights including the Nintendo brand itself, to protect the intellectual properties it has worked hard to establish over the years.
        </p>
      </div>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Lichess: Post-Mortem of Our Longest Downtime (118 pts)]]></title>
            <link>https://lichess.org/@/Lichess/blog/post-mortem-of-our-longest-downtime/XAgG7jbd</link>
            <guid>41586579</guid>
            <pubDate>Wed, 18 Sep 2024 23:02:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lichess.org/@/Lichess/blog/post-mortem-of-our-longest-downtime/XAgG7jbd">https://lichess.org/@/Lichess/blog/post-mortem-of-our-longest-downtime/XAgG7jbd</a>, See on <a href="https://news.ycombinator.com/item?id=41586579">Hacker News</a></p>
<div id="readability-page-1" class="page"><p><strong>From 14:54 UTC on the 12th September until 01:33 UTC on the 13th September, Lichess experienced the longest downtime in its history.</strong></p><div><p>Surprisingly, this downtime was even longer than that time the datacenter where some of our servers were burned down.</p>
<p>We’re a community platform, which is solely funded by our community through small charitable donations — so you, as our beneficiaries and stakeholders, who support us and encourage us — deserve to get clarification on what happened, what we did, and what we’ll do in the future to mitigate this risk again.</p>
<h2><a href="#what-happened" id="what-happened"></a>What happened</h2>
<p>Essentially, our main server (known as manta) lost connection to our private network at 14:54 UTC. Thibault, our founder and main developer, and Lucas, our charity President and main system administrator, immediately began investigating.</p>
<p>Within minutes, they had both attempted our usual failsafes and identified the cause was likely a physical hardware issue in our provider’s (OVH) data centre. After that issue was finally fixed by OVH technicians, a secondary issue cropped up on the same server, this time affecting access to the internet, which could also only be fixed physically by a technician in the data centre. From start to finish, the interventions lasted approximately 10 hours.</p>
<h2><a href="#what-we-did" id="what-we-did"></a>What we did</h2>
<p>With Thibault and Lucas trying multiple fixes, the content team also quickly stepped into motion. The downtime was unfortunate, given the Chess Olympiad was in progress and our daily commentary was live with hours left.</p>
<p>When it became clear the downtime would be more than a few minutes, they began setting up our commentator, GM Illia Nyzhnyk, to a private sandbox version of Lichess. Illia — streaming for Lichess solo for the first time — handled the situation exceptionally professionally, and continued his excellent commentary almost seamlessly.</p>
<p>With our own options quickly exhausted on the technical side, Lucas submitted a support ticket to our provider at 15:33 UTC.</p>
<p>There wasn’t much more we could do other than wait for OVH to send a technician to fix the physical issue with our server. Thibault, Lucas, and by now several other developers and systems administrators, were now discussing increasingly outlandish (and exceptionally expensive) ideas to get Lichess temporarily back online.</p>
<p>After a follow up on our ticket to OVH, around two hours later, OVH let us know that a network connector had been replaced and the intervention was deemed successful.</p>
<p>However, we were then almost immediately hit by an additional issue; now it looked like the other network connector of the server was out of order! We then had to send another support ticket, but with it coming up to 19:00 UTC, or 21:00 in Europe, and without getting further replies from OVH, it seemed our next intervention had been pushed until morning.</p>
<p>By now, virtually all of our systems administrators and developers were in the same channel, with over 1,000 messages being sent in the infrastructure channel of our Zulip. Unfortunately, there was once again nothing more we could do other than wait.</p>
<p>Coming up to 22:00 UTC, and having heard nothing further from OVH, we assumed the issue likely would only be looked at in the morning. Lucas decided to call it a night (with call alerts set up) an hour later. Thibault stayed up.</p>
<p>At 00:41 UTC it seemed action was being taken on the server, judging from the logs and some bumpy restarts. In the end, Lichess was up and stable from 01:25 UTC.</p>
<h2><a href="#what-well-do-in-the-future" id="what-well-do-in-the-future"></a>What we’ll do in the future</h2>
<p>We’re in the process of getting further information from OVH to understand which component(s) had to be physically replaced, and why the intervention seemed to take an unusually long time.</p>
<p>Beyond that, we are investigating failsafes we can set up for these issues. The issue is not solely with OVH — to some extent, we also should have further failsafes set up. However, these failsafes take a considerable amount of time and expertise to set up, dealing with very sensitive parts of Lichess. With the time and expertise it takes, and on the budget that we have, we must ruthlessly prioritise.</p>
<p>While our developers and system administrators are incredibly talented, they are generally part-time volunteers; Lucas has a day job as a system administrator. Another of our sysadmins is a CTO at an innovative big geo startup. Another is in aeronautics for a living.</p>
<p>This is not shared to excuse us, but to highlight that the skills and resources we already rely on are often stretched thin, with other obligations — and that these individuals have all contributed their time because they play on Lichess and like the site.</p>
<h2><a href="#faq" id="faq"></a>FAQ</h2>
<h3><a href="#i-lost-rating-points--will-these-be-refunded" id="i-lost-rating-points--will-these-be-refunded"></a>I lost rating points — will these be refunded?</h3>
<p>Unfortunately, any rating lost will not be refunded. We appreciate this is unfortunate, but technically it is very difficult to be able to refund rating after such a crash.<br>On the bright side, rating is not a currency, it automatically adjusts to your skill. It will return to normal after just a few more rated games.</p>
<h3><a href="#ive-only-been-getting-games-as-white--black-is-that-connected-to-the-crash" id="ive-only-been-getting-games-as-white--black-is-that-connected-to-the-crash"></a>I’ve only been getting games as white / black. Is that connected to the crash?</h3>
<p>We recently made a change where players can no longer choose to play as black or white in all games except for direct challenges. Some players have a debt to a certain colour, to rebalance the games they owe with that colour. These issues are not linked. However, we will be adding a small change so that the rebalancing will be more gradual, and not 20+ games of one colour in a row.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ruby-SAML pwned by XML signature wrapping attacks (147 pts)]]></title>
            <link>https://ssoready.com/blog/engineering/ruby-saml-pwned-by-xml-signature-wrapping-attacks/</link>
            <guid>41586031</guid>
            <pubDate>Wed, 18 Sep 2024 21:59:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ssoready.com/blog/engineering/ruby-saml-pwned-by-xml-signature-wrapping-attacks/">https://ssoready.com/blog/engineering/ruby-saml-pwned-by-xml-signature-wrapping-attacks/</a>, See on <a href="https://news.ycombinator.com/item?id=41586031">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>
            GitLab and others are affected. The blame lies in the SAML specification, and in credulous engineers that implement it.
        </p><div>
            <p><a href="https://nvd.nist.gov/vuln/detail/CVE-2024-45409">CVE-2024-45409</a> was published
on September 10, 2024. It’s yet another XML signature wrapping attack, this time
affecting the main Ruby implementation of SAML. The vuln allows an attacker log
in as any arbitrary user of the affected system.</p>
<p>This attack keeps coming up
<a href="https://lists.w3.org/Archives/Public/public-xmlsec/2009Nov/att-0019/Camera-Ready.pdf">again</a>
and <a href="https://www.cve.org/CVERecord?id=CVE-2020-5390">again</a>, and it keeps
affecting huge swaths of the internet — this time,
<a href="https://about.gitlab.com/releases/2024/09/17/patch-release-gitlab-17-3-3-released/#saml-authentication-bypass">GitLab</a>
and much of the Ruby ecosystem — at a time.</p>
<p>Here’s what this issue is, why it keeps happening, and what we can do about it.</p>
<h2 id="xml-signature-wrapping">XML Signature Wrapping</h2>
<p>XML signatures are the year 2000’s answer to
<a href="https://en.wikipedia.org/wiki/JSON_Web_Token">JWTs</a>. In 2024, JWTs are a very
common answer to “I need to sign some data and send it over the internet”. It’s
not a perfect spec, but it’s workable.</p>
<p>XML signatures do the same thing, but every conceivable step is much more
complicated.</p>
<p>All an XML signature does is let you cryptographically sign an XML document.
Same thing as what JWTs do with <code>alg: "RS256"</code> (no <code>ES256</code>, because remember:
the year is 2000).</p>
<p>There is exactly one sane way to cryptographically sign data:</p>
<ol>
<li>You take your message, and convert it to bytes</li>
<li>You sign the bytes, which produces some more bytes</li>
<li>You transmit two things: the message-bytes from (1), and the signature-bytes from (2)</li>
<li><a href="https://en.wikipedia.org/wiki/KISS_principle">Don’t get cute</a>.</li>
</ol>
<p>Steps 1-3 is what JWT does. It does step (3) by separating the message and the
signature with a period (<code>.</code>), which works because it also base64s the message
and the signature, and <code>.</code> can’t appear in base64. People hate on JWT because it
forgot about (4); it’s part of an overarching attempt to standardize all of
crypto under something called
<a href="https://datatracker.ietf.org/group/jose/documents/">JOSE</a> (and
<a href="https://datatracker.ietf.org/doc/html/rfc8152">COSE</a>), a bad idea. But overall
they’re pretty good. They work. You can mostly ignore the overreach on the part
of the spec authors.</p>
<p>XML Signatures takes a different approach. Instead, it:</p>
<ol>
<li>Lets you sign <em>subsets</em> of a message,</li>
<li>Or none of the message at all,</li>
<li>Because instead of sending a signature accompanying your message, you <em>edit the very message you’re signing</em> to sprinkle in some <code>&lt;ds:Signature&gt;</code> elements,</li>
<li>Each of which sign a different
subset of the message. A <code>ds:Signature</code> uses a URI to point to other parts of
the message, and say “here’s a signature for that part of the message”</li>
</ol>
<p>If you ignore the XML-ness of it all, it’s the equivalent of signing <code>{"email": "bob@company.com"}</code> by modifying it to be:</p>
<div><pre tabindex="0"><code data-lang="json"><span><span><span>{</span>
</span></span><span><span>   <span>"email"</span><span>:</span> <span>"bob@company.com"</span><span>,</span> 
</span></span><span><span>   <span>"__sig"</span><span>:</span> <span>{</span>
</span></span><span><span>      <span>"uri"</span><span>:</span> <span>"/email"</span><span>,</span> 
</span></span><span><span>      <span>"sig"</span><span>:</span> <span>"... signature for the string bob@company.com ..."</span>
</span></span><span><span>   <span>}</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>This is a bad idea. It introduces the need for some “signature discovery” step,
where you search through the document for signatures (<code>__sig</code> in my JSON
example; <code>&lt;ds:Signature&gt;</code> elements in XML signatures). It basically begs
engineers to do this:</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span>def</span> <span>validate_xml</span><span>(</span><span>xml_document</span><span>):</span>
</span></span><span><span>    <span>for</span> <span>signature</span> <span>in</span> <span>find_xml_signature_elements</span><span>(</span><span>xml_document</span><span>):</span>
</span></span><span><span>        <span>element</span> <span>=</span> <span>resolve_uri</span><span>(</span><span>signature</span><span>[</span><span>"SignedInfo"</span><span>][</span><span>"Reference"</span><span>][</span><span>"URI"</span><span>],</span> <span>xml_document</span><span>)</span>
</span></span><span><span>        <span>verify_signature</span><span>(</span><span>element</span><span>,</span> <span>signature</span><span>[</span><span>"SignatureValue"</span><span>]</span>
</span></span></code></pre></div><p>Note that this doesn’t actually <em>do</em> anything if the document doesn’t have any
signature at all.</p>
<p>People write a ton of bugs related to this “signature discovery” step. Every
such bug is what they call a “XML Signature Wrapping” attack; someone wrote some
tricky XML that makes your code lose track of what’s actually being signed.</p>
<p>To anticipate the obvious suggestion: no, sadly you can’t just check whether the
top-level XML document is signed, because that’s not how SAML does it (more
later), and SAML is the only reason people do XML Signatures (again, more
later).</p>
<p>So you instead in practice have people adapting their previous code to make sure
that the part of the message they care about is, in fact, signed:</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span>def</span> <span>validate_xml</span><span>(</span><span>xml_document</span><span>,</span> <span>uri_checklist</span><span>):</span>
</span></span><span><span>    <span>checked_uris</span> <span>=</span> <span>[]</span>
</span></span><span><span>    <span>for</span> <span>signature</span> <span>in</span> <span>find_xml_signature_elements</span><span>(</span><span>xml_document</span><span>):</span>
</span></span><span><span>        <span>element</span> <span>=</span> <span>resolve_uri</span><span>(</span><span>signature</span><span>[</span><span>"SignedInfo"</span><span>][</span><span>"Reference"</span><span>][</span><span>"URI"</span><span>],</span> <span>xml_document</span><span>)</span>
</span></span><span><span>        <span>verify_signature</span><span>(</span><span>element</span><span>,</span> <span>signature</span><span>[</span><span>"SignatureValue"</span><span>]</span>
</span></span><span><span>        <span>checked_uris</span><span>.</span><span>append</span><span>(</span><span>signature</span><span>[</span><span>"SignedInfo"</span><span>][</span><span>"Reference"</span><span>][</span><span>"URI"</span><span>])</span>
</span></span><span><span>    
</span></span><span><span>    <span>for</span> <span>uri</span> <span>in</span> <span>uri_checklist</span><span>:</span>
</span></span><span><span>        <span>if</span> <span>uri</span> <span>not</span> <span>in</span> <span>checked_uris</span><span>:</span>
</span></span><span><span>            <span>throw</span> <span>MissingSignatureError</span><span>()</span>
</span></span></code></pre></div><p>There are a million ways this goes wrong, but here’s the one <code>ruby-saml</code> ran
into: there’s nothing that guarantees the <code>URI</code> the signature points to is
unique.</p>
<p>So what you could do is take a legitimate message, and just stick some other
stuff into the message, reusing the same <code>URI</code>. And then hope your victim’s code
will get confused as to what it just signed.</p>
<p>Something like this:</p>
<div><pre tabindex="0"><code data-lang="xml"><span><span><span>&lt;Document&gt;</span>
</span></span><span><span>    <span>&lt;!-- a faked message; this is never actually signed --&gt;</span>
</span></span><span><span>    <span>&lt;ImportantStuff&gt;</span>
</span></span><span><span>        <span>&lt;Message</span> <span>id=</span><span>"dead[...]beef"</span><span>&gt;</span>
</span></span><span><span>            <span>&lt;Email&gt;</span>eve@evil.com<span>&lt;/Email&gt;</span>
</span></span><span><span>        <span>&lt;/Message&gt;</span>
</span></span><span><span>    <span>&lt;/ImportantStuff&gt;</span>
</span></span><span><span>    
</span></span><span><span>    <span>&lt;!-- attacker-supplied message, copied out of the ImportantStuff from a legit message --&gt;</span>
</span></span><span><span>    <span>&lt;Message</span> <span>id=</span><span>"dead[...]beef"</span><span>&gt;</span>
</span></span><span><span>        <span>&lt;Email&gt;</span>alice@customer.com<span>&lt;/Email&gt;</span>
</span></span><span><span>    <span>&lt;/Message&gt;</span>
</span></span><span><span>    
</span></span><span><span>    <span>&lt;!-- a signature for alice@customer.com --&gt;</span>
</span></span><span><span>    <span>&lt;Signature&gt;</span>
</span></span><span><span>        <span>&lt;SignedInfo&gt;</span>
</span></span><span><span>            <span>&lt;Reference</span> <span>URI=</span><span>"dead[...]beef"</span> <span>/&gt;</span>
</span></span><span><span>        <span>&lt;/SignedInfo&gt;</span>
</span></span><span><span>        <span>&lt;SignatureValue&gt;</span>... the correct signature, but for alice@customer.com ...<span>&lt;/SignatureValue&gt;</span>
</span></span><span><span>    <span>&lt;/Signature&gt;</span>
</span></span><span><span><span>&lt;/Document&gt;</span>
</span></span></code></pre></div><p>The victim code finds the signature, resolves the uri to the top-level
<code>Message</code>, but then later on would process <code>ImportantStuff</code> instead of
<code>Message</code>, if that’s where the <code>Message</code> is normally placed.</p>
<p>It’s a mess. Ruby-SAML patched this by <a href="https://github.com/SAML-Toolkits/ruby-saml/commit/4865d030cae9705ee5cdb12415c654c634093ae7">throwing if <code>resolve_uri</code> finds more
than one
match</a>.
But Ruby-SAML has no reliable way of validating which parts of an XML document
were signed, and so I wouldn’t be surprised if there were more issues in that
codebase lurking.</p>
<h2 id="saml-is-why-this-matters">SAML is why this matters</h2>
<p>Nobody cares about XML Signatures anymore, except in the context of SAML. SAML
is what people mean by “enterprise single-sign-on”, and it works by having an
Identity Provider (Okta, Microsoft Entra, Google Workspace, etc.) send a signed
XML message to a Service Provider (a B2B SaaS product). That message typically
just contains the logging in user’s email address. It’s an elaborate email
address transmission protocol.</p>
<p>Concretely, SAML requests are a POST from your user’s browser containing:</p>
<div><pre tabindex="0"><code data-lang="xml"><span><span><span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
</span></span><span><span><span>&lt;saml2p:Response&gt;</span>
</span></span><span><span>    <span>&lt;saml2:Assertion</span> <span>ID=</span><span>"id2829877824622019702853127"</span><span>&gt;</span>
</span></span><span><span>        <span>&lt;saml2:Issuer&gt;</span>
</span></span><span><span>            http://www.okta.com/exkig8gdo63cjI4OD5d7
</span></span><span><span>        <span>&lt;/saml2:Issuer&gt;</span>
</span></span><span><span>        <span>&lt;ds:Signature&gt;</span>
</span></span><span><span>            <span>&lt;ds:SignedInfo&gt;</span>
</span></span><span><span>                <span>&lt;ds:Reference</span> <span>URI=</span><span>"#id2829877824622019702853127"</span><span>&gt;</span>
</span></span><span><span>                <span>&lt;/ds:Reference&gt;</span>
</span></span><span><span>            <span>&lt;/ds:SignedInfo&gt;</span>
</span></span><span><span>            <span>&lt;ds:SignatureValue&gt;</span>
</span></span><span><span>                n744L/[...]mDruC1H9E0Lz7sbZg==
</span></span><span><span>            <span>&lt;/ds:SignatureValue&gt;</span>
</span></span><span><span>        <span>&lt;/ds:Signature&gt;</span>
</span></span><span><span>        <span>&lt;saml2:Subject&gt;</span>
</span></span><span><span>            <span>&lt;saml2:NameID&gt;</span>
</span></span><span><span>                ulysse.carion@ssoready.com
</span></span><span><span>            <span>&lt;/saml2:NameID&gt;</span>
</span></span><span><span>        <span>&lt;/saml2:Subject&gt;</span>
</span></span><span><span>    <span>&lt;/saml2:Assertion&gt;</span>
</span></span><span><span><span>&lt;/saml2p:Response&gt;</span>
</span></span></code></pre></div><p>And “implementing SAML” mostly consists of:</p>
<ol>
<li>“Validating” the message, with all the fraught gotchas that entails</li>
<li>Logging in the user as <code>ulysse.carion@ssoready.com</code>.</li>
</ol>
<p>Notice how this is roughly the same shape of message that I laid out in the
previous example. I won’t disclose it here because that’d be irresponsible, but
you can do the same attack. You could get me to validate the message in step
(1), but then have some other thing in the message, also with
<code>ID="id2829877824622019702853127"</code>, that I use in step (2).</p>
<p>To repeat it again, the core dumb idea here is that you’re signing a message,
instead of signing bytes. XML Signatures interweaves cryptography and the XML
tree model into a messy knot. It’s really hard to make sure the message you’re
processing is the same as the bytes you verified.</p>
<h2 id="how-to-fix-this-disregard-the-spec">How to fix this: disregard the spec</h2>
<p>SAML library authors need to stop being so credulous about the spec.</p>
<p>When a specification is a collection of security flaws, responsible engineers
disregard the specification. Responsible engineers should disregard what the
SAML and XML Signatures spec authors wrote down, and instead implement the
secure thing at its core.</p>
<p>Put another way, the reason XML wrapping attacks keep coming up is that people
architect their code like this:</p>
<ol>
<li><code>saml-ruby</code> calls into some</li>
<li><code>xml-signatures-ruby</code> dependency or submodule</li>
</ol>
<p>This seems like good, sane composition. But XML Signatures is insane. It cannot
be composed. XML Signatures can’t say “yes this message is valid”. What it can
say is “these N potentially-overlapping subsets of this XML document are
correctly signed” (It’s actually <a href="https://ssoready.com/blog/engineering/xml-dsig-is-unfortunate/">considerably worse than
that</a>, but whatever). There’s no
building on top of XML Signatures.</p>
<p>So here’s the sane thing to do instead:</p>
<ol>
<li>Notice that every Identity Provider in the world has practically agreed to
shape their SAML payloads in the same shape.</li>
<li>Assume all messages shaped otherwise are invalid.</li>
<li>Disregard the <code>URI</code> in XML signatures.</li>
<li>Presume in advance that they’re signing exactly the subset of the SAML
payload they should be signing, which is also the subset of the payload
you’ll be processing later.</li>
<li>Verify <em>that</em> signature, and only that signature.</li>
</ol>
<p>In other words: forget XML signatures. Treat it as some weird relic. Just look
at the SAML payload, and implement the de-facto protocol that has emerged.</p>
<p>Ignore <a href="https://en.wikipedia.org/wiki/Robustness_principle">Postel</a>. When it
comes to processing cryptographic signatures, loosey-goosey isn’t “liberal”,
it’s libertine.</p>

        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: I've Built an Accounting System (144 pts)]]></title>
            <link>https://github.com/denys-olleik/accounting</link>
            <guid>41585468</guid>
            <pubDate>Wed, 18 Sep 2024 21:04:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/denys-olleik/accounting">https://github.com/denys-olleik/accounting</a>, See on <a href="https://news.ycombinator.com/item?id=41585468">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/yt-thumb.png"><img src="https://github.com/denys-olleik/accounting/raw/master/yt-thumb.png" alt="Watch the video"></a></p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=MoYr0cgosOY" rel="nofollow">Watch the video on YouTube</a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">It doesn't have to be this confusing...</h2><a id="user-content-it-doesnt-have-to-be-this-confusing" aria-label="Permalink: It doesn't have to be this confusing..." href="#it-doesnt-have-to-be-this-confusing"></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Account Type</th>
<th>Debit</th>
<th>Credit</th>
</tr>
</thead>
<tbody>
<tr>
<td>Assets</td>
<td>Increase</td>
<td>Decrease</td>
</tr>
<tr>
<td>Liabilities</td>
<td>Decrease</td>
<td>Increase</td>
</tr>
<tr>
<td>Equity/Capital</td>
<td>Decrease</td>
<td>Increase</td>
</tr>
<tr>
<td>Revenue/Income</td>
<td>Decrease</td>
<td>Increase</td>
</tr>
<tr>
<td>Expenses</td>
<td>Increase</td>
<td>Decrease</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><h2 tabindex="-1" dir="auto">Screenshots</h2><a id="user-content-screenshots" aria-label="Permalink: Screenshots" href="#screenshots"></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/chrome_1YoniUtAt3.gif"><img src="https://github.com/denys-olleik/accounting/raw/master/chrome_1YoniUtAt3.gif" alt="Watch the video" data-animated-image=""></a></h2><a id="" aria-label="Permalink: " href="#"></a></div>
<div dir="auto"><h2 tabindex="-1" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/chrome_gp6bHABAqw.png"><img src="https://github.com/denys-olleik/accounting/raw/master/chrome_gp6bHABAqw.png" alt="Watch the video"></a></h2><a id="user-content--1" aria-label="Permalink: " href="#-1"></a></div>
<div dir="auto"><h2 tabindex="-1" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/chrome_CodNSOn0C2.png"><img src="https://github.com/denys-olleik/accounting/raw/master/chrome_CodNSOn0C2.png" alt="Watch the video"></a></h2><a id="user-content--2" aria-label="Permalink: " href="#-2"></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/chrome_YHpC5nO5Ir.png"><img src="https://github.com/denys-olleik/accounting/raw/master/chrome_YHpC5nO5Ir.png" alt="Watch the video"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Introduction</h2><a id="user-content-introduction" aria-label="Permalink: Introduction" href="#introduction"></a></p>
<p dir="auto">GAAP and IFRS compliant implementation of a forward-only double-entry accounting method with a relational database. Suitable for U.S. and international organizations.</p>
<p dir="auto">The only system capable of managing everything from a single laundromat to a cartel, multiple aircraft carriers, and everything in between, uncontaminated by Silicon Valley 🐂💩.</p>
<p dir="auto">Due to its wide scope, the system is designed to be incomplete, allowing organizations to finalize the implementation.</p>
<ul dir="auto">
<li><strong>Using</strong>: C# • ASP.NET MVC • Vue.js • PostgreSQL</li>
</ul>
<p dir="auto">This solution contains example integrations of feature-specific junction tables which group the journal entries into a transaction for specific user action or feature.</p>
<p dir="auto">A feature should be integrated with the journal if it affects one of the following account types: revenue, expense, liabilities, assets, or equity.</p>
<p dir="auto">Since every feature that impacts the journal requires a minimum of two entries, a <code>TransactionGuid</code> column is used to group these entries together.</p>
<p dir="auto">To implement a new feature affecting the journal, create a table to group the transaction. Prefix the table with <code>GeneralLedger...</code>, then append the names of the tables referenced by the foreign keys that appear immediately after the <code>GeneralLedgerId</code> foreign key and before the <code>Reversed...</code> column (excluding the "Id" suffix from each). For example, <code>GeneralLedgerInvoiceInvoiceLine</code> is named as such because the foreign keys after the <code>GeneralLedgerId</code> but before <code>Reversed...</code> columns are <code>InvoiceId</code> and <code>InvoiceLineId</code>. Include a <code>Reversed...</code> column to reference the entries being reversed, and a <code>TransactionGuid</code> for grouping entries. This structure supports a reversal-and-amendment strategy in a forward-only journal, where entries cannot be modified once recorded. For example, if the revenue recognition for invoice line-items needs to be adjusted after initial creation, the original entries are reversed, and new ones are added.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;GeneralLedgerInvoiceInvoiceLine&quot;
(
	&quot;GeneralLedgerInvoiceInvoiceLineID&quot; SERIAL PRIMARY KEY NOT NULL,
	&quot;GeneralLedgerId&quot; INT NOT NULL,
	&quot;InvoiceId&quot; INT NOT NULL,
	&quot;InvoiceLineId&quot; INT NOT NULL,
	&quot;ReversedGeneralLedgerInvoiceInvoiceLineId&quot; INT NULL,
	&quot;TransactionGuid&quot; UUID NOT NULL,
	&quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE 'UTC'),
	&quot;CreatedById&quot; INT NOT NULL,
	&quot;OrganizationId&quot; INT NOT NULL,
	FOREIGN KEY (&quot;GeneralLedgerId&quot;) REFERENCES &quot;GeneralLedger&quot;(&quot;GeneralLedgerID&quot;),
	FOREIGN KEY (&quot;InvoiceId&quot;) REFERENCES &quot;Invoice&quot;(&quot;InvoiceID&quot;),
	FOREIGN KEY (&quot;InvoiceLineId&quot;) REFERENCES &quot;InvoiceLine&quot;(&quot;InvoiceLineID&quot;),
	FOREIGN KEY (&quot;ReversedGeneralLedgerInvoiceInvoiceLineId&quot;) REFERENCES &quot;GeneralLedgerInvoiceInvoiceLine&quot;(&quot;GeneralLedgerInvoiceInvoiceLineID&quot;),
	FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
	FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;(&quot;OrganizationID&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>GeneralLedgerInvoiceInvoiceLine</span>"
(
	<span><span>"</span>GeneralLedgerInvoiceInvoiceLineID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
	<span><span>"</span>GeneralLedgerId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>InvoiceId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>InvoiceLineId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>ReversedGeneralLedgerInvoiceInvoiceLineId<span>"</span></span> <span>INT</span> <span>NULL</span>,
	<span><span>"</span>TransactionGuid<span>"</span></span> UUID <span>NOT NULL</span>,
	<span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE <span><span>'</span>UTC<span>'</span></span>),
	<span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span>FOREIGN KEY</span> (<span><span>"</span>GeneralLedgerId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>GeneralLedger<span>"</span></span>(<span><span>"</span>GeneralLedgerID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>InvoiceId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Invoice<span>"</span></span>(<span><span>"</span>InvoiceID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>InvoiceLineId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>InvoiceLine<span>"</span></span>(<span><span>"</span>InvoiceLineID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>ReversedGeneralLedgerInvoiceInvoiceLineId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>GeneralLedgerInvoiceInvoiceLine<span>"</span></span>(<span><span>"</span>GeneralLedgerInvoiceInvoiceLineID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>(<span><span>"</span>OrganizationID<span>"</span></span>)
);</pre></div>
<p dir="auto">This naming strategy makes it easy for developers to understand the relationship between features and the journal.</p>
<p dir="auto">The <code>GeneralLedgerInvoiceInvoiceLine</code> is used to record entries during creation of the invoice, the modification of the line-items, and the removal of the line-items from the invoice. However, if you require these concepts to be separated even further, you could adopt a different naming strategy, for example, <code>GeneralLedgerInvoiceInvoiceLineCreated</code>, <code>GeneralLedgerInvoiceInvoiceLineUpdated</code>, <code>GeneralLedgerInvoiceInvoiceLineRemoved</code>.</p>
<p dir="auto">For example, it may be useful to know how much revenue is lost due to line-items being removed from the invoice.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Journal, accounts, and double-entry</h2><a id="user-content-journal-accounts-and-double-entry" aria-label="Permalink: Journal, accounts, and double-entry" href="#journal-accounts-and-double-entry"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;Account&quot;
(
	&quot;AccountID&quot; SERIAL PRIMARY KEY NOT NULL,
	&quot;Name&quot; VARCHAR(200) NOT NULL,
	&quot;Type&quot; VARCHAR(50) NOT NULL CHECK (&quot;Type&quot; IN ('assets', 'liabilities', 'equity', 'revenue', 'expense')),
	-- ...
	&quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE 'UTC'),
	&quot;ParentAccountId&quot; INT NULL,
	&quot;CreatedById&quot; INT NOT NULL,
	&quot;OrganizationId&quot; INT NOT NULL,
	FOREIGN KEY (&quot;ParentAccountId&quot;) REFERENCES &quot;Account&quot;(&quot;AccountID&quot;),
	FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
	FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;(&quot;OrganizationID&quot;),
	UNIQUE (&quot;Name&quot;, &quot;OrganizationId&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>Account</span>"
(
	<span><span>"</span>AccountID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
	<span><span>"</span>Name<span>"</span></span> <span>VARCHAR</span>(<span>200</span>) <span>NOT NULL</span>,
	<span><span>"</span>Type<span>"</span></span> <span>VARCHAR</span>(<span>50</span>) <span>NOT NULL</span> <span>CHECK</span> (<span><span>"</span>Type<span>"</span></span> <span>IN</span> (<span><span>'</span>assets<span>'</span></span>, <span><span>'</span>liabilities<span>'</span></span>, <span><span>'</span>equity<span>'</span></span>, <span><span>'</span>revenue<span>'</span></span>, <span><span>'</span>expense<span>'</span></span>)),
	<span><span>--</span> ...</span>
	<span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE <span><span>'</span>UTC<span>'</span></span>),
	<span><span>"</span>ParentAccountId<span>"</span></span> <span>INT</span> <span>NULL</span>,
	<span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span>FOREIGN KEY</span> (<span><span>"</span>ParentAccountId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Account<span>"</span></span>(<span><span>"</span>AccountID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>(<span><span>"</span>OrganizationID<span>"</span></span>),
	UNIQUE (<span><span>"</span>Name<span>"</span></span>, <span><span>"</span>OrganizationId<span>"</span></span>)
);</pre></div>
<p dir="auto">The <code>ParentAccountId</code> allows for hierarchical relationships which allow for better reporting and analysis. However, ensuring that the <code>ParentAccountId</code> is of the same <code>Type</code> as the <code>AccountID</code> is enforced at application level.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;GeneralLedger&quot;
(
	&quot;GeneralLedgerID&quot; SERIAL PRIMARY KEY NOT NULL,
	&quot;AccountId&quot; INT NOT NULL,
	&quot;Credit&quot; DECIMAL(20, 4) NULL,
	&quot;Debit&quot; DECIMAL(20, 4) NULL,
	&quot;CurrencyCode&quot; VARCHAR(3) NULL, 
	&quot;ExchangeRate&quot; DECIMAL(12, 5) NULL, 
	&quot;Memo&quot; TEXT NULL,
	&quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE 'UTC'),
	&quot;CreatedById&quot; INT NOT NULL,
	&quot;OrganizationId&quot; INT NOT NULL,
	FOREIGN KEY (&quot;AccountId&quot;) REFERENCES &quot;Account&quot;(&quot;AccountID&quot;),
	FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
	FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;(&quot;OrganizationID&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>GeneralLedger</span>"
(
	<span><span>"</span>GeneralLedgerID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
	<span><span>"</span>AccountId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>Credit<span>"</span></span> <span>DECIMAL</span>(<span>20</span>, <span>4</span>) <span>NULL</span>,
	<span><span>"</span>Debit<span>"</span></span> <span>DECIMAL</span>(<span>20</span>, <span>4</span>) <span>NULL</span>,
	<span><span>"</span>CurrencyCode<span>"</span></span> <span>VARCHAR</span>(<span>3</span>) <span>NULL</span>, 
	<span><span>"</span>ExchangeRate<span>"</span></span> <span>DECIMAL</span>(<span>12</span>, <span>5</span>) <span>NULL</span>, 
	<span><span>"</span>Memo<span>"</span></span> <span>TEXT</span> <span>NULL</span>,
	<span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE <span><span>'</span>UTC<span>'</span></span>),
	<span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
	<span>FOREIGN KEY</span> (<span><span>"</span>AccountId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Account<span>"</span></span>(<span><span>"</span>AccountID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
	<span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>(<span><span>"</span>OrganizationID<span>"</span></span>)
);</pre></div>
<p dir="auto">Journal entries are made in transactions of at least two entries where the sum of credits equals debits.</p>
<p dir="auto">Double entry is misleading because some people assume the entries of a transactions are made in pairs, or have an even number of entries.</p>
<p dir="auto">A typical chart-of-accounts might look like...</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>AccountID</th>
<th>Name</th>
<th>Type</th>
<th>ParentAccountId</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>accounts-receivable</td>
<td>assets</td>
<td>NULL</td>
</tr>
<tr>
<td>2</td>
<td>revenue</td>
<td>revenue</td>
<td>NULL</td>
</tr>
<tr>
<td>3</td>
<td>revenue-service</td>
<td>revenue</td>
<td>2</td>
</tr>
<tr>
<td>4</td>
<td>revenue-product</td>
<td>revenue</td>
<td>2</td>
</tr>
<tr>
<td>5</td>
<td>cash</td>
<td>assets</td>
<td>NULL</td>
</tr>
<tr>
<td>6</td>
<td>chase-9988</td>
<td>assets</td>
<td>NULL</td>
</tr>
<tr>
<td>7</td>
<td>chase-9988-debit-card-2323</td>
<td>assets</td>
<td>6</td>
</tr>
<tr>
<td>8</td>
<td>expense</td>
<td>expense</td>
<td>NULL</td>
</tr>
<tr>
<td>9</td>
<td>expense-diesel</td>
<td>expense</td>
<td>8</td>
</tr>
<tr>
<td>10</td>
<td>expense-meals</td>
<td>expense</td>
<td>8</td>
</tr>
<tr>
<td>11</td>
<td>expense-maintenance</td>
<td>expense</td>
<td>8</td>
</tr>
<tr>
<td>12</td>
<td>discover-5555</td>
<td>liabilities</td>
<td>NULL</td>
</tr>
<tr>
<td>13</td>
<td>inventory</td>
<td>assets</td>
<td>NULL</td>
</tr>
<tr>
<td>14</td>
<td>sales-tax-payable</td>
<td>liabilities</td>
<td>NULL</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Keep an eye on number 14.</p>
<p dir="auto">Consider a transaction where an invoice is created with one line-item which requires sales tax to be collected...</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>GeneralLedgerID</th>
<th>AccountId</th>
<th>Credit</th>
<th>Debit</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1  (ar)</td>
<td>0.00</td>
<td>1100.00</td>
</tr>
<tr>
<td>2</td>
<td>2  (revenue)</td>
<td>1000.00</td>
<td>0.00</td>
</tr>
<tr>
<td>3</td>
<td>14 (liabilities)</td>
<td>100.00</td>
<td>0.00</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">The above table shows a valid transaction made up of three entries where debits equal credits.</p>
<p dir="auto">Examine the <code>TransactionGuid</code> column in the table below from the result of <code>SELECT * FROM "GeneralLedgerInvoiceInvoiceLine";</code> to identify transaction boundary.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>ID</th>
<th>GeneralLedgerId</th>
<th>InvoiceId</th>
<th>InvoiceLineId</th>
<th>ReversedId</th>
<th>TransactionGuid</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>NULL</td>
<td>e0b84e1c-e62d-60f2-0a96-61f895c14fcf</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>NULL</td>
<td>e0b84e1c-e62d-60f2-0a96-61f895c14fcf</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
<td>1</td>
<td>2</td>
<td>NULL</td>
<td>e0b84e1c-e62d-60f2-0a96-61f895c14fcf</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>1</td>
<td>2</td>
<td>NULL</td>
<td>e0b84e1c-e62d-60f2-0a96-61f895c14fcf</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>6</td>
<td>6</td>
<td>1</td>
<td>1</td>
<td>NULL</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>7</td>
<td>7</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>8</td>
<td>8</td>
<td>1</td>
<td>1</td>
<td>NULL</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>9</td>
<td>9</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>10</td>
<td>10</td>
<td>1</td>
<td>2</td>
<td>NULL</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>11</td>
<td>11</td>
<td>1</td>
<td>2</td>
<td>4</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>12</td>
<td>12</td>
<td>1</td>
<td>2</td>
<td>NULL</td>
<td>91977936-5d6a-401b-7ea6-9092eee92918</td>
</tr>
<tr>
<td>13</td>
<td>13</td>
<td>1</td>
<td>1</td>
<td>6</td>
<td>227fa74a-3166-01b6-61db-0f6a6af4a52e</td>
</tr>
<tr>
<td>14</td>
<td>14</td>
<td>1</td>
<td>1</td>
<td>8</td>
<td>227fa74a-3166-01b6-61db-0f6a6af4a52e</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Note the reversing entries and the three separate transactions.</p>
<ol dir="auto">
<li>Rows 1-4 invoice with two line-items is created.</li>
<li>Rows 5-12 both line-items updated.</li>
<li>Rows 13-14 one line-item is removed.</li>
</ol>
<p dir="auto"><strong>To prevent confusion regarding how to determine if a line-item was removed from an invoice, and without adding additional flags or columns to indicate line-item removal, the line-items whose transactions end with a reversal are considered removed from the invoice.</strong></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Payments</h2><a id="user-content-payments" aria-label="Permalink: Payments" href="#payments"></a></p>
<ul dir="auto">
<li>Payments are received against invoice line-items.</li>
<li>Payments can be partial.</li>
<li>The relationship between payment and invoice is many-to-many.</li>
</ul>
<p dir="auto">The <code>GeneralLedgerInvoiceInvoiceLinePayment</code> links the journal entries with the payment.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;GeneralLedgerInvoiceInvoiceLinePayment&quot;
(
  &quot;GeneralLedgerInvoiceInvoiceLinePaymentID&quot; SERIAL PRIMARY KEY NOT NULL,
  &quot;GeneralLedgerId&quot; INT NOT NULL,
  &quot;InvoiceInvoiceLinePaymentId&quot; INT NOT NULL,
  &quot;ReversedGeneralLedgerInvoiceInvoiceLinePaymentId&quot; INT NULL,
  &quot;TransactionGuid&quot; UUID NOT NULL,
  &quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE  'UTC'),
  &quot;CreatedById&quot; INT NOT NULL,
  &quot;OrganizationId&quot; INT NOT NULL,
  FOREIGN KEY (&quot;GeneralLedgerId&quot;) REFERENCES &quot;GeneralLedger&quot;  (&quot;GeneralLedgerID&quot;),
  FOREIGN KEY (&quot;InvoiceInvoiceLinePaymentId&quot;) REFERENCES  &quot;InvoiceInvoiceLinePayment&quot;(&quot;InvoiceInvoiceLinePaymentID&quot;),
  FOREIGN KEY (&quot;ReversedGeneralLedgerInvoiceInvoiceLinePaymentId&quot;)  REFERENCES &quot;GeneralLedgerInvoiceInvoiceLinePayment&quot;  (&quot;GeneralLedgerInvoiceInvoiceLinePaymentID&quot;),
  FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
  FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;  (&quot;OrganizationID&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>GeneralLedgerInvoiceInvoiceLinePayment</span>"
(
  <span><span>"</span>GeneralLedgerInvoiceInvoiceLinePaymentID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
  <span><span>"</span>GeneralLedgerId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>InvoiceInvoiceLinePaymentId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>ReversedGeneralLedgerInvoiceInvoiceLinePaymentId<span>"</span></span> <span>INT</span> <span>NULL</span>,
  <span><span>"</span>TransactionGuid<span>"</span></span> UUID <span>NOT NULL</span>,
  <span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE  <span><span>'</span>UTC<span>'</span></span>),
  <span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span>FOREIGN KEY</span> (<span><span>"</span>GeneralLedgerId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>GeneralLedger<span>"</span></span>  (<span><span>"</span>GeneralLedgerID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>InvoiceInvoiceLinePaymentId<span>"</span></span>) <span>REFERENCES</span>  <span><span>"</span>InvoiceInvoiceLinePayment<span>"</span></span>(<span><span>"</span>InvoiceInvoiceLinePaymentID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>ReversedGeneralLedgerInvoiceInvoiceLinePaymentId<span>"</span></span>)  <span>REFERENCES</span> <span><span>"</span>GeneralLedgerInvoiceInvoiceLinePayment<span>"</span></span>  (<span><span>"</span>GeneralLedgerInvoiceInvoiceLinePaymentID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>  (<span><span>"</span>OrganizationID<span>"</span></span>)
);</pre></div>
<p dir="auto">An incoming check is usually entered into the system before it is deposited. Ideally, the check should be entered into a check-in-transit or similar asset account and later synchronized when it appears on the statement.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Reconciliations</h2><a id="user-content-reconciliations" aria-label="Permalink: Reconciliations" href="#reconciliations"></a></p>
<p dir="auto">The pattern repeats in the <code>GeneralLedgerReconciliationTransaction</code> table. A bank or credit card statement contains rows of transactions. Credit card statements will have expense transactions while bank statements will have both expense and revenue transactions.</p>
<p dir="auto">Each transaction in the statement should be uniquely identifiable, but often the exported CSV does not contain a column to uniquely identify the row.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &quot;GeneralLedgerReconciliationTransaction&quot;
(
  &quot;GeneralLedgerReconciliationTransactionID&quot; SERIAL PRIMARY KEY NOT NULL,
  &quot;GeneralLedgerId&quot; INT NOT NULL,
  &quot;ReconciliationTransactionId&quot; INT NOT NULL,
  &quot;ReversedGeneralLedgerReconciliationTransactionId&quot; INT NULL,
  &quot;TransactionGuid&quot; UUID NOT NULL,
  &quot;Created&quot; TIMESTAMPTZ NOT NULL DEFAULT (CURRENT_TIMESTAMP AT TIME ZONE  'UTC'),
  &quot;CreatedById&quot; INT NOT NULL,
  &quot;OrganizationId&quot; INT NOT NULL,
  FOREIGN KEY (&quot;GeneralLedgerId&quot;) REFERENCES &quot;GeneralLedger&quot;  (&quot;GeneralLedgerID&quot;),
  FOREIGN KEY (&quot;ReconciliationTransactionId&quot;) REFERENCES  &quot;ReconciliationTransaction&quot;(&quot;ReconciliationTransactionID&quot;),
  FOREIGN KEY (&quot;ReversedGeneralLedgerReconciliationTransactionId&quot;)  REFERENCES &quot;GeneralLedgerReconciliationTransaction&quot;  (&quot;GeneralLedgerReconciliationTransactionID&quot;),
  FOREIGN KEY (&quot;CreatedById&quot;) REFERENCES &quot;User&quot;(&quot;UserID&quot;),
  FOREIGN KEY (&quot;OrganizationId&quot;) REFERENCES &quot;Organization&quot;  (&quot;OrganizationID&quot;)
);"><pre><span>CREATE</span> <span>TABLE</span> "<span>GeneralLedgerReconciliationTransaction</span>"
(
  <span><span>"</span>GeneralLedgerReconciliationTransactionID<span>"</span></span> <span>SERIAL</span> <span>PRIMARY KEY</span> <span>NOT NULL</span>,
  <span><span>"</span>GeneralLedgerId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>ReconciliationTransactionId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>ReversedGeneralLedgerReconciliationTransactionId<span>"</span></span> <span>INT</span> <span>NULL</span>,
  <span><span>"</span>TransactionGuid<span>"</span></span> UUID <span>NOT NULL</span>,
  <span><span>"</span>Created<span>"</span></span> <span>TIMESTAMPTZ</span> <span>NOT NULL</span> DEFAULT (<span>CURRENT_TIMESTAMP</span> AT <span>TIME</span> ZONE  <span><span>'</span>UTC<span>'</span></span>),
  <span><span>"</span>CreatedById<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span><span>"</span>OrganizationId<span>"</span></span> <span>INT</span> <span>NOT NULL</span>,
  <span>FOREIGN KEY</span> (<span><span>"</span>GeneralLedgerId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>GeneralLedger<span>"</span></span>  (<span><span>"</span>GeneralLedgerID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>ReconciliationTransactionId<span>"</span></span>) <span>REFERENCES</span>  <span><span>"</span>ReconciliationTransaction<span>"</span></span>(<span><span>"</span>ReconciliationTransactionID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>ReversedGeneralLedgerReconciliationTransactionId<span>"</span></span>)  <span>REFERENCES</span> <span><span>"</span>GeneralLedgerReconciliationTransaction<span>"</span></span>  (<span><span>"</span>GeneralLedgerReconciliationTransactionID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>CreatedById<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>User<span>"</span></span>(<span><span>"</span>UserID<span>"</span></span>),
  <span>FOREIGN KEY</span> (<span><span>"</span>OrganizationId<span>"</span></span>) <span>REFERENCES</span> <span><span>"</span>Organization<span>"</span></span>  (<span><span>"</span>OrganizationID<span>"</span></span>)
);</pre></div>
<p dir="auto">Integration with banks to pull the transaction data programatically is possible, but CSV import is used as universal fallback option.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<ol start="0" dir="auto">
<li>Have <code>dotnet</code> installed.</li>
<li>Have <code>psql</code> installed.
<ol dir="auto">
<li>Have <code>CREATE EXTENSION IF NOT EXISTS postgis;</code> installed.</li>
<li>Have <code>CREATE EXTENSION IF NOT EXISTS pgcrypto;</code> installed.</li>
</ol>
</li>
<li>Update connection strings in <code>appsettings.json</code>.</li>
<li>Set <code>database-reset.json</code> to <code>true</code> and run. This does two things...
<ol dir="auto">
<li>Uses the main database context to create the application database.</li>
<li>Runs <code>create-db...</code> script to create tables, columns, relationships, indexes, etc. I will later separate sample data to be optional.</li>
</ol>
</li>
<li>Use <code>test@example.com</code> pw <code>test</code> to login and choose "Farm To Market LLC", it already has sample chart of accounts.</li>
<li>Create invoice.</li>
<li>Receive payment.</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Backup and import/export strategy</h2><a id="user-content-backup-and-importexport-strategy" aria-label="Permalink: Backup and import/export strategy" href="#backup-and-importexport-strategy"></a></p>
<p dir="auto">The system will have three levels of backups.</p>
<ol dir="auto">
<li><strong>Ledger</strong> - System will attempt to perform a backup upon every action/transaction that affects the ledger. Backups will be in human and machine readable format such as csv, json, or xml (you'll get to pick whichever you hate the least).</li>
<li><strong>Database</strong> - Performed as often as resources allow, ideally every hour.</li>
<li><strong>Instance</strong> - Entire virtual machine instance is backed up daily.</li>
</ol>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Ambitions of Grandeur: Rebuilding an Institution</h2><a id="user-content-ambitions-of-grandeur-rebuilding-an-institution" aria-label="Permalink: Ambitions of Grandeur: Rebuilding an Institution" href="#ambitions-of-grandeur-rebuilding-an-institution"></a></p>
<p dir="auto">Why doesn't anyone want to be an accountant? Because it's not accounting anymore.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/Double-entry_example_from_1926.png"><img src="https://github.com/denys-olleik/accounting/raw/master/Double-entry_example_from_1926.png" alt="test"></a></p>
<p dir="auto">I don't remember QwackBooks ever looking like that.</p>
<p dir="auto">Intuit didn't invent accounting; they've stolen it.</p>
<p dir="auto">Accounting existed before computers, databases, and software. Transactions were recorded in physical journals using pen and paper, which forced accountants to have a better understanding of company finances due to the process of manual entry, with little room for error. Now, the process has been automated through software, and the journal entries are hidden away, leaving only the final report to spot errors and fraud.</p>
<p dir="auto">None of you can call yourselves accountants; you're just QwackBooks users. The truck drivers of the office. Your boss thinks of you as a whiny, tail-dragging █████. That's why he needs just one of you who knows the entire system. Maybe you'll get lucky with an assistant, but most likely they'll cause more problems, because it'll be the boss's daughter and she doesn't give a ████.</p>
<p dir="auto">Companies that adopt my system are far less likely to get audited than those using QwackBooks or some half-baked ERP system thrown together by a committee in India and managed by another in San Francisco. These systems often go through months of customization and setup before they can be used, and still end in failed implementations.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/denys-olleik/accounting/blob/master/david-vs-goliath.png"><img src="https://github.com/denys-olleik/accounting/raw/master/david-vs-goliath.png" alt=""></a></p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Cloudflare misidentifies Hetzner IPs as being located in Iran (197 pts)]]></title>
            <link>https://gitlab.com/gitlab-com/gl-infra/production/-/issues/8121#note_1237201726</link>
            <guid>41585249</guid>
            <pubDate>Wed, 18 Sep 2024 20:46:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gitlab.com/gitlab-com/gl-infra/production/-/issues/8121#note_1237201726">https://gitlab.com/gitlab-com/gl-infra/production/-/issues/8121#note_1237201726</a>, See on <a href="https://news.ycombinator.com/item?id=41585249">Hacker News</a></p>
Couldn't get https://gitlab.com/gitlab-com/gl-infra/production/-/issues/8121#note_1237201726: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Comic Mono (400 pts)]]></title>
            <link>https://dtinth.github.io/comic-mono-font/</link>
            <guid>41585156</guid>
            <pubDate>Wed, 18 Sep 2024 20:36:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://dtinth.github.io/comic-mono-font/">https://dtinth.github.io/comic-mono-font/</a>, See on <a href="https://news.ycombinator.com/item?id=41585156">Hacker News</a></p>
Couldn't get https://dtinth.github.io/comic-mono-font/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[LinkedIn is now using everyone's content to train their AI tool (398 pts)]]></title>
            <link>https://twitter.com/RachelTobac/status/1836471586624540705</link>
            <guid>41584486</guid>
            <pubDate>Wed, 18 Sep 2024 19:37:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/RachelTobac/status/1836471586624540705">https://twitter.com/RachelTobac/status/1836471586624540705</a>, See on <a href="https://news.ycombinator.com/item?id=41584486">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Is Tor still safe to use? (688 pts)]]></title>
            <link>https://blog.torproject.org/tor-is-still-safe/</link>
            <guid>41583847</guid>
            <pubDate>Wed, 18 Sep 2024 18:41:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.torproject.org/tor-is-still-safe/">https://blog.torproject.org/tor-is-still-safe/</a>, See on <a href="https://news.ycombinator.com/item?id=41583847">Hacker News</a></p>
Couldn't get https://blog.torproject.org/tor-is-still-safe/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[iOS 18 breaks IMAPS self-signed certs (114 pts)]]></title>
            <link>https://forums.developer.apple.com/forums/thread/756626</link>
            <guid>41583689</guid>
            <pubDate>Wed, 18 Sep 2024 18:29:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://forums.developer.apple.com/forums/thread/756626">https://forums.developer.apple.com/forums/thread/756626</a>, See on <a href="https://news.ycombinator.com/item?id=41583689">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-action="posts-container" value="756626021" data-has-more="false">
            
              
              
              <div data-post-id="756626021" tabindex="-1" data-post-type="QUESTION" data-action="data-container" role="article" aria-label="Thread post" id="question-container" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1718063648410" data-author-id="392237-3541-en" data-url="/thread/756626" aria-labelledby="replyname-756626021" aria-describedby="post-status-756626021
    
      
    " data-op="tkmcintosh" data-contributors=",tkmcintosh,tkmcintosh,tkmcintosh,tkmcintosh,Davidchill79,Davidchill79,tkmcintosh,tkmcintosh,tkmcintosh,">
        
          <p>The same problem encountered with iOS 17 beta 1 and beta 2 is back:</p>
<blockquote>
<p>Unable to create a secure connection to the server ("bad certificate format" -9,808).</p>
</blockquote>
        
      </div>
            
            
            
              <div role="region" aria-labelledby="answers-title" id="answers-list">
                
                  

<div role="article" data-post-id="790218022" id="790218022" data-authorname="DTS Engineer" data-timestamp="1718136552889" data-author-id="2676-3541-en" data-url="/thread/756626?answerId=790218022#790218022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-790218022" aria-describedby="post-status-790218022
    
      
    ">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
    <span role="status" aria-label="Apple Staff"></span>
  
  
  
    
  
</p>

  
  
</div>

                
                  

<section role="article" data-post-id="792810022" id="792810022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1719378553203" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=792810022#792810022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-792810022" aria-describedby="post-status-792810022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Problem remains in iOS 18.0 beta 2 (22A5297f).
No change.</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="794820022" id="794820022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1720636063543" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=794820022#794820022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-794820022" aria-describedby="post-status-794820022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Still occurs on iOS 18.0 beta 3 (22A5307f).</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="797186022" id="797186022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1721934226619" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=797186022#797186022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-797186022" aria-describedby="post-status-797186022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Problem remains in iOS 18 beta 4 (22A5316j). No change.</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="797765022" id="797765022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1722307436945" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=797765022#797765022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-797765022" aria-describedby="post-status-797765022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Problem remains on iOS 18 beta 4 v2 (22A5316k). No change.</p>
      
    </div>

</section>

                
                  

<div role="article" data-post-id="799528022" id="799528022" data-authorname="Davidchill79" data-author-link="/profile/Davidchill79" data-timestamp="1723245384370" data-author-id="95292459-3541-en" data-url="/thread/756626?answerId=799528022#799528022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-799528022" aria-describedby="post-status-799528022
    
      
    ">
  
    <a href="https://forums.developer.apple.com/forums/profile/Davidchill79">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>

                
                  

<section role="article" data-post-id="799533022" id="799533022" data-authorname="Davidchill79" data-author-link="/profile/Davidchill79" data-timestamp="1723245779101" data-author-id="95292459-3541-en" data-url="/thread/756626?answerId=799533022#799533022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-799533022" aria-describedby="post-status-799533022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/Davidchill79">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>I got the same with 22A5326f ... I even reinstalled the profiles and hit the "trust" button but nothing solves it.</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="799542022" id="799542022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1723254964207" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=799542022#799542022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-799542022" aria-describedby="post-status-799542022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>As you said, behavior is still regressed in iOS 18.0 beta 5 (22A5326f)! Added more comments in the thread linked by DTS above about the similar problem that occurred in iOS 17.0 betas.</p>
      
    </div>

</section>

                
                  

<section role="article" data-post-id="799855022" id="799855022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1723517819848" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=799855022#799855022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-799855022" aria-describedby="post-status-799855022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div data-post-id="799855022" tabindex="-1" data-post-type="ANSWER" data-action="content-post-body-content">
        
          <p>Still broken in iOS 18.0 beta 6 (22A5338b)!</p>
<p>Haven't been able to use mail on my iPhone since WWDC :(</p>
        
      </div>

</section>

                
                  

<section role="article" data-post-id="803159022" id="803159022" data-authorname="tkmcintosh" data-author-link="/profile/tkmcintosh" data-timestamp="1725993399633" data-author-id="392237-3541-en" data-url="/thread/756626?answerId=803159022#803159022" data-post-type="ANSWER" data-action="content-post" aria-labelledby="replyname-803159022" aria-describedby="post-status-803159022
    
      
    ">
  
  <div>
  
    <a href="https://forums.developer.apple.com/forums/profile/tkmcintosh">
  
  
<p><img src="https://developer.apple.com/forums/public/assets/avatars/SYSTEM_DEFAULT_AVATAR.svg" alt="" data-action="user-avatar">
  
  
  
    
  
</p>

  
    </a>
  
  
</div>


  
    
                      
                        
                          
                        
                      
                    
  
  <div>
      <p>Sadly, this regression has shipped in iOS 18.0 (22A3354). I am not optimistic that we will see a fix going forward. :(</p>
      
    </div>

</section>

                
              </div>
            
            
            
            
            
              
                

              
            
            
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[OpenAI Threatening to Ban Users for Asking Strawberry About Its Reasoning (265 pts)]]></title>
            <link>https://futurism.com/the-byte/openai-ban-strawberry-reasoning</link>
            <guid>41583605</guid>
            <pubDate>Wed, 18 Sep 2024 18:22:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://futurism.com/the-byte/openai-ban-strawberry-reasoning">https://futurism.com/the-byte/openai-ban-strawberry-reasoning</a>, See on <a href="https://news.ycombinator.com/item?id=41583605">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="incArticle"><h2>"Additional violations of this policy may result in loss of access to GPT-4o with Reasoning."</h2><h2>Ban Hammer</h2><p>OpenAI claims that its latest AI model, code-named "Strawberry"&nbsp;and released as o1-preview,&nbsp;is supposed to be capable of "reasoning." But understanding how its <a href="https://futurism.com/openai-strawberry-thought-process-scheming">thought process</a> works, apparently, is something that the ChatGPT maker is serious about keeping off-limits.</p><p>As <a href="https://arstechnica.com/information-technology/2024/09/openai-threatens-bans-for-probing-new-ai-models-reasoning-process/"><i>Ars Technica </i>reports</a>, OpenAI is now threatening to ban users that try to get the large language model to reveal how it thinks — a glaring example of how the company has long since <a href="https://futurism.com/openai-sleazy-company-creating-agi">abandoned its original vision</a> of championing open source AI.</p><p>According to accounts on social media, users are <a href="https://x.com/MarcoFigueroa/status/1834741170024726628">receiving emails</a> from the Microsoft-backed startup informing them that their requests made to <a href="https://futurism.com/the-byte/chatgpt-voice-mode-scream">ChatGPT</a> have been flagged for "attempting to circumvent safeguards."</p><p>"Additional violations of this policy may result in loss of access to GPT-4o with Reasoning," the emails state.</p><h2>Hush Hush</h2><p>This clampdown is more than a bit ironic given that a lot of the hype around Strawberry was built around its "chain-of-thought" reasoning that allowed the AI to articulate how it arrived at an answer, step by step. OpenAI chief technology officer Mira Murati <a href="https://www.wired.com/story/openai-o1-strawberry-problem-reasoning/">called this</a> a "new paradigm" for the technology.</p><p>Reports vary on what triggers the violations. As <i>Ars </i>found, some users claim that using the term "<a href="https://x.com/voooooogel/status/1834536216160768377">reasoning trace</a>" is what got them in trouble. Others say that even using the word "<a href="https://x.com/dyushag/status/1834379249731444820">reasoning</a>" on its own was enough to alert OpenAI's systems. Users can still see what is essentially a summary of Strawberry's thought process, but it's cobbled together by a second AI model and is heavily watered-down.</p><p>In a <a href="https://openai.com/index/learning-to-reason-with-llms/#hiding-the-chains-of-thought">blog post</a>, OpenAI argues that it needs to hide the chain-of-thought so that it wouldn't need to put a filter on how its AI thinks, in case it says stuff that isn't compliant with safety policies while thinking out loud. That way, developers can safely see its "raw" thought process behind-the-scenes.</p><p>But as the company freely admits, this measure also helps it maintain a "competitive advantage," staving off competitors from trying to ride its coattails.</p><h2>Red Alert</h2><p>The flipside of this approach, however, is that concentrates more responsibility for aligning the language language model into the hands of OpenAI, instead of democratizing it. That poses a problem for red-teamers, or programmers that try to hack AI models to make them safer.</p><p>"I'm not at all happy about this policy decision," AI researcher Simon Willison <a href="https://simonwillison.net/2024/Sep/12/openai-o1/">wrote on his blog</a>, as quoted by <i>Ars</i>. "As someone who develops against LLMs, interpretability and transparency are everything to me — the idea that I can run a complex prompt and have key details of how that prompt was evaluated hidden from me feels like a big step backwards."</p><p>As it stands, it seems that OpenAI is continuing down a path of keeping its AI models an ever more opaque black box.</p><p><strong>More on OpenAI: </strong><em><a href="https://futurism.com/openai-strawberry-thought-process-scheming">OpenAI's Strawberry "Thought Process" Sometimes Shows It Scheming to Trick Users</a></em></p><br></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Qwen2.5: A Party of Foundation Models (158 pts)]]></title>
            <link>https://qwenlm.github.io/blog/qwen2.5/</link>
            <guid>41583062</guid>
            <pubDate>Wed, 18 Sep 2024 17:42:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://qwenlm.github.io/blog/qwen2.5/">https://qwenlm.github.io/blog/qwen2.5/</a>, See on <a href="https://news.ycombinator.com/item?id=41583062">Hacker News</a></p>
Couldn't get https://qwenlm.github.io/blog/qwen2.5/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Meta AI: "The Future of AI Is Open Source and Decentralized" (209 pts)]]></title>
            <link>https://twitter.com/AIatMeta/status/1834633042339741961</link>
            <guid>41583028</guid>
            <pubDate>Wed, 18 Sep 2024 17:40:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/AIatMeta/status/1834633042339741961">https://twitter.com/AIatMeta/status/1834633042339741961</a>, See on <a href="https://news.ycombinator.com/item?id=41583028">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: I made crowdwave – imagine Twitter/Reddit but every post is a voicemail (189 pts)]]></title>
            <link>https://www.crowdwave.com</link>
            <guid>41582539</guid>
            <pubDate>Wed, 18 Sep 2024 17:07:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.crowdwave.com">https://www.crowdwave.com</a>, See on <a href="https://news.ycombinator.com/item?id=41582539">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Microplastics in the olfactory bulb of the human brain (165 pts)]]></title>
            <link>https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2823787</link>
            <guid>41582461</guid>
            <pubDate>Wed, 18 Sep 2024 17:01:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2823787">https://jamanetwork.com/journals/jamanetworkopen/fullarticle/2823787</a>, See on <a href="https://news.ycombinator.com/item?id=41582461">Hacker News</a></p>
<div id="readability-page-1" class="page"><div method="post" action="./2823787" id="webform">
        



<div id="resources-panel">
    <div>
        <div><p>Figure 1. &nbsp;Microphotographs and Micro-Fourier Transform Infrared (μFTIR) Spectra of the Microplastics Found in the Olfactory Bulb Tissue</p><div><p><a href="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/zoi241151f1_1726069938.11827.png?Expires=1729710081&amp;Signature=QCuZnQ0k9y6BI-vcK4S099vHrkPKK4pNUEsOkOsS65cBAeo05eBph4tOdEQWVAUraoGI2EP6UqCIxmcqCA~h7vYbBWy8gCSqdr15P5iTPjy1J9Bgl6VhZ3mJnioKcwKBrfFlgQPM58iQq-lZS9NgItxr7DXhpmhEhxyzy2asDith6RX~VrbrdocFuJVNZ0ZEV-8Ct0WSrVHGWHr-EaiStzMptqZ4QYltsG1GkA95z4F2yJ~yPjiYmCvBJfSVusDrLEL8QsfChpiE6~Rda~oY-FbURmesRw~7MWQMCR~F7J2gMwaa9HwbmlYIx1~U31CHCTpGaYnmLoq9lVu41vZtSA__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA" target="_blank" path-from-xml="zoi241151f1" rel="nofollow"><img data-original="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/m_zoi241151f1_1726069938.11827.png?Expires=1729710081&amp;Signature=QZvbXinwft9Y2sMFvQiC9Lkixf4zMOxAaQQ0wd5LIcRNtKjJjDx~E8sBpd6qer7EJT4aNwA2mgDCIidoxDK3YbmtXuJ25rYzG5bPvW7uMj5uKsGqzUIrNRhD49o1lfpG8lM-MnjEvG9yxEqHiJRDx1Sjlv6-JbgJu01pYti9o-JDWjO0i6jkLascPAUwf-Kc5fu8K-JZTZKVepdbgk1yzisI3dK0aI7K40zLmwJBKVlfjpF7qo8ErhLA6E6T7D03od8~gg7disv4BNucuRXg~SdagBPZh-mZepDgkxiJ09MBkyDBEkkmnZBZ4LncYfxCv5VsNNkPC45QmjqYs4PkXw__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA" alt="Microphotographs and Micro-Fourier Transform Infrared (μFTIR) Spectra of the Microplastics Found in the Olfactory Bulb Tissue" path-from-xml="zoi241151f1" src="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/m_zoi241151f1_1726069938.11827.png?Expires=1729710081&amp;Signature=QZvbXinwft9Y2sMFvQiC9Lkixf4zMOxAaQQ0wd5LIcRNtKjJjDx~E8sBpd6qer7EJT4aNwA2mgDCIidoxDK3YbmtXuJ25rYzG5bPvW7uMj5uKsGqzUIrNRhD49o1lfpG8lM-MnjEvG9yxEqHiJRDx1Sjlv6-JbgJu01pYti9o-JDWjO0i6jkLascPAUwf-Kc5fu8K-JZTZKVepdbgk1yzisI3dK0aI7K40zLmwJBKVlfjpF7qo8ErhLA6E6T7D03od8~gg7disv4BNucuRXg~SdagBPZh-mZepDgkxiJ09MBkyDBEkkmnZBZ4LncYfxCv5VsNNkPC45QmjqYs4PkXw__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA"></a></p></div><p>HQI indicates hit quality index.</p></div><div><p>Figure 2. &nbsp;Microphotographs and Micro-Fourier Transform Infrared (μFTIR) Spectra of the Main Microplastics Found in the Digested Olfactory Bulb</p><div><p><a href="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/zoi241151f2_1726069938.48024.png?Expires=1729710081&amp;Signature=4jtSPcsf57GMusDVBWIot6dubyudipWcrlSqWr-wcX59HXDBPdTG3kFfjWw6XI6m-2Hr0xNEilkeAVn1MKgdOFJ1hEOUBoqtF62L~vWU5BwemM2NVSZByMCYuCJe1o56bbshzwVBWeEeki5CF0Ee0CDFWUnQ9wEmEzIVLJV8GJjIAaUNNEVWnACMtmFaZ3DoOb0TNgLAVeZE3Uy1CB9EiEBPoE1If6pGKg~PTLeMomXFik460Wg7-0JlkuAPpxCuOGzPeoQgvJfyNJE3sZXzoRTgkrI-VDWgISkC6OJEhM4K-Smk5m0aUXKm05glloNp7hVw1TgMNbK6C6HjgALbcQ__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA" target="_blank" path-from-xml="zoi241151f2" rel="nofollow"><img data-original="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/m_zoi241151f2_1726069938.48024.png?Expires=1729710081&amp;Signature=LHtSGOVNsRZvzMl-hDFIF7vI~ftl6HMIIM2VU069icuwXQIGJDXFBwUp-qdsH75nAL0hxq7Zm4hbhjRF1~UGs~C2xxRfQocJXnA8QcHnljlUB6igCQStNKyC9axm3tiWMggpIHPd1YB6y3V93AMSs6bhoz4t1YTcEeVY0yQDSZ5UMHbV-VdQhMc5nhWo57NY~wSTnALuZEXDN2nxi2m1O8kAnW3Z0D18JRxeSr2ZBm-bxqpt54ir8764VUPFdyx7OhpDLSCnATK2-E3CfoEEN2dYKjarzZFz~oVLm7nYX-gTPJEwfM7KCl8EV0TKsSFegbDsnUNvhS-5SmCXXbcxsw__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA" alt="Microphotographs and Micro-Fourier Transform Infrared (μFTIR) Spectra of the Main Microplastics Found in the Digested Olfactory Bulb" path-from-xml="zoi241151f2" src="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/m_zoi241151f2_1726069938.48024.png?Expires=1729710081&amp;Signature=LHtSGOVNsRZvzMl-hDFIF7vI~ftl6HMIIM2VU069icuwXQIGJDXFBwUp-qdsH75nAL0hxq7Zm4hbhjRF1~UGs~C2xxRfQocJXnA8QcHnljlUB6igCQStNKyC9axm3tiWMggpIHPd1YB6y3V93AMSs6bhoz4t1YTcEeVY0yQDSZ5UMHbV-VdQhMc5nhWo57NY~wSTnALuZEXDN2nxi2m1O8kAnW3Z0D18JRxeSr2ZBm-bxqpt54ir8764VUPFdyx7OhpDLSCnATK2-E3CfoEEN2dYKjarzZFz~oVLm7nYX-gTPJEwfM7KCl8EV0TKsSFegbDsnUNvhS-5SmCXXbcxsw__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA"></a></p></div><p>HQI indicates hit quality index.</p></div> 
    </div>
    <div>
        <div><p>Table 1. &nbsp;Demographic and Autopsy Findings of the Decedents</p><div><p><a href="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/zoi241151t1_1726069938.06827.png?Expires=1729710081&amp;Signature=FHp9vawpZ5oKM~IWkyTX6QLbfo6wjn9VjURr8YG4Zagr-15-owTvEAd-QKhLVv-WXh99qEBG8scsh4nrm7UJqnPgbQsuAAshzWHTdj3FJNLbQF3uIKn-KoX23BmbZy~6PlRGDOqjw0Xdb1jdtXGX3eqMrfaIn5k95OvrRLJfbpRjo~4R5xt1UsR5r2fyT9tkxXZ1oa8WBxd4YGqGRmYM4knfRGJsURGnWMcro~snn7rWgMWDdwkV9FvGeYggQkq4p6c9FRp4KC3DR6ZYi3wLPyt0MyVt-TftEqggP9wO95MbolwDZaqnUFkST6bFsNwPIaAGXSp4Y3xoFyGG~H1njQ__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA" target="_blank" path-from-xml="zoi241151t1" rel="nofollow"><img data-original="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/m_zoi241151t1_1726069938.06827.png?Expires=1729710081&amp;Signature=qig~Pe2PXqkY6CAk0dlEUNilWvPs4BUm9-gyYlEZrDfnrlaAfm1Cdr7mpr-8bEd-80PxeRz2Hky9cF7Cqfa7tqmdrC4PHeRjqLASbi2WKbeH8yAPp-Hx6ncm6Ohj24rS8aqcn6mcxI~jdu27tmpbCe3srRBFhZsN9Qm93icYDCAh6GVdws-S5eQWyjwsph6SBFTOtmVvG6PB2JPiXKW-Kr4Nd~ZE3Or7tqPTVlaAhc8T-O0EaQVmKhu1shn899dScqgMhuHixVPhPRdekeaEIC~62CeGDQTcrbKNGuTAFf0shBMIiu94GiEZJ3B5TDAs2RHOcGmCsbTcFMUzoTeDnQ__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA" alt="Demographic and Autopsy Findings of the Decedents" path-from-xml="zoi241151t1" src="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/m_zoi241151t1_1726069938.06827.png?Expires=1729710081&amp;Signature=qig~Pe2PXqkY6CAk0dlEUNilWvPs4BUm9-gyYlEZrDfnrlaAfm1Cdr7mpr-8bEd-80PxeRz2Hky9cF7Cqfa7tqmdrC4PHeRjqLASbi2WKbeH8yAPp-Hx6ncm6Ohj24rS8aqcn6mcxI~jdu27tmpbCe3srRBFhZsN9Qm93icYDCAh6GVdws-S5eQWyjwsph6SBFTOtmVvG6PB2JPiXKW-Kr4Nd~ZE3Or7tqPTVlaAhc8T-O0EaQVmKhu1shn899dScqgMhuHixVPhPRdekeaEIC~62CeGDQTcrbKNGuTAFf0shBMIiu94GiEZJ3B5TDAs2RHOcGmCsbTcFMUzoTeDnQ__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA"></a></p></div></div><div><p>Table 2. &nbsp;Morphology and Polymeric Matrix of the Identified Particles and Fibers</p><div><p><a href="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/zoi241151t2_1726069938.56028.png?Expires=1729710081&amp;Signature=RxrLiyGB2eqeqzzbg5WtUVhvMGG-j5tqCmd2zzsibxPHX9IFi5YWBZFKUg6qG8SgFgBdgvhnrP~EodTOvstrdEwYqPzsaPgA-6LbcbzsMP19S4qQabtxaCgnXvZxAG2tqlaGV9vAayQ83NcwmMXmW-MnJ~-hJmuUjXfn3FzwGfwnUeYAIJSEP9vNWbBQFKHIO1cFRE468nDXWkQphhGYdMBezxoWHr6-GfrHDOualn2JmNQ-SBzhar9WqTbKh4bSgcuqqwvLjMFptPX8kE0y0ngW~X579~vSMbCCfIJn6mQbocNuCJJhIkI2ZWPMPHo4d-yCnMWy5Wi3kuXkEL1SSQ__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA" target="_blank" path-from-xml="zoi241151t2" rel="nofollow"><img data-original="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/m_zoi241151t2_1726069938.56028.png?Expires=1729710081&amp;Signature=1roKT0bzsxJYfCSxqyWZQbZ~LYnMpwA29lQafDRmKijcKqjFMmjBSHf14viy-Gc7sZB5AIZPrMwmLSqXfjzVlc4uHvIx~breOv4cJfwrx8qamvfH8CXs6TaWCAGdLNRfgp7HONMzSEcFhypfeBEkvsj8YkTfZegmHrjMBvVCBZ9Tot~vMKO7a0zZI373WkWCgsUrgbjPlMNLVgZ8VeXvD2P~pTLgiHroDQy9lP6HJBECn2Lxo99C0Y17lHCjq9-NfcoSxRDrsnTdbEvzip9pEXE8eITS3zuAdp7jSGANBoHE8vOt3bG21jW35q1U3M-OPLYL15Dwd970D8C~-3XeVA__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA" alt="Morphology and Polymeric Matrix of the Identified Particles and Fibers" path-from-xml="zoi241151t2" src="https://cdn.jamanetwork.com/ama/content_public/journal/jamanetworkopen/939448/m_zoi241151t2_1726069938.56028.png?Expires=1729710081&amp;Signature=1roKT0bzsxJYfCSxqyWZQbZ~LYnMpwA29lQafDRmKijcKqjFMmjBSHf14viy-Gc7sZB5AIZPrMwmLSqXfjzVlc4uHvIx~breOv4cJfwrx8qamvfH8CXs6TaWCAGdLNRfgp7HONMzSEcFhypfeBEkvsj8YkTfZegmHrjMBvVCBZ9Tot~vMKO7a0zZI373WkWCgsUrgbjPlMNLVgZ8VeXvD2P~pTLgiHroDQy9lP6HJBECn2Lxo99C0Y17lHCjq9-NfcoSxRDrsnTdbEvzip9pEXE8eITS3zuAdp7jSGANBoHE8vOt3bG21jW35q1U3M-OPLYL15Dwd970D8C~-3XeVA__&amp;Key-Pair-Id=APKAIE5G5CRDK6RD3PGA"></a></p></div></div> 
    </div>

        </div>

<div id="content-panel">
    
    
    



            
        

    <div>
        
    


            <div>
            <p>Original Investigation </p>
                <p>Environmental Health</p>
        </div>
        <p><span><span>September&nbsp;</span><span>16, </span><span>2024</span></span></p>
        
            
            
        <p><span>JAMA Netw Open. </span><span> 2024;7(9):e2440018. doi:10.1001/jamanetworkopen.2024.40018</span>
        </p>

 
    </div>
    
    

            <div data-userhasaccess="True">
    

            <p><a id="249905505"></a>
<span>Key Points</span></p><p><strong>Question</strong>&nbsp;
    <span>Can microplastics reach the olfactory bulb in the human brain?</span></p><p><strong>Findings</strong>&nbsp;
    <span>This case series analyzed the olfactory bulbs of 15 deceased individuals via micro-Fourier transform infrared spectroscopy and detected the presence of microplastics in the olfactory bulbs of 8 individuals. The predominant shapes were particles and fibers, with polypropylene being the most common polymer.</span></p><p><strong>Meaning</strong>&nbsp;
    <span>The presence of microplastics in the human olfactory bulb suggests the olfactory pathway as a potential entry route for microplastics into the brain, highlighting the need for further research on their neurotoxic effects and implications for human health.</span></p>            
<p><strong>Importance</strong>&nbsp;
    <span>Microplastic (MP) pollution is an emerging environmental and health concern. While MPs have been detected in various human tissues, their presence in the human brain has not been documented, raising important questions about potential neurotoxic effects and the mechanisms by which MPs might reach brain tissues.</span></p><p><strong>Objective</strong>&nbsp;
    <span>To determine the presence of MPs in the human olfactory bulb and to analyze their characteristics such as size, morphology, color, and polymeric composition.</span></p><p><strong>Design, Setting, and Participants</strong>&nbsp;
    <span>This case series study used a cross-sectional design involving the analysis of olfactory bulb tissues obtained from deceased individuals during routine coroner autopsies. The sampling procedures were conducted at São Paulo City Death Verification Service, with laboratory analysis carried out at the Brazilian Synchrotron Light Laboratory (LNLS). Participants included 15 adult individuals who had been residents of São Paulo for more than 5 years and underwent coroner autopsies. Exclusion criteria included previous neurosurgical interventions. Data analysis was performed in April 2024.</span></p><p><strong>Exposure</strong>&nbsp;
    <span>The primary exposure assessed was the presence of MPs in the olfactory bulb, analyzed through direct tissue examination and digested tissue filtration followed by micro-Fourier transform infrared spectroscopy.</span></p><p><strong>Main Outcomes and Measures</strong>&nbsp;
    <span>The main outcomes were the identification and characterization of MPs within the olfactory bulb, including their size, morphology, color, and polymeric composition.</span></p><p><strong>Results</strong>&nbsp;
    <span>The median age of the 15 deceased individuals was 69.5 years, ranging from 33 to 100 years, with 12 males and 3 females. MPs were detected in the olfactory bulbs of 8 out of 15 individuals. A total of 16 synthetic polymer particles and fibers were identified, with 75% being particles and 25% being fibers. The most common polymer detected was polypropylene (43.8%). Sizes of MPs ranged from 5.5 μm to 26.4 μm for particles, and the mean fiber length was 21.4 μm. Polymeric materials were absent in procedural blank and negative control filters, indicating minimal contamination risk.</span></p><p><strong>Conclusions and Relevance</strong>&nbsp;
    <span>This case series provides evidence of MPs found in the human olfactory bulb, suggesting a potential pathway for the translocation of MPs to the brain. The findings underscore the need for further research on the health implications of MP exposure, particularly concerning neurotoxicity and the potential for MPs to bypass the blood-brain barrier.</span></p>            
            
            <p>The ubiquity of microplastic (MP) pollution has become a pervasive environmental concern,<sup><a href="#zoi241151r1" data-tab-toggle=".tab-nav-references">1</a></sup> raising questions about its occurrence within the human body and its harmful effects.<sup><a href="#zoi241151r2" data-tab-toggle=".tab-nav-references">2</a></sup> While MPs have been detected in various organs of the human body, such as the lungs,<sup><a href="#zoi241151r3" data-tab-toggle=".tab-nav-references">3</a></sup><sup>,<a href="#zoi241151r4" data-tab-toggle=".tab-nav-references">4</a></sup> large and small intestines,<sup><a href="#zoi241151r5" data-tab-toggle=".tab-nav-references">5</a></sup> liver,<sup><a href="#zoi241151r6" data-tab-toggle=".tab-nav-references">6</a></sup> placenta,<sup><a href="#zoi241151r7" data-tab-toggle=".tab-nav-references">7</a></sup><sup>,<a href="#zoi241151r8" data-tab-toggle=".tab-nav-references">8</a></sup> semen,<sup><a href="#zoi241151r9" data-tab-toggle=".tab-nav-references">9</a></sup> and bloodstream,<sup><a href="#zoi241151r10" data-tab-toggle=".tab-nav-references">10</a></sup> to our knowledge, there have been no published studies to date reporting their presence in the human brain.</p>            <p>The presence of the blood-brain barrier (BBB) is likely an important limiting factor for the access of MPs to the human brain via hematogenous translocation. Despite this, some animal studies have shown that MPs can impair the BBB and reach the brain via oral ingestion, leading to neurotoxic effects.<sup><a href="#zoi241151r11" data-tab-toggle=".tab-nav-references">11</a></sup><sup>-<a href="#zoi241151r11" data-tab-toggle=".tab-nav-references">13</a></sup> Another potential entry site for micro- and nanoplastics (MNPs) in the human brain is the olfactory pathway.<sup><a href="#zoi241151r14" data-tab-toggle=".tab-nav-references">14</a></sup> This pathway involves olfactory neurons in the nasal that transmit information about odors to the central olfactory system of the brain. Olfactory axons pass through the cribriform plate (CP) of the ethmoid bone and reach the olfactory bulbs (OB), which are connected to the limbic system of the brain.</p>            <p>There are different levels of evidence suggesting that the olfactory pathway might allow the translocation of exogenous particles to the brain. Environmental black carbon particles have been detected in various human brain regions, with one of the highest concentrations found in the OB, measuring 420.8 particles/mm<sup>3</sup>.<sup><a href="#zoi241151r15" data-tab-toggle=".tab-nav-references">15</a></sup> Rarely, the 15- to 30-μm–sized ameboid form of Naegleria fowleri penetrates the brain via the nose, causing amebic meningoencephalitis.<sup><a href="#zoi241151r16" data-tab-toggle=".tab-nav-references">16</a></sup> Affected individuals typically present with the disease after contact with contaminated freshwater bodies or after rinsing the nose with nonsterile tap water.<sup><a href="#zoi241151r17" data-tab-toggle=".tab-nav-references">17</a></sup> Furthermore, the permeability of this barrier has been evoked as a possible quicker and safer drug delivery route to the brain,<sup><a href="#zoi241151r18" data-tab-toggle=".tab-nav-references">18</a></sup><sup>,<a href="#zoi241151r19" data-tab-toggle=".tab-nav-references">19</a></sup> as well as access to cerebrospinal fluid through nasal lymphatic vessels.<sup><a href="#zoi241151r20" data-tab-toggle=".tab-nav-references">20</a></sup></p>            <p>In this study, given the ubiquitous presence of MPs in the air<sup><a href="#zoi241151r21" data-tab-toggle=".tab-nav-references">21</a></sup> and their previous identification in the human nasal cavity,<sup><a href="#zoi241151r22" data-tab-toggle=".tab-nav-references">22</a></sup><sup>,<a href="#zoi241151r23" data-tab-toggle=".tab-nav-references">23</a></sup> we hypothesized that the smallest-size fraction of MPs could reach the OB. Therefore, we conducted an investigation into the presence of MPs within human OB obtained from 15 deceased individuals during coroner autopsies. We identified and analyzed various characteristics of the MPs, including their size, morphology, color, and polymeric composition.</p>            
            <p>This case series study was approved by the ethical board of the São Paulo University Medical School, in compliance with the Helsinki Declaration. Written informed consent was provided by the deceased individuals’ next of kin. The study was conducted from February 2023 to May 2024 and followed the <a href="https://www.ajo.com/article/S0002-9394(10)00690-2/fulltext">Reporting Guideline for Case Series</a>.<sup><a href="#zoi241151r46" data-tab-toggle=".tab-nav-references">46</a></sup></p>            
            <p>We obtained the bilateral OBs from 15 adult individuals who underwent routine coroner autopsies at the São Paulo City Death Verification Service of University of São Paulo to determine the cause of death. All individuals had been residents of São Paulo for more than 5 years. Cases in which the deceased had previously undergone neurosurgical interventions were not selected for the study. Information regarding previous occupations and underlying diseases was obtained through questionnaires administered to the next of kin. Additionally, autopsy reports were reviewed. We also collected samples from the OB of 2 stillbirths at 7 months gestation, as a negative control for the study. The collection of OBs took place between February 2023 and February 2024.</p>            <div>

                            <p>
                                Quality Control and Quality Assurance and Evaluation of Sample Processing
                            </p>
                        </div>
            <p>We implemented a plastic-free approach to safeguard the integrity of our results. This strategy facilitated a thorough assessment of potential sources of variability and error, thereby enhancing the reliability of our collected data. All procedures, from the OB sampling to the micro-Fourier transform infrared (μFTIR) spectroscopy analysis, followed the protocols recommended by several studies.<sup><a href="#zoi241151r24" data-tab-toggle=".tab-nav-references">24</a></sup><sup>-<a href="#zoi241151r24" data-tab-toggle=".tab-nav-references">26</a></sup> Briefly, all solutions were prefiltered through a Whatman cellulose filters with a mesh size of 0.45 μm. Stainless steel materials, glassware, and samples were covered with aluminum foil (before and after processing) to avoid airborne sample contamination. Ultrapure water with a resistivity of 18.2 mΩ was obtained from a Milli-Q purification device (Millipore Corp). Glass and stainless-steel materials were washed thoroughly using the purified water 3 times and then using acetone P.A. to remove any particles or fibers that have adhered to the glass. The scientific staff responsible for handling samples wore exclusively 100% cotton laboratory coats and were required to remove any plastic or textile bracelets, rings, and watches to minimize the risk of sample contamination. Clean latex gloves were used for all procedures. The samples were processed in a clean laminar flow cabinet (ISO class 5, SKU330313, Hipperquímica, SP, Brazil). Blank filters (47 mm) were used from the OB collection to the sample filtering to assess possible airborne contamination. A clean filter was also used as a negative control. Access to the μFTIR spectroscopy and the digestion/filtration room was restricted to the operators only, to avoid air flow in the room and the suspension/resuspension of possible atmospheric contaminants.</p>            
            <p>The presence of MPs in the OB was assessed in 2 ways: directly on the tissue and a digested assessment. The cryo-cuts method preserves the spatial context of MPs within the tissue, allowing their proximity to anatomical structures such as blood vessels to be observed. This is crucial for understanding potential pathways of MPs translocation and accumulation within the OB. The digestion method ensures that MPs that are deeply embedded in the tissue are not overlooked. Postdigestion, MPs are concentrated on filters, which can then be analyzed for a more accurate quantification and identification without interference from the tissue matrix. By combining these 2 methods, the study maximized the probability of detecting and characterizing MPs within the OB.</p>            
            <p>The left OB of each case was horizontally cryo-sectioned using a Leica CM1860 UV cryostat (Leica Biosystems) at 10 μm thickness and thaw-mounted onto 5 mm × 5 mm gold/chromium-coated silicon dioxide/silicon substrates. No fixatives were used for the tissue sections. The samples were then freeze-dried for 48 hours (Freezone 6 [Labconco Corp]) and examined by optical microscopy (Eclipse LV100ND [Nikon Instruments Inc]). The freeze-drying process maintains the integrity of biological tissues by extracting water without substantially compromising their structure. Futhermore, the presence of water molecules, characterized by strong hydrogen bonding, poses a considerable challenge in FTIR measurements, as they mask specific signals indicative of chemical compositions.<sup><a href="#zoi241151r27" data-tab-toggle=".tab-nav-references">27</a></sup></p>            <p>The procedures took place in a biosafety level 2 room in the Cryogenic Preparations Laboratory (LCRIO) at the Brazilian Synchrotron Light Laboratory (LNLS), National Center for Energy and Materials Research (CNPEM).</p>            <div>

                            <p>
                                Sample Digestion and Filtering
                            </p>
                        </div>
            <p>Immediately after sampling, the right OBs from 10 selected cases were individually frozen at −20 °C in glass vials, covered with aluminum foil, and sealed with a glass lid until the digestion. For 5 patients, there was no available tissue for digestion. The tissues were then incubated for 12 hours at 40 °C using the enzyme mixture Corolase 7089 (20 UHb/mL)<sup><a href="#zoi241151r4" data-tab-toggle=".tab-nav-references">4</a></sup> inside the laminar flux hood.</p>            <p>The solution was then filtered using a glass vacuum filtration system (Sigma-Aldrich) and silver membrane filters (25 mm in diameter and 0.45 microns pore size [Millipore]). Subsequently, the filters were kept individually in closed Petri dishes inside a glass dissector until the spectroscopy analysis. Due to the material characteristics, a recovery test was not feasible.</p>            <div>

                            <p>
                                Micro-Fourier Transform Infrared Spectroscopy
                            </p>
                        </div>
            <p>We performed single-point μFTIR microspectroscopy measurements in reflection mode using a diffraction-limited IR microscope (Cary 620 [Agilent Technologies]). The IR microscope is coupled to a Michelson interferometer responsible for the frequency demultiplexing of the mid-IR broadband response. We used a 1000 K Globar source and illumination and interferograms detection was done by using a high-sensitivity cryo-cooled Mercury–Cadmium-Telluride (MCT [Infrared Associates Inc]). After the interferometer, the IR beam was directed to a 25 × objective that produced an illumination spot of 420 μm × 420 μm on the sample’s surface. This field of view was further reduced to 50 to 100 μm by slits to concentrate the analysis around specific particles. The reflected light was collected through a confocal arrangement by the same objective lens and then directed to the MCT detector. FTIR spectra were generated by calculating the Fourier transforms of the recorded interferograms. The spectral resolution was configured at 16 cm<sup>−1</sup>, encompassing the range from 4000 to 700 cm<sup>−1</sup>. Each μFTIR spectrum was normalized to the spectrum of a clean gold surface, which served as a reference background. The cryo-cuts and digested filters were fully analyzed. The μFTIR analyses took place in the IMBUIA beamline at the Brazilian Synchrotron Light Laboratory (LNLS), National Center for Research in Energy and Materials (CNPEM).</p>            <p>The acquired spectra were processed manually using the KnowItAll Informatics System 2024 (John Wiley and Sons Inc). The comparative analysis was performed with the help of FTIR spectra libraries developed for MPs research, including the FTIR Library of Plastic Particles (FLOPP),<sup><a href="#zoi241151r28" data-tab-toggle=".tab-nav-references">28</a></sup> FTIR Library of Plastic Particles Sourced from the Environment (FLOPP-e),<sup><a href="#zoi241151r28" data-tab-toggle=".tab-nav-references">28</a></sup> siMPLe database,<sup><a href="#zoi241151r29" data-tab-toggle=".tab-nav-references">29</a></sup> and KnowItAll IR Spectral Library. We adopted a Hit Quality Index greater than 75% of agreement between characteristic bands of polymers observed in reference materials with bands observed in unknown particles or fibers.<sup><a href="#zoi241151r30" data-tab-toggle=".tab-nav-references">30</a></sup><sup>,<a href="#zoi241151r31" data-tab-toggle=".tab-nav-references">31</a></sup></p>            
            <p>We determined particle sizes by analyzing microphotographs obtained through μFTIR spectroscopy. ImageJ 1.54g software (US National Institutes of Health) was used for accurate measurements.</p>            
            <p>Descriptive analyses were performed using SPSS Statistics 26.0 software (IBM Inc). These analyses were performed in April 2024.</p>            
            <p>The median (range) age of the 15 deceased individuals was 69.5 (33-100) years. They included 12 males and 3 females. Demographic information is detailed in <a href="#zoi241151t1" data-tab-toggle=".tab-nav-figure-table">Table 1</a>. Apart from the 2 cases with histological evidence of previous ischemic cerebral infarction and 1 case with a subarachnoid hematoma due to a ruptured aneurysm of the middle cerebral artery, there were no cerebral histological abnormalities in the remaining cases. The mean (SD) mass of the OB (left or right) was 0.187 (0.050) g, ranging from 0.100 to 0.273 g.</p>            <p>A total of 16 synthetic polymer particles and fibers were identified in 8 out of the 15 deceased individuals, with a range from 1 to 4 MPs per OB. Of these, 75% were particles, of which 83.4% were fragments and 16.6% were spheres, while 25% were fibers with a length-to-width ratio exceeding 3. The particles had a mean (SD) length of 12.1 (7.2) μm, ranging from 5.5 to 26.4 μm, and a mean (SD) width of 8.9 (6.4) μm, ranging from 3.0 to 25.4 μm. The fibers exhibited a mean (SD) length of 21.4 (2.6) μm, ranging from 19.0 to 24.5 μm, and a mean (SD) width of 3.8 (1.8) μm, ranging from 3.0 to 6.0 μm.</p>            <p>In the procedural blank filters, we detected 2 cotton fibers, 2 silica beads, and 1 silicate fragment. Polymeric materials were absent in both the procedural blank and negative control filters. From the 2 collected samples in stillborn, we were able to analyze 1 case, which did not show the presence of MPs. The other case had insufficient material for analysis.</p>            <p>Polypropylene was the most prevalent polymer (43.8%), followed by polyamide, nylon, and polyethylene vinyl acetate (12.5%). This was followed by polyethylene, perlon polyamide, and wool-polypropylene, which accounted for 6.3%). Upon comparison with the reference spectral library of plastic materials, the identified MP particles and fibers exhibited indications of weathering. The μFTIR spectra of the weathered MPs differed substantially from those of pristine standard samples; multiple peaks in the spectra of weathered MPs were attenuated or entirely absent.</p>            <p>Microphotographs and μFTIR point-spectra showing the main types of MP detected in the OB are shown in <a href="#zoi241151f1" data-tab-toggle=".tab-nav-figure-table">Figure 1</a> and <a href="#zoi241151f2" data-tab-toggle=".tab-nav-figure-table">Figure 2</a>. The complete μFTIR point-spectra results of the digested OB are presented in the eFigure in <a data-tab-toggle=".tab-nav-supplemental" href="#note-ZOI241151-1">Supplement 1</a>. <a href="#zoi241151t2" data-tab-toggle=".tab-nav-figure-table">Table 2</a> provides details regarding the morphology, color, and chemical characterization of the particles and fibers.</p>            
            <p>To our knowledge, this is the first study in which the presence of MPs in the human brain was identified and characterized using μFTIR, allowing quantification and characterization of the morphology and polymeric matrix. Specifically, we detected particles as the predominant shape in the OB in 8 out of 15 individuals who underwent autopsy in Sao Paulo. Our data extend the notion that not only black carbon<sup><a href="#zoi241151r15" data-tab-toggle=".tab-nav-references">15</a></sup> but also MP accumulate in the OB in humans.</p>            <p>We believe that the anatomy of the cribriform plate of the ethmoid bone may serve as a gateway in the nasal passages from within the skull. This plate, situated between the frontal and sphenoid bones, lies horizontally and contains multiple foramina, each less than 1 mm in diameter.<sup><a href="#zoi241151r32" data-tab-toggle=".tab-nav-references">32</a></sup> The OB lies directly above it, and the olfactory neurons of the nasal mucosa reach the OB via the foramina of the cribriform plate. Recent studies have shown that part of the cerebrospinal fluid outflow occurs via lymphatic vessels that surround the olfactory axons, reaching the nasal mucosa and extending toward the nasal lymphoid tissue.<sup><a href="#zoi241151r33" data-tab-toggle=".tab-nav-references">33</a></sup> Ossification of the CP occurs by 1 year of age,<sup><a href="#zoi241151r34" data-tab-toggle=".tab-nav-references">34</a></sup> and the total area of the perforations is age-dependent; it is 3.79 to 3.99 mm<sup>2</sup> in those over 50 years of age and 5.61 to 7.91 mm<sup>2</sup> in those under 50 years of age. This decrease in the area over time, causing compression and dysfunction of the olfactory nerves, is thought to explain the decreased olfactory sensation in older individuals.<sup><a href="#zoi241151r35" data-tab-toggle=".tab-nav-references">35</a></sup> Furthermore, in mice, paracellular spaces in the olfactory epithelium can reach 5 to 20 μm in the medial-lateral dimension of the transport and a 10- to 100-μm range observed in the rostral-caudal dimension.<sup><a href="#zoi241151r36" data-tab-toggle=".tab-nav-references">36</a></sup> If a similar situation is observed in humans, this could represent another factor facilitating entry of larger particles in the brain via the cribriform plate.</p>            <p>Given the widespread presence of MPs in the air, some of which are associated with PM<sub>2.5</sub>,<sup><a href="#zoi241151r37" data-tab-toggle=".tab-nav-references">37</a></sup> the identification of MPs in the nose<sup><a href="#zoi241151r45" data-tab-toggle=".tab-nav-references">45</a></sup> and now in the OB, along with the vulnerable anatomical pathways, reinforces the notion that the olfactory pathway is an important entry site for exogenous particles to the brain. In previous epidemiological studies, exposure to PM<sub>2.5</sub> has been associated with neurological and psychiatric adverse outcomes, such as dementia.<sup><a href="#zoi241151r38" data-tab-toggle=".tab-nav-references">38</a></sup><sup>,<a href="#zoi241151r39" data-tab-toggle=".tab-nav-references">39</a></sup> Some neurodegenerative diseases, such as Parkinson disease, seem to have a connection with nasal abnormalities as initial symptoms.<sup><a href="#zoi241151r40" data-tab-toggle=".tab-nav-references">40</a></sup> In experimental studies, both exposures to PM<sub>2.5</sub> and MPs have shown to cause several neurotoxic effects, including disturbances on the brain development.<sup><a href="#zoi241151r41" data-tab-toggle=".tab-nav-references">41</a></sup><sup>,<a href="#zoi241151r42" data-tab-toggle=".tab-nav-references">42</a></sup> The cribriform plate reaches maturation at 1 to 2 years of age, which is a critical time window during which MP penetration into the brain could have negative effects on the organ maturation.</p>            <p>In this study, the MP polymeric matrix found in the OB corresponds to the most produced and manufactured plastics, such as polypropylene, nylon/polyamide, polyethylene and polyethylene vinyl acetate, present in packaging, clothes and home accessories, suggesting indoor environments as a major source of inhaled MPs.<sup><a href="#zoi241151r21" data-tab-toggle=".tab-nav-references">21</a></sup><sup>,<a href="#zoi241151r43" data-tab-toggle=".tab-nav-references">43</a></sup></p>            
            <p>This study has certain limitations. Although the olfactory pathway seems a likely exposure route, we cannot dismiss the possibility of multiple entry routes. MPs might have reached the OB either through systemic circulation, crossing the BBB, or via the respiratory pathway through the trigeminal nerve.<sup><a href="#zoi241151r44" data-tab-toggle=".tab-nav-references">44</a></sup> The biologic matrix of the OB tissues can be a confounding factor when analyzing MP spectra due to its similarity to some polymeric materials. Therefore, we were cautious to consider suspect particles as polymeric material only when spectral bands highly matched with weathered bands from MP libraries (HQI &gt;75%). In the filtered samples, the biological matrix was previously digested, not being an issue. Given the maximum spatial resolution (3 μm) of μFTIR spectroscopy setup and the limited capacity of analysis for other techniques, we were unable to detect nanoplastics. It is likely that the number of plastics in the submicron range with the potential to cause substantial biological damage would be far more numerous.</p>            <p>Avoiding contamination is one of the biggest challenges when analyzing MP. Due to the presence of MP fibers and particles in the air, we have used blank samples in all methodological procedures to detect contamination of the air. We found no MP in our procedural blanks, which supports the validity of our results. Furthermore, we had the opportunity to analyze the brains of 2 stillbirths. However, the status of brain tissue maceration made the analysis challenging due to difficulties in sampling and processing.</p>            
            <p>This case series describes the presence of MPs in the OB, mainly particles of the most commonly produced/processed polymers for clothing and packaging such as polypropylene and nylon. Our data support the idea that the olfactory pathway is an important entry site for environmental air pollutants. Considering the potential neurotoxic effects caused by MPs in the brain, and the widespread environmental contamination with plastics, our results should raise concern in the context of increasing prevalence of neurodegenerative diseases. Noninvasive imaging technologies, such as magnetic resonance imaging, are needed to overcome the current limitations in tissue analysis of different human organs and to improve the understanding of the health hazards of MPs.</p>            <div>
                                <p><a href="#top" data-tab-toggle=".tab-nav-full-text">Back to top</a></p><p>
                                Article Information
                            </p>
                        </div>
<p><strong>Accepted for Publication:</strong> August 22, 2024.</p><p><strong>Published:</strong> September 16, 2024. doi:10.1001/jamanetworkopen.2024.40018</p><p><strong>Open Access:</strong> This is an open access article distributed under the terms of the <a href="https://jamanetwork.com/pages/cc-by-license-permissions">CC-BY License</a>. © 2024 Amato-Lourenço LF et al. <i>JAMA Network Open</i>.</p><p><strong>Corresponding Author:</strong> Luís Fernando Amato-Lourenço, PhD, Freie Universität Berlin - Institut für Biologie, Altensteinstr 6D- 14195 Berlin, Germany (<a href="mailto:luisfamato@zedat.fu-berlin.de" target="_blank">luisfamato@zedat.fu-berlin.de</a>).</p><p><strong>Author Contributions:</strong>  Dr Amato-Lourenço and Prof Mauad had full access to all of the data in the study and take responsibility for the integrity of the data and the accuracy of the data analysis.</p><p><i>Concept and design:</i> Amato-Lourenço, Carvalho-Oliveira, Mauad.</p><p><i>Acquisition, analysis, or interpretation of data:</i> All authors.</p><p><i>Drafting of the manuscript:</i> Amato-Lourenço, Dantas, Carvalho-Oliveira, Mauad.</p><p><i>Critical review of the manuscript for important intellectual content:</i> Amato-Lourenço, Ribeiro Júnior, Ribeiro Paes, S. Rabelo, da Costa, Ando, Freitas, Bispo, Carvalho-Oliveira, Mauad.</p><p><i>Statistical analysis:</i> Amato-Lourenço, Freitas, Mauad.</p><p><i>Obtained funding:</i> Amato-Lourenço, Mauad.</p><p><i>Administrative, technical, or material support:</i> Amato-Lourenço, Dantas, Ribeiro Paes, Freitas, Bispo, Carvalho-Oliveira.</p><p><i>Supervision:</i> Amato-Lourenço, Carvalho-Oliveira, Mauad.</p><p><strong>Conflict of Interest Disclosures:</strong> None reported.</p><p><strong>Funding/Support:</strong> This study was financially supported by the Alexander von Humboldt Foundation (AvH), Germany, by the Plastic Soup Foundation, by the Brazilian Research Council (CNPq) grant 308023/2023-4 and Sao State Research Agency (FAPESP) grant 2021/10724-2.</p><p><strong>Role of the Funder/Sponsor:</strong> The funders had no role in the design and conduct of the study; collection, management, analysis, and interpretation of the data; preparation, review, or approval of the manuscript; and decision to submit the manuscript for publication.</p><p><strong>Data Sharing Statement:</strong> See <a data-tab-toggle=".tab-nav-supplemental" href="#note-ZOI241151-1">Supplement 2</a>.</p><p><strong>Additional Contributions:</strong> We would like to thank the São Paulo City Death Verification Service (SVOC) staff, the IMBUIA beamline at the Brazilian Synchrotron Light Laboratory (LNLS) for providing beamtime (proposal No. 20232740) and the technical support, Maria Westerbos and the Plastic Soup Foundation, Professor Dr Lukas Kenner and Professor Dra Verena Pichler for reviewing the manuscript before submission, and to Dr Walter Waldman for recommending the LNLS facilities to us. They were not compensated.</p>            
<div><div><p><a id="zoi241151r1">1.</a></p><p>Li
        &nbsp;Y﻿, Tao
        &nbsp;L﻿, Wang
        &nbsp;Q﻿, Wang
        &nbsp;F﻿, Li
        &nbsp;G﻿, Song
        &nbsp;M﻿. &nbsp;Potential health impact of microplastics: a review of environmental distribution, human exposure, and toxic effects.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Environ Health</i>. 2023;1(4):249-257. doi:<a href="https://dx.doi.org/10.1021/envhealth.3c00052">10.1021/envhealth.3c00052</a><a href="https://scholar.google.com/scholar_lookup?title=Potential%20health%20impact%20of%20microplastics%3A%20a%20review%20of%20environmental%20distribution%2C%20human%20exposure%2C%20and%20toxic%20effects.&amp;author=Y%20Li&amp;author=L%20Tao&amp;author=Q%20Wang&amp;author=F%20Wang&amp;author=G%20Li&amp;author=M%20Song&amp;publication_year=2023&amp;journal=Environ%20Health&amp;volume=1&amp;pages=249-257" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a><a href="https://doi.org/10.1021/envhealth.3c00052" target="_blank" xmlns:helper="urn:XsltStringHelper">Crossref</a><span data-targetid="10.1021/envhealth.3c00052" xmlns:helper="urn:XsltStringHelper"> </span></p></div><div><p><a id="zoi241151r25">25.</a></p><p>Gwinnett
        &nbsp;C﻿, Miller
        &nbsp;RZ﻿. &nbsp;Are we contaminating our samples? A preliminary study to investigate procedural contamination during field sampling and processing for microplastic and anthropogenic microparticles.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Mar Pollut Bull</i>. 2021;173(Pt B):113095. doi:<a href="https://dx.doi.org/10.1016/j.marpolbul.2021.113095">10.1016/j.marpolbul.2021.113095</a><a href="https://scholar.google.com/scholar_lookup?title=Are%20we%20contaminating%20our%20samples%3F%20A%20preliminary%20study%20to%20investigate%20procedural%20contamination%20during%20field%20sampling%20and%20processing%20for%20microplastic%20and%20anthropogenic%20microparticles.&amp;author=C%20Gwinnett&amp;author=RZ%20Miller&amp;publication_year=2021&amp;journal=Mar%20Pollut%20Bull&amp;volume=173&amp;pages=" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a><a href="https://doi.org/10.1016/j.marpolbul.2021.113095" target="_blank" xmlns:helper="urn:XsltStringHelper">Crossref</a><span data-targetid="10.1016/j.marpolbul.2021.113095" xmlns:helper="urn:XsltStringHelper"> </span></p></div><div><p><a id="zoi241151r29">29.</a></p><p>Primpke
        &nbsp;S﻿, Cross
        &nbsp;RK﻿, Mintenig
        &nbsp;SM﻿, 
    &nbsp;et al. &nbsp;Toward the systematic identification of microplastics in the environment: evaluation of a new independent software tool (siMPle) for spectroscopic analysis.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Appl Spectrosc</i>. 2020;74(9):1127-1138. doi:<a href="https://dx.doi.org/10.1177/0003702820917760">10.1177/0003702820917760</a><a href="https://www.ncbi.nlm.nih.gov/pubmed/32193948" target="_blank" xmlns:helper="urn:XsltStringHelper">PubMed</a><a href="https://scholar.google.com/scholar_lookup?title=Toward%20the%20systematic%20identification%20of%20microplastics%20in%20the%20environment%3A%20evaluation%20of%20a%20new%20independent%20software%20tool%20%28siMPle%29%20for%20spectroscopic%20analysis.&amp;author=S%20Primpke&amp;author=RK%20Cross&amp;author=SM%20Mintenig&amp;publication_year=2020&amp;journal=Appl%20Spectrosc&amp;volume=74&amp;pages=1127-1138" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a><a href="https://doi.org/10.1177/0003702820917760" target="_blank" xmlns:helper="urn:XsltStringHelper">Crossref</a><span data-targetid="10.1177/0003702820917760" xmlns:helper="urn:XsltStringHelper"> </span></p></div><div><p><a id="zoi241151r30">30.</a></p><p>Weisser
        &nbsp;J﻿, Pohl
        &nbsp;T﻿, Heinzinger
        &nbsp;M﻿, Ivleva
        &nbsp;NP﻿, Hofmann
        &nbsp;T﻿, Glas
        &nbsp;K﻿. &nbsp;The Identification of Microplastics Based on Vibrational Spectroscopy Data—A Critical Review of Data Analysis Routines. TrAC.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Trends Analyt Chem</i>. 2022;148:116535. doi:<a href="https://dx.doi.org/10.1016/j.trac.2022.116535">10.1016/j.trac.2022.116535</a><a href="https://scholar.google.com/scholar_lookup?title=The%20Identification%20of%20Microplastics%20Based%20on%20Vibrational%20Spectroscopy%20Data%E2%80%94A%20Critical%20Review%20of%20Data%20Analysis%20Routines.%20TrAC.&amp;author=J%20Weisser&amp;author=T%20Pohl&amp;author=M%20Heinzinger&amp;author=NP%20Ivleva&amp;author=T%20Hofmann&amp;author=K%20Glas&amp;publication_year=2022&amp;journal=Trends%20Analyt%20Chem&amp;volume=148&amp;pages=" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a><a href="https://doi.org/10.1016/j.trac.2022.116535" target="_blank" xmlns:helper="urn:XsltStringHelper">Crossref</a><span data-targetid="10.1016/j.trac.2022.116535" xmlns:helper="urn:XsltStringHelper"> </span></p></div><div><p><a id="zoi241151r31">31.</a></p><p>Morgado
        &nbsp;V﻿, Palma
        &nbsp;C﻿, Bettencourt da Silva
        &nbsp;RJN﻿. &nbsp;Microplastics identification by infrared spectroscopy - Evaluation of identification criteria and uncertainty by the Bootstrap method.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Talanta</i>. 2021;224:121814. doi:<a href="https://dx.doi.org/10.1016/j.talanta.2020.121814">10.1016/j.talanta.2020.121814</a><a href="https://www.ncbi.nlm.nih.gov/pubmed/33379039" target="_blank" xmlns:helper="urn:XsltStringHelper">PubMed</a><a href="https://scholar.google.com/scholar_lookup?title=Microplastics%20identification%20by%20infrared%20spectroscopy%20-%20Evaluation%20of%20identification%20criteria%20and%20uncertainty%20by%20the%20Bootstrap%20method.&amp;author=V%20Morgado&amp;author=C%20Palma&amp;author=RJN%20Bettencourt%20da%20Silva&amp;publication_year=2021&amp;journal=Talanta&amp;volume=224&amp;pages=" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a></p></div><div><p><a id="zoi241151r36">36.</a></p><p>Kincaid
        &nbsp;AE﻿, Ayers
        &nbsp;JI﻿, Bartz
        &nbsp;JC﻿. &nbsp;Specificity, size, and frequency of spaces that characterize the mechanism of bulk transepithelial transport of prions in the nasal cavities of hamsters and mice.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;J Virol</i>. 2016;90(18):8293-8301. doi:<a href="https://dx.doi.org/10.1128/JVI.01103-16">10.1128/JVI.01103-16</a><a href="https://www.ncbi.nlm.nih.gov/pubmed/27384659" target="_blank" xmlns:helper="urn:XsltStringHelper">PubMed</a><a href="https://scholar.google.com/scholar_lookup?title=Specificity%2C%20size%2C%20and%20frequency%20of%20spaces%20that%20characterize%20the%20mechanism%20of%20bulk%20transepithelial%20transport%20of%20prions%20in%20the%20nasal%20cavities%20of%20hamsters%20and%20mice.&amp;author=AE%20Kincaid&amp;author=JI%20Ayers&amp;author=JC%20Bartz&amp;publication_year=2016&amp;journal=J%20Virol&amp;volume=90&amp;pages=8293-8301" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a></p></div><div><p><a id="zoi241151r37">37.</a></p><p>Akhbarizadeh
        &nbsp;R﻿, Dobaradaran
        &nbsp;S﻿, Amouei Torkmahalleh
        &nbsp;M﻿, Saeedi
        &nbsp;R﻿, Aibaghi
        &nbsp;R﻿, Faraji Ghasemi
        &nbsp;F﻿. &nbsp;Suspended fine particulate matter (PM<sub>2.5</sub>), microplastics (MPs), and polycyclic aromatic hydrocarbons (PAHs) in air: their possible relationships and health implications.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Environ Res</i>. 2021;192:110339. doi:<a href="https://dx.doi.org/10.1016/j.envres.2020.110339">10.1016/j.envres.2020.110339</a><a href="https://www.ncbi.nlm.nih.gov/pubmed/33068583" target="_blank" xmlns:helper="urn:XsltStringHelper">PubMed</a><a href="https://scholar.google.com/scholar_lookup?title=Suspended%20fine%20particulate%20matter%20%28PM2.5%29%2C%20microplastics%20%28MPs%29%2C%20and%20polycyclic%20aromatic%20hydrocarbons%20%28PAHs%29%20in%20air%3A%20their%20possible%20relationships%20and%20health%20implications.&amp;author=R%20Akhbarizadeh&amp;author=S%20Dobaradaran&amp;author=M%20Amouei%20Torkmahalleh&amp;author=R%20Saeedi&amp;author=R%20Aibaghi&amp;author=F%20Faraji%20Ghasemi&amp;publication_year=2021&amp;journal=Environ%20Res&amp;volume=192&amp;pages=" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a></p></div><div><p><a id="zoi241151r38">38.</a></p><p>Braithwaite
        &nbsp;I﻿, Zhang
        &nbsp;S﻿, Kirkbride
        &nbsp;JB﻿, Osborn
        &nbsp;DPJ﻿, Hayes
        &nbsp;JF﻿. &nbsp;Air pollution (particulate matter) exposure and associations with depression, anxiety, bipolar, psychosis and suicide risk: a systematic review and meta-analysis.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Environ Health Perspect</i>. 2019;127(12):126002. doi:<a href="https://dx.doi.org/10.1289/EHP4595">10.1289/EHP4595</a><a href="https://www.ncbi.nlm.nih.gov/pubmed/31850801" target="_blank" xmlns:helper="urn:XsltStringHelper">PubMed</a><a href="https://scholar.google.com/scholar_lookup?title=Air%20pollution%20%28particulate%20matter%29%20exposure%20and%20associations%20with%20depression%2C%20anxiety%2C%20bipolar%2C%20psychosis%20and%20suicide%20risk%3A%20a%20systematic%20review%20and%20meta-analysis.&amp;author=I%20Braithwaite&amp;author=S%20Zhang&amp;author=JB%20Kirkbride&amp;author=DPJ%20Osborn&amp;author=JF%20Hayes&amp;publication_year=2019&amp;journal=Environ%20Health%20Perspect&amp;volume=127&amp;pages=" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a></p></div><div><p><a id="zoi241151r39">39.</a></p><p>Kioumourtzoglou
        &nbsp;MA﻿, Schwartz
        &nbsp;JD﻿, Weisskopf
        &nbsp;MG﻿, 
    &nbsp;et al. &nbsp;Long-term PM2.5 exposure and neurological hospital admissions in the northeastern United States.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Environ Health Perspect</i>. 2016;124(1):23-29. doi:<a href="https://dx.doi.org/10.1289/ehp.1408973">10.1289/ehp.1408973</a><a href="https://www.ncbi.nlm.nih.gov/pubmed/25978701" target="_blank" xmlns:helper="urn:XsltStringHelper">PubMed</a><a href="https://scholar.google.com/scholar_lookup?title=Long-term%20PM2.5%20exposure%20and%20neurological%20hospital%20admissions%20in%20the%20northeastern%20United%20States.&amp;author=MA%20Kioumourtzoglou&amp;author=JD%20Schwartz&amp;author=MG%20Weisskopf&amp;publication_year=2016&amp;journal=Environ%20Health%20Perspect&amp;volume=124&amp;pages=23-29" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a></p></div><div><p><a id="zoi241151r41">41.</a></p><p>Liu
        &nbsp;XQ﻿, Huang
        &nbsp;J﻿, Song
        &nbsp;C﻿, Zhang
        &nbsp;TL﻿, Liu
        &nbsp;YP﻿, Yu
        &nbsp;L﻿. &nbsp;Neurodevelopmental toxicity induced by PM2.5 exposure and its possible role in neurodegenerative and mental disorders.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;Hum Exp Toxicol</i>. Published online August 3, 2023. doi:<a href="https://dx.doi.org/10.1177/09603271231191436">10.1177/09603271231191436</a><a href="https://www.ncbi.nlm.nih.gov/pubmed/37537902" target="_blank" xmlns:helper="urn:XsltStringHelper">PubMed</a><a href="https://scholar.google.com/scholar_lookup?title=Neurodevelopmental%20toxicity%20induced%20by%20PM2.5%20exposure%20and%20its%20possible%20role%20in%20neurodegenerative%20and%20mental%20disorders.&amp;author=XQ%20Liu&amp;author=J%20Huang&amp;author=C%20Song&amp;author=TL%20Zhang&amp;author=YP%20Liu&amp;author=L%20Yu&amp;publication_year=2023&amp;journal=Hum%20Exp%20Toxicol&amp;volume=&amp;pages=" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a></p></div><div><p><a id="zoi241151r44">44.</a></p><p>Jeong
        &nbsp;SH﻿, Jang
        &nbsp;JH﻿, Lee
        &nbsp;YB﻿. &nbsp;Drug delivery to the brain via the nasal route of administration: exploration of key targets and major consideration factors.&nbsp;﻿ <i xmlns:helper="urn:XsltStringHelper">&nbsp;J Pharm Investig</i>. 2023;53(1):119-152. doi:<a href="https://dx.doi.org/10.1007/s40005-022-00589-5">10.1007/s40005-022-00589-5</a><a href="https://www.ncbi.nlm.nih.gov/pubmed/35910081" target="_blank" xmlns:helper="urn:XsltStringHelper">PubMed</a><a href="https://scholar.google.com/scholar_lookup?title=Drug%20delivery%20to%20the%20brain%20via%20the%20nasal%20route%20of%20administration%3A%20exploration%20of%20key%20targets%20and%20major%20consideration%20factors.&amp;author=SH%20Jeong&amp;author=JH%20Jang&amp;author=YB%20Lee&amp;publication_year=2023&amp;journal=J%20Pharm%20Investig&amp;volume=53&amp;pages=119-152" target="_blank" xmlns:helper="urn:XsltStringHelper">Google Scholar</a></p></div></div>

</div>

        
    </div> 





 
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Senate Vote Tomorrow Could Give Helping Hand to Patent Trolls (209 pts)]]></title>
            <link>https://www.eff.org/deeplinks/2024/09/senate-vote-tomorrow-could-give-helping-hand-patent-trolls</link>
            <guid>41582278</guid>
            <pubDate>Wed, 18 Sep 2024 16:50:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.eff.org/deeplinks/2024/09/senate-vote-tomorrow-could-give-helping-hand-patent-trolls">https://www.eff.org/deeplinks/2024/09/senate-vote-tomorrow-could-give-helping-hand-patent-trolls</a>, See on <a href="https://news.ycombinator.com/item?id=41582278">Hacker News</a></p>
Couldn't get https://www.eff.org/deeplinks/2024/09/senate-vote-tomorrow-could-give-helping-hand-patent-trolls: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[GM electric vehicles can now access Tesla Superchargers (169 pts)]]></title>
            <link>https://www.theverge.com/2024/9/18/24247122/gm-ev-tesla-supercharger-access-adapter-price</link>
            <guid>41582267</guid>
            <pubDate>Wed, 18 Sep 2024 16:49:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theverge.com/2024/9/18/24247122/gm-ev-tesla-supercharger-access-adapter-price">https://www.theverge.com/2024/9/18/24247122/gm-ev-tesla-supercharger-access-adapter-price</a>, See on <a href="https://news.ycombinator.com/item?id=41582267">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>General Motors says it has updated the software in its electric vehicles so its customers can finally use Tesla’s Supercharging network. </p><p>To gain immediate access, owners of electric Chevy, Cadillac, and GMC vehicles will need to purchase “GM approved” Tesla adapters through each brand’s smartphone app for $225. Future GM vehicles will come with Tesla’s charging port natively installed. </p><p>The announcement comes more than 15 months after <a href="https://www.theverge.com/2023/6/8/23754470/gm-tesla-ev-supercharger-nacs-elon-musk">GM first announced</a> it would adopt Tesla’s EV charging plug for its vehicles. The automaker had originally said it expected to complete the software coordination with Tesla by “early spring” 2024, but <a href="https://www.forbes.com/sites/sashalekach/2024/06/20/tesla-supercharger-adapters-delayed-for-all-general-motors-evs/">production bottlenecks</a> and <a href="https://www.theverge.com/2024/5/3/24147402/tesla-supercharger-layoffs-stalled-ev-infrastructure-projects">layoffs at Tesla</a> have delayed the process. </p><div><div role="button" aria-label="Zoom" tabindex="0"><figure><div><p><span><img alt="" loading="lazy" decoding="async" data-nimg="fill" sizes="(max-width: 1023px) 100vw, 744px" srcset="https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/376x251/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 376w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/384x256/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 384w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/415x277/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 415w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/480x320/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 480w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/540x360/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 540w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/640x427/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 640w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/750x500/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 750w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/828x552/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 828w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/1080x720/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 1080w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/1200x800/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 1200w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/1440x960/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 1440w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/1920x1280/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 1920w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/2048x1365/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 2048w, https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/2400x1600/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg 2400w" src="https://duet-cdn.vox-cdn.com/thumbor/0x0:9504x6336/2400x1600/filters:focal(4752x3168:4753x3169):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25626334/GM___NACS_2.jpg" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></span></p></div></figure></div><p><cite>Image: GM</cite></p></div><p>GM celebrated the news, noting that its customers will now have access to 17,800 Tesla Supercharger plugs for the first time. The lack of convenient and reliable charging is frequently cited in surveys of customers as a major obstacle to purchasing an electric vehicle. And Tesla’s Superchargers are widely seen as among the best EV charging networks in the world. </p><p>Starting with Ford last year, nearly every major automaker has publicly committed to adopting the <a href="https://driveelectric.gov/charging-connector">SAE J3400</a> fast charging plug, also known as the North American Charging Standard (NACS). The process will begin with a software update so non-Tesla vehicles can “talk” to Tesla’s Superchargers, as well as the use of an adapter. </p><p>GM says it plans on sourcing its NACS-approved adapters from multiple suppliers. That way, it’s not just relying on Tesla, which makes its own adapters at its gigafactory in Buffalo, New York, where production has been slow. Several other companies also make NACS adapters, including <a href="https://go.skimresources.com/?id=1025X1701640&amp;xs=1&amp;url=https%3A%2F%2Fev-lectron.com%2Fproducts%2Flectron-vortex-plug-tesla-supercharger-nacs-to-ccs-adapter">Lectron</a> and <a href="https://shop.qmerit.com/products/j1772-charger-adapter-copy">Qmerit</a>.  </p><p>Within the next few years, automakers say they will begin producing EVs with the NACS port built directly into the vehicle, enabling them to charge at Tesla stations without an adapter. </p><div><p>GM says it plans on sourcing its NACS-approved adapters from multiple suppliers</p></div><p>GM’s decision to sell the adapters, rather than give them away for free as some other companies have done, may ruffle some feathers. Both <a href="https://www.theverge.com/2024/2/29/24085844/ford-ev-adapter-tesla-supercharger-nacs">Ford</a> and <a href="https://www.theverge.com/2024/3/18/24104786/rivian-tesla-supercharger-access-adapter-free-r1t-r1s">Rivian</a> gave out free adapters for a limited time before making customers buy them. But GM said it won’t be offering any complimentary period to its customers. </p><p>GM is also updating its brand apps to allow customers to search for available Superchargers, check station status, initiate a charge, and pay for charging sessions. Tesla has said that non-Tesla owners would have to pay a little more to charge their vehicles than Tesla owners. </p><p>Tesla had a head start in building its own EV charging network, but other automakers are intent on catching up. GM is also involved in several projects to build new fast EV chargers, including with <a href="https://www.theverge.com/2024/9/12/24242068/gm-energy-evgo-ev-dc-fast-charging-network-flagship-locations">EVgo</a> and a consortium of other automakers through the <a href="https://www.theverge.com/24176160/ionna-ev-charging-dc-fast-headquarters-network">Ionna joint venture</a>. </p><p>Following GM, Tesla has said that it will coordinate next with Volvo, Polestar, Nissan, and Mercedes-Benz to grant their customers access to Superchargers. </p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Llama 3.1 Omni Model (289 pts)]]></title>
            <link>https://github.com/ictnlp/LLaMA-Omni</link>
            <guid>41582180</guid>
            <pubDate>Wed, 18 Sep 2024 16:42:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/ictnlp/LLaMA-Omni">https://github.com/ictnlp/LLaMA-Omni</a>, See on <a href="https://news.ycombinator.com/item?id=41582180">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">🦙🎧 LLaMA-Omni: Seamless Speech Interaction with Large Language Models</h2><a id="user-content--llama-omni-seamless-speech-interaction-with-large-language-models" aria-label="Permalink: 🦙🎧 LLaMA-Omni: Seamless Speech Interaction with Large Language Models" href="#-llama-omni-seamless-speech-interaction-with-large-language-models"></a></p>
<blockquote>
<p dir="auto"><strong>Authors: <a href="https://fangqingkai.github.io/" rel="nofollow">Qingkai Fang</a>, <a href="https://scholar.google.com/citations?hl=en&amp;user=XwHtPyAAAAAJ" rel="nofollow">Shoutao Guo</a>, <a href="https://zhouyan19.github.io/zhouyan/" rel="nofollow">Yan Zhou</a>, <a href="https://scholar.google.com.hk/citations?user=dUgq6tEAAAAJ" rel="nofollow">Zhengrui Ma</a>, <a href="https://zhangshaolei1998.github.io/" rel="nofollow">Shaolei Zhang</a>, <a href="https://people.ucas.edu.cn/~yangfeng?language=en" rel="nofollow">Yang Feng*</a></strong></p>
</blockquote>
<p dir="auto"><a href="https://arxiv.org/abs/2409.06666" rel="nofollow"><img src="https://camo.githubusercontent.com/cf848c9cd376e15932b0cba092d5c6053463835849a56eac0c6a011d3ab107d5/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f61725869762d323430392e30363636362d6233316231622e7376673f6c6f676f3d6172586976" alt="arXiv" data-canonical-src="https://img.shields.io/badge/arXiv-2409.06666-b31b1b.svg?logo=arXiv"></a>
<a href="https://huggingface.co/ICTNLP/Llama-3.1-8B-Omni" rel="nofollow"><img src="https://camo.githubusercontent.com/43ed5a97ea9a77d1afe95566b086cb8aed400254b78842e11ed83614f503df95/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f25463025394625413425393725323048756767696e675f466163652d4d6f64656c2d626c75652e737667" alt="model" data-canonical-src="https://img.shields.io/badge/%F0%9F%A4%97%20Hugging_Face-Model-blue.svg"></a>
<a href="https://github.com/ictnlp/LLaMA-Omni"><img src="https://camo.githubusercontent.com/77762e523530a02dd6ad9f1b9e4e9dd91c0bf748c684bd5cced64a3302047441/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4769746875622d436f64652d6b657967656e2e7376673f6c6f676f3d676974687562" alt="code" data-canonical-src="https://img.shields.io/badge/Github-Code-keygen.svg?logo=github"></a></p>
<p dir="auto">LLaMA-Omni is a speech-language model built upon Llama-3.1-8B-Instruct. It supports low-latency and high-quality speech interactions, simultaneously generating both text and speech responses based on speech instructions.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/ictnlp/LLaMA-Omni/blob/main/images/model.png"><img src="https://github.com/ictnlp/LLaMA-Omni/raw/main/images/model.png" width="75%"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">💡 Highlights</h2><a id="user-content--highlights" aria-label="Permalink: 💡 Highlights" href="#-highlights"></a></p>
<ul dir="auto">
<li>
<p dir="auto">💪 <strong>Built on Llama-3.1-8B-Instruct, ensuring high-quality responses.</strong></p>
</li>
<li>
<p dir="auto">🚀 <strong>Low-latency speech interaction with a latency as low as 226ms.</strong></p>
</li>
<li>
<p dir="auto">🎧 <strong>Simultaneous generation of both text and speech responses.</strong></p>
</li>
<li>
<p dir="auto">♻️ <strong>Trained in less than 3 days using just 4 GPUs.</strong></p>
</li>
</ul>
<details open="">
  <summary>
    
    <span aria-label="Video description demo.mp4">demo.mp4</span>
    <span></span>
  </summary>

  <video src="https://private-user-images.githubusercontent.com/19513464/366072569-2b097af8-47d7-494f-b3b3-6be17ca0247a.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjY3MDI1MTQsIm5iZiI6MTcyNjcwMjIxNCwicGF0aCI6Ii8xOTUxMzQ2NC8zNjYwNzI1NjktMmIwOTdhZjgtNDdkNy00OTRmLWIzYjMtNmJlMTdjYTAyNDdhLm1wND9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTE4VDIzMzAxNFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWFhOGYwOTcwMTgwOWQ0MWNiYzQ0OWRhZDgyNWNhMDE2NjgwMmQxNjNkMzY4MmI2ZGU4ZmFlM2QwNjA2M2VjZjEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.las91a8L1UW1B_MSTxqh8zBOpmbpiB26ZRr7hAb3Hvo" data-canonical-src="https://private-user-images.githubusercontent.com/19513464/366072569-2b097af8-47d7-494f-b3b3-6be17ca0247a.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjY3MDI1MTQsIm5iZiI6MTcyNjcwMjIxNCwicGF0aCI6Ii8xOTUxMzQ2NC8zNjYwNzI1NjktMmIwOTdhZjgtNDdkNy00OTRmLWIzYjMtNmJlMTdjYTAyNDdhLm1wND9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MTglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTE4VDIzMzAxNFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWFhOGYwOTcwMTgwOWQ0MWNiYzQ0OWRhZDgyNWNhMDE2NjgwMmQxNjNkMzY4MmI2ZGU4ZmFlM2QwNjA2M2VjZjEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.las91a8L1UW1B_MSTxqh8zBOpmbpiB26ZRr7hAb3Hvo" controls="controls" muted="muted">

  </video>
</details>

<p dir="auto"><h2 tabindex="-1" dir="auto">Install</h2><a id="user-content-install" aria-label="Permalink: Install" href="#install"></a></p>
<ol dir="auto">
<li>Clone this repository.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/ictnlp/LLaMA-Omni
cd LLaMA-Omni"><pre>git clone https://github.com/ictnlp/LLaMA-Omni
<span>cd</span> LLaMA-Omni</pre></div>
<ol start="2" dir="auto">
<li>Install packages.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="conda create -n llama-omni python=3.10
conda activate llama-omni
pip install pip==24.0
pip install -e ."><pre>conda create -n llama-omni python=3.10
conda activate llama-omni
pip install pip==24.0
pip install -e <span>.</span></pre></div>
<ol start="3" dir="auto">
<li>Install <code>fairseq</code>.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/pytorch/fairseq
cd fairseq
pip install -e . --no-build-isolation"><pre>git clone https://github.com/pytorch/fairseq
<span>cd</span> fairseq
pip install -e <span>.</span> --no-build-isolation</pre></div>
<ol start="4" dir="auto">
<li>Install <code>flash-attention</code>.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="pip install flash-attn --no-build-isolation"><pre>pip install flash-attn --no-build-isolation</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Quick Start</h2><a id="user-content-quick-start" aria-label="Permalink: Quick Start" href="#quick-start"></a></p>
<ol dir="auto">
<li>
<p dir="auto">Download the <code>Llama-3.1-8B-Omni</code> model from 🤗<a href="https://huggingface.co/ICTNLP/Llama-3.1-8B-Omni" rel="nofollow">Huggingface</a>.</p>
</li>
<li>
<p dir="auto">Download the <code>Whisper-large-v3</code> model.</p>
</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="import whisper
model = whisper.load_model(&quot;large-v3&quot;, download_root=&quot;models/speech_encoder/&quot;)"><pre>import whisper
model = whisper.load_model(<span><span>"</span>large-v3<span>"</span></span>, download_root=<span><span>"</span>models/speech_encoder/<span>"</span></span>)</pre></div>
<ol start="3" dir="auto">
<li>Download the unit-based HiFi-GAN vocoder.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="wget https://dl.fbaipublicfiles.com/fairseq/speech_to_speech/vocoder/code_hifigan/mhubert_vp_en_es_fr_it3_400k_layer11_km1000_lj/g_00500000 -P vocoder/
wget https://dl.fbaipublicfiles.com/fairseq/speech_to_speech/vocoder/code_hifigan/mhubert_vp_en_es_fr_it3_400k_layer11_km1000_lj/config.json -P vocoder/"><pre>wget https://dl.fbaipublicfiles.com/fairseq/speech_to_speech/vocoder/code_hifigan/mhubert_vp_en_es_fr_it3_400k_layer11_km1000_lj/g_00500000 -P vocoder/
wget https://dl.fbaipublicfiles.com/fairseq/speech_to_speech/vocoder/code_hifigan/mhubert_vp_en_es_fr_it3_400k_layer11_km1000_lj/config.json -P vocoder/</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Gradio Demo</h2><a id="user-content-gradio-demo" aria-label="Permalink: Gradio Demo" href="#gradio-demo"></a></p>
<ol dir="auto">
<li>Launch a controller.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="python -m omni_speech.serve.controller --host 0.0.0.0 --port 10000"><pre>python -m omni_speech.serve.controller --host 0.0.0.0 --port 10000</pre></div>
<ol start="2" dir="auto">
<li>Launch a gradio web server.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="python -m omni_speech.serve.gradio_web_server --controller http://localhost:10000 --port 8000 --model-list-mode reload --vocoder vocoder/g_00500000 --vocoder-cfg vocoder/config.json"><pre>python -m omni_speech.serve.gradio_web_server --controller http://localhost:10000 --port 8000 --model-list-mode reload --vocoder vocoder/g_00500000 --vocoder-cfg vocoder/config.json</pre></div>
<ol start="3" dir="auto">
<li>Launch a model worker.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="python -m omni_speech.serve.model_worker --host 0.0.0.0 --controller http://localhost:10000 --port 40000 --worker http://localhost:40000 --model-path Llama-3.1-8B-Omni --model-name Llama-3.1-8B-Omni --s2s"><pre>python -m omni_speech.serve.model_worker --host 0.0.0.0 --controller http://localhost:10000 --port 40000 --worker http://localhost:40000 --model-path Llama-3.1-8B-Omni --model-name Llama-3.1-8B-Omni --s2s</pre></div>
<ol start="4" dir="auto">
<li>Visit <a href="http://localhost:8000/" rel="nofollow">http://localhost:8000/</a> and interact with LLaMA-3.1-8B-Omni!</li>
</ol>
<p dir="auto"><strong>Note: Due to the instability of streaming audio playback in Gradio, we have only implemented streaming audio synthesis without enabling autoplay. If you have a good solution, feel free to submit a PR. Thanks!</strong></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Local Inference</h2><a id="user-content-local-inference" aria-label="Permalink: Local Inference" href="#local-inference"></a></p>
<p dir="auto">To run inference locally, please organize the speech instruction files according to the format in the <code>omni_speech/infer/examples</code> directory, then refer to the following script.</p>
<div dir="auto" data-snippet-clipboard-copy-content="bash omni_speech/infer/run.sh omni_speech/infer/examples"><pre>bash omni_speech/infer/run.sh omni_speech/infer/examples</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">LICENSE</h2><a id="user-content-license" aria-label="Permalink: LICENSE" href="#license"></a></p>
<p dir="auto">Our code is released under the Apache-2.0 License. Our model, as it is built on Llama 3.1, is required to comply with the <a href="https://llama.meta.com/llama3_1/license/" rel="nofollow">Llama 3.1 License</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Acknowledgements</h2><a id="user-content-acknowledgements" aria-label="Permalink: Acknowledgements" href="#acknowledgements"></a></p>
<ul dir="auto">
<li><a href="https://github.com/haotian-liu/LLaVA">LLaVA</a>: The codebase we built upon.</li>
<li><a href="https://github.com/X-LANCE/SLAM-LLM">SLAM-LLM</a>: We borrow some code about speech encoder and speech adaptor.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Citation</h2><a id="user-content-citation" aria-label="Permalink: Citation" href="#citation"></a></p>
<p dir="auto">If you have any questions, please feel free to submit an issue or contact <code>fangqingkai21b@ict.ac.cn</code>.</p>
<p dir="auto">If our work is useful for you, please cite as:</p>
<div data-snippet-clipboard-copy-content="@article{fang-etal-2024-llama-omni,
  title={LLaMA-Omni: Seamless Speech Interaction with Large Language Models},
  author={Fang, Qingkai and Guo, Shoutao and Zhou, Yan and Ma, Zhengrui and Zhang, Shaolei and Feng, Yang},
  journal={arXiv preprint arXiv:2409.06666},
  year={2024}
}"><pre><code>@article{fang-etal-2024-llama-omni,
  title={LLaMA-Omni: Seamless Speech Interaction with Large Language Models},
  author={Fang, Qingkai and Guo, Shoutao and Zhou, Yan and Ma, Zhengrui and Zhang, Shaolei and Feng, Yang},
  journal={arXiv preprint arXiv:2409.06666},
  year={2024}
}
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Star History</h2><a id="user-content-star-history" aria-label="Permalink: Star History" href="#star-history"></a></p>
<p dir="auto"><a href="https://star-history.com/#ictnlp/llama-omni&amp;Date" rel="nofollow"><img src="https://camo.githubusercontent.com/73a57c27c1f48fd90f61261b56699215fdd4b2267edd91ec8494c550fd34bc04/68747470733a2f2f6170692e737461722d686973746f72792e636f6d2f7376673f7265706f733d6963746e6c702f6c6c616d612d6f6d6e6926747970653d44617465" alt="Star History Chart" data-canonical-src="https://api.star-history.com/svg?repos=ictnlp/llama-omni&amp;type=Date"></a></p>
</article></div></div>]]></description>
        </item>
    </channel>
</rss>