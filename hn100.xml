<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Fri, 09 May 2025 14:30:02 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[NSF faces shake-up as officials abolish its 37 divisions (112 pts)]]></title>
            <link>https://www.science.org/content/article/exclusive-nsf-faces-radical-shake-officials-abolish-its-37-divisions</link>
            <guid>43935913</guid>
            <pubDate>Fri, 09 May 2025 12:13:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.science.org/content/article/exclusive-nsf-faces-radical-shake-officials-abolish-its-37-divisions">https://www.science.org/content/article/exclusive-nsf-faces-radical-shake-officials-abolish-its-37-divisions</a>, See on <a href="https://news.ycombinator.com/item?id=43935913">Hacker News</a></p>
Couldn't get https://www.science.org/content/article/exclusive-nsf-faces-radical-shake-officials-abolish-its-37-divisions: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Hyvector – A fast and modern SVG editor (110 pts)]]></title>
            <link>https://www.hyvector.com</link>
            <guid>43935394</guid>
            <pubDate>Fri, 09 May 2025 10:45:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.hyvector.com">https://www.hyvector.com</a>, See on <a href="https://news.ycombinator.com/item?id=43935394">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[WASM 2.0 (174 pts)]]></title>
            <link>https://www.w3.org/TR/wasm-core-2/</link>
            <guid>43934711</guid>
            <pubDate>Fri, 09 May 2025 08:01:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.w3.org/TR/wasm-core-2/">https://www.w3.org/TR/wasm-core-2/</a>, See on <a href="https://news.ycombinator.com/item?id=43934711">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
     <section id="introduction">
      <span id="intro"></span>
     <h2 data-level="1" id="introduction①"><span>1. </span><span>Introduction</span><a href="#introduction①"></a></h2>
     <div>
       <section id="introduction②">
       <h3 data-level="1.1" id="introduction③"><span>1.1. </span><span>Introduction</span><a href="#introduction③"></a></h3>
       <p>WebAssembly (abbreviated Wasm <a href="#wasm" id="id1" role="doc-noteref"><span>[</span>1<span>]</span></a>) is a <em>safe, portable, low-level code format</em> designed for efficient execution and compact representation.
Its main goal is to enable high performance applications on the Web, but it does not make any Web-specific assumptions or provide Web-specific features, so it can be employed in other environments as well.</p>
       <p>WebAssembly is an open standard developed by a <a href="https://www.w3.org/community/webassembly/">W3C Community Group</a>.</p>
       <p>This document describes version 2.0 (Draft 2024-12-18) of the <a href="#scope"><span>core</span></a> WebAssembly standard.
It is intended that it will be superseded by new incremental releases with additional features in the future.</p>
       <section id="design-goals">
         <span id="goals"></span>
        <h4 data-level="1.1.1" id="design-goals①"><span>1.1.1. </span><span>Design Goals</span><a href="#design-goals①"></a></h4>
        <p id="index-0">The design goals of WebAssembly are the following:</p>
        <ul>
         <li>
          <p>Fast, safe, and portable <em>semantics</em>:</p>
          <ul>
           <li>
            <p><strong>Fast</strong>: executes with near native code performance, taking advantage of capabilities common to all contemporary hardware.</p>
           </li><li>
            <p><strong>Safe</strong>: code is validated and executes in a memory-safe <a href="#memorysafe" id="id2" role="doc-noteref"><span>[</span>2<span>]</span></a>, sandboxed environment preventing data corruption or security breaches.</p>
           </li><li>
            <p><strong>Well-defined</strong>: fully and precisely defines valid programs and their behavior in a way that is easy to reason about informally and formally.</p>
           </li><li>
            <p><strong>Hardware-independent</strong>: can be compiled on all modern architectures, desktop or mobile devices and embedded systems alike.</p>
           </li><li>
            <p><strong>Language-independent</strong>: does not privilege any particular language, programming model, or object model.</p>
           </li><li>
            <p><strong>Platform-independent</strong>: can be embedded in browsers, run as a stand-alone VM, or integrated in other environments.</p>
           </li><li>
            <p><strong>Open</strong>: programs can interoperate with their environment in a simple and universal manner.</p>
          </li></ul>
         </li><li>
          <p>Efficient and portable <em>representation</em>:</p>
          <ul>
           <li>
            <p><strong>Compact</strong>: has a binary format that is fast to transmit by being smaller than typical text or native code formats.</p>
           </li><li>
            <p><strong>Modular</strong>: programs can be split up in smaller parts that can be transmitted, cached, and consumed separately.</p>
           </li><li>
            <p><strong>Efficient</strong>: can be decoded, validated, and compiled in a fast single pass, equally with either just-in-time (JIT) or ahead-of-time (AOT) compilation.</p>
           </li><li>
            <p><strong>Streamable</strong>: allows decoding, validation, and compilation to begin as soon as possible, before all data has been seen.</p>
           </li><li>
            <p><strong>Parallelizable</strong>: allows decoding, validation, and compilation to be split into many independent parallel tasks.</p>
           </li><li>
            <p><strong>Portable</strong>: makes no architectural assumptions that are not broadly supported across modern hardware.</p>
          </li></ul>
        </li></ul>
        <p>WebAssembly code is also intended to be easy to inspect and debug, especially in environments like web browsers, but such features are beyond the scope of this specification.</p>
        
       </section>
       <section id="scope">
         <span id="id3"></span>
        <h4 data-level="1.1.2" id="scope①"><span>1.1.2. </span><span>Scope</span><a href="#scope①"></a></h4>
        <p>At its core, WebAssembly is a <em>virtual instruction set architecture (virtual ISA)</em>.
As such, it has many use cases and can be embedded in many different environments.
To encompass their variety and enable maximum reuse, the WebAssembly specification is split and layered into several documents.</p>
        <p>This document is concerned with the core ISA layer of WebAssembly.
It defines the instruction set, binary encoding, validation, and execution semantics, as well as a textual representation.
It does not, however, define how WebAssembly programs can interact with a specific environment they execute in, nor how they are invoked from such an environment.</p>
        <p>Instead, this specification is complemented by additional documents defining interfaces to specific embedding environments such as the Web.
These will each define a WebAssembly <em>application programming interface (API)</em> suitable for a given environment.</p>
       </section>
       <section id="security-considerations">
         <span id="security"></span><span id="index-1"></span>
        <h4 data-level="1.1.3" id="security-considerations①"><span>1.1.3. </span><span>Security Considerations</span><a href="#security-considerations①"></a></h4>
        <p>WebAssembly provides no ambient access to the computing environment in which code is executed.
Any interaction with the environment, such as I/O, access to resources, or operating system calls, can only be performed by invoking <a href="https://www.w3.org/TR/wasm-core-2/index.html#function"><span>functions</span></a> provided by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> and imported into a WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#module"><span>module</span></a>.
An embedder can establish security policies suitable for a respective environment by controlling or limiting which functional capabilities it makes available for import.
Such considerations are an embedder’s responsibility and the subject of <a href="#scope"><span>API definitions</span></a> for a specific environment.</p>
        <p>Because WebAssembly is designed to be translated into machine code running directly on the host’s hardware, it is potentially vulnerable to side channel attacks on the hardware level.
In environments where this is a concern, an embedder may have to put suitable mitigations into place to isolate WebAssembly computations.</p>
       </section>
       <section id="dependencies">
         <span id="index-2"></span><span id="id4"></span>
        <h4 data-level="1.1.4" id="dependencies①"><span>1.1.4. </span><span>Dependencies</span><a href="#dependencies①"></a></h4>
        <p>WebAssembly depends on two existing standards:</p>
        <ul>
         <li>
          <p><a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a>, for the representation of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>floating-point data</span></a> and the semantics of respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#float-ops"><span>numeric operations</span></a>.</p>
         </li><li>
          <p><a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a>, for the representation of import/export <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>names</span></a> and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text"><span>text format</span></a>.</p>
        </li></ul>
        <p>However, to make this specification self-contained, relevant aspects of the aforementioned standards are defined and formalized as part of this specification,
such as the <a href="https://www.w3.org/TR/wasm-core-2/index.html#aux-fbits"><span>binary representation</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#aux-ieee"><span>rounding</span></a> of floating-point values, and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-char"><span>value range</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-utf8"><span>UTF-8 encoding</span></a> of Unicode characters.</p>
        <div role="note">
         <p>Note</p>
         <p>The aforementioned standards are the authoritative source of all respective definitions.
Formalizations given in this specification are intended to match these definitions.
Any discrepancy in the syntax or semantics described is to be considered an error.</p>
        </div>
       </section>
      </section>
       <section id="overview">
       <h3 data-level="1.2" id="overview①"><span>1.2. </span><span>Overview</span><a href="#overview①"></a></h3>
       <section id="concepts">
         <span id="index-0①"></span><span id="id1①"></span>
        <h4 data-level="1.2.1" id="concepts①"><span>1.2.1. </span><span>Concepts</span><a href="#concepts①"></a></h4>
        <p>WebAssembly encodes a low-level, assembly-like programming language.
This language is structured around the following concepts.</p>
        <dl id="value">
         <dt><strong>Values</strong>
         </dt><dd>
          <p>WebAssembly provides only four basic <em>number types</em>.
These are integers and <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> numbers,
each in 32 and 64 bit width.
32 bit integers also serve as Booleans and as memory addresses.
The usual operations on these types are available,
including the full matrix of conversions between them.
There is no distinction between signed and unsigned integer types.
Instead, integers are interpreted by respective operations
as either unsigned or signed in two’s complement representation.</p>
          <p>In addition to these basic number types, there is a single 128 bit wide
vector type representing different types of packed data.
The supported representations are 4 32-bit, or 2 64-bit <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> numbers, or different widths of packed integer values,
specifically 2 64-bit integers, 4 32-bit integers, 8
16-bit integers, or 16 8-bit integers.</p>
          <p>Finally, values can consist of opaque <em>references</em> that represent pointers towards different sorts of entities.
Unlike with other types, their size or representation is not observable.</p>
        </dd></dl>
        <dl id="instruction">
         <dt><strong>Instructions</strong>
         </dt><dd>
          <p>The computational model of WebAssembly is based on a <em>stack machine</em>.
Code consists of sequences of <em>instructions</em> that are executed in order.
Instructions manipulate values on an implicit <em>operand stack</em> <a href="#stackmachine" id="id2①" role="doc-noteref"><span>[</span>1<span>]</span></a> and fall into two main categories. <em>Simple</em> instructions perform basic operations on data.
They pop arguments from the operand stack and push results back to it. <em>Control</em> instructions alter control flow.
Control flow is <em>structured</em>, meaning it is expressed with well-nested constructs such as blocks, loops, and conditionals.
Branches can only target such constructs.</p>
        </dd></dl>
        <dl id="trap">
         <dt><strong>Traps</strong>
         </dt><dd>
          <p>Under some conditions, certain instructions may produce a <em>trap</em>,
which immediately aborts execution.
Traps cannot be handled by WebAssembly code,
but are reported to the outside environment,
where they typically can be caught.</p>
        </dd></dl>
        <dl id="function">
         <dt><strong>Functions</strong>
         </dt><dd>
          <p>Code is organized into separate <em>functions</em>.
Each function takes a sequence of values as parameters
and returns a sequence of values as results.
Functions can call each other, including recursively,
resulting in an implicit call stack that cannot be accessed directly.
Functions may also declare mutable <em>local variables</em> that are usable as virtual registers.</p>
        </dd></dl>
        <dl id="table">
         <dt><strong>Tables</strong>
         </dt><dd>
          <p>A <em>table</em> is an array of opaque values of a particular <em>element type</em>.
It allows programs to select such values indirectly through a dynamic index operand.
Currently, the only available element type is an untyped function reference or a reference to an external host value.
Thereby, a program can call functions indirectly through a dynamic index into a table.
For example, this allows emulating function pointers by way of table indices.</p>
        </dd></dl>
        <dl id="memory">
         <dt><strong>Linear Memory</strong>
         </dt><dd>
          <p>A <em>linear memory</em> is a contiguous, mutable array of raw bytes.
Such a memory is created with an initial size but can be grown dynamically.
A program can load and store values from/to a linear memory at any byte address (including unaligned).
Integer loads and stores can specify a <em>storage size</em> which is smaller than the size of the respective value type.
A trap occurs if an access is not within the bounds of the current memory size.</p>
        </dd></dl>
        <dl id="module">
         <dt><strong>Modules</strong>
         </dt><dd>
          <p>A WebAssembly binary takes the form of a <em>module</em> that contains definitions for functions, tables, and linear memories,
as well as mutable or immutable <em>global variables</em>.
Definitions can also be <em>imported</em>, specifying a module/name pair and a suitable type.
Each definition can optionally be <em>exported</em> under one or more names.
In addition to definitions, modules can define initialization data for their memories or tables
that takes the form of <em>segments</em> copied to given offsets.
They can also define a <em>start function</em> that is automatically executed.</p>
        </dd></dl>
        <dl id="embedder">
         <dt><strong>Embedder</strong>
         </dt><dd>
          <p>A WebAssembly implementation will typically be <em>embedded</em> into a <em>host</em> environment.
This environment defines how loading of modules is initiated,
how imports are provided (including host-side definitions), and how exports can be accessed.
However, the details of any particular embedding are beyond the scope of this specification, and will instead be provided by complementary, environment-specific API definitions.</p>
        </dd></dl>
        
       </section>
       <section id="semantic-phases">
         <span id="index-1①"></span>
        <h4 data-level="1.2.2" id="semantic-phases①"><span>1.2.2. </span><span>Semantic Phases</span><a href="#semantic-phases①"></a></h4>
        <p>Conceptually, the semantics of WebAssembly is divided into three phases.
For each part of the language, the specification specifies each of them.</p>
        <dl id="decoding">
         <dt><strong>Decoding</strong>
         </dt><dd>
          <p>WebAssembly modules are distributed in a <em>binary format</em>. <em>Decoding</em> processes that format and converts it into an internal representation of a module.
In this specification, this representation is modelled by <em>abstract syntax</em>, but a real implementation could compile directly to machine code instead.</p>
        </dd></dl>
        <dl id="validation">
         <dt><strong>Validation</strong>
         </dt><dd>
          <p>A decoded module has to be <em>valid</em>.
Validation checks a number of well-formedness conditions to guarantee that the module is meaningful and safe.
In particular, it performs <em>type checking</em> of functions and the instruction sequences in their bodies, ensuring for example that the operand stack is used consistently.</p>
        </dd></dl>
         <span id="instantiation"></span><span id="execution"></span>
        <dl id="invocation">
         <dt><strong>Execution</strong>
         </dt><dd>
          <p>Finally, a valid module can be <em>executed</em>.
Execution can be further divided into two phases:</p>
          <p><strong>Instantiation</strong>.
A module <em>instance</em> is the dynamic representation of a module,
complete with its own state and execution stack.
Instantiation executes the module body itself, given definitions for all its imports.
It initializes globals, memories and tables and invokes the module’s start function if defined.
It returns the instances of the module’s exports.</p>
          <p><strong>Invocation</strong>.
Once instantiated, further WebAssembly computations can be initiated by <em>invoking</em> an exported function on a module instance.
Given the required arguments, that executes the respective function and returns its results.</p>
          <p>Instantiation and invocation are operations within the embedding environment.</p>
        </dd></dl>
       </section>
      </section>
     </div>
    </section>
     <section id="structure">
      <span id="syntax"></span>
     <h2 data-level="2" id="structure①"><span>2. </span><span>Structure</span><a href="#structure①"></a></h2>
     <div>
       <section id="conventions">
        <span id="index-0②"></span>
       <h3 data-level="2.1" id="conventions①"><span>2.1. </span><span>Conventions</span><a href="#conventions①"></a></h3>
       <p>WebAssembly is a programming language that has multiple concrete representations
(its <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary"><span>binary format</span></a> and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text"><span>text format</span></a>).
Both map to a common structure.
For conciseness, this structure is described in the form of an <em>abstract syntax</em>.
All parts of this specification are defined in terms of this abstract syntax.</p>
       <section id="grammar-notation">
         <span id="grammar"></span><span id="index-1②"></span>
        <h4 data-level="2.1.1" id="grammar-notation①"><span>2.1.1. </span><span>Grammar Notation</span><a href="#grammar-notation①"></a></h4>
        <p>The following conventions are adopted in defining grammar rules for abstract syntax.</p>
        <ul>
         <li>
          <p>Terminal symbols (atoms) are written in sans-serif font or in symbolic form: <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Nonterminal symbols are written in italic font: <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> is a sequence of <span><span><span></span></span></span> iterations  of <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> is a possibly empty sequence of iterations of <span><span><span></span></span></span>.
(This is a shorthand for <span><span><span></span></span></span> used where <span><span><span></span></span></span> is not relevant.)</p>
         </li><li>
          <p><span><span><span></span></span></span> is a non-empty sequence of iterations of <span><span><span></span></span></span>.
(This is a shorthand for <span><span><span></span></span></span> where <span><span><span></span></span></span>.)</p>
         </li><li>
          <p><span><span><span></span></span></span> is an optional occurrence of <span><span><span></span></span></span>.
(This is a shorthand for <span><span><span></span></span></span> where <span><span><span></span></span></span>.)</p>
         </li><li>
          <p>Productions are written <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Large productions may be split into multiple definitions, indicated by ending the first one with explicit ellipses, <span><span><span></span></span></span>, and starting continuations with ellipses, <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Some productions are augmented with side conditions in parentheses, “<span><span><span></span></span></span>”, that provide a shorthand for a combinatorial expansion of the production into many separate cases.</p>
         </li><li>
          <p>If the same meta variable or non-terminal symbol appears multiple times in a production, then all those occurrences must have the same instantiation.
(This is a shorthand for a side condition requiring multiple different variables to be equal.)</p>
        </li></ul>
       </section>
       <section id="auxiliary-notation">
         <span id="notation-compose"></span><span id="notation-concat"></span><span id="notation-project"></span><span id="notation-record"></span><span id="notation-replace"></span><span id="notation-slice"></span><span id="notation-index"></span><span id="notation-length"></span><span id="notation-epsilon"></span>
        <h4 data-level="2.1.2" id="auxiliary-notation①"><span>2.1.2. </span><span>Auxiliary Notation</span><a href="#auxiliary-notation①"></a></h4>
        <p>When dealing with syntactic constructs the following notation is also used:</p>
        <ul>
         <li>
          <p><span><span><span></span></span></span> denotes the empty sequence.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the length of a sequence <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the <span><span><span></span></span></span>-th element of a sequence <span><span><span></span></span></span>, starting from <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the sub-sequence <span><span><span></span></span></span> of a sequence <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the same sequence as <span><span><span></span></span></span>,
except that the <span><span><span></span></span></span>-th element is replaced with <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the same sequence as <span><span><span></span></span></span>,
except that the sub-sequence <span><span><span></span></span></span> is replaced with <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the flat sequence formed by concatenating all sequences <span><span><span></span></span></span> in <span><span><span></span></span></span>.</p>
        </li></ul>
        <p>Moreover, the following conventions are employed:</p>
        <ul>
         <li>
          <p>The notation <span><span><span></span></span></span>, where <span><span><span></span></span></span> is a non-terminal symbol, is treated as a meta variable ranging over respective sequences of <span><span><span></span></span></span> (similarly for <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>).</p>
         </li><li>
          <p>When given a sequence <span><span><span></span></span></span>,
then the occurrences of <span><span><span></span></span></span> in a sequence written <span><span><span></span></span></span> are assumed to be in point-wise correspondence with <span><span><span></span></span></span> (similarly for <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>).
This implicitly expresses a form of mapping syntactic constructions over a sequence.</p>
        </li></ul>
        <p>Productions of the following form are interpreted as <em>records</em> that map a fixed set of fields <span><span><span></span></span></span> to “values” <span><span><span></span></span></span>, respectively:</p>
        
        <p>The following notation is adopted for manipulating such records:</p>
        <ul>
         <li>
          <p><span><span><span></span></span></span> denotes the contents of the <span><span><span></span></span></span> component of <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the same record as <span><span><span></span></span></span>,
except that the contents of the <span><span><span></span></span></span> component is replaced with <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the composition of two records with the same fields of sequences by appending each sequence point-wise:</p>
          
         </li><li>
          <p><span><span><span></span></span></span> denotes the composition of a sequence of records, respectively; if the sequence is empty, then all fields of the resulting record are empty.</p>
        </li></ul>
        <p>The update notation for sequences and records generalizes recursively to nested components accessed by “paths” <span><span><span></span></span></span>:</p>
        <ul>
         <li>
          <p><span><span><span></span></span></span> is short for <span><span><span></span></span></span>,</p>
         </li><li>
          <p><span><span><span></span></span></span> is short for <span><span><span></span></span></span>,</p>
        </li></ul>
        <p>where <span><span><span></span></span></span> is shortened to <span><span><span></span></span></span>.</p>
       </section>
       <section id="vectors">
         <span id="syntax-vec"></span><span id="index-2①"></span>
        <h4 data-level="2.1.3" id="vectors①"><span>2.1.3. </span><span>Vectors</span><a href="#vectors①"></a></h4>
        <p><em>Vectors</em> are bounded sequences of the form <span><span><span></span></span></span> (or <span><span><span></span></span></span>),
where the <span><span><span></span></span></span> can either be values or complex constructions.
A vector can have at most <span><span><span></span></span></span> elements.</p>
        
       </section>
      </section>
       <section id="values">
        <span id="syntax-value"></span><span id="index-0③"></span>
       <h3 data-level="2.2" id="values①"><span>2.2. </span><span>Values</span><a href="#values①"></a></h3>
       <p>WebAssembly programs operate on primitive numeric <em>values</em>.
Moreover, in the definition of programs, immutable sequences of values occur to represent more complex data, such as text strings or other vectors.</p>
       <section id="bytes">
         <span id="syntax-byte"></span><span id="index-1③"></span>
        <h4 data-level="2.2.1" id="bytes①"><span>2.2.1. </span><span>Bytes</span><a href="#bytes①"></a></h4>
        <p>The simplest form of value are raw uninterpreted <em>bytes</em>.
In the abstract syntax they are represented as hexadecimal literals.</p>
        
        <section id="conventions②">
         <h5 data-level="2.2.1.1" id="conventions③"><span>2.2.1.1. </span><span>Conventions</span><a href="#conventions③"></a></h5>
         <ul>
          <li>
           <p>The meta variable <span><span><span></span></span></span> ranges over bytes.</p>
          </li><li>
           <p>Bytes are sometimes interpreted as natural numbers <span><span><span></span></span></span>.</p>
         </li></ul>
        </section>
       </section>
       <section id="integers">
         <span id="syntax-int"></span><span id="syntax-uint"></span><span id="syntax-sint"></span><span id="index-2②"></span>
        <h4 data-level="2.2.2" id="integers①"><span>2.2.2. </span><span>Integers</span><a href="#integers①"></a></h4>
        <p>Different classes of <em>integers</em> with different value ranges are distinguished by their <em>bit width</em> <span><span><span></span></span></span> and by whether they are <em>unsigned</em> or <em>signed</em>.</p>
        
        <p>The class <span><span><span></span></span></span> defines <em>uninterpreted</em> integers, whose signedness interpretation can vary depending on context.
In the abstract syntax, they are represented as unsigned values.
However, some operations <a href="https://www.w3.org/TR/wasm-core-2/index.html#aux-signed"><span>convert</span></a> them to signed based on a two’s complement interpretation.</p>
        <div role="note">
         <p>Note</p>
         <p>The main integer types occurring in this specification are <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>.
However, other sizes occur as auxiliary constructions, e.g., in the definition of <a href="#syntax-float"><span>floating-point</span></a> numbers.</p>
        </div>
        <section id="id1②">
         <h5 data-level="2.2.2.1" id="conventions④"><span>2.2.2.1. </span><span>Conventions</span><a href="#conventions④"></a></h5>
         <ul>
          <li>
           <p>The meta variables <span><span><span></span></span></span> range over integers.</p>
          </li><li>
           <p>Numbers may be denoted by simple arithmetics, as in the grammar above.
In order to distinguish arithmetics like <span><span><span></span></span></span> from sequences like <span><span><span></span></span></span>, the latter is distinguished with parentheses.</p>
         </li></ul>
        </section>
       </section>
       <section id="floating-point">
         <span id="syntax-float"></span><span id="syntax-payload"></span><span id="syntax-nan"></span><span id="index-3"></span>
        <h4 data-level="2.2.3" id="floating-point①"><span>2.2.3. </span><span>Floating-Point</span><a href="#floating-point①"></a></h4>
        <p><em>Floating-point</em> data represents 32 or 64 bit values that correspond to the respective binary formats of the <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> standard (Section 3.3).</p>
        <p>Every value has a <em>sign</em> and a <em>magnitude</em>.
Magnitudes can either be expressed as <em>normal</em> numbers of the form <span><span><span></span></span></span>, where <span><span><span></span></span></span> is the exponent and <span><span><span></span></span></span> is the <em>significand</em> whose most significant bit <span><span><span></span></span></span> is <span><span><span></span></span></span>,
or as a <em>subnormal</em> number where the exponent is fixed to the smallest possible value and <span><span><span></span></span></span> is <span><span><span></span></span></span>; among the subnormals are positive and negative zero values.
Since the significands are binary values, normals are represented in the form <span><span><span></span></span></span>, where <span><span><span></span></span></span> is the bit width of <span><span><span></span></span></span>; similarly for subnormals.</p>
        <p>Possible magnitudes also include the special values <span><span><span></span></span></span> (infinity) and <span><span><span></span></span></span> (<em>NaN</em>, not a number).
NaN values have a <em>payload</em> that describes the mantissa bits in the underlying <a href="https://www.w3.org/TR/wasm-core-2/index.html#aux-fbits"><span>binary representation</span></a>.
No distinction is made between signalling and quiet NaNs.</p>
        
        <p>where <span><span><span></span></span></span> and <span><span><span></span></span></span> with</p>
        
        <p id="aux-canon"><span id="arithmetic-nan"></span><span id="canonical-nan"></span>A <em>canonical NaN</em> is a floating-point value <span><span><span></span></span></span> where <span><span><span></span></span></span> is a payload whose most significant bit is <span><span><span></span></span></span> while all others are <span><span><span></span></span></span>:</p>
        
        <p>An <em>arithmetic NaN</em> is a floating-point value <span><span><span></span></span></span> with <span><span><span></span></span></span>, such that the most significant bit is <span><span><span></span></span></span> while all others are arbitrary.</p>
        <div role="note">
         <p>Note</p>
         <p>In the abstract syntax, subnormals are distinguished by the leading 0 of the significand. The exponent of subnormals has the same value as the smallest possible exponent of a normal number. Only in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-float"><span>binary representation</span></a> the exponent of a subnormal is encoded differently than the exponent of any normal number.</p>
         <p>The notion of canonical NaN defined here is unrelated to the notion of canonical NaN that the <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> standard (Section 3.5.2) defines for decimal interchange formats.</p>
        </div>
        <section id="id2②">
         <h5 data-level="2.2.3.1" id="conventions⑤"><span>2.2.3.1. </span><span>Conventions</span><a href="#conventions⑤"></a></h5>
         <ul>
          <li>
           <p>The meta variable <span><span><span></span></span></span> ranges over floating-point values where clear from context.</p>
         </li></ul>
        </section>
       </section>
       <section id="vectors②">
         <span id="syntax-vecnum"></span><span id="index-4"></span>
        <h4 data-level="2.2.4" id="vectors③"><span>2.2.4. </span><span>Vectors</span><a href="#vectors③"></a></h4>
        <p><em>Numeric vectors</em> are 128-bit values that are processed by vector instructions (also known as <em>SIMD</em> instructions, single instruction multiple data).
They are represented in the abstract syntax using <span><span><span></span></span></span>. The interpretation of lane types (<a href="#syntax-int"><span>integer</span></a> or <a href="#syntax-float"><span>floating-point</span></a> numbers) and lane sizes are determined by the specific instruction operating on them.</p>
       </section>
       <section id="names">
         <span id="syntax-name"></span><span id="syntax-char"></span><span id="index-5"></span>
        <h4 data-level="2.2.5" id="names①"><span>2.2.5. </span><span>Names</span><a href="#names①"></a></h4>
        <p><em>Names</em> are sequences of <em>characters</em>, which are <em>scalar values</em> as defined by <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> (Section 2.4).</p>
        
        <p>Due to the limitations of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-name"><span>binary format</span></a>,
the length of a name is bounded by the length of its <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-utf8"><span>UTF-8</span></a> encoding.</p>
        <section id="convention">
         <h5 data-level="2.2.5.1" id="convention①"><span>2.2.5.1. </span><span>Convention</span><a href="#convention①"></a></h5>
         <ul>
          <li>
           <p>Characters (Unicode scalar values) are sometimes used interchangeably with natural numbers <span><span><span></span></span></span>.</p>
         </li></ul>
        </section>
       </section>
      </section>
       <section id="types">
        <span id="syntax-type"></span><span id="index-0④"></span>
       <h3 data-level="2.3" id="types①"><span>2.3. </span><span>Types</span><a href="#types①"></a></h3>
       <p>Various entities in WebAssembly are classified by types.
Types are checked during <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid"><span>validation</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiation</span></a>, and possibly <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-call-indirect"><span>execution</span></a>.</p>
       <section id="number-types">
         <span id="syntax-numtype"></span><span id="index-1④"></span>
        <h4 data-level="2.3.1" id="number-types①"><span>2.3.1. </span><span>Number Types</span><a href="#number-types①"></a></h4>
        <p><em>Number types</em> classify numeric values.</p>
        
        <p>The types <span><span><span></span></span></span> and <span><span><span></span></span></span> classify 32 and 64 bit integers, respectively.
Integers are not inherently signed or unsigned, their interpretation is determined by individual operations.</p>
        <p>The types <span><span><span></span></span></span> and <span><span><span></span></span></span> classify 32 and 64 bit floating-point data, respectively.
They correspond to the respective binary floating-point representations, also known as <em>single</em> and <em>double</em> precision, as defined by the <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> standard (Section 3.3).</p>
        <p>Number types are <em>transparent</em>, meaning that their bit patterns can be observed.
Values of number type can be stored in <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memories</span></a>.</p>
        <section id="conventions⑥">
          <span id="bitwidth"></span>
         <h5 data-level="2.3.1.1" id="conventions⑦"><span>2.3.1.1. </span><span>Conventions</span><a href="#conventions⑦"></a></h5>
         <ul>
          <li>
           <p>The notation <span><span><span></span></span></span> denotes the <em>bit width</em> of a number type <span><span><span></span></span></span>.
That is, <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
        </section>
       </section>
       <section id="vector-types">
         <span id="syntax-vectype"></span><span id="index-2③"></span>
        <h4 data-level="2.3.2" id="vector-types①"><span>2.3.2. </span><span>Vector Types</span><a href="#vector-types①"></a></h4>
        <p><em>Vector types</em> classify vectors of <a href="#syntax-numtype"><span>numeric</span></a> values processed by vector instructions (also known as <em>SIMD</em> instructions, single instruction multiple data).</p>
        
        <p>The type <span><span><span></span></span></span> corresponds to a 128 bit vector of packed integer or floating-point data. The packed data
can be interpreted as signed or unsigned integers, single or double precision floating-point
values, or a single 128 bit type. The interpretation is determined by individual operations.</p>
        <p>Vector types, like <a href="#syntax-numtype"><span>number types</span></a> are <em>transparent</em>, meaning that their bit patterns can be observed.
Values of vector type can be stored in <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memories</span></a>.</p>
        <section id="id1③">
         <h5 data-level="2.3.2.1" id="conventions⑧"><span>2.3.2.1. </span><span>Conventions</span><a href="#conventions⑧"></a></h5>
         <ul>
          <li>
           <p>The notation <span><span><span></span></span></span> for <a href="#bitwidth"><span>bit width</span></a> extends to vector types as well, that is, <span><span><span></span></span></span>.</p>
         </li></ul>
        </section>
       </section>
       <section id="reference-types">
         <span id="syntax-reftype"></span><span id="index-3①"></span>
        <h4 data-level="2.3.3" id="reference-types①"><span>2.3.3. </span><span>Reference Types</span><a href="#reference-types①"></a></h4>
        <p><em>Reference types</em> classify first-class references to objects in the runtime <a href="https://www.w3.org/TR/wasm-core-2/index.html#store"><span>store</span></a>.</p>
        
        <p>The type <span><span><span></span></span></span> denotes the infinite union of all references to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a>, regardless of their <a href="#syntax-functype"><span>function types</span></a>.</p>
        <p>The type <span><span><span></span></span></span> denotes the infinite union of all references to objects owned by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> and that can be passed into WebAssembly under this type.</p>
        <p>Reference types are <em>opaque</em>, meaning that neither their size nor their bit pattern can be observed.
Values of reference type can be stored in <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>tables</span></a>.</p>
       </section>
       <section id="value-types">
         <span id="syntax-valtype"></span><span id="index-4①"></span>
        <h4 data-level="2.3.4" id="value-types①"><span>2.3.4. </span><span>Value Types</span><a href="#value-types①"></a></h4>
        <p><em>Value types</em> classify the individual values that WebAssembly code can compute with and the values that a variable accepts.
They are either <a href="#syntax-numtype"><span>number types</span></a>, <a href="#syntax-vectype"><span>vector types</span></a>, or <a href="#syntax-reftype"><span>reference types</span></a>.</p>
        
        <section id="id2③">
         <h5 data-level="2.3.4.1" id="conventions⑨"><span>2.3.4.1. </span><span>Conventions</span><a href="#conventions⑨"></a></h5>
         <ul>
          <li>
           <p>The meta variable <span><span><span></span></span></span> ranges over value types or subclasses thereof where clear from context.</p>
         </li></ul>
        </section>
       </section>
       <section id="result-types">
         <span id="syntax-resulttype"></span><span id="index-5①"></span>
        <h4 data-level="2.3.5" id="result-types①"><span>2.3.5. </span><span>Result Types</span><a href="#result-types①"></a></h4>
        <p><em>Result types</em> classify the result of <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instr"><span>executing</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a>,
which is a sequence of values, written with brackets.</p>
        
       </section>
       <section id="function-types">
         <span id="syntax-functype"></span><span id="index-6"></span>
        <h4 data-level="2.3.6" id="function-types①"><span>2.3.6. </span><span>Function Types</span><a href="#function-types①"></a></h4>
        <p><em>Function types</em> classify the signature of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a>,
mapping a vector of parameters to a vector of results.
They are also used to classify the inputs and outputs of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a>.</p>
        
       </section>
       <section id="limits">
         <span id="syntax-limits"></span><span id="index-7"></span>
        <h4 data-level="2.3.7" id="limits①"><span>2.3.7. </span><span>Limits</span><a href="#limits①"></a></h4>
        <p><em>Limits</em> classify the size range of resizeable storage associated with <a href="#syntax-memtype"><span>memory types</span></a> and <a href="#syntax-tabletype"><span>table types</span></a>.</p>
        
        <p>If no maximum is given, the respective storage can grow to any size.</p>
       </section>
       <section id="memory-types">
         <span id="syntax-memtype"></span><span id="index-8"></span>
        <h4 data-level="2.3.8" id="memory-types①"><span>2.3.8. </span><span>Memory Types</span><a href="#memory-types①"></a></h4>
        <p><em>Memory types</em> classify linear <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memories</span></a> and their size range.</p>
        
        <p>The limits constrain the minimum and optionally the maximum size of a memory.
The limits are given in units of <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a>.</p>
       </section>
       <section id="table-types">
         <span id="syntax-tabletype"></span><span id="index-9"></span>
        <h4 data-level="2.3.9" id="table-types①"><span>2.3.9. </span><span>Table Types</span><a href="#table-types①"></a></h4>
        <p><em>Table types</em> classify <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>tables</span></a> over elements of <a href="#syntax-reftype"><span>reference type</span></a> within a size range.</p>
        
        <p>Like memories, tables are constrained by limits for their minimum and optionally maximum size.
The limits are given in numbers of entries.</p>
        <div role="note">
         <p>Note</p>
         <p>In future versions of WebAssembly, additional element types may be introduced.</p>
        </div>
       </section>
       <section id="global-types">
         <span id="syntax-globaltype"></span><span id="syntax-mut"></span><span id="index-10"></span>
        <h4 data-level="2.3.10" id="global-types①"><span>2.3.10. </span><span>Global Types</span><a href="#global-types①"></a></h4>
        <p><em>Global types</em> classify <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a> variables, which hold a value and can either be mutable or immutable.</p>
        
       </section>
       <section id="external-types">
         <span id="syntax-externtype"></span><span id="index-11"></span>
        <h4 data-level="2.3.11" id="external-types①"><span>2.3.11. </span><span>External Types</span><a href="#external-types①"></a></h4>
        <p><em>External types</em> classify <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external values</span></a> with their respective types.</p>
        
        <section id="id3①">
         <h5 data-level="2.3.11.1" id="conventions①⓪"><span>2.3.11.1. </span><span>Conventions</span><a href="#conventions①⓪"></a></h5>
         <p>The following auxiliary notation is defined for sequences of external types.
It filters out entries of a specific kind in an order-preserving fashion:</p>
         <ul>
          <li>
           
          </li><li>
           
          </li><li>
           
          </li><li>
           
         </li></ul>
        </section>
       </section>
      </section>
       <section id="instructions">
        <span id="syntax-instr"></span><span id="index-0⑤"></span>
       <h3 data-level="2.4" id="instructions①"><span>2.4. </span><span>Instructions</span><a href="#instructions①"></a></h3>
       <p>WebAssembly code consists of sequences of <em>instructions</em>.
Its computational model is based on a <em>stack machine</em> in that instructions manipulate values on an implicit <em>operand stack</em>,
consuming (popping) argument values and producing or returning (pushing) result values.</p>
       <p>In addition to dynamic operands from the stack, some instructions also have static <em>immediate</em> arguments,
typically <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>indices</span></a> or type annotations,
which are part of the instruction itself.</p>
       <p>Some instructions are <a href="#syntax-instr-control"><span>structured</span></a> in that they bracket nested sequences of instructions.</p>
       <p>The following sections group instructions into a number of different categories.</p>
       <section id="numeric-instructions">
         <span id="syntax-instr-numeric"></span><span id="syntax-frelop"></span><span id="syntax-ftestop"></span><span id="syntax-fbinop"></span><span id="syntax-funop"></span><span id="syntax-irelop"></span><span id="syntax-itestop"></span><span id="syntax-ibinop"></span><span id="syntax-iunop"></span><span id="syntax-const"></span><span id="syntax-sx"></span><span id="index-1⑤"></span>
        <h4 data-level="2.4.1" id="numeric-instructions①"><span>2.4.1. </span><span>Numeric Instructions</span><a href="#numeric-instructions①"></a></h4>
        <p>Numeric instructions provide basic operations over numeric <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-value"><span>values</span></a> of specific <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>type</span></a>.
These operations closely match respective operations available in hardware.</p>
        
        <p>Numeric instructions are divided by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number type</span></a>.
For each type, several subcategories can be distinguished:</p>
        <ul>
         <li>
          <p><em>Constants</em>: return a static constant.</p>
         </li><li>
          <p><em>Unary Operations</em>: consume one operand and produce one result of the respective type.</p>
         </li><li>
          <p><em>Binary Operations</em>: consume two operands and produce one result of the respective type.</p>
         </li><li>
          <p><em>Tests</em>: consume one operand of the respective type and produce a Boolean integer result.</p>
         </li><li>
          <p><em>Comparisons</em>: consume two operands of the respective type and produce a Boolean integer result.</p>
         </li><li>
          <p><em>Conversions</em>: consume a value of one type and produce a result of another
(the source type of the conversion is the one after the “<span><span><span></span></span></span>”).</p>
        </li></ul>
        <p>Some integer instructions come in two flavors,
where a signedness annotation <span><span><span></span></span></span> distinguishes whether the operands are to be <a href="https://www.w3.org/TR/wasm-core-2/index.html#aux-signed"><span>interpreted</span></a> as <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-uint"><span>unsigned</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-sint"><span>signed</span></a> integers.
For the other integer instructions, the use of two’s complement for the signed interpretation means that they behave the same regardless of signedness.</p>
        <section id="conventions①①">
          <span id="syntax-cvtop"></span><span id="syntax-relop"></span><span id="syntax-testop"></span><span id="syntax-binop"></span><span id="syntax-unop"></span>
         <h5 data-level="2.4.1.1" id="conventions①②"><span>2.4.1.1. </span><span>Conventions</span><a href="#conventions①②"></a></h5>
         <p>Occasionally, it is convenient to group operators together according to the following grammar shorthands:</p>
         
        </section>
       </section>
       <section id="vector-instructions">
         <span id="syntax-instr-vec"></span><span id="syntax-vfbinop"></span><span id="syntax-vfunop"></span><span id="syntax-visatbinop"></span><span id="syntax-viminmaxop"></span><span id="syntax-vibinop"></span><span id="syntax-viunop"></span><span id="syntax-vishiftop"></span><span id="syntax-vfrelop"></span><span id="syntax-virelop"></span><span id="syntax-vitestop"></span><span id="syntax-vvtestop"></span><span id="syntax-vvternop"></span><span id="syntax-vvbinop"></span><span id="syntax-vvunop"></span><span id="syntax-half"></span><span id="syntax-shape"></span><span id="syntax-laneidx"></span><span id="index-2④"></span>
        <h4 data-level="2.4.2" id="vector-instructions①"><span>2.4.2. </span><span>Vector Instructions</span><a href="#vector-instructions①"></a></h4>
        <p>Vector instructions (also known as <em>SIMD</em> instructions, <em>single instruction multiple data</em>) provide basic operations over <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-value"><span>values</span></a> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vectype"><span>vector type</span></a>.</p>
        
        
        
        <p id="syntax-vec-shape">Vector instructions have a naming convention involving a prefix that
determines how their operands will be interpreted.
This prefix describes the <em>shape</em> of the operand,
written <span><span><span></span></span></span>, and consisting of a packed <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>numeric type</span></a> <span><span><span></span></span></span> and the number of <em>lanes</em> <span><span><span></span></span></span> of that type.
Operations are performed point-wise on the values of each lane.</p>
        <div role="note">
         <p>Note</p>
         <p>For example, the shape <span><span><span></span></span></span> interprets the operand
as four <span><span><span></span></span></span> values, packed into an <span><span><span></span></span></span>.
The bitwidth of the numeric type <span><span><span></span></span></span> times <span><span><span></span></span></span> always is 128.</p>
        </div>
        <p>Instructions prefixed with <span><span><span></span></span></span> do not involve a specific interpretation, and treat the <span><span><span></span></span></span> as an <span><span><span></span></span></span> value or a vector of 128 individual bits.</p>
        <p>Vector instructions can be grouped into several subcategories:</p>
        <ul>
         <li>
          <p><em>Constants</em>: return a static constant.</p>
         </li><li>
          <p><em>Unary Operations</em>: consume one <span><span><span></span></span></span> operand and produce one <span><span><span></span></span></span> result.</p>
         </li><li>
          <p><em>Binary Operations</em>: consume two <span><span><span></span></span></span> operands and produce one <span><span><span></span></span></span> result.</p>
         </li><li>
          <p><em>Ternary Operations</em>: consume three <span><span><span></span></span></span> operands and produce one <span><span><span></span></span></span> result.</p>
         </li><li>
          <p><em>Tests</em>: consume one <span><span><span></span></span></span> operand and produce a Boolean integer result.</p>
         </li><li>
          <p><em>Shifts</em>: consume a <span><span><span></span></span></span> operand and a <span><span><span></span></span></span> operand, producing one <span><span><span></span></span></span> result.</p>
         </li><li>
          <p><em>Splats</em>: consume a value of numeric type and produce a <span><span><span></span></span></span> result of a specified shape.</p>
         </li><li>
          <p><em>Extract lanes</em>: consume a <span><span><span></span></span></span> operand and return the numeric value in a given lane.</p>
         </li><li>
          <p><em>Replace lanes</em>: consume a <span><span><span></span></span></span> operand and a numeric value for a given lane, and produce a <span><span><span></span></span></span> result.</p>
        </li></ul>
        <p>Some vector instructions have a signedness annotation <span><span><span></span></span></span> which distinguishes whether the elements in the operands are to be <a href="https://www.w3.org/TR/wasm-core-2/index.html#aux-signed"><span>interpreted</span></a> as <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-uint"><span>unsigned</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-sint"><span>signed</span></a> integers.
For the other vector instructions, the use of two’s complement for the signed interpretation means that they behave the same regardless of signedness.</p>
        <section id="syntax-vcvtop">
          <span id="syntax-vtestop"></span><span id="syntax-vrelop"></span><span id="syntax-vbinop"></span><span id="syntax-vunop"></span><span id="id1④"></span>
         <h5 data-level="2.4.2.1" id="conventions①③"><span>2.4.2.1. </span><span>Conventions</span><a href="#conventions①③"></a></h5>
         <p>Occasionally, it is convenient to group operators together according to the following grammar shorthands:</p>
         
        </section>
       </section>
       <section id="reference-instructions">
         <span id="syntax-instr-ref"></span><span id="syntax-ref-func"></span><span id="syntax-ref-is-null"></span><span id="syntax-ref-null"></span><span id="index-3②"></span>
        <h4 data-level="2.4.3" id="reference-instructions①"><span>2.4.3. </span><span>Reference Instructions</span><a href="#reference-instructions①"></a></h4>
        <p>Instructions in this group are concerned with accessing <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>references</span></a>.</p>
        
        <p>These instructions produce a null value, check for a null value, or produce a reference to a given function, respectively.</p>
       </section>
       <section id="parametric-instructions">
         <span id="syntax-instr-parametric"></span><span id="index-4②"></span>
        <h4 data-level="2.4.4" id="parametric-instructions①"><span>2.4.4. </span><span>Parametric Instructions</span><a href="#parametric-instructions①"></a></h4>
        <p>Instructions in this group can operate on operands of any <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a>.</p>
        
        <p>The <span><span><span></span></span></span> instruction simply throws away a single operand.</p>
        <p>The <span><span><span></span></span></span> instruction selects one of its first two operands based on whether its third operand is zero or not.
It may include a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> determining the type of these operands. If missing, the operands must be of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>numeric type</span></a>.</p>
        <div role="note">
         <p>Note</p>
         <p>In future versions of WebAssembly, the type annotation on <span><span><span></span></span></span> may allow for more than a single value being selected at the same time.</p>
        </div>
       </section>
       <section id="variable-instructions">
         <span id="syntax-instr-variable"></span><span id="index-5②"></span>
        <h4 data-level="2.4.5" id="variable-instructions①"><span>2.4.5. </span><span>Variable Instructions</span><a href="#variable-instructions①"></a></h4>
        <p>Variable instructions are concerned with access to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-local"><span>local</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a> variables.</p>
        
        <p>These instructions get or set the values of variables, respectively.
The <span><span><span></span></span></span> instruction is like <span><span><span></span></span></span> but also returns its argument.</p>
       </section>
       <section id="table-instructions">
         <span id="syntax-table-fill"></span><span id="syntax-table-grow"></span><span id="syntax-table-size"></span><span id="syntax-table-set"></span><span id="syntax-table-get"></span><span id="syntax-instr-table"></span><span id="index-6①"></span>
        <h4 data-level="2.4.6" id="table-instructions①"><span>2.4.6. </span><span>Table Instructions</span><a href="#table-instructions①"></a></h4>
        <p>Instructions in this group are concerned with tables <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>table</span></a>.</p>
        
        <p>The <span><span><span></span></span></span> and <span><span><span></span></span></span> instructions load or store an element in a table, respectively.</p>
        <p>The <span><span><span></span></span></span> instruction returns the current size of a table.
The <span><span><span></span></span></span> instruction grows table by a given delta and returns the previous size, or <span><span><span></span></span></span> if enough space cannot be allocated.
It also takes an initialization value for the newly allocated entries.</p>
        <p>The <span><span><span></span></span></span> instruction sets all entries in a range to a given value.</p>
        <p>The <span><span><span></span></span></span> instruction copies elements from a source table region to a possibly overlapping destination region; the first index denotes the destination.
The <span><span><span></span></span></span> instruction copies elements from a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>passive element segment</span></a> into a table.
The <span><span><span></span></span></span> instruction prevents further use of a passive element segment. This instruction is intended to be used as an optimization hint. After an element segment is dropped its elements can no longer be retrieved, so the memory used by this segment may be freed.</p>
        <p>An additional instruction that accesses a table is the <a href="#syntax-instr-control"><span>control instruction</span></a> <span><span><span></span></span></span>.</p>
       </section>
       <section id="memory-instructions">
         <span id="syntax-instr-memory"></span><span id="syntax-lanewidth"></span><span id="syntax-memarg"></span><span id="syntax-storen"></span><span id="syntax-loadn"></span><span id="index-7①"></span>
        <h4 data-level="2.4.7" id="memory-instructions①"><span>2.4.7. </span><span>Memory Instructions</span><a href="#memory-instructions①"></a></h4>
        <p>Instructions in this group are concerned with linear <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memory</span></a>.</p>
        
        <p>Memory is accessed with <span><span><span></span></span></span> and <span><span><span></span></span></span> instructions for the different <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number types</span></a>.
They all take a <em>memory immediate</em> <span><span><span></span></span></span> that contains an address <em>offset</em> and the expected <em>alignment</em> (expressed as the exponent of a power of 2).
Integer loads and stores can optionally specify a <em>storage size</em> that is smaller than the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>bit width</span></a> of the respective value type.
In the case of loads, a sign extension mode <span><span><span></span></span></span> is then required to select appropriate behavior.</p>
        <p>Vector loads can specify a shape that is half the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>bit width</span></a> of <span><span><span></span></span></span>. Each lane is half its usual size, and the sign extension mode <span><span><span></span></span></span> then specifies how the smaller lane is extended to the larger lane.
Alternatively, vector loads can perform a <em>splat</em>, such that only a single lane of the specified storage size is loaded, and the result is duplicated to all lanes.</p>
        <p>The static address offset is added to the dynamic address operand, yielding a 33 bit <em>effective address</em> that is the zero-based index at which the memory is accessed.
All values are read and written in <a href="https://en.wikipedia.org/wiki/Endianness#Little-endian">little endian</a> byte order.
A <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a> results if any of the accessed memory bytes lies outside the address range implied by the memory’s current size.</p>
        <div role="note">
         <p>Note</p>
         <p>Future versions of WebAssembly might provide memory instructions with 64 bit address ranges.</p>
        </div>
        <p>The <span><span><span></span></span></span> instruction returns the current size of a memory.
The <span><span><span></span></span></span> instruction grows memory by a given delta and returns the previous size, or <span><span><span></span></span></span> if enough memory cannot be allocated.
Both instructions operate in units of <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a>.</p>
        <p>The <span><span><span></span></span></span> instruction sets all values in a region to a given byte.
The <span><span><span></span></span></span> instruction copies data from a source memory region to a possibly overlapping destination region.
The <span><span><span></span></span></span> instruction copies data from a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>passive data segment</span></a> into a memory.
The <span><span><span></span></span></span> instruction prevents further use of a passive data segment. This instruction is intended to be used as an optimization hint. After a data segment is dropped its data can no longer be retrieved, so the memory used by this segment may be freed.</p>
        <div role="note">
         <p>Note</p>
         <p>In the current version of WebAssembly,
all memory instructions implicitly operate on <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memory</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memidx"><span>index</span></a> <span><span><span></span></span></span>.
This restriction may be lifted in future versions.</p>
        </div>
       </section>
       <section id="control-instructions">
         <span id="syntax-instr-control"></span><span id="syntax-instr-seq"></span><span id="syntax-call-indirect"></span><span id="syntax-call"></span><span id="syntax-return"></span><span id="syntax-br-table"></span><span id="syntax-br-if"></span><span id="syntax-br"></span><span id="syntax-if"></span><span id="syntax-loop"></span><span id="syntax-block"></span><span id="syntax-unreachable"></span><span id="syntax-nop"></span><span id="syntax-blocktype"></span><span id="index-8①"></span>
        <h4 data-level="2.4.8" id="control-instructions①"><span>2.4.8. </span><span>Control Instructions</span><a href="#control-instructions①"></a></h4>
        <p>Instructions in this group affect the flow of control.</p>
        
        <p>The <span><span><span></span></span></span> instruction does nothing.</p>
        <p>The <span><span><span></span></span></span> instruction causes an unconditional <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a>.</p>
        <p>The <span><span><span></span></span></span>, <span><span><span></span></span></span> and <span><span><span></span></span></span> instructions are <em>structured</em> instructions.
They bracket nested sequences of instructions, called <em>blocks</em>, terminated with, or separated by, <span><span><span></span></span></span> or <span><span><span></span></span></span> pseudo-instructions.
As the grammar prescribes, they must be well-nested.</p>
        <p>A structured instruction can consume <em>input</em> and produce <em>output</em> on the operand stack according to its annotated <em>block type</em>.
It is given either as a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcidx"><span>type index</span></a> that refers to a suitable <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a>, or as an optional <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> inline, which is a shorthand for the function type <span><span><span></span></span></span>.</p>
        <p>Each structured control instruction introduces an implicit <em>label</em>.
Labels are targets for branch instructions that reference them with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-labelidx"><span>label indices</span></a>.
Unlike with other <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index spaces</span></a>, indexing of labels is relative by nesting depth,
that is, label <span><span><span></span></span></span> refers to the innermost structured control instruction enclosing the referring branch instruction,
while increasing indices refer to those farther out.
Consequently, labels can only be referenced from <em>within</em> the associated structured control instruction.
This also implies that branches can only be directed outwards,
“breaking” from the block of the control construct they target.
The exact effect depends on that control construct.
In case of <span><span><span></span></span></span> or <span><span><span></span></span></span> it is a <em>forward jump</em>,
resuming execution after the matching <span><span><span></span></span></span>.
In case of <span><span><span></span></span></span> it is a <em>backward jump</em> to the beginning of the loop.</p>
        <div role="note">
         <p>Note</p>
         <p>This enforces <em>structured control flow</em>.
Intuitively, a branch targeting a <span><span><span></span></span></span> or <span><span><span></span></span></span> behaves like a <span><span><span></span></span></span> statement in most C-like languages,
while a branch targeting a <span><span><span></span></span></span> behaves like a <span><span><span></span></span></span> statement.</p>
        </div>
        <p>Branch instructions come in several flavors: <span><span><span></span></span></span> performs an unconditional branch, <span><span><span></span></span></span> performs a conditional branch,
and <span><span><span></span></span></span> performs an indirect branch through an operand indexing into the label vector that is an immediate to the instruction, or to a default target if the operand is out of bounds.
The <span><span><span></span></span></span> instruction is a shortcut for an unconditional branch to the outermost block, which implicitly is the body of the current function.
Taking a branch <em>unwinds</em> the operand stack up to the height where the targeted structured control instruction was entered.
However, branches may additionally consume operands themselves, which they push back on the operand stack after unwinding.
Forward branches require operands according to the output of the targeted block’s type, i.e., represent the values produced by the terminated block.
Backward branches require operands according to the input of the targeted block’s type, i.e., represent the values consumed by the restarted block.</p>
        <p>The <span><span><span></span></span></span> instruction invokes another <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a>, consuming the necessary arguments from the stack and returning the result values of the call.
The <span><span><span></span></span></span> instruction calls a function indirectly through an operand indexing into a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>table</span></a> that is denoted by a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableidx"><span>table index</span></a> and must have type <span><span><span></span></span></span>.
Since it may contain functions of heterogeneous type,
the callee is dynamically checked against the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> indexed by the instruction’s second immediate, and the call is aborted with a <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a> if it does not match.</p>
       </section>
       <section id="expressions">
         <span id="syntax-expr"></span><span id="index-9①"></span>
        <h4 data-level="2.4.9" id="expressions①"><span>2.4.9. </span><span>Expressions</span><a href="#expressions①"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>Function</span></a> bodies, initialization values for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>globals</span></a>, elements and offsets of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element</span></a> segments, and offsets of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data</span></a> segments are given as expressions, which are sequences of <a href="#syntax-instr"><span>instructions</span></a> terminated by an <span><span><span></span></span></span> marker.</p>
        
        <p>In some places, validation <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>restricts</span></a> expressions to be <em>constant</em>, which limits the set of allowable instructions.</p>
       </section>
      </section>
       <section id="modules">
        <span id="syntax-module"></span><span id="index-0⑥"></span>
       <h3 data-level="2.5" id="modules①"><span>2.5. </span><span>Modules</span><a href="#modules①"></a></h3>
       <p>WebAssembly programs are organized into <em>modules</em>,
which are the unit of deployment, loading, and compilation.
A module collects definitions for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-type"><span>types</span></a>, <a href="#syntax-func"><span>functions</span></a>, <a href="#syntax-table"><span>tables</span></a>, <a href="#syntax-mem"><span>memories</span></a>, and <a href="#syntax-global"><span>globals</span></a>.
In addition, it can declare <a href="#syntax-import"><span>imports</span></a> and <a href="#syntax-export"><span>exports</span></a> and provide initialization in the form of <a href="#syntax-data"><span>data</span></a> and <a href="#syntax-elem"><span>element</span></a> segments, or a <a href="#syntax-start"><span>start function</span></a>.</p>
       
       <p>Each of the vectors – and thus the entire module – may be empty.</p>
       <section id="indices">
         <span id="syntax-index"></span><span id="syntax-labelidx"></span><span id="syntax-localidx"></span><span id="syntax-dataidx"></span><span id="syntax-elemidx"></span><span id="syntax-globalidx"></span><span id="syntax-memidx"></span><span id="syntax-tableidx"></span><span id="syntax-funcidx"></span><span id="syntax-typeidx"></span><span id="index-1⑥"></span>
        <h4 data-level="2.5.1" id="indices①"><span>2.5.1. </span><span>Indices</span><a href="#indices①"></a></h4>
        <p>Definitions are referenced with zero-based <em>indices</em>.
Each class of definition has its own <em>index space</em>, as distinguished by the following classes.</p>
        
        <p>The index space for <a href="#syntax-func"><span>functions</span></a>, <a href="#syntax-table"><span>tables</span></a>, <a href="#syntax-mem"><span>memories</span></a> and <a href="#syntax-global"><span>globals</span></a> includes respective <a href="#syntax-import"><span>imports</span></a> declared in the same module.
The indices of these imports precede the indices of other definitions in the same index space.</p>
        <p>Element indices reference <a href="#syntax-elem"><span>element segments</span></a> and data indices reference <a href="#syntax-data"><span>data segments</span></a>.</p>
        <p>The index space for <a href="#syntax-local"><span>locals</span></a> is only accessible inside a <a href="#syntax-func"><span>function</span></a> and includes the parameters of that function, which precede the local variables.</p>
        <p>Label indices reference <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured control instructions</span></a> inside an instruction sequence.</p>
        <section id="conventions①④">
          <span id="free-index"></span><span id="free-labelidx"></span><span id="free-localidx"></span><span id="free-dataidx"></span><span id="free-elemidx"></span><span id="free-globalidx"></span><span id="free-memidx"></span><span id="free-tableidx"></span><span id="free-funcidx"></span><span id="free-typeidx"></span>
         <h5 data-level="2.5.1.1" id="conventions①⑤"><span>2.5.1.1. </span><span>Conventions</span><a href="#conventions①⑤"></a></h5>
         <ul>
          <li>
           <p>The meta variable <span><span><span></span></span></span> ranges over label indices.</p>
          </li><li>
           <p>The meta variables <span><span><span></span></span></span> range over indices in any of the other index spaces.</p>
          </li><li>
           <p>The notation <span><span><span></span></span></span> denotes the set of indices from index space <span><span><span></span></span></span> occurring free in <span><span><span></span></span></span>. Sometimes this set is reinterpreted as the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec"><span>vector</span></a> of its elements.</p>
         </li></ul>
         <div role="note">
          <p>Note</p>
          <p>For example, if <span><span><span></span></span></span> is <span><span><span></span></span></span>, then <span><span><span></span></span></span>, or equivalently, the vector <span><span><span></span></span></span>.</p>
         </div>
        </section>
       </section>
       <section id="types②">
         <span id="syntax-typedef"></span><span id="index-2⑤"></span>
        <h4 data-level="2.5.2" id="types③"><span>2.5.2. </span><span>Types</span><a href="#types③"></a></h4>
        <p>The <span><span><span></span></span></span> component of a module defines a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function types</span></a>.</p>
        <p>All function types used in a module must be defined in this component.
They are referenced by <a href="#syntax-typeidx"><span>type indices</span></a>.</p>
        <div role="note">
         <p>Note</p>
         <p>Future versions of WebAssembly may add additional forms of type definitions.</p>
        </div>
       </section>
       <section id="functions">
         <span id="syntax-func"></span><span id="syntax-local"></span><span id="index-3③"></span>
        <h4 data-level="2.5.3" id="functions①"><span>2.5.3. </span><span>Functions</span><a href="#functions①"></a></h4>
        <p>The <span><span><span></span></span></span> component of a module defines a vector of <em>functions</em> with the following structure:</p>
        
        <p>The <span><span><span></span></span></span> of a function declares its signature by reference to a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-type"><span>type</span></a> defined in the module.
The parameters of the function are referenced through 0-based <a href="#syntax-localidx"><span>local indices</span></a> in the function’s body; they are mutable.</p>
        <p>The <span><span><span></span></span></span> declare a vector of mutable local variables and their types.
These variables are referenced through <a href="#syntax-localidx"><span>local indices</span></a> in the function’s body.
The index of the first local is the smallest index not referencing a parameter.</p>
        <p>The <span><span><span></span></span></span> is an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>instruction</span></a> sequence that upon termination must produce a stack matching the function type’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a>.</p>
        <p>Functions are referenced through <a href="#syntax-funcidx"><span>function indices</span></a>,
starting with the smallest index not referencing a function <a href="#syntax-import"><span>import</span></a>.</p>
       </section>
       <section id="tables">
         <span id="syntax-table"></span><span id="index-4③"></span>
        <h4 data-level="2.5.4" id="tables①"><span>2.5.4. </span><span>Tables</span><a href="#tables①"></a></h4>
        <p>The <span><span><span></span></span></span> component of a module defines a vector of <em>tables</em> described by their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a>:</p>
        
        <p>A table is a vector of opaque values of a particular <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a>.
The <span><span><span></span></span></span> size in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-limits"><span>limits</span></a> of the table type specifies the initial size of that table, while its <span><span><span></span></span></span>, if present, restricts the size to which it can grow later.</p>
        <p>Tables can be initialized through <a href="#syntax-elem"><span>element segments</span></a>.</p>
        <p>Tables are referenced through <a href="#syntax-tableidx"><span>table indices</span></a>,
starting with the smallest index not referencing a table <a href="#syntax-import"><span>import</span></a>.
Most constructs implicitly reference table index <span><span><span></span></span></span>.</p>
       </section>
       <section id="memories">
         <span id="syntax-mem"></span><span id="index-5③"></span>
        <h4 data-level="2.5.5" id="memories①"><span>2.5.5. </span><span>Memories</span><a href="#memories①"></a></h4>
        <p>The <span><span><span></span></span></span> component of a module defines a vector of <em>linear memories</em> (or <em>memories</em> for short) as described by their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a>:</p>
        
        <p>A memory is a vector of raw uninterpreted bytes.
The <span><span><span></span></span></span> size in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-limits"><span>limits</span></a> of the memory type specifies the initial size of that memory, while its <span><span><span></span></span></span>, if present, restricts the size to which it can grow later.
Both are in units of <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a>.</p>
        <p>Memories can be initialized through <a href="#syntax-data"><span>data segments</span></a>.</p>
        <p>Memories are referenced through <a href="#syntax-memidx"><span>memory indices</span></a>,
starting with the smallest index not referencing a memory <a href="#syntax-import"><span>import</span></a>.
Most constructs implicitly reference memory index <span><span><span></span></span></span>.</p>
        <div role="note">
         <p>Note</p>
         <p>In the current version of WebAssembly, at most one memory may be defined or imported in a single module,
and <em>all</em> constructs implicitly reference this memory <span><span><span></span></span></span>.
This restriction may be lifted in future versions.</p>
        </div>
       </section>
       <section id="globals">
         <span id="syntax-global"></span><span id="index-6②"></span>
        <h4 data-level="2.5.6" id="globals①"><span>2.5.6. </span><span>Globals</span><a href="#globals①"></a></h4>
        <p>The <span><span><span></span></span></span> component of a module defines a vector of <em>global variables</em> (or <em>globals</em> for short):</p>
        
        <p>Each global stores a single value of the given <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a>.
Its <span><span><span></span></span></span> also specifies whether a global is immutable or mutable.
Moreover, each global is initialized with an <span><span><span></span></span></span> value given by a <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a> initializer <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expression</span></a>.</p>
        <p>Globals are referenced through <a href="#syntax-globalidx"><span>global indices</span></a>,
starting with the smallest index not referencing a global <a href="#syntax-import"><span>import</span></a>.</p>
       </section>
       <section id="element-segments">
         <span id="syntax-elemmode"></span><span id="syntax-elem"></span><span id="index-7②"></span>
        <h4 data-level="2.5.7" id="element-segments①"><span>2.5.7. </span><span>Element Segments</span><a href="#element-segments①"></a></h4>
        <p>The initial contents of a table is uninitialized. <em>Element segments</em> can be used to initialize a subrange of a table from a static <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec"><span>vector</span></a> of elements.</p>
        <p>The <span><span><span></span></span></span> component of a module defines a vector of element segments.
Each element segment defines a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> and a corresponding list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a> element <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expressions</span></a>.</p>
        <p>Element segments have a mode that identifies them as either <em>passive</em>, <em>active</em>, or <em>declarative</em>.
A passive element segment’s elements can be copied to a table using the <span><span><span></span></span></span> instruction.
An active element segment copies its elements into a table during <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiation</span></a>, as specified by a <a href="#syntax-tableidx"><span>table index</span></a> and a <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expression</span></a> defining an offset into that table.
A declarative element segment is not available at runtime but merely serves to forward-declare references that are formed in code with instructions like <span><span><span></span></span></span>.</p>
        
        <p>The <span><span><span></span></span></span> is given by a <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expression</span></a>.</p>
        <p>Element segments are referenced through <a href="#syntax-elemidx"><span>element indices</span></a>.</p>
       </section>
       <section id="data-segments">
         <span id="syntax-datamode"></span><span id="syntax-data"></span><span id="index-8②"></span>
        <h4 data-level="2.5.8" id="data-segments①"><span>2.5.8. </span><span>Data Segments</span><a href="#data-segments①"></a></h4>
        <p>The initial contents of a <a href="#syntax-mem"><span>memory</span></a> are zero bytes. <em>Data segments</em> can be used to initialize a range of memory from a static <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec"><span>vector</span></a> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a>.</p>
        <p>The <span><span><span></span></span></span> component of a module defines a vector of data segments.</p>
        <p>Like element segments, data segments have a mode that identifies them as either <em>passive</em> or <em>active</em>.
A passive data segment’s contents can be copied into a memory using the <span><span><span></span></span></span> instruction.
An active data segment copies its contents into a memory during <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiation</span></a>, as specified by a <a href="#syntax-memidx"><span>memory index</span></a> and a <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expression</span></a> defining an offset into that memory.</p>
        
        <p>Data segments are referenced through <a href="#syntax-dataidx"><span>data indices</span></a>.</p>
        <div role="note">
         <p>Note</p>
         <p>In the current version of WebAssembly, at most one memory is allowed in a module.
Consequently, the only valid <span><span><span></span></span></span> is <span><span><span></span></span></span>.</p>
        </div>
       </section>
       <section id="start-function">
         <span id="syntax-start"></span><span id="index-9②"></span>
        <h4 data-level="2.5.9" id="start-function①"><span>2.5.9. </span><span>Start Function</span><a href="#start-function①"></a></h4>
        <p>The <span><span><span></span></span></span> component of a module declares the <a href="#syntax-funcidx"><span>function index</span></a> of a <em>start function</em> that is automatically invoked when the module is <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiated</span></a>, after <a href="#syntax-table"><span>tables</span></a> and <a href="#syntax-mem"><span>memories</span></a> have been initialized.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The start function is intended for initializing the state of a module.
The module and its exports are not accessible externally before this initialization has completed.</p>
        </div>
       </section>
       <section id="exports">
         <span id="syntax-export"></span><span id="syntax-exportdesc"></span><span id="index-10①"></span>
        <h4 data-level="2.5.10" id="exports①"><span>2.5.10. </span><span>Exports</span><a href="#exports①"></a></h4>
        <p>The <span><span><span></span></span></span> component of a module defines a set of <em>exports</em> that become accessible to the host environment once the module has been <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiated</span></a>.</p>
        
        <p>Each export is labeled by a unique <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>name</span></a>.
Exportable definitions are <a href="#syntax-func"><span>functions</span></a>, <a href="#syntax-table"><span>tables</span></a>, <a href="#syntax-mem"><span>memories</span></a>, and <a href="#syntax-global"><span>globals</span></a>,
which are referenced through a respective descriptor.</p>
        <section id="id1⑤">
         <h5 data-level="2.5.10.1" id="conventions①⑥"><span>2.5.10.1. </span><span>Conventions</span><a href="#conventions①⑥"></a></h5>
         <p>The following auxiliary notation is defined for sequences of exports, filtering out indices of a specific kind in an order-preserving fashion:</p>
         <ul>
          <li>
           
          </li><li>
           
          </li><li>
           
          </li><li>
           
         </li></ul>
        </section>
       </section>
       <section id="imports">
         <span id="syntax-import"></span><span id="syntax-importdesc"></span><span id="index-11①"></span>
        <h4 data-level="2.5.11" id="imports①"><span>2.5.11. </span><span>Imports</span><a href="#imports①"></a></h4>
        <p>The <span><span><span></span></span></span> component of a module defines a set of <em>imports</em> that are required for <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiation</span></a>.</p>
        
        <p>Each import is labeled by a two-level <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>name</span></a> space, consisting of a <span><span><span></span></span></span> name and a <span><span><span></span></span></span> for an entity within that module.
Importable definitions are <a href="#syntax-func"><span>functions</span></a>, <a href="#syntax-table"><span>tables</span></a>, <a href="#syntax-mem"><span>memories</span></a>, and <a href="#syntax-global"><span>globals</span></a>.
Each import is specified by a descriptor with a respective type that a definition provided during instantiation is required to match.</p>
        <p>Every import defines an index in the respective <a href="#syntax-index"><span>index space</span></a>.
In each index space, the indices of imports go before the first index of any definition contained in the module itself.</p>
        <div role="note">
         <p>Note</p>
         <p>Unlike export names, import names are not necessarily unique.
It is possible to import the same <span><span><span></span></span></span>/<span><span><span></span></span></span> pair multiple times;
such imports may even have different type descriptions, including different kinds of entities.
A module with such imports can still be instantiated depending on the specifics of how an <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> allows resolving and supplying imports.
However, embedders are not required to support such overloading,
and a WebAssembly module itself cannot implement an overloaded name.</p>
        </div>
       </section>
      </section>
     </div>
    </section>
     <section id="validation①">
      <span id="valid"></span>
     <h2 data-level="3" id="validation②"><span>3. </span><span>Validation</span><a href="#validation②"></a></h2>
     <div>
       <section id="conventions①⑦">
        <span id="type-system"></span><span id="index-0⑦"></span>
       <h3 data-level="3.1" id="conventions①⑧"><span>3.1. </span><span>Conventions</span><a href="#conventions①⑧"></a></h3>
       <p>Validation checks that a WebAssembly module is well-formed.
Only valid modules can be <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiated</span></a>.</p>
       <p>Validity is defined by a <em>type system</em> over the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax"><span>abstract syntax</span></a> of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> and its contents.
For each piece of abstract syntax, there is a typing rule that specifies the constraints that apply to it.
All rules are given in two <em>equivalent</em> forms:</p>
       <ol>
        <li>
         <p>In <em>prose</em>, describing the meaning in intuitive form.</p>
        </li><li>
         <p>In <em>formal notation</em>, describing the rule in mathematical form. <a href="#cite-pldi2017" id="id1⑥" role="doc-noteref"><span>[</span>1<span>]</span></a></p>
       </li></ol>
       <div role="note">
        <p>Note</p>
        <p>The prose and formal rules are equivalent,
so that understanding of the formal notation is <em>not</em> required to read this specification.
The formalism offers a more concise description in notation that is used widely in programming languages semantics and is readily amenable to mathematical proof.</p>
       </div>
       <p>In both cases, the rules are formulated in a <em>declarative</em> manner.
That is, they only formulate the constraints, they do not define an algorithm.
The skeleton of a sound and complete algorithm for type-checking instruction sequences according to this specification is provided in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#algo-valid"><span>appendix</span></a>.</p>
       <section id="contexts">
         <span id="context"></span><span id="index-1⑦"></span>
        <h4 data-level="3.1.1" id="contexts①"><span>3.1.1. </span><span>Contexts</span><a href="#contexts①"></a></h4>
        <p>Validity of an individual definition is specified relative to a <em>context</em>,
which collects relevant information about the surrounding <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> and the definitions in scope:</p>
        <ul>
         <li>
          <p><em>Types</em>: the list of types defined in the current module.</p>
         </li><li>
          <p><em>Functions</em>: the list of functions declared in the current module, represented by their function type.</p>
         </li><li>
          <p><em>Tables</em>: the list of tables declared in the current module, represented by their table type.</p>
         </li><li>
          <p><em>Memories</em>: the list of memories declared in the current module, represented by their memory type.</p>
         </li><li>
          <p><em>Globals</em>: the list of globals declared in the current module, represented by their global type.</p>
         </li><li>
          <p><em>Element Segments</em>: the list of element segments declared in the current module, represented by their element type.</p>
         </li><li>
          <p><em>Data Segments</em>: the list of data segments declared in the current module, each represented by an <span><span><span></span></span></span> entry.</p>
         </li><li>
          <p><em>Locals</em>: the list of locals declared in the current function (including parameters), represented by their value type.</p>
         </li><li>
          <p><em>Labels</em>: the stack of labels accessible from the current position, represented by their result type.</p>
         </li><li>
          <p><em>Return</em>: the return type of the current function, represented as an optional result type that is absent when no return is allowed, as in free-standing expressions.</p>
         </li><li>
          <p><em>References</em>: the list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcidx"><span>function indices</span></a> that occur in the module outside functions and can hence be used to form references inside them.</p>
        </li></ul>
        <p>In other words, a context contains a sequence of suitable <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-type"><span>types</span></a> for each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index space</span></a>,
describing each defined entry in that space.
Locals, labels and return type are only used for validating <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a> in <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function bodies</span></a>, and are left empty elsewhere.
The label stack is the only part of the context that changes as validation of an instruction sequence proceeds.</p>
        <p>More concretely, contexts are defined as <a href="https://www.w3.org/TR/wasm-core-2/index.html#notation-record"><span>records</span></a> <span><span><span></span></span></span> with abstract syntax:</p>
        
        <p id="notation-extend">In addition to field access written <span><span><span></span></span></span> the following notation is adopted for manipulating contexts:</p>
        <ul>
         <li>
          <p>When spelling out a context, empty fields are omitted.</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the same context as <span><span><span></span></span></span> but with the elements <span><span><span></span></span></span> prepended to its <span><span><span></span></span></span> component sequence.</p>
        </li></ul>
        <div role="note">
         <p>Note</p>
         <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#notation-index"><span>Indexing notation</span></a> like <span><span><span></span></span></span> is used to look up indices in their respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index space</span></a> in the context.
Context extension notation <span><span><span></span></span></span> is primarily used to locally extend <em>relative</em> index spaces, such as <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-labelidx"><span>label indices</span></a>.
Accordingly, the notation is defined to append at the <em>front</em> of the respective sequence, introducing a new relative index <span><span><span></span></span></span> and shifting the existing ones.</p>
        </div>
       </section>
       <section id="prose-notation">
         <span id="valid-notation-textual"></span>
        <h4 data-level="3.1.2" id="prose-notation①"><span>3.1.2. </span><span>Prose Notation</span><a href="#prose-notation①"></a></h4>
        <p>Validation is specified by stylised rules for each relevant part of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax"><span>abstract syntax</span></a>.
The rules not only state constraints defining when a phrase is valid,
they also classify it with a type.
The following conventions are adopted in stating these rules.</p>
        <ul>
         <li>
          <p>A phrase <span><span><span></span></span></span> is said to be “valid with type <span><span><span></span></span></span>”
if and only if all constraints expressed by the respective rules are met.
The form of <span><span><span></span></span></span> depends on what <span><span><span></span></span></span> is.</p>
          
         </li><li>
          <p>The rules implicitly assume a given <a href="#context"><span>context</span></a> <span><span><span></span></span></span>.</p>
         </li><li>
          <p>In some places, this context is locally extended to a context <span><span><span></span></span></span> with additional entries.
The formulation “Under context <span><span><span></span></span></span>, … <em>statement</em> …” is adopted to express that the following statement must apply under the assumptions embodied in the extended context.</p>
        </li></ul>
       </section>
       <section id="formal-notation">
         <span id="valid-notation"></span><span id="index-2⑥"></span>
        <h4 data-level="3.1.3" id="formal-notation①"><span>3.1.3. </span><span>Formal Notation</span><a href="#formal-notation①"></a></h4>
        <div role="note">
         <p>Note</p>
         <p>This section gives a brief explanation of the notation for specifying typing rules formally.
For the interested reader, a more thorough introduction can be found in respective text books. <a href="#cite-tapl" id="id2④" role="doc-noteref"><span>[</span>2<span>]</span></a></p>
        </div>
        <p>The proposition that a phrase <span><span><span></span></span></span> has a respective type <span><span><span></span></span></span> is written <span><span><span></span></span></span>.
In general, however, typing is dependent on a context <span><span><span></span></span></span>.
To express this explicitly, the complete form is a <em>judgement</em> <span><span><span></span></span></span>,
which says that <span><span><span></span></span></span> holds under the assumptions encoded in <span><span><span></span></span></span>.</p>
        <p>The formal typing rules use a standard approach for specifying type systems, rendering them into <em>deduction rules</em>.
Every rule has the following general form:</p>
        
        <p>Such a rule is read as a big implication: if all premises hold, then the conclusion holds.
Some rules have no premises; they are <em>axioms</em> whose conclusion holds unconditionally.
The conclusion always is a judgment <span><span><span></span></span></span>,
and there is one respective rule for each relevant construct <span><span><span></span></span></span> of the abstract syntax.</p>
        <div role="note">
         <p>Note</p>
         <p>For example, the typing rule for the <span><span><span></span></span></span> instruction can be given as an axiom:</p>
         
         <p>The instruction is always valid with type <span><span><span></span></span></span> (saying that it consumes two <span><span><span></span></span></span> values and produces one),
independent of any side conditions.</p>
         <p>An instruction like <span><span><span></span></span></span> can be typed as follows:</p>
         
         <p>Here, the premise enforces that the immediate <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-localidx"><span>local index</span></a> <span><span><span></span></span></span> exists in the context.
The instruction produces a value of its respective type <span><span><span></span></span></span> (and does not consume any values).
If <span><span><span></span></span></span> does not exist then the premise does not hold,
and the instruction is ill-typed.</p>
         <p>Finally, a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured</span></a> instruction requires
a recursive rule, where the premise is itself a typing judgement:</p>
         
         <p>A <span><span><span></span></span></span> instruction is only valid when the instruction sequence in its body is.
Moreover, the result type must match the block’s annotation <span><span><span></span></span></span>.
If so, then the <span><span><span></span></span></span> instruction has the same type as the body.
Inside the body an additional label of the corresponding result type is available,
which is expressed by extending the context <span><span><span></span></span></span> with the additional label information for the premise.</p>
        </div>
        
       </section>
      </section>
       <section id="types④">
       <h3 data-level="3.2" id="types⑤"><span>3.2. </span><span>Types</span><a href="#types⑤"></a></h3>
       <p>Most <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-type"><span>types</span></a> are universally valid.
However, restrictions apply to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-limits"><span>limits</span></a>, which must be checked during validation.
Moreover, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block types</span></a> are converted to plain <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function types</span></a> for ease of processing.</p>
       <section id="limits②">
         <span id="valid-limits"></span><span id="index-0⑧"></span>
        <h4 data-level="3.2.1" id="limits③"><span>3.2.1. </span><span>Limits</span><a href="#limits③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-limits"><span>Limits</span></a> must have meaningful bounds that are within a given range.</p>
        <section id="xref-syntax-types-syntax-limits-mathsf-min-n-xref-syntax-types-syntax-limits-mathsf-max-m">
         <h5 data-level="3.2.1.1" id="--hrefsyntax-limitsmathsfminn-hrefsyntax-limitsmathsfmaxm"><span>3.2.1.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-limitsmathsfminn-hrefsyntax-limitsmathsfmaxm"></a></h5>
         <ul>
          <li>
           <p>The value of <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If the maximum <span><span><span></span></span></span> is not empty, then:</p>
           <ul>
            <li>
             <p>Its value must not be larger than <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Its value must not be smaller than <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>Then the limit is valid within range <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="block-types">
         <span id="valid-blocktype"></span><span id="index-1⑧"></span>
        <h4 data-level="3.2.2" id="block-types①"><span>3.2.2. </span><span>Block Types</span><a href="#block-types①"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>Block types</span></a> may be expressed in one of two forms, both of which are converted to plain <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function types</span></a> by the following rules.</p>
        <section id="xref-syntax-modules-syntax-typeidx-mathit-typeidx">
         <h5 data-level="3.2.2.1" id="-hrefsyntax-typeidxmathittypeidx"><span>3.2.2.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-typeidxmathittypeidx"></a></h5>
         <ul>
          <li>
           <p>The type <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the block type is valid as <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathit-valtype">
         <h5 data-level="3.2.2.2" id="-hrefsyntax-valtypemathitvaltype"><span>3.2.2.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathitvaltype"></a></h5>
         <ul>
          <li>
           <p>The block type is valid as <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="function-types②">
         <span id="valid-functype"></span><span id="index-2⑦"></span>
        <h4 data-level="3.2.3" id="function-types③"><span>3.2.3. </span><span>Function Types</span><a href="#function-types③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>Function types</span></a> are always valid.</p>
        <section id="t-1-n-xref-syntax-types-syntax-functype-rightarrow-t-2-m">
         <h5 data-level="3.2.3.1" id="-t_1n-hrefsyntax-functyperightarrow-t_2m"><span>3.2.3.1. </span><span><span><span><span></span></span></span></span><a href="#-t_1n-hrefsyntax-functyperightarrow-t_2m"></a></h5>
         <ul>
          <li>
           <p>The function type is valid.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="table-types②">
         <span id="valid-tabletype"></span><span id="index-3④"></span>
        <h4 data-level="3.2.4" id="table-types③"><span>3.2.4. </span><span>Table Types</span><a href="#table-types③"></a></h4>
        <section id="xref-syntax-types-syntax-limits-mathit-limits-xref-syntax-types-syntax-reftype-mathit-reftype">
         <h5 data-level="3.2.4.1" id="-hrefsyntax-limitsmathitlimitshrefsyntax-reftypemathitreftype"><span>3.2.4.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-limitsmathitlimitshrefsyntax-reftypemathitreftype"></a></h5>
         <ul>
          <li>
           <p>The limits <span><span><span></span></span></span> must be <a href="#valid-limits"><span>valid</span></a> within range <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the table type is valid.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="memory-types②">
         <span id="valid-memtype"></span><span id="index-4④"></span>
        <h4 data-level="3.2.5" id="memory-types③"><span>3.2.5. </span><span>Memory Types</span><a href="#memory-types③"></a></h4>
        <section id="xref-syntax-types-syntax-limits-mathit-limits">
         <h5 data-level="3.2.5.1" id="-hrefsyntax-limitsmathitlimits"><span>3.2.5.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-limitsmathitlimits"></a></h5>
         <ul>
          <li>
           <p>The limits <span><span><span></span></span></span> must be <a href="#valid-limits"><span>valid</span></a> within range <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the memory type is valid.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="global-types②">
         <span id="valid-globaltype"></span><span id="index-5④"></span>
        <h4 data-level="3.2.6" id="global-types③"><span>3.2.6. </span><span>Global Types</span><a href="#global-types③"></a></h4>
        <section id="xref-syntax-types-syntax-mut-mathit-mut-xref-syntax-types-syntax-valtype-mathit-valtype">
         <h5 data-level="3.2.6.1" id="-hrefsyntax-mutmathitmuthrefsyntax-valtypemathitvaltype"><span>3.2.6.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-mutmathitmuthrefsyntax-valtypemathitvaltype"></a></h5>
         <ul>
          <li>
           <p>The global type is valid.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="external-types②">
         <span id="valid-externtype"></span><span id="index-6③"></span>
        <h4 data-level="3.2.7" id="external-types③"><span>3.2.7. </span><span>External Types</span><a href="#external-types③"></a></h4>
        <section id="xref-syntax-types-syntax-externtype-mathsf-func-xref-syntax-types-syntax-functype-mathit-functype">
         <h5 data-level="3.2.7.1" id="-hrefsyntax-externtypemathsffunchrefsyntax-functypemathitfunctype"><span>3.2.7.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-externtypemathsffunchrefsyntax-functypemathitfunctype"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span> must be <a href="#valid-functype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the external type is valid.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-types-syntax-externtype-mathsf-table-xref-syntax-types-syntax-tabletype-mathit-tabletype">
         <h5 data-level="3.2.7.2" id="-hrefsyntax-externtypemathsftablehrefsyntax-tabletypemathittabletype"><span>3.2.7.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-externtypemathsftablehrefsyntax-tabletypemathittabletype"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span> must be <a href="#valid-tabletype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the external type is valid.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-types-syntax-externtype-mathsf-mem-xref-syntax-types-syntax-memtype-mathit-memtype">
         <h5 data-level="3.2.7.3" id="-hrefsyntax-externtypemathsfmemhrefsyntax-memtypemathitmemtype"><span>3.2.7.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-externtypemathsfmemhrefsyntax-memtypemathitmemtype"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span> must be <a href="#valid-memtype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the external type is valid.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-types-syntax-externtype-mathsf-global-xref-syntax-types-syntax-globaltype-mathit-globaltype">
         <h5 data-level="3.2.7.4" id="-hrefsyntax-externtypemathsfglobalhrefsyntax-globaltypemathitglobaltype"><span>3.2.7.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-externtypemathsfglobalhrefsyntax-globaltypemathitglobaltype"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span> must be <a href="#valid-globaltype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the external type is valid.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="import-subtyping">
         <span id="match"></span><span id="exec-import"></span><span id="index-7③"></span>
        <h4 data-level="3.2.8" id="import-subtyping①"><span>3.2.8. </span><span>Import Subtyping</span><a href="#import-subtyping①"></a></h4>
        <p>When <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-module"><span>instantiating</span></a> a module, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external values</span></a> must be provided whose <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externval"><span>types</span></a> are <em>matched</em> against the respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> classifying each import.
In some cases, this allows for a simple form of subtyping (written “<span><span><span></span></span></span>” formally), as defined here.</p>
        <section id="match-limits">
          <span id="index-8③"></span><span id="id1⑦"></span>
         <h5 data-level="3.2.8.1" id="limits④"><span>3.2.8.1. </span><span>Limits</span><a href="#limits④"></a></h5>
         <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-limits"><span>Limits</span></a> <span><span><span></span></span></span> match limits <span><span><span></span></span></span> if and only if:</p>
         <ul>
          <li>
           <p><span><span><span></span></span></span> is larger than or equal to <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Either:</p>
           <ul>
            <li>
             <p><span><span><span></span></span></span> is empty.</p>
           </li></ul>
          </li><li>
           <p>Or:</p>
           <ul>
            <li>
             <p>Both <span><span><span></span></span></span> and <span><span><span></span></span></span> are non-empty.</p>
            </li><li>
             <p><span><span><span></span></span></span> is smaller than or equal to <span><span><span></span></span></span>.</p>
           </li></ul>
         </li></ul>
         
          <span id="match-externtype"></span>
        </section>
        <section id="functions②">
          <span id="match-functype"></span><span id="index-9③"></span>
         <h5 data-level="3.2.8.2" id="functions③"><span>3.2.8.2. </span><span>Functions</span><a href="#functions③"></a></h5>
         <p>An <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span> matches <span><span><span></span></span></span> if and only if:</p>
         <ul>
          <li>
           <p>Both <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same.</p>
         </li></ul>
         
        </section>
        <section id="tables②">
          <span id="match-tabletype"></span><span id="index-10②"></span>
         <h5 data-level="3.2.8.3" id="tables③"><span>3.2.8.3. </span><span>Tables</span><a href="#tables③"></a></h5>
         <p>An <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span> matches <span><span><span></span></span></span> if and only if:</p>
         <ul>
          <li>
           <p>Limits <span><span><span></span></span></span> <a href="#match-limits"><span>match</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Both <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same.</p>
         </li></ul>
         
        </section>
        <section id="memories②">
          <span id="match-memtype"></span><span id="index-11②"></span>
         <h5 data-level="3.2.8.4" id="memories③"><span>3.2.8.4. </span><span>Memories</span><a href="#memories③"></a></h5>
         <p>An <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span> matches <span><span><span></span></span></span> if and only if:</p>
         <ul>
          <li>
           <p>Limits <span><span><span></span></span></span> <a href="#match-limits"><span>match</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="globals②">
          <span id="match-globaltype"></span><span id="index-12"></span>
         <h5 data-level="3.2.8.5" id="globals③"><span>3.2.8.5. </span><span>Globals</span><a href="#globals③"></a></h5>
         <p>An <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span> matches <span><span><span></span></span></span> if and only if:</p>
         <ul>
          <li>
           <p>Both <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same.</p>
         </li></ul>
         
        </section>
       </section>
      </section>
       <section id="instructions②">
        <span id="syntax-opdtype"></span><span id="syntax-stacktype"></span><span id="valid-instr"></span><span id="index-0⑨"></span>
       <h3 data-level="3.3" id="instructions③"><span>3.3. </span><span>Instructions</span><a href="#instructions③"></a></h3>
       <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>Instructions</span></a> are classified by <em>stack types</em> <span><span><span></span></span></span> that describe how instructions manipulate the <a href="https://www.w3.org/TR/wasm-core-2/index.html#stack"><span>operand stack</span></a>.</p>
       
       <p>The types describe the required input stack with <em>operand types</em> <span><span><span></span></span></span> that an instruction pops off
and the provided output stack with result values of types <span><span><span></span></span></span> that it pushes back.
Stack types are akin to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function types</span></a>,
except that they allow individual operands to be classified as <span><span><span></span></span></span> (<em>bottom</em>), indicating that the type is unconstrained.
As an auxiliary notion, an operand type <span><span><span></span></span></span> <em>matches</em> another operand type <span><span><span></span></span></span>, if <span><span><span></span></span></span> is either <span><span><span></span></span></span> or equal to <span><span><span></span></span></span>.
This is extended to stack types in a point-wise manner.</p>
       
       
       <div role="note">
        <p>Note</p>
        <p>For example, the instruction <span><span><span></span></span></span> has type <span><span><span></span></span></span>,
consuming two <span><span><span></span></span></span> values and producing one.</p>
       </div>
       <p>Typing extends to <a href="#valid-instr-seq"><span>instruction sequences</span></a> <span><span><span></span></span></span>.
Such a sequence has a <a href="#syntax-stacktype"><span>stack type</span></a> <span><span><span></span></span></span> if the accumulative effect of executing the instructions is consuming values of types <span><span><span></span></span></span> off the operand stack and pushing new values of types <span><span><span></span></span></span>.</p>
       <p id="polymorphism">For some instructions, the typing rules do not fully constrain the type,
and therefore allow for multiple types.
Such instructions are called <em>polymorphic</em>.
Two degrees of polymorphism can be distinguished:</p>
       <ul>
        <li>
         <p><em>value-polymorphic</em>:
the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> of one or several individual operands is unconstrained.
That is the case for all <a href="#valid-instr-parametric"><span>parametric instructions</span></a> like <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
        </li><li>
         <p><em>stack-polymorphic</em>:
the entire (or most of the) <a href="#syntax-stacktype"><span>stack type</span></a> <span><span><span></span></span></span> of the instruction is unconstrained.
That is the case for all <a href="#valid-instr-control"><span>control instructions</span></a> that perform an <em>unconditional control transfer</em>, such as <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>, and <span><span><span></span></span></span>.</p>
       </li></ul>
       <p>In both cases, the unconstrained types or type sequences can be chosen arbitrarily, as long as they meet the constraints imposed for the surrounding parts of the program.</p>
       <div role="note">
        <p>Note</p>
        <p>For example, the <span><span><span></span></span></span> instruction is valid with type <span><span><span></span></span></span>, for any possible <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number type</span></a> <span><span><span></span></span></span>.   Consequently, both instruction sequences</p>
        
        <p>and</p>
        
        <p>are valid, with <span><span><span></span></span></span> in the typing of <span><span><span></span></span></span> being instantiated to <span><span><span></span></span></span> or <span><span><span></span></span></span>, respectively.</p>
        <p>The <span><span><span></span></span></span> instruction is valid with type <span><span><span></span></span></span> for any possible sequences of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span> and <span><span><span></span></span></span>.
Consequently,</p>
        
        <p>is valid by assuming type <span><span><span></span></span></span> for the <span><span><span></span></span></span> instruction.
In contrast,</p>
        
        <p>is invalid, because there is no possible type to pick for the <span><span><span></span></span></span> instruction that would make the sequence well-typed.</p>
       </div>
       <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#algo-valid"><span>Appendix</span></a> describes a type checking <a href="https://www.w3.org/TR/wasm-core-2/index.html#algo-valid"><span>algorithm</span></a> that efficiently implements validation of instruction sequences as prescribed by the rules given here.</p>
       <section id="numeric-instructions②">
         <span id="valid-instr-numeric"></span><span id="index-1⑨"></span>
        <h4 data-level="3.3.1" id="numeric-instructions③"><span>3.3.1. </span><span>Numeric Instructions</span><a href="#numeric-instructions③"></a></h4>
        <section id="t-mathsf-xref-syntax-instructions-syntax-instr-numeric-mathsf-const-c">
          <span id="valid-const"></span>
         <h5 data-level="3.3.1.1" id="-tmathsfhrefsyntax-instr-numericmathsfconstc"><span>3.3.1.1. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-instr-numericmathsfconstc"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-unop-mathit-unop">
          <span id="valid-unop"></span>
         <h5 data-level="3.3.1.2" id="-tmathsfhrefsyntax-unopmathitunop"><span>3.3.1.2. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-unopmathitunop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-binop-mathit-binop">
          <span id="valid-binop"></span>
         <h5 data-level="3.3.1.3" id="-tmathsfhrefsyntax-binopmathitbinop"><span>3.3.1.3. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-binopmathitbinop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-testop-mathit-testop">
          <span id="valid-testop"></span>
         <h5 data-level="3.3.1.4" id="-tmathsfhrefsyntax-testopmathittestop"><span>3.3.1.4. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-testopmathittestop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-relop-mathit-relop">
          <span id="valid-relop"></span>
         <h5 data-level="3.3.1.5" id="-tmathsfhrefsyntax-relopmathitrelop"><span>3.3.1.5. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-relopmathitrelop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="t-2-mathsf-xref-syntax-instructions-syntax-cvtop-mathit-cvtop-mathsf-t-1-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx">
          <span id="valid-cvtop"></span>
         <h5 data-level="3.3.1.6" id="-t_2mathsfhrefsyntax-cvtopmathitcvtopmathsf_t_1mathsf_hrefsyntax-sxmathitsx"><span>3.3.1.6. </span><span><span><span><span></span></span></span></span><a href="#-t_2mathsfhrefsyntax-cvtopmathitcvtopmathsf_t_1mathsf_hrefsyntax-sxmathitsx"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="reference-instructions②">
         <span id="valid-instr-ref"></span><span id="index-2⑧"></span>
        <h4 data-level="3.3.2" id="reference-instructions③"><span>3.3.2. </span><span>Reference Instructions</span><a href="#reference-instructions③"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-ref-mathsf-ref-null-t">
          <span id="valid-ref-null"></span>
         <h5 data-level="3.3.2.1" id="-hrefsyntax-instr-refmathsfrefnullt"><span>3.3.2.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-refmathsfrefnullt"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>In future versions of WebAssembly, there may be reference types for which no null reference is allowed.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-ref-mathsf-ref-is-null">
          <span id="valid-ref-is-null"></span>
         <h5 data-level="3.3.2.2" id="-hrefsyntax-instr-refmathsfrefis_null"><span>3.3.2.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-refmathsfrefis_null"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>, for any <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-ref-mathsf-ref-func-x">
          <span id="valid-ref-func"></span>
         <h5 data-level="3.3.2.3" id="-hrefsyntax-instr-refmathsfreffuncx"><span>3.3.2.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-refmathsfreffuncx"></a></h5>
         <ul>
          <li>
           <p>The function <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcidx"><span>function index</span></a> <span><span><span></span></span></span> must be contained in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="vector-instructions②">
         <span id="aux-unpacked"></span><span id="valid-instr-vec"></span><span id="index-3⑤"></span>
        <h4 data-level="3.3.3" id="vector-instructions③"><span>3.3.3. </span><span>Vector Instructions</span><a href="#vector-instructions③"></a></h4>
        <p>Vector instructions can have a prefix to describe the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec-shape"><span>shape</span></a> of the operand. Packed numeric types, <span><span><span></span></span></span> and <span><span><span></span></span></span>, are not <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value types</span></a>. An auxiliary function maps such packed type shapes to value types:</p>
        
        <p>The following auxiliary function denotes the number of lanes in a vector shape, i.e., its <em>dimension</em>:</p>
        
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-const-c">
          <span id="valid-vconst"></span>
         <h5 data-level="3.3.3.1" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-vecmathsfconstc"><span>3.3.3.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-vecmathsfconstc"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-vvunop-mathit-vvunop">
          <span id="valid-vvunop"></span>
         <h5 data-level="3.3.3.2" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvunopmathitvvunop"><span>3.3.3.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvunopmathitvvunop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-vvbinop-mathit-vvbinop">
          <span id="valid-vvbinop"></span>
         <h5 data-level="3.3.3.3" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvbinopmathitvvbinop"><span>3.3.3.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvbinopmathitvvbinop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-vvternop-mathit-vvternop">
          <span id="valid-vvternop"></span>
         <h5 data-level="3.3.3.4" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvternopmathitvvternop"><span>3.3.3.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvternopmathitvvternop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-vvtestop-mathit-vvtestop">
          <span id="valid-vvtestop"></span>
         <h5 data-level="3.3.3.5" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvtestopmathitvvtestop"><span>3.3.3.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvtestopmathitvvtestop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="mathsf-i8x16-xref-syntax-instructions-syntax-instr-vec-mathsf-swizzle">
          <span id="valid-vec-swizzle"></span>
         <h5 data-level="3.3.3.6" id="-mathsfi8x16hrefsyntax-instr-vecmathsfswizzle"><span>3.3.3.6. </span><span><span><span><span></span></span></span></span><a href="#-mathsfi8x16hrefsyntax-instr-vecmathsfswizzle"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="mathsf-i8x16-xref-syntax-instructions-syntax-instr-vec-mathsf-shuffle-xref-syntax-instructions-syntax-laneidx-mathit-laneidx-16">
          <span id="valid-vec-shuffle"></span>
         <h5 data-level="3.3.3.7" id="-mathsfi8x16hrefsyntax-instr-vecmathsfshufflehrefsyntax-laneidxmathitlaneidx16"><span>3.3.3.7. </span><span><span><span><span></span></span></span></span><a href="#-mathsfi8x16hrefsyntax-instr-vecmathsfshufflehrefsyntax-laneidxmathitlaneidx16"></a></h5>
         <ul>
          <li>
           <p>For all <span><span><span></span></span></span>, in <span><span><span></span></span></span>, <span><span><span></span></span></span> must be smaller than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-splat">
          <span id="valid-vec-splat"></span>
         <h5 data-level="3.3.3.8" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfsplat"><span>3.3.3.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfsplat"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-replace-lane-xref-syntax-instructions-syntax-laneidx-mathit-laneidx">
          <span id="valid-vec-replace-lane"></span>
         <h5 data-level="3.3.3.10" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfreplace_lanehrefsyntax-laneidxmathitlaneidx"><span>3.3.3.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfreplace_lanehrefsyntax-laneidxmathitlaneidx"></a></h5>
         <ul>
          <li>
           <p>The lane index <span><span><span></span></span></span> must be smaller than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-vunop-mathit-vunop">
          <span id="valid-vunop"></span>
         <h5 data-level="3.3.3.11" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-vunopmathitvunop"><span>3.3.3.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-vunopmathitvunop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-vbinop-mathit-vbinop">
          <span id="valid-vbinop"></span>
         <h5 data-level="3.3.3.12" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-vbinopmathitvbinop"><span>3.3.3.12. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-vbinopmathitvbinop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-vrelop-mathit-vrelop">
          <span id="valid-vrelop"></span>
         <h5 data-level="3.3.3.13" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-vrelopmathitvrelop"><span>3.3.3.13. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-vrelopmathitvrelop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-ishape-mathsf-xref-syntax-instructions-syntax-vishiftop-mathit-vishiftop">
          <span id="valid-vishiftop"></span>
         <h5 data-level="3.3.3.14" id="-hrefsyntax-shapemathitishapemathsfhrefsyntax-vishiftopmathitvishiftop"><span>3.3.3.14. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitishapemathsfhrefsyntax-vishiftopmathitvishiftop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-vtestop-mathit-vtestop">
          <span id="valid-vtestop"></span>
         <h5 data-level="3.3.3.15" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-vtestopmathitvtestop"><span>3.3.3.15. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-vtestopmathitvtestop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-vcvtop-mathit-vcvtop-mathsf-xref-syntax-instructions-syntax-half-mathit-half-mathsf-xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx-mathsf-zero">
          <span id="valid-vcvtop"></span>
         <h5 data-level="3.3.3.16" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-vcvtopmathitvcvtopmathsf_hrefsyntax-halfmathithalfmathsf_hrefsyntax-shapemathitshapemathsf_hrefsyntax-sxmathitsxmathsf_zero"><span>3.3.3.16. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-vcvtopmathitvcvtopmathsf_hrefsyntax-halfmathithalfmathsf_hrefsyntax-shapemathitshapemathsf_hrefsyntax-sxmathitsxmathsf_zero"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-ishape-1-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-narrow-mathsf-xref-syntax-instructions-syntax-shape-mathit-ishape-2-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx">
          <span id="valid-vec-narrow"></span>
         <h5 data-level="3.3.3.17" id="-hrefsyntax-shapemathitishape_1mathsfhrefsyntax-instr-vecmathsfnarrowmathsf_hrefsyntax-shapemathitishape_2mathsf_hrefsyntax-sxmathitsx"><span>3.3.3.17. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitishape_1mathsfhrefsyntax-instr-vecmathsfnarrowmathsf_hrefsyntax-shapemathitishape_2mathsf_hrefsyntax-sxmathitsx"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-ishape-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-bitmask">
          <span id="valid-vec-bitmask"></span>
         <h5 data-level="3.3.3.18" id="-hrefsyntax-shapemathitishapemathsfhrefsyntax-instr-vecmathsfbitmask"><span>3.3.3.18. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitishapemathsfhrefsyntax-instr-vecmathsfbitmask"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-ishape-1-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-dot-mathsf-xref-syntax-instructions-syntax-shape-mathit-ishape-2-mathsf-s">
          <span id="valid-vec-dot"></span>
         <h5 data-level="3.3.3.19" id="-hrefsyntax-shapemathitishape_1mathsfhrefsyntax-instr-vecmathsfdotmathsf_hrefsyntax-shapemathitishape_2mathsf_s"><span>3.3.3.19. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitishape_1mathsfhrefsyntax-instr-vecmathsfdotmathsf_hrefsyntax-shapemathitishape_2mathsf_s"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-ishape-1-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-extmul-mathsf-xref-syntax-instructions-syntax-half-mathit-half-mathsf-xref-syntax-instructions-syntax-shape-mathit-ishape-2-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx">
          <span id="valid-vec-extmul"></span>
         <h5 data-level="3.3.3.20" id="-hrefsyntax-shapemathitishape_1mathsfhrefsyntax-instr-vecmathsfextmulmathsf_hrefsyntax-halfmathithalfmathsf_hrefsyntax-shapemathitishape_2mathsf_hrefsyntax-sxmathitsx"><span>3.3.3.20. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitishape_1mathsfhrefsyntax-instr-vecmathsfextmulmathsf_hrefsyntax-halfmathithalfmathsf_hrefsyntax-shapemathitishape_2mathsf_hrefsyntax-sxmathitsx"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-ishape-1-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-extadd-pairwise-mathsf-xref-syntax-instructions-syntax-shape-mathit-ishape-2-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx">
          <span id="valid-vec-extadd-pairwise"></span>
         <h5 data-level="3.3.3.21" id="-hrefsyntax-shapemathitishape_1mathsfhrefsyntax-instr-vecmathsfextadd_pairwisemathsf_hrefsyntax-shapemathitishape_2mathsf_hrefsyntax-sxmathitsx"><span>3.3.3.21. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitishape_1mathsfhrefsyntax-instr-vecmathsfextadd_pairwisemathsf_hrefsyntax-shapemathitishape_2mathsf_hrefsyntax-sxmathitsx"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="parametric-instructions②">
         <span id="valid-instr-parametric"></span><span id="index-4⑤"></span>
        <h4 data-level="3.3.4" id="parametric-instructions③"><span>3.3.4. </span><span>Parametric Instructions</span><a href="#parametric-instructions③"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-parametric-mathsf-drop">
          <span id="valid-drop"></span>
         <h5 data-level="3.3.4.1" id="-hrefsyntax-instr-parametricmathsfdrop"><span>3.3.4.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-parametricmathsfdrop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>, for any <a href="#syntax-opdtype"><span>operand type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>Both <span><span><span></span></span></span> and <span><span><span></span></span></span> without annotation are <a href="#polymorphism"><span>value-polymorphic</span></a> instructions.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-parametric-mathsf-select-t-ast">
          <span id="valid-select"></span>
         <h5 data-level="3.3.4.2" id="-hrefsyntax-instr-parametricmathsfselect-tast"><span>3.3.4.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-parametricmathsfselect-tast"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is present, then:</p>
           <ul>
            <li>
             <p>The length of <span><span><span></span></span></span> must be <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>Else:</p>
           <ul>
            <li>
             <p>The instruction is valid with type <span><span><span></span></span></span>, for any <a href="#syntax-opdtype"><span>operand type</span></a> <span><span><span></span></span></span> that <a href="#match-opdtype"><span>matches</span></a> some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number type</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vectype"><span>vector type</span></a>.</p>
           </li></ul>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>In future versions of WebAssembly, <span><span><span></span></span></span> may allow more than one value per choice.</p>
         </div>
        </section>
       </section>
       <section id="variable-instructions②">
         <span id="valid-instr-variable"></span><span id="index-5⑤"></span>
        <h4 data-level="3.3.5" id="variable-instructions③"><span>3.3.5. </span><span>Variable Instructions</span><a href="#variable-instructions③"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-local-get-x">
          <span id="valid-local-get"></span>
         <h5 data-level="3.3.5.1" id="-hrefsyntax-instr-variablemathsflocalgetx"><span>3.3.5.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsflocalgetx"></a></h5>
         <ul>
          <li>
           <p>The local <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-local-set-x">
          <span id="valid-local-set"></span>
         <h5 data-level="3.3.5.2" id="-hrefsyntax-instr-variablemathsflocalsetx"><span>3.3.5.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsflocalsetx"></a></h5>
         <ul>
          <li>
           <p>The local <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-local-tee-x">
          <span id="valid-local-tee"></span>
         <h5 data-level="3.3.5.3" id="-hrefsyntax-instr-variablemathsflocalteex"><span>3.3.5.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsflocalteex"></a></h5>
         <ul>
          <li>
           <p>The local <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-global-get-x">
          <span id="valid-global-get"></span>
         <h5 data-level="3.3.5.4" id="-hrefsyntax-instr-variablemathsfglobalgetx"><span>3.3.5.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsfglobalgetx"></a></h5>
         <ul>
          <li>
           <p>The global <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-global-set-x">
          <span id="valid-global-set"></span>
         <h5 data-level="3.3.5.5" id="-hrefsyntax-instr-variablemathsfglobalsetx"><span>3.3.5.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsfglobalsetx"></a></h5>
         <ul>
          <li>
           <p>The global <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The mutability <span><span><span></span></span></span> must be <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="table-instructions②">
         <span id="valid-instr-table"></span><span id="index-6④"></span>
        <h4 data-level="3.3.6" id="table-instructions③"><span>3.3.6. </span><span>Table Instructions</span><a href="#table-instructions③"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-get-x">
          <span id="valid-table-get"></span>
         <h5 data-level="3.3.6.1" id="-hrefsyntax-instr-tablemathsftablegetx"><span>3.3.6.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablegetx"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-set-x">
          <span id="valid-table-set"></span>
         <h5 data-level="3.3.6.2" id="-hrefsyntax-instr-tablemathsftablesetx"><span>3.3.6.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablesetx"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-size-x">
          <span id="valid-table-size"></span>
         <h5 data-level="3.3.6.3" id="-hrefsyntax-instr-tablemathsftablesizex"><span>3.3.6.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablesizex"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-grow-x">
          <span id="valid-table-grow"></span>
         <h5 data-level="3.3.6.4" id="-hrefsyntax-instr-tablemathsftablegrowx"><span>3.3.6.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablegrowx"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-fill-x">
          <span id="valid-table-fill"></span>
         <h5 data-level="3.3.6.5" id="-hrefsyntax-instr-tablemathsftablefillx"><span>3.3.6.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablefillx"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-copy-x-y">
          <span id="valid-table-copy"></span>
         <h5 data-level="3.3.6.6" id="-hrefsyntax-instr-tablemathsftablecopyxy"><span>3.3.6.6. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablecopyxy"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span> must be the same as <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-init-x-y">
          <span id="valid-table-init"></span>
         <h5 data-level="3.3.6.7" id="-hrefsyntax-instr-tablemathsftableinitxy"><span>3.3.6.7. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftableinitxy"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The element segment <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span> must be the same as <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-elem-drop-x">
          <span id="valid-elem-drop"></span>
         <h5 data-level="3.3.6.8" id="-hrefsyntax-instr-tablemathsfelemdropx"><span>3.3.6.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsfelemdropx"></a></h5>
         <ul>
          <li>
           <p>The element segment <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="memory-instructions②">
         <span id="valid-instr-memory"></span><span id="valid-memarg"></span><span id="index-7④"></span>
        <h4 data-level="3.3.7" id="memory-instructions③"><span>3.3.7. </span><span>Memory Instructions</span><a href="#memory-instructions③"></a></h4>
        <section id="t-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-load-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="valid-load"></span>
         <h5 data-level="3.3.7.1" id="-tmathsfhrefsyntax-instr-memorymathsfloadhrefsyntax-memargmathitmemarg"><span>3.3.7.1. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-instr-memorymathsfloadhrefsyntax-memargmathitmemarg"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>bit width</span></a> of <span><span><span></span></span></span> divided by <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="valid-loadn"></span>
         <h5 data-level="3.3.7.2" id="-tmathsfhrefsyntax-instr-memorymathsfloadnmathsf_hrefsyntax-sxmathitsxhrefsyntax-memargmathitmemarg"><span>3.3.7.2. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-instr-memorymathsfloadnmathsf_hrefsyntax-sxmathitsxhrefsyntax-memargmathitmemarg"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-store-xref-syntax-instructions-syntax-memarg-mathit-memarg">
         <h5 data-level="3.3.7.3" id="-tmathsfhrefsyntax-instr-memorymathsfstorehrefsyntax-memargmathitmemarg"><span>3.3.7.3. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-instr-memorymathsfstorehrefsyntax-memargmathitmemarg"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>bit width</span></a> of <span><span><span></span></span></span> divided by <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-store-n-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="valid-storen"></span>
         <h5 data-level="3.3.7.4" id="-tmathsfhrefsyntax-instr-memorymathsfstorenhrefsyntax-memargmathitmemarg"><span>3.3.7.4. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-instr-memorymathsfstorenhrefsyntax-memargmathitmemarg"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="mathsf-v128-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-x-m-xref-syntax-instructions-syntax-sx-mathit-sx-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="valid-load-extend"></span>
         <h5 data-level="3.3.7.5" id="-mathsfv128hrefsyntax-instr-memorymathsfloadnmathsfxm_hrefsyntax-sxmathitsxhrefsyntax-memargmathitmemarg"><span>3.3.7.5. </span><span><span><span><span></span></span></span></span><a href="#-mathsfv128hrefsyntax-instr-memorymathsfloadnmathsfxm_hrefsyntax-sxmathitsxhrefsyntax-memargmathitmemarg"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="mathsf-v128-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-splat-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="valid-load-splat"></span>
         <h5 data-level="3.3.7.6" id="-mathsfv128hrefsyntax-instr-memorymathsfloadnmathsf_splathrefsyntax-memargmathitmemarg"><span>3.3.7.6. </span><span><span><span><span></span></span></span></span><a href="#-mathsfv128hrefsyntax-instr-memorymathsfloadnmathsf_splathrefsyntax-memargmathitmemarg"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="mathsf-v128-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-zero-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="valid-load-zero"></span>
         <h5 data-level="3.3.7.7" id="-mathsfv128hrefsyntax-instr-memorymathsfloadnmathsf_zerohrefsyntax-memargmathitmemarg"><span>3.3.7.7. </span><span><span><span><span></span></span></span></span><a href="#-mathsfv128hrefsyntax-instr-memorymathsfloadnmathsf_zerohrefsyntax-memargmathitmemarg"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="mathsf-v128-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-lane-xref-syntax-instructions-syntax-memarg-mathit-memarg-xref-syntax-instructions-syntax-laneidx-mathit-laneidx">
          <span id="valid-load-lane"></span>
         <h5 data-level="3.3.7.8" id="-mathsfv128hrefsyntax-instr-memorymathsfloadnmathsf_lanehrefsyntax-memargmathitmemarghrefsyntax-laneidxmathitlaneidx"><span>3.3.7.8. </span><span><span><span><span></span></span></span></span><a href="#-mathsfv128hrefsyntax-instr-memorymathsfloadnmathsf_lanehrefsyntax-memargmathitmemarghrefsyntax-laneidxmathitlaneidx"></a></h5>
         <ul>
          <li>
           <p>The lane index <span><span><span></span></span></span> must be smaller than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="mathsf-v128-xref-syntax-instructions-syntax-instr-memory-mathsf-store-n-mathsf-lane-xref-syntax-instructions-syntax-memarg-mathit-memarg-xref-syntax-instructions-syntax-laneidx-mathit-laneidx">
          <span id="valid-store-lane"></span>
         <h5 data-level="3.3.7.9" id="-mathsfv128hrefsyntax-instr-memorymathsfstorenmathsf_lanehrefsyntax-memargmathitmemarghrefsyntax-laneidxmathitlaneidx"><span>3.3.7.9. </span><span><span><span><span></span></span></span></span><a href="#-mathsfv128hrefsyntax-instr-memorymathsfstorenmathsf_lanehrefsyntax-memargmathitmemarghrefsyntax-laneidxmathitlaneidx"></a></h5>
         <ul>
          <li>
           <p>The lane index <span><span><span></span></span></span> must be smaller than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The alignment <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-size">
          <span id="valid-memory-size"></span>
         <h5 data-level="3.3.7.10" id="-hrefsyntax-instr-memorymathsfmemorysize"><span>3.3.7.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemorysize"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-grow">
          <span id="valid-memory-grow"></span>
         <h5 data-level="3.3.7.11" id="-hrefsyntax-instr-memorymathsfmemorygrow"><span>3.3.7.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemorygrow"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-fill">
          <span id="valid-memory-fill"></span>
         <h5 data-level="3.3.7.12" id="-hrefsyntax-instr-memorymathsfmemoryfill"><span>3.3.7.12. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemoryfill"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-copy">
          <span id="valid-memory-copy"></span>
         <h5 data-level="3.3.7.13" id="-hrefsyntax-instr-memorymathsfmemorycopy"><span>3.3.7.13. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemorycopy"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-init-x">
          <span id="valid-memory-init"></span>
         <h5 data-level="3.3.7.14" id="-hrefsyntax-instr-memorymathsfmemoryinitx"><span>3.3.7.14. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemoryinitx"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The data segment <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-data-drop-x">
          <span id="valid-data-drop"></span>
         <h5 data-level="3.3.7.15" id="-hrefsyntax-instr-memorymathsfdatadropx"><span>3.3.7.15. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfdatadropx"></a></h5>
         <ul>
          <li>
           <p>The data segment <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="control-instructions②">
         <span id="valid-instr-control"></span><span id="valid-label"></span><span id="index-8④"></span>
        <h4 data-level="3.3.8" id="control-instructions③"><span>3.3.8. </span><span>Control Instructions</span><a href="#control-instructions③"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-nop">
          <span id="valid-nop"></span>
         <h5 data-level="3.3.8.1" id="-hrefsyntax-instr-controlmathsfnop"><span>3.3.8.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfnop"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-unreachable">
          <span id="valid-unreachable"></span>
         <h5 data-level="3.3.8.2" id="-hrefsyntax-instr-controlmathsfunreachable"><span>3.3.8.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfunreachable"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>, for any sequences of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>The <span><span><span></span></span></span> instruction is <a href="#polymorphism"><span>stack-polymorphic</span></a>.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-block-xref-syntax-instructions-syntax-blocktype-mathit-blocktype-xref-syntax-instructions-syntax-instr-mathit-instr-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end">
          <span id="valid-block"></span>
         <h5 data-level="3.3.8.3" id="-hrefsyntax-instr-controlmathsfblockhrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"><span>3.3.8.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfblockhrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block type</span></a> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-blocktype"><span>valid</span></a> as some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> as <span><span><span></span></span></span>, but with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span> prepended to the <span><span><span></span></span></span> vector.</p>
          </li><li>
           <p>Under context <span><span><span></span></span></span>,
the instruction sequence <span><span><span></span></span></span> must be <a href="#valid-instr-seq"><span>valid</span></a> with type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the compound instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#notation-extend"><span>notation</span></a> <span><span><span></span></span></span> inserts the new label type at index <span><span><span></span></span></span>, shifting all others.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-loop-xref-syntax-instructions-syntax-blocktype-mathit-blocktype-xref-syntax-instructions-syntax-instr-mathit-instr-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end">
          <span id="valid-loop"></span>
         <h5 data-level="3.3.8.4" id="-hrefsyntax-instr-controlmathsfloophrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"><span>3.3.8.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfloophrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block type</span></a> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-blocktype"><span>valid</span></a> as some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> as <span><span><span></span></span></span>, but with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span> prepended to the <span><span><span></span></span></span> vector.</p>
          </li><li>
           <p>Under context <span><span><span></span></span></span>,
the instruction sequence <span><span><span></span></span></span> must be <a href="#valid-instr-seq"><span>valid</span></a> with type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the compound instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#notation-extend"><span>notation</span></a> <span><span><span></span></span></span> inserts the new label type at index <span><span><span></span></span></span>, shifting all others.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-if-xref-syntax-instructions-syntax-blocktype-mathit-blocktype-xref-syntax-instructions-syntax-instr-mathit-instr-1-ast-xref-syntax-instructions-syntax-instr-control-mathsf-else-xref-syntax-instructions-syntax-instr-mathit-instr-2-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end">
          <span id="valid-if"></span>
         <h5 data-level="3.3.8.5" id="-hrefsyntax-instr-controlmathsfifhrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstr_1asthrefsyntax-instr-controlmathsfelsehrefsyntax-instrmathitinstr_2asthrefsyntax-instr-controlmathsfend"><span>3.3.8.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfifhrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstr_1asthrefsyntax-instr-controlmathsfelsehrefsyntax-instrmathitinstr_2asthrefsyntax-instr-controlmathsfend"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block type</span></a> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-blocktype"><span>valid</span></a> as some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> as <span><span><span></span></span></span>, but with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span> prepended to the <span><span><span></span></span></span> vector.</p>
          </li><li>
           <p>Under context <span><span><span></span></span></span>,
the instruction sequence <span><span><span></span></span></span> must be <a href="#valid-instr-seq"><span>valid</span></a> with type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Under context <span><span><span></span></span></span>,
the instruction sequence <span><span><span></span></span></span> must be <a href="#valid-instr-seq"><span>valid</span></a> with type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the compound instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#notation-extend"><span>notation</span></a> <span><span><span></span></span></span> inserts the new label type at index <span><span><span></span></span></span>, shifting all others.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-br-l">
          <span id="valid-br"></span>
         <h5 data-level="3.3.8.6" id="-hrefsyntax-instr-controlmathsfbrl"><span>3.3.8.6. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfbrl"></a></h5>
         <ul>
          <li>
           <p>The label <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>, for any sequences of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-labelidx"><span>label index</span></a> space in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span> contains the most recent label first, so that <span><span><span></span></span></span> performs a relative lookup as expected.</p>
          <p>The <span><span><span></span></span></span> instruction is <a href="#polymorphism"><span>stack-polymorphic</span></a>.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-br-if-l">
          <span id="valid-br-if"></span>
         <h5 data-level="3.3.8.7" id="-hrefsyntax-instr-controlmathsfbr_ifl"><span>3.3.8.7. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfbr_ifl"></a></h5>
         <ul>
          <li>
           <p>The label <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-labelidx"><span>label index</span></a> space in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span> contains the most recent label first, so that <span><span><span></span></span></span> performs a relative lookup as expected.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-br-table-l-ast-l-n">
          <span id="valid-br-table"></span>
         <h5 data-level="3.3.8.8" id="-hrefsyntax-instr-controlmathsfbr_tablelastl_n"><span>3.3.8.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfbr_tablelastl_n"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-label"><span>label</span></a> <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-label"><span>label</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the label <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>There must be a sequence <span><span><span></span></span></span> of <a href="#syntax-opdtype"><span>operand types</span></a>, such that:</p>
           <ul>
            <li>
             <p>The length of the sequence <span><span><span></span></span></span> is the same as the length of the sequence <span><span><span></span></span></span>.</p>
            </li><li>
             <p>For each <a href="#syntax-opdtype"><span>operand type</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> and corresponding type <span><span><span></span></span></span> in <span><span><span></span></span></span>, <span><span><span></span></span></span> <a href="#match-opdtype"><span>matches</span></a> <span><span><span></span></span></span>.</p>
            </li><li>
             <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-label"><span>label</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>:</p>
             <ul>
              <li>
               <p>The length of the sequence <span><span><span></span></span></span> is the same as the length of the sequence <span><span><span></span></span></span>.</p>
              </li><li>
               <p>For each <a href="#syntax-opdtype"><span>operand type</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> and corresponding type <span><span><span></span></span></span> in <span><span><span></span></span></span>, <span><span><span></span></span></span> <a href="#match-opdtype"><span>matches</span></a> <span><span><span></span></span></span>.</p>
             </li></ul>
           </li></ul>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>, for any sequences of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-labelidx"><span>label index</span></a> space in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span> contains the most recent label first, so that <span><span><span></span></span></span> performs a relative lookup as expected.</p>
          <p>The <span><span><span></span></span></span> instruction is <a href="#polymorphism"><span>stack-polymorphic</span></a>.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-return">
          <span id="valid-return"></span>
         <h5 data-level="3.3.8.9" id="-hrefsyntax-instr-controlmathsfreturn"><span>3.3.8.9. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfreturn"></a></h5>
         <ul>
          <li>
           <p>The return type <span><span><span></span></span></span> must not be absent in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>, for any sequences of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>The <span><span><span></span></span></span> instruction is <a href="#polymorphism"><span>stack-polymorphic</span></a>.</p>
          <p><span><span><span></span></span></span> is absent (set to <span><span><span></span></span></span>) when validating an <a href="#valid-expr"><span>expression</span></a> that is not a function body.
This differs from it being set to the empty result type (<span><span><span></span></span></span>),
which is the case for functions not returning anything.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-call-x">
          <span id="valid-call"></span>
         <h5 data-level="3.3.8.10" id="-hrefsyntax-instr-controlmathsfcallx"><span>3.3.8.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfcallx"></a></h5>
         <ul>
          <li>
           <p>The function <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-call-indirect-x-y">
          <span id="valid-call-indirect"></span>
         <h5 data-level="3.3.8.11" id="-hrefsyntax-instr-controlmathsfcall_indirectxy"><span>3.3.8.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfcall_indirectxy"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span> must be <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The type <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="instruction-sequences">
         <span id="valid-instr-seq"></span><span id="index-9④"></span>
        <h4 data-level="3.3.9" id="instruction-sequences①"><span>3.3.9. </span><span>Instruction Sequences</span><a href="#instruction-sequences①"></a></h4>
        <p>Typing of instruction sequences is defined recursively.</p>
        <section id="empty-instruction-sequence-epsilon">
         <h5 data-level="3.3.9.1" id="empty-instruction-sequence--epsilon"><span>3.3.9.1. </span><span>Empty Instruction Sequence: <span><span><span></span></span></span></span><a href="#empty-instruction-sequence--epsilon"></a></h5>
         <ul>
          <li>
           <p>The empty instruction sequence is valid with type <span><span><span></span></span></span>,
for any sequence of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="non-empty-instruction-sequence-xref-syntax-instructions-syntax-instr-mathit-instr-ast-xref-syntax-instructions-syntax-instr-mathit-instr-n">
         <h5 data-level="3.3.9.2" id="non-empty-instruction-sequence--hrefsyntax-instrmathitinstrasthrefsyntax-instrmathitinstr_n"><span>3.3.9.2. </span><span>Non-empty Instruction Sequence: <span><span><span></span></span></span></span><a href="#non-empty-instruction-sequence--hrefsyntax-instrmathitinstrasthrefsyntax-instrmathitinstr_n"></a></h5>
         <ul>
          <li>
           <p>The instruction sequence <span><span><span></span></span></span> must be valid with type <span><span><span></span></span></span>,
for some sequences of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The instruction <span><span><span></span></span></span> must be valid with type <span><span><span></span></span></span>,
for some sequences of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>There must be a sequence of <a href="#syntax-opdtype"><span>operand types</span></a> <span><span><span></span></span></span>,
such that <span><span><span></span></span></span> where the type sequence <span><span><span></span></span></span> is as long as <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="#syntax-opdtype"><span>operand type</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> and corresponding type <span><span><span></span></span></span> in <span><span><span></span></span></span>, <span><span><span></span></span></span> <a href="#match-opdtype"><span>matches</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the combined instruction sequence is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="expressions②">
         <span id="valid-expr"></span><span id="index-10③"></span>
        <h4 data-level="3.3.10" id="expressions③"><span>3.3.10. </span><span>Expressions</span><a href="#expressions③"></a></h4>
        <p>Expressions <span><span><span></span></span></span> are classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result types</span></a> of the form <span><span><span></span></span></span>.</p>
        <section id="xref-syntax-instructions-syntax-instr-mathit-instr-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end">
         <h5 data-level="3.3.10.1" id="-hrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"><span>3.3.10.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"></a></h5>
         <ul>
          <li>
           <p>The instruction sequence <span><span><span></span></span></span> must be <a href="#valid-instr-seq"><span>valid</span></a> with some <a href="#syntax-stacktype"><span>stack type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="#syntax-opdtype"><span>operand type</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> and corresponding <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, <span><span><span></span></span></span> <a href="#match-opdtype"><span>matches</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the expression is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="constant-expressions">
          <span id="valid-constant"></span><span id="index-11③"></span>
         <h5 data-level="3.3.10.2" id="constant-expressions①"><span>3.3.10.2. </span><span>Constant Expressions</span><a href="#constant-expressions①"></a></h5>
         <ul>
          <li>
           <p>In a <em>constant</em> expression <span><span><span></span></span></span> all instructions in <span><span><span></span></span></span> must be constant.</p>
          </li><li>
           <p>A constant instruction <span><span><span></span></span></span> must be:</p>
           <ul>
            <li>
             <p>either of the form <span><span><span></span></span></span>,</p>
            </li><li>
             <p>or of the form <span><span><span></span></span></span>,</p>
            </li><li>
             <p>or of the form <span><span><span></span></span></span>,</p>
            </li><li>
             <p>or of the form <span><span><span></span></span></span>, in which case <span><span><span></span></span></span> must be a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> of the form <span><span><span></span></span></span>.</p>
           </li></ul>
         </li></ul>
         
         
         
         <div role="note">
          <p>Note</p>
          <p>Currently, constant expressions occurring in <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>globals</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element</span></a>, or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data</span></a> segments are further constrained in that contained <span><span><span></span></span></span> instructions are only allowed to refer to <em>imported</em> globals.
This is enforced in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>validation rule for modules</span></a> by constraining the context <span><span><span></span></span></span> accordingly.</p>
          <p>The definition of constant expression may be extended in future versions of WebAssembly.</p>
         </div>
        </section>
       </section>
      </section>
       <section id="modules②">
       <h3 data-level="3.4" id="modules③"><span>3.4. </span><span>Modules</span><a href="#modules③"></a></h3>
       <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>Modules</span></a> are valid when all the components they contain are valid.
Furthermore, most definitions are themselves classified with a suitable type.</p>
       <section id="functions④">
         <span id="valid-func"></span><span id="valid-local"></span><span id="index-0①⓪"></span>
        <h4 data-level="3.4.1" id="functions⑤"><span>3.4.1. </span><span>Functions</span><a href="#functions⑤"></a></h4>
        <p>Functions <span><span><span></span></span></span> are classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function types</span></a> of the form <span><span><span></span></span></span>.</p>
        <section id="xref-syntax-modules-syntax-func-mathsf-type-x-xref-syntax-modules-syntax-func-mathsf-locals-t-ast-xref-syntax-modules-syntax-func-mathsf-body-xref-syntax-instructions-syntax-expr-mathit-expr">
         <h5 data-level="3.4.1.1" id="--hrefsyntax-funcmathsftypex-hrefsyntax-funcmathsflocalstast-hrefsyntax-funcmathsfbodyhrefsyntax-exprmathitexpr"><span>3.4.1.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-funcmathsftypex-hrefsyntax-funcmathsflocalstast-hrefsyntax-funcmathsfbodyhrefsyntax-exprmathitexpr"></a></h5>
         <ul>
          <li>
           <p>The type <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> as <span><span><span></span></span></span>,
but with:</p>
           <ul>
            <li>
             <p><span><span><span></span></span></span> set to the sequence of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value types</span></a> <span><span><span></span></span></span>, concatenating parameters and locals,</p>
            </li><li>
             <p><span><span><span></span></span></span> set to the singular sequence containing only <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
            </li><li>
             <p><span><span><span></span></span></span> set to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>Under the context <span><span><span></span></span></span>,
the expression <span><span><span></span></span></span> must be valid with type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the function definition is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="tables④">
         <span id="valid-table"></span><span id="index-1①⓪"></span>
        <h4 data-level="3.4.2" id="tables⑤"><span>3.4.2. </span><span>Tables</span><a href="#tables⑤"></a></h4>
        <p>Tables <span><span><span></span></span></span> are classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table types</span></a>.</p>
        <section id="xref-syntax-modules-syntax-table-mathsf-type-xref-syntax-types-syntax-tabletype-mathit-tabletype">
         <h5 data-level="3.4.2.1" id="--hrefsyntax-tablemathsftypehrefsyntax-tabletypemathittabletype"><span>3.4.2.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-tablemathsftypehrefsyntax-tabletypemathittabletype"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-tabletype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the table definition is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="memories④">
         <span id="valid-mem"></span><span id="index-2⑨"></span>
        <h4 data-level="3.4.3" id="memories⑤"><span>3.4.3. </span><span>Memories</span><a href="#memories⑤"></a></h4>
        <p>Memories <span><span><span></span></span></span> are classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory types</span></a>.</p>
        <section id="xref-syntax-modules-syntax-mem-mathsf-type-xref-syntax-types-syntax-memtype-mathit-memtype">
         <h5 data-level="3.4.3.1" id="--hrefsyntax-memmathsftypehrefsyntax-memtypemathitmemtype"><span>3.4.3.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-memmathsftypehrefsyntax-memtypemathitmemtype"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memtype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the memory definition is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="globals④">
         <span id="valid-global"></span><span id="index-3⑥"></span>
        <h4 data-level="3.4.4" id="globals⑤"><span>3.4.4. </span><span>Globals</span><a href="#globals⑤"></a></h4>
        <p>Globals <span><span><span></span></span></span> are classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global types</span></a> of the form <span><span><span></span></span></span>.</p>
        <section id="xref-syntax-modules-syntax-global-mathsf-type-xref-syntax-types-syntax-mut-mathit-mut-t-xref-syntax-modules-syntax-global-mathsf-init-xref-syntax-instructions-syntax-expr-mathit-expr">
         <h5 data-level="3.4.4.1" id="--hrefsyntax-globalmathsftypehrefsyntax-mutmathitmutt-hrefsyntax-globalmathsfinithrefsyntax-exprmathitexpr"><span>3.4.4.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-globalmathsftypehrefsyntax-mutmathitmutt-hrefsyntax-globalmathsfinithrefsyntax-exprmathitexpr"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-globaltype"><span>valid</span></a>.</p>
          </li><li>
           <p>The expression <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-expr"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The expression <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a>.</p>
          </li><li>
           <p>Then the global definition is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="element-segments②">
         <span id="valid-elem"></span><span id="index-4⑥"></span>
        <h4 data-level="3.4.5" id="element-segments③"><span>3.4.5. </span><span>Element Segments</span><a href="#element-segments③"></a></h4>
        <p>Element segments <span><span><span></span></span></span> are classified by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> of their elements.</p>
        <section id="xref-syntax-modules-syntax-elem-mathsf-type-t-xref-syntax-modules-syntax-elem-mathsf-init-e-ast-xref-syntax-modules-syntax-elem-mathsf-mode-xref-syntax-modules-syntax-elemmode-mathit-elemmode">
         <h5 data-level="3.4.5.1" id="--hrefsyntax-elemmathsftypet-hrefsyntax-elemmathsfiniteast-hrefsyntax-elemmathsfmodehrefsyntax-elemmodemathitelemmode"><span>3.4.5.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-elemmathsftypet-hrefsyntax-elemmathsfiniteast-hrefsyntax-elemmathsfmodehrefsyntax-elemmodemathitelemmode"></a></h5>
         <ul>
          <li>
           <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>:</p>
           <ul>
            <li>
             <p>The expression <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-expr"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
            </li><li>
             <p>The expression <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a>.</p>
           </li></ul>
          </li><li>
           <p>The element mode <span><span><span></span></span></span> must be valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the element segment is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-elemmode-mathsf-passive">
          <span id="valid-elemmode"></span>
         <h5 data-level="3.4.5.2" id="-hrefsyntax-elemmodemathsfpassive"><span>3.4.5.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-elemmodemathsfpassive"></a></h5>
         <ul>
          <li>
           <p>The element mode is valid with any <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-elemmode-mathsf-active-xref-syntax-modules-syntax-elem-mathsf-table-x-xref-syntax-modules-syntax-elem-mathsf-offset-xref-syntax-instructions-syntax-expr-mathit-expr">
         <h5 data-level="3.4.5.3" id="-hrefsyntax-elemmodemathsfactive-hrefsyntax-elemmathsftablex-hrefsyntax-elemmathsfoffsethrefsyntax-exprmathitexpr"><span>3.4.5.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-elemmodemathsfactive-hrefsyntax-elemmathsftablex-hrefsyntax-elemmathsfoffsethrefsyntax-exprmathitexpr"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The expression <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-expr"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The expression <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a>.</p>
          </li><li>
           <p>Then the element mode is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-elemmode-mathsf-declarative">
         <h5 data-level="3.4.5.4" id="-hrefsyntax-elemmodemathsfdeclarative"><span>3.4.5.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-elemmodemathsfdeclarative"></a></h5>
         <ul>
          <li>
           <p>The element mode is valid with any <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="data-segments②">
         <span id="valid-data"></span><span id="index-5⑥"></span>
        <h4 data-level="3.4.6" id="data-segments③"><span>3.4.6. </span><span>Data Segments</span><a href="#data-segments③"></a></h4>
        <p>Data segments <span><span><span></span></span></span> are not classified by any type but merely checked for well-formedness.</p>
        <section id="xref-syntax-modules-syntax-data-mathsf-init-b-ast-xref-syntax-modules-syntax-data-mathsf-mode-xref-syntax-modules-syntax-datamode-mathit-datamode">
         <h5 data-level="3.4.6.1" id="--hrefsyntax-datamathsfinitbast-hrefsyntax-datamathsfmodehrefsyntax-datamodemathitdatamode"><span>3.4.6.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-datamathsfinitbast-hrefsyntax-datamathsfmodehrefsyntax-datamodemathitdatamode"></a></h5>
         <ul>
          <li>
           <p>The data mode <span><span><span></span></span></span> must be valid.</p>
          </li><li>
           <p>Then the data segment is valid.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-datamode-mathsf-passive">
          <span id="valid-datamode"></span>
         <h5 data-level="3.4.6.2" id="-hrefsyntax-datamodemathsfpassive"><span>3.4.6.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-datamodemathsfpassive"></a></h5>
         <ul>
          <li>
           <p>The data mode is valid.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-datamode-mathsf-active-xref-syntax-modules-syntax-data-mathsf-memory-x-xref-syntax-modules-syntax-data-mathsf-offset-xref-syntax-instructions-syntax-expr-mathit-expr">
         <h5 data-level="3.4.6.3" id="-hrefsyntax-datamodemathsfactive-hrefsyntax-datamathsfmemoryx-hrefsyntax-datamathsfoffsethrefsyntax-exprmathitexpr"><span>3.4.6.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-datamodemathsfactive-hrefsyntax-datamathsfmemoryx-hrefsyntax-datamathsfoffsethrefsyntax-exprmathitexpr"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The expression <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-expr"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>The expression <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant</span></a>.</p>
          </li><li>
           <p>Then the data mode is valid.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="start-function②">
         <span id="valid-start"></span><span id="index-6⑤"></span>
        <h4 data-level="3.4.7" id="start-function③"><span>3.4.7. </span><span>Start Function</span><a href="#start-function③"></a></h4>
        <p>Start function declarations <span><span><span></span></span></span> are not classified by any type.</p>
        <section id="xref-syntax-modules-syntax-start-mathsf-func-x">
         <h5 data-level="3.4.7.1" id="--hrefsyntax-startmathsffuncx"><span>3.4.7.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-startmathsffuncx"></a></h5>
         <ul>
          <li>
           <p>The function <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>The type of <span><span><span></span></span></span> must be <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the start function is valid.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="exports②">
         <span id="valid-export"></span><span id="valid-exportdesc"></span><span id="index-7⑤"></span>
        <h4 data-level="3.4.8" id="exports③"><span>3.4.8. </span><span>Exports</span><a href="#exports③"></a></h4>
        <p>Exports <span><span><span></span></span></span> and export descriptions <span><span><span></span></span></span> are classified by their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a>.</p>
        <section id="xref-syntax-modules-syntax-export-mathsf-name-xref-syntax-values-syntax-name-mathit-name-xref-syntax-modules-syntax-export-mathsf-desc-xref-syntax-modules-syntax-exportdesc-mathit-exportdesc">
         <h5 data-level="3.4.8.1" id="--hrefsyntax-exportmathsfnamehrefsyntax-namemathitname-hrefsyntax-exportmathsfdeschrefsyntax-exportdescmathitexportdesc"><span>3.4.8.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-exportmathsfnamehrefsyntax-namemathitname-hrefsyntax-exportmathsfdeschrefsyntax-exportdescmathitexportdesc"></a></h5>
         <ul>
          <li>
           <p>The export description <span><span><span></span></span></span> must be valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the export is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-exportdesc-mathsf-func-x">
         <h5 data-level="3.4.8.2" id="-hrefsyntax-exportdescmathsffuncx"><span>3.4.8.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-exportdescmathsffuncx"></a></h5>
         <ul>
          <li>
           <p>The function <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the export description is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-exportdesc-mathsf-table-x">
         <h5 data-level="3.4.8.3" id="-hrefsyntax-exportdescmathsftablex"><span>3.4.8.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-exportdescmathsftablex"></a></h5>
         <ul>
          <li>
           <p>The table <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the export description is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-exportdesc-mathsf-mem-x">
         <h5 data-level="3.4.8.4" id="-hrefsyntax-exportdescmathsfmemx"><span>3.4.8.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-exportdescmathsfmemx"></a></h5>
         <ul>
          <li>
           <p>The memory <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the export description is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-exportdesc-mathsf-global-x">
         <h5 data-level="3.4.8.5" id="-hrefsyntax-exportdescmathsfglobalx"><span>3.4.8.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-exportdescmathsfglobalx"></a></h5>
         <ul>
          <li>
           <p>The global <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Then the export description is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="imports②">
         <span id="valid-import"></span><span id="valid-importdesc"></span><span id="index-8⑤"></span>
        <h4 data-level="3.4.9" id="imports③"><span>3.4.9. </span><span>Imports</span><a href="#imports③"></a></h4>
        <p>Imports <span><span><span></span></span></span> and import descriptions <span><span><span></span></span></span> are classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a>.</p>
        <section id="xref-syntax-modules-syntax-import-mathsf-module-xref-syntax-values-syntax-name-mathit-name-1-xref-syntax-modules-syntax-import-mathsf-name-xref-syntax-values-syntax-name-mathit-name-2-xref-syntax-modules-syntax-import-mathsf-desc-xref-syntax-modules-syntax-importdesc-mathit-importdesc">
         <h5 data-level="3.4.9.1" id="--hrefsyntax-importmathsfmodulehrefsyntax-namemathitname_1-hrefsyntax-importmathsfnamehrefsyntax-namemathitname_2-hrefsyntax-importmathsfdeschrefsyntax-importdescmathitimportdesc"><span>3.4.9.1. </span><span><span><span><span></span></span></span></span><a href="#--hrefsyntax-importmathsfmodulehrefsyntax-namemathitname_1-hrefsyntax-importmathsfnamehrefsyntax-namemathitname_2-hrefsyntax-importmathsfdeschrefsyntax-importdescmathitimportdesc"></a></h5>
         <ul>
          <li>
           <p>The import description <span><span><span></span></span></span> must be valid with type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the import is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-importdesc-mathsf-func-x">
         <h5 data-level="3.4.9.2" id="-hrefsyntax-importdescmathsffuncx"><span>3.4.9.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-importdescmathsffuncx"></a></h5>
         <ul>
          <li>
           <p>The function <span><span><span></span></span></span> must be defined in the context.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the import description is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-importdesc-mathsf-table-xref-syntax-types-syntax-tabletype-mathit-tabletype">
         <h5 data-level="3.4.9.3" id="-hrefsyntax-importdescmathsftablehrefsyntax-tabletypemathittabletype"><span>3.4.9.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-importdescmathsftablehrefsyntax-tabletypemathittabletype"></a></h5>
         <ul>
          <li>
           <p>The table type <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-tabletype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the import description is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-importdesc-mathsf-mem-xref-syntax-types-syntax-memtype-mathit-memtype">
         <h5 data-level="3.4.9.4" id="-hrefsyntax-importdescmathsfmemhrefsyntax-memtypemathitmemtype"><span>3.4.9.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-importdescmathsfmemhrefsyntax-memtypemathitmemtype"></a></h5>
         <ul>
          <li>
           <p>The memory type <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memtype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the import description is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-syntax-modules-syntax-importdesc-mathsf-global-xref-syntax-types-syntax-globaltype-mathit-globaltype">
         <h5 data-level="3.4.9.5" id="-hrefsyntax-importdescmathsfglobalhrefsyntax-globaltypemathitglobaltype"><span>3.4.9.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-importdescmathsfglobalhrefsyntax-globaltypemathitglobaltype"></a></h5>
         <ul>
          <li>
           <p>The global type <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-globaltype"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the import description is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="valid-module">
         <span id="index-9⑤"></span><span id="id1⑧"></span>
        <h4 data-level="3.4.10" id="modules④"><span>3.4.10. </span><span>Modules</span><a href="#modules④"></a></h4>
        <p>Modules are classified by their mapping from the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> of their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a> to those of their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exports</span></a>.</p>
        <p>A module is entirely <em>closed</em>,
that is, its components can only refer to definitions that appear in the module itself.
Consequently, no initial <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> is required.
Instead, the context <span><span><span></span></span></span> for validation of the module’s content is constructed from the definitions in the module.</p>
        <ul>
         <li>
          <p>Let <span><span><span></span></span></span> be the module to validate.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be a <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> where:</p>
          <ul>
           <li>
            <p><span><span><span></span></span></span> is <span><span><span></span></span></span>,</p>
           </li><li>
            <p><span><span><span></span></span></span> is <span><span><span></span></span></span> concatenated with <span><span><span></span></span></span>,
with the import’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> <span><span><span></span></span></span> and the internal <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function types</span></a> <span><span><span></span></span></span> as determined below,</p>
           </li><li>
            <p><span><span><span></span></span></span> is <span><span><span></span></span></span> concatenated with <span><span><span></span></span></span>,
with the import’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> <span><span><span></span></span></span> and the internal <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table types</span></a> <span><span><span></span></span></span> as determined below,</p>
           </li><li>
            <p><span><span><span></span></span></span> is <span><span><span></span></span></span> concatenated with <span><span><span></span></span></span>,
with the import’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> <span><span><span></span></span></span> and the internal <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory types</span></a> <span><span><span></span></span></span> as determined below,</p>
           </li><li>
            <p><span><span><span></span></span></span> is <span><span><span></span></span></span> concatenated with <span><span><span></span></span></span>,
with the import’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> <span><span><span></span></span></span> and the internal <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global types</span></a> <span><span><span></span></span></span> as determined below,</p>
           </li><li>
            <p><span><span><span></span></span></span> is <span><span><span></span></span></span> as determined below,</p>
           </li><li>
            <p><span><span><span></span></span></span> is <span><span><span></span></span></span>, where <span><span><span></span></span></span> is the length of the vector <span><span><span></span></span></span>,</p>
           </li><li>
            <p><span><span><span></span></span></span> is empty,</p>
           </li><li>
            <p><span><span><span></span></span></span> is empty,</p>
           </li><li>
            <p><span><span><span></span></span></span> is empty.</p>
           </li><li>
            <p><span><span><span></span></span></span> is the set <span><span><span></span></span></span>, i.e., the set of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcidx"><span>function indices</span></a> occurring in the module, except in its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-start"><span>start function</span></a>.</p>
          </li></ul>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> as <span><span><span></span></span></span>, except that <span><span><span></span></span></span> is just the sequence <span><span><span></span></span></span>.</p>
         </li><li>
          <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-functype"><span>valid</span></a>.</p>
         </li><li>
          <p>Under the context <span><span><span></span></span></span>:</p>
          <ul>
           <li>
            <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the definition <span><span><span></span></span></span> must be <a href="#valid-table"><span>valid</span></a> with a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
           </li><li>
            <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the definition <span><span><span></span></span></span> must be <a href="#valid-mem"><span>valid</span></a> with a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span>.</p>
           </li><li>
            <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the definition <span><span><span></span></span></span> must be <a href="#valid-global"><span>valid</span></a> with a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span>.</p>
           </li><li>
            <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the segment <span><span><span></span></span></span> must be <a href="#valid-elem"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
           </li><li>
            <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the segment <span><span><span></span></span></span> must be <a href="#valid-data"><span>valid</span></a>.</p>
          </li></ul>
         </li><li>
          <p>Under the context <span><span><span></span></span></span>:</p>
          <ul>
           <li>
            <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the definition <span><span><span></span></span></span> must be <a href="#valid-func"><span>valid</span></a> with a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
           </li><li>
            <p>If <span><span><span></span></span></span> is non-empty,
then <span><span><span></span></span></span> must be <a href="#valid-start"><span>valid</span></a>.</p>
           </li><li>
            <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the segment <span><span><span></span></span></span> must be <a href="#valid-import"><span>valid</span></a> with an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
           </li><li>
            <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span>,
the segment <span><span><span></span></span></span> must be <a href="#valid-export"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
          </li></ul>
         </li><li>
          <p>The length of <span><span><span></span></span></span> must not be larger than <span><span><span></span></span></span>.</p>
         </li><li>
          <p>All export names <span><span><span></span></span></span> must be different.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the concatenation of the internal <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function types</span></a> <span><span><span></span></span></span>, in index order.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the concatenation of the internal <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table types</span></a> <span><span><span></span></span></span>, in index order.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the concatenation of the internal <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory types</span></a> <span><span><span></span></span></span>, in index order.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the concatenation of the internal <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global types</span></a> <span><span><span></span></span></span>, in index order.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the concatenation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference types</span></a> <span><span><span></span></span></span>, in index order.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the concatenation of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> <span><span><span></span></span></span> of the imports, in index order.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the concatenation of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> <span><span><span></span></span></span> of the exports, in index order.</p>
         </li><li>
          <p>Then the module is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> <span><span><span></span></span></span>.</p>
        </li></ul>
        
        <div role="note">
         <p>Note</p>
         <p>Most definitions in a module – particularly functions – are mutually recursive.
Consequently, the definition of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span> in this rule is recursive:
it depends on the outcome of validation of the function, table, memory, and global definitions contained in the module,
which itself depends on <span><span><span></span></span></span>.
However, this recursion is just a specification device.
All types needed to construct <span><span><span></span></span></span> can easily be determined from a simple pre-pass over the module that does not perform any actual validation.</p>
         <p>Globals, however, are not recursive and not accessible within <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-const"><span>constant expressions</span></a> when they are defined locally.
The effect of defining the limited context <span><span><span></span></span></span> for validating certain definitions is that they can only access functions and imported globals and nothing else.</p>
        </div>
        <div role="note">
         <p>Note</p>
         <p>The restriction on the number of memories may be lifted in future versions of WebAssembly.</p>
        </div>
       </section>
      </section>
     </div>
    </section>
     <section id="execution①">
      <span id="exec"></span>
     <h2 data-level="4" id="execution②"><span>4. </span><span>Execution</span><a href="#execution②"></a></h2>
     <div>
       <section id="conventions①⑨">
        <span id="index-0①①"></span>
       <h3 data-level="4.1" id="conventions②⓪"><span>4.1. </span><span>Conventions</span><a href="#conventions②⓪"></a></h3>
       <p>WebAssembly code is <em>executed</em> when <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiating</span></a> a module or <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invocation"><span>invoking</span></a> an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exported</span></a> function on the resulting module <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>instance</span></a>.</p>
       <p>Execution behavior is defined in terms of an <em>abstract machine</em> that models the <em>program state</em>.
It includes a <em>stack</em>, which records operand values and control constructs, and an abstract <em>store</em> containing global state.</p>
       <p>For each instruction, there is a rule that specifies the effect of its execution on the program state.
Furthermore, there are rules describing the instantiation of a module.
As with <a href="https://www.w3.org/TR/wasm-core-2/index.html#validation"><span>validation</span></a>, all rules are given in two <em>equivalent</em> forms:</p>
       <ol>
        <li>
         <p>In <em>prose</em>, describing the execution in intuitive form.</p>
        </li><li>
         <p>In <em>formal notation</em>, describing the rule in mathematical form. <a href="#cite-pldi2017" id="id1⑨" role="doc-noteref"><span>[</span>1<span>]</span></a></p>
       </li></ol>
       <div role="note">
        <p>Note</p>
        <p>As with validation, the prose and formal rules are equivalent,
so that understanding of the formal notation is <em>not</em> required to read this specification.
The formalism offers a more concise description in notation that is used widely in programming languages semantics and is readily amenable to mathematical proof.</p>
       </div>
       <section id="prose-notation②">
         <span id="exec-notation-textual"></span>
        <h4 data-level="4.1.1" id="prose-notation③"><span>4.1.1. </span><span>Prose Notation</span><a href="#prose-notation③"></a></h4>
        <p>Execution is specified by stylised, step-wise rules for each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instruction</span></a> of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax"><span>abstract syntax</span></a>.
The following conventions are adopted in stating these rules.</p>
        <ul>
         <li>
          <p>The execution rules implicitly assume a given <a href="https://www.w3.org/TR/wasm-core-2/index.html#store"><span>store</span></a> <span><span><span></span></span></span>.</p>
         </li><li>
          <p>The execution rules also assume the presence of an implicit <a href="https://www.w3.org/TR/wasm-core-2/index.html#stack"><span>stack</span></a> that is modified by <em>pushing</em> or <em>popping</em> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-value"><span>values</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-label"><span>labels</span></a>, and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frames</span></a>.</p>
         </li><li>
          <p>Certain rules require the stack to contain at least one frame.
The most recent frame is referred to as the <em>current</em> frame.</p>
         </li><li>
          <p>Both the store and the current frame are mutated by <em>replacing</em> some of their components.
Such replacement is assumed to apply globally.</p>
         </li><li>
          <p>The execution of an instruction may <em>trap</em>,
in which case the entire computation is aborted and no further modifications to the store are performed by it. (Other computations can still be initiated afterwards.)</p>
         </li><li>
          <p>The execution of an instruction may also end in a <em>jump</em> to a designated target,
which defines the next instruction to execute.</p>
         </li><li>
          <p>Execution can <em>enter</em> and <em>exit</em> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-seq"><span>instruction sequences</span></a> that form <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>blocks</span></a>.</p>
         </li><li>
          <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-seq"><span>Instruction sequences</span></a> are implicitly executed in order, unless a trap or jump occurs.</p>
         </li><li>
          <p>In various places the rules contain <em>assertions</em> expressing crucial invariants about the program state.</p>
        </li></ul>
       </section>
       <section id="formal-notation②">
         <span id="exec-notation"></span><span id="index-1①①"></span>
        <h4 data-level="4.1.2" id="formal-notation③"><span>4.1.2. </span><span>Formal Notation</span><a href="#formal-notation③"></a></h4>
        <div role="note">
         <p>Note</p>
         <p>This section gives a brief explanation of the notation for specifying execution formally.
For the interested reader, a more thorough introduction can be found in respective text books. <a href="#cite-tapl" id="id2⑤" role="doc-noteref"><span>[</span>2<span>]</span></a></p>
        </div>
        <p>The formal execution rules use a standard approach for specifying operational semantics, rendering them into <em>reduction rules</em>.
Every rule has the following general form:</p>
        
        <p>A <em>configuration</em> is a syntactic description of a program state.
Each rule specifies one <em>step</em> of execution.
As long as there is at most one reduction rule applicable to a given configuration, reduction – and thereby execution – is <em>deterministic</em>.
WebAssembly has only very few exceptions to this, which are noted explicitly in this specification.</p>
        <p>For WebAssembly, a configuration typically is a tuple <span><span><span></span></span></span> consisting of the current <a href="https://www.w3.org/TR/wasm-core-2/index.html#store"><span>store</span></a> <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#frame"><span>call frame</span></a> <span><span><span></span></span></span> of the current function, and the sequence of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a> that is to be executed.
(A more precise definition is given <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-config"><span>later</span></a>.)</p>
        <p>To avoid unnecessary clutter, the store <span><span><span></span></span></span> and the frame <span><span><span></span></span></span> are omitted from reduction rules that do not touch them.</p>
        <p>There is no separate representation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#stack"><span>stack</span></a>.
Instead, it is conveniently represented as part of the configuration’s instruction sequence.
In particular, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> are defined to coincide with <span><span><span></span></span></span> instructions,
and a sequence of <span><span><span></span></span></span> instructions can be interpreted as an operand “stack” that grows to the right.</p>
        <div role="note">
         <p>Note</p>
         <p>For example, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-binop"><span>reduction rule</span></a> for the <span><span><span></span></span></span> instruction can be given as follows:</p>
         
         <p>Per this rule, two <span><span><span></span></span></span> instructions and the <span><span><span></span></span></span> instruction itself are removed from the instruction stream and replaced with one new <span><span><span></span></span></span> instruction.
This can be interpreted as popping two values off the stack and pushing the result.</p>
         <p>When no result is produced, an instruction reduces to the empty sequence:</p>
         
        </div>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#label"><span>Labels</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#frame"><span>frames</span></a> are similarly <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-admin"><span>defined</span></a> to be part of an instruction sequence.</p>
        <p>The order of reduction is determined by the definition of an appropriate <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ctxt-eval"><span>evaluation context</span></a>.</p>
        <p>Reduction <em>terminates</em> when no more reduction rules are applicable. <a href="https://www.w3.org/TR/wasm-core-2/index.html#soundness"><span>Soundness</span></a> of the WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#type-system"><span>type system</span></a> guarantees that this is only the case when the original instruction sequence has either been reduced to a sequence of <span><span><span></span></span></span> instructions, which can be interpreted as the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> of the resulting operand stack,
or if a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-trap"><span>trap</span></a> occurred.</p>
        <div role="note">
         <p>Note</p>
         <p>For example, the following instruction sequence,</p>
         
         <p>terminates after three steps:</p>
         
         <p>where <span><span><span></span></span></span> and <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
        </div>
        
       </section>
      </section>
       <section id="runtime-structure">
        <span id="syntax-runtime"></span><span id="index-0①②"></span>
       <h3 data-level="4.2" id="runtime-structure①"><span>4.2. </span><span>Runtime Structure</span><a href="#runtime-structure①"></a></h3>
       <p><a href="#store"><span>Store</span></a>, <a href="#stack"><span>stack</span></a>, and other <em>runtime structure</em> forming the WebAssembly abstract machine, such as <a href="#syntax-val"><span>values</span></a> or <a href="#syntax-moduleinst"><span>module instances</span></a>, are made precise in terms of additional auxiliary syntax.</p>
       <section id="values②">
         <span id="syntax-val"></span><span id="syntax-ref-extern"></span><span id="syntax-ref"></span><span id="syntax-vecc"></span><span id="syntax-num"></span><span id="index-1①②"></span>
        <h4 data-level="4.2.1" id="values③"><span>4.2.1. </span><span>Values</span><a href="#values③"></a></h4>
        <p>WebAssembly computations manipulate <em>values</em> of either the four basic <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number types</span></a>, i.e., <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-int"><span>integers</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>floating-point data</span></a> of 32 or 64 bit width each, or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vecnum"><span>vectors</span></a> of 128 bit width, or of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a>.</p>
        <p>In most places of the semantics, values of different types can occur.
In order to avoid ambiguities, values are therefore represented with an abstract syntax that makes their type explicit.
It is convenient to reuse the same notation as for the <span><span><span></span></span></span> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-const"><span>instructions</span></a> and <span><span><span></span></span></span> producing them.</p>
        <p>References other than null are represented with additional <a href="#syntax-instr-admin"><span>administrative instructions</span></a>.
They either are <em>function references</em>, pointing to a specific <a href="#syntax-funcaddr"><span>function address</span></a>,
or <em>external references</em> pointing to an uninterpreted form of <a href="#syntax-externaddr"><span>extern address</span></a> that can be defined by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> to represent its own objects.</p>
        
        <div role="note">
         <p>Note</p>
         <p>Future versions of WebAssembly may add additional forms of reference.</p>
        </div>
        <p id="default-val">Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> has an associated <em>default value</em>;
it is the respective value <span><span><span></span></span></span> for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number types</span></a>, <span><span><span></span></span></span> for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vectype"><span>vector types</span></a>, and null for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference types</span></a>.</p>
        
        <section id="convention②">
         <h5 data-level="4.2.1.1" id="convention③"><span>4.2.1.1. </span><span>Convention</span><a href="#convention③"></a></h5>
         <ul>
          <li>
           <p>The meta variable <span><span><span></span></span></span> ranges over reference values where clear from context.</p>
         </li></ul>
        </section>
       </section>
       <section id="results">
         <span id="syntax-result"></span><span id="index-2①⓪"></span>
        <h4 data-level="4.2.2" id="results①"><span>4.2.2. </span><span>Results</span><a href="#results①"></a></h4>
        <p>A <em>result</em> is the outcome of a computation.
It is either a sequence of <a href="#syntax-val"><span>values</span></a> or a <a href="#syntax-trap"><span>trap</span></a>.</p>
        
       </section>
       <section id="store">
         <span id="syntax-store"></span><span id="index-3⑦"></span><span id="id1①⓪"></span>
        <h4 data-level="4.2.3" id="store①"><span>4.2.3. </span><span>Store</span><a href="#store①"></a></h4>
        <p>The <em>store</em> represents all global state that can be manipulated by WebAssembly programs.
It consists of the runtime representation of all <em>instances</em> of <a href="#syntax-funcinst"><span>functions</span></a>, <a href="#syntax-tableinst"><span>tables</span></a>, <a href="#syntax-meminst"><span>memories</span></a>, and <a href="#syntax-globalinst"><span>globals</span></a>, <a href="#syntax-eleminst"><span>element segments</span></a>, and <a href="#syntax-datainst"><span>data segments</span></a> that have been <a href="https://www.w3.org/TR/wasm-core-2/index.html#alloc"><span>allocated</span></a> during the life time of the abstract machine. <a href="#gc" id="id2⑥" role="doc-noteref"><span>[</span>1<span>]</span></a></p>
        <p>It is an invariant of the semantics that no element or data instance is <a href="#syntax-addr"><span>addressed</span></a> from anywhere else but the owning module instances.</p>
        <p>Syntactically, the store is defined as a <a href="https://www.w3.org/TR/wasm-core-2/index.html#notation-record"><span>record</span></a> listing the existing instances of each category:</p>
        
        
        <section id="id3②">
         <h5 data-level="4.2.3.1" id="convention④"><span>4.2.3.1. </span><span>Convention</span><a href="#convention④"></a></h5>
         <ul>
          <li>
           <p>The meta variable <span><span><span></span></span></span> ranges over stores where clear from context.</p>
         </li></ul>
        </section>
       </section>
       <section id="addresses">
         <span id="syntax-addr"></span><span id="syntax-externaddr"></span><span id="syntax-dataaddr"></span><span id="syntax-elemaddr"></span><span id="syntax-globaladdr"></span><span id="syntax-memaddr"></span><span id="syntax-tableaddr"></span><span id="syntax-funcaddr"></span><span id="index-4⑦"></span>
        <h4 data-level="4.2.4" id="addresses①"><span>4.2.4. </span><span>Addresses</span><a href="#addresses①"></a></h4>
        <p><a href="#syntax-funcinst"><span>Function instances</span></a>, <a href="#syntax-tableinst"><span>table instances</span></a>, <a href="#syntax-meminst"><span>memory instances</span></a>, and <a href="#syntax-globalinst"><span>global instances</span></a>, <a href="#syntax-eleminst"><span>element instances</span></a>, and <a href="#syntax-datainst"><span>data instances</span></a> in the <a href="#syntax-store"><span>store</span></a> are referenced with abstract <em>addresses</em>.
These are simply indices into the respective store component.
In addition, an <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> may supply an uninterpreted set of <em>host addresses</em>.</p>
        
        <p>An <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> may assign identity to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exported</span></a> store objects corresponding to their addresses,
even where this identity is not observable from within WebAssembly code itself
(such as for <a href="#syntax-funcinst"><span>function instances</span></a> or immutable <a href="#syntax-globalinst"><span>globals</span></a>).</p>
        <div role="note">
         <p>Note</p>
         <p>Addresses are <em>dynamic</em>, globally unique references to runtime objects,
in contrast to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>indices</span></a>,
which are <em>static</em>, module-local references to their original definitions.
A <em>memory address</em> <span><span><span></span></span></span> denotes the abstract address <em>of</em> a memory <em>instance</em> in the store,
not an offset <em>inside</em> a memory instance.</p>
         <p>There is no specific limit on the number of allocations of store objects,
hence logical addresses can be arbitrarily large natural numbers.</p>
        </div>
       </section>
       <section id="module-instances">
         <span id="syntax-moduleinst"></span><span id="index-5⑦"></span>
        <h4 data-level="4.2.5" id="module-instances①"><span>4.2.5. </span><span>Module Instances</span><a href="#module-instances①"></a></h4>
        <p>A <em>module instance</em> is the runtime representation of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.
It is created by <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiating</span></a> a module,
and collects runtime representations of all entities that are imported, defined, or exported by the module.</p>
        
        <p>Each component references runtime instances corresponding to respective declarations from the original module – whether imported or defined – in the order of their static <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>indices</span></a>. <a href="#syntax-funcinst"><span>Function instances</span></a>, <a href="#syntax-tableinst"><span>table instances</span></a>, <a href="#syntax-meminst"><span>memory instances</span></a>, and <a href="#syntax-globalinst"><span>global instances</span></a> are referenced with an indirection through their respective <a href="#syntax-addr"><span>addresses</span></a> in the <a href="#syntax-store"><span>store</span></a>.</p>
        <p>It is an invariant of the semantics that all <a href="#syntax-exportinst"><span>export instances</span></a> in a given module instance have different <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>names</span></a>.</p>
       </section>
       <section id="function-instances">
         <span id="syntax-funcinst"></span><span id="syntax-hostfunc"></span><span id="index-6⑥"></span>
        <h4 data-level="4.2.6" id="function-instances①"><span>4.2.6. </span><span>Function Instances</span><a href="#function-instances①"></a></h4>
        <p>A <em>function instance</em> is the runtime representation of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a>.
It effectively is a <em>closure</em> of the original function over the runtime <a href="#syntax-moduleinst"><span>module instance</span></a> of its originating <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.
The module instance is used to resolve references to other definitions during execution of the function.</p>
        
        <p>A <em>host function</em> is a function expressed outside WebAssembly but passed to a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> as an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>import</span></a>.
The definition and behavior of host functions are outside the scope of this specification.
For the purpose of this specification, it is assumed that when <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invoke-host"><span>invoked</span></a>,
a host function behaves non-deterministically,
but within certain <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invoke-host"><span>constraints</span></a> that ensure the integrity of the runtime.</p>
        <div role="note">
         <p>Note</p>
         <p>Function instances are immutable, and their identity is not observable by WebAssembly code.
However, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> might provide implicit or explicit means for distinguishing their <a href="#syntax-funcaddr"><span>addresses</span></a>.</p>
        </div>
       </section>
       <section id="table-instances">
         <span id="syntax-tableinst"></span><span id="index-7⑥"></span>
        <h4 data-level="4.2.7" id="table-instances①"><span>4.2.7. </span><span>Table Instances</span><a href="#table-instances①"></a></h4>
        <p>A <em>table instance</em> is the runtime representation of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>table</span></a>.
It records its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>type</span></a> and holds a vector of <a href="#syntax-ref"><span>reference values</span></a>.</p>
        
        <p>Table elements can be mutated through <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-table"><span>table instructions</span></a>, the execution of an active <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a>, or by external means provided by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a>.</p>
        <p>It is an invariant of the semantics that all table elements have a type equal to the element type of <span><span><span></span></span></span>.
It also is an invariant that the length of the element vector never exceeds the maximum size of <span><span><span></span></span></span>, if present.</p>
       </section>
       <section id="memory-instances">
         <span id="syntax-meminst"></span><span id="page-size"></span><span id="index-8⑥"></span>
        <h4 data-level="4.2.8" id="memory-instances①"><span>4.2.8. </span><span>Memory Instances</span><a href="#memory-instances①"></a></h4>
        <p>A <em>memory instance</em> is the runtime representation of a linear <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memory</span></a>.
It records its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>type</span></a> and holds a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a>.</p>
        
        <p>The length of the vector always is a multiple of the WebAssembly <em>page size</em>, which is defined to be the constant <span><span><span></span></span></span> – abbreviated <span><span><span></span></span></span>.</p>
        <p>The bytes can be mutated through <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-memory"><span>memory instructions</span></a>, the execution of an active <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segment</span></a>, or by external means provided by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a>.</p>
        <p>It is an invariant of the semantics that the length of the byte vector, divided by page size, never exceeds the maximum size of <span><span><span></span></span></span>, if present.</p>
       </section>
       <section id="global-instances">
         <span id="syntax-globalinst"></span><span id="index-9⑥"></span>
        <h4 data-level="4.2.9" id="global-instances①"><span>4.2.9. </span><span>Global Instances</span><a href="#global-instances①"></a></h4>
        <p>A <em>global instance</em> is the runtime representation of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a> variable.
It records its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>type</span></a> and holds an individual <a href="#syntax-val"><span>value</span></a>.</p>
        
        <p>The value of mutable globals can be mutated through <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-variable"><span>variable instructions</span></a> or by external means provided by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a>.</p>
        <p>It is an invariant of the semantics that the value has a type equal to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> of <span><span><span></span></span></span>.</p>
       </section>
       <section id="element-instances">
         <span id="syntax-eleminst"></span><span id="index-10④"></span>
        <h4 data-level="4.2.10" id="element-instances①"><span>4.2.10. </span><span>Element Instances</span><a href="#element-instances①"></a></h4>
        <p>An <em>element instance</em> is the runtime representation of an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a>.
It holds a vector of references and their common <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>type</span></a>.</p>
        
       </section>
       <section id="data-instances">
         <span id="syntax-datainst"></span><span id="index-11④"></span>
        <h4 data-level="4.2.11" id="data-instances①"><span>4.2.11. </span><span>Data Instances</span><a href="#data-instances①"></a></h4>
        <p>An <em>data instance</em> is the runtime representation of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segment</span></a>.
It holds a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a>.</p>
        
       </section>
       <section id="export-instances">
         <span id="syntax-exportinst"></span><span id="index-12①"></span>
        <h4 data-level="4.2.12" id="export-instances①"><span>4.2.12. </span><span>Export Instances</span><a href="#export-instances①"></a></h4>
        <p>An <em>export instance</em> is the runtime representation of an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>export</span></a>.
It defines the export’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>name</span></a> and the associated <a href="#syntax-externval"><span>external value</span></a>.</p>
        
       </section>
       <section id="external-values">
         <span id="syntax-externval"></span><span id="index-13"></span>
        <h4 data-level="4.2.13" id="external-values①"><span>4.2.13. </span><span>External Values</span><a href="#external-values①"></a></h4>
        <p>An <em>external value</em> is the runtime representation of an entity that can be imported or exported.
It is an <a href="#syntax-addr"><span>address</span></a> denoting either a <a href="#syntax-funcinst"><span>function instance</span></a>, <a href="#syntax-tableinst"><span>table instance</span></a>, <a href="#syntax-meminst"><span>memory instance</span></a>, or <a href="#syntax-globalinst"><span>global instances</span></a> in the shared <a href="#syntax-store"><span>store</span></a>.</p>
        
        <section id="conventions②①">
         <h5 data-level="4.2.13.1" id="conventions②②"><span>4.2.13.1. </span><span>Conventions</span><a href="#conventions②②"></a></h5>
         <p>The following auxiliary notation is defined for sequences of external values.
It filters out entries of a specific kind in an order-preserving fashion:</p>
         <ul>
          <li>
           
          </li><li>
           
          </li><li>
           
          </li><li>
           
         </li></ul>
        </section>
       </section>
       <section id="stack">
         <span id="label"></span><span id="frame"></span><span id="syntax-label"></span><span id="syntax-framestate"></span><span id="syntax-frame"></span><span id="index-14"></span><span id="id4①"></span>
        <h4 data-level="4.2.14" id="stack①"><span>4.2.14. </span><span>Stack</span><a href="#stack①"></a></h4>
        <p>Besides the <a href="#store"><span>store</span></a>, most <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a> interact with an implicit <em>stack</em>.
The stack contains three kinds of entries:</p>
        <ul>
         <li>
          <p><em>Values</em>: the <em>operands</em> of instructions.</p>
         </li><li>
          <p><em>Labels</em>: active <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured control instructions</span></a> that can be targeted by branches.</p>
         </li><li>
          <p><em>Activations</em>: the <em>call frames</em> of active <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a> calls.</p>
        </li></ul>
        <p>These entries can occur on the stack in any order during the execution of a program.
Stack entries are described by abstract syntax as follows.</p>
        <div role="note">
         <p>Note</p>
         <p>It is possible to model the WebAssembly semantics using separate stacks for operands, control constructs, and calls.
However, because the stacks are interdependent, additional book keeping about associated stack heights would be required.
For the purpose of this specification, an interleaved representation is simpler.</p>
        </div>
        <section id="id5">
         <h5 data-level="4.2.14.1" id="values④"><span>4.2.14.1. </span><span>Values</span><a href="#values④"></a></h5>
         <p>Values are represented by <a href="#syntax-val"><span>themselves</span></a>.</p>
        </section>
        <section id="labels">
         <h5 data-level="4.2.14.2" id="labels①"><span>4.2.14.2. </span><span>Labels</span><a href="#labels①"></a></h5>
         <p>Labels carry an argument arity <span><span><span></span></span></span> and their associated branch <em>target</em>, which is expressed syntactically as an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instruction</span></a> sequence:</p>
         
         <p>Intuitively, <span><span><span></span></span></span> is the <em>continuation</em> to execute when the branch is taken, in place of the original control construct.</p>
         <div role="note">
          <p>Note</p>
          <p>For example, a loop label has the form</p>
          
          <p>When performing a branch to this label, this executes the loop, effectively restarting it from the beginning.
Conversely, a simple block label has the form</p>
          
          <p>When branching, the empty continuation ends the targeted block, such that execution can proceed with consecutive instructions.</p>
         </div>
        </section>
        <section id="activation-frames">
         <h5 data-level="4.2.14.3" id="activation-frames①"><span>4.2.14.3. </span><span>Activation Frames</span><a href="#activation-frames①"></a></h5>
         <p>Activation frames carry the return arity <span><span><span></span></span></span> of the respective function,
hold the values of its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-local"><span>locals</span></a> (including arguments) in the order corresponding to their static <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-localidx"><span>local indices</span></a>,
and a reference to the function’s own <a href="#syntax-moduleinst"><span>module instance</span></a>:</p>
         
         <p>The values of the locals are mutated by respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-variable"><span>variable instructions</span></a>.</p>
        </section>
        <section id="exec-expand">
          <span id="id6"></span>
         <h5 data-level="4.2.14.4" id="conventions②③"><span>4.2.14.4. </span><span>Conventions</span><a href="#conventions②③"></a></h5>
         <ul>
          <li>
           <p>The meta variable <span><span><span></span></span></span> ranges over labels where clear from context.</p>
          </li><li>
           <p>The meta variable <span><span><span></span></span></span> ranges over frame states where clear from context.</p>
          </li><li>
           <p>The following auxiliary definition takes a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block type</span></a> and looks up the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> that it denotes in the current frame:</p>
         </li></ul>
         
        </section>
       </section>
       <section id="administrative-instructions">
         <span id="syntax-instr-admin"></span><span id="syntax-invoke"></span><span id="syntax-reffuncaddr"></span><span id="syntax-trap"></span><span id="index-15"></span>
        <h4 data-level="4.2.15" id="administrative-instructions①"><span>4.2.15. </span><span>Administrative Instructions</span><a href="#administrative-instructions①"></a></h4>
        
        <p>In order to express the reduction of <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>traps</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-call"><span>calls</span></a>, and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>control instructions</span></a>, the syntax of instructions is extended to include the following <em>administrative instructions</em>:</p>
        
        <p>The <span><span><span></span></span></span> instruction represents the occurrence of a trap.
Traps are bubbled up through nested instruction sequences, ultimately reducing the entire program to a single <span><span><span></span></span></span> instruction, signalling abrupt termination.</p>
        <p>The <span><span><span></span></span></span> instruction represents <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref-func"><span>function reference values</span></a>. Similarly, <span><span><span></span></span></span> represents <a href="#syntax-ref-extern"><span>external references</span></a>.</p>
        <p>The <span><span><span></span></span></span> instruction represents the imminent invocation of a <a href="#syntax-funcinst"><span>function instance</span></a>, identified by its <a href="#syntax-funcaddr"><span>address</span></a>.
It unifies the handling of different forms of calls.</p>
        <p>The <span><span><span></span></span></span> and <span><span><span></span></span></span> instructions model <a href="#syntax-label"><span>labels</span></a> and <a href="#syntax-frame"><span>frames</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation"><span>“on the stack”</span></a>.
Moreover, the administrative syntax maintains the nesting structure of the original <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured control instruction</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function body</span></a> and their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-seq"><span>instruction sequences</span></a> with an <span><span><span></span></span></span> marker.
That way, the end of the inner instruction sequence is known when part of an outer sequence.</p>
        <div role="note">
         <p>Note</p>
         <p>For example, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-block"><span>reduction rule</span></a> for <span><span><span></span></span></span> is:</p>
         
         <p>This replaces the block with a label instruction,
which can be interpreted as “pushing” the label on the stack.
When <span><span><span></span></span></span> is reached, i.e., the inner instruction sequence has been reduced to the empty sequence – or rather, a sequence of <span><span><span></span></span></span> <span><span><span></span></span></span> instructions representing the resulting values – then the <span><span><span></span></span></span> instruction is eliminated courtesy of its own <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-label"><span>reduction rule</span></a>:</p>
         
         <p>This can be interpreted as removing the label from the stack and only leaving the locally accumulated operand values.</p>
        </div>
        <section id="block-contexts">
          <span id="syntax-ctxt-block"></span><span id="index-16"></span>
         <h5 data-level="4.2.15.1" id="block-contexts①"><span>4.2.15.1. </span><span>Block Contexts</span><a href="#block-contexts①"></a></h5>
         <p>In order to specify the reduction of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>branches</span></a>, the following syntax of <em>block contexts</em> is defined, indexed by the count <span><span><span></span></span></span> of labels surrounding a <em>hole</em> <span><span><span></span></span></span> that marks the place where the next step of computation is taking place:</p>
         
         <p>This definition allows to index active labels surrounding a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-br"><span>branch</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-return"><span>return</span></a> instruction.</p>
         <div role="note">
          <p>Note</p>
          <p>For example, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-br"><span>reduction</span></a> of a simple branch can be defined as follows:</p>
          
          <p>Here, the hole <span><span><span></span></span></span> of the context is instantiated with a branch instruction.
When a branch occurs,
this rule replaces the targeted label and associated instruction sequence with the label’s continuation.
The selected label is identified through the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-labelidx"><span>label index</span></a> <span><span><span></span></span></span>, which corresponds to the number of surrounding <span><span><span></span></span></span> instructions that must be hopped over – which is exactly the count encoded in the index of a block context.</p>
         </div>
        </section>
        <section id="configurations">
          <span id="syntax-config"></span><span id="syntax-thread"></span><span id="index-17"></span>
         <h5 data-level="4.2.15.2" id="configurations①"><span>4.2.15.2. </span><span>Configurations</span><a href="#configurations①"></a></h5>
         <p>A <em>configuration</em> consists of the current <a href="#syntax-store"><span>store</span></a> and an executing <em>thread</em>.</p>
         <p>A thread is a computation over <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a> that operates relative to the state of a current <a href="#syntax-framestate"><span>frame</span></a> referring to the <a href="#syntax-moduleinst"><span>module instance</span></a> in which the computation runs, i.e., where the current function originates from.</p>
         
         <div role="note">
          <p>Note</p>
          <p>The current version of WebAssembly is single-threaded,
but configurations with multiple threads may be supported in the future.</p>
         </div>
        </section>
        <section id="evaluation-contexts">
          <span id="syntax-ctxt-eval"></span><span id="index-18"></span>
         <h5 data-level="4.2.15.3" id="evaluation-contexts①"><span>4.2.15.3. </span><span>Evaluation Contexts</span><a href="#evaluation-contexts①"></a></h5>
         <p>Finally, the following definition of <em>evaluation context</em> and associated structural rules enable reduction inside instruction sequences and administrative forms as well as the propagation of traps:</p>
         
         
         <p>Reduction terminates when a thread’s instruction sequence has been reduced to a <a href="#syntax-result"><span>result</span></a>,
that is, either a sequence of <a href="#syntax-val"><span>values</span></a> or to a <span><span><span></span></span></span>.</p>
         <div role="note">
          <p>Note</p>
          <p>The restriction on evaluation contexts rules out contexts like <span><span><span></span></span></span> and <span><span><span></span></span></span> for which <span><span><span></span></span></span>.</p>
          <p>For an example of reduction under evaluation contexts, consider the following instruction sequence.</p>
          
          <p>This can be decomposed into <span><span><span></span></span></span> where</p>
          
          <p>Moreover, this is the <em>only</em> possible choice of evaluation context where the contents of the hole matches the left-hand side of a reduction rule.</p>
         </div>
        </section>
       </section>
      </section>
       <section id="numerics">
        <span id="exec-numeric"></span><span id="exec-op-partial"></span><span id="index-0①③"></span>
       <h3 data-level="4.3" id="numerics①"><span>4.3. </span><span>Numerics</span><a href="#numerics①"></a></h3>
       <p>Numeric primitives are defined in a generic manner, by operators indexed over a bit width <span><span><span></span></span></span>.</p>
       <p>Some operators are <em>non-deterministic</em>, because they can return one of several possible results (such as different <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-nan"><span>NaN</span></a> values).
Technically, each operator thus returns a <em>set</em> of allowed values.
For convenience, deterministic results are expressed as plain values, which are assumed to be identified with a respective singleton set.</p>
       <p>Some operators are <em>partial</em>, because they are not defined on certain inputs.
Technically, an empty set of results is returned for these inputs.</p>
       <p>In formal notation, each operator is defined by equational clauses that apply in decreasing order of precedence.
That is, the first clause that is applicable to the given arguments defines the result.
In some cases, similar clauses are combined into one by using the notation <span><span><span></span></span></span> or <span><span><span></span></span></span>.
When several of these placeholders occur in a single clause, then they must be resolved consistently: either the upper sign is chosen for all of them or the lower sign.</p>
       <div role="note">
        <p>Note</p>
        <p>For example, the <span><span><span></span></span></span> operator is defined as follows:</p>
        
        <p>This definition is to be read as a shorthand for the following expansion of each clause into two separate ones:</p>
        
       </div>
       <p>Numeric operators are lifted to input sequences by applying the operator element-wise, returning a sequence of results. When there are multiple inputs, they must be of equal length.</p>
       
       <div role="note">
        <p>Note</p>
        <p>For example, the unary operator <span><span><span></span></span></span>, when given a sequence of floating-point values, return a sequence of floating-point results:</p>
        
        <p>The binary operator <span><span><span></span></span></span>, when given two sequences of integers of the same length, <span><span><span></span></span></span>, return a sequence of integer results:</p>
        
       </div>
       <p id="aux-trunc">Conventions:</p>
       <ul>
        <li>
         <p>The meta variable <span><span><span></span></span></span> is used to range over single bits.</p>
        </li><li>
         <p>The meta variable <span><span><span></span></span></span> is used to range over (signless) <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>magnitudes</span></a> of floating-point values, including <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
        </li><li>
         <p>The meta variable <span><span><span></span></span></span> is used to range over (signless) <em>rational</em> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>magnitudes</span></a>, excluding <span><span><span></span></span></span> or <span><span><span></span></span></span>.</p>
        </li><li>
         <p>The notation <span><span><span></span></span></span> denotes the inverse of a bijective function <span><span><span></span></span></span>.</p>
        </li><li>
         <p>Truncation of rational values is written <span><span><span></span></span></span>, with the usual mathematical definition:</p>
         
       </li></ul>
        <span id="aux-sat-u"></span>
       <ul id="aux-sat-s">
        <li>
         <p>Saturation of integers is written <span><span><span></span></span></span> and <span><span><span></span></span></span>. The arguments to these two functions range over arbitrary signed integers.</p>
         <ul>
          <li>
           <p>Unsigned saturation, <span><span><span></span></span></span> clamps <span><span><span></span></span></span> to between <span><span><span></span></span></span> and <span><span><span></span></span></span>:</p>
           
          </li><li>
           <p>Signed saturation, <span><span><span></span></span></span> clamps <span><span><span></span></span></span> to between <span><span><span></span></span></span> and <span><span><span></span></span></span>:</p>
         </li></ul>
         
       </li></ul>
       <section id="representations">
         <span id="aux-bits"></span><span id="index-1①③"></span>
        <h4 data-level="4.3.1" id="representations①"><span>4.3.1. </span><span>Representations</span><a href="#representations①"></a></h4>
        <p>Numbers and numeric vectors have an underlying binary representation as a sequence of bits:</p>
        
        <p>Each of these functions is a bijection, hence they are invertible.</p>
        <section id="integers②">
          <span id="aux-ibits"></span><span id="index-2①①"></span>
         <h5 data-level="4.3.1.1" id="integers③"><span>4.3.1.1. </span><span>Integers</span><a href="#integers③"></a></h5>
         <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-int"><span>Integers</span></a> are represented as base two unsigned numbers:</p>
         
         <p>Boolean operators like <span><span><span></span></span></span>, <span><span><span></span></span></span>, or <span><span><span></span></span></span> are lifted to bit sequences of equal length by applying them pointwise.</p>
        </section>
        <section id="floating-point②">
          <span id="aux-fbits"></span><span id="aux-fsign"></span><span id="aux-fbias"></span><span id="index-3⑧"></span>
         <h5 data-level="4.3.1.2" id="floating-point③"><span>4.3.1.2. </span><span>Floating-Point</span><a href="#floating-point③"></a></h5>
         <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>Floating-point values</span></a> are represented in the respective binary format defined by <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> (Section 3.4):</p>
         
         <p>where <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
        </section>
        <section id="vectors④">
          <span id="syntax-i128"></span><span id="aux-lanes"></span><span id="index-4⑧"></span>
         <h5 data-level="4.3.1.3" id="vectors⑤"><span>4.3.1.3. </span><span>Vectors</span><a href="#vectors⑤"></a></h5>
         <p>Numeric vectors of type <span><span><span></span></span></span> have the same underlying representation as an <span><span><span></span></span></span>.
They can also be interpreted as a sequence of numeric values packed into a <span><span><span></span></span></span> with a particular <span><span><span></span></span></span> <span><span><span></span></span></span>,
provided that <span><span><span></span></span></span>.</p>
         
         <p>This function is a bijection on <span><span><span></span></span></span>, hence it is invertible.</p>
        </section>
        <section id="storage">
          <span id="aux-bytes"></span><span id="aux-littleendian"></span><span id="index-5⑧"></span>
         <h5 data-level="4.3.1.4" id="storage①"><span>4.3.1.4. </span><span>Storage</span><a href="#storage①"></a></h5>
         <p>When a number is stored into <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memory</span></a>, it is converted into a sequence of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a> in <a href="https://en.wikipedia.org/wiki/Endianness#Little-endian">little endian</a> byte order:</p>
         
         <p>Again these functions are invertible bijections.</p>
        </section>
       </section>
       <section id="integer-operations">
         <span id="int-ops"></span><span id="index-6⑦"></span>
        <h4 data-level="4.3.2" id="integer-operations①"><span>4.3.2. </span><span>Integer Operations</span><a href="#integer-operations①"></a></h4>
        <section id="sign-interpretation">
          <span id="aux-signed"></span><span id="index-7⑦"></span>
         <h5 data-level="4.3.2.1" id="sign-interpretation①"><span>4.3.2.1. </span><span>Sign Interpretation</span><a href="#sign-interpretation①"></a></h5>
         <p>Integer operators are defined on <span><span><span></span></span></span> values.
Operators that use a signed interpretation convert the value using the following definition, which takes the two’s complement when the value lies in the upper half of the value range (i.e., its most significant bit is <span><span><span></span></span></span>):</p>
         
         <p>This function is bijective, and hence invertible.</p>
        </section>
        <section id="boolean-interpretation">
          <span id="aux-bool"></span><span id="index-8⑦"></span>
         <h5 data-level="4.3.2.2" id="boolean-interpretation①"><span>4.3.2.2. </span><span>Boolean Interpretation</span><a href="#boolean-interpretation①"></a></h5>
         <p>The integer result of predicates – i.e., <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-testop"><span>tests</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-relop"><span>relational</span></a> operators – is defined with the help of the following auxiliary function producing the value <span><span><span></span></span></span> or <span><span><span></span></span></span> depending on a condition.</p>
         
        </section>
        <section id="xref-exec-numerics-op-iadd-mathrm-iadd-n-i-1-i-2">
          <span id="op-iadd"></span>
         <h5 data-level="4.3.2.3" id="-hrefop-iaddmathrmiadd_n-i_1-i_2"><span>4.3.2.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iaddmathrmiadd_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return the result of adding <span><span><span></span></span></span> and <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-isub-mathrm-isub-n-i-1-i-2">
          <span id="op-isub"></span>
         <h5 data-level="4.3.2.4" id="-hrefop-isubmathrmisub_n-i_1-i_2"><span>4.3.2.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-isubmathrmisub_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return the result of subtracting <span><span><span></span></span></span> from <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-imul-mathrm-imul-n-i-1-i-2">
          <span id="op-imul"></span>
         <h5 data-level="4.3.2.5" id="-hrefop-imulmathrmimul_n-i_1-i_2"><span>4.3.2.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-imulmathrmimul_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return the result of multiplying <span><span><span></span></span></span> and <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-idiv-u-mathrm-idiv-u-n-i-1-i-2">
          <span id="op-idiv-u"></span>
         <h5 data-level="4.3.2.6" id="-hrefop-idiv-umathrmidiv_u_n-i_1-i_2"><span>4.3.2.6. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-idiv-umathrmidiv_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then the result is undefined.</p>
          </li><li>
           <p>Else, return the result of dividing <span><span><span></span></span></span> by <span><span><span></span></span></span>, truncated toward zero.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>This operator is <a href="#exec-op-partial"><span>partial</span></a>.</p>
         </div>
        </section>
        <section id="xref-exec-numerics-op-idiv-s-mathrm-idiv-s-n-i-1-i-2">
          <span id="op-idiv-s"></span>
         <h5 data-level="4.3.2.7" id="-hrefop-idiv-smathrmidiv_s_n-i_1-i_2"><span>4.3.2.7. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-idiv-smathrmidiv_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then the result is undefined.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> divided by <span><span><span></span></span></span> is <span><span><span></span></span></span>, then the result is undefined.</p>
          </li><li>
           <p>Else, return the result of dividing <span><span><span></span></span></span> by <span><span><span></span></span></span>, truncated toward zero.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>This operator is <a href="#exec-op-partial"><span>partial</span></a>.
Besides division by <span><span><span></span></span></span>, the result of <span><span><span></span></span></span> is not representable as an <span><span><span></span></span></span>-bit signed integer.</p>
         </div>
        </section>
        <section id="xref-exec-numerics-op-irem-u-mathrm-irem-u-n-i-1-i-2">
          <span id="op-irem-u"></span>
         <h5 data-level="4.3.2.8" id="-hrefop-irem-umathrmirem_u_n-i_1-i_2"><span>4.3.2.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-irem-umathrmirem_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then the result is undefined.</p>
          </li><li>
           <p>Else, return the remainder of dividing <span><span><span></span></span></span> by <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>This operator is <a href="#exec-op-partial"><span>partial</span></a>.</p>
          <p>As long as both operators are defined,
it holds that <span><span><span></span></span></span>.</p>
         </div>
        </section>
        <section id="xref-exec-numerics-op-irem-s-mathrm-irem-s-n-i-1-i-2">
          <span id="op-irem-s"></span>
         <h5 data-level="4.3.2.9" id="-hrefop-irem-smathrmirem_s_n-i_1-i_2"><span>4.3.2.9. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-irem-smathrmirem_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then the result is undefined.</p>
          </li><li>
           <p>Else, return the remainder of dividing <span><span><span></span></span></span> by <span><span><span></span></span></span>, with the sign of the dividend <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>This operator is <a href="#exec-op-partial"><span>partial</span></a>.</p>
          <p>As long as both operators are defined,
it holds that <span><span><span></span></span></span>.</p>
         </div>
        </section>
        <section id="xref-exec-numerics-op-inot-mathrm-inot-n-i">
          <span id="op-inot"></span>
         <h5 data-level="4.3.2.10" id="-hrefop-inotmathrminot_n-i"><span>4.3.2.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-inotmathrminot_n-i"></a></h5>
         <ul>
          <li>
           <p>Return the bitwise negation of <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iand-mathrm-iand-n-i-1-i-2">
          <span id="op-iand"></span>
         <h5 data-level="4.3.2.11" id="-hrefop-iandmathrmiand_n-i_1-i_2"><span>4.3.2.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iandmathrmiand_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return the bitwise conjunction of <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iandnot-mathrm-iandnot-n-i-1-i-2">
          <span id="op-iandnot"></span>
         <h5 data-level="4.3.2.12" id="-hrefop-iandnotmathrmiandnot_n-i_1-i_2"><span>4.3.2.12. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iandnotmathrmiandnot_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return the bitwise conjunction of <span><span><span></span></span></span> and the bitwise negation of <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ior-mathrm-ior-n-i-1-i-2">
          <span id="op-ior"></span>
         <h5 data-level="4.3.2.13" id="-hrefop-iormathrmior_n-i_1-i_2"><span>4.3.2.13. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iormathrmior_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return the bitwise disjunction of <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ixor-mathrm-ixor-n-i-1-i-2">
          <span id="op-ixor"></span>
         <h5 data-level="4.3.2.14" id="-hrefop-ixormathrmixor_n-i_1-i_2"><span>4.3.2.14. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ixormathrmixor_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return the bitwise exclusive disjunction of <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ishl-mathrm-ishl-n-i-1-i-2">
          <span id="op-ishl"></span>
         <h5 data-level="4.3.2.15" id="-hrefop-ishlmathrmishl_n-i_1-i_2"><span>4.3.2.15. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ishlmathrmishl_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the result of shifting <span><span><span></span></span></span> left by <span><span><span></span></span></span> bits, modulo <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ishr-u-mathrm-ishr-u-n-i-1-i-2">
          <span id="op-ishr-u"></span>
         <h5 data-level="4.3.2.16" id="-hrefop-ishr-umathrmishr_u_n-i_1-i_2"><span>4.3.2.16. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ishr-umathrmishr_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the result of shifting <span><span><span></span></span></span> right by <span><span><span></span></span></span> bits, extended with <span><span><span></span></span></span> bits.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ishr-s-mathrm-ishr-s-n-i-1-i-2">
          <span id="op-ishr-s"></span>
         <h5 data-level="4.3.2.17" id="-hrefop-ishr-smathrmishr_s_n-i_1-i_2"><span>4.3.2.17. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ishr-smathrmishr_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the result of shifting <span><span><span></span></span></span> right by <span><span><span></span></span></span> bits, extended with the most significant bit of the original value.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-irotl-mathrm-irotl-n-i-1-i-2">
          <span id="op-irotl"></span>
         <h5 data-level="4.3.2.18" id="-hrefop-irotlmathrmirotl_n-i_1-i_2"><span>4.3.2.18. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-irotlmathrmirotl_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the result of rotating <span><span><span></span></span></span> left by <span><span><span></span></span></span> bits.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-irotr-mathrm-irotr-n-i-1-i-2">
          <span id="op-irotr"></span>
         <h5 data-level="4.3.2.19" id="-hrefop-irotrmathrmirotr_n-i_1-i_2"><span>4.3.2.19. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-irotrmathrmirotr_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the result of rotating <span><span><span></span></span></span> right by <span><span><span></span></span></span> bits.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iclz-mathrm-iclz-n-i">
          <span id="op-iclz"></span>
         <h5 data-level="4.3.2.20" id="-hrefop-iclzmathrmiclz_n-i"><span>4.3.2.20. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iclzmathrmiclz_n-i"></a></h5>
         <ul>
          <li>
           <p>Return the count of leading zero bits in <span><span><span></span></span></span>; all bits are considered leading zeros if <span><span><span></span></span></span> is <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ictz-mathrm-ictz-n-i">
          <span id="op-ictz"></span>
         <h5 data-level="4.3.2.21" id="-hrefop-ictzmathrmictz_n-i"><span>4.3.2.21. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ictzmathrmictz_n-i"></a></h5>
         <ul>
          <li>
           <p>Return the count of trailing zero bits in <span><span><span></span></span></span>; all bits are considered trailing zeros if <span><span><span></span></span></span> is <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ipopcnt-mathrm-ipopcnt-n-i">
          <span id="op-ipopcnt"></span>
         <h5 data-level="4.3.2.22" id="-hrefop-ipopcntmathrmipopcnt_n-i"><span>4.3.2.22. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ipopcntmathrmipopcnt_n-i"></a></h5>
         <ul>
          <li>
           <p>Return the count of non-zero bits in <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ieqz-mathrm-ieqz-n-i">
          <span id="op-ieqz"></span>
         <h5 data-level="4.3.2.23" id="-hrefop-ieqzmathrmieqz_n-i"><span>4.3.2.23. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ieqzmathrmieqz_n-i"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is zero, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ieq-mathrm-ieq-n-i-1-i-2">
          <span id="op-ieq"></span>
         <h5 data-level="4.3.2.24" id="-hrefop-ieqmathrmieq_n-i_1-i_2"><span>4.3.2.24. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ieqmathrmieq_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> equals <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ine-mathrm-ine-n-i-1-i-2">
          <span id="op-ine"></span>
         <h5 data-level="4.3.2.25" id="-hrefop-inemathrmine_n-i_1-i_2"><span>4.3.2.25. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-inemathrmine_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> does not equal <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ilt-u-mathrm-ilt-u-n-i-1-i-2">
          <span id="op-ilt-u"></span>
         <h5 data-level="4.3.2.26" id="-hrefop-ilt-umathrmilt_u_n-i_1-i_2"><span>4.3.2.26. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ilt-umathrmilt_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is less than <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ilt-s-mathrm-ilt-s-n-i-1-i-2">
          <span id="op-ilt-s"></span>
         <h5 data-level="4.3.2.27" id="-hrefop-ilt-smathrmilt_s_n-i_1-i_2"><span>4.3.2.27. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ilt-smathrmilt_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is less than <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-igt-u-mathrm-igt-u-n-i-1-i-2">
          <span id="op-igt-u"></span>
         <h5 data-level="4.3.2.28" id="-hrefop-igt-umathrmigt_u_n-i_1-i_2"><span>4.3.2.28. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-igt-umathrmigt_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is greater than <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-igt-s-mathrm-igt-s-n-i-1-i-2">
          <span id="op-igt-s"></span>
         <h5 data-level="4.3.2.29" id="-hrefop-igt-smathrmigt_s_n-i_1-i_2"><span>4.3.2.29. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-igt-smathrmigt_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is greater than <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ile-u-mathrm-ile-u-n-i-1-i-2">
          <span id="op-ile-u"></span>
         <h5 data-level="4.3.2.30" id="-hrefop-ile-umathrmile_u_n-i_1-i_2"><span>4.3.2.30. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ile-umathrmile_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is less than or equal to <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ile-s-mathrm-ile-s-n-i-1-i-2">
          <span id="op-ile-s"></span>
         <h5 data-level="4.3.2.31" id="-hrefop-ile-smathrmile_s_n-i_1-i_2"><span>4.3.2.31. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ile-smathrmile_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is less than or equal to <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ige-u-mathrm-ige-u-n-i-1-i-2">
          <span id="op-ige-u"></span>
         <h5 data-level="4.3.2.32" id="-hrefop-ige-umathrmige_u_n-i_1-i_2"><span>4.3.2.32. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ige-umathrmige_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is greater than or equal to <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ige-s-mathrm-ige-s-n-i-1-i-2">
          <span id="op-ige-s"></span>
         <h5 data-level="4.3.2.33" id="-hrefop-ige-smathrmige_s_n-i_1-i_2"><span>4.3.2.33. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ige-smathrmige_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is greater than or equal to <span><span><span></span></span></span>, <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iextendn-s-mathrm-iextend-m-mathrm-s-n-i">
          <span id="op-iextendn-s"></span>
         <h5 data-level="4.3.2.34" id="-hrefop-iextendn-smathrmiextendmmathrm_s_n-i"><span>4.3.2.34. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iextendn-smathrmiextendmmathrm_s_n-i"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ibitselect-mathrm-ibitselect-n-i-1-i-2-i-3">
          <span id="op-ibitselect"></span>
         <h5 data-level="4.3.2.35" id="-hrefop-ibitselectmathrmibitselect_n-i_1-i_2-i_3"><span>4.3.2.35. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ibitselectmathrmibitselect_n-i_1-i_2-i_3"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the bitwise conjunction of <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the bitwise negation of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the bitwise conjunction of <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the bitwise disjunction of <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iabs-mathrm-iabs-n-i">
          <span id="op-iabs"></span>
         <h5 data-level="4.3.2.36" id="-hrefop-iabsmathrmiabs_n-i"><span>4.3.2.36. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iabsmathrmiabs_n-i"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is greater than or equal to <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return the negation of <cite>j</cite>, modulo <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ineg-mathrm-ineg-n-i">
          <span id="op-ineg"></span>
         <h5 data-level="4.3.2.37" id="-hrefop-inegmathrmineg_n-i"><span>4.3.2.37. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-inegmathrmineg_n-i"></a></h5>
         <ul>
          <li>
           <p>Return the result of negating <span><span><span></span></span></span>, modulo <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-imin-u-mathrm-imin-u-n-i-1-i-2">
          <span id="op-imin-u"></span>
         <h5 data-level="4.3.2.38" id="-hrefop-imin-umathrmimin_u_n-i_1-i_2"><span>4.3.2.38. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-imin-umathrmimin_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is <span><span><span></span></span></span>, return <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-imin-s-mathrm-imin-s-n-i-1-i-2">
          <span id="op-imin-s"></span>
         <h5 data-level="4.3.2.39" id="-hrefop-imin-smathrmimin_s_n-i_1-i_2"><span>4.3.2.39. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-imin-smathrmimin_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is <span><span><span></span></span></span>, return <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-imax-u-mathrm-imax-u-n-i-1-i-2">
          <span id="op-imax-u"></span>
         <h5 data-level="4.3.2.40" id="-hrefop-imax-umathrmimax_u_n-i_1-i_2"><span>4.3.2.40. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-imax-umathrmimax_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is <span><span><span></span></span></span>, return <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-imax-s-mathrm-imax-s-n-i-1-i-2">
          <span id="op-imax-s"></span>
         <h5 data-level="4.3.2.41" id="-hrefop-imax-smathrmimax_s_n-i_1-i_2"><span>4.3.2.41. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-imax-smathrmimax_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> if <span><span><span></span></span></span> is <span><span><span></span></span></span>, return <span><span><span></span></span></span> otherwise.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iadd-sat-u-mathrm-iadd-sat-u-n-i-1-i-2">
          <span id="op-iadd-sat-u"></span>
         <h5 data-level="4.3.2.42" id="-hrefop-iadd-sat-umathrmiadd_sat_u_n-i_1-i_2"><span>4.3.2.42. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iadd-sat-umathrmiadd_sat_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the result of adding <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iadd-sat-s-mathrm-iadd-sat-s-n-i-1-i-2">
          <span id="op-iadd-sat-s"></span>
         <h5 data-level="4.3.2.43" id="-hrefop-iadd-sat-smathrmiadd_sat_s_n-i_1-i_2"><span>4.3.2.43. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iadd-sat-smathrmiadd_sat_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the signed interpretation of <span><span><span></span></span></span></p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the signed interpretation of <span><span><span></span></span></span></p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of adding <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-isub-sat-u-mathrm-isub-sat-u-n-i-1-i-2">
          <span id="op-isub-sat-u"></span>
         <h5 data-level="4.3.2.44" id="-hrefop-isub-sat-umathrmisub_sat_u_n-i_1-i_2"><span>4.3.2.44. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-isub-sat-umathrmisub_sat_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the result of subtracting <span><span><span></span></span></span> from <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-isub-sat-s-mathrm-isub-sat-s-n-i-1-i-2">
          <span id="op-isub-sat-s"></span>
         <h5 data-level="4.3.2.45" id="-hrefop-isub-sat-smathrmisub_sat_s_n-i_1-i_2"><span>4.3.2.45. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-isub-sat-smathrmisub_sat_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the signed interpretation of <span><span><span></span></span></span></p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the signed interpretation of <span><span><span></span></span></span></p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of subtracting <span><span><span></span></span></span> from <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iavgr-u-mathrm-iavgr-u-n-i-1-i-2">
          <span id="op-iavgr-u"></span>
         <h5 data-level="4.3.2.46" id="-hrefop-iavgr-umathrmiavgr_u_n-i_1-i_2"><span>4.3.2.46. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iavgr-umathrmiavgr_u_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the result of adding <span><span><span></span></span></span>, <span><span><span></span></span></span>, and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the result of dividing <span><span><span></span></span></span> by <span><span><span></span></span></span>, truncated toward zero.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-iq15mulrsat-s-mathrm-iq15mulrsat-s-n-i-1-i-2">
          <span id="op-iq15mulrsat-s"></span>
         <h5 data-level="4.3.2.47" id="-hrefop-iq15mulrsat-smathrmiq15mulrsat_s_n-i_1-i_2"><span>4.3.2.47. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-iq15mulrsat-smathrmiq15mulrsat_s_n-i_1-i_2"></a></h5>
         <ul>
          <li>
           <p>Return the result of <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="floating-point-operations">
         <span id="float-ops"></span><span id="index-9⑦"></span>
        <h4 data-level="4.3.3" id="floating-point-operations①"><span>4.3.3. </span><span>Floating-Point Operations</span><a href="#floating-point-operations①"></a></h4>
        <p>Floating-point arithmetic follows the <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> standard,
with the following qualifications:</p>
        <ul>
         <li>
          <p>All operators use round-to-nearest ties-to-even, except where otherwise specified.
Non-default directed rounding attributes are not supported.</p>
         </li><li>
          <p>Following the recommendation that operators propagate <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-nan"><span>NaN</span></a> payloads from their operands is permitted but not required.</p>
         </li><li>
          <p>All operators use “non-stop” mode, and floating-point exceptions are not otherwise observable.
In particular, neither alternate floating-point exception handling attributes nor operators on status flags are supported.
There is no observable difference between quiet and signalling NaNs.</p>
        </li></ul>
        <div role="note">
         <p>Note</p>
         <p>Some of these limitations may be lifted in future versions of WebAssembly.</p>
        </div>
        <section id="rounding">
          <span id="aux-ieee"></span><span id="index-10⑤"></span>
         <h5 data-level="4.3.3.1" id="rounding①"><span>4.3.3.1. </span><span>Rounding</span><a href="#rounding①"></a></h5>
         <p>Rounding always is round-to-nearest ties-to-even, in correspondence with <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> (Section 4.3.1).</p>
         <p>An <em>exact</em> floating-point number is a rational number that is exactly representable as a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>floating-point number</span></a> of given bit width <span><span><span></span></span></span>.</p>
         <p>A <em>limit</em> number for a given floating-point bit width <span><span><span></span></span></span> is a positive or negative number whose magnitude is the smallest power of <span><span><span></span></span></span> that is not exactly representable as a floating-point number of width <span><span><span></span></span></span> (that magnitude is <span><span><span></span></span></span> for <span><span><span></span></span></span> and <span><span><span></span></span></span> for <span><span><span></span></span></span>).</p>
         <p>A <em>candidate</em> number is either an exact floating-point number or a positive or negative limit number for the given bit width <span><span><span></span></span></span>.</p>
         <p>A <em>candidate pair</em> is a pair <span><span><span></span></span></span> of candidate numbers, such that no candidate number exists that lies between the two.</p>
         <p>A real number <span><span><span></span></span></span> is converted to a floating-point value of bit width <span><span><span></span></span></span> as follows:</p>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an exact floating-point number, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> greater than or equal to the positive limit, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is less than or equal to the negative limit, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> and <span><span><span></span></span></span> are a candidate pair such that <span><span><span></span></span></span>, then:</p>
           <ul>
            <li>
             <p>If <span><span><span></span></span></span>, then let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else if <span><span><span></span></span></span>, then let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else if <span><span><span></span></span></span> and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>significand</span></a> of <span><span><span></span></span></span> is even, then let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else, let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then:</p>
           <ul>
            <li>
             <p>If <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else, return <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a limit number, then:</p>
           <ul>
            <li>
             <p>If <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else, return <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <p>where:</p>
         
        </section>
        <section id="nan-propagation">
          <span id="aux-nans"></span><span id="index-11⑤"></span>
         <h5 data-level="4.3.3.2" id="nan-propagation①"><span>4.3.3.2. </span><span>NaN Propagation</span><a href="#nan-propagation①"></a></h5>
         <p>When the result of a floating-point operator other than <span><span><span></span></span></span>, <span><span><span></span></span></span>, or <span><span><span></span></span></span> is a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-nan"><span>NaN</span></a>,
then its sign is non-deterministic and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-payload"><span>payload</span></a> is computed as follows:</p>
         <ul>
          <li>
           <p>If the payload of all NaN inputs to the operator is <a href="https://www.w3.org/TR/wasm-core-2/index.html#canonical-nan"><span>canonical</span></a> (including the case that there are no NaN inputs), then the payload of the output is canonical as well.</p>
          </li><li>
           <p>Otherwise the payload is picked non-deterministically among all <a href="https://www.w3.org/TR/wasm-core-2/index.html#arithmetic-nan"><span>arithmetic NaNs</span></a>; that is, its most significant bit is <span><span><span></span></span></span> and all others are unspecified.</p>
         </li></ul>
         <p>This non-deterministic result is expressed by the following auxiliary function producing a set of allowed outputs from a set of inputs:</p>
         
        </section>
        <section id="xref-exec-numerics-op-fadd-mathrm-fadd-n-z-1-z-2">
          <span id="op-fadd"></span>
         <h5 data-level="4.3.3.3" id="-hrefop-faddmathrmfadd_n-z_1-z_2"><span>4.3.3.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-faddmathrmfadd_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are infinities of opposite signs, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are infinities of equal sign, then return that infinity.</p>
          </li><li>
           <p>Else if either <span><span><span></span></span></span> or <span><span><span></span></span></span> is an infinity, then return that infinity.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes of opposite sign, then return positive zero.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes of equal sign, then return that zero.</p>
          </li><li>
           <p>Else if either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a zero, then return the other operand.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are values with the same magnitude but opposite signs, then return positive zero.</p>
          </li><li>
           <p>Else return the result of adding <span><span><span></span></span></span> and <span><span><span></span></span></span>, <a href="#aux-ieee"><span>rounded</span></a> to the nearest representable value.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fsub-mathrm-fsub-n-z-1-z-2">
          <span id="op-fsub"></span>
         <h5 data-level="4.3.3.4" id="-hrefop-fsubmathrmfsub_n-z_1-z_2"><span>4.3.3.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fsubmathrmfsub_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are infinities of equal signs, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are infinities of opposite sign, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return that infinity.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return that infinity negated.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes of equal sign, then return positive zero.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes of opposite sign, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return <span><span><span></span></span></span> negated.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same value, then return positive zero.</p>
          </li><li>
           <p>Else return the result of subtracting <span><span><span></span></span></span> from <span><span><span></span></span></span>, <a href="#aux-ieee"><span>rounded</span></a> to the nearest representable value.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>Up to the non-determinism regarding NaNs, it always holds that <span><span><span></span></span></span>.</p>
         </div>
        </section>
        <section id="xref-exec-numerics-op-fmul-mathrm-fmul-n-z-1-z-2">
          <span id="op-fmul"></span>
         <h5 data-level="4.3.3.5" id="-hrefop-fmulmathrmfmul_n-z_1-z_2"><span>4.3.3.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fmulmathrmfmul_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if one of <span><span><span></span></span></span> and <span><span><span></span></span></span> is a zero and the other an infinity, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are infinities of equal sign, then return positive infinity.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are infinities of opposite sign, then return negative infinity.</p>
          </li><li>
           <p>Else if either <span><span><span></span></span></span> or <span><span><span></span></span></span> is an infinity and the other a value with equal sign, then return positive infinity.</p>
          </li><li>
           <p>Else if either <span><span><span></span></span></span> or <span><span><span></span></span></span> is an infinity and the other a value with opposite sign, then return negative infinity.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes of equal sign, then return positive zero.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes of opposite sign, then return negative zero.</p>
          </li><li>
           <p>Else return the result of multiplying <span><span><span></span></span></span> and <span><span><span></span></span></span>, <a href="#aux-ieee"><span>rounded</span></a> to the nearest representable value.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fdiv-mathrm-fdiv-n-z-1-z-2">
          <span id="op-fdiv"></span>
         <h5 data-level="4.3.3.6" id="-hrefop-fdivmathrmfdiv_n-z_1-z_2"><span>4.3.3.6. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fdivmathrmfdiv_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are infinities, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity and <span><span><span></span></span></span> a value with equal sign, then return positive infinity.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity and <span><span><span></span></span></span> a value with opposite sign, then return negative infinity.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity and <span><span><span></span></span></span> a value with equal sign, then return positive zero.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity and <span><span><span></span></span></span> a value with opposite sign, then return negative zero.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero and <span><span><span></span></span></span> a value with equal sign, then return positive zero.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero and <span><span><span></span></span></span> a value with opposite sign, then return negative zero.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero and <span><span><span></span></span></span> a value with equal sign, then return positive infinity.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero and <span><span><span></span></span></span> a value with opposite sign, then return negative infinity.</p>
          </li><li>
           <p>Else return the result of dividing <span><span><span></span></span></span> by <span><span><span></span></span></span>, <a href="#aux-ieee"><span>rounded</span></a> to the nearest representable value.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fmin-mathrm-fmin-n-z-1-z-2">
          <span id="op-fmin"></span>
         <h5 data-level="4.3.3.7" id="-hrefop-fminmathrmfmin_n-z_1-z_2"><span>4.3.3.7. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fminmathrmfmin_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a negative infinity, then return negative infinity.</p>
          </li><li>
           <p>Else if either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a positive infinity, then return the other value.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes of opposite signs, then return negative zero.</p>
          </li><li>
           <p>Else return the smaller value of <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fmax-mathrm-fmax-n-z-1-z-2">
          <span id="op-fmax"></span>
         <h5 data-level="4.3.3.8" id="-hrefop-fmaxmathrmfmax_n-z_1-z_2"><span>4.3.3.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fmaxmathrmfmax_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a positive infinity, then return positive infinity.</p>
          </li><li>
           <p>Else if either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a negative infinity, then return the other value.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes of opposite signs, then return positive zero.</p>
          </li><li>
           <p>Else return the larger value of <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fcopysign-mathrm-fcopysign-n-z-1-z-2">
          <span id="op-fcopysign"></span>
         <h5 data-level="4.3.3.9" id="-hrefop-fcopysignmathrmfcopysign_n-z_1-z_2"><span>4.3.3.9. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fcopysignmathrmfcopysign_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> and <span><span><span></span></span></span> have the same sign, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span> with negated sign.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fabs-mathrm-fabs-n-z">
          <span id="op-fabs"></span>
         <h5 data-level="4.3.3.10" id="-hrefop-fabsmathrmfabs_n-z"><span>4.3.3.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fabsmathrmfabs_n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span> with positive sign.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return positive infinity.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return positive zero.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a positive value, then <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span> negated.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fneg-mathrm-fneg-n-z">
          <span id="op-fneg"></span>
         <h5 data-level="4.3.3.11" id="-hrefop-fnegmathrmfneg_n-z"><span>4.3.3.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fnegmathrmfneg_n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span> with negated sign.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return that infinity negated.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return that zero negated.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span> negated.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fsqrt-mathrm-fsqrt-n-z">
          <span id="op-fsqrt"></span>
         <h5 data-level="4.3.3.12" id="-hrefop-fsqrtmathrmfsqrt_n-z"><span>4.3.3.12. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fsqrtmathrmfsqrt_n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return positive infinity.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return that zero.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> has a negative sign, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return the square root of <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fceil-mathrm-fceil-n-z">
          <span id="op-fceil"></span>
         <h5 data-level="4.3.3.13" id="-hrefop-fceilmathrmfceil_n-z"><span>4.3.3.13. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fceilmathrmfceil_n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is smaller than <span><span><span></span></span></span> but greater than <span><span><span></span></span></span>, then return negative zero.</p>
          </li><li>
           <p>Else return the smallest integral value that is not smaller than <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ffloor-mathrm-ffloor-n-z">
          <span id="op-ffloor"></span>
         <h5 data-level="4.3.3.14" id="-hrefop-ffloormathrmffloor_n-z"><span>4.3.3.14. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ffloormathrmffloor_n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is greater than <span><span><span></span></span></span> but smaller than <span><span><span></span></span></span>, then return positive zero.</p>
          </li><li>
           <p>Else return the largest integral value that is not larger than <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-ftrunc-mathrm-ftrunc-n-z">
          <span id="op-ftrunc"></span>
         <h5 data-level="4.3.3.15" id="-hrefop-ftruncmathrmftrunc_n-z"><span>4.3.3.15. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-ftruncmathrmftrunc_n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is greater than <span><span><span></span></span></span> but smaller than <span><span><span></span></span></span>, then return positive zero.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is smaller than <span><span><span></span></span></span> but greater than <span><span><span></span></span></span>, then return negative zero.</p>
          </li><li>
           <p>Else return the integral value with the same sign as <span><span><span></span></span></span> and the largest magnitude that is not larger than the magnitude of <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fnearest-mathrm-fnearest-n-z">
          <span id="op-fnearest"></span>
         <h5 data-level="4.3.3.16" id="-hrefop-fnearestmathrmfnearest_n-z"><span>4.3.3.16. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fnearestmathrmfnearest_n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is greater than <span><span><span></span></span></span> but smaller than or equal to <span><span><span></span></span></span>, then return positive zero.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is smaller than <span><span><span></span></span></span> but greater than or equal to <span><span><span></span></span></span>, then return negative zero.</p>
          </li><li>
           <p>Else return the integral value that is nearest to <span><span><span></span></span></span>; if two values are equally near, return the even one.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-feq-mathrm-feq-n-z-1-z-2">
          <span id="op-feq"></span>
         <h5 data-level="4.3.3.17" id="-hrefop-feqmathrmfeq_n-z_1-z_2"><span>4.3.3.17. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-feqmathrmfeq_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same value, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fne-mathrm-fne-n-z-1-z-2">
          <span id="op-fne"></span>
         <h5 data-level="4.3.3.18" id="-hrefop-fnemathrmfne_n-z_1-z_2"><span>4.3.3.18. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fnemathrmfne_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same value, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-flt-mathrm-flt-n-z-1-z-2">
          <span id="op-flt"></span>
         <h5 data-level="4.3.3.19" id="-hrefop-fltmathrmflt_n-z_1-z_2"><span>4.3.3.19. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fltmathrmflt_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same value, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is smaller than <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fgt-mathrm-fgt-n-z-1-z-2">
          <span id="op-fgt"></span>
         <h5 data-level="4.3.3.20" id="-hrefop-fgtmathrmfgt_n-z_1-z_2"><span>4.3.3.20. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fgtmathrmfgt_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same value, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is larger than <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fle-mathrm-fle-n-z-1-z-2">
          <span id="op-fle"></span>
         <h5 data-level="4.3.3.21" id="-hrefop-flemathrmfle_n-z_1-z_2"><span>4.3.3.21. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-flemathrmfle_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same value, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is smaller than or equal to <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fge-mathrm-fge-n-z-1-z-2">
          <span id="op-fge"></span>
         <h5 data-level="4.3.3.22" id="-hrefop-fgemathrmfge_n-z_1-z_2"><span>4.3.3.22. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fgemathrmfge_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If either <span><span><span></span></span></span> or <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> and <span><span><span></span></span></span> are the same value, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if both <span><span><span></span></span></span> and <span><span><span></span></span></span> are zeroes, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is smaller than or equal to <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fpmin-mathrm-fpmin-n-z-1-z-2">
          <span id="op-fpmin"></span>
         <h5 data-level="4.3.3.23" id="-hrefop-fpminmathrmfpmin_n-z_1-z_2"><span>4.3.3.23. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fpminmathrmfpmin_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is less than <span><span><span></span></span></span> then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-fpmax-mathrm-fpmax-n-z-1-z-2">
          <span id="op-fpmax"></span>
         <h5 data-level="4.3.3.24" id="-hrefop-fpmaxmathrmfpmax_n-z_1-z_2"><span>4.3.3.24. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-fpmaxmathrmfpmax_n-z_1-z_2"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is less than <span><span><span></span></span></span> then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="conversions">
         <span id="convert-ops"></span>
        <h4 data-level="4.3.4" id="conversions①"><span>4.3.4. </span><span>Conversions</span><a href="#conversions①"></a></h4>
        <section id="xref-exec-numerics-op-extend-u-mathrm-extend-mathsf-u-m-n-i">
          <span id="op-extend-u"></span>
         <h5 data-level="4.3.4.1" id="-hrefop-extend-umathrmextendmathsfu_m-n-i"><span>4.3.4.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-extend-umathrmextendmathsfu_m-n-i"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>In the abstract syntax, unsigned extension just reinterprets the same value.</p>
         </div>
        </section>
        <section id="xref-exec-numerics-op-extend-s-mathrm-extend-mathsf-s-m-n-i">
          <span id="op-extend-s"></span>
         <h5 data-level="4.3.4.2" id="-hrefop-extend-smathrmextendmathsfs_m-n-i"><span>4.3.4.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-extend-smathrmextendmathsfs_m-n-i"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span> of size <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the two’s complement of <span><span><span></span></span></span> relative to size <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-wrap-mathrm-wrap-m-n-i">
          <span id="op-wrap"></span>
         <h5 data-level="4.3.4.3" id="-hrefop-wrapmathrmwrap_m-n-i"><span>4.3.4.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-wrapmathrmwrap_m-n-i"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span> modulo <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-trunc-u-mathrm-trunc-mathsf-u-m-n-z">
          <span id="op-trunc-u"></span>
         <h5 data-level="4.3.4.4" id="-hrefop-trunc-umathrmtruncmathsfu_m-n-z"><span>4.3.4.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-trunc-umathrmtruncmathsfu_m-n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then the result is undefined.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then the result is undefined.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a number and <span><span><span></span></span></span> is a value within range of the target type, then return that value.</p>
          </li><li>
           <p>Else the result is undefined.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>This operator is <a href="#exec-op-partial"><span>partial</span></a>.
It is not defined for NaNs, infinities, or values for which the result is out of range.</p>
         </div>
        </section>
        <section id="xref-exec-numerics-op-trunc-s-mathrm-trunc-mathsf-s-m-n-z">
          <span id="op-trunc-s"></span>
         <h5 data-level="4.3.4.5" id="-hrefop-trunc-smathrmtruncmathsfs_m-n-z"><span>4.3.4.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-trunc-smathrmtruncmathsfs_m-n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then the result is undefined.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then the result is undefined.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is a number and <span><span><span></span></span></span> is a value within range of the target type, then return that value.</p>
          </li><li>
           <p>Else the result is undefined.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>This operator is <a href="#exec-op-partial"><span>partial</span></a>.
It is not defined for NaNs, infinities, or values for which the result is out of range.</p>
         </div>
        </section>
        <section id="xref-exec-numerics-op-trunc-sat-u-mathrm-trunc-sat-u-m-n-z">
          <span id="op-trunc-sat-u"></span>
         <h5 data-level="4.3.4.6" id="-hrefop-trunc-sat-umathrmtrunc_sat_u_m-n-z"><span>4.3.4.6. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-trunc-sat-umathrmtrunc_sat_u_m-n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-trunc-sat-s-mathrm-trunc-sat-s-m-n-z">
          <span id="op-trunc-sat-s"></span>
         <h5 data-level="4.3.4.7" id="-hrefop-trunc-sat-smathrmtrunc_sat_s_m-n-z"><span>4.3.4.7. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-trunc-sat-smathrmtrunc_sat_s_m-n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a NaN, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is negative infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is positive infinity, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-promote-mathrm-promote-m-n-z">
          <span id="op-promote"></span>
         <h5 data-level="4.3.4.8" id="-hrefop-promotemathrmpromote_m-n-z"><span>4.3.4.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-promotemathrmpromote_m-n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a <a href="https://www.w3.org/TR/wasm-core-2/index.html#canonical-nan"><span>canonical NaN</span></a>, then return an element of <span><span><span></span></span></span> (i.e., a canonical NaN of size <span><span><span></span></span></span>).</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span> (i.e., any <a href="https://www.w3.org/TR/wasm-core-2/index.html#arithmetic-nan"><span>arithmetic NaN</span></a> of size <span><span><span></span></span></span>).</p>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-demote-mathrm-demote-m-n-z">
          <span id="op-demote"></span>
         <h5 data-level="4.3.4.9" id="-hrefop-demotemathrmdemote_m-n-z"><span>4.3.4.9. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-demotemathrmdemote_m-n-z"></a></h5>
         <ul>
          <li>
           <p>If <span><span><span></span></span></span> is a <a href="https://www.w3.org/TR/wasm-core-2/index.html#canonical-nan"><span>canonical NaN</span></a>, then return an element of <span><span><span></span></span></span> (i.e., a canonical NaN of size <span><span><span></span></span></span>).</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a NaN, then return an element of <span><span><span></span></span></span> (i.e., any NaN of size <span><span><span></span></span></span>).</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is an infinity, then return that infinity.</p>
          </li><li>
           <p>Else if <span><span><span></span></span></span> is a zero, then return that zero.</p>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-convert-u-mathrm-convert-mathsf-u-m-n-i">
          <span id="op-convert-u"></span>
         <h5 data-level="4.3.4.10" id="-hrefop-convert-umathrmconvertmathsfu_m-n-i"><span>4.3.4.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-convert-umathrmconvertmathsfu_m-n-i"></a></h5>
         <ul>
          <li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-convert-s-mathrm-convert-mathsf-s-m-n-i">
          <span id="op-convert-s"></span>
         <h5 data-level="4.3.4.11" id="-hrefop-convert-smathrmconvertmathsfs_m-n-i"><span>4.3.4.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-convert-smathrmconvertmathsfs_m-n-i"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-reinterpret-mathrm-reinterpret-t-1-t-2-c">
          <span id="op-reinterpret"></span>
         <h5 data-level="4.3.4.12" id="-hrefop-reinterpretmathrmreinterpret_t_1-t_2-c"><span>4.3.4.12. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-reinterpretmathrmreinterpret_t_1-t_2-c"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the bit sequence <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the constant <span><span><span></span></span></span> for which <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-narrow-s-mathrm-narrow-mathsf-s-m-n-i">
          <span id="op-narrow-s"></span>
         <h5 data-level="4.3.4.13" id="-hrefop-narrow-smathrmnarrowmathsfs_m-n-i"><span>4.3.4.13. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-narrow-smathrmnarrowmathsfs_m-n-i"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span> of size <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-numerics-op-narrow-u-mathrm-narrow-mathsf-u-m-n-i">
          <span id="op-narrow-u"></span>
         <h5 data-level="4.3.4.14" id="-hrefop-narrow-umathrmnarrowmathsfu_m-n-i"><span>4.3.4.14. </span><span><span><span><span></span></span></span></span><a href="#-hrefop-narrow-umathrmnarrowmathsfu_m-n-i"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="#aux-signed"><span>signed interpretation</span></a> of <span><span><span></span></span></span> of size <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
      </section>
       <section id="instructions④">
        <span id="exec-instr"></span><span id="index-0①④"></span>
       <h3 data-level="4.4" id="instructions⑤"><span>4.4. </span><span>Instructions</span><a href="#instructions⑤"></a></h3>
       <p>WebAssembly computation is performed by executing individual <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a>.</p>
       <section id="numeric-instructions④">
         <span id="exec-instr-numeric"></span><span id="index-1①④"></span>
        <h4 data-level="4.4.1" id="numeric-instructions⑤"><span>4.4.1. </span><span>Numeric Instructions</span><a href="#numeric-instructions⑤"></a></h4>
        <p>Numeric instructions are defined in terms of the generic <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-numeric"><span>numeric operators</span></a>.
The mapping of numeric instructions to their underlying operators is expressed by the following definition:</p>
        
        <p>And for <a href="#exec-cvtop"><span>conversion operators</span></a>:</p>
        
        <p>Where the underlying operators are partial, the corresponding instruction will <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a> when the result is not defined.
Where the underlying operators are non-deterministic, because they may return one of multiple possible <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-nan"><span>NaN</span></a> values, so are the corresponding instructions.</p>
        <div role="note">
         <p>Note</p>
         <p>For example, the result of instruction <span><span><span></span></span></span> applied to operands <span><span><span></span></span></span> invokes <span><span><span></span></span></span>,
which maps to the generic <span><span><span></span></span></span> via the above definition.
Similarly, <span><span><span></span></span></span> applied to <span><span><span></span></span></span> invokes <span><span><span></span></span></span>,
which maps to the generic <span><span><span></span></span></span>.</p>
        </div>
        <section id="t-mathsf-xref-syntax-instructions-syntax-instr-numeric-mathsf-const-c①">
          <span id="exec-const"></span>
         <h5 data-level="4.4.1.1" id="-tmathsfhrefsyntax-instr-numericmathsfconstc①"><span>4.4.1.1. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-instr-numericmathsfconstc①"></a></h5>
         <ol>
          <li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         <div role="note">
          <p>Note</p>
          <p>No formal reduction rule is required for this instruction, since <span><span><span></span></span></span> instructions already are <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a>.</p>
         </div>
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-unop-mathit-unop①">
          <span id="exec-unop"></span>
         <h5 data-level="4.4.1.2" id="-tmathsfhrefsyntax-unopmathitunop①"><span>4.4.1.2. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-unopmathitunop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-unop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is defined, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be a possible result of computing <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
         </li></ol>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-binop-mathit-binop①">
          <span id="exec-binop"></span>
         <h5 data-level="4.4.1.3" id="-tmathsfhrefsyntax-binopmathitbinop①"><span>4.4.1.3. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-binopmathitbinop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-binop"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is defined, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be a possible result of computing <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
         </li></ol>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-testop-mathit-testop①">
          <span id="exec-testop"></span>
         <h5 data-level="4.4.1.4" id="-tmathsfhrefsyntax-testopmathittestop①"><span>4.4.1.4. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-testopmathittestop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-testop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-relop-mathit-relop①">
          <span id="exec-relop"></span>
         <h5 data-level="4.4.1.5" id="-tmathsfhrefsyntax-relopmathitrelop①"><span>4.4.1.5. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-relopmathitrelop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-relop"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-2-mathsf-xref-syntax-instructions-syntax-cvtop-mathit-cvtop-mathsf-t-1-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx①">
          <span id="exec-cvtop"></span>
         <h5 data-level="4.4.1.6" id="-t_2mathsfhrefsyntax-cvtopmathitcvtopmathsf_t_1mathsf_hrefsyntax-sxmathitsx①"><span>4.4.1.6. </span><span><span><span><span></span></span></span></span><a href="#-t_2mathsfhrefsyntax-cvtopmathitcvtopmathsf_t_1mathsf_hrefsyntax-sxmathitsx①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-cvtop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is defined:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be a possible result of computing <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
         </li></ol>
         
        </section>
       </section>
       <section id="reference-instructions④">
         <span id="exec-instr-ref"></span><span id="index-2①②"></span>
        <h4 data-level="4.4.2" id="reference-instructions⑤"><span>4.4.2. </span><span>Reference Instructions</span><a href="#reference-instructions⑤"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-ref-mathsf-ref-null-t①">
          <span id="exec-ref-null"></span>
         <h5 data-level="4.4.2.1" id="-hrefsyntax-instr-refmathsfrefnullt①"><span>4.4.2.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-refmathsfrefnullt①"></a></h5>
         <ol>
          <li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         <div role="note">
          <p>Note</p>
          <p>No formal reduction rule is required for this instruction, since the <span><span><span></span></span></span> instruction is already a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a>.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-ref-mathsf-ref-is-null①">
          <span id="exec-ref-is-null"></span>
         <h5 data-level="4.4.2.2" id="-hrefsyntax-instr-refmathsfrefis_null①"><span>4.4.2.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-refmathsfrefis_null①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-ref-is-null"><span>validation</span></a>, a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference value</span></a> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-ref-mathsf-ref-func-x①">
          <span id="exec-ref-func"></span>
         <h5 data-level="4.4.2.3" id="-hrefsyntax-instr-refmathsfreffuncx①"><span>4.4.2.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-refmathsfreffuncx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-ref-func"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
       </section>
       <section id="vector-instructions④">
         <span id="exec-instr-vec"></span><span id="index-3⑨"></span>
        <h4 data-level="4.4.3" id="vector-instructions⑤"><span>4.4.3. </span><span>Vector Instructions</span><a href="#vector-instructions⑤"></a></h4>
        <p>Vector instructions that operate bitwise are handled as integer operations of respective width.</p>
        
        <p>Most other vector instructions are defined in terms of numeric operators that are applied lane-wise according to the given <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec-shape"><span>shape</span></a>.</p>
        
        <div role="note">
         <p>Note</p>
         <p>For example, the result of instruction <span><span><span></span></span></span> applied to operands <span><span><span></span></span></span> invokes <span><span><span></span></span></span>, which maps to <span><span><span></span></span></span>,
where <span><span><span></span></span></span> and <span><span><span></span></span></span> are sequences resulting from invoking <span><span><span></span></span></span> and <span><span><span></span></span></span> respectively.</p>
        </div>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-const-c①">
          <span id="exec-vconst"></span>
         <h5 data-level="4.4.3.1" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-vecmathsfconstc①"><span>4.4.3.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-vecmathsfconstc①"></a></h5>
         <ol>
          <li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         <div role="note">
          <p>Note</p>
          <p>No formal reduction rule is required for this instruction, since <span><span><span></span></span></span> instructions coincide with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a>.</p>
         </div>
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-vvunop-mathit-vvunop①">
          <span id="exec-vvunop"></span>
         <h5 data-level="4.4.3.2" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvunopmathitvvunop①"><span>4.4.3.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvunopmathitvvunop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vvunop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-vvbinop-mathit-vvbinop①">
          <span id="exec-vvbinop"></span>
         <h5 data-level="4.4.3.3" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvbinopmathitvvbinop①"><span>4.4.3.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvbinopmathitvvbinop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vvbinop"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-vvternop-mathit-vvternop①">
          <span id="exec-vvternop"></span>
         <h5 data-level="4.4.3.4" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvternopmathitvvternop①"><span>4.4.3.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-vvternopmathitvvternop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vvternop"><span>validation</span></a>, three values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-any-true">
          <span id="exec-vec-any-true"></span><span id="exec-vvtestop"></span>
         <h5 data-level="4.4.3.5" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-vecmathsfany_true"><span>4.4.3.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-vecmathsfany_true"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vvtestop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="mathsf-i8x16-xref-syntax-instructions-syntax-instr-vec-mathsf-swizzle①">
          <span id="exec-vec-swizzle"></span>
         <h5 data-level="4.4.3.6" id="-mathsfi8x16hrefsyntax-instr-vecmathsfswizzle①"><span>4.4.3.6. </span><span><span><span><span></span></span></span></span><a href="#-mathsfi8x16hrefsyntax-instr-vecmathsfswizzle①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vbinop"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the two sequences <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="mathsf-i8x16-xref-syntax-instructions-syntax-instr-vec-mathsf-shuffle-x-ast">
          <span id="exec-vec-shuffle"></span>
         <h5 data-level="4.4.3.7" id="-mathsfi8x16hrefsyntax-instr-vecmathsfshufflexast"><span>4.4.3.7. </span><span><span><span><span></span></span></span></span><a href="#-mathsfi8x16hrefsyntax-instr-vecmathsfshufflexast"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-shuffle"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-shuffle"><span>validation</span></a>, for all <span><span><span></span></span></span> in <span><span><span></span></span></span> it holds that <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the two sequences <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-splat①">
          <span id="exec-vec-splat"></span>
         <h5 data-level="4.4.3.8" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfsplat①"><span>4.4.3.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfsplat①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-splat"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-replace-lane-x">
          <span id="exec-vec-replace-lane"></span>
         <h5 data-level="4.4.3.10" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfreplace_lanex"><span>4.4.3.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfreplace_lanex"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-replace-lane"><span>validation</span></a>, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-replace-lane"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-replace-lane"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push <span><span><span></span></span></span> on the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-vunop-mathit-vunop①">
          <span id="exec-vunop"></span>
         <h5 data-level="4.4.3.11" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-vunopmathitvunop①"><span>4.4.3.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-vunopmathitvunop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vunop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-vbinop-mathit-vbinop①">
          <span id="exec-vbinop"></span>
         <h5 data-level="4.4.3.12" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-vbinopmathitvbinop①"><span>4.4.3.12. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-vbinopmathitvbinop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vbinop"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is defined:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be a possible result of computing <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
         </li></ol>
         
        </section>
        <section id="t-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-vrelop-mathit-vrelop">
          <span id="exec-vrelop"></span>
         <h5 data-level="4.4.3.13" id="-tmathsfxnmathsfhrefsyntax-vrelopmathitvrelop"><span>4.4.3.13. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfxnmathsfhrefsyntax-vrelopmathitvrelop"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vrelop"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-vishiftop-mathit-vishiftop">
          <span id="exec-vishiftop"></span>
         <h5 data-level="4.4.3.14" id="-tmathsfxnmathsfhrefsyntax-vishiftopmathitvishiftop"><span>4.4.3.14. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfxnmathsfhrefsyntax-vishiftopmathitvishiftop"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vishiftop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vishiftop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-shape-mathit-shape-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-all-true">
          <span id="exec-vec-all-true"></span><span id="exec-vtestop"></span>
         <h5 data-level="4.4.3.15" id="-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfall_true"><span>4.4.3.15. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-shapemathitshapemathsfhrefsyntax-instr-vecmathsfall_true"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vtestop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-bitmask">
          <span id="exec-vec-bitmask"></span>
         <h5 data-level="4.4.3.16" id="-tmathsfxnmathsfhrefsyntax-instr-vecmathsfbitmask"><span>4.4.3.16. </span><span><span><span><span></span></span></span></span><a href="#-tmathsfxnmathsfhrefsyntax-instr-vecmathsfbitmask"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-bitmask"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>bit width</span></a> <span><span><span></span></span></span> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the two sequences <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-2-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-narrow-mathsf-t-1-mathsf-x-m-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx">
          <span id="exec-vec-narrow"></span>
         <h5 data-level="4.4.3.17" id="-t_2mathsfxnmathsfhrefsyntax-instr-vecmathsfnarrowmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsx"><span>4.4.3.17. </span><span><span><span><span></span></span></span></span><a href="#-t_2mathsfxnmathsfhrefsyntax-instr-vecmathsfnarrowmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsx"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>syntax</span></a>, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-narrow"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the two sequences <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-2-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-vcvtop-mathit-vcvtop-mathsf-t-1-mathsf-x-m-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx">
          <span id="exec-vcvtop"></span>
         <h5 data-level="4.4.3.18" id="-t_2mathsfxnmathsfhrefsyntax-vcvtopmathitvcvtopmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsx"><span>4.4.3.18. </span><span><span><span><span></span></span></span></span><a href="#-t_2mathsfxnmathsfhrefsyntax-vcvtopmathitvcvtopmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsx"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>syntax</span></a>, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vcvtop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-2-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-vcvtop-mathit-vcvtop-mathsf-xref-syntax-instructions-syntax-half-mathit-half-mathsf-t-1-mathsf-x-m-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx">
         <h5 data-level="4.4.3.19" id="-t_2mathsfxnmathsfhrefsyntax-vcvtopmathitvcvtopmathsf_hrefsyntax-halfmathithalfmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsx"><span>4.4.3.19. </span><span><span><span><span></span></span></span></span><a href="#-t_2mathsfxnmathsfhrefsyntax-vcvtopmathitvcvtopmathsf_hrefsyntax-halfmathithalfmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsx"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>syntax</span></a>, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vcvtop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the sequence <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the sequence <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
         <p>where:</p>
         
        </section>
        <section id="t-2-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-vcvtop-mathit-vcvtop-mathsf-t-1-mathsf-x-m-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx-mathsf-zero">
         <h5 data-level="4.4.3.20" id="-t_2mathsfxnmathsfhrefsyntax-vcvtopmathitvcvtopmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsxmathsf_zero"><span>4.4.3.20. </span><span><span><span><span></span></span></span></span><a href="#-t_2mathsfxnmathsfhrefsyntax-vcvtopmathitvcvtopmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsxmathsf_zero"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>syntax</span></a>, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vcvtop"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the two sequences <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="mathsf-i32x4-xref-syntax-instructions-syntax-instr-vec-mathsf-dot-mathsf-i16x8-s">
          <span id="exec-vec-dot"></span>
         <h5 data-level="4.4.3.21" id="-mathsfi32x4hrefsyntax-instr-vecmathsfdotmathsf_i16x8_s"><span>4.4.3.21. </span><span><span><span><span></span></span></span></span><a href="#-mathsfi32x4hrefsyntax-instr-vecmathsfdotmathsf_i16x8_s"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-dot"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-2-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-extmul-mathsf-xref-syntax-instructions-syntax-half-mathit-half-mathsf-t-1-mathsf-x-m-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx">
          <span id="exec-vec-extmul"></span>
         <h5 data-level="4.4.3.22" id="-t_2mathsfxnmathsfhrefsyntax-instr-vecmathsfextmulmathsf_hrefsyntax-halfmathithalfmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsx"><span>4.4.3.22. </span><span><span><span><span></span></span></span></span><a href="#-t_2mathsfxnmathsfhrefsyntax-instr-vecmathsfextmulmathsf_hrefsyntax-halfmathithalfmathsf_t_1mathsfxmmathsf_hrefsyntax-sxmathitsx"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>syntax</span></a>, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-extmul"><span>validation</span></a>, two values of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the sequence <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Let <span><span><span></span></span></span> be the sequence <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the sequence <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Let <span><span><span></span></span></span> be the sequence <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> onto the stack.</p>
         </li></ol>
         
         <p>where:</p>
         
        </section>
        <section id="t-2-mathsf-x-n-mathsf-xref-syntax-instructions-syntax-instr-vec-mathsf-extadd-pairwise-t-1-mathsf-x-m-xref-syntax-instructions-syntax-sx-mathit-sx">
          <span id="exec-vec-extadd-pairwise"></span>
         <h5 data-level="4.4.3.23" id="-t_2mathsfxnmathsfhrefsyntax-instr-vecmathsfextadd_pairwise_t_1mathsfxm_hrefsyntax-sxmathitsx"><span>4.4.3.23. </span><span><span><span><span></span></span></span></span><a href="#-t_2mathsfxnmathsfhrefsyntax-instr-vecmathsfextadd_pairwise_t_1mathsfxm_hrefsyntax-sxmathitsx"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>syntax</span></a>, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-vec-extadd-pairwise"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
       </section>
       <section id="parametric-instructions④">
         <span id="exec-instr-parametric"></span><span id="index-4⑨"></span>
        <h4 data-level="4.4.4" id="parametric-instructions⑤"><span>4.4.4. </span><span>Parametric Instructions</span><a href="#parametric-instructions⑤"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-parametric-mathsf-drop①">
          <span id="exec-drop"></span>
         <h5 data-level="4.4.4.1" id="-hrefsyntax-instr-parametricmathsfdrop①"><span>4.4.4.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-parametricmathsfdrop①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-drop"><span>validation</span></a>, a value is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-parametric-mathsf-select-t-ast①">
          <span id="exec-select"></span>
         <h5 data-level="4.4.4.2" id="-hrefsyntax-instr-parametricmathsfselect-tast①"><span>4.4.4.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-parametricmathsfselect-tast①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-select"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-select"><span>validation</span></a>, two more values (of the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a>) are on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Push the value <span><span><span></span></span></span> back to the stack.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Push the value <span><span><span></span></span></span> back to the stack.</p>
           </li></ol>
         </li></ol>
         
         <div role="note">
          <p>Note</p>
          <p>In future versions of WebAssembly, <span><span><span></span></span></span> may allow more than one value per choice.</p>
         </div>
        </section>
       </section>
       <section id="variable-instructions④">
         <span id="exec-instr-variable"></span><span id="index-5⑨"></span>
        <h4 data-level="4.4.5" id="variable-instructions⑤"><span>4.4.5. </span><span>Variable Instructions</span><a href="#variable-instructions⑤"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-local-get-x①">
          <span id="exec-local-get"></span>
         <h5 data-level="4.4.5.1" id="-hrefsyntax-instr-variablemathsflocalgetx①"><span>4.4.5.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsflocalgetx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-local-get"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the value <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-local-set-x①">
          <span id="exec-local-set"></span>
         <h5 data-level="4.4.5.2" id="-hrefsyntax-instr-variablemathsflocalsetx①"><span>4.4.5.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsflocalsetx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-local-set"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-local-set"><span>validation</span></a>, a value is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Replace <span><span><span></span></span></span> with the value <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-local-tee-x①">
          <span id="exec-local-tee"></span>
         <h5 data-level="4.4.5.3" id="-hrefsyntax-instr-variablemathsflocalteex①"><span>4.4.5.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsflocalteex①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-local-tee"><span>validation</span></a>, a value is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p><a href="#exec-local-set"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-global-get-x①">
          <span id="exec-global-get"></span>
         <h5 data-level="4.4.5.4" id="-hrefsyntax-instr-variablemathsfglobalgetx①"><span>4.4.5.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsfglobalgetx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-global-get"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaladdr"><span>global address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-global-get"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the value <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-variable-mathsf-global-set-x①">
          <span id="exec-global-set"></span>
         <h5 data-level="4.4.5.5" id="-hrefsyntax-instr-variablemathsfglobalsetx①"><span>4.4.5.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-variablemathsfglobalsetx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-global-set"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaladdr"><span>global address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-global-set"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-global-set"><span>validation</span></a>, a value is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Replace <span><span><span></span></span></span> with the value <span><span><span></span></span></span>.</p>
         </li></ol>
         
         <div role="note">
          <p>Note</p>
          <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-global-set"><span>Validation</span></a> ensures that the global is, in fact, marked as mutable.</p>
         </div>
        </section>
       </section>
       <section id="table-instructions④">
         <span id="exec-instr-table"></span><span id="index-6⑧"></span>
        <h4 data-level="4.4.6" id="table-instructions⑤"><span>4.4.6. </span><span>Table Instructions</span><a href="#table-instructions⑤"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-get-x①">
          <span id="exec-table-get"></span>
         <h5 data-level="4.4.6.1" id="-hrefsyntax-instr-tablemathsftablegetx①"><span>4.4.6.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablegetx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-get"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-get"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-get"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not smaller than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the value <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-set-x①">
          <span id="exec-table-set"></span>
         <h5 data-level="4.4.6.2" id="-hrefsyntax-instr-tablemathsftablesetx①"><span>4.4.6.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablesetx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-set"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-set"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-set"><span>validation</span></a>, a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference value</span></a> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-set"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not smaller than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>Replace the element <span><span><span></span></span></span> with <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-size-x①">
          <span id="exec-table-size"></span>
         <h5 data-level="4.4.6.3" id="-hrefsyntax-instr-tablemathsftablesizex①"><span>4.4.6.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablesizex①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-size"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-size"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the length of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-grow-x①">
          <span id="exec-table-grow"></span>
         <h5 data-level="4.4.6.4" id="-hrefsyntax-instr-tablemathsftablegrowx①"><span>4.4.6.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablegrowx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-grow"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-grow"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the length of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-grow"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-fill"><span>validation</span></a>, a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference value</span></a> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <span><span><span></span></span></span> value <span><span><span></span></span></span>, for which <span><span><span></span></span></span> is <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Either:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>If <a href="https://www.w3.org/TR/wasm-core-2/index.html#grow-table"><span>growing</span></a> <span><span><span></span></span></span> by <span><span><span></span></span></span> entries with initialization value <span><span><span></span></span></span> succeeds, then:</p>
             <ol>
              <li>
               <p>Push the value <span><span><span></span></span></span> to the stack.</p>
             </li></ol>
            </li><li>
             <p>Else:</p>
             <ol>
              <li>
               <p>Push the value <span><span><span></span></span></span> to the stack.</p>
             </li></ol>
           </li></ol>
          </div>
         </blockquote>
         <ol start="13">
          <li>
           <p>Or:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </div>
         </blockquote>
         
         <div role="note">
          <p>Note</p>
          <p>The <span><span><span></span></span></span> instruction is non-deterministic.
It may either succeed, returning the old table size <span><span><span></span></span></span>,
or fail, returning <span><span><span></span></span></span>.
Failure <em>must</em> occur if the referenced table instance has a maximum size defined that would be exceeded.
However, failure <em>can</em> occur in other cases as well.
In practice, the choice depends on the <a href="https://www.w3.org/TR/wasm-core-2/index.html#impl-exec"><span>resources</span></a> available to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a>.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-fill-x①">
          <span id="exec-table-fill"></span>
         <h5 data-level="4.4.6.5" id="-hrefsyntax-instr-tablemathsftablefillx①"><span>4.4.6.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablefillx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-fill"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-fill"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-fill"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-fill"><span>validation</span></a>, a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference value</span></a> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-fill"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
         </li></ol>
         <ol start="12">
          <li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Return.</p>
           </li></ol>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-copy-x-y①">
          <span id="exec-table-copy"></span>
         <h5 data-level="4.4.6.6" id="-hrefsyntax-instr-tablemathsftablecopyxy①"><span>4.4.6.6. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftablecopyxy①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-copy"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-copy"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-copy"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-copy"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-copy"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-copy"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-copy"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span> or <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>If <span><span><span></span></span></span>, then:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Return.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="18">
          <li>
           <p>If <span><span><span></span></span></span>, then:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Execute the instruction <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Execute the instruction <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Assert: due to the earlier check against the table size, <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Assert: due to the earlier check against the table size, <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="19">
          <li>
           <p>Else:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Assert: due to the earlier check against the table size, <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Assert: due to the earlier check against the table size, <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
           <ol start="3">
            <li>
             <p>Execute the instruction <span><span><span></span></span></span>.</p>
           </li></ol>
           <ol start="6">
            <li>
             <p>Execute the instruction <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="20">
          <li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-table-init-x-y①">
          <span id="exec-table-init"></span>
         <h5 data-level="4.4.6.7" id="-hrefsyntax-instr-tablemathsftableinitxy①"><span>4.4.6.7. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsftableinitxy①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-init"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-init"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-init"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemaddr"><span>element address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-init"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>element instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-init"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-init"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-init"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span> or <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>If <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Return.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference value</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to the earlier check against the table size, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Assert: due to the earlier check against the segment size, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-table-mathsf-elem-drop-x①">
          <span id="exec-elem-drop"></span>
         <h5 data-level="4.4.6.8" id="-hrefsyntax-instr-tablemathsfelemdropx①"><span>4.4.6.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-tablemathsfelemdropx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-elem-drop"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemaddr"><span>element address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-elem-drop"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Replace <span><span><span></span></span></span> with <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
       </section>
       <section id="memory-instructions④">
         <span id="exec-instr-memory"></span><span id="exec-memarg"></span><span id="index-7⑧"></span>
        <h4 data-level="4.4.7" id="memory-instructions⑤"><span>4.4.7. </span><span>Memory Instructions</span><a href="#memory-instructions⑤"></a></h4>
        <div role="note">
         <p>Note</p>
         <p>The alignment <span><span><span></span></span></span> in load and store instructions does not affect the semantics.
It is an indication that the offset <span><span><span></span></span></span> at which the memory is accessed is intended to satisfy the property <span><span><span></span></span></span>.
A WebAssembly implementation can use this hint to optimize for the intended use.
Unaligned access violating that property is still allowed and must succeed regardless of the annotation.
However, it may be substantially slower on some hardware.</p>
        </div>
        <section id="t-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-load-xref-syntax-instructions-syntax-memarg-mathit-memarg-and-t-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-xref-syntax-instructions-syntax-sx-mathit-sx-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="exec-loadn"></span><span id="exec-load"></span>
         <h5 data-level="4.4.7.1" id="-tmathsfhrefsyntax-instr-memorymathsfloadhrefsyntax-memargmathitmemarg-and--tmathsfhrefsyntax-instr-memorymathsfloadnmathsf_hrefsyntax-sxmathitsxhrefsyntax-memargmathitmemarg"><span>4.4.7.1. </span><span><span><span><span></span></span></span> and <span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-instr-memorymathsfloadhrefsyntax-memargmathitmemarg-and--tmathsfhrefsyntax-instr-memorymathsfloadnmathsf_hrefsyntax-sxmathitsxhrefsyntax-memargmathitmemarg"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-loadn"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-loadn"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-loadn"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not part of the instruction, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>bit width</span></a> <span><span><span></span></span></span> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number type</span></a> <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the byte sequence <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> and <span><span><span></span></span></span> are part of the instruction, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the integer for which <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the constant for which <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-load-m-mathsf-x-n-xref-syntax-instructions-syntax-sx-mathit-sx-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="exec-load-extend"></span>
         <h5 data-level="4.4.7.2" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfloadmmathsfxn_hrefsyntax-sxmathitsxhrefsyntax-memargmathitmemarg"><span>4.4.7.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfloadmmathsfxn_hrefsyntax-sxmathitsxhrefsyntax-memargmathitmemarg"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <blockquote>
            <div>
             <ol>
              <li>
               <p>Trap.</p>
             </li></ol>
            </div>
           </blockquote>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the byte sequence <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer for which <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-splat-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="exec-load-splat"></span>
         <h5 data-level="4.4.7.3" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfloadnmathsf_splathrefsyntax-memargmathitmemarg"><span>4.4.7.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfloadnmathsf_splathrefsyntax-memargmathitmemarg"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <blockquote>
            <div>
             <ol>
              <li>
               <p>Trap.</p>
             </li></ol>
            </div>
           </blockquote>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the byte sequence <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer for which <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-zero-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="exec-load-zero"></span>
         <h5 data-level="4.4.7.4" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfloadnmathsf_zerohrefsyntax-memargmathitmemarg"><span>4.4.7.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfloadnmathsf_zerohrefsyntax-memargmathitmemarg"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <blockquote>
            <div>
             <ol>
              <li>
               <p>Trap.</p>
             </li></ol>
            </div>
           </blockquote>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the byte sequence <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer for which <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-load-n-mathsf-lane-xref-syntax-instructions-syntax-memarg-mathit-memarg-x">
          <span id="exec-load-lane"></span>
         <h5 data-level="4.4.7.5" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfloadnmathsf_lanehrefsyntax-memargmathitmemargx"><span>4.4.7.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfloadnmathsf_lanehrefsyntax-memargmathitmemargx"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-load-extend"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the byte sequence <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the constant for which <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="t-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-store-xref-syntax-instructions-syntax-memarg-mathit-memarg-and-t-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-store-n-xref-syntax-instructions-syntax-memarg-mathit-memarg">
          <span id="exec-storen"></span><span id="exec-store"></span>
         <h5 data-level="4.4.7.6" id="-tmathsfhrefsyntax-instr-memorymathsfstorehrefsyntax-memargmathitmemarg-and--tmathsfhrefsyntax-instr-memorymathsfstorenhrefsyntax-memargmathitmemarg"><span>4.4.7.6. </span><span><span><span><span></span></span></span> and <span><span><span></span></span></span></span><a href="#-tmathsfhrefsyntax-instr-memorymathsfstorehrefsyntax-memargmathitmemarg-and--tmathsfhrefsyntax-instr-memorymathsfstorenhrefsyntax-memargmathitmemarg"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-storen"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-storen"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-storen"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-storen"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not part of the instruction, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>bit width</span></a> <span><span><span></span></span></span> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number type</span></a> <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>If <span><span><span></span></span></span> is part of the instruction, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Let <span><span><span></span></span></span> be the byte sequence <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the byte sequence <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Replace the bytes <span><span><span></span></span></span> with <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-types-syntax-valtype-mathsf-v128-mathsf-xref-syntax-instructions-syntax-instr-memory-mathsf-store-n-mathsf-lane-xref-syntax-instructions-syntax-memarg-mathit-memarg-x">
          <span id="exec-store-lane"></span>
         <h5 data-level="4.4.7.7" id="-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfstorenmathsf_lanehrefsyntax-memargmathitmemargx"><span>4.4.7.7. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-valtypemathsfv128mathsfhrefsyntax-instr-memorymathsfstorenmathsf_lanehrefsyntax-memargmathitmemargx"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-storen"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-storen"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-storen"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-storen"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the integer <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of computing <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Replace the bytes <span><span><span></span></span></span> with <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-size①">
          <span id="exec-memory-size"></span>
         <h5 data-level="4.4.7.8" id="-hrefsyntax-instr-memorymathsfmemorysize①"><span>4.4.7.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemorysize①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-size"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-size"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the length of <span><span><span></span></span></span> divided by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-grow①">
          <span id="exec-memory-grow"></span>
         <h5 data-level="4.4.7.9" id="-hrefsyntax-instr-memorymathsfmemorygrow①"><span>4.4.7.9. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemorygrow①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-grow"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-grow"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the length of <span><span><span></span></span></span> divided by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-grow"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <span><span><span></span></span></span> value <span><span><span></span></span></span>, for which <span><span><span></span></span></span> is <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Either:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>If <a href="https://www.w3.org/TR/wasm-core-2/index.html#grow-mem"><span>growing</span></a> <span><span><span></span></span></span> by <span><span><span></span></span></span> <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>pages</span></a> succeeds, then:</p>
             <ol>
              <li>
               <p>Push the value <span><span><span></span></span></span> to the stack.</p>
             </li></ol>
            </li><li>
             <p>Else:</p>
             <ol>
              <li>
               <p>Push the value <span><span><span></span></span></span> to the stack.</p>
             </li></ol>
           </li></ol>
          </div>
         </blockquote>
         <ol start="11">
          <li>
           <p>Or:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </div>
         </blockquote>
         
         <div role="note">
          <p>Note</p>
          <p>The <span><span><span></span></span></span> instruction is non-deterministic.
It may either succeed, returning the old memory size <span><span><span></span></span></span>,
or fail, returning <span><span><span></span></span></span>.
Failure <em>must</em> occur if the referenced memory instance has a maximum size defined that would be exceeded.
However, failure <em>can</em> occur in other cases as well.
In practice, the choice depends on the <a href="https://www.w3.org/TR/wasm-core-2/index.html#impl-exec"><span>resources</span></a> available to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a>.</p>
         </div>
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-fill①">
          <span id="exec-memory-fill"></span>
         <h5 data-level="4.4.7.10" id="-hrefsyntax-instr-memorymathsfmemoryfill①"><span>4.4.7.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemoryfill①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-fill"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-fill"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-fill"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-fill"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-fill"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>If <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Return.</p>
           </li></ol>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to the earlier check against the memory size, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-copy①">
          <span id="exec-memory-copy"></span>
         <h5 data-level="4.4.7.11" id="-hrefsyntax-instr-memorymathsfmemorycopy①"><span>4.4.7.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemorycopy①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-copy"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-copy"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-copy"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-copy"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-copy"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span> or <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>If <span><span><span></span></span></span>, then:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Return.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="14">
          <li>
           <p>If <span><span><span></span></span></span>, then:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Execute the instruction <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Execute the instruction <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Assert: due to the earlier check against the memory size, <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Assert: due to the earlier check against the memory size, <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="15">
          <li>
           <p>Else:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Assert: due to the earlier check against the memory size, <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Assert: due to the earlier check against the memory size, <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Execute the instruction <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Execute the instruction <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
            </li><li>
             <p>Push the value <span><span><span></span></span></span> to the stack.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="16">
          <li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-memory-init-x①">
          <span id="exec-memory-init"></span>
         <h5 data-level="4.4.7.12" id="-hrefsyntax-instr-memorymathsfmemoryinitx①"><span>4.4.7.12. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfmemoryinitx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-init"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-init"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-init"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-dataaddr"><span>data address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-init"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>data instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-init"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-init"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memory-init"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span> or <span><span><span></span></span></span> is larger than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>If <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Return.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the byte <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to the earlier check against the memory size, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Assert: due to the earlier check against the memory size, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Push the value <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Execute the instruction <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-memory-mathsf-data-drop-x①">
          <span id="exec-data-drop"></span>
         <h5 data-level="4.4.7.13" id="-hrefsyntax-instr-memorymathsfdatadropx①"><span>4.4.7.13. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-memorymathsfdatadropx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-data-drop"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-dataaddr"><span>data address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-data-drop"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Replace <span><span><span></span></span></span> with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>data instance</span></a> <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
       </section>
       <section id="control-instructions④">
         <span id="exec-instr-control"></span><span id="exec-label"></span><span id="index-8⑧"></span>
        <h4 data-level="4.4.8" id="control-instructions⑤"><span>4.4.8. </span><span>Control Instructions</span><a href="#control-instructions⑤"></a></h4>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-nop①">
          <span id="exec-nop"></span>
         <h5 data-level="4.4.8.1" id="-hrefsyntax-instr-controlmathsfnop①"><span>4.4.8.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfnop①"></a></h5>
         <ol>
          <li>
           <p>Do nothing.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-unreachable①">
          <span id="exec-unreachable"></span>
         <h5 data-level="4.4.8.2" id="-hrefsyntax-instr-controlmathsfunreachable①"><span>4.4.8.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfunreachable①"></a></h5>
         <ol>
          <li>
           <p>Trap.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-block-xref-syntax-instructions-syntax-blocktype-mathit-blocktype-xref-syntax-instructions-syntax-instr-mathit-instr-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end①">
          <span id="exec-block"></span>
         <h5 data-level="4.4.8.3" id="-hrefsyntax-instr-controlmathsfblockhrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend①"><span>4.4.8.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfblockhrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-blocktype"><span>validation</span></a>, <span><span><span></span></span></span> is defined.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the label whose arity is <span><span><span></span></span></span> and whose continuation is the end of the block.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-block"><span>validation</span></a>, there are at least <span><span><span></span></span></span> values on the top of the stack.</p>
          </li><li>
           <p>Pop the values <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p><a href="#exec-instr-seq-enter"><span>Enter</span></a> the block <span><span><span></span></span></span> with label <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-loop-xref-syntax-instructions-syntax-blocktype-mathit-blocktype-xref-syntax-instructions-syntax-instr-mathit-instr-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end①">
          <span id="exec-loop"></span>
         <h5 data-level="4.4.8.4" id="-hrefsyntax-instr-controlmathsfloophrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend①"><span>4.4.8.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfloophrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-blocktype"><span>validation</span></a>, <span><span><span></span></span></span> is defined.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the label whose arity is <span><span><span></span></span></span> and whose continuation is the start of the loop.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-loop"><span>validation</span></a>, there are at least <span><span><span></span></span></span> values on the top of the stack.</p>
          </li><li>
           <p>Pop the values <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p><a href="#exec-instr-seq-enter"><span>Enter</span></a> the block <span><span><span></span></span></span> with label <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-if-xref-syntax-instructions-syntax-blocktype-mathit-blocktype-xref-syntax-instructions-syntax-instr-mathit-instr-1-ast-xref-syntax-instructions-syntax-instr-control-mathsf-else-xref-syntax-instructions-syntax-instr-mathit-instr-2-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end①">
          <span id="exec-if"></span>
         <h5 data-level="4.4.8.5" id="-hrefsyntax-instr-controlmathsfifhrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstr_1asthrefsyntax-instr-controlmathsfelsehrefsyntax-instrmathitinstr_2asthrefsyntax-instr-controlmathsfend①"><span>4.4.8.5. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfifhrefsyntax-blocktypemathitblocktypehrefsyntax-instrmathitinstr_1asthrefsyntax-instr-controlmathsfelsehrefsyntax-instrmathitinstr_2asthrefsyntax-instr-controlmathsfend①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-if"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is non-zero, then:</p>
           <ol>
            <li>
             <p>Execute the block instruction <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Execute the block instruction <span><span><span></span></span></span>.</p>
           </li></ol>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-br-l①">
          <span id="exec-br"></span>
         <h5 data-level="4.4.8.6" id="-hrefsyntax-instr-controlmathsfbrl①"><span>4.4.8.6. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfbrl①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-br"><span>validation</span></a>, the stack contains at least <span><span><span></span></span></span> labels.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <span><span><span></span></span></span>-th label appearing on the stack, starting from the top and counting from zero.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the arity of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-br"><span>validation</span></a>, there are at least <span><span><span></span></span></span> values on the top of the stack.</p>
          </li><li>
           <p>Pop the values <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Repeat <span><span><span></span></span></span> times:</p>
           <ol>
            <li>
             <p>While the top of the stack is a value, do:</p>
             <ol>
              <li>
               <p>Pop the value from the stack.</p>
             </li></ol>
            </li><li>
             <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-br"><span>validation</span></a>, the top of the stack now is a label.</p>
            </li><li>
             <p>Pop the label from the stack.</p>
           </li></ol>
          </li><li>
           <p>Push the values <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Jump to the continuation of <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-br-if-l①">
          <span id="exec-br-if"></span>
         <h5 data-level="4.4.8.7" id="-hrefsyntax-instr-controlmathsfbr_ifl①"><span>4.4.8.7. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfbr_ifl①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-br-if"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is non-zero, then:</p>
           <ol>
            <li>
             <p><a href="#exec-br"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p>Do nothing.</p>
           </li></ol>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-br-table-l-ast-l-n①">
          <span id="exec-br-table"></span>
         <h5 data-level="4.4.8.8" id="-hrefsyntax-instr-controlmathsfbr_tablelastl_n①"><span>4.4.8.8. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfbr_tablelastl_n①"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-br-table"><span>validation</span></a>, a value of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is smaller than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the label <span><span><span></span></span></span>.</p>
            </li><li>
             <p><a href="#exec-br"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Else:</p>
           <ol>
            <li>
             <p><a href="#exec-br"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li></ol>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-return①">
          <span id="exec-return"></span>
         <h5 data-level="4.4.8.9" id="-hrefsyntax-instr-controlmathsfreturn①"><span>4.4.8.9. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfreturn①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the arity of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-return"><span>validation</span></a>, there are at least <span><span><span></span></span></span> values on the top of the stack.</p>
          </li><li>
           <p>Pop the results <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-return"><span>validation</span></a>, the stack contains at least one <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>While the top of the stack is not a frame, do:</p>
           <ol>
            <li>
             <p>Pop the top element from the stack.</p>
           </li></ol>
          </li><li>
           <p>Assert: the top of the stack is the frame <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Pop the frame from the stack.</p>
          </li><li>
           <p>Push <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Jump to the instruction after the original call that pushed the frame.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-call-x①">
          <span id="exec-call"></span>
         <h5 data-level="4.4.8.10" id="-hrefsyntax-instr-controlmathsfcallx①"><span>4.4.8.10. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfcallx①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-call"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p><a href="#exec-invoke"><span>Invoke</span></a> the function instance at address <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="xref-syntax-instructions-syntax-instr-control-mathsf-call-indirect-x-y①">
          <span id="exec-call-indirect"></span>
         <h5 data-level="4.4.8.11" id="-hrefsyntax-instr-controlmathsfcall_indirectxy①"><span>4.4.8.11. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-instr-controlmathsfcall_indirectxy①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-call-indirect"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-call-indirect"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-call-indirect"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-call-indirect"><span>validation</span></a>, a value with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> is on the top of the stack.</p>
          </li><li>
           <p>Pop the value <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not smaller than the length of <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-set"><span>validation of table mutation</span></a>, <span><span><span></span></span></span> is a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref-func"><span>function reference</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref-func"><span>function reference</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-table-set"><span>validation of table mutation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> and <span><span><span></span></span></span> differ, then:</p>
           <ol>
            <li>
             <p>Trap.</p>
           </li></ol>
          </li><li>
           <p><a href="#exec-invoke"><span>Invoke</span></a> the function instance at address <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
       </section>
       <section id="blocks">
         <span id="exec-instr-seq"></span><span id="index-9⑧"></span>
        <h4 data-level="4.4.9" id="blocks①"><span>4.4.9. </span><span>Blocks</span><a href="#blocks①"></a></h4>
        <p>The following auxiliary rules define the semantics of executing an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-seq"><span>instruction sequence</span></a> that forms a <a href="#exec-instr-control"><span>block</span></a>.</p>
        <section id="entering-xref-syntax-instructions-syntax-instr-mathit-instr-ast-with-label-l">
          <span id="exec-instr-seq-enter"></span>
         <h5 data-level="4.4.9.1" id="entering--hrefsyntax-instrmathitinstrast-with-label--l"><span>4.4.9.1. </span><span>Entering <span><span><span></span></span></span> with label <span><span><span></span></span></span></span><a href="#entering--hrefsyntax-instrmathitinstrast-with-label--l"></a></h5>
         <ol>
          <li>
           <p>Push <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Jump to the start of the instruction sequence <span><span><span></span></span></span>.</p>
         </li></ol>
         <div role="note">
          <p>Note</p>
          <p>No formal reduction rule is needed for entering an instruction sequence,
because the label <span><span><span></span></span></span> is embedded in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-admin"><span>administrative instruction</span></a> that structured control instructions reduce to directly.</p>
         </div>
        </section>
        <section id="exiting-xref-syntax-instructions-syntax-instr-mathit-instr-ast-with-label-l">
          <span id="exec-instr-seq-exit"></span>
         <h5 data-level="4.4.9.2" id="exiting--hrefsyntax-instrmathitinstrast-with-label--l"><span>4.4.9.2. </span><span>Exiting <span><span><span></span></span></span> with label <span><span><span></span></span></span></span><a href="#exiting--hrefsyntax-instrmathitinstrast-with-label--l"></a></h5>
         <p>When the end of a block is reached without a jump or trap aborting it, then the following steps are performed.</p>
         <ol>
          <li>
           <p>Pop all values <span><span><span></span></span></span> from the top of the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-instr-seq"><span>validation</span></a>, the label <span><span><span></span></span></span> is now on the top of the stack.</p>
          </li><li>
           <p>Pop the label from the stack.</p>
          </li><li>
           <p>Push <span><span><span></span></span></span> back to the stack.</p>
          </li><li>
           <p>Jump to the position after the <span><span><span></span></span></span> of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured control instruction</span></a> associated with the label <span><span><span></span></span></span>.</p>
         </li></ol>
         
         <div role="note">
          <p>Note</p>
          <p>This semantics also applies to the instruction sequence contained in a <span><span><span></span></span></span> instruction.
Therefore, execution of a loop falls off the end, unless a backwards branch is performed explicitly.</p>
         </div>
        </section>
       </section>
       <section id="function-calls">
         <span id="index-10⑥"></span>
        <h4 data-level="4.4.10" id="function-calls①"><span>4.4.10. </span><span>Function Calls</span><a href="#function-calls①"></a></h4>
        <p>The following auxiliary rules define the semantics of invoking a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instance</span></a> through one of the <a href="#exec-instr-control"><span>call instructions</span></a> and returning from it.</p>
        <section id="invocation-of-function-address-a">
          <span id="exec-invoke"></span>
         <h5 data-level="4.4.10.1" id="invocation-of-function-address--a"><span>4.4.10.1. </span><span>Invocation of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function address</span></a> <span><span><span></span></span></span></span><a href="#invocation-of-function-address--a"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-call"><span>validation</span></a>, <span><span><span></span></span></span> exists.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instance</span></a>, <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value types</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expression</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-call"><span>validation</span></a>, <span><span><span></span></span></span> values are on the top of the stack.</p>
          </li><li>
           <p>Pop the values <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Push the activation of <span><span><span></span></span></span> with arity <span><span><span></span></span></span> to the stack.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-label"><span>label</span></a> whose arity is <span><span><span></span></span></span> and whose continuation is the end of the function.</p>
          </li><li>
           <p><a href="#exec-instr-seq-enter"><span>Enter</span></a> the instruction sequence <span><span><span></span></span></span> with label <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="returning-from-a-function">
          <span id="exec-invoke-exit"></span>
         <h5 data-level="4.4.10.2" id="returning-from-a-function①"><span>4.4.10.2. </span><span>Returning from a function</span><a href="#returning-from-a-function①"></a></h5>
         <p>When the end of a function is reached without a jump (i.e., <span><span><span></span></span></span>) or trap aborting it, then the following steps are performed.</p>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the arity of the activation of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-instr-seq"><span>validation</span></a>, there are <span><span><span></span></span></span> values on the top of the stack.</p>
          </li><li>
           <p>Pop the results <span><span><span></span></span></span> from the stack.</p>
          </li><li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-func"><span>validation</span></a>, the frame <span><span><span></span></span></span> is now on the top of the stack.</p>
          </li><li>
           <p>Pop the frame from the stack.</p>
          </li><li>
           <p>Push <span><span><span></span></span></span> back to the stack.</p>
          </li><li>
           <p>Jump to the instruction after the original call.</p>
         </li></ol>
         
        </section>
        <section id="host-functions">
          <span id="exec-invoke-host"></span><span id="index-11⑥"></span>
         <h5 data-level="4.4.10.3" id="host-functions①"><span>4.4.10.3. </span><span>Host Functions</span><a href="#host-functions①"></a></h5>
         <p>Invoking a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-hostfunc"><span>host function</span></a> has non-deterministic behavior.
It may either terminate with a <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a> or return regularly.
However, in the latter case, it must consume and produce the right number and types of WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> on the stack,
according to its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a>.</p>
         <p>A host function may also modify the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a>.
However, all store modifications must result in an <a href="https://www.w3.org/TR/wasm-core-2/index.html#extend-store"><span>extension</span></a> of the original store, i.e., they must only modify mutable contents and must not have instances removed.
Furthermore, the resulting store must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-store"><span>valid</span></a>, i.e., all data and code in it is well-typed.</p>
         
         <p>Here, <span><span><span></span></span></span> denotes the implementation-defined execution of host function <span><span><span></span></span></span> in current store <span><span><span></span></span></span> with arguments <span><span><span></span></span></span>.
It yields a set of possible outcomes, where each element is either a pair of a modified store <span><span><span></span></span></span> and a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-result"><span>result</span></a> or the special value <span><span><span></span></span></span> indicating divergence.
A host function is non-deterministic if there is at least one argument for which the set of outcomes is not singular.</p>
         <p>For a WebAssembly implementation to be <a href="https://www.w3.org/TR/wasm-core-2/index.html#soundness"><span>sound</span></a> in the presence of host functions,
every <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>host function instance</span></a> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-hostfuncinst"><span>valid</span></a>,
which means that it adheres to suitable pre- and post-conditions:
under a <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-store"><span>valid store</span></a> <span><span><span></span></span></span>, and given arguments <span><span><span></span></span></span> matching the ascribed parameter types <span><span><span></span></span></span>,
executing the host function must yield a non-empty set of possible outcomes each of which is either divergence or consists of a valid store <span><span><span></span></span></span> that is an <a href="https://www.w3.org/TR/wasm-core-2/index.html#extend-store"><span>extension</span></a> of <span><span><span></span></span></span> and a result matching the ascribed return types <span><span><span></span></span></span>.
All these notions are made precise in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#soundness"><span>Appendix</span></a>.</p>
         <div role="note">
          <p>Note</p>
          <p>A host function can call back into WebAssembly by <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invocation"><span>invoking</span></a> a function <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exported</span></a> from a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.
However, the effects of any such call are subsumed by the non-deterministic behavior allowed for the host function.</p>
         </div>
        </section>
       </section>
       <section id="expressions④">
         <span id="exec-expr"></span><span id="index-12②"></span>
        <h4 data-level="4.4.11" id="expressions⑤"><span>4.4.11. </span><span>Expressions</span><a href="#expressions⑤"></a></h4>
        <p>An <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expression</span></a> is <em>evaluated</em> relative to a <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-notation-textual"><span>current</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a> pointing to its containing <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a>.</p>
        <ol>
         <li>
          <p>Jump to the start of the instruction sequence <span><span><span></span></span></span> of the expression.</p>
         </li><li>
          <p>Execute the instruction sequence.</p>
         </li><li>
          <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-expr"><span>validation</span></a>, the top of the stack contains a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a>.</p>
         </li><li>
          <p>Pop the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> <span><span><span></span></span></span> from the stack.</p>
        </li></ol>
        <p>The value <span><span><span></span></span></span> is the result of the evaluation.</p>
        
        <div role="note">
         <p>Note</p>
         <p>Evaluation iterates this reduction rule until reaching a value.
Expressions constituting <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a> bodies are executed during function <a href="#exec-invoke"><span>invocation</span></a>.</p>
        </div>
       </section>
      </section>
       <section id="modules⑤">
       <h3 data-level="4.5" id="modules⑥"><span>4.5. </span><span>Modules</span><a href="#modules⑥"></a></h3>
       <p>For modules, the execution semantics primarily defines <a href="#exec-instantiation"><span>instantiation</span></a>, which <a href="#alloc"><span>allocates</span></a> instances for a module and its contained definitions, initializes <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>tables</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memories</span></a> from contained <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data</span></a> segments, and invokes the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-start"><span>start function</span></a> if present. It also includes <a href="#exec-invocation"><span>invocation</span></a> of exported functions.</p>
       <p>Instantiation depends on a number of auxiliary notions for <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-import"><span>type-checking imports</span></a> and <a href="#alloc"><span>allocating</span></a> instances.</p>
       <section id="external-typing">
         <span id="valid-externval"></span><span id="index-0①⑤"></span>
        <h4 data-level="4.5.1" id="external-typing①"><span>4.5.1. </span><span>External Typing</span><a href="#external-typing①"></a></h4>
        <p>For the purpose of checking <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external values</span></a> against <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a>,
such values are classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a>.
The following auxiliary typing rules specify this typing relation relative to a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span> in which the referenced instances live.</p>
        <section id="xref-exec-runtime-syntax-externval-mathsf-func-a">
          <span id="valid-externval-func"></span><span id="index-1①⑤"></span>
         <h5 data-level="4.5.1.1" id="-hrefsyntax-externvalmathsffunca"><span>4.5.1.1. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-externvalmathsffunca"></a></h5>
         <ul>
          <li>
           <p>The store entry <span><span><span></span></span></span> must exist.</p>
          </li><li>
           <p>Then <span><span><span></span></span></span> is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-runtime-syntax-externval-mathsf-table-a">
          <span id="valid-externval-table"></span><span id="index-2①③"></span>
         <h5 data-level="4.5.1.2" id="-hrefsyntax-externvalmathsftablea"><span>4.5.1.2. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-externvalmathsftablea"></a></h5>
         <ul>
          <li>
           <p>The store entry <span><span><span></span></span></span> must exist.</p>
          </li><li>
           <p>Then <span><span><span></span></span></span> is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-runtime-syntax-externval-mathsf-mem-a">
          <span id="valid-externval-mem"></span><span id="index-3①⓪"></span>
         <h5 data-level="4.5.1.3" id="-hrefsyntax-externvalmathsfmema"><span>4.5.1.3. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-externvalmathsfmema"></a></h5>
         <ul>
          <li>
           <p>The store entry <span><span><span></span></span></span> must exist.</p>
          </li><li>
           <p>Then <span><span><span></span></span></span> is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-runtime-syntax-externval-mathsf-global-a">
          <span id="valid-externval-global"></span><span id="index-4①⓪"></span>
         <h5 data-level="4.5.1.4" id="-hrefsyntax-externvalmathsfglobala"><span>4.5.1.4. </span><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-externvalmathsfglobala"></a></h5>
         <ul>
          <li>
           <p>The store entry <span><span><span></span></span></span> must exist.</p>
          </li><li>
           <p>Then <span><span><span></span></span></span> is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="value-typing">
         <span id="valid-val"></span><span id="index-5①⓪"></span>
        <h4 data-level="4.5.2" id="value-typing①"><span>4.5.2. </span><span>Value Typing</span><a href="#value-typing①"></a></h4>
        <p>For the purpose of checking argument <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>values</span></a> against the parameter types of exported <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a>,
values are classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value types</span></a>.
The following auxiliary typing rules specify this typing relation relative to a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span> in which possibly referenced addresses live.</p>
        <section id="numeric-values-t-xref-syntax-instructions-syntax-instr-numeric-mathsf-const-c">
          <span id="valid-num"></span>
         <h5 data-level="4.5.2.1" id="numeric-values--threfsyntax-instr-numericmathsfconstc"><span>4.5.2.1. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>Numeric Values</span></a> <span><span><span></span></span></span></span><a href="#numeric-values--threfsyntax-instr-numericmathsfconstc"></a></h5>
         <ul>
          <li>
           <p>The value is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="null-references-xref-syntax-instructions-syntax-instr-ref-mathsf-ref-null-t">
          <span id="valid-ref"></span>
         <h5 data-level="4.5.2.2" id="null-references--hrefsyntax-instr-refmathsfrefnullt"><span>4.5.2.2. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>Null References</span></a> <span><span><span></span></span></span></span><a href="#null-references--hrefsyntax-instr-refmathsfrefnullt"></a></h5>
         <ul>
          <li>
           <p>The value is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="function-references-xref-exec-runtime-syntax-ref-mathsf-ref-a">
         <h5 data-level="4.5.2.3" id="function-references--hrefsyntax-refmathsfrefa"><span>4.5.2.3. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>Function References</span></a> <span><span><span></span></span></span></span><a href="#function-references--hrefsyntax-refmathsfrefa"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span> must be <a href="#valid-externval"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the value is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="external-references-xref-exec-runtime-syntax-ref-extern-mathsf-ref-extern-a">
         <h5 data-level="4.5.2.4" id="external-references--hrefsyntax-refexternmathsfrefexterna"><span>4.5.2.4. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref-extern"><span>External References</span></a> <span><span><span></span></span></span></span><a href="#external-references--hrefsyntax-refexternmathsfrefexterna"></a></h5>
         <ul>
          <li>
           <p>The value is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="allocation">
         <span id="alloc"></span><span id="index-6⑨"></span>
        <h4 data-level="4.5.3" id="allocation①"><span>4.5.3. </span><span>Allocation</span><a href="#allocation①"></a></h4>
        <p>New instances of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>functions</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>tables</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memories</span></a>, and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>globals</span></a> are <em>allocated</em> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span>, as defined by the following auxiliary functions.</p>
        <section id="functions⑥">
          <span id="alloc-func"></span><span id="index-7⑨"></span>
         <h5 data-level="4.5.3.1" id="functions⑦"><span>4.5.3.1. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>Functions</span></a></span><a href="#functions⑦"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a> to allocate and <span><span><span></span></span></span> its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the first free <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function address</span></a> in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> to the <span><span><span></span></span></span> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="host-functions②">
          <span id="alloc-hostfunc"></span><span id="index-8⑨"></span>
         <h5 data-level="4.5.3.2" id="host-functions③"><span>4.5.3.2. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-hostfunc"><span>Host Functions</span></a></span><a href="#host-functions③"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-hostfunc"><span>host function</span></a> to allocate and <span><span><span></span></span></span> its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the first free <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function address</span></a> in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> to the <span><span><span></span></span></span> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ol>
         
         <div role="note">
          <p>Note</p>
          <p>Host functions are never allocated by the WebAssembly semantics itself,
but may be allocated by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a>.</p>
         </div>
        </section>
        <section id="tables⑥">
          <span id="alloc-table"></span><span id="index-9⑨"></span>
         <h5 data-level="4.5.3.3" id="tables⑦"><span>4.5.3.3. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>Tables</span></a></span><a href="#tables⑦"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> to allocate and <span><span><span></span></span></span> the initialization value.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the structure of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the first free <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span> with <span><span><span></span></span></span> elements set to <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> to the <span><span><span></span></span></span> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="memories⑥">
          <span id="alloc-mem"></span><span id="index-10⑦"></span>
         <h5 data-level="4.5.3.4" id="memories⑦"><span>4.5.3.4. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>Memories</span></a></span><a href="#memories⑦"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> to allocate.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the structure of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the first free <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span> that contains <span><span><span></span></span></span> pages of zeroed <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a>.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> to the <span><span><span></span></span></span> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="globals⑥">
          <span id="alloc-global"></span><span id="index-11⑦"></span>
         <h5 data-level="4.5.3.5" id="globals⑦"><span>4.5.3.5. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>Globals</span></a></span><a href="#globals⑦"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> to allocate and <span><span><span></span></span></span> the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> to initialize the global with.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the first free <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaladdr"><span>global address</span></a> in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> to the <span><span><span></span></span></span> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="element-segments④">
          <span id="alloc-elem"></span><span id="index-12③"></span>
         <h5 data-level="4.5.3.6" id="element-segments⑤"><span>4.5.3.6. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>Element segments</span></a></span><a href="#element-segments⑤"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the elements’ type and <span><span><span></span></span></span> the vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>references</span></a> to allocate.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the first free <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemaddr"><span>element address</span></a> in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>element instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> to the <span><span><span></span></span></span> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="data-segments④">
          <span id="alloc-data"></span><span id="index-13①"></span>
         <h5 data-level="4.5.3.7" id="data-segments⑤"><span>4.5.3.7. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>Data segments</span></a></span><a href="#data-segments⑤"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a> to allocate.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the first free <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-dataaddr"><span>data address</span></a> in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>data instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> to the <span><span><span></span></span></span> of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="growing-tables">
          <span id="grow-table"></span><span id="index-14①"></span>
         <h5 data-level="4.5.3.8" id="growing-tables①"><span>4.5.3.8. </span><span>Growing <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>tables</span></a></span><a href="#growing-tables①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> to grow, <span><span><span></span></span></span> the number of elements by which to grow it, and <span><span><span></span></span></span> the initialization value.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> added to the length of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than or equal to <span><span><span></span></span></span>, then fail.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the structure of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> with <span><span><span></span></span></span> updated to <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-limits"><span>valid</span></a>, then fail.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> to <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Set <span><span><span></span></span></span> to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="growing-memories">
          <span id="grow-mem"></span><span id="index-15①"></span>
         <h5 data-level="4.5.3.9" id="growing-memories①"><span>4.5.3.9. </span><span>Growing <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memories</span></a></span><a href="#growing-memories①"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> to grow and <span><span><span></span></span></span> the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>pages</span></a> by which to grow it.</p>
          </li><li>
           <p>Assert: The length of <span><span><span></span></span></span> is divisible by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> added to the length of <span><span><span></span></span></span> divided by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than <span><span><span></span></span></span>, then fail.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the structure of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be <span><span><span></span></span></span> with <span><span><span></span></span></span> updated to <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-limits"><span>valid</span></a>, then fail.</p>
          </li><li>
           <p>Append <span><span><span></span></span></span> times <span><span><span></span></span></span> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a> with value <span><span><span></span></span></span> to <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Set <span><span><span></span></span></span> to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="alloc-module">
          <span id="index-16①"></span><span id="id1①①"></span>
         <h5 data-level="4.5.3.10" id="modules⑦"><span>4.5.3.10. </span><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>Modules</span></a></span><a href="#modules⑦"></a></h5>
         <p>The allocation function for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>modules</span></a> requires a suitable list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external values</span></a> that are assumed to <a href="https://www.w3.org/TR/wasm-core-2/index.html#match-externtype"><span>match</span></a> the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>import</span></a> vector of the module,
a list of initialization <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> for the module’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>globals</span></a>,
and list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference</span></a> vectors for the module’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segments</span></a>.</p>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> to allocate and <span><span><span></span></span></span> the vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external values</span></a> providing the module’s imports, <span><span><span></span></span></span> the initialization <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> of the module’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>globals</span></a>, and <span><span><span></span></span></span> the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference</span></a> vectors of the module’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segments</span></a>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function address</span></a> resulting from <a href="#alloc-func"><span>allocating</span></a> <span><span><span></span></span></span> for the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a> <span><span><span></span></span></span> defined below.</p>
           </li></ol>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>table</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> resulting from <a href="#alloc-table"><span>allocating</span></a> <span><span><span></span></span></span> with initialization value <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memory</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> resulting from <a href="#alloc-mem"><span>allocating</span></a> <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaladdr"><span>global address</span></a> resulting from <a href="#alloc-global"><span>allocating</span></a> <span><span><span></span></span></span> with initializer value <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemaddr"><span>element address</span></a> resulting from <a href="#alloc-elem"><span>allocating</span></a> an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>element instance</span></a> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span> with contents <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segment</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-dataaddr"><span>data address</span></a> resulting from <a href="#alloc-data"><span>allocating</span></a> a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>data instance</span></a> with contents <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function addresses</span></a> <span><span><span></span></span></span> in index order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table addresses</span></a> <span><span><span></span></span></span> in index order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory addresses</span></a> <span><span><span></span></span></span> in index order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaladdr"><span>global addresses</span></a> <span><span><span></span></span></span> in index order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemaddr"><span>element addresses</span></a> <span><span><span></span></span></span> in index order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-dataaddr"><span>data addresses</span></a> <span><span><span></span></span></span> in index order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function addresses</span></a> extracted from <span><span><span></span></span></span>, concatenated with <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table addresses</span></a> extracted from <span><span><span></span></span></span>, concatenated with <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory addresses</span></a> extracted from <span><span><span></span></span></span>, concatenated with <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaladdr"><span>global addresses</span></a> extracted from <span><span><span></span></span></span>, concatenated with <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>export</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
           <ol>
            <li>
             <p>If <span><span><span></span></span></span> is a function export for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcidx"><span>function index</span></a> <span><span><span></span></span></span>, then let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else, if <span><span><span></span></span></span> is a table export for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableidx"><span>table index</span></a> <span><span><span></span></span></span>, then let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else, if <span><span><span></span></span></span> is a memory export for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memidx"><span>memory index</span></a> <span><span><span></span></span></span>, then let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else, if <span><span><span></span></span></span> is a global export for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalidx"><span>global index</span></a> <span><span><span></span></span></span>, then let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-exportinst"><span>export instance</span></a> <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-exportinst"><span>export instances</span></a> <span><span><span></span></span></span> in index order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return <span><span><span></span></span></span>.</p>
         </li></ol>
         
         <p>where:</p>
         
         <p>Here, the notation <span><span><span></span></span></span> is shorthand for multiple <a href="#alloc"><span>allocations</span></a> of object kind <span><span><span></span></span></span>, defined as follows:</p>
         
         <p>Moreover, if the dots <span><span><span></span></span></span> are a sequence <span><span><span></span></span></span> (as for globals or tables), then the elements of this sequence are passed to the allocation function pointwise.</p>
         <div role="note">
          <p>Note</p>
          <p>The definition of module allocation is mutually recursive with the allocation of its associated functions, because the resulting module instance <span><span><span></span></span></span> is passed to the function allocator as an argument, in order to form the necessary closures.
In an implementation, this recursion is easily unraveled by mutating one or the other in a secondary step.</p>
         </div>
        </section>
       </section>
       <section id="instantiation①">
         <span id="exec-instantiation"></span><span id="exec-module"></span><span id="index-17①"></span>
        <h4 data-level="4.5.4" id="instantiation②"><span>4.5.4. </span><span>Instantiation</span><a href="#instantiation②"></a></h4>
        <p>Given a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span>, a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> <span><span><span></span></span></span> is instantiated with a list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external values</span></a> <span><span><span></span></span></span> supplying the required imports as follows.</p>
        <p>Instantiation checks that the module is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid"><span>valid</span></a> and the provided imports <a href="https://www.w3.org/TR/wasm-core-2/index.html#match-externtype"><span>match</span></a> the declared types,
and may <em>fail</em> with an error otherwise.
Instantiation can also result in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a> from initializing a table or memory from an active segment or from executing the start function.
It is up to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> to define how such conditions are reported.</p>
        <ol>
         <li>
          <p>If <span><span><span></span></span></span> is not <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>valid</span></a>, then:</p>
          <ol>
           <li>
            <p>Fail.</p>
          </li></ol>
         </li><li>
          <p>Assert: <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external types</span></a> <span><span><span></span></span></span> classifying its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a>.</p>
         </li><li>
          <p>If the number <span><span><span></span></span></span> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a> is not equal to the number <span><span><span></span></span></span> of provided <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external values</span></a>, then:</p>
          <ol>
           <li>
            <p>Fail.</p>
          </li></ol>
         </li><li>
          <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
          <ol>
           <li>
            <p>If <span><span><span></span></span></span> is not <a href="#valid-externval"><span>valid</span></a> with an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span> in store <span><span><span></span></span></span>, then:</p>
            <ol>
             <li>
              <p>Fail.</p>
            </li></ol>
           </li><li>
            <p>If <span><span><span></span></span></span> does not <a href="https://www.w3.org/TR/wasm-core-2/index.html#match-externtype"><span>match</span></a> <span><span><span></span></span></span>, then:</p>
            <ol>
             <li>
              <p>Fail.</p>
            </li></ol>
          </li></ol>
        </li></ol>
        <ol id="exec-initvals" start="5">
         <li>
          <p>Let <span><span><span></span></span></span> be the auxiliary module <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>instance</span></a> <span><span><span></span></span></span> that only consists of the imported globals and the imported and allocated functions from the final module instance <span><span><span></span></span></span>, defined below.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the auxiliary <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a> <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Push the frame <span><span><span></span></span></span> to the stack.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a> initialization <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> determined by <span><span><span></span></span></span> and <span><span><span></span></span></span>. These may be calculated as follows.</p>
          <ol>
           <li>
            <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
            <ol>
             <li>
              <p>Let <span><span><span></span></span></span> be the result of <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-expr"><span>evaluating</span></a> the initializer expression <span><span><span></span></span></span>.</p>
            </li></ol>
           </li><li>
            <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>validation</span></a>, the frame <span><span><span></span></span></span> is now on the top of the stack.</p>
           </li><li>
            <p>Let <span><span><span></span></span></span> be the concatenation of <span><span><span></span></span></span> in index order.</p>
          </li></ol>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference</span></a> vectors determined by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segments</span></a> in <span><span><span></span></span></span>. These may be calculated as follows.</p>
          <blockquote>
           <div>
            <ol>
             <li>
              <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, and for each element <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expression</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
              <ol>
               <li>
                <p>Let <span><span><span></span></span></span> be the result of <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-expr"><span>evaluating</span></a> the initializer expression <span><span><span></span></span></span>.</p>
              </li></ol>
             </li><li>
              <p>Let <span><span><span></span></span></span> be the concatenation of function elements <span><span><span></span></span></span> in order of index <span><span><span></span></span></span>.</p>
             </li><li>
              <p>Let <span><span><span></span></span></span> be the concatenation of function element vectors <span><span><span></span></span></span> in order of index <span><span><span></span></span></span>.</p>
            </li></ol>
           </div>
          </blockquote>
         </li><li>
          <p>Pop the frame <span><span><span></span></span></span> from the stack.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be a new module instance <a href="#alloc-module"><span>allocated</span></a> from <span><span><span></span></span></span> in store <span><span><span></span></span></span> with imports <span><span><span></span></span></span>, global initializer values <span><span><span></span></span></span>, and element segment contents <span><span><span></span></span></span>, and let <span><span><span></span></span></span> be the extended store produced by module allocation.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the auxiliary <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a> <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Push the frame <span><span><span></span></span></span> to the stack.</p>
         </li><li>
          <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> whose <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemmode"><span>mode</span></a> is of the form <span><span><span></span></span></span>, do:</p>
          <ol>
           <li>
            <p>Let <span><span><span></span></span></span> be the length of the vector <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instr-seq"><span>Execute</span></a> the instruction sequence <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-const"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-const"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-table-init"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-elem-drop"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
          </li></ol>
         </li><li>
          <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> whose <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemmode"><span>mode</span></a> is of the form <span><span><span></span></span></span>, do:</p>
          <ol>
           <li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-elem-drop"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
          </li></ol>
         </li><li>
          <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segment</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> whose <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datamode"><span>mode</span></a> is of the form <span><span><span></span></span></span>, do:</p>
          <ol>
           <li>
            <p>Assert: <span><span><span></span></span></span> is <span><span><span></span></span></span>.</p>
           </li><li>
            <p>Let <span><span><span></span></span></span> be the length of the vector <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instr-seq"><span>Execute</span></a> the instruction sequence <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-const"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-const"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-memory-init"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-data-drop"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
          </li></ol>
         </li><li>
          <p>If the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-start"><span>start function</span></a> <span><span><span></span></span></span> is not empty, then:</p>
          <ol>
           <li>
            <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-start"><span>start function</span></a> <span><span><span></span></span></span>.</p>
           </li><li>
            <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-call"><span>Execute</span></a> the instruction <span><span><span></span></span></span>.</p>
          </li></ol>
         </li><li>
          <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>validation</span></a>, the frame <span><span><span></span></span></span> is now on the top of the stack.</p>
         </li><li>
          <p>Pop the frame <span><span><span></span></span></span> from the stack.</p>
        </li></ol>
        
        <p>where:</p>
        
        <div role="note">
         <p>Note</p>
         <p>Module <a href="#alloc-module"><span>allocation</span></a> and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-expr"><span>evaluation</span></a> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a> initializers and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segments</span></a> are mutually recursive because the global initialization <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> <span><span><span></span></span></span> and element segment contents <span><span><span></span></span></span> are passed to the module allocator while depending on the module instance <span><span><span></span></span></span> and store <span><span><span></span></span></span> returned by allocation.
However, this recursion is just a specification device.
In practice, the initialization values can <a href="#exec-initvals"><span>be determined</span></a> beforehand by staging module allocation such that first, the module’s own <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instances</span></a> are pre-allocated in the store, then the initializer expressions are evaluated, then the rest of the module instance is allocated, and finally the new function instances’ <span><span><span></span></span></span> fields are set to that module instance.
This is possible because <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>validation</span></a> ensures that initialization expressions cannot actually call a function, only take their reference.</p>
         <p>All failure conditions are checked before any observable mutation of the store takes place.
Store mutation is not atomic;
it happens in individual steps that may be interleaved with other threads.</p>
         <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-expr"><span>Evaluation</span></a> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-constant"><span>constant expressions</span></a> does not affect the store.</p>
        </div>
       </section>
       <section id="invocation①">
         <span id="exec-invocation"></span><span id="index-18①"></span>
        <h4 data-level="4.5.5" id="invocation②"><span>4.5.5. </span><span>Invocation</span><a href="#invocation②"></a></h4>
        <p>Once a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> has been <a href="#exec-instantiation"><span>instantiated</span></a>, any exported function can be <em>invoked</em> externally via its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function address</span></a> <span><span><span></span></span></span> in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span> and an appropriate list <span><span><span></span></span></span> of argument <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a>.</p>
        <p>Invocation may <em>fail</em> with an error if the arguments do not fit the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a>.
Invocation can also result in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a>.
It is up to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> to define how such conditions are reported.</p>
        <div role="note">
         <p>Note</p>
         <p>If the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> API performs type checks itself, either statically or dynamically, before performing an invocation, then no failure other than traps can occur.</p>
        </div>
        <p>The following steps are performed:</p>
        <ol>
         <li>
          <p>Assert: <span><span><span></span></span></span> exists.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instance</span></a> <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
         </li><li>
          <p>If the length <span><span><span></span></span></span> of the provided argument values is different from the number <span><span><span></span></span></span> of expected arguments, then:</p>
          <ol>
           <li>
            <p>Fail.</p>
          </li></ol>
         </li><li>
          <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> and corresponding <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
          <ol>
           <li>
            <p>If <span><span><span></span></span></span> is not <a href="#valid-val"><span>valid</span></a> with value type <span><span><span></span></span></span>, then:</p>
            <ol>
             <li>
              <p>Fail.</p>
            </li></ol>
          </li></ol>
         </li><li>
          <p>Let <span><span><span></span></span></span> be the dummy <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a> <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Push the frame <span><span><span></span></span></span> to the stack.</p>
         </li><li>
          <p>Push the values <span><span><span></span></span></span> to the stack.</p>
         </li><li>
          <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invoke"><span>Invoke</span></a> the function instance at address <span><span><span></span></span></span>.</p>
        </li></ol>
        <p>Once the function has returned, the following steps are executed:</p>
        <ol>
         <li>
          <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-func"><span>validation</span></a>, <span><span><span></span></span></span> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> are on the top of the stack.</p>
         </li><li>
          <p>Pop <span><span><span></span></span></span> from the stack.</p>
         </li><li>
          <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>validation</span></a>, the frame <span><span><span></span></span></span> is now on the top of the stack.</p>
         </li><li>
          <p>Pop the frame <span><span><span></span></span></span> from the stack.</p>
        </li></ol>
        <p>The values <span><span><span></span></span></span> are returned as the results of the invocation.</p>
        
       </section>
      </section>
     </div>
    </section>
     <section id="binary-format">
      <span id="binary"></span>
     <h2 data-level="5" id="binary-format①"><span>5. </span><span>Binary Format</span><a href="#binary-format①"></a></h2>
     <div>
       <section id="conventions②④">
        <span id="index-0①⑥"></span>
       <h3 data-level="5.1" id="conventions②⑤"><span>5.1. </span><span>Conventions</span><a href="#conventions②⑤"></a></h3>
       <p>The binary format for WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#module"><span>modules</span></a> is a dense linear <em>encoding</em> of their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>abstract syntax</span></a>. <a href="#compression" id="id1①②" role="doc-noteref"><span>[</span>1<span>]</span></a></p>
       <p>The format is defined by an <em>attribute grammar</em> whose only terminal symbols are <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a>.
A byte sequence is a well-formed encoding of a module if and only if it is generated by the grammar.</p>
       <p>Each production of this grammar has exactly one synthesized attribute: the abstract syntax that the respective byte sequence encodes.
Thus, the attribute grammar implicitly defines a <em>decoding</em> function
(i.e., a parsing function for the binary format).</p>
       <p>Except for a few exceptions, the binary grammar closely mirrors the grammar of the abstract syntax.</p>
       <div role="note">
        <p>Note</p>
        <p>Some phrases of abstract syntax have multiple possible encodings in the binary format.
For example, numbers may be encoded as if they had optional leading zeros.
Implementations of decoders must support all possible alternatives;
implementations of encoders can pick any allowed encoding.</p>
       </div>
       <p>The recommended extension for files containing WebAssembly modules in binary format is “<span><span><span></span></span></span>”
and the recommended <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">Media Type</a> is “<span><span><span></span></span></span>”.</p>
       
       <section id="grammar①">
         <span id="binary-grammar"></span><span id="index-1①⑥"></span>
        <h4 data-level="5.1.1" id="grammar②"><span>5.1.1. </span><span>Grammar</span><a href="#grammar②"></a></h4>
        <p>The following conventions are adopted in defining grammar rules for the binary format.
They mirror the conventions used for <a href="https://www.w3.org/TR/wasm-core-2/index.html#grammar"><span>abstract syntax</span></a>.
In order to distinguish symbols of the binary syntax from symbols of the abstract syntax, <span><span><span></span></span></span> font is adopted for the former.</p>
        <ul>
         <li>
          <p>Terminal symbols are <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>bytes</span></a> expressed in hexadecimal notation: <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Nonterminal symbols are written in typewriter font: <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> is a sequence of <span><span><span></span></span></span> iterations  of <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> is a possibly empty sequence of iterations of <span><span><span></span></span></span>.
(This is a shorthand for <span><span><span></span></span></span> used where <span><span><span></span></span></span> is not relevant.)</p>
         </li><li>
          <p><span><span><span></span></span></span> is an optional occurrence of <span><span><span></span></span></span>.
(This is a shorthand for <span><span><span></span></span></span> where <span><span><span></span></span></span>.)</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the same language as the nonterminal <span><span><span></span></span></span>, but also binds the variable <span><span><span></span></span></span> to the attribute synthesized for <span><span><span></span></span></span>.
A pattern may also be used instead of a variable, e.g., <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Productions are written <span><span><span></span></span></span>, where each <span><span><span></span></span></span> is the attribute that is synthesized for <span><span><span></span></span></span> in the given case, usually from attribute variables bound in <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Some productions are augmented by side conditions in parentheses, which restrict the applicability of the production. They provide a shorthand for a combinatorial expansion of the production into many separate cases.</p>
         </li><li>
          <p>If the same meta variable or non-terminal symbol appears multiple times in a production (in the syntax or in an attribute), then all those occurrences must have the same instantiation.
(This is a shorthand for a side condition requiring multiple different variables to be equal.)</p>
        </li></ul>
        <div role="note">
         <p>Note</p>
         <p>For example, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-numtype"><span>binary grammar</span></a> for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number types</span></a> is given as follows:</p>
         
         <p>Consequently, the byte <span><span><span></span></span></span> encodes the type <span><span><span></span></span></span>, <span><span><span></span></span></span> encodes the type <span><span><span></span></span></span>, and so forth.
No other byte value is allowed as the encoding of a number type.</p>
         <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-limits"><span>binary grammar</span></a> for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-limits"><span>limits</span></a> is defined as follows:</p>
         
         <p>That is, a limits pair is encoded as either the byte <span><span><span></span></span></span> followed by the encoding of a <span><span><span></span></span></span> value,
or the byte <span><span><span></span></span></span> followed by two such encodings.
The variables <span><span><span></span></span></span> and <span><span><span></span></span></span> name the attributes of the respective <span><span><span></span></span></span> nonterminals, which in this case are the actual <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-uint"><span>unsigned integers</span></a> those decode into.
The attribute of the complete production then is the abstract syntax for the limit, expressed in terms of the former values.</p>
        </div>
       </section>
       <section id="auxiliary-notation②">
         <span id="binary-notation"></span>
        <h4 data-level="5.1.2" id="auxiliary-notation③"><span>5.1.2. </span><span>Auxiliary Notation</span><a href="#auxiliary-notation③"></a></h4>
        <p>When dealing with binary encodings the following notation is also used:</p>
        <ul>
         <li>
          <p><span><span><span></span></span></span> denotes the empty byte sequence.</p>
         </li><li>
          <p><span><span><span></span></span></span> is the length of the byte sequence generated from the production <span><span><span></span></span></span> in a derivation.</p>
        </li></ul>
       </section>
       <section id="vectors⑥">
         <span id="binary-vec"></span><span id="index-2①④"></span>
        <h4 data-level="5.1.3" id="vectors⑦"><span>5.1.3. </span><span>Vectors</span><a href="#vectors⑦"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec"><span>Vectors</span></a> are encoded with their <span><span><span></span></span></span> length followed by the encoding of their element sequence.</p>
        
       </section>
      </section>
       <section id="values⑤">
        <span id="binary-value"></span><span id="index-0①⑦"></span>
       <h3 data-level="5.2" id="values⑥"><span>5.2. </span><span>Values</span><a href="#values⑥"></a></h3>
       <section id="bytes②">
         <span id="binary-byte"></span><span id="index-1①⑦"></span>
        <h4 data-level="5.2.1" id="bytes③"><span>5.2.1. </span><span>Bytes</span><a href="#bytes③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>Bytes</span></a> encode themselves.</p>
        
       </section>
       <section id="integers④">
         <span id="binary-int"></span><span id="binary-uint"></span><span id="binary-sint"></span><span id="index-2①⑤"></span>
        <h4 data-level="5.2.2" id="integers⑤"><span>5.2.2. </span><span>Integers</span><a href="#integers⑤"></a></h4>
        <p>All <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-int"><span>integers</span></a> are encoded using the <a href="https://en.wikipedia.org/wiki/LEB128">LEB128</a> variable-length integer encoding, in either unsigned or signed variant.</p>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-uint"><span>Unsigned integers</span></a> are encoded in <a href="https://en.wikipedia.org/wiki/LEB128#Unsigned_LEB128">unsigned LEB128</a> format.
As an additional constraint, the total number of bytes encoding a value of type <span><span><span></span></span></span> must not exceed <span><span><span></span></span></span> bytes.</p>
        
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-sint"><span>Signed integers</span></a> are encoded in <a href="https://en.wikipedia.org/wiki/LEB128#Signed_LEB128">signed LEB128</a> format, which uses a two’s complement representation.
As an additional constraint, the total number of bytes encoding a value of type <span><span><span></span></span></span> must not exceed <span><span><span></span></span></span> bytes.</p>
        
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-int"><span>Uninterpreted integers</span></a> are encoded as signed integers.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The side conditions <span><span><span></span></span></span> in the productions for non-terminal bytes of the <span><span><span></span></span></span> and <span><span><span></span></span></span> encodings restrict the encoding’s length.
However, “trailing zeros” are still allowed within these bounds.
For example, <span><span><span></span></span></span> and <span><span><span></span></span></span> are both well-formed encodings for the value <span><span><span></span></span></span> as a <span><span><span></span></span></span>.
Similarly, either of <span><span><span></span></span></span> and <span><span><span></span></span></span> and <span><span><span></span></span></span> are well-formed encodings of the value <span><span><span></span></span></span> as a <span><span><span></span></span></span>.</p>
         <p>The side conditions on the value <span><span><span></span></span></span> of terminal bytes further enforce that
any unused bits in these bytes must be <span><span><span></span></span></span> for positive values and <span><span><span></span></span></span> for negative ones.
For example, <span><span><span></span></span></span> is malformed as a <span><span><span></span></span></span> encoding.
Similarly, both <span><span><span></span></span></span> and <span><span><span></span></span></span> are malformed as <span><span><span></span></span></span> encodings.</p>
        </div>
       </section>
       <section id="floating-point④">
         <span id="binary-float"></span><span id="index-3①①"></span>
        <h4 data-level="5.2.3" id="floating-point⑤"><span>5.2.3. </span><span>Floating-Point</span><a href="#floating-point⑤"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>Floating-point</span></a> values are encoded directly by their <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> (Section 3.4) bit pattern in <a href="https://en.wikipedia.org/wiki/Endianness#Little-endian">little endian</a> byte order:</p>
        
       </section>
       <section id="names②">
         <span id="binary-name"></span><span id="binary-utf8"></span><span id="index-4①①"></span>
        <h4 data-level="5.2.4" id="names③"><span>5.2.4. </span><span>Names</span><a href="#names③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>Names</span></a> are encoded as a <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-vec"><span>vector</span></a> of bytes containing the <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> (Section 3.9) UTF-8 encoding of the name’s character sequence.</p>
        
        <p>The auxiliary <span><span><span></span></span></span> function expressing this encoding is defined as follows:</p>
        
        <div role="note">
         <p>Note</p>
         <p>Unlike in some other formats, name strings are not 0-terminated.</p>
        </div>
       </section>
      </section>
       <section id="types⑥">
        <span id="binary-type"></span><span id="index-0①⑧"></span>
       <h3 data-level="5.3" id="types⑦"><span>5.3. </span><span>Types</span><a href="#types⑦"></a></h3>
       <div role="note">
        <p>Note</p>
        <p>In some places, possible types include both type constructors or types denoted by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-typeidx"><span>type indices</span></a>.
Thus, the binary format for type constructors corresponds to the encodings of small negative <span><span><span></span></span></span> values, such that they can unambiguously occur in the same place as (positive) type indices.</p>
       </div>
       <section id="number-types②">
         <span id="binary-numtype"></span><span id="index-1①⑧"></span>
        <h4 data-level="5.3.1" id="number-types③"><span>5.3.1. </span><span>Number Types</span><a href="#number-types③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>Number types</span></a> are encoded by a single byte.</p>
        
       </section>
       <section id="vector-types②">
         <span id="binary-vectype"></span><span id="index-2①⑥"></span>
        <h4 data-level="5.3.2" id="vector-types③"><span>5.3.2. </span><span>Vector Types</span><a href="#vector-types③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vectype"><span>Vector types</span></a> are also encoded by a single byte.</p>
        
       </section>
       <section id="reference-types②">
         <span id="binary-reftype"></span><span id="index-3①②"></span>
        <h4 data-level="5.3.3" id="reference-types③"><span>5.3.3. </span><span>Reference Types</span><a href="#reference-types③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>Reference types</span></a> are also encoded by a single byte.</p>
        
       </section>
       <section id="value-types②">
         <span id="binary-valtype"></span><span id="index-4①②"></span>
        <h4 data-level="5.3.4" id="value-types③"><span>5.3.4. </span><span>Value Types</span><a href="#value-types③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>Value types</span></a> are encoded with their respective encoding as a <a href="#binary-numtype"><span>number type</span></a>, <a href="#binary-vectype"><span>vector type</span></a>, or <a href="#binary-reftype"><span>reference type</span></a>.</p>
        
        <div role="note">
         <p>Note</p>
         <p>Value types can occur in contexts where <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-typeidx"><span>type indices</span></a> are also allowed, such as in the case of <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-blocktype"><span>block types</span></a>.
Thus, the binary format for types corresponds to the <a href="https://en.wikipedia.org/wiki/LEB128#Signed_LEB128">signed LEB128</a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-sint"><span>encoding</span></a> of small negative <span><span><span></span></span></span> values, so that they can coexist with (positive) type indices in the future.</p>
        </div>
       </section>
       <section id="result-types②">
         <span id="binary-resulttype"></span><span id="index-5①①"></span>
        <h4 data-level="5.3.5" id="result-types③"><span>5.3.5. </span><span>Result Types</span><a href="#result-types③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>Result types</span></a> are encoded by the respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-vec"><span>vectors</span></a> of <a href="#binary-valtype"><span>value types</span></a>.</p>
        
       </section>
       <section id="function-types④">
         <span id="binary-functype"></span><span id="index-6①⓪"></span>
        <h4 data-level="5.3.6" id="function-types⑤"><span>5.3.6. </span><span>Function Types</span><a href="#function-types⑤"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>Function types</span></a> are encoded by the byte <span><span><span></span></span></span> followed by the respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-vec"><span>vectors</span></a> of parameter and result types.</p>
        
       </section>
       <section id="limits⑤">
         <span id="binary-limits"></span><span id="index-7①⓪"></span>
        <h4 data-level="5.3.7" id="limits⑥"><span>5.3.7. </span><span>Limits</span><a href="#limits⑥"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-limits"><span>Limits</span></a> are encoded with a preceding flag indicating whether a maximum is present.</p>
        
       </section>
       <section id="memory-types④">
         <span id="binary-memtype"></span><span id="index-8①⓪"></span>
        <h4 data-level="5.3.8" id="memory-types⑤"><span>5.3.8. </span><span>Memory Types</span><a href="#memory-types⑤"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>Memory types</span></a> are encoded with their <a href="#binary-limits"><span>limits</span></a>.</p>
        
       </section>
       <section id="table-types④">
         <span id="binary-tabletype"></span><span id="index-9①⓪"></span>
        <h4 data-level="5.3.9" id="table-types⑤"><span>5.3.9. </span><span>Table Types</span><a href="#table-types⑤"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>Table types</span></a> are encoded with their <a href="#binary-limits"><span>limits</span></a> and the encoding of their element <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a>.</p>
        
       </section>
       <section id="global-types④">
         <span id="binary-globaltype"></span><span id="binary-mut"></span><span id="index-10⑧"></span>
        <h4 data-level="5.3.10" id="global-types⑤"><span>5.3.10. </span><span>Global Types</span><a href="#global-types⑤"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>Global types</span></a> are encoded by their <a href="#binary-valtype"><span>value type</span></a> and a flag for their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mut"><span>mutability</span></a>.</p>
        
       </section>
      </section>
       <section id="instructions⑥">
        <span id="binary-instr"></span><span id="index-0①⑨"></span>
       <h3 data-level="5.4" id="instructions⑦"><span>5.4. </span><span>Instructions</span><a href="#instructions⑦"></a></h3>
       <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>Instructions</span></a> are encoded by <em>opcodes</em>.
Each opcode is represented by a single byte,
and is followed by the instruction’s immediate arguments, where present.
The only exception are <a href="#binary-instr-control"><span>structured control instructions</span></a>, which consist of several opcodes bracketing their nested instruction sequences.</p>
       <div role="note">
        <p>Note</p>
        <p>Gaps in the byte code ranges for encoding instructions are reserved for future extensions.</p>
       </div>
       <section id="control-instructions⑥">
         <span id="binary-instr-control"></span><span id="index-1①⑨"></span>
        <h4 data-level="5.4.1" id="control-instructions⑦"><span>5.4.1. </span><span>Control Instructions</span><a href="#control-instructions⑦"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>Control instructions</span></a> have varying encodings. For structured instructions, the instruction sequences forming nested blocks are terminated with explicit opcodes for <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>Block types</span></a> are encoded in special compressed form, by either the byte <span><span><span></span></span></span> indicating the empty type, as a single <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-valtype"><span>value type</span></a>, or as a <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-typeidx"><span>type index</span></a> encoded as a positive <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-sint"><span>signed integer</span></a>.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The <span><span><span></span></span></span> opcode <span><span><span></span></span></span> in the encoding of an <span><span><span></span></span></span> instruction can be omitted if the following instruction sequence is empty.</p>
         <p>Unlike any <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-typeidx"><span>other occurrence</span></a>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-typeidx"><span>type index</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block type</span></a> is encoded as a positive <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-sint"><span>signed integer</span></a>, so that its signed LEB128 bit pattern cannot collide with the encoding of <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-valtype"><span>value types</span></a> or the special code <span><span><span></span></span></span>, which correspond to the LEB128 encoding of negative integers.
To avoid any loss in the range of allowed indices, it is treated as a 33 bit signed integer.</p>
        </div>
       </section>
       <section id="reference-instructions⑥">
         <span id="binary-instr-ref"></span><span id="index-2①⑦"></span>
        <h4 data-level="5.4.2" id="reference-instructions⑦"><span>5.4.2. </span><span>Reference Instructions</span><a href="#reference-instructions⑦"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-ref"><span>Reference instructions</span></a> are represented by single byte codes.</p>
        
       </section>
       <section id="parametric-instructions⑥">
         <span id="binary-instr-parametric"></span><span id="index-3①③"></span>
        <h4 data-level="5.4.3" id="parametric-instructions⑦"><span>5.4.3. </span><span>Parametric Instructions</span><a href="#parametric-instructions⑦"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-parametric"><span>Parametric instructions</span></a> are represented by single byte codes, possibly followed by a type annotation.</p>
        
       </section>
       <section id="variable-instructions⑥">
         <span id="binary-instr-variable"></span><span id="index-4①③"></span>
        <h4 data-level="5.4.4" id="variable-instructions⑦"><span>5.4.4. </span><span>Variable Instructions</span><a href="#variable-instructions⑦"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-variable"><span>Variable instructions</span></a> are represented by byte codes followed by the encoding of the respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index</span></a>.</p>
        
       </section>
       <section id="table-instructions⑥">
         <span id="binary-elem-drop"></span><span id="binary-table-init"></span><span id="binary-table-copy"></span><span id="binary-table-fill"></span><span id="binary-table-grow"></span><span id="binary-table-size"></span><span id="binary-table-set"></span><span id="binary-table-get"></span><span id="binary-instr-table"></span><span id="index-5①②"></span>
        <h4 data-level="5.4.5" id="table-instructions⑦"><span>5.4.5. </span><span>Table Instructions</span><a href="#table-instructions⑦"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-table"><span>Table instructions</span></a> are represented either by a single byte or a one byte prefix followed by a variable-length <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-uint"><span>unsigned integer</span></a>.</p>
        
       </section>
       <section id="memory-instructions⑥">
         <span id="binary-instr-memory"></span><span id="index-6①①"></span>
        <h4 data-level="5.4.6" id="memory-instructions⑦"><span>5.4.6. </span><span>Memory Instructions</span><a href="#memory-instructions⑦"></a></h4>
        <p>Each variant of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-memory"><span>memory instruction</span></a> is encoded with a different byte code. Loads and stores are followed by the encoding of their <span><span><span></span></span></span> immediate.</p>
        
        <div role="note">
         <p>Note</p>
         <p>In future versions of WebAssembly, the additional zero bytes occurring in the encoding of the <span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>, and <span><span><span></span></span></span> instructions may be used to index additional memories.</p>
        </div>
       </section>
       <section id="numeric-instructions⑥">
         <span id="binary-instr-numeric"></span><span id="index-7①①"></span>
        <h4 data-level="5.4.7" id="numeric-instructions⑦"><span>5.4.7. </span><span>Numeric Instructions</span><a href="#numeric-instructions⑦"></a></h4>
        <p>All variants of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-numeric"><span>numeric instructions</span></a> are represented by separate byte codes.</p>
        <p>The <span><span><span></span></span></span> instructions are followed by the respective literal.</p>
        
        <p>All other numeric instructions are plain opcodes without any immediates.</p>
        
        
        
        
        
        
        
        
        
        
        <p id="binary-cvtop-trunc-sat">The saturating truncation instructions all have a one byte prefix,
whereas the actual opcode is encoded by a variable-length <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-uint"><span>unsigned integer</span></a>.</p>
        
       </section>
       <section id="vector-instructions⑥">
         <span id="binary-instr-vec"></span><span id="index-8①①"></span>
        <h4 data-level="5.4.8" id="vector-instructions⑦"><span>5.4.8. </span><span>Vector Instructions</span><a href="#vector-instructions⑦"></a></h4>
        <p>All variants of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a> are represented by separate byte codes.
They all have a one byte prefix, whereas the actual opcode is encoded by a variable-length <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-uint"><span>unsigned integer</span></a>.</p>
        <p>Vector loads and stores are followed by the encoding of their <span><span><span></span></span></span> immediate.</p>
        
        <p>The <span><span><span></span></span></span> instruction is followed by 16 immediate bytes, which are converted into a <span><span><span></span></span></span> in <span><span><span></span></span></span> byte order:</p>
        
        <p id="binary-vternop">The <span><span><span></span></span></span> instruction is also followed by the encoding of 16 <span><span><span></span></span></span> immediates.</p>
        
        <p><span><span><span></span></span></span> and <span><span><span></span></span></span> instructions are followed by the encoding of a <span><span><span></span></span></span> immediate.</p>
        
        <p>All other vector instructions are plain opcodes without any immediates.</p>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
       </section>
       <section id="expressions⑥">
         <span id="binary-expr"></span><span id="index-9①①"></span>
        <h4 data-level="5.4.9" id="expressions⑦"><span>5.4.9. </span><span>Expressions</span><a href="#expressions⑦"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>Expressions</span></a> are encoded by their instruction sequence terminated with an explicit <span><span><span></span></span></span> opcode for <span><span><span></span></span></span>.</p>
        
       </section>
      </section>
       <section id="modules⑧">
       <h3 data-level="5.5" id="modules⑨"><span>5.5. </span><span>Modules</span><a href="#modules⑨"></a></h3>
       <p>The binary encoding of modules is organized into <em>sections</em>.
Most sections correspond to one component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> record,
except that <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function definitions</span></a> are split into two sections, separating their type declarations in the <a href="#binary-funcsec"><span>function section</span></a> from their bodies in the <a href="#binary-codesec"><span>code section</span></a>.</p>
       <div role="note">
        <p>Note</p>
        <p>This separation enables <em>parallel</em> and <em>streaming</em> compilation of the functions in a module.</p>
       </div>
       <section id="indices②">
         <span id="binary-index"></span><span id="binary-labelidx"></span><span id="binary-localidx"></span><span id="binary-dataidx"></span><span id="binary-elemidx"></span><span id="binary-globalidx"></span><span id="binary-memidx"></span><span id="binary-tableidx"></span><span id="binary-funcidx"></span><span id="binary-typeidx"></span><span id="index-0②⓪"></span>
        <h4 data-level="5.5.1" id="indices③"><span>5.5.1. </span><span>Indices</span><a href="#indices③"></a></h4>
        <p>All <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>indices</span></a> are encoded with their respective value.</p>
        
       </section>
       <section id="sections">
         <span id="binary-section"></span><span id="index-1②⓪"></span>
        <h4 data-level="5.5.2" id="sections①"><span>5.5.2. </span><span>Sections</span><a href="#sections①"></a></h4>
        <p>Each section consists of</p>
        <ul>
         <li>
          <p>a one-byte section <em>id</em>,</p>
         </li><li>
          <p>the <span><span><span></span></span></span> <em>size</em> of the contents, in bytes,</p>
         </li><li>
          <p>the actual <em>contents</em>, whose structure is dependent on the section id.</p>
        </li></ul>
        <p>Every section is optional; an omitted section is equivalent to the section being present with empty contents.</p>
        <p>The following parameterized grammar rule defines the generic structure of a section with id <span><span><span></span></span></span> and contents described by the grammar <span><span><span></span></span></span>.</p>
        
        <p>For most sections, the contents <span><span><span></span></span></span> encodes a <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-vec"><span>vector</span></a>.
In these cases, the empty result <span><span><span></span></span></span> is interpreted as the empty vector.</p>
        <div role="note">
         <p>Note</p>
         <p>Other than for unknown <a href="#binary-customsec"><span>custom sections</span></a>,
the <span><span><span></span></span></span> is not required for decoding, but can be used to skip sections when navigating through a binary.
The module is malformed if the size does not match the length of the binary contents <span><span><span></span></span></span>.</p>
        </div>
        <p>The following section ids are used:</p>
        <table>
         <thead>
          <tr>
           <th>
            <p>Id</p>
           </th><th>
            <p>Section</p>
         </th></tr></thead><tbody>
          <tr>
           <td>
            <p>0</p>
           </td><td>
            <p><a href="#binary-customsec"><span>custom section</span></a></p>
          </td></tr><tr>
           <td>
            <p>1</p>
           </td><td>
            <p><a href="#binary-typesec"><span>type section</span></a></p>
          </td></tr><tr>
           <td>
            <p>2</p>
           </td><td>
            <p><a href="#binary-importsec"><span>import section</span></a></p>
          </td></tr><tr>
           <td>
            <p>3</p>
           </td><td>
            <p><a href="#binary-funcsec"><span>function section</span></a></p>
          </td></tr><tr>
           <td>
            <p>4</p>
           </td><td>
            <p><a href="#binary-tablesec"><span>table section</span></a></p>
          </td></tr><tr>
           <td>
            <p>5</p>
           </td><td>
            <p><a href="#binary-memsec"><span>memory section</span></a></p>
          </td></tr><tr>
           <td>
            <p>6</p>
           </td><td>
            <p><a href="#binary-globalsec"><span>global section</span></a></p>
          </td></tr><tr>
           <td>
            <p>7</p>
           </td><td>
            <p><a href="#binary-exportsec"><span>export section</span></a></p>
          </td></tr><tr>
           <td>
            <p>8</p>
           </td><td>
            <p><a href="#binary-startsec"><span>start section</span></a></p>
          </td></tr><tr>
           <td>
            <p>9</p>
           </td><td>
            <p><a href="#binary-elemsec"><span>element section</span></a></p>
          </td></tr><tr>
           <td>
            <p>10</p>
           </td><td>
            <p><a href="#binary-codesec"><span>code section</span></a></p>
          </td></tr><tr>
           <td>
            <p>11</p>
           </td><td>
            <p><a href="#binary-datasec"><span>data section</span></a></p>
          </td></tr><tr>
           <td>
            <p>12</p>
           </td><td>
            <p><a href="#binary-datacountsec"><span>data count section</span></a></p>
        </td></tr></tbody></table>
        <div role="note">
         <p>Note</p>
         <p>Section ids do not always correspond to the <a href="#binary-module"><span>order of sections</span></a> in the encoding of a module.</p>
        </div>
       </section>
       <section id="custom-section">
         <span id="binary-customsec"></span><span id="index-2①⑧"></span>
        <h4 data-level="5.5.3" id="custom-section①"><span>5.5.3. </span><span>Custom Section</span><a href="#custom-section①"></a></h4>
        <p><em>Custom sections</em> have the id 0.
They are intended to be used for debugging information or third-party extensions, and are ignored by the WebAssembly semantics.
Their contents consist of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>name</span></a> further identifying the custom section, followed by an uninterpreted sequence of bytes for custom use.</p>
        
        <div role="note">
         <p>Note</p>
         <p>If an implementation interprets the data of a custom section, then errors in that data, or the placement of the section, must not invalidate the module.</p>
        </div>
       </section>
       <section id="type-section">
         <span id="binary-typesec"></span><span id="binary-typedef"></span><span id="index-3①④"></span>
        <h4 data-level="5.5.4" id="type-section①"><span>5.5.4. </span><span>Type Section</span><a href="#type-section①"></a></h4>
        <p>The <em>type section</em> has the id 1.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function types</span></a> that represent the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
       </section>
       <section id="import-section">
         <span id="binary-importsec"></span><span id="binary-importdesc"></span><span id="binary-import"></span><span id="index-4①④"></span>
        <h4 data-level="5.5.5" id="import-section①"><span>5.5.5. </span><span>Import Section</span><a href="#import-section①"></a></h4>
        <p>The <em>import section</em> has the id 2.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a> that represent the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
       </section>
       <section id="function-section">
         <span id="binary-funcsec"></span><span id="index-5①③"></span>
        <h4 data-level="5.5.6" id="function-section①"><span>5.5.6. </span><span>Function Section</span><a href="#function-section①"></a></h4>
        <p>The <em>function section</em> has the id 3.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-typeidx"><span>type indices</span></a> that represent the <span><span><span></span></span></span> fields of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a> in the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.
The <span><span><span></span></span></span> and <span><span><span></span></span></span> fields of the respective functions are encoded separately in the <a href="#binary-codesec"><span>code section</span></a>.</p>
        
       </section>
       <section id="table-section">
         <span id="binary-tablesec"></span><span id="binary-table"></span><span id="index-6①②"></span>
        <h4 data-level="5.5.7" id="table-section①"><span>5.5.7. </span><span>Table Section</span><a href="#table-section①"></a></h4>
        <p>The <em>table section</em> has the id 4.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>tables</span></a> that represent the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
       </section>
       <section id="memory-section">
         <span id="binary-memsec"></span><span id="binary-mem"></span><span id="index-7①②"></span>
        <h4 data-level="5.5.8" id="memory-section①"><span>5.5.8. </span><span>Memory Section</span><a href="#memory-section①"></a></h4>
        <p>The <em>memory section</em> has the id 5.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memories</span></a> that represent the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
       </section>
       <section id="global-section">
         <span id="binary-globalsec"></span><span id="binary-global"></span><span id="index-8①②"></span>
        <h4 data-level="5.5.9" id="global-section①"><span>5.5.9. </span><span>Global Section</span><a href="#global-section①"></a></h4>
        <p>The <em>global section</em> has the id 6.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>globals</span></a> that represent the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
       </section>
       <section id="export-section">
         <span id="binary-exportsec"></span><span id="binary-exportdesc"></span><span id="binary-export"></span><span id="index-9①②"></span>
        <h4 data-level="5.5.10" id="export-section①"><span>5.5.10. </span><span>Export Section</span><a href="#export-section①"></a></h4>
        <p>The <em>export section</em> has the id 7.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exports</span></a> that represent the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
       </section>
       <section id="start-section">
         <span id="binary-startsec"></span><span id="binary-start"></span><span id="index-10⑨"></span>
        <h4 data-level="5.5.11" id="start-section①"><span>5.5.11. </span><span>Start Section</span><a href="#start-section①"></a></h4>
        <p>The <em>start section</em> has the id 8.
It decodes into an optional <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-start"><span>start function</span></a> that represents the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
       </section>
       <section id="element-section">
         <span id="binary-elemkind"></span><span id="binary-elemsec"></span><span id="binary-elem"></span><span id="index-11⑧"></span>
        <h4 data-level="5.5.12" id="element-section①"><span>5.5.12. </span><span>Element Section</span><a href="#element-section①"></a></h4>
        <p>The <em>element section</em> has the id 9.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segments</span></a> that represent the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The initial integer can be interpreted as a bitfield.
Bit 0 distinguishes a passive or declarative segment from an active segment,
bit 1 indicates the presence of an explicit table index for an active segment and otherwise distinguishes passive from declarative segments,
bit 2 indicates the use of element type and element <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-expr"><span>expressions</span></a> instead of element kind and element indices.</p>
         <p>Additional element kinds may be added in future versions of WebAssembly.</p>
        </div>
       </section>
       <section id="code-section">
         <span id="binary-codesec"></span><span id="binary-local"></span><span id="binary-func"></span><span id="binary-code"></span><span id="index-12④"></span>
        <h4 data-level="5.5.13" id="code-section①"><span>5.5.13. </span><span>Code Section</span><a href="#code-section①"></a></h4>
        <p>The <em>code section</em> has the id 10.
It decodes into a vector of <em>code</em> entries that are pairs of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> vectors and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-expr"><span>expressions</span></a>.
They represent the <span><span><span></span></span></span> and <span><span><span></span></span></span> field of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a> in the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.
The <span><span><span></span></span></span> fields of the respective functions are encoded separately in the <a href="#binary-funcsec"><span>function section</span></a>.</p>
        <p>The encoding of each code entry consists of</p>
        <ul>
         <li>
          <p>the <span><span><span></span></span></span> <em>size</em> of the function code in bytes,</p>
         </li><li>
          <p>the actual <em>function code</em>, which in turn consists of</p>
          <ul>
           <li>
            <p>the declaration of <em>locals</em>,</p>
           </li><li>
            <p>the function <em>body</em> as an <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-expr"><span>expression</span></a>.</p>
          </li></ul>
        </li></ul>
        <p>Local declarations are compressed into a vector whose entries consist of</p>
        <ul>
         <li>
          <p>a <span><span><span></span></span></span> <em>count</em>,</p>
         </li><li>
          <p>a <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-valtype"><span>value type</span></a>,</p>
        </li></ul>
        <p>denoting <em>count</em> locals of the same value type.</p>
        
        <p>Here, <span><span><span></span></span></span> ranges over pairs <span><span><span></span></span></span>.
The meta function <span><span><span></span></span></span> concatenates all sequences <span><span><span></span></span></span> in <span><span><span></span></span></span>.
Any code for which the length of the resulting sequence is out of bounds of the maximum size of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec"><span>vector</span></a> is malformed.</p>
        <div role="note">
         <p>Note</p>
         <p>Like with <a href="#binary-section"><span>sections</span></a>, the code <span><span><span></span></span></span> is not needed for decoding, but can be used to skip functions when navigating through a binary.
The module is malformed if a size does not match the length of the respective function code.</p>
        </div>
       </section>
       <section id="data-section">
         <span id="binary-datasec"></span><span id="binary-data"></span><span id="index-13②"></span>
        <h4 data-level="5.5.14" id="data-section①"><span>5.5.14. </span><span>Data Section</span><a href="#data-section①"></a></h4>
        <p>The <em>data section</em> has the id 11.
It decodes into a vector of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segments</span></a> that represent the <span><span><span></span></span></span> component of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The initial integer can be interpreted as a bitfield.
Bit 0 indicates a passive segment,
bit 1 indicates the presence of an explicit memory index for an active segment.</p>
         <p>In the current version of WebAssembly, at most one memory may be defined or
imported in a single module, so all valid <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>active</span></a> data
segments have a <span><span><span></span></span></span> value of <span><span><span></span></span></span>.</p>
        </div>
       </section>
       <section id="data-count-section">
         <span id="binary-datacountsec"></span><span id="index-14②"></span>
        <h4 data-level="5.5.15" id="data-count-section①"><span>5.5.15. </span><span>Data Count Section</span><a href="#data-count-section①"></a></h4>
        <p>The <em>data count section</em> has the id 12.
It decodes into an optional <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-uint"><span>u32</span></a> that represents the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segments</span></a> in the <a href="#binary-datasec"><span>data section</span></a>. If this count does not match the length of the data segment vector, the module is malformed.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The data count section is used to simplify single-pass validation. Since the
data section occurs after the code section, the <span><span><span></span></span></span> and <span><span><span></span></span></span> instructions would not be able to check whether the data
segment index is valid until the data section is read. The data count section
occurs before the code section, so a single-pass validator can use this count
instead of deferring validation.</p>
        </div>
       </section>
       <section id="binary-module">
         <span id="binary-version"></span><span id="binary-magic"></span><span id="index-15②"></span><span id="id1①③"></span>
        <h4 data-level="5.5.16" id="modules①⓪"><span>5.5.16. </span><span>Modules</span><a href="#modules①⓪"></a></h4>
        <p>The encoding of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> starts with a preamble containing a 4-byte magic number (the string <span><span><span></span></span></span>) and a version field.
The current version of the WebAssembly binary format is 1.</p>
        <p>The preamble is followed by a sequence of <a href="#binary-section"><span>sections</span></a>. <a href="#binary-customsec"><span>Custom sections</span></a> may be inserted at any place in this sequence,
while other sections must occur at most once and in the prescribed order.
All sections can be empty.</p>
        <p>The lengths of vectors produced by the (possibly empty) <a href="#binary-funcsec"><span>function</span></a> and <a href="#binary-codesec"><span>code</span></a> section must match up.</p>
        <p>Similarly, the optional data count must match the length of the <a href="#binary-datasec"><span>data segment</span></a> vector.
Furthermore, it must be present if any <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-dataidx"><span>data index</span></a> occurs in the code section.</p>
        
        <p>where for each <span><span><span></span></span></span> in <span><span><span></span></span></span>,</p>
        
        <div role="note">
         <p>Note</p>
         <p>The version of the WebAssembly binary format may increase in the future
if backward-incompatible changes have to be made to the format.
However, such changes are expected to occur very infrequently, if ever.
The binary format is intended to be extensible,
such that future features can be added without incrementing its version.</p>
        </div>
       </section>
      </section>
     </div>
    </section>
     <section id="text-format">
      <span id="text"></span>
     <h2 data-level="6" id="text-format①"><span>6. </span><span>Text Format</span><a href="#text-format①"></a></h2>
     <div>
       <section id="conventions②⑥">
        <span id="index-0②①"></span>
       <h3 data-level="6.1" id="conventions②⑦"><span>6.1. </span><span>Conventions</span><a href="#conventions②⑦"></a></h3>
       <p>The textual format for WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#module"><span>modules</span></a> is a rendering of their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>abstract syntax</span></a> into <a href="https://en.wikipedia.org/wiki/S-expression">S-expressions</a>.</p>
       <p>Like the <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary"><span>binary format</span></a>, the text format is defined by an <em>attribute grammar</em>.
A text string is a well-formed description of a module if and only if it is generated by the grammar.
Each production of this grammar has at most one synthesized attribute: the abstract syntax that the respective character sequence expresses.
Thus, the attribute grammar implicitly defines a <em>parsing</em> function.
Some productions also take a <a href="#text-context"><span>context</span></a> as an inherited attribute
that records bound <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifiers</span></a>.</p>
       <p>Except for a few exceptions, the core of the text grammar closely mirrors the grammar of the abstract syntax.
However, it also defines a number of <em>abbreviations</em> that are “syntactic sugar” over the core syntax.</p>
       <p>The recommended extension for files containing WebAssembly modules in text format is “<span><span><span></span></span></span>”.
Files with this extension are assumed to be encoded in UTF-8, as per <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> (Section 2.5).</p>
       <section id="grammar③">
         <span id="text-grammar"></span><span id="index-1②①"></span>
        <h4 data-level="6.1.1" id="grammar④"><span>6.1.1. </span><span>Grammar</span><a href="#grammar④"></a></h4>
        <p>The following conventions are adopted in defining grammar rules of the text format.
They mirror the conventions used for <a href="https://www.w3.org/TR/wasm-core-2/index.html#grammar"><span>abstract syntax</span></a> and for the <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary"><span>binary format</span></a>.
In order to distinguish symbols of the textual syntax from symbols of the abstract syntax, <span><span><span></span></span></span> font is adopted for the former.</p>
        <ul>
         <li>
          <p>Terminal symbols are either literal strings of characters enclosed in quotes
or expressed as <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> scalar values: <span><span><span></span></span></span>, <span><span><span></span></span></span>.
(All characters written literally are unambiguously drawn from the 7-bit <a href="https://webstore.ansi.org/RecordDetail.aspx?sku=INCITS+4-1986%5bR2012%5d">ASCII</a> subset of Unicode.)</p>
         </li><li>
          <p>Nonterminal symbols are written in typewriter font: <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> is a sequence of <span><span><span></span></span></span> iterations  of <span><span><span></span></span></span>.</p>
         </li><li>
          <p><span><span><span></span></span></span> is a possibly empty sequence of iterations of <span><span><span></span></span></span>.
(This is a shorthand for <span><span><span></span></span></span> used where <span><span><span></span></span></span> is not relevant.)</p>
         </li><li>
          <p><span><span><span></span></span></span> is a sequence of one or more iterations of <span><span><span></span></span></span>.
(This is a shorthand for <span><span><span></span></span></span> where <span><span><span></span></span></span>.)</p>
         </li><li>
          <p><span><span><span></span></span></span> is an optional occurrence of <span><span><span></span></span></span>.
(This is a shorthand for <span><span><span></span></span></span> where <span><span><span></span></span></span>.)</p>
         </li><li>
          <p><span><span><span></span></span></span> denotes the same language as the nonterminal <span><span><span></span></span></span>, but also binds the variable <span><span><span></span></span></span> to the attribute synthesized for <span><span><span></span></span></span>.
A pattern may also be used instead of a variable, e.g., <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Productions are written <span><span><span></span></span></span>, where each <span><span><span></span></span></span> is the attribute that is synthesized for <span><span><span></span></span></span> in the given case, usually from attribute variables bound in <span><span><span></span></span></span>.</p>
         </li><li>
          <p>Some productions are augmented by side conditions in parentheses, which restrict the applicability of the production. They provide a shorthand for a combinatorial expansion of the production into many separate cases.</p>
         </li><li>
          <p>If the same meta variable or non-terminal symbol appears multiple times in a production (in the syntax or in an attribute), then all those occurrences must have the same instantiation.</p>
        </li></ul>
        <ul id="text-syntactic">
         <li>
          <p>A distinction is made between <em>lexical</em> and <em>syntactic</em> productions. For the latter, arbitrary <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-space"><span>white space</span></a> is allowed in any place where the grammar contains spaces. The productions defining <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-lexical"><span>lexical syntax</span></a> and the syntax of <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-value"><span>values</span></a> are considered lexical, all others are syntactic.</p>
        </li></ul>
        <div role="note">
         <p>Note</p>
         <p>For example, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-numtype"><span>textual grammar</span></a> for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-numtype"><span>number types</span></a> is given as follows:</p>
         
         <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-limits"><span>textual grammar</span></a> for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-limits"><span>limits</span></a> is defined as follows:</p>
         
         <p>The variables <span><span><span></span></span></span> and <span><span><span></span></span></span> name the attributes of the respective <span><span><span></span></span></span> nonterminals, which in this case are the actual <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-uint"><span>unsigned integers</span></a> those parse into.
The attribute of the complete production then is the abstract syntax for the limit, expressed in terms of the former values.</p>
        </div>
       </section>
       <section id="abbreviations">
         <span id="text-abbreviations"></span><span id="index-2①⑨"></span>
        <h4 data-level="6.1.2" id="abbreviations①"><span>6.1.2. </span><span>Abbreviations</span><a href="#abbreviations①"></a></h4>
        <p>In addition to the core grammar, which corresponds directly to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax"><span>abstract syntax</span></a>, the textual syntax also defines a number of <em>abbreviations</em> that can be used for convenience and readability.</p>
        <p>Abbreviations are defined by <em>rewrite rules</em> specifying their expansion into the core syntax:</p>
        
        <p>These expansions are assumed to be applied, recursively and in order of appearance, before applying the core grammar rules to construct the abstract syntax.</p>
       </section>
       <section id="contexts②">
         <span id="text-context"></span><span id="text-context-wf"></span><span id="index-3①⑤"></span>
        <h4 data-level="6.1.3" id="contexts③"><span>6.1.3. </span><span>Contexts</span><a href="#contexts③"></a></h4>
        <p>The text format allows the use of symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifiers</span></a> in place of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>indices</span></a>.
To resolve these identifiers into concrete indices,
some grammar productions are indexed by an <em>identifier context</em> <span><span><span></span></span></span> as a synthesized attribute that records the declared identifiers in each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index space</span></a>.
In addition, the context records the types defined in the module, so that <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-param"><span>parameter</span></a> indices can be computed for <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-func"><span>functions</span></a>.</p>
        <p>It is convenient to define identifier contexts as <a href="https://www.w3.org/TR/wasm-core-2/index.html#notation-record"><span>records</span></a> <span><span><span></span></span></span> with abstract syntax as follows:</p>
        
        <p>For each index space, such a context contains the list of <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifiers</span></a> assigned to the defined indices.
Unnamed indices are associated with empty (<span><span><span></span></span></span>) entries in these lists.</p>
        <p>An identifier context is <em>well-formed</em> if no index space contains duplicate identifiers.</p>
        <section id="id1①④">
         <h5 data-level="6.1.3.1" id="conventions②⑧"><span>6.1.3.1. </span><span>Conventions</span><a href="#conventions②⑧"></a></h5>
         <p>To avoid unnecessary clutter, empty components are omitted when writing out identifier contexts.
For example, the record <span><span><span></span></span></span> is shorthand for an <a href="#text-context"><span>identifier context</span></a> whose components are all empty.</p>
        </section>
       </section>
       <section id="vectors⑧">
         <span id="text-vec"></span><span id="index-4①⑤"></span>
        <h4 data-level="6.1.4" id="vectors⑨"><span>6.1.4. </span><span>Vectors</span><a href="#vectors⑨"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec"><span>Vectors</span></a> are written as plain sequences, but with a restriction on the length of these sequence.</p>
        
       </section>
      </section>
       <section id="lexical-format">
        <span id="text-lexical"></span><span id="index-0②②"></span>
       <h3 data-level="6.2" id="lexical-format①"><span>6.2. </span><span>Lexical Format</span><a href="#lexical-format①"></a></h3>
       <section id="characters">
         <span id="text-char"></span><span id="text-source"></span><span id="source"></span><span id="index-1②②"></span>
        <h4 data-level="6.2.1" id="characters①"><span>6.2.1. </span><span>Characters</span><a href="#characters①"></a></h4>
        <p>The text format assigns meaning to <em>source text</em>, which consists of a sequence of <em>characters</em>.
Characters are assumed to be represented as valid <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> (Section 2.4) <em>scalar values</em>.</p>
        
        <div role="note">
         <p>Note</p>
         <p>While source text may contain any Unicode character in <a href="#text-comment"><span>comments</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-string"><span>string</span></a> literals,
the rest of the grammar is formed exclusively from the characters supported by the 7-bit <a href="https://webstore.ansi.org/RecordDetail.aspx?sku=INCITS+4-1986%5bR2012%5d">ASCII</a> subset of Unicode.</p>
        </div>
       </section>
       <section id="tokens">
         <span id="text-token"></span><span id="text-reserved"></span><span id="text-keyword"></span><span id="index-2②⓪"></span>
        <h4 data-level="6.2.2" id="tokens①"><span>6.2.2. </span><span>Tokens</span><a href="#tokens①"></a></h4>
        <p>The character stream in the source text is divided, from left to right, into a sequence of <em>tokens</em>, as defined by the following grammar.</p>
        
        <p>Tokens are formed from the input character stream according to the <em>longest match</em> rule.
That is, the next token always consists of the longest possible sequence of characters that is recognized by the above lexical grammar.
Tokens can be separated by <a href="#text-space"><span>white space</span></a>,
but except for strings, they cannot themselves contain whitespace.</p>
        <p><em>Keyword</em> tokens are defined either implicitly by an occurrence of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-grammar"><span>terminal symbol</span></a> in literal form, such as <span><span><span></span></span></span>, in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-syntactic"><span>syntactic</span></a> production of this chapter, or explicitly where they arise in this chapter.</p>
        <p>Any token that does not fall into any of the other categories is considered <em>reserved</em>, and cannot occur in source text.</p>
        <div role="note">
         <p>Note</p>
         <p>The effect of defining the set of reserved tokens is that all tokens must be separated by either parentheses, <a href="#text-space"><span>white space</span></a>, or <a href="#text-comment"><span>comments</span></a>.
For example, <span><span><span></span></span></span> is a single reserved token, as is <span><span><span></span></span></span>.
Consequently, they are not recognized as two separate tokens <span><span><span></span></span></span> and <span><span><span></span></span></span>, or <span><span><span></span></span></span> and <span><span><span></span></span></span>, respectively, but instead disallowed.
This property of tokenization is not affected by the fact that the definition of reserved tokens overlaps with other token classes.</p>
        </div>
       </section>
       <section id="white-space">
         <span id="text-newline"></span><span id="text-format②"></span><span id="text-space"></span><span id="index-3①⑥"></span>
        <h4 data-level="6.2.3" id="white-space①"><span>6.2.3. </span><span>White Space</span><a href="#white-space①"></a></h4>
        <p><em>White space</em> is any sequence of literal space characters, formatting characters, or <a href="#text-comment"><span>comments</span></a>.
The allowed formatting characters correspond to a subset of the <a href="https://webstore.ansi.org/RecordDetail.aspx?sku=INCITS+4-1986%5bR2012%5d">ASCII</a> <em>format effectors</em>, namely, <em>horizontal tabulation</em> (<span><span><span></span></span></span>), <em>line feed</em> (<span><span><span></span></span></span>), and <em>carriage return</em> (<span><span><span></span></span></span>).</p>
        
        <p>The only relevance of white space is to separate <a href="#text-token"><span>tokens</span></a>. It is otherwise ignored.</p>
       </section>
       
      </section>
       <section id="values⑦">
        <span id="text-value"></span><span id="index-0②③"></span>
       <h3 data-level="6.3" id="values⑧"><span>6.3. </span><span>Values</span><a href="#values⑧"></a></h3>
       <p>The grammar productions in this section define <em>lexical syntax</em>,
hence no <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-space"><span>white space</span></a> is allowed.</p>
       <section id="integers⑥">
         <span id="text-int"></span><span id="text-uint"></span><span id="text-sint"></span><span id="text-hexnum"></span><span id="text-num"></span><span id="text-hexdigit"></span><span id="text-digit"></span><span id="text-sign"></span><span id="index-1②③"></span>
        <h4 data-level="6.3.1" id="integers⑦"><span>6.3.1. </span><span>Integers</span><a href="#integers⑦"></a></h4>
        <p>All <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-int"><span>integers</span></a> can be written in either decimal or hexadecimal notation.
In both cases, digits can optionally be separated by underscores.</p>
        
        <p>The allowed syntax for integer literals depends on size and signedness.
Moreover, their value must lie within the range of the respective type.</p>
        
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-int"><span>Uninterpreted integers</span></a> can be written as either signed or unsigned, and are normalized to unsigned in the abstract syntax.</p>
        
       </section>
       <section id="floating-point⑥">
         <span id="text-float"></span><span id="text-hexfloat"></span><span id="text-hexfrac"></span><span id="text-frac"></span><span id="index-2②①"></span>
        <h4 data-level="6.3.2" id="floating-point⑦"><span>6.3.2. </span><span>Floating-Point</span><a href="#floating-point⑦"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-float"><span>Floating-point</span></a> values can be represented in either decimal or hexadecimal notation.</p>
        
        <p>The value of a literal must not lie outside the representable range of the corresponding <a data-link-type="biblio" href="#biblio-ieee-754-2019" title="IEEE Standard for Floating-Point Arithmetic">[IEEE-754-2019]</a> type
(that is, a numeric value must not overflow to <span><span><span></span></span></span>),
but it may be <a href="https://www.w3.org/TR/wasm-core-2/index.html#aux-ieee"><span>rounded</span></a> to the nearest representable value.</p>
        <div role="note">
         <p>Note</p>
         <p>Rounding can be prevented by using hexadecimal notation with no more significant bits than supported by the required type.</p>
        </div>
        <p>Floating-point values may also be written as constants for <em>infinity</em> or <em>canonical NaN</em> (<em>not a number</em>).
Furthermore, arbitrary NaN values may be expressed by providing an explicit payload value.</p>
        
       </section>
       <section id="strings">
         <span id="text-string"></span><span id="text-byte"></span><span id="index-3①⑦"></span>
        <h4 data-level="6.3.3" id="strings①"><span>6.3.3. </span><span>Strings</span><a href="#strings①"></a></h4>
        <p><em>Strings</em> denote sequences of bytes that can represent both textual and binary data.
They are enclosed in quotation marks
and may contain any character other than <a href="https://webstore.ansi.org/RecordDetail.aspx?sku=INCITS+4-1986%5bR2012%5d">ASCII</a> control characters, quotation marks (<span><span><span></span></span></span>), or backslash (<span><span><span></span></span></span>),
except when expressed with an <em>escape sequence</em>.</p>
        
        <p>Each character in a string literal represents the byte sequence corresponding to its UTF-8 <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> (Section 2.5) encoding,
except for hexadecimal escape sequences <span><span><span></span></span></span>, which represent raw bytes of the respective value.</p>
        
       </section>
       <section id="names④">
         <span id="text-name"></span><span id="index-4①⑦"></span>
        <h4 data-level="6.3.4" id="names⑤"><span>6.3.4. </span><span>Names</span><a href="#names⑤"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>Names</span></a> are strings denoting a literal character sequence.
A name string must form a valid UTF-8 encoding as defined by <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> (Section 2.5) and is interpreted as a string of Unicode scalar values.</p>
        
        <div role="note">
         <p>Note</p>
         <p>Presuming the source text is itself encoded correctly,
strings that do not contain any uses of hexadecimal byte escapes are always valid names.</p>
        </div>
       </section>
       <section id="text-id">
         <span id="text-idchar"></span><span id="index-5①④"></span><span id="identifiers"></span>
        <h4 data-level="6.3.5" id="identifiers①"><span>6.3.5. </span><span>Identifiers</span><a href="#identifiers①"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>Indices</span></a> can be given in both numeric and symbolic form.
Symbolic <em>identifiers</em> that stand in lieu of indices start with <span><span><span></span></span></span>, followed by any sequence of printable <a href="https://webstore.ansi.org/RecordDetail.aspx?sku=INCITS+4-1986%5bR2012%5d">ASCII</a> characters that does not contain a space, quotation mark, comma, semicolon, or bracket.</p>
        
        <section id="conventions②⑨">
          <span id="text-id-fresh"></span>
         <h5 data-level="6.3.5.1" id="conventions③⓪"><span>6.3.5.1. </span><span>Conventions</span><a href="#conventions③⓪"></a></h5>
         <p>The expansion rules of some abbreviations require insertion of a <em>fresh</em> identifier.
That may be any syntactically valid identifier that does not already occur in the given source text.</p>
        </section>
       </section>
      </section>
       <section id="types⑧">
        <span id="text-type"></span><span id="index-0②④"></span>
       <h3 data-level="6.4" id="types⑨"><span>6.4. </span><span>Types</span><a href="#types⑨"></a></h3>
       <section id="number-types④">
         <span id="text-numtype"></span><span id="index-1②④"></span>
        <h4 data-level="6.4.1" id="number-types⑤"><span>6.4.1. </span><span>Number Types</span><a href="#number-types⑤"></a></h4>
        
       </section>
       <section id="vector-types④">
         <span id="text-vectype"></span><span id="index-2②②"></span>
        <h4 data-level="6.4.2" id="vector-types⑤"><span>6.4.2. </span><span>Vector Types</span><a href="#vector-types⑤"></a></h4>
        
       </section>
       <section id="reference-types④">
         <span id="text-heaptype"></span><span id="text-reftype"></span><span id="index-3①⑧"></span>
        <h4 data-level="6.4.3" id="reference-types⑤"><span>6.4.3. </span><span>Reference Types</span><a href="#reference-types⑤"></a></h4>
        
       </section>
       <section id="value-types④">
         <span id="text-valtype"></span><span id="index-4①⑧"></span>
        <h4 data-level="6.4.4" id="value-types⑤"><span>6.4.4. </span><span>Value Types</span><a href="#value-types⑤"></a></h4>
        
       </section>
       <section id="function-types⑥">
         <span id="text-functype"></span><span id="text-result"></span><span id="text-param"></span><span id="index-5①⑤"></span>
        <h4 data-level="6.4.5" id="function-types⑦"><span>6.4.5. </span><span>Function Types</span><a href="#function-types⑦"></a></h4>
        
        <div role="note">
         <p>Note</p>
         <p>The optional identifier names for parameters in a function type only have documentation purpose.
They cannot be referenced from anywhere.</p>
        </div>
        <section id="abbreviations②">
         <h5 data-level="6.4.5.1" id="abbreviations③"><span>6.4.5.1. </span><span>Abbreviations</span><a href="#abbreviations③"></a></h5>
         <p>Multiple anonymous parameters or results may be combined into a single declaration:</p>
         
        </section>
       </section>
       <section id="limits⑦">
         <span id="text-limits"></span><span id="index-6①③"></span>
        <h4 data-level="6.4.6" id="limits⑧"><span>6.4.6. </span><span>Limits</span><a href="#limits⑧"></a></h4>
        
       </section>
       <section id="memory-types⑥">
         <span id="text-memtype"></span><span id="index-7①③"></span>
        <h4 data-level="6.4.7" id="memory-types⑦"><span>6.4.7. </span><span>Memory Types</span><a href="#memory-types⑦"></a></h4>
        
       </section>
       <section id="table-types⑥">
         <span id="text-tabletype"></span><span id="index-8①③"></span>
        <h4 data-level="6.4.8" id="table-types⑦"><span>6.4.8. </span><span>Table Types</span><a href="#table-types⑦"></a></h4>
        
       </section>
       <section id="global-types⑥">
         <span id="text-globaltype"></span><span id="index-9①③"></span>
        <h4 data-level="6.4.9" id="global-types⑦"><span>6.4.9. </span><span>Global Types</span><a href="#global-types⑦"></a></h4>
        
       </section>
      </section>
       <section id="instructions⑧">
        <span id="text-instr"></span><span id="index-0②⑤"></span>
       <h3 data-level="6.5" id="instructions⑨"><span>6.5. </span><span>Instructions</span><a href="#instructions⑨"></a></h3>
       <p>Instructions are syntactically distinguished into <em>plain</em> and <em>structured</em> instructions.</p>
       
       <p>In addition, as a syntactic abbreviation, instructions can be written as S-expressions in <a href="#text-foldedinstr"><span>folded</span></a> form, to group them visually.</p>
       <section id="labels②">
         <span id="text-label"></span><span id="index-1②⑤"></span>
        <h4 data-level="6.5.1" id="labels③"><span>6.5.1. </span><span>Labels</span><a href="#labels③"></a></h4>
        <p><a href="#text-instr-control"><span>Structured control instructions</span></a> can be annotated with a symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>label identifier</span></a>.
They are the only <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-index"><span>symbolic identifiers</span></a> that can be bound locally in an instruction sequence.
The following grammar handles the corresponding update to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context"><span>identifier context</span></a> by <a href="https://www.w3.org/TR/wasm-core-2/index.html#notation-compose"><span>composing</span></a> the context with an additional label entry.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The new label entry is inserted at the <em>beginning</em> of the label list in the identifier context.
This effectively shifts all existing labels up by one,
mirroring the fact that control instructions are indexed relatively not absolutely.</p>
         <p>If a label with the same name already exists,
then it is shadowed and the earlier label becomes inaccessible.</p>
        </div>
       </section>
       <section id="control-instructions⑧">
         <span id="text-instr-control"></span><span id="text-plaininstr"></span><span id="text-blockinstr"></span><span id="index-2②③"></span>
        <h4 data-level="6.5.2" id="control-instructions⑨"><span>6.5.2. </span><span>Control Instructions</span><a href="#control-instructions⑨"></a></h4>
        <p id="text-instr-block"><span id="text-if"></span><span id="text-loop"></span><span id="text-block"></span><span id="text-blocktype"></span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>Structured control instructions</span></a> can bind an optional symbolic <a href="#text-label"><span>label identifier</span></a>.
The same label identifier may optionally be repeated after the corresponding <span><span><span></span></span></span> and <span><span><span></span></span></span> pseudo instructions, to indicate the matching delimiters.</p>
        <p>Their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block type</span></a> is given as a <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-typeuse"><span>type use</span></a>, analogous to the type of <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-func"><span>functions</span></a>.
However, the special case of a type use that is syntactically empty or consists of only a single <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-result"><span>result</span></a> is not regarded as an <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-typeuse-abbrev"><span>abbreviation</span></a> for an inline <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a>, but is parsed directly into an optional <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a>.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The side condition stating that the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context"><span>identifier context</span></a> <span><span><span></span></span></span> must only contain unnamed entries in the rule for <span><span><span></span></span></span> block types enforces that no identifier can be bound in any <span><span><span></span></span></span> declaration for a block type.</p>
        </div>
        <p id="text-call-indirect"><span id="text-call"></span><span id="text-return"></span><span id="text-br-table"></span><span id="text-br-if"></span><span id="text-br"></span><span id="text-unreachable"></span><span id="text-nop"></span>All other control instruction are represented verbatim.</p>
        
        <div role="note">
         <p>Note</p>
         <p>The side condition stating that the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context"><span>identifier context</span></a> <span><span><span></span></span></span> must only contain unnamed entries in the rule for <span><span><span></span></span></span> enforces that no identifier can be bound in any <span><span><span></span></span></span> declaration appearing in the type annotation.</p>
        </div>
        <section id="abbreviations④">
         <h5 data-level="6.5.2.1" id="abbreviations⑤"><span>6.5.2.1. </span><span>Abbreviations</span><a href="#abbreviations⑤"></a></h5>
         <p>The <span><span><span></span></span></span> keyword of an <span><span><span></span></span></span> instruction can be omitted if the following instruction sequence is empty.</p>
         
         <p>Also, for backwards compatibility, the table index to <span><span><span></span></span></span> can be omitted, defaulting to <span><span><span></span></span></span>.</p>
         
        </section>
       </section>
       <section id="reference-instructions⑧">
         <span id="text-instr-ref"></span><span id="index-3①⑨"></span>
        <h4 data-level="6.5.3" id="reference-instructions⑨"><span>6.5.3. </span><span>Reference Instructions</span><a href="#reference-instructions⑨"></a></h4>
        
       </section>
       <section id="parametric-instructions⑧">
         <span id="text-instr-parametric"></span><span id="index-4①⑨"></span>
        <h4 data-level="6.5.4" id="parametric-instructions⑨"><span>6.5.4. </span><span>Parametric Instructions</span><a href="#parametric-instructions⑨"></a></h4>
        
       </section>
       <section id="variable-instructions⑧">
         <span id="text-instr-variable"></span><span id="index-5①⑥"></span>
        <h4 data-level="6.5.5" id="variable-instructions⑨"><span>6.5.5. </span><span>Variable Instructions</span><a href="#variable-instructions⑨"></a></h4>
        
       </section>
       <section id="table-instructions⑧">
         <span id="text-instr-table"></span><span id="index-6①④"></span>
        <h4 data-level="6.5.6" id="table-instructions⑨"><span>6.5.6. </span><span>Table Instructions</span><a href="#table-instructions⑨"></a></h4>
        
        <section id="id1①⑤">
         <h5 data-level="6.5.6.1" id="abbreviations⑥"><span>6.5.6.1. </span><span>Abbreviations</span><a href="#abbreviations⑥"></a></h5>
         <p>For backwards compatibility, all <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableidx"><span>table indices</span></a> may be omitted from table instructions, defaulting to <span><span><span></span></span></span>.</p>
         
        </section>
       </section>
       <section id="memory-instructions⑧">
         <span id="text-instr-memory"></span><span id="index-7①④"></span>
        <h4 data-level="6.5.7" id="memory-instructions⑨"><span>6.5.7. </span><span>Memory Instructions</span><a href="#memory-instructions⑨"></a></h4>
        <p id="text-data-drop"><span id="text-memory-init"></span><span id="text-memory-copy"></span><span id="text-memory-fill"></span><span id="text-memory-grow"></span><span id="text-memory-size"></span><span id="text-storen"></span><span id="text-store"></span><span id="text-loadn"></span><span id="text-load"></span><span id="text-memarg"></span>The offset and alignment immediates to memory instructions are optional.
The offset defaults to <span><span><span></span></span></span>, the alignment to the storage size of the respective memory access, which is its <em>natural alignment</em>.
Lexically, an <span><span><span></span></span></span> or <span><span><span></span></span></span> phrase is considered a single <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-keyword"><span>keyword token</span></a>, so no <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-space"><span>white space</span></a> is allowed around the <span><span><span></span></span></span>.</p>
        
       </section>
       <section id="numeric-instructions⑧">
         <span id="text-instr-numeric"></span><span id="index-8①④"></span>
        <h4 data-level="6.5.8" id="numeric-instructions⑨"><span>6.5.8. </span><span>Numeric Instructions</span><a href="#numeric-instructions⑨"></a></h4>
        
        
        
        
        
        
        
        
        
        
        
       </section>
       <section id="vector-instructions⑧">
         <span id="text-instr-vec"></span><span id="index-9①④"></span>
        <h4 data-level="6.5.9" id="vector-instructions⑨"><span>6.5.9. </span><span>Vector Instructions</span><a href="#vector-instructions⑨"></a></h4>
        <p>Vector memory instructions have optional offset and alignment immediates, like the <a href="#text-memarg"><span>memory instructions</span></a>.</p>
        
        <p>Vector constant instructions have a mandatory <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-vec-shape"><span>shape</span></a> descriptor, which determines how the following values are parsed.</p>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
       </section>
       <section id="folded-instructions">
         <span id="text-foldedinstr"></span><span id="index-10①⓪"></span>
        <h4 data-level="6.5.10" id="folded-instructions①"><span>6.5.10. </span><span>Folded Instructions</span><a href="#folded-instructions①"></a></h4>
        <p>Instructions can be written as S-expressions by grouping them into <em>folded</em> form. In that notation, an instruction is wrapped in parentheses and optionally includes nested folded instructions to indicate its operands.</p>
        <p>In the case of <a href="#text-instr-block"><span>block instructions</span></a>, the folded form omits the <span><span><span></span></span></span> delimiter.
For <span><span><span></span></span></span> instructions, both branches have to be wrapped into nested S-expressions, headed by the keywords <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
        <p>The set of all phrases defined by the following abbreviations recursively forms the auxiliary syntactic class <span><span><span></span></span></span>.
Such a folded instruction can appear anywhere a regular instruction can.</p>
        
        <div role="note">
         <p>Note</p>
         <p>For example, the instruction sequence</p>
         
         <p>can be folded into</p>
         
         <p>Folded instructions are solely syntactic sugar,
no additional syntactic or type-based checking is implied.</p>
        </div>
       </section>
       <section id="expressions⑧">
         <span id="text-expr"></span><span id="index-11⑨"></span>
        <h4 data-level="6.5.11" id="expressions⑨"><span>6.5.11. </span><span>Expressions</span><a href="#expressions⑨"></a></h4>
        <p>Expressions are written as instruction sequences.
No explicit <span><span><span></span></span></span> keyword is included, since they only occur in bracketed positions.</p>
        
       </section>
      </section>
       <section id="modules①①">
       <h3 data-level="6.6" id="modules①②"><span>6.6. </span><span>Modules</span><a href="#modules①②"></a></h3>
       <section id="indices④">
         <span id="text-index"></span><span id="text-labelidx"></span><span id="text-localidx"></span><span id="text-globalidx"></span><span id="text-dataidx"></span><span id="text-elemidx"></span><span id="text-memidx"></span><span id="text-tableidx"></span><span id="text-funcidx"></span><span id="text-typeidx"></span><span id="index-0②⑥"></span>
        <h4 data-level="6.6.1" id="indices⑤"><span>6.6.1. </span><span>Indices</span><a href="#indices⑤"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>Indices</span></a> can be given either in raw numeric form or as symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifiers</span></a> when bound by a respective construct.
Such identifiers are looked up in the suitable space of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context"><span>identifier context</span></a> <span><span><span></span></span></span>.</p>
        
       </section>
       <section id="types①⓪">
         <span id="text-typedef"></span><span id="index-1②⑥"></span>
        <h4 data-level="6.6.2" id="types①①"><span>6.6.2. </span><span>Types</span><a href="#types①①"></a></h4>
        <p>Type definitions can bind a symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>type identifier</span></a>.</p>
        
       </section>
       <section id="type-uses">
         <span id="text-typeuse"></span><span id="index-2②④"></span>
        <h4 data-level="6.6.3" id="type-uses①"><span>6.6.3. </span><span>Type Uses</span><a href="#type-uses①"></a></h4>
        <p>A <em>type use</em> is a reference to a <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-type"><span>type definition</span></a>.
It may optionally be augmented by explicit inlined <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-param"><span>parameter</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-result"><span>result</span></a> declarations.
That allows binding symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifiers</span></a> to name the <a href="#text-localidx"><span>local indices</span></a> of parameters.
If inline declarations are given, then their types must match the referenced <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-type"><span>function type</span></a>.</p>
        
        <p>The synthesized attribute of a <span><span><span></span></span></span> is a pair consisting of both the used <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-typeidx"><span>type index</span></a> and the local <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context"><span>identifier context</span></a> containing possible parameter identifiers.
The following auxiliary function extracts optional identifiers from parameters:</p>
        
        <div role="note">
         <p>Note</p>
         <p>Both productions overlap for the case that the function type is <span><span><span></span></span></span>.
However, in that case, they also produce the same results, so that the choice is immaterial.</p>
         <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context-wf"><span>well-formedness</span></a> condition on <span><span><span></span></span></span> ensures that the parameters do not contain duplicate identifiers.</p>
        </div>
        <section id="abbreviations⑦">
          <span id="text-typeuse-abbrev"></span>
         <h5 data-level="6.6.3.1" id="abbreviations⑧"><span>6.6.3.1. </span><span>Abbreviations</span><a href="#abbreviations⑧"></a></h5>
         <p>A <span><span><span></span></span></span> may also be replaced entirely by inline <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-param"><span>parameter</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-result"><span>result</span></a> declarations.
In that case, a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-typeidx"><span>type index</span></a> is automatically inserted:</p>
         
         <p>where <span><span><span></span></span></span> is the smallest existing <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-typeidx"><span>type index</span></a> whose definition in the current module is the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.
If no such index exists, then a new <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-type"><span>type definition</span></a> of the form</p>
         
         <p>is inserted at the end of the module.</p>
         <p>Abbreviations are expanded in the order they appear, such that previously inserted type definitions are reused by consecutive expansions.</p>
        </section>
       </section>
       <section id="imports④">
         <span id="text-import"></span><span id="text-importdesc"></span><span id="index-3②⓪"></span>
        <h4 data-level="6.6.4" id="imports⑤"><span>6.6.4. </span><span>Imports</span><a href="#imports⑤"></a></h4>
        <p>The descriptors in imports can bind a symbolic function, table, memory, or global <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifier</span></a>.</p>
        
        <section id="id1①⑥">
         <h5 data-level="6.6.4.1" id="abbreviations⑨"><span>6.6.4.1. </span><span>Abbreviations</span><a href="#abbreviations⑨"></a></h5>
         <p>As an abbreviation, imports may also be specified inline with <a href="#text-func"><span>function</span></a>, <a href="#text-table"><span>table</span></a>, <a href="#text-mem"><span>memory</span></a>, or <a href="#text-global"><span>global</span></a> definitions; see the respective sections.</p>
        </section>
       </section>
       <section id="functions⑧">
         <span id="text-func"></span><span id="text-local"></span><span id="index-4②⓪"></span>
        <h4 data-level="6.6.5" id="functions⑨"><span>6.6.5. </span><span>Functions</span><a href="#functions⑨"></a></h4>
        <p>Function definitions can bind a symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>function identifier</span></a>, and <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>local identifiers</span></a> for its <a href="#text-typeuse"><span>parameters</span></a> and locals.</p>
        
        <p>The definition of the local <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context"><span>identifier context</span></a> <span><span><span></span></span></span> uses the following auxiliary function to extract optional identifiers from locals:</p>
        
        <div role="note">
         <p>Note</p>
         <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context-wf"><span>well-formedness</span></a> condition on <span><span><span></span></span></span> ensures that parameters and locals do not contain duplicate identifiers.</p>
        </div>
         <span id="index-5①⑦"></span>
        <section id="text-func-abbrev">
          <span id="index-6①⑤"></span><span id="id2⑦"></span>
         <h5 data-level="6.6.5.1" id="abbreviations①⓪"><span>6.6.5.1. </span><span>Abbreviations</span><a href="#abbreviations①⓪"></a></h5>
         <p>Multiple anonymous locals may be combined into a single declaration:</p>
         
         <p>Functions can be defined as <a href="#text-import"><span>imports</span></a> or <a href="#text-export"><span>exports</span></a> inline:</p>
         
         <div role="note">
          <p>Note</p>
          <p>The latter abbreviation can be applied repeatedly, if “<span><span><span></span></span></span>” contains additional export clauses.
Consequently, a function declaration can contain any number of exports, possibly followed by an import.</p>
         </div>
        </section>
       </section>
       <section id="tables⑧">
         <span id="text-table"></span><span id="index-7①⑤"></span>
        <h4 data-level="6.6.6" id="tables⑨"><span>6.6.6. </span><span>Tables</span><a href="#tables⑨"></a></h4>
        <p>Table definitions can bind a symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>table identifier</span></a>.</p>
        
         <span id="index-8①⑤"></span><span id="index-9①⑤"></span>
        <section id="text-table-abbrev">
          <span id="index-10①①"></span><span id="id3③"></span>
         <h5 data-level="6.6.6.1" id="abbreviations①①"><span>6.6.6.1. </span><span>Abbreviations</span><a href="#abbreviations①①"></a></h5>
         <p>An <a href="#text-elem"><span>element segment</span></a> can be given inline with a table definition, in which case its offset is <span><span><span></span></span></span> and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-limits"><span>limits</span></a> of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-tabletype"><span>table type</span></a> are inferred from the length of the given segment:</p>
         
         
         <p>Tables can be defined as <a href="#text-import"><span>imports</span></a> or <a href="#text-export"><span>exports</span></a> inline:</p>
         
         <div role="note">
          <p>Note</p>
          <p>The latter abbreviation can be applied repeatedly, if “<span><span><span></span></span></span>” contains additional export clauses.
Consequently, a table declaration can contain any number of exports, possibly followed by an import.</p>
         </div>
        </section>
       </section>
       <section id="memories⑧">
         <span id="text-mem"></span><span id="index-11①⓪"></span>
        <h4 data-level="6.6.7" id="memories⑨"><span>6.6.7. </span><span>Memories</span><a href="#memories⑨"></a></h4>
        <p>Memory definitions can bind a symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>memory identifier</span></a>.</p>
        
         <span id="index-12⑤"></span><span id="index-13③"></span>
        <section id="text-mem-abbrev">
          <span id="index-14③"></span><span id="id4②"></span>
         <h5 data-level="6.6.7.1" id="abbreviations①②"><span>6.6.7.1. </span><span>Abbreviations</span><a href="#abbreviations①②"></a></h5>
         <p>A <a href="#text-data"><span>data segment</span></a> can be given inline with a memory definition, in which case its offset is <span><span><span></span></span></span> and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-limits"><span>limits</span></a> of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-memtype"><span>memory type</span></a> are inferred from the length of the data, rounded up to <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a>:</p>
         
         <p>Memories can be defined as <a href="#text-import"><span>imports</span></a> or <a href="#text-export"><span>exports</span></a> inline:</p>
         
         <div role="note">
          <p>Note</p>
          <p>The latter abbreviation can be applied repeatedly, if “<span><span><span></span></span></span>” contains additional export clauses.
Consequently, a memory declaration can contain any number of exports, possibly followed by an import.</p>
         </div>
        </section>
       </section>
       <section id="globals⑧">
         <span id="text-global"></span><span id="index-15③"></span>
        <h4 data-level="6.6.8" id="globals⑨"><span>6.6.8. </span><span>Globals</span><a href="#globals⑨"></a></h4>
        <p>Global definitions can bind a symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>global identifier</span></a>.</p>
        
         <span id="index-16②"></span>
        <section id="text-global-abbrev">
          <span id="index-17②"></span><span id="id5①"></span>
         <h5 data-level="6.6.8.1" id="abbreviations①③"><span>6.6.8.1. </span><span>Abbreviations</span><a href="#abbreviations①③"></a></h5>
         <p>Globals can be defined as <a href="#text-import"><span>imports</span></a> or <a href="#text-export"><span>exports</span></a> inline:</p>
         
         <div role="note">
          <p>Note</p>
          <p>The latter abbreviation can be applied repeatedly, if “<span><span><span></span></span></span>” contains additional export clauses.
Consequently, a global declaration can contain any number of exports, possibly followed by an import.</p>
         </div>
        </section>
       </section>
       <section id="exports④">
         <span id="text-export"></span><span id="text-exportdesc"></span><span id="index-18②"></span>
        <h4 data-level="6.6.9" id="exports⑤"><span>6.6.9. </span><span>Exports</span><a href="#exports⑤"></a></h4>
        <p>The syntax for exports mirrors their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>abstract syntax</span></a> directly.</p>
        
        <section id="id6①">
         <h5 data-level="6.6.9.1" id="abbreviations①④"><span>6.6.9.1. </span><span>Abbreviations</span><a href="#abbreviations①④"></a></h5>
         <p>As an abbreviation, exports may also be specified inline with <a href="#text-func"><span>function</span></a>, <a href="#text-table"><span>table</span></a>, <a href="#text-mem"><span>memory</span></a>, or <a href="#text-global"><span>global</span></a> definitions; see the respective sections.</p>
        </section>
       </section>
       <section id="start-function④">
         <span id="text-start"></span><span id="index-19"></span>
        <h4 data-level="6.6.10" id="start-function⑤"><span>6.6.10. </span><span>Start Function</span><a href="#start-function⑤"></a></h4>
        <p>A <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-start"><span>start function</span></a> is defined in terms of its index.</p>
        
        <div role="note">
         <p>Note</p>
         <p>At most one start function may occur in a module,
which is ensured by a suitable side condition on the <span><span><span></span></span></span> grammar.</p>
        </div>
       </section>
       <section id="element-segments⑥">
         <span id="text-tableuse"></span><span id="text-elemexpr"></span><span id="text-elemlist"></span><span id="text-elem"></span><span id="index-20"></span>
        <h4 data-level="6.6.11" id="element-segments⑦"><span>6.6.11. </span><span>Element Segments</span><a href="#element-segments⑦"></a></h4>
        <p>Element segments allow for an optional <a href="#text-tableidx"><span>table index</span></a> to identify the table to initialize.</p>
        
        <section id="id7">
         <h5 data-level="6.6.11.1" id="abbreviations①⑤"><span>6.6.11.1. </span><span>Abbreviations</span><a href="#abbreviations①⑤"></a></h5>
         <p>As an abbreviation, a single instruction may occur in place of the offset of an active element segment or as an element expression:</p>
         
         <p>Also, the element list may be written as just a sequence of <a href="#text-funcidx"><span>function indices</span></a>:</p>
         
         <p>A table use can be omitted, defaulting to <span><span><span></span></span></span>.
Furthermore, for backwards compatibility with earlier versions of WebAssembly, if the table use is omitted, the <span><span><span></span></span></span> keyword can be omitted as well.</p>
         
         <p>As another abbreviation, element segments may also be specified inline with <a href="#text-table"><span>table</span></a> definitions; see the respective section.</p>
        </section>
       </section>
       <section id="data-segments⑥">
         <span id="text-memuse"></span><span id="text-data"></span><span id="text-datastring"></span><span id="index-21"></span>
        <h4 data-level="6.6.12" id="data-segments⑦"><span>6.6.12. </span><span>Data Segments</span><a href="#data-segments⑦"></a></h4>
        <p>Data segments allow for an optional <a href="#text-memidx"><span>memory index</span></a> to identify the memory to initialize.
The data is written as a <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-string"><span>string</span></a>, which may be split up into a possibly empty sequence of individual string literals.</p>
        
        <div role="note">
         <p>Note</p>
         <p>In the current version of WebAssembly, the only valid memory index is 0
or a symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>memory identifier</span></a> resolving to the same value.</p>
        </div>
        <section id="id8">
         <h5 data-level="6.6.12.1" id="abbreviations①⑥"><span>6.6.12.1. </span><span>Abbreviations</span><a href="#abbreviations①⑥"></a></h5>
         <p>As an abbreviation, a single instruction may occur in place of the offset of an active data segment:</p>
         
         <p>Also, a memory use can be omitted, defaulting to <span><span><span></span></span></span>.</p>
         
         <p>As another abbreviation, data segments may also be specified inline with <a href="#text-mem"><span>memory</span></a> definitions; see the respective section.</p>
        </section>
       </section>
       <section id="text-module">
         <span id="text-modulefield"></span><span id="index-22"></span><span id="id9"></span>
        <h4 data-level="6.6.13" id="modules①③"><span>6.6.13. </span><span>Modules</span><a href="#modules①③"></a></h4>
        <p>A module consists of a sequence of fields that can occur in any order.
All definitions and their respective bound <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifiers</span></a> scope over the entire module, including the text preceding them.</p>
        <p>A module may optionally bind an <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifier</span></a> that names the module.
The name serves a documentary role only.</p>
        
        
        <p>The following restrictions are imposed on the composition of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>modules</span></a>: <span><span><span></span></span></span> is defined if and only if</p>
        <ul>
         <li>
          
         </li><li>
          
        </li></ul>
        <div role="note">
         <p>Note</p>
         <p>The first condition ensures that there is at most one start function.
The second condition enforces that all <a href="#text-import"><span>imports</span></a> must occur before any regular definition of a <a href="#text-func"><span>function</span></a>, <a href="#text-table"><span>table</span></a>, <a href="#text-mem"><span>memory</span></a>, or <a href="#text-global"><span>global</span></a>,
thereby maintaining the ordering of the respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index spaces</span></a>.</p>
         <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context-wf"><span>well-formedness</span></a> condition on <span><span><span></span></span></span> in the grammar for <span><span><span></span></span></span> ensures that no namespace contains duplicate identifiers.</p>
        </div>
        <p>The definition of the initial <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-context"><span>identifier context</span></a> <span><span><span></span></span></span> uses the following auxiliary definition which maps each relevant definition to a singular context with one (possibly empty) identifier:</p>
        
        <section id="id10">
         <h5 data-level="6.6.13.1" id="abbreviations①⑦"><span>6.6.13.1. </span><span>Abbreviations</span><a href="#abbreviations①⑦"></a></h5>
         <p>In a source file, the toplevel <span><span><span></span></span></span> surrounding the module body may be omitted.</p>
         
        </section>
       </section>
      </section>
     </div>
    </section>
     <section id="appendix">
      <span id="id1①⑦"></span>
     <h2 id="a-appendix"><span>A Appendix</span><a href="#a-appendix"></a></h2>
     <div>
       <section id="embedding">
        <span id="embed"></span><span id="index-0②⑦"></span>
       <h3 id="a1-embedding"><span>A.1 Embedding</span><a href="#a1-embedding"></a></h3>
       <p>A WebAssembly implementation will typically be <em>embedded</em> into a <em>host</em> environment.
An <em>embedder</em> implements the connection between such a host environment and the WebAssembly semantics as defined in the main body of this specification.
An embedder is expected to interact with the semantics in well-defined ways.</p>
       <p>This section defines a suitable interface to the WebAssembly semantics in the form of entry points through which an embedder can access it.
The interface is intended to be complete, in the sense that an embedder does not need to reference other functional parts of the WebAssembly specification directly.</p>
       <div role="note">
        <p>Note</p>
        <p>On the other hand, an embedder does not need to provide the host environment with access to all functionality defined in this interface.
For example, an implementation may not support <a href="#embed-module-parse"><span>parsing</span></a> of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text"><span>text format</span></a>.</p>
       </div>
       <section id="types①②">
        <h4 id="types①③"><span>Types</span><a href="#types①③"></a></h4>
        <p>In the description of the embedder interface, syntactic classes from the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax"><span>abstract syntax</span></a> and the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-runtime"><span>runtime’s abstract machine</span></a> are used as names for variables that range over the possible objects from that class.
Hence, these syntactic classes can also be interpreted as types.</p>
        <p>For numeric parameters, notation like <span><span><span></span></span></span> is used to specify a symbolic name in addition to the respective value range.</p>
       </section>
       <section id="errors">
         <span id="embed-error"></span>
        <h4 id="errors①"><span>Errors</span><a href="#errors①"></a></h4>
        <p>Failure of an interface operation is indicated by an auxiliary syntactic class:</p>
        
        <p>In addition to the error conditions specified explicitly in this section, implementations may also return errors when specific <a href="https://www.w3.org/TR/wasm-core-2/index.html#impl"><span>implementation limitations</span></a> are reached.</p>
        <div role="note">
         <p>Note</p>
         <p>Errors are abstract and unspecific with this definition.
Implementations can refine it to carry suitable classifications and diagnostic messages.</p>
        </div>
       </section>
       <section id="pre-and-post-conditions">
        <h4 id="pre--and-post-conditions"><span>Pre- and Post-Conditions</span><a href="#pre--and-post-conditions"></a></h4>
        <p>Some operations state <em>pre-conditions</em> about their arguments or <em>post-conditions</em> about their results.
It is the embedder’s responsibility to meet the pre-conditions.
If it does, the post conditions are guaranteed by the semantics.</p>
        <p>In addition to pre- and post-conditions explicitly stated with each operation, the specification adopts the following conventions for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-runtime"><span>runtime objects</span></a> (<span><span><span></span></span></span>, <span><span><span></span></span></span>, <span><span><span></span></span></span>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-addr"><span>addresses</span></a>):</p>
        <ul>
         <li>
          <p>Every runtime object passed as a parameter must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-store"><span>valid</span></a> per an implicit pre-condition.</p>
         </li><li>
          <p>Every runtime object returned as a result is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-store"><span>valid</span></a> per an implicit post-condition.</p>
        </li></ul>
        <div role="note">
         <p>Note</p>
         <p>As long as an embedder treats runtime objects as abstract and only creates and manipulates them through the interface defined here, all implicit pre-conditions are automatically met.</p>
        </div>
       </section>
       <section id="store②">
         <span id="embed-store"></span><span id="index-1②⑦"></span>
        <h4 id="store③"><span>Store</span><a href="#store③"></a></h4>
        <section id="mathrm-store-init-xref-exec-runtime-syntax-store-mathit-store">
          <span id="embed-store-init"></span>
         <h5 id="-mathrmstore_init--hrefsyntax-storemathitstore"><span><span><span><span></span></span></span></span><a href="#-mathrmstore_init--hrefsyntax-storemathitstore"></a></h5>
         <ol>
          <li>
           <p>Return the empty <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a>.</p>
         </li></ol>
         
        </section>
       </section>
       <section id="modules①④">
         <span id="embed-module"></span><span id="index-2②⑤"></span>
        <h4 id="modules①⑤"><span>Modules</span><a href="#modules①⑤"></a></h4>
        <section id="mathrm-module-decode-xref-syntax-values-syntax-byte-mathit-byte-ast-xref-syntax-modules-syntax-module-mathit-module-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-module-decode"></span><span id="index-3②①"></span>
         <h5 id="-mathrmmodule_decode-hrefsyntax-bytemathitbyteast--hrefsyntax-modulemathitmodule--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmmodule_decode-hrefsyntax-bytemathitbyteast--hrefsyntax-modulemathitmodule--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>If there exists a derivation for the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>byte</span></a> sequence <span><span><span></span></span></span> as a <span><span><span></span></span></span> according to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-module"><span>binary grammar for modules</span></a>, yielding a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-module-parse-xref-syntax-values-syntax-name-mathit-char-ast-xref-syntax-modules-syntax-module-mathit-module-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-module-parse"></span><span id="index-4②①"></span>
         <h5 id="-mathrmmodule_parse-hrefsyntax-namemathitcharast--hrefsyntax-modulemathitmodule--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmmodule_parse-hrefsyntax-namemathitcharast--hrefsyntax-modulemathitmodule--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>If there exists a derivation for the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-source"><span>source</span></a> <span><span><span></span></span></span> as a <span><span><span></span></span></span> according to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-module"><span>text grammar for modules</span></a>, yielding a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-module-validate-xref-syntax-modules-syntax-module-mathit-module-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-module-validate"></span><span id="index-5①⑧"></span>
         <h5 id="-mathrmmodule_validate-hrefsyntax-modulemathitmodule--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmmodule_validate-hrefsyntax-modulemathitmodule--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>If <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>valid</span></a>, then return nothing.</p>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-module-instantiate-xref-exec-runtime-syntax-store-mathit-store-xref-syntax-modules-syntax-module-mathit-module-xref-exec-runtime-syntax-externval-mathit-externval-ast-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-moduleinst-mathit-moduleinst-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-module-instantiate"></span><span id="index-6①⑥"></span>
         <h5 id="-mathrmmodule_instantiate-hrefsyntax-storemathitstore-hrefsyntax-modulemathitmodule-hrefsyntax-externvalmathitexternvalast--hrefsyntax-storemathitstore-hrefsyntax-moduleinstmathitmoduleinst--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmmodule_instantiate-hrefsyntax-storemathitstore-hrefsyntax-modulemathitmodule-hrefsyntax-externvalmathitexternvalast--hrefsyntax-storemathitstore-hrefsyntax-moduleinstmathitmoduleinst--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Try <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiating</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external values</span></a> <span><span><span></span></span></span> as imports:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>If it succeeds with a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a> <span><span><span></span></span></span>, then let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else, let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="2">
          <li>
           <p>Return the new store paired with <span><span><span></span></span></span>.</p>
         </li></ol>
         
         <div role="note">
          <p>Note</p>
          <p>The store may be modified even in case of an error.</p>
         </div>
        </section>
        <section id="mathrm-module-imports-xref-syntax-modules-syntax-module-mathit-module-xref-syntax-values-syntax-name-mathit-name-xref-syntax-values-syntax-name-mathit-name-xref-syntax-types-syntax-externtype-mathit-externtype-ast">
          <span id="embed-module-imports"></span><span id="index-7①⑥"></span>
         <h5 id="-mathrmmodule_imports-hrefsyntax-modulemathitmodule--hrefsyntax-namemathitname-hrefsyntax-namemathitname-hrefsyntax-externtypemathitexterntypeast"><span><span><span><span></span></span></span></span><a href="#-mathrmmodule_imports-hrefsyntax-modulemathitmodule--hrefsyntax-namemathitname-hrefsyntax-namemathitname-hrefsyntax-externtypemathitexterntypeast"></a></h5>
         <ol>
          <li>
           <p>Pre-condition: <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>valid</span></a> with external import types <span><span><span></span></span></span> and external export types <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: the length of <span><span><span></span></span></span> equals the length of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span> and corresponding <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the triple <span><span><span></span></span></span>.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="5">
          <li>
           <p>Return the concatenation of all <span><span><span></span></span></span>, in index order.</p>
          </li><li>
           <p>Post-condition: each <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externtype"><span>valid</span></a>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-module-exports-xref-syntax-modules-syntax-module-mathit-module-xref-syntax-values-syntax-name-mathit-name-xref-syntax-types-syntax-externtype-mathit-externtype-ast">
          <span id="embed-module-exports"></span><span id="index-8①⑥"></span>
         <h5 id="-mathrmmodule_exports-hrefsyntax-modulemathitmodule--hrefsyntax-namemathitname-hrefsyntax-externtypemathitexterntypeast"><span><span><span><span></span></span></span></span><a href="#-mathrmmodule_exports-hrefsyntax-modulemathitmodule--hrefsyntax-namemathitname-hrefsyntax-externtypemathitexterntypeast"></a></h5>
         <ol>
          <li>
           <p>Pre-condition: <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>valid</span></a> with external import types <span><span><span></span></span></span> and external export types <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exports</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Assert: the length of <span><span><span></span></span></span> equals the length of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <span><span><span></span></span></span> in <span><span><span></span></span></span> and corresponding <span><span><span></span></span></span> in <span><span><span></span></span></span>, do:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>Let <span><span><span></span></span></span> be the pair <span><span><span></span></span></span>.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="5">
          <li>
           <p>Return the concatenation of all <span><span><span></span></span></span>, in index order.</p>
          </li><li>
           <p>Post-condition: each <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externtype"><span>valid</span></a>.</p>
         </li></ol>
         
        </section>
       </section>
       <section id="module-instances②">
         <span id="embed-instance"></span><span id="index-9①⑥"></span>
        <h4 id="module-instances③"><span>Module Instances</span><a href="#module-instances③"></a></h4>
        <section id="mathrm-instance-export-xref-exec-runtime-syntax-moduleinst-mathit-moduleinst-xref-syntax-values-syntax-name-mathit-name-xref-exec-runtime-syntax-externval-mathit-externval-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-instance-export"></span><span id="index-10①②"></span>
         <h5 id="-mathrminstance_export-hrefsyntax-moduleinstmathitmoduleinst-hrefsyntax-namemathitname--hrefsyntax-externvalmathitexternval--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrminstance_export-hrefsyntax-moduleinstmathitmoduleinst-hrefsyntax-namemathitname--hrefsyntax-externvalmathitexternval--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Assert: due to <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-moduleinst"><span>validity</span></a> of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a> <span><span><span></span></span></span>, all its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-exportinst"><span>export names</span></a> are different.</p>
          </li><li>
           <p>If there exists an <span><span><span></span></span></span> in <span><span><span></span></span></span> such that <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>name</span></a> <span><span><span></span></span></span> equals <span><span><span></span></span></span>, then:</p>
           <ol>
            <li>
             <p>Return the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span>.</p>
           </li></ol>
          </li><li>
           <p>Else, return <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
       </section>
       <section id="functions①⓪">
         <span id="embed-func"></span><span id="index-11①①"></span>
        <h4 id="functions①①"><span>Functions</span><a href="#functions①①"></a></h4>
        <section id="mathrm-func-alloc-xref-exec-runtime-syntax-store-mathit-store-xref-syntax-types-syntax-functype-mathit-functype-xref-exec-runtime-syntax-hostfunc-mathit-hostfunc-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-funcaddr-mathit-funcaddr">
          <span id="embed-func-alloc"></span>
         <h5 id="-mathrmfunc_alloc-hrefsyntax-storemathitstore-hrefsyntax-functypemathitfunctype-hrefsyntax-hostfuncmathithostfunc--hrefsyntax-storemathitstore-hrefsyntax-funcaddrmathitfuncaddr"><span><span><span><span></span></span></span></span><a href="#-mathrmfunc_alloc-hrefsyntax-storemathitstore-hrefsyntax-functypemathitfunctype-hrefsyntax-hostfuncmathithostfunc--hrefsyntax-storemathitstore-hrefsyntax-funcaddrmathitfuncaddr"></a></h5>
         <ol>
          <li>
           <p>Pre-condition: <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-functype"><span>valid</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of <a href="https://www.w3.org/TR/wasm-core-2/index.html#alloc-func"><span>allocating a host function</span></a> in <span><span><span></span></span></span> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span> and host function code <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the new store paired with <span><span><span></span></span></span>.</p>
         </li></ol>
         
         <div role="note">
          <p>Note</p>
          <p>This operation assumes that <span><span><span></span></span></span> satisfies the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invoke-host"><span>pre- and post-conditions</span></a> required for a function instance with type <span><span><span></span></span></span>.</p>
          <p>Regular (non-host) function instances can only be created indirectly through <a href="#embed-module-instantiate"><span>module instantiation</span></a>.</p>
         </div>
        </section>
        <section id="mathrm-func-type-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-funcaddr-mathit-funcaddr-xref-syntax-types-syntax-functype-mathit-functype">
          <span id="embed-func-type"></span>
         <h5 id="-mathrmfunc_type-hrefsyntax-storemathitstore-hrefsyntax-funcaddrmathitfuncaddr--hrefsyntax-functypemathitfunctype"><span><span><span><span></span></span></span></span><a href="#-mathrmfunc_type-hrefsyntax-storemathitstore-hrefsyntax-funcaddrmathitfuncaddr--hrefsyntax-functypemathitfunctype"></a></h5>
         <ol>
          <li>
           <p>Return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Post-condition: the returned <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-functype"><span>valid</span></a>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-func-invoke-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-funcaddr-mathit-funcaddr-xref-exec-runtime-syntax-val-mathit-val-ast-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-val-mathit-val-ast-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-func-invoke"></span><span id="index-12⑥"></span>
         <h5 id="-mathrmfunc_invoke-hrefsyntax-storemathitstore-hrefsyntax-funcaddrmathitfuncaddr-hrefsyntax-valmathitvalast--hrefsyntax-storemathitstore-hrefsyntax-valmathitvalast--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmfunc_invoke-hrefsyntax-storemathitstore-hrefsyntax-funcaddrmathitfuncaddr-hrefsyntax-valmathitvalast--hrefsyntax-storemathitstore-hrefsyntax-valmathitvalast--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Try <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invocation"><span>invoking</span></a> the function <span><span><span></span></span></span> in <span><span><span></span></span></span> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> <span><span><span></span></span></span> as arguments:</p>
         </li></ol>
         <blockquote>
          <div>
           <ol>
            <li>
             <p>If it succeeds with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> <span><span><span></span></span></span> as results, then let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
            </li><li>
             <p>Else it has trapped, hence let <span><span><span></span></span></span> be <span><span><span></span></span></span>.</p>
           </li></ol>
          </div>
         </blockquote>
         <ol start="2">
          <li>
           <p>Return the new store paired with <span><span><span></span></span></span>.</p>
         </li></ol>
         
         <div role="note">
          <p>Note</p>
          <p>The store may be modified even in case of an error.</p>
         </div>
        </section>
       </section>
       <section id="tables①⓪">
         <span id="embed-table"></span><span id="index-13④"></span>
        <h4 id="tables①①"><span>Tables</span><a href="#tables①①"></a></h4>
        <section id="mathrm-table-alloc-xref-exec-runtime-syntax-store-mathit-store-xref-syntax-types-syntax-tabletype-mathit-tabletype-xref-exec-runtime-syntax-ref-mathit-ref-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-tableaddr-mathit-tableaddr">
          <span id="embed-table-alloc"></span>
         <h5 id="-mathrmtable_alloc-hrefsyntax-storemathitstore-hrefsyntax-tabletypemathittabletype-hrefsyntax-refmathitref--hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr"><span><span><span><span></span></span></span></span><a href="#-mathrmtable_alloc-hrefsyntax-storemathitstore-hrefsyntax-tabletypemathittabletype-hrefsyntax-refmathitref--hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr"></a></h5>
         <ol>
          <li>
           <p>Pre-condition: <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-tabletype"><span>valid</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of <a href="https://www.w3.org/TR/wasm-core-2/index.html#alloc-table"><span>allocating a table</span></a> in <span><span><span></span></span></span> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span> and initialization value <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the new store paired with <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-table-type-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-tableaddr-mathit-tableaddr-xref-syntax-types-syntax-tabletype-mathit-tabletype">
          <span id="embed-table-type"></span>
         <h5 id="-mathrmtable_type-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr--hrefsyntax-tabletypemathittabletype"><span><span><span><span></span></span></span></span><a href="#-mathrmtable_type-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr--hrefsyntax-tabletypemathittabletype"></a></h5>
         <ol>
          <li>
           <p>Return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Post-condition: the returned <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-tabletype"><span>valid</span></a>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-table-read-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-tableaddr-mathit-tableaddr-i-xref-syntax-values-syntax-int-mathit-u32-xref-exec-runtime-syntax-ref-mathit-ref-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-table-read"></span>
         <h5 id="-mathrmtable_read-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr-ihrefsyntax-intmathitu32--hrefsyntax-refmathitref--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmtable_read-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr-ihrefsyntax-intmathitu32--hrefsyntax-refmathitref--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than or equal to the length of <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else, return the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference value</span></a> <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-table-write-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-tableaddr-mathit-tableaddr-i-xref-syntax-values-syntax-int-mathit-u32-xref-exec-runtime-syntax-ref-mathit-ref-xref-exec-runtime-syntax-store-mathit-store-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-table-write"></span>
         <h5 id="-mathrmtable_write-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr-ihrefsyntax-intmathitu32-hrefsyntax-refmathitref--hrefsyntax-storemathitstore--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmtable_write-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr-ihrefsyntax-intmathitu32-hrefsyntax-refmathitref--hrefsyntax-storemathitstore--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than or equal to the length of <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Replace <span><span><span></span></span></span> with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference value</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the updated store.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-table-size-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-tableaddr-mathit-tableaddr-xref-syntax-values-syntax-int-mathit-u32">
          <span id="embed-table-size"></span>
         <h5 id="-mathrmtable_size-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr--hrefsyntax-intmathitu32"><span><span><span><span></span></span></span></span><a href="#-mathrmtable_size-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr--hrefsyntax-intmathitu32"></a></h5>
         <ol>
          <li>
           <p>Return the length of <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-table-grow-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-tableaddr-mathit-tableaddr-n-xref-syntax-values-syntax-int-mathit-u32-xref-exec-runtime-syntax-ref-mathit-ref-xref-exec-runtime-syntax-store-mathit-store-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-table-grow"></span>
         <h5 id="-mathrmtable_grow-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr-nhrefsyntax-intmathitu32-hrefsyntax-refmathitref--hrefsyntax-storemathitstore--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmtable_grow-hrefsyntax-storemathitstore-hrefsyntax-tableaddrmathittableaddr-nhrefsyntax-intmathitu32-hrefsyntax-refmathitref--hrefsyntax-storemathitstore--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Try <a href="https://www.w3.org/TR/wasm-core-2/index.html#grow-table"><span>growing</span></a> the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span> by <span><span><span></span></span></span> elements with initialization value <span><span><span></span></span></span>:</p>
           <ol>
            <li>
             <p>If it succeeds, return the updated store.</p>
            </li><li>
             <p>Else, return <span><span><span></span></span></span>.</p>
           </li></ol>
         </li></ol>
         
        </section>
       </section>
       <section id="memories①⓪">
         <span id="embed-mem"></span><span id="index-14④"></span>
        <h4 id="memories①①"><span>Memories</span><a href="#memories①①"></a></h4>
        <section id="mathrm-mem-alloc-xref-exec-runtime-syntax-store-mathit-store-xref-syntax-types-syntax-memtype-mathit-memtype-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-memaddr-mathit-memaddr">
          <span id="embed-mem-alloc"></span>
         <h5 id="-mathrmmem_alloc-hrefsyntax-storemathitstore-hrefsyntax-memtypemathitmemtype--hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr"><span><span><span><span></span></span></span></span><a href="#-mathrmmem_alloc-hrefsyntax-storemathitstore-hrefsyntax-memtypemathitmemtype--hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr"></a></h5>
         <ol>
          <li>
           <p>Pre-condition: <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memtype"><span>valid</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of <a href="https://www.w3.org/TR/wasm-core-2/index.html#alloc-mem"><span>allocating a memory</span></a> in <span><span><span></span></span></span> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the new store paired with <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-mem-type-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-memaddr-mathit-memaddr-xref-syntax-types-syntax-memtype-mathit-memtype">
          <span id="embed-mem-type"></span>
         <h5 id="-mathrmmem_type-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr--hrefsyntax-memtypemathitmemtype"><span><span><span><span></span></span></span></span><a href="#-mathrmmem_type-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr--hrefsyntax-memtypemathitmemtype"></a></h5>
         <ol>
          <li>
           <p>Return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Post-condition: the returned <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memtype"><span>valid</span></a>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-mem-read-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-memaddr-mathit-memaddr-i-xref-syntax-values-syntax-int-mathit-u32-xref-syntax-values-syntax-byte-mathit-byte-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-mem-read"></span>
         <h5 id="-mathrmmem_read-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr-ihrefsyntax-intmathitu32--hrefsyntax-bytemathitbyte--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmmem_read-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr-ihrefsyntax-intmathitu32--hrefsyntax-bytemathitbyte--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than or equal to the length of <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Else, return the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-byte"><span>byte</span></a> <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-mem-write-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-memaddr-mathit-memaddr-i-xref-syntax-values-syntax-int-mathit-u32-xref-syntax-values-syntax-byte-mathit-byte-xref-exec-runtime-syntax-store-mathit-store-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-mem-write"></span>
         <h5 id="-mathrmmem_write-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr-ihrefsyntax-intmathitu32-hrefsyntax-bytemathitbyte--hrefsyntax-storemathitstore--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmmem_write-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr-ihrefsyntax-intmathitu32-hrefsyntax-bytemathitbyte--hrefsyntax-storemathitstore--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is larger than or equal to the length of <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Replace <span><span><span></span></span></span> with <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the updated store.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-mem-size-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-memaddr-mathit-memaddr-xref-syntax-values-syntax-int-mathit-u32">
          <span id="embed-mem-size"></span>
         <h5 id="-mathrmmem_size-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr--hrefsyntax-intmathitu32"><span><span><span><span></span></span></span></span><a href="#-mathrmmem_size-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr--hrefsyntax-intmathitu32"></a></h5>
         <ol>
          <li>
           <p>Return the length of <span><span><span></span></span></span> divided by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-mem-grow-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-memaddr-mathit-memaddr-n-xref-syntax-values-syntax-int-mathit-u32-xref-exec-runtime-syntax-store-mathit-store-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-mem-grow"></span>
         <h5 id="-mathrmmem_grow-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr-nhrefsyntax-intmathitu32--hrefsyntax-storemathitstore--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmmem_grow-hrefsyntax-storemathitstore-hrefsyntax-memaddrmathitmemaddr-nhrefsyntax-intmathitu32--hrefsyntax-storemathitstore--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Try <a href="https://www.w3.org/TR/wasm-core-2/index.html#grow-mem"><span>growing</span></a> the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span> by <span><span><span></span></span></span> <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>pages</span></a>:</p>
           <ol>
            <li>
             <p>If it succeeds, return the updated store.</p>
            </li><li>
             <p>Else, return <span><span><span></span></span></span>.</p>
           </li></ol>
         </li></ol>
         
        </section>
       </section>
       <section id="globals①⓪">
         <span id="embed-global"></span><span id="index-15④"></span>
        <h4 id="globals①①"><span>Globals</span><a href="#globals①①"></a></h4>
        <section id="mathrm-global-alloc-xref-exec-runtime-syntax-store-mathit-store-xref-syntax-types-syntax-globaltype-mathit-globaltype-xref-exec-runtime-syntax-val-mathit-val-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-globaladdr-mathit-globaladdr">
          <span id="embed-global-alloc"></span>
         <h5 id="-mathrmglobal_alloc-hrefsyntax-storemathitstore-hrefsyntax-globaltypemathitglobaltype-hrefsyntax-valmathitval--hrefsyntax-storemathitstore-hrefsyntax-globaladdrmathitglobaladdr"><span><span><span><span></span></span></span></span><a href="#-mathrmglobal_alloc-hrefsyntax-storemathitstore-hrefsyntax-globaltypemathitglobaltype-hrefsyntax-valmathitval--hrefsyntax-storemathitstore-hrefsyntax-globaladdrmathitglobaladdr"></a></h5>
         <ol>
          <li>
           <p>Pre-condition: <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-globaltype"><span>valid</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the result of <a href="https://www.w3.org/TR/wasm-core-2/index.html#alloc-global"><span>allocating a global</span></a> in <span><span><span></span></span></span> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span> and initialization value <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the new store paired with <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-global-type-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-globaladdr-mathit-globaladdr-xref-syntax-types-syntax-globaltype-mathit-globaltype">
          <span id="embed-global-type"></span>
         <h5 id="-mathrmglobal_type-hrefsyntax-storemathitstore-hrefsyntax-globaladdrmathitglobaladdr--hrefsyntax-globaltypemathitglobaltype"><span><span><span><span></span></span></span></span><a href="#-mathrmglobal_type-hrefsyntax-storemathitstore-hrefsyntax-globaladdrmathitglobaladdr--hrefsyntax-globaltypemathitglobaltype"></a></h5>
         <ol>
          <li>
           <p>Return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Post-condition: the returned <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-globaltype"><span>valid</span></a>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-global-read-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-globaladdr-mathit-globaladdr-xref-exec-runtime-syntax-val-mathit-val">
          <span id="embed-global-read"></span>
         <h5 id="-mathrmglobal_read-hrefsyntax-storemathitstore-hrefsyntax-globaladdrmathitglobaladdr--hrefsyntax-valmathitval"><span><span><span><span></span></span></span></span><a href="#-mathrmglobal_read-hrefsyntax-storemathitstore-hrefsyntax-globaladdrmathitglobaladdr--hrefsyntax-valmathitval"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> <span><span><span></span></span></span>.</p>
         </li></ol>
         
        </section>
        <section id="mathrm-global-write-xref-exec-runtime-syntax-store-mathit-store-xref-exec-runtime-syntax-globaladdr-mathit-globaladdr-xref-exec-runtime-syntax-val-mathit-val-xref-exec-runtime-syntax-store-mathit-store-xref-appendix-embedding-embed-error-mathit-error">
          <span id="embed-global-write"></span>
         <h5 id="-mathrmglobal_write-hrefsyntax-storemathitstore-hrefsyntax-globaladdrmathitglobaladdr-hrefsyntax-valmathitval--hrefsyntax-storemathitstore--hrefembed-errormathiterror"><span><span><span><span></span></span></span></span><a href="#-mathrmglobal_write-hrefsyntax-storemathitstore-hrefsyntax-globaladdrmathitglobaladdr-hrefsyntax-valmathitval--hrefsyntax-storemathitstore--hrefembed-errormathiterror"></a></h5>
         <ol>
          <li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global instance</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the structure of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is not <span><span><span></span></span></span>, then return <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Replace <span><span><span></span></span></span> with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Return the updated store.</p>
         </li></ol>
         
        </section>
       </section>
      </section>
       <section id="implementation-limitations">
        <span id="impl"></span><span id="index-0②⑧"></span>
       <h3 id="a2-implementation-limitations"><span>A.2 Implementation Limitations</span><a href="#a2-implementation-limitations"></a></h3>
       <p>Implementations typically impose additional restrictions on a number of aspects of a WebAssembly module or execution.
These may stem from:</p>
       <ul>
        <li>
         <p>physical resource limits,</p>
        </li><li>
         <p>constraints imposed by the embedder or its environment,</p>
        </li><li>
         <p>limitations of selected implementation strategies.</p>
       </li></ul>
       <p>This section lists allowed limitations.
Where restrictions take the form of numeric limits, no minimum requirements are given,
nor are the limits assumed to be concrete, fixed numbers.
However, it is expected that all implementations have “reasonably” large limits  to enable common applications.</p>
       <div role="note">
        <p>Note</p>
        <p>A conforming implementation is not allowed to leave out individual <em>features</em>.
However, designated subsets of WebAssembly may be specified in the future.</p>
       </div>
       <section id="syntactic-limits">
        <h4 id="syntactic-limits①"><span>Syntactic Limits</span><a href="#syntactic-limits①"></a></h4>
        <section id="structure②">
          <span id="impl-syntax"></span><span id="index-1②⑧"></span>
         <h5 id="structure③"><span>Structure</span><a href="#structure③"></a></h5>
         <p>An implementation may impose restrictions on the following dimensions of a module:</p>
         <ul>
          <li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-type"><span>types</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a></p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>, including imports</p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>tables</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>, including imports</p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memories</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>, including imports</p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>globals</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a>, including imports</p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segments</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a></p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segments</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a></p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a> to a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a></p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exports</span></a> from a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a></p>
          </li><li>
           <p>the number of parameters in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a></p>
          </li><li>
           <p>the number of results in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a></p>
          </li><li>
           <p>the number of parameters in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block type</span></a></p>
          </li><li>
           <p>the number of results in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>block type</span></a></p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-local"><span>locals</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a></p>
          </li><li>
           <p>the size of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a> body</p>
          </li><li>
           <p>the size of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured control instruction</span></a></p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured control instructions</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a></p>
          </li><li>
           <p>the nesting depth of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured control instructions</span></a></p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-labelidx"><span>label indices</span></a> in a <span><span><span></span></span></span> instruction</p>
          </li><li>
           <p>the length of an <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a></p>
          </li><li>
           <p>the length of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segment</span></a></p>
          </li><li>
           <p>the length of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>name</span></a></p>
          </li><li>
           <p>the range of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-char"><span>characters</span></a> in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>name</span></a></p>
         </li></ul>
         <p>If the limits of an implementation are exceeded for a given module,
then the implementation may reject the <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid"><span>validation</span></a>, compilation, or <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiation</span></a> of that module with an embedder-specific error.</p>
         <div role="note">
          <p>Note</p>
          <p>The last item allows <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedders</span></a> that operate in limited environments without support for <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> to limit the
names of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imports</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exports</span></a> to common subsets like <a href="https://webstore.ansi.org/RecordDetail.aspx?sku=INCITS+4-1986%5bR2012%5d">ASCII</a>.</p>
         </div>
        </section>
        <section id="binary-format②">
          <span id="impl-binary"></span><span id="index-2②⑥"></span>
         <h5 id="binary-format③"><span>Binary Format</span><a href="#binary-format③"></a></h5>
         <p>For a module given in <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary"><span>binary format</span></a>, additional limitations may be imposed on the following dimensions:</p>
         <ul>
          <li>
           <p>the size of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-module"><span>module</span></a></p>
          </li><li>
           <p>the size of any <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-section"><span>section</span></a></p>
          </li><li>
           <p>the size of an individual function’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-code"><span>code</span></a></p>
          </li><li>
           <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-section"><span>sections</span></a></p>
         </li></ul>
        </section>
        <section id="text-format③">
          <span id="impl-text"></span><span id="index-3②②"></span>
         <h5 id="text-format④"><span>Text Format</span><a href="#text-format④"></a></h5>
         <p>For a module given in <a href="https://www.w3.org/TR/wasm-core-2/index.html#text"><span>text format</span></a>, additional limitations may be imposed on the following dimensions:</p>
         <ul>
          <li>
           <p>the size of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#source"><span>source text</span></a></p>
          </li><li>
           <p>the size of any syntactic element</p>
          </li><li>
           <p>the size of an individual <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-token"><span>token</span></a></p>
          </li><li>
           <p>the nesting depth of <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-foldedinstr"><span>folded instructions</span></a></p>
          </li><li>
           <p>the length of symbolic <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-id"><span>identifiers</span></a></p>
          </li><li>
           <p>the range of literal <a href="https://www.w3.org/TR/wasm-core-2/index.html#text-char"><span>characters</span></a> allowed in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#source"><span>source text</span></a></p>
         </li></ul>
        </section>
       </section>
       <section id="validation③">
         <span id="impl-valid"></span><span id="index-4②②"></span>
        <h4 id="validation④"><span>Validation</span><a href="#validation④"></a></h4>
        <p>An implementation may defer <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid"><span>validation</span></a> of individual <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>functions</span></a> until they are first <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invoke"><span>invoked</span></a>.</p>
        <p>If a function turns out to be invalid, then the invocation, and every consecutive call to the same function, results in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a>.</p>
        <div role="note">
         <p>Note</p>
         <p>This is to allow implementations to use interpretation or just-in-time compilation for functions.
The function must still be fully validated before execution of its body begins.</p>
        </div>
       </section>
       <section id="execution③">
         <span id="impl-exec"></span><span id="index-5①⑨"></span>
        <h4 id="execution④"><span>Execution</span><a href="#execution④"></a></h4>
        <p>Restrictions on the following dimensions may be imposed during <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec"><span>execution</span></a> of a WebAssembly program:</p>
        <ul>
         <li>
          <p>the number of allocated <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instances</span></a></p>
         </li><li>
          <p>the number of allocated <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instances</span></a></p>
         </li><li>
          <p>the number of allocated <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instances</span></a></p>
         </li><li>
          <p>the number of allocated <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instances</span></a></p>
         </li><li>
          <p>the number of allocated <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global instances</span></a></p>
         </li><li>
          <p>the size of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a></p>
         </li><li>
          <p>the size of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a></p>
         </li><li>
          <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frames</span></a> on the <a href="https://www.w3.org/TR/wasm-core-2/index.html#stack"><span>stack</span></a></p>
         </li><li>
          <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-label"><span>labels</span></a> on the <a href="https://www.w3.org/TR/wasm-core-2/index.html#stack"><span>stack</span></a></p>
         </li><li>
          <p>the number of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> on the <a href="https://www.w3.org/TR/wasm-core-2/index.html#stack"><span>stack</span></a></p>
        </li></ul>
        <p>If the runtime limits of an implementation are exceeded during execution of a computation,
then it may terminate that computation and report an embedder-specific error to the invoking code.</p>
        <p>Some of the above limits may already be verified during instantiation, in which case an implementation may report exceedance in the same manner as for <a href="#impl-syntax"><span>syntactic limits</span></a>.</p>
        <div role="note">
         <p>Note</p>
         <p>Concrete limits are usually not fixed but may be dependent on specifics, interdependent, vary over time, or depend on other implementation- or embedder-specific situations or events.</p>
        </div>
       </section>
      </section>
       <section id="validation-algorithm">
        <span id="algo-valid"></span><span id="index-0②⑨"></span>
       <h3 id="a3-validation-algorithm"><span>A.3 Validation Algorithm</span><a href="#a3-validation-algorithm"></a></h3>
       <p>The specification of WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid"><span>validation</span></a> is purely <em>declarative</em>.
It describes the constraints that must be met by a <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-module"><span>module</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-instr"><span>instruction</span></a> sequence to be valid.</p>
       <p>This section sketches the skeleton of a sound and complete <em>algorithm</em> for effectively validating code, i.e., sequences of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a>.
(Other aspects of validation are straightforward to implement.)</p>
       <p>In fact, the algorithm is expressed over the flat sequence of opcodes as occurring in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary"><span>binary format</span></a>, and performs only a single pass over it.
Consequently, it can be integrated directly into a decoder.</p>
       <p>The algorithm is expressed in typed pseudo code whose semantics is intended to be self-explanatory.</p>
       <section id="data-structures">
         <span id="index-1②⑨"></span>
        <h4 id="data-structures①"><span>Data Structures</span><a href="#data-structures①"></a></h4>
        <p>Types are representable as an enumeration.</p>
        <div>
<pre><span></span><span>type</span> <span>val_type</span> = I32 | I64 | F32 | F64 | V128 | Funcref | Externref

<span>func</span> <span>is_num</span>(<span>t</span> : val_type | Unknown) : bool =
  <span>return</span> t = I32 || t = I64 || t = F32 || t = F64 || t = Unknown

<span>func</span> <span>is_vec</span>(<span>t</span> : val_type | Unknown) : bool =
  <span>return</span> t = V128 || t = Unknown

<span>func</span> <span>is_ref</span>(<span>t</span> : val_type | Unknown) : bool =
  <span>return</span> t = Funcref || t = Externref || t = Unknown
</pre>
         </div>
        <p>The algorithm uses two separate stacks: the <em>value stack</em> and the <em>control stack</em>.
The former tracks the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>types</span></a> of operand values on the <a href="https://www.w3.org/TR/wasm-core-2/index.html#stack"><span>stack</span></a>,
the latter surrounding <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>structured control instructions</span></a> and their associated <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-control"><span>blocks</span></a>.</p>
        <div>
<pre><span></span><span>type</span> <span>val_stack</span> = stack(val_type | Unknown)

<span>type</span> <span>ctrl_stack</span> = stack(ctrl_frame)
<span>type</span> <span>ctrl_frame</span> = {
  <span>opcode</span> : opcode
  <span>start_types</span> : list(val_type)
  <span>end_types</span> : list(val_type)
  <span>height</span> : nat
  <span>unreachable</span> : bool
}
</pre>
         </div>
        <p>For each value, the value stack records its <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a>, or <code><span>Unknown</span></code> when the type is not known.</p>
        <p>For each entered block, the control stack records a <em>control frame</em> with the originating opcode, the types on the top of the operand stack at the start and end of the block (used to check its result as well as branches), the height of the operand stack at the start of the block (used to check that operands do not underflow the current block), and a flag recording whether the remainder of the block is unreachable (used to handle <a href="https://www.w3.org/TR/wasm-core-2/index.html#polymorphism"><span>stack-polymorphic</span></a> typing after branches).</p>
        <p>For the purpose of presenting the algorithm, the operand and control stacks are simply maintained as global variables:</p>
        <div>
<pre><span></span><span>var</span> <span>vals</span> : val_stack
<span>var</span> <span>ctrls</span> : ctrl_stack
</pre>
         </div>
        <p>However, these variables are not manipulated directly by the main checking function, but through a set of auxiliary functions:</p>
        <div>
<pre><span></span><span>func</span> <span>push_val</span>(<span>type</span> : val_type | Unknown) =
  vals.push(type)

<span>func</span> <span>pop_val</span>() : val_type | Unknown =
  <span>if</span> (vals.size() = ctrls[0].height &amp;&amp; ctrls[0].unreachable) <span>return</span> Unknown
  error_if(vals.size() = ctrls[0].height)
  <span>return</span> vals.pop()

<span>func</span> <span>pop_val</span>(<span>expect</span> : val_type | Unknown) : val_type | Unknown =
  <span>let</span> <span>actual</span> = pop_val()
  error_if(actual =/= expect &amp;&amp; actual =/= Unknown &amp;&amp; expect =/= Unknown)
  <span>return</span> actual

<span>func</span> <span>push_vals</span>(<span>types</span> : list(val_type)) = <span>foreach</span> (t <span>in</span> types) push_val(t)
<span>func</span> <span>pop_vals</span>(<span>types</span> : list(val_type)) : list(val_type) =
  <span>var</span> <span>popped</span> := []
  <span>foreach</span> (t <span>in</span> reverse(types)) popped.prepend(pop_val(t))
  <span>return</span> popped
</pre>
         </div>
        <p>Pushing an operand value simply pushes the respective type to the value stack.</p>
        <p>Popping an operand value checks that the value stack does not underflow the current block and then removes one type.
But first, a special case is handled where the block contains no known values, but has been marked as unreachable.
That can occur after an unconditional branch, when the stack is typed <a href="https://www.w3.org/TR/wasm-core-2/index.html#polymorphism"><span>polymorphically</span></a>.
In that case, an unknown type is returned.</p>
        <p>A second function for popping an operand value takes an expected type, which the actual operand type is checked against.
The types may differ in case one of them is Unknown.
The function returns the actual type popped from the stack.</p>
        <p>Finally, there are accumulative functions for pushing or popping multiple operand types.</p>
        <div role="note">
         <p>Note</p>
         <p>The notation <code><span>stack[i]</span></code> is meant to index the stack from the top,
so that, e.g., <code><span>ctrls[0]</span></code> accesses the element pushed last.</p>
        </div>
        <p>The control stack is likewise manipulated through auxiliary functions:</p>
        <div>
<pre><span></span><span>func</span> <span>push_ctrl</span>(<span>opcode</span> : opcode, <span>in</span> : list(val_type), <span>out</span> : list(val_type)) =
  <span>let</span> <span>frame</span> = ctrl_frame(opcode, <span>in</span>, out, vals.size(), false)
  ctrls.push(frame)
  push_vals(<span>in</span>)

<span>func</span> <span>pop_ctrl</span>() : ctrl_frame =
  error_if(ctrls.is_empty())
  <span>let</span> <span>frame</span> = ctrls[0]
  pop_vals(frame.end_types)
  error_if(vals.size() =/= frame.height)
  ctrls.pop()
  <span>return</span> frame

<span>func</span> <span>label_types</span>(<span>frame</span> : ctrl_frame) : list(val_types) =
  <span>return</span> (if frame.opcode == loop then frame.start_types else frame.end_types)

<span>func</span> <span>unreachable</span>() =
  vals.resize(ctrls[0].height)
  ctrls[0].unreachable := true
</pre>
         </div>
        <p>Pushing a control frame takes the types of the label and result values.
It allocates a new frame record recording them along with the current height of the operand stack and marks the block as reachable.</p>
        <p>Popping a frame first checks that the control stack is not empty.
It then verifies that the operand stack contains the right types of values expected at the end of the exited block and pops them off the operand stack.
Afterwards, it checks that the stack has shrunk back to its initial height.</p>
        <p>The type of the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-label"><span>label</span></a> associated with a control frame is either that of the stack at the start or the end of the frame, determined by the opcode that it originates from.</p>
        <p>Finally, the current frame can be marked as unreachable.
In that case, all existing operand types are purged from the value stack, in order to allow for the <a href="https://www.w3.org/TR/wasm-core-2/index.html#polymorphism"><span>stack-polymorphism</span></a> logic in <code><span>pop_val</span></code> to take effect.
Because every function has an implicit outermost label that corresponds to an implicit block frame,
it is an invariant of the validation algorithm that there always is at least one frame on the control stack when validating an instruction, and hence, <cite>ctrls[0]</cite> is always defined.</p>
        <div role="note">
         <p>Note</p>
         <p>Even with the unreachable flag set, consecutive operands are still pushed to and popped from the operand stack.
That is necessary to detect invalid <a href="https://www.w3.org/TR/wasm-core-2/index.html#polymorphism"><span>examples</span></a> like <span><span><span></span></span></span>.
However, a polymorphic stack cannot underflow, but instead generates <code><span>Unknown</span></code> types as needed.</p>
        </div>
       </section>
       <section id="validation-of-opcode-sequences">
         <span id="index-2②⑦"></span>
        <h4 id="validation-of-opcode-sequences①"><span>Validation of Opcode Sequences</span><a href="#validation-of-opcode-sequences①"></a></h4>
        <p>The following function shows the validation of a number of representative instructions that manipulate the stack.
Other instructions are checked in a similar manner.</p>
        <div role="note">
         <p>Note</p>
         <p>Various instructions not shown here will additionally require the presence of a validation <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> for checking uses of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>indices</span></a>.
That is an easy addition and therefore omitted from this presentation.</p>
        </div>
        <div>
<pre><span></span><span>func</span> <span>validate</span>(opcode) =
  <span>switch</span> (opcode)
    <span>case</span> (i32.add)
      pop_val(I32)
      pop_val(I32)
      push_val(I32)

   <span>case</span> (drop)
      pop_val()

   <span>case</span> (select)
      pop_val(I32)
      <span>let</span> <span>t1</span> = pop_val()
      <span>let</span> <span>t2</span> = pop_val()
      error_if(not ((is_num(t1) &amp;&amp; is_num(t2)) || (is_vec(t1) &amp;&amp; is_vec(t2))))
      error_if(t1 =/= t2 &amp;&amp; t1 =/= Unknown &amp;&amp; t2 =/= Unknown)
      push_val(if (t1 = Unknown) t2 else t1)

   <span>case</span> (select t)
      pop_val(I32)
      pop_val(t)
      pop_val(t)
      push_val(t)

   <span>case</span> (unreachable)
      unreachable()

   <span>case</span> (block t1*-&gt;t2*)
      pop_vals([t1*])
      push_ctrl(block, [t1*], [t2*])

   <span>case</span> (loop t1*-&gt;t2*)
      pop_vals([t1*])
      push_ctrl(loop, [t1*], [t2*])

   <span>case</span> (if t1*-&gt;t2*)
      pop_val(I32)
      pop_vals([t1*])
      push_ctrl(if, [t1*], [t2*])

   <span>case</span> (end)
      <span>let</span> <span>frame</span> = pop_ctrl()
      push_vals(frame.end_types)

   <span>case</span> (else)
      <span>let</span> <span>frame</span> = pop_ctrl()
      error_if(frame.opcode =/= <span>if</span>)
      push_ctrl(else, frame.start_types, frame.end_types)

   <span>case</span> (br n)
      error_if(ctrls.size() &lt; n)
      pop_vals(label_types(ctrls[n]))
      unreachable()

   <span>case</span> (br_if n)
      error_if(ctrls.size() &lt; n)
      pop_val(I32)
      pop_vals(label_types(ctrls[n]))
      push_vals(label_types(ctrls[n]))

   <span>case</span> (br_table n* m)
      pop_val(I32)
      error_if(ctrls.size() &lt; m)
      <span>let</span> <span>arity</span> = label_types(ctrls[m]).size()
      <span>foreach</span> (n <span>in</span> n*)
        error_if(ctrls.size() &lt; n)
        error_if(label_types(ctrls[n]).size() =/= arity)
        push_vals(pop_vals(label_types(ctrls[n])))
      pop_vals(label_types(ctrls[m]))
      unreachable()
</pre>
         </div>
        <div role="note">
         <p>Note</p>
         <p>It is an invariant under the current WebAssembly instruction set that an operand of <code><span>Unknown</span></code> type is never duplicated on the stack.
This would change if the language were extended with stack instructions like <code><span>dup</span></code>.
Under such an extension, the above algorithm would need to be refined by replacing the <code><span>Unknown</span></code> type with proper <em>type variables</em> to ensure that all uses are consistent.</p>
        </div>
       </section>
      </section>
       <section id="custom-sections">
        <span id="index-0③⓪"></span>
       <h3 id="a4-custom-sections"><span>A.4 Custom Sections</span><a href="#a4-custom-sections"></a></h3>
       <p>This appendix defines dedicated <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-customsec"><span>custom sections</span></a> for WebAssembly’s <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary"><span>binary format</span></a>.
Such sections do not contribute to, or otherwise affect, the WebAssembly semantics, and like any custom section they may be ignored by an implementation.
However, they provide useful meta data that implementations can make use of to improve user experience or take compilation hints.</p>
       <p>Currently, only one dedicated custom section is defined, the <a href="#binary-namesec"><span>name section</span></a>.</p>
       <section id="name-section">
         <span id="binary-namesec"></span><span id="index-1③⓪"></span>
        <h4 id="name-section①"><span>Name Section</span><a href="#name-section①"></a></h4>
        <p>The <em>name section</em> is a <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-customsec"><span>custom section</span></a> whose name string is itself <span><span><span></span></span></span>.
The name section should appear only once in a module, and only after the <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-datasec"><span>data section</span></a>.</p>
        <p>The purpose of this section is to attach printable names to definitions in a module, which e.g. can be used by a debugger or when parts of the module are to be rendered in <a href="https://www.w3.org/TR/wasm-core-2/index.html#text"><span>text form</span></a>.</p>
        <div role="note">
         <p>Note</p>
         <p>All <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-name"><span>names</span></a> are represented in <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[UNICODE]</a> encoded in UTF-8.
Names need not be unique.</p>
        </div>
        <section id="subsections">
          <span id="binary-namesubsection"></span>
         <h5 id="subsections①"><span>Subsections</span><a href="#subsections①"></a></h5>
         <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-customsec"><span>data</span></a> of a name section consists of a sequence of <em>subsections</em>.
Each subsection consists of a</p>
         <ul>
          <li>
           <p>a one-byte subsection <em>id</em>,</p>
          </li><li>
           <p>the <span><span><span></span></span></span> <em>size</em> of the contents, in bytes,</p>
          </li><li>
           <p>the actual <em>contents</em>, whose structure is dependent on the subsection id.</p>
         </li></ul>
         
         <p>The following subsection ids are used:</p>
         <table>
          <thead>
           <tr>
            <th>
             <p>Id</p>
            </th><th>
             <p>Subsection</p>
          </th></tr></thead><tbody>
           <tr>
            <td>
             <p>0</p>
            </td><td>
             <p><a href="#binary-modulenamesec"><span>module name</span></a></p>
           </td></tr><tr>
            <td>
             <p>1</p>
            </td><td>
             <p><a href="#binary-funcnamesec"><span>function names</span></a></p>
           </td></tr><tr>
            <td>
             <p>2</p>
            </td><td>
             <p><a href="#binary-localnamesec"><span>local names</span></a></p>
         </td></tr></tbody></table>
         <p>Each subsection may occur at most once, and in order of increasing id.</p>
        </section>
        <section id="name-maps">
          <span id="binary-namemap"></span><span id="binary-indirectnamemap"></span><span id="index-2②⑧"></span>
         <h5 id="name-maps①"><span>Name Maps</span><a href="#name-maps①"></a></h5>
         <p>A <em>name map</em> assigns <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>names</span></a> to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>indices</span></a> in a given <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index space</span></a>.
It consists of a <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-vec"><span>vector</span></a> of index/name pairs in order of increasing index value.
Each index must be unique, but the assigned names need not be.</p>
         
         <p>An <em>indirect name map</em> assigns <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>names</span></a> to a two-dimensional <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index space</span></a>, where secondary indices are <em>grouped</em> by primary indices.
It consists of a vector of primary index/name map pairs in order of increasing index value, where each name map in turn maps secondary indices to names.
Each primary index must be unique, and likewise each secondary index per individual name map.</p>
         
        </section>
        <section id="module-names">
          <span id="binary-modulenamesec"></span><span id="index-3②③"></span>
         <h5 id="module-names①"><span>Module Names</span><a href="#module-names①"></a></h5>
         <p>The <em>module name subsection</em> has the id 0.
It simply consists of a single <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-name"><span>name</span></a> that is assigned to the module itself.</p>
         
        </section>
        <section id="function-names">
          <span id="binary-funcnamesec"></span><span id="index-4②③"></span>
         <h5 id="function-names①"><span>Function Names</span><a href="#function-names①"></a></h5>
         <p>The <em>function name subsection</em> has the id 1.
It consists of a <a href="#binary-namemap"><span>name map</span></a> assigning function names to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcidx"><span>function indices</span></a>.</p>
         
        </section>
        <section id="local-names">
          <span id="binary-localnamesec"></span><span id="index-5②⓪"></span>
         <h5 id="local-names①"><span>Local Names</span><a href="#local-names①"></a></h5>
         <p>The <em>local name subsection</em> has the id 2.
It consists of an <a href="#binary-indirectnamemap"><span>indirect name map</span></a> assigning local names to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-localidx"><span>local indices</span></a> grouped by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcidx"><span>function indices</span></a>.</p>
         
        </section>
       </section>
      </section>
       <section id="soundness">
        <span id="index-0③①"></span><span id="id1①⑧"></span>
       <h3 id="a5-soundness"><span>A.5 Soundness</span><a href="#a5-soundness"></a></h3>
       <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#type-system"><span>type system</span></a> of WebAssembly is <em>sound</em>, implying both <em>type safety</em> and <em>memory safety</em> with respect to the WebAssembly semantics. For example:</p>
       <ul>
        <li>
         <p>All types declared and derived during validation are respected at run time;
e.g., every <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-local"><span>local</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a> variable will only contain type-correct values, every <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instruction</span></a> will only be applied to operands of the expected type, and every <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invocation"><span>invocation</span></a> always evaluates to a result of the right type (if it does not <a href="https://www.w3.org/TR/wasm-core-2/index.html#trap"><span>trap</span></a> or diverge).</p>
        </li><li>
         <p>No memory location will be read or written except those explicitly defined by the program, i.e., as a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-local"><span>local</span></a>, a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-global"><span>global</span></a>, an element in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>table</span></a>, or a location within a linear <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-mem"><span>memory</span></a>.</p>
        </li><li>
         <p>There is no undefined behavior,
i.e., the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec"><span>execution rules</span></a> cover all possible cases that can occur in a <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid"><span>valid</span></a> program, and the rules are mutually consistent.</p>
       </li></ul>
       <p>Soundness also is instrumental in ensuring additional properties, most notably, <em>encapsulation</em> of function and module scopes: no <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-local"><span>locals</span></a> can be accessed outside their own function and no <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>module</span></a> components can be accessed outside their own module unless they are explicitly <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>exported</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>imported</span></a>.</p>
       <p>The typing rules defining WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid"><span>validation</span></a> only cover the <em>static</em> components of a WebAssembly program.
In order to state and prove soundness precisely, the typing rules must be extended to the <em>dynamic</em> components of the abstract <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-runtime"><span>runtime</span></a>, that is, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-config"><span>configurations</span></a>, and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-admin"><span>administrative instructions</span></a>. <a href="#cite-pldi2017" id="id2⑧" role="doc-noteref"><span>[</span>1<span>]</span></a></p>
       <section id="results②">
         <span id="valid-result"></span><span id="index-1③①"></span>
        <h4 id="results③"><span>Results</span><a href="#results③"></a></h4>
        <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-result"><span>Results</span></a> can be classified by <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result types</span></a> as follows.</p>
        <section id="results-xref-exec-runtime-syntax-val-mathit-val-ast">
         <h5 id="results--hrefsyntax-valmathitvalast"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-result"><span>Results</span></a> <span><span><span></span></span></span></span><a href="#results--hrefsyntax-valmathitvalast"></a></h5>
         <ul>
          <li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>:</p>
           <ul>
            <li>
             <p>The value <span><span><span></span></span></span> is <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-val"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of all <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the result is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="results-xref-exec-runtime-syntax-trap-mathsf-trap">
         <h5 id="results--hrefsyntax-trapmathsftrap"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-result"><span>Results</span></a> <span><span><span></span></span></span></span><a href="#results--hrefsyntax-trapmathsftrap"></a></h5>
         <ul>
          <li>
           <p>The result is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>, for any sequence <span><span><span></span></span></span> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value types</span></a>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="store-validity">
         <span id="valid-store"></span><span id="module-context"></span>
        <h4 id="store-validity①"><span>Store Validity</span><a href="#store-validity①"></a></h4>
        <p>The following typing rules specify when a runtime <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span> is <em>valid</em>.
A valid store must consist of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global</span></a>, and <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module</span></a> instances that are themselves valid, relative to <span><span><span></span></span></span>.</p>
        <p>To that end, each kind of instance is classified by a respective <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory</span></a>, or <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global</span></a> type.
Module instances are classified by <em>module contexts</em>, which are regular <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>contexts</span></a> repurposed as module types describing the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-index"><span>index spaces</span></a> defined by a module.</p>
        <section id="store-s">
          <span id="index-2②⑨"></span>
         <h5 id="store--s"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>Store</span></a> <span><span><span></span></span></span></span><a href="#store--s"></a></h5>
         <ul>
          <li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instance</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="#valid-funcinst"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="#valid-tableinst"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="#valid-meminst"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global instance</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="#valid-globalinst"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>element instance</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="#valid-eleminst"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>data instance</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="#valid-datainst"><span>valid</span></a>.</p>
          </li><li>
           <p>Then the store is valid.</p>
         </li></ul>
         
        </section>
        <section id="function-instances-xref-exec-runtime-syntax-funcinst-mathsf-type-xref-syntax-types-syntax-functype-mathit-functype-xref-exec-runtime-syntax-funcinst-mathsf-module-xref-exec-runtime-syntax-moduleinst-mathit-moduleinst-xref-exec-runtime-syntax-funcinst-mathsf-code-xref-syntax-modules-syntax-func-mathit-func">
          <span id="valid-funcinst"></span><span id="index-3②④"></span>
         <h5 id="function-instances--hrefsyntax-funcinstmathsftypehrefsyntax-functypemathitfunctype-hrefsyntax-funcinstmathsfmodulehrefsyntax-moduleinstmathitmoduleinst-hrefsyntax-funcinstmathsfcodehrefsyntax-funcmathitfunc"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>Function Instances</span></a> <span><span><span></span></span></span></span><a href="#function-instances--hrefsyntax-funcinstmathsftypehrefsyntax-functypemathitfunctype-hrefsyntax-funcinstmathsfmodulehrefsyntax-moduleinstmathitmoduleinst-hrefsyntax-funcinstmathsfcodehrefsyntax-funcmathitfunc"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-functype"><span>valid</span></a>.</p>
          </li><li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a> <span><span><span></span></span></span> must be <a href="#valid-moduleinst"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Under <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-func"><span>function</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-func"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the function instance is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="host-function-instances-xref-exec-runtime-syntax-funcinst-mathsf-type-xref-syntax-types-syntax-functype-mathit-functype-xref-exec-runtime-syntax-funcinst-mathsf-hostcode-mathit-hf">
          <span id="valid-hostfuncinst"></span><span id="index-4②④"></span>
         <h5 id="host-function-instances--hrefsyntax-funcinstmathsftypehrefsyntax-functypemathitfunctype-hrefsyntax-funcinstmathsfhostcodemathithf"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>Host Function Instances</span></a> <span><span><span></span></span></span></span><a href="#host-function-instances--hrefsyntax-funcinstmathsftypehrefsyntax-functypemathitfunctype-hrefsyntax-funcinstmathsfhostcodemathithf"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-functype"><span>valid</span></a>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For every <a href="#valid-store"><span>valid</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span> <a href="#extend-store"><span>extending</span></a> <span><span><span></span></span></span> and every sequence <span><span><span></span></span></span> of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>values</span></a> whose <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-val"><span>types</span></a> coincide with <span><span><span></span></span></span>:</p>
           <ul>
            <li>
             <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invoke-host"><span>Executing</span></a> <span><span><span></span></span></span> in store <span><span><span></span></span></span> with arguments <span><span><span></span></span></span> has a non-empty set of possible outcomes.</p>
            </li><li>
             <p>For every element <span><span><span></span></span></span> of this set:</p>
             <ul>
              <li>
               <p>Either <span><span><span></span></span></span> must be <span><span><span></span></span></span> (i.e., divergence).</p>
              </li><li>
               <p>Or <span><span><span></span></span></span> consists of a <a href="#valid-store"><span>valid</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span> <a href="#extend-store"><span>extending</span></a> <span><span><span></span></span></span> and a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-result"><span>result</span></a> <span><span><span></span></span></span> whose <a href="#valid-result"><span>type</span></a> coincides with <span><span><span></span></span></span>.</p>
             </li></ul>
           </li></ul>
          </li><li>
           <p>Then the function instance is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
         <div role="note">
          <p>Note</p>
          <p>This rule states that, if appropriate pre-conditions about store and arguments are satisfied, then executing the host function must satisfy appropriate post-conditions about store and results.
The post-conditions match the ones in the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invoke-host"><span>execution rule</span></a> for invoking host functions.</p>
          <p>Any store under which the function is invoked is assumed to be an extension of the current store.
That way, the function itself is able to make sufficient assumptions about future stores.</p>
         </div>
        </section>
        <section id="table-instances-xref-exec-runtime-syntax-tableinst-mathsf-type-xref-syntax-types-syntax-limits-mathit-limits-t-xref-exec-runtime-syntax-tableinst-mathsf-elem-xref-exec-runtime-syntax-ref-mathit-ref-ast">
          <span id="valid-tableinst"></span><span id="index-5②①"></span>
         <h5 id="table-instances---hrefsyntax-tableinstmathsftype-hrefsyntax-limitsmathitlimitst-hrefsyntax-tableinstmathsfelemhrefsyntax-refmathitrefast"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>Table Instances</span></a> <span><span><span></span></span></span></span><a href="#table-instances---hrefsyntax-tableinstmathsftype-hrefsyntax-limitsmathitlimitst-hrefsyntax-tableinstmathsfelemhrefsyntax-refmathitrefast"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-tabletype"><span>valid</span></a>.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must equal <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference</span></a> <span><span><span></span></span></span> in the table’s elements <span><span><span></span></span></span>:</p>
           <ul>
            <li>
             <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-ref"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>Then the table instance is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="memory-instances-xref-exec-runtime-syntax-meminst-mathsf-type-xref-syntax-types-syntax-limits-mathit-limits-xref-exec-runtime-syntax-meminst-mathsf-data-b-ast">
          <span id="valid-meminst"></span><span id="index-6①⑦"></span>
         <h5 id="memory-instances---hrefsyntax-meminstmathsftypehrefsyntax-limitsmathitlimits-hrefsyntax-meminstmathsfdatabast"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>Memory Instances</span></a> <span><span><span></span></span></span></span><a href="#memory-instances---hrefsyntax-meminstmathsftypehrefsyntax-limitsmathitlimits-hrefsyntax-meminstmathsfdatabast"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-memtype"><span>valid</span></a>.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must equal <span><span><span></span></span></span> multiplied by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#page-size"><span>page size</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the memory instance is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="global-instances-xref-exec-runtime-syntax-globalinst-mathsf-type-xref-syntax-types-syntax-mut-mathit-mut-t-xref-exec-runtime-syntax-globalinst-mathsf-value-xref-exec-runtime-syntax-val-mathit-val">
          <span id="valid-globalinst"></span><span id="index-7①⑦"></span>
         <h5 id="global-instances---hrefsyntax-globalinstmathsftype-hrefsyntax-mutmathitmutt-hrefsyntax-globalinstmathsfvaluehrefsyntax-valmathitval"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>Global Instances</span></a> <span><span><span></span></span></span></span><a href="#global-instances---hrefsyntax-globalinstmathsftype-hrefsyntax-mutmathitmutt-hrefsyntax-globalinstmathsfvaluehrefsyntax-valmathitval"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-globaltype"><span>valid</span></a>.</p>
          </li><li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-val"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the global instance is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="element-instances-xref-exec-runtime-syntax-eleminst-mathsf-type-t-xref-exec-runtime-syntax-eleminst-mathsf-elem-xref-exec-runtime-syntax-ref-mathit-ref-ast">
          <span id="valid-eleminst"></span><span id="index-8①⑦"></span>
         <h5 id="element-instances---hrefsyntax-eleminstmathsftypet-hrefsyntax-eleminstmathsfelemhrefsyntax-refmathitrefast"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>Element Instances</span></a> <span><span><span></span></span></span></span><a href="#element-instances---hrefsyntax-eleminstmathsftypet-hrefsyntax-eleminstmathsfelemhrefsyntax-refmathitrefast"></a></h5>
         <ul>
          <li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference</span></a> <span><span><span></span></span></span> in the elements <span><span><span></span></span></span>:</p>
           <ul>
            <li>
             <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-ref"><span>reference</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-ref"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
           </li></ul>
          </li><li>
           <p>Then the element instance is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="data-instances-xref-exec-runtime-syntax-datainst-mathsf-data-b-ast">
          <span id="valid-datainst"></span><span id="index-9①⑦"></span>
         <h5 id="data-instances---hrefsyntax-datainstmathsfdatabast"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>Data Instances</span></a> <span><span><span></span></span></span></span><a href="#data-instances---hrefsyntax-datainstmathsfdatabast"></a></h5>
         <ul>
          <li>
           <p>The data instance is valid.</p>
         </li></ul>
         
        </section>
        <section id="export-instances-xref-exec-runtime-syntax-exportinst-mathsf-name-xref-syntax-values-syntax-name-mathit-name-xref-exec-runtime-syntax-exportinst-mathsf-value-xref-exec-runtime-syntax-externval-mathit-externval">
          <span id="valid-exportinst"></span><span id="index-10①③"></span>
         <h5 id="export-instances---hrefsyntax-exportinstmathsfnamehrefsyntax-namemathitname-hrefsyntax-exportinstmathsfvaluehrefsyntax-externvalmathitexternval"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-exportinst"><span>Export Instances</span></a> <span><span><span></span></span></span></span><a href="#export-instances---hrefsyntax-exportinstmathsfnamehrefsyntax-namemathitname-hrefsyntax-exportinstmathsfvaluehrefsyntax-externvalmathitexternval"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externval"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the export instance is valid.</p>
         </li></ul>
         
        </section>
        <section id="module-instances-xref-exec-runtime-syntax-moduleinst-mathit-moduleinst">
          <span id="valid-moduleinst"></span><span id="index-11①②"></span>
         <h5 id="module-instances--hrefsyntax-moduleinstmathitmoduleinst"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>Module Instances</span></a> <span><span><span></span></span></span></span><a href="#module-instances--hrefsyntax-moduleinstmathitmoduleinst"></a></h5>
         <ul>
          <li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>function type</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-functype"><span>valid</span></a>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcaddr"><span>function address</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externval-func"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableaddr"><span>table address</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externval-table"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memaddr"><span>memory address</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externval-mem"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaladdr"><span>global address</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external value</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externval-global"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemaddr"><span>element address</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>element instance</span></a> <span><span><span></span></span></span> must be <a href="#valid-eleminst"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-dataaddr"><span>data address</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>data instance</span></a> <span><span><span></span></span></span> must be <a href="#valid-datainst"><span>valid</span></a>.</p>
          </li><li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-exportinst"><span>export instance</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="#valid-exportinst"><span>valid</span></a>.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-exportinst"><span>export instance</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-name"><span>name</span></a> <span><span><span></span></span></span> must be different from any other name occurring in <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of all <span><span><span></span></span></span> in order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of all <span><span><span></span></span></span> in order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of all <span><span><span></span></span></span> in order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of all <span><span><span></span></span></span> in order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of all <span><span><span></span></span></span> in order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the length of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the length of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the sequence of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcidx"><span>function indices</span></a> from <span><span><span></span></span></span> to <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the module instance is valid with <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="configuration-validity">
         <span id="valid-config"></span><span id="frame-context"></span><span id="index-12⑦"></span>
        <h4 id="configuration-validity①"><span>Configuration Validity</span><a href="#configuration-validity①"></a></h4>
        <p>To relate the WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid"><span>type system</span></a> to its <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec"><span>execution semantics</span></a>, the <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-instr"><span>typing rules for instructions</span></a> must be extended to <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-config"><span>configurations</span></a> <span><span><span></span></span></span>,
which relates the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> to execution <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-thread"><span>threads</span></a>.</p>
        <p>Configurations and threads are classified by their <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a>.
In addition to the store <span><span><span></span></span></span>, threads are typed under a <em>return type</em> <span><span><span></span></span></span>, which controls whether and with which type a <span><span><span></span></span></span> instruction is allowed.
This type is absent (<span><span><span></span></span></span>) except for instruction sequences inside an administrative <span><span><span></span></span></span> instruction.</p>
        <p>Finally, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frames</span></a> are classified with <em>frame contexts</em>, which extend the <a href="#module-context"><span>module contexts</span></a> of a frame’s associated <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a> with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-local"><span>locals</span></a> that the frame contains.</p>
        <section id="configurations-s-t">
          <span id="index-13⑤"></span>
         <h5 id="configurations--st"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-config"><span>Configurations</span></a> <span><span><span></span></span></span></span><a href="#configurations--st"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span> must be <a href="#valid-store"><span>valid</span></a>.</p>
          </li><li>
           <p>Under no allowed return type,
the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-thread"><span>thread</span></a> <span><span><span></span></span></span> must be <a href="#valid-thread"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the configuration is valid with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="threads-f-xref-syntax-instructions-syntax-instr-mathit-instr-ast">
          <span id="valid-thread"></span><span id="index-14⑤"></span>
         <h5 id="threads--fhrefsyntax-instrmathitinstrast"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-thread"><span>Threads</span></a> <span><span><span></span></span></span></span><a href="#threads--fhrefsyntax-instrmathitinstrast"></a></h5>
         <ul>
          <li>
           <p>Let <span><span><span></span></span></span> be the current allowed return type.</p>
          </li><li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>frame</span></a> <span><span><span></span></span></span> must be <a href="#valid-frame"><span>valid</span></a> with a <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> as <span><span><span></span></span></span>, but with <span><span><span></span></span></span> set to <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Under context <span><span><span></span></span></span>,
the instruction sequence <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-instr-seq"><span>valid</span></a> with some type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the thread is valid with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="frames-xref-exec-runtime-syntax-frame-mathsf-locals-xref-exec-runtime-syntax-val-mathit-val-ast-xref-exec-runtime-syntax-frame-mathsf-module-xref-exec-runtime-syntax-moduleinst-mathit-moduleinst">
          <span id="valid-frame"></span><span id="index-15⑤"></span>
         <h5 id="frames--hrefsyntax-framemathsflocalshrefsyntax-valmathitvalast-hrefsyntax-framemathsfmodulehrefsyntax-moduleinstmathitmoduleinst"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>Frames</span></a> <span><span><span></span></span></span></span><a href="#frames--hrefsyntax-framemathsflocalshrefsyntax-valmathitvalast-hrefsyntax-framemathsfmodulehrefsyntax-moduleinstmathitmoduleinst"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-moduleinst"><span>module instance</span></a> <span><span><span></span></span></span> must be <a href="#valid-moduleinst"><span>valid</span></a> with some <a href="#module-context"><span>module context</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> <span><span><span></span></span></span> in <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-val"><span>valid</span></a> with some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the concatenation of all <span><span><span></span></span></span> in order.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> as <span><span><span></span></span></span>, but with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value types</span></a> <span><span><span></span></span></span> prepended to the <span><span><span></span></span></span> vector.</p>
          </li><li>
           <p>Then the frame is valid with <a href="#frame-context"><span>frame context</span></a> <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="administrative-instructions②">
         <span id="valid-instr-admin"></span><span id="index-16③"></span>
        <h4 id="administrative-instructions③"><span>Administrative Instructions</span><a href="#administrative-instructions③"></a></h4>
        <p>Typing rules for <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-admin"><span>administrative instructions</span></a> are specified as follows.
In addition to the <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> <span><span><span></span></span></span>, typing of these instructions is defined under a given <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> <span><span><span></span></span></span>.
To that end, all previous typing judgements <span><span><span></span></span></span> are generalized to include the store, as in <span><span><span></span></span></span>, by implicitly adding <span><span><span></span></span></span> to all rules – <span><span><span></span></span></span> is never modified by the pre-existing rules, but it is accessed in the extra rules for <a href="#valid-instr-admin"><span>administrative instructions</span></a> given below.</p>
        <section id="xref-exec-runtime-syntax-trap-mathsf-trap">
          <span id="index-17③"></span>
         <h5 id="-hrefsyntax-trapmathsftrap"><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-trapmathsftrap"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>, for any sequences of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value types</span></a> <span><span><span></span></span></span> and <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-runtime-syntax-ref-extern-mathsf-ref-extern-xref-exec-runtime-syntax-externaddr-mathit-externaddr">
          <span id="index-18③"></span>
         <h5 id="-hrefsyntax-refexternmathsfrefexternhrefsyntax-externaddrmathitexternaddr"><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-refexternmathsfrefexternhrefsyntax-externaddrmathitexternaddr"></a></h5>
         <ul>
          <li>
           <p>The instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-runtime-syntax-ref-mathsf-ref-xref-exec-runtime-syntax-funcaddr-mathit-funcaddr">
          <span id="index-19①"></span>
         <h5 id="-hrefsyntax-refmathsfrefhrefsyntax-funcaddrmathitfuncaddr"><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-refmathsfrefhrefsyntax-funcaddrmathitfuncaddr"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external function value</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externval-func"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-runtime-syntax-invoke-mathsf-invoke-xref-exec-runtime-syntax-funcaddr-mathit-funcaddr">
          <span id="index-20①"></span>
         <h5 id="-hrefsyntax-invokemathsfinvokehrefsyntax-funcaddrmathitfuncaddr"><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-invokemathsfinvokehrefsyntax-funcaddrmathitfuncaddr"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externval"><span>external function value</span></a> <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-externval-func"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-externtype"><span>external function type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-runtime-syntax-label-mathsf-label-n-xref-syntax-instructions-syntax-instr-mathit-instr-0-ast-xref-syntax-instructions-syntax-instr-mathit-instr-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end">
          <span id="index-21①"></span>
         <h5 id="-hrefsyntax-labelmathsflabel_nhrefsyntax-instrmathitinstr_0asthrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-labelmathsflabel_nhrefsyntax-instrmathitinstr_0asthrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"></a></h5>
         <ul>
          <li>
           <p>The instruction sequence <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-instr-seq"><span>valid</span></a> with some type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the same <a href="https://www.w3.org/TR/wasm-core-2/index.html#context"><span>context</span></a> as <span><span><span></span></span></span>, but with the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span> prepended to the <span><span><span></span></span></span> vector.</p>
          </li><li>
           <p>Under context <span><span><span></span></span></span>,
the instruction sequence <span><span><span></span></span></span> must be <a href="https://www.w3.org/TR/wasm-core-2/index.html#valid-instr-seq"><span>valid</span></a> with type <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the compound instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="xref-exec-runtime-syntax-frame-mathsf-frame-n-f-xref-syntax-instructions-syntax-instr-mathit-instr-ast-xref-syntax-instructions-syntax-instr-control-mathsf-end">
          <span id="index-22①"></span>
         <h5 id="-hrefsyntax-framemathsfframe_nfhrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"><span><span><span><span></span></span></span></span><a href="#-hrefsyntax-framemathsfframe_nfhrefsyntax-instrmathitinstrasthrefsyntax-instr-controlmathsfend"></a></h5>
         <ul>
          <li>
           <p>Under the return type <span><span><span></span></span></span>,
the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-frame"><span>thread</span></a> <span><span><span></span></span></span> must be <a href="#valid-frame"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>.</p>
          </li><li>
           <p>Then the compound instruction is valid with type <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="store-extension">
         <span id="extend"></span><span id="index-23"></span>
        <h4 id="store-extension①"><span>Store Extension</span><a href="#store-extension①"></a></h4>
        <p>Programs can mutate the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>store</span></a> and its contained instances.
Any such modification must respect certain invariants, such as not removing allocated instances or changing immutable definitions.
While these invariants are inherent to the execution semantics of WebAssembly <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instr"><span>instructions</span></a> and <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>modules</span></a>, <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-hostfunc"><span>host functions</span></a> do not automatically adhere to them. Consequently, the required invariants must be stated as explicit constraints on the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invoke-host"><span>invocation</span></a> of host functions.
Soundness only holds when the <a href="https://www.w3.org/TR/wasm-core-2/index.html#embedder"><span>embedder</span></a> ensures these constraints.</p>
        <p>The necessary constraints are codified by the notion of store <em>extension</em>:
a store state <span><span><span></span></span></span> extends state <span><span><span></span></span></span>, written <span><span><span></span></span></span>, when the following rules hold.</p>
        <div role="note">
         <p>Note</p>
         <p>Extension does not imply that the new store is valid, which is defined separately <a href="#valid-store"><span>above</span></a>.</p>
        </div>
        <section id="extend-store">
          <span id="index-24"></span><span id="id3④"></span>
         <h5 id="store--s①"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-store"><span>Store</span></a> <span><span><span></span></span></span></span><a href="#store--s①"></a></h5>
         <ul>
          <li>
           <p>The length of <span><span><span></span></span></span> must not shrink.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must not shrink.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must not shrink.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must not shrink.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must not shrink.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must not shrink.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>function instance</span></a> <span><span><span></span></span></span> in the original <span><span><span></span></span></span>, the new function instance must be an <a href="#extend-funcinst"><span>extension</span></a> of the old.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>table instance</span></a> <span><span><span></span></span></span> in the original <span><span><span></span></span></span>, the new table instance must be an <a href="#extend-tableinst"><span>extension</span></a> of the old.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>memory instance</span></a> <span><span><span></span></span></span> in the original <span><span><span></span></span></span>, the new memory instance must be an <a href="#extend-meminst"><span>extension</span></a> of the old.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>global instance</span></a> <span><span><span></span></span></span> in the original <span><span><span></span></span></span>, the new global instance must be an <a href="#extend-globalinst"><span>extension</span></a> of the old.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>element instance</span></a> <span><span><span></span></span></span> in the original <span><span><span></span></span></span>, the new element instance must be an <a href="#extend-eleminst"><span>extension</span></a> of the old.</p>
          </li><li>
           <p>For each <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>data instance</span></a> <span><span><span></span></span></span> in the original <span><span><span></span></span></span>, the new data instance must be an <a href="#extend-datainst"><span>extension</span></a> of the old.</p>
         </li></ul>
         
        </section>
        <section id="function-instance-xref-exec-runtime-syntax-funcinst-mathit-funcinst">
          <span id="extend-funcinst"></span><span id="index-25"></span>
         <h5 id="function-instance--hrefsyntax-funcinstmathitfuncinst"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-funcinst"><span>Function Instance</span></a> <span><span><span></span></span></span></span><a href="#function-instance--hrefsyntax-funcinstmathitfuncinst"></a></h5>
         <ul>
          <li>
           <p>A function instance must remain unchanged.</p>
         </li></ul>
         
        </section>
        <section id="table-instance-xref-exec-runtime-syntax-tableinst-mathit-tableinst">
          <span id="extend-tableinst"></span><span id="index-26"></span>
         <h5 id="table-instance--hrefsyntax-tableinstmathittableinst"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableinst"><span>Table Instance</span></a> <span><span><span></span></span></span></span><a href="#table-instance--hrefsyntax-tableinstmathittableinst"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>table type</span></a> <span><span><span></span></span></span> must remain unchanged.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must not shrink.</p>
         </li></ul>
         
        </section>
        <section id="memory-instance-xref-exec-runtime-syntax-meminst-mathit-meminst">
          <span id="extend-meminst"></span><span id="index-27"></span>
         <h5 id="memory-instance--hrefsyntax-meminstmathitmeminst"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-meminst"><span>Memory Instance</span></a> <span><span><span></span></span></span></span><a href="#memory-instance--hrefsyntax-meminstmathitmeminst"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-memtype"><span>memory type</span></a> <span><span><span></span></span></span> must remain unchanged.</p>
          </li><li>
           <p>The length of <span><span><span></span></span></span> must not shrink.</p>
         </li></ul>
         
        </section>
        <section id="global-instance-xref-exec-runtime-syntax-globalinst-mathit-globalinst">
          <span id="extend-globalinst"></span><span id="index-28"></span>
         <h5 id="global-instance--hrefsyntax-globalinstmathitglobalinst"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globalinst"><span>Global Instance</span></a> <span><span><span></span></span></span></span><a href="#global-instance--hrefsyntax-globalinstmathitglobalinst"></a></h5>
         <ul>
          <li>
           <p>The <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-globaltype"><span>global type</span></a> <span><span><span></span></span></span> must remain unchanged.</p>
          </li><li>
           <p>Let <span><span><span></span></span></span> be the structure of <span><span><span></span></span></span>.</p>
          </li><li>
           <p>If <span><span><span></span></span></span> is <span><span><span></span></span></span>, then the <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-val"><span>value</span></a> <span><span><span></span></span></span> must remain unchanged.</p>
         </li></ul>
         
        </section>
        <section id="element-instance-xref-exec-runtime-syntax-eleminst-mathit-eleminst">
          <span id="extend-eleminst"></span><span id="index-29"></span>
         <h5 id="element-instance--hrefsyntax-eleminstmathiteleminst"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-eleminst"><span>Element Instance</span></a> <span><span><span></span></span></span></span><a href="#element-instance--hrefsyntax-eleminstmathiteleminst"></a></h5>
         <ul>
          <li>
           <p>The vector <span><span><span></span></span></span> must either remain unchanged or shrink to length <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
        <section id="data-instance-xref-exec-runtime-syntax-datainst-mathit-datainst">
          <span id="extend-datainst"></span><span id="index-30"></span>
         <h5 id="data-instance--hrefsyntax-datainstmathitdatainst"><span><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datainst"><span>Data Instance</span></a> <span><span><span></span></span></span></span><a href="#data-instance--hrefsyntax-datainstmathitdatainst"></a></h5>
         <ul>
          <li>
           <p>The vector <span><span><span></span></span></span> must either remain unchanged or shrink to length <span><span><span></span></span></span>.</p>
         </li></ul>
         
        </section>
       </section>
       <section id="theorems">
         <span id="soundness-statement"></span><span id="index-31"></span>
        <h4 id="theorems①"><span>Theorems</span><a href="#theorems①"></a></h4>
        <p>Given the definition of <a href="#valid-config"><span>valid configurations</span></a>,
the standard soundness theorems hold. <a href="#cite-cpp2018" id="id4③" role="doc-noteref"><span>[</span>2<span>]</span></a> <a href="#cite-fm2021" id="id5②" role="doc-noteref"><span>[</span>3<span>]</span></a></p>
        <p><strong>Theorem (Preservation).</strong> If a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-config"><span>configuration</span></a> <span><span><span></span></span></span> is <a href="#valid-config"><span>valid</span></a> with <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span> (i.e., <span><span><span></span></span></span>),
and steps to <span><span><span></span></span></span> (i.e., <span><span><span></span></span></span>),
then <span><span><span></span></span></span> is a valid configuration with the same result type (i.e., <span><span><span></span></span></span>).
Furthermore, <span><span><span></span></span></span> is an <a href="#extend-store"><span>extension</span></a> of <span><span><span></span></span></span> (i.e., <span><span><span></span></span></span>).</p>
        <p>A <em>terminal</em> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-thread"><span>thread</span></a> is one whose sequence of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr"><span>instructions</span></a> is a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-result"><span>result</span></a>.
A terminal configuration is a configuration whose thread is terminal.</p>
        <p><strong>Theorem (Progress).</strong> If a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-config"><span>configuration</span></a> <span><span><span></span></span></span> is <a href="#valid-config"><span>valid</span></a> (i.e., <span><span><span></span></span></span> for some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>),
then either it is terminal,
or it can step to some configuration <span><span><span></span></span></span> (i.e., <span><span><span></span></span></span>).</p>
        <p>From Preservation and Progress the soundness of the WebAssembly type system follows directly.</p>
        <p><strong>Corollary (Soundness).</strong> If a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-config"><span>configuration</span></a> <span><span><span></span></span></span> is <a href="#valid-config"><span>valid</span></a> (i.e., <span><span><span></span></span></span> for some <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-resulttype"><span>result type</span></a> <span><span><span></span></span></span>),
then it either diverges or takes a finite number of steps to reach a terminal configuration <span><span><span></span></span></span> (i.e., <span><span><span></span></span></span>) that is valid with the same result type (i.e., <span><span><span></span></span></span>)
and where <span><span><span></span></span></span> is an <a href="#extend-store"><span>extension</span></a> of <span><span><span></span></span></span> (i.e., <span><span><span></span></span></span>).</p>
        <p>In other words, every thread in a valid configuration either runs forever, traps, or terminates with a result that has the expected type.
Consequently, given a <a href="#valid-store"><span>valid store</span></a>, no computation defined by <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-instantiation"><span>instantiation</span></a> or <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec-invocation"><span>invocation</span></a> of a valid module can “crash” or otherwise (mis)behave in ways not covered by the <a href="https://www.w3.org/TR/wasm-core-2/index.html#exec"><span>execution</span></a> semantics given in this specification.</p>
        
       </section>
      </section>
       <section id="change-history">
        <span id="changes"></span><span id="index-0③②"></span>
       <h3 id="a6-change-history"><span>A.6 Change History</span><a href="#a6-change-history"></a></h3>
       <p>Since the original release 1.0 of the WebAssembly specification, a number of proposals for extensions have been integrated.
The following sections provide an overview of what has changed.</p>
       <section id="release-2-0">
        <h4 id="release-20"><span>Release 2.0</span><a href="#release-20"></a></h4>
        <section id="sign-extension-instructions">
          <span id="index-1③②"></span>
         <h5 id="sign-extension-instructions①"><span>Sign extension instructions</span><a href="#sign-extension-instructions①"></a></h5>
         <p>Added new numeric instructions for performing sign extension within integer representations <a href="#proposal-signext" id="id1①⑨" role="doc-noteref"><span>[</span>1<span>]</span></a>.</p>
         <ul>
          <li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-numeric"><span>numeric instructions</span></a>:</p>
           <ul>
            <li>
             
           </li></ul>
         </li></ul>
        </section>
        <section id="non-trapping-float-to-int-conversions">
          <span id="index-2③⓪"></span>
         <h5 id="non-trapping-float-to-int-conversions①"><span>Non-trapping float-to-int conversions</span><a href="#non-trapping-float-to-int-conversions①"></a></h5>
         <p>Added new conversion instructions that avoid trapping when converting a floating-point number to an integer <a href="#proposal-cvtsat" id="id2⑨" role="doc-noteref"><span>[</span>2<span>]</span></a>.</p>
         <ul>
          <li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-numeric"><span>numeric instructions</span></a>:</p>
           <ul>
            <li>
             
           </li></ul>
         </li></ul>
        </section>
        <section id="multiple-values">
          <span id="index-3②⑤"></span>
         <h5 id="multiple-values①"><span>Multiple values</span><a href="#multiple-values①"></a></h5>
         <p>Generalized the result type of blocks and functions to allow for multiple values; in addition, introduced the ability to have block parameters <a href="#proposal-multivalue" id="id3⑤" role="doc-noteref"><span>[</span>3<span>]</span></a>.</p>
         <ul>
          <li>
           <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-functype"><span>Function types</span></a> allow more than one result</p>
          </li><li>
           <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-blocktype"><span>Block types</span></a> can be arbitrary function types</p>
         </li></ul>
        </section>
        <section id="reference-types⑥">
          <span id="index-4②⑤"></span>
         <h5 id="reference-types⑦"><span>Reference types</span><a href="#reference-types⑦"></a></h5>
         <p>Added <span><span><span></span></span></span> and <span><span><span></span></span></span> as new value types and respective instructions <a href="#proposal-reftype" id="id4④" role="doc-noteref"><span>[</span>4<span>]</span></a>.</p>
         <ul>
          <li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference</span></a> <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value types</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-ref"><span>reference instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>Enrich <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-parametric"><span>parametric instruction</span></a>:</p>
           <ul>
            <li>
             <p><span><span><span></span></span></span> with optional type immediate</p>
           </li></ul>
          </li><li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemmode"><span>declarative</span></a> form of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a></p>
         </li></ul>
        </section>
        <section id="table-instructions①⓪">
          <span id="index-5②②"></span>
         <h5 id="table-instructions①①"><span>Table instructions</span><a href="#table-instructions①①"></a></h5>
         <p>Added instructions to directly access and modify tables <a href="#proposal-reftype" id="id5③" role="doc-noteref"><span>[</span>4<span>]</span></a>.</p>
         <ul>
          <li>
           <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tabletype"><span>Table types</span></a> allow any <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-reftype"><span>reference type</span></a> as element type</p>
          </li><li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-table"><span>table instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
         </li></ul>
        </section>
        <section id="multiple-tables">
          <span id="index-6①⑧"></span>
         <h5 id="multiple-tables①"><span>Multiple tables</span><a href="#multiple-tables①"></a></h5>
         <p>Added the ability to use multiple tables per module <a href="#proposal-reftype" id="id6②" role="doc-noteref"><span>[</span>4<span>]</span></a>.</p>
         <ul>
          <li>
           <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-module"><span>Modules</span></a> may</p>
           <ul>
            <li>
             <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-table"><span>define</span></a> multiple tables</p>
            </li><li>
             <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-import"><span>import</span></a> multiple tables</p>
            </li><li>
             <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-export"><span>export</span></a> multiple tables</p>
           </li></ul>
          </li><li>
           <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-table"><span>Table instructions</span></a> take a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableidx"><span>table index</span></a> immediate:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p><a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>Element segments</span></a> take a <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-tableidx"><span>table index</span></a></p>
         </li></ul>
        </section>
        <section id="bulk-memory-and-table-instructions">
          <span id="index-7①⑧"></span>
         <h5 id="bulk-memory-and-table-instructions①"><span>Bulk memory and table instructions</span><a href="#bulk-memory-and-table-instructions①"></a></h5>
         <p>Added instructions that modify ranges of memory or table entries <a href="#proposal-reftype" id="id7①" role="doc-noteref"><span>[</span>4<span>]</span></a> <a href="#proposal-bulk" id="id8①" role="doc-noteref"><span>[</span>5<span>]</span></a></p>
         <ul>
          <li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-memory"><span>memory instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-table"><span>table instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-datamode"><span>passive</span></a> form of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-data"><span>data segment</span></a></p>
          </li><li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elemmode"><span>passive</span></a> form of <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-elem"><span>element segment</span></a></p>
          </li><li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#binary-datacountsec"><span>data count section</span></a> in binary format</p>
          </li><li>
           <p>Active data and element segments boundaries are no longer checked at compile time but may trap instead</p>
         </li></ul>
        </section>
        <section id="vector-instructions①⓪">
          <span id="index-8①⑧"></span>
         <h5 id="vector-instructions①①"><span>Vector instructions</span><a href="#vector-instructions①①"></a></h5>
         <p>Added vector type and instructions that manipulate multiple numeric values in parallel
(also known as <em>SIMD</em>, single instruction multiple data) <a href="#proposal-vectype" id="id9①" role="doc-noteref"><span>[</span>6<span>]</span></a></p>
         <ul>
          <li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-valtype"><span>value type</span></a>:</p>
           <ul>
            <li>
             
           </li></ul>
          </li><li>
           <p>New <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-memory"><span>memory instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New constant <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instruction</span></a>:</p>
           <ul>
            <li>
             
           </li></ul>
          </li><li>
           <p>New unary <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New binary <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New ternary <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instruction</span></a>:</p>
           <ul>
            <li>
             
           </li></ul>
          </li><li>
           <p>New test <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New relational <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New conversion <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New lane access <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New lane splitting/combining <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New byte reordering <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
           </li></ul>
          </li><li>
           <p>New injection/projection <a href="https://www.w3.org/TR/wasm-core-2/index.html#syntax-instr-vec"><span>vector instructions</span></a>:</p>
           <ul>
            <li>
             
            </li><li>
             
            </li><li>
             
           </li></ul>
         </li></ul>
         
        </section>
       </section>
      </section>
     </div>
     
    </section>
   </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Doge software engineer's computer infected by info-stealing malware (225 pts)]]></title>
            <link>https://arstechnica.com/security/2025/05/doge-software-engineers-computer-infected-by-info-stealing-malware/</link>
            <guid>43934540</guid>
            <pubDate>Fri, 09 May 2025 07:22:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arstechnica.com/security/2025/05/doge-software-engineers-computer-infected-by-info-stealing-malware/">https://arstechnica.com/security/2025/05/doge-software-engineers-computer-infected-by-info-stealing-malware/</a>, See on <a href="https://news.ycombinator.com/item?id=43934540">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                      
                      
          <p>Login credentials belonging to an employee at both the Cybersecurity and Infrastructure Security Agency and the Department of Government Efficiency have appeared in multiple public leaks from info-stealer malware, a strong indication that devices belonging to him have been hacked in recent years.</p>
<p>Kyle Schutt is a 30-something-year-old software engineer who, according to <a href="https://www.dropsitenews.com/p/doge-fema-funding-access-social-security-numbers">Dropsite News</a>, gained access in February to a “core financial management system” belonging to the Federal Emergency Management Agency. As an employee of DOGE, Schutt accessed FEMA’s proprietary software for managing both disaster and non-disaster funding grants. Under his role at CISA, he likely is privy to sensitive information regarding the security of civilian federal government networks and critical infrastructure throughout the US.</p>
<h2>A steady stream of published credentials</h2>
<p>According to journalist <a href="https://micahflee.com/doge-bro-kyle-schutts-computer-infected-by-malware-credentials-found-in-stealer-logs/">Micah Lee</a>, user names and passwords for logging in to various accounts belonging to Schutt have been published at least four times since 2023 in logs from stealer malware. Stealer malware typically infects devices through trojanized apps, phishing, or software exploits. Besides pilfering login credentials, stealers can also log all keystrokes and capture or record screen output. The data is then sent to the attacker and, occasionally after that, can make its way into public credential dumps.</p>
<p>“I have no way of knowing exactly when Schutt's computer was hacked, or how many times,” Lee wrote. “I don't know nearly enough about the origins of these stealer log datasets. He might have gotten hacked years ago and the stealer log datasets were just published recently. But he also might have gotten hacked within the last few months.”</p>
<p>Lee went on to say that credentials belonging to a Gmail account known to belong to Schutt have appeared in 51 data breaches and five pastes tracked by breach notification service <a href="https://haveibeenpwned.com/">Have I Been Pwned</a>. Among the breaches that supplied the credentials is one from 2013 that pilfered password data for <a href="https://arstechnica.com/information-technology/2013/10/adobe-source-code-and-customer-data-stolen-in-sustained-network-hack/">3 million</a> Adobe account holders, one in a 2016 breach that stole credentials for <a href="https://arstechnica.com/information-technology/2016/05/then-there-were-117-million-linkedin-password-breach-much-bigger-than-thought/">164 million LinkedIn users</a>, a 2020 breach affecting 167 million users of Gravatar, and a breach last year of the conservative news site The Post Millennial.</p>

          
                      
                  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[LegoGPT: Generating Physically Stable and Buildable Lego (408 pts)]]></title>
            <link>https://avalovelace1.github.io/LegoGPT/</link>
            <guid>43933891</guid>
            <pubDate>Fri, 09 May 2025 04:55:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://avalovelace1.github.io/LegoGPT/">https://avalovelace1.github.io/LegoGPT/</a>, See on <a href="https://news.ycombinator.com/item?id=43933891">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p ;=""> <span>LegoGPT</span> generates a LEGO structure from a user-provided text prompt in an end-to-end manner. Notably, our generated LEGO structure is physically stable and buildable. </p>


        <p><img src="https://avalovelace1.github.io/LegoGPT/assets/teaser.jpg"></p><!-- <video autoplay="autoplay" controls="controls" loop="loop" muted="muted"
                                    src="rsc/figures/teaser.mp4"
                                    style="width: 100%" type="video/mp4"></video> -->
        
            <!--  -->
    </div><div>
                <h2>Abstract</h2>
                <p>
                    We introduce <span>LegoGPT</span>, the first approach for generating physically stable LEGO brick models from text prompts. To achieve this, we construct a large-scale, physically stable dataset of LEGO designs, along with their associated captions, and train an autoregressive large language model to predict the next brick to add via next-token prediction. To improve the stability of the resulting designs, we employ an efficient validity check and physics-aware rollback during autoregressive inference, which prunes infeasible token predictions using physics laws and assembly constraints. Our experiments show that <span>LegoGPT</span> produces stable, diverse, and aesthetically pleasing LEGO designs that align closely with the input text prompts. We also develop a text-based LEGO texturing method to generate colored and textured designs. We show that our designs can be assembled manually by humans and automatically by robotic arms. We also release our new dataset, <span>StableText2Lego</span>, containing over 47,000 LEGO structures of over 28,000 unique 3D objects accompanied by detailed captions, along with our code and models.
                </p>

            </div><div>
        <h2>Step by step generation of LEGO structures from text</h2>

    
        

        <div>

            

            <p>
                    "A streamlined vessel with a long, narrow hull"
                </p>
            <p>
                    "A classical guitar"
                </p>
            <p>
                    "A basic sofa"
                </p>
            

        </div>

        

        <div>
            <p>
                    "A bookshelf with horizontal tiers"
                </p>
            <p>
                    "A high-backed chair"
                </p>
            <p>
                    "A backless bench with armrest"
                </p>
        </div>
    </div><div>
        <h2>Automated assembly of generated LEGO structures using robots (8x speed)</h2>

        

        <div>
            <p>
                    "A streamlined vessel with a long, narrow hull [...]"
                </p>
            <p>
                    "An asymmetrical six-string guitar [...]"
                </p>
        </div>
    </div><div>
        <h2>Generated Textured LEGO Models</h2>

        

        <div>
            <p>
                    "Rustic stone bench with moss growth [...]"
                </p>
            <p>
                    "Hot rod with flame paintwork [...]"
                </p>
            <p>
                    "Rustic farmhouse chair built from reclaimed wood [...]"
                </p>
            <p>
                    "Live edge walnut table [...]"
                </p>
        </div>
    
        

        <div>
            <p>
                    "Comfortable lounge chair wrapped in Japanese shibori fabric [...]"
                </p>
            <p>
                    "Cyberpunk holographic material with neon purple and blue gradients [...]"
                </p>
            <p>
                    "Rustic farmhouse armchair built from reclaimed wood [...]"
                </p>
            <p>
                    "Vintage floral tapestry with deep reds and golds [...]"
                </p>
        </div>

        

        <div>
            <p>
                    "Gothic cathedral bookshelf with arch details, medieval style [...]"
                </p>
            <p>
                    "Japanese sliding bookcase with shoji screens, traditional design [...]"
                </p>
            <p>
                    "Victorian library shelving with carved moldings [...]"
                </p>
        </div>
    </div><div>
        <h2>Generated Colored LEGO Models</h2>

    
        

        <div>
            <p>
                    "Parlor guitar with ladder bracing [...]"
                </p>
            <p>
                    "Electric guitar in metallic purple [...]"
                </p>
            <p>
                    "Steel resonator with engraved body[...]"
                </p>
            <p>
                    "Sunburst Les Paul with amber finish  [...]"
                </p>
        </div>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Dead Reckoning (125 pts)]]></title>
            <link>https://www.damninteresting.com/dead-reckoning/</link>
            <guid>43933628</guid>
            <pubDate>Fri, 09 May 2025 03:46:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.damninteresting.com/dead-reckoning/">https://www.damninteresting.com/dead-reckoning/</a>, See on <a href="https://news.ycombinator.com/item?id=43933628">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

                    

                    <p><span>

                                                	<span>Long-Form/Podcast:</span>
                            <span>The 18th century misadventures of HMS Wager and her reluctant crew<br></span>
                            <span>Written by <a href="https://www.damninteresting.com/contributors/alan-bellows/">Alan Bellows</a></span>
                        
                                                	•
                        	<span>Non-Fiction</span>
                        
		        					        		•
			        		<span>September 2019</span>
		        		                    </span>


                </p></div><div>

		            				<article>
											<p>
			© 2019 All Rights Reserved. Do not distribute or repurpose this work without written permission from the copyright holder(s).
	</p>
<p>
	Printed from https://www.damninteresting.com/dead-reckoning/<br>
</p>
										
				
									
		                
						
						
											
					<p><i>This story is assembled from contemporaneous first-person accounts. As such, quotations contain some antiquated spellings, grammar, and phrasing.</i></p>
<p>In the Earth’s extreme southern latitudes, where the Pacific and Atlantic oceans meet, there is a rocky gap of sea between Antarctica and South America known as the Drake Passage. Among 18th century seafarers, this corridor was also known by a more ghoulish nickname: The sailors’ graveyard. In the so-called Age of Exploration, the Drake Passage was the least impractical route for large European ships to travel around South America to access its west coast. The passage hooks far south⁠—almost to the Antarctic Circle⁠—to navigate around Cape Horn on the extreme southern tip of the continent. Sensible sailors avoided the corridor except in the relatively calm summer, yet on 12 April 1741⁠—deep into blustery autumn⁠—the British Royal Navy ship HMS <i>Wager</i> was at full sail in the dead center of the Drake Passage.</p>
<p>Aboard <i>Wager</i>, veteran ship’s gunner John Bulkeley was the officer of the watch, overseeing the ship’s navigation in the midst of a violent storm. The sky was a wet, howling tempest, the sea undulated with mountainous swells. <i>Wager’s</i> timbers creaked and her sails thrashed as the air and ocean conspired to smash the ship to pieces. Bulkeley had seen a lot of storms in his day, but nothing like this. One ocean swell⁠—the largest he had ever witnessed⁠—swept over the ship and briefly submerged <i>Wager</i> and her 160 crew in frigid water, washing Bulkeley across the quarter-deck.</p>
<p><i>Wager</i> had entered the Drake Passage about a month earlier. She had been accompanied by seven other Royal Navy ships, all part of a secret squadron on a wartime mission heading for Patagonia on the west coast of South America. A principal hazard in sailing westward in the Drake Passage is that the winds and currents are powerful, relentless, and moving in exactly the wrong direction. Temperatures are frosty in autumn at such a southern latitude, and precipitation is nearly constant. In the era of sailing ships, the Drake Passage was a perilous venture even for a robust vessel manned by an intrepid crew in the calm season⁠—a collection of characteristics that utterly failed to describe HMS <i>Wager</i>.</p>
<p><i>Wager’s</i> speed and maneuverability were compromised due to the loss of a mast in the storm. Her captain was dead, her acting captain was bedridden, and many of the men were deathly ill. <i>Wager</i> had lost contact with the other ships of the squadron, having fallen hopelessly far behind. And her crew’s troubles had only just begun.
</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="1.5062761506276" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/cape-horn.jpg" alt="Cape Horn from space" title="Cape Horn from space"></p><figcaption>Cape Horn from space</figcaption></figure>
<p><i>Wager</i> was a long way from where she had started life. She was originally built in 1734 for the East India Company to shuttle spices, fabrics, and other exotic goods from the Far East to England, defended by 28 cannons. Although the name “Wager” evokes images of risk-taking and swashbuckling, her namesake was mundane⁠—she was named after Admiral Sir Charles Wager, First Lord of the Admiralty of the British Royal Navy. In 1739, the same navy purchased the lightly-used cargo ship, and refitted <i>Wager</i> into His Majesty’s Ship <i>Wager</i>, a supply and support vessel. She was placed under the command of Captain Dandy Kidd, and this delightfully monikered officer’s first mission as <i>Wager’s</i> captain would be to support Commodore George Anson on a clandestine mission to surprise, harass, and plunder the enemy in the name of King George II.</p>
<p>The enemy in question was the Spanish Empire. Two and a half centuries earlier, Christopher Columbus had stumbled upon the Americas on behalf of Spain, and subsequently Spain established a firm foothold in the so-called “New World.” The Spanish Empire looted vast quantities of silver, spices, sugar, and tobacco, and this flow of wealth attracted the jealous attention of the British monarchy. Spain strictly limited other nations’ business in the New World, nevertheless English privateers often smuggled goods and slaves in the region. In response, the Spanish navy began patrolling these waters, asserting the right to inspect any vessels.</p>
<p>During one such inspection in 1731, a British merchant captain named Robert Jenkins protested the intrusion, and in the ensuing scuffle the Spanish captain’s blade somehow separated Captain Jenkins from his left ear. This civilian injury was far from newsworthy back in Britain⁠—after all, smuggling was a rough business. Eight years later, however, when Great Britain sought a pretext for war, it became politically expedient for British politicians to suffer outrage over this unauthorized amputation. Legend has it that Captain Robert Jenkins himself held aloft the very ear in question at a Parliamentary hearing, as evidence for the grave insult to the crown⁠—though there is no historical proof that this exhibition actually occurred. Ear regardless, the outrage was successfully fabricated, and the resulting years of hostilities would come to be known as “The War of Jenkins’ Ear.”</p>
<p>Commodore Anson’s orders were to capture profitable Spanish possessions on the west coast of South America. The mission was delayed, however, due to a severe shortage of men. The Admiralty acquired some sailors through the controversial institution of the press-gang, where civilians were forced into military service on pain of death. To fill the remaining vacancies, the Admiralty waived their “able-bodied” requirement and drafted 500 men from the “Corps of Invalids,” a stockpile of army veterans who were too old, injured, or otherwise infirm for further army service. Some of these men were barely able to stand unassisted, let alone walk, or handle rigging on a lurching deck. Among those who <i>could</i> walk, many of them did, directly away from the navy ships, before the squadron was even underway.</p>
<p>Of the men that remained, Commodore Anson later wrote:</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="1.2720848056537" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/george-anson.jpg" alt="George Anson, painted by Sir Joshua Reynolds" title="George Anson, painted by Sir Joshua Reynolds"></p><figcaption>George Anson, painted by Sir Joshua Reynolds</figcaption></figure>
			<blockquote>
				<p>It is difficult to conceive a more moving scene than the embarkation of these unhappy veterans. They were themselves extremely averse to the service they were engaged in […] to be thus hurried from their repose into a fatiguing employ to which neither the strength of their bodies nor the vigour of their minds were in any way proportioned, and where, without seeing the face of an enemy…they would in all probability uselessly perish.</p>
			</blockquote>
					
<p>An additional concern was the general condition of His Majesty’s ships. Years of neglect and corruption had left the king’s navy in poor repair, with rot in ships’ masts and decay in their carpentry. Furthermore, many vessels were haphazard conversions from civilian sources, such as <i>Wager</i> herself. This mix-and-match fleet meant that ships did not have interchangeable parts, making it impossible to carry an adequate supply of spare parts for repairs at sea.</p>
<p>Be that as it may, Commodore Anson was eager to get underway. He was aware that the journey from England to the Drake Passage would require about five months, and he was aware that Cape Horn’s climate offered a short summer window⁠—November through January⁠—where the passage was merely very dangerous rather than suicidal. But he was waylaid by bureaucracy as the Admiralty struggled to acquire sailors, marines, and supplies. To have any hope of reaching the South Sea unscathed, Anson knew that his squadron <i>must</i> depart from England by June’s end⁠—early July at the absolute latest.</p>
<p>The squadron sailed in late September.</p>
<center>•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•</center>
<p>By February, as autumn began to settle on the southern hemisphere, Commodore Anson’s secret squadron was bobbing at anchor in St. Julian’s Bay, a natural harbor in modern-day Argentina. This was the last stop for seagoing vessels to repair and resupply before entering the Straits le Maire⁠—the gateway to the dreaded Drake Passage.</p>
<p>The stormy Atlantic crossing had battered the squadron’s vessels, and ships’ carpenters spent the dwindling daylight hours mending masts and repairing riggings. Many of the squadron’s 1,800 or so humans were in similar disrepair⁠—complaining of weakness, exhaustion, sore limbs, loss of teeth, spontaneous bleeding from the skin, and, occasionally, death. These were the unmistakable symptoms of vitamin C deficiency, more commonly known as scurvy. Humans, it turns out, are among the few species on Earth that cannot synthesize vitamin C; but at that time the Royal Navy was unaware of this biological shortcoming, and they had not yet discovered the scurvy-thwarting power of citrus that would eventually earn British sailors the nickname ‘limeys.’ Among the deceased was Captain Dandy Kidd of <i>Wager</i>. According to some depictions of his death, in his final days Captain Kidd uttered an ominous prophesy that the squadron was doomed to “poverty, vermin, famine, death, and destruction”; but this was likely a later embellishment for dramatic effect⁠—retroactive foreshadowing. After some shuffling of officers, Lieutenant David Cheap of the sloop <i>Tryal</i> was promoted to acting captain of <i>Wager</i>.</p>
<p>According to reports from authorities ashore at St. Julian’s Bay, five well-armed Spanish men-of-war had sailed through just a few weeks prior to Anson’s arrival, headed for the Drake Passage. Commodore Anson was keen to overtake his enemy around Cape Horn, so he could gain the tactical initiative. To that end, on 27 February 1741, the squadron pulled anchor and sailed for the Straits le Maire. Anson ordered all ships to round Cape Horn⁠—storms and scurvy be damned⁠—and rendezvous off the island of Nuestra Señora de Socorro west of South America.</p>
<p>As the squadron departed St. Julian’s Bay, the sun was shining pleasantly, and the wind blew in a favorable direction. It appeared to be a beautiful day for sailing. Commodore Anson would later write:</p>
			<blockquote>
				<p>We passed those memorable Streights, ignorant of the dreadful calamities which were then impending, and just ready to break upon us; ignorant that the time drew near, when the squadron would be separated never to unite again, and that this day of our passage was the last chearful day that the greatest part of us would ever live to enjoy.</p>
			</blockquote>
					
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="0.92941176470588" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/acc.jpg" alt="The Antarctic Circumpolar Current" title="The Antarctic Circumpolar Current"></p><figcaption>The Antarctic Circumpolar Current</figcaption></figure>
<p>Commodore Anson’s squadron entered the Drake Passage on 07 March 1741, sailing westward. The latitude of the Drake Passage⁠—approximately 60º south⁠—does not contain any landmasses, leaving a belt of uninterrupted ocean and atmosphere all the way around the planet. The Earth’s rotation drags this band of air and water into a nonstop west-to-east loop, a phenomenon known as the Antarctic Circumpolar Current. The Drake Passage constricts the flow into a relatively narrow space, intensifying the waves like rapids on a river. Sailing westward there means sailing against the current and the wind, which necessitates <i>tacking</i>, a means of making slow headway by setting a course almost perpendicular to the headwind, but with a slight slant in the desired direction. With periodic turns a ship can gradually zig-zag into the wind, like using switchbacks to climb a steep mountainside.</p>
<p>The squadron set out on a southerly zig, but shallow rocks made it too dangerous to zag north. So the crews maintained their south-southwest course, inching westward while rushing southward, bearing into the increasingly frigid Antarctic waters. They would need to turn north eventually⁠—Europeans at that time had not yet discovered Antarctica, but they were aware that sailing too far south at this latitude meant encounters with rocky shoals, icebergs, and lethal cold. Due to the extreme tacking required, Anson expected his squadron to spend about seven weeks rounding Cape Horn.</p>
<p>In the heavy precipitation and turbulent seas, the ships of the squadron scattered, only intermittently visible to one another. Great cold waves inundated the ships’ decks. The hulls groaned and heaved as crewmen did the same. Sudden lurches sent sailors sliding and tumbling, a few of them overboard with no hope of rescue. As often as possible officers used an astronomical instrument called an octant⁠—a precursor to the sextant⁠—to estimate their position, but an accurate calculation at such extreme latitudes would require a clear view of heavenly bodies, a stable platform, and a chronometer more accurate than any that existed at the time. The men were therefore forced to rely mostly on <i>dead reckoning</i>, the process of estimating one’s position based on speed, elapsed time, and previously estimated position. This imprecise method led to compounding errors, and decreasingly reliable positional data.</p>
<p>Aboard <i>Wager</i>, after enduring the miserable weather for weeks, the officers decided it was time to make their turn. They changed course to a long zag north. After travelling north only a short time, they heard cannon fire in the distance⁠—a warning from another ship in the squadron that deadly rocks had been sighted to the north. Evidently the squadron was only about halfway past the cape. Dejected, <i>Wager’s</i> crew turned again, and resumed the journey south. As winter and the Antarctic Circle drew closer, the frost began to bite. The converted cargo ship lacked the proper rigging for sailing into contrary wind, a matter made worse when one of the ship’s secondary masts buckled. Only a fraction of the men were well enough to run the ice-encrusted rigging, the skeleton crew barely managing to maintain a south-southwest trajectory. Captain Cheap himself was bedridden by germ or scurvy. Unbeknownst to the rest of the squadron, their supply ship was falling dangerously far behind.</p>
<p>On 01 May 1741, a little over two months after leaving St. Julian’s Bay, <i>Wager’s</i> officers again estimated that they had made adequate westerly progress. Just a few degrees north of the Antarctic Circle, they changed course to north-northwest. Ship’s gunner John Bulkeley⁠—well-regarded among the crew as the ship’s most capable seaman⁠—assessed the condition of <i>Wager</i> as she staggered roughly northward. As damaged as <i>Wager</i> was, Bulkeley was uncertain whether they could make the prearranged rendezvous with Commodore Anson at Socorro island. Further, the ship’s stores of food and fresh water were running worryingly low. Bulkeley proposed an alternate plan to Captain Cheap: Juan Fernandez island. Juan Fernandez was safer and more accessible, and there the crew could repair and resupply before seeking out the squadron at Socorro. Cheap did not agree, and he ordered his bewildered crew to stay the course in the general direction of Socorro. To forestall the exhaustion of food supplies, the captain instituted rations. To forestall mutinous actions from a hungry, scurvy-ridden crew, the captain ordered his officers to carry pistols.</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="0.70882352941176" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/HMS-Wager-Rounding-th-Horn-by-Geoff-Hunt.jpg" alt="HMS Wager Rounding the Horn by Geoff Hunt PPRSMA (limited edition prints on canvas and on paper)" title="HMS Wager Rounding the Horn by Geoff Hunt PPRSMA (limited edition prints on canvas and on paper)"></p><figcaption><i>HMS Wager Rounding the Horn</i> by Geoff Hunt PPRSMA (<a href="http://www.artmarine.co.uk/" rel="noopener noreferrer">limited edition prints on canvas and on paper</a>)</figcaption></figure>
<p>Thirteen days after <i>Wager’s</i> turn northwest, in the dawn hour, the ship was sailing along the west coast of South America when ship’s carpenter John Cummins thought he caught a glimpse of something unexpected off to the west: <i>Land</i>. But visibility was dreadful, the light was still dim, and his fellow officer Lieutenant Baynes assured him that their first sighting of land on this side of Cape Horn would be to the east⁠—to the west there was nothing but empty ocean for thousands of miles. Later that day, however, ship’s gunner Bulkeley also spotted a rocky shoreline, and it was to the west just as Carpenter Cummins had claimed. <i>Wager</i> was headed straight for it. Evidently during the night the ship had drifted into a large, uncharted bay on South America’s west coast. One of the few able-bodied men turned the wheel hard to starboard, and the others struggled with the crippled rigging throughout the afternoon and evening, working in gale force winds to reorient the sails. <i>Wager</i> began to haltingly twist away from the rocks. Captain Cheap had recovered from his earlier ailment, but in the rush and bluster, the deck pitched and the captain lost his footing, falling hard on the rung of a ladder and dislocating his shoulder.</p>
<p>The effort continued until after sundown. A dense cover of clouds crowded the sky and smothered the moon, hiding the looming shore from view. The men had altered <i>Wager’s</i> course, but it was impossible to know whether they had turned far enough. Gusts of wind agitated the ocean and pushed <i>Wager</i> through the cold darkness. Heavy raindrops pelted the deck. The ship full of ailing conscripts teeter-tottered blindly through writhing seas.</p>
<p>At around 4:30 in the morning, a tremendous thump rattled <i>Wager’s</i> weary bones. She was stuck on a rock. This lasted only a moment before a rolling wave scraped her off again. Captain Cheap ordered Lieutenant Baynes to drop the anchor, but before he complied, <i>Wager’s</i> hull shook from another impact, this one much harder than before. Stacks of heavy items in the cargo holds shifted and collapsed, knocking holes through the hull. Water poured in from the sea. There were wails of protest from hull and crew alike. <i>Wager</i> drifted and bobbed, her rudder broken. Finally, with a shudder, the ship ground to a halt, wedged in a gap between two rocky protrusions.</p>
<p>Midshipman John Byron wrote:</p>
			<blockquote>
				<p>Every person that now could stir was presently upon the quarter-deck; and many even of those were alert upon this occasion, that had not showed their faces upon the deck for above two months before: several poor wretches, who were in the last stage of scurvy, and who could not get out of their hammocks, were immediately drowned.</p>
			</blockquote>
					
<p>Once it was clear that their ship was stuck fast and taking on water, Captain Cheap ordered the remaining masts be cut down, lest the wind twist the ship to pieces. There was nothing more to do but wait out the night.</p>
<p>At daybreak, when the rocky shore became visible, Cheap ordered Master’s Mate John Snow to make landfall, reconnoiter, and return at once. His Majesty’s Shipwreck <i>Wager</i> was quite immobilized, but she was equipped with four smaller craft intended for various operations between ships and shore: the flat-bottomed barge for navigating shallow water, the cutter and yawl for small groups, and the longboat for much larger away missions. Snow set off on the barge along with a small crowd of pitiful survivors, but after an hour he had evidently decided to stay ashore, to the great exasperation of the remaining crew. Cheap ordered Lieutenant Baynes to go after him in the yawl, fetch the barge, and personally return with an assessment. Baynes dutifully departed, but neither he nor the barge returned⁠—instead the Lieutenant sent back another crewman in the yawl with vague good news about the conditions on land. Despite Cheap’s injury and his fury at defied orders, the other officers persuaded him to go ashore himself, along with all of the crew who could fit in the available landing craft. Those who could not squeeze in would need to linger on the wreck a little longer.</p>
<p>Ashore, the survivors found rocks, marshes, scattered scraggly shrubs, and little more. But they did discover one hint of civilization: a small man-made hut, the only effective shelter in the observable universe. On that first dreary day Captain Cheap claimed the hut as his own, while most of the other survivors scavenged wood, built a great bonfire, found some wild celery for dinner, and crowded under the few trees large enough to offer a modicum of shelter. By morning, three men had died of exposure.</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="0.68235294117647" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/loss-of-wager.jpg" alt="&quot;Loss of the Wager, Man of War, on Wager Island, near Mount Misery&quot;" title="&quot;Loss of the Wager, Man of War, on Wager Island, near Mount Misery&quot;"></p><figcaption>"Loss of the Wager, Man of War, on Wager Island, near Mount Misery"</figcaption></figure>
<p>In the days that followed, the officers organized the retrieval of additional provisions and survivors from the hulk of the <i>Wager</i>. Some of the seamen left behind, having located and appropriated the ship’s cache of liquor, decided to remain aboard the wreck indefinitely. Liberated from their inhibitions, they argued that they were no longer duty-bound to Captain Cheap. After all, the loss of the <i>Wager</i> meant that their pay would be suspended. Three sheets to the wind, the cantankerous holdouts plundered the cabins of the command crew, emerging with weapons in hand, draped in the officers’ special-occasion lace and finery. Ashore, a midshipman named Campbell was ordered to return to the wreck on a supply run, and he later wrote in his journal:</p>
			<blockquote>
				<p>Accordingly I went, but found them all in such Confusion as cannot be imagined by any who were not Eye-witnesses of it. Some were singing Psalms, others fighting, others swearing, and some lay drunk on the Deck.</p>
			</blockquote>
					
<p>The ocean intensified its heaving, so much so that the creaking hulk of the <i>Wager</i> seemed on the verge of disintegration out on the rocks. Officers ashore noted that one of the few remaining holdouts on the wreck⁠—Boatswain John King⁠—was signaling for rescue. However the sea was too heavy for any of the small vessels to cross the water, so King would have to wait. When King realized that no one was coming right away, the indignant boatswain aimed one of <i>Wager’s</i> cannons toward the shore and fired. The whoosh of a passing cannonball ripped the air just above the captain’s hut. King fired a second time, again narrowly missing the captain’s quarters.</p>
<p>Once the weather permitted rescue, when King finally stepped onto land draped in a soggy suit of offers’ lace, Captain Cheap was present to meet him. The captain struck King with a cane, cursing the insubordinate boatswain as a ‘rogue and a villain’. King fell prostrate into the sand as fellow crewmen looked on warily. King saw a cocked pistol in the captain’s other hand, and pulled open the collar of his garish blouse to bare his breast and receive the inevitable. “You deserve to be shot,” the captain said. But he did not do the deed.</p>
<p>Eventually, one hundred and forty survivors made it ashore. In dire need of supplies, whenever weather permitted, the men rowed out to the wreck to pick <i>Wager’s</i> bones under the watchful eyes of officers. Sailors hammered holes into the mostly submerged hull to flood inaccessible spaces. This washed out barrels of provisions, and scores of bloated corpses. Captain Cheap ordered that all recovered supplies be stored in a tent adjacent to his hut, to be set aside for strict rationing. The tent soon housed stacks of barrels containing biscuits, beef, pork, peas, oatmeal, flour, brandy, wine, and rum⁠—as well as black powder and ammunition. The captain enacted strict, meager rations, and asked Lieutenant Hamilton of the marines to post sentries outside the tent to discourage theft. The marines were not under the direct command of the ship’s captain⁠—Lieutenant Hamilton reported to Captain Pemberton of the marines⁠—but the land and sea branches of the military were expected to cooperate.</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="1.0650887573964" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/route-wager.jpg" alt="A rough approximation of the route of HMS Wager" title="A rough approximation of the route of HMS Wager"></p><figcaption>A rough approximation of the route of HMS <i>Wager</i></figcaption></figure>
<p>As winter set in, a sagging encampment of handmade tents gradually fanned out around the captain’s hut, providing slight respite from the incessant rain and snow. Some of the relatively healthy men explored the area around the camp, determining that fate had deposited the <i>Wager’s</i> crew upon a small, uninhabited, marshy island off the western shore of South America. Plant and animal life were scarce due to the hostile conditions. The men dubbed it “Wager Island”. They christened the hill to the north of the encampment “Mount Misery”. Survivors munched on wild celery, and ate small mollusks peeled from the rocks. Regarding the collection of shellfish for days on end, Midshipman Byron wrote:</p>
			<blockquote>
				<p>…this rummaging of the shore was now becoming extremely irksome to those who had any feeling, by the bodies of our drowned people thrown among the rocks, some of which were hideous spectacles. […] A boy, when no other eatables could be found, having picked up the liver of one of the drowned men (whose carcase had been torn to pieces by the force with which the sea drove it among the rocks), was with difficulty withheld from making a meal of it.</p>
			</blockquote>
					
<p>Many mornings men awoke to find some among them had died. Survivors shot and devoured the crows that dined on the dead. Some men merely disappeared, presumably to craft rafts and paddle for the mainland. Alcohol was relatively plentiful, so intoxication was common. Robberies of food and liquor from the storage tent occurred often, as the guards were too weary, hungry, and easily bribed to present an effective deterrence. It was in this bleak condition, a week after the loss of their ship, that the marooned Englishmen first made contact with the indigenous people.</p>
<p>The native men⁠—who the Englishmen referred to as “Indians” and “savages”⁠—appeared in the distance in three canoes. In spite of the cold they wore little clothing, Byron describing their garb as “nothing but a bit of some beast’s skin about their waists, and something woven from feathers over the shoulders.” The natives were relatively short in stature, with long black hair, olive skin, and astonishing muscle tone. At first the natives were apprehensive at the sight of the tall, pale, emaciated aliens, but the Europeans piqued their curiosity with offerings of unfamiliar technological wonders such as bales of fine cloth, articles of clothing, and⁠—most peculiar of all⁠—a “looking glass”.</p>
<p>Midshipman Byron wrote:</p>
			<blockquote>
				<p>It was some time before we could prevail upon them to lay aside their fears and approach us; which at length they were induced to do by the signs of friendship we made them, and by shewing some bale-goods, which they accepted, and suffered themselves to be conducted to the captain, who made them, likewise, some presents. They were strangely affected with the novelty thereof; but chiefly when shewn the looking-glass, in which the beholder could not conceive it to be his own face that was represented, but that of some other behind it, which he therefore went round to the back of the glass to find out.</p>
			</blockquote>
					
<p>Communicating via gestures, the natives agreed to trade for some food⁠—a small stockpile of mollusks. They returned some time later offering three sheep, which the Englishmen eagerly accepted for future meals. The natives also offered two dogs, which the Englishmen immediately roasted and ate. Groups of indigenous people stayed on the island from time to time, eventually establishing a small settlement with their own clutch of seal-skin wigwams housing dozens of men, women, and children. The men hunted while the women embarked on lengthy dives into the ocean for “sea-eggs” (probably sea urchins). But these families did not stay long⁠—the castaways had not seen any women in months, and based on the resulting unwanted attention, the indigenous people opted to evacuate before the English seamen became a problem.</p>
<p>The quality of the weather continued to deteriorate. About 100 men still survived. Midshipman Byron wrote of one desperate incident:</p>
			<blockquote>
				<p>I built a little hut just big enough for myself and a poor Indian dog I found in the woods, who could shift for himself along shore at low water by getting limpets. This creature grew so fond of me and faithful that he would suffer nobody to come near the hut without biting them. […] One day when I was at home in my hut with my Indian dog, a party came to my door and told me their necessities were such, that they must eat the creature or starve. Though their plea was urgent, I could not help using some arguments to endeavour to dissuade them from killing him, as his faithful services and fondness deserved it at my hands. But without weighing any arguments they took him away by force and killed him; upon which, thinking that I had at least as good a right to a share as the rest, I sat down with them and partook of their repast. Three weeks after that I was glad to make a meal of his paws and skin, which, upon recollecting the spot where they had killed him, I found thrown aside and rotten.</p>
			</blockquote>
					
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="1.2631578947368" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/cheap-1.jpg" alt="David Cheap, painted by Sir Joshua Reynolds" title="David Cheap, painted by Sir Joshua Reynolds"></p><figcaption>David Cheap, painted by Sir Joshua Reynolds</figcaption></figure>
<p>Amid the chronic starvation and intoxication, with no evidence of imminent deliverance or plan of action, murmurs of desertion and mutiny occasionally escalated into action. Along with individual desertions, ten sailors elected to band together and strike out on their own. Not content to merely disappear, they quietly placed a half barrel of explosive black powder just outside the captain’s hut. As Cheap sat inside, unaware of the treachery, they poured out a line of powder to the keg to act as a fuse. Before they lit the powder, however, one among them lost his nerve, and the ten fled without violence.</p>
<p>Some days later, in a heavy rain on 10 June 1741, Captain Cheap was in his hut conversing with Lieutenant Hamilton of the marines, when the men heard a pistol shot from outside, and shouting voices. Lieutenant Hamilton dashed outside shouting “Mutiny!”</p>
<p>The captain stepped out into the cold downpour, cocked pistol in hand. “Where is the villain?” he shouted, whereupon he spotted a midshipman named Cozens lurching toward him, with, as one onlooker put it, “the face and gesture of a mere fury”. Midshipman Cozens was well known to Captain Cheap⁠—in the days since the crew had become marooned on Wager Island, Mr. Cozens had been disciplined several times: for drunkenness, abusive language, an exchange of blows with the ship’s surgeon, and implications of mutiny. Without another word, the captain raised his pistol, and Captain Cheap shot Midshipman Cozens directly in the face.</p>
<p>Cozens fell to the ground with an expression of shock and bewilderment, blood gushing from a wound under his right eye. Once some onlookers regained their wits, several men picked him up and rushed him to the sick tent as others whispered among themselves. Captain Cheap went back inside. Lieutenant Hamilton summoned the naval officers to the captain’s hut, and there the captain greeted them with his pistol in hand.</p>
<p>“Sir,” Midshipman Byron said to the captain, “You see we are disarmed.”</p>
<p>The Captain dropped his pistol ceremoniously. “I see you are, and have only sent for you to let you all know I am still your Commander,” he said. “So let every man go to his tent.” The officers did as ordered.</p>
<p>In the meantime, upon learning of Cozens’s injury, the surgeon recused himself from treating the wound, citing his recent fisticuffs with the midshipman. The surgeon’s assistant dressed the wound and extracted the ball on his own without complication. It appeared that Cozens would be scarred, but he would live. Some crewmates asked permission to move Cozens from the open-air sick tent⁠—which was just a wet canvas stretched over some bushes⁠—to a crew tent for recovery. “No,” Captain Cheap responded, “the scoundrel shan’t be gratified.”</p>
<p>Eyewitness accounts would later indicate that Midshipman Cozens had not fired the shot that had led Cheap and Hamilton to suspect that insurrection was afoot. Instead, the shot was from the pistol of the ship’s purser, Thomas Harvey, who had fired at Cozens after an angry confrontation regarding the handling of rations. Mr. Cozens was only spared from that shooting because John Young, the ship’s cooper, had deflected Harvey’s pistol just before he fired. Cozens was guilty of being cold, hungry, nearly murdered, and quite possibly drunk⁠—but he had not done anything amounting to mutiny. Nonetheless, by the captain’s order, he lay on the freezing floor of the sick tent for days on end. After languishing there for two weeks, Midshipman Cozens died.</p>
<p>Ship’s Cooper John Young wrote:</p>
			<blockquote>
				<p>His shipmates buried him with all the decent formality their situation would then admit of. There were no tears shed at the funeral, for those distil but rarely from the eyes of sailors, but several resentful speeches dropped from envenomed tongues, and the obsequies were solemnised with volleys of scandal. It was among other like things said, that though the deceased was a conceited busy fellow, and would be always meddling, that was not a sufficient reason for killing him; that he had never appeared in arms on any occasion since they came ashore; and that to shoot a man through the head on a mere surmise, without any inquisition or process of law at all, was something worse than manslaughter…</p>
			</blockquote>
					
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="0.77941176470588" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/cheap-shot.jpg" alt="&quot;A Representation of Cap. Cheap, Commander of the Wager, Shooting Mr. Cozens his Midshipman with the Crew building their Tents after the Ship was Cast away on a desolate Island on the Coast of Patagonia&quot;" title="&quot;A Representation of Cap. Cheap, Commander of the Wager, Shooting Mr. Cozens his Midshipman with the Crew building their Tents after the Ship was Cast away on a desolate Island on the Coast of Patagonia&quot;"></p><figcaption>"A Representation of Cap. Cheap, Commander of the Wager, Shooting Mr. Cozens his Midshipman with the Crew building their Tents after the Ship was Cast away on a desolate Island on the Coast of Patagonia"</figcaption></figure>
<p>Meanwhile, salvage efforts aboard <i>Wager</i> had extracted a new treasure: the longboat. It was large enough that the men had to partially disassemble <i>Wager’s</i> gunwale in order to get to it. The longboat was the highest capacity of the ship’s array of supporting craft, an open vessel approximately 37 feet (11.3 meters) long. The longboat was only suitable for moderate jaunts, however Carpenter John Cummins had devised a plan to expand and upgrade the longboat into a schooner, a dual-masted sailboat more suited for journeys on the open ocean. He had managed to recover most of his tools from the wreck, and he could scavenge construction materials from <i>Wager</i>. Amid gusty winds and intermittent hail, Carpenter Cummins and his team overturned the boat onto stands, sawed its hull in half crosswise, and began sandwiching a new section in its center, lengthening the hull to nearly 50 feet (15.2 meters). It would take months to complete a seaworthy upgrade, but the carpenter projected that the final product would be able to support up to 80 closely-packed souls.</p>
<p>Captain Cheap was eager for the carpenter to complete the schooner, he intended to lead his crew to the north, where somehow he would catch up with Commodore Anson and rejoin the ongoing fight. To his thinking, it would be insubordination to attempt anything less. Ship’s gunner John Bulkeley found this idea preposterous⁠—the schooner would be a fragile vessel, and she would not have any offensive capabilities. Sailing north would risk a brush with a patrolling Spanish man-of-war, which would mean certain death for some, and imprisonment and torture for the rest. Bulkeley had designs on sailing south instead, back from whence they came, using the schooner as a lifeboat to reach Portuguese-controlled Brazil, then on to England. To his thinking, it would be suicide to attempt anything more.</p>
<p>On 04 August 1741, nearly three months after <i>Wager</i> wrecked on the rocks, Carpenter Cummins took a break from his boat-building to join Gunner Bulkeley on a visit to the Captain’s hut. Bulkeley had a document which he had been quietly showing to others around the camp. He read its contents aloud to the captain:</p>
			<blockquote>
				<p>We whose Names are under-mentioned, do, upon mature Consideration, as we have met with so happy a Deliverance, think it is the best, surest, and most safe Way, for the Preservation of the Body of the People on the Spot, to proceed through the Streights of Magellan for England.</p>
			</blockquote>
					
<p>A list of signatures indicated broad support for Bulkeley’s south-for-England plan, the letter having been signed by a majority of the naval officers, as well Captain Pemberton of the marines, two of his Lieutenants, and a large number of seamen.</p>
<p>The Straits of Magellan mentioned in Bulkeley’s note was (and is) a jagged series of waterways across the southern end of South America, a route first discovered by Europeans when Portuguese explorer Ferdinand Magellan survived navigating the straits in 1520. It offered a shorter and more sheltered southern route than the Drake Passage, but it presented its own catalog of hazards: Narrow channels, unpredictable currents, and strong winds. But Bulkeley was a seasoned sailor, and he was confident that the modified longboat would fare better against the capricious Straits of Magellan than it would against the outright murderous temperament of the cape. </p>
<p>Captain Cheap did not immediately respond to the makeshift comment card. The tense discussion around north versus south dragged into the following days. The officers gradually concluded that the captain had not been swayed from his plan to sail the longboat north to seek out the squadron. Captain Cheap even fantasized aloud that they might intercept and confiscate an enemy ship along the way, in order to gain offensive capabilities. “We have always obeyed you,” Bulkeley said to the captain, speaking for himself and the other officers of <i>Wager</i>, “and will continue to support your authority as long as it is for the common welfare.”</p>
<p>Initially, most of the sick and starving sailors and marines supported Gunner Bulkeley’s plan to sail south. Perhaps along the way they might find more invigorating belly-timber than the seaweed-and-flour paste that had become a staple of last resort. Perhaps a few of them might actually survive. But as the days wore on, favor began to drift toward Captain Cheap’s plan for a bold northern offensive. Upon investigating these inexplicable changes of hearts, Bulkeley discovered that Purser Harvey⁠—the officer in charge of allocating food and supplies⁠—was handing out substantial extra rations of rum and brandy to any man who would side with the captain. Bulkeley was outraged by these “rebels,” as he called them, and their betrayal of his own, more respectable rebellion. A deep fissure formed between the two factions. Bulkeley resolved to change the captain’s mind, and secure Cheap’s support for the plan to sail south, which would put the increasingly tense controversy to rest. In the midst of this turbulence, in what would be rightly criticized as ham-handed metaphor in a work of fiction, the very Earth shook. Carpenter Cummins summed it up in his journal: “This day felt four great Earthquakes, three of which were very terrible.”</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="1.2996389891697" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/StraitOfMagellan.jpg" alt="The Straits of Magellan, the V-shaped water route" title="The Straits of Magellan, the V-shaped water route"></p><figcaption>The Straits of Magellan, the V-shaped water route</figcaption></figure>
<p>On Friday, 28 August 1741, the officers of the former HMS <i>Wager</i> gathered in Captain Cheap’s hut for a meeting. Each man carried a firearm. Partway through this meeting, Gunner Bulkeley produced a new document and read it aloud to the captain:</p>
			<blockquote>
				<p>Whereas upon a General Consultation, it has been agreed to go from this Place through the Streights of Magellan, for the Coast of Brazil, in our Way for England: We do, notwithstanding, find the People separating into Parties, which must consequently end in the Destruction of the whole Body; and as also there have been great robberies committed on the Stores, and every Thing is now at a Stand; therefore, to prevent all future Frauds and Animosities, we are unanimously agreed to proceed as above-mentioned.</p>
			</blockquote>
					
<p>Bulkeley then asked the captain to sign the document to cement his support for the southbound plan. Bulkeley’s copy of this paper was but one of several; he had produced copies for all of the officers to carry. This new note and its duplicates had been produced at the suggestion of Lieutenant Baynes, who had theretofore been loyal to the captain. Baynes had also suggested, should the captain refuse to sign the note, that the officers arrest the captain for the murder of Mr. Cozens. But despite his earlier audacity, Baynes sat silent as Bulkeley read the note. Captain Cheap seethed, refusing to sign, or even to respond. Regarding Baynes’s silence, Bulkeley would later write, “We thought the Lieutenant a Gentleman of resolution; but the Words and Actions of People do not always concur.”</p>
<p>The naval officers⁠—with the exception of the captain and Lieutenant Baynes⁠—burst from Cheap’s hut and crossed camp directly to Captain Pemberton of the marines. They asked for Pemberton’s allegiance in their plan to remove Captain Cheap from command. Captain Pemberton, before a crowd of onlookers, responded that he would stand by them with his life. Three cheers went up in the crowd, along with shouts of “For England!”</p>
<p>Captain Cheap threw open the flap of his hut and demanded an explanation for the riotous noise. When he was made to understand that the officers intended to remove him from command, he shouted to the crowd, “Who is he that will take the command from me?” Then, to Lieutenant Baynes, “Is it you, sir?”</p>
<p>Baynes blanched. “No sir.”</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="0.6" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/firelock.jpg" alt="A firelock pistol similar to Captain Cheap's" title="A firelock pistol similar to Captain Cheap's"></p><figcaption>A firelock pistol similar to Captain Cheap's</figcaption></figure>
<p>The throng of starving castaways smelled mutiny. There arose considerable shouting and disorder. Some men charged their muskets, and some began to make demands regarding distribution of provisions. Amid the uproar the captain tossed his pistol aside melodramatically, and shouted over the din, “What are your grievances? In the name of God I am willing to put them right, and to go southward with you if that is your resolve.” With this major concession⁠—and agreeing to increase each man’s daily allowance of liquor⁠—the captain calmed the crowd, and the animosity returned to a simmer. The following day, some fifty or so indigenous people arrived in canoes, but they refused to barter with the agitated Englishmen, and they departed immediately in the morning.</p>
<p>The men began preparations for the journey home. Captain Cheap ordered a team to take the barge south along the coast, scouting the way to the Straits of Magellan. Carpenter Cummins recruited assistance in turning the soon-to-be-schooner right side up. Bulkeley, realizing that the schooner would need much more freshwater for the voyage, stated his intention to dump a number of barrels of black powder into the sea, so that the containers could be refitted for water storage. The captain’s response was disconcerting: “I desire you will not destroy any one thing without my orders.” Without additional fresh water capacity, the long journey to Brazil would be impossible, but the captain adamantly refused to part with the powder.</p>
<p>On the morning of 09 September, the captain was asleep in his hut when he was awakened by a number of hands roughly grasping his person. One among the intruders took the captain’s pistol, while another bound the captain’s hands. “What are you about?” demanded Cheap, “Where are my officers?” The Master, Gunner, Carpenter, and Boatswain stepped inside. “Gentlemen,” the captain said, “Do you know what you have done, or are about?”</p>
<p>“Yes, sir,” one of them responded, “Our assistance was demanded by Captain Pemberton, to secure you as a prisoner for the death of Mr Cozens; and as we are subjects of Great Britain, we are obliged to take you as such to England.”</p>
<p>“Gentlemen,” Cheap said, “Captain Pemberton has nothing to do with me; I am your commander still.” But his hands were tied. Although Pemberton had indeed asked them to arrest the captain, the murder was convenient pretext⁠—a Jenkin’s Ear. The men had gathered and agreed that Captain Cheap still secretly intended to sail the schooner north to find Commodore Anson, as evidenced by his comportment regarding the powder kegs. He was, in their view, reckless with the lives of the crew, and no longer to be trusted.</p>
<p>Four days after the captain’s arrest, being five months since the loss of <i>Wager</i>, the survivors christened the completed schooner as <i>Speedwell</i>. The men loaded her modest hold with their modest stock of provisions, including powder kegs converted for fresh water. Captain Cheap insisted that he would rather be shot than carried away a prisoner, and asked to be left behind on the island. The others readily agreed. Better for the captain to disappear than have him come along and survive to press charges of mutiny back in England. Surgeon Elliot opted to stay with the captain, as did Lieutenant Hamilton of the marines. A handful of additional men were left behind due to prior desertions. The departing contingent left a portion of provisions for their marooned countrymen, along with the little yawl, so that the captain might have <i>some</i> transportation, whatever he decided to do.</p>
<p>One of the officers⁠—most likely Bulkeley⁠—wrote up a short constitution for <i>Speedwell’s</i> journey home. It consisted of a justification for Cheap’s arrest and abandonment, as well as a series of articles that forbade violence, and outlined the fair division of current and future provisions. By noon the departing men had pressed themselves into the trio of escape craft: fifty-nine on <i>Speedwell</i>, twelve on the cutter, and ten on the barge. The survivors set sail southward.</p>
<p>Ship’s gunner Bulkeley wrote:</p>
			<blockquote>
				<p>This was the last Time I ever saw the unfortunate Captain Cheap. […] let us do so much Justice to his Character, do declare, he was a Gentleman posses’d of many Virtues; he was an excellent Seaman himself, and lov’d a Seaman; as for personal Bravery, no Man had a larger Share of it; even when a Prisoner he preserv’d the Dignity of a Commander.</p>
			</blockquote>
					
<p>The escapees were about a day into their journey⁠—still in the confines of “Cheap’s Bay”⁠—when they suffered a major loss of men. The officers on <i>Speedwell</i> realized that their supply of sailcloth was insufficient for the undertaking, and they sent nine men on the barge back to Wager Island to retrieve spare material. One of the occupants of the barge⁠—Midshipman John Byron⁠—walked back to where <i>Speedwell</i> was anchored near the shore to inform Gunner Bulkeley that those on the barge had decided to stay with the captain. The loss of the barge was alarming, as it was useful for fetching food and water from shore; but <i>Speedwell</i> still had the cutter. The seventy-two remaining evacuees in two vessels resumed their departure from Cheap’s Bay.</p>
<p>For weeks on end, the sailors delicately steered <i>Speedwell</i> southeast through “boisterous” seas and narrow, rocky channels. The men in the cutter groped just ahead, frequently measuring the depth of the water to ensure the larger schooner would not run aground. Each evening the vessels anchored, and the cutter carried men ashore to hunt wild geese, forage for shellfish, and collect drinking water. The closely-packed living area became a swamp of bodily odors. One man wrote, “The Steams of our Bodies and filthy wet Apparel infected the Air.” Another described, “The Stench of the Mens wet Cloaths makes the Air we breathe nauseous.” In spite of the discomfort, the journey was beginning to feel survivable. On 03 November, however, the cutter’s square-sail tore in a violent squall. Unable to steer, the small vessel was blown away and well out of sight. The loss of the cutter made it nearly impossible for <i>Speedwell</i> acquire fresh food, and just a few days in this state left the men with little motivation to survive. But in these literal dire straits, in what must have seemed a miracle, the cutter reappeared. Its crew of eleven men sailed up alongside and tied their craft to <i>Speedwell</i>, to the great relief of all present. Overnight the winds howled and flailed. The cutter broke loose, disappearing into the rocks and darkness. This time it did not return.</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="0.66764705882353" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/speedwell.jpg" alt="Artist's impression of Speedwell in the straits" title="Artist's impression of Speedwell in the straits"></p><figcaption>Artist's impression of <i>Speedwell</i> in the straits</figcaption></figure>
<p>Some days later in the journey, according to Gunner Bulkeley’s journal, ten men “requested and desired” to be put ashore to find their own way. It is unlikely they volunteered voluntarily, their chances of survival on foot were dismal, and the men in question happened to be regarded as the most apathetic of the crew. Nevertheless, they were ejected ashore into the desolate, cold bog. Sixty souls remained aboard <i>Speedwell</i> as it entered the Straits of Magellan.</p>
<p>“We expected every Wave to swallow us, and the Boat to founder,” wrote Bulkeley. “We were surrounded with Rocks, and so near that a Man might toss a Bisket on them. It blew a Hurricane of Wind.” During rare calm weather, a few crew swam ashore to seek food. On one occasion they encountered some natives, and traded a pair of English trousers for a mangy dog to eat. On another occasion a marine successfully hunted a large seal. But these victuals did not go far among sixty stomachs. As <i>Speedwell</i> inched through the craggy, labyrinthine channels, men began to die of starvation.</p>
<p>Ship’s cooper John Young wrote:</p>
			<blockquote>
				<p>It was remarkable of these people that some hours before they expired they became delirious. In this state they would joke, laugh immoderately, and play ridiculous pranks, as if they were really merry; in which temper they died. Those of us that survived had almost ground to envy the deceased, who were thereby freed from the horrid circumstances under which we groaned, tortured with hunger and thirst, catching at the most nauseous things that could any way appease the rage of these cruel appetites, and an abhorrence even to ourselves by reason of stench and vermin. Was not death in such a case a release or deliverance?</p>
			</blockquote>
					
<p>Hopelessly lost, the survivors turned around and went back to the entrance of the straits to regain their bearings, costing them a week and a half. Upon resuming the transit, they made good progress, though the ship grounded twice, and narrowly avoided sinking.</p>
<p><i>Speedwell</i> emerged from the Straits of Magellan into the Atlantic Ocean in early December 1741. Those who survived owed their lives to Gunner Bulkeley and his proficient navigation. The crew anchored off Seal Island, which, true to its name, was crowded with the blubbery “sea dogs.” The Englishmen set up a butcher tent and processed a number of seals to replenish the larder, then set off again.</p>
<p>Within a few days the seal meat began to decay, saturating the air with the stench of death, but the rotting meat remained the only nourishment on offer. The freshwater supply was also dwindling fast. “Never were beheld a Parcel of more miserable Objects,” Bulkeley wrote, “there are not above fifteen of us healthy (if People may be call’d healthy that are scarce able to crawl).” In desperation, fourteen men jumped into the sea and swam toward land with weapons and water casks. One man drowned in the crossing, but the others got ashore. They shot, butchered, and cooked several fresh seals, one horse, and one wild dog. As swimmers helped haul the meat and water to <i>Speedwell</i> on a makeshift raft, the wind began to worsen, and the rickety schooner was obliged to move away from shore. Eight men were left behind.</p>
<p>Fifteen weeks after departing from Wager Island, having crossed over 2,000 miles, <i>Speedwell</i> arrived at the mouth of the Rio Grande river in Brazil. The schooner was barely seaworthy, broken and sagging much like her crew. As <i>Speedwell</i> approached the shore, a friendly ship of the Portuguese navy sailed alongside and two officials boarded. They were aghast at the bleak mass of skeletal humanity that occupied the open boat. “We were become such a frightful Crew of Starvelings,” Cooper John Young wrote, “that they could not but look on us with a Mixture of Horror and Compassion.” Thirty men were all that remained of the original eighty-one.</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="1.0650887573964" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/route-speedwell.jpg" alt="A rough approximation of the route of Speedwell" title="A rough approximation of the route of Speedwell"></p><figcaption>A rough approximation of the route of <i>Speedwell</i></figcaption></figure>
<p>Bulkeley and most of his fellow survivors arrived back in England, at the port city of Spithead, on New Year’s Day 1743. The last leg of their lengthy journey home had been aboard HMS <i>Stirling Castle</i>. Their stay in Brazil had been fraught with complications; the boatswain John King⁠—the same man who had fired a cannon at Captain Cheap’s hut back on Wager Island⁠—had formed a gang there and inexplicably terrorized his fellow survivors. And the crossing of the Atlantic had been somewhat harrowing, having encountered several severe storms, one of which nearly pushed their vessel into the rocky shore. But here they were at long last. It had been more than two years since they had departed England aboard <i>Wager</i>.</p>
<p>Lieutenant Baynes rushed ahead of the others to report to the Admiralty first, and delivered a narrative which left himself blameless. His retelling conflicted with Bulkeley’s and Cummins’s in some meaningful details. The Admiralty were reluctant to draw attention to this embarrassing probable mutiny, so their Lordships stalled formal legal proceedings pending Commodore Anson’s anticipated return. The devastated remnants of Commodore Anson’s squadron did indeed return to England over a year later, only 188 men surviving of the original 1,854. Exactly as Anson had predicted before the squadron originally sailed, most of the conscripts uselessly perished. Still, the squadron had circumnavigated the globe, and taken some valuable prizes from the Spanish along the way, so Anson was received as a hero, with a reception from King George II, a knighthood, and a promotion to the rank of Rear-Admiral. It was now up to the freshly-minted Rear-Admiral to initiate legal proceedings regarding the loss of HMS <i>Wager</i>. But Anson cleverly sidestepped the awkwardness by declining to court-martial the officers in the absence of their captain, thereby postponing the reckoning indefinitely.</p>
<p>Bulkeley went on to command his own ship⁠—a forty gun privateer⁠—where his gallantry and grit against the French won him some fame in London newspapers. He and Cummins published their narratives and journal entries from the <i>Wager</i> shipwreck and subsequent misadventures, and though some readers concluded that the men should be hanged as mutineers, much of the public viewed their survival as miraculous deliverance. The officers of the late HMS <i>Wager</i> each went on with his own life, having circumnavigated any repercussions for their questionable actions on Wager Island. That is, until 26 March 1746, when an advertisement began appearing in newspapers all over Britain:</p>
			<blockquote>
				<p>Vice-Admiral Stewart being directed to hold a court-martial at Portsmouth for enquiring into the cause of the loss of His Majesty’s late ship the Wager, the Lords Commissioners of the Admiralty do hereby direct the officers, petty-officers, and foremast-men who belonged to the said ship, to repair immediately down to Portsmouth</p>
			</blockquote>
					
<p>By God, Captain Cheap was in London.</p>
<center>•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•</center>
<p>When describing the departure of <i>Speedwell</i> from Wager Island, Ship’s Gunner John Bulkeley had written in his journal that the departing party gave three cheers to the men left ashore, and that the cheers were returned in kind. This depiction was almost certainly a fiction, as Captain Cheap and his small party of castaways were decidedly uncheerful under the circumstances. Their mood improved, however, when the barge returned, expanding Captain Cheap’s group to twenty mostly loyal men. They immediately began preparations to refit their two vessels and stock them with provisions for a journey to the island of Chiloé 300 miles to the north. They were sure to be taken prisoner by the Spanish there, but at least they would live.</p>
<p>About two months later they set sail. The rain remained relentless, and the sea was heaving in its usual way along the Patagonian shore, and just a few hours after departure the overloaded barge and yawl were both inundated with water. To avoid certain sinking, the desperate men threw all of their food and supplies overboard. This saved their lives for the moment, but within days the absence of nourishment became acute. The closest thing they had to food was the shoes on their feet, handcrafted from raw sealskin, which was quite inedible. The men ate them anyway. The pair of vessels crept along the coast, occasionally scraping a meager sustenance of shellfish from the rocks. The men shot a few geese and seals. The starving sailors indulged themselves on the seals’ rich livers, which was dangerous owing to the concentration of vitamin A. They were indeed stricken with acute vitamin A toxicity. “We were seized with excessive sickness,” Midshipman Byron recorded, “which affected us so much that our skin peeled off from head to foot.”</p>
<p>One night, while both boats were at anchor, the wind suddenly and turbulently shifted from the north to the south. The yawl capsized and sank. The barge was not large enough to accommodate all of the remaining survivors, so a decision was made to abandon four marines who were in poor health. The barge went on with its fourteen, but could no longer make northerly progress due to the shift in the winds. Having no better option, the party fell all the way back to their abandoned camp on Wager Island. The aborted attempt had cost them all of their food, supplies, and two months of time.</p>
<p>A fortnight and a day after returning to Wager Island, a group of indigenous people arrived, surprised to find that the Englishmen had returned. One of their number⁠—a chief who went by the name Martin⁠—spoke a little Spanish, as did surgeon Elliot, and thus the castaways were able to arrange a trade: the natives would escort the Englishmen to a Spanish settlement in exchange for the barge.</p>
<p>Two men died of starvation shortly after the group resumed the attempt north. As captain, Cheap was entitled to more rations, which he took, much to the bitter annoyance of the other survivors. While camping on a desolate island, six sailors set off in the barge claiming to be seeking food, but they never returned. Five men remained in Captain Cheap’s party: Lieutenant Hamilton of the marines, Surgeon Elliot, Midshipman Byron, Midshipman Campbell, and Captain Cheap himself. Elliot persuaded Chief Martin to continue escorting them despite the loss of the barge; instead they would give him their last remaining firearm, and they promised further compensation on arrival at Chiloé.</p>
<p>This new route required the men to paddle by canoe on rivers for some stretches, and carry the canoes overland for other stretches. The starving Englishmen spent much of their time wading through waist-to-shoulder-deep bogs thick with woody vegetation. They had no shoes, and their tattered clothing became “alive with vermin” (probably lice and/or fleas). The party encountered occasional villages and groups of natives, and the Englishmen received a variety of reactions ranging from sympathy to disgust and contempt. Surgeon Elliot succumbed to starvation, depriving the two groups of intercommunication beyond mere gestures. Lieutenant Hamilton of the marines became separated from the others. Three remained in Cheap’s party.</p>
<p>From midshipman Byron’s narrative:</p>
			<blockquote>
				<p>It is impossible for me to describe the miserable state we were reduced to; our bodies were so emaciated that we hardly appeared the figures of men. It often happened to me in the coldest night, both in hail and snow, where we had nothing but an open beach to lie down upon, in order to procure a little rest, that I was obliged to pull off the few rags I had on, as it was impossible to get a moment’s sleep with them on for the vermin that swarmed about them. I used, as often as I had time, to take my clothes off, and putting them upon a large stone beat them with another, in hopes of killing hundreds at once, for it was endless work to pick them off. What we suffered from this was ten times worse even than hunger.</p>
<p>But we were clean in comparison to Captain Cheap; for I could compare his body to nothing but an ant-hill, with thousands of those insects crawling over it; for he was now past attempting to rid himself in the least from this torment, as he had quite lost himself, not recollecting our names that were about him, or even his own. His beard was as long as a hermit’s…</p>
			</blockquote>
					
<p>Four months after beginning the overland journey with Chief Martin, in the dead of winter, the three remaining Englishmen arrived at a village south of the Spanish town of Castro. The villagers sent word of the survivors’ arrival, built a great fire, and fed the malnourished, pest-eaten trio a feast of mutton, potatoes, eggs, and barley meal as they awaited armed escort to Spanish detention.</p>
<p>The Englishmen’s stay with the Spaniards was surprisingly congenial. They stayed in the Spanish town of Chacao on Chiloé island as guests of the governor. There they were housed, fed, and allowed to move around freely as they recovered from their ordeal. A search party located Lieutenant Hamilton, and he was reunited with his countrymen. Via a series of vehicles ranging from ships to mules, the four were eventually conveyed to a frigate that was bound for France, though the men were legally prisoners of Spain.</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="1.0650887573964" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/route-cheap.jpg" alt="A rough approximation of the route of Captain Cheap's party" title="A rough approximation of the route of Captain Cheap's party"></p><figcaption>A rough approximation of the route of Captain Cheap's party</figcaption></figure>
<p>After delaying departure for about six months, the frigate set sail for the city of Brest in France. Upon arrival there, the Englishmen were forced to wait several more months for permission to return home to England under a prisoner exchange program. Finally, on 05 February 1746, the Court of Spain ordered that the four English captives be allowed to return home. Cheap, Hamilton, Byron, and Campbell arrived in Dover over four years after originally setting out with Commodore Anson’s secret squadron. Captain Cheap’s first priority was to go to his superiors in London to make his full report.</p>
<p>With the return of Captain Cheap, the Admiralty were reluctantly duty-bound to move forward with legal proceedings. They published the newspaper advertisement ordering all surviving officers of HMS <i>Wager</i> present themselves for a court-martial. The Admiralty also sent out messengers to retrieve Bulkeley, Cummins, Baynes, and King. If any or all of these men were found guilty of mutiny, each man’s punishment would certainly involve a brief suspension⁠—from the end of a noose.</p>
<p>After arriving in Spithead as summoned, Bulkeley learned that the Deputy Marshal who sought him was dining at nearby Paul’s-Head Tavern. Bulkeley went there himself and approached the Deputy Marshal anonymously, engaging him in conversation about the gossip of the day: these <i>Wager</i> officers and the miraculous return of their captain.</p>
<p>Bulkeley wrote of the exchange:</p>
			<blockquote>
				<p>His answer was that he believed we should be hanged. To which I replied, for God’s sake for what, for not being drowned? And is a murderer at last come home to be their accuser? I have carefully perused the journal, and can’t conceive that they have been guilty of piracy, mutiny, nor anything else to deserve it. […] At which he said, Sir, they have been guilty of such things to Captain Cheap whilst a prisoner, that I believe the Gunner and Carpenter will be hanged, if nobody else.</p>
			</blockquote>
					
<p>Bulkeley then confessed his identity and was duly arrested. Friends of Bulkeley took it upon themselves to visit Captain Cheap. “Gentlemen,” the captain told them, “I have nothing to say for nor against the villains, until the day of trial, and then it is not in my power to be off from hanging them.”</p>
<p>On Monday, 14 April 1746, Deputy Judge Advocate Atkins summoned Bulkeley for his deposition. Charges of mutiny seemed inevitable⁠—and Bulkeley would no doubt be regarded as the de facto leader. The officers might also be charged with piracy for the theft of crown property, having appropriated the longboat as they did. In his defense, Bulkeley had his journal, his myriad legal papers, and his <i>Speedwell</i> constitution, but none of these self-serving records was likely to withstand the direct, withering accusations of a navy captain. When seated for questioning, Bulkeley prevailed upon Judge Atkins to describe whatever charges Captain Cheap had made against him. This court-martial, Judge Atkins then informed him, served but a single purpose: to investigate the loss of His Majesty’s Ship <i>Wager</i>. Whatever happened after the wreck was no concern to these proceedings. No charges of mutiny or piracy were to be brought.</p>
<p>Hints in the historical record suggest that Rear-Admiral Sir George Anson had urged the prosecutors to focus on the sinking, and to conveniently overlook subsequent misconduct. The Admiralty complied, grateful to avoid the public outcry that would ensue if they prosecuted capital crimes against the officers of <i>Wager</i>, especially the popular John Bulkeley. Captain Cheap had not pressed the issue, as this also meant that the matter of the murder of Midshipman Cozens would be formally forgotten. Ultimately only Lieutenant Baynes was formally reprimanded⁠—for dismissing the sighting of land that fateful day, and for failing to drop the anchor when so ordered. Soon thereafter the Admiralty revised the Articles of War to clarify that men on a Royal Navy ship remained under the command of their captain for the duration of the mission, even in the event of shipwreck.</p>
<p>In the aftermath of the <i>Wager</i> court-martial, many of the officers faded from the historical record. Captain Cheap, however, was promoted to post captain, and went on to command HMS <i>Lark</i>, having a respectable subsequent naval career. As for Gunner John Bulkeley, the Royal Navy offered to reinstate him as an officer and give him his own command: the cutter <i>Royal George</i>. Upon inspection of the vessel he declined, assessing that the vessel was in poor repair, and not seaworthy, a gloomy assessment coming from the navigator of <i>Speedwell.</i> But his view was later validated, when <i>Royal George</i> sank in the Bay of Biscay with no survivors. Bulkeley removed to America and disappeared from public view.</p>
<p>The War of Jenkins’ Ear formally ended along with the War of the Austrian Succession in 1748. After David Cheap died in 1752, John Byron of the <i>Wager</i> wrote his own story of escaping Wager Island with the captain, and the book became a major bestseller in its day. Byron went on to have a highly distinguished naval career, being promoted all the way to Vice-Admiral before he retired. One of his grandchildren grew up to be the famous poet Lord Byron; and one of Lord Byron’s children was Ada Lovelace, widely regarded as history’s first programmer. But that’s another story altogether.</p>
<p>To this day, the Drake Passage remains a harrowing stretch of sea, even for modern motorized seagoing vessels. But the Antarctic corridor was rendered mostly obsolete in 1914, when the Panama Canal was completed at a much milder latitude, just nine degrees north of the equator. The Drake Passage is now mostly reserved for summer travel and dedicated adventurers.</p>
<figure data-embiggen="true"><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFgYGBAAAAqeg2zgAAAAxJREFUeNpiYAAIMAAAAgABT21Z4QAAAABJRU5ErkJggg==" data-height-ratio="0.72647058823529" data-lazy-load-src="https://damn-8791.kxcdn.com/wp-content/uploads/2019/08/wager-remains.jpg" alt="Treated timber found at the Wager wreck site in 2006" title="Treated timber found at the Wager wreck site in 2006"></p><figcaption>Treated timber found at the <i>Wager</i> wreck site in 2006</figcaption></figure>
<p>In 2006, the Scientific Exploration Society conducted an expedition to find the site where HMS <i>Wager</i> wrecked off the coast of Chile. After assembling clues from first-person accounts, satellite imagery, and local historians, the team identified an area that matched contemporaneous descriptions of Wager Island’s 1741 encampment. Despite the dreary weather, the researchers explored the region and identified landmarks to approximate the location where <i>Wager</i> ran aground. There, as the team worked in the shallow water, a member of the team stubbed his toe on something solid. The team brushed the silt aside, and were surprised to reveal a five square meter section of centuries-old treated timbers: the last surviving fragments of HMS <i>Wager</i>, still resting out on the rocks after 265 years.</p>
<p>The whereabouts of captain Robert Jenkins’ left ear, however, remain unknown.</p>
				

										
										
						<p>
			© 2019 All Rights Reserved. Do not distribute or repurpose this work without written permission from the copyright holder(s).
	</p>
<p>
	Printed from https://www.damninteresting.com/dead-reckoning/<br>
</p>
						<p>
							<i>Since you enjoyed our work enough to print it out, and read it clear to the end, would you consider donating a few dollars at https://www.damninteresting.com/donate</i> ?
						</p>
									</article>
			
		            	            		
	            	
		            			

				</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Starlink User Terminal Teardown (220 pts)]]></title>
            <link>https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/</link>
            <guid>43933452</guid>
            <pubDate>Fri, 09 May 2025 03:03:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/">https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/</a>, See on <a href="https://news.ycombinator.com/item?id=43933452">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><blockquote><p>I think the human race has no future if it doesn’t go to space. —— Stephen Hawking</p></blockquote><p>Starlink is a low Earth orbit (LEO) satellite internet service provided by SpaceX. Users connect to near-Earth orbit satellites through a user terminal, which then connects to the internet via ground gateways.</p><p><img alt="Basic architecture of the Starlink system [1]" loading="lazy" src="https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/attachments/d48521bc-861b-4050-82df-1366d6bc01d2.png"></p><p>As the new generation of satellites gradually incorporates laser links, some satellites can communicate with each other via laser. This both reduces reliance on ground stations and improves transmission efficiency, enhancing global coverage.</p><p><img alt="Starlink terminals in Ukraine access the Internet via satellite and gateways in neighboring countries" loading="lazy" src="https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/attachments/62ba1b39-218f-4887-9dab-7957d3f342fe.png" title=" =593.6x434"></p><p>Even on the Ukrainian battlefield where there are no local ground stations, Starlink user terminals can indirectly access gateways in neighboring countries through inter-satellite links [1].</p><p>In this article, we provide a concise overview of DARKNAVY’s recent preliminary investigation into the Starlink user terminal.</p><hr><h2 id="hardware-analysis">Hardware Analysis</h2><p>A complete Starlink user terminal consists of two parts: a router and an antenna. This article focuses on the antenna component (User Terminal Antenna, hereafter referred to as “UTA”). DARKNAVY purchased a Starlink Standard Actuated (also known as Rev3 or GenV2) user terminal in Singapore and disassembled its antenna portion.</p><p><img alt="Starlink UTA Rev3 PCB (full view)" loading="lazy" src="https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/attachments/7beb1f43-a758-4a5c-ad1e-73fc65157927.png"></p><p>As shown above, after disassembly, we found that the UTA’s PCB is almost as large as its outer shell. Most of the board is occupied by RF front-end chips produced by STMicroelectronics (left side in the photo), while the core control components are mainly concentrated on one side of the PCB.</p><p><img loading="lazy" src="https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/attachments/49fe99e2-633f-46a8-82b4-d5dc91fcdb49.png" title=" =2070x775"></p><p><em>Starlink Rev3 PCB (core area)</em></p><p>Aside from the RF antenna, the overall design of the UTA’s core area is quite similar to that of a standard IoT device. The main SoC, custom-made by ST for SpaceX, is a quad-core Cortex-A53. Currently, the hardware and datasheet for this chip are confidential and unavailable to the public.</p><p>At Black Hat USA 2022, Dr. Lennert Wouters from KU Leuven demonstrated a fault-injection attack against the first-generation Starlink antenna (GenV1) to obtain a root shell of the device. In response, SpaceX disabled the UART debug interface on the PCB via a firmware update to enhance fault-attack resistance. However, Wouters subsequently managed to break in again by refining his approach [2].</p><hr><h2 id="firmware-extraction-and-analysis">Firmware Extraction and Analysis</h2><p>To analyze the UTA in depth, DARKNAVY directly dumped the firmware from the eMMC chip. Since no obvious eMMC debug pins exist on the Rev3 board, we had to desolder the eMMC chip from the PCB and read it using a programmer. Once extracted, we discovered that most of the firmware contents were unencrypted, revealing the boot chain (excluding BootROM), kernel, and the unencrypted portions of the filesystem. Further analysis showed that after the kernel starts, it reads most of the runtime environment from the eMMC and unpacks it to the <code>/sx/local/runtime</code> directory.</p><p><img alt="Core runtime of the UTA" loading="lazy" src="https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/attachments/80819cd3-d929-4e20-a1e9-77f65b3ccb33.png"></p><p>As shown above, the <code>bin</code> directory contains the executables required by the Starlink software stack, while <code>dat</code> stores configuration files, and <code>revision_info</code> records the current software and hardware version. Other than <code>user_terminal_frontend</code> (written in Go) for handling user communications, most programs are statically compiled C++ executables without symbols. Drawing on existing research [3], our preliminary analysis of these programs and configurations suggests that the network stack architecture is somewhat similar to DPDK [4], mainly relying on a user-space C++ program to bypass the kernel for handling network packets. The Linux kernel’s primary role is to provide basic hardware drivers and process management.</p><p>Interestingly, the core software extracted from the UTA also includes some functionalities that seemingly belong on satellites or ground gateways. Our initial reverse-engineering indicates that, during startup, the system identifies the device type based on hardware peripherals and then loads and executes the corresponding logic.</p><hr><h2 id="emulation">Emulation</h2><p>For convenient ongoing analysis of the UTA, DARKNAVY built a basic QEMU-based emulation environment for the Rev3 firmware:</p><p>Within this environment, we successfully ran and debugged parts of the software, including <code>httpd</code>, <code>WebSocket</code>, and <code>gRPC</code> services that interact with external entities.</p><p><img alt="Debugging the user_terminal_frontend program" loading="lazy" src="https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/attachments/91f681b3-25c3-4487-a2db-518aedba9a22.png"></p><hr><h2 id="security-chip">Security Chip</h2><p>Besides the main SoC, the UTA also features a dedicated security chip, <code>STSAFE-A110</code>, which claims a CC EAL5+ security rating [5]. Unlike the custom SoC, this chip can be legally purchased under an NDA. In the UTA firmware, a user-space program named <code>stsafe_cli</code> handles interactions with this chip. Reverse-engineering suggests that STSAFE primarily provides:</p><ul><li>A unique identifier (UUID) for each device</li><li>Management of a public key certificate (<code>stsafe_leaf.pem</code>), presumably used for satellite communication authentication</li><li>Derivation of symmetric encryption keys for user data transmission</li></ul><p>Overall, this chip serves as an additional root of trust independent of the SoC’s secure boot mechanism, which aligns with modern embedded security design practices.</p><hr><h2 id="easter-egg-is-elon-watching-you">Easter Egg: Is Elon Watching You?</h2><p>During the analysis, DARKNAVY stumbled upon a program labeled <strong>Ethernet Data Recorder</strong>, which naturally raises suspicions of a backdoor capturing user data.</p><p><img alt="Ethernet Data Recorder" loading="lazy" src="https://www.darknavy.org/blog/a_first_glimpse_of_the_starlink_user_ternimal/attachments/a451b9c1-5be5-4d8f-a77a-f17edef85653.png"></p><p>This program’s name and functionality hint at potential packet logging. Closer inspection reveals that it leverages a <code>pcap_filter</code>-like mechanism to record certain network packets, with capture rules resembling:</p><div><pre tabindex="0"><code data-lang="cpp"><span><span><span># name            track   options                type    interfaces       pcap_filter
</span></span></span><span><span><span></span><span>diagnostics</span>       <span>0</span>       <span>compress</span><span>,</span><span>ipcompress</span>    <span>telem</span>   <span>lo</span>               <span>udp</span> <span>and</span> <span>dst</span> <span>port</span> <span>10017</span> <span>and</span> <span>(</span><span>dst</span> <span>host</span> <span>239.26.7.131</span> <span>or</span> <span>dst</span> <span>host</span> <span>239.26.7.130</span><span>)</span>
</span></span></code></pre></div><p>Based on other clues in the firmware, these packets are related to satellite telemetry. All captured traffic is also encrypted using hardware keys fused into the SoC. From the information we have so far, it does not appear to collect user privacy data.</p><p>During device initialization, if the system identifies itself as a user terminal, the initialization script automatically writes 41 SSH public keys into <code>/root/.ssh/authorized_keys</code>. Notably, port 22 on the UTA remains open to the local network at all times. Having such a large number of unknown login keys on a user product certainly raises eyebrows.</p><hr><p>As satellite technology continues to evolve and find applications across diverse industries, every component of Starlink—and other satellite internet systems—may become a critical battleground for future offensive and defensive operations. In space security, developers and hackers contend not only in the digital realm but also against the constraints of cosmic physics: one wrong move could mean losing contact with the target forever.</p><h2 id="references">References</h2><ul><li>[1] <a href="https://www.ciscolive.com/c/dam/r/ciscolive/global-event/docs/2024/pdf/BRKSEC-2150.pdf">https://www.ciscolive.com/c/dam/r/ciscolive/global-event/docs/2024/pdf/BRKSEC-2150.pdf</a></li><li>[2] <a href="https://i.blackhat.com/USA-22/Wednesday/US-22-Wouters-Glitched-On-Earth.pdf">https://i.blackhat.com/USA-22/Wednesday/US-22-Wouters-Glitched-On-Earth.pdf</a></li><li>[3] <a href="https://blog.quarkslab.com/starlink.html">https://blog.quarkslab.com/starlink.html</a></li><li>[4] <a href="https://www.dpdk.org/">https://www.dpdk.org/</a></li><li>[5] <a href="https://www.st.com/en/secure-mcus/stsafe-a110.html">https://www.st.com/en/secure-mcus/stsafe-a110.html</a></li></ul></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A Formal Analysis of Apple's iMessage PQ3 Protocol [pdf] (131 pts)]]></title>
            <link>https://www.usenix.org/system/files/conference/usenixsecurity25/sec25cycle1-prepub-595-linker.pdf</link>
            <guid>43933412</guid>
            <pubDate>Fri, 09 May 2025 02:54:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.usenix.org/system/files/conference/usenixsecurity25/sec25cycle1-prepub-595-linker.pdf">https://www.usenix.org/system/files/conference/usenixsecurity25/sec25cycle1-prepub-595-linker.pdf</a>, See on <a href="https://news.ycombinator.com/item?id=43933412">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Audiobookshelf: Self-hosted audiobook and podcast server (135 pts)]]></title>
            <link>https://www.audiobookshelf.org/</link>
            <guid>43933248</guid>
            <pubDate>Fri, 09 May 2025 02:17:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.audiobookshelf.org/">https://www.audiobookshelf.org/</a>, See on <a href="https://news.ycombinator.com/item?id=43933248">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><img src="https://www.audiobookshelf.org/Logo.png"></p> <p>Self-hosted audiobook and podcast server</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Podfox: First Container-Aware Browser (105 pts)]]></title>
            <link>https://val.packett.cool/blog/podfox/</link>
            <guid>43931944</guid>
            <pubDate>Thu, 08 May 2025 22:19:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://val.packett.cool/blog/podfox/">https://val.packett.cool/blog/podfox/</a>, See on <a href="https://news.ycombinator.com/item?id=43931944">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>A port conflict pushed me to abolish container port forwarding once and for all, making my Firefox talk to Podman's whole network. Also: containerizing dev environments for command-line addicts.
</p><div>
		<p>Containers. Containers containers containers. Even if you were reluctant before, it’s likely that you use them at least for running various supporting infrastructure when working on projects that involve that kind of thing. Having a whole-system install of Postgres on a laptop shared between various different projects never actually felt right. Running <code>podman run --rm -it -p 5432:5432 postgres:17</code> to pop up a temporary instance with no persistent state does.</p>
<p>These days, it’s very typical for any web backend or other kind of networked service project to include something like a <code>docker-compose.yml</code> file that makes it possible to just run all the service dependencies with one single command. And so I was running a Compose setup for one project, a serious business client consulting job thing, and I kept it in the background and I went to start up another project and—</p>
<p>oh no, that failed with EADDRINUSE. A <em>port conflict</em>.</p>
<p>Both projects involved RabbitMQ and both forwarded the management web UI port to the host:</p>
<pre><code>  <span>queue:</span>
    <span>image:</span> <span>rabbitmq:3-management</span>
    <span>ports:</span> 
      <span>-</span> <span>"15672:15672"</span>
</code></pre>
<p>And as such, I couldn’t launch both projects without modifying the port numbers or something. So like any rational well-adjusted chill person, at that point I’ve decided that port forwarding Must. Be. ABOLISHED!!</p>
<p>Seriously though, we have <a href="https://flathub.org/apps/app.devsuite.Ptyxis">Ptyxis</a> as a container-aware terminal emulator… why isn’t there a container-aware web browser that would just communicate directly with the containers? (Does anyone remember <a href="https://web.archive.org/web/20150313045857/http://pow.cx/">Pow</a> from the golden age of Rails that proposed the “just open <code>yourapp.dev</code>” experience?)</p>
<p>As the title suggests, now there kinda is a container-aware browser:</p>
<figure>
	<picture>
		<source type="image/webp" srcset="https://val.packett.cool/blog/podfox/scr.webp">
		<img alt="Screenshot with a Firefox window on top showing a RabbitMQ management UI on http://myrabbit.randomtests.podman, and a terminal on the bottom shown launching podman run --rm -it --network randomtests --name myrabbit rabbitmq:3-management" src="https://val.packett.cool/blog/podfox/scr.png" width="1438" height="1080" loading="lazy" decoding="async">
	</picture>
</figure>
<p>Okay, the title is slightly exaggerated. It’s not that the browser itself was modified in any way. And no, it’s not just running inside of a Podman container. There’s a process running alongside everything that makes it possible, and it’s quite simple and tiny.</p>
<p>Can you already guess how it works? First, let’s see how we got here.</p>
<h2 id="how-do-containers-even-networking" tabindex="-1"><a href="#how-do-containers-even-networking"><span>How Do Containers Even Networking??</span></a></h2>
<p>Back in the day, containering required root privileges and there was a daemon running as root, which always felt repulsive to me. It never was an inherent necessity, but Linux’s namespacing abilities weren’t good enough to run without privileges. These days —thankfully— they are, and Podman encourages running “rootless” (and daemonless).</p>
<p>In the old-school rootful setup, networking is pretty straightforward: the daemon can create bridge interfaces on the host, containers get assigned IP addresses on a bridged subnet, and they are accessible as if they were actual machines. And it’s possible to <a href="https://forums.docker.com/t/docker-using-dnsmasq-as-resolver-forwarder-to-reach-containers-from-host/137390">set up DNS</a> on the host machine to resolve to container names but like… ugh, <em>messing with DNS</em>.</p>
<p>But as an unprivileged process we can’t just create bridges on the host (and I wouldn’t <em>want</em> anything to show up in the list of network interfaces, it bothers me to see Stuff there!) so what does Podman do?</p>
<p>You might’ve heard about networking being “all fake in userspace” with <code>slirp4netns</code> which is an amazing resurrection of early-90s modem era hacks that has just <a href="https://www.youtube.com/watch?v=QMUEtEt1i3I">been replaced by</a> a modern alternative called <code>pasta</code> (mm, tasty – wait, what’s that <a href="https://github.com/rootless-containers/bypass4netns">bypass4netns</a> thing?). Heck, Podman’s <a href="https://github.com/containers/podman/blob/400a9a528bfc33d23725958f379cb2bfecb4865e/docs/tutorials/rootless_tutorial.md">actual “rootless tutorial”</a> mentions these as <em>the</em> “rootless networking tools”. But… actually… that’s just the teeny tiny part that makes it possible for the unprivileged containers to <em>reach out to the outside world</em>.</p>
<p>The actual networking stack is the real Linux kernel one, namespaced.</p>
<p><a href="https://github.com/containers/podman/discussions/22943#discussioncomment-9795883">Here’s what it actually looks like</a>. Rootless Podman first creates a single network namespace called <code>rootless-netns</code>, inside of which it creates bridge networks, real Linux kernel bridges; and for each container that joins a network it spawns it makes a <code>veth</code> pair, one end of which is connected to the network’s bridge interface in the aforementioned common namespace, and the other end passed to the container’s own namespace.</p>
<p>And we can manually enter that “parent” namespace —without entering “a container”, <em>only</em> entering the network namespace— by running <code>podman unshare --rootless-netns</code>.</p>
<p>Wait, how does that work? Tell me, <a href="https://wizardzines.com/zines/strace/">almighty <code>strace</code></a>!</p>
<pre><code>open("/run/user/1000/libpod/tmp/pause.pid", O_RDONLY|O_LARGEFILE) = 4
read(4, "1809", 11)                     = 4
open("/proc/1809/ns/user", O_RDONLY|O_LARGEFILE|O_CLOEXEC) = 5
fcntl(5, F_SETFD, FD_CLOEXEC)           = 0
open("/proc/1809/ns/mnt", O_RDONLY|O_LARGEFILE|O_CLOEXEC) = 6
fcntl(6, F_SETFD, FD_CLOEXEC)           = 0
setns(5, 0)                             = 0
setns(6, 0)                             = 0
</code></pre>
<p>Oh, umm, that’s it?? Wait, where’s the netw—</p>
<pre><code>openat(AT_FDCWD, "/run/user/1000/containers/networks/rootless-netns/rootless-netns", O_RDONLY|O_CLOEXEC) = 8
[…]
setns(8, CLONE_NEWNET)                  = 0
</code></pre>
<p>Right, that explains the <code>mnt</code> namespace above.</p>
<p>So the key is the <a href="https://man7.org/linux/man-pages/man2/setns.2.html">setns(2)</a> system call, which “allows the calling thread to move into different namespaces”. When it’s the only thread in the process, mind you, so we can’t just have different threads in different namespaces. But no one said we can’t retain open sockets from the previous namespace before switching! Just realizing that opens a world of possibilities. Now we can build a very elegant and simple…</p>
<h2 id="proxy-ding-ding-ding-ding-ding" tabindex="-1"><a href="#proxy-ding-ding-ding-ding-ding"><span>Proxy! Ding ding ding ding ding</span></a></h2>
<p>If you guessed “proxy” before reading all of the above, congratulations! You win! :)</p>
<p>That is what <a href="https://codeberg.org/valpackett/podfox#podfox">Podfox</a> actually is. It’s a SOCKS proxy that starts listening on the host system and then enters Podman’s rootless networking namespace in order to talk to your containers. It’s a portal into the container world, running as one simple process, written in Rust.</p>
<p>There’s no need to do any DNS on the host, as a proxy can handle hostnames however it likes, so Podfox parses <code>&lt;container&gt;.&lt;network&gt;.podman</code> hostnames, queries <code>podman network inspect</code> with the <code>network</code> name to find the gateway address for the network, finally sends a DNS query for <code>&lt;container&gt;.dns.podman</code> to that network’s gateway, connects to the returned address and starts proxying.</p>
<p>Beautiful.</p>
<p>It just works.</p>
<p>And you can install it from crates.io right now:</p>
<pre><code>cargo install --locked podfox
</code></pre>
<p>And run it as just <code>podfox</code>, it would listen on port :42666 by default. (It also support systemd socket activation!)</p>
<p>Now, um, we haven’t actually touched the “fox” part of it all. The browser. When I was first testing, I was using Multi-Account Containers’ (heh) ability to assign proxies per Firefox container, but that was just for testing.</p>
<p>Later I made a WebExtension to make a global proxy rule that assigns the Podfox proxy to the fake <code>.podman</code> TLD. It’s probably the simplest Firefox add-on ever that’s actually useful, as all it contained was a one-liner (!) background script:</p>
<pre><code>browser.<span>proxy</span>.<span>onRequest</span>.<span>addListener</span>(<span>() =&gt;</span> ({ <span>type</span>: <span>"socks"</span>, <span>host</span>: <span>"localhost"</span>, <span>port</span>: <span>42666</span>, <span>proxyDNS</span>: <span>true</span> }), { <span>urls</span>: [<span>"*://*.podman/*"</span>] });
</code></pre>
<p>But I’m not feeling like publishing a literal one-liner to addons.mozilla.org. I am considering making a tiny add-on for creating rules of this sort via a settings UI, but for now I’ve discovered a simpler solution that doesn’t require any add-on publishing at all.</p>
<p>Yeah, it’s <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/Proxy_servers_and_tunneling/Proxy_Auto-Configuration_PAC_file">PAC (Proxy Auto-Configuration)</a>. Another 90s comeback, just like SLiRP!</p>
<p>Place the following in a file directly accessible to Firefox (I’m saying that because mind the Flatpak – if running Flatpak Firefox, expose a new directory through <a href="https://flathub.org/apps/com.github.tchx84.Flatseal">Flatseal</a> with just the file):</p>
<pre><code><span>function</span> <span>FindProxyForURL</span>(<span>url, host</span>) {
  <span>if</span> (host.<span>endsWith</span>(<span>'.podman'</span>))
    <span>return</span> <span>'SOCKS5 localhost:42666'</span>;
  <span>return</span> <span>'DIRECT'</span>;
}
</code></pre>
<p>Finally, configure Firefox to use it (and tick the checkbox to proxy DNS names):</p>
<figure>
	<picture>
		<source type="image/webp" srcset="https://val.packett.cool/blog/podfox/prefs.webp">
		<img alt="Screenshot of Firefox proxy settings, set to 'Automatic proxy configuration URL' with a path of 'file:///home/val/.config/podfox/podfox.pac', and at the bottom the 'Proxy DNS when using SOCKSv[45]' checkboxes are checked" src="https://val.packett.cool/blog/podfox/prefs.png" width="940" height="473" loading="lazy" decoding="async">
	</picture>
</figure>
<p>Now you have this virtual <code>.podman</code> TLD always accessible in the browser, and as long as the Podfox proxy is running, you can open any port on any container in any network in your rootless Podman runtime!</p>
<h2 id="bonus-containerizing-my-cli-development-environment" tabindex="-1"><a href="#bonus-containerizing-my-cli-development-environment"><span>Bonus: Containerizing my CLI Development Environment</span></a></h2>
<p>So with this ability to browse services running in containers, and without using port forwarding, the services under development must run in containers as well, of course.</p>
<p>There’s been an explosion of container dev tools in the recent years. I’ve heard of <a href="https://tilt.dev/">Tilt</a> which provides a workflow where service containers by default get constantly rebuilt (and on top of that there’s an option for supporting live-reloading by copying changes into the container) and there’s a nice UI page for watching all the logs and the “most heavily suggested” runtime is a local Kubernetes cluster (even though just running in Podman is also possible). And <a href="https://containers.dev/">the Development Container Specification™ from MicrosoftⓇ</a> comes from the VSCode and GitHub Codespaces world and provides a manifest format that lets (typically) IDEs know how to set up a container where (typically) the Run button would run the app (and the language server and other related tools).</p>
<p>But I like my command-line environment and I don’t want it to be disrupted! I edit code in <a href="https://helix-editor.com/">Helix</a> —which runs language servers that might share their caches with the actual build— and run a variety of random tools, all from my <a href="https://fishshell.com/">fish</a> shell configured with a prompt that I like and so on.</p>
<p>Trying to run just-the-project-parts like the compiler, the service itself, the language server and language-specific tools like linters and formatters inside of the container sounds kinda painful, as for example Helix doesn’t have a “wrap all the tools in something” option, and configuring the PATH to include containerized tools or wrapping invocations manually sounds very annoying. I’d rather… bring my whole environment into each container!</p>
<p>Running a container with my dotfiles is surprisingly easy: <code>-v $HOME/.config:$HOME/.config:ro</code> – thankfully pretty much everything I use supports XDG directories and doesn’t pollute <code>~</code> with random paths. But what about the shell, the editor, the random tools? Building my own containers per project that add my tools on top of the project’s image sounds annoying, slow and heavy. Installing them in an overlay volume that wouldn’t even be a container image (which seems to be how VSCode dev containers do stuff) feels like a “dirtier” version of the same. Can’t I just <code>-v</code> mount them?</p>
<p>Well, with how my setup already was, most of my tools were installed by an <a href="https://codeberg.org/valpackett/dotfiles/src/commit/105193ab7a140986a30a3e42ce37d5220b7d75e6/.config/fish/functions/updatetools.fish">updatetools</a> script into <code>~/.local</code> directories. However, of course, they’re built for the host system — dynamically linking, currently, to <a href="https://chimera-linux.org/">Chimera</a>’s musl libc, LLVM libc++, and occasionally to various other system-wide libraries. They weren’t going to work in a random Debian-based container, unless packed with <a href="https://github.com/VHSgunzo/sharun">sharun</a> or whatever was the tool that I saw ages ago, but the whole point is to <em>avoid</em> “weird stuff” like this. And I don’t want to build static binaries either. Not everything <em>can</em> work as static binaries, even.</p>
<p>That’s when it hit me.</p>
<p>The answer is to get <a href="https://brew.sh/">Homebrew</a>.</p>
<p>Yes, that same package manager that came from the macOS world and always had to consider the host OS as sorta immutable, which in the old days was seen as a workaround for a proprietary OS, but now is a huge asset. Homebrew manages a separate unprivileged prefix, and has prebuilt packages with a fixed one, currently <code>/home/linuxbrew/.linuxbrew</code> on Linux. (It also does <a href="https://www.gobolinux.org/">GoboLinux</a>-style multi-versioning, which I like to jokingly call “<a href="https://nix.dev/">Nix</a> for those of us who touch grass”, but that’s not very relevant right now.)</p>
<p>With containers, we can just mount Homebrew’s prefix: <code>-v /home/linuxbrew:/home/linuxbrew:ro</code>. And append it to the PATH with Podman’s nice env-merge feature: <code>--env-merge PATH=\${PATH}:/home/linuxbrew/.linuxbrew/sbin:/home/linuxbrew/.linuxbrew/bin</code>. And now we can change the <code>--entrypoint</code> to the homebrewed fish… and we’re off to the races!</p>
<figure>
	<picture>
		<source type="image/webp" srcset="https://val.packett.cool/blog/podfox/hop.webp">
		<img alt="Screenshot of a terminal, first running fastfetch that shows Chimera Linux, then running 'podman run --rm -it --tz local -v /home/linuxbrew:/home/linuxbrew:ro --env-merge PATH=${PATH}:/home/linuxbrew/.linuxbrew/sbin:/home/linuxbrew/.linuxbrew/bin -e XDG_CONFIG_HOME=$HOME/.config -v $HOME/.config:$HOME/.config:ro -v $PWD:$PWD -w $PWD --entrypoint (which fish) haskell:9.10.1', the same shell prompt appears, fastfetch is run and shows Debian" src="https://val.packett.cool/blog/podfox/hop.png" width="1504" height="1152" loading="lazy" decoding="async">
	</picture>
</figure>
<p>Now THAT’S what I call “distro hopping”!</p>
<p>Despite the superficial similarity with <a href="https://distrobox.it/">Distrobox</a> the above screenshot has at a glance, this is a different idea. Remember, we’re still talking about project-specific dev containers. This is <em>not</em> a persistent “pet” container where you persistently install packages from another distro,</p>
<p>this is a runtime COMPOSITION of an ephemeral/“cattle” project-specific dev container that just has the project’s toolchain, and a “pet” user environment, mounted read-only.</p>
<p>And because it’s mounted, there are no redundant copies that can get outdated and no delay for copying/installing stuff! This is really cool. I can just enter any container image while bringing all my comfy stuff with me, instantly.</p>
<p>I went all-in on Homebrew, mostly replacing my custom tool installation/update script with a <a href="https://codeberg.org/valpackett/dotfiles/src/branch/trunk/.config/homebrew/Brewfile">Brewfile</a>, and I’m really happy about it. As a bonus, it also makes the original full-system kind of distro hopping easier! If I use Homebrew for all my CLI stuff and Flatpak for all my GUI stuff, I could be using something as fixed and bare-bones as <a href="https://os.gnome.org/">GNOME OS</a> for the host! Though I’m currently most intrigued by <a href="https://aerynos.com/">AerynOS</a> which reflects a lot of my engineering values and choices.</p>
<p>Anyway, so, I started by writing out these long <code>podman run</code> invocations and quickly felt the need to automate them. The result is called <a href="https://codeberg.org/valpackett/dotfiles/src/branch/trunk/.config/fish/functions/podchamp.fish">Podchamp</a> (<a href="https://codeberg.org/valpackett/dotfiles/src/commit/105193ab7a140986a30a3e42ce37d5220b7d75e6/.config/fish/functions/podchamp.fish">current version permalink</a>) as a silly internet reference. It’s just a fish script that lives in my dotfiles, I’m not releasing it as a Real Project™ since it’s tiny and relatively specific to the way I personally do things, but what it does is simple: it finds the first <code>.podchamp[.local]</code> config file above the working directory (in a “project root”), reads container-running instructions and either <code>run</code>s a podman container or <code>exec</code>s into an existing one. The instructions look like:</p>
<pre><code>image mycoolproject-dev:latest
pod pod_mycoolproject
network mycoolproject_app-network
name mycoolproject-dev
persist /var/cache/rust
env CARGO_TARGET_DIR=/var/cache/rust
requires mycoolproject_postgres mycoolproject_rabbitmq
</code></pre>
<p>so it’s basically a bunch of convenience to store the per-project development container configuration in an actual file and not in shell history. And it’s been working great for me!</p>
<p>It also emits OSC 777 sequences to indicate to <a href="https://gitlab.gnome.org/chergert/ptyxis">Ptyxis</a> which container has been just entered, which (for now) Podman itself doesn’t do. The container-awareness in the terminal emulator is really nice for being able to spawn new tabs in the same container as the current tab – yes, not that much more, but that’s <em>huge</em> for UX. It would be nice to have the same experience in other terminals — there’s <a href="https://github.com/ghostty-org/ghostty/discussions/2358">a prototype for Ghostty</a> already, and I’m looking into making it work <a href="https://github.com/wezterm/wezterm/issues/6914">in WezTerm</a>.</p>

	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Fui: C library for interacting with the framebuffer in a TTY context (143 pts)]]></title>
            <link>https://github.com/martinfama/fui</link>
            <guid>43931845</guid>
            <pubDate>Thu, 08 May 2025 22:05:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/martinfama/fui">https://github.com/martinfama/fui</a>, See on <a href="https://news.ycombinator.com/item?id=43931845">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">fui</h2><a id="user-content-fui" aria-label="Permalink: fui" href="#fui"></a></p>
<p dir="auto">fui, standing for framebuffer user interface, is a C library for interacting with the framebuffer in a tty context. It writes directly to the framebuffer device, using a system of layers for drawing. Some stuff that it does:</p>
<ul dir="auto">
<li>Draws pixel values to an arbitrary number of layers, which are then composited together and rendered to the framebuffer.</li>
<li>Primitive drawing functions for lines, rectangles, and circles.</li>
<li>Text rendering using a bitmap font.</li>
<li>Event handling for keyboard and mouse input (using libevdev), with a more generic event system implemented that can be used for other events.</li>
<li>A cheeky sound system using alsa that can play sine tones and chords for now.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<p dir="auto">The actual library is in <code>fui</code>, and can be compiled and installed with:</p>

<p dir="auto">The library can then be used by including <code>-Lfui -l:libfui.a</code> in your compiler flags. The library is statically linked, so you don't need to worry about shared libraries.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Permissions</h2><a id="user-content-permissions" aria-label="Permalink: Permissions" href="#permissions"></a></p>
<p dir="auto">Since both the video and input access needs root privileges, it is recommended to add the user to these groups, to avoid running any compiled program with sudo. You can do this with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo usermod -aG video &quot;$USER&quot;
sudo usermod -aG input &quot;$USER&quot;"><pre>sudo usermod -aG video <span><span>"</span><span>$USER</span><span>"</span></span>
sudo usermod -aG input <span><span>"</span><span>$USER</span><span>"</span></span></pre></div>
<p dir="auto">You'll need to logout and log back in after this. If that doesn't work, a reboot should do it.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Examples</h2><a id="user-content-examples" aria-label="Permalink: Examples" href="#examples"></a></p>
<p dir="auto">There are some (half-baked for now) examples included, in the <code>examples</code> folder. <code>main.c</code> and <code>bodies.c</code> kind of demonstrates most of the components of the library. In the <code>asteroids</code> folder we have a simple asteroids game, which uses the sound system. Also, in <code>tests</code>, there are a few tests implemented using cmocka.</p>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://github.com/martinfama/fui/blob/master/screenshot.png"><img src="https://github.com/martinfama/fui/raw/master/screenshot.png" alt="Description" width="600"></a>
</p>
<p dir="auto"><em>Some stuff running with fui (from main.c).</em></p>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://github.com/martinfama/fui/blob/master/examples/asteroids/screenshot.png"><img src="https://github.com/martinfama/fui/raw/master/examples/asteroids/screenshot.png" alt="Description" width="600"></a>
</p>
<p dir="auto"><em>Asteroids!</em></p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A flat pricing subscription for Claude Code (200 pts)]]></title>
            <link>https://support.anthropic.com/en/articles/11145838-using-claude-code-with-your-max-plan</link>
            <guid>43931409</guid>
            <pubDate>Thu, 08 May 2025 21:12:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://support.anthropic.com/en/articles/11145838-using-claude-code-with-your-max-plan">https://support.anthropic.com/en/articles/11145838-using-claude-code-with-your-max-plan</a>, See on <a href="https://news.ycombinator.com/item?id=43931409">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><header id="header" data-testid="header"></header><div data-testid="main-content" id="main-content"><article><p>Max plan users have access to use Claude Code directly in their terminal. </p><p><h2 id="h_b034789b9e"><b>What is Claude Code?</b></h2></p><p>Claude Code is a command line tool that gives you access to Claude models directly in your terminal, allowing you to delegate complex coding tasks while maintaining transparency and control. With the Max plan, you now have access to both Claude in the web, desktop, and mobile apps and Claude Code in your terminal with one unified subscription.</p><p><h2 id="h_3a732d9d1b"><b>Why use Claude and Claude Code? </b></h2></p><p>Use two powerful AI products, in one simple subscription.</p><p><h2 id="h_135ff3cc3f"><b>How to Connect Claude Code with Your Max Plan</b></h2></p><p>To start using Claude Code with your Max plan:</p><p><h2 id="h_f871688c14"><b>How Rate Limits Work</b></h2></p><p>With the Max plan, your usage limits are shared across both Claude and Claude Code:</p><p>These estimates are based on how Claude works today. In the future, we'll add new capabilities (some might use more of your usage, others less) but we're always working to give you the best value on your current plan.</p><p><h2 id="h_ae409e8695"><b>What Happens When You Hit Rate Limits</b></h2></p><p>To help you monitor your usage, you will see warning messages about remaining capacity. When you reach your rate limits, you can select from a few options based on your needs: </p><section><hr><p>Related Articles</p><section><a href="https://support.anthropic.com/en/articles/8324991-about-claude-pro-usage" data-testid="article-link"><p><span>About Claude Pro usage</span></p></a><a href="https://support.anthropic.com/en/articles/11014257-about-claude-s-max-plan-usage" data-testid="article-link"><p><span>About Claude's Max Plan Usage</span></p></a><a href="https://support.anthropic.com/en/articles/11049744-how-much-does-the-max-plan-cost" data-testid="article-link"><p><span>How much does the Max plan cost?</span></p></a><a href="https://support.anthropic.com/en/articles/11049752-how-do-i-sign-up-for-the-max-plan" data-testid="article-link"><p><span>How do I sign up for the Max plan?</span></p></a><a href="https://support.anthropic.com/en/articles/11049762-choosing-a-claude-ai-plan" data-testid="article-link"><p><span>Choosing a Claude.ai Plan</span></p></a></section></section></article></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Stability by Design (113 pts)]]></title>
            <link>https://potetm.com/devtalk/stability-by-design.html</link>
            <guid>43930584</guid>
            <pubDate>Thu, 08 May 2025 19:51:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://potetm.com/devtalk/stability-by-design.html">https://potetm.com/devtalk/stability-by-design.html</a>, See on <a href="https://news.ycombinator.com/item?id=43930584">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><p>I recently came across the following tweet from OneHappyFellow<a href="#footnote-1" id="return-1"><sup>1</sup></a>:</p> <blockquote> <div lang="en" dir="ltr"><p> I think I figured out what’s stressing me out about programming in dynamically typed languages:</p><p> It’s about always being unsure if using a library in a particular way is going to work and if minor version upgrades aren’t going to break your code. </p></div> — One Happy Fellow (@onehappyfellow) <a href="https://twitter.com/onehappyfellow/status/1919362152487415839?ref_src=twsrc%5Etfw"> May 5, 2025 </a> </blockquote> <p>I found this tweet interesting because the language I use the most—Clojure—is both dynamic and yet the ecosystem has a <em>very</em> strong reputation for stability. Before diving into why exactly this is the case, allow me to present some evidence to justify this belief.</p> <h2>Are Clojure Libraries Stable?</h2> <p>I searched the <a href="https://clojurians.slack.com/">Clojurians Slack</a> for the word "stability," and out of 20 total posts on the first page, 8 are applauding the stability that Clojure brings. This slack is the main forum for Clojurians, and it includes discussions about various libraries, bugs, fixes, etc, therefore one would reasonably expect stability <em>complaints</em> to dominate the discussion. My search is obviously not a random sampling, but it should give you an idea of how much the community appreciates and celebrates stability.</p> <p>As further evidence, consider the following two charts from <a href="https://docdrop.org/download_annotation_doc/3386321-trk2f.pdf"><em>A History of Clojure</em></a> which detail the introduction and retention of new code by release for both Clojure and for Scala.</p> <img id="clojure-code-retention" src="https://potetm.com/img/stability-by-design/clojure-code-retention.webp" alt="Clojure codebase—Introduction and retention of code"> <sup>Clojure codebase—Introduction and retention of code</sup> <img id="scala-code-retention" src="https://potetm.com/img/stability-by-design/scala-code-retention.webp" alt="Scala codebase—Introduction and retention of code"> <sup>Scala codebase—Introduction and retention of code</sup> <p>While this doesn't necessarily translate to <em>library</em> stability, it's reasonable to assume that the attitude of the Clojure maintainers will seep into the community. And that assumption is true.</p> <p>Let's look at the retention of code for various popular libraries. I selected the following libraries off the top of my head with three criteria: all have more than 500 stars and are in active use. I could have easily selected more.</p> <div> <p><img id="scala-code-retention" src="https://potetm.com/img/stability-by-design/xforms.png" alt="xforms codebase—Introduction and retention of code"> <sup>xforms codebase—Introduction and retention of code</sup> </p> <p><img id="scala-code-retention" src="https://potetm.com/img/stability-by-design/component.png" alt="Component codebase—Introduction and retention of code"> <sup>Component codebase—Introduction and retention of code</sup> </p> </div> <div> <p><img id="scala-code-retention" src="https://potetm.com/img/stability-by-design/instaparse.png" alt="Instaparse codebase—Introduction and retention of code"> <sup>Instaparse codebase—Introduction and retention of code</sup> </p> <p><img id="scala-code-retention" src="https://potetm.com/img/stability-by-design/core-match.png" alt="core.match codebase—Introduction and retention of code"> <sup>core.match codebase—Introduction and retention of code</sup> </p> </div> <p>Clearly library authors follow in the footsteps of the Clojure maintainers in this regard.</p> <p>The last evidence I will give is anecdotal, but informative. I recently <a href="https://github.com/potetm/fusebox/blob/master/CHANGELOG.md#1010">pushed an update</a> to my fault tolerance library, <a href="https://github.com/potetm/fusebox">Fusebox</a>. This update came about because of a quirk in the retry utility. Whenever an exception is thrown, the exception is wrapped with metadata from the retry utility (e.g. how many retries happened) and then re-thrown.</p> <p>A fusebox user, Martin Kavalar, recently requested that the exception be wrapped only if a retry actually happened. Not only was this a reasonable request, but this probably should have been the behavior from the beginning. I would even go so far as to call this a bug.</p> <p>However, this is a bug that people have dealt with. They've written their code in such a way as to handle this bug. In other words, if I were to do the "right" thing and "fix" the bug, I would be breaking <em>somebody else's</em> code.</p> <p>I told Martin as much, and he agreed without hesitation that we needed to find a solution that didn't break current users' code. This is <em>not</em> a normal interaction amongst software engineers—a breed infamous for their long, drawn out debates on the most minute of details. However, this is absolutely expected in the Clojure community.</p> <p>Having given the evidence that, in practice, Clojure libraries tend to be very stable, the question becomes, "How is this possible?" On the surface, OneHappyFellow's reasoning makes sense: static types tell you when a breaking change has occurred, therefore they make the upgrade process much easier. The answer to this riddle has two parts.</p> <h2>What Makes Clojure Different?</h2> <p>In short, Clojure is—by convention—the most static dynamic language in existence.</p> <p>In his twitter thread, OneHappyFellow argues a couple of smaller points: dynamic language serialization <a href="https://x.com/onehappyfellow/status/1919362154722889782">is busted</a>, and monkey patching makes it a nightmare to <a href="https://x.com/onehappyfellow/status/1919362156815892909">pass objects across processes</a>.</p> <p>Consider a typical Javascript program. What is it comprised of? Objects, objects, and more objects. Members of those objects must be either introspected or divined. Worse, it's normal to monkeypatch those objects, so the object members may (or may not) change over time.</p> <p>Now, consider a typical Clojure program. What is it comprised of? Namespaces. Those namespaces contain functions and data. Functions may be dynamically generated (via macros), but it is <em>extremely</em> rare to "monkeypatch" a namespace.<a href="#footnote-2" id="return-2"><sup>2</sup></a> If you want to know what functions are available in a namespace, you can simply read the source file.</p> <p>What's more, you <em>never</em> serialize a namespace. That doesn't even make sense. Rather, you serialize data, and <em>all</em> Clojure data is serializable out of the box. In fact, it's serialized in the exact same way you write it in your source code, in a format called <a href="https://github.com/edn-format/edn">Extensible Data Notation (EDN)</a>. EDN even lets you to create custom tags that allow you to use custom constructors for data (e.g. for a datetime or a red-black tree).</p> <p>Clojure data has another curious property that makes it more resilient to change: it's immutable. Once you're handed a hashmap, you can rest assured that <em>nobody</em> is going to tweak it without your knowing about it. It's impossible. Calls to <code>assoc</code> and <code>update</code> return a <em>new</em> hashmap rather than updating the existing hashmap.<a href="#footnote-3" id="return-3"><sup>3</sup></a> This means that when you pass data to another process or over the wire, you <em>know</em> the receiver is going to see exactly what you're seeing.</p> <p>Lastly, I would like to draw your attention to how object members are named in dynamic languages. Typically (meaning, afaik always), they are simple, unadorned symbols like <code>.name</code> for a field or <code>.doSomething()</code> for a function. This naturally leads to ambiguity when, for example, you want to attach two names to something. Take, for instance, a <code>user</code> object. You start with <code>user.name</code>, but then realize you need the organization name. There are multiple options at this point, but one option is to rename <code>user.name</code> to <code>user.username</code> to accommodate for the new field, <code>user.orgName</code>. The problem is, this just created a breaking change.</p> <p>In contrast, Clojure fields are typically given a namespace element. (This concept is related to but distinct from the namespaces we use to house functions.) So whereas <code>user.name</code> is common in Javascript, in Clojure it would look like <code>{:user/name "OneHappyFellow"}</code>. This allows for other kinds of "names" to be seamlessly integrated without breakage:</p> <pre><code>{:user/name "OneHappyFellow"
 :organization/name "OCaml Bois"}
</code></pre> <p>OneHappyFellow's <a href="https://x.com/onehappyfellow/status/1919362158971727953">final point</a> cuts much deeper, and it requires asking another question.</p> <blockquote> <p lang="en" dir="ltr"> The worst case to me is when I refactor some code only to discover the way I went about it is fundamentally incompatible with some library I’m using.</p> — One Happy Fellow (@onehappyfellow) <a href="https://twitter.com/onehappyfellow/status/1919362158971727953?ref_src=twsrc%5Etfw">May 5, 2025</a> </blockquote> <h2>Why do Library Changes Break Programs?</h2> <p>Well, it's complicated, but to start, let's list out the reasons libraries make changes at all:</p> <ul> <li>Security fixes</li> <li>Bug patches</li> <li>Enhancements</li> </ul> <p>Of those changes, I think we can agree, at least in principle, that security fixes and bug patches should be <em>non-breaking</em> changes. Security fixes should basically ~never trigger a breaking change, and while bug patches <em>might</em> break things, they're typically minor, or they're marked wontfix.</p> <p>Which leaves "enhancements" as the real booger.</p> <p>"Enhancement" in and of itself don't mean breakage. After all, adding a new method to an object doesn't break anything. So what sort of "enhancements" <em>do</em> break things? Well:</p> <ul> <li>renaming method (breaking)</li> <li>renaming a type (breaking)</li> <li>renaming a field (breaking)</li> <li>renaming a package (breaking)</li> <li>changing a method signature (depends)</li> </ul> <p>It's not difficult to see that the only item in that list that has any semblance of validity is the last one. And here we come to the first hard truth in this article.</p> <p><strong>All this random renaming is <em>killing</em> us.</strong></p> <p>And all of this clamoring for static types? All of the insistence that static types "fix" this problem? It makes it worse. Static types "fix" this problem in the same way brooms fix the problem of you throwing your wine glasses on the kitchen floor. Of course, types make it more bearable, but they are not addressing the issue. Why are you hurling your wine glasses around your house in the first place?</p> <p>Why are we renaming everything all the time?</p> <p>Once you notice this trend, it's impossible to un-see. We get records out of the database, and what's the first thing we do? Rename its fields. We then run it through several transformation steps which will invariable rename them again. We then put it on the wire as JSON, and, of course, that requires that we rename them again. We then load them in our SPA and, well the names we got off the wire certainly won't do. Best rename them one more time.</p> <p>It's insanity, and yet it is the world we created.</p> <p>And, believe it or not, this is one major reason Clojure programs are so stinkin' stable. We don't do that. We don't rename things in our libraries, and when we pull data from somewhere, we do our very best to <em>not</em> rename things.</p> <p>But renaming wasn't the only thing in the list of "stuff that causes breakages." What about changing method signatures? To address this, we need to further categorize things. What sorts of changes trigger changing a method signature?</p> <ul> <li>Allowing—but not requiring—more data in the parameters (non-breaking)</li> <li>Requiring more data in the parameters (breaking)</li> <li>Requiring less data in the parameters (non-breaking)</li> <li>Returning more data in the return (depends)</li> <li>Returning less data in the return (breaking)</li> </ul> <p>Of those items, two of them should cause no problems at all. Adding optional inputs to a function is obviously non-breaking.<a href="#footnote-4" id="return-4"><sup>4</sup></a> If you suddenly require fewer inputs—for example you figure out how to solve some partitioning dynamically—that need not be a breaking change. It's possible that this ends up as a breaking change (e.g. if your function once took three arguments, and now it only takes two), however, at least in principle, if you structure your code a certain way your users need not deal with this change.</p> <p>Returning more data than before is somewhat nuanced. In principle, it shouldn't be a breaking change. However, if a function returns a new field, and then that data gets written directly to a database that doesn't have a column for that field, you might get an error (depending on the database). In general, if you make it a practice to select out the data you want prior to transferring it over the wire, you'll avoid any issues along these lines.</p> <p>The two that you want to <em>always</em> avoid are requiring more inputs and returning less outputs. <em>That's</em> what breaks user code. If you avoid doing that, you will <em>never</em> break user code.</p> <p>The question arises: What if you figure out a much better way to do things that requires more inputs and returns fewer outputs? The answer is simple: Make a <em>new</em> function for it. New functions do <em>not</em> break user code. New functions are simply new capabilities. They're great! You don't even have to edit that old code. You can just rewrite it from scratch!</p> <p>Once again, types are a <em>wonderful</em> enabler in this situation. "Oh I don't have to worry about requiring more data to this function. The type checker will alert the user." That's true, but it doesn't change the fact that you needn't make this demand of your users in the first place.</p> <h2>Why are Clojure Libraries Stable?</h2> <p>In short, the Clojure ecosystem is abnormally stable <em>because we avoid breaking things</em>.</p> <p>We don't rename namespaces. We don't rename functions. We don't rename keywords. We neither increase the data we demand, nor do we reduce the data we emit. If we think of a better way to do things, we create a new function, a new namespace, or even a whole new library.</p> <p>It's worth noting that these activities are not free. Your mindset shifts when you're aware that you're going to be carrying some chunk of code for a long time. You become more deliberate, more cognizant of tradeoffs. You learn to watch for patterns that limit growth and patterns that enable growth. For example, over its lifetime the Clojure community has shifted from accepting argument lists and named parameters in their functions to accepting a single hashmap. This is because the single hashmap is easier to grow over time.</p> <p>These principles are already well-known in the developer community. How often do you rename a URL path in your API? Never! How often do you rename a key in your API? Never! Do you ever decide to just return less data? No! Any time you're tempted to do any of these things, what do you do? You create a <em>new name</em> (usually <code>v2</code>).</p> <p>Why do we do this? Because we know the pain it causes our customers, and we want to help them avoid that pain. Yet, somehow the rules change drastically when dealing with other developers. Suddenly it becomes okay to induce pain.</p> <p>Note that this is not a static vs dynamic issue per se. <em>Any</em> library in <em>any</em> language can easily adopt these principles. However, I often see static type enthusiasts loudly proclaiming the benefits of type checkers by saying, "When I upgrade a library, I know that it's going to work." Fair enough. At the very least you know that your code will compile, and you won't be left wondering what changed and where. What's left unsaid, however, is the work that goes in to <em>making</em> the upgrade work.</p> <p>Look again at the <a href="#scala-code-retention">Scala code retention chart</a>. How many of the cliffs in that chart represent a <em>lot</em> of work for their users? How much work could have been avoided if, instead, we opted to just not break things?</p> <hr> <p> <sub> <a href="#return-1" id="footnote-1">1</a>: <a href="https://x.com/onehappyfellow">OneHappyFellow</a> is a great follow btw. </sub> </p> <p> <sub> <a href="#return-2" id="footnote-2">2</a>: The only time I've seen it done was when I did it myself for... reasons. If you do something like that to yourself, you can hardly blame a library for subsequent errors. </sub> </p> <p> <sub> <a href="#return-3" id="footnote-3">3</a>: It does this in an <a href="https://en.wikipedia.org/wiki/Persistent_data_structure#Persistent_hash_array_mapped_trie"> efficient way</a> by sharing elements of old structure with the new structure. </sub> </p> <p> <sub> <a href="#return-4" id="footnote-4">4</a>: Coincidentally this is exactly how I ended up resolving Martin's issue in fusebox. I added an <a href="https://github.com/potetm/fusebox/blob/d9df37f7b327f59aebc12aea06fe4fa159e18951/src/com/potetm/fusebox/retry.clj#L82-L88">optional `::retry/exception` key to the function signature</a>. </sub> </p> <hr> <p>Thank you to <a href="https://x.com/onehappyfellow">OneHappyFellow</a>, <a href="https://x.com/slimjimmy_dev">Slim Jimmy</a>, and <a href="https://x.com/bostonaholic">Matthew Boston</a> for their input on this article.</p> <p>A special thank you to <a href="https://truegrok.com/">Eugene Pakhomov</a> for giving input on the article and for supplying the stack charts for the Clojure libraries.</p> </article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How to start a school with your friends (129 pts)]]></title>
            <link>https://prigoose.substack.com/p/how-to-start-a-university</link>
            <guid>43930397</guid>
            <pubDate>Thu, 08 May 2025 19:34:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://prigoose.substack.com/p/how-to-start-a-university">https://prigoose.substack.com/p/how-to-start-a-university</a>, See on <a href="https://news.ycombinator.com/item?id=43930397">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><div><p><span>FractalU is a “school” for adults, taught from living rooms in New York City. We’ve run over 100 classes and taught thousands of students. Classes meet weekly and are held on evenings and weekends, since most of our students and teachers are working professionals.</span></p><p><span>Here's a small sampling of our recent courses:</span></p></div><ul><li><p><a href="https://docs.google.com/document/d/1AmNHTlbAD23eTcfGqA-SWi66o3j0xPC6HLsTidonj1c/edit?usp=sharing" rel="">Improvisational Indian Cooking</a></p></li><li><p><a href="https://fractalnyc.com/fractalnyc/Writing-Fiction-55166cc588ac417da1b80ec8f32306b9" rel="">Writing Fiction</a></p></li><li><p><a href="https://docs.google.com/document/d/1ZHkfER5K4wDysY-K1w_LUMCuv1_VITD5dI5ZQ4LZx1s/edit?tab=t.0" rel="">Basics of Computational Biology</a></p></li><li><p><a href="https://solid-helenium-175.notion.site/Serious-Comedy-Class-Overview-15142ee555c580f3ac63e8b9aa6c92cd" rel="">Serious Comedy</a></p></li></ul><p>We teach out of our homes, and keep the administrative burden low. That way, teachers can offer their classes at affordable rates. And adult students can make taking classes and learning new skills a regular part of our lives.</p><p>A few years ago, Mari dropped a message in the group chat. She was going through Andrej Karpathy's online course on AI …did anyone want to take it with her?</p><p><span>It turned out that several other friends were also going through the course. A plan was soon hatched: my friends would meet weekly to watch the lectures and hack on the homework together. They'd do it in person at </span><a href="https://supernuclear.substack.com/p/case-study-merlins-place" rel="">merlins place</a><span>, our friend’s apartment which doubles as a community third space.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg" width="1456" height="1092" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1092,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F46b31f19-6303-4918-a114-a25f73e2faca_1600x1200.jpeg 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption><em>Mari and Morgan give a presentation.</em></figcaption></figure></div><p>The average self-paced online course has a completion rate of 5-15%. Perhaps you’ve had the experience of enrolling in a self-paced course only to drop it midway through. Maybe, like me, you even spent money on an online course only to drop out.</p><p>It turns out, if you meet up with friends every week to take a course, two things happen:</p><ol><li><p>You have a lot of fun</p></li><li><p>The average completion rate skyrockets</p></li></ol><p><strong>My friends discovered that the true value of school is</strong><em><strong> </strong></em><strong>the</strong><em><strong> social container</strong></em><strong>.</strong><span> The best classes in the world are freely available online. But going through an online class alone requires willpower that many of us don't have. It’s easy and fun to do focused work when you’re doing it with your friends! And to come back every week until you finish what you set out to do.</span></p><p><span>One of the participants in this weekly event was my husband Andrew. Considering how enjoyable and useful the container proved to be, Andrew wondered: </span><em>why aren't we taking classes with our friends regularly?</em></p><p><strong><span>Thus began </span><a href="https://x.com/TylerAlterman/status/1715486306065633508" rel="">FractalU</a><span>: a low-overhead low-cost “school” where we learn with our friends, from our living rooms.</span></strong></p><p>The first semester of FractalU we ran 4 classes. Two classes continued with this model of co-learning by taking an online course together. But a few of us wanted to teach original material and designed courses from scratch.</p><p>Our first classes were:</p><ol><li><p><em><a href="https://drive.google.com/file/d/1EWCOVIcg0-dX0XtL3KwNyra6jzMogXLL/view" rel="">Foundations of Computing: From NAND to Tetris</a></em><span>, an online class TA’ed by </span><a href="https://x.com/__drewface" rel="">Andrew</a></p></li><li><p><em><a href="https://docs.google.com/document/d/12rW09vEw2_UAZfScXaZBy0QdQDTsegY8QCXbRDhCjSg/edit?tab=t.0" rel="">Building LLMs in Practice</a></em><span>, TA’ed by </span><a href="https://x.com/chrislck_" rel="">Chris</a></p></li><li><p><em><a href="https://x.com/TylerAlterman/status/1715486317830635999" rel="">Body, Mind, World</a></em><span>, an original class created by </span><a href="https://x.com/TylerAlterman" rel="">Tyler</a><span> and Alicia</span></p></li><li><p><em><a href="https://prigoose.substack.com/p/how-to-live-near-your-friends" rel="">How to Live Near Your Friends</a></em><span>, an original class created by </span><a href="https://x.com/Prigoose" rel="">Priya</a><span>, the author of this post</span></p></li></ol><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png" width="1170" height="1555" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1555,&quot;width&quot;:1170,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F94baca02-7ece-45ab-bcaf-193e673b26a2_1170x1555.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><em>Eric and Jesse give a guest lecture</em></figcaption></figure></div><p>We had about 50 students total that first semester.</p><p><em>But then something surprising happened</em><span> — five of those students wanted to teach a class the next semester. Plus, two people who had guest taught in a class wanted to run their own classes. We also pitched a few other friends who we admired on running their own classes. In our second semester, we ran 18 classes with over 200 students!</span></p><p>We just finished our fifth semester of FractalU. We offer over 20-30 courses per semester. We’ve had 62 awesome instructors, who have taught thousands of students. </p><p><span>Most FractalU instructors aren't professional teachers; they have regular day jobs. They teach because they love their subject and </span><a href="https://fractaluniversity.substack.com/i/137993147/youll-make-new-friends-who-share-your-niche-interests" rel="">want to make friends who share their niche interests</a><span>. Sometimes they teach in order to </span><a href="https://fractaluniversity.substack.com/i/137993147/the-best-way-to-learn-is-to-teach" rel="">gain a better understanding of the subject themselves</a><span>.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg" width="1456" height="1092" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1092,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8ed268e3-37e4-4c50-ae17-730812ef52f7_1600x1200.jpeg 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><em>Teaching painting from a tiny New York City living room.</em></figcaption></figure></div><p>So how did we grow from a few humble classes taught by and to our friends to what we have now?</p><p><span>FractalU isn't a business or a nonprofit. In fact, it's not a formal organization at all. </span><strong>It's simply a coordination mechanism with a tiny bit of volunteer admin work</strong><span> done by a team of four.</span></p><p><span>Three times a year we email instructors and send them a </span><a href="https://fractalnyc.notion.site/EXAMPLE-FractalU-Instructors-Guide-Summer-25-1ec8262d069080ae8192fedce00f18c6?pvs=4" rel="">Notion Guide</a><span> for the upcoming semester. The step-by-step guide helps instructors write a high-quality syllabus and list their class.</span></p><p>The guide also includes a list of spaces where they can host a class. These are living rooms volunteered by our community, in exchange for a small fee. (In addition to local living rooms, we've found two spaces in New York City willing to host: the Google Headquarters and a local dance studio).</p><p>After the listing deadline has passed, the admin team advertises the semester. We post to our email list, on social media, and in various local newsletters and lots of group chats.</p><p>The instructors handle everything from there. The instructor reviews applications and emails accepted and rejected students.</p><p>Most instructors choose to charge a sliding scale rate for their classes. However, since FractalU is not a formal organization, we don't employ anyone. So instructors must deal with collecting money and managing taxes on their own.</p><p>We keep admin overhead very low. The admin team only has 3 roles:</p><ol><li><p>Emailing instructors a few times a year.</p></li><li><p>Advertising online by poasting good.</p></li><li><p>Curating teachers and classes.</p></li></ol><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png" width="1456" height="971" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:971,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false,&quot;align&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e1c60a-e352-4607-817c-528b88bbfa94_1600x1067.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><em>A movement class, on the roof!</em></figcaption></figure></div><p>The final task of the admin team is curating teachers and classes. FractalU has grown organically: most of our teachers were first students in another class, and then asked us if they could teach their own class.</p><p>We believe the best instructors create high quality social containers. Thus we prefer to choose people we've interacted with a lot both in class and at community events. We want a good sense of their character and social skills before we entrust them to teach.</p><p><span>We also maintain a </span><a href="https://airtable.com/appqj7FQhKgCdLnWM/shr23K8Sa62ptKc7Q" rel="">form</a><span> where people can apply to teach at FractalU. But it’s rare for us to accept teachers who aren’t already part of the community; it’s hard to vet their competence and social skills from an online form and a Zoom call alone.</span></p><p>Our application process is pretty informal. If someone approaches us to teach, and we have enough data to trust that they’d be a good teacher, we say yes. To keep overhead low, any of the admin team is empowered to independently say yes to a class. If we receive a compelling application from a stranger, we do a video call with them to see if they would be a good fit.</p><p>This is the beginning of a two part series. Tomorrow I’ll drop part 2, which is a step-by-step guide on how to start something like this. </p><p><span>If you want even more hands-on help, Tyler and I are running an </span><a href="https://fractalcampus.com/" rel="">accelerator</a><span> this summer to help people start their own campuses, complete with a school, co-living, and regular events. Check it out </span><a href="https://fractalcampus.com/" rel="">here</a><span>.</span></p><p data-attrs="{&quot;url&quot;:&quot;https://fractalcampus.com/&quot;,&quot;text&quot;:&quot;Fractal Campus Accelerator ↗&quot;,&quot;action&quot;:null,&quot;class&quot;:null}" data-component-name="ButtonCreateButton"><a href="https://fractalcampus.com/" rel=""><span>Fractal Campus Accelerator ↗</span></a></p></div></article></div><div id="discussion"><h4>Discussion about this post</h4></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[From: Steve Jobs. "Great idea, thank you." (1051 pts)]]></title>
            <link>https://blog.hayman.net/2025/05/06/from-steve-jobs-great-idea.html</link>
            <guid>43929724</guid>
            <pubDate>Thu, 08 May 2025 18:40:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.hayman.net/2025/05/06/from-steve-jobs-great-idea.html">https://blog.hayman.net/2025/05/06/from-steve-jobs-great-idea.html</a>, See on <a href="https://news.ycombinator.com/item?id=43929724">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

  

  

  <article>
    <p>Now that I’ve been retired for a couple of days, I think I can finally tell this story of how I was – very briefly – <strong><a href="mailto:steve@next.com">steve@next.com</a></strong></p>
<p>And Steve Jobs sent me an email saying <strong>“Great idea, thank you."</strong></p>
<p>Wait, what? What was the great idea?</p>
<h2 id="new-guy-at-next">new guy at NeXT</h2>
<p>In October of 1991, I was a new Systems Engineer at NeXT.  NeXT, of course, was the company Steve Jobs had founded after leaving Apple in 1985, and which <a href="https://blog.hayman.net/2021/12/20/apple-next-years-ago-today.html">eventually merged back into Apple</a> in 1996.  I was one of three employees in Canada, and I think NeXT had about 400 people total.</p>
<h2 id="nextmail">NeXTMail</h2>
<p>Mail on the NeXT Computer was pretty amazing in 1991.  Multimedia!  Fonts!  Attachments!  Sounds!  It’s hard to overstate how cool that was compared to the command line plain-text email everybody was used to.
Every NeXT user got this email from Steve when they started up their computer.</p>
<img src="https://cdn.uploads.micro.blog/2082/2025/welcome-to-the-next-world.jpg" alt="Welcome to the NeXT World." title="Welcome to the NeXT World.jpg" width="432" height="600">
<p>That message included an attachment of what NeXT called <em>Lip Service</em>, the crazy idea that you could embed an audio file inside an email message.  Crazy.</p>
<audio controls="">
  <source src="https://blog.hayman.net/uploads/2025/sj.m4a" type="audio/mp4">
Your browser does not support the audio element.
</audio>
<h2 id="i-have-an-idea">i have an idea</h2>
<p>NeXT automatically set every employee up with a first-initial last-name address in the usual way, so I was <code>shayman@next.com</code>, and the big guy was <code>sjobs@next.com</code>.</p>
<p>A few colleagues had somehow acquired cooler email aliases - single letter things, or their first name, or a nickname or an easier to spell version, or whatever.  Turns out NeXT had set up some sort of form where you could request an email alias that would redirect to whatever your real email address was.</p>
<p>I also noticed that even though there were seven or eight people at NeXT named <em>Steve</em>, nobody was using the email alias <code>steve@next.com</code>.</p>
<p>So late one Friday night, two weeks into the job, I figured, naively, what the heck, nobody else seems to want it, so I filled in the form asking for <code>steve@next.com</code> to be forwarded to me, <code>shayman@next.com</code>.</p>
<p>In the back of my mind was a vague idea that maybe somebody would have to approve this.  But no, it all got set up automatically, and …</p>
<h2 id="that-was-a-bad-idea">that was a bad idea</h2>
<p>well, suddenly a whole cavalcade of misdirected email was winding up in my inbox.  People sent to <code>steve@next.com</code> who <em>thought</em> they were writing to Steve Jobs, and ordinarily it would have bounced back and they’d realize they’d mistyped the address.  I’m getting email from reporters, from other CEOs, from finance people …</p>
<p>Of course I didn’t read any of it.</p>
<p>But I did start panicking.  OMG I’m going to get fired, this was a terrible idea, I should have foreseen this, what am I going to do now? Once they find out, I’m done!</p>
<h2 id="frantic-backpedalling">frantic backpedalling</h2>
<p>As a last desperate gasp, I filled in the form AGAIN, but this time asking for <code>steve@next.com</code> to be forwarded to <code>sjobs@next.com</code> instead of me.</p>
<p>And that went through. Phew.  I figured I better fess up and tell Steve Jobs what I’d done, so I sent him an email, saying approximately</p>
<pre tabindex="0"><code>Hi - I'm new here. I did something dumb and  
set up a mail alias so that steve@next.com  
would go to me.   
This was a bad idea, I'm sorry.   
I've changed it to steve@next.com goes to you,   
not to me. I think that makes more sense.  

My apologies.    
Signed, new guy.
</code></pre><h2 id="a-reply-i-will-cherish">a reply i will cherish</h2>
<p>and I got this response.  This was the only email I ever personally received from Steve Jobs.</p>
<img src="https://cdn.uploads.micro.blog/2082/2025/stevenext.com.jpg" alt="Email from SJ to me saying 'Great idea, thank you.'" title="steve@next.com.jpg" width="573" height="518">
<p><strong>From: Steve Jobs</strong><br>
<strong>To: Steve Hayman</strong><br>
Great idea, thank you.</p>
<p>I’ve often thought I should print and frame this email, and let people wonder what the Great Idea was.  “We should merge back with Apple!”  “How about a music player that fit in your pocket?”  “We should build something with a touch screen.”    no, nothing quite that cool, but still, it’s one of my favourite messages.</p>
<h2 id="postscript">postscript</h2>
<p>I started my career with an email from Steve Jobs, and I ended with one from Tim Cook. I’ve been a pretty lucky guy.</p>
<img src="https://cdn.uploads.micro.blog/2082/2025/img-6232.png" alt="From Tim Cook" title="IMG_6232.png" width="598" height="153">

  </article>

  
  
  

  

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Static as a Server (110 pts)]]></title>
            <link>https://overreacted.io/static-as-a-server/</link>
            <guid>43929054</guid>
            <pubDate>Thu, 08 May 2025 17:49:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://overreacted.io/static-as-a-server/">https://overreacted.io/static-as-a-server/</a>, See on <a href="https://news.ycombinator.com/item?id=43929054">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>RSC means React <em>Server</em> Components.</p>
<p>And yet, although this blog is built with RSC, it is statically served from a Cloudflare CDN using their free static hosting plan. It costs me exactly zero.</p>
<p><em>Zero.</em></p>
<p>How is this possible?</p>
<p>Aren’t these React <em>Server</em> Components?</p>
<p>In the past, “server” and “static” frameworks were thought of as separate tools. For example, you might use Rails or PHP for a “server” app, but if you wanted to generate a “static” HTML+CSS+JS site, you might use Jekyll or Hugo instead.</p>
<p>However, it’s getting more common for frameworks to support both “server” and “static” <em>output modes.</em> This builds on an insight that seems obvious in retrospect: you can take any “server” framework and get a “static” site out of it by running its “server” during the build and hitting it with a request for every page you want to generate, and then storing the responses on disk. It would be annoying to do this by hand, which is why newer frameworks tend to support this out of the box.</p>
<p><strong>I’ll call these frameworks “hybrid”. They’re conceptually “server” frameworks following the request/response model, but with an option for “static” output.</strong></p>
<p>Sometimes, focusing on one use case and nailing it makes the specialization worth it. But I don’t think this is happening here. I’m not aware of any way in which a “static” tool adds value to developers or to end users <em>by being</em> “static”-only. This doesn’t mean “static”-only tools are bad, but I see no reason to <em>prefer</em> them. On the other hand, I see several tangible reasons to prefer “hybrid” frameworks.</p>
<p>First, the “hybrid” approach reduces tooling fragmentation—why have two ecosystems when the overlap is so large? The difference is just <em>when</em> the code runs.</p>
<p>The “hybrid” approach also gives you both more flexibility and more granularity. It doesn’t lock you into a specific approach. In fact, the choice to do “server” or “static” rendering could now be done route by route. You can start with a fully “static” site and then later add a “server” page to show some dynamic content. Or you might start with a “server” site, and then add some “static” marketing pages. Your projects, some fully “static” and some “server”, can share code and plugins. And arguably, the request/response mental model itself feels natural and intuitive.</p>
<p>There’s nothing RSC-specific to this approach. For example, <a target="_blank" href="https://docs.astro.build/">Astro</a> is <a href="https://overreacted.io/rsc-for-astro-developers/"><em>not</em></a> an RSC framework, but it <em>is</em> a “hybrid” framework. It produces “static” sites by default but you can opt into “server” features like <a target="_blank" href="https://docs.astro.build/en/guides/endpoints/#server-endpoints-api-routes">API routes</a> and <a target="_blank" href="https://docs.astro.build/en/guides/on-demand-rendering/">on-demand rendering.</a></p>
<p>Of course, the same applies to RSC.</p>
<p>My blog is built with Next.js, which emits “static” sites by default. In fact, I’m <em>enforcing</em> that with the <a target="_blank" href="https://nextjs.org/docs/pages/guides/static-exports"><code>output: "export"</code> option</a> which disables any features that require a “server”—which I do not have. If I try to use any “server” features, my “static” build will fail, which is exactly what I want to happen in this case.</p>
<p>In other words, this <em>React Server Component</em> runs at the build time during deploy:</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="js" data-theme="Overnight"><code data-language="js" data-theme="Overnight"><span data-line=""><span>export</span><span> default</span><span> async</span><span> function</span><span> Home</span><span>()</span><span> {</span></span>
<span data-line=""><span>  const </span><span>posts</span><span> =</span><span> await </span><span>getPosts</span><span>();</span></span>
<span data-line=""><span>  return</span><span> (</span></span>
<span data-line=""><span>    &lt;</span><span>div</span><span> className=</span><span>"</span><span>relative -top-[10px] flex flex-col gap-8</span><span>"</span><span>&gt;</span></span>
<span data-line=""><span>      {</span><span>posts</span><span>.</span><span>map</span><span>((</span><span>post</span><span>)</span><span> =&gt;</span><span> (</span></span>
<span data-line=""><span>        &lt;</span><span>Link</span></span>
<span data-line=""><span>          key={</span><span>post</span><span>.</span><span>slug</span><span>}</span></span>
<span data-line=""><span>          className=</span><span>"</span><span>block py-4 hover:scale-[1.005] will-change-transform</span><span>"</span></span>
<span data-line=""><span>          href={</span><span>"</span><span>/</span><span>"</span><span> + </span><span>post</span><span>.</span><span>slug</span><span> + </span><span>"</span><span>/</span><span>"</span><span>}</span></span>
<span data-line=""><span>        &gt;</span></span>
<span data-line=""><span>          &lt;</span><span>article</span><span>&gt;</span></span>
<span data-line=""><span>            &lt;</span><span>PostTitle</span><span> post={</span><span>post</span><span>} /&gt;</span></span>
<span data-line=""><span>            &lt;</span><span>PostMeta</span><span> post={</span><span>post</span><span>} /&gt;</span></span>
<span data-line=""><span>            &lt;</span><span>PostSubtitle</span><span> post={</span><span>post</span><span>} /&gt;</span></span>
<span data-line=""><span>          &lt;/</span><span>article</span><span>&gt;</span></span>
<span data-line=""><span>        &lt;/</span><span>Link</span><span>&gt;</span></span>
<span data-line=""><span>      ))}</span></span>
<span data-line=""><span>    &lt;/</span><span>div</span><span>&gt;</span></span>
<span data-line=""><span>  );</span></span>
<span data-line=""><span>}</span></span></code></pre></figure>
<p>You can see its output on my <a href="https://overreacted.io/">homepage.</a> The <code>await getPosts()</code> call reads from the filesystem—it’s neither some kind of a client fetch nor some kind of a server runtime code. This Server Component runs <em>during deployment</em> of my static blog.</p>
<p>Yes, it’s confusing that we say “React <em>Server</em> components” even when we run them “statically”. But I’ve already explained that <em>any</em> “server” framework is <em>already</em> a “static” framework. You just need to hit it early and save its responses to the disk.</p>
<p>So let’s just collectively agree to get over this.</p>
<p>The code we write is exactly the same.</p>
<p>“Static” is a “server” that runs ahead of time.</p><p><a href="https://ko-fi.com/gaearon" target="_blank"><span></span>Pay what you like</a></p><hr><p><a target="_blank" href="https://bsky.app/search?q=https%3A%2F%2Foverreacted.io%2Fstatic-as-a-server%2F">Discuss on Bluesky</a>&nbsp;&nbsp;·&nbsp;&nbsp;<a target="_blank" href="https://github.com/gaearon/overreacted.io/edit/main/public/static-as-a-server/index.md">Edit on GitHub</a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Chicago native Cardinal Prevost elected pope, takes name Leo XIV (215 pts)]]></title>
            <link>https://catholicreview.org/chicago-native-cardinal-prevost-elected-pope-takes-name-leo-xiv/</link>
            <guid>43928742</guid>
            <pubDate>Thu, 08 May 2025 17:29:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://catholicreview.org/chicago-native-cardinal-prevost-elected-pope-takes-name-leo-xiv/">https://catholicreview.org/chicago-native-cardinal-prevost-elected-pope-takes-name-leo-xiv/</a>, See on <a href="https://news.ycombinator.com/item?id=43928742">Hacker News</a></p>
<div id="readability-page-1" class="page"><article aria-label="Chicago native Cardinal Prevost elected pope, takes name Leo XIV"><div>
			<p>VATICAN CITY (CNS) — Cardinal Robert F. Prevost, the Chicago-born prefect of the Dicastery for Bishops under Pope Francis, was elected the 267th pope May 8 and took the name Pope Leo XIV.</p>
<p>He is the first North American to be elected pope and, before the conclave, was the U.S. cardinal most mentioned as a potential successor of St. Peter.</p>
<p>The white smoke poured from the chimney on the roof of the Sistine Chapel at 6:07 p.m. Rome time and a few minutes later the bells of St. Peter’s Basilica began to ring.</p>
<p>About 20 minutes later the Vatican police band and two dozen members of the Pontifical Swiss Guard marched into St. Peter’s Square. They soon were joined by the marching band of the Italian Carabinieri, a branch of military police, and by units of the other branches of the Italian military.</p>
<div>
<figure><img loading="lazy" decoding="async" width="900" height="600" src="https://catholicreview.org/wp-content/uploads/2025/05/crowd-joy.jpg" alt="" srcset="https://catholicreview.org/wp-content/uploads/2025/05/crowd-joy.jpg 900w, https://catholicreview.org/wp-content/uploads/2025/05/crowd-joy-300x200.jpg 300w, https://catholicreview.org/wp-content/uploads/2025/05/crowd-joy-768x512.jpg 768w, https://catholicreview.org/wp-content/uploads/2025/05/crowd-joy-600x400.jpg 600w" sizes="auto, (max-width: 900px) 100vw, 900px"><figcaption>The crowd reacts in St. Peter’s Square at the Vatican on the second day of the conclave as white smoke billows from the chimney indicating a new pope has been elected. (OSV News photo/Kevin Coombs, Reuters)</figcaption></figure>
</div>
<p>As soon as news began to spread, people from all over Rome ran to join the tens of thousands who were already in the square for the smoke watch. Rome Mayor Roberto Gualtieri was among them.</p>
<p>French Cardinal Dominique Mamberti, protodeacon of the College of Cardinals, appeared on the central balcony of St. Peter’s Basilica at 7:12 p.m. He told the crowd: “I announce to you a great joy. We have a pope (‘Habemus papam’),” saying the cardinal’s name in Latin and announcing the name by which he will be called.</p>
<p>Cardinals over the age of 80, who were not eligible to enter the conclave, joined the crowd in the square. Among them were Cardinals Seán P. O’Malley, the retired archbishop of Boston; Donald W. Wuerl, the retired archbishop of Washington; and Marc Ouellet, retired prefect of the Congregation for Bishops.</p>
<p><a href="https://catholicreview.org/u-s-cardinals-resume-demeanor-land-him-on-papabile-lists/" target="_blank" rel="noreferrer noopener">A longtime missionary in Peru, the 69-year-old pope holds both U.S. and Peruvian citizenship.</a></p>
<p>La Repubblica, the major Italian daily, described him April 25 as “cosmopolitan and shy,” but also said he was “appreciated by conservatives and progressives. He has global visibility in a conclave in which few (cardinals) know each other.”</p>
<p>That visibility comes from the fact that as prefect of the Dicastery for Bishops for the past two years, he was instrumental in helping Pope Francis choose bishops for many Latin-rite dioceses, he met hundreds of bishops during their “ad limina” visits to Rome and was called to assist the world’s Latin-rite bishops “in all matters concerning the correct and fruitful exercise of the pastoral office entrusted to them.”</p>
<p>The new pope was serving as bishop of Chiclayo, Peru, when Pope Francis called him to the Vatican in January 2023.</p>
<p>During a talk at St. Jude Parish in Chicago in August, the then-cardinal said Pope Francis nominated him “specifically because he did not want someone from the Roman Curia to take on this role. He wanted a missionary; he wanted someone from outside; he wanted someone who would come in with a different perspective.”</p>
<p>In a March 2024 interview with Catholic News Service, he said Pope Francis’ decision in 2022 to name three women as full members of the dicastery, giving them input on the selection of bishops “contributes significantly to the process of discernment in looking for who we hope are the best candidates to serve the church in episcopal ministry.”</p>
<p>To deter attitudes of clericalism among bishops, he said, “it’s important to find men who are truly interested in serving, in preaching the Gospel, not just with eloquent words, but rather with the example and witness they give.”</p>
<div>
<figure><img loading="lazy" decoding="async" width="900" height="600" src="https://catholicreview.org/wp-content/uploads/2025/05/crowd-white-smoke-1.jpg" alt="" srcset="https://catholicreview.org/wp-content/uploads/2025/05/crowd-white-smoke-1.jpg 900w, https://catholicreview.org/wp-content/uploads/2025/05/crowd-white-smoke-1-300x200.jpg 300w, https://catholicreview.org/wp-content/uploads/2025/05/crowd-white-smoke-1-768x512.jpg 768w, https://catholicreview.org/wp-content/uploads/2025/05/crowd-white-smoke-1-600x400.jpg 600w" sizes="auto, (max-width: 900px) 100vw, 900px"><figcaption>The crowd waves Puerto Rican flags and other flags in St. Peter’s Square at the Vatican on the second day of the conclave as white smoke billows from the chimney indicating a new pope has been elected. (OSV News photo/Claudia Greco, Reuters)</figcaption></figure>
</div>
<p>In fact, the cardinal said, Pope Francis’ “most effective and important” bulwark against clericalism was his being “a pastor who preaches by gesture.”</p>
<p>In an interview in 2023 with Vatican News, then-Cardinal Prevost spoke about the essential leadership quality of a bishop.</p>
<p>“Pope Francis has spoken of four types of closeness: closeness to God, to brother bishops, to priests and to all God’s people,” he said. “One must not give in to the temptation to live isolated, separated in a palace, satisfied with a certain social level or a certain level within the church.”</p>
<p>“And we must not hide behind an idea of authority that no longer makes sense today,” he said. “The authority we have is to serve, to accompany priests, to be pastors and teachers.”</p>
<p>As prefect of the dicastery then-Cardinal Prevost also served as president of the Pontifical Commission for Latin America, where nearly 40% of the world’s Catholics reside.</p>
<p>A Chicago native, he also served as prior general of the Augustinians and spent more than two decades serving in Peru, first as an Augustinian missionary and later as bishop of Chiclayo.</p>
<p>Soon after coming to Rome to head the dicastery, he told Vatican News that bishops have a special mission of promoting the unity of the church.</p>
<p>“The lack of unity is a wound that the church suffers, a very painful one,” he said in May 2023. “Divisions and polemics in the church do not help anything. We bishops especially must accelerate this movement toward unity, toward communion in the church.”</p>
<p>In September, a television program in Peru reported on the allegations of three women who said that then-Bishop Prevost failed to act against a priest who sexually abused them as minors. The diocese strongly denied the accusation, pointing out that he personally met with the victims in April 2022, removed the priest from his parish, suspended him from ministry and conducted a local investigation that was then forwarded to the Vatican. The Vatican said there was insufficient evidence to proceed, as did the local prosecutor’s office.</p>
<p>Pope Leo was born Sept. 14, 1955, in Chicago, Illinois. He holds a bachelor’s degree in mathematics from the Augustinian-run Villanova University in Pennsylvania and joined the order in 1977, making his solemn vows in 1981. He holds a degree in theology from the Catholic Theological Union in Chicago and a doctorate from the Pontifical University of St. Thomas Aquinas in Rome.</p>
<p>He joined the Augustinian mission in Peru in 1985 and largely worked in the country until 1999 when he was elected head of the Augustinians’ Chicago-based province. From 2001 to 2013, he served as prior general of the worldwide order. In 2014, Pope Francis named him bishop of Chiclayo, in northern Peru, and the pope asked him also to be apostolic administrator of Callao, Peru, from April 2020 to May 2021.</p>
<p>The new pope speaks English, Spanish, Italian, French, Portuguese and can read Latin and German.</p>
<section>
<h2>Read More 2025 Conclave</h2>

</section>
<p>Copyright © 2025 Catholic News Service/U.S. Conference of Catholic Bishops</p>
<p><a href="https://catholicreview.org/chicago-native-cardinal-prevost-elected-pope-takes-name-leo-xiv/print/" title="Print" rel="nofollow"><img decoding="async" src="https://catholicreview.org/wp-content/plugins/wp-print/images/printer_famfamfam.gif" alt="Print" title="Print"></a>&nbsp;<a href="https://catholicreview.org/chicago-native-cardinal-prevost-elected-pope-takes-name-leo-xiv/print/" title="Print" rel="nofollow">Print</a></p>

			</div></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Reservoir Sampling (480 pts)]]></title>
            <link>https://samwho.dev/reservoir-sampling/</link>
            <guid>43928315</guid>
            <pubDate>Thu, 08 May 2025 17:02:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://samwho.dev/reservoir-sampling/">https://samwho.dev/reservoir-sampling/</a>, See on <a href="https://news.ycombinator.com/item?id=43928315">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
    <main id="content">
        

<a href="https://samwho.dev/">
    <img alt="samwho keyboard logo" src="https://samwho.dev/images/samwho-keyslogo.svg">
</a>
<header>
  
</header>
<p>Reservoir sampling is a technique for selecting a fair random sample when you
don't know the size of the set you're sampling from. By the end of this essay
you will know:</p>
<ul>
<li>When you would need reservoir sampling.</li>
<li>The mathematics behind how it works, using only basic operations:
subtraction, multiplication, and division. No math notation, I promise.</li>
<li>A simple way to implement reservoir sampling if you want to use it.</li>
</ul>
<s-dog name="doe">
  Before you scroll! This post has been sponsored by the wonderful folks at <a href="https://ittybit.com/?ref=sam">ittybit</a>, and their API for working
  with videos, images, and audio. If you need to store, encode, or get
  intelligence from the media files in your app, check them out!
</s-dog>
<h2 id="sampling-when-you-know-the-size"><a href="#sampling-when-you-know-the-size">#</a>
Sampling when you know the size</h2>
<p>In front of you are 10 playing cards and I ask you to pick 3 at random. How do
you do it?</p>
<p>The first technique that might come to mind from your childhood is to mix them
all up in the middle. Then you can straighten them out and pick the first 3.
You can see this happen below by clicking "Shuffle."</p>

<p>Every time you click "Shuffle," the chart below tracks what the first 3 cards
were.</p>
<s-card-select-bar-chart id="random-shuffle-chart" target="random-shuffle">
</s-card-select-bar-chart>
<p>At first you'll notice some cards are selected more than others, but if you
keep going it will even out. All cards have an equal chance of being selected.
This makes it "fair."</p>
<p>Click "Shuffle 100 times" until the chart evens out.  You can reset the chart if
you'd like to start over.</p>

<p>This method works fine with 10 cards, but what if you had 1 million cards?
Mixing those up won't be easy. Instead, we could use a random number generator
to pick 3 indices. These would be our 3 chosen cards.</p>

<p>We no longer have to move all of the cards, and if we click the "Select" button
enough times we'll see that this method is just as fair as the mix-up method.</p>
<s-card-select-bar-chart id="random-select-chart" target="random-select">
</s-card-select-bar-chart>

<p>I'm stretching the analogy a little here. It would take a long time to count
through the deck to get to, say, index 436,234. But when it's an array in
memory, computers have no trouble finding an element by its index.</p>
<p>Now let me throw you a curveball: what if I were to show you 1 card at a time,
and you had to pick 1 at random?</p>
<s-dog position="right" mode="confused">
  How many cards are you going to show me?
</s-dog>
<p>That's the curveball: you don't know.</p>
<s-dog position="right" mode="default">
  Can I hold on to all the cards you give me and then pick 1 after you stop?
</s-dog>
<p>No, you can only hold on to 1 card at a time. You're free to swap your card
with the newest one each time I show you a card, but you can only hold one and
you can't go back to a card you've already seen.</p>
<s-dog position="right" mode="concerned">
  Then it's impossible! Why would I ever need to do this anyway?
</s-dog>
<p>Believe it or not, this is a real problem and it has a real and elegant
solution.</p>
<p>For example, let's say you're building a log collection service. Text logs, not
wooden ones. This service receives log messages from other services and
stores them so that it's easy to search them in one place.</p>
<p>One of the things you need to think about when building a service like this is
what do you do when another service starts sending you way too many logs.  Maybe
it's a bad release, maybe one of your videos goes viral. Whatever the reason, it
threatens to overwhelm your log collection service.</p>
<p>Let's simulate this. Below you can see a stream of logs that experiences
periodic spikes. A horizontal line indicates the <h->threshold</h-> of logs per
second that the log collection service can handle, which in this example is 5
logs per second.</p>
<!--
Yes, this is not web scale.
-->


<p>You can see that every so often, logs per second spikes above the
<h->threshold</h->. One way to deal with this is "sampling." Deciding to send
only a fraction of the logs to the log collection service.  Let's send 10% of
the logs.</p>
<p>Below we will see the same simulation again, but this time logs that don't get
sent to our log collection service will be greyed out. The graph has 2 lines: a
black line tracks <h->sent logs</h->, the logs that are sent to our log
collection service, and a grey line tracks <h->total logs</h->.</p>


<p>The rate of <h->sent logs</h-> never exceeds the <h->threshold</h->, so we never
overwhelm our log collection service. However, in the quieter periods we're
throwing away 90% of the logs when we don't need to!</p>
<p>What we really want is to send <em>at most</em> 5 logs per second.  This would mean
that during quiet periods you get all the logs, but during spikes you discard
logs to protect the log collection service.</p>
<p>The simple way to achieve this would be to send the first 5 logs you see each
second, but this isn't fair. You aren't giving all logs an equal chance of being
selected.</p>
<h2 id="sampling-when-you-don-t-know-the-size"><a href="#sampling-when-you-don-t-know-the-size">#</a>
Sampling when you don't know the size</h2>
<p>We instead want to pick a fair sample of all the logs we see each second. The
problem is that we don't know how many we will see. Reservoir sampling is an
algorithm that solves this exact problem.</p>
<s-dog position="right" mode="confused">
  1 second isn't a long time, can't we just store all the messages we see and
  then use the select method from way back up there?
</s-dog>
<p>You <em>could</em>, but why live with that uncertainty?  You'd be holding on to an
unknown number of logs in memory. A sufficiently big spike could cause you
problems.  Reservoir sampling solves this problem, and does so without ever
using more memory than you ask it to.</p>
<p>Let's go back to our curveball of me showing you 1 card at a time.  Here's a
recap of the rules:</p>
<ol>
<li>I'll draw cards one at a time from a deck.</li>
<li>Each time I show you a card, you have to choose to hold it or discard it.</li>
<li>If you were already holding a card, you discard your held card before
replacing it with the new card.</li>
<li>At any point I can stop drawing cards and whatever card you're holding is the
one you've chosen.</li>
</ol>
<p>How would you play this game in a way that ensures all cards have been given an
equal chance to be selected when I decide to stop?</p>
<s-dog position="right" mode="triumphant">
  How about we flip a coin every new card? If it's heads, we keep the card we
  have. If it's tails, we swap it out for the new card.
</s-dog>
<p>You're on the right track. Let's have a look at how the coin flip idea plays out
in practice. Below you see a deck of cards. Clicking "Deal" will draw a card and
50% of the time it will go to the <h->discard pile</h-> on the right, and 50% of
the time it will become your <h->held card</h-> in the center, with any
previously held card moving to the discard pile.</p>

<p>The problem is that while the <h->hold</h-> vs <h->discard</h-> counts are
roughly equal, which feels fair, later cards are much more likely to be held
when I stop than earlier cards. The first card drawn has to win 10 coin flips to
still be in your hand after the 10th card is drawn. The last card only has to
win 1.</p>
<p>Scrub the slider below to see how the chances change as we draw more cards. Each
bar represents a card in the deck, and the height of the bar is the chance we're
holding that card when I stop. Below the slider are the chances we're
holding the first card drawn vs. the last card drawn.</p>

<p>Anything older than 15 cards ago is has a less than 0.01% chance of being held
when I stop.</p>
<s-dog position="right" mode="concerned">
  You said I was on the right track! How can this be the right track when I'm
  more likely to win the lottery than to be holding the card I saw 24 draws ago?
</s-dog>
<p>Because believe it or not, we only have to make one small change to this idea
to make it fair.</p>
<p>Instead of flipping a coin to decide if we'll hold the card or not, instead we
give each new card a <code>1/n</code> chance of being held, where <code>n</code> is the number of
cards we've seen so far.</p>
<s-dog position="right" mode="concerned">
  Wait, that's it? That makes it fair?
</s-dog>
<p>Yep! In order to be fair, every card must have an equal chance of being
selected. So for the 2nd card, we want both cards to have a <code>1/2</code> chance.  For
the 3rd card, we want all 3 cards to have a <code>1/3</code> chance. For the 4th card, we
want all 4 cards to have a <code>1/4</code> chance, and so on. So if we use <code>1/n</code> for the
new card, we can at least say that the new card has had a fair shot.</p>
<p>Let's have a look at the chances as you draw more cards with this new
method.</p>

<s-dog position="right" mode="confused">
  I get how each <b>new</b> card has the right chance of being selected, but how
  does that make the <b>older</b> cards fair?
</s-dog>
<p>So far we've focused on the chance of the new card being selected, but we also
need to consider the chance of the card you're holding staying in your hand.
Let's walk through the numbers.</p>
<h3 id="card-1"><a href="#card-1">#</a>
Card 1</h3>
<p>The first card is easy: we're not holding anything, so we always choose to hold
the first card. The chance we're holding this card is <code>1/1</code>, or <code>100%</code>.</p>

<h3 id="card-2"><a href="#card-2">#</a>
Card 2</h3>
<p>This time we have a real choice. We can keep hold of the card we have, or
replace it with the new one. We've said that we're going to do this with a <code>1/n</code>
chance, where <code>n</code> is the number of cards we've seen so far. So our chance of
replacing the first card is <code>1/2</code>, or <code>50%</code>, and our chance of keeping hold of
the first card is its chance of being chosen last time multiplied by its chance
of being replaced, so <code>100% * 1/2</code>, which is again <code>50%</code>.</p>

<h3 id="card-3"><a href="#card-3">#</a>
Card 3</h3>
<p>The card we're holding has a <code>50%</code> chance of being there. This is true
regardless what happened up to this point. No matter whether we're holding card
1 or card 2, it's <code>50%</code>.</p>
<p>The new card has a <code>1/3</code> chance of being selected, so the card we're holding has
a <code>1/3</code> chance of being replaced. This means that our held card has a <code>2/3</code>
chance of remaining held. So its chances of "surviving" this round are <code>50% * 2/3</code>.</p>

<h3 id="card-n"><a href="#card-n">#</a>
Card N</h3>
<p>This pattern continues for as many cards as you want to draw. We can express
both options as formulas.  Drag the slider to substitute <code>n</code> with real numbers
and see that the two formulas are always equal.</p>
<div>
    <p>
      Hold
    </p>
    <p>
      1/(n-1) * (1-(1/n))
    </p>
    <p>
      -
    </p>
  </div>


<p>If <code>1/n</code> is the chance of choosing the new card, <code>1/(n-1)</code> is the chance of
choosing the new card from the previous draw. The chance of <em>not</em> choosing the
new card is the <em>complement</em> of <code>1/n</code>, which is <code>1-(1/n)</code>.</p>
<p>Below are the cards again except this time set up to use <code>1/n</code> instead of a
coin flip. Click to the end of the deck. Does it feel fair to you?</p>

<p>There's a good chance that through the 2nd half of the deck, you never swap
your chosen card. This <em>feels</em> wrong, at least to me, but as we saw above the
numbers say it is completely fair.</p>
<h2 id="choosing-multiple-cards"><a href="#choosing-multiple-cards">#</a>
Choosing multiple cards</h2>
<p>Now that we know how to select a single card, we can extend this to selecting
multiple cards. There are 2 changes we need to make:</p>
<ol>
<li>Rather than new cards having a <code>1/n</code> chance of being selected, they now have
a <code>k/n</code> chance, where <code>k</code> is the number of cards we want to choose.</li>
<li>When we decide to replace a held card, we choose one of the <code>k</code> cards we're
holding at random.</li>
</ol>
<p>So our new previous card selection formula becomes <code>k/(n-1)</code> because we're now
holding <code>k</code> cards. Then the chance that any of the cards we're holding get
replaced is <code>1-(1/n)</code>.</p>
<p>Let's see how this plays out with real numbers.</p>
<div>
    <p>
      Hold
    </p>
    <p>
      k/(n-1) * (1-(1/n))
    </p>
    <p>
      -
    </p>
  </div>


<p>The fairness still holds, and will hold for any <code>k</code> and <code>n</code> pair. This is
because all held cards have an equal chance of being replaced, which keeps them
at an equal likelihood of still being in your hand every draw.</p>
<p>A nice way to implement this is to use an array of size <code>k</code>. For each new card,
generate a random number between 0 and <code>n</code>. If the random number is less than
<code>k</code>, replace the card at that index with the new card.  Otherwise, discard the
new card.</p>

<p>And that's how reservoir sampling works!</p>
<h2 id="applying-this-to-log-collection"><a href="#applying-this-to-log-collection">#</a>
Applying this to log collection</h2>
<p>Let's take what we now know about reservoir sampling and apply it to our log
collection service. We'll set <code>k=5</code>, so we're "holding" at most 5 log messages
at a time, and every second we will send the selected logs to the log collection
service. After we've done that, we empty our array of size 5 and start again.</p>
<p>This creates a "lumpy" pattern in the graph below, and highlights a trade-off
when using reservoir sampling. It's no longer a real-time stream of logs, but
chunks of logs sent at an interval. However, <h->sent logs</h-> never exceeds
the <h->threshold</h->, and during quiet periods the two lines track each other
almost perfectly.</p>


<p>No logs lost during quiet periods, and never more than <h->threshold</h-> logs
per second sent during spikes.  The best of both worlds. It also doesn't store
more than <code>k=5</code> logs, so it will have predictable memory usage.</p>
<h2 id="further-reading"><a href="#further-reading">#</a>
Further reading</h2>
<p>Something you may have thought while reading this post is that some logs are
more valuable than others. You almost certainly want to keep all error logs, for
example.</p>
<p>For that use-case there <em>is</em> a <a href="https://en.wikipedia.org/wiki/Reservoir_sampling#Weighted_random_sampling">weighted</a> variant of reservoir sampling. I
wasn't able to find a simpler explanation of it, so that link is to Wikipedia
which I personally find a bit hard to follow. But the key point is that it
exists and if you need it you can use it.</p>
<h2 id="conclusion"><a href="#conclusion">#</a>
Conclusion</h2>
<p>Reservoir sampling is one of my favourite algorithms, and I've been wanting to
write about it for years now. It allows you to solve a problem that at first
seems impossible, in a way that is both elegant and efficient.</p>
<p>Thank you again to <a href="https://ittybit.com/?ref=sam">ittybit</a> for sponsoring this
post.  I really couldn't have hoped for a more supportive first sponsor. Thank
you for believing in and understanding what I'm doing here.</p>
<p>Thank you to everyone who read this post and gave their feedback. You made this
post much better than I could have done on my own, and steered me away from
several paths that just weren't working.</p>
<p>If you want to tell me what you thought of this post by sending me an anonymous
message that goes directly to my phone, go to <a href="https://samwho.dev/ping">https://samwho.dev/ping</a>.</p>

    </main>
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Using eBPF to see through encryption without a proxy (243 pts)]]></title>
            <link>https://github.com/qpoint-io/qtap</link>
            <guid>43928118</guid>
            <pubDate>Thu, 08 May 2025 16:49:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/qpoint-io/qtap">https://github.com/qpoint-io/qtap</a>, See on <a href="https://news.ycombinator.com/item?id=43928118">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><br>
<themed-picture data-catalyst-inline="true"><picture>
  <source media="(prefers-color-scheme: dark)" srcset="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qtap-header-dark.svg">
  <source media="(prefers-color-scheme: light)" srcset="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qtap-header-light.svg">
  <img alt="Image showing the Qtap Header" src="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qtap-header-light.svg">
</picture></themed-picture>
<hr>
<p><a href="https://qpoint.io/qtap" rel="nofollow"><img alt="Link to Qpoint website" src="https://camo.githubusercontent.com/761e88df28cd202310de87e91e333bd6e860a5610e39ac1314bc79487c956b9e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f51706f696e742e696f2d677265793f7374796c653d666f722d7468652d6261646765266c696e6b3d687474707325334125324625324671706f696e742e696f266c6f676f3d646174613a696d6167652f737667253262786d6c3b6261736536342c5044393462577767646d567963326c76626a30694d5334774969426c626d4e765a476c755a7a3069565652474c546769507a344b50484e325a7942705a443069544746355a584a664d69496765473173626e4d39496d6830644841364c79393364336375647a4d7562334a6e4c7a49774d44417663335a6e4969423261575633516d393450534977494441674e6a63754d5467674e6a63754d7a516950676f674944786b5a575a7a50676f674943416750484e306557786c50676f6749434167494341755932787a4c54456765776f67494341674943416749475a706247773649434d344f5456685a54673743694167494341674948304b4943416749447776633352356247552b436941675043396b5a575a7a50676f674944786e49476c6b50534a7459576c75496a344b494341674944786e50676f674943416749434138634746306143426a6247467a637a30695932787a4c54456949475139496b30324e4334784d5377324e79347a4e474d744c6a637a4c4441744d5334304e6930754d6a67744d6934774d6930754f4452734c5445754f5463744d5334354e324d744d5334784d5330784c6a45794c5445754d5445744d6934354d6977774c5451754d4451734d5334784d6930784c6a45784c4449754f5449744d5334784d6977304c6a41304c4442734d5334354e7977784c6a6b33597a45754d5445734d5334784d6977784c6a45784c4449754f5449734d4377304c6a41304c5334314e6934314e6930784c6a49354c6a67304c5449754d4449754f4452614969382b4369416749434167494478775958526f49474e7359584e7a50534a6a62484d744d5349675a44306954544d7a4c6a55354c4442444d5455754d4451734d4377774c4445314c6a41304c4441734d7a4d754e546c7a4d5455754d4451734d7a4d754e546b734d7a4d754e546b734d7a4d754e546b734d7a4d754e546b744d5455754d4451734d7a4d754e546b744d7a4d754e546c544e5449754d5451734d43777a4d7934314f537777576b30314d7934334f5377314e4334784e324d744c6a55324c6a55324c5445754d6a6b754f4451744d6934774d6934344e484d744d5334304e6930754d6a67744d6934774d6930754f4452734c5467754d7a45744f43347a4d574d744d5334784d6930784c6a45794c5445754d5449744d6934354d6977774c5451754d4451734d5334784d5330784c6a45794c4449754f544d744d5334784d6977304c6a41304c4442734f43347a4d5377344c6a4d78597a45754d5449734d5334784d6977784c6a45794c4449754f5449734d4377304c6a41305769497650676f67494341675043396e50676f67494477765a7a344b5043397a646d632b" data-canonical-src="https://img.shields.io/badge/Qpoint.io-grey?style=for-the-badge&amp;link=https%3A%2F%2Fqpoint.io&amp;logo=data:image/svg%2bxml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNjcuMTggNjcuMzQiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6ICM4OTVhZTg7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJtYWluIj4KICAgIDxnPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik02NC4xMSw2Ny4zNGMtLjczLDAtMS40Ni0uMjgtMi4wMi0uODRsLTEuOTctMS45N2MtMS4xMS0xLjEyLTEuMTEtMi45MiwwLTQuMDQsMS4xMi0xLjExLDIuOTItMS4xMiw0LjA0LDBsMS45NywxLjk3YzEuMTEsMS4xMiwxLjExLDIuOTIsMCw0LjA0LS41Ni41Ni0xLjI5Ljg0LTIuMDIuODRaIi8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTMzLjU5LDBDMTUuMDQsMCwwLDE1LjA0LDAsMzMuNTlzMTUuMDQsMzMuNTksMzMuNTksMzMuNTksMzMuNTktMTUuMDQsMzMuNTktMzMuNTlTNTIuMTQsMCwzMy41OSwwWk01My43OSw1NC4xN2MtLjU2LjU2LTEuMjkuODQtMi4wMi44NHMtMS40Ni0uMjgtMi4wMi0uODRsLTguMzEtOC4zMWMtMS4xMi0xLjEyLTEuMTItMi45MiwwLTQuMDQsMS4xMS0xLjEyLDIuOTMtMS4xMiw0LjA0LDBsOC4zMSw4LjMxYzEuMTIsMS4xMiwxLjEyLDIuOTIsMCw0LjA0WiIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+"></a>&nbsp;
    <a href="https://docs.qpoint.io/qtap" rel="nofollow"><img alt="Link to documentation" src="https://camo.githubusercontent.com/5e04be3edc76ab20d16944e522168b4b58fc874699dbb604b375d1acac453368/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f446f63756d656e746174696f6e2d677265793f7374796c653d666f722d7468652d6261646765266c6f676f3d72656164746865646f6373266c6f676f436f6c6f723d253233464646464646266c696e6b3d6874747073253341253246253246646f63732e71706f696e742e696f2f71746170" data-canonical-src="https://img.shields.io/badge/Documentation-grey?style=for-the-badge&amp;logo=readthedocs&amp;logoColor=%23FFFFFF&amp;link=https%3A%2F%2Fdocs.qpoint.io/qtap"></a>&nbsp;
    <a href="https://github.com/qpoint-io/qtap/stargazers"><img alt="GitHub Repo stars" src="https://camo.githubusercontent.com/0a6b647ee74bad5574014e9beec93ccaaa703adae6b5873dcacc1737bff85f2e/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f71706f696e742d696f2f717461703f7374796c653d666f722d7468652d626164676526636f6c6f723d253233653865383561" data-canonical-src="https://img.shields.io/github/stars/qpoint-io/qtap?style=for-the-badge&amp;color=%23e8e85a"></a>&nbsp;
    <a href="https://github.com/qpoint-io/qtap/actions/workflows/ci.yaml?query=branch%3Amain"><img alt="GitHub main branch check runs" src="https://camo.githubusercontent.com/5fb3c86105d4b09ae796deb15ae197ca8c69ea3b2dca37ae19d7dc9a0eee2a3c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636865636b2d72756e732f71706f696e742d696f2f717461702f6d61696e3f7374796c653d666f722d7468652d6261646765" data-canonical-src="https://img.shields.io/github/check-runs/qpoint-io/qtap/main?style=for-the-badge"></a>&nbsp;
    <a href="https://github.com/qpoint-io/qtap/blob/main/LICENSE"><img alt="GitHub License" src="https://camo.githubusercontent.com/24a4e221d3b340e77130682cb2efc2a490307268042f5b368084dda5bcab60c7/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f71706f696e742d696f2f717461703f7374796c653d666f722d7468652d6261646765" data-canonical-src="https://img.shields.io/github/license/qpoint-io/qtap?style=for-the-badge"></a>
</p>

<p dir="auto">An eBPF agent that captures traffic flowing through the Linux kernel. By attaching to TLS/SSL functions, data is intercepted before and after encryption and then passed to flexible plugins with full visibility along with all of the available context - process/container/host/user/protocol/etc. Qtap makes it possible to understand what's happening with your egress traffic, without modifying apps, installing proxies, or managing certs.</p>

<p dir="auto">Qtap shows you exactly what data is being sent and received in its original, unencrypted form while operating out-of-band with minimal overhead, without adding latency or disrupting application performance.</p>
<br>
<themed-picture data-catalyst-inline="true"><picture>
  <source media="(prefers-color-scheme: dark)" srcset="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qtap-overview-dark.svg">
  <source media="(prefers-color-scheme: light)" srcset="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qtap-overview-light.svg">
  <img alt="Image showing an architectual overview of Qtap" src="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qtap-overview-light.svg">
</picture></themed-picture>
<p dir="auto">Qtap can augment your existing observability piplines or can be used as a foundational component for a custom solution, like <a href="https://www.qpoint.io/qtap" rel="nofollow">Qpoint</a>, in a variety of ways, including:</p>
<ul dir="auto">
<li><strong>Security auditing</strong> - Security professionals can verify sensitive data isn't being unintentionally exposed in network communications.</li>
<li><strong>Debugging network issues</strong> - When APIs return errors or connections fail, seeing the actual data being sent helps identify misconfigured parameters, malformed requests, or unexpected responses.</li>
<li><strong>API development</strong> - Developers can verify their applications are sending correctly formatted requests and properly handling responses without modifying code.</li>
<li><strong>Troubleshooting third-party integrations</strong> - When integrating with external services, Qtap helps confirm what data is actually being exchanged versus what documentation claims.</li>
<li><strong>Learning and exploration</strong> - Understanding how protocols actually work by observing real traffic between applications and services.</li>
<li><strong>Legacy system investigation</strong> - When working with poorly documented or legacy systems, Qtap provides insights into how they communicate without requiring source code access.</li>
<li><strong>Validation testing</strong> - Confirming that application changes don't unexpectedly alter network communication patterns.</li>
</ul>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/qpoint-io/qtap/blob/main/.github/assets/qtap_demo.gif"><img src="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qtap_demo.gif" alt="Qtap Demo" data-animated-image=""></a></p>
<p dir="auto">For more information <a href="https://docs.qpoint.io/readme/how-it-works" rel="nofollow">see the "How It Works" section of our website</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Quick Start</h2><a id="user-content-quick-start" aria-label="Permalink: Quick Start" href="#quick-start"></a></p>
<p dir="auto">Want to give Qtap a test run? Spin up a temporary instance in Demo mode! See the traffic in real time right in your terminal.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Run Qtap in demo mode
$ curl -s https://get.qpoint.io/demo | sudo sh"><pre><span><span>#</span> Run Qtap in demo mode</span>
$ curl -s https://get.qpoint.io/demo <span>|</span> sudo sh</pre></div>
<p dir="auto">Or install and start running right away!</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Install the Qtap agent
$ curl -s https://get.qpoint.io/install | sudo sh

# Run with defaults!
$ sudo qtap"><pre><span><span>#</span> Install the Qtap agent</span>
$ curl -s https://get.qpoint.io/install <span>|</span> sudo sh

<span><span>#</span> Run with defaults!</span>
$ sudo qtap</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Community</h2><a id="user-content-community" aria-label="Permalink: Community" href="#community"></a></p>
<p dir="auto">Converse with Qpoint devs and the contributors in <a href="https://github.com/qpoint-io/qtap/discussions">Github Discussions</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Requirements</h2><a id="user-content-requirements" aria-label="Permalink: Requirements" href="#requirements"></a></p>
<ul dir="auto">
<li>Linux with Kernel 5.10+ with <a href="https://www.kernel.org/doc/html/latest/bpf/btf.html" rel="nofollow">BPF Type Format (BTF)</a> enabled. You can check if your kernel has BTF enabled by verifying if <code>/sys/kernel/btf/vmlinux</code> exists on your system.</li>
<li>eBPF enabled on the host.</li>
<li>Elevated permissions on the host or within the Docker container running the agent:
<ul dir="auto">
<li>on host run with <code>sudo</code></li>
<li>within docker it's best to run with <code>CAP_BPF</code>, host pids, and privileged. For example:</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="docker run \
    --user 0:0 \
    --privileged \
    --cap-add CAP_BPF \
    --cap-add CAP_SYS_ADMIN \
    --pid=host \
    --network=host \
    -v /sys:/sys \
    --ulimit=memlock=-1 \
    us-docker.pkg.dev/qpoint-edge/public/qpoint:v0 \
    tap \
    --log-level=info"><pre>docker run \
    --user 0:0 \
    --privileged \
    --cap-add CAP_BPF \
    --cap-add CAP_SYS_ADMIN \
    --pid=host \
    --network=host \
    -v /sys:/sys \
    --ulimit=memlock=-1 \
    us-docker.pkg.dev/qpoint-edge/public/qpoint:v0 \
    tap \
    --log-level=info</pre></div>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Development</h2><a id="user-content-development" aria-label="Permalink: Development" href="#development"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Prerequisites</h3><a id="user-content-prerequisites" aria-label="Permalink: Prerequisites" href="#prerequisites"></a></p>
<p dir="auto"><h4 tabindex="-1" dir="auto">OS</h4><a id="user-content-os" aria-label="Permalink: OS" href="#os"></a></p>
<ul dir="auto">
<li>linux (kernel 5.8+)
<ul dir="auto">
<li>MacOS developers at Qpoint have enjoyed using <a href="https://lima-vm.io/" rel="nofollow">Lima</a> as a quick, easy linux VM for development.</li>
</ul>
</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto">Tools:</h4><a id="user-content-tools" aria-label="Permalink: Tools:" href="#tools"></a></p>
<ul dir="auto">
<li>go1.24+</li>
<li>make</li>
<li>clang14</li>
<li>clang-tidy (optional/recommended)</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Quick Start</h3><a id="user-content-quick-start-1" aria-label="Permalink: Quick Start" href="#quick-start-1"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ git clone https://github.com/qpoint-io/qtap.git
$ cd agent/
$ make build"><pre>$ git clone https://github.com/qpoint-io/qtap.git
$ <span>cd</span> agent/
$ make build</pre></div>
<p dir="auto"><h4 tabindex="-1" dir="auto">Popular <code>Makefile</code> targets</h4><a id="user-content-popular-makefile-targets" aria-label="Permalink: Popular Makefile targets" href="#popular-makefile-targets"></a></p>
<p dir="auto">These are the most commonly used targets by Qpoint devs:</p>
<ul dir="auto">
<li><code>build</code> - generates the eBPF binaries and builds the Go application</li>
<li><code>generate</code> - generates the eBPF binaries</li>
<li><code>run</code> - runs a debug instance of the Qtap</li>
<li><code>ci</code> - runs all of the ci checks (nice to use before pushing code)</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Project Status</h2><a id="user-content-project-status" aria-label="Permalink: Project Status" href="#project-status"></a></p>
<p dir="auto">This project is currently in early development. We're excited to share our work with the community and welcome your feedback! While we're actively improving things, please note that:</p>
<ul dir="auto">
<li>Some APIs may change as we refine our approach</li>
<li>Documentation might be incomplete in places</li>
<li>There may be rough edges we haven't smoothed out yet</li>
</ul>
<p dir="auto">We welcome contributions through GitHub issues and appreciate your understanding that we're a small team balancing multiple priorities. We value constructive feedback that helps us make this project better.</p>
<p dir="auto">Thank you for checking out our work!</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Contributing</h2><a id="user-content-contributing" aria-label="Permalink: Contributing" href="#contributing"></a></p>
<p dir="auto">By submitting contributions to this project, you agree to the <a href="https://github.com/qpoint-io/qtap/blob/main/.github/CLA.md">Contributor License Agreement</a>. This agreement allows us to include your contributions in both the open source and commercial versions.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Licensing</h2><a id="user-content-licensing" aria-label="Permalink: Licensing" href="#licensing"></a></p>
<p dir="auto">This project is dual-licensed under AGPLv3.0 (for open source use) and a commercial license (for commercial use).</p>
<div dir="auto">
    <themed-picture data-catalyst-inline="true"><picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qpoint-open.svg">
    <source media="(prefers-color-scheme: light)" srcset="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qpoint-open-light.svg">
    <img alt="Image showing 'Qpoint ❤ OpenSource'" src="https://github.com/qpoint-io/qtap/raw/main/.github/assets/qpoint-open-light.svg">
    </picture></themed-picture>
</div>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Void: Open-source Cursor alternative (825 pts)]]></title>
            <link>https://github.com/voideditor/void</link>
            <guid>43927926</guid>
            <pubDate>Thu, 08 May 2025 16:35:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/voideditor/void">https://github.com/voideditor/void</a>, See on <a href="https://news.ycombinator.com/item?id=43927926">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-turbo-body="">
      



    <div>
      <p><a href="#start-of-content" data-skip-target-assigned="false">Skip to content</a>

      <span data-view-component="true">
    <span data-view-component="true"></span>
</span></p>


<react-partial partial-name="keyboard-shortcuts-dialog" data-ssr="false" data-attempted-ssr="false">
  
  
  
</react-partial>




      

          

              


<header role="banner" data-is-top="true" data-color-mode="light" data-light-theme="light" data-dark-theme="dark">
  <h2>Navigation Menu</h2>

  

  <div>
          <nav aria-label="Global">
            <ul>
                <li>
      
      <div>
                <ul>
                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;github_copilot&quot;,&quot;context&quot;:&quot;product&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;github_copilot_link_product_navbar&quot;}" href="https://github.com/features/copilot">
      
      <div>
        <p>GitHub Copilot</p><p>
        Write better code with AI
      </p></div>

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;github_advanced_security&quot;,&quot;context&quot;:&quot;product&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;github_advanced_security_link_product_navbar&quot;}" href="https://github.com/security/advanced-security">
      
      <div>
        <p>GitHub Advanced Security</p><p>
        Find and fix vulnerabilities
      </p></div>

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;actions&quot;,&quot;context&quot;:&quot;product&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;actions_link_product_navbar&quot;}" href="https://github.com/features/actions">
      
      <div>
        <p>Actions</p><p>
        Automate any workflow
      </p></div>

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;codespaces&quot;,&quot;context&quot;:&quot;product&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;codespaces_link_product_navbar&quot;}" href="https://github.com/features/codespaces">
      
      <div>
        <p>Codespaces</p><p>
        Instant dev environments
      </p></div>

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;issues&quot;,&quot;context&quot;:&quot;product&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;issues_link_product_navbar&quot;}" href="https://github.com/features/issues">
      
      <div>
        <p>Issues</p><p>
        Plan and track work
      </p></div>

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;code_review&quot;,&quot;context&quot;:&quot;product&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;code_review_link_product_navbar&quot;}" href="https://github.com/features/code-review">
      
      <div>
        <p>Code Review</p><p>
        Manage code changes
      </p></div>

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;discussions&quot;,&quot;context&quot;:&quot;product&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;discussions_link_product_navbar&quot;}" href="https://github.com/features/discussions">
      
      <div>
        <p>Discussions</p><p>
        Collaborate outside of code
      </p></div>

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;code_search&quot;,&quot;context&quot;:&quot;product&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;code_search_link_product_navbar&quot;}" href="https://github.com/features/code-search">
      
      <div>
        <p>Code Search</p><p>
        Find more, search less
      </p></div>

    
</a></li>

                </ul>
              </div>
</li>


                <li>
      
      
</li>


                <li>
      
      <div>
                    <p><span id="resources-explore-heading">Explore</span></p><ul aria-labelledby="resources-explore-heading">
                    <li>
  <a target="_blank" data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;learning_pathways&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;learning_pathways_link_resources_navbar&quot;}" href="https://resources.github.com/learn/pathways">
      Learning Pathways

    
</a></li>

                    <li>
  <a target="_blank" data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;events_amp_webinars&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;events_amp_webinars_link_resources_navbar&quot;}" href="https://resources.github.com/">
      Events &amp; Webinars

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;ebooks_amp_whitepapers&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;ebooks_amp_whitepapers_link_resources_navbar&quot;}" href="https://github.com/resources/whitepapers">
      Ebooks &amp; Whitepapers

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;customer_stories&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;customer_stories_link_resources_navbar&quot;}" href="https://github.com/customer-stories">
      Customer Stories

    
</a></li>

                    <li>
  <a target="_blank" data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;partners&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;partners_link_resources_navbar&quot;}" href="https://partner.github.com/">
      Partners

    
</a></li>

                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;executive_insights&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;executive_insights_link_resources_navbar&quot;}" href="https://github.com/solutions/executive-insights">
      Executive Insights

    
</a></li>

                </ul>
              </div>
</li>


                <li>
      
      <div>
              <div>
                <ul>
                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;github_sponsors&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;github_sponsors_link_open_source_navbar&quot;}" href="https://github.com/sponsors">
      
      <div>
        <p>GitHub Sponsors</p><p>
        Fund open source developers
      </p></div>

    
</a></li>

                </ul>
              </div>
              <div>
                <ul>
                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;the_readme_project&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;the_readme_project_link_open_source_navbar&quot;}" href="https://github.com/readme">
      
      <div>
        <p>The ReadME Project</p><p>
        GitHub community articles
      </p></div>

    
</a></li>

                </ul>
              </div>
              
          </div>
</li>


                <li>
      
      <div>
                <ul>
                    <li>
  <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;enterprise_platform&quot;,&quot;context&quot;:&quot;enterprise&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;enterprise_platform_link_enterprise_navbar&quot;}" href="https://github.com/enterprise">
      
      <div>
        <p>Enterprise platform</p><p>
        AI-powered developer platform
      </p></div>

    
</a></li>

                </ul>
              </div>
</li>


                <li>
    <a data-analytics-event="{&quot;location&quot;:&quot;navbar&quot;,&quot;action&quot;:&quot;pricing&quot;,&quot;context&quot;:&quot;global&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;pricing_link_global_navbar&quot;}" href="https://github.com/pricing">Pricing</a>
</li>

            </ul>
          </nav>

        <div>
                


<qbsearch-input data-scope="repo:voideditor/void" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="KOsSNF2zAgbAJtJVxif26ABQ4s9skh8_H69p_u_uipq_v0xyxPX_mNV4M_5_iwWEC84JeL0FMKJ3ZN482XmL2g" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="voideditor/void" data-current-org="voideditor" data-current-owner="" data-logged-in="false" data-copilot-chat-enabled="false" data-nl-search-enabled="false" data-retain-scroll-position="true">
  <div data-modal-dialog-overlay="" data-action="click:qbsearch-input#searchInputContainerClicked">
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true">
      <h2 id="search-suggestions-dialog-header">Search code, repositories, users, issues, pull requests...</h2>
    
</modal-dialog></div>
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
        
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>


            

              <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&amp;source=header-repo&amp;source_repo=voideditor%2Fvoid" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/voideditor/void&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="f38f589a8608bec0358d2913427ba31b288304c54f2fee3de024369022c91ae4" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>;ref_cta:Sign up;ref_loc:header logged out&quot;}">
                Sign up
              </a>

              
          
        </p></div>
      </div>
</header>

      
    </div>

  








    


    






  <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" data-commit-hovercards-enabled="" data-discussion-hovercards-enabled="" data-issue-and-pr-hovercards-enabled="" data-project-hovercards-enabled="">
    <main id="js-repo-pjax-container">
      
  





    
    

    






  
  

  



<turbo-frame id="repo-content-turbo-frame" target="_top" data-turbo-action="advance">
    <div data-view-component="true" id="repo-content-pjax-container">      











<react-partial partial-name="repos-overview" data-ssr="true" data-attempted-ssr="true">
  
  
  <div data-hpc="true" data-target="react-partial.reactRoot"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">Welcome to Void.</h2><a id="user-content-welcome-to-void" aria-label="Permalink: Welcome to Void." href="#welcome-to-void"></a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/voideditor/void/blob/main/src/vs/workbench/browser/parts/editor/media/slice_of_void.png"><img src="https://github.com/voideditor/void/raw/main/src/vs/workbench/browser/parts/editor/media/slice_of_void.png" alt="Void Welcome" width="300" height="300"></a>
</p>
<p dir="auto">Void is the open-source Cursor alternative.</p>
<p dir="auto">This repo contains the full sourcecode for Void. If you're new, welcome!</p>
<ul dir="auto">
<li>
<p dir="auto">👋 <a href="https://discord.gg/RSNjgaugJs" rel="nofollow">Discord</a></p>
</li>
<li>
<p dir="auto">🔨 <a href="https://github.com/voideditor/void/blob/main/HOW_TO_CONTRIBUTE.md">Contribute</a></p>
</li>
<li>
<p dir="auto">🚙 <a href="https://github.com/orgs/voideditor/projects/2">Roadmap</a></p>
</li>
<li>
<p dir="auto">📝 <a href="https://voideditor.com/changelog" rel="nofollow">Changelog</a></p>
</li>
<li>
<p dir="auto">🧭 <a href="https://github.com/voideditor/void/blob/main/VOID_CODEBASE_GUIDE.md">Codebase Guide</a></p>
</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Contributing</h2><a id="user-content-contributing" aria-label="Permalink: Contributing" href="#contributing"></a></p>
<ol dir="auto">
<li>
<p dir="auto">To get started working on Void, see <a href="https://github.com/voideditor/void/blob/main/HOW_TO_CONTRIBUTE.md"><code>HOW_TO_CONTRIBUTE</code></a>.</p>
</li>
<li>
<p dir="auto">Feel free to attend a weekly meeting in our Discord channel!</p>
</li>
<li>
<p dir="auto">We're open to collaborations and suggestions of all types - just reach out.</p>
</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Reference</h2><a id="user-content-reference" aria-label="Permalink: Reference" href="#reference"></a></p>
<p dir="auto"><a href="https://voideditor.com/" rel="nofollow">Void</a> is a fork of the <a href="https://github.com/microsoft/vscode">vscode</a> repository. For a guide to the codebase, see <a href="https://github.com/voideditor/void/blob/main/VOID_CODEBASE_GUIDE.md"><code>VOID_CODEBASE_GUIDE</code></a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Support</h2><a id="user-content-support" aria-label="Permalink: Support" href="#support"></a></p>
<p dir="auto">You can always reach us in our Discord server or contact us via email: <a href="mailto:hello@voideditor.com">hello@voideditor.com</a>.</p>
</article></div>
</react-partial>

      </div>

</turbo-frame>


    </main>
  </div>

          



    <ghcc-consent id="ghcc" data-initial-cookie-consent-allowed="" data-cookie-consent-required="true"></ghcc-consent>



  

    <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default color-fg-default hx_rsm" open="">
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog="">
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

    

    <template id="snippet-clipboard-copy-button">
  <div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>
<template id="snippet-clipboard-copy-button-unpositioned">
  <div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>




    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Notes on rolling out Cursor and Claude Code (182 pts)]]></title>
            <link>https://ghiculescu.substack.com/p/nobody-codes-here-anymore</link>
            <guid>43927914</guid>
            <pubDate>Thu, 08 May 2025 16:34:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ghiculescu.substack.com/p/nobody-codes-here-anymore">https://ghiculescu.substack.com/p/nobody-codes-here-anymore</a>, See on <a href="https://news.ycombinator.com/item?id=43927914">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><span>There is plenty of commentary online about how AI will replace coding as we know it in the future. There’s huge amounts of prediction about what the future holds.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-1-162309066" href="https://ghiculescu.substack.com/p/nobody-codes-here-anymore#footnote-1-162309066" target="_self" rel="">1</a></span><span> But I haven’t come across many case studies of rolling out the tools that exist today. So here’s some observations.</span></p><p>For context: SaaS product. Ruby on Rails. Mature (12 years) codebase, in good condition. About 40 developers.</p><p><span>We’ve given every developer the option to buy </span><a href="https://www.cursor.com/en" rel="">Cursor</a><span> or </span><a href="https://www.anthropic.com/solutions/coding" rel="">Claude Code</a><span>. (I’ll refer to these as Agents for the rest of this article.) If someone wanted to buy another agentic tool that isn’t one of those we’d probably say yes if the price was similar. In a recent informal survey I did, 8 people answered yes to “I use Cursor/Claude Code for most (or all) of my coding”, and 11 to “I alternate between using them and not using them based on the task, it averages out to about 50% of the time”.</span></p><p>I use Claude Code and don’t really like Cursor. The main reason for that is I’m obsessed with Sublime Text as my editor. So having to change to another editor is basically a deal breaker for me. Most other people are more sane, and thus Cursor adoption has been slightly higher than Claude.</p><p><span>They also different things. Claude (particularly with the newest models) likes to write entire features for you, and can sometimes get a bit carried away. </span><a href="https://www.anthropic.com/engineering/claude-code-best-practices" rel="">Anthropic’s best practices guide</a><span> is a goldmine, and one great suggestion it made that I’ve successfully adopted is asking Claude to make a plan before writing any code, and then telling it to write the code. </span></p><p>By contrast, Cursor (from what I’ve seen) seems to be content making smaller and more self contained changes. It seems less likely to try and write the entire thing and commit it without your consent. Conversely, it seems less capable of doing ambitious one shot prompts.</p><p>In the future, a “senior engineer” might be someone who knows the right agent to use for the given task.</p><p>It’s the question everyone is asking. And to be honest it’s hard to give a totally objective answer. How did you mention developer productivity before agents?</p><p>That said if forced to pick a number I would say I’m about 20% more productive thanks to agents. But there’s a massive grain of salt there. Agents are really helpful for some things, and barely helpful at all for others, so right now it is all about incorporating them into your workflow where it makes sense.</p><p>Some people online who are against agentic coding argue that with a junior developer you can teach them stuff and so they gradually improve over time. But the same can’t be said for agents, they are always going to be as smart as they are today, so if they are as good as a junior dev now they’ll always be only that good. Presumably this applies to domain specific stuff, since LLMs already know all the generic stuff in the world. Regardless, it’s nonsense, and is easily disproven by two observations:</p><ol><li><p>Using agents well changes how you structure your codebase in a way that makes them more able to work with it over time, ie. they get smarter.</p></li><li><p>The quality of LLMs is improving often. The other week ChatGPT added a feature where it remembers everything you’ve ever said to it and incorporates that into context, which sounds a lot to me like a junior picking up domain knowledge and building on it.</p></li></ol><p>So far the biggest limiting factor is remembering to use it. Even people I consider power users (based on their Claude token usage) agree with the sentiment that sometimes you just forget to ask Claude to do a task for you, and end up doing it manually. Sometimes you only notice that Claude could have done it, once you are finished. This happens to me an embarrassing amount.</p><p>I suspect this is less of an issue for Cursor users because it’s always there in your editor, while Claude Code lives in your terminal.</p><p>We have found agents work really well for increasing the ambition of code that gets written. This can mean a few different things:</p><ul><li><p>Our head of product is a reformed lawyer who taught himself to code while working here. He’s shipped 150 PRs in the last 12 months.</p></li><li><p>The product manager he sits next to has shipped 130 PRs in the last 12 months. When we look for easy wins and small tasks for new starters, it’s harder now, because he’s always got an agent chewing through those in the background.</p></li><li><p>We built a new product for a new region with a single developer working solo (with the help of Claude). Previously we did this slower, with teams of people. Those teams are adopting Claude now too, but using it from the start and getting good at using it really helps.</p></li><li><p>I’m sure everyone comes across feature ideas that sound cool but it’s not obvious right now where to start. Like a coding writers block. Turns out typing a prompt is a lot easier than typing the code and it is a great way to unblock and get started on ideas you wouldn’t otherwise try.</p></li></ul><p>Agents are extremely good at helping you understand parts of the codebase you haven’t seen before - just ask them - and I suspect that’s helping a lot here.</p><p>A few times now we’ve tried to connect agents to Linear or Sentry to try and get automatic draft PRs for bug fixing. So far the results have been mixed.</p><p>All you are really doing here is hoping that the Linear ticket (or context in Sentry issue) is enough that the agent can work out the bug and fix it. In other words you’re hoping the ticket works as well as a one shot prompt that a developer would write. Sometimes this happens, and if it does it’s very impressive.</p><p>More often it doesn’t. The issue I’ve found is that in many cases the proposed fix is incorrect, but in a subtle way, where if you don’t know the codebase you’re looking at (or don’t think about it critically enough) you’ll be led astray. It’s easy to see a draft PR with all tests passing, including new tests full of comments, and not realise that the tests are garbage and the fix is wrong. This is less likely to happen if you have taken time to think about the feature &amp; scope beforehand, but much more likely if you see a bug report and a green draft PR ready to go alongside it.</p><p>For this reason we have avoided pushing automatic draft PRs.</p><p>Claude Code is incredibly good at refactors. Particularly if the refactors involve frontend code.</p><p><span>A recent example was to convert a set of screens built into React into our new design system, that’s built on Hotwire and is all rendered serverside. Using </span><a href="https://gist.github.com/ghiculescu/fa28b988c64e4ca9bc442dbd1d976858" rel="">this prompt</a><span> Claude Code came up with an almost right plan. I made a few tweaks and then asked it to write the code, which it did correctly.</span></p><p>It missed a few client side validations that we only found while testing, which is to say that it’s important to still test. I think if I had explicitly asked it to ensure it included all these sorts of validations in my prompt it would have.</p><p>Doing the refactor by hand would have taken me a few hours, so realistically using the agent probably saved me an hour. But it would have been boooooring. Knowing how boring it would be, I’d been putting off doing it forever, even though it was something I really wanted to see done. Agents are underrated for quickly getting through chores.</p><p>Agents work great at doing straightforward tasks using straightforward parts of well documented frameworks.</p><p>You have to be careful with more complex tasks that are below the surface level, where you could get a wide variety of architectures come back and you need to be critical about getting the best one.</p><p><span>For example, I asked an agent to help me ensure that a specific operation could only happen once at any time. I suggested it used locking. It came back with a custom built Redis locking mechanism. After a nudge, it suggested using the Rails cache. After another nudge, a manually executed Postgres advisory lock. After another nudge, it finally settled on Rails’ </span><code>with_lock</code><span> method. Had I not been thinking critically it would have had me introduce new dependencies to solve a problem where tools to fix it were built into the framework.</span></p><p><span>Cursor has a </span><a href="https://www.cursor.com/pricing" rel="">fixed price</a><span>. I suspect they are thinking about pricing the way gyms do: if everyone used Cursor as much as they allow you to, they’d go out of business. But in practice most people use a lot less tokens than they are paying for.</span></p><p>You can see this in practice when you use Claude Code, which is pay-per-token. Our heaviest users are using $50/month of tokens. That’s a lot of tokens.</p><p>I asked our CFO and he said he’d be happy to spend $100/dev/month on agents. To get 20% more productive that’s a bargain.</p><p><span>This critique may only make sense to sufficiently </span><a href="https://rubyonrails.org/doctrine" rel="">DHH-pilled</a><span> people, but so be it. I haven’t yet come across an agent that can write </span><em>beautiful</em><span> code.</span></p><p>That doesn’t mean it can’t write correct code, or (particularly if you prompt it right) succinct code. And it isn’t to say that all code needs to be beautiful. But in some cases the elegance of the code does matter because it says a lot about the elegance - and the quality - of the architecture. Agents still aren’t there in those cases.</p><p><span>The most common thing that makes agentic code ugly is the overuse of comments. I have tried </span><em>everything </em><span>I can think of and apart from prefacing every prompt with “Don’t write comments” I cannot find a way to get agents to not comment every line they write.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-2-162309066" href="https://ghiculescu.substack.com/p/nobody-codes-here-anymore#footnote-2-162309066" target="_self" rel="">2</a></span></p><p>In the worst case this means rewriting all the code the agent wrote. I still think this is worthwhile. Often writing the prompt and going back and forth will the agent will help you understand the issue better which will lead to you writing your architecture better. And they write code so quickly, it’s not like you’re wasting days before throwing it away and writing it yourself.</p><p>A related issue is that if everyone uses agents, individual coding styles are lost. When you’ve worked with someone for a while you can tell if they wrote some code just by reading it. That is lost when everything goes through an agent. I’m sure in 10 years time this will seem quaint, like mourning over the assembly that powers the C code that sits under Ruby. But for now it makes me a little bit sad sometimes.</p><p>We’ve done a few things to make the codebase easier for agents to reason with.</p><ul><li><p><span>Setting up </span><a href="https://docs.cursor.com/context/rules" rel="">Cursor rules</a><span> and </span><a href="https://docs.anthropic.com/en/docs/agents-and-tools/claude-code/overview#initialize-your-project" rel="">Claude.md</a><span>. These end up also holding great context for new teammates.</span></p></li><li><p>Making it easy to run tests with a single command. We used to do development &amp; run tests via docker over ssh. It was a good idea at the time. But fixing a few things so that we could run tests locally meant we could ask the agent to run (and fix!) tests after writing code.</p></li></ul><p><span>Many companies have issued mandates for using AI, some of which have </span><a href="https://x.com/tobi/status/1909251946235437514" rel="">leaked</a><span> </span><a href="https://www.capitalbrief.com/article/employment-hero-tracks-employees-in-push-for-ai-first-within-six-weeks-ec8e88ef-9415-4664-8b99-dd1280edf992/preview/" rel="">publicly</a><span>.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-3-162309066" href="https://ghiculescu.substack.com/p/nobody-codes-here-anymore#footnote-3-162309066" target="_self" rel="">3</a></span></p><p>We haven’t. That doesn’t mean I don’t expect people to try this stuff out, but I think forcing them to do it is silly. If the productivity gains are as significant as I suspect they are, than anyone who has their self interest (or the company’s interests, if they are so inclined) at heart will quickly pick up agentic coding.</p><p>It is a very exciting time to be in software development. I’ve written this a few times, but it’s really true, and every time I write it I then get more impressed with the quality of agentic coding.</p><p>Similar to being good at writing code, being good at using agents is not a binary thing. There’s a sliding scale of quality. In the future there will be 10x prompters just like today there’s 10x developers.</p><p>I think it’s worth trying to get really good at using agents to code, no matter where in your career you are. Even with agents, the hardest thing in programming remains working out what the software should do, and articulating it well. Bashing out the syntax continues to get easier.</p></div></article></div><div id="discussion"><h4>Discussion about this post</h4></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[First American pope elected and will be known as Pope Leo XIV (567 pts)]]></title>
            <link>https://www.cnn.com/world/live-news/new-pope-conclave-day-two-05-08-25</link>
            <guid>43927856</guid>
            <pubDate>Thu, 08 May 2025 16:30:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.cnn.com/world/live-news/new-pope-conclave-day-two-05-08-25">https://www.cnn.com/world/live-news/new-pope-conclave-day-two-05-08-25</a>, See on <a href="https://news.ycombinator.com/item?id=43927856">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      
      <section data-editable="top" data-track-zone="top" data-sticky-anchor-pos="bottom">  




  <div data-uri="cms.cnn.com/_components/headline/instances/cmaebydva000f25qm4w3k1puv@published" data-component-name="headline">
      <p>Live Updates</p>
    
      
    <h2 data-editable="headlineText" id="maincontent">
      First American pope elected and will be known as Pope Leo XIV
    </h2>

  </div>

  <div data-uri="cms.cnn.com/_components/live-story-lede/instances/cmaebydw0000p25qmel8123gu@published" data-component-name="live-story-lede" data-editable="items" data-fixed-ratio="16x9" data-parent-uri="cms.cnn.com/_components/video-resource/instances/cmafnjopk00003b6jlznl0mjs@published" data-video-id="me1c33729a17aa00de73853938a91a2b969b886abf" data-media-id="me1c33729a17aa00de73853938a91a2b969b886abf" data-live="" data-analytics-aggregate-events="true" data-custom-experience="" data-asset-type="hlsTs" data-auth-type="none" data-content-type="mediasource-clip" data-medium-env="" data-autostart="disabled" data-show-ads="true" data-source="CNN" data-featured-video="true" data-headline="Hear first American pope address the world" data-has-video-player="true" data-description="<p>Cardinal Robert Prevost, of the United States, has been elected as the 267th pope of the Catholic Church and the first American pontiff in history. He will be known as Leo XIV. In his speech, which he delivered in front of a roaring crowd, he called for the Church to “build bridges” and also paid tribute to the late Pope Francis.</p>" data-duration="11:16" data-source-html="<span class=&quot;video-resource__source&quot;> - Source:
            
                <a target=&quot;_self&quot; href=&quot;https://www.cnn.com/&quot; class=&quot;video-resource__source-url&quot;>CNN</a>
    </span>" data-fave-thumbnails="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/05-ap25128631820628.JPG?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/05-ap25128631820628.JPG?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-vr-video="false" data-show-html="<!-- unable to render partial show without a supplied context -->" data-byline-html="<div
  data-uri=&quot;cms.cnn.com/_components/byline/instances/cmafnjovl00023b6j3vswc1ri@published&quot;
  data-component-name=&quot;byline&quot;
  class=&quot;byline vossi-byline&quot;
  data-editable=&quot;settings&quot;
>
</div>" data-timestamp-html="<div
  class=&quot;timestamp vossi-timestamp&quot;
  data-uri=&quot;cms.cnn.com/_components/timestamp/instances/cmafnjovn00053b6jxgkahjsh@published&quot;
  data-editable=&quot;settings&quot;
>
    Updated
          2:23 PM EDT, Thu May 8, 2025
      </div>" data-check-event-based-preview="" data-is-vertical-video-embed="false" data-network-id="" data-publish-date="2025-05-08T17:55:50.517Z" data-video-section="world" data-canonical-url="https://www.cnn.com/2025/05/08/world/video/new-pope-robert-prevost-leo-xiv-speech-digvid" data-branding-key="" data-video-slug="new-pope-robert-prevost-leo-xiv-speech-digvid" data-first-publish-slug="new-pope-robert-prevost-leo-xiv-speech-digvid" data-video-tags="" data-breakpoints="{&quot;video-resource--media-extra-large&quot;: 660}" data-display-video-cover="true" data-details="" data-track-zone="live-story-lede" data-sticky-anchor-pos="bottom">
                    


<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/video-player/instances/cmafnjovr00063b6jf7rjjhjl@published" data-name="05_AP25128631820628.JPG" data-component-name="video-player" data-observe-resizes="" data-original-ratio="0.6666666666666666" data-original-height="1630" data-original-width="2445" data-url="https://media.cnn.com/api/v1/images/stellar/prod/05-ap25128631820628.JPG?c=original" data-unselectable="true" id="player-cms.cnn.com/_components/video-player/instances/cmafnjovr00063b6jf7rjjhjl@published" data-title="" data-show-ads="true" data-is-vertical-video-embed="false" data-custom-experience="" data-autostart="disabled" data-is-vertical-video="false" data-fixed-ratio="16x9" data-headline="Hear first American pope address the world" data-auth-type="none" data-video-resource-parent-uri="cms.cnn.com/_components/video-resource/instances/cmafnjopk00003b6jlznl0mjs@published" data-live="" data-content-type="mediasource-clip" data-video-resource-uri="cms.cnn.com/_components/video-resource/instances/cmafosjga00043b6n34tszxcr@published" data-poster-image-override="{&quot;big&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/05-ap25128631820628.JPG?c=16x9&amp;q=h_540,w_960,c_fill&quot; }, &quot;small&quot;: { &quot;uri&quot;: &quot;https://media.cnn.com/api/v1/images/stellar/prod/05-ap25128631820628.JPG?c=16x9&amp;q=h_540,w_960,c_fill&quot; }  }" data-video-id="me1c33729a17aa00de73853938a91a2b969b886abf" data-media-id="me1c33729a17aa00de73853938a91a2b969b886abf" data-duration="11:16" data-description="<p>Cardinal Robert Prevost, of the United States, has been elected as the 267th pope of the Catholic Church and the first American pontiff in history. He will be known as Leo XIV. In his speech, which he delivered in front of a roaring crowd, he called for the Church to “build bridges” and also paid tribute to the late Pope Francis.</p>" data-check-event-based-preview="" data-network-id="" data-publish-date="2025-05-08T17:55:50.517Z" data-video-section="world" data-canonical-url="https://www.cnn.com/2025/05/08/world/video/new-pope-robert-prevost-leo-xiv-speech-digvid" data-branding-key="" data-video-slug="new-pope-robert-prevost-leo-xiv-speech-digvid" data-first-publish-slug="new-pope-robert-prevost-leo-xiv-speech-digvid" data-video-tags="">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/05-ap25128631820628.JPG?c=16x9&amp;q=w_1280,c_fill" alt="Cardinal Robert Prevost appears on the central loggia of St. Peter's Basilica after being chosen the 267th pontiff of the Roman Catholic Church, choosing the name of Pope Leo XIV, at the Vatican, Thursday, May 8, 2025. (AP Photo/Alessandra Tarantino)" onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1630" width="2445"></picture>
    </div>

                    
                <div>
                    <p>Hear first American pope address the world
                </p>
                    <p><span>
                                11:16
                            </span>
                            <span> - Source:
            
                <a target="_self" href="https://www.cnn.com/">CNN</a>
    </span>
                    </p>
                </div>
                    <div>
                    <div>
                        <p>Hear first American pope address the world</p>
                    </div>
                    <p>11:16     <span>
    </span>
 </p>
                </div>
</div>

</section>
      
      <section>
        <section data-tabcontent="Content" data-editable="rail" data-track-zone="rail" data-analytics-collection="left-rail">
            <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:47:09 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmaebydw5000t25qm54zv9bpx@published" data-post-id="cmaebydw5000t25qm54zv9bpx" data-component-name="live-story-post" data-post-order-id="0">
    <div data-editable="content" data-reorderable-component="content">
                        <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafit4dz00053b6zbcl04ybm@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            • <strong>First American pope: </strong>Cardinal <a href="https://www.cnn.com/world/live-news/new-pope-conclave-day-two-05-08-25#cmafmfgo800263b6zth0xcnd7#cmafmfgo800263b6zth0xcnd7#cmafmfgo800263b6zth0xcnd7">Robert Prevost</a> of the United States has been selected as the next pope, the first American pontiff in history. He will be known as Pope Leo XIV. In his first remarks as pope from the balcony of St. Peter’s Basilica, he <a href="https://www.cnn.com/world/live-news/new-pope-conclave-day-two-05-08-25#cmafmp2qq002e3b6zhqm2x71l">called for peace</a> and <a href="https://www.cnn.com/world/live-news/new-pope-conclave-day-two-05-08-25#cmafn4g8a00003b6odtm0lmd3">paid tribute to the late Pope Francis</a> to a roaring crowd.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafkbf66000g3b6z6ln4o7dx@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            • <strong>About the new pope:</strong> Prevost, a 69-year-old from Chicago, is <a href="https://www.cnn.com/world/live-news/new-pope-conclave-day-two-05-08-25#cmafmfgo800263b6zth0xcnd7">a leader with global experience.</a> He spent much of his career as a missionary in South America <a href="https://www.cnn.com/world/live-news/new-pope-conclave-day-two-05-08-25#cmafn2z36002o3b6za8t0rl7m">and served as bishop in Peru. </a>He most recently led a powerful Vatican office for bishop appointments. He is expected to build on Pope Francis’ reforms.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafkb9ds000d3b6zjdzals7k@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            • <strong>What it took to get elected</strong>: There were 133 voting cardinals and any one of them needed two-thirds of the vote to become the next pope. <a href="https://www.cnn.com/2025/05/08/europe/new-pope-conclave-white-smoke-vatican-intl">White smoke billowed above the Sistine Chapel</a> earlier this afternoon signaling the selection of a new pontiff. <a href="https://www.cnn.com/2025/04/28/world/conclave-pope-selection-intl-dg">Take a look at how the voting process worked</a>.
    </p>

            </div>
</article>

        </section>

        <section data-editable="main" data-track-zone="main" data-reorderable="main">
              <article data-uri="cms.cnn.com/_components/live-story/instances/cmaebydwq001325qma4xzfjs5@published" data-deep-link-id="" data-drag-disable="true" data-site="cnn" data-post-text-plural="Posts" data-post-text-single="Post" data-redpill-text-single="New Update" data-redpill-text-plural="New Updates" data-deeplink-text-single="Newer Post" data-deeplink-text-plural="Newer Posts" data-show-paywall="true" data-enable-livestory-paywall="true">
  <div data-editable="items" data-reorderable-component="items" data-tabcontent="Content">
              <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 18:23:01 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafnpccc00003b766ey9yufq@published" data-post-id="cmafnpccc00003b766ey9yufq" data-component-name="live-story-post" data-post-order-id="0">
    <div data-editable="content" data-reorderable-component="content">
                      

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafogz7i00083b76fufvo4d2@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Leo is now tied for the fourth most common name chosen by popes, along with Clement. Only John, Gregory and Benedict have proven more popular.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafogz7i00093b76ddsvtqwp@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            But we haven’t had a Pope Leo in more than a century.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafogz7i000a3b76ea2c4xxc@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The last Pope Leo was Leo XIII, who was born in French-occupied Rome in 1810. He served as pope from 1878 until his death in 1903, making his 25-year papacy the fourth longest in the church’s history.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafogz7i000b3b76gqopbl6y@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Leo XIII is remembered as a pope of Catholic social teaching. He wrote a famous open letter in 1891, reflecting on the technological changes wrought by the Industrial Revolution and its impact on workers.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafokjh7000g3b76uuq70r2t@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
             In choosing to revive the name, Leo XIV may be signaling the priorities for his papacy.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafogz7i000c3b767h2i4nl2@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The first Pope Leo, who served in the fifth century, is known as “Leo the Great,” and is remembered for persuading Attila the Hun to halt his invasion and spare the Roman Empire from destruction.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafogz7i000d3b76vx9ia54q@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Their meeting was captured in a painting by Raphael, which is now displayed in the Vatican’s Apostolic Palace, which the 133 voting cardinals — including Robert Prevost, now Leo XIV — passed through as they proceeded into the Sistine Chapel on Wednesday for the start of the conclave.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafogz7i000e3b7679pusdl5@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The name Leo derives from the Latin for “lion,” suggesting strength and courage.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafogz7i000f3b76by048om6@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            In his address from the balcony of St. Peter’s Basilica, Leo XIV said the church can still hear “the weak but always courageous voice of Pope Francis,” his predecessor.
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 18:13:21 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafnc44w000o3b6y1rrwbuey@published" data-post-id="cmafnc44w000o3b6y1rrwbuey" data-component-name="live-story-post" data-post-order-id="1">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafomjcw00053b6ny4u5gc6w@published" data-name="AP25125453012227.jpg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6672" data-original-height="1668" data-original-width="2500" data-url="https://media.cnn.com/api/v1/images/stellar/prod/ap25125453012227.jpg?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/ap25125453012227.jpg?c=original&amp;q=w_1280,c_fill" alt="Cardinal Robert Francis Prevost, Prefect of the Dicastery for Bishops, now Pope Leo XIV, poses for a photo at the end of the consistory where Pope Francis elevated 21 new cardinals in St. Peter's Square at The Vatican, on September 30, 2023." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1668" width="2500" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnc45e000p3b6y565cxjgc@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Christopher Lamb, CNN’s Vatican correspondent, said when he met the new Pope Leo XIV when he was a cardinal, he came across “a very thoughtful person, a very measured person.”
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnz4fh00103b6y0db63abz@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            “I thought today he seemed, you know, overjoyed in some ways and sort of had received the grace of the office,” Lamb said, shortly after the pope made his first remarks on the balcony of St. Peter’s Basilica today.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnz4fh00113b6ya0vzhia8@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Lamb said Leo appeared to give careful thought to what he would say and what his first message to the world would be. This differs from Pope Francis, who would “speak off the cuff more,” he said.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnz4fh00123b6y2takrtke@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            “He’s more of someone who wants to prepare before he speaks, but what he says has a very strong impact,” Lamb said.
    </p>

            </div>
</article>

  <article data-filter-tag="catch up" data-last-updated="Thu, 08 May 2025 17:48:39 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafnac8l002w3b6zwmdvhvmm@published" data-post-id="cmafnac8l002w3b6zwmdvhvmm" data-component-name="live-story-post" data-post-order-id="2">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafnmayt000s3b6z5zwifn26@published" data-name="shutterstock_editorial_15276220s-(1).jpg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6644" data-original-height="1661" data-original-width="2500" data-url="https://media.cnn.com/api/v1/images/stellar/prod/shutterstock-editorial-15276220s-1.jpg?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/shutterstock-editorial-15276220s-1.jpg?c=original&amp;q=w_1280,c_fill" alt="Cardinal Robert Prevost attends the Fourth Novendali Mass in memory of Pope Francis in Saint Peter's Basilica on April 29." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1661" width="2500" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnltqc003b3b6zqoqdeyya@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Robert Prevost, now Pope Leo XIV, was born in Chicago, Illinois, in 1955.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnltqc003c3b6zzi84ifhx@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Prevost earned his bachelor’s in mathematics from Villanova University in Pennsylvania and went on to receive his diploma in theology from the Catholic Theological Union of Chicago.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnltqc003d3b6z70da8r39@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            He was later sent to Rome to study canon law at the Pontifical Saint Thomas Aquinas University and was ordained as a priest in June 1982. Later in his career, he taught canon law in the seminary in Trujillo, Peru.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnltqc003e3b6znno6xig0@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            While it is often said cardinal electors would always shy away from choosing a pope from the US due to America’s outsized global political influence, Prevost’s long experience in Peru may have mitigated those fears among the electors.
    </p>



    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafnltqc003g3b6zr1jwg3c1@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Allen added that he is seen as an apt leader in Vatican circles because “he’s able to accomplish things without necessarily being authoritarian about the way he did things.”
    </p>



            </div>
</article>

  <article data-filter-tag="reactions" data-last-updated="Thu, 08 May 2025 17:43:16 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafn7wpj00053b6o4qxgbrv9@published" data-post-id="cmafn7wpj00053b6o4qxgbrv9" data-component-name="live-story-post" data-post-order-id="3">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafniyto000r3b6zlr201qwd@published" data-name="08_2025-05-08T173545Z_790655945_RC2TDEA7PXWA_RTRMADP_3_POPE-SUCCESSION.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.668" data-original-height="2004" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/08-2025-05-08t173545z-790655945-rc2tdea7pxwa-rtrmadp-3-pope-succession.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/08-2025-05-08t173545z-790655945-rc2tdea7pxwa-rtrmadp-3-pope-succession.JPG?c=original&amp;q=w_1280,c_fill" alt="Pope Leo XIV waves to the masses below in St. Peter's Square." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="2004" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafn7wps00063b6ouzrsjqpl@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            President Donald Trump celebrated the news that the college of cardinals elected its first American pope, Cardinal Robert Prevost of Chicago, calling the news “a Great Honor for our Country.”
    </p>



            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 18:02:46 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmaflfq2h000i3b6ytb9u2vhk@published" data-post-id="cmaflfq2h000i3b6ytb9u2vhk" data-component-name="live-story-post" data-post-order-id="4">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafnh6fg000q3b6z9n84dti8@published" data-name="07_2025-05-08T173515Z_1045849657_RC2TDEA3QPGU_RTRMADP_3_POPE-LEO-XIV.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6666666666666666" data-original-height="2000" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/07-2025-05-08t173515z-1045849657-rc2tdea3qpgu-rtrmadp-3-pope-leo-xiv.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/07-2025-05-08t173515z-1045849657-rc2tdea3qpgu-rtrmadp-3-pope-leo-xiv.JPG?c=original&amp;q=w_1280,c_fill" alt="Pope Leo XIV appears on the balcony of St. Peter's Basilica." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="2000" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflfq2y000j3b6ygxbcrrg9@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Pope Leo XIV outlined his vision for the Catholic Church as one that “builds bridges” and engages in conversation.
    </p>



    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl9i3v00053b6yjqkmhb4r@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The new pope also called on people to “show our charity” to others “and be in dialogue with love,” according to an English translation.
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:39:46 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafn2z36002o3b6za8t0rl7m@published" data-post-id="cmafn2z36002o3b6za8t0rl7m" data-component-name="live-story-post" data-post-order-id="5">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafndtqo000o3b6zb0i7h93t@published" data-name="05_AP25128631820628.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6666666666666666" data-original-height="1630" data-original-width="2445" data-url="https://media.cnn.com/api/v1/images/stellar/prod/05-ap25128631820628.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/05-ap25128631820628.JPG?c=original&amp;q=w_1280,c_fill" alt="Pope Leo XIV acknowledges the crowd in St. Peter's Square on Thursday." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1630" width="2445" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafn2z3e002p3b6zpbmgfxuo@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Having spoken in Italian so far, Leo XIV just switched to Spanish — one of several European languages he speaks — to address his “beloved diocese” in Peru.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafn5y7g002u3b6zci1qyvld@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Cardinal Robert Prevost, as he was known until this past hour, worked for a decade in Trujillo, Peru, and served as bishop of Chiclayo, another Peruvian city, from 2014 to 2023.
    </p>



    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafne7cl00323b6zkhpysg1z@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Leo XIV called on the Catholic church to be a “synodal” church, “one which goes forward and which always seeks peace and to be close to those who suffer.”
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:40:56 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafmb8fc001a3b6zg6h6vck6@published" data-post-id="cmafmb8fc001a3b6zg6h6vck6" data-component-name="live-story-post" data-post-order-id="6">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafng83l000p3b6zs1g9sn3z@published" data-name="06_2025-05-08T173413Z_1189625811_RC2TDEACVHEC_RTRMADP_3_POPE-SUCCESSION.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6666666666666666" data-original-height="2000" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/06-2025-05-08t173413z-1189625811-rc2tdeacvhec-rtrmadp-3-pope-succession.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/06-2025-05-08t173413z-1189625811-rc2tdeacvhec-rtrmadp-3-pope-succession.JPG?c=original&amp;q=w_1280,c_fill" alt="Pope Leo XIV delivers the &quot;Urbi et Orbi&quot; message from the balcony of St. Peter's Basilica." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="2000" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmb8fi001b3b6zvj6ffvyp@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            During his remarks in Pope Leo XIV thanked his fellow cardinals for choosing him to lead the Catholic Church.
    </p>



            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:34:25 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafn4g8a00003b6odtm0lmd3@published" data-post-id="cmafn4g8a00003b6odtm0lmd3" data-component-name="live-story-post" data-post-order-id="7">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafnai6f000n3b6zp0jipwfw@published" data-name="04_AP25128630425044.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6669332267093163" data-original-height="1668" data-original-width="2501" data-url="https://media.cnn.com/api/v1/images/stellar/prod/04-ap25128630425044.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/04-ap25128630425044.JPG?c=original&amp;q=w_1280,c_fill" alt="Newly elected Pope Leone XIV speaks to the crowd at St. Peter's Square." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1668" width="2501" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafn4gfe00023b6ozniv8v1h@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Addressing the crowd in St Peter’s Square, Pope Leo XIV paid tribute to the late Pope Francis, urging the crowd to remember his predecessor’s legacy.
    </p>



            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:59:18 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafmp2qq002e3b6zhqm2x71l@published" data-post-id="cmafmp2qq002e3b6zhqm2x71l" data-component-name="live-story-post" data-post-order-id="8">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafn4x1r000l3b6z3fxf09id@published" data-name="02_2025-05-08T172559Z_1464741686_RC2TDEAJJLD7_RTRMADP_3_POPE-LEO-XIV.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.7273333333333334" data-original-height="2182" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/02-2025-05-08t172559z-1464741686-rc2tdeajjld7-rtrmadp-3-pope-leo-xiv.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/02-2025-05-08t172559z-1464741686-rc2tdeajjld7-rtrmadp-3-pope-leo-xiv.JPG?c=original&amp;q=w_1280,c_fill" alt="Newly elected Pope Leo XIV appears on the balcony of St. Peter's Basilica." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="2182" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmp2qx002f3b6zrv916ru0@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            In his first words as pope, Leo XIV said to the crowd in St. Peter’s Square: “Peace be with you all.”
    </p>



    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmryrb002m3b6zedhiu5l9@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Leo XIV looked visibly emotional as he waved to the adoring crowd in the square below the balcony.
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:26:22 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmaflk8b4000h3b6u8zx1xf4x@published" data-post-id="cmaflk8b4000h3b6u8zx1xf4x" data-component-name="live-story-post" data-post-order-id="9">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafn288i000k3b6z448su43m@published" data-name="AP25128626700383.jpg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6669184290030211" data-original-height="1766" data-original-width="2648" data-url="https://media.cnn.com/api/v1/images/stellar/prod/ap25128626700383.jpg?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/ap25128626700383.jpg?c=original&amp;q=w_1280,c_fill" alt="Newly elected Pope Leo XIV appears at the balcony of St. Peter's Basilica at the Vatican on Thursday." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1766" width="2648" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflk8c1000i3b6ujdd6yjc0@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Robert Prevost, now known as Pope Leo XIV, has just stepped onto the balcony of St. Peter’s Basilica. He will soon speak.
    </p>

            </div>
</article>

  <article data-filter-tag="catch up" data-last-updated="Thu, 08 May 2025 17:45:58 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafmfgo800263b6zth0xcnd7@published" data-post-id="cmafmfgo800263b6zth0xcnd7" data-component-name="live-story-post" data-post-order-id="10">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafmrxp1000j3b6zft06qtdk@published" data-name="GettyImages-2203130084.jpg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6663333333333333" data-original-height="1999" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/gettyimages-2203130084-20250508171831250.jpg?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/gettyimages-2203130084-20250508171831250.jpg?c=original&amp;q=w_1280,c_fill" alt="Cardinal Robert Prevost leads rosary prayers in St Peter's Square on March 3." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1999" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmfgog00273b6zf29xxxcc@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Cardinal Robert Francis Prevost of the United States has been elected the 267th pope and will soon step onto the balcony of St. Peter’s Basilica as the new leader of the world’s 1.4 billion Catholics.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmps0a002h3b6z44h2wm0m@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Prevost, 69, from Chicago, Illinois, is the first ever pope from the United States. He will be known as Leo XIV.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmps0a002i3b6zavsf0hfv@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            A leader with global experience, he spent much of his career as a missionary in South America and most recently led a powerful Vatican office for bishop appointments. He is expected to build on Pope Francis’ reforms.
    </p>

<div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafnmtls00043b6nzet2nwjc@published" data-name="AP25128624654779.jpg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6672" data-original-height="1668" data-original-width="2500" data-url="https://media.cnn.com/api/v1/images/stellar/prod/ap25128624654779.jpg?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/ap25128624654779.jpg?c=original&amp;q=w_1280,c_fill" alt="Cardinal Robert Francis Prevost, Prefect of the Dicastery for Bishops, right, receives his biretta from Pope Francis as he is elevated in St. Peter's Square at The Vatican on September 30, 2023." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1668" width="2500" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmps0a002j3b6zw1zy5ezi@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            He worked for a decade in Trujillo, Peru, and was later appointed bishop of Chiclayo, another Peruvian city, where he served from 2014 to 2023. Prevost also holds a Peruvian passport and has been a Peruvian citizen since 2015.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmh0t1002c3b6zlh4v93l4@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            In an interview with <a href="https://www.vaticannews.va/en/vatican-city/news/2023-05/archbishop-prevost-the-bishop-is-a-pastor-not-a-manager.html" target="_blank">Vatican News</a> shortly after he became the leader of the Dicastery for Bishops, Prevost said: “I still consider myself a missionary. My vocation, like that of every Christian, is to be a missionary, to proclaim the Gospel wherever one is.”
    </p>

  

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:15:27 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafk8wx500003b6yaxx30bfr@published" data-post-id="cmafk8wx500003b6yaxx30bfr" data-component-name="live-story-post" data-post-order-id="11">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafmn1lg000i3b6zzuu3hzrx@published" data-name="14_GettyImages-2212121081.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.5623333333333334" data-original-height="1687" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/14-gettyimages-2212121081.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/14-gettyimages-2212121081.JPG?c=original&amp;q=w_1280,c_fill" alt="Cardinal Robert Prevost is seen on April 26." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1687" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafk8x2u00023b6y6edcy5z3@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The new pope is revealed as Robert Prevost of the US, the first American pontiff in history. He will be known as Leo XIV.
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:13:03 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafl1f5t001o3b6znq9h7wfk@published" data-post-id="cmafl1f5t001o3b6znq9h7wfk" data-component-name="live-story-post" data-post-order-id="12">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafmibon000h3b6zbicpj1nz@published" data-name="AP25128615722056.jpg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6666666666666666" data-original-height="2000" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/ap25128615722056.jpg?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/ap25128615722056.jpg?c=original&amp;q=w_1280,c_fill" alt="Crowds cheer in St. Peter's Square after the election of the 267th pope." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="2000" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl1f5z001p3b6z5th2dyae@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            There’s tens of thousands of people packed into St. Peter’s Square right now — and dozens of flags representing countries across the world.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl96wd00243b6z7h4b4n48@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            We’ve seen Italian, Argentinian, Ecuadorian, Peruvian, Brazilian, Filipino and Polish flags, among many, many more.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmgdkh002a3b6zwca777g2@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            All eyes are on the main balcony of St. Peter’s Basilica.
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 17:12:32 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmaflafaq00113b6zfjch0hfo@published" data-post-id="cmaflafaq00113b6zfjch0hfo" data-component-name="live-story-post" data-post-order-id="13">
    <div data-editable="content" data-reorderable-component="content">
                        <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflafb000123b6zbvqb5pws@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Francesca, a lawyer from Rome, told CNN that came to St. Peter’s Square today “Because it’s an epic moment.”
    </p>



    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflki4200183b6zex8gtekb@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Asked if she has favorite cardinal in mind to lead the church, she said she does not. “It’s in God’s hand,” she added, and she said that no matter who is chosen, “we would be happy in any case.”
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafmdi52001l3b6zxzr5i071@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Francesca added that since the world and the church is divided in this moment, she hopes for someone who has the quality of reconciliation and diplomacy.
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 16:47:42 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafkv7sy00053b6ut59eec65@published" data-post-id="cmafkv7sy00053b6ut59eec65" data-component-name="live-story-post" data-post-order-id="14">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafll0db000g3b6zcjflpi3o@published" data-name="2025-05-08T164248Z_1747168040_RC2SDEA01XDA_RTRMADP_3_POPE-SUCCESSION.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6666666666666666" data-original-height="2000" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/2025-05-08t164248z-1747168040-rc2sdea01xda-rtrmadp-3-pope-succession.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/2025-05-08t164248z-1747168040-rc2sdea01xda-rtrmadp-3-pope-succession.JPG?c=original&amp;q=w_1280,c_fill" alt="People in St. Peter's Square react to white smoke from the chimney on the Sistine Chapel." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="2000" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafkv7ti00063b6u4uyu9rkf@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            As soon as the news of the white smoke spread through the Italian capital, some people began running through the streets of Rome to get to St. Peter’s Square. People continue to stream into the square from every alley that leads to the Vatican.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflkd4q000k3b6us1ruuv8z@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            In the square itself, people are hugging and crying tears of joy.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflkd4q000l3b6u6izva6s0@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            While earlier the crowd was angling to get a good view of the Sistine Chapel chimney, they are now inching closer to the balcony of St. Peter’s Basilica where the new pope is expected to emerge any moment.
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 16:41:33 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafkmey500123b6zvgdzfq7c@published" data-post-id="cmafkmey500123b6zvgdzfq7c" data-component-name="live-story-post" data-post-order-id="15">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmafkyi48000a3b6zgb1p2onk@published" data-name="2025-05-07T091819Z_1478313625_RC2XCEACI9H4_RTRMADP_3_POPE-SUCCESSION.JPG" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6665" data-original-height="1333" data-original-width="2000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/2025-05-07t091819z-1478313625-rc2xceaci9h4-rtrmadp-3-pope-succession.JPG?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/2025-05-07t091819z-1478313625-rc2xceaci9h4-rtrmadp-3-pope-succession.JPG?c=original&amp;q=w_1280,c_fill" alt="The central balcony of St. Peter's Basilica is seen on Thursday." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="1333" width="2000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafkmeyd00133b6z000f6yul@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The 267th leader of the Catholic Church will soon step onto the balcony of St. Peter’s Basilica and make himself known to the world.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl3xcs001w3b6zxrlqbdp9@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            First impressions count. When Pope Francis stepped onto the balcony in 2013, he did so dressed in simple white robes, shunning much of the papal pomp of his predecessors.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl5wig001y3b6zi3299y4m@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            He chose “Francis” as his papal name in honor of Francis of Assisi, the Italian saint who renounced his family wealth and championed the poor.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl6okf00203b6zq3n4uxhy@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Francis also addressed the crowd with the simple Italian greeting, “Buona sera,” meaning “good evening.”
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 16:46:26 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafk63lr000v3b6z1zff75uq@published" data-post-id="cmafk63lr000v3b6z1zff75uq" data-component-name="live-story-post" data-post-order-id="16">
    <div data-editable="content" data-reorderable-component="content">
                    <div data-image-variation="image" data-breakpoints="{&quot;image--eq-extra-small&quot;: 115, &quot;image--eq-small&quot;: 300, &quot;image--eq-large&quot;: 660}" data-uri="cms.cnn.com/_components/image/instances/cmaflat76000e3b6z6gvj0y4s@published" data-name="AP25128596392164.jpg" data-component-name="image" data-observe-resizes="" data-original-ratio="0.6666666666666666" data-original-height="2000" data-original-width="3000" data-url="https://media.cnn.com/api/v1/images/stellar/prod/ap25128596392164.jpg?c=original" data-editable="settings">
       <picture><img src="https://media.cnn.com/api/v1/images/stellar/prod/ap25128596392164.jpg?c=original&amp;q=w_1280,c_fill" alt="The Swiss Guard marches through the crowd in St. Peter's Square after white smoke billowed from the chimney of the Sistine Chapel." onload="this.classList.remove('image__dam-img--loading')" onerror="imageLoadError(this)" height="2000" width="3000" loading="lazy"></picture>
    </div>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafk63lz000w3b6z7apdlehv@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Among the cheers from the thousands in St. Peter’s Square who are celebrating the election of a new pope, the Swiss Guard and band are marching, adding to the vibrant and joyful atmosphere.
    </p>



    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflix2100163b6z5yaktq94@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            He added that the band and Swiss Guard’s presence might mean “that it’s not too long until we get the news of who has been elected as pope.”
    </p>

            </div>
</article>

  <article data-filter-tag="reactions" data-last-updated="Thu, 08 May 2025 16:43:52 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafke4ji00003b6yqfijlj9y@published" data-post-id="cmafke4ji00003b6yqfijlj9y" data-component-name="live-story-post" data-post-order-id="17">
    <div data-editable="content" data-reorderable-component="content">
                        <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafke51v00033b6yq142dkps@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            United States President Donald Trump took the stage at a White House event today shortly after white smoke out started streaming out of the Vatican chimney, a sign that the college of cardinals has selected a new pope.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflfuiu000l3b6ya4e3fecu@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            “I saw the smoke, but I haven’t seen the pope,” Trump told reporters in the White House East Room.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmaflfuiu000m3b6yn9akgyqm@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Trump drew criticism after the White House account tweeted an AI-generated image of him dressed as a pope ahead of the papal conclave this week.
    </p>

            </div>
</article>

  <article data-filter-tag="" data-last-updated="Thu, 08 May 2025 16:32:49 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafkzz3f00003b6yaqpi1h2m@published" data-post-id="cmafkzz3f00003b6yaqpi1h2m" data-component-name="live-story-post" data-post-order-id="18">
    <div data-editable="content" data-reorderable-component="content">
                        <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafkzzaj00023b6yxy3bptnr@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Now that the white smoke signal has gone out, we are waiting for the new pope to appear on the balcony overlooking St. Peter’s Square.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl0zje00093b6ydopemvsk@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Traditionally, that happens about <a href="https://www.cnn.com/2025/04/21/europe/pope-francis-death-next-steps-explainer-intl/index.html#:~:text=Traditionally%2C%20about%2030%20to%2060,Peter's%20Square">30 to 60 minutes after</a> the signal.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl0qw000083b6y2ixas8ut@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            His papal name will be announced, and the new pope will then speak briefly and say a prayer.
    </p>

    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl1hv7000a3b6ygnb5gqna@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            His formal coronation will take place days after his election. The last two popes have been inaugurated in St. Peter’s Square.
    </p>

            </div>
</article>

  <article data-filter-tag="reactions" data-last-updated="Thu, 08 May 2025 16:42:27 GMT" data-uri="cms.cnn.com/_components/live-story-post/instances/cmafkye7k001k3b6zoyzoem0e@published" data-post-id="cmafkye7k001k3b6zoyzoem0e" data-component-name="live-story-post" data-post-order-id="19">
    <div data-editable="content" data-reorderable-component="content">
                        <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafkye7r001l3b6zqkcyb643@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            The mood here is electric. People are rejoicing.
    </p>



    <p data-uri="cms.cnn.com/_components/paragraph/instances/cmafl23pj001s3b6zb7rovs0h@published" data-editable="text" data-component-name="paragraph" data-article-gutter="true">
            Connie said she hopes the next pontiff treads a similar path as Pope Francis by “helping the poor, fixing the world, helping the immigrants.”
    </p>

            </div>
</article>

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

      </div>
</article>

</section>
        
        
        
        
      </section>
      
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[High tariffs become 'real' with our first $36K bill (426 pts)]]></title>
            <link>https://blog.adafruit.com/2025/05/08/high-tariffs-become-real-with-our-first-36k-bill/</link>
            <guid>43927813</guid>
            <pubDate>Thu, 08 May 2025 16:27:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.adafruit.com/2025/05/08/high-tariffs-become-real-with-our-first-36k-bill/">https://blog.adafruit.com/2025/05/08/high-tariffs-become-real-with-our-first-36k-bill/</a>, See on <a href="https://news.ycombinator.com/item?id=43927813">Hacker News</a></p>
Couldn't get https://blog.adafruit.com/2025/05/08/high-tariffs-become-real-with-our-first-36k-bill/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Progress toward fusion energy gain as measured against the Lawson criteria (211 pts)]]></title>
            <link>https://www.fusionenergybase.com/articles/continuing-progress-toward-fusion-energy-breakeven-and-gain-as-measured-against-the-lawson-criteria</link>
            <guid>43927337</guid>
            <pubDate>Thu, 08 May 2025 15:49:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.fusionenergybase.com/articles/continuing-progress-toward-fusion-energy-breakeven-and-gain-as-measured-against-the-lawson-criteria">https://www.fusionenergybase.com/articles/continuing-progress-toward-fusion-energy-breakeven-and-gain-as-measured-against-the-lawson-criteria</a>, See on <a href="https://news.ycombinator.com/item?id=43927337">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>© 2019-2025 Triple Product Inc. Content available under CC BY-NC 4.0.<!-- --> <a href="https://www.fusionenergybase.com/terms-of-use">Terms of Use</a></p><p><a target="_blank" href="https://twitter.com/fusionenergydb?ref_src=twsrc%5Etfw"><img alt="Twitter" loading="lazy" width="20" height="20" decoding="async" data-nimg="1" src="https://www.fusionenergybase.com/twitter.svg"></a><a target="_blank" href="https://www.linkedin.com/company/fusion-energy-base/"><img alt="Linkedin" loading="lazy" width="20" height="20" decoding="async" data-nimg="1" src="https://www.fusionenergybase.com/linkedin.svg"></a></p></div></div>]]></description>
        </item>
    </channel>
</rss>