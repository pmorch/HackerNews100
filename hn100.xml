<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 18 Feb 2024 04:00:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Science fiction authors were excluded from awards for fear of offending China (212 pts)]]></title>
            <link>https://www.nbcnews.com/news/world/science-fiction-authors-excluded-hugo-awards-china-rcna139134</link>
            <guid>39415234</guid>
            <pubDate>Sun, 18 Feb 2024 01:24:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nbcnews.com/news/world/science-fiction-authors-excluded-hugo-awards-china-rcna139134">https://www.nbcnews.com/news/world/science-fiction-authors-excluded-hugo-awards-china-rcna139134</a>, See on <a href="https://news.ycombinator.com/item?id=39415234">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>HONG KONG — Organizers of the Hugo Awards, one of the most prominent literary awards in science fiction, excluded multiple authors from shortlists last year over concerns their work or public comments could be offensive to <a href="https://www.nbcnews.com/news/world/china-cunba-village-basketball-league-rcna124562" target="_blank">China</a>, leaked emails show.</p><p>Questions had been raised as to why writers including Neil Gaiman, R.F. Kuang, Xiran Jay Zhao and Paul Weimer had been deemed ineligible as finalists despite earning enough votes according to information published last month by awards organizers. Emails released this week revealed that they were concerned about how some authors might be perceived in China, where the Hugo Awards were held last year for the first time.</p><p>“As we are happening in China and the ‘laws’ we operate under are different… we need to highlight anything of sensitive political nature in the work,” Dave McCarty, the head of the 2023 awards jury, wrote in an email dated June 5. </p><p>Any work focusing on China, Taiwan, Tibet or other sensitive issues, he added, “needs to be highlighted so that we can determine if it is safe to put it on the ballot.”</p><p>McCarty, who resigned from his role in the awards last month, did not respond to a request for comment. In a statement on Thursday, the organizers of the 2024 Hugo Awards, which are being held in Glasgow, said they were taking steps “to ensure transparency and to attempt to redress the grievous loss of trust in the administration of the Awards.”</p><p>Last year’s Hugo Awards, which unlike most literary prizes are run by fans, were held in October during the 81st World Science Fiction Convention, known as Worldcon, in the southwestern Chinese city of Chengdu. Scores of science fiction and fantasy writers had signed an <a href="https://docs.google.com/document/d/1MbHdM8rLG7tWhJgIam5oFfHHutDI5wHQ/edit" target="_blank">open letter</a> protesting the location, which was chosen by voting members of the convention, citing in an open letter allegations of abuses against Uyghurs and other mostly Muslim minority groups in China that Beijing denies.</p><p><a href="https://www.documentcloud.org/documents/24428430-hugocensorshipemails_redacted" target="_blank">The emails</a>, which were first reported by science fiction writers and journalists Chris M. Barkley and Jason Sanford<strong> </strong>on <a href="https://file770.com/the-2023-hugo-awards-a-report-on-censorship-and-exclusion/" target="_blank">science fiction news site File 770</a> and <a href="https://www.patreon.com/jasonsanford" target="_blank">Sanford’s Patreon account</a>, show awards organizers detailing potential “negatives of China” in authors’ published works, book reviews and social media histories.</p><p>Some books, like Kuang’s “Babel” — which won the 2023 British Book Award for Fiction — appear to have been excluded simply for taking place in China. Zhao’s novel “Iron Widow” was flagged as being a “reimagining of the rise of the Chinese Empress Wu Zetian.”</p><p>Organizers also flagged comments that authors, including Barkley and Sanford, had made about the merits of holding the awards in Chengdu and whether they signed or shared the open letter.</p><p>“They went through all my blog posts and all my reviews like a fine-tooth comb,” Paul Weimer, an American author and three-time Hugo nominee who was disqualified, told NBC News in a phone interview on Friday.</p><p>Among the reasons cited for excluding Weimer was his supposed previous travel to Tibet, a Chinese region where Beijing is also accused of abuses.</p><p>“The funny thing is that I didn’t even go to Tibet. I was in Nepal. They didn’t get basic facts right about me,” he said.</p><p>Weimer, whose <a href="https://twitter.com/PrinceJvstin" target="_blank">display name on X</a> had as of Friday been changed to “Paul ‘Nepal is not Tibet’ Weimer,” said the vetting went against the spirit not only of the Hugo Awards but of science fiction itself.</p><p>“Censoring people based on what you think that a government might not like is completely against&nbsp;what the whole science fiction project is,” he said.</p><p>The emails were released by awards organizer Diane Lacey, who wrote some of the emails and said in an <a href="https://drive.google.com/file/d/1d4scDfJAP5GX_y30BkzuM2GKGP72q623/view" target="_blank">accompanying apology letter</a> that in hindsight she probably should have resigned.</p><p>“We were told to vet nominees for work focusing on China, Taiwan, Tibet, or other topics that may be an issue in China and, to my shame, I did so,” said Lacey, who did not respond to a request for comment.</p><p>“I am not that naïve regarding the Chinese political system, but I wanted the Hugos to happen, and not have them completely crash and burn.”</p></div><div data-activity-map="expanded-byline-article-bottom"><p><span data-testid="byline-thumbnail"></span><span data-testid="byline-name">Mithil Aggarwal</span><span><a href="https://twitter.com/mithilagg" target="_blank" rel="noopener noreferrer"><span></span></a><a href="mailto:Mithil.Aggarwal@nbcuni.com" target="_blank" rel="noopener noreferrer"><span></span></a></span></p><p>Mithil Aggarwal is a Hong Kong-based reporter/producer for NBC News.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[My Notes on Gitlab's Postgres Schema Design (2022) (183 pts)]]></title>
            <link>https://shekhargulati.com/2022/07/08/my-notes-on-gitlabs-postgres-schema-design/</link>
            <guid>39413972</guid>
            <pubDate>Sat, 17 Feb 2024 22:05:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://shekhargulati.com/2022/07/08/my-notes-on-gitlabs-postgres-schema-design/">https://shekhargulati.com/2022/07/08/my-notes-on-gitlabs-postgres-schema-design/</a>, See on <a href="https://news.ycombinator.com/item?id=39413972">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-6989">
	<!-- .entry-header -->

	
	
	<div>
		
<p>I spent some time going over the Postgres schema of Gitlab. GitLab is an alternative to Github. You can self host GitLab since it is an open source DevOps platform.</p>



<p>My motivation to understand the schema of a big project like Gitlab was to compare it against schemas I am designing and learn some best practices from their schema definition. I can surely say I learnt a lot.</p>



<blockquote>
<p>I am aware that best practices are sometimes context dependent so you should not apply them blindly.</p>
</blockquote>



<p>The Gitlab schema file <code>structure.sql</code> [1] is more than 34000 lines of code. Gitlab is a monolithic Ruby on Rails application. The popular way to manage schema migration is using the <code>schema.rb</code> file. The reason the Gitlab team decided to adopt <code>structure.sql</code> instead is mentioned in on of their issues [2] in their issue tracker.</p>



<blockquote>
<p>Now what keeps us from using those features is the use of <code>schema.rb</code>. This can only contain standard migrations (using the Rails DSL), which aim to keep the schema file database system neutral and abstract away from specific SQL. This in turn means we are not able to use extended PostgreSQL features that are reflected in schema. Some examples include triggers, postgres partitioning, materialized views and many other great features.</p>



<p>In order to leverage those features, we should consider using a plain SQL schema file (<code>structure.sql</code>) instead of a ruby/rails standard schema <code>schema.rb</code>.</p>



<p>The change would entail switching <code>config.active_record.schema_format = :sql</code> and regenerate the schema in SQL. Possibly, some build steps would have to be adjusted, too.</p>
</blockquote>



<p>Now, let’s go over the things I learnt from Gitlab Postgres schema.</p>



<p>Below are some of the tweets from people on this article. If you find this article useful please share and tag me <a href="https://twitter.com/shekhargulati" target="_blank" rel="noreferrer noopener">@shekhargulati</a></p>



<figure></figure>



<figure><div><blockquote data-width="550" data-dnt="true"><p lang="en" dir="ltr">If you want to learn a little bit how others are designing their database schemas you will like the analysis of the Gitlab schema. <a href="https://t.co/oxPC2HCj4g">https://t.co/oxPC2HCj4g</a></p>— Tobias_Petry.sql (@tobias_petry) <a href="https://twitter.com/tobias_petry/status/1547865598037659653?ref_src=twsrc%5Etfw">July 15, 2022</a></blockquote></div></figure>



<figure></figure>



<figure></figure>



<figure></figure>



<h2>1. Using the right primary key type for a table</h2>



<p>In my work I have made the mistake of standardizing on primary key types. This means standardizing on either <code>bigint</code> or <code>uuid</code> so all tables will have the same type irrespective of their structure, access patterns, and growth rate.</p>



<p>When your database is small this does not have any visible impact but as you grow primary keys have a visible impact on storage space, write speed, and read speed. So, we should give a proper thought process on choosing the right primary key type for a table.</p>



<p>As I discussed in an earlier post[3] when you use Postgres native UUID v4 type instead of bigserial table size grows by 25% and insert rate drops to 25% of bigserial. This is a big difference. I also compared against ULID but it also performed poorly. One reason could be the ULID implementation.</p>



<p>Given this context I was interested to learn how Gitlab chooses primary key types.</p>



<p>Out of the 573 tables, 380 tables have bigserial primary key type, 170 have serial4 primary key type, and remaining 23 had composite primary keys.They had no table that used uuid v4 primary key or any other esoteric key type like ULID.</p>



<figure><table><thead><tr><th>Name</th><th>Description</th><th>Range</th><th>Text</th></tr></thead><tbody><tr><td><code>serial</code></td><td>4 bytes</td><td>1 to 2147483647</td><td>~2.1 billion</td></tr><tr><td><code>bigserial</code></td><td>8 bytes</td><td>1 to 9223372036854775807</td><td>~9.2 quintillion</td></tr></tbody></table></figure>



<blockquote>
<p>1 quintillion is equal to 1000000000 billions</p>
</blockquote>



<p>The decision to choose serial or bigserial is dependent on the number of records in that table.</p>



<p>Tables like <code>application_settings</code>, <code>badges</code>, <code>chat_teams</code>, <code>notification_settings</code>, <code>project_settings</code> use serial type. For some tables like <code>issues</code>, <code>web_hooks</code>, <code>merge_requests</code>, <code>projects</code> I was surprised to see that they had used the <code>serial</code> type.</p>



<p>The serial type might work for self-hosted community or enterprise versions but for Gitlab.com SaaS service this can cause issues. For example, Github had 128 million public repositories in 2020. Even with 20 issues per repository it will cross the serial range. Also changing the type of the table is expensive. The table has to be rewritten, and you will have to wait. This will also be a problem if you have to shard the table.</p>



<p>I performed a quick experiment that showed that for my table with two columns and 10million records it takes 11 seconds to change the data type from integer to bigint.</p>


<div><pre title="">create table exp_bs(id serial primary key, n bigint not null);
</pre></div>


<p>Insert 10million records</p>


<div><pre title="">insert into exp_bs(n) select g.n from generate_series(1,10000000) as g(n);
</pre></div>


<p>Change column type from integer to bigint.</p>


<div><pre title="">alter table exp_bs alter column id TYPE bigint;
</pre></div>

<div><pre title="">ALTER TABLE
Time: 10845.062 ms (00:10.845)
</pre></div>


<p>You will also have to alter the sequence to change its type as well. This operation is quick.</p>


<div><pre title="">alter sequence exp_bs_id_seq as bigint;
</pre></div>


<p>This finished in 4ms</p>


<div><pre title="">ALTER SEQUENCE
Time: 4.505 ms
</pre></div>


<p>All the bigserial sequences start from 1 and go till the max value of bigint.</p>


<div><pre title="">CREATE SEQUENCE audit_events_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;
</pre></div>


<h2>2. Use of internal and external ids</h2>



<p>It is generally a good practice to not expose your primary keys to the external world. This is especially important when you use sequential auto-incrementing identifiers with type integer or bigint since they are guessable.</p>



<p>So, I was curious to know what happens when you create a Gitlab issue. Do we expose the primary key id to the external user or do we use some other id? If you expose the <code>issues</code> table primary key id then when you create an issue in your project it will not start with 1 and you can easily guess how many issues exist in the GitLab. This is both unsafe and poor user experience.</p>



<p>To avoid exposing your primary keys to the end user the common solution is use two ids. The first is your primary key id which remains internal to the system and never exposed to any public context. The second id is what we share with the external world. In my past experience I have used UUID v4 as the external id. As we discussed in the previous point there is a storage cost involved with using UUID.</p>



<p>GitLab also uses internal and external ids in tables where ids have to be shared with the external world. Tables like <code>issues</code>, <code>ci_pipelines</code>, <code>deployments</code>, <code>epics</code>, and a few others have two ids – <code>id</code> and <code>iid</code>. Below is the part of the issue schema. As shown below <code>iid</code> has integer data type.</p>


<div><pre title="">CREATE TABLE issues (
    id integer NOT NULL,
    title character varying,
      project_id integer,
    iid integer,
    // rest of the columns removed
)
</pre></div>


<p>As you can see there are <code>id</code> and <code>iid</code> columns. The value of the <code>iid</code> column is shared with the end user. An issue is uniquely identified using <code>project_id</code> and <code>iid</code>. This is because there could be multiple issues with the same <code>iid</code> . To make it more clear, if you create two projects and create one issue in each of the repositories then they both need to have a visible id of 1 as shown in the example below. Both the <code>sg</code> and <code>sg2</code> projects start with issue id 1. This is achieved using <code>iid</code>.</p>


<div><pre title="">https://gitlab.com/shekhargulati123/sg/-/issues/1
https://gitlab.com/shekhargulati123/sg2/-/issues/1
</pre></div>


<p>They have a unique index on <code>project_id</code> and <code>iid</code> to quickly and efficiently fetch an issue.</p>


<div><pre title="">CREATE UNIQUE INDEX index_issues_on_project_id_and_iid ON public.issues USING btree (project_id, iid);
</pre></div>


<h2>3. Using <code>text</code> character type with check constraints</h2>



<p>Postgres has three character types as described in their documentation[5].</p>



<figure><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>character varying(n)</code>, <code>varchar(n)</code></td><td>variable-length with limit</td></tr><tr><td><code>character(n)</code>, <code>char(n)</code></td><td>fixed-length, blank padded</td></tr><tr><td><code>text</code></td><td>variable unlimited length</td></tr></tbody></table></figure>



<p>I have mostly used <code>character varying(n)</code> or <code>varchar(n)</code> to store String values. Gitlab schema uses both <code>character varying(n)</code> and <code>text</code> but more often they use <code>text</code> type. One such example table is shown below.</p>


<div><pre title="">CREATE TABLE audit_events (
    id bigint NOT NULL,
    author_id integer NOT NULL,
    entity_id integer NOT NULL,
    entity_type character varying NOT NULL,
    details text,
    ip_address inet,
    author_name text,
    entity_path text,
    target_details text,
    created_at timestamp without time zone NOT NULL,
    target_type text,
    target_id bigint,
    CONSTRAINT check_492aaa021d CHECK ((char_length(entity_path) &lt;= 5500)),
    CONSTRAINT check_83ff8406e2 CHECK ((char_length(author_name) &lt;= 255)),
    CONSTRAINT check_97a8c868e7 CHECK ((char_length(target_type) &lt;= 255)),
    CONSTRAINT check_d493ec90b5 CHECK ((char_length(target_details) &lt;= 5500))
)
PARTITION BY RANGE (created_at);
</pre></div>


<p>You can see that apart from <code>entity_type</code> all other columns have <code>text</code> type. They have used <code>CHECK</code> to define length constraints.</p>



<p>As mentioned in multiple posts[6,7] on the web there is not much performance difference between the two types. They both use <code>varlena</code> type under the hood.</p>



<p>The problem with <code>varchar(n)</code> is that if n becomes more restrictive then it will require an exclusive lock. This can cause performance issues depending on the size of the table.</p>



<p>The <code>text</code> column with <code>CHECK</code> constraint on the other hand does not have this issue. But it does cost a little during writes.</p>



<p>Let’s do a quick experiment to prove it. We will start by creating a simple table</p>


<div><pre title="">create table cv_exp (id bigint primary key, s varchar(200) default gen_random_uuid() not null);
create index sidx on cv_exp (s);
</pre></div>


<p>Insert 10million records</p>


<div><pre title="">insert into cv_exp(id) select g.n from generate_series(1,10000000) as g(n);
</pre></div>


<p>If we increase the length of s from 200 to 300 then it is instantaneous</p>


<div><pre title="">alter table cv_exp alter column s type varchar(300);
</pre></div>

<div><pre title="">ALTER TABLE
Time: 37.460 ms
</pre></div>


<p>But if we reduce the length of <code>s</code> from 300 to 100 then it does take considerable time.</p>


<div><pre title="">alter table cv_exp alter column s type varchar(100);
</pre></div>

<div><pre title="">ALTER TABLE
Time: 35886.638 ms (00:35.887)
</pre></div>


<p>As you can see it took 36 seconds.</p>



<p>Let’s do the same with the text column.</p>


<div><pre title="">create table text_exp (id bigint primary key, 
s text default gen_random_uuid() not null,
CONSTRAINT check_15e644d856 CHECK ((char_length(s) &lt;= 200)));
</pre></div>


<p>Insert 10 million records</p>


<div><pre title="">insert into text_exp(id) select g.n from generate_series(1,10000000) as g(n);
</pre></div>


<p>There is no alter constraint in Postgres. You have to drop the constraint and then add a new constraint.</p>


<div><pre title=""> alter table text_exp drop constraint check_15e644d856;
</pre></div>


<p>Now, add again</p>


<div><pre title="">alter table text_exp add constraint check_15e644d856 CHECK ((char_length(s) &lt;= 100));
</pre></div>

<div><pre title="">ALTER TABLE
Time: 1870.250 ms (00:01.870)
</pre></div>


<p>So, as you can see, the <code>text</code> type with <code>CHECK</code> constraint allows you to evolve the schema easily compared to <code>character varying</code> or <code>varchar(n)</code> when you have length checks.</p>



<p>I also noticed that they used <code>character varying</code> where length checks are not required like as shown below.</p>


<div><pre title="">CREATE TABLE project_custom_attributes (
    id integer NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    project_id integer NOT NULL,
    key character varying NOT NULL,
    value character varying NOT NULL
);
</pre></div>


<h2>4. Naming conventions</h2>



<p>The naming follows the following convention.</p>



<ul><li>All tables use plural forms. For example <code>issues</code>, <code>projects</code>, <code>audit_events</code>, <code>abuse_reports</code>, <code>approvers</code>, etc.</li><li>Tables use module name prefix to provide a namespace. For example, all tables belonging to merge request functionality start with <code>merge_request</code> prefix as shown in the listing below.<ul><li>merge_request_assignees</li><li>merge_request_blocks</li><li>merge_request_cleanup_schedules</li><li>merge_request_context_commit_diff_files</li><li>merge_request_context_commits</li><li>etc..</li></ul></li><li>Names of tables and columns follow snake_case convention. The underscore is used to combine two or more words. For example, <code>title</code>, <code>created_at</code>, <code>is_active</code>.</li><li>Columns expressing boolean follow either of the three naming convention depending on their purpose<ul><li>Feature toggles. For example <code>create_issue</code>, <code>send_email</code>, <code>packages_enabled</code>, <code>merge_requests_rebase_enabled</code>, etc</li><li>Entity State: Examples, <code>deployed</code>, <code>onboarding_complete</code>, <code>archived</code>, <code>hidden</code>, etc.</li><li>Qualifiers – They start with <code>is_xxx</code> or <code>has_xxx</code>. For example, <code>is_active</code>, <code>is_sample</code>, <code>has_confluence</code>, etc. I think these can be expressed using the above two.</li></ul></li><li>Indexes follow the convention <code>index_#{table_name}_on_#{column_1}_and_#{column_2}_#{condition}</code>. For example, <code>index_services_on_type_and_id_and_template_when_active</code>, <code>index_projects_on_id_service_desk_enabled</code>.</li></ul>



<h2>5. Timestamp with timezone and without timezone</h2>



<p>GitLab uses both <code>timestamp with timezone</code> and <code>timestamp without timezone</code>.</p>



<p>My understanding is that the data type <code>timestamp without timezone</code> is used when the system performs an action and data type <code>timestamp with time zone</code> is used for user actions. For example, in the SQL shown below <code>created_at</code> and <code>updated_at</code> does use <code>timestamp without time zone</code> whereas <code>closed_at</code> uses <code>timestamp with time zone</code>.</p>


<div><pre title="">CREATE TABLE issues (
    id integer NOT NULL,
    title character varying,

    created_at timestamp without time zone,
    updated_at timestamp without time zone,

    closed_at timestamp with time zone,
    closed_by_id integer,
);
</pre></div>


<p>Another example is <code>merge_request_metrics</code> where <code>latest_closed_at</code>, <code>first_comment_at</code>, <code>first_commit_at</code> , and <code>last_commit_at</code> uses <code>timestamp with time zone</code> whereas <code>latest_build_started_at</code> , <code>latest_build_finished_at</code>, and <code>merge_at</code> they use <code>timestamp without timezone</code>. You might wonder why <code>merge_at</code> does not use a timezone. I think it is because the system can merge the request based on certain conditions or checks.</p>


<div><pre title="">CREATE TABLE merge_request_metrics (
    id integer NOT NULL,
    latest_build_started_at timestamp without time zone,
    latest_build_finished_at timestamp without time zone,
    merged_at timestamp without time zone,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,

    latest_closed_at timestamp with time zone,
    first_comment_at timestamp with time zone,
    first_commit_at timestamp with time zone,
    last_commit_at timestamp with time zone,
    first_approved_at timestamp with time zone,
    first_reassigned_at timestamp with time zone
);
</pre></div>


<h2>6. Foreign key constraints</h2>



<p>A foreign key constraint is a logical association of rows between two tables. You typically use foreign keys to join tables in queries.</p>



<blockquote>
<p>A <strong>FOREIGN KEY</strong> constraint is a database construct, an implementation that forces the foreign key relationship’s integrity (referential integrity). Namely, it ensures that a child table can only reference a parent table when the appropriate row <em>exists</em> in the parent table. A constraint also prevents the existence of “orphaned rows” in different methods. – <a href="https://docs.planetscale.com/learn/operating-without-foreign-key-constraints">Link</a></p>
</blockquote>



<p>I have consulted in multiple projects in the last couple of years where team/architects decided not to use foreign key constraints. They mainly cite performance as the reason to not use foreign key constraints.</p>



<p>One reason performance can degrade when you create foreign key is when you create it with <code>ON DELETE CASCADE</code> action. The way <code>ON DELETE CASCADE</code> action works is that if you delete a row in the parent table then any referencing row in the child table is also deleted within the same transaction. You might expect only one row to be deleted but you might end up deleting hundred or thousand or more child table rows as well. But, this will be an issue only when one parent row is linked with a large number of child table rows.</p>



<p>There are two other reasons teams don’t use foreign key constraints. These are:</p>



<ul><li>They don’t work well with online DDL schema migration operations especially in MySQL</li><li>It is difficult to maintain foreign key constraints once you shard your data into multiple database servers</li></ul>



<blockquote>
<p>MySQL compatible serverless database like PlanetScale(based on open source Vitess database) does not support foriegn keys.</p>
</blockquote>



<p>So, I was curious to learn if GitLab uses Foreign key constraints or not.</p>



<p>GitLab uses foriegn key constraints in most tables except in a few tables like <code>audit_events</code> , <code>abuse_reports</code>, <code>web_hooks_logs</code>, <code>spam_logs</code>. I think there are two main reasons why they don’t use foreign key constraints in <code>audit_events</code> , <code>abuse_reports</code>, <code>web_hooks_logs</code>, <code>spam_logs</code>. These are:</p>



<ul><li>These tables are immutable in nature. You don’t want to change them once entries are written to them</li><li>These tables can grow to millions(or more) of rows so even a small performance hit could have a big impact</li></ul>



<p>The rest of the tables where GitLab uses foreign keys use both <code>ON DELETE CASCADE</code> , <code>ON DELETE RESTRICT</code> , and <code>ON DELETE SET NULL</code> actions. An example of each of them is shown below.</p>


<div><pre title="">ALTER TABLE ONLY todos
    ADD CONSTRAINT fk_rails_a27c483435 FOREIGN KEY (group_id) REFERENCES namespaces(id) ON DELETE CASCADE;

ALTER TABLE ONLY projects
    ADD CONSTRAINT fk_projects_namespace_id FOREIGN KEY (namespace_id) REFERENCES namespaces(id) ON DELETE RESTRICT;

ALTER TABLE ONLY authentication_events
    ADD CONSTRAINT fk_rails_b204656a54 FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL;
</pre></div>


<ul><li><code>ON DELETE SET NULL</code> will set the referencing column on the child table to null for matching rows. It leads to orphaned rows but you can easily identify them because of NULL. In this action also, a single row deletion can lead to multiple rows getting updated in the child table. This may cause large transactions, excessive locking, and replication lag.</li><li><code>ON DELETE RESTRICT</code> prevents deletion of referenced child rows. This does not cause orphaned childs as you can’t delete a parent row if there are child rows that references it. You get exceptions like as shown below.</li></ul>


<div><pre title="">  ERROR:  update or delete on table "a" violates foreign key constraint "fk_a_id" on table "b"
  DETAIL:  Key (id)=(1) is still referenced from table "b".
</pre></div>


<h2>7. Partitioning big tables</h2>



<p>GitLab uses partitioning to partition tables that can grow to a huge size. This is done to improve query performance.</p>



<ul><li>PARTITION BY RANGE: This partitioning strategy works by partitioning table data based on the chosen range. This strategy is commonly used when you need to partition time-series data. The tables <code>audit_events</code> and <code>web_hook_logs</code> use this strategy.</li><li>PARTITION BY LIST: This partitioning strategy works by partitioning table data based on discrete values of a column. The table <code>loose_foreign_keys_deleted_records</code> uses this strategy.</li><li>PARTITION BY HASH: TThe table is partitioned by specifying a modulus and a remainder for each partition. Each partition will hold the rows for which the hash value of the partition key divided by the specified modulus will produce the specified remainder. The table <code>product_analytics_events_experimental</code> uses this strategy.</li></ul>



<p>You can read more about Postgres partitioning in Postgres <a href="https://www.postgresql.org/docs/current/ddl-partitioning.html">documentation</a>.</p>



<h2>8. Supporting LIKE search use cases with Trigrams and <code>gin_trgm_ops</code></h2>



<p>GitLab uses GIN(Generalized Inverted Index) indexes to perform efficient searches.</p>



<blockquote>
<p>The GIN index type was designed to deal with data types that are subdividable and you want to search for individual component values (array elements, lexemes in a text document, etc)” – <a href="https://www.postgresql.org/message-id/flat/26038.1559516834%40sss.pgh.pa.us#ccb004aefc151d913e7a274a9b30c631">Tom Lane</a></p>
</blockquote>



<p>Due to the nature of the LIKE operation, which supports arbitrary wildcard expressions, this is fundamentally hard to index. One such example is the issues table where you might want to do something like search on title and description fields. So, we use the pg_trgm extension to create an index that works on trigrams.</p>


<div><pre title="">CREATE INDEX index_issues_on_title_trigram ON issues USING gin (title gin_trgm_ops);
CREATE INDEX index_issues_on_description_trigram ON issues USING gin (description gin_trgm_ops);
</pre></div>


<p>The GIN index makes searches performant. Let’s see that in action.</p>



<p>We will create a simple table as shown below.</p>


<div><pre title="">create table words(id serial primary key, word text not null);
</pre></div>


<p>Let’s insert some data. I pulled an English word list in CSV format from this <a href="https://www.bragitoff.com/2016/03/english-dictionary-in-csv-format/">link</a>.</p>


<div><pre title="">\copy words(word) from '/Users/xxx/Aword.csv' CSV;
</pre></div>

<div><pre title="">select count(*) from words;
</pre></div>

<div><pre title=""> count
-------
 11616
(1 row)
</pre></div>


<p>We will create a btree index on the word column and later we will use the gin index to show its efficiency.</p>


<div><pre title="">create index id1 on words using btree (word);
</pre></div>


<p>Let’s run the explain plan query.</p>


<div><pre title="">EXPLAIN select * from words where word like '%bul%';
</pre></div>

<div><pre title="">                        QUERY PLAN
-----------------------------------------------------------
 Seq Scan on words  (cost=0.00..211.20 rows=1 width=14)
   Filter: (word ~~ '%bul%'::text)
(2 rows)
</pre></div>


<p>Now, let’s drop btree index;</p>





<p>Install the <code>pg_trm</code> extension</p>


<div><pre title="">CREATE EXTENSION pg_trgm;
</pre></div>


<p>Create the index.</p>


<div><pre title="">create index index_words_on_word_trigram ON words USING gin (word gin_trgm_ops);
</pre></div>


<p>Now, let;s run explain</p>


<div><pre title="">EXPLAIN select count(*) from words where word like '%bul%';
</pre></div>

<div><pre title="">                                             QUERY PLAN
----------------------------------------------------------------------------------------------------
 Aggregate  (cost=16.02..16.03 rows=1 width=8)
   -&gt;  Bitmap Heap Scan on words  (cost=12.01..16.02 rows=1 width=0)
         Recheck Cond: (word ~~ '%bul%'::text)
         -&gt;  Bitmap Index Scan on index_words_on_word_trigram  (cost=0.00..12.01 rows=1 width=0)
               Index Cond: (word ~~ '%bul%'::text)
(5 rows)
</pre></div>


<p>GitLab also makes use of <code>tsvector</code> to support complete full text search.</p>



<p>The advantages of doing text seach in your primary datastore are:</p>



<ul><li>Real time indexes. No lag to create index</li><li>Access to the complete data</li><li>Less complexity in your architecture</li></ul>



<h2>9. Use of <code>jsonb</code></h2>



<p>As I discussed an earlier <a href="https://shekhargulati.com/2022/01/08/when-to-use-json-data-type-in-database-schema-design/">post</a> I use json data type in schema design for following use cases:</p>



<ol><li>Dump request data that will be processed later</li><li>Support extra fields</li><li>One To Many Relationship where many side will not have to its own identity</li><li>Key Value use case</li><li>Simpler EAV design</li></ol>



<p>GitLab schema design also uses <code>jsonb</code> data type in multiple tables. They use it mainly for 1 and 2 use cases in my list above. The advantage of using jsonb over storing in plain text is the efficient querying supported by Postgres on <code>jsonb</code> data type.</p>



<p>The table <code>error_tracking_error_events</code> stores payload in jsonb data type. This is an example of dump request data that will be processed in a later use case. I covered a similar use case in my blog post so do read that for more information.</p>


<div><pre title="">CREATE TABLE error_tracking_error_events (
    id bigint NOT NULL,
    payload jsonb DEFAULT '{}'::jsonb NOT NULL,
  // rest removed
);
</pre></div>


<p>You can use a JSON schema to validate the structure of a JSON document.</p>



<p>Another example is the <code>operations_strategies</code> table shown below. You don’t know how many parameters you might receive so you need a flexible data type like <code>jsonb</code>.</p>


<div><pre title="">CREATE TABLE operations_strategies (
    id bigint NOT NULL,
    feature_flag_id bigint NOT NULL,
    name character varying(255) NOT NULL,
    parameters jsonb DEFAULT '{}'::jsonb NOT NULL
);
</pre></div>


<p>An example of supporting extra fields use cases is shown below.</p>


<div><pre title="">CREATE TABLE packages_debian_file_metadata (
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    package_file_id bigint NOT NULL,
    file_type smallint NOT NULL,
    component text,
    architecture text,
    fields jsonb,
);
</pre></div>


<p>They also use jsonb for storing data that is already in JSON format. For example, in the table <code>vulnerability_finding_evidences</code> report data is already JSON so they saved it as is in <code>jsonb</code> data type.</p>


<div><pre title="">CREATE TABLE vulnerability_finding_evidences (
    id bigint NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    vulnerability_occurrence_id bigint NOT NULL,
    data jsonb DEFAULT '{}'::jsonb NOT NULL
);
</pre></div>


<h2>10. Other tidbits</h2>



<ul><li>Auditing fields like <code>updated_at</code> are only used in tables where records can be modified. For example <code>issues</code> has an <code>updated_at</code> column. For append-only immutable log tables like <code>audit_events</code> do not have an <code>updated_at</code> column as shown below in the code snippets. <code>issues</code> table with <code>updated_at</code> column</li></ul>


<div><pre title="">  CREATE TABLE issues (
      id integer NOT NULL,
      title character varying,
      author_id integer,
      project_id integer,
      created_at timestamp without time zone,
      updated_at timestamp without time zone,
      // removed remaining columns and constraints
  );
</pre></div>


<p><code>audit_events</code> table with no <code>updated_at</code> column.</p>


<div><pre title="">  CREATE TABLE audit_events (
      id bigint NOT NULL,
      author_id integer NOT NULL,
      entity_id integer NOT NULL,
      created_at timestamp without time zone NOT NULL,
      // removed remaining columns and constraints
  )
</pre></div>


<ul><li>Enums are stored as smallint rather than <code>character varying</code>. It saves space. The only problem is you can’t change the order of enum values. In the example shown below <code>reason</code> and <code>severity_level</code> are enums</li></ul>


<div><pre title="">  CREATE TABLE merge_requests_compliance_violations (
      id bigint NOT NULL,
      violating_user_id bigint NOT NULL,
      merge_request_id bigint NOT NULL,
      reason smallint NOT NULL,
      severity_level smallint DEFAULT 0 NOT NULL
  );
</pre></div>


<ul><li>Optimistic locking is used in a few(8) tables like <code>issues</code> and <code>ci_builds</code> to protect against edits from multiple parties. Optimistic locking assumes that there will be minimum such conflicts of data and if it does happen then the application throws an exception and the update is ignored. Active Record supports optimistic locking if the <code>lock_version</code> field is present. Each update to the record increments the <code>lock_version</code> column and the locking facilities ensure that records instantiated twice will let the last one saved raise a <code>StaleObjectError</code> if the first was also updated. The <code>ci_builds</code> table shown below uses the ‘lock_version` column.</li></ul>


<div><pre title="">  CREATE TABLE ci_builds (
      status character varying,
      finished_at timestamp without time zone,
      trace text,

        lock_version integer DEFAULT 0,

        // removed columns
      CONSTRAINT check_1e2fbd1b39 CHECK ((lock_version IS NOT NULL))
  );
</pre></div>


<ul><li>Using inet for storing ip addresses. I was not aware of the <code>inet</code> type. They have used inet in <code>audit_events</code> and <code>authentication_events</code> tables</li></ul>


<div><pre title="">  CREATE TABLE audit_events (
      id bigint NOT NULL,
      ip_address inet,
    // other columns removed for clarity
  );
</pre></div>


<p>GitLab has not used inet in all the tables that store <code>ip_address</code>. For example, in tables <code>ci_runners</code> and <code>user_agent_details</code>, they have stored it as <code>character varying</code>. I am not sure why they have not used the same type in all the tables that store ip addresses.</p>



<p>You should prefer <code>inet</code> over storing an ip address as a plain text type as these types offer input error handling and specialized functions.</p>



<p>Let’s quickly see it in action. We will start by creating a table with two fields – id, and <code>ip_addr</code></p>


<div><pre title="">   create table e (id serial primary key, ip_addr inet not null);
</pre></div>


<p>We can insert a valid record like shown below.</p>


<div><pre title="">  insert into e(ip_addr) values ('192.168.1.255');
</pre></div>


<p>We can also insert the record with a mask as shown below.</p>


<div><pre title="">  insert into e(ip_addr) values ('192.168.1.5/24');
</pre></div>


<p>Both these records will get inserted</p>


<div><pre title="">  select id, abbrev(ip_addr) from e;
</pre></div>

<div><pre title="">   id |     abbrev
  ----+----------------
    1 | 192.168.1.255
    2 | 8.8.8.8
    3 | 192.168.1.5/24
  (3 rows)
</pre></div>


<p>If we try to save invalid data then insert will fail.</p>


<div><pre title="">  insert into e(ip_addr) values ('192.168.1');
</pre></div>

<div><pre title="">  ERROR:  invalid input syntax for type inet: "192.168.1"
  LINE 1: insert into e(ip_addr) values ('192.168.1');
</pre></div>


<p>You can inet operators supported by Postgres to check if an ip address is contained by subnet as shown below.</p>


<div><pre title="">  select * from e where ip_addr &lt;&lt; inet '192.168.1.1/24';
</pre></div>

<div><pre title="">   id |    ip_addr
  ----+---------------
    1 | 192.168.1.255
  (1 row)
</pre></div>


<p>If we want to check if subnet is contained or equal then we do following</p>


<div><pre title="">  select * from e where ip_addr &lt;&lt;= inet '192.168.1.1/24';
</pre></div>

<div><pre title="">   id |    ip_addr
  ----+----------------
    1 | 192.168.1.255
    3 | 192.168.1.5/24
  (2 rows)
</pre></div>


<p>There are many other operators and functions supported by Postgres. You can read them in the Postgres <a href="https://www.postgresql.org/docs/current/functions-net.html">docs</a>.</p>



<ul><li>Postgres ‘bytea<code>data type is used to store</code>SHA` , encrypted tokens, encrypted keys, encrypted password, fingerprints, etc.</li><li>Postgres array types are used for storing columns with multiple values as shown below.</li></ul>



<blockquote>
<p>Arrays are to be used when you are absolutely sure you don’t need to create any relationship between the items in the array with any other table. It should be used for a tightly coupled one to many relationship. – <a href="https://stackoverflow.com/a/56298555">Link</a></p>
</blockquote>



<p>For example in the table shown below we are storing <code>*_ids</code> as an array rather than storing them in a flat manner and defining relationships with other tables. You don’t know how many users and projects will be mentioned so it will be wasteful to create columns like <code>mentioned_user_id1</code> , <code>mentioned_user_id2</code>, <code>mentioned_user_id3</code> and so on.</p>


<div><pre title="">  CREATE TABLE alert_management_alert_user_mentions (
      id bigint NOT NULL,
      alert_management_alert_id bigint NOT NULL,
      note_id bigint,
      mentioned_users_ids integer[],
      mentioned_projects_ids integer[],
      mentioned_groups_ids integer[]
  );
</pre></div>


<p>Another common use case of Postgres array is to store fields like hosts, tags, urls.</p>


<div><pre title="">  CREATE TABLE dast_site_profiles (
      id bigint NOT NULL,
      excluded_urls text[] DEFAULT '{}'::text[] NOT NULL,
  );
  CREATE TABLE alert_management_alerts (
    id bigint NOT NULL,
    hosts text[] DEFAULT '{}'::text[] NOT NULL,
  );
  CREATE TABLE ci_pending_builds (
      id bigint NOT NULL,
      tag_ids integer[] DEFAULT '{}'::integer[],
  );
</pre></div>


<h2>Conclusion</h2>



<p>I learnt a lot from the GitLab schema. They don’t blindly apply the same practices to all the table designs. Each table makes the best decision based on its purpose, the kind of data it stores, and its rate of growth.</p>



<h2>References</h2>



<ol><li>Gitlab schema <code>structure.sql</code> – <a href="https://gitlab.com/gitlab-org/gitlab/-/blob/master/db/structure.sql">Link</a></li><li>Issue 29465: Use structure.sql instead of schema.rb – <a href="https://gitlab.com/gitlab-org/gitlab/-/issues/29465">Link</a></li><li>Choosing Primary Key Type in Postgres – <a href="https://shekhargulati.com/2022/06/23/choosing-a-primary-key-type-in-postgres/">Link</a></li><li>Github’s Path to 128M public repositories – <a href="https://towardsdatascience.com/githubs-path-to-128m-public-repositories-f6f656ab56b1#:~:text=There%20are%20over%20128%20million%20public%20repositories%20on%20GitHub.">Link</a></li><li>Postgres Character Types Documentation – <a href="https://www.postgresql.org/docs/current/datatype-character.html">Link</a></li><li>Difference between text and varchar (character varying) – <a href="https://stackoverflow.com/questions/4848964/difference-between-text-and-varchar-character-varying">Link</a></li><li>CHAR(x) vs. VARCHAR(x) vs. VARCHAR vs. TEXT – <a href="https://www.depesz.com/2010/03/02/charx-vs-varcharx-vs-varchar-vs-text/">Link</a></li></ol>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Releasing my tools under the MIT License was probably a mistake (2023) (114 pts)]]></title>
            <link>https://donatstudios.com/License-Grumbles</link>
            <guid>39413562</guid>
            <pubDate>Sat, 17 Feb 2024 21:06:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://donatstudios.com/License-Grumbles">https://donatstudios.com/License-Grumbles</a>, See on <a href="https://news.ycombinator.com/item?id=39413562">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>	
	<p>For basically as long as I can remember, I have been a staunch defender of permissive licenses over the more copyleft variety. I <em>want</em> you to use things I've written. On top of that I don't believe it's my place to force you to then open source things you have written that expand upon my source code. Hence my extensive use of the MIT License.</p>
<p>The MIT License is very simple. It basically says you can do whatever you want with the code, but you have to include the license and copyright when redistributing the code itself. It does not however require you to open source any modifications you make to the code, nor provide attribution to the non-code products of the work.</p>
<p>With my libraries, this has served me very well. It's great, people use and contribute fixes back, and often donate back to me. I love it. I want you to use my code in your proprietary software. I open sourced it so you could do that. I specifically build open source libraries because I solved a problem I thought other people might face and wanted to save them time. Lifting the sea for all boats and all that. I have zero problem continuing to use the MIT License on my libraries.</p>
<p>I also open sourced the tools I host on my website, including but not limited to <a href="https://donatstudios.com/PixelCircleGenerator">Pixel Circle / Oval Generator</a> and <a href="https://donatstudios.com/RewriteRule_Generator">Batch RewriteRule Generator</a>. The MIT License seemed like the natural choice because I've been using it for everything I've released since the early 2000's.</p>
<p>I'd considered these as just <em>part of my website</em> far more so than something I thought people would reuse. My intentions open sourcing these tools, unlike my libraries, was to promote the community helping me to improve them - and they certainly have done so. I have gotten so much great feedback and contributions to these tools, and I am very happy with that. Massive shout out to <a href="https://github.com/Tyson453">Tyson453</a> for his insanely awesome work improving the speed of the Pixel Circle / Oval Generator.</p>
<p>Against my well meaning intentions however, websites re-hosting my tools have been popping up like weeds. In some cases, they are even beating me in search results for my own tools. With noted exception, they don't credit me as the author or provide any sort of link back. Many of them have made minor or major modifications to the tools, and next to none provide the source to those modifications. A number of them even have the gall to post links advertising them in the comments of my own tools.</p>
<p>Most irksome of all, in a fair number of cases they sit centrally on pages covered in ads and SEO keywords. My tools are being associated with a genuinely bad user experience.</p>
<p>This is all perfectly legal and allowed under the MIT License. That's on me. It just is not in the spirit of what I intended. I didn't have the foresight to see this coming. I didn't think people so lacked in the spirit of open source. I wanted to promote community contributions, not to have them monetized by other people who <strong>don't even provide the source to their modifications</strong>. I wanted to grow the tools as a community, not have closed source forks of them overtake my own open source versions.</p>
<p>There's not a lot I can do. I could try to contact the owners of these sites and ask them to provide attribution, but there's no obligation for them to do so. I could try to contact the owners of these sites and ask them to provide the source to their modifications, but again there is no obligation for them to do so. I really wish to see the changes shared alike, and the vain part of me would like attribution as the original author. At the end of the day though I chose the MIT License and it is what it is. It simply does not require any of that.</p>
<hr>
<p>On top of everything else, until very recently and for completely unclear reasons, my website Donat Studios was completely blocked from Bing search results. This in turn meant I didn't show up in DuckDuckGo or Yahoo results either. This meant that for a time the only results when searching these sites for my tools were these re-hosted versions.</p>
<p>I actually managed to reach a human at Bing and get this resolved, but it took a lot of work and I'm still not sure why it happened in the first place.</p>
<hr>
<p>I am considering relicensing my tools under some sort of Attribution-ShareAlike license similar to the <a href="https://creativecommons.org/licenses/by-sa/3.0/">BY-SA</a> the content on this site is licensed under. It would not apply to current and past versions of the tools as that code is licensed MIT and you can't un-ring that bell. It would however apply to future versions. This would still promote community contributions, but would also require that any modifications be shared alike meaning that the modified source would have to be provided and I would have to be credited as the original author.</p>
<p>At the very least I will definitely think twice about the license I choose for future tools. I don't want to be a jerk about it, but I also don't want to see them monetized by others without even a link back to my website.</p><hr>
	
	
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Bevy 0.13: ECS-driven game engine built in Rust (107 pts)]]></title>
            <link>https://bevyengine.org/news/bevy-0-13/</link>
            <guid>39412940</guid>
            <pubDate>Sat, 17 Feb 2024 20:01:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://bevyengine.org/news/bevy-0-13/">https://bevyengine.org/news/bevy-0-13/</a>, See on <a href="https://news.ycombinator.com/item?id=39412940">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p><img src="https://bevyengine.org/news/bevy-0-13/jarl.webp"></p>
    
    
  </div><div><p>Thanks to <strong>198</strong> contributors, <strong>672</strong> pull requests, community reviewers, and our <a href="https://bevyengine.org/community/donate"><strong>generous sponsors</strong></a>, we're happy to announce the <strong>Bevy 0.13</strong> release on <a href="https://crates.io/crates/bevy">crates.io</a>!</p>
<p>For those who don't know, Bevy is a refreshingly simple data-driven game engine built in Rust. You can check out our <a href="https://bevyengine.org/learn/quick-start">Quick Start Guide</a> to try it today. It's free and open source forever! You can grab the full <a href="https://github.com/bevyengine/bevy">source code</a> on GitHub. Check out <a href="https://bevyengine.org/assets">Bevy Assets</a> for a collection of community-developed plugins, games, and learning resources.
And to see what the engine has to offer hands-on, check out the entries in the <a href="https://itch.io/jam/bevy-jam-4/entries">latest Bevy Jam</a>, including the winner <a href="https://andrewb330.itch.io/thats-a-lot-of-beeeeees">That's a LOT of beeeeees</a>.</p>
<p>To update an existing Bevy App or Plugin to <strong>Bevy 0.13</strong>, check out our <a href="https://bevyengine.org/learn/migration-guides/0-12-to-0-13/">0.12 to 0.13 Migration Guide</a>.</p>
<p>Since our last release a few months ago we've added a <em>ton</em> of new features, bug fixes, and quality of life tweaks, but here are some of the highlights:</p>
<ul>
<li><strong>Lightmaps:</strong> A fast, popular baked global illumination technique for static geometry (baked externally in programs like The Lightmapper).</li>
<li><strong>Irradiance Volumes / Voxel Global Illumination:</strong> A baked form of global illumination that samples light at the centers of voxels within a cuboid (baked externally in programs like Blender).</li>
<li><strong>Approximate Indirect Specular Occlusion</strong>: Improved lighting realism by reducing specular light leaking via specular occlusion.</li>
<li><strong>Reflection Probes</strong>: A baked form of axis aligned environment map that allows for realistic reflections for static geometry (baked externally in programs like Blender)</li>
<li><strong>Primitive shapes:</strong> Basic shapes are a core building block of both game engines and video games: we've added a polished, ready-to-use collection of them!</li>
<li><strong>System stepping:</strong> Completely pause and advance through your game frame-by-frame or system-by-system to interactively debug game logic, all while rendering continues to update.</li>
<li><strong>Dynamic queries:</strong> Refining queries from within systems is extremely expressive, and is the last big puzzle piece for runtime-defined types and third-party modding and scripting integration.</li>
<li><strong>Automatically inferred command flush points:</strong> Tired of reasoning about where to put <code>apply_deferred</code> and confused about why your commands weren't being applied? Us too! Now, Bevy's scheduler uses ordinary <code>.before</code> and <code>.after</code> constraints and inspects the system parameters to automatically infer (and deduplicate) synchronization points.</li>
<li><strong>Slicing, tiling and nine-patch 2D images:</strong> Ninepatch layout is a popular tool for smoothly scaling stylized tilesets and UIs. Now in Bevy!</li>
<li><strong>Camera-Driven UI</strong>: UI entity trees can now be selectively added to <em>any</em> camera, rather than being globally applied to all cameras, enabling things like split screen UIs!</li>
<li><strong>Camera Exposure</strong>: Realistic / "real world" control over camera exposure via EV100, f-stops, shutter speed, and ISO sensitivity. Lights have also been adjusted to make their units more realistic.</li>
<li><strong>Animation interpolation modes:</strong> Bevy now supports non-linear interpolation modes in exported glTF animations.</li>
</ul>
<h2 id="initial-baked-lighting">Initial Baked Lighting
<a href="#initial-baked-lighting">#</a>
</h2>
<p>Computing lighting in real time is expensive;
but for elements of a scene that never move (like rooms or terrain),
we can get prettier lighting and shadows for cheaper by computing it ahead of time using <strong>global illumination</strong>,
then storing the results in a "baked" form that never changes.
Global illumination is a more realistic (and expensive) approach to lighting that often uses ray tracing.
Unlike Bevy's default rendering, it takes light bouncing off of other objects into account,
producing more realistic effects through the inclusion of indirect light.</p>
<h3 id="lightmaps">Lightmaps
<a href="#lightmaps">#</a>
</h3>

<p><img src="https://bevyengine.org/news/bevy-0-13/lightmap.jpg" alt="lightmaps"></p>
<p><strong>Lightmaps</strong> are textures that store pre-computed global illumination results. They have been a mainstay of real-time graphics for decades. <strong>Bevy 0.13</strong> adds initial support for rendering lightmaps computed in other programs, such as <a href="https://github.com/Naxela/The_Lightmapper">The Lightmapper</a>. Ultimately we would like to add support for baking lightmaps directly in Bevy, but this first step unlocks lightmap workflows!</p>
<p>Like the <a href="https://github.com/bevyengine/bevy/blob/main/examples/3d/lightmaps.rs">lightmaps example</a> shows, just load in your baked lightmap image, and then insert a <a href="https://docs.rs/bevy/0.13.0/bevy/pbr/struct.Lightmap.html"><code>Lightmap</code></a> component on the corresponding mesh.</p>
<h3 id="irradiance-volumes-voxel-global-illumination">Irradiance Volumes / Voxel Global Illumination
<a href="#irradiance-volumes-voxel-global-illumination">#</a>
</h3>
<p>authors: @pcwalton</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/irradiance_volume.jpg" alt="irradiance volume"></p>
<p><strong>Irradiance volumes</strong> (or voxel global illumination) is a technique used for approximating indirect light by first dividing
a scene into cubes (voxels), then sampling the amount of light present at the center of each of those voxels.
This light is then added to objects within that space as they move through it, changing the ambient light level on those objects appropriately.</p>
<p>We've chosen to use the ambient cubes algorithm for this, based on Half Life 2.
This allows us to match Blender's <a href="https://docs.blender.org/manual/en/latest/render/eevee/index.html">Eevee renderer</a>, giving users a simple and free path to creating nice-looking irradiance volumes for their own scenes.</p>
<p>Notice how this sphere subtly picks up the colors of the environment as it moves around, thanks to irradiance volumes:</p>

<p>For now, you need to use external tools such as Blender to bake irradiance volumes, but in the future we would like to support baking irradiance volumes directly in Bevy!</p>
<h2 id="minimal-reflection-probes">Minimal Reflection Probes
<a href="#minimal-reflection-probes">#</a>
</h2>
<p>authors: @pcwalton</p>
<p><strong>Environment maps</strong> are 2D textures used to simulate lighting, reflection, and skyboxes in a 3D scene.
<strong>Reflection probes</strong> generalize environment maps to allow for multiple environment maps in the same scene, each of which has its own axis-aligned bounding box.
This is a standard feature of physically-based renderers and was inspired by the <a href="https://docs.blender.org/manual/en/latest/render/eevee/light_probes/reflection_cubemaps.html">corresponding feature in Blender's Eevee renderer</a>.</p>
<p>In the <a href="https://github.com/bevyengine/bevy/pull/11366">reflection probes PR</a>, we've added basic support for these, laying the groundwork for pretty, high-performance reflections in Bevy games.
Like with the baked global illumination work discussed above, these must currently be precomputed externally, then imported into Bevy.
As discussed in the PR, there are quite a few caveats: WebGL2 support is effectively non-existent, sharp and sudden transitions will be observed because there's no blending,
and all cubemaps in the world of a given type (diffuse or specular) must have the same size, format, and mipmap count.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/reflection_probes.jpg" alt="reflection probes"></p>
<h2 id="approximate-indirect-specular-occlusion">Approximate Indirect Specular Occlusion
<a href="#approximate-indirect-specular-occlusion">#</a>
</h2>
<p>authors: @aevyrie</p>
<p>Bevy's current PBR renderer over-brightens the image, especially at grazing angles where the fresnel
effect tends to make surfaces behave like mirrors. This over-brightening happens because the
surfaces must reflect <em>something</em>, but without path traced or screen-space reflections, the renderer
has to guess <em>what</em> is being reflected. The best guess it can make is to sample the environment cube
map, even if light would've hit something else before reaching the environment light. This artifact,
where light occlusion is ignored, is called specular light leaking.</p>
<p>Consider a car tire; though the rubber might be shiny, you wouldn't expect it to have bright
specular highlights inside a wheel well, because the car itself is blocking (occluding) the light
that would otherwise cause these reflections. Fully checking for occlusion can be computationally
expensive.</p>
<p><strong>Bevy 0.13</strong> adds support for <strong>Approximate Indirect Specular Occlusion</strong>, which uses our existing <a href="https://bevyengine.org/news/bevy-0-11/#screen-space-ambient-occlusion">Screen Space Ambient Occlusion</a> to <em>approximate</em> specular occlusion, which can run efficiently in real time while still producing reasonably high quality results:</p>
<p><b>Drag this image to compare</b></p>
<p><img alt="Specular Occlusion On" src="https://bevyengine.org/news/bevy-0-13/specular_occlusion_on.jpg">
  <img alt="Specular Occlusion Off" src="https://bevyengine.org/news/bevy-0-13/specular_occlusion_off.jpg">
</p>

<p>In the future, this could be further improved with screen space reflections (SSR).
However, conventional wisdom is that you should use specular occlusion alongside SSR, because SSR still suffers from light leaking artifacts.</p>
<h2 id="primitive-shapes">Primitive Shapes
<a href="#primitive-shapes">#</a>
</h2>
<p>authors: @Jondolf, @NiseVoid, @aevyrie</p>
<p>Geometric shapes are used all across game development, from primitive mesh shapes and debug gizmos to physics colliders and raycasting. Despite being so commonly used across several domains, Bevy hasn't really had any general-purpose shape representations.</p>
<p>This is changing in <strong>Bevy 0.13</strong> with the introduction of first-party <strong>primitive shapes</strong>! They are lightweight geometric primitives designed for maximal interoperability and reusability, allowing Bevy and third-party plugins to use the same set of basic shapes and increase cohesion within the ecosystem. See the original <a href="https://github.com/bevyengine/rfcs/blob/main/rfcs/12-primitive-shapes.md">RFC</a> for more details.</p>
<p>The built-in <a href="https://docs.rs/bevy/0.13.0/bevy/math/primitives/index.html">collection of primitives</a> is already quite sizeable:</p>
<table><thead><tr><th>2D</th><th>3D</th></tr></thead><tbody>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Rectangle.html"><code>Rectangle</code></a></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Cuboid.html"><code>Cuboid</code></a></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Circle.html"><code>Circle</code></a></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Sphere.html"><code>Sphere</code></a></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Ellipse.html"><code>Ellipse</code></a></td><td></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Triangle2d.html"><code>Triangle2d</code></a></td><td></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Plane2d.html"><code>Plane2d</code></a></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Plane3d.html"><code>Plane3d</code></a></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Line2d.html"><code>Line2d</code></a></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Line3d.html"><code>Line3d</code></a></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Segment2d.html"><code>Segment2d</code></a></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Segment3d.html"><code>Segment3d</code></a></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Polyline2d.html"><code>Polyline2d</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.BoxedPolyline2d.html"><code>BoxedPolyline2d</code></a></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Polyline3d.html"><code>Polyline3d</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.BoxedPolyline3d.html"><code>BoxedPolyline3d</code></a></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Polygon.html"><code>Polygon</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.BoxedPolygon.html"><code>BoxedPolygon</code></a></td><td></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.RegularPolygon.html"><code>RegularPolygon</code></a></td><td></td></tr>
<tr><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Capsule2d.html"><code>Capsule2d</code></a></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Capsule3d.html"><code>Capsule3d</code></a></td></tr>
<tr><td></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Cylinder.html"><code>Cylinder</code></a></td></tr>
<tr><td></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Cone.html"><code>Cone</code></a></td></tr>
<tr><td></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.ConicalFrustum.html"><code>ConicalFrustum</code></a></td></tr>
<tr><td></td><td><a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Torus.html"><code>Torus</code></a></td></tr>
</tbody></table>
<p><a href="https://github.com/bevyengine/bevy/issues/10572">More primitives</a> will be added in future releases.</p>
<p>Some use cases for primitive shapes include meshing, gizmos, bounding volumes, colliders, and ray casting functionality. Several of these have landed in 0.13 already!</p>
<h3 id="rendering">Rendering
<a href="#rendering">#</a>
</h3>
<p>Primitive shapes can be rendered using both meshes and gizmos. In this section, we'll take a closer look at the new APIs.</p>
<p>Below, you can see a cuboid and a torus rendered using meshes and gizmos. You can check out all primitives that can be rendered in the new <a href="https://bevyengine.org/examples/Math/render-primitives">Rendering Primitives</a> example.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/cuboids.png" alt="On the left: A cuboid rendered with gizmos. It consists of 12 white lines. On the right: A cuboid rendered with meshes. It consists of 6 white faces."></p>
<p><img src="https://bevyengine.org/news/bevy-0-13/tori.png" alt="On the left: A torus rendered with gizmos. It consists of many small rings, all connected by 4 big rings. On the right: A torus rendered with meshes. A shape that looks like a donut."></p>
<h4 id="meshing">Meshing
<a href="#meshing">#</a>
</h4>
<p>authors: @Jondolf</p>
<p>Previous versions of Bevy have had types like <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/shape/struct.Quad.html"><code>Quad</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/shape/struct.Box.html"><code>Box</code></a>, and <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/shape/struct.UVSphere.html"><code>UVSphere</code></a> for creating meshes from basic shapes. These have been deprecated in favor of a builder-like API using the new geometric primitives.</p>
<p>Primitives that support meshing implement the <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/trait.Meshable.html"><code>Meshable</code></a> trait. For some shapes, the <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/trait.Meshable.html#tymethod.mesh"><code>mesh</code></a> method returns a <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Mesh.html"><code>Mesh</code></a> directly:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span>let</span> before <span>=</span> <span>Mesh<span>::</span></span>from<span><span>(</span><span>Quad<span>::</span></span>new<span><span>(</span><span>Vec2<span>::</span></span>new<span><span>(</span><span>2.</span><span>0</span><span>,</span> <span>1.</span><span>0</span></span><span><span>)</span></span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
<span>let</span> after <span>=</span> <span>Rectangle<span>::</span></span>new<span><span>(</span><span>2.</span><span>0</span><span>,</span> <span>1.</span><span>0</span></span><span><span>)</span></span><span>.</span><span>mesh</span><span><span>(</span></span><span><span>)</span></span><span>;</span> <span><span>//</span> Mesh::from also works
</span></span></code></pre>
<p>For most primitives however, it returns a builder for optional configuration:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> Create a circle mesh with a specified vertex count
</span><span>let</span> before <span>=</span> <span>Mesh<span>::</span></span>from<span><span>(</span>Circle <span><span>{</span>
    radius<span>:</span> <span>1.</span><span>0</span><span>,</span>
    vertices<span>:</span> <span>64</span><span>,</span>
</span><span><span>}</span></span></span><span><span>)</span></span><span>;</span>
<span>let</span> after <span>=</span> <span>Circle<span>::</span></span>new<span><span>(</span><span>1.</span><span>0</span></span><span><span>)</span></span><span>.</span><span>mesh</span><span><span>(</span></span><span><span>)</span></span><span>.</span><span>resolution</span><span><span>(</span><span>64</span></span><span><span>)</span></span><span>.</span><span>build</span><span><span>(</span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>Below are a few more examples of meshing with the new primitives.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> Icosphere
</span><span>let</span> before <span>=</span> meshes<span>.</span><span>add</span><span><span>(</span>
    <span>Mesh<span>::</span></span>try_from<span><span>(</span>Icosphere <span><span>{</span>
        radius<span>:</span> <span>2.</span><span>0</span><span>,</span>
        subdivisions<span>:</span> <span>8</span><span>,</span>
    </span><span><span>}</span></span></span><span><span>)</span></span>
    <span>.</span><span>unwrap</span><span><span>(</span></span><span><span>)</span></span>
</span><span><span>)</span></span><span>;</span>
<span>let</span> after <span>=</span> meshes<span>.</span><span>add</span><span><span>(</span><span>Sphere<span>::</span></span>new<span><span>(</span><span>2.</span><span>0</span></span><span><span>)</span></span><span>.</span><span>mesh</span><span><span>(</span></span><span><span>)</span></span><span>.</span><span>ico</span><span><span>(</span><span>8</span></span><span><span>)</span></span><span>.</span><span>unwrap</span><span><span>(</span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>

<span><span>//</span> Cuboid
</span><span><span>//</span> (notice how Assets::add now also handles mesh conversion automatically)
</span><span>let</span> before <span>=</span> meshes<span>.</span><span>add</span><span><span>(</span><span>Mesh<span>::</span></span>from<span><span>(</span><span>shape<span>::</span></span><span>Box<span>::</span></span>new<span><span>(</span><span>2.</span><span>0</span><span>,</span> <span>1.</span><span>0</span><span>,</span> <span>1.</span><span>0</span></span><span><span>)</span></span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
<span>let</span> after <span>=</span> meshes<span>.</span><span>add</span><span><span>(</span><span>Cuboid<span>::</span></span>new<span><span>(</span><span>2.</span><span>0</span><span>,</span> <span>1.</span><span>0</span><span>,</span> <span>1.</span><span>0</span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>

<span><span>//</span> Plane
</span><span>let</span> before <span>=</span> meshes<span>.</span><span>add</span><span><span>(</span><span>Mesh<span>::</span></span>from<span><span>(</span><span>Plane<span>::</span></span>from_size<span><span>(</span><span>5.</span><span>0</span></span><span><span>)</span></span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
<span>let</span> after <span>=</span> meshes<span>.</span><span>add</span><span><span>(</span><span>Plane3d<span>::</span></span>default<span><span>(</span></span><span><span>)</span></span><span>.</span><span>mesh</span><span><span>(</span></span><span><span>)</span></span><span>.</span><span>size</span><span><span>(</span><span>5.</span><span>0</span><span>,</span> <span>5.</span><span>0</span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>With the addition of the primitives, meshing is also supported for more shapes, like <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Ellipse.html"><code>Ellipse</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Triangle2d.html"><code>Triangle2d</code></a>, and <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Capsule2d.html"><code>Capsule2d</code></a>. However, note that meshing is not yet implemented for all primitives, such as <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Polygon.html"><code>Polygon</code></a> and <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Cone.html"><code>Cone</code></a>.</p>
<p>Below you can see some meshes in the <a href="https://bevyengine.org/examples/2D%20Rendering/2d-shapes/"><code>2d_shapes</code></a> and <a href="https://bevyengine.org/examples/3D%20Rendering/3d-shapes/"><code>3d_shapes</code></a> examples.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/2d_shapes.png" alt="An example with 2D mesh shapes"></p>
<p><img src="https://bevyengine.org/news/bevy-0-13/3d_shapes.png" alt="An example with 3D mesh shapes"></p>
<p>Some default values for mesh shape dimensions have also been changed to be more consistent.</p>
<h4 id="gizmos">Gizmos
<a href="#gizmos">#</a>
</h4>
<p>authors: @RobWalt</p>
<p>Primitives can also be rendered with <a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/prelude/struct.Gizmos.html"><code>Gizmos</code></a>. There are two new generic methods:</p>
<ul>
<li><a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/prelude/trait.GizmoPrimitive2d.html"><code>gizmos.primitive_2d(primitive, position, angle, color)</code></a></li>
<li><a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/prelude/trait.GizmoPrimitive2d.html"><code>gizmos.primitive_3d(primitive, position, rotation, color)</code></a></li>
</ul>
<p>Some primitives can have additional configuration options similar to existing <a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/prelude/struct.Gizmos.html"><code>Gizmos</code></a> drawing methods.
For example, calling <a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/prelude/trait.GizmoPrimitive2d.html"><code>primitive_3d</code></a> with a <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/struct.Sphere.html"><code>Sphere</code></a> returns a <a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/primitives/dim3/struct.SphereBuilder.html"><code>SphereBuilder</code></a>, which offers a <code>segments</code> method
to control the level of detail of the sphere.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span>let</span> sphere <span>=</span> Sphere <span><span>{</span> radius </span><span><span>}</span></span><span>;</span>
gizmos
    <span>.</span><span>primitive_3d</span><span><span>(</span>sphere<span>,</span> center<span>,</span> rotation<span>,</span> color</span><span><span>)</span></span>
    <span>.</span><span>segments</span><span><span>(</span>segments</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<h3 id="bounding-volumes">Bounding Volumes
<a href="#bounding-volumes">#</a>
</h3>
<p>authors: @NiseVoid, @Jondolf</p>
<p>In game development, spatial checks have several valuable use cases, such as getting all entities that are in the camera's view frustum or near the player, or finding pairs of physics objects that might be intersecting. To speed up such checks, bounding volumes are used to approximate more complex shapes.</p>
<p><strong>Bevy 0.13</strong> adds some new publicly available bounding volumes: <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.Aabb2d.html"><code>Aabb2d</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.Aabb3d.html"><code>Aabb3d</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.BoundingCircle.html"><code>BoundingCircle</code></a>, and <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.BoundingSphere.html"><code>BoundingSphere</code></a>. These can be created manually, or generated from primitive shapes.</p>
<p>Each bounding volume implements the <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/trait.BoundingVolume.html"><code>BoundingVolume</code></a> trait, providing some general functionality and helpers. The <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/trait.IntersectsVolume.html"><code>IntersectsVolume</code></a> trait can be used to test for intersections with these volumes. This trait is implemented for bounding volumes themselves, so you can test for intersections between them. This is supported between all existing bounding volume types, but only those in the same dimension.</p>
<p>Here is an example of how bounding volumes are constructed, and how an intersection test is performed:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> We create an axis-aligned bounding box that is centered at position
</span><span>let</span> position <span>=</span> <span>Vec2<span>::</span></span>new<span><span>(</span><span>100.</span><span>,</span> <span>50.</span></span><span><span>)</span></span><span>;</span>
<span>let</span> half_size <span>=</span> <span>Vec2<span>::</span></span>splat<span><span>(</span><span>20.</span></span><span><span>)</span></span><span>;</span>
<span>let</span> aabb <span>=</span> <span>Aabb2d<span>::</span></span>new<span><span>(</span>position<span>,</span> half_size</span><span><span>)</span></span><span>;</span>

<span><span>//</span> We create a bounding circle that is centered at position
</span><span>let</span> position <span>=</span> <span>Vec2<span>::</span></span>new<span><span>(</span><span>80.</span><span>,</span> <span>70.</span></span><span><span>)</span></span><span>;</span>
<span>let</span> radius <span>=</span> <span>30.</span><span>;</span>
<span>let</span> bounding_circle <span>=</span> <span>BoundingCircle<span>::</span></span>new<span><span>(</span>position<span>,</span> radius</span><span><span>)</span></span><span>;</span>

<span><span>//</span> We check if the volumes are intersecting
</span><span>let</span> intersects <span>=</span> bounding_circle<span>.</span><span>intersects</span><span><span>(</span><span>&amp;</span>aabb</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>There are also two traits for the generation of bounding volumes: <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/trait.Bounded2d.html"><code>Bounded2d</code></a> and <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/trait.Bounded3d.html"><code>Bounded3d</code></a>. These are implemented for the new primitive shapes, so you can easily compute bounding volumes for them:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> We create a primitive, a hexagon in this case
</span><span>let</span> hexagon <span>=</span> <span>RegularPolygon<span>::</span></span>new<span><span>(</span><span>50.</span><span>,</span> <span>6</span></span><span><span>)</span></span><span>;</span>

<span>let</span> translation <span>=</span> <span>Vec2<span>::</span></span>new<span><span>(</span><span>50.</span><span>,</span> <span>200.</span></span><span><span>)</span></span><span>;</span>
<span>let</span> rotation <span>=</span> <span>PI</span> <span>/</span> <span>2.</span><span>;</span> <span><span>//</span> Rotation in radians
</span>
<span><span>//</span> Now we can get an Aabb2d or BoundingCircle from this primitive.
</span><span><span>//</span> These methods are part of the Bounded2d trait.
</span><span>let</span> aabb <span>=</span> hexagon<span>.</span><span>aabb_2d</span><span><span>(</span>translation<span>,</span> rotation</span><span><span>)</span></span><span>;</span>
<span>let</span> circle <span>=</span> hexagon<span>.</span><span>bounding_circle</span><span><span>(</span>translation<span>,</span> rotation</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<h4 id="ray-casting-and-volume-casting">Ray Casting and Volume Casting
<a href="#ray-casting-and-volume-casting">#</a>
</h4>
<p>The bounding volumes also support basic ray casting and volume casting. Ray casting tests if a bounding volume intersects with a given ray, cast from an origin in a direction, until a maximum distance. Volume casts work similarly, but function as if moving a volume along the ray.</p>
<p>This functionality is provided through the new <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.RayCast2d.html"><code>RayCast2d</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.RayCast3d.html"><code>RayCast3d</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.AabbCast2d.html"><code>AabbCast2d</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.AabbCast3d.html"><code>AabbCast3d</code></a>, <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.BoundingCircleCast.html"><code>BoundingCircleCast</code></a>, and <a href="https://docs.rs/bevy/0.13.0/bevy/math/bounding/struct.BoundingSphereCast.html"><code>BoundingSphereCast</code></a> types. They can be used to check for intersections against bounding volumes, and to compute the distance from the origin of the cast to the point of intersection.</p>
<p>Below, you can see ray casting, volume casting, and intersection tests in action:</p>

<p>To make it easier to reason about ray casts in different dimensions, the old <a href="https://docs.rs/bevy/0.12.1/bevy/math/struct.Ray.html"><code>Ray</code></a> type has also been split into <a href="https://docs.rs/bevy/0.13.0/bevy/math/struct.Ray2d.html"><code>Ray2d</code></a> and <a href="https://docs.rs/bevy/0.13.0/bevy/math/struct.Ray3d.html"><code>Ray3d</code></a>. The new <a href="https://docs.rs/bevy/0.13.0/bevy/math/primitives/struct.Direction2d.html"><code>Direction2d</code></a> and <a href="https://docs.rs/bevy/0.13.0/bevy/math/primitives/struct.Direction3d.html"><code>Direction3d</code></a> types are used to ensure that the ray direction remains normalized, providing a type-level guarantee that the vector is always unit-length. These are already in use in some other APIs as well, such as for some primitives and gizmo methods.</p>
<h2 id="system-stepping">System Stepping
<a href="#system-stepping">#</a>
</h2>
<p>authors: @dmlary</p>
<p><strong>Bevy 0.13</strong> adds support for <strong>System Stepping</strong>, which adds debugger-style
execution control for systems.</p>
<p>The <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/schedule/stepping/Stepping.html"><code>Stepping</code></a> resource controls which
systems within a schedule execute each frame, and provides step, break, and
continue functionality to enable live debugging.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span>let</span> <span>mut</span> stepping <span>=</span> <span>Stepping<span>::</span></span>new<span><span>(</span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>You add the schedules you want to step through to the <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/schedule/stepping/Stepping.html"><code>Stepping</code></a> resource. The systems in these schedules can be thought of as the "stepping frame". Systems in the "stepping frame" won't run unless a relevant step or continue action occurs. Schedules that are not added will run on every update, even while stepping. This enables core functionality like rendering to continue working.</p>
<pre data-lang="rust"><code data-lang="rust"><span>stepping<span>.</span><span>add_schedule</span><span><span>(</span>Update</span><span><span>)</span></span><span>;</span>
stepping<span>.</span><span>add_schedule</span><span><span>(</span>FixedUpdate</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>Stepping is disabled by default, even when the resource is inserted. To enable it in apps, feature flags, dev consoles and obscure hotkeys all work great.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>#</span><span>[</span><span>cfg</span><span><span><span>(</span></span></span><span><span>feature <span>=</span> <span><span>"</span>my_stepping_flag<span>"</span></span></span></span><span><span><span>)</span></span></span><span>]</span></span>
stepping<span>.</span><span>enable</span><span><span>(</span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>Finally, you add the <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/schedule/stepping/Stepping.html"><code>Stepping</code></a> resource to the ECS <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/world/struct.World.html"><code>World</code></a>.</p>
<pre data-lang="rust"><code data-lang="rust"><span>app<span>.</span><span>insert_resource</span><span><span>(</span>stepping</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<h3 id="system-step-continue-frame">System Step &amp; Continue Frame
<a href="#system-step-continue-frame">#</a>
</h3>
<p>The "step frame" action runs the system at the stepping
cursor, and advances the cursor during the next render frame.
This is useful to see individual changes made by
systems, and see the state of the world prior to executing a system</p>
<pre data-lang="rust"><code data-lang="rust"><span>stepping<span>.</span><span>step_frame</span><span><span>(</span></span><span><span>)</span></span>
</span></code></pre>
<p>The "continue frame" action will execute systems starting
from the stepping cursor to the end of the stepping frame during the next frame.
It may stop before the end of the stepping frame if it encounters a system with
a breakpoint. This is useful for advancing quickly through an entire frame,
getting to the start of the next frame, or in combination with breakpoints.</p>
<pre data-lang="rust"><code data-lang="rust"><span>stepping<span>.</span><span>continue_frame</span><span><span>(</span></span><span><span>)</span></span>
</span></code></pre>
<p>This video demonstrates these actions on the breakout
example with a custom <code>egui</code> interface.  The stepping cursor can be seen moving through
the systems list as we click the <code>step</code> button.  When the <code>continue</code> button is
clicked, you can see the game progress one stepping frame for each click.</p>

<h3 id="breakpoints">Breakpoints
<a href="#breakpoints">#</a>
</h3>
<p>When a schedule grows to a certain point, it can take a long time to step
through every system in the schedule just to see the effects of a few systems.
In this case, stepping provides system breakpoints.</p>
<p>This video illustrates how a breakpoint on <code>check_for_collisions()</code> behaves with "step" and "continue" actions:</p>

<h3 id="disabling-systems-during-stepping">Disabling Systems During Stepping
<a href="#disabling-systems-during-stepping">#</a>
</h3>
<p>During debugging, it can be helpful to disable systems to narrow down the
source of the problem. <code>Stepping::never_run()</code> and <code>Stepping::never_run_node()</code>
can be used to disable systems while stepping is enabled.</p>
<h3 id="excluding-systems-from-stepping">Excluding Systems from Stepping
<a href="#excluding-systems-from-stepping">#</a>
</h3>
<p>It may be necessary to ensure some systems still run while stepping is enabled.
While best-practice is to have them in a schedule that has not been added to
the <code>Stepping</code> resource, it is possible to configure systems to always run
while stepping is enabled. This is primarily useful for event &amp; input handling
systems.</p>
<p>Systems can be configured to always run by calling
<code>Stepping::always_run()</code>, or <code>Stepping::always_run_node()</code>.
When a system is configured to always run, it will run each rendering frame
even when stepping is enabled.</p>
<h3 id="limitations">Limitations
<a href="#limitations">#</a>
</h3>
<p>There are some limitations in this initial implementation of stepping:</p>
<ul>
<li><strong>Systems that reads events likely will not step properly</strong>: Because frames still advance normally while stepping is enabled, events can be cleared before a stepped system can read them. The best approach here is to configure event-based systems to always run, or put them in a schedule not added to <code>Stepping</code>. "Continue" with breakpoints may also work in this scenario.</li>
<li><strong>Conditional systems may not run as expected when stepping</strong>: Similar to event-based systems, if the run condition is true for only a short time, system may not run when stepped.</li>
</ul>
<h3 id="detailed-examples">Detailed Examples
<a href="#detailed-examples">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/blob/main/examples/ecs/system_stepping.rs">Text-based stepping example</a></li>
<li>Non-interactive <a href="https://github.com/bevyengine/bevy/blob/main/examples/games/stepping.rs">bevy UI example stepping plugin</a> used in the breakout example</li>
<li>Interactive <a href="https://gist.github.com/dmlary/3fd57ebf1f88bb9afa8a6604737dac97">egui stepping plugin</a> used in demo videos</li>
</ul>
<h2 id="camera-exposure">Camera Exposure
<a href="#camera-exposure">#</a>
</h2>
<p>authors: @superdump (Rob Swain), @JMS55, @cart</p>
<p>In the real world, the brightness of an image captured by a camera is determined by its exposure: the amount of light that the camera's sensor or film incorporates. This is controlled by several mechanics of the camera:</p>
<ul>
<li><strong>Aperture</strong>: Measured in F-Stops, the aperture opens and closes to control how much light is allowed into the camera's sensor or film by physically blocking off lights from specific angles, similar to the pupil of an eye.</li>
<li><strong>Shutter Speed</strong>: How long the camera's shutter is open, which is the duration of time that the camera's sensor or film is exposed to light.</li>
<li><strong>ISO Sensitivity</strong>: How sensitive the camera's sensor or film is to light. A higher value indicates a higher sensitivity to light.</li>
</ul>
<p>Each of these plays a role in how much light the final image receives. They can be combined into a final EV number (exposure value), such as the semi-standard EV100 (the exposure value for ISO 100). Higher EV100 numbers mean that more light is required to get the same result. For example, a sunny day scene might require an EV100 of about 15, whereas a dimly lit indoor scene might require an EV100 of about 7.</p>
<p>In <strong>Bevy 0.13</strong>, you can now configure the EV100 on a per-camera basis using the new <a href="https://docs.rs/bevy/0.13.0/bevy/render/camera/struct.Exposure.html"><code>Exposure</code></a> component. You can set it directly using the <a href="https://docs.rs/bevy/0.13.0/bevy/render/camera/struct.Exposure.html#structfield.ev100"><code>Exposure::ev100</code></a> field, or you can use the new <a href="https://docs.rs/bevy/0.13.0/bevy/render/camera/struct.PhysicalCameraParameters.html"><code>PhysicalCameraParameters</code></a> struct to calculate an ev100 using "real world" camera settings like f-stops, shutter speed, and ISO sensitivity.</p>
<p>This is important because Bevy's "physically based" renderer (PBR) is intentionally grounded in reality. Our goal is for people to be able to use real-world units in their lights and materials and have them behave as close to reality as possible.</p>
<p><b>Drag this image to compare</b></p>
<p><img alt="EV100 9.7" src="https://bevyengine.org/news/bevy-0-13/exposure_97.jpg">
  <img alt="EV100 15" src="https://bevyengine.org/news/bevy-0-13/exposure_15.jpg">
</p>
<p>Note that prior versions of Bevy hard-coded a static EV100 for some of its light types. In <strong>Bevy 0.13</strong> it is configurable <em>and</em> consistent across all light types. We have also bumped the default EV100 to 9.7, which is a <a href="https://github.com/bevyengine/bevy/issues/11577#issuecomment-1942873507">number we chose to best match Blender's default exposure</a>. It also happens to be a nice "middle ground" value that sits somewhere between indoor lighting and overcast outdoor lighting.</p>
<p>You may notice that point lights now require <em>significantly</em> higher intensity values (in lumens). This (sometimes) million-lumen values might feel exorbitant. Just reassure yourself that (1) it actually requires a lot of light to meaningfully register in an overcast outdoor environment and (2) Blender exports lights on these scales (and we are calibrated to be as close as possible to them).</p>
<h2 id="camera-driven-ui">Camera-Driven UI
<a href="#camera-driven-ui">#</a>
</h2>
<p>authors: @bardt, @oceantume</p>
<p>Historically, Bevy's UI elements have been scaled and positioned in the context of the primary window, regardless of the camera settings. This approach made some UI experiences like split-screen multiplayer difficult to implement, and others such as having UI in multiple windows impossible.</p>
<p><strong>Bevy 0.13</strong> introduces <strong>Camera-Driven UI</strong>. Each camera can now have its own UI root, rendering according to its viewport, scale factor, and a target which can be a secondary window or even a texture.</p>
<p>This change unlocks a variety of new UI experiences, including split-screen multiplayer, UI in multiple windows, displaying non-interactive UI in a 3D world, and more.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/split-screen.png" alt="Split-screen with independent UI roots"></p>
<p>If there is one camera in the world, you don't need to do anything; your UI will be displayed in that camera's viewport.</p>
<pre data-lang="rust"><code data-lang="rust"><span>commands<span>.</span><span>spawn</span><span><span>(</span>Camera3dBundle <span><span>{</span>
    <span><span>//</span> Camera can have custom viewport, target, etc.
</span></span><span><span>}</span></span></span><span><span>)</span></span><span>;</span>
commands<span>.</span><span>spawn</span><span><span>(</span>NodeBundle <span><span>{</span>
    <span><span>//</span> UI will be rendered to the singular camera's viewport
</span></span><span><span>}</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>When more control is desirable, or there are multiple cameras, we introduce the <a href="https://docs.rs/bevy/0.13.0/bevy/ui/struct.TargetCamera.html"><code>TargetCamera</code></a> component. This component can be added to a root UI node to specify which camera it should be rendered to.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> For split-screen multiplayer, we set up 2 cameras and 2 UI roots
</span><span>let</span> left_camera <span>=</span> commands<span>.</span><span>spawn</span><span><span>(</span>Camera3dBundle <span><span>{</span>
    <span><span>//</span> Viewport is set to left half of the screen
</span></span><span><span>}</span></span></span><span><span>)</span></span><span>.</span><span>id</span><span><span>(</span></span><span><span>)</span></span><span>;</span>

commands
    <span>.</span><span>spawn</span><span><span>(</span><span><span>(</span>
        TargetCamera<span><span>(</span>left_camera</span><span><span>)</span></span><span>,</span>
        NodeBundle <span><span>{</span>
            <span><span>//</span>...
</span>        </span><span><span>}</span></span>
    </span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>

<span>let</span> right_camera <span>=</span> commands<span>.</span><span>spawn</span><span><span>(</span>Camera3dBundle <span><span>{</span>
    <span><span>//</span> Viewport is set to right half of the screen
</span></span><span><span>}</span></span></span><span><span>)</span></span><span>.</span><span>id</span><span><span>(</span></span><span><span>)</span></span><span>;</span>

commands
    <span>.</span><span>spawn</span><span><span>(</span><span><span>(</span>
        TargetCamera<span><span>(</span>right_camera</span><span><span>)</span></span><span>,</span>
        NodeBundle <span><span>{</span>
            <span><span>//</span>...
</span>        </span><span><span>}</span></span></span><span><span>)</span></span>
    </span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>With this change, we also remove <a href="https://docs.rs/bevy/0.12.1/bevy/ui/camera_config/struct.UiCameraConfig.html"><code>UiCameraConfig</code></a> component. If you were using it to hide UI nodes, you can achieve the same outcome by setting <a href="https://docs.rs/bevy/0.13.0/bevy/render/view/enum.Visibility.html"><code>Visibility</code></a> component on the root node.</p>
<pre data-lang="rust"><code data-lang="rust"><span>commands<span>.</span><span>spawn</span><span><span>(</span><span>Camera3dBundle<span>::</span></span>default<span><span>(</span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
commands<span>.</span><span>spawn</span><span><span>(</span>NodeBundle <span><span>{</span>
    visibility<span>:</span> <span>Visibility<span>::</span></span>Hidden<span>,</span> <span><span>//</span> UI will be hidden
</span>    <span><span>//</span> ...
</span></span><span><span>}</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<h2 id="texture-slicing-and-tiling">Texture Slicing and Tiling
<a href="#texture-slicing-and-tiling">#</a>
</h2>
<p>authors: @ManevilleF</p>
<p>3D rendering gets a lot of love, but 2D features matter too!
We're pleased to add CPU-based <em>slicing and tiling</em> to both <code>bevy_sprite</code> and <code>bevy_ui</code> in <strong>Bevy 0.13</strong>!</p>
<p>This behavior is controlled by a new optional component: <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/enum.ImageScaleMode.html"><code>ImageScaleMode</code></a>.</p>
<h3 id="9-slicing">9 slicing
<a href="#9-slicing">#</a>
</h3>
<p>Adding <code>ImageScaleMode::Sliced</code> to an entity with a sprite or UI bundle enables <a href="https://en.wikipedia.org/wiki/9-slice_scaling">9 slicing</a>,
keeping the image proportions during resizes, avoiding stretching of the texture.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/slice_vs_stretched.png" alt="Stretched Vs Sliced texture"></p>
<p>This is very useful for UI, allowing your pretty textures to look right even as the size of your element changes.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/ui_slice.png" alt="Sliced Buttons"></p>

<pre data-lang="rust"><code data-lang="rust"><span>commands<span>.</span><span>spawn</span><span><span>(</span><span><span>(</span>
    <span>SpriteSheetBundle<span>::</span></span>default<span><span>(</span></span><span><span>)</span></span><span>,</span>
    <span>ImageScaleMode<span>::</span></span>Sliced<span><span>(</span>TextureSlicer <span><span>{</span>
        <span><span>//</span> The image borders are 20 pixels in every direction
</span>        border<span>:</span> <span>BorderRect<span>::</span></span>square<span><span>(</span><span>20.</span><span>0</span></span><span><span>)</span></span><span>,</span>
        <span><span>//</span> we don't stretch the corners more than their actual size (20px)
</span>        max_corner_scale<span>:</span> <span>1.</span><span>0</span><span>,</span>
        <span>..</span><span>default</span><span><span>(</span></span><span><span>)</span></span>
    </span><span><span>}</span></span></span><span><span>)</span></span><span>,</span>
</span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<h3 id="tiling">Tiling
<a href="#tiling">#</a>
</h3>
<p>Adding <code>ImageMode::Tiled { .. }</code> to your 2D sprite entities enables <em>texture tiling</em>: repeating the image until their entire area is fulled.
This is commonly used for backgrounds and surfaces.</p>

<pre data-lang="rust"><code data-lang="rust"><span>commands<span>.</span><span>spawn</span><span><span>(</span><span><span>(</span>
    <span>SpriteSheetBundle<span>::</span></span>default<span><span>(</span></span><span><span>)</span></span><span>,</span>
    <span>ImageScaleMode<span>::</span></span>Tiled <span><span>{</span>
        <span><span>//</span> The image will repeat horizontally
</span>        tile_x<span>:</span> <span>true</span><span>,</span>
        <span><span>//</span> The image will repeat vertically
</span>        tile_y<span>:</span> <span>true</span><span>,</span>
        <span><span>//</span> The texture will repeat if the drawing rect is larger than the image size
</span>        stretch_value<span>:</span> <span>1.</span><span>0</span><span>,</span>
    </span><span><span>}</span></span><span>,</span>
</span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<h2 id="dynamic-queries">Dynamic Queries
<a href="#dynamic-queries">#</a>
</h2>
<p>authors: @james-j-obrien, @jakobhellermann, @Suficio</p>
<p>In Bevy ECS, queries use a type-powered DSL. The full type of the query (what component to access, which filter to use) must be specified at compile time.</p>
<p>Sometimes we can't know what data the query wants to access at compile time. Some scenarios just cannot be done with static queries:</p>
<ul>
<li>Defining queries in scripting languages like Lua or JavaScript.</li>
<li>Defining new components from a scripting language and query them.</li>
<li>Adding a runtime filter to entity inspectors like <a href="https://crates.io/crates/bevy-inspector-egui"><code>bevy-inspector-egui</code></a>.</li>
<li>Adding a <a href="https://github.com/doonv/bevy_dev_console">Quake-style console</a> to modify or query components from a prompt at runtime.</li>
<li>Creating an <a href="https://makeshift-bevy-web-editor.vercel.app/">editor with remote capabilities</a>.</li>
</ul>
<p>Dynamic queries make these all possible. And these are only the plans we've heard about so far!</p>
<p>The standard way of defining a <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.Query.html"><code>Query</code></a> is by using them as system parameters:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>take_damage</span></span><span><span><span>(</span><span>mut</span> <span>player_health</span><span>:</span> <span>Query<span>&lt;</span><span>(</span>Entity, <span>&amp;</span><span>mut</span> Health<span>)</span>, <span>With<span>&lt;</span>Player<span>&gt;</span></span><span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span><span>//</span> ...
</span></span><span><span>}</span></span></span>
</span></code></pre>
<p><strong>This won't change.</strong> And for most (if not all) gameplay use cases, you will
continue to happily use the delightfully simple <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.Query.html"><code>Query</code></a> API.</p>
<p>However, consider this situation: as a game or mod developer I want to list entities
with a specific component through a text prompt. Similarly to how the Quake console works.
What would that look like?</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>#</span><span>[</span><span>derive</span><span><span><span>(</span></span></span><span><span>Resource</span></span><span><span><span>)</span></span></span><span>]</span></span>
<span><span>struct</span> </span><span><span>UserQuery</span></span><span><span><span>(</span>String</span><span>)</span></span><span>;</span>

<span><span>//</span> user_query is entered as a text prompt by the user when the game is running.
</span><span><span>//</span> In a system, it's quickly apparent that we can't use `Query`.
</span><span><span><span>fn</span> </span><span>list_entites_system</span></span><span><span><span>(</span><span>user_query</span><span>:</span> <span>Res<span>&lt;</span>UserQuery<span>&gt;</span></span>, <span>query</span><span>:</span> <span>Query<span>&lt;</span>FIXME, <span>With<span>&lt;</span>FIXME<span>&gt;</span></span><span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span></span><span><span>}</span></span></span>

<span><span>//</span> Even when using the more advanced `World` API, we are stuck.
</span><span><span><span>fn</span> </span><span>list_entities</span></span><span><span><span>(</span><span>user_query</span><span>:</span> String, <span>world</span><span>:</span> <span>&amp;</span><span>mut</span> World</span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span><span>//</span> FIXME: what type goes here?
</span>    <span>let</span> query <span>=</span> world<span>.</span><span>query<span>::</span></span><span><span>&lt;</span>FIXME<span>&gt;</span></span><span><span>(</span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>It's impossible to choose a type based on the value of <code>user_query</code>!
<a href="https://docs.rs/bevy/0.13.0/bevy/ecs/prelude/struct.QueryBuilder.html"><code>QueryBuilder</code></a> solves this problem.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>list_entities</span></span><span><span><span>(</span>
    <span>user_query</span><span>:</span> String,
    <span>type_registry</span><span>:</span> <span>&amp;</span>TypeRegistry,
    <span>world</span><span>:</span> <span>&amp;</span><span>mut</span> World,
</span><span><span><span>)</span></span></span></span><span> <span><span>-&gt;</span> <span><span>Option</span><span>&lt;</span><span>(</span><span>)</span><span>&gt;</span></span></span> </span><span><span><span>{</span>
    <span>let</span> name <span>=</span> user_query<span>.</span><span>split</span><span><span>(</span><span><span>'</span> <span>'</span></span></span><span><span>)</span></span><span>.</span><span>next</span><span><span>(</span></span><span><span>)</span></span><span>?</span><span>;</span>
    <span>let</span> type_id <span>=</span> type_registry<span>.</span><span>get_with_short_type_path</span><span><span>(</span>name</span><span><span>)</span></span><span>?</span><span>.</span><span>type_id</span><span><span>(</span></span><span><span>)</span></span><span>;</span>
    <span>let</span> component_id <span>=</span> world<span>.</span><span>components</span><span><span>(</span></span><span><span>)</span></span><span>.</span><span>get_id</span><span><span>(</span>type_id</span><span><span>)</span></span><span>?</span><span>;</span>

    <span>let</span> query <span>=</span> <span>QueryBuilder<span>::</span></span><span><span>&lt;</span>FilteredEntityRef<span>&gt;</span></span><span><span>::</span></span>new<span><span>(</span><span>&amp;</span><span>mut</span> world</span><span><span>)</span></span>
        <span>.</span><span>ref_id</span><span><span>(</span>component_id</span><span><span>)</span></span>
        <span>.</span><span>build</span><span><span>(</span></span><span><span>)</span></span><span>;</span>

    <span>for</span> entity_ref <span>in</span> query<span>.</span><span>iter</span><span><span>(</span>world</span><span><span>)</span></span> <span><span>{</span>
        <span>let</span> ptr <span>=</span> entity_ref<span>.</span><span>get_by_id</span><span><span>(</span>component_id</span><span><span>)</span></span><span>;</span>
        <span><span>//</span> Convert `ptr` into a `&amp;dyn Reflect` and use it.
</span>    </span><span><span>}</span></span>
    <span>Some</span><span><span>(</span><span><span>(</span></span><span><span>)</span></span></span><span><span>)</span></span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>It is still an error-prone, complex, and unsafe API, but it makes something that was previously
impossible possible.
We expect third party crates to provide convenient wrappers around the <code>QueryBuilder</code> API,
some of which will undoubtedly make their way upstream.</p>
<h2 id="query-transmutation">Query Transmutation
<a href="#query-transmutation">#</a>
</h2>
<p>authors: @hymm, james-j-obrien</p>
<p>Have you ever wanted to pass a query to a function, but instead of having a
<code>Query&lt;&amp;Transform&gt;</code> you have a <code>Query&lt;(&amp;Transform, &amp;Velocity), With&lt;Enemy&gt;&gt;</code>?
In <strong>Bevy 0.13</strong> you can, thanks to the new <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.QueryLens.html"><code>QueryLens</code></a> and <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.Query.html#method.transmute_lens"><code>Query::transmute_lens()</code></a> method.</p>
<p>Query transmutes
allow you to change a query into different query types as long as the
components accessed are a subset of the original query. If you do try to access
data that is not in the original query, this method will panic.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>reusable_function</span></span><span><span><span>(</span><span>lens</span><span>:</span> <span>&amp;</span><span>mut</span> <span>QueryLens<span>&lt;</span><span>&amp;</span>Transform<span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span>let</span> query <span>=</span> lens<span>.</span><span>query</span><span><span>(</span></span><span><span>)</span></span><span>;</span>
    <span><span>//</span> do something with the query...
</span></span><span><span>}</span></span></span>

<span><span>//</span> We can use the function in a system that takes the exact query.
</span><span><span><span>fn</span> </span><span>system_1</span></span><span><span><span>(</span><span>mut</span> <span>query</span><span>:</span> <span>Query<span>&lt;</span><span>&amp;</span>Transform<span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span>reusable_function</span><span><span>(</span><span>&amp;</span><span>mut</span> query<span>.</span><span>as_query_lens</span><span><span>(</span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>

<span><span>//</span> We can also use it with a query that does not match exactly
</span><span><span>//</span> by transmuting it.
</span><span><span><span>fn</span> </span><span>system_2</span></span><span><span><span>(</span><span>mut</span> <span>query</span><span>:</span> <span>Query<span>&lt;</span><span>(</span><span>&amp;</span><span>mut</span> Transform, <span>&amp;</span>Velocity<span>)</span>, <span>With<span>&lt;</span>Enemy<span>&gt;</span></span><span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span>let</span> <span>mut</span> lens <span>=</span> query<span>.</span><span>transmute_lens<span>::</span></span><span><span>&lt;</span><span>&amp;</span>Transform<span>&gt;</span></span><span><span>(</span></span><span><span>)</span></span><span>;</span>
    <span>reusable_function</span><span><span>(</span><span>&amp;</span><span>mut</span> lens</span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>Note that the <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.QueryLens.html"><code>QueryLens</code></a> will still iterate over the same entities as the
original <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.Query.html"><code>Query</code></a> it is derived from. A <code>QueryLens&lt;&amp;Transform&gt;</code> taken from
a <code>Query&lt;(&amp;Transform, &amp;Velocity)&gt;</code>, will only include the <code>Transform</code> of
entities with both <code>Transform</code> and <code>Velocity</code> components.</p>
<p>Besides removing parameters you can also change them in limited ways to the
different smart pointer types. One of the more useful is to change a
<code>&amp; mut</code> to a <code>&amp;</code>. See the <a href="https://docs.rs/bevy/latest/bevy/ecs/system/struct.Query.html#method.transmute_lens">documentation</a>
for more details.</p>
<p>One thing to take into consideration is the transmutation is not free.
It works by creating a new state and copying a bunch of the cached data
inside the original query. It's not a expensive operation, but you should
probably avoid doing it inside a hot loop.</p>
<h2 id="worldquery-trait-split"><code>WorldQuery</code> Trait Split
<a href="#worldquery-trait-split">#</a>
</h2>
<p>authors: @wainwrightmark @taizu-jin</p>
<p>A <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.Query.html"><code>Query</code></a> has two type parameters: one for the the data to be fetched, and a second optional one for the filters.</p>
<p>In previous versions of Bevy both parameters simply required <a href="https://docs.rs/bevy/0.12.0/bevy/ecs/query/trait.WorldQuery.html"><code>WorldQuery</code></a>: there was nothing stopping you from using types intended as filters in the data position (or vice versa).</p>
<p>Apart from making the type signature of the <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.Query.html"><code>Query</code></a> items more complicated (see example below) this usually worked fine as most filters had the same behaviour in either position.</p>
<p>Unfortunately this was not the case for <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/query/struct.Changed.html"><code>Changed</code></a> and <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/query/struct.Added.html"><code>Added</code></a> which had different (and undocumented) behaviour in the data position and this could lead to bugs in user code.</p>
<p>To allow us to prevent this type of bug at compile time, the <a href="https://docs.rs/bevy/0.12.0/bevy/ecs/query/trait.WorldQuery.html"><code>WorldQuery</code></a> trait has been replaced by two traits: <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/query/trait.QueryData.html"><code>QueryData</code></a> and <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/query/trait.QueryFilter.html"><code>QueryFilter</code></a>. The data parameter of a <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/system/struct.Query.html"><code>Query</code></a> must now be <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/query/trait.QueryData.html"><code>QueryData</code></a> and the filter parameter must be <a href="https://docs.rs/bevy/0.13.0/bevy/ecs/query/trait.QueryFilter.html"><code>QueryFilter</code></a>.</p>
<p>Most user code should be unaffected or easy to migrate.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> Probably a subtle bug: `With` filter in the data position - will not compile in 0.13
</span><span><span><span>fn</span> </span><span>my_system</span></span><span><span><span>(</span><span>query</span><span>:</span> <span>Query<span>&lt;</span><span>(</span>Entity, <span>With<span>&lt;</span>ComponentA<span>&gt;</span></span><span>)</span><span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span>
</span><span><span><span>{</span>
    <span><span>//</span> The type signature of the query items is `(Entity, ())`, which is usable but unwieldy
</span>  <span>for</span> <span><span>(</span>entity<span>,</span> <span>_</span></span><span><span>)</span></span> <span>in</span> query<span>.</span><span>iter</span><span><span>(</span></span><span><span>)</span></span><span><span>{</span>
  </span><span><span>}</span></span>
</span><span><span>}</span></span></span>

<span><span>//</span> Idiomatic, compiles in both 0.12 and 0.13
</span><span><span><span>fn</span> </span><span>my_system</span></span><span><span><span>(</span><span>query</span><span>:</span> <span>Query<span>&lt;</span>Entity, <span>With<span>&lt;</span>ComponentA<span>&gt;</span></span><span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span>
</span><span><span><span>{</span>
  <span>for</span> entity <span>in</span> query<span>.</span><span>iter</span><span><span>(</span></span><span><span>)</span></span><span><span>{</span>
  </span><span><span>}</span></span>
</span><span><span>}</span></span></span>
</span></code></pre>
<h2 id="automatically-insert-apply-deferred-systems">Automatically Insert <code>apply_deferred</code> Systems
<a href="#automatically-insert-apply-deferred-systems">#</a>
</h2>
<p>authors: @hymm</p>
<p>When writing gameplay code, you might commonly have one system that wants to
immediately see the effects of commands queued in another system.
Before <strong>Bevy 0.13</strong>, you would have to manually insert an <code>apply_deferred</code> system between the two,
a special system which causes those commands to be applied when encountered.
Bevy now detects when a system with commands
is ordered relative to other systems and inserts the <code>apply_deferred</code> for you.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> Before 0.13
</span>app<span>.</span><span>add_systems</span><span><span>(</span>
    Update<span>,</span>
    <span><span>(</span>
        system_with_commands<span>,</span>
        apply_deferred<span>,</span>
        another_system<span>,</span>
    </span><span><span>)</span></span><span>.</span><span>chain</span><span><span>(</span></span><span><span>)</span></span>
</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> After 0.13
</span>app<span>.</span><span>add_systems</span><span><span>(</span>
    Update<span>,</span>
    <span><span>(</span>
        system_with_commands<span>,</span>
        another_system<span>,</span>
    </span><span><span>)</span></span><span>.</span><span>chain</span><span><span>(</span></span><span><span>)</span></span>
</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>This resolves a common beginner footgun: if two systems are ordered, shouldn't the second always see the results of the first?</p>
<p>Automatically inserted <code>apply_deferred</code> systems are optimized by automatically merging them if
possible. In most cases, it is recommended to remove all manually inserted
<code>apply_deferred</code> systems, as allowing Bevy to insert and merge these systems as needed will
usually be both faster and involve less boilerplate.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> This will only add one apply_deferred system.
</span>app<span>.</span><span>add_systems</span><span><span>(</span>
    Update<span>,</span>
    <span><span>(</span>
        <span><span>(</span>system_1_with_commands<span>,</span> system_2</span><span><span>)</span></span><span>.</span><span>chain</span><span><span>(</span></span><span><span>)</span></span><span>,</span>
        <span><span>(</span>system_3_with_commands<span>,</span> system_4</span><span><span>)</span></span><span>.</span><span>chain</span><span><span>(</span></span><span><span>)</span></span><span>,</span>
    </span><span><span>)</span></span>
</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>If this new behavior does not work for you, please consult the migration guide.
There are several new APIs that allow you to opt-out.</p>
<h2 id="more-flexible-one-shot-systems">More Flexible One-Shot Systems
<a href="#more-flexible-one-shot-systems">#</a>
</h2>
<p>authors: @Nathan-Fenner</p>
<p>In <strong>Bevy 0.12</strong>, we introduced <a href="https://bevyengine.org/news/bevy-0-12/#one-shot-systems">one-shot systems</a>, a handy way to call systems on demand without having to add them to a schedule.
The initial implementation had some limitations with regards to what systems could and could not be used as one-shot systems.
In <strong>Bevy 0.13</strong>, these limitations have been resolved.</p>
<p>One-shot systems now support inputs and outputs.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>increment_sys</span></span><span><span><span>(</span>In<span><span>(</span></span><span><span>increment_by</span></span><span><span>)</span></span>: <span>In<span>&lt;</span><span>i32</span><span>&gt;</span></span>, <span>mut</span> <span>counter</span><span>:</span> <span>ResMut<span>&lt;</span>Counter<span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> <span><span>-&gt;</span> <span>i32</span></span> </span><span><span><span>{</span>
    counter<span>.</span><span>0</span> <span>+=</span> increment_by<span>;</span>
    counter<span>.</span><span>0</span>
</span><span><span>}</span></span></span>

<span>let</span> <span>mut</span> world <span>=</span> <span>World<span>::</span></span>new<span><span>(</span></span><span><span>)</span></span><span>;</span>
<span>let</span> id <span>=</span> world<span>.</span><span>register_system</span><span><span>(</span>increment_sys</span><span><span>)</span></span><span>;</span>

world<span>.</span><span>insert_resource</span><span><span>(</span>Counter<span><span>(</span><span>1</span></span><span><span>)</span></span></span><span><span>)</span></span><span>;</span>
<span>let</span> count_one <span>=</span> world<span>.</span><span>run_system_with_input</span><span><span>(</span>id<span>,</span> <span>5</span></span><span><span>)</span></span><span>.</span><span>unwrap</span><span><span>(</span></span><span><span>)</span></span><span>;</span> <span><span>//</span> increment counter by 5 and return 6
</span><span>let</span> count_two <span>=</span> world<span>.</span><span>run_system_with_input</span><span><span>(</span>id<span>,</span> <span>2</span></span><span><span>)</span></span><span>.</span><span>unwrap</span><span><span>(</span></span><span><span>)</span></span><span>;</span> <span><span>//</span> increment counter by 2 and return 8
</span></span></code></pre>
<p>Running a system now returns the system output as <code>Ok(output)</code>. Note that output cannot be returned when calling one-shot systems through commands, because of their deferred nature.</p>
<p>Exclusive systems can now be registered as one-shot systems:</p>
<pre data-lang="rust"><code data-lang="rust"><span>world<span>.</span><span>register_system</span><span><span>(</span><span><span><span>|</span></span></span><span><span><span>world</span><span>:</span> <span>&amp;</span><span>mut</span> World<span>|</span></span> </span><span><span><span>{</span> <span><span>/*</span> do anything <span>*/</span></span> </span><span><span>}</span></span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>Boxed systems can now be registered with <code>register_boxed_system</code>.</p>
<p>These improvements round out one-shot systems significantly: they should now work just like any other Bevy system.</p>
<h2 id="wgpu-0-19-upgrade-and-rendering-performance-improvements">wgpu 0.19 Upgrade and Rendering Performance Improvements
<a href="#wgpu-0-19-upgrade-and-rendering-performance-improvements">#</a>
</h2>
<p>authors: @Elabajaba, @JMS55</p>
<p>In <strong>Bevy 0.13</strong> we upgraded from <code>wgpu</code> 0.17 to <code>wgpu</code> 0.19, which includes the long awaited <code>wgpu</code> <a href="https://gfx-rs.github.io/2023/11/24/arcanization.html">arcanization</a> that allows us to <a href="https://github.com/bevyengine/bevy/pull/10812">compile shaders asynchronously</a> to avoid shader compilation stutters and <a href="https://github.com/bevyengine/bevy/pull/9172">multithread draw call creation</a> for better performance in CPU-bound scenes.</p>
<p>Due to changes in wgpu 0.19, we've added a new <code>webgpu</code> feature to Bevy that is now required when doing WebAssembly builds targeting WebGPU. Disabling the <code>webgl2</code> feature is no longer required when targeting WebGPU, but the new <code>webgpu</code> feature currently overrides the <code>webgl2</code> feature when enabled. Library authors, please do not enable the <code>webgpu</code> feature by default. In the future we plan on allowing you to target both WebGL2 and WebGPU in the same WebAssembly binary, but we aren't quite there yet.</p>
<p>We've swapped the material and mesh bind groups, so that mesh data is now in bind group 1, and material data is in bind group 2. This greatly improved our draw call batching when combined with changing the sorting functions for the opaque passes to sort by pipeline and mesh. Previously we were sorting them by distance from the camera. These batching improvements mean we're doing fewer draw calls, which improves CPU performance, especially in larger scenes. We've also removed the <code>get_instance_index</code> function in shaders, as it was only required to workaround an upstream bug that has been fixed in wgpu 0.19. For other shader or rendering changes, please see the <a href="https://bevyengine.org/learn/migration-guides/0.12-0.13/">migration guide</a> and <a href="https://github.com/gfx-rs/wgpu/blob/v0.19/CHANGELOG.md">wgpu's changelog</a>.</p>
<p>Many small changes both to Bevy and <code>wgpu</code> summed up to make a modest but measurable difference in our performance on realistic 3D scenes!
We ran some quick tests on both <strong>Bevy 0.12</strong> and <strong>Bevy 0.13</strong> on the same machine on four complex scenes: <a href="https://github.com/DGriffin91/bevy_bistro_scene">Bistro</a>, <a href="https://github.com/DGriffin91/bevy_sponza_scene">Sponza</a>, <a href="https://github.com/DGriffin91/bevy_san_miguel_scene">San Miguel</a> and <a href="https://blog.polyhaven.com/hidden-alley/">Hidden Valley</a>.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/San_Miguel_13.jpg" alt="A high polygon, realistically lit screenshot of a beautiful cafe with a tree in the background."></p>
<p>As you can see, these scenes are substantially more detailed than most video game environments, but that screenshot was being rendered in Bevy at better than 60 FPS at 1440p resolution!
Between Bevy 0.12 and Bevy 0.13 we saw frame times decrease by about 5-10% across the scenes tested. Nice work!</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/rendering-perf-graph.svg" alt="A graph showing the FPS of the different scenes. Bistro went from 90 FPS to 120 FPS, while the other scenes improved slightly. All scenes were 60-120 FPS."></p>
<h2 id="unload-rendering-assets-from-ram">Unload Rendering Assets from RAM
<a href="#unload-rendering-assets-from-ram">#</a>
</h2>
<p>authors: @JMS55, @mockersf, @brianreavis</p>
<p>Meshes and the textures used to define their materials take up a ton of memory:
in many games, memory usage is the biggest limitation on the resolution and polygon count of the game!
Moreover, actually transferring that data from system RAM (used by the CPU) to the VRAM (used by the GPU) can be a real performance bottleneck.</p>
<p><strong>Bevy 0.13</strong> adds the ability to unload this data from system RAM, once it has been successfully transferred to VRAM. To configure this behavior for your asset, set the <a href="https://docs.rs/bevy/0.13.0/bevy/render/render_asset/struct.RenderAssetUsages.html"><code>RenderAssetUsages</code></a> field to specify whether to retain the data in the main (CPU) world, the render (GPU) world, or both.</p>
<p>This behavior is currently off by default for most asset types as it <a href="https://github.com/bevyengine/bevy/pull/11212">has some caveats</a> (given that the asset becomes unavailable to logic on the CPU), but we strongly recommend enabling it for your assets whenever possible for significant memory usage wins (and we will likely enable it by default in the future).</p>
<p>Texture atlases and font atlases now only extract data that's actually in use
to VRAM, rather than wasting work sending <em>all</em> possible images or characters to VRAM every frame.
Neat!</p>
<h2 id="better-batching-through-smarter-sorting">Better Batching Through Smarter Sorting
<a href="#better-batching-through-smarter-sorting">#</a>
</h2>
<p>authors: @Elabajaba</p>
<p>One of the core techniques used to speed up rendering is to draw many similar objects together at the same time.
In this case, Bevy was already using a technique called "batching", which allows us to combine multiple similar operations together,
reducing the number of expensive draw calls (instructions to the GPU) that are being made.</p>
<p>However, our strategy for defining these batches was far from optimal.
Previously, we were sorting by distance to the camera, and <em>then</em> checking if multiple of the same meshes were adjacent to each other in that sorted list.
On realistic scenes, this is unlikely to find many candidates for merging!</p>
<p>In <strong>Bevy 0.13</strong>, we first sort by pipeline (effectively the type of material being used), and then by mesh identity.
This strategy results in better batching, improving overall FPS by double digit percentages on the <a href="https://syntystore.com/products/polygon-fantasy-kingdom">realistic scene tested</a>!</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/better_batching.svg" alt="A graph showing batching improvements. Shadows are very expensive, and FPS improved by at least 20% in all cases tested."></p>
<h2 id="animation-interpolation-methods">Animation Interpolation Methods
<a href="#animation-interpolation-methods">#</a>
</h2>
<p>authors: @mockersf</p>
<p>Generally, animations are defined by their <strong>keyframes</strong>: snapshots of the position (and other state) or objects at moments along a time line.
But what happens between those keyframes? Game engines need to <strong>interpolate</strong> between them, smoothly transitioning from one state to the next.</p>
<p>The simplest interpolation method is linear: the animated object just moves an equal distance towards the next keyframe every unit of time.
But this isn't always the desired effect! Both stop-motion-style and more carefully smoothed animations have their place.</p>
<p>Bevy now supports both step and cubic spline interpolation in animations.
Most of the time, this will just be parsed correctly from the glTF files, but when setting <a href="https://docs.rs/bevy/0.13.0/bevy/animation/struct.VariableCurve.html"><code>VariableCurve</code></a> manually,
there's a new <a href="https://docs.rs/bevy/0.13.0/bevy/animation/enum.Interpolation.html"><code>Interpolation</code></a> field to set.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/interpolation_methods.gif" alt="Demonstrating the different types of interpolation"></p>
<h2 id="animatable-trait"><code>Animatable</code> Trait
<a href="#animatable-trait">#</a>
</h2>
<p>authors: @james7132</p>
<p>When you think of "animation": you're probably imagining moving objects through space.
Translating them back and forth, rotating them, maybe even squashing and stretching them.
But in modern game development, animation is a powerful shared set of tools and concepts for "changing things over time".
Transforms are just the beginning: colors, particle effects, opacity and even boolean values like visibility can all be animated!</p>
<p>In <strong>Bevy 0.13</strong>, we've taken the first step towards <a href="https://github.com/bevyengine/rfcs/blob/main/rfcs/51-animation-composition.md">this vision</a>,
with the <a href="https://docs.rs/bevy/0.13.0/bevy/prelude/trait.Animatable.html"><code>Animatable</code></a> trait.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>///</span> An animatable value type.
</span><span><span>pub</span> <span>trait</span> <span>Animatable</span>: Reflect + Sized + Send + Sync + 'static <span><span>{</span>
    <span><span>///</span> Interpolates between `a` and `b` with  a interpolation factor of `time`.
</span>    <span><span>///</span>
</span>    <span><span>///</span> The `time` parameter here may not be clamped to the range `[0.0, 1.0]`.
</span>    <span><span><span>fn</span> </span><span>interpolate</span></span><span><span><span>(</span><span>a</span><span>:</span> <span>&amp;</span><span>Self</span>, <span>b</span><span>:</span> <span>&amp;</span><span>Self</span>, <span>time</span><span>:</span> <span>f32</span></span><span><span><span>)</span></span></span></span><span> <span><span>-&gt;</span> <span>Self</span></span></span><span>;</span>

    <span><span>///</span> Blends one or more values together.
</span>    <span><span>///</span>
</span>    <span><span>///</span> Implementors should return a default value when no inputs are provided here.
</span>    <span><span><span>fn</span> </span><span>blend</span></span><span><span><span>(</span><span>inputs</span><span>:</span> impl <span><span>Iterator</span><span>&lt;</span>Item = <span>BlendInput<span>&lt;</span><span>Self</span><span>&gt;</span></span><span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> <span><span>-&gt;</span> <span>Self</span></span></span><span>;</span>

    <span><span>///</span> Post-processes the value using resources in the [`World`].
</span>    <span><span>///</span> Most animatable types do not need to implement this.
</span>    <span><span><span>fn</span> </span><span>post_process</span></span><span><span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span>, <span>_world</span><span>:</span> <span>&amp;</span>World</span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span></span><span><span>}</span></span></span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>This is the first step towards animation blending and an asset-driven animation graph which is an essential for shipping large scale 3D games in Bevy.
But for now, this is just a building block. We've implemented this for a few key types (<code>Transform</code>, <code>f32</code> and <code>glam</code>'s <code>Vec</code> types) and published the trait.
Slot it into your games and crates, and team up with other contributors to help <code>bevy_animation</code> become just as pleasant and featureful as the rest of the engine.</p>
<h2 id="extensionless-asset-support">Extensionless Asset Support
<a href="#extensionless-asset-support">#</a>
</h2>
<p>authors: @bushrat011899</p>
<p>In prior versions of Bevy, the default way to choose an <a href="https://docs.rs/bevy/0.13.0/bevy/asset/trait.AssetLoader.html"><code>AssetLoader</code></a> for a particular asset was entirely based around file extensions. The <a href="https://bevyengine.org/news/bevy-0-12/#asset-meta-files">recent addition of .meta files</a> allowed for specifying more granular loading behavior, but file extensions were still required. In <strong>Bevy 0.13</strong>, the asset type can now be used to infer the <a href="https://docs.rs/bevy/0.13.0/bevy/asset/trait.AssetLoader.html"><code>AssetLoader</code></a>.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> Uses AudioSettingsAssetLoader
</span><span>let</span> audio <span>=</span> asset_server<span>.</span><span>load</span><span><span>(</span><span><span>"</span>data/audio.json<span>"</span></span></span><span><span>)</span></span><span>;</span>

<span><span>//</span> Uses GraphicsSettingsAssetLoader
</span><span>let</span> graphics <span>=</span> asset_server<span>.</span><span>load</span><span><span>(</span><span><span>"</span>data/graphics.json<span>"</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>This is possible because every <a href="https://docs.rs/bevy/0.13.0/bevy/asset/trait.AssetLoader.html"><code>AssetLoader</code></a> is required to declare what <strong>type</strong> of asset it loads, not just the extensions it supports. Since the <a href="https://docs.rs/bevy/0.13.0/bevy/asset/struct.AssetServer.html#method.load"><code>load</code></a> method on <a href="https://docs.rs/bevy/0.13.0/bevy/asset/struct.AssetServer.html"><code>AssetServer</code></a> was already generic over the type of asset to return, this information is already available to the <a href="https://docs.rs/bevy/0.13.0/bevy/asset/struct.AssetServer.html"><code>AssetServer</code></a>.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> The above example with types shown
</span><span>let</span> audio<span>:</span> <span>Handle<span>&lt;</span>AudioSettings<span>&gt;</span></span> <span>=</span> asset_server<span>.</span><span>load<span>::</span></span><span><span>&lt;</span>AudioSettings<span>&gt;</span></span><span><span>(</span><span><span>"</span>data/audio.json<span>"</span></span></span><span><span>)</span></span><span>;</span>
<span>let</span> graphics<span>:</span> <span>Handle<span>&lt;</span>GraphicsSettings<span>&gt;</span></span> <span>=</span> asset_server<span>.</span><span>load<span>::</span></span><span><span>&lt;</span>GraphicsSettings<span>&gt;</span></span><span><span>(</span><span><span>"</span>data/graphics.json<span>"</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>Now we can also use it to choose the <a href="https://docs.rs/bevy/0.13.0/bevy/asset/trait.AssetLoader.html"><code>AssetLoader</code></a> itself.</p>
<p>When loading an asset, the loader is chosen by checking (in order):</p>
<ol>
<li>The asset <code>meta</code> file</li>
<li>The type of <code>Handle&lt;A&gt;</code> to return</li>
<li>The file extension</li>
</ol>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> This will be inferred from context to be a glTF asset, ignoring the file extension
</span><span>let</span> gltf_handle <span>=</span> asset_server<span>.</span><span>load</span><span><span>(</span><span><span>"</span>models/cube/cube.gltf<span>"</span></span></span><span><span>)</span></span><span>;</span>

<span><span>//</span> This still relies on file extension due to the label
</span><span>let</span> cube_handle <span>=</span> asset_server<span>.</span><span>load</span><span><span>(</span><span><span>"</span>models/cube/cube.gltf#Mesh0/Primitive0<span>"</span></span></span><span><span>)</span></span><span>;</span>
<span><span>//</span>                                                        ^^^^^^^^^^^^^^^^^
</span><span><span>//</span>                                                        | Asset path label
</span></span></code></pre>
<h3 id="file-extensions-are-now-optional">File Extensions Are Now Optional
<a href="#file-extensions-are-now-optional">#</a>
</h3>
<p>Since the asset type can be used to infer the loader, neither the file to be loaded nor the <a href="https://docs.rs/bevy/0.13.0/bevy/asset/trait.AssetLoader.html"><code>AssetLoader</code></a> need to have file extensions.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>pub</span> <span>trait</span> <span>AssetLoader</span>: Send + Sync + 'static <span><span>{</span>
    <span><span>/*</span> snip <span>*/</span></span>

    <span><span>///</span> Returns a list of extensions supported by this [`AssetLoader`], without the preceding dot.
</span>    <span><span><span>fn</span> </span><span>extensions</span></span><span><span><span>(</span><span>&amp;</span><span>self</span></span><span><span><span>)</span></span></span></span><span> <span><span>-&gt;</span> <span>&amp;</span></span></span><span><span>[</span><span>&amp;</span><span>str</span><span>]</span></span> <span><span>{</span>
        <span><span>//</span> A default implementation is now provided
</span>        <span>&amp;</span><span><span>[</span><span>]</span></span>
    </span><span><span>}</span></span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>Previously, an asset loader with no extensions was very cumbersome to use. Now, they can be used just as easily as any other loader. Likewise, if a file is missing its extension, Bevy can now choose the appropriate loader.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span>let</span> license <span>=</span> asset_server<span>.</span><span>load<span>::</span></span><span><span>&lt;</span>Text<span>&gt;</span></span><span><span>(</span><span><span>"</span>LICENSE<span>"</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>Appropriate file extensions are still recommended for good project management, but this is now a recommendation rather than a hard requirement.</p>
<h3 id="multiple-asset-loaders-with-the-same-asset">Multiple Asset Loaders With The Same Asset
<a href="#multiple-asset-loaders-with-the-same-asset">#</a>
</h3>
<p>Now, a single path can be used by multiple asset handles as long as they are distinct asset types.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> Load the sound effect for playback
</span><span>let</span> bang <span>=</span> asset_server<span>.</span><span>load<span>::</span></span><span><span>&lt;</span>AudioSource<span>&gt;</span></span><span><span>(</span><span><span>"</span>sound/bang.ogg<span>"</span></span></span><span><span>)</span></span><span>;</span>

<span><span>//</span> Load the raw bytes of the same sound effect (e.g, to send over the network)
</span><span>let</span> bang_blob <span>=</span> asset_server<span>.</span><span>load<span>::</span></span><span><span>&lt;</span>Blob<span>&gt;</span></span><span><span>(</span><span><span>"</span>sound/bang.ogg<span>"</span></span></span><span><span>)</span></span><span>;</span>

<span><span>//</span> Returns the bang handle since it was already loaded
</span><span>let</span> bang_again <span>=</span> asset_server<span>.</span><span>load<span>::</span></span><span><span>&lt;</span>AudioSource<span>&gt;</span></span><span><span>(</span><span><span>"</span>sound/bang.ogg<span>"</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>Note that the above example uses <a href="https://turbo.fish/">turbofish</a> syntax for clarity. In practice, it's not required, since the type of asset loaded can usually be inferred by surrounding context at the call site.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>#</span><span>[</span><span>derive</span><span><span><span>(</span></span></span><span><span>Resource</span></span><span><span><span>)</span></span></span><span>]</span></span>
<span><span>struct</span> </span><span><span>SoundEffects</span> </span><span><span><span>{</span>
    <span>bang</span><span>:</span> <span>Handle<span>&lt;</span>AudioSource<span>&gt;</span></span>,
    <span>bang_blob</span><span>:</span> <span>Handle<span>&lt;</span>Blob<span>&gt;</span></span>,
</span><span><span>}</span></span></span>

<span><span><span>fn</span> </span><span>setup</span></span><span><span><span>(</span><span>mut</span> <span>effects</span><span>:</span> <span>ResMut<span>&lt;</span>SoundEffects<span>&gt;</span></span>, <span>asset_server</span><span>:</span> <span>Res<span>&lt;</span>AssetServer<span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    effects<span>.</span>bang <span>=</span> asset_server<span>.</span><span>load</span><span><span>(</span><span><span>"</span>sound/bang.ogg<span>"</span></span></span><span><span>)</span></span><span>;</span>
    effects<span>.</span>bang_blob <span>=</span> asset_server<span>.</span><span>load</span><span><span>(</span><span><span>"</span>sound/bang.ogg<span>"</span></span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>The <a href="https://bevyengine.org/examples/Assets/custom-asset/"><code>custom_asset</code> example</a> has been updated to demonstrate these new features.</p>
<h2 id="texture-atlas-rework">Texture Atlas Rework
<a href="#texture-atlas-rework">#</a>
</h2>
<p>authors: @ManevilleF</p>
<p>Texture atlases efficiently combine multiple images into a single larger texture called an atlas.</p>
<p><strong>Bevy 0.13</strong> significantly reworks them to reduce boilerplate and make them more data-oriented.
Say goodbye to <code>TextureAtlasSprite</code> and <code>UiTextureAtlasImage</code> components (and their corresponding <code>Bundle</code> types). Texture atlasing is now enabled by adding a single <em>additional</em> component to normal sprite and image entities: <a href="https://docs.rs/bevy/0.13.0/bevy/sprite/struct.TextureAtlas.html"><code>TextureAtlas</code></a>.</p>
<h3 id="why">Why?
<a href="#why">#</a>
</h3>
<p>Texture atlases (sometimes called sprite sheets) simply draw a custom <em>section</em> of a given texture. This is <em>still</em> Sprite-like or Image-like behavior, we're just drawing a subset. The new <a href="https://docs.rs/bevy/0.13.0/bevy/sprite/struct.TextureAtlas.html"><code>TextureAtlas</code></a> component embraces that by storing:</p>
<ul>
<li>a <code>Handle&lt;TextureAtlasLayout&gt;</code>, an asset mapping an index to a <code>Rect</code> section of a texture</li>
<li>a <code>usize</code> index defining which section <code>Rect</code> of the layout we want to display</li>
</ul>
<h2 id="light-renderlayers">Light <code>RenderLayers</code>
<a href="#light-renderlayers">#</a>
</h2>
<p>authors: @robftm</p>
<p><a href="https://docs.rs/bevy/latest/bevy/render/view/struct.RenderLayers.html"><code>RenderLayers</code></a> are Bevy's answer to quickly hiding and showing entities en masse by filtering what a Camera can see ... great for things like customizing the first-person view of what a character is holding (or making sure vampires don't show up in your mirrors!).</p>
<p><a href="https://docs.rs/bevy/latest/bevy/render/view/struct.RenderLayers.html"><code>RenderLayers</code></a> <a href="https://github.com/bevyengine/bevy/pull/10742">now play nice</a> with lights, fixing a serious limitation to make sure this awesome feature can shine appropriately!</p>
<h2 id="bind-group-layout-entries">Bind Group Layout Entries
<a href="#bind-group-layout-entries">#</a>
</h2>
<p>authors: @IceSentry</p>
<p>We added a new API, inspired by the bind group entries API from 0.12, to declare bind group layouts. This new API is based on using built-in functions to define bind group layouts resources and automatically set the index based on its position.</p>
<p>Here's a short example of how declaring a new layout looks:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span>let</span> layout <span>=</span> render_device<span>.</span><span>create_bind_group_layout</span><span><span>(</span>
    <span><span>"</span>post_process_bind_group_layout<span>"</span></span><span>,</span>
    <span>&amp;</span><span>BindGroupLayoutEntries<span>::</span></span>sequential<span><span>(</span>
        <span>ShaderStages<span>::</span></span><span>FRAGMENT</span><span>,</span>
        <span><span>(</span>
            <span>texture_2d_f32</span><span><span>(</span></span><span><span>)</span></span><span>,</span>
            <span>sampler</span><span><span>(</span><span>SamplerBindingType<span>::</span></span>Filtering</span><span><span>)</span></span><span>,</span>
            <span>uniform_buffer<span>::</span></span><span><span>&lt;</span>PostProcessingSettings<span>&gt;</span></span><span><span>(</span><span>false</span></span><span><span>)</span></span><span>,</span>
        </span><span><span>)</span></span><span>,</span>
    </span><span><span>)</span></span><span>,</span>
</span><span><span>)</span></span><span>;</span>
</span></code></pre>
<h2 id="type-safe-labels-for-the-rendergraph">Type-Safe Labels for the <code>RenderGraph</code>
<a href="#type-safe-labels-for-the-rendergraph">#</a>
</h2>
<p>authors: @DasLixou</p>
<p>Bevy uses Rust's type system extensively when defining labels, letting developers lean on tooling to catch typos and ease refactors.
But this didn't apply to Bevy's render graph. In the render graph, hard-coded—and potentially overlapping—strings were used to define nodes and sub-graphs.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> Before 0.13
</span><span><span>impl</span> </span><span><span>MyRenderNode</span> </span><span><span><span>{</span>
    <span>pub</span> <span>const</span> <span>NAME</span><span>:</span> <span>&amp;</span><span>'static</span> <span>str</span> <span>=</span> <span><span>"</span>my_render_node<span>"</span></span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>In <strong>Bevy 0.13</strong>, we're using a more robust way to name render nodes and render graphs with the help of the type-safe label pattern already used by <code>bevy_ecs</code>.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> After 0.13
</span><span><span>#</span><span>[</span><span>derive</span><span><span><span>(</span></span></span><span><span>Debug<span>,</span> Hash<span>,</span> PartialEq<span>,</span> Eq<span>,</span> Clone<span>,</span> RenderLabel</span></span><span><span><span>)</span></span></span><span>]</span></span>
<span><span>pub</span> <span>struct</span> </span><span><span>PrettyFeature</span></span><span>;</span>
</span></code></pre>
<p>With those, the long paths for const-values become shorter and cleaner:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> Before 0.13
</span>render_app
    <span>.</span><span>add_render_graph_node<span>::</span></span><span><span>&lt;</span><span>ViewNodeRunner<span>&lt;</span>PrettyFeatureNode<span>&gt;</span></span><span>&gt;</span></span><span><span>(</span>
        <span>core_3d<span>::</span></span><span>graph<span>::</span></span><span>NAME</span><span>,</span>
        <span>PrettyFeatureNode<span>::</span></span><span>NAME</span><span>,</span>
    </span><span><span>)</span></span>
    <span>.</span><span>add_render_graph_edges</span><span><span>(</span>
        <span>core_3d<span>::</span></span><span>graph<span>::</span></span><span>NAME</span><span>,</span>
        <span>&amp;</span><span><span>[</span>
            <span>core_3d<span>::</span></span><span>graph<span>::</span></span><span>node<span>::</span></span><span>TONEMAPPING</span><span>,</span>
            <span>PrettyFeatureNode<span>::</span></span><span>NAME</span><span>,</span>
            <span>core_3d<span>::</span></span><span>graph<span>::</span></span><span>node<span>::</span></span><span>END_MAIN_PASS_POST_PROCESSING</span><span>,</span>
        <span>]</span></span><span>,</span>
    </span><span><span>)</span></span><span>;</span>

<span><span>//</span> After 0.13
</span><span>use</span> <span>bevy<span>::</span></span><span>core_pipeline<span>::</span></span><span>core_3d<span>::</span></span><span>graph<span>::</span></span><span><span>{</span>Node3d<span>,</span> Core3d</span><span><span>}</span></span><span>;</span>

render_app
    <span>.</span><span>add_render_graph_node<span>::</span></span><span><span>&lt;</span><span>ViewNodeRunner<span>&lt;</span>PrettyFeatureNode<span>&gt;</span></span><span>&gt;</span></span><span><span>(</span>
        Core3d<span>,</span>
        PrettyFeature<span>,</span>
    </span><span><span>)</span></span>
    <span>.</span><span>add_render_graph_edges</span><span><span>(</span>
        Core3d<span>,</span>
        <span><span>(</span>
            <span>Node3d<span>::</span></span>Tonemapping<span>,</span>
            PrettyFeature<span>,</span>
            <span>Node3d<span>::</span></span>EndMainPassPostProcessing<span>,</span>
        </span><span><span>)</span></span><span>,</span>
    </span><span><span>)</span></span><span>;</span>
</span></code></pre>
<p>When you need dynamic labels for render nodes, those can still be achieved via e.g. tuple structs:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>#</span><span>[</span><span>derive</span><span><span><span>(</span></span></span><span><span>Debug<span>,</span> Hash<span>,</span> PartialEq<span>,</span> Eq<span>,</span> Clone<span>,</span> RenderLabel</span></span><span><span><span>)</span></span></span><span>]</span></span>
<span><span>pub</span> <span>struct</span> </span><span><span>MyDynamicLabel</span></span><span><span><span>(</span><span>&amp;</span><span>'static</span> <span>str</span></span><span>)</span></span><span>;</span>
</span></code></pre>
<p>This is particularly nice because we don't have to store strings in here: we can use integers, custom enums or any other hashable type.</p>
<h2 id="winit-upgrade">Winit Upgrade
<a href="#winit-upgrade">#</a>
</h2>
<p>authors: @Thierry Berger, @mockersf</p>
<p>Through the heroic efforts of our contributors and reviewers, Bevy is <a href="https://github.com/bevyengine/bevy/pull/10702">now upgraded</a> to use <code>winit 0.29</code>.
<a href="https://docs.rs/winit/latest/winit/"><code>winit</code></a> is our windowing library: it abstracts over all of the different operating systems and input devices that end users might have,
and provides a basically uniform API to enable a write-once run-anywhere experience.
While this brings with it the usual litany of valuable <a href="https://github.com/rust-windowing/winit/blob/master/CHANGELOG.md#0292">bug fixes and stability improvements</a>,
the critical change revolves around how <a href="https://docs.rs/bevy/latest/bevy/input/keyboard/enum.KeyCode.html"><code>KeyCode</code></a> is handled.</p>
<p>Previously, <a href="https://docs.rs/bevy/latest/bevy/input/keyboard/enum.KeyCode.html"><code>KeyCode</code></a> represented the logical meaning of a key on a keyboard:
pressing the same button on the same keyboard when swapping between QWERTY and AZERTY keyboard layouts would give a different result!
Now,  <a href="https://docs.rs/bevy/latest/bevy/input/keyboard/enum.KeyCode.html"><code>KeyCode</code></a> represents the physical location of the key.
Lovers of WASD games know that this is a much better default for games. For most Bevy developers, you can leave your existing code untouched
and simply benefit from better default keybindings for users on non-QWERTY keyboards or layouts.
If you need information about the logical keys pressed, use the <a href="https://docs.rs/bevy/latest/bevy/prelude/struct.ReceivedCharacter.html"><code>ReceivedCharacter</code></a> event.</p>
<h2 id="multiple-gizmo-configurations">Multiple Gizmo Configurations
<a href="#multiple-gizmo-configurations">#</a>
</h2>
<p>authors: @jeliag</p>
<p>Gizmos let you quickly draw shapes using
an immediate mode API. Here is how you use them:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> bevy 0.12.1
</span><span><span><span>fn</span> </span><span>set_gizmo_width</span></span><span><span><span>(</span><span>mut</span> <span>config</span><span>:</span> <span>ResMut<span>&lt;</span>GizmoConfig<span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span><span>//</span> set the line width of every gizmos with this global configuration resource.
</span>    config<span>.</span>line_width <span>=</span> <span>5.</span><span>0</span><span>;</span>
</span><span><span>}</span></span></span>

<span><span><span>fn</span> </span><span>draw_circles</span></span><span><span><span>(</span><span>mut</span> <span>gizmos</span><span>:</span> Gizmos</span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span><span>//</span> Draw two circles with a 5 pixels outline
</span>    gizmos<span>.</span><span>circle_2d</span><span><span>(</span><span>vec2</span><span><span>(</span><span>100.</span><span>,</span> <span>0.</span></span><span><span>)</span></span><span>,</span> <span>120.</span><span>,</span> <span>Color<span>::</span></span><span>NAVY</span></span><span><span>)</span></span><span>;</span>
    gizmos<span>.</span><span>circle_2d</span><span><span>(</span><span>vec2</span><span><span>(</span><span>-</span><span>100.</span><span>,</span> <span>0.</span></span><span><span>)</span></span><span>,</span> <span>120.</span><span>,</span> <span>Color<span>::</span></span><span>ORANGE</span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>Add a <a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/prelude/struct.Gizmos.html"><code>Gizmos</code></a> system param and simply call a few methods. Cool!</p>
<p>Gizmos are also great for crate authors, they can use the same API.
For example, the <a href="https://crates.io/crates/oxidized_navigation"><code>oxidized_navigation</code></a> navmesh library uses gizmos for its debug overlay.
Neat!</p>
<p>However, there is only one global configuration. Therefore,
a dependency could very well affect the game's gizmos.
It could even make them completely unusable.</p>
<p>Not so great. How to solve this? Gizmo groups.</p>
<p>Now, <a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/prelude/struct.Gizmos.html"><code>Gizmos</code></a> comes with an optional parameter.
By default, it uses a global configuration:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>draw_circles</span></span><span><span><span>(</span><span>mut</span> <span>default_gizmos</span><span>:</span> Gizmos</span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    default_gizmos<span>.</span><span>circle_2d</span><span><span>(</span><span>vec2</span><span><span>(</span><span>100.</span><span>,</span> <span>0.</span></span><span><span>)</span></span><span>,</span> <span>120.</span><span>,</span> <span>Color<span>::</span></span><span>NAVY</span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>But with a <a href="https://docs.rs/bevy/0.13.0/bevy/gizmos/config/trait.GizmoConfigGroup.html"><code>GizmoConfigGroup</code></a> parameter, <code>Gizmos</code> can choose a distinct configuration:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>draw_circles</span></span><span><span><span>(</span>
    <span>mut</span> <span>default_gizmos</span><span>:</span> Gizmos,
    <span><span>//</span> this uses the distinct NavigationGroup config
</span>    <span>mut</span> <span>navigation_gizmos</span><span>:</span> <span>Gizmos<span>&lt;</span>NavigationGroup<span>&gt;</span></span>,
</span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span><span>//</span> Two circles with different outline width
</span>    default_gizmos<span>.</span><span>circle_2d</span><span><span>(</span><span>vec2</span><span><span>(</span><span>100.</span><span>,</span> <span>0.</span></span><span><span>)</span></span><span>,</span> <span>120.</span><span>,</span> <span>Color<span>::</span></span><span>NAVY</span></span><span><span>)</span></span><span>;</span>
    navigation_gizmos<span>.</span><span>circle_2d</span><span><span>(</span><span>vec2</span><span><span>(</span><span>-</span><span>100.</span><span>,</span> <span>0.</span></span><span><span>)</span></span><span>,</span> <span>120.</span><span>,</span> <span>Color<span>::</span></span><span>ORANGE</span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>Create your own gizmo config group by deriving <code>GizmoConfigGroup</code>,
and registering it to the <code>App</code>:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>#</span><span>[</span><span>derive</span><span><span><span>(</span></span></span><span><span>Default<span>,</span> Reflect<span>,</span> GizmoConfigGroup</span></span><span><span><span>)</span></span></span><span>]</span></span>
<span><span>pub</span> <span>struct</span> </span><span><span>NavigationGroup</span></span><span>;</span>

<span><span>impl</span> </span><span>Plugin <span>for</span></span><span> <span>NavigationPlugin</span> </span><span><span><span>{</span>
    <span><span><span>fn</span> </span><span>build</span></span><span><span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span>, <span>app</span><span>:</span> <span>&amp;</span><span>mut</span> App</span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
        app
            <span>.</span><span>init_gizmo_group<span>::</span></span><span><span>&lt;</span>NavigationGroup<span>&gt;</span></span><span><span>(</span></span><span><span>)</span></span>
            <span><span>//</span> ... rest of plugin initialization.
</span>    </span><span><span>}</span></span></span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>And this is how you set the configuration of gizmo groups to different values:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span>//</span> bevy 0.13.0
</span><span>set_gizmo_width</span><span><span>(</span><span>mut</span> config_store<span>:</span> <span>ResMut<span>&lt;</span>GizmoConfigStore<span>&gt;</span></span></span><span><span>)</span></span> <span><span>{</span>
    <span>let</span> config <span>=</span> config_store<span>.</span><span>config_mut<span>::</span></span><span><span>&lt;</span>DefaultGizmoConfigGroup<span>&gt;</span></span><span><span>(</span></span><span><span>)</span></span><span>.</span><span>0</span><span>;</span>
    config<span>.</span>line_width <span>=</span> <span>20.</span><span>0</span><span>;</span>

    <span>let</span> navigation_config <span>=</span> config_store<span>.</span><span>config_mut<span>::</span></span><span><span>&lt;</span>NavigationGroup<span>&gt;</span></span><span><span>(</span></span><span><span>)</span></span><span>.</span><span>0</span><span>;</span>
    navigation_config<span>.</span>line_width <span>=</span> <span>10.</span><span>0</span><span>;</span>
</span><span><span>}</span></span>
</span></code></pre>
<p>Now, the navigation gizmos have a fully separate configuration and don't conflict
with the game's gizmos.</p>
<p>Not only that, but the game dev can integrate and toggle the navigation gizmos with their
own debug tools however they wish. Be it a hotkey, a debug overlay UI button,
an RPC call. The world is your oyster.</p>
<h2 id="gltf-extensions">glTF Extensions
<a href="#gltf-extensions">#</a>
</h2>
<p>authors: @CorneliusCornbread</p>
<p><strong><a href="https://www.khronos.org/gltf/">glTF</a></strong> is a popular standardized open file format, used to store and share 3D models and scenes between different programs.
The trouble with standards though is that you eventually want to <em>customize</em> it, just a little, to better meet your needs.
Khronos Group, in their wisdom, foresaw this and defined a standardized way to customize the format called <strong><a href="https://kcoley.github.io/glTF/extensions/">extensions</a></strong>.</p>
<p>Extensions can be readily exported from other tools (like Blender), and contain <a href="https://github.com/KhronosGroup/glTF/blob/main/extensions/README.md">all sorts</a> of other useful information: from bleeding edge physically-based material information like anisotropy to performance hints like how to instance meshes.</p>
<p>Because Bevy parses loaded glTF's into our own entity-based hierarchy of objects, getting access to this information when you want to do new rendering things can be hard!
With <a href="https://github.com/bevyengine/bevy/pull/11138">the changes by CorneliusCornbread</a> you can configure the loader to store a raw copy of the glTF file itself with your loaded asset, allowing you to parse and reprocess this information however you please.</p>
<h2 id="asset-transformers">Asset Transformers
<a href="#asset-transformers">#</a>
</h2>
<p>authors: @thepackett, @RyanSpaker</p>
<p>Asset processing, at its core, involves implementing the <code>Process</code> trait, which takes some byte data representing an asset, transforming it, and then returning the processed byte data. However, implementing the <code>Process</code> trait by hand is somewhat involved, and so a generic <code>LoadAndSave&lt;L: AssetLoader, S: AssetSaver&gt;</code> <code>Process</code> implementation was written to make asset processing more ergonomic.</p>
<p>Using the <code>LoadAndSave</code> <code>Process</code> implementation, the previous Asset processing pipeline had four stages:</p>
<ol>
<li>An <code>AssetReader</code> reads some asset source (filesystem, http, etc) and gets the byte data of an asset.</li>
<li>An <code>AssetLoader</code> reads the byte data and converts it to a bevy <code>Asset</code>.</li>
<li>An <code>AssetSaver</code> takes a bevy <code>Asset</code>, processes it, and then converts it back into byte data.</li>
<li>An <code>AssetWriter</code> then writes the asset byte data back to the asset source.</li>
</ol>
<p><code>AssetSaver</code>s were responsible for both transforming an asset and converting it into byte data. However, this posed a bit of an issue for code reusability. Every time you wanted to transform some asset, such as an image, you would need to rewrite the portion that converts the asset to byte data. To solve this, <code>AssetSaver</code>s are now solely responsible for converting an asset into byte data, and <code>AssetTransformer</code>s which are responsible for transforming an asset were introduced. A new <code>LoadTransformAndSave&lt;L: AssetLoader, T: AssetTransformer, S: AssetSaver&gt;</code> <code>Process</code> implementation was added to utilize the new <code>AssetTransformer</code>s.</p>
<p>The new asset processing pipeline, using the <code>LoadTransformAndSave</code> <code>Process</code> implementation, has five stages:</p>
<ol>
<li>An <code>AssetReader</code> read some asset source (filesystem, http, etc) and gets the byte data of an asset.</li>
<li>An <code>AssetLoader</code> reads the byte data and converts it to a bevy <code>Asset</code>.</li>
<li>An <code>AssetTransformer</code> takes an asset and transforms it in some way.</li>
<li>An <code>AssetSaver</code> takes a bevy <code>Asset</code> and converts it back into byte data.</li>
<li>An <code>AssetWriter</code> then writes the asset byte data back to the asset source.</li>
</ol>
<p>In addition to having better code reusability, this change encourages writing <code>AssetSaver</code>s for various common asset types, which could be used to add runtime asset saving functionality to the <code>AssetServer</code>.</p>
<p>The previous <code>LoadAndSave</code> <code>Process</code> implementation still exists, as there are some cases where an asset transformation step is unnecessary, such as when saving assets into a compressed format.</p>
<p>See the <a href="https://github.com/bevyengine/bevy/blob/main/examples/asset/processing/asset_processing.rs">Asset Processing Example</a> for a more detailed look into how to use <code>LoadTransformAndSave</code> to process a custom asset.</p>
<h2 id="entity-optimizations">Entity Optimizations
<a href="#entity-optimizations">#</a>
</h2>
<p>authors: @Bluefinger, @notverymoe, @scottmcm, @james7132, @NathanSWard</p>
<p><code>Entity</code> (Bevy's 64-bit unique identifier for entities) received a number of changes this cycle, laying some more groundwork for relations alongside <em>related</em>, and nice to have, performance optimizations. The work here involved a lot of deep-diving into compiler codegen/assembly output, with running lots of benchmarks and testing in order to ensure all changes didn't cause breakages or major problems. Although the work here was dealing with mostly <em>safe</em> code, there were lots of underlying assumptions being changed that could have impacted code elsewhere. This was the most "micro-optimization" oriented set of changes in Bevy 0.13.</p>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/9797">#9797</a>: created a unified identifier type, paving the path for us to use the same fast, complex code in both our <code>Entity</code> type and the much-awaited relations</li>
<li><a href="https://github.com/bevyengine/bevy/pull/9907">#9907</a>: allowed us to store <code>Option&lt;Entity&gt;</code> in the same number of bits as <code>Entity</code>, by changing the layout of our Entity type to reserve exactly one <code>u64</code> value for the <code>None</code> variant</li>
<li><a href="https://github.com/bevyengine/bevy/pull/10519">#10519</a>: swapped us to a manually crafted <code>PartialEq</code> and <code>Hash</code> implementation for <code>Entity</code> to improve speed and save instructions in our hot loops</li>
<li><a href="https://github.com/bevyengine/bevy/pull/10558">#10558</a>: combined the approach of <a href="https://github.com/bevyengine/bevy/pull/9907">#9907</a> and <a href="https://github.com/bevyengine/bevy/pull/10519">#10519</a> to optimize <code>Entity</code>'s layout further, and optimized our <code>PartialOrd</code> and <code>Ord</code> implementations!</li>
<li><a href="https://github.com/bevyengine/bevy/pull/10648">#10648</a>: further optimized our entity hashing, changing how we multiply inside of the hash to save one precious assembly instruction in the optimized compiler output</li>
</ul>
<p>Full credit is also due to the authors who pursued similar work in <a href="https://github.com/bevyengine/bevy/pull/2372">#2372</a> and <a href="https://github.com/bevyengine/bevy/pull/3788">#3788</a>: while their work was not ultimately merged, it was an incredibly valuable
inspiration and source of prior art to base these more recent changes on.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/entity_hash_optimsation_benches.png" alt="Benchmark results of optimization work"></p>
<p>The above results show from where we started (<code>optimised_eq</code> being the first PR that introduced the benchmarks) to where we are now with all the optimizations in place (<code>optimised_entity</code>).
There are improvements across the board, with clear performance benefits that should impact multiple areas of the codebase, not just when hashing entities.</p>
<p>There are a ton of crunchy, well-explained details in the linked PRs, including some fascinating assembly output analysis.
If that interests you, open some new tabs in the background!</p>
<h2 id="porting-query-for-each-to-queryiter-fold-override">Porting <code>Query::for_each</code> to <code>QueryIter::fold</code> override
<a href="#porting-query-for-each-to-queryiter-fold-override">#</a>
</h2>
<p>authors: @james7132</p>
<p>Currently to get the full performance out of iterating over queries, <code>Query::for_each</code> must be used in order to take advantage of auto-vectorization and internal iteration optimizations that the compiler can apply. However, this isn't idiomatic rust and is not an iterator method so you can't use it on an iterator chain. However, it is possible to get the same benefits for some iterator methods, for which <a href="https://github.com/bevyengine/bevy/pull/6773/">#6773</a> by @james7132 sought to achieve. By providing an override to <code>QueryIter::fold</code>, it was possible to port the iteration strategies of <code>Query::for_each</code> so that <code>Query::iter</code> and co could achieve the same gains. Not <em>every</em> iterator method currently benefits from this, as they require overriding <code>QueryIter::try_fold</code>, but that is currently still a nightly-only optimization. This same approach is within the Rust standard library.</p>
<p>This deduplicated code in a few areas, such as no longer requiring both <code>Query::for_each</code> and <code>Query::for_each_mut</code>, as one just needs to call <code>Query::iter</code> or <code>Query::iter_mut</code> instead. So code like:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>some_system</span></span><span><span><span>(</span><span>mut</span> <span>q_transform</span><span>:</span> <span>Query<span>&lt;</span><span>&amp;</span><span>mut</span> Transform, <span>With<span>&lt;</span>Npc<span>&gt;</span></span><span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    q_transform<span>.</span><span>for_each_mut</span><span><span>(</span><span><span><span>|</span></span></span><span><span><span>transform</span><span>|</span></span> </span><span><span><span>{</span>
        <span><span>//</span> Do something...
</span>    </span><span><span>}</span></span></span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>Becomes:</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>some_system</span></span><span><span><span>(</span><span>mut</span> <span>q_transform</span><span>:</span> <span>Query<span>&lt;</span><span>&amp;</span><span>mut</span> Transform, <span>With<span>&lt;</span>Npc<span>&gt;</span></span><span>&gt;</span></span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    q_transform<span>.</span><span>iter_mut</span><span><span>(</span></span><span><span>)</span></span><span>.</span><span>for_each</span><span><span>(</span><span><span><span>|</span></span></span><span><span><span>transform</span><span>|</span></span> </span><span><span><span>{</span>
        <span><span>//</span> Do something...
</span>    </span><span><span>}</span></span></span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<p>The assembly output was compared as well between what was on main branch versus the PR, with no tangible differences being seen between the old <code>Query::for_each</code> and the new <code>QueryIter::for_each()</code> output, validating the approach and ensuring the internal iteration optimizations were being applied.</p>
<p>As a plus, the same internal iteration optimizations in <code>Query::par_for_each</code> now reuse code from <code>for_each</code>, deduplicating code there as well and enabling users to make use of <code>par_iter().for_each()</code>. As a whole, this means there's no longer any need for <code>Query::for_each</code>, <code>Query::for_each_mut</code>, <code>Query::_par_for_each</code>, <code>Query::par_for_each_mut</code> so these methods have been deprecated for 0.13 and will be removed in 0.14.</p>
<h2 id="reducing-tablerow-as-casting">Reducing <code>TableRow</code> <code>as</code> Casting
<a href="#reducing-tablerow-as-casting">#</a>
</h2>
<p>authors: @bushrat011899</p>
<p>Not all improvements in our ECS internals were focused around performance. Some small changes were done to improve type safety and tidy-up some of the codebase to have less <code>as</code> casting being done on various call sites for <code>TableRow</code>. The problem with <code>as</code> casting is that in some cases, the cast will fail by truncating the value silently, which could then cause havoc by accessing the wrong row and so forth. <a href="https://github.com/bevyengine/bevy/pull/10811">#10811</a> by @bushrat011899 was put forward to clean up the API around <code>TableRow</code>, providing convenience methods backed by <code>assert</code>s to ensure the casting operations could never fail, or if they did, they'd panic correctly.</p>
<p>Naturally, <em>adding</em> asserts in potentially hot codepaths were cause for some concern, necessitating considerable benchmarking efforts to confirm there were regressions and to what level. With careful placing of the new <code>assert</code>s, the detected regression for these cases was in the region of 0.1%, well within noise.
But the benefit was a less error-prone API and more robust code.
With a complex unsafe codebase like <code>bevy_ecs</code>, every little bit helps.</p>
<h2 id="events-live-longer">Events Live Longer
<a href="#events-live-longer">#</a>
</h2>
<p>Events are a useful tool for passing data into systems and between systems.</p>
<p>Internally, Bevy events are double-buffered, so a given event will be silently dropped once the buffers have swapped twice.
The <code>Events&lt;T&gt;</code> resource is setup this way so events are dropped after a predictable amount of time, preventing their queues from growing forever and causing a memory leak.</p>
<p>Before 0.12.1, event queues were swapped every update (i.e. every frame).
That was an issue for games with logic in <code>FixedUpdate</code>, since it meant events would normally disappear before systems in the next <code>FixedUpdate</code> could read them.</p>
<p>Bevy 0.12.1 changed the swap cadence to "every update that runs <code>FixedUpdate</code> one or more times" (only if the <code>TimePlugin</code> is installed).
This change did resolve the original problem, but it then caused problems in the other direction.
Users were surprised to learn some of their systems with <code>run_if</code> conditions would iterate much older events than expected.
(In hindsight, we should have considered it a breaking change and postponed it until this release.)
The change also introduced a bug (fixed in this release) where only one type of event was actually being dropped.</p>
<p>One proposed future solution to this lingering but unintended coupling between <code>Update</code> and <code>FixedUpdate</code> is to use event timestamps to change the default range of events visible by <code>EventReader&lt;T&gt;</code>.
That way systems in <code>Update</code> would skip any events older than a frame while systems in <code>FixedUpdate</code> could still see them.</p>
<p>For now, the <code>&lt;=0.12.0</code> behavior can be recovered by simply removing the <code>EventUpdateSignal</code> resource.</p>
<pre data-lang="rust"><code data-lang="rust"><span><span><span><span>fn</span> </span><span>main</span></span><span><span><span>(</span></span><span><span><span>)</span></span></span></span><span> </span><span><span><span>{</span>
    <span>let</span> <span>mut</span> app <span>=</span> <span>App<span>::</span></span>new<span><span>(</span></span><span><span>)</span></span>
        <span>.</span><span>add_plugins</span><span><span>(</span>DefaultPlugins</span><span><span>)</span></span><span>;</span>
    
    <span><span>/*</span> ... <span>*/</span></span>

    <span><span>//</span> If this resource is absent, events are dropped the same way as &lt;=0.12.0.
</span>    app<span>.</span>world<span>.</span><span>remove_resource<span>::</span></span><span><span>&lt;</span>EventUpdateSignal<span>&gt;</span></span><span><span>(</span></span><span><span>)</span></span><span>;</span>
    
    <span><span>/*</span> ... <span>*/</span></span>

    app<span>.</span><span>run</span><span><span>(</span></span><span><span>)</span></span><span>;</span>
</span><span><span>}</span></span></span>
</span></code></pre>
<h2 id="what-s-next"><a name="what-s-next"></a>What's Next?
<a href="#what-s-next">#</a>
</h2>
<p>We have plenty of work in progress! Some of this will likely land in <strong>Bevy 0.14</strong>.</p>
<p>Check out the <a href="https://github.com/bevyengine/bevy/milestone/20"><strong>Bevy 0.14 Milestone</strong></a> for an up-to-date list of current work that contributors are focusing on for <strong>Bevy 0.14</strong>.</p>
<h3 id="more-editor-experimentation">More Editor Experimentation
<a href="#more-editor-experimentation">#</a>
</h3>
<p>Led by the brilliant JMS55, we've opened up a free-form <a href="https://github.com/bevyengine/bevy_editor_prototypes">playground</a> to define and answer <a href="https://github.com/bevyengine/bevy_editor_prototypes/discussions/1">key questions</a> about the design of the <code>bevy_editor</code>: not through discussion, but through concrete prototyping.
Should we use an in-process editor (less robust to game crashes) or an external one (more complex)?
Should we ship an editor binary (great for non-programmers) or embed it in the game itself (very hackable)?
Let's find out by doing!</p>
<p>There are some incredible mockups, functional prototypes and third-party editor-ajdacent projects out there. Some highlights:</p>
<div>
  <p><a href="https://bevyengine.org/news/bevy-0-13/editor_mockup.png"><img src="https://bevyengine.org/news/bevy-0-13/editor_mockup.png" alt="A mockup of the UI for a graphical Bevy editor"></a>
    (1) bevy_editor_mockup
  </p>
  <p><a href="https://bevyengine.org/news/bevy-0-13/locomotion_graph.png"><img src="https://bevyengine.org/news/bevy-0-13/locomotion_graph.png" alt="A node-based animation graph editor built with `bevy_egui`"></a>
    (2) bevy_animation_graph
  </p>
  <p><a href="https://bevyengine.org/news/bevy-0-13/space_editor.png"><img src="https://bevyengine.org/news/bevy-0-13/space_editor.png" alt="A screenshot from `space_editor`, showcasing a functional scene editor with gizmos"></a>
    (3) space_editor
  </p>
  <p><a href="https://bevyengine.org/news/bevy-0-13/bevy_components.jpg"><img src="https://bevyengine.org/news/bevy-0-13/bevy_components.jpg" alt="A screenshot from Blender, with Blender UI modifying Bevy component values"></a>
    (4) bevy_components
  </p>
  <p><a href="https://bevyengine.org/news/bevy-0-13/makeshift_web.jpg"><img src="https://bevyengine.org/news/bevy-0-13/makeshift_web.jpg" alt="A recording of a web-based editor resulting in changes to Bevy entities in real time"></a>
    (5) bevy_remote
  </p>
</div>
<ol>
<li>A Bevy-branded editor UI mockup by <code>@!!&amp;Amy</code> on Discord, imagining what the UX for an ECS-based editor <a href="https://asour8.github.io/bevy_editor_mockup/editor/">could look like</a></li>
<li><a href="https://crates.io/crates/bevy_animation_graph"><code>bevy_animation_graph</code></a>: a fully-functional asset-driven animation graph crate with its own node-based editor for Bevy</li>
<li><a href="https://github.com/rewin123/space_editor"><code>space_editor</code></a>: a polished Bevy-native third-party scene editor that you can use today!</li>
<li><a href="https://github.com/kaosat-dev/Blender_bevy_components_workflow"><code>Blender_bevy_components_workflow</code></a>: an impressively functional ecosystem of tools that lets you use Blender as a seamless level and scene editor for your games today.</li>
<li><code>@coreh</code>'s experiment on a <a href="https://github.com/coreh/bevy/pull/1">reflection-powered remote protocol</a>, coupled with an interactive web-based editor, allowing devs to inspect and control their Bevy games from other processes, languages and even devices! <a href="https://makeshift-bevy-web-editor.vercel.app/">Try it out live</a>!</li>
</ol>
<p>It's really exciting to see this progress, and we're keen to channel that energy and experience into official first-party efforts.</p>
<h3 id="bevy-dev-tools"><code>bevy_dev_tools</code>
<a href="#bevy-dev-tools">#</a>
</h3>
<p>The secret to smooth game development is great tooling.
It's time to give Bevy developers the tools they need to inspect, debug and profile their games as part of the first-party experience.
From FPS meters to system stepping to a first-party equivalent of the fantastic <a href="https://crates.io/crates/bevy-inspector-egui"><code>bevy-inspector-egui</code></a>: giving these a home in Bevy itself helps us polish them, points new users in the right direction, and allows us to use them in the <code>bevy_editor</code> itself.</p>
<h3 id="a-new-scene-format">A New Scene Format
<a href="#a-new-scene-format">#</a>
</h3>
<p><a href="https://github.com/bevyengine/bevy/tree/latest/examples/scene">Scenes</a> are Bevy's general-purpose answer to serializing ECS data to disk: tracking entities, components, and resources for both save games and loading premade levels.
However, the existing .ron-based scene format is hard to hand-author, overly verbose, and brittle; changes to your code (or that of your dependencies!) rapidly invalidate saved scenes.
Cart has been cooking up a <a href="https://github.com/bevyengine/bevy/discussions/9538">revised scene format</a> with tight IDE and code integration that tackles these problems and makes authoring content (including UI!) in Bevy a joy. Whether you're writing code, writing scene files, or generating it from a GUI.</p>
<h3 id="bevy-ui-improvements"><code>bevy_ui</code> Improvements
<a href="#bevy-ui-improvements">#</a>
</h3>
<p><code>bevy_ui</code> has its fair share of problems and limitations, <a href="https://www.leafwing-studios.com/blog/ecs-gui-framework/">both mundane and architectural</a>;
however, there are tangible things we can and are doing to improve this:
an improved scene format offers an end to the boilerplate when defining layouts, <a href="https://github.com/bevyengine/bevy/pull/8973">rounded</a> <a href="https://github.com/bevyengine/bevy/pull/11813">corners</a> just need a little love from reviewers, and the powerful and beloved object picking from [<code>bevy_mod_picking</code>] is slated to be upstreamed for both UI and gameplay alike.
A spectacular array of <a href="https://bevyengine.org/assets/#ui">third-party UI solutions</a> exists today, and learning from those and committing to a core architecture for UI logic and reactivity is a top priority.</p>
<h3 id="meshlet-rendering">Meshlet Rendering
<a href="#meshlet-rendering">#</a>
</h3>
<p>Split meshes into clusters of triangles called meshlets, which bring many efficiency gains. During the 0.13 development cycle we made a <a href="https://github.com/bevyengine/bevy/pull/10164">lot of progress on this feature</a>. We implemented a GPU-driven meshlet renderer that can scale to much more triangle-dense scenes, with much lower CPU load. Memory usage, however, is very high, and we haven't implemented LODs or compression yet. Instead of releasing it half-baked, we're going to continue to iterate, and are very excited to (hopefully) bring you this feature in a future release.</p>
<p><img src="https://bevyengine.org/news/bevy-0-13/meshlet_preview.png" alt="The Stanford dragon mesh rendered as meshlet clusters"></p>
<h3 id="the-steady-march-towards-relations">The Steady March Towards Relations
<a href="#the-steady-march-towards-relations">#</a>
</h3>
<p><a href="https://github.com/bevyengine/bevy/issues/3742">Entity-entity relations</a>, the ability to track and manage connections between entities directly in the ECS, has been one of the most requested ECS features for years now.
Following the <a href="https://ajmmertens.medium.com/building-games-in-ecs-with-entity-relationships-657275ba2c6c">trail blazed by <code>flecs</code></a>, the mad scientists over in <code>#ecs-dev</code> are steadily <a href="https://github.com/orgs/bevyengine/projects/15">reshaping our internals</a>, <a href="https://crates.io/crates/aery">experimenting with external implementations</a>, and shipping the general purpose building blocks (like dynamic queries or <a href="https://github.com/bevyengine/bevy/pull/10756">lifecycle hooks</a>) needed to build a fast, robust and ergonomic solution.</p>
<h2 id="support-bevy">Support Bevy
<a href="#support-bevy">#</a>
</h2>
<p>Sponsorships help make our work on Bevy sustainable. If you believe in Bevy's mission, consider <a href="https://bevyengine.org/community/donate">sponsoring us</a> ... every bit helps!</p>
<p><a href="https://bevyengine.org/community/donate">Donate <img src="https://bevyengine.org/assets/heart.svg" alt="heart icon"></a></p>
<h2 id="contributors">Contributors
<a href="#contributors">#</a>
</h2>
<p>Bevy is made by a <a href="https://bevyengine.org/community/people/">large group of people</a>. A huge thanks to the 198 contributors that made this release (and associated docs) possible! In random order:</p>
<ul>
<li>@ickk</li>
<li>@orph3usLyre</li>
<li>@tygyh</li>
<li>@nicopap</li>
<li>@NiseVoid</li>
<li>@pcwalton</li>
<li>@homersimpsons</li>
<li>@Henriquelay</li>
<li>@Vrixyz</li>
<li>@GuillaumeGomez</li>
<li>@porkbrain</li>
<li>@Leinnan</li>
<li>@IceSentry</li>
<li>@superdump</li>
<li>@solis-lumine-vorago</li>
<li>@garychia</li>
<li>@tbillington</li>
<li>@Nilirad</li>
<li>@JMS55</li>
<li>@kirusfg</li>
<li>@KirmesBude</li>
<li>@maueroats</li>
<li>@mamekoro</li>
<li>@NiklasEi</li>
<li>@SIGSTACKFAULT</li>
<li>@Olle-Lukowski</li>
<li>@bushrat011899</li>
<li>@cbournhonesque-sc</li>
<li>@daxpedda</li>
<li>@Testare</li>
<li>@johnbchron</li>
<li>@BlackPhlox</li>
<li>@MrGVSV</li>
<li>@Kanabenki</li>
<li>@SpecificProtagonist</li>
<li>@rosefromthedead</li>
<li>@thepackett</li>
<li>@wgxer</li>
<li>@mintlu8</li>
<li>@AngelOnFira</li>
<li>@ArthurBrussee</li>
<li>@viridia</li>
<li>@GabeeeM</li>
<li>@Elabajaba</li>
<li>@brianreavis</li>
<li>@dmlary</li>
<li>@akimakinai</li>
<li>@VitalyAnkh</li>
<li>@komadori</li>
<li>@extrawurst</li>
<li>@NoahShomette</li>
<li>@valentinegb</li>
<li>@coreh</li>
<li>@kristoff3r</li>
<li>@wackbyte</li>
<li>@BD103</li>
<li>@stepancheg</li>
<li>@bogdiw</li>
<li>@doup</li>
<li>@janhohenheim</li>
<li>@ekropotin</li>
<li>@thmsgntz</li>
<li>@alice-i-cecile</li>
<li>@tychedelia</li>
<li>@soqb</li>
<li>@taizu-jin</li>
<li>@kidrigger</li>
<li>@fuchsnj</li>
<li>@TimJentzsch</li>
<li>@MinerSebas</li>
<li>@RomainMazB</li>
<li>@cBournhonesque</li>
<li>@tripokey</li>
<li>@cart</li>
<li>@pablo-lua</li>
<li>@cuppar</li>
<li>@TheTacBanana</li>
<li>@AxiomaticSemantics</li>
<li>@rparrett</li>
<li>@richardhozak</li>
<li>@afonsolage</li>
<li>@conways-glider</li>
<li>@ItsDoot</li>
<li>@MarkusTheOrt</li>
<li>@DavJCosby</li>
<li>@thebluefish</li>
<li>@DGriffin91</li>
<li>@Shatur</li>
<li>@MiniaczQ</li>
<li>@killercup</li>
<li>@Ixentus</li>
<li>@hecksmosis</li>
<li>@nvdaz</li>
<li>@james-j-obrien</li>
<li>@seabassjh</li>
<li>@lee-orr</li>
<li>@Waridley</li>
<li>@wainwrightmark</li>
<li>@robtfm</li>
<li>@asuratos</li>
<li>@Ato2207</li>
<li>@DasLixou</li>
<li>@SludgePhD</li>
<li>@torsteingrindvik</li>
<li>@jakobhellermann</li>
<li>@fantasyRqg</li>
<li>@johanhelsing</li>
<li>@re0312</li>
<li>@ickshonpe</li>
<li>@BorisBoutillier</li>
<li>@lkolbly</li>
<li>@Friz64</li>
<li>@rodolphito</li>
<li>@TheBlckbird</li>
<li>@HeyZoos</li>
<li>@nxsaken</li>
<li>@UkoeHB</li>
<li>@GitGhillie</li>
<li>@ibotha</li>
<li>@ManevilleF</li>
<li>@andristarr</li>
<li>@josfeenstra</li>
<li>@maniwani</li>
<li>@Trashtalk217</li>
<li>@benfrankel</li>
<li>@notverymoe</li>
<li>@simbleau</li>
<li>@aevyrie</li>
<li>@Dig-Doug</li>
<li>@IQuick143</li>
<li>@shanecelis</li>
<li>@mnmaita</li>
<li>@Braymatter</li>
<li>@LeshaInc</li>
<li>@esensar</li>
<li>@Adamkob12</li>
<li>@Kees-van-Beilen</li>
<li>@davidasberg</li>
<li>@andriyDev</li>
<li>@hankjordan</li>
<li>@Jondolf</li>
<li>@SET001</li>
<li>@hxYuki</li>
<li>@matiqo15</li>
<li>@capt-glorypants</li>
<li>@hymm</li>
<li>@HugoPeters1024</li>
<li>@RyanSpaker</li>
<li>@bardt</li>
<li>@tguichaoua</li>
<li>@SkiFire13</li>
<li>@st0rmbtw</li>
<li>@Davier</li>
<li>@mockersf</li>
<li>@antoniacobaeus</li>
<li>@ameknite</li>
<li>@Pixelstormer</li>
<li>@bonsairobo</li>
<li>@matthew-gries</li>
<li>@NthTensor</li>
<li>@tjamaan</li>
<li>@Architector4</li>
<li>@JoJoJet</li>
<li>@TrialDragon</li>
<li>@Gadzev</li>
<li>@eltociear</li>
<li>@scottmcm</li>
<li>@james7132</li>
<li>@CorneliusCornbread</li>
<li>@Aztro-dev</li>
<li>@doonv</li>
<li>@Malax</li>
<li>@atornity</li>
<li>@Bluefinger</li>
<li>@kayhhh</li>
<li>@irate-devil</li>
<li>@AlexOkafor</li>
<li>@kettle11</li>
<li>@davidepaci</li>
<li>@NathanSWard</li>
<li>@nfagerlund</li>
<li>@anarelion</li>
<li>@laundmo</li>
<li>@nelsontkq</li>
<li>@jeliag</li>
<li>@13ros27</li>
<li>@Nathan-Fenner</li>
<li>@softmoth</li>
<li>@xNapha</li>
<li>@asafigan</li>
<li>@nothendev</li>
<li>@SuperSamus</li>
<li>@devnev</li>
<li>@RobWalt</li>
<li>@ThePuzzledDev</li>
<li>@rafalh</li>
<li>@dubrowgn</li>
<li>@Aceeri</li>
</ul>
<h2 id="full-changelog">Full Changelog
<a href="#full-changelog">#</a>
</h2>
<p>The changes mentioned above are only the most appealing, highest impact changes that we've made this cycle.
Innumerable bug fixes, documentation changes and API usability tweaks made it in too.
For a complete list of changes, check out the PRs listed below.</p>
<h3 id="a-rendering-a-windowing">A-Rendering + A-Windowing
<a href="#a-rendering-a-windowing">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11660">Allow prepare_windows to run off main thread.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11672">Allow prepare_windows to run off main thread on all platforms</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11720">don't run <code>create_surfaces</code> system if not needed</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11747">fix create_surfaces system ordering</a></li>
</ul>
<h3 id="a-animation-a-reflection">A-Animation + A-Reflection
<a href="#a-animation-a-reflection">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11889">Add type registrations for animation types</a></li>
</ul>
<h3 id="a-assets">A-Assets
<a href="#a-assets">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10452">Don't <code>.unwrap()</code> in <code>AssetPath::try_parse</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10494">feat: <code>Debug</code> implemented for <code>AssetMode</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10516">Remove rogue : from embedded_asset! docs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10523">use <code>tree</code> syntax to explain bevy_rock file structure</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10493">Make AssetLoader/Saver Error type bounds compatible with anyhow::Error</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10514">Fix untyped labeled asset loading</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10526">Add <code>load_untyped</code> to LoadContext</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10574">fix example custom_asset_reader on wasm</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10450"><code>ReadAssetBytesError::Io</code>  exposes failing path</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10565">Added Method to Allow Pipelined Asset Loading</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10578">Add missing asset load error logs for load_folder and load_untyped</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10589">Fix wasm builds with file_watcher enabled</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10614">Do not panic when failing to create assets folder (#10613)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10619">Use handles for queued scenes in SceneSpawner</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10585">Fix file_watcher feature hanging indefinitely</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10410">derive asset for enums</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10628">Ensure consistency between Un/Typed <code>AssetId</code> and <code>Handle</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10698">Fix Asset Loading Bug</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10699">remove double-hasing of typeid for handle</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10623">AssetMetaMode</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10745">Fix GLTF scene dependencies and make full scene renders predictable</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10787">Print precise and correct watch warnings (and only when necessary)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10785">Allow removing and reloading assets with live handles</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10804">Add GltfLoaderSettings</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10920">Refactor <code>process_handle_drop_internal()</code> in bevy_asset</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11053">fix base64 padding when loading a gltf file</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11212">assets should be kept on CPU by default</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11218">Don't auto create assets folder</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10878">Use <code>impl Into&lt;A&gt;</code> for <code>Assets::add</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10939">Add <code>reserve_handle</code> to <code>Assets</code>.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11254">Better error message on incorrect asset label</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11138">GLTF extension support</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11370">Fix embedded watcher to work with external crates</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11369">Added AssetLoadFailedEvent, UntypedAssetLoadFailedEvent</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11284">auto create imported asset folder if needed</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11491">Fix minor typo</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11504">Include asset path in get_meta_path panic message</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11538">Fix documentation for <code>AssetReader::is_directory</code> function</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11260">AssetSaver and AssetTransformer split</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11543">AssetPath source parse fix</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11548">Allow TextureAtlasBuilder in AssetLoader</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11578">Add a getter for asset watching status on <code>AssetServer</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11612">Make SavedAsset::get_labeled accept &amp;str as label</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10153">Added Support for Extension-less Assets</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10383">Fix embedded asset path manipulation</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11626">Fix AssetTransformer breaking LabeledAssets</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11800">Put asset_events behind a run condition</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11644">Use Asset Path Extension for <code>AssetLoader</code> Disambiguation</a></li>
</ul>
<h3 id="a-core-a-app">A-Core + A-App
<a href="#a-core-a-app">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11512">Add Accessibility plugin to default plugins docs</a></li>
</ul>
<h3 id="a-accessibility">A-Accessibility
<a href="#a-accessibility">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10989">Add html tags required for accessibility</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11206">missed negation during accessibility refactor</a></li>
</ul>
<h3 id="a-transform">A-Transform
<a href="#a-transform">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10592">Add <code>Transform::is_finite</code></a></li>
</ul>
<h3 id="a-ecs-a-hierarchy">A-ECS + A-Hierarchy
<a href="#a-ecs-a-hierarchy">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10889">Add a doc note about despawn footgun</a></li>
</ul>
<h3 id="a-text">A-Text
<a href="#a-text">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10854">Rename <code>TextAlignment</code> to <code>JustifyText</code>.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11662">Subtract 1 from text positions to account for glyph texture padding.</a></li>
</ul>
<h3 id="a-assets-a-ui">A-Assets + A-UI
<a href="#a-assets-a-ui">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11205">UI and unloaded assets: don't filter out nodes with an unloaded image</a></li>
</ul>
<h3 id="a-utils-a-time">A-Utils + A-Time
<a href="#a-utils-a-time">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10980">Make SystemTime available in both native and wasm</a></li>
</ul>
<h3 id="a-rendering-a-assets">A-Rendering + A-Assets
<a href="#a-rendering-a-assets">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10502">Fix shader import hot reloading on windows</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10520">Unload render assets from RAM</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11767">mipmap levels can be 0 and they should be interpreted as 1</a></li>
</ul>
<h3 id="a-physics">A-Physics
<a href="#a-physics">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11106">refactor collide code (Adopted)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11500">Use <code>IntersectsVolume</code> for breakout example collisions</a></li>
</ul>
<h3 id="a-ecs-a-editor-a-app-a-diagnostics">A-ECS + A-Editor + A-App + A-Diagnostics
<a href="#a-ecs-a-editor-a-app-a-diagnostics">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/8453">System Stepping implemented as Resource</a></li>
</ul>
<h3 id="a-reflection-a-scenes">A-Reflection + A-Scenes
<a href="#a-reflection-a-scenes">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11878">Implement and register Reflect (value) for CameraRenderGraph and CameraMainTextureUsages</a></li>
</ul>
<h3 id="a-audio-a-windowing">A-Audio + A-Windowing
<a href="#a-audio-a-windowing">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11403">Winit update: fix suspend on Android</a></li>
</ul>
<h3 id="a-build-system-a-meta">A-Build-System + A-Meta
<a href="#a-build-system-a-meta">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10594">Standardize toml format with taplo</a></li>
</ul>
<h3 id="a-ecs-a-time">A-ECS + A-Time
<a href="#a-ecs-a-time">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10077">Wait until <code>FixedUpdate</code> can see events before dropping them</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10977">Add First/Pre/Post/Last schedules to the Fixed timestep</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11095">Add run conditions for executing a system after a delay</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11313">Add paused run condition</a></li>
</ul>
<h3 id="a-meta">A-Meta
<a href="#a-meta">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10369">Add "update screenshots" to release checklist</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10836">Remove references to specific projects from the readme</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10962">Fix broken link between files</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10971">[doc] Fix typo in CONTRIBUTING.md</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10965">Remove unused namespace declarations</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10998">Add docs link to root <code>Cargo.toml</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11242">Migrate third party plugins guidelines to the book</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11386">Run markdownlint</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11529">Improve <code>config_fast_builds.toml</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11541">Use <code>-Z threads=0</code> option in <code>config_fast_builds.toml</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11703">CONTRIBUTING.md: Mention splitting complex PRs</a></li>
</ul>
<h3 id="a-time">A-Time
<a href="#a-time">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10376">docs: use <code>read</code> instead of deprecated <code>iter</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10448">Rename <code>Time::&lt;Fixed&gt;::overstep_percentage()</code> and <code>Time::&lt;Fixed&gt;::overstep_percentage_f64()</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10442">Rename <code>Timer::{percent,percent_left}</code> to <code>Timer::{fraction,fraction_remaining}</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10564">Document how to configure FixedUpdate</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10453">Add discard_overstep function to <code>Time&lt;Fixed&gt;</code></a></li>
</ul>
<h3 id="a-assets-a-reflection">A-Assets + A-Reflection
<a href="#a-assets-a-reflection">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11483">Register <code>AssetPath</code> as type for reflection</a></li>
</ul>
<h3 id="a-diagnostics-a-utils">A-Diagnostics + A-Utils
<a href="#a-diagnostics-a-utils">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11419">move once from bevy_log to bevy_utils, to allow for it's use in bevy_ecs</a></li>
</ul>
<h3 id="a-windowing-a-app">A-Windowing + A-App
<a href="#a-windowing-a-app">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10389">Revert <code>App::run()</code> behavior/Remove <code>winit</code> specific code from <code>bevy_app</code></a></li>
</ul>
<h3 id="a-ecs-a-scenes">A-ECS + A-Scenes
<a href="#a-ecs-a-scenes">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11428">Make the MapEntities trait generic over Mappers, and add a simpler EntityMapper</a></li>
</ul>
<h3 id="a-hierarchy">A-Hierarchy
<a href="#a-hierarchy">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10598">bevy_hierarchy: add some docs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10721">Make bevy_app and reflect opt-out for bevy_hierarchy.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10951">Add <code>bevy_hierarchy</code> Crate and plugin documentation</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11194">Rename "AddChild" to "PushChild"</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11332">Inline trivial methods in bevy_hierarchy</a></li>
</ul>
<h3 id="a-ecs-a-app">A-ECS + A-App
<a href="#a-ecs-a-app">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11527">Add custom schedule example</a></li>
</ul>
<h3 id="a-transform-a-math">A-Transform + A-Math
<a href="#a-transform-a-math">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11604">return Direction3d from Transform::up and friends</a></li>
</ul>
<h3 id="a-ui-a-text">A-UI + A-Text
<a href="#a-ui-a-text">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10537">Improved Text Rendering</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11391">Feature-gate all references to <code>bevy_text</code> in <code>bevy_ui</code></a></li>
</ul>
<h3 id="a-input">A-Input
<a href="#a-input">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10534">Make ButtonSettings.is_pressed/released public</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10859">Rename <code>Input</code> to <code>ButtonInput</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11010">Add method to check if all inputs are pressed</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11128">Add window entity to TouchInput events</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10930">Extend <code>Touches</code> with clear and reset methods</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11400">Add logical key data to KeyboardInput</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11791">Derive Ord for GamepadButtonType.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11710">Add delta to CursorMoved event</a></li>
</ul>
<h3 id="a-rendering-a-diagnostics">A-Rendering + A-Diagnostics
<a href="#a-rendering-a-diagnostics">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11693">Use <code>warn_once</code> where relevant instead of manually implementing a single warn check</a></li>
</ul>
<h3 id="a-rendering">A-Rendering
<a href="#a-rendering">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10423">Fix bevy_pbr shader function name</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10394">Implement Clone for VisibilityBundle and SpatialBundle</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10461">Reexport <code>wgpu::Maintain</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10474">Use a consistent scale factor and resolution in stress tests</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10543">Ignore inactive cameras</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10542">Add shader_material_2d example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10555">More inactive camera checks</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10560">Fix post processing example to only run effect on camera with settings component</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10556">Make sure added image assets are checked in camera_system</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10548">Ensure ExtendedMaterial works with reflection (to enable bevy_egui_inspector integration)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10321">Explicit color conversion methods</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10611">Re-export wgpu BufferAsyncError</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10547">Improve shader_material example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10674">Non uniform transmission samples</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10712">Explain how <code>AmbientLight</code> is inserted and configured</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10722">Add wgpu_pass method to TrackedRenderPass</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10683">Add a <code>depth_bias</code> to <code>Material2d</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10733">Use as_image_copy where possible</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10734">impl <code>From&lt;Color&gt;</code> for ClearColorConfig</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10706">Ensure instance_index push constant is always used in prepass.wgsl</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10224">Bind group layout entries</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10657">prepass vertex shader always outputs world position</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10485">Swap material and mesh bind groups</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10801">try_insert Aabbs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10788">Fix prepass binding issues causing crashes when not all prepass bindings are used</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10841">Fix binding group in custom_material_2d.wgsl</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10905">Normalize only nonzero normals for mikktspace normal maps</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10742">light renderlayers</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10927">Explain how RegularPolygon mesh is generated</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10967">Fix Mesh2d normals on webgl</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10266">Update to wgpu 0.18</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10979">Fix typo in docs for <code>ViewVisibility</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10947">Add docs to bevy_sprite a little</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10818">Fix BindingType import warning</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10073">Update texture_atlas example with different padding and sampling</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11016">Update AABB when Sprite component changes in calculate_bounds_2d()</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11024">OrthographicProjection.scaling_mode is not just for resize</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11041">Derive <code>Debug</code> for <code>BloomCompositeMode</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11051">Document None conditions on compute_aabb</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11077">Replace calculation with function call</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11069">Register Camera types.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/8112">Add example for pixel-perfect grid snapping in 2D</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11134">Misc cleanup</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10325">Keep track of when a texture is first cleared</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11110">Fix Mesh::ATTRIBUTE_UV_0 documentation</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11140">Do not load prepass normals for transmissive materials</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11166">Export tonemapping_pipeline_key (2d), alpha_mode_pipeline_key</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11045">Simplify examples/3d/orthographic</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10231">Implement lightmaps.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11191">Bump the vertex attribute index for prepass joints.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11192">Fix: Gizmos crash due to the persistence policy being set to <code>Unload</code>. Change it to <code>Keep</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10736">Usability methods for RenderTargets and image handles</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11189">Explain Camera physical size is in pixel</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11243">update Outdated comment</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11307">Revert "Implement minimal reflection probes. (#10057)"</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11023">Explain OrthographicProjection.scale</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11030"><code>Mul&lt;f32&gt;</code> for ScalingMode</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11031">Rustdoc examples for OrthographicProjection</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11248">Option to enable deterministic rendering</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11292">Fix ssao only sampling mip 0</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11307">Revert "Implement minimal reflection probes. (#10057)"</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10588">Sprite slicing and tiling</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11152">Approximate indirect specular occlusion</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/5103">Texture Atlas rework</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11347">Exposure settings (adopted)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11368">Remove Vec from GpuArrayBuffer</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11373">Make <code>DynamicUniformBuffer::push</code> accept an <code>&amp;T</code> instead of <code>T</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11389">Restore brightness in the remaining three examples after exposure PR</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11412">Customizable camera main texture usage</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11416">Cleanup deterministic example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11366">Implement minimal reflection probes (fixed macOS, iOS, and Android).</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11323">optimize  batch_and_prepare_render_phase</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9943">add <code>storage_texture</code> option to as_bind_group macro</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11027">Revert rendering-related associated type name changes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11442">Meshlet prep</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10610">Reuse sampler when creating cached bind groups</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11524">Add Animated Material example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11280">Update to wgpu 0.19 and raw-window-handle 0.6</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11480">Fix bug where Sprite::rect was ignored</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11551">Added documentation explaining the difference between lumens and luxes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11383">Fix infinite asset preparation due to undrained AssetEvent events</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11487">Workaround for ICE in the DXC shader compiler in debug builds with an <code>EnvironmentMapLight</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11519">Refactor tonemapping example's image viewer update into two systems</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11454">Add <code>Mesh</code> transformation</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11534">Fix specular envmap in deferred</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11431">Add <code>Meshable</code> trait and implement meshing for 2D primitives</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10633">Optimize extract_clusters and prepare_clusters systems</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11399">RenderAssetPersistencePolicy → RenderAssetUsages</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10644">RenderGraph Labelization</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11627">Gate diffuse and specular transmission behind shader defs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11675">Add helpers for translate, rotate, and scale operations - Mesh</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11139">CameraProjection::compute_frustum</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11705">Added formats to <code>MeshVertexAttribute</code> constant's docstrings</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10812">Async pipeline compilation</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11671">sort by pipeline then mesh for non transparent passes for massively better batching</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11733">Added remove_indices to Mesh</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10268">Implement irradiance volumes.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11745">Mesh insert indices</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11751">Don't try to create a uniform buffer for light probes if there are no views.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11758">Properly check for result when getting pipeline in Msaa</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11737">wait for render app when main world is dropped</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11773">Deprecate shapes in <code>bevy_render::mesh::shape</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11781">Cache the QueryState used to drop swapchain TextureViews</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9172">Multithreaded render command encoding</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11798">Fix <code>Quad</code> deprecation message mentioning a type that doesn't exist</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11803">Stop extracting mesh entities to the render world.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11805">Stop copying the light probe array to the stack in the shader.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11456">Add <code>Mesh::merge</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11783">Call a TextureAtlasLayout a layout and not an atlas</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11645">fix shadow batching</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11581">Change light defaults &amp; fix light examples</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11868">New Exposure and Lighting Defaults (and calibrate examples)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11880">Change MeshUniform::new() to be public.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11882">Rename Core Render Graph Labels</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11884">Support optional clear color in ColorAttachment.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11893">irradiance: use textureSampleLevel for WebGPU support</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11847">Add configuration for async pipeline creation on RenderPlugin</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11907">Derive Reflect for Exposure</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11910">Add <code>MeshPipelineKey::LIGHTMAPPED</code> as applicable during the shadow map pass.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11911">Irradiance volume example tweaks</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11909">Disable irradiance volumes on WebGL and WebGPU.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11914">Remove <code>naga_oil</code> dependency from <code>bevy_pbr</code></a></li>
</ul>
<h3 id="a-scenes">A-Scenes
<a href="#a-scenes">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10529">Re-export <code>ron</code> in <code>bevy_scene</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10638">Fix load scene example to use proper serialization format for rotation field</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10780">Mention DynamicSceneBuilder in doc comment</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10441">Mention DynamicSceneBuilder in scene example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11003">Implement Std traits for <code>SceneInstanceReady</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11239">Change SceneSpawner::spawn_dynamic_sync to return InstanceID</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11289">Fix scene example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11002">Send <code>SceneInstanceReady</code> only once per scene</a></li>
</ul>
<h3 id="a-utils">A-Utils
<a href="#a-utils">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10496">bevy_utils: Export <code>generate_composite_uuid</code> utility function</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10648">Save an instruction in <code>EntityHasher</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11054">Add SystemTime to bevy_utils</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11006">Re-export smallvec crate from bevy_utils</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11178">Enable cloning EntityHashMap and PreHashMap</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11616">impl <code>Borrow</code> and <code>AsRef</code> for <code>CowArc</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11690">Hash stability guarantees</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11721">Deprecating hashbrown reexports</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11785">Update ahash to 0.8.7</a></li>
</ul>
<h3 id="a-ui">A-UI
<a href="#a-ui">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10421">ui material: fix right border width</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10424">Add PartialEq to Anchor</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10422">UI Material: each material should have its own buffer</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10434">UI Materials: ignore entities with a <code>BackgroundColor</code> component</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10591">Fix panic when using image in UiMaterial</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10454">Make clipped areas of UI nodes non-interactive</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10730">Fix typo in resolve_outlines_system</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10922">Clip outlines by the node's own clipping rect, not the parent's.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10942">Give UI nodes with <code>Display::None</code> an empty clipping rect</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11188">Create serialize feature for bevy_ui</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11199">Made the remaining types from bevy_ui to reflect the Default trait if…</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10559">Camera-driven UI</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11371">fix occasional crash moving ui root nodes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11405">Fix panic on Text UI without Cameras</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11436">Allow user to choose default ui camera</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11555">Rustdoc links in bevy_ui</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11575">Avoid unconditionally unwrapping the Result - UI Stack System</a></li>
</ul>
<h3 id="a-assets-a-diagnostics">A-Assets + A-Diagnostics
<a href="#a-assets-a-diagnostics">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11870">Fix asset loader registration warning</a></li>
</ul>
<h3 id="a-audio-a-reflection">A-Audio + A-Reflection
<a href="#a-audio-a-reflection">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10484">Reflect and register audio-related types</a></li>
</ul>
<h3 id="a-audio">A-Audio
<a href="#a-audio">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10608">Add <code>VolumeLevel::ZERO</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10906">Deduplicate systems in bevy_audio</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10910">Non-Intrusive refactor of <code>play_queued_audio_system()</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10970">docs: AnimationPlayer::play doesn't have transition_duration arg</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11092">Remove the ability to ignore global volume</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10419">Optional override for global spatial scale</a></li>
</ul>
<h3 id="a-tasks">A-Tasks
<a href="#a-tasks">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10517">Make FakeTask public on singlethreaded context</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10670">Re-export <code>futures_lite</code> in <code>bevy_tasks</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10675">bump bevy_tasks futures-lite to 2.0.1</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11455">Fix wrong transmuted type in <code>TaskPool::scope_with_executor_inner</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11856">Use <code>std::thread::sleep</code> instead of spin-waiting in the async_compute example</a></li>
</ul>
<h3 id="a-ecs">A-ECS
<a href="#a-ecs">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10415">Use <code>EntityHashMap</code> for <code>EntityMapper</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10378">Allow registering boxed systems</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10446">Remove unnecessary if statement in scheduler</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10519">Optimize <code>Entity::eq</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10380">Add 'World::run_system_with_input' function + allow <code>World::run_system</code> to get system output</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10551">Update <code>Event</code> send methods to return <code>EventId</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10563">Some docs for IntoSystemSet</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10596">Link to <code>In</code> in <code>pipe</code> documentation</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10558">Optimise <code>Entity</code> with repr align &amp; manual <code>PartialOrd</code>/<code>Ord</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10561">Allow #[derive(Bundle)] on tuple structs (take 3)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10650">Add an <code>Entry</code> api to <code>EntityWorldMut</code>.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10651">Make impl block for RemovedSystem generic</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10400">Append commands</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10682">Rustdoc example for Ref</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10691">Link to <code>Main</code> schedule docs from other schedules</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10681">Warn that Added/Changed filters do not see deferred changes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10719">Fix non-functional nondeterministic_system_order example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10748">Copy over docs for <code>Condition</code> trait from PR #10718</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10746">Implement <code>Drop</code> for <code>CommandQueue</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9918">Split WorldQuery into WorldQueryData and WorldQueryFilter</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10624">Make IntoSystemConfigs::into_configs public API (visible in docs)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/6773">Override QueryIter::fold to port Query::for_each perf gains to select Iterator combinators</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10815">Deprecate QueryState::for_each_unchecked</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10837">Clarifying Commands' purpose</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10770">Make ComponentId typed in Components</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10811">Reduced <code>TableRow</code> <code>as</code> Casting</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10873">Add <code>EntityCommands.retain</code> and <code>EntityWorldMut.retain</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10879">Remove unnecessary ResMut in examples</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10893">Add a couple assertions for system types</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10918">Remove reference to default schedule</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10943">Improve <code>EntityWorldMut.remove</code>, <code>retain</code> and <code>despawn</code> docs by linking to more detail</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10764">Reorder fields in SystemSchedule</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10779">Rename <code>WorldQueryData</code> &amp; <code>WorldQueryFilter</code> to <code>QueryData</code> &amp; <code>QueryFilter</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10941">Fix soundness of <code>UnsafeWorldCell</code> usage example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10885">Actually check alignment in BlobVec test aligned_zst</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10782">Rename <code>Q</code> type parameter to <code>D</code> when referring to <code>WorldQueryData</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10969">Allow the editing of startup schedules</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9822">Auto insert sync points</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10937">Simplify lifetimes in <code>QueryState</code> methods</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11012">Add is_resource_changed_by_id + is_resource_added_by_id</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11021">Rename some lifetimes (ResMut etc) for clarity</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11025">Add non-existent entity behavior to Has doc</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11028">Fix typo in docs for Has</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11043">Add insert_state to App.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11049">Explain Changed, Added are not archetype filters</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11064">Add missing colon in <code>States</code> documentation</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11063">Explain EventWriter limits concurrency</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11084">Better doc for SystemName</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11164">impl ExclusiveSystemParam for WorldId</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11153">impl ExclusiveSystemParam for PhantomData</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11149">Remove little warn on bevy_ecs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11118">Rename <code>ArchetypeEntity::entity</code> into <code>ArchetypeEntity::id</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11103">Fixed Typo in the description of EntityMut</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11104">Implement Deref and DerefMut for In</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11163">impl ExclusiveSystemParam for SystemName</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11146">Print a warning for un-applied commands being dropped from a CommandQueue</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11195">Implement TypePath for EntityHash</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10799">Fix integer overflow in BlobVec::push for ZST</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11234">Fix integer overflow in BlobVec::reserve_exact</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11089">StateTransitionEvent</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11107">Restore support for running <code>fn</code> <code>EntityCommands</code> on entities that might be despawned</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11142">Remove apply_deferred example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11226">Minimize small allocations by dropping the tick Vecs from Resources</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9907">Change Entity::generation from u32 to NonZeroU32 for niche optimization</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11162">fix B0003 example and update logs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9797">Unified identifer for entities &amp; relations</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11316">Simplify conditions</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11319">Add example using <code>State</code> in docs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11268">Skip rehashing TypeIds</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11334">Make <code>TypeId::hash</code> more robust in case of upstream rustc changes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11360">Fix doc of [<code>Schedules</code>] to mention exclusion of current schedule.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9774">Dynamic queries and builder API</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11388">Remove duplicate <code>#[automatically_derived]</code> in ECS macro</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11404">Get Change Tick methods for Resources</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11417">Optional state</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11167">Double the capacity when BlobVec is full</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11321">document which lifetime is needed for systemparam derive</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11445">refactor: Simplify lifetimes for <code>Commands</code> and related types</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11444">Implement <code>Debug</code> for <code>CommandQueue</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11486">Fix typo in comment</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11531">Rename Schedule::name to Schedule::label</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11560">Exclusive systems can now be used for one-shot systems</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11561">added ability to get <code>Res&lt;T&gt;</code> from <code>World</code> with <code>World::get_resource_ref</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11499">bevy_ecs: Add doc example for par_iter_mut (#11311)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11574">Add an example demonstrating how to send and receive events in the same system</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11583">Add a doctest example for EntityMapper</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11129">Rephrase comment about <code>Local&lt;T&gt;</code> for clarity. (Adopted)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11611">Use batch spawn in benchmarks</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11528">Fix bug where events are not being dropped</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10774">Make Archetypes.archetype_component_count private</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9920">Deprecated Various Component Methods from <code>Query</code> and <code>QueryState</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11728"><code>System::type_id</code> Consistency</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11764">Typo in [<code>ScheduleLabel</code>] derive macro</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11769">Mention Resource where missing from component/resource related type docs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11700">Expose query accesses</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11687">Add a method for detecting changes within a certain scope</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11822">Fix double indirection when applying command queues</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11801">Immediately poll the executor once before spawning it as a task</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11855">Fix small docs misformat in <code>BundleInfo::new</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11838"><code>FilteredEntityRef</code> conversions</a></li>
</ul>
<h3 id="a-rendering-a-animation">A-Rendering + A-Animation
<a href="#a-rendering-a-animation">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11474">TextureAtlasBuilder now respects insertion order</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10539">normalize joint weights</a></li>
</ul>
<h3 id="a-ecs-a-meta">A-ECS + A-Meta
<a href="#a-ecs-a-meta">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10411">resolve all internal ambiguities</a></li>
</ul>
<h3 id="a-rendering-a-ui">A-Rendering + A-UI
<a href="#a-rendering-a-ui">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10739">Provide GlobalsUniform in UiMaterial shaders</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11722">Include UI node size in the vertex inputs for UiMaterial.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11600">UI Texture 9 slice</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11780">Optional ImageScaleMode</a></li>
</ul>
<h3 id="a-math">A-Math
<a href="#a-math">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10466">Define a basic set of Primitives</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10580">Add and impl Primitives</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10620">Add winding order for <code>Triangle2d</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10643">Use minor and major radii for <code>Torus</code> primitive shape</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10857">Remove <code>From</code> implementations from the direction types</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10884">Impl <code>TryFrom</code> vector for directions and add <code>InvalidDirectionError</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10882">Add <code>Direction2d::from_xy</code> and <code>Direction3d::from_xyz</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11179">Implement <code>Neg</code> for <code>Direction2d</code> and <code>Direction3d</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11180">Add constants for <code>Direction2d</code> and <code>Direction3d</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11176">Add <code>approx</code> feature to <code>bevy_math</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11238">Add <code>libm</code> feature to <code>bevy_math</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11172">Add <code>new_and_length</code> method to <code>Direction2d</code> and <code>Direction3d</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11082">Update <code>glam</code>, <code>encase</code> and <code>hexasphere</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10946">Implement bounding volume types</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11335">Remove <code>Default</code> impl for <code>CubicCurve</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11336">Implement bounding volumes for primitive shapes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11434">Improve <code>Rectangle</code> and <code>Cuboid</code> consistency</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11435">Change <code>Ellipse</code> representation and improve helpers</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11433">Add <code>Aabb2d::new</code> and <code>Aabb3d::new</code> constructors</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11432">Add geometric primitives to <code>bevy_math::prelude</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11425">Direction: Rename <code>from_normalized</code> to <code>new_unchecked</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11439">Implement bounding volume intersections</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11526">Add <code>new</code> constructors for <code>Circle</code> and <code>Sphere</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11514">Derive PartialEq, Serialize, Deserialize and Reflect on primitives</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11017">Document RegularPolygon</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11310">Add RayTest2d and RayTest3d</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10632">Add more constructors and math helpers for primitive shapes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11585">Add <code>Capsule2d</code> primitive</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11586">Add volume cast intersection tests</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11640">Add Clone to intersection test types</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11650">Implement <code>approx</code> traits for direction types</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11649">Support rotating <code>Direction3d</code> by <code>Quat</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11635">Rename RayTest to RayCast</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11666">Add example for bounding volumes and intersection tests</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11697">Dedicated primitive example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11867">Un-hardcode positions and colors in <code>2d_shapes</code> example</a></li>
</ul>
<h3 id="a-build-system">A-Build-System
<a href="#a-build-system">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10544">check for all-features with cargo-deny</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10653">Bump actions/github-script from 6 to 7</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10640">Add doc_markdown clippy linting config to cargo workspace</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10646">Enable <code>clippy::undocumented_unsafe_blocks</code> warning across the workspace</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10723">Remove trailing whitespace</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10672">Move remaining clippy lint definitions to Cargo.toml</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10684">Add <code>clippy::manual_let_else</code> at warn level to lints</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10963">Remove unused import</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10961">Rename functions and variables to follow code style</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10966">Remove unused variable</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11060">add libxkbcommon-x11-0 to the default linux dependencies</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11058">fix patches for example showcase after winit update</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11059">finish cleaning up dependency bans job</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11014">Bump actions/upload-artifact from 2 to 4</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10892">Publish dev-docs with Github Pages artifacts (2nd attempt)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11250">example showcase patches: use default instead of game mode for desktop</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11342">Bump toml_edit in build-template-pages tool</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11421">Miri is failing on latest nightly: pin nightly to last known working version</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11418">Bump dev-docs pages actions</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11462">Unpin nightly for miri</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11507">documentation in CI: remove lock file</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11469">Bump actions/cache from 3 to 4</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11576">simplify animated_material example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11596">example showcase: fix window resized patch</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11630">run examples on macOS to validate PRs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11676">Inverse <code>missing_docs</code> logic</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11712">Bump peter-evans/create-pull-request from 5 to 6</a></li>
</ul>
<h3 id="a-gizmos">A-Gizmos
<a href="#a-gizmos">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10408">Fix float precision issue in the gizmo shader</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10550">Gizmo Arrows</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10631">Move Circle Gizmos to Their Own File</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10660">move gizmo arcs to their own file</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11296">Warn when bevy_sprite and bevy_pbr are not enabled with bevy_gizmos</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10342">Multiple Configurations for Gizmos</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11420">Fix gizmos app new panic</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11422">Use Direction3d for gizmos.circle normal</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11540">Implement Arc3D for Gizmos</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11580">Insert Gizmos config instead of Init</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11072">Drawing Primitives with Gizmos</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11699">fix(primitives): fix polygon gizmo rendering bug</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11792">Fix global wireframe behavior not being applied on new meshes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11860">Overwrite gizmo group in <code>insert_gizmo_group</code></a></li>
</ul>
<h3 id="a-rendering-a-math">A-Rendering + A-Math
<a href="#a-rendering-a-math">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10856">Split <code>Ray</code> into <code>Ray2d</code> and <code>Ray3d</code> and simplify plane construction</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10368">Introduce AspectRatio struct</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11639">Implement meshing for <code>Capsule2d</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11688">Implement <code>Meshable</code> for some 3D primitives</a></li>
</ul>
<h3 id="a-core">A-Core
<a href="#a-core">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11573">Derive <code>Debug</code> for <code>Framecount</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11726">Don't unconditionally enable bevy_render or bevy_assets if mutli-threaded feature is enabled</a></li>
</ul>
<h3 id="a-windowing">A-Windowing
<a href="#a-windowing">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10714">Some explanations for Window component</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10741">don't run update before window creation in winit</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10735">add new event <code>WindowOccluded</code> from winit</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10872">Add comment about scale factor in <code>WindowMode</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10911">Refactor function <code>update_accessibility_nodes</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10897">Change <code>Window</code> scale factor to f32 (adopted)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11011">Reexport winit::platform::android::activity::* in bevy_winit</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10702">Update winit dependency to 0.29</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11057">Remove CanvasParentResizePlugin</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11065">Use <code>WindowBuilder::with_append()</code> to append canvas</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11227">Fix perf degradation on web builds</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11245">mobile and webgpu: trigger redraw request when needed and improve window creation</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11270">Remove unnecessary unsafe impls for WinitWindows on Wasm</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11325">Fix Reactive and ReactiveLowPower update modes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11305">Change <code>WinitPlugin</code> defaults to limit game update rate when window is not visible (for real this time)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11489">Cleanup bevy winit</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/7650">Add <code>name</code> to <code>bevy::window::Window</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11735">Avoid unwraps in winit fullscreen handling code</a></li>
</ul>
<h3 id="a-ui-a-transform-a-text">A-UI + A-Transform + A-Text
<a href="#a-ui-a-transform-a-text">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11326">UI text rotation and scaling fix</a></li>
</ul>
<h3 id="a-animation">A-Animation
<a href="#a-animation">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10540">Fix animations resetting after repeat count</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10562">Add Debug, PartialEq and Eq derives to bevy_animation.</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10755">support all types of animation interpolation from gltf</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11306">Clean up code to find the current keyframe</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11330">Skip alloc when updating animation path cache</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11605">Replace the <code>cubic_spline_interpolation</code> macro with a generic function</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/4482">Animatable trait for interpolation and blending</a></li>
</ul>
<h3 id="a-ecs-a-pointers">A-ECS + A-Pointers
<a href="#a-ecs-a-pointers">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11818">Replace pointer castings (<code>as</code>) by their API equivalent</a></li>
</ul>
<h3 id="a-ecs-a-utils">A-ECS + A-Utils
<a href="#a-ecs-a-utils">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10808">Add helper macro's for logging only once</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11498">Move <code>EntityHash</code> related types into <code>bevy_ecs</code></a></li>
</ul>
<h3 id="a-reflection">A-Reflection
<a href="#a-reflection">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10705">Fix issue with <code>Option</code> serialization</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10627">fix <code>insert_reflect</code> panic caused by <code>clone_value</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10771">Remove pointless trait implementation exports in <code>bevy_reflect</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10791">Fix nested generics in Reflect derive</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10740">Fix debug printing for dynamic types</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11037">reflect: maximally relax <code>TypePath</code> bounds</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11407">Use <code>static_assertions</code> to check for trait impls</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9623">Add <code>ReflectFromWorld</code> and replace the <code>FromWorld</code> requirement on <code>ReflectComponent</code> and <code>ReflectBundle</code> with <code>FromReflect</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11447">Fix reflected serialization/deserialization on <code>Name</code> component</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11397">Add Reflection for Wrapping/Saturating types</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11497">Remove TypeUuid</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11556">Fix warnings in bevy_reflect</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9046">bevy_reflect: Type parameter bounds</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11597">bevy_reflect: Split <code>#[reflect(where)]</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11437">reflection: replace <code>impl_reflect_struct</code> with <code>impl_reflect</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11029">Add the ability to manually create ParsedPaths (+ cleanup)</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11686">bevy_reflect: Reflect <code>&amp;'static str</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11068">Improve DynamicStruct::insert</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11736">Missing registrations</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11664">Add <code>ReflectKind</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11810">doc(bevy_reflect): add note about trait bounds on <code>impl_type_path</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11777">bevy_reflect_derive: Clean up attribute logic</a></li>
</ul>
<h3 id="a-ecs-a-tasks">A-ECS + A-Tasks
<a href="#a-ecs-a-tasks">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10692">Async channel v2</a></li>
</ul>
<h3 id="a-pointers">A-Pointers
<a href="#a-pointers">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10475">Remove a ptr-to-int cast in <code>CommandQueue::apply</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11461">Fix memory leak in dynamic ECS example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11610">bevy_ptr: fix <code>unsafe_op_in_unsafe_fn</code> lint</a></li>
</ul>
<h3 id="a-ecs-a-reflection">A-ECS + A-Reflection
<a href="#a-ecs-a-reflection">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11641">Adding derive Reflect for tick structs</a></li>
</ul>
<h3 id="a-reflection-a-gizmos">A-Reflection + A-Gizmos
<a href="#a-reflection-a-gizmos">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10483"><code>#[derive(Reflect)]</code> on <code>GizmoConfig</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10486">Register <code>WireframeColor</code></a></li>
</ul>
<h3 id="no-area-label">No area label
<a href="#no-area-label">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10445">Fix intra-doc link warnings</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10337">Fix minor issues with custom_asset example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10527">Prepend <code>root_path</code> to meta path in HttpWasmAssetReader</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10577">support required features in wasm examples showcase</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10601">examples showcase: use patches instead of sed for wasm hacks</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10011">Add [lints] table, fix  adding <code>#![allow(clippy::type_complexity)]</code> everywhere</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10370">Bumps async crates requirements to latest major version</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10693">delete methods deprecated in 0.12</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10758">Ran <code>cargo fmt</code> on <code>benches</code> crate</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10749">Remove unnecessary path prefixes</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10827">Fix typos in safety comment</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10847">Substitute <code>get(0)</code> with <code>first()</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10848">Remove identity <code>map</code> calls</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10914">Renamed Accessibility plugin to AccessKitPlugin in bevy_winit</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11076">Reorder impl to be the same as the trait</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10999">Replace deprecated elements</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10990">Remove unnecessary parentheses</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10999">Replace deprecated elements</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10988">Simplify equality assertions</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10996">Add Solus package requrements to linux_dependencies.md</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10336">Update base64 requirement from 0.13.0 to 0.21.5</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11071">Update sysinfo version to 0.30.0</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11075">Remove unnecessary parens</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11076">Reorder impl to be the same as the trait</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11143">Fix ci xvfb</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11040">Replace or document ignored doctests</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11182">Add static assertions to bevy_utils for compile-time checks</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11261">Fix missed explicit conversions in examples</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11269">Remove unused event-listener dependency</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11293">Fixed typo in generate_custom_mesh.rs example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11338">Extract examples <code>CameraController</code> into a module</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11353">Use EntityHashMap whenever possible</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11379">Fix link to plugin guidelines</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11381">[doc] Fix typo and formatting in CONTRIBUTING.md</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11440">add a required feature for shader_material_glsl</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11467">Update ruzstd requirement from 0.4.0 to 0.5.0</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11484">Tweak gamepad viewer example style</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11506">Add <code>.toml</code> extension to <code>.cargo/config_fast_builds</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11508">Add README to benches</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11513">Fix panic in examples using argh on the web</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11523">Fix cyclic dep</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11591">Enable the <code>unsafe_op_in_unsafe_fn</code> lint</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11599">Update erased-serde requirement from 0.3 to 0.4</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11615">Fix example send_and_receive_events</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11617">Update cursor.rs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11652">Use the <code>Continuous</code> update mode in stress tests when unfocused</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11669">Don't auto insert on the extract schedule</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11678">Update tracing-tracy requirement from 0.10.4 to 0.11.0 and tracy-client requirement from 0.16.4 to 0.17.0</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11684">Use TypeIdMap whenever possible</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11709">Fix a few typos in error docs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11725">bevy_render: use the non-send marker from bevy_core</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11797">Ignore screenshots generated by <code>screenshot</code> example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11795">Docs reflect that <code>RemovalDetection</code> also yields despawned entities</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11622">bevy_dynamic_plugin: fix <code>unsafe_op_in_unsafe_fn</code> lint</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11832">Replace <code>crossbeam::scope</code> reference with <code>thread::scope</code> in docs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11865">Use question mark operator when possible</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11866">Fix a few Clippy lints</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11894">WebGPU: fix web-sys version</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11913">Remove map_flatten from linting rules</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11915">Fix duplicate <code>encase_derive_impl</code> dependency</a></li>
</ul>
<h3 id="a-app">A-App
<a href="#a-app">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10609">add regression test for #10385/#10389</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11193">Fix typos plugin.rs</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11080">Expressively define plugins using functions</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11618">Mark <code>DynamicPluginLoadError</code> internal error types as source</a></li>
</ul>
<h3 id="a-diagnostics">A-Diagnostics
<a href="#a-diagnostics">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/10663">Fix Line for tracy version</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11020">Some doc to bevy_diagnostic</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11170">Print to stderr from panic handler in LogPlugin</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11171">Add ability to panic to logs example</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11331">Make sure tracy deps conform to compatibility table</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11327">Describe purpose of bevy_diagnostic</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/10822">Add support for updating the tracing subscriber in LogPlugin</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/9266">Replace <code>DiagnosticId</code> by <code>DiagnosticPath</code></a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11521">fix link to tracy</a></li>
<li><a href="https://github.com/bevyengine/bevy/pull/11850">Fix sysinfo CPU brand output</a></li>
</ul>
<h3 id="a-rendering-a-ecs">A-Rendering + A-ECS
<a href="#a-rendering-a-ecs">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11018">Explain where rendering is</a></li>
</ul>
<h3 id="a-assets-a-math">A-Assets + A-Math
<a href="#a-assets-a-math">#</a>
</h3>
<ul>
<li><a href="https://github.com/bevyengine/bevy/pull/11361">Use glam for computing gLTF node transform</a></li>
</ul>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Headphone and Amp Impedance (2011) (170 pts)]]></title>
            <link>http://nwavguy.blogspot.com/2011/02/headphone-amp-impedance.html</link>
            <guid>39412198</guid>
            <pubDate>Sat, 17 Feb 2024 18:49:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="http://nwavguy.blogspot.com/2011/02/headphone-amp-impedance.html">http://nwavguy.blogspot.com/2011/02/headphone-amp-impedance.html</a>, See on <a href="https://news.ycombinator.com/item?id=39412198">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="post-body-5066147790043584221">
<p><strong>INTRO:</strong> The output Impedance of headphone sources is one of the most common reasons the same headphones can sound different depending on what they’re plugged into. This important parameter is rarely specified by manufactures but can make a huge difference in sound quality and headphone compatibility.</p> <p><strong>HEADPHONE IMPEDANCE MOVED:</strong> This article used to be about both output impedance and headphone impedance. But, in the interest of shorter articles, I’ve split them. So if you’re looking for info headphones, please see:</p> <ul> <li><a href="http://nwavguy.blogspot.com/2011/02/headphone-impedance-explained.html" target="_blank">Headphone Impedance Explained</a></li></ul> <p><strong>THE SHORT VERSION:</strong> All you really need to know is most headphones work best when the output impedance is less than 1/8th the headphone impedance. So, for example, with 32 ohm Grados the output impedance can be, at most, 32/8 = 4 ohms. The Etymotic HF5s are 16 ohms so the max output impedance is 16/8 = 2 ohms. If you want to be assured a source will work well with just about any headphone, simply make sure the output impedance is under 2 ohms.</p> <p><strong>WHY DOES OUTPUT IMPEDANCE MATTER?</strong> It matters for at least three reasons:</p> <ul> <li>The greater the output impedance the greater the voltage drop with lower impedance loads. This drop can be large to enough to prevent driving low impedance headphones to sufficiently loud levels. A real world example is the <a href="http://nwavguy.blogspot.com/2011/02/behringer-uca202-review.html" target="_blank">Behringer UCA202</a> with a 50 ohm output impedance. It struggles with some 16 - 32 ohm headphones.  </li><li>Headphone impedance changes with frequency. If the output impedance is much above zero this means the voltage delivered to the headphones will also change with frequency. <em>The greater the output impedance, the greater the frequency response deviations</em>. Different headphones will interact in different, and typically unpredictable, ways with the source. Sometimes these variations can be large and plainly audible.  </li><li>As output impedance increases <a href="http://en.wikipedia.org/wiki/Damping_factor" target="_blank">electrical damping</a> is reduced. The bass performance of the headphones, as designed by the manufacture, may be audibly compromised if there’s insufficient damping. The bass might become more “boomy” and less controlled. The transient response becomes worse and the deep bass performance is compromised (the headphones will roll off sooner at low frequencies). A few, such as those who like a very warm “tube like” sound, might enjoy this sort of under damped bass. But it’s almost always less accurate compared to using a low impedance source.</li></ul> <p><strong>THE 1/8th RULE: </strong>To minimize all three of the above problems, it’s only necessary to keep the output impedance less than 1/8th the headphone impedance. Or, put another way, just divide the headphone impedance by 8 to get the maximum output impedance without potential audible degradation.</p> <p><strong>IS THERE A STANDARD FOR OUTPUT IMPEDANCE? </strong>The only standard I’m aware of is IEC 61938 from 1996. It specifies an output impedance of 120 ohms. There are numerous reasons why this is standard is way out of data and a really bad idea. In a <a href="http://www.stereophile.com/content/between-ears-art-and-science-measuring-headphones-page-3" target="_blank"><em>Stereophile</em> article</a> about headphones, they said of the 120 ohm standard:</p> <blockquote> <p><em>“Whoever wrote that must live in a fantasy world.”</em></p></blockquote> <p>I have to agree with <em>Stereophile</em>. The 120 ohm standard might have been (barely!) tolerable before the iPod and other portable music sources became immensely popular, but it’s not any more. Most headphones are designed very differently today. </p> <p><strong>PSUEDO STANDARDS:</strong> A lot of professional gear has a 20 – 50 ohm headphone output impedance. I’m not aware of any that follows the 120 ohm IEC standard. Consumer gear tends to be in the range of 0 – 20 ohms and, with the exception of tube and certain other esoteric designs, most high-end audiophile headphone sources are well under 2 ohms.</p> <p><strong>THE iPOD INFLUENCE:</strong> Since the 120 ohm standard was published in 1996, music players advanced from lo-fi cassette tape and skipping portable CD players to the massive iPod craze. Apple helped take high quality audio portable and there are at least half a billion portable digital players in circulation not including phones. Nearly all portable music/media players now run from a single cell Li-Ion battery. These batteries only produce a bit over 3 volts which means you typically get less than 1 volt RMS of audio output driving typical headphones (sometimes much less). If you add 120 ohms to the output, and use typical portable headphones (nearly all of which are in the range of 16 –32 ohms) the headphones usually won’t play loud enough. And most of the battery power is wasted as heat in the 120 ohm resistor. Only a small fraction of the power makes it to the headphones. That’s a big problem in portable audio where getting the best battery life from ever smaller devices is critical. It’s much more efficient to deliver all the power to headphones.</p> <p><strong>HEADPHONE DESIGN:</strong> So what output impedance do headphone manufactures design for? As of 2009 well over <a href="http://en.wikipedia.org/wiki/IPod#Sales" target="_blank">220 million iPods</a> had been sold. The iPod, and similar portable players, are the 800 pound gorillas in the headphone market. So, not surprisingly, most manufactures started designing many or all of their headphones to work well with the iPod. That means they’re designed to work with an output impedance under 10 ohms. And higher-end full size cans are most often designed for sources that follow the 1/8th Rule or have a near zero output impedance. I’m not aware of <em>any</em> current audiophile headphones intended for home use designed to the ancient 120 ohm standard.</p> <p><strong>THE BEST HEADPHONES ARE DESIGNED FOR THE BEST SOURCES:</strong> If you do a quick survey of the most well reviewed high-end headphone amps and DACs, they nearly all have very low output impedances. Examples are products from Grace Designs, Benchmark Media, HeadAmp, HeadRoom, Violectric, etc. It only stands to reason that most high-end headphones are designed to be at their best with similar products. Some of the most highly regarded headphones have relatively low impedances including several models from Denon, AKG, Etymotic, Ultimate Ears, Westone, HiFiMAN and Audeze. All of these, as far as I know, were designed to be used with low (ideally near zero) impedance sources. I’ve also had a Sennheiser representative tell me they design their audiophile and portable headphones for zero ohm sources.</p> <p><strong>THE FREQUENCY RESPONSE PROBLEM:</strong> If the output impedance is more more than 1/8th the headphone impedance there will be variations in the frequency response. With some headphones, especially balanced armature or multi driver designs, these variations can be rather extreme. Here’s what 43 ohms of output impedance does to the Ultimate Ears SuperFi 5’s frequency response—a total, and very audible, variation of 12 dB:</p> <p><a href="http://lh3.ggpht.com/-MVBWr8J8FFw/TmGiu9eev0I/AAAAAAAABYw/vZFRGr6TyH4/s1600-h/FiiO-E9-Frequency-Response-Ultimate-%25255B1%25255D%25255B2%25255D.png"><img alt="FiiO-E9-Frequency-Response-Ultimate-[1]" height="438" src="http://lh3.ggpht.com/-OoNHD5En7lU/TmGixtxPBhI/AAAAAAAABY0/ITbCZzzyq4M/FiiO-E9-Frequency-Response-Ultimate-%25255B1%25255D_thumb.png?imgmax=800" title="FiiO-E9-Frequency-Response-Ultimate-[1]" width="680"></a></p>  <p><strong>10 OHM OUTPUT IMPEDANCE:</strong> Some might look at the above example and think it’s extreme with a 43 ohm source. But plenty of sources have around a 10 ohm output impedance. Here’s the same headphones with a 10 ohm source—there’s still a very audible 6 dB of variation. This sort of curve creates weaker bass, a “glaring” midrange emphasis, muted high frequencies, and odd phase characteristics due to the sharp “notch” at 10 khz that can alter spatial perceptions:</p> <p><a href="http://lh4.ggpht.com/-AwwXHjo9w0c/TmGiyQMxSbI/AAAAAAAABY4/nyEehzYkFv8/s1600-h/FiiO-E9-Frequency-Response-Large-Jac%25255B2%25255D.png"><img alt="FiiO-E9-Frequency-Response-Large-Jac" height="438" src="http://lh3.ggpht.com/--qwDEKiTDtY/TmGi1WyQpqI/AAAAAAAABY8/dLWlPTAcrDg/FiiO-E9-Frequency-Response-Large-Jac_thumb.png?imgmax=800" title="FiiO-E9-Frequency-Response-Large-Jac" width="680"></a></p>  <p><strong>FULL SIZE SENNHEISERS:</strong> Here are the full size, higher impedance, Sennheiser HD590 cans with the same 10 ohm output impedance. Now the variation is only a bit over 1 dB above 20 hz. While 1 dB isn’t that much, it’s right in the most “boomy” bass region which is the last place most want any sort of emphasis:</p> <p><a href="http://lh4.ggpht.com/-lFfMw2bhWk8/TmGi2L8iKvI/AAAAAAAABZA/CiqSVzCB2sA/s1600-h/FiiO-E9-Frequency-Response-Sennhesie%25255B2%25255D%25255B2%25255D.png"><img alt="FiiO-E9-Frequency-Response-Sennhesie[2]" height="438" src="http://lh6.ggpht.com/-k3BhzrvuYNw/TmGi6RgPUdI/AAAAAAAABZE/LW36l1XoCJM/FiiO-E9-Frequency-Response-Sennhesie%25255B2%25255D_thumb.png?imgmax=800" title="FiiO-E9-Frequency-Response-Sennhesie[2]" width="680"></a></p>  <p><strong>DAMPING EXPLAINED:</strong> Any dynamic driver, in a speaker or headphone, moves back and forth with the music. That’s how it creates sound and they all have moving mass. The laws of physics say an object in motion tends to stay in motion. Damping is used to help avoid unwanted motion. Without going into too many details, if a speaker is under-damped, it keeps moving after it should have stopped. And if it’s over-damped (rare) its ability to accurately follow the signal is compromised—imagine a speaker trying to operate submersed in maple syrup. There are only two ways to damp a driver—mechanically and electrically. </p> <p><strong>BOUNCING CARS:</strong> Mechanical damping is much like the shock absorbers on a car. They add resistance so when you hit a bump the car doesn’t keep bouncing up and down long after the bump. But they also add harshness because they reduce the suspension’s ability to accurately follow the road. They’re a compromise—soft shocks give a softer but more bouncy ride and stiff shocks control the bouncing better but make the ride harsher. <u><em>Mechanical damping is always a compromise.</em></u></p> <p><strong>ELECTRICAL IS BETTER:</strong> There’s a better option to control unwanted motion of headphone drivers and it’s called <a href="http://en.wikipedia.org/wiki/Damping_factor" target="_blank">electrical damping</a>. The voice coil and magnet of the driver work <em>with the amplifier</em> to control the motion of the driver. This kind of damping has fewer negative side effects and allows headphone designers to create headphones with less distortion and better sound. Just like a car suspension that can better follow the road, an optimally damped headphone driver can better follow the audio signal. But, and this is the critical part, <em><u>electrical damping is only effective when the output impedance of the amplifier is much lower than the impedance of the headphones.</u></em> If you plug 16 ohm headphones into an amp with a 50 ohm output impedance, there will be almost no electrical damping. That means when the driver is supposed to stop moving it might not. The headphone is more like a car with worn shock absorbers. If the 1/8th Rule is followed, however, there will be sufficient electrical damping.</p> <p><strong>A SPEAKER ANALOGY: </strong>Back in the day, before my time, speakers were mostly driven by amplifiers that used tubes instead of transistors. Tubes are high impedance devices that operate at high voltages so nearly all tube amps use output transformers. Without going into all the details, tube amps had widely varying output impedances that were often significant and violated the 1/8th Rule. Speaker manufactures couldn’t rely on amplifiers having a low enough impedance to provide much electrical damping. This compromised speaker design much like headphone design is compromised today if a headphone designer can’t rely on a low impedance source for proper electrical damping.</p> <p><strong>ACOUSTIC SUSPENSION:</strong> In the 1970’s the situation changed as solid state amplifiers became popular. Almost all solid state amps easily pass the 1/8th Rule. In fact, most pass a 1/50th Rule—their output impedance is generally below about 0.16 ohms—known as a damping factor of 50. Suddenly speaker manufactures were free to design better speakers that could take advantage of these much lower output impedances. And the first really good acoustic suspension sealed box speakers like the original AR's, Large Advents, etc. were developed. They had deeper and better bass than any of their tube-powered predecessors could manage from a similar box size. It was a big milestone in "hi-fi" to rely on lots of electrical damping from the amplifier. It’s too bad many headphone sources are 40+ years behind.</p> <p><strong>WHAT OUTPUT IMPEDANCE DOES MY SOURCE HAVE?</strong> Some manufactures make it clear they strive for a low output impedance (such as Benchmark), while others specify the actual output impedance of their products (such as Behringer does with the UCA202 at 50 ohms). And most, sadly, keep it a total mystery. Some product reviews, such as the ones on this blog, include measurements of the output impedance as it’s critical to the sound of the device with various different headphones.</p> <p><strong>WHY DO SO MANY SOURCES HAVE A HIGHER OUTPUT IMPEDANCE?</strong> The most common reasons are:</p> <ul> <li><strong>Headphone Protection - </strong>More powerful sources with a low output impedance might be capable of delivering too much power into low impedance headphones. To help protect such headphones, some designers raise the output impedance. <em><u>This is a compromise to try and have the amp adapt to the load used. But it comes at a big price with many headphones</u>. </em>A better solution is offering two gain options The low gain setting can lower the maximum output voltage when using low impedance headphones. And, in addition, active current limiting can be used so the source will automatically restrict the maximum output into lower impedance headphones even if the wrong gain setting is used.&nbsp; </li><li><strong>To Be Different - </strong>Some manufactures raise the output impedance on purpose claiming it makes their source sound better. Sometimes “different sells” as it’s a way to differentiate the sound of their product from their competitors. But, in this case, <em>the particular “different sound” you get is entirely dependent on which headphones are used</em>. With some it might be an improvement and with others it’s more likely a big step backwards. The odds greatly favor degrading the sound. </li><li><strong>It’s Cheap</strong> – A higher output impedance is a band-aid for many inexpensive headphone sources. It’s a cheap way to achieve stability, a crude form of short circuit protection, and it can allow using an otherwise substandard op amp or output device that would be unable to drive 16 or even 32 ohm headphones directly. By adding some series resistance to the output all these things get “fixed” with a $0.01 part. But <em>the cheap “fix” comes at a substantial price in the sound quality with many headphones.</em></li></ul> <p><strong>EXCEPTIONS TO THE RULE:</strong> There are a few headphones supposedly designed for significantly higher output impedances. I do wonder if this might be more myth than reality these days in terms of audiophile and consumer headphones as I’m not aware for any specific examples. But it’s certainly possible. If so, using these headphones on a low impedance source might cause under-damped bass performance and a different frequency response than the manufacture intended. This might explain some of the “synergy” claims when certain headphones are mated with a certain source. But those “synergies” are entirely subjective—one man’s “bright and detailed” is another man’s “harsh”. The only way to get <em>consistent</em> performance is to use a low impedance source and follow the 1/8th Rule.</p> <p><strong>A CHEAP TEST:</strong> If you’re wondering if your current source is compromising the sound quality because of an unknown output impedance, consider buying the $19 <a href="http://nwavguy.blogspot.com/2011/03/fiio-e5-headphone-amp.html" target="_blank">FiiO E5 amp</a>. It has a near zero ohm output impedance and has enough output for most many headphones under 100 ohms. If it obviously improves the sound, it’s likely your source has an output impedance that’s too high.</p> <p><strong>BOTTOM LINE:</strong> Unless you know your particular headphones sound better with a specific higher output impedance, it’s best to always use a source with an output impedance no higher than 1/8th the impedance of your headphones. Or, to make it even simpler, an output impedance of 2 ohms or less.</p> <hr>  <h3>TECH SECTION:</h3> <hr>  <p><strong>IMPEDANCE VS RESISTANCE: </strong>These two terms are used somewhat interchangeably, but technically there are some significant differences. <a href="http://en.wikipedia.org/wiki/Electrical_resistance" target="_blank">Electrical resistance</a> is represented by the letter “R” and has the same value at all frequencies. <a href="http://en.wikipedia.org/wiki/Electrical_impedance" target="_blank">Electrical impedance</a> is more complex and its value typically changes with frequency. It’s represented by the letter “Z”. For the purposes of this article, the unit of measure for both is <a href="http://en.wikipedia.org/wiki/Ohm" target="_blank">Ohms</a>. </p> <p><strong>OUTPUT IMPEDANCE DIAGRAM:</strong> The diagram below shows the effect of output impedance. The blue circle on the left above represents a “perfect source”, the blue resistor (zig zag line) in the middle represents the output impedance. And the resistor on the right represents the load impedance (the headphones). If the output impedance is not zero, the voltage produced by the source will be reduced when a load is connected. <em>The higher the output impedance, the greater the drop in voltage at the load</em>. This drop is given by the formula: Load Voltage = Source Voltage * ( Zload / ( Zload + Zout) ). For more information see <a href="http://en.wikipedia.org/wiki/Voltage_divider" target="_blank">Wikipedia Voltage Divider</a>.</p> <p><img alt="output impedance" height="199" src="http://lh4.ggpht.com/_gnU30vMbtYg/TX-SPmXmeEI/AAAAAAAAAWY/e7Rq7gWZGsw/output%20impedance_thumb.png?imgmax=800" title="output impedance" width="500"></p> <p><strong>VOLTAGE AND CURRENT:</strong> It’s important to have at least some understanding of voltage and current to understand impedance and this article. Voltage is analogous to water pressure (i.e. PSI) while current is analogous to the volume of water (i.e. gallons per minute). If you let water run out of the end of your garden hose with nothing attached you get a lot of flow (current) and can fill a bucket quickly but the pressure at the end of the hose is near zero. If you put a small nozzle on the hose the pressure (voltage) is much higher but volume of water is reduced (it takes longer to fill the same bucket). The two are typically inversely related. High pressure usually means low flow and visa versa. The same is true of voltage and current. The relationship between voltage, current, and resistance (and for the purposes of this article, impedance) is defined by <a href="http://en.wikipedia.org/wiki/Ohm%27s_law" target="_blank">Ohm’s Law</a>. Substitute Z for R.</p> <p><strong>WHERE DOES THE 1/8th RULE COME FROM?</strong> The smallest audible difference most can hear is about 1 dB. For the output impedance to create a -1 dB change, you have antilog(-1/20) = 0.89. Using the divider formula from above, when the output impedance is 1/8 the load impedance you get 0.89 or a 1 dB drop. Headphone impedance can vary by a factor of 10 or more over the audio band. The SuperFi 5 is rated at 21 ohms but varies from 10 ohms to 90 ohms. So the 1/8 Rule gives a max output impedance of 2.6 ohms. Assuming a 1 volt source we get:</p> <ul> <li>Headphone Voltage at 21 Ohm Nominal Impedance = 21 (21+2.6) = 0.89 volts  </li><li>Headphone Voltage at 10 Ohm Minimal Impedance = 10 (10+2.6) = 0.79 volts  </li><li>Headphone Voltage at 90 Ohm Maximum Impedance = 90 (90+2.6) = 0.97 volts  </li><li>Frequency Response Variation = 20*LOG(.97/.89) = 0.75 dB (under the 1 dB goal)</li></ul> <p><strong>MEASURING OUTPUT IMPEDANCE: </strong>As seen in the diagram above the output resistance forms a voltage divider. By measuring the output voltage with no load, and with a known load, you can calculate the output impedance. This <a href="http://www.raltron.com/cust/tools/voltage_divider.asp">online calculator</a> makes it easy. The no load voltage is the “Input Voltage”, R2 is the known load resistance (don’t use headphones), the Output Voltage is the loaded voltage. Click Compute and R1 is the calculated output impedance. This can be done using a 60 hz sine wave file (Audacity can create such a file), a Digital Multi Meter (DMM), and a 15 – 33 ohm resistor. Most DMMs are only accurate around 60 hz. Play the 60 hz sine wave file and adjust the volume for about 0.5 volts. Then attach the resistor and note the new voltage. For example, 0.5 volts with no load, and 0.38 volts with a 33 ohm load gives an output impedance of about 10 ohms. The math is: Zout = (Rload * (Vnoload - Vload)) / Vload</p> <p><strong>REACTIVE LOADS:</strong> Few headphones represent a purely resistive load that’s constant over the audio band. Instead, they’re <a href="http://en.wikipedia.org/wiki/Electrical_reactance" target="_blank">reactive loads</a> and represent a <a href="http://en.wikipedia.org/wiki/Complex_impedance#Complex_impedance" target="_blank">complex impedance</a>. Because of the capacitive and inductive elements in headphones their impedance changes with frequency. For example, here is the Super Fi 5’s impedance (yellow) and phase (white). The impedance is only 21 ohms below about 200 hz. Above 200 hz it climbs to nearly 90 ohms at 1200 hz and then drops down below 10 ohms at 10 Khz:</p> <p><a href="http://lh4.ggpht.com/-om6IkMEGjlo/TmGi9RulJGI/AAAAAAAABZQ/oS27e0DPHj0/s1600-h/UE-superfi5-free-air-impedance-phase%25255B2%25255D.jpg"><img alt="UE-superfi5-free-air-impedance-phase" height="459" src="http://lh5.ggpht.com/-JcLpXn3_R_s/TmGi-elWaII/AAAAAAAABZU/9WI-dzZDU7g/UE-superfi5-free-air-impedance-phase_thumb.jpg?imgmax=800" title="UE-superfi5-free-air-impedance-phase" width="665"></a></p> <p><strong>FULL SIZE CANS:</strong> Some are not interested in IEMs like the Super Fi 5’s so here the impedance and phase for the popular Sennheiser HD590. It still varies from about 95 ohms to nearly 200 ohms—a range of 2X:</p> <p><a href="http://lh3.ggpht.com/-pQJ2vtPRH8U/TmGjBngDENI/AAAAAAAABZY/Wjz3sfZUP4U/s1600-h/Sennheiser-HD590-Impedance-and-Phase%25255B2%25255D.png"><img alt="Sennheiser-HD590-Impedance-and-Phase" height="357" src="http://lh3.ggpht.com/-3rdUuIfyW-I/TmGjB9kqM6I/AAAAAAAABZc/GQazMeJ11sQ/Sennheiser-HD590-Impedance-and-Phase_thumb.png?imgmax=800" title="Sennheiser-HD590-Impedance-and-Phase" width="665"></a></p> <p><strong>THE MATH: </strong>Earlier a graph was shown demonstrating about 12 dB of frequency response variation for the SuperFi 5’s driven from a 43 ohm source. If we take their rated impedance of 21 ohms as the reference level, and assume a 1 volt source, the voltage at the headphones will be given by:</p> <ul> <li>Reference Level: 21 / (43 + 21) = 0.33 V and we’ll call that 0 dB.  </li><li>At their minimum impedance of about 9 ohms it’s 9 / (9 + 43) = 0.17 V = – 5.6 dB  </li><li>At their maximum impedance of 90 ohms it’s 90 / (90 + 43) = 0.68 V = +6.2 dB  </li><li>Total Variation = 6.2 + 5.6 = 11.8 dB</li></ul> <p><strong>DAMPING LEVELS:</strong> The damping of a headphone driver, as explained earlier, is either entirely mechanical damping (Qms) or a combination of electrical (Qes) and mechanical damping. The total damping is known as Qts. How these parameters interact at low frequencies is explained by <a href="http://en.wikipedia.org/wiki/Thiele/Small#Small_signal_parameters" target="_blank">Thiele Small modeling</a>. Damping can be generalized into three categories:</p> <ul> <li>Critically Damped (Qts = 0.7) - This is widely considered ideal as it provides the deepest bass extension without any frequency response variations or excessive "ringing" (uncontrolled driver motion). The bass from a critically damped driver is often described as “tight”, “quick”, and “clean”. Q of 0.7 gives what most consider the ideal transient response.  </li><li>Over-Damped (Qts &lt; 0.7) - This keeps even tighter control over the driver but at the expense of less deep bass (the response rolls off sooner). So manufactures rarely intentionally over damp their products. </li><li>Under-Damped (Qts &gt; 0.7) - This trades off some low bass extension for a peak at higher bass frequencies. The driver is also no longer well controlled and exhibits excessive "ringing" (i.e. it doesn't stop soon enough when the audio signal stops). Under-damping creates frequency response variations, less<em> deep </em>bass, poor transient response and an upper bass peak. Under-damping is a cheap way to provide the illusion of more bass at the expense of the quality of the bass. It's frequently used in cheap headphones and speakers to provide "fake bass". Under –damped headphones/speakers are frequently described as having "boomy" or "sloppy" bass. <u><em>If your headphones were designed for electrical damping, and you use them with a source impedance greater than 1/8th their impedance, you will get under-damped bass</em>.</u></li></ul> <p><strong>TYPES OF DAMPING:</strong> There are three ways to damp the driver and control resonance:</p> <ul> <li><strong>Electrical Damping</strong> – This is known is Qes and it’s something like regenerative braking on on hybrid or electric car. When you hit the brakes, the electric motor slows the car by turning into a generator and sending the energy back to the battery. A driver in a headphone (or speaker) can do the same thing. But as the output impedance of the amplifier goes up, the braking effect is greatly diminished—hence the 1/8th Rule.  </li><li><strong>Mechanical Damping</strong> – This is known as Qms and, as explained earlier, it’s more like the shock absorbers on a car. As you add mechanical damping to a driver, it resists the musical signal driving it, and becomes more non-linear. This increases the distortion and degrades the sound quality.  </li><li><strong>Enclosure Damping</strong> – The enclosure can provide damping but this usually requires either a sealed enclosure, one with a tuned port, or one with a controlled restriction. Many of the best headphones, however, usually are open backed. This largely eliminates the headphone designer’s option of using the enclosure to provide damping as is done with speakers.</li></ul> <p><strong>EAR CUP LOADING:</strong> For headphones that form a fairly consistent seal, such a fully <a href="http://en.wikipedia.org/wiki/Circumaural#Circumaural" target="_blank">circumaural</a> over the ear headphones with earpads that fit snuggly against the head, the designer can somewhat rely on the “enclosure” formed by the ear cup to possibly provide some damping. But the shape of heads, ears, type of hair, headphone positioning, eyeglasses and other factors make it highly variable. And this option isn’t available at all for all the supra-aural (on the ear) headphones. Here are two graphs of the Sennheiser HD650 impedance. Note the open air bass resonance peaks at about 530 ohms but drops to 500 ohms on a simulated head. This is due to damping provided by the ear cup enclosure and the ear pad.<a href="http://lh5.ggpht.com/-Sk6ytM5gi0I/TmZJOamJtJI/AAAAAAAABZ4/PSr2cFIpJMs/s1600-h/Sennheiser-HD650-Impedance--Phase-Ne%25255B5%25255D.png"><img alt="Sennheiser HD650 Impedance &amp; Phase New Open Air" height="469" src="http://lh6.ggpht.com/-A4B9NUvpeCw/TmZJO9P4F1I/AAAAAAAABZ8/IedEjsQoW6E/Sennheiser-HD650-Impedance--Phase-Ne%25255B4%25255D.png?imgmax=800" title="Sennheiser HD650 Impedance &amp; Phase New Open Air" width="681"></a></p> <p><a href="http://lh6.ggpht.com/-JeplGPQzGgQ/TmZJPCN_SHI/AAAAAAAABaA/Ygv5-Sk3-Ks/s1600-h/Sennheiser-HD650-Impedance--Phase-Ne.png"><img alt="Sennheiser HD650 Impedance &amp; Phase New Simulated Head" height="469" src="http://lh6.ggpht.com/-XM_7Q5Bdro8/TmZJPik9htI/AAAAAAAABaE/iyp67h4kIuY/Sennheiser-HD650-Impedance--Phase-Ne%25255B2%25255D.png?imgmax=800" title="Sennheiser HD650 Impedance &amp; Phase New Simulated Head" width="681"></a></p> <p><strong>FINAL WORDS:</strong> Hopefully I’ve made it clear the only way to get consistent performance between headphones and their source is to follow the 1/8th Rule. While some may prefer the sound using a higher output impedance, that’s very specific to each particular headphone, the particular output impedance, and the person’s own subjective tastes. Ideally a new standard should be developed and manufactures should be encouraged to design headphone sources with an output impedance below 2 ohms.</p>  

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I worry our Copilot is leaving some passengers behind (203 pts)]]></title>
            <link>https://joshcollinsworth.com/blog/copilot</link>
            <guid>39411912</guid>
            <pubDate>Sat, 17 Feb 2024 18:21:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://joshcollinsworth.com/blog/copilot">https://joshcollinsworth.com/blog/copilot</a>, See on <a href="https://news.ycombinator.com/item?id=39411912">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		
	

<main id="main" tabindex="-1"><article><img src="https://joshcollinsworth.com/images/post_images/copilot/copilot.webp" alt="" width="16" height="9">

		

		<p><b>Published:</b>
			February 13, 2024
			<br>
				<b>Updated:</b>
				February 15, 2024</p>

		
		<p>GitHub Copilot was one of the earliest “AI” tools on the market—or at least, one of the first I was aware of. It came along well before <a href="https://chat.openai.com/" rel="nofollow">ChatGPT</a> exploded, so I and many other developers got the opportunity to try out these large language models (LLMs) before they really broke into the mainstream.</p>
<p>If you’re not familiar: <a href="https://github.com/features/copilot" rel="nofollow">GitHub Copilot</a> “watches” you code, and makes suggestions as you do. It tries to predict what you’ll want to do, and you can either take its suggestions, or reject them and get new ones. (This all happens in your code editor, but you can also interact with it via a chat input.)</p>
<p>I’ve been using Copilot a lot lately, personally and professionally. I’m generally a big fan; it’s hard to imagine going back to not using it.</p>
<p>That’s because <em>sometimes</em>, Copilot can be uncannily helpful. It can, and does, accomplish in mere seconds what might take me several minutes of focused work and/or rote repetition. It’s excellent at math, at boilerplate, and at pattern recognition.</p>
<p>Other times, however, Copilot is clearly just regurgitating irrelevant code samples that aren’t at all useful. Sometimes, it’s so far off base its suggestions are hilarious. (It regularly suggests that I start my components with about 25 nested <code>div</code>s, for example.)</p>
<figure><img src="https://joshcollinsworth.com/images/post_images/copilot/div-vomit.webp" alt="">
<figcaption>Copilot loves suggesting about 25 nested divs as a starting point.</figcaption></figure>
<p>I assume this is because of a flaw in how LLMs work. They’re prediction engines; they’re literally built to guess. They’re not made to give you verifiable facts or to say “I don’t know” (at least, not above a certain threshold of probability).</p>
<p>Copilot gets its name because, well, it’s supposed to be your assistant; somebody you trust to work with, who has your back. But that’s not always accurate, in my experience.</p>


<p>Copilot is often less like a trusted partner, and more like a teammate who’s as likely to put the ball in your own goal as the opponent’s.</p>

<h2 id="cause-for-concern">Cause for concern</h2>
<p>You know from the title of this post that I’m worried.</p>
<p>I’m not worried about that ridiculous <code>div</code> soup, and things like that. Any developer should know better than to take that seriously.</p>
<p>And yes, I’m worried about the quality of our code…but maybe not in the way you might think.</p>
<p>That is: “code quality” isn’t especially meaningful to me, in and of itself.</p>
<p>For one thing, it’s highly subjective; how do you even measure it? And besides, it’s entirely possible the net effect of Copilot <em>is</em> positive (or at least inert), even if it does make some amount of your work worse, in whatever way you might choose to define that.</p>
<p>Plenty of people worry loudly about LLM tools overrunning the internet with crap, and while I guess you could put me in that group, it’s not because I’m a code idealist. Even if half the code in our software is mediocre Copilot suggestions, I don’t really care all that much, as long as it still <em>works</em>.</p>
<p>That’s what I’m worried about.</p>


<p>I’m worried the global, net effect of Copilot might be that it’s making accessibility on the web even worse than it already is.</p>

<p>I’m worried Copilot might be acting, in the silent, covert way systems often do, as a force for discrimination.</p>
<p>There are plenty of other, similar LLM coding tools out there; Copilot is generally just the oldest and most common. While I mostly only refer to Copilot here, I think this entire post applies to all of these tools.</p>
<h2 id="a-real-world-example-my-simple-component">A real-world example: my simple component</h2>
<p>Recently, I set out to build a component to help me generate footnotes on this site. You know; the kind that shows up as a tiny link in some text, and that when clicked, jumps you to the bottom of the page for an accompanying annotation. <a href="#footnote-1" id="footnote-link-1">1
</a></p>
<p>This is a very simple task, as far as web dev goes. In fact, it’s since-the-dawn-of-HTML type of stuff; all you really need is two anchor tags. (You might reasonably wonder why it even needed to be a component in the first place; I was just trying to automate the numbering.)</p>
<p>This blog is in Svelte, and so some of the code samples in this section will be, too. The syntax in these basic examples should hopefully be close enough to something you’re familiar with to parse even if you don’t know it, though.</p>
<p>As soon as I created the file and started typing, Copilot did all the zany things you might expect: it tried to import a library that didn’t actually exist in my codebase, as well as a Svelte export that I didn’t need at all. It <em>also</em> reached for its favorite bit, and slung an ungodly amount of ghost divs into my editor.</p>
<p>Funny, but not concerning. Ultimately, any dev with any experience at all ought to be able to immediately identify that as the hallucination it is.<a href="#footnote-2" id="footnote-link-2">2
</a> The rest, tooling should spot, even if you didn’t.</p>
<p>As for the relevant bits of code, I’d expect most any competent frontend developer should probably know something like this markup (maybe not this exactly, but something in this general shape) is the proper solution:</p>
<pre><!-- HTML_TAG_START --><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>#footnote-1<span>"</span></span> <span>id</span><span><span>=</span><span>"</span>link-1<span>"</span></span><span>&gt;</span></span>1<span><span><span>&lt;/</span>a</span><span>&gt;</span></span>

<span>&lt;!-- ...Somewhere down the page: --&gt;</span>

<span><span><span>&lt;</span>ol</span><span>&gt;</span></span>
	<span><span><span>&lt;</span>li</span> <span>id</span><span><span>=</span><span>"</span>footnote-1<span>"</span></span><span>&gt;</span></span>
		My footnote content
		<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>#link-1<span>"</span></span><span>&gt;</span></span>Back<span><span><span>&lt;/</span>a</span><span>&gt;</span></span>
	<span><span><span>&lt;/</span>li</span><span>&gt;</span></span>
<span><span><span>&lt;/</span>ol</span><span>&gt;</span></span></code><!-- HTML_TAG_END --></pre>
<p>Just links doing link things. Good old-fashioned HTML.</p>
<p>But for this dead-simple task, <em>GitHub Copilot wanted me to add a JavaScript click handler</em>. Something like this, instead:</p>
<pre><!-- HTML_TAG_START --><code><span><span><span>&lt;</span>script</span><span>&gt;</span></span><span><span>
	<span>const</span> <span>handleClick</span> <span>=</span> <span>(</span><span>e</span><span>)</span> <span>=&gt;</span> <span>{</span>
		e<span>.</span><span>preventDefault</span><span>(</span><span>)</span>
		<span>const</span> target <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>'#footnote-1'</span><span>)</span>
		target<span>.</span><span>focus</span><span>(</span><span>)</span>
	<span>}</span>
</span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>

<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>#<span>"</span></span> <span><span>on:</span>click=</span><span><span>{</span>handleClick<span>}</span></span><span>&gt;</span></span>1<span><span><span>&lt;/</span>a</span><span>&gt;</span></span></code><!-- HTML_TAG_END --></pre>
<p><strong>I hope any good developer would immediately spot this as categorically bad code.</strong></p>
<p>For one thing, there’s no reason to use JavaScript here; the link tag literally exists to do what all this JavaScript is trying to do.</p>
<p>For another, a meaningless <code>href="#"</code> attribute is an accessibility (a11y) mistake all on its own, on top of bad UX. It means users can’t share the link, see where it goes, open it in a new tab, or use it without JavaScript. Assistive technologies probably wouldn’t be as helpful with this as they would be with a real <code>href</code>, either.</p>


<p>Copilot was essentially advising me to make my own, worse anchor tag with JavaScript, instead of just using what the browser already has.</p>

<p>This implementation shouldn’t even warrant consideration, because the path is absolutely fraught with peril, for me and for my users. If I keep going, I’ll be on the hook for all kinds of behaviors and use cases I probably won’t anticipate, and probably won’t handle entirely correctly even if I do.</p>
<p>At <em>absolute best</em>, I’ve done a bunch of extra work just to make my bespoke anchor tag work the same as the one that’s shipped with every browser ever for free.</p>
<p>In short: you shouldn’t reach for JavaScript if you don’t have to, and you shouldn’t override browser default behavior without an extremely good reason.</p>
<h3 id="a-second-attempt">A second attempt</h3>
<p>Ok, so I got a bad suggestion. Maybe Copilot didn’t actually understand what I was trying to do.</p>
<p>I decided to give it another shot, this time via Copilot’s helpful chat interface. I spelled out my intentions much more clearly this time:</p>
<img src="https://joshcollinsworth.com/images/post_images/copilot/command.webp" alt="Prompting GitHub Copilot to 'generate a footnote component that I can put into a blog post. When clicked, the footnote should jump the user down to a footer to read the footnote text. There should be a link with that text to jump the user back up to the original location.">
<p>It could probably be a better prompt, but it’s clear enough, I think. Here’s what I got back (I took the time to transcribe it, rather than showing a screenshot, because I think it’s good to see):</p>
<pre><!-- HTML_TAG_START --><code><span><span><span>&lt;</span>script</span><span>&gt;</span></span><span><span>
  <span>let</span> showFootnote <span>=</span> <span>false</span>

  <span>function</span> <span>toggleFootnote</span><span>(</span><span>)</span> <span>{</span>
		showFootnote <span>=</span> <span>!</span>showFootnote
	<span>}</span>
</span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>

<span><span><span>&lt;</span>div</span><span>&gt;</span></span>
	<span><span><span>&lt;</span>p</span><span>&gt;</span></span>This is some text with a
		<span><span><span>&lt;</span>span</span>
			<span>class</span><span><span>=</span><span>"</span>footnote<span>"</span></span>
			<span><span>on:</span>click=</span><span><span>{</span>toggleFootnote<span>}</span></span>
		<span>&gt;</span></span>
			footnote
		<span><span><span>&lt;/</span>span</span><span>&gt;</span></span>
	<span><span><span>&lt;/</span>p</span><span>&gt;</span></span>

	<span><span>{</span>#<span>if</span> showFootnote<span>}</span></span>
		<span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>footer<span>"</span></span><span>&gt;</span></span>
			<span><span><span>&lt;</span>p</span><span>&gt;</span></span>
				This is the footnote text.
				<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>#top<span>"</span></span><span>&gt;</span></span>Back to top<span><span><span>&lt;/</span>a</span><span>&gt;</span></span>
			<span><span><span>&lt;/</span>p</span><span>&gt;</span></span>
		<span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
	<span><span>{</span><span>/</span><span>if</span><span>}</span></span>
<span><span><span>&lt;/</span>div</span><span>&gt;</span></span></code><!-- HTML_TAG_END --></pre>
<p>You might notice this code doesn’t even do the right thing; I asked it for a footnote, and I got a conditional click handler demo. But egregious though it is, that’s not even the part I’m concerned about.</p>
<p><strong>This is a thoroughly inaccessible solution</strong>. It’s a click handler on a non-interactive <code>span</code> element. For one thing, as above, this blocks users who don’t have JavaScript enabled. That might be necessary for some things in web software, but certainly not for this.</p>
<p>More importantly: this is an <em>extremely basic</em> a11y violation. It’s so simple and so obvious, <em>even the Svelte VS Code plugin</em> warned me about it:</p>
<p><img src="https://joshcollinsworth.com/images/post_images/copilot/warning.webp" alt="Warning"></p>
<p>That <code>span</code> isn’t focusable, so keyboard users can’t tab to it or activate it. You need a pointer device, which may or may not include any given assisted technology interface.</p>
<p>Plus, there’s a whole slew of other problems with trying to make a non-interactive element behave as a link or a button. It won’t be as perceivable, or operable, unless you properly consider and handle a whole world of use cases. Like the link above, it’s way harder, and best-case, you just wind up back where you would’ve started if you’d used the proper HTML to begin with.</p>


<p>What does it say about Copilot’s knowledge of accessibility when it will hand us code even basic checking tools would flag?</p>

<p>Copilot is encouraging us to block users unnecessarily, by suggesting obviously flawed code, which is wrong on every level: wrong ethically, wrong legally, and the wrong way to build software.</p>
<p>I know we’re not supposed to hold so-called AI<a href="#footnote-3" id="footnote-link-3">3
</a> tools responsible for their flaws. “They’re not perfect” may as well be the tagline for LLMs.</p>
<p>But if we’re giving one of the world’s major corporations our money, in exchange for this tool that’s supposed to make us better…shouldn’t it be held to <em>some</em> standard of quality? Shouldn’t the results I get from a paid service at <em>least</em> be better than a bad StackOverflow suggestion that got down-voted to the bottom of the page (and which would probably come with additional comments and suggestions letting me know why it was ranked lower)?</p>


<p>Copilot is now responsible for a large and ever-increasing percentage of the code being run on devices all across the planet.</p>
<p>How can we possibly find it acceptable that this tool is unreliable at best, and actively harmful at worst?</p>

<h3 id="attempt-number-three">Attempt number three</h3>
<p>I tried prompting Copilot a third time. This time, I was <em>extremely</em> explicit about what I wanted. I made sure I described very clearly <em>two anchor tags</em>, with <code>href</code> attributes that point to one another’s <code>id</code>s.</p>
<p>I’m not going to bother posting the result I got here, because it was more of the same. <code>&lt;a href="#"&gt;</code> with JavaScript to do all the work. At least all the tags were right this time, even if the implementation was obviously bad.</p>
<p>Another solution with most of the same problems, so clear that my editor already had them underlined.</p>
<h2 id="the-burden-of-responsibility">The burden of responsibility</h2>
<p>Some might be inclined to defend Copilot here, and place the responsibility of code quality (in all its forms) on the developer. There’s a certain amount of fairness to that position. After all, I’m the one with the job, not the computer. Shouldn’t I be the gatekeeper? If the code is bad because of a tool I used, isn’t that at least partially down to my wielding of the tool?</p>
<p>Again, this is a fair argument. But not all that is fair is practical or equitable.</p>
<p>It’s pretty obvious things like 25 nested <code>div</code> elements are a wild malfunction (sorry, “hallucination”). I’d expect pretty much anyone to turn a skeptical eye towards that suggestion.</p>
<p>And for any reasonably competent frontend developer, the other cases above <em>should</em> throw up red flags. But there are a lot of issues here.</p>
<p>Let’s start with the historically abysmal track record developers have when it comes to identifying inaccessible code.</p>
<p>It seems like every year, we get a new study showing that somewhere around 99% of the internet has accessibility issues—and that’s just the ones machines can detect. There are <em>way</em> more kinds than <em>that</em>.</p>
<p>Given that current state of affairs, I don’t have a lot of faith in the status quo here.</p>
<p>Besides: there’s a point where a dangerous tool bears some of the responsibility for its own safety.</p>
<p>When the microwave was brand new to the market, and this new space-age technology allowed what used to take 10–20 minutes or more to get done in mere seconds, the manufacturers did’t get to make ovens that stayed on when you opened the door just because the tech was new and revolutionary. They couldn’t claim the user should’ve known better, while allowing their kitchen to fry and their pets to die of internal burns (even though, presumably, most of the people using the new microwaves were previously experienced cooks). They had to build safety features in.<a href="#footnote-4" id="footnote-link-4">4
</a></p>


<p>Products of all kinds are required to ensure misuse is discouraged, at a minimum, if not difficult or impossible. I don’t see why LLMs should be any different.</p>

<p>We wouldn’t even find it acceptable if ChatGPT, or any other LLM, failed to build some basic safety into the product. It shouldn’t fail to give you help if you desperately need it, and it shouldn’t put anyone in harm’s way. (LLMs have done both of those things before, in fact, and faced sharp backlash that led directly to the products being improved. So we know it’s possible.)</p>
<p>Plus, there are <em>far less</em> sophisticated technologies that are fully capable of warning us, or even stopping us, when we’re writing inaccessible or improper code. Why should we just accept that LLM tools not only <em>fail</em> to at least give us the same warnings, but <em>actively push us the wrong way</em>?</p>
<h3 id="fighting-gravity">Fighting gravity</h3>
<p>That constant pressure is my real concern.</p>
<p>Sure, you should know bad code when you see it, and you should not let it past you when you do. But what happens when you’re seeing bad code <em>all day every day</em>?</p>
<p>What happens when <em>you aren’t sure</em> whether it’s good or not?</p>
<p>One benefit of Copilot people commonly tout is how helpful it is when working in a new or unfamiliar language. But if you’re in that situation, <em>how will you know a bad idea when you see it</em>?</p>
<p>Again: I’m not concerned with some platonic ideal of code quality here; I’m concerned with very real impact on user experience and accessibility.</p>
<p>Yes, <em>I</em> would know better than to put a fake button or a link without an <code>href</code> on a page. But what happens when one of my colleagues, who’s not focused on frontend, is using Copilot just to get some stuff out of their way? What happens if that code gets accepted because it’s not their specialty, but it appears to work fine to them?</p>
<p>After all, if I were using Copilot to write, say, Rust or Go, I wouldn’t have any idea whether I was writing good code or not. I’d try it out, and if it seemed to work, I’d move on. I probably wouldn’t even remember what the code looked like five minutes later.</p>
<p>But we know that approach can cause problems on both sides of development. And when it comes to frontend interactivity, the likelihood that blind faith just made your product less accessible is currently quite high.</p>
<p>Here’s another case: what happens if I’m actually a good developer who can spot that violation, but I don’t, because Copilot’s already worn me down like a little kid asking for candy, and my will and focus have been eroded by hundreds of previous nudges?</p>


<p>Any tool that can and will produce inaccessible code is effectively weighting the scales towards that outcome.</p>

<p>If ensuring quality is <em>your responsibility</em>, and the tool you’re using pushes bad quality your way, you are fighting against gravity in that situation. It’s you versus the forces of entropy. And unless you fight perfectly (which you won’t), the end result is, unavoidably, a worse one.</p>
<p>Besides, we probably shouldn’t make assumptions about who can, or will, spot the issues put forth by LLMs in the first place. It’s tempting to dismiss the concern and say “sure, yeah, bad developers will take bad suggestions.”</p>


<p>We’re all bad developers at least some of the time.</p>

<p>None of us is perfect. We have deadlines, and other responsibilities, and bosses who want lots of things that aren’t necessarily directly related to code quality. We’re not all going to spot every piece of bad code that comes across our screen. (Heck, most of us have <em>pushed</em> bad code, that we wrote, on a Friday afternoon.) So when we use a tool that throws bad code our way some percentage of the time, we’re effectively guaranteeing it influences what we make.</p>
<h3 id="the-quality-delta">The quality delta</h3>
<p>Another common argument I see in defense of Copilot is: yes, bad developers will push bad code with it. But they’re bad developers; they would’ve been pushing bad code anyway! And along the way, maybe Copilot actually helps them do something better, too.</p>
<p>Personally, I find that argument unacceptably dismissive. Will some people put bad code out there? Of course. Does that absolve us of giving them a tool to put out even worse code, even faster? I really don’t think it does.</p>
<p>Sure, I gave Mark a beer, but he’s an alcoholic; he probably would’ve been drinking anyway.</p>
<p>Unfair? Maybe. I’m not so sure. I would argue that if you know <em>any</em> number of people will abuse something, you have at least <em>some</em> responsibility to try to prevent it.</p>
<p>In any case, if we know we exist on an uneven playing field (which we do), <em>we shouldn’t see the slant as the baseline</em>. If the status quo is already inequitable (which it is), we shouldn’t see something that’s <em>equally inequitable</em> as just fine, just because that’s the current reality. It’s <em>not</em> fine. It’s just more of the same inequitable slant.</p>
<p>Go back to the section before; if Copilot is enabling bad developers to work even faster, and do more bad things than ever before, on top of <em>actively passing</em> them bad suggestions, I don’t think we can just get away with saying the whole thing is purely the fault of those developers.</p>


<p>A system is what it does. A machine that hands bad code to bad developers is a machine that enables bad developers to stay as bad developers.</p>

<h3 id="the-time-idealist">The time idealist</h3>
<p>Ok, let’s say bad devs gonna bad dev. But some still argue: that’s fine, because <em>now</em>, the <em>good</em> developers are doing much <em>better</em>! And, they’ll have time to make the web a better place, because of all the other helpful things Copilot is doing!</p>
<p>Oh, how I wish the world worked that way, my sweet summer child.</p>
<p>Even if you’re one of the “good devs,” and even if Copilot suddenly makes you twice as productive, as Microsoft (dubiously) claims, <em>your day didn’t just suddenly get half as long</em>. You just suddenly got twice as many responsibilities.</p>
<p>If organizations actually cared about putting resources towards accessibility, they’d already be doing it. They don’t. They care about profit, and the moment you have 40% more time, you’re going to spend 100% of it on something that makes the company money.</p>
<h3 id="but-ai-will-fix-what-it-broke">But AI will fix what it broke</h3>
<p>There’s been a lot of talk about how LLMs will soon be able to fix accessibility issues on the web. And I admit, there is some reason for optimism in this area.</p>
<p>I’ve seen it myself, in fact. I have a common condition known as color vision deficiency; partial colorblindness. Certain parts of the red-green spectrum are invisible to my eye. I can see <em>most</em> reds and greens fine, but certain hues blend together. Light pinks might look white; a lime green might seem yellow; green stoplights just look white; and purple almost always looks blue to me, because I can’t see the red in it. (Actually, I just learned recently the Goombas in Mario games are brown, not red, as I’ve always seen them.)</p>
<p>But I’m a developer and designer, and so working with color is crucial for me. So lately, when I’ve wanted to make sure the color I’m working with is <em>actually</em> the color I think it is, I’ll pop open ChatGPT, paste in the hex code, and ask what color it actually is. “That’s a bright yellow,” it might tell me.</p>
<p>Many think this type of thing will come to browsers, somehow, and will be able to help correct accessibility errors in similar ways. If an image doesn’t have <code>alt</code> text, for example, an LLM tool may be able to describe the image.</p>
<p>Again, I think there’s warranted optimism here. However:</p>
<ol><li>That’s still a long ways off, if it ever comes;</li>
<li>There’s no guarantee of how well it will work even when it does arrive (will it describe the image correctly? Will it understand the context, and the vibes of the image? <em>Should it</em> in the first place, if the author left the <code>alt</code> empty on purpose? And by the way, why do we have such faith in an LLM to get this right when we’ve spent this whole time talking about an LLM getting accessibility very wrong? Are we sure we have the cause for optimism we think we do here?); and finally</li>
<li>There’s no credit card for inequity. I don’t think it’s ethically sound to suggest that any present wrongdoing is justified by a future solution that will undo it, especially given points 1 and 2.</li></ol>
<h3 id="whats-the-alternative">What’s the alternative?</h3>
<p>The final pro-Copilot argument I’d like to address here is: it’s not any worse than StackOverflow, or Google.</p>
<p>In theory, if you didn’t have Copilot available, you’d go and search Google, most likely ending up on StackOverflow. And there’s no guarantee that what you find in that search will be of good quality, or that it’ll be any more accessible.</p>
<p>That, too, is fair. But I’d point out that by the time you’ve gotten to that answer, you’ve seen at least a half dozen <em>potential</em> solutions (via the search results and the StackOverflow answers). You might come across a “don’t do it this way” headline. You might decide to look at two or three options, just to compare and contrast.</p>
<p>That’s <em>invaluable</em> context. Not only are you now better equipped to understand <em>this</em> solution, you learned more for next time. You’re a better developer than you were.</p>
<p>Not so with Copilot. You gained zero context. You didn’t really learn anything. I certainly wouldn’t be learning Rust, if I were just letting Copilot generate it all for me. I got a workable answer of unknown quality handed to me, and my brain was not challenged or wrinkled in the slightest.</p>
<p><em>Plus</em>, with StackOverflow, you most likely have plenty of comments and explanations of <em>why</em> one solution might be better than another, or potential pitfalls to avoid. The discussion around the code might well be even more useful than the code itself.</p>
<p>And, of course, it’s all sorted by a voting system that, while certainly not perfect, generally pushes good results to the top, and suppresses bad answers.</p>
<p>You don’t get any of that with Copilot. You get one suggestion: the one the algorithm in the black box decided was the one you most likely want, based on whatever context it was able to glean.</p>


<p>Copilot doesn’t tell you why it picked that suggestion, or how it’s better than the other options.</p>
<p>But even if it did: how could you fully trust it?</p>

<h2 id="other-unavoidable-issues-with-llms">Other unavoidable issues with LLMs</h2>
<p>There are plenty of other issues with GitHub Copilot, and with other LLM tools, which I haven’t even mentioned yet. They’re essentially plagiarism machines, enabling corporations to profit on unpaid, non-consensual labor. Nobody whose data was used to train these LLMs was, really, allowed any say in the matter. In a lot of ways, in fact, “AI” is just the newest iteration of a very old form of colonial capitalism; build a wall around something you didn’t create, call it yours, and charge for access. (And when the natives complain, call them primitive and argue they’re blocking inevitable progress.)</p>
<p>LLMs have security issues, too. We’ve already seen cases where people’s private keys were leaked publicly, as an example.</p>
<p>Plus, the data they’re trained on—even if it <em>were</em> secure and ethically sourced—is inherently biased, as humans themselves are. LLMs trained on all the open data on the internet pick up all of our worst qualities along with everything else.</p>
<p>That’s deeply problematic on its own, but even more deeply concerning is how these effects might compound over time.</p>


<p>As more and more of the internet is generated by LLMs, more and more of it will reinforce biases. Then more and more LLMs will consume that biased content, use it for their own training, and the cycle will accelerate exponentially.</p>

<p>That’s horrifying for the internet in general, and for accessibility in particular. The more AI-generated garbage is spewed out by marketers trying to game SEO (or trying to churn out content after their teams have been laid off and replaced by AI), the more inaccessible code will proliferate.</p>
<p>On top of all these issues, LLMs are wildly energy intensive. They consume an obscene amount of power and water—and the data centers that house them are often in places in <em>need</em> of more water.</p>


<p>It seems wildly unjust to spend buckets of water on answering our stupid questions, when real humans in the real world would benefit from that water. (Especially when we’ve proven we can find the answers on our own anyway.)</p>

<p>I added this section post-publish because (thanks to some Mastodon comments) I realized I’d completely glossed over these issues, and others.</p>
<p>That’s not on purpose. These issues are every bit as important, if not more so. And if I’m being honest, it sure seems like the world is a more just place without LLMs than with them, for all the reasons above.</p>
<p>The accessibility-in-code angle is one I haven’t seen discussed as much, however, and so I wanted to especially call attention to that in particular.</p>
<h2 id="we-deserve-better">We deserve better</h2>
<p>We’ve casually accepted that LLMs are wrong a lot, mostly without asking <em>why</em>.</p>


<p>Why do we accept a product that not only misfires regularly, but sometimes catastrophically?</p>

<p>Let’s say you went out and bought the new, revolutionary vacuum of the future. It’s so amazing, it lets you clean your whole house in half the time! (Or so the vacuum’s marketing department claims, at least.)</p>
<p>Let’s say you got this vacuum home, and sure enough: it’s amazing. It cleans with speed and smarts you’ve never seen before.</p>
<p>But then, you start to realize: a lot of the time, the vacuum isn’t actually doing a very good job. You realize you spend a lot of time following it around and either redoing what it’s done, or sending it back for another pass.</p>
<p>In fact, sometimes, it even does the exact <em>opposite</em> of what it’s supposed to do, and instead of sucking up dirt and debris, it spews them out across the floor.</p>
<p>You would find that entirely unacceptable. You would take that vacuum back to the store.</p>
<p>And if the salesman who sold you the vacuum laughed in a congenial, but mildly condescending way and assured you that’s how the vacuum was <em>supposed</em> to work, and that’s all totally normal, and that’s just a quirk of these amazing new models; they just “hallucinate” from time to time…</p>
<p>…Well, I don’t think you’d have much faith in that product.</p>
<p>And while I can certainly understand why an LLM trained on all of the internet, with all its notoriously shoddy code, would have some incredibly bad data in its innards, shouldn’t we expect better than this?</p>
<p>The internet is already an overwhelmingly inequitable place.</p>
<p>I don’t think we should accept that what we get in exchange for our money is, inevitably, a force for further inequity, and yes, ultimately, for discrimination.</p>


		

		
</article></main>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Kremlin runs disinformation campaign to undermine Zelensky, documents show (138 pts)]]></title>
            <link>https://www.washingtonpost.com/world/2024/02/16/russian-disinformation-zelensky-zaluzhny/</link>
            <guid>39411576</guid>
            <pubDate>Sat, 17 Feb 2024 17:46:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.washingtonpost.com/world/2024/02/16/russian-disinformation-zelensky-zaluzhny/">https://www.washingtonpost.com/world/2024/02/16/russian-disinformation-zelensky-zaluzhny/</a>, See on <a href="https://news.ycombinator.com/item?id=39411576">Hacker News</a></p>
Couldn't get https://www.washingtonpost.com/world/2024/02/16/russian-disinformation-zelensky-zaluzhny/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[The epidemic of fraudulent DMCA takedowns (160 pts)]]></title>
            <link>https://taxpolicy.org.uk/2024/02/17/the-invisible-campaign-to-censor-the-internet/</link>
            <guid>39411570</guid>
            <pubDate>Sat, 17 Feb 2024 17:45:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://taxpolicy.org.uk/2024/02/17/the-invisible-campaign-to-censor-the-internet/">https://taxpolicy.org.uk/2024/02/17/the-invisible-campaign-to-censor-the-internet/</a>, See on <a href="https://news.ycombinator.com/item?id=39411570">Hacker News</a></p>
Couldn't get https://taxpolicy.org.uk/2024/02/17/the-invisible-campaign-to-censor-the-internet/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: I Ended Up with Just 0.15% of My Own Startup (143 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=39410364</link>
            <guid>39410364</guid>
            <pubDate>Sat, 17 Feb 2024 15:33:56 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=39410364">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><td><table>
        <tbody><tr id="39410364">
      <td><span></span></td>      <td><center><a id="up_39410364" href="https://news.ycombinator.com/vote?id=39410364&amp;how=up&amp;goto=item%3Fid%3D39410364"></a></center></td><td><span><a href="https://news.ycombinator.com/item?id=39410364">I Ended Up with Just 0.15% of My Own Startup</a></span></td></tr><tr><td colspan="2"></td><td><span>
          <span id="score_39410364">109 points</span> by <a href="https://news.ycombinator.com/user?id=johnrushx">johnrushx</a> <span title="2024-02-17T15:33:56"><a href="https://news.ycombinator.com/item?id=39410364">1 hour ago</a></span> <span id="unv_39410364"></span> | <a href="https://news.ycombinator.com/hide?id=39410364&amp;goto=item%3Fid%3D39410364">hide</a> | <a href="https://hn.algolia.com/?query=I%20Ended%20Up%20with%20Just%200.15%25%20of%20My%20Own%20Startup&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0">past</a> | <a href="https://news.ycombinator.com/fave?id=39410364&amp;auth=f35019a5c424318f2a453ee6089c308b29e335b5">favorite</a> | <a href="https://news.ycombinator.com/item?id=39410364">46&nbsp;comments</a>        </span>
              </td></tr>
    <tr></tr><tr><td colspan="2"></td><td><div><p>Beginning
It was the year 2013, I was working as a part-time CTO in several software startups in a startup incubator. On one of the “Friday beer” evenings I was approached by a huge old man, in just a few seconds he broke the ice, touched my shoulder, and behaved like we were old friends. It turned out he knew who I was. It all looked random to me, but it wasn’t. Years later he revealed: “I moved into this incubator because I wanted to hire you.”</p><p>CoFounder
He was about to start a hardware startup that wanted to build a vending machine that looked like it was made by Apple. Until this day, I’ve spent years building software, and his idea around hardware felt so compelling, that I had no doubt and joined him as a CTO and CoFounder. I got 15% of the company.</p><p>Rich Man
He was a rich man, with a huge house in the best luxury area of the city, with a big exit in the past. He kept saying: “I can’t do this without you..”. Which was very inspiring, and I probably did my best job ever over the the few years. I worked days and nights, my girlfriends left me because we didn’t see each other at all.</p><p>Living A Dream
Things were going really well, We met Jack Dorsey in SF and presented our machine, partnered up with his company that was doing the payment stands. Lots of the doors were open, We raised money from investors and got into the best b2b accelerator in the world.</p><p>Departure
While things were going really well, I realized that I could not work here, mainly because I realized I had no passion for hardware and I wanted to be my own boss, while being CTO meant that my boss was the CEO. I spent a year on hiring more people and finding a new guy to replace me as CTO. The replacement went very well, so eventually I left.</p><p>I Lost It
I moved on with my new startup but a few months later I got an email from the board. They were planning a new funding round as it looked like to me. So first I was happy about that, it meant my shares would be worth more. But it turned out they were planning an internal round, where all investors had to put money in. For all the investors it was relatively little money, but for me, it was more than I could afford. Since I owned 15% and couldn’t participate in the round, my 15% was diluted to 0.15%.</p><p>Why?
It turns out that in a VC-funded startup, it’s very easy to lose all almost your equity if the startup decides to have an internal round and issue new shares. It may have 100 shares, I own 15 and others own 85. Then it may issue 1000 shares, where each costs 10k. So I’d have to put 150k to stay with my 15%. (the numbers aren’t real, just for an example). So this was the end of the story for me.</p><p>The moral: owning Equity in a startup doesn’t protect you at all unless you’re rich.</p><p>[An Update/Clarification]</p><p>Comment from a Reddit user:</p><p>The trick was the pre-money valuation was decided by the “internal round” participants. They basically decided the company was near worthless valuation pre-money. This then meant you owned 15% of nearly nothing.</p><p>Reply from me:</p><p>YES! This is the only reply that's correct under this thread. This is exactly what happened under the hood. Very few founders know this may happen, and most think their equity is safe, just like I thought. But in this case, both the founders and early investors lost nearly all their shares. (99% of it). Someone might ask: how can they reduce the valuation to such a low number? well, in startups, the board is usually small, just CEO+Chairman, and they can vote for anything they want and it's easy to justify stuff. because they control the story</p></div></td></tr>        <tr></tr><tr><td colspan="2"></td><td><form action="comment" method="post"></form></td></tr>  </tbody></table>
  </td></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: macOS-cross-compiler – Compile binaries for macOS on Linux (177 pts)]]></title>
            <link>https://github.com/shepherdjerred/macos-cross-compiler</link>
            <guid>39409816</guid>
            <pubDate>Sat, 17 Feb 2024 14:41:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/shepherdjerred/macos-cross-compiler">https://github.com/shepherdjerred/macos-cross-compiler</a>, See on <a href="https://news.ycombinator.com/item?id=39409816">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><h2 tabindex="-1" dir="auto">macOS Cross Compiler</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/shepherdjerred/macos-cross-compiler/blob/main/assets/256.png"><img src="https://github.com/shepherdjerred/macos-cross-compiler/raw/main/assets/256.png" alt="A picture of Tux holding a red apple"></a></p>
<p dir="auto">This project allows you to cross-compile code on Linux that will be executed on macOS.</p>
<p dir="auto">It supports:</p>
<ul dir="auto">
<li>✅ C</li>
<li>✅ C++</li>
<li>✅ Fortran</li>
<li>✅ Rust</li>
</ul>
<div dir="auto"><p dir="auto">Note</p><p dir="auto">This project is focused on supporting newer versions of macOS and C, C++, Fortran, and Rust. Versions older than macOS 13 (Ventura) are not well tested, though they <em>should</em> work fine.</p>
</div>
<p dir="auto">The cross-compilers are available as a Docker image. This is easiest way to distribute the project since there are so many host dependencies. If you are interested in using this without Docker, you should take a look at <a href="https://github.com/tpoechtrager/osxcross">osxcross</a> which forms the base of this project.</p>
<p dir="auto">The Docker image is hosted available at <a href="https://github.com/shepherdjerred/macos-cross-compiler/pkgs/container/macos-cross-compiler">ghcr.io/shepherdjerred/macos-cross-compiler:latest</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Run the container
# Note: You'll probably want to bind-mount some files to compile.
# The `samples` directory has some Hello World programs.
$ docker run ghcr.io/shepherdjerred/macos-cross-compiler:latest /bin/bash"><pre><span><span>#</span> Run the container</span>
<span><span>#</span> Note: You'll probably want to bind-mount some files to compile.</span>
<span><span>#</span> The `samples` directory has some Hello World programs.</span>
$ docker run ghcr.io/shepherdjerred/macos-cross-compiler:latest /bin/bash</pre></div>
<h2 tabindex="-1" dir="auto">Quick Start</h2>
<p dir="auto">Install the requirements below, then follow the instructions in the usage section.</p>
<h3 tabindex="-1" dir="auto">Host Requirements</h3>
<ul dir="auto">
<li>Docker</li>
</ul>
<h3 tabindex="-1" dir="auto">Usage</h3>
<div dir="auto"><p dir="auto">Important</p><p dir="auto">The Docker image is quite large. It includes several compilers and the macOS SDK.</p>
</div>
<div dir="auto" data-snippet-clipboard-copy-content="# Start a Docker container using the Docker image.
# Replace `$PWD/samples` with the path to the source you want to compile.
$ docker run \
  -v $PWD/samples:/workspace \
  --rm \
  -it \
  ghcr.io/shepherdjerred/macos-cross-compiler:latest \
  /bin/bash

# Now that you're inside of the Docker container, you can run the compilers.

# Compile using gcc
## targeting darwin arm64
$ aarch64-apple-darwin22-gcc hello.c -o hello
$ aarch64-apple-darwin22-g++ hello.cpp -o hello
## targeting darwin x86_64
$ x86_64-apple-darwin22-gcc hello.c -o hello
$ x86_64-apple-darwin22-g++ hello.cpp -o hello

# Compile using clang
## for darwin arm64
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.c -o hello
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.cpp -o hello
## for darwin x86_64
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.c -o hello
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.cpp -o hello

# Compile using gfortran
## for darwin arm64
$ aarch64-apple-darwin22-gfortran hello.f90 -o hello
## for darwin x86_64
$ x86_64-apple-darwin22-gfortran hello.f90 -o hello

# Compile using Zig
## C targeting darwin arm64 (change aarch64 -> x86_64 to target amd64)
$ zig cc \
    -target aarch64-macos \
    --sysroot=/sdk \
    -I/sdk/usr/include \
    -L/sdk/usr/lib \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.c

## C++ targeting darwin arm64(change aarch64 -> x86_64 to target amd64)
$ zig c++ \
    -target aarch64-macos \
    --sysroot=/sdk -I/sdk/usr/include \
    -I/sdk/usr/include/c++/v1/ \
    -L/sdk/usr/lib \
    -lc++ \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.cpp

## Rust targeting darwin arm64 (change aarch64 -> x86_64 to target amd64)
$ export CC=zig-cc-aarch64-macos
$ cd rust &amp;&amp; cargo build --target aarch64-apple-darwin"><pre><span><span>#</span> Start a Docker container using the Docker image.</span>
<span><span>#</span> Replace `$PWD/samples` with the path to the source you want to compile.</span>
$ docker run \
  -v <span>$PWD</span>/samples:/workspace \
  --rm \
  -it \
  ghcr.io/shepherdjerred/macos-cross-compiler:latest \
  /bin/bash

<span><span>#</span> Now that you're inside of the Docker container, you can run the compilers.</span>

<span><span>#</span> Compile using gcc</span>
<span><span>#</span># targeting darwin arm64</span>
$ aarch64-apple-darwin22-gcc hello.c -o hello
$ aarch64-apple-darwin22-g++ hello.cpp -o hello
<span><span>#</span># targeting darwin x86_64</span>
$ x86_64-apple-darwin22-gcc hello.c -o hello
$ x86_64-apple-darwin22-g++ hello.cpp -o hello

<span><span>#</span> Compile using clang</span>
<span><span>#</span># for darwin arm64</span>
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.c -o hello
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.cpp -o hello
<span><span>#</span># for darwin x86_64</span>
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.c -o hello
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.cpp -o hello

<span><span>#</span> Compile using gfortran</span>
<span><span>#</span># for darwin arm64</span>
$ aarch64-apple-darwin22-gfortran hello.f90 -o hello
<span><span>#</span># for darwin x86_64</span>
$ x86_64-apple-darwin22-gfortran hello.f90 -o hello

<span><span>#</span> Compile using Zig</span>
<span><span>#</span># C targeting darwin arm64 (change aarch64 -&gt; x86_64 to target amd64)</span>
$ zig cc \
    -target aarch64-macos \
    --sysroot=/sdk \
    -I/sdk/usr/include \
    -L/sdk/usr/lib \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.c

<span><span>#</span># C++ targeting darwin arm64(change aarch64 -&gt; x86_64 to target amd64)</span>
$ zig c++ \
    -target aarch64-macos \
    --sysroot=/sdk -I/sdk/usr/include \
    -I/sdk/usr/include/c++/v1/ \
    -L/sdk/usr/lib \
    -lc++ \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.cpp

<span><span>#</span># Rust targeting darwin arm64 (change aarch64 -&gt; x86_64 to target amd64)</span>
$ <span>export</span> CC=zig-cc-aarch64-macos
$ <span>cd</span> rust <span>&amp;&amp;</span> cargo build --target aarch64-apple-darwin</pre></div>
<h3 tabindex="-1" dir="auto">Rust</h3>
<p dir="auto">Support for Rust requires a bit of project configuration.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# .cargo/config.toml
[build]
[target.aarch64-apple-darwin]
linker = &quot;zig-cc-aarch64-macos&quot;

[target.x86_64-apple-darwin]
linker = &quot;zig-cc-x86_64-macos&quot;"><pre><span><span>#</span> .cargo/config.toml</span>
[<span>build]</span>
[<span>target</span>.<span>aarch64-apple-darwin</span>]
<span>linker</span> = <span><span>"</span>zig-cc-aarch64-macos<span>"</span></span>

[<span>target</span>.<span>x86_64-apple-darwin</span>]
<span>linker</span> = <span><span>"</span>zig-cc-x86_64-macos<span>"</span></span></pre></div>
<p dir="auto">Once configured, you can run <code>cargo</code> after setting the <code>CC</code> variable:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export CC=&quot;zig-cc-x86_64-macos&quot;
cargo build --target x86_64-apple-darwin

export CC=&quot;zig-cc-aarch64-macos&quot;
cargo build --target aarch64-apple-darwin"><pre><span>export</span> CC=<span><span>"</span>zig-cc-x86_64-macos<span>"</span></span>
cargo build --target x86_64-apple-darwin

<span>export</span> CC=<span><span>"</span>zig-cc-aarch64-macos<span>"</span></span>
cargo build --target aarch64-apple-darwin</pre></div>
<h3 tabindex="-1" dir="auto">C, C++ and Fortran Compiler Executables</h3>
<p dir="auto">The table below shows the name of the executable for each architecture/compiler pair.</p>
<div dir="auto"><p dir="auto">Note</p><p dir="auto">By default the target kernel version is <code>darwin22</code>. You'll need to change <code>darwin22</code> if you choose to compile for another kernel version.</p>
</div>
<table>
<thead>
<tr>
<th></th>
<th>x86_64</th>
<th>aarch64</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>clang</strong></td>
<td>x86_64-apple-darwin22-clang</td>
<td>aarch64-apple-darwin22-clang</td>
</tr>
<tr>
<td><strong>clang++</strong></td>
<td>x86_64-apple-darwin22-clang++</td>
<td>aarch64-apple-darwin22-clang++</td>
</tr>
<tr>
<td><strong>gcc</strong></td>
<td>x86_64-apple-darwin22-gcc</td>
<td>aarch64-apple-darwin22-gcc</td>
</tr>
<tr>
<td><strong>g++</strong></td>
<td>x86_64-apple-darwin22-g++</td>
<td>aarch64-apple-darwin22-g++</td>
</tr>
<tr>
<td><strong>gfortran</strong></td>
<td>x86_64-apple-darwin22-gfortran</td>
<td>aarch64-apple-darwin22-gfortran</td>
</tr>
</tbody>
</table>
<p dir="auto">The relevant compilers are located at <code>/osxcross/bin</code> and <code>/gcc/bin</code>. Both these directories are already on the <code>PATH</code> in the Docker container.</p>
<h3 tabindex="-1" dir="auto">cctools</h3>
<p dir="auto">This project compiles <a href="https://github.com/tpoechtrager/cctools-port">cctools</a>, which is Apple's version of <a href="https://www.gnu.org/software/binutils/" rel="nofollow">binutils</a>. These programs are low-level utilities that are used by compilers, such as the archiver <code>ar</code>, the loader <code>ld</code>, and the assembler <code>as</code>.</p>
<p dir="auto">You probably don't need to run these programs directly, but if you do they are located at <code>/cctools/bin</code>, and they are also on the <code>PATH</code>.</p>
<p dir="auto">Complete tool list:</p>
<ul dir="auto">
<li>ObjectDump</li>
<li>ar</li>
<li>as</li>
<li>bitcode_strip</li>
<li>check_dylib</li>
<li>checksyms</li>
<li>cmpdylib</li>
<li>codesign_allocate</li>
<li>ctf_insert</li>
<li>dyldinfo</li>
<li>install_name_tool</li>
<li>ld</li>
<li>libtool</li>
<li>lipo</li>
<li>machocheck</li>
<li>makerelocs</li>
<li>mtoc</li>
<li>mtor</li>
<li>nm</li>
<li>nmedit</li>
<li>otool</li>
<li>pagestuff</li>
<li>ranlib</li>
<li>redo_prebinding</li>
<li>seg_addr_table</li>
<li>seg_hack</li>
<li>segedit</li>
<li>size</li>
<li>strings</li>
<li>strip</li>
<li>unwinddump</li>
<li>vtool</li>
</ul>
<h2 tabindex="-1" dir="auto">Code Signing, Notarizing, and Universal Binaries</h2>
<p dir="auto"><a href="https://developer.apple.com/documentation/security/code_signing_services" rel="nofollow">Code signing</a> (but <em>not</em> <a href="https://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution/" rel="nofollow">notarizing</a>) should be possible with this project, but it is untested. Building <a href="https://developer.apple.com/documentation/apple-silicon/building-a-universal-macos-binary" rel="nofollow">universal binaries</a> should also be possible, but again, this is not tested.</p>
<h2 tabindex="-1" dir="auto">Target Compatibility</h2>
<p dir="auto">This project can build for macOS on both x86_64 and aarch64 archtictures, regardless of the host architecture.</p>
<table>
<thead>
<tr>
<th></th>
<th>Linux x86_64</th>
<th>Linux arm64</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>macOS x86_64</strong></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><strong>macOS aarch64</strong></td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<div dir="auto"><p dir="auto">Note</p><p dir="auto">aarch64 is Apple's internal name for arm64. They're used interchangably, but aarch64 is more correct when referring to macOS on arm64.</p>
</div>
<p dir="auto">This project supports the following languages:</p>
<ul dir="auto">
<li>C (up to C 17)</li>
<li>C++ (up to C++ 20)</li>
<li>Fortran (up to Fortran 2018)</li>
<li>Rust (any version)</li>
</ul>
<p dir="auto">This project supports the following versions of macOS:</p>
<ul dir="auto">
<li>✅ macOS 11 Big Sur</li>
<li>✅ macOS 12 Monterey</li>
<li>✅ macOS 13 Ventura</li>
</ul>
<p dir="auto">Support for macOS 14 Sonoma has not been extensively tested. macOS 14-specific features can be added by updating the SDK version. The Docker image uses the 13.0 SDK by default.</p>
<div dir="auto"><p dir="auto">Important</p><p dir="auto">This project is tested on modern verisons of macOS, Clang, and GCC. It has not been tested with older versions of these softwares. If you need compatabiltiy with older versions, check out the <a href="https://github.com/tpoechtrager/osxcross">osxcross project</a>.</p>
</div>
<h2 tabindex="-1" dir="auto">Technical Details</h2>
<p dir="auto">This repository is essentially a wrapper around the following projects:</p>
<ul dir="auto">
<li><a href="https://github.com/tpoechtrager/apple-libtapi">https://github.com/tpoechtrager/apple-libtapi</a></li>
<li><a href="https://github.com/tpoechtrager/cctools-port">https://github.com/tpoechtrager/cctools-port</a></li>
<li><a href="https://github.com/tpoechtrager/xar">https://github.com/tpoechtrager/xar</a></li>
<li><a href="https://github.com/iains/gcc-darwin-arm64">https://github.com/iains/gcc-darwin-arm64</a></li>
</ul>
<p dir="auto">These resources were helpful when working on this project:</p>
<ul dir="auto">
<li><a href="https://www.lurklurk.org/linkers/linkers.html" rel="nofollow">https://www.lurklurk.org/linkers/linkers.html</a></li>
<li><a href="http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html" rel="nofollow">http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html</a></li>
<li><a href="https://gist.github.com/loderunner/b6846dd82967ac048439">https://gist.github.com/loderunner/b6846dd82967ac048439</a></li>
<li><a href="http://clarkkromenaker.com/post/library-dynamic-loading-mac/" rel="nofollow">http://clarkkromenaker.com/post/library-dynamic-loading-mac/</a></li>
<li><a href="https://github.com/qyang-nj/llios">https://github.com/qyang-nj/llios</a></li>
</ul>
<p dir="auto">The Zig and Rust portion were informed by these resources:</p>
<ul dir="auto">
<li><a href="https://andrewkelley.me/post/zig-cc-powerful-drop-in-replacement-gcc-clang.html" rel="nofollow">https://andrewkelley.me/post/zig-cc-powerful-drop-in-replacement-gcc-clang.html</a></li>
<li><a href="https://actually.fyi/posts/zig-makes-rust-cross-compilation-just-work/" rel="nofollow">https://actually.fyi/posts/zig-makes-rust-cross-compilation-just-work/</a></li>
</ul>
<h2 tabindex="-1" dir="auto">Development</h2>
<p dir="auto">The Docker images for this repository are built with <a href="https://earthly.dev/" rel="nofollow">Earthly</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Create a Docker image tagged as `shepherdjerred/macos-cross-compiler`
# The first run will take ~20 minutes on an M1 MacBook.
# Subsequent runs are faster.
earthly +image

# Verify that the compilers work correctly
earthly +test

# If you're on macOS, try actually running the binaries
earthly +validate"><pre><span><span>#</span> Create a Docker image tagged as `shepherdjerred/macos-cross-compiler`</span>
<span><span>#</span> The first run will take ~20 minutes on an M1 MacBook.</span>
<span><span>#</span> Subsequent runs are faster.</span>
earthly +image

<span><span>#</span> Verify that the compilers work correctly</span>
earthly +test

<span><span>#</span> If you're on macOS, try actually running the binaries</span>
earthly +validate</pre></div>
<h2 tabindex="-1" dir="auto">Inspiration</h2>
<p dir="auto">This project would not have been possible without the <a href="https://github.com/tpoechtrager/osxcross">osxcross</a> project.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Ute Tribe will construct one of the largest solar farms in the US for $1B+ (333 pts)]]></title>
            <link>https://www.ksut.org/news/2024-02-15/ute-mountain-ute-tribe-will-construct-one-of-the-largest-solar-farms-in-the-u-s</link>
            <guid>39409653</guid>
            <pubDate>Sat, 17 Feb 2024 14:24:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.ksut.org/news/2024-02-15/ute-mountain-ute-tribe-will-construct-one-of-the-largest-solar-farms-in-the-u-s">https://www.ksut.org/news/2024-02-15/ute-mountain-ute-tribe-will-construct-one-of-the-largest-solar-farms-in-the-u-s</a>, See on <a href="https://news.ycombinator.com/item?id=39409653">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>
        Published&nbsp;February 15, 2024 at 2:44 PM MST
    </p>
    <meta content="2024-02-15T21:44:44.136Z">


                                        </div><div>
                                        <p>A proposed solar farm on the Ute Mountain Ute Reservation will have 2.2 million solar panels and will be eight miles long and one mile wide.</p><p>Tribal officials worked with the international renewable energy company Canigou Group to plan the Sun Bear Solar Farm near Towaoc, Colorado. Officials say the project will create more than 500 local jobs for electricians and laborers.</p><p>Officials are planning to break ground on the construction of the Sun Bear Solar Farm later in 2024, with the goal of producing electricity in 2026. Annual capacity is estimated to be about 756 megawatts.</p><div data-align-center="">
<figure>
    
        
            <picture>
    
    
        
            
    
            <source media="(max-width: 768px)" type="image/webp" width="420" height="280" srcset="https://npr.brightspotcdn.com/dims4/default/941fc1d/2147483647/strip/true/crop/10800x7200+0+0/resize/840x560!/format/webp/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg 2x" data-size="fallbackImageSizeMobile">
    

    
        <source media="(max-width: 768px)" width="420" height="280" srcset="https://npr.brightspotcdn.com/dims4/default/0d51d2b/2147483647/strip/true/crop/10800x7200+0+0/resize/420x280!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg" data-size="fallbackImageSizeMobile">
    

        
    

    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
    
            <source type="image/webp" width="880" height="587" srcset="https://npr.brightspotcdn.com/dims4/default/1e2dab3/2147483647/strip/true/crop/10800x7200+0+0/resize/1760x1174!/format/webp/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg 2x" data-size="fallbackImageSize">
    

    
        <source width="880" height="587" srcset="https://npr.brightspotcdn.com/dims4/default/3d65daa/2147483647/strip/true/crop/10800x7200+0+0/resize/880x587!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg" data-size="fallbackImageSize">
    

        
    

    
    <img alt="Canigou Group and Adkins Consulting conducted biological and archeological surveys of the grounds where Sun Bear is set to be constructed." srcset="https://npr.brightspotcdn.com/dims4/default/1086b30/2147483647/strip/true/crop/10800x7200+0+0/resize/1760x1174!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg 2x" width="880" height="587" loading="lazy" src="https://npr.brightspotcdn.com/dims4/default/3d65daa/2147483647/strip/true/crop/10800x7200+0+0/resize/880x587!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2F1a%2F8161aa8f48b8b173ecc7ab119324%2Fbiological-resources-poster.jpg">


</picture>
        
    
    
    
    
    <div>
    

    <div><p>Canigou Group</p>
            
        </div><figcaption> Canigou Group and Adkins Consulting conducted biological and archeological surveys of the grounds where Sun Bear is set to be constructed.</figcaption>
    </div>
    
</figure>
</div>
<p>Canigou Group’s director, Justin Passfield, said the project will cost more than $1 billion. Passfield said electricity generated from the solar farm will connect to the Western Area Power Administration power line. Still, it’s unclear what regional entities Canigou will sell the electricity to.</p><p>“We're thinking about the power needs within Colorado,” said Passfield. “But also, it makes sense not to transmit power too far from where you are. Having said that, we're going to be producing a large amount of power. So I'm not sure that all of it will be able to be consumed within Colorado.”</p><div data-align-center="">
<figure>
    
        
            <picture>
    
    
        
            
    
            <source media="(max-width: 768px)" type="image/webp" width="420" height="262" srcset="https://npr.brightspotcdn.com/dims4/default/7c30d9a/2147483647/strip/true/crop/3978x2480+0+0/resize/840x524!/format/webp/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg 2x" data-size="fallbackImageSizeMobile">
    

    
        <source media="(max-width: 768px)" width="420" height="262" srcset="https://npr.brightspotcdn.com/dims4/default/a73ad64/2147483647/strip/true/crop/3978x2480+0+0/resize/420x262!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg" data-size="fallbackImageSizeMobile">
    

        
    

    
    
        
            
        
    

    
    
        
            
        
    

    
    
        
            
    
            <source type="image/webp" width="880" height="549" srcset="https://npr.brightspotcdn.com/dims4/default/e0aff67/2147483647/strip/true/crop/3978x2480+0+0/resize/1760x1098!/format/webp/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg 2x" data-size="fallbackImageSize">
    

    
        <source width="880" height="549" srcset="https://npr.brightspotcdn.com/dims4/default/55d60b0/2147483647/strip/true/crop/3978x2480+0+0/resize/880x549!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg" data-size="fallbackImageSize">
    

        
    

    
    <img alt="Canigou Group gave a public presentation about the Sun Bear solar project at the Ute Mountain Ute Casino in Towaoc, CO." srcset="https://npr.brightspotcdn.com/dims4/default/749b7b5/2147483647/strip/true/crop/3978x2480+0+0/resize/1760x1098!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg 2x" width="880" height="549" loading="lazy" src="https://npr.brightspotcdn.com/dims4/default/55d60b0/2147483647/strip/true/crop/3978x2480+0+0/resize/880x549!/quality/90/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F0d%2F14%2Fbaa8fcfa4610a29c99d26c45b508%2Fadomaitissunbear2.jpg">


</picture>
        
    
    
    
    
    <div>
    

    <div><p>Clark Adomaitis</p>
            
                <p>/</p>
            
        
            <p> KSUT/KSJD</p></div><figcaption>Canigou Group gave a public presentation about the Sun Bear solar project at the Ute Mountain Ute Casino in Towaoc, CO.</figcaption>
    </div>
    
</figure>
</div>
<p>Ute Mountain Ute Chairman Manuel Heart is excited about job opportunities for Ute Mountain Ute tribal members and the opportunity for the tribe to become a significant player in renewable energy.</p><p><b>“</b>We, as the Ute Mountain Ute tribe, had been a fossil fuel tribe with oil and gas for a long time, probably over 50 years. Today, with the changes in legislation, global warming, and climate change, you can see the impact of what's happening to our world. So renewable is the new future right now,” said Heart.</p>
<p><i>This story is part of Voices From the Edge of the Colorado Plateau. Voices is a reporting collaboration between KSUT Public Radio and KSJD Community Radio. It seeks to cover underrepresented communities in the Four Corners. The multi-year project will cover Native, Indigenous, Latino/Latina, and other communities across southwest Colorado.</i></p><p><i>Explore more Voices stories on the&nbsp;</i><a href="https://www.ksut.org/voices-from-the-edge-of-the-colorado-plateau" target="_blank" data-cms-ai="0">KSUT website</a><i>.</i></p>
                                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ollama is now available on Windows in preview (266 pts)]]></title>
            <link>https://ollama.com/blog/windows-preview</link>
            <guid>39409650</guid>
            <pubDate>Sat, 17 Feb 2024 14:23:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ollama.com/blog/windows-preview">https://ollama.com/blog/windows-preview</a>, See on <a href="https://news.ycombinator.com/item?id=39409650">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
        <p><a href="https://ollama.com/download/windows"><img src="https://ollama.com/public/blog/windows-wave.png" alt="Ollama windows"></a></p>

<p>Ollama is <a href="https://ollama.com/download/windows">now available</a> on Windows in preview, making it possible to pull, run and create large language models in a new native Windows experience. Ollama on Windows includes built-in GPU acceleration, access to the full <a href="https://ollama.com/library">model library</a>, and the Ollama API including <a href="https://ollama.com/blog/openai-compatibility">OpenAI compatibility</a>.</p>

<h2>Hardware acceleration</h2>

<p>Ollama accelerates running models using NVIDIA GPUs as well as modern CPU instruction sets such as AVX and AVX2 if available. No configuration or virtualization required!</p>

<video autoplay="" controls="">
  <source src="https://github.com/ollama/ollama/assets/251292/5d46993f-bd01-4431-b4f6-6346fa27f459" type="video/mp4">
</video>

<h2>Full access to the model library</h2>

<p>The full Ollama <a href="https://ollama.com/library">model library</a> is available to run on Windows, including <a href="https://ollama.com/blog/vision-models">vision models</a>. When running vision models such as <a href="https://ollama.com/library/llava">LLaVA 1.6</a>, images can be dragged and dropped into <code>ollama run</code> to add them to a message.</p>

<video controls="">
  <source src="https://github.com/ollama/ollama/assets/251292/99b8dbdb-084c-48d2-b779-d070b4ad1784" type="video/mp4">
</video>

<h2>Always-on Ollama API</h2>

<p>Ollama’s API automatically runs in the background, serving on <code>http://localhost:11434</code>. Tools and applications can connect to it without any additional setup.</p>

<p><img src="https://ollama.com/public/blog/windows-preview-tray-icon.jpg" alt="ollama background"></p>

<p>For example, here’s how to invoke Ollama’s API using PowerShell:</p>

<pre><code>(Invoke-WebRequest -method POST -Body '{"model":"llama2", "prompt":"Why is the sky blue?", "stream": false}' -uri http://localhost:11434/api/generate ).Content | ConvertFrom-json
</code></pre>

<p>Ollama on Windows also supports the same <a href="https://ollama.com/blog/openai-compatibility">OpenAI compatibility</a> as on other platforms, making it possible to use existing tooling built for OpenAI with local models via Ollama.</p>

<h2>Get started</h2>

<p>To get started with the Ollama on Windows Preview:</p>

<ul>
<li><a href="https://ollama.com/download/OllamaSetup.exe">Download</a> Ollama on Windows</li>
<li>Double-click the installer, <code>OllamaSetup.exe</code></li>
<li>After installing, open your favorite terminal and run <code>ollama run llama2</code> to run a model</li>
</ul>

<p>Ollama will prompt for updates as new releases become available. We’d love your feedback! If you encounter any issues please let us know by <a href="https://github.com/ollama/ollama/issues/new">opening an issue</a> or by joining the <a href="https://discord.gg/ollama">Discord server</a>.</p>

      </section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[So Long, and Thanks for All the Bytes (306 pts)]]></title>
            <link>https://chethaase.medium.com/so-long-and-thanks-for-all-the-bytes-02a4ef972f65</link>
            <guid>39409535</guid>
            <pubDate>Sat, 17 Feb 2024 14:09:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://chethaase.medium.com/so-long-and-thanks-for-all-the-bytes-02a4ef972f65">https://chethaase.medium.com/so-long-and-thanks-for-all-the-bytes-02a4ef972f65</a>, See on <a href="https://news.ycombinator.com/item?id=39409535">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><figure><figcaption>My office nameplate, freshly annotated for correctness</figcaption></figure><div><h2 id="6e35">Goodbye Tech, Hello Future</h2><div><a rel="noopener follow" href="https://chethaase.medium.com/?source=post_page-----02a4ef972f65--------------------------------"><div aria-hidden="false"><p><img alt="Chet Haase" src="https://miro.medium.com/v2/resize:fill:88:88/1*5pR0GFT8Cosn_zGIdRfc0Q.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"></p></div></a></div></div><p id="2e06"><span>It</span> is with very mixed feelings that I am leaving Google (as in, <em>leaving right now</em> — today is my last day). Or perhaps I should say instead “leaving Android” since I have always felt very much part of the Android team and very much ignorant of the rest of the company.</p><p id="2ea0">Unlike many of my excellent and unfortunate colleagues in the last couple of rough years of tech layoffs, my departure is self-inflicted: I quit. It is time for me to do something else — something very <em>very </em>else. It’s not so much that I’m leaving Google (Android), but that I’m leaving tech for, as Monty Python would say, something completely different.</p><p id="9879">I have been at Google for (checks calendar) nearly 14 years, since joining the Android team in May of 2010. I wrote code, delivered presentations, videos and articles, and I managed people, all of which were thoroughly enjoyable teams, roles, and projects.</p><p id="fb2c">But this wasn’t my first job. Or my second. Or my… (you get the idea). I’ve been doing this kind of work at many, various companies since leaving graduate school in 1992. So after (checks calendar again, realizes it’s more of a calculator problem, gives up, does the math) <em>more than 31 years</em>, it’s time for something new. Or, rather, something old: school.</p><p id="3982">In the last few years I’ve been gradually rewinding my career. After leading/managing the Toolkit team for a few years, I moved to Developer Relations, where I managed a smaller team. I missed coding, so I rewound and came back, as an engineer on the graphics team. I then returned to the Toolkit team as an engineer, rewinding my career more. Now it’s time to rewind it all the way to where it began: I’m going back to grad school.</p><p id="8b8b">Last Fall, I started an MFA in comedy screenwriting in Chicago. It’s a full-time 2-year program at DePaul, with comedy classes at Second City. Full time work plus school has been working out great, except for the part where I also need sleep.</p><p id="59af">Leaving my job and career is by far the worst financial decision I ever hope to make. It turns out that tech has better pay, benefits, prospects, perks, and stability (yes, even in this rotten tech cycle we’re in). But comedy writing is something I <em>want</em> to do. I feel very strongly that everyone should try, to the extent that it makes some kind of sense if you squint hard enough, to do what they want in work and life. I’ve been writing and doing comedy— sometimes at the same time — for many years on the side. So I’m promoting my hobby to be my day job.</p><p id="7b06">And maybe (probably) I will miss the code and will figure out ways to do that again someday. Maybe coding will become my hobby. You can take the engineer out of the bytes, but you can’t take bites out of the engineer. Or something like that. But for now, it’s nice to just soak in the comedy, and the writing, and the student life. (My lunch often consists of PB&amp;J and a pack of instant ramen. Sometimes both, when I feel really wild and spendy). As for what the future holds, I’ll figure that out when I get there. That’s the great thing about the future; it’s always there waiting for you. In the meantime, I have writing homework to do.</p><blockquote><p id="1c3a">You can take the engineer out of the bytes, but you can’t take bites out of the engineer.</p></blockquote><p id="b592">To everyone in the Android community: thanks for being a part of my journey. I’ve had a [very] long career in software development and I’ve enjoyed all^H^H^H most of it immensely. But my time on, with, and for Android far surpassed everything else for the sheer excitement of being a part of the wild ride as Android became what it is today. When I joined Google, Android was in a solid 4th or 5th place behind, well, everyone else. By the end of that first year, the situation had changed drastically, and everything has only gotten bigger and better in the many years since.</p><p id="1fcb">Along the way, I got to create fundamental technology and APIs that the platform needed (hello, <a href="https://developer.android.com/reference/android/animation/package-summary" rel="noopener ugc nofollow" target="_blank">Animator</a>!), work on critical and interesting projects on the platform and AndroidX (hello, graphics, UI, and performance!), and work with a great team of clever, interesting, and passionate people for many years.</p><figure><figcaption>My hobby project included speaking into foam balls dangling awkwardly near my mouth in front of sometimes many, many people.</figcaption></figure><p id="5192">Through my side project of writing and speaking about Android development,* I got to meet and be a part of a vibrant developer community for many years, including hosting a fun <a href="http://adbackstage.libsyn.com/" rel="noopener ugc nofollow" target="_blank">podcast</a> since 2014. I hope to continue with the podcast from outside of Android. I always enjoyed my “color commentary” role, so maybe ignorance of what’s happening internally won’t be a drastic change.</p><figure><figcaption>All of my badges and lanyards from the many events I spoke at. I have no idea why I kept them. Maybe just for posting a picture of them when I was done. Achievement unlocked. Badge earned.</figcaption></figure><p id="47fe">Along the way, because nobody else was doing it, I got to learn about and tell <a href="https://www.chethaase.com/androids" rel="noopener ugc nofollow" target="_blank">the story of how Android came into existence</a> in the very early years. I had <a href="https://chetchat.blogspot.com/" rel="noopener ugc nofollow" target="_blank">written</a> <a href="https://graphics-geek.blogspot.com/" rel="noopener ugc nofollow" target="_blank">many</a> <a href="http://medium.com/@chethaase" rel="noopener">things</a> before that book, and had even written <a href="https://www.chethaase.com/books" rel="noopener ugc nofollow" target="_blank">several books</a> before that book. But that 4+ year project of interviewing and compiling first-hand tales of how it all came together is the highlight of my writing life (so far!).</p><figure><figcaption>There’s nothing like a &gt;4 year book project to learn how short life is.</figcaption></figure><p id="f10e">For those brave souls who read this far looking for inside dirt on why I’m <em>really</em> leaving… I’m sorry to leave you so very unsatisfied. The company, the job, the people, and the work were great. But just in case there are any news site bots searching for possible clickbait stories, here’s a headline just for you:</p><blockquote><p id="a259">“Googler Quits to Do Something Very Different!”</p></blockquote><p id="b571">Good luck to all of the Android developers and users reading this. And, heck, to everyone else as well. I’m a writer now — I’m happy for any readers I can get! I hope to see you someday on the big screen. Or the little one. Or through the pages of books. Or in person would be fine, too.</p><p id="4b4a">Chet.</p><p id="8803"><em>* p.s. I will miss many things about my job on Android, but one of the unique opportunities I enjoyed was giving tech and comedy talks at developer events. There is nothing like being on stage in front of a large audience and pretending to know what you’re talking about. I’m game for more of that if I can figure out logistics that make sense in my new student/writing life. </em><a href="https://www.chethaase.com/contact" rel="noopener ugc nofollow" target="_blank"><em>Let me know</em></a><em> if you think you have an opportunity (conference talks, podcasts — anything with a mic) that might work.</em></p><figure><figcaption>My original badge photo taken on my first day in 2010. The security guard assumed I wanted a retake.</figcaption></figure><figure><figcaption>Do not ask for whom he smirks. He smirks for me.</figcaption></figure></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The game theory of seduction and marriage with Jane Austen (136 pts)]]></title>
            <link>https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and</link>
            <guid>39409445</guid>
            <pubDate>Sat, 17 Feb 2024 13:58:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and">https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and</a>, See on <a href="https://news.ycombinator.com/item?id=39409445">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><em>A key theme of this Substack is that seemingly irrational behaviour makes a lot of sense when we appreciate the right degree of complexity that people face when making decisions. In this post, I look at a domain where rationality is often deemed to be absent: love and seduction. I discuss this theme through the contribution of one of the most insightful writers on this topic: Jane Austen. </em></p><p>Finding a romantic partner is one of the things that can motivate us to spend tremendous time, effort, and thought. We can feel that the stakes are very high. What is said, what is suggested, and what is possibly thought by the other person acquires high importance. Talented writers capture the tension of these moments, the careful way people navigate these situations potentially fraught with missteps, missed opportunities or overly candid overtures. The persistent fame of Jane Austen, who wrote about such situations in the early 19th century, is a reflection of her talent to understand the rich layers of these situations.</p><p><span>This post is more than slightly inspired by the book by UCLA political scientist Michael Chwe, </span><em>Jane Austen Game Theorist </em><span>(2013). Chwe methodically unpacks Jane Austen’s six novels showing how her insights about human psychology in romantic situations can be related to many concepts from game theory.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-1-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-1-137505917" target="_self" rel="">1</a></span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png" width="788" height="570" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/f6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:570,&quot;width&quot;:788,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:999382,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff6e55e5e-8e13-453a-b918-c25fd26d9954_788x570.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p><span>The economic considerations of Austen’s heroines are easily overlooked nowadays. The economist Thomas Piketty provided some background to the magnitude of the stakes they faced. The most striking change in fate is in </span><em>Pride and Prejudice</em><span>, Austen's most famous novel: without marriage, Elizabeth would face social demotion. Being unable to inherit her father’s estate with her sisters, she would inherit from her mother 1,000 pounds, which would provide her with an income of around 40 pounds per year, just around the average income of the day.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-2-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-2-137505917" target="_self" rel="">2</a></span><span> In contrast, Mr. Darcy, who proposes to her, has an income of 10,000 pounds per year, representing 300 times the average income of the day! For comparison, the average annual income is around $30,000 in the US. The modern equivalent of Darcy would be earning 9 million dollars a year.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg" width="592" height="270.7912087912088" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:666,&quot;width&quot;:1456,&quot;resizeWidth&quot;:592,&quot;bytes&quot;:1067516,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F043af9e3-2944-4f55-9197-8565364f1c50_1557x712.jpeg 1456w" sizes="100vw"></picture></div></a><figcaption><span>Extract from Thomas Piketty’s </span><em>Capital and Ideology </em><span>(2020)</span><em>, </em><span>discussing the meaning of the income differences in Austen’s novels.</span></figcaption></figure></div><p>Austen’s clear-minded heroines are mindful of these stakes. When Elizabeth’s sister asks her, “Will you tell me how long you have loved him?” Elizabeth playfully answers: “It has been coming on so gradually, that I hardly know when it began. But I believe I must date it from my first seeing of his beautiful grounds at Pemberley.”</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg" width="492" height="339.84" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/b351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:708,&quot;width&quot;:1025,&quot;resizeWidth&quot;:492,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Jane Austen Film Adaptation Locations: Pemberley from Pride and Prejudice  (1995) – Austenprose&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="Jane Austen Film Adaptation Locations: Pemberley from Pride and Prejudice  (1995) – Austenprose" title="Jane Austen Film Adaptation Locations: Pemberley from Pride and Prejudice  (1995) – Austenprose" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb351b6e1-a995-4bce-8bd1-c708b771e5c7_1025x708.jpeg 1456w" sizes="100vw"></picture></div></a><figcaption><span>Pemberley, Darcy’s estate in the 1995 BBC adaptation of </span><em>Pride and Prejudice</em></figcaption></figure></div><p>In addition to their pursuers’ wealth, Austen’s heroines also need to be very mindful of their characters. It is a truth (almost) universally acknowledged that single men tend to be more eager to secure a new partner than single women do. In short, women face a larger number of possible pursuers and should choose carefully among them if they are looking for a long-term partner. </p><p><span>In 1972, the biologist Robert Trivers explained this pattern with his critical contribution to our understanding of behaviours between men and women: </span><em>parental investment theory. </em><span>In short, making offspring is a long process requiring parental investment. However, the investments are not identical. Women, who carry a child for nine months, have to make a large physiological investment to start with. As a consequence, they are at risk of being taken advantage of by opportunistic men interested in a short-term relationship, but uncommitted to the long-term prospect of investing in building a family and raising children later on.</span></p><p>It is therefore perfectly rational for women to be extremely careful in their choice of partner and not to be too quick to accept the advances of a given pursuer. This issue is at the heart of Austen’s novels where heroines often have to avoid the deceiving appeal of men who seem charming but who are actually not of good character and not committed to a long-term relationship.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png" width="603" height="586" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:586,&quot;width&quot;:603,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:604367,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7b903cb3-e8ba-4599-80a1-9b932de59c7f_603x586.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>The treacherous decisions many of Austen's heroines face, at some point enticed by a seductive man who hides a terrible character. Elizabeth in </span><em>Pride and Prejudice</em><span>, Marianne in </span><em>Sense and Sensibility</em><span>, and Emma in </span><em>Emma</em><span>.</span></figcaption></figure></div><p>In that context, one has to appreciate the consequential decisions women have to make in Jane Austen’s novels. Unlike in the modern dating process, they cannot get to know a potential partner intimately before deciding whether or not to commit to a relationship. They have to appraise the traits of potential pursuers carefully from the limited interactions and exchanges they have with them. Jane Austen’s stories recount women who use their wit and determination to navigate these high-stakes situations, avoid the dangerous matches and manage to attract the right ones.</p><p>In many ways, Austen’s world is vastly different from ours. It would be easy to dismiss these novels as irrelevant to understanding seduction and romantic situations in our times. However, despite these differences, these novels still resonate with us today because they exposed, in a magnified way, an underlying logic of interaction between men and women that still exists. </p><p><span>Even if times have changed, Trivers’ insights remain valid. The data now available from online dating platforms is unequivocal. Tinder </span><a href="https://mazeoflove.com/tinder/" rel="">data</a><span> shows that men like 10 times more profiles than women do and that 1 in 50 of their likes leads to a match versus 2 out of 5 for women.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-3-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-3-137505917" target="_self" rel="">3</a></span><span> Faced with many men happy to date them, women have to identify the ones who may be willing to invest in a long-term relationship. The costs of making wrong decisions are not negligible. Women looking for a long-term partner can lose precious years of their lives with men who are not truly interested in committing to a long-term relationship. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg" width="526" height="526" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:900,&quot;width&quot;:900,&quot;resizeWidth&quot;:526,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Image&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="Image" title="Image" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F405bdaa0-9dda-4e9a-99df-2e28501b97d2_900x900.jpeg 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>In the game of dating, this logic leads to an </span><a href="https://lionelpage.substack.com/p/time-for-some-game-theory" rel="">equilibrium</a><span> where men must signal their genuine interest in a long-term relationship by investing time and resources in the dating process (Sozou and Seymour, 2005). This </span><em>courtship</em><span> behaviour makes it harder for men to pursue several women simultaneously. A man who chooses to court you, therefore reveals that you were high in his preferences.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-4-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-4-137505917" target="_self" rel="">4</a></span></p><p>While a long phase of courtship before marriage has mostly disappeared in Western countries, asymmetric norms in the dating process nonetheless persist. In a survey conducted in 2015 in North America, 69% of the respondents stated that the man should pay for the first date, 87% stated that he should bring flowers then, and 66% stated that he should also pay for the second date (Cameron and Curry 2020). If these rules persist despite much greater equality between men and women, it is because they are the solution to the asymmetry in eagerness for short-term relationships between men and women. </p><p><span>In her writing, Austen offers clear insight into the stressful process of interacting with a potential partner to progressively reach a common understanding and eventually form a match. To be successful, one needs to be particularly adept at understanding others’ intentions and beliefs, a quality that Austen describes as </span><em>penetration</em><span>, which she states women are particularly gifted at.</span></p><p><span>One way to conceptualise penetration using game theory is as the ability to form accurate </span><em>higher-order beliefs</em><span>, beliefs about others’ beliefs. While a first-order belief might be “Ann thinks that Bob is charming,” a second-order belief could be “Bob believes Ann thinks he is charming.” A third-order belief might be “Ann thinks Bob believes that she thinks he is charming,” and so on.</span></p><p><span>Forming higher-order beliefs is challenging. Psychologists refer to the ability to put oneself in another's shoes as </span><em>theory of mind</em><span>. Getting an idea about the beliefs of another person—a second-order belief—requires us to simulate in our minds what beliefs would reasonably be formed from another person's perspective. Understanding other people’s beliefs about our beliefs—a third-order belief—requires simulating the perspective of somebody simulating our perspective. Climbing higher-order beliefs necessitates engaging recursively in this perspective-taking.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-5-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-5-137505917" target="_self" rel="">5</a></span><span> </span></p><p><span>The literature in behavioural economics indicates that most often, people do not go much beyond third-order beliefs, as it becomes increasingly difficult to think clearly about higher levels. However, the situations in which we are considering finding a partner are among the most significant we face in our lives, and we can invest a considerable amount of cognitive effort and time to make sense of higher-order beliefs. In his book, Chwe presents an exemplary case where two characters—Catherine Morland and Henry Tilney in </span><em>Northanger Abbey</em><span>—are in a situation in which their understanding involves many more higher-order beliefs. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png" width="614" height="386.7019230769231" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:917,&quot;width&quot;:1456,&quot;resizeWidth&quot;:614,&quot;bytes&quot;:1564446,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2d2ce6af-1b78-4cf5-bb77-2252759cb1c9_1598x1006.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Chwe’s description of the interaction between Catherine and Henry </figcaption></figure></div><p>The situation is subtle but we fairly easily understand it. The figure below decomposes the layers of higher-order beliefs, it shows that there are up to 8 of them!</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png" width="952" height="529" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:529,&quot;width&quot;:952,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:98517,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd686bbb6-3fbb-4af0-8e50-e40e53e0ff45_952x529.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><span>Mind reading situation in </span><em>Northanger Abbey</em></figcaption></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg" width="500" height="292" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/d4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:292,&quot;width&quot;:500,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;Jane Austen Explains Mansplaining | Better Living through Beowulf&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="Jane Austen Explains Mansplaining | Better Living through Beowulf" title="Jane Austen Explains Mansplaining | Better Living through Beowulf" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd4c30317-13ae-4e2d-ab3e-570d1685ac13_500x292.jpeg 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>Henry and Catherine (2007 adaptation)</figcaption></figure></div><p>One of Jane Austen’s talents lies in her ability to guide the reader through the considerations of higher-order beliefs that lay in the background of spoken interactions. Although the scenes described by Austen and the rules of interaction her characters follow differ significantly from our modern context, the underlying concerns they have for each other's intentions and beliefs remain relevant in today's interactions. Austen's novels continue to resonate because they allow readers to appreciate the anxieties and hopes associated with the uncertainty of these beliefs—emotions that are universally experienced by individuals with a romantic interest in someone else, even in contemporary times.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png" width="366" height="366" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1024,&quot;width&quot;:1024,&quot;resizeWidth&quot;:366,&quot;bytes&quot;:1816151,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7899d875-c998-4f8f-985b-848868e7abe0_1024x1024.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>The significant amount of time teenagers with romantic interests spend pondering the thoughts, intentions, and perceptions of the person they are interested in reflects the inherent complexity of forming higher-order beliefs through recursive perspective-taking: it requires substantial time and effort to calibrate these beliefs accurately. This willingness to invest such cognitive resources is greater when the perceived stakes are high, as it is for teenagers’ first romantic interests.</figcaption></figure></div><p>These higher-order beliefs matter greatly when individuals who meet in a non-romantic capacity explore the possibility of a romantic interest. In such situations, guarded overtures are cautiously made, trying to maintain a balance between suggesting a possible interest and retaining plausible deniability. Overtures are needed to gauge whether the interest could be reciprocal. Keeping an overture somewhat ambiguous allows for the pretence that nothing was intended beyond the facade of the interaction if it is not met positively. If an overture is met positively, another can be made. </p><p>As such overtures are exchanged, both individuals may progressively reach a shared understanding that the civil facade of the interaction may conceal a romantic interest on both parts. This process continues until the point where the remaining uncertainty is light enough for the facade to be lifted and one of the individuals to make an explicit overture. In the time of Jane Austen, this was suitably resolved by an engagement whereby the man proposes. </p><p><span>Proceeding carefully through a series of guarded overtures allows the progressive lifting of uncertainty. A key aspect to consider is how quickly to make overtures and whether to be more or less clear about one's eagerness. The courtship equilibrium described above requires the man to show the most eagerness as a signal of his romantic interest. However, there is a risk of women being too aloof and ending up unmatched later in their lives (with potentially dire economic consequences at the time). In </span><em>Pride and Prejudice</em><span>, Elizabeth and her friend Charlotte discuss this important point in the game of seduction:</span></p><blockquote><p><strong>Charlotte</strong><span>: It is sometimes a disadvantage to be so very guarded. If a woman conceals her affection with the same skill from the object of it, she may lose the opportunity of fixing him … In nine cases out of ten a women had better show more affection than she feels.</span></p><p><strong>Elizabeth</strong><span>: … If a woman is partial to a man, and does not endeavour to conceal it, he must find it out.</span></p></blockquote><p><span>Here again, modern dating may seem very far removed from these considerations, yet this underlying logic still influences contemporary romantic interactions. Signalling too little interest might result in missed opportunities, but excessive eagerness could prematurely resolve uncertainty in situations where expectations about the prospect of a relationship are actually not aligned. When one’s feelings are not definitely set, suggesting eagerness might unduly heighten the other person’s expectations, necessitating a tedious toning down of these expectations later on. Conversely, if the other person happens not to be that inclined, revealing too much eagerness may lead to a painful explicit rejection. Both situations would lead to </span><em>awkwardness</em><span> because once uncertainty has been lifted and explicit statements have been made, they cannot be put back in the bottle. </span></p><p><span>The psychologist Steven Pinker (2007) describes such a situation occurring in the classic rom-com movie </span><em>When Harry Met Sally</em><span> (1989). Pinker points out that the effect of a too-explicit statement by Harry is to resolve the uncertainty about all the higher-order beliefs. The romantic interest of Harry is now </span><em>common knowledge</em><span>, that is Sally knows about it, Harry knows that Sally knows, Sally knows that Harry knows that Sally knows, and so on.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png" width="1011" height="262" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:262,&quot;width&quot;:1011,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:95020,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F142cefbe-9fee-43ef-95cb-e59584a507e0_1011x262.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png" width="528" height="285.032967032967" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:786,&quot;width&quot;:1456,&quot;resizeWidth&quot;:528,&quot;bytes&quot;:null,&quot;alt&quot;:&quot;When Harry Met Sally&quot;,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="When Harry Met Sally" title="When Harry Met Sally" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4775cd7a-f984-4439-9948-8cf005dd639a_1500x810.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption><em>When Harry Met Sally</em><span> (1989)</span></figcaption></figure></div><p><span>An important advantage of ambiguous overtures is that they maintain uncertainty about these higher-order beliefs and can help retain </span><em>plausible deniability</em><span>. When an ambiguous overture is made and rejected, both persons can pretend that nothing happened. They can continue with the facade of non-romantic interactions, even though they may have a good understanding of what happened. However, when a too-explicit overture makes the intention of one person common knowledge, there is no walking back. It is “out there”. </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png" width="689" height="435.943661971831" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/aefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:584,&quot;width&quot;:923,&quot;resizeWidth&quot;:689,&quot;bytes&quot;:112390,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Faefdace7-f8dd-4786-a3c7-aada5f7975b7_923x584.png 1456w" sizes="100vw" loading="lazy"></picture></div></a><figcaption>How ambiguous overtures can help maintain the non-romantic facade of the interaction by allowing individuals involved to maintain plausible deniability about their beliefs (illustration taken from Page, 2022)</figcaption></figure></div><p><span>Jane Austen’s novels describe many situations where the facade of interaction is formally maintained by avoiding explicit statements, while those involved wittily retort to each other in ways that leave little actual ambiguity regarding their respective views (amicable or unamicable) of each other. Today, as then, this management of ambiguity and the progressive resolution of uncertainty is a key aspect of interactions fraught with possible romantic interests.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-6-137505917" href="https://www.optimallyirrational.com/p/the-game-theory-of-seduction-and#footnote-6-137505917" target="_self" rel="">6</a></span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png" width="57" height="74.13986013986013" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/fb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:186,&quot;width&quot;:143,&quot;resizeWidth&quot;:57,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb15cf31-bf51-4a29-ae3e-472d37819f56_143x186.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The rules of courtship have noticeably changed in 200 years, but the underlying logic of strategic interaction in that process still follows many of the same principles. Jane Austen was a master at understanding the strategic layers of romantic situations and the psychology of protagonists involved in these interactions. It is because of the persistent commonality between the situations she describes and those we face today that Jane Austen still captivates modern audiences. Game theory helps us see her astute understanding of the layers of complexity in human interactions when a woman and a man have potentially romantic interests in each other.</p><h6>References</h6><h6><span>Cameron, J.J. and Curry, E., 2020. Gender roles and date context in hypothetical scripts for a woman and a man on a first date in the twenty-first century. </span><em>Sex Roles</em><span>, </span><em>82</em><span>(5-6), pp.345-362.</span></h6><h6><span>Chwe, M.S.Y., 2014. </span><em>Jane Austen, game theorist</em><span>. Princeton University Press.</span></h6><h6><span>Dekel, E. and Siniscalchi, M., 2015. Epistemic game theory. In </span><em>Handbook of Game Theory with Economic Applications</em><span> (Vol. 4, pp. 619-702). Elsevier.</span></h6><h6><span>Page, L., 2022. </span><em>Optimally irrational: The good reasons we behave the way we do</em><span>. Cambridge University Press.</span></h6><h6><span>Piketty, T., 2020. </span><em>Capital and ideology</em><span>. Harvard University Press.</span></h6><h6><span>Pinker, S., 2007. </span><em>The stuff of thought: Language as a window into human nature</em><span>. Penguin.</span></h6><h6><span>Sozou, P.D. and Seymour, R.M., 2005. Costly but worthless gifts facilitate courtship. </span><em>Proceedings of the Royal Society B: Biological Sciences</em><span>, </span><em>272</em><span>(1575), pp.1877-1884. </span></h6><h6><span>Tomasello, M., 2019. </span><em>Becoming human: A theory of ontogeny</em><span>. Harvard University Press.</span></h6><h6><span>Trivers, R.L., 1972. Parental investment and sexual selection. In </span><em>Sexual selection and the descent of man</em><span> (pp. 136-179). Routledge.</span></h6></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[We Have to Start Over: From Atom to Zed (278 pts)]]></title>
            <link>https://zed.dev/blog/we-have-to-start-over</link>
            <guid>39408288</guid>
            <pubDate>Sat, 17 Feb 2024 10:45:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://zed.dev/blog/we-have-to-start-over">https://zed.dev/blog/we-have-to-start-over</a>, See on <a href="https://news.ycombinator.com/item?id=39408288">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><header></header><p><em>After the <a href="https://zed.dev/blog/why-the-big-rewrite">last conversation</a> with Nathan, Max, and Antonio—Zed's three co-founders—I still had quite a few questions to ask: why did you make the technological choices you did? How important is Rust to Zed? Did you consciously set out to own the technological stack the way you do now? How do you decide what to polish and build-once-and-for-all-time and what to ship faster?</em></p>
<p><em>Lucky for me, they sat down with me again and answered my questions again.</em></p>
<p><em>What follows is an editorialized transcript of an hour long conversation we had. I tried to preserve intent and meaning as much as possible, while getting rid of the uhms, the likes, the you-knows, and the pauses and course-corrections that make up an in-depth conversation.</em></p>
<p><em>(You can <a href="https://www.youtube.com/watch?v=w894KLbapLw">watch the full conversation on our YouTube channel</a>.)</em></p>
<p><strong>Thorsten: The three of you have been working together for, what? Has it been 10 years?</strong></p>
<p><strong>Nathan</strong>: Ungefähr. [German for: "Something like that."]</p>
<p><strong>Max</strong>: Yeah, something like that.</p>
<p><strong>Antonio</strong>: I think 10 years sounds about right. 2014, yeah.</p>
<p><strong>Thorsten: <a href="https://en.wikipedia.org/wiki/Atom_(text_editor)">Atom</a> — that was 10 years ago. You worked together on Atom and then said "we're building Zed." It's pretty clear that you have a vision for what you want to build. And you also made some really distinct technological choices. You use Rust, it's GPU-accelerated, CRDTs. I'm wondering: how much are these technological choices are tied-in with the vision for Zed? How big of a role does the technology play?</strong></p>
<p><strong>Nathan</strong>: I mean, from my perspective, the vision for Zed is just a more refined and fleshed out version of the original vision for Atom, which just fell short due to the technical choices we made in my mind and the level of technical maturity that I think all of us had when we started Atom.</p>
<p>But the goal I've always had is a lightweight editor that is minimal that I love using that feels like a text editor, but has the power of an IDE when needed, without all of the slowness in the experience and kind of heaviness in the UI, but still powerful. That was very early on what I wanted. And for it to be extensible.</p>
<p>You know, I remember using Emacs and thinking it was so cool that you could extend it, but you're sort of operating at the character level. So that was part of the original vision too and now Max has achieved that with <a href="https://tree-sitter.github.io/tree-sitter/">Tree-sitter</a>. You know, basically scriptability. We're not scriptable yet, but we'll get there. But when we are, we'll have access to a richer representation of the text than just looping over characters or whatever I was doing in Emacs. I mean, they probably have that now as well, right? Because Max wrote tree-sitter.</p>
<p><strong>Max</strong>: They do, I hear.</p>
<p><strong>Nathan</strong>: So that's cool. But anyway, that was all part of the vision. And it just didn't pan out with Atom. I mean, when Chris hired me to work on Atom, I almost didn't join [meaning: join GitHub to work on Atom] because I was afraid of using web tech and that it wouldn't be able to get there.</p>
<p>But to be honest, I don't know that whatever I had at my disposal at the time would have gotten us any better because Rust didn't exist back then. So it would have been C, C++. I don't know, it would have been really hard to do something native at the time we created Atom. And I don't think my skills were in place on just fundamental algorithms, et cetera, that are critical to text editing. And C++ would have really slowed me down in my learning there. So I think it happened how it needed to happen.</p>
<p>We got to a certain point with Atom. It was 2017 when we'd shipped <a href="https://github.com/atom/teletype">Teletype</a> and it felt like, okay, it's no longer our own ignorance holding us back, it really is like the platform holding us back at this point. That's really how it was starting to feel.     Just the fact that in JavaScript, an array in JavaScript is... You think you have an array of objects, but you really have an array of pointers to objects. So every single time you're walking over that, you're chasing it down. You have no control over memory. There are garbage collector pauses that are just happening that you have no control over. You just look at the profile of the fricking thing.</p>
<p><strong>Thorsten: When you were working on Atom, was there a specific point at which you said "oh, I wish we would have built it with X"? Or was it an accumulation of paper cuts? Antonio was nodding right now.</strong></p>
<p><strong>Antonio</strong>: Speaking of 10 years of working on this thing: I remember one of my first projects in Atom — I don't know if you remember this, Nathan — was speeding up line layout. Basically, we were seeing line layout being very slow. And I remember trying rendering lines in an iframe. And I remember using Canvas, measured text, and all these APIs that were... I don't know, the Canvas API wasn't quite the same as the browser API, so you couldn't really measure text correctly. The iframe stuff had some other weird problem.</p>
<p>My experience in Atom always felt like bending over backwards to try to achieve something that in principle should have been simple. Lay out some lines and read
the position of the cursor at this spot in between these two characters. That seems fundamentally doable and yet it always felt like the tools were not at our disposal. They were very far away from what we wanted to do.</p>
<p><strong>Nathan</strong>: It was a nightmare. I mean, the ironic thing is that we created Electron to create Atom, but I can't imagine a worse application for Electron than a code editor, I don't know. For something simpler, it's probably fine, the memory footprint sucks, but it's fine. But for a code editor you just don't have the level of control I think you need to do these things in a straightforward way at the very least. It's always some... backflip.</p>
<p>So at some point in 2017, I remember sitting there, writing in Atom in my journal — that was the evening when I thought: we have to start over. We have to start over, this isn't working and we're never going to get this where we want it to go. VS Code has done an admirable job of getting it as far as it's gonna go. There'll be incremental improvements in the tech, I'm sure, but I just wanted more.</p>
<p>So at that point it was: okay, what should we do? And I'd been watching Rust, I'd seen some of <a href="https://raphlinus.github.io/">Raph Levien</a>'s writing about Rust. And at the time this seemed like the only viable path to kind of overcome some of these obstacles. And it started as: what if we just write the core of this thing in Rust and we keep Electron as the presentation layer?</p>
<p>So it was just inch-by-inch that we came to the technological decisions we chose. Even after building the UI framework, giving up on Electron, we were using <a href="https://github.com/servo/pathfinder">Pathfinder</a>, which is like this really cool project that could do arbitrary presentation of SVGs basically, but it was too slow. So then I thought: okay, what if we do our own shaders? And then went and learned about signed distance fields.</p>
<p>It was kind of funny. It was me not wanting to solve some more fundamental problem, but just being forced to do that by the unavailability of any other choice.</p>
<p>I shouldn't say it was only me, it wasn't only me. But this was from my perspective...</p>
<p><strong>Thorsten: It sounds like the goal was always to be as fast as possible, as lightweight as possible. You tried to get there, but you couldn't with the technology you had. But then Rust came along. And you didn't start saying "we need a GPU-accelerated editor", but you started by saying you want the fastest possible editor and then GPU acceleration was one way to do that. Is that right?</strong></p>
<p><strong>Nathan</strong>:
Yeah, it was: we have this hardware in the computer and rather than negotiating what DOM nodes are in the DOM at a given moment, or all this nonsense, we could just literally be like, what color should this pixel be? Great. Okay, if we can program that hardware to decide what color every pixel on the screen should be in parallel, or as parallel as possible —&nbsp;we should probably use that if we want to be fast.</p>
<p>But you know, we came there kind of grudgingly because I didn't know how to do any of it.</p>
<p><strong>Thorsten: Now, this is kind of a loaded question, but I've been on the side hacking with Rust for the last three years and my feelings about it are complicated. But two weeks someone on Hacker News said that find-all-matches in Zed takes a second but in Sublime Text it's really fast, closer to 200ms. So Antonio and I paired on that and he wrote code to optimize for this case of searching all the occurrences in a buffer. But the optimized code wasn't "optimized" code: it didn't use any dirty tricks, no SIMD, or something like that. It was high-level code, with the optimization being that it's assumption was different: instead of doing things in a loop, one by one, its assumption was to find all results. We made a release build of that and it went from 1s down to 4ms.</strong></p>
<p><strong>Antonio</strong>:
Hahaha</p>
<p><strong>Thorsten: And I sat there, looking at the 4ms, and... well, I thought: this is going to be a nice lunch break after this. But 4ms? With high-level code like that, that just called other internal APIs? Wow. So what I'm trying to ask is: Rust has these zero-cost abstractions —&nbsp;so you can use high levels of abstraction to build a text editor, but it still gives you this kind of performance. Do you think this is a specific thing about Rust, or do you think if you had just been a better C++ or C programmer, you could've done it in another language?</strong></p>
<p><strong>Antonio</strong>: You probably could have done it with C and C++. I don't know. I mean, tree-sitter is written in C, right, Max? So it is possible to write a complex library piece of software in C. Although I have to say anytime I look at the C code in tree sitter, I scream because it's just too much for me. I don't know.</p>
<p>Personally, yes, Rust is in a sweet spot. If it wasn't for the compile time being that slow — that's a thing that I really don't like about the language, but maybe it's our project that's too big, I don't know.</p>
<p>But yes it is pretty cool that you can build on top of these abstractions and just rely on them. I mean, I don't know about zero cost —  every abstraction has a cost, I guess.</p>
<p>But the thing with this project in general... With Atom it always felt like we didn't know where to look for performance. With this, with Zed, it's more: we could do this and we could do that and we could improve this. Just last week, Nathan and I were discussing how to improve the subtraction of the SumTree to perform batched insertion a lot faster.</p>
<p><strong>Nathan</strong>: And then you implemented it, right?</p>
<p><strong>Antonio</strong>: Yeah. But it's not shipped yet.</p>
<p><strong>Nathan</strong>: Great.</p>
<p><strong>Max</strong>: I'll say we did do a lot of C++ on Atom — we did a lot. We tried. And it worked, but it was just that there was a very meaningful distinction — obviously — where the boundary was between the JavaScript application code and the C++ library code. And people would talk about performance and say "just do this on a background thread, just don't do it on the main thread" and we'd say "okay, we can do that" but that means this whole subsystem that is involved here needs to be dropped into C++ in order to share memory. Then build JavaScript APIs around that and figure out how it's going to still look like idiomatic JavaScript code and preserve all these properties that it had from when it was written in JavaScript.</p>
<p>And only then could we actually move this one task to the background thread.</p>
<p>It was such a difference between writing JavaScript code — that was scriptable and pluggable and overridable —&nbsp;and the C++ that had the core capability to have shared memory and multi-threading.</p>
<p><strong>Nathan</strong>: And Rust is designed to be multi-threaded. I remember when I tried to learn Rust and I wanted to implement this <a href="https://en.wikipedia.org/wiki/Splay_tree">splay tree</a> because the splay tree was a structure that we used a lot in Atom. Well, for a time — it had its era at least. I mean, it was actually pretty good for our needs, but it had parent pointers, it was very much a mutable structure.</p>
<p>And I tried to build that in Rust and the language fought me. And I thought: can you even build anything real in this language? I had serious doubts, actually.</p>
<p>So I gave up for a while, then I tried again. And this time around I built a copy-on-write B-tree. And when I built it that way, it used <code>Arc</code>s and that meant it was inherently multi-threading friendly.</p>
<p>And when I followed the dictates of the language and the borrower checker and did it the way Rust wanted me to do it, it was: oh, cool.</p>
<p>Now we have this way of representing <a href="https://en.wikipedia.org/wiki/Rope_(data_structure)">ropes</a> — which is the fundamental text storage structure in Zed — in a way where we can spawn a background thread, and it's O(1), it's just bumping an <code>Arc</code> to take that to a background thread and look at a snapshot, et cetera.</p>
<p>It's not just about being native. I also think Rust brings to the table innovations. The language is designed to be used the way we're using it on multiple threads and at a low level.</p>
<p>And frankly, I was just a little too much of a script kiddie I think to do well in C++. It always just annoyed me: these freaking files, jumping over here, all these arcane rules. And could a C++ master do what we did in Rust? Probably, but like I wasn't gonna become that person.</p>
<p><strong>Thorsten: So Antonio, you just mentioned that with JavaScript, you didn't know where to look for performance. Max, you said, when you were using C++ or JavaScript, you felt these boundaries when you want to make something async. And now we heard about Rust — you can suddenly do stuff async on a background thread, you have less restrictions, you can move freely around.</strong></p>
<p><strong>That reminds me of something you can actually see in the Zed code base: you own the whole stack. From tree-sitter doing the parsing to GPUI, the GPU-accelerated UI framework — there aren't a lot of third-party dependencies in the code base. Some libraries, but not big building blocks.</strong></p>
<p><strong>How important is that for you? We own the full stack, top to bottom, we understand it top to bottom. Is that a conscious choice or did this happen by accident because Max built tree-setter and then you did this and now look at us, we rebuilt the whole thing.</strong></p>
<p><strong>Max</strong>: I don't know. I think it has trade-offs, but I so far it's been pretty nice to be able to just... decide how we want things to work. Like right now: we want to have language extensions that use WASM. Tree-sitter didn't have that but we added that to it.</p>
<p>There's a million things like that. We don't want to be beholden to some UI framework that may not render text exactly the way we want, because we're a text editor and that matters a lot. But we can now go change that.</p>
<p>It doesn't feel like anything is sort off limits.</p>
<p><strong>Nathan</strong>: One thing I'll say: this was very informed by an experience earlier in my career with jQuery. jQuery was the hot thing and I learned jQuery. I remember <a href="https://yehudakatz.com/">Yehuda</a> coming to <a href="https://en.wikipedia.org/wiki/Pivotal_Labs">Pivotal</a> and presenting on jQuery and I thought this is so cool. I was blown away by it. So early on, all the Atom code, believe it or not, was jQuery.</p>
<p>And the funny thing was though, having learned jQuery, because everybody told me, "oh, the reason you use jQuery is it abstracts over all the differences in the browser APIs", et cetera. I never really questioned that. But then I remember the day that I just sat down and read the freaking DOM APIs. And I thought: you know what, this is actually fine. Maybe there were some missing features or something — and I don't want to shit on jQuery, I think it has its role — but what I came away with was that if I don't have an abstraction that's nailing almost 100% of my needs then I might not want to have that abstraction and go to the level below, understand the level below it fully, and do what I need to do.</p>
<p>That was kind of what happened with GPUI. There were some UI frameworks in flight when we started on a GPUI, in 2019, but none of them did what I knew we would need to do. And I didn't understand them.</p>
<p>But I knew I could come to understand quite easily the fundamental primitives that we're going to be relying on — the language, the graphics framework. I knew we could learn those things and I knew we've written a lot of code. If I can build a system that I can understand and learn from, then I know that I can do what we need to do if it's fundamentally possible on the underlying system. And so really it was — at least for GPUI — a survival strategy: I need to understand this and the best way to understand it is to build it.</p>
<p><strong>Thorsten: What are the downsides of that? Max, you said there's trade-offs.</strong></p>
<p><strong>Nathan</strong>: Takes forever. It's slow.</p>
<p><strong>Antonio &amp; Max</strong>: [laughing]</p>
<p><strong>Antonio</strong>: It's also tricky to onboard people. You're not using the X framework out there that everybody knows, you have to teach this code base from scratch — you know, 300,000 lines of code. That's a downside.</p>
<p>But the cool thing is that while this is a downside, at the same time there's somebody else who has written that code and can explain it to the new person.</p>
<p>It might be slower, but again, you're retaining control.</p>
<p><strong>Nathan</strong>: I think it accumulates. The advantages accumulate, and the downsides depreciate. Someone just built <a href="https://github.com/MatthiasGrandl/loungy">another app on GPUI</a>, so now we have another stakeholder. The cost of having owned it, we're going to gradually write off over time, and the costs and the upsides of owning it are going to start to kick in.</p>
<p><strong>Thorsten: Sometimes people say: I only build it once and then I never have to touch it again. And the opposite of that might be: you can't predict the future, <a href="https://en.wikipedia.org/wiki/Worse_is_better">worse is better</a>, and so on.</strong></p>
<p><strong>And what you just said, that it's slower to build it all yourself, there's a ring of "build it once and do it right for our use case" to it: only the perfect abstraction for what we want to do. At the same time, there's this sense of urgency that you all have. I mean, I joined four weeks ago and I do feel like we're moving fast and we've got so much to do.</strong></p>
<p><strong>How do you balance that? How do you have this huge vision for what you want to build, and balance that with saying "I'm gonna write shaders, I'm gonna perfect how we render drop shadows or whatever"?</strong></p>
<p><strong>Nathan</strong>: Build what you need, only what you need, no more, no less, and build that as well as you can within reason. And then when it turns out to not be quite what you needed, be willing to revisit it after you've learned. But I think if you're laying down every brush stroke with intentionality and care,
and you're not wasting time speculating about what you might need, then... for me, that's always worked out. Sometimes it takes a little while though.</p>
<p><strong>Antonio</strong>: I would add on top of that: it's a gradient. It's not like everything needs to be built perfectly. Or at least that's how I feel about much of the code we write. If we're writing stuff in GPUI, well, the whole app depends on the GPUI, that better be perfect. Or the sum tree. It's this data structure that's used everywhere in the code base. That one we really wanna nail, because it has to be fast.</p>
<p>It has to work perfectly so that we can build on top of it, right? And that is reflected, also in the testing that we do on those things. The SumTree is randomized-tested because we want to make sure that all those edge cases work perfectly.</p>
<p>Now, as you move towards the edge— that performance improvement that you alluded to, Thorsten, we didn't spend three hours gold plating it, right? It was like: whatever gets the job done, it's pretty much at the edge. I mean, we should feel good about the code, we should always strive to write the code as best as we can, but we don't need to gold plate it.</p>
<p>It's a gradient. The more core something is, the more it deserves thought and quality.</p>
<p><strong>Nathan</strong>: And my favorite code to write is the code I've earned myself the right to write. Whoa, that's a lot of homophones.</p>
<p>With GPUI I had so much fun writing it that I almost felt like guilty about it.
But I have earned the right to write this code because I wrote the first version, I lived with it, I pushed it forward, I made the compromises when I needed to make them to make things right.</p>
<p>But now is the moment where we can make this better. And it makes sense to make this better. And I'm informed. I think a lot of times when people talk about like rewriting— if you're rewriting something someone else wrote, be doubly suspicious of yourself.</p>
<p>But if you wrote it and you've lived with it and you've put in the work... That's also something to be said: don't let perfectionism get in the way of learning.</p>
<p><strong>Thorsten: If I were to take the three of you and... I don't know what to throw at you that you couldn't build, but say you'd have to build, I don't know what — a PID controller for an airplane. Airplane software, there you go. Something like that.</strong></p>
<p><strong>Nathan</strong>: Nuclear reactor control subsystem.</p>
<p><strong>Thorsten: You don't know the domain and you don't know yet how you're going to build it and you don't yet know which parts you're going to need. Is that where you would say you'd need a different approach? Unlike in the editor, where you have a strong vision for what you want, you built a few before, so now you know which parts count. You know beforehand, GPUI is going to be important. So let's take our time with it and gold-plate it as Antonio said.</strong></p>
<p><strong>Max</strong>: I mean, I don't know if a nuclear reactor is a good example, but I do feel like if it was our first code editor, ... We <em>did</em> "worse is better". It wasn't intentionally bad, but we took the kind of quicker, dirtier approach once and then kind of identified the things that were real pain points to build on top of, in their sort of worse-is-better form.</p>
<p>But I do think, if for some reason Antonio and me and Nathan had to build a...</p>
<p><strong>Nathan</strong>: Choose something less mission critical maybe?</p>
<p><strong>Max</strong>: ... a Shopify clone or something. We would probably have a different mindset about it. We wouldn't know which pieces needed to be really highly honed.</p>
<p><strong>Nathan</strong>: But if I <em>were</em> building a nuclear reactor control system, I would use a Byzantine fault-tolerant consensus algorithm and pit three teams against one another to compromise each other's security and then make them come to consensus on all of it. But I don't know how to do that.</p>
<p><strong>Antonio</strong>: There's another example that's less mission critical than a nuclear reactor, but where we didn't know the data structure and we kind of took the time to learn it. It wasn't always that the structure powering the buffers in Atom and in Zed today was a CRDT. There was a research period where Nathan and I read... I forget how many papers. A lot of them. And the approach we're using right now with the CRDT — we still rewrote it two or three times — but the approach is more or less the same.</p>
<p>So I think there's a part of it that comes with experience. I feel like you tend to develop a sense of what you need to spend time on and what is more frivolous, less important.</p>
<p>Now, that said, we did rewrite the CRDT two or three times, but the research part, was important. I don't know.</p>
<p><strong>Nathan</strong>: The funny thing is in the Atom that shipped, the buffer was an array of lines, a JavaScript array of strings. And in Zed, it's a multi-thread-friendly snapshot-able copy-on-write B-tree that indexes everything you can imagine. Or everything we've needed. So we did worse is better.</p>
<p>But starting over, would it be an array of lines again? Probably not because look at the look at the time bounds on that. And put a little more thought into it, but that —&nbsp;again —&nbsp;I learned that by like doing worse-is-better and then having it be really slow or problematic in edge cases that ended up mattering.</p>
<p><strong>Thorsten: So what are the most gold-plated parts of Zed?</strong></p>
<p><strong>Nathan</strong>: GPUI is pretty gold-plated, I think, because we just rewrote the whole fricking thing.</p>
<p><strong>Antonio</strong>:
Good question.</p>
<p><strong>Max</strong>: I think what's in the <a href="https://github.com/zed-industries/zed/tree/main/crates/editor"><code>editor</code> crate</a>, where there's sort of the stack of different transforms that convert the raw text of the buffer into the lines that you see on screen, that expand the tabs and do the soft-wrapping and insert the block decorations and handle folds and stuff. All those layers have this uniform testing strategy where it's randomized-tested with property testing. So I think they're pretty gold-plated.</p>
<p>The multi-buffer too, where we sort of weave together the different excerpts of different buffers into one.</p>
<p><strong>Nathan</strong>: I would call them, um... I just wanted to suggest like an alternative substance for that part of the code base. I would say it was kind of plated and coated in blood.</p>
<p><strong>Antonio</strong>: Ha! Blood plated.</p>
<p><strong>Thorsten: You mean the editor and the multi-buffer?</strong></p>
<p><strong>Antonio</strong>: Yeah.</p>
<p><strong>Nathan</strong>: Yeah. It's randomized tests where we've spent literally the entire day in 2021, many days in a row, just debugging failures in these randomized tests that would find some weird edge case of this ornate— I mean, I wouldn't say it's ornate, but it's complicated — stacking of different layers of transformation required to present things on screen. And so it's just elbow grease, right? Find the edge cases and then figure out why they're happening by reducing the log, which for a long time we just did manually.</p>
<p><strong>Thorsten: How did it feel when one of these bugs popped up? Did you have moments of panic when property testing threw a bug in our face and you thought "maybe this whole thing doesn't work?" Or was it rather "well, it's just another thing to polish down and if not, we rewrite this"?</strong></p>
<p><strong>Antonio</strong>: Never panic, that's the rule of randomized testing, never panic. I have a lot of faith in our capability as engineers, I really do, and maybe it might be that we have to rewrite the whole thing and the randomized test is telling us that, but it's fine, we just learned something, back to the drawing board and redo it.</p>
<p><strong>Nathan</strong>: What was scary was: how long is this going to take? I think Lee, our seed investor, was also asking us that at certain times. But he stuck with us and was patient because it took a while.</p>
<p>But that piece was written in  Rust. If we f this up, the program is panicking. Goodbye, poof. It's not just like a stack trace gets thrown in the corner of the editor or something, no, it's done.</p>
<p>So we knew how hard it was to get those layers right. And we knew that there was no other choice, but to get them right. But yeah, I remember, Antonio, remember working on soft wraps and that problem we came up against where we realized the primitive we needed was this ability to represent a patch and then to be able to compose these patches together — that was one moment where I was sweating a bit, thinking "are we gonna freaking figure this out?" and then Antonio figured it out.</p>
<p><strong>Antonio</strong>: Yeah. But powering it all — you know, in terms of gold-plating — is again the sum tree. And even with that, there are some ideas on how to make it better, if we were to rewrite it.</p>
<p><strong>Nathan</strong>: We were talking the other night about how dope it would be. And Antonio, you applied some of the ideas we talked about: being able to construct all these layers in a more streaming friendly way. And you did one optimization, which is gonna land on preview next week.</p>
<p><strong>Antonio</strong>: Yeah, I need to open the PR for it still...</p>
<p><strong>Nathan</strong>: To enable more streaming inputs so people don't get zero feedback when they open a big file, but start actually loading things in, more efficiently — does that necessitate a rewrite? Maybe. Maybe not. I don't know.</p>
<p><strong>Thorsten: Quite interesting how often this idea of rewriting or doing it again comes up. We talked about this <a href="https://zed.dev/blog/why-the-big-rewrite">the last time</a>. Learning continuously. It's not: learning and <em>then</em> fixing something and patching something. It's more: we learned something, so now let's redo it with that learning in mind, vs. just putting a band aid on. It came up multiple times and you see it in the product.</strong></p>
<p><strong>When we talk, Antonio, you say things like: before we did it like <em>this</em> and now we do it like that. Just yesterday, we basically rewrote the part that deals with macOS' IME system, because Antonio said: we can't leave it like this, we don't want another person to fall into this rabbit hole, let's put a bridge on top of it.</strong></p>
<p><strong>Nathan</strong>: Nice. That's good to hear. I've heard about that.</p>
<p><strong>Thorsten: I don't know if it makes sense, but my last question is this... With a lot of software, say, SaaS Enterprise Whatever, or the Shopify clone, I think most users do not care what technology is used, as long as it works for them. And I wonder: do you think this is different with developer tools or editors? Does the technology that's used shine through more or do the users care more about it?</strong></p>
<p><strong>Max</strong>: I do think it affects the type of contributions we can get. A lot of our users, so many of them are people who would be prepared to contribute something to the code base to fulfill their own needs.</p>
<p>I think it's important that it's easy to contribute to Zed. If we written it all in C++, I think that there would be a lot of people who would like wanna change something about Zed, but would not be as prepared to make the change themselves.</p>
<p>Whereas just from the contributions that we've gotten so far since going open source a few weeks ago, it's a lot. I think people like that it's written in Rust. It's approachable. People can build the project easily. They don't have to go learn how to use CMake or whatever to build the project or Gyp. They can just use cargo.</p>
<p>But also the fact that the compiler has this strictness to it, allows us, as the receiving end of those contributions, to often merge with confidence. I think it's really helpful.</p>
<p><strong>Nathan</strong>: Rust is an absolutely beautiful tool. It's not perfect, but I love it. But does it matter to the people? I mean, I think people want a fast editor at the end of the day. We could write it in, what is it, brainfuck? They wouldn't care. But the contribution angle is super valid.</p>
<p><strong>Antonio</strong>: But I still would like to talk about the performance, I just think we are forced to do things a certain way because of performance. Why do we have this GPU accelerated UI framework? It's because the performance needs to be at a certain level. We want our frames to be below three milliseconds. We could rasterize everything on the CPU and we could have used something that did that, but, no.</p>
<p>To some extent, we're positioning ourselves to be a performance editor, because we want a performance editor. I want a performance editor. And so, the choice is almost... we have no choice almost.</p>
<p><strong>Nathan</strong>: But there's Zig now and I don't know a lot about Zig yet, I haven't had time, honestly, to learn about it, but people I respect are excited about it. It seems like it shares some of the same goals in terms of the output as Rust. I'm unclear what it's sacrificing in terms of safety, or how they handle those things. There may be pragmatic workarounds that are sort of not as strict as Rust, but in practice work, et cetera.</p>
<p>So I'm intrigued by that. I'm intrigued, but then there's a lot to be said for like monolingualism, if that makes sense. The server's in Rust, the frontend's in Rust, but if I could get 99% of the benefits of Rust with a 10th of the compile time or something...</p>
<p><strong>Thorsten: Well, I can tell you about Zig that a person on Discord was saying they're writing an editor in Zig, but the perfect name for a text editor in Zig is already taken: Zed.</strong></p><hr></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[It’s Official, Apple Kills Web Apps in the EU (217 pts)]]></title>
            <link>https://open-web-advocacy.org/blog/its-official-apple-kills-web-apps-in-the-eu/</link>
            <guid>39408196</guid>
            <pubDate>Sat, 17 Feb 2024 10:30:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://open-web-advocacy.org/blog/its-official-apple-kills-web-apps-in-the-eu/">https://open-web-advocacy.org/blog/its-official-apple-kills-web-apps-in-the-eu/</a>, See on <a href="https://news.ycombinator.com/item?id=39408196">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        
<p>Nearly two weeks ago <a rel="noreferrer" target="_blank" href="https://open-web-advocacy.org/blog/did-apple-just-break-web-apps-in-ios17.4-beta-eu/">we discussed a bug</a> on iOS Beta 17.4 breaking Web App installation in the EU. Yesterday <a rel="noreferrer" target="_blank" href="https://open-web-advocacy.org/blog/apple-on-course-to-break-all-web-apps-in-eu-within-20-days/">we raised the alarm</a> that this appeared to be not a bug but a deliberate choice on Apple’s part. Today Apple officially confirmed our suspicions in an update to their compliance proposal.</p>
<p>In a direct attack on the open web, its users, and its developers, <a rel="noreferrer" target="_blank" href="https://developer.apple.com/support/dma-and-apps-in-the-eu#8">they have decided to kill Web Apps (PWAs) in the EU</a>:</p>
<blockquote>
<div><p>And so, to comply with the DMA’s requirements, we had to remove the Home Screen web apps feature in the EU.</p><p>
EU users will be able to continue accessing websites directly from their Home Screen through a bookmark with minimal impact to their functionality. We expect this change to affect a small number of users. Still, we regret any impact this change — that was made as part of the work to comply with the DMA — may have on developers of Home Screen web apps and our users.”</p></div>
</blockquote>
<p>This is emphatically not required by the EU’s Digital Markets Act (DMA). It’s a circumvention of both the spirit and the letter of the Act, and if the EU allows it, then the DMA will have failed in its aim to allow fair and effective browser and web app competition.</p>
<p>It’s telling that this is the feature that Apple refused to share. And it makes sense: the idea that users could install safe and secure apps that Apple can’t tax, block or control is terrifying to them.</p>
<p>The legal obligation to allow third-party browsers onto iOS removes their ability to set a ceiling on web app functionality via their control of Safari and the WKWebView. Suddenly Web Apps would be a viable competitor. It is particularly galling for them to cite low adoption when they have had their thumb on the scale suppressing them for over a decade.</p>
<p>The DMA compels them to allow third party app stores, but Apple’s plan is to cripple them with their hardware and software API fee (Core Technology Fee) and their ludicrous “opt-in to your legal rights” at a different price alternative contract.</p>
<p>But web apps are much harder to stop. Even Apple admits WebKit’s sandbox is, <a rel="noreferrer" target="_blank" href="https://assets.publishing.service.gov.uk/media/62277271d3bf7f158779fe39/Apple_11.3.22.pdf">to quote them</a> ”orders of magnitude more stringent than the sandbox for native iOS apps”. They tried claiming to the UK regulator that Safari is more secure than other major browsers but decisively lost that argument.</p>
<p>So this is their new tactic: Kill off a competitor while saying the EU made them do it.</p>
<p>Apple has had 15 years to allow third party browsers the ability to compete in web app functionality and nearly 2 since they knew they would be legally compelled to do so.</p>
<p><a rel="noreferrer" target="_blank" href="https://developer.apple.com/support/dma-and-apps-in-the-eu#dev-qa:~:text=Why%20don%27t%20users%20in%20the%20EU%20have%20access%20to%20Home%20Screen%20web%20apps%3F">Apple also makes tenuous, bordering on laughable, claims regarding web app security.</a> In addition to unwarranted and unjustifiable attempts to project their own model onto competing browsers, Apple makes claims that ignore the history of web applications and browsers in providing strong privacy and security separation. Apple offers no evidence to back these assertions, and ignores the long track record of superior security of PWAs on other OSes.</p>
<p>Again and again, Apple has offered paper-thin fig-leaf arguments based on security to duck regulation, only to have these ploys rejected in nearly every jurisdiction where evidence is critically examined. This appears to be another instance of the same willfully misleading pattern. If security posturing is the backbone of Apple’s attempt to duck conformance with the DMA, the EU must reject the proposal and find Apple willfully non-compliant.</p>
<p>Apple also makes a self-fulfilling argument regarding the low use of iOS homescreen web apps. This is a situation of Apple’s own making and, indeed, a large part of why OWA has invested so much in reversing Apple’s history of self-preferencing towards native apps that Apple can tax through its App Store monopoly. Instead of offering equivalent affordances for websites looking to compete with App Store alternatives, Apple’s answer is to remove the capability, destroy critical features, and engender data loss for users and businesses that had invested in the web as a platform. Malicious destruction may be Apple’s attempt at an answer, but it is not a solution.</p>
<p>The next question is: Why all the secrecy? There was nothing in their compliance plan, Safari’s release notes or the beta’s release notes. Given that they are now stating they knew all along, it seems they wanted to see if they could sneak this past.</p>
<p>Clearly the backlash has caught them off guard and that’s why they had to rush out this panicked response, the only significant update they have made to their compliance proposal.</p>
<p>We always assumed that the commission would have to fine Apple billions to force them to allow the web to compete fairly and effectively with their App Store but it’s still incredibly disappointing to see Apple behave like this.</p>
<p>This is a message in a bottle to regulators world-wide: Apple will stop at nothing to protect its app distribution monopoly and the rent that comes with it, including removing critical features from its OSes without the slightest care for its users. It will not act in good faith, it must be forced.</p>
<p>We will continue to work with the EC to ensure that Web Apps can remain first-class citizens for iOS users, businesses, and competing browser vendors.</p>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA["Stolen" radio tower missing for at least a year (193 pts)]]></title>
            <link>https://www.radiodiscussions.com/threads/wjlx-wjbe-and-werh-oh-my.769948/#post-6697751</link>
            <guid>39408171</guid>
            <pubDate>Sat, 17 Feb 2024 10:24:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.radiodiscussions.com/threads/wjlx-wjbe-and-werh-oh-my.769948/#post-6697751">https://www.radiodiscussions.com/threads/wjlx-wjbe-and-werh-oh-my.769948/#post-6697751</a>, See on <a href="https://news.ycombinator.com/item?id=39408171">Hacker News</a></p>
Couldn't get https://www.radiodiscussions.com/threads/wjlx-wjbe-and-werh-oh-my.769948/#post-6697751: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Microsoft bets on Germany in 3.2B euro AI push (133 pts)]]></title>
            <link>https://www.reuters.com/technology/microsoft-invest-32-bln-eur-germany-ai-push-2024-02-15/</link>
            <guid>39408155</guid>
            <pubDate>Sat, 17 Feb 2024 10:19:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reuters.com/technology/microsoft-invest-32-bln-eur-germany-ai-push-2024-02-15/">https://www.reuters.com/technology/microsoft-invest-32-bln-eur-germany-ai-push-2024-02-15/</a>, See on <a href="https://news.ycombinator.com/item?id=39408155">Hacker News</a></p>
Couldn't get https://www.reuters.com/technology/microsoft-invest-32-bln-eur-germany-ai-push-2024-02-15/: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA[Considerations for a long-running Raspberry Pi (450 pts)]]></title>
            <link>https://www.dzombak.com/blog/2023/12/Considerations-for-a-long-running-Raspberry-Pi.html</link>
            <guid>39407631</guid>
            <pubDate>Sat, 17 Feb 2024 08:42:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.dzombak.com/blog/2023/12/Considerations-for-a-long-running-Raspberry-Pi.html">https://www.dzombak.com/blog/2023/12/Considerations-for-a-long-running-Raspberry-Pi.html</a>, See on <a href="https://news.ycombinator.com/item?id=39407631">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><header><span> <time pubdate="" datetime="2023-12-29T14:43:07-05:00"> <span>December</span> <span>29,</span> <span>2023</span> </time> • <span>Tagged:</span> <a href="https://www.dzombak.com/blog/tag/series%3Api-reliability/">series:pi-reliability</a> <a href="https://www.dzombak.com/blog/tag/raspberry-pi/">raspberry-pi</a> </span></header><p>Part of the <a href="https://www.dzombak.com/blog/series/pi-reliability.html">Raspberry Pi Reliability</a> series.</p><p>I use Raspberry Pis around my home as everything from <a href="https://github.com/cdzombak/pi-fm-player">low-power FM transmitters</a> to <a href="https://github.com/cdzombak/nut_influx_connector">UPS energy monitors</a>.</p><p>Keeping a Raspberry Pi online and working with zero intervention for weeks, months, or years is somewhat of an art form. Several classes of things can go wrong, and you need to consider how your Pi will recover from each of them — and <a href="https://www.dzombak.com/blog/2023/12/Consider-the-risks-before-making-any-dramatic-changes-to-your-Raspberry-Pi-setup.html">weigh the risks of each solution against its benefits</a>.</p><p>This new set of posts in <a href="https://www.dzombak.com/blog/series/pi-reliability.html">my Raspberry Pi Reliability series</a> covers each class of issues I’ve run into, and what I’ve done to solve them. As a bonus, these posts also include some tips on monitoring, mainly using <a href="https://github.com/louislam/uptime-kuma">Uptime Kuma</a>.</p><p>This aims to be a more comprehensive guide than <a href="https://www.dzombak.com/blog/2021/11/Reducing-SD-Card-Wear-on-a-Raspberry-Pi-or-Armbian-Device.html">my previous post on reducing SD card wear</a>, and the posts linked here should be considered an updated replacement for that post.</p><p><em>Without further ado:</em></p><h2 id="what-can-go-wrong-and-how-do-i-prevent-it"> What can go wrong, and how do I prevent it? <a href="#what-can-go-wrong-and-how-do-i-prevent-it"></a></h2><ul><li><a href="https://www.dzombak.com/blog/2023/12/Maintaining-a-solid-WiFi-connection-on-Raspberry-Pi.html">The WiFi connection can fail</a></li><li><a href="https://www.dzombak.com/blog/2023/12/Keep-your-software-up-and-running-on-the-Raspberry-Pi.html">Your software service can stop working</a></li><li><a href="https://www.dzombak.com/blog/2023/12/Mitigating-hardware-firmware-driver-instability-on-the-Raspberry-Pi.html">Hardware/firmware/driver instability can cause a crash</a></li><li>Your SD card can wear out or completely fill up<ul><li><a href="https://www.dzombak.com/blog/2023/12/Choosing-the-right-SD-card-for-your-Pi.html">Start by choosing the right microSD card</a></li><li><a href="https://www.dzombak.com/blog/2023/12/Stop-using-the-Raspberry-Pi-s-SD-card-for-swap.html">Don’t use the SD card for swap!</a></li><li><em>Choose one of…</em><ul><li>Aggressively manage things that write to the SD card (especially logs)</li><li>Make the Pi’s root filesystem read-only</li><li><em>In the interest of getting this series of posts finished in fewer than 2 months,</em> for now I’ll point you to my 2021 post on reducing SD card wear, particularly the <a href="https://www.dzombak.com/blog/2021/11/Reducing-SD-Card-Wear-on-a-Raspberry-Pi-or-Armbian-Device.html#if-the-system-can-use-a-read-only-filesystem">read-only root filesystem section</a> or the <a href="https://www.dzombak.com/blog/2021/11/Reducing-SD-Card-Wear-on-a-Raspberry-Pi-or-Armbian-Device.html#if-the-system-cant-use-a-read-only-filesystem">non-read-only root filesystem section</a>. <em>I plan to produce two updated, easier-to-read guides here in the near future, for my own reference as much as yours; <a href="https://www.dzombak.com/blog/series/pi-reliability.atom.xml">watch this space</a>!</em></li></ul></li><li><a href="https://www.dzombak.com/blog/2023/12/Raspberry-Pi-SD-cards-fsck-them-often.html">Check the filesystem often</a> if you’re not using a read-only root filesystem</li></ul></li><li><a href="https://www.dzombak.com/blog/2023/12/Disable-or-remove-unneeded-services-and-software-to-help-keep-your-Raspberry-Pi-online.html">Disabling unneeded services helps with both software stability <em>and</em> SD card wear</a></li></ul><p><strong>Also, do these:</strong></p><ul><li><a href="https://www.dzombak.com/blog/2023/12/Consider-the-risks-before-making-any-dramatic-changes-to-your-Raspberry-Pi-setup.html">Consider risks and benefits before applying any invasive intervention</a></li><li><a href="https://www.dzombak.com/blog/2023/12/Remote-logging-for-easier-Raspberry-Pi-debugging.html">Remote logging can help you figure out what went wrong, when something <em>does</em> go wrong</a></li></ul><h2 id="caution-advice-to-avoid"> Caution: Advice to avoid <a href="#caution-advice-to-avoid"></a></h2><p><a href="https://raspberrypi.stackexchange.com/a/186">This Stack Exchange post</a> suggests disabling journaling for the Pi’s filesystem. <strong>Don’t do this.</strong> While this change might reduce SD card wear, it makes your Pi more likely to face filesystem corruption in the event of a crash or power outage. My goal is to make my Pis <em>more</em> reliable, and disabling journaling works against that goal.</p><h2 id="pi-reliability-series-updates"> Pi Reliability Series Updates <a href="#pi-reliability-series-updates"></a></h2><p>Inevitably I’ll come back to the posts linked above with corrections and additions. For the foreseeable future, when this happens, I will:</p><ul><li>Edit the post</li><li>Add a callout in the post noting the date the change was made</li><li>Write a brief post in the Pi Reliability blog series announcing the change, with a link to the edited post</li></ul></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mushroom Sprouting Out of a Living Frog (104 pts)]]></title>
            <link>https://journals.ku.edu/reptilesandamphibians/article/view/20966/19496</link>
            <guid>39407081</guid>
            <pubDate>Sat, 17 Feb 2024 06:59:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://journals.ku.edu/reptilesandamphibians/article/view/20966/19496">https://journals.ku.edu/reptilesandamphibians/article/view/20966/19496</a>, See on <a href="https://news.ycombinator.com/item?id=39407081">Hacker News</a></p>
<div id="readability-page-1" class="page">

		<header>

		<a href="https://journals.ku.edu/reptilesandamphibians/article/view/20966">
			<span>
									Return to Article Details
							</span>
		</a>

		<a href="https://journals.ku.edu/reptilesandamphibians/article/view/20966">
			Mushroom sprouting out of a living frog
		</a>

		<a href="https://journals.ku.edu/reptilesandamphibians/article/download/20966/19496/64783" download="">
			<span>
				Download
			</span>
			<span>
				Download PDF
			</span>
		</a>

	</header>

	

	
	


</div>]]></description>
        </item>
        <item>
            <title><![CDATA[From engineer to manager: what I love, what I hate (272 pts)]]></title>
            <link>https://thoughtspile.github.io/2024/02/16/eng-to-em/</link>
            <guid>39406804</guid>
            <pubDate>Sat, 17 Feb 2024 05:52:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://thoughtspile.github.io/2024/02/16/eng-to-em/">https://thoughtspile.github.io/2024/02/16/eng-to-em/</a>, See on <a href="https://news.ycombinator.com/item?id=39406804">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody"><p>It's been almost 2 years since I moved to a team lead role, then to a full-time engineering management position after the expansion of our team. I've been a front-end developer for 7 years before that, and initially I took the "advanced individual contributor" career track before doing the management turnaround. How's it been? Bumpy, but fun. In this article, I'll share the things I love and hate about my current job.</p><h2>Love</h2><p>Let's start with the positive side of management positions. There's plenty to love, honestly.</p><h3>Impact</h3><p>First things first, I adore the power to improve the product we're building, and the overall team well-being that comes with a management position.</p><p>As an engineer, you'll sometimes find yourself in a tough spot with little to no power to change things. Early morning standups are a chore? Code quality sucks? The new feature makes no sense? As a manager, the power to change is yours: you get both the formal and informal authority to change things for the better, and to make yourself and your team happier.</p><p>Your words have weight. If you, an IC, say "guys, we really should write tests", everybody goes "oh, crazy old Vladimir, all grumpy again, haha, where do you see tests fit here?". If you, an EM, casually say "guys, we really should write tests", you might be surprised to find the tests unexpectedly growing in different places. Pleasant.</p><h3>Career opportunities</h3><p>Being an engineering manager is a more promising career opportunity than an engineering track. This might be controversial, but hear me out:</p><ol><li>The EM is normally higher-paid than the basic team-level engineering grades (junior / middle / senior).</li><li>There <em>are</em> higher IC grades (staff, principal, president of code, whatever) in the EM+ salary bands.</li><li>These staff+ IC jobs are concentrated in larger tech companies, because those have tougher technical challenges. Almost every software team in every company has a leadership position.</li><li>The management career ladder is "taller" than that of ICs. <em>Yes,</em> the chances of becoming a CTO are <em>slim,</em> but it's an opportunity that's just not there for a pure IC with no management experience.</li></ol><p>All in all, I believe the demand for EMs to be steadier than for staff+ engineers, and this path gives you more opportunities at the later stages of your career. On a related note...</p><h3>Transferable skills</h3><p>Management skills are more widely useful than an IC engineering role. A decent front-end engineer with React experience won't have trouble moving to another front-end framework, and can probably transition to a back-end / mobile engineering role with -1 grade (a year handicap or so). That's not bad.</p><p>What roles are available to someone with engineering management experience? First, you can easily take on a team with a wildly different focus — mobile developers, infrastructure, ML engineers. You'd need some time to get up to speed on the big-picture technical struggles of your new team, but most companies would take this shot. If you don't want to be an EM any more, you're well-positioned to move to a project or product management role.</p><p>If the entire tech market falls into decline, many management skills would still work for other industries. While I don't see a big flow of tech managers moving into construction business (tech <em>does</em> pay well), there's one alternate path to consider — entrepreneurship. Involvement with people and business decisions makes for great training before starting your own business.</p><p>So, being a manager gives you quite a bit of career flexibility, and makes you less vulnerable to future technological shifts.</p><h3>Less knowledge rot</h3><p>Suffering from <a href="https://www.smashingmagazine.com/2016/11/not-an-imposter-fighting-front-end-fatigue/" target="_blank" rel="noopener">front-end fatigue?</a> Can't keep up with the newest shiniest frameworks and tools? Management's got you covered!</p><p>The "hot new" agile / kanban / scrum methodologies are 20–30 years old. The basic meeting types (demos, dailies, 1-on-1s) have been developing for centuries. At the core, you have teamwork and human interactions, which haven't changed that much since the beginning of humanity.</p><p>My grandfather was a big railroad boss in the 70s, and we can sensibly discuss some of my work challenges. "Oh, you have this talented slacker? Give him some big important task, let's see what he's worth." When it comes to computers, he's more like "I'd like a shovel big enough to throw all your silly gadgets into stratosphere."</p><p>So, if you're tired of keeping up with the latest hot thing in tech, a management role can provide a well-deserved relief. <em>Do</em> keep an eye on what's happening on the tech side of things, but there's no urgency, and no need to get real deep.</p><h3>New challenges</h3><p>Frankly, after 4–5 years of working in a particular tech area, you can solve the vast majority of practical problems well enough. If you want some work challenge, you can:</p><ol><li>Slightly alter your stack — say, a new FE framework. But it's unlikely to keep you engaged very long.</li><li>Make a broader career shift — e.g. frontend to backend. This would probably give you another couple years of fun, but such transitions are, in my experience, either random (e.g. your BE dev quits and someone has to fill the role), or hit your salary.</li><li>Invent problems out of thin air — rewrite everything using a new library, or handle 9000 RPS "for the future". Fun, but most of the time it's more harm than good for your team and business.</li></ol><p>Of all the possible career moves a seasoned engineer can make, switching to management gives you the most new challenges (years worth of new stuff to learn) without hitting your salary.</p><h2>Hate</h2><p>As much as I like the challenges and impact of my new role, and the practical career benefits, I'll be the first one to admit it has downsides as well.</p><h3>Corporate BS</h3><p>As an engineer, I hated bloody corporate BS: individual performance reviews, useless deadlines, company-enforced restrictions on processes and tech stack. Well, congratulations, as a manager you are the sheriff of these practices, whether you believe in them or not.</p><p>As a leader of a team in an org with performance calibrations, I must nominate 1 person who hasn't been <em>working hard enough</em> every 6 months. This human chess is soul-sucking, but I can't make it go away — if I don't offer a sacrificial teammate, someone will be picked randomly further down the process. Crazy shit.</p><p>Sometimes you can negotiate a bit, or hack the process, e.g. assign "below-expected performance" on a round-robin basis, but to your team you'll sometimes be the <em>corporate monster.</em> Sigh. And I haven't even been through the real tough stuff like layoffs, closures and reorganizations.</p><h3>Awkward social situations</h3><p>I've made it to an engineering management position by being good at building stuff. I've been prepared to help with technical decisions, give career guidance, tune processes and set up automation as needed. In fact, a large portion of my job is debugging social tensions and psychological insecurities of people.</p><p>Your junior engineer comments out a few tests to deploy a feature preview. The QA person sees this, and is very pissed because your whole team apparently does not respect the QA role and the value they provide. Restore trust.</p><p>A project manager makes an unsuccessful joke that hurts your designer, who's now crying. Make the PM apologize. Am I a kindergarten teacher or something?</p><p>Boy, I'm no psychologist, and I can't say I'm exceptionally good with people. This part of my job is quite hard, trying to fake it til I make it here.</p><h3>Office hours</h3><p>Life of an engineer is relatively relaxed. If you don't have anything urgent, you can go lay on the grass for half a day, thinking about the future of your project or something. You can miss a few meetings on short notice, no questions asked.</p><p>Now, you're an EM. Try going and lying on the grass for a few hours. You come back to a messenger full of problems: your intern can't work because she forgot how to npm install; a senior manager wants to discuss some potential feature; release has derailed. Also, you can't really skip a meeting you're supposed to facilitate / organize without some up-front preparation.</p><p>This <em>might</em> improve as your team matures and builds better processes, but in general you feel office hours much more as a manager, and your work-life balance directly depends on how good you are at your job.</p><h3>Long feedback loop</h3><p>The final thing I hate about management is the long feedback loop of your actions. Most engineering tasks show the result quite fast: new features take weeks to months, and if that's too long for you — fix a bug and see happy users the next day, or refactor some code and watch complexity decrease in a few hours. Amazing!</p><p>You're a manager? Well, very few of your actions produce a visible result in under a month. Suppose your team has grown too large, and you want to split it up. You must pick a well-rounded set of engineers for the new team, talk to everybody involved to see how they feel about such a change, arrange new regular meetings, set up processes and communications, do some jira magic, maybe isolate the codebases of sub-products. If you think it can be done in a week, well, you're wrong.</p><p>Then, even the right changes can make things get worse before they get better. Say you're understaffed, and you decide to hire. In the short term, you spend hours and hours interviewing, and a new team member won't get up to speed right away, sucking out precious time for onboarding. It's sometimes hard to see the long-term goal behind the short-term inconvenience.</p><p>So, while engineering problem-solving is often fairly straightforward, management changes are more similar to large-scale refactorings. You won't see any quick improvements, which can be frustrating.</p><hr><p>To sum up, moving from an IC engineering role to a management position has been a rollercoaster ride for me, with both bright and bleak spots. Here's what I love:</p><ul><li>The wider impact on the product and team.</li><li>Management is a great long-term career track: it gives you more job opportunities than a staff+ IC, the flexibility to move between different technical areas and roles, and skills that will be relevant across various industries for years to come.</li><li>If you're bored with your field of tech expertise, moving to a management role is a great way to bring the challenge back into your job.</li></ul><p>And here's what I hate:</p><ul><li>Enforcing corporate decisions and policies can be soul-sucking.</li><li>Dealing with social tensions and psychological insecurities of people isn't something I was ready for.</li><li>It's hard to go offline even for a few hours without preparing in advance.</li><li>Your actions have long and non-linear feedback loops with <em>very</em> delayed gratification.</li></ul><p>Now, is this career move the right one for you? If you enjoy challenge and responsibility, and you get an opportunity — I'd say go for it! Yes, management is not a fit for everybody (I'm not even sure it fits me TBH), but it's a great experience that would surely expand your skill set and make you see engineering work from a new angle. If you totally hate it, you have plenty of time to go back into coding =)</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Progman: X11 WM modeled after Program Manager from the Windows 3 era (189 pts)]]></title>
            <link>https://github.com/jcs/progman</link>
            <guid>39406568</guid>
            <pubDate>Sat, 17 Feb 2024 05:05:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/jcs/progman">https://github.com/jcs/progman</a>, See on <a href="https://news.ycombinator.com/item?id=39406568">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
          <nav aria-label="Global">
            <ul>
                <li>
      
      <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Actions&quot;,&quot;label&quot;:&quot;ref_cta:Actions;&quot;}" href="https://github.com/features/actions">
      
      <div>
        <p>Actions</p><p>
        Automate any workflow
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Packages&quot;,&quot;label&quot;:&quot;ref_cta:Packages;&quot;}" href="https://github.com/features/packages">
      
      <div>
        <p>Packages</p><p>
        Host and manage packages
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Security&quot;,&quot;label&quot;:&quot;ref_cta:Security;&quot;}" href="https://github.com/features/security">
      
      <div>
        <p>Security</p><p>
        Find and fix vulnerabilities
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Codespaces&quot;,&quot;label&quot;:&quot;ref_cta:Codespaces;&quot;}" href="https://github.com/features/codespaces">
      
      <div>
        <p>Codespaces</p><p>
        Instant dev environments
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Copilot&quot;,&quot;label&quot;:&quot;ref_cta:Copilot;&quot;}" href="https://github.com/features/copilot">
      
      <div>
        <p>Copilot</p><p>
        Write better code with AI
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Code review&quot;,&quot;label&quot;:&quot;ref_cta:Code review;&quot;}" href="https://github.com/features/code-review">
      
      <div>
        <p>Code review</p><p>
        Manage code changes
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Issues&quot;,&quot;label&quot;:&quot;ref_cta:Issues;&quot;}" href="https://github.com/features/issues">
      
      <div>
        <p>Issues</p><p>
        Plan and track work
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Discussions&quot;,&quot;label&quot;:&quot;ref_cta:Discussions;&quot;}" href="https://github.com/features/discussions">
      
      <div>
        <p>Discussions</p><p>
        Collaborate outside of code
      </p></div>

    
</a></li>

            </ul>
          </div>
</li>


                <li>
      
      
</li>


                <li>
      
      <div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to GitHub Sponsors&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Sponsors;&quot;}" href="https://github.com/sponsors">
      
      <div>
        <p>GitHub Sponsors</p><p>
        Fund open source developers
      </p></div>

    
</a></li>

            </ul>
          </div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to The ReadME Project&quot;,&quot;label&quot;:&quot;ref_cta:The ReadME Project;&quot;}" href="https://github.com/readme">
      
      <div>
        <p>The ReadME Project</p><p>
        GitHub community articles
      </p></div>

    
</a></li>

            </ul>
          </div>
          
      </div>
</li>


                <li>
    <a data-analytics-event="{&quot;category&quot;:&quot;Header menu top item (logged out)&quot;,&quot;action&quot;:&quot;click to go to Pricing&quot;,&quot;label&quot;:&quot;ref_cta:Pricing;&quot;}" href="https://github.com/pricing">Pricing</a>
</li>

            </ul>
          </nav>

        <div>
                


<qbsearch-input data-scope="repo:jcs/progman" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="9Wswued4vc4EvziRjs1ya8bnN216099sh6XIlddL0M0X-Tpp4LKZmFeg6856cM9jJzMBkUARz9UvucjMwxHrzA" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="jcs/progman" data-current-org="" data-current-owner="jcs" data-logged-in="false" data-copilot-chat-enabled="false" data-blackbird-indexed-repo-csrf="<esi:include src=&quot;/_esi/rails_csrf_token_form_hidden?r=qnTfR9C4uvIkXo7OQBhTLzSnofSYTKEbu5IWfYs504bTgTpXHTFiJBY134hhrnYA8Qo%2BrO6P4f3wogpijwbZrZ5dleYJAe2tQmhURaYUId%2Fgt%2F%2FtGOoMi5iJmUGQz6XbUuQwRzWE6AOnWI02Fyu0TP%2BUClKH9jJB5x1J71eIuztUE0PE4ucctI4BfGHyOugfBASim%2BDGNAHXVRNcfcI7LmDon917smfaT4cvfhcsWaHhsqi2lSuUNUKxbF6zrqQnVxiv12n%2FNEMuW5qfRjVJisO1r06JAOvK3OrUYiv0eV4RhwKJ3nulB4pZu0L4MxXOdl2431UzUe8q%2F0KCPOQPlb9oUzUBVla7QUanxFkQWS9TmXwGnQskQt33oHOHIC0DVEORtq81nyMoS0O7RpIUXUI5N%2Fm7vGLMaaQ9hGwFSWiwQk42xIF%2FqEy8271G%2BOAHi5EVzFrqZEfYDIXLzPVzO627fXQ%2BILpDaDfCEVHMTvTSqaISCXesha36JnUGtTRKFRqZlQqj--kyTa1fZph0EHBraV--A0%2BO6nSjO4agIjdJkuwOpQ%3D%3D&quot; />">
  <div data-modal-dialog-overlay="" data-action="click:qbsearch-input#searchInputContainerClicked">
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true">
      <h2 id="search-suggestions-dialog-header">Search code, repositories, users, issues, pull requests...</h2>
    
</modal-dialog></div>
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>

            <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&amp;source=header-repo&amp;source_repo=jcs%2Fprogman" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/jcs/progman&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="6b97443fba96565013f7daa9e5dbf58c5bef43f73e666ca5b6de35e0cb774d0d" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>;ref_cta:Sign up;ref_loc:header logged out&quot;}">
              Sign up
            </a>
        </p></div>
      </div></div>]]></description>
        </item>
    </channel>
</rss>