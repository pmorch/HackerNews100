<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Fri, 23 Jan 2026 15:30:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Microsoft mishandling example.com (119 pts)]]></title>
            <link>https://tinyapps.org/blog/microsoft-mishandling-example-com.html</link>
            <guid>46731996</guid>
            <pubDate>Fri, 23 Jan 2026 13:04:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tinyapps.org/blog/microsoft-mishandling-example-com.html">https://tinyapps.org/blog/microsoft-mishandling-example-com.html</a>, See on <a href="https://news.ycombinator.com/item?id=46731996">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>


<p><b>TL;DR:</b> Since at least February 2020, Microsoft's <a href="https://learn.microsoft.com/en-us/exchange/architecture/client-access/autodiscover">Autodiscover</a> service has incorrectly routed the IANA-reserved <code>example.com</code> to Sumitomo Electric Industries' mail servers at sei.co.jp, potentially sending test credentials there.</p>

<h2>Problem</h2>

<p>While setting up <code>email@example.com</code> as a dummy account in Outlook (on both Windows and macOS), Outlook consistently auto-configured it to use <code>imapgms.jnet.sei.co.jp</code> (IMAP) and <code>smtpgms.jnet.sei.co.jp</code> (SMTP) despite <code>example.com</code> being an <a href="https://www.iana.org/help/example-domains">IANA-reserved domain</a> that should not resolve to real services.</p>

<p>The same behavior appeared on different machines, profiles, networks, and DNS resolvers, including a newly provisioned <a href="https://www.microsoft.com/en-us/windows-365">Windows 365 Cloud PC</a>:</p>

<p><video controls="" preload="metadata" poster="https://tinyapps.org/screenshots/outlook-sei.png" width="640" height="502" playsinline="">
<source src="https://tinyapps.org/screenshots/outlook-sei.mp4" type="video/mp4">
Your web browser doesn't support embedded video.
</video></p>

<h2>Confirmation</h2>

<h3>DNS verification</h3>

<p>Confirm that <code>example.com</code> has no DNS records pointing to <code>sei.co.jp</code>:</p>

<pre><samp>%</samp><code> dig MX example.com +short</code>
<samp>0 .

%</samp><code> dig CNAME autodiscover.example.com +short</code>
<samp>(no response)

%</samp><code> dig SRV _autodiscover._tcp.example.com +short</code>
<samp>(no response)</samp></pre>

<p>The domain has a null MX record (indicating it doesn't accept email) and no Autodiscover DNS entries, confirming the misconfiguration exists entirely within Microsoft's database.</p>

<h3>Microsoft autodiscover API response</h3>

<p>Microsoft's Autodiscover service misconfiguration can be confirmed via <code>curl -v -u "email@example.com:password" "https://prod.autodetect.outlook.cloud.microsoft/autodetect/detect?app=outlookdesktopBasic"</code>:</p>

<details>
<summary>View full output</summary>
<pre><samp>
* Host prod.autodetect.outlook.cloud.microsoft:443 was resolved.
* IPv6: (none)
* IPv4: 172.169.69.94
*   Trying 172.169.69.94:443...
* Connected to prod.autodetect.outlook.cloud.microsoft (172.169.69.94) port 443
* ALPN: curl offers h2,http/1.1
* (304) (OUT), TLS handshake, Client hello (1):
*  CAfile: /etc/ssl/cert.pem
*  CApath: none
* (304) (IN), TLS handshake, Server hello (2):
* (304) (IN), TLS handshake, Unknown (8):
* (304) (IN), TLS handshake, Certificate (11):
* (304) (IN), TLS handshake, CERT verify (15):
* (304) (IN), TLS handshake, Finished (20):
* (304) (OUT), TLS handshake, Finished (20):
* SSL connection using TLSv1.3 / AEAD-AES256-GCM-SHA384 / [blank] / UNDEF
* ALPN: server accepted h2
* Server certificate:
*  subject: C=US; ST=WA; L=Redmond; O=Microsoft Corporation; CN=autodetect.outlookmobile.com
*  start date: Nov  1 12:31:46 2025 GMT
*  expire date: Jan 30 12:31:46 2026 GMT
*  subjectAltName: host "prod.autodetect.outlook.cloud.microsoft" matched cert's "*.autodetect.outlook.cloud.microsoft"
*  issuer: C=US; O=Microsoft Corporation; CN=Microsoft Azure RSA TLS Issuing CA 03
*  SSL certificate verify ok.
* using HTTP/2
* Server auth using Basic with user 'email@example.com'
* [HTTP/2] [1] OPENED stream for https://prod.autodetect.outlook.cloud.microsoft/autodetect/detect?app=outlookdesktopBasic
* [HTTP/2] [1] [:method: GET]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: prod.autodetect.outlook.cloud.microsoft]
* [HTTP/2] [1] [:path: /autodetect/detect?app=outlookdesktopBasic]
* [HTTP/2] [1] [authorization: Basic ZW1haWxAZXhhbXBsZS5jb206cGFzc3dvcmQ=]
* [HTTP/2] [1] [user-agent: curl/8.7.1]
* [HTTP/2] [1] [accept: */*]
&gt; GET /autodetect/detect?app=outlookdesktopBasic HTTP/2
&gt; Host: prod.autodetect.outlook.cloud.microsoft
&gt; Authorization: Basic ZW1haWxAZXhhbXBsZS5jb206cGFzc3dvcmQ=
&gt; User-Agent: curl/8.7.1
&gt; Accept: */*
&gt; 
* Request completely sent off
&lt; HTTP/2 200 
&lt; content-type: application/json; charset=utf-8
&lt; date: Mon, 08 Dec 2025 21:32:58 GMT
&lt; server: Kestrel
&lt; strict-transport-security: max-age=2592000
&lt; x-olm-source-endpoint: /detect
&lt; x-provider-id: seeatest
&lt; x-debug-support: eyJkZWNpc2lvbiI6ImF1dG9EdjIgPiBhdXRvRHYxID4gZml4ZWQgZGIgcHJvdmlkZXIgPiBmaXhlZCBkYiBkb21haW4gcHJvdG9jb2xzID4gZGIgcHJvdmlkZXIgPiBkYiBkb21haW4gcHJvdG9jb2xzIiwiYXV0b0QiOnsidjIiOm51bGwsInYxIjpudWxsfSwiZGIiOnsicHJvdmlkZXIiOnsiRG9tYWluSWQiOm51bGwsIklkIjoic2VlYXRlc3QiLCJTZXJ2aWNlIjpudWxsLCJQcm90b2NvbHMiOlt7InByb3RvY29sIjoic210cCIsIkRvbWFpbiI6bnVsbCwiSG9zdG5hbWUiOiJzbXRwZ21zLmpuZXQuc2VpLmNvLmpwIiwiUG9ydCI6NDY1LCJFbmNyeXB0aW9uIjoiU3NsIiwiSXNDcm93ZHNvdXJjZWQiOm51bGwsIkZlZWRiYWNrcyI6bnVsbCwiSW5zZWN1cmUiOm51bGwsIlNlY3VyZSI6IlRydWUiLCJVc2VybmFtZSI6IntlbWFpbH0iLCJWYWxpZGF0ZWQiOmZhbHNlLCJBdXRvZGlzY292ZXIiOm51bGwsIkFhZCI6bnVsbH0seyJwcm90b2NvbCI6ImltYXAiLCJEb21haW4iOm51bGwsIkhvc3RuYW1lIjoiaW1hcGdtcy5qbmV0LnNlaS5jby5qcCIsIlBvcnQiOjk5MywiRW5jcnlwdGlvbiI6IlNzbCIsIklzQ3Jvd2Rzb3VyY2VkIjpudWxsLCJGZWVkYmFja3MiOm51bGwsIkluc2VjdXJlIjpudWxsLCJTZWN1cmUiOiJUcnVlIiwiVXNlcm5hbWUiOiJ7ZW1haWx9IiwiVmFsaWRhdGVkIjpmYWxzZSwiQXV0b2Rpc2NvdmVyIjpudWxsLCJBYWQiOm51bGx9XSwiQ3JlYXRlZEF0IjoiMjAyMC0wMi0wM1QwNTozMToyMy4yOTgwMjQ4IiwiVXBkYXRlZEF0IjoiMjAyMC0wMi0wM1QwOToxMjo1OS4wMjQ1ODciLCJQcmVkaWNhdGVzIjpudWxsLCJBdXRvRHYyRW5kcG9pbnQiOm51bGwsIkNvbW1lbnQiOm51bGwsIkZlZWRiYWNrcyI6bnVsbCwiSXNDcm93ZHNvdXJjZWQiOmZhbHNlfSwiZG9tYWluIjp7ImZpeGVkIjpmYWxzZSwiYXV0b0R2MkVuZHBvaW50IjpudWxsLCJwcm92aWRlcklkIjoic2VlYXRlc3QiLCJwcm90b2NvbHMiOm51bGx9fX0=
&lt; x-autodv2-error: ENOTFOUND
&lt; x-feedback-token: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJEIjoiZXhhbXBsZS5jb20iLCJQSSI6InNlZWF0ZXN0IiwiUyI6W10sIlAiOlsiaW1hcHM6Ly9pbWFwZ21zLmpuZXQuc2VpLmNvLmpwOjk5MyIsInNtdHBzOi8vc210cGdtcy5qbmV0LnNlaS5jby5qcDo0NjUiXSwiUFQiOiJpbWFwIHNtdHAiLCJleHAiOjE3NjUyMzMxNzgsImlhdCI6MTc2NTIyOTU3OH0.-ohD7c9hytRZK_b4EJ0M5Tke7hl8u1wjsMYRV71GZik
&lt; x-dns-prefetch-control: off
&lt; x-frame-options: SAMEORIGIN
&lt; x-download-options: noopen
&lt; x-content-type-options: nosniff
&lt; x-xss-protection: 1; mode=block
&lt; x-instance-id: autodetect-deployment-76fffc487d-wfs4b
&lt; x-response-time: 3472 ms
&lt; x-request-id: f1b6525f-6d11-4add-a0e4-0b677d89f9eb
&lt; x-autodetect-cv: f1b6525f-6d11-4add-a0e4-0b677d89f9eb
&lt; 
* Connection #0 to host prod.autodetect.outlook.cloud.microsoft left intact
{"email":"email@example.com","services":[],"protocols":[{"protocol":"imap","hostname":"imapgms.jnet.sei.co.jp","port":993,"encryption":"ssl","username":"email@example.com","validated":false},{"protocol":"smtp","hostname":"smtpgms.jnet.sei.co.jp","port":465,"encryption":"ssl","username":"email@example.com","validated":false}]}%</samp></pre>
</details>

<p>The JSON response:</p>

<pre><samp>{
  "email": "email@example.com",
  "services": [],
  "protocols": [
    {
      "protocol": "imap",
      "hostname": "imapgms.jnet.sei.co.jp",
      "port": 993,
      "encryption": "ssl",
      "username": "email@example.com",
      "validated": false
    },
    {
      "protocol": "smtp",
      "hostname": "smtpgms.jnet.sei.co.jp",
      "port": 465,
      "encryption": "ssl",
      "username": "email@example.com",
      "validated": false
    }
  ]
}</samp></pre>

<h3>Decoded debug header</h3>

<p>The <code>x-debug-support</code> header (Base64-decoded) reveals additional details:</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Provider ID</td>
<td><code>seeatest</code></td>
</tr>
<tr>
<td>Created</td>
<td>2020-02-03 05:31:23 UTC</td>
</tr>
<tr>
<td>Updated</td>
<td>2020-02-03 09:12:59 UTC</td>
</tr>
<tr>
<td>IsCrowdsourced</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>

<p>This misconfiguration has existed for nearly six years and was not crowdsourced. It appears to have been manually added to Microsoft's database.</p>

<h2>Related</h2>

<ul>
<li><p><a href="https://www.akamai.com/blog/security/autodiscovering-the-great-leak">Autodiscovering the Great Leak</a></p></li>
<li><p><a href="https://news.sophos.com/en-us/2021/09/23/how-outlook-autodiscover-could-leak-your-passwords-and-how-to-stop-it/">How Outlook ‚Äúautodiscover‚Äù could leak your passwords ‚Äì and how to stop it</a></p></li>
<li><p><a href="https://c7solutions.com/2021/05/outlook-autodetect-and-broken-autodiscover">Outlook AutoDetect And Broken AutoDiscover</a></p></li>
</ul>
<p>‚ùß 2026-01-01</p>
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[What has Docker become? (112 pts)]]></title>
            <link>https://tuananh.net/2026/01/20/what-has-docker-become/</link>
            <guid>46731748</guid>
            <pubDate>Fri, 23 Jan 2026 12:36:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tuananh.net/2026/01/20/what-has-docker-become/">https://tuananh.net/2026/01/20/what-has-docker-become/</a>, See on <a href="https://news.ycombinator.com/item?id=46731748">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>

    
    
    <h5>
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <rect x="4" y="5" width="16" height="16" rx="2"></rect>
        <line x1="16" y1="3" x2="16" y2="7"></line>
        <line x1="8" y1="3" x2="8" y2="7"></line>
        <line x1="4" y1="11" x2="20" y2="11"></line>
        <rect x="8" y="15" width="2" height="2"></rect>
      </svg>
      Posted on 
  
    January 20, 2026
  


      
        &nbsp;‚Ä¢&nbsp;
      
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <circle cx="12" cy="12" r="9"></circle>
        <polyline points="12 7 12 12 15 15"></polyline>
      </svg>
      4&nbsp;minutes
      &nbsp;‚Ä¢
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"></path>
        <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"></path>
        <line x1="3" y1="6" x2="3" y2="19"></line>
        <line x1="12" y1="6" x2="12" y2="19"></line>
        <line x1="21" y1="6" x2="21" y2="19"></line>
      </svg>
      851&nbsp;words
      
    </h5>
    

    

    <p>It‚Äôs weird to see Docker Inc (the company) struggle to find its place in 2026. What started as the company that revolutionized how we deploy applications has been through multiple identity crises, pivoting from one strategy to another in search of sustainable revenue and market relevance.</p>
<h2 id="the-identity-crisis">The Identity Crisis</h2>
<p>Docker‚Äôs journey reads like a startup trying to find product-market fit, except Docker already had product-market fit - they created the containerization standard that everyone uses. The problem is that Docker the technology became so successful that Docker the company struggled to monetize it. When your core product becomes commoditized and open source, you need to find new ways to add value.</p>
<h2 id="the-swarm-exit">The Swarm Exit</h2>
<p>Docker Swarm was Docker‚Äôs attempt to compete with Kubernetes in the orchestration space. But Kubernetes won that battle decisively, and Docker eventually sold Swarm. This was a clear signal that Docker was stepping back from trying to be the full-stack container platform and instead focusing on what they could uniquely provide.</p>

<p>For a while, Docker seemed to focus on developer experience. This made sense - developers are Docker‚Äôs core users, and improving their workflow could be a differentiator. Docker Scout emerged from the acquisition of Atomist in June 2022, bringing ‚Äúsoftware supply chain‚Äù capabilities. Scout allows Docker to see not just what‚Äôs in a container, but how it was built and where vulnerabilities are. This was a smart move toward security and observability, areas where Docker could add real value.</p>
<p>Docker also acquired AtomicJar, the company behind Testcontainers, adding shift-left testing capabilities. Testcontainers lets developers run real dependencies (databases, message queues, etc.) in containers during testing, making integration tests more reliable and closer to production environments.</p>
<h2 id="the-ai-pivot">The AI Pivot</h2>
<p>Then came the AI pivot. Docker Model Runner entered the scene, positioning Docker as a platform for running AI models. Docker Compose expanded to support AI agents and models. Docker Offload was introduced for cloud-scale GPU execution of AI tasks. Partnerships with Google Cloud, Microsoft Azure, and AI SDKs (CrewAI, LangGraph, Vercel AI SDK) followed.</p>
<p>The acquisition of MCP Defender in September 2025 further cemented Docker‚Äôs move into AI security, focusing on securing agentic AI infrastructure and runtime threat detection. This was a significant shift - from developer tools to AI infrastructure.</p>
<h2 id="the-hardened-images-move">The Hardened Images Move</h2>
<p>Suddenly, Docker moved into the hardened images space. In December 2025, Docker made over 1,000 Docker Hardened Images free and open source under Apache 2.0, reducing vulnerabilities by up to 95% compared to traditional images. This move was likely triggered by Chainguard‚Äôs success in the secure container image space. Chainguard had been building a business around minimal, secure container images, and Docker needed to respond.</p>
<p>Making hardened images free was a bold move - it‚Äôs hard to compete with free, especially when it‚Äôs open source. But it also raises questions about Docker‚Äôs business model. If you‚Äôre giving away your security features for free, what are you selling?</p>
<h2 id="leadership-changes-and-acquisition-speculation">Leadership Changes and Acquisition Speculation</h2>
<p>In February 2025, Docker replaced CEO Scott Johnston (who led the company since 2019) with Don Johnson, a former Oracle Cloud Infrastructure founder and executive vice president. This leadership transition has prompted tech analysts to anticipate a potential acquisition by a major cloud provider. The CEO swap, combined with the strategic pivots, suggests Docker may be positioning itself for sale rather than building a standalone business.</p>
<h2 id="what-this-all-means">What This All Means</h2>
<p>Docker‚Äôs strategic shifts tell a story of a company searching for its place in a market it helped create. The containerization technology Docker pioneered became so successful that it became infrastructure - something everyone uses but no one wants to pay for directly.</p>
<p>The pivots from orchestration (Swarm) to developer tools (Scout, Testcontainers) to AI (Model Runner, MCP Defender) to security (Hardened Images) show a company trying different approaches to find sustainable revenue. Each pivot makes sense in isolation, but together they paint a picture of a company without a clear long-term vision.</p>
<p>The hardened images move is particularly interesting because it‚Äôs defensive - responding to Chainguard‚Äôs success rather than leading with innovation. Making it free and open source is a strong competitive move, but it doesn‚Äôt solve the fundamental business model question.</p>
<h2 id="the-future">The Future</h2>
<p>Docker the technology isn‚Äôt going anywhere. It‚Äôs too embedded in the infrastructure of modern software development. But Docker the company? That‚Äôs less clear. The leadership change, acquisition speculation, and rapid strategic pivots suggest Docker Inc may be positioning itself for an exit rather than building a long-term independent business.</p>
<p>For developers, this doesn‚Äôt change much. Docker containers will continue to work, and the open source nature of Docker means the technology will persist regardless of what happens to the company. But it‚Äôs worth watching how Docker Inc‚Äôs search for identity plays out - it could affect the ecosystem of tools and services built around containers.</p>
<p>The irony is that Docker created a standard so successful that it became infrastructure, and infrastructure is hard to monetize. Docker Inc‚Äôs struggle to find its place is a cautionary tale about the challenges of building a business around open source technology that becomes too successful.</p>

  </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Booting from a vinyl record (2020) (119 pts)]]></title>
            <link>https://boginjr.com/it/sw/dev/vinyl-boot/</link>
            <guid>46730885</guid>
            <pubDate>Fri, 23 Jan 2026 10:39:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://boginjr.com/it/sw/dev/vinyl-boot/">https://boginjr.com/it/sw/dev/vinyl-boot/</a>, See on <a href="https://news.ycombinator.com/item?id=46730885">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
		<main id="main" role="main">

			
<article id="post-2871">

	

	
	<div>
		<p>Most PCs tend to boot from a primary media storage, be it a hard disk drive, or a solid-state drive, perhaps from a network, or ‚Äì if all else fails ‚Äì the USB stick or the boot DVD comes to the rescue‚Ä¶ Fun, eh? Boring! Why don‚Äôt we try to boot from a record player for a change?<span id="more-2871"></span></p>
<p><a href="https://boginjr.com/wp-content/uploads/vinyl-boot1-scaled.jpg"><img fetchpriority="high" decoding="async" src="https://boginjr.com/wp-content/uploads/vinyl-boot1-1024x576.jpg" alt="" width="1024" height="576" srcset="https://boginjr.com/wp-content/uploads/vinyl-boot1-1024x576.jpg 1024w, https://boginjr.com/wp-content/uploads/vinyl-boot1-300x169.jpg 300w, https://boginjr.com/wp-content/uploads/vinyl-boot1-768x432.jpg 768w, https://boginjr.com/wp-content/uploads/vinyl-boot1-1536x864.jpg 1536w, https://boginjr.com/wp-content/uploads/vinyl-boot1-2048x1152.jpg 2048w" sizes="(max-width: 1024px) 100vw, 1024px"></a><strong>64 512 byte DOS boot disk on a 10‚Ä≥ record, total playing time 06:10 on 45 rpm<br>
</strong></p>
<p><strong><u>Update February 2022</u></strong>: Click <a href="https://www.facebook.com/groups/IBMPCjr/posts/1592474927753981/" target="_blank" rel="noopener">here</a> to observe the very same vinyl ramdisk <a href="https://boginjr.com/electronics/old/ibm4860/">booted on an IBM PCjr</a>!<br>
So this nutty little experiment connects a PC, <a href="https://boginjr.com/electronics/old/ibm5150/">or an IBM PC to be exact</a>, directly onto a record player through an amplifier. I made a small ROM on-chip boot loader that operates the built-in ‚Äúcassette interface‚Äù of the PC (that was hardly ever used), which will now be invoked by the BIOS if all the other boot options fail, i.e. floppy disk and the hard drive. The turntable spins an analog recording of a small bootable read-only RAM drive, which is 64K in size. This contains a FreeDOS kernel, modified by me to cram it into the memory constraint, a micro variant of COMMAND.COM and a patched version of INTERLNK, that allows file transfer through a printer cable, modified to be runnable on FreeDOS. The bootloader reads the disk image from the audio recording through the cassette modem, loads it to memory and boots the system on it. Simple huh?</p>
<p><a href="https://boginjr.com/wp-content/uploads/vinyl-boot3.png"><img decoding="async" src="https://boginjr.com/wp-content/uploads/vinyl-boot3.png" alt="" width="771" height="574" srcset="https://boginjr.com/wp-content/uploads/vinyl-boot3.png 771w, https://boginjr.com/wp-content/uploads/vinyl-boot3-300x223.png 300w, https://boginjr.com/wp-content/uploads/vinyl-boot3-768x572.png 768w" sizes="(max-width: 771px) 100vw, 771px"></a><strong>The vinyl loader code, in a ROM</strong><br>
<strong>(It can also reside on a hard drive or a floppy, but that‚Äôd be cheating)</strong></p>
<p>And now to get more technical: this is basically a merge between <a href="https://boginjr.com/it/sw/dev/bootlpt-86/">BootLPT/86</a> and <a href="https://boginjr.com/it/sw/dev/5150caxx/">5150CAXX</a>, minus the printer port support. It also resides in a ROM, in the BIOS expansion socket, but it does not have to. The connecting cable between the PC and the record player amplifier is the same as with 5150CAXX, just without the line-in (PC data out) jack.<br>
The ‚Äúcassette interface‚Äù itself is just <a href="https://www.minuszerodegrees.net/5150/misc/5150_post_test_131.jpg" target="_blank" rel="noopener noreferrer">PC speaker</a> timer channel 2 for the output, and 8255A-5 PPI port C channel 4 (PC4, I/O port 62h bit 4) for the input. BIOS INT 15h routines are used for software (de)modulation.<br>
The boot image is the same 64K BOOTDISK.IMG ‚Äúexample‚Äù RAM drive that can be downloaded at the bottom of the BootLPT article. This has been turned into an ‚ÄúIBM cassette tape‚Äù-protocol compliant audio signal using 5150CAXX, and sent straight to a record cutting lathe.<br>
Vinyls are cut with an RIAA equalization curve that a preamp usually reverses during playback, but not perfectly. So some signal correction had to be applied from the amplifier, as I couldn‚Äôt make it work right with the line output straight from the phono preamp. In my case, involving a vintage Harman&amp;Kardon 6300 amplifier with an integrated MM phono preamp, I had to fade the treble all the way down to -10dB/10kHz, increase bass equalization to approx. +6dB/50Hz and reduce the volume level to approximately 0.7 volts peak, so it doesn‚Äôt distort. All this, naturally, with any phase and loudness correction turned off.<br>
Of course, the cassette modem does not give a hoot in hell about where the signal is coming from. Notwithstanding, the recording needs to be pristine and contain no pops or loud crackles (vinyl) or modulation/frequency drop-outs (tape) that will break the data stream from continuing. However, some wow is tolerated, and the speed can be 2 or 3 percent higher or lower too.</p>
<p><a href="https://boginjr.com/wp-content/uploads/vinyl-boot2.jpg"><img decoding="async" src="https://boginjr.com/wp-content/uploads/vinyl-boot2-1014x1024.jpg" alt="" width="1014" height="1024" srcset="https://boginjr.com/wp-content/uploads/vinyl-boot2-1014x1024.jpg 1014w, https://boginjr.com/wp-content/uploads/vinyl-boot2-297x300.jpg 297w, https://boginjr.com/wp-content/uploads/vinyl-boot2-150x150.jpg 150w, https://boginjr.com/wp-content/uploads/vinyl-boot2-768x776.jpg 768w, https://boginjr.com/wp-content/uploads/vinyl-boot2.jpg 1400w" sizes="(max-width: 1014px) 100vw, 1014px"></a><strong>Bootloader in a ROM; being an EPROM for a good measure</strong></p>
<p>And that‚Äôs it! For those interested, the bootloader binary designed for a 2364 chip (2764s can be used, through an adaptor), can be obtained <a href="https://boginjr.com/apps/vinyl-boot/BootVinyl.bin">here</a>. It assumes an IBM 5150 with a monochrome screen and at least 512K of RAM, which kind of reminds me of my setup (what a coincidence). The boot disk image can be obtained at the bottom of the BootLPT/86 article, and <a href="https://boginjr.com/misc/bootdisk.flac">here‚Äôs its analog variant</a>, straight from the grooves üôÇ</p>
<p><iframe loading="lazy" src="https://www.youtube.com/embed/bqz65_YfcJg" width="640" height="360" frameborder="0" allowfullscreen="allowfullscreen"><span style="display: inline-block; width: 0px; overflow: hidden; line-height: 0;" data-mce-type="bookmark" class="mce_SELRES_start">Ôªø</span></iframe></p>
</div><!-- .entry-content -->

	</article>

<!-- .comments-area -->
		</main><!-- .site-main -->
		
<!-- .sidebar .widget-area -->
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Ghostty's AI Policy (341 pts)]]></title>
            <link>https://github.com/ghostty-org/ghostty/blob/main/AI_POLICY.md</link>
            <guid>46730504</guid>
            <pubDate>Fri, 23 Jan 2026 09:50:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/ghostty-org/ghostty/blob/main/AI_POLICY.md">https://github.com/ghostty-org/ghostty/blob/main/AI_POLICY.md</a>, See on <a href="https://news.ycombinator.com/item?id=46730504">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            


<react-partial partial-name="marketing-navigation" data-ssr="true" data-attempted-ssr="true" data-react-profiling="true">
  
  
  <div data-target="react-partial.reactRoot"><nav aria-label="Global"><ul><li><div><ul><li><div><p><span>AI CODE CREATION</span></p><ul><li><a href="https://github.com/features/copilot" data-analytics-event="{&quot;action&quot;:&quot;github_copilot&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;github_copilot_link_platform_navbar&quot;}"><div><p><span>GitHub Copilot</span><span>Write better code with AI</span></p></div></a></li><li><a href="https://github.com/features/spark" data-analytics-event="{&quot;action&quot;:&quot;github_spark&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;github_spark_link_platform_navbar&quot;}"><div><p><span>GitHub Spark</span><span>Build and deploy intelligent apps</span></p></div></a></li><li><a href="https://github.com/features/models" data-analytics-event="{&quot;action&quot;:&quot;github_models&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;github_models_link_platform_navbar&quot;}"><div><p><span>GitHub Models</span><span>Manage and compare prompts</span></p></div></a></li><li><a href="https://github.com/mcp" data-analytics-event="{&quot;action&quot;:&quot;mcp_registry&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;mcp_registry_link_platform_navbar&quot;}"><div><p><span>MCP Registry<sup>New</sup></span><span>Integrate external tools</span></p></div></a></li></ul></div></li><li><div><p><span>DEVELOPER WORKFLOWS</span></p><ul><li><a href="https://github.com/features/actions" data-analytics-event="{&quot;action&quot;:&quot;actions&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;actions_link_platform_navbar&quot;}"><div><p><span>Actions</span><span>Automate any workflow</span></p></div></a></li><li><a href="https://github.com/features/codespaces" data-analytics-event="{&quot;action&quot;:&quot;codespaces&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;codespaces_link_platform_navbar&quot;}"><div><p><span>Codespaces</span><span>Instant dev environments</span></p></div></a></li><li><a href="https://github.com/features/issues" data-analytics-event="{&quot;action&quot;:&quot;issues&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;issues_link_platform_navbar&quot;}"><div><p><span>Issues</span><span>Plan and track work</span></p></div></a></li><li><a href="https://github.com/features/code-review" data-analytics-event="{&quot;action&quot;:&quot;code_review&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;code_review_link_platform_navbar&quot;}"><div><p><span>Code Review</span><span>Manage code changes</span></p></div></a></li></ul></div></li><li><div><p><span>APPLICATION SECURITY</span></p><ul><li><a href="https://github.com/security/advanced-security" data-analytics-event="{&quot;action&quot;:&quot;github_advanced_security&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;github_advanced_security_link_platform_navbar&quot;}"><div><p><span>GitHub Advanced Security</span><span>Find and fix vulnerabilities</span></p></div></a></li><li><a href="https://github.com/security/advanced-security/code-security" data-analytics-event="{&quot;action&quot;:&quot;code_security&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;code_security_link_platform_navbar&quot;}"><div><p><span>Code security</span><span>Secure your code as you build</span></p></div></a></li><li><a href="https://github.com/security/advanced-security/secret-protection" data-analytics-event="{&quot;action&quot;:&quot;secret_protection&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;secret_protection_link_platform_navbar&quot;}"><div><p><span>Secret protection</span><span>Stop leaks before they start</span></p></div></a></li></ul></div></li><li><div><p><span>EXPLORE</span></p><ul><li><a href="https://github.com/why-github" data-analytics-event="{&quot;action&quot;:&quot;why_github&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;why_github_link_platform_navbar&quot;}"><span>Why GitHub</span></a></li><li><a href="https://docs.github.com/" data-analytics-event="{&quot;action&quot;:&quot;documentation&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;documentation_link_platform_navbar&quot;}" target="_blank" rel="noreferrer"><span>Documentation</span></a></li><li><a href="https://github.blog/" data-analytics-event="{&quot;action&quot;:&quot;blog&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;blog_link_platform_navbar&quot;}" target="_blank" rel="noreferrer"><span>Blog</span></a></li><li><a href="https://github.blog/changelog" data-analytics-event="{&quot;action&quot;:&quot;changelog&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;changelog_link_platform_navbar&quot;}" target="_blank" rel="noreferrer"><span>Changelog</span></a></li><li><a href="https://github.com/marketplace" data-analytics-event="{&quot;action&quot;:&quot;marketplace&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;marketplace_link_platform_navbar&quot;}"><span>Marketplace</span></a></li></ul></div></li></ul><p><a href="https://github.com/features" data-analytics-event="{&quot;action&quot;:&quot;view_all_features&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;platform&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;view_all_features_link_platform_navbar&quot;}"><span>View all features</span></a></p></div></li><li><div><ul><li><div><p><span>BY COMPANY SIZE</span></p><ul><li><a href="https://github.com/enterprise" data-analytics-event="{&quot;action&quot;:&quot;enterprises&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;enterprises_link_solutions_navbar&quot;}"><span>Enterprises</span></a></li><li><a href="https://github.com/team" data-analytics-event="{&quot;action&quot;:&quot;small_and_medium_teams&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;small_and_medium_teams_link_solutions_navbar&quot;}"><span>Small and medium teams</span></a></li><li><a href="https://github.com/enterprise/startups" data-analytics-event="{&quot;action&quot;:&quot;startups&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;startups_link_solutions_navbar&quot;}"><span>Startups</span></a></li><li><a href="https://github.com/solutions/industry/nonprofits" data-analytics-event="{&quot;action&quot;:&quot;nonprofits&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;nonprofits_link_solutions_navbar&quot;}"><span>Nonprofits</span></a></li></ul></div></li><li><div><p><span>BY USE CASE</span></p><ul><li><a href="https://github.com/solutions/use-case/app-modernization" data-analytics-event="{&quot;action&quot;:&quot;app_modernization&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;app_modernization_link_solutions_navbar&quot;}"><span>App Modernization</span></a></li><li><a href="https://github.com/solutions/use-case/devsecops" data-analytics-event="{&quot;action&quot;:&quot;devsecops&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;devsecops_link_solutions_navbar&quot;}"><span>DevSecOps</span></a></li><li><a href="https://github.com/solutions/use-case/devops" data-analytics-event="{&quot;action&quot;:&quot;devops&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;devops_link_solutions_navbar&quot;}"><span>DevOps</span></a></li><li><a href="https://github.com/solutions/use-case/ci-cd" data-analytics-event="{&quot;action&quot;:&quot;ci/cd&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;ci/cd_link_solutions_navbar&quot;}"><span>CI/CD</span></a></li><li><a href="https://github.com/solutions/use-case" data-analytics-event="{&quot;action&quot;:&quot;view_all_use_cases&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;view_all_use_cases_link_solutions_navbar&quot;}"><span>View all use cases</span></a></li></ul></div></li><li><div><p><span>BY INDUSTRY</span></p><ul><li><a href="https://github.com/solutions/industry/healthcare" data-analytics-event="{&quot;action&quot;:&quot;healthcare&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;healthcare_link_solutions_navbar&quot;}"><span>Healthcare</span></a></li><li><a href="https://github.com/solutions/industry/financial-services" data-analytics-event="{&quot;action&quot;:&quot;financial_services&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;financial_services_link_solutions_navbar&quot;}"><span>Financial services</span></a></li><li><a href="https://github.com/solutions/industry/manufacturing" data-analytics-event="{&quot;action&quot;:&quot;manufacturing&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;manufacturing_link_solutions_navbar&quot;}"><span>Manufacturing</span></a></li><li><a href="https://github.com/solutions/industry/government" data-analytics-event="{&quot;action&quot;:&quot;government&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;government_link_solutions_navbar&quot;}"><span>Government</span></a></li><li><a href="https://github.com/solutions/industry" data-analytics-event="{&quot;action&quot;:&quot;view_all_industries&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;view_all_industries_link_solutions_navbar&quot;}"><span>View all industries</span></a></li></ul></div></li></ul><p><a href="https://github.com/solutions" data-analytics-event="{&quot;action&quot;:&quot;view_all_solutions&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;solutions&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;view_all_solutions_link_solutions_navbar&quot;}"><span>View all solutions</span></a></p></div></li><li><div><ul><li><div><p><span>EXPLORE BY TOPIC</span></p><ul><li><a href="https://github.com/resources/articles?topic=ai" data-analytics-event="{&quot;action&quot;:&quot;ai&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;ai_link_resources_navbar&quot;}"><span>AI</span></a></li><li><a href="https://github.com/resources/articles?topic=software-development" data-analytics-event="{&quot;action&quot;:&quot;software_development&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;software_development_link_resources_navbar&quot;}"><span>Software Development</span></a></li><li><a href="https://github.com/resources/articles?topic=devops" data-analytics-event="{&quot;action&quot;:&quot;devops&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;devops_link_resources_navbar&quot;}"><span>DevOps</span></a></li><li><a href="https://github.com/resources/articles?topic=security" data-analytics-event="{&quot;action&quot;:&quot;security&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;security_link_resources_navbar&quot;}"><span>Security</span></a></li><li><a href="https://github.com/resources/articles" data-analytics-event="{&quot;action&quot;:&quot;view_all_topics&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;view_all_topics_link_resources_navbar&quot;}"><span>View all topics</span></a></li></ul></div></li><li><div><p><span>EXPLORE BY TYPE</span></p><ul><li><a href="https://github.com/customer-stories" data-analytics-event="{&quot;action&quot;:&quot;customer_stories&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;customer_stories_link_resources_navbar&quot;}"><span>Customer stories</span></a></li><li><a href="https://github.com/resources/events" data-analytics-event="{&quot;action&quot;:&quot;events__webinars&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;events__webinars_link_resources_navbar&quot;}"><span>Events &amp; webinars</span></a></li><li><a href="https://github.com/resources/whitepapers" data-analytics-event="{&quot;action&quot;:&quot;ebooks__reports&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;ebooks__reports_link_resources_navbar&quot;}"><span>Ebooks &amp; reports</span></a></li><li><a href="https://github.com/solutions/executive-insights" data-analytics-event="{&quot;action&quot;:&quot;business_insights&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;business_insights_link_resources_navbar&quot;}"><span>Business insights</span></a></li><li><a href="https://skills.github.com/" data-analytics-event="{&quot;action&quot;:&quot;github_skills&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;github_skills_link_resources_navbar&quot;}" target="_blank" rel="noreferrer"><span>GitHub Skills</span></a></li></ul></div></li><li><div><p><span>SUPPORT &amp; SERVICES</span></p><ul><li><a href="https://docs.github.com/" data-analytics-event="{&quot;action&quot;:&quot;documentation&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;documentation_link_resources_navbar&quot;}" target="_blank" rel="noreferrer"><span>Documentation</span></a></li><li><a href="https://support.github.com/" data-analytics-event="{&quot;action&quot;:&quot;customer_support&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;customer_support_link_resources_navbar&quot;}" target="_blank" rel="noreferrer"><span>Customer support</span></a></li><li><a href="https://github.com/orgs/community/discussions" data-analytics-event="{&quot;action&quot;:&quot;community_forum&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;community_forum_link_resources_navbar&quot;}"><span>Community forum</span></a></li><li><a href="https://github.com/trust-center" data-analytics-event="{&quot;action&quot;:&quot;trust_center&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;trust_center_link_resources_navbar&quot;}"><span>Trust center</span></a></li><li><a href="https://github.com/partners" data-analytics-event="{&quot;action&quot;:&quot;partners&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;resources&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;partners_link_resources_navbar&quot;}"><span>Partners</span></a></li></ul></div></li></ul></div></li><li><div><ul><li><div><p><span>COMMUNITY</span></p><ul><li><a href="https://github.com/sponsors" data-analytics-event="{&quot;action&quot;:&quot;github_sponsors&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;github_sponsors_link_open_source_navbar&quot;}"><div><p><span>GitHub Sponsors</span><span>Fund open source developers</span></p></div></a></li></ul></div></li><li><div><p><span>PROGRAMS</span></p><ul><li><a href="https://securitylab.github.com/" data-analytics-event="{&quot;action&quot;:&quot;security_lab&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;security_lab_link_open_source_navbar&quot;}" target="_blank" rel="noreferrer"><span>Security Lab</span></a></li><li><a href="https://maintainers.github.com/" data-analytics-event="{&quot;action&quot;:&quot;maintainer_community&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;maintainer_community_link_open_source_navbar&quot;}" target="_blank" rel="noreferrer"><span>Maintainer Community</span></a></li><li><a href="https://github.com/accelerator" data-analytics-event="{&quot;action&quot;:&quot;accelerator&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;accelerator_link_open_source_navbar&quot;}"><span>Accelerator</span></a></li><li><a href="https://archiveprogram.github.com/" data-analytics-event="{&quot;action&quot;:&quot;archive_program&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;archive_program_link_open_source_navbar&quot;}" target="_blank" rel="noreferrer"><span>Archive Program</span></a></li></ul></div></li><li><div><p><span>REPOSITORIES</span></p><ul><li><a href="https://github.com/topics" data-analytics-event="{&quot;action&quot;:&quot;topics&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;topics_link_open_source_navbar&quot;}"><span>Topics</span></a></li><li><a href="https://github.com/trending" data-analytics-event="{&quot;action&quot;:&quot;trending&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;trending_link_open_source_navbar&quot;}"><span>Trending</span></a></li><li><a href="https://github.com/collections" data-analytics-event="{&quot;action&quot;:&quot;collections&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;open_source&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;collections_link_open_source_navbar&quot;}"><span>Collections</span></a></li></ul></div></li></ul></div></li><li><div><ul><li><div><p><span>ENTERPRISE SOLUTIONS</span></p><ul><li><a href="https://github.com/enterprise" data-analytics-event="{&quot;action&quot;:&quot;enterprise_platform&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;enterprise&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;enterprise_platform_link_enterprise_navbar&quot;}"><div><p><span>Enterprise platform</span><span>AI-powered developer platform</span></p></div></a></li></ul></div></li><li><div><p><span>AVAILABLE ADD-ONS</span></p><ul><li><a href="https://github.com/security/advanced-security" data-analytics-event="{&quot;action&quot;:&quot;github_advanced_security&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;enterprise&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;github_advanced_security_link_enterprise_navbar&quot;}"><div><p><span>GitHub Advanced Security</span><span>Enterprise-grade security features</span></p></div></a></li><li><a href="https://github.com/features/copilot/copilot-business" data-analytics-event="{&quot;action&quot;:&quot;copilot_for_business&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;enterprise&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;copilot_for_business_link_enterprise_navbar&quot;}"><div><p><span>Copilot for Business</span><span>Enterprise-grade AI features</span></p></div></a></li><li><a href="https://github.com/premium-support" data-analytics-event="{&quot;action&quot;:&quot;premium_support&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;enterprise&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;premium_support_link_enterprise_navbar&quot;}"><div><p><span>Premium Support</span><span>Enterprise-grade 24/7 support</span></p></div></a></li></ul></div></li></ul></div></li><li><a href="https://github.com/pricing" data-analytics-event="{&quot;action&quot;:&quot;pricing&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;context&quot;:&quot;pricing&quot;,&quot;location&quot;:&quot;navbar&quot;,&quot;label&quot;:&quot;pricing_link_pricing_navbar&quot;}"><span>Pricing</span></a></li></ul></nav></div>
</react-partial>



        <div>
                


<qbsearch-input data-scope="repo:ghostty-org/ghostty" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="0o-awbvCHG04NJnTBLEIYrVwciebnz4qpU4tCL8sPd11Cs03s84KA0ac0eLpW4ohovqia6rBRdsMgbY8bpWJnQ" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="ghostty-org/ghostty" data-current-org="ghostty-org" data-current-owner="" data-logged-in="false" data-copilot-chat-enabled="false" data-nl-search-enabled="false" data-retain-scroll-position="true">
  <div data-modal-dialog-overlay="" data-action="click:qbsearch-input#searchInputContainerClicked">
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true">
      <h2 id="search-suggestions-dialog-header">Search code, repositories, users, issues, pull requests...</h2>
    
</modal-dialog></div>
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
        
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        <div data-view-component="true">        <!-- '"` --><!-- </textarea></xmp> --><form id="code-search-feedback-form" data-turbo="false" action="/search/feedback" accept-charset="UTF-8" method="post">
          <p>We read every piece of feedback, and take your input very seriously.</p>
          
          
          <label for="include_email">Include my email address so I can be contacted</label>
</form></div>
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>


            <div>
              <p><a href="https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fghostty-org%2Fghostty%2Fblob%2Fmain%2FAI_POLICY.md" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/ghostty-org/ghostty/blob/main/AI_POLICY.md&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="7f08c68bb6ec2531fb91786272506511bb85846fb65ced228964488b31ca7ee9" data-analytics-event="{&quot;category&quot;:&quot;Marketing nav&quot;,&quot;action&quot;:&quot;click to go to homepage&quot;,&quot;label&quot;:&quot;ref_page:Marketing;ref_cta:Sign in;ref_loc:Header&quot;}">
                Sign in
              </a>
            </p></div>

              <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&amp;source=header-repo&amp;source_repo=ghostty-org%2Fghostty" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/ghostty-org/ghostty/blob/main/AI_POLICY.md&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="7f08c68bb6ec2531fb91786272506511bb85846fb65ced228964488b31ca7ee9" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>/blob/show;ref_cta:Sign up;ref_loc:header logged out&quot;}">
                Sign up
              </a></p><p>
    <react-partial-anchor>
      <tool-tip id="tooltip-8188e74f-d232-42b1-9fec-37658ed788ef" for="icon-button-51200e0b-d2f0-48ed-bc8f-fc039a588a85" popover="manual" data-direction="s" data-type="label" data-view-component="true">Appearance settings</tool-tip>

      <template data-target="react-partial-anchor.template">
        <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-react.272733bb6899c5359cf5.module.css">
<link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/appearance-settings.753d458774a2f782559b.module.css">

<react-partial partial-name="appearance-settings" data-ssr="false" data-attempted-ssr="false" data-react-profiling="true">
  
  <script type="application/json" data-target="react-partial.embeddedData">{"props":{}}</script>
  <div data-target="react-partial.reactRoot"></div>
</react-partial>


      </template>
    </react-partial-anchor>
  </p>

          </div>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Google is ending full-web search for niche search engines (140 pts)]]></title>
            <link>https://programmablesearchengine.googleblog.com/</link>
            <guid>46730436</guid>
            <pubDate>Fri, 23 Jan 2026 09:38:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://programmablesearchengine.googleblog.com/">https://programmablesearchengine.googleblog.com/</a>, See on <a href="https://news.ycombinator.com/item?id=46730436">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><span itemprop="datePublished">
Tuesday, January 20, 2026
</span>
</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Replacing Protobuf with Rust to go 5 times faster (104 pts)]]></title>
            <link>https://pgdog.dev/blog/replace-protobuf-with-rust</link>
            <guid>46730214</guid>
            <pubDate>Fri, 23 Jan 2026 09:03:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pgdog.dev/blog/replace-protobuf-with-rust">https://pgdog.dev/blog/replace-protobuf-with-rust</a>, See on <a href="https://news.ycombinator.com/item?id=46730214">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        
        <p><strong>Jan 22nd, 2026</strong><br>Lev Kokotov</p>
       <p>PgDog is a proxy for scaling PostgreSQL. Under the hood, we use <a href="https://github.com/pganalyze/libpg_query/"><code>libpg_query</code></a> to parse and understand SQL queries. Since PgDog is written in Rust, we use its <a href="https://github.com/pganalyze/pg_query.rs/">Rust bindings</a> to interface with the core C library. 
Those bindings use Protobuf (de)serialization to work uniformly across different programming languages, e.g., the popular Ruby <em>pg_query</em> gem.</p>

<p>Protobuf is fast, but not using Protobuf is faster. We forked <em>pg_query.rs</em> and replaced Protobuf with direct C-to-Rust (and back to C) bindings, using bindgen and Claude-generated wrappers. This resulted in a 5x improvement in parsing queries, and a 10x improvement in deparsing (Postgres AST to SQL string conversion).</p>

<h5 id="results">Results</h5>

<p>You can reproduce these by cloning <a href="https://github.com/pgdogdev/pg_query.rs">our fork</a> and running the benchmark <a href="https://github.com/pgdogdev/pg_query.rs/blob/f5a92bf9ed87ebe60c444f64ccb7a40397a31bcc/tests/raw_parse_tests.rs">tests</a>:</p>

<table>
  <thead>
    <tr>
      <th>Function</th>
      <th>Queries per second</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>pg_query::parse</code> (Protobuf)</td>
      <td>613</td>
    </tr>
    <tr>
      <td><code>pg_query::parse_raw</code> (Direct C to Rust)</td>
      <td>3357 (5.45x faster)</td>
    </tr>
    <tr>
      <td><code>pg_query::deparse</code> (Protobuf)</td>
      <td>759</td>
    </tr>
    <tr>
      <td><code>pg_query::deparse_raw</code> (Direct Rust to C)</td>
      <td>7319 (9.64x faster)</td>
    </tr>
  </tbody>
</table>

<h3 id="the-process">The process</h3>

<p>The first step is always profiling. We use <a href="https://github.com/mstange/samply">samply</a>, which integrates nicely with the Firefox profiler. Samply is a sampling profiler: it measures how much time code spends running CPU instructions in each function. It works by inspecting the application call stack thousands of times per second. The more time is spent inside a particular function (or span, as they are typically called), the slower that code is. This is how we discovered <code>pg_query_parse_protobuf</code>:</p>

<center>
    <img src="https://pgdog.dev/assets/images/pg_query_parse_protobuf.png" width="95%" height="auto" alt="Parameters everywhere">
</center>

<p>This is the entrypoint to the <code>libpg_query</code> C library, used by all <em>pg_query</em> bindings. The function that wraps the actual Postgres parser, <code>pg_query_raw_parse</code>, barely registered on the flame graph. Parsing queries isn‚Äôt free, but the Postgres parser itself is very quick and has been optimized for a long time. With the hot spot identified, our first instinct was to do nothing and just add a cache.</p>

<h4 id="caching-mostly-works">Caching mostly works</h4>

<p>Caching is a trade-off between memory and CPU utilization, and memory is relatively cheap (latest DRAM crunch notwithstanding). The cache is mutex-protected, uses the LRU algorithm and is backed by a hashmap<sup id="fnref:1"><a href="#fn:1" rel="footnote" role="doc-noteref">1</a></sup>. The query text is the key and the Abstract Syntax Tree is the value, which expects most apps to use prepared statements. The query text contains placeholders instead of actual values and is therefore reusable, for example:</p>

<div><pre><code><span>SELECT</span> <span>*</span> <span>FROM</span> <span>users</span> <span>WHERE</span> <span>id</span> <span>=</span> <span>$</span><span>1</span><span>;</span>
</code></pre></div>

<p>While the <code>id</code> parameter can change between invocations, the prepared statement does not, so we could cache its static AST in memory.</p>

<p>This works pretty well, but eventually we ran into a couple of issues:</p>

<ol>
  <li>Some ORMs can have bugs that generate thousands of unique statements, e.g., <code>value IN ($1, $2, $3)</code> instead of <code>value = ANY($1)</code>, which causes a lot of cache misses</li>
  <li>Applications use old PostgreSQL client drivers which don‚Äôt support prepared statements, e.g., Python‚Äôs <code>psycopg2</code> package</li>
</ol>

<p>The clock on Protobuf was ticking and we needed to act. So, like a lot of engineers these days, we asked an LLM to just do it for us.</p>

<h4 id="tight-constraints">Tight constraints</h4>

<p>I‚Äôm going to preface this section by saying that the vast majority of PgDog‚Äôs source code is written by a human. AI is not in a position to one-shot a connection pooler, load balancer and database sharder. However, when scoped to a very specific, well-defined and most importantly <em>machine-verifiable</em> task, it can work really well.</p>

<p>The prompt we started with was pretty straightforward:</p>

<blockquote>
  <p><em>libpg_query is a library that wraps the PostgreSQL parser in an API. pg_query.rs is a Rust wrapper around libpg_query which uses Protobuf for (de)serialization. Replace Protobuf with bindgen-generated Rust structs that map directly to the Postgres AST.</em></p>
</blockquote>

<p>And after two days of back and forth between us and the machine, it worked. We ended up with 6,000 lines of recursive Rust that manually mapped C types and structs to Rust structs, and vice versa. We made the switch for <a href="https://docs.rs/pg_query/latest/pg_query/fn.parse.html"><code>parse</code></a>, <a href="https://docs.rs/pg_query/latest/pg_query/fn.deparse.html"><code>deparse</code></a> (used in our new query rewrite engine, which we‚Äôll talk about in another post), <a href="https://docs.rs/pg_query/latest/pg_query/fn.fingerprint.html"><code>fingerprint</code></a> and <a href="https://docs.rs/pg_query/latest/pg_query/fn.scan.html"><code>scan</code></a>. These four methods are heavily used in PgDog to make sharding work, and we immediately saw a 25% improvement in <em>pgbench</em> benchmarks<sup id="fnref:2"><a href="#fn:2" rel="footnote" role="doc-noteref">2</a></sup>.</p>

<p>Just to be clear: we had a lot of things going for us already that made this possible. First, <em>pg_query</em> has a Protobuf spec for <em>protoc</em> (and Prost, the Protobuf Rust implementation) to generate bindings, so Claude was able to get a comprehensive list of structs it needed to extract from C, along with the expected data types.</p>

<p>Second, <em>pg_query.rs</em> was already using bindgen, so we had to just copy/paste some invocations around to get the AST structs included in bindgen‚Äôs output.</p>

<p>And last, and definitely not least, <em>pg_query.rs</em> already had a working <code>parse</code> and <code>deparse</code> implementation, so we could test our AI-generated code against its output. This was entirely automated and verifiable: for each test case that used <code>parse</code>, we included a call to <code>parse_raw</code>, compared their results and if they differed by even one byte, Claude Code had to go back and try again.</p>

<h4 id="the-implementation">The implementation</h4>

<p>The translation code between Rust and C uses <code>unsafe</code> Rust functions that wrap Rust structs to C structs. The C structs are then passed to the Postgres/<em>libpg_query</em> C API which does the actual work of building the AST.</p>

<p>The result is converted back to Rust using a recursive algorithm: each node in the AST has its own converter function which accepts an <code>unsafe</code> C pointer and returns a safe Rust struct. Much like the name suggests, the AST is a tree, which is stored in an array:</p>

<div><pre><code><span>unsafe</span> <span>fn</span> <span>convert_list_to_raw_stmts</span><span>(</span>
    <span>list</span><span>:</span> <span>*</span><span>mut</span> <span>bindings_raw</span><span>::</span><span>List</span>
<span>)</span> <span>-&gt;</span> <span>Vec</span><span>&lt;</span><span>protobuf</span><span>::</span><span>RawStmt</span><span>&gt;</span> <span>{</span>
    <span>// C-to-Rust conversion.</span>
<span>}</span>
</code></pre></div>

<p>For each node in the list, the implementation calls <code>convert_node</code>, which then handles each one of the 100s of tokens available in the SQL grammar:</p>

<div><pre><code><span>unsafe</span> <span>fn</span> <span>convert_node</span><span>(</span>
    <span>node_ptr</span><span>:</span> <span>*</span><span>mut</span> <span>bindings_raw</span><span>::</span><span>Node</span>
<span>)</span> <span>-&gt;</span> <span>Option</span><span>&lt;</span><span>protobuf</span><span>::</span><span>Node</span><span>&gt;</span> <span>{</span>
    <span>// This is basically C in Rust, so we better check for nulls!</span>
    <span>if</span> <span>node_ptr</span><span>.is_null</span><span>()</span> <span>{</span>
        <span>return</span> <span>None</span><span>;</span>
    <span>}</span>

    <span>match</span> <span>(</span><span>*</span><span>node_ptr</span><span>)</span><span>.type_</span> <span>{</span>
        <span>// SELECT statement root node.</span>
        <span>bindings_raw</span><span>::</span><span>NodeTag_T_SelectStmt</span> <span>=&gt;</span> <span>{</span>
            <span>let</span> <span>stmt</span> <span>=</span> <span>node_ptr</span> <span>as</span> <span>*</span><span>mut</span> <span>bindings_raw</span><span>::</span><span>SelectStmt</span><span>;</span>
            <span>Some</span><span>(</span><span>protobuf</span><span>::</span><span>node</span><span>::</span><span>Node</span><span>::</span><span>SelectStmt</span><span>(</span><span>Box</span><span>::</span><span>new</span><span>(</span><span>convert_select_stmt</span><span>(</span><span>&amp;*</span><span>stmt</span><span>))))</span>
        <span>}</span>
        
        <span>// INSERT statement root node.</span>
        <span>bindings_raw</span><span>::</span><span>NodeTag_T_InsertStmt</span> <span>=&gt;</span> <span>{</span>
            <span>let</span> <span>stmt</span> <span>=</span> <span>node_ptr</span> <span>as</span> <span>*</span><span>mut</span> <span>bindings_raw</span><span>::</span><span>InsertStmt</span><span>;</span>
            <span>Some</span><span>(</span><span>protobuf</span><span>::</span><span>node</span><span>::</span><span>Node</span><span>::</span><span>InsertStmt</span><span>(</span><span>Box</span><span>::</span><span>new</span><span>(</span><span>convert_insert_stmt</span><span>(</span><span>&amp;*</span><span>stmt</span><span>))))</span>
        <span>}</span>
        
        <span>// ... 100s more nodes.</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>For nodes that contain other nodes, we recurse on <code>convert_node</code> again until the algorithm reaches the leaves (nodes with no children) and terminates. For nodes that contain scalars, like a number (e.g., <code>5</code>) or text (e.g., <code>'hello world'</code>), the data type is copied into a Rust analog, e.g., <code>i32</code> or <code>String</code>.</p>

<p>The end result is <a href="https://docs.rs/pg_query/latest/pg_query/protobuf/struct.ParseResult.html"><code>protobuf::ParseResult</code></a>, a Rust struct generated by Prost from the <em>pg_query</em> API Protobuf specification, but populated by native Rust code instead of Prost‚Äôs deserializer. Reusing existing structs reduces the chance of errors considerably: we can compare <code>parse</code> and <code>parse_raw</code> outputs, using the derived <code>PartialEq</code> trait, and ensure that both are identical, in testing.</p>

<p>While recursive algorithms have a questionable reputation in the industry because bad ones can cause stack overflows, they are very fast. Recursion requires no additional memory allocation because all of its working space, the stack, is created on program startup. It also has excellent CPU cache locality because the instructions for the next invocation of the same function are already in the CPU L1/L2/L3 cache. Finally and arguably more importantly, they are just easier to read and understand than iterative implementations, which helps us, the humans, with debugging.</p>

<p>Just for good measure, we tried generating an iterative algorithm, but it ended up being slower than Prost. The main cause (we think) was unnecessary memory allocations, hashmap lookups of previously converted nodes, and too much overhead from walking the tree several times. Meanwhile, recursion processes each AST node exactly once and uses the stack pointer to track its position in the tree. If you have any ideas on how to make an iterative algorithm work better, <a href="https://discord.gg/CcBZkjSJdd">let us know</a>!</p>

<h3 id="closing-thoughts">Closing thoughts</h3>

<p>Reducing the overhead from using the Postgres parser in PgDog makes a huge difference for us. As a network proxy, our budget for latency, memory utilization, and CPU cycles is low. After all, we aren‚Äôt a real database‚Ä¶yet! This change improves performance from two angles: we use less CPU and we do less work, so PgDog is faster and cheaper to run.</p>

<p>If stuff like this is interesting to you, <a href="https://pgdog.dev/cdn-cgi/l/email-protection#48202108382f2c272f662c2d3e">reach out</a>. We are looking for a Founding Software Engineer to help us grow and build the next iteration of horizontal scaling for PostgreSQL.</p>



    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Proton Spam and the AI Consent Problem (300 pts)]]></title>
            <link>https://dbushell.com/2026/01/22/proton-spam/</link>
            <guid>46729368</guid>
            <pubDate>Fri, 23 Jan 2026 07:01:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://dbushell.com/2026/01/22/proton-spam/">https://dbushell.com/2026/01/22/proton-spam/</a>, See on <a href="https://news.ycombinator.com/item?id=46729368">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

<p data-speech-synth="none">

<time datetime="2026-01-22T10:00:00.000Z">

Thursday

22 <abbr title="January">Jan</abbr>
2026
</time>




</p>


<p>On Jan 14th <a href="https://proton.me/" rel="noopener noreferrer" target="_blank">Proton</a> sent out an email newsletter with the subject line:</p><blockquote><p>Introducing Projects - Try Lumo‚Äôs powerful new feature now</p></blockquote><figure><img src="https://dbushell.com/images/blog/2026/lumo-spam.avif" alt="screenshot of the official email from @lumo.proton.me" width="515" height="367" decoding="async" fetchpriority="low" loading="lazy" id="--img-f8a652e2"><p popover="" id="--alt-f8a652e2" data-anchor="--img-f8a652e2">screenshot of the official email from @lumo.proton.me</p></figure><p>Lumo is Proton‚Äôs <glossary-term id="--term-ai"><a href="https://pivot-to-ai.com/" rel="noopener noreferrer" target="_blank">‚ÄúAI‚Äù</a></glossary-term> offering.</p><p>There is a problem with this email. And I‚Äôm not talking about the question of how exactly AI aligns with Proton‚Äôs core values of <em>privacy</em> and <em>security</em>.</p><p>The problem is I had already <strong>explicitly</strong> opted out of Lumo emails.</p><figure><img src="https://dbushell.com/images/blog/2026/lumo-opt-out.avif" alt="screenshot of an unchecked toggle" width="235" height="55" decoding="async" fetchpriority="low" loading="lazy" id="--img-d9cc8beb"><p popover="" id="--alt-d9cc8beb" data-anchor="--img-d9cc8beb">screenshot of an unchecked toggle</p></figure><p>That toggle for ‚ÄúLumo product updates‚Äù is unchecked. Lumo is the only topic I‚Äôm not subscribed to. Proton has over a dozen newsletters, including some crypto nonsense. I opt-in to everything but Lumo, I gave an undeniable <strong>no</strong> to Lumo emails.</p><p>So the email I received from Proton is <strong>spam</strong>, right?</p><p>My understanding is that spam is a violation of GDPR and UK data protection laws. Regardless, Proton‚Äôs email is a clear abuse of their own service towards a paying business customer.</p><p>Before I grab my pitchfork I emailed Proton support.</p><h2 id="proton-support">Proton Support</h2><p>Despite the subject line and contents, and despite the ‚ÄúFrom Lumo‚Äù name and <code>@lumo.proton.me</code> address, maybe this was an honest mistake?</p><p>Proton‚Äôs first reply explained how to opt-out.</p><figure><img src="https://dbushell.com/images/blog/2026/proton-support-1.avif" alt="screenshot of support email quoted below" width="460" height="614" decoding="async" fetchpriority="low" loading="lazy" id="--img-c8d2e805"><p popover="" id="--alt-c8d2e805" data-anchor="--img-c8d2e805">screenshot of support email quoted below</p><figcaption>I‚Äôve blurred the name because whatever</figcaption></figure><blockquote><p>Hello David,</p><p>Thank you for contacting us.</p><p>You can unsubscribe from the newsletters if you do the following:</p><p>- Log in to your account at https://account.protonvpn.com/login</p><p>- Navigate to the Account category</p><p>- Disable the check-marks under ‚ÄúEmail subscriptions‚Äù</p><p>- If you need additional assistance, let me know.</p><p>[screenshot of the same opt-out toggle]</p><p>-Have a nice day.</p></blockquote><p><em>John Support</em> directs me to the exact same <em>‚ÄúLumo product updates‚Äù</em> toggle I had already unchecked. I replied explaining that I had <strong>already</strong> opted out. Support replies saying they‚Äôre <em>‚Äúchecking this with the team‚Äù</em> then later replies again asking for screenshots.</p><blockquote><p>Can you make sure to send me a screenshot of this newsletter option disabled, as well as the date when the last message was sent to you regarding the Lumo offer?</p><p>You can send me a screenshot of the whole message, including the date.</p><p>Is it perhaps 14 January 2026 that you received the message?</p></blockquote><p>I found that last line curious, are they dealing with other unhappy customers? Maybe I‚Äôm reading too much into it.</p><p>I sent the screenshots and signed off with <em>‚ÄúDon‚Äôt try to pretend this fits into another newsletter category.‚Äù</em></p><p>After more <em>‚Äúchecking this with the team‚Äù</em> I got a response today.</p><blockquote><p>In this case, the mentioned newsletter is for promoting Lumo Business Suit to Business-related plans.</p><p>Hence, why you received it, as Product Updates and Email Subscription are two different things.</p><p>In the subscription section, you will see the ‚ÄúEmail Subscription‚Äù category, where you can disable the newsletter in order to avoid getting it in the future.</p></blockquote><p>If I understand correctly, Proton are claiming this email is the <em>‚ÄúProton for Business newsletter‚Äù</em>. Not the <em>‚ÄúLumo product updates‚Äù</em> newsletter.</p><p>I don‚Äôt know about you, but I think that‚Äôs baloney. Proton Support had five full business days to come up with a better excuse. Please tell me, how can I have been any more explicit about opting out of Lumo emails, only to receive ‚ÄúTry Lumo‚Äù ‚ÄúFrom Lumo‚Äù, and be told that is not actually a Lumo email?</p><h2 id="non-consent">Non-Consent</h2><p>Has anyone else noticed that the AI industry can‚Äôt take ‚Äúno‚Äù for an answer? AI is being force-fed into every corner of tech. It‚Äôs unfathomable to them that some of us aren‚Äôt interested.</p><p>The entire AI industry is built upon a common principle of non-consent. They laugh in the face of IP and copyright law. AI bots <a href="https://adactio.com/journal/21831" rel="noopener noreferrer" target="_blank">DDoS websites</a> and <a href="https://rknight.me/blog/perplexity-ai-is-lying-about-its-user-agent/" rel="noopener noreferrer" target="_blank">lie about user-agents</a>. Can it get worse than the <a href="https://www.bbc.co.uk/news/articles/cwy875j28k0o" rel="noopener noreferrer" target="_blank">sickening actions of Grok?</a> I dread to think.</p><p>As Proton has demonstrated above, and <a href="https://dbushell.com/notes/2026-01-12T07:49Z/">Mozilla/Firefox</a> recently too, the AI industry simply will not accept ‚Äúno‚Äù as an answer. Some examples like spam are more trivial than others, but the growing trend is vile and disturbing.</p><p>I do not want your AI.</p><h3 id="update-for-23rd-january">Update for 23rd January</h3><p>I guess someone at Microsoft read my post and said ‚Äúhold my beer‚Äù. This morning I woke up to a lovely gift in my inbox; <em>‚ÄúBuild Al agents with the new GitHub Copilot SDK‚Äù</em>.</p><figure><img src="https://dbushell.com/images/blog/2026/github-spam.avif" alt="GitHub email subject line: 'Build Al agents with the new GitHub Copilot SDK'" width="474" height="68" decoding="async" fetchpriority="low" loading="lazy" id="--img-b61aec8e"><p popover="" id="--alt-b61aec8e" data-anchor="--img-b61aec8e">GitHub email subject line: 'Build Al agents with the new GitHub Copilot SDK'</p></figure><p><a href="https://dbushell.com/2025/08/11/github-ensloppification/">GitHub Ensloppification</a> is moving faster than I can delete my account for good. (It‚Äôs an unfortunate requirement for client projects.) For the record, I have <em>never</em> said ‚Äúyes‚Äù to any GitHub newsletter. Even before Copilot I disabled every possible GitHub email notification.</p><p>The ‚ÄúUnsubscribe‚Äù link provides the hidden newsletter list. There is nothing within GitHub account settings I can find to disable spam.</p><figure><img src="https://dbushell.com/images/blog/2026/github-newsletters.avif" alt="GitHub 'Opt-Out Preferences' with 3 newsletters unchecked but GitHub Copilot emails checked" width="524" height="814" decoding="async" fetchpriority="low" loading="lazy" id="--img-c9841fd3"><p popover="" id="--alt-c9841fd3" data-anchor="--img-c9841fd3">GitHub 'Opt-Out Preferences' with 3 newsletters unchecked but GitHub Copilot emails checked</p></figure><p>As expected, Microsoft has opted me in without my consent. The wheels are falling off at GitHub. The brutally slow front-end UI. The embarrassingly lacklustre <em>Actions</em> CI. Now this sloppy tripe everywhere. Reminder to developers: <strong>GitHub is not Git.</strong></p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I built a light that reacts to radio waves [video] (307 pts)]]></title>
            <link>https://www.youtube.com/watch?v=moBCOEiqiPs</link>
            <guid>46728808</guid>
            <pubDate>Fri, 23 Jan 2026 05:34:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.youtube.com/watch?v=moBCOEiqiPs">https://www.youtube.com/watch?v=moBCOEiqiPs</a>, See on <a href="https://news.ycombinator.com/item?id=46728808">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[United States Completes WHO Withdrawal (102 pts)]]></title>
            <link>https://www.hhs.gov/press-room/united-states-completes-who-withdrawal.html</link>
            <guid>46728680</guid>
            <pubDate>Fri, 23 Jan 2026 05:10:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.hhs.gov/press-room/united-states-completes-who-withdrawal.html">https://www.hhs.gov/press-room/united-states-completes-who-withdrawal.html</a>, See on <a href="https://news.ycombinator.com/item?id=46728680">Hacker News</a></p>
Couldn't get https://www.hhs.gov/press-room/united-states-completes-who-withdrawal.html: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Talking to LLMs has improved my thinking (130 pts)]]></title>
            <link>https://philipotoole.com/why-talking-to-llms-has-improved-my-thinking/</link>
            <guid>46728197</guid>
            <pubDate>Fri, 23 Jan 2026 03:52:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://philipotoole.com/why-talking-to-llms-has-improved-my-thinking/">https://philipotoole.com/why-talking-to-llms-has-improved-my-thinking/</a>, See on <a href="https://news.ycombinator.com/item?id=46728197">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto" data-message-author-role="assistant" data-message-id="88fb0f9f-17c0-4b02-9e59-71e7a735549b" data-message-model-slug="gpt-5-2">
<p data-start="334" data-end="419"><img decoding="async" src="https://philipotoole.com/wp-content/uploads/2015/02/Searching-512-150x150.png" alt="" width="150" height="150" srcset="https://philipotoole.com/wp-content/uploads/2015/02/Searching-512-150x150.png 150w, https://philipotoole.com/wp-content/uploads/2015/02/Searching-512-300x300.png 300w, https://philipotoole.com/wp-content/uploads/2015/02/Searching-512.png 512w" sizes="(max-width: 150px) 100vw, 150px">I‚Äôve been surprised by one aspect of using large language models more than any other.</p>
<p data-start="421" data-end="634">They often put into words things I have long understood, but could not write down clearly. When that happens, it feels less like learning something new and more like recognition. A kind of ‚Äúyes, that‚Äôs it‚Äù moment.</p>
<p data-start="636" data-end="775">I have not seen this effect discussed much, but I think it matters. I also think it has improved how <strong>I</strong> think.</p>

<h2 data-start="636" data-end="775">Much of what we know is tacit</h2>
<p data-start="777" data-end="860">As <a href="https://philipotoole.com/resume/">programmers and developers</a>, we build up a lot of understanding that never quite becomes explicit.</p>
<p data-start="862" data-end="1068">You know when a design is wrong before you can say why. You <a href="https://philipotoole.com/how-i-found-a-bug-in-sqlite/">sense a bug</a> before you can reproduce it. You recognize a bad abstraction instantly, even if it takes an hour to explain the problem to someone else.</p>
<p data-start="1070" data-end="1275">This is not a failure. It is how experience operates. The brain compresses experience into patterns that are efficient for action, not for speech. Those patterns are real, but they are not stored in sentences.</p>
<p data-start="1277" data-end="1466">The problem is that reflection, planning, and teaching all require language. If you cannot express an idea, you cannot easily inspect it or improve it.</p>
<h2 data-start="1277" data-end="1466">LLMs are good at the opposite problem</h2>
<p data-start="1468" data-end="1537">Large language models are built to do exactly this ‚Äì turn vague structure into words.</p>
<p data-start="1539" data-end="1737">When you ask a good question and the response resonates, the model is not inventing insight. It is mapping a latent structure to language in a way that happens to align with your own internal model.</p>
<p data-start="1739" data-end="1875">That alignment is what produces the sense of recognition. I already had the shape of the idea. The model supplied a clean verbal form.</p>
<h2 data-start="1877" data-end="2043">Putting things into words changes the thought</h2>
<p data-start="2045" data-end="2105">Once an idea is written down, it becomes easier to work with.</p>
<p data-start="2107" data-end="2275">Vague intuitions turn into named distinctions. Implicit assumptions become visible. At that point you can test them, negate them, or refine them.</p>
<p data-start="2277" data-end="2471">This is not new. Writing has always done this for me. What is different is the speed. I can probe half-formed thoughts, discard bad formulations, and try again without much friction. That encourages a kind of thinking I might have otherwise skipped.</p>
<h2 data-start="2473" data-end="2559">The feedback loop matters</h2>
<p data-start="2561" data-end="2645">After you see a good articulation of an idea, you start thinking with that style of language.</p>
<p data-start="2647" data-end="2828">Over time I‚Äôve noticed that now I do this without an LLM to hand.&nbsp; Can I phrase in precise language what I am thinking, feeling, believing, right now, and why.</p>
<p data-start="2830" data-end="3103">In that sense, the model is not improving my thinking directly. It is improving the interface between my thinking and language. Since reasoning depends heavily on what one can represent explicitly, that improvement can feel like a real increase in clarity.</p>
<p data-start="3262" data-end="3408" data-is-last-node="" data-is-only-node="">The more I do this, the better I get at noticing what I actually think.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[U.S. Formally Withdraws from World Health Organization (108 pts)]]></title>
            <link>https://www.nytimes.com/2026/01/22/us/politics/united-states-withdraws-world-health-organization.html</link>
            <guid>46727669</guid>
            <pubDate>Fri, 23 Jan 2026 02:37:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nytimes.com/2026/01/22/us/politics/united-states-withdraws-world-health-organization.html">https://www.nytimes.com/2026/01/22/us/politics/united-states-withdraws-world-health-organization.html</a>, See on <a href="https://news.ycombinator.com/item?id=46727669">Hacker News</a></p>
Couldn't get https://www.nytimes.com/2026/01/22/us/politics/united-states-withdraws-world-health-organization.html: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Bugs Apple Loves (826 pts)]]></title>
            <link>https://www.bugsappleloves.com</link>
            <guid>46727587</guid>
            <pubDate>Fri, 23 Jan 2026 02:24:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bugsappleloves.com">https://www.bugsappleloves.com</a>, See on <a href="https://news.ycombinator.com/item?id=46727587">Hacker News</a></p>
<div id="readability-page-1" class="page">
    <!-- Hero Section -->
    <section>
        
        <p>Why else would they keep them around for so long?</p>
    </section>

    <!-- Total Impact Counter -->
    <div>
            <p>Total time wasted by humanity because Apple won't fix these</p>
            <p id="total-time">Calculating...</p>
            <p>and counting</p>
        </div>

    <!-- Methodology Section -->
    <div>
            <h2>The Formula</h2>
            <p>Every bug is different. But the math is always real.<br><strong>Think our numbers are wrong? Edit them yourself.</strong></p>

            <div>
                <div>
                    <h3>Base Impact</h3>
                    <p><code>Users Affected √ó Frequency √ó Time Per Incident</code></p><p>How many Apple users hit this bug, how often, and how long they suffer each time.</p>
                </div>

                <div>
                    <h3>Power User Tax</h3>
                    <p><code>Œ£ (Workaround Time √ó Participation Rate)</code></p><p>The extra time spent by people who try to fix what Apple won't.</p>
                </div>

                <div>
                    <h3>Shame Multiplier</h3>
                    <p><code>Years Unfixed √ó Pressure Factor</code></p><p>How long Apple has known about this and how urgent the task usually is.</p>
                </div>

                <div>
                    <h3>The Verdict</h3>
                    <p><code>Human Hours Wasted √∑ Engineering Hours to Fix</code></p><p>How many times over Apple could have fixed it with the productivity they've destroyed.</p>
                </div>
            </div>
        </div>

    <!-- Bugs Container -->
    <main id="bugs-container">
        <!-- Bugs will be rendered here by JavaScript -->
        <p>Loading Apple's bugs<span></span></p>
    </main>

    <!-- Footer -->
    

    
    


</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Stunnel (101 pts)]]></title>
            <link>https://www.stunnel.org/</link>
            <guid>46726916</guid>
            <pubDate>Fri, 23 Jan 2026 00:30:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.stunnel.org/">https://www.stunnel.org/</a>, See on <a href="https://news.ycombinator.com/item?id=46726916">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
            <p><strong>Stunnel is a proxy designed to add TLS encryption functionality to existing clients and servers without any changes in the programs' code.</strong>
Its <a href="https://www.stunnel.org/features.html">architecture</a> is optimized for security, portability, and scalability (including load-balancing), making it suitable for large deployments.</p>

<p>Stunnel uses the <a href="https://www.openssl.org/">OpenSSL</a> library for cryptography, so it supports whatever cryptographic algorithms are compiled into the library. It can benefit from the <a href="https://csrc.nist.gov/projects/cryptographic-module-validation-program/certificate/4282">FIPS 140-2</a> validation of the OpenSSL FIPS Provider, as long as the building process meets the <a href="https://csrc.nist.gov/CSRC/media/projects/cryptographic-module-validation-program/documents/security-policies/140sp4282.pdf">OpenSSL FIPS 140-2 Security Policy</a>.  Our latest Windows installer includes the OpenSSL FIPS Provider.</p>

<p>Stunnel is a free software authored by <a href="https://mike.mirt.net/">Micha≈Ç Trojnara</a>. Although distributed under <a href="https://www.stunnel.org/COPYING.html">GNU GPL version 2 or later with OpenSSL exception</a>, stunnel is not a community project. We retain the copyright of the source code. Please <a href="https://www.stunnel.org/contact.html">contact us</a> for commercial support or non-GPL licenses. Free, community-based support is also available via <a href="https://www.stunnel.org/lists.html">stunnel-users</a> mailing list.</p>

<div>
    <div id="support-box">
        <p><img src="https://www.stunnel.org/img/support-icon.png" alt="Support">
        </p><p>We offer commercial support with several levels of response time up to 24/7/365 helpline.</p>
        
    </div>
    <div id="downloads-box">
        <p><img src="https://www.stunnel.org/img/download-icon.png" alt="Downloads">
        </p><p>Download latest version of stunnel and try it out yourself.</p>
        
    </div>
</div>

        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why medieval city-builder video games are historically inaccurate (2020) (181 pts)]]></title>
            <link>https://www.leidenmedievalistsblog.nl/articles/why-medieval-city-builder-video-games-are-historically-inaccurate</link>
            <guid>46726857</guid>
            <pubDate>Fri, 23 Jan 2026 00:22:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.leidenmedievalistsblog.nl/articles/why-medieval-city-builder-video-games-are-historically-inaccurate">https://www.leidenmedievalistsblog.nl/articles/why-medieval-city-builder-video-games-are-historically-inaccurate</a>, See on <a href="https://news.ycombinator.com/item?id=46726857">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>This blog post explores the historical accuracy of medieval city-builder video games.</p><div>
            <h3><strong>Introduction</strong></h3><p>Since many of us are working from home in these trying times, it seems safe to assume that more people than ever are indulging in playing the occasional computer game. A city builder is a specific kind of computer game in which you design a city, extract resources, set up production chains and ensure that your settlement grows. City builders are very similar to strategy games as they reward patience and strategy. In this article, I will take a look at one sub-genre of the city builder, the medieval city builder, and explain how this gaming genre relates to our knowledge of medieval settlement planning.</p><h3><strong>Historical city builders</strong></h3><p>The city builder has its origins far back in the 1990s in the combination of the strategy genre and the management genre, leading to games such as <em>Sim City</em> (1989), <em>Caesar </em>(1992) and <em>Age of Empires</em> (1997).</p>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fulllandscape/PAK.GameBlog1.png" alt="PAK Game Blog1">
												   <figcaption>Screenshot: Caesar (1992)</figcaption>
							</figure>
	   						
                  <p>It did not take long before medieval-themed city builders popped up. We may think of <em>Settlers</em> (1993) and <em>Knights and Merchants</em> (1998). In addition, the <em>Anno</em> games (1998-2019), although initially set in the 1600s basically had a medieval theme.</p>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fulllandscape/PAK.GameBlog2.png" alt="PAK Game Blog2">
												   <figcaption>Screenshot: Knights and Merchants (1998)</figcaption>
							</figure>
	   						
                  <p>These games often start with plopping down a village center on a promising location near abundant resources. You then continue to gather these resources which grant you building materials for building new homes and facilities for your settlement.</p>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fulllandscape/PAK.GameBlog3.png" alt="PAK Game Blog3">
												   <figcaption>Screenshot: Settlers (1993)</figcaption>
							</figure>
	   						
                  <p>Setting up specialized production chains might involve growing grain, milling the grain for flour and turning the flour into bread which feeds your villages. Similarly, another production chain might involve rearing sheep for their wool, turning the wool into cloth and turning the cloth into clothing. When done correctly, the reward of correct investments and planning is that you see your settlement grow.</p>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fullportrait/PAK.GameBlog4.png" alt="PAK Game Blog4">
												   <figcaption>Screenshot: Anno 1404 (2009)</figcaption>
							</figure>
	   						
                  <p>This often leads to settlements growing organically from a couple of houses around a community center to a larger settlement with hundreds of people. However logical such an organic growth of a settlement might seem, it is not historically accurate.</p>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fulllandscape/PAK.GameBlog5.png" alt="PAK Game Blog5">
												   <figcaption>Screenshot: Foundation (2019)</figcaption>
							</figure>
	   						
                  <h3><strong>Medieval village life <br></strong></h3><div><p>Any gameplay loop that tells a story of linear settlement growth is incongruent with how a medieval economy worked (see Foussier 2004). Medieval villagers were often living on the edge of subsistence. Agricultural surpluses were skimmed by the church and the feudal lords. Bad harvests, banditry, warfare and disease might decimate a village community at any time. For this very reason, the demography of many European villages remained relatively stable between the twelfth and the eighteenth century. It may therefore be clear that the gameplay loop of city builders pivots around the concept of doing the historically exceptional (i.e. growing a settlement to a town) and thereby strays far from what actually happened in the lives of our medieval forebears. </p><p>A notable exception to this genre trope is the game <em>Banished </em>(2014) in which high mortality rates and bad weather do seriously stifle any kind of linear growth. In this city builder you are constantly fighting the odds and settlement growth is not guaranteed. However, also in Banished it is your goal to overcome the stagnation and lead your settlement to expansion.</p></div>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_rightlandscape/PAK.GameBlog6.png" alt="PAK Game Blog6">
												   <figcaption>Screenshot: Banished (2014)</figcaption>
							</figure>
	   						
                  <p>A thing that is rarely touched upon in medieval city builders is how complex village life actually was. This can be exemplified by how the community related to its overlords. Land ownership here is key. Land in the community might be owned by a lord, a local liegeman, a monastery or even directly by the duke or count. Taxes, rents and tithes were the organisational structures in which the landowner was tied to the farmers who worked the fields. Often the payment of taxes and tithes was linked to feast days and the visit of the tax collector represented a big event in the agricultural year. An interesting side note is that some obligations which the commoners had to the lord and the church (such as seigneurial duties like working a mill) might drain the community from the needed manpower for tilling the land. Furthermore, a rural community that was its own seigneury had access to a law court with sheriff, aldermen and a local militia (Middle Dutch <em>schutterie</em>) to fight off bandits with. Harsh capital punishments were set in place to deter anyone from raiding the farms and hamlets and the village gallows were often the first thing one saw when approaching a medieval settlement. </p><h3><strong>Planning a medieval settlement</strong></h3><p>But something that is much more fundamental to the theme of a settlement building game, is how medieval settlements were actually planned and grew. Landscape historians and archaeologists have acquired a lot of insight into how this worked.</p><p>Let's start with the realization that medieval settlements in their first stages of development were planned and laid out according to a specific design. In my own research into the settlement history of West-Brabant (southern Netherlands, from 1000 to 1300 CE) I have encountered the following types.</p><p>Here is a sketch of a Brabantine circular manor (Middle Dutch <em>vroonhoeve</em>). This is a reinforced circular homestead with moat, often next to a bend in the river, containing several farms and a fan-like plot pattern radiating out from it. Such manors were often called BORCH.</p>
                        						<figure id="10615">
									<a href="#PAK Game Blog7"><img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fulllandscape/PAK.GameBlog7.png" alt="PAK Game Blog7"></a>
					<a href="#8237" id="PAK Game Blog7">
						<img src="https://www.leidenmedievalistsblog.nl/images/uploads/PAK.GameBlog7.png" alt="PAK Game Blog7">
					</a>
												   <figcaption>Sketch of a Brabantine street settlement</figcaption>
							</figure>
	   						
                  <p>Here is a sketch of a Brabantine street settlement, often built with exploitation of nearby fenland in mind. It consists of a line of farms with associated evenly sized rectangular plots built in a line perpendicular to a raised road.</p>
                        						<figure id="10615">
									<a href="#PAK Game Blog8"><img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fulllandscape/PAK.GameBlog8.png" alt="PAK Game Blog8"></a>
					<a href="#8238" id="PAK Game Blog8">
						<img src="https://www.leidenmedievalistsblog.nl/images/uploads/PAK.GameBlog8.png" alt="PAK Game Blog8">
					</a>
												   <figcaption>Sketch of a more complex exploitation village</figcaption>
							</figure>
	   						
                  <p>Here is a more complex exploitation village which is set up with a moated enclosed church homestead and a central meadow as its center. There is a line of farms next to the road. The arable land to the east is bordered by a ditch supplying fresh drinking water (Middle Dutch <em>bansloot</em>). In layout, this type represents a hybrid between the two earlier settlement types. </p>
                        						<figure id="10615">
									<a href="#PAK Game Blog9"><img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fulllandscape/PAK.GameBlog9.png" alt="PAK Game Blog9"></a>
					<a href="#8239" id="PAK Game Blog9">
						<img src="https://www.leidenmedievalistsblog.nl/images/uploads/PAK.GameBlog9.png" alt="PAK Game Blog9">
					</a>
												   <figcaption>Sketch of a hybrid between the two earlier settlement types</figcaption>
							</figure>
	   						
                  <p>Let us first make clear that these different types of exploitation settlements often existed alongside each other and can be found in one and the same region. In part, the different types reflect different chronological layers but some types were also more suited to certain geographical environments than others.</p><p>So how were these settlements planned? Many medieval exploitation enterprises were initiated by a monastery or a consortium of free men who were granted permission by (or bought permission from) the feudal lord to ‚Äúcolonize‚Äù the wilderness.</p><p>Clearing the wooded landscape in order to create arable land was done by cutting away the trees and bushes (Middle Dutch <em>rode</em>) or, alternatively, burning it away in controlled fires (Middle Dutch <em>brant</em>).</p><p>Land surveyors sent by the lord would then measure out the block or strips that would be taken in cultivation. Strips of arable land were often 1250m deep (6 Middle Dutch <em>voorlingen </em>= <em>furlongs</em>) so that the plough could go straight in a long line before having to turn. Important blocks or strips were demarcated by hedges, earthwork, woodwork, ditches or roads. Medieval names for these blocks often survived into the modern day. </p><p>The presence of drinking water (a river or a brook) in the vicinity was an important factor in choosing the location for the settlement. The vicinity of water entailed risk and reward because flooding was an ever present danger. Floods could devastate arable land but might also fertilize it. Meadows in particular were often situated in flood areas. </p><h3><strong>Managing a settlement</strong></h3><p>So how was such a settlement managed? First of all, the quality of the soil had to be carefully controlled by crop rotation: specific crops were sown on different segments of the arable land with one part laying fallow to recover from the tilling (English three-field system, Dutch <em>drieslagstelsel</em>). The cattle and sheep were put out to pasture on the common meadows guarded by a shepherd or cowherd. Pigs were allowed to forage in the nearby forests and killed in autumn before the winter starvation set in.</p><p>Roads and rivers were important for transport of crops and livestock. These roads, some of them paved, some of them not, needed to be maintained. They were essential to the payment of the tithe, since tithe collectors assessed the harvest on the field and later collected the sheaves on the side of the road.</p><p>The buildings within the community also needed maintenance. Farmhouses, community barns and stables were made of wood and had to be rebuilt every few generations, only the name of the farm or homestead being continued.</p><p>So what kind of threats did a medieval settlement face? First of all, the weather was an important factor which dictated the success of the harvest. Storms, droughts and floods could devastate the harvest and decimate the community.</p><p>Diseases and epidemics were another danger threatening the community. The situation on the countryside was a lot better in this regard than in the medieval towns, but an epidemic could still mean the end of a village. Similarly, diseases among livestock impacted the medieval subsistence economy in a brutal way.</p><p>Then there are the consequences of medieval warfare affecting the community: Armies that passed by could plunder the village, burn the farms and execute villagers at will. Or they could also demand supplies, food and provisions as an emergency "tax"<br></p>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_rightlandscape/PAK.GameBlog91.png" alt="PAK Game Blog91">
												   <figcaption>Screenshot: Burning village in Knights and Merchants (1998)</figcaption>
							</figure>
	   						
                  <p>But war also brought indirect consequences; a liege lord calling the banners and levying troops from the village community might extract a large part of the adult men. Warfare also disrupted the trade networks that supplied a village with building materials and commodities.</p><p>Then there were internal threats to the fabric of the village community. We may think of social unrest because of land disputes. Feuds could also tear a community apart with endemic vendetta‚Äôs causing death and despair. A socially unstable society was also more prone to internal accusations of heresy and witchcraft.</p><h3><strong>An ‚Äúaccurate‚Äù medieval settlement builder</strong></h3><p>So, which of the above listed features could potentially contribute to a more historically accurate computer game about medieval settlement building? First of all, it would be more realistic if the settlement could first be planned out and was not forced to "grow organically" from a community center. The first settlement phase would be a test of how ‚Äúsuccessful‚Äù a layout is in adapting to the exigencies of the terrain and the needs of the community. Only after that initial layout proved successful, further expansions can be planned. </p><p>Secondly, it would be more realistic if we could build both straight roads and curved roads, just as in <em>Cities Skylines </em>(2015), a modern city builder well known for its incredibly flexible layout tools. Incidentally, the tools of Cities Skylines can also be used to recreate medieval settlements, as was done by YouTube creator <a href="https://www.youtube.com/watch?v=b7wsXzeuaqk" target="_blank" rel="noreferrer noopener">Play Curiously</a> who constructed an impression of a medieval Croatian village.</p>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_fulllandscape/PAK.GameBlog92.jpg" alt="PAK Game Blog92">
												   <figcaption>Screenshot: Cities Skylines (2015) by YouTuber Play Curiously</figcaption>
							</figure>
	   						
                  <p>Such a flexible road drawing tool can then also be used to lay out ditches, hedges and enclosures since these features were central to the medieval experience of the cultivated landscape.</p><p>Thirdly, It would be interesting to see a medieval-themed game embrace the concept of flood valleys that limit and endanger pasture and arable land. Other historical city builders such as <em>Pharaoh</em> (1999) and <em>Children of the Nile</em> (2004) already implemented this feature for their setting in Ancient Egypt. However, such a mechanic would likewise fit a medieval city builder and show the general public how medieval society dealt with seasonal flooding as well as the devastating effects that storm floods could have.</p>
                        						<figure id="10615">
									<img src="https://www.leidenmedievalistsblog.nl/images/uploads/_rightlandscape/PAK.GameBlog93.jpg" alt="PAK Game Blog93">
												   <figcaption>Screenshot:  Children of the Nile (2004)</figcaption>
							</figure>
	   						
                  <p>And finally, something that would, in my opinion, really add to the realism and historical flavor of a medieval-themed city builder would be the introduction of mechanisms in which agricultural surpluses are skimmed by the church and the feudal lord. Tithes, taxes and rents! Instead of merely abstracting the taxes into an income modifier or letting the player be the extractor himself, we could be shown the tax collector visiting the village, counting the sheaves by the side of the road, selecting the calves and chickens. This way, the experiences of our medieval forebears are visualized and may help to educate the public about medieval village life.</p>
<h3><strong>Why not?</strong></h3>
<p>There are some good reasons why city building games are not that historically accurate and instead adhere to the established formula of the city building game. </p>
<p>First of all, a linear growth model makes sense from a gameplay perspective, since it is rewarding to see your settlement grow.in a linear way. It fosters a feeling of progress and motivates the player to keep momentum and push through to the next expansion phase. Secondly, games are generally wary of punishing failure too harshly in order to avoid demoralizing the player. Thirdly, in order to facilitate path finding for the simulated villagers it is easier to implement a gridlike road and building system rather than an off-grid building system that allows for curvy roads. So far only <em>Cities Skylines </em>has managed to do this in a satisfactory way. </p>
<p>Lastly, for marketing purposes and recognizability, game developers generally don't stray too far from the image of the Middle Ages that the public is already acquainted with. For a medieval city builder this means windmills, industrious peasants, lots of sheep and stone castles. Things like land surveying, crop rotation and tithe collection do not fit this image and challenge the romanticized picture of the uneducated farmer in his pre-industrial environment. </p>
<h3><strong>Conclusion</strong></h3>
<p>Although I think medieval-themed city building games could benefit from incorporating some of the things we know about medieval settlement history into the gameplay loop, it may not be desirable for game developers to stray too far from the established formula. The idea that medieval settlements developed organically according to messy road plans is strongly imbedded in popular perception. Allowing both straight and curved road building in medieval city builders, may serve to challenge some of the stereotypes that exist about medieval village life. And if you ask me, that would be a good thing for it is an enriching experience to see the world through the eyes of our medieval forebears. One may find out that their lives were not that different after all... </p>

<h3><strong>Further reading</strong></h3>
<ul><li>Fossier, R. (2004). ‚ÄúThe Rural Economy and Demographic Growth.‚Äù In: D. Luscombe &amp; J. Riley-Smith (Eds.). <em>The New Cambridge Medieval History</em>. Cambridge: Cambridge University Press, 11-46.</li><li>Van Ham, W. (1979). ‚ÄúDorp en dorpsleven in middeleeuws Wouw." in: A. Delahaye (red.), De Heren XVII van Nassau-Brabant, 316-336.‚Äù</li><li>(forthc.) Kerkhof, P.A. (2020). ‚ÄúSaer, Saert; een Zuid-Nederlandse veldnaam van onzekere oorsprong.‚Äù<em> Noordbrabants Historisch Jaarboek</em>.</li><li>Leenders, K.A.H.W. (1996). "Noord-Vlaanderen en de Noordwesthoek; een vergelijking." Tijdschrift voor Waterstaatsgeschiedenis 5, 67-73.</li><li>Leenders, K.A.H.W. (1989). <em>Verdwenen venen; een onderzoek naar de ligging en exploitatie van thans verdwenen venen in het gebied tussen Antwerpen, Turnhout, Geertruidenberg en Willemstad (1250-1750)</em>. Reeks Landschapsstudies 13, Wageningen.</li><li>Oosthuizen, S. (2017). <em>The Anglo-Saxon fenland. </em>Windgather Press.</li></ul>
<p><em>¬© Alexia Kerkhof and Leiden Medievalists Blog, 2020. Unauthorised use and/or duplication of this material without express and written permission from this site‚Äôs author and/or owner is strictly prohibited. Excerpts and links may be used, provided that full and clear credit is given to Alexia Kerkhof and Leiden Medievalists Blog with appropriate and specific direction to the original content.</em></p>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Improving the usability of C libraries in Swift (135 pts)]]></title>
            <link>https://www.swift.org/blog/improving-usability-of-c-libraries-in-swift/</link>
            <guid>46726526</guid>
            <pubDate>Thu, 22 Jan 2026 23:34:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.swift.org/blog/improving-usability-of-c-libraries-in-swift/">https://www.swift.org/blog/improving-usability-of-c-libraries-in-swift/</a>, See on <a href="https://news.ycombinator.com/item?id=46726526">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      <p>There are many interesting, useful, and fun C libraries in the software ecosystem. While one could go and rewrite these libraries in Swift, usually there is no need, because Swift provides direct interoperability with C. With a little setup, you can directly use existing C libraries from your Swift code.</p>

<p>When you use a C library directly from Swift, it will look and feel similar to using it from C. That can be useful if you‚Äôre following sample code or a tutorial written in C, but it can also feel out of place. For example, here‚Äôs a small amount of code using a C API:</p>

<div><pre><code>  <span>var</span> <span>instanceDescriptor</span> <span>=</span> <span>WGPUInstanceDescriptor</span><span>()</span>
  <span>let</span> <span>instance</span> <span>=</span> <span>wgpuCreateInstance</span><span>(</span><span>&amp;</span><span>instanceDescriptor</span><span>)</span>
  <span>var</span> <span>surfaceDescriptor</span> <span>=</span> <span>WGPUSurfaceDescriptor</span><span>()</span>
  <span>let</span> <span>surface</span> <span>=</span> <span>wgpuInstanceCreateSurface</span><span>(</span><span>instance</span><span>,</span> <span>&amp;</span><span>surfaceDescriptor</span><span>)</span>
  <span>if</span> <span>wgpuSurfacePresent</span><span>(</span><span>&amp;</span><span>surface</span><span>)</span> <span>==</span> <span>WGPUStatus_Error</span> <span>{</span>
      <span>// report error</span>
  <span>}</span>
  <span>wgpuSurfaceRelease</span><span>(</span><span>surface</span><span>)</span>
  <span>wgpuInstanceRelease</span><span>(</span><span>instance</span><span>)</span>
</code></pre></div>

<p>The C library here that Swift is using comes from the <a href="https://github.com/webgpu-native/webgpu-headers">webgpu-headers project</a>, which vends a C header (<code>webgpu.h</code>) that is used by several implementations of <a href="https://www.w3.org/TR/webgpu/">WebGPU</a>. WebGPU  is a technology that enables web developers to use the system‚Äôs GPU (Graphics Processing Unit) from the browser. For the purposes of this post, you don‚Äôt really need to know anything about WebGPU: I‚Äôm using it as an example of a typical C library, and the techniques described in this blog post apply to lots of other well-designed C libraries.</p>

<p>The Swift code above has a very ‚ÄúC‚Äù feel to it. It has global function calls with prefixed names like <code>wgpuInstanceCreateSurface</code> and global integer constants like <code>WGPUStatus_Error</code>. It pervasively uses unsafe pointers, some of which are managed with explicit reference counting, where the user provides calls to <code>wpuXYZAddRef</code> and <code>wgpuXYZRelease</code> functions. It works, but it doesn‚Äôt feel like Swift, and inherits various safety problems of C.</p>

<p>Fortunately, we can improve this situation, providing a safer and more ergonomic interface to WebGPU from Swift that feels like it belongs in Swift. More importantly, we can do so without changing the WebGPU implementation: Swift provides a suite of annotations that you can apply to C headers to improve the way in which the C APIs are expressed in Swift. These annotations describe common conventions in C that match up with Swift constructs, projecting a more Swift-friendly interface on top of the C code.</p>

<p>In this post, I‚Äôm going to use these annotations to improve how Swift interacts with the WebGPU C code. By the end, we‚Äôll be able to take advantage of Swift features like argument labels, methods, enums, and automatic reference counting, like this:</p>

<div><pre><code>  <span>var</span> <span>instanceDescriptor</span> <span>=</span> <span>WGPUInstanceDescriptor</span><span>()</span>
  <span>let</span> <span>instance</span> <span>=</span> <span>WGPUInstance</span><span>(</span><span>descriptor</span><span>:</span> <span>&amp;</span><span>instanceDescriptor</span><span>)</span>
  <span>var</span> <span>surfaceDescriptor</span> <span>=</span> <span>WGPUSurfaceDescriptor</span><span>()</span>
  <span>let</span> <span>surface</span> <span>=</span> <span>instance</span><span>.</span><span>createSurface</span><span>(</span><span>descriptor</span><span>:</span> <span>&amp;</span><span>surfaceDescriptor</span><span>)</span>
  <span>if</span> <span>surface</span><span>.</span><span>present</span><span>()</span> <span>==</span> <span>.</span><span>error</span> <span>{</span>
      <span>// report error</span>
  <span>}</span>
  <span>// Swift automatically deallocates the instance and surface when we're done</span>
</code></pre></div>

<p>These same annotations can be used for any C library to provide a safer, more ergonomic development experience in Swift without changing the C library at all.</p>

<blockquote>
  <p><strong>Note</strong>: Some of what is covered in this post requires bug fixes that first became available in Swift 6.2.3.</p>
</blockquote>



<p>A <a href="https://clang.llvm.org/docs/Modules.html">module map</a> is a way of layering a Swift-friendly modular structure on top of C headers. You can create a module map for the WebGPU header by writing the following to a file <code>module.modulemap</code>:</p>

<div><pre><code><span>module</span> <span>WebGPU</span> <span>{</span>
  <span>header</span> <span>"webgpu.h"</span>
  <span>export</span> <span>*</span>
<span>}</span>
</code></pre></div>

<p>The easiest thing to do is to put <code>module.modulemap</code> alongside the header itself. For my experiment here, I put it in the root directory of my <code>webgpu-headers</code> checkout. If you‚Äôre in a Swift package, put it into its own target with this layout:</p>

<div><pre><code><span>‚îú‚îÄ‚îÄ</span> <span>Package</span><span>.</span><span>swift</span>
<span>‚îî‚îÄ‚îÄ</span> <span>Sources</span>
    <span>‚îî‚îÄ‚îÄ</span> <span>WebGPU</span>
        <span>‚îú‚îÄ‚îÄ</span> <span>include</span>
        <span>‚îÇ</span>   <span>‚îú‚îÄ‚îÄ</span> <span>webgpu</span><span>.</span><span>h</span>
        <span>‚îÇ</span>   <span>‚îî‚îÄ‚îÄ</span> <span>module</span><span>.</span><span>modulemap</span>
        <span>‚îî‚îÄ‚îÄ</span> <span>WebGPU</span><span>.</span><span>c</span> <span>(</span><span>empty</span> <span>file</span><span>)</span>
</code></pre></div>

<p>If you reference this <code>WebGPU</code> target from elsewhere in the package, you can <code>import WebGPU</code> to get access to the C APIs.</p>



<p>There are a few ways to see what the Swift interface for a C library looks like.</p>

<ul>
  <li>The <code>swift-synthesize-interface</code> tool in Swift 6.2+ prints the Swift interface to the terminal.</li>
  <li>Xcode‚Äôs ‚ÄúSwift 5 interface‚Äù counterpart to the <code>webgpu.h</code> header will show how the header has been mapped into Swift.</li>
</ul>

<p>Let‚Äôs do it from the command line, using <code>swift-synthesize-interface</code>. From the directory containing <code>webgpu.h</code> and <code>module.modulemap</code>, run:</p>

<div><pre><code><span>xcrun</span> <span>swift</span><span>-</span><span>synthesize</span><span>-</span><span>interface</span> <span>-</span><span>I</span> <span>.</span> <span>-</span><span>module</span><span>-</span><span>name</span> <span>WebGPU</span> <span>-</span><span>target</span> <span>arm64</span><span>-</span><span>apple</span><span>-</span><span>macos15</span> <span>-</span><span>sdk</span> <span>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/</span><span>MacOSX26</span><span>.</span><span>0</span><span>.</span><span>sdk</span>
</code></pre></div>

<p>The leading <code>xcrun</code> and the <code>-sdk</code> argument with the path is only needed on macOS; on other platforms, make sure <code>swift-synthesize-interface</code> is in your path. The <code>-target</code> operation is the triple provided if you run <code>swiftc -print-target-info</code>. It looks like this:</p>

<div><pre><code><span>{</span><span>
  </span><span>"compilerVersion"</span><span>:</span><span> </span><span>"Apple Swift version 6.2 (swiftlang-6.2.2.15.4 clang-1700.3.15.2)"</span><span>,</span><span>
  </span><span>"target"</span><span>:</span><span> </span><span>{</span><span>
    </span><span>"triple"</span><span>:</span><span> </span><span>"arm64-apple-macosx15.0"</span><span>,</span><span>
    </span><span>"unversionedTriple"</span><span>:</span><span> </span><span>"arm64-apple-macosx"</span><span>,</span><span>
    </span><span>"moduleTriple"</span><span>:</span><span> </span><span>"arm64-apple-macos"</span><span>,</span><span>
    </span><span>"compatibilityLibraries"</span><span>:</span><span> </span><span>[</span><span> </span><span>],</span><span>
    </span><span>"librariesRequireRPath"</span><span>:</span><span> </span><span>false</span><span>
  </span><span>},</span><span>
  </span><span>"paths"</span><span>:</span><span> </span><span>{</span><span> </span><span>...</span><span> </span><span>}</span><span>
</span><span>}</span><span>
</span></code></pre></div>

<p>The output of <code>swift-synthesize-interface</code> is the Swift API for the WebGPU module, directly translated from C. For example, this code from the WebGPU header:</p>

<div><pre><code><span>typedef</span> <span>enum</span> <span>WGPUAdapterType</span> <span>{</span>
    <span>WGPUAdapterType_DiscreteGPU</span> <span>=</span> <span>0x00000001</span><span>,</span>
    <span>WGPUAdapterType_IntegratedGPU</span> <span>=</span> <span>0x00000002</span><span>,</span>
    <span>WGPUAdapterType_CPU</span> <span>=</span> <span>0x00000003</span><span>,</span>
    <span>WGPUAdapterType_Unknown</span> <span>=</span> <span>0x00000004</span><span>,</span>
    <span>WGPUAdapterType_Force32</span> <span>=</span> <span>0x7FFFFFFF</span>
<span>}</span> <span>WGPUAdapterType</span> <span>WGPU_ENUM_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>is translated into:</p>

<div><pre><code><span>public</span> <span>struct</span> <span>WGPUAdapterType</span> <span>:</span> <span>Hashable</span><span>,</span> <span>Equatable</span><span>,</span> <span>RawRepresentable</span> <span>{</span>
    <span>public</span> <span>init</span><span>(</span><span>_</span> <span>rawValue</span><span>:</span> <span>UInt32</span><span>)</span>
    <span>public</span> <span>init</span><span>(</span><span>rawValue</span><span>:</span> <span>UInt32</span><span>)</span>
    <span>public</span> <span>var</span> <span>rawValue</span><span>:</span> <span>UInt32</span>
<span>}</span>

<span>public</span> <span>var</span> <span>WGPUAdapterType_DiscreteGPU</span><span>:</span> <span>WGPUAdapterType</span> <span>{</span> <span>get</span> <span>}</span>
<span>public</span> <span>var</span> <span>WGPUAdapterType_IntegratedGPU</span><span>:</span> <span>WGPUAdapterType</span> <span>{</span> <span>get</span> <span>}</span>
<span>public</span> <span>var</span> <span>WGPUAdapterType_CPU</span><span>:</span> <span>WGPUAdapterType</span> <span>{</span> <span>get</span> <span>}</span>
<span>public</span> <span>var</span> <span>WGPUAdapterType_Unknown</span><span>:</span> <span>WGPUAdapterType</span> <span>{</span> <span>get</span> <span>}</span>
<span>public</span> <span>var</span> <span>WGPUAdapterType_Force32</span><span>:</span> <span>WGPUAdapterType</span> <span>{</span> <span>get</span> <span>}</span>
</code></pre></div>

<p>and there are lots of global functions like this:</p>

<div><pre><code><span>public</span> <span>func</span> <span>wgpuComputePipelineGetBindGroupLayout</span><span>(</span><span>_</span> <span>computePipeline</span><span>:</span> <span>WGPUComputePipeline</span><span>!</span><span>,</span> <span>_</span> <span>groupIndex</span><span>:</span> <span>UInt32</span><span>)</span> <span>-&gt;</span> <span>WGPUBindGroupLayout</span><span>!</span>
<span>public</span> <span>func</span> <span>wgpuComputePipelineSetLabel</span><span>(</span><span>_</span> <span>computePipeline</span><span>:</span> <span>WGPUComputePipeline</span><span>!</span><span>,</span> <span>_</span> <span>label</span><span>:</span> <span>WGPUStringView</span><span>)</span>
<span>public</span> <span>func</span> <span>wgpuComputePipelineAddRef</span><span>(</span><span>_</span> <span>computePipeline</span><span>:</span> <span>WGPUComputePipeline</span><span>!</span><span>)</span>
<span>public</span> <span>func</span> <span>wgpuComputePipelineRelease</span><span>(</span><span>_</span> <span>computePipeline</span><span>:</span> <span>WGPUComputePipeline</span><span>!</span><span>)</span>
</code></pre></div>

<p>It‚Äôs a starting point! You can absolutely write Swift programs using these WebGPU APIs, and they‚Äôll feel a lot like writing them in C. Let‚Äôs see what we can do to make it better.</p>



<p>C enums can be used for several things. Sometimes they really represent a choice among a number of alternatives. Sometimes they represent flags in a set of options, from which you can choose several. Sometimes they‚Äôre just a convenient way to create a bunch of named constants. Swift conservatively imports enum types as wrappers over the underlying C type used to store values of the enum (e.g., <code>WGPUAdapterType</code> wraps a <code>UInt32</code>) and makes the enumerators into global constants. It covers all of the possible use cases, but it isn‚Äôt <em>nice</em>.</p>

<p>The <code>WGPUAdapterType</code> enum really is a choice among one of several options, which would be best represented as an <code>enum</code> in Swift. If we were willing to modify the header, we could apply the <a href="https://clang.llvm.org/docs/AttributeReference.html#enum-extensibility"><code>enum_extensibility</code> attribute</a> to the enum, like this:</p>

<div><pre><code><span>typedef</span> <span>enum</span> <span>__attribute__</span><span>((</span><span>enum_extensibility</span><span>(</span><span>closed</span><span>)))</span> <span>WGPUAdapterType</span> <span>{</span>
    <span>WGPUAdapterType_DiscreteGPU</span> <span>=</span> <span>0x00000001</span><span>,</span>
    <span>WGPUAdapterType_IntegratedGPU</span> <span>=</span> <span>0x00000002</span><span>,</span>
    <span>WGPUAdapterType_CPU</span> <span>=</span> <span>0x00000003</span><span>,</span>
    <span>WGPUAdapterType_Unknown</span> <span>=</span> <span>0x00000004</span><span>,</span>
    <span>WGPUAdapterType_Force32</span> <span>=</span> <span>0x7FFFFFFF</span>
<span>}</span> <span>WGPUAdapterType</span> <span>WGPU_ENUM_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>This works, and results in a much nicer Swift API:</p>

<div><pre><code><span>@frozen</span> <span>public</span> <span>enum</span> <span>WGPUAdapterType</span> <span>:</span> <span>UInt32</span><span>,</span> <span>@unchecked</span> <span>Sendable</span> <span>{</span>
    <span>case</span> <span>discreteGPU</span> <span>=</span> <span>1</span>
    <span>case</span> <span>integratedGPU</span> <span>=</span> <span>2</span>
    <span>case</span> <span>CPU</span> <span>=</span> <span>3</span>
    <span>case</span> <span>unknown</span> <span>=</span> <span>4</span>
    <span>case</span> <span>force32</span> <span>=</span> <span>2147483647</span>
<span>}</span>
</code></pre></div>

<p>Now, we get an <code>enum</code> that we can switch over, and nice short case names, e.g.,</p>

<div><pre><code><span>switch</span> <span>adapterType</span> <span>{</span>
  <span>case</span> <span>.</span><span>discreteGPU</span><span>,</span> <span>.</span><span>integratedGPU</span><span>:</span>
    <span>print</span><span>(</span><span>"definitely a GPU"</span><span>)</span>
  <span>default</span><span>:</span>
    <span>print</span><span>(</span><span>"not so sure"</span><span>)</span>
<span>}</span>
</code></pre></div>

<p>That‚Äôs great, but I already broke my rule: no header modifications unless I have to!</p>



<p>The problem of needing to layer information on top of existing C headers is not a new one. As noted earlier, Swift relies on a Clang feature called <a href="https://clang.llvm.org/docs/APINotes.html">API notes</a> to let us express this same information in a separate file, so we don‚Äôt have to edit the header. In this case, we create a file called <code>WebGPU.apinotes</code> (the name <code>WebGPU</code> matches the module name from <code>module.modulemap</code>), which is a YAML file describing the extra information. We‚Äôll start with one that turns <code>WGPUAdapterType</code> into an <code>enum</code>:</p>

<div><pre><code><span>---</span>
<span>Name</span><span>:</span> <span>WebGPU</span>
<span>Tags</span><span>:</span>
<span>-</span> <span>Name</span><span>:</span> <span>WGPUAdapterType</span>
  <span>EnumExtensibility</span><span>:</span> <span>closed</span>
</code></pre></div>

<p><code>Tags</code> here is a term used in the C and C++ standard to refer to enum, struct, union, or class types. Any information about those types in the API notes file will go into that section.</p>

<p>Put <code>WebGPU.apinotes</code> alongside the <code>module.modulemap</code>, and now <code>WGPUAdapterType</code> gets mapped into a <code>Swift</code> enum. For a package, the structure will look like this:</p>

<div><pre><code><span>‚îú‚îÄ‚îÄ</span> <span>Package</span><span>.</span><span>swift</span>
<span>‚îî‚îÄ‚îÄ</span> <span>Sources</span>
    <span>‚îî‚îÄ‚îÄ</span> <span>WebGPU</span>
        <span>‚îú‚îÄ‚îÄ</span> <span>include</span>
        <span>‚îÇ</span>   <span>‚îú‚îÄ‚îÄ</span> <span>webgpu</span><span>.</span><span>h</span>
        <span>‚îÇ</span>   <span>‚îú‚îÄ‚îÄ</span> <span>WebGPU</span><span>.</span><span>apinotes</span>
        <span>‚îÇ</span>   <span>‚îî‚îÄ‚îÄ</span> <span>module</span><span>.</span><span>modulemap</span>
        <span>‚îî‚îÄ‚îÄ</span> <span>WebGPU</span><span>.</span><span>c</span> <span>(</span><span>empty</span> <span>file</span><span>)</span>
</code></pre></div>

<p>We‚Äôll be adding more to this API notes file as we keep digging through the interface.</p>



<p>The WebGPU header has a number of ‚Äúobject‚Äù types that are defined like this:</p>

<div><pre><code><span>typedef</span> <span>struct</span> <span>WGPUBindGroupImpl</span><span>*</span> <span>WGPUBindGroup</span> <span>WGPU_OBJECT_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>This gets imported into Swift as an alias for an opaque pointer type, which is‚Ä¶ not great:</p>

<div><pre><code><span>public</span> <span>typealias</span> <span>WGPUBindGroup</span> <span>=</span> <span>OpaquePointer</span>
</code></pre></div>

<p>WebGPU object types are reference counted, and each object type has corresponding <code>AddRef</code> and <code>Release</code> functions to increment and decrement the reference count, like this:</p>

<div><pre><code><span>WGPU_EXPORT</span> <span>void</span> <span>wgpuBindGroupAddRef</span><span>(</span><span>WGPUBindGroup</span> <span>bindGroup</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
<span>WGPU_EXPORT</span> <span>void</span> <span>wgpuBindGroupRelease</span><span>(</span><span>WGPUBindGroup</span> <span>bindGroup</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>Of course, you can use these functions in Swift exactly how you do in C, making sure to balance out calls to <code>AddRef</code> and <code>Release</code>, but then it would be every bit as unsafe as C.</p>

<p>We can do better with <a href="https://www.swift.org/documentation/cxx-interop/#shared-reference-types"><code>SWIFT_SHARED_REFERENCE</code></a>. It‚Äôs a macro (defined in the <code>&lt;swift/bridging&gt;</code> header) that can turn a reference-counted C type like the above into an automatically reference-counted <code>class</code> in Swift. Here‚Äôs how we would use it in the header:</p>

<div><pre><code><span>typedef</span> <span>struct</span> <span>SWIFT_SHARED_REFERENCE</span><span>(</span><span>wgpuBindGroupAddRef</span><span>,</span> <span>wgpuBindGroupRelease</span><span>)</span> <span>WGPUBindGroupImpl</span><span>*</span> <span>WGPUBindGroup</span> <span>WGPU_OBJECT_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>Now, <code>WGPUBindGroup</code> gets imported like this:</p>

<div><pre><code><span>public</span> <span>class</span> <span>WGPUBindGroupImpl</span> <span>{</span> <span>}</span>
<span>public</span> <span>typealias</span> <span>WGPUBindGroup</span> <span>=</span> <span>WGPUBindGroupImpl</span>
</code></pre></div>

<p>The extra typealias is a little unexpected, but overall this is a huge improvement: Swift is treating <code>WGPUBindGroup</code> as a class, meaning that it automatically manages retains and releases for you! This is both an ergonomic win (less code to write) and a safety win, because it‚Äôs eliminated the possibility of mismanaging these instances.</p>

<p>There‚Äôs one more thing: when dealing with reference-counting APIs, you need to know whether a particular function that returns an object is expecting you to call ‚Äúrelease‚Äù when you‚Äôre done. In the WebGPU header, this information is embedded in a comment:</p>

<div><pre><code><span>/**
 * @returns
 * This value is @ref ReturnedWithOwnership.
 */</span>
<span>WGPU_EXPORT</span> <span>WGPUBindGroup</span> <span>wgpuDeviceCreateBindGroup</span><span>(</span><span>WGPUDevice</span> <span>device</span><span>,</span> <span>WGPUBindGroupDescriptor</span> <span>const</span> <span>*</span> <span>descriptor</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>‚ÄúReturnedWithOwnership‚Äù here means that the result of the call has already been retained one extra time, and the caller is responsible for calling ‚Äúrelease‚Äù when they are done with it. The <code>&lt;swift/bridging&gt;</code> header has a <code>SWIFT_RETURNS_RETAINED</code> macro that expresses this notion. One can use it like this:</p>

<div><pre><code><span>WGPU_EXPORT</span> <span>WGPUBindGroup</span> <span>wgpuDeviceCreateBindGroup</span><span>(</span><span>WGPUDevice</span> <span>device</span><span>,</span> <span>WGPUBindGroupDescriptor</span> <span>const</span> <span>*</span> <span>descriptor</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span> <span>SWIFT_RETURNS_RETAINED</span><span>;</span>
</code></pre></div>

<p>Now, Swift will balance out the retain that <code>wgpuDeviceCreateBindGroup</code> has promised to do by performing the extra release once you‚Äôre done using the object. Once these annotations are done, we‚Äôre all set with a more ergonomic and memory-safe API for this C library. There‚Äôs no need to ever call <code>wgpuBindGroupRelease</code> or <code>wgpuBindGroupAddRef</code> yourself.</p>

<p>We‚Äôve hacked up our header again, so let‚Äôs undo that and move all of this out to API notes. To turn a type into a foreign reference type, we augment the <code>Tags</code> section of our API notes with the same information, but in YAML form:</p>

<div><pre><code><span>-</span> <span>Name</span><span>:</span> <span>WGPUBindGroupImpl</span>
  <span>SwiftImportAs</span><span>:</span> <span>reference</span>
  <span>SwiftReleaseOp</span><span>:</span> <span>wgpuBindGroupRelease</span>
  <span>SwiftRetainOp</span><span>:</span> <span>wgpuBindGroupAddRef</span>
</code></pre></div>

<p>That makes <code>WGPUBindGroupImpl</code> import as a class type, with the given retain and release functions. We can express the ‚Äúreturns retained‚Äù behavior of the <code>wgpuDeviceCreateBindGroup</code> function like this:</p>

<div><pre><code><span>Functions</span><span>:</span>
<span>-</span> <span>Name</span><span>:</span> <span>wgpuDeviceCreateBindGroup</span>
  <span>SwiftReturnOwnership</span><span>:</span> <span>retained</span>
</code></pre></div>

<p>That‚Äôs enums and classes, so now let‚Äôs tackle‚Ä¶ functions.</p>



<p>A typical function from <code>webgpu.h</code>, like this:</p>

<div><pre><code><span>WGPU_EXPORT</span> <span>void</span> <span>wgpuQueueWriteBuffer</span><span>(</span>
    <span>WGPUQueue</span> <span>queue</span><span>,</span> <span>WGPUBuffer</span> <span>buffer</span><span>,</span> <span>uint64_t</span> <span>bufferOffset</span><span>,</span> 
    <span>void</span> <span>const</span> <span>*</span> <span>data</span><span>,</span> <span>size_t</span> <span>size</span>
<span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>will come into Swift like this:</p>

<div><pre><code><span>public</span> <span>func</span> <span>wgpuQueueWriteBuffer</span><span>(</span><span>_</span> <span>queue</span><span>:</span> <span>WGPUQueue</span><span>!</span><span>,</span> <span>_</span> <span>buffer</span><span>:</span> <span>WGPUBuffer</span><span>!</span><span>,</span> <span>_</span> <span>bufferOffset</span><span>:</span> <span>UInt64</span><span>,</span> <span>_</span> <span>data</span><span>:</span> <span>UnsafeRawPointer</span><span>!</span><span>,</span> <span>_</span> <span>size</span><span>:</span> <span>Int</span><span>)</span>
</code></pre></div>

<p>Note that <code>_</code> on each parameter, which means that we won‚Äôt use argument labels for anything when we call it:</p>

<div><pre><code><span>wgpuQueueWriteBuffer</span><span>(</span><span>myQueue</span><span>,</span> <span>buffer</span><span>,</span> <span>position</span><span>,</span> <span>dataToWrite</span><span>,</span> <span>bytesToWrite</span><span>)</span>
</code></pre></div>

<p>That matches C, but it isn‚Äôt as clear as it could be in Swift. Let‚Äôs clean this up by providing a better name in Swift that includes argument labels. We can do so using <code>SWIFT_NAME</code> (also in <code>&lt;swift/bridging&gt;</code>), like this:</p>

<div><pre><code><span>WGPU_EXPORT</span> <span>void</span> <span>wgpuQueueWriteBuffer</span><span>(</span>
      <span>WGPUQueue</span> <span>queue</span><span>,</span> <span>WGPUBuffer</span> <span>buffer</span><span>,</span> <span>uint64_t</span> <span>bufferOffset</span><span>,</span>
      <span>void</span> <span>const</span> <span>*</span> <span>data</span><span>,</span> <span>size_t</span> <span>size</span>
  <span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span> 
    <span>SWIFT_NAME</span><span>(</span><span>"wgpuQueueWriteBuffer(_:buffer:bufferOffset:data:size:)"</span><span>);</span>
</code></pre></div>

<p>Within the parentheses, we have each of the argument labels that we want (or <code>_</code> meaning ‚Äúno label‚Äù), each followed by a <code>:</code>. This is how one describes a full function name in Swift. Once we‚Äôve made this change to the Swift name, the C function comes into Swift with argument labels, like this:</p>

<div><pre><code><span>public</span> <span>func</span> <span>wgpuQueueWriteBuffer</span><span>(</span><span>_</span> <span>queue</span><span>:</span> <span>WGPUQueue</span><span>!</span><span>,</span> <span>buffer</span><span>:</span> <span>WGPUBuffer</span><span>!</span><span>,</span> <span>bufferOffset</span><span>:</span> <span>UInt64</span><span>,</span> <span>data</span><span>:</span> <span>UnsafeRawPointer</span><span>!</span><span>,</span> <span>size</span><span>:</span> <span>Int</span><span>)</span>
</code></pre></div>

<p>That makes the call site more clear and self-documenting:</p>

<div><pre><code><span>wgpuQueueWriteBuffer</span><span>(</span><span>myQueue</span><span>,</span> <span>buffer</span><span>:</span> <span>buffer</span><span>,</span> <span>offset</span><span>:</span> <span>position</span><span>,</span> <span>data</span><span>:</span> <span>dataToWrite</span><span>,</span> <span>size</span><span>:</span> <span>bytesToWrite</span><span>)</span>
</code></pre></div>



<p>There is more usable structure in this API. Note that the <code>wgpuQueueWriteBuffer</code> function takes, as its first argument, an instance of <code>WGPUQueue</code>. Most of the C functions in <code>WebGPU.h</code> are like this, because these are effectively functions that operate on their first argument. In a language that has methods, they would be methods. Swift has methods, so let‚Äôs make them methods!</p>

<div><pre><code><span>WGPU_EXPORT</span> <span>void</span> <span>wgpuQueueWriteBuffer</span><span>(</span>
      <span>WGPUQueue</span> <span>queue</span><span>,</span> <span>WGPUBuffer</span> <span>buffer</span><span>,</span> <span>uint64_t</span> <span>bufferOffset</span><span>,</span> <span>void</span> <span>const</span> <span>*</span> <span>data</span><span>,</span> <span>size_t</span> <span>size</span><span>)</span> 
  <span>WGPU_FUNCTION_ATTRIBUTE</span> <span>SWIFT_NAME</span><span>(</span><span>"WGPUQueueImpl.writeBuffer(self:buffer:bufferOffset:data:size:)"</span><span>);</span>
</code></pre></div>

<p>There are three things to notice about this <code>SWIFT_NAME</code> string:</p>

<ul>
  <li>It starts with <code>WGPUQueueImpl.</code>, which tells Swift to make this function a member inside <code>WGPUQueueImpl</code>.</li>
  <li>Let‚Äôs change the function name to <code>writeBuffer</code>, because we no longer need the <code>wgpuQueue</code> prefix to distinguish it from other ‚Äúwrite buffer‚Äù operations on other types.</li>
  <li>The name of the first argument in parentheses is <code>self</code>, which indicates that the <code>self</code> argument (in Swift) should be passed as that positional argument to the C function. The other arguments are passed in-order.</li>
</ul>

<p>Note that this also requires <code>WGPUQueue(Impl)</code> to be imported as a <code>class</code>, as we did earlier for <code>WGPUBindGroupImpl</code>. Once we‚Äôve done so, we get a much-nicer Swift API:</p>

<div><pre><code><span>extension</span> <span>WGPUQueueImpl</span> <span>{</span>
  <span>/**
   * Produces a @ref DeviceError both content-timeline (`size` alignment) and d
evice-timeline
   * errors defined by the WebGPU specification.
   */</span>
  <span>public</span> <span>func</span> <span>writeBuffer</span><span>(</span><span>buffer</span><span>:</span> <span>WGPUBuffer</span><span>!</span><span>,</span> <span>bufferOffset</span><span>:</span> <span>UInt64</span><span>,</span> <span>data</span><span>:</span> <span>UnsafeRawPointer</span><span>!</span><span>,</span> <span>size</span><span>:</span> <span>Int</span><span>)</span>
<span>}</span>
</code></pre></div>

<p>We‚Äôve hacked up the header again, but didn‚Äôt have to. In <code>WebGPU.apinotes</code>, you can put a <code>SwiftName</code> attribute on any entity. For <code>wgpuQueueWriteBuffer</code>, it would look like this (in the <code>Functions</code> section):</p>

<div><pre><code><span>-</span> <span>Name</span><span>:</span> <span>wgpuQueueWriteBuffer</span>
  <span>SwiftName</span><span>:</span> <span>WGPUQueueImpl.writeBuffer(self:buffer:bufferOffset:data:size:)</span>
</code></pre></div>



<p><code>WebGPU.h</code> has a number of <code>Get</code> functions that produce information about some aspect of a type. Here are two for the <code>WGPUQuerySet</code> type:</p>

<div><pre><code><span>WGPU_EXPORT</span> <span>uint32_t</span> <span>wgpuQuerySetGetCount</span><span>(</span><span>WGPUQuerySet</span> <span>querySet</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
<span>WGPU_EXPORT</span> <span>WGPUQueryType</span> <span>wgpuQuerySetGetType</span><span>(</span><span>WGPUQuerySet</span> <span>querySet</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>With the <code>SWIFT_NAME</code> tricks above, we can turn these into ‚Äúget‚Äù methods on <code>WGPUQuerySet</code>, like this:</p>

<div><pre><code><span>extension</span> <span>WGPUQuerySetImpl</span> <span>{</span>
    <span>public</span> <span>func</span> <span>getCount</span><span>()</span> <span>-&gt;</span> <span>UInt32</span>
    <span>public</span> <span>func</span> <span>getType</span><span>()</span> <span>-&gt;</span> <span>WGPUQueryType</span>
<span>}</span>
</code></pre></div>

<p>That‚Äôs okay, but it‚Äôs not what you‚Äôd do in Swift. Let‚Äôs go one step further and turn them into read-only computed properties. To do so, use the <code>getter:</code> prefix on the Swift name we define. We‚Äôll skip ahead to the YAML form that goes into API notes:</p>

<div><pre><code><span>-</span> <span>Name</span><span>:</span> <span>wgpuQuerySetGetCount</span>
  <span>SwiftName</span><span>:</span> <span>getter:WGPUQuerySetImpl.count(self:)</span>
<span>-</span> <span>Name</span><span>:</span> <span>wgpuQuerySetGetType</span>
  <span>SwiftName</span><span>:</span> <span>getter:WGPUQuerySetImpl.type(self:)</span>
</code></pre></div>

<p>And now, we arrive at a nice Swift API:</p>

<div><pre><code><span>extension</span> <span>WGPUQuerySetImpl</span> <span>{</span>
    <span>public</span> <span>var</span> <span>count</span><span>:</span> <span>UInt32</span> <span>{</span> <span>get</span> <span>}</span>
    <span>public</span> <span>var</span> <span>type</span><span>:</span> <span>WGPUQueryType</span> <span>{</span> <span>get</span> <span>}</span>
<span>}</span>
</code></pre></div>



<p><code>SWIFT_NAME</code> can also be used to import a function that returns a new instance as a Swift initializer. For example, this function creates a new <code>WGPUInstance</code> (which we assume is getting imported as a <code>class</code> like we‚Äôve been doing above):</p>

<div><pre><code><span>/**
 * Create a WGPUInstance
 *
 * @returns
 * This value is @ref ReturnedWithOwnership.
 */</span>
<span>WGPU_EXPORT</span> <span>WGPUInstance</span> <span>wgpuCreateInstance</span><span>(</span><span>WGPU_NULLABLE</span> <span>WGPUInstanceDescriptor</span> <span>const</span> <span>*</span> <span>descriptor</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>We can turn this into a Swift initializer, which is used to create a new object, using the same <code>SWIFT_NAME</code> syntax but where the method name is <code>init</code>. Here is the YAML form that goes into API notes:</p>

<div><pre><code><span>-</span> <span>Name</span><span>:</span> <span>wgpuCreateInstance</span>
  <span>SwiftReturnOwnership</span><span>:</span> <span>retained</span>
  <span>SwiftName</span><span>:</span> <span>WGPUInstanceImpl.init(descriptor:)</span>
</code></pre></div>

<p>and here is the resulting Swift initializer:</p>

<div><pre><code><span>extension</span> <span>WGPUInstanceImpl</span> <span>{</span>
    <span>/**
     * Create a WGPUInstance
     *
     * @returns
     * This value is @ref ReturnedWithOwnership.
     */</span>
    <span>public</span> <span>/*not inherited*/</span> <span>init</span><span>!</span><span>(</span><span>descriptor</span><span>:</span> <span>UnsafePointer</span><span>&lt;</span><span>WGPUInstanceDescriptor</span><span>&gt;!</span><span>)</span>
<span>}</span>
</code></pre></div>

<p>Now, one can create a new <code>WGPUInstance</code> with the normal object-creation syntax, e.g.,</p>

<div><pre><code><span>let</span> <span>instance</span> <span>=</span> <span>WGPUInstance</span><span>(</span><span>descriptor</span><span>:</span> <span>myDescriptor</span><span>)</span>
</code></pre></div>



<p>The WebGPU header defines its own Boolean type. I wish everyone would use C99‚Äôs <code>_Bool</code> and be done with it, but alas, here are the definitions for WebGPUs Boolean types:</p>

<div><pre><code><span>#define WGPU_TRUE (UINT32_C(1))
#define WGPU_FALSE (UINT32_C(0))
</span><span>typedef</span> <span>uint32_t</span> <span>WGPUBool</span><span>;</span>
</code></pre></div>

<p>This means that <code>WGPUBool</code> will come in to Swift as a <code>UInt32</code>. The two macros aren‚Äôt available in Swift at all: they‚Äôre ‚Äútoo complicated‚Äù to be recognized as integral constants. Even if they were available in Swift, it still wouldn‚Äôt be great because we want to use <code>true</code> and <code>false</code> for Boolean values in Swift, not <code>WGPU_TRUE</code> and <code>WGPU_FALSE</code>.</p>

<p>To make <code>WGPUBool</code> easier to use from Swift, we‚Äôre first going to map that typedef to its own <code>struct</code> that stores the underlying <code>UInt32</code>, giving it an identity separate from <code>UInt32</code>. We can do this using a <code>SwiftWrapper</code> API note within the <code>Typedefs</code> section of the file, like this:</p>

<div><pre><code><span>-</span> <span>Name</span><span>:</span> <span>WGPUBool</span>
  <span>SwiftWrapper</span><span>:</span> <span>struct</span>
</code></pre></div>

<p>Now, we get <code>WGPUBool</code> imported like this:</p>

<div><pre><code><span>public</span> <span>struct</span> <span>WGPUBool</span> <span>:</span> <span>Hashable</span><span>,</span> <span>Equatable</span><span>,</span> <span>RawRepresentable</span> <span>{</span>
    <span>public</span> <span>init</span><span>(</span><span>_</span> <span>rawValue</span><span>:</span> <span>UInt32</span><span>)</span>
    <span>public</span> <span>init</span><span>(</span><span>rawValue</span><span>:</span> <span>UInt32</span><span>)</span>
<span>}</span>
</code></pre></div>

<p>To be able to use <code>true</code> and <code>false</code> literals with this new <code>WGPUBool</code>, we can write a little bit of Swift code that makes this type conform to the <a href="https://developer.apple.com/documentation/swift/expressiblebybooleanliteral"><code>ExpressibleByBooleanLiteral</code></a> protocol, like this:</p>

<div><pre><code><span>extension</span> <span>WGPUBool</span><span>:</span> <span>ExpressibleByBooleanLiteral</span> <span>{</span>
  <span>init</span><span>(</span><span>booleanLiteral</span> <span>value</span><span>:</span> <span>Bool</span><span>)</span> <span>{</span>
    <span>self</span><span>.</span><span>init</span><span>(</span><span>rawValue</span><span>:</span> <span>value</span> <span>?</span> <span>1</span> <span>:</span> <span>0</span><span>)</span>
  <span>}</span>
<span>}</span>
</code></pre></div>

<p>That‚Äôs it! Better type safety (you cannot confuse a <code>WGPUBool</code> with any other integer value) and the convenience of Boolean literals in Swift.</p>



<p><code>webgpu.h</code> describes a set of flags using a <code>typedef</code> of the <code>WGPUFlags</code> type (a 64-bit unsigned integer) along with a set of global constants for the different flag values. For example, here is the <code>WGPUBufferUsage</code> flag type and some of its constants:</p>

<div><pre><code><span>typedef</span> <span>WGPUFlags</span> <span>WGPUBufferUsage</span><span>;</span>
<span>static</span> <span>const</span> <span>WGPUBufferUsage</span> <span>WGPUBufferUsage_MapRead</span> <span>=</span> <span>0x0000000000000001</span><span>;</span>
<span>static</span> <span>const</span> <span>WGPUBufferUsage</span> <span>WGPUBufferUsage_MapWrite</span> <span>=</span> <span>0x0000000000000002</span><span>;</span>
<span>static</span> <span>const</span> <span>WGPUBufferUsage</span> <span>WGPUBufferUsage_CopySrc</span> <span>=</span> <span>0x0000000000000004</span><span>;</span>
<span>static</span> <span>const</span> <span>WGPUBufferUsage</span> <span>WGPUBufferUsage_Index</span> <span>=</span> <span>0x0000000000000010</span><span>;</span>
</code></pre></div>

<p>Similar to what we saw with <code>WGPUBool</code>, <code>WGPUBufferUsage</code> is a <code>typedef</code> of a <code>typedef</code> of a <code>uint64_t</code>. There‚Äôs no type safety in this C API, and one could easily mix up these flags with, say, those of <code>WGPUMapMode</code>:</p>

<div><pre><code><span>typedef</span> <span>WGPUFlags</span> <span>WGPUMapMode</span><span>;</span>
<span>static</span> <span>const</span> <span>WGPUMapMode</span> <span>WGPUMapMode_Read</span> <span>=</span> <span>0x0000000000000001</span><span>;</span>
<span>static</span> <span>const</span> <span>WGPUMapMode</span> <span>WGPUMapMode_Write</span> <span>=</span> <span>0x0000000000000002</span><span>;</span>
</code></pre></div>

<p>We can do better, by layering more structure for the Swift version of this API using the same <code>SwiftWrapper</code> approach from <code>WGPUBool</code>. This goes into the <code>Typedefs</code> section of API notes:</p>

<div><pre><code><span>Typedefs</span><span>:</span>
<span>-</span> <span>Name</span><span>:</span> <span>WGPUBufferUsage</span>
  <span>SwiftWrapper</span><span>:</span> <span>struct</span>
</code></pre></div>

<p>Now, <code>WGPUBufferUsage</code> comes in as its own <code>struct</code>:</p>

<div><pre><code><span>public</span> <span>struct</span> <span>WGPUBufferUsage</span> <span>:</span> <span>Hashable</span><span>,</span> <span>Equatable</span><span>,</span> <span>RawRepresentable</span> <span>{</span>
    <span>public</span> <span>init</span><span>(</span><span>_</span> <span>rawValue</span><span>:</span> <span>WGPUFlags</span><span>)</span>
    <span>public</span> <span>init</span><span>(</span><span>rawValue</span><span>:</span> <span>WGPUFlags</span><span>)</span>
<span>}</span>
</code></pre></div>

<p>The initializers let you create a <code>WGPUBufferUsage</code> from a <code>WGPUFlags</code> value, and there is also a <code>rawValue</code> property to get a <code>WGPUFlags</code> value out of a <code>WGPUBufferInstance</code>, so the raw value is always there‚Ä¶ but the default is to be type safe. Additionally, those global constants will come in as members of <code>WGPUBufferUsage</code>, like this:</p>

<div><pre><code><span>extension</span> <span>WGPUBufferUsage</span> <span>{</span>
    <span>/**
     * The buffer can be *mapped* on the CPU side in *read* mode (using @ref WGPUMapMode_Read).
     */</span>
    <span>public</span> <span>static</span> <span>var</span> <span>_MapRead</span><span>:</span> <span>WGPUBufferUsage</span> <span>{</span> <span>get</span> <span>}</span>

    <span>/**
     * The buffer can be *mapped* on the CPU side in *write* mode (using @ref WGPUMapMode_Write).
     *
     * @note This usage is **not** required to set `mappedAtCreation` to `true` in @ref WGPUBufferDescriptor.
     */</span>
    <span>public</span> <span>static</span> <span>var</span> <span>_MapWrite</span><span>:</span> <span>WGPUBufferUsage</span> <span>{</span> <span>get</span> <span>}</span>

    <span>/**
     * The buffer can be used as the *source* of a GPU-side copy operation.
     */</span>
    <span>public</span> <span>static</span> <span>var</span> <span>_CopySrc</span><span>:</span> <span>WGPUBufferUsage</span> <span>{</span> <span>get</span> <span>}</span>

    <span>/**
     * The buffer can be used as the *destination* of a GPU-side copy operation.
     */</span>
    <span>public</span> <span>static</span> <span>var</span> <span>_CopyDst</span><span>:</span> <span>WGPUBufferUsage</span> <span>{</span> <span>get</span> <span>}</span>
<span>}</span>
</code></pre></div>

<p>This means that, if you‚Äôre passing a value of type <code>WPUBufferUsage</code>, you can use the shorthand ‚Äúleading dot‚Äù syntax. For example:</p>

<div><pre><code><span>func</span> <span>setBufferUsage</span><span>(</span><span>_</span> <span>usage</span><span>:</span> <span>WGPUBufferUsage</span><span>)</span> <span>{</span> <span>...</span> <span>}</span>

<span>setBufferUsage</span><span>(</span><span>.</span><span>_MapRead</span><span>)</span>
</code></pre></div>

<p>Swift has dropped the common <code>WPUBufferUsage</code> prefix from the constants when it made them into members. However, the resulting names aren‚Äôt great. We can rename them by providing a <code>SwiftName</code> in the API notes file within the <code>Globals</code> section:</p>

<div><pre><code><span>Globals</span><span>:</span>
<span>-</span> <span>Name</span><span>:</span> <span>WGPUBufferUsage_MapRead</span>
  <span>SwiftName</span><span>:</span> <span>WGPUBufferUsage.mapRead</span>
<span>-</span> <span>Name</span><span>:</span> <span>WGPUBufferUsage_MapWrite</span>
  <span>SwiftName</span><span>:</span> <span>WGPUBufferUsage.mapWrite</span>
</code></pre></div>

<p>We can go one step further by making the <code>WGPUBufferUsage</code> type conform to Swift‚Äôs <a href="https://developer.apple.com/documentation/swift/optionset"><code>OptionSet</code></a> protocol. If we revise the API notes like this:</p>

<div><pre><code><span>Typedefs</span><span>:</span>
<span>-</span> <span>Name</span><span>:</span> <span>WGPUBufferUsage</span>
  <span>SwiftWrapper</span><span>:</span> <span>struct</span>
  <span>SwiftConformsTo</span><span>:</span> <span>Swift.OptionSet</span>
</code></pre></div>

<p>Now, we get the nice option-set syntax we expect in Swift:</p>

<div><pre><code><span>let</span> <span>usageFlags</span><span>:</span> <span>WGPUBufferUsage</span> <span>=</span> <span>[</span><span>.</span><span>mapRead</span><span>,</span> <span>.</span><span>mapWrite</span><span>]</span>
</code></pre></div>



<p>Throughout <code>webgpu.h</code>, the <code>WGPU_NULLABLE</code> macro is used to indicate pointers that can be NULL. The implication is that any pointer that is not marked with <code>WGPU_NULLABLE</code> cannot be NULL. For example, here is the definition of <code>wgpuCreateInstance</code> we used above:</p>

<div><pre><code><span>WGPU_EXPORT</span> <span>WGPUInstance</span> <span>wgpuCreateInstance</span><span>(</span><span>WGPU_NULLABLE</span> <span>WGPUInstanceDescriptor</span> <span>const</span> <span>*</span> <span>descriptor</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>The <code>WGPU_NULLABLE</code> indicates that it‚Äôs acceptable to pass a NULL pointer in as the <code>descriptor</code> parameter. Clang already has <a href="https://clang.llvm.org/docs/AttributeReference.html#nullability-attributes">nullability specifiers</a> to express this information. We could alter the declaration in the header to express that this parameter is nullable but the result type is never NULL, like this:</p>

<div><pre><code><span>WGPU_EXPORT</span> <span>WGPUInstance</span> <span>_Nonnull</span> <span>wgpuCreateInstance</span><span>(</span><span>WGPU_NULLABLE</span> <span>WGPUInstanceDescriptor</span> <span>const</span> <span>*</span> <span>_Nullable</span> <span>descriptor</span><span>)</span> <span>WGPU_FUNCTION_ATTRIBUTE</span><span>;</span>
</code></pre></div>

<p>This eliminates the implicitly-unwrapped optionals (<code>!</code>) from the signature of the initializer, so we end up with one that explicitly accepts a <code>nil</code> descriptor argument and always returns a new instance (never <code>nil</code>):</p>

<div><pre><code><span>extension</span> <span>WGPUInstanceImpl</span> <span>{</span>
    <span>/**
     * Create a WGPUInstance
     *
     * @returns
     * This value is @ref ReturnedWithOwnership.
     */</span>
    <span>public</span> <span>/*not inherited*/</span> <span>init</span><span>(</span><span>descriptor</span><span>:</span> <span>UnsafePointer</span><span>&lt;</span><span>WGPUInstanceDescriptor</span><span>&gt;</span><span>?)</span>
<span>}</span>
</code></pre></div>

<p>Now, I did cheat by hacking the header. Instead, we can express this with API notes on the parameters and result type by extending the entry we already have for <code>wgpuCreateInstance</code> like this:</p>

<div><pre><code><span>-</span> <span>Name</span><span>:</span> <span>wgpuCreateInstance</span>
  <span>SwiftReturnOwnership</span><span>:</span> <span>retained</span>
  <span>SwiftName</span><span>:</span> <span>WGPUInstanceImpl.init(descriptor:)</span>
  <span>Parameters</span><span>:</span>
  <span>-</span> <span>Position</span><span>:</span> <span>0</span>
    <span>Nullability</span><span>:</span> <span>O</span>
  <span>ResultType</span><span>:</span> <span>"</span><span>WGPUInstance</span><span> </span><span>_Nonnull"</span>
</code></pre></div>

<p>To specific nullability of pointer parameters, one can identify them by position (where 0 is the first parameter to the function) and then specify whether the parameter should come into Swift as optional (<code>O</code>, corresponds to <code>_Nullable</code>), non-optional (<code>N</code>, corresponds to <code>_Nonnull</code>) or by left unspecified as an implicitly-unwrapped optional (<code>U</code>, corresponds to <code>_Null_unspecified</code>). For the result type, it‚Äôs a little different: we specified the result type along with the nullability specifier, i.e., <code>WGPUInstance _Nonnull</code>. The end result of these annotations is the same as the modified header, so we can layer nullability information on top of the header.</p>



<p><code>webgpu.h</code> is about 6,400 lines long, and is regenerated from a database of the API as needed. Each of the WebGPU implementations seems to augment or tweak the header a bit. So, rather than grind through and manually do annotations, I wrote a little Swift script to ‚Äúparse‚Äù <code>webgpu.h</code>, identify its patterns, and generate <code>WebGPU.apinotes</code> for most of what is discussed in this post. The entirety of the script is <a href="https://www.swift.org/assets/blog/improving-usability-of-c-libraries-in-swift/webgpu_apinotes.swift">here</a>. It reads <code>webgpu.h</code> from standard input and prints <code>WebGPU.apinotes</code> to standard output.</p>

<p>Because <code>webgpu.h</code> is generated, it has a very regular structure that we can pick up on via regular expressions. For example:</p>

<div><pre><code><span>// Enum definitions, marked by WGPU_ENUM_ATTRIBUTE.</span>
<span>let</span> <span>enumMatcher</span> <span>=</span> <span>/} (?&lt;name&gt;\w+?) WGPU_ENUM_ATTRIBUTE/</span>

<span>// Object definitions, marked by WGPU_OBJECT_ATTRIBUTE.</span>
<span>let</span> <span>objectMatcher</span> <span>=</span> <span>/typedef struct (?&lt;implName&gt;\w+?)\* (?&lt;name&gt;\w+?) WGPU_OBJECT_ATTRIBUTE;/</span>

<span>// Function declarations, marked by WGPU_FUNCTION_ATTRIBUTE</span>
<span>let</span> <span>functionMatcher</span> <span>=</span> <span>/WGPU_EXPORT (?&lt;nullableResult&gt;WGPU_NULLABLE ?)?(?&lt;resultType&gt;\w+?) (?&lt;name&gt;\w+?)\((?&lt;parameters&gt;.*\)?) WGPU_FUNCTION_ATTRIBUTE;/</span>
<span>let</span> <span>parameterMatcher</span> <span>=</span> <span>/(?&lt;type&gt;[^),]+?) (?&lt;name&gt;\w+?)[),]/</span>
</code></pre></div>

<p>That‚Äôs enough to identify all of the enum types (so we can emit the <code>EnumExtensibility: closed</code> API notes), object types (to turn them into shared references), and functions (which get nicer names and such). The script is just a big <code>readLine</code> loop that applies the regexes to capture all of the various types and functions, then does some quick classification before printing out the API notes. The resulting API notes are <a href="https://www.swift.org/assets/blog/improving-usability-of-c-libraries-in-swift/WebGPU.apinotes">in WebGPU.apinotes</a>, and the generated Swift interface after these API notes are applied is <a href="https://www.swift.org/assets/blog/improving-usability-of-c-libraries-in-swift/WebGPU.swiftinterface">here</a>. You can run it with, e.g.,</p>

<div><pre><code>swift <span>-enable-bare-slash-regex</span> webgpu_apinotes.swift &lt; webgpu.h
</code></pre></div>

<p>This script full of regular expressions is, admittedly, a bit of a hack. A better approach for an arbitrary C header would be to use <a href="https://clang.llvm.org/docs/LibClang.html"><code>libclang</code></a> to properly parse the headers. For WebGPU specifically, the webgpu-headers project contains a database from which the header is generated, and one could also generate API notes directly from that header. Regardless of how you get there, many C libraries have well-structured headers with conventions that can be leveraged to create safer, more ergonomic projections in Swift.</p>



<p>The techniques described in this post can be applied to just about any C library. To do so, I recommend setting up a small package like the one described here for WebGPU, so you can iterate quickly on example code to get a feel for how the Swift projection of the C API will work. The annotations might not get you all the way to the best Swift API, but they are a lightweight way to get most of the way there. Feel free to also extend the C types to convenience APIs that make sense in Swift, like I did above to make <code>WGPUBool</code> conform to <code>ExpressibleByBooleanLiteral</code>.</p>

<p>A little bit of annotation work on your favorite C library can make for a safer, more ergonomic, more Swifty experience of working with that library.</p>



<p>The regular structure of <code>webgpu.h</code> helped considerably when trying to expose the API nicely in Swift. That said, there are a few ways in which <code>webgpu.h</code> could be improved to require less annotation for this purpose:</p>

<ul>
  <li>
    <p><code>WGPU_ENUM_ATTRIBUTE</code> would be slightly nicer if placed on the <code>enum</code> itself, rather than on the <code>typedef</code>. If it were there, we could use</p>

    <div><pre><code><span>#define WGPU_ENUM_ATTRIBUTE __attribute__((enum_extensibility(closed)))
</span></code></pre></div>

    <p>and not have to generate any API notes to bring these types in as proper enums in Swift.</p>
  </li>
  <li>
    <p><code>WGPU_OBJECT_ATTRIBUTE</code> could provide the names of the retain and release operations and be placed on the <code>struct</code> itself. If it were there, we could use</p>

    <div><pre><code><span>#define WGPU_OBJECT_ATTRIBUTE(RetainFn,ReleaseFn) SWIFT_SHARED_REFERENCE(RetainFn,ReleaseFn)
</span></code></pre></div>

    <p>and not have to generate any API notes to bring these types in as classes in Swift.</p>
  </li>
  <li>
    <p><code>WGPU_NULLABLE</code> could be placed on the pointer itself (i.e., after the <code>*</code>) rather than at the beginning of the type, to match the position of <a href="https://clang.llvm.org/docs/AttributeReference.html#nullability-attributes">Clang‚Äôs nullability attributes</a>. If it were placed there, then</p>

    <div><pre><code><span>#define WGPU_NULLABLE _Nullable
</span></code></pre></div>

    <p>would work with Clangs‚Äô longstanding nullable-types support. Swift would then import such pointers as optional types (with <code>?</code>). Moreover, if some macros <code>WGPU_ASSUME_NONNULL_BEGIN</code> and <code>WGPU_ASSUME_NONNULL_END</code> were placed at the beginning and end of the header, they could be mapped to Clang‚Äôs pragmas to assume that any pointer not marked ‚Äúnullable‚Äù is always non-null:</p>
    <div><pre><code><span>#define WGPU_ASSUME_NONNULL_BEGIN #pragma clang assume_nonnull begin
#define WGPU_ASSUME_NONNULL_END #pragma clang assume_nonnull end
</span></code></pre></div>

    <p>This would eliminate all of the implicitly unwrapped optionals (marked <code>!</code> in the Swift interface), making it easier to use safely.</p>
  </li>
</ul>
 
      
      

      

      

      <hr>

      <h2>Continue Reading</h2>

      
      <nav>
        <div>
          <ul>
            
            <li>
              <div>
                <h3>What's new in Swift: December 2025 Edition</h3>
                <p><time pubdate="" datetime="2026-01-22T08:00:00-04:00">December 19, 2025</time></p><p>
                  Welcome to the latest digest of news from the Swift project.

                </p>
                <p><a href="https://www.swift.org/blog/whats-new-in-swift-december-2025/" rel="prev"> More </a>
              </p></div>
            </li>
             
          </ul>
        </div>
      </nav>
      
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Scaling PostgreSQL to power 800M ChatGPT users (259 pts)]]></title>
            <link>https://openai.com/index/scaling-postgresql/</link>
            <guid>46725300</guid>
            <pubDate>Thu, 22 Jan 2026 21:24:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://openai.com/index/scaling-postgresql/">https://openai.com/index/scaling-postgresql/</a>, See on <a href="https://news.ycombinator.com/item?id=46725300">Hacker News</a></p>
Couldn't get https://openai.com/index/scaling-postgresql/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Capital One to acquire Brex for $5.15B (332 pts)]]></title>
            <link>https://www.reuters.com/legal/transactional/capital-one-buy-fintech-firm-brex-515-billion-deal-2026-01-22/</link>
            <guid>46725288</guid>
            <pubDate>Thu, 22 Jan 2026 21:23:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reuters.com/legal/transactional/capital-one-buy-fintech-firm-brex-515-billion-deal-2026-01-22/">https://www.reuters.com/legal/transactional/capital-one-buy-fintech-firm-brex-515-billion-deal-2026-01-22/</a>, See on <a href="https://news.ycombinator.com/item?id=46725288">Hacker News</a></p>
Couldn't get https://www.reuters.com/legal/transactional/capital-one-buy-fintech-firm-brex-515-billion-deal-2026-01-22/: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA[White House Posts Digitally Altered Image of Woman Arrested After ICE Protest (150 pts)]]></title>
            <link>https://www.theguardian.com/us-news/2026/jan/22/white-house-ice-protest-arrest-altered-image</link>
            <guid>46725268</guid>
            <pubDate>Thu, 22 Jan 2026 21:21:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/us-news/2026/jan/22/white-house-ice-protest-arrest-altered-image">https://www.theguardian.com/us-news/2026/jan/22/white-house-ice-protest-arrest-altered-image</a>, See on <a href="https://news.ycombinator.com/item?id=46725268">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="maincontent"><p>The White House posted a digitally altered image of a woman who was arrested on Thursday in a case touted by the US attorney general, <a href="https://www.theguardian.com/us-news/pam-bondi" data-link-name="in body link">Pam Bondi</a>, to make it seem as if she was dramatically crying, a Guardian analysis of the image has found.</p><p>The woman, Nekima Levy Armstrong, also appears to have darker skin in the altered image. Armstrong was <a href="https://www.theguardian.com/us-news/2026/jan/22/two-arrests-minnesota-church-protest" data-link-name="in body link">one of three people arrested</a> on Thursday in connection to a demonstration that disrupted church services in St Paul, Minnesota, on Sunday. Demonstrators alleged that one of the pastors, David Easterwood, was the acting field director of the St Paul Immigration and Customs Enforcement (ICE) office. Bondi announced the arrests on social media on Thursday morning.</p><p>The homeland security secretary, <a href="https://www.theguardian.com/us-news/kristi-noem" data-link-name="in body link">Kristi Noem</a>, posted an image of Armstrong‚Äôs arrest at 10.21am on Thursday, less than an hour after Bondi‚Äôs announcement. The image shows a law enforcement agent, face blurred out, escorting Armstrong, who appears to be handcuffed. Armstrong, dressed in all black, appears to be composed in the picture.</p><p>A little more than 30 minutes later, the White House posted another image of Armstrong‚Äôs arrest in which she is crying. The White House press secretary, Karoline Leavitt, reposted the image. The image posted by the White House is altered, a Guardian analysis found.</p><gu-island name="InteractiveBlockComponent" priority="critical" deferuntil="idle" props="{&quot;url&quot;:&quot;https://interactive.guim.co.uk/2018/08/interactive-now-and-then-embed/embed/embed.html?mobile_before=//media.guim.co.uk/ea920dcfe2ee1f3c48902b24a2344394cccb3bed/0_0_1054_1333/791.jpg&amp;desktop_before=//media.guim.co.uk/ea920dcfe2ee1f3c48902b24a2344394cccb3bed/0_0_1054_1333/791.jpg&amp;label_before=DHS image&amp;mobile_after=//media.guim.co.uk/40c88b83a83f7381a958386a9cbe13d3f1fe30c1/0_0_1054_1333/791.jpg&amp;desktop_after=//media.guim.co.uk/40c88b83a83f7381a958386a9cbe13d3f1fe30c1/0_0_1054_1333/791.jpg&amp;label_after=White House image&amp;analytics_label=a side by side comparison of a DHS released image and a White House released image&amp;type=slider&amp;&quot;,&quot;scriptUrl&quot;:&quot;https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js&quot;,&quot;alt&quot;:&quot;two images of a woman, one neutral and one crying&quot;,&quot;format&quot;:{&quot;design&quot;:0,&quot;display&quot;:0,&quot;theme&quot;:0},&quot;elementId&quot;:&quot;d895bd43-59ff-47e5-b394-6a5772b0bb15&quot;,&quot;isMainMedia&quot;:false}"><figure id="d895bd43-59ff-47e5-b394-6a5772b0bb15" data-alt="two images of a woman, one neutral and one crying" data-testid="interactive-element-two%20images%20of%20a%20woman,%20one%20neutral%20and%20one%20crying" data-spacefinder-role="inline"><a data-name="placeholder" href="https://interactive.guim.co.uk/2018/08/interactive-now-and-then-embed/embed/embed.html?mobile_before=//media.guim.co.uk/ea920dcfe2ee1f3c48902b24a2344394cccb3bed/0_0_1054_1333/791.jpg&amp;desktop_before=//media.guim.co.uk/ea920dcfe2ee1f3c48902b24a2344394cccb3bed/0_0_1054_1333/791.jpg&amp;label_before=DHS%20image&amp;mobile_after=//media.guim.co.uk/40c88b83a83f7381a958386a9cbe13d3f1fe30c1/0_0_1054_1333/791.jpg&amp;desktop_after=//media.guim.co.uk/40c88b83a83f7381a958386a9cbe13d3f1fe30c1/0_0_1054_1333/791.jpg&amp;label_after=White%20House%20image&amp;analytics_label=a%20side%20by%20side%20comparison%20of%20a%20DHS%20released%20image%20and%20a%20White%20House%20released%20image&amp;type=slider&amp;">two images of a woman, one neutral and one crying</a></figure></gu-island><p>The Guardian overlaid the White House photo with the Noem photo and found that the law enforcement agents in both pictures line up exactly, confirming they are the same image. There are other similarities between the photos. An unidentified person can be seen in the same place behind the arresting agent. And the arresting agent‚Äôs arm appears to be behind Armstrong‚Äôs back in exactly the same position.</p><p>Asked whether the image had been digitally altered, the White House responded by sending a post on X from Kaelan Dorr, the deputy communications director.</p><p>‚ÄúYET AGAIN to the people who feel the need to reflexively defend perpetrators of heinous crimes in our country I share with you this message: Enforcement of the law will continue. The memes will continue. Thank you for your attention to this matter,‚Äù <a href="https://x.com/Kaelan47/status/2014410500096856358?s=20" data-link-name="in body link">he said</a>.</p><p>The White House X account, which has around 3.5 million followers, has made at least 14 posts with AI since the start of Trump‚Äôs second term, <a href="https://www.poynter.org/fact-checking/2025/trump-white-house-ai-political-messaging/" data-link-name="in body link">Poynter reported in October</a>.</p><p><em>Julius Constantine Motal and David McCoy contributed reporting</em></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why does SSH send 100 packets per keystroke? (568 pts)]]></title>
            <link>https://eieio.games/blog/ssh-sends-100-packets-per-keystroke/</link>
            <guid>46723990</guid>
            <pubDate>Thu, 22 Jan 2026 19:27:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://eieio.games/blog/ssh-sends-100-packets-per-keystroke/">https://eieio.games/blog/ssh-sends-100-packets-per-keystroke/</a>, See on <a href="https://news.ycombinator.com/item?id=46723990">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><div><a href="https://eieio.games/blog/ssh-sends-100-packets-per-keystroke/"></a><div><p>And why do I care?</p><p>Jan 22, 2026</p></div></div>
<p>Here are a few lines of summarized <code>tcpdump</code> output for an ssh session where I send a single keystroke:</p>
<pre><code><span>$ ./first_lines_of_pcap.sh single-key.pcap
</span><span>  <span>1</span>   <span>0</span>.000s  CLIENT-<span>&gt;</span>SERVER   <span>36</span> bytes
</span><span>  <span>2</span>   <span>0</span>.007s  SERVER-<span>&gt;</span>CLIENT  <span>564</span> bytes
</span><span>  <span>3</span>   <span>0</span>.015s  CLIENT-<span>&gt;</span>SERVER    <span>0</span> bytes
</span><span>  <span>4</span>   <span>0</span>.015s  CLIENT-<span>&gt;</span>SERVER   <span>36</span> bytes
</span><span>  <span>5</span>   <span>0</span>.015s  SERVER-<span>&gt;</span>CLIENT   <span>36</span> bytes
</span><span>  <span>6</span>   <span>0</span>.026s  CLIENT-<span>&gt;</span>SERVER    <span>0</span> bytes
</span><span>  <span>7</span>   <span>0</span>.036s  CLIENT-<span>&gt;</span>SERVER   <span>36</span> bytes
</span><span>  <span>8</span>   <span>0</span>.036s  SERVER-<span>&gt;</span>CLIENT   <span>36</span> bytes
</span><span>  <span>9</span>   <span>0</span>.046s  CLIENT-<span>&gt;</span>SERVER    <span>0</span> bytes
</span><span> <span>10</span>   <span>0</span>.059s  CLIENT-<span>&gt;</span>SERVER   <span>36</span> bytes
</span></code></pre>
<p>I said a ‚Äúfew‚Äù because there are a <em>lot</em> of these lines.</p>
<pre><code><span>$ ./summarize_pcap.sh single-key.pcap
</span><span>Total packets: <span>270</span>
</span><span>
</span><span>  <span>36</span>-byte msgs:   <span>179</span> packets <span>(</span> <span>66.3</span>%<span>)</span>   <span>6444</span> bytes
</span><span>  Other data:       <span>1</span> packet  <span>(</span>  <span>0.4</span>%<span>)</span>    <span>564</span> bytes
</span><span>  TCP ACKs:        <span>90</span> packets <span>(</span> <span>33.3</span>%<span>)</span>
</span><span>
</span><span>  Data sent:      <span>6444</span> bytes <span>in</span> <span>36</span>-byte messages,  <span>564</span> bytes <span>in</span> other data
</span><span>  Ratio:          <span>11</span>.4x <span>more</span> data <span>in</span> <span>36</span>-byte messages than other data
</span><span>
</span><span>  Data packet rate: ~90 packets/second <span>(</span>avg <span>11.1</span> ms between data packets<span>)</span>
</span></code></pre>
<p>That is a lot of packets for one keypress. What‚Äôs going on here? Why do I care?</p>
<details><summary><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg> <!-- -->here's those scripts if you're curious</summary><pre><code><span><span># first_lines_of_pcap.sh</span>
</span><span>tshark <span>-r</span> <span>"<span>$1</span>"</span> <span>\</span>
</span><span>  <span>-T</span> fields <span>-e</span> frame.number <span>-e</span> frame.time_relative <span>-e</span> ip.src <span>-e</span> ip.dst <span>-e</span> tcp.len <span>|</span> <span>\</span>
</span><span>  <span>awk</span> <span>'NR&lt;=10 {dir = ($3 ~ /71\.190/ ? "CLIENT-&gt;SERVER" : "SERVER-&gt;CLIENT");
</span></span><span><span>       printf "%3d  %6.3fs  %-4s  %3s bytes\n", $1, $2, dir, $5}'</span>
</span></code></pre><pre><code><span><span># summarize_pcap.sh</span>
</span><span>tshark <span>-r</span> <span>"<span>$1</span>"</span> <span>-Y</span> <span>"frame.time_relative &lt;= 2.0"</span> <span>-T</span> fields <span>-e</span> frame.time_relative <span>-e</span> tcp.len <span>|</span> <span>awk</span> <span>'
</span></span><span><span>  {
</span></span><span><span>      count++
</span></span><span><span>      payload = $2
</span></span><span><span>
</span></span><span><span>      if (payload == 0) {
</span></span><span><span>          acks++
</span></span><span><span>      } else if (payload == 36) {
</span></span><span><span>          mystery++
</span></span><span><span>          if (NR &gt; 1 &amp;&amp; prev_data_time &gt; 0) {
</span></span><span><span>              delta = $1 - prev_data_time
</span></span><span><span>              sum_data_deltas += delta
</span></span><span><span>              data_intervals++
</span></span><span><span>          }
</span></span><span><span>          prev_data_time = $1
</span></span><span><span>      } else {
</span></span><span><span>          game_data++
</span></span><span><span>          game_bytes = payload
</span></span><span><span>          if (NR &gt; 1 &amp;&amp; prev_data_time &gt; 0) {
</span></span><span><span>              delta = $1 - prev_data_time
</span></span><span><span>              sum_data_deltas += delta
</span></span><span><span>              data_intervals++
</span></span><span><span>          }
</span></span><span><span>          prev_data_time = $1
</span></span><span><span>      }
</span></span><span><span>  }
</span></span><span><span>  END {
</span></span><span><span>      print "Total packets:", count
</span></span><span><span>      print ""
</span></span><span><span>      printf "  36-byte msgs:   %3d packets (%5.1f%%)  %5d bytes\n", mystery, 100*mystery/count, mystery*36
</span></span><span><span>      printf "  Other data:     %3d packet  (%5.1f%%)  %5d bytes\n", game_data, 100*game_data/count, game_bytes
</span></span><span><span>      printf "  TCP ACKs:       %3d packets (%5.1f%%)\n", acks, 100*acks/count
</span></span><span><span>      print ""
</span></span><span><span>      printf "  Data sent:      %d bytes in 36-byte messages,  %d bytes in other data\n", mystery*36, game_bytes
</span></span><span><span>      printf "  Ratio:          %.1fx more data in 36-byte messages than other data\n", (mystery*36)/game_bytes
</span></span><span><span>      print ""
</span></span><span><span>      avg_ms = (sum_data_deltas / data_intervals) * 1000
</span></span><span><span>      printf "  Data packet rate: ~%d packets/second (avg %.1f ms between data packets)\n", int(1000/avg_ms + 0.5), avg_ms
</span></span><span><span>  }'</span>
</span></code></pre></details>
<!-- -->
<h2 id="toc:discovery">Discovery</h2>
<p>I am working on a high-performance game that runs over ssh. The TUI for the game is created in <a href="https://github.com/charmbracelet/bubbletea">bubbletea</a> <a>1</a> and sent over ssh via <a href="https://github.com/charmbracelet/wish">wish</a>.</p>
<div data-is-footnote="true"><p><span>1</span></p><p>I have also forked bubbletea to make it faster. Stay tuned!</p></div>
<p>The game is played in an 80x60 window that I update 10 times a second. I‚Äôm targeting at least 2,000 concurrent players, which means updating ~100 million cells a second. I care about performance.</p>
<p>So I have a script that connects a few hundred bots over ssh and has them make a move a second. Then I use go‚Äôs <a href="https://pkg.go.dev/net/http/pprof">outstanding profiling tools</a> to look at what‚Äôs going on.</p>
<p>Yesterday I inadvertently broke my test harness. Instead of regularly sending game data, my server sent the bots a single message that said ‚Äúyour screen is too small.‚Äù This cut my game‚Äôs CPU and bandwidth usage in half.</p>
<p>At first I was disappointed. I (briefly) thought I had a free massive speedup on my hands, but it was actually a testing error.</p>
<p>But wait.</p>
<p><em>If I wasn‚Äôt sending game data back to my bots, why did CPU usage drop by 50% instead of 100%?</em></p>
<h2 id="toc:investigation">Investigation</h2>
<p>As part of debugging the test harness issue, I used <code>tcpdump</code> to log game traffic with and without the breaking change. Something like:</p>
<pre><code><span><span># The game runs on port 22</span>
</span><span><span>timeout</span> 30s tcpdump <span>-i</span> eth0 <span>'port 22'</span> <span>-w</span> with-breaking-change.pcap
</span><span><span># Revert change</span>
</span><span><span>timeout</span> 30s tcpdump <span>-i</span> eth0 <span>'port 22'</span> <span>-w</span> without-breaking-change.pcap
</span></code></pre>
<p>Our breaking change stopped us from rendering our game over ssh. So <code>with-breaking-change.pcap</code> contains packets that represent the <em>overhead</em> of each connection without actually rendering the game.</p>
<p>I was debugging this with Claude Code, so I asked it to summarize what it saw in the pcap.</p>
<pre><code><span>Wanna take a look yourself? I put with-breaking-change.pcap in this directory
</span><span>
</span><span>--
</span><span>
</span><span>Wow! Here's what I found:
</span><span>
</span><span>Packet Size Distribution (413,703 total packets):
</span><span>274,907 packets (66%): Exactly 36 bytes
</span><span>138,778 packets (34%): 0 bytes (TCP ACKs)
</span><span>18 packets (&lt;0.1%): 72 bytes
</span></code></pre>
<p>Further analysis on a smaller pcap pointed to these mysterious packets arriving ~20ms apart.</p>
<p>This was baffling to me (and to Claude Code). We kicked around several ideas like:</p>
<ul>
<li>SSH flow control messages</li>
<li>PTY size polling or other status checks</li>
<li>Some quirk of bubbletea or wish</li>
</ul>
<p>One thing stood out - these exchanges were initiated by my <em>ssh client</em> (stock ssh installed on MacOS) - not by my server.</p>
<p>On a hunch, I took a <code>tcpdump</code> of a regular ssh session.</p>
<pre><code><span><span># on my mac, in one tab</span>
</span><span><span>sudo</span> tcpdump <span>-ien0</span> <span>'port 22'</span>
</span><span>
</span><span><span># on my mac, in another tab</span>
</span><span><span>ssh</span> <span>$some_vm_of_mine</span>
</span></code></pre>
<p>I waited for the initial connection chatter to die down, sent one keystroke to my remote vm, and looked at the <code>tcpdump</code> output.</p>
<p>I saw the exact same pattern! What in the world?</p>
<h2 id="toc:root-cause">Root cause</h2>
<p>Once I realized that this was a property of stock ssh and not my game, debugging got a lot easier.</p>
<p>Running <code>ssh -vvv</code> gave me a pretty good sense of what was going on:</p>
<pre><code><span>debug3: obfuscate_keystroke_timing: starting: interval ~20ms
</span><span>debug3: obfuscate_keystroke_timing: stopping: chaff time expired (49 chaff packets sent) 
</span><span>debug3: obfuscate_keystroke_timing: starting: interval ~20ms
</span><span>debug3: obfuscate_keystroke_timing: stopping: chaff time expired (101 chaff packets sent)
</span></code></pre>
<p>That <code>20ms</code> is a smoking gun - it lines up perfectly with the mysterious pattern we saw earlier! And the rest of the message is pretty helpful too - we sent 49 ‚Äúchaff‚Äù packets for the first keystroke and 101 ‚Äúchaff‚Äù for around the second one.</p>
<p>In 2023, ssh added <a href="https://undeadly.org/cgi?action=article;sid=20230829051257">keystroke timing obfuscation</a>. The idea is that the speed at which you type different letters betrays some information about which letters you‚Äôre typing. So ssh sends lots of ‚Äúchaff‚Äù packets along with your keystrokes to make it hard for an attacker to determine when you‚Äôre actually entering keys.</p>
<p>That makes a lot of sense for regular ssh sessions, where privacy is critical. But it‚Äôs a lot of overhead for an open-to-the-whole-internet game where <em>latency</em> is critical.</p>

<p>Keystroke obfuscation can be disabled client-side. After reverting my original breaking change, I tried updating my test harness to pass <code>ObscureKeystrokeTiming=no</code> when starting up ssh sessions.</p>
<p>This worked great. CPU usage dropped dramatically and bots still received valid data.</p>
<p>But this is hardly a solution in the real world. I want <code>ssh mygame</code> to Just Work without asking users to pass options that they might not understand.</p>
<p>Claude Code originally didn‚Äôt have much faith that we could disable this functionality server-side.</p>
<div><p><img alt="Screenshot of a claude code transcript. Full text:
User
Is there any way to disable responding to the chaff server-side?

Assistant
Probably not. Here's why:

The chaff packets are legitimate SSH protocol messages (likely SSH_MSG_CHANNEL_WINDOW_ADJUST). The server must respond to maintain the SSH connection according to the protocol spec - if it ignored them, the connection would stall or break.
" loading="lazy" width="1678" height="602" decoding="async" data-nimg="1" src="https://eieio.games/images/ssh-sends-100-packets-per-keystroke/probably-not.webp"></p><p>generated with simon wilson's excellent claude-code-transcripts tool</p></div>
<p>Fortunately, the <a href="https://undeadly.org/cgi?action=article&amp;sid=20230829051257">description</a> I found of SSH keystroke obfuscation made it easy to look up the relevant code in go‚Äôs ssh library (which I was transitively depending on).</p>
<pre><code><span>Log message:
</span><span>Introduce a transport-level ping facility
</span><span>
</span><span>This adds a pair of SSH transport protocol messages SSH2_MSG_PING/PONG
</span><span>to implement a ping capability. These messages use numbers in the "local
</span><span>extensions" number space and are advertised using a "<a href="https://eieio.games/cdn-cgi/l/email-protection" data-cfemail="c3b3aaada483acb3a6adb0b0abeda0acae">[email&nbsp;protected]</a>"
</span><span>ext-info message with a string version number of "0".
</span></code></pre>
<p>The ‚Äúchaff‚Äù messages that ssh uses to obscure keystrokes are SSH2_MSG_PING messages. And they‚Äôre sent to servers that advertise the availability of the <code><a href="https://eieio.games/cdn-cgi/l/email-protection" data-cfemail="e7978e8980a78897828994948fc984888a">[email&nbsp;protected]</a></code> extension. What if we just‚Ä¶don‚Äôt advertise <code><a href="https://eieio.games/cdn-cgi/l/email-protection" data-cfemail="24544d4a43644b54414a57574c0a474b49">[email&nbsp;protected]</a></code>?</p>
<p>I searched <a href="https://cs.opensource.google/go/x/crypto/+/master:ssh/">go‚Äôs ssh library</a> for <code><a href="https://eieio.games/cdn-cgi/l/email-protection" data-cfemail="ef9f868188af809f8a819c9c87c18c8082">[email&nbsp;protected]</a></code> and found <a href="https://cs.opensource.google/go/x/crypto/+/833695f0a57b3037385dc9c0073bc88773cae6f3">the commit where support was added</a>. The commit was tiny and seemed <em>very</em> easy to revert.</p>
<p>I cloned the go crypto repo and told Claude to revert this change and update our dependencies to use our clone (<a href="https://go.dev/ref/mod#go-mod-file-replace">go‚Äôs replace directive</a> makes forking a library very easy).</p>
<p>Then I re-ran my test harness. The results were‚Ä¶very good:</p>
<pre><code><span>Total CPU  29.90%          -&gt; 11.64%
</span><span>Syscalls   3.10s           -&gt; 0.66s
</span><span>Crypto     1.6s            -&gt; 0.11s
</span><span>Bandwidth  ~6.5 Mbit/sec   -&gt; ~3 Mbit/sec
</span></code></pre>
<p>Claude was also pretty pumped:</p>
<div><p><img alt="Chat message from claude code. Full text:
HOLY COW! Look at that CPU usage:

Duration: 30.15s, Total samples = 3.51s (11.64%)
" loading="lazy" width="1658" height="290" decoding="async" data-nimg="1" src="https://eieio.games/images/ssh-sends-100-packets-per-keystroke/claude-pumped.webp"></p><p>yes it's 1:30 am what of it</p></div>
<p>Obviously forking go‚Äôs crypto library is a little scary, and I‚Äôm gonna have to do some thinking about how to maintain my little patch in a safe way.</p>
<p>But this is a <em>huge</em> improvement. I‚Äôve spent much of the last week squeezing out small single-digit performance wins. A &gt;50% drop was unimaginable to me.</p>
<h2 id="toc:debugging-with-llms-was-fun">Debugging with LLMs was fun</h2>
<p>I‚Äôve been thinking about <a href="https://eieio.games/blog/will-ai-pet-my-dog-for-me/">whether LLMs remove parts of the problem-solving process that I enjoy</a>. But I‚Äôve gotta say, debugging this problem using Claude Code was super fun.</p>
<p>I am familiar enough with <code>tcpdump</code>, <code>tshark</code>, and friends to know what they can do. But I don‚Äôt use them regularly enough to be fast with them. Being able to tell an agent ‚Äúhere‚Äôs a weird pcap - tell me what‚Äôs going on‚Äù was really lovely. And by watching commands as the agent ran them I was able to keep my mental model of the problem up to date.</p>
<p>There were still edge cases. At some point in my confusion I switched to ChatGPT  and it <em>very</em> confidently told me that my tcpdump output was normal ssh behavior:</p>
<div><p><img alt="ChatGPT message. Full text:
Yeah, that trace looks wild at first glance, but it‚Äôs mostly ‚Äúnormal‚Äù SSH/TCP behavior plus the fact that SSH is optimized for latency, not packet efficiency.

Let me unpack what you‚Äôre seeing and why it‚Äôs chewing CPU.

1. What those tcpdump lines actually are

From your snippet:
" loading="lazy" width="1350" height="464" decoding="async" data-nimg="1" src="https://eieio.games/images/ssh-sends-100-packets-per-keystroke/chatgpt-confident.webp"></p><p>do all chatgpt messages have this tone and formatting now?</p></div>
<p>And then doubled down when I pushed back:</p>
<div><p><img alt="ChatGPT message. Full text:
Thought for 42s

Gotcha, that context helps a lot.

Short version:
What you‚Äôre seeing is almost certainly a ton of tiny writes being turned into a ton of tiny SSH records, not some special ‚Äúper-keypress flow-control storm‚Äù in SSH itself.
" loading="lazy" width="1350" height="350" decoding="async" data-nimg="1" src="https://eieio.games/images/ssh-sends-100-packets-per-keystroke/chatgpt-confident2.webp"></p><p>no!!!</p></div>
<p>Similarly, I had to push Claude Code to consider forking go‚Äôs ssh library. And I had to make the original leap of ‚Äúwait‚Ä¶if our test harness was broken, why was usage not 0%?‚Äù</p>
<p>When you say ‚ÄúLLMs did not fully solve this problem‚Äù some people tend to respond with ‚Äúyou‚Äôre holding it wrong!‚Äù</p>
<p>I think they‚Äôre sometimes right! Interacting with LLMs is a new skill, and it feels pretty weird if you‚Äôre used to writing software like it‚Äôs 2020. A more talented user of LLMs may have trivially solved this problem.</p>
<p>But the best way to develop a skill is by practicing it. And for me, that means figuring out how to transfer my problem-solving intuitions to the tools that I‚Äôm using.</p>
<p>Besides. Being in the loop is fun. How else would I write this post?</p></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA['Active' sitting is better for brain health: review of studies (118 pts)]]></title>
            <link>https://www.sciencealert.com/not-all-sitting-is-equal-one-type-was-just-linked-to-better-brain-health</link>
            <guid>46723694</guid>
            <pubDate>Thu, 22 Jan 2026 19:03:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.sciencealert.com/not-all-sitting-is-equal-one-type-was-just-linked-to-better-brain-health">https://www.sciencealert.com/not-all-sitting-is-equal-one-type-was-just-linked-to-better-brain-health</a>, See on <a href="https://news.ycombinator.com/item?id=46723694">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
			<p><a href="https://www.sciencealert.com/excessive-sitting-raises-risk-of-early-death-now-we-know-how-much">Excessive sitting</a> isn't good for a person's physical or mental health, but there's a type of sedentary activity that may not <a href="https://www.sciencealert.com/sitting-could-be-shrinking-your-brain-and-exercise-may-not-help">shrink our brains</a> or cost our cognition to the same extent.</p><p>A systematic review of 85 studies has now found good reason to differentiate between 'active' sitting, like playing cards or reading, and 'passive' sitting, like watching TV.</p><p>The former may actually boost brain health.</p><p>That's probably because active sitting engages the brain, whereas passive sitting lets a person take a back seat both physically and cognitively.</p><p><strong>Related: <a href="https://www.sciencealert.com/scientists-revealed-how-much-exercise-you-need-to-offset-sitting-all-day">Scientists Revealed How Much Exercise You Need to 'Offset' Sitting All Day</a></strong></p><p>"Total sitting time has been shown to be related to brain health; however, sitting is often treated as a single entity, without considering the specific type of activity," <a href="https://news.uq.edu.au/2026-01-not-all-sitting-same-when-it-comes-brain-health">explains</a> public health researcher Paul Gardiner from the University of Queensland in Australia.</p><p>"Most people spend many hours sitting each day, so the type of sitting really matters ‚Ä¶ These findings show that small everyday choices ‚Äì like reading instead of watching television ‚Äì may help keep your brain healthier as you age."</p><p>Obviously, <a href="https://www.sciencealert.com/exercise-boosts-brain-function-across-all-ages-massive-study-confirms">exercise remains incredibly important</a> for cognitive health, but giving your brain a workout is also important, and that doesn't necessarily mean you have to be on your feet.</p><figure id="attachment_189878" aria-describedby="caption-attachment-189878"><img decoding="async" src="https://www.sciencealert.com/images/2026/01/people_playing_cards_642.jpg" alt="three men at a table playing a card game" width="642" height="400" srcset="https://www.sciencealert.com/images/2026/01/people_playing_cards_642.jpg 642w, https://www.sciencealert.com/images/2026/01/people_playing_cards_642-600x374.jpg 600w" sizes="(max-width: 642px) 100vw, 642px" loading="lazy"><figcaption id="caption-attachment-189878">'Active' sitting is better for your brain than passive forms of sitting. (<a href="https://www.canva.com/photos/MAGiNppUFiI/">Drs Producoes/Getty Images/Canva</a>)</figcaption></figure><p>Across numerous studies, Gardiner and colleagues found that active sitting activities, like reading, playing card games, and using a computer, showed "overwhelmingly positive associations with cognitive health, enhancing cognitive functions such as executive function, situational memory, and working memory."</p><p>Meanwhile, passive sitting was most consistently associated with negative cognitive outcomes, including increased <a href="https://www.sciencealert.com/major-study-links-15-factors-to-early-dementia-risk">risk of dementia</a>.</p><p><a href="https://www.sciencealert.com/castingcall?utm_source=SA_website&amp;utm_medium=article&amp;utm_campaign=casting_call"><img decoding="async" src="https://www.sciencealert.com/images/2026/01/Mid-Article-Promos-Casting-Call-1-642x272.jpg" alt="Audition now for ScienceAlert's Casting Call" width="642" height="272" srcset="https://www.sciencealert.com/images/2026/01/Mid-Article-Promos-Casting-Call-1-642x272.jpg 642w, https://www.sciencealert.com/images/2026/01/Mid-Article-Promos-Casting-Call-1-1200x509.jpg 1200w, https://www.sciencealert.com/images/2026/01/Mid-Article-Promos-Casting-Call-1-768x326.jpg 768w, https://www.sciencealert.com/images/2026/01/Mid-Article-Promos-Casting-Call-1-600x255.jpg 600w, https://www.sciencealert.com/images/2026/01/Mid-Article-Promos-Casting-Call-1.jpg 1266w" sizes="(max-width: 642px) 100vw, 642px" loading="lazy"></a></p><p>The effect sizes were small but significant. The study authors hope their results will help inform future health research and more nuanced health guidance.</p><p>For example, the researchers suggest guidelines should recognize the difference between passively watching TV and actively using a computer, and encourage people to take <a href="https://www.sciencealert.com/exercise-snacks-throughout-your-day-have-real-health-benefits-study-finds">short breaks</a> to stimulate their brains and move.</p><p>Their review focused on studies of typical sedentary activities in natural settings, rather than structured programs designed to boost brain function, making it relevant to people's everyday lives.</p><p>"Health advice could shift from simply saying 'sit less' to encouraging more mentally engaging activities while sitting," <a href="https://news.uq.edu.au/2026-01-not-all-sitting-same-when-it-comes-brain-health">argues</a> Gardiner.</p><p>"This could help people make easy, realistic changes that support long‚Äëterm brain health and potentially reduce dementia risk."</p><p>The study was published in the <em><a href="https://doi.org/10.1177/13872877251394751">Journal of Alzheimer's Disease</a></em>.</p>
		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I was banned from Claude for scaffolding a Claude.md file? (605 pts)]]></title>
            <link>https://hugodaniel.com/posts/claude-code-banned-me/</link>
            <guid>46723384</guid>
            <pubDate>Thu, 22 Jan 2026 18:38:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://hugodaniel.com/posts/claude-code-banned-me/">https://hugodaniel.com/posts/claude-code-banned-me/</a>, See on <a href="https://news.ycombinator.com/item?id=46723384">Hacker News</a></p>
Couldn't get https://hugodaniel.com/posts/claude-code-banned-me/: Error: unable to verify the first certificate]]></description>
        </item>
        <item>
            <title><![CDATA[Recent discoveries on the acquisition of the highest levels of human performance (134 pts)]]></title>
            <link>https://www.science.org/doi/abs/10.1126/science.adt7790</link>
            <guid>46722853</guid>
            <pubDate>Thu, 22 Jan 2026 18:01:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.science.org/doi/abs/10.1126/science.adt7790">https://www.science.org/doi/abs/10.1126/science.adt7790</a>, See on <a href="https://news.ycombinator.com/item?id=46722853">Hacker News</a></p>
Couldn't get https://www.science.org/doi/abs/10.1126/science.adt7790: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Macron says ‚Ç¨300B in EU savings sent to the US every year will be invested in EU (178 pts)]]></title>
            <link>https://old.reddit.com/r/europe/comments/1qjtvtl/macron_says_300_billion_in_european_savings_flown/</link>
            <guid>46722594</guid>
            <pubDate>Thu, 22 Jan 2026 17:42:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://old.reddit.com/r/europe/comments/1qjtvtl/macron_says_300_billion_in_european_savings_flown/">https://old.reddit.com/r/europe/comments/1qjtvtl/macron_says_300_billion_in_european_savings_flown/</a>, See on <a href="https://news.ycombinator.com/item?id=46722594">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>He played into the hands of the far right, led a violent crackdown on protests (dozens blinded or maimed, thousands injured), and consistently favors billionaires who have become incredibly wealthy since he became president (his wife is, incidentally, very close friends with the wife of the richest man in France). Our hospitals, schools, and universities are getting worse and worse. He has also betrayed his environmental promises (as soon as farmers protest, he silences them by dismantling environmental regulations). Overall, he has betrayed his initial, rather social-democratic, commitments. He is significantly "normalizing" the far right. One of our recent interior ministers is clearly a Trump supporter, by the way. Oh, and he sold many of our companies to the US (like Alstom). Overall, he still favors the rich and retirees (he's very close to the rich, and retirees vote a lot).</p>

<p>That said, we're rather pleased with what he's doing in the face of Trump. But we haven't forgotten the broken promises, nor his very ambiguous behavior towards the far right in our country. Basically, his game is to boost the far right, then find himself facing them in the elections so we're forced to vote for his party to "block" them.</p>

<p>That's why the French are angry.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[CSS Optical Illusions (201 pts)]]></title>
            <link>https://alvaromontoro.com/blog/68091/css-optical-illusions</link>
            <guid>46722570</guid>
            <pubDate>Thu, 22 Jan 2026 17:41:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://alvaromontoro.com/blog/68091/css-optical-illusions">https://alvaromontoro.com/blog/68091/css-optical-illusions</a>, See on <a href="https://news.ycombinator.com/item?id=46722570">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <p>You can find a collection with <a href="https://codepen.io/collection/GpWqKk" target="_blank" rel="noopener noreferrer">all the optical illusions in this article (and more!) on CodePen</a>. You can move your mouse over many of the demos below to reveal the effect or stop the animations.</p>

<h2 id="poggerndorff-illusions">
  1&nbsp;-&nbsp;Poggendorff Illusions
</h2>

<p>The Poggendorff illusion is an optical illusion in which a diagonal line interrupted by a vertical bar appears misaligned, even when both segments are actually continuous.</p>

<p>A simple version of this effect can be seen in the following demo. I used the&nbsp;<code>::before</code> and&nbsp;<code>::after</code> pseudo-elements to create the diagonal line and the vertical bar, respectively.</p>



<p>The effect can also be seen in a more elaborate version with multiple diagonal lines and vertical bars:</p>



<p>This drawing can easily be achieved using two CSS gradients: one tilted at 70 degrees and another consisting of a series of vertical columns. I applied it to the <code>body</code>, although I could have used&nbsp;<code>:root</code> instead.</p>

<p>Another variation of this illusion is the M√ºnsterberg Poggendorff Arch, in which the two sides of an arch appear misaligned and seem as though they will not meet at the top&nbsp;-&nbsp;but they do (mouse over to see it).</p>



<h2 id="induced-gradients">
  2&nbsp;-&nbsp;Induced Gradients
</h2>

<p>The following illusions combine gradients and flat colors. Surprisingly, some of the gradients do not actually exist. They are simple gray bars that, when placed over a gradient, appear to have gradients themselves.</p>

<p>Take the following demo: all three bars (two vertical ones on the sides and one horizontal bar in the center) are the same shade of gray. The only real gradient is behind them, which tricks our brain into believing that the bars are different colors and even contain gradients.</p>



<p>Here is another variation of this effect. It looks like the central line has a repeating gradient of dark and light grays, but in reality it is a flat color. If you mouse over the demo, the bar will expand, making it clear that there is no gradient at all.</p>



<h2 id="cornsweet-illusion">
  3&nbsp;-&nbsp;Cornsweet Illusion
</h2>

<p>The next few optical illusions share a common idea: some colors are identical, but they do not look the same. This typically happens when regions of the same color or brightness are surrounded by areas with different contrast.</p>

<p>For example, in the following demo, the left and right ends are the same shade of gray. However, one looks lighter because it is closer to white, while the other looks darker because it is closer to black. Mouse over to reveal that they are, in fact, the same color.</p>



<h2 id="whites-illusion">
  4&nbsp;-&nbsp;White's&nbsp;Illusion
</h2>

<p>Run the following demo. You will see two gray columns in a black-and-white grid. Both columns are the same shade of gray, but the one surrounded by black appears darker than the one surrounded by white.</p>



<p>I coded this demo using <code>mix-blend-mode</code> so I could try something a bit different. That worked well, but it also made it harder to showcase the effect on hover. In hindsight, I should have planned that better.</p>

<p>This optical illusion also works with colors. For example, these two squares appear to be different shades of blue, but they are the same color. This time, you can mouse over to reveal the effect:</p>



<h2 id="wertheimer-koffka-ring">
  5&nbsp;-&nbsp;Wertheimer-Koffka Ring
</h2>

<p>The ring in the following illustration has the same color all the way around. However, one side is placed over white and the other over black, which makes them look different. If you mouse over the demo, the red bar will disappear, making it more obvious that the ring is a single, uniform color.</p>



<h2 id="adelsons-illusion">
  6&nbsp;-&nbsp;Adelson's Illusion
</h2>

<p>You have probably seen the illusion involving a checkerboard and an object casting a shadow, where two tiles&nbsp;-&nbsp;one seemingly light and one seemingly dark&nbsp;-&nbsp;turn out to be the same color.</p>

<p>This demo follows the same principle. You will see two tiles labeled A and B. Both have the same shade of gray, but most people cannot tell at first glance (or second, or even third).</p>



<h2 id="asahi-illusion-of-brightness">
  7&nbsp;-&nbsp;Asahi illusion of Brightness
</h2>

<p>The circle at the center of this flower-shaped element is the same white as the rest of the page, but it gives the impression of being brighter, as if it were emitting light.</p>



<h2 id="color-spheres">
  8&nbsp;-&nbsp;Color&nbsp;Spheres
</h2>

<p>This is one of my favorite illusions in the collection. The circles (or spheres) look red, blue, or green, but in reality they are all the same grayish color. Our brain "colorizes" them based on the lines that overlap the shapes. Don't believe it? Mouse over the illustration.</p>



<h2 id="colors-from-contour">
  9&nbsp;-&nbsp;Colors from&nbsp;Contour
</h2>

<p>In the following illustration, the lines inside the yellow section appear blue, while the lines inside the blue section appear red... but they are all black (or very dark gray). The white contour creates the illusion of color. Mouse over to remove the contour and the lines will clearly appear black.</p>



<h2 id="curvature-blindness">
  10&nbsp;-&nbsp;Curvature Blindness
</h2>

<p>One set of lines looks straighter (top) while the other looks more curved (bottom). In reality, both sets are equally wavy. The only difference is how they are colored: changing the color at the peaks makes the lines look straighter. Changing it at the inflection points makes them look more curved.</p>

<p>The CSS code for the wavy lines is adapted from a <a href="https://css-tricks.com/how-to-create-wavy-shapes-patterns-in-css/" target="_blank" rel="noopener noreferrer">Temani Afif snippet on CSS-Tricks</a> and his <a href="https://css-generators.com/wavy-shapes/" target="_blank" rel="noopener noreferrer">wavy shape generator</a>.</p>



<h2 id="cafe-wall-illusion">
  11&nbsp;-&nbsp;Cafe&nbsp;Wall
</h2>

<p>This is a classic optical illusion and an easy one to code in CSS. Three gradients are all that is needed to generate the effect in which the horizontal lines appear slanted, even though they are perfectly parallel.</p>



<h2 id="penrose-triangle">
  12&nbsp;-&nbsp;Penrose&nbsp;Triangle
</h2>

<p>This optical illusion depicts an impossible shape. Parts that should be in front appear in the back, top becomes right, and everything feels contradictory. I coded this one some time ago for the 2024 Divtober event.</p>



<h2 id="ebbinghaus-illusion">
  13&nbsp;-&nbsp;Ebbinghaus Illusion
</h2>

<p>Which orange circle is larger: the one on the right or the one on the left? It is a trick question: both are the same size. However, having smaller surrounding elements gives the impression that one is larger.</p>



<p>I also created an animated version of this illusion (see below), as well as another version using a square shape instead of a flower shape:</p>



<h2 id="kanizsa-square">
  14&nbsp;-&nbsp;Kanizsa&nbsp;Square
</h2>

<p>When people look at this illustration, they usually say they see a white square over black circles. However, the square is not actually there. The "Pac-Man" shapes create the illusion of a square and a sense of depth. Our brain fills in the missing information.</p>



<h2 id="ehrensteins-illusion">
  15&nbsp;-&nbsp;Ehrenstein's Illusion
</h2>

<p>There are no circles or discs in this illustration, only vertical and horizontal lines forming crosses. Our visual system completes the shape and makes us perceive a disc that does not exist.</p>



<h2 id="neon-color-spreading-illusion">
  16&nbsp;-&nbsp;Neon-Color-Spreading Illusion
</h2>

<p>This illustration shows concentric circles, some of which have a green-and-black pattern. Our brain perceives a central patterned circle and four concentric circles around it, beneath the green circle.</p>

<p>I cheated a little when creating this in CSS, as I actually used a green circle blended with the other backgrounds.</p>



<h2 id="hering-and-wundt-illusions">
  17&nbsp;-&nbsp;Hering and Wundt Illusions
</h2>

<p>Perspective-based illusions are fascinating. Even when we know we are looking at a flat image, our brain insists on interpreting depth.</p>
<p>In the Hering illusion, the red lines appear to curve outward, even though they are straight.</p>



<p>The <em>opposite</em> effect is the Wundt illusion. When the lines expand from the sides toward the center, the red lines appear to curve inward (this effect is more subtle).</p>



<h2 id="ponzo-illusion">
  18&nbsp;-&nbsp;Ponzo&nbsp;Illusion
</h2>

<p>Both yellow lines are the same length, but the top one looks longer due to perceived depth and perspective. I tried a different approach when coding this one by applying a three-dimensional rotation in CSS... so the perspective is technically real.</p>



<h2 id="t-illusion">
  19&nbsp;- T Illusion
</h2>

<p>This illusion is easy to code in CSS and easy to fall for. Both the vertical and horizontal lines are the same length, but the vertical line appears longer.</p>



<h2 id="mullerlyer-illusion">
  20&nbsp;-&nbsp;M√ºller-Lyer Illusion
</h2>

<p>A classic illusion: the horizontal lines are the same length, but inward- or outward-pointing edges dramatically change how we perceive them. I could swear the top one is longer. But it is not.</p><p>
From a coding perspective, each shape is a pseudo-element. I ensured the horizontal lines were identical by using the same gradients and only repositioning the edges in the&nbsp;<code>::before</code> and&nbsp;<code>::after</code>.</p>



<h2 id="tilted-table-illusion">
  21&nbsp;-&nbsp;Tilted Table&nbsp;Illusion
</h2>

<p>It looks like the top rectangle is leaning to the left, but it is actually parallel to the one at the bottom. The trick lies in the direction of the diagonal lines used to "color" each rectangle.</p><p>
This illusion works better on larger screens. The effect is diminished when you can see the whole picture.</p>



<h2 id="parallel-lines">
  22&nbsp;-&nbsp;Parallel&nbsp;Lines
</h2>

<p>This is a simple effect: the black lines are parallel, but they appear not to be because of the direction of the bars crossing them.</p><p>
I slightly overcomplicated this one while coding it. I initially built the black-and-red version below and tried to reuse more code than I probably should have.</p>



<p>Here is the original version I created. The effect is also visible there:</p>




<hr>

<p>Good news! There are more optical illusions below&nbsp;-&nbsp;but first, a warning.</p>

<p>
  ATTENTION: The following optical illusions are static, but they give the impression of movement. Proceed accordingly.
</p>

<p>(Leaving some blank space in case you do not want to continue.)</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p>
<h2 id="expanding-hole">
  23&nbsp;-&nbsp;Expanding Hole
</h2>

<p>This is a trippy optical illusion. It is completely static, yet it looks like the black hole at the center is expanding&nbsp;-&nbsp;especially when you are not looking at it directly, creating the sensation of falling into a pit.</p>

<p>From a coding perspective, this one was very simple: a background pattern made with two radial gradients, plus a blurred pseudo-element for the "expanding" hole.</p>



<h2 id="rotating-snakes">
  24&nbsp;-&nbsp;Rotating&nbsp;Snakes
</h2>

<p>This is one of only two optical illusions in this collection where I used HTML elements instead of relying exclusively on CSS. It is a classic effect: when you look at the illustration, the peripheral discs appear to rotate, even though nothing is actually moving.</p>



<h2 id="appearing-dots">
  25&nbsp;-&nbsp;Appearing Dots
</h2>

<p>Another classic illusion. Focus on the white dots and the adjacent dots will appear to turn black. There is no animation, no transition, and nothing dynamic. Just intersecting lines and small white circles, yet it looks like motion.</p>



<h2 id="disappearing-dots">
  26&nbsp;-&nbsp;Disappearing Dots
</h2>

<p>This pattern consists of repeating black and white dots across the page. If you focus on one dot, the others will begin to disappear. At first it may happen by row or column, but after a short while, most of them vanish.</p>

<p>If you do not immediately see the effect, try focusing on one black dot. Mouse over it, wait a few seconds while keeping your focus, and then mouse out.</p>



<h2 id="ouchi-illusion">
  27&nbsp;-&nbsp;Ouchi&nbsp;Illusion
</h2>

<p>This is a static image, but it gives the impression that the pattern inside the circle is moving sideways. This happens because our eyes are constantly making small movements, even when we are not aware of it.</p>

<p>If you cannot see the illusion, try slightly moving the screen (or your head) while looking just outside the circle.</p>



<h2 id="orthogonal-dotted-lines-sway">
  28&nbsp;-&nbsp;Orthogonal Dotted Lines&nbsp;Sway
</h2>

<p>When you look around this pattern, the central area appears to slide and sway, even though it is completely static. This illusion makes me dizzy... but that may also be because I had to stare at it for a long time while coding it.</p>



<h2 id="enigma">
  29&nbsp;-&nbsp;Enigma
</h2>

<p>This illusion is particularly interesting. There is a pink circle surrounded by concentric pink and purple rings. If you focus on the pink circle, the rings appear to spin or scintillate, as if there were some activity in them. Of course, nothing is actually moving.</p>



<h2 id="waves">
  30&nbsp;-&nbsp;Waves
</h2>

<p>This demo was challenging to code and takes a long time to load. Mainly because it uses a large number of conic gradients behind the scenes, which browsers struggle to render efficiently. There is probably a better way to implement it, but I have not explored that yet.</p>

<p>If you look closely at the illustration, you may notice wave-like motion. As with the previous illusions in this section, the image is entirely static.</p>




<hr>

<p>Good news! There are more optical illusions below&nbsp;-&nbsp;but first, another warning.</p>

<p>
  ATTENTION: The following optical illusions actually move, and the illusion is created by motion itself. Some of them can be dizzying, so proceed accordingly.
</p>

<p>(Leaving some blank space in case you do not want to continue.)</p>

<p>.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p><p>
.</p>
<h2 id="animated-ebbinghaus-illusion">
  31&nbsp;-&nbsp;Animated Ebbinghaus Illusion
</h2>

<p>Earlier, we saw two static versions of the Ebbinghaus illusion. This one is animated. The elements move side to side, and the surrounding shapes grow and shrink, giving the impression that the orange circle is changing size&nbsp;-&nbsp;when it definitely is not.</p>



<h2 id="psychokinematic-tower">
  32&nbsp;-&nbsp;Psychokinematic Tower
</h2>

<p>This looks like a three-dimensional tower spinning in space, as seen from above. In reality, it is a flat, two-dimensional image rotating.</p><p>
Mouse over the demo to stop the rotation and the illusion of depth disappears entirely.</p>



<h2 id="color-fan">
  33&nbsp;-&nbsp;Color&nbsp;Fan
</h2>

<p>This optical illusion requires only two gradients: a conic gradient for the fan-shaped arms and a radial gradient for the circles and discs.</p>

<p>If you focus on the black dot, the illustration may appear to develop a darker greenish or brownish border. However, the colors never change.</p>



<h2 id="reverse-spoke-illusion">
  34&nbsp;-&nbsp;Reverse Spoke&nbsp;Illusion
</h2>

<p>This illusion is delightful and disorienting. While the background colors of the wheel are spinning, the spokes remain fixed. However, they appear to rotate in the opposite direction. In reality, only the background is moving.</p>



<h2 id="motion-binding">
  35&nbsp;-&nbsp;Motion&nbsp;Binding
</h2>

<p>What do you see in this animation? Most people report two sets of lines operating independently: one moving horizontally and another moving vertically. And that is exactly how it looks.</p>

<p>In reality, it is a single shape moving uniformly. Run the demo, mouse over the lines, and the true motion will be revealed.</p>



<h2 id="mainzlinez-illusion">
  36&nbsp;-&nbsp;Mainz-Linez Illusion
</h2>

<p>Focus on one of the red dots. You will notice it moves straight up and down along a vertical path. Now shift your focus to one of the black crosses in the center. Suddenly, the red dots appear to zigzag instead of moving straight.</p>

<p>The CSS code for the wavy lines is adapted from a <a href="https://css-tricks.com/how-to-create-wavy-shapes-patterns-in-css/" target="_blank" rel="noopener noreferrer">Temani Afif snippet on CSS-Tricks</a> and his <a href="https://css-generators.com/wavy-shapes/" target="_blank" rel="noopener noreferrer">wavy shape generator</a>.</p>



<h2 id="waddling-colors">
  37&nbsp;-&nbsp;Waddling&nbsp;Colors
</h2>

<p>It may look like the boxes are moving at different speeds or like a set of walking feet. In reality, all elements move at the same pace and in parallel. Mouse over the demo to reveal the effect.</p>



<p>The illusion also works when the "feet" move in circles, as shown in this alternative version:</p>



<h2 id="dottedline-motion">
  38&nbsp;-&nbsp;Dotted-Line Motion
</h2>

<p>Follow the red dot as it moves sideways. From the corner of your vision, it may appear that the dashed black-and-white lines are moving closer together (when the dot moves left) or farther apart (when it moves right). In reality, the lines are completely static.</p>



<h2 id="contrast-asynchrony">
  39&nbsp;-&nbsp;Contrast Asynchrony
</h2>

<p>These dots always have the same color. However, when placed against alternating backgrounds, they appear to jump or move out of sync because of how they blend with their surroundings.</p>

<p>Mouse over the demo to remove the background and the illusion disappears.</p>



<h2 id="breathing-square">
  40&nbsp;-&nbsp;Breathing Square
</h2>

<p>This illusion gives the impression that a blue square is growing and shrinking rhythmically, almost as if it were breathing or beating like a heart.</p>

<p>Although the image is rotating, its size never changes. Mouse over the illustration to remove the green boxes and reveal the rotating blue square.</p>



<h2 id="troxler-fading">
  41&nbsp;-&nbsp;Troxler&nbsp;Fading
</h2>

<p>This illustration shows a circle made of pink dots, with one dot missing. Focus on the cross at the center and the missing dot will appear as a yellow or green dot, giving the impression that it is "eating" the pink dots. Just like Pac-Man.</p>

<p>I could have used CSS trigonometric functions to calculate the exact positions of the dots, but since they never change, I chose to hardcode the values instead.</p>



<p>Here is a related effect. Follow the light gray circle as it spins, and the darker circles will appear to change from gray to greenish. Focus on the cross at the center, and after a short time, the darker circles may begin to fade entirely.</p>



<h2 id="pinnabrelstaff-illusion">
  42&nbsp;-&nbsp;Pinna-Brelstaff Illusion
</h2>

<p>This illusion is particularly dizzying. Follow the bluish dot as it moves from right to left and back again. It will appear as though parts of the tiled background are shifting, even though they are static. The only moving element is the dot.</p><p>
From a CSS perspective, I coded the pattern using conic gradients, and applied it to the&nbsp;<code>::before</code> and&nbsp;<code>::after</code> pseudo-elements. I then flipped one upside down and clipped it.</p>



<h2 id="palisade">
  43&nbsp;-&nbsp;Palisade
</h2>

<p>The radii of a wheel, when viewed through a palisade, appear to curve. In reality, they are perfectly straight. Mouse over the demo to remove the palisade and you will see that the radii never bend.</p>



<h2 id="alternative-motion">
  44&nbsp;-&nbsp;Alternative Motion
</h2>

<p>This animation demonstrates how our minds infer motion that may not actually be there. Consider the two blue dots. Different people perceive different movements: side to side, top to bottom, or even circular motion.</p>

<p>Cover the right side of the animation so that you see only one dot at a time. The motion now appears vertical. Cover the bottom part instead, and the motion appears horizontal. This is our brain trying to complete the movement.</p>



<h2 id="motion-inversion">
  45&nbsp;-&nbsp;Motion Inversion
</h2>

<p>These two illustrations are identical&nbsp;-&nbsp;same shapes, same animation. The only difference is the CSS timing function.</p>

<p>The top animation moves smoothly from right to left. The bottom one appears to move choppily in the same direction, but if you focus on it, it may suddenly seem to reverse direction and move faster.</p>




<hr>

<p>Most of the inspiration for these optical illusions came from two excellent resources:</p>

<ul>
<li>"<a href="https://www.livescience.com/health/mind/32-optical-illusions-and-why-they-trick-your-brain" target="_blank" rel="noopener noreferrer">35 optical illusions and why they trick your brain</a>" by Patrick Pester.</li>
<li>"<a href="https://michaelbach.de/ot/" target="_blank" rel="noopener noreferrer">154 Visual Phenomena &amp; Optical Illusions</a>" with explanations by Michael Bach</li>
</ul>

<hr>

<p>You can also find this article on:</p>

<ul>
  <li><a href="https://alvaromontoro.medium.com/css-optical-illusions-visual-illusions-built-with-pure-css-and-html-bde6f8916b04?postPublishedType=initial">Medium</a></li>
  <li><a href="https://dev.to/alvaromontoro/css-optical-illusions-50-visual-illusions-built-with-pure-css-and-html-13o9">DEV</a> (open)</li>
</ul>

<p>(You can leave comments on those platforms and I will reply there).</p>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: isometric.nyc ‚Äì giant isometric pixel art map of NYC (1071 pts)]]></title>
            <link>https://cannoneyed.com/isometric-nyc/</link>
            <guid>46721802</guid>
            <pubDate>Thu, 22 Jan 2026 16:52:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://cannoneyed.com/isometric-nyc/">https://cannoneyed.com/isometric-nyc/</a>, See on <a href="https://news.ycombinator.com/item?id=46721802">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Ubisoft cancels six games including Prince of Persia and closes studios (104 pts)]]></title>
            <link>https://www.bbc.co.uk/news/articles/c6200g826d2o</link>
            <guid>46721452</guid>
            <pubDate>Thu, 22 Jan 2026 16:29:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.co.uk/news/articles/c6200g826d2o">https://www.bbc.co.uk/news/articles/c6200g826d2o</a>, See on <a href="https://news.ycombinator.com/item?id=46721452">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-component="text-block"><p><b>Ubisoft has cancelled six video games - including its long-awaited Prince of Persia: The Sands of Time remake - as part of a "major reset" of its operations.</b></p><p>The French developer and publisher, known for popular games such as Assassin's Creed, Far Cry and Just Dance, has closed two studios and delayed seven titles as part of its changes.</p><p>Ubisoft boss Yves Guillemot said the move would "create the conditions for a return to sustainable growth".</p><p>The firm's shares plunged by 33% on Thursday morning following the announcement.</p></div><div data-component="text-block"><p>The move comes at a time when studios are increasingly turning to video game remakes and remasters, with new versions of Super Mario Galaxy, Oblivion and Metal Gear Solid 3 proving popular in 2025.</p><p>So the decision to bin the remake of Sands of Time - which sold millions of copies in 2003 - has left many fans scratching their heads.</p><p>Ubisoft has not specified which titles it has discontinued alongside the Prince of Persia remake.</p><p>But it says among them are four unannounced titles, including three based on new intellectual property, and a mobile game.</p><p>Ubisoft has closed its studios in Stockholm, Sweden and Halifax, Canada as part of the move, which will include restructuring three others.</p><p>The developers were working on a new intellectual property (IP) and mobile titles for Assassin's Creed, respectively.</p><p>The closure of Ubisoft Halifax was previously announced in January - the same week the studio formed a union. </p><p> "While these decisions are difficult, they are necessary for us to build a more focused, efficient and sustainable organisation over the long term," Guillemot said.</p><p>"Taken together, these measures mark a decisive turning point for Ubisoft and reflect our determination to confront challenges head-on to reshape the Group for the long term".</p><p>Gaming industry analyst Piers Harding-Rolls told the BBC the move indicated the firm was trying to mitigate risk.</p><p>"It's less risky to maintain scale by investing in existing big franchises such as Assassin's Creed and Rainbow Six than launch entirely new IPs and that's reflected in the cancellation of a number of games based on new IPs," he said.</p></div><div data-component="text-block"><p>It is the second restructure from Ubisoft in subsequent years, after the firm cut 185 jobs across Europe in 2025.</p><p>In the UK, it <a href="https://www.bbc.co.uk/news/articles/cx2jxzjgpplo">closed its office in Leamington</a> and restructured another in Newcastle-upon-Tyne.</p><p>Guillemot said the new move was in part due to a competitive market for triple-A games - blockbuster titles which cost millions to develop and dominate large studios' offerings.</p><p>"On the one hand, the triple-A industry has become persistently more selective and competitive with rising development costs and greater challenges in creating brands," he said <a href="https://staticctf.ubisoft.com/8aefmxkxpxwl/59b4Z0RNls45UDTVV6gBNR/801a91a599b337779106af51cf08e539/Ubisoft_Jan_PR_draft_vF.pdf">in a statement on Wednesday<span>, <!-- -->external</span></a>.</p><p>Such big offerings are increasingly facing delays - with <a href="https://www.bbc.co.uk/news/articles/cwypgvd9j8qo">Grand Theft Auto VI pushed back for a second time to November 2026</a>.</p><p>But Guillemot said despite these hurdles, successful blockbuster games could bring "more financial potential than ever".</p><p>"In this context, today we are announcing a major reset built to create the conditions for a return to sustainable growth over time," he said.</p><p>Ubisoft will now focus on developing open world adventure games - which let players freely navigate vast environments - and live service games which seek regular payments from players.</p><p>The firm said its subsidiary Vantage Studios, created after <a href="https://www.bbc.co.uk/news/articles/cy4l4y0yd03o">a ‚Ç¨1.25bn ($1.25bn; ¬£1bn) investment from Chinese tech giant Tencent</a>, would aim to turn Assassin's Creed, Far Cry and Rainbow Six "into annual billionaire brands".</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[It looks like the status/need-triage label was removed (289 pts)]]></title>
            <link>https://github.com/google-gemini/gemini-cli/issues/16728</link>
            <guid>46721179</guid>
            <pubDate>Thu, 22 Jan 2026 16:10:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/google-gemini/gemini-cli/issues/16728">https://github.com/google-gemini/gemini-cli/issues/16728</a>, See on <a href="https://news.ycombinator.com/item?id=46721179">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-testid="issue-body-viewer" data-team-hovercards-enabled="true" data-turbolinks="false" id="issue-body-viewer"><h3 dir="auto">What would you like to be added?</h3>
<p dir="auto">Adds native recognition for JetBrains IDE as a supported IDE environment.</p>
<h3 dir="auto">Why is this needed?</h3>
<p dir="auto">Currently, Gemini CLI restricts IDE integration features to environments where TERM_PROGRAM is vscode (or other hardcoded values). This forces 3rd-party integrations like <a href="https://github.com/SoLoHiC/jetbrains-ide-companion">jetbrains-ide-companion</a> to mock VS Code by spoofing environment variables to enable core features, otherwise it could not be discovered by Gemini CLI.</p>
<p dir="auto">For some reason, the process detection is not working properly on windows/linux (, reported by users here <a href="https://plugins.jetbrains.com/plugin/29336-gemini-cli-companion/reviews" rel="nofollow">JetBrains Plugin Review</a> and here <a data-error-text="Failed to load title" data-id="3446875726" data-permission-text="Title is private" data-url="https://github.com/google-gemini/gemini-cli/issues/9273" data-hovercard-type="issue" data-hovercard-url="/google-gemini/gemini-cli/issues/9273/hovercard" href="https://github.com/google-gemini/gemini-cli/issues/9273">#9273</a> , and a few other bug report email i've received), which making this native IDE detection logic a MUST do for gemini-cli discover and connect to IDE via environmental variables instead of port info file.</p>
<p dir="auto">This PR adds JetBrains IDE Series to the IDE_DEFINITIONS and updates the detection logic to recognize TERMINAL_EMULATOR=JetBrains-JediTerm as a first-class supported environment.</p>
<h3 dir="auto">Additional context</h3>
<p dir="auto">Inspired by <a data-error-text="Failed to load title" data-id="3790058763" data-permission-text="Title is private" data-url="https://github.com/google-gemini/gemini-cli/issues/16083" data-hovercard-type="pull_request" data-hovercard-url="/google-gemini/gemini-cli/pull/16083/hovercard" href="https://github.com/google-gemini/gemini-cli/pull/16083">#16083</a></p></div></div>]]></description>
        </item>
    </channel>
</rss>