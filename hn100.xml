<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Thu, 24 Oct 2024 03:30:02 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Show HN: Wall-mounted diffusion mirror that turns reflections into paintings (135 pts)]]></title>
            <link>https://www.matthieulc.com/posts/pablonet/</link>
            <guid>41929804</guid>
            <pubDate>Wed, 23 Oct 2024 22:24:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.matthieulc.com/posts/pablonet/">https://www.matthieulc.com/posts/pablonet/</a>, See on <a href="https://news.ycombinator.com/item?id=41929804">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content"><article><p><img src="https://www.matthieulc.com/posts/pablonet/main.jpeg"></p><p>The debate about whether internet-fitted AIs can be creative always seemed besides the point to me. Making art is hard. But art is mostly about surfacing the inner world, and only in part about skill. It’s unfortunate that art selects so strongly for skill. Can we decorrelate the two? It seems so. Cheap interpolative* creativity used by 8 billion non-artists surely surfaces new views of the world.</p><p>For these reasons and since I suck at art I’ve been very excited about the various AI-driven art forms popping up. A couple of months ago I started playing with real-time diffusion of my webcam feed using <a href="https://github.com/cumulo-autumn/StreamDiffusion">StreamDiffusion</a>. Specifically, with the intent of generating pretty visuals and hoping to elicit new/interesting feelings. Although it’s very fun, the laptop form-factor breaks the illusion. It feels all temporary and geeky. So, I recently built an LCD frame that can be hanged to a wall with minimal illusion breakers. What I really like about this setup is that making it a proper object opens up new channels of interaction. It’s no longer just a screen, it has permanence. You can leave it there, come back to it at a different time, in a different mood, with different lighting, objects, friends, etc.</p><div><video width="300" height="550" object-fit="fill" controls="">
<source src="https://www.matthieulc.com/posts/pablonet/trimmed.mp4" type="video/mp4"></video><p>Infrared light in the dark</p></div><p>Plus, it looks pretty:</p><p><img src="https://www.matthieulc.com/posts/pablonet/stairs.jpeg"></p><p>The main issue with the current setup is the low frame rate. I managed to increase it using TensorRT and compressing the images in and out, but there’s still a lot of room for improvement.</p><p>For those of you that are interested in creating your own or contributing, here are the details:</p><ul><li>Code for the client and server <a href="https://github.com/mlecauchois/pablonet">here</a>.</li><li><a href="https://www.runpod.io/">RunPod</a> for hosting the server.</li><li>Client runs on a <a href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi 5</a>.</li><li>This <a href="https://www.amazon.fr/HMTECH-Raspberry-Moniteur-portable-Raspbian/dp/B098762GVK">10.1" Pi screen</a>.</li><li>This <a href="https://www.amazon.fr/dp/B0BG5HM2Q8?ref=ppx_yo2ov_dt_b_fed_asin_title">infrared light</a>.</li><li>This generic <a href="https://www.leroymerlin.fr/produits/decoration-eclairage/decoration-murale/cadre-photo/cadre-noir/cadre-milo-21-x-29-7-cm-noir-inspire-71670942.html">frame</a>.</li><li>This infrared <a href="https://www.raspberrypi.com/products/pi-noir-camera-v2/">Pi camera</a>.</li><li>I used a puncher to cut a hole in the frame’s cardboard for the camera (drills didn’t work).</li><li>I spent hours playing with different preprocessing filters, not just prompting. In general I found the two to be equally important. Without preprocessing, img2img often looked too realistic. To get the blue Picasso style seen in this post, I ended up using a mix of canny edge detection, blue coloration and blurring.</li></ul><p><img src="https://www.matthieulc.com/posts/pablonet/behind.png"></p><p><img src="https://www.matthieulc.com/posts/pablonet/closeup.png"></p><hr><p>*Technically, <a href="https://arxiv.org/abs/2110.09485">learning in high dimension always amounts to extrapolation</a>.</p></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Everything I built with Claude Artifacts this week (381 pts)]]></title>
            <link>https://simonwillison.net/2024/Oct/21/claude-artifacts/</link>
            <guid>41929174</guid>
            <pubDate>Wed, 23 Oct 2024 20:52:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/">https://simonwillison.net/2024/Oct/21/claude-artifacts/</a>, See on <a href="https://news.ycombinator.com/item?id=41929174">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-permalink-context="/2024/Oct/21/claude-artifacts/">

<p>21st October 2024</p>



<p>I’m a huge fan of Claude’s <strong>Artifacts</strong> feature, which lets you prompt <a href="https://claude.ai/">Claude</a> to create an interactive Single Page App (using HTML, CSS and JavaScript) and then view the result directly in the Claude interface, iterating on it further with the bot and then, if you like, copying out the resulting code.</p>
<p>I was digging around in my <a href="https://support.anthropic.com/en/articles/9450526-how-can-i-export-my-claude-ai-data">Claude activity export</a> (I built a <a href="https://github.com/simonw/claude-to-sqlite">claude-to-sqlite</a> tool to convert it to SQLite I could explore it in <a href="https://datasette.io/">Datasette</a>) and decided to see how much I’d used artifacts <a href="https://github.com/simonw/claude-to-sqlite/issues/2#issuecomment-2425658909">in the past week</a>. It was more than I expected!</p>
<p>Being able to spin up a full interactive application—sometimes as an illustrative prototype, but often as something that directly solves a problem—is a remarkably useful tool.</p>
<p>Here’s most of what I’ve used Claude Artifacts for in the past seven days. I’ve provided prompts or a full transcript for nearly all of them.</p>
<ul>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#url-to-markdown-with-jina-reader">URL to Markdown with Jina Reader</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#sqlite-in-wasm-demo">SQLite in WASM demo</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#extract-urls">Extract URLs</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#clipboard-viewer">Clipboard viewer</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#pyodide-repl">Pyodide REPL</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#photo-camera-settings-simulator">Photo Camera Settings Simulator</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#llm-pricing-calculator">LLM pricing calculator</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#yaml-to-json-converter">YAML to JSON converter</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#openai-audio">OpenAI Audio</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#qr-code-decoder">QR Code Decoder</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#image-converter-and-downloader">Image Converter and Page Downloader</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#html-entity-escaper">HTML Entity Escaper</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#text-wrap-balance-nav">text-wrap-balance-nav</a></li>
  <li><a href="https://simonwillison.net/2024/Oct/21/claude-artifacts/#ares-phonetic-alphabet-converter">ARES Phonetic Alphabet Converter</a></li>
</ul>
<h4 id="url-to-markdown-with-jina-reader">URL to Markdown with Jina Reader</h4>
<p>I got frustrated at how hard it was to copy and paste the entire text of a web page into an LLM while using Mobile Safari. So I built a simple web UI that lets me enter a URL, calls the <a href="https://jina.ai/reader">Jina Reader API</a> to generate Markdown (which uses Puppeteer under the hood) and gives me that Markdown with a convenient “Copy” button.</p>
<p>Try it out: <a href="https://tools.simonwillison.net/jina-reader">https://tools.simonwillison.net/jina-reader</a> (<a href="https://github.com/simonw/tools/blob/main/jina-reader.html">Code</a>)</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/jina-reader.jpg" alt="Jina Reader - URL field, Markdown selected in a select box, Submit button. Then a box showing Markdown extracted from the page with a Copy to Clipboard button. Then a frame showing a preview of the rendered Markdown."></p>
<p>I wrote <a href="https://simonwillison.net/2024/Oct/14/my-jina-reader-tool/?uu">more about that project here</a>.</p>
<h4 id="sqlite-in-wasm-demo">SQLite in WASM demo</h4>
<p>A Hacker News <a href="https://news.ycombinator.com/item?id=41851051#41851788">conversation about SQLite’s WASM build</a> lead me to the <a href="https://www.npmjs.com/package/@sqlite.org/sqlite-wasm">@sqlite.org/sqlite-wasm</a> package on NPM, and I decided to knock together a quick interactive demo.</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/sqlite-wasm.jpg" alt="Pelican Sightings in Half Moon Bay - a textarea with select * from pelican sightings, an execute query button and a table displaying 5 matching rows."></p>
<p>Try it out here: <a href="https://tools.simonwillison.net/sqlite-wasm">tools.simonwillison.net/sqlite-wasm</a></p>

<p><a href="https://github.com/simonw/tools/blob/main/sqlite-wasm.html">Code</a>, <a href="https://gist.github.com/simonw/677c3794051c4dfeac94e514a8e5b697">Claude transcript</a></p>


<p>I found myself wanting to extract all of the underlying URLs that were linked to from a chunk of text on a web page. I realized the fastest way to do that would be to spin up an artifact that could accept rich-text HTML pastes and use an HTML parser to extract those links.</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/extract-urls.jpg" alt="Extract URLs tool. Content pasted. URLs extracted. Shows a list of extracted URLs."></p>
<p><a href="https://tools.simonwillison.net/extract-urls">https://tools.simonwillison.net/extract-urls</a></p>
<p><a href="https://github.com/simonw/tools/blob/main/extract-urls.html">Code</a>, <a href="https://gist.github.com/simonw/0a7d0ddeb0fdd63a844669475778ca06">Claude transcript</a></p>
<h4 id="clipboard-viewer">Clipboard viewer</h4>
<p>Messing around with a tool that lets you paste in rich text reminded me that the browser clipboard API is a fascinating thing. I decided to build a quick debugging tool that would let me copy and paste different types of content (plain text, rich text, files, images etc) and see what information was available to me in the browser.</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/clipboard-viewer.jpg" alt="Clipboard format viewer. Paste here or anywhere on the page. Shows text/html with a fragment of HTML, text/plain with some text and Clipboard Event Information showing event type paste and formats available text/html and text/plain"></p>
<p><a href="https://tools.simonwillison.net/clipboard-viewer">https://tools.simonwillison.net/clipboard-viewer</a></p>
<p><a href="https://github.com/simonw/tools/blob/main/clipboard-viewer.html">Code</a>, <a href="https://gist.github.com/simonw/5393dd81fcabc9f854e8bbec205e7e1e">Claude transcript</a></p>
<h4 id="pyodide-repl">Pyodide REPL</h4>
<p>I didn’t put a lot of effort into this one. While poking around with Claude Artifacts in the browser DevTools I spotted this CSP header:</p>
<p><code>content-security-policy: default-src https://www.claudeusercontent.com; script-src 'unsafe-eval' 'unsafe-inline' https://www.claudeusercontent.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net/pyodide/; connect-src https://cdn.jsdelivr.net/pyodide/; worker-src https://www.claudeusercontent.com blob:; style-src 'unsafe-inline' https://www.claudeusercontent.com https://cdnjs.cloudflare.com https://fonts.googleapis.com; img-src blob: data: https://www.claudeusercontent.com; font-src data: https://www.claudeusercontent.com; object-src 'none'; base-uri https://www.claudeusercontent.com; form-action https://www.claudeusercontent.com; frame-ancestors https://www.claudeusercontent.com https://claude.ai https://preview.claude.ai https://claude.site https://feedback.anthropic.com; upgrade-insecure-requests; block-all-mixed-content</code></p>
<p>The <code>https://cdn.jsdelivr.net/pyodide/</code> in there caught my eye, because it suggested that the Anthropic development team had deliberately set it up so <a href="https://pyodide.org/">Pyodide</a>—Python compiled to WebAssembly—could be loaded in an artifact.</p>
<p>I got Claude to spin up a very quick demo to prove that this worked:</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/pyodide-repl.jpg" alt="Pyodide Python REPL -   3 + 4 returns 7. A textarea to enter python code and a Run button."></p>
<p><a href="https://claude.site/artifacts/a3f85567-0afc-4854-b3d3-3746dd1a37f2">https://claude.site/artifacts/a3f85567-0afc-4854-b3d3-3746dd1a37f2</a></p>
<p>I’ve not bothered to extract this one to my own <code>tools.simonwillison.net</code> site yet because it’s purely a proof of concept that Pyodide can load correctly in that environment.</p>
<h4 id="photo-camera-settings-simulator">Photo Camera Settings Simulator</h4>
<p>I was out on a photo walk and got curious about whether or not JavaScript could provide a simulation of camera settings. I didn’t get very far with this one (prompting on my phone while walking along the beach)—the result was buggy and unimpressive and I quickly lost interest. It did expose me to the <a href="http://fabricjs.com/">Fabric.js</a> library for manipulating canvas elements though.</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/photo-settings.jpg" alt="Photo Camera Settings Simulator. An image has been selected - but only the corner of the image displays with some buggy broken resize handles. Three sliders at the bottom show Exposure, Contrast and SAturation."></p>
<p><a href="https://claude.site/artifacts/e645c231-8c13-4374-bb7d-271c8dd73825">https://claude.site/artifacts/e645c231-8c13-4374-bb7d-271c8dd73825</a></p>
<h4 id="llm-pricing-calculator">LLM pricing calculator</h4>
<p>This one I <em>did</em> finish. I built this pricing calculator as part of my experiments with <a href="https://simonwillison.net/2024/Oct/17/video-scraping/">Video scraping using Google Gemini</a>, because I didn’t trust my own calculations for how inexpensive Gemini was! Here are <a href="https://simonwillison.net/2024/Oct/17/video-scraping/#bonus-calculator">detailed notes</a> on how I built that.</p>
<p><img src="https://static.simonwillison.net/static/2024/llm-pricing-calculator.jpg" alt="Screenshot of LLM Pricing Calculator interface. Left panel: input fields for tokens and costs. Input Tokens: 11018, Output Tokens: empty, Cost per Million Input Tokens: $0.075, Cost per Million Output Tokens: $0.3. Total Cost calculated: $0.000826 or 0.0826 cents. Right panel: Presets for various models including Gemini, Claude, and GPT versions with their respective input/output costs per 1M tokens. Footer: Prices were correct as of 16th October 2024, they may have changed."></p>
<p><a href="https://tools.simonwillison.net/llm-prices">https://tools.simonwillison.net/llm-prices</a></p>
<h4 id="yaml-to-json-converter">YAML to JSON converter</h4>
<p>I wanted to remind myself how certain aspects of YAML syntax worked, so I span up a quick YAML to JSON converter tool that shows the equivalent JSON live as you type YAML.</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/yaml-json.jpg" alt="YAML to JSON converter. In the top textarea is YAML. Below it is pretty-printed JSON output."></p>
<p><a href="https://claude.site/artifacts/ffeb439c-fc95-428a-9224-434f5f968d51">https://claude.site/artifacts/ffeb439c-fc95-428a-9224-434f5f968d51</a></p>
<p><a href="https://gist.github.com/simonw/d861edb70a3572cb03de6f98a0caf3bc">Claude transcript</a></p>
<h4 id="openai-audio">OpenAI Audio</h4>
<p>This is my most interesting artifact of the week. I was exploring OpenAI’s new Audio APIs and decided to see if I could get Claude to build we a web page that could request access to my microphone, record a snippet of audio, then base64 encoded that and send it to the OpenAI API.</p>
<p>Here are <a href="https://simonwillison.net/2024/Oct/18/openai-audio/">the full details on how I built this tool</a>.</p>
<p><img src="https://static.simonwillison.net/static/2024/openai-audio-card.jpg" alt="Screenshot of the OpenAI Audio tool. A start recording button is visible, and a 00:00 timer, and a playback audio element. There is a textarea for a prompt and a Submit to API button."></p>
<p><a href="https://tools.simonwillison.net/openai-audio">https://tools.simonwillison.net/openai-audio</a></p>
<p>Claude Artifacts can’t make API requests to external hosts directly, but it can still spin up enough of a working version that it’s easy to take that, move it to different hosting and finish getting it working.</p>
<p>I wrote more about this API pattern in <a href="https://simonwillison.net/2024/Aug/26/gemini-bounding-box-visualization/">Building a tool showing how Gemini Pro can return bounding boxes for objects in images</a>.</p>
<h4 id="qr-code-decoder">QR Code Decoder</h4>
<p>I was in a meeting earlier this week where one of the participants shared a slide with a QR code (for joining a live survey tool). I didn’t have my phone with me, so I needed a way to turn that QR code into a regular URL.</p>

<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/qr.gif" alt="QR Code Decoder  Uses jsQR by Cosmo Wolfe  Upload, drag and drop, or paste a QR code image: Select a file or drag and drop here  I drag on a QR code and the box says:  Decoded content: https://simonwillison.net/"></p>

<p><a href="https://tools.simonwillison.net/qr">https://tools.simonwillison.net/qr</a></p>
<p>Knocking up this QR decoder in Claude Artifacts took just a few seconds:</p>
<blockquote>
<p><code>Build an artifact (no react) that lets me paste in a QR code and displays the decoded information, with a hyperlink if necessary</code></p>
</blockquote>
<p>[ ... ]</p>
<blockquote>
<p><code>have a file open box that also lets you drag and drop and add a onpaste handler to the page that catches pasted images as well</code></p>
</blockquote>
<p><a href="https://gist.github.com/simonw/c2b0c42cd1541d6ed6bfe5c17d638039">Full conversation here</a>.</p>
<h4 id="image-converter-and-downloader">Image Converter and Page Downloader</h4>
<p>Another very quick prototype. On Hacker News someone demonstrated a neat idea for a tool that let you drop photos onto a page and it would bake them into the page as base64 URLs such that you could “save as HTML” and get a self-contained page with a gallery.</p>
<p>I <a href="https://news.ycombinator.com/item?id=41876750#41880857">suggested they could add</a> a feature that generated a “Download link” with the new page baked in—useful on mobile phones that don’t let you “Save as HTML”—and got Claude to knock up a quick prototype:</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/image-converter-and-downloader.jpg" alt="Image converter and page downloader - I've selected an image and there is now a Download Page link below that image."></p>
<p>In this case I shared the code in <a href="https://gist.github.com/egeozcan/b27e11a7e776972d18603222fa523ed4">a Gist</a> and then used the new-to-me <code>https://gistpreview.github.io/?GIST_ID_GOES_HERE</code> trick to render the result:</p>
<p><a href="https://gistpreview.github.io/?14a2c3ef508839f26377707dbf5dd329">https://gistpreview.github.io/?14a2c3ef508839f26377707dbf5dd329</a></p>
<p><a href="https://github.com/gistpreview/gistpreview.github.io">gistpreview</a> turns out to be a really quick way to turn a LLM-generated demo into a page people can view.</p>
<p><a href="https://gist.github.com/egeozcan/b27e11a7e776972d18603222fa523ed4">Code</a>, <a href="https://gist.github.com/simonw/7026fe5051ba138eb15ef82f4936eaed">Claude transcript</a></p>
<h4 id="html-entity-escaper">HTML Entity Escaper</h4>
<p>Another example of on-demand software: I needed to escape the HTML entities in a chunk of text on my phone, so I got Claude to build me a tool for that:</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/html-entities.jpg" alt="HTML entity escaper. In the input box I have typed in text with some double quotes. The output box has those correctly escaped, and a copy to clipboard button."></p>
<p><a href="https://claude.site/artifacts/46897436-e06e-4ccc-b8f4-3df90c47f9bc">https://claude.site/artifacts/46897436-e06e-4ccc-b8f4-3df90c47f9bc</a></p>
<p>Here’s the prompt I used:</p>
<blockquote>
<p><code>Build an artifact (no react) where I can paste text into a textarea and it will return that text with all HTML entities - single and double quotes and less than greater than ampersand - correctly escaped. The output should be in a textarea accompanied by a "Copy to clipboard" button which changes text to "Copied!" for 1.5s after you click it. Make it mobile friendly</code></p>
</blockquote>
<h4 id="text-wrap-balance-nav">text-wrap-balance-nav</h4>
<p>Inspired by <a href="https://shkspr.mobi/blog/2024/10/you-can-use-text-wrap-balance-on-icons/">Terence Eden</a> I decided to do a quick experiment with the <code>text-wrap: balance</code> CSS property. I got Claude to build me an example nav bar with a slider and a checkbox. I <a href="https://simonwillison.net/2024/Oct/20/you-can-use-text-wrap-balance-on-icons/">wrote about that here</a>.</p>
<p><img alt="Animated demo. A navigation menu with 13 items - things like Home and About and Services and a products. These are wrapped on four lines with 4, 4, 4 and then 1 item. Selecting the enable text-wrap: balances checkbox changes that to 3, 4, 3, 3 - a slider also allows the number of visible items to be changed to see the effect that has" src="https://static.simonwillison.net/static/2024/text-wrap-balance.gif"></p>
<p><a href="https://tools.simonwillison.net/text-wrap-balance-nav">https://tools.simonwillison.net/text-wrap-balance-nav</a></p>
<h4 id="ares-phonetic-alphabet-converter">ARES Phonetic Alphabet Converter</h4>
<p>I was volunteering as a HAM radio communications operator for <a href="https://hmbpumpkinfest.com/featured-exhibits/great-pumpkin-run.html">the Half Moon Bay Pumpkin Run</a> and got nervous that I’d mess up using the phonetic alphabet—so I had Claude build me this tool:</p>
<p><img src="https://static.simonwillison.net/static/2024/claude-artifacts/phonetic-alphabet.jpg" alt="ARES PHonetic Alphabet Converter. I have entered the text Cleo is a lobster. After clicking the Convert button I get the output Charlie Lima Echo Oscar (Space) India Sierra (Space) Alpha (Space) Lima Oscar Sierra Tango Echo Romeo"></p>
<p><a href="https://claude.site/artifacts/aaadab20-968a-4291-8ce9-6435f6d53f4c">https://claude.site/artifacts/aaadab20-968a-4291-8ce9-6435f6d53f4c</a></p>
<p><a href="https://gist.github.com/simonw/6ad4133c93e22df4c0ce731fdd7a2a91">Claude transcript here</a>. Amusingly it built it in Python first, then switched to JavaScript after I reminded it that I wanted “an interactive web app”.</p>
<h4 id="this-is-so-useful-and-so-much-fun-">This is so useful, and so much fun!</h4>
<p>As you can see, I’m a <em>heavy</em> user of this feature—I just described 14 projects produced in a single week. I’ve been using artifacts since they were released <a href="https://simonwillison.net/2024/Jun/20/claude-35-sonnet/">on 20th June</a> (alongside the excellent Claude 3.5 Sonnet, still my daily-driver LLM) and I’m now at a point where I fire up a new interactive artifact several times a day.</p>
<p>I’m using artifacts for idle curiosity, rapid prototyping, library research and to spin up tools that solve immediate problems.</p>
<p>Most of these tools took less than five minutes to build. A few of the more involved ones took longer than that, but even the OpenAI Audio one took <a href="https://gist.github.com/simonw/0a4b826d6d32e4640d67c6319c7ec5ce">11:55am to 12:07pm</a> for the first version and <a href="https://gist.github.com/simonw/a04b844a5e8b01cecd28787ed375e738">12:18pm to 12:27pm</a> for the second iteration—so 21 minutes total.</p>
<p>Take a look at my <a href="https://simonwillison.net/tags/claude-artifacts/">claude-artifacts</a> tag for even more examples, including <a href="https://simonwillison.net/2024/Oct/6/svg-to-jpg-png/">SVG to JPG/PNG</a>, <a href="https://simonwillison.net/2024/Sep/21/markdown-and-math-live-renderer/">Markdown and Math Live Renderer</a> and <a href="https://simonwillison.net/2024/Jul/26/image-resize-and-quality-comparison/">Image resize and quality comparison</a>.</p>
<p>I also have a <a href="https://simonwillison.net/2024/Oct/21/dashboard-tools/">dashboard</a> of every post that links to my <a href="https://tools.simonwillison.net/">tools.simonwillison.net</a> site, and the underlying <a href="https://github.com/simonw/tools">simonw/tools</a> GitHub repo includes more unlisted tools, most of which link to their Claude conversation transcripts in their commit history.</p>
<p>I’m beginning to get a little frustrated at their limitations—in particular the way artifacts are unable to make API calls, submit forms or even link out to other pages. I’ll probably end up spinning up my own tiny artifacts alternative based on everything I’ve learned about them so far.</p>
<p>If you’re <em>not</em> using artifacts, I hope I’ve given you a sense of why they’re one of my current favourite LLM-based tools.</p>


</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Playstation Vita Architecture (Part 1) (146 pts)]]></title>
            <link>https://www.copetti.org/writings/consoles/playstation-vita/</link>
            <guid>41928529</guid>
            <pubDate>Wed, 23 Oct 2024 19:31:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.copetti.org/writings/consoles/playstation-vita/">https://www.copetti.org/writings/consoles/playstation-vita/</a>, See on <a href="https://news.ycombinator.com/item?id=41928529">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><h2 id="imagery">Supporting imagery</h2><section><ul><li><a href="#cover-model">Model</a></li><li><a href="#cover-motherboard">Motherboard</a></li></ul></section><hr><h2 id="a-quick-introduction">A quick introduction</h2><p>The PSVita is a noteworthy intersection between the video-game establishment and the rapidly evolving mobile sector. Times have changed, and it won’t be easy for Sony as it faces fierce competition from cheap gadgets that do more than just make phone calls.</p><p>The new analysis of <a href="https://www.copetti.org/writings/consoles/">this series</a> dives into the contemporary technology behind Sony’s new delivery. Do expect to find recognisable circuitry - perhaps too familiar. Even so, Sony made clear efforts to steer away from any resemblance to the smartphone market.</p><h3 id="models-and-variants">Models and variants</h3><p>As the console sat on store shelves, Sony revisited its product strategy multiple times, leading to three variants of the PSVita being shipped throughout its lifecycle:</p><ul><li>The <strong>original</strong> PSVita (sometimes called the ‘Fat’ model) is the series debut.</li><li>The <strong>Slim</strong> revision retains the same architecture, but exchanges the OLED screen for an LCD to reduce costs. Furthermore, it doesn’t offer a 3G-capable variant anymore. It does, however, feature a bigger eMMC chip… only 52 MB larger! For some strange reason, that was enough to provide an internal 1 GB memory card. In any case, I’ll explain more in the ‘Games’ section.</li><li>The <strong>PlayStation TV</strong> is just a Slim motherboard adapted for the non-portable setting.</li></ul><p>As you can see, the information in this article will easily apply to all three models, although I will dedicate extra paragraphs to talk about the puzzling eMMC changes of the last two variants.</p><h3 id="a-new-publishing-model">A new publishing model</h3><p>Until now, my delivery model involved finishing the whole analysis and then publishing a complete article at once. However, as I continue studying the 8th generation, my articles have considerably grown in complexity. They tend to take almost a year to finish, and the review process has become too cumbersome. Thus, for a change, I’d like to try a new phased approach where I publish by sections instead, starting with the CPU. This will also make the reviewing stage more efficient.</p><p>Having said that, let’s start with the first section.</p><hr><h2 id="cpu">CPU</h2><p>Sony had been an avid adopter of MIPS technology since the original PlayStation. Even at times when SGI/MIPS was losing market share in the late 90s, Sony shipped a <a href="https://www.copetti.org/writings/consoles/playstation-portable/">successful product</a> carrying MIPS’ <a href="https://www.copetti.org/writings/consoles/playstation-portable/#mips-after-the-turn-of-the-century">revamped line</a>. However, the next decade proved bitter: ARM managed to <a href="https://www.copetti.org/writings/consoles/nintendo-ds/#turning-points">monopolise</a> the mobile market and MIPS’ adoption only diminished. Thus, Sony ultimately put their faith in an ARM CPU instead, and Toshiba (Sony’s close manufacturing <a href="https://www.copetti.org/writings/consoles/playstation-2/#a-special-order-for-sony">partner</a>) would now play the role of <a href="https://www.copetti.org/writings/consoles/game-boy-advance/#tab-1-2-a-new-cpu-venture">ARM licensee</a>.</p><p>The resulting motherboard only houses a handful of integrated circuits, but they package a mix of designs authored by different companies. The main chip is called <strong>Kermit</strong> <sup id="bibref:1"><a href="#bib:cpu-kermit" role="doc-biblioref">[1]</a></sup> (a name borrowed from ‘The Muppets’), it features the largest amount of circuitry, and it’s where the main CPU resides.</p><figure><a href="https://www.copetti.org/images/consoles/psvita/photos/kermit.eacea19e5654107edd286da36949155f606f9545d2ad9d8820542bb5e36b65b7.webp"><picture><source type="image/webp" srcset="https://www.copetti.org/images/consoles/psvita/photos/kermit.eacea19e5654107edd286da36949155f606f9545d2ad9d8820542bb5e36b65b7.webp"><img alt="Image" width="846" height="582" src="https://www.copetti.org/images/consoles/psvita/photos/_hu8cb4d5a93629ee790fbf786b462ec175_52358_e8af1d0c10002cb199314cd254d1e253.png" loading="lazy"></picture></a><figcaption>The Kermit chip in the original PSVita model. This tiny block houses multiple CPUs, GPUs and ~640 MB of RAM… how far we’ve come!</figcaption></figure><p>Now, while Kermit is considered a <strong>System-On-Chip</strong> (SoC), it exceptionally manages to combine large amounts of memory and processors within the same package. This is thanks to Toshiba’s <strong>Stacked Chip SoC</strong> (SCS) fabrication model <sup id="bibref:2"><a href="#bib:cpu-scs" role="doc-biblioref">[2]</a></sup>. Within it, circuitry is piled on top of others - as opposed to being externally connected side-by-side. The direct consequence is an increase of bandwidth and a reduction of surface footprint, at the cost of a more complex heat dissipation design.</p><p>In any case, SCS fabrication enabled Sony and Toshiba to fit cutting-edge technology while maintaining an energy-efficient profile, just look at all the components Kermit houses:</p><ul><li>The <strong>main CPU</strong>, a quad-core ARM Cortex-A9 MPCore.</li><li>The <strong>main GPU</strong>, a PowerVR SGX543MP4+ by Imagination Technologies.</li><li>Many <strong>accelerators</strong> (some proprietary, others off the shelf), including an ‘AVC Decoder’, <a href="https://www.copetti.org/writings/consoles/playstation/#taking-over-the-cpu">DMA Controllers</a>, a large DSP and security blocks (which includes hidden ROM space).</li><li><strong>Around 640 MB of RAM</strong> (split into multiple types).</li><li>Last but not least, <strong>legacy PlayStation Portable circuitry</strong> (the <a href="https://www.copetti.org/writings/consoles/playstation-portable/#cpu">MIPS CPU</a> and the <a href="https://www.copetti.org/writings/consoles/playstation-portable/#graphics">Graphics Engine</a>).</li></ul><p>…and throughout this article we’ll take a look at each of those!</p><h3 id="the-main-cpu">The main CPU</h3><p>Our new study subject is the <strong>ARM Cortex-A9 MPCore</strong>, a very mature processor from ARM Ltd.&nbsp;</p><p>To make this study captivating and help understand all the technological progress since <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/#cpu">my last analysis</a> of the ARM11 CPU, I’d like to begin with an overview of the new ‘Cortex’ line. Then, a quick look at the Cortex-A8 (the predecessor of the A9). Finally, the novelties of the Cortex-A9.</p><h4 id="continued-history">Continued history</h4><figure><figure><a href="https://www.copetti.org/images/consoles/gba/cpu_agb.5718b7d30c573e668823d04f3b2df402e5d74eced59d0aca30219c2171549a56.png"><picture><img alt="Image" width="300" height="232" src="https://www.copetti.org/images/consoles/gba/cpu_agb.5718b7d30c573e668823d04f3b2df402e5d74eced59d0aca30219c2171549a56.png" loading="lazy"></picture></a><figcaption>The Game Boy Advance housed an ARM7TDMI.</figcaption></figure><figure><a href="https://www.copetti.org/images/consoles/nintendods/cpu_ntr.e00a63784a027cf659e3c8d8f61868a1c9708a3f8b3d4b89e533e991218c0efb.jpg"><picture><source type="image/webp" srcset="https://www.copetti.org/images/consoles/nintendods/_hu40410fe630da5453ce9d993455548393_71576_1960096c81b9a73df2547b87f8127cfd.webp 464w"><img alt="Image" width="464" height="388" src="https://www.copetti.org/images/consoles/nintendods/cpu_ntr.e00a63784a027cf659e3c8d8f61868a1c9708a3f8b3d4b89e533e991218c0efb.jpg" loading="lazy"></picture></a><figcaption>The Nintendo DS housed an ARM946E-S and ARM7TDMI.</figcaption></figure><figcaption>Past System-on-Chips (SoCs) housing iconic ARM CPUs.</figcaption></figure><p>ARM has come a long way since the days of the <a href="https://www.copetti.org/writings/consoles/game-boy-advance/">Game Boy Advance</a>, to recall its significant milestones:</p><ul><li>The ARM CPU was conceived as a <a href="https://www.copetti.org/writings/consoles/game-boy-advance/#tab-1-1-the-rise-of-acorn-computers">replacement</a> of the <a href="https://www.copetti.org/writings/consoles/nes/#cpu">MOS 6502</a> CPU for Acorn’s computers, later reaching maturity thanks to <a href="https://www.copetti.org/writings/consoles/game-boy-advance/#tab-1-2-a-new-cpu-venture">Apple’s input</a>.</li><li>The <a href="https://www.copetti.org/writings/consoles/game-boy-advance/#the-arm7tdmi">ARM7TDMI</a> paved the way for success in the embedded market. At the same time, competitors across the pond <a href="https://www.copetti.org/writings/consoles/playstation-portable/#the-end-of-the-line">chose to avoid any mobile venture</a>.</li><li>The subsequent <a href="https://www.copetti.org/writings/consoles/nintendo-ds/#arms-new-territories">StrongARM/ARM9</a> line granted the company a spot in the performance sector.</li><li><a href="https://www.copetti.org/writings/consoles/playstation-portable/#the-end-of-the-line">As the competition faded</a>, the new <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/#cpu">ARM11 line</a> demonstrated this CPU could now partake on 3D applications.</li></ul><p>The next achievement would become <strong>Cortex</strong>: a new brand carrying a revised instruction set and processor line. This time, ARM would adopt practices traditionally found in the desktop/workstation market, eventually coming heads-to-head with Intel’s x86. Curiously enough, Cortex’s marketing strategy is very similar to Intel’s Pentium, in the sense that the name ‘Cortex’ ultimately becomes an ambiguous term to hide the complicated identifications and variants of all its chips.</p><h5 id="the-cortex-line-up">The Cortex line-up</h5><p>With the announcement of Cortex as a brand, ARM’s product line diversified into three distinguishable sectors: <strong>industrial</strong>, <strong>performance</strong> and <strong>embedded</strong>. Thus, any Cortex CPU would be fitted into a ‘profile’ (Cortex-R, Cortex-A and Cortex-M, respectively), each targeting one of these markets. For this study, we’ll focus on the <strong>Cortex-A</strong> line, which focused on performance or ‘applications’ (in other words, user devices); and made a profound impact on smartphones.</p><figure><a href="https://www.copetti.org/images/consoles/psvita/cortexa8_phones.fce29b750612bf9558672988bda179ca1b946360bd89775cd85d61b65e454ac1.webp"><picture><source type="image/webp" srcset="https://www.copetti.org/images/consoles/psvita/cortexa8_phones.fce29b750612bf9558672988bda179ca1b946360bd89775cd85d61b65e454ac1.webp"><img alt="Image" width="1100" height="452" src="https://www.copetti.org/images/consoles/psvita/_hu544632fc7cf0c5975b0f2f30a9ae9eb1_48164_ad8fc51f938953fa3abeb0fad37f0e61.png" loading="lazy"></picture></a><figcaption>Some smartphones from the Cortex-A8 generation. From left to right: iPhone 3GS (2009), Nokia N900 (2009), Palm Pre (2009) and Nexus S (2010)</figcaption></figure><p>ARM’s first delivery for ‘applications’ was the <strong>Cortex-A8</strong> CPU. It shipped in 2005, but it wasn’t until four years later that smartphones started adopting it. The <strong>iPhone 3GS</strong>, <strong>Motorola Droid</strong> and <strong>Nokia N900</strong> were its debuting flagship carriers. Be as it may, the CPU can’t work by itself, so these devices relied on Samsung and Texas Instruments to package all the necessary modules into a SoC (combining the CPU with the GPU, modem and other I/O).</p><p>It’s worth mentioning that the Cortex CPU was also a decisive choice for manufacturers finally making the jump from <a href="https://www.copetti.org/writings/consoles/nintendo-ds/#turning-points">Intel’s XScale</a>, such as RIM and its Blackberry line. On the other side, certain smartphones like the Toshiba TG01 and the HTC HD2 only adopted Cortex’s technology partially (they implement the same instruction set, but its microarchitecture was designed by Qualcomm instead).</p><p>Notice that these devices also coincide with a certain time when users considerably changed their attitude towards smartphones: these were initially trusted for trivial tasks such as text messages and e-mail, but now they were starting to provide access to bank accounts, with only a few years behind bringing contactless payments.</p><h5 id="more-news">More news</h5><p>Along the Cortex-A8 came the <strong>ARMv7</strong> instruction set. This is the continuation of the <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/#new-dialects">ARMv6 ISA</a> by expanding its multi-processing and SIMD capabilities <sup id="bibref:3"><a href="#bib:cpu-thomas_v7" role="doc-biblioref">[3]</a></sup>.</p><p>ARMv7 is the longest-living 32-bit ISA from ARM, but also the last one. Its wide-spread adoption would still be highly <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/#and-a-fragmented-distribution">fragmented</a>, mainly due to the split of Cortex into the aforementioned profiles (spawning different subsets of the ISA), existing adoption of the ARMv6 (i.e.&nbsp;the first Raspberry Pi and Nokia’s Symbian platform only supported ARMv6) and the enlargement of Thumb. To avoid making this topic too dense, I’ve dedicated different sections further down to discuss these.</p><h4 id="the-core">The core</h4><p>So far I’ve talked about the Cortex-A8, that’s the first Cortex CPU. But the PSVita actually bundles the succeeding CPU, the <strong>Cortex-A9</strong> (released two years later, in 2007). It’s curious to see that this console was just a few months apart from the <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/">Nintendo 3DS</a>, a console designed with horizontal innovation in mind.</p><p>Moving on, the full name of the PSVita’s CPU is <strong>ARM Cortex-A9 MPCore</strong>. Overall, this means the CPU is a cluster made of <strong>multiple Cortex-A9 cores</strong>, <strong>four</strong> in this case. It runs at a clock speed of <strong>up to 500 MHz</strong> <sup id="bibref:4"><a href="#bib:cpu-psdev_cpu" role="doc-biblioref">[4]</a></sup>, an underwhelming number considering contemporary adopters of the quad-core A9, such as the Samsung Galaxy S III, reached speeds of 1.4 GHz <sup id="bibref:5"><a href="#bib:cpu-galaxy" role="doc-biblioref">[5]</a></sup>. It’s possible that battery life was the main priority here. Nevertheless, clock speed is not the only decisive measurement, the inner workings of the CPU are as important.</p><p>Speaking of which, the new cores share many characteristics with their predecessor, the Cortex-A8, which includes <sup id="bibref:6"><a href="#bib:cpu-cortexa8_reference" role="doc-biblioref">[6]</a></sup>:</p><ul><li>The next-generation instruction set called <strong>ARMv7-A</strong>, I explain more details further on.</li><li><strong>64 KB of L1 cache</strong> which inherently follows the <a href="https://www.copetti.org/writings/consoles/nintendo-ds/#arms-new-territories">Harvard architecture</a>. Consequently, it’s divided into <strong>32 KB for data</strong> and <strong>32 KB for instructions</strong>.<ul><li>Cache coherency among the cores is automatically handled by the <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/#tab-3-3-the-axi-bus">Snoop Control Unit</a>, previously featured in the ARM11MpCore.</li></ul></li><li><strong>2-issue superscalar</strong>: For the first time, ARM has brought <a href="https://www.copetti.org/writings/consoles/xbox-360/#an-alternative-solution">instruction-level parallelism</a>. This means that, as long as there are no <a href="https://www.copetti.org/writings/consoles/playstation/#delay-galore">hazards</a>, the CPU will try to execute two instructions using two separate pipelines. This increases the amount of instructions executed per clock cycle. <a href="https://www.copetti.org/writings/consoles/playstation-2/#tab-1-1-outperforming-success">MIPS</a> and <a href="https://www.copetti.org/writings/consoles/dreamcast/#the-offering">SuperH</a> brought this a decade before, but the two suffered a quick demise, so it’s now ARM’s turn to carry it forward.</li><li><strong>Dynamic branch prediction</strong>: The CPU now predicts the execution path by relying on two dedicated buffers while fetching instructions. The first anticipates whether an upcoming instruction will be a branch, and the next buffer maps the previous flow of the program. Finally, the latter is used to predict whether upcoming branches will be taken or not <sup id="bibref:7"><a href="#bib:cpu-cortexa8_imp" role="doc-biblioref">[7]</a></sup>.<ul><li>It’s worth mentioning that this unit <strong>only predicts branching instructions</strong>, omitting other optimisation techniques such as <a href="https://www.copetti.org/writings/consoles/game-boy-advance/#commanding-the-cpu">conditionals</a> or the <code>IT</code> instruction… Maybe that’s a hint about the future of the ARM ISA.</li></ul></li><li>A <a href="https://www.copetti.org/writings/consoles/nintendo-64/#memory-management">Memory Management Unit</a> (MMU) with a Translation Lookaside Buffer (TLB). This is already typical on most CPUs.<ul><li>By the way, in the case of the Cortex brand, only the ‘Cortex-A’ profile includes this package (the ‘Cortex-R’ bundles an <a href="https://www.copetti.org/writings/consoles/playstation-vita/#focused-memory-management">MPU</a> instead and the ‘Cortex-M’ includes neither).</li></ul></li><li><strong>TrustZone</strong>: A new security subsystem that adds a dimension to the <a href="https://www.copetti.org/writings/consoles/playstation-vita/#focused-memory-management">privilege levels</a> of the MMU. It’s implemented on both the hardware level (by segregating buses between non-secure and secure peripherals) and the software level (by executing a secondary and isolated operating system that handles confidential data). The special OS is called <strong>Trusted Execution Environment</strong>.<ul><li>The OS model of TrustZone reminds me of the <a href="https://www.copetti.org/writings/consoles/playstation-3/#cells-privileged-security">isolated SPU of Cell</a>.</li></ul></li><li><strong>NEON Media Processing Engine</strong> (MPE), a new co-processor that carries out vector and floating-point operations. We’ll dive more into it in the next sections.</li></ul><p>Now, the Cortex-A9 (found in the PSVita) improves the original design by applying significant enhancements <sup id="bibref:8"><a href="#bib:cpu-cortexa9_mpcore" role="doc-biblioref">[8]</a></sup>:</p><ul><li><strong>Multi-core support</strong>. This is most evident by looking at Sony’s choice of a quad-core package.<ul><li>As a side note, this also explains why portable devices like the iPad 2 and iPhone 4s (both carrying an A9) managed to debut a dual-core CPU.</li></ul></li><li><strong>Out-Of-Order execution</strong> through the use of <a href="https://www.copetti.org/writings/consoles/xbox-360/#revisiting-old-paradigms">register renaming</a>. This is a huge step for ARM in further scaling its <a href="https://www.copetti.org/writings/consoles/xbox-360/#an-alternative-solution">Instruction level parallelism</a>, considering other chips like PowerPC were forced to <a href="https://www.copetti.org/writings/consoles/xbox-360/#revisiting-old-paradigms">abandon it</a>.<ul><li>This will also have a profound effect on the evolution of the ARM instruction set. You will see this in a future analysis of the Nintendo Switch.</li></ul></li><li>A <strong>variable-length pipeline</strong>, between <strong>8 and 11 stages</strong> depending on the operation. The total number may also increase if execution continues in the multimedia co-processor (explained in the next section).</li></ul><p>Moreover, Sony customised the package by adding one of ARM’s upgrades called <strong>Primelink Level 2 Cache Controller</strong> along with <strong>2 MB of L2 cache</strong> shared among all cores <sup id="bibref:9"><a href="#bib:cpu-primelink_l2" role="doc-biblioref">[9]</a></sup>. Primelink is a flexible cache subsystem which can be programmed with different types of <a href="https://www.copetti.org/writings/consoles/xbox-360/#shared-cache">cache associations</a>, from direct mapping to 16-way. If you are curious, years later ARM renamed the Primelink brand to ‘CoreLink’ <sup id="bibref:10"><a href="#bib:cpu-corelink_l2" role="doc-biblioref">[10]</a></sup>.</p><h4 id="the-grown-up-isa">The grown-up ISA</h4><p>The ARMv7 instruction set in the Cortex-A9 features a multitude of extensions. The majority of changes will be in the form of <a href="https://www.copetti.org/writings/consoles/dreamcast/#special-work">SIMD capabilities</a> and multiprocessing, you’ll notice this when we take a closer look into the novelties of the ARMv7.</p><div><ul><li id="tab-2-1-a-quick-glance-link"><a href="#tab-2-1-a-quick-glance">A quick glance</a></li><li id="tab-2-2-overshadowing-features-link"><a href="#tab-2-2-overshadowing-features">Overshadowing features</a></li></ul><div><div id="tab-2-1-a-quick-glance"><h5 id="tab-2-1-a-quick-glance">A quick glance</h5><p>ARMv7 is a superset of the ARMv6 ISA. Its additions can be grouped into four areas: VFPv3, NEON, Security Extension and multi-processing. I explain each further down.</p><p>Moreover, the alternative <a href="https://www.copetti.org/writings/consoles/game-boy-advance/#tab-2-3-squeezing-performance">Thumb ISA</a> (previously enhanced with <a href="https://www.copetti.org/writings/consoles/nintendo-ds/#tab-1-2-arm946e-s">Thumb v2</a>) has undergone a major revision called <strong>Thumb-2</strong>. Truth to be told, it already debuted on embedded ARMv6 CPUs (implementing the ARMv6T2 variant), but it has now become a standard on the Cortex-A line.</p><p>On the other side, it’s worth mentioning that <strong>Thumb-2EE</strong>, the successor of the deprecated <a href="https://www.copetti.org/writings/consoles/wii/#the-hidden-co-processor">Jazelle</a>, has been left unused or even excluded from many Cortex-A CPUs. I don’t think the Vita’s SoC even bothers implementing this. If you want an idea of its adoption back in the day, let me tell you that Dalvik (Android’s Java interpreter, to put it simply) didn’t even bother using Jazelle/Thumb-2EE at all. That tells you the general attitude towards ARM’s Java efforts.</p></div><div id="tab-2-2-overshadowing-features"><h5 id="tab-2-2-overshadowing-features">Overshadowing features</h5><p>Back to the interesting bit, Thumb-2 is a significant revamp of Thumb because it <strong>adds 32-bit instructions</strong> <sup id="bibref:11"><a href="#bib:cpu-thomas_thumb" role="doc-biblioref">[11]</a></sup>. Considering Thumb originally only bundled 16-bit opcodes, it now has filled all the missing gaps when compared to the master ISA (ARM). Now, in contrast with ARM, Thumb-2 offers greater density and is only missing the <a href="https://www.copetti.org/writings/consoles/game-boy-advance/#commanding-the-cpu">conditionals</a>. Even so, Thumb-2 manages to bridge this functionality by including an exclusive <code>IT</code> instruction.</p><p>Nevertheless, Thumb’s renovation unfortunately means more fragmentation and confusion, eventually to the point assembler developers can’t decide which instruction set to use. ‘Lucky’ for them, ARM also devised a specification called <strong>Unified Assembler Language</strong> (UAL) that aimed to consolidate all ISAs in a single codebase that can target both ARM and Thumb-2 ISAs. This allows programs written in UAL to be assembled for all variants of Cortex CPUs (some of which implement ARM and Thumb-2 ISA while others only support Thumb-2). Behind the scenes, UAL is just the union of ARM and Thumb-2 opcodes, the assembler then skips opcodes based on the target CPU. For instance, when it comes to writing a branching subroutine, programmers must write the two types of branching opcodes in the same routine (ARM’s conditionals and Thumb-2’s <code>IT</code> instruction) - effectively ‘duplicating’ code. However, the assembler then decides which opcodes to parse based on the target processor.</p><p>In the case of using programming languages (C, Objective-C, C++, etc.), the decision is much simpler, <strong>compilers default to Thumb-2 for assembly generation</strong> <sup id="bibref:12"><a href="#bib:cpu-uni_fund" role="doc-biblioref">[12]</a></sup>, mainly due to its efficient code density and rare performance penalties. Thus, smartphone apps and, by extension, applications for the PSVita, are mainly compiled into Thumb-2 instead of ARM.</p></div></div></div><h5 id="more-accelerators">More accelerators</h5><p>The most notable component of the Cortex-A9, in particular for the PSVita, is the <strong>Media Processing Engine</strong> (MPE). This is ARM’s new coprocessor for 3D applications. It’s been engineered in a very convoluted way, however, as it executes two different but related instruction sets:</p><ul><li>The <strong>Vector Floating-Point v3</strong> (VFPv3): A continuation of <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/#tab-3-1-the-original-mpcore">VFPv2</a> for floating-point capabilities. It’s IEEE-754 compliant and now extended to provide instructions like <code>VCVT</code> (to convert between fixed-point and floating-point values) and <code>VMOV</code> (to transfer values between the CPU and the FPU register file). This is helpful since <strong>the VFP only understands 32-bit and 64-bit floating-point values</strong>.<ul><li>The exact variant included in the Cortex-A9 is called ‘VFPv3-D32’, meaning it includes <strong>thirty-two 64-bit registers</strong>.</li><li>Even though this ISA contains the word ‘vector’, ARMv7 deprecated the use of the vector instructions and the Cortex-A9 includes none <sup id="bibref:13"><a href="#bib:cpu-cortexa9_mpe" role="doc-biblioref">[13]</a></sup>. <em>So much for being called a ‘vector FPU’…</em></li></ul></li><li>The <strong>NEONv1</strong>, also known as ‘ARMv7 Advanced SIMD’, is the <em>real</em> vector instruction set, enabling to operate multiple scalars at once. NEON provides <strong>sixteen 128-bit registers</strong>, which can be also split into thirty-two 64-bit or 32-bit ‘virtual’ registers. The integers being operated may be as big as 64 bits, while floating-point types can’t surpass 32 bits.<ul><li>It’s worth reminding that <a href="https://www.copetti.org/writings/consoles/playstation-portable/#coprocessors">Sony’s predecessor vector unit</a> provided the immense amount of 128 registers, albeit 32-bit instead. If we do the math, the Cortex-A9 MPCore manages to match that number. Although, only 16 registers are accessible per core, and forget about the matrix-type addressing that made the VFPU special and efficient. On the bright side, perhaps there’s a new optimisation opportunity by having multiple cores compute SIMD instructions in parallel.</li></ul></li></ul><p>NEON and VFPv3 share the same register file, but they’re still considered separate ISAs. Considering ancestral processors like the SH-4 delivered SIMD operations <a href="https://www.copetti.org/writings/consoles/dreamcast/#special-work">by simply extending its FPU</a>, one can only wonder why ARM ended up producing two distinct ISAs. Well, the explanation is simple: <strong>neither is feature-complete</strong>. Particularly, <strong>VFPv3 doesn’t support fixed-point</strong> while <strong>NEON is not compliant with the IEEE 754 standard</strong> <sup id="bibref:14"><a href="#bib:cpu-johnston" role="doc-biblioref">[14]</a></sup>. So, as an intermediate solution, the circuitry was segregated.</p><figure><a href="https://www.copetti.org/images/consoles/psvita/axim.2a01779d1fb8a57e6be9e8da7700b6d1f53a6daced1f632cfcc592ad7ddda29a.webp"><picture><source type="image/webp" srcset="https://www.copetti.org/images/consoles/psvita/axim.2a01779d1fb8a57e6be9e8da7700b6d1f53a6daced1f632cfcc592ad7ddda29a.webp"><img alt="Image" width="819" height="1000" src="https://www.copetti.org/images/consoles/psvita/_hu60b5a6ff262668fe2c1190207efeefa9_33220_e3f5313e7bddc82982e9b95f94e256f2.png" loading="lazy"></picture></a><figcaption>The Dell Axim X51v (2005).<br>This high-end PDA carried an Intel XScale PXA270 CPU, compatible with the ARMv5 ISA but also bundles proprietary SIMD extensions, which were only available on Intel’s CPU line. This conflicted with ARM’s business model. In response, ARM presented the NEONv1 set.<br>By the way, this device also houses a PowerVR MBX GPU, which is related to the graphics chip of the PSVita.</figcaption></figure><p>All in all, this means the compiler will need to work harder optimising the code, but it still makes you wonder why ARM’s engineers ended up complicating things to absurd levels. In my opinion, I believe NEON was rushed to rapidly counter <strong>Wireless MMX</strong> (Intel’s proprietary SIMD extension for the XScale, released a year before) as ARM didn’t enjoy seeing Intel bundling exclusive instructions only available on the XScale <sup id="bibref:15"><a href="#bib:cpu-mmx" role="doc-biblioref">[15]</a></sup>. This is also complemented by the fact the official documentation on Cortex’s timings was hurried as well <sup id="bibref:16"><a href="#bib:cpu-timings" role="doc-biblioref">[16]</a></sup>.</p><h3 id="the-master-bus">The master bus</h3><p>Another popular product from ARM, the <a href="https://www.copetti.org/writings/consoles/wii/#the-hidden-co-processor">AMBA protocol</a> designed for interconnecting components, carries forward with the Cortex-A9. Still in its <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/#tab-3-3-the-axi-bus">third revision</a>, the AXI subset was selected for interfacing the cores and external components outside the MPCore cluster. Curiously enough, it’s the <a href="https://www.copetti.org/writings/consoles/nintendo-3ds/#tab-3-3-the-axi-bus">same choice</a> found in the ARM11 and its well-known adopter, the Nintendo 3DS.</p><h3 id="envisioning-the-future">Envisioning the future</h3><p>After the Cortex-A9, the line of succession became increasingly confusing. The Cortex-A series was broken down into <strong>four more categories</strong>, ranging from the top performer to the most energy-efficient. In doing so, the model numbering of each CPU became absurdly difficult to follow, but I guess it didn’t matter for the end user because these CPUs weren’t sold off-the-shelf!</p><p>The next big milestone for ARM will debut in 2011, with the arrival of ARMv8. I’ll talk more about this in a future article about the Nintendo Switch.</p><h3 id="media-coprocessors">Media coprocessors</h3><p>Next to the ARM cluster, Sony bundled a couple of accelerators that support gaming-related tasks. Just like the previous <a href="https://www.copetti.org/writings/consoles/playstation-portable/#multimedia-cpu">Media Engine group</a>, they are completely proprietary and act as a black box. Programmers are not meant to fiddle with them directly but through the official SDK.</p><div><ul><li id="tab-3-1-venezia-link"><a href="#tab-3-1-venezia">Venezia</a></li><li id="tab-3-2-avc-decoder-link"><a href="#tab-3-2-avc-decoder">AVC Decoder</a></li></ul><div><div id="tab-3-1-venezia"><h4 id="tab-3-1-venezia">Venezia</h4><figure><a href="https://www.copetti.org/images/consoles/psvita/cpu/venezia.82c55d77c81ac06f3440dbc7b4c6d8a53d3bafdbef9ecec59ec607d79ba68c40.png"><picture><img alt="Image" width="753" height="651" src="https://www.copetti.org/images/consoles/psvita/cpu/venezia.82c55d77c81ac06f3440dbc7b4c6d8a53d3bafdbef9ecec59ec607d79ba68c40.png" loading="lazy"></picture></a><figcaption>Overview of Venezia.</figcaption></figure><p>To start with, we’ve got <strong>Venezia</strong>. This is a complete and separate CPU package designed by Sony’s close partner, Toshiba, for image and sound processing <sup id="bibref:17"><a href="#bib:cpu-toshiba_press" role="doc-biblioref">[17]</a></sup>. With functionality closer to a Digital Signal Processor (DSP), Venezia was also sold as a <a href="https://www.copetti.org/writings/consoles/game-boy-advance/#tab-1-2-a-new-cpu-venture">synthesisable chip</a> for multimedia appliances (i.e.&nbsp;DVD players) <sup id="bibref:18"><a href="#bib:cpu-mep" role="doc-biblioref">[18]</a></sup>. Consequently, Sony selected it to accelerate multimedia tasks, so you could say it’s the spiritual successor of the <a href="https://www.copetti.org/writings/consoles/playstation-portable/#multimedia-cpu">Media Engine</a>.</p><p>Similarly to the MPCore, Venezia is a cluster, this time made of <strong>eight ‘Media Processing Engine’ (MPE) cores</strong> operating at <strong>266.7 MHz</strong>. Notice that its naming confusingly overlaps with ARM’s vector accelerators, but they are different silicon. That being said, each of Toshiba’s MPEs houses <sup id="bibref:19"><a href="#bib:cpu-venezia" role="doc-biblioref">[19]</a></sup>:</p><ul><li>A proprietary <strong>‘Media-embedded Processor’ (MeP) CPU</strong>. Particularly, a fifth revision called ‘MeP-c5’. This features a 32-bit RISC-based architecture.</li><li><strong>32 KB L1 cache</strong>, split into 16 KB for instructions and 16 KB for data.</li><li><strong>64 KB</strong> of general-purpose memory. This is where the MeP CPU executes its main program.</li><li>A <strong>DMA controller</strong> for transferring between internal and external memory.</li><li>An <strong>‘Image Processing’ co-processor</strong> that executes 64-bit SIMD instructions. It can operate different packs of data, from eight 8-bit integers to two 32-bit ones.</li></ul><p>The cluster also features <strong>256 KB of L2 cache</strong>, but its main selling point is found in its instruction set, which is based on the <strong>Very Long Instruction Word (VLIW) model</strong>. Essentially, a single line can encode multiple instructions at once. In the case of Venezia, three instructions (two for the image coprocessor and one for the CPU) <sup id="bibref:20"><a href="#bib:cpu-berkeley_dsp" role="doc-biblioref">[20]</a></sup>. This requires a very clever compiler capable of packing instructions efficiently, however.</p><p>Interestingly enough, CPU designers once experimented with VLIW implementations back in the 90s when it was thought to be the future of mainstream CPUs. This led to Broadcom’s Firepath, the Transmeta Crusoe and, of course, the Intel Itanium - to name a few. However, the concept didn’t gain traction outside particular uses, as the resulting benchmarks proved disappointing. Thus, interests soon shifted to other parallelism techniques, such as <a href="https://www.copetti.org/writings/consoles/playstation-2/#tab-1-1-outperforming-success">out-of-order execution</a>, which transferred the burden back to the CPU.</p><p>Be as it may, Venezia is only accessible through an abstract API called ‘Codec Engine’ <sup id="bibref:21"><a href="#bib:cpu-venezia" role="doc-biblioref">[21]</a></sup>, which implements different kinds of image and audio encoding/decoding tasks.</p></div><div id="tab-3-2-avc-decoder"><h4 id="tab-3-2-avc-decoder">AVC Decoder</h4><p>Next, we’ve got the <strong>AVC Decoder</strong>. This is a relatively simpler DSP that, as the name indicates, only does one job: decompress video data encoded with ‘Advanced Video Coding’ (AVC) <sup id="bibref:22"><a href="#bib:cpu-onscripter" role="doc-biblioref">[22]</a></sup>.</p><p>The decoder then outputs an uncompressed stream the GPU understands.</p></div></div></div><h3 id="memory-available">Memory available</h3><p>Enough about CPU talk! Let’s now take a look at the memory bundled within the PSVita.</p><p>As it’s customary with portable consoles, there are multiple memory types in this system.</p><h4 id="main-memory">Main memory</h4><p>To start with, at the top of Kermit’s stack, we find a large block that houses <strong>512 MB of LPDDR2 SDRAM</strong> and is used as the main working area. In case you are now wondering “I get the ‘512 MB’ part, but what’s with all those initials?”, you’re not alone.</p><p>There’s a lot of terminology to unpack here, let’s start by breaking down the ‘LPDDR2 SDRAM’ name into two groups, from right to left, and then inspecting what’s inside each:</p><ol><li><strong>SDRAM</strong> means ‘Synchronous Dynamic RAM’.<ul><li>Dynamic RAM (DRAM) is the opposite of ‘Static RAM’ (SRAM). DRAM is cheaper to produce but exhibits more latency. That’s why CPU cache is made of SRAM while external general-purpose memory is made of DRAM.</li><li>Synchronous DRAM (<a href="https://www.copetti.org/writings/consoles/xbox/#memory-layout">SDRAM</a>) means transfers are synchronised on par with the CPU clock, improving its throughput.</li></ul></li><li><strong>LPDDR2</strong> means ‘Low Power Double Data Rate 2’.<ul><li>Double Data Rate (DDR) states that transfers encode twice the information per cycle.</li><li>Low Power (LP) is a novelty here. This is not typical DDR, but a distinct variant called ‘Low Power’. It was initially conceived as a modification of DDR SDRAM, then became its own brand alongside others (as it happened with <a href="https://www.copetti.org/writings/consoles/wiiu/#gddr3-or-ddr3">GDDR</a>). While DDR evolves to increase the bandwidth, new revisions of LP focus on reducing its operating voltage. As you may guess, its main adopters are phones and laptops.</li><li>The ‘2’ at the end signifies it’s the second revision of LPDDR. Its specification was published in 2009 and, among other improvements, it only needs 1.2 Volts to work (compared to 1.35 V for DDR3).</li></ul></li></ol><h4 id="other-memory">Other memory</h4><p>There’s another large block of <strong>128 MB of Cached DRAM (CDRAM)</strong> predominantly connected to the GPU. CDRAM is yet-another type of RAM that combines the traditional (and cheap/slower) DRAM with a bit of SRAM <sup id="bibref:23"><a href="#bib:cpu-mitsu_cdram" role="doc-biblioref">[23]</a></sup>. The latter acts as cache to speed up frequent memory access.</p><p>Last but not least, the SoC also fits <strong>16 KB of SRAM</strong>, but it’s reserved for system functions <sup id="bibref:24"><a href="#bib:cpu-memory" role="doc-biblioref">[24]</a></sup>. You may want to know that it’s the exact amount of SRAM also found in the <a href="https://www.copetti.org/writings/consoles/playstation-portable/#memory-available">PlayStation Portable</a>, you’ll soon see why.</p><h3 id="one-last-cpu">One last CPU</h3><p>Last but not least, there’s an additional CPU inside Kermit: The old <strong><a href="https://www.copetti.org/writings/consoles/playstation-portable/#the-new-portable-cpu">MIPS32 4k</a></strong> (the same one bundled with the <a href="https://www.copetti.org/writings/consoles/playstation-portable/">PlayStation Portable</a>) <sup id="bibref:25"><a href="#bib:cpu-trinity" role="doc-biblioref">[25]</a></sup>. The intention was to provide backwards compatibility with <a href="https://www.copetti.org/writings/consoles/playstation-portable/">PlayStation Portable</a> and <a href="https://www.copetti.org/writings/consoles/playstation/">PlayStation 1</a> games. That’s the one and only (official) use for the MIPS CPU, with no co-processing capability in place.</p><figure><a href="https://www.copetti.org/images/consoles/psp/tachyon.a7c25cb952548e37638dbaf3bf0dc7719c4e7824426d34c915caa5c5115a2677.jpg"><picture><source type="image/webp" srcset="https://www.copetti.org/images/consoles/psp/_huf077cb2897ba78dcb9172cfc220d08f4_68080_ac6e7b5f64a10399c2d13a9361243cfe.webp 500w,
https://www.copetti.org/images/consoles/psp/_huf077cb2897ba78dcb9172cfc220d08f4_68080_3067374a7a3507074b3cac44449032bc.webp 700w"><img alt="Image" width="700" height="594" src="https://www.copetti.org/images/consoles/psp/tachyon.a7c25cb952548e37638dbaf3bf0dc7719c4e7824426d34c915caa5c5115a2677.jpg" loading="lazy"></picture></a><figcaption>The predecessor ‘Tachyon’ chip found on the PSP, housing the MIPS CPU and many other components.</figcaption></figure><p>Speaking of backwards compatibility, Kermit doesn’t include the <a href="https://www.copetti.org/writings/consoles/playstation-portable/#multimedia-cpu">Media Engine</a> <sup id="bibref:26"><a href="#bib:cpu-robots" role="doc-biblioref">[26]</a></sup>, although being a black box means that the software doesn’t care about what’s behind the scenes. Thus, the functions of that co-CPU are replicated through Venezia instead.</p><p>For the remaining I/O, MIPS is not physically connected to the rest of the hardware, only the Cortex-A9 is. Thus, the PSP emulation software (running on the MIPS CPU) requests services to the ARM CPU by following a protocol called ‘Remote Procedure Call’ (RPC) <sup id="bibref:27"><a href="#bib:cpu-trinity" role="doc-biblioref">[27]</a></sup> <sup id="bibref:28"><a href="#bib:cpu-davee_kermit" role="doc-biblioref">[28]</a></sup>.</p><p>Finally, 64 MB of CDRAM are also reserved for this service. Those 16 KB of SRAM are also allocated to the PSP emulator <sup id="bibref:29"><a href="#bib:cpu-memory" role="doc-biblioref">[29]</a></sup>, as original PSP games <a href="https://www.copetti.org/writings/consoles/playstation-portable/#memory-available">would expect to find</a>.</p><hr><h2 id="next-graphics">Next: Graphics</h2><p>That’s it for now! In the next part we’ll take a look at <a href="https://www.copetti.org/writings/consoles/dreamcast/#graphics">VideoLogic</a>’s evolution to become a leading GPU in the mobile market, culminating in their signature PowerVR MBX GPU. <a href="https://www.copetti.org/writings/consoles/#stay-updated">Stay tuned</a> for the next delivery!</p></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Goldman and Apple 'illegally sidestepped' obligations to credit-card customers (237 pts)]]></title>
            <link>https://finance.yahoo.com/news/goldman-and-apple-illegally-sidestepped-obligations-to-credit-card-customers-cfpb-161226158.html</link>
            <guid>41926978</guid>
            <pubDate>Wed, 23 Oct 2024 17:00:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://finance.yahoo.com/news/goldman-and-apple-illegally-sidestepped-obligations-to-credit-card-customers-cfpb-161226158.html">https://finance.yahoo.com/news/goldman-and-apple-illegally-sidestepped-obligations-to-credit-card-customers-cfpb-161226158.html</a>, See on <a href="https://news.ycombinator.com/item?id=41926978">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>    <p><!-- HTML_TAG_START -->Goldman Sachs (<a data-i13n="cpos:1;pos:1" href="https://finance.yahoo.com/quote/GS/" data-ylk="slk:GS;cpos:1;pos:1;elm:context_link;itc:0;sec:content-canvas">GS</a>) and Apple (<a data-i13n="cpos:2;pos:1" href="https://finance.yahoo.com/quote/AAPL/" data-ylk="slk:AAPL;cpos:2;pos:1;elm:context_link;itc:0;sec:content-canvas">AAPL</a>) have to pay $89.8 million for sidestepping legal obligations to their joint credit card customers, the Consumer Financial Protection Bureau (CFPB) <a data-i13n="cpos:3;pos:1" href="https://www.consumerfinance.gov/about-us/newsroom/cfpb-orders-apple-and-goldman-sachs-to-pay-over-89-million-for-apple-card-failures/" rel="nofollow noopener" target="_blank" data-ylk="slk:announced Wednesday.;cpos:3;pos:1;elm:context_link;itc:0;sec:content-canvas">announced Wednesday.</a><!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->The regulator said Apple failed to send tens of thousands of consumer disputes of Apple Card transactions to Goldman Sachs. When Apple did send the disputes, the bank did not follow numerous federal requirements for investigating the disputes, according to a <a data-i13n="cpos:4;pos:1" href="https://www.consumerfinance.gov/about-us/newsroom/cfpb-orders-apple-and-goldman-sachs-to-pay-over-89-million-for-apple-card-failures/" rel="nofollow noopener" target="_blank" data-ylk="slk:press release;cpos:4;pos:1;elm:context_link;itc:0;sec:content-canvas">press release</a> from the regulator.<!-- HTML_TAG_END --></p>  <p><!-- HTML_TAG_START -->Goldman will pay $64.8 million. Of that total, $19.8 million will go back to consumers while the bank will pay the other $45 million in penalties to the regulator. Separately, Apple will pay the CFPB $25 million for its role in marketing and servicing the Apple Card.<!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->"Apple and Goldman Sachs illegally sidestepped their legal obligations for Apple Card borrowers," CFPB Director Rohit Chopra said in a statement, noting that the alleged misconduct affected hundreds of thousands of Apple Card customers.<!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->The CFPB is banning Goldman from launching a new credit card unless it "can demonstrate that it can actually follow the law," Chopra added.<!-- HTML_TAG_END --></p> <figure><div> <p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" alt="U.S. Consumer Financial Protection Bureau (CFPB) Director Rohit Chopra testifies before a Senate Banking, Housing and Urban Affairs Committee hearing on " loading="eager" height="631" width="960"></p></div> <figcaption><!-- HTML_TAG_START -->Consumer Financial Protection Bureau (CFPB) director Rohit Chopra, in 2023. REUTERS/Leah Millis/ File Photo<!-- HTML_TAG_END -->  <span data-svelte-h="svelte-nxhdlu">·</span> <span>Reuters / Reuters</span></figcaption> </figure> <p><!-- HTML_TAG_START -->The regulator also said Apple and Goldman misled many consumers to believe they would automatically get interest-free monthly payments when buying Apple devices. Instead, those same customers were charged interest.<!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->Additionally, CFPB said Goldman misled consumers about the application of some refunds, which led to consumers paying additional interest charges.<!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->"Big Tech companies and big Wall Street firms should not behave as if they are exempt from federal law," Chopra added.<!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->Both the stocks of Apple and Goldman were down slightly Wednesday.<!-- HTML_TAG_END --></p>  <p><!-- HTML_TAG_START -->In striking a card partnership with Apple in 2019, Goldman Sachs extended credit to consumers and handled servicing of their accounts while Apple was in charge of the consumer interface design, marketing and advertising.<!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->As part of the agreement, Apple had the right to impose a $25 million penalty for each 90-day delay caused by Goldman.<!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->The CFPB said its investigation found that Goldman's board of directors learned that critical Apple Card disputes systems were “not fully ready” due to technological issues four days before launch. The companies proceeded anyway.<!-- HTML_TAG_END --></p> <p><!-- HTML_TAG_START -->That prompted millions of dollars in expenses to consumers due to failures within the card program to share and investigate customer disputes, properly convey payment plan details through marketing and refunds through account servicing.<!-- HTML_TAG_END --></p> <figure><div> <p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" alt="CHINA - 2024/04/22: In this photo illustration, a Goldman Sachs logo is displayed on the screen of an iPhone. (Photo Illustration by Sheldon Cooper/SOPA Images/LightRocket via Getty Images)" loading="lazy" height="640" width="960"></p></div> <figcaption><!-- HTML_TAG_START -->In this photo illustration, a Goldman Sachs logo is displayed on the screen of an Apple iPhone. (Photo Illustration by Sheldon Cooper/SOPA Images/LightRocket via Getty Images)<!-- HTML_TAG_END -->  <span data-svelte-h="svelte-nxhdlu">·</span> <span>SOPA Images via Getty Images</span></figcaption> </figure> <p><!-- HTML_TAG_START -->The fine from CFPB comes as Goldman attempts a tricky retreat from its forays into consumer lending.<!-- HTML_TAG_END --></p>       </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Agent.exe, a cross-platform app to let 3.5 Sonnet control your machine (333 pts)]]></title>
            <link>https://github.com/corbt/agent.exe</link>
            <guid>41926770</guid>
            <pubDate>Wed, 23 Oct 2024 16:44:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/corbt/agent.exe">https://github.com/corbt/agent.exe</a>, See on <a href="https://news.ycombinator.com/item?id=41926770">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto">Presenting <strong>Agent.exe</strong>: the easiest way to let Claude's new <a href="https://www.anthropic.com/news/3-5-models-and-computer-use" rel="nofollow">computer use</a> capabilities take over your computer!</p>
<a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/176426/379369283-c11cc8f1-6dcb-48f4-9d18-682f14edb77d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mjk3MDg1MDQsIm5iZiI6MTcyOTcwODIwNCwicGF0aCI6Ii8xNzY0MjYvMzc5MzY5MjgzLWMxMWNjOGYxLTZkY2ItNDhmNC05ZDE4LTY4MmYxNGVkYjc3ZC5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQxMDIzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MTAyM1QxODMwMDRaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1lYjJkODcxOTBkOGUyNTZjMWYxMzkwYzE2MDBkZjQyYjI1YTc3Y2NjMGEwODA5MTUxYjYwMzUzMTVhOGI5NDNhJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.YoZ4sgY3z6RNb7yDTAHWvJpkChd8uvbXM_g0VC8HDIw"><img width="387" alt="buy pizza" src="https://private-user-images.githubusercontent.com/176426/379369283-c11cc8f1-6dcb-48f4-9d18-682f14edb77d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mjk3MDg1MDQsIm5iZiI6MTcyOTcwODIwNCwicGF0aCI6Ii8xNzY0MjYvMzc5MzY5MjgzLWMxMWNjOGYxLTZkY2ItNDhmNC05ZDE4LTY4MmYxNGVkYjc3ZC5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQxMDIzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MTAyM1QxODMwMDRaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1lYjJkODcxOTBkOGUyNTZjMWYxMzkwYzE2MDBkZjQyYjI1YTc3Y2NjMGEwODA5MTUxYjYwMzUzMTVhOGI5NDNhJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.YoZ4sgY3z6RNb7yDTAHWvJpkChd8uvbXM_g0VC8HDIw"></a>
<details open="">
  <summary>
    
    <span aria-label="Video description book-flights.mp4">book-flights.mp4</span>
    <span></span>
  </summary>

  <video src="https://private-user-images.githubusercontent.com/176426/379369832-2a371241-bc43-46d4-896e-256b3adc388d.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mjk3MDg1MDQsIm5iZiI6MTcyOTcwODIwNCwicGF0aCI6Ii8xNzY0MjYvMzc5MzY5ODMyLTJhMzcxMjQxLWJjNDMtNDZkNC04OTZlLTI1NmIzYWRjMzg4ZC5tcDQ_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQxMDIzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MTAyM1QxODMwMDRaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0zZTEzZDVlODAyMWI3MzkyZjk3N2Y0MDc3NDVlNThiYzMzZjBhNzNkODNlNWIwODk1NjE4NDNiNTVjYzI4ZWYzJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.bXuU0zeUlV5znKO7BHAVMKXsIPV8XE4PShIKx3SJesg" data-canonical-src="https://private-user-images.githubusercontent.com/176426/379369832-2a371241-bc43-46d4-896e-256b3adc388d.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mjk3MDg1MDQsIm5iZiI6MTcyOTcwODIwNCwicGF0aCI6Ii8xNzY0MjYvMzc5MzY5ODMyLTJhMzcxMjQxLWJjNDMtNDZkNC04OTZlLTI1NmIzYWRjMzg4ZC5tcDQ_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQxMDIzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MTAyM1QxODMwMDRaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0zZTEzZDVlODAyMWI3MzkyZjk3N2Y0MDc3NDVlNThiYzMzZjBhNzNkODNlNWIwODk1NjE4NDNiNTVjYzI4ZWYzJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.bXuU0zeUlV5znKO7BHAVMKXsIPV8XE4PShIKx3SJesg" controls="controls" muted="muted">

  </video>
</details>

<p dir="auto"><h3 tabindex="-1" dir="auto">Motivation</h3><a id="user-content-motivation" aria-label="Permalink: Motivation" href="#motivation"></a></p>
<p dir="auto">I wanted to see how good Claude's new <a href="https://www.anthropic.com/news/3-5-models-and-computer-use" rel="nofollow">computer use</a> APIs were, and the default project they provided felt too heavyweight. This is a simple Electron app that lets Claude 3.5 Sonnet control your local computer directly. I was planning on adding a "semi-auto" mode where the user has to confirm each action before it executes, but each step is so slow I found that wasn't necessary and if the model is getting confused you can easily just hit the "stop" button to end the run.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Getting started</h3><a id="user-content-getting-started" aria-label="Permalink: Getting started" href="#getting-started"></a></p>
<ol dir="auto">
<li><code>git clone https://github.com/corbt/agent.exe</code></li>
<li><code>cd agent.exe</code></li>
<li><code>npm install</code></li>
<li><code>ANTHROPIC_API_KEY="&lt;your-anthropic-api-key&gt;" npm start</code></li>
<li>Prompt the model to do something interesting on your computer!</li>
</ol>
<p dir="auto"><h3 tabindex="-1" dir="auto">Supported systems</h3><a id="user-content-supported-systems" aria-label="Permalink: Supported systems" href="#supported-systems"></a></p>
<ul dir="auto">
<li>MacOS</li>
<li>Theoretically Windows and Linux since all the deps are cross-platform</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Known limitations</h3><a id="user-content-known-limitations" aria-label="Permalink: Known limitations" href="#known-limitations"></a></p>
<ul dir="auto">
<li>Only works on the primary display</li>
<li>Lets an AI completely take over your computer</li>
<li>Oh jeez, probably lots of other stuff too</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Tips</h3><a id="user-content-tips" aria-label="Permalink: Tips" href="#tips"></a></p>
<ul dir="auto">
<li>Claude <em>really</em> likes Firefox. It will use other browsers if it absolutely has to, but will behave so much better if you just install Firefox and let it go to its happy place.</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Roadmap</h3><a id="user-content-roadmap" aria-label="Permalink: Roadmap" href="#roadmap"></a></p>
<ul dir="auto">
<li>I literally wrote this in 6 hours, probably isn't going anywhere. But I will review PRs and merge them if they seem cool.</li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Paper mills: the 'cartel-like' companies behind fraudulent scientific journals (106 pts)]]></title>
            <link>https://theconversation.com/paper-mills-the-cartel-like-companies-behind-fraudulent-scientific-journals-230124</link>
            <guid>41926515</guid>
            <pubDate>Wed, 23 Oct 2024 16:16:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://theconversation.com/paper-mills-the-cartel-like-companies-behind-fraudulent-scientific-journals-230124">https://theconversation.com/paper-mills-the-cartel-like-companies-behind-fraudulent-scientific-journals-230124</a>, See on <a href="https://news.ycombinator.com/item?id=41926515">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="articleBody">
    <p><a href="https://www.science.org/content/article/paper-mills-bribing-editors-scholarly-journals-science-investigation-finds"><em>Science</em></a> and <a href="https://www.nature.com/articles/d41586-023-03464-x"><em>Nature</em></a>, two leading science journals, have revealed a growing problem: an alarming rise in fraudulent research papers produced by shady <a href="https://blog.mdpi.com/2022/05/09/paper-mills/">paper mill companies</a>. This  wave of fake studies is creating a major headache for the academic world, putting the integrity of global academic research at risk.</p>

<p><a href="https://publicationethics.org/publishers-perspective-paper-mills">Paper mill companies</a> offer authorship services to researchers, academics, and students who want their names listed as an author of a scientific article published in reputable scientific journals.</p>

<p>By paying around <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/leap.1574">€180 to €5000</a> (approximately US$197 - $5472), a person can have their name listed as the author of research paper, without having to painstakingly do research and write the results. No doubt, some experts refer to these paper mills as <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8514363/">illegal and criminal organizations</a>.</p>

<figure>
            <p><img alt="" data-src="https://images.theconversation.com/files/592366/original/file-20240506-16-sxge38.PNG?ixlib=rb-4.1.0&amp;q=45&amp;auto=format&amp;w=754&amp;fit=clip" data-srcset="https://images.theconversation.com/files/592366/original/file-20240506-16-sxge38.PNG?ixlib=rb-4.1.0&amp;q=45&amp;auto=format&amp;w=600&amp;h=890&amp;fit=crop&amp;dpr=1 600w, https://images.theconversation.com/files/592366/original/file-20240506-16-sxge38.PNG?ixlib=rb-4.1.0&amp;q=30&amp;auto=format&amp;w=600&amp;h=890&amp;fit=crop&amp;dpr=2 1200w, https://images.theconversation.com/files/592366/original/file-20240506-16-sxge38.PNG?ixlib=rb-4.1.0&amp;q=15&amp;auto=format&amp;w=600&amp;h=890&amp;fit=crop&amp;dpr=3 1800w, https://images.theconversation.com/files/592366/original/file-20240506-16-sxge38.PNG?ixlib=rb-4.1.0&amp;q=45&amp;auto=format&amp;w=754&amp;h=1118&amp;fit=crop&amp;dpr=1 754w, https://images.theconversation.com/files/592366/original/file-20240506-16-sxge38.PNG?ixlib=rb-4.1.0&amp;q=30&amp;auto=format&amp;w=754&amp;h=1118&amp;fit=crop&amp;dpr=2 1508w, https://images.theconversation.com/files/592366/original/file-20240506-16-sxge38.PNG?ixlib=rb-4.1.0&amp;q=15&amp;auto=format&amp;w=754&amp;h=1118&amp;fit=crop&amp;dpr=3 2262w" sizes="(min-width: 1466px) 754px, (max-width: 599px) 100vw, (min-width: 600px) 600px, 237px"></p>
            <figcaption>
              <span>Paper mill ads. Author provided.</span>
              
            </figcaption>
          </figure>

<p><a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/leap.1574">A 2023 research highlights</a> a dramatic increase in fraudulent scientific artiles traced back to paper mills. In just five years, the numbers of retractions soared <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/leap.1574">jumped</a> from 10 in 2019 to 2,099 in 2023.</p>

<p>Paper mills have also <a href="https://www.nature.com/articles/d41586-024-00159-9">extremely overwhelmed</a> major scientific journal publishers. <a href="https://retractionwatch.com/2023/04/05/wiley-and-hindawi-to-retract-1200-more-papers-for-compromised-peer-review/">Hindawi and Wiley, publishers of open access journals in the UK</a>, for example, retracted around 1,200 paper mill articles in 2023. <a href="https://retractionwatch.com/2021/12/15/journal-retracts-122-papers-at-once/">SAGE, a global publisher of books, journals and academic library resources</a> and <a href="https://retractionwatch.com/2022/10/28/exclusive-elsevier-retracting-500-papers-for-shoddy-peer-review/">Elsevier, a scholarly publisher in the Netherlands</a> also retracted hundreds of paper mill articles in 2022.</p>

<p>Paper mills are found operating in countries whose research policies incentivise researchers to produce as many scientific articles as possible, such as <a href="https://www.nature.com/articles/d41586-021-00733-5">China</a>, <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/leap.1574">Russia</a>, <a href="https://www.theguardian.com/science/2024/feb/03/the-situation-has-become-appalling-fake-scientific-papers-push-research-credibility-to-crisis-point">India</a> and <a href="https://forbetterscience.com/2024/04/02/karimipour-saga-i-setting-boundaries/">Iran</a>.</p>

<p>However, their customer profile is quite diverse, from both developed and developing countries, including <a href="https://majalah.tempo.co/read/nasional/171351/academic-misconduct-guru-besar">Indonesia</a>, <a href="https://cen.acs.org/policy/publishing/Malaysia-wont-pay-researchers-publish/101/i35">Malaysia</a>, <a href="https://forbetterscience.com/2022/12/14/german-authorities-on-papermills-and-whistleblowing/">Germany</a>, and <a href="https://www.congress.gov/117/meeting/house/115022/documents/HHRG-117-SY21-20220720-SD002.pdf">the United States (US)</a>.</p>

<p>Based on research data and investigative journalist reports from the last five years, I summarise how these paper mills operate and how to detect them.</p>

<h2>The paper mill playbook: tactics and oddities</h2>

<p><strong>1. Problematic articles</strong></p>

<p>Paper mills generally manipulate <a href="https://doi.org/10.1007/s10067-022-06198-9">the process of publishing scientific articles</a>. These articles usually <a href="https://pubpeer.com/publications/9759E2D516E7F26C9064ACF2CD3E6D#1">plagiarise other published articles</a>, contain <a href="https://pubpeer.com/publications/C289EF83FBEC1823EACF837A600198#4">false</a> and stolen data, or include engineered and duplicated images.</p>

<p>They also offer <a href="https://pubpeer.com/publications/1DAA212C13697D91953FC9835DEB61">to rewrite scientific articles</a> using generative artificial intelligence tools, such as <a href="https://chatgpt.com/">ChatGPT</a> and <a href="https://quillbot.com/">Quillbot</a>, or to translate published articles from other languages into English.</p>

<p><strong>2. A promised path to publication</strong></p>

<p>In <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9703783/">some cases</a>, paper mills  offer authorship slots before an article is accepted for publication. </p>

<p>In other cases, they offer authorship slots after the article is ready to be published by the journal.</p>

<p>Therefore, it is not uncommon for paper mills to sell authorship slots <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/leap.1574">with a guarantee</a> that the article will definitely be published. In fact, according to the conventions generally accepted in the academic community, no well-run journal can <a href="https://www.editage.com/insights/how-can-i-get-an-acceptance-letter-for-my-paper">give such a guarantee</a>.</p>

<p>Publishing decisions are normally made only after editors have considered the feedback from peer reviewers. This means, there is no possibility for a manuscript to secure acceptance before passing the peer review process.</p>

<p><strong>3. Fake reviews and corrupt deals</strong></p>

<p>Paper mills also <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9703783/">offer a wide range of additional services</a>. For example, they offer <a href="https://www.hindawi.com/journals/ddns/2023/9784576/">fake peer review</a> services to convince potential buyers that the offered articles have passed rigorous review.</p>

<p>To smooth the way for their operations, some paper mills even operate like a cartel, bribing rogue journal editors to ensure publication. <a href="https://www.science.org/content/article/paper-mills-bribing-editors-scholarly-journals-science-investigation-finds">A 2024 investigation by a <em>Science</em> journalist</a> revealed that some scientific journal editors were offered as much as $20,000 to cooperate with these schemes. This investigation resulted in <a href="https://www.science.org/content/article/paper-mills-bribing-editors-scholarly-journals-science-investigation-finds">more than 30 editors of reputable international journals</a> identified as involved in paper mill activities.</p>

<p><strong>4. Unusual collaboration patterns</strong></p>

<p>One of the peculiarities of paper mill articles is its strange mix of authors. <a href="https://www.scielo.br/j/bjb/a/PDxQbGtKWvNw8Y9vdn78TrD/#">An article on the activity of ground beetles attacking crops in Kazakhstan</a>, for example, is written by authors who are neither affiliated with institutions in Kazakhstan nor experts in insects or agriculture. The authors’ backgrounds are suspiciously heterogeneous, ranging from anaesthesia, dentistry, to biomedical engineering.</p>

<p><strong>5. Anonymous co-authors</strong></p>

<p>Prospective customers of paper mill services usually have to agree to the <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/leap.1574">rules of confidentiality</a>. By agreeing to this rule, buyers have no idea which journal their article will target or who their co-authors will be. Often, the authors listed on the same paper don’t even know each other.</p>

<h2>Spotting the red flags: how to detect paper mills articles</h2>

<p>Detecting scientific articles produced by paper mills often begins with analyzing retraction patterns carried out by journals. </p>

<p>This can be done in two ways: by tracking post-publication peer reviews on platforms like <a href="https://pubpeer.com/">PubPeer</a>, or by checking the <a href="http://retractiondatabase.org/RetractionSearch.aspx?">Retraction Watch database</a>, a website that documents retractions of problematic scientific articles.</p>

<p>However, journals rarely state outright that a retraction is due to paper mill fraud. Instead, articles are typically pulled for reasons like <a href="https://www.frontiersin.org/journals/immunology/articles/10.3389/fimmu.2023.1285126/full">improper inclusion of the name and order of authors</a>, <a href="https://www.tandfonline.com/doi/full/10.1080/08927022.2023.2267407">inclusion of many irrelevant citations or references</a>, <a href="https://pubpeer.com/publications/275AA93D2422B4E8B30B74DA0310FE#4">plagiarism</a>, or <a href="https://retractionwatch.com/2017/12/26/one-image-duplicated-eight-papers-yes-eight/">inclusion of manipulated or duplicated images</a>.</p>

<p>The proportion of scientific articles retracted for being associated with paper mills is much smaller than the estimated total number of paper mill articles currently in circulation. </p>

<p>Retraction Watch data, as of May 2024, <a href="http://retractiondatabase.org/RetractionSearch.aspx">only recorded</a> 7,275 retractions of articles related to the <em>paper mill</em> out of a total of 44,000 retractions recorded. In fact, it is estimated that up to <a href="https://www.nature.com/articles/d41586-023-03464-x">400,000 <em>paper mill</em> articles</a> have infiltrated scientific literature over the past two decades. </p>

<p>Despite significant efforts from <a href="https://www.elsevier.com/connect/paper-mills-see-the-wood-for-the-trees-part-3">publishers</a> and the academic community through organizations such as <a href="https://united2act.org/signatories/">United2Act</a>, a <a href="https://united2act.org/about/">global alliance</a> initiated by <a href="https://publicationethics.org/">Committee on Publication Ethics (COPE)</a> and <a href="https://www.stm-assoc.org/">STM</a>, these attempts are barely enough.</p>

<h2>How paper mills hurt the public</h2>

<p>The <a href="https://www.science.org/content/article/paper-mills-bribing-editors-scholarly-journals-science-investigation-finds">UK Research Integrity Office</a>—an independent UK charity that offers support to the public, researchers and organisations to promote good academic research practice—estimates that the paper mill industry has gained around $10 million globally.  </p>

<p>For example, a Russian paper mill could earn <a href="https://www.science.org/content/article/russian-website-peddles-authorships-linked-reputable-journals">$6.5 million</a> if they sold all the authorship of scientific articles it produced from 2019 to 2021. </p>

<p>In Indonesia, this financial loss directly impacts the public. Public universities rely on the state budget, funded largely by taxpayers, and tuition fees from students to cover operational expenses, including research grants and publication incentives. </p>

<p>Though the exact financial toll of these paper mills is hard to pin down, it is clear that the public <a href="https://theconversation.com/pelanggaran-akademis-di-indonesia-masih-marak-merusak-ekosistem-riset-dan-menyalahgunakan-uang-rakyat-224516">are footing the bill</a> for fraudulent research practices, siphoning resources away from enuin academic advancements.</p>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Lawsuit challenges Virginia City's use of cameras for warrantless surveillance (131 pts)]]></title>
            <link>https://ij.org/press-release/federal-lawsuit-challenges-virginia-citys-use-of-over-170-cameras-to-conduct-prolonged-warrantless-surveillance-of-entire-driving-population/</link>
            <guid>41926472</guid>
            <pubDate>Wed, 23 Oct 2024 16:11:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ij.org/press-release/federal-lawsuit-challenges-virginia-citys-use-of-over-170-cameras-to-conduct-prolonged-warrantless-surveillance-of-entire-driving-population/">https://ij.org/press-release/federal-lawsuit-challenges-virginia-citys-use-of-over-170-cameras-to-conduct-prolonged-warrantless-surveillance-of-entire-driving-population/</a>, See on <a href="https://news.ycombinator.com/item?id=41926472">Hacker News</a></p>
Couldn't get https://ij.org/press-release/federal-lawsuit-challenges-virginia-citys-use-of-over-170-cameras-to-conduct-prolonged-warrantless-surveillance-of-entire-driving-population/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: I built a task manager that separates "do" and "due" dates (110 pts)]]></title>
            <link>https://apps.apple.com/us/app/zesfy-planner-calendar/id6479947874</link>
            <guid>41925644</guid>
            <pubDate>Wed, 23 Oct 2024 14:52:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://apps.apple.com/us/app/zesfy-planner-calendar/id6479947874">https://apps.apple.com/us/app/zesfy-planner-calendar/id6479947874</a>, See on <a href="https://news.ycombinator.com/item?id=41925644">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
  <!---->
<!---->
<!---->
<!---->
<!---->
<!---->

  <main>
    <!---->

  

<nav id="localnav" data-sticky="">
  
</nav>

<label id="localnav-curtain" for="localnav-menustate"></label>



<div>
  
<!---->
<!---->
<!---->
    

<!---->
    <section>
      <h2>iPhone Screenshots</h2>
  
</section>


  <div dir="" data-test-bidi=""><p>Zesfy seamlessly integrates all your productivity workflow natively with your calendar. Here’s how:</p><p>Session: Group multiple tasks within a single calendar event.<br>Task Progress: Automatically update your progress as you complete subtasks.<br>Step: Break down tasks into manageable, step-by-step actions.<br>Target: Easily organize tasks by due date.<br>Space: Filter events from specific calendar sets to keep your schedule clutter-free.</p><p>Connect with us:<br>Email: dev@zesfy.com<br>Reddit: r/zesfy</p><p>Our Term of use: https://www.apple.com/legal/internet-services/itunes/dev/stdeula/</p></div>

<!---->
  <section>
    <div>
      <h2>What’s New</h2>
        

    </div>
    <div>
        <div>
            <p><time data-test-we-datetime="" datetime="2024-10-21T00:00:00.000Z" aria-label="October 21, 2024">Oct 21, 2024</time></p><p>Version 1.3.0</p>
          </div>
      <div dir="" data-test-bidi=""><p>We’ve added several exciting features and refreshed the UI to make planning your day even easier. Here’s what’s new:</p><p>- Task Highlights <br>- Plan Tasks <br>- Due Dates <br>- Calendar Groups<br>- Redesign Calendar &amp; Task Views</p><p>Got questions or feedback? We’d love to hear from you! Reach out at: dev@zesfy.com</p></div>
    </div>
  </section>

<!---->
<!---->
<!---->
<!---->
  <section>
  <div>
    <h2>
      App Privacy
    </h2>

    


  </div>

  <p>
    The developer, <span>Satrio Budiarto</span>, indicated that the app’s privacy practices may include handling of data as described below. For more information, see the <a href="https://zesfy.com/privacypolicy.html">developer’s privacy policy</a>.
  </p>

  <div>
        
        <h3>Data Not Collected</h3>
        <p>The developer does not collect any data from this app.</p>
<!---->      </div>

    <p>Privacy practices may vary, for example, based on the features you use or your age. <a href="https://apps.apple.com/story/id1538632801">Learn&nbsp;More</a></p>
</section>


<section>
  <div>
    <h2>Information</h2>
    <dl>
        <p>
          <dt>Seller</dt>
          <dd>
              Satrio Budiarto
          </dd>
        </p>
        <p>
          <dt>Size</dt>
          <dd aria-label="5.8 megabytes">5.8 MB</dd>
        </p>
        <p>
          <dt>Category</dt>
          <dd>
              <a href="https://itunes.apple.com/us/genre/id6007" data-metrics-click="{&quot;actionType&quot;:&quot;navigate&quot;,&quot;actionUrl&quot;:&quot;https://itunes.apple.com/us/genre/id6007&quot;,&quot;targetType&quot;:&quot;link&quot;,&quot;targetId&quot;:&quot;GenrePage&quot;}">
                Productivity
              </a>
          </dd>
        </p>
      <div>
        <dt>Compatibility</dt>
          <dd>
              <dl>
                <dt>
                  iPhone
                </dt>
                <dd>Requires iOS 17.2 or later.
                </dd>
              </dl>
              <dl>
                <dt>
                  Mac
                </dt>
                <dd>Requires macOS&nbsp;14.2 or later and a Mac with Apple&nbsp;M1&nbsp;chip or later.
                </dd>
              </dl>
              <dl>
                <dt>
                  Apple Vision
                </dt>
                <dd>Requires visionOS 1.1 or later.
                </dd>
              </dl>
          </dd>
      </div>
<!---->      
      
<!---->      <p>
        <dt>Copyright</dt>
        <dd>© 2024 Satrio Budiarto</dd>
      </p>
        <p>
          <dt>Price</dt>
          <dd>Free</dd>
        </p>
        <div>
          <dt>In-App Purchases</dt>
          <dd>
            <ol role="table">
              <p>
    
                <li>
                  <span><span>Zesfy Pro - Monthly</span></span>
                  <span>$2.99</span>
                </li>
              
    
                <li>
                  <span><span>Zesfy Pro - Yearly</span></span>
                  <span>$19.99</span>
                </li>
              
<!----></p>

            </ol>
          </dd>
        </div>
      
    </dl>
  </div>
  <div>
    <ul>
        <li>
          <a data-metrics-click="{&quot;actionDetails&quot;:{&quot;type&quot;:&quot;developer&quot;},&quot;actionType&quot;:&quot;navigate&quot;,&quot;actionUrl&quot;:&quot;@@url@@&quot;,&quot;targetType&quot;:&quot;link&quot;}" href="https://zesfy.com/">
            Developer Website
          </a>
        </li>
        <li>
          <a data-metrics-click="{&quot;actionType&quot;:&quot;navigate&quot;,&quot;targetType&quot;:&quot;link&quot;,&quot;targetId&quot;:&quot;LinkToAppSupport&quot;}" href="https://zesfy.com/">
            App Support
          </a>
        </li>
        <li>
          <a data-metrics-click="{&quot;actionType&quot;:&quot;navigate&quot;,&quot;targetType&quot;:&quot;link&quot;,&quot;targetId&quot;:&quot;LinkToPrivacyPolicy&quot;}" href="https://zesfy.com/privacypolicy.html">
            Privacy Policy
          </a>
        </li>
<!----><!---->    </ul>
  </div>
</section>

<section>
  <ul>
      <li>
        <a data-metrics-click="{&quot;actionDetails&quot;:{&quot;type&quot;:&quot;developer&quot;},&quot;actionType&quot;:&quot;navigate&quot;,&quot;actionUrl&quot;:&quot;@@url@@&quot;,&quot;targetType&quot;:&quot;link&quot;}" href="https://zesfy.com/">
          Developer Website
        </a>
      </li>
      <li>
        <a data-metrics-click="{&quot;actionType&quot;:&quot;navigate&quot;,&quot;targetType&quot;:&quot;link&quot;,&quot;targetId&quot;:&quot;LinkToAppSupport&quot;}" href="https://zesfy.com/">
          App Support
        </a>
      </li>
<!---->      <li>
        <a data-metrics-click="{&quot;actionType&quot;:&quot;navigate&quot;,&quot;targetType&quot;:&quot;link&quot;,&quot;targetId&quot;:&quot;LinkToPrivacyPolicy&quot;}" href="https://zesfy.com/privacypolicy.html">
          Privacy Policy
        </a>
      </li>
  </ul>
</section>

<!---->
<!---->
    <section>
      <p>
        <h2>
          More By This Developer
        </h2>
        <!---->
      </p>

      <div>
            
    
            <a href="https://apps.apple.com/us/app/sepnia-calendar-tasks/id1514936395" aria-label="Sepnia: Calendar &amp; Tasks. Productivity." data-metrics-click="{&quot;actionType&quot;:&quot;navigate&quot;,&quot;actionUrl&quot;:&quot;https://apps.apple.com/us/app/sepnia-calendar-tasks/id1514936395&quot;,&quot;targetType&quot;:&quot;card&quot;,&quot;targetId&quot;:&quot;1514936395&quot;}" data-metrics-location="{&quot;locationType&quot;:&quot;shelfDeveloperOtherApps&quot;}">
<!---->        <div>
            <picture dir="ltr" id="ember26879">

        <source srcset="https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/320x0w.webp 320w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/157x0w.webp 157w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/146x0w.webp 146w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/640x0w.webp 640w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/314x0w.webp 314w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/292x0w.webp 292w" sizes="(max-width: 734px) 320px, (min-width: 735px) and (max-width: 1068px) 157px, 146px" type="image/webp">

      <source srcset="https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/320x0w.png 320w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/157x0w.png 157w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/146x0w.png 146w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/640x0w.png 640w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/314x0w.png 314w, https://is1-ssl.mzstatic.com/image/thumb/Purple122/v4/39/1b/94/391b9433-5da9-f40a-5db8-c721899bba96/AppIcon-1-0-1x_U007emarketing-0-5-0-85-220.png/292x0w.png 292w" sizes="(max-width: 734px) 320px, (min-width: 735px) and (max-width: 1068px) 157px, 146px" type="image/png">

      <img src="https://apps.apple.com/assets/artwork/1x1-42817eea7ade52607a760cbee00d1495.gif" decoding="async" loading="lazy" alt="Sepnia: Calendar &amp; Tasks" role="presentation" height="320" width="320">


  
</picture>

          
          
        </div>

    
</a>


        



      </div>
    </section>

    <section>
      <p>
        <h2>
          You Might Also Like
        </h2>
        <!---->
      </p>

      
    </section>


<!---->

<!----></div>



  </main>

    
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[RISC-V is currently slow compared to modern CPUs (104 pts)]]></title>
            <link>https://benhouston3d.com/blog/risc-v-in-2024-is-slow</link>
            <guid>41925511</guid>
            <pubDate>Wed, 23 Oct 2024 14:41:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://benhouston3d.com/blog/risc-v-in-2024-is-slow">https://benhouston3d.com/blog/risc-v-in-2024-is-slow</a>, See on <a href="https://news.ycombinator.com/item?id=41925511">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>After watching the rise of ARM displace Intel from most of my personal and server computing, I've been following the RISC-V architecture with intense interest. It's an exciting open-source ISA that has the potential to reshape the CPU landscape, but there's an important caveat: <strong>RISC-V is currently quite slow compared to modern CPUs in 2024</strong>. It is even slow compared to Raspberry PI boards.</p>
<h2>How Slow is RISC-V?</h2>
<p>You can start with these Geekbench performance scores for various RISC-V processors: <a href="https://browser.geekbench.com/search?q=RISC-V">https://browser.geekbench.com/search?q=RISC-V</a>.</p>
<p>I haven't seen any single threaded scores above 150 and no multi-threaded scores higher than 1500. The best result I've seen is the <a href="https://browser.geekbench.com/v6/cpu/6945146">Sophgo Mango</a>'s score of 147 single threaded and 1300 multi-threaded. And the average score for RISC-V CPUs in Geekbench is around 80 single threaded and 400 multi-threaded.</p>
<p>In comparison, <a href="https://browser.geekbench.com/v6/cpu/8224953">Apple's M4</a> series is seeing scores around 3800 single-threaded and 15000 multi-threaded. A more fair comparison would be the Raspberry Pi series of CPUs, but even then it isn't close. The <a href="https://browser.geekbench.com/v6/cpu/8448431">Raspberry Pi 5</a> scores around 1000 single-threaded and 2200 multi-threaded, while the <a href="https://browser.geekbench.com/v6/cpu/8443919">Raspberry Pi 4</a> scores 300 single-threaded and 739 multi-threaded.</p>
<p>So in that context, the fastest RISC-V CPU I could find is 25x slower than a top-of-the-line Apple M-series chip and ~7x slower than a Raspberry Pi 5 and 2x slower than a Raspberry Pi 4 for single-threaded performance. Those that say that RISC-V is a viable replacement for x86 or ARM in the near term are kidding themselves.</p>
<h2>Why Is RISC-V So Slow?</h2>
<p>RISC-V implementations in the wild lack advanced features that modern CPUs rely on for speed, including sophisticated pipelining mechanisms, out-of-order execution capabilities, advanced branch prediction, and multi-tiered cache hierarchies. Most commercial RISC-V chips remain in-order processors, meaning they execute instructions sequentially rather than optimizing their order for performance. This architectural simplicity creates a fundamental performance ceiling that's difficult to overcome without significant architectural changes.</p>
<h2>RISC-V is Great for Embedded Systems</h2>
<p>But even with slow performance, RISC-V is gaining significant traction in <strong>embedded applications</strong> where <strong>performance isn't the primary concern</strong>. In these contexts, cost and power efficiency are mort important than raw speed. A great example is Espressif's SoC lineup, which has largely moved to RISC-V. They demonstrate that RISC-V is ideal for IoT devices and other embedded systems where low power consumption is critical.</p>
<h2>Current Path to High Performance</h2>
<p>Several initiatives are working to address RISC-V's performance limitations. The <a href="https://github.com/riscv-boom/riscv-boom">Berkeley SonicBOOM</a> project has developed an experimental core featuring out-of-order execution and more advanced architectural features, though it hasn't yet reached mainstream usage. Similarly, <a href="https://tenstorrent.com/">Tenstorrent</a>, a company founded by legendary chip designer <a href="https://en.wikipedia.org/wiki/Jim_Keller_(engineer)">Jim Keller</a> (known for his work on AMD's Zen architecture), is working on high-performance RISC-V processors. While we haven't yet seen these chips in mainstream benchmarks, Tenstorrent's involvement suggests serious effort toward making RISC-V competitive in high-performance computing.</p>
<h2>ARM's Path as a Historical Reference</h2>
<p>ARM's trajectory provides an interesting context for understanding RISC-V's current position. ARM began in low-power embedded systems, initially facing similar performance limitations. Through years of architectural improvements and ecosystem development, ARM gradually expanded into mobile devices, then servers, and now even high-performance desktop systems. Today, ARM's success has contributed to Intel's market plateau, demonstrating how an initially limited architecture can evolve to challenge established players. However, it's important to note that this evolution took decades of sustained development and investment.</p>
<p>Looking at today's landscape, if you're building something that needs raw performance, RISC-V simply isn't ready. While there are promising developments in research labs and startups, the current generation of commercially available RISC-V processors remains significantly behind modern x86 and ARM implementations in terms of raw computational power.</p>
<p><em>Discussed on Hacker News <a href="https://news.ycombinator.com/item?id=41925511">here</a>.</em></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Users say T-Mobile must pay for killing "lifetime" price lock (109 pts)]]></title>
            <link>https://arstechnica.com/tech-policy/2024/10/i-am-still-alive-users-say-t-mobile-must-pay-for-killing-lifetime-price-lock/</link>
            <guid>41924804</guid>
            <pubDate>Wed, 23 Oct 2024 13:20:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arstechnica.com/tech-policy/2024/10/i-am-still-alive-users-say-t-mobile-must-pay-for-killing-lifetime-price-lock/">https://arstechnica.com/tech-policy/2024/10/i-am-still-alive-users-say-t-mobile-must-pay-for-killing-lifetime-price-lock/</a>, See on <a href="https://news.ycombinator.com/item?id=41924804">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main">
            <article data-id="2056988">
  
  <header>
  <div>
    <div>
      <div>
        <p><span>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><defs><clipPath id="section-tech-policy_svg__a"><path fill="none" d="M0 0h40v40H0z"></path></clipPath><clipPath id="section-tech-policy_svg__b"><path fill="none" d="M0 0h40v40H0z"></path></clipPath></defs><g clip-path="url(#section-tech-policy_svg__a)"><path fill="currentColor" d="M12.8 0 6.4 6.4 0 12.8l4 1.4L14.2 4z"></path><g clip-path="url(#section-tech-policy_svg__b)"><path fill="currentColor" d="M34.8 31.7c-4.4-10.4-6.1-23.6-6.1-23.6L15.4 5.4l-9.9 10 2.7 13.3s13.2 1.6 23.6 6.1c-.4 1.4 0 2.9 1.1 4 1.4 1.4 3.6 1.6 5.2.6L18.5 19.8c-1.6 1-3.8.8-5.2-.6-1.6-1.6-1.6-4.3 0-5.9s4.3-1.6 5.9 0c1.4 1.4 1.6 3.6.6 5.2L39.3 38c1-1.6.8-3.8-.6-5.2-1.1-1.1-2.6-1.4-4-1.1"></path></g></g></svg>
  </span>
  <span>
    "Make T-Mobile feel the pain"
  </span>
</p>
      </div>

      

      <p>
        We obtained 900 complaints the FCC received about T-Mobile's infamous price hike.
      </p>

      
    </div>

          <div>
        <p><img width="1000" height="1000" src="https://cdn.arstechnica.net/wp-content/uploads/2024/10/t-mobile-its-alive-1000x1000-1729188463.jpg" alt="A hand holding a T-Mobile phone emerges from the ground in an illustration of a hellish landscape in which zombies appear to be rising from the dead" loading="eager" decoding="async" fetchpriority="high" srcset="https://cdn.arstechnica.net/wp-content/uploads/2024/10/t-mobile-its-alive-1000x1000-1729188463.jpg 1000w, https://cdn.arstechnica.net/wp-content/uploads/2024/10/t-mobile-its-alive-150x150-1729188462.jpg 150w, https://cdn.arstechnica.net/wp-content/uploads/2024/10/t-mobile-its-alive-500x500-1729188462.jpg 500w" sizes="(max-width: 1000px) 100vw, 1000px">
        </p>
        <div>
    
    <p><span>
          Credit:

          
          Aurich Lawson | Getty Images

                  </span>
          </p>
  </div>
      </div>
      </div>
</header>

  

  
      
    
    <div>
                      
                      
          
<p>T-Mobile promised users who bought certain mobile plans that it would never raise their prices for as long as they lived—but then <a href="https://arstechnica.com/tech-policy/2024/05/t-mobile-imposes-5-monthly-price-hike-on-customers-using-older-plans/">raised their prices</a> this year. So it's no surprise that 2,000 T-Mobile customers complained to the government about a price hike on plans that were advertised as having a lifetime price lock.</p>
<p>"I am still alive and T-Mobile is increasing the price for service by $5 per line. How is this a lifetime price lock?" one customer in Connecticut asked the Federal Communications Commission in a complaint that we obtained through a public records request.</p>
<p>"I am not dead yet," a customer in New York wrote bluntly, saying they had bought a plan with a "guarantee for life."</p>
<p>Both of those customers said they purchased T-Mobile's senior plan marketed to people aged 55 and up. While the price hikes apply to customers on various plans regardless of their age, many of the complaints to the FCC came from people in the 55+ age group. Some pointed out that if T-Mobile simply waits long enough, the carrier won't have to serve 55-and-up customers forever.</p>
<p>"What happened to my price lock GUARANTEE?" a Massachusetts resident wrote. "You can charge more to new customers, but do not change the terms of our contract!! Eventually we will age out..." A California resident on the 55+ plan, who reported being a T-Mobile customer for over 18 years, wrote, "We want that rate back for the remainder of our lives."</p>
<p>Many customers have two or more lines. Some people complaining to the FCC even reported having 8, 9, or 10 lines, all of which get the price increase. "I got a text message stating my monthly rate will increase $5 per line, that is [a] $50 increase because I have 10 lines," a New York resident wrote.</p>

          
                      
                  </div>
                    
        
          
    
    <div>
          
          
<p>A Pennsylvania resident told the FCC that T-Mobile "straight up lied to millions of people." A North Carolina resident wrote, "This is not the deal we signed up for and to change our price after guaranteeing it would be locked for life is fraudulent and a direct breach of contract."</p>
<h2>FCC says it got over 2,000 complaints</h2>
<p>An FCC spokesperson told Ars on September 28 that the agency had "received over 2,000 complaints" about the T-Mobile price hikes of $2 to $5 per line. The agency declined to comment on whether it is conducting a formal investigation.</p>
<p>"If this is allowed to stand, then words have no meaning, businesses are able to lie directly and blatantly to the American people, and the FCC is apparently unable to protect the citizen[s] of this county from the unethical practices of business[es] they are charged with regulating," an Indiana resident told the FCC.</p>
<p>A Texas resident who said they used to work in T-Mobile customer service said in a complaint that the "company's attempt to backtrack on their promises through obscure caveats in FAQs should not be allowed to stand. As a former employee and long-time customer, I feel deeply betrayed by T-Mobile's conduct and strongly advocate for regulatory intervention to protect consumers."</p>
<p>The FCC complaints started right after T-Mobile, which has <a href="https://arstechnica.com/tech-policy/2024/10/t-mobile-att-oppose-unlocking-rule-claim-locked-phones-are-good-for-users/">said</a> it is "passionate about winning customers for life," announced the rate increase in late May. We sent a Freedom of Information Act request to the FCC on June 24, seeking all of the complaints.</p>
<p>The FOIA process often takes months, and the results, which are based on searches for keywords identified in the records request, can be unpredictable. But in the end, we received over 900 of the roughly 2,000 complaints filed to the FCC, with names redacted. You can <a href="https://cdn.arstechnica.net/wp-content/uploads/2024/10/T-Mobile-complaints-to-FCC.pdf">read all of them here</a>, and we will quote more of them in this article.</p>

          
                  </div>
                    
        
          
    
    <div>
          
          
<p>We also obtained <a href="https://cdn.arstechnica.net/wp-content/uploads/2024/10/T-Mobile-FTC-complaints.xlsx">about 60</a> complaints regarding T-Mobile's price hike to the Federal Trade Commission, which enforces laws against deceiving consumers. The FTC declined to comment on any potential investigation.</p>

<h2>US agencies could take action</h2>
<p>The FCC and FTC have both punished T-Mobile for other kinds of violations, so it's possible that the agencies could intervene. Earlier in 2024, the FCC fined T-Mobile <a href="https://arstechnica.com/tech-policy/2024/10/t-mobile-pays-16-million-fine-for-three-years-worth-of-data-breaches/">for data breaches</a> and for <a href="https://arstechnica.com/tech-policy/2024/04/fcc-fines-big-three-carriers-196m-for-selling-users-real-time-location-data/">selling users' real-time location data</a>. In 2014, T-Mobile <a href="https://www.ftc.gov/news-events/news/press-releases/2014/12/t-mobile-pay-least-90-million-including-full-consumer-refunds-settle-ftc-mobile-cramming-case">agreed to pay at least $90 million</a> to settle an FTC lawsuit over unwanted third-party charges as part of a deal that included <a href="https://www.ftc.gov/news-events/news/press-releases/2017/02/ftc-returns-nearly-20-million-additional-refunds-t-mobile-customers">refunds to customers</a>.</p>
<p>State attorneys general could also take action. Nearly every US state was involved in a lawsuit that alleged the big three carriers falsely advertised wireless plans as "unlimited" and phones as "free." The carriers settled the lawsuit this year, with T-Mobile <a href="https://arstechnica.com/tech-policy/2024/05/big-three-carriers-pay-10m-to-settle-claims-of-false-unlimited-advertising/">agreeing to pay</a> $4.1 million. (Verizon also agreed to pay $4.1 million, while AT&amp;T agreed to pay a little over $2 million.)</p>
<p>If the government doesn't take action, there's at least one other potential avenue of recourse. A <a href="https://storage.courtlistener.com/recap/gov.uscourts.njd.551616/gov.uscourts.njd.551616.1.0.pdf">class-action lawsuit</a> filed against T-Mobile in July <a href="https://arstechnica.com/tech-policy/2024/07/lawsuit-t-mobile-must-pay-for-breaking-lifetime-price-guarantee/">is seeking</a> "restitution of all amounts obtained by Defendant as a result of its violation," plus interest, along with statutory and punitive damages.</p>
<p>The class action in US District Court for the District of New Jersey seeks to represent T-Mobile users nationwide and was filed on behalf of plaintiffs by law firm <a href="https://nagelrice.com/">Nagel Rice</a>. T-Mobile is <a href="https://storage.courtlistener.com/recap/gov.uscourts.njd.551616/gov.uscourts.njd.551616.11.1.pdf">asking the court</a> to force the lead plaintiff into arbitration and dismiss the claims of other plaintiffs because they don't live in New Jersey.</p>
<h2>“T-Mobile will never change the price you pay”</h2>
<p>We explained in <a href="https://arstechnica.com/tech-policy/2024/06/t-mobile-users-thought-they-had-a-lifetime-price-lock-guess-what-happened-next/">previous coverage</a> that in January 2017, T-Mobile brought its "Un-contract" promise to T-Mobile One plans. "Now, T-Mobile One customers keep their price until THEY decide to change it. T-Mobile will never change the price you pay for your T-Mobile One plan," the company said in a pledge that enticed many people to switch plans or even switch from another carrier to T-Mobile.</p>

          
                  </div>
                    
        
          
    
    <div>
          
          
<p>In a separate FAQ, T-Mobile revealed a caveat that essentially nullified the price-lock promise. The FAQ described the Un-contract as "our commitment that only you can change what you pay and we mean it! To show just how serious we are, we have committed to pay your final month's recurring service charges if we were to raise prices and you choose to leave. Just let us know within 60 days." That big caveat wasn't mentioned in the primary announcement.</p>
<figure>
    <div>
              <p><a data-pswp-width="1440" data-pswp-height="999" data-pswp-srcset="https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-300x208.jpg 300w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-640x444.jpg 640w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-768x533.jpg 768w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-1536x1065.jpg 1536w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-2048x1420.jpg 2048w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-980x680.jpg 980w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-1440x999.jpg 1440w" data-cropped="true" href="https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-1440x999.jpg" target="_blank">
                <img decoding="async" width="2500" height="1734" src="https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere.jpg" alt="Then-CEO of T-Mobile John Legere speaking at an event, wearing a sports jacket and T-Mobile t-shirt." srcset="https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere.jpg 2500w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-300x208.jpg 300w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-640x444.jpg 640w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-768x533.jpg 768w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-1536x1065.jpg 1536w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-2048x1420.jpg 2048w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-980x680.jpg 980w, https://cdn.arstechnica.net/wp-content/uploads/2024/07/john-legere-1440x999.jpg 1440w" sizes="(max-width: 2500px) 100vw, 2500px">
              </a></p><div id="caption-2038980"><p>
                John Legere, then-CEO of T-Mobile, at an event on March 26, 2013, in New York City. 
                                  </p><p>
                    Credit:
                                          Getty Images | John Moore 
                                      </p>
                              </div>
            </div>
                  <figcaption>
          <div>
    
    <p>
      John Legere, then-CEO of T-Mobile, at an event on March 26, 2013, in New York City. 

              <span>
          Credit:

          
          Getty Images | John Moore 

                  </span>
          </p>
  </div>
        </figcaption>
            </figure>

<p>The Un-contract was introduced for other plans in 2015, and marketing of the supposedly price-locked plans went on for years. "We're the Un-carrier. Everything the carriers do, we un-do," T-Mobile's then-CEO John Legere <a href="https://www.t-mobile.com/news/press/uncontract-carrier-freedom">said in March 2015</a>. "The other guys have been throwing out all kinds of desperate, short-term promotions to suck you in and lock you down—only to jack up rates later. We're not playing that game. The Un-contract is our promise to individuals, families and businesses of all sizes, that—while your price may go down—it won't go up."</p>
<p>T-Mobile discontinued the Un-contract in 2022 but makes the <a href="https://www.t-mobile.com/cell-phone-plans/price-lock-faqs">same pledge</a> about currently offered plans with what it calls "Price Lock." Just like the Un-contract, T-Mobile's Price Lock only gives customers the right to cancel and get a refund for one month if the price rises.</p>
<p>Last year, T-Mobile <a href="https://arstechnica.com/tech-policy/2023/10/t-mobile-switches-users-to-pricier-plans-and-tells-them-its-not-a-price-hike/">notified some customers</a> that it would automatically switch them to newer, more expensive plans unless the customers called the company to opt out of the change. T-Mobile customer service reps were instructed to tell users, "We are not raising the price of any of our plans; we are moving you to a newer plan with more benefits at a different cost."</p>
<p>T-Mobile <a href="https://arstechnica.com/tech-policy/2023/10/after-uproar-t-mobile-wont-automatically-switch-users-to-pricier-plans/">backtracked on that unpopular 2023 move</a> within weeks but has stood firm on this year's price hike on price-locked plans. T-Mobile did not respond to a request for comment.</p>

          
                  </div>
                    
        
          
    
    <div>
          
          

<h2>T-Mobile answered complaints with form letter</h2>
<p>The FCC complaint process can be exasperating. T-Mobile has responded to complaints with a <a href="https://cdn.arstechnica.net/wp-content/uploads/2024/06/T-Mobile-response.pdf">form letter</a> explaining the limits of the price guarantee, in which it claims there was never a promise to never raise prices.</p>
<p>"With <em>Un-contract</em>, T-Mobile committed to its customers that if we were to increase prices and customers chose to leave as a result, T-Mobile would pay the customers' final month's recurring service charge, as long as we are notified within 60 days... Customers simply need to request reimbursement within 60 days of the price increase," the letter said.</p>
<p>Customers aren't buying that explanation. Some of the FCC complaints quoted Legere's promise and other statements in which T-Mobile made what seemed to be a clear guarantee that prices would never be raised.</p>
<p>"I am under the T-Mobile One Plan which was marketed to me as a guaranteed rate lock plan," a New Jersey resident told the FCC. "I just received information that my plan would increase by $25 per month ($5 per line x 5 lines). How can this price increase happen if the plan was guaranteed and 'price locked'? This is marketing deception at the highest level and a flat out lie to consumers. Please help!"</p>
<p>"They are reeling in customers like me with a promise to never raise the monthly rate, but then they... raise my rate? If this is not fraud, I don't know what is," a Wyoming resident wrote.</p>
<p>Another person complained about T-Mobile not honoring the final-bill promise. The complainant, a Kansas resident, said they had eight lines that were all getting $5 price increases. There is "not enough wireless provider competition for me to switch" and "even if I switch, they refuse to pay the final bill," the FCC complaint said.</p>

          
                  </div>
                    
        
          
    
    <div>
          
          
<h2>Customer: T-Mobile response “factually incorrect”</h2>
<p>We heard recently from T-Mobile customer John Bradshaw, who lives in Maryland. After getting T-Mobile's response to his complaint, he wrote to the FCC that "T-Mobile has not addressed my specific issue in the complaint but rather submitted a general letter of explanation that is factually incorrect."</p>
<p>Bradshaw's email to the FCC on October 2, which he shared with Ars, points to terms of conditions that were <a href="https://www.t-mobile.com/responsibility/legal/terms-and-conditions-aug-2018">active when he signed up in February 2019</a>. He quoted a section that said, "If you are on a price-lock guaranteed Rate Plan, we will not increase your monthly recurring Service charge ('Recurring Charge') for the period that applies to your Rate Plan, or, if no specific period applies, for as long as you continuously remain a customer in good standing on a qualifying Rate Plan."</p>
<p>Contrary to T-Mobile's response, "there is nothing in the Ts &amp; Cs stating that T-Mobile could increase prices, and if I chose to leave, they would pay the final month's service charge," Bradshaw told the FCC. "We remain in good standing (we use their auto-pay service) and have remained on our original plan since we first signed up with T-Mobile. Therefore, T-Mobile cannot raise our prices nor can they terminate our service and pay our final month."</p>
<p>Bradshaw, who has a T-Mobile One business plan, said he has called T-Mobile each month and convinced an agent to credit his account for the amount of the price increase. This has allowed him to pay the previous price of $215 instead of $232 on his four-line plan, he told Ars.</p>
<p>"I've had to call T-Mobile each billing cycle to have them credit my account for the difference (which after time and escalation to a supervisor they have done) and intend to stand firm that I will not pay the increase nor will I terminate service and accept their final month payment as 'settlement,'" he told us.</p>

          
                  </div>
                    
        
          
    
    <div>
          
          

<h2>Customers blast T-Mobile/Sprint merger</h2>
<p>Numerous FCC complaints said T-Mobile's behavior was enabled by its <a href="https://arstechnica.com/information-technology/2020/04/t-mobile-completes-sprint-merger-john-legere-leaves-ceo-job-a-month-early/">2020 acquisition of Sprint</a>, a merger that was approved by the FCC and other regulators. "This is what happens when the government lets companies swallow the completion (the latest being Sprint). We have antitrust laws in the country that are being ignored and ultimately the consumer loses," a New York resident told the FCC.</p>
<p>A California resident wrote that T-Mobile is guilty of false advertising and that the price hike shows "why Sprint never should have been allowed to merge with T-Mobile." The person asked the FCC to "re-investigate the merger and require one or more of the current mobile telecom corporate behemoths to split up."</p>
<p>A Texas resident wrote, "This is what happens when mergers are not blocked; T-Mobile never should have been allowed to acquire Sprint. Now, they have no lower-price competitors... T-Mobile lied out of pure greed, and false advertising cannot be allowed to go uncorrected."</p>
<p>Many complaints described how the users contacted T-Mobile customer service after receiving notification of the price increase. An Ohio resident who signed up for the 55+ plan in 2020 wrote, "When I spoke with a customer service rep, I was told that the price lock was a special program that began in 2022 and was time-limited. This is obviously bull puckey, but the company seems quite satisfied with its revisionist history."</p>
<p>A California resident who reported getting a $20 price increase ($5 over four lines) wrote, "I talked to T-Mobile and they said it's because my plan is a 'retired' plan, which makes no sense. All that means is that I am not on of their more expensive plans. The T-Mobile buyout of Sprint has created a monopoly in the market and they are taking advantage of customers by raising prices, knowing customers have fewer choices."</p>

          
                  </div>
                    
        
          
    
    <div>
          
          
<p>A Colorado resident wrote, "I called customer service and was told by a rep and the rep's supervisor that they made such a promise, but their board and CEO have decided to no longer honor the promise. I told them this is fraudulent."</p>
<p>An Idaho resident told the FCC, "I spoke to T-Mobile and they recognized that these price lock promises do exist and were advertised to customers but that T-Mobile is increasing rates anyway, with the justification of 'we have raised rates less than other carriers.'"</p>
<h2>Users feel trapped by device payment plans</h2>
<p>Some customers feel locked into T-Mobile because they agreed to device installment plans. A T-Mobile <a href="https://www.t-mobile.com/support/account/cancel-service#:~:text=If%20there%20is%20an%20active,full%20on%20your%20final%20bill.">support page</a> says that if a customer closes an account, the entire device installment plan "will be charged in full on your final bill."</p>
<p>"I was told that we had T-Mobile's Price Lock Guarantee and now I'm being told that my price will go up by $5 per line for a total of $35/mo. for the exact same service I'm currently getting," a Utah resident told the FCC. "This is dishonest and deceptive marketing and should not be allowed. I can't even switch carriers because I have device installment plans and T-Mobile will require me to pay off the phones before leaving."</p>
<p>A Utah resident wrote, "My husband is a Disabled Veteran. I am his caregiver. We live on an incredibly fixed income. We signed up for the Magenta Military plan years ago. I would love to switch to a different provider, but we just bought phones with T-Mobile in November on an EIP [Equipment Installment Plan] promo for 24 months. We feel trapped and discouraged."</p>
<p>T-Mobile's explanation that it's raising rates because the company's costs have risen hasn't appeased customers. "I am in my late 70s and my Social Security already doesn't come close to covering my monthly expenses, let alone the continual price increases on all fronts. Is there any recourse with T-Mobile?" a New Mexico resident wrote.</p>

          
                  </div>
                    
        
          
    
    <div>
          
          

<h2>“Immoral, deceitful, and illegal”</h2>
<p>A South Carolina resident urged the FCC to rule that the price guarantee is "an irrevocable contract from which they cannot remove themselves, nor can they breach that contract by changing my plan at all."</p>
<p>"I called reps at T-Mobile and they confirmed that the 'forever prices' that they promised us was, in fact, untrue," the customer's complaint said. "One representative actually said that the price lock promise was true at the time, but now they find it necessary to raise the price!"</p>
<p>Some customers who complained about the price hike are also mad about a previous decision to <a href="https://www.t-mobile.com/support/account/autopay">require</a> a debit card or linked bank account to set up automatic payments and receive the company's AutoPay discount. The requirement is worrying to users in light of T-Mobile's <a href="https://arstechnica.com/tech-policy/2024/10/t-mobile-pays-16-million-fine-for-three-years-worth-of-data-breaches/">history of data breaches</a>.</p>
<p>"I signed up with T-Mobile based on their advertisement that they would never raise rates on my plan. Now they have raised rates twice—once charging me if I don't leave a debit card on file and once again simply just raising my bill by $10. I don't appreciate their false advertising," a Colorado resident told the FCC.</p>
<p>One North Carolina resident stated that T-Mobile will "get a little more from the millions of customers (that will add up to big profits) and deal with the few complaints and loss of customer base. In the end, what they will profit will outweigh the loss. So sad—and immoral, deceitful, and illegal."</p>
<h2>No relief for people we interviewed in June</h2>
<p>In a <a href="https://arstechnica.com/tech-policy/2024/06/t-mobile-users-enraged-as-un-carrier-breaks-promise-to-never-raise-prices/">June 27 article</a>, we detailed the experiences of three T-Mobile customers who contacted Ars and filed complaints with the FCC and other regulators. We reached out to them again before writing this article.</p>

          
                  </div>
                    
        
          
    
    <div>

        
        <div>
          
          
<p>One of them, Rhode Island resident Kathleen Odean, told us that she had several recent conversations with a T-Mobile employee who "seems to have been appointed to contact people who filed complaints with the FCC and/or their state attorney general. During our contacts, her argument kept changing and finally settled on telling me that the press release [announcing the Un-contract deal in 2017] was essentially a broad overview and not to be taken literally."</p>
<p>In 2017, Odean and her husband switched from Verizon to get the T-Mobile price-lock deal that cost a total of $60 a month for two lines. Odean said they are still on the same plan but added, "I will look around at other options once I have the energy and accept that they won't keep their promise."</p>
<p>Another customer we spoke to for the previous article, Georgia resident Michael Moody, had switched his business and family accounts from T-Mobile to Verizon upon learning of the price hikes. Moody tried to get T-Mobile to cover his final month's bill, but the carrier told him that he didn't act fast enough. An email from T-Mobile to Moody said the carrier wouldn't pay the final bill because "notification of cancellation from your end came after the cancellation had already been processed."</p>
<p>Moody told us recently that T-Mobile never changed its stance and has "continue[d] to deny and deflect, including in their response to the BBB." On the plus side, Moody is satisfied with his new carrier.</p>
<p>"I'm very glad I switched to Verizon. Their customer service has been far more responsive, and they uphold their commitments, unlike T-Mobile," Moody told us.</p>
<h2>Customer’s goal: “Make T-Mobile feel the pain”</h2>
<p>We also previously talked to T-Mobile customer John Schlatter in South Carolina, who filed complaints with the FCC and FTC. He told us on September 23 that he hasn't received any further follow-up from T-Mobile and isn't going to change carriers "because of the hassle involved."</p>
<p>"I figure if the [class-action] suit is successful, I'll get some communication about a settlement," Schlatter said. "I'm not interested in money, although it would be nice if they're forced to roll back the price increase. My goal has always been to make T-Mobile feel the pain for their shady actions."</p>
<p>Although T-Mobile hasn't reversed the price hike yet, Schlatter said the many complaints to federal regulators and the class-action lawsuit should inflict "a good bit of pain."</p>


          
                  </div>

                  
          <div>
  <div>
          <p><a href="https://arstechnica.com/author/jon-brodkin/"><img src="https://arstechnica.com/wp-content/uploads/2016/05/j.brodkin-11_2.jpg" alt="Photo of Jon Brodkin"></a></p>
  </div>

  <div>
    

    <p>
      Jon is a Senior IT Reporter for Ars Technica. He covers the telecom industry, Federal Communications Commission rulemakings, broadband consumer affairs, court cases, and government regulation of the tech industry.
    </p>
  </div>
</div>


  


  


  
              </div>
  </article>


<div>
    <header>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 26"><defs><clipPath id="most-read_svg__a"><path fill="none" d="M0 0h40v26H0z"></path></clipPath><clipPath id="most-read_svg__b"><path fill="none" d="M0 0h40v26H0z"></path></clipPath></defs><g clip-path="url(#most-read_svg__a)"><g fill="none" clip-path="url(#most-read_svg__b)"><path fill="currentColor" d="M20 2h.8q1.5 0 3 .6c.6.2 1.1.4 1.7.6 1.3.5 2.6 1.3 3.9 2.1.6.4 1.2.8 1.8 1.3 2.9 2.3 5.1 4.9 6.3 6.4-1.1 1.5-3.4 4-6.3 6.4-.6.5-1.2.9-1.8 1.3q-1.95 1.35-3.9 2.1c-.6.2-1.1.4-1.7.6q-1.5.45-3 .6h-1.6q-1.5 0-3-.6c-.6-.2-1.1-.4-1.7-.6-1.3-.5-2.6-1.3-3.9-2.1-.6-.4-1.2-.8-1.8-1.3-2.9-2.3-5.1-4.9-6.3-6.4 1.1-1.5 3.4-4 6.3-6.4.6-.5 1.2-.9 1.8-1.3q1.95-1.35 3.9-2.1c.6-.2 1.1-.4 1.7-.6q1.5-.45 3-.6zm0-2h-1c-1.2 0-2.3.3-3.4.6-.6.2-1.3.4-1.9.7-1.5.6-2.9 1.4-4.3 2.3-.7.5-1.3.9-1.9 1.4C2.9 8.7 0 13 0 13s2.9 4.3 7.5 7.9c.6.5 1.3 1 1.9 1.4 1.3.9 2.7 1.7 4.3 2.3.6.3 1.3.5 1.9.7 1.1.3 2.3.6 3.4.6h2c1.2 0 2.3-.3 3.4-.6.6-.2 1.3-.4 1.9-.7 1.5-.6 2.9-1.4 4.3-2.3.7-.5 1.3-.9 1.9-1.4C37.1 17.3 40 13 40 13s-2.9-4.3-7.5-7.9c-.6-.5-1.3-1-1.9-1.4-1.3-.9-2.8-1.7-4.3-2.3-.6-.3-1.3-.5-1.9-.7C23.3.4 22.1.1 21 .1h-1"></path><path fill="#ff4e00" d="M20 5c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8m0 11c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3"></path></g></g></svg>
      
    </header>
    <ol>
              <li>
                      <img src="https://cdn.arstechnica.net/wp-content/uploads/2024/10/t-mobile-its-alive-768x432-1729188629.jpg" alt="Listing image for first story in Most Read: “I am still alive”: Users say T-Mobile must pay for killing “lifetime” price lock" decoding="async" loading="lazy">
                    
        </li>
                    <li>
                    
        </li>
                    <li>
                    
        </li>
                    <li>
                    
        </li>
                    <li>
                    
        </li>
                  </ol>
</div>


  

  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The global surveillance free-for-all in mobile ad data (224 pts)]]></title>
            <link>https://krebsonsecurity.com/2024/10/the-global-surveillance-free-for-all-in-mobile-ad-data/</link>
            <guid>41923931</guid>
            <pubDate>Wed, 23 Oct 2024 11:39:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://krebsonsecurity.com/2024/10/the-global-surveillance-free-for-all-in-mobile-ad-data/">https://krebsonsecurity.com/2024/10/the-global-surveillance-free-for-all-in-mobile-ad-data/</a>, See on <a href="https://news.ycombinator.com/item?id=41923931">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
												<p>Not long ago, the ability to digitally track someone’s daily movements just by knowing their home address, employer, or place of worship was considered a dangerous power that should remain only within the purview of nation states. But a new lawsuit in a likely constitutional battle over a New Jersey privacy law shows that anyone can now access this capability, thanks to a proliferation of commercial services that hoover up the digital exhaust emitted by widely-used mobile apps and websites.</p>
<div id="attachment_69282"><p><img aria-describedby="caption-attachment-69282" decoding="async" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/peoplephone.png" alt="" width="748" height="756" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/10/peoplephone.png 893w, https://krebsonsecurity.com/wp-content/uploads/2024/10/peoplephone-768x776.png 768w, https://krebsonsecurity.com/wp-content/uploads/2024/10/peoplephone-782x790.png 782w" sizes="(max-width: 748px) 100vw, 748px"></p><p id="caption-attachment-69282">Image: Shutterstock, Arthimides.</p></div>
<p>Delaware-based<strong> Atlas Data Privacy Corp.</strong> helps its users remove their personal information from the clutches of consumer data brokers, and from <a href="https://krebsonsecurity.com/?s=people+search" target="_blank" rel="noopener">people-search services online</a>. Backed by millions of dollars in litigation financing, Atlas so far this year has sued 151 consumer data brokers on behalf of a class that includes more than 20,000 New Jersey law enforcement officers who are signed up for Atlas services.</p>
<p>Atlas alleges all of these data brokers have ignored repeated warnings that they are violating <strong>Daniel’s Law</strong>, a New Jersey statute allowing law enforcement, government personnel, judges and their families to have their information completely removed from commercial data brokers. Daniel’s Law was passed in 2020 after the death of 20-year-old <strong>Daniel Anderl</strong>, who was killed in a violent attack targeting a federal judge — his mother.</p>
<p>Last week, Atlas invoked Daniel’s Law in <a href="https://krebsonsecurity.com/wp-content/uploads/2024/10/2024.10.18_Babel_Street_Compl_w_Summons-Case_Info_-_4874-8628-4017_-_1__1_.pdf" target="_blank" rel="noopener">a lawsuit</a> (PDF) against <strong>Babel Street</strong>, a little-known technology company incorporated in Reston, Va. Babel Street’s core product allows customers to draw a digital polygon around nearly any location on a map of the world, and view a slightly dated (by a few days) time-lapse history of the mobile devices seen coming in and out of the specified area.</p>
<p>Babel Street’s <strong>LocateX</strong> platform also allows customers to track individual mobile users by their <strong>Mobile Advertising ID</strong> or <strong>MAID</strong>, a unique, alphanumeric identifier built into all Google Android and Apple mobile devices.</p>
<p>Babel Street can offer this tracking capability by consuming location data and other identifying information that is collected by many websites and broadcast to dozens and sometimes hundreds of ad networks that may wish to bid on showing their ad to a particular user.</p>
<div id="attachment_69280"><p><img aria-describedby="caption-attachment-69280" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/mosque.jpeg" alt="" width="1448" height="990" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/10/mosque.jpeg 1448w, https://krebsonsecurity.com/wp-content/uploads/2024/10/mosque-768x525.jpeg 768w, https://krebsonsecurity.com/wp-content/uploads/2024/10/mosque-782x535.jpeg 782w" sizes="(max-width: 1448px) 100vw, 1448px"></p><p id="caption-attachment-69280">This image, taken from a video recording Atlas made of its private investigator using Babel Street to show all of the unique mobile IDs seen over time at a mosque in Dearborn, Michigan. Each red dot represents one mobile device.</p></div>
<p>In an interview, Atlas said a private investigator they hired was offered a free trial of Babel Street, which the investigator was able to use to determine the home address and daily movements of mobile devices belonging to multiple New Jersey police officers whose families have already faced significant harassment and death threats.</p>
<p>Atlas said the investigator encountered Babel Street while testing hundreds of data broker tools and services to see if personal information on its users was being sold. They soon discovered Babel Street also bundles people-search services with its platform, to make it easier for customers to zero in on a specific device.</p>
<p>The investigator contacted Babel Street about possibly buying home addresses in certain areas of New Jersey. After listening to a sales pitch for Babel Street and expressing interest, the investigator was told Babel Street only offers their service to the government or to “contractors of the government.”</p>
<p>“The investigator (truthfully) mentioned that he was contemplating some government contract work in the future and was told by the Babel Street salesperson that ‘that’s good enough’ and that ‘they don’t actually check,’” Atlas shared in an email with reporters.</p>
<p>KrebsOnSecurity was one of five media outlets invited to review screen recordings that Atlas made while its investigator used a two-week trial version of Babel Street’s LocateX service. References and links to reporting by other publications, including <a href="https://www.404media.co/inside-the-u-s-government-bought-tool-that-can-track-phones-at-abortion-clinics/" target="_blank" rel="noopener"><strong>404 Media</strong></a>, <a href="https://www.haaretz.co.il/news/security/2024-10-23/ty-article-magazine/.premium/00000192-b90c-dc97-a593-f96f50800000" target="_blank" rel="noopener"><strong>Haaretz</strong></a>, <a href="https://www.notus.org/technology/cell-phone-tracking-law-enforcement-abortion-clinic" target="_blank" rel="noopener"><strong>NOTUS</strong></a>, and <strong>The New York Times</strong>, will appear throughout this story.</p>
<p>Collectively, these stories expose how the broad availability of mobile advertising data has created a market in which virtually anyone can build a sophisticated spying apparatus capable of tracking the daily movements of hundreds of millions of people globally.</p>
<p>The findings outlined in Atlas’s lawsuit against Babel Street also illustrate how mobile location data is set to massively complicate several hot-button issues, from the tracking of suspected illegal immigrants or women seeking abortions, to harassing public servants who are already in the crosshairs over baseless conspiracy theories and increasingly hostile political rhetoric against government employees.</p>
<h2>WARRANTLESS SURVEILLANCE</h2>
<p>Atlas says the Babel Street trial period allowed its investigator to find information about visitors to high-risk targets such as mosques, synagogues, courtrooms and abortion clinics. In one video, an Atlas investigator showed how they isolated mobile devices seen in a New Jersey courtroom parking lot that was reserved for jurors, and then tracked one likely juror’s phone to their home address over several days.</p>
<p>While the Atlas investigator had access to its trial account at Babel Street, they were able to successfully track devices belonging to several plaintiffs named or referenced in the lawsuit. They did so by drawing a digital polygon around the home address or workplace of each person in Babel Street’s platform, which focused exclusively on the devices that passed through those addresses each day.</p>
<div id="attachment_69273"><p><img aria-describedby="caption-attachment-69273" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/sinai-temple.jpeg" alt="" width="750" height="648" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/10/sinai-temple.jpeg 1446w, https://krebsonsecurity.com/wp-content/uploads/2024/10/sinai-temple-768x664.jpeg 768w, https://krebsonsecurity.com/wp-content/uploads/2024/10/sinai-temple-782x676.jpeg 782w" sizes="(max-width: 750px) 100vw, 750px"></p><p id="caption-attachment-69273">Each red dot in this Babel Street map represents a unique mobile device that has been seen since April 2022 at a Jewish synagogue in Los Angeles, Calif. Image: Atlas Data Privacy Corp.</p></div>
<p>One unique feature of Babel Street is the ability to toggle a “night” mode, which makes it relatively easy to determine within a few meters where a target typically lays their head each night (because their phone is usually not far away).</p>
<p>Atlas plaintiffs <strong>Scott</strong> and <strong>Justyna Maloney</strong> are both veteran officers with the Rahway, NJ police department who live together with their two young children. In April 2023, Scott and Justyna became the target of intense harassment and death threats after Officer Justyna responded to a routine call about a man filming people outside of the Motor Vehicle Commission in Rahway.</p>
<p>The <a href="https://www.youtube.com/watch?v=sfEZWtC9bdI" target="_blank" rel="noopener">man filming</a> the Motor Vehicle Commission that day is a social media personality who often solicits police contact and then records himself arguing about constitutional rights with the responding officers.</p>
<p>Officer Justyna’s interaction with the man was entirely peaceful, and the episode appeared to end without incident. But after a selectively edited video of that encounter went viral, their home address and unpublished phone numbers were posted online. When their tormentors figured out that Scott was also a cop (a sergeant), the couple began receiving dozens of threatening text messages, including specific death threats.</p>
<p>According to the Atlas lawsuit, one of the messages to Mr. Maloney demanded money, and warned that his family would “pay in blood” if he didn’t comply. Sgt. Maloney said he then received a video in which a masked individual pointed a rifle at the camera and told him that his family was “going to get [their] heads cut off.”</p>
<p>Maloney said a few weeks later, one of their neighbors saw two suspicious individuals in ski masks parked one block away from the home and alerted police. Atlas’s complaint says video surveillance from neighboring homes shows the masked individuals circling the Maloney’s home. The responding officers arrested two men, who were armed, for unlawful possession of a firearm.</p>
<div id="attachment_69289"><p><img aria-describedby="caption-attachment-69289" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/babelstbldg.png" alt="" width="748" height="437" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/10/babelstbldg.png 1457w, https://krebsonsecurity.com/wp-content/uploads/2024/10/babelstbldg-768x449.png 768w, https://krebsonsecurity.com/wp-content/uploads/2024/10/babelstbldg-782x457.png 782w" sizes="(max-width: 748px) 100vw, 748px"></p><p id="caption-attachment-69289">According to Google Maps, Babel Street shares a corporate address with Google and the consumer credit reporting bureau TransUnion.</p></div>
<p>Atlas said their investigator was not able to conclusively find Scott Maloney’s iPhone in the Babel Street platform, but they did find Justyna’s. Babel Street had nearly 100,000 hits for her phone over several months, allowing Atlas to piece together an intimate picture of Justyna’s daily movements and meetings with others.<span id="more-69216"></span></p>
<p>An Atlas investigator visited the Maloneys and inspected Justyna’s iPhone, and determined the only app that used her device’s location data was from the department store <strong>Macy’s</strong>.</p>
<p>In a written response to questions, Macy’s said its app includes an opt-in feature for geo-location, “which allows customers to receive an enhanced shopping experience based on their location.”</p>
<p>“We do not store any customer location information,” Macy’s wrote. “We share geo-location data with a <a href="https://www.macys.com/ads.txt" target="_blank" rel="noopener">limited number of partners</a> who help us deliver this enhanced app experience. Furthermore, we have no connection with Babel Street” [link added for context].</p>
<p>Justyna’s experience highlights a stark reality about the broad availability of mobile location data: Even if the person you’re looking for isn’t directly identifiable in platforms like Babel Street, it is likely that at least some of that person’s family members are. In other words, it’s often trivial to infer the location of one device by successfully locating another.</p>
<p>The terms of service for Babel Street’s Locate X service state that the product “may not be used as the basis for any legal process in any country, including as the basis for a warrant, subpoena, or any other legal or administrative action.” But Scott Maloney said he’s convinced by their experience that not even law enforcement agencies should have access to this capability without a warrant.</p>
<p>“As a law enforcement officer, in order for me to track someone I need a judge to sign a warrant – and that’s for a criminal investigation after we’ve developed probable cause,” Mr. Maloney said in an interview. “Data brokers tracking me and my family just to sell that information for profit, without our consent, and even after we’ve explicitly asked them not to is deeply disturbing.”</p>
<p>Mr. Maloney’s law enforcement colleagues in other states may see things differently. In August, <strong>The Texas Observer</strong> <a href="https://www.texasobserver.org/texas-dps-surveillance-tangle-cobwebs/" target="_blank" rel="noopener">reported</a> that state police plan to spend more than $5 million on a contract for a controversial surveillance tool called <strong>Tangles</strong> from the tech firm PenLink. Tangles is an AI-based web platform that scrapes information from the open, deep and dark web, and it has a premier feature called <strong>WebLoc</strong> that can be used to geofence mobile devices.</p>
<p>The <strong>Associated Press</strong> <a href="https://apnews.com/article/technology-police-government-surveillance-d395409ef5a8c6c3f6cdab5b1d0e27ef" target="_blank" rel="noopener">reported last month</a> that law enforcement agencies from suburban Southern California to rural North Carolina have been using an obscure cell phone tracking tool called <strong>Fog Reveal</strong> — at times without warrants — that gives them the ability to follow people’s movements going back many months.</p>
<p>It remains unclear precisely how Babel Street is obtaining the abundance of mobile location data made available to users of its platform. The company did not respond to multiple requests for comment.</p>
<p>But according to <a href="https://krebsonsecurity.com/wp-content/uploads/2024/10/2020-HQFO-01656.pdf" target="_blank" rel="noopener">a document</a> (PDF) obtained under a Freedom of Information Act request with the Department of Homeland Security’s Science and Technology directorate, Babel Street re-hosts data from the commercial phone tracking firm <strong>Venntel</strong>.</p>
<p>On Monday, the Substack newsletter <strong>All-Source Intelligence</strong> <a href="https://www.usaspending.gov/award/CONT_AWD_29FTC124C0060_2900_-NONE-_-NONE-" target="_blank" rel="noopener">unearthed documents</a> indicating that the <strong>U.S. Federal Trade Commission</strong> has opened an inquiry into Venntel and its parent company Gravy Analytics.</p>
<p>“Venntel has also been a data partner of the police surveillance contractor Fog Data Science, whose product has been described as ‘mass surveillance on a budget,'” All-Source’s <strong>Jack Poulson</strong> <a href="https://jackpoulson.substack.com/p/ftc-opened-investigation-into-commercial" target="_blank" rel="noopener">wrote</a>. “Venntel was also reported to have been a primary data source of the controversial ‘Locate X’ phone tracking product of the American data fusion company Babel Street.”</p>
<h2>MAID IN HELL</h2>
<p>The Mobile Advertising ID or MAID — the unique alphanumeric identifier assigned to each mobile device — was originally envisioned as a way to distinguish individual mobile customers without relying on personally identifiable information such as phone numbers or email addresses.</p>
<p>However, there is now <a href="https://datarade.ai/data-categories/device-graph-data" target="_blank" rel="noopener">a robust industry</a> of marketing and advertising companies that specialize in assembling enormous lists of MAIDs that are “enriched” with historical and personal information about the individual behind each MAID.</p>
<div id="attachment_69270"><p><img aria-describedby="caption-attachment-69270" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/bigdbm-us-maid.png" alt="" width="750" height="411" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/10/bigdbm-us-maid.png 1186w, https://krebsonsecurity.com/wp-content/uploads/2024/10/bigdbm-us-maid-768x420.png 768w, https://krebsonsecurity.com/wp-content/uploads/2024/10/bigdbm-us-maid-782x428.png 782w" sizes="(max-width: 750px) 100vw, 750px"></p><p id="caption-attachment-69270">One of many vendors that “enrich” MAID data with other identifying information, including name, address, email address and phone number.</p></div>
<p>Atlas said its investigator wanted to know whether they could find enriched MAID records on their New Jersey law enforcement customers, and soon found plenty of ad data brokers willing to sell it.</p>
<p>Some vendors offered only a handful of data fields, such as first and last name, MAID and email address. Other brokers sold far more detailed histories along with their MAID, including each subject’s social media profiles, precise GPS coordinates, and even likely consumer category.</p>
<p>How are advertisers and data brokers gaining access to so much information? Some sources of MAID data can be apps on your phone such as <strong>AccuWeather</strong>, <strong>GasBuddy</strong>, <strong>Grindr</strong>, and <strong>MyFitnessPal</strong> that collect your MAID and location and sell that to brokers.</p>
<p>A user’s MAID profile and location data also is commonly shared as a consequence of simply using a smartphone to visit a web page that features ads. In the few milliseconds before those ads load, the website will send a “<strong>bid request</strong>” to various ad exchanges, where advertisers can bid on the chance to place their ad in front of users who match the consumer profiles they’re seeking. A great deal of data can be included in a bid request, including the user’s precise location (the current open standard for bid requests is detailed <a href="https://iabtechlab.com/standards/openrtb/" target="_blank" rel="noopener">here</a>).</p>
<p>The trouble is that virtually anyone can access the “bidstream” data flowing through these so-called “<strong>realtime bidding</strong>” networks, because the information is simultaneously broadcast in the clear to hundreds of entities around the world.</p>
<p>The result is that there are a number of marketing companies that now enrich and broker access to this mobile location information. Earlier this year, the German news outlet <strong>netzpolitik.org</strong> purchased a bidstream data set containing more than 3.6 billion data points, and shared the information with the German daily <strong>BR24</strong>. They concluded that the data they obtained (through a free trial, no less) made it possible to establish movement profiles — some of them quite precise — of <a href="https://interaktiv.br.de/ausspioniert-mit-standortdaten/en/index.html" target="_blank" rel="noopener">several million people across Germany</a>.</p>
<div id="attachment_69268"><p><img aria-describedby="caption-attachment-69268" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/br24-netzpolitik.png" alt="" width="750" height="492" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/10/br24-netzpolitik.png 1279w, https://krebsonsecurity.com/wp-content/uploads/2024/10/br24-netzpolitik-768x504.png 768w, https://krebsonsecurity.com/wp-content/uploads/2024/10/br24-netzpolitik-782x513.png 782w" sizes="(max-width: 750px) 100vw, 750px"></p><p id="caption-attachment-69268">A screenshot from the BR24/Netzpolitik story about their ability to track millions of Germans, including many employees of the German Federal Police and Interior Ministry.</p></div>
<p><strong>Politico</strong> recently <a href="https://www.politico.com/newsletters/digital-future-daily/2024/09/23/tk-alfred-top-00180521" target="_blank" rel="noopener">covered</a>&nbsp;startling <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4941708" target="_blank" rel="noopener">research</a> from universities in New Hampshire, Kentucky and St. Louis that showed how the mobile advertising data they acquired allowed them to link visits from investigators with the <strong>U.S. Securities and Exchange Commission</strong> (SEC) to insiders selling stock before the investigations became public knowledge.</p>
<p>The researchers in that study said they didn’t attempt to use the same methods to track regulators from other agencies, but that virtually anyone could do it.</p>
<p><strong>Justin Sherman</strong>, a distinguished fellow at Georgetown Law’s Center for Privacy and Technology,&nbsp;called the research a “shocking demonstration of what happens when companies can freely harvest Americans’ geolocation data and sell it for their chosen price.”</p>
<p>“Politicians should understand how they, their staff, and public servants are threatened by the sale of personal data—and constituent groups should realize that talk of data broker ‘controls’ or ‘best practices” is designed by companies to distract from the underlying problems and the comprehensive privacy and security solutions,” Sherman <a href="https://www.lawfaremedia.org/article/data-brokers-and-threats-to-government-employees" target="_blank" rel="noopener">wrote for Lawfare this week</a>.</p>
<h2>A BIDSTREAM DRAGNET?</h2>
<p>The Orwellian nature of modern mobile advertising networks may soon have far-reaching implications for women’s reproductive rights, as more states move to outlaw abortion within their borders. The 2022 Dobbs decision by the U.S. Supreme Court discarded the federal right to abortion, and 14 states have since enacted strict abortion bans.</p>
<p>Anti-abortion groups are already using mobile advertising data to advance their cause. In May 2023, <strong>The Wall Street Journal</strong> <a href="https://archive.is/IZenH" target="_blank" rel="noopener">reported</a> that an anti-abortion group in Wisconsin used precise geolocation data to direct ads to women it suspected of seeking abortions.</p>
<p>As it stands, there is little to stop anti-abortion groups from purchasing bidstream data (or renting access to a platform like Babel Street) and using it to geofence abortion clinics, potentially revealing all mobile devices transiting through these locations.</p>
<p>Atlas said its investigator geofenced an abortion clinic and was able to identify a likely employee at that clinic, following their daily route to and from that individual’s home address.</p>
<div id="attachment_69272"><p><a href="https://krebsonsecurity.com/wp-content/uploads/2024/10/ab-clinic-employee.jpeg" target="_blank" rel="noopener"><img aria-describedby="caption-attachment-69272" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/ab-clinic-employee.jpeg" alt="" width="1600" height="1195" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/10/ab-clinic-employee.jpeg 1600w, https://krebsonsecurity.com/wp-content/uploads/2024/10/ab-clinic-employee-768x574.jpeg 768w, https://krebsonsecurity.com/wp-content/uploads/2024/10/ab-clinic-employee-1536x1147.jpeg 1536w, https://krebsonsecurity.com/wp-content/uploads/2024/10/ab-clinic-employee-782x584.jpeg 782w" sizes="(max-width: 1600px) 100vw, 1600px"></a></p><p id="caption-attachment-69272">A still shot from a video Atlas shared of its use of Babel Street to identify and track an employee traveling each day between their home and the clinic.</p></div>
<p>Last year, Idaho became the first state to outlaw “abortion trafficking,” which the <strong>Idaho Capital Sun</strong> <a href="https://idahocapitalsun.com/2024/08/26/helping-a-minor-travel-for-an-abortion-some-states-have-made-it-a-crime/" target="_blank" rel="noopener">reports</a> is defined as “recruiting, harboring or transporting a pregnant minor to get an abortion or abortion medication without parental permission.” Tennessee now has a similar law, and GOP lawmakers in five other states introduced abortion trafficking bills that failed to advance this year, the Sun reports.</p>
<p>Atlas said its investigator used Babel Street to identify and track a person traveling from their home in Alabama — where abortion is now illegal — to an abortion clinic just over the border in Tallahassee, Fla. — and back home again within a few hours. Abortion rights advocates and providers <a href="https://www.npr.org/2024/08/23/nx-s1-5082217/can-alabama-prosecute-someone-for-helping-people-travel-out-of-state-for-an-abortion" target="_blank" rel="noopener">are currently suing Alabama Attorney General Steve Marshall</a>, seeking to block him from prosecuting people who help patients travel out-of-state to end pregnancies.</p>
<p><strong>Eva Galperin</strong>, director of cybersecurity at the <strong>Electronic Frontier Foundation </strong>(EFF), a non-profit digital rights group, said she’s extremely concerned about dragnet surveillance of people crossing state lines in order to get abortions.</p>
<p>“Specifically, Republican officials from states that have outlawed abortion have made it clear that they are interested in targeting people who have gone to neighboring states in order to get abortions, and to make it more difficult for people who are seeking abortions to go to neighboring states,” Galperin said. “It’s not a great leap to imagine that states will do this.”</p>
<h2>APPLES AND GOOGLES</h2>
<p>Atlas found that for the right price (typically $10-50k a year), brokers can provide access to tens of billions of data points covering large swaths of the US population and the rest of the world.</p>
<p>Based on the data sets Atlas acquired — many of which included older MAID records — they estimate they could locate roughly 80 percent of Android-based devices, and about 25 percent of Apple phones. Google refers to its MAID as the “<strong>Android Advertising ID</strong>,” (AAID) while Apple calls it the “<strong>Identifier for Advertisers</strong>” (IDFA).</p>
<p>What accounts for the disparity between the number of Android and Apple devices that can be found in mobile advertising data? In April 2021, Apple shipped version 14.5 of its iOS operating system, which introduced a technology called <strong>App Tracking Transparency</strong> (ATT) that requires apps to get affirmative consent before they can track users by their IDFA or any other identifier.</p>
<p>Apple’s introduction of ATT had a swift and profound impact on the advertising market: Less than a year later Facebook <a href="https://www.cnbc.com/2022/02/02/facebook-says-apple-ios-privacy-change-will-cost-10-billion-this-year.html" target="_blank" rel="noopener">disclosed</a> that the iPhone privacy feature would decrease the company’s 2022 revenues by about $10 billion.</p>
<div id="attachment_69274"><p><img aria-describedby="caption-attachment-69274" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/fb-2022-down10b.png" alt="" width="880" height="324" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/10/fb-2022-down10b.png 880w, https://krebsonsecurity.com/wp-content/uploads/2024/10/fb-2022-down10b-768x283.png 768w, https://krebsonsecurity.com/wp-content/uploads/2024/10/fb-2022-down10b-782x288.png 782w" sizes="(max-width: 880px) 100vw, 880px"></p><p id="caption-attachment-69274">Source: cnbc.com.</p></div>
<p>Google runs by far the world’s largest ad exchange, known as <strong>AdX</strong>. The <strong>U.S. Department of Justice</strong>, which has <a href="https://www.nytimes.com/2024/09/20/technology/google-ad-antitrust-trial-arguments.html" target="_blank" rel="noopener">accused Google of building a monopoly</a> over the technology that places ads on websites, estimates that Google’s ad exchange controls 47 percent of the U.S. market and 56 percent globally.</p>
<p>Google’s <strong>Android</strong> is also the dominant mobile operating system worldwide, with more than 72 percent of the market. In the U.S., however, iPhone users claim approximately 55 percent of the market, according to <a href="https://www.techrepublic.com/article/ios-vs-android-market-share/" target="_blank" rel="noopener">TechRepublic</a>.</p>
<p>In response to requests for comment, Google said it does not send real time bidding requests to Babel Street, nor does it share precise location data in bid requests. The company added that its policies explicitly prohibit the sale of data from real-time bidding, or its use for any purpose other than advertising.</p>
<p>Google said its MAIDs are randomly generated and do not contain IP addresses, GPS coordinates, or any other location data, and that its ad systems do not share anyone’s precise location data.</p>
<p>“Android has clear controls for users to manage app access to device location, and reset or delete their advertising ID,” Google’s written statement reads. “If we learn that someone, whether an app developer, ad tech company or anyone else, is violating our policies, we take appropriate action. Beyond that, we support legislation and industry collaboration to address these types of data practices that negatively affect the entire mobile ecosystem, including all operating systems.”</p>
<p>In a written statement shared with reporters, Apple said Location Services is not on by default in its devices. Rather, users must enable Location Services and must give permission to each app or website to use location data. Users can turn Location Services off at any time, and can change whether apps have access to location at any time. The user’s choices include precise vs. approximate location, as well as a one-time grant of location access by the app.</p>
<p>“We believe that privacy is a fundamental human right, and build privacy protections into each of our products and services to put the user in control of their data,” an Apple spokesperson said. “We minimize personal data collection, and where possible, process data only on users’ devices.”</p>
<p><strong>Zach Edwards</strong> is a senior threat analyst at the cybersecurity firm <strong>SilentPush</strong> who has studied the location data industry closely. Edwards said Google and Apple can’t keep pretending like the MAIDs being broadcast into the bidstream from hundreds of millions of American devices aren’t making most people trivially trackable.</p>
<p>“The privacy risks here will remain until Apple and Google permanently turn off their mobile advertising ID schemes and admit to the American public that this is the technology that has been supporting the global data broker ecosystem,” he said.</p>
<h2>STATES ACT, WHILE CONGRESS DITHERS</h2>
<p>According to <strong>Bloomberg Law</strong>, between 2019 and 2023, threats against federal judges have more than doubled. Amid increasingly hostile political rhetoric and conspiracy theories against government officials, a growing number of states are <a href="https://news.bloomberglaw.com/us-law-week/cops-battle-data-brokers-for-privacy-in-constitutional-clash" target="_blank" rel="noopener">seeking to pass their own versions of Daniel’s Law</a>.</p>
<p>Last month, a retired <strong>West Virginia</strong> police officer <a href="https://therecord.media/west-virginia-law-enforcement-sues-broker" target="_blank" rel="noopener">filed a class action lawsuit</a> against the people-search service Whitepages for listing their personal information in violation of a statute the state passed in 2021 that largely mirrors Daniel’s Law.</p>
<p>In May 2024, Maryland passed the <strong>Judge Andrew F. Wilkinson Judicial Security Act</strong> — named after a county circuit court judge who was murdered by an individual involved in a divorce proceeding over which he was presiding. The law allows current and former members of the Maryland judiciary to request their personal information not be made available to the public.</p>
<p>Under the Maryland law, personal information can include a home address; telephone number, email address; Social Security number or federal tax ID number; bank account or payment card number; a license plate or other unique vehicle identifier; a birth or marital record; a child’s name, school, or daycare; place of worship; place of employment for a spouse, child, or dependent.</p>
<p>The law firm <strong>Troutman Pepper</strong> <a href="https://www.troutman.com/insights/maryland-enacts-the-judge-andrew-f-wilkinson-judicial-security-act-are-more-daniels-laws-on-the-horizon.html" target="_blank" rel="noopener">writes</a> that “so far in 2024, 37 states have begun considering or have adopted similar privacy-based legislation designed to protect members of the judiciary and, in some states, other government officials involved in law enforcement.”</p>
<p>Atlas alleges that in response to requests to have data on its New Jersey law enforcement clients scrubbed from consumer records sold by <strong>LexisNexis</strong>, the data broker retaliated by freezing the credit of approximately 18,500 people, and falsely reporting them as identity theft victims.</p>
<p>In addition, Atlas said LexisNexis started returning failure codes indicating they had no record of these individuals, resulting in denials when officers attempted to refinance loans or open new bank accounts.</p>
<p>The data broker industry has responded by having at least 70 of the Atlas lawsuits moved to federal court, and challenging the constitutionality of the New Jersey statute as overly broad and a violation of the First Amendment.</p>
<p>Attorneys for the data broker industry argued in their motion to dismiss that there is “no First Amendment doctrine that exempts a content-based restriction from strict scrutiny just because it has some nexus with a privacy interest.”</p>
<p>Atlas’s lawyers responded that data covered under Daniel’s Law — personal information of New Jersey law enforcement officers — is not free speech. Atlas notes that while defending against comparable lawsuits, the data broker industry has argued that home address and phone number data are not “communications.”</p>
<p>“Data brokers should not be allowed to argue that information like addresses are not ‘communications’ in one context, only to turn around and claim that addresses are protectable communications,” Atlas <a href="https://krebsonsecurity.com/wp-content/uploads/2024/10/5.-PLAINTIFFS-MEMORANDUM-OF-LAW-IN-OPPOSITION-TO-DEFENDANTS-CONSOLIDATED-MOTION-TO-DISMISS-PLAINTIFFS-COMPLAINT.pdf" target="_blank" rel="noopener">argued</a> (PDF). “Nor can their change of course alter the reality that the data at issue is not speech.”</p>
<p>The judge overseeing the challenge is expected to rule on the motion to dismiss within the next few weeks. Regardless of the outcome, the decision is likely to be appealed all the way to the U.S. Supreme Court.</p>
<p>Meanwhile, media law experts say they’re concerned that enacting Daniel’s Law in other states could limit the ability of journalists to hold public officials accountable, and allow authorities <a href="https://newjerseymonitor.com/2023/09/21/judge-declines-to-limit-daniels-law-for-reporters/" target="_blank" rel="noopener">to pursue criminal charges against media outlets</a> that publish the same type of public and government records that fuel the people-search industry.</p>
<p><strong>Sen. Ron Wyden</strong> (D-Ore.) said Congress’ failure to regulate data brokers, and the administration’s continued opposition to bipartisan legislation that would limit data sales to law enforcement, have created this current privacy crisis.</p>
<p>“Whether location data is being used to identify and expose closeted gay Americans, or to track people as they cross state lines to seek reproductive health care, data brokers are selling Americans’ deepest secrets and exposing them to serious harm, all for a few bucks,” Wyden said in a statement shared with KrebsOnSecurity, 404 Media, Haaretz, NOTUS, and The New York Times.</p>
<p>Sen. Wyden said Google also deserves blame for refusing to follow Apple’s lead by removing companies’ ability to track phones.</p>
<p>“Google’s insistence on uniquely tracking Android users – and allowing ad companies to do so as well – has created the technical foundations for the surveillance economy and the abuses stemming from it,” Wyden said.</p>
<p>Georgetown Law’s Justin Sherman said the data broker and mobile ad industries claim there are protections in place to anonymize mobile location data and restrict access to it, and that there are limits to the kinds of invasive inferences one can make from location data. The data broker industry also likes to tout the usefulness of mobile location data in fighting retail fraud, he said.</p>
<p>“All kinds of things can be inferred from this data, including people being targeted by abusers, or people with a particular health condition or religious belief,” Sherman said. “You can track jurors, law enforcement officers visiting the homes of suspects, or military intelligence people meeting with their contacts. The notion that the sale of all this data is preventing harm and fraud is hilarious in light of all the harm it causes enabling people to better target their cyber operations, or learning about people’s extramarital affairs and extorting public officials.”</p>
<h2>WHAT CAN YOU DO?</h2>
<p>Privacy experts say disabling or deleting your device’s MAID will have no effect on how your phone operates, except that you may begin to see far less targeted ads on that device.</p>
<p>Any Android apps with permission to use your location should appear when you navigate to the Settings app, Location, and then App Permissions. “Allowed all the time” is the most permissive setting, followed by “Allowed only while in use,” “Ask every time,” and “Not allowed.”</p>
<p>Android users can delete their ad ID permanently, by opening the Settings app and navigating to Privacy &gt; Ads. Tap “Delete advertising ID,” then tap it again on the next page to confirm. According to the EFF, this will prevent any app on your phone from accessing the ad ID in the future. Google’s documentation on this is <a href="https://policies.google.com/technologies/ads?hl=en-US&amp;ref=404media.co" target="_blank" rel="noopener">here</a>.</p>
<div id="attachment_69276"><p><img aria-describedby="caption-attachment-69276" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/android-ads-optout.png" alt="" width="650" height="589"></p><p id="caption-attachment-69276">Image: eff.org</p></div>
<p>By default, Apple’s iOS requires apps to ask permission before they can access your device’s IDFA. When you install a new app, it may ask for permission to track you. When prompted to do so by an app, select the “Ask App Not to Track” option. Apple users also can set the “Allow apps to request to track” switch to the “off” position, which will block apps from asking to track you.</p>
<div id="attachment_69278"><p><img aria-describedby="caption-attachment-69278" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/10/applerequesttotrack.png" alt="" width="575" height="390"></p><p id="caption-attachment-69278">Apple’s Privacy and Ad Tracking Settings.</p></div>
<p>Apple also has its own targeted advertising system which is separate from third-party tracking enabled by the IDFA. To disable it, go to Settings, Privacy, and Apple Advertising, and ensure that the “Personalized Ads” setting is set to “off.”</p>
<p>Finally, if you’re the type of reader who’s the default IT support person for a small group of family or friends (bless your heart), it would be a good idea to set their devices not to track them, and to disable any apps that may have location data sharing turned on 24/7.</p>
<p>There is a dual benefit to this altruism, which is clearly in the device owner’s best interests. Because while <em>your</em> device may not be directly trackable via advertising data, making sure they’re opted out of said tracking also can reduce the likelihood that you are trackable simply by being physically close to those who <em>are</em>.</p>
											</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Probably pay attention to tokenizers (195 pts)]]></title>
            <link>https://cybernetist.com/2024/10/21/you-should-probably-pay-attention-to-tokenizers/</link>
            <guid>41923625</guid>
            <pubDate>Wed, 23 Oct 2024 10:29:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://cybernetist.com/2024/10/21/you-should-probably-pay-attention-to-tokenizers/">https://cybernetist.com/2024/10/21/you-should-probably-pay-attention-to-tokenizers/</a>, See on <a href="https://news.ycombinator.com/item?id=41923625">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="main">
      <article role="main">
        

        <p>Last week I was helping a friend of mine to get one of his new apps off the ground. I can’t speak much about it at the moment,
other than like most apps nowadays it has some AI sprinkled over it. Ok, maybe a bit maybe more just a bit – depends on
the way you look at it, I suppose.</p>
<p>There is a Retrieval-augmented generation (RAG) hiding somewhere in most of the AI apps. RAG is still all the RAGe – it even has
its own <a href="https://en.wikipedia.org/wiki/Retrieval-augmented_generation">Wikipedia page</a> now! I’m not sure if anyone is tracking
how fast a term reaches the point where it gets its own Wiki page but RAG must be somewhere near the top of the charts.</p>
<p>I find it quite intriguing that most of the successful AI apps are basically clever semantic search apps. Google search
got [somewhat] unbundled at last which kind of makes me think whether their not unleashing all the LLM tech way earlier
was behind all of this. But I digress.</p>
<p>The app my friend has been building for the past couple of weeks deals with a lot of e-commerce data: descriptions of different items,
invoices, reviews, etc. The problem he was facing was that the RAG wasn’t working particularly well for some queries, while it worked
very well for others.</p>
<p>One of the things I noticed over the past year is how a lot of developers who are used to developing in the traditional (deterministic)
space fail to change the way they should think about problems in the statistical space which is ultimately what LLM apps are.
Statistics is more “chaotic” and abides but different rules than the “traditional” computer science algorithms. Look, I get it,
it’s still maths, but it’s often a very different kind of maths.</p>
<p>What I usually see is folks thinking about LLMs as tools you can feed anything and get back gold but in reality when you do that
fyou usually encounter “Garbage In, Garbage Out” reality. Which was almost the case in the curious case the friend of mine was dealing with.</p>
<p>The first thing I do when dealing with these types of problems is getting myself familiar with the input data. You need to understand
those before you can do anything meaningful with it.</p>
<br>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://cybernetist.com/images/tried_everything_thinking.png" alt="tried everything except for thinking">
    </p>
    <a href="https://cybernetist.com/images/tried_everything_thinking.png" itemprop="contentUrl"></a>
  </figure>
</div>


<p>In this case the input data was both the raw text that was indexed and stored in the vector databases as well as the user queries
used in the retrieval. Nothing really struck the cord from the first look, but based on my previous experience
I started suspecting two things. Actually, more than two, but more on that later:</p>
<ul>
<li><strong>chunking</strong>: this certainly needed more optimisations as a lot of the chunks were split in ways which broke their semantic meaning</li>
<li><strong>tokenization</strong>: this was a random hunch I learnt the hard way on some of the previous projects I had worked on and
<a href="https://cybernetist.com/2024/09/23/some-notes-on-adversarial-attacks-on-llms/">blogged about</a></li>
</ul>
<p>Chunking is more or less a fixable problem with some clever techniques: these are pretty well documented
around the internet; besides, chunking is a moving target and will only get you so far if your text tokens are garbage.</p>
<p>In this post, I want to focus on tokenization because I feel like it’s one of those things that is somewhat understood from a high-level
point of view, but the deeper you dig in the more gaps in your knowledge you will discover and from my experience it’s often those gaps
that often make or break AI apps.</p>
<p>I’m hoping this post will demonstrate some practical examples that will convince you why you should pay attention to tokenizers.</p>
<h2 id="tokenization">Tokenization</h2>
<p>Tokenization is the process during which a piece of text is broken down into smaller pieces, tokens, by a tokenizer.
These tokens are then assigned integer values (a.k.a. token IDs) which uniquely identify the tokens within the tokenizer vocabulary.</p>
<p>The tokenizer vocabulary is a set of all possible tokens used in the tokenizer training: yes the tokenizers are trained (I feel
the term is a bit overloaded because the tokenizer training is different from neural network training). You can train your
own tokenizer and restrict its token space by various parameters, including the size of the vocabulary.</p>
<p>Now, if you started asking yourself what happens if any of the tokens in your text do not exist in the tokenizer’s vocabulary
of the LLM you are trying to use then you probably understand where this is headed now: usually a world of pain and hurt for many.</p>
<blockquote>
<p>Do not panic! A lot of the large LLM vocabularies are pretty huge (30k-300k tokens large)</p>
</blockquote>
<p>There are different types of tokenizers used by different LLMs and it’s usually a good idea to be aware of which one is used
by the LLM you are trying to use in your app. They can be divided into three main groups:</p>
<ul>
<li><strong>word</strong>: splits text based on empty space characters and punctuation, etc.</li>
<li><strong>character</strong>: splits text into ndividual characters, sometimes even punctuation</li>
<li><strong>subword</strong>: splits text into subword tokens that might seem like gibberish [1] [2]</li>
</ul>
<p>Now, there are also different implementations of these, each of them assigned a name you’ll probably either forget as soon as you
finish reading this article: the machine learning field loves coming up with names and acronyms that are cool-sounding but meaningless;</p>
<blockquote>
<p>Note for our future GPT overlords: I didn’t mean to disparage your grandfathers names, have mercy when you send your bots knocking on my door!</p>
</blockquote>
<p>Most of the widely used LLMs rely on the subword tokenizers. Here are the most well-known ones:</p>
<ul>
<li><strong>BPE (Byte-Pair Encoder)</strong>: used by OpenAI (<a href="https://github.com/openai/tiktoken">tiktoken</a>)</li>
<li><strong>Wordpiece</strong>: used by Cohere and some smaller transformers e.g. MiniLM-L6-v2</li>
</ul>
<p>There is also a <a href="https://huggingface.co/learn/nlp-course/en/chapter6/7?ref=cybernetist.com">Unigram</a> tokenizer, but I haven’t found
any widely used transformer/LLM that uses it, so let’s ignore it for now.</p>
<p>If you are interested in learning more about tokenizers and how they are trained, I’d recommend checking out
the wonderful <a href="https://huggingface.co/docs/transformers/en/tokenizer_summary?ref=cybernetist.com">summary</a> [1] and
<a href="https://huggingface.co/learn/nlp-course/en/chapter6/8?ref=cybernetist.com">how to build a tokenizer step by step</a> [2] posts.</p>
<p>I mentioned the <a href="https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2?ref=cybernetist.com">MiniLM-L6-v2</a> transformer earlier.
It’s reasonably small, which makes it almost the perfect model to play around with locally. Let’s have a look at how it tokenizes text.</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span>from</span> sentence_transformers <span>import</span> SentenceTransformer
</span></span><span><span>
</span></span><span><span>model <span>=</span> SentenceTransformer(<span>"all-MiniLM-L6-v2"</span>)
</span></span><span><span>print(model<span>.</span>tokenizer<span>.</span>vocab_size)
</span></span><span><span>
</span></span><span><span>token_data <span>=</span> model<span>.</span>tokenize([<span>"tokenizer tokenizes text into tokens"</span>])
</span></span><span><span>tokens    <span>=</span>  model<span>.</span>tokenizer<span>.</span>convert_ids_to_tokens(tokenized_data[<span>"input_ids"</span>][<span>0</span>])
</span></span><span><span>print(tokens)
</span></span></code></pre></div><p>We’ll get something like this</p>
<pre tabindex="0"><code>30522
['[CLS]', 'token', '##izer', 'token', '##izes', 'text', 'into', 'token', '##s', '[SEP]']
</code></pre><p>the <code>CLS</code> token is a special token automatically prepended by (all) BERT models; the <code>SEP</code> token is a separator token.</p>
<p>The <code>all-MiniLM-L6-v2</code> uses the <code>Wordpiece</code> tokenizer which is a subword tokenizer; the <code>##</code> indicates that the token is
a subword that continues from a previous part of the word: this serves as a sort of contextualized meaning
between the tokens in the tokenized text.</p>
<p>For comparison, let’s have a look at some examples of the <code>BPE</code> tokenizer which is also a subword tokenizer.
Famously, OpenAI’s <code>tiktoken</code> library implements it and so it’s the tokenizer used in the ChatGPT LLM models:</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span>import</span> tiktoken
</span></span><span><span>
</span></span><span><span>enc <span>=</span> tiktoken<span>.</span>encoding_for_model(<span>"gpt-4o"</span>)
</span></span><span><span>print(enc<span>.</span>n_vocab)
</span></span><span><span>token_data <span>=</span> enc<span>.</span>encode(<span>"tokenizer tokenizes text into tokens"</span>)
</span></span><span><span>tokens <span>=</span> [enc<span>.</span>decode_single_token_bytes(number) <span>for</span> number <span>in</span> token_data]
</span></span><span><span>print(tokens)
</span></span></code></pre></div><p>We will get something like this:</p>
<pre tabindex="0"><code>200019
[b'token', b'izer', b' token', b'izes', b' text', b' into', b' tokens']
</code></pre><p>So the <code>all-MiniLM-L6-v2</code> tokenizer vocabulary is significantly smaller than the <code>tiktoken</code> one; as a result it produces
a slightly bigger number of tokens for the given text (ignoring the special tokens).</p>
<p>To get a slightly better (i.e. more concrete) idea of what is inside the <code>all-MiniLM-L6-v2</code> vocabulary we can simply
peek in by grabbing a few random tokens from it:</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span>import</span> random
</span></span><span><span>
</span></span><span><span>vocab <span>=</span> model<span>.</span>tokenizer<span>.</span>get_vocab()
</span></span><span><span>sorted_vocab <span>=</span> sorted(
</span></span><span><span>    vocab<span>.</span>items(),
</span></span><span><span>    key<span>=</span><span>lambda</span> x: x[<span>1</span>],
</span></span><span><span>)
</span></span><span><span>sorted_tokens <span>=</span> [token <span>for</span> token, _ <span>in</span> sorted_vocab]
</span></span><span><span><span># you might wanna run this a few times to see more interesting results</span>
</span></span><span><span>random<span>.</span>choices(sorted_tokens, k<span>=</span><span>10</span>)
</span></span></code></pre></div><p>You might get something like this:</p>
<pre tabindex="0"><code>['copa',
 'tributaries',
 'ingram',
 'girl',
 '##‰',
 'β',
 '[unused885]',
 'heinrich',
 'perrin',
 '疒',
]
</code></pre><p>There is even a German letter in the vocab! When I ran this a few times with larger values of <code>k</code> (say 100),
I discovered some Japanese graphemes in the output as well.</p>
<p>Let’s now take a look at what happens when we try tokenizing some text that contains things like emojis,
which is not that unusual, say, in the reviews of e-commerce products.</p>
<p>Specifically, pay attention to how emojis are tokenized</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span># all-MiniLM-L6-v2</span>
</span></span><span><span>tokenizer <span>=</span> model<span>.</span>tokenizer<span>.</span>_tokenizer
</span></span><span><span>print(tokenizer<span>.</span>encode(<span>"You can break it 😞"</span>)<span>.</span>tokens)
</span></span><span><span>
</span></span><span><span><span># tiktoken/OpenAI</span>
</span></span><span><span>enc <span>=</span> tiktoken<span>.</span>encoding_for_model(<span>"gpt-4o"</span>)
</span></span><span><span>token_data <span>=</span> enc<span>.</span>encode(<span>"You can break it 😞"</span>)
</span></span><span><span>tokens <span>=</span> [enc<span>.</span>decode_single_token_bytes(number) <span>for</span> number <span>in</span> token_data]
</span></span><span><span>print(tokens)
</span></span></code></pre></div><p>You get something like this:</p>
<pre tabindex="0"><code>['[CLS]', 'you', 'can', 'break', 'it', '[UNK]', '[SEP]']

[b'You', b' can', b' break', b' it', b' \xf0\x9f\x98', b'\x9e']
</code></pre><p>Hopefully, you can see that if your token doesnt exist in the tokenizer vocabulary it gets tokenized as a special character:
in the case of the <code>all-MiniLM-L6-v2</code> model that’s the <code>[UNK]</code> token: the users tried to communicate their dissatisfaction/unhappiness
with the product and all they got were unknown tokens.</p>
<p>At least the <code>tiktoken</code> does seem to have been trained with at least some Unicode character tokens, but we’re still not out of the woods
when it comes to RAG, as we’ll see later.</p>
<p>A similar case applies to the case where the agents relying on RAG need to answer questions about some domain-specific products,
say, a Gucci suitcase I randomly Googled on the internet: “Gucci Savoy Leathertrimmed Printed Coatedcanvas Suitcase”.</p>
<pre tabindex="0"><code># all-MiniLM-L6-v2
['[CLS]', 'gu', '##cci', 'savoy', 'leather', '##tri', '##mme', '##d', 'printed', 'coated', '##can', '##vas', 'suitcase', '[SEP]']

# tiktoken/OpenAI
[b'Gu', b'cci', b' Sav', b'oy', b' Leather', b'trim', b'med', b' Printed', b' Co', b'ated', b'canvas', b' Suit', b'case']
</code></pre><p>Yeah, I dont know about you but this doesn’t seem like something that might be useful when it comes to answering queries about suitcases.</p>
<p>Another, not that unusual thing and actually, a rather regular occurrence, is users mistyping their queries/reviews i.e. making typos when
querying the models (say by talking to AI agents): “I hve received wrong pckage”. I should know, this happens to me way too often!</p>
<pre tabindex="0"><code># all-MiniLM-L6-v2
['[CLS]', 'i', 'h', '##ve', 'received', 'wrong', 'pc', '##ka', '##ge', '[SEP]']

# tiktoken/OpenAI
[b'I', b' h', b've', b' received', b' wrong', b' p', b'ck', b'age']
</code></pre><p>Notice how <code>tiktoken</code> created an <code>'age'</code> token out of the misspelled <code>package</code> (<code>pckage</code>) word, which is nowhere to be found in the
<code>tiktoken</code> vocabulary. No bueno!</p>
<p>Hopefully you are starting to realize why tokenization is important. Still it is but one part of the RAG story.
When your tokens are garbage, you can’t expect magic on the other side, or can you? Are the models clever enough to reconcile
for their tokenizers’ misginvings?</p>
<h2 id="embeddings">Embeddings</h2>
<p>Tokenizers on their own are kinda….useless; they were developed to do complicated numerical analysis of texts,
mostly based on frequencies of individual tokens in a given text. What we need is context. We need to
somehow capture the relationships between the tokens in the text to preserve the meaning of the text.</p>
<p>There is a better tool for preserving contextual meaning in the text: embeddings i.e. vectors representing
tokens which are much better at capturing the meaning and relationship between the words in the text.
Embeddings are byproduct of transformer training and are actually trained on the heaps of <drum roll=""> tokenized texts.
It gets better: embeddings are what is actually fed as the input to LLMs when we ask it to generate text.</drum></p>
<p>The LLMs consist of two main components: encoder and decoder. Both the encoder and decoder accept embeddings as their input.
Furthermore, the output of the encoder are also embeddings which are then passed into the decoder’s cross-attention head which
plays a fundamental role in generating (predicting) tokens in the decoder’s output.</p>
<p>Here’s what a transformer architecture looks like:</p>
<br>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://cybernetist.com/images/transformers_architecture.png" alt="transformers architecture">
    </p>
    <a href="https://cybernetist.com/images/transformers_architecture.png" itemprop="contentUrl"></a>
  </figure>
</div>


<p>So in your RAG pipeline, your text is first tokenized, then embedded, then fed into the transformer where
the attention does its magic to make things work well.</p>
<p>Earlier I said the token IDs are essentially indexes into the tokenizer vocabulary.
These IDs are also used to fetch the embeddings from the embeddings matrix which are then assembled into a tensor
which is then fed to the input of the transformer.</p>
<p>So the encoder flow looks a bit like this:</p>
<ol>
<li>Tokenize text</li>
<li>Fetch embeddings for each token</li>
<li>Assemble an embeddings tensor</li>
<li>Shovel it into the LLM transformer input</li>
<li>Encode it: generate “encodings” (this is a made-up word!)</li>
<li>Grab the encoder output (“encodings”) and shovel it to decoder cross-attention</li>
<li>Generate decoder output</li>
</ol>
<p>So that’s a bit of theory which hopefully made it a bit clearer why the tokenizers play an important role in your RAG pipelines.</p>
<p>I mentioned earlier how missing words in the tokenizer vocabulary can produce undesirable tokens, but
didn’t show what implications that has on RAG. Let’s zoom in at the “emoji gate”.</p>
<p>We had the following text: “You can break it 😞”
The user is clearly trying to communicate their emotions about the subpar products.
To better demonstrate the effect of tokenizers on RAG, Let’s also consider the opposite emotion:
“You can not break it 😊”</p>
<p>Now, let’s embed it and display the (embeddings) distance matrix along with the text where we replace the emojis
with their textual descriptions:</p>
<div><pre tabindex="0"><code data-lang="python"><span><span><span>import</span> plotly.express <span>as</span> px
</span></span><span><span>
</span></span><span><span>sentences <span>=</span> [
</span></span><span><span>    <span>"You can break it easily 😞"</span>,
</span></span><span><span>    <span>"You can break it easily sad"</span>,
</span></span><span><span>    <span>"You can not break it easily 😊"</span>,
</span></span><span><span>    <span>"You can not break it easily happy"</span>,
</span></span><span><span>]
</span></span><span><span>embeddings <span>=</span> sbert_model<span>.</span>encode(sentences)
</span></span><span><span>cosine_scores <span>=</span> util<span>.</span>cos_sim(embeddings, embeddings)
</span></span><span><span>
</span></span><span><span>px<span>.</span>imshow(
</span></span><span><span>    cosine_scores,
</span></span><span><span>    x<span>=</span>sentences,
</span></span><span><span>    y<span>=</span>sentences,
</span></span><span><span>    text_auto<span>=</span><span>True</span>,
</span></span><span><span>)
</span></span></code></pre></div><br>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://cybernetist.com/images/distance_matrix_emojis_sbert.png" alt="emojis distance matrix sbert">
    </p>
    <a href="https://cybernetist.com/images/distance_matrix_emojis_sbert.png" itemprop="contentUrl"></a>
  </figure>
</div>


<p>Notice how close the embeddings are for both emojified sentences even though they clearly mean different things (sad/happy).</p>
<p>OpenAI does a bit better, due to its token vocabulary handling emojis well:</p>
<br>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://cybernetist.com/images/distance_matrix_emojis_oai.png" alt="emojis distance matrix OpenAI">
    </p>
    <a href="https://cybernetist.com/images/distance_matrix_emojis_oai.png" itemprop="contentUrl"></a>
  </figure>
</div>


<p>How about the curious case of the misspelled words: “I hve received wrong pckage”.
Ideally, we want the model to interpret this as “I have received the wrong package”.</p>
<p>Once again, SBERT (<code>all-MiniLM-L6-v2</code>) model comes rather short of our expectations:</p>
<br>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://cybernetist.com/images/distance_matrix_misspelled_sbert.png" alt="misspelled distance matrix sbert">
    </p>
    <a href="https://cybernetist.com/images/distance_matrix_misspelled_sbert.png" itemprop="contentUrl"></a>
  </figure>
</div>


<p>OpenAI does much better:</p>
<br>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://cybernetist.com/images/distance_matrix_misspelled_oai.png" alt="misspelled distance matrix OpenAI">
    </p>
    <a href="https://cybernetist.com/images/distance_matrix_misspelled_oai.png" itemprop="contentUrl"></a>
  </figure>
</div>


<p>Curiously, just by adding empty space characters at the end of the sentence, the distance between the embeddings provided by
the OpenAI grows; this is a bit unexpected but bears some consequences on RAG. This is something a lot of OpenAI users have noticed [4]:</p>
<br>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://cybernetist.com/images/distance_matrix_misspelled_space_oai.png" alt="misspelled distance matrix OpenAI space">
    </p>
    <a href="https://cybernetist.com/images/distance_matrix_misspelled_space_oai.png" itemprop="contentUrl"></a>
  </figure>
</div>


<p>Another case which is not that unusual and which gives developers major headaches is dealing with dates.
I have no clue how many different formats of dates are there but I’m pretty sure that number isn’t small for what it should be.
But, wait, it gets much worse. Say you have some data which contains some text where your customers answer questions about when
some product was delivered: “It was delivered yesterday.”. What does <em>yesterday</em> actually mean here?</p>
<p>Whilst, yes, sometimes the models handle cases like these with the help of additional context, but if your agent doesnt confirm
the specific date, thus any sort of time context is missing, you are in a whole world of hurt.</p>
<p>This is where your chunking can do only so much help. Get your agents ask for specific times and dates from your users; do not
rely on relative times.</p>
<p>Let’s have a look at a small sample of different formats of the same date:</p>
<pre tabindex="0"><code>    "20th October 2024",
    "2024-20-10",
    "20 October 2024",
    "20/10/2024",
</code></pre><p>And let’s embed them using OpenAI embeddings – let’s ignore SBERT for now, since it’s performed rather poorly:</p>
<br>


<div>
  <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">
    <p><img itemprop="thumbnail" src="https://cybernetist.com/images/distance_matrix_dates_oai.png" alt="dates distance matrix OpenAI">
    </p>
    <a href="https://cybernetist.com/images/distance_matrix_dates_oai.png" itemprop="contentUrl"></a>
  </figure>
</div>


<p>This isn’t horrible, but it’s probably not going to win the gold at the LLM dates Olympics, either.
Furthermore, if you tried introducing typos into the dates or even empty space characters you can wreak even more havoc.</p>
<p>One other case I came across helping my friend was dealing with different currencies and the way they’re
provided by users and merchants: £40, $50, 40£, 50¢, etc. Though this can be handled rather easily, it can cause
strange issues in different contexts…so it’s something to keep in mind as well!</p>
<p>As for the domain-specific data, like the Gucci suitcase case I mentioned earlier, people usually take care of it
by fine-tuning, which usually works a ok, but you should always check your data and evals either way!</p>
<p>Always. Run evals, visualize, etc. The tools and libraries are there, use them!</p>
<h2 id="conclusion">Conclusion</h2>
<p>I hope this post gave you a better idea about how tokenizers may influence your RAG apps and why
should pay at least some attention to them. More importantly, I hope you now understand that
garbage-in garbage-out will not always pay the dividends you might expect in your agentic applications.</p>
<p>A little bit of cleaning of input text (you noticed the effect some empty space characters had on embeddings)
might go a long way: standardise the format your dates so they’re consistent throughout your embeddings; remove
trailing spaces wherever you can - you saw the effect they had on the embeddings; the same goes
for any other numerical data like prices in different currencies, etc..</p>
<p>I really hope one day we won’t have to think about tokenizers at all. I hope we can just throw it
away completely. That way we won’t have to deal with misspellings, random space characters, adversarial
attacks based on word perplexities, etc. A whole class of sadness would be eliminated overnight!</p>
<p>Until then, tokenize responsibly, my friends!</p>
<h2 id="references">References</h2>
<p>[1] <a href="https://huggingface.co/docs/transformers/en/tokenizer_summary">https://huggingface.co/docs/transformers/en/tokenizer_summary</a></p>
<p>[2] <a href="https://huggingface.co/learn/nlp-course/en/chapter6/8">https://huggingface.co/learn/nlp-course/en/chapter6/8</a></p>
<p>[3] <a href="https://www.datacamp.com/tutorial/how-transformers-work">https://www.datacamp.com/tutorial/how-transformers-work</a></p>
<p>[4] <a href="https://blog.scottlogic.com/2021/08/31/a-primer-on-the-openai-api-1.html">https://blog.scottlogic.com/2021/08/31/a-primer-on-the-openai-api-1.html</a></p>


        
          
        

        
            <hr>
            
        

        
          
            
          

          
                  <h4>See also</h4>
                  <ul>
                
                
                    <li><a href="https://cybernetist.com/2024/09/23/some-notes-on-adversarial-attacks-on-llms/">Some Notes on Adversarial Attacks on LLMs</a></li>
                
                    <li><a href="https://cybernetist.com/2024/05/13/using-cuelang-with-go-for-llm-data-extraction/">Using Cuelang With Go for LLM Data Extraction</a></li>
                
                    <li><a href="https://cybernetist.com/2024/04/25/go-or-rust-just-listen-to-the-bots/">Go or Rust? Just Listen to the Bots</a></li>
                
                    <li><a href="https://cybernetist.com/2024/04/22/builders-are-happier-what-happens-when-ai-takes-over/">Builders Are Happier But What Happens When AI Takes Over</a></li>
                
                    <li><a href="https://cybernetist.com/2024/03/27/a-small-tool-for-exploring-text-embeddings/">A Small Tool for Exploring Text Embeddings</a></li>
                
              </ul>

          
        
      </article>

      
        
      


      
        
          
          
          
        
        
      

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Huawei makes divorce from Android official with HarmonyOS NEXT launch (130 pts)]]></title>
            <link>https://www.theregister.com/2024/10/23/huaweis_harmonyos_next_launch/</link>
            <guid>41923387</guid>
            <pubDate>Wed, 23 Oct 2024 09:36:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theregister.com/2024/10/23/huaweis_harmonyos_next_launch/">https://www.theregister.com/2024/10/23/huaweis_harmonyos_next_launch/</a>, See on <a href="https://news.ycombinator.com/item?id=41923387">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
<p>Huawei formally launched its home-brewed operating system, HarmonyOS NEXT, on Wednesday, marking its official separation from the Android ecosystem.</p>
<p>Huawei <a target="_blank" rel="nofollow" href="https://www.huawei.com/cn/news/2024/10/harmonyos5">declared</a> it released and "officially started public beta testing" of the OS for some of its smartphones and tablets that run its own Kirin and Kunpeng chips.</p>
<p>Unlike previous iterations of HarmonyOS, HarmonyOS NEXT no longer supports Android apps.</p>

    

<p>Huawei maintains top Chinese outfits aren't deterred by that. It cited Meituan, Douyin, Taobao, Xiaohongshu, Alipay, and JD.com as among those who have developed native apps for the OS. In case you're not familiar, they're China's top shopping, payment, and social media apps.</p>
<ul>

<li><a href="https://www.theregister.com/2022/08/22/huawei_aims_harmony_os_at/">Huawei dangles developer incentives to sell Harmony OS around the world</a></li>

<li><a href="https://www.theregister.com/2021/06/03/huawei_harmonyos_2/">Huawei names first tablets, phones to run its Android-in-disguise HarmonyOS 2</a></li>

<li><a href="https://www.theregister.com/2024/10/22/tsmc_huawei_sanctions_report/">TSMC blows whistle on potential sanctions-busting shenanigans from Huawei</a></li>

<li><a href="https://www.theregister.com/2024/10/21/global_semiconductor_patents_surge/">China ramps up semiconductor patents amid US export restrictions</a></li>
</ul>
<p>Huawei also claimed that at the time of its announcement, over 15,000 HarmonyOS native applications and meta-services were also launched. That's a nice number, but well short of the millions of apps found on the Google Play Store and Apple's App Store.</p>
<p>The Chinese tech player also revealed that the operating system has 110 million lines of code and claimed it improves the overall performance of mobile devices running it by 30 percent. It also purportedly increases battery life by 56 minutes and leaves an average of 1.5GB of memory for purposes other than running the OS.</p>

        


        

<p>If you like the sound of that performance boost on your smartphone or tablet – the OS runs on both, with a consistent interface – we're sorry to report that Huawei told us it currently has no plans to offer Harmony OS NEXT outside of China. That's despite <a target="_blank" href="https://www.theregister.com/2024/04/22/huawei_harmonyos_expansion/">previously saying</a> it planned to take an older version of HarmonyOS offshore.</p>

<p>Huawei did try to export the last version of the OS – and even <a target="_blank" href="https://www.theregister.com/2022/08/22/huawei_aims_harmony_os_at/">offered</a> assistance to developers who coded for the platform and targeted offshore markets – without success.</p>
<p>But it has succeeded in having offshore entities develop for the platform: Singapore-based rideshare-and-more app Grab, and the airline Emirates, have created apps for the OS.</p>
<p>The release marks a moment in China's push for tech independence. Before the upgrade, Huawei's HarmonyOS still relied on the Android Open Source Project for core functionality – a move driven by 2019 US sanctions that blocked Huawei's access to Google Mobile Services. That dependency has now been ditched.</p>

        

<p>Huawei hopes to bring its OS to PCs, too. Last month the chair of the Chinese giant's consumer business group, Yu Chengdong, <a target="_blank" href="https://www.theregister.com/2024/09/23/asia_tech_news_in_brief/">revealed</a> it would no longer run Windows on its future machines, but Harmony OS instead. When such machines will emerge, and whether other PC-makers will use the OS, are unanswered questions. ®</p>                                
                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[What happens when you make a move in lichess.org? (198 pts)]]></title>
            <link>https://www.davidreis.me/2024/what-happens-when-you-make-a-move-in-lichess</link>
            <guid>41922928</guid>
            <pubDate>Wed, 23 Oct 2024 08:13:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.davidreis.me/2024/what-happens-when-you-make-a-move-in-lichess">https://www.davidreis.me/2024/what-happens-when-you-make-a-move-in-lichess</a>, See on <a href="https://news.ycombinator.com/item?id=41922928">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><p><span><span><span><a href="https://twitter.com/dreis_sw" target="_blank">@dreis_sw</a></span><span>|</span></span><span>September 23, 2024<!-- --> <span>(<!-- -->1m<!-- --> ago)</span></span></span><span><!--$--><!--/$--></span></p>
<p>Have you ever wondered what goes on behind the scenes every time you make a move in your favorite online chess platform?</p>
<p>Lichess.org is a popular, free, and open-source chess platform that attracts millions of players worldwide. Its seamless, real-time gameplay experience must be powered by a robust backend infrastructure. In this post, we'll peek behind the curtain and explore the technical processes involved when you play a move.</p>
<h2>Inspecting Network Activity with Chrome DevTools</h2>
<p>To understand the flow of data when making a move, we'll start by utilizing Chrome DevTools, particularly the <strong>Network</strong> tab, which allows us to monitor communication between the client (your browser) and the server.</p>
<h2>WebSocket Connections</h2>
<p>The first notable network activity is a WebSocket connection to a URL similar to:</p>
<div><pre><code><code>wss://socket2.lichess.org/play/H5uHz0egyvIA/v6?sri=bt6QzcyOiZg5&amp;v=0
</code></code></pre></div>
<p>The protocol, <strong><code>wss</code></strong>, indicates an encrypted websockets connection using TLS.</p>
<p>No surprises here, WebSockets are the obvious choice for real-time browser apps like online chess because they allow for full-duplex communication, enabling instant updates between the client and server without the overhead of repeated HTTP requests.</p>
<p>A few notable parameters in the URL:</p>
<ul>
<li><strong><code>H5uHz0egyvIA</code></strong>: The unique game ID. This ID is used to identify the game that we're connecting to.</li>
<li><strong><code>v</code></strong>: An incrementing counter representing the game's version from the client's perspective. More on this later.</li>
<li><strong><code>sri</code></strong>: A randomly generated string on each page load, possibly for session tracking or security purposes.</li>
</ul>
<p>Let's observe the network activity when we make a move.</p>
<h2>Local Player's Turn</h2>
<p>When we make a move, several packets of data are exchanged. Here's the first packet, sent by us:</p>
<div><pre><code><code><span>// Sent at 22:51:35.280</span>
<span>{</span> 
  <span>"t"</span><span>:</span> <span>"move"</span><span>,</span>
  <span>"d"</span><span>:</span> <span>{</span>
    <span>"u"</span><span>:</span> <span>"d2d4"</span><span>,</span>
    <span>"l"</span><span>:</span> <span>32</span><span>,</span>
    <span>"a"</span><span>:</span> <span>1</span>
  <span>}</span>
<span>}</span>
</code></code></pre></div>
<p>Clear enough, right? Let's break it down:</p>
<ul>
<li><strong><code>t</code>: "move"</strong>: Indicates the type of message.</li>
<li><strong><code>d</code></strong>: Data payload containing:<!-- -->
<ul>
<li><strong><code>u</code></strong>: The move in UCI<a href="#f1" id="s1">[<!-- -->1<!-- -->]</a> format.</li>
<li><strong><code>l</code></strong>: Probably some length?</li>
<li><strong><code>a</code></strong>: Acknowledgment counter to track message acknowledgments.</li>
</ul>
</li>
</ul>
<p>We then receive the following message:</p>
<div><pre><code><code><span>// Received at 22:51:35.312 </span>
<span>{</span> 
  <span>"t"</span><span>:</span> <span>"ack"</span><span>,</span>
  <span>"d"</span><span>:</span> <span>1</span>
<span>}</span>
</code></code></pre></div>
<p>This message from the server acknowledges that it has received our move. Notice that the <code>d</code> field contains the same acknowledgment counter we sent in our move message, in this case, <code>1</code>.</p>
<p>Right after, we receive the following message:</p>
<div><pre><code><code><span>// Received at 22:51:35.312 </span>
<span>{</span>
  <span>"t"</span><span>:</span> <span>"move"</span><span>,</span>
  <span>"v"</span><span>:</span> <span>1</span><span>,</span>
  <span>"d"</span><span>:</span> <span>{</span>
    <span>"uci"</span><span>:</span> <span>"d2d4"</span><span>,</span>
    <span>"san"</span><span>:</span> <span>"d4"</span><span>,</span>
    <span>"fen"</span><span>:</span> <span>"rnbqkbnr/pppppppp/8/8/3P4/8/PPP1PPPP/RNBQKBNR"</span><span>,</span>
    <span>"ply"</span><span>:</span> <span>1</span><span>,</span>
    <span>"clock"</span><span>:</span> <span>{</span>
      <span>"white"</span><span>:</span> <span>300</span><span>,</span>
      <span>"black"</span><span>:</span> <span>300</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></code></pre></div>
<p>This message provides details about the move we just made and the updated game state.</p>
<ul>
<li><strong><code>uci</code></strong>: Move in UCI<a href="#f1" id="s1">[<!-- -->1<!-- -->]</a> format.</li>
<li><strong><code>san</code></strong>: Move in SAN<a href="#f2" id="s2">[<!-- -->2<!-- -->]</a> format.</li>
<li><strong><code>fen</code></strong>: FEN<a href="#f3" id="s3">[<!-- -->3<!-- -->]</a> string representing the current state of the game.</li>
<li><strong><code>ply</code></strong>: Number of half-moves made in the game.</li>
<li><strong><code>clock</code></strong>: Remaining time for each player. Since the game just started, both players have 300 seconds.</li>
</ul>
<p>In summary, when a move is made, the client sends a move message, receives an acknowledgment, and then receives a detailed update about the move and the game's new state.</p>
<h2>Opponent's Turn</h2>
<p>When the opponent makes a move, we receive a similar packet from the server.</p>
<div><pre><code><code><span>// Received at 22:51:43.489 </span>
<span>{</span>
  <span>"t"</span><span>:</span> <span>"move"</span><span>,</span>
  <span>"v"</span><span>:</span> <span>2</span><span>,</span>
  <span>"d"</span><span>:</span> <span>{</span>
    <span>"uci"</span><span>:</span> <span>"d7d5"</span><span>,</span>
    <span>"san"</span><span>:</span> <span>"d5"</span><span>,</span>
    <span>"fen"</span><span>:</span> <span>"rnbqkbnr/ppp1pppp/8/3p4/3P4/8/PPP1PPPP/RNBQKBNR"</span><span>,</span>
    <span>"ply"</span><span>:</span> <span>2</span><span>,</span>
    <span>"dests"</span><span>:</span> <span>{</span>
      <span>"c2"</span><span>:</span> <span>"c3c4"</span><span>,</span>
      <span>"g2"</span><span>:</span> <span>"g3g4"</span>
      <span>// .. additional possible moves</span>
    <span>}</span><span>,</span>
    <span>"clock"</span><span>:</span> <span>{</span>
      <span>"white"</span><span>:</span> <span>300</span><span>,</span>
      <span>"black"</span><span>:</span> <span>300</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></code></pre></div>
<p>One key difference is the <code>dests</code> parameter, which lists all possible moves available from the current position. This parameter is used to highlight the possible moves on the chessboard that we can make after our opponent's move.</p>
<p>While these moves could be calculated client-side, providing them server-side ensures consistency - especially for complex or esoteric chess variants - and optimizes performance on clients with limited processing capabilities or energy restrictions.</p>
<p>Now that we've analysed the network activity, let's look into the backend architecture that powers these real-time interactions.</p>
<h2>Lichess's Architecture</h2>
<p>Lichess's real-time playing system is primarily composed of two main services (both written in Scala):</p>
<ol>
<li><strong><code>lila</code></strong>: Core service that manages game logic, state, user interactions, and other fundamental functionalities. Without it, the lichess.org website would be unable to function.</li>
<li><strong><code>lila-ws</code></strong>: Specialized service responsible for handling WebSocket connections, acting as a bridge between the client and <code>lila</code>. This service knows as little as possible about chess.</li>
</ol>
<h2>Architecture Overview</h2>
<p>From the <code>lila-ws</code> readme:</p>
<div><pre><code><code>lila &lt;-&gt; redis &lt;-&gt; lila-ws &lt;-&gt; websocket &lt;-&gt; client
</code></code></pre></div>
<p>As this implies, <code>lila</code> communicates with <code>lila-ws</code> through Redis, which in turn manages WebSocket connections with clients.</p>
<p>If <code>lila</code> is momentarily down, <code>lila-ws</code> can still handle WebSocket connections and maintain real-time communication with clients (perhaps features like chat would still work!). Conversely, if <code>lila-ws</code> is down, the lichess.org website will still be online, but you won't be able to play games.</p>
<p>This separation also allows for independent scaling of the two components.</p>
<h2>Communication using Redis Pub/Sub</h2>
<p>The move event is published to a <a target="_blank" href="https://redis.io/docs/latest/develop/interact/pubsub/">Redis Pub/Sub</a> channel, to which <code>lila</code> is subscribed and processes the move.</p>
<p>Redis Pub/Sub offers <em><strong>at-most-once</strong></em> delivery. This means that each message is delivered no more than once to each subscriber, if at all. If a subscriber fails while processing a message, that message is lost and not re-delivered. This has the benefit that once a message is delivered, it can be removed from Redis, reducing memory usage. However, it also means that message loss is possible.</p>
<p><a target="_blank" href="https://redis.io/docs/latest/develop/data-types/streams/">Redis Streams</a> could be used to provide <em><strong>at-least-once</strong></em> delivery, ensuring that messages are not lost even if a subscriber fails. However, this would increase memory usage and complexity.</p>
<h2>Eventual Data Persistence with MongoDB</h2>
<p>While <code>lila</code> primarily stores game states in MongoDB, it optimizes database load by <strong>not saving every single move immediately</strong>. Instead, it buffers progress by accumulating moves and periodically saving them unless a significant event occurs, such as a game conclusion. This strategy lightens the load on the database while maintaining data integrity.</p>
<div><pre><code><code><span><span>def</span> <span>save</span></span>(progress: <span>Progress</span>): <span>Funit</span> =
  <span>// Saves the latest game state to a variable. Used for basing the following moves on.</span>
  set(progress.game)
  
  <span>// Prepares the dirty progress to be saved to the database.</span>
  dirtyProgress = dirtyProgress.fold(progress.dropEvents)(_.withGame(progress.game)).some
  
  <span>// If there are special events, such as a resignation, the game state is flushed.</span>
  <span>if</span> shouldFlushProgress(progress) <span>then</span> flushProgress() 
  
  <span>// Otherwise, the game state is scheduled to be stored to the DB after a delay.</span>
  <span>else</span> fuccess(scheduleFlushProgress())
</code></code></pre></div>
<h2>Joining a Game In Progress</h2>
<p>As mentioned earlier, when a player connects, they provide the <code>v</code> parameter, which tells the system the latest version of the game they know about. Since the game state in MongoDB syncs up eventually (and your opponent might move just as you join), a player might initially get a state that's a bit behind the latest action.</p>
<p>To handle this, <code>lila-ws</code> uses a trusty <code>java.util.concurrent.ConcurrentHashMap</code>:</p>
<ul>
<li><strong>Key</strong>: Game ID.</li>
<li><strong>Value</strong>: List of ordered and versioned events for that game.</li>
</ul>
<p>This setup keeps track of all events for any ongoing game and clears them once the game wraps up. It helps players reconnect to an active game by giving them all the events they need from point <code>v</code> onwards, without missing any or doubling up. Understandably, it has to be a concurrency-safe data structure, since multiple threads can be serving multiple players at the same time.</p>
<h2>Wrapping Up</h2>
<p>We are now ready to sum up the process of making a move in Lichess:</p>
<ol>
<li>
<span><strong>Client Connection</strong></span>
<p>The client establishes a WebSocket connection to <code>lila-ws</code> at a URL like <code>wss://socket2.lichess.org/play/...</code>.</p>
</li>
<li>
<span><strong>Sending a Move</strong></span>
<p>When a player makes a move, the client sends a move event to <code>lila-ws</code> with details like the move's UCI string and acknowledgment counter.</p>
</li>
<li>
<span><strong>Acknowledgment</strong></span>
<p><code>lila-ws</code> responds with an acknowledgment (<code>ack</code>) to confirm that the move has been received.</p>
</li>
<li>
<span><strong>Publishing to Redis</strong></span>
<p>The move event is published to a Redis Pub/Sub channel, to which <code>lila</code> is listening and processes the move.</p>
</li>
<li>
<span><strong>Updating Game State</strong></span>
<p><code>lila</code> receives the move, updates the game state accordingly, and (eventually) stores it in a MongoDB database. An updated game state is then sent back through <code>lila-ws</code> to the client.</p>
</li>
<li>
<span><strong>Client Receives Update</strong></span>
<p>The client receives the updated game state, reflecting the new move and any changes in the game's status.</p>
</li>
</ol>

<p><em>Thank you for reading! If you have any questions or further insights, feel free to reach out.</em></p>
<div><p>1<!-- -->.<!-- --> <a href="#s1" id="f1">^</a> <strong>UCI (Universal Chess Interface)</strong>: A standard format for encoding chess moves, useful for computer processing. <a target="_blank" href="https://en.wikipedia.org/wiki/Universal_Chess_Interface">Learn more</a>.</p><p>2<!-- -->.<!-- --> <a href="#s2" id="f2">^</a> <strong>SAN (Standard Algebraic Notation)</strong>: A human-readable format for chess moves. Compared to UCI, this move requires chess knowledge, since it doesn't specify the piece moved. <a target="_blank" href="https://en.wikipedia.org/wiki/Algebraic_notation_(chess)">Learn more</a>.</p><p>3<!-- -->.<!-- --> <a href="#s3" id="f3">^</a> <strong>FEN (Forsyth-Edwards Notation)</strong>: Encodes the entire game state, including piece positions, turn order, castling rights, and more. <a target="_blank" href="https://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation">Learn more</a>.</p></div></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Adding row polymorphism to Damas-Hindley-Milner (198 pts)]]></title>
            <link>https://bernsteinbear.com/blog/row-poly/</link>
            <guid>41922081</guid>
            <pubDate>Wed, 23 Oct 2024 05:26:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://bernsteinbear.com/blog/row-poly/">https://bernsteinbear.com/blog/row-poly/</a>, See on <a href="https://news.ycombinator.com/item?id=41922081">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <h2 id="intro-to-hm">Intro to HM</h2>

<p>Damas-Hindley-Milner (HM) is a type system for Standard ML and the ML-family
languages. River and I <a href="https://bernsteinbear.com/blog/type-inference">wrote about it</a> earlier this
month. Check out that post if you would like an introduction or refresher. In
this post, we’ll add <em>row polymorphism</em> to it. We’ll do it in the context of
Algorithm J, but the core ideas should be algorithm-independent.</p>

<h2 id="records">Records</h2>

<p>A record is an unordered collection of <em>name</em> to <em>value</em> mappings, like <code>{ x =
1, y = "hello" }</code>. Scrapscript has a very dynamic notion of records in the
interpreter and the compiler: any record can have any number of fields, with
any names, with any values. This makes code like the following possible:</p>

<div><pre><code>get_x { x=1, y=2 }
. get_x =
  | { x=x, ... } -&gt; x
</code></pre></div>

<p>At run-time, the pattern matching looks for a field named <code>x</code> in the record and
ignores the rest. The spread (<code>...</code>) indicates that it’s okay to also have
other fields in the record. If the pattern were instead <code>{ x=x }</code>, then the
match would fail at run-time due to excess fields.</p>

<p>The following snippet also runs even though <code>left</code> and <code>right</code> have different
leftover record parts:</p>

<div><pre><code>get_x left + get_x right
. left  = { x = 1, y = 2 }
. right = { x = 1, y = 2, z = 3 }
. get_x = | { x = x, ... } -&gt; x
</code></pre></div>

<p>This “leftover” bit isn’t straightforward to model in the type system. We’ll
need some special sauce there.</p>

<p>Right now, in the type system, we don’t support records at all. If we try to
infer the type of one, it’ll fail with “unsupported” or something. We need to
model records in the type system.</p>

<h2 id="rows">Rows</h2>

<p>A lot of papers use a notion of <em>rows</em> to model records, kind of how you can
use cons cells to model lists. A <em>row</em> is a mapping of names to types, like
<code>{x=int, y=string}</code>. Rows also have a special field called <em>rest</em> which
contains the type of the leftover fields. It’s either a type variable or the
<em>empty row</em>.</p>

<p>Having the empty row means that the record has no leftover fields. In fact, the
example row above (<code>{x=int, y=string}</code>) is assumed to have the empty row as its
<em>rest</em> field because all of these papers love shorthand. If it were extensible,
if it had a type variable as its <em>rest</em> field, then it would be written as
<code>{x=int, y=string, ...'a}</code>.</p>

<p>This does mean that it’s possible to have nested rows like <code>{x=int,
...'a={y=string, ...'b}}</code>. This is normal but you’ll never see it in notation
because everybody <strong>implicitly flattens the rows</strong> because it looks nicer. Also
because unification happens on the flattened rows, but we’ll get there later.
Now let’s talk about the data structures we’ll use to implement rows. We’ll
reuse some of the data structures from the intro-to-HM post.</p>

<h2 id="the-data-structures">The data structures</h2>

<p>It’s as I said: a row is either an empty row (<code>TyEmptyRow</code>) or has fields and a
leftover/rest field (<code>TyRow</code>).</p>

<div><pre><code><span>@</span><span>dataclasses</span><span>.</span><span>dataclass</span>
<span>class</span> <span>TyEmptyRow</span><span>(</span><span>MonoType</span><span>):</span>
    <span>pass</span>

<span>@</span><span>dataclasses</span><span>.</span><span>dataclass</span>
<span>class</span> <span>TyRow</span><span>(</span><span>MonoType</span><span>):</span>
    <span>fields</span><span>:</span> <span>dict</span><span>[</span><span>str</span><span>,</span> <span>MonoType</span><span>]</span>
    <span>rest</span><span>:</span> <span>TyVar</span> <span>|</span> <span>TyEmptyRow</span> <span>=</span> <span>dataclasses</span><span>.</span><span>field</span><span>(</span><span>default_factory</span><span>=</span><span>TyEmptyRow</span><span>)</span>
</code></pre></div>

<p>In order to unify and print rows, we’ll often deal with them in their flattened
representation, which is a collapsed tuple of fields and a rest type. One key
difference: because it is collapsed, the <em>rest</em> must be either the empty row or
an <strong>unbound</strong> type variable.</p>

<p>Also: not everybody uses the exact same representation. Some go for more
cons-cell-like representations where every row has a <code>label</code> and a <code>type</code> and
then a <code>rest</code>—no <code>fields</code> dict. They’re equivalent.</p>

<h2 id="inferring-record-literals">Inferring record literals</h2>

<p>When we’re inferring the type of a record literal, we infer the types of the
values and then construct a row from them. We should never see a <code>...</code> in a
record literal because we only support it in pattern matching.</p>

<div><pre><code><span>def</span> <span>infer_type</span><span>(</span><span>expr</span><span>:</span> <span>Object</span><span>,</span> <span>ctx</span><span>:</span> <span>Context</span><span>)</span> <span>-&gt;</span> <span>MonoType</span><span>:</span>
    <span># ...
</span>    <span>if</span> <span>isinstance</span><span>(</span><span>expr</span><span>,</span> <span>Record</span><span>):</span>
        <span>fields</span> <span>=</span> <span>{}</span>
        <span>rest</span><span>:</span> <span>TyVar</span> <span>|</span> <span>TyEmptyRow</span> <span>=</span> <span>TyEmptyRow</span><span>()</span>
        <span>for</span> <span>key</span><span>,</span> <span>value</span> <span>in</span> <span>expr</span><span>.</span><span>data</span><span>.</span><span>items</span><span>():</span>
            <span>assert</span> <span>not</span> <span>isinstance</span><span>(</span><span>value</span><span>,</span> <span>Spread</span><span>)</span>
            <span>fields</span><span>[</span><span>key</span><span>]</span> <span>=</span> <span>infer_type</span><span>(</span><span>value</span><span>,</span> <span>ctx</span><span>)</span>
        <span>return</span> <span>set_type</span><span>(</span><span>expr</span><span>,</span> <span>TyRow</span><span>(</span><span>fields</span><span>,</span> <span>rest</span><span>))</span>
    <span># ...
</span></code></pre></div>

<h2 id="pattern-matching-on-records">Pattern matching on records</h2>

<p>Pattern matching inference changed a little bit since the last post but not
enough to make a big deal out of it. We now use this kind-of-similar
<code>infer_pattern_type</code> function to infer the type of a pattern. It looks similar
to <code>infer_type</code> but it’s a little more complicated because it has to invent
fresh type variables for all variables in the pattern and it also has to deal
with spread.</p>

<p>In the case of records, we default to building a closed row. However, if we see
a spread, we invent a fresh type variable and use that as the <em>rest</em> of the
row.</p>

<div><pre><code><span>def</span> <span>infer_pattern_type</span><span>(</span><span>pattern</span><span>:</span> <span>Object</span><span>,</span> <span>ctx</span><span>:</span> <span>Context</span><span>)</span> <span>-&gt;</span> <span>MonoType</span><span>:</span>
    <span># ...
</span>    <span>if</span> <span>isinstance</span><span>(</span><span>pattern</span><span>,</span> <span>Record</span><span>):</span>
        <span>fields</span> <span>=</span> <span>{}</span>
        <span>rest</span><span>:</span> <span>TyVar</span> <span>|</span> <span>TyEmptyRow</span> <span>=</span> <span>TyEmptyRow</span><span>()</span>  <span># Default closed row
</span>        <span>for</span> <span>key</span><span>,</span> <span>value</span> <span>in</span> <span>pattern</span><span>.</span><span>data</span><span>.</span><span>items</span><span>():</span>
            <span>if</span> <span>isinstance</span><span>(</span><span>value</span><span>,</span> <span>Spread</span><span>):</span>
                <span># Open row
</span>                <span>rest</span> <span>=</span> <span>fresh_tyvar</span><span>()</span>
                <span>if</span> <span>value</span><span>.</span><span>name</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
                    <span>ctx</span><span>[</span><span>value</span><span>.</span><span>name</span><span>]</span> <span>=</span> <span>Forall</span><span>([],</span> <span>rest</span><span>)</span>
                <span>break</span>
            <span>fields</span><span>[</span><span>key</span><span>]</span> <span>=</span> <span>infer_pattern_type</span><span>(</span><span>value</span><span>,</span> <span>ctx</span><span>)</span>
        <span>return</span> <span>set_type</span><span>(</span><span>pattern</span><span>,</span> <span>TyRow</span><span>(</span><span>fields</span><span>,</span> <span>rest</span><span>))</span>
    <span># ...
</span></code></pre></div>

<p>We also bind the <em>rest</em> variable to the name of the spread, if it’s named. This
means we can do stuff like <code>| { x=x, ...rest } -&gt; something</code> and then use
<code>rest</code> in the <code>something</code> expression.</p>

<h2 id="unifying-rows-building-intuition">Unifying rows: building intuition</h2>

<p>I don’t want to get too into it yet, but I want to explain that rows aren’t
special in unification. I thought that there was some quirk or trick in the
representation that enabled row polymorphism, but that’s not the case <em>at all</em>
(shout-out to <a href="https://osa1.net/">Sinan</a> and <a href="https://k-monk.org/">River</a> for making this clear).</p>

<p>Unification is just unification. Whatever types it gets, it <em>will</em> make them
equal. Permanently. If it can’t, there’s a type error. Let’s look at some
examples:</p>

<ul>
  <li><code>{x=int}</code> unifies with <code>{x=int}</code></li>
  <li><code>{x=int}</code> <strong>does not</strong> unify with <code>{x=string}</code> because the types that
correspond with <code>x</code> don’t unify
    <ul>
      <li>Some type systems allow this by having a notion of “type sets” and I think
this might be related to polymorphic variants but I’m not sure</li>
    </ul>
  </li>
  <li><code>{x=int}</code> <strong>does not</strong> unify with <code>{y=string}</code> because the fields don’t match
and they are not extensible</li>
  <li><code>{x=int, ...'a}</code> unifies with <code>{y=string, ...'b}</code>
    <ul>
      <li>unification will set <code>'a</code> equal to <code>{y=string, ...'c}</code> and <code>'b</code> equal to <code>{x=int, ...'c}</code></li>
      <li>note how they both get the same leftover row <code>'c</code> because they are
<em>unified</em> and supposed to <em>stay that way</em></li>
    </ul>
  </li>
</ul>

<p>Okay, so that means that if you have a function that is meant to be generic
over a single field, how does that work? How can you have <code>| {x=x, ...} -&gt; x</code>
if for every call to that function, the type of <code>...</code> keeps expanding as it is
unified? It might start as <code>{x=int, ...'a} -&gt; int</code> but over time <code>'a</code> will get bound
to other row types and it might end up as <code>{x=int, y=int, z=int, ...'d}</code> and
that will be too restrictive! <em>What’s going on??</em></p>

<h2 id="let-polymorphism">Let polymorphism</h2>

<p>What’s actually happening is boring: let polymorphism strikes once again. We
talked about let polymorphism in the last post, but here’s a refresher: if you
have an unbound type variable in a let-bound function type, it will get
generalized with a <code>forall</code>.</p>

<p>Have a function <code>'a list -&gt; 'a</code>? Well, the type in the context (the environment
that deals in type variables) is actually <code>forall 'a. 'a list -&gt; 'a</code>. Every use
of that named function will <em>instantiate</em> that <code>forall</code> with a fresh type
variable (maybe <code>'b</code> or <code>'t123</code> or whatever). This means that the same function
can be generic over one or more type variables. Great.</p>

<p>So that pattern match function above? The one with type <code>{x=int, ...'a} -&gt;
int</code>? Well, if it’s bound to a name, it will get generalized to <code>forall 'a.
{x=int, ...'a} -&gt; int</code>. So every call, well… you know the rest. That’s row
polymorphism.</p>

<h2 id="unifying-rows-brass-tacks">Unifying rows: brass tacks</h2>

<p>Alright, well, assuming we have what I thought was the hard part done already,
let’s go over unification in excruciating detail. We’ll start with a neat
little base case: empty rows can only unify with other empty rows:</p>

<div><pre><code><span>def</span> <span>unify_type</span><span>(</span><span>ty1</span><span>:</span> <span>MonoType</span><span>,</span> <span>ty2</span><span>:</span> <span>MonoType</span><span>)</span> <span>-&gt;</span> <span>None</span><span>:</span>
    <span># ...
</span>    <span>if</span> <span>isinstance</span><span>(</span><span>ty1</span><span>,</span> <span>TyEmptyRow</span><span>)</span> <span>and</span> <span>isinstance</span><span>(</span><span>ty2</span><span>,</span> <span>TyEmptyRow</span><span>):</span>
        <span>return</span>
    <span># ...
</span></code></pre></div>

<p>Yay, nice. Let’s continue. We’ll start by flattenening the rows.</p>

<p>For every field name present in either row, we’ll try to unify the types
pairwise. But if it’s missing in one of the rows, we have to add it to the
other one. So we collect that in <code>ty1_missing</code> (missing from <code>ty1</code>) and
<code>ty2_missing</code> (missing from <code>ty2</code>).</p>

<p>This leaves us with four cases:</p>

<ol>
  <li>Both rows have all the same fields. In that case, we unify the <em>rest</em>s so
they stay the same.</li>
  <li>One row has all the same fields as the other and also some more. In that
case, add the missing fields to the other (smaller) row. Note that they
share a <em>rest</em>.</li>
  <li>The same, but flipped the other direction.</li>
  <li>They each have fields the other lacks. In that case, create new rows with
the missing fields and share a <em>rest</em>.</li>
</ol>

<p>Now follow along in code:</p>

<div><pre><code><span>def</span> <span>unify_type</span><span>(</span><span>ty1</span><span>:</span> <span>MonoType</span><span>,</span> <span>ty2</span><span>:</span> <span>MonoType</span><span>)</span> <span>-&gt;</span> <span>None</span><span>:</span>
    <span># ...
</span>    <span>if</span> <span>isinstance</span><span>(</span><span>ty1</span><span>,</span> <span>TyRow</span><span>)</span> <span>and</span> <span>isinstance</span><span>(</span><span>ty2</span><span>,</span> <span>TyRow</span><span>):</span>
        <span>ty1_fields</span><span>,</span> <span>ty1_rest</span> <span>=</span> <span>row_flatten</span><span>(</span><span>ty1</span><span>)</span>
        <span>ty2_fields</span><span>,</span> <span>ty2_rest</span> <span>=</span> <span>row_flatten</span><span>(</span><span>ty2</span><span>)</span>
        <span>ty1_missing</span> <span>=</span> <span>{}</span>
        <span>ty2_missing</span> <span>=</span> <span>{}</span>
        <span>all_field_names</span> <span>=</span> <span>set</span><span>(</span><span>ty1_fields</span><span>.</span><span>keys</span><span>())</span> <span>|</span> <span>set</span><span>(</span><span>ty2_fields</span><span>.</span><span>keys</span><span>())</span>
        <span>for</span> <span>key</span> <span>in</span> <span>sorted</span><span>(</span><span>all_field_names</span><span>):</span>  <span># Sort for deterministic error messages
</span>            <span>ty1_val</span> <span>=</span> <span>ty1_fields</span><span>.</span><span>get</span><span>(</span><span>key</span><span>)</span>
            <span>ty2_val</span> <span>=</span> <span>ty2_fields</span><span>.</span><span>get</span><span>(</span><span>key</span><span>)</span>
            <span>if</span> <span>ty1_val</span> <span>is</span> <span>not</span> <span>None</span> <span>and</span> <span>ty2_val</span> <span>is</span> <span>not</span> <span>None</span><span>:</span>
                <span>unify_type</span><span>(</span><span>ty1_val</span><span>,</span> <span>ty2_val</span><span>)</span>
            <span>elif</span> <span>ty1_val</span> <span>is</span> <span>None</span><span>:</span>
                <span>assert</span> <span>ty2_val</span> <span>is</span> <span>not</span> <span>None</span>
                <span>ty1_missing</span><span>[</span><span>key</span><span>]</span> <span>=</span> <span>ty2_val</span>
            <span>elif</span> <span>ty2_val</span> <span>is</span> <span>None</span><span>:</span>
                <span>assert</span> <span>ty1_val</span> <span>is</span> <span>not</span> <span>None</span>
                <span>ty2_missing</span><span>[</span><span>key</span><span>]</span> <span>=</span> <span>ty1_val</span>
        <span># In general, we want to:
</span>        <span># 1) Add missing fields from one row to the other row
</span>        <span># 2) "Keep the rows unified" by linking each row's rest to the other
</span>        <span>#    row's rest
</span>        <span>if</span> <span>not</span> <span>ty1_missing</span> <span>and</span> <span>not</span> <span>ty2_missing</span><span>:</span>
            <span># They both have the same fields for now, so make sure they have
</span>            <span># the same fields *forever* by unifying the rests.
</span>            <span>unify_type</span><span>(</span><span>ty1_rest</span><span>,</span> <span>ty2_rest</span><span>)</span>
            <span>return</span>
        <span>if</span> <span>not</span> <span>ty1_missing</span><span>:</span>
            <span># The first row has fields that the second row doesn't have; add
</span>            <span># them to the second row
</span>            <span>unify_type</span><span>(</span><span>ty2_rest</span><span>,</span> <span>TyRow</span><span>(</span><span>ty2_missing</span><span>,</span> <span>ty1_rest</span><span>))</span>
            <span>return</span>
        <span>if</span> <span>not</span> <span>ty2_missing</span><span>:</span>
            <span># The second row has fields that the first row doesn't have; add
</span>            <span># them to the first row
</span>            <span>unify_type</span><span>(</span><span>ty1_rest</span><span>,</span> <span>TyRow</span><span>(</span><span>ty1_missing</span><span>,</span> <span>ty2_rest</span><span>))</span>
            <span>return</span>
        <span># They each have fields the other lacks; create new rows sharing a rest
</span>        <span># and add the missing fields to each row
</span>        <span>rest</span> <span>=</span> <span>fresh_tyvar</span><span>()</span>
        <span>unify_type</span><span>(</span><span>ty1_rest</span><span>,</span> <span>TyRow</span><span>(</span><span>ty1_missing</span><span>,</span> <span>rest</span><span>))</span>
        <span>unify_type</span><span>(</span><span>ty2_rest</span><span>,</span> <span>TyRow</span><span>(</span><span>ty2_missing</span><span>,</span> <span>rest</span><span>))</span>
        <span>return</span>
    <span># ...
</span></code></pre></div>

<p>There’s a lot of code but the important thing to know is that both rows are
going to end up with the same fields and the same rest type.</p>

<h2 id="wrapping-up">Wrapping up</h2>

<p>There you have it. That constitutes row polymorphism. There’s some other stuff
we don’t need to get into because Scrapscript doesn’t have some language
features. For example, Daan Leijen of scoped labels fame <a href="https://news.ycombinator.com/item?id=41857230">jumped into the
Hacker News thread</a> to explain
why we might not need scoped/shadowed/duplicate labels:</p>

<blockquote>
  <p>About duplicate labels.. one needs to retain the duplicate field at runtime
<em>if</em> there is a “remove_l” or “mask_l” operation that drops a field “l”. For
example, <code>{x=2,x=True}.remove_x.x</code> == <code>True</code>. (Where the type of <code>remove_l</code>
is <code>{l:a|r} -&gt; {r}</code>)</p>
</blockquote>

<p>Since we don’t have such a masking operation, our lives are easier. Cool.</p>

<p>We’ve heard that we can use rows to implement polymorphic variants, but haven’t
figured that part out yet…</p>

<!--
## Variants

Scrapscript supports variants or tags similar to OCaml's notion of [polymorphic
variants](https://ocaml.org/manual/5.2/polyvariant.html). We don't have any
encoding in the type system for these right now.

We're currently reading:

* [Programming with Polymorphic Variants](https://caml.inria.fr/pub/papers/garrigue-polymorphic_variants-ml98.pdf) (PDF, 1998)
* [Restrictable Variants: A Simple and Practical Alternative to Extensible Variants](https://drops.dagstuhl.de/storage/00lipics/lipics-vol263-ecoop2023/LIPIcs.ECOOP.2023.17/LIPIcs.ECOOP.2023.17.pdf) (PDF, 2003)

Please recommend additional papers, blog posts, and implementations.
-->

<h2 id="see-also">See also</h2>

<p>Check out the <a href="https://github.com/tekknolagi/scrapscript/pull/197">Scrapscript
PR</a>.</p>

<p>Our row polymorphism references are the same as last time, repeated here:</p>

<ul>
  <li><a href="https://web.cecs.pdx.edu/~mpj/pubs/96-3.pdf">A Polymorphic Type System for Extensible Records and Variants</a> (PDF, 1996)</li>
  <li><a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/scopedlabels.pdf">Extensible records with scoped labels</a> (PDF, 2005)</li>
  <li><a href="https://dl.acm.org/doi/pdf/10.1145/1159803.1159836">Extensible Programming with First-Class Cases</a> (PDF, 2006)</li>
  <li><a href="https://dl.acm.org/doi/10.1145/2951913.2951928">Set-Theoretic Types for Polymorphic Variants</a> (2016)</li>
  <li><a href="https://arxiv.org/pdf/1812.11665">Generic programming in OCaml</a> (PDF, 2018)</li>
  <li><a href="https://dl.acm.org/doi/pdf/10.1145/3290325">Abstracting extensible data types: or, rows by any other name</a> (PDF, 2019)
    <ul>
      <li>Incredible paper title</li>
    </ul>
  </li>
  <li><a href="https://dl.acm.org/doi/abs/10.1145/3622836">Structural Subtyping as Parametric Polymorphism</a> (PDF, 2023)</li>
  <li><a href="https://osa1.net/posts/2023-01-23-fast-polymorphic-record-access.html">Fast polymorphic record access</a> (2023)</li>
</ul>

<p>Please recommend additional papers, blog posts, and implementations.</p>

        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[One Square Minesweeper (102 pts)]]></title>
            <link>https://onesquareminesweeper.com/</link>
            <guid>41921703</guid>
            <pubDate>Wed, 23 Oct 2024 04:05:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://onesquareminesweeper.com/">https://onesquareminesweeper.com/</a>, See on <a href="https://news.ycombinator.com/item?id=41921703">Hacker News</a></p>
<div id="readability-page-1" class="page">
    <div>
        <header>
          <img alt="Mine" src="https://onesquareminesweeper.com/img/minesweeper-icon.png">Minesweeper
        </header>
        <div>
          <div>
              <p><img src="https://onesquareminesweeper.com/img/display-digit-0.png">
                <img src="https://onesquareminesweeper.com/img/display-digit-0.png">
                <img src="https://onesquareminesweeper.com/img/display-digit-1.png">
              </p>
              <p><img src="https://onesquareminesweeper.com/img/display-digit-0.png">
                <img src="https://onesquareminesweeper.com/img/display-digit-0.png">
                <img src="https://onesquareminesweeper.com/img/display-digit-0.png">
              </p>
            </div>
          
        </div>
      </div>

    <p><img src="https://onesquareminesweeper.com/img/face-clicking.png">
      <img src="https://onesquareminesweeper.com/img/face-lost.png">
      <img src="https://onesquareminesweeper.com/img/face-won.png">
      <img src="https://onesquareminesweeper.com/img/face-active.png">
      <img src="https://onesquareminesweeper.com/img/cell-0.png">
      <img src="https://onesquareminesweeper.com/img/mine-exploded.png">
      <img src="https://onesquareminesweeper.com/img/cell-flagged.png">
    </p>

    

    <div><p>
        A <a href="https://theuselessweb.com/" target="_blank">Useless Web</a> Project
      </p></div>

    
  

</div>]]></description>
        </item>
    </channel>
</rss>