<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 21 Apr 2024 20:00:18 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Penzai: JAX research toolkit for building, editing, and visualizing neural nets (101 pts)]]></title>
            <link>https://github.com/google-deepmind/penzai</link>
            <guid>40107007</guid>
            <pubDate>Sun, 21 Apr 2024 16:28:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/google-deepmind/penzai">https://github.com/google-deepmind/penzai</a>, See on <a href="https://news.ycombinator.com/item?id=40107007">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">Penzai</h2><a id="user-content-penzai" aria-label="Permalink: Penzai" href="#penzai"></a></p>
<blockquote>
<p dir="auto"><strong>盆 ("pen", tray) 栽 ("zai", planting)</strong> - <em>an ancient Chinese art of forming
trees and landscapes in miniature, also called penjing and an ancestor of the
Japanese art of bonsai.</em></p>
</blockquote>
<p dir="auto">Penzai is a JAX library for writing models as legible, functional pytree data
structures, along with tools for visualizing, modifying, and analyzing them.
Penzai focuses on <strong>making it easy to do stuff with models after they have been
trained</strong>, making it a great choice for research involving reverse-engineering
or ablating model components, inspecting and probing internal activations,
performing model surgery, debugging architectures, and more. (But if you just
want to build and train a model, you can do that too!)</p>
<p dir="auto">With Penzai, your neural networks could look like this:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google-deepmind/penzai/blob/main/docs/_static/readme_teaser.png"><img src="https://github.com/google-deepmind/penzai/raw/main/docs/_static/readme_teaser.png" alt="Screenshot of the Gemma model in Penzai"></a></p>
<p dir="auto">Penzai is structured as a collection of modular tools, designed together but
each useable independently:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>penzai.nn</code> (<code>pz.nn</code>): A declarative combinator-based neural network
library and an alternative to other neural network libraries like Flax, Haiku,
Keras, or Equinox, which exposes the full structure of your model's
forward pass in the model pytree. This means you can see everything your model
does by pretty printing it, and inject new runtime logic with <code>jax.tree_util</code>.
Like Equinox, there's no magic: models are just callable pytrees under the
hood.</p>
</li>
<li>
<p dir="auto"><code>penzai.treescope</code> (<code>pz.ts</code>): A superpowered interactive Python
pretty-printer, which works as a drop-in replacement for the ordinary
IPython/Colab renderer. It's designed to help understand Penzai models and
other deeply-nested JAX pytrees, with built-in support for visualizing
arbitrary-dimensional NDArrays.</p>
</li>
<li>
<p dir="auto"><code>penzai.core.selectors</code> (<code>pz.select</code>): A pytree swiss-army-knife,
generalizing JAX's <code>.at[...].set(...)</code> syntax to arbitrary type-driven
pytree traversals, and making it easy to do complex rewrites or
on-the-fly patching of Penzai models and other data structures.</p>
</li>
<li>
<p dir="auto"><code>penzai.core.named_axes</code> (<code>pz.nx</code>): A lightweight named axis system which
lifts ordinary JAX functions to vectorize over named axes, and allows you to
seamlessly switch between named and positional programming styles without
having to learn a new array API.</p>
</li>
<li>
<p dir="auto"><code>penzai.data_effects</code> (<code>pz.de</code>): An opt-in system for side arguments, random
numbers, and state variables that is built on pytree traversal and puts you
in control, without getting in the way of writing or using your model.</p>
</li>
</ul>
<p dir="auto">Documentation on Penzai can be found at
<a href="https://penzai.readthedocs.io/" rel="nofollow">https://penzai.readthedocs.io</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Getting Started</h2><a id="user-content-getting-started" aria-label="Permalink: Getting Started" href="#getting-started"></a></p>
<p dir="auto">If you haven't already installed JAX, you should do that first, since the
installation process depends on your platform. You can find instructions in the
<a href="https://jax.readthedocs.io/en/latest/installation.html" rel="nofollow">JAX documentation</a>.
Afterward, you can install Penzai using</p>

<p dir="auto">and import it using</p>
<div data-snippet-clipboard-copy-content="import penzai
from penzai import pz"><pre><code>import penzai
from penzai import pz
</code></pre></div>
<p dir="auto">(<code>penzai.pz</code> is an <em>alias namespace</em>, which makes it easier to reference
common Penzai objects.)</p>
<p dir="auto">When working in an Colab or IPython notebook, we recommend also configuring
Penzai as the default pretty printer, and enabling some utilities for
interactive use:</p>
<div data-snippet-clipboard-copy-content="pz.ts.register_as_default()
pz.ts.register_autovisualize_magic()
pz.enable_interactive_context()

# Optional: enables automatic array visualization
pz.ts.active_autovisualizer.set_interactive(pz.ts.ArrayAutovisualizer())"><pre><code>pz.ts.register_as_default()
pz.ts.register_autovisualize_magic()
pz.enable_interactive_context()

# Optional: enables automatic array visualization
pz.ts.active_autovisualizer.set_interactive(pz.ts.ArrayAutovisualizer())
</code></pre></div>
<p dir="auto">Here's how you could initialize and visualize a simple neural network:</p>
<div data-snippet-clipboard-copy-content="from penzai.example_models import simple_mlp
mlp = pz.nn.initialize_parameters(
    simple_mlp.MLP.from_config([8, 32, 32, 8]),
    jax.random.key(42),
)

# Models and arrays are visualized automatically when you output them from a
# Colab/IPython notebook cell:
mlp"><pre><code>from penzai.example_models import simple_mlp
mlp = pz.nn.initialize_parameters(
    simple_mlp.MLP.from_config([8, 32, 32, 8]),
    jax.random.key(42),
)

# Models and arrays are visualized automatically when you output them from a
# Colab/IPython notebook cell:
mlp
</code></pre></div>
<p dir="auto">Here's how you could capture and extract the activations after the elementwise
nonlinearities:</p>
<div data-snippet-clipboard-copy-content="mlp_with_captured_activations = pz.de.CollectingSideOutputs.handling(
    pz.select(mlp)
    .at_instances_of(pz.nn.Elementwise)
    .insert_after(pz.de.TellIntermediate())
)

output, intermediates = mlp_with_captured_activations(
  pz.nx.ones({&quot;features&quot;: 8})
)"><pre><code>mlp_with_captured_activations = pz.de.CollectingSideOutputs.handling(
    pz.select(mlp)
    .at_instances_of(pz.nn.Elementwise)
    .insert_after(pz.de.TellIntermediate())
)

output, intermediates = mlp_with_captured_activations(
  pz.nx.ones({"features": 8})
)
</code></pre></div>
<p dir="auto">To learn more about how to build and manipulate neural networks with Penzai,
we recommend starting with the <a href="https://penzai.readthedocs.io/en/stable/notebooks/how_to_think_in_penzai.html" rel="nofollow">"How to Think in Penzai" tutorial</a>, or one
of the other tutorials in the <a href="https://penzai.readthedocs.io/" rel="nofollow">Penzai documentation</a>.</p>
<hr>
<p dir="auto"><em>This is not an officially supported Google product.</em></p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Microsoft is a national security threat: ex-White House cyber policy director (187 pts)]]></title>
            <link>https://www.theregister.com/2024/04/21/microsoft_national_security_risk/</link>
            <guid>40106639</guid>
            <pubDate>Sun, 21 Apr 2024 15:44:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theregister.com/2024/04/21/microsoft_national_security_risk/">https://www.theregister.com/2024/04/21/microsoft_national_security_risk/</a>, See on <a href="https://news.ycombinator.com/item?id=40106639">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
<p><span>Interview</span> Microsoft has a shocking level of control over IT within the US federal government – so much so that former senior White House cyber policy director AJ Grotto thinks it's fair to call Redmond's recent security failures a national security issue.&nbsp;</p>
<p>Grotto this week spoke with <em>The Register</em> in an interview you can watch below, in which he told us that exacting even slight concessions from Microsoft has been a major fight for the Feds.</p>
<p>
  <a href="https://www.youtube.com/watch?v=FxDsYy-c7Bo" data-media="x-videoplayer">Youtube Video</a>
</p>

    

<p>"If you go back to the <a href="https://www.theregister.com/2023/10/31/sec_charges_solarwinds_sunburst_fraud/">SolarWinds episode</a> from a few years ago … [Microsoft] was essentially up-selling logging capability to federal agencies" instead of making it the default, Grotto said. "As a result, it was really hard for agencies to identify their exposure to the SolarWinds breach."&nbsp;</p>

        


        

<p>Grotto told us Microsoft had to be "dragged kicking and screaming" to provide logging capabilities to the government by default, and given the fact the mega-corp banked around $20 billion in revenue from security services last year, the concession was minimal at best.&nbsp;</p>
<p>That illustrates, Grotto said, that "they [Microsoft] just have a ton of leverage, and they're not afraid to use it."&nbsp;</p>

        

<p>Add to that concerns over an Exchange Online <a href="https://www.theregister.com/2024/04/03/cisa_microsoft_exchange_online_china_report/">intrusion</a> by Chinese snoops, and <a href="https://www.theregister.com/2024/04/12/microsoft_cisa_order/">another Microsoft security breach</a> by Russian cyber operatives, both of which allowed spies to gain access to US government emails, and Grotto says it's fair to classify Microsoft and its products as a national security concern.&nbsp;</p>
<p>But what can be done to solve the problem when 85 percent of US government productivity software, by Grotto's reckoning, and even more operating system share, belongs to Redmond?&nbsp;</p>
<p>"The government needs to focus on encouraging and catalyzing competition," Grotto said. He believes it also needs to publicly scrutinize Microsoft and make sure everyone knows when it messes up.&nbsp;</p>

        

<p>"At the end of the day, Microsoft, any company, is going to respond most directly to market incentives," Grotto told us. "Unless this scrutiny generates changed behavior among its customers who might want to look elsewhere, then the incentives for Microsoft to change are not going to be as strong as they should be." ®</p>                                


                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[All Fritz Box modems have been hijacked (223 pts)]]></title>
            <link>https://crapts.org/2024/04/21/all-fritz-box-modems-have-been-hijacked/</link>
            <guid>40106336</guid>
            <pubDate>Sun, 21 Apr 2024 15:08:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://crapts.org/2024/04/21/all-fritz-box-modems-have-been-hijacked/">https://crapts.org/2024/04/21/all-fritz-box-modems-have-been-hijacked/</a>, See on <a href="https://news.ycombinator.com/item?id=40106336">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-v-461f54e1=""><p><em>TL;DR: Every Fritz!Box has been compromised by DNS hijacking and using a Fritz!Box is unsafe. Every user of a Fritz!Box should immediately stop using their Fritz!Box or set up their own DHCP server.</em></p><p>Fritz!Box modems are popular modems by the German company AVM. They are tailored to the some-what more experienced users who want to have more control over their network settings and they can often be used to replace the modem from your cable/DSL/fiber ISP. The company has been around for a long time and Fritz!Box devices are generally considered to be reliable and well worth the price.</p><p>However, since the beginning of 2024 all of the Fritz!Box devices have been hijacked. In short, the DHCP server on these modems hands out leases with the DNS suffix <code>fritz.box</code>, which means that domains in DNS requests <a href="https://superuser.com/questions/1481698/dns-suffix-explanation?ref=crapts.org" rel="noreferrer">are appended with the suffix</a>. Unfortunately, this setting cannot be modified. Normally this doesn't have to be a problem, but since the beginning of this year the <code>fritz.box</code> DNS suffix is an <a href="https://whois.domaintools.com/fritz.box?ref=crapts.org" rel="noreferrer">actual registered domain</a> and the owner of this domain is not AVM or anyone affiliated to them. </p><p>This is a very serious issue. DNS requests on a Fritz!Box home network now get forwarded to an unknown entity, which is a case of <a href="https://en.wikipedia.org/wiki/DNS_hijacking?ref=crapts.org" rel="noreferrer">DNS hijacking</a>. Not every OS deals with DNS suffices in the same way, but at least Windows applies the suffix for all DNS requests which means every DNS request done by a Windows user is now effectively hijacked. </p><figure><img src="https://crapts.org/content/images/2024/04/image.png" alt="" loading="lazy" width="560" height="225"></figure><p>The consequences of this are significant: Fritz!Box users' internet behavior is now sent directly to an unknown party and are now prone to phishing attacks. As far as I know the latter hasn't happened yet, but it's bound to happen at some point if this is not resolved as soon as possible.</p><p>Besides the security issues, this also has a negative effect on performance when the registered IP address isn't responding to the DNS requests. I myself have experienced Chrome and Slack to be very slow in resolving network requests after starting up my Windows laptop.</p><p>AVM's response so far has been lacking except for a <a href="https://twitter.com/AVM_DE/status/1779155999204552897?ref=crapts.org" rel="noreferrer">tweet</a> that <code>fritz.box</code> domain is in the process of being sold. To me that is alarming in three ways:</p><ol><li>"In the process of being sold" means it is not sold yet and there is no guarantee AVM will actually take ownership of the domain.</li><li>Even if the domain is acquired by AVM, this still means that every DNS request will now go over the internet directly to AVM. I never asked for this.</li><li>A performance penalty will remain. Your internet will sometimes appear to be really slow when the registered IP address for the DNS suffix domain is not actually responding with a DNS resolution.</li></ol><p>The only proper way to resolve this matter in my opinion is to disable the DNS suffix by default. So far there is no indication that AVM is planning to enable this option in the near future.</p><p>If you want to do something today without waiting for AVM, the following remedies are available:</p><ul><li>Use a custom DHCP server and don't set the DNS suffix to <code>fritz.box</code></li><li>Don't use a Fritz!Box device at all</li></ul><p>Since setting up a DHCP server is somewhat complex, my only recommendation at this point is to immediately stop using all Fritz!Box device. They are unsafe and dangerous to use. The lack of a proper response from AVM is even more alarming and I'm not sure they understand the gravity of the situation. I sincerely hope the matter gets resolved soon enough.</p><p>PS. I didn't discover this by myself. The article above is a summary of what other <a href="https://www.reddit.com/r/fritzbox/comments/1b7d0rs/change_domain_in_fritzbox_7360/?ref=crapts.org" rel="noreferrer">people</a> <a href="https://www.reddit.com/r/fritzbox/comments/klzqar/fritzbox_7590_change_default_fritzbox_domain/?ref=crapts.org" rel="noreferrer">have</a> <a href="https://gathering.tweakers.net/forum/list_message/78779034?ref=crapts.org" rel="noreferrer">discovered</a>,  and some even warned for this years ago.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I can't stand using VSCode so I wrote my own (147 pts)]]></title>
            <link>https://bold-edit.com/wrote-my-own.html</link>
            <guid>40106157</guid>
            <pubDate>Sun, 21 Apr 2024 14:47:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://bold-edit.com/wrote-my-own.html">https://bold-edit.com/wrote-my-own.html</a>, See on <a href="https://news.ycombinator.com/item?id=40106157">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

<p>I used to like vscode. I've been using it since it could run and debug C#. Last year, I noticed I frequently hit bugs where I couldn't type until I switched out and back into the editor with alt-tab. That's not so bad but it got annoying when I couldn't build or debug until I restarted the program</p>


<p>One day, possibly the thing that bothered me the most was when I was writing a GDB pretty printer. I'd tweak the script; then to see the results I would press F5 to run the already built binary and wait over a second EVERY SINGLE TIME (about 1480ms). It was driving me nuts. I ended up leaving a terminal open and would save, alt tab, press up, enter. All that would still be almost a second faster than if I were to restart the debugger in vscode. I then realized it won't matter how fast my compiler is (I've implemented one for my own language) it will always feel slow if I use vscode (the compiler builds a debuggable binary in 15 milliseconds).</p>

<p>Finally, what broke the camel's back was when I was debugging 3 different complex functions. Each had about 15-20 variables I was interested in. I had the watch panel take up the entire right side and there wasn't enough room. I had to <b>manually remove and add variables</b> every time I rotated to a third function. I wouldn't always put the vars back in the same order. It was obnoxious. Whichever function I was looking at I wanted to see the same set of variables on the top right in the same order every time. Between the bugs, it being slow to launch, and now debugging becoming a problem I decided then and there to write a text editor.</p>

<p>I thought, how hard could it be? The answer is always harder than you expect but I knew that and I wanted to find out</p>

<p>The first thing I did was implement GDB support. Here's a video of the watch variables at the top right changing based on the function its in</p>
<video src="https://bold-edit.com/wrote-my-own-vids/dynamic.mp4" controls=""></video>
<p>If you look closely you'll see there's no flickering. All variables and their values show up at the same time. You can see variables are shown significantly quicker. From the video you can't see when I press a button to launch the debugger. From launch to breakpoint (which includes the build step) it took &lt;200ms. Two of my biggest annoyances I solved. Next, I wanted to make sure editing and rendering is fast no matter how large the file is. Some tools generate hundreds of MBs of JSON. Here's a video of me opening two files (both 1gb) scrolling around, typing, and pressing undo/redo.</p>
<video src="https://bold-edit.com/wrote-my-own-vids/large.mp4" controls=""></video>
<p>I was pretty happy that I could run 60fps without dropping frames with a debug build (vscode drops frames). However for a 4K monitor, I need an optimized build. Even with typing and undo/redo I consistently stayed over 144fps so people with fast monitors can have a smooth experience.</p>

<p>
I like being able to partially type a filename and jump to it, or find/jump to a type. I like to rename variables. LSP's (language server protocol) support these so I implemented it. It's not a complete implementation, one thing easy to see is there is no semantic tokens support which would improve highlighting. The video shows signature help but doesn't show jump to, rename, hover, etc. Friends didn't like debugging in their current IDE so they asked if I could implement DAP support. So I implemented that as well. The video shows an example using python.</p>
<video src="https://bold-edit.com/wrote-my-own-vids/lsp.mp4" controls=""></video>

<p>A few weeks before I began writing, I met the people who work on the undo debugger. Their goal is to let people replay executions, so you can figure out and debug complicated problems that no one knows how to reproduce. But that's not why I liked it. I did this.</p>
<video src="https://bold-edit.com/wrote-my-own-vids/udb.mp4" controls=""></video>
<p>In that video, I ran the 'last' command on the global variable g1. The debugger brought me to the last time it was modified. It's magic. I use it constantly, even when I know where it's modified. It saves me from writing a conditional on a breakpoint and I don't have to guess if I don't know which spot the variable was last modified. It's not a free debugger but I wanted to implement the feature for myself and it was very easy since it had the same protocol as gdb and the implementation was just a few lines on top of my already existing gdb implementation.</p>

<p>This editor is still early in development and plenty of features are missing. There's no global search, there is a find but no replace and people who like vim motions will need to wait. If you try it for 5 minutes feel free to let me know all the things that you noticed were missing. There's a tutorial file in the download to give you something to do in the first few minutes of using this.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I made an open source Windows app to rewind and search everything on screen (241 pts)]]></title>
            <link>https://tonoko.notion.site/I-made-an-open-source-app-to-rewind-search-everything-happened-on-your-screen-on-Windows-184d1a9d5edb494dba0c2f46d311ec5c</link>
            <guid>40105371</guid>
            <pubDate>Sun, 21 Apr 2024 12:53:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tonoko.notion.site/I-made-an-open-source-app-to-rewind-search-everything-happened-on-your-screen-on-Windows-184d1a9d5edb494dba0c2f46d311ec5c">https://tonoko.notion.site/I-made-an-open-source-app-to-rewind-search-everything-happened-on-your-screen-on-Windows-184d1a9d5edb494dba0c2f46d311ec5c</a>, See on <a href="https://news.ycombinator.com/item?id=40105371">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[I love programming but I hate the programming industry (244 pts)]]></title>
            <link>https://www.deathbyabstraction.com/I-love-programming-but-I-hate-the-programming-industry</link>
            <guid>40105121</guid>
            <pubDate>Sun, 21 Apr 2024 12:20:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.deathbyabstraction.com/I-love-programming-but-I-hate-the-programming-industry">https://www.deathbyabstraction.com/I-love-programming-but-I-hate-the-programming-industry</a>, See on <a href="https://news.ycombinator.com/item?id=40105121">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

		<p>I never really fit into any software engineering job I’ve had. The technical side of things got boring after I had gained a basic grasp of the inner logic of the codebase and no longer felt challenged, and then I wanted to do more, and more importantly - do it differently. I wondered about design decisions and their broader purpose: why are we doing this and why are we doing it in this specific way? Might there be a better way? What metrics are we using to determine success and why? Although these questions weren’t always posed aloud I got told I ‘think too much’ and ‘care too much’ when I could be using this time to churn out more lines of code. I didn’t belong, and I was too young and insecure to articulate that this wasn’t just a simple mismatch between my talent and my position. It was that I fundamentally disagreed with the way these places operate and wanted to do work to change them rather than perpetuate them.</p>

<p>If there ever was a part of me that thought ‘there has to be better things out there’, looking at job postings for a couple of weeks in 2023 was enough to kill that illusion. 90% of the time when I read descriptions it is excruciatingly obvious to me that whatever code the chosen candidates will end up writing at this job will be completely removed from any important problem not only humanity, but even any individual human has ever had. Startup culture is shamelessly at the forefront of this industry’s ‘produce more code and ask less questions’ policy. All most startups do is move investors money around while trying to acquire paid users by convincing them they need a product that is more often than not marginally useful at best. They <a href="https://www.quora.com/Why-do-95-of-start-ups-fail-what-do-the-5-do-right-that-make-them-successful">usually fail</a> at that, leaving behind thousands of lines of unmaintainable spaghetti code engineers were bullied into writing in weeks instead of months using arbitrary trendy technologies. No one will ever look at that shit again except maybe as an example of bad coding practices, engineers’ time has been wasted and venture capital largely ends up in the hands of the people that already possess significant capital - they may use that to fund another startup, and this wretched cycle continues. Job ads that try to paint this as some kind of exciting meaningful endeavour that will enrich people’s lives and stimulate my engineering growth are an insult to my intelligence. I don’t want to be a part of this - not just because it is arguably immoral but because it is fundamentally and infuriatingly boring and pointless.</p>

<p>While established tech companies differ from startups organisationally and financially, they don’t really contrast them culturally. Sure, the code you write at a FAANG might actually make its way to users, but what you as an individual happen to think about any aspect of writing code will be more irrelevant than ever. You are a cog in a machine not only in the sense that the product you are building is likely automating the <a href="https://doctorow.medium.com/https-pluralistic-net-2023-11-06-attention-rents-consumer-welfare-queens-fa3475adb465">worst aspects of capitalism</a> in increasingly sinister ways, but also in a practical sense, you’re a number: the size of your backend stack, or your tech interview score, or your performance review score. It’s not so much this reality itself that’s so atrocious to me, but more the fact that as engineers we’re expected to find this empty and humiliating grind even more aspirational than many other workers are, and are even more discouraged from questioning any aspect of it.</p>

<p>Essentially, the concept of critical thinking has been made anathema to engineering: as a programmer you are to focus solely on the how, rarely on the what, and certainly never on the why. For the rare code monkey that finds themselves able and willing to critique the system they’re producing for the message is clear: leave that shit at the door. A code monkey is prohibited from even identifying the lack of autonomy and creativity inherent to the position - they can only strive to build more, never to build differently, or build different and better things.</p>

<p>So while this do-more-ask-less mentality of the tech world might produce more code it also consistently leads to <a href="https://stackoverflow.blog/2023/12/25/is-software-getting-worse/">worse software</a>. Even in the cases where capital and other forces outside of our immediate control theoretically allow for us to build software in a way that is sustainable, or has a positive impact on the world at large, or is at the very least useful practically we still often don’t, because of simple inertia: it’s easier and usually more viable to do what’s on trend and reproduce the status quo once more. Worse yet, this same inertia then seeps into the entire tech stack this societally useless product is built upon. The technologies all the way down to the languages, libraries, frameworks, and even code patterns become infected with the same brand of novelty and gimmicks before actual innovation that plagues the industry as a whole. After all, if you’re not solving unconventional problems, why would you need unconventional engineering?</p>

<p>In truth, the most interesting engineering problems are usually the ones which arise naturally in our society, as opposed to those where technological advancement is an end in and of itself, or even those which attempt to artificially create a market demand where there isn’t one. Societal necessity is the best possible driving force of innovation - remember that historically the most groundbreaking <a href="https://www.bbc.com/news/technology-18419691">achievements</a> in early computing have happened in the service of the greater good. This is what I really want to do: I want every <em>how</em> - from the programming language and paradigm, architecture, down to every line of code and piece of syntax - to be informed by the <em>why</em> of the system that is being built. And I want that <em>why</em> to be a reflection of a genuine existing need, not some bullshit business metric which pretty much exists for its own sake.</p>

<p>So far I haven’t had the chance to actually meet someone who would share these values in any significant sense and would want to do this kind of engineering work. Despite the isolation I often experience in my interactions with this industry, I am confident in the value of my work and the importance of the things I have to say. So if you are that person please reach out - it would be interesting to know if a place for someone like me already exists somewhere. And if not I think it would benefit us to create it.</p>

		
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Tiny World Map (290 pts)]]></title>
            <link>https://github.com/tinyworldmap/tiny-world-map</link>
            <guid>40104774</guid>
            <pubDate>Sun, 21 Apr 2024 11:21:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/tinyworldmap/tiny-world-map">https://github.com/tinyworldmap/tiny-world-map</a>, See on <a href="https://news.ycombinator.com/item?id=40104774">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">tinyworldmap</h2><a id="user-content-tinyworldmap" aria-label="Permalink: tinyworldmap" href="#tinyworldmap"></a></p>
<p dir="auto">tinyworldmap is a world map for offline-first and low-bandwidth web apps.</p>
<p dir="auto"><a href="https://tinyworldmap.com/" rel="nofollow">Demo</a></p>
<p dir="auto"><kbd><a target="_blank" rel="noopener noreferrer" href="https://github.com/tinyworldmap/tiny-world-map/blob/gh-pages/images/zoomed-mid.png"><img src="https://github.com/tinyworldmap/tiny-world-map/raw/gh-pages/images/zoomed-mid.png"></a></kbd></p>
<p dir="auto">tinyworldmap is designed to be used with Leaflet. All zoom levels are supported, and the most complete version is only 300 kB gzipped. Its client-side rendering has been extensively profiled and tested on low-end decade-old phones, with no discernible lag.</p>
<p dir="auto">By default, the map displays the 10,000 most populous cities added to OpenStreetMap. At the time of writing, this encompasses all cities and towns with a population of at least 48,000:</p>
<p dir="auto"><kbd><a target="_blank" rel="noopener noreferrer" href="https://github.com/tinyworldmap/tiny-world-map/blob/gh-pages/images/zoomed-in-3.png"><img src="https://github.com/tinyworldmap/tiny-world-map/raw/gh-pages/images/zoomed-in-3.png"></a></kbd></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto">There are two ways to use the map:</p>
<ol dir="auto">
<li>As a base map, replacing OpenStreetMap tiles</li>
<li>As an offline fallback for OpenStreetMap tiles</li>
</ol>
<p dir="auto"><h3 tabindex="-1" dir="auto">As a base map</h3><a id="user-content-as-a-base-map" aria-label="Permalink: As a base map" href="#as-a-base-map"></a></p>
<p dir="auto">To use tinyworldmap as a Leaflet base map, add the following to your <code>head</code> tag:</p>
<div dir="auto" data-snippet-clipboard-copy-content="<script src=&quot;https://tinyworldmap.com/dist/tiny-world-all-10000.js&quot;>"><pre><span>&lt;</span><span>script</span> <span>src</span>="<span>https://tinyworldmap.com/dist/tiny-world-all-10000.js</span>"<span>&gt;</span></pre></div>
<p dir="auto">This script embeds all data necessary to display the map.</p>
<p dir="auto">Then, instead of adding a tile layer to the Leaflet map, use:</p>
<div dir="auto" data-snippet-clipboard-copy-content="new L.GridLayer.TinyWorld().addTo(map)"><pre><span>new</span> <span>L</span><span>.</span><span>GridLayer</span><span>.</span><span>TinyWorld</span><span>(</span><span>)</span><span>.</span><span>addTo</span><span>(</span><span>map</span><span>)</span></pre></div>
<p dir="auto">The <code>TinyWorld</code> constructor accepts several options: <code>backgroundColor</code>, <code>textFillColor</code>, <code>borderStrokeColor</code>, <code>borderFillColor</code>, <code>borderWidth</code>, <code>textStrokeColor</code> (which helps separate the text from the rest), <code>textStrokeWidth</code>, <code>cityFont</code> (e.g. <code>"12px Arial"</code>), <code>countryFont</code>, and <code>dotColor</code>.</p>
<p dir="auto">If <code>dotColor</code> is specified, each city is marked with a dot. This enhances usability when using the stripped-down version of tinyworldmap that excludes country borders:</p>
<p dir="auto"><kbd><a target="_blank" rel="noopener noreferrer" href="https://github.com/tinyworldmap/tiny-world-map/blob/gh-pages/images/noborders.png"><img src="https://github.com/tinyworldmap/tiny-world-map/raw/gh-pages/images/noborders.png"></a></kbd></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">As a fallback map</h3><a id="user-content-as-a-fallback-map" aria-label="Permalink: As a fallback map" href="#as-a-fallback-map"></a></p>
<p dir="auto">In offline-first web applications, caching image-based maps at all zoom levels is impossible due to the vast number of tiles, with a combined size often in the order of terabytes.</p>
<p dir="auto">This repository <a href="https://github.com/tinyworldmap/tiny-world-map/blob/gh-pages/service-worker.js">provides</a> a service worker to enable offline functionality for web apps with maps.</p>
<p dir="auto">When this service worker is installed, the fallback map is preloaded. All visited pages are cached, but the base map is excluded. While the server can be reached, cached data is not used. When the user is offline, the website is served from cache, and the service worker intercepts requests to the OSM tile server, generating replacement tiles locally using tinyworldmap.</p>
<p dir="auto">Before <a href="https://web.dev/articles/service-workers-registration" rel="nofollow">registering the service worker</a>, first modify all sections in the service worker marked <code>IMPORTANT</code>. Once registered, be sure to attribute OpenStreetMap and tinyworldmap in your tile layer as follows:</p>
<div dir="auto" data-snippet-clipboard-copy-content="L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&amp;copy; <a href=&quot;https://www.openstreetmap.org/copyright&quot;>OpenStreetMap</a>, <a href=&quot;https://www.tinyworldmap.com&quot;>tinyworldmap</a>'
}).addTo(map);"><pre><span>L</span><span>.</span><span>tileLayer</span><span>(</span><span>'https://tile.openstreetmap.org/{z}/{x}/{y}.png'</span><span>,</span> <span>{</span>
    <span>maxZoom</span>: <span>19</span><span>,</span>
    <span>attribution</span>: <span>'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt;, &lt;a href="https://www.tinyworldmap.com"&gt;tinyworldmap&lt;/a&gt;'</span>
<span>}</span><span>)</span><span>.</span><span>addTo</span><span>(</span><span>map</span><span>)</span><span>;</span></pre></div>
<p dir="auto">To see an example of a production application using tinyworldmap as a fallback, visit <a href="https://hitchmap.com/" rel="nofollow">Hitchmap</a>. Simply load the website in a browser supporting service workers, wait for a while, turn off your internet, and reload. The web app should be functioning as normal, using the fallback map. Note that it might take a while for the service worker to install.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Tinier world maps</h2><a id="user-content-tinier-world-maps" aria-label="Permalink: Tinier world maps" href="#tinier-world-maps"></a></p>
<p dir="auto">The complete map is 300K gzipped/694K uncompressed. For certain use cases, this might still be too large.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">No borders</h3><a id="user-content-no-borders" aria-label="Permalink: No borders" href="#no-borders"></a></p>
<p dir="auto"><a href="https://github.com/tinyworldmap/tiny-world-map/blob/gh-pages/dist/tiny-world-noborders-10000.js"><code>tiny-world-noborders-10000.js(on)</code></a> contains all the data present in the complete version except for country borders and shorelines. This reduces the gzipped version by 100k and the uncompressed version by 200k.</p>
<p dir="auto">In addition to its smaller size, the version without borders has the advantage that all data included is precise. The country borders in the complete version are not exact at high zoom levels, which can look strange when overlaying shapes that match country borders and shorelines. In such cases, the version without borders often looks better.</p>
<p dir="auto">This is the default styling:</p>
<p dir="auto"><kbd><a target="_blank" rel="noopener noreferrer" href="https://github.com/tinyworldmap/tiny-world-map/blob/gh-pages/images/noborders.png"><img src="https://github.com/tinyworldmap/tiny-world-map/raw/gh-pages/images/noborders.png"></a></kbd></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">No cities</h3><a id="user-content-no-cities" aria-label="Permalink: No cities" href="#no-cities"></a></p>
<p dir="auto">There are two versions available without city labels: <code>tiny-world-nocities.js(on)</code> (which retains country labels) and <code>tiny-world-borders.js(on)</code> (which omits country labels). The city labels comprise 410K uncompressed and 172K compressed.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Fewer cities</h3><a id="user-content-fewer-cities" aria-label="Permalink: Fewer cities" href="#fewer-cities"></a></p>
<p dir="auto">Finally, for each file including city labels, there also exist versions featuring 2,000 cities and 4,000 cities. Simply substitute <code>10000</code> with <code>2000</code> or <code>4000</code> in the filename.</p>
<table>
<thead>
<tr>
<th>Cities included</th>
<th>Population</th>
</tr>
</thead>
<tbody>
<tr>
<td>10,000</td>
<td>&gt; 48,000</td>
</tr>
<tr>
<td>4,000</td>
<td>&gt; 137,000</td>
</tr>
<tr>
<td>2,000</td>
<td>&gt; 287,000</td>
</tr>
</tbody>
</table>
<p dir="auto"><h2 tabindex="-1" dir="auto">Hire tinyworldmap</h2><a id="user-content-hire-tinyworldmap" aria-label="Permalink: Hire tinyworldmap" href="#hire-tinyworldmap"></a></p>
<p dir="auto">If you require a customized map (e.g. in more detail or in another language) or if you need assistance implementing offline functionality on your website, please contact us at <a href="mailto:business@tinyworldmap.com?body=Hi%20Bob,">business@tinyworldmap.com</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Attribution</h2><a id="user-content-attribution" aria-label="Permalink: Attribution" href="#attribution"></a></p>
<p dir="auto">Like OpenStreetMap data, tinyworldmap data is licensed under the ODBL, which necessitates attribution. If you've followed the steps outlined above, your Leaflet footer should include attribution to both OpenStreetMap and tinyworldmap. If not, add the following:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&amp;copy; <a href=&quot;https://www.openstreetmap.org/copyright&quot;>OpenStreetMap</a>, <a href=&quot;https://www.tinyworldmap.com&quot;>tinyworldmap</a>"><pre>&amp;copy; <span>&lt;</span><span>a</span> <span>href</span>="<span>https://www.openstreetmap.org/copyright</span>"<span>&gt;</span>OpenStreetMap<span>&lt;/</span><span>a</span><span>&gt;</span>, <span>&lt;</span><span>a</span> <span>href</span>="<span>https://www.tinyworldmap.com</span>"<span>&gt;</span>tinyworldmap<span>&lt;/</span><span>a</span><span>&gt;</span></pre></div>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: I made a website that converts YT videos into step-by-step guides (107 pts)]]></title>
            <link>https://stepify.tech/</link>
            <guid>40104641</guid>
            <pubDate>Sun, 21 Apr 2024 10:52:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://stepify.tech/">https://stepify.tech/</a>, See on <a href="https://news.ycombinator.com/item?id=40104641">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        
    <div>
            <!-- Title -->
            <!-- <h1 class="ls-tight font-bolder display-4 mb-7">
              Stepify Youtube Videos and Save your Time
            </h1> -->
            <h2>
              Stepify YouTube videos for the sake of your time
            </h2>
            <!-- Text -->
            <!-- <p class="lead mb-12">
              Plan, build and launch beautiful and consistent user interfaces for the web that drives meaningful engagement and growth for your brand.
            </p> -->
            <p>
              No time for Youtube videos?
              Get a step-by-step tutorial of any video to follow along. Pure transcript. Powered by AI.
          </p>
            <!-- Form -->
            <!-- <form class="w-2/3 mx-auto">
              <div class="rounded px-2 py-2 border shadow">
                <div class="row">
                  <div class="col">
                    <input type="email" name="email" class="form-control pl-3 shadow-none bg-transparent border-0" placeholder="Enter your email address">
                  </div>
                  <div class="col-auto">
                    <button type="submit" class="btn btn-block btn-dark">Notify me</button>
                  </div>
                </div>
              </div>
            </form> -->
            <form method="POST" action="">
              
              
          </form>


          
            
          </div>
    <div>
        <h2>Recent videos:</h2>
        
        <div>
          
          <div>
              <!-- Image -->
              <p><img alt="EECS4302 ANTLR4 Parser Generator Tutorial: Part 3" src="https://i.ytimg.com/vi/2o9ImGNI1uw/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">EECS4302 ANTLR4 Parser Generator Tutorial: Part 3</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/2o9ImGNI1uw">EECS4302 ANTLR4 Parser Generator Tutorial: Part 3</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial: Creating Model Classes: Create a new package in your Java project to hold ...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="EECS4302 ANTLR4 Parser Generator Tutorial: Part 2" src="https://i.ytimg.com/vi/cWUbZ0fCZB4/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">EECS4302 ANTLR4 Parser Generator Tutorial: Part 2</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/cWUbZ0fCZB4">EECS4302 ANTLR4 Parser Generator Tutorial: Part 2</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial: Implementing ANTLR for Parsing Projects Rationale for Using ANTLR: Before ...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="Tinder Nightmares 8" src="https://i.ytimg.com/vi/XLfx8iT5nzQ/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">Tinder Nightmares 8</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/XLfx8iT5nzQ">Tinder Nightmares 8</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial: Navigating Through "Tinder Nightmares 8" by Cody Ko Introduction to Tinder...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="XX век. Англо-бурская и русско-японская войны. Лекция №74 от 04.08.15" src="https://i.ytimg.com/vi/qC156wcuYUE/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">XX век. Англо-бурская и русско-японская войны. Лекция №74 от 04.08.15</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/qC156wcuYUE">XX век. Англо-бурская и русско-японская войны. Лекция №74 от 04.08.15</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Title: XX век. Англо-бурская и русско-японская войны. Лекция №74 от 04.08.15 Channel Name: Лекции...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="EECS4302 ANTLR4 Parser Generator Tutorial: Part 1" src="https://i.ytimg.com/vi/-FdD_xzNFL4/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">EECS4302 ANTLR4 Parser Generator Tutorial: Part 1</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/-FdD_xzNFL4">EECS4302 ANTLR4 Parser Generator Tutorial: Part 1</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial for Using ANTLR4 Parser Generator Introduction to ANTLR4 and Assumptions: A...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="TUA # 132 - Responding To Critics" src="https://i.ytimg.com/vi/D2x_a6W5D0Q/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">TUA # 132 - Responding To Critics</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/D2x_a6W5D0Q">TUA # 132 - Responding To Critics</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Tutorial: How to Respond to Critics on YouTube Video Title: TUA # 132 - Responding To Critics Cha...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="EECS4302 ANTLR4 Parser Generator Tutorial: Part 4" src="https://i.ytimg.com/vi/zo_oiHzKLqw/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">EECS4302 ANTLR4 Parser Generator Tutorial: Part 4</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/zo_oiHzKLqw">EECS4302 ANTLR4 Parser Generator Tutorial: Part 4</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial: Understanding the Hierarchy: In the previous tutorial, the hierarchy of vi...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="Baby Got Back - Sir Mix-A-Lot (Lyric Video)" src="https://i.ytimg.com/vi/hrle-WJib6U/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">Baby Got Back - Sir Mix-A-Lot (Lyric Video)</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/hrle-WJib6U">Baby Got Back - Sir Mix-A-Lot (Lyric Video)</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Title: Baby Got Back - Sir Mix-A-Lot (Lyric Video) Channel Name: Fling of Joy Tutorial: Introduct...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="Quadruple Your Internet Speed for Free" src="https://i.ytimg.com/vi/UqLHE0_NRFo/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">Quadruple Your Internet Speed for Free</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/UqLHE0_NRFo">Quadruple Your Internet Speed for Free</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial: How to Quadruple Your Internet Speed for Free Materials Needed: Ethernet c...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="Salt-N-Pepa - Push It (Official Music Video)" src="https://i.ytimg.com/vi/vCadcBR95oU/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">Salt-N-Pepa - Push It (Official Music Video)</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/vCadcBR95oU">Salt-N-Pepa - Push It (Official Music Video)</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Title: Salt-N-Pepa - Push It (Official Music Video) Tutorial Step 1: Introduction to the Song The...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="Elden Ring - Walkthrough Part 32: Castle Redmane" src="https://i.ytimg.com/vi/hpPeS5TEpu4/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">Elden Ring - Walkthrough Part 32: Castle Redmane</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/hpPeS5TEpu4">Elden Ring - Walkthrough Part 32: Castle Redmane</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial: Castle Redmane Walkthrough Preparation for Patch 1.03: Revert to a previou...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="Deep Learning | What is Deep Learning? | Deep Learning Tutorial For Beginners | 2023 | Simplilearn" src="https://i.ytimg.com/vi/6M5VXKLf4D4/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">Deep Learning | What is Deep Learning? | Deep Learning Tutorial For Beginners | 2023 | Simplilearn</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/6M5VXKLf4D4">Deep Learning | What is Deep Learning? | Deep Learning Tutorial For Beginners | 2023 | Simplilearn</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial: Understanding Deep Learning Introduction to Deep Learning Deep learning is...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="How to Install Lead Roof Flashings - Easy fit roof flashing DIY" src="https://i.ytimg.com/vi/R-vrSq-x40Y/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">How to Install Lead Roof Flashings - Easy fit roof flashing DIY</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/R-vrSq-x40Y">How to Install Lead Roof Flashings - Easy fit roof flashing DIY</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  How to Install Lead Roof Flashings - Step-by-Step Tutorial Prepare the Work Area Identify the are...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="Winnipeg business owner says overflowing bin that led to overcharge staged by garbage company" src="https://i.ytimg.com/vi/6Wbg58EzOlU/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">Winnipeg business owner says overflowing bin that led to overcharge staged by garbage company</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/6Wbg58EzOlU">Winnipeg business owner says overflowing bin that led to overcharge staged by garbage company</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  Step-by-Step Tutorial: How to Handle an Overcharge Situation with Waste Management Introduction: ...
                </p>
                
              </div>
            </div>
          
          <div>
              <!-- Image -->
              <p><img alt="Excel Pivot Table EXPLAINED in 10 Minutes (Productivity tips included!)" src="https://i.ytimg.com/vi/UsdedFoTA68/mqdefault.jpg">
              </p>
              <!-- Card Body -->
              <div>
                <!-- Title -->
                <!-- <h3 class="h4">Excel Pivot Table EXPLAINED in 10 Minutes (Productivity tips included!)</h3> -->
                <h2>
                  <a href="https://stepify.tech/video/UsdedFoTA68">Excel Pivot Table EXPLAINED in 10 Minutes (Productivity tips included!)</a>
              </h2>
  
                <!-- Subtitle  %A for weekday, %B for month, %d for day, %Y for year -->
                <p><span>Apr 21, 2024</span></p><p>
                  How to Create Excel Pivot Tables - Step-by-Step Tutorial Organize Your Data Properly: Ensure your...
                </p>
                
              </div>
            </div>
          
        </div>
      </div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Lunatik: Lunatik is a framework for scripting the Linux kernel with Lua (123 pts)]]></title>
            <link>https://github.com/luainkernel/lunatik</link>
            <guid>40104492</guid>
            <pubDate>Sun, 21 Apr 2024 10:14:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/luainkernel/lunatik">https://github.com/luainkernel/lunatik</a>, See on <a href="https://news.ycombinator.com/item?id=40104492">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">Lunatik</h2><a id="user-content-lunatik" aria-label="Permalink: Lunatik" href="#lunatik"></a></p>
<p dir="auto">Lunatik is a framework for scripting the Linux kernel with <a href="https://www.lua.org/" rel="nofollow">Lua</a>.
It is composed by the Lua interpreter modified to run in the kernel;
a <a href="https://github.com/luainkernel/lunatik/blob/master/lunatik.lua">device driver</a> (written in Lua =)) and a <a href="https://github.com/luainkernel/lunatik/blob/master/lunatik">command line tool</a>
to load and run scripts and manage runtime environments from the user space;
a <a href="#lunatik-c-api">C API</a> to load and run scripts and manage runtime environments from the kernel;
and <a href="#lunatik-lua-apis">Lua APIs</a> for binding kernel facilities to Lua scripts.</p>
<p dir="auto">Here is an example of a character device driver written in Lua using Lunatik
to generate random ASCII printable characters:</p>
<div dir="auto" data-snippet-clipboard-copy-content="-- /lib/modules/lua/passwd.lua
--
-- implements /dev/passwd for generate passwords
-- usage: $ sudo lunatik run passwd
--        $ head -c <width> /dev/passwd

local device = require(&quot;device&quot;)
local linux  = require(&quot;linux&quot;)

local function nop() end -- do nothing

local s = linux.stat
local driver = {name = &quot;passwd&quot;, open = nop, release = nop, mode = s.IRUGO}

function driver:read() -- read(2) callback
	-- generate random ASCII printable characters
	return string.char(linux.random(32, 126))
end

-- creates a new character device
device.new(driver)"><pre><span><span>--</span> /lib/modules/lua/passwd.lua</span>
<span><span>--</span></span>
<span><span>--</span> implements /dev/passwd for generate passwords</span>
<span><span>--</span> usage: $ sudo lunatik run passwd</span>
<span><span>--</span>        $ head -c &lt;width&gt; /dev/passwd</span>

<span>local</span> <span>device</span> <span>=</span> <span>require</span>(<span><span>"</span>device<span>"</span></span>)
<span>local</span> <span>linux</span>  <span>=</span> <span>require</span>(<span><span>"</span>linux<span>"</span></span>)

<span>local</span> <span>function</span> <span>nop</span>() <span>end</span> <span><span>--</span> do nothing</span>

<span>local</span> <span>s</span> <span>=</span> <span>linux</span>.<span>stat</span>
<span>local</span> <span>driver</span> <span>=</span> {<span>name</span> <span>=</span> <span><span>"</span>passwd<span>"</span></span>, <span>open</span> <span>=</span> <span>nop</span>, <span>release</span> <span>=</span> <span>nop</span>, <span>mode</span> <span>=</span> <span>s</span>.<span>IRUGO</span>}

<span>function</span> <span>driver</span>:<span>read</span>() <span><span>--</span> read(2) callback</span>
	<span><span>--</span> generate random ASCII printable characters</span>
	<span>return</span> <span>string.char</span>(<span>linux</span>.<span>random</span>(<span>32</span>, <span>126</span>))
<span>end</span>

<span><span>--</span> creates a new character device</span>
<span>device</span>.<span>new</span>(<span>driver</span>)</pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<div data-snippet-clipboard-copy-content="make
sudo make install
sudo lunatik # execute Lunatik REPL
Lunatik 3.4  Copyright (C) 2023-2024 ring-0 Ltda.
> return 42 -- execute this line in the kernel
42"><pre><code>make
sudo make install
sudo lunatik # execute Lunatik REPL
Lunatik 3.4  Copyright (C) 2023-2024 ring-0 Ltda.
&gt; return 42 -- execute this line in the kernel
42
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">lunatik</h3><a id="user-content-lunatik-1" aria-label="Permalink: lunatik" href="#lunatik-1"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="usage: lunatik [load|unload|reload|status|list] [run|spawn|stop <script>]"><pre>usage: lunatik [load<span>|</span>unload<span>|</span>reload<span>|</span>status<span>|</span>list] [run<span>|</span>spawn<span>|</span>stop <span>&lt;</span>script<span>&gt;</span>]</pre></div>
<ul dir="auto">
<li><code>load</code>: load Lunatik kernel modules</li>
<li><code>unload</code>: unload Lunatik kernel modules</li>
<li><code>reload</code>: reload Lunatik kernel modules</li>
<li><code>status</code>: show which Lunatik kernel modules are currently loaded</li>
<li><code>list</code>: show which runtime environments are currently running</li>
<li><code>run</code>: create a new runtime environment to run the script <code>/lib/modules/lua/&lt;script&gt;.lua</code></li>
<li><code>spawn</code>: create a new runtime environment and spawn a thread to run the script <code>/lib/modules/lua/&lt;script&gt;.lua</code></li>
<li><code>stop</code>: stop the runtime environment created to run the script <code>&lt;script&gt;</code></li>
<li><code>default</code>: start a <em>REPL (Read–Eval–Print Loop)</em></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Lua Version</h2><a id="user-content-lua-version" aria-label="Permalink: Lua Version" href="#lua-version"></a></p>
<p dir="auto">Lunatik 3.4 is based on
<a href="https://github.com/luainkernel/lua">Lua 5.4 adapted</a>
to run in the kernel.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Floating-point numbers</h3><a id="user-content-floating-point-numbers" aria-label="Permalink: Floating-point numbers" href="#floating-point-numbers"></a></p>
<p dir="auto">Lunatik <strong>does not</strong> support floating-point arithmetic,
thus it <strong>does not</strong> support <code>__div</code> nor <code>__pow</code>
<a href="https://www.lua.org/manual/5.4/manual.html#2.4" rel="nofollow">metamethods</a>
and the type <em>number</em> has only the subtype <em>integer</em>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Lua API</h3><a id="user-content-lua-api" aria-label="Permalink: Lua API" href="#lua-api"></a></p>
<p dir="auto">Lunatik <strong>does not</strong> support both <a href="https://www.lua.org/manual/5.4/manual.html#6.8" rel="nofollow">io</a> and
<a href="https://www.lua.org/manual/5.4/manual.html#6.9" rel="nofollow">os</a> libraries,
and the given identifiers from the following libraries:</p>
<ul dir="auto">
<li><a href="https://www.lua.org/manual/5.4/manual.html#pdf-debug.debug" rel="nofollow">debug.debug</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.acos" rel="nofollow">math.acos</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.asin" rel="nofollow">math.asin</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.atan" rel="nofollow">math.atan</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.ceil" rel="nofollow">math.ceil</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.cos" rel="nofollow">math.cos</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.deg" rel="nofollow">math.deg</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.exp" rel="nofollow">math.exp</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.floor" rel="nofollow">math.floor</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.fmod" rel="nofollow">math.fmod</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.huge" rel="nofollow">math.huge</a>.
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.log" rel="nofollow">math.log</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.modf" rel="nofollow">math.modf</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.pi" rel="nofollow">math.pi</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.rad" rel="nofollow">math.rad</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.random" rel="nofollow">math.random</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.randomseed" rel="nofollow">math.randomseed</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.sin" rel="nofollow">math.sin</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.sqrt" rel="nofollow">math.sqrt</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.tan" rel="nofollow">math.tan</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.type" rel="nofollow">math.type</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-package.cpath" rel="nofollow">package.cpath</a>.</li>
</ul>
<p dir="auto">Lunatik <strong>modifies</strong> the following identifiers:</p>
<ul dir="auto">
<li><a href="https://www.lua.org/manual/5.4/manual.html#pdf-_VERSION" rel="nofollow">_VERSION</a>: is defined as <code>"Lua 5.4-kernel"</code>.</li>
<li><a href="https://www.lua.org/manual/5.4/manual.html#pdf-collectgarbage" rel="nofollow">collectgarbage("count")</a>: returns the total memory in use by Lua in <strong>bytes</strong>, instead of <em>Kbytes</em>.</li>
<li><a href="https://www.lua.org/manual/5.4/manual.html#pdf-package.path" rel="nofollow">package.path</a>: is defined as <code>"/lib/modules/lua/?.lua;/lib/modules/lua/?/init.lua"</code>.</li>
<li><a href="https://www.lua.org/manual/5.4/manual.html#pdf-require" rel="nofollow">require</a>: only supports built-in or already linked C modules, that is, Lunatik <strong>cannot</strong> load kernel modules dynamically.</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">C API</h3><a id="user-content-c-api" aria-label="Permalink: C API" href="#c-api"></a></p>
<p dir="auto">Lunatik <strong>does not</strong> support
<a href="https://www.lua.org/manual/5.4/manual.html#luaL_Stream" rel="nofollow">luaL_Stream</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#luaL_execresult" rel="nofollow">luaL_execresult</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#luaL_fileresult" rel="nofollow">luaL_fileresult</a>,
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-luaopen_io" rel="nofollow">luaopen_io</a> and
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-luaopen_os" rel="nofollow">luaopen_os</a>.</p>
<p dir="auto">Lunatik <strong>modifies</strong> <a href="https://www.lua.org/manual/5.4/manual.html#luaL_openlibs" rel="nofollow">luaL_openlibs</a> to remove <a href="https://www.lua.org/manual/5.4/manual.html#pdf-luaopen_io" rel="nofollow">luaopen_io</a> and <a href="https://www.lua.org/manual/5.4/manual.html#pdf-luaopen_os" rel="nofollow">luaopen_os</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Lunatik C API</h2><a id="user-content-lunatik-c-api" aria-label="Permalink: Lunatik C API" href="#lunatik-c-api"></a></p>

<p dir="auto"><h4 tabindex="-1" dir="auto">lunatik_runtime</h4><a id="user-content-lunatik_runtime" aria-label="Permalink: lunatik_runtime" href="#lunatik_runtime"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="int lunatik_runtime(lunatik_object_t **pruntime, const char *script, bool sleep);"><pre><span>int</span> <span>lunatik_runtime</span>(<span>lunatik_object_t</span> <span>*</span><span>*</span><span>pruntime</span>, <span>const</span> <span>char</span> <span>*</span><span>script</span>, <span>bool</span> <span>sleep</span>);</pre></div>
<p dir="auto"><em>lunatik_runtime()</em> creates a new <code>runtime</code> environment then loads and runs the script
<code>/lib/modules/lua/&lt;script&gt;.lua</code> as the entry point for this environment.
It <em>must</em> only be called from <em>process context</em>.
The <code>runtime</code> environment is a Lunatik object that holds
a <a href="https://www.lua.org/manual/5.4/manual.html#lua_State" rel="nofollow">Lua state</a>.
Lunatik objects are special
Lua <a href="https://www.lua.org/manual/5.4/manual.html#2.1" rel="nofollow">userdata</a>
which also hold
a <a href="https://docs.kernel.org/locking/locktypes.html" rel="nofollow">lock type</a> and
a <a href="https://www.kernel.org/doc/Documentation/kref.txt" rel="nofollow">reference counter</a>.
If <code>sleep</code> is <em>true</em>, <em>lunatik_runtime()</em> will use a
<a href="https://docs.kernel.org/locking/mutex-design.html" rel="nofollow">mutex</a>
for locking the <code>runtime</code> environment and the
<a href="https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html" rel="nofollow">GFP_KERNEL</a>
flag for allocating new memory later on on
<a href="https://github.com/luainkernel/lunatik#lunatik_run">lunatik_run()</a> calls.
Otherwise, it will use a <a href="https://docs.kernel.org/locking/locktypes.html#raw-spinlock-t-and-spinlock-t" rel="nofollow">spinlock</a> and <a href="https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html" rel="nofollow">GFP_ATOMIC</a>.
<em>lunatik_runtime()</em> opens the Lua standard libraries
<a href="https://github.com/luainkernel/lunatik#c-api">present on Lunatik</a>.
If successful, <em>lunatik_runtime()</em> sets the address pointed by <code>pruntime</code> and
<a href="https://www.lua.org/manual/5.4/manual.html#lua_getextraspace" rel="nofollow">Lua's extra space</a>
with a pointer for the new created <code>runtime</code> environment,
sets the <em>reference counter</em> to <code>1</code> and then returns <code>0</code>.
Otherwise, it returns <code>-ENOMEM</code>, if insufficient memory is available;
or <code>-EINVAL</code>, if it fails to load or run the <code>script</code>.</p>
<p dir="auto"><h5 tabindex="-1" dir="auto">Example</h5><a id="user-content-example" aria-label="Permalink: Example" href="#example"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="-- /lib/modules/lua/mydevice.lua
function myread(len, off)
	return &quot;42&quot;
end"><pre><span><span>--</span> /lib/modules/lua/mydevice.lua</span>
<span>function</span> <span>myread</span>(<span>len</span>, <span>off</span>)
	<span>return</span> <span><span>"</span>42<span>"</span></span>
<span>end</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="static lunatik_object_t *runtime;

static int __init mydevice_init(void)
{
	return lunatik_runtime(&amp;runtime, &quot;mydevice&quot;, true);
}
"><pre><span>static</span> <span>lunatik_object_t</span> <span>*</span><span>runtime</span>;

<span>static</span> <span>int</span> <span>__init</span> <span>mydevice_init</span>(<span>void</span>)
{
	<span>return</span> <span>lunatik_runtime</span>(<span>&amp;</span><span>runtime</span>, <span>"mydevice"</span>, true);
}</pre></div>
<p dir="auto"><h4 tabindex="-1" dir="auto">lunatik_stop</h4><a id="user-content-lunatik_stop" aria-label="Permalink: lunatik_stop" href="#lunatik_stop"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="int lunatik_stop(lunatik_object_t *runtime);"><pre><span>int</span> <span>lunatik_stop</span>(<span>lunatik_object_t</span> <span>*</span><span>runtime</span>);</pre></div>
<p dir="auto"><em>lunatik_stop()</em>
<a href="https://www.lua.org/manual/5.4/manual.html#lua_close" rel="nofollow">closes</a>
the
<a href="https://www.lua.org/manual/5.4/manual.html#lua_State" rel="nofollow">Lua state</a>
created for this <code>runtime</code> environment and decrements the
<a href="https://www.kernel.org/doc/Documentation/kref.txt" rel="nofollow">reference counter</a>.
Once the reference counter is decremented to zero, the
<a href="https://docs.kernel.org/locking/locktypes.html" rel="nofollow">lock type</a>
and the memory allocated for the <code>runtime</code> environment are released.
If the <code>runtime</code> environment has been released, it returns <code>1</code>;
otherwise, it returns <code>0</code>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">lunatik_run</h4><a id="user-content-lunatik_run" aria-label="Permalink: lunatik_run" href="#lunatik_run"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="void lunatik_run(lunatik_object_t *runtime, <inttype> (*handler)(...), <inttype> &amp;ret, ...);"><pre><span>void</span> <span>lunatik_run</span>(<span>lunatik_object_t</span> <span>*</span><span>runtime</span>, <span>&lt;</span><span>inttype</span><span>&gt;</span> (<span>*</span><span>handler</span>)(...), <span>&lt;</span><span>inttype</span><span>&gt;</span> <span>&amp;</span><span>ret</span>, ...);</pre></div>
<p dir="auto"><em>lunatik_run()</em> locks the <code>runtime</code> environment and calls the <code>handler</code>
passing the associated Lua state as the first argument followed by the variadic arguments.
If the Lua state has been closed, <code>ret</code> is set with <code>-ENXIO</code>;
otherwise, <code>ret</code> is set with the result of <code>handler(L, ...)</code> call.
Then, it restores the Lua stack and unlocks the <code>runtime</code> environment.
It is defined as a macro.</p>
<p dir="auto"><h5 tabindex="-1" dir="auto">Example</h5><a id="user-content-example-1" aria-label="Permalink: Example" href="#example-1"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="static int l_read(lua_State *L, char *buf, size_t len, loff_t *off)
{
	size_t llen;
	const char *lbuf;

	lua_getglobal(L, &quot;myread&quot;);
	lua_pushinteger(L, len);
	lua_pushinteger(L, *off);
	if (lua_pcall(L, 2, 2, 0) != LUA_OK) { /* calls myread(len, off) */
		pr_err(&quot;%s\n&quot;, lua_tostring(L, -1));
		return -ECANCELED;
	}

	lbuf = lua_tolstring(L, -2, &amp;llen);
	llen = min(len, llen);
	if (copy_to_user(buf, lbuf, llen) != 0)
		return -EFAULT;

	*off = (loff_t)luaL_optinteger(L, -1, *off + llen);
	return (ssize_t)llen;
}

static ssize_t mydevice_read(struct file *f, char *buf, size_t len, loff_t *off)
{
	ssize_t ret;
	lunatik_object_t *runtime = (lunatik_object_t *)f->private_data;

	lunatik_run(runtime, l_read, ret, buf, len, off);
	return ret;
}"><pre><span>static</span> <span>int</span> <span>l_read</span>(<span>lua_State</span> <span>*</span><span>L</span>, <span>char</span> <span>*</span><span>buf</span>, <span>size_t</span> <span>len</span>, <span>loff_t</span> <span>*</span><span>off</span>)
{
	<span>size_t</span> <span>llen</span>;
	<span>const</span> <span>char</span> <span>*</span><span>lbuf</span>;

	<span>lua_getglobal</span>(<span>L</span>, <span>"myread"</span>);
	<span>lua_pushinteger</span>(<span>L</span>, <span>len</span>);
	<span>lua_pushinteger</span>(<span>L</span>, <span>*</span><span>off</span>);
	<span>if</span> (<span>lua_pcall</span>(<span>L</span>, <span>2</span>, <span>2</span>, <span>0</span>) <span>!=</span> <span>LUA_OK</span>) { <span>/* calls myread(len, off) */</span>
		<span>pr_err</span>(<span>"%s\n"</span>, <span>lua_tostring</span>(<span>L</span>, <span>-1</span>));
		<span>return</span> <span>-</span><span>ECANCELED</span>;
	}

	<span>lbuf</span> <span>=</span> <span>lua_tolstring</span>(<span>L</span>, <span>-2</span>, <span>&amp;</span><span>llen</span>);
	<span>llen</span> <span>=</span> <span>min</span>(<span>len</span>, <span>llen</span>);
	<span>if</span> (<span>copy_to_user</span>(<span>buf</span>, <span>lbuf</span>, <span>llen</span>) <span>!=</span> <span>0</span>)
		<span>return</span> <span>-</span><span>EFAULT</span>;

	<span>*</span><span>off</span> <span>=</span> (<span>loff_t</span>)<span>luaL_optinteger</span>(<span>L</span>, <span>-1</span>, <span>*</span><span>off</span> <span>+</span> <span>llen</span>);
	<span>return</span> (<span>ssize_t</span>)<span>llen</span>;
}

<span>static</span> <span>ssize_t</span> <span>mydevice_read</span>(<span>struct</span> <span>file</span> <span>*</span><span>f</span>, <span>char</span> <span>*</span><span>buf</span>, <span>size_t</span> <span>len</span>, <span>loff_t</span> <span>*</span><span>off</span>)
{
	<span>ssize_t</span> <span>ret</span>;
	<span>lunatik_object_t</span> <span>*</span><span>runtime</span> <span>=</span> (<span>lunatik_object_t</span> <span>*</span>)<span>f</span><span>-&gt;</span><span>private_data</span>;

	<span>lunatik_run</span>(<span>runtime</span>, <span>l_read</span>, <span>ret</span>, <span>buf</span>, <span>len</span>, <span>off</span>);
	<span>return</span> <span>ret</span>;
}</pre></div>
<p dir="auto"><h4 tabindex="-1" dir="auto">lunatik_getobject</h4><a id="user-content-lunatik_getobject" aria-label="Permalink: lunatik_getobject" href="#lunatik_getobject"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="void lunatik_getobject(lunatik_object_t *object);"><pre><span>void</span> <span>lunatik_getobject</span>(<span>lunatik_object_t</span> <span>*</span><span>object</span>);</pre></div>
<p dir="auto"><em>lunatik_getobject()</em> increments the
<a href="https://www.kernel.org/doc/Documentation/kref.txt" rel="nofollow">reference counter</a>
of this <code>object</code> (e.g., <code>runtime</code> environment).</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">lunatik_put</h4><a id="user-content-lunatik_put" aria-label="Permalink: lunatik_put" href="#lunatik_put"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="int lunatik_putobject(lunatik_object_t *object);"><pre><span>int</span> <span>lunatik_putobject</span>(<span>lunatik_object_t</span> <span>*</span><span>object</span>);</pre></div>
<p dir="auto"><em>lunatik_putobject()</em> decrements the
<a href="https://www.kernel.org/doc/Documentation/kref.txt" rel="nofollow">reference counter</a>
of this <code>object</code> (e.g., <code>runtime</code> environment).
If the <code>object</code> has been released, it returns <code>1</code>;
otherwise, it returns <code>0</code>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">lunatik_toruntime</h4><a id="user-content-lunatik_toruntime" aria-label="Permalink: lunatik_toruntime" href="#lunatik_toruntime"></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="lunatik_object_t *lunatik_toruntime(lua_State *L);"><pre><span>lunatik_object_t</span> <span>*</span><span>lunatik_toruntime</span>(<span>lua_State</span> <span>*</span><span>L</span>);</pre></div>
<p dir="auto"><em>lunatik_toruntime()</em> returns the <code>runtime</code> environment referenced by the <code>L</code>'s
<a href="https://www.lua.org/manual/5.4/manual.html#lua_getextraspace" rel="nofollow">extra space</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Lunatik Lua APIs</h2><a id="user-content-lunatik-lua-apis" aria-label="Permalink: Lunatik Lua APIs" href="#lunatik-lua-apis"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">lunatik</h3><a id="user-content-lunatik-2" aria-label="Permalink: lunatik" href="#lunatik-2"></a></p>
<p dir="auto">The <code>lunatik</code> library provides support to load and run scripts and manage runtime environments from Lua.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>lunatik.runtime(script [, sleep])</code></h4><a id="user-content-lunatikruntimescript--sleep" aria-label="Permalink: lunatik.runtime(script [, sleep])" href="#lunatikruntimescript--sleep"></a></p>
<p dir="auto"><em>lunatik.runtime()</em> creates a new
<a href="https://github.com/luainkernel/lunatik#lunatik_runtime">runtime environment</a>
then loads and runs the script
<code>/lib/modules/lua/&lt;script&gt;.lua</code> as the entry point for this environment.
It returns a Lunatik object representing the <code>runtime</code> environment.
If <code>sleep</code> is <em>true</em> or omitted, it will use a <a href="https://docs.kernel.org/locking/mutex-design.html" rel="nofollow">mutex</a>
and
<a href="https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html" rel="nofollow">GFP_KERNEL</a>;
otherwise, it will use a <a href="https://docs.kernel.org/locking/locktypes.html#raw-spinlock-t-and-spinlock-t" rel="nofollow">spinlock</a> and <a href="https://www.kernel.org/doc/html/latest/core-api/memory-allocation.html" rel="nofollow">GFP_ATOMIC</a>.
<em>lunatik.runtime()</em> opens the Lua standard libraries
<a href="https://github.com/luainkernel/lunatik#c-api">present on Lunatik</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>lunatik.stop(runtime)</code>, <code>runtime:stop()</code></h4><a id="user-content-lunatikstopruntime-runtimestop" aria-label="Permalink: lunatik.stop(runtime), runtime:stop()" href="#lunatikstopruntime-runtimestop"></a></p>
<p dir="auto"><em>lunatik.stop()</em>
<a href="https://github.com/luainkernel/lunatik#lunatik_stop">stops</a>
the <code>runtime</code> environment and clear its reference from the runtime object.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">device</h3><a id="user-content-device" aria-label="Permalink: device" href="#device"></a></p>
<p dir="auto">The <code>device</code> library provides support for writting
<a href="https://static.lwn.net/images/pdf/LDD3/ch03.pdf" rel="nofollow">character device drivers</a>
in Lua.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>device.new(driver)</code></h4><a id="user-content-devicenewdriver" aria-label="Permalink: device.new(driver)" href="#devicenewdriver"></a></p>
<p dir="auto"><em>device.new()</em> returns a new <code>device</code> object
and installs its <code>driver</code> in the system.
The <code>driver</code> <strong>must</strong> be defined as a table containing the following field:</p>
<ul dir="auto">
<li><code>name</code>: string defining the device name; it is used for creating the device file (e.g., <code>/dev/&lt;name&gt;</code>).</li>
</ul>
<p dir="auto">The <code>driver</code> table might optionally contain the following fields:</p>
<ul dir="auto">
<li><code>read</code>: callback function to handle the
<a href="https://docs.kernel.org/filesystems/vfs.html#id2" rel="nofollow">read operation</a>
on the device file.
It receives the <code>driver</code> table as the first argument
followed by two integers,
the <code>length</code> to be read and the file <code>offset</code>.
It should return a string and, optionally, the <code>updated offset</code>.
If the length of the returned string is greater than the requested <code>length</code>,
the string will be corrected to that <code>length</code>.
If the <code>updated offset</code> is not returned, the <code>offset</code> will be updated with <code>offset + length</code>.</li>
<li><code>write</code>: callback function to handle the
<a href="https://docs.kernel.org/filesystems/vfs.html#id2" rel="nofollow">write operation</a>
on the device file.
It receives the <code>driver</code> table as the first argument
followed by the string to be written and
an integer as the file <code>offset</code>.
It might return optionally the written <code>length</code> followed by the <code>updated offset</code>.
If the returned length is greater than the requested <code>length</code>,
the returned length will be corrected.
If the <code>updated offset</code> is not returned, the <code>offset</code> will be updated with <code>offset + length</code>.</li>
<li><code>open</code>: callback function to handle the
<a href="https://docs.kernel.org/filesystems/vfs.html#id2" rel="nofollow">open operation</a>
on the device file.
It receives the <code>driver</code> table and it is expected to return nothing.</li>
<li><code>release</code>: callback function to handle the
<a href="https://docs.kernel.org/filesystems/vfs.html#id2" rel="nofollow">release operation</a>
on the device file.
It receives the <code>driver</code> table and it is expected to return nothing.</li>
<li><code>mode</code>: an integer specifying the device
<a href="https://github.com/luainkernel/lunatik#linuxstat">file mode</a>.</li>
</ul>
<p dir="auto">If an operation callback is not defined, the <code>device</code> returns <code>-ENXIO</code> to VFS on its access.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>device.stop(dev)</code>, <code>dev:stop()</code></h4><a id="user-content-devicestopdev-devstop" aria-label="Permalink: device.stop(dev), dev:stop()" href="#devicestopdev-devstop"></a></p>
<p dir="auto"><em>device.stop()</em> removes a device <code>driver</code> specified by the <code>dev</code> object from the system.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">linux</h3><a id="user-content-linux" aria-label="Permalink: linux" href="#linux"></a></p>
<p dir="auto">The <code>linux</code> library provides support for some Linux kernel facilities.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>linux.random([m [, n]])</code></h4><a id="user-content-linuxrandomm--n" aria-label="Permalink: linux.random([m [, n]])" href="#linuxrandomm--n"></a></p>
<p dir="auto"><em>linux.random()</em> mimics the behavior of
<a href="https://www.lua.org/manual/5.4/manual.html#pdf-math.random" rel="nofollow">math.random</a>,
but binding <em>&lt;linux/random.h&gt;</em>'s
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/random.h#L42" rel="nofollow">get_random_u32()</a>
and
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/random.h#L43" rel="nofollow">get_random_u64()</a>
APIs.</p>
<p dir="auto">When called without arguments,
produces an integer with all bits (pseudo)random.
When called with two integers <code>m</code> and <code>n</code>,
<em>linux.random()</em> returns a pseudo-random integer with uniform distribution in the range <code>[m, n]</code>.
The call <code>math.random(n)</code>, for a positive <code>n</code>, is equivalent to <code>math.random(1, n)</code>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>linux.stat</code></h4><a id="user-content-linuxstat" aria-label="Permalink: linux.stat" href="#linuxstat"></a></p>
<p dir="auto"><em>linux.stat</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/stat.h" rel="nofollow">&lt;linux/stat.h&gt;</a>
integer flags to Lua.</p>
<ul dir="auto">
<li><code>"IRWXUGO"</code>: permission to <em>read</em>, <em>write</em> and <em>execute</em> for <em>user</em>, <em>group</em> and <em>other</em>.</li>
<li><code>"IRUGO"</code>: permission only to <em>read</em> for <em>user</em>, <em>group</em> and <em>other</em>.</li>
<li><code>"IWUGO"</code>: permission only to <em>write</em> for <em>user</em>, <em>group</em> and <em>other</em>.</li>
<li><code>"IXUGO"</code>: permission only to <em>execute</em> for <em>user</em>, <em>group</em> and <em>other</em>.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>linux.schedule([timeout [, state]])</code></h4><a id="user-content-linuxscheduletimeout--state" aria-label="Permalink: linux.schedule([timeout [, state]])" href="#linuxscheduletimeout--state"></a></p>
<p dir="auto"><em>linux.schedule()</em> sets the current task <code>state</code> and makes the it sleep until <code>timeout</code> milliseconds have elapsed.
If <code>timeout</code> is omitted, it uses <code>MAX_SCHEDULE_TIMEOUT</code>.
If <code>state</code> is omitted, it uses <code>task.INTERRUPTIBLE</code>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>linux.task</code></h4><a id="user-content-linuxtask" aria-label="Permalink: linux.task" href="#linuxtask"></a></p>
<p dir="auto"><em>linux.task</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/sched.h#L7v3" rel="nofollow">task state</a>
flags to Lua.</p>
<ul dir="auto">
<li><code>"RUNNING"</code>: task is executing on a CPU or waiting to be executed.</li>
<li><code>"INTERRUPTIBLE"</code>: task is waiting for a signal or a resource (sleeping).</li>
<li><code>"UNINTERRUPTIBLE"</code>: behaves like "INTERRUPTIBLE" with the exception that signal will not wake up the task.</li>
<li><code>"KILLABLE"</code>: behaves like "UNINTERRUPTIBLE" with the exception that fatal signals will wake up the task.</li>
<li><code>"IDLE"</code>: behaves like "UNINTERRUPTIBLE" with the exception that it avoids the loadavg accounting.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>linux.errno</code></h4><a id="user-content-linuxerrno" aria-label="Permalink: linux.errno" href="#linuxerrno"></a></p>
<p dir="auto"><em>linux.errno</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/latest/source/include/uapi/asm-generic/errno-base.h" rel="nofollow">&lt;uapi/asm-generic/errno-base.h&gt;</a>
flags to Lua.</p>
<ul dir="auto">
<li><code>"PERM"</code>: Operation not permitted.</li>
<li><code>"NOENT"</code>: No such file or directory.</li>
<li><code>"SRCH"</code>: No such process.</li>
<li><code>"INTR"</code>: Interrupted system call.</li>
<li><code>"IO"</code>: I/O error.</li>
<li><code>"NXIO"</code>:No such device or address.</li>
<li><code>"2BIG"</code>:, Argument list too long.</li>
<li><code>"NOEXEC"</code>: Exec format error.</li>
<li><code>"BADF"</code>: Bad file number.</li>
<li><code>"CHILD"</code>: No child processes.</li>
<li><code>"AGAIN"</code>: Try again.</li>
<li><code>"NOMEM"</code>: Out of memory.</li>
<li><code>"ACCES"</code>: Permission denied.</li>
<li><code>"FAULT"</code>: Bad address.</li>
<li><code>"NOTBLK"</code>: Block device required.</li>
<li><code>"BUSY"</code>: Device or resource busy.</li>
<li><code>"EXIST"</code>: File exists.</li>
<li><code>"XDEV"</code>: Cross-device link.</li>
<li><code>"NODEV"</code>: No such device.</li>
<li><code>"NOTDIR"</code>: Not a directory.</li>
<li><code>"ISDIR"</code>: Is a directory.</li>
<li><code>"INVAL"</code>: Invalid argument.</li>
<li><code>"NFILE"</code>: File table overflow.</li>
<li><code>"MFILE"</code>: Too many open files.</li>
<li><code>"NOTTY"</code>: Not a typewriter.</li>
<li><code>"TXTBSY"</code>: Text file busy.</li>
<li><code>"FBIG"</code>: File too large.</li>
<li><code>"NOSPC"</code>: No space left on device.</li>
<li><code>"SPIPE"</code>: Illegal seek.</li>
<li><code>"ROFS"</code>: Read-only file system.</li>
<li><code>"MLINK"</code>: Too many links.</li>
<li><code>"PIPE"</code>: Broken pipe.</li>
<li><code>"DOM"</code>: Math argument out of domain of func.</li>
<li><code>"RANGE"</code>: Math result not representable.</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">notifier</h3><a id="user-content-notifier" aria-label="Permalink: notifier" href="#notifier"></a></p>
<p dir="auto">The <code>notifier</code> library provides support for the kernel
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/notifier.h" rel="nofollow">notifier chains</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>notifier.keyboard(callback)</code></h4><a id="user-content-notifierkeyboardcallback" aria-label="Permalink: notifier.keyboard(callback)" href="#notifierkeyboardcallback"></a></p>
<p dir="auto"><em>notifier.keyboard()</em> returns a new keyboard <code>notifier</code> object and installs it in the system.
The <code>callback</code> function is called whenever a console keyboard event happens
(e.g., a key has been pressed or released).
This <code>callback</code> receives the following arguments:</p>
<ul dir="auto">
<li><code>event</code>: the available <em>events</em> are defined by the
<a href="https://github.com/luainkernel/lunatik#notifierkbd">notifier.kbd</a> table.</li>
<li><code>down</code>: <code>true</code>, if the key is pressed; <code>false</code>, if it is released.</li>
<li><code>shift</code>: <code>true</code>, if the shift key is held; <code>false</code>, otherwise.</li>
<li><code>key</code>: <em>keycode</em> or <em>keysym</em> depending on <code>event</code>.</li>
</ul>
<p dir="auto">The <code>callback</code> function might return the values defined by the
<a href="https://github.com/luainkernel/lunatik#notifiernotify">notifier.notify</a> table.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>notifier.kbd</code></h4><a id="user-content-notifierkbd" aria-label="Permalink: notifier.kbd" href="#notifierkbd"></a></p>
<p dir="auto"><em>notifier.kbd</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/notifier.h#L229" rel="nofollow">KBD</a>
flags to Lua.</p>
<ul dir="auto">
<li><code>"KEYCODE"</code>: keyboard <em>keycode</em>, called before any other.</li>
<li><code>"UNBOUND_KEYCODE"</code>: keyboard <em>keycode</em> which is not bound to any other.</li>
<li><code>"UNICODE"</code>: keyboard unicode.</li>
<li><code>"KEYSYM"</code>: keyboard <em>keysym</em>.</li>
<li><code>"POST_KEYSYM"</code>: called after keyboard <em>keysym</em> interpretation.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>notifier.netdevice(callback)</code></h4><a id="user-content-notifiernetdevicecallback" aria-label="Permalink: notifier.netdevice(callback)" href="#notifiernetdevicecallback"></a></p>
<p dir="auto"><em>notifier.netdevice()</em> returns a new netdevice <code>notifier</code> object and installs it in the system.
The <code>callback</code> function is called whenever a console netdevice event happens
(e.g., a network interface has been connected or disconnected).
This <code>callback</code> receives the following arguments:</p>
<ul dir="auto">
<li><code>event</code>: the available <em>events</em> are defined by the
<a href="https://github.com/luainkernel/lunatik#notifiernetdev">notifier.netdev</a> table.</li>
<li><code>name</code>: the device name.</li>
</ul>
<p dir="auto">The <code>callback</code> function might return the values defined by the
<a href="https://github.com/luainkernel/lunatik#notifiernotify">notifier.notify</a> table.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>notifier.netdev</code></h4><a id="user-content-notifiernetdev" aria-label="Permalink: notifier.netdev" href="#notifiernetdev"></a></p>
<p dir="auto"><em>notifier.netdev</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/v6.3/source/include/linux/netdevice.h#L2812" rel="nofollow">NETDEV</a>
flags to Lua.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>notifier.notify</code></h4><a id="user-content-notifiernotify" aria-label="Permalink: notifier.notify" href="#notifiernotify"></a></p>
<p dir="auto"><em>notifier.notify</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/notifier.h#L183" rel="nofollow">NOTIFY</a>
flags to Lua.</p>
<ul dir="auto">
<li><code>"DONE"</code>: don't care.</li>
<li><code>"OK"</code>: suits me.</li>
<li><code>"BAD"</code>: bad/veto action.</li>
<li><code>"STOP"</code>: clean way to return from the notifier and stop further calls.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>notifier.delete(notfr)</code>, <code>notfr:delete()</code></h4><a id="user-content-notifierdeletenotfr-notfrdelete" aria-label="Permalink: notifier.delete(notfr), notfr:delete()" href="#notifierdeletenotfr-notfrdelete"></a></p>
<p dir="auto"><em>notifier.delete()</em> removes a <code>notifier</code> specified by the <code>notfr</code> object from the system.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">socket</h3><a id="user-content-socket" aria-label="Permalink: socket" href="#socket"></a></p>
<p dir="auto">The <code>socket</code> library provides support for the kernel
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/net.h" rel="nofollow">networking handling</a>.
This library was inspired by
<a href="https://github.com/tcz717">Chengzhi Tan</a>'s
<a href="https://summerofcode.withgoogle.com/archive/2018/projects/5993341447569408" rel="nofollow">GSoC project</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.new(family, type, protocol)</code></h4><a id="user-content-socketnewfamily-type-protocol" aria-label="Permalink: socket.new(family, type, protocol)" href="#socketnewfamily-type-protocol"></a></p>
<p dir="auto"><em>socket.new()</em> creates a new <code>socket</code> object.
This function receives the following arguments:</p>
<ul dir="auto">
<li><code>family</code>: the available <em>address families</em> are defined by the
<a href="https://github.com/luainkernel/lunatik#socketaf">socket.af</a> table.</li>
<li><code>sock</code>: the available <em>types</em> are present on the
<a href="https://github.com/luainkernel/lunatik#socketsock">socket.sock</a> table.</li>
<li><code>protocol</code>: the available <em>protocols</em> are defined by the
<a href="https://github.com/luainkernel/lunatik#socketipproto">socket.ipproto</a> table.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.af</code></h4><a id="user-content-socketaf" aria-label="Permalink: socket.af" href="#socketaf"></a></p>
<p dir="auto"><em>socket.af</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/socket.h#L187" rel="nofollow">address families (AF)</a>
to Lua.</p>
<ul dir="auto">
<li><code>"UNSPEC"</code>: Unspecified.</li>
<li><code>"UNIX"</code>: Unix domain sockets.</li>
<li><code>"LOCAL"</code>: POSIX name for AF_UNIX.</li>
<li><code>"INET"</code>: Internet IP Protocol.</li>
<li><code>"AX25"</code>: Amateur Radio AX.25.</li>
<li><code>"IPX"</code>: Novell IPX.</li>
<li><code>"APPLETALK"</code>: AppleTalk DDP.</li>
<li><code>"NETROM"</code>: Amateur Radio NET/ROM.</li>
<li><code>"BRIDGE"</code>: Multiprotocol bridge.</li>
<li><code>"ATMPVC"</code>: ATM PVCs.</li>
<li><code>"X25"</code>: Reserved for X.25 project.</li>
<li><code>"INET6"</code>: IP version 6.</li>
<li><code>"ROSE"</code>: Amateur Radio X.25 PLP.</li>
<li><code>"DEC"</code>: Reserved for DECnet project.</li>
<li><code>"NETBEUI"</code>: Reserved for 802.2LLC project.</li>
<li><code>"SECURITY"</code>: Security callback pseudo AF.</li>
<li><code>"KEY"</code>: PF_KEY key management API.</li>
<li><code>"NETLINK"</code>: Netlink.</li>
<li><code>"ROUTE"</code>: Alias to emulate 4.4BSD.</li>
<li><code>"PACKET"</code>: Packet family.</li>
<li><code>"ASH"</code>: Ash.</li>
<li><code>"ECONET"</code>: Acorn Econet.</li>
<li><code>"ATMSVC"</code>: ATM SVCs.</li>
<li><code>"RDS"</code>: RDS sockets.</li>
<li><code>"SNA"</code>: Linux SNA Project (nutters!).</li>
<li><code>"IRDA"</code>: IRDA sockets.</li>
<li><code>"PPPOX"</code>: PPPoX sockets.</li>
<li><code>"WANPIPE"</code>: Wanpipe API Sockets.</li>
<li><code>"LLC"</code>: Linux LLC.</li>
<li><code>"IB"</code>: Native InfiniBand address.</li>
<li><code>"MPLS"</code>: MPLS.</li>
<li><code>"CAN"</code>: Controller Area Network.</li>
<li><code>"TIPC"</code>: TIPC sockets.</li>
<li><code>"BLUETOOTH"</code>: Bluetooth sockets.</li>
<li><code>"IUCV"</code>: IUCV sockets.</li>
<li><code>"RXRPC"</code>: RxRPC sockets.</li>
<li><code>"ISDN"</code>: mISDN sockets.</li>
<li><code>"PHONET"</code>: Phonet sockets.</li>
<li><code>"IEEE802154"</code>: IEEE802154 sockets.</li>
<li><code>"CAIF"</code>: CAIF sockets.</li>
<li><code>"ALG"</code>: Algorithm sockets.</li>
<li><code>"NFC"</code>: NFC sockets.</li>
<li><code>"VSOCK"</code>: vSockets.</li>
<li><code>"KCM"</code>: Kernel Connection Multiplexor.</li>
<li><code>"QIPCRTR"</code>: Qualcomm IPC Router.</li>
<li><code>"SMC"</code>: reserve number for PF_SMC protocol family that reuses AF_INET address family.</li>
<li><code>"XDP"</code>: XDP sockets.</li>
<li><code>"MCTP"</code>: Management component transport protocol.</li>
<li><code>"MAX"</code>: Maximum.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.sock</code></h4><a id="user-content-socketsock" aria-label="Permalink: socket.sock" href="#socketsock"></a></p>
<p dir="auto"><em>socket.sock</em> is a table that exports socket
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/net.h#L49" rel="nofollow">types (SOCK)</a>:</p>
<ul dir="auto">
<li><code>"STREAM"</code>: stream (connection) socket.</li>
<li><code>"DGRAM"</code>: datagram (conn.less) socket.</li>
<li><code>"RAW"</code>: raw socket.</li>
<li><code>"RDM"</code>: reliably-delivered message.</li>
<li><code>"SEQPACKET"</code>: sequential packet socket.</li>
<li><code>"DCCP"</code>: Datagram Congestion Control Protocol socket.</li>
<li><code>"PACKET"</code>: linux specific way of getting packets at the dev level.</li>
</ul>
<p dir="auto">and <a href="https://elixir.bootlin.com/linux/latest/source/include/linux/net.h#L78" rel="nofollow">flags (SOCK)</a>:</p>
<ul dir="auto">
<li><code>"CLOEXEC"</code>: n/a.</li>
<li><code>"NONBLOCK"</code>: n/a.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.ipproto</code></h4><a id="user-content-socketipproto" aria-label="Permalink: socket.ipproto" href="#socketipproto"></a></p>
<p dir="auto"><em>socket.ipproto</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/latest/source/include/uapi/linux/in.h#L27" rel="nofollow">IP protocols (IPPROTO)</a>
to Lua.</p>
<ul dir="auto">
<li><code>"IP"</code>: Dummy protocol for TCP.</li>
<li><code>"ICMP"</code>: Internet Control Message Protocol.</li>
<li><code>"IGMP"</code>: Internet Group Management Protocol.</li>
<li><code>"IPIP"</code>: IPIP tunnels (older KA9Q tunnels use 94).</li>
<li><code>"TCP"</code>: Transmission Control Protocol.</li>
<li><code>"EGP"</code>: Exterior Gateway Protocol.</li>
<li><code>"PUP"</code>: PUP protocol.</li>
<li><code>"UDP"</code>: User Datagram Protocol.</li>
<li><code>"IDP"</code>: XNS IDP protocol.</li>
<li><code>"TP"</code>: SO Transport Protocol Class 4.</li>
<li><code>"DCCP"</code>: Datagram Congestion Control Protocol.</li>
<li><code>"IPV6"</code>: IPv6-in-IPv4 tunnelling.</li>
<li><code>"RSVP"</code>: RSVP Protocol.</li>
<li><code>"GRE"</code>: Cisco GRE tunnels (rfc 1701,1702).</li>
<li><code>"ESP"</code>: Encapsulation Security Payload protocol.</li>
<li><code>"AH"</code>: Authentication Header protocol.</li>
<li><code>"MTP"</code>: Multicast Transport Protocol.</li>
<li><code>"BEETPH"</code>: IP option pseudo header for BEET.</li>
<li><code>"ENCAP"</code>: Encapsulation Header.</li>
<li><code>"PIM"</code>: Protocol Independent Multicast.</li>
<li><code>"COMP"</code>: Compression Header Protocol.</li>
<li><code>"SCTP"</code>: Stream Control Transport Protocol.</li>
<li><code>"UDPLITE"</code>: UDP-Lite (RFC 3828).</li>
<li><code>"MPLS"</code>: MPLS in IP (RFC 4023).</li>
<li><code>"ETHERNET"</code>: Ethernet-within-IPv6 Encapsulation.</li>
<li><code>"RAW"</code>: Raw IP packets.</li>
<li><code>"MPTCP"</code>: Multipath TCP connection.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket:close(sock)</code>, <code>sock:close()</code></h4><a id="user-content-socketclosesock-sockclose" aria-label="Permalink: socket:close(sock), sock:close()" href="#socketclosesock-sockclose"></a></p>
<p dir="auto"><em>socket.close()</em> removes <code>sock</code> object from the system.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.send(sock, message, [addr [, port]])</code>, <code>sock:send(message, [addr [, port]])</code></h4><a id="user-content-socketsendsock-message-addr--port-socksendmessage-addr--port" aria-label="Permalink: socket.send(sock, message, [addr [, port]]), sock:send(message, [addr [, port]])" href="#socketsendsock-message-addr--port-socksendmessage-addr--port"></a></p>
<p dir="auto"><em>socket.send()</em> sends a string <code>message</code> through the socket <code>sock</code>.
If the <code>sock</code> address family is <code>af.INET</code>, then it expects the following arguments:</p>
<ul dir="auto">
<li><code>addr</code>: <code>integer</code> describing the destination IPv4 address.</li>
<li><code>port</code>: <code>integer</code> describing the destination IPv4 port.</li>
</ul>
<p dir="auto">Otherwise:</p>
<ul dir="auto">
<li><code>addr</code>: <a href="https://www.lua.org/manual/5.4/manual.html#6.4.2" rel="nofollow">packed string</a> describing the destination address.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.receive(sock, length, [flags [, from]])</code>, <code>sock:receive(length, [flags [, from]])</code></h4><a id="user-content-socketreceivesock-length-flags--from-sockreceivelength-flags--from" aria-label="Permalink: socket.receive(sock, length, [flags [, from]]), sock:receive(length, [flags [, from]])" href="#socketreceivesock-length-flags--from-sockreceivelength-flags--from"></a></p>
<p dir="auto"><em>socket.receive()</em> receives a string with up to <code>length</code> bytes through the socket <code>sock</code>.
The available <em>message flags</em> are defined by the
<a href="https://github.com/luainkernel/lunatik#socketmsg">socket.msg</a> table.
If <code>from</code> is <code>true</code>, it returns the received message followed by the peer's address.
Otherwise, it returns only the received message.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.msg</code></h4><a id="user-content-socketmsg" aria-label="Permalink: socket.msg" href="#socketmsg"></a></p>
<p dir="auto"><em>socket.msg</em> is a table that exports
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/socket.h#L298" rel="nofollow">message flags</a>
to Lua.</p>
<ul dir="auto">
<li><code>"OOB"</code>: n/a.</li>
<li><code>"PEEK"</code>: n/a.</li>
<li><code>"DONTROUTE"</code>: n/a.</li>
<li><code>"TRYHARD"</code>: Synonym for <code>"DONTROUTE"</code> for DECnet.</li>
<li><code>"CTRUNC"</code>: n/a.</li>
<li><code>"PROBE"</code>: Do not send. Only probe path f.e. for MTU.</li>
<li><code>"TRUNC"</code>: n/a.</li>
<li><code>"DONTWAIT"</code>: Nonblocking io.</li>
<li><code>"EOR"</code>: End of record.</li>
<li><code>"WAITALL"</code>: Wait for a full request.</li>
<li><code>"FIN"</code>: n/a.</li>
<li><code>"SYN"</code>: n/a.</li>
<li><code>"CONFIRM"</code>: Confirm path validity.</li>
<li><code>"RST"</code>: n/a.</li>
<li><code>"ERRQUEUE"</code>: Fetch message from error queue.</li>
<li><code>"NOSIGNAL"</code>: Do not generate SIGPIPE.</li>
<li><code>"MORE"</code>: Sender will send more.</li>
<li><code>"WAITFORONE"</code>: recvmmsg(): block until 1+ packets avail.</li>
<li><code>"SENDPAGE_NOPOLICY"</code>: sendpage() internal: do no apply policy.</li>
<li><code>"SENDPAGE_NOTLAST"</code>: sendpage() internal: not the last page.</li>
<li><code>"BATCH"</code>: sendmmsg(): more messages coming.</li>
<li><code>"EOF"</code>: n/a.</li>
<li><code>"NO_SHARED_FRAGS"</code>: sendpage() internal: page frags are not shared.</li>
<li><code>"SENDPAGE_DECRYPTED"</code>: sendpage() internal: page may carry plain text and require encryption.</li>
<li><code>"ZEROCOPY"</code>: Use user data in kernel path.</li>
<li><code>"FASTOPEN"</code>: Send data in TCP SYN.</li>
<li><code>"CMSG_CLOEXEC"</code>: Set close_on_exec for file descriptor received through SCM_RIGHTS.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.bind(sock, addr [, port])</code>, <code>sock:bind(addr [, port])</code></h4><a id="user-content-socketbindsock-addr--port-sockbindaddr--port" aria-label="Permalink: socket.bind(sock, addr [, port]), sock:bind(addr [, port])" href="#socketbindsock-addr--port-sockbindaddr--port"></a></p>
<p dir="auto"><em>socket.bind()</em> binds the socket <code>sock</code> to a given address.
If the <code>sock</code> address family is <code>af.INET</code>, then it expects the following arguments:</p>
<ul dir="auto">
<li><code>addr</code>: <code>integer</code> describing host IPv4 address.</li>
<li><code>port</code>: <code>integer</code> describing host IPv4 port.</li>
</ul>
<p dir="auto">Otherwise:</p>
<ul dir="auto">
<li><code>addr</code>: <a href="https://www.lua.org/manual/5.4/manual.html#6.4.2" rel="nofollow">packed string</a> describing host address.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.listen(sock [, backlog])</code>, <code>sock:listen([backlog])</code></h4><a id="user-content-socketlistensock--backlog-socklistenbacklog" aria-label="Permalink: socket.listen(sock [, backlog]), sock:listen([backlog])" href="#socketlistensock--backlog-socklistenbacklog"></a></p>
<p dir="auto"><em>socket.listen()</em> moves the socket <code>sock</code> to listening state.</p>
<ul dir="auto">
<li><code>backlog</code>: pending connections queue size.
If omitted, it uses
<a href="https://elixir.bootlin.com/linux/latest/source/include/linux/socket.h#L296" rel="nofollow">SOMAXCONN</a>
as default.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.accept(sock [, flags])</code>, <code>sock:accept([flags])</code></h4><a id="user-content-socketacceptsock--flags-sockacceptflags" aria-label="Permalink: socket.accept(sock [, flags]), sock:accept([flags])" href="#socketacceptsock--flags-sockacceptflags"></a></p>
<p dir="auto"><em>socket.accept()</em> accepts a connection on socket <code>sock</code>.
It returns a new <code>socket</code> object.
The available <em>flags</em> are present on the
<a href="https://github.com/luainkernel/lunatik#socketsock">socket.sock</a> table.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.connect(sock, addr [, port] [, flags])</code>, <code>sock:connect(addr [, port] [, flags])</code></h4><a id="user-content-socketconnectsock-addr--port--flags-sockconnectaddr--port--flags" aria-label="Permalink: socket.connect(sock, addr [, port] [, flags]), sock:connect(addr [, port] [, flags])" href="#socketconnectsock-addr--port--flags-sockconnectaddr--port--flags"></a></p>
<p dir="auto"><em>socket.connect()</em> connects the socket <code>sock</code> to the address <code>addr</code>.
If the <code>sock</code> address family is <code>af.INET</code>, then it expects the following arguments:</p>
<ul dir="auto">
<li><code>addr</code>: <code>integer</code> describing the destination IPv4 address.</li>
<li><code>port</code>: <code>integer</code> describing the destination IPv4 port.</li>
</ul>
<p dir="auto">Otherwise:</p>
<ul dir="auto">
<li><code>addr</code>: <a href="https://www.lua.org/manual/5.4/manual.html#6.4.2" rel="nofollow">packed string</a> describing the destination address.</li>
</ul>
<p dir="auto">The available <em>flags</em> are present on the
<a href="https://github.com/luainkernel/lunatik#socketsock">socket.sock</a> table.</p>
<p dir="auto">For datagram sockets, <code>addr</code> is the address to which datagrams are sent
by default, and the only address from which datagrams are received.
For stream sockets, attempts to connect to <code>addr</code>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.getsockname(sock)</code>, <code>sock:getsockname()</code></h4><a id="user-content-socketgetsocknamesock-sockgetsockname" aria-label="Permalink: socket.getsockname(sock), sock:getsockname()" href="#socketgetsocknamesock-sockgetsockname"></a></p>
<p dir="auto"><em>socket.getsockname()</em> get the address which the socket <code>sock</code> is bound.
If the <code>sock</code> address family is <code>af.INET</code>, then it returns the following:</p>
<ul dir="auto">
<li><code>addr</code>: <code>integer</code> describing the bounded IPv4 address.</li>
<li><code>port</code>: <code>integer</code> describing the bounded IPv4 port.</li>
</ul>
<p dir="auto">Otherwise:</p>
<ul dir="auto">
<li><code>addr</code>: <a href="https://www.lua.org/manual/5.4/manual.html#6.4.2" rel="nofollow">packed string</a> describing the bounded address.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>socket.getpeername(sock)</code>, <code>sock:getpeername()</code></h4><a id="user-content-socketgetpeernamesock-sockgetpeername" aria-label="Permalink: socket.getpeername(sock), sock:getpeername()" href="#socketgetpeernamesock-sockgetpeername"></a></p>
<p dir="auto"><em>socket.getpeername()</em> get the address which the socket <code>sock</code> is connected.
If the <code>sock</code> address family is <code>af.INET</code>, then it returns the following:</p>
<ul dir="auto">
<li><code>addr</code>: <code>integer</code> describing the peer's IPv4 address.</li>
<li><code>port</code>: <code>integer</code> describing the peer's IPv4 port.</li>
</ul>
<p dir="auto">Otherwise:</p>
<ul dir="auto">
<li><code>addr</code>: <a href="https://www.lua.org/manual/5.4/manual.html#6.4.2" rel="nofollow">packed string</a> describing the peer's address.</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">socket.inet</h3><a id="user-content-socketinet" aria-label="Permalink: socket.inet" href="#socketinet"></a></p>
<p dir="auto">The <code>socket.inet</code> library provides support for high-level IPv4 sockets.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>inet.tcp()</code></h4><a id="user-content-inettcp" aria-label="Permalink: inet.tcp()" href="#inettcp"></a></p>
<p dir="auto"><em>inet.tcp()</em> creates a new <code>socket</code> using
<a href="https://github.com/luainkernel/lunatik#socketaf">af.INET</a> address family,
<a href="https://github.com/luainkernel/lunatik#socketsock">sock.STREAM</a> type
and
<a href="https://github.com/luainkernel/lunatik#socketipproto">ipproto.TCP</a> protocol.
It overrides <code>socket</code> methods to use addresses as <em>numbers-and-dots notation</em>
(e.g., <code>"127.0.0.1"</code>), instead of integers.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>inet.udp()</code></h4><a id="user-content-inetudp" aria-label="Permalink: inet.udp()" href="#inetudp"></a></p>
<p dir="auto"><em>inet.udp()</em> creates a new <code>socket</code> using
<a href="https://github.com/luainkernel/lunatik#socketaf">af.INET</a> address family,
<a href="https://github.com/luainkernel/lunatik#socketsock">sock.DGRAM</a> type
and
<a href="https://github.com/luainkernel/lunatik#socketipproto">ipproto.UDP</a> protocol.
It overrides <code>socket</code> methods to use addresses as <em>numbers-and-dots notation</em>
(e.g., <code>"127.0.0.1"</code>), instead of integers.</p>
<p dir="auto"><h5 tabindex="-1" dir="auto"><code>udp:receivefrom(length [, flags])</code></h5><a id="user-content-udpreceivefromlength--flags" aria-label="Permalink: udp:receivefrom(length [, flags])" href="#udpreceivefromlength--flags"></a></p>
<p dir="auto"><em>udp:receivefrom()</em> is just an alias to <code>sock:receive(length, flags, true)</code>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">rcu</h3><a id="user-content-rcu" aria-label="Permalink: rcu" href="#rcu"></a></p>
<p dir="auto">The <code>rcu</code> library provides support for the kernel
<a href="https://lwn.net/Articles/262464/" rel="nofollow">Read-copy update (RCU)</a>
synchronization mechanism.
This library was inspired by
<a href="https://github.com/cmessias">Caio Messias</a>'
<a href="https://summerofcode.withgoogle.com/archive/2018/projects/5736202426646528" rel="nofollow">GSoC project</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>rcu.table([size])</code></h4><a id="user-content-rcutablesize" aria-label="Permalink: rcu.table([size])" href="#rcutablesize"></a></p>
<p dir="auto"><em>rcu.table()</em> creates a new <code>rcu.table</code> object
which binds the kernel <a href="https://lwn.net/Articles/510202/" rel="nofollow">generic hash table</a>.
This function receives as argument the number of buckets rounded up to the next power of 2.
The default size is <code>1024</code>.
Key must be a string and value must be a Lunatik object or nil.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">thread</h3><a id="user-content-thread" aria-label="Permalink: thread" href="#thread"></a></p>
<p dir="auto">The <code>thread</code> library provides support for the
<a href="https://lwn.net/Articles/65178/" rel="nofollow">kernel thread primitives</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>thread.run(runtime, name)</code></h4><a id="user-content-threadrunruntime-name" aria-label="Permalink: thread.run(runtime, name)" href="#threadrunruntime-name"></a></p>
<p dir="auto"><em>thread.run()</em> creates a new <code>thread</code> object and wakes it up.
This function receives the following arguments:</p>
<ul dir="auto">
<li><code>runtime</code>: the
<a href="https://github.com/luainkernel/lunatik#lunatikruntimescript--sleep">runtime environment</a>
for running a task in the created kernel thread.
The task must be specified by returning a function on the script loaded
in the <code>runtime</code> environment.</li>
<li><code>name</code>: string representing the name for the thread (e.g., as shown on <code>ps</code>).</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>thread.shouldstop()</code></h4><a id="user-content-threadshouldstop" aria-label="Permalink: thread.shouldstop()" href="#threadshouldstop"></a></p>
<p dir="auto"><em>thread.shouldstop()</em> returns <code>true</code> if
<a href="https://github.com/luainkernel/lunatik#threadstopthrd-thrdstop">thread.stop()</a>
was called; otherwise, it returns <code>false</code>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>thread.current()</code></h4><a id="user-content-threadcurrent" aria-label="Permalink: thread.current()" href="#threadcurrent"></a></p>
<p dir="auto"><em>thread.current()</em> returns a <code>thread</code> object representing the current task.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>thread.stop(thrd), thrd:stop()</code></h4><a id="user-content-threadstopthrd-thrdstop" aria-label="Permalink: thread.stop(thrd), thrd:stop()" href="#threadstopthrd-thrdstop"></a></p>
<p dir="auto"><em>thread.stop()</em> sets
<a href="https://github.com/luainkernel/lunatik#threadshouldstop">thread.shouldstop()</a>
on the thread <code>thrd</code> to return true, wakes <code>thrd</code>, and waits for it to exit.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>thread.task(thread), thrd:task()</code></h4><a id="user-content-threadtaskthread-thrdtask" aria-label="Permalink: thread.task(thread), thrd:task()" href="#threadtaskthread-thrdtask"></a></p>
<p dir="auto"><em>thread.task()</em> returns a table containing the task information of this <code>thread</code>
(e.g., "cpu", "command", "pid" and "tgid").</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">fib</h3><a id="user-content-fib" aria-label="Permalink: fib" href="#fib"></a></p>
<p dir="auto">The <code>fib</code> library provides support for the
<a href="https://thermalcircle.de/doku.php?id=blog:linux:routing_decisions_in_the_linux_kernel_1_lookup_packet_flow" rel="nofollow">kernel Forwarding Information Base</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>fib.newrule(table, priority)</code></h4><a id="user-content-fibnewruletable-priority" aria-label="Permalink: fib.newrule(table, priority)" href="#fibnewruletable-priority"></a></p>
<p dir="auto"><em>fib.newrule()</em> binds the kernel
<a href="https://elixir.bootlin.com/linux/latest/source/include/net/fib_rules.h#L182" rel="nofollow">fib_nl_newrule</a>
API;
it creates a new FIB rule that matches the specified routing <em>table</em>
with the specified <em>priorioty</em>.
This function is similar to the user-space command
<a href="https://datahacker.blog/industry/technology-menu/networking/iptables/follow-the-ip-rules" rel="nofollow">ip rule add</a>
provided by <a href="https://wiki.linuxfoundation.org/networking/iproute2" rel="nofollow">iproute2</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>fib.delrule(table, priority)</code></h4><a id="user-content-fibdelruletable-priority" aria-label="Permalink: fib.delrule(table, priority)" href="#fibdelruletable-priority"></a></p>
<p dir="auto"><em>fib.delrule()</em> binds the kernel
<a href="https://elixir.bootlin.com/linux/latest/source/include/net/fib_rules.h#L184" rel="nofollow">fib_nl_delrule</a>
API;
it removes a FIB rule that matches the specified routing <em>table</em>
with the specified <em>priorioty</em>.
This function is similar to the user-space command
<a href="https://datahacker.blog/industry/technology-menu/networking/iptables/follow-the-ip-rules" rel="nofollow">ip rule del</a>
provided by <a href="https://wiki.linuxfoundation.org/networking/iproute2" rel="nofollow">iproute2</a>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">data</h3><a id="user-content-data" aria-label="Permalink: data" href="#data"></a></p>
<p dir="auto">The <code>data</code> library provides support for binding the system memory to Lua.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>data.new(size)</code></h4><a id="user-content-datanewsize" aria-label="Permalink: data.new(size)" href="#datanewsize"></a></p>
<p dir="auto"><em>data.new()</em> creates a new <code>data</code> object which allocates <code>size</code> bytes.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>data.getnumber(d, offset), d:getnumber(offset)</code></h4><a id="user-content-datagetnumberd-offset-dgetnumberoffset" aria-label="Permalink: data.getnumber(d, offset), d:getnumber(offset)" href="#datagetnumberd-offset-dgetnumberoffset"></a></p>
<p dir="auto"><em>data.getnumber()</em> extracts a <a href="https://www.lua.org/manual/5.4/manual.html#lua_Integer" rel="nofollow">lua_Integer</a>
from the memory referenced by a <code>data</code> object and a byte <code>offset</code>,
starting from zero.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>data.setnumber(d, offset, number), d:setnumber(offset, number)</code></h4><a id="user-content-datasetnumberd-offset-number-dsetnumberoffset-number" aria-label="Permalink: data.setnumber(d, offset, number), d:setnumber(offset, number)" href="#datasetnumberd-offset-number-dsetnumberoffset-number"></a></p>
<p dir="auto"><em>data.setnumber()</em> insert a <a href="https://www.lua.org/manual/5.4/manual.html#lua_Integer" rel="nofollow">lua_Integer</a>
<code>number</code> into the memory referenced by a <code>data</code> object and a byte <code>offset</code>,
starting from zero.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>data.getbyte(d, offset), d:getbyte(offset)</code></h4><a id="user-content-datagetbyted-offset-dgetbyteoffset" aria-label="Permalink: data.getbyte(d, offset), d:getbyte(offset)" href="#datagetbyted-offset-dgetbyteoffset"></a></p>
<p dir="auto"><em>data.getbyte()</em> extracts a byte
from the memory referenced by a <code>data</code> object and a byte <code>offset</code>,
starting from zero.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>data.setbyte(d, offset, byte), d:setbyte(offset, byte)</code></h4><a id="user-content-datasetbyted-offset-byte-dsetbyteoffset-byte" aria-label="Permalink: data.setbyte(d, offset, byte), d:setbyte(offset, byte)" href="#datasetbyted-offset-byte-dsetbyteoffset-byte"></a></p>
<p dir="auto"><em>data.setbyte()</em> insert a byte
into the memory referenced by a <code>data</code> object and a byte <code>offset</code>,
starting from zero.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>data.getstring(d, offset, length), d:getstring(offset, length)</code></h4><a id="user-content-datagetstringd-offset-length-dgetstringoffset-length" aria-label="Permalink: data.getstring(d, offset, length), d:getstring(offset, length)" href="#datagetstringd-offset-length-dgetstringoffset-length"></a></p>
<p dir="auto"><em>data.getstring()</em> extracts a string with <code>length</code> bytes
from the memory referenced by a <code>data</code> object and a byte <code>offset</code>,
starting from zero.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>data.setstring(d, offset, s), d:setstring(offset, s)</code></h4><a id="user-content-datasetstringd-offset-s-dsetstringoffset-s" aria-label="Permalink: data.setstring(d, offset, s), d:setstring(offset, s)" href="#datasetstringd-offset-s-dsetstringoffset-s"></a></p>
<p dir="auto"><em>data.setstring()</em> insert the string <code>s</code>
into the memory referenced by a <code>data</code> object and a byte <code>offset</code>,
starting from zero.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">probe</h3><a id="user-content-probe" aria-label="Permalink: probe" href="#probe"></a></p>
<p dir="auto">The <code>probe</code> library provides support for
<a href="https://docs.kernel.org/trace/kprobes.html" rel="nofollow">kernel probes</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>probe.new(symbol|address, handlers)</code></h4><a id="user-content-probenewsymboladdress-handlers" aria-label="Permalink: probe.new(symbol|address, handlers)" href="#probenewsymboladdress-handlers"></a></p>
<p dir="auto"><em>probe.new()</em> returns a new <code>probe</code> object for monitoring a kernel <code>symbol</code> (string) or <code>address</code> (light userdata)
and installs its <code>handlers</code> in the system.
The <code>handler</code> <strong>must</strong> be defined as a table containing the following field:</p>
<ul dir="auto">
<li><code>pre</code>: function to be called before the probed instruction.
It receives the <code>symbol</code> or <code>address</code>,
followed by a closure that may be called to
<a href="https://elixir.bootlin.com/linux/v5.6.19/source/include/linux/sched/debug.h#L26" rel="nofollow">show the CPU registers and stack</a>
in the system log.</li>
<li><code>post</code>: function to be called after the probed instruction.
It receives the <code>symbol</code> or <code>address</code>,
followed by a closure that may be called to
<a href="https://elixir.bootlin.com/linux/v5.6.19/source/include/linux/sched/debug.h#L26" rel="nofollow">show the CPU registers and stack</a>
in the system log.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>probe.stop(p), p:stop()</code></h4><a id="user-content-probestopp-pstop" aria-label="Permalink: probe.stop(p), p:stop()" href="#probestopp-pstop"></a></p>
<p dir="auto"><em>probe.stop()</em> removes the <code>probe</code> handlers from the system.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>probe.enable(p, bool), p:enable(bool)</code></h4><a id="user-content-probeenablep-bool-penablebool" aria-label="Permalink: probe.enable(p, bool), p:enable(bool)" href="#probeenablep-bool-penablebool"></a></p>
<p dir="auto"><em>probe.enable()</em> enables or disables the <code>probe</code> handlers, accordingly to <code>bool</code>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">syscall</h3><a id="user-content-syscall" aria-label="Permalink: syscall" href="#syscall"></a></p>
<p dir="auto">The <code>syscall</code> library provides support for system call addresses and numbers.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>syscall.address(number)</code></h4><a id="user-content-syscalladdressnumber" aria-label="Permalink: syscall.address(number)" href="#syscalladdressnumber"></a></p>
<p dir="auto"><em>syscall.address()</em> returns the system call address (light userdata) referenced by the given <code>number</code>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto"><code>syscall.number(name)</code></h4><a id="user-content-syscallnumbername" aria-label="Permalink: syscall.number(name)" href="#syscallnumbername"></a></p>
<p dir="auto"><em>syscall.number()</em> returns the system call number referenced by the given <code>name</code>.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">syscall.table</h3><a id="user-content-syscalltable" aria-label="Permalink: syscall.table" href="#syscalltable"></a></p>
<p dir="auto">The <code>syscall.table</code> library provides support for translating system call names to addresses (light userdata).</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Examples</h2><a id="user-content-examples" aria-label="Permalink: Examples" href="#examples"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">spyglass</h3><a id="user-content-spyglass" aria-label="Permalink: spyglass" href="#spyglass"></a></p>
<p dir="auto"><a href="https://github.com/luainkernel/lunatik/blob/master/examples/spyglass.lua">spyglass</a>
is a kernel script that implements a <em>keylogger</em> inspired by the
<a href="https://github.com/jarun/spy">spy</a> kernel module.
This kernel script logs the <em>keysym</em> of the pressed keys in a device (<code>/dev/spyglass</code>).
If the <em>keysym</em> is a printable character, <code>spyglass</code> logs the <em>keysym</em> itself;
otherwise, it logs a mnemonic of the ASCII code, (e.g., <code>&lt;del&gt;</code> stands for <code>127</code>).</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Usage</h4><a id="user-content-usage-1" aria-label="Permalink: Usage" href="#usage-1"></a></p>
<div data-snippet-clipboard-copy-content="sudo make examples_install          # installs examples
sudo lunatik run examples/spyglass  # runs spyglass
sudo tail -f /dev/spyglass          # prints the key log
sudo sh -c &quot;echo 'enable=false' > /dev/spyglass&quot;       # disable the key logging
sudo sh -c &quot;echo 'enable=true' > /dev/spyglass&quot;        # enable the key logging
sudo sh -c &quot;echo 'net=127.0.0.1:1337' > /dev/spyglass&quot; # enable network support
nc -lu 127.0.0.1 1337 &amp;             # listen to UDP 127.0.0.1:1337
sudo tail -f /dev/spyglass          # sends the key log through the network"><pre><code>sudo make examples_install          # installs examples
sudo lunatik run examples/spyglass  # runs spyglass
sudo tail -f /dev/spyglass          # prints the key log
sudo sh -c "echo 'enable=false' &gt; /dev/spyglass"       # disable the key logging
sudo sh -c "echo 'enable=true' &gt; /dev/spyglass"        # enable the key logging
sudo sh -c "echo 'net=127.0.0.1:1337' &gt; /dev/spyglass" # enable network support
nc -lu 127.0.0.1 1337 &amp;             # listen to UDP 127.0.0.1:1337
sudo tail -f /dev/spyglass          # sends the key log through the network
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">keylocker</h3><a id="user-content-keylocker" aria-label="Permalink: keylocker" href="#keylocker"></a></p>
<p dir="auto"><a href="https://github.com/luainkernel/lunatik/blob/master/examples/keylocker.lua">keylocker</a>
is a kernel script that implements
<a href="https://en.wikipedia.org/wiki/Konami_Code" rel="nofollow">Konami Code</a>
for locking and unlocking the console keyboard.
When the user types <code>↑ ↑ ↓ ↓ ← → ← → LCTRL LALT</code>,
the keyboard will be <em>locked</em>; that is, the system will stop processing any key pressed
until the user types the same key sequence again.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Usage</h4><a id="user-content-usage-2" aria-label="Permalink: Usage" href="#usage-2"></a></p>
<div data-snippet-clipboard-copy-content="sudo make examples_install                     # installs examples
sudo lunatik run examples/keylocker            # runs keylocker
<↑> <↑> <↓> <↓> <←> <→> <←> <→> <LCTRL> <LALT> # locks keyboard
<↑> <↑> <↓> <↓> <←> <→> <←> <→> <LCTRL> <LALT> # unlocks keyboard"><pre><code>sudo make examples_install                     # installs examples
sudo lunatik run examples/keylocker            # runs keylocker
&lt;↑&gt; &lt;↑&gt; &lt;↓&gt; &lt;↓&gt; &lt;←&gt; &lt;→&gt; &lt;←&gt; &lt;→&gt; &lt;LCTRL&gt; &lt;LALT&gt; # locks keyboard
&lt;↑&gt; &lt;↑&gt; &lt;↓&gt; &lt;↓&gt; &lt;←&gt; &lt;→&gt; &lt;←&gt; &lt;→&gt; &lt;LCTRL&gt; &lt;LALT&gt; # unlocks keyboard
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">tap</h3><a id="user-content-tap" aria-label="Permalink: tap" href="#tap"></a></p>
<p dir="auto"><a href="https://github.com/luainkernel/lunatik/blob/master/examples/tap.lua">tap</a>
is a kernel script that implements a <em>sniffer</em> using <code>AF_PACKET</code> socket.
It prints destination and source MAC addresses followed by Ethernet type and the frame size.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Usage</h4><a id="user-content-usage-3" aria-label="Permalink: Usage" href="#usage-3"></a></p>
<div data-snippet-clipboard-copy-content="sudo make examples_install    # installs examples
sudo lunatik run examples/tap # runs tap
cat /dev/tap"><pre><code>sudo make examples_install    # installs examples
sudo lunatik run examples/tap # runs tap
cat /dev/tap
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">shared</h3><a id="user-content-shared" aria-label="Permalink: shared" href="#shared"></a></p>
<p dir="auto"><a href="https://github.com/luainkernel/lunatik/blob/master/examples/shared.lua">shared</a>
is a kernel script that implements an in-memory key-value store using
<a href="https://github.com/luainkernel/lunatik#rcu">rcu</a>,
<a href="https://github.com/luainkernel/lunatik#data">data</a>,
<a href="https://github.com/luainkernel/lunatik#socket">socket</a> and
<a href="https://github.com/luainkernel/lunatik#thread">thread</a>.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Usage</h4><a id="user-content-usage-4" aria-label="Permalink: Usage" href="#usage-4"></a></p>
<div data-snippet-clipboard-copy-content="sudo make examples_install         # installs examples
sudo lunatik spawn examples/shared # spawns shared
nc 127.0.0.1 90                    # connects to shared
foo=bar                            # assigns &quot;bar&quot; to foo
foo                                # retrieves foo
bar
^C                                 # finishes the connection"><pre><code>sudo make examples_install         # installs examples
sudo lunatik spawn examples/shared # spawns shared
nc 127.0.0.1 90                    # connects to shared
foo=bar                            # assigns "bar" to foo
foo                                # retrieves foo
bar
^C                                 # finishes the connection
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">echod</h3><a id="user-content-echod" aria-label="Permalink: echod" href="#echod"></a></p>
<p dir="auto"><a href="https://github.com/luainkernel/lunatik/blob/master/examples/echod">echod</a>
is an echo server implemented as kernel scripts.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Usage</h4><a id="user-content-usage-5" aria-label="Permalink: Usage" href="#usage-5"></a></p>
<div data-snippet-clipboard-copy-content="sudo make examples_install               # installs examples
sudo lunatik spawn examples/echod/daemon # runs echod
nc 127.0.0.1 1337
hello kernel!
hello kernel!"><pre><code>sudo make examples_install               # installs examples
sudo lunatik spawn examples/echod/daemon # runs echod
nc 127.0.0.1 1337
hello kernel!
hello kernel!
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">systrack</h3><a id="user-content-systrack" aria-label="Permalink: systrack" href="#systrack"></a></p>
<p dir="auto"><a href="https://github.com/luainkernel/lunatik/blob/master/examples/systrack.lua">systrack</a>
is a kernel script that implements a device driver to monitor system calls.
It prints the amount of times each <a href="https://github.com/luainkernel/lunatik/blob/master/examples/systrack.lua#L29">system call</a>
was called since the driver has been installed.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Usage</h4><a id="user-content-usage-6" aria-label="Permalink: Usage" href="#usage-6"></a></p>
<div data-snippet-clipboard-copy-content="sudo make examples_install         # installs examples
sudo lunatik run examples/systrack # runs systracker
cat /dev/systrack
writev: 0
close: 1927
write: 1085
openat: 2036
read: 4131
readv: 0"><pre><code>sudo make examples_install         # installs examples
sudo lunatik run examples/systrack # runs systracker
cat /dev/systrack
writev: 0
close: 1927
write: 1085
openat: 2036
read: 4131
readv: 0
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">References</h2><a id="user-content-references" aria-label="Permalink: References" href="#references"></a></p>
<ul dir="auto">
<li><a href="https://netdevconf.info/0x17/sessions/talk/scripting-the-linux-routing-table-with-lua.html" rel="nofollow">Scripting the Linux Routing Table with Lua</a></li>
<li><a href="https://www.youtube.com/watch?v=-ufBgy044HI" rel="nofollow">Lua no Núcleo</a> (Portuguese)</li>
<li><a href="https://legacy.netdevconf.info/0x14/session.html?talk-linux-network-scripting-with-lua" rel="nofollow">Linux Network Scripting with Lua</a></li>
<li><a href="https://www.netbsd.org/~lneto/dls14.pdf" rel="nofollow">Scriptables Operating Systems with Lua</a></li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Drone footage of baby penguins jumping off cliff (116 pts)]]></title>
            <link>https://petapixel.com/2024/04/17/baby-penguins-jump-off-50-foot-cliff-in-first-of-its-kind-drone-footage/</link>
            <guid>40104475</guid>
            <pubDate>Sun, 21 Apr 2024 10:10:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://petapixel.com/2024/04/17/baby-penguins-jump-off-50-foot-cliff-in-first-of-its-kind-drone-footage/">https://petapixel.com/2024/04/17/baby-penguins-jump-off-50-foot-cliff-in-first-of-its-kind-drone-footage/</a>, See on <a href="https://news.ycombinator.com/item?id=40104475">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<article data-post-id="738162">
<header>


</header>

<div>
<figure id="attachment_738178" aria-describedby="caption-attachment-738178"><img data-perfmatters-preload="" fetchpriority="high" decoding="async" src="https://petapixel.com/assets/uploads/2024/04/MM10127_240110_14504-800x548.jpg" alt="" width="800" height="548" srcset="https://petapixel.com/assets/uploads/2024/04/MM10127_240110_14504-800x548.jpg 800w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_14504-320x219.jpg 320w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_14504-1536x1053.jpg 1536w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_14504-2048x1404.jpg 2048w" sizes="(max-width: 800px) 100vw, 800px"><figcaption id="caption-attachment-738178">Emperor penguin chicks jumping off the ice shelf edge for their first swim at Atka Bay on the Ekström Ice Shelf in Antarctica.</figcaption></figure> <p>Drone footage has captured the astonishing moment hundreds of emperor penguin chicks jump off a 50-foot cliff in Antarctica for the first time.</p>  <p>Wildlife photographer and filmmaker <a href="https://www.bertiegregory.com/" data-wpel-link="external" target="_blank" rel="follow external noopener">Bertie Gregory</a> captured the “unprecedented” footage for <a href="https://www.nationalgeographic.com/animals/photography/article/emperor-penguins-chicks-antarctica-jumping" data-wpel-link="external" target="_blank" rel="follow external noopener"><em>National Geographic’s</em> upcoming documentary <em>Secrets of the Penguins</em></a>, which will debut in April 2025. </p> <div><p><iframe src="https://www.youtube.com/embed/4PwDFddpo4c?si=RzmxyylyemDz6S-w" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe></p></div> <p>The <em>National Geographic</em> filmmakers were shooting in Atka Bay on the Ekstrom Ice Shelf, Antarctica in January this year, when they spotted approximately 700 emperor penguin chicks gathering at the edge of a cliff. </p> <p><img decoding="async" src="https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15147-800x567.jpg" alt="penguin drone footage jumping cliff " width="800" height="567" srcset="https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15147-800x567.jpg 800w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15147-320x227.jpg 320w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15147-1536x1088.jpg 1536w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15147-2048x1450.jpg 2048w" sizes="(max-width: 800px) 100vw, 800px"></p> <p><img decoding="async" src="https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15275-800x519.jpg" alt="penguin drone footage jumping cliff " width="800" height="519" srcset="https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15275-800x519.jpg 800w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15275-320x207.jpg 320w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15275-1536x996.jpg 1536w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15275-2048x1327.jpg 2048w" sizes="(max-width: 800px) 100vw, 800px"></p>
<p>Antarctica is home to 66 known Emperor penguin colonies, which usually breed and raise their chicks in the winter. Some of these emperor colonies have been raising chicks high up on permanent ice shelves.</p> <p><img loading="lazy" decoding="async" src="https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15519-800x509.jpg" alt="penguin drone footage jumping cliff " width="800" height="509" srcset="https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15519-800x509.jpg 800w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15519-320x204.jpg 320w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15519-1536x978.jpg 1536w, https://petapixel.com/assets/uploads/2024/04/MM10127_240110_15519-2048x1304.jpg 2048w" sizes="(max-width: 800px) 100vw, 800px"></p> <p>Every January, when the chicks are around five months old, they undergo a process known as fledging. During this process, the chicks lose their baby feathers and leave their colony for the first time — jumping from an enormous cliff into the ocean to take their first swim. </p> <h2>A Heart-Stopping Jump Filmed For The First Time</h2> <p>While these huge jumps have been witnessed by scientists before, Gregory filmed this rare and heart-stopping behavior for the first time for television. </p> <p>In the extraordinary footage filmed for <em>Secrets of the Penguins</em>, a colony of chicks is seen making their way along the edge of the huge ice cliff, moving together toward the edge before stopping.</p> <p>Eventually, one brave chick takes the first leap from the summit and smashes into the icy ocean waters below. </p> <p>Once this penguin swims off to fill its stomach with fish, prompting the others to follow suit. From there, hundreds of chicks are seen jumping off the cliff into the ocean. </p>
<p>According to scientists, this is the first-ever video footage of emperor penguin chicks leaping from such a high cliff. Scientists who monitor penguins from satellites in space say this phenomenon is extremely rare.</p> <p>In a press release, the <em>National Geographic </em> revealed Gregory used a newly released camera drone, equipped with a telephoto lens, which allowed him to capture the animals’ behavior from the air like never before — without disrupting or impacting the penguins.</p> <p>“Filming the fledging of emperor penguins presented a unique set of challenges as the passage only takes place when the sea ice reaches its most unstable time of the year,” National Geographic says <a href="https://www.businesswire.com/news/home/20240411040454/en/National-Geographic-and-Bertie-Gregory-Release-Unprecedented-Footage-of-Emperor-Penguin-Behavior-Filmed-for-the-First-Time-on-the-Coast-of-Antarctica" data-wpel-link="external" target="_blank" rel="follow external noopener">in a statement</a>. </p> <p>“Bertie and his team took every measure to ensure the safety of the crew and wildlife by assembling a world-class safety team.”</p>  <hr> <p>&nbsp;<br> <em><strong>Image credits:</strong> All photos by <a href="https://www.businesswire.com/news/home/20240411040454/en/National-Geographic-and-Bertie-Gregory-Release-Unprecedented-Footage-of-Emperor-Penguin-Behavior-Filmed-for-the-First-Time-on-the-Coast-of-Antarctica" data-wpel-link="external" target="_blank" rel="follow external noopener"><em>National Geographic</em>/Bertie Gregory</a> .</em></p>  </div>
</article>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Doom-htop: The classic DOOM game over htop (233 pts)]]></title>
            <link>https://github.com/0x0mer/doom-htop</link>
            <guid>40104410</guid>
            <pubDate>Sun, 21 Apr 2024 09:53:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/0x0mer/doom-htop">https://github.com/0x0mer/doom-htop</a>, See on <a href="https://news.ycombinator.com/item?id=40104410">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">doom-htop</h2><a id="user-content-doom-htop" aria-label="Permalink: doom-htop" href="#doom-htop"></a></p>
<p dir="auto">Ever wondered whether <code>htop</code> could be used to render the graphics of cult video games? I know I have.
In order to quench our curiosity and for your viewing pleasure, I created <code>doom-htop</code>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/0x0mer/doom-htop/blob/master/screenshots/doom.gif"><img src="https://github.com/0x0mer/doom-htop/raw/master/screenshots/doom.gif" alt="" data-animated-image=""></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Table of Contents</h2><a id="user-content-table-of-contents" aria-label="Permalink: Table of Contents" href="#table-of-contents"></a></p>
<ol dir="auto">
<li><a href="#How-to-build">How to build</a></li>
<li><a href="#How-to-run">How to run</a></li>
<li><a href="#How-it-works">How it works</a></li>
<li><a href="#Platforms">Platforms</a></li>
<li><a href="#Troubleshooting">Troubleshooting</a></li>
<li><a href="#further-work-required">Further work required</a></li>
<li><a href="#faq">F.A.Q</a></li>
<li><a href="#License">License</a></li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">How to build</h2><a id="user-content-how-to-build" aria-label="Permalink: How to build" href="#how-to-build"></a></p>

<p dir="auto"><strong>Notice!</strong> In order to use this project, you need a WAD (game data) file. The one I included is freedoom1.wad (All credit goes to <a href="https://freedoom.github.io/index.html" rel="nofollow">The Freedoom project</a>!).</p>
<p dir="auto">Of course you're welcome to download the classic free shareware version DOOM1.wad <a href="https://doomwiki.org/wiki/DOOM1.WAD" rel="nofollow">from here</a>. (I wasn't sure if I was legally allowed to upload it to github, and decided against it).</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">How to run</h2><a id="user-content-how-to-run" aria-label="Permalink: How to run" href="#how-to-run"></a></p>
<p dir="auto">If I were you, I would probably save any important work I have open before doing this. That being said, I tested this code on a 12-year old Lenovo® ThinkPad T430s with 8GB RAM and an Intel Core i7-3520M @ 2.90GHz running Ubuntu 22.04 and it ran just fine.</p>
<p dir="auto">Anyways, simply run:</p>
<div data-snippet-clipboard-copy-content="sed -i 's/update_process_names=0/update_process_names=1/' ~/.config/htop/htoprc
sudo ./doom-htop -iwad freedoom1.wad
htop -d 1 -s M_VIRT"><pre><code>sed -i 's/update_process_names=0/update_process_names=1/' ~/.config/htop/htoprc
sudo ./doom-htop -iwad freedoom1.wad
htop -d 1 -s M_VIRT
</code></pre></div>
<p dir="auto">It doesn't matter whether you run <code>doom-htop</code> or <code>htop</code> first.</p>
<p dir="auto">The <code>sudo</code> is only needed in order to open your keyboard's device.</p>
<p dir="auto">If you're the kinda person who would rather not run sketchy programs off the <em>Internet™</em> with root privilges, you can go ahead and run it without <code>sudo</code> and just look at the pretty pictures.</p>
<p dir="auto">The <code>-d 1</code> is because we're going for that sweet, sweet 10 FPS refresh rate, and the <code>-s M_VIRT</code> is because we're gonna want to sort the processes by virtual memory allocation, which should be pretty indicative of our processes and bunch them up together nicely. If for some reason that doesn't work for you, you can go ahead and play with the define <code>PROCS_MALLOC_SIZE</code> in <code>main.c</code> until everything looks nice.</p>
<p dir="auto">Finally, the <code>sed</code> command is needed because by default, <code>htop</code> doesn't refresh the processes' names every time.
This design choice was <em>probably</em> made because <code>htop</code> wasn't originally designed to render ascii-art videos, but we'll never know for sure.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">How it works</h2><a id="user-content-how-it-works" aria-label="Permalink: How it works" href="#how-it-works"></a></p>
<p dir="auto">It's pretty straight-forward, actually. The amazing project <a href="https://github.com/ozkl/doomgeneric">https://github.com/ozkl/doomgeneric</a> which I forked, did all the heavy lifting.
I simply added the 3 files:</p>
<ol dir="auto">
<li>main.c</li>
<li>keylogger.c</li>
<li>ascii_stuff.c</li>
</ol>
<p dir="auto">And edited a few others.</p>
<p dir="auto">I wrote a simple image-to-ascii converter that generated the long if statement you can find in the file <code>ascii_stuff.c</code>.</p>
<p dir="auto">The main doom process forks and creates as many process as there are lines in the ascii converted image, and then creates a shared memory segment with every single one of them.</p>
<p dir="auto">The main process copies each line in the image to the matching process's memory segment, and each child-process copies from its segment and writes over its <code>argv[0]</code>. That's it, really.</p>
<p dir="auto">Originally I wanted to do it with processes sorted by CPU usage, and create a process that consumes a specific CPU percentage, but that turned out to be pretty hard.
Then I though about using linux's <code>nice</code>, but as a user you're only allowed 19 possible values, and I wanted better graphics. Eventually I stumbled upon the idea of using virtual memory allocation, which as I said before, as pretty specific per process.</p>
<p dir="auto">I noticed that even when all the forked processes allocate exactly the same amount of memory, <code>htop</code> shows the frame in the right order. I believe that happens because maybe in case of equality the processes are then sorted by time of creation? This works on my system (and is actually a little better, because that way there is less space in which another process could "get into the frame"), but I wasn't sure how it would work on other people's systems and didn't want to take the chance. This also means that I could have probably just given all the processes a unique <code>nice</code> value, but whatever.</p>
<p dir="auto">Anyways, then I created a simple keylogger that works by opening the keyboard's device. This way the game is always playing in the background regardless of whether <code>htop</code> is open or not, which I think is neat.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Platforms</h2><a id="user-content-platforms" aria-label="Permalink: Platforms" href="#platforms"></a></p>
<p dir="auto">I only ever tested it on my Ubuntu 22.04. I know the keyboard device is named something else in WSL and Arch, you're welcome to port it if you like.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Troubleshooting</h2><a id="user-content-troubleshooting" aria-label="Permalink: Troubleshooting" href="#troubleshooting"></a></p>
<ol dir="auto">
<li>
<p dir="auto"><strong>Keyboard doesn't work</strong></p>
<p dir="auto">The device I'm trying to open is defined in <code>#define KEYBOARD_DEVICE</code> in the file <code>main.c</code>. I'm sure it won't work universally. I only tested the code on Ubuntu 22.04, and I know for a fact it won't work out of the box for WSL, and that the device in Arch is named something else. You're welcome to port it to your platform.
Try to <code>ll /dev/input/by-path</code>, and choose one of the options that has <code>kbd</code> in it.</p>
</li>
<li>
<p dir="auto"><strong>The frame is frozen</strong></p>
<p dir="auto">Maybe the <code>sed</code> command didn't work. You can change the <code>htop</code> configuation manually by hitting the F2 key -&gt; "Display options" -&gt; mark <code>[X]</code> on "Update process names on every refresh"</p>
</li>
<li>
<p dir="auto"><code>sed: can't read /home/&lt;user&gt;/.config/htop/htoprc: No such file or directory</code></p>
<p dir="auto">I guess this will probably happen if you've never used <code>htop</code> before. In that case run <code>htop</code>, quit, and run the <code>sed</code> command again.</p>
</li>
<li>
<p dir="auto">For some reason the main doom process crashed, and you're left with a ton of zombie processes doing nothing:
Run <code>sudo pkill doom-htop</code>.</p>
</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Further work required</h2><a id="user-content-further-work-required" aria-label="Permalink: Further work required" href="#further-work-required"></a></p>
<ul dir="auto">
<li><code>htop</code> moves the screen around when you're trying to walk around using the arrow keys which is pretty annoying. A simple but silly solution would be to change <code>htop</code>'s focus after you start your game, for example by pressing <code>a</code>, which opens the menu for selecting your processors, then it won't be as annoying.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">F.A.Q</h2><a id="user-content-faq" aria-label="Permalink: F.A.Q" href="#faq"></a></p>
<ol dir="auto">
<li>Q: Why did you make this? A: I thought it would be <a href="https://github.com/xoreaxeaxeax/movfuscator?tab=readme-ov-file#faq">funny</a>.</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">Freedoom is released under a BSD-like license which can be found in the file freedoom-license.txt in the main directory. I believe all other code is GPL'd.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A hacker's guide to Language Models (136 pts)]]></title>
            <link>https://github.com/fastai/lm-hackers/blob/main/lm-hackers.ipynb</link>
            <guid>40103912</guid>
            <pubDate>Sun, 21 Apr 2024 07:50:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/fastai/lm-hackers/blob/main/lm-hackers.ipynb">https://github.com/fastai/lm-hackers/blob/main/lm-hackers.ipynb</a>, See on <a href="https://news.ycombinator.com/item?id=40103912">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
          <nav aria-label="Global">
            <ul>
                <li>
      
      <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Actions&quot;,&quot;label&quot;:&quot;ref_cta:Actions;&quot;}" href="https://github.com/features/actions">
      
      <div>
        <p>Actions</p><p>
        Automate any workflow
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Packages&quot;,&quot;label&quot;:&quot;ref_cta:Packages;&quot;}" href="https://github.com/features/packages">
      
      <div>
        <p>Packages</p><p>
        Host and manage packages
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Security&quot;,&quot;label&quot;:&quot;ref_cta:Security;&quot;}" href="https://github.com/features/security">
      
      <div>
        <p>Security</p><p>
        Find and fix vulnerabilities
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Codespaces&quot;,&quot;label&quot;:&quot;ref_cta:Codespaces;&quot;}" href="https://github.com/features/codespaces">
      
      <div>
        <p>Codespaces</p><p>
        Instant dev environments
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Copilot&quot;,&quot;label&quot;:&quot;ref_cta:Copilot;&quot;}" href="https://github.com/features/copilot">
      
      <div>
        <p>Copilot</p><p>
        Write better code with AI
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Code review&quot;,&quot;label&quot;:&quot;ref_cta:Code review;&quot;}" href="https://github.com/features/code-review">
      
      <div>
        <p>Code review</p><p>
        Manage code changes
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Issues&quot;,&quot;label&quot;:&quot;ref_cta:Issues;&quot;}" href="https://github.com/features/issues">
      
      <div>
        <p>Issues</p><p>
        Plan and track work
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Discussions&quot;,&quot;label&quot;:&quot;ref_cta:Discussions;&quot;}" href="https://github.com/features/discussions">
      
      <div>
        <p>Discussions</p><p>
        Collaborate outside of code
      </p></div>

    
</a></li>

            </ul>
          </div>
</li>


                <li>
      
      
</li>


                <li>
      
      <div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to GitHub Sponsors&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Sponsors;&quot;}" href="https://github.com/sponsors">
      
      <div>
        <p>GitHub Sponsors</p><p>
        Fund open source developers
      </p></div>

    
</a></li>

            </ul>
          </div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to The ReadME Project&quot;,&quot;label&quot;:&quot;ref_cta:The ReadME Project;&quot;}" href="https://github.com/readme">
      
      <div>
        <p>The ReadME Project</p><p>
        GitHub community articles
      </p></div>

    
</a></li>

            </ul>
          </div>
          
      </div>
</li>


                <li>
    <a data-analytics-event="{&quot;category&quot;:&quot;Header menu top item (logged out)&quot;,&quot;action&quot;:&quot;click to go to Pricing&quot;,&quot;label&quot;:&quot;ref_cta:Pricing;&quot;}" href="https://github.com/pricing">Pricing</a>
</li>

            </ul>
          </nav>

        <div>
                


<qbsearch-input data-scope="repo:fastai/lm-hackers" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="sdlb2bJbOdSinqKgGwUQFf-2GZrYIBc-_-5JKdaAteB4jeJajfzxwDqTKKSXAAmFPdoZ80-rwnwwPq1EwDkoiA" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="fastai/lm-hackers" data-current-org="fastai" data-current-owner="" data-logged-in="false" data-copilot-chat-enabled="false" data-blackbird-indexed-repo-csrf="<esi:include src=&quot;/_esi/rails_csrf_token_form_hidden?r=57dhq0wqTm5%2BqCPCq4UWasfzwfodEllyKPyg1haFfdow1s6gDEYu6iUH5muGOGrpNTJ5wD5jptVNfuUCmykZ3Njk40pwjvRXqGeri63RQQmU3CzP7FD8WGxW1vnsHdsmukVXbNIU8RCLkYX1rexdsASposoLDMjLpZbhK8D59p6VUiVj%2FkiBoAxkl0otKHjkE%2F3VuPOrJ64rKXjHMDEjkFGt1VUtnd30a0NK7Cf9sz0oKu6cxhc%2B2uBEhXcbfnGzuF9HqEpOEC7uHG0qlQrrjqleoS9Uzr2klqG2F1s5X%2FGXlO7HtInCfGag7Y8OytwbAJ2zW5nNPm85m%2B5y%2Bb85FSbxixpjk8UUXpLFmqm9BNkDNpkxoloY8LJn9r1BsSQK3ALKff4D2p7q6KW0aZdZwv6evaUFLz3DZx%2FEe7qmkfXuJXQqKuifVMPk3A9RCHdylWZJLZ6FYG95fqencQGE5IouaKuD2y64FN3AfFL6LH9LE8dSuo9DQuS%2Fqd7YYnrg7CrP%2B3WS2YV8TWTIAohvKdMaQwTnQVn0Ub1Ee38FuOUUeD9q7ZV0bDnpPbb7563yRqA%3D--Ak63UQ%2FTxK4%2B3c8o--hm2Hmh1uc7cW0kw%2FfxNT%2FQ%3D%3D&quot; />">
  <div data-modal-dialog-overlay="" data-action="click:qbsearch-input#searchInputContainerClicked">
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true">
      <h2 id="search-suggestions-dialog-header">Search code, repositories, users, issues, pull requests...</h2>
    
</modal-dialog></div>
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>

            <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&amp;source=header-repo&amp;source_repo=fastai%2Flm-hackers" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/fastai/lm-hackers/blob/main/lm-hackers.ipynb&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="52e5385ce4cb785984bb5e02b2ddd2c0647fa3cf77dcc1642a73c1bbfc0394db" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>/blob/show;ref_cta:Sign up;ref_loc:header logged out&quot;}">
              Sign up
            </a>
        </p></div>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Programming Is Mostly Thinking (601 pts)]]></title>
            <link>http://agileotter.blogspot.com/2014/09/programming-is-mostly-thinking.html</link>
            <guid>40103407</guid>
            <pubDate>Sun, 21 Apr 2024 05:40:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="http://agileotter.blogspot.com/2014/09/programming-is-mostly-thinking.html">http://agileotter.blogspot.com/2014/09/programming-is-mostly-thinking.html</a>, See on <a href="https://news.ycombinator.com/item?id=40103407">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="post-body-4896867988576448796" itemprop="description articleBody">
<div dir="ltr" trbidi="on">
<blockquote>
<span><br></span><span>Pretend you have a really great programming day.</span>&nbsp;</blockquote>
<blockquote>
<span>You only have to attend a few meetings, have only a few off-topic conversations, don't get distracted or interrupted much, don't have to do a bunch of status or time reporting, and you put in a good six hours of serious programming [note: this RARELY happens in an 8-10 hour day].</span>&nbsp;</blockquote>
<blockquote>
<span>I want to review your work in the morning, so I print out a diff of your day's work before going home.</span>&nbsp;</blockquote>
<blockquote>
<span>Sadly, overnight the version control system crashes and they have to recover from the previous day's backup. You have lost an entire day's work.</span>&nbsp;</blockquote>
<blockquote>
<span>If I give you the diff, how long will it take you to type the changes back into the code base and recover your six-hours' work? </span></blockquote>
<br>
<h3>
Programming is 11/12ths Thinking</h3> <p> I've been touting this figure for some time now, and people keep asking me where the study is that produced such an odd number.  </p><p> Well, it's not pulled out of thin air and it's not the result of a thorough scientific study.  </p><p> I have done informal polls now for a few years, though I've not kept good records. My goal was not to become the scientist who cracks the statistical/mathematical code for programming activities. I was looking for a reasonable answer to a reasonable question. </p><p> However, this answer surprised me. In a long Quora post titled "<a href="#">How do programmers code so quickly?</a>"  one responder offered that it was a combination of physical skills (muscle memory, skill with tools, debugging skills,  typing skill) and knowing where to search for info. His post was swamped and overwhelmed by posts explaining that typing and tools are not the most important aid to quick code production.</p></div><p dir="ltr" trbidi="on"><br><h3>Software Factories</h3></p><div dir="ltr" trbidi="on">&nbsp; 
<p>I have seen the stickers and slogans on stickers and social media for a long time that "<a href="https://blog.ploeh.dk/2018/09/17/typing-is-not-a-programming-bottleneck/">typing is not the bottleneck</a>" (though every once in a while the inability of some programmers to type is <b>a </b>bottleneck).</p>

<p>
I am keenly aware that most management still subscribes to the idea that <i>motion is work</i>. They are fairly convinced that a lack of <i>motion</i> is a lack of <i>work</i>. That makes sense in a lawn care service, a factory assembly line, or a warehouse operation.</p>

<p>
Nearly all of the visible work done in producing physical goods is motion. People roll steel, stamp, press, mill, pick and place, bolt/screw/rivet, and on.&nbsp;</p>

<p>
Modern factories produce goods with Computer Numerical Control machines, which produce perfect copies of an original model that may not even exist in real life. These machines work from abstract models -- just data, really -- and perform perfect motion. Humans tend the machines, rather than working the wood by hand.</p>

<p>
I have some great guitars that were produced at affordable costs because of the degree of automation brought by such machines.&nbsp;</p>

<p>
Great boutique guitars are produced entirely by hand at higher cost and I don't put down that effort either. The world has room for both.</p>

<p>
<iframe allowfullscreen="allowfullscreen" frameborder="0" height="266" mozallowfullscreen="mozallowfullscreen" src="https://www.youtube.com/embed/PhOpgMDkfwc?feature=player_embedded" webkitallowfullscreen="webkitallowfullscreen" width="320"></iframe></p>



<p>
Software developers have perfected the factory. It runs flawlessly bit-perfect copies. You just click the "copy" or "download" button. It's so cheap that the purchasers happily cover the costs of the factory. Those who are cautious will double check the checksums that come with the download, but most people don't bother. The machines are reliable and efficient and quick and cheap.&nbsp;</p>

<p>
Once the initial model (really, just data) exists, then the marginal cost of all the bit-perfect copies is essentially zero. Yes, this is just copying and not creating, but that's what factories do. Custom shops might produce unique items (like guitars) but factories create copies of originals.</p>

<div><p>
The software factory tends to give you a progress bar, so you can visualize the motion of bits, but in many ways you can say that the product doesn't really exist. It's a pattern of tiny charged v. uncharged areas of metal on a plate (well, probably) and you don't even pay for the plate or the magnet or the laser when you create the copy. It's already there.</p><p>

Software is an intellectual good.</p></div>
<h3>
The Design Shop</h3>

<p>
In my years of working with Uncle Bob Martin, I heard him continually tell customers and students that software development is not a fabrication operation, but a design operation. Once the initial design is done, all the duplication is done by machines at nearly zero cost.</p>

<p>
So what programmers and testers and POs and Scrum Masters and software management area all doing (if they're doing it right) is designing the data model that will later be used by the factory to create copies for use by customers, patrons, and other people in the community the software is intended to serve.&nbsp;</p>

<p>
Yet the mechanistic, Industrial-Age idea of software development as a factory persists, and developers dutifully try to make it look like they're doing physical labor at the detriment of the process.&nbsp;</p>

<p>
All intellectual activities are hard to observe and monitor. An idea that is 80% complete has no physical manifestation. It's an idea, and it's not done yet. Sometimes we have experiments or proof-of-concept code or notes, but they don't give an accurate "% complete" number as does physical work.</p>

<p>
A chair being manufactured looks about 50% done at the 50% mark. &nbsp;When it's done, it looks done.</p>

<div><p>
A design for a chair may not exist on paper until it is more than 70% complete. And we don't know that it's really 70% done, because it's not finished being designed yet.</p><h3> The Answer: Really? </h3></div><p>
I have asked this question at conventions, client companies, to my peers, to colleagues, and to strangers I have met for the first time when I find out they are programmers. </p><p> The answer I receive most often is "about half an hour." </p><p> I could use the 8-hour day, ignoring meetings and interruptions and status reports, but that feels like padding the answer. I stick to the six hours doing things that programmers identify as programming work.</p><p>  There are twelve half-hours in six hours. One half-hour to retype all the changes made in six hours of hard programming work.  </p><p>What in the world can that mean? How can it be so little?</p></div><h3>The Meaning Behind the Answer</h3><p>Right now I suspect a bunch of managers are about to go yell at their programmers for putting in a half-hour's work in an 8-hour day! That would be a horrible misunderstanding of what was actually happening.</p><div dir="ltr" trbidi="on"> <p>  What is really happening? </p><div>
<ul>
<li>Programmers were typing on and off all day. Those 30 minutes are to recreate the <i><b>net result</b></i> of all the work they wrote, un-wrote, edited, and reworked through the day. It is not all the effort they put in, it is only the <i>residue of the effort.</i></li>
<li>Programmers are <i><b>avoiding defects</b></i> as best they can. In order to do that, they have to be continuously evaluating the code as they write it, hypothesizing the kinds of defects or security vulnerabilities they might be introducing. After all, they receive their harshest criticism for introducing defects into the shared code base.&nbsp;</li>
<li>Programming is a kind of <i><b>lossy compression</b></i>. The code only says what the program must do when it is running. Why a programmer chose one particular way over others, how it influences the rest of the system, what errors were introduced and removed, and what pitfalls it avoids are not (generally) present in the text of the program.</li>
<li>Most of the work is not in making the change, but in <i><b>deciding how to make the change</b></i>. Deciding requires us to understand the code that already exists. This is especially time-consuming when the code is messy or the design is not very obvious in the source code.&nbsp;</li>
<li>Programmers work in a <b><i>social context</i></b>&nbsp;since all their results are integrated into a shared code base (and most use pair programming or other "many eyes" techniques). Programmers may be helping other programmers or testers or operations people get a handle on their work. Connecting and communicating with others has benefits and costs that don't appear in the code.&nbsp;</li>
</ul>
</div>

<div><p>
Six hours of intellectual work (reading, researching, deciding, confirming, validating, verifying) translates to about 30 minutes worth of net lines-of-code change to a code base.</p><p>

That's not additional lines of code. We often have weeks when we fix bugs and add features and have fewer lines of code at end of the week than we had at the beginning of the week. I once got in trouble for having multiple weeks where we had negative lines of code -- we didn't know the 'grand boss' over our team was reporting SLOC as if it measured progress. Sigh.&nbsp;</p></div>

<div><p>
Programmers will gladly explain that the work they did was reading, learning, understanding, sometimes guessing, researching, debugging, testing, compiling, running, hypothesizing and disproving their ideas of what the code should look like. In short, they were thinking and deciding.</p><div><p>
Most of what goes on is intellectual work.</p><div><p>
One of the quora responders wrote:</p><blockquote>
<span>You see the fingers flying over the keyboard; you don't see the hours spent in talking to users, discussing the problems with coworkers, doing research and thinking the problems through.</span></blockquote>
</div>
<div><p>
Another suggested:</p><blockquote>
<span>I achieve it firstly (to the extent that I do) by 'helping' the customer to eliminate the unnecessary notions from their idea, which they often mistakenly call 'requirements' and sometimes even say they are 'must have'. This is the biggest possible acceleration in the delivery of a solution because I can do an infinite amount of no work in no time at all.</span></blockquote>
</div><p>
And yet another:</p><blockquote>
<span>Really good developers do 90% or more of the work before they ever touch the&nbsp; keyboard; really understanding the requirements and devising an appropriate solution.</span></blockquote><p>
These are not unique unusual answers. I find that most of the time, "knowing what not to write", "doing less," "working in smaller steps", and "having first figured out what to do" are common answers. Programming is much more about thinking than about typing.</p></div>
</div>

<p>
I have examined a lot of the change logs (diffs). It has consistently looked like 30+/-10 minutes of change on a good day (at least to me).&nbsp;</p>

<p>
I'm confident enough to tout this number as effectively true, though I should mention that no company I work with has so far been willing to delete a whole day's work to prove or disprove this experiment yet. &nbsp;Remember, I have only estimates and examinations of daily diffs to work from. The result here is not scientific.</p>

<div><p>
I should also let you know that people who do more typing or more cut/paste are often doing less thinking and understanding, which results in more errors and more burden on other programmers to understand and correct their code.</p><p><span><i>Code is just the residue of the work.</i></span></p>
<h3>
So What?</h3>
<br></div>

<p>
If programming is 1/12th motion and 11/12ths thinking, then we shouldn't push people to be typing 11/12ths of the time. We should instead provide the materials, environment, and processes necessary to ensure that the thinking we do is of high quality.&nbsp;</p>

<p>
Doing otherwise is optimizing the system for the wrong effect.</p>

<div><p>
What if we changed our tactics, and intentionally built systems for thinking together about software and making decisions easier to make? I think that productivity lies in this direction.</p><p>

So I invite you: how can you experiment with learning on-the-job to create systems where the thinking is optimized?&nbsp;</p></div>

</div>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Glibc Buffer Overflow in Iconv (152 pts)]]></title>
            <link>https://www.openwall.com/lists/oss-security/2024/04/18/4</link>
            <guid>40103188</guid>
            <pubDate>Sun, 21 Apr 2024 04:31:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.openwall.com/lists/oss-security/2024/04/18/4">https://www.openwall.com/lists/oss-security/2024/04/18/4</a>, See on <a href="https://news.ycombinator.com/item?id=40103188">Hacker News</a></p>
<div id="readability-page-1" class="page">


<table>
<tbody><tr>

<td>
<a href="https://www.openwall.com/"><img src="https://www.openwall.com/logo.png" width="182" height="80" alt="Openwall"></a>
</td><td>
<div>
<ul>
<li><a href="https://www.openwall.com/">Products</a>
<ul>
<li><a href="https://www.openwall.com/Owl/">Openwall GNU/*/Linux &nbsp; <i>server OS</i></a>
</li><li><a href="https://www.openwall.com/lkrg/">Linux Kernel Runtime Guard</a>
</li><li><a href="https://www.openwall.com/john/">John the Ripper &nbsp; <i>password cracker</i></a>
<ul>
<li><a href="https://www.openwall.com/john/">Free &amp; Open Source for any platform</a>
</li><li><a href="https://www.openwall.com/john/cloud/">in the cloud</a>
</li><li><a href="https://www.openwall.com/john/pro/linux/">Pro for Linux</a>
</li><li><a href="https://www.openwall.com/john/pro/macosx/">Pro for macOS</a>
</li></ul>
</li><li><a href="https://www.openwall.com/wordlists/">Wordlists &nbsp; <i>for password cracking</i></a>
</li><li><a href="https://www.openwall.com/passwdqc/">passwdqc &nbsp; <i>policy enforcement</i></a>
<ul>
<li><a href="https://www.openwall.com/passwdqc/">Free &amp; Open Source for Unix</a>
</li><li><a href="https://www.openwall.com/passwdqc/windows/">Pro for Windows (Active Directory)</a>
</li></ul>
</li><li><a href="https://www.openwall.com/yescrypt/">yescrypt &nbsp; <i>KDF &amp; password hashing</i></a>
</li><li><a href="https://www.openwall.com/yespower/">yespower &nbsp; <i>Proof-of-Work (PoW)</i></a>
</li><li><a href="https://www.openwall.com/crypt/">crypt_blowfish &nbsp; <i>password hashing</i></a>
</li><li><a href="https://www.openwall.com/phpass/">phpass &nbsp; <i>ditto in PHP</i></a>
</li><li><a href="https://www.openwall.com/tcb/">tcb &nbsp; <i>better password shadowing</i></a>
</li><li><a href="https://www.openwall.com/pam/">Pluggable Authentication Modules</a>
</li><li><a href="https://www.openwall.com/scanlogd/">scanlogd &nbsp; <i>port scan detector</i></a>
</li><li><a href="https://www.openwall.com/popa3d/">popa3d &nbsp; <i>tiny POP3 daemon</i></a>
</li><li><a href="https://www.openwall.com/blists/">blists &nbsp; <i>web interface to mailing lists</i></a>
</li><li><a href="https://www.openwall.com/msulogin/">msulogin &nbsp; <i>single user mode login</i></a>
</li><li><a href="https://www.openwall.com/php_mt_seed/">php_mt_seed &nbsp; <i>mt_rand() cracker</i></a>
</li></ul>
</li><li><a href="https://www.openwall.com/services/">Services</a>
</li><li id="narrow-li-1"><a>Publications</a>
<ul>
<li><a href="https://www.openwall.com/articles/">Articles</a>
</li><li><a href="https://www.openwall.com/presentations/">Presentations</a>
</li></ul>
</li><li><a>Resources</a>
<ul>
<li><a href="https://www.openwall.com/lists/">Mailing lists</a>
</li><li><a href="https://openwall.info/wiki/">Community wiki</a>
</li><li><a href="https://github.com/openwall">Source code repositories (GitHub)</a>
</li><li><a href="https://cvsweb.openwall.com/">Source code repositories (CVSweb)</a>
</li><li><a href="https://www.openwall.com/mirrors/">File archive &amp; mirrors</a>
</li><li><a href="https://www.openwall.com/signatures/">How to verify digital signatures</a>
</li><li><a href="https://www.openwall.com/ove/">OVE IDs</a>
</li></ul>
</li><li id="last-li"><a href="https://www.openwall.com/news">What's new</a>
</li></ul>
</div>


</td></tr></tbody></table>




<a href="https://www.openwall.com/lists/oss-security/2024/04/18/3">[&lt;prev]</a> <a href="https://www.openwall.com/lists/oss-security/2024/04/18/5">[next&gt;]</a> <a href="https://www.openwall.com/lists/oss-security/2024/04/17/9">[&lt;thread-prev]</a> <a href="https://www.openwall.com/lists/oss-security/2024/04/18/">[day]</a> <a href="https://www.openwall.com/lists/oss-security/2024/04/">[month]</a> <a href="https://www.openwall.com/lists/oss-security/2024/">[year]</a> <a href="https://www.openwall.com/lists/oss-security/">[list]</a>
<pre>Date: Thu, 18 Apr 2024 18:42:42 +0200
From: Solar Designer &lt;solar@...nwall.com&gt;
To: oss-security@...ts.openwall.com
Subject: Re: The GNU C Library security advisories update for 2024-04-17: GLIBC-SA-2024-0004/CVE-2024-2961: ISO-2022-CN-EXT: fix out-of-bound writes when writing escape sequence

On Wed, Apr 17, 2024 at 02:36:02PM -0300, Adhemerval Zanella Netto wrote:
&gt; GLIBC-SA-2024-0004:
&gt; ===================
&gt; ISO-2022-CN-EXT: fix out-of-bound writes when writing escape sequence
&gt; 
&gt; The iconv() function in the GNU C Library versions 2.39 and older may
&gt; overflow the output buffer passed to it by up to 4 bytes when converting
&gt; strings to the ISO-2022-CN-EXT character set, which may be used to
&gt; crash an application or overwrite a neighbouring variable.
&gt; 
&gt; ISO-2022-CN-EXT uses escape sequences to indicate character set changes
&gt; (as specified by RFC 1922).  While the SOdesignation has the expected
&gt; bounds checks, neither SS2designation nor SS3designation have its;
&gt; allowing a write overflow of 1, 2, or 3 bytes with fixed values:
&gt; '$+I', '$+J', '$+K', '$+L', '$+M', or '$*H'.
&gt; 
&gt; CVE-Id: CVE-2024-2961
&gt; Public-Date: 2024-04-17
&gt; Vulnerable-Commit: 755104edc75c53f4a0e7440334e944ad3c6b32fc (2.1.93-169)
&gt; Fix-Commit: f9dc609e06b1136bb0408be9605ce7973a767ada (2.40)
&gt; Fix-Commit: 31da30f23cddd36db29d5b6a1c7619361b271fb4 (2.39-31)
&gt; Fix-Commit: e1135387deded5d73924f6ca20c72a35dc8e1bda (2.38-66)
&gt; Fix-Commit: 89ce64b269a897a7780e4c73a7412016381c6ecf (2.37-89)
&gt; Fix-Commit: 4ed98540a7fd19f458287e783ae59c41e64df7b5 (2.36-164)
&gt; Fix-Commit: 36280d1ce5e245aabefb877fe4d3c6cff95dabfa (2.35-315)
&gt; Fix-Commit: a8b0561db4b9847ebfbfec20075697d5492a363c (2.34-459)
&gt; Fix-Commit: ed4f16ff6bed3037266f1fa682ebd32a18fce29c (2.33-263)
&gt; Fix-Commit: 682ad4c8623e611a971839990ceef00346289cc9 (2.32-140)
&gt; 
&gt; Reported-By: Charles Fol

I hope Charles will share further detail with oss-security in due time,
but meanwhile his upcoming OffensiveCon talk abstract reveals a bit:

<a href="https://www.offensivecon.org/speakers/2024/charles-fol.html" rel="nofollow">https://www.offensivecon.org/speakers/2024/charles-fol.html</a>

&gt; CHARLES FOL
&gt; ICONV, SET THE CHARSET TO RCE: EXPLOITING THE GLIBC TO HACK THE PHP ENGINE
&gt; 
&gt; Abstract
&gt; A few months ago, I stumbled upon a 24 years old buffer overflow in the
&gt; glibc. Despite being reachable in multiple well-known libraries or
&gt; programs, it proved rarely exploitable. Indeed, this was not a foos bug:
&gt; with hard-to-achieve preconditions, it did not even provide a nice
&gt; primitive. On PHP however, it lead to amazing results: a new
&gt; exploitation technique that affects the whole PHP ecosystem, and the
&gt; compromission of several applications.
&gt; 
&gt; This talk will first walk you through the discovery of the bug and its
&gt; limitations, before describing the conception of several remote binary
&gt; PHP exploits, and through them offer unique insight in the internal of
&gt; the engine of the web language, and the difficulties one faces when
&gt; exploiting it.
&gt; 
&gt; BIO
&gt; Charles Fol, also known as cfreal, is a security researcher at LEXFO /
&gt; AMBIONICS. He has discovered remote code execution vulnerabilities
&gt; targeting renowned CMS and frameworks such as Drupal, Magento, Symfony
&gt; or Laravel, but also enjoys binary exploitation, to escalate privileges
&gt; (Apache, PHP-FPM) or compromise security solutions (DataDog's Sqreen,
&gt; Fortinet SSL VPN, Watchguard). He is the creator for PHPGGC, the go-to
&gt; tool to exploit PHP deserialization, and an expert in PHP internals.

The event is on May 10-11th, so in 3 weeks from now.

Alexander
</pre>
<p><a href="http://www.openwall.com/blists/">Powered by blists</a> - <a href="http://lists.openwall.net/">more mailing lists</a>


</p><p>
Please check out the
<a href="https://oss-security.openwall.org/wiki/">
Open Source Software Security Wiki</a>, which is counterpart to this
<a href="https://oss-security.openwall.org/wiki/mailing-lists/oss-security">mailing list</a>.
</p><p>
Confused about <a href="https://www.openwall.com/lists/">mailing lists</a> and their use?
<a href="https://en.wikipedia.org/wiki/Electronic_mailing_list">Read about mailing lists on Wikipedia</a>
and check out these
<a href="https://www.complang.tuwien.ac.at/anton/mail-news-errors.html">guidelines on proper formatting of your messages</a>.
</p></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Racket Language (251 pts)]]></title>
            <link>https://racket-lang.org/</link>
            <guid>40102912</guid>
            <pubDate>Sun, 21 Apr 2024 03:18:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://racket-lang.org/">https://racket-lang.org/</a>, See on <a href="https://news.ycombinator.com/item?id=40102912">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="doc"><top-section> <a href="https://racket-lang.org/"><span id="logo"><img alt="small logo" src="https://racket-lang.org/img/racket-logo.svg">&nbsp;Racket</span></a>

</top-section>

<section id="pull-quote"><section-content><li></li></section-content></section>

<div><p><label for="racket-lang"><span>Racket, the Programming Language</span></label></p><div><p><img alt="large logo" src="https://racket-lang.org/img/racket-logo.svg"></p><div><p>#lang racket/gui</p><pre><p>(<a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" onclick="javascript:cancel_bubble(event)">define</a> my-language 'English)</p><p>(<a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" onclick="javascript:cancel_bubble(event)">define</a> translations<br>  #hash([Chinese . "你好 世界"]<br>        [English . "Hello world"]<br>        [French . "Bonjour le monde"]<br>        [German . "Hallo Welt"]<br>        [Greek . "Γειά σου, κόσμε"]<br>        [Portuguese . "Olá mundo"]<br>        [Spanish . "Hola mundo"]<br>        [Thai . "สวัสดีชาวโลก"]<br>        [Turkish . "Merhaba Dünya"]))</p><p>(<a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" onclick="javascript:cancel_bubble(event)">define</a> my-hello-world<br>  (<a href="http://docs.racket-lang.org/reference/hashtables.html#(def._((quote._~23~25kernel)._hash-ref))" onclick="javascript:cancel_bubble(event)">hash-ref</a> translations my-language<br>            "hello world"))</p><p>(<a href="http://docs.racket-lang.org/gui/Windowing_Functions.html#(def._((lib._mred/main..rkt)._message-box))" onclick="javascript:cancel_bubble(event)">message-box</a> "" my-hello-world)</p></pre></div></div><p><label for="mature"><span>Mature</span></label></p><p><label for="practical"><span>Practical</span></label></p><p><label for="extensible"><span>Extensible</span></label></p><p><label for="robust"><span>Robust</span></label></p><p><label for="polished"><span>Polished</span></label></p></div>

<div><p><label for="racket-lop"><span>Racket, the Language-Oriented Programming Language</span></label></p><div id="lang4"><p>#lang datalog</p><pre>ancestor(A, B) <a href="https://docs.racket-lang.org/datalog/interop.html?q=%3A-#%28form._%28%28lib._datalog%2Fmain..rkt%29._~3a-%29%29" onclick="javascript:cancel_bubble(event)">:-</a> parent(A, B).<br>ancestor(A, B) <a href="https://docs.racket-lang.org/datalog/interop.html?q=%3A-#%28form._%28%28lib._datalog%2Fmain..rkt%29._~3a-%29%29" onclick="javascript:cancel_bubble(event)">:-</a><br>  parent(A, C), ancestor(C, B).<br>parent(john, douglas).<br>parent(bob, john).<br>ancestor(A, B)?</pre></div><p><label for="little-macros"><span>Little Macros</span></label></p><div><p>Racket allows programmers to <a href="https://docs.racket-lang.org/guide/pattern-macros.html" onclick="javascript:cancel_bubble(event)">add new syntactic constructs</a> in the same way that other languages permit the formulation of procedures, methods, or classes.  All you need to do is formulate a simple rule that rewrites a custom syntax to a Racket expression or definition.</p><p>Little macros can particularly help programmers with DRY where other features can’t. The example <abc>on the left</abc> <abc>above</abc> shows how to define a new syntax for measuring the time a task takes. The syntax avoids the repeated use of lambda. Note also how the macro is exported from this module as if it were an ordinary function.</p></div><p><label for="general-purpose"><span>General Purpose</span></label></p><div><p>Racket comes with a comprehensive suite of libraries: <a href="https://docs.racket-lang.org/gui/" onclick="javascript:cancel_bubble(event)">a cross-platform GUI toolbox</a>, a <a href="https://docs.racket-lang.org/web-server/index.html?q=%23lang%20web" onclick="javascript:cancel_bubble(event)">web server</a>, and more. <a href="https://pkgs.racket-lang.org/" onclick="javascript:cancel_bubble(event)">Thousands of additional packages</a> are a <a href="https://docs.racket-lang.org/pkg/getting-started.html?q=raco%20pkg#%28part._installing-packages%29" onclick="javascript:cancel_bubble(event)">single command</a> away: 3D graphics, a bluetooth socket connector, color maps, data structures, educational software, games, a quantum-random number generator, scientific simulations, web script testing, and many more.</p><p>Macros work with these tools. The example <abc>on the left</abc> <abc>above</abc> shows the implementation of a small number-guessing game. It is implemented in the GUI dialect of Racket, and demonstrates a number of language features.</p></div><p><label for="big-macros"><span>Big Macros</span></label></p><div><p><img src="https://racket-lang.org/img/big-macros-class.png" alt="Big Macros" width="350" height="262"></p><div><p>Getting to know the full Racket macro system will feel liberating, empowering, dazzling—like a whole new level of enlightenment. Developers can easily create a collection of co-operating macros to implement <a href="https://docs.racket-lang.org/reference/match.html" onclick="javascript:cancel_bubble(event)">algebraic pattern matching</a>, simple <a href="https://docs.racket-lang.org/teachpack/2htdpuniverse.html?q=big-bang#%28part._world._interactive%29" onclick="javascript:cancel_bubble(event)">event-handling</a>, or a <a href="https://pkgs.racket-lang.org/package/faster-minikanren" onclick="javascript:cancel_bubble(event)">logic-constraint solver</a>.</p><p>While Racket is a functional language, it has offered a sub-language of <a href="http://www.cs.utah.edu/plt/publications/aplas06-fff.pdf" onclick="javascript:cancel_bubble(event)">classes and objects, mixins and traits</a>, from the beginning. The macro-based implementation of a Java-like class system lives in a library and does not need any support from the core language. A Racket programmer can thus combine functional with object-oriented components as needed. </p></div></div><p><label for="easy-dsls"><span>Easy DSLs</span></label></p><div><p><img src="https://racket-lang.org/img/lang-video.png" alt="#lang video Dependency Graph" width="350" height="350"></p><div><p>Some languages convey ideas more easily than others. And some programming languages convey solutions better than others.  Therefore Racket is a language for <a href="https://docs.racket-lang.org/guide/hash-languages.html" onclick="javascript:cancel_bubble(event)">making languages</a>, so that a programmer can write every module in a well-suited language.</p><p>Often <a href="https://lang.video/" onclick="javascript:cancel_bubble(event)">an application domain</a> comes with several languages.  When you need a new language, you make it—on the fly. Open an IDE window; create a language right there, with just a few keystrokes; and run a module in this new language in a second IDE window.  Making new languages really requires no setup, no project files, no external tools, no nothing.</p></div></div><p><label for="ide-support"><span>IDE Support</span></label></p><div><p><img src="https://racket-lang.org/img/ide-support.png" alt="IDE Support" width="552" height="465"></p><div><p>Racket comes with its own IDE, <a href="https://docs.racket-lang.org/drracket/" onclick="javascript:cancel_bubble(event)">DrRacket</a> (<a href="https://www2.ccs.neu.edu/racket/pubs/jfp01-fcffksf.pdf" onclick="javascript:cancel_bubble(event)">née DrScheme</a>), and it sports some unique features. For example, when a programmer mouses over an identifier, the IDE draws an arrow back to where it was defined.</p><p>A programmer immediately benefits from DrRacket while using an alternative language, say <a href="https://docs.racket-lang.org/ts-guide/index.html" onclick="javascript:cancel_bubble(event)">Typed Racket</a>. Racket macros, even complex ones and those used to make new languages, record and propagate a sufficient amount of source information for DrRacket to act as if it understood the features of the new language.</p></div></div><p><label for="any-syntax"><span>Any Syntax</span></label></p><div><p><img src="https://racket-lang.org/img/ugly-syntax.png" alt="Dots and Colon-Pipes, too!" width="350" height="280"></p><div><p>Racket programmers usually love parentheses, but they have empathy for those who need commas and braces.  Hence, building languages with conventional surface syntax, like that of <a href="https://docs.racket-lang.org/datalog/datalog.html?q=datalog" onclick="javascript:cancel_bubble(event)">datalog</a>, is almost as easy as building parenthetical languages.</p><p>Racket’s ecosystem comes with <a href="https://docs.racket-lang.org/br-parser-tools/index.html?q=parsing" onclick="javascript:cancel_bubble(event)">parsing packages</a> that allow developers to easily map any syntax to a parenthesized language, which is then compiled to ordinary Racket with the help of Racket’s macro system. Such a language can also exploit the hooks of the IDE framework, so that its programmers may take advantage of Racket’s IDE.</p></div></div></div>

<div><p><label for="racket-ecosystem"><span>Racket, the Ecosystem</span></label></p><div><p><img alt="eighth RacketCon, 2018" src="https://racket-lang.org/img/racket-con-2018.png"></p></div><p><label for="software"><span>Software</span></label></p><p><label for="tutorials"><span>Tutorials &amp; Documentation</span></label></p><p><label for="community"><span>Community</span></label></p><p><label for="books"><span>Books</span></label></p><p><label for="education"><span>Education</span></label></p><div><table><tbody><tr><td><p>Education</p><p><a href="https://school.racket-lang.org/" onclick="javascript:cancel_bubble(event)">The Racket Summer School</a><br>a summer school for researchers, professionals, and (under)graduate students to the Racket philosophy of programming languages</p><p><a href="http://programbydesign.org/" onclick="javascript:cancel_bubble(event)">Program by Design (aka TeachScheme!)</a><br>a curriculum and training program for high school teachers and college faculty</p><p><a href="http://www.bootstrapworld.org/" onclick="javascript:cancel_bubble(event)">Bootstrap</a><br>a curriculum and training program for middle-school and high-school teachers</p></td><td></td><td><p><img src="https://racket-lang.org/img/four.png" alt="The Four Amigos" width="450" height="322"></p></td></tr></tbody></table></div><p><label for="swag"><span>Swag</span></label></p><div><table><tbody><tr><td><p>Swag</p><p><a href="https://devswag.com/products/racket-t-shirt" onclick="javascript:cancel_bubble(event)">Racket T-Shirts</a> — the perfect way to meet friends, influence people, and stay warm.</p><p><a href="https://devswag.com/products/racket" onclick="javascript:cancel_bubble(event)">Racket Stickers</a> — the indispensable accessory for laptops and textbooks.</p></td><td></td><td><img src="https://racket-lang.org/img/gear-and-stuff.jpg" alt="gear" width="272" height="364"></td></tr></tbody></table></div></div>

<section id="bottom"><section-title><p>Thank you</p></section-title><section-content><li></li></section-content></section>




</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I bought 300 emoji domain names from Kazakhstan and built an email service (2021) (366 pts)]]></title>
            <link>https://tinyprojects.dev/projects/mailoji</link>
            <guid>40101885</guid>
            <pubDate>Sat, 20 Apr 2024 23:24:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tinyprojects.dev/projects/mailoji">https://tinyprojects.dev/projects/mailoji</a>, See on <a href="https://news.ycombinator.com/item?id=40101885">Hacker News</a></p>
<div id="readability-page-1" class="page">
	
	<nav>
		<a href="https://tinyprojects.dev/">Home</a>
		<a href="https://tinyprojects.dev/projects">Projects</a>
		<a href="https://tinyprojects.dev/guides">Guides</a>
		<a href="https://tinyprojects.dev/blog">Blog</a>
		<a href="https://daily.tinyprojects.dev/">Daily Blog</a>
	</nav>
	
	<p><i>March 11th 2021</i></p>

	<p>TLDR; I bought 300 emoji domain names from Kazakhstan and built an <a href="https://mailoji.com/" target="_blank">emoji email address service</a>. In the process I went viral on TikTok, made $1000 in a week, hired a Japanese voice actor, and learnt about the weird world of emoji domains.</p>

	<h3>🌅 The setup</h3>

	<p>Not long ago I decided it would be a brilliant idea to buy the domain name <a href="https://tinyprojects.dev/posts/i_bought_netflix_dot_soy" target="_blank">netflix.soy</a>.</p>

	<p>Whilst arguably there are better ways to spend £17, I did learn a lot about domain names, including that it's possible to have emoji domains like <span>😊.ws</span>.</p>

	<p>It's pretty hard to go a day without seeing an emoji somewhere on the internet. Yet, I'd never seen an emoji domain name before.</p>

	<p>I wondered:</p>

	<p>Could I buy an emoji domain name?</p>

	<h3>💸 Buying an emoji domain name</h3>

	<p>My goal was to buy a single character emoji domain name, like 💡 or 🍰. I didn't know what I'd do with it, I just wanted to see if I could get one.</p>

	<p>I found a website that showed every available emoji domain for 4 different extensions.</p>

	<p>Sadly, nearly every single one had been registered. I was late to the party.</p>

	<img src="https://i.gyazo.com/6aa39e2f0e8e2f9039b61c95ea360cb7.png" alt="Taken emoji domains">

	<p>A simple mailbox emoji with a .ws extension was still available though, so I bought it.</p>

	<h3>📪 The mailbox</h3>

	<img src="https://i.gyazo.com/1b78a0aab3ca0b04649eacf46fd3bc0a.png" alt="Mailbox emoji domain in GoDaddy">

	<p><span>📪.ws</span> was now mine. Mission complete.</p>

	<p>I set up a website and felt rather accomplished with my tiny mailbox.</p>

	<p>I could've stopped there and called it a day. But, then I had another thought:</p>

	<p>Could I use my little mailbox emoji domain in an email address?</p>

	<p>That'd be pretty cute.</p>

	<h3>✉️ Emoji mail attempt #1</h3>

	<p>I gave it a go. I setup an email forwarder to route all email sent to <span>📪.ws</span> to my regular email address.</p>

	<p>Eagerly I typed <span>ben@📪.ws</span> into the "to" field of gmail and hit send.</p>

	<img src="https://i.gyazo.com/3ab67d13bcfad786b7f3ba9a01968272.png" alt="Sending first emoji mail">

	<h3>🛑 Blocked</h3>

	<p>The email never hit my inbox. It was lost forever in cyberspace.</p>

	<p>Turns out emoji domain names score very highly for spam and were going to be blocked to high heaven.</p>

	<p>But, it was interesting that I could send mail towards an emoji email address.</p>

	<p>So I wondered:</p>

	<p>If a normal .com email address doesn't get blocked for spam, could I route my emoji mail through that?</p>

	<h3>💌 Emoji mail attempt #2</h3>

	<p>It would work like this: </p>

	<ol>
		<li>Email sent to <span>ben@📪.ws</span></li>
		<li><span>ben@📪.ws</span> forwards to <span>nospam@normal.com</span></li>
		<li><span>nospam@normal.com</span> forwards to my email address and won't get blocked.</li>
	</ol>

	<p>I cobbled together something using AWS, and tried my experiment again.</p>

	<p>to: <span>ben@📪.ws</span></p>
		<p>message: Hi Ben, how's it going?</p>
	

	<p>Send.</p>

	<img src="https://i.gyazo.com/bdc529a214b0e2019a96a86c933c4bcb.png" alt="First emoji mail">

	<p>It worked!</p>

	<h3>🧨 Where things started to get out of control</h3>

	<p>At this point I was inclined to stop and write a post about emoji email addresses. I'd had a good run.</p>

	<p>But then I wondered:</p>

	<p>My mailbox emoji email address is great and all, but do you know what would be better? <span>ben@⭐</span></p>

	<p>Now how do I get one of those?</p>

	<h3>🎣 Emoji domain name hunting</h3>

	<p>Only 13 TLDs in the world accept registrations of emoji domain names: .cf, .ga, .gq, .la, .ml, .tk, .st, .fm, .to, .je, .gg, .kz, and .ws.</p>

	<p>The website I had used to purchase <span>📪.ws</span> only showed 4 TLDs: .fm, .ws, .to and .ml. These are considered the gold standard of emoji domain name registrars.</p>

	<p>Every emoji had been taken on these though. You could of course get multi-character emoji domains like <span>🎉🐢.ws</span>, but I wanted single character emoji domains only.</p>

	<p>So I wondered:</p>

	<p>Do any of those other TLDs have any emoji domains left?</p>

	<h3>🔭 The great hunt</h3>

	<p>I already had some code that performed WHOIS lookups to see if a domain name is available for a list of TLDs.</p>

	<p>Previously I'd used this code to buy <a href="https://tinyprojects.dev/posts/i_bought_netflix_dot_soy" target="_blank">facebook.网站</a>, only for Marky Z to snatch it back from me. Cheeky bugger.</p>

	<p>I booted up the code and loaded in some A-tier emojis (e.g. ⭐,😂,❤️) and the 13 TLDs that accepted them.</p>

	<p><i>&gt;node search.js</i> [ENTER]</p>

	<h3>🎁 The results</h3>

	<img src="https://i.gyazo.com/6adaeb53f45f75605749f78d4dcac8c3.png" alt="Console output showing available TLDs for emoji domains">

	<p>Instantly I was seeing results! .la, .ga, .gq, .je. There were plenty of emojis still out there on these alternative extensions.</p>

	<p>An extension that stood out to me straight away was .gg, for the Island of Guernsey. "GG" is an acronym for "Good Game", and I say it often when I lose at online games. It was perfect.</p> 

	<p><span>⭐.gg</span> was available for €29. I hit purchase.</p>

	<h3>💔 No GG for me</h3>

	<p>The next day Guernsey sent me an email.</p>

	<img src="https://i.gyazo.com/527c4941fbb3ddcffbc92a0c2ef1c828.png" alt="Email from Guernsey saying emoji domains not available on .gg">

	<p>Long story short, although you could register emoji domain names with them, they didn't actually work.</p>

	<p>Good game Guernsey. Back to the drawing board.</p>

	<h3>⭐ Crazy for KZ</h3>

	<p>With every other extension I kept hitting walls. A lot of the registrars wouldn't even let me search for emoji domains. Nothing was working.</p>

	<p>One extension that kept cropping up was .kz of Kazakhstan. But, I headed over to their registar website and it was entirely in Russian.</p>

	<img src="https://i.gyazo.com/6c20c8eea912beb320555c0dace78b1b.png" alt="Russian domain name website">

	<p>I do not speak Russian.</p>

	<p>Using Google Translate, I tried to navigate the website and buy a .kz emoji domain.</p>

	<p>It was a long, painful process. But, after phoning my bank to confirm I was indeed trying to make a purchase using Kazakhstani tenge, <span>⭐.kz</span> was sitting in my account.</p>

	<p>I plugged it into my email system and <span>ben@⭐.kz</span> worked.</p>

	<p>Very nice.</p>

	<h3>💼 Let's start an email service</h3>

	<p>Something excited me. Nearly all single character emojis were available on .kz, and they were only $8 each.</p>

	<p>So, I wondered:</p>

	<p>What if you could get an email address with any emoji you wanted?</p>

	<p>I pictured email addresses like <span>bob@🚀</span>, <span>alice@🌸</span>, <span>melvin@🍆</span>.</p>

	<p>All I'd need to do is buy every emoji domain to build a service like this.</p>

	<p>It was insane, but it was possible.</p>

	<h3>🌙 The night of 150 emojis</h3>

	<p>I decided I was going to do it.</p>

	<p>If I was chuffed with my mailbox emoji email address, perhaps others would be too.</p>

	<p>I got out my debit card, and, one by one, started buying Kazakhstan emoji domains.</p>

	<p><span>💡.kz</span>, <span>👑.kz</span>, <span>🌈.kz</span>, <span>😎.kz</span>. Buy, buy, buy, buy.</p>

	<p>It was slightly painful watching my bank account going down, and the number of emoji domains go up.</p>

	<p>80 emojis in, forking over money for a goat emoji domain name, you seriously start to question what you're doing.</p>

	<p>$1200 later, 150 emoji domains were mine.</p>

	<h3>💻 Building an emoji email address website</h3>

	<p>Finally, I needed a website where you could register an emoji email address and it would forward mail like <span>ben@📪.ws</span> did.</p>

	<p>Using vanilla HTML, JS and CSS, plus Stripe's API for payments, I cobbled together an MVP over a few weeks.</p>

	<p>Once it was done, I bought one last domain name: <a href="https://mailoji.com/" target="_blank">mailoji.com</a>. My new emoji email address service <a href="https://mailoji.com/" target="_blank">Mailoji</a> was ready. Get your emoji email addresses.</p>

	<img src="https://i.gyazo.com/30c54b0bed4ffc85cb38940a2b26748e.png" alt="Mailoji emoji email address website">

	<h3>📱 TikTok</h3>

	<p>I'd gone from being curious about emoji domain names to now owning 150 of Kazakhstan's finest.</p>

	<p>The next step was to convince someone else to buy an emoji email address.</p>

	<p>TikTok seemed like a good place to start given its demographic. So, I recorded a short video advert and started a "TikTok for business" application to publish it.</p>

	<p>On the final page of the application I was asked for a VAT registration number. Mailoji was not a proper business yet, so there was no way I could publish my ad.</p>

	<p>Screw it, I'll post the video normally.</p>

	<p>Upload.</p>

	<h3>🎉 First sales</h3>

	<p>Here is the <a href="https://www.tiktok.com/@mailoji/video/6925405275201539334?lang=en&amp;is_copy_url=1&amp;is_from_webapp=v3" target="_blank">advert</a> if you're interested.</p>

	<p>The video sat at 0 views for about 5 hours before the TikTok algorithm started to work its magic.</p>

	<p>Slowly, the views started ramping up. 500 views, to 5k views, to 50k views. It was incredible to witness.</p>

	<p>People were loving emoji email addresses, people were hating emoji email addresses.</p>

	<p>It was like Marmite, a talking point. None of it mattered though because emoji email addresses were selling! <span>@🚀</span>, <span>@📷</span> &amp; <span>@💻</span> addresses were the most popular.</p>

	<p>Over 2 days the TikTok video reached 200k+ views, and 60 emoji email addresses had been sold netting ~$300/yr in revenue.</p>

	<img src="https://i.gyazo.com/e33fb288704cc42f58e50ff4a5d33fa8.png" alt="Stripe graph showing first sales from selling emoji domains">

	<p>I took this as a fantastic indicator. So guess what I did?</p>

	<h3>💵 Buying more emoji domain names</h3>

	<p>I decided to purchase 100 more emoji domains.</p>

	<p>I cried into my keyboard forking out yet more money for a llama emoji that I probably didn't need.</p>

	<p>In the end I had 250 emoji domains. If there was ever a moat into the emoji email address world, this was it.</p>

	<h3>📅 Preparing for launch</h3>

	<p>I figured the more people with emoji email addresses, the more people who would see them, and the more people who would buy them. A beautiful cycle.</p>

	<p>My next goal was a Product Hunt launch to get exposure for Mailoji, and kickstart this cycle.</p>

	<p>I prepped my launch post, carefully choosing each word and image.</p>

	<p>I even created this over-hyped promotional video, complete with Japanese voice actor saying the words "Mailoji".</p>

	<p>
	<iframe width="560" height="315" src="https://www.youtube.com/embed/JKxEXZv4G3c" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>

	<p>Mailoji was ready for launch.</p>

	<h3>🚀 Launch Day</h3>

	<p>At 12:03 AM PST Mailoji went live on <a href="https://www.producthunt.com/posts/mailoji" target="_blank">Product Hunt</a>. We had come a long way from that little mailbox emoji.</p>

	<img src="https://i.gyazo.com/0cf1d62b2d820c8f456a95da3cffda01.png" alt="Product hunt launch thumbnail">

	<p>It was 8:03 AM UK time. Bleary eyed, with a cup of tea in hand, I watched as Mailoji did battle.</p>

	<p>I had chosen to launch on a Wednesday against some stiff competition, but Mailoji really held its own.</p>

	<p>At the end of the day it finished in 5th place. Here were the end of day stats: </p>

	<ul>
		<li>🌎 6.7k website views
		</li><li>💌 150+ emoji email addresses sold</li>
		<li>💵 $830/yr ARR</li>
		<li>🔺 320 upvotes</li>
		<li>🏅 5th place on Product Hunt</li>
		<li>🎀 Most popular Mailoji: @🚀</li>
	</ul>

	<p>Over 150 emoji email addresses were sold in a day, and I received some fantastic feedback from the Product Hunt community.</p>

	<p>It was done, Mailoji had officially launched.</p>

	<h3>📙 The aftermath</h3>

	<p>I wish this story ended with Mailoji blowing up and the queen registering an emoji email address or something (I'll reserve <span>Liz@👑.kz</span> just in case).</p>

	<p>But, currently Mailoji is sitting at ~$1440/year in revenue. There's now 300 emoji domains to choose from though.</p>

	<img src="https://i.gyazo.com/6eac0eb3bcdaa1ee78e57b6692ed9afc.png" alt="Final Stripe ARR chart for Mailoji">

	<p>Even though I still haven't made the money back on all the emoji domains I bought, creating an emoji email address service was so much fun.</p>

	<p>It was an adventure. A rabbit hole containing multiple rabbit holes.</p>

	<p>This project started out as an exploration into emoji domain names; a weird, forgotten about internet feature that I've now become quite fond of.</p>

	<p>Yes emoji domains are hard to type on desktop, yes there's too many variations, and yes, most form validations hate them.</p>

	<p>But they're fun, and I think tech should be more fun.</p>

	<p>Thanks for reading. If you want to get in touch, I've got a brand new email address at the bottom of this website.</p>

	
	
	
	
	
	

</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Scientists discover first nitrogen fixing organelle (194 pts)]]></title>
            <link>https://newscenter.lbl.gov/2024/04/17/scientists-discover-first-nitrogen-fixing-organelle/</link>
            <guid>40101317</guid>
            <pubDate>Sat, 20 Apr 2024 21:50:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://newscenter.lbl.gov/2024/04/17/scientists-discover-first-nitrogen-fixing-organelle/">https://newscenter.lbl.gov/2024/04/17/scientists-discover-first-nitrogen-fixing-organelle/</a>, See on <a href="https://news.ycombinator.com/item?id=40101317">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

      
<lbl-container wrapper-size="sm">
  <lbl-rich-text>
    <p><a href="https://news.ucsc.edu/2024/04/nitrogen-fixing-organelle.html" target="_blank" rel="noopener"><em>Adapted from a release by Erin Malsbury at UC Santa Cruz</em></a></p>
<p>Modern biology textbooks assert that only bacteria can take nitrogen from the atmosphere and convert it into a form that is usable for life. Plants that fix nitrogen, such as legumes, do so by harboring symbiotic bacteria in root nodules. But a recent discovery upends that rule.</p>
<p>In two recent papers, an international team of scientists describe the first known nitrogen-fixing organelle within a eukaryotic cell. The organelle is the fourth example in history of primary endosymbiosis – the process by which a prokaryotic cell is engulfed by a eukaryotic cell and evolves beyond symbiosis into an organelle.</p>
<p>“It’s very rare that organelles arise from these types of things,” said Tyler Coale, a postdoctoral scholar at UC Santa Cruz and first author on one of two recent papers. “The first time we think it happened, it gave rise to all complex life. Everything more complicated than a bacterial cell owes its existence to that event,” he said, referring to the origins of the mitochondria. “A billion years ago or so, it happened again with the chloroplast, and that gave us plants,” Coale said.</p>
<p>The third known instance involves a microbe similar to a chloroplast. The organelle in this discovery has been named a nitroplast.</p>
<h2>A decades-long mystery</h2>
<p>The discovery of the organelle involved a bit of luck and decades of work. In 1998, Jonathan Zehr, a UC Santa Cruz distinguished professor of marine sciences, found a short DNA sequence of what appeared to be from an unknown nitrogen-fixing cyanobacterium in Pacific Ocean seawater. Zehr and colleagues spent years studying the mystery organism, which they called UCYN-A.</p>
<p>At the same time, Kyoko Hagino, a paleontologist at Kochi University in Japan, was painstakingly trying to culture a marine alga. It turned out to be the host organism for UCYN-A. It took her over 300 sampling expeditions and more than a decade, but Hagino eventually successfully grew the alga in culture, allowing other researchers to begin studying UCYN-A and its marine alga host together in the lab.</p>
<p>For years, the scientists considered UCYN-A an endosymbiont that was closely associated with an alga. But the two recent papers suggest that UCYN-A has co-evolved with its host past symbiosis and now fits criteria for an organelle.</p>
<h2>Organelle origins</h2>
<p>In a&nbsp;<a href="https://www.cell.com/cell/pdf/S0092-8674(24)00182-X.pdf" target="_blank" rel="noopener">paper published in <em>Cell</em></a>&nbsp;in March, Zehr and colleagues from the Massachusetts Institute of Technology, Institut de Ciències del Mar in Barcelona and the University of Rhode Island show that the size ratio between UCYN-A and their algal hosts is similar across different species of the marine haptophyte algae&nbsp;<em>Braarudosphaera bigelowii</em>.</p>
<p>The researchers use a model to demonstrate that the growth of the host cell and UCYN-A are controlled by the exchange of nutrients. Their metabolisms are linked. This synchronization in growth rates led the researchers to call UCYN-A “organelle-like.”</p>
<p>“That’s exactly what happens with organelles,” said Zehr. “If you look at the mitochondria and the chloroplast, it’s the same thing: they scale with the cell.”</p>
<p>But the scientists did not confidently call UCYN-A an organelle until confirming other lines of evidence. In the&nbsp;<a href="https://www.science.org/doi/10.1126/science.adk1075" target="_blank" rel="noopener">cover article of the journal <em>Science</em></a>, published last week, the UC Santa Cruz team and collaborators from Lawrence Berkeley National Laboratory (Berkeley Lab), UC San Francisco, National Taiwan Ocean University, and Kochi University in Japan show that UCYN-A relies on proteins from its host cells and that the organelle’s process of replication and division is tightly paired with the algal cell’s process.</p>
<p>“Until this paper, there was still a question of is this still an ‘endosymbiont’, or has it become a true organelle?” said co-author Carolyn Larabell, a senior faculty scientist in Berkeley Lab’s Biosciences Area and Director of the National Center for X-Ray Tomography. “We showed with X-ray imaging that the process of replication and division of the algal host and endosymbiont is synchronized, which provided the first strong evidence.”</p>
<p>Larabell has been collaborating with Zehr for several years to study the relationship between UCYN-A and the alga using the advanced soft X-ray tomography approach she co-developed at Berkeley Lab’s Advanced Light Source, a particle accelerator that produces X-rays. Her technique allows scientists to rapidly visualize internal components of cells in real-time, under real-life conditions.</p>
<p>Valentina Loconte, a research scientist in Larabell’s group, performed the tomography on a large number of <em>B. bigelowii </em>cells, then analyzed the data to generate detailed images showing the organelle’s movements within the alga at all stages of replication.</p>
<p>“That’s the beauty of our technology. We can get numbers to make quantitative statements. We have numbers at each stage of the cell cycle to show that this isn’t a quirk,” said Larabell.</p>
<p>Meanwhile, Coale compared proteins found within isolated UCYN-A with those found in the entire algal host cell. He found that around half of the proteins in UCYN-A are made by the algal host cell, then labeled with a specific amino acid sequence, which tells the cell to send them to the nitroplast. The nitroplast then imports the proteins and uses them.</p>
<p>“That’s one of the hallmarks of something moving from an endosymbiont to an organelle,” said Zehr. “They start throwing away pieces of DNA, and their genomes get smaller and smaller, and they start depending on the mother cell for those gene products – or the protein itself – to be transported into the cell.”</p>
<p>This dependent relationship, taken together with the images of synchronized division, shows that UCYN-A deserves organelle status.</p>
<h2>Changing perspectives</h2>
<p>While mitochondria and chloroplasts evolved billions of years ago, the nitroplast appears to have evolved about 100 million years ago, providing scientists with a new, more recent perspective on organellogenesis.</p>
<p>The organelle also provides insight into ocean ecosystems. All organisms need nitrogen in a biologically usable form, and rely on nitrogen fixers to break apart tightly bound nitrogen gas (N<sub>2</sub>) in the atmosphere, and convert it into ammonia (NH<sub>3</sub>) molecules that can then be made into countless other compounds. Researchers have found UCYN-A everywhere from the tropics to the Arctic Ocean, and it fixes a significant amount of nitrogen.</p>
<p>The discovery also has the potential to change agriculture. The ability to synthesize ammonia fertilizers from atmospheric nitrogen allowed agriculture – and the world population – to take off in the early 20th century. Known as the Haber-Bosch process, it makes possible about 50% of the world’s food production. It also creates enormous amounts of carbon dioxide: about 1.4% of global emissions come from the process. For decades, researchers have tried to figure out a way to incorporate natural nitrogen fixation into agriculture.</p>
<p>“This system is a new perspective on nitrogen fixation, and it might provide clues into how such an organelle could be engineered into crop plants,” said Coale.</p>
<p>But plenty of questions about UCYN-A and its algal host remain unanswered. The researchers plan to delve deeper into how UCYN-A and the alga operate and study different strains.</p>
<p>Kendra Turk-Kubo, an assistant professor at UC Santa Cruz, will continue the research in her new lab. Zehr expects scientists will find other organisms with evolutionary stories similar to UCYN-A, but as the first of its kind, this discovery is one for the textbooks.</p>
<p>This research was funded by the Simons Foundation, National Institute of General Medical Sciences, and the Department of Energy (DOE) Office of Science Office of Biological and Environmental Research. The Advanced Light Source is a DOE Office of Science user facility.</p>
<p>###</p>
<p><a href="https://www.lbl.gov/">Lawrence Berkeley National Laboratory</a> (Berkeley Lab) is committed to delivering solutions for humankind through research in clean energy, a healthy planet, and discovery science. Founded in 1931 on the belief that the biggest problems are best addressed by teams, Berkeley Lab and its scientists have been recognized with 16 Nobel Prizes. Researchers from around the world rely on the Lab’s world-class scientific facilities for their own pioneering research. Berkeley Lab is a multiprogram national laboratory managed by the University of California for the U.S. Department of Energy’s Office of Science.</p>
<p>DOE’s Office of Science is the single largest supporter of basic research in the physical sciences in the United States, and is working to address some of the most pressing challenges of our time. For more information, please visit <a href="http://energy.gov/science" target="_blank" rel="noopener">energy.gov/science</a>.</p>
  </lbl-rich-text>
</lbl-container>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Two lifeforms merge in once-in-a-billion-years evolutionary event (262 pts)]]></title>
            <link>https://newatlas.com/biology/life-merger-evolution-symbiosis-organelle/</link>
            <guid>40101290</guid>
            <pubDate>Sat, 20 Apr 2024 21:46:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://newatlas.com/biology/life-merger-evolution-symbiosis-organelle/">https://newatlas.com/biology/life-merger-evolution-symbiosis-organelle/</a>, See on <a href="https://news.ycombinator.com/item?id=40101290">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Scientists have caught a once-in-a-billion-years evolutionary event in progress, as two lifeforms have merged into one organism that boasts abilities its peers would envy. Last time this happened, Earth got plants.</p><p>The phenomenon is called <a href="https://newatlas.com/biology/synthetic-hybrids-yeast-bacteria-evolution-symbiosis/" data-cms-ai="0">primary endosymbiosis</a>, and it occurs when one microbial organism engulfs another, and starts using it like an internal organ. In exchange, the host cell provides nutrients, energy, protection and other benefits to the symbiote, until eventually it can no longer survive on its own and essentially ends up <i>becoming</i> an organ for the host – or what’s known as an organelle in microbial cells.</p><p>Imagine if kidneys were actually little animals running around, and humans had to manually filter their blood through a dialysis machine. Then one day some guy somehow gets one of these kidney critters stuck... Internally (who are we to judge how?) – and realizes he no longer needs his dialysis machine. Neither do his kids, until eventually we're all born with these helpful little fellas inside us. That’s kind of what’s happening here.</p><div data-align-center="">
                
                    <figure>
    
    
    
    


<p><img alt="A diagram of the mitochondria in a cell" width="1440" height="802" data-image-size="articleImage" loading="lazy" data-srcset="https://assets.newatlas.com/dims4/default/e47eafd/2147483647/strip/true/crop/1600x891+0+0/resize/440x245!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg 440w,https://assets.newatlas.com/dims4/default/9556f7a/2147483647/strip/true/crop/1600x891+0+0/resize/800x446!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg 800w,https://assets.newatlas.com/dims4/default/214decf/2147483647/strip/true/crop/1600x891+0+0/resize/1200x668!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg 1200w,https://assets.newatlas.com/dims4/default/145c392/2147483647/strip/true/crop/1600x891+0+0/resize/1920x1069!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg 1920w" data-src="https://assets.newatlas.com/dims4/default/72bcb4b/2147483647/strip/true/crop/1600x891+0+0/resize/1440x802!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg" sizes="(min-width: 1240px) 800px, (min-width: 1024px) 95vw, 100vw" srcset="https://assets.newatlas.com/dims4/default/e47eafd/2147483647/strip/true/crop/1600x891+0+0/resize/440x245!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg 440w,https://assets.newatlas.com/dims4/default/9556f7a/2147483647/strip/true/crop/1600x891+0+0/resize/800x446!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg 800w,https://assets.newatlas.com/dims4/default/214decf/2147483647/strip/true/crop/1600x891+0+0/resize/1200x668!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg 1200w,https://assets.newatlas.com/dims4/default/145c392/2147483647/strip/true/crop/1600x891+0+0/resize/1920x1069!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg 1920w" src="https://assets.newatlas.com/dims4/default/72bcb4b/2147483647/strip/true/crop/1600x891+0+0/resize/1440x802!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Fdb%2Fd2%2Fa7d70c80494c888fe5f519719327%2Fmitochondria-0.jpeg">
</p>



    
    

    
        <div><figcaption itemprop="caption">A diagram of the mitochondria in a cell</figcaption><p>National Human Genome Research Institute</p></div>
    
</figure>

                
            </div><p>In the 4-billion-odd-year history of life on Earth, primary endosymbiosis is thought to have only happened twice that we know of, and each time was a massive breakthrough for evolution. The first occurred about 2.2 billion years ago, when an archaea swallowed a bacterium that became the mitochondria. This specialized energy-producing organelle allowed for basically all complex forms of life to evolve. It remains the heralded "powerhouse of the cell" to this day. </p><p>The second time happened about 1.6 billion years ago, when some of these more advanced cells absorbed cyanobacteria that could harvest energy from sunlight. These became organelles called chloroplasts, which gave sunlight-harvesting abilities, as well as a fetching green color, to a group of lifeforms you might have heard of – plants. </p><div data-align-center="">
                
                    <figure>
    
    
    
    


<p><img alt="Live moss cells under a microscope, showing their chloroplasts (green circles)" width="1440" height="919" data-image-size="articleImage" loading="lazy" data-srcset="https://assets.newatlas.com/dims4/default/0da7c66/2147483647/strip/true/crop/2295x1464+0+0/resize/440x281!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg 440w,https://assets.newatlas.com/dims4/default/1581ce0/2147483647/strip/true/crop/2295x1464+0+0/resize/800x511!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg 800w,https://assets.newatlas.com/dims4/default/5ef6141/2147483647/strip/true/crop/2295x1464+0+0/resize/1200x766!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg 1200w,https://assets.newatlas.com/dims4/default/70b7e2d/2147483647/strip/true/crop/2295x1464+0+0/resize/1920x1225!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg 1920w" data-src="https://assets.newatlas.com/dims4/default/dcdfdce/2147483647/strip/true/crop/2295x1464+0+0/resize/1440x919!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg" sizes="(min-width: 1240px) 800px, (min-width: 1024px) 95vw, 100vw" srcset="https://assets.newatlas.com/dims4/default/0da7c66/2147483647/strip/true/crop/2295x1464+0+0/resize/440x281!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg 440w,https://assets.newatlas.com/dims4/default/1581ce0/2147483647/strip/true/crop/2295x1464+0+0/resize/800x511!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg 800w,https://assets.newatlas.com/dims4/default/5ef6141/2147483647/strip/true/crop/2295x1464+0+0/resize/1200x766!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg 1200w,https://assets.newatlas.com/dims4/default/70b7e2d/2147483647/strip/true/crop/2295x1464+0+0/resize/1920x1225!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg 1920w" src="https://assets.newatlas.com/dims4/default/dcdfdce/2147483647/strip/true/crop/2295x1464+0+0/resize/1440x919!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2F96%2Fca%2F61428d1b484d9360ca9ce87832b0%2Fchloroplasts.jpeg">
</p>



    
    

    
        <div><figcaption itemprop="caption">Live moss cells under a microscope, showing their chloroplasts (green circles)</figcaption></div>
    
</figure>

                
            </div><p>And now, scientists have discovered that it’s happening again. A species of algae called <i>Braarudosphaera bigelowii</i> was found to have engulfed a cyanobacterium that lets them do something that algae, and plants in general, can’t normally do – "fixing" nitrogen straight from the air, and combining it with other elements to create more useful compounds.</p><p>Nitrogen is a key nutrient, and normally plants and algae get theirs through symbiotic relationships with bacteria that remain separate. At first it was thought that <i>B. bigelowii</i> had hooked up this kind of situation with a bacterium called UCYN-A, but on closer inspection, scientists discovered that the two have gotten far more intimate.</p><p>In one recent study, a team found that the size ratio between the algae and UCYN-A stays similar across different related species of the algae. Their growth appears to be controlled by the exchange of nutrients, leading to linked metabolisms.</p><p>“That’s exactly what happens with organelles,” said Jonathan Zehr, an author of the studies. “If you look at the mitochondria and the chloroplast, it’s the same thing: they scale with the cell.”</p><p>In a follow-up study, the team and other collaborators used a powerful X-ray imaging technique to view the interior of the living algae cells. This revealed that the replication and cell division was synchronized between the host and symbiote – more evidence of primary endosymbiosis at work.</p><div data-align-center="">
                
                    <figure>
    
    
    
    


<p><img alt="X-ray images of Braarudosphaera bigelowii at different stages of cell division. The newly identified nitroplast is highlighted in cyan, the algae nucleus is blue, mitochondria are green and chloroplasts are purple" width="1025" height="685" data-image-size="articleImage" loading="lazy" data-srcset="https://assets.newatlas.com/dims4/default/1167d59/2147483647/strip/true/crop/1025x685+0+0/resize/440x294!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png 440w,https://assets.newatlas.com/dims4/default/79f851b/2147483647/strip/true/crop/1025x685+0+0/resize/800x535!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png 800w,https://assets.newatlas.com/dims4/default/82e3fe1/2147483647/strip/true/crop/1025x685+0+0/resize/1200x802!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png 1200w,https://assets.newatlas.com/dims4/default/fc8a14f/2147483647/strip/true/crop/1025x685+0+0/resize/1920x1283!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png 1920w" data-src="https://assets.newatlas.com/dims4/default/3b97965/2147483647/strip/true/crop/1025x685+0+0/resize/1025x685!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png" sizes="(min-width: 1240px) 800px, (min-width: 1024px) 95vw, 100vw" srcset="https://assets.newatlas.com/dims4/default/1167d59/2147483647/strip/true/crop/1025x685+0+0/resize/440x294!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png 440w,https://assets.newatlas.com/dims4/default/79f851b/2147483647/strip/true/crop/1025x685+0+0/resize/800x535!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png 800w,https://assets.newatlas.com/dims4/default/82e3fe1/2147483647/strip/true/crop/1025x685+0+0/resize/1200x802!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png 1200w,https://assets.newatlas.com/dims4/default/fc8a14f/2147483647/strip/true/crop/1025x685+0+0/resize/1920x1283!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png 1920w" src="https://assets.newatlas.com/dims4/default/3b97965/2147483647/strip/true/crop/1025x685+0+0/resize/1025x685!/quality/90/?url=http%3A%2F%2Fnewatlas-brightspot.s3.amazonaws.com%2Ffc%2F29%2Fbe4497b0484cba59d73433909e61%2Fnitroplasts.png">
</p>



    
    

    
        <div><figcaption itemprop="caption">X-ray images of <i>Braarudosphaera bigelowii </i>at different stages of cell division. The newly identified nitroplast is highlighted in cyan, the algae nucleus is blue, mitochondria are green and chloroplasts are purple</figcaption><p>Valentina Loconte/Berkeley Lab</p></div>
    
</figure>

                
            </div><p>And finally, the team compared the proteins of isolated UCYN-A to those inside the algal cells. They found that the isolated bacterium can only produce about half of the proteins it needs, relying on the algal host to provide the rest.</p><p>“That’s one of the hallmarks of something moving from an endosymbiont to an organelle,” said Zehr. “They start throwing away pieces of DNA, and their genomes get smaller and smaller, and they start depending on the mother cell for those gene products – or the protein itself – to be transported into the cell.”</p><p>Altogether, the team says this indicates UCYN-A is a full organelle, which is given the name of nitroplast. It appears that this began to evolve around 100 million years ago, which sounds like an incredibly long time but is a blink of an eye compared to mitochondria and chloroplasts.</p><p>The researchers plan to continue studying nitroplasts, to find out if they’re present in other cells and what effects they may have. One possible benefit is that it could give scientists a new avenue to incorporate nitrogen-fixing into plants to grow better crops.</p><p>The research was published in the journals <i><a href="https://www.cell.com/cell/pdf/S0092-8674(24)00182-X.pdf" target="_blank" data-cms-ai="0">Cell</a></i> and <i><a href="https://www.science.org/doi/10.1126/science.adk1075" target="_blank" data-cms-ai="0">Science</a></i>.</p><p>Source: <a href="https://newscenter.lbl.gov/2024/04/17/scientists-discover-first-nitrogen-fixing-organelle/" target="_blank" data-cms-ai="0">Berkeley Lab</a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why everything is becoming a game (169 pts)]]></title>
            <link>https://www.gurwinder.blog/p/why-everything-is-becoming-a-game</link>
            <guid>40100867</guid>
            <pubDate>Sat, 20 Apr 2024 20:44:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.gurwinder.blog/p/why-everything-is-becoming-a-game">https://www.gurwinder.blog/p/why-everything-is-becoming-a-game</a>, See on <a href="https://news.ycombinator.com/item?id=40100867">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p>For years, some of the world’s sharpest minds have been quietly turning your life into a series of games. Not merely to amuse you, but because they realized that the easiest way to make you do what they want is to make it fun. To escape their control, you must understand the creeping phenomenon of gamification, and how it makes you act against your own interests.</p><p>This is a story that encompasses a couple who replaced their real baby with a fake one, a statistician whose obsessions cost the US the Vietnam War, the apparent absence of extraterrestrial life, and the biggest FBI investigation of the 20th century. But it begins with a mild-mannered psychologist who studied pigeons at Harvard in the Thirties.</p><p>B. F. Skinner believed environment determines behavior, and a person could therefore be controlled simply by controlling their environment. He began testing this theory, known as behaviorism, on pigeons. For his experiments, he developed the “Skinner box”, a birdcage with a food dispenser controlled by a button.</p><p>Skinner’s goal was to make the pigeons peck the button as many times as possible. From his experiments, he made three discoveries. First, the pigeons pecked most when doing so yielded immediate, rather than delayed, rewards. Second, the pigeons pecked most when it rewarded them randomly, rather than every time. Skinner’s third discovery occurred when he noticed the pigeons continued to peck the button long after the food dispenser was empty, provided they could hear it click. He realized the pigeons had become conditioned to associate the click with the food, and now valued the click as a reward in itself.</p><p>This led him to propose two kinds of reward: primary and conditioned reinforcers. A primary reinforcer is something we’re born to desire. A conditioned reinforcer is something we learn to desire, due to its association with a primary reinforcer. Skinner found that conditioned reinforcers were generally more effective in shaping behavior, because while our biological need for the primary reinforcer is easily satiable, our abstract desire for the conditioned reinforcer isn’t. The pigeons would stop seeking food once their bellies were full, but they’d take far longer to get tired of hearing the food dispenser click.</p><p><span>Skinner’s three key insights — immediate rewards work better than delayed, unpredictable rewards work better than fixed, and conditioned rewards work better than primary — were found to also apply to humans, and in the 20</span><sup>th</sup><span> Century would be used by businesses to shape consumer behavior. From Frequent Flyer loyalty points to mystery toys in McDonalds Happy Meals, purchases were turned into games, spurring consumers to purchase more.</span></p><p>Some people began to consider whether games could be used to make people do other things. In the Seventies, the American management consultant Charles Coonradt wondered why people work harder at games they pay to play than at work they’re paid to do. Like Skinner, Coonradt saw that a defining feature of compelling games was immediate rewards. Most of the feedback loops in employment — from salary payments to annual performance appraisals — were torturously long. So Coonradt proposed shortening them by introducing daily targets, points systems, and leaderboards. These conditioned reinforcers would transform work from a series of monthly slogs into daily status games, in which employees competed to fulfil the company’s goals.</p><p>In the 21st century, advances in technology made it easy to add game mechanics to almost any activity, and a new term — “gamification” — became a buzzword in Silicon Valley. By 2008, business consultants were giving presentations about leveraging fun to shape behavior, while futurists gave TED Talks speculating on the social implications of a gamified world. Underpinning every speech was a single, momentous question: if gamification could make people buy more stuff and work more hours, what else could it be used to make people do?</p><p><span>The tone was generally utopian, because back then gamification seemed to be mostly a force for good. In 2007, for instance, the online word quiz FreeRice gamified famine relief: for every correct answer, 10 grains of rice were given to the UN World Food Programme. Within six months it had already given away over </span><a href="https://news.un.org/en/story/2008/03/251732" rel="">20 billion</a><span> grains of rice. Meanwhile, the SaaS company, Opower, had gamified going green. It turned eco-friendliness into a contest, showing each person how much energy they were using compared with their neighbors, and displaying a leaderboard of the top 10 least wasteful. The app has since saved </span><a href="https://www.cnbc.com/2022/07/14/how-opower-sold-to-oracle-has-helped-save-3-billion-in-energy-bills.html" rel="">over $3 billion</a><span> worth of energy. And then there was Foldit, a game developed by University of Washington biochemists who’d struggled for 15 years to discern the structure of an Aids virus protein. They reasoned that, if they turned the search into a game, someone might do what they couldn’t. It took gamers just </span><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3705907/#SD1" rel="">10 days</a><span>.</span></p><p><span>Even established corporations saw gamification’s potential. In 2008, Volkswagen debuted a campaign called “The Fun Theory”, based on the idea that “fun is the easiest way to change people’s behavior for the better”. Piano stairs were installed at a Stockholm rail station to encourage people to use them instead of the escalator, leading to a </span><a href="https://www.researchgate.net/publication/262233618_Social_Stairs_Taking_the_Piano_Staircase_towards_Long-Term_Behavioral_Change" rel="">66% increase</a><span> in stair use. Volkswagen also tried to gamify gamification itself, creating a contest for good game ideas. The winning idea was a “speedcam lottery”, where people who kept to the speed limit would be entered into a prize draw, funded by speeding fines.</span></p><p>It all seemed so simple: if we could only create the right games, we could make humanity fitter, greener, kinder, smarter. We could repopulate forests and even cure cancers simply by making it fun.</p><p>Unfortunately, that didn’t happen. Instead, gamification took a less wholesome route.</p><p>We humans are harder to manipulate than pigeons, but we can be manipulated in many more ways, because we have a wider spectrum of needs. Pigeons don’t care much about respect, but for us it’s a primary reinforcer, to such an extent that we can be made to desire arbitrary sounds that become associated with it, like praise and applause.</p><p><span>Respect is so important to humans that it’s a key reason we evolved to play games. Will Storr, in his book </span><em>The Status Game</em><span>, charted the rise of game-playing in different cultures, and found that games have historically functioned to organize societies into hierarchies of competence, with score acting as a conditioned reinforcer of status. In other words, all games descend from status games. The association between score and status has grown so strong in our minds that, like pigeons pecking the button long after the food dispenser has stopped dispensing, we’ll chase scores long after everyone else has stopped watching.</span></p><p>And so, when Facebook added “likes” in 2009, they quickly became a proxy for status, and a score to compete for. People now had a social stake in posting content. Hitting “send” became like activating a slot machine, initiating an excitingly uncertain outcome; the post might go completely unnoticed, or it might hit the jackpot and go viral, awarding the coveted prizes of respect and fame.</p><p>Other social media platforms followed, leveraging Skinner’s three laws to maximize button-pecking. They offered immediate reinforcement in the form of instant responses, conditioned reinforcement in the form of “likes” and “followers”, and unpredictable reinforcement that varied with each post and each refresh of the page. These features turned social media into the world’s most addictive status game. And thus, just as pigeons were made to chase clicks, so eventually were we.</p><p><span>But this was just the beginning. Many in the managerial class saw the success of social media and wondered how they could use gamification for their own ends. The Chinese Communist Party was among the first to apply the principles of social media to the real world. In several towns and cities, it began trialing social credit schemes that assign citizens a level of “clout” based on how well they behave. In some areas, such as </span><a href="https://foreignpolicy.com/2018/04/03/life-inside-chinas-social-credit-laboratory/" rel="">Rongcheng</a><span> and </span><a href="https://www.telegraph.co.uk/news/social-credit-in-china/" rel="">Hangzhou</a><span>, there are public signs that display leaderboards of the highest scoring citizens. The lowest scoring citizens may be punished with credit blacklists or throttled internet speeds.</span></p><p><span>Meanwhile, in the West, gamification is used to make people obey corporations. Employers like</span><a href="https://www.theinformation.com/articles/amazon-expands-effort-to-gamify-warehouse-work" rel=""> Amazon</a><span> and</span><a href="https://www.fastcompany.com/90260703/the-dark-side-of-gamifying-work" rel=""> Disneyland</a><span> use electronic tracking to keep score of employees’ work rates, often displaying them for all to see. Those who place high on the leaderboards can win prizes like virtual pets; those who fall below the minimum rate may be financially penalized.</span></p><p>Game features are even more pervasive in the digital world. In little over a year, the Chinese shopping app Temu has exploded in popularity thanks to its “play to pay” model: as users browse deals they’re presented with puzzles to solve, roulette wheels to spin, and challenges to complete, which reward them with credit and special offers. Unsurprisingly, users are now spending double the amount of time on Temu than on Amazon.</p><p>Gamification has also transformed dating apps. Zoosk works like a typical role-playing game, where you gradually accumulate “experience points”, which unlock new abilities, such as animated virtual gifts to send to prospective dates. Meanwhile, on Tinder you can purchase various “level-ups” — Boosts, Super Likes, and Rewinds — that increase your chances of winning and compel you to keep playing to get your money’s worth. And if you have no luck on dating apps, there are always AI girlfriends to play with: apps like iGirl and Replika award users points for their commitment, which can be used to “level up” their virtual lovers into a version that is more intimate.</p><p><span>These are only a few examples. Virtually every kind of app, from </span><a href="https://www.hookedtobooks.com/audible-badges/" rel="">audiobook apps</a><span> to </span><a href="https://strivecloud.io/blog/gamification-app-examples-uber/" rel="">taxicab apps</a><span> to </span><a href="https://www.bi.team/blogs/gamified-online-stock-trading-harms-consumers/" rel="">stock trading apps</a><span>, now employs game mechanics like points, badges, levels, streaks, progress bars, and leaderboards. Their ubiquity attests to their success in hooking people.</span></p><p>Gamification once promised to create a better society, but it’s now used mainly to addict people to apps. The gamifiers, like Skinner’s pigeons, prioritized immediate rewards over delayed ones, so they gamified for the next financial quarter and not for the future of civilization.</p><p>So where does this all lead? What is the endgame?</p><p>At the University of Michigan in the mid-twentieth century, there was a zoologist named James V. McConnell. A strong believer in fun, he often presented his academic research alongside satire and poetry, so it was difficult to tell which was which, a habit that made him popular with students but unpopular with his fellow professors.</p><p><span>One of the few things McConnell took seriously was behaviorism. He was transfixed by Skinner’s work on pigeons, and wished to expand the work to humans, with an eye to creating a perfect society. In a 1970 </span><em>Psychology Today</em><span> article he wrote:</span></p><blockquote><p>We should reshape our society so that we all would be trained from birth to want to do what society wants us to do. We have the techniques now to do it. Only by using them can we hope to maximize human potentiality.</p></blockquote><p>In short, he wanted to turn society into a Skinner box.</p><p>Throughout the Seventies, McConnell used Skinnerian techniques to create rehabilitation programs for prisoners and psychiatric patients, some of which were successful. But his most ambitious scheme emerged in the early Eighties, when he witnessed people being captivated by video games like Donkey Kong and Pac Man, and realized their addictive mechanics could be translated to other, more productive activities. He pitched an ambitious project to gamify education to tech companies like Microsoft and IBM, but he was 30 years too early, and they couldn’t yet see its promise. There was, however, one person who’d taken a keen interest in McConnell’s work. His name was Ted Kaczynski.</p><p>Kaczynski was an awkward but gifted student, coldly matter-of-fact in manner, for which he was described by his schoolmates as a “walking brain”. In a school IQ test he’d scored 167 (140 is considered “genius”).</p><p>He’d come to Michigan in 1962 as a postgraduate from Harvard, where he’d studied mathematics and graduated at just 18. But at Harvard, he’d also been subjected to torturous experiments. In a lab not far from where Skinner had once experimented with pigeons, psychologists linked to US intelligence were now experimenting with humans — one of whom was Kaczynski. Under the glare of blinding lights, he was methodically humiliated to see how he reacted. He claimed the experience didn’t affect him, and yet, within just a few years, he’d developed an intense paranoia about psychological conditioning. And so, when Kaczynski learned of McConnell’s proposals to create a utopia through behavior modification, he concluded that the jocular professor was an existential threat to humanity, and that he needed to die.</p><p>It wasn’t a decision Kaczynski had made lightly; he’d developed an entire philosophy to justify it. Influenced by techno-dystopian writers like Aldous Huxley and Jacques Ellul, Kaczynski believed the Industrial Revolution had turned society into a cold process of production and consumption that was gradually crushing everything humans valued most: freedom, happiness, purpose, meaning, and the ecosystem. In his view, everything society now produced—including science and technology—served industry, not humanity, and thus was increasingly being purposed not to enrich our lives but to psychologically condition us so we wouldn’t resist what was being done to us and to the earth.</p><p>In short, where society had once been shaped to accommodate people, now people were being shaped to accommodate society. And this misshaping was destructive because it conflicted with our deepest nature.</p><p>Kaczynski believed modern society made us docile and miserable by depriving us of fulfilling challenges and eroding our sense of purpose. The brain evolved to solve problems, but the problems it had evolved for were now largely solved by technology. Most of us can now obtain all our basic necessities simply by being obedient, like a pigeon pecking a button. Kaczynski argued that such conveniences didn’t make us happy, only aimless. And to stave of this aimlessness, we had to continually set ourselves goals purely to have goals to pursue, which Kaczynski called “surrogate activities”. These included sports, hobbies, or chasing the latest product that ads promised would make us happy.</p><p>For Kaczynski, the result of reorienting our lives to chase artificial goals was that we became increasingly dependent on society to provide us with them. And without our own inherent sense of purpose, we’d inevitably be made to chase goals that were good for the industrial machine but bad for us.</p><p>Kaczynski’s theories eerily prophesize the capture of society by gamification. While he overlooked the benefits of technology, he diligently noted its dangers, recognizing its role in depriving us of purpose and meaning. Today the evidence is everywhere: religion is dying out, Western nations are culturally confused, people are getting married less and having fewer children, and many are losing their jobs to automation, so the traditional pillars of life — God, nation, family, and work — are crumbling, and people are losing their value systems. Amid such uncertainty, games, with their well-defined rules and goals, provide a semblance of order and purpose that may otherwise be lacking in people’s lives. Gamification is thus no accident, but an attempt to plug a widening hole in society.</p><p>Unfortunately, it seems to be only a band-aid. Kaczynski observed that surrogate activities rarely kept people contented for long. There were always more stamps to collect, a better car to buy, a higher score to achieve. He believed artificial goals were too divorced from our actual needs to truly satisfy us, so they merely served to keep us busy enough not to notice our dissatisfaction. Instead of a fulfilled life, a life filled full.</p><p><span>Today, people increasingly live inside their phones, bossed around by notifications, diligently collecting badges and filling progress bars, even though it doesn’t make them happy. On the contrary, </span><a href="https://psycnet.apa.org/record/2022-90266-001" rel="">substantial research</a><span> comprising over a hundred studies finds that prioritizing extrinsic goals over intrinsic goals — in other words doing things to win prizes and achieve high scores rather than for the inherent love of doing them — leads to lower well-being.</span></p><p>Kaczynski seemed to recognize this long before smartphones emerged. He felt that building a life around chasing what was offered on billboards and in magazines wouldn’t make him happy, and would only feed the Machine, so in 1971 he fled society, holing himself up in a log cabin in the Montana wilderness. There he attempted a simple and self-sufficient life, enjoying the small things like the sound of birds singing and the feeling of sunrays on his back.</p><p>But this idyll wouldn’t last. He claims that while hiking across one of his favorite spots — a rocky ridge with a waterfall — he was aghast to find a road had been built through it. As he saw it, industrialization, like some fungus creeping across the world, had followed him even here. Enraged, he decided modernity couldn’t be escaped, and had to be destroyed.</p><p>His emotional instability got the better of him, and in 1978 he began posting homemade bombs to those he accused of betraying humanity. In 1985, a package arrived at McConnell’s home. It was opened by his assistant, Nicklaus Suino. The package only partially exploded, injuring Suino and McConnell, and leaving them both shaken for life.</p><p>They were lucky. Less than a month later, Kaczynski would send another, more carefully prepared bomb to computer store owner, Hugh Scrutton, who’d become Kaczynski’s first murder victim.</p><p>By then, the FBI’s investigation into the bombings had grown into the largest in its history. For over a decade they scoured the country as Kaczynski continued to kill and injure, but much of their time was wasted chasing mirages, for Kaczynski would often scatter his bomb parcels with red herrings such as notes referencing fictitious conspiracies and signed with made-up initials.</p><p>Kaczynski’s actions, though unforgivable, can teach us as much about gamification as his philosophy. His red herrings lured people away from what they actually sought, and, as we shall see, this is the greatest danger of gamification.</p><p>While Kaczynski wanted to demolish industrial society and return humanity to an agrarian life, US defense secretary Robert McNamara wanted the opposite: to use American industrial might to crush the agrarian society of Vietnam.</p><p>McNamara was a statistician who believed what couldn’t be measured didn’t matter. He charted progress in the Vietnam war by body count, because it was simple to measure. It was his way of keeping score. But his focus on what could be easily measured led him to overlook what couldn’t: negative public opinion of the US Army both at home and in Vietnam, which deflated US morale while boosting enemy conscription. In the end, the US was forced to withdraw from the war, despite winning the battle of bodies, because it had lost the battle of hearts and minds.</p><p>Thus, the McNamara fallacy, as it came to be known, refers to our tendency to focus on the most quantifiable measures, even if doing so leads us from our actual goals. Put simply, we try to measure what we value, but end up valuing what we measure.</p><p>And what we measure is rarely what we mean to value. As Skinner showed, the goals of games — points, badges, trophies — are secondary reinforcers that only derive their worth due to their association with something we actually desire. But these associations are often illusory. A click is not the same thing as a food pellet. And points are not the same as progress.</p><p><span>We’re </span><a href="https://www.psychologytoday.com/gb/blog/glue/202107/how-benefit-the-scoreboard-principle" rel="">easily motivated</a><span> by points and scores because they’re easy to track and enjoyable to accrue. As such, scorekeeping is, for many, becoming the new foundation of their lives. “</span><a href="https://www.bbc.com/culture/article/20240326-inside-looksmaxxing-the-extreme-cosmetic-social-media-trend" rel="">Looksmaxxing</a><span>” is a new trend of gamified beauty, where people assign scores to physical appearance and then use any means necessary to maximize their score. And in the online wellness space, there is now a “</span><a href="https://rejuvenationolympics.com/" rel="">Rejuvenation Olympics</a><span>” complete with a leaderboard that ranks people by their “age reversal”. Even sleep has become a game; many people now use apps like Pokemon Sleep that reward them for achieving high “sleep scores”, and some even compete to get the highest “</span><a href="https://www.youtube.com/watch?v=Z7veiyN4LqU" rel="">sleep ranking</a><span>”.</span></p><p>Most such scores are simplifications that don’t tell the whole story. For instance, sleep trackers only measure what’s easy to measure, like movement, which says nothing about crucial facts like time spent in REM sleep. A more accurate measure of how well you slept would be how refreshed you feel in the morning, but since this can’t be quantified, it tends to be ignored.</p><p>Further, if increasing one’s youthfulness score requires a daily 2-hour skincare routine, a diet of 50 pills each morning and night, abstention from many of life’s pleasures, and constant fixation on one’s vital metrics, is it really worth it? Of what value is adding a few years to your life if the cost is a life worth living? The scores we use to chart progress can’t articulate the nuances of reality, and yet we often tie our life goals and even self-worth to such arbitrary numbers.</p><p><span>In the end, even Kaczynski, with his IQ of 167, was led astray by red herring goals. In 1995 he enacted his endgame, demanding the </span><em>New York Times</em><span> and </span><em>Washington Post</em><span> print his anti-technology manifesto to prevent further bloodshed. All along, his goal had been to get the widest possible newspaper coverage, to maximize how many people would see his manifesto, but like McNamara he didn’t account for what couldn’t be quantified, such as </span><em>how</em><span> people would see his manifesto. Skinner’s pigeons had learned to desire the click of the food dispenser because it had been accompanied by food, and Kaczynski’s intended audience learned to hate his arguments because they’d been accompanied by violence. By maximizing audience size at the expense of everything else, Kaczynski gained a massive audience unwilling to give him a fair hearing.</span></p><p>Further, his manifesto contained a peculiar choice of words (“eat your cake and have it”), which was recognized by his brother, David, who alerted the police, leading to Kaczynski’s capture. And so, by fixating on the most obvious metric — the size of his audience — Kaczynski lost the one thing he’d been fighting for all along: freedom.</p><p><span>Kaczynski played the wrong game, and was trapped by it. Today, we all face similar traps. We chase numbers and icons because they’re always available, and the chase is often so immersive that it keeps us from seeing where it leads, which is often far away from what we actually want. This can lead to what the evolutionary psychologist Diana Fleischman </span><a href="https://dianaverse.com/2020/10/30/uncanny-vulvas/" rel="">calls</a><span> “counterfeit fitness”: the constant, momentary “wins” that come with playing digital games give us a false sense of progression and accomplishment, a neurochemical high that feels like victory but is not, and which, if it becomes a habit, risks placating our ambitions to pursue true fulfilment.</span></p><p>It explains why so many young men have lost themselves in video games, and are no longer in employment or relationships. The false signals they’re getting from video game progress, combined with the sexual reward of online porn, are convincing their dopamine pathways that they’re winning in life, even as their minds and futures atrophy.</p><p><span>It’s easy to persuade people into tying their sense of progress to fake or trivial goals. Casinos </span><a href="https://freakonomics.com/2011/09/congratulations-youve-lost-how-slot-machines-disguise-loses-as-wins/" rel="">keep their customers happily losing</a><span> money by distracting them with minor side games they’re likely to win. The small victories convince them they’re winning overall even as they lose the only games that actually matter.</span></p><p><span>This strange quirk of human behavior can even cost lives. In South Korea, a young couple became so addicted to raising a virtual baby that they </span><a href="https://www.theguardian.com/world/2010/mar/05/korean-girl-starved-online-game" rel="">let their real baby starve to death</a><span>. The parents prioritized what they could quantify — levelling up their virtual baby — over that which they couldn’t — the life of their real one.</span></p><p>What makes pathological gameplaying so dangerous is that the more harm it does, the more alluring it becomes. If your baby is dead, why not raise a virtual one? If your life of playing video games has stopped you finding a girlfriend, why not play the AI girlfriend game? Thus, bad games form a feedback loop: they distract us from pursuing the things that will bring us lasting contentment, and without this lasting contentment, we become ever more dependent on false, transient metrics like scores and leaderboards to imbue our lives with meaning.</p><p>All the things a gamified world promises in the short term — pride, purpose, meaning, control, motivation, and happiness — it threatens in the long term. It has the power to seclude people from reality, and to rewrite their value systems so they prioritize the imaginary over the real, and the next moment over the rest of their lives.</p><p>So what’s the solution?</p><p>There are billions of habitable planets in our galaxy, and many of them are far older than our own. Statistically, this would suggest that by now our galaxy would be teeming with signs of advanced alien life. And yet space is silent. This discrepancy, known as the Fermi paradox, has puzzled scientists for almost a century. Ted Kaczynski believed his prophecies offered an answer.</p><p>While serving a life sentence in jail, Kaczynski wrote a little-known sequel to his manifesto, entitled “Anti-Tech Revolution: Why and How”. In it he outlines his belief that all technologically advanced civilizations become trapped in fatal games before they learn to colonize space. This happens because industry is driven by competition, and competition favors short-term wins over long-term sustainability, because players who care about long-term sustainability are significantly disadvantaged compared to players who only care about winning.</p><p>To illustrate his point, Kaczynski describes a thought experiment involving a forested region occupied by several rival kingdoms. The kingdoms that clear the most land for agriculture can support a larger population, affording them a military advantage. Every kingdom must therefore clear as much forest as possible, or face being conquered by its rivals. The resulting deforestation eventually leads to ecological disaster and the collapse of all the kingdoms. Thus, a trait that is advantageous for every kingdom’s short-term survival leads in the long term to every kingdom’s demise.</p><p>Kaczynski was describing a “social trap”, a term coined by a student of Skinner, John Platt, who’d theorized that an entire population behaving like pigeons in a Skinner box, each acting only for the next immediate reward, would eventually overexploit a resource, causing ruin for everyone. What Platt called “social traps”, Kaczynski called “self-propagating systems”, because he viewed them as negative-sum games that took on a life of their own, defeating every player to become the only winner. He believed such games not only drove industrialization but also replaced the sense of purpose and meaning that industrialization destroyed. They were thus inextricable from technological advancement, and, in a society like ours, impossible to stop.</p><p><span>In jail, Kaczynski was forbidden access to the web, and in </span><a href="https://news.yahoo.com/the-unabomber-takes-on-the-internet-201549030.html" rel="">letters</a><span> he struggled to understand what Facebook was. Nevertheless, his warnings could easily have been referring to social media.</span></p><p>On Instagram, the main self-propagating system is a beauty pageant. Young women compete to be as pretty as possible, going to increasingly extreme lengths: makeup, filters, fillers, surgery. The result is that all women begin to feel ugly, online and off.</p><p><span>On TikTok and YouTube, there is another self-propagating system where pranksters compete to outdo each other in outrageousness to avoid being buried by the algorithm. Such extreme brinkmanship frequently leads to arrest or injury, and has even led to the deaths of, among others, </span><a href="https://www.bbc.co.uk/news/technology-55982131" rel="">Timothy Wilks</a><span> and</span><a href="https://www.theguardian.com/us-news/2018/mar/15/woman-jailed-for-killing-boyfriend-in-youtube-stunt-that-went-wrong-monalisa-perez-pedro-ruiz" rel=""> Pedro Ruiz</a><span>.</span></p><p>On X, meanwhile, there is a self-propagating system known as “the culture war”. This game consists of trying to score points (likes and retweets) by attacking the enemy political tribe. Unlike in a regular war, the combatants can’t kill each other, only make each other angrier, so little is ever achieved, except that all players become stressed by constant bickering.&nbsp;And yet they persist in bickering, if only because their opponents do, in an endless state of mutually assured distraction.</p><p>Those are just three examples of social traps that have emerged in our gamified age. But the most worrying social trap is gamification itself.</p><p>Companies that exploit our gameplaying compulsion will have an edge over those who don’t, so every company that wishes to compete must gamify in ever more addictive ways, even though in the long term this harms everyone. As such, gamification is not just a fad; it’s the fate of a digital capitalist society. Anything that can be turned into a game sooner or later will be. And the games won’t just be confined to our phones — “extended reality” eyewear like Meta Quest and Apple Vision, once they become normalized, will make playing even harder to avoid.</p><p><span>Games will be created not just to extract money from people, but also data. The </span><a href="https://www.reuters.com/sports/athletics/athletes-risk-bans-health-death-enhanced-games-wada-2024-02-14/" rel="">2025 Enhanced Games</a><span>, for instance, is a new futuristic version of the Olympics, funded by tech moguls like Peter Thiel, where contestants can exploit anything from cybernetic implants to PEDs to get a competitive advantage. The purpose of the games seems to be transhumanist: to motivate people to discover new ways to augment human abilities, with the eventual goal of turning men into gods.</span></p><p>There is, after all, a vacancy in heaven. When God is dead, and nations are atomized, and family seems burdensome, and machines can beat us at our jobs and even at art, and trust and truth are lost in a roiling sea of AI-generated clickbait — what is left but games?</p><p><span>This isn’t necessarily a bad thing. Games can motivate us to destroy ourselves, but they can also motivate us to better ourselves. In a gamified world, it’s possible to play without getting played, if one only chooses the right games. As the poker-player-turned-podcaster Liv Boeree </span><a href="https://twitter.com/Liv_Boeree/status/1609271228052959233" rel="">said</a><span>: “Intelligence is knowing how to win the game. Wisdom is knowing which game to play…” So how do you decide which games to play? The story of gamification offers five broad rules.</span></p><p>First: choose long-term goals over short-term ones. Short, frequent feedback loops offer regular reinforcement, which helps motivate us. But what is made to motivate us too often addicts us. So consider the long-term outcomes of the games you’re playing: if you did the same thing you did today for the next 10 years, where would you be? Play games the 90-year-old you would be proud of having played. They won’t care how many trophies you have; they will care how many times you saw your parents before they died.</p><p>Second: choose hard games over easy ones. Since the long-term value of games lies in their ability to hone skills and build character, easy games are usually a trap. People with unearned wealth — thieves, heirs and lottery winners — often end up losing it all, because the struggle to obtain a reward teaches us the reward’s worth, and is thus a crucial part of the reward.</p><p>Third: choose positive-sum games over zero-sum or negative-sum ones. Games evolved to confer status, and status is zero-sum — for some to have it, others must lose it. But we no longer have to play such games; we can change the rules so a win for me doesn’t mean a loss for you. Educational games are one example. Wealth creation is another. Positive-sum games —&nbsp;where every player benefits by playing —&nbsp;are a form of competition that brings people together instead of driving them apart.</p><p><span>Fourth: choose atelic games over telic ones. Atelic games are those you play because you enjoy them. Telic games are those you play only to obtain a reward. Chasing rewards like trophies and leaderboard rankings can help drive us to succeed, but a fixation on such rewards can become a source of stress, and can even make leisure activities feel like drudgery, </span><a href="https://thedecisionlab.com/biases/overjustification-effect" rel="">turning games into work</a><span>.</span></p><p>Finally, the fifth rule is to choose immeasurable rewards over measurable ones. Seeing numerical scores increase is satisfying in the short term, but the most valuable things in life — freedom, meaning, love — can’t be quantified.</p><p><span>There are an overwhelming number of games to choose from. If you want to keep fit, try </span><a href="https://zrx.app/" rel="">Zombies Run</a><span>, an app that takes the form of a post-zombie-apocalypse radio broadcast telling you which direction to run to avoid being eaten. If you want to learn general knowledge while helping those in poverty, play the </span><a href="https://freerice.com/" rel="">FreeRice</a><span> quiz. And if you want to form good habits, there’s </span><a href="https://habitshareapp.com/" rel="">Habitshare</a><span>, which lets your friends track your attempts, motivating you more than if you were only accountable to yourself.</span></p><p>But if, among the countless games out there, you can’t find one right for you, then you can just create your own. Fun is not the pursuit of happiness, but the happiness of pursuit, and literally anything can be pursued. By now there’s a way to keep any kind of score and play any kind of game.</p><p><span>Kaczynski’s game is over; he committed suicide last summer, still adamant humanity was doomed. His fearful legacy has since passed to his disciples, like Liverpool man Jacob Graham, who was </span><a href="https://news.sky.com/story/jacob-graham-left-wing-anarchist-jailed-for-13-years-over-terror-offences-after-declaring-he-wanted-to-kill-at-least-50-people-13097584" rel="">recently jailed</a><span> for terrorism after trying to emulate his idol. Graham may have thought he was saving the world, but, with all his talk of maximizing kill counts, he too was just playing a bad game.</span></p><p>In the end, Kaczynski and his followers made the same mistake as Skinner: they viewed us as mere puppets of our environment, devoid of agency and the ability to adapt. They needn’t have feared the world becoming a Skinner box, because, among all the papers written about that troublesome contraption, one fact is always omitted: Skinner’s pigeons only kept pecking the button because they were in a cage, with nothing else to do. But you are still free. Even in a world where everything is a game, you don’t have to play by other people’s rules; you have a wide open world to create your own.</p><p>Your move.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Bringing Exchange Support to Thunderbird (260 pts)]]></title>
            <link>https://blog.thunderbird.net/2024/04/adventures-in-rust-bringing-exchange-support-to-thunderbird/</link>
            <guid>40100672</guid>
            <pubDate>Sat, 20 Apr 2024 20:19:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.thunderbird.net/2024/04/adventures-in-rust-bringing-exchange-support-to-thunderbird/">https://blog.thunderbird.net/2024/04/adventures-in-rust-bringing-exchange-support-to-thunderbird/</a>, See on <a href="https://news.ycombinator.com/item?id=40100672">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
								<img src="https://blog.thunderbird.net/files/2024/04/Tb-rust1.png" alt="featured post title image">
						<section>
												

				
<p>Microsoft Exchange is a popular choice of email service for corporations and educational institutions, and so it’s no surprise that there’s demand among Thunderbird users to support Exchange. Until recently, this functionality was only available through an add-on. But, in the next ESR (Extended Support) release of Thunderbird in July 2024, we expect to provide this support natively within Thunderbird. Because of the size of this undertaking, the first roll-out of the Exchange support will <a href="https://youtu.be/7jNV1J2pdPc">initially cover only email</a>, with calendar and address book support coming at a later date.</p>



<p>This article will go into technical detail on how we are implementing support for the Microsoft Exchange Web Services mail protocol, and some idea of where we’re going next with the knowledge gained from this adventure.</p>



<p><em>Before we dive in, just a quick note that <strong>Brendan Abolivier, Ikey Doherty</strong>, and <strong>Sean Burke</strong> are the developers behind this effort, and are the authors of this post.</em></p>



<figure></figure>



<h2>Historical context</h2>



<p>Thunderbird is a long-lived project, which means there’s lots of old code. The current architecture for supporting mail protocols predates Thunderbird itself, having been developed more than 20 years ago as part of Netscape Communicator. There was also no paid maintainership from about 2012 — when Mozilla divested and&nbsp; transferred ownership of Thunderbird to its community — until 2017, when Thunderbird rejoined the Mozilla Foundation. That means years of ad hoc changes without a larger architectural vision and a lot of decaying C++ code that was not using modern standards.</p>



<p>Furthermore, in the entire 20 year lifetime of the Thunderbird project, no one has added support for a new mail protocol before. As such, no one has updated the architecture as mail protocols change and adapt to modern usage patterns, and a great deal of institutional knowledge has been lost. Implementing this much-needed feature is the first organization-led effort to actually understand and address limitations of Thunderbird’s architecture in an incremental fashion.</p>



<h2>Why we chose Rust</h2>



<p>Thunderbird is a large project maintained by a small team, so choosing a language for new work cannot be taken lightly. We need powerful tools to develop complex features relatively quickly, but we absolutely must balance this with long-term maintainability. Selecting Rust as the language for our new protocol support brings some important benefits:</p>



<ol>
<li><strong>Memory safety.</strong> Thunderbird takes input from anyone who sends an email, so we need to be diligent about keeping security bugs out.</li>



<li><strong>Performance.</strong> Rust runs as native code with all of the associated performance benefits.</li>



<li><strong>Modularity and Ecosystem.</strong> The built-in modularity of Rust gives us access to a large ecosystem where there are already a lot of people doing things related to email which we can benefit from.</li>
</ol>



<p>The above are all on the standard list of benefits when discussing Rust. However, there are some additional considerations for Thunderbird:</p>



<ol>
<li><strong>Firefox.</strong> Thunderbird is built on top of Firefox code and we use a shared CI infrastructure with Firefox which already enables Rust. Additionally, Firefox provides a language interop layer called XPCOM (Cross-Platform Component Object Model), which has Rust support and allows us to call between Rust, C++, and JavaScript.</li>



<li><strong>Powerful tools.</strong> Rust gives us a large toolbox for building APIs which are difficult to misuse by pushing logical errors into the domain of the compiler. We can easily avoid circular references or provide functions which simply cannot be called with values which don’t make sense, letting us have a high degree of confidence in features with a large scope. Rust also provides first-class tooling for documentation, which is critically important on a small team.</li>



<li><strong>Addressing architectural technical debt.</strong> Introducing a new language gives us a chance to reconsider some aging architectures while benefiting from a growing language community.</li>



<li><strong>Platform support and portability.</strong> Rust supports a broad set of host platforms. By building modular crates, we can reuse our work in other projects, such as Thunderbird for Android/K-9 Mail.</li>
</ol>



<h2>Some mishaps along the way</h2>



<p>Of course, the endeavor to introduce our first Rust component in Thunderbird is not without its challenges, mostly related to the size of the Thunderbird codebase. For example, there is a lot of existing code with idiosyncratic asynchronous patterns that don’t integrate nicely with idiomatic Rust. There are also lots of features and capabilities in the Firefox and Thunderbird codebase that don’t have any existing Rust bindings.</p>



<h3>The first roadblock: the build system</h3>



<p>Our first hurdle came with getting any Rust code to run in Thunderbird at all. There are two things you need to know to understand why:</p>



<p>First, since the Firefox code is a dependency of Thunderbird, you might expect that we pull in their code as a subtree of our own, or some similar mechanism. However, for historical reasons, it’s the other way around: building Thunderbird requires fetching Firefox’s code, fetching Thunderbird’s code as a subtree of Firefox’s, and using a build configuration file to point into that subtree.</p>



<p>Second, because Firefox’s entrypoint is written in C++ and Rust calls happen via an interoperability layer, there is no single point of entry for Rust. In order to create a tree-wide dependency graph for Cargo and avoid duplicate builds or version/feature conflicts, Firefox introduced a hack to generate a single Cargo workspace which aggregates all the individual crates in the tree.</p>



<p>In isolation, neither of these is a problem in itself. However, in order to build Rust into Thunderbird, we needed to define our own Cargo workspace which lives in our tree, and Cargo does not allow nesting workspaces. To solve this issue, we had to define our own workspace and add configuration to the upstream build tool, <code>mach</code>, to build from this workspace instead of Firefox’s. We then use a newly-added <code>mach</code> subcommand to sync our dependencies and lockfile with upstream and to vendor the resulting superset.</p>



<h3>XPCOM</h3>



<p>While the availability of language interop through XPCOM is important for integrating our frontend and backend, the developer experience has presented some challenges. Because XPCOM was originally designed with C++ in mind, implementing or consuming an XPCOM interface requires a lot of boilerplate and prevents us from taking full advantage of tools like rust-analyzer. Over time, Firefox has significantly reduced its reliance on XPCOM, making a clunky Rust+XPCOM experience a relatively minor consideration. However, as part of the previously-discussed maintenance gap, Thunderbird never undertook a similar project, and supporting a new mail protocol requires implementing hundreds of functions defined in XPCOM.</p>



<p>Existing protocol implementations ease this burden by inheriting C++ classes which provide the basis for most of the shared behavior. Since we can’t do this directly, we are instead implementing our protocol-specific logic in Rust and communicating with a bridge class in C++ which combines our Rust implementations (an internal crate called <code>ews_xpcom</code>) with the existing code for shared behavior, with as small an interface between the two as we can manage.</p>



<p>Please visit our&nbsp;<a href="https://source-docs.thunderbird.net/en/latest/rust/index.html" target="_blank" rel="noreferrer noopener">documentation</a>&nbsp;to learn more about how to create Rust components in Thunderbird.</p>



<h2>Implementing Exchange support with Rust</h2>



<p>Despite the technical hiccups experienced along the way, we were able to clear the hurdles, use, and build Rust within Thunderbird. Now we can talk about how we’re using it and the tools we’re building. Remember all the way back to the beginning of this blog post, where we stated that our goal is to support Microsoft’s Exchange Web Services (EWS) API. EWS communicates over HTTP with request and response bodies in XML.</p>



<h2>Sending HTTP requests</h2>



<p>Firefox already includes a full-featured HTTP stack via its <code>necko</code> networking component. However, <code>necko</code> is written in C++ and exposed over XPCOM, which as previously stated does not make for nice, idiomatic Rust. Simply sending a GET request requires a great deal of boilerplate, including nasty-looking unsafe blocks where we call into XPCOM. (XPCOM manages the lifetime of pointers and their referents, ensuring memory safety, but the Rust compiler doesn’t know this.) Additionally, the interfaces we need are callback-based. For making HTTP requests to be simple for developers, we need to do two things:</p>



<ol>
<li><strong>Support native Rust async/await syntax.</strong> For this, we added a new Thunderbird-internal crate, <code>xpcom_async</code>. This is a low-level crate which translates asynchronous operations in XPCOM into Rust’s native async syntax by defining callbacks to buffer incoming data and expose it by implementing Rust’s <code>Future</code> trait so that it can be awaited by consumers. (If you’re not familiar with the <code>Future</code> concept in Rust, it is similar to a JS <code>Promise</code> or a Python coroutine.)</li>



<li><strong>Provide an idiomatic HTTP API.</strong> Now that we had native <code>async</code>/<code>await</code> support, we created another internal crate (<code>moz_http</code>) which provides an HTTP client inspired by <code>reqwest</code>. This crate handles creating all of the necessary XPCOM objects and providing Rustic error handling (much nicer than the standard XPCOM error handling).</li>
</ol>



<h2>Handling XML requests and responses</h2>



<p>The hardest task in working with EWS is translating between our code’s own data structures and the XML expected/provided by EWS. Existing crates for serializing/deserializing XML didn’t meet our needs. <code>serde</code>’s data model doesn’t align well with XML, making distinguishing XML attributes and elements difficult. EWS is also sensitive to XML namespaces, which are completely foreign to <code>serde</code>. Various <code>serde</code>-inspired crates designed for XML exist, but these require explicit annotation of how to serialize every field. EWS defines hundreds of types which can have dozens of fields, making that amount of boilerplate untenable.</p>



<p>Ultimately, we found that existing <code>serde</code>-based implementations worked fine for deserializing XML into Rust, but we were unable to find a satisfactory tool for serialization. To that end, we introduced another new crate, <code>xml_struct</code>. This crate defines traits governing serialization behavior and uses Rust’s procedural derive macros to automatically generate implementations of these traits for Rust data structures. It is built on top of the existing <code>quick_xml</code> crate and designed to create a low-boilerplate, intuitive mapping between XML and Rust.&nbsp; While it is in the early stages of development, it does not make use of any Thunderbird/Firefox internals and is <a href="https://github.com/thunderbird/xml-struct-rs">available on GitHub</a>.</p>



<p>We have also introduced one more new crate, <code>ews</code>, which defines types for working with EWS and an API for XML serialization/deserialization, based on <code>xml_struct</code> and <code>serde</code>. Like <code>xml_struct</code>, it is in the early stages of development, but is <a href="https://github.com/thunderbird/ews-rs">available on GitHub</a>.</p>



<h2>Overall flow chart</h2>



<p>Below, you can find a handy flow chart to help understand the logical flow for making an Exchange request and handling the response.&nbsp;</p>



<figure><a href="https://blog.thunderbird.net/files/2024/04/pasted-image-.png"><img decoding="async" fetchpriority="high" width="1600" height="716" src="https://blog.thunderbird.net/files/2024/04/pasted-image-.png" alt="A bird's eye view of the flow" title="A bird’s eye view of the flow" srcset="https://blog.thunderbird.net/files/2024/04/pasted-image-.png 1600w, https://blog.thunderbird.net/files/2024/04/pasted-image--252x113.png 252w, https://blog.thunderbird.net/files/2024/04/pasted-image--600x269.png 600w, https://blog.thunderbird.net/files/2024/04/pasted-image--768x344.png 768w, https://blog.thunderbird.net/files/2024/04/pasted-image--1536x687.png 1536w" sizes="(max-width: 1600px) 100vw, 1600px"></a></figure>



<p>Fig 1. A bird’s eye view of the flow</p>



<h2>What’s next?</h2>



<h2>Testing all the things</h2>



<p>Before landing our next major features, we are taking some time to build out our automated tests. In addition to unit tests, we just landed a mock EWS server for integration testing. The current focus on testing is already paying dividends, having exposed a couple of crashes and some double-sync issues which have since been rectified. Going forward, new features can now be easily tested and verified.</p>



<h2>Improving error handling</h2>



<p>While we are working on testing, we are also busy improving the story around error handling. EWS’s error behavior is often poorly documented, and errors can occur at multiple levels (e.g., a request may fail as a whole due to throttling or incorrect structure, or parts of a request may succeed while other parts fail due to incorrect IDs). Some errors we can handle at the protocol level, while others may require user intervention or may be intractable. In taking the time now to improve error handling, we can provide a more polished implementation and set ourselves up for easier long-term maintenance.</p>



<h2>Expanding support</h2>



<p>We are working on expanding protocol support for EWS (via <code>ews</code> and the internal <code>ews_xpcom</code> crate) and hooking it into the Thunderbird UI. Earlier this month, we landed a series of patches which allow adding an EWS account to Thunderbird, syncing the account’s folder hierarchy from the remote server, and displaying those folders in the UI. (At present, this alpha-state functionality is gated behind a build flag and a preference.) Next up, we’ll work on fetching message lists from the remote server as well as generalizing outgoing mail support in Thunderbird.</p>



<h2>Documentation</h2>



<p>Of course, all of our work on maintainability is for naught if no one understands what the code does. To that end, we’re producing documentation on how all of the bits we have talked about here come together, as well as describing the existing architecture of mail protocols in Thunderbird and thoughts on future improvements, so that once the work of supporting EWS is done, we can continue building and improving on the Thunderbird you know and love.</p>
				

			</section>
			

			
			</div></div>]]></description>
        </item>
    </channel>
</rss>