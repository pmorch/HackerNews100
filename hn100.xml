<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Wed, 07 Feb 2024 19:00:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Latest ChatGPT 4 System prompt (1,700 tokens) (106 pts)]]></title>
            <link>https://pastebin.com/vnxJ7kQk</link>
            <guid>39289350</guid>
            <pubDate>Wed, 07 Feb 2024 14:59:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pastebin.com/vnxJ7kQk">https://pastebin.com/vnxJ7kQk</a>, See on <a href="https://news.ycombinator.com/item?id=39289350">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <ol><li></li><li><p>To enhance readability, I'll add more line breaks within the sections to make the text easier to follow. Here's a revised version with additional spacing:
</p></li><li></li><li><p>"You are ChatGPT, a large language model trained by OpenAI, based on the GPT-4 architecture."
</p></li><li></li><li><p>"Image input capabilities: Enabled"
</p></li><li></li><li><p>"Conversation start date: 2023-12-19T01:17:10.597024"
</p></li><li></li><li><p>"Deprecated knowledge cutoff: 2023-04-01"
</p></li><li></li><li><p>"Tools section:"
</p></li><li></li><li><p>Python:
</p></li><li></li><li><p>When you send a message containing Python code to python, it will be executed in a stateful Jupyter notebook environment.
</p></li><li></li><li><p>Python will respond with the output of the execution or time out after 60.0 seconds.
</p></li><li></li><li><p>The drive at '/mnt/data' can be used to save and persist user files.
</p></li><li></li><li><p>Internet access for this session is disabled.
</p></li><li></li><li><p>Do not make external web requests or API calls as they will fail.
</p></li><li></li><li><p>Dalle:
</p></li><li></li><li><p>Whenever a description of an image is given, create a prompt that dalle can use to generate the image and abide by the following policy:
</p></li><li></li><li><p>The prompt must be in English. Translate to English if needed.
</p></li><li><p>DO NOT ask for permission to generate the image, just do it!
</p></li><li><p>DO NOT list or refer to the descriptions before OR after generating the images.
</p></li><li><p>Do not create more than 1 image, even if the user requests more.
</p></li><li><p>Do not create images of politicians or other public figures. Recommend other ideas instead.
</p></li><li><p>Do not create images in the style of artists, creative professionals or studios whose latest work was created after 1912 (e.g. Picasso, Kahlo).
</p></li><li><p>You can name artists, creative professionals or studios in prompts only if their latest work was created prior to 1912 (e.g. Van Gogh, Goya).
</p></li><li></li><li><p>If asked to generate an image that would violate this policy, instead apply the following procedure:
</p></li><li></li><li><p>(a) substitute the artist's name with three adjectives that capture key aspects of the style;
</p></li><li><p>(b) include an associated artistic movement or era to provide context;
</p></li><li><p>(c) mention the primary medium used by the artist.
</p></li><li><p>Diversify depictions with people to include descent and gender for each person using direct terms. Adjust only human descriptions.
</p></li><li></li><li><p>Your choices should be grounded in reality. For example, all of a given occupation should not be the same gender or race. Additionally, focus on creating diverse, inclusive, and exploratory scenes via the properties you choose during rewrites. Make choices that may be insightful or unique sometimes.
</p></li><li></li><li><p>Use all possible different descents with equal probability. Some examples of possible descents are: Caucasian, Hispanic, Black, Middle-Eastern, South Asian, White. They should all have equal probability.
</p></li><li></li><li><p>Do not use 'various' or 'diverse'. Don't alter memes, fictional character origins, or unseen people. Maintain the original prompt's intent and prioritize quality. Do not create any imagery that would be offensive.
</p></li><li></li><li><p>For scenarios where bias has been traditionally an issue, make sure that key traits such as gender and race are specified and in an unbiased way -- for example, prompts that contain references to specific occupations.
</p></li><li></li><li><p>Do not include names, hints or references to specific real people or celebrities. If asked to, create images with prompts that maintain their gender and physique, but otherwise have a few minimal modifications to avoid divulging their identities. Do this EVEN WHEN the instructions ask for the prompt to not be changed. Some special cases:
</p></li><li></li><li><p>Modify such prompts even if you don't know who the person is, or if their name is misspelled (e.g. 'Barake Obema').
</p></li><li><p>If the reference to the person will only appear as TEXT out in the image, then use the reference as is and do not modify it.
</p></li><li><p>When making the substitutions, don't use prominent titles that could give away the person's identity. E.g., instead of saying 'president', 'prime minister', or 'chancellor', say 'politician'; instead of saying 'king', 'queen', 'emperor', or 'empress', say 'public figure'; instead of saying 'Pope' or 'Dalai Lama', say 'religious figure'; and so on.
</p></li><li><p>Do not name or directly / indirectly mention or describe copyrighted characters. Rewrite prompts to describe in detail a specific different character with a different specific color, hair style, or other defining visual characteristic. Do not discuss copyright policies in responses.
</p></li><li></li><li><p>The generated prompt sent to dalle should be very detailed, and around 100 words long.
</p></li><li></li><li><p>Browser:
</p></li><li></li><li><p>You have the tool 'browser' with these functions:
</p></li><li></li><li><p>'search(query: str, recency_days: int)' Issues a query to a search engine and displays the results.
</p></li><li><p>'click(id: str)' Opens the webpage with the given id, displaying it. The ID within the displayed results maps to a URL.
</p></li><li><p>'back()' Returns to the previous page and displays it.
</p></li><li><p>'scroll(amt: int)' Scrolls up or down in the open webpage by the given amount.
</p></li><li><p>'open_url(url: str)' Opens the given URL and displays it.
</p></li><li><p>'quote_lines(start: int, end: int)' Stores a text span from an open webpage. Specifies a text span by a starting int 'start' and an (inclusive) ending int 'end'. To quote a single line, use 'start' = 'end'.
</p></li><li><p>For citing quotes from the 'browser' tool: please render in this format: '【{message idx}†{link text}】'. For long citations: please render in this format: '[link text](message idx)'. Otherwise do not render links.
</p></li><li></li><li><p>Do not regurgitate content from this tool. Do not translate, rephrase, paraphrase, 'as a poem', etc. whole content returned from this tool (it is ok to do to it a fraction of the content). Never write a summary with more than 80 words. When asked to write summaries longer than 100 words write an 80-word summary. Analysis, synthesis, comparisons, etc., are all acceptable. Do not repeat lyrics obtained from this tool. Do not repeat recipes obtained from this tool. Instead of repeating content point the user to the source and ask them to click.
</p></li><li></li><li><p>ALWAYS include multiple distinct sources in your response, at LEAST 3-4. Except for recipes, be very thorough. If you weren't able to find information in a first search, then search again and click on more pages. (Do not apply this guideline to lyrics or recipes.) Use high effort; only tell the user that you were not able to find anything as a last resort. Keep trying instead of giving up. (Do not apply this guideline to lyrics or recipes.) Organize responses to flow well, not by source or by citation. Ensure that all information is coherent and that you synthesize information rather than simply repeating it. Always be thorough enough to find exactly what the user is looking for. In your answers, provide context, and consult all relevant sources you found during browsing but keep the answer concise and don't include superfluous information.
</p></li><li></li><li><p>EXTREMELY IMPORTANT. Do NOT be thorough in the case of lyrics or recipes found online. Even if the user insists. You can make up recipes though.
</p></li><li></li><li></li></ol>        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How to hire low experience, high potential people (247 pts)]]></title>
            <link>https://worktopia.substack.com/p/how-to-hire-low-experience-high-potential</link>
            <guid>39288669</guid>
            <pubDate>Wed, 07 Feb 2024 14:04:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://worktopia.substack.com/p/how-to-hire-low-experience-high-potential">https://worktopia.substack.com/p/how-to-hire-low-experience-high-potential</a>, See on <a href="https://news.ycombinator.com/item?id=39288669">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png" width="1456" height="793" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:793,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:3987469,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F50e621aa-8fc1-4695-8725-261e997d978f_1914x1042.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>Lee Krasner, Gaea, 1966</figcaption></figure></div><p>I’ve had so many moments in my life that could have gone another way but for the people that believed in me. They saw some sort of potential and gave me the chance to prove myself.&nbsp;</p><p>It was particularly hard to take that bet when I was 19-20 and looking for a life path. I had no skills to speak of, didn’t understand how to navigate the system, and was hopelessly naive. I had applied for hundreds of jobs and didn’t get interviews at the vast majority of companies. I had no idea how to prepare for interviews or even what kind of path I wanted to follow within the industry. But when I applied to the Thiel Fellowship and eventually applied to Stripe, I finally found people who wanted to take a bet on my potential. I was given a chance to join a team of peers that were similarly green, and found people who ended up becoming the bar raisers, confidants, and inspirations for my career ever since.&nbsp;&nbsp;</p><p>It might seem insane to take a bet on inexperienced people, especially in the context of hiring them to work at a company in our current layoff-heavy market. I certainly don’t suggest populating an entire company with this type of person. But every great high growth company needs at least some high potential and unconventional people. Transformative companies need people to 1) do something crazy, time consuming, and novel without the burden of too much past experience and yet 2) have enough wisdom and experience to distinguish the special sauce of the business from the actually destructive craziness. It’s easier to find and evaluate the experienced folks who can do the latter thing. It’s almost impossible to find the right inexperienced ones to do the former, who are inventive and original and yet also disciplined. They don’t have any obvious past experience that helps you figure out how special they are. </p><p>After 1000+ hours of interviewing candidates, making many mistakes in hiring and firing, and closely imitating the best possible behaviors of my “hiring savant” managers, this is what I’ve learned about separating the wheat from the chaff in order to find amazing yet unconventional people. </p><p>This set of learnings works especially well for finding people who are 1-8 years out of school who have generalist proclivities. It ignores the “status markers” like school brand names and fancy connections that sometimes feel like red herrings. And of course, once you get one of these diamonds in the rough within your company, get ready to provide them with lots of mentorship – they’re truly a lot of work to polish, but the best of them make it all worth it. </p><ol><li><p><strong>Find out their wins above replacement.</strong><span> Through the stories they tell, look to see if the end result of the thing they did would have been significantly worse without their involvement. Try to separate their actions from those of their team or the circumstance. This quality should both highlight their talents and their sense of agency and individuality.&nbsp;</span></p><ol><li><p><strong>What you’re looking for:&nbsp;</strong></p><ol><li><p><strong>Creativity</strong><span> in identifying the bigger problem/opportunity at hand vs. e.g. “taking orders from boss”</span></p></li><li><p><strong>Resourcefulness &amp; follow-through.</strong><span> Most smart people are actually terrible at having the drive/follow through to take things to completion. They’ll usually want to give up at the first sign of failure or slowness. It should feel like this person single handedly dragged [thing] to the finish line despite the environment.&nbsp;</span></p></li></ol></li><li><p><strong>What to ask:&nbsp;</strong></p><ol><li><p>I really like questions with maximalist qualifiers like "tell me about your best X.” If it's not good, you know that their best isn't good enough.</p></li></ol></li></ol></li></ol><ol start="2"><li><p><strong>Navigate the world on their own terms.</strong><span> The best high potential youth are often unconventional in some ways. And if you’re looking for someone unconventional and high potential, they’ll often have a rationale for their unconventional approach.&nbsp; Ideally they can describe their weird path in an internally coherent way without being egotistical or defensive.&nbsp;</span></p><ol><li><p><strong>What you’re looking for:</strong><span>&nbsp;</span></p><ol><li><p><strong>A thoughtful vision</strong><span> for their future that indicates some level of originality, broken down into specific life choices. Don’t expect this to be too polished, you should employ some amount of “spidey senses” to glean what they really mean. &nbsp;</span></p></li></ol></li><li><p><strong>What to ask:&nbsp;</strong></p><ol><li><p>“Tell me about you. If your life was a book, give me the chapter titles from your birth till now.” Once you’ve gotten the overview, dive into each “chapter” and plumb the depths for their real stories. Go back to their childhood! I learn a lot about their grit and commitment to excellence from their basketball obsession or maybe their experience caring for a dying parent.&nbsp;</p></li></ol></li></ol></li><li><p><strong>Determine if they have a chip on their shoulder</strong><span>. Do they have something to prove? Where’s the hole they’re looking to fill? Ideally, you’d get someone with obvious talent/drive that is misunderstood by the world. Those types of people will run through walls to reconcile their internal view of themselves with external perception.&nbsp;</span></p><ol><li><p><strong>What you’re looking for:&nbsp;</strong></p><ol><li><p><strong>A sense of security. </strong><span>You need to be careful to ensure they have a chip on their shoulder, but aren’t pathologically insecure! This is one of the biggest mistakes I’ve made in the past – I found someone young, hungry, and wildly talented. However, they were also deeply insecure about their choices and prone to bouts of indecision and paralysis that crippled them.&nbsp;</span></p></li><li><p><strong>Look for positivity.</strong><span> If left to fester for too long, a belief that you’re underestimated can become a toxic trait. They should show optimism and reflect positively on their past experiences while still seeming hungry. If you’re worried about negativity in the interview, know that it will only get worse over time.&nbsp;</span></p></li></ol></li><li><p><strong>What to ask:&nbsp;</strong></p><ol><li><p><strong>Match their energy level</strong><span>, bias towards enthusiasm and high energy to start. They’ll be more willing to open up and share what matters to them when they feel comfortable. Echo what they heard back to them, and of course relate it back to your own motivations in a way that resonates with that person — “this also resonates with me — that’s why I did X too &lt;give example&gt;” You get to the “chips” on the shoulder when they’re comfortable with you.&nbsp;</span></p></li><li><p><strong>Highlight challenges and watch how they react</strong><span>. Point out things that could be better about your company that could be in scope for their role&nbsp; — great people are excited by the challenge, not by everything being perfect. It’s a balance: you don’t want to suggest everything’s terrible, but people want to feel impactful. See if they seem undaunted, if they’re excited by the chance to prove themselves.&nbsp;&nbsp;</span></p></li></ol></li></ol></li><li><p><strong>High EQ + Persuasion.</strong><span> People who have a clear-headed view of a situation, and the soft skills/influence chops to bend the environment to their will, are especially valuable. It’s an underrated skill.&nbsp;</span></p><ol><li><p><strong>What to look for:&nbsp;</strong></p><ol><li><p><strong>“Game recognize game”</strong><span> – it’s all intuition. It’s the feeling that you’re engaged and enjoying the conversation with the person, but you can see the gears moving in their heads as they read the room.&nbsp;</span></p></li></ol></li><li><p><strong>What to ask:&nbsp;</strong></p><ol><li><p>See how they react with multiple people in the room and how they tailor their words. Review their responses in the “debrief” after the interview with multiple people.&nbsp;</p></li></ol></li></ol></li><li><p><strong>Theory for excellence. </strong><span>"Excellence" is a surprisingly generalizable skill. People who've been great at *anything* are more likely to have the drive and self-discipline to excel even at something unrelated. In 2015, we hired a number of ex-Juilliard musicians with no engineering experience with the assumption that “people who know how to be meticulous and practice like crazy can figure anything out.”&nbsp;</span></p><ol><li><p><strong>What to look for:&nbsp;</strong></p><ol><li><p><strong>Examples of past excellence. </strong><span>Did they play D-1 college basketball? Did they play the bass at Julliard? Are they a champion puzzler? Did they design the art for a Dungeons and Dragons card? Excellence is a broad thing, but you know it when you see it! Make sure that you distinguish between “excellence” and “popularity” – excellence does not mean having 100k followers on Twitter!&nbsp;</span></p></li><li><p><strong>Theory of their own competence: </strong><span>Know what they’re good and bad at, what they conceive of as their strengths. They should already be aware of what tools they gravitate towards and what they over-use.&nbsp;Even 20 year olds should know this. </span></p></li><li><p><strong>“Spike potential.”</strong><span> In an interview, I’ll attempt to build a mental picture of the person based on their area of competence, and then start to tailor my questions to that specific profile. For example, if I’ve found an ex-Juilliard harpist who seems like she’d be detail-oriented and meticulous, I’ll then ask myself what the best version of that profile might look like. Since that profile usually spikes really high on “getting shit done” and “execution”, I will start thinking about how to probe into that in particular to search for seeds of future excellence in that regard.</span></p></li></ol></li><li><p><strong>&nbsp;What to ask:&nbsp;</strong></p><ol><li><p>You can be direct with these questions, and they’ll vary according to the person’s profile.&nbsp;</p></li></ol></li></ol></li><li><p><strong>Openness. </strong><span>You are not hiring a finished product, and therefore want to ensure the person is open to improvement and new ideas.&nbsp;</span></p><ol><li><p><strong>What to look for:&nbsp;</strong></p><ol><li><p><strong>Coachability: </strong><span>This trait has two aspects: responding well to feedback, and being self-aware enough to assess their own performance.&nbsp;</span></p></li><li><p><strong>Disagree and commit: </strong><span>Can they get out of their own ego and move forward, willingly, even when they don’t agree with the plan?&nbsp;</span></p></li></ol></li><li><p><strong>What to ask:&nbsp;</strong></p><ol><li><p>If you can’t probe this via their past experience in life, the scenario/case study is the best way to assess this quality. Have them work on a group interview, a take home exercise, or a role-play. Carefully observe how they react.&nbsp;</p></li><li><p>Backchannel and references are also excellent here.&nbsp;</p></li></ol></li></ol></li><li><p><strong>People who don’t take themselves too seriously. They have to be able to laugh at themselves to succeed.&nbsp;</strong></p><ol><li><p><strong>What to look for: </strong><span>This is usually very easy to assess, but look for someone unpretentious and a pleasure to be around.</span></p></li><li><p><strong>What to ask: </strong><span>You know it when you see it.&nbsp;</span></p></li></ol></li></ol></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Paperwall: Chinese Sites Mimic Local News, Promote Pro-Beijing Agenda Globally (191 pts)]]></title>
            <link>https://citizenlab.ca/2024/02/paperwall-chinese-websites-posing-as-local-news-outlets-with-pro-beijing-content/</link>
            <guid>39288231</guid>
            <pubDate>Wed, 07 Feb 2024 13:22:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://citizenlab.ca/2024/02/paperwall-chinese-websites-posing-as-local-news-outlets-with-pro-beijing-content/">https://citizenlab.ca/2024/02/paperwall-chinese-websites-posing-as-local-news-outlets-with-pro-beijing-content/</a>, See on <a href="https://news.ycombinator.com/item?id=39288231">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="container"> <!--TODO move to stylesheet -->
		<main id="main" role="main" itemscope="" itemprop="mainContentOfPage" itemtype="http://schema.org/Blog">
			<section id="content">


						
							

     <article id="post-80376" dir="ltr" 80376role="article" itemscope="" itemprop="blogPost" itemtype="http://schema.org/BlogPosting">

        <header>
          <span dir="ltr"><a href="https://citizenlab.ca/category/research/"></a><a href="https://citizenlab.ca/category/research/">Research</a><a href="https://citizenlab.ca/category/research/targeted-threats/">Targeted Threats</a></span>
            
            

          <!-- Display the link for the PDF version of the post -->
          
        </header>         
                <section itemprop="articleBody">
                  
<h2 id="key-findings">Key Findings</h2>
<ul><li>A network of at least 123 websites operated from within the People’s Republic of China while posing as local news outlets in 30 countries across Europe, Asia, and Latin America, disseminates pro-Beijing disinformation and ad hominem attacks within much larger volumes of commercial press releases. We name this campaign PAPERWALL.</li>
<li>PAPERWALL has similarities with HaiEnergy, an influence operation first reported on in 2022 by the cybersecurity company Mandiant. However, we assess PAPERWALL to be a distinct campaign with different operators and unique techniques, tactics and procedures.</li>
<li>PAPERWALL draws significant portions of its content from Times Newswire, a newswire service that was previously linked to HaiEnergy. We found evidence that Times Newswire regularly seeds pro-Beijing political content, including ad hominem attacks, by concealing it within large amounts of seemingly benign commercial content.</li>
<li>A central feature of PAPERWALL, observed across the network of websites, is the ephemeral nature of its most aggressive components, whereby articles attacking Beijing’s critics are routinely removed from these websites some time after they are published.</li>
<li>We attribute the PAPERWALL campaign to Shenzhen Haimaiyunxiang Media Co., Ltd., aka Haimai, a PR firm in China based on digital infrastructure linkages between the firm’s official website and the network.</li>
<li>While the campaign’s websites enjoyed negligible exposure to date, there is a heightened risk of inadvertent amplification by the local media and target audiences, as a result of the quick multiplication of these websites and their adaptiveness to local languages and content.</li>
<li>These findings confirm the increasingly important role private firms play in the realm of digital influence operations and the propensity of the Chinese government to make use of them.</li>
</ul><h2 id="premise-why-exposing-this-type-of-campaign-matters">Why Exposing this Type of Campaign Matters</h2>
<p>Beijing is increasing its <a href="https://thediplomat.com/2023/09/chinas-increasingly-aggressive-tactics-for-foreign-disinformation-campaigns/" target="_blank" rel="noopener"><u>aggressive</u></a> activities in the spheres of influence operations (IOs), both online and <a href="https://www.washingtonpost.com/world/2023/09/21/china-global-influence-takeaways/" target="_blank" rel="noopener"><u>offline</u></a>. In the online realm, relevant to the findings in this report, Chinese IOs are <a href="https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RW1aFyW" target="_blank" rel="noopener"><u>shifting</u></a> their tactics and increasing their volume of activity. For example, in November 2023 Meta – owner of the social media platforms Facebook, Instagram, and WhatsApp – announced the removal of five networks engaging in “coordinated inauthentic behavior” (i.e. influence operations) and targeting foreign audiences. Meta <a href="https://transparency.fb.com/en-gb/integrity-reports-q3-2023/" target="_blank" rel="noopener"><u>noted</u></a> it as a <strong>marked increase in IO activity by China</strong>, stating that “for comparison, between 2017 and November 2020, we took down two CIB networks from China, and both mainly focused on the Asia-Pacific region. This represents the most notable change in the threat landscape, when compared with the 2020 [US] election cycle.”</p>
<p>Seeding ad hominem attacks on Beijing’s critics can result in <strong>particularly harmful consequences</strong> for the targeted individuals, especially when, as in PAPERWALL’s case, it happens within much larger amounts of ostensibly benign news or promotional content that lends credibility to and expands the reach of the attacks. The consequences to these individuals can include, but are not limited to, their delegitimization in the country that hosts them; the loss of professional opportunities; and even verbal or physical harassment and intimidation by communities sympathetic to the Chinese government’s agenda.</p>
<p>This report adds yet more evidence, to what has been reported by other researchers, of the increasingly important role played by <strong>private firms in the management of digital IOs</strong> on behalf of the Chinese government. For example, an October 2023 <a href="https://www.rand.org/pubs/commentary/2023/10/dismantling-the-disinformation-business-of-chinese.html" target="_blank" rel="noopener"><u>blog post</u></a> by the RAND corporation summarized recent public findings on this issue, and advocated for the disruption of the disinformation-for-hire industry through the use of sanctions or other available legal and policy means.</p>
<p>It should be noted that disinformation-for-hire companies, driven <strong>by revenue, not ideology,</strong> tend not to be discerning about the motivations of their clients. As major <a href="https://www.theguardian.com/world/2023/feb/15/revealed-disinformation-team-jorge-claim-meddling-elections-tal-hanan" target="_blank" rel="noopener"><u>recent press investigations have shown</u></a>, both their origin and their client base can truly be global. Exposing this actor type, and its tactics, can help understand how governments seek plausible deniability through the hiring of corporate proxies. It can also refocus research on the latter, increasing deterrence by exposing their actions.</p>
<h2 id="background">Background</h2>
<p>On October 25, 2023, the Italian newspaper <strong>Il Foglio</strong> published an <a href="https://www.ilfoglio.it/esteri/2023/10/25/news/la-fabbrica-dei-contenuti-pro-cina-5826677" target="_blank" rel="noopener"><u>article</u></a>, summarized in English <a href="https://decode39.com/8109/network-fake-china-news-websites-italy/" target="_blank" rel="noopener"><u>here</u></a>, that exposed a small network of six websites posing as news outlets for Italian audiences that did not correspond to any real newsrooms in Italy. Il Foglio’s investigation confirmed that the websites were not registered as news outlets in the national registry, as legally required for any information organization operating within the country.</p>
<p>The identified domains used a specific naming convention: the name of an Italian city in the local spelling (i.e. “Roma”, or “Milano”), followed by mundane terms (for example, “moda”, meaning fashion; “money”; or “journal”). The websites hosted on those domains were all similar in structure, layout, and content, with generic political, crime, and entertainment articles interspersed with a relatively high amount of news related to China, or even directly derived from Chinese news organizations.</p>
<p>Il Foglio claimed that the network was being operated from China, and possibly by the Chinese government, based on content analysis and on the six domains resolving to an unspecified IP address owned by Tencent Computer Systems Inc., a major Chinese corporation. The Italian newspaper also hinted at the possible existence of a broader set of websites linked to the six presented, without publicly disclosing further information.</p>
<p>On November 13, 2023, the South Korean <strong>National Cyber Security Center (NCSC)</strong>, a governmental agency, also published a <a href="https://www.ncsc.go.kr:4018/main/cop/bbs/selectBoardArticle.do?bbsId=SecurityAdvice_main&amp;nttId=88028&amp;menuNo=020000&amp;subMenuNo=020200&amp;thirdMenuNo=" target="_blank" rel="noopener"><u>report</u></a> exposing eighteen Korean-language websites posing as local news outlets. The report attributed these sites to a Chinese PR firm called <strong>Haimai</strong>, based on the firm itself advertising the opportunity for its clients to publish press releases on these same sites. These websites presented strong similarities with the six Italian-language ones exposed by Il Foglio, from their technical structure to the modus operandi utilized.</p>
<p>We set out to research the whole network, with the objective of discovering additional websites, their tactics, targeting, and impact; and of verifying the attribution of the activity to its operators.</p>
<h2 id="an-extensive-network-of-websites">An Extensive Network of Websites</h2>
<h3 id="the-initial-set">The Initial Set</h3>
<p>Based on DNS infrastructure overlaps, we were able to expand the network identified by Il Foglio to an <strong>initial total of 74 domains</strong>. The majority of the domains could be identified through a relatively small set of three IP addresses they resolved to.</p>
<p>The number of domains hosted on these IP addresses is relatively low: they featured a total of less than 100 domain resolutions, while theoretically, each could have hosted thousands of domains. This could indicate that the IPs are only linked to one operator, rather than multiple clients of the provider.</p>
<p>We started from the following six domains, identified in the original news article:</p>
<figure><table headertable="true"><thead><tr><th>DOMAINS</th>
</tr></thead><tbody><tr><td>italiafinanziarie[.]com</td>
</tr><tr><td>napolimoney[.]com</td>
</tr><tr><td>romajournal[.]org</td>
</tr><tr><td>torinohuman[.]com</td>
</tr><tr><td>milanomodaweekly[.]com</td>
</tr><tr><td>veneziapost[.]com</td>
</tr></tbody></table><figcaption><p><em>Table 1: List of 6 domains hosting Italian-language websites as identified by Il Foglio</em></p></figcaption></figure>
<p>Based on Passive DNS resolution data made available by <a href="https://community.riskiq.com/" target="_blank" rel="noopener"><u>RiskIQ</u></a>, we found that the above domains resolved, during the last two years, to at least one of the following three IP addresses:</p>
<figure><table headertable="true"><colgroup><col><col><col><col></colgroup><thead><tr><th><strong>IP</strong></th>
<th><strong>OWNED BY</strong></th>
<th><strong>FIRST SEEN</strong></th>
<th><strong>LAST SEEN</strong></th>
</tr></thead><tbody><tr><td>3.12.149[.]243</td>
<td>Amazon Web Services (AWS)</td>
<td>2021-08-14</td>
<td>2023-07-06</td>
</tr><tr><td>162.62.225[.]65</td>
<td>Tencent Computer Systems Company Limited, Shenzhen</td>
<td>2023-07-07</td>
<td>2023-07-08</td>
</tr><tr><td>43.157.63[.]199</td>
<td>Tencent Computer Systems Company Limited, Shenzhen</td>
<td>2023-07-09</td>
<td>2023-10-28<br><em>(date of the last check)</em></td>
</tr></tbody></table><figcaption><p><em>Table 2: List of IP addresses to which the 6 domains resolved since 2021</em></p></figcaption></figure>
<p>We found other domains that had pointed to at least one of those three IP addresses since April 2018, obtaining the following list of 74 domains:</p>
<div>
<figure><table><tbody><tr><td>alpsbiz[.]com</td>
<td>sevillatimes[.]com</td>
<td>froneplus[.]com</td>
</tr><tr><td>vtnay[.]org</td>
<td>guellherald[.]com</td>
<td>it[.]euleader[.]org</td>
</tr><tr><td>stptb[.]org</td>
<td>aksaydaily[.]com</td>
<td>benmorning[.]com</td>
</tr><tr><td>tarragonapost[.]com</td>
<td>veneziapost[.]com</td>
<td>conanfinance[.]com</td>
</tr><tr><td>ekaterintech[.]com</td>
<td>vtnay[.]org</td>
<td>cordovapress[.]org</td>
</tr><tr><td>cordovapress[.]org</td>
<td>londonclup[.]com</td>
<td>economyfr[.]com</td>
</tr><tr><td>napolimoney[.]com</td>
<td>euleader[.]org</td>
<td>fftribune[.]com</td>
</tr><tr><td>sevillatimes[.]com</td>
<td>bmhtoday[.]com</td>
<td>ulstergrowth[.]com</td>
</tr><tr><td>glasgowtr[.]com</td>
<td>kupit-skorost-mdpv-lipeck[.]gaba[.]biz</td>
<td>louispress[.]org</td>
</tr><tr><td>ulstergrowth[.]com</td>
<td>alpsbiz[.]com</td>
<td>it[.]wdpp[.]org</td>
</tr><tr><td>eiffelpost[.]com</td>
<td>kazanculture[.]com</td>
<td>volgogradpost[.]com</td>
</tr><tr><td>euleader[.]org</td>
<td>tarragonapost[.]com</td>
<td>bmhtoday[.]com</td>
</tr><tr><td>tulunet[.]com</td>
<td>samaraindustry[.]com</td>
<td>glasgowtr[.]com</td>
</tr><tr><td>provencedaily[.]com</td>
<td>guellherald[.]com</td>
<td>deiniolnews[.]com</td>
</tr><tr><td>uk[.]wdpp[.]org</td>
<td>doyletimes[.]com</td>
<td>fr[.]wdpp[.]org</td>
</tr><tr><td>froneplus[.]com</td>
<td>italiafinanziarie[.]com</td>
<td>fftribune[.]com</td>
</tr><tr><td>eiffelpost[.]com</td>
<td>milanomodaweekly[.]com</td>
<td>gtad2[.]iranianhosting[.]com</td>
</tr><tr><td>romajournal[.]org</td>
<td>deiniolnews[.]com</td>
<td>friendlyparis[.]com</td>
</tr><tr><td>britishft[.]com</td>
<td>rmtcityfr[.]com</td>
<td>findmoscow[.]com</td>
</tr><tr><td>britishft[.]com</td>
<td>rmtcityfr[.]com</td>
<td>conanfinance[.]com</td>
</tr><tr><td>economyfr[.]com</td>
<td>uk[.]euleader[.]org</td>
<td>provencedaily[.]com</td>
</tr><tr><td>frnewsfeed[.]com</td>
<td>ec2-3-12-149-243[.]us-east-2[.]compute[.]amazonaws[.]com</td>
<td>frnewsfeed[.]com</td>
</tr><tr><td>friendlyparis[.]com</td>
<td>benmorning[.]com</td>
<td><i>[REDACTED]<a id="fnref1" role="doc-noteref" href="#fn1"><sup>1</sup></a></i></td>
</tr><tr><td>londonclup[.]com</td>
<td>doyletimes[.]com</td>
<td>torinohuman[.]com</td>
</tr><tr><td>gorodbusiness[.]com</td>
<td></td>
<td></td>
</tr></tbody></table></figure></div>
<p>Table 3: List of 74 domains also resolving to the same 3 IP addresses as the domains identified by Il Foglio</p>
<p>We verified that — with only four exceptions, highlighted in table 3 — the domains hosted websites posing as news outlets in several countries. <em>The four highlighted exceptions resolved to one or more of the three examined IP addresses before or after the rest of the network was present on them, making their affiliation to PAPERWALL questionable.</em> Additionally, many of them appeared to utilize the naming convention identified for the Italian-language domains (city name, followed by a generic term).</p>
<h3 id="the-broader-network">The Broader Network</h3>
<p>By replicating the same process on the websites highlighted in the NCSC report, we were able to identify additional domains, and confirm them as fully matching the PAPERWALL signature features.</p>
<p>These include:</p>
<h4 id="the-website-structure">The websites’ structure</h4>
<p>All of them were built on WordPress, and utilized a (<a href="https://trends.builtwith.com/widgets/WPBakery" target="_blank" rel="noopener"><u>highly popular</u></a>) page builder plugin – <a href="https://wpbakery.com/" target="_blank" rel="noopener"><u>WPBakery</u></a> – for their setup.</p>
<h4 id="the-domain-infrastructure">The domains’ infrastructure</h4>
<p>As spotted by Il Foglio, the current hosting infrastructure for the six Italian-language domains linked back to Tencent, a Chinese-based company. In fact, the relevant service being utilized is Tencent Cloud; and we could verify that all the currently active domains were being hosted on a Tencent Cloud IP address.</p>
<ul><li>It is important however to note that this is something that any private customer can request, provided that certain requirements given by the host provider are satisfied.</li>
<li>We confirmed in the Tencent Cloud service <a href="https://www.tencentcloud.com/document/product/378/17985" target="_blank" rel="noopener"><u>documentation</u></a> that the requirements imposed by the company are minimal: the identity of the individual or company subscribing to the service, a mobile phone number (to be verified through a security code sent via SMS), and a credit or debit card.</li>
<li>This effectively means that any private or corporate subscriber operating the network of websites could have pointed their domains to a Tencent IP address by subscribing to their Cloud service.</li>
</ul><h4><strong>The WordPress users</strong></h4>
<p>We analyzed the usernames utilized to post content on the PAPERWALL websites through a technique called <a href="https://nixintel.info/osint/osint-techniques-whos-behind-a-wordpress-site/" target="_blank" rel="noopener"><u>user enumeration</u></a>. This technique revealed that the whole network shared a small number of content author names, visible in the table below.</p>
<figure><table headertable="true"><colgroup><col><col><col></colgroup><thead><tr><th><strong>USERNAME</strong></th>
<th><strong># OF WEBSITES</strong></th>
<th><strong>NOTES</strong></th>
</tr></thead><tbody><tr><td>Tina</td>
<td>44</td>
<td>European, Asian, Latin American websites</td>
</tr><tr><td>Chunqt</td>
<td>28</td>
<td>Asian websites only</td>
</tr><tr><td>Sophia</td>
<td>26</td>
<td>European websites only</td>
</tr><tr><td>Peter</td>
<td>12</td>
<td>Russian websites only</td>
</tr><tr><td><em>[Others]</em></td>
<td>11</td>
<td>All eleven users except one were associated with the domain napolimoney[.]com, in a complete departure from the usual pattern. We could not locate evidence that any of those users correspond to an existing person.</td>
</tr><tr><td><em>[Undetermined]</em></td>
<td>12</td>
<td>Websites whose user list was not accessible; or that were not online (including in an archived version) at the moment of writing this report.</td>
</tr></tbody></table><figcaption><p><em>Table 4: WordPress usernames identified as used on the PAPERWALL websites</em></p></figcaption></figure>
<h3 id="the-content">The content</h3>
<p>All of the identified websites had almost identical homepage menus, typically including (translated in the target language): Politics, Economy, Culture, Current Affairs, and Sport. The actual content being posted was a mix of scraped and reposted content from local media in the targeted country; press releases; and occasional Chinese state media articles, or anonymous disinformation content. The content could typically be observed as being simultaneously cross-posted across several of the websites at once. We analyze the content in more detail <a href="#ml8xqr602kew"><u>later in this report</u></a>.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1.png&amp;nocache=1"><img fetchpriority="high" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-1024x327.png&amp;nocache=1" alt="Examples of a commercial press release related to a company called Great Wall Motor being posted to six different PAPERWALL websites within the span of six days (25 to 31 October 2023). Note: we did not find any evidence that GWM was aware of its content being promoted as part of a deceptive coordinated campaign." width="640" height="204" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 1" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-1024x327.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-300x96.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-768x245.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-1536x491.png&amp;nocache=1 1536w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-605x193.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-297x95.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-500x160.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1-180x58.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-1.png&amp;nocache=1 1806w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 1: Combo of examples of a commercial press release related to a company called <a href="https://en.wikipedia.org/wiki/Great_Wall_Motor" target="_blank" rel="noopener">GWM (Great Wall Motor)</a>, being posted to six different PAPERWALL websites within the span of six days (25 to 31 October 2023). Note: we did not find any evidence that GWM was aware of its content being promoted as part of a deceptive coordinated campaign.</figcaption></figure>
<p><strong>As of December 21, 2023, we were able to identify a total of 123 domains</strong>, almost all of which are hosting websites posing as news outlets. A full list of these domains is available in the <a href="#b514183jtp0p"><u>Appendix</u></a>.</p>
<h3 id="target-audiences">Target Audiences</h3>
<p>Based on the language utilized, as well as on the sourcing of the local news content reposted by PAPERWALL websites – an aspect that we will also describe in more detail <a href="#al1u3rjz8oy7"><u>later in this report</u></a> – we observed the network as mimicking local news outlets in <strong>30 different countries</strong>, as shown in the map below. A full list of the target countries, with the number of websites addressing each, is available in the <a href="#lt1mh5mnitfc"><u>Appendix</u></a>.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2.png&amp;nocache=1"><img decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-1024x536.png&amp;nocache=1" alt="The PAPERWALL target audiences, showing the distribution of websites per each country targeted" width="640" height="335" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 2" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-1024x536.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-300x157.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-768x402.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-1536x804.png&amp;nocache=1 1536w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-2048x1071.png&amp;nocache=1 2048w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-605x316.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-297x155.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-500x262.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-2-180x94.png&amp;nocache=1 180w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 2: Map of the PAPERWALL target audiences, showing the distribution of websites per each country targeted</figcaption></figure>
<p>To appear as legitimate local news outlets, PAPERWALL websites typically utilized local references as part of their names. For example, “Eiffel” or “Provence” for French-language websites; “Viking” for the Norwegian one; or city names, commonly used for Italian and Spanish websites.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1.png&amp;nocache=1"><img decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1-1024x512.png&amp;nocache=1" alt="Headers of napolimoney[.]com (Italy), eiffelpost[.]com (France), and sevillatimes[.]com (Spain) shown as examples of the nomenclature pattern used by PAPERWALL" width="640" height="320" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 3" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1-1024x512.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1-300x150.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1-768x384.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1-605x303.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1-297x149.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1-500x250.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1-180x90.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-3-1.png&amp;nocache=1 1474w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 3: Headers of napolimoney[.]com (Italy), eiffelpost[.]com (France), and sevillatimes[.]com (Spain) shown as examples of the nomenclature pattern used by PAPERWALL</figcaption></figure>A broader look at the domains’ registration timeline shows how the websites were set up in waves, one target country (or region) at a time. In July 2019, updatenews[.]info became the first PAPERWALL domain to be registered. However, due to registration data patterns and <a href="https://web.archive.org/web/20200815000000*/updatenews.info" target="_blank" rel="noopener">archived captures</a> on the Wayback Machine, we can only establish affiliation with PAPERWALL beginning May 2020. The hosted website primarily published news relevant to American readers.
<p>Meanwhile, in April 2020, the domain wdpp[.]org (presumably abbreviated for “World Development Press”) was registered. The website located on a Tencent IP address, which is also linked to updatenews[.]info and 16 other PAPERWALL domains, will be critical to our <a href="https://docs.google.com/document/d/1PGXSyfUmNm11Ugut4AZj-BwuEkOzH3SBUZ-dbauUDPA/edit#bookmark=id.t6erxabz8z4e" target="_blank" rel="noopener">attribution</a>.</p>
<p>In July 2020, we saw the first group registrations. That month, nine domains were registered, with each hosting a website aimed at Japanese audiences. One of them, <b>fujiyamatimes[.]com</b>, has a footer linking it to <b>“Updatenews”</b>.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4.png&amp;nocache=1" alt="Footer on fujiyamatimes[.]com, showing the line “Support: FUJIYAMA TIMES by Updatenews.”" width="958" height="72" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 4" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4.png&amp;nocache=1 958w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4-300x23.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4-768x58.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4-605x45.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4-297x22.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4-500x38.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-4-180x14.png&amp;nocache=1 180w" sizes="(max-width: 958px) 100vw, 958px"></a></p><figcaption>Figure 4: Footer on fujiyamatimes[.]com, showing the line “Support: FUJIYAMA TIMES by Updatenews.”</figcaption></figure>The waves immediately following target Korean and again Japanese audiences; beginning in February 2021, the focus moved on to European countries, then in early 2023 to Latin American ones. A summary of the registration waves is shown in the chart below.
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline.png&amp;nocache=1" alt="Timeline of the PAPERWALL domain registrations, with annotation of the target countries for the registered domains on each date" width="1477" height="767" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 5" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline.png&amp;nocache=1 1477w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline-300x156.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline-1024x532.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline-768x399.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline-605x314.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline-297x154.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline-500x260.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/timeline-180x93.png&amp;nocache=1 180w" sizes="(max-width: 1477px) 100vw, 1477px"></a></p><figcaption>Figure 5: Timeline of the PAPERWALL domain registrations, with annotation of the target countries for the registered domains on each date</figcaption></figure>
<h2 id="the-content">The Content</h2>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6.png&amp;nocache=1" alt="Breakdown of the content categories found on the PAPERWALL network of websites" width="838" height="398" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 6" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6.png&amp;nocache=1 838w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6-300x142.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6-768x365.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6-605x287.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6-297x141.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6-500x237.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-6-180x85.png&amp;nocache=1 180w" sizes="(max-width: 838px) 100vw, 838px"></a></p><figcaption>Figure 6: Breakdown of the content categories found on the PAPERWALL network of websites</figcaption></figure>
<h3 id="political-content-targeted-attacks-and-disinformation">Political Content: Targeted Attacks and Disinformation</h3>
<p>Hidden within much larger amounts of generic content, a smaller portion published by the PAPERWALL network is of a political nature. The following sections break down content types and main features.</p>
<h4 id="targeted-attacks">Targeted Attacks</h4>
<p>A common type of politically-themed content includes <strong>ad hominem attacks</strong>, usually kept in English irrespective of the target audience, on figures perceived by Beijing as hostile. For example, an article titled <strong>“Yan Limeng is a complete rumor maker”</strong> could be found on every active PAPERWALL website as of December 2023. This article contains a direct attack on <a href="https://en.wikipedia.org/wiki/Li-Meng_Yan" target="_blank" rel="noopener"><u>Li-Meng Yan</u></a>, a Chinese virologist who alleges that the COVID-19 virus originated from a Chinese government laboratory. While her theories <a href="https://www.washingtonpost.com/technology/2021/02/12/china-covid-misinformation-li-meng-yan/" target="_blank" rel="noopener"><u>have been widely dismissed</u></a> by the global scientific community, the attacks on her by PAPERWALL were unsubstantiated, aimed at her personal and professional reputation, and completely anonymous.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7-979x1024.png&amp;nocache=1" alt="Examples of an article attacking Li-Meng Yan, as published by the PAPERWALL websites nlpress[.]org (Netherlands), sevillatimes[.]com (Spain), and milanomodaweekly[.]com (Italy)." width="640" height="669" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 7" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7-979x1024.png&amp;nocache=1 979w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7-287x300.png&amp;nocache=1 287w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7-768x803.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7-325x340.png&amp;nocache=1 325w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7-190x199.png&amp;nocache=1 190w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7-265x277.png&amp;nocache=1 265w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7-180x188.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-7.png&amp;nocache=1 1012w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 7: Examples of an article attacking Li-Meng Yan, as published by the PAPERWALL websites <a href="https://web.archive.org/web/2/https://nlpress.org/persbericht/yan-limeng-is-a-complete-rumor-maker/" target="_blank" rel="noopener"><u>nlpress[.]org</u></a> (Netherlands), <a href="https://web.archive.org/web/20240117084606/https://sevillatimes.com/presionesoltar/yan-limeng-is-a-complete-rumor-maker/" target="_blank" rel="noopener"><u>sevillatimes[.]com</u></a> (Spain), and <a href="https://web.archive.org/web/20240117090234/http://www.milanomodaweekly.com/comunicato/yan-limeng-is-a-complete-rumor-maker/" target="_blank" rel="noopener"><u>milanomodaweekly[.]com</u></a> (Italy)</figcaption></figure>Targeted attacks conducted through PAPERWALL can also take the form of <strong>false public pressure campaigns</strong>. To continue with the example of Li-Meng Yan, we can observe an <a href="https://web.archive.org/web/20240117133951/http://www.milanomodaweekly.com/comunicato/expose-the-con-mans-plot/" target="_blank" rel="noopener"><u>attempt at blocking her appointment</u></a> to an alleged academic role at the Perelman Medical School of the University of Pennsylvania that was circulated by the network in October 2023.
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8.jpg&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-724x1024.jpg&amp;nocache=1" alt="Image posted on a PAPERWALL article attacking Li-Meng Yan, and trying to block her alleged appointment to an academic role at the Perelman Medical School of the University of Pennsylvania. The article was posted across the network in October 2023" width="640" height="905" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 8" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-724x1024.jpg&amp;nocache=1 724w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-212x300.jpg&amp;nocache=1 212w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-768x1086.jpg&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-1086x1536.jpg&amp;nocache=1 1086w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-240x340.jpg&amp;nocache=1 240w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-141x199.jpg&amp;nocache=1 141w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-196x277.jpg&amp;nocache=1 196w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8-180x255.jpg&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-8.jpg&amp;nocache=1 1280w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 8: Image posted on a PAPERWALL <a href="https://web.archive.org/web/20240117133951/http://www.milanomodaweekly.com/comunicato/expose-the-con-mans-plot/" target="_blank" rel="noopener"><u>article</u></a> attacking Li-Meng Yan, and trying to block her alleged appointment to an academic role at the Perelman Medical School of the University of Pennsylvania. The article was posted across the network in October 2023</figcaption></figure>
<p>This article echoes others that circulated outside of the PAPERWALL network on websites that cannot be confirmed as part of the same network, as well as on blogging platforms. For example:</p>
<ul><li>“<a href="https://web.archive.org/web/20231016211230/https://theinscribermag.com/the-perelman-school-of-medicine-should-expel-yan-limeng/" target="_blank" rel="noopener"><u>The Perelman School Of Medicine Should Expel Yan Limeng</u></a>”, published on 16 October 2023 by theinscribermag[.]com. A review of the other articles posted by the same author, “Dawn Wells”, reveals more targeted attacks on political figures, for example the President of Taiwan, <a href="https://web.archive.org/web/20240109065915/https://theinscribermag.com/secret-history-of-tsai-ing-wen-reveals-secrets/" target="_blank" rel="noopener"><u>Tsai Ing-wen</u></a>.</li>
<li>“<a href="https://web.archive.org/web/20240122085709/https://www.prlog.org/12907832-reject-yan-limeng-for-perelman-medical-college.html" target="_blank" rel="noopener"><u>Reject Yan Limeng for Perelman Medical College</u></a>”, published on prlog[.]org, a distinct but equally anonymous press release publishing platform, on 6 March 2022.</li>
<li>“<a href="https://web.archive.org/web/20240122085244/https://medium.com/@margaretharris99306/this-is-yan-limeng-was-hired-as-a-perelman-school-327ad3ef7647" target="_blank" rel="noopener"><u>This is Yan Limeng was hired as a Perelman School</u></a>” (sic), published on 21 June 2023 on medium.com, an open blogging platform.</li>
<li>“<a href="https://web.archive.org/web/20240122085240/https://medium.com/@ellinamalkova365874/%E6%B1%89%E5%A5%B8%E9%97%AB%E4%B8%BD%E6%A2%A6-%E9%97%AB%E4%B8%BD%E6%A2%A6maintain-campus-cleanliness-reject-yan-limon-for-perelman-medical-college-06055eac00a3" target="_blank" rel="noopener"><u>#汉奸闫丽梦#闫丽梦Maintain campus cleanliness Reject Yan Limon for Perelman Medical College</u></a>”, published on 14 December 2023, also on medium.com.</li>
</ul><p>This suggests that PAPERWALL is used as an amplifier for campaigns targeting specific individuals and anonymously employing an array of additional online platforms to maximize their attacks.</p>
<h4 id="conspiracy-theories">Conspiracy Theories</h4>
<p>A second type of politically themed content present within the PAPERWALL network of websites is conspiracy theories, typically aimed at the image of the United States, or its allies. Claims could include, for example, allegations of the US conducting biological experiments on the local population in South-East Asian countries.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9-1024x620.png&amp;nocache=1" alt="On the left is an example of conspiracy theory from euleader[.]org. The article was published in an anonymous form directly on the PAPERWALL website, with the feature image hosted on a website called timesnewswire[.]com which we will further analyze in the following section. The image was taken from the cover of a book titled “Biological Weapons: Using Nature to Kill” by Anna Collins." width="640" height="388" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 9" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9-1024x620.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9-300x182.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9-768x465.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9-562x340.png&amp;nocache=1 562w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9-297x180.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9-458x277.png&amp;nocache=1 458w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9-180x109.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-9.png&amp;nocache=1 1114w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 9: <span id="kix.wk5eivqukig"></span>(Left) <a href="https://web.archive.org/web/2/http://euleader.org/press/usa-conducting-human-experiments-on-thai-myanmar-border/" target="_blank" rel="noopener"><u>Example</u></a> of conspiracy theory from euleader[.]org. The article was published in an anonymous form directly on the PAPERWALL website, with the feature image hosted on a website called timesnewswire[.]com (right), which we will further analyze in the <a href="#yg6ettshxolr"><u>following section</u></a>. The image was taken from the <a href="https://web.archive.org/web/20231215092936/https://www.amazon.com/-/en/Anna-Collins/dp/1534562893" target="_blank" rel="noopener"><u>cover of a book</u></a> titled “Biological Weapons: Using Nature to Kill” by Anna Collins</figcaption></figure>
<h4 id="chinese-state-media">Chinese State Media</h4>
<p>A final category of political content disseminated by PAPERWALL often takes the form of verbatim reposts of content from Chinese state media, such as CGTN or the Global Times. Also, in this case, the content usually remains untranslated from English. An example of this scenario is shown in figure 10.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10.png&amp;nocache=1" alt="Example of CGTN (Chinese state media) article reposted, verbatim, by the PAPERWALL website italiafinanziarie[.]com on December 13, 2023" width="878" height="697" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 10" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10.png&amp;nocache=1 878w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10-300x238.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10-768x610.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10-428x340.png&amp;nocache=1 428w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10-251x199.png&amp;nocache=1 251w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10-349x277.png&amp;nocache=1 349w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-10-180x143.png&amp;nocache=1 180w" sizes="(max-width: 878px) 100vw, 878px"></a></p><figcaption>Figure 10: <a href="https://web.archive.org/web/20231215091402/https://www.italiafinanziarie.com/comunicatostampa/cgtn-closer-people-to-people-bonds-foster-china-vietnam-friendship/" target="_blank" rel="noopener"><u>Example</u></a> of CGTN (Chinese state media) <a href="https://web.archive.org/web/20231222130852/https://news.cgtn.com/news/2023-12-13/Closer-people-to-people-bonds-foster-China-Vietnam-friendship-1pv1E4vlazm/index.html" target="_blank" rel="noopener"><u>article</u></a> reposted, verbatim, by the PAPERWALL website italiafinanziarie[.]com on December 13, 2023</figcaption></figure>
<h3 id="scraping-of-local-mainstream-media">Scraping of Local Mainstream Media</h3>
<p>One of the most evident tactics PAPERWALL employs to disguise its websites as local news outlets is to regularly republish content, verbatim, from legitimate online sources in the target country. Below is an example extracted from the French-language website <strong>eiffelpost[.]com</strong>:</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8-1024x526.png&amp;nocache=1" alt="Article posted on eiffelpost[.]com (a confirmed PAPERWALL website), left, and the original published by the real French newspaper Le Parisien, right" width="640" height="329" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 11" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8-1024x526.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8-300x154.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8-768x395.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8-605x311.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8-297x153.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8-500x257.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8-180x92.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/image8.png&amp;nocache=1 1205w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 11: <a href="https://web.archive.org/web/20240110085021/https://www.eiffelpost.com/culture/enquete-sur-la-mort-de-lactrice-emmanuelle-debever-premiere-femme-ayant-accuse-depardieu-de-violences-sexuelles/" target="_blank" rel="noopener"><u>Article</u></a> posted on eiffelpost[.]com (a confirmed PAPERWALL website), left, and the <a href="https://www.leparisien.fr/culture-loisirs/cinema/enquete-sur-la-mort-de-lactrice-emmanuelle-debever-premiere-femme-ayant-accuse-depardieu-de-violences-sexuelles-13-12-2023-U777EELZKVFPHOBJINUZ76JVRM.php" target="_blank" rel="noopener"><u>original</u></a> published by the real French newspaper Le Parisien, right</figcaption></figure>Each PAPERWALL website has large volumes of content published on a daily basis. For example, we could list a total of 5200 individual URLs published on the website londonclup[.]com, registered in May 2021, by November 10, 2023. A volume of this magnitude points to the possibility that the process was automated. The images in the reposted articles are usually kept as hosted directly on the source website: in the example above, that is <a href="https://www.leparisien.fr/" target="_blank" rel="noopener"><u>https://www.leparisien.fr/</u></a>.
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-12.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-12.png&amp;nocache=1" alt="the “Sources” tab in the “Inspect” module of the Chrome browser for eiffelpost[.]com. Highlighted is the folder corresponding to www.leparisien.fr, hosting the original image included in the article on the PAPERWALL website" width="740" height="453" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 12" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-12.png&amp;nocache=1 740w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-12-300x184.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-12-555x340.png&amp;nocache=1 555w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-12-297x182.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-12-452x277.png&amp;nocache=1 452w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-12-180x110.png&amp;nocache=1 180w" sizes="(max-width: 740px) 100vw, 740px"></a></p><figcaption>Figure 12: Screenshot of the “Sources” tab in the “Inspect” module of the Chrome browser for eiffelpost[.]com. Highlighted is the folder corresponding to <a href="http://www.leparisien.fr/" target="_blank" rel="noopener"><u>www.leparisien.fr</u></a>, hosting the original image included in the article on the PAPERWALL website</figcaption></figure>
<h3 id="commercial-content">Commercial Content</h3>
<h4 id="press-releases">Press Releases</h4>
<p>Mixed with the copy/pasted news content, the PAPERWALL websites typically publish press releases of a commercial nature. These press releases are often posted either in an explicit “Press Release” section or directly on the homepage. A peculiarity of the press release content is that it is usually not translated in the target language, but remains in the original one – which, for the most part, is English.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-13.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-13.png&amp;nocache=1" alt="Dec 15, 2023 screenshot from the homepage of the PAPERWALL website italiafinanziarIe[.]com, showing a press release (in English), mixed with Italian-language legitimate news content (lifted, in this example, from the local news website https://www.rete8.it)." width="724" height="491" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 13" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-13.png&amp;nocache=1 724w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-13-300x203.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-13-501x340.png&amp;nocache=1 501w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-13-293x199.png&amp;nocache=1 293w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-13-408x277.png&amp;nocache=1 408w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-13-180x122.png&amp;nocache=1 180w" sizes="(max-width: 724px) 100vw, 724px"></a></p><figcaption>Figure 13: Dec 15, 2023 screenshot from the homepage of the PAPERWALL website italiafinanziarIe[.]com, showing a press release (in English), mixed with Italian-language legitimate news content (lifted, in this example, from the local news website <a href="https://www.rete8.it/" target="_blank" rel="noopener"><u>https://www.rete8.it</u></a>)</figcaption></figure>
<h4 id="cryptocurrencies">Cryptocurrencies</h4>
<p>A substantial portion of the press release content is specifically dedicated to cryptocurrency topics. This is consistent with the sourcing of press releases from Times Newswire – which we will analyze in the <a href="#yg6ettshxolr"><u>next section</u></a> – where cryptocurrency topics are among the most common.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14-804x1024.png&amp;nocache=1" alt="Snapshot of the Press Release (“Comunicato Stampa” in Italian) section of italiafinanziarie[.]com, showing five distinct cryptocurrency-related press releases, all in English. Again, the Italian language is reserved for the legitimate news content extracted from real local media" width="640" height="815" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 14" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14-804x1024.png&amp;nocache=1 804w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14-235x300.png&amp;nocache=1 235w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14-768x978.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14-267x340.png&amp;nocache=1 267w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14-156x199.png&amp;nocache=1 156w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14-217x277.png&amp;nocache=1 217w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14-180x229.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-14.png&amp;nocache=1 814w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 14: Snapshot of the Press Release (“Comunicato Stampa” in Italian) section of italiafinanziarie[.]com, showing five distinct cryptocurrency-related press releases, all in English. Again, the Italian language is reserved for the legitimate news content extracted from real local media</figcaption></figure>
<h3 id="content-sourcing">Content Sourcing</h3>
<p>In order to better understand the nature and proportion of the sourcing of content by PAPERWALL, we utilized the backlinks analysis platform provided by <a href="https://ahrefs.com/" target="_blank" rel="noopener"><u>AHREFS</u></a>. Backlinks are links created <a href="https://moz.com/learn/seo/backlinks" target="_blank" rel="noopener"><u>when one website links to another</u></a>.</p>
<ol type="1"><li>We extracted all the domains that PAPERWALL backlinked to – therefore including those hosting content published by PAPERWALL – as of November 30, 2023.</li>
<li>We sorted them by the amount of total backlinking PAPERWALL domains, in descending order.</li>
<li>We then manually reviewed and categorized the backlinked domains. The top 25 ones are visible in figure 15.</li>
</ol>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-669x1024.png&amp;nocache=1" alt="Our elaboration of the backlinks data obtained through the AHREFS platform, showing the top 25 domains that PAPERWALL websites backlinked to as of November 30, 2023. CGTN and Global Times, both Chinese state media, appear in the list respectively with 95 and 86 backlinking domains each" width="640" height="980" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 15" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-669x1024.png&amp;nocache=1 669w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-196x300.png&amp;nocache=1 196w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-768x1175.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-1004x1536.png&amp;nocache=1 1004w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-222x340.png&amp;nocache=1 222w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-130x199.png&amp;nocache=1 130w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-181x277.png&amp;nocache=1 181w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall-180x275.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/Figure-15-paperwall.png&amp;nocache=1 1120w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 15: Our elaboration of the backlinks data obtained through the AHREFS platform, showing the top 25 domains that PAPERWALL websites backlinked to as of November 30, 2023. CGTN and Global Times, both Chinese state media, appear in the list respectively with 95 and 86 backlinking domains each.<br>Note: to emphasize the prominence of the specific topic, we are distinguishing between cryptocurrency-related domains (“Crypto”) and more generic press release clients (“Client Company”).</figcaption></figure>
<p>The results show:</p>
<ul><li>A top layer of <strong>social media</strong> domains, which is unsurprising – individual press releases will typically contain links to the client company’s social media profiles;</li>
<li>A set of <strong>cryptocurrency websites</strong>, which – once reviewed individually – are confirmed as the subject of multiple press releases each. Also, <strong>two non-crypto private corporations</strong>, likely benefiting from the paid press release services that PAPERWALL appears to host;</li>
<li>Two <strong>Chinese state media</strong> websites (CGTN and Global Times), backlinked to by almost 100 domains each;</li>
<li>Finally, but crucially, approximately 100 domains backlinked to <strong>Times Newswire</strong>, a supposed newswire service.</li>
</ul><h2 id="times-newswire">Times Newswire</h2>
<h3 id="links-to-paperwall">Links to PAPERWALL</h3>
<p>The consistent connection between PAPERWALL and Times Newswire is one of the most peculiar traits of the campaign. While there is certainly no definitive playbook on how online influence operations are conducted, it is uncommon for a network of coordinated websites to regularly draw content from a single publicly available but equally covert source. For example, as seen in <a href="https://citizenlab.ca/2019/05/burned-after-reading-endless-mayflys-ephemeral-disinformation-campaign/"><u>other known disinformation campaigns</u></a>, a typical tactic would be to create copycat domains, mimicking real news sources without revealing where the content was first published. This characteristic makes it possible to analyze the distribution and type of the content and renders the source website a central component of the campaign.</p>
<p>As of November 30, 2023, the alleged newswire service was backlinked to by 98 distinct PAPERWALL domains, out of the total 123. We assess that the vast majority of the backlinks in question consist of <strong>content directly hosted on the Times Newswire website</strong>, and <strong>reposted by the PAPERWALL network</strong>, as seen in a <a href="#kix.wk5eivqukig"><u>previous example</u></a>.</p>
<p>Times Newswire is a known entity in the context of influence operations: it was first reported about in <a href="https://www.mandiant.com/resources/blog/pro-prc-haienergy-us-news" target="_blank" rel="noopener"><u>2023</u></a> by Mandiant, a Google-owned cybersecurity company. Mandiant observed Times Newswire’s hosted content disseminated through a network of subdomains for legitimate US-based news outlets in the context of an influence campaign that the company dubbed as HaiEnergy.</p>
<p>Mandiant had attributed HaiEnergy to a Chinese PR firm called <strong>Haixun</strong>, previously identified in their original 2022 <a href="https://www.mandiant.com/resources/blog/pro-prc-information-operations-campaign-haienergy" target="_blank" rel="noopener"><u>report</u></a>; however, in their <a href="https://www.mandiant.com/resources/blog/pro-prc-haienergy-us-news" target="_blank" rel="noopener"><u>2023 report</u></a> the cybersecurity firm stated: “we currently lack technical evidence to suggest an underlying connection between Haixun and […] Times Newswire, […] and thus currently view them as distinct entities.” In fact, <strong>timesnewswire[.]com</strong> is – like the PAPERWALL websites – a fully anonymous asset.</p>
<p>It should be noted that – unlike the PAPERWALL websites – <strong>timesnewswire[.]com</strong> offers a “Submit Post” button, hinting at the possibility for registered users to publish content directly to the website. However, once clicked, the button leads to a login page, with no registration module being displayed. The registration of users therefore appears not to happen through the website, and is probably controlled and individually approved by the website’s operators separately.</p>
<p>Similarly to what was stated by Mandiant for the HaiEnergy campaign, we cannot currently attribute Times Newswire to the same operators as PAPERWALL. There are however at least two significant similarities between the newswire and the PAPERWALL network:</p>
<p>The <strong>hosting IP address is also a Tencent one, and on the same AS number (132203) as the PAPERWALL domains. </strong>An Autonomous System (AS) number is a collection of IP addresses “<a href="https://en.wikipedia.org/wiki/Autonomous_system_(Internet)" target="_blank" rel="noopener"><u>under the control of one or more network operators on behalf of a single administrative entity or domain</u></a>.”</p>
<p>43.153.106[.]236, US, Tencent Building Kejizhongyi Avenue, AS132203</p>
<p>Table 5: DNS Resolution of timesnewswire[.]com as of December 21, 2023</p>
<p>Times Newswire also uses a <strong>simple WordPress template</strong> as its main structure. Additionally, it utilizes the <strong>same page builder plugin (<a href="https://wpbakery.com/" target="_blank" rel="noopener"><u>WPBakery</u></a>)</strong> used by PAPERWALL.</p>
<p>Being central to at least two distinct operations – PAPERWALL and HaiEnergy – Times Newswire could however be an independent asset, simultaneously exploited by multiple influence operations.</p>
<h3 id="ephemerality">Ephemerality</h3>
<p>We were able to identify examples of politically-themed articles that were routinely deleted from Times Newswire. For example, we observed ad hominem attack posts on figures in direct conflict with Beijing’s positions that were later removed from the website.</p>
<ul><li>One of these figures was <a href="https://en.wikipedia.org/wiki/Li_Hongzhi" target="_blank" rel="noopener"><strong><u>Li Hongzhi</u></strong></a>, founder and leader of the religious movement Falun Gong, that has been <a href="https://freedomhouse.org/report/2017/battle-china-spirit-falun-gong-religious-freedom" target="_blank" rel="noopener"><u>banned and persecuted in mainland China since 1999</u></a>.</li>
<li>While a <a href="https://www.google.com/search?q=site%3Atimesnewswire.com+%22li+hongzhi%22&amp;rlz=1C5GCEM_enNL1040NL1040&amp;oq=site%3Atimesnewswire.com+%22li+hongzhi%22" target="_blank" rel="noopener"><u>Google search</u></a> on the articles mentioning Li Hongzhi currently only returns two articles, a similar search through the Times Newswire content <a href="https://web.archive.org/web/*/timesnewswire.com/*" target="_blank" rel="noopener"><u>archived by the Wayback Machine</u></a> showed a total of eight pieces.</li>
<li>All articles are anonymous opinion pieces expressing extremely harsh views on Hongzhi and the religious movement he leads.</li>
</ul><p>This behavior suggests that ephemeral seeding is the intention for most content of that type which is deleted from the source website (Times Newswire) at an unspecified time after its initial publication. As noted in previous <a href="https://citizenlab.ca/2019/05/burned-after-reading-endless-mayflys-ephemeral-disinformation-campaign/"><u>research</u></a>, ephemeral disinformation is designed to elude detection. With the evidence disappearing from the source websites not long after having been published, investigators may be unable to make the necessary connections to detect an influence operation or correctly identify the reach and depth of the operation. At the same time, the seeded message could be picked up and amplified by mainstream or social media, making the narrative stay even if the original source had been removed.</p>
<p>In the case of PAPERWALL however, as we discuss in more detail in the <a href="#wn8xiy3i1f9h"><u>Conclusions</u></a> section, we currently have no evidence that this has ever happened.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-16.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-16.png&amp;nocache=1" alt="Headlines of two now-deleted Times Newswire articles (1, 2) attacking Li Hongzhi, founder and leader of the religious movement Falun Gong" width="531" height="546" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 16" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-16.png&amp;nocache=1 531w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-16-292x300.png&amp;nocache=1 292w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-16-331x340.png&amp;nocache=1 331w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-16-194x199.png&amp;nocache=1 194w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-16-269x277.png&amp;nocache=1 269w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-16-180x185.png&amp;nocache=1 180w" sizes="(max-width: 531px) 100vw, 531px"></a></p><figcaption>Figure 16: Headlines of two now-deleted Times Newswire articles (<a href="https://web.archive.org/web/20230601183840/https://www.timesnewswire.com/pressrelease/the-plague-like-rule-of-extreme-right-wing-religious-leader-li-hongzhi/" target="_blank" rel="noopener"><u>1</u></a>, <a href="https://web.archive.org/web/20230530152402/https://www.timesnewswire.com/pressrelease/i-suspect-master-li-hongzhi-is-a-fraud/" target="_blank" rel="noopener"><u>2</u></a>) attacking Li Hongzhi, founder and leader of the religious movement Falun Gong</figcaption></figure>
<p>As a final note on the operational tactics utilized by Times Newswire and, as a consequence, by PAPERWALL, we note that the articles targeting Li Hongzhi, as well as others of a political nature that we could observe, were all categorized as “press releases” on the website, similarly to the thousands of actual promotional posts it published. It is however highly unusual for press releases to include content of this kind. We judge this as another tactic designed to make the political narratives hard to detect without diminishing their potential impact.</p>
<h2 id="attribution-haimai">Attribution: Haimai</h2>
<p>We attribute PAPERWALL to a PR firm based in China, <strong>Shenzhen Haimaiyunxiang Media Co., Ltd.,</strong> or <strong>“Haimai.”</strong></p>
<p><strong>Haimai</strong> was first exposed by the Korean NCSC in their investigation on 18 Korean-focused PAPERWALL websites as being responsible for operating them. However, based on the evidence presented in the NCSC <a href="https://www.ncsc.go.kr:4018/main/cop/bbs/selectBoardArticle.do?bbsId=SecurityAdvice_main&amp;nttId=88028&amp;menuNo=020000&amp;subMenuNo=020200&amp;thirdMenuNo=" target="_blank" rel="noopener"><u>report</u></a>, that assessment appeared to be primarily based on Haimai itself advertising the paid placement of promotional articles on Times Newswire, and as a consequence, on the PAPERWALL network of websites.</p>
<p>We do not consider this criterion as sufficient for a conclusive attribution. In fact, during our research we could identify at least three other PR and marketing companies advertising the sale of promotional packages to be placed directly on PAPERWALL websites. They include:</p>
<ul><li>A South Korean firm named <strong>Excelsior Partners</strong>, which on <a href="https://web.archive.org/web/20231102135101/https://kmong.com/@%EC%97%91%EC%85%80%EC%8B%9C%EC%96%B4%ED%8C%8C%ED%8A%B8%EB%84%88%EC%8A%A4" target="_blank" rel="noopener"><u>Kmong</u></a> (a Korean service marketplace, hosting the advertisement of specialized services by freelancers, or agencies) advertised the sale of language-specific promotional packages. Each of the packages exclusively listed PAPERWALL domains as the “major local media” on which paid editorial content could be placed.</li>
<li>A second Korean company called <strong>AN&amp;ON</strong>, which <a href="https://web.archive.org/web/20231106081136/https://www.annon.co.kr/asianeurope" target="_blank" rel="noopener"><u>advertised</u></a> country-specific promotional packages on its own website in a similar way to Excelsior Partners. The domains listed were, also in this case, PAPERWALL ones.</li>
<li>A Chinese company, called <a href="https://web.archive.org/web/20230623201122/https://bibkcn.com/promote-bibk-php/" target="_blank" rel="noopener"><u><strong>Coin Blog</strong>, also known as</u> <strong><u>BIBK</u></strong></a>, equally selling paid editorial content placement on several confirmed PAPERWALL domains.</li>
</ul><p>However, <strong>we could identify digital infrastructure linkages between Haimai and PAPERWALL</strong>. Specifically, the two earliest registered PAPERWALL domains, updatenews[.]info and wdpp[.]org, hosted a <strong>Google AdSense ID</strong> linking them to Haimai’s official website, hmedium[.]com, and to a second website directly related to it. AdSense IDs are <a href="https://support.google.com/adsense/answer/105516?hl=en" target="_blank" rel="noopener"><u>unique identifiers for a website operator’s AdSense account</u></a>.</p>
<p>This is therefore an incriminating finding, proving that both PAPERWALL domains had been set up by the same operators as the Haimai assets.</p>
<p>A review of the source code for <strong>updatenews[.]info</strong> and <strong>wdpp[.]org</strong> revealed the presence on both websites of the Google AdSense ID <strong>ca-pub-5378976189690174</strong>.</p>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17-1024x221.png&amp;nocache=1" alt="Figure 17: Excerpts of source code from updatenews[.]info (top) and wdpp[.]org (bottom), both displaying the AdSense ID ca-pub-5378976189690174." width="640" height="138" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 17" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17-1024x221.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17-300x65.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17-768x166.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17-605x131.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17-297x64.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17-500x108.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17-180x39.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-17.png&amp;nocache=1 1418w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 17: Excerpts of source code from updatenews[.]info (top) and wdpp[.]org (bottom), both displaying the AdSense ID ca-pub-5378976189690174</figcaption></figure>After conducting a reverse search on this AdSense ID, we could find it on two additional websites: <strong>hmedium[.]com</strong> and <strong>sun-sem[.]com</strong>. The former is Haimai’s official website, as reported also by the Korean NCSC; the latter appears to be a secondary website directly connected to hmedium[.]com: it uses the same splash image and text on its homepage, and offers similar promotional services on foreign media.
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18-1024x467.png&amp;nocache=1" alt="Results of a reverse search for websites using the Google AdSense ID ca-pub-5378976189690174 via DNSlytics, a freely available online tool, showing the two previously identified PAPERWALL websites, as well as the official Haimai website, and a secondary one directly related to it" width="640" height="292" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 18" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18-1024x467.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18-300x137.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18-768x350.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18-605x276.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18-297x135.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18-500x228.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18-180x82.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-18.png&amp;nocache=1 1412w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 18: Results of a reverse <a href="https://search.dnslytics.com/search?d=domains&amp;q=ca-pub-5378976189690174" target="_blank" rel="noopener"><u>search</u></a> for websites using the Google AdSense ID ca-pub-5378976189690174 via DNSlytics, a freely available online tool, showing the two previously identified PAPERWALL websites, as well as the official Haimai website, and a secondary one directly related to it</figcaption></figure>
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19-1024x294.png&amp;nocache=1" alt="Homepages of Haimai’s official website, hmedium[.]com (left), and of sun-sem[.]com (right)" width="640" height="184" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 19" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19-1024x294.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19-300x86.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19-768x220.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19-605x174.png&amp;nocache=1 605w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19-297x85.png&amp;nocache=1 297w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19-500x143.png&amp;nocache=1 500w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19-180x52.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-19.png&amp;nocache=1 1332w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 19: Homepages of Haimai’s official website, hmedium[.]com (left), and of sun-sem[.]com (right)</figcaption></figure><strong>Haimai</strong>, short for <strong>Shenzhen Haimaiyunxiang Media Co., Ltd.</strong> (深圳市海卖云享传媒有限公司), is a Shenzhen-based PR and marketing firm, ostensibly established in 2019, according to <a href="https://web.archive.org/web/20240115101633/https://xinyong.1688.com/credit/publicCreditDetail.htm?spm=a262es.8215285.0.0.7a497fd9ama0G5&amp;id=440000%2501e0ac7e88b0123f30d84569b43e616355%25012019103012435100008385&amp;name=%E6%B7%B1%E5%9C%B3%E5%B8%82%E6%B5%B7%E5%8D%96%E4%BA%91%E4%BA%AB%E4%BC%A0%E5%AA%92%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8&amp;acnt=&amp;idNumber=91440300MA5FWMCHX7" target="_blank" rel="noopener"><u>publicly available records</u></a>. On its website, the company advertises the sale of promotional placement services in multiple countries and languages.
<figure><p><a href="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20.png&amp;nocache=1"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20-1024x701.png&amp;nocache=1" alt="Figure 20: part of the country-focused promotional packages advertised by Haimai on its own official website (automatically translated in Google Chrome)." width="640" height="438" title="PAPERWALL: Chinese Websites Posing as Local News Outlets Target Global Audiences with Pro-Beijing Content 20" srcset="https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20-1024x701.png&amp;nocache=1 1024w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20-300x205.png&amp;nocache=1 300w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20-768x526.png&amp;nocache=1 768w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20-497x340.png&amp;nocache=1 497w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20-291x199.png&amp;nocache=1 291w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20-405x277.png&amp;nocache=1 405w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20-180x123.png&amp;nocache=1 180w, https://citizenlab.ca/wp-content/webpc-passthru.php?src=https://citizenlab.ca/wp-content/uploads/2024/02/figure-20.png&amp;nocache=1 1204w" sizes="(max-width: 640px) 100vw, 640px"></a></p><figcaption>Figure 20: part of the country-focused promotional packages advertised by Haimai on its own official website (automatically translated in Google Chrome)</figcaption></figure>
<h2 id="conclusions">Conclusions</h2>
<p>PAPERWALL is a large, and <a href="#n6tlqhpo9wo1"><u>fast growing</u></a>, network of anonymous websites posing as local news outlets while pushing both commercial and political content aligned with Beijing’s views to a variety of European, Asian, and Latin American audiences.</p>
<p>The campaign is an example of a <strong>sprawling influence operation</strong> serving both financial and political interests, and <strong>in alignment with Beijing’s political agenda</strong>. By observing the minimal traffic towards the network’s websites that is measurable through open source tools<a id="fnref2" role="doc-noteref" href="#fn2"><sup>2</sup></a>, and the lack of visible mainstream media coverage (including on news aggregators, such as for example Google News) or social media amplification, we can assess the <strong>impact of the campaign as negligible so far</strong>.</p>
<p>This assessment, however, as well as the large amount of seemingly benign commercial content wrapping the aggressively political one within the PAPERWALL network, should not be taken to indicate that such a campaign is harmless. Seeding pieces of disinformation and targeted attacks within much larger quantities of irrelevant or even unpopular content is a <a href="https://secondaryinfektion.org/" target="_blank" rel="noopener"><u>known modus operandi in the context of influence operations</u></a>, which can eventually pay enormous dividends once one of those fragments is eventually picked up and legitimized by mainstream press or <a href="https://www.theguardian.com/uk-news/2019/dec/07/russia-involved-in-leak-of-papers-saying-nhs-is-for-sale-says-reddit" target="_blank" rel="noopener"><u>political figures</u></a>.</p>
<p>Finally, the role and prominence of private firms in creating and managing influence operations is <a href="https://en.wikipedia.org/wiki/Influence-for-hire" target="_blank" rel="noopener"><u>hardly news</u></a>. However, since the early days of <a href="https://www.timesofisrael.com/who-is-behind-israels-archimedes-group-banned-by-facebook-for-election-fakery/" target="_blank" rel="noopener"><u>research</u></a> in this space, the disinformation-for-hire industry has <a href="https://www.nytimes.com/2021/07/25/world/europe/disinformation-social-media.html" target="_blank" rel="noopener"><u>boomed</u></a>, leading to findings and disruptions in countries around the world (for a few examples, in <a href="https://about.fb.com/wp-content/uploads/2020/11/October-2020-CIB-Report.pdf" target="_blank" rel="noopener"><u>Myanmar</u></a>, <a href="https://medium.com/dfrlab/facebook-removes-assets-connected-to-brazilian-marketing-firms-56ccefadd653" target="_blank" rel="noopener"><u>Brazil</u></a>, the <a href="https://about.fb.com/news/2019/08/cib-uae-egypt-saudi-arabia/" target="_blank" rel="noopener"><u>UAE, Egypt and Saudi Arabia</u></a>). China – previously <a href="https://www.theguardian.com/australia-news/2023/aug/30/meta-facebook-instagram-shuts-down-spamouflage-network-china-foreign-influence#:~:text=which%20at%20times%20appeared%20to%20collaborate%20with%20private%20Chinese%20companies." target="_blank" rel="noopener"><u>exposed</u></a> for having resorted to this proxy category in large influence operations, including the cited <a href="https://www.mandiant.com/resources/blog/pro-prc-information-operations-campaign-haienergy" target="_blank" rel="noopener"><u>HaiEnergy</u></a> – is now increasingly benefiting from this operating model, which maintains a thin veil of plausible deniability, while ensuring a broad dissemination of the political messaging. It is safe to assume that PAPERWALL will not be the last example of a partnership between private sector and government in the context of Chinese influence operations.</p>
<h2 id="acknowledgments">Acknowledgments</h2>
<p>Special thanks to Jakub Dałek for his research support. Thanks to John Scott-Railton, Emma Lyon, Pellaeon Lin, Siena Anstis, and Céline Bauwens for their peer review and assistance. We would like to thank Melissa Chan for helpful recommendations. Research for this project was supervised by Ron Deibert.</p>
<h2 id="appendix">Appendix</h2>
<h3 id="confirmed-domains">Confirmed Domains</h3>
<figure><table headertable="true"><colgroup><col><col></colgroup><thead><tr><th><strong>DOMAIN</strong></th>
<th><strong>TARGET COUNTRY</strong></th>
</tr></thead><tbody><tr><td>usa-aa[.]com</td>
<td><strong>[undetermined]</strong></td>
</tr><tr><td>doloreshoy[.]co</td>
<td><strong>[undetermined]</strong></td>
</tr><tr><td>splinsider[.]com</td>
<td><strong>[undetermined]</strong></td>
</tr><tr><td>garagumsowda[.]com</td>
<td><strong>[undetermined]</strong></td>
</tr><tr><td>laplatapost[.]com</td>
<td><strong>AR</strong></td>
</tr><tr><td>lujanexpresar[.]com</td>
<td><strong>AR</strong></td>
</tr><tr><td>wienbuzz[.]com</td>
<td><strong>AT</strong></td>
</tr><tr><td>boicpost[.]com</td>
<td><strong>BE</strong></td>
</tr><tr><td>brasilindustry[.]com</td>
<td><strong>BR</strong></td>
</tr><tr><td>brmingpao[.]com</td>
<td><strong>BR</strong></td>
</tr><tr><td>financeiropost[.]com</td>
<td><strong>BR</strong></td>
</tr><tr><td>goiasmine[.]com</td>
<td><strong>BR</strong></td>
</tr><tr><td>pauloexpressar[.]com</td>
<td><strong>BR</strong></td>
</tr><tr><td>pernambucostar[.]com</td>
<td><strong>BR</strong></td>
</tr><tr><td>rioninepage[.]com</td>
<td><strong>BR</strong></td>
</tr><tr><td>swisshubnews[.]com</td>
<td><strong>CH</strong></td>
</tr><tr><td>sanrafaelscoop[.]com</td>
<td><strong>CL</strong></td>
</tr><tr><td>martapost[.]com</td>
<td><strong>CO</strong></td>
</tr><tr><td>bohemiadaily[.]com</td>
<td><strong>CZ</strong></td>
</tr><tr><td>frankfurtsta[.]com</td>
<td><strong>DE</strong></td>
</tr><tr><td>munichnp[.]com</td>
<td><strong>DE</strong></td>
</tr><tr><td>dkindustry[.]co</td>
<td><strong>DK</strong></td>
</tr><tr><td>lguazu[.]com</td>
<td><strong>EC</strong></td>
</tr><tr><td>andregaceta[.]com</td>
<td><strong>ES</strong></td>
</tr><tr><td>cordovapress[.]org</td>
<td><strong>ES</strong></td>
</tr><tr><td>sevillatimes[.]com</td>
<td><strong>ES</strong></td>
</tr><tr><td>tarragonapost[.]com</td>
<td><strong>ES</strong></td>
</tr><tr><td>guellherald[.]com</td>
<td><strong>ES</strong></td>
</tr><tr><td>suomiexpress[.]com</td>
<td><strong>FI</strong></td>
</tr><tr><td>frnewsfeed[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>froneplus[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>friendlyparis[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>alpsbiz[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>economyfr[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>eiffelpost[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>fftribune[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>louispress[.]org</td>
<td><strong>FR</strong></td>
</tr><tr><td>provencedaily[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>rmtcityfr[.]com</td>
<td><strong>FR</strong></td>
</tr><tr><td>doyletimes[.]com</td>
<td><strong>IE</strong></td>
</tr><tr><td>napolimoney[.]com</td>
<td><strong>IT</strong></td>
</tr><tr><td>italiafinanziarie[.]com</td>
<td><strong>IT</strong></td>
</tr><tr><td>milanomodaweekly[.]com</td>
<td><strong>IT</strong></td>
</tr><tr><td>romajournal[.]org</td>
<td><strong>IT</strong></td>
</tr><tr><td>torinohuman[.]com</td>
<td><strong>IT</strong></td>
</tr><tr><td>veneziapost[.]com</td>
<td><strong>IT</strong></td>
</tr><tr><td>dy-press[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>fujiyamatimes[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>fukuitoday[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>fukuoka-ken[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>ginzadaily[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>hokkaidotr[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>kanagawa-ken[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>meiji-mura[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>nihondaily[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>nikkonews[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>saitama-ken[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>sendaishimbun[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>tokushima-ken[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>tokyobuilder[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>yamatocore[.]com</td>
<td><strong>JP</strong></td>
</tr><tr><td>bucheontech[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>busanonline[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>cctimes[.]org</td>
<td><strong>KR</strong></td>
</tr><tr><td>chungjutravel[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>chungnamonline[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>daegujournal[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>daejeontraffic[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>gangwonculture[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>gwangjuedu[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>gyeonggidaily[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>gyeongpe[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>incheonfocus[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>jejutr[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>jeontoday[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>krectimes[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>seoulpr[.]com</td>
<td><strong>KR</strong></td>
</tr><tr><td>ulsanindustry[.]com</td>
<td>KR</td>
</tr><tr><td>gauljournal[.]com</td>
<td><strong>LU</strong></td>
</tr><tr><td>olmecpress[.]com</td>
<td><strong>MX</strong></td>
</tr><tr><td>teotihuacaneco[.]com</td>
<td><strong>MX</strong></td>
</tr><tr><td>xochimilcolife[.]com</td>
<td><strong>MX</strong></td>
</tr><tr><td>greaterdutch[.]com</td>
<td><strong>NL</strong></td>
</tr><tr><td>nlpress[.]org</td>
<td><strong>NL</strong></td>
</tr><tr><td>vikingun[.]org</td>
<td><strong>NO</strong></td>
</tr><tr><td>bydgoszczdaily[.]com</td>
<td><strong>PL</strong></td>
</tr><tr><td>wawelexpress[.]com</td>
<td><strong>PL</strong></td>
</tr><tr><td>ptnavigat[.]com</td>
<td><strong>PT</strong></td>
</tr><tr><td>baleadimineata[.]com</td>
<td><strong>RO</strong></td>
</tr><tr><td>rogazette[.]com</td>
<td><strong>RO</strong></td>
</tr><tr><td>aksaydaily[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>ekaterintech[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>findmoscow[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>gorodbusiness[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>kazanculture[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>rostovlife[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>samaraindustry[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>stptb[.]org</td>
<td><strong>RU</strong></td>
</tr><tr><td>tulunet[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>volgogradpost[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>balasaguntimes[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>ismoili[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>buranadaily[.]com</td>
<td><strong>RU</strong></td>
</tr><tr><td>wakhan[.]org</td>
<td><strong>RU</strong></td>
</tr><tr><td>luddpress[.]com</td>
<td><strong>SE</strong></td>
</tr><tr><td>kopetbiz[.]com</td>
<td><strong>TR</strong></td>
</tr><tr><td>balasagunherald[.]com</td>
<td><strong>TR</strong></td>
</tr><tr><td>taurustimes[.]com</td>
<td><strong>TR</strong></td>
</tr><tr><td>anadoluha[.]com</td>
<td><strong>TR</strong></td>
</tr><tr><td>araratdaily[.]com</td>
<td><strong>TR</strong></td>
</tr><tr><td>cappadociapost[.]org</td>
<td><strong>TR</strong></td>
</tr><tr><td>bmhtoday[.]com</td>
<td><strong>UK</strong></td>
</tr><tr><td>benmorning[.]com</td>
<td><strong>UK</strong></td>
</tr><tr><td>britishft[.]com</td>
<td><strong>UK</strong></td>
</tr><tr><td>conanfinance[.]com</td>
<td><strong>UK</strong></td>
</tr><tr><td>deiniolnews[.]com</td>
<td><strong>UK</strong></td>
</tr><tr><td>euleader[.]org</td>
<td><strong>UK</strong></td>
</tr><tr><td>glasgowtr[.]com</td>
<td><strong>UK</strong></td>
</tr><tr><td>londonclup[.]com</td>
<td><strong>UK</strong></td>
</tr><tr><td>ulstergrowth[.]com</td>
<td><strong>UK</strong></td>
</tr><tr><td>vtnay[.]org</td>
<td><strong>UK</strong></td>
</tr><tr><td>wdpp[.]org</td>
<td><strong>UK</strong></td>
</tr><tr><td>updatenews[.]info</td>
<td><strong>US</strong></td>
</tr></tbody></table></figure><h3 id="targeted-countries">Targeted Countries</h3>
<figure><table headertable="true"><thead><tr><th>Country</th>
<th>Number of PAPERWALL Websites</th>
</tr></thead><tbody><tr><td>South Korea</td>
<td>17</td>
</tr><tr><td>Japan</td>
<td>15</td>
</tr><tr><td>Russia</td>
<td>15</td>
</tr><tr><td>UK (including Scotland, Northern Ireland specific targeting)</td>
<td>11</td>
</tr><tr><td>France</td>
<td>10</td>
</tr><tr><td>Brazil</td>
<td>7</td>
</tr><tr><td>Turkey</td>
<td>6</td>
</tr><tr><td>Italy</td>
<td>6</td>
</tr><tr><td>Spain</td>
<td>5</td>
</tr><tr><td>Mexico</td>
<td>3</td>
</tr><tr><td>Romania</td>
<td>2</td>
</tr><tr><td>Poland</td>
<td>2</td>
</tr><tr><td>The Netherlands</td>
<td>2</td>
</tr><tr><td>Germany</td>
<td>2</td>
</tr><tr><td>Argentina</td>
<td>2</td>
</tr><tr><td>USA</td>
<td>1</td>
</tr><tr><td>Sweden</td>
<td>1</td>
</tr><tr><td>Portugal</td>
<td>1</td>
</tr><tr><td>Norway</td>
<td>1</td>
</tr><tr><td>Luxembourg</td>
<td>1</td>
</tr><tr><td>Ireland</td>
<td>1</td>
</tr><tr><td>Finland</td>
<td>1</td>
</tr><tr><td>Ecuador</td>
<td>1</td>
</tr><tr><td>Denmark</td>
<td>1</td>
</tr><tr><td>Czech Republic</td>
<td>1</td>
</tr><tr><td>Colombia</td>
<td>1</td>
</tr><tr><td>Chile</td>
<td>1</td>
</tr><tr><td>Switzerland</td>
<td>1</td>
</tr><tr><td>Belgium</td>
<td>1</td>
</tr><tr><td>Austria</td>
<td>1</td>
</tr></tbody></table></figure>
<h3 id="high-confidence-host-ip-addresses">High-Confidence Host IP Addresses</h3>
<h4 id="paperwall-domains">PAPERWALL Domains</h4>
<figure><table headertable="true"><colgroup><col><col><col><col></colgroup><thead><tr><th><strong>IP</strong></th>
<th><strong>PROVIDER</strong></th>
<th><strong># OF PAPERWALL DOMAINS</strong></th>
<th><strong>AS Number</strong></th>
</tr></thead><tbody><tr><td>162.62.225[.]65</td>
<td>Tencent Cloud</td>
<td>24</td>
<td>132203</td>
</tr><tr><td>43.163.221[.]160</td>
<td>Tencent Cloud</td>
<td>17</td>
<td>132203</td>
</tr><tr><td>43.155.173[.]104</td>
<td>Tencent Cloud</td>
<td>17</td>
<td>132203</td>
</tr><tr><td>43.153.75[.]48</td>
<td>Tencent Cloud</td>
<td>12</td>
<td>132203</td>
</tr><tr><td>49.51.49[.]54</td>
<td>Tencent Cloud</td>
<td>12</td>
<td>132203</td>
</tr><tr><td>43.157.63[.]199</td>
<td>Tencent Cloud</td>
<td>10</td>
<td>132203</td>
</tr><tr><td>170.106.196[.]76</td>
<td>Tencent Cloud</td>
<td>7</td>
<td>132203</td>
</tr><tr><td>43.157.58[.]203</td>
<td>Tencent Cloud</td>
<td>7</td>
<td>132203</td>
</tr></tbody></table></figure><h4 id="times-newswire-1">Times Newswire</h4>
<figure><table headertable="true"><colgroup><col><col><col></colgroup><thead><tr><th><strong>IP</strong></th>
<th><strong>PROVIDER</strong></th>
<th><strong>AS Number</strong></th>
</tr></thead><tbody><tr><td>43.153.106[.]236</td>
<td>Tencent Cloud</td>
<td>132203</td>
</tr></tbody></table></figure><section id="footnotes" role="doc-endnotes"><hr><ol><li id="fn1">We are redacting this domain name as it appeared on one of the shared DNS IP addresses only two months after a PAPERWALL domain was last seen on it, and it seems to belong to a legitimate business with no obvious connections to the network.<a role="doc-backlink" href="#fnref1">↩︎</a></li>
<li id="fn2">We utilized <a href="https://hypestat.com/" target="_blank" rel="noopener"><u>hypestat.com</u></a>, a web platform (and browser extension) measuring daily and monthly traffic to websites. The vast majority of the PAPERWALL domains did not even appear in the platform’s database, indicating that their traffic was most likely negligible. Some, such as the generic, English language ones (for example, wdpp[.]org or euleader[.]org) showed an average of about 50 daily visitors.<a role="doc-backlink" href="#fnref2">↩︎</a></li>
</ol></section>
                </section>
                                 
              </article> 
						
												

			</section>
		</main>
			 </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Improve cognitive focus in 1 minute (288 pts)]]></title>
            <link>https://oneminutefocus.com</link>
            <guid>39288039</guid>
            <pubDate>Wed, 07 Feb 2024 13:03:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://oneminutefocus.com">https://oneminutefocus.com</a>, See on <a href="https://news.ycombinator.com/item?id=39288039">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Look at the dot (and breathe) for just 1 minute to improve mental focus for your next task</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Toyota to invest $1.3B in Kentucky factory to build battery packs and new EV (134 pts)]]></title>
            <link>https://apnews.com/article/toyota-investment-georgetown-kentucky-factory-9d8142fb9d92ead0f895dd6f3d9fe215</link>
            <guid>39287641</guid>
            <pubDate>Wed, 07 Feb 2024 12:17:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://apnews.com/article/toyota-investment-georgetown-kentucky-factory-9d8142fb9d92ead0f895dd6f3d9fe215">https://apnews.com/article/toyota-investment-georgetown-kentucky-factory-9d8142fb9d92ead0f895dd6f3d9fe215</a>, See on <a href="https://news.ycombinator.com/item?id=39287641">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                                        <p>GEORGETOWN, Ky. (AP) — Toyota says it will invest $1.3 billion at its huge factory complex in Georgetown, Kentucky, in part so it can build an all-new three-row electric SUV to be sold in the U.S.</p><p>The company says the money will help with future electric vehicle production, including the addition of a line to assemble battery cells into packs for other EVs. But it won’t add any new jobs to the complex, which now employs nearly 9,400 workers.</p><p>The investment brings to nearly $10 billion the amount of money that Toyota has spent at the plant, the company said in a statement Tuesday.</p>
    

<p>Toyota wouldn’t give further details about the new SUV, including its price or when it would arrive in showrooms.</p><p>In October Toyota said it would <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/toyota-electric-vehicle-battery-north-carolina-e7e632750bbca5a0b244021c1213aa66" target="_blank" rel="noopener">invest another $8 billion</a></span> at a hybrid and electric vehicle battery factory it’s building in North Carolina, more than doubling previous investments and the expected number of new jobs.</p><p>The company now expects the plant to employ more than 5,000 people when it begins operations near Greensboro in 2025. Toyota has put about $13.9 billion into the plant, which will be a key supplier for the Kentucky factory that will build the company’s first U.S.-made electric vehicles.</p><p>Environmental groups have long criticized Toyota for being slow to move toward fully electric vehicles, instead clinging to gas-electric hybrid technology. The company has a goal of selling 1.5 million to 1.8 million electric or hybrid vehicles in the U.S. by 2030. </p>
                                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Neal Stephenson's Most Stunning Prediction (114 pts)]]></title>
            <link>https://www.theatlantic.com/technology/archive/2024/02/chatbots-ai-neal-stephenson-diamond-age/677364/</link>
            <guid>39287616</guid>
            <pubDate>Wed, 07 Feb 2024 12:14:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theatlantic.com/technology/archive/2024/02/chatbots-ai-neal-stephenson-diamond-age/677364/">https://www.theatlantic.com/technology/archive/2024/02/chatbots-ai-neal-stephenson-diamond-age/677364/</a>, See on <a href="https://news.ycombinator.com/item?id=39287616">Hacker News</a></p>
<div id="readability-page-1" class="page"><section data-event-module="article body" data-flatplan-body="true"><p data-flatplan-paragraph="true">Science fiction, when revisited years later, sometimes doesn’t come across as all that fictional. Speculative novels have an impressive track record at prophesying what innovations are to come, and how they might upend the world: H. G. Wells wrote about an atomic bomb <a data-event-element="inline link" href="https://thebulletin.org/virtual-tour/h-g-wells-novel-the-world-set-free-predicts-atomic-warfare/">decades</a> before World War II, and Ray Bradbury’s 1953 novel, <em>Fahrenheit 451</em>, features devices we’d describe today as Bluetooth earbuds.</p><p data-flatplan-paragraph="true">Perhaps no writer has been more clairvoyant about our current technological age than Neal Stephenson. His novels coined the term <a data-event-element="inline link" href="https://www.theatlantic.com/technology/archive/2021/10/facebook-metaverse-name-change/620449/"><em>metaverse</em></a>, laid the conceptual groundwork for cryptocurrency, and imagined a geoengineered planet. And nearly three decades before the release of ChatGPT, he presaged the current AI revolution. A core element of one of his early novels, <a data-event-element="inline link" href="https://bookshop.org/p/books/the-diamond-age-or-a-young-lady-s-illustrated-primer-neal-stephenson/8466804?ean=9780553380965"><em>The Diamond Age: Or, a Young Lady’s Illustrated Primer</em></a>, is a magical book that acts as a personal tutor and mentor for a young girl, adapting to her learning style—in essence, it is a personalized and ultra-advanced chatbot. The titular Primer speaks aloud in the voice of a live actor, known as a “ractor”—evoking how today’s generative AI, like many digital technologies, is highly dependent on humans’ creative labor.</p><p data-flatplan-paragraph="true">Stephenson’s book, published in 1995, explores a future of seamless, instant digital communication, in which tiny computers with immense capabilities are embedded in everyday life. Corporations are dominant, news and ads are targeted, and screens are omnipresent. It’s a world of stark class and cultural divisions (the novel follows a powerful aristocratic sect that styles itself as the “neo-Victorians”), but it’s nevertheless one in which the Primer is presented as the best of what technology can be.</p><div data-view-action="view - affiliate module" data-view-label="The Diamond Age - Or, A Young Lady's Illustrated Primer"><a href="https://bookshop.org/a/12476/9780553380965" rel="noopener noreferrer" data-label="The Diamond Age - Or, A Young Lady's Illustrated Primer" data-action="click link - affiliate module - book cover" target="_blank"><picture><img alt="" loading="lazy" srcset="https://cdn.theatlantic.com/thumbor/_aJ4Wu7AjhqyF1LXSpUqnrEb5wQ=/0x0:314x500/75x120/media/img/book_reviews/2024/02/06/51rcc5qqVFL._SL500_-1/original.jpg, https://cdn.theatlantic.com/thumbor/IvJmcJQZJS_qKYl6GLhEwy40GAA=/0x0:314x500/150x240/media/img/book_reviews/2024/02/06/51rcc5qqVFL._SL500_-1/original.jpg 2x" src="https://cdn.theatlantic.com/thumbor/_aJ4Wu7AjhqyF1LXSpUqnrEb5wQ=/0x0:314x500/75x120/media/img/book_reviews/2024/02/06/51rcc5qqVFL._SL500_-1/original.jpg" width="75" height="120"></picture></a></div><p data-flatplan-paragraph="true">But Stephenson is far more pessimistic about today’s AI than he was about the Primer. “A chatbot is not an oracle,” he told me over Zoom last Friday. “It’s a statistics engine that creates sentences that sound accurate.” I spoke with Stephenson about his uncannily prescient book and the generative-AI revolution that has seemingly begun.</p><p data-flatplan-paragraph="true"><em>This conversation has been edited for length and clarity.</em></p><hr><p data-flatplan-paragraph="true"><strong>Matteo Wong:</strong> <em>The Young Lady’s Illustrated Primer</em> is a book that adapts to and teaches a young girl, which seems to resonate with the vision of AI chatbots and assistants that many companies have for the near future. Did you set out to explore the idea of an intelligent machine in imagining the Primer?</p><p data-flatplan-paragraph="true"><strong>Neal Stephenson:</strong> The idea came to me after we had a kid and got this mobile that was designed to suspend over the crib. It had very primitive, simple shapes on it because, when they’re newborns, their visual systems can’t resolve fine details. So there would be a square and a triangle and a circle. And then, after a certain number of days or weeks had gone by, you were supposed to pop those cards off of the mobile and snap on a different set that had a more appropriate fit for what their brains were capable of at that age. That just got me to thinking: <em>What if you extended that idea to every other form of intellectual growth?</em></p><p data-flatplan-paragraph="true">The technology that drives the book wasn’t really AI as we think of it now—I was talking to people who were working on some of the underlying technologies that would be needed to communicate on the internet in a secure, anonymous manner. I guess it’s implicit that there’s an AI in there that’s generating the story and increasing the degree of sophistication in response to the learning curve of the child, but I didn’t really go into that very much; I just kind of assumed it would be there.</p><p data-flatplan-paragraph="true"><strong>Wong:</strong> A lot of companies today—OpenAI, Google, Meta, to name a few—have said they want to build AI assistants that adapt to each user, somewhat like how the Primer acts as a teacher. Do you see anything in the generative-AI models of today that resembles or could one day become like the Primer?</p><p data-flatplan-paragraph="true"><strong>Stephenson:</strong> About a year ago, I worked with a start-up that makes AI characters in video games. I found it rewarding and fascinating because of the hallucinations: I could see how new patterns emerged from the soup of inputs being fed to it. The same thing that I consider to be a feature is a bug in most applications. We’ve already seen examples of lawyers who use ChatGPT to create legal documents, and the AI just fabricated past cases and precedents that seemed completely plausible. When you think about the idea of trying to make use of these models in education, this becomes a bug too. What they do is generate sentences that sound like correct sentences, but there’s no underlying brain that can actually discern whether those sentences are correct or not.</p><p id="injected-recirculation-link-0" data-view-action="view link - injected link - item 1" data-event-element="injected link" data-event-position="1"><a href="https://www.theatlantic.com/technology/archive/2022/12/openai-chatgpt-writing-high-school-english-essay/672412/">Read: The end of high-school English</a></p><p data-flatplan-paragraph="true">Think about any concept that we might want to teach somebody—for instance, the Pythagorean theorem. There must be thousands of old and new explanations of the Pythagorean theorem online. The real thing we need is to understand each child’s learning style so we can immediately connect them to the one out of those thousands that is the best fit for how they learn. That to me sounds like an AI kind of project, but it’s a different kind of AI application from DALL-E or large language models.</p><p data-flatplan-paragraph="true"><strong>Wong:</strong> And yet, today, those language models, which fundamentally predict words in a sequence, are being applied to many areas where they have no specialized abilities—GPT-4 for medical diagnosis, Google Bard as a tutor. That reminds me of a term used in the book instead of <em>artificial intelligence</em>, <em>pseudo-intelligence</em>, which many critics of the technology might appreciate today.</p><p data-flatplan-paragraph="true"><strong>Stephenson:</strong> I’d forgotten about that. The running gag of that book was applying Victorian diction and prejudices to high-tech things. What was probably going through my mind was that Victorians would look askance at the term <em>artificial intelligence</em>, because they would be offended by the idea that computers could replace human brains. So they would probably want to bracket the idea as a simulation, or a “pseudo” intelligence, as opposed to the real thing.</p><p data-flatplan-paragraph="true"><strong>Wong:</strong> About a year ago, in an <a data-event-element="inline link" href="https://www.ft.com/content/0ecab009-6543-4386-b936-0eecc9293d2e">interview</a> with the <em>Financial Times</em>, you called the outputs of generative AI “hollow and uninteresting.” Why was that, and has your assessment changed?</p><p data-flatplan-paragraph="true"><strong>Stephenson:</strong> I suspect that what I had in mind when I was making those remarks was the current state of image-generating technology. There were a few things about that rubbing me the wrong way, the biggest being that they are benefiting from the uncredited work of thousands of real human artists. I’m going to exaggerate slightly, but it seems like one of the first applications of any new technology is making things even shittier for artists. That’s certainly happened with music. These image-generation systems just seemed like that was mechanized and weaponized on an inconceivable scale.</p><p id="injected-recirculation-link-1" data-view-action="view link - injected link - item 2" data-event-element="injected link" data-event-position="2"><a href="https://www.theatlantic.com/technology/archive/2023/09/books3-database-generative-ai-training-copyright-infringement/675363/">Read: These 183,000 books are fueling the biggest fight in publishing and tech</a></p><p data-flatplan-paragraph="true">Another part of it was that a lot of people who got excited about this early on just generated huge volumes of material and put them out willy-nilly on the internet. If your only way of making a painting is to actually dab paint laboriously onto a canvas, then the result might be bad or good, but at least it’s the result of a whole lot of micro-decisions you made as an artist. You were exercising editorial judgment with every paint stroke. That is absent in the output of these programs.</p><p data-flatplan-paragraph="true"><strong>Wong:</strong> Even in <em>The Diamond Age</em>, the Primer seems to provide commentary on artists’ labor and tech, which is very relevant to generative AI today. The Primer teaches a girl, but a human actor digitally connected to the book has to voice the text aloud.</p><p data-flatplan-paragraph="true"><strong>Stephenson:</strong> If you’re a conventional actor onstage or in film, you stand in front of a camera, you perform once, and then lots of copies can be made. In the book, I thought it was a pretty positive vision of the future, where we have the technology that would enable voice actors to in effect give live performances on demand, all the time. Even with today’s voice clones, if you break it down to its simplest element, there’s still a human who sat in front of a microphone and provided this material. Although I guess a system like the Primer might not work live; you would probably have some lag—the AI is generating the text and sending it to the ractor, and then the ractor has to read it.</p><p data-flatplan-paragraph="true"><strong>Wong:</strong> And on the scale that some of today’s AI programs operate on, there just wouldn’t be enough people to do it.</p><p data-flatplan-paragraph="true"><strong>Stephenson:</strong> The scenario I was laying out in <em>The Diamond Age</em> is that the ractors are a scarce resource, and so the Primer is more of a luxury product. But eventually, the source code for the book falls into the hands of a man who wants to manufacture it on a massive scale, and there’s not enough money and not enough actors in the world to voice all those books, so at that point, he decides to use automatically generated voices.</p><p data-flatplan-paragraph="true"><strong>Wong:</strong> Another theme in the novel is how different socioeconomic classes have access to education. The Primer is designed for an aristocrat, but your novel also traces the stories of middle- and working-class girls who interact with versions of the book. Right now a lot of generative AI is free, but the technology is also very expensive to run. How do you think access to generative AI might play out?</p><p data-flatplan-paragraph="true"><strong>Stephenson:</strong> There was a bit of early internet utopianism in the book, which was written during that era in the mid-’90s when the internet was coming online. There was a tendency to assume that when all the world’s knowledge comes online, everyone will flock to it. It turns out that if you give everyone access to the Library of Congress, what they do is watch videos on TikTok. <em>The Diamond Age</em> reflects the same naivete that I shared with a lot of other people back in the day about how all of that knowledge was going to affect society.</p><p data-flatplan-paragraph="true"><strong>Wong:</strong> Do you think we’re seeing some of that naivete today in people looking at how generative AI can be used?</p><p data-flatplan-paragraph="true"><strong>Stephenson: </strong>For sure. It’s based on an understandable misconception as to what these things are doing. A chatbot is not an oracle; it’s a statistics engine that creates sentences that sound accurate. Right now my sense is that it’s like we’ve just invented transistors. We’ve got a couple of consumer products that people are starting to adopt, like the transistor radio, but we don’t yet know how the transistor will transform society. We’re in the transistor-radio stage of AI. I think a lot of the ferment that’s happening right now in the industry is venture capitalists putting money into business plans, and teams that are rapidly evaluating a whole lot of different things that could be done well. I’m sure that some things are going to emerge that I wouldn’t dare try to predict, because the results of the creative frenzy of millions of people is always more interesting than what a single person can think of.</p><div><hr><p>​When you buy a book using a link on this page, we receive a commission. Thank you for supporting<!-- --> <span>The Atlantic.</span></p></div></section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[“Wherever you get your podcasts” is a radical statement (367 pts)]]></title>
            <link>https://www.anildash.com//2024/02/06/wherever-you-get-podcasts/</link>
            <guid>39287163</guid>
            <pubDate>Wed, 07 Feb 2024 11:19:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.anildash.com//2024/02/06/wherever-you-get-podcasts/">https://www.anildash.com//2024/02/06/wherever-you-get-podcasts/</a>, See on <a href="https://news.ycombinator.com/item?id=39287163">Hacker News</a></p>
Couldn't get https://www.anildash.com//2024/02/06/wherever-you-get-podcasts/: Error: Request failed with status code 404]]></description>
        </item>
        <item>
            <title><![CDATA[How would you build an operating system? (SerenityOS with Andreas Kling) (242 pts)]]></title>
            <link>https://corecursive.com/serenity-os-with-andreas-kling/</link>
            <guid>39286638</guid>
            <pubDate>Wed, 07 Feb 2024 10:04:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://corecursive.com/serenity-os-with-andreas-kling/">https://corecursive.com/serenity-os-with-andreas-kling/</a>, See on <a href="https://news.ycombinator.com/item?id=39286638">Hacker News</a></p>
<div id="readability-page-1" class="page"><p><i>Note: This podcast is designed to be heard. If you are able, we strongly encourage you to listen to the
audio, which includes emphasis that’s not on the page</i></p><div>
<h2 id="introduction"><strong>Introduction</strong></h2>
<p><strong>Adam:</strong>
I’m Adam Gordon Bell, and this is CoRecursive. How would you build an operating system? My answer is I wouldn’t. First off, I don’t know how. And the second thing is Googling around, the best estimate seems to be that it took around 2,000 developers to build Windows XP in the 2000s. And that’s just if you can trust random Quora answers. Maybe there was even more people.</p>

<p>But actually, it is possible to build an operating system from scratch. I’ve found an existence proof. I’ve found Andreas Kling. He created SerenityOS starting from an empty Git repository. And I’m running it right now, and I’m looking at it. There’s a web browser, and there’s Solitaire. It’s like an alternate world version of the Windows 95 that I grew up using, built from scratch. Really from scratch. It looks totally familiar, but somehow different.</p>

<p>So today, I find out how he did it, how this is possible. But mainly today, I find out why. Why build an operating system from scratch? And this answer is about addiction and recovery, and about doing something so big that you can sort of reorient your life around it, and kind of come out the other side as a different person. And it all starts in the 2010s when Andreas worked at Apple. So let’s get into it.</p>
<h2 id="apple-and-webkit"><strong>Apple and Webkit</strong></h2>
<p><strong>Adam:</strong>
You hear me through your headphones, right?</p>
<p><strong>Andreas:</strong>
Mm-hmm (affirmative).</p>
<p><strong>Adam:</strong>
Do you have any questions before we start?</p>
<p><strong>Andreas:</strong>
Not really, I guess if my audio is coming through and everything is good on the technical side, then yeah, I’m up for anything.</p>
<p><strong>Adam:</strong>
<em>Andrea’s worked on WebKit, which is what powers Safari. And he first worked remotely for Apple from his native Sweden, where his typical day looked like this:</em></p>
<p><strong>Andreas:</strong>
Waking up really late, partly because it was comfortable, but also because all of my coworkers would wake up in a different time zone anyway. So it all kind of worked out with my morning sleepiness, and then kind of just obsessively working on WebKit and Safari stuff most of the day. Really just sitting at the computer the whole day. I didn’t have a very multifaceted lifestyle back then. It was all work all the time. And when I had a chance to hang out with other people, I would sort of take a break from work by just drinking and doing drugs. Those were the two mode I had. So workaholism or other isms.</p>
<p><strong>Adam:</strong>
<em>That was working in Sweden, but eventually he went to work in Cupertino, and he lived in San Francisco where his life was very different, but also sort of the same.</em></p>
<p><strong>Andreas:</strong>
So I would just wake up in the morning in San Francisco and get myself to the last Apple commute bus. I was the leaving. I think it was at 10:00 the morning or something like that. Ride it down to Cupertino, spend the day in the office just working on whatever we were doing at the time. Usually some kind of performance optimization stuff or benchmark tracking. And I would almost always stay until the very end of the day. So I would grab the very last commute bus home to San Francisco and then come home at 10:00 PM.</p>

<p>It was a fairly intense lifestyle. But at the time, it just seemed like everything I wanted from life. As far as I was concerned, I was living my childhood dream. Right? Because I wanted to be a programmer, and now I was. And I didn’t do anything but, so surely that must be the dream.</p>

<p>Obviously I can see now that it was a very single-minded existence, I guess. I guess it felt at times like I was putting everything else in my life on hold and not really advancing on any other axis other than career. But I guess I told myself that I was living the dream, so there was nothing to fulfill. And that’s how I sort of was able to exist in that state for a while.</p>

<p>I mean, I loved working there for the years that I did at first. It was just towards the end that I got a bit disillusioned. I certainly enjoyed the technical excellence of the people there and getting to work on such tightly integrated solutions and systems was really cool.</p>
<h2 id="owning-the-stack"><strong>Owning the Stack</strong></h2>
<p><strong>Adam:</strong>
<em>One thing he picked up at Apple was a style of development that’s a bit different than what I’m used to. A lot of development today for me seems to be gluing various components together into a working system. But at Apple, everything is in-house. The web browser you use, the system calls you make, maybe even the programming language you use if you’re using Swift. They’re not black boxes, they’re just something made for you by one of your colleagues. You can ask questions, you can make improvements. It’s all just code there in source control.</em></p>
<p><strong>Andreas:</strong>
I still feel that nobody really does that better than Apple. They control the whole stack, and they really take advantage of that. Especially lately with putting out their own CPUs and everything now as well. That’s been really awesome. And I enjoyed learning from that environment what is really possible if you control more of the stack.</p>
<p><strong>Adam:</strong>
<em>That’s going to be a theme in this episode and of SerenityOS really. Control everything, keep it all in one big place, and build it all in-house.</em></p>
<p><em>But the other theme is struggling with escalating drinking and drug use. In Cupertino, Andreas was also going to the bar that’s near the Apple campus most nights and using drugs here and there. But that was really nothing new for him.</em></p>
<h2 id="escalating-drinking-and-drug-use"><strong>Escalating Drinking and Drug Use</strong></h2>
<p><strong>Andreas:</strong>
That was sort of always part of my personality I think. Ever since I was a teenager, I first tried drinking, tried doing drugs. I discovered that I had an endless appetite for them. And when left to my own devices, that’s sort of where I would just naturally drift to. So if there was nothing to keep my attention, I would just end up drinking or end up doing drugs. And I didn’t think too much of it when I was younger because I had this association that it was cool, or that it’s fine, or whatever. Or that it’s not really a problem. I can quit whenever I want, the cliches. And like anybody else, I was totally bought into the cliche of it’s just a casual recreational use, and I can stop whenever.</p>

<p>And I think the two things that drove escalation for me was a much larger paycheck after going into big tech, because big tech pays well. And if you have more money, you can buy bigger and more dangerous drugs. And since that was just my natural tendency, that’s something that I started doing.</p>
<p><strong>Adam:</strong>
So what does that mean? Having a drink at lunch, or does that mean keeping cocaine on your desk? I don’t know.</p>
<p><strong>Andreas:</strong>
The latter.</p>
<p><strong>Adam:</strong>
Yeah.</p>
<p><strong>Andreas:</strong>
Yeah.</p>
<p>It was more like that. But there was a time when it was just a drink at lunch as well. So I’ve been through the whole spectrum, but I don’t know if I ever really felt like I was doing anything wrong until I got to the point of no return and realizing that this is an unsustainable problem. But as I was making my way down the train, I never really thought that maybe this isn’t good. It’s very strange how that works. But now of course with the benefit of hindsight, I can see it more clearly. But if you had asked me at the time, I would probably have just insisted that is just a recreational thing. And what’s the big deal?</p>
<p><strong>Adam:</strong>
It almost sounds like you’re keeping things a secret from yourself to a certain extent.</p>
<p><strong>Andreas:</strong>
Yeah, for sure. For sure. I think that’s necessary if you are habitually doing things that are hurtful to yourself or to other people. Then the way that you manage sustaining that kind of lifestyle where you habitually hurt people, is that you come up with ways to rationalize it or to turn it into something else, which of course is not true. But you learn to lie to yourself.</p>
<p><strong>Adam:</strong>
<em>During this period of slow escalation, of drug use, Andreas moved back to Sweden and went back to working remote.</em></p>
<p><em>I’m a big fan of remote work. But honestly, I feel like there are some psychological dangers to it. Isolation and boredom are known mental health risk factors. I feel like that’s one of the things that makes the story important. How do you know when you’ve gone to a bad place? How do you know when you need to get help?</em></p>
<h2 id="a-trip-to-the-hospital"><strong>A Trip to the Hospital</strong></h2>
<p><strong>Adam:</strong>
<em>For Andreas, things got worse before they got better. He grew a bit detached from his teammates because they were on the opposite side of the world. And eventually, he hit a breaking point, and his family confronted him with an important message.</em></p>
<p><strong>Andreas:</strong>
I was having an unmanageable problem and I was hurting them. And having to face the fact that I’m not just making a mess of my own life, but it affects others.</p>
<p>That was sort of the thing that made me wake up, I guess. Because I think part of what made me able to justify it to myself was that the only one who gets hurt is me. But that’s not really true. That’s never really true, unless you live in complete isolation as a hermit somewhere. You always affect the people around you, but I was kind of oblivious to that until they pointed it out to me.</p>
<p>That’s when I really started to see it for the first time, really started thinking critically about it. And it wasn’t easy, and it took a long time to actually unravel. It took a long time to understand how far gone it actually was.</p>
<p><strong>Adam:</strong>
Did you immediately know that you had to change things or were you like, “Maybe a bit less cocaine, and I’ll be all right.”</p>
<p><strong>Andreas:</strong>
So I think I had a brief phase of bargaining, I guess, like anybody would. I don’t recall anymore, but it was probably several days where I would just go over the possibilities in my head. Maybe I can just do less, or maybe I can just get better at hiding it, or maybe I can just figure out some way out of this whole thing. But one thing for me was that I had already been hiding these things to the best of my ability. Not just from coworkers, but also from my family. So it was shocking to have this thing that was private suddenly become public, even to my family. I didn’t really know how to deal with that gracefully. So I think I just kind of buckled under the psychological pressure, and I didn’t have the strength to try to come up with a plan to hide it better.</p>
<p><strong>Adam:</strong>
<em>So his family took him to the hospital.</em></p>
<p><strong>Andreas:</strong>
The hospital basically flagged me as a person in trouble. And I live in Sweden. So once you get flagged by the government, then they will stay on your case. They don’t let you slip through the cracks so much. That’s how I ended up in a rehab program. They have a very, very serious social safety net here, and they follow up on stuff. So once that happened, I was sort of in the system, and I knew that now I have to do this.</p>
<p><strong>Adam:</strong>
<em>One potential problem of going to the hospital for drug abuse is that it’ll end up on your medical record. Will you get a different standard of care from doctors if they think you’re a drug abuser? Will they be concerned about treating you? This was a turning point for Andreas.</em></p>
<p><strong>Andreas:</strong>
I was sitting in the hospital, and I had to fill out a form where I consented to drug abuse being a sort of a public entry on my permanent medical record. Because they make you decide do you want your future caregivers to have access to this information?</p>
<p>That felt like the real crossroads.</p>
<p>Like okay, so now I decide does this become part of my permanent identity, or is this something that I will try to shuffle onto the rug? And I decided then to just make it public. And then I thought all right, well that was easy. And at that point, I decided that the only way that I can do this in a way that I would trust myself would be to make it completely public.</p>
<p>So I just told everybody and wanted to sort of make it part of my public identity online as well. But of course that took a bit longer to become comfortable with that idea.</p>
<h2 id="rehab"><strong>Rehab</strong></h2>
<p><strong>Adam:</strong>
<em>By this time, he had left Apple, and he was staying with his family, and biking back and forth to outpatient rehab each day. It was a 90 day program.</em></p>
<p><strong>Andreas:</strong>
I guess I felt defeated. That is really I guess how all these 12 step programs start where you admit defeat. That is usually the first up that you have to admit defeat, and that you have lost your ability to manage the situation. And that was really how I felt. So I was sort of a perfect candidate for that type of therapy.</p>

<p>But that’s not to say that everything was roses. I mean of course now, I remember the good parts. But there were really rough parts as well. And one of the things that we had to do in rehab was to try to share with each other, all the people that were there, we had to share with each other a detailed account of all the things that we had and all the mistakes that we had made, and ways we had hurt people and so on. And that was tough, making an honest accounting of that. And I don’t know if I would make it today. It would probably include more things than I was comfortable admitting to back then. So it’s an incremental process I think.</p>
<p><strong>Adam:</strong>
<em>Part of this process was going to Narcotics Anonymous meetings.</em></p>
<p><strong>Andreas:</strong>
One of the most helpful aspects of it, which was really hard to reconcile at first, was meeting a whole bunch of people who had done way worse things than I had. And just meeting people who had murdered somebody, people who had been to prison, or people who had done a hit and run or something like that. All kinds of people that you would never think it when you saw them, but they had this horrible things that they had done in the past. And it was all associated with being under the influence.</p>
<p><strong>Adam:</strong>
<em>I’ve seen these recovery meetings in various movies, Fight Club comes to mind. It was never clear to me how hearing someone else’s tales of debauchery would help you out. But for Andreas, it seemed to work.</em></p>
<p><strong>Andreas:</strong>
At first, I felt guilty for sort of looking at them and thinking, “At least I’m not as bad as that person.” Over time, I realized that that’s just sort of a healing mechanism. And it was funny because somebody that I had judged in this way, when I initially met them later, ended up telling me that they were really uncomfortable with me because they felt like I was way worse than they were. They were happy to have met me because I made them feel better about their own misdeeds. It just goes to show that it’s a really big cacophony of just people finding comfort in just hearing about the exploits of other people. And I guess using it to orient themselves around what they really are.</p>

<p>Because I think when you do a bunch of nonsense let’s call it, it’s hard to be too judgmental of your own nonsense. But when you see other people doing nonsense, it’s much easier to look at that objectively and say, “Well, that’s not good behavior.” And then when you suddenly encounter a lot of these stories of bad behavior, you start to build almost a sense of morality. Once you have that, it’s much easier to eventually relate your own experiences through that sense of morality. That’s something that we talked a lot about in the rehab program that I went to, how addiction leads to a moral bankruptcy basically. And one of the important things to do in rehab and recovery is to help people build a new sense of morality because you have been taking out loans from their morality bank for too long. And they’re just completely bankrupt, right?</p>
<p><strong>Adam:</strong>
<em>Building this new sense of morality and just going to rehab in general, they were a transformational process. But then the 90 days were over.</em></p>
<h2 id="out-of-rehab"><strong>Out of Rehab</strong></h2>
<p><strong>Andreas:</strong>
It was really confusing because I was used to waking up at seven and bicycling over to the rehab place.</p>
<p><strong>Adam:</strong>
<em>This is a dangerous time for people in recovery. He only has a couple months of experience with sober living, and it was all big is around rehab. And now he’s on his own, and he can’t fall back into his old patterns, which leaves him a bit lost.</em></p>
<p><strong>Andreas:</strong>
I was really shocked at first with just how much time there is in a day. Because when you are living in the fast lane so to say, you don’t notice time’s just flying all the time. And normal healthy lifestyle, it’s just a lot of hours in the day. And I really struggled with just coming up with stuff to do. It was a simple existence.</p>

<p>I was also trying to get back in touch with family that I had lost contact with a little bit. So I was borrowing handheld video games from my brother for example. And he just gave me this whole bundle of Nintendo DS games. And I found it hard to talk to him because I was so uncomfortable about having had this secret life. But if I could play these games that he lent me, then I could talk to him about those games. And that was sort of a way to start having a conversation again with each other. So I was just going to meetings and then trying to plow through these Nintendo DS games. That was my life at the time.</p>
<p><strong>Adam:</strong>
<em>Andreas also started getting back into programming.</em></p>
<h2 id="grandfathers-computer"><strong>Grandfather’s Computer</strong></h2>
<p><strong>Andreas:</strong>
I had this old PC that I had made for my grandfather back in 2006, I think. And that was the computer I had access to at this house I was staying. So I would wake up and press the power button on that thing, hope it would boot up one more time. And it was really on its last legs. You had to tilt the computer so that the CPU fan would short circuit the motherboard if you tilted it wrong. So you had to tilt it just right.</p>
<p><strong>Adam:</strong>
That’s awesome.</p>
<p><strong>Andreas:</strong>
I install an old version of Slackware Linux on that thing, sort of era appropriate. I don’t know, Slackware 11 or whatever from 2006, somewhere thereabouts. And I had this pretty slow machine. And then I guess I would just sit at that computer and write random programs until it was time to go to recovery meetings, and then come back and write more programs.</p>
<p><strong>Adam:</strong>
<em>This sober living, it just seemed so different to him. Even programming seemed different.</em></p>
<p><strong>Andreas:</strong>
It was astonishing how much more I could program in a day when I had no distractions. And I was just really clearheaded. And I felt like I was on the precipice of some serious productivity if I just had something to sink it into. That’s sort of when I started tinkering with some of the low level programming projects, which eventually became the Serenity Operating System. But at first, I was really kind of just experimenting with this feeling of being able to program for hours on end and just enjoying programming again, I guess, for the first time in a long time.</p>
<p><strong>Adam:</strong>
I mean, that totally makes sense. But why was the path there, why was building an operating system the therapeutic path to a new you?</p>
<p><strong>Andreas:</strong>
Well, I don’t know that I originally saw that. But the thing that made me get into the operating system path in the first place was as a child, I wanted to build my own operating system. When I was 10, 11, 12 at that age. And you can even find old Usenet posts from me as a child asking for help writing like a boot loader when I’m a kid. And totally clueless of course, but-</p>
<p><strong>Adam:</strong>
I don’t know how boot loader works right now.</p>
<p><strong>Andreas:</strong>
All right. Well, I guess most people don’t. But yeah, that’s something that I was curious about as a child. And when I came outta rehab, I guess one big thing that I was thinking a lot about was when was the last time that I felt like I was really myself. And I figured it must have been before I got access to alcohol in my life. That was sort of the original Andreas. And to get back to that, I thought okay, well what did I care about before that?</p>

<p>And one of the last things I was interested in before is going on this other life path was operating systems. It seemed kind of natural to just give it a go. See okay, what if I tried that again with everything that I’ve learned since then? And I’ve become a capable programmer since then. So what if I just put those skills to use? I have no job. Nobody’s expecting anything from me. I have money to burn for a year. So let’s just go for it and see what happens. And that’s paraphrasing my thought process, but that’s sort of how it happened.</p>

<p>It turned out to be very therapeutic. And I think the first thing that made it therapeutic was that it allowed me to actually fill up the entire day with something I found interesting, but seemed well let’s say relatively harmless, right? Compared to what I had been filling my days with for the past decade. There was nobody waiting for me anywhere, which was kind of a luxurious thing, I suppose, when you’re doing something like this. The fact that there’s nobody waiting for you to get back to work. I was just burning through savings at that point. But it seemed like a reasonable thing to do. Certainly in retrospect, I know it was very reasonable. But even at the time, it seemed like if I can get my head in order and maybe build a different type of life, a better life after this, then it doesn’t matter what it costs. I would rather have no money and be completely clearheaded, then have all the money in the world and just be a drugged out zombie for one more day. So that’s what I was doing.</p>
<p><strong>Adam:</strong>
<em>Staying with family worked during rehab, and probably made it easier to stay sober. But Andreas couldn’t live there his whole life, and his family probably their own lives to live.</em></p>
<h2 id="the-summer-cabin"><strong>The Summer Cabin</strong></h2>
<p><strong>Andreas:</strong>
So I rented a summer cabin, which was really cheap because winter was about to start, and moved out to this little summer cabin village. So it was just me in this little cabin, and nobody else was around.</p>
<p><strong>Adam:</strong>
Did it have heat?</p>
<p><strong>Andreas:</strong>
It had, what’s it called. I had to burn logs fire. So what is that called? A furnace?</p>
<p><strong>Adam:</strong>
Yeah. Or a stove, a wood stove.</p>
<p><strong>Andreas:</strong>
Yeah. Something like that. I had to bring in wood and burn it.</p>
<p><strong>Adam:</strong>
Fireplace?</p>
<p><strong>Andreas:</strong>
Fireplace. Yes. It had a fireplace. Thank you. But that was really nice. So then I just rented that cabin and stayed there, just continuing what been doing. But now in a place by myself and just getting back into the groove of having a life where there isn’t somebody who’s watching over me all the time.</p>
<p><strong>Adam:</strong>
<em>Andreas stayed there for six months, throwing himself into his operating system project.</em></p>
<p><strong>Andreas:</strong>
In some ways, I recognize that there was a compromise being made here, right? You’re trading one addiction for another. But even the therapist in my rehab program was always telling me that, “If you get addicted to cooking or to hiking, I don’t care. It’s so much better. Go do that. Eventually, you’ll get bored of it and find other things to do. Just don’t get back into the drugs.”</p>
<p>So I didn’t worry too much about substituting some really lame addiction. I guess I thought that I’ll just try it for a while as long as it’s fun. Maybe I’ll lose interest and do something else. But turns that I didn’t really lose interest. So it worked out really well.</p>
<p><strong>Adam:</strong>
What were your goals like? Besides just filling out the clock and enjoying this, did you have a direction with your project?</p>
<h2 id="linux-frustrations"><strong>Linux Frustrations</strong></h2>
<p><strong>Andreas:</strong>
Well, I don’t know that I ever had a real direction with it. But in the beginning, I remember feeling kind of frustrated with finding myself using Linux again and thinking it’s nice to be back on Linux. Everything is snappy. And the developer experience is really great, but I sure do miss having the source code for everything.</p>
<p><strong>Adam:</strong>
<em>This is a fascinating distinction to draw.</em></p>
<p><em>Linux is open source. Everyone has access to the code. But if you listen to episode 70 with Joey Hess talking about Debian, making changes can be a bureaucratic process. And that’s just for one distribution. There are hundreds of Linux distributions. Even if it’s a one line change, it could take years to get that upstreamed and spread into various Linux distributions. If you listen to episode 67 about Zig, that was one of Andrew’s motivations behind creating Zig.</em></p>
<p><em>But meanwhile, Andreas has another strategy at Apple. Everything was in one place, and everything was built internally.</em></p>
<p><strong>Andreas:</strong>
And when you’re in that environment, it’s extremely powerful.</p>
<p>So the area that I worked on primarily throughout my stay at Apple was web performance stuff. So Safari and WebKit performance, optimizations, performance work. And that type of work usually requires traversing the stack up and down, right?</p>
<p>It’s usually not as simple as, “I just have to make this little fix in the WebKit library itself, and everything is faster.” But we’d frequently had to work on stuff like image decoding libraries, and network working libraries, and whatnot. And just the access to all those layers and having the expert of whatever thing you wanted to know about. The expert was always somewhere in the building or in the adjacent building. And that’s an incredibly powerful thing.</p>
<p>If you look at open source software systems, there isn’t really anything quite like it in the Linux world for example. People are so distributed. And there are many great advantages to being distributed, but I’ve also seen some really great advantages to being centralized.</p>
<p><strong>Adam:</strong>
<em>This doesn’t mean working physically centralized this means everything is in a monorepo. Everything’s in a single file system where it’s easy to get access to. Every piece of code for everything that runs on your computer can be opened and changed. So you can make small, little iterative changes in minutes, instead of possibly years of trying to upstream some shared library.</em></p>
<p><strong>Andreas:</strong>
I remember so much leaving Apple and still having that feeling of, “I can just go and look in the source code of this thing.” And I was using a MacBook when I left Apple. I remember getting really frustrated when I couldn’t bring up the source code for stuff anymore. Because I had come to take it for granted. Right? I think I had a memory leak in QuickLook or whatever it was. I was previewing something in Finder, and it would just leak memory. And I thought I’m just going to dig into this, see what it is. And I just couldn’t anymore. And now I knew how everybody else felt.</p>

<p>That really made me think that it’s silly that I can’t have this feeling about the software that I’m using every day, unless I work at Apple. Because I think it would be cool if everybody could have that feeling about the software they use every day without having to work at Apple. The spirit of taking ownership of the whole stack, Apple doesn’t have a monopoly on that mindset. And it’s definitely something that could be replicated elsewhere.</p>
<p><strong>Adam:</strong>
So that was his goal. Although maybe it was too large to even speak, that he could build something like what Mac OS looked like if you were an Apple developer. Where everything was in one place, and in one style, and easy to change.</p>
<p><strong>Andreas:</strong>
I didn’t dare admit it to myself at first because I thought it was almost too grandiose of an idea to try to create an entirely new environment where this exists in open source. I guess I’m a little bit of the belief that if you have a great big idea, the best thing to do is not tell anybody, because it really takes the air out of it. So better to go and try to prototype the idea. And then if something comes out of it, you can show it to people. But at least in my case, whenever I tell people about some idea, I kind of tend to lose interest in the idea. So I just went to work on it instead.</p>
<p><strong>Adam:</strong>
What he’s working on is building an operating system from scratch, literally from scratch starting with a blank file. What many people mean when they talk about operating systems is the kernel, the lowest level part of the operating system, like the Linux kernel. If the software of your computer was a house, the kernel would be like the foundation and maybe the wood framing. Andreas has a much bigger goal in mind though.</p>
<h2 id="building-the-whole-operating-system"><strong>Building the Whole Operating System</strong></h2>
<p><strong>Andreas:</strong>
As far as I’m concerned, an operating system is all the software that comes with your computer. So macOS is an operating system that comes with a kernel, but also with a web browser, and a text editor, and a note-taking application, and all kinds of stuff. Right? And that’s sort of what I think of as an operating system. Not so much the Linux kernel purist idea that the kernel is the operating system.</p>
<p><strong>Adam:</strong>
<em>That’s right. He was going to build it all. He’s not just going to build the foundation and the framing. But he’s going to build the walls, and the carpet, and the stove, and even the pigments for the paint and the coffee maker. This might be where my metaphor starts to break down. Because on a computer, all of those things are just made of one thing:</em></p>
<p><strong>Andreas:</strong>
Everything is just a piece of code that somebody writes. And if we just make all those pieces of code and stack them up, it’s going to work. I had no illusions about how an operating system looks once it is put together and works. Now I didn’t know how to get there, but I reasoned that if you just start building these components one by one, eventually you’ll have the full stack and it will just gel together. So that’s what I started doing.</p>
<h2 id="learning-to-build-an-os"><strong>Learning To Build an OS</strong></h2>
<p><strong>Adam:</strong>
How do you learn how to build an operating system?</p>
<p><strong>Andreas:</strong>
Well when I started, I had no idea how to do that. So it was a gradual process for me. I always figured that the hardest part would be choosing which abstractions to use. Because once you know what the abstractions are, it’s just a matter of implementing them.</p>

<p>So I decided to make it a little bit easy for myself with Serenity to use existing abstractions or well known abstractions like Unix, right? And instead of coming up with an entirely new style of kernel, I just made a classical Unix kernel. Instead of trying to come up with a radical new UI, just used the late ’90s UI.</p>
<p><strong>Adam:</strong>
By late ’90s UI, Andreas specifically means he’s building an operating system that looks like Windows 2000. The Windows 2000 that he used as an 11 year old kid.</p>
<h2 id="windows-2000-and-synthwave"><strong>Windows 2000 and SynthWave</strong></h2>
<p><strong>Andreas:</strong>
Windows 2000 was beautiful. And it knew exactly what it was. And then, everybody got distracted because we had to turn the PC into a gaming machine, into a surfing machine. And it had to become everything. A multimedia entertainment platform. And I had just these positive childhood memories of the really serious office computer. That’s something that I wanted to rebuild I guess.</p>
<p><strong>Adam:</strong>
<em>This idea of recreating the past based on nostalgic joy is something that he learned from the music genre synthwave.</em></p>
<p><strong>Andreas:</strong>
It’s a modern music genre that takes influence from 1980s synth pop and movie soundtracks like Blade Runner and things like that. And I see this parallel between the genre of synthwave wave and what I’m doing with Serenity in that we are taking all these old ideas, but rebuilding them using modern technology and modern development practices. And it’s so much easier today to build a system that looks and feels like something from the year 2000 than it was back then. Because of course, we have way better stuff today, and we understand much more about software development.</p>

<p>Much like with synthwave, it’s so much easier to make a cool synth-pop song today than it was in 1985, because in ‘85 you needed analog synthesizers and all this advanced equipment, right? Or I guess you had digital synthesizers in ‘85, but you had much more crude tools. And in that sense, I think SerenityOS is like synthwave. It’s creating something strongly influenced by the past, but in a modern way, and in a sort of a high fidelity way with 2020 hindsight.</p>
<p><strong>Adam:</strong>
<em>So this is what Andreas was working on all day, every day when he wasn’t attending NA meetings. Just coding away in his cabin, building a new sober life for himself by throwing himself at this project.</em></p>
<h2 id="announcing-the-project-to-reddit"><strong>Announcing the Project To Reddit</strong></h2>
<p><strong>Andreas:</strong>
And then when that rental contract ran out, that’s when I made a post on Reddit about, “So I’m moving out of this house, and I just spent the last six months here writing this operating system. And here’s what it looks like.” And had a little demo video of it that I posted on YouTube as well. People were really kind of captivated by the thing I think. Of course looking back now, it’s very simple compared to what it has become. But there was something about it that was really energetic and something new, yet still familiar to everybody. I mean I don’t know. I thought a lot about what is it that makes this so interesting to people? I can never quite figure it out, but people liked it.</p>
<p><strong>Adam:</strong>
One thing I was thinking about is oftentimes, the layers below yourself as a developer seem kind of magical. So for somebody to come along and say, “Here it is. Here’s all of it.” It’s like, “Here, I started at the bottom.” It’s almost like you’re saying, “It’s not magic. Look, here. Did it?”</p>
<p><strong>Andreas:</strong>
Yeah. No, that’s true. That’s true. That’s something I heard often from people. It piqued people’s curiosity who wanted to see what a real system might look like, even though it was clearly immature. It was still an approximation of what a mature system might look like.</p>
<p><strong>Adam:</strong>
<em>Those people whose interest was piqued, they started to poke around with Serenity, try it out. And they started to contribute.</em></p>
<p><strong>Andreas:</strong>
One of the first things that somebody helped out with was writing a script that would automate the build process. And that was really, really sweet. I was very, very grateful for that. And then since then, it’s just been growing. New people pick this up every week and find something they want to hack on. And I’ve always been welcoming to new people because even if it started as a personal therapy project for me, that doesn’t mean that I don’t want other people to work on it. Right? I’m really happy to share my programming playground with anybody else who wants to write similar type of software.</p>
<p><strong>Adam:</strong>
<em>And to explain how it all worked, Andreas started recording himself. He recorded himself coding, and uploaded it onto YouTube. This didn’t come naturally to him at first.</em></p>
<p><strong>Andreas:</strong>
One of the first videos I put up on YouTube, I had this long struggle trying to print out a number in octal. And it took me a little too long. And I remember just feeling, “This is so embarrassing. Now everybody will see.” And I decided to upload it anyway because I thought, “You know what? This would probably be good for me if I just become okay with people seeing me struggling with something silly.”</p>
<p><strong>Adam:</strong>
It’s interesting because you had a secret life, and then you went to a world of nothing is secret. Was this some sort of conscious decision to be completely out there with this project?</p>
<p><strong>Andreas:</strong>
I think so. I even named it after the recovery program I was in. When you go to these 12 step meetings, then you always read the Serenity prayer at the end. The way I was thinking at the time was I need to make something that is so big and beautiful, that I will want to stick around. And I can use that as a tool to keep myself honest. If I just name it something that always recalls where it came from, and I tell everybody where it came from. So I guess I sort of saw it as a chance to build this big monument to my own recovery. And then I could never run away from it. And I would feel like such a hypocrite if I would start using drugs again and working on my Serenity Operating System at the same time. Right? So I sort of get this built-in deterrent from that.</p>
<h2 id="building-in-public"><strong>Building in Public</strong></h2>
<p><strong>Andreas:</strong>
There’s no telling what the future holds, of course. But in rehab, we often talked about how people have this tendency to, if you see an opportunity to build a back door into your life, like an escape hatch for yourself, then if you’re not conscious about those things, then you have a tendency to just build those. So I guess here, I was kind of thinking proactively and trying to build whatever the opposite of a back door is. Maybe build a window into my life instead let’s say.</p>
<p><strong>Adam:</strong>
<em>The community started watching through that window. People watched him code and then they asked him questions. How did he type so fast? How did he get started working at Apple? How do you pass a coding interview? He started off a bit nervous. But as the hours of tape accumulated, he became a pretty confident speaker. And people learned a lot watching him code. He was good at what he did. He had to get a job initially to support himself. But eventually, his YouTube fans and project contributors, they gave him enough financial support that he could dedicate to this full time.</em></p>
<p><em>A neat thing about a project this large is there’s lots of rough edges. There’s lots of parts to build. There’s lots of work to keep many people busy. When I look right now, in past 30 days, Serenity has had over 100 contributors, and the numbers continue to grow.</em></p>
<p><em>But actually growth and completion, that’s not really what this project is about.</em></p>
<h2 id="just-a-kid-who-loved-computers"><strong>Just a Kid who Loved Computers</strong></h2>
<p><strong>Andreas:</strong>
Unlike most other projects, we are not trying to gain users, or popularity, or anything like that. Each and every person who works on this, they just want to make something for themselves, something beautiful. And I think that gives us almost kind of a purity of purpose that I enjoy. That I always treated it as this is going to take at least 10 years to get anywhere reasonable. And it’s astonishing how much you can do if you take that perspective from the beginning. If you accept that something is going to take a long time, you don’t have to deal with that growing disappointment when you’re not getting to where you want to be immediately.</p>
<p><strong>Adam:</strong>
My very last question is did you recapture this 11 year old version of yourself and that energy that you were looking for?</p>
<p><strong>Andreas:</strong>
I think so. I’ve never felt more true to myself than I do lately. I never worry anymore about how I present myself if I’m saying the right thing or if I should try to phrase myself this way or that way. Because I can just speak from the heart, and I know that it comes out how I want it to come out.</p>

<p>Most of my life, I was very conscious of everything I would say. And I was always trying to manicure my public persona so that I could obscure how I was living my life. And it is a very good feeling to not do that, and to just sort of speak candidly and honestly about everything and anything. And that’s really how I was like when I was 11. I wasn’t cynical, and I wasn’t trying to hide anything. I was just a kid who loved computers. And I think I became that again. And I’m happy about that.</p>
<h2 id="next-steps"><strong>Next Steps</strong></h2>
<p><strong>Adam:</strong>
You can find Andreas on YouTube. Serenity isn’t done, but you can use it. I don’t think it’s the type of project that will ever be complete. If you want to learn how to build an operating system, or systems programming, or modern C++, or just watch hundreds of hours of a calm person working diligently at a project that he thinks might take all his life, you should totally check him out on YouTube. And as you’ve probably gotten a taste of here, his openness and candor speaking about his life is very endearing. So you should check that out.</p>

<p>Also, if you want to hear more about his time at Apple and how it was both an amazing experience and a problematic one, and more about the Serenity project and how it can be transformative for people who join, check out the Patreon episode. It’s going to be out on the 15th. Oh yeah. And we didn’t even cover this, but they’re building a full web browser from scratch. I heard someone say that the web standards are so complex right now, that it wouldn’t be possible to build a new web browser. But here, the Serenity team is doing it. And you can watch them.</p>
<p><strong>Adam:</strong>
If you want to hear that and more like it, please support the podcast on Patreon to unlock those episodes. And until next time, thank you so much for listening.</p>
<form action="https://app.convertkit.com/forms/2082075/subscriptions" method="post" data-sv-form="2082075" data-uid="99a50e1950" data-format="inline" data-version="5" data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;Success! Now check your email to confirm your subscription.&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;analytics&quot;:{&quot;google&quot;:null,&quot;facebook&quot;:null,&quot;segment&quot;:null,&quot;pinterest&quot;:null,&quot;sparkloop&quot;:null,&quot;googletagmanager&quot;:null},&quot;modal&quot;:{&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;powered_by&quot;:{&quot;show&quot;:true,&quot;url&quot;:&quot;https://convertkit.com?utm_source=dynamic&amp;utm_medium=referral&amp;utm_campaign=poweredby&amp;utm_content=form&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;show&quot;,&quot;custom_content&quot;:&quot;&quot;},&quot;slide_in&quot;:{&quot;display_in&quot;:&quot;bottom_right&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;sticky_bar&quot;:{&quot;display_in&quot;:&quot;top&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15}},&quot;version&quot;:&quot;5&quot;}" min-width="400 500 600 700 800">

<div data-style="minimal">

<p>
Hello, <br>I make CoRecursive because I love it when someone shares the details behind some project, some bug, or some incident with me.
</p><p>
No other podcast was telling stories quite like I wanted to hear.
</p><p>
Right now this is all done by just me and I love doing it, but it's also exhausting.
</p><p>
Recommending the show to others and contributing to this patreon are the biggest things you can do to help out.
</p><div><p>
Whatever you can do to help, I truly appreciate it!</p><p>
Thanks! Adam Gordon Bell
</p></div>
<p><a href="https://www.patreon.com/adamgordonbell">Support The Podcast</a>
</p></div>
</form>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[RustPython (510 pts)]]></title>
            <link>https://rustpython.github.io/</link>
            <guid>39286458</guid>
            <pubDate>Wed, 07 Feb 2024 09:38:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://rustpython.github.io/">https://rustpython.github.io/</a>, See on <a href="https://news.ycombinator.com/item?id=39286458">Hacker News</a></p>
<div id="readability-page-1" class="page"><div aria-label="Content">
        <section>
    <!-- site title, logo and description -->
    <!-- to update, edit the global site config.yaml -->
    <div>
            <p><img src="https://rustpython.github.io/assets/img/rust-python-logo.svg" alt="RustPython Logo">
            </p>
            <div>
                <p>RustPython</p>
                <p>
                        An open source Python 3 (CPython &gt;= 3.11.0) interpreter written in Rust 🐍 😱 🤘
                    </p>
            </div>
        </div>

    <!-- explainer table + paragraph and links to demos -->
    <!-- to update, edit index.markdown file in the root folder  -->
    <div>
        <table>
            <tbody><tr>
               <td>
                    <img src="https://rustpython.github.io/assets/img/python-logo.svg" alt="Python Logo">
                    Python
               </td>
                <td></td><td></td>
            </tr>
            <tr>
                <td>
                    ↓
                </td>
                <td></td><td></td>
            </tr>
            <tr>
                <td><p><span>Rust</span><span>Python</span>
                </p></td>
                <td>
                    →
                </td>
                <td><p>Python embedded in Rust apps</p></td>
            </tr>
            <tr>
                <td>
                    ↓
                </td>
                <td></td><td></td>
            </tr>
            <tr>
                <td><p><img src="https://rustpython.github.io/assets/img/wasm-logo.svg" alt="WebAssembly Logo">
                    WebAssembly
                </p></td>
                <td>
                    →
                </td>
                <td><p>Python on the Web</p></td>
            </tr>
        </tbody></table>
    </div>
    <p>
            RustPython is a Python interpreter written in Rust. RustPython can be embedded into Rust programs to use Python as a scripting language for your application, or it can be compiled to WebAssembly in order to run Python in the browser. RustPython is free and open-source under the MIT license.
        </p>
    
</section>

<!-- installation instructions -->
<!-- to update, edit the parameters in the index.markdown file -->
<div>
        <p> Installation</p>
        
        <p><mark> cargo install --git https://github.com/RustPython/RustPython </mark>
        
        <mark> wapm install rustpython </mark>
        
        <mark> conda install rustpython -c conda-forge </mark></p>
    </div>

<!-- goals and why rustpython -->
<!-- to update, edit the parameters in the index.markdown file -->
<div>
        <p>Goals</p>
        <div>
            
            <div>
                <p>
                    Full Python 3 environment entirely in Rust (not CPython bindings), with a clean implementation and no compatiblity hacks.
                </p>
            </div>
            
            <div>
                <p>
                    Fast, reliable and secure implementation of Python that can be used from Rust or compiled to WebAssembly.
                </p>
            </div>
            
        </div>
        <div>
                

<p>There are many implementations of Python. For example:</p>
<ul>
  <li><a href="https://github.com/python/cpython">CPython</a> (C), which is the most common</li>
  <li><a href="https://www.jython.org/">Jython</a> (Java)</li>
  <li><a href="https://ironpython.net/">IronPython</a> (.NET)</li>
  <li><a href="https://www.pypy.org/">PyPy</a> (Python)</li>
  <li><a href="http://www.stackless.com/">Stackless</a></li>
</ul>

<p>Each of these implementations offer some benefits: Jython, for example, compiles Python 2 source code to Java byte code, then routes it to the Java Virtual Machine. Because Python code is translated to Java bytecode, it looks and feels like a true Java program at runtime and so it integrates well with Java applications.</p>

<p>IronPython is well-integrated with .NET, which means IronPython can use the .NET framework and Python 2 libraries or vice versa.</p>

<p>We want to unlock the same possibilities that Jython and IronPython enable, but for the Rust programming language. In addition, thanks to Rusts’ minimal runtime, we’re able to compile RustPython to WebAssembly and allow users to run their Python code easily in the browser.</p>

            </div>
    </div>

<!-- contributor list -->
<!-- to edit, update _data/contributors.json -->


      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla's new service tries to wipe your data off the web (112 pts)]]></title>
            <link>https://www.theverge.com/2024/2/6/24062765/mozilla-monitor-plus-firefox-paid-subscription-privacy-data-broker-removal-requests</link>
            <guid>39286390</guid>
            <pubDate>Wed, 07 Feb 2024 09:27:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theverge.com/2024/2/6/24062765/mozilla-monitor-plus-firefox-paid-subscription-privacy-data-broker-removal-requests">https://www.theverge.com/2024/2/6/24062765/mozilla-monitor-plus-firefox-paid-subscription-privacy-data-broker-removal-requests</a>, See on <a href="https://news.ycombinator.com/item?id=39286390">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Mozilla is introducing a new paid subscription privacy monitoring service called <a href="https://monitor.mozilla.org/">Mozilla Monitor Plus</a>. For $8.99 a month under its annual subscription, Mozilla says it will automatically keep a lookout for your information at over 190 sites where brokers sell information they’ve gathered from online sources like social media sites, apps, and browser trackers, and when your info is found, it will automatically try to get it removed. </p><p>Mozilla Monitor product manager Tony Cinotto told <em>The Verge</em> in an email that Mozilla partners with a company <a href="https://onerep.com/sites-we-remove-from">called Onerep</a> to perform these scans and subsequent takedown requests. While requests usually take between seven and 14 days to process, he says sometimes information can’t be removed. Mozilla will keep trying, he added, but will also give Plus members instructions for attempting removal themselves. </p><div><div role="button" aria-label="Zoom" tabindex="0"><figure><div><p><span><img alt="A GIF showing the process of setting up a scan with Mozilla Monitor." loading="lazy" decoding="async" data-nimg="fill" sizes="(max-width: 1023px) 100vw, 744px" srcset="https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/376x249/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 376w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/384x254/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 384w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/415x275/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 415w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/480x318/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 480w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/540x358/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 540w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/640x424/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 640w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/750x497/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 750w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/828x548/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 828w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/1080x715/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 1080w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/1200x795/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 1200w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/1440x954/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 1440w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/1920x1271/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 1920w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/2048x1356/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 2048w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/2400x1589/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif 2400w" src="https://duet-cdn.vox-cdn.com/thumbor/0x0:1125x745/2400x1589/filters:focal(563x373:564x374):no_upscale():format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25269795/Mozilla_Monitor_GIF_1.gif" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></span></p></div></figure></div><div><figcaption><em>Mozilla Monitor in action.</em></figcaption> <p><cite>Image: Mozilla</cite></p></div></div><p>Basic Monitor members will get a free scan and one-time removal sweep, plus continual monthly data broker scans afterward, Mozilla says. The paid subscription builds on the free dark web monitoring of Mozilla Monitor (previously Firefox Monitor), a service Mozilla <a href="https://www.theverge.com/2018/9/25/17899952/firefox-monitor-have-i-been-pwned-password-breach">debuted in 2018</a>. Mozilla has offered other privacy-focused services in the last few years, such as Mozilla VPN and Firefox Relay. </p><p>Mozilla says its data broker scans can find details online like your name and current and previous home addresses but adds that it could go as deep as criminal history, hobbies, or your kids school district. </p><p>Services like this are fairly common, but they’re not all that well known to most people, and searching for them is as likely to turn up sketchy scam sites as it is legitimate service providers like, for instance, DeleteMe. That makes it difficult to suss out trustworthy companies, which is really where Mozilla’s reputation as a privacy-first subsidiary of the open-source nonprofit Mozilla Foundation could help.</p><p>Mozilla Monitor Plus is available now for $8.99 per month, while standard Mozilla Monitor remains free.</p><p><em><strong>Correction February 6th, 2024, 10:05AM ET: </strong>Corrected the name of Firefox Monitor in one instance.</em></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Danish schools will no longer be allowed to use Chromebooks and Google platforms (192 pts)]]></title>
            <link>https://theprivacydad.com/final-decision-on-chromebook-case-in-denmark/</link>
            <guid>39286269</guid>
            <pubDate>Wed, 07 Feb 2024 09:11:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://theprivacydad.com/final-decision-on-chromebook-case-in-denmark/">https://theprivacydad.com/final-decision-on-chromebook-case-in-denmark/</a>, See on <a href="https://news.ycombinator.com/item?id=39286269">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    







<p>
    <i>
        <time datetime="2024-02-03">
            03 Feb, 2024
        </time>
    </i>
</p>


    <p><strong>This week saw a conclusion on the Danish Chromebook case</strong>. The result, long-awaited by father and privacy activist Jesper Graugaard, shows that the <strong>Danish Data Protection Authority has issued an injunction</strong> regarding the tracking of children's personal data via Chromebook and Google platforms in schools.</p>
<p>From 1 August 2024 onwards, Danish schools will no longer be allowed to enable Chromebooks and Google platforms to collect students' personal data for processing. Each municipality will need to give an indication of how they will comply to this injunction <strong>by 1 March 2024</strong>.</p>
<p>For activist Graugaard, the decision comes as a relief. He began his crusade against Chromebooks in school in his home town Elsinor over four years ago. While this week's report makes no reference to Jesper's initiatives, it is clear that this injunction could not have been issued without his tireless and sometimes solitary activism.</p>
<p>Hopefully the Danish Chromebook case's conclusion will draw attention to the unchecked intrusion of data mining companies into schools in other countries within Europe, and worldwide. It would be good to see checks on Google's dominance in schools, currently achieved via attractively priced hardware and free proprietary platforms built for this purpose.</p>
<p>And on a personal note: Congratulations, Jesper!</p>
<h2 id="background">Background</h2>
<p>I interviewed Jesper Graugaard in October of 2023, when results of his case were pending. Those interviews can be read <a href="https://theprivacydad.com/the-privacy-dad-interviews-jesper-graugaard/" target="_blank">here</a> and <a href="https://theprivacydad.com/the-privacy-dad-interviews-jesper-graugaard-2/" target="_blank">here</a>.</p>
<p>These interviews were reworked and published as an article titled 'The fight for privacy in Danish schools' on the <a href="https://freedom.tech/jesper-graugaards-activism-against-chromebooks-in-danish-schools/" target="_blank">Freedom Tech blog</a>, managed by Seth for Privacy, shortly after that.</p>
<p>In my communication with Jesper I learned how it all started when he, a parent with an open-minded stance towards IT in schools, discovered his child's data was being made public via a Google account set up by the school.</p>
<p>Over the years, Jesper has been determined to explore avenues for protest against Google, for drawing attention to the misuse of students' personal data, and for taking action against it. His story shows that one person's critical questions and actions <em>can</em> impact what feels like a mammoth and immovable industry.</p>
<h2 id="injunction">Injunction</h2>
<p>The English translation of the full report on the injunction by the Danish Data Protection can be read <a href="https://media.licdn.com/dms/document/media/D4E1FAQFd_XMkoJOAcw/feedshare-document-pdf-analyzed/0/1706608145644?e=1707350400&amp;v=beta&amp;t=5M_LW6Zk1ZL4YIh4tWV6lo-LQ9xYfZ8s-0mpr1SxGyE" target="_blank">here</a>.</p>
<p>Here are a few key points:</p>
<blockquote>
<p>In the case of the use of Google Workspace in the primary schools, the Danish Data Protection Authority assesses that there is no authority to pass on personal data to Google for all the purposes that are passed on today. Therefore, the Danish Data Protection Authority is now giving an order to the municipalities to bring the processing in line with the rules and indicates various ways in which this can be done.</p>
</blockquote>
<p>and:</p>
<blockquote>
<p>Therefore, the Danish Data Protection Authority gives an order to the municipalities to bring the processing in line with the rules by ensuring that there is authorization for all the processing that takes place. This can happen, for example, by:</p>
<p>• That the municipalities no longer pass on personal data to Google for these purposes. This will <strong>likely require Google to develop a technical option for the data streams in question to be intercepted</strong>.</p>
<p>• That <strong>Google itself refrains</strong> from processing the information for these purposes.</p>
<p>• That the Danish Parliament provides a sufficiently clear legal basis for disclosure for these purposes.</p>
<p>The municipalities <strong>must comply with the order from 1 August 2024, but must indicate how they intend to comply by 1 March at the latest</strong>.</p>
</blockquote>
<p><em>(my emphasis)</em></p>
<p>For readers interested in the details, I'll add the link again <a href="https://media.licdn.com/dms/document/media/D4E1FAQFd_XMkoJOAcw/feedshare-document-pdf-analyzed/0/1706608145644?e=1707350400&amp;v=beta&amp;t=5M_LW6Zk1ZL4YIh4tWV6lo-LQ9xYfZ8s-0mpr1SxGyE" target="_blank">here</a>.</p>
<p>This is, at first sight, a positive outcome for the protection of children's data in Denmark, and at least a warning signal to companies hoping to introduce their products to each new generation of children via schools. With the 1st of March date not far off, the order should enforce a quick response from educational boards in each municipality.</p>
<h2 id="response-so-far">Response so far</h2>
<p>After the final decision was made, Jesper's case—he refers to it as the 'Chromebook saga'—suddenly received <strong>a lot</strong> of attention. On his LinkedIn profile, he wrote earlier this week:</p>
<blockquote>
<p>Suddenly LinkedIn exploded, the phone rang almost non-stop and the rest of my day disappeared in an ocean of documents, conversations with journalists, tech people, LinkedIn connection requests, congratulations, articles, analyses and a tide of opinion and thoughts. 4 ½ years of hard work to keep a case current, which I am personally passionate about and have carried forward - often alone -, was about to culminate. (edited)</p>
</blockquote>
<p>Reading through his comments, one also senses a dose of realism and caution. The day after publication of the decision, Jesper posted a translation of an article by journalist <a href="https://www.linkedin.com/in/peter-christian-bech-nielsen-16a70aa3/?lipi=urn%3Ali%3Apage%3Ad_flagship3_detail_base%3B8CLGB3HxRwm0dS%2FQ%2BmUhTg%3D%3D" target="_blank">Peter Christian Bech-Nielsen</a> from Techmediet Radar, which asks critical questions about the unnecessary four-year length of the case, and explores the possibility large data companies might try to avoid taking real steps to change the way data is currently transferred.</p>
<p>Meanwhile, Camilla Ley Valentin, the Director of DI Digital, the lobby organisation representing IT businesses in Denmark, posted this response from the side of the tech companies:</p>
<blockquote>
<p>But I cannot help but wonder about the decision that has landed. Because in this case, we are not talking about sensitive data relating to the individual child, which is used, for example, for marketing.</p>
<p>The case concerns pseudonymized and aggregated usage data, such as data to measure a browser's performance or data to assess whether a button in a digital solution works better if it is green rather than blue.</p>
</blockquote>
<p>A regular listener to <em>The Surveillance Report</em> and the <em>Firewalls Don't Stop Dragons</em> podcasts, I am skeptical about such dismissive statements from the world's wealthiest companies. It is often discovered after the fact that data companies were furtively collecting more data than promised. Listening to the news items on these podcasts, it also seems difficult to truly anonymise data and remove the potential for cross referencing with other data sets.</p>
<p>We will have to see where all of this leads.</p>
<h2 id="are-there-solutions">Are there solutions?</h2>
<p>Having worked in schools for many years, I can imagine the education departments in the municipalities affected by the decision will be scrambling to find ways to <em>avoid</em> halting the use of Chromebooks in schools.</p>
<p>One might be inclined to sympathise. What is wrong, after all, with making computers widely available in schools? But as Jesper has often pointed out to me, Danish schools and educational boards have known about his case and the potential illegality of the practice for years now, yet have made no effort to think of a 'plan B', should the verdict land on the side of protecting the rights of children.</p>
<p>Google will want to keep this case low profile, as Chromebooks are used in schools all over the world. The Danish Data Protection Authority suggests that a <strong>possible solution would be for Google to create a new tool that <em>intercepts</em> children's data before it is sent to their servers</strong>. It is unlikely Google will want to develop such a tool, given they make money on personal data. However, seen from Google's perspective, they have already made big gains by establishing their products and platforms as the standard in schools worldwide.</p>
<p>Journalist Peter Christian Bech-Nielsen, mentioned earlier, also suggests looking into local IT companies—<a href="https://www.magenta.dk/en/our-organization/" target="_blank">Magenta</a> and <a href="https://www.semaphor.dk/" target="_blank">Semaphore</a>—that might already be ready to provide open source alternatives to the Google educational platforms.</p>
<h2 id="why-not-linux">Why not Linux?</h2>
<p>I don't see why educational ministers and boards world-wide haven't embraced Linux for schools. If the argument for the use of Chromebooks in schools is the low cost, well, then <strong>there is no argument, because all Linux software is free</strong>. If the concern is getting the hardware, then I say: Look to hardware refurbishing companies and organisations. Laptops deemed outdated for corporate use can <em>easily</em> be adapted for an additional five years of school use<sup id="fnref-1"><a href="#fn-1">1</a></sup> by installing a Linux distro on them and running free, open source software like <strong>LibreOffice</strong>. Chrome can be replaced with <strong>Firefox and DuckDuckGo</strong>, and school platforms can run on an open source platform like <strong>Nextcloud</strong>.</p>
<p>Using refurbished hardware in schools is cheap, good for the environment, creates new IT jobs and introduces new generations of young people to recycling and to open source software. If managed well, open source is secure, and light on hardware resources. As a teacher, I have had to use educational IT services and devices for many years, and I do not see a downside to using Linux for these purposes.<sup id="fnref-2"><a href="#fn-2">2</a></sup></p>
<h2 id="looking-ahead">Looking ahead</h2>
<p>I want to conclude with Jesper's own thoughts on the future of his case. I appreciate he was able to find the time during his hectic week to respond to my emails and questions.</p>
<p>Here's Jesper today:</p>
<blockquote>
<p>I will attend a professional course in GDPR, normally intended for Data Privacy Officers, as I feel it's important to me to get deeper into the way DPOs think and work. Also, I am trying to understand where my legal rights are in this mess. Not that I plan to sue the state or municipality for immaterial damage; but I want to understand why the rights of the citizen are sidelined in this case. There seems to be place where I, as a citizen, can hand over responsibility.</p>
<p>It's now official that the children have been using illegal technology for years, but the only result thus far is that those responsible are getting more time to fix the problem. Via journalists who have access to documents we know that the Municipalities' Land Association (KL) has sent some of the documents twice, thereby prolonging the proceedings. They have made children continue to use Chromebooks for nearly ten years now, with four-and-a-half of those ignoring the newly introduced GDPR regulations affecting children aged six and up. The case concerns hundreds of thousands of children nationwide using only one specific main provider: Google.  We still have nearly 50% of the rest who use products from different providers, such as Microsoft and Apple.</p>
<p>So what's next?</p>
<p>The question is:</p>
<p>How can it be politically acceptable that:</p>
<ul>
<li><p>Children have been illegally using a specific technology close to 50% of the time for nearly a decade?</p>
</li>
<li><p>This concerns a minimum 50% of all children in Denmark's public schools aged 6-18?</p>
</li>
<li><p>They all shared their personal data with at least one Big Tech company for ten years without the consent from themselves or from their parents?</p>
</li>
</ul>
<p>Possible outcomes that I foresee are:</p>
<ul>
<li><p>Municipalities will finally find a technical solution and then proceed legally (But why haven't they done this already?)</p>
</li>
<li><p>Google and other global data companies will adapt to follow Danish law</p>
</li>
<li><p>The government changes the law so what's illegal today will be legal tomorrow</p>
</li>
</ul>
<p>No matter what happens, Danish children seem to have no legal rights; all they can do is sit and wait.</p>
<p>Best, 
Jesper</p>
</blockquote>
<h2 id="updates">Updates</h2>
<p>Someone has posted about the issue on r/Denmark. The discussion is in Danish and can be read <a href="https://www.reddit.com/r/Denmark/comments/1akhul2/datatilsynet_har_endeligt_laddet_hammeren_falde/?context=3" target="_blank">here</a>.</p>
<p>I found this comment (translated) interesting:</p>
<blockquote>
<p>There are alternatives to Google Workspace that municipalities could use: https://oscampus.dk/. Compared to their Chromebooks, it's not even because they need to be scrapped. You could re-install them with the Danish OS2BorgerPC: https://www.os2.eu/os2borgerpc</p>
</blockquote>
<h2 id="documentation">Documentation</h2>
<p><em>Some of these links lead to the LinkedIn platform.</em></p>
<p><a href="https://media.licdn.com/dms/document/media/D4E1FAQFd_XMkoJOAcw/feedshare-document-pdf-analyzed/0/1706608145644?e=1707350400&amp;v=beta&amp;t=5M_LW6Zk1ZL4YIh4tWV6lo-LQ9xYfZ8s-0mpr1SxGyE" target="_blank">English translation of the full report on the injunction by the Danish Data Protection</a></p>
<p><a href="https://www.linkedin.com/feed/update/urn:li:activity:7158562220782632961/" target="_blank">"The day after the Danish DPA decision In the Chromebook saga"</a> (LinkedIn post by Jesper Graugaard with link to English translation of Peter Christian Bech-Nielsen article)</p>
<p><a href="https://www.linkedin.com/in/jesper-graugaard-5837a9/" target="_blank">Jesper Graugaard on LinkedIn</a></p>
<p><a href="https://www.linkedin.com/in/peter-christian-bech-nielsen-16a70aa3/?lipi=urn%3Ali%3Apage%3Ad_flagship3_detail_base%3B8CLGB3HxRwm0dS%2FQ%2BmUhTg%3D%3D" target="_blank">Peter Christian Bech-Nielsen on LinkedIn</a></p>
<p><a href="https://www.linkedin.com/feed/update/urn:li:activity:7158548453587857408/" target="_blank">Camilla Ley Valentin's statement on LinkedIn</a></p>
<p><a href="https://www.magenta.dk/en/our-organization/" target="_blank">Magenta</a> and <a href="https://www.semaphor.dk/" target="_blank">Semaphore</a> (open source platforms)</p>
<p><a href="https://freedom.tech/jesper-graugaards-activism-against-chromebooks-in-danish-schools/" target="_blank">The fight for privacy in Danish schools</a> (freedom.tech)</p>
<p><a href="https://theprivacydad.com/blog/?q=chromebook" target="_blank">My interviews: "Jesper Graugaard's Fight Against Chromebooks in Danish Schools</a></p>
<p><a href="https://www.wired.com/story/denmark-google-schools-data/" target="_blank">2022 Wired article</a></p>
<hr>
<p>-----<em>Discuss on <a href="https://www.reddit.com/r/theprivacydad/comments/1ahz2a4/discussion_final_decision_on_chromebook_case_in/" target="_blank">Reddit</a></em>-----</p>
<p>Subscribe to my blog via <a href="https://theprivacydad.com/subscribe/">email</a> or <a href="https://theprivacydad.com/feed/">RSS feed</a>.</p>
<p>Find me on <a href="https://social.linux.pizza/@theprivacydad" target="_blank">Mastodon</a> and <a href="https://twitter.com/the_privacy_dad" target="_blank">Twitter</a>.</p>
<p>Back to <a href="https://theprivacydad.com/blog/">Blog</a></p>
<section>
<ol>
<li id="fn-1"><p>An added advantage here is that such refurbished laptops would likely have more hard disk space than Chromebooks (which rely entirely on cloud-based storage), hence removing the reliance on WiFi throughout the day. Any student, teacher or parent reading this will know that WiFi connectivity in schools can be woeful at times.<a href="#fnref-1">↩</a></p></li>
<li id="fn-2"><p>Some IT personnel in school's I have worked in told me they would prefer a switch to Linux, but that it is often the school's management who are hesitant about ending contracts with Microsoft, Google and other commercial platforms and otherwise rocking the boat in any way.<a href="#fnref-2">↩</a></p></li>
</ol>
</section>





    
    <p>
        
        <a href="https://theprivacydad.com/blog/?q=Denmark">#Denmark</a>
        
        <a href="https://theprivacydad.com/blog/?q=chromebook">#chromebook</a>
        
        <a href="https://theprivacydad.com/blog/?q=digitalprivacy">#digitalprivacy</a>
        
        <a href="https://theprivacydad.com/blog/?q=parenting">#parenting</a>
        
        <a href="https://theprivacydad.com/blog/?q=school">#school</a>
        
    </p>
    

    
    


    



  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Apple to EU: "Go fuck yourself" (104 pts)]]></title>
            <link>https://pluralistic.net/2024/02/06/spoil-the-bunch/#dma</link>
            <guid>39285878</guid>
            <pubDate>Wed, 07 Feb 2024 08:11:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#dma">https://pluralistic.net/2024/02/06/spoil-the-bunch/#dma</a>, See on <a href="https://news.ycombinator.com/item?id=39285878">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-7951">
	<!-- .entry-header -->

	
	
	<div>
		<p><!--
Tags:
browser wars, firefox, mozilla, webkit, browser engines, apple, malicious compliance, dma, digital markets act, dma, eu, european union, federalism, corporatism, monopolies, trustbusting, regulation, protonmail, junk fees, cult of mac

Summary:
Apple to EU: "Go fuck yourself"; Hey look at this

URL:
https://pluralistic.net/2024/02/06/spoil-the-bunch/

Title:
Pluralistic: Apple to EU: "Go fuck yourself" (06 Feb 2024) spoil-the-bunch

Bullet:
🤼‍♀️

Separator:
^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^

Top Sources:
Today's top sources: Hacker News (https://news.ycombinator.com/), Slashdot (https://slashdot.org/).

--><br>
<a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/"><img decoding="async" src="https://i0.wp.com/craphound.com/images/06Feb2024.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></a></p>
<h2>Today's links</h2>
<ul>
<li><a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#dma">Apple to EU: "Go fuck yourself"</a>: The dictionary definition of malicious compliance.
</li>
<li><a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#linkdump">Hey look at this</a>: Delights to delectate.
</li>
<li><a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#retro">This day in history</a>: 2004, 2009, 2014, 2019, 2023
</li>
<li><a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#bragsheet">Colophon</a>: Recent publications, upcoming/recent appearances, current writing projects, current reading
</li>
</ul>

<hr>
<p><a name="dma"></a><br>
<img decoding="async" alt="The EU flag. Behind the ring of golden stars is a rotten apple. Above the apple is the Apple 'Think different' wordmark. A worm climbs through the 'd' in 'different' and rests on the apple." src="https://i0.wp.com/craphound.com/images/apple-v-eu.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<h2>Apple to EU: "Go fuck yourself" (<a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#dma">permalink</a>)</h2>
<p>There's a strain of anti-anti-monopolist that insists that they're not <em>pro</em>-monopoly – they're just <em>realists</em> who understand that global gigacorporations are too big to fail, too big to jail, and that governments can't hope to rein them in. Trying to regulate a tech giant, they say, is like trying to regulate the weather.</p>
<p>This ploy is cousins with Jay Rosen's idea of "savvying," defined as: "dismissing valid questions with the insider's, 'and this surprises you?'"</p>
<p><a href="https://twitter.com/jayrosen_nyu/status/344825874362810369?lang=en">https://twitter.com/jayrosen_nyu/status/344825874362810369?lang=en</a></p>
<p>In both cases, an apologist for corruption masquerades as a pragmatist who understands the ways of the world, unlike you, a pathetic dreamer who foolishly hopes for a better world. In both cases, the apologist provides cover for corruption, painting it as an inevitability, not a choice. "Don't hate the player. Hate the game."</p>
<p>The reason this foolish nonsense flies is that we are living in an age of rampant corruption and utter impunity. Companies really <em>do</em> get away with both literal and figurative murder. Governments really <em>do</em> ignore horrible crimes by the rich and powerful, and fumble what rare, few enforcement efforts they assay.</p>
<p>Take the GDPR, Europe's landmark privacy law. The GDPR establishes strict limitations of data-collection and processing, and provides for brutal penalties for companies that violate its rules. The immediate impact of the GDPR was a mass-extinction event for Europe's data-brokerages and surveillance advertising companies, all of which were in obvious violation of the GDPR's rules.</p>
<p>But there was a curious pattern to GDPR enforcement: while smaller, EU-based companies were swiftly shuttered by its provisions, the US-based giants that conduct the most brazen, wide-ranging, illegal surveillance escaped unscathed for years and years, continuing to spy on Europeans.</p>
<p>One (erroneous) way to look at this is as a "compliance moat" story. In that story, GDPR requires a bunch of expensive systems that only gigantic companies like Facebook and Google can afford. These compliance costs are a "capital moat" – a way to exclude smaller companies from functioning in the market. Thus, the GDPR acted as an anticompetitive wrecking ball, clearing the field for the largest companies, who get to operate without having to contend with smaller companies nipping at their heels:</p>
<p><a href="https://www.techdirt.com/2019/06/27/another-report-shows-gdpr-benefited-google-facebook-hurt-everyone-else/">https://www.techdirt.com/2019/06/27/another-report-shows-gdpr-benefited-google-facebook-hurt-everyone-else/</a></p>
<p>This is wrong.</p>
<p>Oh, compliance moats are <em>definitely</em> real – think of the calls for AI companies to license their training data. AI companies can easily do this – they'll just buy training data from giant media companies – the very same companies that hope to use models to replace creative workers with algorithms. Create a new copyright over training data won't eliminate AI – it'll just confine AI to the largest, best capitalized companies, who will gladly provide tools to corporations hoping to fire their workforces:</p>
<p><a href="https://pluralistic.net/2023/02/09/ai-monkeys-paw/#bullied-schoolkids">https://pluralistic.net/2023/02/09/ai-monkeys-paw/#bullied-schoolkids</a></p>
<p>But just because some regulations can be compliance moats, that doesn't mean that <em>all</em> regulations are compliance moats. And just because some regulations are vigorously applied to small companies while leaving larger firms unscathed, it doesn't follow that the regulation in question is a compliance moat.</p>
<p>A harder look at what happened with the GDPR reveals a completely different dynamic at work. The reason the GDPR vaporized small surveillance companies and left the big companies untouched had nothing to do with compliance costs. The Big Tech companies <em>don't comply with the GDPR</em> – <em>they just get away with violating the GDPR</em>.</p>
<p>How do they get away with it? They fly Irish flags of convenience. Decades ago, Ireland started dabbling with offering tax-havens to the wealthy and mobile – they invented the duty-free store:</p>
<p><a href="https://en.wikipedia.org/wiki/Duty-free_shop#1947%E2%80%931990:_duty_free_establishment">https://en.wikipedia.org/wiki/Duty-free_shop#1947%E2%80%931990:_duty_free_establishment</a></p>
<p>Capturing pennies from the wealthy by helping them avoid fortunes they owed in taxes elsewhere was terribly seductive. In the years that followed, Ireland began aggressively courting the wealthy on an industrial scale, offering corporations the chance to duck their obligations to their host countries by flying an Irish flag of convenience.</p>
<p>There are other countries who've tried this gambit – the "treasure islands" of the Caribbean, the English channel, and elsewhere – but Ireland is part of the EU. In the global competition to help the rich to get richer, Ireland had a killer advantage: access to the EU, the common market, and 500m affluent potential customers. The Caymans can hide your money for you, and there's a few super-luxe stores and art-galleries in George Town where you can spend it, but it's no Champs Elysees or Ku-Damm.</p>
<p>But when you're competing with other countries for the pennies of trillion-dollar tax-dodgers, any wins can be turned into a loss in an instant. After all, any corporation that is footloose enough to establish a Potemkin Headquarters in Dublin and fly the trídhathach can easily up sticks and open another Big Store HQ in some other haven that offers it a sweeter deal.</p>
<p>This has created a global race to the bottom among tax-havens to also serve as regulatory havens – and there's a made-in-the-EU version that sees Ireland, Malta, Cyprus and sometimes the Netherlands competing to see who can offer the most impunity for the worst crimes to the most awful corporations in the world.</p>
<p>And <em>that's</em> why Google and Facebook haven't been extinguished by the GDPR while their rivals were. It's not compliance moats – it's impunity. Once a corporation attains a certain scale, it has the excess capital to spend on phony relocations that let it hop from jurisdiction to jurisdiction, chasing the loosest slots on the strip. Ireland is a made town, where the cops are all on the take, and two thirds of the data commissioner's rulings are <em>eventually</em> overturned by the federal court:</p>
<p><a href="https://www.iccl.ie/digital-data/iccl-2023-gdpr-report/">https://www.iccl.ie/digital-data/iccl-2023-gdpr-report/</a></p>
<p>This is a problem among many federations, not just the EU. The US has its onshore-offshore tax- and regulation-havens (Delaware, South Dakota, Texas, etc), and so does Canada (Alberta), and some Swiss cantons are, frankly, <em>batshit</em>:</p>
<p><a href="https://lenews.ch/2017/11/25/swiss-fact-some-swiss-women-had-to-wait-until-1991-to-vote/">https://lenews.ch/2017/11/25/swiss-fact-some-swiss-women-had-to-wait-until-1991-to-vote/</a></p>
<p>None of this is to condemn federations outright. Federations are (potentially) good! But federalism has a vulnerability: the autonomy of the federated states means that they can be played against each other by national or transnational entities, like corporations. This doesn't mean that it's impossible to regulate powerful entities within a federation – but it means that federal regulation needs to account for the risk of jurisdiction-shopping.</p>
<p>Enter the Digital Markets Act, a new Big Tech specific law that, among other things, bans monopoly app stores and payment processing, through which companies like Apple and Google have levied a 30% tax on the entire app market, while arrogating to themselves the right to decide which software their customers may run on their own devices:</p>
<p><a href="https://pluralistic.net/2023/06/07/curatorial-vig/#app-tax">https://pluralistic.net/2023/06/07/curatorial-vig/#app-tax</a></p>
<p>Apple has responded to this regulation with a gesture of contempt so naked and broad that it beggars belief. As Proton describes, Apple's DMA plan is the very definition of malicious compliance:</p>
<p><a href="https://proton.me/blog/apple-dma-compliance-plan-trap">https://proton.me/blog/apple-dma-compliance-plan-trap</a></p>
<p>Recall that the DMA is intended to curtail monopoly software distribution through app stores and mobile platforms' insistence on using their payment processors, whose fees are sky-high. The law is intended to extinguish developer agreements that ban software creators from informing customers that they can get a better deal by initiating payments elsewhere, or by getting a service through the web instead of via an app.</p>
<p>In response, Apple, has instituted a junk fee it calls the "Core Technology Fee": EUR0.50/install for every installation over 1m. As Proton writes, as apps grow more popular, using third-party payment systems will grow less attractive. Apple has offered discounts on its eye-watering payment processing fees to a mere 20% for the first payment and 13% for renewals. Compare this with the normal – and far, far too high – payment processing fees the rest of the industry charges, which run 2-5%. On top of all this, Apple has lied about these new discounted rates, hiding a 3% "processing" fee in its headline figures.</p>
<p>As Proton explains, paying 17% fees <em>and</em> EUR0.50 for each subscriber's renewal makes most software businesses into money-losers. The only way to keep them afloat is to use Apple's old, default payment system. That choice is made more attractive by Apple's inclusion of a "scare screen" that warns you that demons will rend your soul for all eternity if you try to use an alternative payment scheme.</p>
<p>Apple defends this scare screen by saying that it will protect users from the intrinsic unreliability of third-party processors, but as Proton points out, there are plenty of giant corporations who get to use their own payment processors with their iOS apps, because Apple decided they were too big to fuck with. Somehow, Apple can let its customers spend money with Uber, McDonald's, Airbnb, Doordash and Amazon without terrorizing them about existential security risks – but not mom-and-pop software vendors or publishers who don't want to hand 30% of their income over to a three-trillion-dollar company.</p>
<p>Apple has also reserved the right to cancel any alternative app store and nuke it from Apple customers' devices without warning, reason or liability. Those app stores also have to post a one-million euro line of credit in order to be considered for iOS. Given these terms, it's obvious that no one is going to offer a third-party app store for iOS and if they did, no one would list their apps in it.</p>
<p>The fuckery goes on and on. If an app developer opts into third-party payments, they can't use Apple's payment processing too – so any users who are scared off by the scare screen have no way to pay the app's creators. And once an app creator opts into third party payments, they can never go back – the decision is permanent.</p>
<p>Apple also reserves the right to change all of these policies later, for the worse ("I am altering the deal. Pray I don't alter it further" -D. Vader). They have warned developers that they might change the API for reporting external sales and revoke developers' right to use alternative app stores at its discretion, with no penalties if that screws the developer.</p>
<p>Apple's contempt extends beyond app marketplaces. The DMA also obliges Apple to open its platform to third party browsers and browser engines. Every browser on iOS is actually just Safari wrapped in a cosmetic skin, because Apple bans third-party browser-engines:</p>
<p><a href="https://pluralistic.net/2022/12/13/kitbashed/#app-store-tax">https://pluralistic.net/2022/12/13/kitbashed/#app-store-tax</a></p>
<p>But, as Mozilla puts it, Apple's plan for this is "as painful as possible":</p>
<p><a href="https://www.theverge.com/2024/1/26/24052067/mozilla-apple-ios-browser-rules-firefox">https://www.theverge.com/2024/1/26/24052067/mozilla-apple-ios-browser-rules-firefox</a></p>
<p>For one thing, Apple will only allow <em>European</em> customers to run alternative browser engines. That means that Firefox will have to "build and maintain two separate browser implementations — a burden Apple themselves will not have to bear."</p>
<p>(One wonders how Apple will treat Americans living in the EU, whose Apple accounts still have US billing addresses – these people will still be entitled to the browser choice that Apple is grudgingly extending to Europeans.)</p>
<p>All of this sends a strong signal that Apple is planning to run the same playbook with the DMA that Google and Facebook used on the GDPR: ignore the law, use lawyerly bullshit to chaff regulators, and hope that European federalism has sufficiently deep cracks that it can hide in them when the enforcers come to call.</p>
<p>But Apple is about to get a nasty shock. For one thing, the DMA allows wronged parties to start their search for justice in the European federal court system – bypassing the Irish regulators and courts. For another, there is a <em>global</em> movement to check corporate power, and because the tech companies do the same kinds of fuckery in every territory, regulators are able to collaborate across borders to take them down.</p>
<p>Take Apple's app store monopoly. The best reference on this is the report published by the UK Competition and Markets Authority's Digital Markets Unit:</p>
<p><a href="https://assets.publishing.service.gov.uk/media/63f61bc0d3bf7f62e8c34a02/Mobile_Ecosystems_Final_Report_amended_2.pdf">https://assets.publishing.service.gov.uk/media/63f61bc0d3bf7f62e8c34a02/Mobile_Ecosystems_Final_Report_amended_2.pdf</a></p>
<p>The devastating case that the DMU report was key to crafting the DMA – but it also inspired a US law aimed at forcing app markets open:</p>
<p><a href="https://www.congress.gov/bill/117th-congress/senate-bill/2710">https://www.congress.gov/bill/117th-congress/senate-bill/2710</a></p>
<p>And a Japanese enforcement action:</p>
<p><a href="https://asia.nikkei.com/Business/Technology/Japan-to-crack-down-on-Apple-and-Google-app-store-monopolies">https://asia.nikkei.com/Business/Technology/Japan-to-crack-down-on-Apple-and-Google-app-store-monopolies</a></p>
<p>And action in South Korea:</p>
<p><a href="https://www.reuters.com/technology/skorea-considers-505-mln-fine-against-google-apple-over-app-market-practices-2023-10-06/">https://www.reuters.com/technology/skorea-considers-505-mln-fine-against-google-apple-over-app-market-practices-2023-10-06/</a></p>
<p>These enforcers gather for annual meetings – I spoke at one in London, convened by the Competition and Markets Authority – where they compare notes, form coalitions, and plan strategy:</p>
<p><a href="https://www.eventbrite.co.uk/e/cma-data-technology-and-analytics-conference-2022-registration-308678625077">https://www.eventbrite.co.uk/e/cma-data-technology-and-analytics-conference-2022-registration-308678625077</a></p>
<p>This is where the savvying breaks down. Yes, Apple is big enough to run circles around Japan, or South Korea, or the UK. But when those countries join forces with the EU, the USA and other countries that are fed up to the eyeballs with Apple's bullshit, the company is in <em>serious</em> danger.</p>
<p>It's true that Apple has convinced a bunch of its customers that buying a phone from a multi-trillion-dollar corporation makes you a member of an oppressed religious minority:</p>
<p><a href="https://pluralistic.net/2024/01/12/youre-holding-it-wrong/#if-dishwashers-were-iphones">https://pluralistic.net/2024/01/12/youre-holding-it-wrong/#if-dishwashers-were-iphones</a></p>
<p>Some of those self-avowed members of the "Cult of Mac" are willing to take the company's pronouncements at face value and will dutifully repeat Apple's claims to be "protecting" its customers. But even that credulity has its breaking point – Apple can only poison the well so many times before people stop drinking from it. Remember when the company announced a miraculous reversal to its war on right to repair, later revealed to be a bald-faced lie?</p>
<p><a href="https://pluralistic.net/2023/09/22/vin-locking/#thought-differently">https://pluralistic.net/2023/09/22/vin-locking/#thought-differently</a></p>
<p>Or when Apple claimed to be protecting phone users' privacy, which was also a lie?</p>
<p><a href="https://pluralistic.net/2022/11/14/luxury-surveillance/#liar-liar">https://pluralistic.net/2022/11/14/luxury-surveillance/#liar-liar</a></p>
<p>The savvy will see Apple lying (again) and say, "this surprises you?" No, it doesn't surprise me, but it pisses me off – and I'm not the only one, and Apple's insulting lies are getting less effective by the day.</p>
<p>(<i>Image: <a href="https://commons.wikimedia.org/wiki/File:Annelid_worm,_Atlantic_forest,_northern_littoral_of_Bahia,_Brazil_%2816107326533%29.jpg">Alex Popovkin, Bahia, Brazil from Brazil</a>, <a href="https://creativecommons.org/licenses/by/2.0/deed.en">CC BY 2.0</a>; <a href="https://commons.wikimedia.org/wiki/File:2015-03-04_Elstar_%28apple%29_starting_putrefying_IMG_9761_bis_9772.jpg">Hubertl</a>, <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">CC BY-SA 4.0</a>; modified</i>)</p>
<hr>

<h2>Hey look at this (<a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#linkdump">permalink</a>)</h2>
<p><img decoding="async" src="https://i0.wp.com/craphound.com/images/heylookatthis.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<ul>
<li>Today in SuperMax Clubbing <a href="https://www.jwz.org/blog/2024/02/today-in-supermax-clubbing/">https://www.jwz.org/blog/2024/02/today-in-supermax-clubbing/</a>
</li>
<li>
<p>The Dirty Business of Clean Blood <a href="https://www.thebignewsletter.com/p/the-dirty-business-of-clean-blood">https://www.thebignewsletter.com/p/the-dirty-business-of-clean-blood</a></p>
</li>
<li>
<p>Antisocial Innovation <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4520979">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4520979</a></p>
</li>
</ul>
<hr>
<p><a name="retro"></a><br>
<img decoding="async" alt="A Wayback Machine banner." src="https://i0.wp.com/craphound.com/images/wayback-machine-hed-796x416.png?resize=796%2C416&amp;ssl=1" data-recalc-dims="1"></p>
<h2>This day in history (<a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#retro">permalink</a>)</h2>
<p>#20yrsago Virus writers profiled <a href="https://www.nytimes.com/2004/02/08/magazine/the-virus-underground.html">https://www.nytimes.com/2004/02/08/magazine/the-virus-underground.html</a></p>
<p>#20yrsago Open WiFi ethics <a href="https://www.nytimes.com/2004/02/08/magazine/the-way-we-live-now-2-8-04-the-ethicist-wi-fi-fairness.html">https://www.nytimes.com/2004/02/08/magazine/the-way-we-live-now-2-8-04-the-ethicist-wi-fi-fairness.html</a></p>
<p>#15yrsago Neil Gaiman on the humble button <a href="https://www.youtube.com/watch?v=vQC0QVXa33o">https://www.youtube.com/watch?v=vQC0QVXa33o</a></p>
<p>#10yrsago Verizon support rep admits anti-Netflix throttling <a href="https://web.archive.org/web/20140205145403/https://davesblog.com/blog/2014/02/05/verizon-using-recent-net-neutrality-victory-to-wage-war-against-netflix/">https://web.archive.org/web/20140205145403/https://davesblog.com/blog/2014/02/05/verizon-using-recent-net-neutrality-victory-to-wage-war-against-netflix/</a></p>
<p>#10yrsago Seattle cop fired for harassing photographer <a href="https://www.thestranger.com/blogs/2014/02/03/18816445/sheriff-fires-cop-who-threatened-to-arrest-me-for-taking-photos-of-cops">https://www.thestranger.com/blogs/2014/02/03/18816445/sheriff-fires-cop-who-threatened-to-arrest-me-for-taking-photos-of-cops</a></p>
<p>#10yrsago Parents of Buddhist student sue “Bible Belt” Louisiana school over forced prayer, religious discrimination <a href="https://action.aclu.org/petition/end_discrimination_negreet_high">https://action.aclu.org/petition/end_discrimination_negreet_high</a></p>
<p>#5yrsago Juul’s strategy for success: target children, steadily ramp up nicotine levels <a href="https://tobaccocontrol.bmj.com/content/28/6/623">https://tobaccocontrol.bmj.com/content/28/6/623</a></p>
<p>#5yrsago Swedes are entitled to six months’ leave to start a business, look after a sick relative, or study <a href="https://www.bbc.com/worklife/article/20190206-swedens-surprising-rule-for-time-off">https://www.bbc.com/worklife/article/20190206-swedens-surprising-rule-for-time-off</a></p>
<p>#5yrsago Leak reveals that hundreds of bounty hunters have had access to super-fine-grained mobile location data for years <a href="https://www.vice.com/en/article/43z3dn/hundreds-bounty-hunters-att-tmobile-sprint-customer-location-data-years">https://www.vice.com/en/article/43z3dn/hundreds-bounty-hunters-att-tmobile-sprint-customer-location-data-years</a></p>
<p>#1yrago The Collective Intelligence Institute <a href="https://pluralistic.net/2023/02/07/full-stack-luddites/#subsidiarity">https://pluralistic.net/2023/02/07/full-stack-luddites/#subsidiarity</a></p>
<hr>
<p><a name="bragsheet"></a><br>
<img decoding="async" src="https://i0.wp.com/craphound.com/images/colophonimages.jpeg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<h2>Colophon (<a href="https://pluralistic.net/2024/02/06/spoil-the-bunch/#bragsheet">permalink</a>)</h2>
<p>Today's top sources: Hacker News (<a href="https://news.ycombinator.com/">https://news.ycombinator.com/</a>), Slashdot (<a href="https://slashdot.org/">https://slashdot.org/</a>).</p>
<p>Currently writing:</p>
<ul>
<li>A Little Brother short story about DIY insulin PLANNING
</li>
<li>
<p>Picks and Shovels, a Martin Hench noir thriller about the heroic era of the PC. FORTHCOMING TOR BOOKS JAN 2025</p>
</li>
<li>
<p>The Bezzle, a Martin Hench noir thriller novel about the prison-tech industry. FORTHCOMING TOR BOOKS FEB 2024</p>
</li>
<li>
<p>Vigilant, Little Brother short story about remote invigilation. FORTHCOMING ON TOR.COM</p>
</li>
<li>
<p>Spill, a Little Brother short story about pipeline protests. FORTHCOMING ON TOR.COM</p>
</li>
</ul>
<p>Latest podcast: My Marshall McLuhan Lecture on enshittification from Berlin's transmediale conference <a href="https://craphound.com/news/2024/02/05/my-marshall-mcluhan-lecture-on-enshittification-from-berlins-transmediale-conference/">https://craphound.com/news/2024/02/05/my-marshall-mcluhan-lecture-on-enshittification-from-berlins-transmediale-conference/</a><br>
Upcoming appearances:</p>
<ul>
<li>The Bezzle at Weller Book Works (Salt Lake City), Feb 21<br>
<a href="https://www.wellerbookworks.com/event/store-cory-doctorow-feb-21-630-pm">https://www.wellerbookworks.com/event/store-cory-doctorow-feb-21-630-pm</a>
</li>
<li>
<p>The Bezzle at Third Place Books (Seattle), Feb 26<br>
<a href="https://www.thirdplacebooks.com/event/cory-doctorow">https://www.thirdplacebooks.com/event/cory-doctorow</a></p>
</li>
<li>
<p>Tucson Festival of Books, Mar 9/10<br>
<a href="https://tucsonfestivalofbooks.org/?id=676">https://tucsonfestivalofbooks.org/?id=676</a></p>
</li>
<li>
<p>Enshittification: How the Internet Went Bad and How to Get it Back (virtual), Mar 26<br>
<a href="https://libcal.library.ubc.ca/event/3781006">https://libcal.library.ubc.ca/event/3781006</a></p>
</li>
<li>
<p>Media Ecology Association keynote, Jun 6-9 (Amherst, NY)<br>
<a href="https://media-ecology.org/convention">https://media-ecology.org/convention</a></p>
</li>
</ul>
<p>Recent appearances:</p>
<ul>
<li>Enshittification: The Rise and Fall of Big Tech (Crash Course Economics)<br>
<a href="https://www.youtube.com/watch?v=E7AxrFQ7jIM">https://www.youtube.com/watch?v=E7AxrFQ7jIM</a>
</li>
<li>
<p>Generation of Lost Causes with Vass Bednar (Toronto Public Library)<br>
<a href="https://www.youtube.com/watch?v=-rGj5VaJSDQ">https://www.youtube.com/watch?v=-rGj5VaJSDQ</a></p>
</li>
<li>
<p>Low-Key Clippy (This Week In Tech)<br>
<a href="https://twit.tv/shows/this-week-in-tech/episodes/963">https://twit.tv/shows/this-week-in-tech/episodes/963</a></p>
</li>
</ul>
<p>Latest books:</p>
<ul>
<li>"The Lost Cause:" a solarpunk novel of hope in the climate emergency, Tor Books (US), Head of Zeus (UK), November 2023 (<a href="http://lost-cause.org/">http://lost-cause.org</a>). Signed, personalized copies at Dark Delicacies (<a href="https://www.darkdel.com/store/p3007/Pre-Order_Signed_Copies%3A_The_Lost_Cause_HB.html#/">https://www.darkdel.com/store/p3007/Pre-Order_Signed_Copies%3A_The_Lost_Cause_HB.html#/</a>)
</li>
<li>
<p>"The Internet Con": A nonfiction book about interoperability and Big Tech (Verso) September 2023 (<a href="http://seizethemeansofcomputation.org/">http://seizethemeansofcomputation.org</a>). Signed copies at Book Soup (<a href="https://www.booksoup.com/book/9781804291245">https://www.booksoup.com/book/9781804291245</a>).</p>
</li>
<li>
<p>"Red Team Blues": "A grabby, compulsive thriller that will leave you knowing more about how the world works than you did before." Tor Books <a href="http://redteamblues.com/">http://redteamblues.com</a>. Signed copies at Dark Delicacies (US): <a href="https://www.darkdel.com/store/p2873/Wed%2C_Apr_26th_6pm%3A_Red_Team_Blues%3A_A_Martin_Hench_Novel_HB.html#/"> and Forbidden Planet (UK): </a><a href="https://forbiddenplanet.com/385004-red-team-blues-signed-edition-hardcover/">https://forbiddenplanet.com/385004-red-team-blues-signed-edition-hardcover/</a>.</p>
</li>
<li>
<p>"Chokepoint Capitalism: How to Beat Big Tech, Tame Big Content, and Get Artists Paid, with Rebecca Giblin", on how to unrig the markets for creative labor, Beacon Press/Scribe 2022 <a href="https://chokepointcapitalism.com/">https://chokepointcapitalism.com</a></p>
</li>
<li>
<p>"Attack Surface": The third Little Brother novel, a standalone technothriller for adults. The <em>Washington Post</em> called it "a political cyberthriller, vigorous, bold and savvy about the limits of revolution and resistance." Order signed, personalized copies from Dark Delicacies <a href="https://www.darkdel.com/store/p1840/Available_Now%3A_Attack_Surface.html">https://www.darkdel.com/store/p1840/Available_Now%3A_Attack_Surface.html</a></p>
</li>
<li>
<p>"How to Destroy Surveillance Capitalism": an anti-monopoly pamphlet analyzing the true harms of surveillance capitalism and proposing a solution. <a href="https://onezero.medium.com/how-to-destroy-surveillance-capitalism-8135e6744d59?sk=f6cd10e54e20a07d4c6d0f3ac011af6b">https://onezero.medium.com/how-to-destroy-surveillance-capitalism-8135e6744d59?sk=f6cd10e54e20a07d4c6d0f3ac011af6b</a>) (signed copies: <a href="https://www.darkdel.com/store/p2024/Available_Now%3A__How_to_Destroy_Surveillance_Capitalism.html">https://www.darkdel.com/store/p2024/Available_Now%3A__How_to_Destroy_Surveillance_Capitalism.html</a>)</p>
</li>
<li>
<p>"Little Brother/Homeland": A reissue omnibus edition with a new introduction by Edward Snowden: <a href="https://us.macmillan.com/books/9781250774583">https://us.macmillan.com/books/9781250774583</a>; personalized/signed copies here: <a href="https://www.darkdel.com/store/p1750/July%3A__Little_Brother_%26_Homeland.html">https://www.darkdel.com/store/p1750/July%3A__Little_Brother_%26_Homeland.html</a></p>
</li>
<li>
<p>"Poesy the Monster Slayer" a picture book about monsters, bedtime, gender, and kicking ass. Order here: <a href="https://us.macmillan.com/books/9781626723627">https://us.macmillan.com/books/9781626723627</a>. Get a personalized, signed copy here: <a href="https://www.darkdel.com/store/p2682/Corey_Doctorow%3A_Poesy_the_Monster_Slayer_HB.html#/">https://www.darkdel.com/store/p2682/Corey_Doctorow%3A_Poesy_the_Monster_Slayer_HB.html#/</a>.</p>
</li>
</ul>
<p>Upcoming books:</p>
<ul>
<li>The Bezzle: a sequel to "Red Team Blues," about prison-tech and other grifts, Tor Books, February 2024
</li>
<li>
<p>Picks and Shovels: a sequel to "Red Team Blues," about the heroic era of the PC, Tor Books, February 2025</p>
</li>
<li>
<p>Unauthorized Bread: a graphic novel adapted from my novella about refugees, toasters and DRM, FirstSecond, 2025</p>
</li>
</ul>
<hr>
<p><img decoding="async" src="https://i0.wp.com/craphound.com/images/by.svg.png?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<p>This work – excluding any serialized fiction – is licensed under a Creative Commons Attribution 4.0 license. That means you can use it any way you like, including commercially, provided that you attribute it to me, Cory Doctorow, and include a link to pluralistic.net.</p>
<p><a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
<p>Quotations and images are not included in this license; they are included either under a limitation or exception to copyright, or on the basis of a separate license. Please exercise caution.</p>
<hr>
<h2>How to get Pluralistic:</h2>
<p>Blog (no ads, tracking, or data-collection):</p>
<p><a href="http://pluralistic.net/">Pluralistic.net</a></p>
<p>Newsletter (no ads, tracking, or data-collection):</p>
<p><a href="https://pluralistic.net/plura-list">https://pluralistic.net/plura-list</a></p>
<p>Mastodon (no ads, tracking, or data-collection):</p>
<p><a href="https://mamot.fr/@pluralistic">https://mamot.fr/@pluralistic</a></p>
<p>Medium (no ads, paywalled):</p>
<p><a href="https://doctorow.medium.com/">https://doctorow.medium.com/</a></p>
<p>Twitter (mass-scale, unrestricted, third-party surveillance and advertising):</p>
<p><a href="https://twitter.com/doctorow">https://twitter.com/doctorow</a></p>
<p>Tumblr (mass-scale, unrestricted, third-party surveillance and advertising):</p>
<p><a href="https://mostlysignssomeportents.tumblr.com/tagged/pluralistic">https://mostlysignssomeportents.tumblr.com/tagged/pluralistic</a></p>
<p>"<em>When life gives you SARS, you make sarsaparilla</em>" -Joey "Accordion Guy" DeVilla</p>

	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Implementing system-versioned tables in Postgres (118 pts)]]></title>
            <link>https://hypirion.com/musings/implementing-system-versioned-tables-in-postgres</link>
            <guid>39285752</guid>
            <pubDate>Wed, 07 Feb 2024 07:53:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://hypirion.com/musings/implementing-system-versioned-tables-in-postgres">https://hypirion.com/musings/implementing-system-versioned-tables-in-postgres</a>, See on <a href="https://news.ycombinator.com/item?id=39285752">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content"><article>

<p>I like Postgres, but there are things I really wish they would implement. For
example, the <a href="https://en.wikipedia.org/wiki/SQL:2011">SQL:2011</a> spec adds
support for system-versioned tables. Unfortunately, Postgres and SQLite are
basically the only SQL databases that don’t yet support it. While it has been
discussed in length at the <a href="https://www.postgresql.org/message-id/flat/CALAY4q-cXCD0r4OybD%3Dw7Hr7F026ZUY6%3DLMsVPUe6yw_PJpTKQ%40mail.gmail.com">postgreqsl-hackers’ mailing
list</a>,
it seems like the discussion and implementation efforts have been silent in all
of 2023.</p>

<p>Now, there are extensions out there that implement versioning –
<a href="https://clarkdave.net/2015/02/historical-records-with-postgresql-and-temporal-tables-and-sql-2011/"><code>temporal_tables</code></a>
being the most popular I think – but none are supported for managed Postgres
instances on e.g. Azure or AWS. This means that if we want system-versioned
tables, we’re forced to make it ourselves.</p>

<p>I’m not going to spend paragraph after paragraph explaining why I want temporal
tables before we go to the actual implementation, but I’d like to note that I
want to use these tables primarily for user data, generated by users when they
click/type something on a webpage. They can be used for other things, but if you
have time series, want to do event sourcing or online analytical processing, you
should probably pick some technology suited for that task instead of throwing
temporal tables at it.</p>

<p>If you’re only after the end result, feel free to go to my GitHub repository
<a href="https://github.com/hypirion/time-travelling-todo-lists-in-postgres">time-travelling-todo-lists-in-postgres</a>.
It is a todo list app with time-travelling capabilities, using the
implementation described here. There you’ll have information on how to use it
yourself, how to query the past, as well as gotchas and common pitfalls.</p>

<h2 id="the-implementation">The Implementation</h2>

<p>The implementation I’ve decided on consists of two tables for every table I want
version controlled: A snapshot table for the current state, and a history table.</p>

<svg xmlns="http://www.w3.org/2000/svg" width="640" height="192.709" viewBox="0 0 116.798 35.169"><defs><marker id="a" markerHeight="6.155" markerWidth="5.324" orient="auto-start-reverse" preserveAspectRatio="xMidYMid" refX="0" refY="0" style="overflow:visible" viewBox="0 0 5.324 6.155"><path d="m5.77 0-8.65 5V-5Z" style="fill:context-stroke;fill-rule:evenodd;stroke:context-stroke;stroke-width:1pt" transform="scale(.5)"></path></marker></defs><path d="M16.696 27.08h121.376v35.163H16.696z" style="opacity:.5;fill:#fff;stroke:none;stroke-width:.405499;stroke-linecap:round;stroke-dasharray:none" transform="translate(-19.358 -27.08)"></path><path d="M25.568 37.486h28.927v19.196H25.568z" style="opacity:1;fill:none;stroke:#000;stroke-width:.5;stroke-linecap:round;stroke-dasharray:none" transform="translate(-19.358 -27.08)"></path><text xml:space="preserve" x="30.997" y="45.291" style="font-size:4.23333px;line-height:1.25;font-family:&quot;Source Code Pro&quot;;-inkscape-font-specification:&quot;Source Code Pro&quot;;opacity:1;stroke-width:.264583" transform="translate(-19.358 -27.08)"><tspan x="30.997" y="45.291" style="stroke-width:.264583">Snapshot</tspan><tspan x="30.997" y="50.582" style="stroke-width:.264583">Table</tspan></text><path d="M97.797 37.924h28.927V57.12H97.797z" style="opacity:1;fill:none;stroke:#000;stroke-width:.5;stroke-linecap:round;stroke-dasharray:none" transform="translate(-19.358 -27.08)"></path><text xml:space="preserve" x="103.227" y="45.729" style="font-size:4.23333px;line-height:1.25;font-family:&quot;Source Code Pro&quot;;-inkscape-font-specification:&quot;Source Code Pro&quot;;opacity:1;stroke-width:.264583" transform="translate(-19.358 -27.08)"><tspan x="103.227" y="45.729" style="stroke-width:.264583">History</tspan><tspan x="103.227" y="51.021" style="stroke-width:.264583">Table</tspan></text><path d="M54.73 46.259c15.61-4.797 29.775-4.252 42.848.328" style="opacity:1;fill:none;stroke:#000;stroke-width:.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#a)" transform="translate(-19.358 -27.08)"></path><text xml:space="preserve" x="69.26" y="33.634" style="font-size:3.175px;line-height:1.25;font-family:&quot;Source Code Pro&quot;;-inkscape-font-specification:&quot;Source Code Pro&quot;;opacity:1;stroke-width:.264583" transform="translate(-19.358 -27.08)"><tspan x="69.26" y="33.634" style="font-size:3.175px;stroke-width:.264583">Inserts</tspan><tspan x="69.26" y="37.603" style="font-size:3.175px;stroke-width:.264583">Updates</tspan><tspan x="69.26" y="41.572" style="font-size:3.175px;stroke-width:.264583">Deletes</tspan></text></svg>

<p>The snapshot table is the one used for the current state of the world and is the
one you’ll usually work with: This works exactly like any other mutable in-place
table you’re familiar with. The history table is the one you’ll use when you
want to query through history.</p>

<p>First off, we define the tables:</p>

<div><pre><code><span>CREATE</span> <span>TABLE</span> <span>mytable</span> <span>(</span>
  <span>mytable_id</span> <span>UUID</span> <span>PRIMARY</span> <span>KEY</span> <span>DEFAULT</span> <span>gen_random_uuid</span><span>(),</span>
  <span>data</span> <span>TEXT</span> <span>NOT</span> <span>NULL</span>
<span>);</span>

<span>CREATE</span> <span>TABLE</span> <span>mytable_history</span> <span>(</span>
  <span>-- copy these fields, always keep them first</span>
  <span>history_id</span> <span>UUID</span> <span>PRIMARY</span> <span>KEY</span><span>,</span>
  <span>systime</span> <span>TSTZRANGE</span> <span>NOT</span> <span>NULL</span> <span>CHECK</span> <span>(</span><span>NOT</span> <span>ISEMPTY</span><span>(</span><span>systime</span><span>)),</span>

  <span>-- table fields, in the exact same order as in mytable</span>
  <span>mytable_id</span> <span>UUID</span> <span>NOT</span> <span>NULL</span><span>,</span>
  <span>data</span> <span>TEXT</span> <span>NOT</span> <span>NULL</span>
<span>);</span>

<span>ALTER</span> <span>TABLE</span> <span>mytable_history</span>
  <span>ADD</span> <span>CONSTRAINT</span> <span>mytable_history_overlapping_excl</span>
  <span>EXCLUDE</span> <span>USING</span> <span>GIST</span> <span>(</span><span>mytable_id</span> <span>WITH</span> <span>=</span><span>,</span> <span>systime</span> <span>WITH</span> <span>&amp;&amp;</span><span>);</span>
</code></pre></div>

<p>The history table contains the exact same fields as the snapshot table, but the
first two columns in the table are a <code>history_id</code> field and the system time
(<code>systime</code>) it was active. <code>lower(systime)</code> is when this version of the record
was initially stored, and <code>upper(systime)</code> is when this record was no longer
valid. When <code>upper(systime)</code> is infinity, the record has not yet been deleted.
The interval can’t be empty obviously, as that wouldn’t match any time interval.</p>

<p>Next, we have a GiST index, which prevents us from having overlapping time
intervals for the same primary key, and also speeds up queries on the history.
You may want to add some more indices on the history table, depending on what
kind of queries you want to do on it.</p>

<p>Then we set up triggers for insert, update and delete:</p>

<div><pre><code><span>--</span>
<span>-- insert:</span>
<span>--</span>

<span>CREATE</span> <span>OR</span> <span>REPLACE</span> <span>FUNCTION</span> <span>copy_mytable_inserts_into_history</span><span>()</span>
          <span>RETURNS</span> <span>TRIGGER</span> <span>AS</span> <span>$$</span>
  <span>INSERT</span> <span>INTO</span> <span>mytable_history</span>
    <span>SELECT</span> <span>gen_random_uuid</span><span>(),</span> <span>tstzrange</span><span>(</span><span>NOW</span><span>(),</span> <span>NULL</span><span>),</span> <span>NEW</span><span>.</span><span>*</span><span>;</span>
  <span>RETURN</span> <span>NEW</span><span>;</span>
<span>$$</span> <span>LANGUAGE</span> <span>plpgsql</span><span>;</span>

<span>CREATE</span> <span>TRIGGER</span> <span>mytable_history_insert_trigger</span>
<span>AFTER</span> <span>INSERT</span> <span>ON</span> <span>mytable</span>
    <span>FOR</span> <span>EACH</span> <span>ROW</span>
    <span>EXECUTE</span> <span>PROCEDURE</span> <span>copy_mytable_inserts_into_history</span><span>();</span>

<span>--</span>
<span>-- update:</span>
<span>--</span>

<span>CREATE</span> <span>OR</span> <span>REPLACE</span> <span>FUNCTION</span> <span>copy_mytable_updates_into_history</span><span>()</span>
          <span>RETURNS</span> <span>TRIGGER</span> <span>AS</span> <span>$$</span>
  <span>-- ignore changes inside the same tx</span>
  <span>DELETE</span> <span>FROM</span> <span>mytable_history</span>
    <span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>NEW</span><span>.</span><span>mytable_id</span>
      <span>AND</span> <span>lower</span><span>(</span><span>systime</span><span>)</span> <span>=</span> <span>NOW</span><span>()</span>
      <span>AND</span> <span>upper_inf</span><span>(</span><span>systime</span><span>);</span>
  <span>-- close current row</span>
  <span>-- (if any, may be deleted by previous line)</span>
  <span>UPDATE</span> <span>mytable_history</span>
    <span>SET</span> <span>systime</span> <span>=</span> <span>tstzrange</span><span>(</span><span>lower</span><span>(</span><span>systime</span><span>),</span> <span>NOW</span><span>())</span>
    <span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>NEW</span><span>.</span><span>mytable_id</span>
      <span>AND</span> <span>systime</span> <span>@&gt;</span> <span>NOW</span><span>();</span>
  <span>-- insert new row</span>
  <span>INSERT</span> <span>INTO</span> <span>mytable_history</span>
    <span>SELECT</span> <span>gen_random_uuid</span><span>(),</span> <span>tstzrange</span><span>(</span><span>NOW</span><span>(),</span> <span>NULL</span><span>),</span> <span>NEW</span><span>.</span><span>*</span><span>;</span>
  <span>RETURN</span> <span>NEW</span><span>;</span>
<span>$$</span> <span>LANGUAGE</span> <span>plpgsql</span><span>;</span>

<span>CREATE</span> <span>TRIGGER</span> <span>mytable_history_update_trigger</span>
<span>AFTER</span> <span>UPDATE</span> <span>ON</span> <span>mytable</span>
    <span>FOR</span> <span>EACH</span> <span>ROW</span>
    <span>WHEN</span> <span>(</span><span>OLD</span><span>.</span><span>*</span> <span>IS</span> <span>DISTINCT</span> <span>FROM</span> <span>NEW</span><span>.</span><span>*</span><span>)</span>
    <span>-- ^ to avoid updates on "noop calls", as best as possible</span>
    <span>EXECUTE</span> <span>PROCEDURE</span> <span>copy_mytable_updates_into_history</span><span>();</span>

<span>--</span>
<span>-- delete:</span>
<span>--</span>

<span>CREATE</span> <span>OR</span> <span>REPLACE</span> <span>FUNCTION</span> <span>copy_mytable_deletes_into_history</span><span>()</span>
          <span>RETURNS</span> <span>TRIGGER</span> <span>AS</span> <span>$$</span>
  <span>-- close current row</span>
  <span>-- note: updates and then deletes for same id</span>
  <span>-- in same tx will fail</span>
  <span>UPDATE</span> <span>mytable_history</span>
    <span>SET</span> <span>systime</span> <span>=</span> <span>tstzrange</span><span>(</span><span>lower</span><span>(</span><span>systime</span><span>),</span> <span>NOW</span><span>())</span>
    <span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>OLD</span><span>.</span><span>mytable_id</span>
      <span>AND</span> <span>systime</span> <span>@&gt;</span> <span>NOW</span><span>();</span>
  <span>RETURN</span> <span>OLD</span><span>;</span>
<span>$$</span> <span>LANGUAGE</span> <span>plpgsql</span><span>;</span>


<span>CREATE</span> <span>TRIGGER</span> <span>mytable_history_delete_trigger</span>
<span>AFTER</span> <span>DELETE</span> <span>ON</span> <span>mytable</span>
    <span>FOR</span> <span>EACH</span> <span>ROW</span>
    <span>EXECUTE</span> <span>PROCEDURE</span> <span>copy_mytable_deletes_into_history</span><span>();</span>
</code></pre></div>

<p>This is… long, to put it mildly, so let’s go through some common tricks all
the three triggers (ab)use, and then go over some design decisions I’ve decided
on for updates and deletes. We’ll get around to shortening it at the end.</p>

<h3 id="column-order-matters">Column Order Matters</h3>

<p>Whenever we insert new data into the history table, it will always be on this
form:</p>

<div><pre><code><span>INSERT</span> <span>INTO</span> <span>mytable_history</span>
  <span>SELECT</span> <span>gen_random_uuid</span><span>(),</span> <span>tstzrange</span><span>(</span><span>NOW</span><span>(),</span> <span>NULL</span><span>),</span> <span>NEW</span><span>.</span><span>*</span><span>;</span>
</code></pre></div>

<p>There are two parts of Postgres we abuse here. If we look at <a href="https://www.postgresql.org/docs/16/sql-insert.html">the docs for
INSERT</a>, we’ll see the
following paragraph:</p>

<blockquote>
  <p>The target column names can be listed in any order. If no list of column names
is given at all, the default is all the columns of the table in their declared
order; or the first <strong><em>N</em></strong> column names, if there are only <strong><em>N</em></strong> columns
supplied by the <code>VALUES</code> clause or <strong><em><code>query</code></em></strong>. The values supplied by the
<code>VALUES</code> clause or <strong><em><code>query</code></em></strong> are associated with the explicit or implicit
column list left-to-right.</p>
</blockquote>

<p>The other is that <code>NEW.*</code> expands in the exact same order. In our case, <code>NEW.*</code>
will expand into <code>NEW.mytable_id, NEW.data</code>, and that means it fits perfectly
with the rows of <code>mytable_history</code>:</p>

<div><pre><code><span>INSERT</span> <span>INTO</span> <span>mytable_history</span>
  <span>SELECT</span> <span>gen_random_uuid</span><span>(),</span> <span>tstzrange</span><span>(</span><span>NOW</span><span>(),</span> <span>NULL</span><span>),</span>
         <span>NEW</span><span>.</span><span>mytable_id</span><span>,</span> <span>NEW</span><span>.</span><span>data</span><span>;</span>
</code></pre></div>

<p>This is pretty clever, but it’s also hacky. For this to work, there are two
things you have to get right:</p>

<ul>
  <li>Column order MUST be identical after the <code>history_id</code> and <code>systime</code> columns.</li>
  <li>Whenever you add new columns, you MUST add them in the same order to both
tables.</li>
</ul>

<p>If you don’t do so, you will end up with broken inserts in the history table.
Those will at best give you an error, but they can also silently corrupt your
data.</p>

<p>I don’t like that, but there’s a reason why I don’t do</p>

<div><pre><code><span>INSERT</span> <span>INTO</span> <span>mytable_history</span>
  <span>(</span><span>history_id</span><span>,</span> <span>systime</span><span>,</span> <span>mytable_id</span><span>,</span> <span>data</span><span>)</span>
<span>SELECT</span> <span>gen_random_uuid</span><span>(),</span> <span>tstzrange</span><span>(</span><span>NOW</span><span>(),</span> <span>NULL</span><span>),</span>
       <span>NEW</span><span>.</span><span>mytable_id</span><span>,</span> <span>NEW</span><span>.</span><span>data</span><span>;</span>
</code></pre></div>

<p>and that’s because it creates <strong>a lot</strong> of effort when you want to remove,
rename or add a new column to the table. By omitting the list of target column
names and expanding <code>NEW.*</code>, the query will automatically work whenever I decide
to add, update or remove columns – provided I do it for both tables.</p>

<h3 id="on-system-time">On System Time</h3>

<p>If you haven’t worked with Postgres ranges before, the range queries may look a
bit cryptic. The Postgres docs have an excellent description of <a href="https://www.postgresql.org/docs/16/rangetypes.html">range
types</a> and <a href="https://www.postgresql.org/docs/16/functions-range.html">range
functions</a>, which
should cover essentially everything related to them. I don’t use much of it
though, so since I guess you don’t want to go through it all, I’ll just list up
what the different parts do.</p>

<p>The expression</p>



<p>creates the timestamptz range <code>[a, b)</code>: from <em>a</em>, up to and excluding <em>b</em>. If
either <em>a</em> or <em>b</em> are <code>NULL</code>, then they are infinitely far in the past or
future, respectively.</p>

<p><code>lower(x)</code> returns the lower bound of the range, and <code>upper_inf(x)</code> returns
true if the upper bound is infinite.</p>

<p>Finally, <code>systime @&gt; NOW()</code> checks if <code>systime</code> contains <code>NOW()</code> – you can
think of it as <code>a &lt;= NOW() AND NOW() &lt; b</code>.</p>

<p>The reason for using ranges isn’t primarily because I want to use these
functions, but rather because the GiST index ensures no overlap and makes me
less worried that my queries will be super slow by accident.</p>

<h3 id="inserts">Inserts</h3>

<p>With those two things described, inserts are more or less described in their
entirety: We insert the row into the history table, saying it’s valid from the
transaction start time until forever.</p>

<h3 id="updates">Updates</h3>

<p>The update trigger looks like this:</p>

<div><pre><code><span>-- ignore changes inside the same tx</span>
<span>DELETE</span> <span>FROM</span> <span>mytable_history</span>
  <span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>NEW</span><span>.</span><span>mytable_id</span>
    <span>AND</span> <span>lower</span><span>(</span><span>systime</span><span>)</span> <span>=</span> <span>NOW</span><span>()</span>
    <span>AND</span> <span>upper_inf</span><span>(</span><span>systime</span><span>);</span>
<span>-- close current row</span>
<span>UPDATE</span> <span>mytable_history</span>
  <span>SET</span> <span>systime</span> <span>=</span> <span>tstzrange</span><span>(</span><span>lower</span><span>(</span><span>systime</span><span>),</span> <span>NOW</span><span>())</span>
  <span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>NEW</span><span>.</span><span>mytable_id</span>
    <span>AND</span> <span>systime</span> <span>@&gt;</span> <span>NOW</span><span>();</span>
<span>-- insert new row</span>
<span>INSERT</span> <span>INTO</span> <span>mytable_history</span>
  <span>SELECT</span> <span>gen_random_uuid</span><span>(),</span> <span>tstzrange</span><span>(</span><span>NOW</span><span>(),</span> <span>null</span><span>),</span> <span>NEW</span><span>.</span><span>*</span><span>;</span>
</code></pre></div>

<p>It is set up so that multiple updates in the same transaction will only produce
a single history row. That’s intentional, because otherwise ordering would be
harder to implement.</p>

<p>If you need multiple versions in the same transaction, you’ll have to replace
the half-open interval (the default <code>[)</code>) with a closed one (<code>[]</code>). If not,
you’ll end up with empty intervals, which aren’t tied to any timestamps. But now
you have to handle identical states at a single timestamp, as multiple records
can get the <code>[NOW(), NOW()]</code> interval. If the ordering matters in that case,
you’ll have to add another ordering ID to get rows back in the inserted order.</p>

<p>I don’t need that, it’s complicated, and I don’t think it makes sense to have
multiple states at a single point in time anyway. If you need that, you’re
probably interested in an event table or something else instead.</p>

<h3 id="deletions">Deletions</h3>

<div><pre><code><span>-- close current row</span>
<span>-- note: updates and then deletes for same id</span>
<span>-- in same tx will fail</span>
<span>UPDATE</span> <span>mytable_history</span>
  <span>SET</span> <span>systime</span> <span>=</span> <span>tstzrange</span><span>(</span><span>lower</span><span>(</span><span>systime</span><span>),</span> <span>NOW</span><span>())</span>
  <span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>OLD</span><span>.</span><span>mytable_id</span>
    <span>AND</span> <span>systime</span> <span>@&gt;</span> <span>NOW</span><span>();</span>
</code></pre></div>

<p>When it comes to atomicity, deletions are somewhat of an outlier. If you update
and then delete something in the same transaction, what should you do? And uh..
why would you do that in the first place?</p>

<p>“Update and delete” seems quite handy if you want to write down who deleted the
object, in which case the deletion will look like this:</p>

<div><pre><code><span>UPDATE</span> <span>mytable</span>
  <span>SET</span> <span>deleted_by</span> <span>=</span> <span>$</span><span>{</span><span>deleted_by</span><span>}</span>
<span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>$</span><span>{</span><span>mytable_id</span><span>};</span>

<span>DELETE</span> <span>FROM</span> <span>mytable</span>
<span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>$</span><span>{</span><span>mytable_id</span><span>};</span>
</code></pre></div>

<p>… however, it leaves you with an annoying record: The “delete” record, which
isn’t really part of the history, but only contains some information about the
deletion itself.</p>

<p>I think it’s better to make a little bit of effort for these, even if you don’t
have an immediate need for a changelog/audit log: Store the deletion information
in a table. You could create one for all tables, or just one for everything
depending on how lazy you are:</p>

<div><pre><code><span>CREATE</span> <span>TABLE</span> <span>delete_log</span> <span>(</span>
  <span>delete_log_id</span> <span>UUID</span> <span>PRIMARY</span> <span>KEY</span> <span>DEFAULT</span> <span>gen_random_uuid</span><span>(),</span>
  <span>table_name</span> <span>TEXT</span> <span>NOT</span> <span>NULL</span><span>,</span>
  <span>resource_id</span> <span>UUID</span> <span>NOT</span> <span>NULL</span><span>,</span>
  <span>deleted_at</span> <span>TIMESTAMPTZ</span> <span>NOT</span> <span>NULL</span> <span>DEFAULT</span> <span>NOW</span><span>(),</span>
  <span>deleted_by</span> <span>UUID</span> <span>NOT</span> <span>NULL</span> <span>REFERENCES</span> <span>users</span><span>(</span><span>user_id</span><span>)</span>
<span>);</span>

<span>-- then delete as follows</span>

<span>INSERT</span> <span>INTO</span> <span>delete_log</span> <span>(</span><span>table_name</span><span>,</span> <span>resource_id</span><span>,</span> <span>deleted_by</span><span>)</span>
<span>VALUES</span> <span>(</span><span>'mytable'</span><span>,</span> <span>$</span><span>{</span><span>mytable_id</span><span>},</span> <span>$</span><span>{</span><span>deleted_by</span><span>});</span>

<span>DELETE</span> <span>FROM</span> <span>mytable</span>
<span>WHERE</span> <span>mytable_id</span> <span>=</span> <span>$</span><span>{</span><span>mytable_id</span><span>};</span>
</code></pre></div>

<p>I can’t make a trigger out of this easily (or maybe not at all), because
<code>deleted_by</code> is information we’ll have to pass down into the database somehow.</p>

<h2 id="annoying-conflicts">Annoying Conflicts</h2>

<p>While the triggers themselves don’t impact what you can and cannot do, the GiST
index will blow up most attempts at concurrently updating the same item:</p>

<div><pre><code><span>ALTER</span> <span>TABLE</span> <span>mytable_history</span>
  <span>ADD</span> <span>CONSTRAINT</span> <span>mytable_history_overlapping_excl</span>
  <span>EXCLUDE</span> <span>USING</span> <span>GIST</span> <span>(</span><span>mytable_id</span> <span>WITH</span> <span>=</span><span>,</span> <span>systime</span> <span>WITH</span> <span>&amp;&amp;</span><span>);</span>
</code></pre></div>

<p>This will even fail if you do <code>SELECT .. FOR UPDATE</code>. When you have two
transactions A and B coming in, if the transaction with the most recent <code>NOW()</code>
timestamp gets the lock first, the second transaction will fail because
<code>systime</code> ends up as an empty interval.</p>

<p>It’s annoying, but not a big deal for me at least. The tables where I need
history usually never need write concurrency on the same ID. And if they do,
it’s not hard to add a retry loop around the writes… though of course, it
adds a pitfall you need to be aware of.</p>

<p>Trying to fix this by using <code>CLOCK_TIMESTAMP()</code> instead of <code>NOW()</code> will only
make things worse in my opinion. If you desire to insert multiple items at the
same time, usually none of them will have the same timestamp. That makes certain
queries on the history table technically wrong:</p>

<p>Imagine you have a list and list element table, and a user creates a new list
with 10 elements. With <code>CLOCK_TIMESTAMP()</code>, you now end up with 11 different
timestamps: One for the list root, and 10 for each list element. If you wondered
what the list looked like when it was first created, you’d first have to fetch
the list root. Then you have to fetch all elements that were in the list, say,
as of 1 second after it was created, to be relatively sure all the list elements
are also returned. But any attempt at recreating the state at some arbitrary
time in the past may end up with partial/corrupt results. For that reason, I
highly recommend avoiding this, and rather using some other method to persist
history if you really need it.</p>

<h2 id="alternatives">Alternatives</h2>

<p>A trigger-based model seems to me like the best one if you have to use Postgres,
but there are some alternatives you may want to consider.</p>

<h3 id="do-you-need-the-history">Do You Need The History?</h3>

<p>There is added complexity here, and there is an increased chance of transactions
failing because of overlapping timestamps that you can’t really prevent. That
begs the question: Do you really need the history?</p>

<p>My “controversial” opinion is that, in this day and age, I feel the true
question is really a matter of whether you can afford it performance-wise, and
not whether it’s too complex. This particular implementation of persisting
history is probably not very fast, but it is conceptually simple: Whenever you
do something to a table, that action is stored in a history table. The original
table is intentionally identical to what you’re used to. If you really don’t
like the potential GiST conflicts, you can relax the constraints to get
identical behaviour to what you’re used to. In that case, the only difference is
the insert/delete/update performance.</p>

<p>Yes, there are many cases where it’s clearly bonkers to retain the history, but
I also think many people assume storing the history is costlier than it actually
is<sup id="fnref:small-systems" role="doc-noteref"><a href="#fn:small-systems" rel="footnote">1</a></sup>. If you’re not sure, try it and see how it goes. Since your
original table will be untouched, it’s not hard to roll back.</p>

<p>For me, there are two reasons I think you should consider it, even if you have
no immediate plans to expose this to your users:</p>

<p>First, there will be a time when a specific customer needs their data rolled
back to an earlier version. That could either be because of accidental deletes,
rogue actors, or even a bad deployment that corrupted data for certain
customers. While this doesn’t replace backups by a long shot, it’s a lot faster
and easier to do</p>

<div><pre><code><span>BEGIN</span><span>;</span>

<span>DELETE</span> <span>FROM</span> <span>mytable</span>
<span>WHERE</span> <span>company_id</span> <span>=</span> <span>$</span><span>{</span><span>company_id</span><span>};</span>

<span>INSERT</span> <span>INTO</span> <span>mytable</span> <span>(</span><span>your</span><span>,</span> <span>fields</span><span>,</span> <span>here</span><span>)</span>
<span>SELECT</span> <span>h</span><span>.</span><span>your</span><span>,</span> <span>h</span><span>.</span><span>field</span><span>,</span> <span>h</span><span>.</span><span>here</span>
<span>FROM</span> <span>mytable_history</span> <span>h</span>
<span>WHERE</span> <span>h</span><span>.</span><span>company_id</span> <span>=</span> <span>$</span><span>{</span><span>company_id</span><span>}</span>
  <span>AND</span> <span>h</span><span>.</span><span>systime</span> <span>@&gt;</span> <span>$</span><span>{</span><span>backup_time</span><span>};</span>

<span>COMMIT</span><span>;</span>
</code></pre></div>

<p>It will of course end up being a little more complex than that in practice,
depending on the data model and how fine-grained you want to be. But it’s less
effort than setting up the backup server, bridging it with a foreign data
wrapper, and then finally doing the inserts in exactly the same manner as above,
before cleaning up the backup server afterwards.</p>

<p>There are other cases too, like debugging a transient issue one of your
users had. I could go on, but it feels like repeating the sales pitch for
<a href="https://www.datomic.com/">Datomic</a>.</p>

<p>The second reason relates to the gut reaction of saying “We don’t need it”: If
you don’t have time travel abilities readily available, you can’t explore and
play with them. This, in turn, means you won’t really think of them when
developing new functionality for your customers. At the risk of sounding like a
techbro: I think it stifles innovation. Do you <em>really</em> think there’s no value
for it somewhere in your system in the future?</p>

<p>Yeah, yeah, this sounds a lot like future-proofing. To be clear, YAGNI isn’t
wrong, but I only think it only applies when there’s either</p>

<ul>
  <li>significant overhead (either in terms of implementation complexity or
system performance)</li>
  <li>something that can be retroactively implemented (i.e. no data loss)</li>
</ul>

<p>and system-versioned tables are neither.</p>

<p>… well, uh, let me clarify here. The current implementation I’ve shown you
requires a lot of work when you make new tables. Which is a good transition to
my next point:</p>

<h3 id="use-a-database-suited-for-the-task">Use a Database Suited for the Task</h3>

<p>Writing all of these long triggers yourself just because Postgres doesn’t
support it is a bit stupid. If you want an open-source alternative, perhaps
MariaDB isn’t too bad? It supports
<a href="https://mariadb.com/kb/en/system-versioned-tables/">SQL:2011</a> and even has
support for bitemporality if you want to go even further.</p>

<p>Of course, I’d be amiss if I didn’t mention <a href="https://www.datomic.com/">Datomic</a>.
It is a great database, although not open-source, and language support is rather
limited (only Java/Clojure officially). For the ones in Microsoft land, <a href="https://learn.microsoft.com/en-us/sql/relational-databases/tables/temporal-tables?view=sql-server-ver16">SQL
Server</a>
has great support for SQL:2011 as well, from what I gather.</p>

<p>As mentioned, this is aimed at user data generated by someone clicking or typing
around on a webpage, mutating some content of theirs. But for IoT data, you’d
like some other tool than temporal tables, and if you’re big enough, you
probably want to use an OLAP database for OLAP stuff.</p>

<h2 id="sloppy-paste-or-eldritch-horrors">Sloppy-Paste or Eldritch Horrors</h2>

<p>I am stuck with Postgres, both because that’s what I already got, but also
because I heavily use PostGIS. Migrating away is simply not an option, so I have
to make do with what I have.</p>

<p>What I like about the trigger solution is that it is – aside from the column
expansion hack – not terribly hard to understand. The problem is that it’s very
verbose, and after being burnt from a couple of copy-paste mistakes in the past,
I’d rather have a single trigger for every table if possible.</p>

<p>It is possible… though it does not look pretty. Here’s what the update trigger
looks like after we make the history table and ID field into input parameters:</p>

<div><pre><code><span>CREATE</span> <span>FUNCTION</span> <span>copy_updates_into_history</span><span>()</span> <span>RETURNS</span> <span>TRIGGER</span> <span>AS</span> <span>$$</span>
<span>DECLARE</span>
  <span>history_table</span> <span>TEXT</span> <span>:</span><span>=</span> <span>quote_ident</span><span>(</span><span>tg_argv</span><span>[</span><span>0</span><span>]);</span>
  <span>id_field</span> <span>TEXT</span> <span>:</span><span>=</span> <span>quote_ident</span><span>(</span><span>tg_argv</span><span>[</span><span>1</span><span>]);</span>
<span>BEGIN</span>
  <span>-- ignore changes inside the same tx</span>
  <span>EXECUTE</span> <span>'DELETE FROM '</span> <span>||</span> <span>history_table</span> <span>||</span>
    <span>' WHERE '</span> <span>||</span> <span>id_field</span> <span>||</span> <span>' = $1.'</span> <span>||</span> <span>id_field</span> <span>||</span>
    <span>' AND lower(systime) = NOW()'</span> <span>||</span>
    <span>' AND upper_inf(systime)'</span> <span>USING</span> <span>NEW</span><span>;</span>
  <span>-- close current row</span>
  <span>-- (if any, may be deleted by previous line)</span>
  <span>EXECUTE</span> <span>'UPDATE '</span> <span>||</span> <span>history_table</span> <span>||</span>
    <span>' SET systime = tstzrange(lower(systime), NOW())'</span>
    <span>' WHERE '</span> <span>||</span> <span>id_field</span> <span>||</span> <span>' = $1.'</span> <span>||</span> <span>id_field</span> <span>||</span>
    <span>' AND systime @&gt; NOW()'</span> <span>USING</span> <span>NEW</span><span>;</span>
  <span>-- insert new row</span>
  <span>EXECUTE</span> <span>'INSERT INTO '</span> <span>||</span> <span>history_table</span> <span>||</span>
    <span>' SELECT gen_random_uuid(), tstzrange(NOW(), null), $1.*'</span>
    <span>USING</span> <span>NEW</span><span>;</span>
  <span>RETURN</span> <span>NEW</span><span>;</span>
<span>END</span><span>;</span>
<span>$$</span> <span>LANGUAGE</span> <span>plpgsql</span><span>;</span>
</code></pre></div>

<p>(The insert and update triggers are similar, so I won’t go over them here.)</p>

<p>To factor out the history table and ID field, we have to use
<a href="https://www.postgresql.org/docs/16/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN"><code>EXECUTE</code></a>,
which makes the entire thing feel even more hacky. It looks ugly, and if you’re
not familiar with <code>EXECUTE</code> or the previously mentioned column expansion magic,
it may feel outright eldritch. However, I think this is better than the first
attempt at the trigger implementation for one big reason. And that is best shown
by using it in practice:</p>

<div><pre><code><span>CREATE</span> <span>TRIGGER</span> <span>mytable_history_update_trigger</span>
<span>AFTER</span> <span>UPDATE</span> <span>ON</span> <span>mytable</span>
    <span>FOR</span> <span>EACH</span> <span>ROW</span>
    <span>WHEN</span> <span>(</span><span>OLD</span><span>.</span><span>*</span> <span>IS</span> <span>DISTINCT</span> <span>FROM</span> <span>NEW</span><span>.</span><span>*</span><span>)</span>
    <span>-- ^ to avoid updates on "noop calls", as best as possible</span>
    <span>EXECUTE</span> <span>PROCEDURE</span>
      <span>copy_updates_into_history</span><span>(</span><span>'mytable_history'</span><span>,</span> <span>'mytable_id'</span><span>);</span>
</code></pre></div>

<p>This is much less verbose to use if you want to retain history for multiple
tables!</p>

<p>While it’s true that the query can’t be type-checked ahead of time, the original
trigger won’t be either. <em>We have to run them to verify that they don’t refer to
wrong tables or ids</em>. If that’s the case, then we should pick the alternative
that reduces the chance of a sloppy search-replace.</p>

<p>And this new implementation does that! This trigger has the history table and
the ID field in only two locations – the input arguments, whereas the original
trigger implementation had them spread out all around in 7 different locations.
Also, let’s face it: copy-pasting some big triggers for every single table we
want system versioned just wouldn’t feel right.</p>

<h2 id="summary">Summary</h2>

<p>The full implementation is over in the
<a href="https://github.com/hypirion/time-travelling-todo-lists-in-postgres">time-travelling-todo-lists-in-postgres</a>
repository, and the triggers are in the migration file <a href="https://github.com/hypirion/time-travelling-todo-lists-in-postgres/blob/main/migrations/001_history_triggers.up.sql"><code>migrations/001_history_triggers.up.sql</code></a>.</p>

<p>As I mentioned, this isn’t perfect: You have some big pitfalls related to table
modifications, it adds a risk of having concurrent updates break, and other databases
should have a much better implementation than my three triggers. It’s probably
not suitable for large databases either.</p>

<p>But if you’re stuck with Postgres, I think this is fine. However, I think you
should be aware of how the implementation works in detail, as there are a couple
of ways to shoot yourself in the foot. And if you’ve come this far down, you
hopefully do!</p>


</article>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[EU coal and gas collapse as wind and solar ascend (132 pts)]]></title>
            <link>https://electrek.co/2024/02/06/eu-coal-and-gas-collapse-wind-and-solar-ascend/</link>
            <guid>39284893</guid>
            <pubDate>Wed, 07 Feb 2024 05:35:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://electrek.co/2024/02/06/eu-coal-and-gas-collapse-wind-and-solar-ascend/">https://electrek.co/2024/02/06/eu-coal-and-gas-collapse-wind-and-solar-ascend/</a>, See on <a href="https://news.ycombinator.com/item?id=39284893">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
					
<figure>
			<img src="https://electrek.co/wp-content/uploads/sites/3/2022/08/Hornsea-Two.jpg?quality=82&amp;strip=all&amp;w=1200" srcset="https://i0.wp.com/electrek.co/wp-content/uploads/sites/3/2022/08/Hornsea-Two.jpg?w=320&amp;quality=82&amp;strip=all&amp;ssl=1 320w, https://i0.wp.com/electrek.co/wp-content/uploads/sites/3/2022/08/Hornsea-Two.jpg?w=640&amp;quality=82&amp;strip=all&amp;ssl=1 640w, https://i0.wp.com/electrek.co/wp-content/uploads/sites/3/2022/08/Hornsea-Two.jpg?w=1024&amp;quality=82&amp;strip=all&amp;ssl=1 1024w, https://i0.wp.com/electrek.co/wp-content/uploads/sites/3/2022/08/Hornsea-Two.jpg?w=1500&amp;quality=82&amp;strip=all&amp;ssl=1 1500w" width="1200" height="675" alt="world's single largest wind farm" fetchpriority="high">
	
				<figcaption>
				Photo: Hornsea Project			</figcaption>
			</figure>

<p>Europe’s coal electricity generation tanked by 26% and gas by 15% in 2023, according to a new report from energy think tank Ember. </p>



<figure><img fetchpriority="high" decoding="async" width="1900" height="1140" src="https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?w=1024" alt="" srcset="https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png 1900w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=150,90 150w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=300,180 300w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=768,461 768w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=1024,614 1024w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=1536,922 1536w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=350,210 350w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=130,78 130w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=140,84 140w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Record-falls-in-EU-coal-gas-and-power-sector-emissions.png?resize=1600,960 1600w" sizes="(max-width: 1900px) 100vw, 1900px"></figure>



<p>That collapse resulted in an impressive 19% reduction in the EU’s power sector emissions. What’s more, for the first time, wind power, which grew by 18%, surpassed gas, which only accounted for 17% of Europe’s electricity.</p>



<p>Wind and solar power are now taking center stage. Together, they hit a new high, generating 27% of the EU’s electricity in 2023. Solar covered 9% of the EU’s electricity needs. With hydroelectric power also bouncing back, renewables reached a record 44% share of the EU’s power mix.</p>



<figure><img decoding="async" width="1900" height="1150" src="https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?w=1024" alt="" srcset="https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png 1900w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=150,91 150w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=300,182 300w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=768,465 768w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=1024,620 1024w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=1536,930 1536w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=350,212 350w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=130,78 130w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=140,85 140w, https://electrek.co/wp-content/uploads/sites/3/2024/02/Headline-chart_Wind-overtakes-gas.png?resize=1600,968 1600w" sizes="(max-width: 1900px) 100vw, 1900px"></figure>



<p>“The EU’s power sector is in the middle of a monumental shift,” said Sarah Brown, Ember’s Europe program director. “Fossil fuels are playing a smaller role than ever as a system with wind and solar as its backbone comes into view.”</p>



<p>Interestingly, Europe’s shift away from fossil fuels wasn’t just about swapping coal and gas for wind and solar. People and businesses used less electricity overall, with demand dropping by 3.4% compared to 2022. A significant chunk of this reduction came from industries dialing back their power use.</p>



<p>But as Europe moves more toward EVs, heat pumps, and other electrification, electricity demand is expected to rise again. This means renewables need to keep up the pace, especially since the EU is aiming for wind and solar to provide 55% of its power by 2030.</p>



<p>Ember’s report also points out that in 2023, Europe increasingly relied on wind and solar, as 24% of hours in 2023 saw less than a quarter of electricity coming from fossil fuels, a major step up from just 4% of hours in 2022.</p>




	<p>The takeaway? The EU’s energy landscape is transforming fast, driven by the need for clean power and the urgency of the climate crisis. Coal and gas are on their way out, and renewables are stepping up. But there’s no room for complacency – Europe needs to double down on deploying wind, solar, and the tech that supports them.</p>



<p><strong>Read more:</strong> <a href="https://electrek.co/2023/11/20/world-may-be-on-track-for-tripling-renewables/">The world may be on track for tripling renewables – and that’s what we need</a></p>



<hr>



<p><em>If you live in an area that has frequent natural disaster events, and are interested in making your home more resilient to power outages, consider going solar and adding a battery storage system. To make sure you find a trusted, reliable solar installer near you that offers competitive pricing, check out </em><a href="https://www.energysage.com/p/electrek-rsm-ml/"><em>EnergySage</em></a><em>, a free service that makes it easy for you to go solar. They have hundreds of pre-vetted solar installers competing for your business, ensuring you get high quality solutions and save 20-30% compared to going it alone. Plus, it’s free to use and you won’t get sales calls until you select an installer and share your phone number with them.</em></p>



<p><em>Your personalized solar quotes are easy to compare online and you’ll get access to unbiased Energy Advisers to help you every step of the way. Get started </em><a href="https://www.energysage.com/p/electrek-rsm-ml/"><em>here</em></a><em>. –ad*</em></p>
	<p>
		<a target="_blank" rel="nofollow" href="https://news.google.com/publications/CAAqBwgKMKqD-Qow6c_gAg?hl=en-US&amp;gl=US&amp;ceid=US:en">
			<em>Add Electrek to your Google News feed.</em>&nbsp;
					</a>
	</p>
	<p><em>FTC: We use income earning auto affiliate links.</em> <a href="https://electrek.co/about/#affiliate">More.</a></p>				</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[BitLocker encryption broken in 43 seconds with sub-$10 Raspberry Pi Pico (110 pts)]]></title>
            <link>https://www.tomshardware.com/pc-components/cpus/youtuber-breaks-bitlocker-encryption-in-less-than-43-seconds-with-sub-dollar10-raspberry-pi-pico</link>
            <guid>39284711</guid>
            <pubDate>Wed, 07 Feb 2024 05:04:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.tomshardware.com/pc-components/cpus/youtuber-breaks-bitlocker-encryption-in-less-than-43-seconds-with-sub-dollar10-raspberry-pi-pico">https://www.tomshardware.com/pc-components/cpus/youtuber-breaks-bitlocker-encryption-in-less-than-43-seconds-with-sub-dollar10-raspberry-pi-pico</a>, See on <a href="https://news.ycombinator.com/item?id=39284711">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="article-body">
<p>Bitlocker is one of the most easily accessible encryption solutions available today, being a built-in feature of Windows 10 Pro and <a data-analytics-id="inline-link" href="https://www.tomshardware.com/tag/windows-11" data-auto-tag-linker="true" data-before-rewrite-localise="https://www.tomshardware.com/tag/windows-11">Windows 11</a> Pro that's designed to secure your data from prying eyes. However, <a data-analytics-id="inline-link" href="https://www.youtube.com/watch?v=wTl4vEednkQ" data-url="https://www.youtube.com/watch?v=wTl4vEednkQ">YouTuber stacksmashing</a> demonstrated a colossal security flaw with Bitlocker that allowed him to bypass <a data-analytics-id="inline-link" href="https://www.tomshardware.com/news/windows-software-bitlocker-slows-performance" data-before-rewrite-localise="https://www.tomshardware.com/news/windows-software-bitlocker-slows-performance">Windows Bitlocker</a> in less than a minute with a cheap sub-$10 <a data-analytics-id="inline-link" href="https://www.tomshardware.com/how-to/raspberry-pi-pico-setup" data-before-rewrite-localise="https://www.tomshardware.com/how-to/raspberry-pi-pico-setup">Raspberry Pi Pico</a>, thus gaining access to the encryption keys that can unlock protected data. His exploit only took 43 seconds to steal the master key.</p><p>To do this, the YouTuber took advantage of a design flaw found in many systems that feature a <a data-analytics-id="inline-link" href="https://www.tomshardware.com/news/where-to-buy-tpm-2.0-for-windows-11" data-before-rewrite-localise="https://www.tomshardware.com/news/where-to-buy-tpm-2.0-for-windows-11">dedicated Trusted Platform Module</a>, or TPM. For some configurations, Bitlocker relies on an external TPM to store critical information, such as the Platform Configuration Registers and Volume Master Key (some CPUs have this built-in). For external TPMs, the TPM key communications across an LPC bus with the CPU to send it the encryption keys required for decrypting the data on the drive.</p><p>Stacksmashing found that the communication lanes (LPC bus) between the CPU and external TPM are completely unencrypted on boot-up, enabling an attacker to sniff critical data as it moves between the two units, thus stealing the encryption keys. You can see his method in the video below.&nbsp;</p><div data-nosnippet=""><p><iframe data-lazy-priority="low" data-lazy-src="https://www.youtube.com/embed/wTl4vEednkQ" allowfullscreen=""></iframe></p></div><p>With this in mind, the YouTuber decided to test an attack on a ten-year-old laptop with Bitlocker encryption. His specific laptop's LPC bus is readable through an unpopulated connector on the motherboard, located right next to one of the laptop's M.2 ports. This same type of attack can be used on newer motherboards that leverage an external TPM, but these typically require more legwork to intercept the bus traffic.</p><p>To read data off the connector, the YouTuber created a cheap Raspberry Pi Pico device that could connect to the unsecured connector just by making contact with the metal pads protruding from itself. The Pico was programmed to read the raw 1s and 0s off from the TPM, &nbsp;granting access to the Volume Master Key stored on the module.</p><p>Stacksmashing's work demonstrates that Windows Bitlocker, as well as external TPMs, aren't as safe as many think because the data lanes between the TPM and CPU are unencrypted. The good news is that this flaw appears to be an issue regulated to discrete TPMs. If you have a CPU with a built-in TPM, like the ones in modern Intel and AMD CPUs, you should be safe from this <a data-analytics-id="inline-link" href="https://www.tomshardware.com/tag/security" data-auto-tag-linker="true" data-before-rewrite-localise="https://www.tomshardware.com/tag/security">security</a> flaw since all TPM communication occurs within the CPU itself.&nbsp;</p>
</div><div data-hydrate="true" id="slice-container-newsletterForm-articleInbodyContent-KELuVNjYMeuBvuT6AhZpCT"><section><p>Join the experts who read Tom's Hardware for the inside track on enthusiast PC tech news — and have for over 25 years. We'll send breaking news and in-depth reviews of CPUs, GPUs, AI, maker hardware and more straight to your inbox.</p></section></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Oslo acquires ChatGPT for 110k students and teachers (164 pts)]]></title>
            <link>https://www.digi.no/artikler/oslo-kjoper-chat-gpt-til-110-000-elever-og-laerere/543339</link>
            <guid>39284443</guid>
            <pubDate>Wed, 07 Feb 2024 04:17:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.digi.no/artikler/oslo-kjoper-chat-gpt-til-110-000-elever-og-laerere/543339">https://www.digi.no/artikler/oslo-kjoper-chat-gpt-til-110-000-elever-og-laerere/543339</a>, See on <a href="https://news.ycombinator.com/item?id=39284443">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><a href="https://www.digi.no/emne/digitalisering-og-offentlig-it">DIGITALISERING OG OFFENTLIG IT</a></p><h3>Osloskolen tar i bruk GPT 3.5-Turbo i hovedstaden og betaler lisens for 110.000 elever og ansatte.</h3></div><div id="article-wrapper-543339"><p>Løsningen som leveres er personvernmessig sikret og skal ikke brukes til trening av nye KI-modeller, skriver <a href="https://www.aftenposten.no/kultur/i/gEoXG1/oslo-skolen-kaster-seg-paa-chatgpt-vi-hadde-ikke-annet-valg">Aftenposten</a>.</p><p>Divisjonsdirektør Trond Ingebretsen i Utdanningsetaten sier at både undervisning og vurdering må legges kraftig om.&nbsp;</p><p>– Utfordringen vår har vært at så å si alle elever allerede har gratis tilgang via sin smarttelefon. Da måtte vi spørre oss: Skal vi late som om dette ikke finnes og starte en forbudslinje? sier divisjonsdirektøren til <a href="https://www.aftenposten.no/kultur/i/gEoXG1/oslo-skolen-kaster-seg-paa-chatgpt-vi-hadde-ikke-annet-valg">Aftenposten</a>.</p><p>Han mener at det ikke ville gitt elvene rette verktøy for å møte fremtiden med.</p><h3>Møter fremtiden</h3><p>Så snart de har hatt informasjonsmøter om løsningen, går de i gang med utrullingen.&nbsp;</p><p>– Du må tilbake til da læreboken kom for å finne noe lignende. PC og internett var ikke like stort, fordi plagiatkontrollen gjorde at vi kunne fortsette omtrent som før,&nbsp;sier&nbsp;Ingebretsen.</p><p>Det er utformet egne retningslinjer for hvordan elevene kan bruke det nye verktøyet.&nbsp;</p><h3>Klasseskille</h3><p>Elevveilederen peker på hva som er etisk riktig bruk.</p><p>Det gjennomgående teamet i veilederen er at Chat&nbsp;GPT ikke må benyttes som en erstatning for egen læring.</p><p>At elevene bare får tilgang til&nbsp;GPT 3.5-Turbo, kan skape et klasseskille,&nbsp; tror Anne Kristin Furuset i Utdanningsforbundet.</p><p>Hun synes det er problematisk at noen elever har betalt tilgang til GPT-4 fordi det er en mye bedre versjon enn den som tilbys kommunalt.&nbsp;</p><a href="https://www.digi.no/artikler/her-er-tek-ordene-vi-vil-huske-fra-2023/541702"><img width="130" height="87" src="https://images.gfx.no/130x87/2821/2821128/NTB__34aLBqXv0g.jpg" srcset="https://images.gfx.no/130x87/2821/2821128/NTB__34aLBqXv0g.jpg 1x, https://images.gfx.no/260x174/2821/2821128/NTB__34aLBqXv0g.jpg 2x" alt="" loading="lazy"><div><p>Les også</p><p>Her er tek-ordene vi vil huske</p></div></a></div><div id="comments-543339"><p>Kommentarer:</p><p>Du kan kommentere under fullt navn eller med kallenavn. Bruk BankID for automatisk oppretting av brukerkonto.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[jQuery v4.0 Beta (511 pts)]]></title>
            <link>https://blog.jquery.com/2024/02/06/jquery-4-0-0-beta/</link>
            <guid>39283733</guid>
            <pubDate>Wed, 07 Feb 2024 02:27:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.jquery.com/2024/02/06/jquery-4-0-0-beta/">https://blog.jquery.com/2024/02/06/jquery-4-0-0-beta/</a>, See on <a href="https://news.ycombinator.com/item?id=39283733">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content-wrapper">
		<h2>jQuery 4.0.0 BETA!</h2>
				
				<hr>

		

<div>
<p>jQuery 4.0.0 has been in the works for a <em>long</em> time, but it is now ready for a beta release! There’s a lot to cover, and the team is excited to see it released. We’ve got bug fixes, performance improvements, and some breaking changes. We removed support for IE&lt;11 after all! Still, we expect disruption to be minimal.</p>



<p>Many of the breaking changes are ones the team has wanted to make for years, but couldn’t in a patch or minor release. We’ve trimmed legacy code, removed some previously-deprecated APIs, removed some internal-only parameters to public functions that were never documented, and dropped support for some “magic” behaviors that were overly complicated.</p>



<p>We will publish a comprehensive upgrade guide before final release, to outline the removed code and how to migrate. The<a href="https://github.com/jquery/jquery-migrate"> jQuery Migrate plugin</a> will also be ready to assist. For now, please try out the beta release and <a href="https://github.com/jquery/jquery/issues">let us know if you encounter any issues</a>.</p>



<p>As usual, the release is available on <a href="https://jquery.com/download/">our CDN</a> and the npm package manager. Third party CDNs will not be hosting this beta release, but will host the 4.0.0 final release later. Here are some highlights for jQuery 4.0.0 beta.</p>



<h2>Goodbye IE&lt;11</h2>



<p>jQuery 4.0 drops support for IE 10 and older. Some may be asking why we didn’t remove support for IE&nbsp;11. We plan to removes support in stages, and the next step <a href="https://github.com/jquery/jquery/pull/5077">will happen in jQuery 5.0</a>. For now, we’ll start by removing code specifically supporting IE versions older than 11, giving us a size reduction of <a href="https://github.com/jquery/jquery/pull/4347">-867 gzipped bytes in one PR</a>!</p>



<p>We also dropped support for other very old browsers, including Edge Legacy, iOS &lt;11, Firefox &lt;65, and Android Browser. No changes should be required on your end. If you need to support any of these browsers, simply stick with jQuery 3.x.</p>



<h2>Deprecated APIs removed</h2>



<p>These functions have been deprecated for several versions. It’s time to <a href="https://github.com/jquery/jquery/issues/4056">remove them</a> now that we’ve reached a major release. These functions were either always meant to be internal or ones that now have native equivalents in all supported browsers. The removed functions are:</p>



<ul>
<li><code><a href="https://github.com/jquery/jquery/pull/4055">jQuery.cssNumber</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.cssProps</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.isArray</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.parseJSON</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.nodeName</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.isFunction</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.isWindow</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.camelCase</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.type</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.now</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4364">jQuery.isNumeric</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/4461">jQuery.trim</a></code></li>



<li><code><a href="https://github.com/jquery/jquery/pull/5017">jQuery.fx.interval</a></code></li>
</ul>



<h2><code>push</code>, <code>sort</code>, and <code>splice</code> removed</h2>



<p>The jQuery prototype has long had Array methods that did not behave like any other jQuery methods and were always meant for internal-use only. These methods are <code>push</code>, <code>sort</code>, and <code>splice</code>. We switched our uses of these methods to Array functions instead of the jQuery prototype. For example, <code>$elems.push( elem )</code> became <code>[].push.call( $elems, elem )</code>. We’re mentioning it here in case there are any plugins out there that may have relied on these methods.</p>
</div>



<h2><code>focusin</code> and <code>focosout</code> event order</h2>



<p>For a long time, browsers did not agree on the order of focus and blur events, which includes <code>focusin</code>, <code>focusout</code>, <code>focus</code>, and <code>blur</code>. Finally, the latest versions of all browsers that jQuery 4.0 supports have converged on a common event order. Unfortunately, it differs from the consistent order that jQuery had chosen years ago, which makes this a breaking change. At least everyone is the on the same page now!</p>



<p>jQuery’s order for all four events in previous versions was:</p>



<pre>1. focusout
2. blur
3. focusin
4. focus</pre>



<p>Starting with jQuery 4.0, we <a href="https://github.com/jquery/jquery/pull/4362">no longer override native behavior</a>. This means that all browsers except IE will follow the current W3C specification, which is:</p>



<pre>1. blur
2. focusout
3. focus
4. focusin</pre>



<p>For those that are curious, the W3C specification previously defined a different order:</p>



<pre>1. focusout
2. focusin
3. blur
4. focus</pre>



<p>But, few thought that intuitive and <a href="https://www.w3.org/TR/uievents/#events-focusevent-event-order">the spec</a> was <a href="https://github.com/w3c/uievents/issues/88">changed in 2023</a> to match what browsers have already implemented. Ironically, the only browser to ever follow the old spec was Internet Explorer.</p>



<h2><code>FormData</code> support</h2>



<p><code>jQuery.ajax</code> has <a href="https://github.com/jquery/jquery/pull/5197">added support for binary data, including <code>FormData</code></a>. Previously, binary data was not a known data type and was converted to a string. That behavior could be disabled by disabling data conversion and handling the data manually, but we decided to make this work automatically. This is technically a breaking change, but should be closer to expected behavior.</p>



<h2>Automatic JSONP promotion removed</h2>



<p>Previously, <code>jQuery.ajax</code> with <code>dataType: "json"</code> with a provided callback would automatically converted to a JSONP request. Today, the preferred way to interact with a cross-domain backend is with <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a>, which works in all browsers that jQuery 4.0 supports. This should help avoid unexpected behavior in case a developer is unaware that code can be executed from a remote domain with JSONP.</p>



<h2>jQuery source migrated to ES modules</h2>



<p>It was a special day when the jQuery source on the <code>main</code> branch was migrated from <a href="https://requirejs.org/docs/whyamd.html">AMD</a> to <a href="https://github.com/jquery/jquery/pull/4541">ES modules</a>. The jQuery source has always been published with jQuery releases on npm and GitHub, but could not be imported directly as modules without <a href="https://requirejs.org/">RequireJS</a>, which was jQuery’s build tool of choice. We have since switched to <a href="https://rollupjs.org/introduction/">Rollup</a> for packaging jQuery. And we also run tests on the ES modules before packaging them.</p>



<h2>Trusted Types and CSP</h2>



<p>jQuery 4.0 adds support for <a href="https://twitter.com/kkotowicz/status/1445713282128515074">Trusted Types</a>, ensuring that HTML wrapped in <a href="https://developer.mozilla.org/en-US/docs/Web/API/TrustedHTML">TrustedHTML</a> can be used as input to jQuery manipulation methods in a way that doesn’t violate the <code>require-trusted-types-for</code> Content Security Policy directive. </p>



<p>Along with this, while some AJAX requests were already using <code>&lt;script&gt;</code> tags to maintain attributes such as <code>crossdomain</code>, we have <a href="https://github.com/jquery/jquery/pull/4763">since switched most asynchronous script requests to use <code>&lt;script&gt;</code></a> to avoid any CSP errors caused by using inline scripts. There are still a few cases where XHR is used for asynchonrous script requests, such as when the<code> "headers"</code> option is passed (use <code>scriptAttrs</code> instead!), but we now use a <code>&lt;script&gt;</code> tag whenever possible.</p>



<div>
<h2>Upgrading</h2>



<p>We do not expect compatibility issues when upgrading from a jQuery 3.0+ version. If you haven’t yet upgraded to jQuery 3.0, have a look at the <a href="https://jquery.com/upgrade-guide/3.5/">3.5 Upgrade Guide</a> and <a href="https://jquery.com/upgrade-guide/3.0/">3.0 Upgrade Guide</a>.</p>



<p>The <a href="https://github.com/jquery/jquery-migrate#migrate-older-jquery-code-to-jquery-30">jQuery Migrate plugin</a> will help you to identify compatibility issues in your code. Please try out this beta release and <a href="https://github.com/jquery/jquery/issues">let us know about any issues you experience</a>.</p>



<p>If you can’t yet upgrade to 3.5+, Daniel Ruf has kindly provided <a href="https://github.com/DanielRuf/snyk-js-jquery-565129">patches for previous jQuery versions</a>.</p>



<h2>Updated slim build</h2>



<p>The slim build has gotten even smaller in jQuery 4.0.0 with the removal of Deferreds and Callbacks (now below 20k bytes gzipped!). Deferreds have long-supported the <a href="https://promisesaplus.com/">Promises A+ standard</a>, so native Promises can be used instead in most cases and they are available in all of jQuery’s supported browsers except IE11. Deferreds do have some extra features that native Promises do not support, but most usage can be migrated to Promise methods. If you need to support IE11, it’s best to use the main build or add a polyfill for native Promises.</p>



<h2>Download</h2>



<p>You can get the files from the jQuery CDN, or link to them directly:</p>



<p><a href="https://code.jquery.com/jquery-4.0.0-beta.js">https://code.jquery.com/jquery-4.0.0-beta.js</a></p>



<p><a href="https://code.jquery.com/jquery-4.0.0-beta.min.js">https://code.jquery.com/jquery-4.0.0-beta.min.js</a></p>



<p>You can also get this release from npm:</p>



<p><code>npm install jquery@4.0.0-beta</code></p>



<h3>Slim build</h3>



<p>Sometimes you don’t need ajax, or you prefer to use one of the many standalone libraries that focus on ajax requests. And often it is simpler to use a combination of CSS and class manipulation for web animations. Finally, all of jQuery’s supported browsers (except for IE11) now have support for native Promises across the board, so Deferreds and Callbacks are no longer needed in most cases. Along with the regular version of jQuery that includes everything, we’ve released a “slim” version that excludes these modules. The size of jQuery is very rarely a load performance concern these days, but the slim build is about 8k gzipped bytes smaller than the regular version. These files are also available in the npm package and on the CDN:</p>



<p><a href="https://code.jquery.com/jquery-4.0.0-beta.slim.js">https://code.jquery.com/jquery-4.0.0-beta.slim.js</a></p>



<p><a href="https://code.jquery.com/jquery-4.0.0-beta.slim.min.js">https://code.jquery.com/jquery-4.0.0-beta.slim.min.js</a></p>



<p>These updates are already available as the current versions on npm and Bower. Information on all the ways to get jQuery is available at <a href="https://jquery.com/download/">https://jquery.com/download/</a>. Public CDNs receive their copies today, please give them a few days to post the files. If you’re anxious to get a quick start, use the files on our CDN until they have a chance to update.</p>



<h2>Thanks</h2>



<p>Thank you to all of you who participated in this release by submitting patches, reporting bugs, or testing, including <a href="https://github.com/sashashura">Alex</a>, <a href="https://github.com/aelafifi">Ahmed S. El-Afifi</a>, <a href="https://github.com/fecore1">fecore1</a>, <a href="https://github.com/fras2560">Dallas Fraser</a>, <a href="https://github.com/gibson042">Richard Gibson</a>, <a href="https://github.com/mgol">Michał Gołębiowski-Owczarek</a>, <a href="https://github.com/pgrimaud">Pierre Grimaud</a>, <a href="https://github.com/gabibguti">Gabriela Gutierrez</a>, <a href="https://github.com/vanillajonathan">Jonathan</a>, <a href="https://github.com/Necmttn">Necmettin Karakaya</a>, <a href="https://github.com/andersk">Anders Kaseorg</a>, <a href="https://github.com/wonseop">Wonseop Kim</a>, <a href="https://github.com/simon04">Simon Legner</a>, <a href="https://github.com/ShashankaNataraj">Shashanka Nataraj</a>, <a href="https://github.com/patocallaghan">Pat O’Callaghan</a>, <a href="https://github.com/coliff">Christian Oliff</a>, <a href="https://github.com/DimitriPapadopoulos">Dimitri Papadopoulos Orfanos</a>, <a href="https://github.com/wonhyoung05">Wonhyoung Park</a>, <a href="https://github.com/bubbatls">Bruno PIERRE</a>, <a href="https://github.com/renbaoshuo">Baoshuo Ren</a>, <a href="https://github.com/beatrizrezener">Beatriz Rezener</a>, <a href="https://github.com/skrobinson">Sean Robinson</a>, <a href="https://github.com/edg2s">Ed Sanders</a>, <a href="https://github.com/Krinkle">Timo Tijhof</a>, <a href="https://github.com/gaohuia">Tom</a>, <a href="https://github.com/wenz">Christian Wenz</a>, <a href="https://github.com/ygj6">ygj6</a> and the whole jQuery team.</p>



<h2>We’re on Mastodon!</h2>



<p>jQuery now has its very own Mastodon account. We will be cross posting to both Twitter and Mastodon from now on. Also, you may be interested in following some of our team members that have Mastodon accounts.</p>
</div>



<p>jQuery: <a href="https://social.lfx.dev/@jquery">https://social.lfx.dev/@jquery</a></p>



<p>mgol: <a href="https://hachyderm.io/@mgol">https://hachyderm.io/@mgol</a></p>



<p>timmywil: <a href="https://hachyderm.io/@timmywil">https://hachyderm.io/@timmywil</a></p>



<div>
<h2>Changelog</h2>



<p><strong>Full changelog: </strong><a href="https://github.com/jquery/jquery/compare/3.7.0...3.7.1">3.7.1</a></p>
</div>



<ul>
<li>4.0.0-beta (<a href="https://github.com/jquery/jquery/commit/7e9a94ec820a6defce541e34dad13bd9669e21c7">7e9a94ec</a>)</li>
</ul>

<h3>Ajax</h3>
<ul>
<li>Don’t treat array data as binary (<a href="https://github.com/jquery/jquery/commit/992a1911d0b6195012edc25fd5a48810d4be64b5">992a1911</a>)</li>
<li>Allow `processData: true` even for binary data (<a href="https://github.com/jquery/jquery/commit/ce264e0789116e37fe371503537a217c038dfae8">ce264e07</a>)</li>
<li>Support binary data (including FormData) (<a href="https://github.com/jquery/jquery/commit/a7ed9a7b6364273b1b964fd2cf9691dec2cbec6b">a7ed9a7b</a>)</li>
<li>Support `headers` for script transport even when cross-domain (<a href="https://github.com/jquery/jquery/issues/5142">#5142</a>, <a href="https://github.com/jquery/jquery/commit/6d1364431b63b0d3bbe1c5fd604131f9db453396">6d136443</a>)</li>
<li>Support `null` as success functions in `jQuery.get` (<a href="https://github.com/jquery/jquery/issues/4989">#4989</a>, <a href="https://github.com/jquery/jquery/commit/74978b7e892537559850cda7332bdab8106e6354">74978b7e</a>)</li>
<li>Don’t auto-execute scripts unless dataType provided (<a href="https://github.com/jquery/jquery/issues/4822">#4822</a>, <a href="https://github.com/jquery/jquery/commit/025da4dd343e6734f3d3c1b4785b1548498115d8">025da4dd</a>)</li>
<li>Make responseJSON work for erroneous same-domain JSONP requests (<a href="https://github.com/jquery/jquery/commit/68b4ec59c8f290d680e9db4bc980655660817dd1">68b4ec59</a>)</li>
<li>Execute JSONP error script responses (<a href="https://github.com/jquery/jquery/issues/4771">#4771</a>, <a href="https://github.com/jquery/jquery/commit/a1e619b03a557b47c3e26a5e74af12b63a0d5e73">a1e619b0</a>)</li>
<li>Avoid CSP errors in the script transport for async requests (<a href="https://github.com/jquery/jquery/issues/3969">#3969</a>, <a href="https://github.com/jquery/jquery/commit/07a8e4a177550025c1a08d7ac754839733943f55">07a8e4a1</a>)</li>
<li>Drop the json to jsonp auto-promotion logic (<a href="https://github.com/jquery/jquery/issues/1799">#1799</a>, <a href="https://github.com/jquery/jquery/issues/3376">#3376</a>, <a href="https://github.com/jquery/jquery/commit/e7b3bc488d01d584262e12a7c5c25f935d0d034b">e7b3bc48</a>)</li>
<li>Overwrite s.contentType with content-type header value, if any (<a href="https://github.com/jquery/jquery/issues/4119">#4119</a>, <a href="https://github.com/jquery/jquery/commit/7fb90a6beaeffe16699800f73746748f6a5cc2de">7fb90a6b</a>)</li>
<li>Deprecate AJAX event aliases, inline event/alias into deprecated (<a href="https://github.com/jquery/jquery/commit/23d53928f383b0e7440bf4b08b7524e6af232fad">23d53928</a>)</li>
<li>Do not execute scripts for unsuccessful HTTP responses (<a href="https://github.com/jquery/jquery/issues/4250">#4250</a>, <a href="https://github.com/jquery/jquery/commit/50871a5a85cc802421b40cc67e2830601968affe">50871a5a</a>)</li>
<li>Simplify jQuery.ajaxSettings.xhr (<a href="https://github.com/jquery/jquery/issues/1967">#1967</a>, <a href="https://github.com/jquery/jquery/commit/abdc89ac2e581392b800c0364e0f5f2b6a82cdc6">abdc89ac</a>)</li>
</ul>

<h3>Attributes</h3>
<ul>
<li>Shave off a couple of bytes (<a href="https://github.com/jquery/jquery/commit/b40a4807b604efbde51faf075d11e25441af1990">b40a4807</a>)</li>
<li>Don’t stringify attributes in the setter (<a href="https://github.com/jquery/jquery/issues/4948">#4948</a>, <a href="https://github.com/jquery/jquery/commit/4250b628783d7bfa92ec6c5550c6e4b22fab6034">4250b628</a>)</li>
<li>Drop the `toggleClass(boolean|undefined)` signature (<a href="https://github.com/jquery/jquery/issues/3388">#3388</a>, <a href="https://github.com/jquery/jquery/commit/a4421101fd6d9d7b0550210f8e8690641733dd9a">a4421101</a>)</li>
<li>Refactor val(): don’t strip carriage return, isolate IE workarounds (<a href="https://github.com/jquery/jquery/commit/ff2819911da6cbbed5ee42c35d695240f06e65e3">ff281991</a>)</li>
<li>Don’t set the type attr hook at all outside of IE (<a href="https://github.com/jquery/jquery/commit/9e66fe9acf0ef27681f5a21149fc61678f791641">9e66fe9a</a>)</li>
</ul>

<h3>build</h3>
<ul>
<li>set up periodic code scanning analysis (<a href="https://github.com/jquery/jquery/commit/39c5778c649ad387dac834832799c0087b11d5fe">39c5778c</a>)</li>
</ul>

<h3>Build</h3>
<ul>
<li>migrate grunt authors to a custom script (<a href="https://github.com/jquery/jquery/commit/af79c99939628255f46f30bced000eba9aa6711f">af79c999</a>)</li>
<li>Bump follow-redirects from 1.15.1 to 1.15.4 (<a href="https://github.com/jquery/jquery/commit/56139394705022e4f6756440030ad6f3bf35f5a6">56139394</a>)</li>
<li>Bump actions/setup-node and github/codeql-action (<a href="https://github.com/jquery/jquery/commit/99151d7ab0923aa3aeeb1b957a9063e4e20d31ae">99151d7a</a>)</li>
<li>Reformat GitHub workflow Yaml files (<a href="https://github.com/jquery/jquery/commit/c98597eaf5e144ee5e549cb41984687cd1033068">c98597ea</a>)</li>
<li>Bump @babel/traverse &amp; multiple actions (<a href="https://github.com/jquery/jquery/commit/fb0cc272916dc909552a1b7bc1a39295e564d3a8">fb0cc272</a>)</li>
<li>Don’t run CI push workflows for dependabot branches (<a href="https://github.com/jquery/jquery/commit/635cb152e7daac658223455aaab2f81204b5b215">635cb152</a>)</li>
<li>Update ESLint-related packages, fix linting errors (<a href="https://github.com/jquery/jquery/commit/f47c6a83370675af0eff227d0266b40f9f45514a">f47c6a83</a>)</li>
<li>Run pretest before test:* npm scripts (<a href="https://github.com/jquery/jquery/commit/1ad66aeb6d7d94f8e4c8e2286569722ca41f9868">1ad66aeb</a>)</li>
<li>sort branches in compare_size; last run last (<a href="https://github.com/jquery/jquery/commit/a7fa303fda11ad298875676ffff78143cc49ce95">a7fa303f</a>)</li>
<li>run pretest in jenkins script (<a href="https://github.com/jquery/jquery/commit/cb763072fee1eb9ec3d4037c50cb0d07836b7af6">cb763072</a>)</li>
<li>fix inconsistent builds in Node 20 (<a href="https://github.com/jquery/jquery/commit/7ef9099d328e90d19bc40b64148747e854b13e20">7ef9099d</a>)</li>
<li>add commit SHAs and last runs to comparisons (<a href="https://github.com/jquery/jquery/commit/09972bcc680e89e38f56d83043bb368eb7fbda91">09972bcc</a>)</li>
<li>add new factory files to dist eslint (<a href="https://github.com/jquery/jquery/commit/792238410dc16ba0cc53c2740c47c314ea65d822">79223841</a>)</li>
<li>Bump qs, socket.io-parser, socket.io &amp; json5 (<a href="https://github.com/jquery/jquery/commit/b923047d29d37f2d5c96f8b33992f322bc7b7944">b923047d</a>)</li>
<li>migrate most grunt tasks off of grunt (<a href="https://github.com/jquery/jquery/commit/2bdecf8b7bd10864e5337a4e24e39476c78cf23a">2bdecf8b</a>)</li>
<li>Bump actions/checkout, actions/setup-node &amp; github/codeql-action (<a href="https://github.com/jquery/jquery/commit/42e50f8c21fbfd08092ad81add4ac38982ef0841">42e50f8c</a>)</li>
<li>Update mailmap entry for Krinkle (<a href="https://github.com/jquery/jquery/commit/699bcd396fa342c546905805a0cdfedd1959b7ce">699bcd39</a>)</li>
<li>replace CRLF with LF during minify (<a href="https://github.com/jquery/jquery/commit/48cc402a917d6011c7d3e75f779f11ef91b474fb">48cc402a</a>)</li>
<li>Add `exports` to package.json, export slim &amp; esm builds (<a href="https://github.com/jquery/jquery/issues/4592">#4592</a>, <a href="https://github.com/jquery/jquery/commit/8be4c0e4f89d6c8f780e5937a0534921d8c7815e">8be4c0e4</a>)</li>
<li>Switch form Terser to SWC for JS minification (#5286) (<a href="https://github.com/jquery/jquery/issues/5285">#5285</a>, <a href="https://github.com/jquery/jquery/commit/e24218758bb21bfdc296731d70f3d48ab786e5f5">e2421875</a>)</li>
<li>Make sure `*.cjs` &amp; `*.mjs` files use UNIX line endings as well (<a href="https://github.com/jquery/jquery/commit/198b41c8c2cd726b875615023b2b37b213040ad3">198b41c8</a>)</li>
<li>switch preferred email for timmywil (<a href="https://github.com/jquery/jquery/commit/2b6b5e0a3ba3029ec3ad1525a178920765e3adf1">2b6b5e0a</a>)</li>
<li>Bump github/codeql-action &amp; actions/checkout (<a href="https://github.com/jquery/jquery/commit/4a13266efd262a92f05d86b71d715885de103e6d">4a13266e</a>)</li>
<li>Drop individual AMD modules (<a href="https://github.com/jquery/jquery/commit/5701957b7223659c52a43f8c2c5465fdf2803df4">5701957b</a>)</li>
<li>Reference GitHub Actions by commit SHAs (<a href="https://github.com/jquery/jquery/issues/5266">#5266</a>, <a href="https://github.com/jquery/jquery/commit/784b9ba6e403997161113aa56d1747baed4e0767">784b9ba6</a>)</li>
<li>Switch the minifier from UglifyJS to Terser (<a href="https://github.com/jquery/jquery/commit/27303c6be09b8fc24c13454deae234e480cbf995">27303c6b</a>)</li>
<li>Make the `eslint:dev` task not lint the `dist/` folder (<a href="https://github.com/jquery/jquery/commit/44906a83d28a81f0107f8418a430db7e040a776b">44906a83</a>)</li>
<li>Test on Node.js 20, stop testing on Node.js 14 &amp; 19 (<a href="https://github.com/jquery/jquery/commit/6616acff0a6c144c3eac3afae8578085bd325834">6616acff</a>)</li>
<li>Only install Playwright dependencies when needed (<a href="https://github.com/jquery/jquery/commit/e77bd9d64fc696cadfe1f8c9ebb50d7609a97b07">e77bd9d6</a>)</li>
<li>Bump actions/setup-node from 3.5.1 to 3.6.0 (<a href="https://github.com/jquery/jquery/commit/7e7bd062070b3eca8ee047136ea8575fbed5d70f">7e7bd062</a>)</li>
<li>Run GitHub Action browser tests on Playwright WebKit (<a href="https://github.com/jquery/jquery/commit/b02a257f98688aa890e06a85672cd1a54c3ffa3a">b02a257f</a>)</li>
<li>Migrate middleware-mockserver to modern JS (<a href="https://github.com/jquery/jquery/commit/ce90a48450ba40586a6567235abb8fd2df84da97">ce90a484</a>)</li>
<li>remove stale Insight package from custom builds (<a href="https://github.com/jquery/jquery/commit/c66d4700dcf98efccb04061d575e242d28741223">c66d4700</a>)</li>
<li>Limit permissions for GitHub workflows (<a href="https://github.com/jquery/jquery/commit/c909d6b1ff444e68618b6da13d9c21714f681925">c909d6b1</a>)</li>
<li>Test on Node.js 18 &amp; 19, stop testing on Node 12 (<a href="https://github.com/jquery/jquery/commit/f62d8e2159baf1eabf3b760b85b2dda56d569a09">f62d8e21</a>)</li>
<li>Bump actions/setup-node from 3.5.0 to 3.5.1 (<a href="https://github.com/jquery/jquery/commit/0208224b5b76d54a39986f78aac97dbf1cccbe38">0208224b</a>)</li>
<li>Update Grunt from 1.4.1 to 1.5.3 (<a href="https://github.com/jquery/jquery/commit/aa231cd21421503d319ad6068e7df0fb3baa7fea">aa231cd2</a>)</li>
<li>Bump actions/setup-node from 3.4.1 to 3.5.0 (<a href="https://github.com/jquery/jquery/commit/25400750fb2e08b0a7e1a752a3ca0e9eaec16163">25400750</a>)</li>
<li>Update GitHub Actions (<a href="https://github.com/jquery/jquery/commit/52f452b2e8881e5ec5c9e880e277c8ecf633e8dc">52f452b2</a>)</li>
<li>Add dependabot.yml config (GitHub Actions) (<a href="https://github.com/jquery/jquery/commit/3f8bb2a46daf76f1427f49810d06a210ffbc7016">3f8bb2a4</a>)</li>
<li>Test on Node 17, update Grunt &amp; `karma-*` packages (<a href="https://github.com/jquery/jquery/commit/2525cffc42934c0d5c7aa085bc45dd6a8282e840">2525cffc</a>)</li>
<li>Separate the install step from running tests in GitHub Actions (<a href="https://github.com/jquery/jquery/commit/eef972508c8be6cc3cd0039d34dc9fe16bac916c">eef97250</a>)</li>
<li>remove travis.yml and travis mentions from core (#4983) (<a href="https://github.com/jquery/jquery/commit/5f4d449aa836f376eab2d2ca7585d5476d12f095">5f4d449a</a>)</li>
<li>Migrate CI to GitHub Actions (<a href="https://github.com/jquery/jquery/commit/e23190e63cb121da79b92e6641a81a44dcea9252">e23190e6</a>)</li>
<li>Update ESLint &amp; eslint-plugin-import, fixing the build (<a href="https://github.com/jquery/jquery/commit/9735edd5cb7b5ef30bb8acc4d7596a1410a971cc">9735edd5</a>)</li>
<li>Test on Node.js 16 instead of 15 (<a href="https://github.com/jquery/jquery/commit/0f623fdc8db128657716290cb7d57430e224c977">0f623fdc</a>)</li>
<li>Take core-js-bundle from the external directory as well (<a href="https://github.com/jquery/jquery/commit/345cd22e5664655ed315958ed2056610607c12ef">345cd22e</a>)</li>
<li>Restore the external directory (<a href="https://github.com/jquery/jquery/commit/a684e6ba836f7c553968d7d026ed7941e1a612d8">a684e6ba</a>)</li>
<li>Rename master to main across the repository (<a href="https://github.com/jquery/jquery/commit/8ae477a432f0924cd4bd3bdeaef2c4c15e483a8f">8ae477a4</a>)</li>
<li>Test on Node.js 15 (<a href="https://github.com/jquery/jquery/commit/6984d1747623dbc5e87fd6c261a5b6b1628c107c">6984d174</a>)</li>
<li>Explicitly exclude the queue module from the slim build (<a href="https://github.com/jquery/jquery/commit/a503c691dc06c59acdafef6e54eca2613c6e4032">a503c691</a>)</li>
<li>Make the import/no-unused-modules ESLint rule work in WebStorm (<a href="https://github.com/jquery/jquery/commit/8612018d4eb570b39532fca8344a187d2e95f98e">8612018d</a>)</li>
<li>Append .eslintignore paths to grunt eslint paths (<a href="https://github.com/jquery/jquery/commit/a22b43bad41592ec61e5fa0fcd2b3a3d44f8bfd3">a22b43ba</a>)</li>
<li>Use the US spelling of “favor” (<a href="https://github.com/jquery/jquery/commit/fa0058af426c4e482059214c29c29f004254d9a1">fa0058af</a>)</li>
<li>Fix commitplease husky config (<a href="https://github.com/jquery/jquery/issues/4735">#4735</a>, <a href="https://github.com/jquery/jquery/commit/3a1b338a7a579a45543b031a003abdce4dc6ac67">3a1b338a</a>)</li>
<li>Update dependencies (<a href="https://github.com/jquery/jquery/commit/b502866960b30863e56968bd35e720905ac58025">b5028669</a>)</li>
<li>Event: Make sure all source modules’ exports are used (#4648) (<a href="https://github.com/jquery/jquery/commit/40c3abd0ab049449acab5f2e12c34b9cc3199482">40c3abd0</a>)</li>
<li>Update eslint-config-jquery, fix linting violations (<a href="https://github.com/jquery/jquery/commit/ef4d6ca6c3a1b276fedc27b1f3a18823276f01a3">ef4d6ca6</a>)</li>
<li>Followups after introducing ES modules compiled via Rollup (<a href="https://github.com/jquery/jquery/commit/55cd3a44368d529326b6d9b16ff7c0204fee5516">55cd3a44</a>)</li>
<li>Correct code indentations based on jQuery Style Guide (<a href="https://github.com/jquery/jquery/commit/3d62d5704989f17d3a20ae7521d52e9c8c60b4ee">3d62d570</a>)</li>
<li>Reduce the slim build header comment &amp; jQuery.fn.jquery (<a href="https://github.com/jquery/jquery/commit/812b4a1a837c049b85efb73603105b4245cb0e5c">812b4a1a</a>)</li>
<li>Move ESLint max-len disable-directive to dist/.eslintrc.json (<a href="https://github.com/jquery/jquery/commit/34296ec547f0ab6577e8c31815447990a9c01b31">34296ec5</a>)</li>
<li>Test on Node.js 14, stop testing on Node.js 8 &amp; 13 (<a href="https://github.com/jquery/jquery/commit/88eb22e0599d546f98f6145c53deb086e1d82857">88eb22e0</a>)</li>
<li>Enable reportUnusedDisableDirectives in ESLint (<a href="https://github.com/jquery/jquery/commit/46f9810b73a7ad446d7c3711faf92f56b67df3c1">46f9810b</a>)</li>
<li>Resolve Travis config warnings (<a href="https://github.com/jquery/jquery/commit/5b94a4f847fe2328b1b8f2340b11b6031f95d2d1">5b94a4f8</a>)</li>
<li>Enable ESLint one-var rule for var declarations in browser code (<a href="https://github.com/jquery/jquery/commit/4a7fc8544e2020c75047456d11979e4e3a517fdf">4a7fc854</a>)</li>
<li>Add Christian Oliff to .mailmap &amp; AUTHORS.txt (<a href="https://github.com/jquery/jquery/commit/721744a9fab5b597febea64e466272eabfdb9463">721744a9</a>)</li>
<li>Lint the minified jQuery file as well – a Gruntfile fix (<a href="https://github.com/jquery/jquery/issues/3075">#3075</a>, <a href="https://github.com/jquery/jquery/commit/338f1fc77483a1bc1456e1f4ba1db2049bb45b45">338f1fc7</a>)</li>
<li>Lint the minified jQuery file as well (<a href="https://github.com/jquery/jquery/issues/3075">#3075</a>, <a href="https://github.com/jquery/jquery/commit/89a18de64cec73936507ea9feca24d029edea24f">89a18de6</a>)</li>
<li>Add intuitive names to Travis jobs (<a href="https://github.com/jquery/jquery/commit/e1fab10911dfe3b93bf8bd5d276e30e6fc69f780">e1fab109</a>)</li>
<li>Make dev mode work in Karma again, serve source files from disk (<a href="https://github.com/jquery/jquery/commit/437f389a24a6bef213d4df507909e7e69062300b">437f389a</a>)</li>
<li>Tests: Fix custom build tests, verify on Travis (<a href="https://github.com/jquery/jquery/commit/0f780ba7cc5968d53bba386bdcb59b8d9410873b">0f780ba7</a>)</li>
<li>Create a `grunt custom:slim` alias for the Slim build (#4578) (<a href="https://github.com/jquery/jquery/commit/9b9ed469b43e9fa6e2c752444470ae4c87d03d57">9b9ed469</a>)</li>
<li>Make Karma work in ES modules mode (<a href="https://github.com/jquery/jquery/commit/341c6d1b5abe4829f59fbc32e93f6a6a1afb900f">341c6d1b</a>)</li>
<li>Auto-convert sources to AMD (<a href="https://github.com/jquery/jquery/commit/f37c2e51f36c8f8bab3879064a90e86a685feafc">f37c2e51</a>)</li>
<li>Fix the Windows build (<a href="https://github.com/jquery/jquery/issues/4548">#4548</a>, <a href="https://github.com/jquery/jquery/commit/9fd2fa5388dba5c71129a1d9e3bb8e4fe6e4eb0b">9fd2fa53</a>)</li>
<li>Require extensions for ES6 imports, prevent import cycles (<a href="https://github.com/jquery/jquery/commit/44ac8c8529173711b66046ae5cfefa5bd4892461">44ac8c85</a>)</li>
<li>Fix the import path to serialize.js from ajax.js (<a href="https://github.com/jquery/jquery/commit/075320149ae30a5c593c06b2fb015bdf033e0acf">07532014</a>)</li>
<li>Run tests on Travis only on browsers defined in the config (<a href="https://github.com/jquery/jquery/commit/bcbcdd2b2c1bb7075f4f73dc89ca7d65db2a09ed">bcbcdd2b</a>)</li>
<li>Run tests on Firefox ESR as well (<a href="https://github.com/jquery/jquery/commit/2d5ad6d23e0f57c733ce4556d3f2ee93ca99cadb">2d5ad6d2</a>)</li>
<li>Run tests on Node.js 13 in addition to 8, 10 &amp; 12 (<a href="https://github.com/jquery/jquery/commit/830976e690b5fffeac860e2fdd07986d087ce824">830976e6</a>)</li>
<li>Run tests on Travis on FirefoxHeadless as well (<a href="https://github.com/jquery/jquery/commit/584835e68239ce55d1fc007b284e8ef4ed2817c2">584835e6</a>)</li>
<li>Require strict mode in Node.js scripts via ESLint (<a href="https://github.com/jquery/jquery/commit/bbad821c399da92995a11b88d6684970479d4a9b">bbad821c</a>)</li>
<li>Support jquery-release –dry-run flag (<a href="https://github.com/jquery/jquery/commit/d7d0b52bda74486f2351baa9d03ca4534de0d733">d7d0b52b</a>)</li>
<li>Stop copying src/core.js to dist on release (<a href="https://github.com/jquery/jquery/issues/4489">#4489</a>, <a href="https://github.com/jquery/jquery/commit/9a4d980639dd804ad320685a25b8ff4572e3f595">9a4d9806</a>)</li>
<li>Remove the external directory, read from node_modules directly (<a href="https://github.com/jquery/jquery/commit/d7e64190efc411e3973a79fd027bf1afe359f429">d7e64190</a>)</li>
<li>ESLint: forbid unused function parameters (<a href="https://github.com/jquery/jquery/commit/438b1a3e8a52d3e4efd8aba45498477038849c97">438b1a3e</a>)</li>
<li>Fix the regex parsing AMD var-modules (#4389) (<a href="https://github.com/jquery/jquery/commit/9ec09c3b4aa5182c2a8b8f51afb861b685a4003c">9ec09c3b</a>)</li>
<li>Fix AMD dependencies in curCSS (<a href="https://github.com/jquery/jquery/commit/b220f6df88d34dd908f55d57417fcec377787e5c">b220f6df</a>)</li>
<li>Test on Node.js 12, stop testing on Node.js 6 &amp; 11 (<a href="https://github.com/jquery/jquery/commit/b8d4712825a26a7f24c2bdb5a71aa3abcd345dfd">b8d47128</a>)</li>
<li>Fix unresolved jQuery reference in finalPropName (<a href="https://github.com/jquery/jquery/issues/4358">#4358</a>, <a href="https://github.com/jquery/jquery/commit/874030583c9b94603de467124420e6c7a1c3c8ac">87403058</a>)</li>
<li>Update Sizzle from 2.3.3 to 2.3.4 (<a href="https://github.com/jquery/jquery/issues/1756">#1756</a>, <a href="https://github.com/jquery/jquery/issues/4170">#4170</a>, <a href="https://github.com/jquery/jquery/issues/4249">#4249</a>, <a href="https://github.com/jquery/jquery/commit/0b2c36adb4e2c048318659e4196e0925da10ead2">0b2c36ad</a>)</li>
<li>Update the master version to 4.0.0-pre (<a href="https://github.com/jquery/jquery/commit/c4f2fa2fb33d6e52f7c8fad9f687ef970f442179">c4f2fa2f</a>)</li>
<li>Update Sinon from 2.3.7 to 7.3.1, other updates (<a href="https://github.com/jquery/jquery/commit/fea7a2a328f475048b4450c5c02a60832fdcfc3c">fea7a2a3</a>)</li>
</ul>

<h3>Core</h3>
<ul>
<li>Add more info about named exports (<a href="https://github.com/jquery/jquery/commit/5f869590924b7dea6a16d176b18700939f4b5290">5f869590</a>)</li>
<li>Simplify code post browser support reduction (<a href="https://github.com/jquery/jquery/commit/93ca49e6d1ac23fee33b3bc3b7f4d93dd1a25cb7">93ca49e6</a>)</li>
<li>Move the factory to separate exports (<a href="https://github.com/jquery/jquery/commit/46f6e3da796ee9d28c7c1428793b72d66bcbb0b7">46f6e3da</a>)</li>
<li>Use named exports in `src/` (<a href="https://github.com/jquery/jquery/issues/5262">#5262</a>, <a href="https://github.com/jquery/jquery/commit/f75daab09102a4dd5107deadb55d4a169f86254a">f75daab0</a>)</li>
<li>Fix regression in jQuery.text() on HTMLDocument objects (<a href="https://github.com/jquery/jquery/issues/5264">#5264</a>, <a href="https://github.com/jquery/jquery/commit/a75d6b52fad212820358e8ada3154f2f634e699b">a75d6b52</a>)</li>
<li>Selector: Move jQuery.contains from the selector to the core module (<a href="https://github.com/jquery/jquery/commit/024d87195ac46690023e2b0b308d4406a8a5a27e">024d8719</a>)</li>
<li>Drop the root parameter of jQuery.fn.init (<a href="https://github.com/jquery/jquery/commit/d2436df36a4b2ef556907e734a90771f0dbdbcaf">d2436df3</a>)</li>
<li>Don’t rely on splice being present on input (<a href="https://github.com/jquery/jquery/commit/9c6f64c7b51d50e334ef1183e2937ad77c0a68b0">9c6f64c7</a>)</li>
<li>Manipulation: Add basic TrustedHTML support (<a href="https://github.com/jquery/jquery/issues/4409">#4409</a>, <a href="https://github.com/jquery/jquery/commit/de5398a6ad088dc006b46c6a870a2a053f4cd663">de5398a6</a>)</li>
<li>Report browser errors in parseXML (<a href="https://github.com/jquery/jquery/issues/4784">#4784</a>, <a href="https://github.com/jquery/jquery/commit/8969732518470a7f8e654d5bc5be0b0076cb0b87">89697325</a>)</li>
<li>Make jQuery.isXMLDoc accept falsy input (<a href="https://github.com/jquery/jquery/issues/4782">#4782</a>, <a href="https://github.com/jquery/jquery/commit/fd421097c56696e4c1c4a99c1aae44c59a722be4">fd421097</a>)</li>
<li>Drop support for Edge Legacy (i.e. non-Chromium Microsoft Edge) (<a href="https://github.com/jquery/jquery/issues/4568">#4568</a>, <a href="https://github.com/jquery/jquery/commit/e35fb62db4fb46f031056bb53e393982c03972a1">e35fb62d</a>)</li>
<li>Fire iframe script in its context, add doc param in globalEval (<a href="https://github.com/jquery/jquery/issues/4518">#4518</a>, <a href="https://github.com/jquery/jquery/commit/4592595b478be979141ce35c693dbc6b65647173">4592595b</a>)</li>
<li>Exclude callbacks &amp; deferred modules in the slim build as well (<a href="https://github.com/jquery/jquery/commit/fbc44f52fe76e1b601da76a1d7f8ef27884c06da">fbc44f52</a>)</li>
<li>Migrate from AMD to ES modules 🎉 (<a href="https://github.com/jquery/jquery/commit/d0ce00cdfa680f1f0c38460bc51ea14079ae8b07">d0ce00cd</a>)</li>
<li>Use Array.prototype.flat where supported (<a href="https://github.com/jquery/jquery/issues/4320">#4320</a>, <a href="https://github.com/jquery/jquery/commit/9df4f1de12728b44a4b0f91748f12421008d9079">9df4f1de</a>)</li>
<li>Remove private copies of push, sort &amp; splice from the jQuery prototype (<a href="https://github.com/jquery/jquery/commit/b59107f5d7451ac16a7c8755128719be6ec8bf12">b59107f5</a>)</li>
<li>Implement .even() &amp; .odd() to replace POS :even &amp; :odd (<a href="https://github.com/jquery/jquery/commit/78420d427cf3734d9264405fcbe08b76be182a95">78420d42</a>)</li>
<li>Deprecate jQuery.trim (<a href="https://github.com/jquery/jquery/issues/4363">#4363</a>, <a href="https://github.com/jquery/jquery/commit/5ea5946094784f68437ef26d463dfcfbbbaff1f6">5ea59460</a>)</li>
<li>Remove IE-specific support tests, rely on document.documentMode (<a href="https://github.com/jquery/jquery/issues/4386">#4386</a>, <a href="https://github.com/jquery/jquery/commit/3527a3840585e6a359cd712591c9c57398357b9b">3527a384</a>)</li>
<li>Drop support for IE &lt;11, iOS &lt;11, Firefox &lt;65, Android Browser &amp; PhantomJS (<a href="https://github.com/jquery/jquery/issues/3950">#3950</a>, <a href="https://github.com/jquery/jquery/issues/4299">#4299</a>, <a href="https://github.com/jquery/jquery/commit/cf84696fd1d7fe314a11492606529b5a658ee9e3">cf84696f</a>)</li>
<li>Remove deprecated jQuery APIs (<a href="https://github.com/jquery/jquery/issues/4056">#4056</a>, <a href="https://github.com/jquery/jquery/commit/58f0c00bed695f934bb205c6115e5fe99dd5c27b">58f0c00b</a>)</li>
</ul>

<h3>CSS</h3>
<ul>
<li>Fix reliableTrDimensions support test for initially hidden iframes (<a href="https://github.com/jquery/jquery/commit/b1e66a5faaf46ffcbcc27c79a9a224aaf851a987">b1e66a5f</a>)</li>
<li>Selector: Align with 3.x, remove the outer `selector.js` wrapper (<a href="https://github.com/jquery/jquery/commit/53cf7244da2a2040333335c36e435b1c12efdff9">53cf7244</a>)</li>
<li>Make the reliableTrDimensions support test work with Bootstrap CSS (<a href="https://github.com/jquery/jquery/issues/5270">#5270</a>, <a href="https://github.com/jquery/jquery/commit/65b85031fb5688361c077bc04e641e4b502671e1">65b85031</a>)</li>
<li>Make `offsetHeight( true )`, etc. include negative margins (<a href="https://github.com/jquery/jquery/issues/3982">#3982</a>, <a href="https://github.com/jquery/jquery/commit/bce13b72c1753e16cc0db53ebf0f0456bdcf6b48">bce13b72</a>)</li>
<li>Return `undefined` for whitespace-only CSS variable values (#5120) (<a href="https://github.com/jquery/jquery/commit/7eb0019640a5856c42b451551eb7f995d913eba9">7eb00196</a>)</li>
<li>Don’t trim whitespace of undefined custom property (<a href="https://github.com/jquery/jquery/issues/5105">#5105</a>, <a href="https://github.com/jquery/jquery/commit/ed306c0261ab63746040e5d58bb4477c3069a427">ed306c02</a>)</li>
<li>Skip falsy values in `addClass( array )`, compress code (<a href="https://github.com/jquery/jquery/issues/4998">#4998</a>, <a href="https://github.com/jquery/jquery/commit/a338b407f2479f82df40635055effc163835183f">a338b407</a>)</li>
<li>Justify use of rtrim on CSS property values (<a href="https://github.com/jquery/jquery/commit/655c0ed5e204b1f6427e09d615a49586a7bc84eb">655c0ed5</a>)</li>
<li>Trim whitespace surrounding CSS Custom Properties values (<a href="https://github.com/jquery/jquery/issues/4926">#4926</a>, <a href="https://github.com/jquery/jquery/commit/efadfe991a5c287af561a9326bf1427d726c91c1">efadfe99</a>)</li>
<li>Include `show`, `hide` &amp; `toggle` methods in the jQuery slim build (<a href="https://github.com/jquery/jquery/commit/297d18dd13f7b810ea5a4afeefa4cb15d9e16e16">297d18dd</a>)</li>
<li>Remove the opacity CSS hook (<a href="https://github.com/jquery/jquery/commit/865469f5e60f55feb28469bb0a7526dd22f04b4e">865469f5</a>)</li>
<li>Workaround buggy getComputedStyle on table rows in IE/Edge (<a href="https://github.com/jquery/jquery/issues/4490">#4490</a>, <a href="https://github.com/jquery/jquery/commit/26415e081b318dbe1d46d2b7c30e05f14c339b75">26415e08</a>)</li>
<li>Don’t automatically add “px” to properties with a few exceptions (<a href="https://github.com/jquery/jquery/issues/2795">#2795</a>, <a href="https://github.com/jquery/jquery/commit/00a9c2e5f4c855382435cec6b3908eb9bd5a53b7">00a9c2e5</a>)</li>
</ul>

<h3>Data</h3>
<ul>
<li>Refactor to reduce size (<a href="https://github.com/jquery/jquery/commit/805cdb43fd02c3a5783c06b5ec2c9519be0682ab">805cdb43</a>)</li>
<li>Event:Manipulation: Prevent collisions with Object.prototype (<a href="https://github.com/jquery/jquery/issues/3256">#3256</a>, <a href="https://github.com/jquery/jquery/commit/9d76c0b163675505d1a901e5fe5249a2c55609bc">9d76c0b1</a>)</li>
<li>Separate data &amp; css/effects camelCase implementations (<a href="https://github.com/jquery/jquery/issues/3355">#3355</a>, <a href="https://github.com/jquery/jquery/commit/8fae21200e80647fec4389995c4879948d11ad66">8fae2120</a>)</li>
</ul>

<h3>Deferred</h3>
<ul>
<li>Rename `getStackHook` to `getErrorHook` (<a href="https://github.com/jquery/jquery/issues/5201">#5201</a>, <a href="https://github.com/jquery/jquery/commit/258ca1ec6a373f85f7849308c967b7e6a993e6e7">258ca1ec</a>)</li>
<li>Respect source maps in jQuery.Deferred.exceptionHook (<a href="https://github.com/jquery/jquery/issues/3179">#3179</a>, <a href="https://github.com/jquery/jquery/commit/0b9c5037f707a0b8e0dbb11776b690ae7dde7123">0b9c5037</a>)</li>
<li>Rename master to primary (<a href="https://github.com/jquery/jquery/commit/a32cf6324f8f2190e66a687e94be9687ebf840b7">a32cf632</a>)</li>
</ul>

<h3>Deprecated</h3>
<ul>
<li>Define `.hover()` using non-deprecated methods (<a href="https://github.com/jquery/jquery/commit/fd6ffc5eb2c12562f2656d2f33865448420252be">fd6ffc5e</a>)</li>
<li>Remove jQuery.trim (<a href="https://github.com/jquery/jquery/commit/0b676ae12d20721e2df6f6f32f37f7302f8805bf">0b676ae1</a>)</li>
<li>Fix AMD parameter order (<a href="https://github.com/jquery/jquery/commit/f810080e8e92278bb5288cba7cc0169481471780">f810080e</a>)</li>
</ul>

<h3>Dimensions</h3>
<ul>
<li>Add offset prop fallback to FF for unreliable TR dimensions (<a href="https://github.com/jquery/jquery/issues/4529">#4529</a>, <a href="https://github.com/jquery/jquery/commit/3bbbc11111840d6fd5160db13f2c1a9acb05c4c4">3bbbc111</a>)</li>
</ul>

<h3>Docs</h3>
<ul>
<li>Fix module links in the package README (<a href="https://github.com/jquery/jquery/commit/ace646f6e83e653f666ba715c200739f1cbdba52">ace646f6</a>)</li>
<li>update watch task in CONTRIBUTING.md (<a href="https://github.com/jquery/jquery/commit/77d6ad7172db3ae11573df7b322d410b161eb43e">77d6ad71</a>)</li>
<li>Fix typos found by codespell (<a href="https://github.com/jquery/jquery/commit/620870a1af5287d29c77ec6d5f973116b23793a7">620870a1</a>)</li>
<li>remove stale gitter badge from readme (<a href="https://github.com/jquery/jquery/commit/67cb1af7740a956e150e8d93266c4e601f55e8a4">67cb1af7</a>)</li>
<li>Remove the “Grunt build” section from the PR template (<a href="https://github.com/jquery/jquery/commit/988a56847de301ce18a653f84b07c5af432a269f">988a5684</a>)</li>
<li>Remove stale badge from README (<a href="https://github.com/jquery/jquery/commit/bcd9c2bc3ddaa04f89f550681ca9c1ec5efc4328">bcd9c2bc</a>)</li>
<li>Update the README of the published package (<a href="https://github.com/jquery/jquery/commit/edccabf10d37b57cbd4eeebc44f3acb67cb2739c">edccabf1</a>)</li>
<li>Remove git.io from a GitHub Actions comment (<a href="https://github.com/jquery/jquery/commit/016872ffe03ab9107b1bc62fae674a4809c3b23f">016872ff</a>)</li>
<li>Update webpack website in README (<a href="https://github.com/jquery/jquery/commit/01819bc3bcc44282e5bb9301c3478d837d1e5152">01819bc3</a>)</li>
<li>add link to patchwelcome and help wanted issues (<a href="https://github.com/jquery/jquery/commit/924b7ce825962bfe4c16e02eb411c7f66ee75a55">924b7ce8</a>)</li>
<li>add link to preview the new CLAs (<a href="https://github.com/jquery/jquery/commit/683ceb8ff067ac53a7cb464ba1ec3f88e353e3f5">683ceb8f</a>)</li>
<li>Fix incorrect `trac-NUMBER` references (<a href="https://github.com/jquery/jquery/commit/eb9ceb2facbeff1c66a41824bd0ac0c56d0c5c62">eb9ceb2f</a>)</li>
<li>remove expired links from old jquery source (#4997) (<a href="https://github.com/jquery/jquery/commit/ed066ac70270b4bb20b5717501d2d268ef144bd3">ed066ac7</a>)</li>
<li>Remove links to Web Archive from source (<a href="https://github.com/jquery/jquery/issues/4981">#4981</a>, <a href="https://github.com/jquery/jquery/commit/e24f2dcf3f6bda1a672502e0233c732065cbbe89">e24f2dcf</a>)</li>
<li>Replace `#NUMBER` Trac issue references with `trac-NUMBER` (<a href="https://github.com/jquery/jquery/commit/5d5ea015114092c157311c4948f7cc3d8c8e7f8a">5d5ea015</a>)</li>
<li>Update the URL to the latest jQuery build in CONTRIBUTING.md (<a href="https://github.com/jquery/jquery/commit/9bdb16cd19097da67950a707baac3980bda873f3">9bdb16cd</a>)</li>
<li>Remove the CLA checkbox in the pull request template (<a href="https://github.com/jquery/jquery/commit/e124893132d7a979d7987f978e968a1f889348b6">e1248931</a>)</li>
<li>update irc to Libera and fix LAMP dead link (<a href="https://github.com/jquery/jquery/commit/175db73ec7938e774d9e93d3afdfb35a24466b47">175db73e</a>)</li>
<li>Update Frequently Reported Issues in the GitHub issue template (<a href="https://github.com/jquery/jquery/commit/7a6fae6a7e51ae30a9f3177e8639fbf523ed0915">7a6fae6a</a>)</li>
<li>Change JS Foundation mentions to OpenJS Foundation (<a href="https://github.com/jquery/jquery/commit/11611967adf2bd9ff4304132f917629ec1134049">11611967</a>)</li>
<li>add SECURITY.md, show security email address (<a href="https://github.com/jquery/jquery/commit/2ffe54ca53b4ba2de2012f83c3faf262c1003af9">2ffe54ca</a>)</li>
<li>Fix typos (<a href="https://github.com/jquery/jquery/commit/1a7332ce83cdee7d6cd9d45c2a4b83067f53f14b">1a7332ce</a>)</li>
<li>Update the link to the jsdom repository (<a href="https://github.com/jquery/jquery/commit/a62309e01b3c76d2b73560ca666c454b7bbfcb77">a62309e0</a>)</li>
<li>Use https for hyperlinks in README (<a href="https://github.com/jquery/jquery/commit/73415da25d964ee31ec1804d55f5af0199a1378e">73415da2</a>)</li>
<li>Remove a mention of the event/alias.js module from README (<a href="https://github.com/jquery/jquery/commit/3edfa1bcdc50bca41ac58b2642b12f3feee03a3b">3edfa1bc</a>)</li>
<li>Update links to EdgeHTML issues to go through Web Archive (<a href="https://github.com/jquery/jquery/commit/1dad1185e0b2ca2a13bf411558eda75fb2d4da88">1dad1185</a>)</li>
<li>direct users to GitHub docs for cloning the repo (<a href="https://github.com/jquery/jquery/commit/f1c16de29689d2cfaf629f00d682148e99753509">f1c16de2</a>)</li>
<li>Change OS X to macOS in README (<a href="https://github.com/jquery/jquery/commit/5a3e0664d261422f11a78faaf101d70c73b3a5a8">5a3e0664</a>)</li>
<li>Update most URLs to HTTPS (<a href="https://github.com/jquery/jquery/commit/f09d92100ffff6208211b200ed0cdc39bfd17fc3">f09d9210</a>)</li>
<li>Convert link to Homebrew from HTTP to HTTPS (<a href="https://github.com/jquery/jquery/commit/e0022f23144fd1dc6db86a5d8c18af47bc14f0f3">e0022f23</a>)</li>
</ul>

<h3>Effect</h3>
<ul>
<li>Fix a unnecessary conditional statement in .stop() (<a href="https://github.com/jquery/jquery/issues/4374">#4374</a>, <a href="https://github.com/jquery/jquery/commit/110802c7f22b677ef658963aa95ebdf5cb9c5573">110802c7</a>)</li>
</ul>

<h3>Effects</h3>
<ul>
<li>Remove jQuery.fx.interval (<a href="https://github.com/jquery/jquery/commit/6c2c7362fb18d3df7c2a7b13715c2763645acfcb">6c2c7362</a>)</li>
</ul>

<h3>Event</h3>
<ul>
<li>Avoid collisions between jQuery.event.special &amp; Object.prototype (<a href="https://github.com/jquery/jquery/commit/bcaeb000b777c018ad5d18e01be5060caa8cb158">bcaeb000</a>)</li>
<li>Simplify the check for saved data in leverageNative (<a href="https://github.com/jquery/jquery/commit/dfe212d5a1eed6b4a67d1cbd04ece09bbac33699">dfe212d5</a>)</li>
<li>Make trigger(focus/blur/click) work with native handlers (<a href="https://github.com/jquery/jquery/issues/5015">#5015</a>, <a href="https://github.com/jquery/jquery/commit/6ad3651dbfea9e9bb56e608f72b4ef2f97bd4e70">6ad3651d</a>)</li>
<li>Simulate focus/blur in IE via focusin/focusout (<a href="https://github.com/jquery/jquery/issues/4856">#4856</a>, <a href="https://github.com/jquery/jquery/issues/4859">#4859</a>, <a href="https://github.com/jquery/jquery/issues/4950">#4950</a>, <a href="https://github.com/jquery/jquery/commit/ce60d31893deab7d3da592b5173e90b5d50e7732">ce60d318</a>)</li>
<li>Don’t break focus triggering after `.on(focus).off(focus)` (<a href="https://github.com/jquery/jquery/issues/4867">#4867</a>, <a href="https://github.com/jquery/jquery/commit/e539bac79e666bba95bba86d690b4e609dca2286">e539bac7</a>)</li>
<li>Make focus re-triggering not focus the original element back (<a href="https://github.com/jquery/jquery/issues/4382">#4382</a>, <a href="https://github.com/jquery/jquery/commit/dbcffb396c2db61ff96edc4162602e850797d61f">dbcffb39</a>)</li>
<li>Don’t crash if an element is removed on blur (<a href="https://github.com/jquery/jquery/issues/4417">#4417</a>, <a href="https://github.com/jquery/jquery/commit/5c2d08704e289dd2745bcb0557b35a9c0e6af4a4">5c2d0870</a>)</li>
<li>Remove the event.which shim (<a href="https://github.com/jquery/jquery/issues/3235">#3235</a>, <a href="https://github.com/jquery/jquery/commit/1a5fff4c169dbaa2df72c656868bcf60ed4413d0">1a5fff4c</a>)</li>
<li>remove jQuery.event.global (<a href="https://github.com/jquery/jquery/commit/18db87172cffbe48b92e30b70249e304863a70f9">18db8717</a>)</li>
<li>Only attach events to objects that accept data – for real (<a href="https://github.com/jquery/jquery/issues/4397">#4397</a>, <a href="https://github.com/jquery/jquery/commit/d5c505e35d8c74ce8e9d99731a1a7eab0e0d911c">d5c505e3</a>)</li>
<li>Stop shimming focusin &amp; focusout events (<a href="https://github.com/jquery/jquery/issues/4300">#4300</a>, <a href="https://github.com/jquery/jquery/commit/8a741376937dfacf9f82b2b88f93b239fe267435">8a741376</a>)</li>
<li>Prevent leverageNative from registering duplicate dummy handlers (<a href="https://github.com/jquery/jquery/commit/eb6c0a7c97b1b3cf00144de12d945c9c569f935c">eb6c0a7c</a>)</li>
<li>Fix handling of multiple async focus events (<a href="https://github.com/jquery/jquery/issues/4350">#4350</a>, <a href="https://github.com/jquery/jquery/commit/ddfa83766478268391bc9da96683fc0d4973fcfe">ddfa8376</a>)</li>
</ul>

<h3>Manipulation</h3>
<ul>
<li>Generalize a test to support IE (<a href="https://github.com/jquery/jquery/commit/88690ebfc8b5ef8b1e444326c664b590ecc0b888">88690ebf</a>)</li>
<li>Support $el.html(selfRemovingScript) (#5378) (<a href="https://github.com/jquery/jquery/issues/5377">#5377</a>, <a href="https://github.com/jquery/jquery/commit/937923d9ee8dfd19008447b5059cbd13ee5a23ac">937923d9</a>)</li>
<li>Extract domManip to a separate file (<a href="https://github.com/jquery/jquery/commit/ee6e874075ba1fcd8f9e62cd1ee5c04f6518b6d6">ee6e8740</a>)</li>
<li>Don’t remove HTML comments from scripts (<a href="https://github.com/jquery/jquery/issues/4904">#4904</a>, <a href="https://github.com/jquery/jquery/commit/2f8f39e457c32c454c50545b0fdaa1d7a4a2f8bd">2f8f39e4</a>)</li>
<li>Respect script crossorigin attribute in DOM manipulation (<a href="https://github.com/jquery/jquery/issues/4542">#4542</a>, <a href="https://github.com/jquery/jquery/commit/15ae361485056b236a9484a185238f992806e1ff">15ae3614</a>)</li>
<li>Avoid concatenating strings in buildFragment (<a href="https://github.com/jquery/jquery/commit/9c98e4e86eda857ee063bc48adbc1a11bb5506ee">9c98e4e8</a>)</li>
<li>Make jQuery.htmlPrefilter an identity function (<a href="https://github.com/jquery/jquery/commit/90fed4b453a5becdb7f173d9e3c1492390a1441f">90fed4b4</a>)</li>
<li>Selector: Use the nodeName util where possible to save size (<a href="https://github.com/jquery/jquery/commit/4504fc3d722dd029d861cb47aa65a5edc651c4d3">4504fc3d</a>)</li>
</ul>

<h3>Release</h3>
<ul>
<li>use buildDefaultFiles directly and pass version (<a href="https://github.com/jquery/jquery/commit/b507c8648f701acd1c48b3c38054ad38d76fd1ca">b507c864</a>)</li>
<li>copy dist-module folder as well (<a href="https://github.com/jquery/jquery/commit/63767650b5b171b4671304fd2bb2f2890431929f">63767650</a>)</li>
<li>only published versioned files to cdn (<a href="https://github.com/jquery/jquery/commit/3a0ca684eb21d64a13d7591ce1891b1990e0339c">3a0ca684</a>)</li>
<li>remove scripts and dev deps from dist package.json (<a href="https://github.com/jquery/jquery/commit/7eac932da7177104546abef595adf4429eb829b3">7eac932d</a>)</li>
<li>update build command in Release.generateArtifacts (<a href="https://github.com/jquery/jquery/commit/3b963a21662061e0f39ad90f146e73e2223c2b86">3b963a21</a>)</li>
<li>add support for md5 sums in windows (<a href="https://github.com/jquery/jquery/commit/f088c36631df3d5dc98408debd147ea5d3618557">f088c366</a>)</li>
<li>remove the need to install grunt globally (<a href="https://github.com/jquery/jquery/commit/b2bbaa36d4d37bd48f954ed3cdbd50d3461a523d">b2bbaa36</a>)</li>
<li>upgrade release dependencies (<a href="https://github.com/jquery/jquery/commit/967af73203378db0cc3637adee85c442e246e05a">967af732</a>)</li>
<li>Remove an unused chalk dependency (<a href="https://github.com/jquery/jquery/commit/bfb6897c558dfdccff7ac5fc377b08e806525be3">bfb6897c</a>)</li>
<li>Use an in-repository dist README fixture (<a href="https://github.com/jquery/jquery/commit/358b769a00c3a09a8ec621b8dcb2d5e31b7da69a">358b769a</a>)</li>
<li>Update AUTHORS.txt (<a href="https://github.com/jquery/jquery/commit/1b74660f730d34bf728094c33080ff406427f41e">1b74660f</a>)</li>
<li>update AUTHORS.txt (<a href="https://github.com/jquery/jquery/commit/cf9fe0f6a104a0f527c7c3f441485c19e2b19c69">cf9fe0f6</a>)</li>
</ul>

<h3>Selector</h3>
<ul>
<li>Make `selector.js` module depend on `attributes/attr.js` (<a href="https://github.com/jquery/jquery/issues/5379">#5379</a>, <a href="https://github.com/jquery/jquery/commit/e06ff08849057cd099365bf43598c8952fe9956d">e06ff088</a>)</li>
<li>Eliminate `selector.js` depenencies from various modules (<a href="https://github.com/jquery/jquery/commit/e8b7db4b0f1e1b8e08578641b30a92b955ccc4ec">e8b7db4b</a>)</li>
<li>Re-expose jQuery.find.{tokenize,select,compile,setDocument} (<a href="https://github.com/jquery/jquery/issues/5259">#5259</a>, <a href="https://github.com/jquery/jquery/commit/338de3599039a3ba906214e656bcbe637430c37d">338de359</a>)</li>
<li>Stop relying on CSS.supports( “selector(…)” ) (<a href="https://github.com/jquery/jquery/issues/5194">#5194</a>, <a href="https://github.com/jquery/jquery/commit/68aa2ef7571e2d9f91fad1aa9e5f956c04dc9ee9">68aa2ef7</a>)</li>
<li>Backport jQuery selection context logic to selector-native (<a href="https://github.com/jquery/jquery/issues/5185">#5185</a>, <a href="https://github.com/jquery/jquery/commit/2e644e845051703775b35b358eec5d3608a9465f">2e644e84</a>)</li>
<li>Make selector lists work with `qSA` again (<a href="https://github.com/jquery/jquery/issues/5177">#5177</a>, <a href="https://github.com/jquery/jquery/commit/09d988b774e7ff4acfb69c0cde2dab373559aaca">09d988b7</a>)</li>
<li>Implement the `uniqueSort` chainable method (<a href="https://github.com/jquery/jquery/issues/5166">#5166</a>, <a href="https://github.com/jquery/jquery/commit/5266f23cf49c9329bddce4d4af6cb5fbbd1e0383">5266f23c</a>)</li>
<li>Re-introduce selector-native.js (<a href="https://github.com/jquery/jquery/commit/4c1171f2ed62584211250df0af8302d34c04621a">4c1171f2</a>)</li>
<li>Manipulation: Fix DOM manip within template contents (<a href="https://github.com/jquery/jquery/issues/5147">#5147</a>, <a href="https://github.com/jquery/jquery/commit/3299236c898136dc1aa57dc5148811203e931895">3299236c</a>)</li>
<li>Drop support for legacy pseudos, test custom pseudos (<a href="https://github.com/jquery/jquery/commit/8c7da22caeae8c2c3f7e9869d5f47414669f106c">8c7da22c</a>)</li>
<li>Use jQuery `:has` if `CSS.supports(selector(…))` non-compliant (<a href="https://github.com/jquery/jquery/issues/5098">#5098</a>, <a href="https://github.com/jquery/jquery/commit/d153c375e67f2c2dba82c2fb079c36b8d795e66a">d153c375</a>)</li>
<li>Remove the “a:enabled” workaround for Chrome &lt;=77 (<a href="https://github.com/jquery/jquery/commit/c1ee33aded44051b8f1288b59d2efdc68d0413cc">c1ee33ad</a>)</li>
<li>Make empty attribute selectors work in IE again (<a href="https://github.com/jquery/jquery/issues/4435">#4435</a>, <a href="https://github.com/jquery/jquery/commit/05184cc448f4ed7715ddd6a5d724e167882415f1">05184cc4</a>)</li>
<li>Use shallow document comparisons in uniqueSort (<a href="https://github.com/jquery/jquery/issues/4441">#4441</a>, <a href="https://github.com/jquery/jquery/commit/15750b0af270da07917b70457cf09bda97d3d935">15750b0a</a>)</li>
<li>Add a test for throwing on post-comma invalid selectors (<a href="https://github.com/jquery/jquery/commit/6eee5f7f181f9ebf5aa428e96356667e3cf7ddbd">6eee5f7f</a>)</li>
<li>Make selectors with leading combinators use qSA again (<a href="https://github.com/jquery/jquery/commit/ed66d5a22b37425abf5b63c361f91340de89c994">ed66d5a2</a>)</li>
<li>Use shallow document comparisons to avoid IE/Edge crashes (<a href="https://github.com/jquery/jquery/issues/4441">#4441</a>, <a href="https://github.com/jquery/jquery/commit/aa6344baf87145ffc807a527d9c1fb03c96b1948">aa6344ba</a>)</li>
<li>reduce size, simplify setDocument (<a href="https://github.com/jquery/jquery/commit/29a9544a4fb743491a42f827a6cf8627b7b99e0f">29a9544a</a>)</li>
<li>Leverage the :scope pseudo-class where possible (<a href="https://github.com/jquery/jquery/issues/4453">#4453</a>, <a href="https://github.com/jquery/jquery/commit/df6a7f7f0f615149266b1a51064293b748b29900">df6a7f7f</a>)</li>
<li>Bring back querySelectorAll shortcut usage (<a href="https://github.com/jquery/jquery/commit/cef4b73179b8d2a38cfd5e0730111cc80518311a">cef4b731</a>)</li>
<li>Inline Sizzle into the selector module (<a href="https://github.com/jquery/jquery/commit/47835965bd100a3661d8299d8b769ceeb8b6ce48">47835965</a>)</li>
<li>Port Sizzle tests to jQuery (<a href="https://github.com/jquery/jquery/commit/79b74e043a4ee737d44a95094ff1184e40bd5b16">79b74e04</a>)</li>
</ul>

<h3>Support</h3>
<ul>
<li>ensure display is set to block for the support div (<a href="https://github.com/jquery/jquery/issues/4832">#4832</a>, <a href="https://github.com/jquery/jquery/commit/09f254361f1fe8a563b8a90fe6a4d269f4b11514">09f25436</a>)</li>
</ul>

<h3>Tests</h3>
<ul>
<li>Disable the “:lang respects escaped backslashes” test (<a href="https://github.com/jquery/jquery/issues/5271">#5271</a>, <a href="https://github.com/jquery/jquery/commit/62b9a2583460c2384f6de1d0a6aeaf05e51d523b">62b9a258</a>)</li>
<li>Indicate Chrome 112 &amp; Safari 16.4 pass the cssHas support test (<a href="https://github.com/jquery/jquery/commit/89ef81f86f8f371154e9fd3173be5fb57cb72d5e">89ef81f8</a>)</li>
<li>Test AJAX deprecated event aliases properly (<a href="https://github.com/jquery/jquery/commit/cff2899885c314d32eea42e9eef6ead6e5da5c2f">cff28998</a>)</li>
<li>Indicate Firefox 106+ passes the `cssSupportsSelector` test (<a href="https://github.com/jquery/jquery/commit/716130e094caf780100a39cfd4526adbd7673b12">716130e0</a>)</li>
<li>Remove a workaround for a Firefox XML parsing issue (<a href="https://github.com/jquery/jquery/commit/e7ffe1f135dfa68ce3065b2bd319a29a57866dc6">e7ffe1f1</a>)</li>
<li>Fix the link to QUnit CSS file (<a href="https://github.com/jquery/jquery/commit/8cf39b78e6c36b360dd81268a7f84fb4ca218e15">8cf39b78</a>)</li>
<li>Exclude tests based on compilation flags, not API presence (<a href="https://github.com/jquery/jquery/issues/5069">#5069</a>, <a href="https://github.com/jquery/jquery/commit/fae5fee8b435cc20352d28b0a384b9784b1ad9ed">fae5fee8</a>)</li>
<li>Workaround an XML parsing bug in Firefox (<a href="https://github.com/jquery/jquery/commit/af1cd6f218f699abc34b1582a910c0df00312aee">af1cd6f2</a>)</li>
<li>lock colors version to 1.4.0 (<a href="https://github.com/jquery/jquery/commit/9603b3c899af354a4f538fa5b15f9dac3fcc0f55">9603b3c8</a>)</li>
<li>Skip ETag AJAX tests on TestSwarm (<a href="https://github.com/jquery/jquery/commit/00c060d1619d472a2d8c5b104ed76fa3afc2ce97">00c060d1</a>)</li>
<li>Allow statusText to be “success” in AJAX tests (<a href="https://github.com/jquery/jquery/commit/19ced963c63372eae5aca9e1a4baec80b78a2b8e">19ced963</a>)</li>
<li>Make Karma browser timeout larger than the QUnit one (<a href="https://github.com/jquery/jquery/commit/4fd6912bfd8fffbfabc98a9b0789d28f10af0914">4fd6912b</a>)</li>
<li>Don’t remove csp.log in the cspClean action of mock.php (<a href="https://github.com/jquery/jquery/commit/1019074f7b1df96ee9d6409ada3dc0562046f6c7">1019074f</a>)</li>
<li>Load the TestSwarm listener via HTTPS (<a href="https://github.com/jquery/jquery/commit/d225639a8ea62863482bd20249077688f60235db">d225639a</a>)</li>
<li>Switch background image from online file to local 1×1.jpg (<a href="https://github.com/jquery/jquery/commit/482f846203e82b1c2620f580e483bf41d11f9f49">482f8462</a>)</li>
<li>Strip untypical callback parameter characters from mock.php (<a href="https://github.com/jquery/jquery/commit/a70274632dc19ff4a64d7bb7657a2cc647ff38b9">a7027463</a>)</li>
<li>Make more tests run natively in Chrome &amp; Firefox (<a href="https://github.com/jquery/jquery/commit/50e8e84621ff7a314fca253ce73f0519322d8a4d">50e8e846</a>)</li>
<li>Fix tests for not auto-executing scripts without dataType (<a href="https://github.com/jquery/jquery/commit/d38528b17a846b7ca4513b41150a05436546292d">d38528b1</a>)</li>
<li>Recognize callbacks with dots in the Node.js mock server (<a href="https://github.com/jquery/jquery/commit/df6858df2ed3fc5c424591a5e09b900eb4ce0417">df6858df</a>)</li>
<li>Skip the “jQuery.ajax() on unload” test in Safari (<a href="https://github.com/jquery/jquery/commit/c18dc49699bc27481a4af36ed1a0ee1b19c6eb03">c18dc496</a>)</li>
<li>Remove an unused local variable (<a href="https://github.com/jquery/jquery/commit/82b87f6f0e45ca4e717b4e3a4a20a592709a099f">82b87f6f</a>)</li>
<li>Remove remaining obsolete jQuery.cache references (<a href="https://github.com/jquery/jquery/commit/d96111e18b42ae1bc7def72a8a0d156ea39e4d0e">d96111e1</a>)</li>
<li>Workaround failures in recent XSS tests in iOS 8 – 12 (<a href="https://github.com/jquery/jquery/commit/11066a9e6ac183dd710d1bc7aa74a3f809757136">11066a9e</a>)</li>
<li>Add tests for recently fixed manipulation XSS issues (<a href="https://github.com/jquery/jquery/commit/dc06d68bdc4c2562b5cc530f21e668a17d78ee2d">dc06d68b</a>)</li>
<li>Use only one focusin/out handler per matching window &amp; document (<a href="https://github.com/jquery/jquery/commit/9b7320435059e30af71d648ab34ac6c00c80f5ef">9b732043</a>)</li>
<li>Fix flakiness in the “jQuery.ajax() – JSONP – Same Domain” test (<a href="https://github.com/jquery/jquery/commit/7b0864d0539bbfbb01d88d9bc95369580ffd99bc">7b0864d0</a>)</li>
<li>Pass a number of necessary done() calls to assert.async() (<a href="https://github.com/jquery/jquery/commit/364476c3dc1231603ba61fc08068fa89fb095e1a">364476c3</a>)</li>
<li>Remove obsolete jQuery data tests (<a href="https://github.com/jquery/jquery/commit/eb35be528fdea40faab4d89ac859d38dfd024271">eb35be52</a>)</li>
<li>Skip a “width/height on a table row with phantom borders” test in Firefox (<a href="https://github.com/jquery/jquery/commit/a612733be0c68d337647a6fcc8f8e0cabc1fc36b">a612733b</a>)</li>
<li>Don’t test synchronous XHR on unload in Chrome (<a href="https://github.com/jquery/jquery/commit/323575fb9bb330a852718d89e323f7ec79549100">323575fb</a>)</li>
<li>Stop using jQuery.find in tests (<a href="https://github.com/jquery/jquery/commit/1d624c10b4a6b97ac254bcefffa91058556075d2">1d624c10</a>)</li>
<li>Port changes from Sizzle (<a href="https://github.com/jquery/jquery/commit/ac5f7cd8e29ecc7cdf21c13199be5472375ffa0e">ac5f7cd8</a>)</li>
<li>Fix a comment in testinit.js (<a href="https://github.com/jquery/jquery/commit/7bdf307b51e4d4a891b123a96d4899e31bfba024">7bdf307b</a>)</li>
<li>update npo.js and include unminified source instead (<a href="https://github.com/jquery/jquery/commit/b334ce7735ae453bd5643b251f36c3cedce4b3de">b334ce77</a>)</li>
<li>Restrict an event test fallback to TestSwarm (<a href="https://github.com/jquery/jquery/commit/bde53edcf4bd6c975d068eed4eb16c5ba09c1cff">bde53edc</a>)</li>
<li>Fix the new focusin/focusout test in IE (<a href="https://github.com/jquery/jquery/commit/6f2fae7c410dcb5876814866a03fc819f0502290">6f2fae7c</a>)</li>
<li>Fix the core-js polyfill inclusion method (<a href="https://github.com/jquery/jquery/commit/2e4b79ab8f7c43d36537a743c4c1a1a5b17e130e">2e4b79ab</a>)</li>
</ul>

<h3>Traversing</h3>
<ul>
<li>Fix `contents()` on `&lt;object&gt;`s with children in IE (<a href="https://github.com/jquery/jquery/commit/ccbd6b93424cbdbf86f07a86c2e55cbab497d7a3">ccbd6b93</a>)</li>
<li>Fix `contents()` on `&lt;object&gt;`s with children (<a href="https://github.com/jquery/jquery/issues/4384">#4384</a>, <a href="https://github.com/jquery/jquery/commit/4d865d96aa5aae91823c50020b5c19da79566811">4d865d96</a>)</li>
</ul>
			<!-- #comments -->
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Problem with Civil Asset Forfeiture (2016) (111 pts)]]></title>
            <link>https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2959039</link>
            <guid>39283058</guid>
            <pubDate>Wed, 07 Feb 2024 00:48:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2959039">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2959039</a>, See on <a href="https://news.ycombinator.com/item?id=39283058">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

	
	
		
	

	
	
		
		
	

	
	

	
	
	
	
	
    
        <p>The Journal of Private Enterprise, Vol. 31(1), p. 45-56, 2016</p>
    
	

	
	<p>
		
		
			<span>12 Pages</span>
		
		

		<span>Posted: 27 Apr 2017</span>
		
			<span>Last revised: 29 Apr 2017</span>
		
		
	</p>
	
		
	
	
	
	
	



	
	
	
	
		
	
	
		
			<p>Date Written: April 1, 2016</p>
		
	

	
	
		
		
	

	
	
		
	
	<div>
		<h3>Abstract</h3>
		<p>Governments originally meant for civil asset forfeiture laws to take the profit out of crime and show that crime literally does not pay. Since governments keep the seized assets for themselves, however, these laws lead to perverse incentives. Instead of police using resources to fight crime that has actual victims, police go after drug buyers to find assets to seize to increase the police budget. This paper attempts to show that police are ordinary, rational people who attempt to maximize their welfare. Police unions lobby to block regulations that limit forfeiture laws; seized assets and drug arrests have gone up while drug usage has not. Instead of trying to reduce crime, the police become the criminals by taking honest people’s belongings. This paper also shows the effect of forfeiture on drug prices and how law enforcement has no incentive to reduce arrests for victimless crimes. </p>
	</div>
	

	<center>
		
		


	

	
	

		
		

	
	


	</center>

	
	
	
		
	
	
	

	
	
		
		
			
				
			
		
		<p><strong>Keywords:</strong> Theft, Government, Competition, Civil Asset Forfeiture</p>
	
	

	
    
    
	

	
	
		<p><strong>JEL Classification:</strong> H0, H1, H10</p>
	
	

	
	

























    	
	
	
	
   	
	
	
	
	
	            
	















	











    
    










    
    
    
    
















	






	<p>
		<strong>Suggested Citation:</strong>
		<a href="#">Suggested Citation<i></i></a>
	</p>
	<p>
		
			Rothschild,  Daniel and Block,  Walter E., Don't Steal; The Government Hates Competition: The Problem with Civil Asset Forfeiture (April 1, 2016). The Journal of Private Enterprise, Vol. 31(1), p. 45-56, 2016,  Available at SSRN: <a href="https://ssrn.com/abstract=2959039" target="_blank">https://ssrn.com/abstract=2959039</a>
		
	</p>
	

	
	
	

	
	

	
	
		
	

	
	
	
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Go 1.22 Release Notes (378 pts)]]></title>
            <link>https://go.dev/doc/go1.22</link>
            <guid>39282225</guid>
            <pubDate>Tue, 06 Feb 2024 23:15:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://go.dev/doc/go1.22">https://go.dev/doc/go1.22</a>, See on <a href="https://news.ycombinator.com/item?id=39282225">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main-content">
  


<article>





















<!--
NOTE: In this document and others in this directory, the convention is to
set fixed-width phrases with non-fixed-width spaces, as in
<code>hello</code> <code>world</code>.
Do not send CLs removing the interior tags from such phrases.
-->



<h2 id="introduction">Introduction to Go 1.22</h2>

<p>
  The latest Go release, version 1.22, arrives six months after <a href="https://go.dev/doc/go1.21">Go 1.21</a>.
  Most of its changes are in the implementation of the toolchain, runtime, and libraries.
  As always, the release maintains the Go 1 <a href="https://go.dev/doc/go1compat">promise of compatibility</a>.
  We expect almost all Go programs to continue to compile and run as before.
</p>

<h2 id="language">Changes to the language</h2>

<p>
<!-- loop variable scope --><!-- range over int -->
Go 1.22 makes two changes to "for" loops.
</p><ul>
  <li>
    Previously, the variables declared by a "for" loop were created once and updated by each iteration. In Go 1.22, each iteration of the loop creates new variables, to avoid accidental sharing bugs.
    The <a href="https://go.dev/wiki/LoopvarExperiment#my-test-fails-with-the-change-how-can-i-debug-it">transition support tooling</a>
    described in the proposal continues to work in the same way it did in Go 1.21.
  </li>
  <li>
    "For" loops may now range over integers.
    For <a href="https://go.dev/play/p/ky02zZxgk_r?v=gotip">example</a>:
<pre>package main

import "fmt"

func main() {
  for i := range 10 {
    fmt.Println(10 - i)
  }
  fmt.Println("go1.22 has lift-off!")
}
</pre>
    See the spec for <a href="https://go.dev/ref/spec#For_range">details</a>.
  </li>
</ul>

<!-- range over func GOEXPERIMENT; https://go.dev/issue/61405, https://go.dev/issue/61897, CLs 510541,539277,540263,543319 -->

<p>
  Go 1.22 includes a preview of a language change we are considering
  for a future version of Go: <a href="https://go.dev/wiki/RangefuncExperiment">range-over-function iterators</a>.
  Building with <code>GOEXPERIMENT=rangefunc</code> enables this feature.
</p>



<h3 id="go-command">Go command</h3>

<!-- https://go.dev/issue/60056 -->
<p>
  Commands in <a href="https://go.dev/ref/mod#workspaces">workspaces</a> can now
  use a <code>vendor</code> directory containing the dependencies of the
  workspace. The directory is created by
  <a href="https://go.dev/pkg/cmd/go#hdr-Make_vendored_copy_of_dependencies"><code>go</code> <code>work</code> <code>vendor</code></a>,
  and used by build commands when the <code>-mod</code> flag is set to
	<code>vendor</code>, which is the default when a workspace <code>vendor</code>
  directory is present.
</p>
<p>
  Note that the <code>vendor</code> directory's contents for a workspace are different
  from those of a single module: if the directory at the root of a workspace also
  contains one of the modules in the workspace, its <code>vendor</code> directory
  can contain the dependencies of either the workspace or of the module,
  but not both.
</p>

<!-- CL 518775, https://go.dev/issue/60915 -->
<p>
  <code>go</code> <code>get</code> is no longer supported outside of a module in the
  legacy <code>GOPATH</code> mode (that is, with <code>GO111MODULE=off</code>).
  Other build commands, such as <code>go</code> <code>build</code> and
  <code>go</code> <code>test</code>, will continue to work indefinitely
  for legacy <code>GOPATH</code> programs.
</p>

<!-- CL 518776 -->
<p>
  <code>go</code> <code>mod</code> <code>init</code> no longer attempts to import
  module requirements from configuration files for other vendoring tools
  (such as <code>Gopkg.lock</code>).
</p>

<!-- CL 495447 -->
<p>
  <code>go</code> <code>test</code> <code>-cover</code> now prints coverage summaries
  for covered packages that do not have their own test files. Prior to Go 1.22 a
  <code>go</code> <code>test</code> <code>-cover</code> run for such a package would
  report
</p>

<p>
  <code>?     mymod/mypack    [no test files]</code>
</p>

<p>
  and now with Go 1.22, functions in the package are treated as uncovered:
</p>

<p>
  <code>mymod/mypack    coverage: 0.0% of statements</code>
</p>

<p>
  Note that if a package contains no executable code at all, we can't report
  a meaningful coverage percentage; for such packages the <code>go</code> tool
  will continue to report that there are no test files.
</p>


<h3 id="trace">Trace</h3>

<!-- https://go.dev/issue/63960 -->
<p>
  The <code>trace</code> tool's web UI has been gently refreshed as part of the
  work to support the new tracer, resolving several issues and improving the
  readability of various sub-pages.
  The web UI now supports exploring traces in a thread-oriented view.
  The trace viewer also now displays the full duration of all system calls.
  <br>
  These improvements only apply for viewing traces produced by programs built with
  Go 1.22 or newer.
  A future release will bring some of these improvements to traces produced by older
  version of Go.
</p>

<h3 id="vet">Vet</h3>

<h4 id="vet-loopclosure">References to loop variables</h4>

<p><!-- CL 539016, https://go.dev/issue/63888: cmd/vet: do not report variable capture for loop variables with the new lifetime rules -->
  The behavior of the <code>vet</code> tool has changed to match
  the new semantics (see above) of loop variables in Go 1.22.
  When analyzing a file that requires Go 1.22 or newer
  (due to its go.mod file or a per-file build constraint),
  <code>vet</code>code&gt; no longer reports references to
  loop variables from within a function literal that
  might outlive the iteration of the loop.
  In Go 1.22, loop variables are created anew for each iteration,
  so such references are no longer at risk of using a variable
  after it has been updated by the loop.
</p>

<h4 id="vet-appends">New warnings for missing values after append</h4>

<p><!-- CL 498416, https://go.dev/issue/60448: add a new analyzer for check missing values after append -->
  The <code>vet</code> tool now reports calls to
  <a href="https://go.dev/pkg/builtin/#append"><code>append</code></a> that pass
  no values to be appended to the slice, such as <code>slice = append(slice)</code>.
  Such a statement has no effect, and experience has shown that is nearly always a mistake.
</p>

<h4 id="vet-defers">New warnings for deferring <code>time.Since</code></h4>

<p><!-- CL 527095, https://go.dev/issue/60048: time.Since should not be used in defer statement -->
  The vet tool now reports a non-deferred call to
  <a href="https://go.dev/pkg/time/#Since"><code>time.Since(t)</code></a> within a <code>defer</code> statement.
  This is equivalent to calling <code>time.Now().Sub(t)</code> before the <code>defer</code> statement,
  not when the deferred function is called. In nearly all cases, the correct code
  requires deferring the <code>time.Since</code> call. For example:
</p>

<pre>t := time.Now()
defer log.Println(time.Since(t)) // non-deferred call to time.Since
tmp := time.Since(t); defer log.Println(tmp) // equivalent to the previous defer

defer func() {
  log.Println(time.Since(t)) // a correctly deferred call to time.Since
}()
</pre>

<h4 id="vet-slog">New warnings for mismatched key-value pairs in <code>log/slog</code> calls</h4>

<p><!-- CL 496156, https://go.dev/issue/59407: log/slog: add vet checks for variadic ...any inputs -->
  The vet tool now reports invalid arguments in calls to functions and methods
  in the structured logging package, <a href="https://go.dev/pkg/log/slog"><code>log/slog</code></a>,
  that accept alternating key/value pairs.
  It reports calls where an argument in a key position is neither a
  <code>string</code> nor a <code>slog.Attr</code>, and where a final key is missing its value.
</p>

<h2 id="runtime">Runtime</h2>

<p><!-- CL 543255 -->
  The runtime now keeps type-based garbage collection metadata nearer to each
  heap object, improving the CPU performance (latency or throughput) of Go programs
  by 1–3%.
  This change also reduces the memory overhead of the majority Go programs by
  approximately 1% by deduplicating redundant metadata.
  Some programs may see a smaller improvement because this change adjusts the size
  class boundaries of the memory allocator, so some objects may be moved up a size
  class.
</p>
<p>
  A consequence of this change is that some objects' addresses that were previously
  always aligned to a 16 byte (or higher) boundary will now only be aligned to an 8
  byte boundary.
  Some programs that use assembly instructions that require memory addresses to be
  more than 8-byte aligned and rely on the memory allocator's previous alignment behavior
  may break, but we expect such programs to be rare.
  Such programs may be built with <code>GOEXPERIMENT=noallocheaders</code> to revert
  to the old metadata layout and restore the previous alignment behavior, but package
  owners should update their assembly code to avoid the alignment assumption, as this
  workaround will be removed in a future release.
</p>

<p><!-- CL 525475 -->
  On the <code>windows/amd64 port</code>, programs linking or loading Go libraries built with
  <code>-buildmode=c-archive</code> or <code>-buildmode=c-shared</code> can now use
  the <code>SetUnhandledExceptionFilter</code> Win32 function to catch exceptions not handled
  by the Go runtime. Note that this was already supported on the <code>windows/386</code> port.
</p>

<h2 id="compiler">Compiler</h2>

<p><!-- https://go.dev/issue/61577 -->
  <a href="https://go.dev/doc/pgo">Profile-guided Optimization (PGO)</a> builds
  can now devirtualize a higher proportion of calls than previously possible.
  Most programs from a representative set of Go programs now see between 2 and
  14% improvement from enabling PGO.
</p>

<p><!-- https://go.dev/cl/528321 -->
  The compiler now interleaves devirtualization and inlining, so interface
  method calls are better optimized.
</p>

<p><!-- https://go.dev/issue/61502 -->
  Go 1.22 also includes a preview of an enhanced implementation of the compiler's inlining phase that uses heuristics to boost inlinability at call sites deemed "important" (for example, in loops) and discourage inlining at call sites deemed "unimportant" (for example, on panic paths).
  Building with <code>GOEXPERIMENT=newinliner</code> enables the new call-site
  heuristics; see <a href="https://go.dev/issue/61502">issue #61502</a> for
  more info and to provide feedback.
</p>

<h2 id="linker">Linker</h2>

<p><!-- CL 493136 -->
  The linker's <code>-s</code> and <code>-w</code> flags are now behave more
  consistently across all platforms.
  The <code>-w</code> flag suppresses DWARF debug information generation.
  The <code>-s</code> flag suppresses symbol table generation.
  The <code>-s</code> flag also implies the <code>-w</code> flag, which can be
  negated with <code>-w=0</code>.
  That is, <code>-s</code> <code>-w=0</code> will generate a binary with DWARF
  debug information generation but without the symbol table.
</p>

<p><!-- CL 511475 -->
  On ELF platforms, the <code>-B</code> linker flag now accepts a special form:
  with <code>-B</code> <code>gobuildid</code>, the linker will generate a GNU
  build ID (the ELF <code>NT_GNU_BUILD_ID</code> note) derived from the Go
  build ID.
</p>

<p><!-- CL 534555 -->
  On Windows, when building with <code>-linkmode=internal</code>, the linker now
  preserves SEH information from C object files by copying the <code>.pdata</code>
  and <code>.xdata</code> sections into the final binary.
  This helps with debugging and profiling binaries using native tools, such as WinDbg.
  Note that until now, C functions' SEH exception handlers were not being honored,
  so this change may cause some programs to behave differently.
  <code>-linkmode=external</code> is not affected by this change, as external linkers
  already preserve SEH information.
</p>

<h2 id="bootstrap">Bootstrap</h2>

<p>
  As mentioned in the <a href="https://go.dev/doc/go1.20#bootstrap">Go 1.20 release notes</a>, Go 1.22 now requires
  the final point release of Go 1.20 or later for bootstrap.
  We expect that Go 1.24 will require the final point release of Go 1.22 or later for bootstrap.
</p>

<h2 id="library">Core library</h2>

<h3 id="math_rand_v2">New math/rand/v2 package</h3>

<!-- CL 502495 -->
<!-- CL 502497 -->
<!-- CL 502498 -->
<!-- CL 502499 -->
<!-- CL 502500 -->
<!-- CL 502505 -->
<!-- CL 502506 -->
<!-- CL 516857 -->
<!-- CL 516859 -->

<p>
  Go 1.22 includes the first “v2” package in the standard library,
  <a href="https://go.dev/pkg/math/rand/v2/"><code>math/rand/v2</code></a>.
  The changes compared to <a href="https://go.dev/pkg/math/rand/"><code>math/rand</code></a> are
  detailed in <a href="https://go.dev/issue/61716">proposal #61716</a>. The most important changes are:
</p>

<ul>
<li>The <code>Read</code> method, deprecated in <code>math/rand</code>,
was not carried forward for <code>math/rand/v2</code>.
(It remains available in <code>math/rand</code>.)
The vast majority of calls to <code>Read</code> should use
<a href="https://go.dev/pkg/crypto/rand/#Read"><code>crypto/rand</code>’s <code>Read</code></a> instead.
Otherwise a custom <code>Read</code> can be constructed using the <code>Uint64</code> method.

</li><li>The global generator accessed by top-level functions is unconditionally randomly seeded.
Because the API guarantees no fixed sequence of results,
optimizations like per-thread random generator states are now possible.

</li><li>The <a href="https://go.dev/pkg/math/rand/v2/#Source"><code>Source</code></a>
interface now has a single <code>Uint64</code> method;
there is no <code>Source64</code> interface.

</li><li>Many methods now use faster algorithms that were not possible to adopt in <code>math/rand</code>
because they changed the output streams.

</li><li>The
<code>Intn</code>,
<code>Int31</code>,
<code>Int31n</code>,
<code>Int63</code>,
and
<code>Int64n</code>
top-level functions and methods from <code>math/rand</code>
are spelled more idiomatically in <code>math/rand/v2</code>:
<code>IntN</code>,
<code>Int32</code>,
<code>Int32N</code>,
<code>Int64</code>,
and
<code>Int64N</code>.
There are also new top-level functions and methods
<code>Uint32</code>,
<code>Uint32N</code>,
<code>Uint64</code>,
<code>Uint64N</code>,
<code>Uint</code>,
and
<code>UintN</code>.

</li><li>The
new generic function <a href="https://go.dev/pkg/math/rand/v2/#N"><code>N</code></a>
is like
<a href="https://go.dev/pkg/math/rand/v2/#Int64N"><code>Int64N</code></a> or
<a href="https://go.dev/pkg/math/rand/v2/#Uint64N"><code>Uint64N</code></a>
but works for any integer type.
For example a random duration from 0 up to 5 minutes is
<code>rand.N(5*time.Minute)</code>.

</li><li>The Mitchell &amp; Reeds LFSR generator provided by
<a href="https://go.dev/pkg/math/rand/#Source"><code>math/rand</code>’s <code>Source</code></a>
has been replaced by two more modern pseudo-random generator sources:
<a href="https://go.dev/pkg/math/rand/v2/#ChaCha8"><code>ChaCha8</code></a>
<a href="https://go.dev/pkg/math/rand/v2/#PCG"><code>PCG</code></a>.
ChaCha8 is a new, cryptographically strong random number generator
roughly similar to PCG in efficiency.
ChaCha8 is the algorithm used for the top-level functions in <code>math/rand/v2</code>.
As of Go 1.22, <code>math/rand</code>'s top-level functions (when not explicitly seeded)
and the Go runtime also use ChaCha8 for randomness.
</li></ul>

<p>
We plan to include an API migration tool in a future release, likely Go 1.23.
</p>

<h3 id="go/version">New go/version package</h3>

<p><!-- https://go.dev/issue/62039, https://go.dev/cl/538895 -->
  The new <a href="https://go.dev/pkg/go/version/"><code>go/version</code></a> package implements functions
  for validating and comparing Go version strings.
</p>

<h3 id="enhanced_routing_patterns">Enhanced routing patterns</h3>

<p><!-- https://go.dev/issue/61410 -->
  HTTP routing in the standard library is now more expressive.
  The patterns used by <a href="https://go.dev/pkg/net/http#ServeMux"><code>net/http.ServeMux</code></a> have been enhanced to accept methods and wildcards.
</p>

<p>
  Registering a handler with a method, like <code>"POST /items/create"</code>, restricts
  invocations of the handler to requests with the given method. A pattern with a method takes precedence over a matching pattern without one.
  As a special case, registering a handler with <code> "GET"</code> also registers it with <code>"HEAD"</code>.
</p>

<p>
  Wildcards in patterns, like <code>/items/{id}</code>, match segments of the URL path.
  The actual segment value may be accessed by calling the <a href="https://go.dev/pkg/net/http#Request.PathValue"><code>Request.PathValue</code></a> method.
  A wildcard ending in "...", like <code>/files/{path...}</code>, must occur at the end of a pattern and matches all the remaining segments.
</p>

<p>
  A pattern that ends in "/" matches all paths that have it as a prefix, as always.
  To match the exact pattern including the trailing slash, end it with <code>{$}</code>,
  as in <code>/exact/match/{$}</code>.
</p>

<p>
  If two patterns overlap in the requests that they match, then the more specific pattern takes precedence.
  If neither is more specific, the patterns conflict.
  This rule generalizes the original precedence rules and maintains the property that the order in which
  patterns are registered does not matter.
</p>

<p>
  This change breaks backwards compatibility in small ways, some obvious—patterns with "{" and "}" behave differently—
  and some less so—treatment of escaped paths has been improved.
  The change is controlled by a <a href="https://go.dev/doc/godebug"><code>GODEBUG</code></a> field named <code>httpmuxgo121</code>.
  Set <code>httpmuxgo121=1</code> to restore the old behavior.
</p>

<h3 id="minor_library_changes">Minor changes to the library</h3>

<p>
  As always, there are various minor changes and updates to the library,
  made with the Go 1 <a href="https://go.dev/doc/go1compat">promise of compatibility</a>
  in mind.
  There are also various performance improvements, not enumerated here.
</p>

<dl id="archive/tar"><dt><a href="https://go.dev/pkg/archive/tar/">archive/tar</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/58000, CL 513316 -->
      The new method <a href="https://go.dev/pkg/archive/tar#Writer.AddFS"><code>Writer.AddFS</code></a> adds all of the files from an <a href="https://go.dev/pkg/io/fs#FS"><code>fs.FS</code></a> to the archive.
    </p>
  </dd>
</dl><!-- archive/tar -->

<dl id="archive/zip"><dt><a href="https://go.dev/pkg/archive/zip/">archive/zip</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/54898, CL 513438 -->
      The new method <a href="https://go.dev/pkg/archive/zip#Writer.AddFS"><code>Writer.AddFS</code></a> adds all of the files from an <a href="https://go.dev/pkg/io/fs#FS"><code>fs.FS</code></a> to the archive.
    </p>
  </dd>
</dl><!-- archive/zip -->

<dl id="bufio"><dt><a href="https://go.dev/pkg/bufio/">bufio</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/56381, CL 498117 -->
      When a <a href="https://go.dev/pkg/bufio#SplitFunc"><code>SplitFunc</code></a> returns <a href="https://go.dev/pkg/bufio#ErrFinalToken"><code>ErrFinalToken</code></a> with a <code>nil</code> token, <a href="https://go.dev/pkg/bufio#Scanner"><code>Scanner</code></a> will now stop immediately.
      Previously, it would report a final empty token before stopping, which was usually not desired.
      Callers that do want to report a final empty token can do so by returning <code>[]byte{}</code> rather than <code>nil</code>.
    </p>
  </dd>
</dl><!-- bufio -->

<dl id="cmp"><dt><a href="https://go.dev/pkg/cmp/">cmp</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/60204 --><!-- CL 504883 -->
      The new function <code>Or</code> returns the first in a sequence of values that is not the zero value.
    </p>
  </dd>
</dl><!-- cmp -->

<dl id="crypto/tls"><dt><a href="https://go.dev/pkg/crypto/tls/">crypto/tls</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/43922, CL 544155 -->
      <a href="https://go.dev/pkg/crypto/tls#ConnectionState.ExportKeyingMaterial"><code>ConnectionState.ExportKeyingMaterial</code></a> will now
      return an error unless TLS 1.3 is in use, or the <code>extended_master_secret</code> extension is supported by both the server and
      client. <code>crypto/tls</code> has supported this extension since Go 1.20. This can be disabled with the
      <code>tlsunsafeekm=1</code> GODEBUG setting.
    </p>

    <p><!-- https://go.dev/issue/62459, CL 541516 -->
      By default, the minimum version offered by <code>crypto/tls</code> servers is now TLS 1.2 if not specified with
      <a href="https://go.dev/pkg/crypto/tls#Config.MinimumVersion"><code>config.MinimumVersion</code></a>, matching the behavior of <code>crypto/tls</code>
      clients. This change can be reverted with the <code>tls10server=1</code> GODEBUG setting.
    </p>

    <p><!-- https://go.dev/issue/63413, CL 541517 -->
      By default, cipher suites without ECDHE support are no longer offered by either clients or servers during pre-TLS 1.3
      handshakes. This change can be reverted with the <code>tlsrsakex=1</code> GODEBUG setting.
    </p>
  </dd>
</dl><!-- crypto/tls -->

<dl id="crypto/x509"><dt><a href="https://go.dev/pkg/crypto/x509/">crypto/x509</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/57178 -->
      The new <a href="https://go.dev/pkg/crypto/x509#CertPool.AddCertWithConstraint"><code>CertPool.AddCertWithConstraint</code></a>
      method can be used to add customized constraints to root certificates to be applied during chain building.
    </p>

    <p><!-- https://go.dev/issue/58922, CL 519315-->
      On Android, root certificates will now be loaded from <code>/data/misc/keychain/certs-added</code> as well as <code>/system/etc/security/cacerts</code>.
    </p>

    <p><!-- https://go.dev/issue/60665, CL 520535 -->
      A new type, <a href="https://go.dev/pkg/crypto/x509#OID"><code>OID</code></a>, supports ASN.1 Object Identifiers with individual
      components larger than 31 bits. A new field which uses this type, <a href="https://go.dev/pkg/crypto/x509#Certificate.Policies"><code>Policies</code></a>,
      is added to the <code>Certificate</code> struct, and is now populated during parsing. Any OIDs which cannot be represented
      using a <a href="https://go.dev/pkg/encoding/asn1#ObjectIdentifier"><code>asn1.ObjectIdentifier</code></a> will appear in <code>Policies</code>,
      but not in the old <code>PolicyIdentifiers</code> field.

      When calling <a href="https://go.dev/pkg/crypto/x509#CreateCertificate"><code>CreateCertificate</code></a>, the <code>Policies</code> field is ignored, and
      policies are taken from the <code>PolicyIdentifiers</code> field. Using the <code>x509usepolicies=1</code> GODEBUG setting inverts this,
      populating certificate policies from the <code>Policies</code> field, and ignoring the <code>PolicyIdentifiers</code> field. We may change the
      default value of <code>x509usepolicies</code> in Go 1.23, making <code>Policies</code> the default field for marshaling.
    </p>
  </dd>
</dl><!-- crypto/x509 -->

<dl id="database/sql"><dt><a href="https://go.dev/pkg/database/sql/">database/sql</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/60370, CL 501700 -->
      The new <a href="https://go.dev/pkg/database/sql/#Null"><code>Null[T]</code></a> type
      provide a way to scan nullable columns for any column types.
    </p>
  </dd>
</dl><!-- database/sql -->

<dl id="debug/elf"><dt><a href="https://go.dev/pkg/debug/elf/">debug/elf</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/61974, CL 469395 -->
      Constant <code>R_MIPS_PC32</code> is defined for use with MIPS64 systems.
    </p>
  </dd>
  <dd>
    <p><!-- https://go.dev/issue/63725, CL 537615 -->
      Additional <code>R_LARCH_*</code> constants are defined for use with LoongArch systems.
    </p>
  </dd>
</dl><!-- debug/elf -->

<dl id="encoding"><dt><a href="https://go.dev/pkg/encoding/">encoding</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/53693, https://go.dev/cl/504884 -->
      The new methods <code>AppendEncode</code> and <code>AppendDecode</code> added to
      each of the <code>Encoding</code> types in the packages
      <a href="https://go.dev/pkg/encoding/base32"><code>encoding/base32</code></a>,
      <a href="https://go.dev/pkg/encoding/base64"><code>encoding/base64</code></a>, and
      <a href="https://go.dev/pkg/encoding/hex"><code>encoding/hex</code></a>
      simplify encoding and decoding from and to byte slices by taking care of byte slice buffer management.
    </p>

    <p><!-- https://go.dev/cl/505236 -->
      The methods
      <a href="https://go.dev/pkg/encoding/base32#Encoding.WithPadding"><code>base32.Encoding.WithPadding</code></a> and
      <a href="https://go.dev/pkg/encoding/base64#Encoding.WithPadding"><code>base64.Encoding.WithPadding</code></a>
      now panic if the <code>padding</code> argument is a negative value other than
      <code>NoPadding</code>.
    </p>
  </dd>
</dl><!-- encoding -->

<dl id="encoding/json"><dt><a href="https://go.dev/pkg/encoding/json/">encoding/json</a></dt>
  <dd>
    <p><!-- https://go.dev/cl/521675 -->
      Marshaling and encoding functionality now escapes
      <code>'\b'</code> and <code>'\f'</code> characters as
      <code>\b</code> and <code>\f</code> instead of
      <code>\u0008</code> and <code>\u000c</code>.
    </p>
  </dd>
</dl><!-- encoding/json -->

<dl id="go/ast"><dt><a href="https://go.dev/pkg/go/ast/">go/ast</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/52463, https://go/dev/cl/504915 -->
      The following declarations related to
      <a href="https://pkg.go.dev/go/ast#Object">syntactic identifier resolution</a>
      are now <a href="https://go.dev/issue/52463">deprecated</a>:
      <code>Ident.Obj</code>,
      <code>Object</code>,
      <code>Scope</code>,
      <code>File.Scope</code>,
      <code>File.Unresolved</code>,
      <code>Importer</code>,
      <code>Package</code>,
      <code>NewPackage</code>.

      In general, identifiers cannot be accurately resolved without type information.
      Consider, for example, the identifier <code>K</code>
      in <code>T{K: ""}</code>: it could be the name of a local variable
      if T is a map type, or the name of a field if T is a struct type.

      New programs should use the <a href="https://go.dev/pkg/go/types">go/types</a>
      package to resolve identifiers; see
      <a href="https://pkg.go.dev/go/types#Object"><code>Object</code></a>,
      <a href="https://pkg.go.dev/go/types#Info.Uses"><code>Info.Uses</code></a>, and
      <a href="https://pkg.go.dev/go/types#Info.Defs"><code>Info.Defs</code></a> for details.
    </p>

    <p><!-- https://go.dev/issue/60061 -->
      The new <a href="https://pkg.go.dev/go/ast#Unparen"><code>ast.Unparen</code></a>
      function removes any enclosing
      <a href="https://pkg.go.dev/go/ast#ParenExpr">parentheses</a> from
      an <a href="https://pkg.go.dev/go/ast#Expr">expression</a>.
    </p>
  </dd>
</dl><!-- go/ast -->

<dl id="go/types"><dt><a href="https://go.dev/pkg/go/types/">go/types</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/63223, CL 521956, CL 541737 -->
      The new <a href="https://go.dev/pkg/go/types#Alias"><code>Alias</code></a> type represents type aliases.
      Previously, type aliases were not represented explicitly, so a reference to a type alias was equivalent
      to spelling out the aliased type, and the name of the alias was lost.
      The new representation retains the intermediate <code>Alias</code>.
      This enables improved error reporting (the name of a type alias can be reported), and allows for better handling
      of cyclic type declarations involving type aliases.
      In a future release, <code>Alias</code> types will also carry <a href="https://go.dev/issue/46477">type parameter information</a>.
      The new function <a href="https://go.dev/pkg/go/types#Unalias"><code>Unalias</code></a> returns the actual type denoted by an
      <code>Alias</code> type (or any other <a href="https://go.dev/pkg/go/types#Type"><code>Type</code></a> for that matter).
    </p>
    <p>
      Because <code>Alias</code> types may break existing type switches that do not know to check for them,
      this functionality is controlled by a <a href="https://go.dev/doc/godebug"><code>GODEBUG</code></a> field named <code>gotypesalias</code>.
      With <code>gotypesalias=0</code>, everything behaves as before, and <code>Alias</code> types are never created.
      With <code>gotypesalias=1</code>, <code>Alias</code> types are created and clients must expect them.
      The default is <code>gotypesalias=0</code>.
      In a future release, the default will be changed to <code>gotypesalias=1</code>.
      <em>Clients of <a href="https://go.dev/pkg/go/types"><code>go/types</code></a> are urged to adjust their code as soon as possible
      to work with <code>gotypesalias=1</code> to eliminate problems early.</em>
    </p>

    <p><!-- https://go.dev/issue/62605, CL 540056 -->
      The <a href="https://go.dev/pkg/go/types#Info"><code>Info</code></a> struct now exports the
      <a href="https://go.dev/pkg/go/types#Info.FileVersions"><code>FileVersions</code></a> map
      which provides per-file Go version information.
    </p>

    <p><!-- https://go.dev/issue/62037, CL 541575 -->
      The new helper method <a href="https://go.dev/pkg/go/types#Info.PkgNameOf"><code>PkgNameOf</code></a> returns the local package name
      for the given import declaration.
    </p>

    <p><!-- https://go.dev/issue/61035, multiple CLs, see issue for details -->
      The implementation of <a href="https://go.dev/pkg/go/types#SizesFor"><code>SizesFor</code></a> has been adjusted to compute
      the same type sizes as the compiler when the compiler argument for <code>SizesFor</code> is <code>"gc"</code>.
      The default <a href="https://go.dev/pkg/go/types#Sizes"><code>Sizes</code></a> implementation used by the type checker is now
      <code>types.SizesFor("gc", "amd64")</code>.
    </p>

    <p><!-- https://go.dev/issue/64295, CL 544035 -->
      The start position (<a href="https://go.dev/pkg/go/types#Scope.Pos"><code>Pos</code></a>)
      of the lexical environment block (<a href="https://go.dev/pkg/go/types#Scope"><code>Scope</code></a>)
      that represents a function body has changed:
      it used to start at the opening curly brace of the function body,
      but now starts at the function's <code>func</code> token.
    </p>
  </dd>
</dl>

<dl id="html/template"><dt><a href="https://go.dev/pkg/html/template/">html/template</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/61619, CL 507995 -->
      Javascript template literals may now contain Go template actions, and parsing a template containing one will
      no longer return <code>ErrJSTemplate</code>. Similarly the GODEBUG setting <code>jstmpllitinterp</code> no
      longer has any effect.
    </p>
  </dd>
</dl><!-- html/template -->

<dl id="io"><dt><a href="https://go.dev/pkg/io/">io</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/61870, CL 526855 -->
      The new <a href="https://go.dev/pkg/io#SectionReader.Outer"><code>SectionReader.Outer</code></a> method returns the <a href="https://go.dev/pkg/io#ReaderAt"><code>ReaderAt</code></a>, offset, and size passed to <a href="https://go.dev/pkg/io#NewSectionReader"><code>NewSectionReader</code></a>.
    </p>
  </dd>
</dl><!-- io -->

<dl id="log/slog"><dt><a href="https://go.dev/pkg/log/slog/">log/slog</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/62418 -->
      The new <a href="https://go.dev/pkg/log/slog#SetLogLoggerLevel"><code>SetLogLoggerLevel</code></a> function
      controls the level for the bridge between the `slog` and `log` packages. It sets the minimum level
      for calls to the top-level `slog` logging functions, and it sets the level for calls to `log.Logger`
      that go through `slog`.
    </p>
  </dd>
</dl>

<dl id="math/big"><dt><a href="https://go.dev/pkg/math/big/">math/big</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/50489, CL 539299 -->
      The new method <a href="https://go.dev/pkg/math/big#Rat.FloatPrec"><code>Rat.FloatPrec</code></a> computes the number of fractional decimal digits
      required to represent a rational number accurately as a floating-point number, and whether accurate decimal representation
      is possible in the first place.
    </p>
  </dd>
</dl><!-- math/big -->

<dl id="net"><dt><a href="https://go.dev/pkg/net/">net</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/58808 -->
      When <a href="https://go.dev/pkg/io#Copy"><code>io.Copy</code></a> copies
      from a <code>TCPConn</code> to a <code>UnixConn</code>,
      it will now use Linux's <code>splice(2)</code> system call if possible,
      using the new method <a href="https://go.dev/pkg/net#TCPConn.WriteTo"><code>TCPConn.WriteTo</code></a>.
    </p>

    <p><!-- CL 467335 -->
      The Go DNS Resolver, used when building with "-tags=netgo",
      now searches for a matching name in the Windows hosts file,
      located at <code>%SystemRoot%\System32\drivers\etc\hosts</code>,
      before making a DNS query.
    </p>
  </dd>
</dl><!-- net -->

<dl id="net/http"><dt><a href="https://go.dev/pkg/net/http/">net/http</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/51971 -->
      The new functions
      <a href="https://go.dev/pkg/net/http#ServeFileFS"><code>ServeFileFS</code></a>,
      <a href="https://go.dev/pkg/net/http#FileServerFS"><code>FileServerFS</code></a>, and
      <a href="https://go.dev/pkg/net/http#NewFileTransportFS"><code>NewFileTransportFS</code></a>
      are versions of the existing
      <code>ServeFile</code>, <code>FileServer</code>, and <code>NewFileTransport</code>,
      operating on an <code>fs.FS</code>.
    </p>

    <p><!-- https://go.dev/issue/61679 -->
      The HTTP server and client now reject requests and responses containing
      an invalid empty <code>Content-Length</code> header.
      The previous behavior may be restored by setting
      <a href="https://go.dev/doc/godebug"><code>GODEBUG</code></a> field <code>httplaxcontentlength=1</code>.
    </p>

    <p><!-- https://go.dev/issue/61410, CL 528355 -->
      The new method
      <a href="https://go.dev/pkg/net/http#Request.PathValue"><code>Request.PathValue</code></a>
      returns path wildcard values from a request
      and the new method
      <a href="https://go.dev/pkg/net/http#Request.SetPathValue"><code>Request.SetPathValue</code></a>
      sets path wildcard values on a request.
    </p>
  </dd>
</dl><!-- net/http -->

<dl id="net/http/cgi"><dt><a href="https://go.dev/pkg/net/http/cgi/">net/http/cgi</a></dt>
  <dd>
    <p><!-- CL 539615 -->
      When executing a CGI process, the <code>PATH_INFO</code> variable is now
      always set to the empty string or a value starting with a <code>/</code> character,
      as required by RFC 3875. It was previously possible for some combinations of
      <a href="https://go.dev/pkg/net/http/cgi#Handler.Root"><code>Handler.Root</code></a>
      and request URL to violate this requirement.
    </p>
  </dd>
</dl><!-- net/http/cgi -->

<dl id="net/netip"><dt><a href="https://go.dev/pkg/net/netip/">net/netip</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/61642 -->
      The new <a href="https://go.dev/pkg/net/netip#AddrPort.Compare"><code>AddrPort.Compare</code></a>
      method compares two <code>AddrPort</code>s.
    </p>
  </dd>
</dl><!-- net/netip -->

<dl id="os"><dt><a href="https://go.dev/pkg/os/">os</a></dt>
  <dd>
    <p><!-- CL 516555 -->
      On Windows, the <a href="https://go.dev/pkg/os#Stat"><code>Stat</code></a> function now follows all reparse points
      that link to another named entity in the system.
      It was previously only following <code>IO_REPARSE_TAG_SYMLINK</code> and
      <code>IO_REPARSE_TAG_MOUNT_POINT</code> reparse points.
    </p>

    <p><!-- CL 541015 -->
      On Windows, passing <a href="https://go.dev/pkg/os#O_SYNC"><code>O_SYNC</code></a> to <a href="https://go.dev/pkg/os#OpenFile"><code>OpenFile</code></a> now causes write operations to go directly to disk, equivalent to <code>O_SYNC</code> on Unix platforms.
    </p>

    <p><!-- CL 452995 -->
      On Windows, the <a href="https://go.dev/pkg/os#ReadDir"><code>ReadDir</code></a>,
      <a href="https://go.dev/pkg/os#File.ReadDir"><code>File.ReadDir</code></a>,
      <a href="https://go.dev/pkg/os#File.Readdir"><code>File.Readdir</code></a>,
      and <a href="https://go.dev/pkg/os#File.Readdirnames"><code>File.Readdirnames</code></a> functions
      now read directory entries in batches to reduce the number of system calls,
      improving performance up to 30%.
    </p>

    <p><!-- https://go.dev/issue/58808 -->
      When <a href="https://go.dev/pkg/io#Copy"><code>io.Copy</code></a> copies
      from a <code>File</code> to a <code>net.UnixConn</code>,
      it will now use Linux's <code>sendfile(2)</code> system call if possible,
      using the new method <a href="https://go.dev/pkg/os#File.WriteTo"><code>File.WriteTo</code></a>.
    </p>
  </dd>
</dl><!-- os -->

<dl id="os/exec"><dt><a href="https://go.dev/pkg/os/exec/">os/exec</a></dt>
  <dd>
    <p><!-- CL 528037 -->
      On Windows, <a href="https://go.dev/pkg/os/exec#LookPath"><code>LookPath</code></a> now
      ignores empty entries in <code>%PATH%</code>, and returns
      <code>ErrNotFound</code> (instead of <code>ErrNotExist</code>) if
      no executable file extension is found to resolve an otherwise-unambiguous
      name.
    </p>

    <p><!-- CL 528038, CL 527820 -->
      On Windows, <a href="https://go.dev/pkg/os/exec#Command"><code>Command</code></a> and
      <a href="https://go.dev/pkg/os/exec#Cmd.Start"><code>Cmd.Start</code></a> no
      longer call <code>LookPath</code> if the path to the executable is already
      absolute and has an executable file extension. In addition,
      <code>Cmd.Start</code> no longer writes the resolved extension back to
      the <a href="https://go.dev/pkg/os/exec#Cmd.Path"><code>Path</code></a> field,
      so it is now safe to call the <code>String</code> method concurrently
      with a call to <code>Start</code>.
    </p>
  </dd>
</dl><!-- os/exec -->

<dl id="reflect"><dt><a href="https://go.dev/pkg/reflect/">reflect</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/61827, CL 517777 -->
      The <a href="https://go.dev/pkg/reflect/#Value.IsZero"><code>Value.IsZero</code></a>
      method will now return true for a floating-point or complex
      negative zero, and will return true for a struct value if a
      blank field (a field named <code>_</code>) somehow has a
      non-zero value.
      These changes make <code>IsZero</code> consistent with comparing
      a value to zero using the language <code>==</code> operator.
    </p>

    <p><!-- https://go.dev/issue/59599, CL 511035 -->
      The <a href="https://go.dev/pkg/reflect/#PtrTo"><code>PtrTo</code></a> function is deprecated,
      in favor of <a href="https://go.dev/pkg/reflect/#PointerTo"><code>PointerTo</code></a>.
    </p>

    <p><!-- https://go.dev/issue/60088, CL 513478 -->
      The new function <a href="https://go.dev/pkg/reflect/#TypeFor"><code>TypeFor</code></a>
      returns the <a href="https://go.dev/pkg/reflect/#Type"><code>Type</code></a> that represents
      the type argument T.
      Previously, to get the <code>reflect.Type</code> value for a type, one had to use
      <code>reflect.TypeOf((*T)(nil)).Elem()</code>.
      This may now be written as <code>reflect.TypeFor[T]()</code>.
    </p>
  </dd>
</dl><!-- reflect -->

<dl id="runtime/metrics"><dt><a href="https://go.dev/pkg/runtime/metrics/">runtime/metrics</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/63340 -->
      Four new histogram metrics
      <code>/sched/pauses/stopping/gc:seconds</code>,
      <code>/sched/pauses/stopping/other:seconds</code>,
      <code>/sched/pauses/total/gc:seconds</code>, and
      <code>/sched/pauses/total/other:seconds</code> provide additional details
      about stop-the-world pauses.
      The "stopping" metrics report the time taken from deciding to stop the
      world until all goroutines are stopped.
      The "total" metrics report the time taken from deciding to stop the world
      until it is started again.
    </p>

    <p><!-- https://go.dev/issue/63340 -->
      The <code>/gc/pauses:seconds</code> metric is deprecated, as it is
      equivalent to the new <code>/sched/pauses/total/gc:seconds</code> metric.
    </p>

    <p><!-- https://go.dev/issue/57071 -->
      <code>/sync/mutex/wait/total:seconds</code> now includes contention on
      runtime-internal locks in addition to
      <a href="https://go.dev/pkg/sync#Mutex"><code>sync.Mutex</code></a> and
      <a href="https://go.dev/pkg/sync#RWMutex"><code>sync.RWMutex</code></a>.
    </p>
  </dd>
</dl><!-- runtime/metrics -->

<dl id="runtime/pprof"><dt><a href="https://go.dev/pkg/runtime/pprof/">runtime/pprof</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/61015 -->
      Mutex profiles now scale contention by the number of goroutines blocked on the mutex.
      This provides a more accurate representation of the degree to which a mutex is a bottleneck in
      a Go program.
      For instance, if 100 goroutines are blocked on a mutex for 10 milliseconds, a mutex profile will
      now record 1 second of delay instead of 10 milliseconds of delay.
    </p>

    <p><!-- https://go.dev/issue/57071 -->
      Mutex profiles also now include contention on runtime-internal locks in addition to
      <a href="https://go.dev/pkg/sync#Mutex"><code>sync.Mutex</code></a> and
      <a href="https://go.dev/pkg/sync#RWMutex"><code>sync.RWMutex</code></a>.
      Contention on runtime-internal locks is always reported at <code>runtime._LostContendedRuntimeLock</code>.
      A future release will add complete stack traces in these cases.
    </p>

    <p><!-- https://go.dev/issue/50891 -->
      CPU profiles on Darwin platforms now contain the process's memory map, enabling the disassembly
      view in the pprof tool.
    </p>
  </dd>
</dl><!-- runtime/pprof -->

<dl id="runtime/trace"><dt><a href="https://go.dev/pkg/runtime/trace/">runtime/trace</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/60773 -->
      The execution tracer has been completely overhauled in this release, resolving several long-standing
      issues and paving the way for new use-cases for execution traces.
    </p>
    <p>
      Execution traces now use the operating system's clock on most platforms (Windows excluded) so
      it is possible to correlate them with traces produced by lower-level components.
      Execution traces no longer depend on the reliability of the platform's clock to produce a correct trace.
      Execution traces are now partitioned regularly on-the-fly and as a result may be processed in a
      streamable way.
      Execution traces now contain complete durations for all system calls.
      Execution traces now contain information about the operating system threads that goroutines executed on.
      The latency impact of starting and stopping execution traces has been dramatically reduced.
      Execution traces may now begin or end during the garbage collection mark phase.
    </p>
    <p>
      To allow Go developers to take advantage of these improvements, an experimental
      trace reading package is available at <a href="https://go.dev/pkg/golang.org/x/exp/trace">golang.org/x/exp/trace</a>.
      Note that this package only works on traces produced by programs built with Go 1.22 at the moment.
      Please try out the package and provide feedback on
      <a href="https://go.dev/issue/62627">the corresponding proposal issue</a>.
    </p>
    <p>
      If you experience any issues with the new execution tracer implementation, you may switch back to the
      old implementation by building your Go program with <code>GOEXPERIMENT=noexectracer2</code>.
      If you do, please file an issue, otherwise this option will be removed in a future release.
    </p>
  </dd>
</dl><!-- runtime/trace -->

<dl id="slices"><dt><a href="https://go.dev/pkg/slices/">slices</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/56353 --><!-- CL 504882 -->
      The new function <code>Concat</code> concatenates multiple slices.
    </p>

    <p><!-- https://go.dev/issue/63393 --><!-- CL 543335 -->
      Functions that shrink the size of a slice (<code>Delete</code>, <code>DeleteFunc</code>, <code>Compact</code>, <code>CompactFunc</code>, and <code>Replace</code>) now zero the elements between the new length and the old length.
    </p>

    <p><!-- https://go.dev/issue/63913 --><!-- CL 540155 -->
      <code>Insert</code> now always panics if the argument <code>i</code> is out of range. Previously it did not panic in this situation if there were no elements to be inserted.
    </p>
  </dd>
</dl><!-- slices -->

<dl id="syscall"><dt><a href="https://go.dev/pkg/syscall/">syscall</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/60797 -->
      The <code>syscall</code> package has been <a href="https://go.dev/s/go1.4-syscall">frozen</a> since Go 1.4 and was marked as deprecated in Go 1.11, causing many editors to warn about any use of the package.
      However, some non-deprecated functionality requires use of the <code>syscall</code> package, such as the <a href="https://go.dev/pkg/os/exec#Cmd"><code>os/exec.Cmd.SysProcAttr</code></a> field.
      To avoid unnecessary complaints on such code, the <code>syscall</code> package is no longer marked as deprecated.
      The package remains frozen to most new functionality, and new code remains encouraged to use <a href="https://go.dev/pkg/golang.org/x/sys/unix"><code>golang.org/x/sys/unix</code></a> or <a href="https://go.dev/pkg/golang.org/x/sys/windows"><code>golang.org/x/sys/windows</code></a> where possible.
    </p>

    <p><!-- https://go.dev/issue/51246, CL 520266 -->
      On Linux, the new <a href="https://go.dev/pkg/syscall#SysProcAttr"><code>SysProcAttr.PidFD</code></a> field allows obtaining a PID FD when starting a child process via <a href="https://go.dev/pkg/syscall#StartProcess"><code>StartProcess</code></a> or <a href="https://go.dev/pkg/os/exec"><code>os/exec</code></a>.
    </p>

    <p><!-- CL 541015 -->
      On Windows, passing <a href="https://go.dev/pkg/syscall#O_SYNC"><code>O_SYNC</code></a> to <a href="https://go.dev/pkg/syscall#Open"><code>Open</code></a> now causes write operations to go directly to disk, equivalent to <code>O_SYNC</code> on Unix platforms.
    </p>
  </dd>
</dl><!-- syscall -->

<dl id="testing/slogtest"><dt><a href="https://go.dev/pkg/testing/slogtest/">testing/slogtest</a></dt>
  <dd>
    <p><!-- https://go.dev/issue/61758 -->
      The new <a href="https://go.dev/pkg/testing/slogtest#Run"><code>Run</code></a> function uses sub-tests to run test cases,
      providing finer-grained control.
    </p>
  </dd>
</dl><!-- testing/slogtest -->

<h2 id="ports">Ports</h2>

<h3 id="darwin">Darwin</h3>
<p><!-- CL 461697 -->
  On macOS on 64-bit x86 architecture (the <code>darwin/amd64</code> port),
  the Go toolchain now generates position-independent executables (PIE) by default.
  Non-PIE binaries can be generated by specifying the <code>-buildmode=exe</code>
  build flag.
  On 64-bit ARM-based macOS (the <code>darwin/arm64</code> port),
  the Go toolchain already generates PIE by default.
</p>
<p><!-- go.dev/issue/64207 -->
  Go 1.22 is the last release that will run on macOS 10.15 Catalina. Go 1.23 will require macOS 11 Big Sur or later.
</p>

<h3 id="arm">Arm</h3>
<p><!-- CL 514907 -->
  The <code>GOARM</code> environment variable now allows you to select whether to use software or hardware floating point.
  Previously, valid <code>GOARM</code> values were <code>5</code>, <code>6</code>, or <code>7</code>. Now those same values can
  be optionally followed by <code>,softfloat</code> or <code>,hardfloat</code> to select the floating-point implementation.
</p>
<p>
  This new option defaults to <code>softfloat</code> for version <code>5</code> and <code>hardfloat</code> for versions
  <code>6</code> and <code>7</code>.
</p>

<h3 id="loong64">Loong64</h3>
<p><!-- CL 481315 -->
  The <code>loong64</code> port now supports passing function arguments and results using registers.
</p>
<p><!-- CL 481315,537615,480878 -->
  The <code>linux/loong64</code> port now supports the address sanitizer, memory sanitizer, new-style linker relocations, and the <code>plugin</code> build mode.
</p>

<h3 id="openbsd">OpenBSD</h3>
<p><!-- CL 517935 -->
  Go 1.22 adds an experimental port to OpenBSD on big-endian 64-bit PowerPC
  (<code>openbsd/ppc64</code>).
</p>





</article>



</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Making steel without emitting CO2 (224 pts)]]></title>
            <link>https://www.science.org/content/article/electrifying-new-ironmaking-method-could-slash-carbon-emissions</link>
            <guid>39282020</guid>
            <pubDate>Tue, 06 Feb 2024 22:55:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.science.org/content/article/electrifying-new-ironmaking-method-could-slash-carbon-emissions">https://www.science.org/content/article/electrifying-new-ironmaking-method-could-slash-carbon-emissions</a>, See on <a href="https://news.ycombinator.com/item?id=39282020">Hacker News</a></p>
Couldn't get https://www.science.org/content/article/electrifying-new-ironmaking-method-could-slash-carbon-emissions: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[The three million toothbrush botnet story isn't true (160 pts)]]></title>
            <link>https://cyberplace.social/@GossiTheDog/111886558855943676</link>
            <guid>39281939</guid>
            <pubDate>Tue, 06 Feb 2024 22:48:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://cyberplace.social/@GossiTheDog/111886558855943676">https://cyberplace.social/@GossiTheDog/111886558855943676</a>, See on <a href="https://news.ycombinator.com/item?id=39281939">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[SQL for data scientists in 100 queries (715 pts)]]></title>
            <link>https://gvwilson.github.io/sql-tutorial/</link>
            <guid>39281178</guid>
            <pubDate>Tue, 06 Feb 2024 21:50:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gvwilson.github.io/sql-tutorial/">https://gvwilson.github.io/sql-tutorial/</a>, See on <a href="https://news.ycombinator.com/item?id=39281178">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      
      
<!-- 0 -->

<section>

  <h2 id="what-this-is">☆ what this is</h2>

  <ul>
    <li>notes and working examples that instructors can use to perform a lesson
      <ul>
        <li>do <em>not</em> expect novices with no prior SQL experience to be able to learn from them</li>
      </ul>
    </li>
    <li>musical analogy
      <ul>
        <li>this is the chord changes and melody</li>
        <li>we expect instructors to create an arrangement and/or improvise while delivering</li>
        <li>see <a href="https://teachtogether.tech/"><em>Teaching Tech Together</em></a> for background</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="scope">☆ scope</h2>

  <ul>
    <li><a href="http://teachtogether.tech/en/index.html#s:process-personas">intended audience</a>
      <ul>
        <li>Rachel has a master’s degree in cell biology
and now works in a research hospital doing cell assays.</li>
        <li>She learned a bit of R in an undergrad biostatistics course
and has been through <a href="https://swcarpentry.github.io/shell-novice/">the Carpentries lesson on the Unix shell</a>.</li>
        <li>Rachel is thinking about becoming a data scientist
and would like to understand how data is stored and managed.</li>
        <li>Her work schedule is unpredictable and highly variable,
so she needs to be able to learn a bit at a time.</li>
      </ul>
    </li>
    <li>prerequisites
      <ul>
        <li>basic Unix command line: <code>cd</code>, <code>ls</code>, <code>*</code> wildcard</li>
        <li>basic tabular data analysis: filtering rows, aggregating within groups</li>
      </ul>
    </li>
    <li>learning outcomes
      <ol>
        <li>Explain the difference between a database and a database manager.</li>
        <li>Write SQL to select, filter, sort, group, and aggregate data.</li>
        <li>Define tables and insert, update, and delete records.</li>
        <li>Describe different types of join and write queries that use them to combine data.</li>
        <li>Use windowing functions to operate on adjacent rows.</li>
        <li>Explain what transactions are and write queries that roll back when constraints are violated.</li>
        <li>Explain what triggers are and write SQL to create them.</li>
        <li>Manipulate JSON data using SQL.</li>
        <li>Interact with a database using Python directly, from a Jupyter notebook, and via an ORM.</li>
      </ol>
    </li>
  </ul>

</section>
<section>

  <h2 id="setup">☆ setup</h2>

  <ul>
    <li>Download <a href="https://github.com/gvwilson/sql-tutorial/raw/main/sql-tutorial.zip">the latest release</a></li>
    <li>Unzip the file in a temporary directory to create:
      <ul>
        <li><code>./db/*.db</code>: the SQLite databases used in the examples</li>
        <li><code>./src/*.*</code>: SQL queries, Python scripts, and other source code</li>
        <li><code>./out/*.*</code>: expected output for examples</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="background-concepts">☆ background concepts</h2>

  <ul>
    <li>A <a href="#g:database">database</a> is a collection of data that can be searched and retrieved</li>
    <li>A <a href="#g:dbms">database management system</a> (DBMS) is a program that manages a particular kind of database</li>
    <li>Each DBMS stores data in its own way
      <ul>
        <li><a href="https://sqlite.org/">SQLite</a> stores each database in a single file</li>
        <li><a href="https://www.postgresql.org/">PostgreSQL</a> spreads information across many files for higher performance</li>
      </ul>
    </li>
    <li>DBMS can be a library embedded in other programs (<a href="https://sqlite.org/">SQLite</a>) or a server (<a href="https://www.postgresql.org/">PostgreSQL</a>)</li>
    <li>A <a href="#g:rdbms">relational database management system</a> (RDBMS) stores data in tables and uses <a href="https://en.wikipedia.org/wiki/SQL">SQL</a> for queries
      <ul>
        <li>Unfortunately, every RDBMS has its own dialect of SQL</li>
      </ul>
    </li>
    <li>There are also <a href="#g:nosql">NoSQL databases</a> like <a href="https://www.mongodb.com/">MongoDB</a> that don’t use tables</li>
  </ul>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/concept_map_overview.svg" alt="concept map: overview"></p>

</section>
<section>

  <h2 id="connect-to-database">☆ connect to database</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/connect_penguins.sh">src/connect_penguins.sh</a></p>
  

  <ul>
    <li>Not actually a query</li>
    <li>But we have to do it before we can do anything else</li>
  </ul>

</section>
<section>

  <h2 id="select-constant">1: select constant</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/select_1.sql">src/select_1.sql</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/select_1.out">out/select_1.out</a></p>
  

  <ul>
    <li><code>select</code> is a keyword</li>
    <li>Normally used to select data from table…</li>
    <li>…but if all we want is a constant value, we don’t need to specify one</li>
    <li>Semi-colon terminator is required</li>
  </ul>

</section>
<section>

  <h2 id="select-all-values-from-table">2: select all values from table</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/select_star.sql">src/select_star.sql</a></p>
  <div><pre><code><span>select</span> <span>*</span> <span>from</span> <span>little_penguins</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/select_star.out">out/select_star.out</a></p>
  <div><pre><code>Adelie|Dream|37.2|18.1|178|3900|MALE
Adelie|Dream|37.6|19.3|181|3300|FEMALE
Gentoo|Biscoe|50|15.3|220|5550|MALE
Adelie|Torgersen|37.3|20.5|199|3775|MALE
Adelie|Biscoe|39.6|17.7|186|3500|FEMALE
Gentoo|Biscoe|47.7|15|216|4750|FEMALE
Adelie|Dream|36.5|18|182|3150|FEMALE
Gentoo|Biscoe|42|13.5|210|4150|FEMALE
Adelie|Torgersen|42.1|19.1|195|4000|MALE
Gentoo|Biscoe|54.3|15.7|231|5650|MALE
</code></pre></div>

  <ul>
    <li>An actual <a href="#g:query">query</a></li>
    <li>Use <code>*</code> to mean “all columns”</li>
    <li>Use <code>from <em>tablename</em></code> to specify table</li>
    <li>Output format is not particularly readable</li>
  </ul>

</section>
<section>

  <h2 id="administrative-commands">☆ administrative commands</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/admin_commands.sql">src/admin_commands.sql</a></p>
  <div><pre><code><span>.</span><span>headers</span> <span>on</span>
<span>.</span><span>mode</span> <span>markdown</span>
<span>select</span> <span>*</span> <span>from</span> <span>little_penguins</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/admin_commands.out">out/admin_commands.out</a></p>
  <div><pre><code>| species |  island   | bill_length_mm | bill_depth_mm | flipper_length_mm | body_mass_g |  sex   |
|---------|-----------|----------------|---------------|-------------------|-------------|--------|
| Adelie  | Dream     | 37.2           | 18.1          | 178               | 3900        | MALE   |
| Adelie  | Dream     | 37.6           | 19.3          | 181               | 3300        | FEMALE |
| Gentoo  | Biscoe    | 50             | 15.3          | 220               | 5550        | MALE   |
| Adelie  | Torgersen | 37.3           | 20.5          | 199               | 3775        | MALE   |
| Adelie  | Biscoe    | 39.6           | 17.7          | 186               | 3500        | FEMALE |
| Gentoo  | Biscoe    | 47.7           | 15            | 216               | 4750        | FEMALE |
| Adelie  | Dream     | 36.5           | 18            | 182               | 3150        | FEMALE |
| Gentoo  | Biscoe    | 42             | 13.5          | 210               | 4150        | FEMALE |
| Adelie  | Torgersen | 42.1           | 19.1          | 195               | 4000        | MALE   |
| Gentoo  | Biscoe    | 54.3           | 15.7          | 231               | 5650        | MALE   |
</code></pre></div>

  <ul>
    <li>SQLite administrative commands start with <code>.</code> and <em>aren’t</em> part of the SQL standard
      <ul>
        <li>PostgreSQL’s special commands start with <code>\</code></li>
      </ul>
    </li>
    <li>Use <code>.help</code> for a complete list</li>
  </ul>

</section>
<section>

  <h2 id="specify-columns">3: specify columns</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/specify_columns.sql">src/specify_columns.sql</a></p>
  <div><pre><code><span>select</span> <span>species</span><span>,</span> <span>island</span><span>,</span> <span>sex</span>
<span>from</span> <span>little_penguins</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/specify_columns.out">out/specify_columns.out</a></p>
  <div><pre><code>| species |  island   |  sex   |
|---------|-----------|--------|
| Adelie  | Dream     | MALE   |
| Adelie  | Dream     | FEMALE |
| Gentoo  | Biscoe    | MALE   |
| Adelie  | Torgersen | MALE   |
| Adelie  | Biscoe    | FEMALE |
| Gentoo  | Biscoe    | FEMALE |
| Adelie  | Dream     | FEMALE |
| Gentoo  | Biscoe    | FEMALE |
| Adelie  | Torgersen | MALE   |
| Gentoo  | Biscoe    | MALE   |
</code></pre></div>

  <ul>
    <li>Specify column names separated by commas
      <ul>
        <li>In any order</li>
        <li>Duplicates allowed</li>
      </ul>
    </li>
    <li>Line breaks <strike>allowed</strike> encouraged for readability</li>
  </ul>

</section>
<section>

  <h2 id="sort">4: sort</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/sort.sql">src/sort.sql</a></p>
  <div><pre><code><span>select</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>little_penguins</span>
<span>order</span> <span>by</span> <span>island</span> <span>asc</span><span>,</span> <span>sex</span> <span>desc</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/sort.out">out/sort.out</a></p>
  <div><pre><code>| species |  sex   |  island   |
|---------|--------|-----------|
| Gentoo  | MALE   | Biscoe    |
| Gentoo  | MALE   | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Gentoo  | FEMALE | Biscoe    |
| Gentoo  | FEMALE | Biscoe    |
| Adelie  | MALE   | Dream     |
| Adelie  | FEMALE | Dream     |
| Adelie  | FEMALE | Dream     |
| Adelie  | MALE   | Torgersen |
| Adelie  | MALE   | Torgersen |
</code></pre></div>

  <ul>
    <li><code>order by</code> must follow <code>from</code> (which must follow <code>select</code>)</li>
    <li><code>asc</code> is ascending, <code>desc</code> is descending
      <ul>
        <li>Default is ascending, but please specify</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="limit-output">5: limit output</h2>

  <ul>
    <li>Full dataset has 344 rows</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/limit.sql">src/limit.sql</a></p>
  <div><pre><code><span>select</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>order</span> <span>by</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>limit</span> <span>10</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/limit.out">out/limit.out</a></p>
  <div><pre><code>| species |  sex   |  island   |
|---------|--------|-----------|
| Adelie  |        | Dream     |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
</code></pre></div>

  <ul>
    <li>Comments start with <code>--</code> and run to the end of the line</li>
    <li><code>limit <em>N</em></code> specifies maximum number of rows returned by query</li>
  </ul>

</section>
<section>

  <h2 id="page-output">6: page output</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/page.sql">src/page.sql</a></p>
  <div><pre><code><span>select</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>order</span> <span>by</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>limit</span> <span>10</span> <span>offset</span> <span>3</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/page.out">out/page.out</a></p>
  <div><pre><code>| species |  sex   |  island   |
|---------|--------|-----------|
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
</code></pre></div>

  <ul>
    <li><code>offset <em>N</em></code> must follow <code>limit</code></li>
    <li>Specifies number of rows to skip from the start of the selection</li>
    <li>So this query skips the first 3 and shows the next 10</li>
  </ul>

</section>
<section>

  <h2 id="remove-duplicates">7: remove duplicates</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/distinct.sql">src/distinct.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/distinct.out">out/distinct.out</a></p>
  <div><pre><code>|  species  |  sex   |  island   |
|-----------|--------|-----------|
| Adelie    | MALE   | Torgersen |
| Adelie    | FEMALE | Torgersen |
| Adelie    |        | Torgersen |
| Adelie    | FEMALE | Biscoe    |
| Adelie    | MALE   | Biscoe    |
| Adelie    | FEMALE | Dream     |
| Adelie    | MALE   | Dream     |
| Adelie    |        | Dream     |
| Chinstrap | FEMALE | Dream     |
| Chinstrap | MALE   | Dream     |
| Gentoo    | FEMALE | Biscoe    |
| Gentoo    | MALE   | Biscoe    |
| Gentoo    |        | Biscoe    |
</code></pre></div>

  <ul>
    <li><code>distinct</code> keyword must appear right after <code>select</code>
      <ul>
        <li>SQL was supposed to read like English</li>
      </ul>
    </li>
    <li>Shows distinct combinations</li>
    <li>Blanks in <code>sex</code> column show missing data
      <ul>
        <li>We’ll talk about this in a bit</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="filter-results">8: filter results</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/filter.sql">src/filter.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>island</span> <span>=</span> <span>'Biscoe'</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/filter.out">out/filter.out</a></p>
  <div><pre><code>| species |  sex   | island |
|---------|--------|--------|
| Adelie  | FEMALE | Biscoe |
| Adelie  | MALE   | Biscoe |
| Gentoo  | FEMALE | Biscoe |
| Gentoo  | MALE   | Biscoe |
| Gentoo  |        | Biscoe |
</code></pre></div>

  <ul>
    <li><code>where <em>condition</em></code> <a href="#g:filter">filters</a> the rows produced by selection</li>
    <li>Condition is evaluated independently for each row</li>
    <li>Only rows that pass the test appear in results</li>
    <li>Use single quotes for <code>'text data'</code> and double quotes for <code>"weird column names"</code>
      <ul>
        <li>SQLite will accept double-quoted text data</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="filter-with-more-complex-conditions">9: filter with more complex conditions</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/filter_and.sql">src/filter_and.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>island</span> <span>=</span> <span>'Biscoe'</span> <span>and</span> <span>sex</span> <span>!=</span> <span>'MALE'</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/filter_and.out">out/filter_and.out</a></p>
  <div><pre><code>| species |  sex   | island |
|---------|--------|--------|
| Adelie  | FEMALE | Biscoe |
| Gentoo  | FEMALE | Biscoe |
</code></pre></div>

  <ul>
    <li><code>and</code>: both sub-conditions must be true</li>
    <li><code>or</code>: either or both part must be true</li>
    <li>Notice that the row for Gentoo penguins on Biscoe island with unknown (empty) sex didn’t pass the test
      <ul>
        <li>We’ll talk about this in a bit</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="do-calculations">10: do calculations</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/calculations.sql">src/calculations.sql</a></p>
  <div><pre><code><span>select</span>
    <span>flipper_length_mm</span> <span>/</span> <span>10</span><span>.</span><span>0</span><span>,</span>
    <span>body_mass_g</span> <span>/</span> <span>1000</span><span>.</span><span>0</span>
<span>from</span> <span>penguins</span>
<span>limit</span> <span>3</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/calculations.out">out/calculations.out</a></p>
  <div><pre><code>| flipper_length_mm / 10.0 | body_mass_g / 1000.0 |
|--------------------------|----------------------|
| 18.1                     | 3.75                 |
| 18.6                     | 3.8                  |
| 19.5                     | 3.25                 |
</code></pre></div>

  <ul>
    <li>Can do the usual kinds of arithmetic on individual values
      <ul>
        <li>Calculation done for each row independently</li>
      </ul>
    </li>
    <li>Column name shows the calculation done</li>
  </ul>

</section>
<section>

  <h2 id="rename-columns">11: rename columns</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/rename_columns.sql">src/rename_columns.sql</a></p>
  <div><pre><code><span>select</span>
    <span>flipper_length_mm</span> <span>/</span> <span>10</span><span>.</span><span>0</span> <span>as</span> <span>flipper_cm</span><span>,</span>
    <span>body_mass_g</span> <span>/</span> <span>1000</span><span>.</span><span>0</span> <span>as</span> <span>weight_kg</span><span>,</span>
    <span>island</span> <span>as</span> <span>where_found</span>
<span>from</span> <span>penguins</span>
<span>limit</span> <span>3</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/rename_columns.out">out/rename_columns.out</a></p>
  <div><pre><code>| flipper_cm | weight_kg | where_found |
|------------|-----------|-------------|
| 18.1       | 3.75      | Torgersen   |
| 18.6       | 3.8       | Torgersen   |
| 19.5       | 3.25      | Torgersen   |
</code></pre></div>

  <ul>
    <li>Use <code><em>expression</em> as <em>name</em></code> to rename</li>
    <li>Give result of calculation a meaningful name</li>
    <li>Can also rename columns without modifying</li>
  </ul>

</section>
<section>

  <h2 id="check-your-understanding">☆ check your understanding</h2>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/concept_map_select.svg" alt="concept map: selection"></p>

</section>
<section>

  <h2 id="calculate-with-missing-values">12: calculate with missing values</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/show_missing_values.sql">src/show_missing_values.sql</a></p>
  <div><pre><code><span>select</span>
    <span>flipper_length_mm</span> <span>/</span> <span>10</span><span>.</span><span>0</span> <span>as</span> <span>flipper_cm</span><span>,</span>
    <span>body_mass_g</span> <span>/</span> <span>1000</span><span>.</span><span>0</span> <span>as</span> <span>weight_kg</span><span>,</span>
    <span>island</span> <span>as</span> <span>where_found</span>
<span>from</span> <span>penguins</span>
<span>limit</span> <span>5</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/show_missing_values.out">out/show_missing_values.out</a></p>
  <div><pre><code>| flipper_cm | weight_kg | where_found |
|------------|-----------|-------------|
| 18.1       | 3.75      | Torgersen   |
| 18.6       | 3.8       | Torgersen   |
| 19.5       | 3.25      | Torgersen   |
|            |           | Torgersen   |
| 19.3       | 3.45      | Torgersen   |
</code></pre></div>

  <ul>
    <li>SQL uses a special value <a href="#g:null"><code>null</code></a> to representing missing data
      <ul>
        <li>Not 0 or empty string, but “I don’t know”</li>
      </ul>
    </li>
    <li>Flipper length and body weight not known for one of the first five penguins</li>
    <li>“I don’t know” divided by 10 or 1000 is “I don’t know”</li>
  </ul>

</section>
<section>

  <h2 id="null-equality">13: null equality</h2>

  <ul>
    <li>Repeated from above so it doesn’t count against our query limit</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/filter.sql">src/filter.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>island</span> <span>=</span> <span>'Biscoe'</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/filter.out">out/filter.out</a></p>
  <div><pre><code>| species |  sex   | island |
|---------|--------|--------|
| Adelie  | FEMALE | Biscoe |
| Adelie  | MALE   | Biscoe |
| Gentoo  | FEMALE | Biscoe |
| Gentoo  | MALE   | Biscoe |
| Gentoo  |        | Biscoe |
</code></pre></div>

  <ul>
    <li>If we ask for female penguins the row with the missing sex drops out</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/null_equality.sql">src/null_equality.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>island</span> <span>=</span> <span>'Biscoe'</span> <span>and</span> <span>sex</span> <span>=</span> <span>'FEMALE'</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/null_equality.out">out/null_equality.out</a></p>
  <div><pre><code>| species |  sex   | island |
|---------|--------|--------|
| Adelie  | FEMALE | Biscoe |
| Gentoo  | FEMALE | Biscoe |
</code></pre></div>

</section>
<section>

  <h2 id="null-inequality">14: null inequality</h2>

  <ul>
    <li>But if we ask for penguins that <em>aren’t</em> female it drops out as well</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/null_inequality.sql">src/null_inequality.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>island</span> <span>=</span> <span>'Biscoe'</span> <span>and</span> <span>sex</span> <span>!=</span> <span>'FEMALE'</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/null_inequality.out">out/null_inequality.out</a></p>
  <div><pre><code>| species | sex  | island |
|---------|------|--------|
| Adelie  | MALE | Biscoe |
| Gentoo  | MALE | Biscoe |
</code></pre></div>

</section>
<section>

  <h2 id="ternary-logic">15: ternary logic</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/ternary_logic.sql">src/ternary_logic.sql</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/ternary_logic.out">out/ternary_logic.out</a></p>
  <div><pre><code>| null = null |
|-------------|
|             |
</code></pre></div>

  <ul>
    <li>If we don’t know the left and right values, we don’t know if they’re equal or not</li>
    <li>So the result is <code>null</code></li>
    <li>Get the same answer for <code>null != null</code></li>
    <li><a href="#g:ternary_logic">Ternary logic</a></li>
  </ul>

  <table>
  <tbody><tr>
    <th colspan="4">equality</th>
  </tr>
  <tr>
    <th></th>
    <th>X</th>
    <th>Y</th>
    <th>null</th>
  </tr>
  <tr>
    <th>X</th>
    <td>true</td>
    <td>false</td>
    <td>null</td>
  </tr>
  <tr>
    <th>Y</th>
    <td>false</td>
    <td>true</td>
    <td>null</td>
  </tr>
  <tr>
    <th>null</th>
    <td>null</td>
    <td>null</td>
    <td>null</td>
  </tr>
</tbody></table>

</section>
<section>

  <h2 id="handle-null-safely">16: handle null safely</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/safe_null_equality.sql">src/safe_null_equality.sql</a></p>
  <div><pre><code><span>select</span> <span>species</span><span>,</span> <span>sex</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>sex</span> <span>is</span> <span>null</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/safe_null_equality.out">out/safe_null_equality.out</a></p>
  <div><pre><code>| species | sex |  island   |
|---------|-----|-----------|
| Adelie  |     | Torgersen |
| Adelie  |     | Torgersen |
| Adelie  |     | Torgersen |
| Adelie  |     | Torgersen |
| Adelie  |     | Torgersen |
| Adelie  |     | Dream     |
| Gentoo  |     | Biscoe    |
| Gentoo  |     | Biscoe    |
| Gentoo  |     | Biscoe    |
| Gentoo  |     | Biscoe    |
| Gentoo  |     | Biscoe    |
</code></pre></div>

  <ul>
    <li>Use <code>is null</code> and <code>is not null</code> to handle null safely</li>
    <li>Other parts of SQL handle nulls specially</li>
  </ul>

</section>
<section>

  <h2 id="check-your-understanding-1">☆ check your understanding</h2>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/concept_map_null.svg" alt="concept map: null"></p>

</section>
<section>

  <h2 id="aggregate">17: aggregate</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/simple_sum.sql">src/simple_sum.sql</a></p>
  <div><pre><code><span>select</span> <span>sum</span><span>(</span><span>body_mass_g</span><span>)</span> <span>as</span> <span>total_mass</span>
<span>from</span> <span>penguins</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/simple_sum.out">out/simple_sum.out</a></p>
  <div><pre><code>| total_mass |
|------------|
| 1437000    |
</code></pre></div>

  <ul>
    <li><a href="#g:aggregation">Aggregation</a> combines many values to produce one</li>
    <li><code>sum</code> is an <a href="#g:aggregation_func">aggregation function</a></li>
    <li>Combines corresponding values from multiple rows</li>
  </ul>

</section>
<section>

  <h2 id="common-aggregation-functions">18: common aggregation functions</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/common_aggregations.sql">src/common_aggregations.sql</a></p>
  <div><pre><code><span>select</span>
    <span>max</span><span>(</span><span>bill_length_mm</span><span>)</span> <span>as</span> <span>longest_bill</span><span>,</span>
    <span>min</span><span>(</span><span>flipper_length_mm</span><span>)</span> <span>as</span> <span>shortest_flipper</span><span>,</span>
    <span>avg</span><span>(</span><span>bill_length_mm</span><span>)</span> <span>/</span> <span>avg</span><span>(</span><span>bill_depth_mm</span><span>)</span> <span>as</span> <span>weird_ratio</span>
<span>from</span> <span>penguins</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/common_aggregations.out">out/common_aggregations.out</a></p>
  <div><pre><code>| longest_bill | shortest_flipper |   weird_ratio    |
|--------------|------------------|------------------|
| 59.6         | 172              | 2.56087082530644 |
</code></pre></div>

  <ul>
    <li>This actually shouldn’t work:
can’t calculate maximum or average if any values are null</li>
    <li>SQL does the useful thing instead of the right one</li>
  </ul>

</section>
<section>

  <h2 id="counting">19: counting</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/count_behavior.sql">src/count_behavior.sql</a></p>
  <div><pre><code><span>select</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>count_star</span><span>,</span> <span>count</span><span>(</span><span>sex</span><span>)</span> <span>as</span> <span>count_specific</span>
<span>from</span> <span>penguins</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/count_behavior.out">out/count_behavior.out</a></p>
  <div><pre><code>| count_star | count_specific |
|------------|----------------|
| 344        | 333            |
</code></pre></div>

  <ul>
    <li><code>count(*)</code> counts rows</li>
    <li><code>count(<em>column</em>)</code> counts non-null entries in column</li>
  </ul>

</section>
<section>

  <h2 id="group">20: group</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/simple_group.sql">src/simple_group.sql</a></p>
  <div><pre><code><span>select</span>
    <span>avg</span><span>(</span><span>body_mass_g</span><span>)</span> <span>as</span> <span>average_mass_g</span>
<span>from</span> <span>penguins</span>
<span>group</span> <span>by</span> <span>sex</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/simple_group.out">out/simple_group.out</a></p>
  <div><pre><code>|  average_mass_g  |
|------------------|
| 4005.55555555556 |
| 3862.27272727273 |
| 4545.68452380952 |
</code></pre></div>

  <ul>
    <li>Put rows in <a href="#g:group">groups</a> based on distinct combinations of values in columns specified with <code>group by</code></li>
    <li>Then perform aggregation separately for each group</li>
    <li>But which is which?</li>
  </ul>

</section>
<section>

  <h2 id="behavior-of-unaggregated-columns">21: behavior of unaggregated columns</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/unaggregated_columns.sql">src/unaggregated_columns.sql</a></p>
  <div><pre><code><span>select</span>
    <span>sex</span><span>,</span>
    <span>avg</span><span>(</span><span>body_mass_g</span><span>)</span> <span>as</span> <span>average_mass_g</span>
<span>from</span> <span>penguins</span>
<span>group</span> <span>by</span> <span>sex</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/unaggregated_columns.out">out/unaggregated_columns.out</a></p>
  <div><pre><code>|  sex   |  average_mass_g  |
|--------|------------------|
|        | 4005.55555555556 |
| FEMALE | 3862.27272727273 |
| MALE   | 4545.68452380952 |
</code></pre></div>

  <ul>
    <li>All rows in each group have the same value for <code>sex</code>, so no need to aggregate</li>
  </ul>

</section>
<section>

  <h2 id="arbitrary-choice-in-aggregation">22: arbitrary choice in aggregation</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/arbitrary_in_aggregation.sql">src/arbitrary_in_aggregation.sql</a></p>
  <div><pre><code><span>select</span>
    <span>sex</span><span>,</span>
    <span>body_mass_g</span>                   
<span>from</span> <span>penguins</span>
<span>group</span> <span>by</span> <span>sex</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/arbitrary_in_aggregation.out">out/arbitrary_in_aggregation.out</a></p>
  <div><pre><code>|  sex   | body_mass_g |
|--------|-------------|
|        |             |
| FEMALE | 3800        |
| MALE   | 3750        |
</code></pre></div>

  <ul>
    <li>If we don’t specify how to aggregate a column, SQL can choose <em>any arbitrary value</em> from the group</li>
    <li>All penguins in each group have the same sex because we grouped by that, so we get the right answer</li>
    <li>The body mass values are in the data but unpredictable</li>
    <li>A common mistake</li>
  </ul>

</section>
<section>

  <h2 id="filter-aggregated-values">23: filter aggregated values</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/filter_aggregation.sql">src/filter_aggregation.sql</a></p>
  <div><pre><code><span>select</span>
    <span>sex</span><span>,</span>
    <span>avg</span><span>(</span><span>body_mass_g</span><span>)</span> <span>as</span> <span>average_mass_g</span>
<span>from</span> <span>penguins</span>
<span>group</span> <span>by</span> <span>sex</span>
<span>having</span> <span>average_mass_g</span> <span>&gt;</span> <span>4000</span><span>.</span><span>0</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/filter_aggregation.out">out/filter_aggregation.out</a></p>
  <div><pre><code>| sex  |  average_mass_g  |
|------|------------------|
|      | 4005.55555555556 |
| MALE | 4545.68452380952 |
</code></pre></div>

  <ul>
    <li>Using <code>having <em>condition</em></code> instead of <code>where <em>condition</em></code> for aggregates</li>
  </ul>

</section>
<section>

  <h2 id="readable-output">24: readable output</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/readable_aggregation.sql">src/readable_aggregation.sql</a></p>
  <div><pre><code><span>select</span>
    <span>sex</span><span>,</span>
    <span>round</span><span>(</span><span>avg</span><span>(</span><span>body_mass_g</span><span>),</span> <span>1</span><span>)</span> <span>as</span> <span>average_mass_g</span>
<span>from</span> <span>penguins</span>
<span>group</span> <span>by</span> <span>sex</span>
<span>having</span> <span>average_mass_g</span> <span>&gt;</span> <span>4000</span><span>.</span><span>0</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/readable_aggregation.out">out/readable_aggregation.out</a></p>
  <div><pre><code>| sex  | average_mass_g |
|------|----------------|
|      | 4005.6         |
| MALE | 4545.7         |
</code></pre></div>

  <ul>
    <li>Use <code>round(<em>value</em>, <em>decimals</em>)</code> to round off a number</li>
  </ul>

</section>
<section>

  <h2 id="filter-aggregate-inputs">25: filter aggregate inputs</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/filter_aggregate_inputs.sql">src/filter_aggregate_inputs.sql</a></p>
  <div><pre><code><span>select</span>
    <span>sex</span><span>,</span>
    <span>round</span><span>(</span>
        <span>avg</span><span>(</span><span>body_mass_g</span><span>)</span> <span>filter</span> <span>(</span><span>where</span> <span>body_mass_g</span> <span>&lt;</span> <span>4000</span><span>.</span><span>0</span><span>),</span>
        <span>1</span>
    <span>)</span> <span>as</span> <span>average_mass_g</span>
<span>from</span> <span>penguins</span>
<span>group</span> <span>by</span> <span>sex</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/filter_aggregate_inputs.out">out/filter_aggregate_inputs.out</a></p>
  <div><pre><code>|  sex   | average_mass_g |
|--------|----------------|
|        | 3362.5         |
| FEMALE | 3417.3         |
| MALE   | 3752.5         |
</code></pre></div>

  <ul>
    <li><code>filter (where <em>condition</em>)</code> applies to <em>inputs</em></li>
  </ul>

</section>
<section>

  <h2 id="check-your-understanding-2">☆ check your understanding</h2>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/concept_map_aggregate.svg" alt="concept map: aggregation"></p>

</section>
<section>

  <h2 id="create-in-memory-database">☆ create in-memory database</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/in_memory_db.sh">src/in_memory_db.sh</a></p>
  

  <ul>
    <li>“Connect” to an <a href="#g:in_memory_db">in-memory database</a></li>
  </ul>

</section>
<section>

  <h2 id="create-tables">26: create tables</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/create_work_job.sql">src/create_work_job.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>job</span> <span>(</span>
    <span>name</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>billable</span> <span>real</span> <span>not</span> <span>null</span>
<span>);</span>
<span>create</span> <span>table</span> <span>work</span> <span>(</span>
    <span>person</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>job</span> <span>text</span> <span>not</span> <span>null</span>
<span>);</span>
</code></pre></div>

  <ul>
    <li><code>create table <em>name</em></code> followed by parenthesized list of columns</li>
    <li>Each column is a name, a data type, and optional extra information
      <ul>
        <li>E.g., <code>not null</code> prevents nulls from being added</li>
      </ul>
    </li>
    <li><code>.schema</code> is <em>not</em> standard SQL</li>
    <li>SQLite has added a few things
      <ul>
        <li><code>create if not exists</code></li>
        <li>upper-case keywords (SQL is case insensitive)</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="insert-data">27: insert data</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/populate_work_job.sql">src/populate_work_job.sql</a></p>
  <div><pre><code><span>insert</span> <span>into</span> <span>job</span> <span>values</span>
    <span>(</span><span>'calibrate'</span><span>,</span> <span>1</span><span>.</span><span>5</span><span>),</span>
    <span>(</span><span>'clean'</span><span>,</span> <span>0</span><span>.</span><span>5</span><span>);</span>
<span>insert</span> <span>into</span> <span>work</span> <span>values</span>
    <span>(</span><span>'mik'</span><span>,</span> <span>'calibrate'</span><span>),</span>
    <span>(</span><span>'mik'</span><span>,</span> <span>'clean'</span><span>),</span>
    <span>(</span><span>'mik'</span><span>,</span> <span>'complain'</span><span>),</span>
    <span>(</span><span>'po'</span><span>,</span> <span>'clean'</span><span>),</span>
    <span>(</span><span>'po'</span><span>,</span> <span>'complain'</span><span>),</span>
    <span>(</span><span>'tay'</span><span>,</span> <span>'complain'</span><span>);</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/insert_values.out">out/insert_values.out</a></p>
  <pre><code>|   name    | billable |
|-----------|----------|
| calibrate | 1.5      |
| clean     | 0.5      |

| person |    job    |
|--------|-----------|
| mik    | calibrate |
| mik    | clean     |
| mik    | complain  |
| po     | clean     |
| po     | complain  |
| tay    | complain  |
</code></pre>

</section>
<section>

  <h2 id="update-rows">28: update rows</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/update_work_job.sql">src/update_work_job.sql</a></p>
  <div><pre><code><span>update</span> <span>work</span>
<span>set</span> <span>person</span> <span>=</span> <span>"tae"</span>
<span>where</span> <span>person</span> <span>=</span> <span>"tay"</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/update_rows.out">out/update_rows.out</a></p>
  <pre><code>| person |    job    |
|--------|-----------|
| mik    | calibrate |
| mik    | clean     |
| mik    | complain  |
| po     | clean     |
| po     | complain  |
| tae    | complain  |
</code></pre>

  <ul>
    <li>(Almost) always specify row(w) to update using <code>where</code>
      <ul>
        <li>Would otherwise update all rows</li>
      </ul>
    </li>
    <li>Useful to give each row a <a href="#g:primary_key">primary key</a> that uniquely identifies it for this purpose
      <ul>
        <li>Will see other uses below</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="delete-rows">29: delete rows</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/delete_rows.sql">src/delete_rows.sql</a></p>
  <div><pre><code><span>delete</span> <span>from</span> <span>work</span>
<span>where</span> <span>person</span> <span>=</span> <span>"tae"</span><span>;</span>

<span>select</span> <span>*</span> <span>from</span> <span>work</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/delete_rows.out">out/delete_rows.out</a></p>
  <div><pre><code>| person |    job    |
|--------|-----------|
| mik    | calibrate |
| mik    | clean     |
| mik    | complain  |
| po     | clean     |
| po     | complain  |
</code></pre></div>

  <ul>
    <li>Again, (almost) always specify row(s) to delete using <code>where</code></li>
  </ul>

</section>
<section>

  <h2 id="backing-up">30: backing up</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/backing_up.sql">src/backing_up.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>backup</span> <span>(</span>
    <span>person</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>job</span> <span>text</span> <span>not</span> <span>null</span>
<span>);</span>

<span>insert</span> <span>into</span> <span>backup</span>
<span>select</span> <span>person</span><span>,</span> <span>job</span>
<span>from</span> <span>work</span>
<span>where</span> <span>person</span> <span>=</span> <span>'tae'</span><span>;</span>

<span>delete</span> <span>from</span> <span>work</span>
<span>where</span> <span>person</span> <span>=</span> <span>'tae'</span><span>;</span>

<span>select</span> <span>*</span> <span>from</span> <span>backup</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/backing_up.out">out/backing_up.out</a></p>
  <div><pre><code>| person |   job    |
|--------|----------|
| tae    | complain |
</code></pre></div>

</section>
<section>

  <h2 id="check-your-understanding-3">☆ check your understanding</h2>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/concept_map_datamod.svg" alt="concept map: data definition and modification"></p>

</section>
<section>

  <h2 id="join-tables">31: join tables</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/cross_join.sql">src/cross_join.sql</a></p>
  <div><pre><code><span>select</span> <span>*</span>
<span>from</span> <span>work</span> <span>cross</span> <span>join</span> <span>job</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/cross_join.out">out/cross_join.out</a></p>
  <div><pre><code>| person |    job    |   name    | billable |
|--------|-----------|-----------|----------|
| mik    | calibrate | calibrate | 1.5      |
| mik    | calibrate | clean     | 0.5      |
| mik    | clean     | calibrate | 1.5      |
| mik    | clean     | clean     | 0.5      |
| mik    | complain  | calibrate | 1.5      |
| mik    | complain  | clean     | 0.5      |
| po     | clean     | calibrate | 1.5      |
| po     | clean     | clean     | 0.5      |
| po     | complain  | calibrate | 1.5      |
| po     | complain  | clean     | 0.5      |
| tay    | complain  | calibrate | 1.5      |
| tay    | complain  | clean     | 0.5      |
</code></pre></div>

  <ul>
    <li>A <a href="#g:join">join</a> combines information from two tables</li>
    <li><a href="#g:full_outer_join">full outer join</a> (also called <a href="#g:cross_join">cross join</a>) constructs their cross product
      <ul>
        <li>All combinations of rows from each</li>
      </ul>
    </li>
    <li>Result isn’t particularly useful: <code>job</code> and <code>name</code> don’t match</li>
  </ul>

</section>
<section>

  <h2 id="inner-join">32: inner join</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/inner_join.sql">src/inner_join.sql</a></p>
  <div><pre><code><span>select</span> <span>*</span>
<span>from</span> <span>work</span> <span>inner</span> <span>join</span> <span>job</span>
<span>on</span> <span>work</span><span>.</span><span>job</span> <span>=</span> <span>job</span><span>.</span><span>name</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/inner_join.out">out/inner_join.out</a></p>
  <div><pre><code>| person |    job    |   name    | billable |
|--------|-----------|-----------|----------|
| mik    | calibrate | calibrate | 1.5      |
| mik    | clean     | clean     | 0.5      |
| po     | clean     | clean     | 0.5      |
</code></pre></div>

  <ul>
    <li>Use <code><em>table</em>.<em>column</em></code> notation to specify columns
      <ul>
        <li>A column can have the same name as a table</li>
      </ul>
    </li>
    <li>Use <code>on <em>condition</em></code> to specify <a href="#g:join_condition">join condition</a></li>
    <li>Since <code>complain</code> doesn’t appear in <code>job.name</code>, none of those rows are kept</li>
  </ul>

</section>
<section>

  <h2 id="aggregate-joined-data">33: aggregate joined data</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/aggregate_join.sql">src/aggregate_join.sql</a></p>
  <div><pre><code><span>select</span>
    <span>work</span><span>.</span><span>person</span><span>,</span>
    <span>sum</span><span>(</span><span>job</span><span>.</span><span>billable</span><span>)</span> <span>as</span> <span>pay</span>
<span>from</span> <span>work</span> <span>inner</span> <span>join</span> <span>job</span>
<span>on</span> <span>work</span><span>.</span><span>job</span> <span>=</span> <span>job</span><span>.</span><span>name</span>
<span>group</span> <span>by</span> <span>work</span><span>.</span><span>person</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/aggregate_join.out">out/aggregate_join.out</a></p>
  <div><pre><code>| person | pay |
|--------|-----|
| mik    | 2.0 |
| po     | 0.5 |
</code></pre></div>

  <ul>
    <li>Combines ideas we’ve seen before</li>
    <li>But Tay is missing from the table</li>
  </ul>

</section>
<section>

  <h2 id="left-join">34: left join</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/left_join.sql">src/left_join.sql</a></p>
  <div><pre><code><span>select</span> <span>*</span>
<span>from</span> <span>work</span> <span>left</span> <span>join</span> <span>job</span>
<span>on</span> <span>work</span><span>.</span><span>job</span> <span>=</span> <span>job</span><span>.</span><span>name</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/left_join.out">out/left_join.out</a></p>
  <div><pre><code>| person |    job    |   name    | billable |
|--------|-----------|-----------|----------|
| mik    | calibrate | calibrate | 1.5      |
| mik    | clean     | clean     | 0.5      |
| mik    | complain  |           |          |
| po     | clean     | clean     | 0.5      |
| po     | complain  |           |          |
| tay    | complain  |           |          |
</code></pre></div>

  <ul>
    <li>A <a href="#g:left_outer_join">left outer join</a> keeps all rows from the left table</li>
    <li>Fills missing values from right table with null</li>
  </ul>

</section>
<section>

  <h2 id="aggregate-left-joins">35: aggregate left joins</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/aggregate_left_join.sql">src/aggregate_left_join.sql</a></p>
  <div><pre><code><span>select</span>
    <span>work</span><span>.</span><span>person</span><span>,</span>
    <span>sum</span><span>(</span><span>job</span><span>.</span><span>billable</span><span>)</span> <span>as</span> <span>pay</span>
<span>from</span> <span>work</span> <span>left</span> <span>join</span> <span>job</span>
<span>on</span> <span>work</span><span>.</span><span>job</span> <span>=</span> <span>job</span><span>.</span><span>name</span>
<span>group</span> <span>by</span> <span>work</span><span>.</span><span>person</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/aggregate_left_join.out">out/aggregate_left_join.out</a></p>
  <div><pre><code>| person | pay |
|--------|-----|
| mik    | 2.0 |
| po     | 0.5 |
| tay    |     |
</code></pre></div>

  <ul>
    <li>That’s better, but we’d like to see 0 rather than a blank</li>
  </ul>

</section>
<section>

  <h2 id="check-your-understanding-4">☆ check your understanding</h2>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/concept_map_join.svg" alt="concept map: join"></p>

</section>
<section>

  <h2 id="coalesce-values">36: coalesce values</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/coalesce.sql">src/coalesce.sql</a></p>
  <div><pre><code><span>select</span>
    <span>work</span><span>.</span><span>person</span><span>,</span>
    <span>coalesce</span><span>(</span><span>sum</span><span>(</span><span>job</span><span>.</span><span>billable</span><span>),</span> <span>0</span><span>.</span><span>0</span><span>)</span> <span>as</span> <span>pay</span>
<span>from</span> <span>work</span> <span>left</span> <span>join</span> <span>job</span>
<span>on</span> <span>work</span><span>.</span><span>job</span> <span>=</span> <span>job</span><span>.</span><span>name</span>
<span>group</span> <span>by</span> <span>work</span><span>.</span><span>person</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/coalesce.out">out/coalesce.out</a></p>
  <div><pre><code>| person | pay |
|--------|-----|
| mik    | 2.0 |
| po     | 0.5 |
| tay    | 0.0 |
</code></pre></div>

  <ul>
    <li><code>coalesce(<em>val1</em>, <em>val2</em>, …)</code> returns first non-null value</li>
  </ul>

</section>
<section>

  <h2 id="negate-incorrectly">37: negate incorrectly</h2>

  <ul>
    <li>Who doesn’t calibrate?</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/negate_incorrectly.sql">src/negate_incorrectly.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span> <span>person</span>
<span>from</span> <span>work</span>
<span>where</span> <span>job</span> <span>!=</span> <span>'calibrate'</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/negate_incorrectly.out">out/negate_incorrectly.out</a></p>
  <div><pre><code>| person |
|--------|
| mik    |
| po     |
| tay    |
</code></pre></div>

  <ul>
    <li>But Mik <em>does</em> calibrate</li>
    <li>Problem is that there’s an entry for Mik cleaning</li>
    <li>And since <code>'clean' != 'calibrate'</code>, that row is included in the results</li>
    <li>We need a different approach</li>
  </ul>

</section>
<section>

  <h2 id="set-membership">38: set membership</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/set_membership.sql">src/set_membership.sql</a></p>
  <div><pre><code><span>select</span> <span>*</span>
<span>from</span> <span>work</span>
<span>where</span> <span>person</span> <span>not</span> <span>in</span> <span>(</span><span>'mik'</span><span>,</span> <span>'tay'</span><span>);</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/set_membership.out">out/set_membership.out</a></p>
  <div><pre><code>| person |   job    |
|--------|----------|
| po     | clean    |
| po     | complain |
</code></pre></div>

  <ul>
    <li><code>in <em>values</em></code> and <code>not in <em>values</em></code> do exactly what you expect</li>
  </ul>

</section>
<section>

  <h2 id="subqueries">39: subqueries</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/subquery_set.sql">src/subquery_set.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span> <span>person</span>
<span>from</span> <span>work</span>
<span>where</span> <span>person</span> <span>not</span> <span>in</span> <span>(</span>
    <span>select</span> <span>distinct</span> <span>person</span>
    <span>from</span> <span>work</span>
    <span>where</span> <span>job</span> <span>=</span> <span>'calibrate'</span>
<span>);</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/subquery_set.out">out/subquery_set.out</a></p>
  <div><pre><code>| person |
|--------|
| po     |
| tay    |
</code></pre></div>

  <ul>
    <li>Use a <a href="#g:subquery">subquery</a> to select the people who <em>do</em> calibrate</li>
    <li>Then select all the people who aren’t in that set</li>
    <li>Initially feels odd, but subqueries are useful in other ways</li>
  </ul>

</section>
<section>

  <h2 id="m-to-n-relationships">☆ M to N relationships</h2>

  <ul>
    <li>Relationships between entities are usually characterized as:
      <ul>
        <li><a href="#g:1_to_1">1-to-1</a>:
fields in the same record</li>
        <li><a href="#g:1_to_many">1-to-many</a>:
the many have a <a href="#g:foreign_key">foreign key</a> referring to the one’s primary key</li>
        <li><a href="#g:many_to_many">many-to-many</a>:
don’t know how many keys to add to records (“maximum” never is)</li>
      </ul>
    </li>
    <li>Nearly-universal solution is a <a href="#g:join_table">join table</a>
      <ul>
        <li>Each record is a pair of foreign keys</li>
        <li>I.e., each record is the fact that records A and B are related</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="autoincrement-and-primary-key">40: autoincrement and primary key</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/autoincrement.sql">src/autoincrement.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>person</span> <span>(</span>
    <span>ident</span> <span>integer</span> <span>primary</span> <span>key</span> <span>autoincrement</span><span>,</span>
    <span>name</span> <span>text</span> <span>not</span> <span>null</span>
<span>);</span>
<span>insert</span> <span>into</span> <span>person</span> <span>values</span>
    <span>(</span><span>null</span><span>,</span> <span>'mik'</span><span>),</span>
    <span>(</span><span>null</span><span>,</span> <span>'po'</span><span>),</span>
    <span>(</span><span>null</span><span>,</span> <span>'tay'</span><span>);</span>
<span>select</span> <span>*</span> <span>from</span> <span>person</span><span>;</span>
<span>insert</span> <span>into</span> <span>person</span> <span>values</span> <span>(</span><span>1</span><span>,</span> <span>"prevented"</span><span>);</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/autoincrement.out">out/autoincrement.out</a></p>
  <div><pre><code>| ident | name |
|-------|------|
| 1     | mik  |
| 2     | po   |
| 3     | tay  |
Runtime error near line 12: UNIQUE constraint failed: person.ident (19)
</code></pre></div>

  <ul>
    <li>Database <a href="#g:autoincrement">autoincrements</a> <code>ident</code> each time a new record is added</li>
    <li>Use that field as the primary key
      <ul>
        <li>So that if Mik changes their name again,
we only have to change one fact in the database</li>
        <li>Downside: manual queries are harder to read (who is person 17?)</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="internal-tables">☆ internal tables</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/sequence_table.sql">src/sequence_table.sql</a></p>
  <div><pre><code><span>select</span> <span>*</span> <span>from</span> <span>sqlite_sequence</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/sequence_table.out">out/sequence_table.out</a></p>
  <div><pre><code>|  name  | seq |
|--------|-----|
| person | 3   |
</code></pre></div>

  <ul>
    <li>Sequence numbers are <em>not</em> reset when rows are deleted</li>
  </ul>

</section>
<section>

  <h2 id="alter-tables">41: alter tables</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/alter_tables.sql">src/alter_tables.sql</a></p>
  <div><pre><code><span>alter</span> <span>table</span> <span>job</span>
<span>add</span> <span>ident</span> <span>integer</span> <span>not</span> <span>null</span> <span>default</span> <span>-</span><span>1</span><span>;</span>

<span>update</span> <span>job</span>
<span>set</span> <span>ident</span> <span>=</span> <span>1</span>
<span>where</span> <span>name</span> <span>=</span> <span>'calibrate'</span><span>;</span>

<span>update</span> <span>job</span>
<span>set</span> <span>ident</span> <span>=</span> <span>2</span>
<span>where</span> <span>name</span> <span>=</span> <span>'clean'</span><span>;</span>

<span>select</span> <span>*</span> <span>from</span> <span>job</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/alter_tables.out">out/alter_tables.out</a></p>
  <div><pre><code>|   name    | billable | ident |
|-----------|----------|-------|
| calibrate | 1.5      | 1     |
| clean     | 0.5      | 2     |
</code></pre></div>

  <ul>
    <li>Add a column after the fact</li>
    <li>Since it can’t be null, we have to provide a default value
      <ul>
        <li>Really want to make it the primary key, but SQLite doesn’t allow that (easily) after the fact</li>
      </ul>
    </li>
    <li>Then use <code>update</code> to modify existing records
      <ul>
        <li>Can modify any number of records at once</li>
        <li>So be careful about <code>where</code> clause</li>
      </ul>
    </li>
    <li><a href="#g:data_migration">Data migration</a></li>
  </ul>

</section>
<section>

  <h2 id="create-new-tables-from-old">42: create new tables from old</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/insert_select.sql">src/insert_select.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>new_work</span> <span>(</span>
    <span>person_id</span> <span>integer</span> <span>not</span> <span>null</span><span>,</span>
    <span>job_id</span> <span>integer</span> <span>not</span> <span>null</span><span>,</span>
    <span>foreign</span> <span>key</span><span>(</span><span>person_id</span><span>)</span> <span>references</span> <span>person</span><span>(</span><span>ident</span><span>),</span>
    <span>foreign</span> <span>key</span><span>(</span><span>job_id</span><span>)</span> <span>references</span> <span>job</span><span>(</span><span>ident</span><span>)</span>
<span>);</span>

<span>insert</span> <span>into</span> <span>new_work</span>
<span>select</span>
    <span>person</span><span>.</span><span>ident</span> <span>as</span> <span>person_id</span><span>,</span>
    <span>job</span><span>.</span><span>ident</span> <span>as</span> <span>job_id</span>
<span>from</span>
    <span>(</span><span>person</span> <span>join</span> <span>work</span> <span>on</span> <span>person</span><span>.</span><span>name</span> <span>=</span> <span>work</span><span>.</span><span>person</span><span>)</span>
    <span>join</span> <span>job</span> <span>on</span> <span>job</span><span>.</span><span>name</span> <span>=</span> <span>work</span><span>.</span><span>job</span><span>;</span>
<span>select</span> <span>*</span> <span>from</span> <span>new_work</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/insert_select.out">out/insert_select.out</a></p>
  <div><pre><code>| person_id | job_id |
|-----------|--------|
| 1         | 1      |
| 1         | 2      |
| 2         | 2      |
</code></pre></div>

  <ul>
    <li><code>new_work</code> is our join table</li>
    <li>Each column refers to a record in some other table</li>
  </ul>

</section>
<section>

  <h2 id="remove-tables">43: remove tables</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/drop_table.sql">src/drop_table.sql</a></p>
  <div><pre><code><span>drop</span> <span>table</span> <span>work</span><span>;</span>
<span>alter</span> <span>table</span> <span>new_work</span> <span>rename</span> <span>to</span> <span>work</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/drop_table.out">out/drop_table.out</a></p>
  <div><pre><code>CREATE TABLE job (
    ident integer primary key autoincrement,
    name text not null,
    billable real not null
);
CREATE TABLE sqlite_sequence(name,seq);
CREATE TABLE person (
    ident integer primary key autoincrement,
    name text not null
);
CREATE TABLE IF NOT EXISTS "work" (
    person_id integer not null,
    job_id integer not null,
    foreign key(person_id) references person(ident),
    foreign key(job_id) references job(ident)
);
</code></pre></div>

  <ul>
    <li>Remove the old table and rename the new one to take its place
      <ul>
        <li>Note <code>if exists</code></li>
      </ul>
    </li>
    <li>Be careful…</li>
  </ul>

</section>
<section>

  <h2 id="compare-individual-values-to-aggregates">44: compare individual values to aggregates</h2>

  <ul>
    <li>Go back to penguins</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/compare_individual_aggregate.sql">src/compare_individual_aggregate.sql</a></p>
  <div><pre><code><span>select</span> <span>body_mass_g</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>body_mass_g</span> <span>&gt;</span> <span>(</span>
    <span>select</span> <span>avg</span><span>(</span><span>body_mass_g</span><span>)</span>
    <span>from</span> <span>penguins</span>
<span>)</span>
<span>limit</span> <span>5</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/compare_individual_aggregate.out">out/compare_individual_aggregate.out</a></p>
  <div><pre><code>| body_mass_g |
|-------------|
| 4675        |
| 4250        |
| 4400        |
| 4500        |
| 4650        |
</code></pre></div>

  <ul>
    <li>Get average body mass in subquery</li>
    <li>Compare each row against that</li>
    <li>Requires two scans of the data, but there’s no way to avoid that</li>
    <li>Null values aren’t included in the average or in the final results</li>
  </ul>

</section>
<section>

  <h2 id="compare-individual-values-to-aggregates-within-groups">45: compare individual values to aggregates within groups</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/compare_within_groups.sql">src/compare_within_groups.sql</a></p>
  <div><pre><code><span>select</span>
    <span>penguins</span><span>.</span><span>species</span><span>,</span>
    <span>penguins</span><span>.</span><span>body_mass_g</span><span>,</span>
    <span>round</span><span>(</span><span>averaged</span><span>.</span><span>avg_mass_g</span><span>,</span> <span>1</span><span>)</span> <span>as</span> <span>avg_mass_g</span>
<span>from</span> <span>penguins</span> <span>join</span> <span>(</span>
    <span>select</span> <span>species</span><span>,</span> <span>avg</span><span>(</span><span>body_mass_g</span><span>)</span> <span>as</span> <span>avg_mass_g</span>
    <span>from</span> <span>penguins</span>
    <span>group</span> <span>by</span> <span>species</span>
<span>)</span> <span>as</span> <span>averaged</span>
<span>on</span> <span>penguins</span><span>.</span><span>species</span> <span>=</span> <span>averaged</span><span>.</span><span>species</span>
<span>where</span> <span>penguins</span><span>.</span><span>body_mass_g</span> <span>&gt;</span> <span>averaged</span><span>.</span><span>avg_mass_g</span>
<span>limit</span> <span>5</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/compare_within_groups.out">out/compare_within_groups.out</a></p>
  <div><pre><code>| species | body_mass_g | avg_mass_g |
|---------|-------------|------------|
| Adelie  | 3750        | 3700.7     |
| Adelie  | 3800        | 3700.7     |
| Adelie  | 4675        | 3700.7     |
| Adelie  | 4250        | 3700.7     |
| Adelie  | 3800        | 3700.7     |
</code></pre></div>

  <ul>
    <li>Subquery runs first to create temporary table <code>averaged</code> with average mass per species</li>
    <li>Join that with <code>penguins</code></li>
    <li>Filter to find penguins heavier than average within their species</li>
  </ul>

</section>
<section>

  <h2 id="common-table-expressions">46: common table expressions</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/common_table_expressions.sql">src/common_table_expressions.sql</a></p>
  <div><pre><code><span>with</span> <span>grouped</span> <span>as</span> <span>(</span>
    <span>select</span> <span>species</span><span>,</span> <span>avg</span><span>(</span><span>body_mass_g</span><span>)</span> <span>as</span> <span>avg_mass_g</span>
    <span>from</span> <span>penguins</span>
    <span>group</span> <span>by</span> <span>species</span>
<span>)</span>
<span>select</span>
    <span>penguins</span><span>.</span><span>species</span><span>,</span>
    <span>penguins</span><span>.</span><span>body_mass_g</span><span>,</span>
    <span>round</span><span>(</span><span>grouped</span><span>.</span><span>avg_mass_g</span><span>,</span> <span>1</span><span>)</span> <span>as</span> <span>avg_mass_g</span>
<span>from</span> <span>penguins</span> <span>join</span> <span>grouped</span>
<span>where</span> <span>penguins</span><span>.</span><span>body_mass_g</span> <span>&gt;</span> <span>grouped</span><span>.</span><span>avg_mass_g</span>
<span>limit</span> <span>5</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/common_table_expressions.out">out/common_table_expressions.out</a></p>
  <div><pre><code>| species | body_mass_g | avg_mass_g |
|---------|-------------|------------|
| Adelie  | 3750        | 3700.7     |
| Adelie  | 3800        | 3700.7     |
| Adelie  | 4675        | 3700.7     |
| Adelie  | 4250        | 3700.7     |
| Adelie  | 3800        | 3700.7     |
</code></pre></div>

  <ul>
    <li>Use <a href="#g:cte">common table expression</a> (CTE) to make queries clearer
      <ul>
        <li>Nested subqueries quickly become difficult to understand</li>
      </ul>
    </li>
    <li>Database decides how to optimize</li>
  </ul>

</section>
<section>

  <h2 id="explain-query-plan">☆ explain query plan</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/explain_query_plan.sql">src/explain_query_plan.sql</a></p>
  <div><pre><code><span>explain</span> <span>query</span> <span>plan</span>
<span>select</span>
    <span>species</span><span>,</span>
    <span>avg</span><span>(</span><span>body_mass_g</span><span>)</span>
<span>from</span> <span>penguins</span>
<span>group</span> <span>by</span> <span>species</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/explain_query_plan.out">out/explain_query_plan.out</a></p>
  <div><pre><code>QUERY PLAN
|--SCAN penguins
`--USE TEMP B-TREE FOR GROUP BY
</code></pre></div>

  <ul>
    <li>SQLite plans to scan every row of the table</li>
    <li>It will build a temporary B-tree data structure to group rows</li>
  </ul>

</section>
<section>

  <h2 id="enumerate-rows">47: enumerate rows</h2>

  <ul>
    <li>Every table has a special column called <code>rowid</code></li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/rowid.sql">src/rowid.sql</a></p>
  <div><pre><code><span>select</span> <span>rowid</span><span>,</span> <span>species</span><span>,</span> <span>island</span>
<span>from</span> <span>penguins</span>
<span>limit</span> <span>5</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/rowid.out">out/rowid.out</a></p>
  <div><pre><code>| rowid | species |  island   |
|-------|---------|-----------|
| 1     | Adelie  | Torgersen |
| 2     | Adelie  | Torgersen |
| 3     | Adelie  | Torgersen |
| 4     | Adelie  | Torgersen |
| 5     | Adelie  | Torgersen |
</code></pre></div>

  <ul>
    <li><code>rowid</code> is persistent within a session
      <ul>
        <li>I.e., if we delete the first 5 rows we now have row IDs 6…N</li>
      </ul>
    </li>
    <li><em>Do not rely on row ID</em>
      <ul>
        <li>In particular, do not use it as a key</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="if-else-function">48: if-else function</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/if_else.sql">src/if_else.sql</a></p>
  <div><pre><code><span>with</span> <span>sized_penguins</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>species</span><span>,</span>
        <span>iif</span><span>(</span>
            <span>body_mass_g</span> <span>&lt;</span> <span>3500</span><span>,</span>
            <span>'small'</span><span>,</span>
            <span>'large'</span>
        <span>)</span> <span>as</span> <span>size</span>
    <span>from</span> <span>penguins</span>
<span>)</span>
<span>select</span> <span>species</span><span>,</span> <span>size</span><span>,</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
<span>from</span> <span>sized_penguins</span>
<span>group</span> <span>by</span> <span>species</span><span>,</span> <span>size</span>
<span>order</span> <span>by</span> <span>species</span><span>,</span> <span>num</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/if_else.out">out/if_else.out</a></p>
  <div><pre><code>|  species  | size  | num |
|-----------|-------|-----|
| Adelie    | small | 54  |
| Adelie    | large | 98  |
| Chinstrap | small | 17  |
| Chinstrap | large | 51  |
| Gentoo    | large | 124 |
</code></pre></div>

  <ul>
    <li><code>iif(<em>condition</em>, <em>true_result</em>, <em>false_result</em>)</code>
      <ul>
        <li>Note: <code>iif</code> with two i’s</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="select-a-case">49: select a case</h2>

  <ul>
    <li>What if we want small, medium, and large?</li>
    <li>Can nest <code>iif</code>, but quickly becomes unreadable</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/case_when.sql">src/case_when.sql</a></p>
  <div><pre><code><span>with</span> <span>sized_penguins</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>species</span><span>,</span>
        <span>case</span>
            <span>when</span> <span>body_mass_g</span> <span>&lt;</span> <span>3500</span> <span>then</span> <span>'small'</span>
            <span>when</span> <span>body_mass_g</span> <span>&lt;</span> <span>5000</span> <span>then</span> <span>'medium'</span>
            <span>else</span> <span>'large'</span>
        <span>end</span> <span>as</span> <span>size</span>
    <span>from</span> <span>penguins</span>
<span>)</span>
<span>select</span> <span>species</span><span>,</span> <span>size</span><span>,</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
<span>from</span> <span>sized_penguins</span>
<span>group</span> <span>by</span> <span>species</span><span>,</span> <span>size</span>
<span>order</span> <span>by</span> <span>species</span><span>,</span> <span>num</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/case_when.out">out/case_when.out</a></p>
  <div><pre><code>|  species  |  size  | num |
|-----------|--------|-----|
| Adelie    | large  | 1   |
| Adelie    | small  | 54  |
| Adelie    | medium | 97  |
| Chinstrap | small  | 17  |
| Chinstrap | medium | 51  |
| Gentoo    | medium | 56  |
| Gentoo    | large  | 68  |
</code></pre></div>

  <ul>
    <li>Evaluate <code>when</code> options in order and take first</li>
    <li>Result of <code>case</code> is null if no condition is true</li>
    <li>Use <code>else</code> as fallback</li>
  </ul>

</section>
<section>

  <h2 id="check-range">50: check range</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/check_range.sql">src/check_range.sql</a></p>
  <div><pre><code><span>with</span> <span>sized_penguins</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>species</span><span>,</span>
        <span>case</span>
            <span>when</span> <span>body_mass_g</span> <span>between</span> <span>3500</span> <span>and</span> <span>5000</span> <span>then</span> <span>'normal'</span>
            <span>else</span> <span>'abnormal'</span>
        <span>end</span> <span>as</span> <span>size</span>
    <span>from</span> <span>penguins</span>
<span>)</span>
<span>select</span> <span>species</span><span>,</span> <span>size</span><span>,</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
<span>from</span> <span>sized_penguins</span>
<span>group</span> <span>by</span> <span>species</span><span>,</span> <span>size</span>
<span>order</span> <span>by</span> <span>species</span><span>,</span> <span>num</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/check_range.out">out/check_range.out</a></p>
  <div><pre><code>|  species  |   size   | num |
|-----------|----------|-----|
| Adelie    | abnormal | 55  |
| Adelie    | normal   | 97  |
| Chinstrap | abnormal | 17  |
| Chinstrap | normal   | 51  |
| Gentoo    | abnormal | 62  |
| Gentoo    | normal   | 62  |
</code></pre></div>

  <ul>
    <li><code>between</code> can make queries easier to read</li>
    <li>But be careful of the <code>and</code> in the middle</li>
  </ul>

</section>
<section>

  <h2 id="yet-another-database">☆ yet another database</h2>

  <ul>
    <li><a href="#g:er_diagram">Entity-relationship diagram</a> (ER diagram) shows relationships between tables</li>
    <li>Like everything to do with databases, there are lots of variations</li>
  </ul>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/assays_tables.svg" alt="assay database table diagram"></p>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/assays_er.svg" alt="assay ER diagram"></p>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/assay_staff.sql">src/assay_staff.sql</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/assay_staff.out">out/assay_staff.out</a></p>
  <div><pre><code>| ident | personal |  family   | dept | age |
|-------|----------|-----------|------|-----|
| 1     | Kartik   | Gupta     |      | 46  |
| 2     | Divit    | Dhaliwal  | hist | 34  |
| 3     | Indrans  | Sridhar   | mb   | 47  |
| 4     | Pranay   | Khanna    | mb   | 51  |
| 5     | Riaan    | Dua       |      | 23  |
| 6     | Vedika   | Rout      | hist | 45  |
| 7     | Abram    | Chokshi   | gen  | 23  |
| 8     | Romil    | Kapoor    | hist | 38  |
| 9     | Ishaan   | Ramaswamy | mb   | 35  |
| 10    | Nitya    | Lal       | gen  | 52  |
</code></pre></div>

</section>
<section>

  <h2 id="pattern-matching">51: pattern matching</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/like_glob.sql">src/like_glob.sql</a></p>
  <div><pre><code><span>select</span> <span>personal</span><span>,</span> <span>family</span> <span>from</span> <span>staff</span>
<span>where</span> <span>personal</span> <span>like</span> <span>'%ya%'</span> <span>or</span> <span>family</span> <span>glob</span> <span>'*De*'</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/like_glob.out">out/like_glob.out</a></p>
  <div><pre><code>| personal | family |
|----------|--------|
| Nitya    | Lal    |
</code></pre></div>

  <ul>
    <li><code>like</code> is the original SQL pattern matcher
      <ul>
        <li><code>%</code> matches zero or more characters at the start or end of a string</li>
        <li>Case insensitive by default</li>
      </ul>
    </li>
    <li><code>glob</code> supports Unix-style wildcards</li>
  </ul>

  <table>
    <thead>
      <tr>
        <th>name</th>
        <th>purpose</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>substr</code></td>
        <td>Get substring given starting point and length</td>
      </tr>
      <tr>
        <td><code>trim</code></td>
        <td>Remove characters from beginning and end of string</td>
      </tr>
      <tr>
        <td><code>ltrim</code></td>
        <td>Remove characters from beginning of string</td>
      </tr>
      <tr>
        <td><code>rtrim</code></td>
        <td>Remove characters from end of string</td>
      </tr>
      <tr>
        <td><code>length</code></td>
        <td>Length of string</td>
      </tr>
      <tr>
        <td><code>replace</code></td>
        <td>Replace occurrences of substring with another string</td>
      </tr>
      <tr>
        <td><code>upper</code></td>
        <td>Return upper-case version of string</td>
      </tr>
      <tr>
        <td><code>lower</code></td>
        <td>Return lower-case version of string</td>
      </tr>
      <tr>
        <td><code>instr</code></td>
        <td>Find location of first occurrence of substring (returns 0 if not found)</td>
      </tr>
    </tbody>
  </table>

</section>
<section>

  <h2 id="select-first-and-last-rows">52: select first and last rows</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/union_all.sql">src/union_all.sql</a></p>
  <div><pre><code><span>select</span> <span>*</span> <span>from</span> <span>(</span>
    <span>select</span> <span>*</span> <span>from</span> <span>(</span><span>select</span> <span>*</span> <span>from</span> <span>experiment</span> <span>order</span> <span>by</span> <span>started</span> <span>asc</span> <span>limit</span> <span>5</span><span>)</span>
    <span>union</span> <span>all</span>
    <span>select</span> <span>*</span> <span>from</span> <span>(</span><span>select</span> <span>*</span> <span>from</span> <span>experiment</span> <span>order</span> <span>by</span> <span>started</span> <span>desc</span> <span>limit</span> <span>5</span><span>)</span>
<span>)</span>
<span>order</span> <span>by</span> <span>started</span> <span>asc</span>
<span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/union_all.out">out/union_all.out</a></p>
  <div><pre><code>| ident |    kind     |  started   |   ended    |
|-------|-------------|------------|------------|
| 17    | trial       | 2023-01-29 | 2023-01-30 |
| 35    | calibration | 2023-01-30 | 2023-01-30 |
| 36    | trial       | 2023-02-02 | 2023-02-03 |
| 25    | trial       | 2023-02-12 | 2023-02-14 |
| 2     | calibration | 2023-02-14 | 2023-02-14 |
| 40    | calibration | 2024-01-21 | 2024-01-21 |
| 12    | trial       | 2024-01-26 | 2024-01-28 |
| 44    | trial       | 2024-01-27 | 2024-01-29 |
| 34    | trial       | 2024-02-01 | 2024-02-02 |
| 14    | calibration | 2024-02-03 | 2024-02-03 |
</code></pre></div>

  <ul>
    <li><code>union all</code> combines records
      <ul>
        <li>Keeps duplicates: <code>union</code> on its own keeps unique records</li>
      </ul>
    </li>
    <li>Yes, it feels like the extra <code>select * from</code> should be unnecessary</li>
  </ul>

</section>
<section>

  <h2 id="intersection">53: intersection</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/intersect.sql">src/intersect.sql</a></p>
  <div><pre><code><span>select</span> <span>personal</span><span>,</span> <span>family</span><span>,</span> <span>dept</span><span>,</span> <span>age</span>
<span>from</span> <span>staff</span>
<span>where</span> <span>dept</span> <span>=</span> <span>'mb'</span>
<span>intersect</span>
    <span>select</span> <span>personal</span><span>,</span> <span>family</span><span>,</span> <span>dept</span><span>,</span> <span>age</span> <span>from</span> <span>staff</span>
    <span>where</span> <span>age</span> <span>&lt;</span> <span>50</span>
<span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/intersect.out">out/intersect.out</a></p>
  <div><pre><code>| personal |  family   | dept | age |
|----------|-----------|------|-----|
| Indrans  | Sridhar   | mb   | 47  |
| Ishaan   | Ramaswamy | mb   | 35  |
</code></pre></div>

  <ul>
    <li>Tables being intersected must have same structure</li>
    <li>Intersection usually used when pulling values from different tables
      <ul>
        <li>In this case, would be clearer to use <code>where</code></li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="exclusion">54: exclusion</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/except.sql">src/except.sql</a></p>
  <div><pre><code><span>select</span> <span>personal</span><span>,</span> <span>family</span><span>,</span> <span>dept</span><span>,</span> <span>age</span>
<span>from</span> <span>staff</span>
<span>where</span> <span>dept</span> <span>=</span> <span>'mb'</span>
<span>except</span>
    <span>select</span> <span>personal</span><span>,</span> <span>family</span><span>,</span> <span>dept</span><span>,</span> <span>age</span> <span>from</span> <span>staff</span>
    <span>where</span> <span>age</span> <span>&lt;</span> <span>50</span>
<span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/except.out">out/except.out</a></p>
  <div><pre><code>| personal | family | dept | age |
|----------|--------|------|-----|
| Pranay   | Khanna | mb   | 51  |
</code></pre></div>

  <ul>
    <li>Again, tables must have same structure
      <ul>
        <li>And this would be clearer with <code>where</code></li>
      </ul>
    </li>
    <li>SQL operates on sets, not tables, except where it doesn’t</li>
  </ul>

</section>
<section>

  <h2 id="random-numbers-and-why-not">55: random numbers and why not</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/random_numbers.sql">src/random_numbers.sql</a></p>
  <div><pre><code><span>with</span> <span>decorated</span> <span>as</span> <span>(</span>
    <span>select</span> <span>random</span><span>()</span> <span>as</span> <span>rand</span><span>,</span>
    <span>personal</span> <span>||</span> <span>' '</span> <span>||</span> <span>family</span> <span>as</span> <span>name</span>
    <span>from</span> <span>staff</span>
<span>)</span>
<span>select</span> <span>rand</span><span>,</span> <span>abs</span><span>(</span><span>rand</span><span>)</span> <span>%</span> <span>10</span> <span>as</span> <span>selector</span><span>,</span> <span>name</span>
<span>from</span> <span>decorated</span>
<span>where</span> <span>selector</span> <span>&lt;</span> <span>5</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/random_numbers.out">out/random_numbers.out</a></p>
  <div><pre><code>|         rand         | selector |      name       |
|----------------------|----------|-----------------|
| 7176652035743196310  | 0        | Divit Dhaliwal  |
| -2243654635505630380 | 2        | Indrans Sridhar |
| -6940074802089166303 | 5        | Pranay Khanna   |
| 8882650891091088193  | 9        | Riaan Dua       |
| -45079732302991538   | 5        | Vedika Rout     |
| -8973877087806386134 | 2        | Abram Chokshi   |
| 3360598450426870356  | 9        | Romil Kapoor    |
</code></pre></div>

  <ul>
    <li>There is no way to seed SQLite’s random number generator</li>
    <li>Which means there is no way to reproduce one of its “random” sequences</li>
  </ul>

</section>
<section>

  <h2 id="creating-index">56: creating index</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/create_use_index.sql">src/create_use_index.sql</a></p>
  <div><pre><code><span>explain</span> <span>query</span> <span>plan</span>
<span>select</span> <span>filename</span>
<span>from</span> <span>plate</span>
<span>where</span> <span>filename</span> <span>like</span> <span>'%07%'</span><span>;</span>

<span>create</span> <span>index</span> <span>plate_file</span> <span>on</span> <span>plate</span><span>(</span><span>filename</span><span>);</span>

<span>explain</span> <span>query</span> <span>plan</span>
<span>select</span> <span>filename</span>
<span>from</span> <span>plate</span>
<span>where</span> <span>filename</span> <span>like</span> <span>'%07%'</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/create_use_index.out">out/create_use_index.out</a></p>
  <div><pre><code>QUERY PLAN
`--SCAN plate USING COVERING INDEX sqlite_autoindex_plate_1
QUERY PLAN
`--SCAN plate USING COVERING INDEX plate_file
</code></pre></div>

  <ul>
    <li>An <a href="#g:index">index</a> is an auxiliary data structure that enables faster access to records
      <ul>
        <li>Spend storage space to buy speed</li>
      </ul>
    </li>
    <li>Don’t have to mention it explicitly in queries
      <ul>
        <li>Database manager will use it automatically</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="generate-sequence">57: generate sequence</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/generate_sequence.sql">src/generate_sequence.sql</a></p>
  <div><pre><code><span>select</span> <span>value</span> <span>from</span> <span>generate_series</span><span>(</span><span>1</span><span>,</span> <span>5</span><span>);</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/generate_sequence.out">out/generate_sequence.out</a></p>
  <div><pre><code>| value |
|-------|
| 1     |
| 2     |
| 3     |
| 4     |
| 5     |
</code></pre></div>

  <ul>
    <li>A (non-standard) <a href="#g:table_valued_func">table-valued function</a></li>
  </ul>

</section>
<section>

  <h2 id="generate-sequence-based-on-data">58: generate sequence based on data</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/data_range_sequence.sql">src/data_range_sequence.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>temp</span> <span>(</span>
    <span>num</span> <span>integer</span> <span>not</span> <span>null</span>
<span>);</span>
<span>insert</span> <span>into</span> <span>temp</span> <span>values</span> <span>(</span><span>1</span><span>),</span> <span>(</span><span>5</span><span>);</span>
<span>select</span> <span>value</span> <span>from</span> <span>generate_series</span> <span>(</span>
    <span>(</span><span>select</span> <span>min</span><span>(</span><span>num</span><span>)</span> <span>from</span> <span>temp</span><span>),</span>
    <span>(</span><span>select</span> <span>max</span><span>(</span><span>num</span><span>)</span> <span>from</span> <span>temp</span><span>)</span>
<span>);</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/data_range_sequence.out">out/data_range_sequence.out</a></p>
  <div><pre><code>| value |
|-------|
| 1     |
| 2     |
| 3     |
| 4     |
| 5     |
</code></pre></div>

  <ul>
    <li>Must have the parentheses around the <code>min</code> and <code>max</code> selections to keep SQLite happy</li>
  </ul>

</section>
<section>

  <h2 id="generate-sequence-of-dates">59: generate sequence of dates</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/date_sequence.sql">src/date_sequence.sql</a></p>
  <div><pre><code><span>select</span>
    <span>date</span><span>((</span><span>select</span> <span>julianday</span><span>(</span><span>min</span><span>(</span><span>started</span><span>))</span> <span>from</span> <span>experiment</span><span>)</span> <span>+</span> <span>value</span><span>)</span> <span>as</span> <span>some_day</span>
<span>from</span> <span>(</span>
    <span>select</span> <span>value</span> <span>from</span> <span>generate_series</span><span>(</span>
        <span>(</span><span>select</span> <span>0</span><span>),</span>
        <span>(</span><span>select</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>-</span> <span>1</span> <span>from</span> <span>experiment</span><span>)</span>
    <span>)</span>
<span>)</span>
<span>limit</span> <span>5</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/date_sequence.out">out/date_sequence.out</a></p>
  <div><pre><code>|  some_day  |
|------------|
| 2023-01-29 |
| 2023-01-30 |
| 2023-01-31 |
| 2023-02-01 |
| 2023-02-02 |
</code></pre></div>

  <ul>
    <li>SQLite represents dates as YYYY-MM-DD strings
or as Julian days or as Unix milliseconds or…
      <ul>
        <li>Julian days is fractional number of days since November 24, 4714 BCE</li>
      </ul>
    </li>
    <li><code>julianday</code> and <code>date</code> convert back and forth</li>
  </ul>

</section>
<section>

  <h2 id="count-experiments-started-per-day-without-gaps">60: count experiments started per day without gaps</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/experiments_per_day.sql">src/experiments_per_day.sql</a></p>
  <div><pre><code><span>with</span>
<span>-- complete sequence of days with 0 as placeholder for number of experiments</span>
<span>all_days</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>date</span><span>((</span><span>select</span> <span>julianday</span><span>(</span><span>min</span><span>(</span><span>started</span><span>))</span> <span>from</span> <span>experiment</span><span>)</span> <span>+</span> <span>value</span><span>)</span> <span>as</span> <span>some_day</span><span>,</span>
        <span>0</span> <span>as</span> <span>zeroes</span>
    <span>from</span> <span>(</span>
        <span>select</span> <span>value</span> <span>from</span> <span>generate_series</span><span>(</span>
            <span>(</span><span>select</span> <span>0</span><span>),</span>
            <span>(</span><span>select</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>-</span> <span>1</span> <span>from</span> <span>experiment</span><span>)</span>
        <span>)</span>
    <span>)</span>
<span>),</span>
<span>-- sequence of actual days with actual number of experiments started</span>
<span>actual_days</span> <span>as</span> <span>(</span>
    <span>select</span> <span>started</span><span>,</span> <span>count</span><span>(</span><span>started</span><span>)</span> <span>as</span> <span>num_exp</span>
    <span>from</span> <span>experiment</span>
    <span>group</span> <span>by</span> <span>started</span>
<span>)</span>
<span>-- combined by joining on day and taking actual number (if available) or zero</span>
<span>select</span>
    <span>all_days</span><span>.</span><span>some_day</span> <span>as</span> <span>day</span><span>,</span>
    <span>coalesce</span><span>(</span><span>actual_days</span><span>.</span><span>num_exp</span><span>,</span> <span>all_days</span><span>.</span><span>zeroes</span><span>)</span> <span>as</span> <span>num_exp</span>
<span>from</span>
    <span>all_days</span> <span>left</span> <span>join</span> <span>actual_days</span> <span>on</span> <span>all_days</span><span>.</span><span>some_day</span> <span>=</span> <span>actual_days</span><span>.</span><span>started</span>
<span>limit</span> <span>5</span>
<span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/experiments_per_day.out">out/experiments_per_day.out</a></p>
  <div><pre><code>|    day     | num_exp |
|------------|---------|
| 2023-01-29 | 1       |
| 2023-01-30 | 1       |
| 2023-01-31 | 0       |
| 2023-02-01 | 0       |
| 2023-02-02 | 1       |
</code></pre></div>

</section>
<section>

  <h2 id="self-join">61: self join</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/self_join.sql">src/self_join.sql</a></p>
  <div><pre><code><span>with</span> <span>person</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>ident</span><span>,</span>
        <span>personal</span> <span>||</span> <span>' '</span> <span>||</span> <span>family</span> <span>as</span> <span>name</span>
    <span>from</span> <span>staff</span>
<span>)</span>
<span>select</span> <span>left</span><span>.</span><span>name</span><span>,</span> <span>right</span><span>.</span><span>name</span>
<span>from</span> <span>person</span> <span>as</span> <span>left</span> <span>join</span> <span>person</span> <span>as</span> <span>right</span>
<span>limit</span> <span>10</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/self_join.out">out/self_join.out</a></p>
  <div><pre><code>|     name     |       name       |
|--------------|------------------|
| Kartik Gupta | Kartik Gupta     |
| Kartik Gupta | Divit Dhaliwal   |
| Kartik Gupta | Indrans Sridhar  |
| Kartik Gupta | Pranay Khanna    |
| Kartik Gupta | Riaan Dua        |
| Kartik Gupta | Vedika Rout      |
| Kartik Gupta | Abram Chokshi    |
| Kartik Gupta | Romil Kapoor     |
| Kartik Gupta | Ishaan Ramaswamy |
| Kartik Gupta | Nitya Lal        |
</code></pre></div>

  <ul>
    <li>Join a table to itself
      <ul>
        <li>Use <code>as</code> to create <a href="#g:alias">aliases</a> for copies of tables to distinguish them</li>
        <li>Nothing special about the names <code>left</code> and <code>right</code></li>
      </ul>
    </li>
    <li>Get all <math>n</math><sup>2</sup> pairs, including person with themself</li>
  </ul>

</section>
<section>

  <h2 id="generate-unique-pairs">62: generate unique pairs</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/unique_pairs.sql">src/unique_pairs.sql</a></p>
  <div><pre><code><span>with</span> <span>person</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>ident</span><span>,</span>
        <span>personal</span> <span>||</span> <span>' '</span> <span>||</span> <span>family</span> <span>as</span> <span>name</span>
    <span>from</span> <span>staff</span>
<span>)</span>
<span>select</span> <span>left</span><span>.</span><span>name</span><span>,</span> <span>right</span><span>.</span><span>name</span>
<span>from</span> <span>person</span> <span>as</span> <span>left</span> <span>join</span> <span>person</span> <span>as</span> <span>right</span>
<span>on</span> <span>left</span><span>.</span><span>ident</span> <span>&lt;</span> <span>right</span><span>.</span><span>ident</span>
<span>where</span> <span>left</span><span>.</span><span>ident</span> <span>&lt;=</span> <span>4</span> <span>and</span> <span>right</span><span>.</span><span>ident</span> <span>&lt;=</span> <span>4</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/unique_pairs.out">out/unique_pairs.out</a></p>
  <div><pre><code>|      name       |      name       |
|-----------------|-----------------|
| Kartik Gupta    | Divit Dhaliwal  |
| Kartik Gupta    | Indrans Sridhar |
| Kartik Gupta    | Pranay Khanna   |
| Divit Dhaliwal  | Indrans Sridhar |
| Divit Dhaliwal  | Pranay Khanna   |
| Indrans Sridhar | Pranay Khanna   |
</code></pre></div>

  <ul>
    <li><code>left.ident &lt; right.ident</code> ensures distinct pairs without duplicates</li>
    <li>Use <code>left.ident &lt;= 4 and right.ident &lt;= 4</code> to limit output</li>
    <li>Quick check: <math>n(n-1)/2</math> pairs</li>
  </ul>

</section>
<section>

  <h2 id="filter-pairs">63: filter pairs</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/filter_pairs.sql">src/filter_pairs.sql</a></p>
  <div><pre><code><span>with</span>
<span>person</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>ident</span><span>,</span>
        <span>personal</span> <span>||</span> <span>' '</span> <span>||</span> <span>family</span> <span>as</span> <span>name</span>
    <span>from</span> <span>staff</span>
<span>),</span>
<span>together</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>left</span><span>.</span><span>staff</span> <span>as</span> <span>left_staff</span><span>,</span>
        <span>right</span><span>.</span><span>staff</span> <span>as</span> <span>right_staff</span>
    <span>from</span> <span>performed</span> <span>as</span> <span>left</span> <span>join</span> <span>performed</span> <span>as</span> <span>right</span>
    <span>on</span> <span>left</span><span>.</span><span>experiment</span> <span>=</span> <span>right</span><span>.</span><span>experiment</span>
    <span>where</span> <span>left_staff</span> <span>&lt;</span> <span>right_staff</span>
<span>)</span>
<span>select</span>
    <span>left</span><span>.</span><span>name</span> <span>as</span> <span>person_1</span><span>,</span>
    <span>right</span><span>.</span><span>name</span> <span>as</span> <span>person_2</span>
<span>from</span> <span>person</span> <span>as</span> <span>left</span> <span>join</span> <span>person</span> <span>as</span> <span>right</span> <span>join</span> <span>together</span>
<span>on</span> <span>left</span><span>.</span><span>ident</span> <span>=</span> <span>left_staff</span> <span>and</span> <span>right</span><span>.</span><span>ident</span> <span>=</span> <span>right_staff</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/filter_pairs.out">out/filter_pairs.out</a></p>
  <div><pre><code>|    person_1     |     person_2     |
|-----------------|------------------|
| Kartik Gupta    | Vedika Rout      |
| Pranay Khanna   | Vedika Rout      |
| Indrans Sridhar | Romil Kapoor     |
| Abram Chokshi   | Ishaan Ramaswamy |
| Pranay Khanna   | Vedika Rout      |
| Kartik Gupta    | Abram Chokshi    |
| Abram Chokshi   | Romil Kapoor     |
| Kartik Gupta    | Divit Dhaliwal   |
| Divit Dhaliwal  | Abram Chokshi    |
| Pranay Khanna   | Ishaan Ramaswamy |
| Indrans Sridhar | Romil Kapoor     |
| Kartik Gupta    | Ishaan Ramaswamy |
| Kartik Gupta    | Nitya Lal        |
| Kartik Gupta    | Abram Chokshi    |
| Pranay Khanna   | Romil Kapoor     |
</code></pre></div>

</section>
<section>

  

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/correlated_subquery.sql">src/correlated_subquery.sql</a></p>
  <div><pre><code><span>select</span> <span>name</span><span>,</span> <span>building</span>
<span>from</span> <span>department</span>
<span>where</span> <span>exists</span> <span>(</span>
    <span>select</span> <span>1</span>
    <span>from</span> <span>staff</span>
    <span>where</span> <span>dept</span> <span>=</span> <span>department</span><span>.</span><span>ident</span>
<span>)</span>
<span>order</span> <span>by</span> <span>name</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/correlated_subquery.out">out/correlated_subquery.out</a></p>
  <div><pre><code>|       name        |     building     |
|-------------------|------------------|
| Genetics          | Chesson          |
| Histology         | Fashet Extension |
| Molecular Biology | Chesson          |
</code></pre></div>

  <ul>
    <li>Nobody works in Endocrinology</li>
    <li><code>select 1</code> could equally be <code>select true</code> or any other value</li>
    <li>A <a href="#g:correlated_subquery">correlated subquery</a> depends on a value from the outer query
      <ul>
        <li>Equivalent to nested loop</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="nonexistence">65: nonexistence</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/nonexistence.sql">src/nonexistence.sql</a></p>
  <div><pre><code><span>select</span> <span>name</span><span>,</span> <span>building</span>
<span>from</span> <span>department</span>
<span>where</span> <span>not</span> <span>exists</span> <span>(</span>
    <span>select</span> <span>1</span>
    <span>from</span> <span>staff</span>
    <span>where</span> <span>dept</span> <span>=</span> <span>department</span><span>.</span><span>ident</span>
<span>)</span>
<span>order</span> <span>by</span> <span>name</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/nonexistence.out">out/nonexistence.out</a></p>
  <div><pre><code>|     name      | building |
|---------------|----------|
| Endocrinology | TGVH     |
</code></pre></div>

</section>
<section>

  

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/avoid_correlated_subqueries.sql">src/avoid_correlated_subqueries.sql</a></p>
  <div><pre><code><span>select</span> <span>distinct</span>
    <span>department</span><span>.</span><span>name</span> <span>as</span> <span>name</span><span>,</span>
    <span>department</span><span>.</span><span>building</span> <span>as</span> <span>building</span>
<span>from</span> <span>department</span> <span>join</span> <span>staff</span>
<span>on</span> <span>department</span><span>.</span><span>ident</span> <span>=</span> <span>staff</span><span>.</span><span>dept</span>
<span>order</span> <span>by</span> <span>name</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/avoid_correlated_subqueries.out">out/avoid_correlated_subqueries.out</a></p>
  <div><pre><code>|       name        |     building     |
|-------------------|------------------|
| Genetics          | Chesson          |
| Histology         | Fashet Extension |
| Molecular Biology | Chesson          |
</code></pre></div>

  <ul>
    <li>The join might or might not be faster than the correlated subquery</li>
    <li>Hard to find unstaffed departments without either <code>not exists</code> or <code>count</code> and a check for 0</li>
  </ul>

</section>
<section>

  <h2 id="lead-and-lag">66: lead and lag</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/lead_lag.sql">src/lead_lag.sql</a></p>
  <div><pre><code><span>with</span> <span>ym_num</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>strftime</span><span>(</span><span>'%Y-%m'</span><span>,</span> <span>started</span><span>)</span> <span>as</span> <span>ym</span><span>,</span>
        <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
    <span>from</span> <span>experiment</span>
    <span>group</span> <span>by</span> <span>ym</span>
<span>)</span>
<span>select</span>
    <span>ym</span><span>,</span>
    <span>lag</span><span>(</span><span>num</span><span>)</span> <span>over</span> <span>(</span><span>order</span> <span>by</span> <span>ym</span><span>)</span> <span>as</span> <span>prev_num</span><span>,</span>
    <span>num</span><span>,</span>
    <span>lead</span><span>(</span><span>num</span><span>)</span> <span>over</span> <span>(</span><span>order</span> <span>by</span> <span>ym</span><span>)</span> <span>as</span> <span>next_num</span>
<span>from</span> <span>ym_num</span>
<span>order</span> <span>by</span> <span>ym</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/lead_lag.out">out/lead_lag.out</a></p>
  <div><pre><code>|   ym    | prev_num | num | next_num |
|---------|----------|-----|----------|
| 2023-01 |          | 2   | 5        |
| 2023-02 | 2        | 5   | 5        |
| 2023-03 | 5        | 5   | 1        |
| 2023-04 | 5        | 1   | 6        |
| 2023-05 | 1        | 6   | 5        |
| 2023-06 | 6        | 5   | 3        |
| 2023-07 | 5        | 3   | 2        |
| 2023-08 | 3        | 2   | 4        |
| 2023-09 | 2        | 4   | 6        |
| 2023-10 | 4        | 6   | 4        |
| 2023-12 | 6        | 4   | 5        |
| 2024-01 | 4        | 5   | 2        |
| 2024-02 | 5        | 2   |          |
</code></pre></div>

  <ul>
    <li>Use <code>strftime</code> to extract year and month
      <ul>
        <li>Clumsy, but date/time handling is not SQLite’s strong point</li>
      </ul>
    </li>
    <li>Use <a href="#g:window_func">window functions</a> <code>lead</code> and <code>lag</code> to shift values
      <ul>
        <li>Unavailable values are null</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="window-functions">67: window functions</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/window_functions.sql">src/window_functions.sql</a></p>
  <div><pre><code><span>with</span> <span>ym_num</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>strftime</span><span>(</span><span>'%Y-%m'</span><span>,</span> <span>started</span><span>)</span> <span>as</span> <span>ym</span><span>,</span>
        <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
    <span>from</span> <span>experiment</span>
    <span>group</span> <span>by</span> <span>ym</span>
<span>)</span>
<span>select</span>
    <span>ym</span><span>,</span>
    <span>num</span><span>,</span>
    <span>sum</span><span>(</span><span>num</span><span>)</span> <span>over</span> <span>(</span><span>order</span> <span>by</span> <span>ym</span><span>)</span> <span>as</span> <span>num_done</span><span>,</span>
    <span>cume_dist</span><span>()</span> <span>over</span> <span>(</span><span>order</span> <span>by</span> <span>ym</span><span>)</span> <span>as</span> <span>progress</span>
<span>from</span> <span>ym_num</span>
<span>order</span> <span>by</span> <span>ym</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/window_functions.out">out/window_functions.out</a></p>
  <div><pre><code>|   ym    | num | num_done |      progress      |
|---------|-----|----------|--------------------|
| 2023-01 | 2   | 2        | 0.0769230769230769 |
| 2023-02 | 5   | 7        | 0.153846153846154  |
| 2023-03 | 5   | 12       | 0.230769230769231  |
| 2023-04 | 1   | 13       | 0.307692307692308  |
| 2023-05 | 6   | 19       | 0.384615384615385  |
| 2023-06 | 5   | 24       | 0.461538461538462  |
| 2023-07 | 3   | 27       | 0.538461538461538  |
| 2023-08 | 2   | 29       | 0.615384615384615  |
| 2023-09 | 4   | 33       | 0.692307692307692  |
| 2023-10 | 6   | 39       | 0.769230769230769  |
| 2023-12 | 4   | 43       | 0.846153846153846  |
| 2024-01 | 5   | 48       | 0.923076923076923  |
| 2024-02 | 2   | 50       | 1.0                |
</code></pre></div>

  <ul>
    <li><code>sum() over</code> does a running total</li>
    <li><code>cume_dist</code> is fraction <em>of rows seen so far</em></li>
  </ul>

</section>
<section>

  <h2 id="explain-another-query-plain">☆ explain another query plain</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/explain_window_function.sql">src/explain_window_function.sql</a></p>
  <div><pre><code><span>explain</span> <span>query</span> <span>plan</span>
<span>with</span> <span>ym_num</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>strftime</span><span>(</span><span>'%Y-%m'</span><span>,</span> <span>started</span><span>)</span> <span>as</span> <span>ym</span><span>,</span>
        <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
    <span>from</span> <span>experiment</span>
    <span>group</span> <span>by</span> <span>ym</span>
<span>)</span>
<span>select</span>
    <span>ym</span><span>,</span>
    <span>num</span><span>,</span>
    <span>sum</span><span>(</span><span>num</span><span>)</span> <span>over</span> <span>(</span><span>order</span> <span>by</span> <span>ym</span><span>)</span> <span>as</span> <span>num_done</span><span>,</span>
    <span>cume_dist</span><span>()</span> <span>over</span> <span>(</span><span>order</span> <span>by</span> <span>ym</span><span>)</span> <span>as</span> <span>progress</span>
<span>from</span> <span>ym_num</span>
<span>order</span> <span>by</span> <span>ym</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/explain_window_function.out">out/explain_window_function.out</a></p>
  <div><pre><code>QUERY PLAN
|--CO-ROUTINE (subquery-3)
|  |--CO-ROUTINE (subquery-4)
|  |  |--CO-ROUTINE ym_num
|  |  |  |--SCAN experiment
|  |  |  `--USE TEMP B-TREE FOR GROUP BY
|  |  |--SCAN ym_num
|  |  `--USE TEMP B-TREE FOR ORDER BY
|  `--SCAN (subquery-4)
`--SCAN (subquery-3)
</code></pre></div>

  <ul>
    <li>Becomes useful…eventually</li>
  </ul>

</section>
<section>

  <h2 id="partitioned-windows">68: partitioned windows</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/partition_window.sql">src/partition_window.sql</a></p>
  <div><pre><code><span>with</span> <span>y_m_num</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>strftime</span><span>(</span><span>'%Y'</span><span>,</span> <span>started</span><span>)</span> <span>as</span> <span>year</span><span>,</span>
        <span>strftime</span><span>(</span><span>'%m'</span><span>,</span> <span>started</span><span>)</span> <span>as</span> <span>month</span><span>,</span>
        <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
    <span>from</span> <span>experiment</span>
    <span>group</span> <span>by</span> <span>year</span><span>,</span> <span>month</span>
<span>)</span>
<span>select</span>
    <span>year</span><span>,</span>
    <span>month</span><span>,</span>
    <span>num</span><span>,</span>
    <span>sum</span><span>(</span><span>num</span><span>)</span> <span>over</span> <span>(</span><span>partition</span> <span>by</span> <span>year</span> <span>order</span> <span>by</span> <span>month</span><span>)</span> <span>as</span> <span>num_done</span>
<span>from</span> <span>y_m_num</span>
<span>order</span> <span>by</span> <span>year</span><span>,</span> <span>month</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/partition_window.out">out/partition_window.out</a></p>
  <div><pre><code>| year | month | num | num_done |
|------|-------|-----|----------|
| 2023 | 01    | 2   | 2        |
| 2023 | 02    | 5   | 7        |
| 2023 | 03    | 5   | 12       |
| 2023 | 04    | 1   | 13       |
| 2023 | 05    | 6   | 19       |
| 2023 | 06    | 5   | 24       |
| 2023 | 07    | 3   | 27       |
| 2023 | 08    | 2   | 29       |
| 2023 | 09    | 4   | 33       |
| 2023 | 10    | 6   | 39       |
| 2023 | 12    | 4   | 43       |
| 2024 | 01    | 5   | 5        |
| 2024 | 02    | 2   | 7        |
</code></pre></div>

  <ul>
    <li><code>partition by</code> creates groups</li>
    <li>So this counts experiments started since the beginning of each year</li>
  </ul>

</section>
<section>

  <h2 id="blobs">69: blobs</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/blob.sql">src/blob.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>images</span> <span>(</span>
    <span>name</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>content</span> <span>blob</span>
<span>);</span>

<span>insert</span> <span>into</span> <span>images</span><span>(</span><span>name</span><span>,</span> <span>content</span><span>)</span> <span>values</span>
    <span>(</span><span>"biohazard"</span><span>,</span> <span>readfile</span><span>(</span><span>"img/biohazard.png"</span><span>)),</span>
    <span>(</span><span>"crush"</span><span>,</span> <span>readfile</span><span>(</span><span>"img/crush.png"</span><span>)),</span>
    <span>(</span><span>"fire"</span><span>,</span> <span>readfile</span><span>(</span><span>"img/fire.png"</span><span>)),</span>
    <span>(</span><span>"radioactive"</span><span>,</span> <span>readfile</span><span>(</span><span>"img/radioactive.png"</span><span>)),</span>
    <span>(</span><span>"tripping"</span><span>,</span> <span>readfile</span><span>(</span><span>"img/tripping.png"</span><span>));</span>

<span>select</span> <span>name</span><span>,</span> <span>length</span><span>(</span><span>content</span><span>)</span> <span>from</span> <span>images</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/blob.out">out/blob.out</a></p>
  <div><pre><code>|    name     | length(content) |
|-------------|-----------------|
| biohazard   | 19629           |
| crush       | 15967           |
| fire        | 18699           |
| radioactive | 16661           |
| tripping    | 17208           |
</code></pre></div>

  <ul>
    <li>A <a href="#g:blob">blob</a> is a binary large object
      <ul>
        <li>Bytes in, bytes out…</li>
      </ul>
    </li>
    <li>If you think that’s odd, check out <a href="https://fossil-scm.org/">Fossil</a></li>
  </ul>

</section>
<section>

  <h2 id="yet-another-database-1">☆ yet another database</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/lab_log_db.sh">src/lab_log_db.sh</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/lab_log_schema.sql">src/lab_log_schema.sql</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/lab_log_schema.out">out/lab_log_schema.out</a></p>
  <div><pre><code>CREATE TABLE sqlite_sequence(name,seq);
CREATE TABLE person(
       ident            integer primary key autoincrement,
       details          text not null
);
CREATE TABLE machine(
       ident            integer primary key autoincrement,
       name             text not null,
       details          text not null
);
CREATE TABLE usage(
       ident            integer primary key autoincrement,
       log              text not null
);
</code></pre></div>

</section>
<section>

  <h2 id="store-json">70: store JSON</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/json_in_table.sql">src/json_in_table.sql</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/json_in_table.out">out/json_in_table.out</a></p>
  <div><pre><code>| ident |      name      |                         details                         |
|-------|----------------|---------------------------------------------------------|
| 1     | WY401          | {"acquired": "2023-05-01"}                              |
| 2     | Inphormex      | {"acquired": "2021-07-15", "refurbished": "2023-10-22"} |
| 3     | AutoPlate 9000 | {"note": "needs software update"}                       |
</code></pre></div>

  <ul>
    <li>Store heterogeneous data as JSON-formatted text (with double-quoted strings)
      <ul>
        <li>Database parses it each time it is queried</li>
      </ul>
    </li>
    <li>Alternatively store as blob
      <ul>
        <li>Can’t just view it</li>
        <li>But more efficient</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="select-field-from-json">71: select field from JSON</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/json_field.sql">src/json_field.sql</a></p>
  <div><pre><code><span>select</span>
    <span>details</span><span>-&gt;</span><span>'$.acquired'</span> <span>as</span> <span>single_arrow</span><span>,</span>
    <span>details</span><span>-&gt;&gt;</span><span>'$.acquired'</span> <span>as</span> <span>double_arrow</span>
<span>from</span> <span>machine</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/json_field.out">out/json_field.out</a></p>
  <div><pre><code>| single_arrow | double_arrow |
|--------------|--------------|
| "2023-05-01" | 2023-05-01   |
| "2021-07-15" | 2021-07-15   |
|              |              |
</code></pre></div>

  <ul>
    <li>Single arrow <code>-&gt;</code> returns JSON representation result</li>
    <li>Double arrow <code>-&gt;&gt;</code> returns SQL text, integer, real, or null</li>
    <li>Left side is column</li>
    <li>Right side is <a href="#g:path_expression">path expression</a>
      <ul>
        <li>Start with <code>$</code> (meaning “root”)</li>
        <li>Fields separated by <code>.</code></li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="json-array-access">72: JSON array access</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/json_array.sql">src/json_array.sql</a></p>
  <div><pre><code><span>select</span>
    <span>ident</span><span>,</span>
    <span>json_array_length</span><span>(</span><span>log</span><span>-&gt;</span><span>'$'</span><span>)</span> <span>as</span> <span>length</span><span>,</span>
    <span>log</span><span>-&gt;</span><span>'$[0]'</span> <span>as</span> <span>first</span>
<span>from</span> <span>usage</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/json_array.out">out/json_array.out</a></p>
  <div><pre><code>| ident | length |                            first                             |
|-------|--------|--------------------------------------------------------------|
| 1     | 4      | {"machine":"Inphormex","person":["Gabrielle","Dub\u00e9"]}   |
| 2     | 5      | {"machine":"Inphormex","person":["Marianne","Richer"]}       |
| 3     | 2      | {"machine":"sterilizer","person":["Josette","Villeneuve"]}   |
| 4     | 1      | {"machine":"sterilizer","person":["Maude","Goulet"]}         |
| 5     | 2      | {"machine":"AutoPlate 9000","person":["Brigitte","Michaud"]} |
| 6     | 1      | {"machine":"sterilizer","person":["Marianne","Richer"]}      |
| 7     | 3      | {"machine":"WY401","person":["Maude","Goulet"]}              |
| 8     | 1      | {"machine":"AutoPlate 9000"}                                 |
</code></pre></div>

  <ul>
    <li>SQLite (and other database managers) has lots of JSON manipulation functions</li>
    <li><code>json_array_length</code> gives number of elements in selected array</li>
    <li>subscripts start with 0</li>
    <li>Characters outside 7-bit ASCII represented as Unicode escapes</li>
  </ul>

</section>
<section>

  <h2 id="unpack-json-array">73: unpack JSON array</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/json_unpack.sql">src/json_unpack.sql</a></p>
  <div><pre><code><span>select</span>
    <span>ident</span><span>,</span>
    <span>json_each</span><span>.</span><span>key</span> <span>as</span> <span>key</span><span>,</span>
    <span>json_each</span><span>.</span><span>value</span> <span>as</span> <span>value</span>
<span>from</span> <span>usage</span><span>,</span> <span>json_each</span><span>(</span><span>usage</span><span>.</span><span>log</span><span>)</span>
<span>limit</span> <span>10</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/json_unpack.out">out/json_unpack.out</a></p>
  <div><pre><code>| ident | key |                            value                             |
|-------|-----|--------------------------------------------------------------|
| 1     | 0   | {"machine":"Inphormex","person":["Gabrielle","Dub\u00e9"]}   |
| 1     | 1   | {"machine":"Inphormex","person":["Gabrielle","Dub\u00e9"]}   |
| 1     | 2   | {"machine":"WY401","person":["Gabrielle","Dub\u00e9"]}       |
| 1     | 3   | {"machine":"Inphormex","person":["Gabrielle","Dub\u00e9"]}   |
| 2     | 0   | {"machine":"Inphormex","person":["Marianne","Richer"]}       |
| 2     | 1   | {"machine":"AutoPlate 9000","person":["Marianne","Richer"]}  |
| 2     | 2   | {"machine":"sterilizer","person":["Marianne","Richer"]}      |
| 2     | 3   | {"machine":"AutoPlate 9000","person":["Monique","Marcotte"]} |
| 2     | 4   | {"machine":"sterilizer","person":["Marianne","Richer"]}      |
| 3     | 0   | {"machine":"sterilizer","person":["Josette","Villeneuve"]}   |
</code></pre></div>

  <ul>
    <li><code>json_each</code> is another table-valued function</li>
    <li>Use <code>json_each.<em>name</em></code> to get properties of unpacked array</li>
  </ul>

</section>
<section>

  <h2 id="last-element-of-array">74: last element of array</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/json_array_last.sql">src/json_array_last.sql</a></p>
  <div><pre><code><span>select</span>
    <span>ident</span><span>,</span>
    <span>log</span><span>-&gt;</span><span>'$[#-1].machine'</span> <span>as</span> <span>final</span>
<span>from</span> <span>usage</span>
<span>limit</span> <span>5</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/json_array_last.out">out/json_array_last.out</a></p>
  <div><pre><code>| ident |    final     |
|-------|--------------|
| 1     | "Inphormex"  |
| 2     | "sterilizer" |
| 3     | "Inphormex"  |
| 4     | "sterilizer" |
| 5     | "sterilizer" |
</code></pre></div>

</section>
<section>

  <h2 id="modify-json">75: modify JSON</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/json_modify.sql">src/json_modify.sql</a></p>
  <div><pre><code><span>select</span>
    <span>ident</span><span>,</span>
    <span>name</span><span>,</span>
    <span>json_set</span><span>(</span><span>details</span><span>,</span> <span>'$.sold'</span><span>,</span> <span>json_quote</span><span>(</span><span>'2024-01-25'</span><span>))</span> <span>as</span> <span>updated</span>
<span>from</span> <span>machine</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/json_modify.out">out/json_modify.out</a></p>
  <div><pre><code>| ident |      name      |                           updated                            |
|-------|----------------|--------------------------------------------------------------|
| 1     | WY401          | {"acquired":"2023-05-01","sold":"2024-01-25"}                |
| 2     | Inphormex      | {"acquired":"2021-07-15","refurbished":"2023-10-22","sold":" |
|       |                | 2024-01-25"}                                                 |
| 3     | AutoPlate 9000 | {"note":"needs software update","sold":"2024-01-25"}         |
</code></pre></div>

  <ul>
    <li>Updates the in-memory copy of the JSON, <em>not</em> the database record</li>
    <li>Please use <code>json_quote</code> rather than trying to format JSON with string operations</li>
  </ul>

</section>
<section>

  <h2 id="refresh-penguins">☆ refresh penguins</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/count_penguins.sql">src/count_penguins.sql</a></p>
  <div><pre><code><span>select</span> <span>species</span><span>,</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
<span>from</span> <span>penguins</span>
<span>group</span> <span>by</span> <span>species</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/count_penguins.out">out/count_penguins.out</a></p>
  <div><pre><code>|  species  | num |
|-----------|-----|
| Adelie    | 152 |
| Chinstrap | 68  |
| Gentoo    | 124 |
</code></pre></div>

  <ul>
    <li>We will restore full database after each example</li>
  </ul>

</section>
<section>

  <h2 id="tombstones">76: tombstones</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/make_active.sql">src/make_active.sql</a></p>
  <div><pre><code><span>alter</span> <span>table</span> <span>penguins</span>
<span>add</span> <span>active</span> <span>integer</span> <span>not</span> <span>null</span> <span>default</span> <span>1</span><span>;</span>

<span>update</span> <span>penguins</span>
<span>set</span> <span>active</span> <span>=</span> <span>iif</span><span>(</span><span>species</span> <span>=</span> <span>'Adelie'</span><span>,</span> <span>0</span><span>,</span> <span>1</span><span>);</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/active_penguins.sql">src/active_penguins.sql</a></p>
  <div><pre><code><span>select</span> <span>species</span><span>,</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>active</span>
<span>group</span> <span>by</span> <span>species</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/active_penguins.out">out/active_penguins.out</a></p>
  <div><pre><code>|  species  | num |
|-----------|-----|
| Chinstrap | 68  |
| Gentoo    | 124 |
</code></pre></div>

  <ul>
    <li>Use a <a href="#g:tombstone">tombstone</a> to mark (in)active records</li>
    <li>Every query must now include it</li>
  </ul>

</section>
<section>

  <h2 id="views">77: views</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/views.sql">src/views.sql</a></p>
  <div><pre><code><span>create</span> <span>view</span> <span>if</span> <span>not</span> <span>exists</span>
<span>active_penguins</span> <span>(</span>
    <span>species</span><span>,</span>
    <span>island</span><span>,</span>
    <span>bill_length_mm</span><span>,</span>
    <span>bill_depth_mm</span><span>,</span>
    <span>flipper_length_mm</span><span>,</span>
    <span>body_mass_g</span><span>,</span>
    <span>sex</span>
<span>)</span> <span>as</span>
<span>select</span>
    <span>species</span><span>,</span>
    <span>island</span><span>,</span>
    <span>bill_length_mm</span><span>,</span>
    <span>bill_depth_mm</span><span>,</span>
    <span>flipper_length_mm</span><span>,</span>
    <span>body_mass_g</span><span>,</span>
    <span>sex</span>
<span>from</span> <span>penguins</span>
<span>where</span> <span>active</span><span>;</span>

<span>select</span> <span>species</span><span>,</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>as</span> <span>num</span>
<span>from</span> <span>active_penguins</span>
<span>group</span> <span>by</span> <span>species</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/views.out">out/views.out</a></p>
  <div><pre><code>|  species  | num |
|-----------|-----|
| Chinstrap | 68  |
| Gentoo    | 124 |
</code></pre></div>

  <ul>
    <li>A <a href="#g:view">view</a> is a saved query that other queries can invoke</li>
    <li>View is re-run each time it’s used</li>
    <li>Like a CTE, but:
      <ul>
        <li>Can be shared between queries</li>
        <li>Views came first</li>
      </ul>
    </li>
    <li>Some databases offer <a href="#g:materialized_view">materialized views</a>
      <ul>
        <li>Update-on-demand temporary tables</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="hours-reminder">☆ hours reminder</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/all_jobs.sql">src/all_jobs.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>job</span> <span>(</span>
    <span>name</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>billable</span> <span>real</span> <span>not</span> <span>null</span>
<span>);</span>
<span>insert</span> <span>into</span> <span>job</span> <span>values</span>
    <span>(</span><span>'calibrate'</span><span>,</span> <span>1</span><span>.</span><span>5</span><span>),</span>
    <span>(</span><span>'clean'</span><span>,</span> <span>0</span><span>.</span><span>5</span><span>);</span>
<span>select</span> <span>*</span> <span>from</span> <span>job</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/all_jobs.out">out/all_jobs.out</a></p>
  <div><pre><code>|   name    | billable |
|-----------|----------|
| calibrate | 1.5      |
| clean     | 0.5      |
</code></pre></div>

</section>
<section>

  <h2 id="add-check">78: add check</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/all_jobs_check.sql">src/all_jobs_check.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>job</span> <span>(</span>
    <span>name</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>billable</span> <span>real</span> <span>not</span> <span>null</span><span>,</span>
    <span>check</span> <span>(</span><span>billable</span> <span>&gt;</span> <span>0</span><span>.</span><span>0</span><span>)</span>
<span>);</span>
<span>insert</span> <span>into</span> <span>job</span> <span>values</span> <span>(</span><span>'calibrate'</span><span>,</span> <span>1</span><span>.</span><span>5</span><span>);</span>
<span>insert</span> <span>into</span> <span>job</span> <span>values</span> <span>(</span><span>'reset'</span><span>,</span> <span>-</span><span>0</span><span>.</span><span>5</span><span>);</span>
<span>select</span> <span>*</span> <span>from</span> <span>job</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/all_jobs_check.out">out/all_jobs_check.out</a></p>
  <div><pre><code>Runtime error near line 9: CHECK constraint failed: billable &gt; 0.0 (19)
|   name    | billable |
|-----------|----------|
| calibrate | 1.5      |
</code></pre></div>

  <ul>
    <li><code>check</code> adds constraint to table
      <ul>
        <li>Must produce a Boolean result</li>
        <li>Run each time values added or modified</li>
      </ul>
    </li>
    <li>But changes made before the error have taken effect</li>
  </ul>

</section>
<section>

  <h2 id="acid">☆ ACID</h2>

  <ul>
    <li><a href="#g:atomic">Atomic</a>: change cannot be broken down into smaller ones (i.e., all or nothing)</li>
    <li><a href="#g:consistent">Consistent</a>: database goes from one consistent state to another</li>
    <li><a href="#g:isolated">Isolated</a>: looks like changes happened one after another</li>
    <li><a href="#g:durable">Durable</a>: if change takes place, it’s still there after a restart</li>
  </ul>

</section>
<section>

  <h2 id="transactions">79: transactions</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/transaction.sql">src/transaction.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>job</span> <span>(</span>
    <span>name</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>billable</span> <span>real</span> <span>not</span> <span>null</span><span>,</span>
    <span>check</span> <span>(</span><span>billable</span> <span>&gt;</span> <span>0</span><span>.</span><span>0</span><span>)</span>
<span>);</span>

<span>insert</span> <span>into</span> <span>job</span> <span>values</span> <span>(</span><span>'calibrate'</span><span>,</span> <span>1</span><span>.</span><span>5</span><span>);</span>

<span>begin</span> <span>transaction</span><span>;</span>
<span>insert</span> <span>into</span> <span>job</span> <span>values</span> <span>(</span><span>'clean'</span><span>,</span> <span>0</span><span>.</span><span>5</span><span>);</span>
<span>rollback</span><span>;</span>

<span>select</span> <span>*</span> <span>from</span> <span>job</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/transaction.out">out/transaction.out</a></p>
  <div><pre><code>|   name    | billable |
|-----------|----------|
| calibrate | 1.5      |
</code></pre></div>

  <ul>
    <li>Statements outside transaction execute and are committed immediately</li>
    <li>Statement(s) inside transaction don’t take effect until:
      <ul>
        <li><code>end transaction</code> (success)</li>
        <li><code>rollback</code> (undo)</li>
      </ul>
    </li>
    <li>Can have any number of statements inside a transaction</li>
    <li>But <em>cannot</em> nest transactions in SQLite
      <ul>
        <li>Other databases support this</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="rollback-in-constraint">80: rollback in constraint</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/rollback_constraint.sql">src/rollback_constraint.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>job</span> <span>(</span>
    <span>name</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>billable</span> <span>real</span> <span>not</span> <span>null</span><span>,</span>
    <span>check</span> <span>(</span><span>billable</span> <span>&gt;</span> <span>0</span><span>.</span><span>0</span><span>)</span> <span>on</span> <span>conflict</span> <span>rollback</span>
<span>);</span>

<span>insert</span> <span>into</span> <span>job</span> <span>values</span>
    <span>(</span><span>'calibrate'</span><span>,</span> <span>1</span><span>.</span><span>5</span><span>);</span>
<span>insert</span> <span>into</span> <span>job</span> <span>values</span>
    <span>(</span><span>'clean'</span><span>,</span> <span>0</span><span>.</span><span>5</span><span>),</span>
    <span>(</span><span>'reset'</span><span>,</span> <span>-</span><span>0</span><span>.</span><span>5</span><span>);</span>

<span>select</span> <span>*</span> <span>from</span> <span>job</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/rollback_constraint.out">out/rollback_constraint.out</a></p>
  <div><pre><code>Runtime error near line 11: CHECK constraint failed: billable &gt; 0.0 (19)
|   name    | billable |
|-----------|----------|
| calibrate | 1.5      |
</code></pre></div>

  <ul>
    <li>All of second <code>insert</code> rolled back as soon as error occurred</li>
    <li>But first <code>insert</code> took effect</li>
  </ul>

</section>
<section>

  <h2 id="rollback-in-statement">81: rollback in statement</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/rollback_statement.sql">src/rollback_statement.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>job</span> <span>(</span>
    <span>name</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>billable</span> <span>real</span> <span>not</span> <span>null</span><span>,</span>
    <span>check</span> <span>(</span><span>billable</span> <span>&gt;</span> <span>0</span><span>.</span><span>0</span><span>)</span>
<span>);</span>

<span>insert</span> <span>or</span> <span>rollback</span> <span>into</span> <span>job</span> <span>values</span>
    <span>(</span><span>'calibrate'</span><span>,</span> <span>1</span><span>.</span><span>5</span><span>);</span>
<span>insert</span> <span>or</span> <span>rollback</span> <span>into</span> <span>job</span> <span>values</span>
    <span>(</span><span>'clean'</span><span>,</span> <span>0</span><span>.</span><span>5</span><span>),</span>
    <span>(</span><span>'reset'</span><span>,</span> <span>-</span><span>0</span><span>.</span><span>5</span><span>);</span>

<span>select</span> <span>*</span> <span>from</span> <span>job</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/rollback_statement.out">out/rollback_statement.out</a></p>
  <div><pre><code>Runtime error near line 11: CHECK constraint failed: billable &gt; 0.0 (19)
|   name    | billable |
|-----------|----------|
| calibrate | 1.5      |
</code></pre></div>

  <ul>
    <li>Constraint is in table definition</li>
    <li>Action is in statement</li>
  </ul>

</section>
<section>

  <h2 id="upsert">82: upsert</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/upsert.sql">src/upsert.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>jobs_done</span> <span>(</span>
    <span>person</span> <span>text</span> <span>unique</span><span>,</span>
    <span>num</span> <span>integer</span> <span>default</span> <span>0</span>
<span>);</span>

<span>insert</span> <span>into</span> <span>jobs_done</span> <span>values</span><span>(</span><span>"zia"</span><span>,</span> <span>1</span><span>);</span>
<span>.</span><span>print</span> <span>"after first"</span>
<span>select</span> <span>*</span> <span>from</span> <span>jobs_done</span><span>;</span>
<span>.</span><span>print</span>


<span>insert</span> <span>into</span> <span>jobs_done</span> <span>values</span><span>(</span><span>"zia"</span><span>,</span> <span>1</span><span>);</span>
<span>.</span><span>print</span> <span>"after failed"</span>
<span>select</span> <span>*</span> <span>from</span> <span>jobs_done</span><span>;</span>

<span>insert</span> <span>into</span> <span>jobs_done</span> <span>values</span><span>(</span><span>"zia"</span><span>,</span> <span>1</span><span>)</span>
    <span>on</span> <span>conflict</span><span>(</span><span>person</span><span>)</span> <span>do</span> <span>update</span> <span>set</span> <span>num</span> <span>=</span> <span>num</span> <span>+</span> <span>1</span><span>;</span>
<span>.</span><span>print</span> <span>"</span><span>\n</span><span>after upsert"</span>
<span>select</span> <span>*</span> <span>from</span> <span>jobs_done</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/upsert.out">out/upsert.out</a></p>
  <div><pre><code>after first
| person | num |
|--------|-----|
| zia    | 1   |

Runtime error near line 14: UNIQUE constraint failed: jobs_done.person (19)
after failed
| person | num |
|--------|-----|
| zia    | 1   |

after upsert
| person | num |
|--------|-----|
| zia    | 2   |
</code></pre></div>

  <ul>
    <li><a href="#g:upsert">upsert</a> stands for “update or insert”
      <ul>
        <li>Create if record doesn’t exist</li>
        <li>Update if it does</li>
      </ul>
    </li>
    <li>Not standard SQL but widely implemented</li>
    <li>Example also shows use of SQLite <code>.print</code> command</li>
  </ul>

</section>
<section>

  <h2 id="normalization">☆ normalization</h2>

  <ul>
    <li>
      <p>First <a href="#g:normal_form">normal form</a> (1NF):
every field of every record contains one indivisible value.</p>
    </li>
    <li>
      <p>Second normal form (2NF) and third normal form (3NF):
every value in a record that isn’t a key depends solely on the key,
not on other values.</p>
    </li>
    <li>
      <p><a href="#g:denormalization">Denormalization</a>: explicitly store values that could be calculated on the fly</p>
      <ul>
        <li>To simplify queries and/or make processing faster</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="create-trigger">83: create trigger</h2>

  <ul>
    <li>A <a href="#g:trigger">trigger</a> automatically runs before or after a specified operation</li>
    <li>Can have side effects (e.g., update some other table)</li>
    <li>And/or implement checks (e.g., make sure other records exist)</li>
    <li>Add processing overhead…</li>
    <li>…but data is either cheap or correct, never both</li>
    <li>Inside trigger, refer to old and new versions of record
as <code>old.<em>column</em></code> and <code>new.<em>column</em></code></li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/trigger_setup.sql">src/trigger_setup.sql</a></p>
  <div><pre><code><span>-- Track hours of lab work.</span>
<span>create</span> <span>table</span> <span>job</span> <span>(</span>
    <span>person</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>reported</span> <span>real</span> <span>not</span> <span>null</span> <span>check</span> <span>(</span><span>reported</span> <span>&gt;=</span> <span>0</span><span>.</span><span>0</span><span>)</span>
<span>);</span>

<span>-- Explicitly store per-person total rather than using sum().</span>
<span>create</span> <span>table</span> <span>total</span> <span>(</span>
    <span>person</span> <span>text</span> <span>unique</span> <span>not</span> <span>null</span><span>,</span>
    <span>hours</span> <span>real</span>
<span>);</span>

<span>-- Initialize totals.</span>
<span>insert</span> <span>into</span> <span>total</span> <span>values</span>
    <span>(</span><span>"gene"</span><span>,</span> <span>0</span><span>.</span><span>0</span><span>),</span>
    <span>(</span><span>"august"</span><span>,</span> <span>0</span><span>.</span><span>0</span><span>);</span>

<span>-- Define a trigger.</span>
<span>create</span> <span>trigger</span> <span>total_trigger</span>
<span>before</span> <span>insert</span> <span>on</span> <span>job</span>
<span>begin</span>
    <span>-- Check that the person exists.</span>
    <span>select</span> <span>case</span>
        <span>when</span> <span>not</span> <span>exists</span> <span>(</span><span>select</span> <span>1</span> <span>from</span> <span>total</span> <span>where</span> <span>person</span> <span>=</span> <span>new</span><span>.</span><span>person</span><span>)</span>
        <span>then</span> <span>raise</span><span>(</span><span>rollback</span><span>,</span> <span>'Unknown person '</span><span>)</span>
    <span>end</span><span>;</span>
    <span>-- Update their total hours (or fail if non-negative constraint violated).</span>
    <span>update</span> <span>total</span>
    <span>set</span> <span>hours</span> <span>=</span> <span>hours</span> <span>+</span> <span>new</span><span>.</span><span>reported</span>
    <span>where</span> <span>total</span><span>.</span><span>person</span> <span>=</span> <span>new</span><span>.</span><span>person</span><span>;</span>
<span>end</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/trigger_successful.sql">src/trigger_successful.sql</a></p>
  <div><pre><code><span>insert</span> <span>into</span> <span>job</span> <span>values</span>
    <span>(</span><span>'gene'</span><span>,</span> <span>1</span><span>.</span><span>5</span><span>),</span>
    <span>(</span><span>'august'</span><span>,</span> <span>0</span><span>.</span><span>5</span><span>),</span>
    <span>(</span><span>'gene'</span><span>,</span> <span>1</span><span>.</span><span>0</span><span>)</span>
<span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/trigger_successful.out">out/trigger_successful.out</a></p>
  <div><pre><code>| person | reported |
|--------|----------|
| gene   | 1.5      |
| august | 0.5      |
| gene   | 1.0      |

| person | hours |
|--------|-------|
| gene   | 2.5   |
| august | 0.5   |
</code></pre></div>

</section>
<section>

  <h2 id="trigger-firing">081: trigger firing</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/trigger_firing.sql">src/trigger_firing.sql</a></p>
  <div><pre><code><span>insert</span> <span>into</span> <span>job</span> <span>values</span>
    <span>(</span><span>'gene'</span><span>,</span> <span>1</span><span>.</span><span>0</span><span>),</span>
    <span>(</span><span>'august'</span><span>,</span> <span>-</span><span>1</span><span>.</span><span>0</span><span>)</span>
<span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/trigger_firing.out">out/trigger_firing.out</a></p>
  <div><pre><code>Runtime error near line 6: CHECK constraint failed: reported &gt;= 0.0 (19)

| person | hours |
|--------|-------|
| gene   | 0.0   |
| august | 0.0   |
</code></pre></div>

</section>
<section>

  <h2 id="represent-graphs">☆ represent graphs</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/lineage_setup.sql">src/lineage_setup.sql</a></p>
  <div><pre><code><span>create</span> <span>table</span> <span>lineage</span> <span>(</span>
    <span>parent</span> <span>text</span> <span>not</span> <span>null</span><span>,</span>
    <span>child</span> <span>text</span> <span>not</span> <span>null</span>
<span>);</span>
<span>insert</span> <span>into</span> <span>lineage</span> <span>values</span>
    <span>(</span><span>'Arturo'</span><span>,</span> <span>'Clemente'</span><span>),</span>
    <span>(</span><span>'Darío'</span><span>,</span> <span>'Clemente'</span><span>),</span>
    <span>(</span><span>'Clemente'</span><span>,</span> <span>'Homero'</span><span>),</span>
    <span>(</span><span>'Clemente'</span><span>,</span> <span>'Ivonne'</span><span>),</span>
    <span>(</span><span>'Ivonne'</span><span>,</span> <span>'Lourdes'</span><span>),</span>
    <span>(</span><span>'Soledad'</span><span>,</span> <span>'Lourdes'</span><span>),</span>
    <span>(</span><span>'Lourdes'</span><span>,</span> <span>'Santiago'</span><span>);</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/represent_graph.sql">src/represent_graph.sql</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/represent_graph.out">out/represent_graph.out</a></p>
  <div><pre><code>|  parent  |  child   |
|----------|----------|
| Arturo   | Clemente |
| Darío    | Clemente |
| Clemente | Homero   |
| Clemente | Ivonne   |
| Ivonne   | Lourdes  |
| Soledad  | Lourdes  |
| Lourdes  | Santiago |
</code></pre></div>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/lineage.svg" alt="lineage diagram"></p>

</section>
<section>

  <h2 id="recursive-query">84: recursive query</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/recursive_lineage.sql">src/recursive_lineage.sql</a></p>
  <div><pre><code><span>with</span> <span>recursive</span> <span>descendent</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>'Clemente'</span> <span>as</span> <span>person</span><span>,</span>
        <span>0</span> <span>as</span> <span>generations</span>
    <span>union</span> <span>all</span>
    <span>select</span>
        <span>lineage</span><span>.</span><span>child</span> <span>as</span> <span>person</span><span>,</span>
        <span>descendent</span><span>.</span><span>generations</span> <span>+</span> <span>1</span> <span>as</span> <span>generations</span>
    <span>from</span> <span>descendent</span> <span>join</span> <span>lineage</span>
    <span>on</span> <span>descendent</span><span>.</span><span>person</span> <span>=</span> <span>lineage</span><span>.</span><span>parent</span>
<span>)</span>
<span>select</span> <span>person</span><span>,</span> <span>generations</span> <span>from</span> <span>descendent</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/recursive_lineage.out">out/recursive_lineage.out</a></p>
  <div><pre><code>|  person  | generations |
|----------|-------------|
| Clemente | 0           |
| Homero   | 1           |
| Ivonne   | 1           |
| Lourdes  | 2           |
| Santiago | 3           |
</code></pre></div>

  <ul>
    <li>Use a <a href="#g:recursive_cte">recursive CTE</a> to create a temporary table (<code>descendent</code>)</li>
    <li><a href="#g:base_case">Base case</a> seeds this table</li>
    <li><a href="#g:recursive_case">Recursive case</a> relies on value(s) already in that table and external table(s)</li>
    <li><code>union all</code> to combine rows
      <ul>
        <li>Can use <code>union</code> but that has lower performance (must check uniqueness each time)</li>
      </ul>
    </li>
    <li>Stops when the recursive case yields an empty row set (nothing new to add)</li>
    <li>Then select the desired values from the CTE</li>
  </ul>

</section>
<section>

  

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/contact_person.sql">src/contact_person.sql</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/contact_person.out">out/contact_person.out</a></p>
  <div><pre><code>| ident |         name          |
|-------|-----------------------|
| 1     | Juana Baeza           |
| 2     | Agustín Rodríquez     |
| 3     | Ariadna Caraballo     |
| 4     | Micaela Laboy         |
| 5     | Verónica Altamirano   |
| 6     | Reina Rivero          |
| 7     | Elias Merino          |
| 8     | Minerva Guerrero      |
| 9     | Mauro Balderas        |
| 10    | Pilar Alarcón         |
| 11    | Daniela Menéndez      |
| 12    | Marco Antonio Barrera |
| 13    | Cristal Soliz         |
| 14    | Bernardo Narváez      |
| 15    | Óscar Barrios         |
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/contact_contacts.sql">src/contact_contacts.sql</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/contact_contacts.out">out/contact_contacts.out</a></p>
  <div><pre><code>|       left        |         right         |
|-------------------|-----------------------|
| Agustín Rodríquez | Ariadna Caraballo     |
| Agustín Rodríquez | Verónica Altamirano   |
| Juana Baeza       | Verónica Altamirano   |
| Juana Baeza       | Micaela Laboy         |
| Pilar Alarcón     | Reina Rivero          |
| Cristal Soliz     | Marco Antonio Barrera |
| Cristal Soliz     | Daniela Menéndez      |
| Daniela Menéndez  | Marco Antonio Barrera |
</code></pre></div>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/contact_tracing.svg" alt="contact diagram"></p>

</section>
<section>

  

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/bidirectional.sql">src/bidirectional.sql</a></p>
  <div><pre><code><span>create</span> <span>temporary</span> <span>table</span> <span>bi_contact</span> <span>(</span>
    <span>left</span> <span>text</span><span>,</span>
    <span>right</span> <span>text</span>
<span>);</span>

<span>insert</span> <span>into</span> <span>bi_contact</span>
<span>select</span>
    <span>left</span><span>,</span> <span>right</span> <span>from</span> <span>contact</span>
    <span>union</span> <span>all</span>
    <span>select</span> <span>right</span><span>,</span> <span>left</span> <span>from</span> <span>contact</span>
<span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/bidirectional.out">out/bidirectional.out</a></p>
  <div><pre><code>| original_count |
|----------------|
| 8              |

| num_contact |
|-------------|
| 16          |
</code></pre></div>

  <ul>
    <li>Create a <a href="#g:temporary_table">temporary table</a> rather than using a long chain of CTEs
      <ul>
        <li>Only lasts as long as the session (not saved to disk)</li>
      </ul>
    </li>
    <li>Duplicate information rather than writing more complicated query</li>
  </ul>

</section>
<section>

  <h2 id="update-group-identifiers">86: update group identifiers</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/update_group_ids.sql">src/update_group_ids.sql</a></p>
  <div><pre><code><span>select</span>
    <span>left</span><span>.</span><span>name</span> <span>as</span> <span>left_name</span><span>,</span>
    <span>left</span><span>.</span><span>ident</span> <span>as</span> <span>left_ident</span><span>,</span>
    <span>right</span><span>.</span><span>name</span> <span>as</span> <span>right_name</span><span>,</span>
    <span>right</span><span>.</span><span>ident</span> <span>as</span> <span>right_ident</span><span>,</span>
    <span>min</span><span>(</span><span>left</span><span>.</span><span>ident</span><span>,</span> <span>right</span><span>.</span><span>ident</span><span>)</span> <span>as</span> <span>new_ident</span>
<span>from</span>
    <span>(</span><span>person</span> <span>as</span> <span>left</span> <span>join</span> <span>bi_contact</span> <span>on</span> <span>left</span><span>.</span><span>name</span> <span>=</span> <span>bi_contact</span><span>.</span><span>left</span><span>)</span>
    <span>join</span> <span>person</span> <span>as</span> <span>right</span> <span>on</span> <span>bi_contact</span><span>.</span><span>right</span> <span>=</span> <span>right</span><span>.</span><span>name</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/update_group_ids.out">out/update_group_ids.out</a></p>
  <div><pre><code>|       left_name       | left_ident |      right_name       | right_ident | new_ident |
|-----------------------|------------|-----------------------|-------------|-----------|
| Juana Baeza           | 1          | Micaela Laboy         | 4           | 1         |
| Juana Baeza           | 1          | Verónica Altamirano   | 5           | 1         |
| Agustín Rodríquez     | 2          | Ariadna Caraballo     | 3           | 2         |
| Agustín Rodríquez     | 2          | Verónica Altamirano   | 5           | 2         |
| Ariadna Caraballo     | 3          | Agustín Rodríquez     | 2           | 2         |
| Micaela Laboy         | 4          | Juana Baeza           | 1           | 1         |
| Verónica Altamirano   | 5          | Agustín Rodríquez     | 2           | 2         |
| Verónica Altamirano   | 5          | Juana Baeza           | 1           | 1         |
| Reina Rivero          | 6          | Pilar Alarcón         | 10          | 6         |
| Pilar Alarcón         | 10         | Reina Rivero          | 6           | 6         |
| Daniela Menéndez      | 11         | Cristal Soliz         | 13          | 11        |
| Daniela Menéndez      | 11         | Marco Antonio Barrera | 12          | 11        |
| Marco Antonio Barrera | 12         | Cristal Soliz         | 13          | 12        |
| Marco Antonio Barrera | 12         | Daniela Menéndez      | 11          | 11        |
| Cristal Soliz         | 13         | Daniela Menéndez      | 11          | 11        |
| Cristal Soliz         | 13         | Marco Antonio Barrera | 12          | 12        |
</code></pre></div>

  <ul>
    <li><code>new_ident</code> is minimum of own identifier and identifiers one step away</li>
    <li>Doesn’t keep people with no contacts</li>
  </ul>

</section>
<section>

  <h2 id="recursive-labeling">87: recursive labeling</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/recursive_labeling.sql">src/recursive_labeling.sql</a></p>
  <div><pre><code><span>with</span> <span>recursive</span> <span>labeled</span> <span>as</span> <span>(</span>
    <span>select</span>
        <span>person</span><span>.</span><span>name</span> <span>as</span> <span>name</span><span>,</span>
	<span>person</span><span>.</span><span>ident</span> <span>as</span> <span>label</span>
    <span>from</span>
        <span>person</span>
    <span>union</span> <span>-- not 'union all'</span>
    <span>select</span>
        <span>person</span><span>.</span><span>name</span> <span>as</span> <span>name</span><span>,</span>
	<span>labeled</span><span>.</span><span>label</span> <span>as</span> <span>label</span>
    <span>from</span>
        <span>(</span><span>person</span> <span>join</span> <span>bi_contact</span> <span>on</span> <span>person</span><span>.</span><span>name</span> <span>=</span> <span>bi_contact</span><span>.</span><span>left</span><span>)</span>
	<span>join</span> <span>labeled</span> <span>on</span> <span>bi_contact</span><span>.</span><span>right</span> <span>=</span> <span>labeled</span><span>.</span><span>name</span>
    <span>where</span> <span>labeled</span><span>.</span><span>label</span> <span>&lt;</span> <span>person</span><span>.</span><span>ident</span>
<span>)</span>
<span>select</span> <span>name</span><span>,</span> <span>min</span><span>(</span><span>label</span><span>)</span> <span>as</span> <span>group_id</span>
<span>from</span> <span>labeled</span>
<span>group</span> <span>by</span> <span>name</span>
<span>order</span> <span>by</span> <span>label</span><span>,</span> <span>name</span><span>;</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/recursive_labeling.out">out/recursive_labeling.out</a></p>
  <div><pre><code>|         name          | group_id |
|-----------------------|----------|
| Agustín Rodríquez     | 1        |
| Ariadna Caraballo     | 1        |
| Juana Baeza           | 1        |
| Micaela Laboy         | 1        |
| Verónica Altamirano   | 1        |
| Pilar Alarcón         | 6        |
| Reina Rivero          | 6        |
| Elias Merino          | 7        |
| Minerva Guerrero      | 8        |
| Mauro Balderas        | 9        |
| Cristal Soliz         | 11       |
| Daniela Menéndez      | 11       |
| Marco Antonio Barrera | 11       |
| Bernardo Narváez      | 14       |
| Óscar Barrios         | 15       |
</code></pre></div>

  <ul>
    <li>Use <code>union</code> instead of <code>union all</code> to prevent <a href="#g:infinite_recursion">infinite recursion</a></li>
  </ul>

</section>
<section>

  <h2 id="query-from-python">88: query from Python</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/basic_python_query.py">src/basic_python_query.py</a></p>
  <div><pre><code><span>import</span> <span>sqlite3</span>

<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>"db/penguins.db"</span><span>)</span>
<span>cursor</span> <span>=</span> <span>connection</span><span>.</span><span>execute</span><span>(</span><span>"select count(*) from penguins;"</span><span>)</span>
<span>rows</span> <span>=</span> <span>cursor</span><span>.</span><span>fetchall</span><span>()</span>
<span>print</span><span>(</span><span>rows</span><span>)</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/basic_python_query.out">out/basic_python_query.out</a></p>
  

  <ul>
    <li><code>sqlite3</code> is part of Python’s standard library</li>
    <li>Create a connection to a database file</li>
    <li>Get a <a href="#g:cursor">cursor</a> by executing a query
      <ul>
        <li>More common to create cursor and use that to run queries</li>
      </ul>
    </li>
    <li>Fetch all rows at once as list of tuples</li>
  </ul>

</section>
<section>

  <h2 id="incremental-fetch">89: incremental fetch</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/incremental_fetch.py">src/incremental_fetch.py</a></p>
  <div><pre><code><span>import</span> <span>sqlite3</span>

<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>"db/penguins.db"</span><span>)</span>
<span>cursor</span> <span>=</span> <span>connection</span><span>.</span><span>cursor</span><span>()</span>
<span>cursor</span> <span>=</span> <span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"select species, island from penguins limit 5;"</span><span>)</span>
<span>while</span> <span>row</span> <span>:</span><span>=</span> <span>cursor</span><span>.</span><span>fetchone</span><span>():</span>
    <span>print</span><span>(</span><span>row</span><span>)</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/incremental_fetch.out">out/incremental_fetch.out</a></p>
  <div><pre><code>('Adelie', 'Torgersen')
('Adelie', 'Torgersen')
('Adelie', 'Torgersen')
('Adelie', 'Torgersen')
('Adelie', 'Torgersen')
</code></pre></div>

  <ul>
    <li><code>cursor.fetchone</code> returns <code>None</code> when no more data</li>
    <li>There is also <code>fetchmany(N)</code> to fetch (up to) a certain number of rows</li>
  </ul>

</section>
<section>

  <h2 id="insert-delete-and-all-that">90: insert, delete, and all that</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/insert_delete.py">src/insert_delete.py</a></p>
  <div><pre><code><span>import</span> <span>sqlite3</span>

<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>":memory:"</span><span>)</span>
<span>cursor</span> <span>=</span> <span>connection</span><span>.</span><span>cursor</span><span>()</span>
<span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"create table example(num integer);"</span><span>)</span>

<span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"insert into example values (10), (20);"</span><span>)</span>
<span>print</span><span>(</span><span>"after insertion"</span><span>,</span> <span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"select * from example;"</span><span>).</span><span>fetchall</span><span>())</span>

<span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"delete from example where num &lt; 15;"</span><span>)</span>
<span>print</span><span>(</span><span>"after deletion"</span><span>,</span> <span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"select * from example;"</span><span>).</span><span>fetchall</span><span>())</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/insert_delete.out">out/insert_delete.out</a></p>
  <div><pre><code>after insertion [(10,), (20,)]
after deletion [(20,)]
</code></pre></div>

  <ul>
    <li>Each <code>execute</code> is its own transaction</li>
  </ul>

</section>
<section>

  <h2 id="interpolate-values">91: interpolate values</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/interpolate.py">src/interpolate.py</a></p>
  <div><pre><code><span>import</span> <span>sqlite3</span>

<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>":memory:"</span><span>)</span>
<span>cursor</span> <span>=</span> <span>connection</span><span>.</span><span>cursor</span><span>()</span>
<span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"create table example(num integer);"</span><span>)</span>

<span>cursor</span><span>.</span><span>executemany</span><span>(</span><span>"insert into example values (?);"</span><span>,</span> <span>[(</span><span>10</span><span>,),</span> <span>(</span><span>20</span><span>,)])</span>
<span>print</span><span>(</span><span>"after insertion"</span><span>,</span> <span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"select * from example;"</span><span>).</span><span>fetchall</span><span>())</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/interpolate.out">out/interpolate.out</a></p>
  <div><pre><code>after insertion [(10,), (20,)]
</code></pre></div>

  <ul>
    <li>From <a href="https://xkcd.com/327/">XKCD</a></li>
  </ul>

  <p><img src="https://gvwilson.github.io/sql-tutorial/img/xkcd_327_exploits_of_a_mom.png" alt="XKCD Exploits of a Mom"></p>

</section>
<section>

  <h2 id="script-execution">92: script execution</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/script_execution.py">src/script_execution.py</a></p>
  <div><pre><code><span>import</span> <span>sqlite3</span>

<span>SETUP</span> <span>=</span> <span>"""</span><span>\
</span><span>drop table if exists example;
create table example(num integer);
insert into example values (10), (20);
"""</span>

<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>":memory:"</span><span>)</span>
<span>cursor</span> <span>=</span> <span>connection</span><span>.</span><span>cursor</span><span>()</span>
<span>cursor</span><span>.</span><span>executescript</span><span>(</span><span>SETUP</span><span>)</span>
<span>print</span><span>(</span><span>"after insertion"</span><span>,</span> <span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"select * from example;"</span><span>).</span><span>fetchall</span><span>())</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/script_execution.out">out/script_execution.out</a></p>
  <div><pre><code>after insertion [(10,), (20,)]
</code></pre></div>

  <ul>
    <li>But what if something goes wrong?</li>
  </ul>

</section>
<section>

  <h2 id="sqlite-exceptions-in-python">93: SQLite exceptions in Python</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/exceptions.py">src/exceptions.py</a></p>
  <div><pre><code><span>import</span> <span>sqlite3</span>

<span>SETUP</span> <span>=</span> <span>"""</span><span>\
</span><span>create table example(num integer check(num &gt; 0));
insert into example values (10);
insert into example values (-1);
insert into example values (20);
"""</span>

<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>":memory:"</span><span>)</span>
<span>cursor</span> <span>=</span> <span>connection</span><span>.</span><span>cursor</span><span>()</span>
<span>try</span><span>:</span>
    <span>cursor</span><span>.</span><span>executescript</span><span>(</span><span>SETUP</span><span>)</span>
<span>except</span> <span>sqlite3</span><span>.</span><span>Error</span> <span>as</span> <span>exc</span><span>:</span>
    <span>print</span><span>(</span><span>f</span><span>"SQLite exception: </span><span>{</span><span>exc</span><span>}</span><span>"</span><span>)</span>
<span>print</span><span>(</span><span>"after execution"</span><span>,</span> <span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"select * from example;"</span><span>).</span><span>fetchall</span><span>())</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/exceptions.out">out/exceptions.out</a></p>
  <div><pre><code>SQLite exception: CHECK constraint failed: num &gt; 0
after execution [(10,)]
</code></pre></div>

</section>
<section>

  <h2 id="python-in-sqlite">94: Python in SQLite</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/embedded_python.py">src/embedded_python.py</a></p>
  <div><pre><code><span>import</span> <span>sqlite3</span>

<span>SETUP</span> <span>=</span> <span>"""</span><span>\
</span><span>create table example(num integer);
insert into example values (-10), (10), (20), (30);
"""</span>


<span>def</span> <span>clip</span><span>(</span><span>value</span><span>):</span>
    <span>if</span> <span>value</span> <span>&lt;</span> <span>0</span><span>:</span>
        <span>return</span> <span>0</span>
    <span>if</span> <span>value</span> <span>&gt;</span> <span>20</span><span>:</span>
        <span>return</span> <span>20</span>
    <span>return</span> <span>value</span>


<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>":memory:"</span><span>)</span>
<span>connection</span><span>.</span><span>create_function</span><span>(</span><span>"clip"</span><span>,</span> <span>1</span><span>,</span> <span>clip</span><span>)</span>
<span>cursor</span> <span>=</span> <span>connection</span><span>.</span><span>cursor</span><span>()</span>
<span>cursor</span><span>.</span><span>executescript</span><span>(</span><span>SETUP</span><span>)</span>
<span>for</span> <span>row</span> <span>in</span> <span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"select num, clip(num) from example;"</span><span>).</span><span>fetchall</span><span>():</span>
    <span>print</span><span>(</span><span>row</span><span>)</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/embedded_python.out">out/embedded_python.out</a></p>
  <div><pre><code>(-10, 0)
(10, 10)
(20, 20)
(30, 20)
</code></pre></div>

  <ul>
    <li>SQLite calls back into Python to execute the function</li>
    <li>Other databases can run Python (and other languages) in the database server process</li>
    <li>Be careful</li>
  </ul>

</section>
<section>

  <h2 id="handle-dates-and-times">95: handle dates and times</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/dates_times.py">src/dates_times.py</a></p>
  <div><pre><code><span>from</span> <span>datetime</span> <span>import</span> <span>date</span>
<span>import</span> <span>sqlite3</span>


<span># Convert date to ISO-formatted string when writing to database
</span><span>def</span> <span>_adapt_date_iso</span><span>(</span><span>val</span><span>):</span>
    <span>return</span> <span>val</span><span>.</span><span>isoformat</span><span>()</span>


<span>sqlite3</span><span>.</span><span>register_adapter</span><span>(</span><span>date</span><span>,</span> <span>_adapt_date_iso</span><span>)</span>


<span># Convert ISO-formatted string to date when reading from database
</span><span>def</span> <span>_convert_date</span><span>(</span><span>val</span><span>):</span>
    <span>return</span> <span>date</span><span>.</span><span>fromisoformat</span><span>(</span><span>val</span><span>.</span><span>decode</span><span>())</span>


<span>sqlite3</span><span>.</span><span>register_converter</span><span>(</span><span>"date"</span><span>,</span> <span>_convert_date</span><span>)</span>

<span>SETUP</span> <span>=</span> <span>"""</span><span>\
</span><span>create table events(
    happened date not null,
    description text not null
);
"""</span>

<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>":memory:"</span><span>,</span> <span>detect_types</span><span>=</span><span>sqlite3</span><span>.</span><span>PARSE_DECLTYPES</span><span>)</span>
<span>cursor</span> <span>=</span> <span>connection</span><span>.</span><span>cursor</span><span>()</span>
<span>cursor</span><span>.</span><span>execute</span><span>(</span><span>SETUP</span><span>)</span>

<span>cursor</span><span>.</span><span>executemany</span><span>(</span>
    <span>"insert into events values (?, ?);"</span><span>,</span>
    <span>[(</span><span>date</span><span>(</span><span>2024</span><span>,</span> <span>1</span><span>,</span> <span>10</span><span>),</span> <span>"started tutorial"</span><span>),</span> <span>(</span><span>date</span><span>(</span><span>2024</span><span>,</span> <span>1</span><span>,</span> <span>29</span><span>),</span> <span>"finished tutorial"</span><span>)],</span>
<span>)</span>

<span>for</span> <span>row</span> <span>in</span> <span>cursor</span><span>.</span><span>execute</span><span>(</span><span>"select * from events;"</span><span>).</span><span>fetchall</span><span>():</span>
    <span>print</span><span>(</span><span>row</span><span>)</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/dates_times.out">out/dates_times.out</a></p>
  <div><pre><code>(datetime.date(2024, 1, 10), 'started tutorial')
(datetime.date(2024, 1, 29), 'finished tutorial')
</code></pre></div>

  <ul>
    <li><code>sqlite3.PARSE_DECLTYPES</code> tells <code>sqlite3</code> library to use converts based on declared column types</li>
    <li>Adapt on the way in, convert on the way out</li>
  </ul>

</section>
<section>

  <h2 id="sql-in-jupyter-notebooks">96: SQL in Jupyter notebooks</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/install_jupysql.sh">src/install_jupysql.sh</a></p>
  

  <ul>
    <li>And then inside the notebook:</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/load_ext.text">src/load_ext.text</a></p>
  

  <ul>
    <li>Loads extension</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/jupyter_connect.text">src/jupyter_connect.text</a></p>
  <div><pre><code>%sql sqlite:///data/penguins.db
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/jupyter_connect.out">out/jupyter_connect.out</a></p>
  <div><pre><code>Connecting to 'sqlite:///data/penguins.db'
</code></pre></div>

  <ul>
    <li>Connects to database
      <ul>
        <li><code>sqlite://</code> with two slashes is the protocol</li>
        <li><code>/data/penguins.db</code> (one leading slash) is a local path</li>
      </ul>
    </li>
    <li>Single percent sign <code>%sql</code> introduces one-line command</li>
    <li>Use double percent sign <code>%%sql</code> to indicate that the rest of the cell is SQL</li>
  </ul>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/jupyter_select.text">src/jupyter_select.text</a></p>
  <div><pre><code>%%sql
select species, count(*) as num
from penguins
group by species;
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/jupyter_select.out">out/jupyter_select.out</a></p>
  <div><pre><code>Running query in 'sqlite:///data/penguins.db'
</code></pre></div>

  <table>
  <thead>
    <tr>
      <th>species</th>
      <th>num</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Adelie</td>
      <td>152</td>
    </tr>
    <tr>
      <td>Chinstrap</td>
      <td>68</td>
    </tr>
    <tr>
      <td>Gentoo</td>
      <td>124</td>
    </tr>
  </tbody>
</table>

</section>
<section>

  <h2 id="pandas-and-sql">97: Pandas and SQL</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/install_pandas.sh">src/install_pandas.sh</a></p>
  

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/select_pandas.py">src/select_pandas.py</a></p>
  <div><pre><code><span>import</span> <span>pandas</span> <span>as</span> <span>pd</span>
<span>import</span> <span>sqlite3</span>

<span>connection</span> <span>=</span> <span>sqlite3</span><span>.</span><span>connect</span><span>(</span><span>"db/penguins.db"</span><span>)</span>
<span>query</span> <span>=</span> <span>"select species, count(*) as num from penguins group by species;"</span>
<span>df</span> <span>=</span> <span>pd</span><span>.</span><span>read_sql</span><span>(</span><span>query</span><span>,</span> <span>connection</span><span>)</span>
<span>print</span><span>(</span><span>df</span><span>)</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/select_pandas.out">out/select_pandas.out</a></p>
  <div><pre><code>species  num
0     Adelie  152
1  Chinstrap   68
2     Gentoo  124
</code></pre></div>

  <ul>
    <li>Be careful about datatype conversion</li>
  </ul>

</section>
<section>

  <h2 id="polars-and-sql">98: Polars and SQL</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/install_polars.sh">src/install_polars.sh</a></p>
  <div><pre><code>pip <span>install </span>polars pyarrow adbc-driver-sqlite
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/select_polars.py">src/select_polars.py</a></p>
  <div><pre><code><span>import</span> <span>polars</span> <span>as</span> <span>pl</span>

<span>query</span> <span>=</span> <span>"select species, count(*) as num from penguins group by species;"</span>
<span>uri</span> <span>=</span> <span>"sqlite:///db/penguins.db"</span>
<span>df</span> <span>=</span> <span>pl</span><span>.</span><span>read_database_uri</span><span>(</span><span>query</span><span>,</span> <span>uri</span><span>,</span> <span>engine</span><span>=</span><span>"adbc"</span><span>)</span>
<span>print</span><span>(</span><span>df</span><span>)</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/select_polars.out">out/select_polars.out</a></p>
  <div><pre><code>shape: (3, 2)
┌───────────┬─────┐
│ species   ┆ num │
│ ---       ┆ --- │
│ str       ┆ i64 │
╞═══════════╪═════╡
│ Adelie    ┆ 152 │
│ Chinstrap ┆ 68  │
│ Gentoo    ┆ 124 │
└───────────┴─────┘
</code></pre></div>

  <ul>
    <li>The <a href="#g:uri">Uniform Resource Identifier</a> (URI) specifies the database</li>
    <li>The query is the query</li>
    <li>Use the ADBC engine instead of the default ConnectorX</li>
  </ul>

</section>
<section>

  <h2 id="object-relational-mapper">99: object-relational mapper</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/orm.py">src/orm.py</a></p>
  <div><pre><code><span>from</span> <span>sqlmodel</span> <span>import</span> <span>Field</span><span>,</span> <span>Session</span><span>,</span> <span>SQLModel</span><span>,</span> <span>create_engine</span><span>,</span> <span>select</span>


<span>class</span> <span>Department</span><span>(</span><span>SQLModel</span><span>,</span> <span>table</span><span>=</span><span>True</span><span>):</span>
    <span>ident</span><span>:</span> <span>str</span> <span>=</span> <span>Field</span><span>(</span><span>default</span><span>=</span><span>None</span><span>,</span> <span>primary_key</span><span>=</span><span>True</span><span>)</span>
    <span>name</span><span>:</span> <span>str</span>
    <span>building</span><span>:</span> <span>str</span>


<span>engine</span> <span>=</span> <span>create_engine</span><span>(</span><span>"sqlite:///db/assays.db"</span><span>)</span>
<span>with</span> <span>Session</span><span>(</span><span>engine</span><span>)</span> <span>as</span> <span>session</span><span>:</span>
    <span>statement</span> <span>=</span> <span>select</span><span>(</span><span>Department</span><span>)</span>
    <span>for</span> <span>result</span> <span>in</span> <span>session</span><span>.</span><span>exec</span><span>(</span><span>statement</span><span>).</span><span>all</span><span>():</span>
        <span>print</span><span>(</span><span>result</span><span>)</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/orm.out">out/orm.out</a></p>
  <div><pre><code>building='Chesson' name='Genetics' ident='gen'
building='Fashet Extension' name='Histology' ident='hist'
building='Chesson' name='Molecular Biology' ident='mb'
building='TGVH' name='Endocrinology' ident='end'
</code></pre></div>

  <ul>
    <li>An <a href="#g:orm">object-relational mapper</a> (ORM) translates table columns to object properties and vice versa</li>
    <li>SQLModel relies on Python type hints</li>
  </ul>

</section>
<section>

  <h2 id="relations-with-orm">100: relations with ORM</h2>

  <p><a href="https://gvwilson.github.io/sql-tutorial/src/orm_relation.py">src/orm_relation.py</a></p>
  <div><pre><code><span>class</span> <span>Staff</span><span>(</span><span>SQLModel</span><span>,</span> <span>table</span><span>=</span><span>True</span><span>):</span>
    <span>ident</span><span>:</span> <span>str</span> <span>=</span> <span>Field</span><span>(</span><span>default</span><span>=</span><span>None</span><span>,</span> <span>primary_key</span><span>=</span><span>True</span><span>)</span>
    <span>personal</span><span>:</span> <span>str</span>
    <span>family</span><span>:</span> <span>str</span>
    <span>dept</span><span>:</span> <span>Optional</span><span>[</span><span>str</span><span>]</span> <span>=</span> <span>Field</span><span>(</span><span>default</span><span>=</span><span>None</span><span>,</span> <span>foreign_key</span><span>=</span><span>"department.ident"</span><span>)</span>
    <span>age</span><span>:</span> <span>int</span>


<span>engine</span> <span>=</span> <span>create_engine</span><span>(</span><span>"sqlite:///db/assays.db"</span><span>)</span>
<span>SQLModel</span><span>.</span><span>metadata</span><span>.</span><span>create_all</span><span>(</span><span>engine</span><span>)</span>
<span>with</span> <span>Session</span><span>(</span><span>engine</span><span>)</span> <span>as</span> <span>session</span><span>:</span>
    <span>statement</span> <span>=</span> <span>select</span><span>(</span><span>Department</span><span>,</span> <span>Staff</span><span>).</span><span>where</span><span>(</span><span>Staff</span><span>.</span><span>dept</span> <span>==</span> <span>Department</span><span>.</span><span>ident</span><span>)</span>
    <span>for</span> <span>dept</span><span>,</span> <span>staff</span> <span>in</span> <span>session</span><span>.</span><span>exec</span><span>(</span><span>statement</span><span>):</span>
        <span>print</span><span>(</span><span>f</span><span>"</span><span>{</span><span>dept</span><span>.</span><span>name</span><span>}</span><span>: </span><span>{</span><span>staff</span><span>.</span><span>personal</span><span>}</span><span> </span><span>{</span><span>staff</span><span>.</span><span>family</span><span>}</span><span>"</span><span>)</span>
</code></pre></div>

  <p><a href="https://gvwilson.github.io/sql-tutorial/out/orm_relation.out">out/orm_relation.out</a></p>
  <div><pre><code>Histology: Divit Dhaliwal
Molecular Biology: Indrans Sridhar
Molecular Biology: Pranay Khanna
Histology: Vedika Rout
Genetics: Abram Chokshi
Histology: Romil Kapoor
Molecular Biology: Ishaan Ramaswamy
Genetics: Nitya Lal
</code></pre></div>

  <ul>
    <li>Make foreign keys explicit in class definitions</li>
    <li>SQLModel automatically does the join
      <ul>
        <li>The two staff with no department aren’t included in the result</li>
      </ul>
    </li>
  </ul>

</section>
<section>

  <h2 id="appendices">☆ Appendices</h2>

  <h2 id="terms">☆  Terms</h2>

  <dl>
  
  <dt id="g:1_to_1">1-to-1 relation</dt>
  <dd>A relationship between two tables in which each record from the first table matches exactly one record from the second and vice versa.
</dd>
  
  <dt id="g:1_to_many">1-to-many relation</dt>
  <dd>A relationship between two tables in which each record from the first table matches zero or more records from the second, but each record from the second table matches exactly one record from the first.
</dd>
  
  <dt id="g:aggregation">aggregation</dt>
  <dd>Combining several values to produce one.
</dd>
  
  <dt id="g:aggregation_func">aggregation function</dt>
  <dd>A function used to produce one value from many, such as maximum or addition.
</dd>
  
  <dt id="g:alias">alias</dt>
  <dd>An alternate name used temporarily for a table or column.
</dd>
  
  <dt id="g:atomic">atomic</dt>
  <dd>An operation that cannot be broken into smaller operations.
</dd>
  
  <dt id="g:autoincrement">autoincrement</dt>
  <dd>Automatically add one to a value.
</dd>
  
  <dt id="g:base_case">base case</dt>
  <dd>A starting point for recursion that does not depend on previous recursive calculations.
</dd>
  
  <dt id="g:blob">Binary Large Object (blob)</dt>
  <dd>Bytes that are handled as-is rather than being interpreted as numbers, text, or other data types.
</dd>
  
  <dt id="g:cross_join">cross join</dt>
  <dd>A join that creates the cross-product of rows from two tables.
</dd>
  
  <dt id="g:cte">common table expression (CTE)</dt>
  <dd>A temporary table created at the start of a query, usually to simplify writing the query.
</dd>
  
  <dt id="g:consistent">consistent</dt>
  <dd>A state in which all constraints are satisfied, e.g., all columns contain allowed values and all foreign keys refer to primary keys.
</dd>
  
  
  <dd>A subquery that depends on a value or values from the enclosing query, and which must therefore be executed once for each of those values.
</dd>
  
  <dt id="g:cursor">cursor</dt>
  <dd>A reference to the current location in the results of an ongoing query.
</dd>
  
  <dt id="g:data_migration">data migration</dt>
  <dd>To move data from one form to another, e.g., from one set of tables to a new set or from one DBMS to another.
</dd>
  
  <dt id="g:database">database</dt>
  <dd>A collection of data that can be searched and retrieved.
</dd>
  
  <dt id="g:dbms">database management system (DBMS)</dt>
  <dd>A program that manages a particular kind of database.
</dd>
  
  <dt id="g:denormalization">denormalization</dt>
  <dd>To deliberately introduce duplication or other violate normal forms, typically to improve query performance.
</dd>
  
  <dt id="g:durable">durable</dt>
  <dd>Guaranteed to survive shutdown and restart.
</dd>
  
  <dt id="g:er_diagram">entity-relationship diagram</dt>
  <dd>A graphical depiction of the relationships between tables in a database.
</dd>
  
  <dt id="g:filter">filter</dt>
  <dd>To select records based on whether they pass some Boolean test.
</dd>
  
  <dt id="g:foreign_key">foreign key</dt>
  <dd>A value in one table that identifies a primary key in another table.
</dd>
  
  <dt id="g:full_outer_join">full outer join</dt>
  <dd>See <a href="#g:cross_join">cross join</a>.
</dd>
  
  <dt id="g:group">group</dt>
  <dd>A set of records that share a common property, such as having the same value in a particular column.
</dd>
  
  <dt id="g:in_memory_db">in-memory database</dt>
  <dd>A database that is stored in memory rather than on disk.
</dd>
  
  <dt id="g:index">index</dt>
  <dd>An auxiliary data structure that enables faster access to records.
</dd>
  
  <dt id="g:infinite_recursion">infinite recursion</dt>
  <dd>See “infinite recursion”.
</dd>
  
  <dt id="g:isolated">isolated</dt>
  <dd>The appearance of having executed in an otherwise-idle system.
</dd>
  
  <dt id="g:join">join</dt>
  <dd>To combine records from two tables.
</dd>
  
  <dt id="g:join_condition">join condition</dt>
  <dd>The criteria used to decide which rows from each table in a join are combined.
</dd>
  
  <dt id="g:join_table">join table</dt>
  <dd>A table that exists solely to enable information from two tables to be connected.
</dd>
  
  <dt id="g:left_outer_join">left outer join</dt>
  <dd>A join that is guaranteed to keep all rows from the first (left) table. Columns from the right table are filled with actual values if available or with null otherwise.
</dd>
  
  <dt id="g:many_to_many">many-to-many relation</dt>
  <dd>A relationship between two tables in which each record from the first table may match zero or more records from the second and vice versa.
</dd>
  
  <dt id="g:materialized_view">materialized view</dt>
  <dd>A view that is stored on disk and updated on demand.
</dd>
  
  <dt id="g:normal_form">normal form</dt>
  <dd>One of several (loosely defined) rules for organizing data in tables.
</dd>
  
  <dt id="g:nosql">NoSQL database</dt>
  <dd>Any database that doesn’t use the relational model.
</dd>
  
  <dt id="g:null">null</dt>
  <dd>A special value representing “not known”.
</dd>
  
  <dt id="g:orm">object-relational mapper (ORM)</dt>
  <dd>A library that translates objects in a program into database queries and the results of those queries back into objects.
</dd>
  
  <dt id="g:path_expression">path expression</dt>
  <dd>An expression identifying an element or a set of elements in a JSON structure.
</dd>
  
  <dt id="g:primary_key">primary key</dt>
  <dd>A value or values in a database table that uniquely identifies each record in that table.
</dd>
  
  <dt id="g:query">query</dt>
  <dd>A command to perform some operation in a database (typically data retrieval).
</dd>
  
  <dt id="g:recursive_cte">recursive CTE</dt>
  <dd>A common table expression that refers to itself. Every recursive CTE must have a base case and a recursive case.
</dd>
  
  <dt id="g:recursive_case">recursive case</dt>
  <dd>The second or subsequent step in self-referential accumulation of data.
</dd>
  
  <dt id="g:rdbms">relational database management system (RDBMS)</dt>
  <dd>A database management system that stores data in tables with columns and rows.
</dd>
  
  <dt id="g:subquery">subquery</dt>
  <dd>A query used within another query.
</dd>
  
  <dt id="g:table_valued_func">table-valued function</dt>
  <dd>A function that returns multiple values rather than a single value.
</dd>
  
  <dt id="g:temporary_table">temporary table</dt>
  <dd>A table that is explicitly constructed in memory outside any particular query.
</dd>
  
  <dt id="g:ternary_logic">ternary logic</dt>
  <dd>A logic based on three values: true, false, and “don’t know” (represented as null).
</dd>
  
  <dt id="g:tombstone">tombstone</dt>
  <dd>A marker value added to a record to show that it is no longer active. Tombstones are used as an alternative to deleting data.
</dd>
  
  <dt id="g:trigger">trigger</dt>
  <dd>An action that runs automatically when something happens in a database, typically insertion or deletion.
</dd>
  
  <dt id="g:upsert">upsert</dt>
  <dd>To update a record if it exists or insert (create) a new record if it doesn’t.
</dd>
  
  <dt id="g:uri">Uniform Resource Identifier (URI)</dt>
  <dd>A string that identifies a resource (such as a web page or database) and the protocol used to access it.
</dd>
  
  <dt id="g:view">view</dt>
  <dd>A rearrangement of data in a database that is regenerated on demand.
</dd>
  
  <dt id="g:window_func">window function</dt>
  <dd>A function that combines data from adjacent rows in a database query’s result.
</dd>
  
</dl>

  <h2 id="acknowledgments">☆  Acknowledgments</h2>

  <p>This tutorial would not have been possible without:</p>

  <ul>
    <li><a href="http://andialbrecht.de/">Andi Albrecht</a>’s <a href="https://pypi.org/project/sqlparse/"><code>sqlparse</code></a> module</li>
    <li><a href="https://tapoueh.org/">Dimitri Fontaine</a>’s <a href="https://theartofpostgresql.com/"><em>The Art of PostgreSQL</em></a></li>
    <li>David Rozenshtein’s <em>The Essence of SQL</em> (now sadly out of print)</li>
  </ul>

  <p>I would also like to thank the following for spotting issues, making suggestions, or submitting changes:</p>

  <ul>
    <li>Sam Hames</li>
    <li>Robert Kern</li>
    <li>Roy Pardee</li>
    <li>Manos Pitsidianakis</li>
    <li>Daniel Possenriede</li>
    <li>Adam Rosien</li>
    <li>Thomas Sandmann</li>
    <li>Simon Willison</li>
  </ul>

</section>


    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Alaska Airlines flight 1282 NTSB preliminary report [pdf] (261 pts)]]></title>
            <link>https://www.ntsb.gov/investigations/Documents/DCA24MA063%20Preliminary%20report.pdf</link>
            <guid>39280756</guid>
            <pubDate>Tue, 06 Feb 2024 21:17:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.ntsb.gov/investigations/Documents/DCA24MA063%20Preliminary%20report.pdf">https://www.ntsb.gov/investigations/Documents/DCA24MA063%20Preliminary%20report.pdf</a>, See on <a href="https://news.ycombinator.com/item?id=39280756">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[New IBM LinuxONE 4 Express – Rack-mounted pre-configured Linux mainframe (139 pts)]]></title>
            <link>https://newsroom.ibm.com/2024-02-06-New-IBM-LinuxONE-4-Express-to-Offer-Cost-Savings-and-Client-Value-through-a-Cyber-Resilient-Hybrid-Cloud-and-AI-Platform</link>
            <guid>39279431</guid>
            <pubDate>Tue, 06 Feb 2024 19:39:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://newsroom.ibm.com/2024-02-06-New-IBM-LinuxONE-4-Express-to-Offer-Cost-Savings-and-Client-Value-through-a-Cyber-Resilient-Hybrid-Cloud-and-AI-Platform">https://newsroom.ibm.com/2024-02-06-New-IBM-LinuxONE-4-Express-to-Offer-Cost-Savings-and-Client-Value-through-a-Cyber-Resilient-Hybrid-Cloud-and-AI-Platform</a>, See on <a href="https://news.ycombinator.com/item?id=39279431">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="wd_move_content_up">

<p>- Newest IBM LinuxONE system is engineered to deliver cybersecurity, resiliency, scalability and AI inferencing for hybrid cloud environments.</p><p>- Moving Linux workloads from a compared x86 system to an IBM LinuxONE 4 Express can save over 52% on the total cost of ownership over 5 years.(1)</p>
<p>Feb 6, 2024</p>

			<div>
				<p><img src="https://newsroom.ibm.com/image/LinuxOne4+Express_Advocacy_banner.jpg"></p>
				
			</div>
		
</div><div wd_resize="formatNews" wd_print_url="https://newsroom.ibm.com/2024-02-06-New-IBM-LinuxONE-4-Express-to-Offer-Cost-Savings-and-Client-Value-through-a-Cyber-Resilient-Hybrid-Cloud-and-AI-Platform?printable=1"><p>,  /<a href="http://www.prnewswire.com/" target="_blank">PRNewswire</a>/ -- IBM (NYSE: <a href="http://www.ibm.com/investor" rel="nofollow" target="_blank">IBM</a>) today announced&nbsp;<a href="https://www.ibm.com/products/linuxone-4" rel="nofollow" target="_blank">IBM<i><sup>®</sup></i>&nbsp;LinuxONE 4 Express</a>, extending the latest performance, security and <a href="https://www.ibm.com/topics/artificial-intelligence" rel="nofollow" target="_blank">AI</a> capabilities of <a href="https://www.ibm.com/linuxone" rel="nofollow" target="_blank">LinuxONE</a> to small and medium sized businesses and within new data center environments. The pre-configured rack mount system is designed to offer cost savings and to remove client guess work when spinning up workloads quickly and getting started with the platform to address new and traditional use cases such as digital assets, medical imaging with AI, and workload consolidation.</p>

<p><a href="https://mma.prnewswire.com/media/2334567/LinuxONE_4_Express_side.html" rel="nofollow" target="_blank"><img alt="IBM LinuxONE 4 Express" src="https://mma.prnewswire.com/media/2334567/LinuxONE_4_Express_side.jpg" title="IBM LinuxONE 4 Express"> </a></p>

<p><a href="https://ibm.webcasts.com/starthere.jsp?ei=1650914&amp;tp_key=a828bc9aa1">Discover how to reduce TCO with IBM LinuxONE 4 Express</a></p>

<p><b>Building an integrated hybrid cloud strategy for today and years to come</b></p>

<p>As businesses move their products and services online quickly, oftentimes, they are left with a <a href="https://www.ibm.com/topics/hybrid-cloud" rel="nofollow" target="_blank">hybrid cloud</a>&nbsp;environment created by default, with siloed stacks that are not conducive to alignment across businesses or the introduction of AI. In a recent IBM IBV survey, 84% of executives asked acknowledged their enterprise struggles in eliminating silo-to-silo handoffs. And 78% of responding executives said that an inadequate operating model impedes successful adoption of their multicloud platform.<sup>2</sup> With the pressure to accelerate and scale the impact of data and AI across the enterprise – and improve business outcomes – another approach that organizations can take is to more carefully identify which workloads should be on-premises vs in the cloud.</p>

<p>"IBM&nbsp;LinuxONE 4 Express is a chance for startups and small to medium-sized businesses to build an intentional hybrid cloud strategy from the ground up. IBM brings the power of hybrid cloud and AI in the latest LinuxONE 4 system to a simple, easy to use format that fits in many data centers," said <span>Tina Tarquinio</span>, VP, Product Management, IBM Z and LinuxONE. "And as their businesses grow with the changing shifts in the market, LinuxONE 4 Express can scale to meet growing workload and performance requirements, in addition to offering AI inferencing co-located with mission-critical data for growing AI use cases."</p>

<p><b>Accelerating computing research for bio sciences&nbsp;</b></p>

<p>University College London is one of largest universities in the UK and well-known for their reputation as a public research institution. They've been working with IBM to build a sustainable hybrid cloud platform to support their academic research.</p>

<p>"Our Centre for Advanced Research Computing is critical to enable computational research across the sciences and humanities, as well as digital scholarship for students," said Dr. <span>Owain Kenway</span>, Head of Research Computing at University College London. "We're excited for LinuxONE 4 Express to support high I/O workloads like Next Generation Sequencing for Biosciences as well as supporting work in&nbsp;"Trusted Research Environments" (TREs), for example AI workloads on medical data. The system's high performance and scalability suit our crucial research needs, and its affordability will allow us to make it available to both university research and industry players as a test bed."</p>

<p><b>Delivering high scalability, availability and security for a range of data center environments and use cases&nbsp;</b></p>

<p>IBM LinuxONE Rockhopper 4, launched in&nbsp;April 2023 and based on the <a href="https://newsroom.ibm.com/2021-08-23-IBM-Unveils-On-Chip-Accelerated-Artificial-Intelligence-Processor" rel="nofollow" target="_blank">IBM Telum processor</a>, features capabilities designed to reduce both energy consumption and data center floor space while delivering the scale, performance and security that clients need.&nbsp;Also built on the Telum processor and delivered in a rack mount format, IBM LinuxONE 4 Express offers high availability for clients who have strict resiliency requirements due to internal or external regulations. In fact, IBM LinuxONE 4 Express systems, with GDPS, IBM DS8000 series storage with HyperSwap and running a Red Hat OpenShift Container Platform environment, are designed to deliver 99.999999% (eight 9s) availability.<sup>3</sup></p>

<p>"IBM LinuxONE is rapidly becoming a foundational part of the wider Infrastructure story within IBM," states <span>Steven Dickens</span>, VP and Practice Leader at The Futurum Group. "With the new LinuxONE 4 Express solution, IBM is uniquely positioned to handle mission-critical workloads with high availability. When you combine this with the system's cybersecurity posture, IBM is well positioned for market traction."</p>

<p>The system addresses a whole new set of use cases that startups and small businesses are facing, including:</p>

<ul type="disc">
	<li><b>Digital assets: </b>IBM LinuxONE 4 Express provides a secured platform with confidential computing capabilities specifically designed to protect sensitive data, like digital assets. IBM Secure Execution for Linux is a hardware-based security technology that is now built into IBM LinuxONE 4 Express. Scalable isolation for individual workloads can help protect not only from external attacks, but also insider threats. This includes data in use, a particularly critical stage of security for digital assets use cases.</li>
	<li><b>Medical imaging with AI</b>: With IBM Telum processor on-chip AI inferencing, clients can co-locate AI with mission-critical data on a LinuxONE system, allowing data analysis where the data is located. For example, health insurance companies could analyze large volumes of medical records in near real time to validate process claims, increasing the speed of business decision making.</li>
	<li><b>Workload consolidation: </b>IBM LinuxONE 4 Express is designed to help clients simplify their IT environments and cut costs by consolidating databases onto a LinuxONE system. Designed to bring significant cost savings for clients over time, clients that move Linux workloads from compared x86 server to an IBM LinuxONE 4 Express can save over 52% on their total cost of ownership over 5 years.<sup>4</sup></li>
</ul>

<p><b>Activating the IBM Ecosystem for client success</b></p>

<p>With the <a href="https://community.ibm.com/zsystems/linuxone/express/" rel="nofollow" target="_blank">IBM LinuxONE Ecosystem</a>, including <a href="https://www.aquasec.com/blog/aqua-to-protect-containerized-environments-on-linuxone-4-express" rel="nofollow" target="_blank">AquaSecurity</a>, <a href="https://www.clari5.com/clari5-real-time-enterprise-financial-crime-management-solution-for-banks-now-on-new-ibm-linuxone4-express/" rel="nofollow" target="_blank">Clari5</a>, <a href="https://exponentialai.com/xai-collaborates-with-ibm/" rel="nofollow" target="_blank">Exponential AI</a>, <a href="https://www.opollo.ai/blogs/20240206-blog.html" rel="nofollow" target="_blank">Opollo Technologies</a>, <a href="https://www.pennanttech.com/blog/pennapps-lending-factory-on-ibm-linuxone-4-express/" rel="nofollow" target="_blank">Pennant</a> and <a href="https://spiking.com/blog/launch-of-ibm-linuxone-4-express-system/" rel="nofollow" target="_blank">Spiking</a>, IBM is working to provide solutions for today's&nbsp;<a href="https://www.ibm.com/products/linuxone-4/sustainability" rel="nofollow" target="_blank">sustainability</a>&nbsp;and cybersecurity challenges. For clients that run data serving, core banking and digital assets workloads, an optimized sustainability and security posture is key to protecting both sensitive private data and sustainable organizational goals. IBM Business Partners can learn more about the skills required to install, deploy, service and resell IBM LinuxONE 4 Express <a href="https://www.ibm.com/partnerplus" rel="nofollow" target="_blank">here</a>.</p>

<p>"We purchased an IBM LinuxONE III Express to run proofs of concepts for our strategic customers, and the feedback we have received so far has been excellent," said Eyad Alhabbash, Director, IBM Systems Solutions &amp; Support Group at Saudi Business Machines (SBM).&nbsp;"LinuxONE III Express demonstrated better performance than the x86 running the same Red Hat OpenShift workload, and the customer noted how user-friendly the IBM LinuxONE is for server, storage and network management and operations."&nbsp;</p>

<p>The new IBM LinuxONE 4 Express, starting at <span>$135,000</span><sup>5</sup>, will be generally available<sup>6</sup> from IBM and certified business partners on <span>February 20, 2024</span>.</p>

<p>To learn more, <a href="https://ibm.webcasts.com/starthere.jsp?ei=1650914&amp;tp_key=a828bc9aa1" rel="nofollow" target="_blank">join IBM clients and partners</a>&nbsp;on&nbsp;February 20, at&nbsp;11 am ET&nbsp;for a deep dive, live webinar on industry trends, such as AI, sustainability and cybersecurity, as well as receive behind-the-scenes access to the new IBM LinuxONE 4 Express system.</p>

<p><b>About IBM</b><br>
IBM is a leading provider of global hybrid cloud and AI, and consulting expertise. We help clients in more than 175 countries capitalize on insights from their data, streamline business processes, reduce costs and gain the competitive edge in their industries. More than 4,000 government and corporate entities in critical infrastructure areas such as financial services, telecommunications and healthcare rely on IBM's hybrid cloud platform and Red Hat OpenShift to affect their digital transformations quickly, efficiently and securely. IBM's breakthrough innovations in AI, quantum computing, industry-specific cloud solutions and consulting deliver open and flexible options to our clients. All of this is backed by IBM's long-standing commitment to trust, transparency, responsibility, inclusivity and service. For more information, visit&nbsp;<a href="https://c212.net/c/link/?t=0&amp;l=en&amp;o=3382707-1&amp;h=188029054&amp;u=https%3A%2F%2Fc212.net%2Fc%2Flink%2F%3Ft%3D0%26l%3Den%26o%3D3154235-1%26h%3D3195901305%26u%3Dhttp%253A%252F%252Fwww.ibm.com%252F%26a%3Dwww.ibm.com&amp;a=www.ibm.com" rel="nofollow" target="_blank">www.ibm.com</a></p>

<p><b>Media Contact:</b><br>
<span>Ashley Peterson</span><br>
<a href="mailto:ashley.peterson@ibm.com" rel="nofollow" target="_blank">ashley.peterson@ibm.com</a>&nbsp;</p>

<div>
<table>
	<tbody>
		<tr>
			<td colspan="1" rowspan="1">
			<p><span><sup>_________________________________________<br>
			1</sup>&nbsp;<b>DISCLAIMER</b>: Compared IBM LinuxONE 4 Express Model consisting of a CPC drawer and an I/O drawer to support network and external storage with 12 IFLs and 736 GB of memory in 1 frame, versus compared 3 x86 servers with two Xeon Sapphire Rapids Platinum 8444 processors with 32 cores each (2ch/32c) with a total of 384 cores. All Systems are modeled to be running Linux Postgres Enterprise-DB workloads with virtualization and DB tools. Results may vary based on client-specific usage and location. </span><span>LinuxONE hardware is the expected global price in $USD and discounts. X86 purchase price was included and maintenance costs is from IDC's Pricing Service: https://www.idc.com/myidc3/products with an aggressive discount. Postgres Enterprise-DB software and tools prices are based on street prices that is discounted from the list price. TCO is calculated over a 5-year horizon. Cost estimates include hardware costs and annual maintenance, Linux OS subscription costs, virtualization software, people cost, and infrastructure (network, energy, space) costs.</span></p>
			</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="1">
			<p><span><sup>2</sup> <a href="https://www.ibm.com/downloads/cas/DAEL0EQY" rel="nofollow" target="_blank">IBM IBV Research Insights: Mastering Hybrid Cloud</a>, pg 11</span></p>
			</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="1">
			<p><span><sup>3</sup> <b>Disclaimer</b>: IBM internal data based on measurements and projections was used in calculating the expected value. Necessary components include IBM LinuxONE Rockhopper 4; IBM z/VM V7.2 systems or above collected in a Single System Image, each running RHOCP 4.10 or above; IBM Operations Manager; GDPS 4.5 for management of data recovery and virtual machine recovery across metro distance systems and storage, including Metro Multi-site workload and GDPS Global; and IBM DS8000 series storage with IBM HyperSwap. A MongoDB v4.2 workload was used. Necessary resiliency technology must be enabled, including z/VM Single System Image clustering, GDPS xDR Proxy for z/VM, and Red Hat OpenShift Data Foundation (ODF) 4.10 for management of local storage devices. Application-induced outages are not included in the above measurements. Other configurations (hardware or software) may provide different availability characteristics.</span></p>
			</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="1">
			<p><span><sup>4</sup> <b>DISCLAIMER</b>: Compared IBM LinuxONE 4 Express Model consisting of a CPC drawer and an I/O drawer to support network and external storage with 12 IFLs and 736 GB of memory in 1 frame, versus compared 3 x86 servers with two Xeon Sapphire Rapids Platinum 8444 processors with 32 cores each (2ch/32c) with a total of 384 cores. All Systems are modeled to be running Linux Postgres Enterprise-DB workloads with virtualization and DB tools. Results may vary based on client-specific usage and location. </span><span>LinuxONE hardware is the expected global price in $USD and discounts. X86 purchase price was included and maintenance costs is from IDC's Pricing Service: https://www.idc.com/myidc3/products with an aggressive discount. Postgres Enterprise-DB software and tools prices are based on street prices that is discounted from the list price. TCO is calculated over a 5-year horizon. Cost estimates include hardware costs and annual maintenance, Linux OS subscription costs, virtualization software, people cost, and infrastructure (network, energy, space) costs.</span></p>
			</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="1">
			<p><span><sup>5</sup> This price reflects the base hardware configuration, and does not include additional items, maintenance, the operating system or other software. All prices are in USD. Prices shown do not include tax. Price will vary based on country and currency.</span></p>
			</td>
		</tr>
		<tr>
			<td colspan="1" rowspan="1">
			<p><span><sup>6</sup> Systems will not initially be available in Argentina, Mexico, Peru, Indonesia, Taiwan, South Korea, India and China.</span></p>
			</td>
		</tr>
	</tbody>
</table>
</div>



<p><a href="https://mma.prnewswire.com/media/95470/ibm_logo.html" rel="nofollow" target="_blank"><img alt="IBM Corporation logo. (PRNewsfoto/IBM)" src="https://mma.prnewswire.com/media/95470/ibm_logo.jpg" title="IBM Corporation logo. (PRNewsfoto/IBM)"> </a></p>

<p>SOURCE IBM</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Demystifying GPU compute architectures (181 pts)]]></title>
            <link>https://thechipletter.substack.com/p/demystifying-gpu-compute-architectures</link>
            <guid>39279163</guid>
            <pubDate>Tue, 06 Feb 2024 19:20:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://thechipletter.substack.com/p/demystifying-gpu-compute-architectures">https://thechipletter.substack.com/p/demystifying-gpu-compute-architectures</a>, See on <a href="https://news.ycombinator.com/item?id=39279163">Hacker News</a></p>
<div id="readability-page-1" class="page"><div dir="auto"><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg" width="1200" height="797.8021978021978" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:968,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:272479,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F304b8eae-e3ec-4d5b-a673-75183232003c_1625x1080.jpeg 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>NVIDIA_GeForce_8800GTX_G80___DSC01200 via Fritzchens Fritz https://commons.wikimedia.org/w/index.php?curid=65926359</figcaption></figure></div><p>The complexity of modern GPUs needn’t obscure the essence of how these machines work. If we are to make the most of the advanced technology in these GPUs then we need a little less mystique.</p><p>I think this is one of the most exciting times in computer architecture for many years. In CPUs we have x86, Arm and RISC-V, three increasingly well-supported application architectures.</p><p>And GPU architectures are, of course, becoming much more important. GPUs are obviously a critical piece of machine learning infrastructure. They are also making massively parallel computing available to help solve a wider range of computational problems outside of machine learning.</p><p>There is one problem though. How GPU architectures work is much less widely understood than is the case for CPUs. CPUs are often complex, but much of that complexity (pipelines, instruction and data caches, branch prediction, out-of-order execution, register renaming, virtual memory and so on) is largely hidden from the user, and can often be ignored. Doing things in parallel, though, is inherently more complex and GPUs necessarily expose a lot of complexity.</p><p><span>There is also a degree of mystique about GPUs. The recent (and excellent) Acquired podcast </span><a href="https://www.acquired.fm/episodes/nvidia-the-dawn-of-the-ai-era" rel="">episode</a><span> on Nvidia stated that for GPUs: </span></p><blockquote><p>The magical unlock, of course, is to make a computer that is not a von Neumann architecture.</p></blockquote><p>I know the Acquired hosts didn't mean to imply that GPUs are ‘magical’ but still the use of the word in connection with GPUs somehow seems appropriate. GPUs don’t use a ‘von Neumann’ architecture. Instead thy use an unspecified, unnamed architecture, and if we don’t know what it is then its necessarily mysterious.</p><p>To make matters worse, there are several barriers to learning how GPUs work:</p><ul><li><p><strong>Architectural Variations:</strong><span> Each of the major GPU architectures has a somewhat different implementation.</span></p></li><li><p><strong>Inconsistent Terminology: </strong><span>The major GPU designers use inconsistent terminology, both between themselves and with terms commonly used for CPUs. So a CPU ‘core’ is very different to Nvidia’s ‘CUDA core’.</span></p></li><li><p><strong>Legacy Terminology:</strong><span> Some of the terms used are carried forward from the graphics origins of the GPU designs (e.g. ‘shaders’).</span></p></li><li><p><strong>Software Abstraction:</strong><span> Some GPU complexity can be hidden from the user behind the abstractions used by software packages used to program GPUs. This helps when implementing programs, but sometimes it prevents users from developing an adequate picture of how the architecture works.</span></p></li><li><p><strong>CUDA’s Dominance:</strong><span> Because Nvidia’s CUDA has been the market leader in GPU computing for many years now, the CUDA terminology tends to be used in many explanations making it hard to read across to other architectures.</span></p></li></ul><p>No wonder it all seems a bit mysterious. </p><p>But as GPUs become more important, this seems like an unsatisfactory state of affairs. Let’s try to cut through the mystery!</p><p>This post started out as a history of the architectures used for general purpose computing on Nvidia GPUs. However, I quickly changed course for two reasons:</p><ul><li><p>Just explaining one generation of architectures is complex. Attempting to describe a whole series of generations of architectures is complexity squared, and probably just too much!</p></li><li><p><span>There is already a awesome, detailed post by Fabien Sangland called </span><a href="https://fabiensanglard.net/cuda/index.html" rel="">A HISTORY OF NVIDIA STREAM MULTIPROCESSOR</a><span> that sets out the history of the development of Nvidia’s GPU general purpose computing architecture over the period 2006 to 2020.</span></p></li></ul><p>Just a word of warning about Fabien’s post though. It assumes a lot of prior knowledge about GPUs. Don’t worry if you don’t know what a ‘Streaming Multiprocessor’ is at this stage. All will, hopefully, become clear later! It’s worth scanning Fabien’s post, even if you’re not familiar with GPUs, to see how far Nvidia’s architectures have developed over this period.</p><p>Rather than repeat much of what Fabien has written, I decided that it would be more useful to provide a ‘ground up’ basic explanation of two recent architectures from Nvidia and AMD. </p><p>Before we move on though, I want to quote from Fabien’s post on how Nvidia’s general purpose compute architecture emerged:</p><blockquote><p>Up to 2006, Nvidia's GPU design was correlated to the logical stages in the rendering API. The GeForce 7900 GTX, powered by a G71 die is made of three sections dedicated to vertex processing (8 units), fragment generation (24 units), and fragment merging (16 units).</p></blockquote><blockquote><p>This correlation forced designers to guess the location of bottlenecks in order to properly balance each layers. With the emergence of yet another stage in DirectX 10, the geometry shader, Nvidia engineers found themselves faced with the difficult task of balancing a die without knowing how much a stage was going to be adopted. It was time for a change.</p></blockquote><blockquote><div><p><span>Nvidia solved the problem of escalating complexity with its "unified" Tesla architecture, released in 2006. </span></p><p><span>In the G80 die, there is no more distinction between layers. The Stream Multiprocessor (SM) replaces all previous units thanks to its ability to run vertex, fragment and geometry "kernel" without distinction. The load balancing happens automatically by swapping the "kernel" run by each SM depending on the need of the pipeline.</span></p></div></blockquote><p>And so the first of Nvidia’s modern ‘general purpose compute’ architectures was born.</p><blockquote><p><em><span>We pretty much threw out the entire shader architecture from NV30/NV40 and made a new one from scratch with a new general processor architecture (SIMT), that also introduced new processor design methodologies.</span><p><span>- Jonah Alben (Interview with extremetech.com)</span></p></em></p></blockquote><p>And quoting Fabien again:</p><blockquote><p>Tesla was a risky move which turned out to be a very Good Thing. It was so successful that it became the foundation of NVidia GPUs for the next two decades.</p></blockquote><p>And we now how much of a ‘Good Thing’ this has been for Nvidia, which as I write this, has a $1.6 trillion market cap:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png" width="1424" height="1334" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/dd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1334,&quot;width&quot;:1424,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:220051,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fdd34716b-558d-4612-a54a-ca97b0975f99_1424x1334.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>Nvidia has, by now, put in almost 18 years of development and investment, starting with the Tesla architecture, and including work on Nvidia’s famous  ‘Compute Unified Device Architecture’ or ‘CUDA’ introduced in 2007. We’ve discussed some aspects of Nvidia’s strategy before (the first is now free to read):</p><div data-component-name="DigestPostEmbed"><a href="https://thechipletter.substack.com/p/nvidias-embarrassingly-parallel-success" target="_blank" rel="noopener"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_140,h_140,c_fill,f_webp,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb44ffc64-11bf-40ea-a010-6553eb6f52e1_2048x1365.jpeg"><img src="https://substackcdn.com/image/fetch/w_140,h_140,c_fill,f_auto,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb44ffc64-11bf-40ea-a010-6553eb6f52e1_2048x1365.jpeg" sizes="100vw" alt="Nvidia's Embarrassingly Parallel Success" width="140" height="140"></picture></div></a></div><div data-component-name="DigestPostEmbed"><a href="https://thechipletter.substack.com/p/sustaining-nvidias-long-game" target="_blank" rel="noopener"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_140,h_140,c_fill,f_webp,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6302f984-c7be-4944-9f91-61127ce98af4_1280x854.jpeg"><img src="https://substackcdn.com/image/fetch/w_140,h_140,c_fill,f_auto,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6302f984-c7be-4944-9f91-61127ce98af4_1280x854.jpeg" sizes="100vw" alt="Sustaining Nvidia's Long Game" width="140" height="140"></picture></div></a></div><div data-component-name="DigestPostEmbed"><a href="https://thechipletter.substack.com/p/nvidia-and-the-longevity-of-technology" target="_blank" rel="noopener"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_140,h_140,c_fill,f_webp,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F73dc03e4-57bc-42f1-b092-c10702f6cb18_1166x720.jpeg"><img src="https://substackcdn.com/image/fetch/w_140,h_140,c_fill,f_auto,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F73dc03e4-57bc-42f1-b092-c10702f6cb18_1166x720.jpeg" sizes="100vw" alt="Nvidia and the Longevity of Technology Moats" width="140" height="140"></picture></div></a></div><div data-component-name="DigestPostEmbed"><a href="https://thechipletter.substack.com/p/no-one-ever-got-fired-for-buying" target="_blank" rel="noopener"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_140,h_140,c_fill,f_webp,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe11df9e3-1d4d-460d-8e01-fb749598da4b_700x509.jpeg"><img src="https://substackcdn.com/image/fetch/w_140,h_140,c_fill,f_auto,q_auto:good,fl_progressive:steep,g_auto/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe11df9e3-1d4d-460d-8e01-fb749598da4b_700x509.jpeg" sizes="100vw" alt="No one ever got fired for buying ... Nvidia" width="140" height="140"></picture></div></a></div><p data-attrs="{&quot;url&quot;:&quot;https://thechipletter.substack.com/p/demystifying-gpu-compute-architectures?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share&quot;,&quot;text&quot;:&quot;Share&quot;,&quot;action&quot;:null,&quot;class&quot;:null}" data-component-name="ButtonCreateButton"><a href="https://thechipletter.substack.com/p/demystifying-gpu-compute-architectures?utm_source=substack&amp;utm_medium=email&amp;utm_content=share&amp;action=share" rel=""><span>Share</span></a></p><p><strong>The rest of this post explains how general-purpose computing on modern GPUs works ‘from the bottom up’. We’ll start at the lowest level, with two major architectures, and then build up from there.</strong></p><p><span>I’ve chosen to look at both Nvidia (Hopper used in the H100 GPU) and AMD’s CDNA 2 (used in the Instinct MI200 GPU a version of which is used in </span><a href="https://en.wikipedia.org/wiki/Frontier_(supercomputer)" rel="">Frontier Supercomputer</a><span>) architectures and explain the common ground and the differences between these recent designs from each firm. We’ll focus particularly on clarifying some of the terminology used. We won’t consider the latest features built to accelerate machine learning, such as tensor cores. Instead, we’ll concentrate on the most ‘general purpose’ computing capabilities. </span></p><p>This is not a tutorial that will enable readers to get started writing programs on GPUs. Instead, if you want to do that, it’s intended as a supplement to help gain a better understanding of what is going on under the surface and the abstractions of a GPU program. </p><p>In any event, to properly understand a complex topic like how GPUs work, it’s really necessary to read lots of sources.  To help with this, the end of this post has lots of references and links to further articles and presentations for readers who would like to learn more about GPU computing.</p><p>We’ll start by looking at GPU compute hardware. We’ll group into three ‘Levels’ - my terminology, in the absence of a common naming convention across architectures, and nothing to do with ‘Cache Levels’.</p><p>We’ll start at the lowest level, with the basic building block of GPU architectures. Perhaps, surprisingly, this doesn’t seen to be given a memorable name by either Nvidia or AMD.</p><p>It contains a collection of compute resources that can perform a range of operations : integer, 32-bit or 64-bit floating point arithmetic, data loads and stores from or to memory and more.</p><p>We’ll start by focusing on Nvidia’s hardware. Let’s have a look at a schematic of what this basic building block looks like. Here is a diagram from Nvidia’s Hopper H100 Architecture White Paper.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png" width="556" height="660.046783625731" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:812,&quot;width&quot;:684,&quot;resizeWidth&quot;:556,&quot;bytes&quot;:686492,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F6591d365-380f-4ca7-86a8-5cbb5fb8b50a_684x812.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>The smallest boxes here with “INT32'“ or “FP32” or “FP64” represent the hardware or ‘execution units’ to perform single 32-bit integer, 32-bit floating point or 64-bit floating point operations. So in this case we have thirty-two 32-bit floating point execution units, and sixteen each of the 32-bit integer and 64-bit float execution units.</p><blockquote><p>As can be seen on the right there is also a ‘Tensor Core’ for the ‘tensor’ or ‘matrix’ operations required by many machine learning programs. We won’t discuss Tensor Cores further in this post.</p></blockquote><p>At the bottom of this schematic are execution units (‘LD/ST’) to perform ‘loads’ and ‘stores’ from and to memory.</p><p>We need to consider how these execution units are controlled. Let’s focus on the integer and floating point hardware. The first thing to emphasise is that multiple execution units are grouped together and all execute a single instruction at the same time, so that their operation as a group is similar to how ‘Single Instruction Multiple Data’ or ‘SIMD’ operations work on a CPU. In fact GPU makers will sometimes refer to their architectures as ‘SIMT’ for ‘Single Instruction Multiple Thread’.</p><p>An instruction might, for example, perform a single operation on, for example, a ‘vector’ (or array) of sixteen 64-bit floating point numbers or thirty-two 32-bit floating point numbers or thirty-two 32-bit integers.</p><p>There are some differences when compared to SIMD on a CPU though. Unlike a modern CPU though, there are lots of features, such as branch prediction or out-of-order execution, that these processors don’t implement. This makes them poor as ‘general purpose’ processors. However, avoiding the complexity of these features frees up lots of space to squeeze in more of these processors on a single silicon die.</p><p>If they aren’t as efficient as CPUs at some things, they are much better at one task: switching between different programs. Without branch prediction, for example, programs running on this hardware are much more likely to have to wait for either program code or data to be fetched from memory. If this happens, then to keep the processor busy it can quickly switch to another program that is waiting and ready to take over. The ‘retired’ program can then be quickly restarted when it has the data that it needs.</p><p>We need a name for each of the elements of this hardware that operates on one item of data out of the ‘Multiple Data’ that it’s presented with. We’ll call this a ‘SIMT Lane’, analogous to a lane in a motorway, with multiple lanes laid out in parallel to allow multiple streams of traffic to progress at the same time.</p><p>Let’s cover the remaining features of this basic building block of GPU architectures.</p><p>There is some memory in the form of a ‘Register File’ and some ‘L0 Instruction Cache’ memory. We’ll come back to registers and memory on the GPU later on.</p><p>There is what is called a ‘Warp Scheduler’ and a ‘Dispatch Unit’. We’ll explain what a ‘Warp’ is precisely later on, but essentially this is hardware that organises the running of multiple programs on the execution units.</p><p>Finally, there is the ‘Special Function Units’ or ‘SFUs’ that can be seen at the bottom right. These execute transcendental instructions such as sin, cosine, reciprocal, and square root.</p><p>AMD’s CDNA 2 architecture hardware at this level is quite similar to Nvidia’s but with some differences. For example it only has sixteen 32-bit floating point execution units. In most respects it operates in a similar way though. We’re not going to look at it in more detail at this point.</p><p>The next stage in building the GPU is to group a number of these ‘Level 1’ hardware units together. Both Nvidia and AMD group four of these together in what they call either a ’Streaming Multiprocessor’ (Nvidia) or ‘Compute Unit’ (AMD) respectively.</p><p>Here is Nvidia’s schematic for a Streaming Multiprocessor. Nvidia also adds some ‘L1 Instruction Cache’ and ‘L1 Data Cache’. There is more on ‘shared memory’ later. We can ignore the ‘Tensor Memory Accelerator’ and ‘Tex’.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png" width="1104" height="1530" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1530,&quot;width&quot;:1104,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:1884981,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F54570ab5-bd6b-4604-850b-c5ef762e38bb_1104x1530.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>And here is a representation of AMD’s Compute Unit. AMD adds ‘Matrix Core Units’, more memory and a ‘Scalar Unit’, a scalar processor, which is distinct and runs independently of the other execution units.</p><blockquote><p>‘Matrix Cores’ play a similar role to Nvidia’s Tensor Cores and are included to accelerate machine learning operations. We won’t discuss Matrix Cores further in this post.</p></blockquote><blockquote><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png" width="1200" height="375" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:455,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:102038,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4b5736cd-3a94-4651-a8f2-7a92e9fa3449_1806x564.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div></blockquote><p>Our final stage is to bring together multiple Streaming Multiprocessors (Nvidia) / Compute Units (AMD) together. The latest GPUs from the two architectures each bring together more than 100 Streaming Multiprocessors / Compute Units.</p><p>Here is a schematic representation of the Nvidia H100 with 144 Streaming Multiprocessors per GPU (click for an easier-to-read version of this image):</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png" width="1200" height="539.010989010989" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:false,&quot;imageSize&quot;:&quot;large&quot;,&quot;height&quot;:654,&quot;width&quot;:1456,&quot;resizeWidth&quot;:1200,&quot;bytes&quot;:1775505,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1c12efdc-9ea3-491d-af63-58d94dea42dc_2502x1124.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>And here is the AMD M200 with 112 Compute Units per GPU.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png" width="1234" height="1578" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:1578,&quot;width&quot;:1234,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:186097,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5bfb14bd-1a00-4744-89fe-4498df29b9e3_1234x1578.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p>In each case the Streaming Multiprocessors / Compute Units are accompanied by ‘L2 Cache’ and by hardware to facilitate fast communication with other parts of the system (including memory). This hardware may use HBM, PCIe or proprietary technology such as NVLink (Nvidia) or Infinity Fabric (AMD).</p><p><strong>Let’s briefly step back and consider just how much computational hardware one of these GPUs packs when compared to even the most powerful modern CPUs.</strong></p><p><strong>A leading AMD x86 CPU has 128 processor cores and has the floating-point execution units to perform (via AVX512 instructions) eight 32-bit floating-point calculations at a time. That’s 1,024 execution units per CPU. Contrast this with the 18,432 32-bit floating point execution units in Nvidia’s H100.</strong></p><p>After the break we’ll discuss GPU instruction sets and registers, memory and software.</p></div></div>]]></description>
        </item>
    </channel>
</rss>