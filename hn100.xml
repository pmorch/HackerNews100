<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Mon, 12 Aug 2024 16:30:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Show HN: PGlite ‚Äì in-browser WASM Postgres with pgvector and live sync (155 pts)]]></title>
            <link>https://pglite.dev/</link>
            <guid>41224689</guid>
            <pubDate>Mon, 12 Aug 2024 14:20:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pglite.dev/">https://pglite.dev/</a>, See on <a href="https://news.ycombinator.com/item?id=41224689">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-v-4d2e0cc9="" data-v-b447a6fc="" id="VPContent" data-v-52b0c991=""><!--[--><!--]--><div data-v-70d6fb81="" data-v-b447a6fc=""><div data-v-70d6fb81=""><!--[--><!--]--><!--[--><p data-v-70d6fb81="">Embeddable Postgres</p><p data-v-70d6fb81="">Run a full Postgres database locally in your app with reactivity and server sync</p><!--]--><!--[--><!--]--><div data-v-70d6fb81=""><!--[--><div data-v-70d6fb81=""><p><a href="https://pglite.dev/docs/" data-v-70d6fb81="" data-v-321d5de2="">Get Started</a></p></div><div data-v-70d6fb81=""><p><a href="https://github.com/electric-sql/pglite" target="_blank" rel="noreferrer" data-v-70d6fb81="" data-v-321d5de2="">Star on GitHub</a></p></div><!--]--></div><!--[--><!--]--></div><div data-v-f0e325c8="" data-v-70d6fb81=""><p><img src="https://pglite.dev/img/brand/icon-light.svg" data-v-f0e325c8=""></p><div data-v-f0e325c8=""><!--[--><p><img src="https://pglite.dev/img/brand/icon-light.svg" data-v-f0e325c8=""></p><p><img src="https://pglite.dev/img/brand/icon-light.svg" data-v-f0e325c8=""></p><p><img src="https://pglite.dev/img/brand/icon-light.svg" data-v-f0e325c8=""></p><p><img src="https://pglite.dev/img/brand/icon-light.svg" data-v-f0e325c8=""></p><p><img src="https://pglite.dev/img/brand/icon-light.svg" data-v-f0e325c8=""></p><!--]--></div></div></div><!--[--><!--]--><!--[--><!--]--><div data-v-97e2a943="" data-v-b447a6fc=""><!--[--><div data-v-97e2a943="" data-v-b5aa6769=""><!--[--><article data-v-b5aa6769=""><!----><h2 data-v-b5aa6769="">Lightweight</h2><p data-v-b5aa6769="">A complete WASM build of Postgres that's under 3MB Gzipped.</p><!----></article><!--]--></div><div data-v-97e2a943="" data-v-b5aa6769=""><!--[--><article data-v-b5aa6769=""><!----><h2 data-v-b5aa6769="">Extendable</h2><p data-v-b5aa6769="">Dynamic extension loading mechanism, including support for pgvector and PostGIS.</p><!----></article><!--]--></div><div data-v-97e2a943="" data-v-b5aa6769=""><!--[--><article data-v-b5aa6769=""><!----><h2 data-v-b5aa6769="">Reactive</h2><p data-v-b5aa6769="">Built in support for data loading, synchronisation and live query primitives.</p><!----></article><!--]--></div><!--]--></div><!--[--><!--]--><div data-v-29672710="" data-v-b447a6fc="" data-v-45370b1f=""><div data-v-29672710=""><div data-v-29672710=""><h3 data-v-29672710="">Experience PGlite with <a href="https://postgres.new/" data-v-29672710="">postgres.new</a></h3><p data-v-29672710=""> Create and publish a Postgres database using AI<br data-v-29672710=""> build on PGlite by <a href="https://supabase.com/" data-v-29672710="">Supabase</a></p></div><video controls="" poster="https://static.pglite.dev/videos/postgres-new-showcase-loop.png" data-v-29672710=""><source src="https://static.pglite.dev/videos/postgres-new-showcase-loop-1080p.mp4" type="video/mp4" data-v-29672710=""></video><p><a href="https://postgres.new/" data-v-29672710="">What would you like to create?</a></p></div><div data-v-29672710=""><div data-v-29672710=""><h3 data-v-29672710="">Try PGlite Now</h3><p data-v-29672710=""> This is a full PGlite Postgres running in your browser<br data-v-29672710=""> It even includes <a href="https://pglite.dev/extensions/#pgvector" data-v-29672710="">pgvector</a>!</p></div><!----><p><a href="https://pglite.dev/repl" data-v-29672710="">Try more extensions in the playground</a></p></div></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[There Is No Antimemetics Division (2018) (211 pts)]]></title>
            <link>https://qntm.org/scp</link>
            <guid>41224225</guid>
            <pubDate>Mon, 12 Aug 2024 13:37:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://qntm.org/scp">https://qntm.org/scp</a>, See on <a href="https://news.ycombinator.com/item?id=41224225">Hacker News</a></p>
Couldn't get https://qntm.org/scp: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA["Does astrology work? We tested the ability of 152 astrologers" (123 pts)]]></title>
            <link>https://threadreaderapp.com/thread/1822663687145972105.html</link>
            <guid>41224173</guid>
            <pubDate>Mon, 12 Aug 2024 13:32:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://threadreaderapp.com/thread/1822663687145972105.html">https://threadreaderapp.com/thread/1822663687145972105.html</a>, See on <a href="https://news.ycombinator.com/item?id=41224173">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-controller="mentions">

<div>
<p><a href="https://threadreaderapp.com/user/SpencrGreenberg"><img src="https://pbs.twimg.com/profile_images/1524915487657844736/nyy8e3Yy_bigger.jpg" alt="Spencer Greenberg üîç Profile picture" data-controller="twitter-profile" data-twtrid="440506882" data-action="error->twitter-profile#error"></a>
</p>

</div> 
<div id="tweet_1" data-controller="thread" data-action="click->thread#showTweet" data-screenname="SpencrGreenberg" data-tweet="1822663687145972105" dir="auto"><p>
Does astrology work? We tested the ability of 152 astrologers to see if they could demonstrate genuine astrological skill.</p><p>

Here is how the study was designed and what we found (including a result that really surprised me):</p><p>

üßµ <span><a href="https://pbs.twimg.com/media/GUtlavoWgAE_SrX.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtlavoWgAE_SrX.jpg"></a></span>
<sup><i></i></sup></p></div>
<p>
Back in January, we ran a study trying to predict 37 facts about people's lives using their astrological sun signs (whether they are Pisces, Aries, etc.) While personality tests were able to predict these facts decently well, sun signs couldn't predict even a single 1 of them... <span><a href="https://pbs.twimg.com/media/GUtlewTX0AAXspJ.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtlewTX0AAXspJ.jpg"></a></span>
<sup><i></i></sup>
</p>
<div id="tweet_3" data-controller="thread" data-action="click->thread#showTweet" data-screenname="SpencrGreenberg" data-tweet="1822663692892188890" dir="auto"><p>
Some astrologers criticized us for this, saying that sun signs/zodiac signs are just tabloid astrology - real astrologers use a person's entire astrological chart. </p><p>

And they're right! </p><p>

Taking into account this criticism, we got the help of 6 astrologers to design a new study. <span><a href="https://pbs.twimg.com/media/GUtlkzKXgAAYnMu.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtlkzKXgAAYnMu.jpg"></a></span>
<sup><i></i></sup></p></div>
<p>
Here's how the study worked to test astrologers:<br>
‚Ä¢ in each round, each astrologer gets LOTS of information about a real person (answers to 43 questions) along with 5 full astrological charts<br>
‚Ä¢ they then predict which is the person's real natal chart (the other 4 are decoys) <span><a href="https://pbs.twimg.com/media/GUtlnpvXwAAxqj_.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtlnpvXwAAxqj_.jpg"></a></span>
<sup><i></i></sup>
</p>
<div id="tweet_5" data-controller="thread" data-action="click->thread#showTweet" data-screenname="SpencrGreenberg" data-tweet="1822663698378281055" dir="auto"><p>
Why this study design?</p><p>

One of the most fundamental claims of astrology is that a person's natal chart contains information about that person's life and character. </p><p>

If true, astrologers should be able to correctly choose a person's chart at a rate well above random guessing.
<sup><i></i></sup></p></div>
<p>
Each astrologer tries to match people to their correct chart 12 times. If they're guessing completely at random (e.g., they have no skill because astrology doesn't actually work), then they'll get about 20% of questions right, or about 2.4 questions right (on average) out of 12.
<sup><i></i></sup>
</p>
<p>
Neat aspects of this study design are that (1) if astrology doesn't work, it's impossible for astrologers to do better than random guessing at this task, while (2) for the study to come out in support of astrology, astrologers only need to do slightly better than random guessing
<sup><i></i></sup>
</p>
<p>
But this is only a fair test if astrologers believe they can do this task - so we limit our analyses only to participants with prior astrological experience who predicted they would do better than random guessing at the task. Our results are based on 152 such astrologers. <span><a href="https://pbs.twimg.com/media/GUtmg8mXgAAB0vD.png" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtmg8mXgAAB0vD.png"></a></span>
<sup><i></i></sup>
</p>
<p>
These astrologers were quite confident in their ability to match people to charts. Those with the least experience believed (after they had completed participation) that they'd gotten 5 out of 12 right, and those with the most experience thought they'd gotten 10 out of 12 right. <span><a href="https://pbs.twimg.com/media/GUtly4lWQAANEmC.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtly4lWQAANEmC.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
So, how did astrologers do overall? If they'd gotten even 23% of questions right (slightly above the 20% of random guessing), the study would have come out in favor of astrology. But astrologers as a group performed indistinguishable from random guessing, getting &lt; 21% right. <span><a href="https://pbs.twimg.com/media/GUtl1yEWUAAiTx-.png" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtl1yEWUAAiTx-.png"></a></span>
<sup><i></i></sup>
</p>
<div id="tweet_11" data-controller="thread" data-action="click->thread#showTweet" data-screenname="SpencrGreenberg" data-tweet="1822663714056626636" dir="auto"><p>
We can compare how frequently astrologers got different numbers of questions correct to how often we'd expect them to get different numbers correct if they were all guessing totally at random with no skill. </p><p>

The two distributions match very closely. <span><a href="https://pbs.twimg.com/media/GUtl3RpWUAAIHsz.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtl3RpWUAAIHsz.jpg"></a></span>
<sup><i></i></sup></p></div>
<div id="tweet_12" data-controller="thread" data-action="click->thread#showTweet" data-screenname="SpencrGreenberg" data-tweet="1822663716669739369" dir="auto"><p>
But perhaps the less experienced astrologers were just dragging down the performance of the group? </p><p>

We looked at how performance varied based on astrological experience. More experienced astrologers did not do better than less experienced ones despite being far more confident. <span><a href="https://pbs.twimg.com/media/GUtl6j7XMAAOHDo.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtl6j7XMAAOHDo.jpg"></a></span>
<sup><i></i></sup></p></div>
<p>
Even if most astrologers have no skill, there's another way astrology could prove itself. If even 1 of the 152 astrologers performed exceptionally well, that could provide meaningful evidence for astrology. We offered a $1000 prize for anyone getting at least 11 out of 12.
<sup><i></i></sup>
</p>
<p>
Unfortunately, despite more than half of the astrologers believing that they had gotten 6 or more questions right (after completing the task), in actual fact, not a single astrologer got more than 5 right. <span><a href="https://pbs.twimg.com/media/GUtmlDpW8AAaydi.png" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtmlDpW8AAaydi.png"></a></span>
<sup><i></i></sup>
</p>
<p>
Okay, so despite them believing they could do this task, astrologers seemed to have no ability to match people to their astrological charts. But, even if they aren't getting the answers right, do they at least agree with each other on what the right answers are?
<sup><i></i></sup>
</p>
<p>
Much to my surprise, astrologers had very low agreement with each other on the chart for each person. If astrologers picked charts at random, they would agree with each other 20% of the time. In our study, even the most experienced astrologers only agreed 28% of the time. <span><a href="https://pbs.twimg.com/media/GUtmqoJXIAAEizC.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/GUtmqoJXIAAEizC.jpg"></a></span>
<sup><i></i></sup>
</p>
<div id="tweet_17" data-controller="thread" data-action="click->thread#showTweet" data-screenname="SpencrGreenberg" data-tweet="1822663729407791572" dir="auto"><p>
In conclusion, despite believing they could do it, the 152 astrologers seemed to lack any ability to match people to their astrological charts.</p><p>

You can learn a lot more about the study (including its limitations and how we sought to address them) here:</p><p>

<a data-preview="true" href="https://www.clearerthinking.org/post/can-astrologers-use-astrological-charts-to-understand-people-s-character-and-lives-our-new-study-pu">clearerthinking.org/post/can-astro‚Ä¶</a>
<sup><i></i></sup></p></div>
<div id="tweet_18" data-controller="thread" data-action="click->thread#showTweet" data-screenname="SpencrGreenberg" data-tweet="1822663731660341572" dir="auto"><p>
If you believe you have astrological skill, you can try the same questions that we used in the study (and find out the right answers at the end) in order to test yourself:</p><p>



We also open-sourced the data from the study if you want to analyze it.<a data-preview="true" href="https://programs.clearerthinking.org/astrology_challenge.html">programs.clearerthinking.org/astrology_chal‚Ä¶</a>
<sup><i></i></sup></p></div>
<div id="tweet_19" data-controller="thread" data-action="click->thread#showTweet" data-screenname="SpencrGreenberg" data-tweet="1822715786605281443" dir="auto"><p>
If you found this interesting, I'd appreciate a follow at @SpencrGreenberg !</p><p>

You may also enjoy my newsletter (One Helpful Idea) - where I send out one idea weekly (a 30 sec read) about psychology, philosophy, or society:</p><p>

<a data-preview="true" href="http://www.bit.ly/onehelpfulidea">bit.ly/onehelpfulidea</a>
<sup><i></i></sup></p></div>
<p>‚Ä¢ ‚Ä¢ ‚Ä¢</p>
<p><span>
Missing some Tweet in this thread? You can try to
<a id="force-click" href="#" data-category="refresh" data-action="1822663687145972105">force a refresh</a>
</span>
</p>
„ÄÄ
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Okay, I Like WezTerm (240 pts)]]></title>
            <link>https://alexplescan.com/posts/2024/08/10/wezterm/</link>
            <guid>41223934</guid>
            <pubDate>Mon, 12 Aug 2024 13:02:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://alexplescan.com/posts/2024/08/10/wezterm/">https://alexplescan.com/posts/2024/08/10/wezterm/</a>, See on <a href="https://news.ycombinator.com/item?id=41223934">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="main">
        <article role="article">
  

  <div><p>A while back <a href="https://blog.lambo.land/">my friend</a> recommended that I try <a href="https://wezfurlong.org/wezterm/">WezTerm</a>. I‚Äôd been an iTerm 2 stalwart for the better part of a decade, but not to be <em>too</em> narrow-minded I conceded, started it up, and saw this:</p>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/01_default_look-720-7c9bad525.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/01_default_look-1440-7c9bad525.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/01_default_look-1520-7c9bad525.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/01_default_look-720-7c9bad525.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/01_default_look-1440-7c9bad525.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/01_default_look-1520-7c9bad525.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/01_default_look-800-dd3151c15.png" alt="screenshot of WezTerm's default look"></picture>

<p>Does the job, sure, but doesn‚Äôt feel quite right. Okay then, experiment over. Back to iTerm‚Ä¶</p>

<p>Fast forward a couple of months and I got the itch to try a new terminal again. I wanted to use one whose config was entirely text based so I could pop it in to my dotfiles and share it across my work and personal machines. A few terminals already do this, but whispers of WezTerm‚Äôs powerful API and Lua config got me particularly interested.</p>

<p>I tried it again with a bit more patience and I‚Äôm glad I did. My terminal is prettier than it‚Äôs ever been, more functional, and I can finally justify my mechanical keyboard purchase with all the keybindings I‚Äôve configured.</p>

<p>This post is an introduction to configuring WezTerm based on the setup that I eventually landed on. I‚Äôd consider it relatively low-frills. Most of what I talk about here can already be found in WezTerm‚Äôs <a href="https://wezfurlong.org/wezterm/config/lua/general.html">docs</a>, but as they‚Äôve got a large surface area, I‚Äôm hoping this post will be a useful jumping off point for WezTerm beginners.</p>

<p>We <em>won‚Äôt</em> be looking at some of WezTerm‚Äôs key features, like custom hyperlinks highlighting rules, searchable scrollback, quick copy mode, and image support (you can find <a href="https://wezfurlong.org/wezterm/features.html">more details here</a>).</p>

<p>The feature I find most exciting about WezTerm is the flexibility of its Lua config, so we‚Äôll be focusing on that. This includes configuring appearance, keybindings, multiplexing, workspace navigation, status bar setup, and dynamic theming. By the end of it all, we‚Äôll have a terminal that looks like this:</p>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/02_pretty_look-720-7c6c65470.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/02_pretty_look-1440-7c6c65470.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/02_pretty_look-1518-7c6c65470.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/02_pretty_look-720-7c6c65470.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/02_pretty_look-1440-7c6c65470.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/02_pretty_look-1518-7c6c65470.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/02_pretty_look-800-df2e5e6df.png" alt="screenshot of the WezTerm look we'll end up with at the end of this post"></picture>

<p>Subtly prettier than the default, and with some great features to boot.</p>

<p>I use macOS, so what follows is focused on ergonomics that make WezTerm great there. I haven‚Äôt tested my config on other systems, but I‚Äôm not doing anything too bespoke so things should be portable (WezTerm works pretty much everywhere).</p>

<p><strong>tl;dr</strong>? Here‚Äôs <a href="https://gist.github.com/alexpls/83d7af23426c8928402d6d79e72f9401">a gist</a> containing the config we‚Äôll end up with.</p>

<h2 id="pre-flight-checks">Pre-flight checks</h2>

<p>Start by installing WezTerm. Instructions for this are on <a href="https://wezfurlong.org/wezterm/installation.html">WezTerm‚Äôs site</a>. If you‚Äôre on macOS and reading this you probably have Homebrew installed, so <code>$ brew install wezterm</code> will do the trick.</p>

<p>Now launch WezTerm, and you‚Äôre already winning.</p>

<h3 id="a-note-on-lua">A note on Lua</h3>

<p>My favourite WezTerm feature is its use of Lua for defining config. Unlike terminals where your settings are adjusted via the UI (iTerm 2), your WezTerm config lives in your dotfiles and is portable across all your machines.</p>

<p>And unlike other terminals where your configuration is written using a data serialization format like YAML or TOML (Alacritty, kitty), with Lua you can more easily achieve complex configs by leveraging dynamic scripts.</p>

<p>Granted, Lua is a programming language so it is trickier to learn than YAML or TOML, but it‚Äôs still remarkably simple. If you‚Äôve used another dynamic programming language (e.g. Ruby, Python, JavaScript) - you should be able to read the Lua code in this post easily. For achieving more complex configs, I‚Äôd recommend diving deeper into the language. Its <a href="https://www.lua.org/start.html">Getting Started guide</a> is a good place to‚Ä¶ get started.</p>

<h3 id="config-files-and-the-best-feedback-loop-in-town">Config files, and the best feedback loop in town</h3>

<p>WezTerm supports loading in its config from all the usual places on your system (<a href="https://wezfurlong.org/wezterm/config/files.html#configuration-files">docs</a>). For this guide we‚Äôre going to be creating our config in <code>$XDG_CONFIG_HOME/wezterm/wezterm.lua</code>. On most systems (including macOS) this resolves to <code>~/.config/wezterm/wezterm.lua</code>. Using a directory to store our config instead of dumping it in <code>~/.wezterm.lua</code> will let us keep our config logically grouped as we split some of it out into different files.</p>

<p>Create the <code>wezterm.lua</code> file on that path, and add this boilerplate to it:</p>

<div><pre><code><span>-- Import the wezterm module</span>
<span>local</span> <span>wezterm</span> <span>=</span> <span>require</span> <span>'wezterm'</span>
<span>-- Creates a config object which we will be adding our config to</span>
<span>local</span> <span>config</span> <span>=</span> <span>wezterm</span><span>.</span><span>config_builder</span><span>()</span>

<span>-- (This is where our config will go)</span>

<span>-- Returns our config to be evaluated. We must always do this at the bottom of this file</span>
<span>return</span> <span>config</span>
</code></pre></div>

<p>Save the file and all going well‚Ä¶ nothing will happen. Well, at least nothing <em>appeared</em> to happen, but what WezTerm did behind the scenes is quite magical. It watched your config file, and when it changed it auto-reloaded instantly. This feature makes for a wonderfully tight feedback loop where you don‚Äôt need to restart your terminal to see the effects of your new config.</p>

<p>We can quickly test this auto-reload by adding some invalid syntax and seeing what happens. Replace the call to <code>wezterm.config_builder()</code> with <code>wezterm.config_builderZ()</code>, save, and you should immediately see a window pop-up with:</p>

<div><pre><code>runtime error: [string "/Users/alex/.config/wezterm/wezterm.lua"]:2: attempt
to call a nil value (field 'config_builderZ')
stack traceback:
        [string "/Users/alex/.config/wezterm/wezterm.lua"]:2: in main chunk
</code></pre></div>

<p>How‚Äôs that for a feedback loop? Fix the error and save the file again.</p>

<p>This time, have your config log something:</p>

<div><pre><code><span>wezterm</span><span>.</span><span>log_info</span><span>(</span><span>"hello world! my name is "</span> <span>..</span> <span>wezterm</span><span>.</span><span>hostname</span><span>())</span>
</code></pre></div>

<p>Save. Now‚Ä¶ where did that log go? Press <code>CTRL + SHIFT + L</code> to bring up the debug overlay (<a href="https://wezfurlong.org/wezterm/troubleshooting.html#debug-overlay">docs</a>) and lo and behold, your beautiful log was waiting for you all along. Not only that but what you‚Äôre looking at is a full Lua REPL. Enter <code>1 + 1</code> and you‚Äôll see the result. Enter <code>wezterm.home_dir</code> and you‚Äôll see the result of accessing the <code>home_dir</code> entry on the <code>wezterm</code> module (<a href="https://wezfurlong.org/wezterm/config/lua/wezterm/home_dir.html">docs</a>).</p>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/03_debug_overlay-720-5d57e63cc.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/03_debug_overlay-1440-5d57e63cc.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/03_debug_overlay-1520-5d57e63cc.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/03_debug_overlay-720-5d57e63cc.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/03_debug_overlay-1440-5d57e63cc.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/03_debug_overlay-1520-5d57e63cc.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/03_debug_overlay-800-31f78c8d4.png" alt="screenshot of the WezTerm's debug overlay"></picture>

<p>The combination of hot reloading and the debug overlay makes experimenting with WezTerm configs extremely low friction and low consequence. The feedback loop is so tight now it‚Äôs more like a feedback lp.</p>

<h2 id="configuring-appearance">Configuring appearance</h2>

<p>Okay enough gushing - let‚Äôs cut to the chase and make this thing prettier. Add a few lines to the config to start customising the look of the terminal. We‚Äôll start with a colour scheme (<a href="https://wezfurlong.org/wezterm/config/appearance.html">docs</a>):</p>

<div><pre><code><span>-- Pick a colour scheme. WezTerm ships with more than 1,000!</span>
<span>-- Find them here: https://wezfurlong.org/wezterm/colorschemes/index.html</span>
<span>config</span><span>.</span><span>color_scheme</span> <span>=</span> <span>'Tokyo Night'</span>
</code></pre></div>

<p>Save, and you should immediately see it update. Thanks Wez!</p>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/04_colour_scheme-720-5ed5e3bf1.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/04_colour_scheme-1440-5ed5e3bf1.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/04_colour_scheme-1520-5ed5e3bf1.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/04_colour_scheme-720-5ed5e3bf1.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/04_colour_scheme-1440-5ed5e3bf1.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/04_colour_scheme-1520-5ed5e3bf1.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/04_colour_scheme-800-b30942129.png" alt="screenshot of applying a colour scheme to WezTerm"></picture>

<p>(if the hot config reload doesn‚Äôt work for whatever reason, you can manually reload it by pressing <code>CMD + R</code>).</p>

<h3 id="many-colours-all-at-once">Many colours, all at once</h3>

<p>With over 1,000 colour choices to choose from, it‚Äôs tough to decide on your favourite. Why not outsource that work to your computer? Let‚Äôs explore the power of WezTerm‚Äôs dynamic config by randomly assigning a colour scheme for each new window you open:</p>

<div><pre><code><span>-- Creates a lua table containing the name of every color scheme WezTerm</span>
<span>-- ships with.</span>
<span>local</span> <span>scheme_names</span> <span>=</span> <span>{}</span>
<span>for</span> <span>name</span><span>,</span> <span>scheme</span> <span>in</span> <span>pairs</span><span>(</span><span>wezterm</span><span>.</span><span>color</span><span>.</span><span>get_builtin_schemes</span><span>())</span> <span>do</span>
  <span>table.insert</span><span>(</span><span>scheme_names</span><span>,</span> <span>name</span><span>)</span>
<span>end</span>

<span>-- When the config for a window is reloaded (i.e. when you save this file</span>
<span>-- or open a new window)...</span>
<span>wezterm</span><span>.</span><span>on</span><span>(</span><span>'window-config-reloaded'</span><span>,</span> <span>function</span><span>(</span><span>window</span><span>,</span> <span>pane</span><span>)</span>
  <span>-- Don't proceed if the config has already been overriden, otherwise</span>
  <span>-- we'll enter an infinite loop of neverending colour scheme changes.</span>
  <span>-- If that sounds like your kinda thing, then remove this line ;) - but</span>
  <span>-- don't say you haven't been warned.</span>
  <span>if</span> <span>window</span><span>:</span><span>get_config_overrides</span><span>()</span> <span>then</span> <span>return</span> <span>end</span>
  <span>-- Pick a random colour scheme name.</span>
  <span>local</span> <span>scheme</span> <span>=</span> <span>scheme_names</span><span>[</span><span>math.random</span><span>(</span><span>#</span><span>scheme_names</span><span>)]</span>
  <span>-- Assign it as an override for this window.</span>
  <span>window</span><span>:</span><span>set_config_overrides</span> <span>{</span> <span>color_scheme</span> <span>=</span> <span>scheme</span> <span>}</span>
  <span>-- And log it for good measure</span>
  <span>wezterm</span><span>.</span><span>log_info</span><span>(</span><span>"Your colour scheme is now: "</span> <span>..</span> <span>scheme</span><span>)</span>
<span>end</span><span>)</span>
</code></pre></div>

<p>Open up a few windows (<code>CMD + N</code> on macOS) and each one will have a different colour scheme. A cornucopia of terminals, each more surprising than the last. We, my friends, are truly innovating now.</p>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/05_cornucopia-720-bfc375d64.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/05_cornucopia-1440-bfc375d64.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/05_cornucopia-1520-bfc375d64.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/05_cornucopia-720-bfc375d64.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/05_cornucopia-1440-bfc375d64.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/05_cornucopia-1520-bfc375d64.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/05_cornucopia-800-06950f034.png" alt="screenshot of many WezTerm terminal windows, each with a distinctive colour scheme"></picture>

<p>But really, that was kind of a dumb idea meant to prove a point. Now that you‚Äôve gotten a taste for dynamic config, you probably wanna remove those lines and stick to a colour scheme you <em>do</em> like.</p>

<p>(You may find that after you remove that code and add your static <code>color_scheme</code> config back in, it doesn‚Äôt hot reload. That‚Äôs because our script set an <em>override</em> on the config specific to each window. To clear your overrides, you can go to your debug terminal and type <code>window:set_config_overrides({})</code> - or you can just close and reopen your WezTerm window).</p>

<h3 id="respecting-the-systems-appearance">Respecting the system‚Äôs appearance</h3>

<p>Light themes, dark themes‚Ä¶ why not both? Let‚Äôs have the terminal‚Äôs colour scheme automatically change when the operating system‚Äôs appearance changes. While we‚Äôre at it, we‚Äôll learn how to split up WezTerm config into different modules.</p>

<p>Create a new file alongside <code>wezterm.lua</code> and call it <code>appearance.lua</code>. Add this to it:</p>

<div><pre><code><span>-- We almost always start by importing the wezterm module</span>
<span>local</span> <span>wezterm</span> <span>=</span> <span>require</span> <span>'wezterm'</span>
<span>-- Define a lua table to hold _our_ module's functions</span>
<span>local</span> <span>module</span> <span>=</span> <span>{}</span>

<span>-- Returns a bool based on whether the host operating system's</span>
<span>-- appearance is light or dark.</span>
<span>function</span> <span>module</span><span>.</span><span>is_dark</span><span>()</span>
  <span>-- wezterm.gui is not always available, depending on what</span>
  <span>-- environment wezterm is operating in. Just return true</span>
  <span>-- if it's not defined.</span>
  <span>if</span> <span>wezterm</span><span>.</span><span>gui</span> <span>then</span>
    <span>-- Some systems report appearance like "Dark High Contrast"</span>
    <span>-- so let's just look for the string "Dark" and if we find</span>
    <span>-- it assume appearance is dark.</span>
    <span>return</span> <span>wezterm</span><span>.</span><span>gui</span><span>.</span><span>get_appearance</span><span>():</span><span>find</span><span>(</span><span>"Dark"</span><span>)</span>
  <span>end</span>
  <span>return</span> <span>true</span>
<span>end</span>

<span>return</span> <span>module</span>
</code></pre></div>

<p>Back in <code>wezterm.lua</code>:</p>

<div><pre><code><span>-- Import our new module (put this near the top of your wezterm.lua)</span>
<span>local</span> <span>appearance</span> <span>=</span> <span>require</span> <span>'appearance'</span>

<span>-- Use it!</span>
<span>if</span> <span>appearance</span><span>.</span><span>is_dark</span><span>()</span> <span>then</span>
  <span>config</span><span>.</span><span>color_scheme</span> <span>=</span> <span>'Tokyo Night'</span>
<span>else</span>
  <span>config</span><span>.</span><span>color_scheme</span> <span>=</span> <span>'Tokyo Night Day'</span>
<span>end</span>
</code></pre></div>

<p>Toggle your system appearance between dark mode and light mode, and watch your theme change right before your eyes.</p>

<!-- hackily putting this into a p to have the margin to next heading look good. need to review
     stylesheet to fix this properly -->
<p><picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/06_light_v_dark-720-807cf36b1.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/06_light_v_dark-1440-807cf36b1.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/06_light_v_dark-1520-807cf36b1.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/06_light_v_dark-720-807cf36b1.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/06_light_v_dark-1440-807cf36b1.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/06_light_v_dark-1520-807cf36b1.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/06_light_v_dark-800-1e54dcccb.png" alt="screenshot of WezTerm in light and dark mode"></picture>
</p>

<h3 id="fonts">Fonts</h3>

<p>Next up let‚Äôs look at fonts. WezTerm ships with the lovely JetBrains Mono, and Nerd Font Symbols (<a href="https://wezfurlong.org/wezterm/config/fonts.html">docs</a>) so there‚Äôs nothing to complain about there. I do prefer Berkeley Mono at 13 points though, so:</p>

<div><pre><code><span>-- Choose your favourite font, make sure it's installed on your machine</span>
<span>config</span><span>.</span><span>font</span> <span>=</span> <span>wezterm</span><span>.</span><span>font</span><span>({</span> <span>family</span> <span>=</span> <span>'Berkeley Mono'</span> <span>})</span>
<span>-- And a font size that won't have you squinting</span>
<span>config</span><span>.</span><span>font_size</span> <span>=</span> <span>13</span>
</code></pre></div>

<p>There‚Äôs good support for ligatures and other fancy font settings if you‚Äôre into that (<a href="https://wezfurlong.org/wezterm/config/font-shaping.html">docs</a>), but I‚Äôm not so let‚Äôs move on.</p>

<h3 id="window-styling">Window styling</h3>

<p>Let‚Äôs style our terminal‚Äôs window. This controls the chrome that appears around it, and can vary between operating systems. On macOS, I like the below:</p>

<div><pre><code><span>-- Slightly transparent and blurred background</span>
<span>config</span><span>.</span><span>window_background_opacity</span> <span>=</span> <span>0</span><span>.</span><span>9</span>
<span>config</span><span>.</span><span>macos_window_background_blur</span> <span>=</span> <span>30</span>
<span>-- Removes the title bar, leaving only the tab bar. Keeps</span>
<span>-- the ability to resize by dragging the window's edges.</span>
<span>-- On macOS, 'RESIZE|INTEGRATED_BUTTONS' also looks nice if</span>
<span>-- you want to keep the window controls visible and integrate</span>
<span>-- them into the tab bar.</span>
<span>config</span><span>.</span><span>window_decorations</span> <span>=</span> <span>'RESIZE'</span>
<span>-- Sets the font for the window frame (tab bar)</span>
<span>config</span><span>.</span><span>window_frame</span> <span>=</span> <span>{</span>
  <span>-- Berkeley Mono for me again, though an idea could be to try a</span>
  <span>-- serif font here instead of monospace for a nicer look?</span>
  <span>font</span> <span>=</span> <span>wezterm</span><span>.</span><span>font</span><span>({</span> <span>family</span> <span>=</span> <span>'Berkeley Mono'</span><span>,</span> <span>weight</span> <span>=</span> <span>'Bold'</span> <span>}),</span>
  <span>font_size</span> <span>=</span> <span>11</span><span>,</span>
<span>}</span>
</code></pre></div>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/07_window_styling-720-87031f878.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/07_window_styling-1440-87031f878.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/07_window_styling-1520-87031f878.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/07_window_styling-720-87031f878.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/07_window_styling-1440-87031f878.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/07_window_styling-1520-87031f878.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/07_window_styling-800-4b12b9e39.png" alt="screenshot of WezTerm after we've styled its window"></picture>

<p>Now, let‚Äôs do something a little kitsch. See that empty space to the right of our terminal‚Äôs tab bar? Let‚Äôs fill it with a powerline looking status bar. We‚Äôll add an <code>update-status</code> callback:</p>

<div><pre><code><span>wezterm</span><span>.</span><span>on</span><span>(</span><span>'update-status'</span><span>,</span> <span>function</span><span>(</span><span>window</span><span>)</span>
  <span>-- Grab the utf8 character for the "powerline" left facing</span>
  <span>-- solid arrow.</span>
  <span>local</span> <span>SOLID_LEFT_ARROW</span> <span>=</span> <span>utf8.char</span><span>(</span><span>0xe0b2</span><span>)</span>

  <span>-- Grab the current window's configuration, and from it the</span>
  <span>-- palette (this is the combination of your chosen colour scheme</span>
  <span>-- including any overrides).</span>
  <span>local</span> <span>color_scheme</span> <span>=</span> <span>window</span><span>:</span><span>effective_config</span><span>().</span><span>resolved_palette</span>
  <span>local</span> <span>bg</span> <span>=</span> <span>color_scheme</span><span>.</span><span>background</span>
  <span>local</span> <span>fg</span> <span>=</span> <span>color_scheme</span><span>.</span><span>foreground</span>

  <span>window</span><span>:</span><span>set_right_status</span><span>(</span><span>wezterm</span><span>.</span><span>format</span><span>({</span>
    <span>-- First, we draw the arrow...</span>
    <span>{</span> <span>Background</span> <span>=</span> <span>{</span> <span>Color</span> <span>=</span> <span>'none'</span> <span>}</span> <span>},</span>
    <span>{</span> <span>Foreground</span> <span>=</span> <span>{</span> <span>Color</span> <span>=</span> <span>bg</span> <span>}</span> <span>},</span>
    <span>{</span> <span>Text</span> <span>=</span> <span>SOLID_LEFT_ARROW</span> <span>},</span>
    <span>-- Then we draw our text</span>
    <span>{</span> <span>Background</span> <span>=</span> <span>{</span> <span>Color</span> <span>=</span> <span>bg</span> <span>}</span> <span>},</span>
    <span>{</span> <span>Foreground</span> <span>=</span> <span>{</span> <span>Color</span> <span>=</span> <span>fg</span> <span>}</span> <span>},</span>
    <span>{</span> <span>Text</span> <span>=</span> <span>' '</span> <span>..</span> <span>wezterm</span><span>.</span><span>hostname</span><span>()</span> <span>..</span> <span>' '</span> <span>},</span>
  <span>}))</span>
<span>end</span><span>)</span>
</code></pre></div>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/08_status_bar-720-716b8e09a.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/08_status_bar-1440-716b8e09a.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/08_status_bar-1520-716b8e09a.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/08_status_bar-720-716b8e09a.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/08_status_bar-1440-716b8e09a.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/08_status_bar-1520-716b8e09a.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/08_status_bar-800-7eee51cfe.png" alt="screenshot of WezTerm with a right status bar showing the system's hostname"></picture>

<p>A few interesting things happening here:</p>
<ol>
  <li>We just used WezTerm‚Äôs events API with <code>wezterm.on</code>. Events are things that happen to the terminal (e.g. window resize) that we can define callbacks for. The <code>update-status</code> event is emitted periodically when the terminal is ready to have its status updated. WezTerm manages this cleverly to ensure that only one such update can run at any given time, and if your code takes too long to execute, a timeout will be hit and your handler will be abandoned‚Ä¶ protecting your terminal from bogging down.</li>
  <li>We‚Äôre grabbing the <code>effective_config()</code> of the window to get the ‚Äúeffective‚Äù configuration, which is the config with any overrides applied. From this we can get the <code>resolved_palette</code>, which is the currently active colour scheme. To see what this data looks like you can enter the debug overlay (<code>CTRL + SHIFT + L</code>) and execute <code>window:effective_config().resolved_palette</code>.</li>
  <li>We‚Äôre using the <code>wezterm.format</code> function (<a href="https://wezfurlong.org/wezterm/config/lua/wezterm/format.html">docs</a>) to style our string with colours. Other ways you could format text include setting font weight, underlining text, and more.</li>
  <li>Finally, the <code>wezterm.hostname()</code> function (<a href="https://wezfurlong.org/wezterm/config/lua/wezterm/hostname.html">docs</a>) gives us the hostname of the machine we‚Äôre running on. WezTerm ships with a bunch of useful functions for getting the state of your system, and also‚Ä¶ we‚Äôre doing stuff in Lua - so you have full access to your file system, are able to make network requests, etc.</li>
</ol>

<p>Altogether this gives us a powerline‚Ä¶ish. It‚Äôs a bit sad with only one segment isn‚Äôt it? Don‚Äôt you worry, we‚Äôll be adding more soon‚Ä¶</p>

<h2 id="keys">Keys</h2>

<p>Here‚Äôs the part where we justify our mechanical keyboard purchases. Let‚Äôs set up some key assignments. During this section we‚Äôll look at WezTerm‚Äôs deep key handling capabilities and ability to take action based on your input.</p>

<p>By default, WezTerm defines some standard key assignments (<a href="https://wezfurlong.org/wezterm/config/default-keys.html">docs</a>). I leave them on because they‚Äôre very sensible, but if you wanna <em>really</em> wrest total control of your config, you can turn them off with <code>config.disable_default_key_bindings = true</code>.</p>

<p>Our first key assignment will be a humble start for us macOS users‚Ä¶ you might be used to <code>Option + Left Arrow</code> and <code>Option + Right Arrow</code> jumping between words on your terminal. That‚Äôs the default in iTerm 2 and Terminal.app, but not in WezTerm. However, we can map it!</p>

<p>We do this by adding a <code>keys</code> table to our <code>config</code>:</p>

<div><pre><code><span>-- Table mapping keypresses to actions</span>
<span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- Sends ESC + b and ESC + f sequence, which is used</span>
  <span>-- for telling your shell to jump back/forward.</span>
  <span>{</span>
    <span>-- When the left arrow is pressed</span>
    <span>key</span> <span>=</span> <span>'LeftArrow'</span><span>,</span>
    <span>-- With the "Option" key modifier held down</span>
    <span>mods</span> <span>=</span> <span>'OPT'</span><span>,</span>
    <span>-- Perform this action, in this case - sending ESC + B</span>
    <span>-- to the terminal</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>SendString</span> <span>'\x1bb'</span><span>,</span>
  <span>},</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'RightArrow'</span><span>,</span>
    <span>mods</span> <span>=</span> <span>'OPT'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>SendString</span> <span>'\x1bf'</span><span>,</span>
  <span>},</span>
<span>}</span>
</code></pre></div>

<p>By now you‚Äôve probably figured out that you‚Äôre gonna be spending more time configuring WezTerm than doing actual work. There‚Äôs no shame in admitting this reality, so let‚Äôs encode it into our config. On macOS, the default shortcut for opening an application‚Äôs preferences is <code>CMD + ,</code> - let‚Äôs make it so when we press this, our favourite editor opens up the WezTerm config. I‚Äôm using neovim, but feel free to substitute with your own:</p>

<div><pre><code><span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- ... add these new entries to your config.keys table</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>','</span><span>,</span>
    <span>mods</span> <span>=</span> <span>'SUPER'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>SpawnCommandInNewTab</span> <span>{</span>
      <span>cwd</span> <span>=</span> <span>wezterm</span><span>.</span><span>home_dir</span><span>,</span>
      <span>args</span> <span>=</span> <span>{</span> <span>'nvim'</span><span>,</span> <span>wezterm</span><span>.</span><span>config_file</span> <span>},</span>
    <span>},</span>
  <span>},</span>
<span>}</span>
</code></pre></div>

<p>Try that out, but you may see an error along the lines of:</p>

<div><pre><code>Unable to spawn nvim because:
No viable candidates found in PATH "/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"
</code></pre></div>

<p>If that error showed up, it‚Äôs typically because the process that launched WezTerm didn‚Äôt include a <code>PATH</code> environment variable that led to your editor‚Äôs binary (e.g. on macOS, Finder is usually WezTerm‚Äôs parent). We can work around this by specifying the full path to your editor in the <code>SpawnCommandInNewTab</code> properties (<a href="https://wezfurlong.org/wezterm/config/lua/SpawnCommand.html">docs</a>), or by updating the default environment variables WezTerm spawns commands with. I prefer the latter, since it means that any other places in our config where we might spawn new commands will also inherit the same env vars:</p>

<div><pre><code><span>config</span><span>.</span><span>set_environment_variables</span> <span>=</span> <span>{</span>
  <span>PATH</span> <span>=</span> <span>'/opt/homebrew/bin:'</span> <span>..</span> <span>os.getenv</span><span>(</span><span>'PATH'</span><span>)</span>
<span>}</span>
</code></pre></div>

<p>Try that again, and it should work.</p>

<p>We really are just scratching the surface of all the commands available (<a href="https://wezfurlong.org/wezterm/config/lua/keyassignment/index.html">WezTerm supports a lot</a>). In the next section, we‚Äôll be growing our key bindings further.</p>

<h2 id="multiplexing-terminals-levelling-up-key-assignments">Multiplexing terminals, levelling up key assignments</h2>

<p>Let‚Äôs move on to WezTerm‚Äôs multiplexing capabilities. If you make use of a multiplexer (i.e. tmux) then you may consider using WezTerm‚Äôs builtin capabilities instead. They‚Äôll generally give you a more integrated experience, with individual scrollback buffers per pane, better mouse control, easier selection functionality, and generally faster performance.</p>

<p>Hit <code>CTRL + SHIFT + P</code> to bring up WezTerm‚Äôs command palette. (Yes, WezTerm has a command palette. Yes, it‚Äôs as customisable as everything else we‚Äôve seen so far. No, we won‚Äôt dwell on it here). Type <code>split horizontally</code> until the ‚ÄúShell: Split Horizontally‚Äù option is selected and hit <code>ENTER</code>. Ta-da! Your shell split horizontally! Do the same for <code>split vertically</code> and‚Ä¶ you get the idea.</p>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/09_command_palette-720-5e12352ea.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/09_command_palette-1440-5e12352ea.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/09_command_palette-1520-5e12352ea.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/09_command_palette-720-5e12352ea.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/09_command_palette-1440-5e12352ea.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/09_command_palette-1520-5e12352ea.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/09_command_palette-800-74d2ff2ad.png" alt="screenshot of WezTerm's command palette"></picture>

<p>You may have noticed that the command palette displays the keyboard shortcut assigned to each action. The ones for splitting are quite a fingerful, e.g. <code>SHIFT + CTRL + OPTION + "</code>. I get why they‚Äôre this complicated - because they‚Äôre trying not to clash with any other shortcuts you may have on your system, but we can do a lot better - and WezTerm gives us the tools do so easily!</p>

<h3 id="splitting-panes-leader-key">Splitting panes, leader key</h3>

<p>A leader key (<a href="https://wezfurlong.org/wezterm/config/keys.html#leader-key">docs</a>) is a special key combination that you press first, followed by another key combination, to perform a specific action. It can help you create complex shortcuts without needing to push a lot of keys all at once.</p>

<p>Sounds like a perfect fit for splitting panes, right? We‚Äôll bind our leader to <code>CTRL + A</code>, and in case you accidentally type the leader without following it up with another key, we‚Äôll have it automatically deactivate after 1,000 milliseconds.</p>

<div><pre><code><span>-- If you're using emacs you probably wanna choose a different leader here,</span>
<span>-- since we're gonna be making it a bit harder to CTRL + A for jumping to </span>
<span>-- the start of a line</span>
<span>config</span><span>.</span><span>leader</span> <span>=</span> <span>{</span> <span>key</span> <span>=</span> <span>'a'</span><span>,</span> <span>mods</span> <span>=</span> <span>'CTRL'</span><span>,</span> <span>timeout_milliseconds</span> <span>=</span> <span>1000</span> <span>}</span>
</code></pre></div>

<p>Next let‚Äôs define some key assignments for splitting panes:</p>

<div><pre><code><span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- ... add these new entries to your config.keys table</span>
  <span>{</span>
    <span>-- I'm used to tmux bindings, so am using the quotes (") key to</span>
    <span>-- split horizontally, and the percent (%) key to split vertically.</span>
    <span>key</span> <span>=</span> <span>'"'</span><span>,</span>
    <span>-- Note that instead of a key modifier mapped to a key on your keyboard</span>
    <span>-- like CTRL or ALT, we can use the LEADER modifier instead.</span>
    <span>-- This means that this binding will be invoked when you press the leader</span>
    <span>-- (CTRL + A), quickly followed by quotes (").</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>SplitHorizontal</span> <span>{</span> <span>domain</span> <span>=</span> <span>'CurrentPaneDomain'</span> <span>},</span>
  <span>},</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'%'</span><span>,</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>SplitVertical</span> <span>{</span> <span>domain</span> <span>=</span> <span>'CurrentPaneDomain'</span> <span>},</span>
  <span>},</span>
<span>}</span>
</code></pre></div>

<p>Give it a go now. Press <code>CTRL + A</code>, quickly followed by <code>"</code>, and you‚Äôll get a horizontal split. Use the other assignment and you‚Äôll get a vertical split.</p>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/10_splits-720-79750a1ee.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/10_splits-1440-79750a1ee.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/10_splits-1520-79750a1ee.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/10_splits-720-79750a1ee.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/10_splits-1440-79750a1ee.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/10_splits-1520-79750a1ee.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/10_splits-800-8e0e76173.png" alt="screenshot of WezTerm's with split panes"></picture>

<p>Before we move on - you might be wondering what happens if you actually want to send the <code>CTRL + A</code> keypress <em>without</em> invoking the leader? <code>CTRL + A</code> is useful in and of its own as pressing it jumps to the start of a line on your shell (and on operating systems like Emacs).</p>

<p>Well there‚Äôs a solution for that. We can map <code>CTRL + A</code> quickly followed by <code>CTRL + A</code> to send a <code>CTRL + A</code> to our terminal. That‚Äôs a confusing sentence! It‚Äôll be simpler to just look at the config:</p>

<div><pre><code><span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- ... add these new entries to your config.keys table</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'a'</span><span>,</span>
    <span>-- When we're in leader mode _and_ CTRL + A is pressed...</span>
    <span>mods</span> <span>=</span> <span>'LEADER|CTRL'</span><span>,</span>
    <span>-- Actually send CTRL + A key to the terminal</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>SendKey</span> <span>{</span> <span>key</span> <span>=</span> <span>'a'</span><span>,</span> <span>mods</span> <span>=</span> <span>'CTRL'</span> <span>},</span>
  <span>},</span>
<span>},</span>
</code></pre></div>

<h3 id="moving-around-panes">Moving around panes</h3>

<p>Okay with that done, let‚Äôs get back to multiplexing. Next up, navigating our splits. I like to use vim direction keybindings, but feel free to replace with arrow keys instead.</p>

<div><pre><code><span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- ... add these new entries to your config.keys table</span>
  <span>{</span>
    <span>-- I like to use vim direction keybindings, but feel free to replace</span>
    <span>-- with directional arrows instead.</span>
    <span>key</span> <span>=</span> <span>'j'</span><span>,</span> <span>-- or DownArrow</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>ActivatePaneDirection</span><span>(</span><span>'Down'</span><span>),</span>
  <span>},</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'k'</span><span>,</span> <span>-- or UpArrow</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>ActivatePaneDirection</span><span>(</span><span>'Up'</span><span>),</span>
  <span>},</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'h'</span><span>,</span> <span>-- or LeftArrow</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>ActivatePaneDirection</span><span>(</span><span>'Left'</span><span>),</span>
  <span>},</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'l'</span><span>,</span> <span>-- or RightArrow</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>ActivatePaneDirection</span><span>(</span><span>'Right'</span><span>),</span>
  <span>},</span>
<span>}</span>
</code></pre></div>

<p>Look at all that duplication - We‚Äôre using a dynamic language for our config here, we don‚Äôt need to stand for that! Let‚Äôs go on a little side quest and see if we can extract it to a function.</p>

<div><pre><code><span>local</span> <span>function</span> <span>move_pane</span><span>(</span><span>key</span><span>,</span> <span>direction</span><span>)</span>
  <span>return</span> <span>{</span>
    <span>key</span> <span>=</span> <span>key</span><span>,</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>ActivatePaneDirection</span><span>(</span><span>direction</span><span>),</span>
  <span>}</span>
<span>end</span>

<span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- ... remove the previous move bindings, and replace with</span>
  <span>move_pane</span><span>(</span><span>'j'</span><span>,</span> <span>'Down'</span><span>),</span>
  <span>move_pane</span><span>(</span><span>'k'</span><span>,</span> <span>'Up'</span><span>),</span>
  <span>move_pane</span><span>(</span><span>'h'</span><span>,</span> <span>'Left'</span><span>),</span>
  <span>move_pane</span><span>(</span><span>'l'</span><span>,</span> <span>'Right'</span><span>),</span>
<span>}</span>
</code></pre></div>

<p>Ooh so much smaller, but it could be smaller still. I dare you to keep code golfing this down to 6 lines. Go on - I believe in you!</p>

<h3 id="resizing-panes-and-introducing-key-tables">Resizing panes, and introducing key tables</h3>

<p>You might‚Äôve figured out that you can resize panes by dragging the edge of one with your mouse, but we‚Äôre developers here, not olympic athletes. What‚Äôre we expected to <em>move</em> our hands away from the safety of our keyboard and over to the mouse?! No! I won‚Äôt stand for it and neither should you!</p>

<p>It‚Äôd be really nice to use the same keys that we use for moving between the panes for resizing (h, j, k, l)‚Ä¶ but they‚Äôve already been mapped‚Ä¶ we <em>could</em> add another key modifier that needs to be held down when we want to resize vs. move between the panes:</p>

<div><pre><code><span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- ... add this new entry to your config.keys table</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'h'</span><span>,</span>
    <span>mods</span> <span>=</span> <span>'LEADER|CTRL'</span><span>,</span>
    <span>-- "3" here is the amount of cells we wish to resize</span>
    <span>-- the terminal by</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>AdjustPaneSize</span> <span>{</span> <span>'Left'</span><span>,</span> <span>3</span> <span>},</span>
  <span>},</span>
<span>}</span>
</code></pre></div>

<p>But that‚Äôs no good really. We have to first push our leader <code>CTRL + A</code>, then push <code>CTRL + H</code>, and keep repeating that each time we wanna resize the pane to the left. Fingers getting sore. Send help. Oh, here comes WezTerm with the antidote: <a href="https://wezfurlong.org/wezterm/config/key-tables.html">key tables</a>.</p>

<p>When you activate a key table you‚Äôre entering a different mode with its own set of assignments for whatever you‚Äôre doing. This allows you to have multiple layers of assignments that are context specific.</p>

<p>It‚Äôs a similar kind of concept to the leader key, but unlike it, our key table will not automatically deactivate after an action is invoked, so it‚Äôll be a good fit for resizing, where we want to keep pressing the same button over and over again until we‚Äôre happy with our pane‚Äôs new size.</p>

<p>With all that‚Ä¶ this is easier <em>done</em> that said, so let‚Äôs check out the code:</p>

<div><pre><code><span>local</span> <span>function</span> <span>resize_pane</span><span>(</span><span>key</span><span>,</span> <span>direction</span><span>)</span>
  <span>return</span> <span>{</span>
    <span>key</span> <span>=</span> <span>key</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>AdjustPaneSize</span> <span>{</span> <span>direction</span><span>,</span> <span>3</span> <span>}</span>
  <span>}</span>
<span>end</span>

<span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- ... remove the yucky keybinding from above and replace it with this</span>
  <span>{</span>
    <span>-- When we push LEADER + R...</span>
    <span>key</span> <span>=</span> <span>'r'</span><span>,</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>-- Activate the `resize_panes` keytable</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>ActivateKeyTable</span> <span>{</span>
      <span>name</span> <span>=</span> <span>'resize_panes'</span><span>,</span>
      <span>-- Ensures the keytable stays active after it handles its</span>
      <span>-- first keypress.</span>
      <span>one_shot</span> <span>=</span> <span>false</span><span>,</span>
      <span>-- Deactivate the keytable after a timeout.</span>
      <span>timeout_milliseconds</span> <span>=</span> <span>1000</span><span>,</span>
    <span>}</span>
  <span>},</span>
<span>}</span>

<span>config</span><span>.</span><span>key_tables</span> <span>=</span> <span>{</span>
  <span>resize_panes</span> <span>=</span> <span>{</span>
    <span>resize_pane</span><span>(</span><span>'j'</span><span>,</span> <span>'Down'</span><span>),</span>
    <span>resize_pane</span><span>(</span><span>'k'</span><span>,</span> <span>'Up'</span><span>),</span>
    <span>resize_pane</span><span>(</span><span>'h'</span><span>,</span> <span>'Left'</span><span>),</span>
    <span>resize_pane</span><span>(</span><span>'l'</span><span>,</span> <span>'Right'</span><span>),</span>
  <span>},</span>
<span>}</span>
</code></pre></div>

<p>Now you can push <code>CTRL + A</code> to activate leader, then <code>R</code> to activate the resizing layer‚Ä¶ and movement keys to resize to your heart‚Äôs content. When 1,000 milliseconds have elapsed, you‚Äôll automatically exit the resizing layer and be back to the default keytable.</p>

<p>WezTerm intensifies‚Ä¶</p>

<p>(While we‚Äôre on multiplexing, if you‚Äôre using neovim, I‚Äôd recommend checking out <a href="https://github.com/mrjones2014/smart-splits.nvim">smart-splits.nvim</a> - that‚Äôll let you jump between your vim panes and your WezTerm ones).</p>

<h2 id="project-workspaces">Project workspaces</h2>

<p>Okay let‚Äôs graduate from WezTerm university with one final assignment‚Ä¶ project workspaces.</p>

<p>I‚Äôm often working across a few different projects at a time, and need to be able to quickly switch between them. I want each project to maintain its own multiplexer instance with its own windows, panes, and tabs. In tmux you might achieve this with different sessions. In WezTerm we‚Äôll do it with <a href="https://wezfurlong.org/wezterm/recipes/workspaces.html">workspaces</a>.</p>

<h3 id="creating-and-switching-between-workspaces">Creating and switching between workspaces</h3>

<p>Create a new file in your config directory and call it <code>projects.lua</code>. We‚Äôll use this to provide some project switching functions to our main config file.</p>

<div><pre><code><span>local</span> <span>wezterm</span> <span>=</span> <span>require</span> <span>'wezterm'</span>
<span>local</span> <span>module</span> <span>=</span> <span>{}</span>

<span>local</span> <span>function</span> <span>project_dirs</span><span>()</span>
  <span>return</span> <span>{</span>
    <span>'~/Projects/mailgrip'</span><span>,</span>
    <span>'~/Projects/alexplescan.com'</span><span>,</span>
    <span>'~/Projects/wezterm_love_letters'</span><span>,</span>
    <span>-- ... keep going, list all your projects</span>
    <span>-- (or don't if you value your time. we'll improve on this soon)</span>
  <span>}</span>
<span>end</span>

<span>function</span> <span>module</span><span>.</span><span>choose_project</span><span>()</span>
  <span>local</span> <span>choices</span> <span>=</span> <span>{}</span>
  <span>for</span> <span>_</span><span>,</span> <span>value</span> <span>in</span> <span>ipairs</span><span>(</span><span>project_dirs</span><span>())</span> <span>do</span>
    <span>table.insert</span><span>(</span><span>choices</span><span>,</span> <span>{</span> <span>label</span> <span>=</span> <span>value</span> <span>})</span>
  <span>end</span>

  <span>-- The InputSelector action presents a modal UI for choosing between a set of options</span>
  <span>-- within WezTerm.</span>
  <span>return</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>InputSelector</span> <span>{</span>
    <span>title</span> <span>=</span> <span>'Projects'</span><span>,</span>
    <span>-- The options we wish to choose from</span>
    <span>choices</span> <span>=</span> <span>choices</span><span>,</span>
    <span>-- Yes, we wanna fuzzy search (so typing "alex" will filter down to</span>
    <span>-- "~/Projects/alexplescan.com")</span>
    <span>fuzzy</span> <span>=</span> <span>true</span><span>,</span>
    <span>-- The action we want to perform. Note that this doesn't have to be a</span>
    <span>-- static definition as we've done before, but can be a callback that</span>
    <span>-- evaluates any arbitrary code.</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action_callback</span><span>(</span><span>function</span><span>(</span><span>child_window</span><span>,</span> <span>child_pane</span><span>,</span> <span>id</span><span>,</span> <span>label</span><span>)</span>
      <span>-- As a placeholder, we'll log the name of what you picked</span>
      <span>wezterm</span><span>.</span><span>log_info</span><span>(</span><span>"you chose "</span> <span>..</span> <span>label</span><span>)</span>
    <span>end</span><span>),</span>
  <span>}</span>
<span>end</span>

<span>return</span> <span>module</span>
</code></pre></div>

<p>‚Ä¶ and in your <code>wezterm.lua</code>:</p>

<div><pre><code><span>local</span> <span>projects</span> <span>=</span> <span>require</span> <span>'projects'</span>

<span>config</span><span>.</span><span>keys</span> <span>=</span> <span>{</span>
  <span>-- ... add these new entries to your config.keys table</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'p'</span><span>,</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>-- Present in to our project picker</span>
    <span>action</span> <span>=</span> <span>projects</span><span>.</span><span>choose_project</span><span>(),</span>
  <span>},</span>
  <span>{</span>
    <span>key</span> <span>=</span> <span>'f'</span><span>,</span>
    <span>mods</span> <span>=</span> <span>'LEADER'</span><span>,</span>
    <span>-- Present a list of existing workspaces</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>ShowLauncherArgs</span> <span>{</span> <span>flags</span> <span>=</span> <span>'FUZZY|WORKSPACES'</span> <span>},</span>
  <span>},</span>
<span>}</span>
</code></pre></div>

<p>Lots going on here, take your time to read it and the comments. And give it a go! Push <code>LEADER + P</code>, and you‚Äôll see the project input selector come up. Pick a project by highlighting one and pushing <code>ENTER</code>, or push <code>CTRL + C</code> to close the picker. Once you‚Äôve picked a project you‚Äôll see its directory logged to your debug overlay (<code>CTRL + SHIFT + L</code>).</p>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/11_workspace_switcher-720-835177f65.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/11_workspace_switcher-1440-835177f65.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/11_workspace_switcher-1520-835177f65.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/11_workspace_switcher-720-835177f65.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/11_workspace_switcher-1440-835177f65.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/11_workspace_switcher-1520-835177f65.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/11_workspace_switcher-800-86fb3a529.png" alt="screenshot of WezTerm's with the workspace switcher we've configured"></picture>

<p>Still a couple of issues though‚Ä¶ it‚Äôs really annoying to type out all your projects by hand in that file, and, uh, what was the other issue? Oh yeah! When you pick a project nothing happens. Okay, let‚Äôs fix these. Back in <code>projects.lua</code>, we‚Äôll start by having the list of projects automatically populate.</p>

<div><pre><code><span>-- The directory that contains all your projects.</span>
<span>local</span> <span>project_dir</span> <span>=</span> <span>wezterm</span><span>.</span><span>home_dir</span> <span>..</span> <span>"/Projects"</span>

<span>local</span> <span>function</span> <span>project_dirs</span><span>()</span>
  <span>-- Start with your home directory as a project, 'cause you might want</span>
  <span>-- to jump straight to it sometimes.</span>
  <span>local</span> <span>projects</span> <span>=</span> <span>{</span> <span>wezterm</span><span>.</span><span>home_dir</span> <span>}</span>

  <span>-- WezTerm comes with a glob function! Let's use it to get a lua table</span>
  <span>-- containing all subdirectories of your project folder.</span>
  <span>for</span> <span>_</span><span>,</span> <span>dir</span> <span>in</span> <span>ipairs</span><span>(</span><span>wezterm</span><span>.</span><span>glob</span><span>(</span><span>project_dir</span> <span>..</span> <span>'/*'</span><span>))</span> <span>do</span>
    <span>-- ... and add them to the projects table.</span>
    <span>table.insert</span><span>(</span><span>projects</span><span>,</span> <span>dir</span><span>)</span>
  <span>end</span>

  <span>return</span> <span>projects</span>
<span>end</span>
</code></pre></div>

<p>(This all assumes that you like to keep your projects grouped together in a folder, if not‚Ä¶ well you‚Äôve got Lua at your fingertips to implement whatever you want!)</p>

<p>Now launch the project picker, and what do you see? All those projects staring back at thee.</p>

<p>One thing left to do, let‚Äôs add the functionality that opens your project in a new WezTerm workspace. Still in <code>projects.lua</code> let‚Äôs change up <code>choose_project</code>:</p>

<div><pre><code><span>function</span> <span>module</span><span>.</span><span>choose_project</span><span>()</span>
  <span>local</span> <span>choices</span> <span>=</span> <span>{}</span>
  <span>for</span> <span>_</span><span>,</span> <span>value</span> <span>in</span> <span>ipairs</span><span>(</span><span>project_dirs</span><span>())</span> <span>do</span>
    <span>table.insert</span><span>(</span><span>choices</span><span>,</span> <span>{</span> <span>label</span> <span>=</span> <span>value</span> <span>})</span>
  <span>end</span>

  <span>return</span> <span>wezterm</span><span>.</span><span>action</span><span>.</span><span>InputSelector</span> <span>{</span>
    <span>title</span> <span>=</span> <span>"Projects"</span><span>,</span>
    <span>choices</span> <span>=</span> <span>choices</span><span>,</span>
    <span>fuzzy</span> <span>=</span> <span>true</span><span>,</span>
    <span>action</span> <span>=</span> <span>wezterm</span><span>.</span><span>action_callback</span><span>(</span><span>function</span><span>(</span><span>child_window</span><span>,</span> <span>child_pane</span><span>,</span> <span>id</span><span>,</span> <span>label</span><span>)</span>
      <span>-- "label" may be empty if nothing was selected. Don't bother doing anything</span>
      <span>-- when that happens.</span>
      <span>if</span> <span>not</span> <span>label</span> <span>then</span> <span>return</span> <span>end</span>

      <span>-- The SwitchToWorkspace action will switch us to a workspace if it already exists,</span>
      <span>-- otherwise it will create it for us.</span>
      <span>child_window</span><span>:</span><span>perform_action</span><span>(</span><span>wezterm</span><span>.</span><span>action</span><span>.</span><span>SwitchToWorkspace</span> <span>{</span>
        <span>-- We'll give our new workspace a nice name, like the last path segment</span>
        <span>-- of the directory we're opening up.</span>
        <span>name</span> <span>=</span> <span>label</span><span>:</span><span>match</span><span>(</span><span>"([^/]+)$"</span><span>),</span>
        <span>-- Here's the meat. We'll spawn a new terminal with the current working</span>
        <span>-- directory set to the directory that was picked.</span>
        <span>spawn</span> <span>=</span> <span>{</span> <span>cwd</span> <span>=</span> <span>label</span> <span>},</span>
      <span>},</span> <span>child_pane</span><span>)</span>
    <span>end</span><span>),</span>
  <span>}</span>
<span>end</span>
</code></pre></div>

<p>Try that out, select a new project, and you‚Äôll see a workspace get created for it. Switch back to your default workspace (we bound so <code>LEADER, CTRL + F</code>  to show you a list of active workspaces) and you‚Äôll see everything is right where you left it.</p>

<h3 id="bonus-improving-the-powerline-and-more-colour-stuff">Bonus: improving the powerline, and more colour stuff</h3>

<p>Let‚Äôs add a couple of polishing touches to this workflow and then I promise we‚Äôll be done‚Ä¶</p>

<p>Remember that sad powerline we set up earlier? Let‚Äôs make it happier by adding another segment to it which contains the name of the current workspace. In true powerline fashion, each subsequent segment on the powerline will display in a different colour. We‚Äôll explore some of WezTerm‚Äôs colour maths support and do this all dynamically based on our theme. Back in <code>wezterm.lua</code>:</p>

<div><pre><code><span>-- Replace the old wezterm.on('update-status', ... function with this:</span>

<span>local</span> <span>function</span> <span>segments_for_right_status</span><span>(</span><span>window</span><span>)</span>
  <span>return</span> <span>{</span>
    <span>window</span><span>:</span><span>active_workspace</span><span>(),</span>
    <span>wezterm</span><span>.</span><span>strftime</span><span>(</span><span>'%a %b %-d %H:%M'</span><span>),</span>
    <span>wezterm</span><span>.</span><span>hostname</span><span>(),</span>
  <span>}</span>
<span>end</span>

<span>wezterm</span><span>.</span><span>on</span><span>(</span><span>'update-status'</span><span>,</span> <span>function</span><span>(</span><span>window</span><span>,</span> <span>_</span><span>)</span>
  <span>local</span> <span>SOLID_LEFT_ARROW</span> <span>=</span> <span>utf8.char</span><span>(</span><span>0xe0b2</span><span>)</span>
  <span>local</span> <span>segments</span> <span>=</span> <span>segments_for_right_status</span><span>(</span><span>window</span><span>)</span>

  <span>local</span> <span>color_scheme</span> <span>=</span> <span>window</span><span>:</span><span>effective_config</span><span>().</span><span>resolved_palette</span>
  <span>-- Note the use of wezterm.color.parse here, this returns</span>
  <span>-- a Color object, which comes with functionality for lightening</span>
  <span>-- or darkening the colour (amongst other things).</span>
  <span>local</span> <span>bg</span> <span>=</span> <span>wezterm</span><span>.</span><span>color</span><span>.</span><span>parse</span><span>(</span><span>color_scheme</span><span>.</span><span>background</span><span>)</span>
  <span>local</span> <span>fg</span> <span>=</span> <span>color_scheme</span><span>.</span><span>foreground</span>

  <span>-- Each powerline segment is going to be coloured progressively</span>
  <span>-- darker/lighter depending on whether we're on a dark/light colour</span>
  <span>-- scheme. Let's establish the "from" and "to" bounds of our gradient.</span>
  <span>local</span> <span>gradient_to</span><span>,</span> <span>gradient_from</span> <span>=</span> <span>bg</span>
  <span>if</span> <span>appearance</span><span>.</span><span>is_dark</span><span>()</span> <span>then</span>
    <span>gradient_from</span> <span>=</span> <span>gradient_to</span><span>:</span><span>lighten</span><span>(</span><span>0</span><span>.</span><span>2</span><span>)</span>
  <span>else</span>
    <span>gradient_from</span> <span>=</span> <span>gradient_to</span><span>:</span><span>darken</span><span>(</span><span>0</span><span>.</span><span>2</span><span>)</span>
  <span>end</span>

  <span>-- Yes, WezTerm supports creating gradients, because why not?! Although</span>
  <span>-- they'd usually be used for setting high fidelity gradients on your terminal's</span>
  <span>-- background, we'll use them here to give us a sample of the powerline segment</span>
  <span>-- colours we need.</span>
  <span>local</span> <span>gradient</span> <span>=</span> <span>wezterm</span><span>.</span><span>color</span><span>.</span><span>gradient</span><span>(</span>
    <span>{</span>
      <span>orientation</span> <span>=</span> <span>'Horizontal'</span><span>,</span>
      <span>colors</span> <span>=</span> <span>{</span> <span>gradient_from</span><span>,</span> <span>gradient_to</span> <span>},</span>
    <span>},</span>
    <span>#</span><span>segments</span> <span>-- only gives us as many colours as we have segments.</span>
  <span>)</span>

  <span>-- We'll build up the elements to send to wezterm.format in this table.</span>
  <span>local</span> <span>elements</span> <span>=</span> <span>{}</span>

  <span>for</span> <span>i</span><span>,</span> <span>seg</span> <span>in</span> <span>ipairs</span><span>(</span><span>segments</span><span>)</span> <span>do</span>
    <span>local</span> <span>is_first</span> <span>=</span> <span>i</span> <span>==</span> <span>1</span>

    <span>if</span> <span>is_first</span> <span>then</span>
      <span>table.insert</span><span>(</span><span>elements</span><span>,</span> <span>{</span> <span>Background</span> <span>=</span> <span>{</span> <span>Color</span> <span>=</span> <span>'none'</span> <span>}</span> <span>})</span>
    <span>end</span>
    <span>table.insert</span><span>(</span><span>elements</span><span>,</span> <span>{</span> <span>Foreground</span> <span>=</span> <span>{</span> <span>Color</span> <span>=</span> <span>gradient</span><span>[</span><span>i</span><span>]</span> <span>}</span> <span>})</span>
    <span>table.insert</span><span>(</span><span>elements</span><span>,</span> <span>{</span> <span>Text</span> <span>=</span> <span>SOLID_LEFT_ARROW</span> <span>})</span>

    <span>table.insert</span><span>(</span><span>elements</span><span>,</span> <span>{</span> <span>Foreground</span> <span>=</span> <span>{</span> <span>Color</span> <span>=</span> <span>fg</span> <span>}</span> <span>})</span>
    <span>table.insert</span><span>(</span><span>elements</span><span>,</span> <span>{</span> <span>Background</span> <span>=</span> <span>{</span> <span>Color</span> <span>=</span> <span>gradient</span><span>[</span><span>i</span><span>]</span> <span>}</span> <span>})</span>
    <span>table.insert</span><span>(</span><span>elements</span><span>,</span> <span>{</span> <span>Text</span> <span>=</span> <span>' '</span> <span>..</span> <span>seg</span> <span>..</span> <span>' '</span> <span>})</span>
  <span>end</span>

  <span>window</span><span>:</span><span>set_right_status</span><span>(</span><span>wezterm</span><span>.</span><span>format</span><span>(</span><span>elements</span><span>))</span>
<span>end</span><span>)</span>
</code></pre></div>

<picture><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/12_status_bar_enhanced-720-d88a78af8.webp 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/12_status_bar_enhanced-1440-d88a78af8.webp 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/12_status_bar_enhanced-1520-d88a78af8.webp 2.11x" type="image/webp"><source srcset="https://alexplescan.com/generated/assets/posts/wezterm/12_status_bar_enhanced-720-d88a78af8.jpg 1.0x, https://alexplescan.com/generated/assets/posts/wezterm/12_status_bar_enhanced-1440-d88a78af8.jpg 2.0x, https://alexplescan.com/generated/assets/posts/wezterm/12_status_bar_enhanced-1520-d88a78af8.jpg 2.11x" type="image/jpeg"><img src="https://alexplescan.com/generated/assets/posts/wezterm/12_status_bar_enhanced-800-df09b5aaf.png" alt="screenshot of WezTerm with an enhanced status line, showing multiple segments in different colours"></picture>

<p>WezTerm delivers yet again. This updated callback supports arbitrary numbers of segments for its powerline. We‚Äôve specified 3 but you could add way more. All this without needing to manually configure what colour we want on each segment, but rather have WezTerm do it for us by creating a gradient based on the currently active theme. Some highlights:</p>

<ul>
  <li>We use <code>wezterm.color.parse</code> to convert a string containing a hex colour code into a <code>Color</code> object (<a href="https://wezfurlong.org/wezterm/config/lua/color/index.html">docs</a>) - this lets us perform more advanced operations on the color.</li>
  <li>The colour scheme‚Äôs background colour is still what we want to use as the value that our gradient draws <em>to</em>, but to figure out where the gradient should start, we use either <code>color:darken</code> (<a href="https://wezfurlong.org/wezterm/config/lua/color/darken.html">docs</a>) or <code>color:lighten</code> to create a new colour.</li>
  <li>The gradient itself is made with <code>wezterm.color.gradient</code> (<a href="https://wezfurlong.org/wezterm/config/lua/wezterm.color/gradient.html">docs</a>), which returns a table containing a evenly spaced colours between our <code>gradient_to</code> and <code>gradient_from</code>.</li>
  <li>We then iterate over our powerline segments to create the items required for <code>wezterm.format</code>.</li>
</ul>

<h2 id="where-to-from-here">Where to from here?</h2>

<p>There‚Äôs a <a href="https://wezfurlong.org/wezterm/features.html">lot more that WezTerm does</a> and that <a href="https://wezfurlong.org/wezterm/config/lua/general.html">you can do with WezTerm</a>. By now you‚Äôll have a good understanding of WezTerm config fundamentals, but I encourage you to keep exploring!</p>

<p>If you‚Äôve followed this guide step by step, I‚Äôd recommend pruning the config down to things that you‚Äôll actually use, rewriting it in your own style, then start sprinkling in your own stuff. Take ownership of this thing! Make your own beautiful WezTerm snowflake!</p>

<p>When you want some inspiration for what you could do next, browse through the <a href="https://wezfurlong.org/wezterm/config/lua/general.html">WezTerm API docs</a> to see what‚Äôs possible.</p>

<p>And if you find that you too really like WezTerm, please consider <a href="https://wezfurlong.org/sponsor/">supporting Wez</a> for his great open-source work.</p>
</div>

  
</article>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Go is my hammer, and everything is a nail (101 pts)]]></title>
            <link>https://www.maragu.dev/blog/go-is-my-hammer-and-everything-is-a-nail</link>
            <guid>41223902</guid>
            <pubDate>Mon, 12 Aug 2024 12:59:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.maragu.dev/blog/go-is-my-hammer-and-everything-is-a-nail">https://www.maragu.dev/blog/go-is-my-hammer-and-everything-is-a-nail</a>, See on <a href="https://news.ycombinator.com/item?id=41223902">Hacker News</a></p>
<div id="readability-page-1" class="page"><div hx-boost="true"><p>You know that old saying:</p>

<blockquote>
Always choose the right tool for the job.<cite>Shakespeare, or someone like that</cite>
</blockquote>

<p>Well, I‚Äôve turned that one on its head. I‚Äôm using one tool for all possible tasks, for what I believe are good reasons. But I‚Äôm getting ahead of myself.</p>

<p>Let‚Äôs start somewhere else. I‚Äôm Markus, a solo developer and digital product builder. It‚Äôs just me. I have no team or subcontractors, and I intend to keep it that way. I‚Äôve pursued a lifestyle that includes having my own business, because it gives me the most flexibility of how and when I want to work. To structure my work around the rest of my life, so to speak. I want to collaborate, but not manage other people.</p>

<p>As a solo developer, I believe it‚Äôs a good idea to choose your tools wisely. Even more so than when in a team setting, having a tech stack that is too complex can bury you in unnecessary busy-work; you‚Äôll end up building infrastructure and nursing your layers of technology all day, instead of, you know, talking to customers and building what they want. Delivering value to someone, to anyone, to the world.</p>

<p>In 2016, I started building stuff in Go. I originally didn‚Äôt like it, but I started ‚Äúgetting it‚Äù, and it stuck with me. So much that I eventually turned my back on other programming languages. I was writing a lot of Python and Javascript at the time, but I dropped that. I ended up <a href="https://www.golang.dk/">making a course for Go developers</a>, as well as sort-of kind-of <a href="https://www.gomponents.com/">reinventing React for backend Go HTML generation</a>. I now build basically all my software in Go, from tiny one-off tools, to web services, CLIs, and everything in between.</p>

<p>But why? When the common wisdom is to always take the problem at hand, analyze it, and then choose the tools, why would I ignore that and go: ‚Äúnah, I‚Äôll just use Go again‚Äù?</p>

<p>Well, I present to you: REASONS.</p>

<h2>Reason 1: Go can do basically anything</h2>

<p>Yeah, Go can do basically anything. Actually, I‚Äôll widen that statement to <em>all popular programming languages can do basically anything</em>. Yes, most are known for one thing or another, and they definitely have their strengths and weaknesses. But I think at the end of the day, it basically comes down to opinion and taste.</p>

<p>I like Go. It‚Äôs simple enough, easy to read, consistent, and a lot of other good things that align well with how I want to build software. There are certainly also things I don‚Äôt like, but I don‚Äôt care enough to let it bother me. But you probably know all of those things already.</p>

<p>Go is good for the obvious things: building CLIs, cloud infrastructure, HTTP servers, network stuff.</p>

<p>But people also <a href="https://ebitengine.org/">build games for the Nintendo Switch in Go</a>. They build <a href="https://wails.io/">GUI</a> <a href="https://fyne.io/">apps</a> using Go. I‚Äôve even tried a <a href="https://github.com/crnbaker/gostringsynth">string synthesizer in the terminal</a> built in Go, which I thought was beyond cool. You get the point: it‚Äôs often possible to do what you want, regardless of the tool you use.</p>

<h2>Reason 2: Less context switching</h2>

<p>Do you know the feeling when you start writing syntax for one programming language, realize that, nope, you‚Äôre supposed to be using a different one, and try to switch your brain into another mode while feeling slightly dumb? I know I used to.</p>

<p>But I don‚Äôt anymore, because I only use one programming language! Ha! Joke‚Äôs on past me.</p>

<p>But it goes much deeper than that. A programming language isn‚Äôt just a bunch of syntax to build stuff. It‚Äôs <em>also</em> a compiler, an IDE, a toolchain. A community to engage with. A never-ending news machine to keep up with. An ecosystem of libraries, tools, programs, idioms, styles. It can be quite a mouthful on its own, so I found it overwhelming to try to keep up with several. Is it possible? Sure. Will it be more superficial? Also yep.</p>

<p>Which brings me to my third reason.</p>

<h2>Reason 3: Depth of knowledge</h2>

<p>When I don‚Äôt have to keep up with everything around several languages, and build everything in just one language, I can go deep. Learn stuff I wouldn‚Äôt have gone into otherwise. Investigate nooks and crannies I wouldn‚Äôt have given a thought. Learn esoteric language features, history, read obscure blog posts on details I wouldn‚Äôt necessarily have bothered with.</p>

<p>That doesn‚Äôt mean I ignore the rest of the world, obviously. You and I both know there‚Äôs always more to learn in this field. Cutting away programming languages doesn‚Äôt make software development less complex in a multitude of other aspects, but it does so in one very concrete setting, and one which I spend a lot of time on.</p>

<h2>So, what, I‚Äôm going to limit my career options?</h2>

<p>The world is laaaarge. The number of projects are basically infinite. Even if I carve out a tiny subset of infinite, that‚Äôs still infinite. Good enough for me and my career ambitions.</p>

<p>And I‚Äôll be <em>really</em> good at at least this one thing. I‚Äôm way more productive in Go than when I was just starting out (obviously, otherwise I should probably have switched to plumbing), and I hope to stay on that path, and maybe even increase the slope. EXPONENTIALLY. Okay, less will do as well.</p>

<p>Anyhoo, these are my thoughts. Bring on the nails, and I‚Äôll beat them with a bloody, determined gopher who is screaming ‚ÄúIS THAT ALL YOU GOT?!?‚Äù.</p>

<p>(Also see the <a href="https://news.ycombinator.com/item?id=41223902">Hacker News</a> and <a href="https://www.reddit.com/r/golang/comments/1eqah5h/go_is_my_hammer_and_everything_is_a_nail/">Reddit</a> discussions about this post.)</p><div><p><img src="https://www.maragu.dev/images/markus.jpg" alt="A picture of me, Markus." title="A picture of me, Markus."></p><p>I‚Äôm Markus, a professional software consultant and developer. ü§ì‚ú® You can reach me at <a href="mailto:markus@maragu.dk">markus@maragu.dk</a>, or check social links in the page footer.</p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[US Government wants to make it easier for you to click the 'unsubscribe' button (321 pts)]]></title>
            <link>https://apnews.com/article/consumer-protection-ftc-fcc-biden-250f6eece6e2665535019128e8fa38da</link>
            <guid>41223774</guid>
            <pubDate>Mon, 12 Aug 2024 12:46:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://apnews.com/article/consumer-protection-ftc-fcc-biden-250f6eece6e2665535019128e8fa38da">https://apnews.com/article/consumer-protection-ftc-fcc-biden-250f6eece6e2665535019128e8fa38da</a>, See on <a href="https://news.ycombinator.com/item?id=41223774">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                                        <p>WASHINGTON (AP) ‚Äî In the name of consumer protection, a slew of U.S. federal agencies are working to make it easier for Americans to click the unsubscribe button for unwanted memberships and recurring payment services. </p><p>A broad new government initiative, dubbed ‚ÄúTime Is Money,‚Äù includes a rollout of new regulations and the promise of more for industries spanning from healthcare and fitness memberships to media subscriptions.</p><p>‚ÄúThe administration is cracking down on all the ways that companies, through paperwork, hold times and general aggravation waste people‚Äôs money and waste people‚Äôs time and really hold onto their money,‚Äù Neera Tanden, White House domestic policy adviser, told reporters Friday in advance of the announcement.</p><p>‚ÄúEssentially in all of these practices, companies are delaying services to you or really trying to make it so difficult for you to cancel the service that they get to hold onto your money for longer and longer,‚Äù Tanden said. ‚ÄúThese seemingly small inconveniences don‚Äôt happen by accident ‚Äî they have huge financial consequences.‚Äù</p>
    

<p>Efforts being rolled out Monday include a new Federal Communications Commission inquiry into whether to impose requirements on communications companies that would make it as easy to cancel a subscription or service as it was to sign up for one. </p>

<p>The Federal Trade Commission in <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://www.ftc.gov/news-events/news/press-releases/2023/03/federal-trade-commission-proposes-rule-provision-making-it-easier-consumers-click-cancel-recurring" target="_blank" rel="noopener">March 2023 initiated</a></span> ‚Äúclick to cancel‚Äù rulemaking requiring companies to let customers end subscriptions as easily as they started them. </p>
    
<p>Also Monday, the heads of the departments of Labor and of Health and Human Services are asking health insurance companies and group health plans to make improvements to customer interactions with their health coverage, and ‚Äúin the coming months will identify additional opportunities to improve consumers‚Äô interactions with the health care system,‚Äù according to a White House summary.</p>
    

<p>The government already has launched several initiatives aimed at improving the consumer experience.</p><p>In October, the FTC announced a proposed rule to <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/biden-junk-fees-ftc-hidden-bogus-80e5c17dc7607b99aa92c6c816b96e52">ban hidden and bogus junk fees</a></span>, which can mask the total cost of concert tickets, hotel rooms and utility bills.</p><p>In April, the Transportation Department finalized rules that would require airlines to automatically issue cash refunds for things like delayed flights and to better disclose <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/american-airlines-points-raising-bag-fees-1530a7ba48a0c6685ce2ef7da58a983a">fees for baggage</a></span> or reservation cancellations.</p><p>The department also has taken actions against individual companies accused of misleading customers. </p><p>In June, the Justice Department, referred by the FTC, <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://www.ftc.gov/system/files/ftc_gov/pdf/040-UnredactedComplaint.pdf" target="_blank" rel="noopener">filed a lawsuit against software maker Adobe</a></span> and two of its executives, Maninder Sawhney and David Wadhwani, for allegedly pushing consumers toward the firm‚Äôs ‚Äúannual paid monthly‚Äù subscription without properly disclosing that canceling the plan in the first year could cost hundreds of dollars. </p><p>Dana Rao, Adobe‚Äôs general counsel, said in an emailed statement that Adobe disagrees with the lawsuit‚Äôs characterization of its business and ‚Äúwe will refute the FTC‚Äôs claims in court.‚Äù</p><p> ‚ÄúThe early termination fees equate to minimal impact to our revenue, accounting for less than half a percent of our total revenue globally, but is an important part of our ability to offer customers a choice in plans that balance cost and commitment,‚Äù Rao said.</p>
    

<p>Some business advocates are not a fan of the government‚Äôs overall efforts to crack down on junk fees. </p><p>Sean Heather, senior vice president of international regulatory affairs and antitrust at the U.S. Chamber of Commerce, said the initiative is ‚Äúnothing more than an attempt to micromanage businesses‚Äô pricing structures, often undermining businesses‚Äô ability to give consumers options at different price points.‚Äù</p>
                                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Interstellar movie is implemented with Einstein's equations in 40k lines C++ (116 pts)]]></title>
            <link>https://twitter.com/bitfield/status/1020632237493112833</link>
            <guid>41222862</guid>
            <pubDate>Mon, 12 Aug 2024 10:04:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/bitfield/status/1020632237493112833">https://twitter.com/bitfield/status/1020632237493112833</a>, See on <a href="https://news.ycombinator.com/item?id=41222862">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Blitz: A lightweight, modular, extensible web renderer (342 pts)]]></title>
            <link>https://github.com/DioxusLabs/blitz</link>
            <guid>41221252</guid>
            <pubDate>Mon, 12 Aug 2024 04:52:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/DioxusLabs/blitz">https://github.com/DioxusLabs/blitz</a>, See on <a href="https://news.ycombinator.com/item?id=41221252">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">Blitz: A lightweight, modular, extensible web renderer</h2><a id="user-content-blitz-a-lightweight-modular-extensible-web-renderer" aria-label="Permalink: Blitz: A lightweight, modular, extensible web renderer" href="#blitz-a-lightweight-modular-extensible-web-renderer"></a></p>
<p dir="auto">Blitz is a "native" HTML/CSS renderer built to support the "Dioxus Native" project. It is effectively a lightweight webview except that the JavaScript engine is replaced with a native Rust API which allows Rust reactivity / state management libraries like Dioxus to interface with it directly.</p>
<p dir="auto">Talk to us in: the #native channel in the <a href="https://discord.gg/v4mwT25E" rel="nofollow">Dioxus Discord</a></p>
<p dir="auto"><h4 tabindex="-1" dir="auto">It currenly has two frontends:</h4><a id="user-content-it-currenly-has-two-frontends" aria-label="Permalink: It currenly has two frontends:" href="#it-currenly-has-two-frontends"></a></p>
<ul dir="auto">
<li>An HTML/markdown frontend that can render an HTML string. This is useful for previewing HTML and/or markdown files but currently lacks interactivity.</li>
<li>A Dioxus frontend that can render a Dioxus VirtualDom. This has full interactivity support via Dioxus's event handling.</li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto">Blitz builds upon:</h4><a id="user-content-blitz-builds-upon" aria-label="Permalink: Blitz builds upon:" href="#blitz-builds-upon"></a></p>
<ul dir="auto">
<li><a href="https://github.com/servo/stylo">Stylo</a> (Firefox's parallel browser-grade CSS engine) for CSS resolution</li>
<li><a href="https://github.com/linebender/vello">Vello</a> + <a href="https://github.com/gfx-rs/wgpu">WGPU</a> for rendering</li>
<li><a href="https://github.com/DioxusLabs/taffy">Taffy</a> for box-level layout</li>
<li><a href="https://github.com/linebender/parley">Parley</a> for text/inline-level layout</li>
<li><a href="https://github.com/AccessKit/accesskit">AccessKit</a> for accessibility</li>
<li><a href="https://github.com/rust-windowing/winit">Winit</a> for windowing and input handling</li>
</ul>
<blockquote>
<p dir="auto">Note: This repo contains a new version of Blitz which uses Stylo. The source code for the old version is still available on the <a href="https://github.com/DioxusLabs/blitz/tree/legacy">legacy</a> branch but is not under active development.</p>
</blockquote>
<p dir="auto"><h2 tabindex="-1" dir="auto">Screenshots</h2><a id="user-content-screenshots" aria-label="Permalink: Screenshots" href="#screenshots"></a></p>
<p dir="auto">The Dioxus renderer:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/DioxusLabs/blitz/blob/main/examples/screenshot.png"><img src="https://github.com/DioxusLabs/blitz/raw/main/examples/screenshot.png" alt="screenshot"></a></p>
<p dir="auto">The HTML renderer (rendering google.com):</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/DioxusLabs/blitz/blob/main/examples/google.png"><img src="https://github.com/DioxusLabs/blitz/raw/main/examples/google.png" alt="screenshot"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Trying it out</h2><a id="user-content-trying-it-out" aria-label="Permalink: Trying it out" href="#trying-it-out"></a></p>
<ol dir="auto">
<li>Clone this repo</li>
<li>Run an example:
<ul dir="auto">
<li><code>cargo run --example google</code></li>
<li><code>cargo run --example url https://myurl.com</code></li>
<li>Other example available</li>
<li>Add <code>--release</code> for better runtime performance</li>
</ul>
</li>
<li>Press <code>Ctrl/Cmd + +</code> / <code>Ctrl/Cmd + -</code> to change the scaling, press F1 to show layout rectangles</li>
</ol>
<p dir="auto"><h2 tabindex="-1" dir="auto">Goals</h2><a id="user-content-goals" aria-label="Permalink: Goals" href="#goals"></a></p>
<p dir="auto">Blitz is designed to render HTML and CSS - we <em>don't</em> want to support the entirety of browser features (or at least we want to make all such "extra" features opt-in). In our opinion, the browser is bloated for the basic usecase of rendering HTML/CSS.</p>
<p dir="auto">We do intend to support:</p>
<ul dir="auto">
<li>Modern HTML layout (flexbox, grid, table, block, inline, absolute/fixed, etc).</li>
<li>Advanced CSS (complex selectors, media queries, css variables)</li>
<li>HTML Form controls</li>
<li>Accessibility using AccessKit</li>
<li>Extensibility via custom widgets</li>
</ul>
<p dir="auto">Notably we <em>don't</em> provide features like webrtc, websockets, bluetooth, localstorage, etc. In a native app, much of this functionality can be fulfilled using regular Rust crates and doesn't need to be coupled with the renderer.</p>
<p dir="auto">We don't yet have Blitz bindings for other languages (JavaScript, Python, etc) but would accept contributions along those lines.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Architecture</h2><a id="user-content-architecture" aria-label="Permalink: Architecture" href="#architecture"></a></p>
<p dir="auto">Blitz is split into several pieces:</p>
<ul dir="auto">
<li><code>blitz-dom</code>: The core DOM abstraction that includes style resolution and layout but not drawing/painting. Combines the best of Stylo and Taffy that allows you to build extendable dom-like structures.</li>
<li><code>blitz</code>: Adds a Vello/WGPU based renderer to <code>blitz-dom</code></li>
<li><code>dioxus-blitz</code>: A dioxus integration layer for blitz. Render your Dioxus app using Blitz. Currently <code>dioxus-blitz</code> also contains the HTML renderer but this will likely be split out into it's own package in future.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Status</h2><a id="user-content-status" aria-label="Permalink: Status" href="#status"></a></p>
<p dir="auto">Blitz is currently <strong>experimental</strong>. We are actively working on bringing into a usable state but we would not yet recommend building apps with it.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">TODO</h3><a id="user-content-todo" aria-label="Permalink: TODO" href="#todo"></a></p>
<ul>
<li> Core DOM tree abstraction</li>
<li> Parse styles using html5ever</li>
<li> Compute styles for html5ever document</li>
<li> Compute layout with Taffy</li>
<li> Render using WGPU</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Rendering</h3><a id="user-content-rendering" aria-label="Permalink: Rendering" href="#rendering"></a></p>
<ul>
<li> Render to window</li>
<li> Render to image</li>
<li> Gradients</li>
<li> Border/Outline</li>
<li> Raster images (png, jpeg, etc)</li>
<li> Zoom</li>
<li> SVG
<ul>
<li> External SVGs (basic support)</li>
<li> Inline SVGs</li>
</ul>
</li>
<li> Shadows</li>
<li> Animations/Transitions</li>
<li> Standard form controls (Checkbox/Dropdown/slider/etc)</li>
<li> Custom widgets</li>
<li> Shadow elements</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Layout</h3><a id="user-content-layout" aria-label="Permalink: Layout" href="#layout"></a></p>
<ul>
<li> Inline (partial support - implementation still immature)</li>
<li> Block</li>
<li> Flexbox</li>
<li> Grid
<ul>
<li> Named grid lines</li>
<li> Subgrid</li>
</ul>
</li>
<li> Table</li>
<li> Z-index</li>
<li> Additional CSS features
<ul>
<li> <code>box-sizing: content-box</code></li>
<li> <code>calc()</code></li>
<li> <code>position: static</code></li>
<li> <code>direction: rtl</code></li>
<li> <code>transform</code></li>
</ul>
</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Text</h3><a id="user-content-text" aria-label="Permalink: Text" href="#text"></a></p>
<ul>
<li> Font loading
<ul>
<li> System font loading</li>
<li> Web font loading</li>
</ul>
</li>
<li> Text
<ul>
<li> Shaping / Bidi</li>
<li> Layout / line breaking</li>
<li> Font size / line height</li>
<li> Text color</li>
<li> Bold / Italic</li>
<li> Underline / Strikethrough</li>
</ul>
</li>
<li> Text selection</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Input</h3><a id="user-content-input" aria-label="Permalink: Input" href="#input"></a></p>
<ul>
<li> Scrolling
<ul>
<li> The root view</li>
<li> Any <code>overflow: scroll</code> element</li>
</ul>
</li>
<li> Hover detection</li>
<li> Click handling</li>
<li> Text input</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Performance</h3><a id="user-content-performance" aria-label="Permalink: Performance" href="#performance"></a></p>
<ul>
<li> Hot reloading</li>
<li> Scrolling without re-resolving style and layout</li>
<li> Style caching</li>
<li> Layout caching</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Other</h3><a id="user-content-other" aria-label="Permalink: Other" href="#other"></a></p>
<ul>
<li> Multiwindow</li>
<li> Accessibility tree</li>
<li> Focus</li>
<li> Devtools</li>
<li> Hooks for context menu</li>
<li> use_wgpu_context() to grab an element as an arbitrary render surface</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">This project is dual licensed under the Apache 2.0 and MIT licenses</p>
<p dir="auto">Unless you explicitly state otherwise, any contribution intentionally submitted for inclusion in stylo-dioxus by you, shall be licensed as MIT, without any additional terms or conditions.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Comma.ai: Refactoring for Growth (127 pts)]]></title>
            <link>https://blog.comma.ai/refactoring-for-growth/</link>
            <guid>41220284</guid>
            <pubDate>Mon, 12 Aug 2024 00:43:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.comma.ai/refactoring-for-growth/">https://blog.comma.ai/refactoring-for-growth/</a>, See on <a href="https://news.ycombinator.com/item?id=41220284">Hacker News</a></p>
<div id="readability-page-1" class="page"><section itemprop="text"><p>In 2020, we announced the <a href="https://blog.comma.ai/the-unconjoined-triangle-of-success/">unconjoined triangle of success</a> made up of the research, openpilot, and operations teams. Over the last four years, those teams shipped <a href="https://blog.comma.ai/comma-three-press-release">two</a> <a href="https://blog.comma.ai/comma3X">products</a>, a <a href="https://commabody.com/" target="_blank" rel="noopener noreferrer">robotics platform</a>, 3 major and 30 minor openpilot <a href="https://github.com/commaai/openpilot/blob/master/RELEASES.md" target="_blank" rel="noopener noreferrer">releases</a>, the first end-to-end <a href="https://blog.comma.ai/end-to-end-lateral-planning/">driving</a> <a href="https://blog.comma.ai/090release/#experimental-mode">agent</a>, and a drive to <a href="https://blog.comma.ai/taco-bell">Taco Bell</a> without a disengagement.</p>
<p>As the company has grown, it‚Äôs time to refactor things a bit. Remember that our mission is to:</p>
<blockquote><p><strong>Solve self-driving cars while delivering shippable intermediaries.</strong></p></blockquote>
<p>comma is fundamentally a consumer electronics company that ships the latest AI to you as a product. Consumer electronics is a good business to be in; we‚Äôre building products that we‚Äôd like to buy, and it allows us to <a href="https://github.com/commaai/" target="_blank" rel="noopener noreferrer">build in the open</a>.</p>
<h2 id="the-new-triangle">The New Triangle</h2>
<figure><picture> <source srcset="https://blog.comma.ai/img/refactoring_for_growth/teams.webp" type="image/webp"> <img src="https://blog.comma.ai/img/refactoring_for_growth/teams.png" alt=""> </picture><figcaption></figcaption></figure><p>The <strong>operations team</strong> is in charge of company infrastructure. This includes money, people, logistics, the comma fleet, and keeping everything running.</p>
<p>The <strong>product team</strong> designs and manufactures the product. This includes the hardware, low level <a href="https://github.com/commaai/openpilot/tree/master/system" target="_blank" rel="noopener noreferrer">software</a> needed to run the autonomous agent software, as well the <a href="https://comma.ai/connect" target="_blank" rel="noopener noreferrer">app</a>.</p>
<p>The <a href="https://blog.comma.ai/autonomy"><strong>autonomy team</strong></a> is responsible for making the <a href="https://github.com/commaai/openpilot/tree/master/selfdrive" target="_blank" rel="noopener noreferrer">autonomous agent software</a>, and all of the infrastructure needed for that.</p>
<p>The operations and product teams work together to ship you the comma 3X, and the autonomy and product teams ship openpilot to run on your comma 3X.</p>
<h2 id="lets-take-a-look-at-where-were-at-now">Let‚Äôs take a look at where we‚Äôre at now</h2>
<p>comma is a 21 person company made up of mostly engineers, and we build and ship all our hardware and software from our San Diego, CA <a href="https://youtu.be/PFjssb7r_uU" target="_blank" rel="noopener noreferrer">office</a>.</p>
<p>We‚Äôre shipping <a href="https://blog.comma.ai/097release">openpilot 0.9.7</a>, with 54% of miles and 29% of time engaged.</p>
<figure><picture> <source srcset="https://blog.comma.ai/img/refactoring_for_growth/engagement.webp" type="image/webp"> <img src="https://blog.comma.ai/img/refactoring_for_growth/engagement.png" alt=""> </picture><figcaption></figcaption></figure><p>We‚Äôre shipping <a href="https://x.com/comma_ai/status/1794107930016416001" target="_blank" rel="noopener noreferrer">comma 3Xs</a> to a growing fleet, where every comma 3X sold makes us money.</p>
<figure><picture> <source srcset="https://blog.comma.ai/img/refactoring_for_growth/daily_drivers.webp" type="image/webp"> <img src="https://blog.comma.ai/img/refactoring_for_growth/daily_drivers.jpeg" alt=""> </picture><figcaption></figcaption></figure><p>This is our <a href="https://www.mycronic.com/product-areas/pcb-assembly/products/smt/jet-printing/my700jp/" target="_blank" rel="noopener noreferrer">MY700</a> jetting a comma 3X panel. We‚Äôre scaling up the factory to output 10x more devices.</p>
<figure> <video loop="true" autoplay="autoplay" muted="" playsinline=""> <source src="https://blog.comma.ai/img/comma3X/jetprinting.mp4"> </video><figcaption></figcaption></figure><h2 id="whats-next">What‚Äôs next?</h2>
<p>It should be clear now that widespread deployment of driverless cars is still years away. Meanwhile, openpilot‚Äôs partial autonomy improves driving on 10 million compatible cars currently on the road, with more sold every day.</p>
<p>With user growth on a product that‚Äôs profitable and machine learning simulation <a href="https://youtu.be/dfIZGEXvXis" target="_blank" rel="noopener noreferrer">working</a>, the path forward is clear:</p>
<ol>
<li>Drive down disengagements with our new simulator</li>
<li>Improve the product until it looks like something you can buy at Best Buy and drive out of the parking lot with</li>
<li>Scale up production until we have a lights-out factory</li>
</ol>
<h2 id="join-us">Join Us</h2>
<p>We‚Äôre growing the team by ~5 people to help solve autonomy, improve the product, and scale up production. You‚Äôll hear more about each team in the following posts from the head of each team.</p>
<p>Check out our new <a href="https://comma.ai/leaderboard" target="_blank" rel="noopener noreferrer">leaderboard</a> and <a href="https://comma.ai/jobs" target="_blank" rel="noopener noreferrer">jobs page</a>. It‚Äôs got some fun programming challenges that also happen to be hiring challenges.</p>
<h3 id="faq">FAQ</h3>
<p><em>&gt; If the software is open source, how will comma make money?</em></p>
<p>We sell a <a href="https://comma.ai/shop" target="_blank" rel="noopener noreferrer">hardware product</a> and offer a (very optional) <a href="https://comma.ai/connect" target="_blank" rel="noopener noreferrer">software subscription</a>.</p>
<p>And we‚Äôre already making money. We last raised money <a href="https://www.crunchbase.com/organization/comma" target="_blank" rel="noopener noreferrer">two years ago</a>, and since then, have been profitable from sales in our <a href="https://comma.ai/shop" target="_blank" rel="noopener noreferrer">shop</a>.</p>
<p><em>&gt; Why open source the software at all?</em></p>
<p>We like working on open source projects, and it leaves no room for <a href="https://x.com/comma_ai/status/1793018640968863829" target="_blank" rel="noopener noreferrer">rent seeking</a>.</p>
<p><em>&gt; If the software is open source, won‚Äôt there be clones?</em></p>
<p>Like <a href="https://github.com/commaai/openpilot/forks" target="_blank" rel="noopener noreferrer">forks</a> of openpilot, clones grow the ecosystem. The openpilot software and hardware ecosystem has grown well beyond us, and we‚Äôll continue to do fine as long as we offer a good product for a fair price.</p>
<p><em>&gt; What happens when cars ship with openpilot-quality ADAS?</em></p>
<p>Have the auto manufacturers even shipped you a CarPlay-level infotainment system? How about OTA updates?</p>
<p><em>&gt; Why not partner with the car companies?</em></p>
<p>The quality of the product is currently the bottleneck for getting openpilot in more cars. And it‚Äôs not clear that <a href="https://x.com/alvinfoo/status/1812713741785440381" target="_blank" rel="noopener noreferrer">they</a> can give us better interfaces to the car than <a href="https://github.com/commaai/opendbc" target="_blank" rel="noopener noreferrer">opendbc</a>.</p>
<p>Cars will eventually <a href="https://blog.comma.ai/working-with-comma-a-guide-for-car-companies/">ship with openpilot</a>, but it remains to be seen how this plays out. Maybe a Tier 1 will do it for the existing manufacturers, or perhaps some <a href="https://aptera.us/openpilot-release/" target="_blank" rel="noopener noreferrer">new manufacturer</a> will be the first.</p></section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[China's total wind and solar capacity outstrips coal (166 pts)]]></title>
            <link>https://renewablesnow.com/news/chinas-total-wind-and-solar-capacity-outstrips-coal-rystad-says-865106/</link>
            <guid>41220098</guid>
            <pubDate>Sun, 11 Aug 2024 23:54:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://renewablesnow.com/news/chinas-total-wind-and-solar-capacity-outstrips-coal-rystad-says-865106/">https://renewablesnow.com/news/chinas-total-wind-and-solar-capacity-outstrips-coal-rystad-says-865106/</a>, See on <a href="https://news.ycombinator.com/item?id=41220098">Hacker News</a></p>
Couldn't get https://renewablesnow.com/news/chinas-total-wind-and-solar-capacity-outstrips-coal-rystad-says-865106/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[How to avoid losing items? Holding pens (304 pts)]]></title>
            <link>https://blog.alexwendland.com/2024-07-07-holding-pens/</link>
            <guid>41220059</guid>
            <pubDate>Sun, 11 Aug 2024 23:47:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.alexwendland.com/2024-07-07-holding-pens/">https://blog.alexwendland.com/2024-07-07-holding-pens/</a>, See on <a href="https://news.ycombinator.com/item?id=41220059">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><blockquote>
<p>I put it in a safe spot.</p>
<p>-- a phrase my mom would always say when she‚Äôd lost something.</p>
</blockquote>
<p><strong>Why do we lose things inside our homes?</strong></p>
<p>When we are interrupted or need to hastily respond to a new demand, we often make quick decisions about where to place physical items. We always place them in locations which make sense given our current state of mind, but often that state of mind is fleeting, and so we forget where we put our things.</p>
<p>The ideal solution is to have assigned place(s) for each item, and only ever store items in their assigned places. For example, my keys are only ever allowed in my back right pocket, the keychain hook in my backpack, or the bottom-left cubby of my nightstand.</p>
<p>However, we regularly run into 1.) items which are too transient/unimportant to have memorable assigned place, 2.) instances where we don‚Äôt have time to take the item to it‚Äôs assigned place (e.g., because it‚Äôs in another room).</p>
<p><strong>Solution</strong></p>
<p><em>Holding Pens</em>: designated areas in every room which exist to hold anchorless items.</p>
<p>A holding pen:</p>
<ol>
<li>Is a tray roughly 12" x 18", so it can fit most items you need to put down.</li>
<li>Has a small lip on the sides, so items don‚Äôt fall out.</li>
<li>Is located in every room, so the activation energy to use a holding pen is approximately the same as placing the item down randomly.</li>
<li>Is always used to store items, unless an item is being placed in its permanent location.</li>
<li>Is cleaned out regularly‚Äîideally daily, at most weekly‚Äî, so that it doesn‚Äôt become a storage area.</li>
</ol>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Generating Simpson's Paradox with Z3 (161 pts)]]></title>
            <link>https://kevinlynagh.com/z3-simpsons-paradox/</link>
            <guid>41219562</guid>
            <pubDate>Sun, 11 Aug 2024 21:53:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kevinlynagh.com/z3-simpsons-paradox/">https://kevinlynagh.com/z3-simpsons-paradox/</a>, See on <a href="https://news.ycombinator.com/item?id=41219562">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><a href="https://kevinlynagh.com/">‚Üê Back to Kevin's homepage</a><span>Published: 2024 August 11</span></p><p>I‚Äôve been reading Pearl‚Äôs <a href="https://amzn.to/3M0TwON">Causal Inference in Statistics</a>, and one of the exercises poses this problem:</p>

<blockquote>
<p>Baseball batter A has a better batting average than his teammate B. However, someone notices that B has a better batting average than A against both right-handed and left-handed pitchers. How can this happen?</p>
</blockquote>

<p>The <a href="https://github.com/Z3Prover/z3">Z3 Theorem Prover</a> is a great lil‚Äô tool for solving these sorts of problems.
The following generates an example of this situation, which is more commonly known as <a href="https://en.wikipedia.org/wiki/Simpson%27s_paradox">Simpson‚Äôs Paradox</a>.</p>
<div><pre><span></span>;; Player A's hits and misses against left-handed pitchers
(declare-const A_L_hits Int)
(declare-const A_L_misses Int)

;; and right-handed ones.
(declare-const A_R_hits Int)
(declare-const A_R_misses Int)

;; ditto for player B
(declare-const B_L_hits Int)
(declare-const B_L_misses Int)
(declare-const B_R_hits Int)
(declare-const B_R_misses Int)

;; All hits and miss counts must be positive
(assert (&lt; 0 A_L_hits))
(assert (&lt; 0 A_L_misses))
(assert (&lt; 0 A_R_hits))
(assert (&lt; 0 A_R_misses))
(assert (&lt; 0 B_L_hits))
(assert (&lt; 0 B_L_misses))
(assert (&lt; 0 B_R_hits))
(assert (&lt; 0 B_R_misses))

;; overall batting averages
(define-const A Real
  (/ (+ A_L_hits A_R_hits)
     (+ A_L_hits A_R_hits A_L_misses A_R_misses)))
(define-const B Real
  (/ (+ B_L_hits B_R_hits)
     (+ B_L_hits B_R_hits B_L_misses B_R_misses)))

;; batting averages against left and right-handed pitches
(define-const A_L Real
  (/ A_L_hits (+ A_L_hits A_L_misses)))
(define-const A_R Real
  (/ A_R_hits (+ A_R_hits A_R_misses)))
(define-const B_L Real
  (/ B_L_hits (+ B_L_hits B_L_misses)))
(define-const B_R Real
  (/ B_R_hits (+ B_R_hits B_R_misses)))

;; A has a higher overall batting average
(assert (&lt; B A))

;; B has a better average against left-handed pitchers
(assert (&lt; A_L B_L))

;; B has a better average against right-handed pitchers
(assert (&lt; A_R B_R))

(set-option :pp.decimal true)
(check-sat)
(get-model)
(get-value (A A_L A_R A_L_hits A_L_misses A_R_hits A_R_misses))
(get-value (B B_L B_R B_L_hits B_L_misses B_R_hits B_R_misses))
</pre></div>
<p>Running Z3 against this file generates this output, showing an example satisyfing our constraints:</p>
<div><pre><span></span>((A 0.2352941176?)
 (A_L 0.4)
 (A_R 0.1666666666?)
 (A_L_hits 2)
 (A_L_misses 3)
 (A_R_hits 2)
 (A_R_misses 10))

((B 0.2307692307?)
 (B_L 0.5)
 (B_R 0.1818181818?)
 (B_L_hits 1)
 (B_L_misses 1)
 (B_R_hits 2)
 (B_R_misses 9))
</pre></div>
<p>The batting avergaes in tabular form:</p>

<table><thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Player</td>
<td>Left</td>
<td>Right</td>
<td>Overall</td>
</tr>
<tr>
<td>A</td>
<td>0.4</td>
<td>0.167</td>
<td>0.235</td>
</tr>
<tr>
<td>B</td>
<td>0.5</td>
<td>0.182</td>
<td>0.230</td>
</tr>
</tbody></table>

<p>The key to understanding the paradox is that the players did not bat against the same set of pitchers. A batted against 5 lefties and 12 righties; B against 2 and 11.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Apple Prototypes and Corporate Secrets Are for Sale Online‚ÄìIf You Know Where (108 pts)]]></title>
            <link>https://www.wired.com/story/apple-prototypes-corporate-data/</link>
            <guid>41219122</guid>
            <pubDate>Sun, 11 Aug 2024 20:29:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.wired.com/story/apple-prototypes-corporate-data/">https://www.wired.com/story/apple-prototypes-corporate-data/</a>, See on <a href="https://news.ycombinator.com/item?id=41219122">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-testid="ArticlePageChunks"><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>It's probably been a while since anyone thought about Apple's <a href="https://www.wired.com/2009/08/pr-timecapsule/">router and network storage combo</a> called Time Capsule. Released in 2008 and discontinued in 2018, the product has mostly receded into the sands of gadget time. So when independent security researcher Matthew Bryant recently bought a Time Capsule from the United Kingdom on <a href="https://www.wired.com/story/how-to-buy-used-on-ebay/">eBay</a> for $38 (plus more than $40 to ship it to the United States), he thought he would just be getting one of the stalwart white monoliths at the end of its earthly journey. Instead he stumbled on something he didn't expect: a trove of data that appeared to be a copy of the main backup server for all European Apple Stores during the 2010s. The information included service tickets, employee bank account data, internal company documentation, and emails.</p><p>‚ÄúIt had everything you can possibly imagine,‚Äù Bryant tells WIRED. ‚ÄúFiles had been deleted off the drive, but when I did the forensics on it, it was definitely not empty.‚Äù</p><p>Bryant hadn't stumbled on the Time Capsule completely by accident. At the <a href="https://www.wired.com/tag/defcon/">Defcon</a> security conference in Las Vegas on Saturday, he's presenting findings from a months-long project in which he scraped secondhand electronics listings from sites like eBay, Facebook Marketplace, and China's Xianyu, and then ran computer vision analysis on them in an attempt to detect devices that were once part of corporate IT fleets.</p><p>Bryant realized that the sellers hawking office devices, prototypes, and manufacturing equipment often weren't aware of their products' significance, so he couldn't comb tags or descriptions to find enterprise gems. Instead, he devised an optical character recognition processing cluster by chaining together a dozen dilapidated second-generation <a href="https://www.wired.com/review/apple-iphone-se-2022/">iPhone SEs</a> and harnessing Apple's Live Text optical character-recognition feature to find possible inventory tags, barcodes, or other corporate labels in listing photos. The system monitored for new listings, and if it turned up a possible hit, Bryant would get an alert so he could assess the device photos himself.</p><p>In the case of the Time Capsule, the listing photos showed a label on the bottom of the device that said ‚ÄúProperty of Apple Computer, Expensed Equipment.‚Äù After he evaluated the Time Capsule's contents, Bryant notified Apple about his findings, and the company's London security office eventually asked him to ship the Time Capsule back. Apple did not immediately return a request from WIRED for comment about Bryant's research.</p><p>‚ÄúThe main company in the talk for proofs of concept is Apple, because I view them as the most mature hardware company out there. They have all their hardware specially counted, and they really care about the security of their operations quite a bit,‚Äù Bryant says. ‚ÄúBut with any Fortune 500 company, it‚Äôs basically a guarantee that their stuff will end up on sites like eBay and other secondhand markets eventually. I can‚Äôt think of any company where I haven‚Äôt seen at least some piece of equipment and got an alert on it from my system.‚Äù</p><p>Another alert from his search system led Bryant to purchase a prototype iPhone 14 intended for developer use internally at Apple. Such iPhones are coveted by both bad actors and security researchers because they often run special versions of iOS that are less locked down than the consumer product and include debugging functionality that's invaluable for gaining insight into the platform. Apple runs a program to <a href="https://www.wired.com/story/apple-hackable-iphone-research/">give certain researchers access to similar devices</a>, but the company only grants these special iPhones to a limited group, and researchers have told WIRED that they are typically outdated iPhone models. Bryant says he paid $165 for the developer-use iPhone 14.</p></div><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>Finally, Bryant says that manufacturing and assembly-line devices can be particularly revealing and can also be found on secondhand markets‚Äîespecially platforms in China, since so many electronics are assembled in the country. Bryant was curious to see if he could find any equipment that had formerly been used in a <a href="https://www.wired.com/2011/02/ff-joelinchina/">Foxconn factory where iPhones are notoriously assembled</a>. By analyzing Chinese listings with his computer vision system, Bryant says he was able to piece together how Foxconn‚Äôs asset management system works and how the company labels its devices‚Äîparticularly those used on the factory floor. Eventually he found a Mac Mini that had a bunch of the Foxconn tags on it and had seemingly been used on a Foxconn quality-and-assurance testing line. But the computer was simply listed for parts, because the photos clearly showed that it had a large drill hole running through the device.</p><p>After examining schematics of various generations of Mac Minis, though, Bryant concluded that it was possible the drill had missed the magnetic tray where data would be stored on the hard drive. He took a chance and ordered the computer from China and assessed it himself. Bryant isn't a hardware expert, but once he received the device, it also seemed to him that the physical destruction had likely not achieved its goal. So he sent the Mac Mini to a forensics lab in Los Angeles, which was ultimately able to recover all the data from the drive.</p><p>‚ÄúIt had the internal software that Apple uses on their factory line to do testing, including special interfaces for communicating with prototypes and QA units,‚Äù Bryant says. ‚ÄúAnd the computer also contained credentials for Foxconn and logs.‚Äù</p><p>Bryant again reported his findings to Apple and returned the Mac Mini to them.</p><p>The project contains a warning for companies, both about the inevitability of having some device attrition and the importance of taking asset management and deprovisioning seriously. For hackers and eagle-eyed deal seekers alike, though, rogue corporate devices may be a new item for the shopping list.</p></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Adbfs-rootless ‚Äì Mount Android phones on Linux with adb. No root required (213 pts)]]></title>
            <link>https://github.com/spion/adbfs-rootless</link>
            <guid>41219080</guid>
            <pubDate>Sun, 11 Aug 2024 20:22:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/spion/adbfs-rootless">https://github.com/spion/adbfs-rootless</a>, See on <a href="https://news.ycombinator.com/item?id=41219080">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto">This variant of adbfs works even WITHOUT having root access (busybox) on your phone!</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Instructions:</h2><a id="user-content-instructions" aria-label="Permalink: Instructions:" href="#instructions"></a></p>
<p dir="auto">You will need <code>libfuse-dev</code> and <code>adb</code>. You will also need <code>build-essential</code>, <code>git</code>, and <code>pkg-config</code>. On Ubuntu:</p>
<div data-snippet-clipboard-copy-content="sudo apt-get install libfuse-dev android-tools-adb
sudo apt-get install build-essential git pkg-config"><pre><code>sudo apt-get install libfuse-dev android-tools-adb
sudo apt-get install build-essential git pkg-config
</code></pre></div>
<p dir="auto">Clone the repository:</p>
<div data-snippet-clipboard-copy-content="git clone git@github.com:spion/adbfs-rootless.git
cd adbfs-rootless    "><pre><code>git clone git@github.com:spion/adbfs-rootless.git
cd adbfs-rootless    
</code></pre></div>
<p dir="auto">Build:</p>

<p dir="auto">Optional: If you have a separate copy of android-sdk and would
like to use that adb, copy the binary adbfs to the <code>android-sdk/platform-tools</code>
directory. If platform-tools is in your $PATH you can skip this step.</p>
<p dir="auto">Create a mount point if needed (e.g. in your home directory):</p>

<p dir="auto">You can now mount your device (also from the platform-tools dir):</p>

<p dir="auto">If you want to trigger a media rescan after every operation, use the option <code>-o rescan</code>:</p>
<div data-snippet-clipboard-copy-content="./adbfs -o rescan ~/droid"><pre><code>./adbfs -o rescan ~/droid
</code></pre></div>
<p dir="auto">Have fun!</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Troubleshooting</h2><a id="user-content-troubleshooting" aria-label="Permalink: Troubleshooting" href="#troubleshooting"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Error: device not found</h3><a id="user-content-error-device-not-found" aria-label="Permalink: Error: device not found" href="#error-device-not-found"></a></p>
<p dir="auto">When running you get the following error:</p>
<div data-snippet-clipboard-copy-content="--*-- exec_command: adb shell ls
error: device not found"><pre><code>--*-- exec_command: adb shell ls
error: device not found
</code></pre></div>
<p dir="auto">Solution: Make sure that <a href="http://www.droidviews.com/how-to-enable-developer-optionsusb-debugging-mode-on-devices-with-android-4-2-jelly-bean/" rel="nofollow">USB Debugging is enabled</a>.</p>
<p dir="auto">Then <code>fusermount -u /media/mount/path</code> before trying again. Note that if for any reason <code>fusermount</code> is not available in your system, you can use <code>sudo umount /media/mount/path</code> instead.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Error: device offline</h3><a id="user-content-error-device-offline" aria-label="Permalink: Error: device offline" href="#error-device-offline"></a></p>
<p dir="auto">When running you get the following error:</p>
<div data-snippet-clipboard-copy-content="--*-- exec_command: adb shell ls
error: device offline"><pre><code>--*-- exec_command: adb shell ls
error: device offline
</code></pre></div>
<p dir="auto">Solution: Make sure that</p>
<ol dir="auto">
<li>
<p dir="auto">Your android-sdk-tools are up to date. Newer versions
of Android also require newer versions of adb. For more info, see
<a href="http://stackoverflow.com/questions/10680417/error-device-offline" rel="nofollow">this Stack Overflow post</a>.</p>
</li>
<li>
<p dir="auto">You answer <code>Yes</code> when your phone asks whether it should allow the
computer with the specified RSA key to access the device.</p>
</li>
</ol>
<p dir="auto">Then <code>killall -9 adb; fusermount -u /media/mount/path</code> before trying again.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[OpenBSD 7.5 via QEMU on Hetzner physical machine (no phys. access / KVM console) (145 pts)]]></title>
            <link>https://hackmd.gfuzz.de/s/Qsk14kc3i</link>
            <guid>41218737</guid>
            <pubDate>Sun, 11 Aug 2024 19:33:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://hackmd.gfuzz.de/s/Qsk14kc3i">https://hackmd.gfuzz.de/s/Qsk14kc3i</a>, See on <a href="https://news.ycombinator.com/item?id=41218737">Hacker News</a></p>
<div id="readability-page-1" class="page">
    
    <div id="doc">OpenBSD 7.5 (amd64) via qemu on Hetzner physical machine (no phys. access / KVM console)
===
###### tags: `bsd` `gfuzz` `hetzner`

![](/uploads/upload_ebbb2624896e29020bbe185518541662.png)

![](/uploads/upload_aa1472acbb79872dd3c1c3f5951a95fb.png)

```"Life is really simple, but we insist on making it complicated." -- Confucius via ChatGPT```

# Exercise
Setup OpenBSD 7.5 on a physical machine with Hetzner (~35 EUR per month) with RAID1 on 2 SSD drives and encrypted partition.  We neither have access to OpenBSD installation images directly nor can we use an OpenBSD rescue system.

Hetzner actually offers access to web based KVM interface to your server, however this has to be requested and plugged in manually by an onsite staff member.  Normally they are quite fast  providing it - even on a 24/7 base - but access is limited to 3h max and it takes some time to retrieve access to it.

I would like to have a way which is 100% under my control at any time, not only during installation but also having an OpenBSD rescue mode.

This is inspired by [From Linux to NetBSD, with SSH only](https://cloudbsd.xyz/main/)

# TL;DR :smile: 
From Hetzner's rescue image:
```
root@rescue ~ # wget -q https://cdn.openbsd.org/pub/OpenBSD/7.5/amd64/install75.iso
root@rescue ~ # qemu-system-x86_64 \
    -enable-kvm -cpu host \ 
    -nographic \
    -boot d \
    -cdrom install75.iso \
    -drive file=/dev/sda,format=raw,id=sata0,if=virtio \
    -drive file=/dev/sdb,format=raw,id=sata1,if=virtio \
    -m 2048 \
    -smp 4
```
Emulated OpenBSD installation image booting from phys. disks:
```
SeaBIOS (version 1.16.2-debian-1.16.2-1)
iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+7EFCEFC0+7EF0EFC0 CA00

Booting from DVD/CD...
CD-ROM: E0
Loading /7.5/AMD64/CDBOOT
probing: pc0 com0 mem[639K 2046M a20=on]
disk: fd0 hd0+* hd1+* cd0
&gt;&gt; OpenBSD/amd64 CDBOOT 3.65
boot&gt; set tty com0
switching console to com&gt;&gt; OpenBSD/amd64 CDBOOT 3.65
``````

## Hardware specs
Some hardware specs upfront, collecting these before starting with the installation might save you from some trouble later.
### lsblk
```bash
root@rescue ~ # lsblk
NAMEMAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
loop0 7:00 3.1G1 loop 
sda 8:00 465.8G0 disk 
sdb 8:16 0 465.8G0 disk 
```

### Hetzner motd
```
Hardware data:

 CPU1: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz (Cores 8)
 Memory:31891 MB
 Disk /dev/sda: 500 GB (=&gt; 465 GiB) doesn't contain a valid partition table
 Disk /dev/sdb: 500 GB (=&gt; 465 GiB) doesn't contain a valid partition table
 Total capacity 931 GiB with 2 Disks

Network data:
 eth0LINK: yes
 MAC:90:1b:0e:8a:54:91
 IP: 136.243.110.155
 IPv6: 2a01:4f8:171:1129::2/64
 Intel(R) PRO/1000 Network Driver
```

### ip a
```
root@rescue ~ # ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
inet 127.0.0.1/8 scope host lo
 valid_lft forever preferred_lft forever
inet6 ::1/128 scope host 
 valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
link/ether 90:1b:0e:8a:54:91 brd ff:ff:ff:ff:ff:ff
altname enp0s31f6
inet 136.243.110.155/26 scope global eth0
 valid_lft forever preferred_lft forever
inet6 2a01:4f8:171:1129::2/64 scope global 
 valid_lft forever preferred_lft forever
inet6 fe80::921b:eff:fe8a:5491/64 scope link 
 valid_lft forever preferred_lft forever
```

### lspci
```
root@rescue ~ # lspci
00:00.0 Host bridge: Intel Corporation Xeon E3-1200 v5/E3-1500 v5/6th Gen Core Processor Host Bridge/DRAM Registers (rev 07)
00:02.0 VGA compatible controller: Intel Corporation HD Graphics 530 (rev 06)
00:14.0 USB controller: Intel Corporation 100 Series/C230 Series Chipset Family USB 3.0 xHCI Controller (rev 31)
00:14.2 Signal processing controller: Intel Corporation 100 Series/C230 Series Chipset Family Thermal Subsystem (rev 31)
00:16.0 Communication controller: Intel Corporation 100 Series/C230 Series Chipset Family MEI Controller #1 (rev 31)
00:17.0 SATA controller: Intel Corporation Q170/Q150/B150/H170/H110/Z170/CM236 Chipset SATA Controller [AHCI Mode] (rev 31)
00:1f.0 ISA bridge: Intel Corporation B150 Chipset LPC/eSPI Controller (rev 31)
00:1f.2 Memory controller: Intel Corporation 100 Series/C230 Series Chipset Family Power Management Controller (rev 31)
00:1f.4 SMBus: Intel Corporation 100 Series/C230 Series Chipset Family SMBus (rev 31)
00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (2) I219-LM (rev 31)
```
### netstat -rn

```
root@rescue ~ # netstat -rn
Kernel IP routing table
Destination Gateway Genmask Flags MSS Windowirtt Iface
0.0.0.0 136.243.110.129 0.0.0.0 UG0 00 eth0
136.243.110.128 136.243.110.129 255.255.255.192 UG0 00 eth0
136.243.110.129 0.0.0.0 255.255.255.255 UH0 00 eth0
```

# Activate rescue system and boot into it
Login to https://robot.hetzner.com/server and activate linux rescue system (btw. unfortunately they seem to have discontinued FreeBSD rescue system)

![](/uploads/upload_8c6986213fde13c904139ca4bf235322.png)

![](/uploads/upload_ee43bb10b7c7c7d12f550d9e61d73364.png)

![](/uploads/upload_f30f916484438112e9a4ddf290a3593b.png) 

# ssh into rescue system (using ssh pub key authentication)
```bash
$ ssh root@srv07.gfuzz.de
Warning: Permanently added 'srv07.gfuzz.de' (ED25519) to the list of known hosts.
Linux rescue 6.9.7 #1 SMP Thu Jun 27 15:07:37 UTC 2024 x86_64

-------------------------------------------------------------------------------------------------------------------------

  Welcome to the Hetzner Rescue System.

  This Rescue System is based on Debian GNU/Linux 12 (bookworm) with a custom kernel.
  You can install software like you would in a normal system.

  To install a new operating system from one of our prebuilt images, run 'installimage' and follow the instructions.

  Important note: Any data that was not written to the disks will be lost during a reboot.

  For additional information, check the following resources:
    Rescue System:           https://docs.hetzner.com/robot/dedicated-server/troubleshooting/hetzner-rescue-system
    Installimage:            https://docs.hetzner.com/robot/dedicated-server/operating-systems/installimage
    Install custom software: https://docs.hetzner.com/robot/dedicated-server/operating-systems/installing-custom-images
    other articles:          https://docs.hetzner.com/robot

-------------------------------------------------------------------------------------------------------------------------

Rescue System (via Legacy/CSM) up since 2024-08-11 19:30 +02:00

Hardware data:

   CPU1: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz (Cores 8)
   Memory:  31891 MB
   Disk /dev/sda: 500 GB (=&gt; 465 GiB)
   Disk /dev/sdb: 500 GB (=&gt; 465 GiB)
   Total capacity 931 GiB with 2 Disks

Network data:
   eth0  LINK: yes
         MAC:  90:1b:0e:8a:54:91
         IP:   136.243.110.155
         IPv6: 2a01:4f8:171:1129::2/64
         Intel(R) PRO/1000 Network Driver

root@rescue ~ #
```

# Wipe out any content on SSDs
There is a chance that existing data (i.e. previous openbsd/softraid0 installations...) might interfere, so better be safe than sorry.
## sda
```
root@rescue ~ # dd if=/dev/urandom of=/dev/sda bs=1M count=1
1+0 records in
1+0 records out
1048576 bytes (1.0 MB, 1.0 MiB) copied, 0.014283 s, 73.4 MB/s
```
## sda
```
root@rescue ~ # dd if=/dev/urandom of=/dev/sdb bs=1M count=1
1+0 records in
1+0 records out
1048576 bytes (1.0 MB, 1.0 MiB) copied, 0.010774 s, 97.3 MB/s
```

# Fetch install75.iso
```
root@rescue ~ # wget -q https://cdn.openbsd.org/pub/OpenBSD/7.5/amd64/install75.iso
```

# Use qemu with iso and phys. disks via serial console
```
root@rescue ~ # qemu-system-x86_64 -enable-kvm -cpu host -nographic -boot d -cdrom install75.iso -drive file=/dev/sda,format=raw,id=sata0,if=virtio -drive file=/dev/sdb,format=raw,id=sata1,if=virtio -m 2048 -smp 4
```
## Switch output to serial console
```
SeaBIOS (version 1.16.2-debian-1.16.2-1)
iPXE (http://ipxe.org) 00:03.0 CA00 PCI2.10 PnP PMM+7EFCEFC0+7EF0EFC0 CA00

Booting from DVD/CD...
CD-ROM: E0
Loading /7.5/AMD64/CDBOOT
probing: pc0 com0 mem[639K 2046M a20=on]
disk: fd0 hd0+* hd1+* cd0
&gt;&gt; OpenBSD/amd64 CDBOOT 3.65
boot&gt; set tty com0
switching console to com&gt;&gt; OpenBSD/amd64 CDBOOT 3.65
boot&gt;
0
```

## dmesg
:::spoiler  Click here to see full dmesg
```
cannot open cd0a:/etc/random.seed: No such file or directory
booting cd0a:/7.5/amd64/bsd.rd: 4076463+1688576+3891240+0+708608 [109+464016+317541]=0xaa40e8
entry point at 0xffffffff81001000
Copyright (c) 1982, 1986, 1989, 1991, 1993
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2024 OpenBSD. All rights reserved.  https://www.OpenBSD.org

OpenBSD 7.5 (RAMDISK_CD) #76: Wed Mar 20 15:53:54 MDT 2024
    deraadt@amd64.openbsd.org:/usr/src/sys/arch/amd64/compile/RAMDISK_CD
real mem = 2130550784 (2031MB)
avail mem = 2061877248 (1966MB)
random: good seed from bootblocks
mainbus0 at root
bios0 at mainbus0: SMBIOS rev. 2.8 @ 0xf5a00 (9 entries)
bios0: vendor SeaBIOS version "1.16.2-debian-1.16.2-1" date 04/01/2014
bios0: QEMU Standard PC (i440FX + PIIX, 1996)
acpi0 at bios0: ACPI 1.0
acpi0: tables DSDT FACP APIC HPET WAET
acpimadt0 at acpi0 addr 0xfee00000: PC-AT compat
cpu0 at mainbus0: apid 0 (boot processor)
cpu0: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 329.58 MHz, 06-5e-03
cpu0: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,MMX,FXSR,SSE,SSE2,SS,HTT,SSE3,PCLMUL,VMX,SSSE3,FMA3,CX16,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,HV,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,FSGSBASE,TSC_ADJUST,BMI1,AVX2,SMEP,BMI2,ERMS,IN
cpu0: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 4MB 64b/line 16-way L2 cache, 16MB 64b/line 16-way L3 cache
cpu0: apic clock running at 999MHz
cpu at mainbus0: not configured
cpu at mainbus0: not configured
cpu at mainbus0: not configured
ioapic0 at mainbus0: apid 0 pa 0xfec00000, version 11, 24 pins
acpihpet0 at acpi0: 100000000 Hz
acpiprt0 at acpi0: bus 0 (PCI0)
"ACPI0006" at acpi0 not configured
acpipci0 at acpi0 PCI0
"PNP0A06" at acpi0 not configured
"PNP0A06" at acpi0 not configured
"PNP0A06" at acpi0 not configured
"QEMU0002" at acpi0 not configured
com0 at acpi0 COM1 addr 0x3f8/0x8 irq 4: ns16550a, 16 byte fifo
com0: console
acpicmos0 at acpi0
"ACPI0010" at acpi0 not configured
acpicpu at acpi0 not configured
cpu0: using VERW MDS workaround
pvbus0 at mainbus0: KVM
pci0 at mainbus0 bus 0
pchb0 at pci0 dev 0 function 0 "Intel 82441FX" rev 0x02
"Intel 82371SB ISA" rev 0x00 at pci0 dev 1 function 0 not configured
pciide0 at pci0 dev 1 function 1 "Intel 82371SB IDE" rev 0x00: DMA, channel 0 wired to compatibility, channel 1 wired to compatibility
pciide0: channel 0 disabled (no drives)
atapiscsi0 at pciide0 channel 1 drive 0
scsibus0 at atapiscsi0: 2 targets
cd0 at scsibus0 targ 0 lun 0: &lt;QEMU, QEMU DVD-ROM, 2.5+&gt; removable
cd0(pciide0:1:0): using PIO mode 4, DMA mode 2
"Intel 82371AB Power" rev 0x03 at pci0 dev 1 function 3 not configured
vga1 at pci0 dev 2 function 0 "Bochs VGA" rev 0x02
vga1: aperture needed
wsdisplay at vga1 not configured
em0 at pci0 dev 3 function 0 "Intel 82540EM" rev 0x03: apic 0 int 11, address 52:54:00:12:34:56
virtio0 at pci0 dev 4 function 0 "Qumranet Virtio Storage" rev 0x00
vioblk0 at virtio0
scsibus1 at vioblk0: 1 targets
sd0 at scsibus1 targ 0 lun 0: &lt;VirtIO, Block Device, &gt;
sd0: 476940MB, 512 bytes/sector, 976773168 sectors
virtio0: msix per-VQ
virtio1 at pci0 dev 5 function 0 "Qumranet Virtio Storage" rev 0x00
vioblk1 at virtio1
scsibus2 at vioblk1: 1 targets
sd1 at scsibus2 targ 0 lun 0: &lt;VirtIO, Block Device, &gt;
sd1: 476940MB, 512 bytes/sector, 976773168 sectors
virtio1: msix per-VQ
isa0 at mainbus0
pckbc0 at isa0 port 0x60/5 irq 1 irq 12
pckbd0 at pckbc0 (kbd slot)
wskbd0 at pckbd0 mux 1
softraid0 at root
scsibus3 at softraid0: 256 targets
root on rd0a swap on rd0b dump on rd0b
WARNING: CHECK AND RESET THE DATE!
```
:::


## Welcome to the OpenBSD/amd64 7.5 installation program.
Mainly taken from [OpenBSD FAQ - Disk Setup](https://www.openbsd.org/faq/faq14.html)


### Exit to shell:
```
Welcome to the OpenBSD/amd64 7.5 installation program.
(I)nstall, (U)pgrade, (A)utoinstall or (S)hell? s
```

### Create device special files (see ```MAKEDEV(8)```)
```
# cd /dev
# sh MAKEDEV sd0 sd1 sd2
```

### Write MBR to both disks
```
# fdisk -iy sd0
Writing MBR at offset 0.
# fdisk -iy sd1
Writing MBR at offset 0.
```

### Create disklabel on first disk an clone into second disk
```
# disklabel -E sd0
Label editor (enter '?' for help at any prompt)
sd0&gt; a a
offset: [64]
size: [976773104]
FS type: [4.2BSD] RAID
sd0*&gt; w
sd0&gt; q
No label changes.
# disklabel sd0 &gt; layout
# disklabel -R sd1 layout
# rm layout
```

### Setup RAID1
```
# bioctl -c 1 -l sd0a,sd1a softraid0
sd2 at scsibus3 targ 1 lun 0: &lt;OPENBSD, SR RAID 1, 006&gt;
sd2: 476939MB, 512 bytes/sector, 976772576 sectors
softraid0: RAID 1 volume attached as sd2
```

### "Because the new device probably has a lot of garbage where you expect a master boot record and disklabel, zeroing the first chunk of it is highly recommended."
```
# dd if=/dev/zero of=/dev/rsd2c bs=1m count=1
1+0 records in
1+0 records out
1048576 bytes transferred in 0.016 secs (63963458 bytes/sec)
```

### Check RAID1 status:
```
# bioctl sd2
Volume      Status               Size Device
softraid0 0 Online       500107558912 sd2     RAID1
          0 Online       500107558912 0:0.0   noencl &lt;sd0a&gt;
          1 Online       500107558912 0:1.0   noencl &lt;sd1a&gt;
```
### Exit into installer :-)
```
# exit
```
### Actual installer (configure terminal, hostname, v4/v6 network, passwords)
* qemu emulates Intel EM1000 (em0) which is 1:1 the same for our phys. host
```
Welcome to the OpenBSD/amd64 7.5 installation program.
(I)nstall, (U)pgrade, (A)utoinstall or (S)hell? i
At any prompt except password prompts you can escape to a shell by
typing '!'. Default answers are shown in []'s and are selected by
pressing RETURN.  You can exit this program at any time by pressing
Control-C, but this can leave your system in an inconsistent state.

Terminal type? [vt220]
System hostname? (short form, e.g. 'foo') srv07

Available network interfaces are: em0 vlan0.
Network interface to configure? (name, lladdr, '?', or 'done') [em0]
IPv4 address for em0? (or 'autoconf' or 'none') [autoconf] autoconf
IPv6 address for em0? (or 'autoconf' or 'none') [none] autoconf
Available network interfaces are: em0 vlan0.
Network interface to configure? (name, lladdr, '?', or 'done') [done]
Using DNS domainname my.domain
Using DNS nameservers at 10.0.2.3

Password for root account? (will not echo)
Password for root account? (again)
Start sshd(8) by default? [yes]
Do you expect to run the X Window System? [yes] no
Change the default console to com0? [yes] no
Setup a user? (enter a lower-case loginname, or 'no') [no] hoschi
Full name for user hoschi? [hoschi] Oliver Peter
Password for user hoschi? (will not echo)
Password for user hoschi? (again)
WARNING: root is targeted by password guessing attacks, pubkeys are safer.
Allow root ssh login? (yes, no, prohibit-password) [no] prohibit-password
What timezone are you in? ('?' for list) [Europe/Berlin]
```
### Make sure to select sd2 (our RAID1 interface)!
```
Available disks are: sd0 sd1 sd2.
Which disk is the root disk? ('?' for details) [sd0] sd2
No valid MBR or GPT.
Use (W)hole disk MBR, whole disk (G)PT or (E)dit? [whole]
Setting OpenBSD MBR partition to whole sd2...done.
The auto-allocated layout for sd2 is:
#                size           offset  fstype [fsize bsize   cpg]
  a:             1.0G               64  4.2BSD   2048 16384     1 # /
  b:             2.2G          2097216    swap
  c:           465.8G                0  unused
  d:             4.0G          6782752  4.2BSD   2048 16384     1 # /tmp
  e:             8.0G         15171328  4.2BSD   2048 16384     1 # /var
  f:            30.0G         31882400  4.2BSD   2048 16384     1 # /usr
  g:             1.0G         94796960  4.2BSD   2048 16384     1 # /usr/X11R6
  h:            20.0G         96894112  4.2BSD   2048 16384     1 # /usr/local
  i:             3.0G        138837152  4.2BSD   2048 16384     1 # /usr/src
  j:             6.0G        145128608  4.2BSD   2048 16384     1 # /usr/obj
  k:           300.0G        157711552  4.2BSD   4096 32768     1 # /home
Use (A)uto layout, (E)dit auto layout, or create (C)ustom layout? [a]
/dev/rsd2a: 1024.0MB in 2097152 sectors of 512 bytes
6 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
/dev/rsd2k: 307200.0MB in 629145536 sectors of 512 bytes
378 cylinder groups of 814.44MB, 26062 blocks, 52224 inodes each
/dev/rsd2d: 4096.0MB in 8388576 sectors of 512 bytes
21 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
/dev/rsd2f: 30720.0MB in 62914560 sectors of 512 bytes
152 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
/dev/rsd2g: 1024.0MB in 2097152 sectors of 512 bytes
6 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
/dev/rsd2h: 20480.0MB in 41943040 sectors of 512 bytes
102 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
/dev/rsd2j: 6144.0MB in 12582912 sectors of 512 bytes
31 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
/dev/rsd2i: 3072.0MB in 6291456 sectors of 512 bytes
16 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
/dev/rsd2e: 8159.7MB in 16711072 sectors of 512 bytes
41 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
/dev/sd2a (6f75b1b9913f80c0.a) on /mnt type ffs (rw, asynchronous, local)
/dev/sd2k (6f75b1b9913f80c0.k) on /mnt/home type ffs (rw, asynchronous, local, nodev, nosuid)
/dev/sd2d (6f75b1b9913f80c0.d) on /mnt/tmp type ffs (rw, asynchronous, local, nodev, nosuid)
/dev/sd2f (6f75b1b9913f80c0.f) on /mnt/usr type ffs (rw, asynchronous, local, nodev)
/dev/sd2g (6f75b1b9913f80c0.g) on /mnt/usr/X11R6 type ffs (rw, asynchronous, local, nodev)
/dev/sd2h (6f75b1b9913f80c0.h) on /mnt/usr/local type ffs (rw, asynchronous, local, nodev)
/dev/sd2j (6f75b1b9913f80c0.j) on /mnt/usr/obj type ffs (rw, asynchronous, local, nodev, nosuid)
/dev/sd2i (6f75b1b9913f80c0.i) on /mnt/usr/src type ffs (rw, asynchronous, local, nodev, nosuid)
/dev/sd2e (6f75b1b9913f80c0.e) on /mnt/var type ffs (rw, asynchronous, local, nodev, nosuid)

Let's install the sets!
Location of sets? (cd0 disk http nfs or 'done') [cd0]
Pathname to the sets? (or 'done') [7.5/amd64]

Select sets by entering a set name, a file name pattern or 'all'. De-select
sets by prepending a '-', e.g.: '-game*'. Selected sets are labelled '[X]'.
    [X] bsd           [X] base75.tgz    [X] game75.tgz    [X] xfont75.tgz
    [X] bsd.mp        [X] comp75.tgz    [X] xbase75.tgz   [X] xserv75.tgz
    [X] bsd.rd        [X] man75.tgz     [X] xshare75.tgz
Set name(s)? (or 'abort' or 'done') [done]
Directory does not contain SHA256.sig. Continue without verification? [no] yes
Installing bsd          100% |**************************| 25844 KB    00:03
Installing bsd.mp       100% |**************************| 25917 KB    00:03
Installing bsd.rd       100% |**************************|  4575 KB    00:00
Installing base75.tgz   100% |**************************|   408 MB    01:11
Extracting etc.tgz      100% |**************************|   267 KB    00:00
Installing comp75.tgz   100% |**************************| 80681 KB    00:16
Installing man75.tgz    100% |**************************|  7870 KB    00:01
Installing game75.tgz   100% |**************************|  2733 KB    00:00
Installing xbase75.tgz  100% |**************************| 58938 KB    00:12
Extracting xetc.tgz     100% |**************************|  7300       00:00
Installing xshare75.tgz 100% |**************************|  4578 KB    00:01
Installing xfont75.tgz  100% |**************************| 22968 KB    00:03
Installing xserv75.tgz  100% |**************************| 15472 KB    00:02
Location of sets? (cd0 disk http nfs or 'done') [done]
Saving configuration files... done.
Making all device nodes... done.
Multiprocessor machine; using bsd.mp instead of bsd.
fw_update: add intel; update none
Relinking to create unique kernel... done.

CONGRATULATIONS! Your OpenBSD install has been successfully completed!

When you login to your new system the first time, please read your mail
using the 'mail' command.

Exit to (S)hell, (H)alt or (R)eboot? [reboot] h
syncing disks... done

The operating system has halted.
Please press any key to reboot.
```
## Exit qemu with CTRL-a x and reboot phys. machine
```
QEMU: Terminated
root@rescue ~ # reboot
```

## After ~1min login via SSH should be possible
```
$ ssh hoschi@srv07.gfuzz.de
hoschi@srv07.gfuzz.de's password:
OpenBSD 7.5 (GENERIC.MP) #82: Wed Mar 20 15:48:40 MDT 2024

Welcome to OpenBSD: The proactively secure Unix-like operating system.

Please use the sendbug(1) utility to report bugs in the system.
Before reporting a bug, please try to reproduce it with the latest
version of the code.  With bug reports, please try to ensure that
enough information to reproduce the problem is enclosed, and if a
known fix for it exists, include that as well.

srv07$
```

## Become root and use syspatch to update OS
```
srv07$ su -
Password:
srv07# syspatch
Get/Verify syspatch75-001_xserver... 100% |*********************************************************************************************************************************************************************************************************************************************************|  4308 KB    00:00
Installing patch 001_xserver
Get/Verify syspatch75-003_libcryp... 100% |*********************************************************************************************************************************************************************************************************************************************************| 12910 KB    00:00
Installing patch 003_libcrypto
Get/Verify syspatch75-004_bgpd.tgz 100% |***********************************************************************************************************************************************************************************************************************************************************|   221 KB    00:00
Installing patch 004_bgpd
Get/Verify syspatch75-005_sndiod.tgz 100% |*********************************************************************************************************************************************************************************************************************************************************| 59601       00:00
Installing patch 005_sndiod
Errata can be reviewed under /var/syspatch
srv07#
```

# Full dmesg after reboot/update
:::spoiler Click here to see final dmesg of phys. host
```
OpenBSD 7.5 (GENERIC.MP) #82: Wed Mar 20 15:48:40 MDT 2024
    deraadt@amd64.openbsd.org:/usr/src/sys/arch/amd64/compile/GENERIC.MP
real mem = 34106925056 (32526MB)
avail mem = 33051824128 (31520MB)
random: good seed from bootblocks
mpath0 at root
scsibus0 at mpath0: 256 targets
mainbus0 at root
bios0 at mainbus0: SMBIOS rev. 3.0 @ 0xcbe08000 (78 entries)
bios0: vendor FUJITSU // American Megatrends Inc. version "V5.0.0.11 R1.29.0 for D3401-H1x" date 01/27/2020
bios0: FUJITSU D3401-H1
acpi0 at bios0: ACPI 5.0
acpi0: sleep states S0 S3 S4 S5
acpi0: tables DSDT FACP APIC FPDT FIDT MCFG HPET SSDT LPIT SSDT SSDT SSDT SSDT SSDT DBGP DBG2 SSDT UEFI SSDT DMAR ASF!
acpi0: wakeup devices PEG0(S4) PEGP(S4) PS2K(S3) PS2M(S3) RP09(S4) PXSX(S4) RP10(S4) PXSX(S4) RP11(S4) PXSX(S4) RP12(S4) PXSX(S4) RP13(S4) PXSX(S4) RP01(S4) PXSX(S4) [...]
acpitimer0 at acpi0: 3579545 Hz, 24 bits
acpimadt0 at acpi0 addr 0xfee00000: PC-AT compat
cpu0 at mainbus0: apid 0 (boot processor)
cpu0: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3691.40 MHz, 06-5e-03, patch 000000f0
cpu0: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,DS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE,SSE3,PCLMUL,DTES64,MWAIT,DS-CPL,VMX,SMX,EST,TM2,SSSE3,SDBG,FMA3,CX16,xTPR,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,ITSC,FSGSBASE,TSC_ADJUST,SGX,BMI1,HLE,AVX2,SMEP,BMI2,ERMS,INVPCID,RTM,MPX,RDSEED,ADX,SMAP,CLFLUSHOPT,PT,SRBDS_CTRL,MD_CLEAR,TSXFA,IBRS,IBPB,STIBP,L1DF,SSBD,SENSOR,ARAT,RSBA,MISC_PKG_CT,ENERGY_FILT,XSAVEOPT,XSAVEC,XGETBV1,XSAVES,MELTDOWN
cpu0: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 256KB 64b/line 4-way L2 cache, 8MB 64b/line 16-way L3 cache
cpu0: smt 0, core 0, package 0
mtrr: Pentium Pro MTRR support, 10 var ranges, 88 fixed ranges
cpu0: apic clock running at 24MHz
cpu0: mwait min=64, max=64, C-substates=0.2.1.2.4.1, IBE
cpu1 at mainbus0: apid 2 (application processor)
cpu1: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3691.41 MHz, 06-5e-03, patch 000000f0
cpu1: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,DS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE,SSE3,PCLMUL,DTES64,MWAIT,DS-CPL,VMX,SMX,EST,TM2,SSSE3,SDBG,FMA3,CX16,xTPR,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,ITSC,FSGSBASE,TSC_ADJUST,SGX,BMI1,HLE,AVX2,SMEP,BMI2,ERMS,INVPCID,RTM,MPX,RDSEED,ADX,SMAP,CLFLUSHOPT,PT,SRBDS_CTRL,MD_CLEAR,TSXFA,IBRS,IBPB,STIBP,L1DF,SSBD,SENSOR,ARAT,RSBA,MISC_PKG_CT,ENERGY_FILT,XSAVEOPT,XSAVEC,XGETBV1,XSAVES,MELTDOWN
cpu1: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 256KB 64b/line 4-way L2 cache, 8MB 64b/line 16-way L3 cache
cpu1: smt 0, core 1, package 0
cpu2 at mainbus0: apid 4 (application processor)
cpu2: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3691.41 MHz, 06-5e-03, patch 000000f0
cpu2: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,DS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE,SSE3,PCLMUL,DTES64,MWAIT,DS-CPL,VMX,SMX,EST,TM2,SSSE3,SDBG,FMA3,CX16,xTPR,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,ITSC,FSGSBASE,TSC_ADJUST,SGX,BMI1,HLE,AVX2,SMEP,BMI2,ERMS,INVPCID,RTM,MPX,RDSEED,ADX,SMAP,CLFLUSHOPT,PT,SRBDS_CTRL,MD_CLEAR,TSXFA,IBRS,IBPB,STIBP,L1DF,SSBD,SENSOR,ARAT,RSBA,MISC_PKG_CT,ENERGY_FILT,XSAVEOPT,XSAVEC,XGETBV1,XSAVES,MELTDOWN
cpu2: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 256KB 64b/line 4-way L2 cache, 8MB 64b/line 16-way L3 cache
cpu2: smt 0, core 2, package 0
cpu3 at mainbus0: apid 6 (application processor)
cpu3: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3691.41 MHz, 06-5e-03, patch 000000f0
cpu3: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,DS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE,SSE3,PCLMUL,DTES64,MWAIT,DS-CPL,VMX,SMX,EST,TM2,SSSE3,SDBG,FMA3,CX16,xTPR,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,ITSC,FSGSBASE,TSC_ADJUST,SGX,BMI1,HLE,AVX2,SMEP,BMI2,ERMS,INVPCID,RTM,MPX,RDSEED,ADX,SMAP,CLFLUSHOPT,PT,SRBDS_CTRL,MD_CLEAR,TSXFA,IBRS,IBPB,STIBP,L1DF,SSBD,SENSOR,ARAT,RSBA,MISC_PKG_CT,ENERGY_FILT,XSAVEOPT,XSAVEC,XGETBV1,XSAVES,MELTDOWN
cpu3: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 256KB 64b/line 4-way L2 cache, 8MB 64b/line 16-way L3 cache
cpu3: smt 0, core 3, package 0
cpu4 at mainbus0: apid 1 (application processor)
cpu4: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3691.40 MHz, 06-5e-03, patch 000000f0
cpu4: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,DS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE,SSE3,PCLMUL,DTES64,MWAIT,DS-CPL,VMX,SMX,EST,TM2,SSSE3,SDBG,FMA3,CX16,xTPR,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,ITSC,FSGSBASE,TSC_ADJUST,SGX,BMI1,HLE,AVX2,SMEP,BMI2,ERMS,INVPCID,RTM,MPX,RDSEED,ADX,SMAP,CLFLUSHOPT,PT,SRBDS_CTRL,MD_CLEAR,TSXFA,IBRS,IBPB,STIBP,L1DF,SSBD,SENSOR,ARAT,RSBA,MISC_PKG_CT,ENERGY_FILT,XSAVEOPT,XSAVEC,XGETBV1,XSAVES,MELTDOWN
cpu4: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 256KB 64b/line 4-way L2 cache, 8MB 64b/line 16-way L3 cache
cpu4: smt 1, core 0, package 0
cpu5 at mainbus0: apid 3 (application processor)
cpu5: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3691.40 MHz, 06-5e-03, patch 000000f0
cpu5: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,DS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE,SSE3,PCLMUL,DTES64,MWAIT,DS-CPL,VMX,SMX,EST,TM2,SSSE3,SDBG,FMA3,CX16,xTPR,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,ITSC,FSGSBASE,TSC_ADJUST,SGX,BMI1,HLE,AVX2,SMEP,BMI2,ERMS,INVPCID,RTM,MPX,RDSEED,ADX,SMAP,CLFLUSHOPT,PT,SRBDS_CTRL,MD_CLEAR,TSXFA,IBRS,IBPB,STIBP,L1DF,SSBD,SENSOR,ARAT,RSBA,MISC_PKG_CT,ENERGY_FILT,XSAVEOPT,XSAVEC,XGETBV1,XSAVES,MELTDOWN
cpu5: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 256KB 64b/line 4-way L2 cache, 8MB 64b/line 16-way L3 cache
cpu5: smt 1, core 1, package 0
cpu6 at mainbus0: apid 5 (application processor)
cpu6: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3691.40 MHz, 06-5e-03, patch 000000f0
cpu6: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,DS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE,SSE3,PCLMUL,DTES64,MWAIT,DS-CPL,VMX,SMX,EST,TM2,SSSE3,SDBG,FMA3,CX16,xTPR,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,ITSC,FSGSBASE,TSC_ADJUST,SGX,BMI1,HLE,AVX2,SMEP,BMI2,ERMS,INVPCID,RTM,MPX,RDSEED,ADX,SMAP,CLFLUSHOPT,PT,SRBDS_CTRL,MD_CLEAR,TSXFA,IBRS,IBPB,STIBP,L1DF,SSBD,SENSOR,ARAT,RSBA,MISC_PKG_CT,ENERGY_FILT,XSAVEOPT,XSAVEC,XGETBV1,XSAVES,MELTDOWN
cpu6: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 256KB 64b/line 4-way L2 cache, 8MB 64b/line 16-way L3 cache
cpu6: smt 1, core 2, package 0
cpu7 at mainbus0: apid 7 (application processor)
cpu7: Intel(R) Core(TM) i7-6700 CPU @ 3.40GHz, 3691.40 MHz, 06-5e-03, patch 000000f0
cpu7: FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CFLUSH,DS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE,SSE3,PCLMUL,DTES64,MWAIT,DS-CPL,VMX,SMX,EST,TM2,SSSE3,SDBG,FMA3,CX16,xTPR,PDCM,PCID,SSE4.1,SSE4.2,x2APIC,MOVBE,POPCNT,DEADLINE,AES,XSAVE,AVX,F16C,RDRAND,NXE,PAGE1GB,RDTSCP,LONG,LAHF,ABM,3DNOWP,PERF,ITSC,FSGSBASE,TSC_ADJUST,SGX,BMI1,HLE,AVX2,SMEP,BMI2,ERMS,INVPCID,RTM,MPX,RDSEED,ADX,SMAP,CLFLUSHOPT,PT,SRBDS_CTRL,MD_CLEAR,TSXFA,IBRS,IBPB,STIBP,L1DF,SSBD,SENSOR,ARAT,RSBA,MISC_PKG_CT,ENERGY_FILT,XSAVEOPT,XSAVEC,XGETBV1,XSAVES,MELTDOWN
cpu7: 32KB 64b/line 8-way D-cache, 32KB 64b/line 8-way I-cache, 256KB 64b/line 4-way L2 cache, 8MB 64b/line 16-way L3 cache
cpu7: smt 1, core 3, package 0
ioapic0 at mainbus0: apid 2 pa 0xfec00000, version 20, 120 pins
acpimcfg0 at acpi0
acpimcfg0: addr 0xf8000000, bus 0-63
acpihpet0 at acpi0: 23999999 Hz
acpiprt0 at acpi0: bus 0 (PCI0)
acpiprt1 at acpi0: bus -1 (PEG0)
acpiprt2 at acpi0: bus -1 (RP09)
acpiprt3 at acpi0: bus -1 (RP10)
acpiprt4 at acpi0: bus -1 (RP11)
acpiprt5 at acpi0: bus -1 (RP12)
acpiprt6 at acpi0: bus -1 (RP13)
acpiprt7 at acpi0: bus -1 (RP01)
acpiprt8 at acpi0: bus -1 (RP02)
acpiprt9 at acpi0: bus -1 (RP03)
acpiprt10 at acpi0: bus -1 (RP04)
acpiprt11 at acpi0: bus -1 (RP05)
acpiprt12 at acpi0: bus -1 (RP06)
acpiprt13 at acpi0: bus -1 (RP07)
acpiprt14 at acpi0: bus -1 (RP08)
acpiprt15 at acpi0: bus -1 (RP17)
acpiprt16 at acpi0: bus -1 (RP18)
acpiprt17 at acpi0: bus -1 (RP19)
acpiprt18 at acpi0: bus -1 (RP20)
acpiprt19 at acpi0: bus -1 (RP14)
acpiprt20 at acpi0: bus -1 (RP15)
acpiprt21 at acpi0: bus -1 (RP16)
acpipci0 at acpi0 PCI0: 0x00000000 0x00000011 0x00000001
acpicmos0 at acpi0
"INT33A1" at acpi0 not configured
acpibtn0 at acpi0: PWRB
"PNP0C14" at acpi0 not configured
"PNP0C0B" at acpi0 not configured
"PNP0C0B" at acpi0 not configured
"PNP0C0B" at acpi0 not configured
"PNP0C0B" at acpi0 not configured
"PNP0C0B" at acpi0 not configured
acpicpu0 at acpi0: C3(200@256 mwait.1@0x40), C2(200@151 mwait.1@0x33), C1(1000@1 mwait.1), PSS
acpicpu1 at acpi0: C3(200@256 mwait.1@0x40), C2(200@151 mwait.1@0x33), C1(1000@1 mwait.1), PSS
acpicpu2 at acpi0: C3(200@256 mwait.1@0x40), C2(200@151 mwait.1@0x33), C1(1000@1 mwait.1), PSS
acpicpu3 at acpi0: C3(200@256 mwait.1@0x40), C2(200@151 mwait.1@0x33), C1(1000@1 mwait.1), PSS
acpicpu4 at acpi0: C3(200@256 mwait.1@0x40), C2(200@151 mwait.1@0x33), C1(1000@1 mwait.1), PSS
acpicpu5 at acpi0: C3(200@256 mwait.1@0x40), C2(200@151 mwait.1@0x33), C1(1000@1 mwait.1), PSS
acpicpu6 at acpi0: C3(200@256 mwait.1@0x40), C2(200@151 mwait.1@0x33), C1(1000@1 mwait.1), PSS
acpicpu7 at acpi0: C3(200@256 mwait.1@0x40), C2(200@151 mwait.1@0x33), C1(1000@1 mwait.1), PSS
acpipwrres0 at acpi0: PG00, resource for PEG0
acpipwrres1 at acpi0: WRST
acpipwrres2 at acpi0: WRST
acpipwrres3 at acpi0: WRST
acpipwrres4 at acpi0: WRST
acpipwrres5 at acpi0: WRST
acpipwrres6 at acpi0: WRST
acpipwrres7 at acpi0: WRST
acpipwrres8 at acpi0: WRST
acpipwrres9 at acpi0: WRST
acpipwrres10 at acpi0: WRST
acpipwrres11 at acpi0: WRST
acpipwrres12 at acpi0: WRST
acpipwrres13 at acpi0: WRST
acpipwrres14 at acpi0: WRST
acpipwrres15 at acpi0: WRST
acpipwrres16 at acpi0: WRST
acpipwrres17 at acpi0: WRST
acpipwrres18 at acpi0: WRST
acpipwrres19 at acpi0: WRST
acpipwrres20 at acpi0: WRST
acpipwrres21 at acpi0: FN00, resource for FAN0
acpipwrres22 at acpi0: FN01, resource for FAN1
acpipwrres23 at acpi0: FN02, resource for FAN2
acpipwrres24 at acpi0: FN03, resource for FAN3
acpipwrres25 at acpi0: FN04, resource for FAN4
acpitz0 at acpi0### AML PARSE ERROR (0x842): Undefined name: \\_SB_.PCI0.LPCB.H_EC.ECAV
error evaluating: \\_TZ_.TZ00._TMP
### AML PARSE ERROR (0x842): Undefined name: \\_SB_.PCI0.LPCB.H_EC.ECAV
error evaluating: \\_TZ_.TZ00._TMP

acpitz1 at acpi0### AML PARSE ERROR (0x9f3): Undefined name: \\_SB_.PCI0.LPCB.H_EC.ECAV
error evaluating: \\_TZ_.TZ01._TMP
### AML PARSE ERROR (0x9f3): Undefined name: \\_SB_.PCI0.LPCB.H_EC.ECAV
error evaluating: \\_TZ_.TZ01._TMP

acpivideo0 at acpi0: GFX0
acpivout0 at acpivideo0: DD1F
cpu0: using VERW MDS workaround (except on vmm entry)
cpu0: Enhanced SpeedStep 3691 MHz: speeds: 3401, 3400, 3200, 3000, 2800, 2700, 2500, 2300, 2100, 1900, 1700, 1500, 1400, 1200, 1000, 800 MHz
pci0 at mainbus0 bus 0
pchb0 at pci0 dev 0 function 0 "Intel Core 6G Host" rev 0x07
inteldrm0 at pci0 dev 2 function 0 "Intel HD Graphics 530" rev 0x06
drm0 at inteldrm0
inteldrm0: msi, SKYLAKE, gen 9
xhci0 at pci0 dev 20 function 0 "Intel 100 Series xHCI" rev 0x31: msi, xHCI 1.0
usb0 at xhci0: USB revision 3.0
uhub0 at usb0 configuration 1 interface 0 "Intel xHCI root hub" rev 3.00/1.00 addr 1
pchtemp0 at pci0 dev 20 function 2 "Intel 100 Series Thermal" rev 0x31
"Intel 100 Series MEI" rev 0x31 at pci0 dev 22 function 0 not configured
ahci0 at pci0 dev 23 function 0 "Intel 100 Series AHCI" rev 0x31: msi, AHCI 1.3.1
ahci0: port 1: 6.0Gb/s
ahci0: port 2: 6.0Gb/s
scsibus1 at ahci0: 32 targets
sd0 at scsibus1 targ 1 lun 0: &lt;ATA, Crucial_CT500MX2, MU05&gt; naa.500a075110d8eac0
sd0: 476940MB, 512 bytes/sector, 976773168 sectors, thin
sd1 at scsibus1 targ 2 lun 0: &lt;ATA, Crucial_CT500MX2, MU05&gt; naa.500a075110d8e5f1
sd1: 476940MB, 512 bytes/sector, 976773168 sectors, thin
pcib0 at pci0 dev 31 function 0 "Intel B150 LPC" rev 0x31
"Intel 100 Series PMC" rev 0x31 at pci0 dev 31 function 2 not configured
ichiic0 at pci0 dev 31 function 4 "Intel 100 Series SMBus" rev 0x31: apic 2 int 16
iic0 at ichiic0
em0 at pci0 dev 31 function 6 "Intel I219-LM" rev 0x31: msi, address 90:1b:0e:8a:54:91
isa0 at pcib0
isadma0 at isa0
pckbc0 at isa0 port 0x60/5 irq 1 irq 12
pckbd0 at pckbc0 (kbd slot)
wskbd0 at pckbd0: console keyboard
pcppi0 at isa0 port 0x61
spkr0 at pcppi0
wbsio0 at isa0 port 0x2e/2: NCT6792D rev 0x11
lm1 at wbsio0 port 0xa10/8: NCT6792D
vmm0 at mainbus0: VMX/EPT
uhidev0 at uhub0 port 8 configuration 1 interface 0 "Raritan KX4-101" rev 2.00/1.00 addr 2
uhidev0: iclass 3/1
ukbd0 at uhidev0: 8 variable keys, 6 key codes
wskbd1 at ukbd0 mux 1
uhidev1 at uhub0 port 8 configuration 1 interface 1 "Raritan KX4-101" rev 2.00/1.00 addr 2
uhidev1: iclass 3/1
ums0 at uhidev1: 3 buttons, Z dir
wsmouse0 at ums0 mux 0
uhidev2 at uhub0 port 8 configuration 1 interface 2 "Raritan KX4-101" rev 2.00/1.00 addr 2
uhidev2: iclass 3/0
ums1 at uhidev2: 3 buttons, Z dir
wsmouse1 at ums1 mux 0
vscsi0 at root
scsibus2 at vscsi0: 256 targets
softraid0 at root
scsibus3 at softraid0: 256 targets
sd2 at scsibus3 targ 1 lun 0: &lt;OPENBSD, SR RAID 1, 006&gt;
sd2: 476939MB, 512 bytes/sector, 976772576 sectors
root on sd2a (6f75b1b9913f80c0.a) swap on sd2b dump on sd2b
inteldrm0: 1920x1080, 32bpp
wsdisplay0 at inteldrm0 mux 1: console (std, vt100 emulation), using wskbd0
wskbd1: connecting to wsdisplay0
wsdisplay0: screen 1-5 added (std, vt100 emulation)
sd3 at scsibus3 targ 2 lun 0: &lt;OPENBSD, SR CRYPTO, 006&gt;
sd3: 399931MB, 512 bytes/sector, 819060528 sectors
wskbd1: disconnecting from wsdisplay0
wskbd1 detached
ukbd0 detached
uhidev0 detached
wsmouse0 detached
ums0 detached
uhidev1 detached
wsmouse1 detached
ums1 detached
uhidev2 detached
uhub0: device problem, disabling port 8
uhidev0 at uhub0 port 8 configuration 1 interface 0 "Raritan KX4-101" rev 2.00/1.00 addr 2
uhidev0: iclass 3/1
ukbd0 at uhidev0: 8 variable keys, 6 key codes
wskbd1 at ukbd0 mux 1
wskbd1: connecting to wsdisplay0
uhidev1 at uhub0 port 8 configuration 1 interface 1 "Raritan KX4-101" rev 2.00/1.00 addr 2
uhidev1: iclass 3/1
ums0 at uhidev1: 3 buttons, Z dir
wsmouse0 at ums0 mux 0
uhidev2 at uhub0 port 8 configuration 1 interface 2 "Raritan KX4-101" rev 2.00/1.00 addr 2
uhidev2: iclass 3/0
ums1 at uhidev2: 3 buttons, Z dir
wsmouse1 at ums1 mux 0
```
:::
# Encrypted partition + /home
Configure root pubkey authentication, make sure no user process (something that needs /home) is currently running and login as root via ssh:

```
ssh root@srv07.gfuzz.de
Last login: Sun Aug 11 19:40:39 2024 from 144.76.31.135
OpenBSD 7.5 (GENERIC.MP) #82: Wed Mar 20 15:48:40 MDT 2024

Welcome to OpenBSD: The proactively secure Unix-like operating system.

Please use the sendbug(1) utility to report bugs in the system.
Before reporting a bug, please try to reproduce it with the latest
version of the code.  With bug reports, please try to ensure that
enough information to reproduce the problem is enclosed, and if a
known fix for it exists, include that as well.

srv07#
```
## unmount home and change /home partition type to RAID
```
srv07# umount /home
srv07# disklabel -E sd2
Label editor (enter '?' for help at any prompt)
sd2&gt; p
OpenBSD area: 64-976772576; size: 976772512; free: 189915536
#                size           offset  fstype [fsize bsize   cpg]
  a:          2097152               64  4.2BSD   2048 16384 12960 # /
  b:          4685520          2097216    swap                    # none
  c:        976772576                0  unused
  d:          8388576          6782752  4.2BSD   2048 16384 12960 # /tmp
  e:         16711072         15171328  4.2BSD   2048 16384 12960 # /var
  f:         62914560         31882400  4.2BSD   2048 16384 12960 # /usr
  g:          2097152         94796960  4.2BSD   2048 16384 12960 # /usr/X11R6
  h:         41943040         96894112  4.2BSD   2048 16384 12960 # /usr/local
  i:          6291456        138837152  4.2BSD   2048 16384 12960 # /usr/src
  j:         12582912        145128608  4.2BSD   2048 16384 12960 # /usr/obj
  k:        629145536        157711552  4.2BSD   4096 32768 26062 # /home
sd2&gt; d k
sd2*&gt; a k
offset: [157711520]
size: [819061056]
FS type: [4.2BSD] RAID
sd2*&gt; p
OpenBSD area: 64-976772576; size: 976772512; free: 16
#                size           offset  fstype [fsize bsize   cpg]
  a:          2097152               64  4.2BSD   2048 16384 12960 # /
  b:          4685520          2097216    swap                    # none
  c:        976772576                0  unused
  d:          8388576          6782752  4.2BSD   2048 16384 12960 # /tmp
  e:         16711072         15171328  4.2BSD   2048 16384 12960 # /var
  f:         62914560         31882400  4.2BSD   2048 16384 12960 # /usr
  g:          2097152         94796960  4.2BSD   2048 16384 12960 # /usr/X11R6
  h:         41943040         96894112  4.2BSD   2048 16384 12960 # /usr/local
  i:          6291456        138837152  4.2BSD   2048 16384 12960 # /usr/src
  j:         12582912        145128608  4.2BSD   2048 16384 12960 # /usr/obj
  k:        819061056        157711520    RAID
sd2*&gt; w
sd2&gt; q
No label changes.
```

## Setup encrypted partition
```
srv07# bioctl -c C -l sd2k softraid0
New passphrase:
Re-type passphrase:
softraid0: CRYPTO volume attached as sd3
```

## Configure new partition:
```
srv07# disklabel -E sd3
Label editor (enter '?' for help at any prompt)
sd3&gt; a a
offset: [0]
size: [819060528]
FS type: [4.2BSD]
sd3*&gt;
sd3*&gt; w
sd3&gt; q
No label changes.
```

## Create /crypt and get rid of current /home from /etc/fstab
```
srv07# mkdir /crypt
srv07# cat /etc/fstab
6f75b1b9913f80c0.b none swap sw
6f75b1b9913f80c0.a / ffs rw 1 1
6f75b1b9913f80c0.k /home ffs rw,nodev,nosuid 1 2
6f75b1b9913f80c0.d /tmp ffs rw,nodev,nosuid 1 2
6f75b1b9913f80c0.f /usr ffs rw,nodev 1 2
6f75b1b9913f80c0.g /usr/X11R6 ffs rw,nodev 1 2
6f75b1b9913f80c0.h /usr/local ffs rw,wxallowed,nodev 1 2
6f75b1b9913f80c0.j /usr/obj ffs rw,nodev,nosuid 1 2
6f75b1b9913f80c0.i /usr/src ffs rw,nodev,nosuid 1 2
6f75b1b9913f80c0.e /var ffs rw,nodev,nosuid 1 2
```
## Use vi to replace entry for /home with /crypt
```
srv07# vi /etc/fstab
...
/dev/sd3a       /crypt  ffs     rw,nodev,nosuid,noauto 0 0 
```

## Create FFS2 filesystem
```
srv07# newfs /dev/rsd3c
/dev/rsd3c: 399931.9MB in 819060528 sectors of 512 bytes
1975 cylinder groups of 202.50MB, 12960 blocks, 25920 inodes each
super-block backups (for fsck -b #) at:
 160, 414880, 829600, 1244320, 1659040, 2073760, 2488480, 2903200, 3317920, 3732640, 4147360, 4562080, 4976800, 5391520, 5806240, 6220960, 6635680, 7050400, 7465120, 7879840, 8294560, 8709280, 9124000, 9538720, 9953440, 10368160, 10782880, 11197600, 11612320, 12027040, 12441760, 12856480, 13271200, 13685920,
 14100640, 14515360, 14930080, 15344800, 15759520, 16174240, 16588960, 17003680, 17418400, 17833120, 18247840, 18662560, 19077280, 19492000, 19906720, 20321440, 20736160, 21150880, 21565600, 21980320, 22395040, 22809760, 23224480, 23639200, 24053920, 24468640, 24883360, 25298080, 25712800, 26127520, 26542240,
[...]
```
## Mount /crypt and check
```
srv07# mount /crypt
srv07# df -h
Filesystem     Size    Used   Avail Capacity  Mounted on
/dev/sd2a      986M    131M    806M    14%    /
/dev/sd2d      3.9G   10.0K    3.7G     1%    /tmp
/dev/sd2f     29.1G    1.4G   26.2G     6%    /usr
/dev/sd2g      986M    303M    634M    33%    /usr/X11R6
/dev/sd2h     19.4G    146K   18.4G     1%    /usr/local
/dev/sd2j      5.8G    2.0K    5.5G     1%    /usr/obj
/dev/sd2i      2.9G    2.0K    2.8G     1%    /usr/src
/dev/sd2e      7.7G   25.4M    7.3G     1%    /var
/dev/sd3a      378G    2.0K    359G     1%    /crypt
```

## Setup /home -&gt; /crypt/home
```
srv07# mv home crypt
srv07# ln -s /crypt/home /home
srv07# cd /home
srv07# mkdir hoschi
srv07# chown hoschi:hoschi hoschi
```

## And we are done! :-)
After some ansible magic in the background:

![](/uploads/upload_d4c8d59353fd38ef734d5c74d9a2e8c2.png)

# "Rescue mode" for OpenBSD
Like above:
1. enable Hetzner Linux Rescue mode and 
2. trigger a reset of the machine
3. login as root via ssh
## boot from cd
```
$ wget https://cdn.openbsd.org/pub/OpenBSD/7.5/amd64/cd75.iso
$ qemu-system-x86_64 -nographic -boot d -cdrom cd75.iso -drive file=/dev/sda,format=raw -drive file=/dev/sdb,format=raw -m 2048 -smp 4
```
## boot from local disks
```
$ qemu-system-x86_64 -enable-kvm -cpu host -nographic -drive file=/dev/sda,format=raw,id=sata0,if=virtio -drive file=/dev/sdb,format=raw,id=sata1,if=virtio -m 2048 -smp 4
```</div>
    
    
    












</div>]]></description>
        </item>
        <item>
            <title><![CDATA[The 1986 Oldsmobile Incas Dashboard (2020) (116 pts)]]></title>
            <link>https://www.thedrive.com/news/33416/the-1986-oldsmobile-incas-had-the-wildest-dashboard-youve-never-seen</link>
            <guid>41218314</guid>
            <pubDate>Sun, 11 Aug 2024 18:28:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.thedrive.com/news/33416/the-1986-oldsmobile-incas-had-the-wildest-dashboard-youve-never-seen">https://www.thedrive.com/news/33416/the-1986-oldsmobile-incas-had-the-wildest-dashboard-youve-never-seen</a>, See on <a href="https://news.ycombinator.com/item?id=41218314">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-33416">

		
											<div>
					<figure>
					<img src="https://www.thedrive.com/wp-content/uploads/images-by-url-td/content/2020/05/oldsincasdash.png?w=1920" sizes="(max-width: 1920px) 100vw, 1920px" fetchpriority="high" alt="">
										<p>
						<figcaption> www.thedrive.com</figcaption>
					</p>
									</figure>
									</div>
								<div data-toc-container="" data-module="TableOfContents">
						
<p>Plenty of automakers today release autonomous car concepts that look like an ultra-modern living room inside. The steering wheel isn‚Äôt there, or it folds away, there‚Äôs big touchscreens everywhere‚Äîyou get the gist. But 34 years ago, at the height of wonderfully strange ‚Äô80s design exercises, Italdesign really went for it in the Oldsmobile ‚ÄúIncas‚Äù concept with this <em>Knight Rider</em>-looking getup. It‚Äôs definitely not your grandfather‚Äôs Oldsmobile. Neither will it be your grandson‚Äôs, sadly.</p>

<p>The only control that hasn‚Äôt been placed on the ‚Äòsteering wheel‚Äô is the turn signal, the rather plain stalk protruding from the left side of the column. Literally everything else in the interior is a button on the steering wheel: HVAC, lights, audio, cruise and automatic transmission controls are all present. This is actually the only detailed image I could find of the Incas interface. If you‚Äôre a dreamer like me, then really the only signal Oldsmobile didn‚Äôt want to actually build this is the conspicuous lack of air vents; you‚Äôd probably want some A/C in this thing considering how hot glass canopy cars tend to get in the sun.&nbsp;</p>

<figure><img decoding="async" loading="lazy" src="https://www.thedrive.com/wp-content/uploads/content-b/message-editor/1589236369426-oldsincasdashbodyres.png?strip=all&amp;quality=95" alt="message-editor%2F1589236369426-oldsincasdashbodyres.png" width="1105" height="1105"><figcaption>The Incas had a yoke like an aircraft instead of a steering wheel, <i>General Motors</i></figcaption></figure>

<p>The dash display is almost completely digital‚Äîstrangely, they left an extra analog speedometer and tachometer‚Äîand completely Eighties. The seven-segment speedometer appears to show the car going 62 km/h just sitting there for the photo shoot, so perhaps that needed a little work.</p>

<p>The Oldsmobile Incas was bodied by Italdesign. Despite how impressive the concept may be, there‚Äôs very little information about it. Many cite the Incas as having a ‚Äúquad turbo four-cylinder‚Äù, but it was more than likely equipped with a turbocharged version of Oldsmobile‚Äôs ‚ÄòQuad 4‚Äô engine (out back, of course). It‚Äôs said to make 230 horsepower and power all four wheels.</p>

<figure><img decoding="async" loading="lazy" src="https://www.thedrive.com/wp-content/uploads/content-b/message-editor/1589235298989-oldsincasfrontview.png?strip=all&amp;quality=95" alt="message-editor%2F1589235298989-oldsincasfrontview.png" width="1105" height="1105"><figcaption>The Oldsmobile Incas from the front, <i>General Motors</i></figcaption></figure>

<figure><img decoding="async" loading="lazy" src="https://www.thedrive.com/wp-content/uploads/content-b/message-editor/1589236054084-oldsincasrearview.png?strip=all&amp;quality=95" alt="message-editor%2F1589236054084-oldsincasrearview.png" width="1105" height="1105"><figcaption>The rear-mounted Turbocharged Quad-4, <i>General Motors</i></figcaption></figure>

<p>The doors out back opened pelican-style like a Tesla Model X‚Äôs, but the fronts were far less conventional. The entire front windshield and doors pivoted up to allow the driver and passenger‚Äôs entry. I think one of the only other concept cars to have this would be the <a href="https://www.thedrive.com/news/21165/watch-the-wedge-shaped-lancia-stratos-hf-zero-concept-in-action" target="_blank">Lancia Stratos Zero</a>. Italians must have some special sauce when it comes to coming up with funny new kinds of doors.</p>

<p>Unfortunately for us, Oldsmobile never went ahead and produced the Incas. <a href="https://www.youtube.com/watch?v=ntDympk3mZE" rel="noopener noreferrer" target="_blank">They made a slew of other wild concept cars as well,</a> but none of those saw the light of day either before Olds went out of business in 2004. GM doesn‚Äôt sound keen on reviving the brand considering <a href="https://www.thedrive.com/news/17015/general-motors-starts-spring-cleaning-early-selling-the-last-oldsmobile-ever-made" target="_blank">it recently sold off the last Oldsmobile ever made</a> to clear some space in its heritage collection. But we‚Äôll always have the Incas and its lucid dream of a future without conventional steering wheels.</p>

<figure><img decoding="async" loading="lazy" src="https://www.thedrive.com/wp-content/uploads/content-b/message-editor/1589237054461-oldsincasdoorsopen.png?strip=all&amp;quality=95" alt="message-editor%2F1589237054461-oldsincasdoorsopen.png" width="1105" height="1105"><figcaption>The Incas with all of its doors open, <i>General Motors</i></figcaption></figure>

<p><em>Got a tip? Send us a note: tips@thedrive.com</em></p>
					</div>
				

				

					</article></div>]]></description>
        </item>
    </channel>
</rss>