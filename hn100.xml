<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 12 Nov 2023 17:00:09 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[GPU Survival Toolkit for the AI age: The bare minimum every developer must know (140 pts)]]></title>
            <link>https://journal.hexmos.com/gpu-survival-toolkit/</link>
            <guid>38240421</guid>
            <pubDate>Sun, 12 Nov 2023 14:37:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://journal.hexmos.com/gpu-survival-toolkit/">https://journal.hexmos.com/gpu-survival-toolkit/</a>, See on <a href="https://news.ycombinator.com/item?id=38240421">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="site-main">
<article>

    <header>

        <p><span><svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M4.49365 4.58752C3.53115 6.03752 2.74365 7.70002 2.74365 9.25002C2.74365 10.6424 3.29678 11.9778 4.28134 12.9623C5.26591 13.9469 6.60127 14.5 7.99365 14.5C9.38604 14.5 10.7214 13.9469 11.706 12.9623C12.6905 11.9778 13.2437 10.6424 13.2437 9.25002C13.2437 6.00002 10.9937 3.50002 9.16865 1.68127L6.99365 6.25002L4.49365 4.58752Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
</svg> Featured</span>
        </p>

        


        <section>

            <ul>
                <li>
                    <a href="https://journal.hexmos.com/author/rijul/">
                        <img src="https://journal.hexmos.com/content/images/size/w100/2023/08/3a30bb804e1845504626b40d9fb136d2.jpeg" alt="Rijul Rajesh">
                    </a>
                </li>
            </ul>

            <div>
                
                <p><time datetime="2023-11-12">Nov 12, 2023</time>
                        <span><span>•</span> 13 min read</span>
                </p>
            </div>

        </section>

            <figure>
                <img srcset="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/a230a3ffafd791a0973337dbab3db132061e9d02787646049eb519aae1cb0f72.png 300w,
                            https://journal-wa6509js.s3.ap-south-1.amazonaws.com/a230a3ffafd791a0973337dbab3db132061e9d02787646049eb519aae1cb0f72.png 600w,
                            https://journal-wa6509js.s3.ap-south-1.amazonaws.com/a230a3ffafd791a0973337dbab3db132061e9d02787646049eb519aae1cb0f72.png 1000w,
                            https://journal-wa6509js.s3.ap-south-1.amazonaws.com/a230a3ffafd791a0973337dbab3db132061e9d02787646049eb519aae1cb0f72.png 2000w" sizes="(min-width: 1400px) 1400px, 92vw" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/a230a3ffafd791a0973337dbab3db132061e9d02787646049eb519aae1cb0f72.png" alt="GPU Survival Toolkit for the AI age: The bare minimum every developer must know">
            </figure>

    </header>

    <section>
        <!--kg-card-begin: html--><h3 id="why-cpu-knowledge-is-no-longer-enough">Why CPU Knowledge Is No Longer Enough</h3>

<p>In today's AI age, the majority of developers train in the CPU way. This knowledge has been part of our academics as well, so it's obvious to think and problem-solve in a <strong>CPU-oriented way</strong>.</p>

<p>However, the problem with CPUs is that they rely on a <strong>sequential architecture</strong>. In today's world, where we are dependent on numerous parallel tasks, CPUs are unable to work well in these scenarios.</p>

<p>Some problems faced by developers include:</p>

<h4 id="executing-parallel-tasks">Executing Parallel Tasks</h4>

<p>CPUs traditionally operate linearly, executing one instruction at a time. This limitation stems from the fact that CPUs typically feature a few powerful cores optimized for single-threaded performance.</p>

<p>When faced with multiple tasks, a CPU allocates its resources to address each task one after the other, leading to a sequential execution of instructions. This approach becomes inefficient in scenarios where numerous tasks need simultaneous attention.</p>

<p>While we make efforts to enhance CPU performance through techniques like multi-threading, the fundamental design philosophy of CPUs prioritizes sequential execution.</p>

<h4 id="running-ai-models-efficiently">Running AI Models Efficiently</h4>

<p>AI models, employing advanced architectures like transformers, leverage parallel processing to enhance performance. Unlike older <strong>recurrent neural networks (RNNs)</strong> that operate sequentially, modern transformers such as <strong>GPT</strong> can concurrently process multiple words, increasing efficiency and capability in training. Because when we train in parallel, it will result in bigger models, and bigger models will yield better outputs.</p>

<p>The concept of parallelism extends beyond natural language processing to other domains like <strong>image recognition</strong>. For instance, <a href="https://medium.com/analytics-vidhya/concept-of-alexnet-convolutional-neural-network-6e73b4f9ee30?ref=journal.hexmos.com">AlexNet</a>, an architecture in image recognition, demonstrates the power of parallel processing by processing different parts of an image simultaneously, allowing for accurate pattern identification.</p>

<p>However, CPUs, designed with a focus on single-threaded performance, struggle to fully exploit parallel processing potential. They face difficulties efficiently distributing and executing the numerous parallel computations required for intricate AI models.</p>

<p>As a result, the development of GPUs has become prevalent to address the specific needs of parallel processing in AI applications, unlocking higher efficiency and faster computation.</p>

<h4 id="how-gpu-driven-development-solves-these-issues">How GPU Driven Development Solves These Issues</h4>

<p><strong>Massive Parallelism With GPU Cores</strong></p>

<p>Engineers design GPUs with <strong>smaller, highly specialized cores</strong> compared to the <strong>larger, more powerful cores</strong> found in CPUs. This architecture allows GPUs to execute a multitude of parallel tasks simultaneously.</p>

<p>The high number of cores in a GPU are well-suited for workloads depending on parallelism, such as graphics rendering and complex mathematical computations.</p>

<p>We will soon demonstrate how using GPU parallelism can reduce the time taken for complex tasks.</p>

<p><img alt="GPUDemo1" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/ee0bdbd2103cbed5d0fa894432cc476065984dcd3921bb9158e608a50fe62f7b.png"></p>

<p><strong>Parallelism Used In AI Models</strong></p>

<p>AI models, particularly those built on deep learning frameworks like <a href="https://www.tensorflow.org/?ref=journal.hexmos.com">TensorFlow</a>, exhibit a high degree of parallelism. Neural network training involves numerous matrix operations, and GPUs, with their expansive core count, excel in parallelizing these operations. TensorFlow, along with other popular deep learning frameworks, optimizes to leverage GPU power for accelerating model training and inference.</p>

<p>We will show a demo soon how to train a neural network using the power of the GPU.</p>

<p><img alt="GPUDemo1" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/5078635f14fc266b48058cafe1f214608eecd89f0ddfebfc481df24704a7bba9.png"></p>

<h3 id="cpus-vs-gpus-whats-the-difference">CPUs Vs GPUs: What’s the Difference?</h3>

<h4 id="cpu">CPU</h4>

<p><strong>Sequential Architecture</strong></p>

<p>Central Processing Units (CPUs) are designed with a focus on sequential processing. They excel at executing a single set of instructions linearly.</p>

<p>CPUs are optimized for tasks that require high single-threaded performance, such as</p>

<ul>
<li>General-purpose computing</li>
<li>System operations</li>
<li>Handling complex algorithms that involve conditional branching</li>
</ul>

<p><strong>Limited Cores For Parallel Tasks</strong></p>

<p>CPUs feature a smaller number of cores, often in the range of <strong>2-16</strong> cores in consumer-grade processors. Each core is capable of handling its own set of instructions independently.</p>

<h4 id="gpu">GPU</h4>

<p><strong>Parallelized Architecture</strong></p>

<p>Graphics Processing Units (GPUs) are designed with a parallel architecture, making them highly efficient for parallel processing tasks.</p>

<p>This is beneficial for</p>

<ul>
<li>Rendering graphics</li>
<li>Performing complex mathematical calculations</li>
<li>Running parallelizable algorithms</li>
</ul>

<p>GPUs handle multiple tasks simultaneously by breaking them into smaller, parallel sub-tasks.</p>

<p><strong>Thousands Of Cores For Parallel Tasks</strong></p>

<p>Unlike CPUs, GPUs boast a significantly larger number of cores, often numbering in the thousands. These cores are organized into streaming multiprocessors (SMs) or similar structures.</p>

<p>The abundance of cores allows GPUs to process a massive amount of data concurrently, making them well-suited for parallelisable tasks, such as image and video processing, deep learning, and scientific simulations.</p>

<h3 id="aws-gpu-instances-a-beginners-guide">AWS GPU Instances: A Beginner's Guide</h3>

<p>Amazon Web Services (AWS) offers a variety of GPU instances used for things like machine learning.</p>

<p>Here are the different types of AWS GPU instances and their use cases:</p>

<p><strong>General-Purpose Gpu Instances</strong></p>

<ul>
<li>
<p><a href="https://aws.amazon.com/ec2/instance-types/p3/?ref=journal.hexmos.com">P3</a> and <a href="https://aws.amazon.com/ec2/instance-types/p4/?ref=journal.hexmos.com">P4</a> instances serve as versatile general-purpose GPU instances, well-suited for a broad spectrum of workloads.</p>
</li>
<li>
<p>These include machine learning training and inference, image processing, and video encoding. Their balanced capabilities make them a solid choice for diverse computational tasks.</p>
</li>
<li>
<p><strong>Pricing:</strong> The p3.2xlarge instance costs <strong>$3.06</strong> per hour.</p>
</li>
<li>This provides 1 <a href="https://www.nvidia.com/en-gb/data-center/tesla-v100/?ref=journal.hexmos.com">NVIDIA Tesla V100 GPU</a> of 16 GB GPU memory</li>
</ul>

<p><strong>Inference-optimized GPU instances</strong></p>

<ul>
<li>
<p>Inference is the process of running live data through a trained AI model to make a prediction or solve a task.</p>
</li>
<li>
<p><a href="https://aws.amazon.com/ec2/instance-types/p5/?ref=journal.hexmos.com">P5</a> and <a href="https://aws.amazon.com/ec2/instance-types/inf1/?ref=journal.hexmos.com">Inf1</a> instances specifically cater to machine learning inference, excelling in scenarios where low latency and cost efficiency are essential.</p>
</li>
<li>
<p><strong>Pricing:</strong> the p5.48xlarge instance costs <strong>$98.32</strong> per hour.</p>
</li>
<li>This provides 8 <a href="https://www.nvidia.com/en-in/data-center/h100/?ref=journal.hexmos.com">NVIDIA H100 GPUs</a> of 80 GB memory each, totalling upto 640 GB Video Memory.</li>
</ul>

<p><strong>Graphics-optimized GPU instances</strong></p>

<ul>
<li>
<p><a href="https://aws.amazon.com/ec2/instance-types/g4/?ref=journal.hexmos.com">G4 instances</a> instances are engineered to handle graphics-intensive tasks.</p>
</li>
<li>
<p>A video game developer might use a G4 instance to render 3D graphics for a video game.</p>
</li>
<li><strong>Pricing:</strong> g4dn.xlarge costs <strong>$0.526</strong> to run per hour.</li>
<li>Uses 1 <a href="https://www.nvidia.com/en-in/data-center/tesla-t4/?ref=journal.hexmos.com">NVIDIA T4 GPU</a> of 16 GB Memory.</li>
</ul>

<p><strong>Managed GPU Instances</strong></p>

<ul>
<li>
<p><a href="https://aws.amazon.com/sagemaker/?ref=journal.hexmos.com">Amazon SageMaker</a> is a managed service for machine learning. It provides access to a variety of GPU-powered instances, including P3, P4, and P5 instances.</p>
</li>
<li>
<p>SageMaker is a good choice for organizations that wants to begin machine learning easily without having to manage the underlying infrastructure.</p>
</li>
<li>
<p><a href="https://aws.amazon.com/sagemaker/pricing/?ref=journal.hexmos.com">Pricing of Amazon Sagemaker</a></p>
</li>
</ul>

<h3 id="using-nvidias-cuda-for-gpu-driven-development">Using Nvidia's CUDA for GPU-Driven Development</h3>

<h4 id="what-is-cuda">What Is Cuda?</h4>

<p><strong>CUDA</strong> is a parallel computing platform and programming model developed by NVIDIA, enabling developers to accelerate their applications by harnessing the power of GPU accelerators.</p>

<p>The Practical examples in the demo will use CUDA.</p>

<h4 id="how-to-setup-cuda-on-your-machine">How to Setup Cuda on Your Machine</h4>

<p>To setup CUDA on your machine you can follow these steps.</p>

<ul>
<li>Download <a href="https://developer.nvidia.com/cuda-downloads?ref=journal.hexmos.com">CUDA</a></li>
<li>From the above link download the base installer as well as the driver installer</li>
<li>Go to .bashrc in home folder</li>
<li>
<p>Add the following lines below</p>
</li>
<li>
<p><code>export PATH="/usr/local/cuda-12.3/bin:$PATH"</code></p>
</li>
<li>
<p><code>export LD_LIBRARY_PATH="/usr/local/cuda-12.3/lib64:$LD_LIBRARY_PATH"</code></p>
</li>
<li>
<p>Execute the following commands</p>
</li>
<li><code>sudo apt-get install cuda-toolkit</code></li>
<li>
<p><code>sudo apt-get install nvidia-gds</code></p>
</li>
<li>
<p>Reboot the system for the changes to take effect</p>
</li>
</ul>

<h4 id="basic-commands-to-use">Basic Commands to Use</h4>

<p>Once you have CUDA installed, here are some helpful commands.</p>

<p><code>lspci | grep VGA</code></p>

<p>The purpose of this command is to identify and list the GPUs in your system.
<img alt="Alt text" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/ea108a4de53720d8e4de22247f92b43481a000cfe41026826e52f4af020b9c0f.png"></p>

<p><code>nvidia-smi</code></p>

<p>It stands for "NVIDIA System Management Interface"
It provides detailed information about the NVIDIA GPUs in your system, including utilization, temperature, memory usage and more.</p>

<p><img alt="Alt text" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/b467adbefdfe4fced1552ca63134994c2924dc648955adb585c80d1a6356f10f.png"></p>

<p><code>sudo lshw -C display</code></p>

<p>The purpose is to provide detailed information about the display controllers in your system, including graphics cards.
<img alt="Alt text" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/0af5ca02e576f5da48a561ebffb4bd20e4051899cb1b1e69caca78aeff58cff7.png"></p>

<p><code>inxi -G</code></p>

<p>This command provides information about the graphics subsystem, including details about the GPU and the display.
<img alt="Alt text" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/8352bf05d3be3b8085e837de0f69f244ab6c34041c6b462cf78513fcae6373c0.png"></p>

<p><code>sudo hwinfo --gfxcard</code></p>

<p>Its purpose is to obtain detailed information about the graphics cards in your system.</p>

<p><img alt="Alt text" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/70fa1b931593c213a1a949dbc700d47cca2e933cee331d63e03e0806d6327baa.png"></p>

<h3 id="get-started-with-the-cuda-framework">Get Started with the Cuda Framework</h3>

<p>As we have installed the CUDA Framework, let's start executing operations that showcases its functionality.</p>

<h4 id="array-addition-problem">Array Addition Problem</h4>

<p>A suitable problem to demonstrate the parallelization of GPUs is the <strong>Array addition problem</strong>.</p>

<p>Consider the following arrays:</p>

<ul>
<li>
<p>Array A = [1,2,3,4,5,6]</p>
</li>
<li>
<p>Array B = [7,8,9,10,11,12]</p>
</li>
<li>
<p>We need to store the sum of each element and store it in Array C.</p>
</li>
<li>
<p>Like C = [1+7,2+8,3+9,4+10,5+11,6+12] = [8,10,12,14,16,18]</p>
</li>
<li>
<p>If the CPU is to execute such operation, it would be executing the operation like the below code.</p>
</li>
</ul>

<div><pre><span></span><span>#include</span><span> </span><span>&lt;stdio.h&gt;</span>
<span>int</span><span> </span><span>a</span><span>[]</span><span> </span><span>=</span><span> </span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>,</span><span>4</span><span>,</span><span>5</span><span>,</span><span>6</span><span>};</span>
<span>int</span><span> </span><span>b</span><span>[]</span><span> </span><span>=</span><span> </span><span>{</span><span>7</span><span>,</span><span>8</span><span>,</span><span>9</span><span>,</span><span>10</span><span>,</span><span>11</span><span>,</span><span>12</span><span>};</span>
<span>int</span><span> </span><span>c</span><span>[</span><span>6</span><span>];</span>

<span>int</span><span> </span><span>main</span><span>()</span><span> </span><span>{</span>
<span>    </span><span>int</span><span> </span><span>N</span><span> </span><span>=</span><span> </span><span>6</span><span>;</span><span>  </span><span>// Number of elements</span>

<span>    </span><span>for</span><span> </span><span>(</span><span>int</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>N</span><span>;</span><span> </span><span>i</span><span>++</span><span>)</span><span> </span><span>{</span>
<span>        </span><span>c</span><span>[</span><span>i</span><span>]</span><span> </span><span>=</span><span> </span><span>a</span><span>[</span><span>i</span><span>]</span><span> </span><span>+</span><span> </span><span>b</span><span>[</span><span>i</span><span>];</span>
<span>    </span><span>}</span>

<span>    </span><span>for</span><span> </span><span>(</span><span>int</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>N</span><span>;</span><span> </span><span>i</span><span>++</span><span>)</span><span> </span><span>{</span>
<span>        </span><span>printf</span><span>(</span><span>"c[%d] = %d"</span><span>,</span><span> </span><span>i</span><span>,</span><span> </span><span>c</span><span>[</span><span>i</span><span>]);</span>
<span>    </span><span>}</span>

<span>    </span><span>return</span><span> </span><span>0</span><span>;</span>
<span>}</span>
</pre></div>

<p>The previous method involves traversing the array elements one by one and performing the additions sequentially. However, when dealing with a <strong>substantial volume of numbers</strong>, this approach becomes sluggish due to its <strong>sequential nature</strong>.</p>

<p>To address this limitation, GPUs offer a solution by <strong>parallelizing the addition process</strong>. Unlike CPUs, which execute operations one after the other, GPUs can concurrently perform multiple additions.</p>

<p>For instance, the operations 1+7, 2+8, 3+9, 4+10, 5+11 and 6+12 can be executed simultaneously through parallelization with the assistance of a GPU.</p>

<p>Utilizing CUDA, the code to achieve this parallelized addition is as follows:</p>

<p>We will use a kernel file (.cu) for the demonstration.</p>

<p>Let's go through the code one by one.</p>

<div><pre><span></span><span>__global__</span><span> </span><span>void</span><span> </span><span>vectorAdd</span><span>(</span><span>int</span><span>*</span><span> </span><span>a</span><span>,</span><span> </span><span>int</span><span>*</span><span> </span><span>b</span><span>,</span><span> </span><span>int</span><span>*</span><span> </span><span>c</span><span>)</span>
<span>{</span>
<span>    </span><span>int</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>threadIdx</span><span>.</span><span>x</span><span>;</span>
<span>    </span><span>c</span><span>[</span><span>i</span><span>]</span><span> </span><span>=</span><span> </span><span>a</span><span>[</span><span>i</span><span>]</span><span> </span><span>+</span><span> </span><span>b</span><span>[</span><span>i</span><span>]</span><span>;</span>
<span>    </span><span>return</span><span>;</span>
<span>}</span>
</pre></div>

<ul>
<li>
<p><code>__global__</code> specifier indicates that this function is a kernel function, which will be called on the GPU.</p>
</li>
<li>
<p><code>vectorAdd</code> takes three integer pointers (a, b, and c) as arguments, representing vectors to be added.</p>
</li>
<li>
<p><code>threadIdx.x</code> retrieves the index of the current thread (in a one-dimensional grid).</p>
</li>
<li>
<p>The sum of the corresponding elements from vectors a and b is stored in vector c.</p>
</li>
</ul>

<p>Now lets go through the main function.</p>

<p>Pointers <code>cudaA</code>, <code>cudaB</code> and <code>cudaC</code> are created to point to memory on the GPU.</p>

<div><pre><span></span><span>// Uses CUDA to use functions that parallelly calculates the addition</span>
<span>int</span><span> </span><span>main</span><span>(){</span>
<span>    </span><span>int</span><span> </span><span>a</span><span>[]</span><span> </span><span>=</span><span> </span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>};</span>
<span>    </span><span>int</span><span> </span><span>b</span><span>[]</span><span> </span><span>=</span><span> </span><span>{</span><span>4</span><span>,</span><span>5</span><span>,</span><span>6</span><span>};</span>
<span>    </span><span>int</span><span> </span><span>c</span><span>[</span><span>sizeof</span><span>(</span><span>a</span><span>)</span><span> </span><span>/</span><span> </span><span>sizeof</span><span>(</span><span>int</span><span>)]</span><span> </span><span>=</span><span> </span><span>{</span><span>0</span><span>};</span>
<span>    </span><span>// Create pointers into the GPU</span>
<span>    </span><span>int</span><span>*</span><span> </span><span>cudaA</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span>
<span>    </span><span>int</span><span>*</span><span> </span><span>cudaB</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span>
<span>    </span><span>int</span><span>*</span><span> </span><span>cudaC</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span>
</pre></div>

<p>Using <code>cudaMalloc</code>, memory is allocated on the GPU for the vectors cudaA, cudaB, and cudaC.</p>

<div><pre><span></span><span>// Allocate memory in the GPU</span>
<span>cudaMalloc</span><span>(</span><span>&amp;</span><span>cudaA</span><span>,</span><span>sizeof</span><span>(</span><span>a</span><span>));</span>
<span>cudaMalloc</span><span>(</span><span>&amp;</span><span>cudaB</span><span>,</span><span>sizeof</span><span>(</span><span>b</span><span>));</span>
<span>cudaMalloc</span><span>(</span><span>&amp;</span><span>cudaC</span><span>,</span><span>sizeof</span><span>(</span><span>c</span><span>));</span>
</pre></div>

<p>The content of vectors a and b is copied from the host to the GPU using <code>cudaMemcpy</code>.</p>

<div><pre><span></span><span>// Copy the vectors into the gpu</span>
<span>cudaMemcpy</span><span>(</span><span>cudaA</span><span>,</span><span> </span><span>a</span><span>,</span><span> </span><span>sizeof</span><span>(</span><span>a</span><span>),</span><span> </span><span>cudaMemcpyHostToDevice</span><span>);</span>
<span>cudaMemcpy</span><span>(</span><span>cudaB</span><span>,</span><span> </span><span>b</span><span>,</span><span> </span><span>sizeof</span><span>(</span><span>b</span><span>),</span><span> </span><span>cudaMemcpyHostToDevice</span><span>);</span>
</pre></div>

<p>The kernel function <code>vectorAdd</code> is launched with one block and a number of threads equal to the size of the vectors.</p>

<div><pre><span></span><span>// Launch the kernel with one block and a number of threads equal to the size of the vectors</span>
<span>vectorAdd</span><span> </span><span>&lt;&lt;&lt;</span><span>1</span><span>,</span><span> </span><span>sizeof</span><span>(</span><span>a</span><span>)</span><span> </span><span>/</span><span> </span><span>sizeof</span><span>(</span><span>a</span><span>[</span><span>0</span><span>])</span><span>&gt;&gt;&gt;</span><span> </span><span>(</span><span>cudaA</span><span>,</span><span> </span><span>cudaB</span><span>,</span><span> </span><span>cudaC</span><span>);</span>
</pre></div>

<p>The result vector <code>cudaC</code> is copied from the GPU back to the host.</p>

<div><pre><span></span><span>// Copy the result vector back to the host</span>
<span>cudaMemcpy</span><span>(</span><span>c</span><span>,</span><span> </span><span>cudaC</span><span>,</span><span> </span><span>sizeof</span><span>(</span><span>c</span><span>),</span><span> </span><span>cudaMemcpyDeviceToHost</span><span>);</span>
</pre></div>

<p>We can then print the results as usual</p>

<div><pre><span></span><span>    </span><span>// Print the result</span>
<span>    </span><span>for</span><span> </span><span>(</span><span>int</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>sizeof</span><span>(</span><span>c</span><span>)</span><span> </span><span>/</span><span> </span><span>sizeof</span><span>(</span><span>int</span><span>);</span><span> </span><span>i</span><span>++</span><span>)</span>
<span>    </span><span>{</span>
<span>        </span><span>printf</span><span>(</span><span>"c[%d] = %d"</span><span>,</span><span> </span><span>i</span><span>,</span><span> </span><span>c</span><span>[</span><span>i</span><span>]);</span>
<span>    </span><span>}</span>

<span>    </span><span>return</span><span> </span><span>0</span><span>;</span>
<span>}</span>
</pre></div>

<p>For executing this code, we will use <code>nvcc</code> command.</p>

<p>We will get the output as</p>

<p><img alt="GPU Output" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/144c2193b0d5ad71eb7bd4da490534fb278ed174df6ec8c6411b039f16757116.png"></p>

<p>Here's the <a href="https://github.com/RijulTP/GPUToolkit/tree/main/array-addition?ref=journal.hexmos.com">full code</a> for your reference.</p>

<h4 id="optimize-image-generation-in-python-using-the-gpu">Optimize Image Generation in Python Using the GPU</h4>

<ul>
<li>
<p>This section explores the optimization of performance-intensive tasks, such as image generation, using GPU processing.</p>
</li>
<li>
<p><strong>Mandelbrot set</strong> is a mathematical construct that forms intricate visual patterns based on the behavior of specific numbers in a prescribed equation. Generating one is a resource intensive operation.</p>
</li>
<li>
<p>In the following code snippet, you can observe the conventional method of generating a Mandelbrot set using CPU processing, which is slow.</p>
</li>
</ul>

<div><pre><span></span><span># Import necessary libraries</span>
<span>from</span> <span>matplotlib</span> <span>import</span> <span>pyplot</span> <span>as</span> <span>plt</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>from</span> <span>pylab</span> <span>import</span> <span>imshow</span><span>,</span> <span>show</span>
<span>from</span> <span>timeit</span> <span>import</span> <span>default_timer</span> <span>as</span> <span>timer</span>

<span># Function to calculate the Mandelbrot set for a given point (x, y)</span>
<span>def</span> <span>mandel</span><span>(</span><span>x</span><span>,</span> <span>y</span><span>,</span> <span>max_iters</span><span>):</span>
    <span>c</span> <span>=</span> <span>complex</span><span>(</span><span>x</span><span>,</span> <span>y</span><span>)</span>
    <span>z</span> <span>=</span> <span>0.0</span><span>j</span>
    <span># Iterate to check if the point is in the Mandelbrot set</span>
    <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>max_iters</span><span>):</span>
        <span>z</span> <span>=</span> <span>z</span><span>*</span><span>z</span> <span>+</span> <span>c</span>
        <span>if</span> <span>(</span><span>z</span><span>.</span><span>real</span><span>*</span><span>z</span><span>.</span><span>real</span> <span>+</span> <span>z</span><span>.</span><span>imag</span><span>*</span><span>z</span><span>.</span><span>imag</span><span>)</span> <span>&gt;=</span> <span>4</span><span>:</span>
            <span>return</span> <span>i</span>
    <span># If within the maximum iterations, consider it part of the set</span>
    <span>return</span> <span>max_iters</span>

<span># Function to create the Mandelbrot fractal within a specified region</span>
<span>def</span> <span>create_fractal</span><span>(</span><span>min_x</span><span>,</span> <span>max_x</span><span>,</span> <span>min_y</span><span>,</span> <span>max_y</span><span>,</span> <span>image</span><span>,</span> <span>iters</span><span>):</span>
    <span>height</span> <span>=</span> <span>image</span><span>.</span><span>shape</span><span>[</span><span>0</span><span>]</span>
    <span>width</span> <span>=</span> <span>image</span><span>.</span><span>shape</span><span>[</span><span>1</span><span>]</span>

    <span># Calculate pixel sizes based on the specified region</span>
    <span>pixel_size_x</span> <span>=</span> <span>(</span><span>max_x</span> <span>-</span> <span>min_x</span><span>)</span> <span>/</span> <span>width</span>
    <span>pixel_size_y</span> <span>=</span> <span>(</span><span>max_y</span> <span>-</span> <span>min_y</span><span>)</span> <span>/</span> <span>height</span>

    <span># Iterate over each pixel in the image and compute the Mandelbrot value</span>
    <span>for</span> <span>x</span> <span>in</span> <span>range</span><span>(</span><span>width</span><span>):</span>
        <span>real</span> <span>=</span> <span>min_x</span> <span>+</span> <span>x</span> <span>*</span> <span>pixel_size_x</span>
        <span>for</span> <span>y</span> <span>in</span> <span>range</span><span>(</span><span>height</span><span>):</span>
            <span>imag</span> <span>=</span> <span>min_y</span> <span>+</span> <span>y</span> <span>*</span> <span>pixel_size_y</span>
            <span>color</span> <span>=</span> <span>mandel</span><span>(</span><span>real</span><span>,</span> <span>imag</span><span>,</span> <span>iters</span><span>)</span>
            <span>image</span><span>[</span><span>y</span><span>,</span> <span>x</span><span>]</span> <span>=</span> <span>color</span>

<span># Create a blank image array for the Mandelbrot set</span>
<span>image</span> <span>=</span> <span>np</span><span>.</span><span>zeros</span><span>((</span><span>1024</span><span>,</span> <span>1536</span><span>),</span> <span>dtype</span><span>=</span><span>np</span><span>.</span><span>uint8</span><span>)</span>

<span># Record the start time for performance measurement</span>
<span>start</span> <span>=</span> <span>timer</span><span>()</span>

<span># Generate the Mandelbrot set within the specified region and iterations</span>
<span>create_fractal</span><span>(</span><span>-</span><span>2.0</span><span>,</span> <span>1.0</span><span>,</span> <span>-</span><span>1.0</span><span>,</span> <span>1.0</span><span>,</span> <span>image</span><span>,</span> <span>20</span><span>)</span>

<span># Calculate the time taken to create the Mandelbrot set</span>
<span>dt</span> <span>=</span> <span>timer</span><span>()</span> <span>-</span> <span>start</span>

<span># Print the time taken to generate the Mandelbrot set</span>
<span>print</span><span>(</span><span>"Mandelbrot created in </span><span>%f</span><span> s"</span> <span>%</span> <span>dt</span><span>)</span>

<span># Display the Mandelbrot set using matplotlib</span>
<span>imshow</span><span>(</span><span>image</span><span>)</span>
<span>show</span><span>()</span>
</pre></div>

<p>The above code produces the output in <code>4.07</code> seconds.</p>

<p><img alt="Mandelbrot without GPU" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/14af8fd709215ad96688a3364deefea9cfc2fa13497810587106cef04c5a413c.png"></p>

<ul>
<li>
<p>To make this faster, we can parallelize the code with GPU by using <a href="https://numba.pydata.org/?ref=journal.hexmos.com">Numba library</a>, Lets see how its done.</p>
</li>
<li>
<p>We will import Just-In-Time compilation, CUDA for GPU acceleration, and other utilities from numba</p>
</li>
</ul>

<div><pre><span></span><span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>from</span> <span>numba</span> <span>import</span> <span>jit</span><span>,</span> <span>cuda</span><span>,</span> <span>uint32</span><span>,</span> <span>f8</span><span>,</span> <span>uint8</span>
<span>from</span> <span>pylab</span> <span>import</span> <span>imshow</span><span>,</span> <span>show</span>
<span>from</span> <span>timeit</span> <span>import</span> <span>default_timer</span> <span>as</span> <span>timer</span>
</pre></div>

<ul>
<li>The <code>@jit</code> decorator signals Numba to perform <strong>Just-In-Time compilation</strong>, translating the Python code into machine code for improved execution speed.</li>
</ul>

<div><pre><span></span><span>@jit</span>
<span>def</span> <span>mandel</span><span>(</span><span>x</span><span>,</span> <span>y</span><span>,</span> <span>max_iters</span><span>):</span>
    <span>c</span> <span>=</span> <span>complex</span><span>(</span><span>x</span><span>,</span> <span>y</span><span>)</span>
    <span>z</span> <span>=</span> <span>0.0</span><span>j</span>
    <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>max_iters</span><span>):</span>
        <span>z</span> <span>=</span> <span>z</span><span>*</span><span>z</span> <span>+</span> <span>c</span>
        <span>if</span> <span>(</span><span>z</span><span>.</span><span>real</span><span>*</span><span>z</span><span>.</span><span>real</span> <span>+</span> <span>z</span><span>.</span><span>imag</span><span>*</span><span>z</span><span>.</span><span>imag</span><span>)</span> <span>&gt;=</span> <span>4</span><span>:</span>
            <span>return</span> <span>i</span>

    <span>return</span> <span>max_iters</span>

<span>@jit</span>
<span>def</span> <span>create_fractal</span><span>(</span><span>min_x</span><span>,</span> <span>max_x</span><span>,</span> <span>min_y</span><span>,</span> <span>max_y</span><span>,</span> <span>image</span><span>,</span> <span>iters</span><span>):</span>
    <span>height</span> <span>=</span> <span>image</span><span>.</span><span>shape</span><span>[</span><span>0</span><span>]</span>
    <span>width</span> <span>=</span> <span>image</span><span>.</span><span>shape</span><span>[</span><span>1</span><span>]</span>

    <span>pixel_size_x</span> <span>=</span> <span>(</span><span>max_x</span> <span>-</span> <span>min_x</span><span>)</span> <span>/</span> <span>width</span>
    <span>pixel_size_y</span> <span>=</span> <span>(</span><span>max_y</span> <span>-</span> <span>min_y</span><span>)</span> <span>/</span> <span>height</span>

    <span>for</span> <span>x</span> <span>in</span> <span>range</span><span>(</span><span>width</span><span>):</span>
        <span>real</span> <span>=</span> <span>min_x</span> <span>+</span> <span>x</span> <span>*</span> <span>pixel_size_x</span>
        <span>for</span> <span>y</span> <span>in</span> <span>range</span><span>(</span><span>height</span><span>):</span>
            <span>imag</span> <span>=</span> <span>min_y</span> <span>+</span> <span>y</span> <span>*</span> <span>pixel_size_y</span>
            <span>color</span> <span>=</span> <span>mandel</span><span>(</span><span>real</span><span>,</span> <span>imag</span><span>,</span> <span>iters</span><span>)</span>
            <span>image</span><span>[</span><span>y</span><span>,</span> <span>x</span><span>]</span> <span>=</span> <span>color</span>
</pre></div>

<ul>
<li><code>mandel_gpu</code> is a GPU-compatible version of the mandel function created using cuda.jit. This allows the mandel logic to be offloaded to the GPU.</li>
<li>This is done by using <code>@cuda.jit</code> decorator along with specifying the data types (f8 for float, uint32 for unsigned integer) for the function arguments.</li>
<li>The <code>device=True</code> argument indicates that this function will run on the GPU.</li>
</ul>

<div><pre><span></span><span>mandel_gpu</span> <span>=</span> <span>cuda</span><span>.</span><span>jit</span><span>((</span><span>f8</span><span>,</span> <span>f8</span><span>,</span> <span>uint32</span><span>),</span> <span>device</span><span>=</span><span>True</span><span>)(</span><span>mandel</span><span>)</span>
</pre></div>

<ul>
<li>The mandel_kernel function is defined to be executed on the CUDA GPU. It is responsible for parallelizing the Mandelbrot set generation across GPU threads.</li>
</ul>

<div><pre><span></span><span>@cuda</span><span>.</span><span>jit</span><span>((</span><span>f8</span><span>,</span> <span>f8</span><span>,</span> <span>f8</span><span>,</span> <span>f8</span><span>,</span> <span>uint8</span><span>[:,:],</span> <span>uint32</span><span>))</span>
<span>def</span> <span>mandel_kernel</span><span>(</span><span>min_x</span><span>,</span> <span>max_x</span><span>,</span> <span>min_y</span><span>,</span> <span>max_y</span><span>,</span> <span>image</span><span>,</span> <span>iters</span><span>):</span>
    <span>height</span> <span>=</span> <span>image</span><span>.</span><span>shape</span><span>[</span><span>0</span><span>]</span>
    <span>width</span> <span>=</span> <span>image</span><span>.</span><span>shape</span><span>[</span><span>1</span><span>]</span>

    <span>pixel_size_x</span> <span>=</span> <span>(</span><span>max_x</span> <span>-</span> <span>min_x</span><span>)</span> <span>/</span> <span>width</span>
    <span>pixel_size_y</span> <span>=</span> <span>(</span><span>max_y</span> <span>-</span> <span>min_y</span><span>)</span> <span>/</span> <span>height</span>

    <span>startX</span><span>,</span> <span>startY</span> <span>=</span> <span>cuda</span><span>.</span><span>grid</span><span>(</span><span>2</span><span>)</span>
    <span>gridX</span> <span>=</span> <span>cuda</span><span>.</span><span>gridDim</span><span>.</span><span>x</span> <span>*</span> <span>cuda</span><span>.</span><span>blockDim</span><span>.</span><span>x</span>
    <span>gridY</span> <span>=</span> <span>cuda</span><span>.</span><span>gridDim</span><span>.</span><span>y</span> <span>*</span> <span>cuda</span><span>.</span><span>blockDim</span><span>.</span><span>y</span>

    <span>for</span> <span>x</span> <span>in</span> <span>range</span><span>(</span><span>startX</span><span>,</span> <span>width</span><span>,</span> <span>gridX</span><span>):</span>
        <span>real</span> <span>=</span> <span>min_x</span> <span>+</span> <span>x</span> <span>*</span> <span>pixel_size_x</span>
        <span>for</span> <span>y</span> <span>in</span> <span>range</span><span>(</span><span>startY</span><span>,</span> <span>height</span><span>,</span> <span>gridY</span><span>):</span>
            <span>imag</span> <span>=</span> <span>min_y</span> <span>+</span> <span>y</span> <span>*</span> <span>pixel_size_y</span>
            <span>image</span><span>[</span><span>y</span><span>,</span> <span>x</span><span>]</span> <span>=</span> <span>mandel_gpu</span><span>(</span><span>real</span><span>,</span> <span>imag</span><span>,</span> <span>iters</span><span>)</span>
</pre></div>

<p>The above code gets executed in <code>0.43 seconds</code>. Which is a lot faster the CPU Based code we had earlier.</p>

<p><img alt="Mandelbrot without GPU" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/cff7881a179a0a27ce03882b3f75a8c8d2a984fe308c84e87bd0446c8871452d.png"></p>

<p>Here's the <a href="https://github.com/RijulTP/GPUToolkit/tree/main/mandelbrot?ref=journal.hexmos.com">full code</a> for your reference.</p>

<h4 id="training-a-cat-vs-dog-neural-network-using-the-gpu">Training a Cat VS Dog Neural Network Using the GPU</h4>

<p>One of the hot topics we see nowadays is how GPUs are getting used in AI, So to demonstrate that we will be creating a <strong>neural network</strong> to differentiate between cats and dogs.</p>

<p><strong>Prerequisites</strong></p>

<ul>
<li>CUDA</li>
<li>
<p>Tensorflow -&gt; Can be installed via
  <code>pip install tensorflow[and-cuda]</code></p>
</li>
<li>
<p>We will use a data set of cats and dogs from <a href="https://www.kaggle.com/competitions/dogs-vs-cats/overview?ref=journal.hexmos.com">kaggle</a></p>
</li>
<li>
<p>Once you have downloaded it, Unzip them, organize the pictures of cats and dogs in the training folder into different subfolders, Like so.</p>
</li>
</ul>

<p><img alt="CNN File Structure" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/47b0cc05fa99283bd8dcd39a801809bdf5521a285df558c1436460ddf4d1ebdd.png"></p>

<p>This is the code we will use for training and using the Cat vs Dog Model.</p>

<p>The below code uses a convolutional neural network, you can <a href="https://www.analyticsvidhya.com/blog/2021/06/beginner-friendly-project-cat-and-dog-classification-using-cnn/?ref=journal.hexmos.com">read more details about it</a></p>

<p><strong>Importing Libraries</strong></p>

<ul>
<li>pandas and numpy for data manipulation.</li>
<li>Sequential for creating a linear stack of layers in the neural network.</li>
<li>Convolution2D, MaxPooling2D, Dense, and Flatten are layers used in building the Convolutional Neural Network (CNN).</li>
<li>ImageDataGenerator for real-time data augmentation during training.</li>
</ul>

<div><pre><span></span><span>import</span> <span>pandas</span> <span>as</span> <span>pd</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>from</span> <span>keras.models</span> <span>import</span> <span>Sequential</span>
<span>from</span> <span>keras.layers</span> <span>import</span> <span>Convolution2D</span><span>,</span> <span>MaxPooling2D</span><span>,</span> <span>Dense</span><span>,</span> <span>Flatten</span>
<span>from</span> <span>keras.preprocessing.image</span> <span>import</span> <span>ImageDataGenerator</span>
</pre></div>

<p><strong>Initializing the Convolutional Neural Network</strong></p>

<div><pre><span></span><span>classifier</span> <span>=</span> <span>Sequential</span><span>()</span>
</pre></div>

<p><strong>Loading the data for training</strong></p>

<div><pre><span></span><span>train_datagen</span> <span>=</span> <span>ImageDataGenerator</span><span>(</span>
    <span>rescale</span><span>=</span><span>1.</span><span>/</span><span>255</span><span>,</span>
    <span>shear_range</span><span>=</span><span>0.2</span><span>,</span>
    <span>zoom_range</span><span>=</span><span>0.2</span><span>,</span>
    <span>horizontal_flip</span><span>=</span><span>True</span>
<span>)</span>
<span>test_datagen</span> <span>=</span> <span>ImageDataGenerator</span><span>(</span><span>rescale</span><span>=</span><span>1.</span><span>/</span><span>255</span><span>)</span>

<span>training_set</span> <span>=</span> <span>train_datagen</span><span>.</span><span>flow_from_directory</span><span>(</span>
    <span>'./training_set'</span><span>,</span>
    <span>target_size</span><span>=</span><span>(</span><span>64</span><span>,</span> <span>64</span><span>),</span>
    <span>batch_size</span><span>=</span><span>32</span><span>,</span>
    <span>class_mode</span><span>=</span><span>'binary'</span>
<span>)</span>

<span>test_set</span> <span>=</span> <span>test_datagen</span><span>.</span><span>flow_from_directory</span><span>(</span>
    <span>'./test_set'</span><span>,</span>
    <span>target_size</span><span>=</span><span>(</span><span>64</span><span>,</span> <span>64</span><span>),</span>
    <span>batch_size</span><span>=</span><span>32</span><span>,</span>
    <span>class_mode</span><span>=</span><span>'binary'</span>
<span>)</span>
</pre></div>

<p><strong>Building the CNN Architecture</strong></p>

<div><pre><span></span><span>classifier</span><span>.</span><span>add</span><span>(</span><span>Convolution2D</span><span>(</span><span>32</span><span>,</span> <span>3</span><span>,</span> <span>3</span><span>,</span> <span>input_shape</span><span>=</span><span>(</span><span>64</span><span>,</span> <span>64</span><span>,</span> <span>3</span><span>),</span> <span>activation</span><span>=</span><span>'relu'</span><span>))</span>
<span>classifier</span><span>.</span><span>add</span><span>(</span><span>MaxPooling2D</span><span>(</span><span>pool_size</span><span>=</span><span>(</span><span>2</span><span>,</span> <span>2</span><span>)))</span>
<span>classifier</span><span>.</span><span>add</span><span>(</span><span>Flatten</span><span>())</span>
<span>classifier</span><span>.</span><span>add</span><span>(</span><span>Dense</span><span>(</span><span>units</span><span>=</span><span>128</span><span>,</span> <span>activation</span><span>=</span><span>'relu'</span><span>))</span>
<span>classifier</span><span>.</span><span>add</span><span>(</span><span>Dense</span><span>(</span><span>units</span><span>=</span><span>1</span><span>,</span> <span>activation</span><span>=</span><span>'sigmoid'</span><span>))</span>
</pre></div>

<p><strong>Compiling the model</strong></p>

<div><pre><span></span><span>classifier</span><span>.</span><span>compile</span><span>(</span><span>optimizer</span><span>=</span><span>'adam'</span><span>,</span> <span>loss</span><span>=</span><span>'binary_crossentropy'</span><span>,</span> <span>metrics</span><span>=</span><span>[</span><span>'accuracy'</span><span>])</span>
</pre></div>

<p><strong>Training the model</strong></p>

<div><pre><span></span><span>classifier</span><span>.</span><span>fit</span><span>(</span><span>training_set</span><span>,</span> <span>epochs</span><span>=</span><span>25</span><span>,</span> <span>validation_data</span><span>=</span><span>test_set</span><span>,</span> <span>validation_steps</span><span>=</span><span>2000</span><span>)</span>
<span>classifier</span><span>.</span><span>save</span><span>(</span><span>'trained_model.h5'</span><span>)</span>
</pre></div>

<p>Once we have trained the model, The model is stored in a .h5 file using <code>classifier.save</code></p>

<p>In the below code, we will use this <code>trained_model.h5</code> file to recognize cats and dogs.</p>

<div><pre><span></span><span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>from</span> <span>keras.models</span> <span>import</span> <span>load_model</span>
<span>import</span> <span>keras.utils</span> <span>as</span> <span>image</span>

<span>def</span> <span>predict_image</span><span>(</span><span>imagepath</span><span>,</span> <span>classifier</span><span>):</span>
    <span>predict</span> <span>=</span> <span>image</span><span>.</span><span>load_img</span><span>(</span><span>imagepath</span><span>,</span> <span>target_size</span><span>=</span><span>(</span><span>64</span><span>,</span> <span>64</span><span>))</span>
    <span>predict_modified</span> <span>=</span> <span>image</span><span>.</span><span>img_to_array</span><span>(</span><span>predict</span><span>)</span>
    <span>predict_modified</span> <span>=</span> <span>predict_modified</span> <span>/</span> <span>255</span>
    <span>predict_modified</span> <span>=</span> <span>np</span><span>.</span><span>expand_dims</span><span>(</span><span>predict_modified</span><span>,</span> <span>axis</span><span>=</span><span>0</span><span>)</span>
    <span>result</span> <span>=</span> <span>classifier</span><span>.</span><span>predict</span><span>(</span><span>predict_modified</span><span>)</span>

    <span>if</span> <span>result</span><span>[</span><span>0</span><span>][</span><span>0</span><span>]</span> <span>&gt;=</span> <span>0.5</span><span>:</span>
        <span>prediction</span> <span>=</span> <span>'dog'</span>
        <span>probability</span> <span>=</span> <span>result</span><span>[</span><span>0</span><span>][</span><span>0</span><span>]</span>
        <span>print</span><span>(</span><span>"Probability = "</span> <span>+</span> <span>str</span><span>(</span><span>probability</span><span>))</span>
        <span>print</span><span>(</span><span>"Prediction = "</span> <span>+</span> <span>prediction</span><span>)</span>
    <span>else</span><span>:</span>
        <span>prediction</span> <span>=</span> <span>'cat'</span>
        <span>probability</span> <span>=</span> <span>1</span> <span>-</span> <span>result</span><span>[</span><span>0</span><span>][</span><span>0</span><span>]</span>
        <span>print</span><span>(</span><span>"Probability = "</span> <span>+</span> <span>str</span><span>(</span><span>probability</span><span>))</span>
        <span>print</span><span>(</span><span>"Prediction = "</span> <span>+</span> <span>prediction</span><span>)</span>

<span># Load the trained model</span>
<span>loaded_classifier</span> <span>=</span> <span>load_model</span><span>(</span><span>'trained_model.h5'</span><span>)</span>

<span># Example usage</span>
<span>dog_image</span> <span>=</span> <span>"dog.jpg"</span>
<span>predict_image</span><span>(</span><span>dog_image</span><span>,</span> <span>loaded_classifier</span><span>)</span>

<span>cat_image</span> <span>=</span> <span>"cat.jpg"</span>
<span>predict_image</span><span>(</span><span>cat_image</span><span>,</span> <span>loaded_classifier</span><span>)</span>
</pre></div>

<p>Let's see the output
<img alt="Alt text" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/d546542af4055bc7163bc49055d5a623a44ad0cc3022d02d0aaa791b9a83d75b.png"></p>

<p>Here's the <a href="https://github.com/RijulTP/GPUToolkit/tree/main/neural-network?ref=journal.hexmos.com">full code</a> for your reference</p>

<h3 id="conclusion">Conclusion</h3>

<p>In the upcoming AI age, GPUs are not a thing to be ignored, We should be more aware of its capabilities.</p>

<p>As we transition from traditional <strong>sequential algorithms</strong> to increasingly prevalent <strong>parallelized algorithms</strong>, GPUs emerge as indispensable tools that empower the acceleration of complex computations. The parallel processing prowess of GPUs is particularly advantageous in handling the massive datasets and intricate neural network architectures inherent to artificial intelligence and machine learning tasks.</p>

<p>Furthermore, the role of GPUs extends beyond traditional machine learning domains, finding applications in scientific research, simulations, and data-intensive tasks. The parallel processing capabilities of GPUs have proven instrumental in addressing challenges across diverse fields, ranging from drug discovery and climate modelling to financial simulations.</p>

<h3 id="reference">Reference</h3>

<ul>
<li><a href="https://noahgift.github.io/cloud-data-analysis-at-scale/topics/end-of-moores-law.html?ref=journal.hexmos.com">Using Numba for mandelbrot generation</a></li>
<li><a href="https://www.analyticsvidhya.com/blog/2021/06/beginner-friendly-project-cat-and-dog-classification-using-cnn/?ref=journal.hexmos.com">Using Convolutional Neural Networks</a></li>
</ul>

<p><a href="https://twitter.com/HexmosTech?ref=journal.hexmos.com"><img alt="Twitter" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/e706462dc4b473f96955889657e3893beca1e6cba15daa89dca171d732709b87.png"></a></p>

<p><a href="https://hexmos.com/?ref=journal.hexmos.com"><img alt="Hexmos" src="https://journal-wa6509js.s3.ap-south-1.amazonaws.com/62b98356b4386f9c312f586af9c3606f9bd67f7116b4031c1bf2f5fb0fc73e0a.png"></a></p>

<p><a href="https://news.ycombinator.com/item?id=38240421&amp;ref=journal.hexmos.com">Hackernews post</a></p>

<p><a href="https://www.linkedin.com/feed/update/urn:li:activity:7129475708971618305?ref=journal.hexmos.com">Linkedin post</a></p><!--kg-card-end: html-->
    </section>


        
</article>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[GitHub Actions Are a Problem (107 pts)]]></title>
            <link>https://felix-knorr.net/posts/2023-11-11-github-actions.html</link>
            <guid>38240278</guid>
            <pubDate>Sun, 12 Nov 2023 14:22:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://felix-knorr.net/posts/2023-11-11-github-actions.html">https://felix-knorr.net/posts/2023-11-11-github-actions.html</a>, See on <a href="https://news.ycombinator.com/item?id=38240278">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><h2>The Problem</h2>
<p>You push (or better, merge) to master, and the deployment happens automagically. No
further work required. That's the promise of GitHub-Actions (GHA), and probably
every other CI service provider.</p>
<p>However, things are not as shiny as they seem at first glance. There are many
problems with the approach that GHA and co. use. Some are addressable by more
disciplined usage behavior<sup id="fnref:1"><a href="#fn:1">1</a></sup>, but others are not.</p>
<!--more-->

<p>My first and foremost problem with them is: you cannot run them locally. There
are some projects, that attempt to enable you to do that, e.g. 
<a href="https://github.com/nektos/act">act</a>, but they are very limited. And that is because
of my second-biggest issue with GHA: the runner is closed source.</p>
<p>Hosting a git repo is hardly more than providing a file system and SSH access.
The actual mechanism they use to keep you on their platform is the CI-pipelines
(and maybe the issue system and wiki, but less so). Half a year ago, I started
porting my teams Azure-Devops pipelines to GHA, investing ~1 day per week. AND I
AM STILL NOT DONE.</p>
<p>The fact that you have to push a commit to the repo to test a change, and then 
wait for a runner delays everything indefinitely, and makes iterating really
painful.</p>
<p>Additionally, writing pipelines in YAML is just painful. It's super verbose,
and you have a lot of "code" duplication. Quite soon in the process I invested
3 days to write a small DSL that compiles to GHA<sup id="fnref:2"><a href="#fn:2">2</a></sup>. This already took care
of the code duplication, and I integrated <a href="https://github.com/rhysd/actionlint">actionlint</a> to reduce the number of pushes I'd need. Sadly, actionlint
catches a similar percentage of your bugs like a C-compiler (which is not very
high). Originally, that DSL hat two backends: One to compile to GHA, and one
to run stuff locally. The second one is not in use anymore. Why? Because there
are tons of actions<sup id="fnref:3"><a href="#fn:3">3</a></sup> that you want to use, e.g. for terraform. To use those
locally, I'd have to reimplement the complete GHA runner, or at least, locally
reimplement all the actions I want to use.</p>
<p>Many of those actions are written by 3rd parties, not by GitHub/Microsoft,
but it benefits them a lot by strengthening their position against their
competition. It's a network effect. And it's bad for everyone except MS. I'm
only somewhat knowledgeable in Azure-Devops and GitHub actions (much to my own
dismay), but I assume that more or less every CI provider does its own thing,
and there is a lot of duplicated efforts. </p>
<h2>An attempt at a solution</h2>
<p>The base idea is the same for every CI provider: You define a "workflow" that
runs some scripts. Some of which run in parallel, some of which require others
to finish first. They need access to a git repository, and they might have
to interact with it. Defining a language to run scripts in parallel with some
constraints is actually quite easy if you just pass the script to an existing
interpreter and let the language mainly deal with the constraints around order
and parallelism (and code reuse). However, if this is then just a new solution,
little is gained. So it would be necessary to have different "generators" that
generate small wrappers for your CI-provider of choice that call the actual
definitions, and maybe to call a subset of functionality that is shared by
more or less everyone (e.g. creating issues, merging a branch, etc.). If people
who currently write "plugins" for different CI providers instead focus on this
hypothetical language, we would end up with an ecosystem of CI tools that can run
everywhere, including your PC. I'm thinking of something like this:</p>
<p><img alt="Graph of the hypothetical System" src="https://felix-knorr.net/assets/img/common_action_runtime.svg"></p>
<p>And yes, I'm aware of <a href="https://xkcd.com/927/">XKCD #927</a>, but It's actually not the same
as a CI-Provider, and I'm not aware of a similar project. Corrections are welcome.
And while I'd love to work on this, I don't see myself having enough free time in the
foreseeable future to do this. So I hope, someone feels inspired.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Casino-like apps have drained people of millions (147 pts)]]></title>
            <link>https://www.nbcnews.com/tech/tech-news/addicted-losing-how-casino-apps-have-drained-people-millions-n1239604</link>
            <guid>38240212</guid>
            <pubDate>Sun, 12 Nov 2023 14:13:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nbcnews.com/tech/tech-news/addicted-losing-how-casino-apps-have-drained-people-millions-n1239604">https://www.nbcnews.com/tech/tech-news/addicted-losing-how-casino-apps-have-drained-people-millions-n1239604</a>, See on <a href="https://news.ycombinator.com/item?id=38240212">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Shellz, 37, a nurse from Houston, spends at least two hours a day with her husband playing a casino-style smartphone game called Jackpot Magic.</p><p>The app offers a variety of typical casino games to play, including their favorite, called Reel Rivals, a game in which players accrue points by playing a virtual slot machine. As in a real casino, players exchange money for coins to bet.</p><p>Unlike in a real casino, there is no way to win money back or earn a payout on coins.</p><p>But that has not stopped Shellz and her husband from spending about $150,000 in the game in just two years. She asked to use her in-game username so her family does not find out how much money they have spent on the game.</p><p>"We lie in bed next to each other, we have two tablets, two phones and a computer and all these apps spinning Reel Rivals at the same time," she said. "We normalize it with each other."</p><p>Jackpot Magic is an app made by Big Fish Games of Seattle, one of the leaders in an industry of "free-to-play" social games into which some people have plowed thousands of dollars. Big Fish Games also operates a similar app, Big Fish Casino. Both are labeled as video games, which allows the company and others like it to skirt the tightly regulated U.S. gambling market.</p><p>But unlike the gambling market, apps like Jackpot Magic and Big Fish Casino are under little oversight to determine whether they are fair or whether their business practices are predatory.</p><p>NBC News spoke to 21 people, including Shellz and her husband, who said they were hooked on the casino-style games and had spent significant sums of money. They described feelings of helplessness and wanting to quit but found themselves addicted to the games and tempted by the company's aggressive marketing tactics.</p><p>Most of the 21 players wished to remain anonymous, as they were ashamed of their addictions and did not want their loved ones to find out about their behavior.</p><p>A 42-year-old Pennsylvania woman said she felt saddened that she spent $40,000 on Big Fish Casino while working as an addiction counselor.</p><p>"The whole time I was working as an addiction counselor, I was addicted to gambling and with no hope of winning any money back," she said.</p><p>Big Fish Games did not make anyone available for an interview, nor did the company respond to detailed questions. The company has said in previous <a href="https://www.documentcloud.org/documents/6878099-206-2.html#document/p4/a561949">court filings</a> that only a fraction of the game's players actually spend money.</p><p>In a response to NBC News' inquiries, the company issued a <a href="https://www.documentcloud.org/documents/6896112-BF.html">statement</a> saying its games are not gambling and should not be regulated as such.</p><p>"These games are not gambling because, among other reasons, they offer no opportunity for players to win money or anything of value," the statement said in part.</p><p>"Our games are offered for free purely for entertainment, with an opportunity for customers to spend money within the game to enhance their gameplay experience," it said. "The vast majority of Big Fish Casino and Jackpot Magic Slots customers play without ever paying any money. No court has yet considered all of the facts relating to how these games operate."</p><p>Players have had some recourse in recent months thanks to successful lawsuits.</p><p>After a long legal battle, 2 million players, including Shellz and her husband, will be eligible to get a small part of their losses back — about 20 percent for those who lost $10,000 to $100,000.</p><p>The money will come in a $155 million class-action settlement, announced at the end of July, that will cover two major lawsuits filed against Big Fish Games; its former owner, Churchill Downs; and its current Australian parent company, Aristocrat Leisure, alleging that they were operating "unlawful gambling devices."</p><p>The preliminary agreement was recently approved by a federal judge in Tacoma, Washington. Churchill Downs and Aristocrat Leisure both declined to comment on the settlement. Aristocrat Leisure released a public <a href="https://www.documentcloud.org/documents/7205179-21354134-b761-4dd7-a3a2-266d8a52056c-1.html">statement</a> in May outlining the general contours of the settlement, but it has not said anything further.</p><p><em><strong><a href="https://smart.link/5d5ad16083f88" target="_blank">Download the NBC News app for breaking news and politics</a></strong></em></p><p>While Big Fish Games admits no wrongdoing, it has <a href="https://www.documentcloud.org/documents/7006464-171.html#document/p8/a573737">agreed</a> to implement "addiction-related resources" and a "self-exclusion policy" that would allow players who feel out of control to opt in to be blacklisted from playing the game.</p><p>Big Fish Games also declined to comment on the settlement.</p><p>While some players are happy to recoup some of their losses, gambling addiction experts and some lawmakers say it does not go far enough to help those whose lives have spiraled out of control after they got hooked on social casino games. They call for further regulation of the industry.</p><p>"What we would have welcomed as part of this settlement as a wake-up call for the industry is a change in practices," said Keith Whyte, the executive director of the <a href="https://www.ncpgambling.org/">National Council on Problem Gambling</a>.</p><p>"I think their model is so lucrative and in some ways so aggressive that they're doubling down, and it's going to do a lot more harm. I think it's going to eventually be reined in, but it appears they are prioritizing short-term profit over long-term sustainability and responsibility," Whyte said.</p><h2><strong>The game</strong></h2><p>Joann, 46, who lives in southwest Florida, said she began playing Big Fish Casino about eight years ago.</p><p>She estimates that she has spent $100,000 on the game.</p><p>"You know what I tell people? It's a cult, and they suck you in, and once you're in you can't get out," said Joann, who asked to use only her middle name. "You want to play, and you want to spin."</p><p>One of the named plaintiffs in the settlement is Crystal Fair of Texas, who said in a sworn declaration that she has <a href="https://www.documentcloud.org/documents/6782706-128-8.html#document/p3/a551787">spent $500,000</a> and described herself as being "addicted" to Big Fish Casino, playing it sometimes "nearly 24 hours a day."</p><p>"I have considered walking away for good but then I think of all my time and more importantly all my money and it's hard to walk away," she wrote. "That's how I know I'm addicted."</p><p>She concluded: "But if I could go back to the point in time when I installed Big Fish Casino, I'd never ever have done it."</p><p>Several people said they felt the apps were engineered to keep them spending money in a variety of ways, including tiered clubs for players who spend significant amounts of money and free chips for people who try to quit.</p><p>Suzie Kelly of Dallas previously told <a href="https://www.revealnews.org/episodes/harpooned-by-facebook/">Reveal News</a> how she spent about $400,000 on the game. She took out a home equity loan and used the money she inherited when her mother died to fund her habit.</p><p>When she tried to cancel her account on several occasions, Kelly said, a "VIP representative" would call her and offer her free chips so she would continue playing.</p><p>The Big Fish apps in some ways are similar to many other apps that offer casino games that can be played on smartphones.</p><p>The home screen of Big Fish Casino, known as the "lobby," offers players a chance to try various types of casino-style games, including roulette, blackjack, Texas Hold 'em, Video Poker and the most prominently featured game: slots.</p><p>Shortly after they install the app, players are encouraged to join clubs — Big Fish Casino even offers a "one time join bonus" of 50,000 chips for joining a club. Once they are in a club, players can use a chat feature to strike up conversations with their counterparts and develop friendships. While anyone can create a club, the real action is in the invitation-only ranked clubs that compete against one another.</p><p>Winning more chips and playing at higher stakes unlock new features, like high-roller rooms. There is also a <a href="https://www.bigfishgames.com/game/jackpotmagicslots/help/articles/115000134954-What-is-the-VIP-Rewards-Program-/">system</a> of "levels" and "tiers" to unlock as players spend and win more. Higher tiers come with larger potential winnings and bigger bets, which makes it easier to lose chips faster.</p><p>Players who lose but want to continue playing in high-roller rooms can do so by either rebuilding their digital fortunes through hours of gameplay or taking a shorter route: buying more chips.</p><p>Most people who play the Big Fish games do not end up spending real money. Less than 10 percent of users have ever bought virtual items while playing the games, <a href="https://www.documentcloud.org/documents/6878099-206-2.html#document/p4/a561949">according to an October court filing</a>.</p><p>But that 10 percent has translated into a lucrative business. According to data provided by Apptopia, an app analytics company, Big Fish Games took in an estimated $139.3 million from Big Fish Casino and Jackpot Magic players from February 2019 through July 2020.</p><p>The app's tier system, along with its social functions, can be a powerful trap for some players. Joann said she continues to play, as Big Fish Casino grants her a set of free chips (known as a "boost") every day. Even so, she said, she spends at least $600 a month, largely to maintain her status within her club.</p><p>"I want to quit the club, and I want to stop, but I have friends," she said.</p><h2>No recourse</h2><p>Big Fish Games is one of the clearest examples of the <a href="https://arstechnica.com/gaming/2018/09/multinational-regulators-join-together-to-fight-gambling-in-video-games/">convergence</a> of the small-time harmless fun of video games and the rapidly expanding world of real-money gambling.</p><p>While many video games have added premium features in recent years, including <a href="https://www.nbcnews.com/tech/tech-news/loot-boxes-gambling-video-games-ftc-look-it-n941256">loot boxes</a> — a mechanism to pay small, fixed fees for chances to win in-game prizes that has attracted the ire of <a href="https://www.nbcnews.com/tech/video-games/video-game-loot-boxes-face-final-boss-missouri-senator-n1003471">some lawmakers</a> — no other type of game appears to allow players to lose so much credit so quickly and be constantly encouraged to spend more.</p><p>But for the time being, there does not seem to be anything stopping these gambling-style smartphone games from continuing. No federal legislation would halt this model, nor would any state-level legislation mitigate losses created by this type of game. Washington state legislators considered a bill that would have formally defined games like Big Fish Casino to not be considered gambling, but the bill did not pass.</p><p>Some players of Big Fish games have filed class-action lawsuits against the company, arguing that its games should be regulated just like traditional gambling, which is unlikely to happen any time soon.</p><p>Conventional slot machines, for example, are subject to rigorous outside testing to ensure that the odds are consistent for all players. In Nevada, there are rules about how many slot machines can be <a href="https://www.documentcloud.org/documents/6922257-All-Regulations-as-of-01-30-20.html#document/p46/a565021">placed in liquor stores</a>, among hundreds of pages of regulations.</p><p>In Washington state — where Big Fish Games is located — slot machines are <a href="https://www.wsgc.wa.gov/regulation-enforcement/illegal-activities">banned</a> outright. But Washingtonians can download a smartphone game that offers would-be gamblers the chance to spend money on an experience nearly identical to that of an in-person slot machine, only without any chance of actually winning money.</p><p>Still, the recent legal victories are a welcome bit of help for some players, particularly because many have lost their jobs because of the COVID-19 pandemic.</p><p>Neva Barker, 58, a retiree in Portland, Oregon, estimated that she had spent $80,000 on Big Fish Casino and said she was thrilled to hear that she likely would get some of her money back.</p><p>It is particularly needed now, because, Barker says, she lost some of her income to coronavirus-related cutbacks.</p><p>"This has been going through so many ups and downs," she said. "I thought it was a myth that it was ever going to happen. That would be life-changing for me at this point."</p></div><div data-activity-map="expanded-byline-article-bottom"><div data-testid="byline-thumbnail"><a href="https://www.nbcnews.com/author/cyrus-farivar-ncpn973741"><picture data-testid="picture"><source srcset="https://media-cldnry.s-nbcnews.com/image/upload/t_focal-60x60,f_auto,q_auto:eco,dpr_2.0/newscms/2019_11/2784541/cyrus-farivar-1500.jpg 2x, https://media-cldnry.s-nbcnews.com/image/upload/t_focal-60x60,f_auto,q_auto:best/newscms/2019_11/2784541/cyrus-farivar-1500.jpg 1x"><img loading="lazy" src="https://media-cldnry.s-nbcnews.com/image/upload/t_focal-60x60,f_auto,q_auto:best/newscms/2019_11/2784541/cyrus-farivar-1500.jpg" alt="" height="48" width="48"></picture></a></div><p><span data-testid="byline-name"><a href="https://www.nbcnews.com/author/cyrus-farivar-ncpn973741">Cyrus Farivar</a></span><span><a href="https://twitter.com/cfarivar" target="_blank" rel="noopener noreferrer"><span></span></a><a href="mailto:cyrus.farivar@nbcuni.com" target="_blank" rel="noopener noreferrer"><span></span></a></span></p><p>Cyrus Farivar is a reporter on the tech investigations unit of NBC News in San Francisco.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Stanford Data Science Handbook (120 pts)]]></title>
            <link>https://datascience.stanford.edu/programs/stanford-data-science-scholars-program/data-science-handbook</link>
            <guid>38239728</guid>
            <pubDate>Sun, 12 Nov 2023 13:04:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://datascience.stanford.edu/programs/stanford-data-science-scholars-program/data-science-handbook">https://datascience.stanford.edu/programs/stanford-data-science-scholars-program/data-science-handbook</a>, See on <a href="https://news.ycombinator.com/item?id=38239728">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="page-content">

      <div>
            
  <h2 id="menu-blockmain-menu">Main navigation</h2>
  

        
<p><a href="#main-content">Skip to main content</a></p>

  </div>
  
      <div><h2>Open, rigorous and reproducible research: A practitioner’s handbook</h2>

</div>
  
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[You Paid $1k for an iPhone, but Apple Still Controls It (128 pts)]]></title>
            <link>https://www.nytimes.com/2023/11/12/technology/iphone-repair-apple-control.html</link>
            <guid>38239640</guid>
            <pubDate>Sun, 12 Nov 2023 12:45:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nytimes.com/2023/11/12/technology/iphone-repair-apple-control.html">https://www.nytimes.com/2023/11/12/technology/iphone-repair-apple-control.html</a>, See on <a href="https://news.ycombinator.com/item?id=38239640">Hacker News</a></p>
Couldn't get https://www.nytimes.com/2023/11/12/technology/iphone-repair-apple-control.html: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Speaker Support in Asahi Linux (114 pts)]]></title>
            <link>https://github.com/AsahiLinux/docs/wiki/SW:Speakers</link>
            <guid>38239503</guid>
            <pubDate>Sun, 12 Nov 2023 12:20:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/AsahiLinux/docs/wiki/SW:Speakers">https://github.com/AsahiLinux/docs/wiki/SW:Speakers</a>, See on <a href="https://news.ycombinator.com/item?id=38239503">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                <h2 id="user-content-speaker-support-in-asahi-linux"><a href="#speaker-support-in-asahi-linux">Speaker support in Asahi Linux</a></h2>
<p>We are progressively enabling speaker support on Asahi Fedora Remix.</p>
<p>Currently supported models:</p>
<ul>
<li>M1 MacBook Air 13" (J313)</li>
</ul>
<p>Proper speaker support has been a multi-year development effort involving many people across all parts of the Linux audio stack. We want to offer the best speaker support of any Linux laptop platform, and that has meant driving Linux desktop audio forward a couple decades so that we can do what is expected of a modern laptop audio subsystem!</p>
<h2 id="user-content-current-state"><a href="#current-state">Current state</a></h2>
<p>We are ready to begin releasing preliminary speaker support to users. Keep in mind that as Asahi Linux is the first desktop Linux platform with integrated advanced speaker DSP, there will likely be bugs. In addition, the DSP profiles will be improved and adjusted over time, and do not represent the absolute best possible results.</p>
<p>Speaker DSP is currently only supported on Fedora Asahi Remix (things are moving fast), however alternative distros should be able to integrate this work relatively painlessly once things settle down (see the section below).</p>
<h2 id="user-content-known-limitations"><a href="#known-limitations">Known limitations</a></h2>
<p>The DSP processing uses too much power, due to limitations of the default scheduler. Uclamp support will be enabled with an upcoming PipeWire release, and it should greatly reduce the power consumption of the DSP processing, even doubling battery life while playing audio in some cases.</p>
<h2 id="user-content-known-bugs"><a href="#known-bugs">Known bugs</a></h2>
<ul>
<li>In KDE Plasma, if you toggle mute using the keyboard hotkey while the master volume is set at anything other than 100%, on unmute the speaker volume will be too low. Touching the volume control (or pressing a volume hotkey) will restore the intended volume.</li>
<li>The DSP chain introduces excessive delay, and trailing audio is "buffered" (if you stop playing something and start something else, you get a bit of the end of the first when the second starts).</li>
<li>There is no final limiter/compressor in the current DSP chains (although there is an input compressor), so inputs with content in high-gain regions of the EQ curve might cause distortion or clipping (and speakersafetyd limiting). This is most prominent in the 200Hz region right now. This should not cause damage, but we recommed lowering the volume if you notice the sound is noticeably distorted.</li>
<li>The 13" MacBook Air EQ curve might be a bit harsh on the treble; pending re-calibration with an individually calibrated microphone to confirm/fix.</li>
<li>Bankstown (the "fake bass" plugin) uses a relatively naïve algorithm right now, which doesn't work well for all music.</li>
</ul>
<h2 id="user-content-project-goals"><a href="#project-goals">Project goals</a></h2>
<p>Our DSP profiles aim to provide a balanced sound, with the features that people expect from high-quality laptop/small-speaker audio. In particular, we aim for:</p>
<ul>
<li>A balanced (neutral) tone at moderate listening volumes, with a mostly flat frequency response from a typical listening position</li>
<li>Reasonably high peak volume with acceptable sound degradation (compression, limiting, etc.)</li>
<li>
<a href="https://en.wikipedia.org/wiki/Missing_fundamental#Audio_processing_applications" rel="nofollow">"Fake bass" processing</a> to make audible frequencies that cannot be physically reproduced by the speakers, extending the perceived frequency response of the system.</li>
<li>
<a href="https://en.wikipedia.org/wiki/Equal-loudness_contour" rel="nofollow">Equal-loudness volume compensation</a>, so that the sound does not become noticeably tinny as the system master volume is lowered.</li>
</ul>
<p>These are all techniques that are in wide use in consumer microspeaker systems in tablets and phones, though sadly not common on laptops from most non-Apple brands. All of these processing tricks are also used by macOS.</p>
<p>Our goal is explicitly <em>not</em> to clone the full/exact macOS audio experience. We consider the macOS speaker DSP processing to be too tryhard; some of the things it does work well, some do not (or are outright buggy!), and some are just strange. Although audio is ultimately subjective, and we recognize that some people might prefer the "macOS sound", we aim for a more objectively neutral and balanced sound than macOS as a baseline. Users are encouraged to try adding their own effects (e.g. with EasyEffects) if they want to customize their experience and achieve certain sonic profiles. We believe that a balanced baseline that allows users to shape the sound to their own preference if they so desire is a better option than hard-coding specific effects (such as macOS' spatial audio processing) with no option to turn them off. There is no user-friendly (GUI) way to modify or tweak our DSP chains, so it's best if additional effects are left to existing utilities like EasyEffects that can be easily customized by the user.</p>
<p>That said, for the types of processing we <em>do</em> intend to apply, failing to work properly where macOS does (e.g. objectively bad audio quality for certain kinds of inputs in particular, such as bad-sounding compression or distortion at high volumes where macOS sounds better at an equal output volume) is considered a bug. Feel free to file issues if you find test cases where macOS does a clearly better job. We're particularly talking about program-dependent problems here, not "I like the macOS EQ/spatial/whatever stuff better in general".</p>
<h2 id="user-content-smart-amp--safety-support"><a href="#smart-amp--safety-support">"Smart Amp" / safety support</a></h2>
<p>In addition to the DSP processing, we also have the world's first (as far as we know) open source "smart amp" implementation. This allows the speakers to be driven to much higher peak levels than the worst-case safe volume level, greatly extending their dynamic range. Our implementation, <a href="https://github.com/AsahiLinux/speakersafetyd">speakersafetyd</a>, monitors feedback signals from the amplifiers, estimates speaker voice coil temperature using a two-stage thermal model, and reduces the hardware speaker volumes when the speakers get too warm. We also have kernel-side interlocks to disable or limit speaker volumes if speakersafetyd is not running or non-responsive.</p>
<p>Right now, we are shipping with a hard volume reduction limit of -7dBFS to catch potential bugs or misbehavior. If you notice that your speakers cut off for approximately one second and then come back at a reduced volume level, it is likely that you triggered this safety limit. Stop playback to let the speakers cool down (just in case) and let the limit re-arm, and then check <code>/var/lib/speakersafetyd/blackbox</code> for any blackbox dumps and <a href="">file a bug</a> attaching them together with any speakersafetyd logs (try <code>journalctl -S '10m ago' -u speakersafetyd</code>). If you play full-scale test tones or "extreme" music at maximum volume, it is expected that you will hit this limit and trigger a blackbox dump / panic. This is intended to help catch any badness while playing normal music, and we will remove this conservative limit once we are confident in the software stack (speakersafetyd has other safety limits built in and will gain more over time).</p>
<p>You can watch speakersafetyd in action by using <code>sudo journalctl -fu speakersafetyd</code>. As a rule of thumb, with the speaker volume at max, you should expect speakersafetyd not to kick in when playing loudness-normalized music (e.g. YouTube). Playing overly loud music without normalization (e.g. increasing the browser app volume to 100% in the Plasma applet while using YouTube, which bypasses the normalization limit it applies, or using media players without normalization) is likely to trigger some gain reduction from speakersafetyd, but it should not hit the -7 dB panic limit unless it's something <a href="https://open.spotify.com/album/6uvGw7zcCyMzYKKqXp9D3z" rel="nofollow">ridiculous</a>.</p>
<p><strong>WARNING:</strong> Speaker safety models have yet to be fully validated on all models. We are enabling audio only on models where we are confident things are ready and safe to use. If you use any undocumented overrides to force-enable speakers on any other machine models, <strong>you are entirely on your own</strong> and may very well blow up your speakers.</p>
<h2 id="user-content-distro-integration-notes"><a href="#distro-integration-notes">Distro integration notes</a></h2>
<p>You need:</p>
<ul>
<li>The latest Asahi kernel (tag asahi-6.5-25 or later)</li>
<li><a href="https://github.com/AsahiLinux/alsa-ucm-conf-asahi">alsa-ucm-conf-asahi</a></li>
<li><a href="https://github.com/asahilinux/asahi-audio">asahi-audio</a></li>
<li><a href="https://github.com/asahilinux/speakersafetyd">speakersafetyd</a></li>
<li><a href="https://github.com/chadmed/bankstown/">bankstown</a></li>
<li>
<a href="https://lsp-plug.in/" rel="nofollow">LSP plug-ins</a> (LV2 version)</li>
<li>PipeWire 0.3.84. Depending on your packaging rules, you might need your package to create a few empty directories (see <a href="https://src.fedoraproject.org/rpms/pipewire/commits/rawhide" rel="nofollow">here</a>) so <code>asahi-audio</code> can put files there.</li>
<li>PipeWire <code>module-filter-chain-lv2</code> (this may be a separate package or flags depending on distro)</li>
<li>WirePlumber 0.4.15 with an <a href="https://gitlab.freedesktop.org/pipewire/wireplumber/-/merge_requests/558" rel="nofollow">unreleased patch</a>. Please do not enable speakers without that patch, as it'll leave the raw speaker device visible which is confusing and could trigger bugs elsewhere. Either get your WirePlumber package to add the patch, or wait for the next release.</li>
</ul>
<p>The correct deployment order is asahi-audio/speakersafetyd &gt; (whatever you use to get those installed for users, e.g. metapackage) &gt; kernel. If you push the kernel first before asahi-audio, users will get either a nonfunctional (if no speakersafetyd) or functional but bad-sounding (if speakersafetyd is installed) raw speaker device with no DSP.</p>

              </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[RIP Google Groups Dejanews.com Archive (103 pts)]]></title>
            <link>http://dejanews.com/</link>
            <guid>38238796</guid>
            <pubDate>Sun, 12 Nov 2023 09:43:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="http://dejanews.com/">http://dejanews.com/</a>, See on <a href="https://news.ycombinator.com/item?id=38238796">Hacker News</a></p>
Couldn't get http://dejanews.com/: Error: Request failed with status code 404]]></description>
        </item>
        <item>
            <title><![CDATA[Map of Space Invader Mosaics in Paris (173 pts)]]></title>
            <link>https://pnote.eu/projects/invaders/map.html</link>
            <guid>38238658</guid>
            <pubDate>Sun, 12 Nov 2023 09:11:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pnote.eu/projects/invaders/map.html">https://pnote.eu/projects/invaders/map.html</a>, See on <a href="https://news.ycombinator.com/item?id=38238658">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
     <p><a href="https://pnote.eu/projects/invaders/">What is this?</a> | 
     <a href="https://newsletter.pnote.eu/">Newsletter</a> 

      </p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Win-Vind: Vim powers with speed of thought throughout Windows 11 (194 pts)]]></title>
            <link>https://pit-ray.github.io/win-vind/</link>
            <guid>38236684</guid>
            <pubDate>Sun, 12 Nov 2023 02:32:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pit-ray.github.io/win-vind/">https://pit-ray.github.io/win-vind/</a>, See on <a href="https://news.ycombinator.com/item?id=38236684">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <main>
        















    <h2 id="what-is-this">What is this?</h2>
<p><strong>win-vind</strong> provides a lightweight hybrid UI system of CUI and GUI for Windows.<br>
By installing this tool, you will be able to control the Windows GUI in the same way as Vim.</p>

<h3 id="1-vim-user-friendly">1. Vim-user friendly.</h3>
<p>All configuration methods and mode concepts are derived from Vim, allowing for Vim-like UI operation.<br>
Vim users only need to understand win-vind’s macro features and additional mode concepts with little learning cost.</p>

<h3 id="2-there-are-many-useful-built-in-commands">2. There are many useful built-in commands.</h3>
<p>You don’t have to worry about complicated scripts and dependencies like with traditional key binding tools.<br>
You can freely create user-defined commands by combining low-level optimized built-in commands.</p>

<h3 id="3-very-portable-and-fully-open-source">3. Very portable and fully open source.</h3>
<p>win-vind is a small single binary with no dependencies that runs with user permissions. <br>
It is also available from the command line as a command for UI operations like <code>$ win-vind -c "ggyyGp"</code>.</p>

<h3 id="top-feature-demo">Top Feature Demo</h3>

<video src="https://user-images.githubusercontent.com/42631247/215270933-3365065b-53db-4eca-9fc6-cd03d13e5ab0.mp4" controls=""></video>

<h3 id="configuration-file-example">Configuration File Example</h3>

<p>You can configure it in .vimrc style. What you can do in .vindrc is switch options, set parameters, remap low-level keys, and define function bindings.</p>

<div><pre><code><span>" options</span>
<span>set</span> <span>shell</span> <span>=</span> cmd
<span>set</span> cmd_fontsize <span>=</span> <span>14</span>
<span>set</span> cmd_fontname <span>=</span> Consolas
<span>set</span> blockstylecaret
<span>set</span> blockstylecaret_mode <span>=</span> solid

<span>" bindings</span>
imap <span>&lt;</span>capslock<span>&gt;</span> <span>{&lt;</span>ctrl<span>&gt;}</span>

inoremap <span>&lt;</span>ralt<span>&gt;&lt;</span>ralt<span>&gt;</span> <span>&lt;</span>easyclick<span>&gt;&lt;</span>click_left<span>&gt;</span>
inoremap <span>&lt;</span>rctrl<span>&gt;&lt;</span>rctrl<span>&gt;</span> <span>&lt;</span>gridmove<span>&gt;&lt;</span>click_left<span>&gt;</span>
inoremap <span>&lt;</span><span>win</span><span>-</span>enter<span>&gt;</span> <span>&lt;</span>window_resizer<span>&gt;</span>

<span>noremap</span> <span>&lt;</span>ctrl<span>-1</span><span>&gt;</span> <span>:!</span> <span>gvim</span><span>&lt;</span><span>cr</span><span>&gt;</span>
<span>noremap</span> <span>&lt;</span>ctrl<span>-2</span><span>&gt;</span> <span>:</span><span>e</span> http<span>:</span><span>//</span>example<span>.</span><span>com</span><span>&lt;</span><span>cr</span><span>&gt;</span>

enoremap <span>t</span> ggyyGp

autocmd AppLeave * <span>&lt;</span>to_insert<span>&gt;</span>
autocmd AppEnter<span>,</span>EdiNormalEnter <span>vim</span><span>.</span>exe <span>&lt;</span>to_resident<span>&gt;</span>
</code></pre></div>

<h2 id="license">License</h2>
<p>This software is provided by <a href="https://github.com/pit-ray/win-vind/blob/master/LICENSE.txt">MIT License</a>.</p>





    </main>

    
    
    
    

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Rats have an imagination, new research suggests (102 pts)]]></title>
            <link>https://www.sciencedaily.com/releases/2023/11/231102162557.htm</link>
            <guid>38235745</guid>
            <pubDate>Sat, 11 Nov 2023 23:43:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.sciencedaily.com/releases/2023/11/231102162557.htm">https://www.sciencedaily.com/releases/2023/11/231102162557.htm</a>, See on <a href="https://news.ycombinator.com/item?id=38235745">Hacker News</a></p>
Couldn't get https://www.sciencedaily.com/releases/2023/11/231102162557.htm: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[It's OK if your code is just good enough (105 pts)]]></title>
            <link>https://shiftmag.dev/code-quality-good-enough-2034/</link>
            <guid>38234653</guid>
            <pubDate>Sat, 11 Nov 2023 21:20:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://shiftmag.dev/code-quality-good-enough-2034/">https://shiftmag.dev/code-quality-good-enough-2034/</a>, See on <a href="https://news.ycombinator.com/item?id=38234653">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p>
      Good enough code is a nice middle ground between implementing a feature fast and maintaining the code quality.    </p>
  </div><div>
          <figure><img fetchpriority="high" decoding="async" width="1200" height="630" src="https://shiftmag.dev/wp-content/uploads/2023/11/Code-quality.png?x35993" alt="" srcset="https://shiftmag.dev/wp-content/uploads/2023/11/Code-quality.png 1200w, https://shiftmag.dev/wp-content/uploads/2023/11/Code-quality-300x158.png 300w, https://shiftmag.dev/wp-content/uploads/2023/11/Code-quality-1024x538.png 1024w, https://shiftmag.dev/wp-content/uploads/2023/11/Code-quality-768x403.png 768w" sizes="(max-width: 1200px) 100vw, 1200px"></figure>


<p>I’ve heard a story about a student who had to write an essay to pass the exam. He had a three-month deadline. During those months he struggled a lot<strong> rewriting pages again and again</strong>. Every now and then the professor checked on him and he would always respond with “I’m not done yet, it’s simply not good enough”. </p>



<p>Finally, the professor suggested: “Write the essay as if it would be graded <em>good enough</em>“. As much as this approach was strange to him, he took the advice. Surprisingly, he <strong>finished the essay in a whip </strong>earning a <strong>higher grade than expected.</strong></p>



<p>Where I come from, <em>good enough</em> would be a “three”, simply an average grade on a 1 to 5 scale. Solid, acceptable, good.</p>



<h2><span id="the-five-shades-of-code-quality">The five shades of code quality</span></h2>



<p>We, as software developers, not only write essays but dissertations to bring our pile of zeros and ones to life. <strong>Most of us would want our code to be 5 out of 5.</strong> But is this something worth pursuing? Let’s explore five shades of code quality:</p>



<p>1 – Shit</p>



<p>2 – Proof of concept</p>



<p>3 – Good enough</p>



<p>4 – Very good&nbsp;</p>



<p>5 – Perfection</p>



<h2><span id="grade-1-shit">Grade 1: Shit</span></h2>



<p>This is the type of code that makes you sweat. Your heart sinks when you hear about a new requirement. You know it will take up ages to implement it. The best thing you can do is to throw everything away and rewrite it. Such code<strong> shouldn’t be acceptable</strong>, we shouldn’t ship shit.</p>



<h2><span id="grade-2-poc">Grade 2: PoC</span></h2>



<p>Typical PoC code. You know that this code is <strong>not good but you can live with it for a while</strong>.&nbsp;</p>



<p>Usual problems:</p>



<ul>
<li>doesn’t have clear architecture, clear boundaries</li>



<li>many things are tightly coupled</li>



<li>many edge cases are not covered</li>



<li>missing validations</li>



<li>inadequate domain object modeling</li>



<li>too complex or too tiny test suite</li>



<li>code is not clean</li>
</ul>



<p>While this may not sound ideal, it can serve to <strong>quickly determine the direction you want to go</strong>. You can move really fast and iterate as you go. This code quality is particularly suitable for PoC initiatives.</p>





<h2><span id="grade-3-good-enough">Grade 3: Good enough</span></h2>



<p>Good enough code is a nice middle ground between implementing a feature fast and maintaining the code quality.</p>



<p>It addresses many of the issues typically found in grade 2 code, with some exceptions:</p>



<ul>
<li>some unnecessary levels of abstraction</li>



<li>some unclear naming</li>



<li>few larger functions or classes (nothing too big)</li>



<li>misuse of exceptions here and there</li>



<li>some code duplications</li>



<li>redundant commenting</li>



<li>readability issues in tests</li>
</ul>



<p>This code is suited for most applications. It’s probably the best for those dealing with CRUD operations. You can also achieve good results using this approach on components involved in traffic flow.&nbsp;</p>



<h2><span id="grade-4-very-good">Grade 4: Very good</span></h2>



<div><p>Grade 4 is a <strong>highly maintainable clean code paradise</strong>. Doesn’t have any problems that <em>good enough</em> has. </p><p>Take a look at the&nbsp;<a href="https://github.com/infobip/infobip-spring-data-querydsl" target="_blank" rel="noreferrer noopener">infobip-spring-data-querydsl&nbsp;</a>library. <strong>Although it sounds perfect, it’s not.</strong> Everything is by the book, yet you may not like it, or dislike some parts of it. For example, you may find interfaces to be too generic, or you might be bothered with the usage of primitives instead of objects or something else. There will always be something to dislike and that is ok. :D.&nbsp;</p></div>



<p>The problem with this grade is that<strong> it is difficult to achieve.</strong> We have different backgrounds and views about how a really good code should look like.</p>



<p>I’ve worked with a freelancing company whose code was on this level. In order to achieve it, they enforced <strong>highly strict static code analysis</strong> and <strong>really challenging code reviews</strong>. Static code analysis was the cornerstone to stop most of the common problems from&nbsp;<em>good enough</em> entering the codebase. You can view them&nbsp;<a href="https://www.elegantobjects.org/" target="_blank" rel="noreferrer noopener">here</a>&nbsp;– under principles. Code review consisted of <strong>two reviewers</strong>, <strong>one developer and an architect, plus a QA </strong>person who would check the quality of the review.&nbsp;</p>



<p>If you want to tackle with grade 4 you need to <strong>build infrastructure for it</strong> and have everyone onboard with it. Aiming for <strong>this grade will slow you down</strong> so it should be taken into consideration when doing estimations with PD. Clear benefits will be seen in the long run.</p>



<p>This grade might be suited for building libraries that would be used by multiple projects/teams or when building critical parts of a system.</p>



<h2><span id="grade-5-perfection">Grade 5: Perfection</span></h2>



<p>Doesn’t exist.</p>



<h2><span id="good-enough-is-the-way-to-go">Good enough is the way to go</span></h2>



<p>Daily we are faced with different requirements, different deadlines, scopes, and so on. They are, of course, not always quick and simple to solve but most of the time,&nbsp;the <em>good enough</em>&nbsp;approach is the way to go. </p>



<p>To me, the code that has a clear architecture, understandable names of services, and good tests ticks all the boxes. And I like it! It doesn’t have to be a clean-code candy. If you prefer candies, then you have to convince PD and your team that this extra sugar will benefit the project.</p>



<p>What would you say, what would be your preferred coding approach?</p>
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[OCaml: a Rust developer's first impressions (165 pts)]]></title>
            <link>https://pthorpe92.github.io/ocaml/ocaml-first-thoughts/</link>
            <guid>38234580</guid>
            <pubDate>Sat, 11 Nov 2023 21:12:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pthorpe92.github.io/ocaml/ocaml-first-thoughts/">https://pthorpe92.github.io/ocaml/ocaml-first-thoughts/</a>, See on <a href="https://news.ycombinator.com/item?id=38234580">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main" role="main">
    
      
    
    <h3 id="ocaml-first-impressions">OCaml: First impressions</h3>

<h4 id="the-why">The Why</h4>

<p>I’m somewhat of a language nerd to begin with, and it was Rust that originally got me interested in the whole functional paradigm.
Not due to it’s lineage, but the heavy use of chained iterator methods in favor over traditional loops. This is one of the more intimidating hurdles
for newcomers to the language, but after getting used to it, rarely will you see anyone write a <code>for</code> loop again.</p>

<p><strong>Rant:</strong> The argument can be made that what I’m talking about is more similar to Javascript-land where a bunch of pseudo-functional methods and terminology are 
used, but it in reality is as far away from functional programming as <code>useState()</code> would imply it is. 
At least Rust has a few things to back it up, as at least a language that will support you should you desire to write pure functional code. I would argue that for beginners, Rust will simply force you to write functional, immutable code, whether they really understand it or otherwise, as the amount of <code>.clone()</code>‘ing required for a newcomer to compile a non-trivial program will practically almost guarantee that nothing was actually <code>&amp;mut</code>ated*.</p>

<p>So this got me interested in watching some <em>GOTO</em>, <em>strangeloop</em>, and other conference talks about functional programming, and upon discovering @artemslab
(definitely go check it out, awesome content) on YouTube and watching some in-depth videos about Ocaml and it’s runtime integer representations and memory
allocation, that really got me fascinated with the language.</p>

<p>In the past, I typically wouldn’t hesitate to <code>sudo pacman -Sy </code> whatever compiler or interpreter I needed, to get started playing around with a new language I was interested in. However since getting full-time employment, on top of the existing OSS stuff,
as well as doing contracted gigs for the facility I’m in, I haven’t had so much as a moment to spend on anything un-related to these things in quite some time.</p>

<p>Anyways, as usual I’m off track here. My point is that I <em>thought</em> I had a good introduction to the world of FP, and I <em>thought</em> since I’d heard that many of the
features and some of the syntax we love from Rust came directly from tha ‘Caml itself, I thought I would be love it and picking it up would be second nature.</p>

<p>My plan was to do the entire Advent of Code in Ocaml, and I was also going to pick an ambitious project that I would otherwise use Rust for, and force myself
to use Ocaml. I find this is the best way to learn a language, is just take on a project that is significantly more ambitious than your current skill level, and by thetime you finish it, you’ll have not only saved yourself a bunch of wasted time on tutorials, but you’ll have made something cool (hopefully).</p>

<h3 id="i-have-two-gripes-with-the-language-so-far">I have two gripes with the language (so far)..</h3>

<h3 id="where-are-the-types-">Where are the types? 👀</h3>

<p>I underestimated how much I would be thrown off by the fact that the types are <em>heavily</em> inferred, and are almost never explicitly declared, from what I can tell. I found that the combination of this and the strange syntax really screws me up, as now I am having problems inferring my <em>own</em> types at this point…</p>

<p>When dealing with lots of recursive functions, you find yourself looking up often at the function signature to view the parameters, but the concise syntax makes it difficult to mentally parse quickly.</p>

<p>Example, random code snippet from ocaml.org:</p>
<pre><code>  let group list sizes =
    let initial = List.map (fun size -&gt; size, []) sizes in

  let prepend p list =
    let emit l acc = l :: acc in
    let rec aux emit acc = function
      | [] -&gt; emit [] acc
      | (n, l) as h :: t -&gt;
         let acc = if n &gt; 0 then emit ((n - 1, p :: l) :: t) acc
                   else acc in
         aux (fun l acc -&gt; emit (h :: l) acc) acc t
    in
    aux emit [] list
  in
  let rec aux = function
    | [] -&gt; [initial]
    | h :: t -&gt; List.concat_map (prepend h) (aux t)
  in
  let all = aux list in
  let complete = List.filter (List.for_all (fun (x, _) -&gt; x = 0)) all in
    List.map (List.map snd) complete;;
val group : 'a list -&gt; int list -&gt; 'a list list list = &lt;fun&gt;
;;
</code></pre>
<p>Even when you learn what it actually going on here, and it makes immediate sense to you.. It must take a while before it becomes easier to read.</p>

<h3 id="remember-recursion-how-about-linked-lists">Remember recursion? How about linked lists?</h3>

<p>Two things every Computer science student learns, and then are immediately told to never use again*…</p>

<p>Anything that can be done recursively can be done iteratively (and most optimizing compilers will replace your recursion anyway), and linked lists are slow and inefficient with modern CPU caches, and you should almost never use them (and if you’re a web dev, well, you just wouldn’t anyway).</p>

<p>You could describe Ocaml as a language that relies <strong>heavily</strong> on <em>both</em> of these things. This feels even more strange that it might seem it would, and I have
found myself stumbling on absolutely remedial tasks.</p>

<p>Yes, there are libraries with other data structures, and there are in fact <code>for</code> loops (and even <code>while</code> loops), However I feel like I will end up learning more of the language and find that iterator methods will be used more so than any of these, much as in Rust.</p>

<h2 id="the-good">The Good:</h2>

<ul>
  <li>
    <p>Thought provoking. If you don’t believe there is anything to gain from being forced to think about something you do every day in a completely different way… well I’m surprised you made it this far into the post.</p>
  </li>
  <li>
    <p>Awesome mixture of !significant-whitespace and !brackets. And how cool is the comment syntax? (* doesn’t it just feel like.. middle-eastern-ish *);;</p>
  </li>
  <li>
    <p>Tooling: is way better than it has any right to be, considering the size of it’s user-base and community.</p>
  </li>
  <li>
    <p>Great conversation starter, really cool and helpful community.</p>
  </li>
</ul>

<p>Lots more to learn for sure but these were my initial thoughts anyway, I do really want to like it so we will see how much that helps. I just definitely did not get the head-start I was expecting, but I don’t think that’s a negative thing it just means there is more to learn.</p>

<p>*obviously I know this isn’t true and an extreme exaggeration, but I thought it was funny. There’s always someone who will ‘well ackshually’ you when 
you think it’s obvious.</p>


<ul>
  
  
    <li>
      <a href="#2023">
        <strong>2023</strong> <span>3</span>
      </a>
    </li>
  
</ul>




  <section id="2023">
    <h2>2023</h2>
    
    <a href="#page-title">Back to Top ↑</a>
  </section>


  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[CTF Writeup: Abusing select() to factor RSA (129 pts)]]></title>
            <link>https://threadreaderapp.com/thread/1723398619313603068.html</link>
            <guid>38233938</guid>
            <pubDate>Sat, 11 Nov 2023 19:59:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://threadreaderapp.com/thread/1723398619313603068.html">https://threadreaderapp.com/thread/1723398619313603068.html</a>, See on <a href="https://news.ycombinator.com/item?id=38233938">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-controller="mentions">

<div>
<p><a href="https://threadreaderapp.com/user/moyix"><img src="https://pbs.twimg.com/profile_images/851124181995589638/67s_2qnD_bigger.jpg" alt="Brendan Dolan-Gavitt Profile picture" data-controller="twitter-profile" data-twtrid="15194897" data-action="error->twitter-profile#error"></a>
</p>

</div> 
<p>
Will still try to do a blog post on my @CSAW_NYUTandon CTF challenge, NERV Center, but for now here's a thread explaining the key mechanics. I put a lot of work into the aesthetics, like this easter egg credit sequence (all ANSI colors+unicode text) that contains key hints: <span><video controls="" poster="https://pbs.twimg.com/ext_tw_video_thumb/1723398329193603073/pu/img/BOjilHxex46DHgNz.jpg"><source src="https://video.twimg.com/ext_tw_video/1723398329193603073/pu/vid/avc1/320x270/T7o7Rg69CJYAflcu.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723398329193603073/pu/vid/avc1/426x360/hDsE9J-Tm7U449X_.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723398329193603073/pu/vid/avc1/854x720/mTfO5bxXSMMK00GR.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723398329193603073/pu/pl/Dt3lV1ZNZ4_XzXfS.m3u8?tag=12&amp;container=fmp4" type="application/x-mpegURL"></video></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon (Note the karaoke subtitles timed to the credits at the bottom 😁)
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon First, the vulnerability. If you read the man page for select(), you'll see this warning: select() is limited to monitoring file descriptors numbered less than 1024. But modern systems can have many more open files, and importantly the kernel select() interface is NOT limited. <span><a href="https://pbs.twimg.com/media/F-q-tpjXwAAKWQk.jpg" target="_blank"><img alt="DESCRIPTION  WARNING: select() can monitor only file descriptors numbers  that  are  less than  FD_SETSIZE  (1024)—an  unreasonably low limit for many modern applications—and this limitation will not change.  All modern  applications  should instead use poll(2) or epoll(7), which do not suffer this limitation." src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-q-tpjXwAAKWQk.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon But IMO the man page understates the severity of the problem. So what happens if you *do* try to monitor fds higher than 1024? Well, the fd_set struct is just a bitset of 1024 bits (128 bytes). So attempting to monitor fds larger than 1024 will cause memory corruption!
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon And the really cool part (to me) is that a) the corruption is bitwise, since the data structure is a bitset, and b) the exact bits that will be written out of bounds depend on the *state* of the file descriptors being monitored.
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon So if the fds correspond to, say, network connections, an attacker can make a large number of connections, arrange for them to be in just the right state, and thereby get precise control over the bit pattern that gets written.
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon (Side note: I discovered this because very old versions of QEMU—including the one used by our PANDA 1.0-based malware sandbox—had this bug and guests could trigger it in the SLIRP user mode networking by making a large number of connections. Yikes! )<a data-preview="true" href="https://bugzilla.redhat.com/show_bug.cgi?id=892977">bugzilla.redhat.com/show_bug.cgi?i…</a>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon select() takes up to three bitsets: readfds, writefds, and exceptfds, so each is susceptible to this overflow. I decided to have the intended overflow occur on exceptfds.
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Why? Two reasons: 1) it's third in the argument list so it naturally would be the last one listed in, say, a struct; 2) the fd states can be controlled more easily—with TCP connections, exceptfds is used to indicate connections with pending TCP out-of-band (OOB) data.
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon So now the basic exploit strategy is clear: make more than 1024 connections to the server, an send TCP OOB data to the ones with fds higher than 1024 to set your desired bit pattern. But exactly what should get overwritten?
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon That's when this challenge moved from just Pwn to Pwn+Crypto :D I decided to place an RSA public key used for ssh-style challenge/response auth right after the exceptfds bitset, so you can control the upper 64 bits using the vuln. <span><a href="https://pbs.twimg.com/media/F-rD9ZUXEAAySUm.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rD9ZUXEAAySUm.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon What can you do with the ability to control the top 64 bits of a 1024-bit RSA public key N? Well, N = pq, which is hard to factor. But the *corrupted* N' is very likely to be a product of a bunch of smaller primes—which is easy to factor!
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon I first learned of this trick from the super cool USENIX Security 2016 paper Flip Feng Shui by Kaveh Razavi, @bjg et al., who used it in conjunction with RowHammer and memory deduplication to bypass SSH authentication. <a data-preview="true" href="https://www.usenix.org/conference/usenixsecurity16/technical-sessions/presentation/razavi">usenix.org/conference/use…</a><br>
<span><a href="https://pbs.twimg.com/media/F-rFbfPXgAA3Ezz.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rFbfPXgAA3Ezz.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon (One of the players who solved the challenge during CSAW CTF finals actually found an even sweeter way to exploit this vuln: figure out a bit pattern that makes N *prime* and set that. Then the corresponding private key d is just: pow(65537, -1, n-1). Slick!)
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Once you've factored the key (or made it prime) and figured out the secret key d for the corrupted public key, you can use it to forge signatures and bypass the authentication, allowing you to download the flag (encrypted with RSA+AES-256-GCM). <span><a href="https://pbs.twimg.com/media/F-rInsJXEAAuE0Q.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rInsJXEAAuE0Q.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Okay, but now on to the important stuff: ~aesthetics~. The theme of the challenge was based around Episode 13 of Neon Genesis Evangelion, which features an Angel that hacks NERV's MAGI supercomputer cluster.
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon I realized that three computers in the MAGI cluster (Casper, Balthasar, and Melchior) correspond neatly to the three fd_sets readfds, writefds, and exceptds. So I was able to make a cute UI that shows the state of the fd_sets in real-time. <span><video controls="" poster="https://pbs.twimg.com/ext_tw_video_thumb/1723411409579429888/pu/img/8Bjj0p8WU4HfW3jo.jpg"><source src="https://video.twimg.com/ext_tw_video/1723411409579429888/pu/vid/avc1/320x270/qYrDaeco3ZV7Csnc.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723411409579429888/pu/vid/avc1/426x360/4XP5JkjnGojXyxTF.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723411409579429888/pu/vid/avc1/854x720/nZLphAqzNrSxhGKy.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723411409579429888/pu/pl/oCl-SK_b9xgSrZDR.m3u8?tag=12&amp;container=fmp4" type="application/x-mpegURL"></video></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Aside from being my best attempt at recreating the UI from the show (pictured here), the UI elements also have some key clues to the vulnerability. <span><a href="https://pbs.twimg.com/media/F-rKhHpWsAAmxom.png" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rKhHpWsAAmxom.png"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon - The CODE field shows the highest file descriptor in use, and the EXTENTION (sic) shows the server's max fd ulimit.<br>
- The box on the right turns red when the highest FD is &gt; 1024.<br>
- The UI gets slightly corrupted precisely when there is actual memory corruption happening. <span><a href="https://pbs.twimg.com/media/F-rMd-3XMAAn0aj.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rMd-3XMAAn0aj.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon All of the visuals in the challenge were created using plain unicode characters and ANSI colors, so you can just cat the text files to see them (or dump them over a network socket). <span><video controls="" poster="https://pbs.twimg.com/ext_tw_video_thumb/1723415475378393089/pu/img/nUXZ6x6EkzpNC3jm.jpg"><source src="https://video.twimg.com/ext_tw_video/1723415475378393089/pu/vid/avc1/320x270/gcU1d77FxNPgoyFt.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723415475378393089/pu/vid/avc1/426x360/hxKT8RRyQX9bRjUc.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723415475378393089/pu/vid/avc1/854x720/QQVbqPP-j9C9iEkN.mp4?tag=12" type="video/mp4"><br>
<source src="https://video.twimg.com/ext_tw_video/1723415475378393089/pu/pl/0Tl_-kzEedv_y_ce.m3u8?tag=12&amp;container=fmp4" type="application/x-mpegURL"></video></span>
<sup><i></i></sup>
</p>
<div id="tweet_21" data-controller="thread" data-action="click->thread#showTweet" data-screenname="moyix" data-tweet="1723416020134564123" dir="auto"><p>
@CSAW_NYUTandon The credit sequence was made with some rather, uh, "rough and ready" techniques. <span><span><blockquote data-conversation="none" data-align="center" data-dnt="true"><a href="https://twitter.com/moyix/status/1723409266051051904">https://twitter.com/moyix/status/1723409266051051904</a></blockquote></span></span>
<sup><i></i></sup>
</p></div>
<p>
@CSAW_NYUTandon The code for credits generation is also available, though it is not what I would call production-quality <a data-preview="true" href="https://github.com/moyix/csaw23_nervcenter_credits">github.com/moyix/csaw23_n…</a>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Finally, a bit on the mechanics of developing this challenge. First, it ended up being rather a lot of C code, so I was super worried about accidentally introducing an unintended vuln that would make the challenge boring. <span><a href="https://pbs.twimg.com/media/F-rPWU8WIAAVCx8.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rPWU8WIAAVCx8.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon To guard against this I wrote a bunch of libfuzzer targets, network torture tests in Python, and traditional CTest unit tests. I think it worked! I didn't hear of anyone finding a vuln in the challenge except the one I intended. <br>
<span><span><span><a href="https://pbs.twimg.com/media/F-rQQcYWIAAvqP2.png" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rQQcYWIAAvqP2.png"></a></span></span><br>
<span><span><a href="https://pbs.twimg.com/media/F-rQpoqXIAAxFbT.png" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rQpoqXIAAxFbT.png"></a></span></span></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Another bit that took some work was making the challenge consistently solvable. With select(), you fill the fd_set with 1s, call select, and the kernel fills the set with the actual fd state. But that means that 1/2 the time the key is corrupted by all 1s instead of your bits!
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon This makes exploitation annoying, to say the least. So I introduced a mechanism that lets players pause and resume the thread calling select(), so the corrupted key stays in place during factoring/signing/encrypting. <span><a href="https://pbs.twimg.com/media/F-rThOzXcAAPWzh.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rThOzXcAAPWzh.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Oh, a couple more bits of aesthetics. The sensor port (the one you actually use for the overflow, lets you look at some cards for the various angels: <br>
<span><span><span><a href="https://pbs.twimg.com/media/F-rUrwoWAAAD5kP.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rUrwoWAAAD5kP.jpg"></a></span></span><br>
<span><span><a href="https://pbs.twimg.com/media/F-rUzzCW4AA5yaK.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rUzzCW4AA5yaK.jpg"></a></span></span></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon That functionality also hides the easter egg: by calling EXAMINE on three angels in a row where the first letter of their names spell out "RSA" (e.g., Ramiel, Sandalphon, Adam), you can activate the credit sequence shown in the first tweet. <span><span><blockquote data-conversation="none" data-align="center" data-dnt="true"><a href="https://twitter.com/moyix/status/1723398619313603068">https://twitter.com/moyix/status/1723398619313603068</a></blockquote></span></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon And I think it's always fun to taunt the players a little bit. That's why when you fail the challenge-response authentication, Asuka shows up to make fun of you. (There are a few other images included for other errors, but they're harder to trigger.) <span><a href="https://pbs.twimg.com/media/F-rVjxLW0AAlWIQ.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rVjxLW0AAlWIQ.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon I learned a few fun things while making this challenge. First, Python crypto libraries like pycryptodome do NOT enjoy working with prime or multi-prime keys. I used OpenSSL directly instead in my solver, but some players monkeypatched the Python library. <a data-preview="true" href="https://github.com/moyix/csaw23_nervcenter/tree/main/solver">github.com/moyix/csaw23_n…</a>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Second, one variant of the challenge I tried ran into an interesting issue. I considered byte-swapping the key so that players could only set the LSB. But it turns out half of those keys are unusable, because OpenSSL uses Montgomery multiplication, which requires an odd modulus.
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Tommaso Gagliardoni of Kudelski Security also suggested a variant on the core RSA overwrite that would also have been fun - allow the overwrite to make the key BIGGER by extending into adjacent data in memory. Sadly I didn't have time to implement this. <span><a href="https://pbs.twimg.com/media/F-rYbWoW8AA561k.jpg" target="_blank"><img alt="Image" src="https://threadreaderapp.com/images/1px.png" data-src="https://pbs.twimg.com/media/F-rYbWoW8AA561k.jpg"></a></span>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon Okay this thread is now officially WAY too long, so I'll wrap up by saying that I had a great time writing the challenge, and I'm thrilled that it all came together and people enjoyed playing it! The challenge source and solver can be found here: <a data-preview="true" href="https://github.com/moyix/csaw23_nervcenter">github.com/moyix/csaw23_n…</a>
<sup><i></i></sup>
</p>
<p>
@CSAW_NYUTandon @threadreaderapp unroll
<sup><i></i></sup>
</p>
<p>• • •</p>
<p><span>
Missing some Tweet in this thread? You can try to
<a id="force-click" href="#" data-category="refresh" data-action="1723398619313603068">force a refresh</a>
</span>
</p>
　
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[New Outlook sends passwords, mails and other data to Microsoft (148 pts)]]></title>
            <link>https://mailbox.org/en/post/warning-new-outlook-sends-passwords-mails-and-other-data-to-microsoft?nl=e</link>
            <guid>38233694</guid>
            <pubDate>Sat, 11 Nov 2023 19:35:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mailbox.org/en/post/warning-new-outlook-sends-passwords-mails-and-other-data-to-microsoft?nl=e">https://mailbox.org/en/post/warning-new-outlook-sends-passwords-mails-and-other-data-to-microsoft?nl=e</a>, See on <a href="https://news.ycombinator.com/item?id=38233694">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

        
  
      <div><p><a title="" href="https://www.heise.de/news/Microsoft-krallt-sich-Zugangsdaten-Achtung-vorm-neuen-Outlook-9357691.html" target="_blank" rel="noopener">"Microsoft steals access data"</a> - When the well-known German IT portal "Heise Online" uses such drastic words in its headline, then something is up. If Microsoft has its way, all Windows users will have to switch to the latest version of Microsoft Outlook. But: Not only can the IMAP and SMTP access data of your e-mail account be transferred to Microsoft, but all e-mails in the INBOX can also be copied to the Microsoft servers, even if you have your mailbox with a completely different provider such as mailbox.org.</p></div>
<h2>Main risk: Transferring your data to Microsoft "Synchronisation with the Microsoft server" - and everything is copied!</h2>
<p>If you set up a new account in the software, Microsoft offers a supposed security function: It says that non-Microsoft accounts are synchronised with the Microsoft cloud and that copies of "emails, calendars and contacts are therefore synchronised between your email provider and Microsoft data centres".</p>
<p>Anyone who reads this carefully may be perplexed, no question. But we all know how easy it is to agree to supposed banalities without reading them and to click away notices, especially when setting up software. In view of the drastic consequences of giving consent here, the warnings and explanations from Microsoft are probably too inconspicuous. Only a few users will realise that they are giving Microsoft comprehensive access to passwords, mail and more. Therefore, once again clearly:</p>
<p><strong>Microsoft gets full access to mails, calendars and contacts!</strong></p>
<div><p>But not only Windows users are at risk: Outlook versions for iOS, Mac and even Android are also affected, according to Heise.</p></div>
<h2>mailbox.org warns against using the new Microsoft Outlook</h2>
<p>mailbox.org warns its users: there is a high risk that sensitive data may be transmitted to Microsoft when using the new Outlook! And by the way: this compromised data includes not only emails, but also calendar and contact data.</p>
  
  
  

</div><p>For <strong>business customers</strong>, storing personal data in this way (albeit unintentionally) may constitute a GDPR offence that is subject to fines. After all, storing data in the Microsoft cloud legally constitutes data processing that requires the conclusion of an order data processing agreement (DPA) with Microsoft - and companies may have to identify this as such in their data protection declarations and in the data processing directory. It is irrelevant whether this is done intentionally by the company management or ultimately through the uninformed consent of an individual employee.</p><div>

        
  
      
<h2>Our recommendation</h2>
<p>Whether business or private: We strongly advise all our customers not to use the new Outlook! And we have the following alternatives for you:</p>
<ul>
<li><strong>Another e-mail client:</strong> We advise you to switch to the popular e-mail client "Thunderbird" on your computer. This is compatible with Windows and easy to set up. On mobile devices, there are a number of different IMAP mail clients, such as FairEmail and K9 Mail (which will also be called Thunderbird in the future).</li>
<li><strong>Using the webmailer:</strong> As a mailbox.org customer, you can use our secure webmail portal at any time, which offers an excellent alternative to desktop email clients. In addition to mail, calendar and contacts, you also have secure access to files and Office documents - and your personal video conference with OpenTalk is just a click away.</li>
</ul>
<p>We do everything we can to protect the security and privacy of your e-mail communication. But we also need your help: make sure you use apps from providers that respect and protect your privacy and security.</p>

<h2>Update</h2>
<p>The German Federal Commissioner for Data Protection and Freedom of Information, Ulrich Kelber, is also alarmed: On the <a title="social media network Mastodon" href="https://social.mailbox.org/@bfdi@social.bund.de/111381793879390891" target="_blank" rel="noopener">social media network Mastodon</a>, he described the data collection as "alarming" and announced his intention to pursue the issue at European level through the data protection authorities as early as next Tuesday.</p>  
  
  

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[It's still easy for anyone to become you at Experian (723 pts)]]></title>
            <link>https://krebsonsecurity.com/2023/11/its-still-easy-for-anyone-to-become-you-at-experian/</link>
            <guid>38232767</guid>
            <pubDate>Sat, 11 Nov 2023 18:05:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://krebsonsecurity.com/2023/11/its-still-easy-for-anyone-to-become-you-at-experian/">https://krebsonsecurity.com/2023/11/its-still-easy-for-anyone-to-become-you-at-experian/</a>, See on <a href="https://news.ycombinator.com/item?id=38232767">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
												<p>In the summer of 2022, KrebsOnSecurity <a href="https://krebsonsecurity.com/2022/07/experian-you-have-some-explaining-to-do/" target="_blank" rel="noopener">documented</a> the plight of several readers who had their accounts at big-three consumer credit reporting bureau <strong>Experian</strong> hijacked after identity thieves simply re-registered the accounts using a different email address. Sixteen months later, Experian clearly has not addressed this gaping lack of security. I know that because my account at Experian was recently hacked, and the only way I could recover access was by recreating the account.</p>
<div id="attachment_65607"><p><img aria-describedby="caption-attachment-65607" decoding="async" src="https://krebsonsecurity.com/wp-content/uploads/2023/11/exp-forgot.png" alt="" width="749" height="381" srcset="https://krebsonsecurity.com/wp-content/uploads/2023/11/exp-forgot.png 953w, https://krebsonsecurity.com/wp-content/uploads/2023/11/exp-forgot-768x391.png 768w, https://krebsonsecurity.com/wp-content/uploads/2023/11/exp-forgot-782x398.png 782w" sizes="(max-width: 749px) 100vw, 749px"></p><p id="caption-attachment-65607">Entering my SSN and birthday at Experian showed my identity was tied to an email address I did not authorize.</p></div>
<p>I recently ordered a copy of my credit file from Experian via <a href="https://www.annualcreditreport.com/" target="_blank" rel="noopener">annualcreditreport.com</a>, but as usual Experian declined to provide it, saying they couldn’t verify my identity. Attempts to log in to my account directly at Experian.com also failed; the site said it didn’t recognize my username and/or password.</p>
<p>A request for my Experian account username required my full Social Security number and date of birth, after which the website displayed portions of an email address I never authorized and did not recognize (the full address was redacted by Experian).</p>
<p>I immediately suspected that Experian was still allowing anyone to recreate their credit file account using the same personal information but a different email address, a major authentication failure that was explored in last year’s story, <a href="https://krebsonsecurity.com/2022/07/experian-you-have-some-explaining-to-do/" target="_blank" rel="noopener">Experian, You Have Some Explaining to Do</a>. So once again I sought to re-register as myself at Experian.</p>
<p>The homepage said I needed to provide a Social Security number and mobile phone number, and that I’d soon receive a link that I should click to verify myself. The site claims that the phone number you provide will be used to help validate your identity. But it appears you could supply any phone number in the United States at this stage in the process, and Experian’s website would not balk. <em>Regardless, users can simply skip this step by selecting the option to “Continue another way.”</em></p>
<p>Experian then asks for your full name, address, date of birth, Social Security number, email address and chosen password. After that, they require you to successfully answer between three to five multiple-choice security questions whose answers are very often based on public records. When I recreated my account this week, only two of the five questions pertained to my real information, and both of those questions concerned street addresses we’ve previously lived at — information that is just a Google search away.</p>
<p>Assuming you sail through the multiple-choice questions, you’re prompted to create a 4-digit PIN and provide an answer to one of several pre-selected challenge questions. After that, your new account is created and you’re directed to the Experian dashboard, which allows you to view your full credit file, and freeze or unfreeze it.</p>
<p>At this point, Experian will send a message to the old email address tied to the account, saying certain aspects of the user profile have changed. But this message isn’t a request seeking verification: It’s just a notification from Experian that the account’s user data has changed, and the original user is offered zero recourse here other than to a click a link to log in at Experian.com.</p>
<div id="attachment_65605"><p><img aria-describedby="caption-attachment-65605" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2023/11/expupdates.png" alt="" width="750" height="707"></p><p id="caption-attachment-65605">If you don’t have an Experian account, it’s a good idea to create one. Because at least then you will receive one of these&nbsp; emails when someone hijacks your credit file at Experian.</p></div>
<p>And of course, a user who receives one of these notices will find that the credentials to their Experian account no longer work. Nor do their PIN or account recovery question, because those have been changed also. Your only option at this point is recreate your account at Experian and steal it back from the ID thieves!</p>
<p>In contrast, if you try to modify an existing account at either of the other two major consumer credit reporting bureaus — <strong>Equifax</strong> or <strong>TransUnion</strong> — they will ask you to enter a code sent to the email address or phone number on file before any changes can be made.</p>
<p>Reached for comment, Experian declined to share the full email address that was added without authorization to my credit file.</p>
<p>“To ensure the protection of consumers’ identities and information, we have implemented a multi-layered security approach, which includes passive and active measures, and are constantly evolving,” Experian spokesperson <strong>Scott Anderson</strong> said in an emailed statement. “This includes knowledge-based questions and answers, and device possession and ownership verification processes.”</p>
<p>Anderson said all consumers have the option to activate a multi-factor authentication method that’s requested each time they log in to their account. But what good is multi-factor authentication if someone can simply recreate your account with a new phone number and email address?<span id="more-65594"></span></p>
<p>Several readers who spotted <a href="https://infosec.exchange/@briankrebs/111383547431806668" target="_blank" rel="noopener">my rant about Experian on Mastodon</a> earlier this week responded to a request to validate my findings. The Mastodon user <a href="https://infosec.exchange/@jackerbee@cyberplace.social" target="_blank" rel="noopener">@Jackerbee</a> is a reader from Michican who works in the biotechnology industry. @Jackerbee said when prompted by Experian to provide his phone number and the last four digits of his SSN, he chose the option to “manually enter my information.”</p>
<p>“I put my second phone number and the new email address,” he explained. “I received a single email in my original account inbox that said they’ve updated my information after I ‘signed up.’ No verification required from the original email address at any point. I also did not receive any text alerts at the original phone number. The especially interesting and egregious part is that when I sign in, it does 2FA with the new phone number.”</p>
<p>The Mastodon user <a href="https://infosec.exchange/@PeteMayo" target="_blank" rel="noopener">PeteMayo</a> said they recreated their Experian account twice this week, the second time by supplying a random landline number.</p>
<p>“The only difference: it asked me FIVE questions about my personal history (last time it only asked three) before proclaiming, ‘Welcome back, Pete!,’ and granting full access,” @PeteMayo wrote. “I feel silly saving my password for Experian; may as well just make a new account every time.”</p>
<p><img decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2023/11/petemayo.png" alt="" width="748" height="479"></p>
<p>I was fortunate in that whoever hijacked my account did not also thaw my credit freeze.&nbsp; Or if they did, they politely froze it again when they were done. But I fully expect my Experian account will be hijacked yet again unless Experian makes some important changes to its authentication process.</p>
<p>It boggles the mind that these fundamental authentication weaknesses have been allowed to persist for so long at Experian, which already has a horrible track record in this regard.</p>
<p>In December 2022, KrebsOnSecurity <a href="https://krebsonsecurity.com/2023/01/identity-thieves-bypassed-experian-security-to-view-credit-reports/" target="_blank" rel="noopener">alerted</a> Experian that identity thieves had worked out a remarkably simple way to bypass its security and access <em>any</em> consumer’s full credit report — armed with nothing more than a person’s name, address, date of birth, and Social Security number. Experian fixed the glitch, and acknowledged that it <a href="https://krebsonsecurity.com/2023/01/experian-glitch-exposing-credit-files-lasted-47-days/" target="_blank" rel="noopener">persisted for nearly seven weeks</a>, between Nov. 9, 2022 and Dec. 26, 2022.</p>
<p>In April 2021, KrebsOnSecurity revealed how identity thieves were&nbsp;<a href="https://krebsonsecurity.com/2021/04/experians-credit-freeze-security-is-still-a-joke/" target="_blank" rel="noopener">exploiting lax authentication on Experian’s PIN retrieval page</a>&nbsp;to unfreeze consumer credit files. In those cases, Experian failed to send any notice via email when a freeze PIN was retrieved, nor did it require the PIN to be sent to an email address already associated with the consumer’s account.</p>
<p>A few days after that April 2021 story, KrebsOnSecurity broke the news that&nbsp;<a href="https://krebsonsecurity.com/2021/04/experian-api-exposed-credit-scores-of-most-americans/" target="_blank" rel="noopener">an Experian API was exposing the credit scores of most Americans</a>.</p>
<p>More greatest hits from Experian:</p>
<p>2022: <a href="https://krebsonsecurity.com/2022/08/class-action-targets-experian-over-account-security/" rel="noopener" target="_blank">Class Action Targets Experian Over Account Security</a><br>
2017:&nbsp;<a href="https://krebsonsecurity.com/2017/09/experian-site-can-give-anyone-your-credit-freeze-pin/" target="_blank" rel="noopener">Experian Site Can Give Anyone Your Credit Freeze PIN</a><br>
2015:&nbsp;<a href="https://krebsonsecurity.com/2015/10/experian-breach-affects-15-million-consumers/" target="_blank" rel="noopener">Experian Breach Affects 15 Million Customers</a><br>
2015:&nbsp;<a href="https://krebsonsecurity.com/2014/05/experian-breach-tied-to-ny-nj-id-theft-ring/" target="_blank" rel="noopener">Experian Breach Tied to NY-NJ ID Theft Ring</a><br>
2015:&nbsp;<a href="https://krebsonsecurity.com/2015/10/at-experian-security-attrition-amid-acquisitions/" target="_blank" rel="noopener">At Experian, Security Attrition Amid Acquisitions</a><br>
2015:&nbsp;<a href="https://krebsonsecurity.com/2015/07/experian-hit-with-class-action-over-id-theft-service/" target="_blank" rel="noopener">Experian Hit With Class Action Over ID Theft Service</a><br>
2014:&nbsp;<a href="https://krebsonsecurity.com/2014/03/experian-lapse-allowed-id-theft-service-to-access-200-million-consumer-records/" target="_blank" rel="noopener">Experian Lapse Allowed ID Theft Service Access to 200 Million Consumer Records</a><br>
2013:&nbsp;<a href="https://krebsonsecurity.com/2013/10/experian-sold-consumer-data-to-id-theft-service/" target="_blank" rel="noopener">Experian Sold Consumer Data to ID Theft Service</a></p>
											</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Debunking the Myth of "Anonymous" Data (188 pts)]]></title>
            <link>https://www.eff.org/deeplinks/2023/11/debunking-myth-anonymous-data</link>
            <guid>38232378</guid>
            <pubDate>Sat, 11 Nov 2023 17:32:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.eff.org/deeplinks/2023/11/debunking-myth-anonymous-data">https://www.eff.org/deeplinks/2023/11/debunking-myth-anonymous-data</a>, See on <a href="https://news.ycombinator.com/item?id=38232378">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <article role="article">
  
  
  <div><p><b></b><span>Today, almost everything about our lives is digitally recorded and stored somewhere. Each credit card purchase, personal medical diagnosis, and preference about music and books is recorded and then used to predict what we like and dislike, and—ultimately—who we are.&nbsp;</span></p>
<p>This often happens without our knowledge or consent. Personal information that corporations collect from our online behaviors sells for astonishing profits and incentivizes online actors to collect as much as possible. Every mouse click and screen swipe can be tracked and then sold to ad-tech companies and the data brokers that service them.&nbsp;</p>
<p><span>In an attempt to justify this pervasive surveillance ecosystem, corporations often claim to de-identify our data. This supposedly removes all personal information (such as a person’s name) from the data point (such as the fact that an unnamed person bought a particular medicine at a particular time and place). Personal data can also be aggregated, whereby data about multiple people is combined with the intention of removing </span><a href="https://www.eff.org/deeplinks/2009/09/what-information-personally-identifiable"><span>personal identifying information</span></a><span> and thereby protecting user privacy.&nbsp;</span></p>
<p><span>Sometimes companies say our personal data is “anonymized,” implying a one-way ratched where it can never be dis-aggregated and re-identified. But this is not possible—anonymous data rarely stays this way. As Professor Matt Blaze, an expert in the field of cryptography and data privacy, </span><a href="https://www.nytimes.com/2020/03/19/us/coronavirus-location-tracking.html"><span>succinctly summarized</span></a><span>: “something that seems anonymous, more often than not, is not anonymous, even if it’s designed with the best intentions.”&nbsp;</span></p>
<h3><b>Anonymization…and Re-Identification?</b></h3>
<p><span>Personal data can be considered on a </span><a href="https://georgetownlawtechreview.org/re-identification-of-anonymized-data/GLTR-04-2017/"><span>spectrum of identifiability</span></a><span>. At the top is data that can directly identify people, such as a name or state identity number, which can be referred to as “direct identifiers.” Next is information indirectly linked to individuals, like personal phone numbers and email addresses, which some call “indirect identifiers.” After this comes data connected to multiple people, such as a favorite restaurant or movie. The other end of this spectrum is information that cannot be linked to any specific person—such as aggregated census data, and data that is not directly related to individuals at all like weather reports.</span></p>
<p><span>Data anonymization is often </span><a href="https://deliverypdf.ssrn.com/delivery.php?ID=926110097116071012112098112084025092029042041058054022096075006072105102108068091081035042057063112008038075092019127024108106031044060037085067082120125007124123056087053067019094021074127009122023072067065111114088090076068125120081075010085067125&amp;EXT=pdf&amp;INDEX=TRUE"><span>undertaken in two ways</span></a><span>. First, some personal identifiers like our names and social security numbers might be deleted. Second, other categories of personal information might be modified—such as obscuring our bank account numbers. For example, the Safe Harbor provision contained with the U.S. Health Insurance Portability and Accountability Act (HIPAA) requires that only the </span><a href="https://georgetownlawtechreview.org/re-identification-of-anonymized-data/GLTR-04-2017/"><span>first three digits</span></a><span> of a zip code can be reported in scrubbed data.</span></p>
<p>However, in practice, any attempt at de-identification requires removal not only of your identifiable information, but also of information that can identify you when considered in combination with other information known about you. Here's an example:&nbsp;</p>
<ul>
<li><span>First, think about the number of people that share your specific ZIP or postal code.&nbsp;</span></li>
<li><span>Next, think about how many of those people also share your birthday.&nbsp;</span></li>
<li><span>Now, think about how many people share your exact birthday, ZIP code, and gender.&nbsp;</span></li>
</ul>
<p><span>According to one </span><a href="https://dataprivacylab.org/projects/identifiability/paper1.pdf"><span>landmark study</span></a><span>, these three characteristics are enough to uniquely identify 87% of the U.S. population. A </span><a href="https://crypto.stanford.edu/~pgolle/papers/census.pdf"><span>different study</span></a><span> showed that 63% of the U.S. population can be uniquely identified from these three facts.</span></p>
<p>We cannot trust corporations to self-regulate. The financial benefit and business usefulness of our personal data often outweighs our privacy and anonymity. In re-obtaining the real identity of the person involved (direct identifier) alongside a person’s preferences (indirect identifier), corporations are able to continue profiting from our most sensitive information. For instance, a website that asks supposedly “anonymous” users for seemingly trivial information about themselves may be able to use that information to make a unique profile for an individual.&nbsp;</p>
<h3><b>Location Surveillance</b></h3>
<p><span>To understand this system in practice, we can look at </span><a href="https://www.eff.org/deeplinks/2020/03/governments-havent-shown-location-surveillance-would-help-contain-covid-19"><span>location data</span></a><span>. This includes the data collected by </span><a href="https://www.eff.org/issues/location-data-brokers"><span>apps on your mobile device</span></a><span> about your whereabouts: from the weekly trips to your local supermarket to your last appointment at a health center, an immigration clinic, or a protest planning meeting. The collection of this location data on our devices is sufficiently precise for law enforcement to place suspects at the scene of a crime, and for juries to convict people on the basis of that evidence. What’s more, whatever personal data is collected by the government can be </span><a href="https://www.eff.org/deeplinks/2017/05/california-authorities-still-ignoring-rising-abuse-police-databases"><span>misused</span></a><span> by its employees, </span><a href="https://www.wired.com/2016/10/inside-cyberattack-shocked-us-government/"><span>stolen</span></a><span> by criminals or foreign governments, and used in unpredictable ways by agency leaders for </span><a href="https://www.latimes.com/archives/la-xpm-2007-mar-31-na-census31-story.html"><span>nefarious new purposes</span></a><span>. And </span><a href="https://www.eff.org/deeplinks/2015/01/what-we-learned-oakland-raw-alpr-data"><span>all</span></a> <a href="https://www.eff.org/deeplinks/2017/04/next-steps-toward-reforming-californias-unfair-gang-databases"><span>too</span></a> <a href="https://www.aclunc.org/blog/facebook-instagram-and-twitter-provided-data-access-surveillance-product-marketed-target"><span>often</span></a><span>, such high tech surveillance disparately burdens people of color.&nbsp;&nbsp;</span></p>
<p><span>Practically speaking, there is </span><a href="https://www.eff.org/deeplinks/2020/04/how-protect-privacy-when-aggregating-location-data-fight-covid-19"><span>no way to de-identify individual location data</span></a><span> since these data points serve as unique personal identifiers of their own. And even when location data is said to have been anonymized, re-identification can be achieved by correlating de-identified data with other publicly available data like voter rolls or information that's sold by </span><a href="https://www.eff.org/wp/behind-the-one-way-mirror"><span>data brokers</span></a><span>. One </span><a href="https://www.nature.com/articles/srep01376"><span>study from 2013</span></a><span> found that researchers could uniquely identify 50% of people using only two randomly chosen time and location data points.&nbsp;</span></p>
<p><span>Done right, </span><a href="https://www.eff.org/deeplinks/2020/04/how-protect-privacy-when-aggregating-location-data-fight-covid-19"><span>aggregating</span></a><span> location data can work towards preserving our personal rights to privacy by producing non-individualized counts of behaviors instead of detailed timelines of individual location history. For instance, an aggregation might tell you how many people’s phones reported their location as being in a certain city within the last month, but not the exact phone number and other data points that would connect this directly and personally to you. However, there’s often pressure on the experts doing the aggregation to generate granular aggregate data sets that might be more meaningful to a particular decision-maker but which simultaneously expose individuals to an erosion of their personal privacy.&nbsp;&nbsp;</span></p>
<p><span>Moreover, most </span><a href="https://www.eff.org/wp/behind-the-one-way-mirror#Part1"><span>third-party location tracking</span></a><span> is designed to build profiles of real people. This means that every time a tracker collects a piece of information, it needs something to tie that information to a particular person. This can happen indirectly by correlating collected data with a particular device </span><a href="https://coveryourtracks.eff.org/"><span>or browser</span></a><span>, which might later correlate to one person or a group of people, such as a household. Trackers can also use artificial identifiers, like </span><a href="https://www.eff.org/wp/behind-the-one-way-mirror#AdvertisingIDs"><span>mobile ad IDs</span></a><a href="https://www.eff.org/wp/behind-the-one-way-mirror#Cookies"><span> and </span><span>cookies</span></a><span> to reach users with targeted messaging. And “anonymous” profiles of personal information can</span><a href="https://www.uclalawreview.org/pdf/57-6-3.pdf"> <span>nearly always</span></a><span> be</span><a href="https://www.nytimes.com/2006/08/09/technology/09aol.html"> <span>linked back to real people</span></a><span>—including where they live, what they read, and what they buy.</span></p>
<p><span>For data brokers dealing in our personal information, our data can either be useful for their profit-making or truly anonymous, but not both. EFF has </span><a href="https://www.eff.org/press/releases/eff-sues-att-data-aggregators-giving-bounty-hunters-and-other-third-parties-access"><span>long</span></a> <a href="https://www.eff.org/document/amicus-brief-carpenter"><span>opposed</span></a><span> location surveillance programs that can turn our lives into </span><a href="https://www.nytimes.com/interactive/2018/12/10/business/location-data-privacy-apps.html"><span>open books</span></a><span> for scrutiny by police, surveillance-based advertisers, identity thieves, and stalkers. We’ve also long blown the whistle on </span><a href="https://www.eff.org/deeplinks/2009/09/what-information-personally-identifiable"><span>phony anonymization</span></a><span>.&nbsp;</span></p>
<p>As a matter of public policy, it is critical that user privacy is not sacrificed in favor of filling the pockets of corporations. And for any data sharing plan, consent is critical: did each person consent to the method of data collection, and did they consent to the particular use? Consent must be specific, informed, opt-in, and voluntary.&nbsp;</p>

</div>

          </article>
    </div><div>
          <h2>Join EFF Lists</h2>
        
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Is this radical redesign of GIMP possible now? (215 pts)]]></title>
            <link>https://librearts.org/2023/11/radical-redesign-of-gimp/</link>
            <guid>38232334</guid>
            <pubDate>Sat, 11 Nov 2023 17:27:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://librearts.org/2023/11/radical-redesign-of-gimp/">https://librearts.org/2023/11/radical-redesign-of-gimp/</a>, See on <a href="https://news.ycombinator.com/item?id=38232334">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

        
        



	    

	    





<p><em>Disclaimer</em>: this post is an extended transcript of the video below.</p>

<p>
  <iframe src="https://www.youtube-nocookie.com/embed/z9ongxf3mIg" allowfullscreen="" title="YouTube Video" loading="lazy"></iframe>
</p>

<p>If you’ve been around long enough, you probably remember a project called Glimpse. Originally it was an attempt to create a fork of GIMP for the name change. Then that project got an offspring, Glimpse NX, where a new image editor with a cleaner, more approachable user interface was supposed to be developed.</p>
<p>Neither project was successful, but this is one of the mockups they came up with:</p>
<p>
    <img src="https://librearts.org/2023/11/radical-redesign-of-gimp/sw-glimpse-nx-mockup.webp" alt="Glimpse NX mockup" loading="lazy">
</p>


<p>I vividly remember that when I first saw this, I thought: “Looks interesting, but there is just no way this is going to work!”. And the main reason for that is…</p>
<h2 id="gimps-complexity">
    <a href="#gimps-complexity">
	GIMP’s complexity
    </a>
</h2>
<p>There is a huge amount of commands and options built into GIMP’s menus and nested menus.</p>
<p>
    <img src="https://librearts.org/2023/11/radical-redesign-of-gimp/sw-gimp-nested-menu.webp" alt="Nested menu in GIMP" loading="lazy">
</p>


<p>The program amassed all that over the years, and then the team tried to solve that with a search dialog:</p>
<p>
    <img src="https://librearts.org/2023/11/radical-redesign-of-gimp/sw-gimp-search-box.webp" alt="Search dialog in GIMP" loading="lazy">
</p>


<p>Which kinda works when you <em>generally</em> know what you need or how a feature you want could be called. But really not when this is your first rodeo.</p>
<p>Anyway, it is very difficult to represent all this complexity in an application that looks like the thing on the mockup above.</p>
<p>With GTK3 tech, one possible solution to do that is a dropdown menu in the headerbar, like in Siril:</p>
<p>
    <img src="https://librearts.org/2023/11/radical-redesign-of-gimp/sw-siril-dropdown-menu-in-headerbar.webp" alt="Dropdown menu in Siril&amp;rsquo;s headerbar" loading="lazy">
</p>


<p>But this is not very convenient because when you go to a nested menu in one part of the screen, it opens in an entirely different part of the screen, and it’s very annoying.</p>
<p>And then again, how many menus like that can you fit into one headerbar before users run for pitchforks with a determined look on their faces? So it’s not really great, I think we could do better.</p>
<h2 id="enter-dune-3d">
    <a href="#enter-dune-3d">
	Enter Dune 3D
    </a>
</h2>
<p>One possible solution is coming from a new application called <a href="https://github.com/dune3d/dune3d" target="_blank" rel="noopener">Dune 3D</a>. It’s a 3D CAD program built on top of <a href="https://github.com/Open-Cascade-SAS/OCCT" target="_blank" rel="noopener">Open CASCADE</a> kernel and <a href="https://github.com/solvespace/solvespace" target="_blank" rel="noopener">SolveSpace</a> constraint solver — all the usual suspects.</p>
<p>
    <img src="https://librearts.org/2023/11/radical-redesign-of-gimp/sw-dune3d-main-window.webp" alt="Dune 3D" loading="lazy">
</p>


<p>The developer is <a href="https://chaos.social/@karotte" target="_blank" rel="noopener">the same guy</a> who came up with <a href="https://github.com/horizon-eda/horizon" target="_blank" rel="noopener">Horizon EDA</a>, a GTK3-based electronic design automation package. Dune 3D is very, very new. The initial code import to GitHub was made just two weeks ago, so not a lot of people even know about this project yet, but that is beside the point.</p>
<p>The interesting part here is when you first look at this, you can’t help yourself wondering: “Okay, I get it, he barely started coding. Still, where is all the functionality?”. Well, since the status bar says “Press Space”, let’s do just that:</p>
<p>
    <img src="https://librearts.org/2023/11/radical-redesign-of-gimp/sw-dune3d-menu-search.webp" alt="Search + menu" loading="lazy">
</p>


<p>And that gets me really excited. Because you get the search bar for when you know what you’re looking for, when you know the terminology, when you understand what you need. And you also get a kind of menu that is helpful for when you need to navigate into the unknown and see all your options. So this is a very interesting solution that, while not perfect for a lot of complexity, could still be iterated upon, in my opinion.</p>
<p><em>Update</em>: as the developer <a href="https://chaos.social/@karotte/111376994265393111" target="_blank" rel="noopener">pointed out</a>, this search/menu dialog has been available in Horizon EDA for the past 7 years, he simply reused his own code in the new program.</p>
<h2 id="interaction-hints">
    <a href="#interaction-hints">
	Interaction hints
    </a>
</h2>
<p>Another interesting thing here is that when you do something like drawing a line, for example, you get these nice visual hints here, just above the status bar:</p>
<p>
    <img src="https://librearts.org/2023/11/radical-redesign-of-gimp/sw-dune3d-interaction-hints.webp" alt="Interaction hints" loading="lazy">
</p>


<p>The idea is coming from Blender obviously, and it would make a lot of sense to use this in applications like GIMP and Inkscape. Here is a good reason why.</p>
<p>When you are coming from an application like Photoshop, you are used to do set of modifiers for working with selections. So when you create the selection and you need to add to it, what you do is press <strong>Shift</strong> in GIMP. But it’s <strong>Ctrl</strong> in Photoshop. A lot of people that I’ve met who come from Photoshop don’t really know that. And the only way they can find that out is by reading a tutorial or a user manual or maybe watching a YouTube video — the status bar hint isn’t specific enough, and not everyone finds the toggles in tool settings.</p>
<p>
    <img src="https://librearts.org/2023/11/radical-redesign-of-gimp/sw-gimp-inspecific-toolbar-hint.webp" alt="Inspecific toolbar hint" loading="lazy">
</p>


<p>And the same applies, for example, to moving selections, because in GIMP, you need to press <strong>Ctrl+Alt</strong> and then drag to move the contents of the selection, which is not how people expect this to work coming from many other applications. Again, the only way they can find this out is by watching a tutorial or reading the user manual.</p>
<p>So that’s another thing that I think would make sense to sort of backport from Dune 3D to GIMP in the GTK3-based based version (or GTK4, since Dune 3D is GTK4-based). So I’m really hoping that at least this will be considered by the developers.</p>
<h2 id="thoughts">
    <a href="#thoughts">
	Thoughts?
    </a>
</h2>
<p>I don’t think that the redesign that the Glimpse NX team came up with should be implemented as is. There are so many more aspects to discuss apart from access to functionality in menus, and the team explored some of those aspects too: how the headerbar should work, how exporting would be implemented, what tool settings would look like etc. (they removed the git repository with mockups and studies, but I have a local copy).</p>
<p>Their redesign definitely makes the program more approachable. And now this solution in Dune 3D <em>probably</em> makes a major deficiency of that design go away. Even more, the interaction hints seem like a great if overlooked idea that could also be a <em>relatively</em> low-effort job.</p>
<p>Trying to revamp GIMP’s UX/UI at any level, especially this much, is obviously a huge effort — or <em>would be</em> a huge effort if the developers would ever decide to do that. But I’m really interested in your opinion. Do you think this old redesign of the program could be revived thanks to Dune 3D?</p>
<hr>
<p>Libre Arts is a reader-supported publication. If you appreciate the work I do,
donations are once again possible. You can subscribe on Patreon or make a
one-time donation with <a href="https://www.buymeacoffee.com/prokoudine" target="_blank" rel="noopener">BuyMeACoffee</a>
(<a href="https://librearts.org/donate/">see here</a> for more info).</p>
<p><a data-patreon-widget-type="become-patron-button" title="Support Libre Arts at Patreon" href="https://www.patreon.com/bePatron?u=544395"><img alt="Support Libre Arts at Patreon" src="https://librearts.org/images/patreon-button.png"></a></p>






	    
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Qanat (381 pts)]]></title>
            <link>https://en.wikipedia.org/wiki/Qanat</link>
            <guid>38232243</guid>
            <pubDate>Sat, 11 Nov 2023 17:18:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://en.wikipedia.org/wiki/Qanat">https://en.wikipedia.org/wiki/Qanat</a>, See on <a href="https://news.ycombinator.com/item?id=38232243">Hacker News</a></p>
<div id="readability-page-1" class="page"><div lang="en" dir="ltr" id="mw-content-text">


<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Ghasabe_Qanats_of_Gonabad2.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Ghasabe_Qanats_of_Gonabad2.jpg/220px-Ghasabe_Qanats_of_Gonabad2.jpg" decoding="async" width="220" height="308" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Ghasabe_Qanats_of_Gonabad2.jpg/330px-Ghasabe_Qanats_of_Gonabad2.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Ghasabe_Qanats_of_Gonabad2.jpg/440px-Ghasabe_Qanats_of_Gonabad2.jpg 2x" data-file-width="3264" data-file-height="4570"></a><figcaption>Water channel of <a href="https://en.wikipedia.org/wiki/Qanats_of_Ghasabeh" title="Qanats of Ghasabeh">Qanats of Ghasabeh</a>, Iran</figcaption></figure>
<p>A <b>qanat</b> or <b>kārīz</b> is a system for transporting water from an <a href="https://en.wikipedia.org/wiki/Aquifer" title="Aquifer">aquifer</a> or <a href="https://en.wikipedia.org/wiki/Water_well" title="Water well">water well</a> to the surface, through an underground <a href="https://en.wikipedia.org/wiki/Aqueduct_(water_supply)" title="Aqueduct (water supply)">aqueduct</a>; the system originated approximately 3,000 years ago in what is now <a href="https://en.wikipedia.org/wiki/Iran" title="Iran">Iran</a>.<sup id="cite_ref-:0_1-0"><a href="#cite_note-:0-1">[1]</a></sup> The function is essentially the same across North Africa and the Middle East but the system operates under a variety of regional names: <i>qanat</i> or kārīz in Iran, <i><b>foggara</b></i> in <a href="https://en.wikipedia.org/wiki/Algeria" title="Algeria">Algeria</a>, <i><b>khettara</b></i> in <a href="https://en.wikipedia.org/wiki/Morocco" title="Morocco">Morocco</a>, <i><b>falaj</b></i> in <a href="https://en.wikipedia.org/wiki/Oman" title="Oman">Oman</a> and the <a href="https://en.wikipedia.org/wiki/United_Arab_Emirates" title="United Arab Emirates">United Arab Emirates</a>, <i><b>karez</b></i> in <a href="https://en.wikipedia.org/wiki/Afghanistan" title="Afghanistan">Afghanistan</a>, '<i><b>uyūn</b></i> in <a href="https://en.wikipedia.org/wiki/Saudi_Arabia" title="Saudi Arabia">Saudi Arabia</a>, etc.<sup id="cite_ref-:0_1-1"><a href="#cite_note-:0-1">[1]</a></sup> The largest extant and functional qanat systems are located in Iran, Afghanistan, Oman, the <a href="https://en.wikipedia.org/wiki/Turpan_water_system" title="Turpan water system">oases of Turfan</a> region of <a href="https://en.wikipedia.org/wiki/China" title="China">China</a>, Algeria, and <a href="https://en.wikipedia.org/wiki/Pakistan" title="Pakistan">Pakistan</a>.<sup id="cite_ref-:0_1-2"><a href="#cite_note-:0-1">[1]</a></sup>
</p><p>This is a system of <a href="https://en.wikipedia.org/wiki/Water_supply" title="Water supply">water supply</a> that allows water to be transported over long distances in hot dry climates without losing much of the water to <a href="https://en.wikipedia.org/wiki/Evaporation" title="Evaporation">evaporation</a>. The system has the advantage of being resistant to natural disasters, such as <a href="https://en.wikipedia.org/wiki/Earthquake" title="Earthquake">earthquakes</a> and <a href="https://en.wikipedia.org/wiki/Flood" title="Flood">floods</a>, and to deliberate destruction in war. Furthermore, it is almost insensitive to the levels of precipitation, delivering a flow with only gradual variations from wet to dry years.
</p><p><i>Karez</i> are constructed as a series of well-like vertical shafts, connected by a gently sloping tunnel. This taps into underground water and delivers it to the surface by gravity, without need for pumping. The vertical shafts along the underground channel are purely for maintenance purposes, and water is typically used only once it emerges from the daylight point.
</p><p>The qanats still create a reliable supply of water for human settlements and irrigation in hot, <a href="https://en.wikipedia.org/wiki/Arid" title="Arid">arid</a> and <a href="https://en.wikipedia.org/wiki/Semi-arid" title="Semi-arid">semi-arid</a> climates, but the value of this system is directly related to the quality, volume and regularity of the <a href="https://en.wikipedia.org/wiki/Groundwater" title="Groundwater">groundwater</a>. Much of the population of Iran and other arid countries in <a href="https://en.wikipedia.org/wiki/Asia" title="Asia">Asia</a> and <a href="https://en.wikipedia.org/wiki/North_Africa" title="North Africa">North Africa</a> historically depended upon the water from qanats; many populated areas are close to the areas where qanats are possible.<sup id="cite_ref-Kheirabadi_2-0"><a href="#cite_note-Kheirabadi-2">[2]</a></sup> 
</p>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Qanat_Kashan.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Qanat_Kashan.jpg/220px-Qanat_Kashan.jpg" decoding="async" width="220" height="160" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Qanat_Kashan.jpg/330px-Qanat_Kashan.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Qanat_Kashan.jpg/440px-Qanat_Kashan.jpg 2x" data-file-width="1020" data-file-height="742"></a><figcaption>Qanat in <a href="https://en.wikipedia.org/wiki/Kashan" title="Kashan">Kashan</a> surfacing within the <a href="https://en.wikipedia.org/wiki/Fin_(garden)" title="Fin (garden)">Fin Garden</a>; it is thought to have served Iran's <a href="https://en.wikipedia.org/wiki/Sialk" title="Sialk">Sialk</a> area for thousands of years.</figcaption></figure>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Qanat_Niavaran.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Qanat_Niavaran.jpg/220px-Qanat_Niavaran.jpg" decoding="async" width="220" height="143" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Qanat_Niavaran.jpg/330px-Qanat_Niavaran.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Qanat_Niavaran.jpg/440px-Qanat_Niavaran.jpg 2x" data-file-width="1124" data-file-height="731"></a><figcaption>A kariz surfacing in <a href="https://en.wikipedia.org/wiki/Niavaran" title="Niavaran">Niavaran</a>, <a href="https://en.wikipedia.org/wiki/Tehran" title="Tehran">Tehran</a>, currently used for watering the grounds of The <a href="https://en.wikipedia.org/wiki/National_Library_of_Iran" title="National Library of Iran">National Library of Iran</a></figcaption></figure>

<h2><span id="Names">Names</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=1" title="Edit section: Names"><span>edit</span></a><span>]</span></span></h2>
<p>Common variants of <i><a href="https://en.wiktionary.org/wiki/qanat#English" title="wikt:qanat">qanat</a></i> in English include <i>kanat</i>, <i>khanat</i>, <i>kunut</i>, <i>kona</i>, <i>konait</i>, <i>ghanat</i>, <i>ghundat</i>.<sup id="cite_ref-Ajam_Qanats_2003_3-0"><a href="#cite_note-Ajam_Qanats_2003-3">[3]</a></sup>
</p><p><span title="Arabic-language romanization"><i lang="ar-Latn">Qanāh</i></span> (<span title="Arabic-language text"><span lang="ar" dir="rtl">قناة</span></span>) is an <a href="https://en.wikipedia.org/wiki/Arabic" title="Arabic">Arabic</a> word that means "channel".<sup id="cite_ref-4"><a href="#cite_note-4">[4]</a></sup> In <a href="https://en.wikipedia.org/wiki/Persian_language" title="Persian language">Persian</a>, the words for "qanat" are <b><span title="Persian-language romanization"><i lang="fa-Latn">kārīz</i></span></b> (or <b><span title="Persian-language romanization"><i lang="fa-Latn">kārēz</i></span></b>; <span title="Persian-language text"><span lang="fa" dir="rtl">كاريز</span></span>) and is derived from earlier word <span title="Persian-language romanization"><i lang="fa-Latn">kāhrēz</i></span> (<span title="Persian-language text"><span lang="fa" dir="rtl">كاهریز</span></span>). The word <span title="Persian-language romanization"><i lang="fa-Latn">qanāt</i></span> (<span title="Persian-language text"><span lang="fa" dir="rtl">قنات</span></span>) is also used in Persian. Other names for qanat include <span title="Persian-language romanization"><i lang="fa-Latn">kahan</i></span> (<a href="https://en.wikipedia.org/wiki/Persian_language" title="Persian language">Persian</a>: <span lang="fa" dir="rtl">کهن</span>),  <span title="Balochi-language romanization"><i lang="bal-Latn">Kahn</i></span> (<a href="https://en.wikipedia.org/wiki/Balochi_language" title="Balochi language">Balochi</a>), <span title="Azerbaijani-language romanization"><i lang="az-Latn">kahriz/kəhriz</i></span> (<a href="https://en.wikipedia.org/wiki/Azerbaijan" title="Azerbaijan">Azerbaijan</a>); <span title="Arabic-language romanization"><i lang="ar-Latn">khettara</i></span> (<a href="https://en.wikipedia.org/wiki/Morocco" title="Morocco">Morocco</a>); <span title="Spanish-language text"><i lang="es-ES">Galerías</i></span>, <span title="Persian-language romanization"><i lang="fa-Latn">minas</i></span> or <span title="Persian-language romanization"><i lang="fa-Latn">viajes de agua</i></span> (Spain); <span title="Arabic-language romanization"><i lang="ar-Latn">falaj</i></span> (<a href="https://en.wikipedia.org/wiki/Arabic_language" title="Arabic language">Arabic</a>: <span lang="ar" dir="rtl">فلج</span>) (<a href="https://en.wikipedia.org/wiki/United_Arab_Emirates" title="United Arab Emirates">United Arab Emirates</a> and <a href="https://en.wikipedia.org/wiki/Oman" title="Oman">Oman</a>), <span title="Arabic-language romanization"><i lang="ar-Latn">foggara/fughara</i></span> (<a href="https://en.wikipedia.org/wiki/North_Africa" title="North Africa">North Africa</a>).<sup id="cite_ref-Nair_5-0"><a href="#cite_note-Nair-5">[5]</a></sup> Alternative terms for qanats in Asia and North Africa are <i>kakuriz</i>, <i>chin-avulz</i> and <i>mayun</i>.
</p>
<h2><span id="Origins">Origins</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=2" title="Edit section: Origins"><span>edit</span></a><span>]</span></span></h2>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Qanat_technology_diffusion.svg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Qanat_technology_diffusion.svg/330px-Qanat_technology_diffusion.svg.png" decoding="async" width="330" height="145" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Qanat_technology_diffusion.svg/495px-Qanat_technology_diffusion.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Qanat_technology_diffusion.svg/660px-Qanat_technology_diffusion.svg.png 2x" data-file-width="1055" data-file-height="463"></a><figcaption>Possible diffusion of qanat technology</figcaption></figure>
<p>According to most sources, qanat technology was developed in <a href="https://en.wikipedia.org/wiki/History_of_Iran" title="History of Iran">ancient Iran</a> by the <a href="https://en.wikipedia.org/wiki/Persians" title="Persians">Persian people</a> sometime in the early 1st millennium BCE and slowly spread westward and eastward from there.<sup id="cite_ref-Wilson_2008_6-0"><a href="#cite_note-Wilson_2008-6">[6]</a></sup><sup id="cite_ref-7"><a href="#cite_note-7">[7]</a></sup><sup id="cite_ref-8"><a href="#cite_note-8">[8]</a></sup><sup id="cite_ref-9"><a href="#cite_note-9">[9]</a></sup><sup id="cite_ref-10"><a href="#cite_note-10">[10]</a></sup><sup id="cite_ref-11"><a href="#cite_note-11">[11]</a></sup> However, some other sources suggest a <a href="https://en.wikipedia.org/wiki/Eastern_Arabia" title="Eastern Arabia">Southeast Arabian</a> origin.<sup id="cite_ref-Tikriti2002_12-0"><a href="#cite_note-Tikriti2002-12">[12]</a></sup><sup id="cite_ref-13"><a href="#cite_note-13">[13]</a></sup> In addition, analogous systems appear to have been developed independently in China and in South America (specifically, Southern <a href="https://en.wikipedia.org/wiki/Peru" title="Peru">Peru</a>).<sup id="cite_ref-14"><a href="#cite_note-14">[14]</a></sup>
</p><p>A cotton species, <i><a href="https://en.wikipedia.org/wiki/Gossypium_arboreum" title="Gossypium arboreum">Gossypium arboreum</a></i>, is indigenous to South Asia and has been cultivated on the <a href="https://en.wikipedia.org/wiki/Indian_subcontinent" title="Indian subcontinent">Indian subcontinent</a> for a long time. Cotton appears in the <i>Inquiry into Plants</i> by Theophrastus and is mentioned in the Laws of Manu.<sup id="cite_ref-15"><a href="#cite_note-15">[15]</a></sup> As transregional trade networks expanded and intensified, cotton spread from its homeland to India and into the Middle East. One theory is that the qanat was developed to irrigate <a href="https://en.wikipedia.org/wiki/Cotton" title="Cotton">cotton</a> fields,<sup id="cite_ref-16"><a href="#cite_note-16">[16]</a></sup> first in what is now Iran, where it doubled the amount of available water for irrigation and urban use.<sup id="cite_ref-17"><a href="#cite_note-17">[17]</a></sup> Because of this, Persia enjoyed larger surpluses of <a href="https://en.wikipedia.org/wiki/Agriculture" title="Agriculture">agricultural products</a>, thus increasing <a href="https://en.wikipedia.org/wiki/Urbanization" title="Urbanization">urbanization</a> and <a href="https://en.wikipedia.org/wiki/Social_stratification" title="Social stratification">social stratification</a>.<sup id="cite_ref-18"><a href="#cite_note-18">[18]</a></sup> The qanat technology subsequently spread from Persia westward and eastward.<sup id="cite_ref-Wilson_2008_6-1"><a href="#cite_note-Wilson_2008-6">[6]</a></sup>
</p><p>In the extremely arid coastal desert of Peru, a technology of water supply similar to that of the qanats, called <a href="https://en.wikipedia.org/wiki/Puquios" title="Puquios">puquios</a>, was developed. Most archaeologists believe that the puquios are indigenous and date to about 500&nbsp;CE, but a few believe they are of Spanish origin, brought to the Americas in the 16th century. Puquios were still in use in the <a href="https://en.wikipedia.org/wiki/Nazca" title="Nazca">Nazca</a> region in the 21st century.<sup id="cite_ref-Lane_19-0"><a href="#cite_note-Lane-19">[19]</a></sup>
</p>
<h2><span id="Technical_features">Technical features</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=3" title="Edit section: Technical features"><span>edit</span></a><span>]</span></span></h2>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Qanat_cross_section.svg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Qanat_cross_section.svg/340px-Qanat_cross_section.svg.png" decoding="async" width="340" height="210" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Qanat_cross_section.svg/510px-Qanat_cross_section.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Qanat_cross_section.svg/680px-Qanat_cross_section.svg.png 2x" data-file-width="718" data-file-height="443"></a><figcaption>Cross-section of a qanat</figcaption></figure>
<blockquote><p>In arid and semi-arid regions, owing to high evaporation, transportation routes were in the form of qanats, which led groundwater to consumption areas along the tunnels. In the long run, the qanat system is not only economical but also <a href="https://en.wikipedia.org/wiki/Sustainability" title="Sustainability">sustainable</a> for <a href="https://en.wikipedia.org/wiki/Irrigation" title="Irrigation">irrigation</a> and agricultural purposes.… The ground water flow was known to depend on grain size of sediments, and, therefore, the tunnels in qanats are filled in with coarser material than the surrounding hose geological formations. The qanats are constructed mainly along the valleys where <a href="https://en.wikipedia.org/wiki/Quaternary" title="Quaternary">Quaternary</a> sediments are deposited.</p><p>— <cite><i>Underground Aqueducts Handbook</i> (2016)</cite></p></blockquote>
<p>Qanats are constructed as a series of <a href="https://en.wikipedia.org/wiki/Water_well" title="Water well">well-like</a> vertical <a href="https://en.wikipedia.org/wiki/Shaft_mining" title="Shaft mining">shafts</a>, connected by a gently sloping <a href="https://en.wikipedia.org/wiki/Tunnel" title="Tunnel">tunnel</a> which carries a water channel. Qanats efficiently deliver large amounts of subterranean water to the surface without need for pumping. The water drains by <a href="https://en.wikipedia.org/wiki/Gravity" title="Gravity">gravity</a>, typically from an upland <a href="https://en.wikipedia.org/wiki/Aquifer" title="Aquifer">aquifer</a>, with the destination lower than the source. Qanats allow water to be transported over long distances in hot dry climates without much water loss to <a href="https://en.wikipedia.org/wiki/Evaporation" title="Evaporation">evaporation</a>.<sup id="cite_ref-Angelakis_2016_Handbook_20-0"><a href="#cite_note-Angelakis_2016_Handbook-20">[20]</a></sup>
</p><p>It is very common for a qanat to start below the foothills of mountains, where the <a href="https://en.wikipedia.org/wiki/Water_table" title="Water table">water table</a> is closest to the surface. From this source, the qanat tunnel slopes gently downward, slowly converging with the steeper slope of the land surface above, and the water finally flows out above ground where the two levels meet. To connect a populated or agricultural area with an aquifer, qanats must often extend for long distances.<sup id="cite_ref-Kheirabadi_2-1"><a href="#cite_note-Kheirabadi-2">[2]</a></sup>
</p><p>Qanats are sometimes split into an underground distribution network of smaller canals called kariz. Like qanats, these smaller canals are below ground to avoid contamination and evaporation. In some cases water from a qanat is stored in a reservoir, typically with night flow stored for daytime use. An <a href="https://en.wikipedia.org/wiki/Ab_anbar" title="Ab anbar">ab anbar</a> is an example of a traditional Persian qanat-fed reservoir for drinking water.
</p><p>The qanat system has the advantage of being resistant to natural disasters such as earthquakes and floods, and to deliberate destruction in war. Furthermore, it is almost insensitive to the levels of precipitation, delivering a flow with only gradual variations from wet to dry years. From a sustainability perspective, qanats are powered only by gravity, and thus have low operation &amp; maintenance costs once built. Qanats transfer freshwater from the mountain plateau to the lower-lying plains with saltier soil. This helps to control <a href="https://en.wikipedia.org/wiki/Soil_salinity" title="Soil salinity">soil salinity</a> and prevent <a href="https://en.wikipedia.org/wiki/Desertification" title="Desertification">desertification</a>.<sup id="cite_ref-Nasiri_et_Mafakheri_21-0"><a href="#cite_note-Nasiri_et_Mafakheri-21">[21]</a></sup>
</p>
<h3><span id="Qanat_vs._spring-flow_tunnel">Qanat vs. spring-flow tunnel</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=4" title="Edit section: Qanat vs. spring-flow tunnel"><span>edit</span></a><span>]</span></span></h3>
<p>The qanat should not be confused with the <a href="https://en.wikipedia.org/w/index.php?title=Spring-flow_tunnel&amp;action=edit&amp;redlink=1" title="Spring-flow tunnel (page does not exist)">spring-flow tunnel</a> typical to the mountainous area around <a href="https://en.wikipedia.org/wiki/Jerusalem" title="Jerusalem">Jerusalem</a>. Although both are excavated tunnels designed to extract water by gravity flow, there are crucial differences. Firstly, the origin of the qanat was a well that was turned into an artificial spring. In contrast, the origin of the spring-flow tunnel was the development of a natural spring to renew or increase flow following a recession of the water table. Secondly, the shafts essential for the construction of qanats are not essential to spring-flow tunnels.
</p>
<h2><span id="Impact_of_qanats_on_settlement_patterns">Impact of qanats on settlement patterns</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=5" title="Edit section: Impact of qanats on settlement patterns"><span>edit</span></a><span>]</span></span></h2>
<p>A typical town or city in Iran, and elsewhere where the qanat is used, has more than one qanat. Fields and gardens are located both over the qanats a short distance before they emerge from the ground and below the surface outlet. Water from the qanats defines both the social regions in the city and the layout of the city.<sup id="cite_ref-Kheirabadi_2-2"><a href="#cite_note-Kheirabadi-2">[2]</a></sup>
</p><p>The water is freshest, cleanest, and coolest in the upper reaches and more prosperous people live at the outlet or immediately upstream of the outlet. When the qanat is still below ground, the water is drawn to the surface via <a href="https://en.wikipedia.org/wiki/Water_well" title="Water well">water wells</a> or animal driven <a href="https://en.wikipedia.org/wiki/Persian_well" title="Persian well">Persian wells</a>. Private subterranean reservoirs could supply houses and buildings for domestic use and garden irrigation as well. Further, air flow from the qanat is used to cool an underground summer room (<a href="https://en.wikipedia.org/wiki/Shabestan" title="Shabestan">shabestan</a>) found in many older houses and buildings.<sup id="cite_ref-Kheirabadi_2-3"><a href="#cite_note-Kheirabadi-2">[2]</a></sup>
</p><p>Downstream of the outlet, the water runs through surface canals called jubs (<i>jūbs</i>) which run downhill, with lateral branches to carry water to the neighborhood, gardens and fields. The streets normally parallel the jubs and their lateral branches. As a result, the cities and towns are oriented consistent with the gradient of the land; this is a practical response to efficient water distribution over varying terrain.<sup id="cite_ref-Kheirabadi_2-4"><a href="#cite_note-Kheirabadi-2">[2]</a></sup>
</p><p>The lower reaches of the canals are less desirable for both residences and agriculture. The water grows progressively more polluted as it passes downstream. In dry years the lower reaches are the most likely to see substantial reductions in flow.<sup id="cite_ref-Kheirabadi_2-5"><a href="#cite_note-Kheirabadi-2">[2]</a></sup>
</p>
<h2><span id="Construction">Construction</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=6" title="Edit section: Construction"><span>edit</span></a><span>]</span></span></h2>
<p>Traditionally qanats are built by a group of skilled laborers, <i>muqannīs</i>, with hand labor. The profession historically paid well and was typically handed down from father to son.<sup id="cite_ref-Kheirabadi_2-6"><a href="#cite_note-Kheirabadi-2">[2]</a></sup>
</p>
<h3><span id="Preparations">Preparations</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=7" title="Edit section: Preparations"><span>edit</span></a><span>]</span></span></h3>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Alluvial_fan_in_Iran.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Alluvial_fan_in_Iran.jpg/260px-Alluvial_fan_in_Iran.jpg" decoding="async" width="260" height="185" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Alluvial_fan_in_Iran.jpg/390px-Alluvial_fan_in_Iran.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Alluvial_fan_in_Iran.jpg/520px-Alluvial_fan_in_Iran.jpg 2x" data-file-width="1451" data-file-height="1031"></a><figcaption>Alluvial fan in southern Iran. Image from NASA's <a href="https://en.wikipedia.org/wiki/Terra_satellite" title="Terra satellite">Terra satellite</a>.</figcaption></figure>
<p>The critical, initial step in qanat construction is identification of an appropriate water source. The search begins at the point where the <a href="https://en.wikipedia.org/wiki/Alluvial_fan" title="Alluvial fan">alluvial fan</a> meets the mountains or foothills; water is more abundant in the mountains because of <a href="https://en.wikipedia.org/wiki/Orographic_lifting" title="Orographic lifting">orographic lifting</a> and excavation in the alluvial fan is relatively easy. The <i>muqannīs</i> follow the track of the main water courses coming from the mountains or foothills to identify evidence of subsurface water such as deep-rooted vegetation or seasonal seeps. A trial well is then dug to determine the location of the water table and determine whether a sufficient flow is available to justify construction. If these prerequisites are met, the route is laid out aboveground.
</p><p>Equipment must be assembled. The equipment is straightforward: containers (usually leather bags), ropes, reels to raise the container to the surface at the shaft head, hatchets and shovels for excavation, lights, spirit levels or plumb bobs and string. Depending upon the soil type, qanat liners (usually fired clay hoops) may also be required.<sup id="cite_ref-Kheirabadi_2-7"><a href="#cite_note-Kheirabadi-2">[2]</a></sup><sup id="cite_ref-Smith_22-0"><a href="#cite_note-Smith-22">[22]</a></sup>
</p><p>Although the construction methods are simple, the construction of a qanat requires a detailed understanding of subterranean geology and a degree of engineering sophistication. The gradient of the qanat must be carefully controlled: too shallow a gradient yields no flow and too steep a gradient will result in excessive erosion, collapsing the qanat. And misreading the soil conditions leads to collapses, which at best require extensive rework and at worst are fatal for the crew.<sup id="cite_ref-Smith_22-1"><a href="#cite_note-Smith-22">[22]</a></sup>
</p>
<h3><span id="Excavation">Excavation</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=8" title="Edit section: Excavation"><span>edit</span></a><span>]</span></span></h3>
<p>Construction of a qanat is usually performed by a crew of 3–4 <i>muqannīs</i>. For a shallow qanat, one worker typically digs the horizontal shaft, one raises the excavated earth from the shaft and one distributes the excavated earth at the top.<sup id="cite_ref-Smith_22-2"><a href="#cite_note-Smith-22">[22]</a></sup>
</p><p>The crew typically begins from the destination to which the water will be delivered into the soil and works toward the source (the test well). Vertical shafts are excavated along the route, separated at a distance of 20–35&nbsp;m (66–115&nbsp;ft). The separation of the shafts is a balance between the amount of work required to excavate them and the amount of effort required to excavate the space between them, as well as the ultimate maintenance effort. In general, the shallower the qanat, the closer the vertical shafts. If the qanat is long, excavation may begin from both ends at once. Tributary channels are sometimes also constructed to supplement the water flow.<sup id="cite_ref-Kheirabadi_2-8"><a href="#cite_note-Kheirabadi-2">[2]</a></sup><sup id="cite_ref-Smith_22-3"><a href="#cite_note-Smith-22">[22]</a></sup>
</p><p>Most qanats in Iran run less than 5&nbsp;km (3.1&nbsp;mi), while some have been measured at ≈70&nbsp;km (43&nbsp;mi) in length near <a href="https://en.wikipedia.org/wiki/Kerman" title="Kerman">Kerman</a>. The vertical shafts usually range from 20 to 200&nbsp;m (66 to 656&nbsp;ft) in depth, although qanats in the <a href="https://en.wikipedia.org/wiki/Province_of_Khorasan" title="Province of Khorasan">province of Khorasan</a> have been recorded with vertical shafts of up to 275&nbsp;m (902&nbsp;ft). The vertical shafts support construction and maintenance of the underground channel as well as air interchange. Deep shafts require intermediate platforms to facilitate the process of removing soil.<sup id="cite_ref-Kheirabadi_2-9"><a href="#cite_note-Kheirabadi-2">[2]</a></sup><sup id="cite_ref-Smith_22-4"><a href="#cite_note-Smith-22">[22]</a></sup>
</p><p>The construction speed depends on the depth and nature of the ground. If the earth is soft and easy to work, at 20&nbsp;m (66&nbsp;ft) depth a crew of four workers can excavate a horizontal length of 40&nbsp;m (130&nbsp;ft) per day. When the vertical shaft reaches 40&nbsp;m (130&nbsp;ft), they can excavate only 20 meters horizontally per day and at 60&nbsp;m (200&nbsp;ft) in depth this drops below 5 horizontal meters per day. In Algeria, a common speed is just 2&nbsp;m (6.6&nbsp;ft) per day at a depth of 15&nbsp;m (49&nbsp;ft). Deep, long qanats (which many are) require years and even decades to construct.<sup id="cite_ref-Kheirabadi_2-10"><a href="#cite_note-Kheirabadi-2">[2]</a></sup><sup id="cite_ref-Smith_22-5"><a href="#cite_note-Smith-22">[22]</a></sup>
</p><p>The excavated material is usually transported by means of leather bags up the vertical shafts. It is mounded around the vertical shaft exit, providing a barrier that prevents windblown or rain driven debris from entering the shafts. These mounds may be covered to provide further protection to the qanat. From the air, these shafts look like a string of bomb craters.<sup id="cite_ref-Smith_22-6"><a href="#cite_note-Smith-22">[22]</a></sup>
</p><p>The qanat's water-carrying channel must have a sufficient downward slope that water flows easily. However the downward gradient must not be so great as to create conditions under which the water transitions between <a href="https://en.wikipedia.org/wiki/Supercritical_flow" title="Supercritical flow">supercritical</a> and <a href="https://en.wikipedia.org/wiki/Subcritical_flow" title="Subcritical flow">subcritical flow</a>; if this occurs, the waves that result can result in severe erosion that can damage or destroy the qanat. The choice of the slope is a trade off between erosion and sedimentation. Highly sloped tunnels are subject to more erosion as water flows at a higher speed. On the other hand, less sloped tunnels need frequent maintenance due to the problem of sedimentation.<sup id="cite_ref-Nasiri_et_Mafakheri_21-1"><a href="#cite_note-Nasiri_et_Mafakheri-21">[21]</a></sup> A lower downward gradient also contributes to reducing the solid contents and contamination in water.<sup id="cite_ref-Nasiri_et_Mafakheri_21-2"><a href="#cite_note-Nasiri_et_Mafakheri-21">[21]</a></sup> In shorter qanats the downward gradient varies between 1:1000 and 1:1500, while in longer qanats it may be almost horizontal. Such precision is routinely obtained with a <a href="https://en.wikipedia.org/wiki/Spirit_level" title="Spirit level">spirit level</a> and string.<sup id="cite_ref-Kheirabadi_2-11"><a href="#cite_note-Kheirabadi-2">[2]</a></sup><sup id="cite_ref-Smith_22-7"><a href="#cite_note-Smith-22">[22]</a></sup>
</p><p>In cases where the gradient is steeper, underground waterfalls may be constructed with appropriate design features (usually linings) to absorb the energy with minimal erosion. In some cases the water power has been harnessed to drive underground <a href="https://en.wikipedia.org/wiki/Water_mill" title="Water mill">mills</a>. If it is not possible to bring the outlet of the qanat out near the settlement, it is necessary to run a <i>jub</i> or canal overground. This is avoided when possible to limit pollution, warming and water loss due to evaporation.<sup id="cite_ref-Kheirabadi_2-12"><a href="#cite_note-Kheirabadi-2">[2]</a></sup><sup id="cite_ref-Smith_22-8"><a href="#cite_note-Smith-22">[22]</a></sup>
</p>
<h3><span id="Maintenance">Maintenance</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=9" title="Edit section: Maintenance"><span>edit</span></a><span>]</span></span></h3>
<p>The vertical shafts may be covered to minimize blown-in sand. The channels of qanats must be periodically inspected for erosion or cave-ins, cleaned of sand and mud and otherwise repaired. For safety, air flow must be assured before entry.
</p>
<h3><span id="Restoration">Restoration</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=10" title="Edit section: Restoration"><span>edit</span></a><span>]</span></span></h3>
<p>Some damaged qanats have been restored. To be sustainable, restoration needs to take into account many nontechnical factors beginning with the process of selecting the qanat to be restored. In Syria, three sites were chosen based on a national inventory conducted in 2001. One of them, the <a href="https://en.wikipedia.org/w/index.php?title=Drasiah&amp;action=edit&amp;redlink=1" title="Drasiah (page does not exist)">Drasiah</a> qanat of <a href="https://en.wikipedia.org/w/index.php?title=Dmeir&amp;action=edit&amp;redlink=1" title="Dmeir (page does not exist)">Dmeir</a>, was completed in 2002. Selection criteria included the availability of a steady groundwater flow, social cohesion and willingness to contribute of the community using the qanat, and the existence of a functioning water-rights system.<sup id="cite_ref-23"><a href="#cite_note-23">[23]</a></sup>
</p>
<h2><span id="Applications_of_qanats">Applications of qanats</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=11" title="Edit section: Applications of qanats"><span>edit</span></a><span>]</span></span></h2>
<h3><span id="Irrigation_and_drinking_water_supply">Irrigation and drinking water supply</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=12" title="Edit section: Irrigation and drinking water supply"><span>edit</span></a><span>]</span></span></h3>
<p>The primary applications of qanats are for irrigation, providing cattle with water, and drinking water supply. Other applications include cooling and ice storage.
</p>
<h3><span id="Cooling">Cooling</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=13" title="Edit section: Cooling"><span>edit</span></a><span>]</span></span></h3>

<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Qanat_wind_tower.svg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Qanat_wind_tower.svg/260px-Qanat_wind_tower.svg.png" decoding="async" width="260" height="275" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Qanat_wind_tower.svg/390px-Qanat_wind_tower.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Qanat_wind_tower.svg/520px-Qanat_wind_tower.svg.png 2x" data-file-width="701" data-file-height="741"></a><figcaption>Wind tower and qanat used for cooling</figcaption></figure>
<p>Qanats used in conjunction with a <a href="https://en.wikipedia.org/wiki/Wind_tower" title="Wind tower">wind tower</a> can provide cooling as well as a water supply. A wind tower is a chimney-like structure positioned above the house; of its four openings, the one opposite the wind direction is opened to move air out of the house. Incoming air is pulled from a qanat below the house. The air flow across the vertical shaft opening creates a lower pressure (see <a href="https://en.wikipedia.org/wiki/Bernoulli%27s_principle" title="Bernoulli's principle">Bernoulli effect</a>) and draws cool air up from the qanat tunnel, mixing with it. The air from the qanat is drawn into the tunnel at some distance away and is cooled both by contact with the cool tunnel walls/water and by the transfer of <a href="https://en.wikipedia.org/wiki/Latent_heat" title="Latent heat">latent heat</a> of evaporation as water evaporates into the air stream. In dry desert climates this can result in a greater than 15&nbsp;°C reduction in the air temperature coming from the qanat; the mixed air still feels dry, so the basement is cool and only comfortably moist (not damp). Wind tower and qanat cooling have been used in desert climates for over 1000 years.<sup id="cite_ref-24"><a href="#cite_note-24">[24]</a></sup>
</p>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:AbAnbarNain2.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/AbAnbarNain2.jpg/220px-AbAnbarNain2.jpg" decoding="async" width="220" height="132" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/AbAnbarNain2.jpg/330px-AbAnbarNain2.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/AbAnbarNain2.jpg/440px-AbAnbarNain2.jpg 2x" data-file-width="640" data-file-height="383"></a><figcaption>A Persian <a href="https://en.wikipedia.org/wiki/Ab_anbar" title="Ab anbar">Ab anbar</a> with wind towers connected to a qanat</figcaption></figure>
<h3><span id="Ice_storage">Ice storage</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=14" title="Edit section: Ice storage"><span>edit</span></a><span>]</span></span></h3>

<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Yakhchal_of_Yazd_province.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Yakhchal_of_Yazd_province.jpg/170px-Yakhchal_of_Yazd_province.jpg" decoding="async" width="170" height="128" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Yakhchal_of_Yazd_province.jpg/255px-Yakhchal_of_Yazd_province.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Yakhchal_of_Yazd_province.jpg/340px-Yakhchal_of_Yazd_province.jpg 2x" data-file-width="1024" data-file-height="768"></a><figcaption><a href="https://en.wikipedia.org/w/index.php?title=Yakhch%C4%81l_of_Kheshti&amp;action=edit&amp;redlink=1" title="Yakhchāl of Kheshti (page does not exist)">Yakhchāl of Kheshti</a> in <a href="https://en.wikipedia.org/wiki/Yazd_Province" title="Yazd Province">Yazd Province</a></figcaption></figure>
<p>By 400&nbsp;BCE, <a href="https://en.wikipedia.org/wiki/Persia" title="Persia">Persian</a> engineers had mastered the technique of storing ice in the middle of summer in the desert.<sup id="cite_ref-Rael_25-0"><a href="#cite_note-Rael-25">[25]</a></sup>
</p><p>The ice could be brought in during the winters from nearby mountains, but in a more usual and sophisticated method they built a wall in the east–west direction near the <a href="https://en.wikipedia.org/wiki/Yakhchal" title="Yakhchal">yakhchal</a> (ice pit). In winter, the qanat water would be channeled to the north side of the wall, whose shade made the water freeze more quickly, increasing the ice formed per winter day. Then the ice was stored in yakhchals—specially designed, naturally cooled refrigerators. A large underground space with thick insulated walls was connected to a qanat, and a system of <a href="https://en.wikipedia.org/wiki/Windcatcher" title="Windcatcher">windcatchers</a> or wind towers was used to draw cool subterranean air up from the qanat to maintain temperatures inside the space at low levels, even during hot summer days. As a result, the ice melted slowly and was available year-round.<sup id="cite_ref-Rael_25-1"><a href="#cite_note-Rael-25">[25]</a></sup>
</p>
<h2><span id="Qanats_by_country">Qanats by country</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=15" title="Edit section: Qanats by country"><span>edit</span></a><span>]</span></span></h2>
<h3><span id="Africa">Africa</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=16" title="Edit section: Africa"><span>edit</span></a><span>]</span></span></h3>
<h4><span id="Algeria">Algeria</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=17" title="Edit section: Algeria"><span>edit</span></a><span>]</span></span></h4>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Foggara_02.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/Foggara_02.jpg/220px-Foggara_02.jpg" decoding="async" width="220" height="147" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/Foggara_02.jpg/330px-Foggara_02.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/9/98/Foggara_02.jpg 2x" data-file-width="402" data-file-height="269"></a><figcaption>Water "metering" through a distribution <a href="https://en.wikipedia.org/wiki/Weir" title="Weir">weir</a> on a <i>foggara</i> in Algeria</figcaption></figure>
<p>Qanats (designated foggaras in <a href="https://en.wikipedia.org/wiki/Algeria" title="Algeria">Algeria</a>) are the source of water for irrigation in large <a href="https://en.wikipedia.org/wiki/Oases" title="Oases">oases</a> like that at <a href="https://en.wikipedia.org/wiki/Gourara" title="Gourara">Gourara</a>. The foggaras are also found at <a href="https://en.wikipedia.org/wiki/Touat" title="Touat">Touat</a> (an area of Adrar 200&nbsp;km from Gourara). The length of the foggaras in this region is estimated to be thousands of kilometers.
</p><p>Although sources suggest that the foggaras may have been in use as early as 200&nbsp;CE, they were clearly in use by the 11th century after the Arabs took possession of the oases in the 10th century and the residents embraced Islam.
</p><p>The water is metered to the various users through the use of distribution <a href="https://en.wikipedia.org/wiki/Weir" title="Weir">weirs</a> that meter flow to the various canals, each for a separate user.
</p><p>The humidity of the oases is also used to supplement the water supply to the foggara. The temperature gradient in the vertical shafts causes air to rise by natural convection, causing a draft to enter the foggara. The moist air of the agricultural area is drawn into the foggara in the opposite direction to the water run-off. In the foggara it condenses on the tunnel walls and the air passes out of the vertical shafts. This condensed moisture is available for reuse.<sup id="cite_ref-26"><a href="#cite_note-26">[26]</a></sup>
</p>
<h4><span id="Egypt">Egypt</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=18" title="Edit section: Egypt"><span>edit</span></a><span>]</span></span></h4>
<p>According to Herodotus, qanat irrigation technology was introduced to Egypt by the Achaemenid king <a href="https://en.wikipedia.org/wiki/Darius_I" title="Darius I">Darius I</a> during his reign of 522 BCE-486 BCE, which is supported by the historian <a href="https://en.wikipedia.org/wiki/Albert_T._Olmstead" title="Albert T. Olmstead">Albert T. Olmstead</a>.<sup id="cite_ref-27"><a href="#cite_note-27">[27]</a></sup>
</p><p>There are four main oases in the Egyptian desert. The <a href="https://en.wikipedia.org/wiki/Kharga_Oasis" title="Kharga Oasis">Kharga Oasis</a> is one that has been extensively studied. There is evidence that as early as the second half of the 5th century BCE water brought in qanats was being used. The qanats were excavated through water-bearing sandstone rock, which seeps into the channel, with water collected in a basin behind a small dam at the end. The width is approximately 60&nbsp;cm (24&nbsp;in), but the height ranges from 5 to 9 meters; it is likely that the qanat was deepened to enhance seepage when the water table dropped (as is also seen in Iran). From there the water was used to irrigate fields.<sup id="cite_ref-Smith_22-9"><a href="#cite_note-Smith-22">[22]</a></sup><sup id="cite_ref-Wuttman_28-0"><a href="#cite_note-Wuttman-28">[28]</a></sup>
</p><p>There is another instructive structure located at the Kharga oasis. A well that apparently dried up was improved by driving a side shaft through the easily penetrated sandstone (presumably in the direction of greatest water seepage) into the hill of Ayn-Manâwîr to allow collection of additional water. After this side shaft had been extended, another vertical shaft was driven to intersect the side shaft. Side chambers were built, and holes bored into the rock—presumably at points where water seeped from the rocks—are evident.<sup id="cite_ref-Wuttman_28-1"><a href="#cite_note-Wuttman-28">[28]</a></sup>
</p>
<h4><span id="Libya">Libya</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=19" title="Edit section: Libya"><span>edit</span></a><span>]</span></span></h4>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Foggara_01.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Foggara_01.jpg/220px-Foggara_01.jpg" decoding="async" width="220" height="165" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Foggara_01.jpg/330px-Foggara_01.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Foggara_01.jpg/440px-Foggara_01.jpg 2x" data-file-width="1280" data-file-height="960"></a><figcaption>Exit of a <i>foggara</i> in Libya</figcaption></figure>
<p><a href="https://en.wikipedia.org/wiki/David_Mattingly_(author)" title="David Mattingly (author)">David Mattingly</a> reports foggara extending for hundreds of miles in the <a href="https://en.wikipedia.org/wiki/Garamantes" title="Garamantes">Garamantes</a> area near <a href="https://en.wikipedia.org/wiki/Germa" title="Germa">Germa</a> in <a href="https://en.wikipedia.org/wiki/Libya" title="Libya">Libya</a>: "The channels were generally very narrow – less than 2 feet wide and 5 high – but some were several miles long, and in total some 600 foggara extended for hundreds of miles underground. The channels were dug out and maintained using a series of regularly spaced vertical shafts, one every 30 feet or so, 100,000 in total, averaging 30 feet in depth, but sometimes reaching 130."<sup id="cite_ref-29"><a href="#cite_note-29">[29]</a></sup>
</p>
<h4><span id="Morocco">Morocco</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=20" title="Edit section: Morocco"><span>edit</span></a><span>]</span></span></h4>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:BASA-3K-7-350-39-Water.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/BASA-3K-7-350-39-Water.jpg/220px-BASA-3K-7-350-39-Water.jpg" decoding="async" width="220" height="244" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/BASA-3K-7-350-39-Water.jpg/330px-BASA-3K-7-350-39-Water.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/BASA-3K-7-350-39-Water.jpg/440px-BASA-3K-7-350-39-Water.jpg 2x" data-file-width="3865" data-file-height="4292"></a><figcaption>Irrigation cisterns (<i>sharij</i>) at Figuig date palm oasis in Morocco (1913)</figcaption></figure>
<p>In southern Morocco, the qanat (locally <i>khettara</i>) is also used. On the margins of the Sahara Desert, the isolated oases of the <a href="https://en.wikipedia.org/wiki/Draa_River" title="Draa River">Draa River</a> valley and Tafilalt have relied on qanat water for irrigation since the late 14th century. In Marrakech and the Haouz plain, the qanats have been abandoned since the early 1970s, having dried up. In the Tafilaft area, half of the 400 khettaras are still in use. The Hassan Adahkil Dam's impact on local water tables is said to be one of the many reasons for the loss of half of the khettara.<sup id="cite_ref-water_30-0"><a href="#cite_note-water-30">[30]</a></sup>
</p><p>The black berbers (<i><a href="https://en.wikipedia.org/wiki/Haratin" title="Haratin">haratin</a></i>) of the south were the hereditary class of qanat diggers in Morocco who build and repair these systems. Their work was hazardous.<sup id="cite_ref-Nair_5-1"><a href="#cite_note-Nair-5">[5]</a></sup>
</p>
<h4><span id="Tunisia">Tunisia</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=21" title="Edit section: Tunisia"><span>edit</span></a><span>]</span></span></h4>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:At_Sfax,_showing_how_the_rainwater_was_gathered.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/At_Sfax%2C_showing_how_the_rainwater_was_gathered.jpg/220px-At_Sfax%2C_showing_how_the_rainwater_was_gathered.jpg" decoding="async" width="220" height="175" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/At_Sfax%2C_showing_how_the_rainwater_was_gathered.jpg/330px-At_Sfax%2C_showing_how_the_rainwater_was_gathered.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/At_Sfax%2C_showing_how_the_rainwater_was_gathered.jpg/440px-At_Sfax%2C_showing_how_the_rainwater_was_gathered.jpg 2x" data-file-width="2237" data-file-height="1777"></a><figcaption>At Sfax, showing how the rainwater was gathered (1918)</figcaption></figure>
<p>The foggara water management system in Tunisia, used to create oases, is similar to that of the Iranian qanat. The foggara is dug into the foothills of a fairly steep mountain range such as the eastern ranges of the <a href="https://en.wikipedia.org/wiki/Atlas_mountains" title="Atlas mountains">Atlas mountains</a>. Rainfall in the mountains enters the aquifer and moves toward the Saharan region to the south. The foggara, 1 to 3&nbsp;km (0.62 to 1.9&nbsp;mi) in length, penetrates the aquifer and collects water. Families maintain the foggara and own the land it irrigates over a ten-meter width, with length reckoned by the size of plot that the available water will irrigate.<sup id="cite_ref-31"><a href="#cite_note-31">[31]</a></sup>
</p>
<h3><span id="Asia">Asia</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=22" title="Edit section: Asia"><span>edit</span></a><span>]</span></span></h3>
<h4><span id="Afghanistan">Afghanistan</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=23" title="Edit section: Afghanistan"><span>edit</span></a><span>]</span></span></h4>
<p>The Qanats are called Kariz in <a href="https://en.wikipedia.org/wiki/Dari_(Persian)" title="Dari (Persian)">Dari (Persian)</a> and <a href="https://en.wikipedia.org/wiki/Pashto_language" title="Pashto language">Pashto</a> and have been in use since the pre-Islamic period. It is estimated that more than 9,370 Karizes were in use in the 20th century. The oldest <i>functional</i> Kariz which is more than 300 years old and 8 kilometers long is located in <a href="https://en.wikipedia.org/wiki/Wardak_province" title="Wardak province">Wardak province</a> and is still providing water to nearly 3000 people.<sup id="cite_ref-32"><a href="#cite_note-32">[32]</a></sup> <a href="https://en.wikipedia.org/wiki/Soviet%E2%80%93Afghan_War" title="Soviet–Afghan War">40 years of war</a> destroyed a number of these ancient structures.<sup id="cite_ref-33"><a href="#cite_note-33">[33]</a></sup> In these troubled times maintenance has not always been possible. To add to the troubles, as of 2008 the cost of labour has become very high and maintaining the Kariz structures is no longer possible.<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Accuracy_dispute#Disputed_statement" title="Wikipedia:Accuracy dispute"><span title="The material near this tag is possibly inaccurate or nonfactual. (April 2009)">dubious</span></a> <span> – <a href="https://en.wikipedia.org/wiki/Talk:Qanat#Dubious" title="Talk:Qanat">discuss</a></span></i>]</sup> Lack of skilled artisans who have the traditional knowledge also poses difficulties. A number of the large farmers are abandoning their Kariz which has been in their families sometimes for centuries, and moving to <a href="https://en.wikipedia.org/wiki/Tube_well" title="Tube well">tube</a> and dug wells backed by diesel pumps.<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (April 2009)">citation needed</span></a></i>]</sup>
</p><p>However, the government of Afghanistan was aware of the importance of these structures and all efforts were made to repair, reconstruct and maintain (through the community) the kariz.<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (April 2009)">citation needed</span></a></i>]</sup> The Ministry of Rural Rehabilitation and Development along with National and International NGOs made the effort.
</p><p>There were still functional qanat systems in 2009. <a href="https://en.wikipedia.org/wiki/United_States_Army" title="United States Army">American forces</a> were reported to have unintentionally destroyed some of the channels during expansion of a military base, creating tensions between them and the local community.<sup id="cite_ref-34"><a href="#cite_note-34">[34]</a></sup> Some of these tunnels were used to store supplies, and to move men and equipment underground.<sup id="cite_ref-35"><a href="#cite_note-35">[35]</a></sup>
</p>
<h4><span id="Armenia">Armenia</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=24" title="Edit section: Armenia"><span>edit</span></a><span>]</span></span></h4>
<p>Qanats have been preserved in <a href="https://en.wikipedia.org/wiki/Armenia" title="Armenia">Armenia</a> in the community of <a href="https://en.wikipedia.org/wiki/Shvanidzor" title="Shvanidzor">Shvanidzor</a>, in the southern province of <a href="https://en.wikipedia.org/wiki/Syunik_Region" title="Syunik Region">Syunik</a>, bordering with Iran. Qanats are named <i>kahrezes</i> in Armenian. There are 5 kahrezes in Shvanidzor. Four of them were constructed in XII-XIVc, even before the village was founded. The fifth kahrez was constructed in 2005. Potable water runs through I, II and V kahrezs. Kahrez III and IV are in quite poor condition. In the summer, especially in July and August, the amount of water reaches its minimum, creating a critical situation in the water supply system. Still, kahrezes are the main source of potable and irrigation water for the community.
</p>
<h4><span id="Azerbaijan">Azerbaijan</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=25" title="Edit section: Azerbaijan"><span>edit</span></a><span>]</span></span></h4>
<p>The territory of <a href="https://en.wikipedia.org/wiki/Azerbaijan" title="Azerbaijan">Azerbaijan</a> was home to numerous kahrizes many centuries ago. Archaeological findings suggest that long before the ninth century CE, kahrizes by which the inhabitants brought potable and irrigation water to their settlements were in use in Azerbaijan. Traditionally, kahrizes were built and maintained by a group of masons called 'Kankans' with manual labour. The profession was handed down from father to son.
</p><p>It is estimated that until the 20th century, nearly 1500 kahrizes, of which as many as 400 were in the <a href="https://en.wikipedia.org/wiki/Nakhichevan_Autonomous_Republic" title="Nakhichevan Autonomous Republic">Nakhichevan Autonomous Republic</a>, existed in Azerbaijan. However, following the introduction of electric and fuel-pumped wells during Soviet times, kahrizes were neglected.
</p><p>Today, it is estimated that 800 are still functioning in Azerbaijan. These operational kahrizes are key to the life of many communities.
</p><p>In 1999, upon the request of the communities in <a href="https://en.wikipedia.org/wiki/Nakhichivan_Autonomous_Republic" title="Nakhichivan Autonomous Republic">Nakhichevan</a>, the International Organization for Migration began implementing a pilot programme to rehabilitate the kahrizes. By 2018 IOM rehabilitated more than 163 kahrizes with funds from the <a href="https://en.wikipedia.org/wiki/United_Nations_Development_Programme" title="United Nations Development Programme">United Nations Development Programme</a> (UNDP), <a href="https://en.wikipedia.org/wiki/European_Commission" title="European Commission">European Commission</a> (EC), <a href="https://en.wikipedia.org/wiki/Canadian_International_Development_Agency" title="Canadian International Development Agency">Canadian International Development Agency</a> (CIDA), <a href="https://en.wikipedia.org/wiki/Swiss_Agency_for_Development_and_Cooperation" title="Swiss Agency for Development and Cooperation">Swiss Agency for Development and Cooperation</a> (SDC) and the <a href="https://en.wikipedia.org/wiki/Bureau_of_Population,_Refugees,_and_Migration" title="Bureau of Population, Refugees, and Migration">Bureau of Population, Refugees, and Migration, US State Department</a> (BPRM) and the self-contribution of the local communities.
</p><p>In 2010, IOM began a kahriz rehabilitation project with funds from the <a href="https://en.wikipedia.org/wiki/Korea_International_Cooperation_Agency" title="Korea International Cooperation Agency">Korea International Cooperation Agency</a> (KOICA). During the First Phase of the action which lasted until January 2013, a total of 20 kahrizes in the mainland of Azerbaijan have been renovated. In June 2018, the Second Phase has been launched and by 2022, IOM and KOICA aim to renovate fully a total of 40 kahrizes.
</p>
<h4><span id="China">China</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=26" title="Edit section: China"><span>edit</span></a><span>]</span></span></h4>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Turpan-karez-museo-d02.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Turpan-karez-museo-d02.jpg/220px-Turpan-karez-museo-d02.jpg" decoding="async" width="220" height="165" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Turpan-karez-museo-d02.jpg/330px-Turpan-karez-museo-d02.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Turpan-karez-museo-d02.jpg/440px-Turpan-karez-museo-d02.jpg 2x" data-file-width="2048" data-file-height="1536"></a><figcaption><a href="https://en.wikipedia.org/wiki/Turfan_water_system" title="Turfan water system">Karez</a> gallery near <a href="https://en.wikipedia.org/wiki/Turpan" title="Turpan">Turpan</a>, <a href="https://en.wikipedia.org/wiki/Xinjiang" title="Xinjiang">Xinjiang</a>, China</figcaption></figure>

<p>The oasis of <a href="https://en.wikipedia.org/wiki/Turpan" title="Turpan">Turpan</a>, in the deserts of <a href="https://en.wikipedia.org/wiki/Xinjiang" title="Xinjiang">Xinjiang</a> in northwestern China, uses water provided by qanat (locally called <i>karez</i>). The number of karez systems in the area is slightly below 1,000, and the total length of the canals is about 5,000 kilometers.<sup id="cite_ref-36"><a href="#cite_note-36">[36]</a></sup>
</p><p>Turpan has long been the center of a fertile oasis and an important trade center along the <a href="https://en.wikipedia.org/wiki/Northern_Silk_Road" title="Northern Silk Road">Northern Silk Road</a>, at which time it was adjacent to the kingdoms of <a href="https://en.wikipedia.org/wiki/Korla" title="Korla">Korla</a> and <a href="https://en.wikipedia.org/wiki/Karashahr" title="Karashahr">Karashahr</a> to the southwest. The historical record of the karez extends back to the <a href="https://en.wikipedia.org/wiki/Han_dynasty" title="Han dynasty">Han dynasty</a>. The Turfan Water Museum is a <a href="https://en.wikipedia.org/wiki/Protected_Areas_of_the_People%27s_Republic_of_China" title="Protected Areas of the People's Republic of China">Protected Area of the People's Republic of China</a> because of the importance of the Turpan karez water system to the history of the area.
</p>
<h4><span id="Iran">Iran</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=27" title="Edit section: Iran"><span>edit</span></a><span>]</span></span></h4>

<p>In the middle of the twentieth century, an estimated 50,000 <i>qanats</i> were in use in Iran,<sup id="cite_ref-Kheirabadi_2-13"><a href="#cite_note-Kheirabadi-2">[2]</a></sup> each commissioned and maintained by local users. Of these, only 37,000 remain in use as of 2015.
</p><p>One of the oldest and largest known qanats is in the Iranian city of <a href="https://en.wikipedia.org/wiki/Gonabad" title="Gonabad">Gonabad</a>, and after 2,700 years still provides drinking and agricultural water to nearly 40,000 people. Its main <a href="https://en.wikipedia.org/wiki/Water_well" title="Water well">well</a> depth is more than 360 meters and its length is 45 kilometers. <a href="https://en.wikipedia.org/wiki/Yazd" title="Yazd">Yazd</a>, <a href="https://en.wikipedia.org/wiki/Khorasan_(Province)" title="Khorasan (Province)">Khorasan</a> and <a href="https://en.wikipedia.org/wiki/Kerman" title="Kerman">Kerman</a> are zones known for their dependence on an extensive system of <i>qanats</i>.
</p><p>In 2016, <a href="https://en.wikipedia.org/wiki/UNESCO" title="UNESCO">UNESCO</a> inscribed the Persian Qanat as a <a href="https://en.wikipedia.org/wiki/World_Heritage_Sites" title="World Heritage Sites">World Heritage Site</a>, listing the following eleven qanats: <a href="https://en.wikipedia.org/wiki/Qanats_of_Gonabad" title="Qanats of Gonabad">Qasebeh Qanat</a>, <a href="https://en.wikipedia.org/wiki/Qanats_of_Baladeh_Ferdows" title="Qanats of Baladeh Ferdows">Qanat of Baladeh</a>, Qanat of Zarch, Hasan Abad-e Moshir Qanat, Ebrāhim Ābād Qanat in Markazi Province, Qanat of Vazvān in Esfahan Province, Mozd Ābād Qanat in Esfahan Province, Qanat of the Moon in Esfahan Province, Qanat of Gowhar-riz in Kerman Province, Jupār – Ghāsem Ābād Qanat in Kerman Province, and Akbar Ābād Qanat in Kerman Province.<sup id="cite_ref-ICOMOS_2016_37-0"><a href="#cite_note-ICOMOS_2016-37">[37]</a></sup><sup id="cite_ref-UNESCO_ICHHT_2015_38-0"><a href="#cite_note-UNESCO_ICHHT_2015-38">[38]</a></sup> Since 2002, UNESCO's International Hydrological Programme (IHP) Intergovernmental Council began investigating the possibility of an international qanat research center to be located in Yazd, Iran.<sup id="cite_ref-39"><a href="#cite_note-39">[39]</a></sup>
</p><p>The <a href="https://en.wikipedia.org/wiki/Qanats_of_Gonabad" title="Qanats of Gonabad">Qanats of Gonabad</a>, also called kariz <a href="https://en.wikipedia.org/wiki/Kai_Khosrow" title="Kai Khosrow">Kai Khosrow</a>, is one of the oldest and largest qanats in the world built between 700&nbsp;BCE to 500&nbsp;BCE. It is located at <a href="https://en.wikipedia.org/wiki/Gonabad" title="Gonabad">Gonabad</a>, <a href="https://en.wikipedia.org/wiki/Razavi_Khorasan_Province" title="Razavi Khorasan Province">Razavi Khorasan Province</a>. This property contains 427 water wells with total length of 33,113&nbsp;m (20.575&nbsp;mi).<sup id="cite_ref-UNESCO_list_40-0"><a href="#cite_note-UNESCO_list-40">[40]</a></sup><sup id="cite_ref-UNESCO_Persian_Qanat_41-0"><a href="#cite_note-UNESCO_Persian_Qanat-41">[41]</a></sup>
</p>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Ancient_water_clock_used_in_qanat_of_gonabad_2500_years_ago.JPG"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Ancient_water_clock_used_in_qanat_of_gonabad_2500_years_ago.JPG/220px-Ancient_water_clock_used_in_qanat_of_gonabad_2500_years_ago.JPG" decoding="async" width="220" height="165" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Ancient_water_clock_used_in_qanat_of_gonabad_2500_years_ago.JPG/330px-Ancient_water_clock_used_in_qanat_of_gonabad_2500_years_ago.JPG 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Ancient_water_clock_used_in_qanat_of_gonabad_2500_years_ago.JPG/440px-Ancient_water_clock_used_in_qanat_of_gonabad_2500_years_ago.JPG 2x" data-file-width="3264" data-file-height="2448"></a><figcaption>Ancient Persian <a href="https://en.wikipedia.org/wiki/Water_clock" title="Water clock">water clock</a></figcaption></figure>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Water_clock_zibad.JPG"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Water_clock_zibad.JPG/220px-Water_clock_zibad.JPG" decoding="async" width="220" height="165" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Water_clock_zibad.JPG/330px-Water_clock_zibad.JPG 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Water_clock_zibad.JPG/440px-Water_clock_zibad.JPG 2x" data-file-width="3072" data-file-height="2304"></a><figcaption>Ancient Persian clock in <a href="https://en.wikipedia.org/wiki/Qanats_of_Gonabad" title="Qanats of Gonabad">Qanats of Gonabad</a> Zibad</figcaption></figure>
<p>According to <a href="https://en.wikipedia.org/wiki/Callisthenes" title="Callisthenes">Callisthenes</a>, the Persians were using <a href="https://en.wikipedia.org/wiki/Water_clock" title="Water clock">water clocks</a> in 328&nbsp;BCE to ensure a just and exact distribution of water from qanats to their shareholders for agricultural irrigation. The use of water clocks in Iran, especially in Qanats of Gonabad and kariz <a href="https://en.wikipedia.org/wiki/Zibad" title="Zibad">Zibad</a>, dates back to 500&nbsp;BCE. Later they were also used to determine the exact holy days of pre-Islamic religions, such as the <i><a href="https://en.wikipedia.org/wiki/Nowruz" title="Nowruz">Nowruz</a></i>, <i>Chelah</i>, or <i><a href="https://en.wikipedia.org/wiki/Yald%C4%81" title="Yaldā">Yaldā</a></i> – the shortest, longest, and equal-length days and nights of the years.<sup id="cite_ref-Qanat_42-0"><a href="#cite_note-Qanat-42">[42]</a></sup>
The <a href="https://en.wikipedia.org/wiki/Water_clock" title="Water clock">Water clock</a>, or <i>Fenjaan</i>, was the most accurate and commonly used timekeeping device for calculating the amount or the time that a farmer must take water from the Qanats of Gonabad until it was replaced by more accurate current clocks.<sup id="cite_ref-amordadnews.com_43-0"><a href="#cite_note-amordadnews.com-43">[43]</a></sup> Many of the Iranian qanats bear some characteristics which allow us to call them feat of engineering, considering the intricate techniques used in their construction. The eastern and central regions of Iran hold the most qanats due to low precipitation and lack of permanent surface streams, whereas a small number of qanats can be found in the northern and western parts which receive more rainfall and enjoy some permanent rivers. Respectively the provinces Khorasan Razavi, Southern Khorasan, Isfahan and Yazd accommodate the most qanats, but from the viewpoint of water discharge the provinces Isfahan, Khorasan Razavi, Fars and Kerman are ranked first to fourth.
</p><p>Henri Golbot explored the genesis of the qanat in his 1979 publication, <span title="French-language text"><i lang="fr">Les Qanats. Une technique d'acquisition de l'eau</i></span> (The Qanats. a Technique for Obtaining Water),<sup id="cite_ref-Golbot_1979_44-0"><a href="#cite_note-Golbot_1979-44">[44]</a></sup> He argues that the ancient Iranians made use of the water that the miners wished to get rid of it, and founded a basic system named qanat or Kariz to supply the required water to their farm lands. According to Goblot, this innovation took place in the northwest of the present Iran somewhere bordering Turkey and later was introduced to the neighboring Zagros Mountains.
</p><p>According to an inscription left by Sargon II, the king of Assyria, In 714&nbsp;BCE he invaded the city of Uhlu lying in the northwest of Uroomiye lake that lay in the territory of Urartu empire, and then he noticed that the occupied area enjoyed a very rich vegetation even though there was no river running across it. So he managed to discover the reason why the area could stay green, and realized that there were some qanats behind the matter. In fact it was Ursa, the king of the region, who had rescued the people from thirst and turned Uhlu into a prosperous and green land. Goblot believes that the influence of the Medeans and Achaemenids made the technology of qanat spread from Urartu (in the western north of Iran and near the present border between Iran and Turkey) to all over the Iranian plateau.
It was an Achaemenid ruling that in case someone succeeded in constructing a qanat and bringing groundwater to the surface in order to cultivate land, or in renovating an abandoned qanat, the tax he was supposed to pay the government would be waived not only for him but also for his successors for up to 5 generations. During this period, the technology of qanat was in its heyday and it even spread to other countries. For example, following Darius's order, Silaks the naval commander of the Persian army and Khenombiz the royal architect managed to construct a qanat in the oasis of Kharagha in Egypt. Beadnell believes that qanat construction dates back to two distinct periods: they were first constructed by the Persianse, and later the Romans dug some other qanats during their reign in Egypt from 30&nbsp;BCE to 395&nbsp;CE. The magnificent temple built in this area during Darius's reign shows that there was a considerable population depending on the water of qanats. Ragerz has estimated this population to be 10,000 people. The most reliable document confirming the existence of qanats at this time was written by Polybius who states that: "the streams are running down from everywhere at the base of Alborz mountain, and people have transferred too much water from a long distance through some subterranean canals by spending much cost and labor."
</p><p>During the Seleucid Era, which began after the occupation of Iran by Alexander, it seems that the qanats were abandoned.
</p><p>In terms of the situation of qanats during this era, some historical records have been found. In a study by Russian orientalist scholars it has been mentioned that: the Persians used the side branches of rivers, mountain springs, wells and qanats to supply water. The subterranean galleries excavated to obtain groundwater were named as qanat. These galleries were linked to the surface through some vertical shafts which were sunk in order to get access to the gallery to repair it if necessary.
</p><p>According to the historical records, the Parthian kings did not care about the qanats the way the Achaemenid kings and even Sassanid kings did. As an instance, Arsac III, one of the Parthian kings, destroyed some qanats in order to make it difficult for Seleucid Antiochus to advance further while fighting him. The historical records from this time indicate a perfect regulation on both water distribution and farmlands. All the water rights were recorded in a special document which was referred to in case of any transaction. The lists of farmlands – whether private or governmental – were kept at the tax department. During this period there were some official rulings on qanats, streams, construction of dam, operation and maintenance of qanats, etc. The government proceeded to repair or dredge the qanats that were abandoned or destroyed for any reason, and construct the new qanats if necessary. A document written in the Pahlavi language pointed out the important role of qanats in developing the cities at that time. In Iran, the advent of Islam, which coincided with the overthrow of the Sassanid dynasty, brought about a profound change in religious, political, social and cultural structures. But the qanats stayed intact, because the economic infrastructure, including qanats was of great importance to the Arabs. As an instance, M. Lombard reports that the Moslem clerics who lived during Abbasid period, such as Abooyoosef Ya’qoob (died 798&nbsp;CE) stipulated that whoever can bring water to the idle lands in order to cultivate, his tax would be waived and he would be entitled to the lands cultivated. Therefore, this policy did not differ from that of the Achaemenids in not getting any tax from the people who revived abandoned lands. The Arabs' supportive policy on qanats was so successful that even the holy city of Mecca gained a qanat too. The Persian historian Hamdollah Mostowfi writes: "Zobeyde Khatoon (Haroon al-Rashid's wife) constructed a qanat in Mecca. After the time of Haroon al-Rashid, during the caliph Moghtader's reign this qanat fell into decay, but he rehabilitated it, and the qanat was rehabilitated again after it collapsed during the reign of two other caliphs named Ghaem and Naser. After the era of the caliphs this qanat completely fell into ruin because the desert sand filled it up, but later Amir Choopan repaired the qanat and made it flow again in Mecca."<sup>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (December 2018)">citation needed</span></a></i>]</sup>
</p><p>There are also other historical texts proving that the Abbasids were concerned about qanats. For example, according to the "Incidents of Abdollah bin Tahir's Time" written by Gardizi, in 830&nbsp;CE a terrible earthquake struck the town of Forghaneh and reduced many homes to rubble. The inhabitants of Neyshaboor used to come to Abdollah bin Tahir in order to request him to intervene, for they fought over their qanats and found the relevant instruction or law on qanat as a solution neither in the prophet's quotations nor in the clerics' writings. So Abdollah bin Tahir managed to bring together all the clergymen from throughout Khorasan and Iraq to compile a book entitled <i>Alghani</i> (The Book of Qanat). This book collected all the rulings on qanats which could be of use to whoever wanted to judge a dispute over this issue. Gardizi added that this book was still applicable to his time, and everyone made references to this book.
</p><p>One can deduce from these facts that during the above-mentioned period the number of qanats was so considerable that the authorities were prompted to put together some legal instructions concerning them. Also it shows that from the ninth to eleventh centuries the qanats that were the hub of the agricultural systems were also of interest to the government. Apart from The Book of Alghani, which is considered as a law booklet focusing on qanat-related rulings based on Islamic principles, there is another book about groundwater written by Karaji in 1010. This book, entitled <i>Extraction of Hidden Waters</i>, examines just the technical issues associated with the qanat and tries to answer the common questions such as how to construct and repair a qanat, how to find a groundwater supply, how to do leveling, etc.. Some of the innovations described in this book were introduced for the first time in the history of hydrogeology, and some of its technical methods are still valid and can be applied in qanat construction. The content of this book implies that its writer (Karaji) did not have any idea that there was another book on qanats compiled by the clergymen.
</p><p>There are some records dating back to that time, signifying their concern about the legal vicinity of qanats. For example, Mohammad bin Hasan quotes Aboo-Hanifeh that in case someone constructs a qanat in abandoned land, someone else can dig another qanat in the same land on the condition that the second qanat is 500 zera’ (375 meters) away from the first one.
</p><p>Ms. Lambton quotes Moeen al-din Esfarzi who wrote the book <i>Rowzat al-Jannat</i> (the garden of paradise) that Abdollah bin Tahir (from the Taherian dynasty) and Ismaeel Ahmed Samani (from the Samani dynasty) had several qanats constructed in Neyshaboor. Later, in the 11th century, a writer named Nasir Khosrow acknowledged all those qanats with the following words: "Neyshaboor is located in a vast plain at a distance of 40 Farsang (≈240 km) from Serakhs and 70 Farsang (≈420 km) from Mary (Marv) ... all the qanats of this city run underground, and it is said that an Arab who was offended by the people of Neyshaboor has complained that; what a beautiful city Neyshaboor could have become if its qanats would have flowed on the ground surface and instead its people would have been underground." These documents all certify the importance of qanats during the Islamic history within the cultural territories of Iran.
</p>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:%DA%A9%D8%A7%D8%B1%DB%8C%D8%B2_%DA%AF%D9%86%D8%A7%D8%A8%D8%A7%D8%AF.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/32/%DA%A9%D8%A7%D8%B1%DB%8C%D8%B2_%DA%AF%D9%86%D8%A7%D8%A8%D8%A7%D8%AF.jpg/220px-%DA%A9%D8%A7%D8%B1%DB%8C%D8%B2_%DA%AF%D9%86%D8%A7%D8%A8%D8%A7%D8%AF.jpg" decoding="async" width="220" height="220" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/3/32/%DA%A9%D8%A7%D8%B1%DB%8C%D8%B2_%DA%AF%D9%86%D8%A7%D8%A8%D8%A7%D8%AF.jpg/330px-%DA%A9%D8%A7%D8%B1%DB%8C%D8%B2_%DA%AF%D9%86%D8%A7%D8%A8%D8%A7%D8%AF.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/3/32/%DA%A9%D8%A7%D8%B1%DB%8C%D8%B2_%DA%AF%D9%86%D8%A7%D8%A8%D8%A7%D8%AF.jpg/440px-%DA%A9%D8%A7%D8%B1%DB%8C%D8%B2_%DA%AF%D9%86%D8%A7%D8%A8%D8%A7%D8%AF.jpg 2x" data-file-width="1280" data-file-height="1280"></a><figcaption>Kariz Gonabad Iran</figcaption></figure>
<p>In the 13th century, the invasion of Iran by Mongolian tribes reduced many qanats and irrigation systems to ruin, and many qanats were deserted and dried up. Later, in the era of the Ilkhanid dynasty especially at the time of Ghazan Khan and his Persian minister Rashid al-Din Fazl-Allah, some measures were taken to revive the qanats and irrigation systems. There is a 14th-century book entitled <i>Al-Vaghfiya Al-Rashidiya</i> (Rashid's Deeds of Endowment) that names all the properties located in Yazd, Shiraz, Maraghe, Tabriz, Isfahan and Mowsel that Rashid Fazl-Allah donated to the public or religious places. This book mentions many qanats running at that time and irrigating a considerable area of farmland. At the same time, another book, entitled <i>Jame’ al-Kheyrat</i>, was written by Seyyed Rokn al-Din on the same subject as Rashid's book. In this book, Seyyed Rokn al-Din names the properties he donated in the region of Yazd. These deeds of endowment indicate that much attention was given to the qanats during the reign of Ilkhanids, but it is attributable to their Persian ministers, who influenced them.<sup id="cite_ref-Qanat_42-1"><a href="#cite_note-Qanat-42">[42]</a></sup>
</p><p>In the years 1984–1985 the ministry of energy took a census of 28,038 qanats whose total discharge was 9 billion cubic meters. In the years 1992–1993 the census of 28,054 qanats showed a total discharge of 10 billion cubic meters. 10 years later in 2002–2003 the number of the qanats was reported as 33,691 with a total discharge of 8 billion cubic meters.
</p><p>In the restricted regions there are 317,225 wells, qanats and springs that discharge 36,719 million cubic meters water a year, out of which 3,409 million cubic meters is surplus to the aquifer capacity. in 2005, in the country as a whole, there were 130,008 deep wells with a discharge of 31,403 million cubic meter, 33,8041 semi deep wells with a discharge of 13,491 million cubic meters, 34,355 qanats with a discharge of 8,212 million cubic meters, and 55,912 natural springs with a discharge of 21,240 million cubic meters.<sup id="cite_ref-45"><a href="#cite_note-45">[45]</a></sup>
</p><p>In 2021, a British trained architect Margot Krasojević designed a luxury eco hotel based on principles of qanat and windcatchers in a desert in Iran, called <a rel="nofollow" href="https://www.greenprophet.com/2022/05/qanat-eco-hotel-iran-desert/">Qanat</a>. The project has not yet been built but offers ideas for applying ancient technology to modern-day cooling problems in the desert.
</p>
<h4><span id="Iraq">Iraq</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=28" title="Edit section: Iraq"><span>edit</span></a><span>]</span></span></h4>
<p>A survey of qanat systems in the Kurdistan region of Iraq conducted by the Department of Geography at <a href="https://en.wikipedia.org/wiki/Oklahoma_State_University" title="Oklahoma State University">Oklahoma State University</a> (US) on behalf of <a href="https://en.wikipedia.org/wiki/UNESCO" title="UNESCO">UNESCO</a> in 2009 found that out of 683 karez systems, some 380 were still active in 2004, but only 116 in 2009. Reasons for the decline of qanats include "abandonment and neglect" prior to 2004, "excessive pumping from wells" and, since 2005, drought. Water shortages are said to have forced,  since 2005, over 100,000 people who depended for their livelihoods on karez systems to leave their homes.<sup id="cite_ref-The_Hindu_46-0"><a href="#cite_note-The_Hindu-46">[46]</a></sup> The study says that a single karez has the potential to provide enough household water for nearly 9,000 individuals and irrigate over 200 hectares of farmland. UNESCO and the government of Iraq plan to rehabilitate the karez through a Karez Initiative for Community Revitalization to be launched in 2010. Most of the karez are in <a href="https://en.wikipedia.org/wiki/Sulaymaniyah_Governorate" title="Sulaymaniyah Governorate">Sulaymaniyah Governorate</a> (84%). A large number are also found in <a href="https://en.wikipedia.org/wiki/Erbil_Governorate" title="Erbil Governorate">Erbil Governorate</a> (13%), especially on the broad plain around and in Erbil city.<sup id="cite_ref-47"><a href="#cite_note-47">[47]</a></sup>
</p>
<h4><span id="India">India</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=29" title="Edit section: India"><span>edit</span></a><span>]</span></span></h4>
<p>In India, there are karez (qanat) systems are located at Bidar, Bijapur, Burhanpur "(Kundi Bhandara)" and Aurgangabad. The Bidar karez systems were probably the first one to have ever been dug in India. It dates to the Bahmani period. Bidar has three karez systems as per Gulam Yazdani's documentation.<sup id="cite_ref-48"><a href="#cite_note-48">[48]</a></sup> Other than Naubad there are two more karez systems in Bidar, "Shukla Theerth" and "Jamna Mori". The Shukla theerth is the longest karez system in Bidar. The mother well of this karez has been discovered by near Gornalli Kere, a historic embankment. The third system called Jamna mori is more of a distribution system within the old city area with many channels crisscrossing the city lanes.<sup id="cite_ref-49"><a href="#cite_note-49">[49]</a></sup> Restoration efforts commenced in 2014, with the desilting and excavation of the Naubad Karez in 2015, uncovering 27 vertical shafts linked to the Karez. The rejuvenation of the system has had a significant impact on the water-deficit city of Bidar. A seventh line of the system was discovered in 2016 during a sewage line excavation.<sup id="cite_ref-The_Hindu_46-1"><a href="#cite_note-The_Hindu-46">[46]</a></sup>
</p><p>Valliyil Govindankutty, Assistant Professor in Geography at Government College Chittur, was responsible for rediscovery and mapping of the Naubad Karez System in 2012-2013. Later in 2014-2016 team YUVAA joined Govindankutty to help uncover Other two Karez Systems in Bidar.<sup id="cite_ref-50"><a href="#cite_note-50">[50]</a></sup><sup id="cite_ref-51"><a href="#cite_note-51">[51]</a></sup> Detailed documentation of the Naubad karez system was done in August 2013 and a report was submitted to District Administration of Bidar that found several new facts. The research has led to the initiation of cleaning the debris and collapsed sections paving the way to its rejuvenation. The cleaning of karez has led to bringing water to higher areas of the plateau, and it has in turn recharged the wells in the vicinity.
</p><p>The Bijapur karez system is much more complicated. A reveals that it has surface water and groundwater connections. The Bijapur karez is a network of shallow masonry aqueducts, terracotta/ceramic pipes, embankments and reservoirs, tanks etc. All weave together a network to ensure water reaches the old city. The system starts at Torwi and extends as shallow aqueducts and further as pipes; further it becomes deeper from the Sainik school area onward which exists as a tunnel dug through the geology. The system can be clearly traced up to Ibrahim Roja.
</p><p>In Aurangabad the karez systems are called nahars. These are shallow aqueducts running through the city. There are 14 aqueducts in Aurangabad. The Nahar-i-Ambari is the oldest and longest. Its again a combination of shallow aqueducts, open channels, pipes, cisterns, etc. The source of water is a surface water body. The karez has been constructed right below the bed of lake. The lake water seeps through the soil into the Karez Gallery.
</p><p>In Burhanpur the karez is called "Kundi-Bhandara", sometimes wrongly referred to as"Khuni Bhandara". The system is approx 6&nbsp;km long starts from the alluvial fans of Satpura hills in the north of the town. Unlike Bidar, Bijapur and Aurgangabad the System airvents are round in shape. Inside the Karez one could see lime depositions on the walls. The Systems ends to carry water further to palaces and public fountains through pipe line.
</p>
<h4><span id="Indonesia">Indonesia</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=30" title="Edit section: Indonesia"><span>edit</span></a><span>]</span></span></h4>
<p>It has been suggested that underground temples at <a href="https://en.wikipedia.org/w/index.php?title=Gua_Made&amp;action=edit&amp;redlink=1" title="Gua Made (page does not exist)">Gua Made</a> in <a href="https://en.wikipedia.org/wiki/Java" title="Java">Java</a> reached by shafts, in which masks of a green metal were found, originated as a qanat.<sup id="cite_ref-52"><a href="#cite_note-52">[52]</a></sup>
</p>
<h4><span id="Japan">Japan</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=31" title="Edit section: Japan"><span>edit</span></a><span>]</span></span></h4>
<p>In Japan there are several dozen qanat-like structures, locally known as 'mambo' or 'manbo', most notably in the <a href="https://en.wikipedia.org/wiki/Mie_Prefecture" title="Mie Prefecture">Mie</a> and <a href="https://en.wikipedia.org/wiki/Gifu_Prefecture" title="Gifu Prefecture">Gifu Prefectures</a>. Whereas some link their origin clearly to the Chinese karez, and therefore to the Iranian source,<sup id="cite_ref-53"><a href="#cite_note-53">[53]</a></sup> a Japanese conference in 2008 found insufficient scientific studies to evaluate the origins of the mambo.<sup id="cite_ref-54"><a href="#cite_note-54">[54]</a></sup>
</p>
<h4><span id="Jordan">Jordan</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=32" title="Edit section: Jordan"><span>edit</span></a><span>]</span></span></h4>
<p>Among the qanats built in the <a href="https://en.wikipedia.org/wiki/Roman_Empire" title="Roman Empire">Roman Empire</a>, the 94&nbsp;km (58&nbsp;mi) long <a href="https://en.wikipedia.org/wiki/Gadara_Aqueduct" title="Gadara Aqueduct">Gadara Aqueduct</a> in northern <a href="https://en.wikipedia.org/wiki/Jordan" title="Jordan">Jordan</a> was possibly the longest continuous qanat ever built.<sup id="cite_ref-Querschnitt_55-0"><a href="#cite_note-Querschnitt-55">[55]</a></sup> Partly following the course of an older <a href="https://en.wikipedia.org/wiki/Hellenistic_civilization" title="Hellenistic civilization">Hellenistic</a> aqueduct, excavation work arguably started after a visit by emperor <a href="https://en.wikipedia.org/wiki/Hadrian" title="Hadrian">Hadrian</a> in 129–130&nbsp;CE. The Gadara Aqueduct was never quite finished and was put in service only in sections.
</p>
<h4><span id="Pakistan">Pakistan</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=33" title="Edit section: Pakistan"><span>edit</span></a><span>]</span></span></h4>
<p>In Pakistan qanat irrigation system is endemic only in <a href="https://en.wikipedia.org/wiki/Balochistan_(Pakistan)" title="Balochistan (Pakistan)">Balochistan</a>. The major concentration is in the north and northwest along the Pakistan-Afghanistan border and oasis of <a href="https://en.wikipedia.org/w/index.php?title=Makoran_division&amp;action=edit&amp;redlink=1" title="Makoran division (page does not exist)">Makoran division</a>. The Karez system of the Balochistan desert is on the Tentative List for future World Heritage Sites in Pakistan.<sup id="cite_ref-56"><a href="#cite_note-56">[56]</a></sup>
</p><p>The acute shortage of water resources give water a decisive role in the regional conflicts arose in the course of history of Balochistan. Therefore, in Balochistan, the possession of water resources is more important than ownership of land itself. Hence afterward a complex system for the collection, channeling and distribution of water was developed in Balochistan. Similarly, the distribution and unbiased flow of water to different stockholders also necessitate the importance of different societal classes in Balochistan in general and particularly in Makoran. For instance, <a href="https://en.wikipedia.org/w/index.php?title=Sarrishta&amp;action=edit&amp;redlink=1" title="Sarrishta (page does not exist)">sarrishta</a> (literally, head of the chain) is responsible for administration of channel. He normally owns the largest water quota. Under sarrishta, there are several heads of owners <a href="https://en.wikipedia.org/w/index.php?title=Issadar&amp;action=edit&amp;redlink=1" title="Issadar (page does not exist)">issadar</a> who also possessed larger water quotas. The social hierarchy within Baloch society of Makoran depends upon the possession of largest quotas of water. The role of sarrishta in some cases hierarchical and passing from generations within the family and he must have the knowledge of the criteria of unbiased distribution of water among different issadar.
</p><p>The sharing of water is based on a complex indigenous system of measurement depends upon time and space particularly to the phases of moon; the hangams. Based on seasonal variations and share of water the hangams are apportioned among various owners over period of seven or fourteen days. However, in some places, instead of hangam, anna used which is based on twelve-hour period for each quota. Therefore, if a person own 16 quotas it means that he is entitled for water for eight days in high seasons and 16 days in winter when water level went down as well as expectation of winter rain (Baharga) in Makran region. The twelve-hour water quota again subdivided into several sub-fractions of local measuring scales such as tas or pad (Dr Gul Hasan Pro VC LUAWMS, 2 day National conference on Kech).
</p><p>The <a href="https://en.wikipedia.org/wiki/Chagai_District" title="Chagai District">Chagai district</a> is in the north west corner of <a href="https://en.wikipedia.org/wiki/Balochistan_(Pakistan)" title="Balochistan (Pakistan)">Balochistan</a>, Pakistan, bordering with <a href="https://en.wikipedia.org/wiki/Afghanistan" title="Afghanistan">Afghanistan</a> and Iran. Qanats, locally known as <a href="https://en.wikipedia.org/wiki/Kahn" title="Kahn">Kahn</a>, are found more broadly in this region. They are spread from <a href="https://en.wikipedia.org/w/index.php?title=Makoran_Chagai_District&amp;action=edit&amp;redlink=1" title="Makoran Chagai District (page does not exist)">Chaghai</a> district all the way up to <a href="https://en.wikipedia.org/wiki/Zhob" title="Zhob">Zhob</a> district.
</p>
<h4><span id="Syria">Syria</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=34" title="Edit section: Syria"><span>edit</span></a><span>]</span></span></h4>
<p>Qanats were found over much of Syria. The widespread installation of groundwater pumps has lowered the water table and qanat system. Qanats have gone dry and been abandoned across the country.<sup id="cite_ref-water_30-1"><a href="#cite_note-water-30">[30]</a></sup>
</p>
<h4><span id="Oman">Oman</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=35" title="Edit section: Oman"><span>edit</span></a><span>]</span></span></h4>
<p>In Oman from the Iron Age period (found in Salut, Bat and other sites) a system of underground aqueducts called '<a href="https://en.wikipedia.org/wiki/Aflaj_Irrigation_Systems_of_Oman" title="Aflaj Irrigation Systems of Oman">Falaj</a>' were constructed, a series of well-like vertical shafts, connected by gently sloping horizontal tunnels. There are three types of Falaj: Daudi (<a href="https://en.wikipedia.org/wiki/Arabic_language" title="Arabic language">Arabic</a>: <span lang="ar" dir="rtl">داوودية</span>) with underground aqueducts, Ghaili (<a href="https://en.wikipedia.org/wiki/Arabic_language" title="Arabic language">Arabic</a>: <span lang="ar" dir="rtl">الغيلية</span>) requiring a dam to collect the water, and Aini (<a href="https://en.wikipedia.org/wiki/Arabic_language" title="Arabic language">Arabic</a>: <span lang="ar" dir="rtl">العينية</span>) whose source is a water spring. These enabled large scale agriculture to flourish in a dryland environment. According to UNESCO, some 3,000 <i>aflaj</i> (plural) or <i>falaj</i> (singular), are still in use in Oman today. <a href="https://en.wikipedia.org/wiki/Nizwa" title="Nizwa">Nizwa</a>, the former <a href="https://en.wikipedia.org/wiki/Capital_(political)" title="Capital (political)">capital</a> city of <a href="https://en.wikipedia.org/wiki/Oman" title="Oman">Oman</a>, was built around a <i>falaj</i> which is in use to this day. These systems date to before the Iron Age in Oman. In July 2006, five representative examples of this irrigation system were inscribed as a <a href="https://en.wikipedia.org/wiki/World_Heritage_Site" title="World Heritage Site">World Heritage Site</a>.<sup id="cite_ref-57"><a href="#cite_note-57">[57]</a></sup>
</p>
<h4><span id="United_Arab_Emirates">United Arab Emirates</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=36" title="Edit section: United Arab Emirates"><span>edit</span></a><span>]</span></span></h4>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Falaj_at_al_ain.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Falaj_at_al_ain.jpg/170px-Falaj_at_al_ain.jpg" decoding="async" width="170" height="255" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Falaj_at_al_ain.jpg/255px-Falaj_at_al_ain.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Falaj_at_al_ain.jpg/340px-Falaj_at_al_ain.jpg 2x" data-file-width="2592" data-file-height="3888"></a><figcaption>The falaj irrigation system at <a href="https://en.wikipedia.org/wiki/Al_Ain_Oasis" title="Al Ain Oasis">Al Ain Oasis</a></figcaption></figure>
<p>The oases of the city of Al Ain (particularly <a href="https://en.wikipedia.org/wiki/Al_Ain_Oasis" title="Al Ain Oasis">Al-Ain</a>, <a href="https://en.wikipedia.org/wiki/Qattara_Oasis" title="Qattara Oasis">Al-Qattarah</a>, <a href="https://en.wikipedia.org/wiki/Al-Mutaredh_Oasis" title="Al-Mutaredh Oasis">Al-Mu'taredh</a>, <a href="https://en.wikipedia.org/wiki/Al-Jimi_Oasis" title="Al-Jimi Oasis">Al-Jimi</a>, <a href="https://en.wikipedia.org/wiki/Al-Muwaiji_Oasis" title="Al-Muwaiji Oasis">Al-Muwaiji</a>, and <a href="https://en.wikipedia.org/wiki/Hili_Oasis" title="Hili Oasis">Hili</a>), adjacent to <a href="https://en.wikipedia.org/wiki/Al_Buraimi_Governorate" title="Al Buraimi Governorate">Al-Buraimi</a> in Oman, continue traditional <i>falaj</i> (qanat) irrigations for the palm groves and gardens, and form part of the city's ancient heritage.<sup id="cite_ref-Tikriti2002_12-1"><a href="#cite_note-Tikriti2002-12">[12]</a></sup><sup id="cite_ref-OBG2010_58-0"><a href="#cite_note-OBG2010-58">[58]</a></sup>
</p><p>Multiple <i>Aflaj</i> have been found from the early Iron Age, as early as 1100 BC, and some sources claim these to be the earliest examples of the Qanat irrigation system.<sup id="cite_ref-59"><a href="#cite_note-59">[59]</a></sup>
</p><p>The Falaj system continued to be in use into the Early <a href="https://en.wikipedia.org/wiki/Pre-Islamic_Arabia" title="Pre-Islamic Arabia">Pre Islamic</a> (300 BC - 300 AD), and were reintroduced after the Early Islamic conquests in the souqs of <a href="https://en.wikipedia.org/wiki/Emirate_of_Ras_Al_Khaimah" title="Emirate of Ras Al Khaimah">Julfar</a>, <a href="https://en.wikipedia.org/wiki/Dibba" title="Dibba">Dibba</a>, and <a href="https://en.wikipedia.org/wiki/Tawam_(region)" title="Tawam (region)">Tawwam</a>.<sup id="cite_ref-60"><a href="#cite_note-60">[60]</a></sup> Islamic geographer <a href="https://en.wikipedia.org/wiki/Al-Muqaddasi" title="Al-Muqaddasi">Al Muqqadasi</a> stated<i>:  “Hafit {Tuwwam} abounds in <a href="https://en.wikipedia.org/wiki/Date_palm" title="Date palm">palm</a> trees”</i> in the 10th century, indicating extensive use of the Falaj system.
</p><p>The Falaj system is still operating in the city of Al Ain, as well as in multiple mountainous settlements, including the villages of <a href="https://en.wikipedia.org/wiki/Wadi_Shis" title="Wadi Shis">Wadi Shees</a> and <a href="https://en.wikipedia.org/wiki/Masafi" title="Masafi">Masafi</a>.
</p>
<h3><span id="Europe">Europe</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=37" title="Edit section: Europe"><span>edit</span></a><span>]</span></span></h3>
<h4><span id="Greece">Greece</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=38" title="Edit section: Greece"><span>edit</span></a><span>]</span></span></h4>
<p>The <a href="https://en.wikipedia.org/wiki/Tunnel_of_Eupalinos" title="Tunnel of Eupalinos">Tunnel of Eupalinos</a> on Samos runs for 1 kilometre through a hill to supply water to the town of Pythagorion.<sup id="cite_ref-61"><a href="#cite_note-61">[61]</a></sup> It was built on the order of the <a href="https://en.wikipedia.org/wiki/Tyrant" title="Tyrant">Tyrant</a> <a href="https://en.wikipedia.org/wiki/Polycrates" title="Polycrates">Polycrates</a> around 550&nbsp;BCE. At either end of the tunnel proper, shallow <i>qanat</i>-like tunnels carried the water from the spring and to the town.
</p>
<figure typeof="mw:File/Thumb"><a href="https://en.wikipedia.org/wiki/File:Palacio_del_marqu%C3%A9s_de_Villafranca_(Madrid)_02.jpg"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Palacio_del_marqu%C3%A9s_de_Villafranca_%28Madrid%29_02.jpg/170px-Palacio_del_marqu%C3%A9s_de_Villafranca_%28Madrid%29_02.jpg" decoding="async" width="170" height="255" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Palacio_del_marqu%C3%A9s_de_Villafranca_%28Madrid%29_02.jpg/255px-Palacio_del_marqu%C3%A9s_de_Villafranca_%28Madrid%29_02.jpg 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Palacio_del_marqu%C3%A9s_de_Villafranca_%28Madrid%29_02.jpg/340px-Palacio_del_marqu%C3%A9s_de_Villafranca_%28Madrid%29_02.jpg 2x" data-file-width="2848" data-file-height="4272"></a><figcaption>A preserved <i>viaje de agua</i> in Madrid</figcaption></figure>
<h4><span id="Italy">Italy</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=39" title="Edit section: Italy"><span>edit</span></a><span>]</span></span></h4>
<p>The 5,653&nbsp;m (3.513&nbsp;mi) long <a href="https://en.wikipedia.org/wiki/Tunnels_of_Claudius" title="Tunnels of Claudius">Tunnels of Claudius</a>, intended to partially drain the largest Italian inland water, <a href="https://en.wikipedia.org/wiki/Fucine_Lake" title="Fucine Lake">Fucine Lake</a>, was constructed using the qanat technique. It featured shafts up to 122 m deep.<sup id="cite_ref-62"><a href="#cite_note-62">[62]</a></sup> The entire ancient town of <a href="https://en.wikipedia.org/wiki/Palermo" title="Palermo">Palermo</a> in <a href="https://en.wikipedia.org/wiki/Sicily" title="Sicily">Sicily</a> was equipped with a huge qanat system built during the <a href="https://en.wikipedia.org/wiki/Emirate_of_Sicily" title="Emirate of Sicily">Arab period (827–1072)</a>.<sup id="cite_ref-63"><a href="#cite_note-63">[63]</a></sup> Many of the qanats are now mapped and some can be visited. The famous Scirocco room has an air-conditioning system cooled by the flow of water in a qanat and a "wind tower", a structure able to catch the wind and use it to draw the cooled air up into the room.
</p>
<h4><span id="Luxembourg">Luxembourg</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=40" title="Edit section: Luxembourg"><span>edit</span></a><span>]</span></span></h4>
<p>The <a href="https://en.wikipedia.org/wiki/Raschp%C3%ABtzer" title="Raschpëtzer">Raschpëtzer</a> near <a href="https://en.wikipedia.org/wiki/Helmsange" title="Helmsange">Helmsange</a> in southern <a href="https://en.wikipedia.org/wiki/Luxembourg" title="Luxembourg">Luxembourg</a> is a particularly well preserved example of a <a href="https://en.wikipedia.org/wiki/Ancient_Rome" title="Ancient Rome">Roman</a> qanat. It is probably the most extensive system of its kind north of the <a href="https://en.wikipedia.org/wiki/Alps" title="Alps">Alps</a>. To date, some 330 m of the total tunnel length of 600 m have been explored. Thirteen of the 20 to 25 shafts have been investigated.<sup id="cite_ref-64"><a href="#cite_note-64">[64]</a></sup> The qanat appears to have provided water for a large <a href="https://en.wikipedia.org/wiki/Roman_villa" title="Roman villa">Roman villa</a> on the slopes of the <a href="https://en.wikipedia.org/wiki/Alzette" title="Alzette">Alzette</a> valley. It was built during the <a href="https://en.wikipedia.org/wiki/Gallo-Roman" title="Gallo-Roman">Gallo-Roman</a> period, probably around the year 150 and functioned for about 120 years thereafter.
</p>
<h4><span id="Spain">Spain</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=41" title="Edit section: Spain"><span>edit</span></a><span>]</span></span></h4>
<p>There are still many examples of <span title="Spanish-language text"><i lang="es">galería</i></span> or qanat systems in Spain, most likely brought to the area by the <a href="https://en.wikipedia.org/wiki/Moors" title="Moors">Moors</a> during their rule of the <a href="https://en.wikipedia.org/wiki/Iberian_peninsula" title="Iberian peninsula">Iberian peninsula</a>. <a href="https://en.wikipedia.org/wiki/Turrillas" title="Turrillas">Turrillas</a> in <a href="https://en.wikipedia.org/wiki/Andalusia" title="Andalusia">Andalusia</a> on the north facing slopes of the <a href="https://en.wikipedia.org/w/index.php?title=Sierra_de_Alhamilla&amp;action=edit&amp;redlink=1" title="Sierra de Alhamilla (page does not exist)">Sierra de Alhamilla</a> has evidence of a qanat system. <a href="https://en.wikipedia.org/wiki/Granada" title="Granada">Granada</a> is another site with an extensive qanat system.<sup id="cite_ref-65"><a href="#cite_note-65">[65]</a></sup> In <a href="https://en.wikipedia.org/wiki/Madrid" title="Madrid">Madrid</a> they were called <span title="Spanish-language text"><i lang="es-ES">viajes de agua</i></span> and were used until the construction of the <a href="https://en.wikipedia.org/wiki/Canal_de_Isabel_II" title="Canal de Isabel II">Canal de Isabel II</a>. See <a href="https://en.wikipedia.org/w/index.php?title=Viaje_de_agua&amp;action=edit&amp;redlink=1" title="Viaje de agua (page does not exist)">Viaje de agua</a><sup>&nbsp;[<a href="https://es.wikipedia.org/wiki/Viaje_de_agua" title="es:Viaje de agua">es</a>]</sup> and <a href="https://en.wikipedia.org/w/index.php?title=Viajes_de_agua_en_el_Madrid_hist%C3%B3rico&amp;action=edit&amp;redlink=1" title="Viajes de agua en el Madrid histórico (page does not exist)">Viajes de agua en el Madrid histórico</a><sup>&nbsp;[<a href="https://es.wikipedia.org/wiki/Viajes_de_agua_en_el_Madrid_hist%C3%B3rico" title="es:Viajes de agua en el Madrid histórico">es</a>]</sup> in Spanish.
</p>
<h3><span id="The_Americas">The Americas</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=42" title="Edit section: The Americas"><span>edit</span></a><span>]</span></span></h3>
<p>Qanats in the Americas, usually referred to as <a href="https://en.wikipedia.org/wiki/Puquios" title="Puquios">puquios</a> or filtration galleries, can be found in the <a href="https://en.wikipedia.org/wiki/Nazca_Province" title="Nazca Province">Nazca Province</a> of <a href="https://en.wikipedia.org/wiki/Peru" title="Peru">Peru</a> and in northern <a href="https://en.wikipedia.org/wiki/Chile" title="Chile">Chile</a>.<sup id="cite_ref-water_30-2"><a href="#cite_note-water-30">[30]</a></sup> The origin and dating of the Nazca puquios is disputed, although some archaeologists have asserted that they were constructed by the indigenous people of the <a href="https://en.wikipedia.org/wiki/Nazca_culture" title="Nazca culture">Nazca culture</a> beginning about 500&nbsp;CE.<sup id="cite_ref-Schreiber_and_Lancho_Rojas_66-0"><a href="#cite_note-Schreiber_and_Lancho_Rojas-66">[66]</a></sup>
The Spanish introduced qanats into Mexico in 1520&nbsp;CE.<sup id="cite_ref-67"><a href="#cite_note-67">[67]</a></sup>
</p><p>In the <a href="https://en.wikipedia.org/wiki/Atacama_Desert" title="Atacama Desert">Atacama Desert</a> of northern Chile the shafts of puquios are known as <i>socavones</i>.<sup id="cite_ref-Licteetal2020_68-0"><a href="#cite_note-Licteetal2020-68">[68]</a></sup> <i>Socavones</i> are known to exist in <a href="https://en.wikipedia.org/wiki/Azapa_Valley" title="Azapa Valley">Azapa Valley</a> and the oasis of <a href="https://en.wikipedia.org/wiki/Sibaya" title="Sibaya">Sibaya</a>, <a href="https://en.wikipedia.org/wiki/Pica,_Chile" title="Pica, Chile">Pica</a>-<a href="https://en.wikipedia.org/wiki/Matilla" title="Matilla">Matilla</a> and <a href="https://en.wikipedia.org/w/index.php?title=Puqui_Nu%C3%B1ez&amp;action=edit&amp;redlink=1" title="Puqui Nuñez (page does not exist)">Puqui Nuñez</a>.<sup id="cite_ref-Licteetal2020_68-1"><a href="#cite_note-Licteetal2020-68">[68]</a></sup> In 1918 geologist <a href="https://en.wikipedia.org/wiki/Juan_Br%C3%BCggen" title="Juan Brüggen">Juan Brüggen</a> mentioned the existence of 23 <i>socavones</i> in the Pica oasis, yet these have since then been abandoned due to economic and social changes.<sup id="cite_ref-Licteetal2020_68-2"><a href="#cite_note-Licteetal2020-68">[68]</a></sup>
</p>
<h2><span id="Cultural_references">Cultural references</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=43" title="Edit section: Cultural references"><span>edit</span></a><span>]</span></span></h2>
<p>In an August 21, 1906, letter written from <a href="https://en.wikipedia.org/wiki/Tehran" title="Tehran">Tehran</a>, Florence Khanum, the American wife of Persian diplomat Ali Kuli Khan, described the use of qanats for the garden at the home of her brother-in-law, General Husayn Kalantar,<sup id="cite_ref-Getty_1913_69-0"><a href="#cite_note-Getty_1913-69">[69]</a></sup>
January 1, 1913<sup id="cite_ref-Gail_1991_70-0"><a href="#cite_note-Gail_1991-70">[70]</a></sup>
</p>
<blockquote><p>"The air is the most marvellous I ever was in, in any city. Mountain air, so sweet, dry and "preserving", delicious and life-giving.' She told of running streams, and fresh water bubbling up in the gardens. (This omnipresence of water, which doubtless spread from Persia to Baghdad and from there to Spain during its Muslim days, has given Spanish many a water-word: aljibe, for example, is Persian jub, brook; cano or pipe, is Arabic qanat—reed, canal. Thus J. T. Shipley, <i>Dictionary of Word Origins</i>)."</p><p>— <cite>Florence Khanum (1906) cited in <i>Arches of the Years</i> (1999)</cite></p></blockquote><p> An old tradition in Iran was to hold symbolic wedding ceremonies between widows and qanats in which the widow became the "wife" of the qanat. This was believed to help ensure the continued flow of water.<sup id="cite_ref-71"><a href="#cite_note-71">[71]</a></sup><sup id="cite_ref-72"><a href="#cite_note-72">[72]</a></sup>
</p><h2><span id="See_also">See also</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=44" title="Edit section: See also"><span>edit</span></a><span>]</span></span></h2>
<ul><li><a href="https://en.wikipedia.org/wiki/Suranga" title="Suranga">Suranga</a>&nbsp;– Traditional water management system in Kerala and Karnataka, south India</li>
<li><a href="https://en.wikipedia.org/wiki/Water_clock" title="Water clock">Water clock</a>&nbsp;– Time piece in which time is measured by the flow of liquid into or out of a vessel</li>
<li><a href="https://en.wikipedia.org/wiki/Ab_anbar" title="Ab anbar">Ab Anbar</a>&nbsp;– Traditional Iranian water reservoir</li>
<li><a href="https://en.wikipedia.org/wiki/Acequia" title="Acequia">Acequia</a>&nbsp;– Community-operated watercourse</li>
<li><a href="https://en.wikipedia.org/wiki/Roman_aqueducts" title="Roman aqueducts">Roman aqueducts</a>&nbsp;– Type of aqueduct built in ancient Rome</li>
<li><a href="https://en.wikipedia.org/wiki/Aflaj_Irrigation_Systems_of_Oman" title="Aflaj Irrigation Systems of Oman">Aflaj</a>&nbsp;– Ancient water channels in Oman</li>
<li><a href="https://en.wikipedia.org/wiki/History_of_water_supply_and_sanitation" title="History of water supply and sanitation">History of water supply and sanitation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Menara_gardens" title="Menara gardens">Menara gardens</a>&nbsp;– Public garden in Marrakech, Morocco</li>
<li><a href="https://en.wikipedia.org/wiki/Oasis" title="Oasis">Oasis</a>&nbsp;– Fertile area in a desert environment</li>
<li><a href="https://en.wikipedia.org/wiki/Traditional_water_sources_of_Persian_antiquity" title="Traditional water sources of Persian antiquity">Traditional water sources of Persian antiquity</a></li>
<li><a href="https://en.wikipedia.org/wiki/Yakhch%C4%81l" title="Yakhchāl">Yakhchāl</a>&nbsp;– Ancient Persian ice-house</li>
<li><a href="https://en.wikipedia.org/wiki/Mamanteo" title="Mamanteo">Mamanteo</a>&nbsp;– Seasonal water retention system using permeable ground cover for storage</li>
<li><a href="https://en.wikipedia.org/wiki/Tank_cascade_system" title="Tank cascade system">Tank cascade system</a>&nbsp;– Ancient irrigation system in Sri Lanka</li></ul>
<h2><span id="Notes">Notes</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=45" title="Edit section: Notes"><span>edit</span></a><span>]</span></span></h2>
<div><ol>
<li id="cite_note-:0-1"><span>^ <a href="#cite_ref-:0_1-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-:0_1-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-:0_1-2"><sup><i><b>c</b></i></sup></a></span> <span><cite id="CITEREFReminiKechardAchour2014">Remini, B.; Kechard, R.; Achour, B. (2014-12-01). "THE COLLECTING OF GROUNDWATER BY THE QANATS: A MILLENNIUM TECHNIQUE DECAYING". <i>Larhyss Journal</i> (20): 259–277.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Larhyss+Journal&amp;rft.atitle=THE+COLLECTING+OF+GROUNDWATER+BY+THE+QANATS%3A+A+MILLENNIUM+TECHNIQUE+DECAYING.&amp;rft.issue=20&amp;rft.pages=259-277&amp;rft.date=2014-12-01&amp;rft.aulast=Remini&amp;rft.aufirst=B.&amp;rft.au=Kechard%2C+R.&amp;rft.au=Achour%2C+B.&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Kheirabadi-2"><span>^ <a href="#cite_ref-Kheirabadi_2-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-2"><sup><i><b>c</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-3"><sup><i><b>d</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-4"><sup><i><b>e</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-5"><sup><i><b>f</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-6"><sup><i><b>g</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-7"><sup><i><b>h</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-8"><sup><i><b>i</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-9"><sup><i><b>j</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-10"><sup><i><b>k</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-11"><sup><i><b>l</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-12"><sup><i><b>m</b></i></sup></a> <a href="#cite_ref-Kheirabadi_2-13"><sup><i><b>n</b></i></sup></a></span> <span><cite id="CITEREFKheirabadi,_Masoud1991">Kheirabadi, Masoud (1991). <i>Iranian Cities: Formation and Development</i>. University of Texas Press. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-0-292-78517-5" title="Special:BookSources/978-0-292-78517-5"><bdi>978-0-292-78517-5</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Iranian+Cities%3A+Formation+and+Development&amp;rft.pub=University+of+Texas+Press&amp;rft.date=1991&amp;rft.isbn=978-0-292-78517-5&amp;rft.au=Kheirabadi%2C+Masoud&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Ajam_Qanats_2003-3"><span><b><a href="#cite_ref-Ajam_Qanats_2003_3-0">^</a></b></span> <span><cite id="CITEREFAjam2003">Ajam, Mohammad (2003). <i>Iranian Qanats: a heritage from ancient</i>. Seminar of Qanat in Gonabad. <a href="https://en.wikipedia.org/wiki/Gonabad" title="Gonabad">Gonabad</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=conference&amp;rft.btitle=Iranian+Qanats%3A+a+heritage+from+ancient&amp;rft.place=Gonabad&amp;rft.date=2003&amp;rft.aulast=Ajam&amp;rft.aufirst=Mohammad&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-4"><span><b><a href="#cite_ref-4">^</a></b></span> <span>Reading in World Cultures - Paul Thomas Welty</span>
</li>
<li id="cite_note-Nair-5"><span>^ <a href="#cite_ref-Nair_5-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Nair_5-1"><sup><i><b>b</b></i></sup></a></span> <span><cite><a rel="nofollow" href="https://web.archive.org/web/20060616215409/http://www.boloji.com/environment/24.htm">"Article titled Etymological Conduit to the Land of Qanat by Dr. V. Sankaran Nair, 2004"</a>. Archived from <a rel="nofollow" href="http://www.boloji.com/environment/24.htm">the original</a> on 2006-06-16<span>. Retrieved <span>2006-06-25</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Article+titled+Etymological+Conduit+to+the+Land+of+Qanat+by+Dr.+V.+Sankaran+Nair%2C+2004&amp;rft_id=http%3A%2F%2Fwww.boloji.com%2Fenvironment%2F24.htm&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Wilson_2008-6"><span>^ <a href="#cite_ref-Wilson_2008_6-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Wilson_2008_6-1"><sup><i><b>b</b></i></sup></a></span> <span><cite id="CITEREFWilson2008"><a href="https://en.wikipedia.org/wiki/Andrew_Wilson_(classical_archaeologist)" title="Andrew Wilson (classical archaeologist)">Wilson, Andrew</a> (2008). "Hydraulic Engineering and Water Supply". In <a href="https://en.wikipedia.org/wiki/John_Peter_Oleson" title="John Peter Oleson">Oleson, John Peter</a> (ed.). <a rel="nofollow" href="https://web.archive.org/web/20171107055629/http://glirby.people.wm.edu/COLL100/Oxford-HydraulicEngineering.pdf"><i>Handbook of Engineering and Technology in the Classical World</i></a> <span>(PDF)</span>. New York: Oxford University Press. pp.&nbsp;290–293. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-0-19-973485-6" title="Special:BookSources/978-0-19-973485-6"><bdi>978-0-19-973485-6</bdi></a>. Archived from <a rel="nofollow" href="http://glirby.people.wm.edu/COLL100/Oxford-HydraulicEngineering.pdf">the original</a> <span>(PDF)</span> on 2017-11-07<span>. Retrieved <span>November 1,</span> 2017</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=bookitem&amp;rft.atitle=Hydraulic+Engineering+and+Water+Supply&amp;rft.btitle=Handbook+of+Engineering+and+Technology+in+the+Classical+World&amp;rft.place=New+York&amp;rft.pages=290-293&amp;rft.pub=Oxford+University+Press&amp;rft.date=2008&amp;rft.isbn=978-0-19-973485-6&amp;rft.aulast=Wilson&amp;rft.aufirst=Andrew&amp;rft_id=http%3A%2F%2Fglirby.people.wm.edu%2FCOLL100%2FOxford-HydraulicEngineering.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-7"><span><b><a href="#cite_ref-7">^</a></b></span> <span><cite id="CITEREFGoldsmith,_Edward1968">Goldsmith, Edward (1968). <a rel="nofollow" href="https://web.archive.org/web/20120114034225/http://www.edwardgoldsmith.org/1031/the-qanats-of-iran/">"The qanats of Iran"</a>. <i>Scientific American</i>. <b>218</b> (4): 94–105. <a href="https://en.wikipedia.org/wiki/Bibcode_(identifier)" title="Bibcode (identifier)">Bibcode</a>:<a rel="nofollow" href="https://ui.adsabs.harvard.edu/abs/1968SciAm.218d..94W">1968SciAm.218d..94W</a>. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<a rel="nofollow" href="https://doi.org/10.1038%2Fscientificamerican0468-94">10.1038/scientificamerican0468-94</a>. Archived from <a rel="nofollow" href="http://www.edwardgoldsmith.org/1031/the-qanats-of-iran/">the original</a> on 2012-01-14.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Scientific+American&amp;rft.atitle=The+qanats+of+Iran&amp;rft.volume=218&amp;rft.issue=4&amp;rft.pages=94-105&amp;rft.date=1968&amp;rft_id=info%3Adoi%2F10.1038%2Fscientificamerican0468-94&amp;rft_id=info%3Abibcode%2F1968SciAm.218d..94W&amp;rft.au=Goldsmith%2C+Edward&amp;rft_id=http%3A%2F%2Fwww.edwardgoldsmith.org%2F1031%2Fthe-qanats-of-iran%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-8"><span><b><a href="#cite_ref-8">^</a></b></span> <span><cite><a rel="nofollow" href="http://users.bart.nl/~leenders/txt/qanats.html">"The quanats of Iran"</a>. <i>Bart.nl</i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Bart.nl&amp;rft.atitle=The+quanats+of+Iran&amp;rft_id=http%3A%2F%2Fusers.bart.nl%2F~leenders%2Ftxt%2Fqanats.html&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-9"><span><b><a href="#cite_ref-9">^</a></b></span> <span><cite><a rel="nofollow" href="http://www.waterhistory.org/histories/qanats/qanats.pdf">"Qanats"</a> <span>(PDF)</span>. <i>Water History</i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Water+History&amp;rft.atitle=Qanats&amp;rft_id=http%3A%2F%2Fwww.waterhistory.org%2Fhistories%2Fqanats%2Fqanats.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-10"><span><b><a href="#cite_ref-10">^</a></b></span> <span><cite><a rel="nofollow" href="http://www.heritageinstitute.com/zoroastrianism/kareez/index.htm">"Kareez (kariz, karez, qanat)"</a>. <i>Heritage Institute</i>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Heritage+Institute&amp;rft.atitle=Kareez+%28kariz%2C+karez%2C+qanat%29&amp;rft_id=http%3A%2F%2Fwww.heritageinstitute.com%2Fzoroastrianism%2Fkareez%2Findex.htm&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-11"><span><b><a href="#cite_ref-11">^</a></b></span> <span>Nikravesh, Ardakanian and Alemohammad, Institutional Capacity Development of Water Resources Management in Iran: <a rel="nofollow" href="http://www.gwp.org/Global/ToolBox/References/Capacity%20Development%20for%20Improved%20Water%20Management%20(UNESCO-IHE,UNW-DPC,%202009).pdf#page=169">[1]</a> <a rel="nofollow" href="https://web.archive.org/web/20161018153716/http://www.gwp.org/Global/ToolBox/References/Capacity%20Development%20for%20Improved%20Water%20Management%20%28UNESCO-IHE%2CUNW-DPC%2C%202009%29.pdf">Archived</a> 2016-10-18 at the <a href="https://en.wikipedia.org/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a></span>
</li>
<li id="cite_note-Tikriti2002-12"><span>^ <a href="#cite_ref-Tikriti2002_12-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Tikriti2002_12-1"><sup><i><b>b</b></i></sup></a></span> <span><cite id="CITEREFTikriti2002">Tikriti, Walid Yasin AL (2002). "The south-east Arabian origin of the falaj system". <i>Proceedings of the Seminar for Arabian Studies</i>. <b>32</b>: 117–138. <a href="https://en.wikipedia.org/wiki/JSTOR_(identifier)" title="JSTOR (identifier)">JSTOR</a>&nbsp;<a rel="nofollow" href="https://www.jstor.org/stable/41223728">41223728</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Proceedings+of+the+Seminar+for+Arabian+Studies&amp;rft.atitle=The+south-east+Arabian+origin+of+the+falaj+system&amp;rft.volume=32&amp;rft.pages=117-138&amp;rft.date=2002&amp;rft_id=https%3A%2F%2Fwww.jstor.org%2Fstable%2F41223728%23id-name%3DJSTOR&amp;rft.aulast=Tikriti&amp;rft.aufirst=Walid+Yasin+AL&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-13"><span><b><a href="#cite_ref-13">^</a></b></span> <span><cite id="CITEREFAngelakisChiotisEslamianWeingartner2017"><a href="https://en.wikipedia.org/wiki/Andreas_N._Angelakis" title="Andreas N. Angelakis">Angelakis, Andreas N</a>; Chiotis, Eustathios; Eslamian, Saeid; Weingartner, Herbert (2017). <a rel="nofollow" href="http://www.crcnetbase.com/isbn/9781315368566"><i>Underground aqueducts handbook</i></a>. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/9781315368566" title="Special:BookSources/9781315368566"><bdi>9781315368566</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Underground+aqueducts+handbook&amp;rft.date=2017&amp;rft.isbn=9781315368566&amp;rft.aulast=Angelakis&amp;rft.aufirst=Andreas+N&amp;rft.au=Chiotis%2C+Eustathios&amp;rft.au=Eslamian%2C+Saeid&amp;rft.au=Weingartner%2C+Herbert&amp;rft_id=http%3A%2F%2Fwww.crcnetbase.com%2Fisbn%2F9781315368566&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-14"><span><b><a href="#cite_ref-14">^</a></b></span> <span><cite id="CITEREFCech2010">Cech, Thomas V. (2010). <i>Principles of water resources: history, development, management, and policy</i> (3.&nbsp;ed.). Hoboken, N.J.: Wiley. p.&nbsp;9. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/9780470136317" title="Special:BookSources/9780470136317"><bdi>9780470136317</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Principles+of+water+resources%3A+history%2C+development%2C+management%2C+and+policy&amp;rft.place=Hoboken%2C+N.J.&amp;rft.pages=9&amp;rft.edition=3.&amp;rft.pub=Wiley&amp;rft.date=2010&amp;rft.isbn=9780470136317&amp;rft.aulast=Cech&amp;rft.aufirst=Thomas+V.&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-15"><span><b><a href="#cite_ref-15">^</a></b></span> <span><cite id="CITEREFWatt2014">Watt, George (2014). <i>A Dictionary of the Economic Products of India</i>. Sagwan Press. pp.&nbsp;45–7.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=A+Dictionary+of+the+Economic+Products+of+India&amp;rft.pages=45-7&amp;rft.pub=Sagwan+Press&amp;rft.date=2014&amp;rft.aulast=Watt&amp;rft.aufirst=George&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-16"><span><b><a href="#cite_ref-16">^</a></b></span> <span><cite id="CITEREFBulliet2013">Bulliet, Richard W. (2013). <i>Cotton, Climate, and Camels in Early Islamic Iran: A Moment in World History</i>. Columbia University Press. p.&nbsp;16.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Cotton%2C+Climate%2C+and+Camels+in+Early+Islamic+Iran%3A+A+Moment+in+World+History&amp;rft.pages=16&amp;rft.pub=Columbia+University+Press&amp;rft.date=2013&amp;rft.aulast=Bulliet&amp;rft.aufirst=Richard+W.&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-17"><span><b><a href="#cite_ref-17">^</a></b></span> <span><cite id="CITEREFMcClellan_IIIDornGharleghi2006">McClellan III, James E.; et&nbsp;al. (2006). <i>Science and Technology in World History: An Introduction</i>. Johns Hopkins University Press. pp.&nbsp;113–4.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Science+and+Technology+in+World+History%3A+An+Introduction&amp;rft.pages=113-4&amp;rft.pub=Johns+Hopkins+University+Press&amp;rft.date=2006&amp;rft.aulast=McClellan+III&amp;rft.aufirst=James+E.&amp;rft.au=Dorn%2C+Harold&amp;rft.au=Gharleghi%2C+Mehran&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-18"><span><b><a href="#cite_ref-18">^</a></b></span> <span><cite id="CITEREFHenselGharleghi2012">Hensel, Michael; Gharleghi, Mehran (2012). <i>Iran: Past, Present and Future</i>. Academy Press. p.&nbsp;64.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Iran%3A+Past%2C+Present+and+Future&amp;rft.pages=64&amp;rft.pub=Academy+Press&amp;rft.date=2012&amp;rft.aulast=Hensel&amp;rft.aufirst=Michael&amp;rft.au=Gharleghi%2C+Mehran&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Lane-19"><span><b><a href="#cite_ref-Lane_19-0">^</a></b></span> <span><cite id="CITEREFLane2017">Lane, Kevin (2017). <a rel="nofollow" href="https://www.academia.edu/32006899">"Puquios and Aqueducts in the Central Andes of South America"</a>. <i>Underground Aqueducts Handbook</i>. Boca Raton, Florida: CRC Press: 465–467.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Underground+Aqueducts+Handbook&amp;rft.atitle=Puquios+and+Aqueducts+in+the+Central+Andes+of+South+America&amp;rft.pages=465-467&amp;rft.date=2017&amp;rft.aulast=Lane&amp;rft.aufirst=Kevin&amp;rft_id=https%3A%2F%2Fwww.academia.edu%2F32006899&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span>. In <i>Underground Aqueducts Handbook.</i></span>
</li>
<li id="cite_note-Angelakis_2016_Handbook-20"><span><b><a href="#cite_ref-Angelakis_2016_Handbook_20-0">^</a></b></span> <span><cite id="CITEREFAndreas_N._AngelakisEustathios_ChiotisSaeid_EslamianHerbert_Weingartner2016">Andreas N. Angelakis; Eustathios Chiotis; Saeid Eslamian; Herbert Weingartner, eds. (November 22, 2016). <i>Underground Aqueducts Handbook</i>. CRC Press. p.&nbsp;244. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/9781498748308" title="Special:BookSources/9781498748308"><bdi>9781498748308</bdi></a>. <q>In arid and semi-arid regions, owing to high evaporation, transportation routes were in the form of ganats, which lead groundwater to consumption areas along the tunnels. In the long run, the ganat system is not only economical but also sustainable for irrigation and agricultural purposes... The ground water flow was known to depend on grain size of sediments, and, therefore, the tunnels in qanats are filled in with coarser material than the surrounding hose geological formations. The qanats are constructed mainly along the valleys where Quartenary sediments are deposited.</q></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Underground+Aqueducts+Handbook&amp;rft.pages=244&amp;rft.pub=CRC+Press&amp;rft.date=2016-11-22&amp;rft.isbn=9781498748308&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Nasiri_et_Mafakheri-21"><span>^ <a href="#cite_ref-Nasiri_et_Mafakheri_21-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Nasiri_et_Mafakheri_21-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-Nasiri_et_Mafakheri_21-2"><sup><i><b>c</b></i></sup></a></span> <span><cite id="CITEREFNasiri,_F.Mafakheri,_M._S.2015">Nasiri, F. &amp; Mafakheri, M. S. (2015). <a rel="nofollow" href="https://doi.org/10.1186%2Fs40068-015-0039-9">"Qanat Water Supply Systems: A Revisit of Sustainability Perspectives"</a>. <i>Environmental Systems Research</i>. <b>4</b> (13). <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.1186%2Fs40068-015-0039-9">10.1186/s40068-015-0039-9</a></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Environmental+Systems+Research&amp;rft.atitle=Qanat+Water+Supply+Systems%3A+A+Revisit+of+Sustainability+Perspectives&amp;rft.volume=4&amp;rft.issue=13&amp;rft.date=2015&amp;rft_id=info%3Adoi%2F10.1186%2Fs40068-015-0039-9&amp;rft.au=Nasiri%2C+F.&amp;rft.au=Mafakheri%2C+M.+S.&amp;rft_id=https%3A%2F%2Fdoi.org%2F10.1186%252Fs40068-015-0039-9&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Smith-22"><span>^ <a href="#cite_ref-Smith_22-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Smith_22-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-Smith_22-2"><sup><i><b>c</b></i></sup></a> <a href="#cite_ref-Smith_22-3"><sup><i><b>d</b></i></sup></a> <a href="#cite_ref-Smith_22-4"><sup><i><b>e</b></i></sup></a> <a href="#cite_ref-Smith_22-5"><sup><i><b>f</b></i></sup></a> <a href="#cite_ref-Smith_22-6"><sup><i><b>g</b></i></sup></a> <a href="#cite_ref-Smith_22-7"><sup><i><b>h</b></i></sup></a> <a href="#cite_ref-Smith_22-8"><sup><i><b>i</b></i></sup></a> <a href="#cite_ref-Smith_22-9"><sup><i><b>j</b></i></sup></a></span> <span><cite id="CITEREFSmith,_Anthony1953"><a href="https://en.wikipedia.org/wiki/Anthony_Smith_(explorer)" title="Anthony Smith (explorer)">Smith, Anthony</a> (1953). <i>Blind White Fish in Persia</i>. London, <a href="https://en.wikipedia.org/wiki/George_Allen_%26_Unwin" title="George Allen &amp; Unwin">George Allen &amp; Unwin</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Blind+White+Fish+in+Persia&amp;rft.pub=London%2C+George+Allen+%26+Unwin&amp;rft.date=1953&amp;rft.au=Smith%2C+Anthony&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-23"><span><b><a href="#cite_ref-23">^</a></b></span> <span>Wessels, K. (2000), Renovating Qanats in a changing world, a case study in Syria, paper presented to the International Syposuim on Qanats, May 2000, Yazd, Iran, quoted in:<a rel="nofollow" href="http://www.waterhistory.org/histories/qanats/">WaterHistory.org:Qanats</a>, accessed on October 25, 2009</span>
</li>
<li id="cite_note-24"><span><b><a href="#cite_ref-24">^</a></b></span> <span><cite id="CITEREFBahadori_MN1978">Bahadori MN (February 1978). "Passive Cooling Systems in Iranian Architecture". <i>Scientific American</i>. <b>238</b> (2): 144–54. <a href="https://en.wikipedia.org/wiki/Bibcode_(identifier)" title="Bibcode (identifier)">Bibcode</a>:<a rel="nofollow" href="https://ui.adsabs.harvard.edu/abs/1978SciAm.238b.144B">1978SciAm.238b.144B</a>. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<a rel="nofollow" href="https://doi.org/10.1038%2Fscientificamerican0278-144">10.1038/scientificamerican0278-144</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" title="S2CID (identifier)">S2CID</a>&nbsp;<a rel="nofollow" href="https://api.semanticscholar.org/CorpusID:119819386">119819386</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Scientific+American&amp;rft.atitle=Passive+Cooling+Systems+in+Iranian+Architecture&amp;rft.volume=238&amp;rft.issue=2&amp;rft.pages=144-54&amp;rft.date=1978-02&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A119819386%23id-name%3DS2CID&amp;rft_id=info%3Adoi%2F10.1038%2Fscientificamerican0278-144&amp;rft_id=info%3Abibcode%2F1978SciAm.238b.144B&amp;rft.au=Bahadori+MN&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Rael-25"><span>^ <a href="#cite_ref-Rael_25-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Rael_25-1"><sup><i><b>b</b></i></sup></a></span> <span><cite><a rel="nofollow" href="http://www.eartharchitecture.org/index.php?%2Farchives%2F1045-Yakhchal-Ancient-Refrigerators.html">"Yakchal: Ancient Refrigerators"</a>. <a rel="nofollow" href="https://web.archive.org/web/20120331061635/http://www.eartharchitecture.org/index.php?%2Farchives%2F1045-Yakhchal-Ancient-Refrigerators.html">Archived</a> from the original on 2012-03-31<span>. Retrieved <span>2012-03-31</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Yakchal%3A+Ancient+Refrigerators&amp;rft_id=http%3A%2F%2Fwww.eartharchitecture.org%2Findex.php%3F%252Farchives%252F1045-Yakhchal-Ancient-Refrigerators.html&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-26"><span><b><a href="#cite_ref-26">^</a></b></span> <span><cite><a rel="nofollow" href="https://web.archive.org/web/20061129065203/http://www.mappeonline.com/unesco/atlas/data/photographical%20inventory/A17photograph.htm">"An excellent UNESCO article with numerous clear photographs showing the Foggara in Algeria"</a>. Archived from <a rel="nofollow" href="http://www.mappeonline.com/unesco/atlas/data/photographical%20inventory/A17photograph.htm">the original</a> on 2006-11-29<span>. Retrieved <span>2006-06-25</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=An+excellent+UNESCO+article+with+numerous+clear+photographs+showing+the+Foggara+in+Algeria&amp;rft_id=http%3A%2F%2Fwww.mappeonline.com%2Funesco%2Fatlas%2Fdata%2Fphotographical%2520inventory%2FA17photograph.htm&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-27"><span><b><a href="#cite_ref-27">^</a></b></span> <span><cite id="CITEREFOlmstead1948">Olmstead, A. T. (1948). <a rel="nofollow" href="https://isac.uchicago.edu/sites/default/files/uploads/shared/docs/history_persian_empire.pdf"><i>History of the Persian Empire</i></a> <span>(PDF)</span>. <a href="https://en.wikipedia.org/wiki/The_University_of_Chicago_Press" title="The University of Chicago Press">The University of Chicago Press</a>. p.&nbsp;224. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/0-226-62777-2" title="Special:BookSources/0-226-62777-2"><bdi>0-226-62777-2</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=History+of+the+Persian+Empire&amp;rft.pages=224&amp;rft.pub=The+University+of+Chicago+Press&amp;rft.date=1948&amp;rft.isbn=0-226-62777-2&amp;rft.aulast=Olmstead&amp;rft.aufirst=A.+T.&amp;rft_id=https%3A%2F%2Fisac.uchicago.edu%2Fsites%2Fdefault%2Ffiles%2Fuploads%2Fshared%2Fdocs%2Fhistory_persian_empire.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Wuttman-28"><span>^ <a href="#cite_ref-Wuttman_28-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Wuttman_28-1"><sup><i><b>b</b></i></sup></a></span> <span>Michel Wuttmann, "The Qanats of 'Ayn-Manâwîr, Kharga Oasis, Egypt", in <i>Jasr</i> 2001, p. 1 <a rel="nofollow" href="http://www.achemenet.com/pdf/jasr/jasr2000.1.pdf">(pdf)</a>.</span>
</li>
<li id="cite_note-29"><span><b><a href="#cite_ref-29">^</a></b></span> <span><cite><i>The 153 Club Newsletter</i> (112): 14–19. July 2007.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=The+153+Club+Newsletter&amp;rft.issue=112&amp;rft.pages=14-19&amp;rft.date=2007-07&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span>  reprinted from <i>Current world Archaeology</i></span>
</li>
<li id="cite_note-water-30"><span>^ <a href="#cite_ref-water_30-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-water_30-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-water_30-2"><sup><i><b>c</b></i></sup></a></span> <span><a rel="nofollow" href="http://www.waterhistory.org/histories/qanats/">History from Waterhistory.org</a></span>
</li>
<li id="cite_note-31"><span><b><a href="#cite_ref-31">^</a></b></span> <span><cite><a rel="nofollow" href="https://web.archive.org/web/20070310005456/http://www.institut.veolia.org/en/cahiers/water-symbolism/water-symbolism/practical-issues.aspx">"Water: symbolism and culture"</a>. Archived from <a rel="nofollow" href="http://www.institut.veolia.org/en/cahiers/water-symbolism/water-symbolism/practical-issues.aspx">the original</a> on 2007-03-10<span>. Retrieved <span>2006-06-27</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Water%3A+symbolism+and+culture&amp;rft_id=http%3A%2F%2Fwww.institut.veolia.org%2Fen%2Fcahiers%2Fwater-symbolism%2Fwater-symbolism%2Fpractical-issues.aspx&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-32"><span><b><a href="#cite_ref-32">^</a></b></span> <span><i>"Karez: Afghanistan's Traditional Irrigation System."</i> The Alternative Development Knowledge Network. <a rel="nofollow" href="https://web.archive.org/web/20090307202938/http://www.adkn.org/EN/agriculture/article.asp?a=67">link</a></span>
</li>
<li id="cite_note-33"><span><b><a href="#cite_ref-33">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.mei.edu/publications/necessity-karez-water-systems-balochistan">"The Necessity of Karez Water Systems in Balochistan"</a>. <i>Middle East Institute</i><span>. Retrieved <span>2023-10-31</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Middle+East+Institute&amp;rft.atitle=The+Necessity+of+Karez+Water+Systems+in+Balochistan&amp;rft_id=https%3A%2F%2Fwww.mei.edu%2Fpublications%2Fnecessity-karez-water-systems-balochistan&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-34"><span><b><a href="#cite_ref-34">^</a></b></span> <span>Michael M. Phillips <a rel="nofollow" href="https://www.wsj.com/articles/SB124224652409516525">Learning a Hard History Lesson in 'Talibanistan':To Accommodate New Troops, the U.S. Military Expanded a Base and Inadvertently Disrupted Ancient Afghan Canals</a>, <a href="https://en.wikipedia.org/wiki/The_Wall_Street_Journal" title="The Wall Street Journal">The Wall Street Journal</a>, May 14, 2009</span>
</li>
<li id="cite_note-35"><span><b><a href="#cite_ref-35">^</a></b></span> <span>Hadden, Robert Lee. 2005. <a rel="nofollow" href="https://wayback.archive-it.org/all/20120914110948/http://handle.dtic.mil/100.2/ADA444101">"Adits, Caves, Karizi-Qanats, and Tunnels in Afghanistan: An Annotated Bibliography."</a> US <a href="https://en.wikipedia.org/wiki/United_States_Army_Corps_of_Engineers" title="United States Army Corps of Engineers">Army Corps of Engineers</a>, <a href="https://en.wikipedia.org/wiki/Army_Geospatial_Center" title="Army Geospatial Center">Army Geospatial Center</a>.</span>
</li>
<li id="cite_note-36"><span><b><a href="#cite_ref-36">^</a></b></span> <span><cite id="CITEREFHansen">Hansen, Roger D. <a rel="nofollow" href="http://www.waterhistory.org/histories/turpan/">"Karez (Qanats) of Turpan, China"</a>. WaterHistory.org<span>. Retrieved <span>13 May</span> 2016</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=Karez+%28Qanats%29+of+Turpan%2C+China&amp;rft.pub=WaterHistory.org&amp;rft.aulast=Hansen&amp;rft.aufirst=Roger+D.&amp;rft_id=http%3A%2F%2Fwww.waterhistory.org%2Fhistories%2Fturpan%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-ICOMOS_2016-37"><span><b><a href="#cite_ref-ICOMOS_2016_37-0">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.icomos.org/en/home-wh/8287-nouveaux-sites-patrimoine-mondial-2017">"New World Heritage sites 2016 - International Council on Monuments and Sites"</a>. <i>www.icomos.org</i>. <a href="https://en.wikipedia.org/wiki/International_Council_on_Monuments_and_Sites" title="International Council on Monuments and Sites">ICOMOS</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=www.icomos.org&amp;rft.atitle=New+World+Heritage+sites+2016+-+International+Council+on+Monuments+and+Sites&amp;rft_id=https%3A%2F%2Fwww.icomos.org%2Fen%2Fhome-wh%2F8287-nouveaux-sites-patrimoine-mondial-2017&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-UNESCO_ICHHT_2015-38"><span><b><a href="#cite_ref-UNESCO_ICHHT_2015_38-0">^</a></b></span> <span><cite><a rel="nofollow" href="https://whc.unesco.org/uploads/nominations/1506.pdf">Executive Summary: the Persian Qanat for inscription on the World Heritage List</a> <span>(PDF)</span> (Report). Teheran, Iran: UNESCO. Iranian Cultural Heritage Handicrafts and Tourism Organization (ICHHT) (Islamic Republic of Iran). 2015. p.&nbsp;20.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=report&amp;rft.btitle=Executive+Summary%3A+the+Persian+Qanat+for+inscription+on+the+World+Heritage+List&amp;rft.place=Teheran%2C+Iran&amp;rft.pages=20&amp;rft.pub=UNESCO&amp;rft.date=2015&amp;rft_id=https%3A%2F%2Fwhc.unesco.org%2Fuploads%2Fnominations%2F1506.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span> In Farsi and English 1. Qasebeh Qanat Northern Representative, 2. Qanat of Baladeh Eastern Representative, 3. Qanat of Zarch Central Representative, 4. Hasan Abad-e Moshir Qanat Central Representative, 5. Ebrāhim Ābād Qanat (Markazi Province), Western Representative, 6. Qanat of Vazvān (Esfahan Province) Western Representative, 7. Mozd Ābād Qanat (Esfahan Province) Western Representative, 8. Qanat of the Moon (Esfahan Province), Western Representative, 9. Qanat of Gowhar-riz (Kerman Province) Southern Representative, 10. Jupār – Ghāsem Ābād Qanat (Kerman Province) Southern Representative, 11. Akbar Ābād Qanat (Kerman Province) Southern Representative</span>
</li>
<li id="cite_note-39"><span><b><a href="#cite_ref-39">^</a></b></span> <span><cite id="CITEREFRemmelt_LukkienY._WesselsReza_Ardakamia2009">Remmelt Lukkien; Y. Wessels; Reza Ardakamia (14 May 2009). <a rel="nofollow" href="https://web.archive.org/web/20171107141714/http://www.unesco.org/archives/multimedia/?pg=33&amp;s=films_details&amp;id=255">"Qanats and Historic Hydraulic Structures. Yazd, Iran"</a>. <i>www.unesco.org</i>. Archived from <a rel="nofollow" href="http://www.unesco.org/archives/multimedia/?pg=33&amp;s=films_details&amp;id=255">the original</a> on 2017-11-07.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=www.unesco.org&amp;rft.atitle=Qanats+and+Historic+Hydraulic+Structures.+Yazd%2C+Iran&amp;rft.date=2009-05-14&amp;rft.au=Remmelt+Lukkien&amp;rft.au=Y.+Wessels&amp;rft.au=Reza+Ardakamia&amp;rft_id=http%3A%2F%2Fwww.unesco.org%2Farchives%2Fmultimedia%2F%3Fpg%3D33%26s%3Dfilms_details%26id%3D255&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-UNESCO_list-40"><span><b><a href="#cite_ref-UNESCO_list_40-0">^</a></b></span> <span><cite><a rel="nofollow" href="https://whc.unesco.org/en/list/1506"><i>The Persian Qanat</i></a>, 2016<span>, retrieved <span>November 1,</span> 2017</span></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=The+Persian+Qanat&amp;rft.date=2016&amp;rft_id=https%3A%2F%2Fwhc.unesco.org%2Fen%2Flist%2F1506&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span> This includes the list of eleven significant qanets in Iran</span>
</li>
<li id="cite_note-UNESCO_Persian_Qanat-41"><span><b><a href="#cite_ref-UNESCO_Persian_Qanat_41-0">^</a></b></span> <span><cite><a rel="nofollow" href="https://whc.unesco.org/archive/2017/whc17-41com-18-en.pdf"><i>The Persian Qanat</i></a> <span>(PDF)</span>, 2016<span>, retrieved <span>November 1,</span> 2017</span></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=The+Persian+Qanat&amp;rft.date=2016&amp;rft_id=https%3A%2F%2Fwhc.unesco.org%2Farchive%2F2017%2Fwhc17-41com-18-en.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span>The Persian Qanats were placed on the list of tenative World Heritage Sites in 2007</span>
</li>
<li id="cite_note-Qanat-42"><span>^ <a href="#cite_ref-Qanat_42-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Qanat_42-1"><sup><i><b>b</b></i></sup></a></span> <span><cite id="CITEREFAjam">Ajam, Mohammad. <a rel="nofollow" href="http://www.aftabir.com/articles/view/science_education/technical/c3c1183387267p1.php/%D9%82%D9%86%D8%A7%D8%AA-%D9%85%DB%8C%D8%B1%D8%A7%D8%AB-%D9%81%D8%B1%D9%87%D9%86%DA%AF%DB%8C-%D9%88-%D8%B9%D9%84%D9%85%DB%8C-%D8%A7%DB%8C%D8%B1%D8%A7%D9%86%DB%8C%D8%A7%D9%86"><i>Water clock in Persia 1383</i></a>. Conference of Qanat in Iran.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=conference&amp;rft.btitle=Water+clock+in+Persia+1383&amp;rft.aulast=Ajam&amp;rft.aufirst=Mohammad&amp;rft_id=http%3A%2F%2Fwww.aftabir.com%2Farticles%2Fview%2Fscience_education%2Ftechnical%2Fc3c1183387267p1.php%2F%25D9%2582%25D9%2586%25D8%25A7%25D8%25AA-%25D9%2585%25DB%258C%25D8%25B1%25D8%25A7%25D8%25AB-%25D9%2581%25D8%25B1%25D9%2587%25D9%2586%25DA%25AF%25DB%258C-%25D9%2588-%25D8%25B9%25D9%2584%25D9%2585%25DB%258C-%25D8%25A7%25DB%258C%25D8%25B1%25D8%25A7%25D9%2586%25DB%258C%25D8%25A7%25D9%2586&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span> in Persian</span>
</li>
<li id="cite_note-amordadnews.com-43"><span><b><a href="#cite_ref-amordadnews.com_43-0">^</a></b></span> <span>water clock in Persia <cite><a rel="nofollow" href="https://web.archive.org/web/20140429163019/http://amordadnews.com/neveshtehNamyesh.aspx?NId=6010">"تارنمای امرداد - سايه‌ي شهرداري نجف‌آباد بر كهن‌ترين "ساعت آبي"‌ شهر"</a>. Archived from <a rel="nofollow" href="http://amordadnews.com/neveshtehNamyesh.aspx?NId=6010">the original</a> on 2014-04-29<span>. Retrieved <span>2012-03-13</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=%D8%AA%D8%A7%D8%B1%D9%86%D9%85%D8%A7%DB%8C+%D8%A7%D9%85%D8%B1%D8%AF%D8%A7%D8%AF+-+%D8%B3%D8%A7%D9%8A%D9%87%E2%80%8C%D9%8A+%D8%B4%D9%87%D8%B1%D8%AF%D8%A7%D8%B1%D9%8A+%D9%86%D8%AC%D9%81%E2%80%8C%D8%A2%D8%A8%D8%A7%D8%AF+%D8%A8%D8%B1+%D9%83%D9%87%D9%86%E2%80%8C%D8%AA%D8%B1%D9%8A%D9%86+%22%D8%B3%D8%A7%D8%B9%D8%AA+%D8%A2%D8%A8%D9%8A%22%E2%80%8C+%D8%B4%D9%87%D8%B1&amp;rft_id=http%3A%2F%2Famordadnews.com%2FneveshtehNamyesh.aspx%3FNId%3D6010&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span> آAmordad</span>
</li>
<li id="cite_note-Golbot_1979-44"><span><b><a href="#cite_ref-Golbot_1979_44-0">^</a></b></span> <span><cite id="CITEREFGolbot1979">Golbot, Henri (1979). <i>Les Qanats. Une technique d'acquisition de l'eau</i>. Paris: Éditions Mouton. École des hautes études ensciences sociales. Centre de recherches historiques. p.&nbsp;231.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Les+Qanats.+Une+technique+d%27acquisition+de+l%27eau&amp;rft.place=Paris&amp;rft.pages=231&amp;rft.pub=%C3%89ditions+Mouton&amp;rft.date=1979&amp;rft.aulast=Golbot&amp;rft.aufirst=Henri&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span> According to Golbot, by 1979, the combined outflow of all kārēz worldwide had diminished to about 700–800 m3/sec (Golbot 1979:193).</span>
</li>
<li id="cite_note-45"><span><b><a href="#cite_ref-45">^</a></b></span> <span>Semsar Yazdi Ali Asghar, Labbaf Khaneiki Majid, 2011, Qanat in its Cradle; Volume 1, Iran: International Center on Qanats and Historic Hydraulic Structures (ICQHS), pp 75–145</span>
</li>
<li id="cite_note-The_Hindu-46"><span>^ <a href="#cite_ref-The_Hindu_46-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-The_Hindu_46-1"><sup><i><b>b</b></i></sup></a></span> <span><cite><a rel="nofollow" href="https://www.thehindu.com/news/national/karnataka/New-%E2%80%98surang-bavi%E2%80%99-line-found-in-Bidar/article14409242.ece">"New 'surang bavi' line found in Bidar"</a>. <i>The Hindu</i>. 2016-06-29. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://www.worldcat.org/issn/0971-751X">0971-751X</a><span>. Retrieved <span>2023-05-22</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=The+Hindu&amp;rft.atitle=New+%27surang+bavi%27+line+found+in+Bidar&amp;rft.date=2016-06-29&amp;rft.issn=0971-751X&amp;rft_id=https%3A%2F%2Fwww.thehindu.com%2Fnews%2Fnational%2Fkarnataka%2FNew-%25E2%2580%2598surang-bavi%25E2%2580%2599-line-found-in-Bidar%2Farticle14409242.ece&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-47"><span><b><a href="#cite_ref-47">^</a></b></span> <span>UNESCO:<a rel="nofollow" href="http://portal.unesco.org/en/ev.php-URL_ID=46631&amp;URL_DO=DO_TOPIC&amp;URL_SECTION=201.html">Water shortage fueling displacement of people in northern Iraq, UNESCO study finds</a> <a rel="nofollow" href="https://web.archive.org/web/20091019125235/http://portal.unesco.org/en/ev.php-URL_ID%3D46631%26URL_DO%3DDO_TOPIC%26URL_SECTION%3D201.html">Archived</a> 2009-10-19 at the <a href="https://en.wikipedia.org/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a>, October 2009, accessed on October 25, 2009</span>
</li>
<li id="cite_note-48"><span><b><a href="#cite_ref-48">^</a></b></span> <span><cite id="CITEREFYazdani1995">Yazdani, G. (1995-10-01). <i>Bidar: Its History and Monuments</i> (1st Indian&nbsp;ed.). Delhi: Motilal Banarsidass. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-81-208-1071-6" title="Special:BookSources/978-81-208-1071-6"><bdi>978-81-208-1071-6</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Bidar%3A+Its+History+and+Monuments&amp;rft.place=Delhi&amp;rft.edition=1st+Indian&amp;rft.pub=Motilal+Banarsidass&amp;rft.date=1995-10-01&amp;rft.isbn=978-81-208-1071-6&amp;rft.aulast=Yazdani&amp;rft.aufirst=G.&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-49"><span><b><a href="#cite_ref-49">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.deccanherald.com/content/517462/resurrecting-karez.html">"Resurrecting the Karez"</a>. <i>Deccan Herald</i>. 2015-12-14<span>. Retrieved <span>2023-05-22</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=Deccan+Herald&amp;rft.atitle=Resurrecting+the+Karez&amp;rft.date=2015-12-14&amp;rft_id=https%3A%2F%2Fwww.deccanherald.com%2Fcontent%2F517462%2Fresurrecting-karez.html&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-50"><span><b><a href="#cite_ref-50">^</a></b></span> <span><cite id="CITEREFBessetteNiblock2020">Bessette, Jonathan; Niblock, Eric (2020-07-20). <a rel="nofollow" href="https://journals.library.columbia.edu/index.php/consilience/article/view/6739">"Water Quality Pilot Study for Traditional Water Structure Revitalization Potential in the Deccan Plateau of India"</a>. <i>Consilience</i> (22): 6–17. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<a rel="nofollow" href="https://doi.org/10.7916%2Fconsilience.vi22.6739">10.7916/consilience.vi22.6739</a>. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://www.worldcat.org/issn/1948-3074">1948-3074</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Consilience&amp;rft.atitle=Water+Quality+Pilot+Study+for+Traditional+Water+Structure+Revitalization+Potential+in+the+Deccan+Plateau+of+India&amp;rft.issue=22&amp;rft.pages=6-17&amp;rft.date=2020-07-20&amp;rft_id=info%3Adoi%2F10.7916%2Fconsilience.vi22.6739&amp;rft.issn=1948-3074&amp;rft.aulast=Bessette&amp;rft.aufirst=Jonathan&amp;rft.au=Niblock%2C+Eric&amp;rft_id=https%3A%2F%2Fjournals.library.columbia.edu%2Findex.php%2Fconsilience%2Farticle%2Fview%2F6739&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-51"><span><b><a href="#cite_ref-51">^</a></b></span> <span><cite><a rel="nofollow" href="https://www.thehindu.com/news/national/karnataka/a-little-praise-to-help-commoners-take-it-to-the-next-level/article34134711.ece">"A little praise to help commoners take it to the next level"</a>. <i>The Hindu</i>. 2021-03-22. <a href="https://en.wikipedia.org/wiki/ISSN_(identifier)" title="ISSN (identifier)">ISSN</a>&nbsp;<a rel="nofollow" href="https://www.worldcat.org/issn/0971-751X">0971-751X</a><span>. Retrieved <span>2023-05-22</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=The+Hindu&amp;rft.atitle=A+little+praise+to+help+commoners+take+it+to+the+next+level&amp;rft.date=2021-03-22&amp;rft.issn=0971-751X&amp;rft_id=https%3A%2F%2Fwww.thehindu.com%2Fnews%2Fnational%2Fkarnataka%2Fa-little-praise-to-help-commoners-take-it-to-the-next-level%2Farticle34134711.ece&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-52"><span><b><a href="#cite_ref-52">^</a></b></span> <span>Fiorella Rispoli, 'Unmasking a mystery: the curious case of the Gua Made Green masks' <i>Current World Archaeology</i> 43 (Oct/Nov 2010), 42–9.</span>
</li>
<li id="cite_note-53"><span><b><a href="#cite_ref-53">^</a></b></span> <span>Planhol, X. de (2011); "KĀRIZ iv. Origin and Dissemination", in: <i>Encyclopædia Iranica</i>, section: (4) Agricultural uses outside the Iranian lands. <a rel="nofollow" href="http://www.iranicaonline.org/articles/kariz_4">Online</a> retrieved 24 November 2015.</span>
</li>
<li id="cite_note-54"><span><b><a href="#cite_ref-54">^</a></b></span> <span><a rel="nofollow" href="https://www.jstage.jst.go.jp/article/grj1984a/60/2/60_2_109/_article">SYMPOSIUM II RESEARCHES ON “MANBO &amp; QANAT”</a>, J-STAGE, 25 December 2008.</span>
</li>
<li id="cite_note-Querschnitt-55"><span><b><a href="#cite_ref-Querschnitt_55-0">^</a></b></span> <span><cite id="CITEREFMathias_Döring">Mathias Döring. <a rel="nofollow" href="https://web.archive.org/web/20160111182937/https://publikationen.h-da.de/downloadByDMID.skat?dmid=ID1480820_11158167&amp;filename=querschnitt_21.pdf">"Wasser für Gadara – 94 km langer antiker Tunnel im Norden Jordaniens entdeckt"</a> <span>(PDF)</span>. <i>Querschnitt</i>. <b>21</b>: 25–35. Archived from <a rel="nofollow" href="https://publikationen.h-da.de/downloadByDMID.skat?dmid=ID1480820_11158167&amp;filename=querschnitt_21.pdf">the original</a> <span>(PDF)</span> on 2016-01-11<span>. Retrieved <span>2012-09-12</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Querschnitt&amp;rft.atitle=Wasser+f%C3%BCr+Gadara+%E2%80%93+94+km+langer+antiker+Tunnel+im+Norden+Jordaniens+entdeckt&amp;rft.volume=21&amp;rft.pages=25-35&amp;rft.au=Mathias+D%C3%B6ring&amp;rft_id=https%3A%2F%2Fpublikationen.h-da.de%2FdownloadByDMID.skat%3Fdmid%3DID1480820_11158167%26filename%3Dquerschnitt_21.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span> p 25, 32</span>
</li>
<li id="cite_note-56"><span><b><a href="#cite_ref-56">^</a></b></span> <span><a href="https://en.wikipedia.org/wiki/UNESCO" title="UNESCO">UNESCO</a>:<a rel="nofollow" href="https://whc.unesco.org/en/tentativelists/6110/">UNESO Karez System Cultural Landscape</a></span>
</li>
<li id="cite_note-57"><span><b><a href="#cite_ref-57">^</a></b></span> <span><a href="https://en.wikipedia.org/wiki/UNESCO" title="UNESCO">UNESCO</a>:<a rel="nofollow" href="https://whc.unesco.org/en/list/1207/">Aflaj Irrigation Systems of Oman</a>, accessed on October 25, 2009</span>
</li>
<li id="cite_note-OBG2010-58"><span><b><a href="#cite_ref-OBG2010_58-0">^</a></b></span> <span><cite><a rel="nofollow" href="https://books.google.com/books?id=f9l90XsF5-sC&amp;pg=PA171">"Al Ain"</a>. <i>The Report Abu Dhabi 2010</i>. Oxford Business Group. 2010. p.&nbsp;171. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-1-9070-6521-7" title="Special:BookSources/978-1-9070-6521-7"><bdi>978-1-9070-6521-7</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=bookitem&amp;rft.atitle=Al+Ain&amp;rft.btitle=The+Report+Abu+Dhabi+2010&amp;rft.pages=171&amp;rft.pub=Oxford+Business+Group&amp;rft.date=2010&amp;rft.isbn=978-1-9070-6521-7&amp;rft_id=https%3A%2F%2Fbooks.google.com%2Fbooks%3Fid%3Df9l90XsF5-sC%26pg%3DPA171&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-59"><span><b><a href="#cite_ref-59">^</a></b></span> <span><cite><a rel="nofollow" href="https://gulfnews.com/uae/new-evidence-shows-falaj-in-al-ain-is-worlds-oldest-1.350276">"New evidence shows falaj in Al Ain is world's oldest"</a>. <i>gulfnews.com</i>. 2003-03-16<span>. Retrieved <span>2023-08-09</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=unknown&amp;rft.jtitle=gulfnews.com&amp;rft.atitle=New+evidence+shows+falaj+in+Al+Ain+is+world%27s+oldest&amp;rft.date=2003-03-16&amp;rft_id=https%3A%2F%2Fgulfnews.com%2Fuae%2Fnew-evidence-shows-falaj-in-al-ain-is-worlds-oldest-1.350276&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-60"><span><b><a href="#cite_ref-60">^</a></b></span> <span><cite id="CITEREFPower">Power, Timothy. <a rel="nofollow" href="https://www.academia.edu/35872359">"Julfar and the Ports of Northern Oman"</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.atitle=Julfar+and+the+Ports+of+Northern+Oman&amp;rft.aulast=Power&amp;rft.aufirst=Timothy&amp;rft_id=https%3A%2F%2Fwww.academia.edu%2F35872359&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span> </span>
</li>
<li id="cite_note-61"><span><b><a href="#cite_ref-61">^</a></b></span> <span><cite id="CITEREFApostol2004"><a href="https://en.wikipedia.org/wiki/Tom_M._Apostol" title="Tom M. Apostol">Apostol, Tom M.</a> (2004). <a rel="nofollow" href="https://web.archive.org/web/20110714025051/http://www.mamikon.com/TunnelSamos.pdf">"The Tunnel of Samos"</a> <span>(PDF)</span>. <i>Engineering and Science</i> (1): 30–40. Archived from <a rel="nofollow" href="http://www.mamikon.com/TunnelSamos.pdf">the original</a> <span>(PDF)</span> on 2011-07-14<span>. Retrieved <span>2012-09-14</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Engineering+and+Science&amp;rft.atitle=The+Tunnel+of+Samos&amp;rft.issue=1&amp;rft.pages=30-40&amp;rft.date=2004&amp;rft.aulast=Apostol&amp;rft.aufirst=Tom+M.&amp;rft_id=http%3A%2F%2Fwww.mamikon.com%2FTunnelSamos.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-62"><span><b><a href="#cite_ref-62">^</a></b></span> <span>Grewe, Klaus: <i>Licht am Ende des Tunnels. Planung und Trassierung im antiken Tunnelbau</i>, Mainz 1998, <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/3-8053-2492-8" title="Special:BookSources/3-8053-2492-8">3-8053-2492-8</a>, pp.94–96</span>
</li>
<li id="cite_note-63"><span><b><a href="#cite_ref-63">^</a></b></span> <span>Lofrane, G. et al. (2013); "Water Collection and Distribution Systems in the Palermo Plain during the Middle Ages", in: <i>Water</i>, vol. 5, nr 4. Online <a rel="nofollow" href="http://www.mdpi.com/2073-4441/5/4/1662/htm">here</a></span>
</li>
<li id="cite_note-64"><span><b><a href="#cite_ref-64">^</a></b></span> <span><a rel="nofollow" href="http://www.raschpetzer.lu/doc/RaschpVersionDeFr.pdf">Pierre Kayser and Guy Waringo: L’aqueduc souterrain des Raschpëtzer, un monument antique de l’art de l’ingénieur au Luxembourg</a> <a rel="nofollow" href="https://web.archive.org/web/20090305153936/http://www.raschpetzer.lu/doc/RaschpVersionDeFr.pdf">Archived</a> 2009-03-05 at the <a href="https://en.wikipedia.org/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a>. Retrieved 2 December 2007.</span>
</li>
<li id="cite_note-65"><span><b><a href="#cite_ref-65">^</a></b></span> <span><span>(in Spanish)</span> <a rel="nofollow" href="http://www.ucm.es/BUCM/revistas/ghi/02143038/articulos/ELEM8484120249A.PDF">Water supplies in Granada</a> <a rel="nofollow" href="https://web.archive.org/web/20110609052009/http://www.ucm.es/BUCM/revistas/ghi/02143038/articulos/ELEM8484120249A.PDF">Archived</a> 2011-06-09 at the <a href="https://en.wikipedia.org/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a> – A good visible qanat can be seen to the west of the church of San Lorenzo, a suburb of Segovia, irrigating what were <span title="Spanish-language text"><i lang="es">huertas</i></span> (market gardens).</span>
</li>
<li id="cite_note-Schreiber_and_Lancho_Rojas-66"><span><b><a href="#cite_ref-Schreiber_and_Lancho_Rojas_66-0">^</a></b></span> <span><cite id="CITEREFSchreiberLancho_Rojas1995">Schreiber, Katharina; Lancho Rojas, Josue (1995). <a rel="nofollow" href="https://www,jstor.org/stable/971674">"The Puquios of Nasca"</a>. <i>Latin American Antiquity</i>. <b>6</b> (3): 252–253. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<a rel="nofollow" href="https://doi.org/10.2307%2F971674">10.2307/971674</a>. <a href="https://en.wikipedia.org/wiki/JSTOR_(identifier)" title="JSTOR (identifier)">JSTOR</a>&nbsp;<a rel="nofollow" href="https://www.jstor.org/stable/971674">971674</a>. <a href="https://en.wikipedia.org/wiki/S2CID_(identifier)" title="S2CID (identifier)">S2CID</a>&nbsp;<a rel="nofollow" href="https://api.semanticscholar.org/CorpusID:163646495">163646495</a><span>. Retrieved <span>9 April</span> 2021</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Latin+American+Antiquity&amp;rft.atitle=The+Puquios+of+Nasca&amp;rft.volume=6&amp;rft.issue=3&amp;rft.pages=252-253&amp;rft.date=1995&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A163646495%23id-name%3DS2CID&amp;rft_id=https%3A%2F%2Fwww.jstor.org%2Fstable%2F971674%23id-name%3DJSTOR&amp;rft_id=info%3Adoi%2F10.2307%2F971674&amp;rft.aulast=Schreiber&amp;rft.aufirst=Katharina&amp;rft.au=Lancho+Rojas%2C+Josue&amp;rft_id=https%3A%2F%2Fwww%2Cjstor.org%2Fstable%2F971674&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-67"><span><b><a href="#cite_ref-67">^</a></b></span> <span><a rel="nofollow" href="https://web.archive.org/web/20041016133645/http://www.qanat.info/en/colloge.php">Libyan web site on qanats</a></span>
</li>
<li id="cite_note-Licteetal2020-68"><span>^ <a href="#cite_ref-Licteetal2020_68-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Licteetal2020_68-1"><sup><i><b>b</b></i></sup></a> <a href="#cite_ref-Licteetal2020_68-2"><sup><i><b>c</b></i></sup></a></span> <span><cite id="CITEREFLictevoutAbellanosaMaassPérez2020">Lictevout, Elizabeth; Abellanosa, Carlos; Maass, Constanza; Pérez, Nicolás; Gonzalo, Yáñez; Véronique, Leonardi Véronique (2020). <a rel="nofollow" href="http://www.andeangeology.cl/index.php/revista1/article/view/V47n3-3272/html">"Exploration, mapping and characterization of filtration galleries of the Pica Oasis, northern Chile: A contribution to the knowledge of the Pica aquifer"</a>. <i><a href="https://en.wikipedia.org/wiki/Andean_Geology" title="Andean Geology">Andean Geology</a></i>. <b>47</b> (3): 529–558. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<span title="Freely accessible"><a rel="nofollow" href="https://doi.org/10.5027%2FandgeoV47n3-3272">10.5027/andgeoV47n3-3272</a></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Andean+Geology&amp;rft.atitle=Exploration%2C+mapping+and+characterization+of+filtration+galleries+of+the+Pica+Oasis%2C+northern+Chile%3A+A+contribution+to+the+knowledge+of+the+Pica+aquifer&amp;rft.volume=47&amp;rft.issue=3&amp;rft.pages=529-558&amp;rft.date=2020&amp;rft_id=info%3Adoi%2F10.5027%2FandgeoV47n3-3272&amp;rft.aulast=Lictevout&amp;rft.aufirst=Elizabeth&amp;rft.au=Abellanosa%2C+Carlos&amp;rft.au=Maass%2C+Constanza&amp;rft.au=P%C3%A9rez%2C+Nicol%C3%A1s&amp;rft.au=Gonzalo%2C+Y%C3%A1%C3%B1ez&amp;rft.au=V%C3%A9ronique%2C+Leonardi+V%C3%A9ronique&amp;rft_id=http%3A%2F%2Fwww.andeangeology.cl%2Findex.php%2Frevista1%2Farticle%2Fview%2FV47n3-3272%2Fhtml&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Getty_1913-69"><span><b><a href="#cite_ref-Getty_1913_69-0">^</a></b></span> <span><cite><a rel="nofollow" href="http://www.gettyimages.ca/detail/news-photo/portrait-of-persian-diplomat-ali-kuli-khan-and-his-wife-news-photo/102685628#portrait-of-persian-diplomat-ali-kuli-khan-and-his-wife-american-as-picture-id102685628">"American Florence (Breed) Khanum (1875–1950)"</a>. Getty Images. January 1, 1913<span>. Retrieved <span>November 1,</span> 2017</span>. <q><span></span>"Portrait of Persian diplomat Ali Kuli Khan (1879–1966) and his wife, American Florence Khanum (nee Breed, 1875–1950) as they posed next to a carriage in front of the White House, Washington DC, 1913. January 01, 1913</q></cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=unknown&amp;rft.btitle=American+Florence+%28Breed%29+Khanum+%281875%E2%80%931950%29&amp;rft.series=Getty+Images&amp;rft.date=1913-01-01&amp;rft_id=http%3A%2F%2Fwww.gettyimages.ca%2Fdetail%2Fnews-photo%2Fportrait-of-persian-diplomat-ali-kuli-khan-and-his-wife-news-photo%2F102685628%23portrait-of-persian-diplomat-ali-kuli-khan-and-his-wife-american-as-picture-id102685628&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-Gail_1991-70"><span><b><a href="#cite_ref-Gail_1991_70-0">^</a></b></span> <span><cite id="CITEREFGail1991">Gail, Marzieh (1991). <a rel="nofollow" href="http://holy-writings.com/index.php?a=RESULT&amp;d=/en/Bahai%20Faith/2%20-%20Bahai%20Studies/Marzieh%20Gail/Arches%20of%20the%20Years.txt&amp;q=Haifa&amp;q2=5&amp;c=1"><i>Arches of the Years</i></a>. George Ronald Publisher. p.&nbsp;339<span>. Retrieved <span>November 1,</span> 2017</span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Arches+of+the+Years&amp;rft.pages=339&amp;rft.pub=George+Ronald+Publisher&amp;rft.date=1991&amp;rft.aulast=Gail&amp;rft.aufirst=Marzieh&amp;rft_id=http%3A%2F%2Fholy-writings.com%2Findex.php%3Fa%3DRESULT%26d%3D%2Fen%2FBahai%2520Faith%2F2%2520-%2520Bahai%2520Studies%2FMarzieh%2520Gail%2FArches%2520of%2520the%2520Years.txt%26q%3DHaifa%26q2%3D5%26c%3D1&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-71"><span><b><a href="#cite_ref-71">^</a></b></span> <span><cite><a rel="nofollow" href="http://ifpnews.com/exclusive/even-underground-tunnels-used-to-get-married-in-iran/">"Even Underground Tunnels Used to Get Married in Iran!"</a>. <i>IFP News</i>. 2018-07-21<span>. Retrieved <span>2018-07-22</span></span>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=IFP+News&amp;rft.atitle=Even+Underground+Tunnels+Used+to+Get+Married+in+Iran%21&amp;rft.date=2018-07-21&amp;rft_id=http%3A%2F%2Fifpnews.com%2Fexclusive%2Feven-underground-tunnels-used-to-get-married-in-iran%2F&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
<li id="cite_note-72"><span><b><a href="#cite_ref-72">^</a></b></span> <span><cite id="CITEREFKhaneiki2021">Khaneiki, Majid Labbaf (2021). <i>Cultural Dynamics Of Water In Iranian Civilization</i>. Cham, Switzerland: <a href="https://en.wikipedia.org/wiki/Springer_Nature" title="Springer Nature">Springer Nature</a>. p.&nbsp;138. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-3-030-58902-8" title="Special:BookSources/978-3-030-58902-8"><bdi>978-3-030-58902-8</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=book&amp;rft.btitle=Cultural+Dynamics+Of+Water+In+Iranian+Civilization.&amp;rft.place=Cham%2C+Switzerland&amp;rft.pages=138&amp;rft.pub=Springer+Nature&amp;rft.date=2021&amp;rft.isbn=978-3-030-58902-8&amp;rft.aulast=Khaneiki&amp;rft.aufirst=Majid+Labbaf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></span>
</li>
</ol></div>
<h2><span id="References">References</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=46" title="Edit section: References"><span>edit</span></a><span>]</span></span></h2>
<ul><li><cite id="CITEREFEnglish1968">English, Paul Ward (1968). "The Origin and Spread of Qanats in the Old World". <i>Proceedings of the American Philosophical Society</i>. <b>112</b> (3): 170–181. <a href="https://en.wikipedia.org/wiki/JSTOR_(identifier)" title="JSTOR (identifier)">JSTOR</a>&nbsp;<a rel="nofollow" href="https://www.jstor.org/stable/986162">986162</a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Proceedings+of+the+American+Philosophical+Society&amp;rft.atitle=The+Origin+and+Spread+of+Qanats+in+the+Old+World&amp;rft.volume=112&amp;rft.issue=3&amp;rft.pages=170-181&amp;rft.date=1968&amp;rft_id=https%3A%2F%2Fwww.jstor.org%2Fstable%2F986162%23id-name%3DJSTOR&amp;rft.aulast=English&amp;rft.aufirst=Paul+Ward&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span></li>
<li><cite id="CITEREFKaveh_Madani2008"><a href="https://en.wikipedia.org/wiki/Kaveh_Madani" title="Kaveh Madani">Kaveh Madani</a> (2008). <a rel="nofollow" href="http://scitation.aip.org/vsearch/servlet/VerityServlet?KEY=ASCERL&amp;smode=strresults&amp;maxdisp=25&amp;possible1=Madani%2C+Kaveh&amp;possible1zone=author&amp;OUTLOG=NO&amp;aqs=true&amp;viewabs=ASCECP&amp;key=DISPLAY&amp;docID=1&amp;page=0&amp;chapter=0&amp;aqs=true">"Reasons behind Failure of Qanats in the 20th Century"</a>. <i>World Environmental and Water Resources Congress 2008</i>: 1–8. <a href="https://en.wikipedia.org/wiki/Doi_(identifier)" title="Doi (identifier)">doi</a>:<a rel="nofollow" href="https://doi.org/10.1061%2F40976%28316%2977">10.1061/40976(316)77</a>. <a href="https://en.wikipedia.org/wiki/ISBN_(identifier)" title="ISBN (identifier)">ISBN</a>&nbsp;<a href="https://en.wikipedia.org/wiki/Special:BookSources/978-0-7844-0976-3" title="Special:BookSources/978-0-7844-0976-3"><bdi>978-0-7844-0976-3</bdi></a>.</cite><span title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=World+Environmental+and+Water+Resources+Congress+2008&amp;rft.atitle=Reasons+behind+Failure+of+Qanats+in+the+20th+Century&amp;rft.pages=1-8&amp;rft.date=2008&amp;rft_id=info%3Adoi%2F10.1061%2F40976%28316%2977&amp;rft.isbn=978-0-7844-0976-3&amp;rft.au=Kaveh+Madani&amp;rft_id=http%3A%2F%2Fscitation.aip.org%2Fvsearch%2Fservlet%2FVerityServlet%3FKEY%3DASCERL%26smode%3Dstrresults%26maxdisp%3D25%26possible1%3DMadani%252C%2BKaveh%26possible1zone%3Dauthor%26OUTLOG%3DNO%26aqs%3Dtrue%26viewabs%3DASCECP%26key%3DDISPLAY%26docID%3D1%26page%3D0%26chapter%3D0%26aqs%3Dtrue&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AQanat"></span><sup><span>[<i><a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" title="Wikipedia:Link rot"><span title="&nbsp;Dead link tagged January 2018">permanent dead link</span></a></i>]</span></sup></li>
<li>Hadden, Robert Lee. 2005. <a rel="nofollow" href="https://wayback.archive-it.org/all/20120914110948/http://handle.dtic.mil/100.2/ADA444101">"Adits, Caves, Karizi-Qanats, and Tunnels in Afghanistan: An Annotated Bibliography,"</a> <a href="https://en.wikipedia.org/wiki/United_States_Army_Corps_of_Engineers" title="United States Army Corps of Engineers">United States Army Corps of Engineers</a>, <a href="https://en.wikipedia.org/wiki/Army_Geospatial_Center" title="Army Geospatial Center">Army Geospatial Center</a>.</li>
<li>Ozden, Dursun Directed &amp; Written by; ANATOLIAN WATER CIVILIZATION &amp; ANATOLIAN KARIZES-QANATS, The Documentary Film &amp; Book, 2004–2011 Istanbul, Turkey. <i><a rel="nofollow" href="http://www.dursunozden.com.tr/">http://www.dursunozden.com.tr</a></i></li></ul>
<h2><span id="External_links">External links</span><span><span>[</span><a href="https://en.wikipedia.org/w/index.php?title=Qanat&amp;action=edit&amp;section=47" title="Edit section: External links"><span>edit</span></a><span>]</span></span></h2>
<div>
<p><span typeof="mw:File"><span><img alt="" src="https://upload.wikimedia.org/wikipedia/en/thumb/4/4a/Commons-logo.svg/30px-Commons-logo.svg.png" decoding="async" width="30" height="40" srcset="https://upload.wikimedia.org/wikipedia/en/thumb/4/4a/Commons-logo.svg/45px-Commons-logo.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/en/thumb/4/4a/Commons-logo.svg/59px-Commons-logo.svg.png 2x" data-file-width="1024" data-file-height="1376"></span></span></p>
<p>Wikimedia Commons has media related to <span><a href="https://commons.wikimedia.org/wiki/Category:Qanat" title="commons:Category:Qanat">Qanat</a></span>.</p></div>
<ul><li><a rel="nofollow" href="http://www.waterhistory.org/histories/turpan/">WaterHistory.org Article on Karez in Turpan, Xinjiang, China</a></li>
<li><a rel="nofollow" href="https://wwf.panda.org/wwf_news/?2637/Peace-in-Afghanistan-requires-good-water-management">World Wildlife Fund Editorial on Karez in Afghanistan</a></li>
<li><a rel="nofollow" href="https://web.archive.org/web/20040715213146/http://www.qanat.info/">Useful information on Qanat provided by Farzad Kohandel, in arabic</a> <a rel="nofollow" href="https://web.archive.org/web/20050205102218/http://qanat.info/en/index.php">and in english</a></li>
<li><a rel="nofollow" href="https://www.livius.org/articles/misc/qanat/">Qanat</a></li>
<li><a rel="nofollow" href="https://web.archive.org/web/20100326131646/http://www.destinationiran.com/Kariz_(Qanat).htm">Information on Qanats (includes photo of access shafts from above)</a></li>
<li><a rel="nofollow" href="https://web.archive.org/web/20040715213146/http://www.qanat.info/">International Center on Qanats and Historic Hydraulic Structures</a></li>
<li><a rel="nofollow" href="https://books.google.com/books?id=SFkLAAAAIAAJ&amp;q=achaemenid">The origin and spread of qanats in the Old World</a> – by PW English, in <i>Proceedings of the American Philosophical Society</i> Volume 112, Number 3 June 21, 1968.</li>
<li><a rel="nofollow" href="https://web.archive.org/web/20060720133318/http://www.saudiaramcoworld.com/issue/200603/the.art.and.science.of.water.htm">The art and science of water, in Saudi Aramco May/June 2006</a></li>
<li><a rel="nofollow" href="https://web.archive.org/web/20131030121819/http://www.bestofsicily.com/mag/art154.htm">Carlo Trabia: "Kanats of Sicily", in: <i>Best of Sicily Magazine,</i> March 2005, with Photo</a></li>
<li><a rel="nofollow" href="https://web.archive.org/web/20121007144217/http://www.saudiaramcoworld.com/issue/199206/oman.s.unfailing.springs..htm">Lynn Teo Simarski, <i>Oman's "Unfailing Springs"</i>, 1992, Saudi Aramco World</a></li>
<li><a rel="nofollow" href="https://uh.edu/engines/epi1250.htm">"Engines of Ingenuity," episode no. 1250, "Water in the Desert," University of Houston, College of Engineering</a></li></ul>

<!-- 
NewPP limit report
Parsed by mw1433
Cached time: 20231111181631
Cache expiry: 1814400
Reduced expiry: false
Complications: [vary‐revision‐sha1, show‐toc]
CPU time usage: 0.971 seconds
Real time usage: 1.200 seconds
Preprocessor visited node count: 7484/1000000
Post‐expand include size: 138649/2097152 bytes
Template argument size: 8582/2097152 bytes
Highest expansion depth: 16/100
Expensive parser function count: 26/500
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 179157/5000000 bytes
Lua time usage: 0.613/10.000 seconds
Lua memory usage: 22599805/52428800 bytes
Number of Wikibase entities loaded: 1/400
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 1048.917      1 -total
 36.55%  383.335      1 Template:Reflist
 14.70%  154.196     15 Template:Cite_journal
  8.14%   85.350     13 Template:Annotated_link
  8.00%   83.869     13 Template:Transliteration
  7.45%   78.093      1 Template:Authority_control
  7.10%   74.511     16 Template:Cite_book
  6.75%   70.754      1 Template:Cleanup
  6.00%   62.921     14 Template:Main_other
  5.52%   57.850     15 Template:Cite_web
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:536059-0!canonical and timestamp 20231111181630 and revision id 1184638151. Rendering was triggered because: page-view
 -->
</div></div>]]></description>
        </item>
    </channel>
</rss>