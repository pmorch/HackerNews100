<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Fri, 23 Feb 2024 13:00:07 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Thanks FedEx, This Is Why We Keep Getting Phished (418 pts)]]></title>
            <link>https://www.troyhunt.com/thanks-fedex-this-is-why-we-keep-getting-phished/</link>
            <guid>39479001</guid>
            <pubDate>Fri, 23 Feb 2024 10:26:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.troyhunt.com/thanks-fedex-this-is-why-we-keep-getting-phished/">https://www.troyhunt.com/thanks-fedex-this-is-why-we-keep-getting-phished/</a>, See on <a href="https://news.ycombinator.com/item?id=39479001">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
<p>I've been getting a lot of those "your parcel couldn't be delivered" phishing attacks lately and if you're a human with a phone, you probably have been too. Just as a brief reminder, they look like this:</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/IMG_4658-1.jpg" alt="" loading="lazy" width="1029" height="510" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/IMG_4658-1.jpg 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/IMG_4658-1.jpg 1000w, https://www.troyhunt.com/content/images/2024/02/IMG_4658-1.jpg 1029w" sizes="(min-width: 720px) 720px"></figure><figure><img src="https://www.troyhunt.com/content/images/2024/02/IMG_4659.jpg" alt="" loading="lazy" width="1026" height="506" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/IMG_4659.jpg 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/IMG_4659.jpg 1000w, https://www.troyhunt.com/content/images/2024/02/IMG_4659.jpg 1026w" sizes="(min-width: 720px) 720px"></figure><figure><img src="https://www.troyhunt.com/content/images/2024/02/IMG_4660.jpg" alt="" loading="lazy" width="1057" height="441" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/IMG_4660.jpg 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/IMG_4660.jpg 1000w, https://www.troyhunt.com/content/images/2024/02/IMG_4660.jpg 1057w" sizes="(min-width: 720px) 720px"></figure><p>These get through all the technical controls that exist at my telco and they land smack bang in my SMS inbox. However, I don't fall for the scams because I look for the warning signs: a sense of urgency, fear of missing out, and strange URLs that look nothing like any parcel delivery service I know of. They have a pretty rough go of convincing me they're from Australia Post by putting "auspost" somewhere or other within each link, but I'm a smart human so I don't fall for this (that's a joke, <a href="https://www.troyhunt.com/humans-are-bad-at-urls-and-fonts-dont-matter/" rel="noreferrer">read why humans are bad at URLs</a>).</p><p>However... I <em>am</em> expecting a parcel. It's well into the 2020's and post COVID so I'm <em>always</em> expecting a parcel, because that's just how we buy stuff these days. And so, when I received the following SMS earlier this week I was expecting a parcel <em>and</em> I was expecting phishing attacks:</p>

<figure><img src="https://www.troyhunt.com/content/images/2024/02/Screenshot-2024-02-22-at-12.26.43-unnumbered-1.png"></figure>

<p>So... which is it? Parcel or phish? Let's see what the people say:</p>

<blockquote data-conversation="none"><p lang="en" dir="ltr">Referring to the parent tweet, is this message legit and should I pay the duty and taxes?</p>‚Äî Troy Hunt (@troyhunt) <a href="https://twitter.com/troyhunt/status/1759827511402537256?ref_src=twsrc%5Etfw&amp;ref=troyhunt.com">February 20, 2024</a></blockquote> 

<p>Whoa - that's an 87% "dodgy AF" vote from over 4,000 respondents so yeah, that's pretty emphatic. Why such an overwhelmingly suspicious crowd? Let's break that message down into 7 "dodgy AF" signs:</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/Screenshot-2024-02-22-at-12.26.43-2.jpeg" alt="" loading="lazy" width="1286" height="1133" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/Screenshot-2024-02-22-at-12.26.43-2.jpeg 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/Screenshot-2024-02-22-at-12.26.43-2.jpeg 1000w, https://www.troyhunt.com/content/images/2024/02/Screenshot-2024-02-22-at-12.26.43-2.jpeg 1286w"></figure><ol><li>Phishers commonly make typos in their messaging and I know "FedEx" always capitalises the "E". And what's with the "-Exp"? Dodgy AF!</li><li>Why does the shipment number look so short? And why is it identical to the requested payment below? Dodgy AF!</li><li>Ah, so it's <em>urgent</em> is it? Urgency is a core tenet of social engineering as it encourages people to act without properly thinking it though. Dodgy AF!</li><li>Why are the "D" and the "T" capitalised? Dodgy AF!</li><li>This is a US-headquartered global delivery parcel service, why aren't they telling me the currency? Or even using a dollar sign? Dodgy AF!</li><li>Does this even need explaining? What's this "bpoint.com.au" service? It's definitely not a FedEx domain nor an Aussie gov one if we're talking duty and taxes. Dodgy AF!</li><li>So... <em>you're</em> going to give me the contact details for any "query" (not "queries", so there's another grammatical red flag), <a href="https://news.nab.com.au/news/nab-removes-links-in-text-messages/?ref=troyhunt.com" rel="noreferrer">the very practice we're now moving away from</a> for one simple reason: because it's dodgy AF!</li></ol><p>And so, I was with the 87% of other people. However... I was expecting a package. From FedEx. Coming from outside Australia so it may attract duty and taxes. And I <em>really</em> want to get this package because it's a new 3D printer from Prusa, and they're awesome!</p><p>There's a sage piece of advice that's always relevant in these cases and it's very simple: if in doubt, go the website in question and verify the request yourself. So, I went to the purchase confirmation from Prusa, found the shipping details and followed the link to the FedEx website. Now it was simply a matter of finding the section that talks about tax, except...</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/IMG_2736.jpg" alt="" loading="lazy" width="2000" height="1993" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/IMG_2736.jpg 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/IMG_2736.jpg 1000w, https://www.troyhunt.com/content/images/size/w1600/2024/02/IMG_2736.jpg 1600w, https://www.troyhunt.com/content/images/2024/02/IMG_2736.jpg 2048w"></figure><p>Dodgy. A. F.</p><p>I went all through that page and couldn't find a single reference to duty, nor for anything tax related. Try as I might, I couldn't establish the authenticity of the SMS by going directly to the (alleged) source. But what I <em>could</em> easily establish is that if you follow that link in the URL, you can change the tracking number, the customer name and the amount <em>to absolutely anything you want!</em></p><figure><img src="https://www.troyhunt.com/content/images/2024/02/image-18.png" alt="" loading="lazy" width="1114" height="866" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/image-18.png 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/image-18.png 1000w, https://www.troyhunt.com/content/images/2024/02/image-18.png 1114w"></figure><p>This is all done by simply changing the URL parameters; I'm not modifying the browser DoM or intercepting traffic or doing anything fancy, it's literally just query string parameter tampering reflected XSS style. This feels like every phishing site ever, not a payment service run by Australia's largest bank. Seriously, <a href="https://www.commbank.com.au/business/payments/take-online-payments/bpoint-payment-gateway.html?ref=troyhunt.com" rel="noreferrer">BPOINT is provided by the Commonwealth Bank</a> and after the experience above, I'm at the point of reaching out to them and making a disclosure. Except that this is how the system was obviously designed to work and it's a completely parallel issue to phishy FedEx SMSs. Speaking of which, the very next morning I got another one from the same sender:</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/image-19.png" alt="" loading="lazy" width="1290" height="1019" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/image-19.png 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/image-19.png 1000w, https://www.troyhunt.com/content/images/2024/02/image-19.png 1290w"></figure><p>I don't know if this makes it better or worse ü§¶‚Äç‚ôÇÔ∏è Let's just jump into the highlights, both good and bad:</p><ol><li>My shipping number is now actually in the text of the email - yay!</li><li>The words "duty" and "taxes" are now represented in the correct case - yay!</li><li>The words "PAY NOW" are capitalised which seems... dodgy AF!</li><li>And my favourite bit of all: the "link" isn't actually a link at all because it contains no scheme, no domain and no path, just the query string parameters! Dodgy AF!</li></ol><p>It's quite unbelievable what they've done with the link because it makes the SMS entirely unactionable. It's impossible to click anywhere and pay the money. And while I'm here, why are all the query string parameter names now capitalised? It's like there's a completely different (broken) process somewhere generating these links. Or scammers just aren't consistent...</p><p>Because "dodgy AF" is the prevailing theme, I needed to dig deeper, so I searched for the 1800 number. One of the first results was for <a href="https://www.reverseaustralia.com/lookup/1800111112/?ref=troyhunt.com" rel="noreferrer">a Reverse Australia page for that number</a> which upon reading the first 3 comments, perfectly summed up the sentiment so far:</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/image-20.png" alt="" loading="lazy" width="1254" height="524" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/image-20.png 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/image-20.png 1000w, https://www.troyhunt.com/content/images/2024/02/image-20.png 1254w"></figure><p>And the more you read both on that site and other top links in the search results, the more people are totally confused about the legitimacy of the messages. There's only one thing to do - call FedEx. Not by the number in the (still potentially phishy) SMS, but rather via the number on their website. So, click the "Support" menu item, down to "Customer Support" and <a href="https://www.fedex.com/en-au/customer-support.html?ref=troyhunt.com" rel="noreferrer">we end up here</a>:</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/image-21.png" alt="" loading="lazy" width="998" height="536" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/image-21.png 600w, https://www.troyhunt.com/content/images/2024/02/image-21.png 998w"></figure><p>I'll save you the pain of reading the response that ensued, suffice to say that it only referred to email communications and boiled down to suggesting you read the domain of the sender. But I did manage to pin the system down on a phone number which as you'll see, is completely different to the one in the SMS messages:</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/image-22.png" alt="" loading="lazy" width="662" height="178" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/image-22.png 600w, https://www.troyhunt.com/content/images/2024/02/image-22.png 662w"></figure><p>So, I call the number and follow the voice prompts, selecting options via the keypad to route me through to the duty and taxes section. But eventually, several steps deep into the process, the system stops responding to key presses! "1" doesn't work and neither does "2" so without a response, the same message just repeats. But it does offer an alternative and suggestions I call 132610. <em>That's the number I called in the first place to get stuck in this infinite loop!</em></p><p>I try again, this time following a different series of prompts that eventually asks for a tracking number and then proceeds to tell me precisely what the website already does! But it also provides the option to speak to a customer service operator and I'm actually promptly put through. The operator explains that my shipment is valued at US$799 which converts to AU$1,215.97 and it therefore subject to some inbound fees. "Great, but how much and does it match what's in the phishy SMSs I've received?" He promises someone will call be back shortly...</p><p>And then, out of the blue 3 days after the initial phishy SMS arrived, an email landed in my inbox:</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/image-23.png" alt="" loading="lazy" width="1802" height="2085" srcset="https://www.troyhunt.com/content/images/size/w600/2024/02/image-23.png 600w, https://www.troyhunt.com/content/images/size/w1000/2024/02/image-23.png 1000w, https://www.troyhunt.com/content/images/size/w1600/2024/02/image-23.png 1600w, https://www.troyhunt.com/content/images/2024/02/image-23.png 1802w"></figure><p>The dollar figure, the BPOINT address and the messaging all lined up with the SMSs, but that's just merely correlation and if someone had both my phone number and email address they could easily attempt to phish both with the same details. But then, I looked at the attachment to the email and found this:</p><figure><img src="https://www.troyhunt.com/content/images/2024/02/IMG_2739.jpg" alt="" loading="lazy" width="309" height="198"></figure><p><strong><em>IT'S THE MISSING LINK!!!</em></strong></p><p>My complete Prusa invoice was attached along with the order number, price and shipping details. In other words, 87% of you were wrong üò≤</p><p>On a more serious note, <a href="https://www.abc.net.au/news/2023-04-17/australian-money-losses-to-scams-tops-3b-accc-report-says/102223720?ref=troyhunt.com" rel="noreferrer">Aussies alone are losing north of AU$3B annually to scams</a>, and that's obviously only a drop in the ocean compared to the global scale of this problem. Our Australian Communications and Media Authority body (ACMA) <a href="https://www.acma.gov.au/articles/2023-11/336-million-scam-texts-blocked-telcos?ref=troyhunt.com" rel="noreferrer">recently reported 336M blocked scam SMSs</a> and technical controls like these are obviously great, but absent from their reporting was the number of scam messages they <em>didn't</em> block. There's an easy explanation for this omission: they simply don't know how many are sent. But if I were to take a guess, they've merely blocked the tip of the iceberg. This is why in addition to technical controls, we reply on human controls which means helping people identify the patterns of a scam: requests for money, a sense of urgency, grammar and casing that's a bit off, add looking URLs. You know, stuff like this:</p>

<figure><img src="https://www.troyhunt.com/content/images/2024/02/Screenshot-2024-02-22-at-12.26.43-unnumbered-1.png"></figure>

<p>What makes this situation so ridiculous is that while we're all watching for scammers attempting to imitate legitimate organisations, FedEx is out there imitating scammers! Here we are in the era of burgeoning AI-driven scams that are becoming increasingly hard for humans to identify, and FedEx is like "here, hold my beer" as they one-up the scammers at their own game and do a perfect job of being completely indistinguishable from them.</p><p>Ah well, as I ultimately lament in these situations, it's a good time to be in the industry üòä</p>
<section>
<a href="https://www.troyhunt.com/tag/scam/">Scam</a>
</section>
</section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Intel Processor Instability Causing Oodle Decompression Failures (142 pts)]]></title>
            <link>https://www.radgametools.com/oodleintel.htm</link>
            <guid>39478551</guid>
            <pubDate>Fri, 23 Feb 2024 09:14:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.radgametools.com/oodleintel.htm">https://www.radgametools.com/oodleintel.htm</a>, See on <a href="https://news.ycombinator.com/item?id=39478551">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
<p><img src="https://www.radgametools.com/images/oodle.png" alt="Oodle Data Compression and IO">
</p>

<p>
RAD has become aware of a problem that can cause Oodle Data decompression failures, or crashes in games built with Unreal.
We believe that this is a hardware problem which affects primarily Intel 13900K and 14900K processors, less likely 13700, 14700 and other related processors as well. Only a small fraction of those processors will exhibit this behavior. The problem seems to be caused by a combination of BIOS settings and the high clock rates and power usage of these processors, leading to system instability and unpredictable behavior under heavy load.
</p>
<p>
As far as we can tell, there is not any software bug in Oodle or Unreal that is causing this. Due to what seem to be overly optimistic
BIOS settings, some small percentage of processors go out of their functional range of clock rate and power draw under high load, and
execute instructions incorrectly. This is being seen disproportionately in Oodle Data decompression because unlike most gameplay,
simulation, audio or rendering code, decompression needs to perform extra integrity checks to handle accidentally or maliciously
corrupted data, and is thus likely to spot inconsistencies very soon after they occur. These decode failures then typically result
in an error message.
</p>
<p>
When starting an Unreal Engine-based game, the most common failure is of this type:
</p>
<blockquote>
DecompressShader(): Could not decompress shader (GetShaderCompressionFormat=Oodle)
</blockquote>
<p>
However, this problem does not only affect Oodle, and machines that suffer from this instability will also exhibit failures in standard
benchmark and stress test programs. Any programs which heavily use the processor on many threads may cause crashes or unpredictable behavior.
There have been crashes seen in RealBench, CineBench, Prime95, Handbrake, Visual Studio, and more. This problem can also show up as a GPU error
message, such as spurious "out of video memory" errors, even though it is caused by the CPU.
</p>
<p>
We do not have acccess to diagnostic processor information that would nail down the exact cause and best workaround for this problem.
It seems that many motherboard/BIOS manufacturers are shipping with settings that push the processor outside its safe operating range.
Because this problem appears to affect only a small fraction of processors, some users have had success with returning their processor to the
manufacturer and getting a new one which doesn't exhibit the problem.
</p>
<p>
Other workarounds require using tuning utilities or modifying BIOS settings. Note that doing so incorrectly can cause damage to your system.
The changes we are recommending here are, to the best of our knowledge, completely safe, but you are solely responsible for any damages or loss
caused by changing these settings from their factory defaults. If you are uncomfortable or worried about using tuning utilities (even officially
sanctioned ones) or changing your BIOS settings, and frequent crashes also occur in the benchmark programs mentioned previously, you should be able
to return the CPU or the entire computer to the manufacturer instead.</p>
<p>
A reportedly successful workaround for many people is to use <a href="https://www.intel.com/content/www/us/en/download/17881/intel-extreme-tuning-utility-intel-xtu.html">Intel XTU</a>
and lower the Performance Core multiplier from x55 to x54 or x53. Apparently, affected titles may then crash one more time during load immediately
after, but will work afterwards (we have not been able to confirm this ourselves). Using XTU is likely
the quickest and easiest way to go and doesn't even require rebooting to try different settings, but you might need to reapply it after every start
if you don't save the profile. (Alternatively, set the P-core multiplier in the BIOS instead.)</p>
<p>In the BIOS, if you have enabled any overclocking, please turn it off; do not use "AI" or "automatic" overclocking. Even if you have not explicitly
enabled any overclocking, many BIOSes are doing some by default, so on affected machines you will have to find those settings and turn them off.
Every BIOS has slightly different names for the settings; we cannot provide exact instructions of which settings to look for all of them.
Some of these settings may be in the Advanced or Overclocking submenu of the BIOS.
</p>
<ol type="1">
<li>
First look for settings to put the power limits and voltages of the processor into the Intel recommended safe ranges.
You can find the correct limits for your processor at <a href="https://ark.intel.com/">ark.intel.com</a>.
These might be:
</li>
<ul>
<li>"SVID behavior" ‚Üí "Intel fail safe"</li>
<li>"Long duration power limit" ‚Üí reduce to 125W if set higher ("Processor Base Power" on ARK)</li>
<li>"Short duration power limit" ‚Üí reduce to 253W if set higher (for 13900/14900 CPUs, other CPUs have other limits! "Maximum Turbo Power" on ARK)</li>
</ul>
<li>If those don't work, another thing to look for is BIOS "enhanced turbo" or "enhanced multithreading" settings. For example:</li>
<ul>
<li>"ASUS MultiCore Enhancement" ‚Üí disabled (not Auto)</li>
<li>"ASUS Performance Enhancement 3.0" ‚Üí disabled</li>
</ul>
<li>There have been reports of users finding stability by turning down the maximum clock rate. This can be done with BIOS settings or with Intel XTU. Some possibilities: </li>
<ul>
<li>Turn down the maximum P core multiplier from 55X to 53X or 54X. (for example)</li>
<li>Turn down maximum turbo boost clock rate</li>
<li>Turn off or turn down "thermal velocity boost"</li>
</ul>
</ol>
<p>
Note that many motherboard/BIOS settings turn on XMP (Extreme Memory Profile) by default with unstable settings that can cause similar symptoms. Instability due to XMP is a
separate issue, but if you have instability problems, you may wish to also disable XMP and see if that helps.
</p>
<hr>
<p>
<b>
Troubleshooting Update from Intel Corporation - Additional troubleshooting steps for ASUS, Gigabyte and MSI motherboards:
</b>
</p>
<p>
First, install Intel XTU and run the AVX2 test. If the AVX2 test failure is seen, try these options:
</p>
<ol type="1">
<li>
For ASUS:<p>
Ask customer to change BIOS settings: Advanced (F7)- SVID Behavior: Change to "Intel's Fail Safe"
</p><p>
Reboot the OS and run XTU test again and if the AVX2 test can pass.
Run games and see if the issue happens again.
</p></li>
<li>
For Gigabyte:<p>
Solution A):
In BIOS, select "ADVANCED MODE", in the Tweaker tab, locate the CPU Vcore and select "Normal" option, select "Dynamic Vcore(DVID)" option, change it from "Auto" to "+0.005V"
Increase the DVID by +0.005 and reboot OS, until the game crash disappears and the system is running stable.
</p><p>
Solution B):
In BIOS, select "Tweaker", select "Advanced Voltage Settings", select "CPU/VRAM Settings", adjust "CPU Vcore Loadline Calibration", recommend starting from "Low" to "Medium" until system is stable.
</p><p>After implementing solution A or B, run the XTU test again and if the AVX2 test can pass.
Run games and see if the issue happens again.
</p></li>
<li>
For MSI:<p>
Solution A):
In BIOS, select "OC", select "CPU Core Voltage Mode", select "Offset Mode", select "+(By PWM)", adjust the voltage until the system is stable, recommend not to exceed 0.025V for a single increase.
</p><p>
Solution B):
In BIOS, select "OC", select "DigitALL Power", change "CPU Loadline Calibration Control", recommend starting from "Mode 7" to a lower value until system is stable.
</p><p>After implementing solution A or B, run the XTU test again and if the AVX2 test can pass.
Run games and see if the issue happens again.
</p></li>
</ol>
<hr><p>
Note that we cannot directly support end users of games impacted by this problem, please use the official support channels of the game publisher,
as well as the support channels of the processor and motherboard manufacturers.
</p>
<br>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Facial recognition error message on vending machine sparks concern at University (141 pts)]]></title>
            <link>https://kitchener.ctvnews.ca/facial-recognition-error-message-on-vending-machine-sparks-concern-at-university-of-waterloo-1.6779835</link>
            <guid>39476304</guid>
            <pubDate>Fri, 23 Feb 2024 02:38:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kitchener.ctvnews.ca/facial-recognition-error-message-on-vending-machine-sparks-concern-at-university-of-waterloo-1.6779835">https://kitchener.ctvnews.ca/facial-recognition-error-message-on-vending-machine-sparks-concern-at-university-of-waterloo-1.6779835</a>, See on <a href="https://news.ycombinator.com/item?id=39476304">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
     
    <p> A set of smart vending machines at the University of Waterloo is expected to be removed from campus after students raised privacy concerns about their software.</p> <p> The machines have M&amp;M artwork on them and sell chocolate and other candy. They are located throughout campus, including in the Modern Languages building and Hagey Hall.</p> <p> Earlier this month, a student noticed an error message on one of the machines in the Modern Languages building. It appeared to indicate there was a problem with a facial recognition application.</p> <p> "We wouldn't have known if it weren't for the application error. There's no warning here," said River Stanley, a fourth-year student, who investigated the machines for an article in the university publication, mathNEWS.</p> <p> <img src="https://kitchener.ctvnews.ca/content/dam/ctvnews/en/images/2024/2/22/vending-machine-facial-recognition-1-6779839-1708642207151.jpg" alt=""><span>A vending machine at University of Waterloo displays a facial recognition app error. (Reddit)</span></p> <p> A picture of the error message was posted online and students quickly started sharing it around. Since then, many have tried to cover a small hole on the machine that they believe houses a camera.</p> <p> ‚ÄúWhat students have been doing over the past two weeks is coming up with sticky tack, with chewing gum, with post it notes, doing anything to cover these sensors,‚Äù Stanley said.</p> <p> "[I‚Äôm] kind of shocked just because it's a vending machine, and I don't really think they need to be taking facial recognition," student Dilpreet Sandhu said.</p> <p> Sandhu said once she found out about the machines, it made her question if there are other places this technology could be being used.</p> <p> "It is a university campus, so I feel like the general demographic is young adult. You know, late teens, early twenties," Sandhu said.</p> <p> In an email, the company that provides the machines, Adaria Vending Services Limited, said: ‚ÄúPlease be advised that we are a fulfillment service provider and do not own or manufacture these machines, nor have any access to this type of data from the machines.‚Äù</p> <p> The machines are owned by MARS and the manufacturer is Invenda.</p> <p> "Students started investigating,‚Äù Stanley said. ‚ÄúOver the next day, people are finding these sales processes where you can see this particular model vending machine comes with demographic data sensing capabilities."</p> <p> MARS did not respond to requests for comment from CTV.</p> <p> Invenda also did not respond to CTV‚Äôs requests for comment but told Stanley in an email ‚Äúthe demographic detection software integrated into the smart vending machine operates entirely locally.‚Äù</p> <p> ‚ÄúIt does not engage in storage, communication, or transmission of any imagery or personally identifiable information,‚Äù it continued.</p> <p> According to Invenda‚Äôs website, the Smart Vending Machines can detect the presence of a person, their estimated age and gender. The website said the ‚Äúsoftware conducts local processing of digital image maps derived from the USB optical sensor in real-time, without storing such data on permanent memory mediums or transmitting it over the Internet to the Cloud.‚Äù</p> <p> <img src="https://kitchener.ctvnews.ca/content/dam/ctvnews/en/images/2024/2/22/vending-machine-facial-recognition-1-6779843-1708642828774.jpg" alt=""><span>Students believe there is a camera inside this hole on the vending machine. (Colton Wiens/CTV Kitchener)</span></p> <p> Students quickly spread word about the vending machines online, sparking the push to cover the holes and question what other machines have similar technology.</p> <p> Invenda told Stanley the software is compliant with the European Union privacy law General Data Protection Regulation, but Stanley questions if it‚Äôs legal in Canada.</p> <p> In 2020, an investigation from the federal privacy commissioner<a href="https://www.ctvnews.ca/canada/privacy-investigation-finds-5-million-shoppers-images-collected-at-malls-across-canada-1.5166162"> found embedded cameras inside Cadillac Fairview‚Äôs digital information kiosks</a> used facial recognition technology to record over five million images of shoppers at malls without their customers‚Äô knowledge or consent.</p> <p> "The fact that it has been demonstrated to be against privacy legislation and in particular the lack of expressed meaningful consent to be against privacy legislation ‚Äì that was something that I felt needed to be heard," Stanley said.</p> <p> The University of Waterloo said it is dealing with the situation.</p> <p> ‚ÄúThe university has asked that these machines be removed from campus as soon as possible. In the meantime, we've asked that the software be disabled," University of Waterloo spokesperson Rebecca Elming said.</p> <p> Stanley said if the University does not follow through with removing the machines, he will file a complaint to the Information and Privacy Commissioner of Ontario.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Vice website is shutting down (629 pts)]]></title>
            <link>https://writing.exchange/@ernie/111977450241144169</link>
            <guid>39476074</guid>
            <pubDate>Fri, 23 Feb 2024 02:09:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://writing.exchange/@ernie/111977450241144169">https://writing.exchange/@ernie/111977450241144169</a>, See on <a href="https://news.ycombinator.com/item?id=39476074">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Kagi Smallweb [a directory of small/personal websites] (169 pts)]]></title>
            <link>https://kagi.com/smallweb/</link>
            <guid>39476015</guid>
            <pubDate>Fri, 23 Feb 2024 02:02:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kagi.com/smallweb/">https://kagi.com/smallweb/</a>, See on <a href="https://news.ycombinator.com/item?id=39476015">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><label for="close-popup">X</label></p><p>Hey there, welcome to Kagi Small Web!</p>
<p>Imagine the internet like a huge neighborhood. There's a lot of folks around, but we rarely bump into each other, right? Kagi's all about
humanizing the web and we want to help surface the people behind the posts and stories that zip
by. This less known corner of the web is also known as the "small web". Read
more in our <a href="https://blog.kagi.com/small-web">blog post</a>.</p>
<p>We want to amplify the voices of genuine humans on the web - see <a href="https://github.com/kagisearch/smallweb#small-web">our sources</a>
or check if your blog is in the <a href="https://github.com/kagisearch/smallweb/blob/main/smallweb.txt">list</a>. You'll also
encounter these pages now in <a href="https://kagi.com/">Kagi search</a> when you're looking for something relevant.</p>
<p>Hit 'Next Post' to read something new. We only show posts from the last
seven days to keep it fresh. Feel like saying thanks or jotting down a thought? Use 'Appreciation' and 'Notes'. They'll be around for about a week, but hey, it's a way to say "hi" to someone else out here.
</p>
<p>Find a cool site or spot something sketchy? Use 'Report/Add Site' to help
curate the feed. 
</p>
<p>
And yep, this whole thing is <a href="https://github.com/kagisearch/smallweb">open-source</a>. Oh, and no JavaScript on our
end.</p>
<p>---</p>
<div><p>So, what do you say? Ready to meet some neighbors? 
</p></div>

          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Fed Is Behind the Capital One/Discover Merger (159 pts)]]></title>
            <link>https://www.thebignewsletter.com/p/the-fed-is-behind-the-capital-onediscover</link>
            <guid>39475863</guid>
            <pubDate>Fri, 23 Feb 2024 01:44:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.thebignewsletter.com/p/the-fed-is-behind-the-capital-onediscover">https://www.thebignewsletter.com/p/the-fed-is-behind-the-capital-onediscover</a>, See on <a href="https://news.ycombinator.com/item?id=39475863">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><em><span>Welcome to BIG, a newsletter on the politics of monopoly power. If you‚Äôd like to sign up to receive issues over email, you can do so </span><a href="https://mattstoller.substack.com/subscribe" rel="">here</a><span>.</span></em></p><p>Today I‚Äôm writing about why credit card giant Capital One is trying to buy Discover for $35 billion, which has to do with a loophole the Federal Reserve inserted into our banking laws. If it goes through, this merger will affect the relationship that millions of firms have to the payments system. </p><p><span>First, I want to put out a job opening for something unusual. A Federal judgeship. In Minnesota, Judge Wilhelmina Wright just retired, and Senators Tina Smith and Amy Klobuchar have asked for potential candidates to replace her. Judges make laws around business real, so if you‚Äôre a Minnesota lawyer, consider applying. The application details are </span><a href="https://www.klobuchar.senate.gov/public/index.cfm/2024/1/klobuchar-smith-announce-judicial-selection-committee-for-vacancy-on-federal-district-court" rel="">here</a><span>, the deadline is February 29. </span></p><p>And now‚Ä¶</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png" width="810" height="433" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:433,&quot;width&quot;:810,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:48742,&quot;alt&quot;:&quot;&quot;,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" title="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8b0408aa-b247-4c83-9f56-14f779b5cd23_810x433.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p><span>It‚Äôs an obvious point, but credit cards in America generate a lot of cash for banks. In 2022, I </span><a href="https://www.thebignewsletter.com/p/the-cantillon-effect-and-credit-cards" rel="">wrote up</a><span> how the business works, with the observation that there‚Äôs something on the order of a quarter trillion dollars a year in revenue. This revenue comes from fees for connecting merchants and banks, as well as fees charged to consumers for access to credit. </span></p><p>Every credit card network is also a data sieve, connected to advertising data brokers, anti-fraud features, and analytics firms. In addition, being able to reject someone from the payments system is a core sovereign power, and the stated reason the right is so afraid of a central bank digital currency.  </p><p><span>There are many barriers to entry in the credit card business, and significant pricing power among incumbents. As the Consumer Financial Protection Bureau found, margins for credit cards are persistent, increasing, high, and tilted </span><a href="https://www.consumerfinance.gov/about-us/blog/credit-card-interest-rate-margins-at-all-time-high/" rel="">towards the larger firms in the industry</a><span>. (And this is true even when you take higher interest rates into account.)</span></p><p>Capital One buying Discover hits at all of these elements of the business. While the merger looks like a credit card bank buying another credit card bank - and it‚Äôs certainly that - it is more like a big tech merger, where a bank is trying to turn itself into a platform with an app store-like power over a class of customers, in this case merchants. The key quote from Capital One co-founder and CEO Richard Fairbank on the call announcing the deal was this: ‚ÄúThe holy grail is to be an issuer with our own network.‚Äù</p><p><span>Here‚Äôs what Fairbank meant. An issuer, aka a bank, is regulated like a bank, while a network is regulated like a network, which includes price caps on debit cards. But thanks to the Fed, a bank that owns a network </span><em>isn‚Äôt regulated at all</em><span> on its network. And because of that, Capital One, if allowed to buy Discover, can set prices in ways its rivals can‚Äôt. Fairbank also made clear that‚Äôs a key rationale for the deal, as I‚Äôll go into after I‚Äôve explained the industry and the regulatory framework.</span></p><p>Let‚Äôs start with the basics of credit/debit cards. Banks make money in two ways. They issue cards to consumers, and charge those consumers credit card interest charges and various fees when they buy things with merchants and don‚Äôt pay the money back immediately. But banks also make money from the merchants themselves. In between the bank and merchants sits a network utility, usually Visa or Mastercard. The network operator takes a swipe fee, known as an ‚Äòinterchange fee,‚Äô from the merchant, roughly 1.5-3.5% of every transaction, and then splits that fee with the banks. Banks send some of that money back to the consumer in the form of rewards to keep consumers locked into using that card. Here‚Äôs an illustration of how credit card networks function. </p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png" width="629" height="555" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:555,&quot;width&quot;:629,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:73603,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a722ed0-21c2-4a78-8b1f-c61786ab5f74_629x555.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>There‚Äôs a difference between American Express and Visa/Mastercard. Visa and Mastercard don‚Äôt issue their own cards, banks issue them. Conversely, banks don‚Äôt issue American Express cards, only American Express does that. So American Express isn‚Äôt a standard credit card network. It is technically a ‚Äòthree-party system,‚Äô between consumers, merchants, and American Express itself. This distinction matters for legal reasons. (Though American Express‚Äôs status as a three party network isn‚Äôt strictly accurate, U.S. Bank does </span><a href="https://www.businesswire.com/news/home/20131120005381/en/U.S.-Bank-and-American-Express-Announce-Card-Issuing-Agreement" rel="">issue</a><span> credit cards that operate on AMEX). </span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png" width="571" height="461" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:461,&quot;width&quot;:571,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:40645,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F38eb0cec-e3f2-4504-b61f-aa86f75550f9_571x461.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><span>So what is Discover? Well, it‚Äôs both a normal network </span><em>and</em><span> a three-party system. Like Visa/Mastercard, Discover allows banks to issue Discover cards. But like American Express, it also issues its own credit cards. </span></p><p><span>So why does any of this matter? Well, America‚Äôs credit card system is a massive extraction machine for middlemen, and this merger is part of a knife-fight over who can get the biggest piece. </span><a href="https://www.lendingtree.com/credit-cards/articles/na-vs-eu-interchangefees/" rel="">Nowhere else in the world </a><span>is there a payments system in which 1.5-3.5% of trillions of dollars of transactions goes to a set of middlemen, but that‚Äôs how credit cards work in America, much to the chagrin of merchants, both small ones and the giants like Walmart. Network fees are excessive because Visa, Mastercard, American Express, and Discover have market power over merchants, who must accept the cards their customers would like to use, even if the fee those merchants have to pay is excessive. </span></p><p><span>In 2010, Congress actually noticed this was a problem, Senator Dick Durbin attached an amendment to the Dodd-Frank Act which regulated these networks. Specifically, the Durbin Amendment did two things. It had the Fed impose a price cap on swipe fees for debit cards, and it allowed merchants to choose among debit networks for processing debit payments. While the Fed tilted the rules as far as it could towards banks, the Durbin amendment has </span><a href="https://www.nationalgrocers.org/news/national-grocers-association-statement-on-federal-reserve-boards-proposal-to-lower-swipe-fees/" rel="">delivered</a><span> somewhat for merchants. (The Durbin Amendment only addressed </span><em>debit </em><span>cards, not </span><em>credit </em><span>cards, and so it left out large chunks of the market. There‚Äôs now Senate legislation, called the Credit Card Competition Act, which would </span><a href="https://www.durbin.senate.gov/imo/media/doc/The%20Credit%20Card%20Competition%20Act%20of%202023%20-%20one-pager.pdf" rel="">allow</a><span> merchants to choose among multiple payment networks for credit cards.)</span></p><p><span>But the Fed also punched a hole in the Durbin Amendment. When writing the rule, the Fed </span><a href="https://crsreports.congress.gov/product/pdf/R/R41913" rel="">went along</a><span> with lobbying from </span><a href="https://www.federalreserve.gov/SECRS/2011/March/20110303/R-1404/R-1404_022211_67230_584162046602_1.pdf" rel="">American Express</a><span>, and in its 2010 rules </span><a href="https://www.federalregister.gov/documents/2010/12/28/2010-32061/debit-card-interchange-fees-and-routing" rel="">exempted</a><span> three party networks from regulation, only applying it to Visa and Mastercard. And this brings me back to Capital One, whose CEO made this point explicitly on the investor call announcing the transaction. Here‚Äôs Fairbank:</span></p><blockquote><p>The Durbin debit rules, intentionally and by design only applied in networks like Visa and MasterCard who negotiate with merchants on behalf of thousands of banks, including negotiating terms and pricing. Discover like American Express deals directly with merchants without an intermediary. They are both the issuer and the network, so there is nobody in between. The Durbin debit rules were written to explicitly exclude networks like discover and American Express.</p></blockquote><p><span>Fairbank also noted that their intention is to move Capital One‚Äôs debit portfolio immediately into Discover, though it will only move part of its credit business. As Digital Transactions Magazine </span><a href="https://www.digitaltransactions.net/for-cap-one-the-pulse-network-is-the-rare-asset-in-its-35-3-billion-deal-for-discover/" rel="">put it</a><span>, ‚ÄúFairbank called out a pricing advantage of the planned move into debit.‚Äù After this merger, Capital One will have millions of merchants at its mercy, merchants who will have the choice to either lose customers who want to use Discover, or accept higher fees and more intrusive rules from Capital One. </span></p><p><span>Of course, there are other reasons for the deal. Capital One will gain a funding advantage as a bank and become Too Big to Fail if it acquires Discover. Additionally, Discover is a large issuer of credit cards, and the bigger the credit card issuer, the </span><a href="https://www.consumerfinance.gov/about-us/newsroom/cfpb-report-finds-large-banks-charge-higher-credit-card-interest-rates-than-small-banks-and-credit-unions/" rel="">higher the prices</a><span> banks tend to charge. If Capital One buys Discover, it‚Äôll jump to number one as a credit card issuer. But the pricing power it will acquire as the owner of Discover is a core stated reason for the merger. </span></p><p>And to underscore the point about barriers to entry, Fairbank also made that clear when he told investors about his lust for Discover‚Äôs network, saying that ‚Äúwe all kind of revel in the fact that a network is a very, very rare asset. There are very few of them. And it‚Äôs just, you know, I don‚Äôt think people are going to be building any of these anytime soon.‚Äù That‚Äôs not stating outright that the goal is monopolization, but it‚Äôs pretty close.</p><p><span>So will the merger go through? The deal has already drawn high-profile opposition from both sides of the aisle, as the American Prospect </span><a href="https://prospect.org/economy/2024-02-22-capital-one-discover-merger-tests-bank-regulators/" rel="">reports</a><span>.</span></p><blockquote><p><span>Several advocacy groups have come out against the merger proposal, including the </span><a href="https://ncrc.org/ncrc-opposes-capital-one-discover-merger/" rel="">National Community Reinvestment Coalition</a><span>, which has fought Capital One in particular for several years. Sen. Josh Hawley (R-MO) </span><a href="https://twitter.com/HawleyMO/status/1760327925688103140" rel="">said on Wednesday</a><span> that the deal should be blocked, joining Sen. Elizabeth Warren, who </span><a href="https://twitter.com/SenWarren/status/1760004986086228208" rel="">opposed the merger</a><span> a day earlier.</span></p></blockquote><p>Under the current administration, it‚Äôs hard to see a clear path for approval. The Federal Reserve and Office of Comptroller of the Currency would have to allow the deal, and then the Antitrust Division would have to give a green light. The Fed and the OCC are weak, but they are also embarrassed. And given the CEO stated on the acquisition call that the ability to raise prices and reduce competition through a regulatory loophole is one of the key reasons for the deal, the Antitrust Division strikes me as an unlikely ally of the deal. As Steptoe lawyer Stephen Aschettino put it, ‚ÄúI think antitrust is probably first and foremost on the list of hurdles that Capital One is going to have to get past, and that could take a while.‚Äù  </p><p><span>That said, in many ways this deal is contingent upon the election. If there‚Äôs a change in administration, then there will be a different set of bank regulators and antitrust enforcers. It‚Äôs not clear what happens then. In his first term, Donald Trump was lax about banking consolidation, though his Antitrust Division did </span><a href="https://www.justice.gov/opa/pr/justice-department-sues-block-visas-proposed-acquisition-plaid" rel="">sue</a><span> to stop the Visa merger with Plaid.</span></p><p><span>So one could see this deal as a bet on Biden losing. But I think that‚Äôs overthinking it a bit, since there‚Äôs no reason Capital One couldn‚Äôt just wait until after the election to announce the deal. Capital One CEO Richard Fairbank is known as a super aggressive operator; he has already</span><a href="https://www.ftc.gov/news-events/news/press-releases/2021/09/ftc-fines-capital-one-ceo-richard-fairbank-repeatedly-violating-antitrust-laws" rel=""> been fined</a><span> for violating antitrust laws multiple times. </span></p><p>If I had to guess, I‚Äôd say this one‚Äôs about ego, as many of these mergers are. Fairbank is a billionaire, and so he won‚Äôt be dislodged from his position as CEO regardless of whether he has to walk away from the deal. He‚Äôs probably thinking, swing for the fences, the worst that happens is you strike out. But what this deal really shows is that the U.S. payments system is ripe for genuine reform, whether that‚Äôs through the Fed making its public payments system, called FedNow, workable, or Congress enacting more rules mandating competition in payments. Regardless, you shouldn‚Äôt become a billionaire by grifting on payment fees that no other country in the world tolerates. And a merger to enable further bloat and consolidation isn‚Äôt the way out.</p><p><span>Thanks for reading! Your tips make this newsletter what it is, so please send me tips on weird monopolies, stories I‚Äôve missed, or other thoughts. And if you liked this issue of BIG, you can sign up&nbsp;</span><a href="http://email.mg1.substack.com/c/eJxVUMFuwyAM_ZpwjIAmYT34UHXtb0QEnBSNQARmVf5-pN1hkyzberae37PRhEtMOxBmYiVjGp0FZoEradTEXB7nhLhq54FtZfLOaHIxHFtC9LJjDzhxNUs7nKTlnGsthRKDmj-s4dIYO0i2xUyjLtZhMAj4jWmPAZmHB9GWm9OlkfcaqybKFL3H1OYyZdLmqzVxraMn-togcyC5OPNzzT3ve9WKVnS3y5WL4a54d1PdZ9PxdRH_CFiCX946XA4vL7TaGWtdS3C0jxj05NECpYKM3v94Cad9Qwj4zB6JML3Bw74chFCsHrKxcgb4o_8H-RJ1Kg" rel="">here</a><span>&nbsp;for more issues, a newsletter on how to restore fair commerce, innovation, and democracy. And consider becoming a </span><a href="https://email.mg1.substack.com/c/eJxVUMtuwyAQ_JpwtABjEw4ceulvIB6Lg4rBgrUq_31J0kO7Wmk1-xrNeIuw1XZphI7kqB0NXgfoAt89AyI0cnZoJgVNgqaSe-lI6iY2gN2mrMlxupy8xVTLc4uxhQvy0DZKpyjQIL31CqigggOPQYWBIqg3lz1DguJB15Ivc9gUSNYPxKPf5o8b_xy5W8SONWdoUz9dR-u_Jl_3MXpC35IDkjSnnI2Y6cwkZROfhIwuSrXauC7e2_u0rNhtvJaboPvG_v0iTf9SjOH21PXqDmlm1P0sCS8DxboMQWM7geDbsJcHZoMCbRgZjEXN1nmVchaci5W9VQ5bxEzlXVFFBm2o46roP8J-AJJ0hnE" rel="">paying subscriber</a><span> to support this work, or if you are a paying subscriber, giving a </span><a href="https://email.mg1.substack.com/c/eJxVUEtuxSAMPE1YRnwSSBYsKlW9BiJgUlQCETiqcvvy3uuitSxZ9tgezTiLsJd6a4SG5CwNDd4n6AzfLQEiVHI1qCZ6Tbymiju1kdhMqACHjUmT89pSdBZjyY8txmY-kU_tOZOU-bB5urhl9ouc-RomtnoXpOX0xWUvHyE70CWn25w2epL0J-LZBvE28I-eh0VsWFKCOrZra2jd1-jK0aFH62rcYBB9U-4x4CDesV5AouaUsx6CCqYoG_k4qbAFtUob5OycXcZZYrPhnoeJHjv795xU_cvZwf0h9DntWk2vx5Uj3gay3RJ4_STEl4NPU8wOGWp31huLmkkhlRIT55NkL9ndp0lQtax0JZ3Wl36V9R-lPyvjiqk" rel="">gift subscription</a><span> to a friend, colleague, or family member.</span></p><p>cheers,</p><p>Matt Stoller</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Form to DB (148 pts)]]></title>
            <link>https://www.formtodb.com/</link>
            <guid>39475467</guid>
            <pubDate>Fri, 23 Feb 2024 00:49:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.formtodb.com/">https://www.formtodb.com/</a>, See on <a href="https://news.ycombinator.com/item?id=39475467">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
  
    <main>
  
  <div>
    
    <p>
      Skip custom React forms or messy ETL from spreadsheets. Build forms on top of your Postgres, MySQL or MSSQL database.
    </p>
    <p>
      <a href="https://login.retool.com/auth/signup?redirect=forms&amp;source=forms" target="_blank" rel="noopener">
        Get started
        <svg viewBox="0 0 24 24" astro-icon="bx:bxs-right-arrow-alt"><path fill="currentColor" d="m19 12-7-6v5H6v2h6v5z"></path></svg>
      
</a>
      <a href="https://docs.retool.com/apps/forms" target="_blank" rel="noopener">
        View docs
        <svg viewBox="0 0 24 24" astro-icon="bx:bxs-right-arrow-alt"><path fill="currentColor" d="m19 12-7-6v5H6v2h6v5z"></path></svg>
      
</a>
    </p>
  </div>
</main>
    
    <div>
  <h2>
    As custom as React but as fast as Google Forms
  </h2>
  <p>
  Customize your form with our component library, styling, and validation logic.
  </p>
</div>

<div>
  <div>
          <h3>Connect to any database</h3> 
          <p>Generate a form on top of any SQL database like Postgres, MySQL or MSSQL.</p>
        </div><div>
          <h3>Design with your style</h3> 
          <p>Build with 100+ pre-built components from inputs to dropdowns to buttons. Customize the styling to match your exact branding.</p>
        </div><div>
          <h3>Customize with code</h3> 
          <p>Use out-of-the-box validation rules or write your own logic with JavaScript. Use common libraries like Moment for date formatting or import your own.</p>
        </div><div>
          <h3>Build on top of your responses</h3> 
          <p>Assemble 1-click CRUD apps and BI dashboards to view, filter, edit and visualize responses. Join your responses with other data sources using SQL or our API integrations.</p>
        </div>
</div>
    <div>
  <h2>Works with your stack</h2>
  
</div>
    <div>
  <h2>
    Build your own form
  </h2>
  <p>
    Connect a database, generate a form and customize with code.
  </p>
  <p>
    <a href="https://login.retool.com/auth/signup?redirect=forms&amp;source=forms" target="_blank" rel="noopener">
        Get started for free
        <svg viewBox="0 0 24 24" astro-icon="bx:bxs-right-arrow-alt"><path fill="currentColor" d="m19 12-7-6v5H6v2h6v5z"></path></svg>
      
</a>
  </p>
</div>
  
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[US achieves first moon landing in half century with private spacecraft (212 pts)]]></title>
            <link>https://www.reuters.com/technology/space/us-nears-attempt-first-moon-landing-half-century-with-private-robot-spacecraft-2024-02-22/</link>
            <guid>39475205</guid>
            <pubDate>Fri, 23 Feb 2024 00:15:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reuters.com/technology/space/us-nears-attempt-first-moon-landing-half-century-with-private-robot-spacecraft-2024-02-22/">https://www.reuters.com/technology/space/us-nears-attempt-first-moon-landing-half-century-with-private-robot-spacecraft-2024-02-22/</a>, See on <a href="https://news.ycombinator.com/item?id=39475205">Hacker News</a></p>
Couldn't get https://www.reuters.com/technology/space/us-nears-attempt-first-moon-landing-half-century-with-private-robot-spacecraft-2024-02-22/: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA[Apple Vision Pro users reporting cracked outer surfaces (122 pts)]]></title>
            <link>https://old.reddit.com/r/VisionPro/comments/1axj5sp/comment/kror2jt/</link>
            <guid>39475186</guid>
            <pubDate>Fri, 23 Feb 2024 00:12:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://old.reddit.com/r/VisionPro/comments/1axj5sp/comment/kror2jt/">https://old.reddit.com/r/VisionPro/comments/1axj5sp/comment/kror2jt/</a>, See on <a href="https://news.ycombinator.com/item?id=39475186">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="searchexpando"><p><label>limit my search to r/VisionPro</label></p><div id="moresearchinfo"><p>use the following search parameters to narrow your results:</p><dl><dt>subreddit:<i>subreddit</i></dt><dd>find submissions in "subreddit"</dd><dt>author:<i>username</i></dt><dd>find submissions by "username"</dd><dt>site:<i>example.com</i></dt><dd>find submissions from "example.com"</dd><dt>url:<i>text</i></dt><dd>search for "text" in url</dd><dt>selftext:<i>text</i></dt><dd>search for "text" in self post contents</dd><dt>self:yes (or self:no)</dt><dd>include (or exclude) self posts</dd><dt>nsfw:yes (or nsfw:no)</dt><dd>include (or exclude) results marked as NSFW</dd></dl><p>e.g. <code>subreddit:aww site:imgur.com dog</code></p><p><a href="https://www.reddit.com/wiki/search">see the search faq for details.</a></p></div><p><a href="https://www.reddit.com/wiki/search" id="search_showmore">advanced search: by author, subreddit...</a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Intuitive Machines successfully lands on the Moon (380 pts)]]></title>
            <link>https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines</link>
            <guid>39474909</guid>
            <pubDate>Thu, 22 Feb 2024 23:39:36 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines">https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines</a>, See on <a href="https://news.ycombinator.com/item?id=39474909">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="liveblog-body"><gu-island name="EnhancePinnedPost" priority="feature" deferuntil="idle" props="{}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"></gu-island><div id="pinned-post" data-gu-marker="pinned-post" data-component="pinned-post"><article><header><h2>'Odysseus has taken the moon,' says Nasa</h2></header><p>‚ÄúWhat a triumph,‚Äù said Bill Nelson, Nasa‚Äôs administrator in a message following the landing.</p><p>‚ÄúOdysseus has taken the moon. This feat is a giant leap forward for all of humanity.‚Äù</p><blockquote>
 <p><svg viewBox="0 0 22 14" style="fill:var(--block-quote-fill);"><path d="M5.255 0h4.75c-.572 4.53-1.077 8.972-1.297 13.941H0C.792 9.104 2.44 4.53 5.255 0Zm11.061 0H21c-.506 4.53-1.077 8.972-1.297 13.941h-8.686c.902-4.837 2.485-9.411 5.3-13.941Z"></path></svg><em>Today for the first time in more than a half century, the US has returned to the moon. Today for the first time in the history of humanity, a commercial company, an American company launched and led the voyage up there. And today is a day that shows the power and promise of NASA‚Äôs Commercial partnerships. Congratulations to everyone involved in this great and daring quest at Intuitive Machines, SpaceX and right here at Nasa.</em></p>
</blockquote></article></div><p><span><gu-island name="KeyEventsCarousel" priority="feature" deferuntil="visible" props="{&quot;keyEvents&quot;:[{&quot;id&quot;:&quot;65d7dde98f086f23f6db17bc&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Still, <a href=\&quot;https://www.theguardian.com/science/nasa\&quot; data-component=\&quot;auto-linked-tag\&quot;>Nasa</a> and Intuitive Machines will be celebrating the achievement.</p>&quot;,&quot;elementId&quot;:&quot;eec2dcf3-ef43-475c-821f-1ca1a543ac8a&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Odysseus is the first American spacecraft to accomplish such a feat since 1972.</p>&quot;,&quot;elementId&quot;:&quot;9cf1823a-9d9f-4c2c-8514-43382b9c8db6&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TweetBlockElement&quot;,&quot;source&quot;:&quot;Twitter&quot;,&quot;id&quot;:&quot;1760811461943722132&quot;,&quot;elementId&quot;:&quot;478e53b9-df9d-4d25-9bb6-57859fcea84c&quot;,&quot;hasMedia&quot;:false,&quot;role&quot;:&quot;inline&quot;,&quot;url&quot;:&quot;https://twitter.com/NASA/status/1760811461943722132&quot;,&quot;isThirdPartyTracking&quot;:false,&quot;html&quot;:&quot;<blockquote class=\&quot;twitter-tweet\&quot;><p lang=\&quot;en\&quot; dir=\&quot;ltr\&quot;>Your order was delivered‚Ä¶ to the Moon! üì¶<a href=\&quot;https://twitter.com/Int_Machines?ref_src=twsrc%5Etfw\&quot;>@Int_Machines</a>&amp;#39; uncrewed lunar lander landed at 6:23pm ET (2323 UTC), bringing NASA science to the Moon&amp;#39;s surface. These instruments will prepare us for future human exploration of the Moon under <a href=\&quot;https://twitter.com/hashtag/Artemis?src=hash&amp;amp;ref_src=twsrc%5Etfw\&quot;>#Artemis</a>. <a href=\&quot;https://t.co/sS0poiWxrU\&quot;>pic.twitter.com/sS0poiWxrU</a></p>&amp;mdash; NASA (@NASA) <a href=\&quot;https://twitter.com/NASA/status/1760811461943722132?ref_src=twsrc%5Etfw\&quot;>February 22, 2024</a></blockquote>\n\n&quot;}],&quot;attributes&quot;:{&quot;pinned&quot;:false,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708645865000,&quot;blockCreatedOnDisplay&quot;:&quot;00.51&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708646117000,&quot;blockLastUpdatedDisplay&quot;:&quot;00.55&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708645942000,&quot;blockFirstPublishedDisplay&quot;:&quot;00.52&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;00.52&quot;,&quot;title&quot;:&quot;Nasa and Intuitive Machines celebrate moon landing&quot;,&quot;contributors&quot;:[],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;},{&quot;id&quot;:&quot;65d7dbd98f0877292bb35fa4&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>‚ÄúWhat a triumph,‚Äù said Bill Nelson, Nasa‚Äôs administrator in a message following the landing.</p>&quot;,&quot;elementId&quot;:&quot;4bd6a4df-ae63-4581-9235-4505789d6815&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>‚ÄúOdysseus has taken the moon. This feat is a giant leap forward for all of humanity.‚Äù</p>&quot;,&quot;elementId&quot;:&quot;ad0d9ba1-7ed6-4a21-a493-b453aa9df49e&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.BlockquoteBlockElement&quot;,&quot;html&quot;:&quot;<blockquote class=\&quot;quoted\&quot;>\n <p><em>Today for the first time in more than a half century, the US has returned to the moon. Today for the first time in the history of humanity, a commercial company, an American company launched and led the voyage up there. And today is a day that shows the power and promise of NASA‚Äôs Commercial partnerships. Congratulations to everyone involved in this great and daring quest at Intuitive Machines, SpaceX and right here at Nasa.</em></p>\n</blockquote>&quot;,&quot;elementId&quot;:&quot;20660525-59a1-450c-ae11-884a2d0ee5c5&quot;}],&quot;attributes&quot;:{&quot;pinned&quot;:true,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708645337000,&quot;blockCreatedOnDisplay&quot;:&quot;00.42&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708645660000,&quot;blockLastUpdatedDisplay&quot;:&quot;00.47&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708645605000,&quot;blockFirstPublishedDisplay&quot;:&quot;00.46&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;00.46&quot;,&quot;title&quot;:&quot;'Odysseus has taken the moon,' says Nasa&quot;,&quot;contributors&quot;:[],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;},{&quot;id&quot;:&quot;65d7da778f089db0bc972e82&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>‚ÄúWe are on the surface,‚Äù said Stephen Altemus, president and CEO of Intuitive Machines. ‚ÄúWelcome to the moon. Odysseus has a new home.‚Äù</p>&quot;,&quot;elementId&quot;:&quot;b7784538-c3c3-4435-986c-87bb9568807a&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p><em>Note: a previous version of this post incorrectly attributed the quote to mission director Tim Craine.</em></p>&quot;,&quot;elementId&quot;:&quot;90331b5b-b976-4039-acbf-2d072acac1bd&quot;}],&quot;attributes&quot;:{&quot;pinned&quot;:false,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708644983000,&quot;blockCreatedOnDisplay&quot;:&quot;00.36&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708649685000,&quot;blockLastUpdatedDisplay&quot;:&quot;01.54&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708645132000,&quot;blockFirstPublishedDisplay&quot;:&quot;00.38&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;00.38&quot;,&quot;title&quot;:&quot;The Odysseus is on the moon...&quot;,&quot;contributors&quot;:[],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;},{&quot;id&quot;:&quot;65d7d6908f0877292bb35f79&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p><strong>The mission director just called out three minutes till touchdown.</strong></p>&quot;,&quot;elementId&quot;:&quot;4584ceb7-54ec-431e-9463-91953751af8b&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>There will likely be a slight delay between when the lander makes contact with the surface, and when we will get confirmation. That delay could be as little as 15 seconds or several minutes.</p>&quot;,&quot;elementId&quot;:&quot;1ea5b8fd-cfb6-41bc-a54d-bcad8e169acf&quot;}],&quot;attributes&quot;:{&quot;pinned&quot;:false,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708643984000,&quot;blockCreatedOnDisplay&quot;:&quot;00.19&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708644233000,&quot;blockLastUpdatedDisplay&quot;:&quot;00.23&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708644100000,&quot;blockFirstPublishedDisplay&quot;:&quot;00.21&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;00.21&quot;,&quot;title&quot;:&quot;Odysseus lander close to touchdown&quot;,&quot;contributors&quot;:[],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;},{&quot;id&quot;:&quot;65d7ce348f086f23f6db1740&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Odysseus has started its ‚Äúpowered descent initiative‚Äù, as it readies for a landing. The engine on the lander has started up, and it is slowing itself down. As it lowers, sensors on the it will look for a safe spot for a landing,</p>&quot;,&quot;elementId&quot;:&quot;7eb79e48-96df-4822-9946-b54536c34e07&quot;},{&quot;displayCredit&quot;:true,&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.ImageBlockElement&quot;,&quot;role&quot;:&quot;inline&quot;,&quot;media&quot;:{&quot;allImages&quot;:[{&quot;index&quot;:0,&quot;fields&quot;:{&quot;height&quot;:&quot;2421&quot;,&quot;width&quot;:&quot;4034&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/4034.jpg&quot;},{&quot;index&quot;:1,&quot;fields&quot;:{&quot;isMaster&quot;:&quot;true&quot;,&quot;height&quot;:&quot;2421&quot;,&quot;width&quot;:&quot;4034&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg&quot;},{&quot;index&quot;:2,&quot;fields&quot;:{&quot;height&quot;:&quot;1200&quot;,&quot;width&quot;:&quot;2000&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/2000.jpg&quot;},{&quot;index&quot;:3,&quot;fields&quot;:{&quot;height&quot;:&quot;600&quot;,&quot;width&quot;:&quot;1000&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/1000.jpg&quot;},{&quot;index&quot;:4,&quot;fields&quot;:{&quot;height&quot;:&quot;300&quot;,&quot;width&quot;:&quot;500&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/500.jpg&quot;},{&quot;index&quot;:5,&quot;fields&quot;:{&quot;height&quot;:&quot;84&quot;,&quot;width&quot;:&quot;140&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/140.jpg&quot;}]},&quot;elementId&quot;:&quot;56937cbc-fba1-4d13-b109-85458810aff8&quot;,&quot;imageSources&quot;:[{&quot;weighting&quot;:&quot;inline&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=620&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=2c72514138d502f09541899775ac7838&quot;,&quot;width&quot;:620},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=620&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=4a91605225e2ce5aa7a13bfb3d229f40&quot;,&quot;width&quot;:1240},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=605&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=5d165e7240ad4865a46375c09ac2cb37&quot;,&quot;width&quot;:605},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=605&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=1a9a6088177817b3a6c50fa7a89a5336&quot;,&quot;width&quot;:1210},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=445&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=7deb7dc33f7b6bdd2fba70ea7d6ddcc1&quot;,&quot;width&quot;:445},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=445&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=62b765b7a35de9344aa979c78e578d06&quot;,&quot;width&quot;:890}]},{&quot;weighting&quot;:&quot;thumbnail&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=140&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=dc36bac2cc9d68c944bf3e7eaa6e7cca&quot;,&quot;width&quot;:140},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=140&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=cee2b6fd671da1039adf6cb22ac89a40&quot;,&quot;width&quot;:280},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=120&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=705aed8ba6f3d47c3722a95ef7f16dae&quot;,&quot;width&quot;:120},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=120&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=8158743062b5b6d875bcc3dc0280d6a6&quot;,&quot;width&quot;:240}]},{&quot;weighting&quot;:&quot;supporting&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=380&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=453e2e1ad736dacd37e8087a2ede7902&quot;,&quot;width&quot;:380},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=380&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=ac29f4819e9a232895c74a204408ae17&quot;,&quot;width&quot;:760},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=fa5d483e054bfd250ad5f8410ac4c54d&quot;,&quot;width&quot;:300},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=300&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=f4bf2f8c10d891e373299861d044ec75&quot;,&quot;width&quot;:600},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=620&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=2c72514138d502f09541899775ac7838&quot;,&quot;width&quot;:620},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=620&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=4a91605225e2ce5aa7a13bfb3d229f40&quot;,&quot;width&quot;:1240},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=605&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=5d165e7240ad4865a46375c09ac2cb37&quot;,&quot;width&quot;:605},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=605&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=1a9a6088177817b3a6c50fa7a89a5336&quot;,&quot;width&quot;:1210},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=445&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=7deb7dc33f7b6bdd2fba70ea7d6ddcc1&quot;,&quot;width&quot;:445},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=445&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=62b765b7a35de9344aa979c78e578d06&quot;,&quot;width&quot;:890}]},{&quot;weighting&quot;:&quot;showcase&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=860&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=2fcf84bf0c8fd87e050f4f833d40c043&quot;,&quot;width&quot;:860},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=860&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=4121603fa6ff37d0798c35dad9fa2e9f&quot;,&quot;width&quot;:1720},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=780&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=cfe6b96b0a8f8467ba3bc8bfdf69fb45&quot;,&quot;width&quot;:780},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=780&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=3405fe45fd00e1d2bebaf6db72b6dd2f&quot;,&quot;width&quot;:1560},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=620&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=2c72514138d502f09541899775ac7838&quot;,&quot;width&quot;:620},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=620&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=4a91605225e2ce5aa7a13bfb3d229f40&quot;,&quot;width&quot;:1240},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=605&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=5d165e7240ad4865a46375c09ac2cb37&quot;,&quot;width&quot;:605},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=605&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=1a9a6088177817b3a6c50fa7a89a5336&quot;,&quot;width&quot;:1210},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=445&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=7deb7dc33f7b6bdd2fba70ea7d6ddcc1&quot;,&quot;width&quot;:445},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=445&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=62b765b7a35de9344aa979c78e578d06&quot;,&quot;width&quot;:890}]},{&quot;weighting&quot;:&quot;halfwidth&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=620&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=2c72514138d502f09541899775ac7838&quot;,&quot;width&quot;:620},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=620&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=4a91605225e2ce5aa7a13bfb3d229f40&quot;,&quot;width&quot;:1240},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=605&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=5d165e7240ad4865a46375c09ac2cb37&quot;,&quot;width&quot;:605},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=605&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=1a9a6088177817b3a6c50fa7a89a5336&quot;,&quot;width&quot;:1210},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=445&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=7deb7dc33f7b6bdd2fba70ea7d6ddcc1&quot;,&quot;width&quot;:445},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=445&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=62b765b7a35de9344aa979c78e578d06&quot;,&quot;width&quot;:890}]},{&quot;weighting&quot;:&quot;immersive&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=1900&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=ac6b898825bf4dc29e126f06da7f09a1&quot;,&quot;width&quot;:1900},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=1900&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=667163f4725460d2a467fa6bf459b0ed&quot;,&quot;width&quot;:3800},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=1300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=f28e4269c95481e6872ba3e270506293&quot;,&quot;width&quot;:1300},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=1300&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=9d63beb009f36a1023379dfb0e171be2&quot;,&quot;width&quot;:2600},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=1140&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=8aea443c3908bca716f69509a0a0c883&quot;,&quot;width&quot;:1140},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=1140&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=4ed86d37e0e579f28ad9e2660dd05026&quot;,&quot;width&quot;:2280},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=980&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=909087ef1c6548f0c5061988a6bc903f&quot;,&quot;width&quot;:980},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=980&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=2cf8509669e313cc18dc2378513c980e&quot;,&quot;width&quot;:1960},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=740&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=493c942969becf025a2bde80a3d25d8c&quot;,&quot;width&quot;:740},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=740&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=ef724a939dd2c7e9e169307802c5a642&quot;,&quot;width&quot;:1480},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=660&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=b67b8b119a621ce8ef2a403bb7275f1c&quot;,&quot;width&quot;:660},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=660&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=049a72eae522f0b7e7354a2d201fc293&quot;,&quot;width&quot;:1320},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=480&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=0d500d657a5607f233214f1ba71ca6ee&quot;,&quot;width&quot;:480},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/3f0736d1c7fdff0ba10fad575be81e54c3ce55c3/0_190_4034_2421/master/4034.jpg?width=480&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=f5106053e370e71209af666d86f947b2&quot;,&quot;width&quot;:960}]}],&quot;data&quot;:{&quot;alt&quot;:&quot;This February 21, 2024, photo courtesy of Intuitive Machines, shows an image by the Odysseus‚Äô Terrain Relative Navigation camera of the Bel‚Äôkovich K crater in the Moon‚Äôs northern equatorial highlands as the lunar lander prepares for its landing.&quot;,&quot;caption&quot;:&quot;This February 21, 2024, photo courtesy of Intuitive Machines, shows an image by the Odysseus‚Äô Terrain Relative Navigation camera of the Bel‚Äôkovich K crater in the Moon‚Äôs northern equatorial highlands as the lunar lander prepares for its landing.&quot;,&quot;credit&quot;:&quot;Photograph: Intuitive Machines/AFP/Getty Images&quot;}}],&quot;attributes&quot;:{&quot;pinned&quot;:false,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708641844000,&quot;blockCreatedOnDisplay&quot;:&quot;23.44&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708643555000,&quot;blockLastUpdatedDisplay&quot;:&quot;00.12&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708643556000,&quot;blockFirstPublishedDisplay&quot;:&quot;00.12&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;00.12&quot;,&quot;title&quot;:&quot;Odysseus in position to land&quot;,&quot;contributors&quot;:[],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;},{&quot;id&quot;:&quot;65d64f7a8f088e120023e5d4&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>As an example of the mixed payloads that private space missions are taking, <a href=\&quot;https://www.theguardian.com/science/nasa\&quot; data-component=\&quot;auto-linked-tag\&quot;>Nasa</a> administrator, Bill Nelson said of today‚Äôs mission ‚ÄúNasa scientific instruments are on their way to the moon, a giant leap for humanity as we prepare to return to the lunar surface for the first time in more than half a century.‚Äù</p>&quot;,&quot;elementId&quot;:&quot;34aafbd2-60ca-4b79-b74c-20c99e8e91a2&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>He added ‚ÄúThese daring moon deliveries will not only conduct new science at the moon, but they are supporting a growing commercial space economy while showing the strength of American technology and innovation.‚Äù</p>&quot;,&quot;elementId&quot;:&quot;510c1801-f470-44d5-aa11-c2dfd8df58fb&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>But it isn‚Äôt just science on board. There are also 125 of his miniature moon sculptures by the artis Jeff Koons. And as this social media post from Intuitive Machines shows, the lander is also carrying ‚Äúan eternal tribute to His Holiness Pramukh Swami Maharaj‚Äù.</p>&quot;,&quot;elementId&quot;:&quot;123d4bad-5da0-44de-9c98-0b97e35e5d4d&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TweetBlockElement&quot;,&quot;source&quot;:&quot;Twitter&quot;,&quot;id&quot;:&quot;1759820840969945398&quot;,&quot;elementId&quot;:&quot;d141cd0f-120b-40b7-8f80-7a36ec7a8238&quot;,&quot;hasMedia&quot;:false,&quot;role&quot;:&quot;inline&quot;,&quot;url&quot;:&quot;https://twitter.com/Int_Machines/status/1759820840969945398&quot;,&quot;isThirdPartyTracking&quot;:false,&quot;html&quot;:&quot;<blockquote class=\&quot;twitter-tweet\&quot;><p lang=\&quot;en\&quot; dir=\&quot;ltr\&quot;>Created in coordination with Relative Dynamics, the IM-1 mission is flying an eternal tribute to His Holiness Pramukh Swami Maharaj, the fifth guru of the <a href=\&quot;https://twitter.com/BAPS?ref_src=twsrc%5Etfw\&quot;>@BAPS</a> Swaminarayan organization.<br><br>The etching honors the life and service of Pramukh Swami Maharaj, a Hindu spiritual leader‚Ä¶ <a href=\&quot;https://t.co/4gEXthJykX\&quot;>pic.twitter.com/4gEXthJykX</a></p>&amp;mdash; Intuitive Machines (@Int_Machines) <a href=\&quot;https://twitter.com/Int_Machines/status/1759820840969945398?ref_src=twsrc%5Etfw\&quot;>February 20, 2024</a></blockquote>&quot;}],&quot;attributes&quot;:{&quot;pinned&quot;:false,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708639279000,&quot;blockCreatedOnDisplay&quot;:&quot;23.01&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708643076000,&quot;blockLastUpdatedDisplay&quot;:&quot;00.04&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708643076000,&quot;blockFirstPublishedDisplay&quot;:&quot;00.04&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;00.04&quot;,&quot;title&quot;:&quot;What's on board?&quot;,&quot;contributors&quot;:[{&quot;name&quot;:&quot;Martin Belam&quot;,&quot;imageUrl&quot;:&quot;https://i.guim.co.uk/img/uploads/2023/05/15/Martin_Belam.jpg?width=300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=c3892d15230cdc73865506dd3d2d9b6e&quot;,&quot;largeImageUrl&quot;:&quot;https://i.guim.co.uk/img/uploads/2023/05/15/Martin_Belam.png?width=300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=885dc612484c4513f30ca951081f3245&quot;}],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;},{&quot;id&quot;:&quot;65d7cf668f0877292bb35f4b&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Rather than using its own laser instrument as planned to guide its decent to the Moon‚Äôs surface, the Odysseus will instead use a Lidar instrument provided by <a href=\&quot;https://www.theguardian.com/science/nasa\&quot; data-component=\&quot;auto-linked-tag\&quot;>Nasa</a>.</p>&quot;,&quot;elementId&quot;:&quot;e29c9040-3a3c-4f59-82b1-15b6a7ebe05f&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>The lander‚Äôs extra orbit around the moon, which delayed its descent today, allowed for controllers up update software to allow for the use of the Nasa instrument.</p>&quot;,&quot;elementId&quot;:&quot;c066464a-5efd-4172-b86f-1f6411eb258b&quot;}],&quot;attributes&quot;:{&quot;pinned&quot;:false,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708642150000,&quot;blockCreatedOnDisplay&quot;:&quot;23.49&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708642742000,&quot;blockLastUpdatedDisplay&quot;:&quot;23.59&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708642554000,&quot;blockFirstPublishedDisplay&quot;:&quot;23.55&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;23.55&quot;,&quot;title&quot;:&quot;Odysseus will use backup Lidar instrument during descent&quot;,&quot;contributors&quot;:[],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;},{&quot;id&quot;:&quot;65d7c4c98f0877292bb35ee4&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p><strong>The Odysseus is expected to land at 6.24pm ET/11.24pm GMT.</strong></p>&quot;,&quot;elementId&quot;:&quot;ee59f125-c9a4-4b58-b261-04467b251bd3&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Intuitive Machines had initially said it would land at 5.49pm ET, then 5.30pm, and this morning said it could land even earlier at 4.24pm. But ultimately flight controllers decided to circle the Odysseus around the moon one more time before landing, delaying the event by two hours.</p>&quot;,&quot;elementId&quot;:&quot;c5bb2b1b-c477-4e9d-a903-81da740f47fc&quot;}],&quot;attributes&quot;:{&quot;pinned&quot;:false,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708639433000,&quot;blockCreatedOnDisplay&quot;:&quot;23.03&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708641983000,&quot;blockLastUpdatedDisplay&quot;:&quot;23.46&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708639757000,&quot;blockFirstPublishedDisplay&quot;:&quot;23.09&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;23.09&quot;,&quot;title&quot;:&quot;Odysseus set for 6.24pm ET/11.24pm GMT landing&quot;,&quot;contributors&quot;:[{&quot;name&quot;:&quot;Maanvi Singh&quot;}],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;},{&quot;id&quot;:&quot;65d623648f088e120023e2ed&quot;,&quot;elements&quot;:[{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Welcome to the Guardian‚Äôs live coverage of the latest attempt to successfully soft-land the very first private lander on our closest neighbor ‚Äì the moon!</p>&quot;,&quot;elementId&quot;:&quot;53663cfe-784b-493f-8738-4eae64adfc68&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Last week SpaceX‚Äôs Falcon rocket blasted off in the middle of the US night from Nasa‚Äôs Kennedy <a href=\&quot;https://www.theguardian.com/science/space\&quot; data-component=\&quot;auto-linked-tag\&quot;>Space</a> Center, dispatching Intuitive Machines‚Äô lunar lander on its 230,000 miles (370,000km) journey.</p>&quot;,&quot;elementId&quot;:&quot;03cab4b9-fae1-4b58-a9e9-ae839a38680e&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Today the Odysseus lander is attempting to make the perilous descent. Houston-based Intuitive Machines‚Äô aims to put its 14ft-tall, six-legged lander down just 186 miles (300km) shy of the moon‚Äôs south pole</p>&quot;,&quot;elementId&quot;:&quot;325fcda7-2899-4b67-9418-f78df39bce83&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Only five countries ‚Äì the US, Russia, China, India and Japan ‚Äì have scored a lunar landing and no private business has yet done so. The US has not returned to the moon‚Äôs surface since the Apollo program ended more than five decades ago.</p>&quot;,&quot;elementId&quot;:&quot;b1ac4b2b-bfe5-415c-8d8a-b3c56edb3216&quot;},{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TextBlockElement&quot;,&quot;html&quot;:&quot;<p>Stay tuned for what could be a nerve-racking ride ‚Ä¶</p>&quot;,&quot;elementId&quot;:&quot;b8da2a36-0388-4ac2-b1c6-9542b664e875&quot;},{&quot;displayCredit&quot;:true,&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.ImageBlockElement&quot;,&quot;role&quot;:&quot;inline&quot;,&quot;media&quot;:{&quot;allImages&quot;:[{&quot;index&quot;:0,&quot;fields&quot;:{&quot;height&quot;:&quot;1936&quot;,&quot;width&quot;:&quot;3225&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/3225.jpg&quot;},{&quot;index&quot;:1,&quot;fields&quot;:{&quot;isMaster&quot;:&quot;true&quot;,&quot;height&quot;:&quot;1936&quot;,&quot;width&quot;:&quot;3225&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg&quot;},{&quot;index&quot;:2,&quot;fields&quot;:{&quot;height&quot;:&quot;1200&quot;,&quot;width&quot;:&quot;2000&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/2000.jpg&quot;},{&quot;index&quot;:3,&quot;fields&quot;:{&quot;height&quot;:&quot;600&quot;,&quot;width&quot;:&quot;1000&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/1000.jpg&quot;},{&quot;index&quot;:4,&quot;fields&quot;:{&quot;height&quot;:&quot;300&quot;,&quot;width&quot;:&quot;500&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/500.jpg&quot;},{&quot;index&quot;:5,&quot;fields&quot;:{&quot;height&quot;:&quot;84&quot;,&quot;width&quot;:&quot;140&quot;},&quot;mediaType&quot;:&quot;Image&quot;,&quot;mimeType&quot;:&quot;image/jpeg&quot;,&quot;url&quot;:&quot;https://media.guim.co.uk/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/140.jpg&quot;}]},&quot;elementId&quot;:&quot;15c2a756-bb68-4075-8466-c5b610dc35cc&quot;,&quot;imageSources&quot;:[{&quot;weighting&quot;:&quot;inline&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=620&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=a68c09a775e6fe38f28401f7b63663bc&quot;,&quot;width&quot;:620},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=620&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=38ba877d1bb92478e3b586df82576ad7&quot;,&quot;width&quot;:1240},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=605&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=03f3b813d6347a36df0dfa90033575ca&quot;,&quot;width&quot;:605},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=605&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=312ad2f9b05788be78b636dfe68a1268&quot;,&quot;width&quot;:1210},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=445&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=24748888daa9f967a25f254ba5037889&quot;,&quot;width&quot;:445},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=445&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=a12a76567b608bde6901441fbf41ac76&quot;,&quot;width&quot;:890}]},{&quot;weighting&quot;:&quot;thumbnail&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=140&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=80ef078b1c7525b7e4699c76032422b1&quot;,&quot;width&quot;:140},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=140&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=c47f7ab622cd9b93c489e7799dca535c&quot;,&quot;width&quot;:280},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=120&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=32967341dafb67a08764e36495cdbff6&quot;,&quot;width&quot;:120},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=120&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=981cfc7796b7fc9d2234141c0f5a671c&quot;,&quot;width&quot;:240}]},{&quot;weighting&quot;:&quot;supporting&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=380&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=cbe708be726eccd898599b1efa0844c6&quot;,&quot;width&quot;:380},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=380&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=e005792f000e078b8bfd772ce063a8f1&quot;,&quot;width&quot;:760},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=57a582ba59660aae5c419c5f642e9702&quot;,&quot;width&quot;:300},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=300&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=0bbafa3e8fb83b829816bfd402b962ec&quot;,&quot;width&quot;:600},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=620&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=a68c09a775e6fe38f28401f7b63663bc&quot;,&quot;width&quot;:620},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=620&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=38ba877d1bb92478e3b586df82576ad7&quot;,&quot;width&quot;:1240},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=605&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=03f3b813d6347a36df0dfa90033575ca&quot;,&quot;width&quot;:605},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=605&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=312ad2f9b05788be78b636dfe68a1268&quot;,&quot;width&quot;:1210},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=445&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=24748888daa9f967a25f254ba5037889&quot;,&quot;width&quot;:445},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=445&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=a12a76567b608bde6901441fbf41ac76&quot;,&quot;width&quot;:890}]},{&quot;weighting&quot;:&quot;showcase&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=860&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=baa2e6aaafd82e19a5eda97838521a1f&quot;,&quot;width&quot;:860},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=860&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=86786da15303115aa37ae9900fb5819a&quot;,&quot;width&quot;:1720},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=780&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=2f4d34bf9483d3b9a07d0e88ac1dc0d6&quot;,&quot;width&quot;:780},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=780&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=e2e0fde93cb1548056b7dae979c8165c&quot;,&quot;width&quot;:1560},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=620&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=a68c09a775e6fe38f28401f7b63663bc&quot;,&quot;width&quot;:620},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=620&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=38ba877d1bb92478e3b586df82576ad7&quot;,&quot;width&quot;:1240},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=605&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=03f3b813d6347a36df0dfa90033575ca&quot;,&quot;width&quot;:605},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=605&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=312ad2f9b05788be78b636dfe68a1268&quot;,&quot;width&quot;:1210},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=445&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=24748888daa9f967a25f254ba5037889&quot;,&quot;width&quot;:445},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=445&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=a12a76567b608bde6901441fbf41ac76&quot;,&quot;width&quot;:890}]},{&quot;weighting&quot;:&quot;halfwidth&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=620&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=a68c09a775e6fe38f28401f7b63663bc&quot;,&quot;width&quot;:620},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=620&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=38ba877d1bb92478e3b586df82576ad7&quot;,&quot;width&quot;:1240},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=605&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=03f3b813d6347a36df0dfa90033575ca&quot;,&quot;width&quot;:605},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=605&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=312ad2f9b05788be78b636dfe68a1268&quot;,&quot;width&quot;:1210},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=445&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=24748888daa9f967a25f254ba5037889&quot;,&quot;width&quot;:445},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=445&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=a12a76567b608bde6901441fbf41ac76&quot;,&quot;width&quot;:890}]},{&quot;weighting&quot;:&quot;immersive&quot;,&quot;srcSet&quot;:[{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=1900&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=4501280681d451373b073d3e53fadd14&quot;,&quot;width&quot;:1900},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=1900&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=786b26c56fde49bfcd9d28f61994e132&quot;,&quot;width&quot;:3800},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=1300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=697ba4cd1b63f7fa5a7bd042a2c92365&quot;,&quot;width&quot;:1300},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=1300&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=5cc7d6590a1a1e6861ffee34630c7cf1&quot;,&quot;width&quot;:2600},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=1140&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=610750dae960eb8bbb1079f41ba90de4&quot;,&quot;width&quot;:1140},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=1140&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=42c658f373e5e81fe99cc54c90c01bf0&quot;,&quot;width&quot;:2280},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=980&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=d80617f8160910120dd35589d812ba16&quot;,&quot;width&quot;:980},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=980&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=596c045567ea1ad9824eff7a759f249a&quot;,&quot;width&quot;:1960},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=740&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=7269b038ec9007eb872b9db19fc2e5fa&quot;,&quot;width&quot;:740},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=740&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=97fd20bb8f634fe260817fd8ffeae2d3&quot;,&quot;width&quot;:1480},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=660&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=c21f30cddc09417594be42b5520ac024&quot;,&quot;width&quot;:660},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=660&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=3f764f032060b038725d2e3075cdb8fa&quot;,&quot;width&quot;:1320},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=480&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=b7df223f5242499157590bbe08a58580&quot;,&quot;width&quot;:480},{&quot;src&quot;:&quot;https://i.guim.co.uk/img/media/a387c72a44471f610179e94c3c85d9b249b0f61e/0_274_3225_1936/master/3225.jpg?width=480&amp;quality=45&amp;auto=format&amp;fit=max&amp;dpr=2&amp;s=6a9cf28d1b6ec51a9c8b2465a97cbf86&quot;,&quot;width&quot;:960}]}],&quot;data&quot;:{&quot;alt&quot;:&quot;A SpaceX Falcon 9 rocket lifts off from launch pad LC-39A at the Kennedy Space Center last week with the Intuitive Machines' Nova-C moon lander mission on board.&quot;,&quot;caption&quot;:&quot;A SpaceX Falcon 9 rocket lifts off from launch pad LC-39A at the Kennedy Space Center last week with the Intuitive Machines' Nova-C moon lander mission on board.&quot;,&quot;credit&quot;:&quot;Photograph: Gregg Newton/AFP/Getty Images&quot;}}],&quot;attributes&quot;:{&quot;pinned&quot;:false,&quot;keyEvent&quot;:true,&quot;summary&quot;:false},&quot;blockCreatedOn&quot;:1708639279000,&quot;blockCreatedOnDisplay&quot;:&quot;23.01&nbsp;CET&quot;,&quot;blockLastUpdated&quot;:1708641094000,&quot;blockLastUpdatedDisplay&quot;:&quot;23.31&nbsp;CET&quot;,&quot;blockFirstPublished&quot;:1708639279000,&quot;blockFirstPublishedDisplay&quot;:&quot;23.01&nbsp;CET&quot;,&quot;blockFirstPublishedDisplayNoTimezone&quot;:&quot;23.01&quot;,&quot;title&quot;:&quot;Intuitive Machines' Odysseus aims to land on the moon&quot;,&quot;contributors&quot;:[],&quot;primaryDateLine&quot;:&quot;Fri 23 Feb 2024 01.54 CET&quot;,&quot;secondaryDateLine&quot;:&quot;First published on Thu 22 Feb 2024 23.01 CET&quot;}],&quot;filterKeyEvents&quot;:false,&quot;id&quot;:&quot;key-events-carousel-mobile&quot;}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><span id="key-events-carousel-mobile"></span><span><p>Key events</p></span><div id="key-events-carousel"><ul><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d7dde98f086f23f6db17bc#block-65d7dde98f086f23f6db17bc" data-link-name="key event card | 0 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708645942000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T23:52:22.000Z" title="Thursday, 22 February 2024 at 23:52 Coordinated Universal Time">1h ago</time></gu-island></p><p>Nasa and Intuitive Machines celebrate moon landing</p></a></li><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d7dbd98f0877292bb35fa4#block-65d7dbd98f0877292bb35fa4" data-link-name="key event card | 1 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708645605000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T23:46:45.000Z" title="Thursday, 22 February 2024 at 23:46 Coordinated Universal Time">1h ago</time></gu-island></p><p>'Odysseus has taken the moon,' says Nasa</p></a></li><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d7da778f089db0bc972e82#block-65d7da778f089db0bc972e82" data-link-name="key event card | 2 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708645132000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T23:38:52.000Z" title="Thursday, 22 February 2024 at 23:38 Coordinated Universal Time">1h ago</time></gu-island></p><p>The Odysseus is on the moon...</p></a></li><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d7d6908f0877292bb35f79#block-65d7d6908f0877292bb35f79" data-link-name="key event card | 3 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708644100000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T23:21:40.000Z" title="Thursday, 22 February 2024 at 23:21 Coordinated Universal Time">2h ago</time></gu-island></p><p>Odysseus lander close to touchdown</p></a></li><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d7ce348f086f23f6db1740#block-65d7ce348f086f23f6db1740" data-link-name="key event card | 4 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708643556000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T23:12:36.000Z" title="Thursday, 22 February 2024 at 23:12 Coordinated Universal Time">2h ago</time></gu-island></p><p>Odysseus in position to land</p></a></li><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d64f7a8f088e120023e5d4#block-65d64f7a8f088e120023e5d4" data-link-name="key event card | 5 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708643076000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T23:04:36.000Z" title="Thursday, 22 February 2024 at 23:04 Coordinated Universal Time">2h ago</time></gu-island></p><p>What's on board?</p></a></li><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d7cf668f0877292bb35f4b#block-65d7cf668f0877292bb35f4b" data-link-name="key event card | 6 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708642554000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T22:55:54.000Z" title="Thursday, 22 February 2024 at 22:55 Coordinated Universal Time">2h ago</time></gu-island></p><p>Odysseus will use backup Lidar instrument during descent</p></a></li><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d7c4c98f0877292bb35ee4#block-65d7c4c98f0877292bb35ee4" data-link-name="key event card | 7 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708639757000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T22:09:17.000Z" title="Thursday, 22 February 2024 at 22:09 Coordinated Universal Time">3h ago</time></gu-island></p><p>Odysseus set for 6.24pm ET/11.24pm GMT landing</p></a></li><li><a href="https://www.theguardian.com/science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines?filterKeyEvents=false&amp;page=with:block-65d623648f088e120023e2ed#block-65d623648f088e120023e2ed" data-link-name="key event card | 8 of 9"><p><gu-island name="RelativeTime" priority="enhancement" deferuntil="visible" props="{&quot;then&quot;:1708639279000}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><time datetime="2024-02-22T22:01:19.000Z" title="Thursday, 22 February 2024 at 22:01 Coordinated Universal Time">3h ago</time></gu-island></p><p>Intuitive Machines' Odysseus aims to land on the moon</p></a></li></ul></div></gu-island><gu-island name="FilterKeyEventsToggle" priority="feature" deferuntil="visible" props="{&quot;filterKeyEvents&quot;:false,&quot;id&quot;:&quot;filter-toggle-mobile&quot;}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><span id="filter-toggle-mobile"></span><p><label id="src-component-431822_description" data-component="filter-key-events" data-link-name="filter-key-events-on">Show key events only<p><span>Please turn on JavaScript to use this feature</span></p></label></p></gu-island></span></p><article id="block-65d7eb8c8f086f23f6db1817"><header></header><p><em>My colleague Richard Luscombe has more details here about Odysseus‚Äôs long journey:</em></p><figure id="467227fc-81f2-407e-8666-f14bfc7669de" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.RichLinkBlockElement"><gu-island name="RichLinkComponent" priority="feature" deferuntil="idle" props="{&quot;richLinkIndex&quot;:1,&quot;element&quot;:{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.RichLinkBlockElement&quot;,&quot;prefix&quot;:&quot;Related: &quot;,&quot;text&quot;:&quot;US returns to lunar surface for first time in over 50 years: ‚ÄòWelcome to the moon‚Äô&quot;,&quot;elementId&quot;:&quot;467227fc-81f2-407e-8666-f14bfc7669de&quot;,&quot;role&quot;:&quot;inline&quot;,&quot;url&quot;:&quot;https://www.theguardian.com/science/2024/feb/22/us-moon-landing-odysseus-intuitive-machines&quot;},&quot;ajaxUrl&quot;:&quot;https://api.nextgen.guardianapps.co.uk&quot;,&quot;format&quot;:{&quot;display&quot;:0,&quot;theme&quot;:0,&quot;design&quot;:11}}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"></gu-island></figure></article><article id="block-65d7e7ad8f089db0bc972ee0"><header></header><p>The White House Office of Science and Technology has sent its congratulations:</p><figure id="25aacae7-cea3-444d-a169-250949eb22f0" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.TweetBlockElement"><gu-island name="TweetBlockComponent" priority="feature" deferuntil="visible" props="{&quot;element&quot;:{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TweetBlockElement&quot;,&quot;source&quot;:&quot;Twitter&quot;,&quot;id&quot;:&quot;1760815711537041829&quot;,&quot;elementId&quot;:&quot;25aacae7-cea3-444d-a169-250949eb22f0&quot;,&quot;hasMedia&quot;:false,&quot;role&quot;:&quot;inline&quot;,&quot;url&quot;:&quot;https://twitter.com/WHOSTP/status/1760815711537041829&quot;,&quot;isThirdPartyTracking&quot;:false,&quot;html&quot;:&quot;<blockquote class=\&quot;nojs-tweet\&quot;><p lang=\&quot;en\&quot; dir=\&quot;ltr\&quot;>Go Odysseus! We‚Äôre over the moon about the U.S.‚Äô first lunar landing since 1972!<br><br>Congrats to <a href=\&quot;https://twitter.com/Int_Machines?ref_src=twsrc%5Etfw\&quot;>@Int_Machines</a> and <a href=\&quot;https://twitter.com/NASA?ref_src=twsrc%5Etfw\&quot;>@NASA</a>&amp;#39;s CLPS!<br><br>As <a href=\&quot;https://twitter.com/POTUS?ref_src=twsrc%5Etfw\&quot;>@POTUS</a> says, &amp;quot;With science, hope, and vision, there&amp;#39;s not a damn thing we can&amp;#39;t do as a country.&amp;quot;<br><br>Welcome to the moon. <a href=\&quot;https://t.co/J6K38We5wW\&quot;>https://t.co/J6K38We5wW</a></p>&amp;mdash; White House Office of Science &amp;amp; Technology Policy (@WHOSTP) <a href=\&quot;https://twitter.com/WHOSTP/status/1760815711537041829?ref_src=twsrc%5Etfw\&quot;>February 22, 2024</a></blockquote>\n\n&quot;}}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"><div id="tweet-container-25aacae7-cea3-444d-a169-250949eb22f0"><blockquote><div lang="en" dir="ltr"><p>Go Odysseus! We‚Äôre over the moon about the U.S.‚Äô first lunar landing since 1972!</p><p>Congrats to <a href="https://twitter.com/Int_Machines?ref_src=twsrc%5Etfw">@Int_Machines</a> and <a href="https://twitter.com/NASA?ref_src=twsrc%5Etfw">@NASA</a>'s CLPS!</p><p>As <a href="https://twitter.com/POTUS?ref_src=twsrc%5Etfw">@POTUS</a> says, "With science, hope, and vision, there's not a damn thing we can't do as a country."</p><p>Welcome to the moon. <a href="https://t.co/J6K38We5wW">https://t.co/J6K38We5wW</a></p></div>‚Äî White House Office of Science &amp; Technology Policy (@WHOSTP) <a href="https://twitter.com/WHOSTP/status/1760815711537041829?ref_src=twsrc%5Etfw">February 22, 2024</a></blockquote>

</div></gu-island></figure></article><article id="block-65d7e6f18f0877292bb35fea"><header></header><p>Here again, is the moment the flight controllers confirmed landing.</p><figure id="deb109ce-b5d4-4884-a264-78eaaefde93c" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.TweetBlockElement"><gu-island name="TweetBlockComponent" priority="feature" deferuntil="visible" props="{&quot;element&quot;:{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TweetBlockElement&quot;,&quot;source&quot;:&quot;Twitter&quot;,&quot;id&quot;:&quot;1760811153184129322&quot;,&quot;elementId&quot;:&quot;deb109ce-b5d4-4884-a264-78eaaefde93c&quot;,&quot;hasMedia&quot;:false,&quot;role&quot;:&quot;inline&quot;,&quot;url&quot;:&quot;https://twitter.com/NASASpaceflight/status/1760811153184129322&quot;,&quot;isThirdPartyTracking&quot;:false,&quot;html&quot;:&quot;<blockquote class=\&quot;nojs-tweet\&quot;><p lang=\&quot;en\&quot; dir=\&quot;ltr\&quot;>Calling it a touchdown! &amp;quot;We&amp;#39;re on the surface of the Moon and we are transmitting&amp;quot;. <a href=\&quot;https://t.co/7YXS1e4I8E\&quot;>pic.twitter.com/7YXS1e4I8E</a></p>&amp;mdash; Chris Bergin - NSF (@NASASpaceflight) <a href=\&quot;https://twitter.com/NASASpaceflight/status/1760811153184129322?ref_src=twsrc%5Etfw\&quot;>February 22, 2024</a></blockquote>\n\n&quot;}}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"></gu-island></figure></article><article id="block-65d7e0a18f0877292bb35fcd"><header></header><p>More images are emerging of the control room staff in Torrance, California, as they anxiously monitored ‚Äì and eventually celebrated ‚Äì the Odysseus spacecraft‚Äôs journey from orbit to landing.</p><figure id="c54062c0-6220-4ca9-b05d-2e3783496afb" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-2"><picture><source srcset="https://i.guim.co.uk/img/media/ba1d8881eb2c44f2eaabebee023663175cd691fd/0_0_1467_843/master/1467.jpg?width=700&amp;dpr=2&amp;s=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/ba1d8881eb2c44f2eaabebee023663175cd691fd/0_0_1467_843/master/1467.jpg?width=700&amp;dpr=1&amp;s=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/ba1d8881eb2c44f2eaabebee023663175cd691fd/0_0_1467_843/master/1467.jpg?width=465&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/ba1d8881eb2c44f2eaabebee023663175cd691fd/0_0_1467_843/master/1467.jpg?width=465&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="This frame grab from Nasa shows Scorpius Space Launch Company (SSLC) team members watching as the Intuitive Machines' Odysseus lunar lander approached the moon." src="https://i.guim.co.uk/img/media/ba1d8881eb2c44f2eaabebee023663175cd691fd/0_0_1467_843/master/1467.jpg?width=465&amp;dpr=1&amp;s=none" width="465" height="267.2085889570552" loading="lazy"></picture></div><figcaption><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>This frame grab from Nasa shows Scorpius Space Launch Company (SSLC) team members watching as the Intuitive Machines' Odysseus lunar lander approached the moon. </span> Photograph: NASA/AFP/Getty Images</figcaption></figure><figure id="01ad88c6-d9bf-423f-99ca-5875e10b7843" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-3"><picture><source srcset="https://i.guim.co.uk/img/media/0351112748283738f94875e3f33674ff0687abef/0_7_1263_758/master/1263.jpg?width=700&amp;dpr=2&amp;s=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/0351112748283738f94875e3f33674ff0687abef/0_7_1263_758/master/1263.jpg?width=700&amp;dpr=1&amp;s=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/0351112748283738f94875e3f33674ff0687abef/0_7_1263_758/master/1263.jpg?width=465&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/0351112748283738f94875e3f33674ff0687abef/0_7_1263_758/master/1263.jpg?width=465&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="Scorpius Space Launch Company (SSLC) team members reacting as the Intuitive Machines' Odysseus lunar lander touches down." src="https://i.guim.co.uk/img/media/0351112748283738f94875e3f33674ff0687abef/0_7_1263_758/master/1263.jpg?width=465&amp;dpr=1&amp;s=none" width="465" height="279.0736342042755" loading="lazy"></picture></div><figcaption><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>Scorpius Space Launch Company (SSLC) team members reacting as the Intuitive Machines' Odysseus lunar lander touches down.</span> Photograph: NASA/AFP/Getty Images</figcaption></figure><figure id="f0787446-3100-4859-9794-4509d4699234" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-4"><picture><source srcset="https://i.guim.co.uk/img/media/dc8ef18171f616cadef6065483957532517fe332/0_0_6000_4000/master/6000.jpg?width=700&amp;dpr=2&amp;s=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/dc8ef18171f616cadef6065483957532517fe332/0_0_6000_4000/master/6000.jpg?width=700&amp;dpr=1&amp;s=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/dc8ef18171f616cadef6065483957532517fe332/0_0_6000_4000/master/6000.jpg?width=465&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/dc8ef18171f616cadef6065483957532517fe332/0_0_6000_4000/master/6000.jpg?width=465&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="Control room personnel celebrating after hearing that its private spacecraft named Odysseus has successfully landed." src="https://i.guim.co.uk/img/media/dc8ef18171f616cadef6065483957532517fe332/0_0_6000_4000/master/6000.jpg?width=465&amp;dpr=1&amp;s=none" width="465" height="310" loading="lazy"></picture></div><figcaption><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>Control room personnel celebrating after hearing that its private spacecraft named Odysseus has successfully landed.</span> Photograph: AP</figcaption></figure></article><article id="block-65d7de998f0877292bb35fbd"><header></header><p>Employees of Scorpius <a href="https://www.theguardian.com/science/space" data-link-name="in body link" data-component="auto-linked-tag">Space</a> Launch Company (SSLC) and their families and guests watching the landing from Torrance, California cheered as they heard news of the touchdown.</p><p>The lander used SSLC‚Äôs next-generation fuel tanks for the lunar mission.</p><figure id="64a6cc78-9f03-4ec4-8d7c-eb4655d5cfbe" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-5"><picture><source srcset="https://i.guim.co.uk/img/media/74ca8fb54640611768a81742c6849dc085e544b3/19_25_1232_739/master/1232.jpg?width=700&amp;dpr=2&amp;s=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/74ca8fb54640611768a81742c6849dc085e544b3/19_25_1232_739/master/1232.jpg?width=700&amp;dpr=1&amp;s=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/74ca8fb54640611768a81742c6849dc085e544b3/19_25_1232_739/master/1232.jpg?width=465&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/74ca8fb54640611768a81742c6849dc085e544b3/19_25_1232_739/master/1232.jpg?width=465&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="This is a frame grab from Nasa, shows Scorpius Space Launch Company (SSLC) employees and guests reacting in Torrance, California." src="https://i.guim.co.uk/img/media/74ca8fb54640611768a81742c6849dc085e544b3/19_25_1232_739/master/1232.jpg?width=465&amp;dpr=1&amp;s=none" width="465" height="278.924512987013" loading="lazy"></picture></div><figcaption><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span><br>This is a frame grab from Nasa, shows Scorpius Space Launch Company (SSLC) employees and guests reacting in Torrance, California.</span> Photograph: NASA/AFP/Getty Images</figcaption></figure></article><article id="block-65d7dde98f086f23f6db17bc"><header><h2>Nasa and Intuitive Machines celebrate moon landing</h2></header><p>Still, <a href="https://www.theguardian.com/science/nasa" data-link-name="in body link" data-component="auto-linked-tag">Nasa</a> and Intuitive Machines will be celebrating the achievement.</p><p>Odysseus is the first American spacecraft to accomplish such a feat since 1972.</p><figure id="d664e59d-8627-4f28-b280-dba20ce51139" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.TweetBlockElement"><gu-island name="TweetBlockComponent" priority="feature" deferuntil="visible" props="{&quot;element&quot;:{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.TweetBlockElement&quot;,&quot;source&quot;:&quot;Twitter&quot;,&quot;id&quot;:&quot;1760811461943722132&quot;,&quot;elementId&quot;:&quot;d664e59d-8627-4f28-b280-dba20ce51139&quot;,&quot;hasMedia&quot;:false,&quot;role&quot;:&quot;inline&quot;,&quot;url&quot;:&quot;https://twitter.com/NASA/status/1760811461943722132&quot;,&quot;isThirdPartyTracking&quot;:false,&quot;html&quot;:&quot;<blockquote class=\&quot;nojs-tweet\&quot;><p lang=\&quot;en\&quot; dir=\&quot;ltr\&quot;>Your order was delivered‚Ä¶ to the Moon! üì¶<a href=\&quot;https://twitter.com/Int_Machines?ref_src=twsrc%5Etfw\&quot;>@Int_Machines</a>&amp;#39; uncrewed lunar lander landed at 6:23pm ET (2323 UTC), bringing NASA science to the Moon&amp;#39;s surface. These instruments will prepare us for future human exploration of the Moon under <a href=\&quot;https://twitter.com/hashtag/Artemis?src=hash&amp;amp;ref_src=twsrc%5Etfw\&quot;>#Artemis</a>. <a href=\&quot;https://t.co/sS0poiWxrU\&quot;>pic.twitter.com/sS0poiWxrU</a></p>&amp;mdash; NASA (@NASA) <a href=\&quot;https://twitter.com/NASA/status/1760811461943722132?ref_src=twsrc%5Etfw\&quot;>February 22, 2024</a></blockquote>\n\n&quot;}}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"></gu-island></figure></article><article id="block-65d7dd368f086f23f6db17b7"><header></header><p>The flight controllers aren‚Äôt done yet, of course. They‚Äôll still work to glean more information, and confirm the circumstances of Odysseus‚Äôs landing, its current state, and whether it can achieve its objectives.</p></article><article id="block-65d7dbd98f0877292bb35fa4"><header><h2>'Odysseus has taken the moon,' says Nasa</h2></header><p>‚ÄúWhat a triumph,‚Äù said Bill Nelson, Nasa‚Äôs administrator in a message following the landing.</p><p>‚ÄúOdysseus has taken the moon. This feat is a giant leap forward for all of humanity.‚Äù</p><blockquote>
 <p><svg viewBox="0 0 22 14" style="fill:var(--block-quote-fill);"><path d="M5.255 0h4.75c-.572 4.53-1.077 8.972-1.297 13.941H0C.792 9.104 2.44 4.53 5.255 0Zm11.061 0H21c-.506 4.53-1.077 8.972-1.297 13.941h-8.686c.902-4.837 2.485-9.411 5.3-13.941Z"></path></svg><em>Today for the first time in more than a half century, the US has returned to the moon. Today for the first time in the history of humanity, a commercial company, an American company launched and led the voyage up there. And today is a day that shows the power and promise of NASA‚Äôs Commercial partnerships. Congratulations to everyone involved in this great and daring quest at Intuitive Machines, SpaceX and right here at Nasa.</em></p>
</blockquote></article><article id="block-65d7db558f089db0bc972e8a"><header></header><p>Flight controllers are still working on getting more information.</p><p>Nonetheless, it seems like Odysseus is the first American-built mission to land on the moon in more than a half century.</p></article><article id="block-65d7da778f089db0bc972e82"><header><h2>The Odysseus is on the moon...</h2></header><p>‚ÄúWe are on the surface,‚Äù said Stephen Altemus, president and CEO of Intuitive Machines. ‚ÄúWelcome to the moon. Odysseus has a new home.‚Äù</p><p><em>Note: a previous version of this post incorrectly attributed the quote to mission director Tim Craine.</em></p></article><article id="block-65d7da1b8f0877292bb35f95"><header></header><p>It is possible that the Odysseus has crashed‚Ä¶ or that there‚Äôs a communication issue. Flight controllers are still trying to figure it out.</p><p>‚ÄúWe‚Äôre not dead yet,‚Äù was the call out from mission control.</p></article><article id="block-65d7d8b08f089db0bc972e78"><header></header><p>We‚Äôre still standing by for confirmation. Controllers are going through the latest data that they‚Äôve gotten from the lander. There‚Äôs possibly a communications glitch.</p></article><article id="block-65d7d7c58f089db0bc972e76"><header></header><p>We‚Äôve reached the expected time of landing‚Ä¶ but waiting for confirmation.</p></article><article id="block-65d7d7638f089db0bc972e75"><header></header><p>The ‚Äúhazard disturbance avoidance‚Äù process has begun. The lander is 1000m away from the surface.</p><p>The lander is making autonomous decisions about where to land. We‚Äôre less than a minute away.</p></article><article id="block-65d7d6908f0877292bb35f79"><header><h2>Odysseus lander close to touchdown</h2></header><p><strong>The mission director just called out three minutes till touchdown.</strong></p><p>There will likely be a slight delay between when the lander makes contact with the surface, and when we will get confirmation. That delay could be as little as 15 seconds or several minutes.</p></article><article id="block-65d7d5e58f0877292bb35f77"><header></header><p>A reminder that there‚Äôs no human decisions being made about where to land. The autonomous system on the lander is scanning the surface for the best place to drop down.</p></article><article id="block-65d7d52c8f089db0bc972e5f"><header></header><p><strong>The lander is feeding data to the scientists in the control room.</strong></p><p>Everything seems on track so far, as the lander continues slowing itself down so that it can prepare for a vertical descent.</p></article><gu-island name="LiveBlogEpic" priority="feature" deferuntil="idle" props="{&quot;sectionId&quot;:&quot;science&quot;,&quot;shouldHideReaderRevenue&quot;:false,&quot;tags&quot;:[{&quot;id&quot;:&quot;science/space&quot;,&quot;type&quot;:&quot;Keyword&quot;,&quot;title&quot;:&quot;Space&quot;},{&quot;id&quot;:&quot;science/science&quot;,&quot;type&quot;:&quot;Keyword&quot;,&quot;title&quot;:&quot;Science&quot;},{&quot;id&quot;:&quot;science/moon&quot;,&quot;type&quot;:&quot;Keyword&quot;,&quot;title&quot;:&quot;The moon&quot;},{&quot;id&quot;:&quot;science/nasa&quot;,&quot;type&quot;:&quot;Keyword&quot;,&quot;title&quot;:&quot;Nasa&quot;},{&quot;id&quot;:&quot;us-news/us-news&quot;,&quot;type&quot;:&quot;Keyword&quot;,&quot;title&quot;:&quot;US news&quot;},{&quot;id&quot;:&quot;world/world&quot;,&quot;type&quot;:&quot;Keyword&quot;,&quot;title&quot;:&quot;World news&quot;},{&quot;id&quot;:&quot;type/article&quot;,&quot;type&quot;:&quot;Type&quot;,&quot;title&quot;:&quot;Article&quot;},{&quot;id&quot;:&quot;tone/minutebyminute&quot;,&quot;type&quot;:&quot;Tone&quot;,&quot;title&quot;:&quot;Minute by minute&quot;},{&quot;id&quot;:&quot;tone/news&quot;,&quot;type&quot;:&quot;Tone&quot;,&quot;title&quot;:&quot;News&quot;},{&quot;id&quot;:&quot;profile/maanvi-singh&quot;,&quot;type&quot;:&quot;Contributor&quot;,&quot;title&quot;:&quot;Maanvi Singh&quot;,&quot;twitterHandle&quot;:&quot;maanvissingh&quot;},{&quot;id&quot;:&quot;profile/martin-belam&quot;,&quot;type&quot;:&quot;Contributor&quot;,&quot;title&quot;:&quot;Martin Belam&quot;,&quot;bylineImageUrl&quot;:&quot;https://i.guim.co.uk/img/uploads/2023/05/15/Martin_Belam.jpg?width=300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=c3892d15230cdc73865506dd3d2d9b6e&quot;,&quot;bylineLargeImageUrl&quot;:&quot;https://i.guim.co.uk/img/uploads/2023/05/15/Martin_Belam.png?width=300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=885dc612484c4513f30ca951081f3245&quot;},{&quot;id&quot;:&quot;profile/iansample&quot;,&quot;type&quot;:&quot;Contributor&quot;,&quot;title&quot;:&quot;Ian Sample&quot;,&quot;twitterHandle&quot;:&quot;iansample&quot;,&quot;bylineImageUrl&quot;:&quot;https://i.guim.co.uk/img/static/sys-images/Guardian/Pix/pictures/2014/4/17/1397749332765/IanSample.jpg?width=300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=9ee99192b737b495cf645e33801f6c1a&quot;,&quot;bylineLargeImageUrl&quot;:&quot;https://i.guim.co.uk/img/uploads/2017/10/06/Ian-Sample,-R.png?width=300&amp;quality=85&amp;auto=format&amp;fit=max&amp;s=32ca0abf6516106286df7cdb99c47f3f&quot;},{&quot;id&quot;:&quot;profile/richardluscombe&quot;,&quot;type&quot;:&quot;Contributor&quot;,&quot;title&quot;:&quot;Richard Luscombe&quot;,&quot;twitterHandle&quot;:&quot;richlusc&quot;},{&quot;id&quot;:&quot;tracking/commissioningdesk/digital-backbench&quot;,&quot;type&quot;:&quot;Tracking&quot;,&quot;title&quot;:&quot;UK Digital Backbench&quot;},{&quot;id&quot;:&quot;tracking/commissioningdesk/west-coast-news&quot;,&quot;type&quot;:&quot;Tracking&quot;,&quot;title&quot;:&quot;West Coast News&quot;},{&quot;id&quot;:&quot;tracking/commissioningdesk/us-news&quot;,&quot;type&quot;:&quot;Tracking&quot;,&quot;title&quot;:&quot;US News&quot;}],&quot;isPaidContent&quot;:false,&quot;contributionsServiceUrl&quot;:&quot;https://contributions.guardianapis.com&quot;,&quot;pageId&quot;:&quot;science/live/2024/feb/22/nasa-odysseus-moon-landing-intuitive-machines&quot;,&quot;keywordIds&quot;:&quot;science/space,science/science,science/moon,science/nasa,us-news/us-news,world/world&quot;}" config="{&quot;renderingTarget&quot;:&quot;Web&quot;,&quot;darkModeAvailable&quot;:false}"></gu-island></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Real-time image generation with SDXL Lightning (344 pts)]]></title>
            <link>https://fastsdxl.ai/</link>
            <guid>39474467</guid>
            <pubDate>Thu, 22 Feb 2024 22:52:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://fastsdxl.ai/">https://fastsdxl.ai/</a>, See on <a href="https://news.ycombinator.com/item?id=39474467">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>This playground is hosted on<!-- --> <strong><a href="https://fal.ai/" target="_blank">fal.ai</a></strong> <!-- -->and is for demonstration purposes only.</p><div><p><span>powered by</span></p><a target="_blank" href="https://fal.ai/"><svg width="52" height="24" viewBox="0 0 89 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M52.308 3.07812H57.8465V4.92428H56.0003V6.77043H54.1541V10.4627H57.8465V12.3089H54.1541V25.232H52.308V27.0781H46.7695V25.232H48.6157V12.3089H46.7695V10.4627H48.6157V6.77043H50.4618V4.92428H52.308V3.07812Z" fill="currentColor"></path><path d="M79.3849 23.3858H81.2311V25.232H83.0772V27.0781H88.6157V25.232H86.7695V23.3858H84.9234V4.92428H79.3849V23.3858Z" fill="currentColor"></path><path d="M57.8465 14.155H59.6926V12.3089H61.5388V10.4627H70.7695V12.3089H74.4618V23.3858H76.308V25.232H78.1541V27.0781H72.6157V25.232H70.7695V23.3858H68.9234V14.155H67.0772V12.3089H65.2311V14.155H63.3849V23.3858H65.2311V25.232H67.0772V27.0781H61.5388V25.232H59.6926V23.3858H57.8465V14.155Z" fill="currentColor"></path><path d="M67.0772 25.232V23.3858H68.9234V25.232H67.0772Z" fill="currentColor"></path><rect opacity="0.22" x="7.38477" y="29.5391" width="2.46154" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.85" x="2.46094" y="19.6914" width="12.3077" height="2.46154" fill="#5F4CD9"></rect><rect x="4.92383" y="17.2305" width="9.84615" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.4" x="7.38477" y="27.0781" width="4.92308" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.7" y="22.1562" width="14.7692" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.5" x="7.38477" y="24.6133" width="7.38462" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.22" x="7.38477" y="12.3086" width="2.46154" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.85" x="2.46094" y="2.46094" width="12.3077" height="2.46154" fill="#5F4CD9"></rect><rect x="4.92383" width="9.84615" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.4" x="7.38477" y="9.84375" width="4.92308" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.7" y="4.92188" width="14.7692" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.5" x="7.38477" y="7.38281" width="7.38462" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.22" x="24.6152" y="29.5391" width="2.46154" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.85" x="19.6914" y="19.6914" width="12.3077" height="2.46154" fill="#5F4CD9"></rect><rect x="22.1543" y="17.2305" width="9.84615" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.4" x="24.6152" y="27.0781" width="4.92308" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.7" x="17.2305" y="22.1562" width="14.7692" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.5" x="24.6152" y="24.6133" width="7.38462" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.22" x="24.6152" y="12.3086" width="2.46154" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.85" x="19.6914" y="2.46094" width="12.3077" height="2.46154" fill="#5F4CD9"></rect><rect x="22.1543" width="9.84615" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.4" x="24.6152" y="9.84375" width="4.92308" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.7" x="17.2305" y="4.92188" width="14.7692" height="2.46154" fill="#5F4CD9"></rect><rect opacity="0.5" x="24.6152" y="7.38281" width="7.38462" height="2.46154" fill="#5F4CD9"></rect></svg></a></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Supermaven, the first code completion tool with 300k token context (142 pts)]]></title>
            <link>https://supermaven.com/blog/introducing-supermaven</link>
            <guid>39473773</guid>
            <pubDate>Thu, 22 Feb 2024 21:49:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://supermaven.com/blog/introducing-supermaven">https://supermaven.com/blog/introducing-supermaven</a>, See on <a href="https://news.ycombinator.com/item?id=39473773">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><table><thead><tr><th>Tool</th><th>Frames</th><th>Latency (ms)</th></tr></thead><tbody><tr><td>Supermaven</td><td>15</td><td>250</td></tr><tr><td>Copilot</td><td>47</td><td>783</td></tr><tr><td>Codeium</td><td>53</td><td>883</td></tr><tr><td>Tabnine</td><td>50</td><td>833</td></tr><tr><td>Cursor</td><td>113</td><td>1,883</td></tr></tbody></table><center><em>See below for details.</em></center><p>Code completion has come a long way. When I created TabNine in 2018, the first tool to use deep learning for code completion, there were few developer tools that used AI. The models were small, the capabilities were limited, and people were skeptical that the tools were useful enough to be worth paying for.</p><p>Since then, AI coding tools have been widely adopted: GitHub recently <a href="https://www.theinformation.com/briefings/microsoft-github-copilot-revenue-100-million-ARR-ai">announced</a> that its tool Copilot had reached $100 million in annual recurring revenue. Millions of developers now use AI tools every day. This adoption is driven by the deployment of large models with tens of billions of parameters that are much more useful than the models of 2018.</p><p>Given that code completion has "gone mainstream", given the growing size of the largest language models, and given the enormous costs involved in training the largest models, it raises the question: is there still room for small startups? Has code completion become the exclusive province of large players like Microsoft or Google?</p><p>At Supermaven we believe the question is not yet settled. The reason is the high serving costs of large models. While a model like GPT-4 offers unmatched suggestion quality, it's impossible to run on every keystroke (unless you charge users $1,000/month). Today, the deployment of an AI coding tool is limited just as much by the cost of the GPUs to run the tool as by the cost to develop the tool itself. That's why Copilot has <a href="https://thakkarparth007.github.io/copilot-explorer/posts/copilot-internals.html#preventing-poor-requests-via-contextual-filter">made efforts</a> to reduce costs by limiting the contexts in which they offer suggestions.</p><p>The high cost of serving a code completion tool levels the playing field: it means that everyone, whether a small startup or Microsoft, must use a small model to remain profitable. The best product is the one which uses a small model most effectively.</p><p>So how is Supermaven different?</p><h3 id="300000-token-context-window">300,000-token context window</h3><p>The context window of a code completion model determines how much of your code it can take into account when making its suggestions. A long context window is crucial to delivering good completions - that's why Copilot <a href="https://github.blog/changelog/2023-08-28-github-copilot-august-28th-update/#expanding-copilots-context-window-to-8k">recently expanded</a> its context window to 8,192 tokens.</p><p>At Supermaven we've developed and trained from scratch a new neural network architecture which is more efficient than a Transformer (the current standard architecture) at integrating information across a long context window. This allows us to offer a 300,000-token context window while keeping the cost and latency the same as a Transformer with a 4,000-token context window.</p>
<p>As a user, that means that after Supermaven spends 10-20 seconds processing your repository, it will become familiar with your APIs and the unique conventions of your codebase. That fixes one of the most common complaints about Copilot: that while it's great at working with well-known APIs and libraries that have good coverage in the training data, it struggles with the large, idiosyncratic codebases that you get when using it for real work.</p><p>Here's a simple example of the difference that a 300,000-token context window makes. In this example, I ran Supermaven and Copilot on the same code and asked them to generate a function called <code>doubleIndentation</code> taking a value of type <code>Indentation</code>. Because the <code>Indentation</code> struct isn't defined or used anywhere in the file, Copilot doesn't have any information about it in context, so it generates code that doesn't compile. Supermaven generates correct code because its context window is large enough to fit the entire 50,000-token repository.</p><video src="https://cdn.supermaven.com/video/longdef.mp4" controls="" width="100%" height="auto"></video><h3 id="speed">Speed</h3><p>Supermaven is fast: we've built custom infrastructure to keep it responsive while working with the long prompts that come with large codebases.</p><p>I designed a simple test to compare Supermaven to the competition. To ensure each tool has the prompt in cache, I started with a context where every tool agrees the most likely completion is <code>for (let i</code>. Then I typed <code>for (let j</code>, forcing each tool to generate a new completion, and measured the number of frames between the appearance of 'j' on the screen and the appearance of the completion. Here are the results:</p><table><thead><tr><th>Tool</th><th>Frames</th><th>Latency (ms)</th></tr></thead><tbody><tr><td>Supermaven</td><td>15</td><td>250</td></tr><tr><td>Copilot</td><td>47</td><td>783</td></tr><tr><td>Codeium</td><td>53</td><td>883</td></tr><tr><td>Tabnine</td><td>50</td><td>833</td></tr><tr><td>Cursor</td><td>113</td><td>1,883</td></tr></tbody></table><video src="https://cdn.supermaven.com/video/speed_comparison.mp4" controls="" width="100%" height="auto"></video><h3 id="trained-on-edit-sequences-not-just-files">Trained on edit sequences, not just files</h3><p>Unlike most code assistants, Supermaven doesn't see your code as a sequence of files. Instead, Supermaven sees the sequence of edits you've made to your codebase - similar to what you'd see if you ran <code>git diff</code>. This helps Supermaven quickly understand what you're trying to accomplish, and it's great for refactoring. Here are some examples:</p><video src="https://cdn.supermaven.com/video/edit_sequence.mp4" controls="" width="100%" height="auto"></video><h3 id="try-it-now">Try it now</h3><p><a href="https://supermaven.com/download">Download Supermaven</a> to try it for yourself. We're excited to see what you think of it.</p><p>If you don't use VS Code, <a href="https://twitter.com/SupermavenAI">follow us on Twitter</a> to find out when Supermaven is ready for your preferred editor.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I recorded a screen capture of a task. Gemini generated code to replicate it (107 pts)]]></title>
            <link>https://twitter.com/DynamicWebPaige/status/1760537379369304309</link>
            <guid>39473611</guid>
            <pubDate>Thu, 22 Feb 2024 21:35:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/DynamicWebPaige/status/1760537379369304309">https://twitter.com/DynamicWebPaige/status/1760537379369304309</a>, See on <a href="https://news.ycombinator.com/item?id=39473611">Hacker News</a></p>
Couldn't get https://twitter.com/DynamicWebPaige/status/1760537379369304309: Error: Request failed with status code 400]]></description>
        </item>
        <item>
            <title><![CDATA[Google Pay app will no longer be available (109 pts)]]></title>
            <link>https://support.google.com/googlepay/answer/14555219?hl=en</link>
            <guid>39473592</guid>
            <pubDate>Thu, 22 Feb 2024 21:34:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://support.google.com/googlepay/answer/14555219?hl=en">https://support.google.com/googlepay/answer/14555219?hl=en</a>, See on <a href="https://news.ycombinator.com/item?id=39473592">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="hcfe-content" role="main">            <article class="page" sc-render-smart-button="false" itemscope=""> <div data-stats-ve="35"><p><strong>Important: </strong>The following changes only impact the U.S. version of the standalone Google Pay app.</p>

<p>While in-store and online payments via Google Pay remain unchanged, the U.S. version of the Google Pay app will no longer be available for use<strong> </strong>starting June 4, 2024. Here are the key changes and important dates:</p>

<ul>
  <li><strong>Manage your Google Pay balance from the Google Pay app until June 4.</strong> You can use the U.S. version of the Google Pay app until June 4, 2024 to view and transfer your Google Pay balance to your bank account. You can continue to view and transfer your funds to your bank account after June 4, 2024 from the <a href="http://pay.google.com/" rel="noopener" target="_blank">Google Pay website</a>. <a href="https://support.google.com/googlepay/answer/10197214" rel="noopener">Learn more about transferring money out of Google Pay</a>.</li>
  <li><strong>Changes to peer-to-peer payments:</strong> As of June 4, 2024, you will no longer be able to send money to, request or receive money from others through the U.S. version of the Google Pay app.</li>
  <li><strong>As of today you will no longer be able to view or activate deals in the U.S. version of the Google Pay app.</strong> If you previously activated a deal, and are still waiting for cash back, <a href="https://support.google.com/googlepay/answer/10852671?sjid=4992091311075268743-NA#find-cashback&amp;zippy=%2Creward-timelines-where-to-find-cash-back" rel="noopener">regular reward timelines</a> apply.</li>
</ul>

<p>Your experience with Google Pay to check out online and to tap to pay in stores will remain the same. <a href="https://blog.google/products/google-pay/payment-apps-update/" rel="noopener">Learn more about how Google simplifies our payment apps in the US.</a></p>

<p>Google Payment Corporation's <a href="https://support.google.com/googlepay/answer/7160765?hl=en">Customer Service and Error Resolution Policy</a> and applicable processes still apply to report unauthorized peer-to-peer transactions related to Google Pay. If you have any further questions about your balance in the app, refer to this <a href="https://support.google.com/googlepay/answer/10197112" rel="noopener">Google Pay balance article</a>.</p>

<h3>Common questions about these changes</h3>
<p><a>When will the U.S. version of the Google Pay app no longer be available for use?</a></p><div>
  <p>On June 4, 2024, the U.S. version of the Google Pay app will no longer be available for use. This change does not impact the Google Pay app in India or Singapore, nor does it impact Google Wallet. <a href="https://support.google.com/wallet/answer/11951709#about_google_wallet" rel="noopener">Learn more about Google Wallet</a>.</p>

  <p>You can continue to do the following:</p>

  <p>1. You can continue to tap and pay in stores and manage payment methods in Google Wallet, and from the <a href="http://pay.google.com/" rel="noopener" target="_blank">Google Pay website</a>.</p>

  <p>2. You can continue to pay online and in-store with Google Pay (your stored payment details will still appear at checkout online on Android and Chrome, and in-store through Google Wallet).</p>

  <p>3. You can use the U.S. version of the Google Pay app until June 4, 2024 to view and transfer your Google Pay balance to your bank account. After June 4, 2024, you can view and transfer your Google Pay balance to your bank account from the <a href="http://pay.google.com/" rel="noopener" target="_blank">Google Pay website</a>.</p>
</div>
<p><a id="app_balance_sunset" name="app_balance_sunset">What if I have money in the U.S. version of the Google Pay app?</a></p><p>Prior to June 4, 2024, you can transfer your Google Pay balance to your bank account from the U.S. version of the Google Pay app. After June 4, 2024, you can continue to access and transfer your Google Pay balance from the <a href="http://pay.google.com/" rel="noopener" target="_blank">Google Pay website</a>. <a href="https://support.google.com/googlepay/answer/10197214" rel="noopener">Learn how to transfer money out of Google Pay</a>.</p>
<p><a>Can I still use the tap to pay feature in stores?</a></p>
<p><a>What if the U.S. version of the Google Pay app is linked to my bank account with Plaid?</a></p><p>If you have linked accounts on Google Pay to monitor your transactions and insights, you‚Äôll still be able to view your transactions on the <a href="http://pay.google.com/" rel="noopener" target="_blank">Google Pay website</a> in the transactions tab after June 4, 2024. If you wish to disconnect your accounts after June 4, 2024, you will be able to unlink them on the <a href="https://pay.google.com/" rel="noopener" target="_blank">Google Pay website</a>.</p>
<p><a>What if I send money internationally with Wise via the U.S. version of the Google Pay app?</a></p><p>If you‚Äôve used the Google Pay app in the U.S. to send money with Wise from the U.S. to India or Singapore, this feature and related transaction information will no longer be available in the app starting June 4, 2024. This does not impact your Wise account, which you can continue to access at <a href="http://wise.com/" rel="noopener" target="_blank">wise.com</a>.</p>
<p><a>Can I still find deals with Google?</a></p><div>
  <p>Google Pay offers are no longer available in the U.S. version of the Google Pay app.</p>

  <p>If you previously activated an offer, and are still waiting for cash back from a qualified purchase, <a href="https://support.google.com/googlepay/answer/10852671?sjid=4992091311075268743-NA#find-cashback&amp;zippy=%2Creward-timelines-where-to-find-cash-back" rel="noopener">reward timelines still apply</a>.</p>
</div>
</div>      </article>            </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Apple Pkl (110 pts)]]></title>
            <link>https://github.com/apple/pkl</link>
            <guid>39473466</guid>
            <pubDate>Thu, 22 Feb 2024 21:24:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/apple/pkl">https://github.com/apple/pkl</a>, See on <a href="https://news.ycombinator.com/item?id=39473466">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
          <nav aria-label="Global">
            <ul>
                <li>
      
      <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Actions&quot;,&quot;label&quot;:&quot;ref_cta:Actions;&quot;}" href="https://github.com/features/actions">
      
      <div>
        <p>Actions</p><p>
        Automate any workflow
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Packages&quot;,&quot;label&quot;:&quot;ref_cta:Packages;&quot;}" href="https://github.com/features/packages">
      
      <div>
        <p>Packages</p><p>
        Host and manage packages
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Security&quot;,&quot;label&quot;:&quot;ref_cta:Security;&quot;}" href="https://github.com/features/security">
      
      <div>
        <p>Security</p><p>
        Find and fix vulnerabilities
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Codespaces&quot;,&quot;label&quot;:&quot;ref_cta:Codespaces;&quot;}" href="https://github.com/features/codespaces">
      
      <div>
        <p>Codespaces</p><p>
        Instant dev environments
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Copilot&quot;,&quot;label&quot;:&quot;ref_cta:Copilot;&quot;}" href="https://github.com/features/copilot">
      
      <div>
        <p>Copilot</p><p>
        Write better code with AI
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Code review&quot;,&quot;label&quot;:&quot;ref_cta:Code review;&quot;}" href="https://github.com/features/code-review">
      
      <div>
        <p>Code review</p><p>
        Manage code changes
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Issues&quot;,&quot;label&quot;:&quot;ref_cta:Issues;&quot;}" href="https://github.com/features/issues">
      
      <div>
        <p>Issues</p><p>
        Plan and track work
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Discussions&quot;,&quot;label&quot;:&quot;ref_cta:Discussions;&quot;}" href="https://github.com/features/discussions">
      
      <div>
        <p>Discussions</p><p>
        Collaborate outside of code
      </p></div>

    
</a></li>

            </ul>
          </div>
</li>


                <li>
      
      
</li>


                <li>
      
      <div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to GitHub Sponsors&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Sponsors;&quot;}" href="https://github.com/sponsors">
      
      <div>
        <p>GitHub Sponsors</p><p>
        Fund open source developers
      </p></div>

    
</a></li>

            </ul>
          </div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to The ReadME Project&quot;,&quot;label&quot;:&quot;ref_cta:The ReadME Project;&quot;}" href="https://github.com/readme">
      
      <div>
        <p>The ReadME Project</p><p>
        GitHub community articles
      </p></div>

    
</a></li>

            </ul>
          </div>
          
      </div>
</li>


                <li>
    <a data-analytics-event="{&quot;category&quot;:&quot;Header menu top item (logged out)&quot;,&quot;action&quot;:&quot;click to go to Pricing&quot;,&quot;label&quot;:&quot;ref_cta:Pricing;&quot;}" href="https://github.com/pricing">Pricing</a>
</li>

            </ul>
          </nav>

        <div>
                


<qbsearch-input data-scope="repo:apple/pkl" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="hKYyY2vRqwvn4OwRJGuTlwpkgIuoCOwENc2vxzToY639L-8i2YHpi4Re2NDQEw2td9Rze9zIUcD8ko0B5ZYbpA" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="apple/pkl" data-current-org="apple" data-current-owner="" data-logged-in="false" data-copilot-chat-enabled="false" data-blackbird-indexed-repo-csrf="<esi:include src=&quot;/_esi/rails_csrf_token_form_hidden?r=l2vi1sxWpayXndkyBQnBkTxXTpNSrAE28PAZC1y6IVhhY2thvFZ1%2B7CRE2rJY%2FQp%2By8JqgUveNqhZ86pz6HW8374SjjDbByM%2FdkMX9MGJLuLSANZILMEJKqmHdTPZGEd%2F8OJdqZXNwltPzTZDYu8n9g1tiSK4%2FQDRfc5TUf0iRAeg%2FcTEs9RRQSWlHEoz8h3Ku%2BpzU4kdEUBPAGNmjtjXgBVZzkarwgaYe9NrKQRiEf9rEB073II4Z0SBQhgO3Z9IDVx%2F1qew6esHH2cJXHOcFZ1xyWdtwNtGpCJ8Ju1%2B86PNM3HjyQOqeLuQP5iaHFtMTt96Suede89ZkheF54dlWM5pQvkSP6B7T4tQa%2BvwaQx7%2FXA8zguG5PX2OCv0KSQIRTloC2xz53fIW1nFarcPHXHuWtH6K%2BcKxsbH%2FqEk9ejO0hzSJ8VsN%2FQLNgrPhUI2E4LnQtugGNpRCjPRvL9xrbYJT5lathzjQ8ftzt8OUpHy3%2BaIOWBrj802c6LtwkNMQk%3D--1AqOIRflOqky%2FhE%2B--iHOmtDQv%2FmmJcvnBpx%2F7SA%3D%3D&quot; />">
  <div data-modal-dialog-overlay="" data-action="click:qbsearch-input#searchInputContainerClicked">
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true">
      <h2 id="search-suggestions-dialog-header">Search code, repositories, users, issues, pull requests...</h2>
    
</modal-dialog></div>
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>

            <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&amp;source=header-repo&amp;source_repo=apple%2Fpkl" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/apple/pkl&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="5c690fce46456e9a564546602a2b95cc38ce35f5b7abe023e153367199023f0d" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>;ref_cta:Sign up;ref_loc:header logged out&quot;}">
              Sign up
            </a>
        </p></div>
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Reddit S1 (102 pts)]]></title>
            <link>https://www.sec.gov/Archives/edgar/data/1713445/000162828024006294/reddits-1q423.htm</link>
            <guid>39472782</guid>
            <pubDate>Thu, 22 Feb 2024 20:33:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.sec.gov/Archives/edgar/data/1713445/000162828024006294/reddits-1q423.htm">https://www.sec.gov/Archives/edgar/data/1713445/000162828024006294/reddits-1q423.htm</a>, See on <a href="https://news.ycombinator.com/item?id=39472782">Hacker News</a></p>
Couldn't get https://www.sec.gov/Archives/edgar/data/1713445/000162828024006294/reddits-1q423.htm: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Nobody ever gets credit for fixing problems that never happened (2001) [pdf] (763 pts)]]></title>
            <link>https://web.mit.edu/nelsonr/www/Repenning=Sterman_CMR_su01_.pdf</link>
            <guid>39472693</guid>
            <pubDate>Thu, 22 Feb 2024 20:26:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://web.mit.edu/nelsonr/www/Repenning=Sterman_CMR_su01_.pdf">https://web.mit.edu/nelsonr/www/Repenning=Sterman_CMR_su01_.pdf</a>, See on <a href="https://news.ycombinator.com/item?id=39472693">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Google cut a deal with Reddit for AI training data (161 pts)]]></title>
            <link>https://www.theverge.com/2024/2/22/24080165/google-reddit-ai-training-data</link>
            <guid>39471964</guid>
            <pubDate>Thu, 22 Feb 2024 19:39:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theverge.com/2024/2/22/24080165/google-reddit-ai-training-data">https://www.theverge.com/2024/2/22/24080165/google-reddit-ai-training-data</a>, See on <a href="https://news.ycombinator.com/item?id=39471964">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Google is getting AI training data from Reddit as <a href="https://blog.google/inside-google/company-announcements/expanded-reddit-partnership/">part of a new partnership</a> between the two companies. In <a href="https://www.redditinc.com/blog/reddit-and-google-expand-partnership">an update on Thursday</a>, Reddit announced it will start providing Google ‚Äúmore efficient ways to train models.‚Äù </p><p>The collaboration will give Google access to Reddit‚Äôs data API, which delivers real-time content from Reddit‚Äôs platform. This will provide ‚ÄúGoogle with an efficient and structured way to access the vast corpus of existing content on Reddit,‚Äù while also allowing the company to display content from Reddit in new ways across its products. </p><p>When Reddit CEO Steve Huffman <a href="https://www.theverge.com/2023/6/15/23762868/reddit-ceo-steve-huffman-interview">spoke to <em>The Verge</em> last year</a> about Reddit‚Äôs API changes and the <a href="https://www.theverge.com/2023/6/9/23755640/reddit-api-changes-apps-apollo-shut-down-ama-spez-steve-huffman">subsequent protests</a>, he said, ‚ÄúThe API usage is about covering costs and data licensing is a new potential business for us,‚Äù suggesting Reddit may seek out similar revenue-generating arrangements in the future.</p><p>The partnership will give Reddit access to Vertex AI as well, Google‚Äôs AI-powered service that‚Äôs supposed to <a href="https://www.theverge.com/2023/11/16/23961600/google-is-letting-anyone-build-their-own-netflix-like-ai-powered-recommendations-using-google-cloud">help companies improve</a> their search results. Reddit says the change doesn‚Äôt affect the company‚Äôs data API terms, which prevent developers or companies from accessing it for commercial purposes without approval.</p><p>Just last week, a report from <em>Bloomberg</em> said Reddit struck a <a href="https://www.theverge.com/2024/2/17/24075670/reddit-ai-training-license-deal-user-content">$60 million training deal</a> with an unnamed AI company. Google Search <a href="https://www.seroundtable.com/google-search-forums-search-bar-menu-36912.html">is currently expanding</a> the test of <a href="https://www.theverge.com/2022/9/28/23377358/google-search-reddit-discussions-forums-results">a ‚Äúforums‚Äù filter</a> that lets you browse through results from sites with human discussion, like Reddit, Stack Overflow, and Hacker News.</p><p>Despite this deal, Google and Reddit haven‚Äôt always seen eye to eye. <a href="https://www.theverge.com/2023/10/20/23925504/reddit-deny-force-log-in-see-posts-ai-companies-deals">Reddit previously threatened to block Google</a> from crawling its site over concerns that companies would use its data for free to train AI models. Reddit is also poised to announce its initial public offering within the coming weeks, and it‚Äôs likely making this change as part of its effort to boost its valuation, which sat at <a href="https://www.theverge.com/2021/8/12/22621445/reddit-valuation-revenue-funding-round">more than $10 billion in 2021</a>.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Our Company Is Doing So Well That You're All Fired (361 pts)]]></title>
            <link>https://www.mcsweeneys.net/articles/our-company-is-doing-so-well-that-youre-all-fired</link>
            <guid>39471568</guid>
            <pubDate>Thu, 22 Feb 2024 19:08:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.mcsweeneys.net/articles/our-company-is-doing-so-well-that-youre-all-fired">https://www.mcsweeneys.net/articles/our-company-is-doing-so-well-that-youre-all-fired</a>, See on <a href="https://news.ycombinator.com/item?id=39471568">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="o-wrapper">
    <main>
        <header>
    <div>
      <div>
          <p><span><img role="none" src="https://www.mcsweeneys.net/assets/search-614fbdcc4e71f0730ad039e484ec78a1085f24294fa0b4514da70b0a930b2dce.svg"></span></p>        </div>
      <div>
        <ul>
          <li><a href="https://www.mcsweeneys.net/">Internet Tendency</a></li>
          <li><a href="https://store.mcsweeneys.net/">The Store</a></li>
          <li><a href="https://store.mcsweeneys.net/t/categories/books">Books Division</a></li>
          <li><a href="https://store.mcsweeneys.net/t/categories/timothy-mcsweeneys-quarterly-concern">Quarterly Concern</a></li>
          <li><a href="https://thebeliever.net/">The Believer</a></li>
          <li><a href="https://www.mcsweeneys.net/donate">Donate</a></li>
        </ul>
      </div>
    </div>
    
  </header>


      
  <div>
    <h6>McSWEENEY'S INTERNET TENDENCY'S PATREON</h6>
    
  </div>


      
<article>
    
   
    <div>
      <p><i>‚ÄúParamount Global lays off about 800 employees, a day after announcing record Super Bowl ratings.‚Äù ‚Äî <a href="https://cnbc.com/2024/02/13/paramount-global-lays-off-about-800-employees-after-super-bowl.html"><span>CNBC</span></a></i></p>
<p>- - -</p><p>Thank you for jumping on this last-minute Zoom meeting. As you‚Äôre all well aware, this has been a great year for us. Profits are at an all-time high. Our stock price is at an all-time high. Growth projections for the coming year are through the roof. You all have done an amazing job ushering in a new era of success for this company. So amazing, in fact, that we have no choice but to let you all go.</p>
<p>I realize this comes as a shock, but I don‚Äôt want any of you to worry about the future. Thanks to you, we are in an excellent position to ride out the challenges of the coming year. I mean, those of us who still work here are. But I‚Äôm sure you all will be fine too. You‚Äôre top-level contributors. You‚Äôll surely help any company you join become successful enough to no longer need you, as long as you don‚Äôt do one of the jobs we‚Äôre all replacing with AI. About 60 percent of you will be A-OK, in the very short term. You have my non‚Äìlegally binding word on that.</p>
<p>But let‚Äôs not linger on the very real problems this most recent evolution of capitalism has put before you. You should take a moment to celebrate yourselves. You crushed it. You‚Äôve helped us grow so much that the only possible way for you to continue to help us grow is by no longer working here, effective immediately. That‚Äôs quite an achievement, although I do acknowledge it sounds a little nonsensical. Frankly, I‚Äôm not sure I even understand exactly how it works. Maybe one of you can explain it to me before you leave? You‚Äôre our best and brightest, after all. Well, you are for the next twenty minutes or so.</p>
<p>So keep your heads high. You‚Äôll leave here knowing we couldn‚Äôt have been successful enough to fire you without you. That it was your proud and noble contributions that ultimately enabled us to stop giving you a salary and benefits. And at the end of the day, isn‚Äôt that more valuable than money? I guess no, not according to our board and shareholders. But they‚Äôre not as proud and noble as you, the chosen few (I think 20 percent of our workforce counts as ‚Äúfew‚Äù). They may come away from this whole ordeal with a few more points on their shares, but you‚Äôll get to walk away knowing that, for the small sacrifice of your ability to pay your mortgages or buy food, you provided those points. That makes you the big winners in all this, in my eyes.</p>
<p>Honestly, if it weren‚Äôt for the fact that my equity doesn‚Äôt vest for another six months, I might even consider joining you, you noble, fallen warriors. But no, my sad fate is to fail upward and look on with jealousy and admiration as you all succeed downward. I envy you. I really do.</p>
<p>As for what happens next, be assured that we plan to treat you with the utmost respect‚Äî</p>
<p>‚ÄîSorry, I think you all got booted when IT terminated your access to the company servers. Can‚Äôt be too careful, right? Anyway, as I was saying, you‚Äôll all be treated with the utmost respect from now until we get your laptops back. Please try to have those in the mail by the end of the day, by the way.</p>
    </div>
    

    <div>
    <p>
        Please help support our writers and keep our site ad-free by becoming a patron today!
    </p>
    
  </div>

</article>

    


      <div>
        <h5>Suggested Reads</h5>
        <ul>
            <li>
    <a href="https://www.mcsweeneys.net/articles/letters-home-from-the-corporate-retreat">
      <p>June 25, 2010</p>
      <p>Letters Home From the Corporate Retreat</p>
</a>    
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/an-e-mail-to-god">
      <p>April  9, 2009</p>
      <p>Grant Munroe‚Äôs Corporate Folktales: An E-Mail to God</p>
</a>    <p><span>by </span>Grant Munroe</p>
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/the-great-sag">
      <p>October  4, 2000</p>
      <p>The Great Sag</p>
</a>    <p><span>by </span>Paul Maliszewski</p>
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/a-presentation-on-the-power-of-vulnerability-by-a-manager-who-is-about-to-fire-people">
      <p>February  9, 2023</p>
      <p>A Presentation on the Power of Vulnerability by a Manager Who Is About to Fire People</p>
</a>    <p><span>by </span>Patty Terhune</p>
  </li>

        </ul>
      </div>


  <section>
        <div>
      <h5>Trending üî•</h5>
      <ol>
          <li>
    <a href="https://www.mcsweeneys.net/articles/i-am-a-boomers-iphone-and-i-will-not-be-silenced">
      <p>February  7, 2024</p>
      <p>I Am a Boomer‚Äôs iPhone and I Will Not Be Silenced</p>
</a>    <p><span>by </span>Julia Bensfield Luce</p>
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/ten-things-to-say-at-your-next-meeting-instead-of-to-piggyback-off-your-idea">
      <p>February 14, 2024</p>
      <p>Ten Things to Say at Your Next Meeting Instead of ‚ÄúTo Piggyback off Your Idea‚Äù</p>
</a>    <p><span>by </span>Troy Doetch</p>
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/cormac-mccarthys-valentines-day-candy-hearts">
      <p>February 13, 2024</p>
      <p>Cormac McCarthy‚Äôs Valentine‚Äôs Day Candy Hearts</p>
</a>    <p><span>by </span>Kristina Libby<span> and&nbsp;</span>Timothy Cahill</p>
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/my-comments-are-in-the-google-doc-linked-in-the-dropbox-i-sent-in-the-slack">
      <p>February  6, 2024</p>
      <p>My Comments Are in the Google Doc Linked in the Dropbox I Sent in the Slack</p>
</a>    <p><span>by </span>Gwynna Forgham-Thrift</p>
  </li>

      </ol>
    </div>

      <div>
    <h5>Recently</h5>
    <ul>
        <li>
    <a href="https://www.mcsweeneys.net/articles/do-we-need-to-take-this-outside">
      <p>February 22, 2024</p>
      <p>Do We Need  to Take This Outside?</p>
</a>    <p><span>by </span>Henry Block</p>
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/how-to-go-to-the-bathroom-while-wearing-a-jumpsuit">
      <p>February 22, 2024</p>
      <p>How to Go to the Bathroom While Wearing a Jumpsuit</p>
</a>    <p><span>by </span>Holly Patton</p>
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/the-next-phase-of-the-bcu-beatles-cinematic-universe">
      <p>February 21, 2024</p>
      <p>The Next Phase of the <span>BCU</span> (Beatles Cinematic Universe)</p>
</a>    <p><span>by </span>Nick Windham</p>
  </li>
  <li>
    <a href="https://www.mcsweeneys.net/articles/morrissey-or-trump">
      <p>February 21, 2024</p>
      <p>Morrissey or Trump?</p>
</a>    <p><span>by </span>Zack Stanton</p>
  </li>

    </ul>
  </div>

  </section>


    


    
  
  
  




        

    </main>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Phind-70B: Closing the code quality gap with GPT-4 Turbo while running 4x faster (532 pts)]]></title>
            <link>https://www.phind.com/blog/introducing-phind-70b</link>
            <guid>39471388</guid>
            <pubDate>Thu, 22 Feb 2024 18:54:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.phind.com/blog/introducing-phind-70b">https://www.phind.com/blog/introducing-phind-70b</a>, See on <a href="https://news.ycombinator.com/item?id=39471388">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><h2>Introducing Phind-70B ‚Äì closing the code quality gap with GPT-4 Turbo while running 4x faster</h2><h3>We're excited to announce<!-- --> <a href="https://www.phind.com/" target="_blank" rel="noreferrer">Phind-70B</a>, our largest and most performant model to date. Running at up to 80 tokens per second, Phind-70B gives high-quality answers for technical topics without making users make a cup of coffee while they wait. We think it offers the<!-- --> <span>best overall user experience for developers</span> <!-- -->amongst state-of-the-art models.<br></h3><p>Phind-70B is based on the CodeLlama-70B model and is fine-tuned on an additional 50 billion tokens, yielding significant improvements. It also supports a context window of<!-- --> <span>32K tokens</span>.</p><p>Phind-70B scores 82.3% on HumanEval,<!-- --> <span>beating the latest GPT-4 Turbo</span> <!-- -->(gpt-4-0125-preview) score of 81.1% in our evaluation. On Meta's CRUXEval dataset, Phind-70B scores 59% to GPT-4's reported score of 62% on the output prediction benchmark. However, neither of these public datasets fully captures how our users use Phind for real-world workloads. We find that Phind-70B is in the same quality realm as GPT-4 Turbo for code generation and exceeds it on some tasks. Phind-70B is also<!-- --> <span>less ‚Äúlazy‚Äù</span> <!-- -->than GPT-4 Turbo and doesn't hesistate to generate detailed code examples.</p><p><img alt="Phind 70B HumanEval" loading="lazy" width="1200" height="777" decoding="async" data-nimg="1" sizes="100vw" srcset="https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=640&amp;q=75 640w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=750&amp;q=75 750w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=828&amp;q=75 828w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=1080&amp;q=75 1080w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=1200&amp;q=75 1200w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=1920&amp;q=75 1920w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=2048&amp;q=75 2048w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=3840&amp;q=75 3840w" src="https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-humaneval.png&amp;w=3840&amp;q=75"><img alt="Phind 70B CRUXEval" loading="lazy" width="1200" height="777" decoding="async" data-nimg="1" sizes="100vw" srcset="https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=640&amp;q=75 640w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=750&amp;q=75 750w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=828&amp;q=75 828w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=1080&amp;q=75 1080w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=1200&amp;q=75 1200w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=1920&amp;q=75 1920w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=2048&amp;q=75 2048w, https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=3840&amp;q=75 3840w" src="https://www.phind.com/_next/image?url=%2Fimages%2Fphind-70b-cruxeval.png&amp;w=3840&amp;q=75"></p><p>Phind-70B is significantly faster than GPT-4 Turbo, running at<!-- --> <span>80+ tokens per second</span> <!-- -->to GPT-4 Turbo's ~20 tokens per second. We're able to achieve this by running NVIDIA's TensorRT-LLM library on H100 GPUs, and we're working on optimizations to further increase Phind-70B's inference speed.</p><p>Phind-70B is available today to<!-- --> <a href="https://www.phind.com/" target="_blank" rel="noreferrer">try for free and without a login</a>. You can get higher limits by subscribing to Phind Pro.</p><p>We love the open-source community and will be releasing the weights for the latest Phind-34B model in the coming weeks. We intend to release the weights for Phind-70B in time as well.</p><p>We'd like to thank our cloud partners, SF Compute and AWS, for helping us get the infrastructure right for training and serving Phind-70B. We'd also like to thank our partners at Meta and NVIDIA for their support.</p><p>Fun fact: We melted an H100 during Phind 70B's training!</p><p><a target="_blank" href="https://www.phind.com/">Try Phind-70B</a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[JavaScript Bloat in 2024 (279 pts)]]></title>
            <link>https://tonsky.me/blog/js-bloat/</link>
            <guid>39471221</guid>
            <pubDate>Thu, 22 Feb 2024 18:39:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tonsky.me/blog/js-bloat/">https://tonsky.me/blog/js-bloat/</a>, See on <a href="https://news.ycombinator.com/item?id=39471221">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
        
        <p>I was a bit out of touch with modern front-end development. I also remembered articles about web bloat, how the average web page size was approaching several megabytes!</p>
        <p>So all this time I was living under impression that, for example, if the average web page size is 3&nbsp;MB, then JavaScript bundle should be around 1&nbsp;MB. Surely content should still take the majority, no?</p>
        <p>Well, the only way to find out is to fuck around. Let‚Äôs do a reality check!</p>
        <p>I‚Äôm writing this in 2024, so maybe do a sequel in a few years?</p>
        <h2 id="method">Method</h2>
        <ul>
          <li>Firefox on macOS (but should be the same in any browser)</li>
          <li>Not incognito (I want to see numbers <em>inside</em> the app, and there‚Äôs a better chance it will resemble actual everyday experience)</li>
          <li>All extensions disabled</li>
          <li>JavaScript only</li>
          <li>Uncompressed</li>
          <li>Service Workers enabled (again, more real-life)</li>
          <li>All caching disabled (cold load)</li>
        </ul>
        <p>Why only JavaScript? Content varies a lot from site to site (surely videos on YouTube are heavier than text messages on Slack), but JavaScript is a universal metric for ‚Äúcomplexity of interactions‚Äù.</p>
        <p>The main goal is to evaluate how much work the browser has to do to parse and execute code.</p>
        <p>To set some baseline, let‚Äôs start with this blog:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/tonsky@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>The number here would be 0.004&nbsp;MB. I also highlighted all the important bits you need to set if you decide to reproduce this at home.</p>
        <h2 id="landings">Landings</h2>
        <p>Okay, let‚Äôs start with something simple, like landing pages/non-interactive apps.</p>
        <p>A normal slightly interactive page looks like this ‚Äî Wikipedia, 0.2&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/wikipedia@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Slightly bloated ‚Äî like this ‚Äî Linear, 3&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/linear@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Remember: that‚Äôs without images, or videos, or even styles! Just JS code.</p>
        <p>A bad landing page looks like this ‚Äî Zoom, 6&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/zoom@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>or like Vercel, 6&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/vercel@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Yes, this is just a landing page. No app, no functionality, no calls. 6&nbsp;MB of JavaScript just for that.</p>
        <p>You can do a lot worse, though ‚Äî Gitlab, 13&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/gitlab@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Still just the landing.</p>
        <h2 id="mostly-static-websites">Mostly static websites</h2>
        <p>Nothing simpler than showing a static wall of text. Medium needs 3&nbsp;MB just to do that:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/medium@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Substack needs 4&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/substack@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Progress?</p>
        <p>Quora, 4.5&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/quora@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Pinterest, 10&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/pinterest@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Patreon, 11&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/patreon@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>And all this could‚Äôve been a static page...</p>
        <h2 id="search">Search</h2>
        <p>When your app‚Äôs interactivity is limited to mostly search. Type the query ‚Äî show the list of results. How heavy is that?</p>
        <p>StackOverflow, 3.5&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/stackoverflow@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>NPM, 4&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/npmjs@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Airbnb, 7&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/airbnb@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Booking.com, 12&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/booking@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>But Niki, booking is complicated! Look at all this UI! All these filters. All these popups about people near you stealing your vacation!</p>
        <p>Okay, okay. Something simpler then. Google. How about Google? One text field, list of links. Right?</p>
        <p>Well, it‚Äôll cost you whooping 9&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/google@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Just to show a list of links.</p>
        <h2 id="simple-one-interaction-apps">Simple one-interaction apps</h2>
        <p>Google Translate is just two text boxes. For that, you need 2.5&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/google_translate@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>ChatGPT is <em>one</em> text box. 7&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/openai@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>I mean, surely, ChatGPT is complex. But on the server, not in the browser!</p>
        <h2 id="videos">Videos</h2>
        <p>Loom ‚Äî 7&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/loom@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>YouTube ‚Äî 12&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/youtube@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Compare it to people who really care about performance ‚Äî Pornhub, 1.4&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/pornhub@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <h2 id="audio">Audio</h2>
        <p>I guess audio just requires 12&nbsp;MB no matter what:</p>
        <p>SoundCloud:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/soundcloud@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Spotify:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/spotify@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <h2 id="email">Email</h2>
        <p>Okay, video and audio are probably heavy stuff (even though we are not measuring content, just JS, remember!). Let‚Äôs move to simpler office tasks.</p>
        <p>Google Mail is just (just!) 20&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/gmail@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>It‚Äôs a freaking mailbox!!! How on earth is it almost as big as Figma, who ships entire custom C++/OpenGL rendering for their app?</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/figma@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>And if you are thinking: mail is complicated, too. Lots of UI, lots of interactivity. Maybe 20&nbsp;MB is okay?</p>
        <p>No!</p>
        <p>Just no. See, FastMail, same deal, but only 2&nbsp;MB. 10√ó less!</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/fastmail@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <h2 id="productivity">Productivity</h2>
        <p>Okay, maybe e-mail is too complicated? How about something even simpler? Like a TODO list?</p>
        <p>Well, meet Todoist, 9&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/todoist@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Showing you a list of files in folders requires 10&nbsp;MB in Dropbox:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/dropbox@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>List of passwords? That‚Äôll be 13&nbsp;MB on 1Password:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/1password@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Cards? Add 0.5&nbsp;MB more, up to 13.5&nbsp;MB. Trello:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/trello@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Okay, maybe TODO lists are too complex, too? How about chatting?</p>
        <p>Well, Discord needs 21&nbsp;MB to do that:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/discord@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <h2 id="document-editing">Document editing</h2>
        <p>Okay, document editing is hard, right? You have to implement cursor movement, synchronization, etc.</p>
        <p>Google Docs, 13.5&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/google_docs@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Something simpler? Notion, 16&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/notion@2x.webp?t=1708637681" width="720" height="720">        </figure>
        
        <p>The typical size of code that social networks need for like buttons to go brrr is 12&nbsp;MB.</p>
        <p>Twitter, 11&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/twitter@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Facebook, 12&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/facebook@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>TikTok, 12.5&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/tiktok@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Instagram is somehow bigger than Facebook, despite having like 10√ó less functions. 16&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/instagram@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>LinkedIn. Is it a blog? A platform? It has search, it has messaging, it has social functions. Anyways, that‚Äôll be 31&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/linkedin@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>By the way, I'd like to add you to my professional network on LinkedIn.</p>
        <h2 id="elephants--its-own-category">Elephants ‚Äî its own category</h2>
        <p>Sometimes websites are so stupidly, absurdly large that they deserve their own category.</p>
        <p>Here, Jira, a task management software. Almost 50&nbsp;MB!</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/jira@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Do they ship the entire Electron compiled WASM or what?</p>
        <p>But that‚Äôs not the limit! Slack adds 5 more&nbsp;MB, up to 55&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/slack@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Yes, it‚Äôs a chat. You know, list of users, messages, reactions. Stuff we did on raw HTML, even before JS was invented?</p>
        <p>That‚Äôs 55&nbsp;MB in today‚Äôs world. It‚Äôs almost like they are trying to see how much more bullshit can they put in a browser before it breaks.</p>
        <p>Finally, this blew my mind. Somehow <a href="https://react.dev/blog/2023/03/16/introducing-react-dev" target="_blank">react.dev</a> starts with a modest 2&nbsp;MB but as you scroll back and forth, it grows indefinitely. Just for fun, I got it to 100&nbsp;MB (of JavaScript!), but you can go as far as you like:</p>
        <figure>
          <video autoplay="" muted="" loop="" preload="auto" playsinline="" controls="" width="720" height="720">
            <source src="https://tonsky.me/blog/js-bloat/react@2x.mp4?t=1708621056" type="video/mp4">
          </video>
        </figure>
        <p>What is going on there? Even if it unloads and downloads parts of that blog post, how is it growing so quickly? The text itself is probably only 50 KB (0.05&nbsp;MB).</p>
        <h2 id="how-fast-are-we-degrading">How fast are we degrading?</h2>
        <p>Look how cute! In 2015 average web page size was approaching shareware version of Doom 1 (2.5 MB):</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/bloat_2015@2x.webp?t=1708637681" width="601" height="592"><figcaption><a href="https://twitter.com/xbs/status/626781529054834688" target="_blank">Source</a></figcaption>        </figure>
        <p>Well, in 2024, Slack pulls up 55 MB, the size of the original Quake 1 with all the resources. But now it‚Äôs just in JavaScript alone.</p>
        <p>For a chat app!</p>
        <h2 id="how-big-is-10-mb-anyway">How big is 10 MB anyway?</h2>
        <p>To be honest, after typing all these numbers, 10&nbsp;MB doesn‚Äôt even feel that big or special. Seems like shipping 10&nbsp;MB of <em>code</em> is normal now.</p>
        <p>If we assume that the average code line is about 65 characters, that would mean we are shipping ~150,000 lines of code. With every website! Sometimes just to show static content!</p>
        <p>And that code is minified already. So it‚Äôs more like 300K+ LoC just for one website.</p>
        <p>But are modern websites really <em>that</em> complex? The poster child of SPAs, Google Maps, is quite modest by modern standards ‚Äî is <em>still</em> just 4.5&nbsp;MB:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/google_maps@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>Somebody at Google is seriously falling behind. Written with modern front-end technologies, it should be at least 20&nbsp;MB.</p>
        <p>And if you, like me, thought that ‚ÄúFigma is a really complex front-end app, so it must have a huge javascript download size‚Äù, well, that‚Äôs correct, but then Gmail is about as complex as Figma, LinkedIn is 1.5√ó more complex and Slack is 2.5√ó more ¬Ø\_(„ÉÑ)_/¬Ø</p>
        <h2 id="conclusion">Conclusion</h2>
        <p>It‚Äôs not just about download sizes. I welcome high-speed internet as much as the next guy. But code ‚Äî JavaScript ‚Äî is something that your browser has to parse, keep in memory, execute. It‚Äôs not free. And these people talk about performance and battery life...</p>
        <p>Call me old-fashioned, but I firmly believe content should outweigh code size. If you are writing a blog post for 10K characters, you don‚Äôt need 1000√ó more JavaScript to render it.</p>
        <p>This site is doing it right:</p>
        <figure>
<img src="https://tonsky.me/blog/js-bloat/jquery@2x.webp?t=1708637681" width="720" height="720">        </figure>
        <p>That‚Äôs 0.1&nbsp;MB. And that‚Äôs enough!</p>
        <p>And yet, on the same internet, in the same timeline, Gitlab needs 13&nbsp;MB of code, 500K+ LoC of JS, just to display a static landing page.</p>
        <p>Fuck me.</p>
        
      </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[New code for SIGILL faults to help identify misbranches on OpenBSD (103 pts)]]></title>
            <link>https://www.undeadly.org/cgi?action=article;sid=20240222183703</link>
            <guid>39471203</guid>
            <pubDate>Thu, 22 Feb 2024 18:37:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.undeadly.org/cgi?action=article;sid=20240222183703">https://www.undeadly.org/cgi?action=article;sid=20240222183703</a>, See on <a href="https://news.ycombinator.com/item?id=39471203">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p>Contributed by
<a href="http://www.inet6.se/">Janne Johansson</a>
on <time datetime="2024-02-22T06:39:46Z">2024-02-22</time>
from the don't pee on the electric fence dept.</p>
<p>If you run recent OpenBSD on certain amd64 or aarch64 platforms, indirect branching to an "unexpected" location will crash your program, in order to prevent ROP attacks and similar ways to have your program execute code where it shouldn't.</p>
<p>The OpenBSD compiler will insert an extra instruction in all the places where a branch is supposed to land, and if it lands anywhere else, a CPU fault is raised and your program gets an "Illegal Instruction".</p>
<p>Previously, crashes of this kind have looked more or less like any other kind of fault where code is executing random data or from random locations, but since the kernel knows when this has happened, we can make it explicit that the fault is due to missing branch target instructions, which will help a lot when debugging.</p>
<p>Link to the commit <a href="https://marc.info/?l=openbsd-cvs&amp;m=170853069811439&amp;w=2">here</a>.</p>


</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Bluesky announces data federation for self hosters (629 pts)]]></title>
            <link>https://bsky.social/about/blog/02-22-2024-open-social-web</link>
            <guid>39471116</guid>
            <pubDate>Thu, 22 Feb 2024 18:30:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://bsky.social/about/blog/02-22-2024-open-social-web">https://bsky.social/about/blog/02-22-2024-open-social-web</a>, See on <a href="https://news.ycombinator.com/item?id=39471116">Hacker News</a></p>
<div id="readability-page-1" class="page"><section><header><section><a href="https://bsky.social/about/blog">Blog</a><svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 10L6 6L2 2" stroke="#667999" stroke-width="2" stroke-linecap="square"></path></svg><span>Bluesky: An Open Social Web</span></section><div><p>Feb 22, 2024</p><p><span>by <!-- -->The Bluesky Team</span></p></div></header><div><p>Today, we‚Äôre excited to announce that the Bluesky network is federating and opening up in a way that allows you to host your own data. What does this mean?</p>
<p>Your data, such as your posts, likes, and follows, needs to be stored somewhere. With traditional social media, your data is stored by the social media company whose services you've signed up for. If you ever want to stop using that company's services, you can do that‚Äîbut you would have to leave that social network and lose your existing connections.</p>
<p>It doesn't have to be this way! An alternative model is how the internet itself works. Anyone can put up a website on the internet. You can choose from one of many companies to host your site (or even host it yourself), and you can always change your mind about this later. If you move to another hosting provider, your visitors won't even notice. No matter where your site's data is managed and stored, your visitors can find your site simply by typing the name of the website or by clicking a link.</p>
<p>We think social media should work the same way. When you register on Bluesky, by default we'll suggest that Bluesky will store your data. But if you'd like to let another company store it, or even store it yourself, you can do that. You'll also be able to change your mind at any point, moving your data to another provider without losing any of your existing posts, likes, or follows. From your followers' perspective, your profile is always available at your handle‚Äîno matter where your information is actually stored, or how many times it has been moved.</p>
<p>Federation lets services be interconnected, so there are a variety of apps and experiences that users can move between as fluidly as they do on the open web. The version of federation that we‚Äôre releasing today is intended for self-hosters. There are some guardrails in place to ensure we can keep the network running smoothly for everyone in the ecosystem. After this initial phase, we‚Äôll open up federation to people looking to run larger servers with many users. For a more technical overview of what we‚Äôre releasing today and how to participate, check out the <a href="https://docs.bsky.app/blog/self-host-federation">developer blog</a>.</p>
<p>Some of our existing features already follow the federated philosophy, including <a href="https://bsky.social/about/blog/3-6-2023-domain-names-as-handles-in-bluesky">usernames</a> and <a href="https://bsky.social/about/blog/7-27-2023-custom-feeds">feeds</a>. Today, we‚Äôre opening up federation for data hosting. Below, we wanted to answer some common questions about what federated hosting is, what it means for your experience using Bluesky, and why we‚Äôre so excited about it.</p>
<h2>How does this affect my experience on Bluesky?</h2>
<p>The short answer is: it doesn‚Äôt! If you don‚Äôt run your own server, Bluesky will stay the same. Even if you do run your own server, you may be surprised by how little things change. In fact, it should feel so similar that you might have to double check that you‚Äôve logged into the right server.</p>
<p>This is all intentional: we've made self-hosting your own data both easy and affordable, so when you do so, you should be able to get just as good (or better) of an experience than letting Bluesky host your data.</p>
<h2>If my experience doesn‚Äôt change, why federate?</h2>
<p>We set out to build a protocol for the future of social media that returns control to users. From the apps you use, the feeds you browse, or the moderation preferences you prefer, your experience on Bluesky is yours to customize. But the abundance of choice and innovation here will be short-lived if it‚Äôs dependent on one company. We think that the future of social media needs to be a public good, mutually owned by the people and companies that participate in it. Social media should be as open and reliable as the internet itself.</p>
<p>The ability to host your own data, just as you might run your own website, provides the fundamental guarantee that social media will never again be controlled by only one company. Even if Bluesky were to disappear, if the data is hosted across different sites, the network can be rebuilt. The fact that it requires no permission to set up a new website is what has made the open web such a dynamic and creative force. Larger services, like search engines, have come and gone (anyone remember <a href="https://en.wikipedia.org/wiki/Ask.com">Ask Jeeves</a>?). But the underlying foundation of independently hosted sites continues to let the web evolve. Making social open in the same way will create a foundation for better public conversations.</p>
<p>Today, we‚Äôre taking another step towards the vision of a self-sustaining social web ‚Äî social media that isn‚Äôt controlled by any single company and is free to evolve on its own terms.</p>
<h2>Does this mean Bluesky is going to be like Mastodon?</h2>
<p>Mastodon is another federated social network built on a protocol called ActivityPub. While Bluesky ‚Äî built on a protocol called the AT Protocol (atproto) ‚Äî shares the term ‚Äúfederation‚Äù with other networks, the way it works is very different.</p>
<p>On Bluesky, server choice doesn‚Äôt affect what content you see. Servers are only one piece of the protocol ‚Äî when you browse Bluesky, you see posts that are pulled together from many different servers. This is why you can change your server after signing up without losing your username, friends, or posts.</p>
<p>A summary of some ways Bluesky differs from Mastodon:</p>
<ul>
<li><strong>A focus on the global conversation:</strong> On Mastodon, your ‚Äúinstance‚Äù, or server, determines your community, so your experience depends on which server you join. An instance can send and receive posts from other instances, but it doesn‚Äôt try to offer a global view of the network. Your Mastodon server is part of your username, and becomes part of your identity. On Bluesky, your experience is based on what feeds and accounts you follow, and you can always participate in the global conversation (e.g. breaking news, viral posts, and algorithmic feeds). You can use your own domain name as your username, and continue participating from anywhere your account is hosted.</li>
<li><strong>Composable moderation:</strong> Moderation on Bluesky is not tied to your server, like it is on Mastodon. Defederation, a way of addressing moderation issues in Mastodon by disconnecting servers, is not as relevant on Bluesky because there are other layers to the system. Server operators can set rules for what content they will host, but tools like blocklists and moderation services are what help communities self-organize around moderation preferences. We‚Äôve already integrated block and mute lists, and the tooling for independent moderation services is coming soon.</li>
<li><strong>Composable feeds:</strong> We designed your timeline on Bluesky so that it‚Äôs not tied to your server. Anyone can build a feed, and there are currently over 40,000 algorithmic feeds to choose from. Your Mastodon timeline is only made up of posts from accounts you follow, and does not pull together posts from the whole network like Bluesky‚Äôs custom feeds.</li>
<li><strong>Account portability:</strong> We designed federated hosting on Bluesky so that you can move servers easily. Moving hosting services should be like changing your cell phone provider ‚Äî&nbsp;you should be able to keep your identity and data. Changing servers on Bluesky doesn‚Äôt disrupt your username, friends, or posts.</li>
</ul>
<h2>So how can I self-host and join the network?</h2>
<p>It will become easier to host your own server over time, but at the moment you‚Äôll need a bit of technical know-how to get up and running. If you‚Äôre excited to jump in, checkout the <a href="https://docs.bsky.app/blog/self-host-federation">developer blog</a>, the <a href="https://github.com/bluesky-social/pds">PDS repo</a> on our Github, and the <a href="https://discord.gg/UWS6FFdhMe">PDS Administrators Discord</a>.</p></div></section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I turned my ThinkPad into a programmable USB device (287 pts)]]></title>
            <link>https://xairy.io/articles/thinkpad-xdci</link>
            <guid>39470381</guid>
            <pubDate>Thu, 22 Feb 2024 17:37:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://xairy.io/articles/thinkpad-xdci">https://xairy.io/articles/thinkpad-xdci</a>, See on <a href="https://news.ycombinator.com/item?id=39470381">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <article>
      

      <div itemprop="articleBody"><p>This is the story of how I figured out a way to turn my ThinkPad X1 Carbon 6th Gen laptop into a programmable USB device by enabling the <a href="https://edc.intel.com/content/www/us/en/design/ipla/software-development-platforms/client/platforms/alder-lake-desktop/12th-generation-intel-core-processors-datasheet-volume-1-of-2/010/extensible-device-controller-interface-xdci/">xDCI</a> controller.</p>

<p>As a result, the laptop can now be used to emulate arbitrary USB devices such as keyboards or storage drives.
Or to fuzz USB hosts with the help of <a href="https://github.com/xairy/raw-gadget">Raw Gadget</a> and <a href="https://github.com/google/syzkaller">syzkaller</a>.
Or to even run <a href="https://github.com/greatscottgadgets/Facedancer">Facedancer</a> with the help of the <a href="https://github.com/xairy/raw-gadget#facedancer-backend">Raw Gadget‚Äìbased backend</a>.
And do all this without any external hardware.</p>

<p>The journey of enabling xDCI included fiddling with Linux kernel drivers, xHCI, DWC3, ACPI, BIOS/UEFI, Boot Guard, TPM, NVRAM, PCH, PMC, PSF, IOSF, and P2SB, and making a custom USB cable üò±</p>



        
          <div>
            <ul id="toc">
<li><a href="#-introduction">üé¨ Introduction</a></li>
<li><a href="#-investigation">üßê Investigation</a>
<ul>
<li><a href="#-reading-kernel-code">üêß Reading kernel code</a></li>
<li><a href="#-searching-online">üîç Searching online</a></li>
<li><a href="#-checking-pcie-and-acpi">üöß Checking PCIe and ACPI</a></li>
<li><a href="#-checking-bios">üéÅ Checking BIOS</a></li>
</ul>
</li>
<li><a href="#-enabling-xdci">üí° Enabling xDCI</a>
<ul>
<li><a href="#-enabling-xdci-via-advanced-settings">‚öô Enabling xDCI via Advanced settings</a></li>
<li><a href="#-checking-xdci">üßÅ Checking xDCI</a></li>
<li><a href="#-attempting-to-enable-xdci-via-pch">üßæ Attempting to enable xDCI via PCH</a></li>
<li><a href="#-enabling-xdci-via-nvram">üíæ Enabling xDCI via NVRAM</a></li>
</ul>
</li>
<li><a href="#-using-xdci">üöÄ Using xDCI</a>
<ul>
<li><a href="#-legacy-gadget-drivers">üñ± Legacy gadget drivers</a></li>
<li><a href="#-raw-gadget">ü§ñ Raw Gadget</a></li>
<li><a href="#-syzkaller">üß∞ syzkaller</a></li>
<li><a href="#-facedancer">üíÉ Facedancer</a></li>
</ul>
</li>
<li><a href="#-summary">üóÉ Summary</a></li>
<li><a href="#-afterword">üìù Afterword</a></li>
</ul>
          </div>
          <div>
            <p markdown="1">‚¨Ö Note the interactive table of contents on the left.</p>

          </div>

        

        <!--end_excerpt-->

<h2 id="-introduction">üé¨ Introduction</h2>

<p>One day, I was working on improving <a href="https://github.com/xairy/raw-gadget">Raw Gadget</a>.</p>

<p><strong>Raw Gadget and UDCs</strong>.
Raw Gadget is a Linux kernel module for emulating highly customizable USB devices.
This module provides a userspace API for the Linux kernel USB Gadget subsystem.
The flexibility of the API allows using Raw Gadget for fuzzing and exploiting USB hosts by providing malformed USB descriptors.</p>

<div>
  <p>
UDCs are also sometimes called USB Peripheral Controllers.
</p>
</div>

<p>To emulate USB devices through the Gadget subsystem of the Linux kernel, one needs a special hardware component called the USB Device Controller (UDC).
Such components are generally not present on PCs (right? üòâ) but are typically embedded into single-board computers like a Raspberry Pi.</p>

<p><strong>Raspberry Pi</strong>.
Thus, I usually used a Raspberry Pi to work with Raw Gadget.
However, dealing with a Raspberry Pi is a hassle: plugging in the wires, booting the board, accessing the shell, etc.
So, for a while, I dreamt how nice it would be to have a UDC connected directly to my laptop instead.</p>

<p><strong>EC3380-AB</strong>.
At some point, I managed to find a solution for connecting a UDC to a PC: <a href="http://www.hwtools.net/Adapter/EC3380-AB.html">EC3380-AB</a>.</p>

<div>
  <p>
Quite a pity modern laptops moved away from using ExpressCard üò¢
</p>
</div>

<p>EC3380-AB is an ExpressCard board based on the <a href="https://docs.broadcom.com/docs/12351862">USB 3380</a> Peripheral Controller chip that implements a UDC.
With the help of the <a href="https://www.sonnettech.com/product/echoexpresscard34thunderbolt.html">Sonnet Echo</a> ExpressCard-to-Thunderbolt adapter, EC3380-AB can be plugged into a Thunderbolt port to connect the UDC to a PC without an ExpressCard slot.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/ec3380-echo.jpg" title="EC3380-AB with the Sonnet Echo ExpressCard-to-Thunderbolt adapter">
		
	
	
		<figcaption>EC3380-AB with the Sonnet Echo ExpressCard-to-Thunderbolt adapter</figcaption>
	
</figure>

<p>There are also a few other UDC boards based on USB 3380.
But those connect over PCIe and thus require a bulky PCIe-to-Thunderbolt enclosure to connect them conveniently.</p>

<p>
Two of these boards, <a href="http://www.hwtools.net/adapter/usb3380evb.html">USB3380EVB</a> and <a href="http://www.bplus.com.tw/Adapter/PP3380-AB.html">PP3380-AB</a>, might be familiar to those who worked with DMA attacks.
Like <a href="http://www.hwtools.net/Adapter/EC3380-AB.html">EC3380-AB</a>, these boards are powered by USB 3380 and are originally intended to serve as UDCs.
However, they can also be <a href="https://github.com/ufrisk/pcileech/blob/master/usb3380.md">reprogrammed</a> to be used as a tool for DMA attacks over PCIe.
</p>

<p><strong>Working with EC3380-AB</strong>.
The combination of EC3380-AB and the Sonnet Echo adapter worked mostly fine.
However, the <code>net2280</code> Linux kernel driver used for this UDC would sometimes glitch out.
Thus, occasionally, I had to replug the controller into my laptop to reset the driver state.</p>

<p>As I was plugging and unplugging EC3380-AB, I would check the contents of <code>/sys/class/udc/</code> to make sure that EC3380-AB connected successfully.
This directory displays the UDCs connected to the system:</p>

<div><pre><code><span>$ </span><span>ls</span> /sys/class/udc/
0000:0a:00.0
<span>$ </span><span>cat</span> /sys/class/udc/0000<span>\:</span>0a<span>\:</span>00.0/uevent
<span>USB_UDC_NAME</span><span>=</span>net2280
</code></pre></div>

<p><strong>Huh</strong>.
At some point, I typed <code>ls /sys/class/u</code> in the terminal and pressed Tab to let it autocomplete to <code>.../udc</code>.
However, the autocomplete showed me another directory: <code>/sys/class/usb_role</code>.
Moreover, this directory unexpectedly contained another one named <code>intel_xhci_usb_sw-role-switch</code>.
‚ÄúHm, what the hell is this?‚Äù thought I ü§î</p>

<p>
xHCI (eXtensible Host Controller Interface) is a USB HCD (Host Controller Device) used on x86-powered systems.
It‚Äôs a hardware component that allows the system to act as a USB host.
</p>

<p>
<code>/sys/class/usb_role</code> is an <a href="https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-class-usb_role">interface</a> for switching the hardware USB component between the host and the device modes.
Some computers use the same chip to serve either as an HCD or a UDC, depending on the chosen configuration, and this interface allows reconfiguring that in runtime.
</p>

<p><strong>xHCI role switch</strong>.
What surprised me here was seeing a <code>usb_role</code> switch for the xHCI device on my ThinkPad laptop.
I wouldn‚Äôt be surprised to see it on an x86-powered single-board computer or on an Intel NUC device.
But ThinkPad?
I thought it didn‚Äôt have any capability of being a USB device.
This was unexpected.</p>

<p>Out of curiosity, I tried writing <code>device</code> to <code>intel_xhci_usb_sw-role-switch/role</code>, which is supposed to switch the USB component on the laptop to the device mode.
But nothing happened: no <code>dmesg</code> messages, no new files in <code>/sys/class/udc/</code>.</p>

<p>So I decided to dig deeper.</p>

<h2 id="-investigation">üßê Investigation</h2>

<h3 id="-reading-kernel-code">üêß Reading kernel code</h3>

<p>I started by looking into how <code>intel_xhci_usb_sw-role-switch</code> ended up appearing on my ThinkPad in the first place.</p>

<p><strong>xHCI role switch implementation</strong>.
A grep for <code>intel_xhci_usb_sw</code> through the Linux kernel code yielded two results:</p>

<ol>
  <li>
    <p>The <code>drivers/usb/roles/intel-xhci-usb-role-switch.c</code> <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/usb/roles/intel-xhci-usb-role-switch.c">file</a> that contained the platform driver for an <code>intel_xhci_usb_sw</code> device.</p>

    <p>This driver registered a <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/usb/roles/class.c#L309">USB Role Switch</a>, which implemented the handlers for when <code>device</code> or <code>host</code> is written into <code>intel_xhci_usb_sw-role-switch</code>.
Both handlers appeared to <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/usb/roles/intel-xhci-usb-role-switch.c#L83">manipulate the registers</a> of the xHCI device.</p>
  </li>
  <li>
    <p>The <code>drivers/usb/host/xhci-ext-caps.c</code> <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/usb/host/xhci-ext-caps.c">file</a> that created the <code>intel_xhci_usb_sw</code> virtual platform device, for which the driver from #1 got registered.</p>

    <p>This device was only created <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/usb/host/xhci-ext-caps.c#L97">when</a> the xHCI driver set the <code>XHCI_INTEL_USB_ROLE_SW</code> quirk flag.
And this only <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/usb/host/xhci-pci.c#L430">happened</a> for PCIe devices with a few specific device numbers.
The list of numbers included <code>PCI_DEVICE_ID_INTEL_SUNRISEPOINT_LP_XHCI</code> with the value <code>0x9d2f</code>, which matched the xHCI PCIe device ID on my laptop.</p>
  </li>
</ol>

<p><strong>ThinkPad</strong>.
So apparently, the xHCI device on my laptop did support the role switching.
Or at least its driver believed so.</p>

<p>Now the question was: What exactly happened when the driver wrote to the xHCI registers?
Did these writes produce any effects?
Or did the hardware not support the <code>device</code> role at all?</p>

<h3 id="-searching-online">üîç Searching online</h3>

<p>The next thing I tried was looking online for references to <code>intel_xhci_usb_sw-role-switch</code>.</p>

<p><strong>Mailing list discussion</strong>.
This led me to the discussion titled <a href="https://lore.kernel.org/all/CAGR4S9HQiZCsA7Y5_47j-xBOkydKiT2Exam=36L=-vwRjt+UWA@mail.gmail.com/t/#u">Any example of USB gadget for DRD device mode on Intel Gemini Lake?</a> on the Linux kernel mailing list.
There, Dmitry Mikushin was facing the same issue as me: role switching for the xHCI device did not appear to work.</p>

<p>
Dmitry‚Äôs question also noted that after switching the role, one of the ports was successfully recognized as a new USB device when connected with a cable to another laptop.
However, initially, I managed to overlook this part of the question.
</p>

<p><strong>DWC3</strong>.
Luckily, Heikki Krogerus came to the help:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
So, do you have the DWC3 (the USB device controller) PCI device available/visible on your system?
What do you get if you run <code>lspci -nn | grep USB</code>?
The DWC3 PCI device ID on Gemini Lake is <code>0x31aa</code> (search <code>PCI_DEVICE_ID_INTEL_GLK</code> in <code>drivers/usb/dwc3/dwc3-pci.c</code>).
</th>
	</tr>

</tbody></table>



<p>In the response, Heikki suggested checking if a DWC3 UDC was present in the list of PCI devices.
This made sense: if a UDC is present on a system, it has to be somehow connected.
And it looked like Intel connected their DWC3 UDCs over PCI or PCIe.</p>

<p>Dmitry responded:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
Yes, AFAIK, <code>PCI_DEVICE_ID_INTEL_GLK_XHCI</code> is actually <code>0x31a8</code>, and I do have it:
<code>00:15.0 USB controller [0c03]: Intel Corporation Device [8086:31a8] (rev 03)</code>.
</th>
	</tr>

</tbody></table>

<p><strong>Mux</strong>.
Heikki answered:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
That is the xHCI controller, and it is not what you need if you want to use the connector in device mode.
The xHCI and DWC3 IPs are separate IPs on GLK.
That is why there is a mux between the two.
</th>
	</tr>

</tbody></table>

<p>Here, Heikki pointed out that xHCI and DWC3 UDC were different devices.
And having xHCI enabled did not imply that the DWC3 UDC could be used.</p>

<p>Heikki also gave another valuable piece of information: there is a mux (multiplexer ‚Äî a kind of switch) between xHCI and the DWC3 UDC.
And, apparently, changing the USB role via <code>intel_xhci_usb_sw-role-switch</code> should switch this mux.</p>

<p><strong>Oh no</strong>.
Heikki then continued:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
The DWC3 USB Device Controller has device ID <code>31aa</code>, so you want to see a PCI device with this device ID.
It‚Äôs not there.
So, the DWC3 PCI device is not enabled on your board, which means you do not have a USB Device Controller to deal with.
The connector is in host mode only. Sorry.
</th>
	</tr>

</tbody></table>

<p>So, if the DWC3 UDC itself was not there, having the mux switched was pointless.
Most likely, this is what was happening in my case.</p>

<p><strong>xDCI in BIOS</strong>.
Heikki then also added:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
If you can enter the BIOS menu, then you can try to find a setting named xDCI (so that‚Äôs ‚ÄúxDCI‚Äù, not ‚ÄúxHCI‚Äù).
It is usually somewhere under some USB menu.
If you have that, then enable it, and you should see the DWC3 PCI device in the operating system.
</th>
	</tr>

</tbody></table>

<p>This was where I encountered the term xDCI for the first time.</p>

<p>An online search for <code>xDCI</code> revealed:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
Extensible Device Controller Interface (xDCI) is an interface specification that defines Device Controller for a Universal Serial Bus (USB 3), which is capable of interfacing with USB 1.x, 2.0, and 3.x compatible devices.
In the case that the computer is connected as a device to another computer (for example, a tablet connected to a desktop), then the xDCI controller will be activated inside the device and will talk to the Host on the other computer.
</th>
	</tr>

	<tr>
		<th></th>
		<th><a href="https://edc.intel.com/content/www/us/en/design/ipla/software-development-platforms/client/platforms/alder-lake-desktop/12th-generation-intel-core-processors-datasheet-volume-1-of-2/010/extensible-device-controller-interface-xdci/">Extensible Device Controller Interface (xDCI)</a>, 12th Generation Intel¬Æ Core‚Ñ¢ Processors Datasheet</th>
	</tr>

</tbody></table>

<p>So, xDCI is what Intel calls its interface for the DWC3 UDC.
Unlike xHCI, xDCI is the interface for the device side of USB, not the host one.</p>

<p>In the response, Heikki suggested checking whether xDCI could be enabled in BIOS.
This created a spark of hope for me.
Perhaps I could indeed enable xDCI in BIOS, and everything would work.</p>

<p>
For simplicity, I will be using the term ‚ÄúxDCI‚Äù to refer to the Intel‚Äôs DWC3 UDC itself from now on.
</p>

<p>
Even though technically, the word ‚Äú<a href="https://en.wikipedia.org/wiki/BIOS">BIOS</a>‚Äù refers to the legacy firmware used by older <a href="https://en.wikipedia.org/wiki/IBM_PC_compatible">IBM PC‚Äìcompatible</a> systems, I will be saying ‚ÄúBIOS‚Äù to refer to the <a href="https://en.wikipedia.org/wiki/UEFI">UEFI</a>-compatible platform firmware of modern systems for simplicity.
</p>

<p>
Once I knew the term ‚ÄúxDCI‚Äù, I also did an online search for <code>xHCI xDCI</code>.
This led me to a diagram from the <a href="https://projectacrn.github.io/latest/developer-guides/hld/usb-virt-hld.html">USB Virtualization</a> documentation page of Project ACRN, which schematically shows xHCI, xDCI, and the mux between them.
</p>

<p><strong>xDCI in ACPI</strong>.
In the discussion, Felipe Balbi, who was the maintainer for the USB Gadget subsystem in the Linux kernel up until recently, added:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
Also, have a look at <code>acpidump</code>.
See if the device even exists in your <code>DSDT</code> but, perhaps, is disabled (look at the <code>_STA</code> method for <code>OTDG</code> or <code>XDCI</code>).
</th>
	</tr>

</tbody></table>

<p>Here, Felipe proposed to also make sure that xDCI was enabled in ACPI.</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
ACPI (Advanced Configuration and Power Interface) is an open standard that operating systems can use to discover and configure computer hardware components.
ACPI defines hardware abstraction interfaces between the device‚Äôs firmware (e.g., BIOS, UEFI), the computer hardware components, and the operating systems.
</th>
	</tr>

	<tr>
		<th></th>
		<th><a href="https://en.wikipedia.org/wiki/ACPI">ACPI</a>, Wikipedia</th>
	</tr>

</tbody></table>

<p>After reading more about ACPI, I found out that <code>_STA</code> method is used to check the device status.
The OS will only try to connect the device if its status indicates that the device is enabled and properly configured.
If the <code>_STA</code> method is not defined in ACPI at all, the device will not function.</p>

<p><strong>Next steps</strong>.
Finding this discussion was extremely helpful.
Now I knew what to do next:</p>

<ol>
  <li>Check if the xDCI device shows up in the list of PCIe devices;</li>
  <li>If not, check if there is a way to enable xDCI through BIOS;</li>
  <li>Finally, check if ACPI enables xDCI.</li>
</ol>

<h3 id="-checking-pcie-and-acpi">üöß Checking PCIe and ACPI</h3>

<p><strong>Checking PCIe device</strong>.
Following Heikki‚Äôs guidance, I first checked whether the xDCI device appeared on my laptop‚Äôs list of PCIe devices via <code>sudo lspci -vvnnn</code>.</p>

<p>The only USB device that I saw there was xHCI with the <code>9d2f</code> device ID:</p>

<div><pre><code>00:14.0 USB controller [0c03]: Intel Corporation Sunrise Point-LP USB 3.0 xHCI Controller [8086:9d2f] (rev 21) (prog-if 30 [XHCI])
	Subsystem: Lenovo Sunrise Point-LP USB 3.0 xHCI Controller [17aa:225c]
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+
	Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx-
	Latency: 0
	Interrupt: pin A routed to IRQ 130
	Region 0: Memory at 2ffb210000 (64-bit, non-prefetchable) [size=64K]
	Capabilities: [70] Power Management version 2
		Flags: PMEClk- DSI- D1- D2- AuxCurrent=375mA PME(D0-,D1-,D2-,D3hot+,D3cold+)
		Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME-
	Capabilities: [80] MSI: Enable+ Count=1/8 Maskable- 64bit+
		Address: 00000000fee00358  Data: 0000
	Kernel driver in use: xhci_hcd
	Kernel modules: xhci_pci
</code></pre></div>

<p>Then, I checked the <code>dwc3</code> driver <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/usb/dwc3/dwc3-pci.c#L26">source code</a> to find out what ID the xDCI device should have:</p>

<div>
  <p>
SPTLP stands for ‚ÄúSunrise Point-LP‚Äù.
</p>
</div>

<div><pre><code><span>#define PCI_DEVICE_ID_INTEL_SPTLP		0x9d30
</span></code></pre></div>

<p>Unfortunately, I could not see a device with this ID üò¢</p>

<p>However, from the <code>lspci</code> output, I found out that my ThinkPad X1 Carbon 6th Gen laptop uses the Sunrise Point-LP chipset.
This information came in handy later.</p>

<p><strong>Checking ACPI</strong>.
Before moving on to checking BIOS settings, I decided to find out whether the <code>_STA</code> method existed in ACPI for <code>XDCI</code> or <code>OTGD</code>.</p>

<p>I dumped and decompiled <code>DSDT</code> via:</p>

<div><pre><code><span>$ </span><span>sudo </span>apt-get <span>install </span>acpica-tools
<span>$ </span><span>sudo </span>acpidump <span>&gt;</span> acpi.dat
<span>$ </span>acpixtract <span>-a</span> acpi.dat
<span>$ </span>iasl <span>-d</span> dsdt.dat
</code></pre></div>

<p>And grepped <code>dsdt.dsl</code> for <code>XDCI</code>:</p>

<div><pre><code>Device (XDCI)
{
    Name (_ADR, 0x00140001)  // _ADR: Address
    OperationRegion (OTGD, PCI_Config, 0x00, 0x0100)
    Field (OTGD, DWordAcc, NoLock, Preserve)
    {
        DVID,   16,
        Offset (0x10),
        XDCB,   64
    }

    Method (_STA, 0, NotSerialized)  // _STA: Status
    {
        If ((DVID != 0xFFFFFFFF))
        {
            Return (0x0F)
        }
        Else
        {
            Return (0x00)
        }
    }

    ...
}
</code></pre></div>

<p>This was good news: the <code>_STA</code> method was present!
While this didn‚Äôt necessarily mean that ACPI properly set up xDCI, this was already promising.</p>

<p>
I believe that <code>DVID</code> in the <code>_STA</code> implementation stands for ‚ÄúDevice ID‚Äù, and it is read from the PCIe Configuration Space of the xDCI device, but I didn‚Äôt analyze ACPI for xDCI beyond that.
</p>

<p><strong>Status result</strong>.
Out of curiosity, I decided to check what the <code>_STA</code> method returned.</p>

<p>After looking around <code>/sys/bus/acpi/devices/</code>, I found out that <code>device:33</code> was designated to the <code>XDCI</code> ACPI device:</p>

<div><pre><code><span>$ </span><span>cat</span> /sys/bus/acpi/devices/device:33/path
<span>\_</span>SB_.PCI0.XDCI
</code></pre></div>

<p>And the result of the <code>_STA</code> method was:</p>

<div><pre><code><span>$ </span><span>cat</span> /sys/bus/acpi/devices/device:33/status
15
</code></pre></div>

<p>Interestingly, <code>_STA</code> returned <code>15</code>, which <a href="https://www.kernel.org/doc/html/latest/admin-guide/abi-testing.html#abi-sys-bus-acpi-devices-status">stands for</a> the device being enabled and functioning.
However, as I had no xDCI device show up in <code>lspci</code>, this was clearly false.
Perhaps everything functioned properly only from the ACPI point of view.</p>

<p>I decided that finding a defined <code>_STA</code> method was good enough and proceeded to check BIOS.</p>

<h3 id="-checking-bios">üéÅ Checking BIOS</h3>

<p>An online search for combinations of <code>ThinkPad</code>, <code>BIOS</code>, and <code>xDCI</code> yielded no relevant results.
Apparently, no one has attempted to figure out whether xDCI can be enabled in Thinkpad BIOS.</p>

<p><strong>BIOS settings</strong>.
I booted into the BIOS settings screen (aka BIOS Setup) and looked around for something related to xDCI or OTG.
I found nothing.</p>

<p>I knew that many Lenovo laptops had a hidden <code>Advanced</code> page in their BIOS settings.
So, perhaps I could find the xDCI setting there.
While some Lenovo laptops allow unlocking this page via magic keypresses, I failed to find a way to do this on Thinkpad X1 Carbon.
But maybe there was another way.</p>

<p><strong>Unpacking BIOS</strong>.
Before trying to unlock the <code>Advanced</code> page, I decided to check the BIOS image directly for the presence of an xDCI-related setting.</p>

<p>I downloaded the BIOS Bootable CD update image from the <a href="https://pcsupport.lenovo.com/us/de/products/laptops-and-netbooks/thinkpad-x-series-laptops/thinkpad-x1-carbon-6th-gen-type-20kh-20kg/downloads/ds502281">Lenovo website</a>, unpacked it, and mounted it:</p>

<div><pre><code><span>$ </span><span>sudo </span>apt-get <span>install </span>genisoimage
<span>$ </span>geteltorito <span>-o</span> n23ur39w.img n23ur39w.iso
<span>$ </span><span>sudo </span>kpartx <span>-av</span> ./n23ur39w.img
<span>$ </span><span>sudo mkdir</span> /mnt/bios
<span>$ </span><span>sudo </span>mount <span>-o</span> ro /dev/mapper/loop0p1 /mnt/bios/
</code></pre></div>

<p>The main BIOS binary was now in <code>/mnt/bios/FLASH/N23ET86W/\$0AN2300.FL1</code>.</p>

<p>
For reference, here‚Äôs how to unmount the image later:
</p>

<div><pre><code><span>$ </span><span>sudo </span>umount /mnt/bios/
<span>$ </span><span>sudo </span>kpartx <span>-d</span> ./n23ur39w.img
</code></pre></div>

<p>
Also, for reference, here‚Äôs how to extract BIOS from the <code>.exe</code> update finary that Lenovo provides:
</p>

<div><pre><code><span>$ </span><span>sudo </span>apt-get <span>install </span>innoextract
<span>$ </span>innoextract n23uj39w_v2.exe
<span>$ </span><span>ls </span>codeGetExtractPath/N23ET86W/<span>\$</span>0AN2300.FL1
</code></pre></div>

<p>
Right in the middle of me meddling with BIOS images, Lenovo removed its Linux <code>*.cab</code> BIOS update packages from their website ü§î
So no more <code>cabextract</code> üò¢
Come to think of this, new ThinkPads are also <a href="https://wiki.archlinux.org/title/Lenovo_ThinkPad_X1_Carbon_(Gen_10)">missing</a> Linux kernel drivers for their MIPI web cameras.
Eh, Lenovo.
</p>

<p><strong>UEFITool</strong>.
I installed <a href="https://github.com/LongSoft/UEFITool">UEFITool</a> and imported the BIOS binary:</p>

<div><pre><code><span>$ </span><span>sudo </span>apt-get <span>install </span>uefitool
<span>$ </span>UEFITool /mnt/bios/FLASH/N23ET86W/<span>\$</span>0AN2300.FL1
</code></pre></div>

<p>I searched for <code>xDCI</code> and got a hit in GUID <code>E6A7A1CE-5881-4B49-80BE-69C91811685C</code>, corresponding to the <code>Setup</code> module.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/uefi-tool-xdci.jpg" title="Searching for xDCI via UEFITool">
		
	
	
		<figcaption>Searching for xDCI via UEFITool</figcaption>
	
</figure>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
A GUID is a unique 128-bit number that is a <u>G</u>lobally <u>U</u>nique <u>ID</u>entifier.
Each time an image, protocol, device, or other item is defined in UEFI, a GUID must be generated for that item. 
</th>
	</tr>

	<tr>
		<th></th>
		<th><a href="https://github.com/tianocore-docs/edk2-UefiDriverWritersGuide/blob/master/3_foundation/35_guids.md">GUIDs</a>, EDK II Driver Writer‚Äôs Guide</th>
	</tr>

</tbody></table>

<p>I extracted the binary data from the <code>PE32 image section</code> of the <code>Setup</code> module into <code>Setup.bin</code> via <code>Extract body...</code> from UEFITool and checked for strings that contained <code>xDCI</code>:</p>

<div><pre><code><span>$ </span>strings <span>-el</span> ./Setup.bin | <span>grep </span>xDCI
xDCI Support
Enable/Disable xDCI <span>(</span>USB OTG Device<span>)</span><span>.</span>
</code></pre></div>

<p>Aha!
So, the setting for enabling xDCI was there; it was just indeed hidden by default.</p>

<h2 id="-enabling-xdci">üí° Enabling xDCI</h2>

<p>At this point, I had high hopes that xDCI could be enabled through BIOS.
I only had to find a way to unlock the setting to do this.</p>

<h3 id="-enabling-xdci-via-advanced-settings">‚öô Enabling xDCI via Advanced settings</h3>

<p>The first thing I tried was unlocking the hidden <code>Advanced</code> BIOS page.</p>

<p>Luckily, the BIOS modding community has already figured this out.
The process is <a href="https://tylernguyen.github.io/x1c6-hackintosh/BIOS/modding-the-BIOS/">well-documented</a> by the authors of the <a href="https://github.com/tylernguyen/x1c6-hackintosh">x1c6-hackintosh project</a> coordinated by <a href="https://tylernguyen.social/@tylernguyen">Tyler Nguyen</a>.
That project aims to run MacOS on ThinkPad X1 Carbon 6th Gen ‚Äî specifically the laptop that I had.</p>

<p><strong>SPI reflashing</strong>.
Unlocking the <code>Advanced</code> page via the proposed method required reflashing the SPI chip that stores BIOS.</p>

<p>The most common approach for reflashing the BIOS SPI chip is attaching a clip to the chip on the laptop‚Äôs motherboard and using an SPI programmer to rewrite the chip‚Äôs contents.
The good thing about this approach is that you can attach the clip once and then reflash BIOS as many times as you‚Äôd like.</p>

<p>However, I was hesitant to use that approach.
A few years ago, I successfully fried the motherboard on another laptop when I tried reflashing BIOS with an SPI clip.
I guess I either connected the clip improperly, or the motherboard just didn‚Äôt tolerate the SPI chip being powered externally.
This time, I wanted to avoid messing this up.</p>

<p>A safer approach to reflashing an SPI chip is to unsolder it from the motherboard and directly connect it to an SPI programmer.
This is more time-consuming but allows avoiding damaging the motherboard.
In the worst case, you would just kill the SPI chip, which is easily replaceable.</p>

<p><strong>SPI socket</strong>.
Instead of unsoldering and soldering the chip back on for each BIOS test, I decided to replace the SPI chip on the motherboard with an <a href="https://www.adafruit.com/product/4726">SPI socket</a>.
With the socket in place, I could take the chip out and put it back in whenever I wanted.</p>

<p>My soldering skills are not great.
Luckily, <a href="https://brs.im/">Sergey Korablin</a>, who used to design and assemble motherboards for a job, was around to help me with soldering ü§ó</p>

<p>Accessing to the SPI chip on the ThinkPad X1 Carbon 6th Gen motherboard required removing the Wi-Fi antenna module.
This module was held by a single screw, so this was not hard.
We also disconnected the main laptop battery before soldering, just in case (and I also did that whenever I took the chip out of the socket).</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/spi-socket.jpg" title="Left: SPI chip before unsoldering; Right: SPI socket installed">
		
	
	
		<figcaption>Left: SPI chip before unsoldering; Right: SPI socket installed</figcaption>
	
</figure>

<p><strong>Wieson G6179-10</strong>.
For the SPI socket, I chose <a href="https://www.adafruit.com/product/4726">Wieson G6179-10</a> by Adafruit.</p>

<p>This socket had a few non-critical problems:</p>

<ol>
  <li>
    <p>It was quite large, so the bottom laptop lid didn‚Äôt fully close;</p>
  </li>
  <li>
    <p>The latch on the socket was tight, so opening it required care to avoid tearing it apart from the motherboard (I used a thread to pull on the latch while holding the socket in place);</p>
  </li>
  <li>
    <p>The connection between the chip and the socket was flaky: my laptop would occasionally shut down and make beep noises on the power-on (I had to jiggle the chip in the socket to fix that temporarily).</p>
  </li>
</ol>

<p>But overall, the socket was good enough for running my experiments.</p>

<p><strong>FT2232H Mini Module</strong>.
For reflashing the SPI chip, I used the <a href="https://ftdichip.com/products/ft2232h-mini-module/">FTDI FT2232H Mini Module</a>, which is a <a href="https://en.wikipedia.org/wiki/USB-to-serial_adapter">USB-to-serial converter</a> that supports working with SPI, UART, I2C, and JTAG.</p>

<p>
I learned about this module from an <a href="http://blog.cr4.sh/2016/10/exploiting-ami-aptio-firmware.html">article</a> by <a href="https://twitter.com/d_olex">Dmytro Oleksiuk</a> many years ago and have it in my toolkit since then.
</p>

<p>
For reference, here‚Äôs the pinout of this module for working with SPI chips:
</p>

<div>
  <p>
The module can simultaneously work with two SPI chips through different channels (named 2 and 3).
</p>
</div>

<table>
  <thead>
    <tr>
      <th>SPI chip pin</th>
      <th>Boarn pin, ch. 2</th>
      <th>Board pin, ch. 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>CN2.12</td>
      <td>CN3.23</td>
    </tr>
    <tr>
      <td>2</td>
      <td>CN2.09</td>
      <td>CN3.24</td>
    </tr>
    <tr>
      <td>3</td>
      <td>CN2.14</td>
      <td>CN3.21</td>
    </tr>
    <tr>
      <td>4</td>
      <td>CN2.02</td>
      <td>CN3.04</td>
    </tr>
    <tr>
      <td>5</td>
      <td>CN2.10</td>
      <td>CN3.25</td>
    </tr>
    <tr>
      <td>6</td>
      <td>CN2.07</td>
      <td>CN3.26</td>
    </tr>
    <tr>
      <td>7</td>
      <td>CN2.13</td>
      <td>CN3.20</td>
    </tr>
    <tr>
      <td>8</td>
      <td>CN2.05</td>
      <td>CN3.01</td>
    </tr>
  </tbody>
</table>

<p>To connect the SPI chip pins to the FT2232H module, I used a SOP8 to DIP8 adapter (similar to <a href="https://www.amazon.de/-/en/DollaTek-200-208mils-Socket-Adapter-OTS-20-1-27-01/dp/B07DK2TNYV">this one</a>) and a bunch of <a href="https://www.amazon.de/-/en/EL-CP-004/dp/B01EV70C78/">jump wires</a>.
I also connected <code>CN2.1</code> to <code>CN2.11</code> and <code>CN3.1</code> to <code>CN3.3</code> on the FT2232H module to enable the USB Bus-Powered mode according to the module‚Äôs <a href="https://ftdichip.com/wp-content/uploads/2020/07/DS_FT2232H_Mini_Module.pdf">datasheet</a>.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/ft2232h.jpg" title="FTDI FT2232H Mini Module connected to SOP8 to DIP8 adapter with SPI chip">
		
	
	
		<figcaption>FTDI FT2232H Mini Module connected to SOP8 to DIP8 adapter with SPI chip</figcaption>
	
</figure>

<p>To dump the contents of the SPI chip via the module, I used <code>flashrom</code>:</p>

<div><pre><code><span>$ </span><span>sudo </span>flashrom <span>-p</span> ft2232_spi:type<span>=</span>2232H,port<span>=</span>A <span>-r</span> bios.bin
</code></pre></div>

<p>
Tip: always dump SPI chips twice and make sure the contents in both dumps match.
</p>

<p><strong>Patching BIOS</strong>.
The <a href="https://tylernguyen.github.io/x1c6-hackintosh/BIOS/modding-the-BIOS/">BIOS modding guide</a> suggested patching the BIOS image in two steps:</p>

<ol>
  <li>
    <p>Use the <code>UEFIPatch</code> tool to apply a provided <a href="https://github.com/digmorepaka/thinkpad-firmware-patches/blob/master/xx70_xx80_patches_v7.txt">set of patches</a>;</p>
  </li>
  <li>
    <p>Use a hex editor to change the <code>4C 4E 56 42 42 53 45 43 FB</code> byte sequence to <code>4C 4E 56 42 42 53 45 43 FF</code> (the last byte is different).</p>
  </li>
</ol>

<p>Before mindlessly following these steps, I decided to get at least a high-level understanding of what these changes did.</p>

<p><strong>First patch</strong>.
After poking around, I found out that the first step <a href="https://habr.com/en/articles/250611/">replaced references</a> to the GUID for the <code>Date/Time</code> BIOS page with such for the <code>Advanced</code> one:</p>

<div><pre><code># SystemFormBrowserCoreDxe | enable advance menu Lenovo xx70/xx80
721C8B66-426C-4E86-8E99-3457C46AB0B9 10 P:04320b483cc2e14abb16a73fadda475f:778b1d826d24964e8e103467d56ab1ba
32442D09-1D11-4E27-8AAB-90FE6ACB0489 10 P:04320b483cc2e14abb16a73fadda475f:778b1d826d24964e8e103467d56ab1ba
</code></pre></div>

<p>With this patch, the <code>Date/Time</code> BIOS settings page should be replaced with the <code>Advanced</code> one.</p>

<p>I applied the patch above via <code>UEFIPatch</code> to my <code>bios.bin</code>:</p>

<div><pre><code><span>$ </span><span>sudo </span>apt-get <span>install </span>uefitool-cli
<span>$ </span>UEFIPatch bios.bin patch.txt <span>-o</span> bios-patched.bin
</code></pre></div>

<p><strong>Second patch</strong>.
The second step of changing a magical byte sequence was quite cryptic.</p>

<div>
  <p>
I suspect this patch switches the TPM-related BIOS setting bit in NVRAM, but I didn‚Äôt check it.
</p>
</div>

<p>Eventually, I <a href="https://github.com/tylernguyen/x1c6-hackintosh/issues/85#issuecomment-730309699">found out</a> that this change was forcing the TPM (Trusted Platform Module) into the <code>MFG Mode</code> (Manufacturing Mode).
This prevented Boot Guard from detecting the BIOS modification from step #1.</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
Intel Boot Guard is a processor feature that prevents the computer from running firmware (UEFI) images not released by the system manufacturer.
When turned on, the processor verifies a digital signature contained in the firmware image before executing it using the public key, which is fused into the system‚Äôs Platform Controller Hub (PCH) by the system manufacturer (not by Intel).
As a result, Intel Boot Guard makes it impossible for end users to install replacement firmware or modded BIOS.
</th>
	</tr>

	<tr>
		<th></th>
		<th><a href="https://en.wikipedia.org/wiki/Intel_vPro#IBG">Intel vPro</a>, Wikipedia</th>
	</tr>

</tbody></table>

<p>Normally, disabling Boot Guard should be much harder than simply flipping a bit in the BIOS binary.
But I guess ThinkPad X1 Carbon 6th Gen is just old and vulnerable.</p>

<p>
I did this step on a fairly old BIOS version 1.37.
It is possible that this Boot Guard bypass has been fixed in one of the newer versions.
However, the NVRAM approach I discuss below should still work.
</p>

<p>
I tried applying only the first change without the second.
The laptop made beeping noises, most likely indicating a Boot Guard failure, and refused to boot.
</p>

<p>To apply the patch from the second step, I simply used the <code>ghex</code> hex editor.</p>

<p><strong>Flashing</strong>.
After applying both patches, I flashed the modified BIOS to the SPI chip:</p>

<div><pre><code><span>$ </span><span>sudo </span>flashrom <span>-p</span> ft2232_spi:type<span>=</span>2232H,port<span>=</span>A <span>-w</span> bios-patched.bin
</code></pre></div>

<p>And put the chip into the socket.</p>

<p><strong>Advanced settings</strong>.
After booting into BIOS, the <code>Date/Time</code> page disappeared, but the <code>Advanced</code> page appeared instead, as expected ü•≥</p>

<div>
  <p>
I haven‚Äôt found a way to take BIOS screenshots, so I had to take pictures of the screen üôÉ
</p>
</div>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/bios1.jpg" title="">
		
	
	
</figure>

<p>After following through <code>Intel Advanced Menu</code>, <code>PCI-IO Configuration</code>, and <code>USB Configuration</code>, I found the setting called <code>xDCI Support</code> and switched it to <code>Enabled</code>.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/bios2.jpg" title="">
		
	
	
</figure>

<p>I also checked the TPM settings.
As expected, the TPM was switched to <code>MFG Mode</code>.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/bios3.jpg" title="">
		
	
	
</figure>

<p><strong>Success</strong>.
After I booted the laptop, I checked <code>lspci</code> once again.</p>

<p>Magically, the xDCI device with the expected <code>9d30</code> device ID appeared ü•≥:</p>

<div><pre><code>00:14.1 USB controller [0c03]: Intel Corporation Device [8086:9d30] (rev 21) (prog-if fe [USB Device])
	Subsystem: Lenovo Device [17aa:225c]
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
	Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx-
	Latency: 0
	Interrupt: pin B routed to IRQ 17
	Region 0: Memory at 2ffb000000 (64-bit, non-prefetchable) [size=2M]
	Region 2: Memory at 2ffb230000 (64-bit, non-prefetchable) [size=4K]
	Capabilities: [80] Power Management version 3
		Flags: PMEClk- DSI- D1- D2- AuxCurrent=0mA PME(D0+,D1-,D2-,D3hot+,D3cold-)
		Status: D0 NoSoftRst+ PME-Enable- DSel=0 DScale=0 PME-
	Capabilities: [90] Vendor Specific Information: Len=14 &lt;?&gt;
	Kernel driver in use: dwc3-pci
	Kernel modules: dwc3_pci
</code></pre></div>

<p>Moreover, the kernel even automatically loaded the <code>dwc3</code> UDC driver (remember that xDCI is based on DWC3), and a new entry appeared in the list of UDC devices ü§Ø:</p>

<div><pre><code><span>$ </span><span>ls</span> /sys/class/udc/
dwc3.1.auto
</code></pre></div>

<p>The only thing left was checking whether this UDC driver actually worked with xDCI.</p>

<p><strong>Shortcomings</strong>.
This approach of enabling xDCI had two shortcomings.
It required:</p>

<ol>
  <li>
    <p>Reflashing the SPI chip via a programmer.
This sets a high bar for those wishing to enable xDCI on their machine.
Doing this might also be impossible on newer systems due to RPMC; see the <a href="#-afterword">Afterword</a> section.</p>
  </li>
  <li>
    <p>Having a Boot Guard bypass.
While there is a bypass for the X1 Carbon 6th Gen laptop, other machines might not be vulnerable in the same way.</p>
  </li>
</ol>

<p>I tried to tackle these problems later; see the <a href="#-attempting-to-enable-xdci-via-pch">sections</a> <a href="#-enabling-xdci-via-nvram">below</a>.</p>

<h3 id="-checking-xdci">üßÅ Checking xDCI</h3>

<p>At this point, I had xDCI enabled in BIOS, and the <code>dwc3</code> UDC driver was loaded.</p>

<p>As before, I switched the USB role to the <code>device</code> state:</p>

<div><pre><code><span>$ </span><span>echo </span>device | <span>sudo tee</span> /sys/class/usb_role/intel_xchi_usb_sw-role-switch/role
</code></pre></div>

<p>And as before, nothing happened; no new <code>dmesg</code> messages appeared, at least.</p>

<p>But as I now had the UDC driver loaded, I could attempt emulating a USB device through it and check if that works.</p>

<p><strong>Finding port</strong>.
First, I had to figure out to which USB port xDCI was connected, if to any.</p>

<p>On Raspberry Pi‚Äìlike boards, there is usually a single USB port that can be used for USB device emulation; such port is typically marked as ‚ÄúUSB OTG‚Äù.
But there are no such markings on ThinkPad laptops.
Moreover, it could be that the xDCI-enabled port of the xHCI controller was not wired to the external casing of the laptop at all üòü</p>

<p>To find the xDCI-enabled port, I tried plugging in a USB flash drive into all external ports one by one while having the USB role set to <code>device</code>.
The second port I tried didn‚Äôt work: the OS did not detect the flash drive.
But once I switched the USB role back to <code>host</code>, the port started working.</p>

<p>So, it looked like I had found the right port ü•≥</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/xdci-port.jpg" title="xDCI-enabled port on ThinkPad X1 Carbon 6th Gen">
		
	
	
		<figcaption>xDCI-enabled port on ThinkPad X1 Carbon 6th Gen</figcaption>
	
</figure>

<p><strong>USB cable</strong>.
Next, I needed a USB cable to connect my laptop to a USB host.</p>

<p>First, the cable had to be male-to-male: the xDCI-enabled port of my laptop was type A, not type B, which is typically used on USB devices.
So, I needed a cable with a type A connector on both sides.</p>

<p>
Technically, male-to-male cables are <a href="https://electronics.stackexchange.com/questions/644717/are-usb-2-0-type-a-male-male-cables-compliant-with-usb-specification">not compliant</a> with USB 2.0.
But, oh well, USB is weird.
</p>

<p>Then, it was reasonable to use a cable with the power <code>VBUS</code> line disconnected.
It could be that role switching did not turn off the power on the xDCI-enabled port (and this was indeed the case: I later checked with a USB breakout board and a multimeter).
And connecting two devices with slightly different <code>VBUS</code> levels might not be a good idea.</p>

<p>
A normal USB 2.0 cable has four wires inside: the power <code>VBUS</code> and the ground <code>GND</code> lines that the host uses to supply 5 V and up to 500 mA of power to the device, and the data <code>D-</code> and <code>D+</code> lines that are used primarily to transmit data.
</p>

<p><strong>Making USB cable</strong>.
For the initial testing, I cut open two USB 2.0 cables with type A connectors and used them to make a single male-to-male cable with <code>VBUS</code> disconnected.
Later, I switched to using <a href="https://www.amazon.de/gp/product/B094FYL9QT/">PortaPow USB Power Blocker</a> with a <a href="https://www.amazon.de/-/en/gp/product/B07NSM1XTL/">male-to-male USB 2.0 cable</a> as a more production-grade solution.</p>

<p>
PortaPow USB Power Blocker is a USB adapter that disconnects <code>VBUS</code> while leaving the data <code>D-</code> and <code>D+</code> and the ground <code>GND</code> lines untouched.
Perfect for my use case.
</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/usb-wires.jpg" title="Left: DIY male-to-male USB 2.0 cable with VBUS (red wire) disconnected;<br>Right: male-to-male USB 2.0 cable with PortaPow USB Power Block attached">
		
	
	
		<figcaption>Left: DIY male-to-male USB 2.0 cable with VBUS (red wire) disconnected;<br>Right: male-to-male USB 2.0 cable with PortaPow USB Power Block attached</figcaption>
	
</figure>

<p>
I also tried using the <a href="https://www.datapro.net/products/usb-3-0-super-speed-a-a-debugging-cable.html">USB 3.0 Super-Speed A/A Debugging Cable</a> made by DataPro.
This is a male-to-male USB 3.0 cable that leaves <code>VBUS</code> disconnected (along with USB 2.0 <code>D-</code> and <code>D+</code>) and swaps the SuperSpeed receiver/transmitter differentials pairs.
However, this cable didn‚Äôt work for my use case; I haven‚Äôt tried to figure out why.
</p>

<p><strong>Gadget Zero</strong>.
Now came the moment of truth.
I connected the xDCI-enabled port of my X1 Carbon 6th Gen laptop to a USB port of another computer and loaded the <code>g_zero</code> gadget driver module.</p>

<p>
<code>g_zero</code> is a gadget driver module that is typically used for testing UDCs.
Its <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/usb/gadget/legacy/Kconfig#L39">configuration entry</a> says: ‚ÄúMake this be the first driver you try using on top of any new USB peripheral controller driver‚Äù.
Once loaded, this module emulates a testing USB device through the first UDC it finds on the system.
</p>

<p>And it worked! The <code>g_zero</code> gadget driver successfully emulated a USB device through xDCI for another laptop that I used as the host ü•≥</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/xdci-emulation.jpg" title="ThinkPad X1 Carbon 6th Gen emulates a USB device for ThinkPad X1 Carbon 10th Gen via xDCI">
		
	
	
		<figcaption>ThinkPad X1 Carbon 6th Gen emulates a USB device for ThinkPad X1 Carbon 10th Gen via xDCI</figcaption>
	
</figure>

<p>Awesome! üòÉ</p>

<p>Before moving on to showing a few more interesting <a href="#-using-xdci">usage examples</a> for xDCI, I‚Äôll cover two other approaches to enabling it that I tried.</p>

<h3 id="-attempting-to-enable-xdci-via-pch">üßæ Attempting to enable xDCI via PCH</h3>

<p>After I managed to enable xDCI by reflashing the SPI chip, I was wondering whether it would be possible to do this purely via software.
My thinking was that since BIOS somehow enabled xDCI, perhaps I could do the same from the booted OS.</p>

<p>For this, I had to figure out how exactly BIOS enabled xDCI.</p>

<p>
This approach was suggested to me by <a href="https://twitter.com/h0t_max">Maxim Goryachy</a>, who is an expert in the low-level platform security area.
Maxim also tremendously helped me by answering questions about BIOS and PCH.
</p>

<p>
For everything in this section, I used the old BIOS version 1.37.
I did not check whether it all works the same with newer versions.
</p>

<p><strong>BIOS source</strong>.
I‚Äôm not a big fan of reverse engineering binaries, so decompiling BIOS to understand how it handled xDCI was not a thing I wanted to do.</p>

<p>Luckily, there have been several BIOS source code leaks from various manufacturers over the last few years.
Thus, obtaining the source code for the Kaby Lake BIOS was not hard (my ThinkPad X1 Carbon 6th Gen laptop with the i7-8650U CPU is <a href="https://www.thinkwiki.org/wiki/Category:X1_Carbon_(6th_Gen)">based</a> on the Kaby Lake R architecture).</p>

<p>
I will not provide a link to the leaked source code nor full snippets of non-public code to limit the possibility of violating some copyrights.
But you can find the leaked code yourself if you‚Äôre interested; search for <code>KabylakeSiliconPkg</code>.
</p>

<p><strong>xDCI in BIOS</strong>.
I grepped the BIOS source code for <code>xDCI</code> and found the code responsible for its bring-up in <code>Pch/Library/Private/PeiPchInitLib/PchXdci.c</code>.</p>

<p>The code was roughly structured like this:</p>

<div><pre><code><span>ConfigureXdci</span><span>()</span> <span>{</span>
	<span>// Do stuff.</span>

	<span>if</span> <span>(</span><span>XdciConfig</span><span>.</span><span>Enable</span> <span>==</span> <span>0</span><span>)</span> <span>{</span>
		<span>// Do stuff to disable xDCI.</span>

		<span>// Disable xDCI in PSF.</span>

		<span>// Disable xDCI in PMC.</span>
	<span>}</span> <span>else</span> <span>{</span>
		<span>// Do stuff to enable xDCI.</span>
	<span>}</span>
<span>}</span>
</code></pre></div>

<p>The parts of the code that I replaced with comments appeared to manipulate various PCH registers.</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
Platform Controller Hub (PCH) is a family of Intel‚Äôs single-chip chipsets.
PCH controls certain data paths and support functions used in conjunction with Intel CPUs.
</th>
	</tr>

	<tr>
		<th></th>
		<th><a href="https://en.wikipedia.org/wiki/Platform_Controller_Hub">Platform Controller Hub</a>, Wikipedia</th>
	</tr>

</tbody></table>

<p>My idea was to try reverting all of the register manipulations done in the disable branch in the reverse order and then apply the manipulations from the enable branch.</p>

<p><strong>Datasheet</strong>.
Before proceeding, I decided to try finding a datasheet for the PCH used on my laptop.
The datasheet could hopefully describe the PCH registers, which would be helpful.</p>

<p>First, I <a href="https://en.wikipedia.org/wiki/List_of_Intel_chipsets#LGA_1151_rev_1">found out</a> that Sunrise Point (the chipset on my laptop) is the codename for the series 100 PCH chipsets.
Even though Kaby Lake does <a href="https://en.wikipedia.org/wiki/Kaby_Lake">support</a> the 200 series chipsets, ThinkPad X1 Carbon 6th Gen used an older one.</p>

<p>After that, I managed to find the <a href="https://www.intel.com/content/www/us/en/content-details/332691/intel-100-series-chipset-family-platform-controller-hub-pc">Intel 100 Series Chipset Family Platform Controller Hub (PCH)</a> datasheet.</p>

<p>However, the datasheet subtitle said ‚ÄúSupporting S and H Platform Register Information‚Äù.
Later, I discovered that this meant that this specific datasheet applied to Sunrise Point-<strong>H</strong> chipsets, not Sunrise Point-<strong>LP</strong>, which I had.
But it was still good enough for my purposes.</p>

<h4 id="-enabling-xdci-in-pmc">üîã Enabling xDCI in PMC</h4>

<p>The last step in the branch responsible for disabling xDCI in BIOS was disabling it in PMC.</p>

<p>
PMC (Power Management Controller) is a controller that manages power ü§ì
</p>

<p>Naturally, disabling xDCI in PMC most likely disconnected the xDCI device from power.</p>



<p><strong>xDCI in PMC</strong>.
To disable xDCI in PMC, BIOS set the <code>B_PCH_PWRM_NST_PG_FDIS_1_XDCI_FDIS_PMC</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPmc.h#L577">bit</a> (#24) in the <code>R_PCH_PWRM_NST_PG_FDIS_1</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPmc.h#L575">register</a> (offset <code>0x628</code>) of the PMC device.</p>

<p>I searched through the PCH datasheet and found out that <code>NST_PG_FDIS_1</code> was one of the PMC <code>Chipset Initialization Register</code>s, and its bit #24 was responsible for <code>XDCI Function Disable</code> as expected.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/pch-pmc.jpg" title="NST_PG_FDIS_1 register and its xDCI bit in the PCH datasheet">
		
	
	
		<figcaption>NST_PG_FDIS_1 register and its xDCI bit in the PCH datasheet</figcaption>
	
</figure>

<p><strong>PMC registers</strong>.
To enable xDCI in PMC, I thus wanted to reset the <code>XDCI Function Disable</code> bit in the <code>NST_PG_FDIS_1</code> register of the PMC device.</p>

<p>The question then was: ‚ÄúHow do I access this PMC register from the OS?‚Äù.</p>

<p>This turned out to be not hard.
In the datasheet, the <code>NST_PG_FDIS_1</code> register was listed in the <code>PMC Memory Mapped Registers</code> section.
This meant that the register was memory-mapped, and thus, I could access it through a specific address in physical memory.</p>

<p>I only had to figure out what that address was.</p>

<p><strong>PMC in BIOS</strong>.
First, I checked how BIOS finds this address.</p>

<p>As it turned out, BIOS <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Library/PeiDxeSmmPchCycleDecodingLib/PchCycleDecodingLib.c#L181">read</a> the PMC memory-mapped register area address from the <code>R_PCH_PMC_PWRM_BASE</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPmc.h#L52">register</a> (offset <code>0x48</code>) within the PCIe Configuration Space of the PMC device:</p>



<div id="bios-pmc-off">

  <div><pre><code><span>EFI_STATUS</span> <span>EFIAPI</span> <span>PchPwrmBaseGet</span> <span>(</span><span>OUT</span> <span>UINT32</span> <span>*</span><span>Address</span><span>)</span>
<span>{</span>
  <span>UINTN</span> <span>PmcBase</span> <span>=</span> <span>MmPciBase</span> <span>(</span>
                    <span>DEFAULT_PCI_BUS_NUMBER_PCH</span><span>,</span>
                    <span>PCI_DEVICE_NUMBER_PCH_PMC</span><span>,</span>
                    <span>PCI_FUNCTION_NUMBER_PCH_PMC</span>
                  <span>);</span>
  <span>*</span><span>Address</span> <span>=</span> <span>MmioRead32</span> <span>(</span><span>PmcBase</span> <span>+</span> <span>R_PCH_PMC_PWRM_BASE</span><span>)</span> <span>&amp;</span>
               <span>B_PCH_PMC_PWRM_BASE_BAR</span><span>;</span>
  <span>return</span> <span>EFI_SUCCESS</span><span>;</span>
<span>}</span>
</code></pre></div>
  <div>
  <p>
Click the switch to see the full source code.
</p>
</div>

</div>






<p>
Note that the PMC <a href="https://wiki.osdev.org/PCI_Express">PCIe Configuration Space</a> area (<code>PmcBase</code> in the snippet above) differs from the PMC memory-mapped register area (denoted as <code>PWRMBASE</code>).
Both are technically memory-mapped (can be accessed through physical memory), but they serve different purposes and reside at different addresses.
</p>

<p><strong>PMC device</strong>.
There indeed was a PMC PCIe device on my laptop:</p>

<div><pre><code>00:1f.2 Memory controller [0580]: Intel Corporation Sunrise Point-LP PMC [8086:9d21] (rev 21)
        Subsystem: Lenovo Sunrise Point-LP PMC [17aa:225c]
        Control: I/O- Mem- BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
        Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx-
        Region 0: Memory at ee420000 (32-bit, non-prefetchable) [disabled] [size=16K]
</code></pre></div>

<p>The device and function numbers <code>1f.2</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPmc.h#L34">matched</a> <code>PCI_DEVICE_NUMBER_PCH_PMC</code> (<code>31</code>, which is <code>1f</code> in hex) <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPmc.h#L35">and</a> <code>PCI_FUNCTION_NUMBER_PCH_PMC</code> (<code>2</code>) from the BIOS code.</p>

<p>The register offset and the PCIe device numbers also matched the information in the datasheet.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/pmc-pwrmbase.jpg" title="PMC Memory Mapped Registers Summary in the PCH datasheet">
		
	
	
		<figcaption>PMC Memory Mapped Registers Summary in the PCH datasheet</figcaption>
	
</figure>

<p>Thus, to change the value of the <code>NST_PG_FDIS_1</code> register, I could read out the PMC memory-mapped register area address from <code>R_PCH_PMC_PWRM_BASE</code> and then overwrite the value at that address in physical memory.</p>

<p>However, I ended up using a different approach.</p>

<p><strong>PMC in kernel</strong>.
While looking into how to work with PMC registers, I also searched through the Linux kernel code to find out whether it interacted with PMC.</p>

<p>As it turned out, it did!
The kernel contained a global pointer to a <code>pmc_core_device</code> <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/platform/x86/intel/pmc/pltdrv.c#L28">platform device</a>:</p>

<div><pre><code><span>static</span> <span>struct</span> <span>platform_device</span> <span>*</span><span>pmc_core_device</span><span>;</span>
</code></pre></div>

<p>Whose <a href="https://elixir.bootlin.com/linux/v6.5/source/include/linux/platform_device.h#L258">driver data</a>
contained a pointer to a <code>pmc</code> <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/platform/x86/intel/pmc/core.h#L346">structure</a>:</p>

<div><pre><code><span>struct</span> <span>pmc</span> <span>{</span>
	<span>u64</span> <span>base_addr</span><span>;</span>
	<span>void</span> <span>__iomem</span> <span>*</span><span>regbase</span><span>;</span>	<span>/* Address of memory-mapped PMC reg. area. */</span>
	<span>const</span> <span>struct</span> <span>pmc_reg_map</span> <span>*</span><span>map</span><span>;</span>
	<span>u32</span> <span>*</span><span>lpm_req_regs</span><span>;</span>
<span>};</span>
</code></pre></div>

<p>Which contained a pointer to the PMC memory-mapped register area <code>regbase</code>, which, in turn, <a href="https://elixir.bootlin.com/linux/latest/source/drivers/platform/x86/intel/pmc/core.c#L56">could be</a> read or written via <code>readl</code> and <code>writel</code>:</p>

<div><pre><code><span>static</span> <span>inline</span> <span>u32</span> <span>pmc_core_reg_read</span><span>(</span><span>struct</span> <span>pmc</span> <span>*</span><span>pmc</span><span>,</span> <span>int</span> <span>reg_offset</span><span>)</span>
<span>{</span>
	<span>return</span> <span>readl</span><span>(</span><span>pmc</span><span>-&gt;</span><span>regbase</span> <span>+</span> <span>reg_offset</span><span>);</span>
<span>}</span>

<span>static</span> <span>inline</span> <span>void</span> <span>pmc_core_reg_write</span><span>(</span><span>struct</span> <span>pmc</span> <span>*</span><span>pmc</span><span>,</span> <span>int</span> <span>reg_offset</span><span>,</span>
				      <span>u32</span> <span>val</span><span>)</span>
<span>{</span>
	<span>writel</span><span>(</span><span>val</span><span>,</span> <span>pmc</span><span>-&gt;</span><span>regbase</span> <span>+</span> <span>reg_offset</span><span>);</span>
<span>}</span>
</code></pre></div>

<p>Thus, instead of reading out the address myself, I decided to reuse the mapping that the kernel provided.</p>

<p><strong>Resetting bit</strong>.
I wrote a small kernel module that hijacks the PMC memory-mapped register area the kernel mapped and changes the <code>NST_PG_FDIS_1</code> value:</p>

<div id="kernel-pmc-off"><pre><code><span>#define SPT_PMC_NST_PG_FDIS_1_OFFSET	0x628
#define SPT_PMC_NST_PG_FDIS_1_BIT_XDCI	BIT(24)
</span>
<span>static</span> <span>void</span> <span>enable_xdci_in_fdis_1</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
	<span>struct</span> <span>pmc</span> <span>*</span><span>pmc</span> <span>=</span> <span>find_pmc</span><span>();</span>

	<span>u32</span> <span>reg_value</span> <span>=</span> <span>readl</span><span>(</span><span>pmc</span><span>-&gt;</span><span>regbase</span> <span>+</span> <span>SPT_PMC_NST_PG_FDIS_1_OFFSET</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: NST_PG_FDIS_1 is %x</span><span>\n</span><span>"</span><span>,</span> <span>reg_value</span><span>);</span>
	<span>int</span> <span>xdci_bit</span> <span>=</span> <span>!!</span><span>(</span><span>reg_value</span> <span>&amp;</span> <span>SPT_PMC_NST_PG_FDIS_1_BIT_XDCI</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: XDCI bit is %d</span><span>\n</span><span>"</span><span>,</span> <span>xdci_bit</span><span>);</span>

	<span>reg_value</span> <span>&amp;=</span> <span>~</span><span>SPT_PMC_NST_PG_FDIS_1_BIT_XDCI</span><span>;</span>
	<span>pr_err</span><span>(</span><span>"xdci: writing %x to NST_PG_FDIS_1</span><span>\n</span><span>"</span><span>,</span> <span>reg_value</span><span>);</span>
	<span>writel</span><span>(</span><span>reg_value</span><span>,</span> <span>pmc</span><span>-&gt;</span><span>regbase</span> <span>+</span> <span>SPT_PMC_NST_PG_FDIS_1_OFFSET</span><span>);</span>

	<span>reg_value</span> <span>=</span> <span>readl</span><span>(</span><span>pmc</span><span>-&gt;</span><span>regbase</span> <span>+</span> <span>SPT_PMC_NST_PG_FDIS_1_OFFSET</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: NST_PG_FDIS_1 is %x</span><span>\n</span><span>"</span><span>,</span> <span>reg_value</span><span>);</span>
<span>}</span>
</code></pre></div>






<p>
Another reason I chose the kernel approach is that I was initially thinking about writing a kernel driver for enabling xDCI.
It should, however, be possible to access the PMC memory-mapped registers from userspace via <code>/dev/mem</code> without writing a kernel module.
</p>

<p><strong>Fail</strong>.
Unfortunately, resetting the bit failed:</p>

<div><pre><code>xdci: NST_PG_FDIS_1 is 3403ba8
xdci: XDCI bit is 1
xdci: writing 2403ba8 to NST_PG_FDIS_1
xdci: NST_PG_FDIS_1 is 3403ba8
</code></pre></div>

<p>The <code>NST_PG_FDIS_1</code> value didn‚Äôt change after an overwrite attempt.</p>

<p>My guess at that point was that the register was locked.
This is a typical case with configuration registers: they might be initially writeable, but then they might get locked during boot.</p>

<p><strong>Register locked</strong>.
After searching through the PCH datasheet, I discovered that there was indeed a way to lock the <code>NST_PG_FDIS_1</code> register via the <code>ST_FDIS_LK</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPmc.h#L558">bit</a> (<code>Static Function Disable Lock</code>; bit #31) in the <code>ST_PG_FDIS1</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPmc.h#L557">register</a> (<code>Static PG Function Disable 1</code>; offset <code>0x620</code>).</p>

<p>Moreover, it was impossible to unlock the register once locked.
The bit description said: ‚ÄúLock control for all <code>ST_PG_FDIS*</code> and <code>NST_PG_FDIS_*</code> registers. Also <strong>self-locks</strong> when written to <code>1</code>‚Äù.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/pch-pmc-lock.jpg" title="NST_PG_FDIS_1 register and its ST_FDIS_LK bit in the PCH datasheet">
		
	
	
		<figcaption>NST_PG_FDIS_1 register and its ST_FDIS_LK bit in the PCH datasheet</figcaption>
	
</figure>

<p><strong>Checking lock</strong>.
To confirm that the register was locked, I wrote the code for checking the value of the <code>ST_FDIS_LK</code> bit in <code>ST_PG_FDIS1</code>:</p>

<div id="kernel-pmc-lock-off"><pre><code><span>#define SPT_PMC_ST_PG_FDIS1_OFFSET      0x620
#define SPT_PMC_ST_PG_FDIS1_BIT_FDIS_LK BIT(31)
</span>
<span>static</span> <span>void</span> <span>check_fdis_lock</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
	<span>struct</span> <span>pmc</span> <span>*</span><span>pmc</span> <span>=</span> <span>find_pmc</span><span>();</span>

	<span>u32</span> <span>reg_value</span> <span>=</span> <span>readl</span><span>(</span><span>pmc</span><span>-&gt;</span><span>regbase</span> <span>+</span> <span>SPT_PMC_ST_PG_FDIS1_OFFSET</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: ST_PG_FDIS1 is %x</span><span>\n</span><span>"</span><span>,</span> <span>reg_value</span><span>);</span>
	<span>int</span> <span>lock_bit</span> <span>=</span> <span>!!</span><span>(</span><span>reg_value</span> <span>&amp;</span> <span>SPT_PMC_ST_PG_FDIS1_BIT_FDIS_LK</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: FDIS_LK bit is %d</span><span>\n</span><span>"</span><span>,</span> <span>lock_bit</span><span>);</span>
<span>}</span>
</code></pre></div>






<p>The result was:</p>

<div><pre><code>xdci: ST_PG_FDIS1 is 80000040
xdci: FDIS_LK bit is 1
</code></pre></div>

<p>The lock was enabled.
Thus, I could not change the value of the <code>NST_PG_FDIS_1</code> register to enable xDCI in PMC.
And I could not remove the lock, as the bit self-locked.</p>

<p>This was unfortunate üò¢</p>

<p>At that point, I took a break for lunch.</p>

<p><strong>Surprise</strong>.
After coming back to continue, I ran the code again to remember where I was.</p>

<p>To my surprise, the lock bit was not set anymore üòÆ:</p>

<div><pre><code>xdci: ST_PG_FDIS1 is 40
xdci: FDIS_LK bit is 0
</code></pre></div>

<p>‚ÄúWhat the hell?‚Äù thought I.</p>

<p>I rebooted the laptop to see what would happen.
The bit was set again üôÉ</p>

<p>It took me some time to figure out what was going on üßê</p>

<p><strong>Suspend</strong>.
As it turned out, the reason for this was suspend.
When I took the lunch break, I closed the lid of my laptop.
And the laptop went into suspend.
And apparently, the wake-up-from-suspend BIOS code did not set the lock bit; only the boot code did üòÖ</p>

<p>
Do we need a CVE for this or something? üòÅ
</p>

<p><strong>Success</strong>.
After waking up the laptop from suspend, I ran the code to enable xDCI in PMC again:</p>

<div><pre><code>xdci: NST_PG_FDIS_1 is 3403ba8
xdci: XDCI bit is 1
xdci: writing 2403ba8 to NST_PG_FDIS_1
xdci: NST_PG_FDIS_1 is 2403ba8
</code></pre></div>

<p>And it worked! üòÅ</p>

<p>Putting the laptop into suspend to enable xDCI in PMC was weird but good enough for me.</p>

<h4 id="-enabling-xdci-in-psf">üß∂ Enabling xDCI in PSF</h4>

<p>The next step was to enable xDCI in something called PSF.</p>

<p><strong>PSF and IOSF</strong>.
Before reading into the BIOS code responsible for this, I wanted to get at least a high-level idea of what PSF is.</p>

<p>This turned out to be non-trivial: the available information about PSF is extremely scarce.
The best two sources I managed to find were a talk titled "<a href="https://i.blackhat.com/asia-19/Thu-March-28/bh-asia-Goryachy-Ermolov-Intel-Visa-Through-the-Rabbit-Hole.pdf">Intel VISA: Through the Rabbit Hole</a>" by <a href="https://twitter.com/_markel___">Mark Ermolov</a> and <a href="https://twitter.com/h0t_max">Maxim Goryachy</a> and a <a href="https://patents.google.com/patent/EP2778930A2/en">patent EP2778930A2</a> titled "Method and apparatus to trigger and trace on-chip system fabric transactions within the primary scalable fabric".</p>

<p>
I spent many hours trying to figure out the relationship between PSF, IOSF-P, and IOSF-SB (these last two are mentioned below), but I cannot say that I fully succeeded.
Nevertheless, I tried my best to make this section consistent within my simplified understanding of these terms.
</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
PSF (Primary Scalable Fabric) is an IP unit that interconnects other IP units within the CPU and the PCH chipset.
PSF is based on a proprietary Intel specification called IOSF (Intel On-Chip System Fabric).
</th>
	</tr>

	<tr>
		<th></th>
		<th>Based on <a href="https://patents.google.com/patent/EP2778930A2/en">patent EP2778930A2</a> and <a href="https://i.blackhat.com/asia-19/Thu-March-28/bh-asia-Goryachy-Ermolov-Intel-Visa-Through-the-Rabbit-Hole.pdf">Intel VISA: Through the Rabbit Hole</a></th>
	</tr>

</tbody></table>

<p>Thus, when BIOS disabled xDCI in PSF, the xDCI IP unit likely got disconnected from the system.</p>



<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
According to IOSF, PSF provides two main (non-debug) interfaces: IOSF-P (IOSF Primary) and IOSF-SB (IOSF Sideband).
IOSF-P is a fast-speed interface that handles data communication between IP units.
IOSF-SB is a low-speed interface used for configuration and error reporting.
</th>
	</tr>

	<tr>
		<th></th>
		<th>Based on <a href="https://patents.google.com/patent/EP2778930A2/en">patent EP2778930A2</a> and <a href="https://i.blackhat.com/asia-19/Thu-March-28/bh-asia-Goryachy-Ermolov-Intel-Visa-Through-the-Rabbit-Hole.pdf">Intel VISA: Through the Rabbit Hole</a></th>
	</tr>

</tbody></table>

<p>As IOSF-SB is the interface that is used for configuration, BIOS probably disabled xDCI via IOSF-SB.</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
IOSF-SB can be used to configure PSF and other connected IP units.
Each IP unit that can be configured via IOSF-SB is identified by a so-called Port ID.
</th>
	</tr>

	<tr>
		<th></th>
		<th>Based on <a href="https://patents.google.com/patent/EP2778930A2/en">patent EP2778930A2</a> and <a href="https://i.blackhat.com/asia-19/Thu-March-28/bh-asia-Goryachy-Ermolov-Intel-Visa-Through-the-Rabbit-Hole.pdf">Intel VISA: Through the Rabbit Hole</a></th>
	</tr>

</tbody></table>

<p>Based on this, BIOS likely reconfigured PSF via a corresponding Port ID to disconnect the xDCI IP unit.</p>

<p>Having got this high-level understanding, I moved on to reading the BIOS code.</p>

<p>
In reality, I was going back and forth between reading the BIOS code and trying to find out more details about PSF.
But let‚Äôs say that everything happened as I describe for a better narrative üòÑ
</p>

<p><strong>xDCI in PSF</strong>.
To disable xDCI in PSF, BIOS called the <code>PsfDisableXdciDevice</code> function <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/LibraryPrivate/PeiDxeSmmPchPsfPrivateLib/PchPsfPrivateLib.c#L88">defined</a> in <code>Pch/Library/Private/PeiDxeSmmPchPsfPrivateLib/PchPsfPrivateLib.c</code>:</p>



<div><pre><code><span>VOID</span> <span>PsfDisableXdciDevice</span> <span>(</span><span>VOID</span><span>)</span>
<span>{</span>
  <span>UINT16</span> <span>RegOffset</span><span>;</span>

  <span>if</span> <span>(</span><span>GetPchSeries</span> <span>()</span> <span>==</span> <span>PchLp</span><span>)</span> <span>{</span>
    <span>RegOffset</span> <span>=</span> <span>R_PCH_LP_PCR_PSF2_T0_SHDW_OTG_REG_BASE</span> <span>+</span>
                <span>R_PCH_PCR_PSFX_T0_SHDW_PCIEN</span><span>;</span>
  <span>}</span> <span>else</span> <span>{</span>
    <span>RegOffset</span> <span>=</span> <span>R_PCH_H_PCR_PSF2_T0_SHDW_OTG_REG_BASE</span> <span>+</span>
                <span>R_PCH_PCR_PSFX_T0_SHDW_PCIEN</span><span>;</span>
  <span>}</span>

  <span>PchPcrAndThenOr32</span> <span>(</span>
    <span>PID_PSF2</span><span>,</span>
    <span>RegOffset</span><span>,</span>
    <span>~</span><span>0u</span><span>,</span>
    <span>B_PCH_PCR_PSFX_T0_SHDW_PCIEN_FUNDIS</span>
  <span>);</span>
<span>}</span>
</code></pre></div>

<p>In <code>PsfDisableXdciDevice</code>, the <code>PchPcrAndThenOr32</code> call was responsible for reconfiguring PSF via the <code>PID_PSF2</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPcr.h#L85">Port ID</a> (<code>0xBB</code>; first argument).
Internally, it likely somehow used IOSF-SB.
I left figuring out how exactly it does that for later and first looked at the used register and bit offsets.</p>

<p>For a Sunrise Point-<strong>LP</strong> chipset (<code>PchLp</code> series in the snippet), <code>PsfDisableXdciDevice</code> set the <code>B_PCH_PCR_PSFX_T0_SHDW_PCIEN_FUNDIS</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPsf.h#L68">bit</a> (#8) in the <code>R_PCH_PCR_PSFX_T0_SHDW_PCIEN</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPsf.h#L61">register</a> (offset <code>0x1C</code>) from the <code>R_PCH_LP_PCR_PSF2_T0_SHDW_OTG_REG_BASE</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPsf.h#L310">register area</a> (offset <code>0x600</code>) within the <code>PID_PSF2</code> Port ID.</p>

<p><strong>Checking datasheet</strong>.
I looked up this register in the PCH datasheet.
As the datasheet was intended for Sunrise Point-<strong>H</strong> chipsets, the register offset there was <code>0x21C</code> instead of the expected <code>0x61C</code> (<code>0x600</code> + <code>0x1C</code>).
<code>0x21C</code> did, however, correspond to <code>R_PCH_H_PCR_PSF2_T0_SHDW_OTG_REG_BASE</code> (<code>H</code>, not <code>LP</code>) in the BIOS code.
Bit #8 within this register was still described as <code>USB Dual Role (OTG) Function Disable (FunDis)</code>, as expected.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/psf-otg.jpg" title="PSF OTG register and its Function Disable bit in the PCH datasheet">
		
	
	
		<figcaption>PSF OTG register and its Function Disable bit in the PCH datasheet</figcaption>
	
</figure>

<p><strong>PSF2 PCR</strong>.
Now, I wanted to figure out how <code>PchPcrAndThenOr32</code> used IOSF-SB to configure the <code>PID_PSF2</code> Port ID, as I would later need to reproduce this in my kernel module.</p>

<p><code>PchPcrAndThenOr32</code> turned out to be a wrapper around a <code>PchPcrWrite</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Library/PeiDxeSmmPchPcrLib/PchPcrLib.c#L380">call</a>, which <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Library/PeiDxeSmmPchPcrLib/PchPcrLib.c#L267">changed</a> the value of one of the so-called PCRs (<a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPcr.h#L2">Private Chipset Register</a>s):</p>

<div id="bios-pcr-write-off"><pre><code><span>STATIC</span> <span>EFI_STATUS</span> <span>PchPcrWrite</span> <span>(</span>
  <span>IN</span>  <span>PCH_SBI_PID</span>                       <span>Pid</span><span>,</span>
  <span>IN</span>  <span>UINT16</span>                            <span>Offset</span><span>,</span>
  <span>IN</span>  <span>UINTN</span>                             <span>Size</span><span>,</span>
  <span>IN</span>  <span>UINT32</span>                            <span>InData</span><span>)</span>
<span>{</span>
  <span>// ...</span>

  <span>switch</span> <span>(</span><span>Size</span><span>)</span> <span>{</span>
    <span>case</span> <span>4</span><span>:</span>
      <span>MmioWrite32</span> <span>(</span><span>PCH_PCR_ADDRESS</span> <span>(</span><span>Pid</span><span>,</span> <span>Offset</span><span>),</span> <span>(</span><span>UINT32</span><span>)</span> <span>InData</span><span>);</span>
      <span>break</span><span>;</span>
    <span>// ...</span>
  <span>}</span>

  <span>// ...</span>
<span>}</span>
</code></pre></div>






<p>Thus, apparently, changing the PSF2 PCR value was what made PCH reconfigure PSF via IOSF-SB.</p>

<p><strong>PCR addresses</strong>.
Based on the BIOS code, the PCRs were memory-mapped, and the address of each of them was calculated as <code>PCH_PCR_ADDRESS(Pid, Offset)</code>, where <code>Pid</code> is the Port ID and <code>Offset</code> is the offset to a specific PCR.</p>

<p><code>PCH_PCR_ADDRESS</code> was <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsPcr.h#L40">defined</a> as:</p>

<div><pre><code><span>#define PCH_PCR_ADDRESS(Pid, Offset) \
	(PCH_PCR_BASE_ADDRESS | ((UINT8)(Pid) &lt;&lt; 16) | (UINT16)(Offset))
</span></code></pre></div>

<p>Where <code>PCH_PCR_BASE_ADDRESS</code> was <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/PchReservedResources.h#L34">defined</a> as a constant:</p>

<div><pre><code><span>#define PCH_PCR_BASE_ADDRESS 0xFD000000  ///&lt; SBREG MMIO base address
</span></code></pre></div>

<p>These calculations aligned with the information about the PSF2 PCR registers in the PCH datasheet:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
These registers are within the PCH Private Configuration Space, which is accessible through the PCH Sideband Interface. They can be accessed via (<code>SBREG_BAR</code> + Port ID + Register Offset).
</th>
	</tr>

	<tr>
		<th></th>
		<th>PSF2 PCR Registers Summary, <a href="https://www.intel.com/content/www/us/en/content-details/332691/intel-100-series-chipset-family-platform-controller-hub-pch-datasheet-volume-2.html">Intel 100 Series PCH Datasheet, Volume 2</a></th>
	</tr>

</tbody></table>

<p><strong>SBREG</strong>.
Both the BIOS code and the PCH datasheet referred to the memory region that mapped the PCRs as <code>SBREG</code>.
Based on the name, I figured that <code>SBREG</code> stands for ‚ÄúSideband Registers‚Äù.</p>

<p>Thus, it was logical to assume that overwriting one of the PSF2 PCR registers indeed led to PSF being reconfigured via IOSF-SB;
‚ÄúSB‚Äù there stands for ‚ÄúSideband‚Äù too, after all.</p>

<p>The next step was to implement changing the xDCI-related PSF2 PCR register in my kernel module.</p>

<p><strong>PSF in kernel</strong>.
I searched through the Linux kernel code to see if it accessed any PSF PCRs.
I hoped that I could reuse the kernel mapping of the PSF-related registers, just like I did in the PMC case.</p>

<p>Unfortunately, the kernel did not map this area.</p>

<p>Thus, I had to implement mapping of the PSF2 PCR register area myself.</p>

<p><strong>Mapping PSF2 PCR</strong>.
The Linux kernel provides an <code>ioremap</code> <a href="https://elixir.bootlin.com/linux/v6.5/source/arch/x86/mm/ioremap.c#L343">function</a> for mapping memory-mapped register areas into the kernel virtual address space.
This function accepts the physical address and the size of the area to be mapped and returns the virtual address of the mapping.</p>

<p>To calculate the physical address of the PSF2 PCR register area, my kernel module needed to know the address of the <code>SBREG</code> region.
Here, I had two options:</p>

<ol>
  <li>
    <p>Hardcode the <code>SBREG</code> area address <code>0xFD000000</code> taken from the BIOS code.</p>

    <p>This option had the downside of only working on the systems where <code>SBREG</code> resides at that specific address, like my ThinkPad laptop;</p>
  </li>
  <li>
    <p>Or figure out a way to dynamically determine the <code>SBREG</code> area address.</p>

    <p>This would be the proper way portable to other systems.</p>
  </li>
</ol>

<p>I decided to explore the second option first.</p>

<p><strong>P2SB</strong>.
As it turned out, the <code>SBREG</code> area address <a href="https://github.com/chipsec/chipsec/issues/527">could be read</a> from the PCIe Configuration Space of the so-called P2SB (Primary-to-Sideband Bridge) device.</p>

<p>
I failed to find a good explanation of what P2SB is.
Based on my understanding, this is a device designed specifically for accessing IOSF-SB.
My guess is that its name comes from the fact that accessing memory-mapped I/O or register areas normally happens via IOSF-P, but P2SB converts such accesses to its areas to communication over IOSF-SB.
</p>

<p>As I learned from the <a href="https://lab.whitequark.org/notes/2017-11-08/accessing-intel-ich-pch-gpios/">Accessing Intel ICH/PCH GPIOs</a> article by <a href="https://twitter.com/whitequark">whitequark</a>, P2SB is a PCIe device with the device number <code>31</code> (<code>0x1f</code> in hex) and the function number <code>1</code>.
And the address of the <code>SBREG</code> region is stored split across its two Configuration Space registers: <code>SBREG_BAR</code> and <code>SBREG_BARH</code>.</p>

<p>By default, the P2SB device is hidden, and all reads from its Configuration Space return <code>1</code>s.
However, it‚Äôs possible to unhide it by overwriting the <code>HIDE</code> bit in the <code>P2SBC</code> Configuration Space register.
Even when P2SB is hidden, writes to this register still go through.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/p2sb.jpg" title="P2SB device and its registers in the PCH datasheet">
		
	
	
		<figcaption>P2SB device and its registers in the PCH datasheet</figcaption>
	
</figure>

<p><strong>Resetting bit</strong>.
Thus, to dynamically read out the <code>SBREG</code> area address and calculate the PSF2 PCR address based on that, I had to unhide P2SB first.</p>

<p>This seemed like a bit of a hassle, so for now, I decided to just fall back to the simple way of hardcoding the address the same way BIOS did it.</p>

<p>Here‚Äôs the code I came up with for resetting the xDCI-related bit in the corresponding PSF2 PCR:</p>

<div>
  <p>
PCH_PCR_BASE_ADDRESS here is the SBREG address.
</p>
</div>

<div id="kernel-p2sb-off"><pre><code><span>#define PCH_PCR_BASE_ADDRESS 0xFD000000
#define PCH_PCR_ADDRESS(pid, offset) \
	(PCH_PCR_BASE_ADDRESS | ((u8)(pid) &lt;&lt; 16) | (u16)(offset))
#define PID_PSF2 0xBB
</span>
<span>#define PCR_PSF2_T0_SHDW_OTG_REG_BASE		0x600
#define PCR_PSFX_T0_SHDW_PCIEN			0x1C
#define PCR_PSFX_T0_SHDW_PCIEN_FUNDIS_BIT	BIT(8)
</span>
<span>void</span> <span>enable_xdci_in_psf</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
	<span>void</span> <span>__iomem</span> <span>*</span><span>regbase</span> <span>=</span> <span>ioremap</span><span>(</span><span>PCH_PCR_ADDRESS</span><span>(</span><span>PID_PSF2</span><span>,</span> <span>0</span><span>),</span> <span>0x1000</span><span>);</span>

	<span>u32</span> <span>reg_value</span> <span>=</span> <span>readl</span><span>(</span><span>regbase</span> <span>+</span> <span>PCR_PSF2_T0_SHDW_OTG_REG_BASE</span> <span>+</span>
					<span>PCR_PSFX_T0_SHDW_PCIEN</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: PCR_PSFX_T0_SHDW_PCIEN for OTG is %x</span><span>\n</span><span>"</span><span>,</span> <span>reg_value</span><span>);</span>
	<span>int</span> <span>fundis_bit</span> <span>=</span> <span>!!</span><span>(</span><span>reg_value</span> <span>&amp;</span> <span>PCR_PSFX_T0_SHDW_PCIEN_FUNDIS_BIT</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: FUNDIS bit is %d</span><span>\n</span><span>"</span><span>,</span> <span>fundis_bit</span><span>);</span>

	<span>reg_value</span> <span>&amp;=</span> <span>~</span><span>PCR_PSFX_T0_SHDW_PCIEN_FUNDIS_BIT</span><span>;</span>
	<span>pr_err</span><span>(</span><span>"xdci: writing %x to PCR_PSFX_T0_SHDW_PCIEN</span><span>\n</span><span>"</span><span>,</span> <span>reg_value</span><span>);</span>
	<span>writel</span><span>(</span><span>reg_value</span><span>,</span> <span>regbase</span> <span>+</span> <span>PCR_PSF2_T0_SHDW_OTG_REG_BASE</span> <span>+</span>
				    <span>PCR_PSFX_T0_SHDW_PCIEN</span><span>);</span>

	<span>reg_value</span> <span>=</span> <span>readl</span><span>(</span><span>regbase</span> <span>+</span> <span>PCR_PSF2_T0_SHDW_OTG_REG_BASE</span> <span>+</span>
				    <span>PCR_PSFX_T0_SHDW_PCIEN</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: PCR_PSFX_T0_SHDW_PCIEN for OTG is %x</span><span>\n</span><span>"</span><span>,</span> <span>reg_value</span><span>);</span>

	<span>iounmap</span><span>(</span><span>regbase</span><span>);</span>
<span>}</span>
</code></pre></div>






<p>
Again, accessing these PCR registers should also be possible from userspace via <code>/dev/mem</code>.
</p>

<p>When I ran the code, I got:</p>

<div><pre><code>xdci: PCR_PSFX_T0_SHDW_PCIEN for OTG is ffffffff
xdci: FUNDIS bit is 1
xdci: writing fffffeff to PCR_PSFX_T0_SHDW_PCIEN
xdci: PCR_PSFX_T0_SHDW_PCIEN for OTG is ffffffff
</code></pre></div>

<p><strong>Fail</strong>.
From this, I could see that the kernel likely failed to read the register value.
For one thing, the initial value had all bits set, which was suspicious.
And then, after I tried to overwrite the value, the read value was still the same.</p>

<p>This could mean one of two things.
Either the register was completely locked and I could not access it at all.
Or the write itself did go through, but I just could not read the register value.</p>

<p><strong>Unhiding P2SB</strong>.
First, I decided to check if unhiding P2SB would make any difference.
Even though I wanted to avoid implementing this initially, I had to do it after all.</p>

<p>To unhide P2SB, I had to overwrite the <code>HIDE</code> bit (#8) in the <code>P2SBC</code> register (<code>P2SB Control</code>; offset <code>0xE0</code>) within the PCIe Configuration Space of the P2SB device.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/p2sb-control.jpg" title="P2SB Control register and its Hide Device bit in the PCH datasheet">
		
	
	
		<figcaption>P2SB Control register and its Hide Device bit in the PCH datasheet</figcaption>
	
</figure>

<p><strong>P2SB in kernel</strong>.
Following the usual path, I checked if the kernel used P2SB to avoid implementing unhiding from scratch myself.</p>

<p>Luckily, it did!
There were quite a few drivers that unhid P2SB for various purposes.</p>

<p>By using the <code>pnd2_edac</code> <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/edac/pnd2_edac.c#L162">driver</a> as a reference, I came up with the following code that unhides P2SB and attempts to read the PSF2 PCR:</p>

<div>
  <p>
Instead of overwriting just the HIDE bit, this code overwrites the whole byte for simplicity.
</p>
</div>

<div id="kernel-p2sb-unhide-off"><pre><code><span>#define P2SB_DEVFN		PCI_DEVFN(31, 1)
#define P2SB_HIDE_OFFSET	(0xE0 + 1)
</span>
<span>#define P2SB_READ(size, off, ptr) \
	pci_bus_read_config_##size(p2sb_bus, P2SB_DEVFN, off, ptr)
#define P2SB_WRITE(size, off, val) \
	pci_bus_write_config_##size(p2sb_bus, P2SB_DEVFN, off, val)
</span>
<span>static</span> <span>void</span> <span>p2sb_unhide</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
	<span>struct</span> <span>pci_bus</span> <span>*</span><span>p2sb_bus</span> <span>=</span> <span>pci_find_bus</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>);</span>
	<span>P2SB_WRITE</span><span>(</span><span>byte</span><span>,</span> <span>P2SB_HIDE_OFFSET</span><span>,</span> <span>0</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: P2SB unhidden</span><span>\n</span><span>"</span><span>);</span>
<span>}</span>

<span>static</span> <span>void</span> <span>p2sb_hide</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
	<span>struct</span> <span>pci_bus</span> <span>*</span><span>p2sb_bus</span> <span>=</span> <span>pci_find_bus</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>);</span>
	<span>P2SB_WRITE</span><span>(</span><span>byte</span><span>,</span> <span>P2SB_HIDE_OFFSET</span><span>,</span> <span>1</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: P2SB hidden</span><span>\n</span><span>"</span><span>);</span>
<span>}</span>

<span>static</span> <span>int</span> <span>__init</span> <span>xdci_enable_init</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
	<span>p2sb_unhide</span><span>();</span>
	<span>check_psf</span><span>();</span>
	<span>p2sb_hide</span><span>();</span>
	<span>return</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre></div>






<p>After running it, I got:</p>

<div><pre><code>xdci: P2SB unhidden
xdci: PCR_PSFX_T0_SHDW_PCIEN for OTG is ffffffff
xdci: P2SB hidden
</code></pre></div>

<p>So, unhiding P2SB did not help: I still could not read the PSF2 PCR.</p>

<p><strong>Unhiding is for IOSF-P</strong>.
Later, I noticed the following note in the description of the <code>HIDE</code> P2SB bit in the datasheet:</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
When this bit is set, the P2SB will return 1s on any PCI Configuration Read on <strong>IOSF-P</strong>.
All other transactions, including PCI Configuration Writes, are unaffected by this.
This does not affect reads performed on the <strong>IOSF-SB</strong> interface.
</th>
	</tr>

</tbody></table>

<p>When I first read this, I didn‚Äôt pay attention to the mentions of IOSF-P and IOSF-SB.</p>

<p>But now it made sense: unhiding P2SB made no difference, as I was reading the PSF2 PCR through IOSF-SB.
Unhiding P2SB was only good for reading the data from the P2SB PCIe Configuration Space, like the <code>SBREG_BAR</code> register or the <code>HIDE</code> bit.</p>

<p>Thus, something else prevented me from reading the PSF register.</p>

<p><strong>PSF disconnected</strong>.
After a lot of tinkering, I discovered the reason: PSF was simply disconnected from the Sideband interface.
This was done by the <code>RemoveSidebandAccess</code> function <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/LibraryPrivate/PeiDxeSmmPchInitCommonLib/PchInitCommon.c#L284">defined</a> in <code>Pch/Library/Private/PeiDxeSmmPchInitCommonLib/PchInitCommon.c</code>:</p>

<div>
  <p>
This code is public as well.
</p>
</div>

<div id="bios-remove-sideband-off"><pre><code><span>VOID</span> <span>RemoveSidebandAccess</span> <span>(</span><span>VOID</span><span>)</span>
<span>{</span>
  <span>UINTN</span>                                 <span>P2sbBase</span><span>;</span>
  <span>BOOLEAN</span>                               <span>P2sbOrgStatus</span><span>;</span>

  <span>P2sbBase</span> <span>=</span> <span>MmPciBase</span> <span>(</span><span>DEFAULT_PCI_BUS_NUMBER_PCH</span><span>,</span>
                        <span>PCI_DEVICE_NUMBER_PCH_P2SB</span><span>,</span>
                        <span>PCI_FUNCTION_NUMBER_PCH_P2SB</span><span>);</span>
  <span>PchRevealP2sb</span> <span>(</span><span>P2sbBase</span><span>,</span> <span>&amp;</span><span>P2sbOrgStatus</span><span>);</span>

  <span>// Disable Sideband access for PSF and other things.</span>
  <span>MmioOr32</span> <span>(</span><span>P2sbBase</span> <span>+</span> <span>R_PCH_P2SB_EPMASK5</span><span>,</span>
            <span>BIT29</span> <span>|</span> <span>BIT28</span> <span>|</span> <span>BIT27</span> <span>/* PSF */</span> <span>|</span>
            <span>BIT26</span> <span>|</span> <span>BIT17</span> <span>|</span> <span>BIT16</span> <span>|</span> <span>BIT10</span> <span>|</span> <span>BIT1</span><span>);</span>

  <span>// ...</span>

  <span>// Lock the EPMASK registers.</span>
  <span>MmioOr8</span> <span>(</span><span>P2sbBase</span> <span>+</span> <span>R_PCH_P2SB_E0</span> <span>+</span> <span>2</span><span>,</span> <span>BIT1</span><span>);</span>

  <span>if</span> <span>(</span><span>!</span><span>P2sbOrgStatus</span><span>)</span> <span>{</span>
    <span>PchHideP2sb</span> <span>(</span><span>P2sbBase</span><span>);</span>
  <span>}</span>
<span>}</span>
</code></pre></div>






<p><code>RemoveSidebandAccess</code> did two things besides unhiding and hiding P2SB:</p>

<ol>
  <li>
    <p>Disconnected several Port IDs, including <code>PID_PSF2</code>, via the P2SB <code>EPMASK5</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsP2sb.h#L98">register</a>
(offset <code>0xC4</code>; ‚Äú<code>Endpoint Mask 5</code>: One hot mask for disabling IOSF-SB endpoint IDs 191-160‚Äù);</p>
  </li>
  <li>
    <p>Locked the <code>EPMASK</code> registers via the <code>MASKLOCK</code> bit (‚Äú<code>Endpoint Mask Lock</code>: Locks the value of the <code>EPMASK[0-7]</code> registers. Once this value is written to a one, it may only be cleared by a reset.‚Äù; bit #17) of the <code>P2SBC</code> <a href="https://github.com/tianocore/edk2-platforms/blob/14b8c793e685422bf32ada10acf74e0ff1cf52fc/Silicon/Intel/KabylakeSiliconPkg/Pch/Include/Register/PchRegsP2sb.h#L127">register</a> (offset <code>0xE0</code>).</p>
  </li>
</ol>

<p>
<code>BIT27</code> in the code corresponds to the <code>0xBB</code> Port ID, as <code>EPMASK5</code> counts Port IDs from <code>160</code>.
</p>

<p>
The <code>MASKLOCK</code> bit wasn‚Äôt mentioned in the PCH datasheet that I had, but it was <a href="https://edc.intel.com/content/www/us/en/design/products-and-solutions/processors-and-chipsets/comet-lake-u/intel-400-series-chipset-on-package-platform-controller-hub-register-database/p2sb-control-p2sbc-offset-e0/">referenced</a> on the Intel website, albeit for a different chipset version.
</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/psf-epmask5.jpg" title="EPMASK5 register in the PCH datasheet">
		
	
	
		<figcaption>EPMASK5 register in the PCH datasheet</figcaption>
	
</figure>

<p><strong>Checking disconnect</strong>.
To confirm my finding, I wrote the code to check the values of the <code>EPMASK5</code> and <code>P2SBC</code> registers and, just in case, to try overwriting them:</p>

<div id="kernel-p2sb-epmask-off"><pre><code><span>#define PID_PSF2		0xBB
</span>
<span>#define P2SB_EPMASK5_OFFSET	0xC4
#define P2SB_EPMASK5_PSF2_BIT	BIT(PID_PSF2 - 160)
</span>
<span>#define P2SB_MASKLOCK_OFFSET	(0xE0 + 2)
#define P2SB_MASKLOCK_BIT	BIT(1)
</span>
<span>void</span> <span>check_epmask</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
	<span>struct</span> <span>pci_bus</span> <span>*</span><span>p2sb_bus</span> <span>=</span> <span>pci_find_bus</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>);</span>

	<span>u32</span> <span>epmask5</span><span>;</span>
	<span>P2SB_READ</span><span>(</span><span>dword</span><span>,</span> <span>P2SB_EPMASK5_OFFSET</span><span>,</span> <span>&amp;</span><span>epmask5</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: EPMASK5 is %x</span><span>\n</span><span>"</span><span>,</span> <span>epmask5</span><span>);</span>
	<span>int</span> <span>epmask5_psf2_bit</span> <span>=</span> <span>!!</span><span>(</span><span>epmask5</span> <span>&amp;</span> <span>P2SB_EPMASK5_PSF2_BIT</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: PSF2 bit is %d</span><span>\n</span><span>"</span><span>,</span> <span>epmask5_psf2_bit</span><span>);</span>

	<span>u8</span> <span>masklock_byte</span><span>;</span>
	<span>P2SB_READ</span><span>(</span><span>byte</span><span>,</span> <span>P2SB_MASKLOCK_OFFSET</span><span>,</span> <span>&amp;</span><span>masklock_byte</span><span>);</span>
	<span>int</span> <span>masklock_bit</span> <span>=</span> <span>!!</span><span>(</span><span>masklock_byte</span> <span>&amp;</span> <span>P2SB_MASKLOCK_BIT</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: MASKLOCK is %d</span><span>\n</span><span>"</span><span>,</span> <span>masklock_bit</span><span>);</span>

	<span>masklock_byte</span> <span>&amp;=</span> <span>~</span><span>P2SB_MASKLOCK_BIT</span><span>;</span>
	<span>pr_err</span><span>(</span><span>"xdci: writing 0 to MASKLOCK</span><span>\n</span><span>"</span><span>);</span>
	<span>P2SB_WRITE</span><span>(</span><span>byte</span><span>,</span> <span>P2SB_MASKLOCK_OFFSET</span><span>,</span> <span>masklock_byte</span><span>);</span>

	<span>P2SB_READ</span><span>(</span><span>byte</span><span>,</span> <span>P2SB_MASKLOCK_OFFSET</span><span>,</span> <span>&amp;</span><span>masklock_byte</span><span>);</span>
	<span>masklock_bit</span> <span>=</span> <span>!!</span><span>(</span><span>masklock_byte</span> <span>&amp;</span> <span>P2SB_MASKLOCK_BIT</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: MASKLOCK is %d</span><span>\n</span><span>"</span><span>,</span> <span>masklock_bit</span><span>);</span>

	<span>epmask5</span> <span>&amp;=</span> <span>~</span><span>P2SB_EPMASK5_PSF2_BIT</span><span>;</span>
	<span>pr_err</span><span>(</span><span>"xdci: writing 0 to PSF2 bit</span><span>\n</span><span>"</span><span>);</span>
	<span>P2SB_WRITE</span><span>(</span><span>dword</span><span>,</span> <span>P2SB_EPMASK5_OFFSET</span><span>,</span> <span>epmask5</span><span>);</span>

	<span>P2SB_READ</span><span>(</span><span>dword</span><span>,</span> <span>P2SB_EPMASK5_OFFSET</span><span>,</span> <span>&amp;</span><span>epmask5</span><span>);</span>
	<span>epmask5_psf2_bit</span> <span>=</span> <span>!!</span><span>(</span><span>epmask5</span> <span>&amp;</span> <span>P2SB_EPMASK5_PSF2_BIT</span><span>);</span>
	<span>pr_err</span><span>(</span><span>"xdci: PSF2 bit is %d</span><span>\n</span><span>"</span><span>,</span> <span>epmask5_psf2_bit</span><span>);</span>
<span>}</span>

<span>static</span> <span>int</span> <span>__init</span> <span>xdci_enable_init</span><span>(</span><span>void</span><span>)</span>
<span>{</span>
	<span>p2sb_unhide</span><span>();</span>
	<span>check_epmask</span><span>();</span>
	<span>p2sb_hide</span><span>();</span>
	<span>return</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre></div>






<p>The result was:</p>

<div><pre><code>xdci: P2SB unhidden
xdci: EPMASK5 is 3c030402
xdci: PSF2 bit is 1
xdci: MASKLOCK is 1
xdci: writing 0 to MASKLOCK
xdci: MASKLOCK is 1
xdci: writing 0 to PSF2 bit
xdci: PSF2 bit is 1
xdci: P2SB hidden
</code></pre></div>

<p><strong>Fail</strong>.
So, the <code>PID_PSF2</code> IOSF-SB Port ID was disconnected, the register responsible for this was locked, and I could not unlock it.</p>

<p>Thus, I could not enable xDCI in PSF üò•</p>

<p>At that point, I decided that I had sunk enough time into this rabbit hole and moved on to trying a different approach.</p>

<p>
I nevertheless enjoyed learning about PCH, PMC, and PSF, and I don‚Äôt regret the time spent on this üòå
</p>

<p>
In the BIOS code, <code>RemoveSidebandAccess</code> is called at the end of the PEI stage by <code>PchOnEndOfPei</code> and only if the <code>SbAccessUnlock</code> bit is not set in <code>P2sbConfig</code>.
Thus, in theory, it might be possible to unlock IOSF-SB access to PSF2 by somehow changing the value of <code>SbAccessUnlock</code>, putting the laptop into suspend, and then waking it up.
I, however, didn‚Äôt explore this idea in detail.
</p>

<h3 id="-enabling-xdci-via-nvram">üíæ Enabling xDCI via NVRAM</h3>

<p>Having failed to implement a software solution, I wanted to at least figure out a way to enable xDCI without breaking the TPM and, more importantly, without requiring a Boot Guard bypass.
Such an approach could be applied to other laptops besides the vulnerable ThinkPad Carbon X1 6th Gen.</p>

<p><strong>Avoiding Boot Guard</strong>.
The change that would piss off Boot Guard was the <code>Advanced</code> page patch I had applied.
However, I only needed the <code>Advanced</code> page change the value of the <code>xDCI Support</code> setting.
So, perhaps I could somehow enable this setting without unlocking the <code>Advanced</code> page?</p>

<p>As the values of BIOS settings are preserved across reboots, they must be stored somewhere.
And changing these values through BIOS Setup does not trigger Boot Guard.</p>

<p>So, the idea that I had was to try directly changing the value for the <code>xDCI Support</code> setting.</p>

<p>For this, I had to figure out where the BIOS settings values are stored.</p>

<p><strong>NVRAM</strong>.
As it turned out, modern UEFI-compatible BIOS stores the values of its settings on the very same SPI chip as the BIOS binary, in the NVRAM region.</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
NVRAM (Non-Volatile Random-Access Memory) is a random-access memory that retains data without applied power.
NVRAM is where BIOS stores its configuration data, including BIOS settings.
Legacy BIOS relied on a separate volatile RAM chip that was powered by a CMOS (Complementary Metal‚ÄìOxide‚ÄìSemiconductor) battery when the main power was turned off.
In modern UEFI-compatible motherboards, a separate chip is not present.
Instead, the configuration data is stored in the so-called NVRAM region on the SPI chip alongside other UEFI data.
</th>
	</tr>

	<tr>
		<th></th>
		<th>Based on <a href="https://en.wikipedia.org/wiki/Nonvolatile_BIOS_memory">Non-volatile BIOS memory</a>, Wikipedia</th>
	</tr>

</tbody></table>

<p>Naturally, the value of the <code>xDCI Support</code> setting should be stored in NVRAM as well.</p>

<p>So, to change the setting value, I had to figure out where exactly on the SPI chip it was located.</p>

<p><strong>IFR</strong>.
Searching online revealed that a UEFI-compatible BIOS stores the description of its configuration settings in a special format called IFR.</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
UEFI Internal Form Representation (IFR) is a binary format that the UEFI Human Interface Infrastructure (HII) subsystem uses to store strings, forms, images, animations, and other things that are eventually supposed to end up on the BIOS Setup screen.
</th>
	</tr>

	<tr>
		<th></th>
		<th>What is this IFR thing about?, <a href="https://github.com/LongSoft/IFRExtractor-RS">IFRExtractor-RS</a></th>
	</tr>

</tbody></table>

<p>Thus, my plan was to check IFR to hopefully find the location of the <code>xDCI Support</code> setting.</p>

<p><strong>Extracting IFR</strong>.
I downloaded and built the <code>ifrextractor</code> <a href="https://github.com/LongSoft/IFRExtractor-RS.git">tool</a>:</p>

<div><pre><code><span>$ </span>git clone https://github.com/LongSoft/IFRExtractor-RS.git
<span>$ </span><span>cd </span>IFRExtractor-RS
<span>$ </span>cargo build
</code></pre></div>

<p>And extracted the information about the UEFI configuration settings from the <code>Setup</code> module:</p>

<div><pre><code><span>$ </span>./ifrextractor ./Setup.bin all
Extracting all UEFI HII form packages using all UEFI HII string packages
</code></pre></div>

<p>Inside a produced <code>Setup.bin.1.0.en-US.ifr.txt</code> file, I found the following:</p>

<div><pre><code>VarStoreEfi Guid: 4570B7F1-ADE8-4943-8DC3-406472842384, VarStoreId: 0x5,
  Attributes: 0x7, Size: 0x75F, Name: "PchSetup"

OneOf Prompt: "xDCI Support", Help: "Enable/Disable xDCI (USB OTG Device).",
  QuestionFlags: 0x10, QuestionId: 0x4D4, VarStoreId: 0x5,
  VarOffset: 0x40, Flags: 0x10, Size: 8, Min: 0x0, Max: 0x1, Step: 0x0
</code></pre></div>

<p>From this, I could see that the value of the <code>xDCI Support</code> BIOS setting was stored at offset <code>0x40</code> within the <code>PchSetup</code> storage area (note the matching <code>VarStoreId</code>).</p>

<p><strong>efivarfs</strong>.
While looking for information about how UEFI stores the values of IFR entries, I stumbled upon <code>efivarfs</code>.</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
<code>efivarfs</code> is a filesystem in the Linux kernel that enables users to create, delete, and modify UEFI variables.
<code>efivarfs</code> is typically and automatically mounted in <code>/sys/firmware/efi/efivars</code>.
</th>
	</tr>

	<tr>
		<th></th>
		<th><a href="https://wiki.gentoo.org/wiki/Efivarfs">efivarfs</a>, Gentoo Wiki</th>
	</tr>

</tbody></table>

<p><code>efivarfs</code> allowed me to verify whether the offset for <code>xDCI Support</code> I had found was correct.</p>

<p>Upon checking the <code>efivarfs</code> contents, I saw that there was an entry for each UEFI storage area, including one for <code>PchSetup</code>:</p>

<div><pre><code><span>$ </span><span>ls</span> /sys/firmware/efi/efivars/
...
PchSetup-4570b7f1-ade8-4943-8dc3-406472842384
...
</code></pre></div>

<p>Based on the <code>efivars</code> <a href="https://docs.kernel.org/filesystems/efivarfs.html">documentation</a>, the first 4 bytes of an <code>efivarfs</code> entry is the header.
Thus, the <code>xDCI Support</code> value should have been at the offset <code>0x44</code> within the entry for <code>PchSetup</code>.</p>

<p>Without xDCI enabled, the value at this offset was <code>00</code>:</p>

<div><pre><code><span>$ </span>xxd /sys/firmware/efi/efivars/PchSetup-4570b7f1-ade8-4943-8dc3-406472842384
...
00000040: 0100 0000 0000 0001 0101 0101 0101 0100  ................
...
</code></pre></div>

<p>But after enabling xDCI via the <code>Advanced</code> page in BIOS, the value changed to <code>01</code>, as expected:</p>

<div><pre><code><span>$ </span>xxd /sys/firmware/efi/efivars/PchSetup-4570b7f1-ade8-4943-8dc3-406472842384
...
00000040: 0100 0000 0100 0001 0101 0101 0101 0100  ................
...
</code></pre></div>

<p><strong>Can‚Äôt change from userspace</strong>.
Out of curiosity, I tried changing the value from userspace by overwriting the <code>/sys/firmware/efi/efivars/PchSetup-...</code> file.</p>

<p>The <code>PchSetup-...</code> file had the Immutable attribute set:</p>

<div><pre><code><span>$ </span>lsattr /sys/firmware/efi/efivars/PchSetup-...
<span>----i---------------</span> /sys/firmware/efi/efivars/PchSetup-...
</code></pre></div>

<p>So, I removed it via <code>sudo chattr -i</code> and then tried to overwrite the file‚Äôs contents.</p>

<p>Unfortunately, this produced a <code>Read-only file system</code> error.
After searching through the Linux kernel code for <code>efivarfs</code>, I found out that this error <a href="https://elixir.bootlin.com/linux/v6.5/source/drivers/firmware/efi/efi.c#L973">mapped</a> to <code>EFI_WRITE_PROTECTED</code> being returned from UEFI.</p>

<p>Essentially, BIOS rejected the attempt to overwrite <code>PchSetup</code>.
Too bad, but not surprising.</p>

<p>
Interestingly, the <code>Attributes</code> value <code>0x7</code> for <code>PchSetup</code> in IFR includes the <code>EFI_VARIABLE_RUNTIME_ACCESS</code> <a href="https://uefi.org/sites/default/files/resources/UEFI_Spec_2_10_Aug29.pdf">flag</a> (<code>0x4</code>).
This should supposedly mean that the <code>PchSetup</code> value can be changed after boot.
Thus, it‚Äôs unclear to me why changing it via <code>efivarfs</code> fails.
I also tried changing the value from EFI Shell via <a href="https://github.com/chipsec/chipsec">chipsec</a>, but that produced the same error.
</p>

<p><strong>Patching BIOS</strong>.
Returning to my initial plan, I wanted to try changing the value of <code>xDCI Support</code> in the NVRAM region without unlocking the <code>Advanced</code> page.</p>

<p>Instead of figuring out where the NVRAM region was located on the SPI chip, I took a shortcut.</p>

<p>I took the original BIOS image I had read via the SPI programmer (without the <code>Advanced</code> page and the TPM patches) and searched for the <code>0100 0000 0000 0001 0101 0101 0101 0100</code> byte sequence (the one at offset <code>0x40</code> within <code>PchSetup</code>) with a hex editor.
Luckily, this produced only a single hit.</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/bios-bytes.jpg" title="Searching for xDCI-related byte sequence">
		
	
	
		<figcaption>Searching for xDCI-related byte sequence</figcaption>
	
</figure>

<p>I patched the sequence to enable the xDCI-related bit, flashed the image back to the SPI chip, and booted the laptop.</p>

<p><strong>Success</strong>.
Surprisingly, this worked right away!
After booting, I could see the xDCI device and the <code>dwc3</code> driver was loaded ü•≥</p>

<p><strong>Done</strong>.
With this, I concluded my attempts to enable xDCI.
The NVRAM patching approach still required reflashing the SPI chip, but at least it didn‚Äôt break the TPM and needed no Boot Guard bypass.
I decided that this was good enough and moved on.</p>

<p>
Initially, I patched NVRAM with BIOS version 1.37 and later updated it to 1.61.
As the updater preserves the BIOS settings values, I did not have to apply the patch again.
</p>

<h2 id="-using-xdci">üöÄ Using xDCI</h2>

<p>Once I had xDCI working, I could finally test it with a few USB emulation tools that are based on the Linux kernel USB Gadget subsystem.</p>

<p>
All of the examples below assume that xDCI is enabled through BIOS, the role is switched to <code>device</code> via <code>intel_xhci_usb_sw-role-switch</code>, and a <code>VBUS</code>-disconnected cable connects the xDCI-enabled port to a USB host.
</p>

<p>
The usage examples listed here are technically not specific to xDCI.
Everything would work the same regardless of the used UDC (minding the fact that some UDCs don‚Äôt support certain hardware features).
Nevertheless, I will show these examples to illustrate the possibilities of using xDCI.
</p>

<h3 id="-legacy-gadget-drivers">üñ± Legacy gadget drivers</h3>

<p>The Linux kernel USB Gadget subsystem provides a variety of interfaces for emulating USB devices.</p>

<p><strong>Legacy gadget drivers</strong>.
One of them is the <a href="https://elixir.bootlin.com/linux/latest/source/drivers/usb/gadget/legacy">legacy gadget drivers</a>.
These are Linux kernel modules that emulate USB devices when loaded.
Most of them emulate a USB device of a specific class, like a HID (Human Interface Device) or a mass storage drive.</p>

<p>
These gadget drivers are called ‚Äúlegacy‚Äù because they existed before the introduction of the so-called <a href="https://lwn.net/Articles/395712/">‚Äúcomposite‚Äù framework</a>.
Each legacy gadget driver implements a single gadget function (USB class).
In turn, the composite framework allows combining multiple gadget functions within the same device.
Nowadays, most legacy gadget drivers (except for <a href="https://elixir.bootlin.com/linux/latest/source/drivers/usb/gadget/legacy/inode.c">GadgetFS</a> and <a href="https://github.com/xairy/raw-gadget">Raw Gadget</a>) are just wrappers for the gadget function implementations provided by the composite framework.
</p>

<p>
The <code>g_zero</code> module that I used for the <a href="#-checking-xdci">initial xDCI testing</a> is one of the legacy gadget drivers.
</p>

<p><strong>Mass storage gadget</strong>.
I decided to try emulating a mass storage drive through xDCI via one of the legacy gadget drivers.</p>

<p>For this, the USB Gadget subsystem offers the <code>g_mass_storage</code> module.
This module accepts an argument that specifies the filesystem image that will be exposed to the USB host.
Once loaded, this module emulates a USB drive through the first UDC it finds on the system (just like <code>g_zero</code>).</p>

<p>I prepared a floppy disk‚Äìsized FAT image:</p>

<div><pre><code><span>$ </span><span>dd </span><span>if</span><span>=</span>/dev/zero <span>of</span><span>=</span>disk.img <span>bs</span><span>=</span>512 <span>count</span><span>=</span>2880
<span>$ </span>mkfs.fat ./disk.img
<span>$ </span><span>sudo mkdir</span> /mnt/drive
<span>$ </span><span>sudo </span>mount ./disk.img /mnt/drive <span>-o</span> loop
<span>$ </span><span>echo</span> <span>"Hi from xDCI"</span> | <span>sudo tee</span> /mnt/drive/file.txt
<span>$ </span><span>sudo </span>umount /mnt/drive
</code></pre></div>

<p>And loaded the <code>g_mass_storage</code> module with the created <code>disk.img</code> as the <code>file</code> argument to start emulating a USB mass storage device:</p>

<div><pre><code><span>$ </span><span>sudo </span>modprobe g_mass_storage <span>file</span><span>=</span>./disk.img <span>stall</span><span>=</span>0
</code></pre></div>

<p><strong>Worked</strong>.
The emulation worked just as expected.
The drive got auto-mounted on the USB host, and I could see the contents of <code>file.txt</code> ü•≥</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/example-ms.jpg" title="Emulating mass storage drive via xDCI">
		
	
	
		<figcaption>Emulating mass storage drive via xDCI</figcaption>
	
</figure>

<p>A nifty way to transfer files from an xDCI-enabled laptop in case you forgot to bring a USB drive üòÑ</p>

<p>
To stop emulating the USB drive, unload the module:
</p>

<div><pre><code><span>$ </span><span>sudo </span>modprobe <span>-r</span> g_mass_storage
</code></pre></div>

<p>
It should also be possible to emulate a USB device with multiple different classes by using the <a href="https://lwn.net/Articles/395712/">composite framework</a> with xDCI.
However, I didn‚Äôt try this myself, so I won‚Äôt provide a usage example.
</p>

<h3 id="-raw-gadget">ü§ñ Raw Gadget</h3>

<p>The next thing I wanted to test was <a href="https://github.com/xairy/raw-gadget">Raw Gadget</a>.</p>

<p>As I mentioned in the <a href="#-introduction">introduction</a>, Raw Gadget is a Linux kernel module for emulating highly customizable USB devices.
Technically, it‚Äôs one of the legacy gadget drivers (as it‚Äôs not based on the composite framework), but it provides much greater flexibility than emulating a USB device with a specific class.</p>

<p>
Running Raw Gadget with xDCI for the first time was very exciting, as my desire to work on Raw Gadget on my laptop without external hardware was what conceived this project üòÑ
</p>

<p><strong>Keyboard.</strong>
I downloaded, built, and loaded the Raw Gadget module on my laptop:</p>

<div><pre><code><span>$ </span>git clone https://github.com/xairy/raw-gadget.git
<span>$ </span><span>cd </span>raw-gadget/raw_gadget/
<span>$ </span>make
<span>$ </span>./insmod.sh
</code></pre></div>
<p>And then built and ran the example to emulate a keyboard via xDCI:</p>

<div><pre><code><span>$ </span><span>cd </span>raw-gadget/examples/
<span>$ </span>make
<span>$ </span><span>sudo</span> ./keyboard dwc3.1.auto dwc3-gadget
</code></pre></div>

<p><strong>Fail</strong>.
Unfortunately, the emulation failed.
The emulation code was not able to complete the enumeration process and froze when handling the <code>SET_CONFIGURATION</code> USB request üò¢:</p>

<div id="raw-gadget-fail-off">

  <div><pre><code><span>$ </span><span>sudo</span> ./keyboard dwc3.1.auto dwc3-gadget
event: connect, length: 0
...
event: control, length: 8
  bRequestType: 0x0 <span>(</span>OUT<span>)</span>, bRequest: 0x9, wValue: 0x1, wIndex: 0x0, wLength: 0
  <span>type</span> <span>=</span> USB_TYPE_STANDARD
  req <span>=</span> USB_REQ_SET_CONFIGURATION
ep0: ep_int_in enabled: 1
ep0: spawned ep_int_in thread
ep0: transferred 0 bytes <span>(</span>out<span>)</span>
<span># Froze here...</span>
</code></pre></div>
  <div>
  <p>
Click the switch to see the full log.
</p>
</div>

</div>






<p>
<code>SET_CONFIGURATION</code> is a USB request that the USB host sends to the USB device once the device completes the enumeration process
(the process during which the host asks the device for its descriptors to know what kind of device was plugged in).
</p>

<p><strong>Issue</strong>.
After debugging and a lengthy <a href="https://lore.kernel.org/linux-usb/CA+fCnZcQSYy63ichdivAH5-fYvN2UMzTtZ--h=F6nK0jfVou3Q@mail.gmail.com/T/#u">discussion</a> with the Linux kernel maintainers, I figured out the issue.</p>

<p>As it turned out, <code>dwc3</code> and several other UDC drivers incorrectly used the Gadget subsystem API.
They assumed that a 0-length control request like SET_CONFIGURATION can be acknowledged immediately without the gadget driver‚Äôs confirmation.
And Raw Gadget did not expect that.</p>

<p>
I won‚Äôt go deep into explaining the issue, as this would require covering a lot of the USB protocol and the Gadget subsystem internals.
If you‚Äôre interested in the details, see the <a href="https://lore.kernel.org/linux-usb/CA+fCnZcQSYy63ichdivAH5-fYvN2UMzTtZ--h=F6nK0jfVou3Q@mail.gmail.com/T/#u">discussion</a> and the <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=3551ff7c5cfff4dc27fdcd14fa286edc08d78088">documentation patch</a>.
</p>

<p><strong>Fix</strong>.
A proper fix for this issue would be to change the behavior of all the affected UDC drivers.
However, after looking into this, I decided that fixing all of them would require quite a lot of work.</p>

<div>
  <p>
Both fixes are now in the mainline kernel.
</p>
</div>

<p>So, instead, I just applied a <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=cf9f7a6ee7b1f53f9ae13da55585b7d16aee2460">workaround patch</a> to Raw Gadget.
And I noticed that GadgetFS also suffered from this issue, so I <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=fc85c59b85d111f51b58ecf08485fa74ac5471cd">fixed it up</a> as well.</p>

<p><strong>Success</strong>.
Once I applied the workaround, the keyboard was emulated successfully ü•≥:</p>

<div id="raw-gadget-success-off"><pre><code><span>$ </span><span>sudo</span> ./keyboard dwc3.1.auto dwc3-gadget
event: connect, length: 0
...
event: control, length: 8
  bRequestType: 0x0 <span>(</span>OUT<span>)</span>, bRequest: 0x9, wValue: 0x1, wIndex: 0x0, wLength: 0
  <span>type</span> <span>=</span> USB_TYPE_STANDARD
  req <span>=</span> USB_REQ_SET_CONFIGURATION
ep0: ep_int_in enabled: 1
ep0: spawned ep_int_in thread
ep0: transferred 0 bytes <span>(</span>out<span>)</span>
event: control, length: 8
  bRequestType: 0x80 <span>(</span>IN<span>)</span>, bRequest: 0x6, wValue: 0x303, wIndex: 0x409, wLength: 255
  <span>type</span> <span>=</span> USB_TYPE_STANDARD
  req <span>=</span> USB_REQ_GET_DESCRIPTOR
  desc <span>=</span> USB_DT_STRING
ep0: transferred 4 bytes <span>(</span><span>in</span><span>)</span>
...
event: control, length: 8
  bRequestType: 0x21 <span>(</span>OUT<span>)</span>, bRequest: 0x9, wValue: 0x200, wIndex: 0x0, wLength: 1
  <span>type</span> <span>=</span> USB_TYPE_CLASS
  req <span>=</span> HID_REQ_SET_REPORT
ep0: transferred 1 bytes <span>(</span>out<span>)</span>
ep_int_in: key down: 8
ep_int_in: key up: 8
ep_int_in: key down: 8
ep_int_in: key up: 8
ep_int_in: key down: 8
ep_int_in: key up: 8
...
</code></pre></div>






<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/example-rg.jpg" title="Result of running Raw Gadget keyboard example with xDCI">
		
	
	
		<figcaption>Result of running Raw Gadget keyboard example with xDCI</figcaption>
	
</figure>

<p>From then on, I could run Raw Gadget directly on my laptop.
No more need for Raspberry Pis or EC3380-AB.
Yay! üòÑ</p>

<p>Once I had Raw Gadget working, I moved on to testing a few Raw Gadget‚Äìbased tools.</p>

<h3 id="-syzkaller">üß∞ syzkaller</h3>

<p>One of the tools that rely on Raw Gadget is <a href="https://github.com/google/syzkaller">syzkaller</a> ‚Äî a coverage-guided kernel fuzzer.
You can check out my <a href="https://xairy.io/articles/syzkaller-external-network">Looking for Remote Code Execution bugs in the Linux kernel</a> article for its overview.</p>

<figure>
	
		
		<a href="https://xairy.io/articles/syzkaller-external-network">
		
			<img src="https://xairy.io/images/content/syzkaller-external-network/cover.jpg" title="">
		
		</a>
		
	
	
</figure>

<p><strong>USB fuzzing</strong>.
syzkaller uses Raw Gadget for <a href="https://github.com/google/syzkaller/blob/master/docs/linux/external_fuzzing_usb.md">externally fuzzing</a> the Linux kernel USB stack.
Initially, I developed Raw Gadget specifically for its use in syzkaller.</p>

<p>With xDCI, I could run syzkaller directly on my laptop to fuzz an external USB host.
However, syzkaller heavily relies on code coverage feedback to guide its fuzzing process.
While collecting coverage from an external system would theoretically be possible to implement, I didn‚Äôt want to get into this.</p>

<p><strong>USB reproducers</strong>.
Instead, I wanted to try running a reproducer for one of the USB bugs syzkaller found.</p>

<p>
You can check the syzbot dashboard to view all of the <a href="https://syzkaller.appspot.com/upstream?manager=ci2-upstream-usb">reported</a> and <a href="https://syzkaller.appspot.com/upstream/fixed?manager=ci2-upstream-usb">fixed</a> USB bugs that syzkaller discovered in the Linux kernel.
</p>

<p><strong>Patching syzkaller</strong>.
By default, syzkaller relies on the <a href="https://github.com/xairy/raw-gadget/tree/master/dummy_hcd">Dummy HCD/UDC</a> module for fuzzing USB.</p>

<table>
	<tbody><tr>
		<th>¬´</th>
		<th>
Dummy HCD/UDC is a module that sets up virtual USB Device and Host controllers that are connected to each other inside the kernel.
This module allows connecting USB devices emulated from userspace through any of the Gadget subsystem interfaces (Raw Gadget, GadgetFS, etc.) directly to the underlying kernel.
</th>
	</tr>

	<tr>
		<th></th>
		<th><a href="https://github.com/xairy/raw-gadget/tree/master/dummy_hcd">Dummy HCD/UDC Kernel Module</a>, Raw Gadget repository</th>
	</tr>

</tbody></table>

<p>As I wanted to make syzkaller use xDCI instead, I patched the code that specifies the used UDC:</p>

<div><pre><code><span>diff</span> <span>--</span><span>git</span> <span>a</span><span>/</span><span>executor</span><span>/</span><span>common_usb_linux</span><span>.</span><span>h</span> <span>b</span><span>/</span><span>executor</span><span>/</span><span>common_usb_linux</span><span>.</span><span>h</span>
<span>index</span> <span>b706663f8</span><span>..</span><span>a0ce15293</span> <span>100644</span>
<span>---</span> <span>a</span><span>/</span><span>executor</span><span>/</span><span>common_usb_linux</span><span>.</span><span>h</span>
<span>+++</span> <span>b</span><span>/</span><span>executor</span><span>/</span><span>common_usb_linux</span><span>.</span><span>h</span>
<span>@@</span> <span>-</span><span>303</span><span>,</span><span>9</span> <span>+</span><span>303</span><span>,</span><span>7</span> <span>@@</span> <span>static</span> <span>volatile</span> <span>long</span> <span>syz_usb_connect_impl</span><span>(</span><span>uint64</span> <span>speed</span><span>,</span> <span>uint64</span> <span>dev_len</span><span>,</span> <span>const</span> <span>ch</span>

 	<span>// TODO: consider creating two dummy_udc's per proc to increace the chance of</span>
 	<span>// triggering interaction between multiple USB devices within the same program.</span>
<span>-</span>	<span>char</span> <span>device</span><span>[</span><span>32</span><span>];</span>
<span>-</span>	<span>sprintf</span><span>(</span><span>&amp;</span><span>device</span><span>[</span><span>0</span><span>],</span> <span>"dummy_udc.%llu"</span><span>,</span> <span>procid</span><span>);</span>
<span>-</span>	<span>int</span> <span>rv</span> <span>=</span> <span>usb_raw_init</span><span>(</span><span>fd</span><span>,</span> <span>speed</span><span>,</span> <span>"dummy_udc"</span><span>,</span> <span>&amp;</span><span>device</span><span>[</span><span>0</span><span>]);</span>
<span>+</span>	<span>int</span> <span>rv</span> <span>=</span> <span>usb_raw_init</span><span>(</span><span>fd</span><span>,</span> <span>speed</span><span>,</span> <span>"dwc3-gadget"</span><span>,</span> <span>"dwc3.1.auto"</span><span>);</span>
 	<span>if</span> <span>(</span><span>rv</span> <span>&lt;</span> <span>0</span><span>)</span> <span>{</span>
 		<span>debug</span><span>(</span><span>"syz_usb_connect: usb_raw_init failed with %d</span><span>\n</span><span>"</span><span>,</span> <span>rv</span><span>);</span>
 		<span>return</span> <span>rv</span><span>;</span>
</code></pre></div>

<p><strong>Running reproducer</strong>.
I chose to run one of the reproducers for the <a href="https://syzkaller.appspot.com/bug?extid=12002a39b8c60510f8fb">WARNING in smsusb_start_streaming/usb_submit_urb</a> bug:</p>

<div>
  <p>
Program split into multiple lines for readability.
</p>
</div>

<div><pre><code><span>syz_usb_connect</span><span>(</span><span>0x0</span><span>,</span> <span>0x36</span><span>,</span> <span>&amp;(</span><span>0x7f0000000000</span><span>)=</span><span>ANY</span><span>=[@</span><span>ANYBLOB</span><span>=</span><span>"
  12010000d39262087f180002311f00000001090224000100000000
  09040000024b92160009050ba32b00000000090582ff00ffff0000"</span><span>],</span> <span>0x0</span><span>)</span>
</code></pre></div>

<p>For running reproducers, syzkaller provides a <code>syz-execprog</code> tool.</p>

<p>To avoid having to run <code>syz-execprog</code> as root, I changed the permissions on the <code>/dev/raw-gadget</code> virtual device file Raw Gadget exposes to userspace:</p>

<div><pre><code><span>$ </span><span>sudo chown </span>user:user /dev/raw-gadget
</code></pre></div>

<p>Then, I built <code>syz-execprog</code> and ran the reproducer:</p>

<div><pre><code><span>$ </span>make execprog executor
<span>$ </span><span>cd</span> ./bin/linux_amd64/
<span>$ </span>./syz-execprog <span>-enable</span><span>=</span>usb repro.prog
</code></pre></div>

<p>
See the syzkaller documentation on how to <a href="https://github.com/google/syzkaller/blob/master/docs/linux/setup.md">set it up</a>.
</p>

<p><strong>Bug triggered</strong>.
This worked without any issues, and the reproducer triggered the <code>WARNING</code> on the laptop with the <code>5.15.0-91-generic</code> Ubuntu kernel I used as the host ü•≥:</p>

<div id="ubuntu-warning-off">

  <div><pre><code>------------[ cut here ]------------
usb 3-9: BOGUS urb xfer, pipe 3 != type 1
WARNING: at drivers/usb/core/urb.c:502 usb_submit_urb+0x473/0x6d0
...
Call Trace:
 smsusb_submit_urb+0x7e/0xb0 [smsusb]
 smsusb_start_streaming+0x39/0x82 [smsusb]
 smsusb_init_device+0x368/0x426 [smsusb]
 smsusb_probe+0x2ce/0x31f [smsusb]
 usb_probe_interface+0xeb/0x2b0
 ...
 hub_event+0x1eb/0x430
 process_one_work+0x228/0x3d0
 worker_thread+0x53/0x420
 kthread+0x127/0x150
 ret_from_fork+0x1f/0x30
---[ end trace 6c8fe15158d398c6 ]---
</code></pre></div>
  <div>
  <p>
Click the switch to see the full WARNING log.
</p>
</div>

</div>






<p>
This particular bug is just a <code>WARNING</code> caused by the <code>smsusb</code> driver missing validation for USB endpoint types; nothing harmful.
</p>

<h3 id="-facedancer">üíÉ Facedancer</h3>

<p>Another thing I wanted to try with Raw Gadget and xDCI is running <a href="https://github.com/greatscottgadgets/Facedancer">Facedancer</a> directly on my laptop without any external hardware.</p>

<p>
<a href="https://github.com/greatscottgadgets/Facedancer">Facedancer</a> is a Python framework for emulating USB devices via a range of hardware solutions, including <a href="https://greatscottgadgets.com/greatfet/">Great FET</a> and not-yet-released-but-highly-awaited <a href="https://greatscottgadgets.com/cynthion/">Cynthion</a>.
</p>



<p>
Facedancer21 was what enabled me to write my very first Linux kernel <a href="https://xairy.io/articles/cve-2016-2384">exploit</a> and also set me on the path of fiddling with <a href="https://github.com/xairy/usb-hacking">USB security</a> üòå
</p>



<p><strong>Backend</strong>.
For running Facedancer with Raw Gadget, there‚Äôs a prototype of a Raw Gadget‚Äìbased <a href="https://github.com/xairy/raw-gadget#facedancer-backend">backend</a>.
This prototype relies on a few out-of-tree Raw Gadget <a href="https://github.com/xairy/raw-gadget/commits/dev/">patches</a>, but it already works!</p>

<p>
I‚Äôm yet to submit the backend to the mainline Facedancer repository.
Before upstreaming, I need to finalize the Raw Gadget patches, and I‚Äôll also likely first wait for the <a href="https://github.com/greatscottgadgets/Facedancer/issues/79">3.0 Facedancer release</a>.
</p>

<p><strong>Rubber Ducky</strong>.
To test Facedancer with Raw Gadget and xDCI, I rebuilt and reloaded the Raw Gadget module with the out-of-tree patches, and ran the <code>rubber-ducky.py</code> example:</p>

<div><pre><code><span>$ </span><span>sudo chown </span>user:user /dev/raw-gadget
<span>$ </span><span>export </span><span>BACKEND</span><span>=</span>rawgadget
<span>$ </span><span>export </span><span>RG_UDC_DRIVER</span><span>=</span>dwc3-gadget
<span>$ </span><span>export </span><span>RG_UDC_DEVICE</span><span>=</span>dwc3.1.auto
<span>$ </span>./examples/rubber-ducky.py
INFO    | rubber-ducky   | Beginning message typing demo...
INFO    | rawgadget      | gadget resumed
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>12 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | gadget resumed
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>12 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>9 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>22 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>4 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>30 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>16 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>14 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>0 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | ep_enable: <span>rv</span><span>=</span>5
INFO    | rawgadget      | configured
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>3 len<span>(</span>data<span>)=</span>a <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>0 len<span>(</span>data<span>)=</span>14 <span>blocking</span><span>=</span>False
INFO    | rawgadget      | send_on_endpoint: <span>ep_num</span><span>=</span>3 len<span>(</span>data<span>)=</span>a <span>blocking</span><span>=</span>False
...
</code></pre></div>

<p>The example worked without a hitch ü•≥</p>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/example-facedancer.jpg" title="Result of running Facedancer Rubber Ducky example with Raw Gadget and xDCI">
		
	
	
		<figcaption>Result of running Facedancer Rubber Ducky example with Raw Gadget and xDCI</figcaption>
	
</figure>

<p><strong>Yay</strong>.
By itself, Raw Gadget allows running Facedancer on Linux-based boards (minding the Raw Gadget <a href="https://github.com/xairy/raw-gadget?tab=readme-ov-file#limitations">limitations</a>), which is quite cool.
But combined with xDCI, it‚Äôs possible to run Facedancer directly on a PC without any external hardware at all.
Insane! üò±</p>

<p>
Another Raw Gadget‚Äîbased tool I successfully ran with xDCI was <a href="https://github.com/AristoChen/usb-proxy">USB Proxy</a> by <a href="https://github.com/AristoChen">Aristo Chen</a>.
I won‚Äôt provide the instructions here, as the article is already quite long.
With xDCI, this tool allows turning the laptop into a USB sniffer or a USB Man-in-the-Middle attack tool.
</p>

<h2 id="-summary">üóÉ Summary</h2>

<figure>
	
		
			<img src="https://xairy.io/images/content/thinkpad-xdci/xdci-emulation.jpg" title="ThinkPad X1 Carbon 6th Gen emulates a USB device for ThinkPad X1 Carbon 10th Gen via xDCI">
		
	
	
		<figcaption>ThinkPad X1 Carbon 6th Gen emulates a USB device for ThinkPad X1 Carbon 10th Gen via xDCI</figcaption>
	
</figure>

<p><strong>Introduction</strong>.
While working on <a href="https://github.com/xairy/raw-gadget">Raw Gadget</a>, I <a href="#-introduction">noticed</a> a suspicious <code>/sys/class/usb_role/intel_xhci_usb_sw-role-switch</code> file on my ThinkPad X1 Carbon 6th Gen laptop.
Finding this file seemingly implied that the xHCI device on my laptop could be switched into the <code>device</code> mode and be used to emulate USB devices.</p>

<p><strong>Investigation</strong>.
Upon <a href="#-reading-kernel-code">checking</a> the Linux kernel source code and <a href="#-searching-online">reading</a> through a related mailing list <a href="https://lore.kernel.org/all/CAGR4S9HQiZCsA7Y5_47j-xBOkydKiT2Exam=36L=-vwRjt+UWA@mail.gmail.com/t/#u">discussion</a>, I found out that some Intel systems indeed support enabling the so-called xDCI controller for emulating USB devices.
On my laptop, this controller was <a href="#-checking-pcie-and-acpi">not present</a> in the list of PCIe devices, but <a href="#-checking-bios">there was</a> a hidden <code>xDCI Support</code> setting in BIOS.</p>

<p><strong>Enabling xDCI</strong>.
Then, I took three approaches to try enabling xDCI:</p>

<ol>
  <li>
    <p>Successfully <a href="#-enabling-xdci-via-advanced-settings">via</a> unlocking the <code>Advanced</code> BIOS settings page and changing the value of <code>xDCI Support</code>.
This required reflashing the SPI chip on my laptop and patching BIOS to unlock the <code>Advanced</code> page and bypass Boot Guard.</p>

    <p>Once I enabled xDCI, I <a href="#-checking-xdci">managed</a> to find the xDCI-enabled port on my laptop, make a custom <code>VBUS</code>-disconnected USB cable, and successfully emulate a testing USB device through xDCI;</p>
  </li>
  <li>
    <p>Unsuccessfully <a href="#-attempting-to-enable-xdci-via-pch">via</a> PCH.
Within this approach, I tried to reconfigure the PCH registers to enable xDCI.
I <a href="#-enabling-xdci-in-pmc">managed</a> to reconfigure PMC by relying on missing register locking on the wake-up-from-suspend path.
However, I <a href="#-enabling-xdci-in-psf">failed</a> to reconfigure PSF, as PSF was disconnected from IOSF-SB by BIOS during boot;</p>
  </li>
  <li>
    <p>Successfully <a href="#-enabling-xdci-via-nvram">via</a> patching NVRAM.
For this, I patched the <code>xDCI Support</code> value in NVRAM on the SPI chip directly.
This still required reflashing the SPI chip but did not need a Boot Guard bypass.
Thus, this approach should be portable to other systems besides my laptop to enable xDCI.</p>
  </li>
</ol>

<p><strong>Using xDCI</strong>.
In the last part, I <a href="#-using-xdci">showed</a> a few usage scenarios for xDCI:</p>

<ul>
  <li>
    <p>First, I <a href="#-legacy-gadget-drivers">demonstrated</a> how to use the <code>g_mass_storage</code> legacy gadget driver to emulate a USB mass storage drive;</p>
  </li>
  <li>
    <p>Then, I <a href="#-raw-gadget">managed</a> to get <a href="https://github.com/xairy/raw-gadget">Raw Gadget</a> working with xDCI and used them to emulate a USB keyboard.
This required applying a <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=cf9f7a6ee7b1f53f9ae13da55585b7d16aee2460">workaround patch</a> to Raw Gadget to make it compatible with the <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=3551ff7c5cfff4dc27fdcd14fa286edc08d78088">buggy</a> <code>dwc3</code> driver used for xDCI;</p>
  </li>
  <li>
    <p>After that, I successfully <a href="#-syzkaller">ran</a> a reproducer for one of the syzkaller-found <a href="https://syzkaller.appspot.com/bug?extid=12002a39b8c60510f8fb">bugs</a> to emulate an improper USB device through xDCI and triggered a <code>WARNING</code> on a Linux kernel host;</p>
  </li>
  <li>
    <p>Finally, I <a href="#-facedancer">showed</a> how to use the Raw Gadget‚Äìbased Facedancer <a href="https://github.com/xairy/raw-gadget#facedancer-backend">backend</a> with xDCI to emulate a USB keyboard via the <code>rubber-ducker.py</code> Facedancer example.</p>
  </li>
</ul>

<p>Emulating USB devices in all shown examples required no hardware besides my laptop.</p>

<h2 id="-afterword">üìù Afterword</h2>

<p><strong>Motivation</strong>.
Even though this project was a bit of a spin-off from my usual expertise areas, I really enjoyed working on it and learning about BIOS and PCH internals in particular üòÑ</p>

<p>Once I found that USB role-switching file on my laptop, I could not stop thinking about the possibility of it being functional.
Luckily, it indeed was üòä</p>

<p>Managing to turn a commonly-used laptop into a programmable USB device feels like a good accomplishment ü•≥</p>

<p><strong>Other machines</strong>.
I specifically targeted my ThinkPad X1 Carbon 6th Gen laptop where I found the file, but I suspect enabling xDCI should also be possible on other PCs.</p>

<p>In the simplest case, this might be as easy as turning on xDCI in BIOS settings.
This should just work if there‚Äôs proper ACPI and role-switching support and the xDCI-enabled port is wired to the external casing.</p>

<p>As for other ThinkPads in particular, enabling xDCI should also not be a problem. 
Although, this will likely require reflashing the SPI chip, as the xDCI BIOS setting is hidden.
But at least, with the NVRAM approach, this will not require a Boot Guard bypass.</p>

<p>
I briefly looked at the ThinkPad X1 Carbon <strong>10th</strong> Gen laptop but failed to find the SPI chip.
Perhaps the chip is located on the bottom side of the motherboard, which I did not check.
</p>

<p>
Note that the SPI chip on some modern systems might be protected from reflashing via RPMC (Replay Protected Monotonic Counter).
The chips that support this feature have ‚ÄúR‚Äù in their name, like ‚ÄúW25<strong>R</strong>128FW‚Äù.
</p>

<p><strong>Software approaches</strong>.
I also believe it should be possible to enable xDCI purely via software.
Even though I failed to do it by reconfiguring PCH, there are other approaches.</p>

<p>One of them would be to exploit a BIOS bug to flip the xDCI-related NVRAM variable.
For example, this can likely be done by <a href="https://binarly.io/posts/inside_the_logofail_poc_from_integer_overflow_to_arbitrary_code_execution/index.html">exploiting</a> the <a href="https://binarly.io/posts/finding_logofail_the_dangers_of_image_parsing_during_system_boot/">LogoFAIL</a> vulnerability found by the Binarly team.</p>

<p>Another idea that comes to mind is using DMA to <a href="https://github.com/ufrisk/pcileech/wiki/Target-UEFI">attack BIOS</a> during boot.
This way, it might be possible to execute arbitrary code within BIOS and enable xDCI.
Even though some modern systems protect BIOS from DMA, others might be vulnerable.</p>

<p><strong>Clickbait</strong>.
Using the word ‚Äúsecret‚Äù in the title was a mere attempt at clickbait üòå
I don‚Äôt have any reason to believe that Lenovo deliberately keeps the knowledge about xDCI functionality private.
It‚Äôs likely rather just an undocumented feature.</p>

<p><strong>Acknowledgements</strong>.
Many thanks to those who willingly or unknowingly helped me with this project:</p>

<ul>
  <li>to Dmitry Mikushin, Heikki Krogerus, and Felipe Balbi for following through with the mailing list discussion about xHCI/xDCI role switching;</li>
  <li>to <a href="https://brs.im/en/">Sergey Korablin</a> for helping me with soldering and taking hardware pictures;</li>
  <li>to <a href="https://twitter.com/h0t_max">Maxim Goryachy</a> for suggesting the PCH approach, answering my countless questions about BIOS, and giving feedback on the article;</li>
  <li>to Alan Stern and Thinh Nguyen for looking into the <code>dwc3</code> issue I reported and reviewing the Raw Gadget workaround;</li>
  <li>to <a href="https://twitter.com/a13xp0p0v">Alexander Popov</a> for reviewing the article;</li>
  <li>and to everyone else whose work is referenced in this article üíú</li>
</ul>

<p>While I failed to implement a software-only approach, I‚Äôm very happy with the result.
Now, I can run Raw Gadget on my laptop without having to deal with external hardware üòÑ</p>

<h3>üíú Thank you for reading!</h3>



<h3 id="-about-me">üê± About me</h3>

<p>I‚Äôm a security researcher and a software engineer focusing on the Linux kernel.</p>

<p>I contributed to several security-related Linux kernel subsystems and tools, including
<a href="https://www.kernel.org/doc/html/latest/dev-tools/kasan.html">KASAN</a> ‚Äî a fast dynamic bug detector,
<a href="https://github.com/google/syzkaller">syzkaller</a> ‚Äî a production-grade kernel fuzzer,
and <a href="https://docs.google.com/presentation/d/1IpICtHR1T3oHka858cx1dSNRu2XcT79-RCRPgzCuiRk/edit?usp=sharing">Arm Memory Tagging Extension</a> ‚Äî an exploit mitigation.
I also wrote a few Linux kernel <a href="https://github.com/xairy/kernel-exploits">exploits</a> for the bugs I found.</p>

<p>Occasionally, I‚Äôm having fun with
<a href="https://github.com/xairy/usb-hacking">hardware</a>
<a href="https://github.com/xairy/dma-attacks">hacking</a>,
<a href="https://github.com/xairy/mipt-ctf">teaching</a>,
and <a href="https://github.com/xairy/easy-linux-pwn">other</a>
<a href="https://github.com/xairy/raw-gadget">random</a>
<a href="https://github.com/xairy/unlockdown">stuff</a>.</p>

<p>Follow me <a href="https://twitter.com/andreyknvl">@andreyknvl</a> on Twitter,
<a href="https://infosec.exchange/@xairy">@xairy@infosec.exchange</a> on Mastodon,
or <a href="https://www.linkedin.com/in/xairy">@xairy</a> on LinkedIn
for notifications about new <a href="https://xairy.io/articles/">articles</a>, <a href="https://xairy.io/talks/">talks</a>, and <a href="https://xairy.io/trainings/">training sessions</a>.</p>


      </div>
    </article>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Did fermented foods fuel brain growth? (150 pts)]]></title>
            <link>https://news.harvard.edu/gazette/story/2024/02/did-fermented-foods-fuel-brain-growth</link>
            <guid>39469988</guid>
            <pubDate>Thu, 22 Feb 2024 17:10:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://news.harvard.edu/gazette/story/2024/02/did-fermented-foods-fuel-brain-growth">https://news.harvard.edu/gazette/story/2024/02/did-fermented-foods-fuel-brain-growth</a>, See on <a href="https://news.ycombinator.com/item?id=39469988">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
	
	
		
<figure><img decoding="async" alt="Soybeans that have been fermented with Bacillus natto. " height="1667" loading="eager" src="https://news.harvard.edu/wp-content/uploads/2024/01/2500Natto.jpg" width="2500"><figcaption><p>Japanese natto is made from soybeans that have been fermented with Bacillus natto.</p><p>The Yomiuri Shimbun via AP Images</p></figcaption></figure>

	<div>
		

		<p><time datetime="2024-02-20">
			February 20, 2024		</time>

		<span>
			4 min read		</span>
	</p></div>

	
			<h2>
			Study puts fermentation, not fire, as pivot point behind our ancestors‚Äô increasing cranial capacity		</h2>
		
</div><div>
<p>The large, capable human brain is a marvel of evolution, but how it evolved from a smaller primate brain into the creative, complex organ of today is a mystery. Scientists can pinpoint <em>when</em> our evolutionary ancestors evolved larger brains, which roughly tripled in size as humans evolved from the bipedal primates known as Australopithecines.</p>



<p>But <em>why </em>it happened when it did ‚Äî what spurred that change ‚Äî has remained elusive. While some have theorized that the use of fire, and the subsequent invention of cooking, provided enough nourishment for our larger-brained ancestors to become dominant, a new theory points to a different spark: fermentation.</p>



<p>The key to understanding how our brains grew is most likely rooted in what ‚Äî and how ‚Äî we eat, said Erin Hecht, one of the authors of <a href="https://www.nature.com/articles/s42003-023-05517-3">‚ÄúFermentation technology as a driver of human brain expansion,‚Äù</a> which has just been published in Communications Biology.</p>



<p>‚ÄúBrain tissue is metabolically expensive,‚Äù said Hecht, an assistant professor of human evolutionary biology. ‚ÄúIt requires a lot of calories to keep it running, and in most animals, having enough energy just to survive is a constant problem.‚Äù</p>



<figure><img loading="lazy" decoding="async" width="731" height="1024" src="https://news.harvard.edu/wp-content/uploads/2024/01/1785Erin-Hecht-731x1024.jpg" alt="Erin Hecht." srcset="https://news.harvard.edu/wp-content/uploads/2024/01/1785Erin-Hecht-731x1024.jpg 731w, https://news.harvard.edu/wp-content/uploads/2024/01/1785Erin-Hecht-214x300.jpg 214w, https://news.harvard.edu/wp-content/uploads/2024/01/1785Erin-Hecht-768x1076.jpg 768w, https://news.harvard.edu/wp-content/uploads/2024/01/1785Erin-Hecht-1097x1536.jpg 1097w, https://news.harvard.edu/wp-content/uploads/2024/01/1785Erin-Hecht-1462x2048.jpg 1462w, https://news.harvard.edu/wp-content/uploads/2024/01/1785Erin-Hecht.jpg 1785w" sizes="(max-width: 731px) 100vw, 731px"><figcaption><p>‚ÄúWhatever changed in their diets had to have happened before brains started getting bigger,‚Äù said Erin Hecht.</p><p>File photo by Kris Snibbe/Harvard Staff Photographer</p></figcaption></figure>



<p>For the larger-brained Australopithecus to survive, therefore, something must have changed in their diet. Theories put forward have included changes in what they consumed or, most popularly, that the discovery of cooking gave them more usable calories from whatever they ate.</p>



<p>The problem with this theory is that the earliest evidence places the use of fire at approximately 1.5 million years ago ‚Äî significantly later than the development of the hominid brain.</p>



<p>‚ÄúOur ancestors‚Äô cranial capacity began increasing 2.5 million years ago, which conservatively gives us about a 1-million-year gap in the timeline between brain size increasing and the possible emergence of cooking technology,‚Äù said <a href="https://klbryant.com/?page_id=290">Katherine L. Bryant</a>, another of the paper‚Äôs co-authors and currently a researcher at the Institute for Language, Communication, and the Brain at <a href="https://www.univ-amu.fr/">Aix-Marseille Universit√©</a> in France. ‚ÄúSome other dietary change must have been releasing metabolic constraints on brain size, and fermentation seems like it could fit the bill.‚Äù<br></p>



<p>‚ÄúWhatever changed in their diets had to have happened before brains started getting bigger,‚Äù said Hecht, who also noted that during the last few years researchers have postulated other options, such as the consumption of rotting meat.</p>



<p>In the new paper, she and her team offer a different hypothesis: that cached (or saved) food fermented, and that this ‚Äúpre-digested‚Äù food provided a more accessible form of nourishment, fueling that bigger brain and allowing our ancestors to survive and thrive through natural selection.</p>



<figure data-wp-context="{ &quot;core&quot;:
				{ &quot;image&quot;:
					{   &quot;imageLoaded&quot;: false,
						&quot;initialized&quot;: false,
						&quot;lightboxEnabled&quot;: false,
						&quot;hideAnimationEnabled&quot;: false,
						&quot;preloadInitialized&quot;: false,
						&quot;lightboxAnimation&quot;: &quot;zoom&quot;,
						&quot;imageUploadedSrc&quot;: &quot;https://news.harvard.edu/wp-content/uploads/2024/01/2500.Fermentationgrpahic.jpg&quot;,
						&quot;imageCurrentSrc&quot;: &quot;&quot;,
						&quot;targetWidth&quot;: &quot;2500&quot;,
						&quot;targetHeight&quot;: &quot;1181&quot;,
						&quot;scaleAttr&quot;: &quot;&quot;,
						&quot;dialogLabel&quot;: &quot;Enlarged image&quot;
					}
				}
			}" data-wp-interactive=""><img loading="lazy" decoding="async" width="1024" height="484" data-wp-effect--setstylesonresize="effects.core.image.setStylesOnResize" data-wp-effect="effects.core.image.setButtonStyles" data-wp-init="effects.core.image.initOriginImage" data-wp-on--click="actions.core.image.showLightbox" data-wp-on--load="actions.core.image.handleLoad" src="https://news.harvard.edu/wp-content/uploads/2024/01/2500.Fermentationgrpahic-1024x484.jpg" alt="Fermentation graphic." srcset="https://news.harvard.edu/wp-content/uploads/2024/01/2500.Fermentationgrpahic-1024x484.jpg 1024w, https://news.harvard.edu/wp-content/uploads/2024/01/2500.Fermentationgrpahic-300x142.jpg 300w, https://news.harvard.edu/wp-content/uploads/2024/01/2500.Fermentationgrpahic-768x363.jpg 768w, https://news.harvard.edu/wp-content/uploads/2024/01/2500.Fermentationgrpahic-1536x726.jpg 1536w, https://news.harvard.edu/wp-content/uploads/2024/01/2500.Fermentationgrpahic-2048x967.jpg 2048w" sizes="(max-width: 1024px) 100vw, 1024px">        <div aria-label="" aria-modal="" role="" data-wp-body="" data-wp-bind--role="selectors.core.image.roleAttribute" data-wp-bind--aria-label="selectors.core.image.dialogLabel" data-wp-class--initialized="context.core.image.initialized" data-wp-class--active="context.core.image.lightboxEnabled" data-wp-class--hideanimationenabled="context.core.image.hideAnimationEnabled" data-wp-bind--aria-modal="selectors.core.image.ariaModal" data-wp-effect="effects.core.image.initLightbox" data-wp-on--keydown="actions.core.image.handleKeydown" data-wp-on--touchstart="actions.core.image.handleTouchStart" data-wp-on--touchmove="actions.core.image.handleTouchMove" data-wp-on--touchend="actions.core.image.handleTouchEnd" data-wp-on--click="actions.core.image.hideLightbox">
                <div>
<figure><img decoding="async" data-wp-bind--src="context.core.image.imageCurrentSrc" data-wp-style--object-fit="selectors.core.image.lightboxObjectFit" src="" alt="Fermentation graphic."></figure>
</div>
				<div>
<figure><img decoding="async" data-wp-bind--src="selectors.core.image.enlargedImgSrc" data-wp-style--object-fit="selectors.core.image.lightboxObjectFit" src="" alt="Fermentation graphic."></figure>
</div>
                
        </div></figure>



<p>The shift was probably a happy accident. ‚ÄúThis was not necessarily an intentional endeavor,‚Äù Hecht posited. ‚ÄúIt may have been an accidental side effect of caching food. And maybe, over time, traditions or superstitions could have led to practices that promoted fermentation or made fermentation more stable or more reliable.‚Äù</p>



<p>This hypothesis is supported by the fact that the human large intestine is proportionally smaller than those of other primates, suggesting that we adapted to food that was already broken down by the chemical process of fermentation. In addition, fermented foods are found in all cultures and across food groups, from Europe‚Äôs wine and cheese to Asia‚Äôs soy sauce and <em>natto, </em>a Japanese soybean dish.</p>



<p>Hecht suggested that an additional study of brain responses to fermented and non-fermented foods might be useful, as might one of olfactory and taste receptors, perhaps using ancient DNA. For the evolutionary biologist, these are all fertile areas for other researchers to investigate. (Hecht‚Äôs focus is more on ‚Äúhow brain circuits have evolved to support complex behaviors,‚Äù with research on both living humans and dogs.)</p>



<p>As research progresses, Bryant sees possibilities for a wide range of benefits. ‚ÄúThis hypothesis also gives us as scientists even more reasons to explore the role of fermented foods on human health and the maintenance of a healthy gut microbiome,‚Äù she said. ‚ÄúThere have been a number of studies in recent years linking gut microbiome to not only physical but mental health.‚Äù</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[YouTube addiction, one month sober (209 pts)]]></title>
            <link>https://www.sophiajt.com/youtube-addiction-one-month-sober/</link>
            <guid>39469716</guid>
            <pubDate>Thu, 22 Feb 2024 16:50:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.sophiajt.com/youtube-addiction-one-month-sober/">https://www.sophiajt.com/youtube-addiction-one-month-sober/</a>, See on <a href="https://news.ycombinator.com/item?id=39469716">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <p>Today marks my first month <a href="https://www.sophiajt.com/youtube-addiction">clean from YouTube</a>. It was the right choice, but that's not to say it was easy.</p>
<p>Let's talk about it.</p>
<h2 id="quitting">Quitting</h2>
<p>When I decided to do something about my addiction, I had a few choices:</p>
<ul>
<li>Cut back the amount I was watching</li>
<li>Quit cold turkey</li>
</ul>
<p>They both have their pluses and minuses, but by the time I figured out what was going I was <em>done</em> with being hooked on it. I was ashamed of getting caught up in it so badly. I chose going cold turkey.</p>
<p>Would I choose that path again? Good question, let's explore it.</p>
<h2 id="cold-turkey">Cold turkey</h2>
<p>It was pretty soon after I decided to quit that I blocked YouTube on all my devices. For most things, that meant finding the <code>/etc/hosts</code> file or equivalent for the OS, and adding a line to set <code>youtube.com</code> to <code>127.0.0.1</code>. That effectively shuts you out of YouTube the site.</p>
<p>On my phone, I used <code>AppBlock</code> to block the website. I would have preferred to edit <code>/etc/hosts</code> like I did with my machines, but unfortunately that part of the filesystem is read-only, and can only be modified if you jail-break your phone. App it is.</p>
<p>Once I blocked it everywhere I could, I tested it a few times to be sure it was working. Satisfied, I settled in to see what would change.</p>
<h2 id="changes">Changes</h2>
<p>A few things changed right away. Now that I wasn't obliterating myself for 8-10 hours a day, I started noticing a lot of things. One was that on an average day prior to quitting YouTube, I consumed a <em>lot</em> of sugar. Multiple desserts, plus sugary snacks in between meals, that kind of thing.</p>
<p>Before, when I was watching hours of YouTube, I'm guessing I would get up and find something to snack on and sit back down. Now, I don't have that kind of "permanently distracted" frame of mind, I notice that I eat fewer snacks and cut way back on the sugar.</p>
<p>I also had time to walk more - something I've always enjoyed. I started doing a 5km (3.1 mi) walk every morning. It takes me almost exactly an hour, and it's a nice way to start the day.</p>
<p>But the real changes started happening with my mental health.</p>
<h2 id="mental-health">Mental health</h2>
<p>One of the things that made me try to find out what was wrong with me was my declining mental health. Part of me wanted to become a shut-in and lose myself, and another part of me wanted to fight this. I felt worse as the weeks passed.</p>
<p>Once I stopped YouTube, I knew I needed a few things: I needed to understand <em>why</em> I got addicted in the first place, and I needed to work on healthier habits.</p>
<p>This is still very early on for me, but I wanted to mention a few things I did:</p>
<p>I talked to my doctor, who put me in for addiction counselling services. Here in New Zealand, you can get five free visits with an addiction counsellor as you begin your recovery.</p>
<p>I put in for the services, but I didn't know how long it would take to get into the system, so I also looked around locally for a therapist who could also give some support. This was a private therapist, so there are costs associated with it.</p>
<p>The contrast between the two could not have been more stark. The therapist was very gentle and sympathetic. The counsellor... well, let's say they have a specific task at hand.</p>
<h2 id="why-are-you-addicted-and-what-can-you-do-better">Why are you addicted and what can you do better?</h2>
<p>Addiction counselling, as best as I can figure, has a different goal that general therapy. They're trying to hold up a mirror so you can see something very important for you to see: you are not taking care of yourself.</p>
<p>More than that - your brain, in your current state, is not your friend.</p>
<p>These are some hard truths to swallow.</p>
<p>You work on habits you can change: how to make small changes each day, how to think about rewards and how you've been making bad assessments of what rewards are for and what you should do with them.</p>
<p>Did I mention that's all in the first half hour?</p>
<p>Then we started talking about the "why", in the same way of holding up a mirror and talking through ways of working with this stuff. I won't share the personal details here, but we covered a decent bit of ground. In the end, as best as I could understand, is that while you may have past experiences that caused your instincts to protect you, they're just that. We all try to protect ourselves from pain and danger. This is a good thing, unless it goes too far and we lose the ability to take normal daily risks and live a healthy life.</p>
<p>In a sense, the goal of building new habits isn't to only have new habits. It's to start rewiring the brain to process risks, pain, and danger in a healthier way. There will always be risks, like crossing a street, and we re-learn how to work with them.</p>
<p>To some folks, that might sound like total common sense. If it does for you, that's great. For me, it got surprisingly easy to create a safe illusion that turned into an unhealthy way to cope. I needed to see my way out of that.</p>
<h2 id="other-changes">Other changes</h2>
<p>After talking with my doctor, I also started cooking more. I'm not a particular good cook (actually I'm pretty bad, though getting better).</p>
<p>The act of cooking and eating your own food, though, is therapeutic. You can see how healthy (or not) the food you make is. You know the ingredients that go into it. You can make enough for leftovers.</p>
<p>By the time I knew I needed to quit YouTube last month, I'd given up on cooking. I might make a pizza here or there, but almost all my lunches and dinners came from delivery food. Now, this is reversed. I'll still get the occasional delivery, but almost all of what I eat these days I make.</p>
<h2 id="cravings">Cravings</h2>
<p>You may wonder how the actual quitting part is going. The short answer is that I have good days and bad days.</p>
<p>It's surprisingly easy some days to fill a day with fun things to do, so that I don't even notice it passing. Other days, I might do some work on the computer and then lay in the floor thinking about stuff I want to watch, scheming ways I could justifying watching <em>some</em> YouTube. That voice that says "watch a few hours to scratch the itch".</p>
<p>This, I know, would be a bad idea(tm).</p>
<h2 id="content-as-an-addiction">Content as an addiction</h2>
<p>In talking with lots of folks, at this point I'm convinced we've got content wrong. At least, how it's delivered to us.</p>
<p>You can take most of them and understand the business model as "retention = profits". The more time you spend on the site, the longer your eyeballs are taking in the ads and related, the more money the site makes off of you.</p>
<p>The way sites like TikTok and YouTube give you a feed of content means you can consume it in an unbroken fashion. It reminds me of the people you see at slot machines in casinos, pulling the lever to see what will happen. Maybe you'll get lucky and come across something awesome.</p>
<p>The content also keeps you in a kind of trance - a state where you don't <em>have</em> to think if you don't want to.</p>
<p>I feel like one of those people complaining about how televisions make us zombies.</p>
<p>I chatted with my addiction counsellor about about social media platforms, and I'm sure you're not at all surprised that they're also addictive.</p>
<p>I don't want this post to be <em>just</em> about the dangers of these platforms. There's more to it than I can really cover here, and those platforms can be used for good as well. The main thing, for me, is how they interact with our brains. Are we still able to live healthy lives? Form deep healthy relationships? Take daily risks of being our complete selves? Are our brains staying healthy?</p>
<h2 id="reaching-out">Reaching out</h2>
<p>Probably the most important thing, though, is to directly target what I needed most of all. Addiction is isolating. The particular addiction, YouTube, is a lot of wanting to connect to others in a very safe way. So, to combat this, the goal is to "reach out". To connect to real people. To get my 'cup' filled with real intimacy and connections with others.</p>
<p>What in the world that means is something I'm trying to figure out. I know that my cup was very, very empty. Despite having so many friends, fun online interactions, game nights, etc. Those things are great, but they don't meet the need for real connection.</p>
<p>I'm signing up for meetups, volunteering, and going and chatting with random people where I can to get face-to-face interactions again.</p>
<h2 id="step-at-a-time">Step at a time</h2>
<p>That's it. That's where I'm at. Figuring out what I can, making changes where I can, and learning as I go.</p>
<p>To all the folks who reached out with their stories of struggles and recovery: thank you. Sincerely, thank you. The suggestions and words of encouragement have helped. Thanks for that.</p>
<p>Here's to the hope my cup, and yours, will be filled.</p>

  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Math, Physics, and Engineering Applets (113 pts)]]></title>
            <link>http://falstad.com/mathphysics.html</link>
            <guid>39469684</guid>
            <pubDate>Thu, 22 Feb 2024 16:47:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="http://falstad.com/mathphysics.html">http://falstad.com/mathphysics.html</a>, See on <a href="https://news.ycombinator.com/item?id=39469684">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<tbody><tr>
<td>

<h2>Oscillations and Waves</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/ripple/"><img src="http://falstad.com/mpthumb/ripple.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/ripple/">
Ripple Tank (2-D Waves) Applet
</a></b></big><br><small>
Ripple tank simulation that demonstrates wave motion, interference, diffraction, refraction,
Doppler effect, etc.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/wave2d/"><img src="http://falstad.com/mpthumb/wave2d.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/wave2d/">
2-D Waves Applet
</a></b></big><br><small>
Demonstration of wave motion in 2-D.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/wavebox/"><img src="http://falstad.com/mpthumb/wavebox.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/wavebox/">
3-D Waves Applet
</a></b></big><br><small>
Demonstration of wave motion in 3-D.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/coupled/"><img src="http://falstad.com/mpthumb/coupled.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/coupled/">
Coupled Oscillations Applet
</a></b></big><br><small>
Demonstration of longitudinal wave motion in oscillators connected by springs.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/coupled/"><img src="http://falstad.com/mpthumb/dispersion.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/dispersion/">
Dispersion Applet
</a></b></big><br><small>
Dispersion and group velocity.
</small></td>
</tr>

</tbody></table>

<h2>Acoustics</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/loadedstring/"><img src="http://falstad.com/mpthumb/loadedstring.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/loadedstring/">
Loaded String Applet
</a></b></big><br><small>
Simulation of wave motion of a string.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/membrane/"><img src="http://falstad.com/mpthumb/membrane.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/membrane/">
Rectangular Membrane Waves Applet
</a></b></big><br><small>
Vibrational modes in a 2-d membrane.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/circosc/"><img src="http://falstad.com/mpthumb/circosc.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/circosc/">
Circular Membrane Waves Applet
</a></b></big><br><small>
Vibrational modes in a 2-d circular membrane (drum head).
</small></td>
</tr>

<tr><td><a href="http://falstad.com/barwaves/"><img src="http://falstad.com/mpthumb/barwaves.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/barwaves/">
Bar Waves Applet
</a></b></big><br><small>
Bending waves in a bar.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/vowel/"><img src="http://falstad.com/mpthumb/vowel.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/vowel/">
Vowels Applet</a></b></big><br><small>
The acoustics of speech.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/modebox/"><img src="http://falstad.com/mpthumb/modebox.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/modebox/">
Box Modes Applet
</a></b></big><br><small>
Acoustic standing waves in a 3-d box.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/interference/"><img src="http://falstad.com/mpthumb/interference.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/interference/">
Acoustic Interference Applet
</a></b></big><br><small>
Generates audio interference between your speakers.
</small></td>
</tr>

</tbody></table>

<h2>Signal Processing</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/fourier/"><img src="http://falstad.com/mpthumb/fourier.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/fourier/">
Fourier Series Applet
</a></b></big><br><small>
Frequency analysis of periodic functions.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/dfilter/"><img src="http://falstad.com/mpthumb/dfilter.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/dfilter/">
Digital Filters</a></b></big><br><small>
Filters digital signals and plays the output on your speakers.
</small></td>
</tr>

</tbody></table>



<h2>Electricity and Magnetism: Statics</h2>

<table>
<tbody><tr><td><a href="http://falstad.com/emstatic/"><img src="http://falstad.com/mpthumb/emstatic.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/emstatic/index.html">
2-D Electrostatics Applet
</a></b></big><br><small>
Demonstrates static electric fields and steady-state current
distributions.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/vector2de/"><img src="http://falstad.com/mpthumb/vector2de.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/vector2de/">
2-D Electrostatic Fields Applet
</a></b></big><br><small>
Demonstrates electric fields in various 2-D situations; also shows
Gauss's law.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/vector3de/"><img src="http://falstad.com/mpthumb/vector3de.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/vector3de/">
3-D Electrostatic Fields Applet
</a></b></big><br><small>
Demonstrates electric fields in various 3-D situations.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/vector3dm/"><img src="http://falstad.com/mpthumb/vector3dm.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/vector3dm/">
3-D Magnetostatic Fields Applet
</a></b></big><br><small>
Demonstrates magnetic fields in various situations.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/motor/"><img src="http://falstad.com/mpthumb/motor.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/motor/">
Electric Motor</a> <img src="http://falstad.com/new.gif">
</b></big><br><small>
</small></td>
</tr>

<tr><td><a href="http://falstad.com/generator/"><img src="http://falstad.com/mpthumb/motor.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/generator/">
Electric Generator</a> <img src="http://falstad.com/new.gif">
</b></big><br><small>
</small></td>
</tr>

</tbody></table>

<h2>Electrodynamics</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/emwave1/"><img src="http://falstad.com/mpthumb/emwave1.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/emwave1/">
2-D Electrodynamics Applet (TE)
</a></b></big><br><small>
Demonstrates electromagnetic radiation.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/emwave2/"><img src="http://falstad.com/mpthumb/emwave1.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/emwave2/">
2-D Electrodynamics Applet (TM)
</a></b></big><br><small>
Demonstrates electromagnetic radiation, induction, and magnetostatics.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/circuit/"><img src="http://falstad.com/mpthumb/circuit.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/circuit/">
Analog Circuit Simulator Applet
</a></b></big><br><small>
Demonstrates various electronic circuits.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/circuit/"><img src="http://falstad.com/mpthumb/circuit.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/afilter/">
Analog Filter Applet
</a></b></big><br><small>
Demonstrates electronic filter circuits.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/embox/"><img src="http://falstad.com/mpthumb/embox.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/embox/">
Cavity Modes Applet
</a></b></big><br><small>
Electromagnetic waves in a 3-d rectangular cavity.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/embox/guide.html"><img src="http://falstad.com/mpthumb/emguide.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/embox/guide.html">
Waveguide Modes Applet
</a></b></big><br><small>
Electromagnetic waves in a waveguide.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/antenna/"><img src="http://falstad.com/mpthumb/antenna.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/antenna/">
Antenna Applet
</a></b></big><br><small>
Generates antenna radiation patterns.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/diffraction/"><img src="http://falstad.com/mpthumb/diffraction.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/diffraction/">
Fresnel Diffraction Applet
</a></b></big><br><small>
Generates Fresnel diffraction patterns.
</small></td>
</tr>

</tbody></table>

<h2 id="qm">Quantum Mechanics</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/qmatom/"><img src="http://falstad.com/mpthumb/qmatom.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qmatom/">
Hydrogen Atom Applet
</a></b></big><br><small>
Shows the orbitals (wave functions) of the hydrogen atom.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qmmo/"><img src="http://falstad.com/mpthumb/qmmo.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qmmo/">
Molecular Orbitals Applet
</a></b></big><br><small>
Shows the orbitals (wave functions) of the hydrogen molecular ion.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qm1d/"><img src="http://falstad.com/mpthumb/qm1d.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qm1d/">
1-D Quantum Mechanics Applet
</a></b></big><br><small>
Single-particle quantum mechanics states in one dimension.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qm1dcrystal/"><img src="http://falstad.com/mpthumb/qm1dcrystal.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qm1dcrystal/">
1-D Quantum Crystal Applet
</a></b></big><br><small>
Periodic potentials in one dimension.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qm2dcrystal/"><img src="http://falstad.com/mpthumb/qm2dcrystal.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qm2dcrystal/">
2-D Quantum Crystal Applet
</a></b></big><br><small>
Periodic potentials in two dimensions.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qm1drad/"><img src="http://falstad.com/mpthumb/qm1drad.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qm1drad/">
1-D Quantum Transitions Applet
</a></b></big><br><small>
Radiative transitions (absorption and stimulated emission) in one dimension.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qmatomrad/"><img src="http://falstad.com/mpthumb/qmatomrad.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qmatomrad/">
Atomic Dipole Transitions Applet
</a></b></big><br><small>
Radiative transitions (absorption and stimulated emission) in atoms.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qm2dbox/"><img src="http://falstad.com/mpthumb/qm2dbox.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qm2dbox/">
2-D Rectangular Square Well Applet
</a></b></big><br><small>
Rectangular square well (particle in a box) in two dimensions.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qm2dcirc/"><img src="http://falstad.com/mpthumb/qm2dcirc.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qm2dcirc/">
2-D Circular Square Well Applet
</a></b></big><br><small>
Circular square well in two dimensions.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qm2dosc/"><img src="http://falstad.com/mpthumb/qm2dosc.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qm2dosc/">
2-D Quantum Harmonic Oscillator Applet
</a></b></big><br><small>
Harmonic oscillator in two dimensions.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qmrotator/"><img src="http://falstad.com/mpthumb/qmrotator.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qmrotator/">
Quantum Rigid Rotator Applet
</a></b></big><br><small>
Particle confined to the surface of a sphere.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/qm3dosc/"><img src="http://falstad.com/mpthumb/qm3dosc.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/qm3dosc/">
3-D Quantum Harmonic Oscillator Applet
</a></b></big><br><small>
Harmonic oscillator in three dimensions.
</small></td>
</tr>

</tbody></table>

<h2>Linear Algebra</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/dotproduct/"><img src="http://falstad.com/mpthumb/dotproduct.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/dotproduct/">
Dot Product Applet
</a></b></big><br><small>
Demonstrates the dot product or scalar product of two vectors.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/matrix/"><img src="http://falstad.com/mpthumb/matrix.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/matrix/">
Matrix Applet
</a></b></big><br><small>
Demonstrates 2-d transformations using a matrix.
</small></td>
</tr>

</tbody></table>

<h2>Vector Calculus</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/vector/"><img src="http://falstad.com/mpthumb/vector.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/vector/">
2-D Vector Fields Applet
</a></b></big><br><small>
Demonstrates various properties of vector fields, including
divergence and curl, etc.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/vector3d/"><img src="http://falstad.com/mpthumb/vector3d.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/vector3d/">
3-D Vector Fields Applet
</a></b></big><br><small>
Demonstrates vector fields in 3 dimensions.  Includes the Lorenz
Attractor and Rossler Attractor.
</small></td>
</tr>

</tbody></table>

<h2>Thermodynamics</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/gas/"><img src="http://falstad.com/mpthumb/gas.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/gas/">
Gas Molecules Simulation Applet
</a></b></big><br><small>
Demonstrates the kinetic theory of gases.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/gas/"><img src="http://falstad.com/mpthumb/engine.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/engine/">
Heat Engine
</a></b></big><br><small>
Carnot cycle and other thermodynamic cycles.<img src="http://falstad.com/new.gif">
</small></td>
</tr>

</tbody></table>

<h2>Mechanics</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/harmonicosc/"><img src="http://falstad.com/mpthumb/harmonicosc.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/harmonicosc/">
Harmonic Oscillator
</a></b></big><br><small>
Driving forces, resonance.<img src="http://falstad.com/new.gif">
</small></td>
</tr>

<tr><td><a href="http://falstad.com/coriolis/"><img src="http://falstad.com/mpthumb/coriolis.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/coriolis/">
Coriolis Force
</a></b></big><br><small>
Rotating reference frames.<img src="http://falstad.com/new.gif">
</small></td>
</tr>

<tr><td><a href="http://falstad.com/foucault/"><img src="http://falstad.com/mpthumb/foucault.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/foucault/">
Foucault Pendulum
</a></b></big><br><small>
Demonstrates earth's rotation.<img src="http://falstad.com/new.gif">
</small></td>
</tr>

<tr><td><a href="http://falstad.com/rendezvous/"><img src="http://falstad.com/mpthumb/rendezvous.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/rendezvous/">
Orbital Rendezvous
</a></b></big><br><small>
Pilot your ship to meet up with a target ship in a different orbit.<img src="http://falstad.com/new.gif">
</small></td>
</tr>

<tr><td><a href="http://falstad.com/lagrange/"><img src="http://falstad.com/mpthumb/lagrange.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/lagrange/">
Lagrange Points
</a></b></big><br><small>
Three-body problem.<img src="http://falstad.com/new.gif">
</small></td>
</tr>

<tr><td><a href="http://falstad.com/top/"><img src="http://falstad.com/mpthumb/top.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/top/">
Symmetrical Top
</a></b></big><br><small>
Rigid body motion of tops and gyroscopes.<img src="http://falstad.com/new.gif">
</small></td>
</tr>

</tbody></table>

<h2>Miscellaneous</h2>
<table>

<tbody><tr><td><a href="http://falstad.com/diffeq/"><img src="http://falstad.com/mpthumb/diffeq.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/diffeq/">
Ordinary Differential Equations Applet
</a></b></big><br><small>
Visual differential equation solver.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/euler/"><img src="http://falstad.com/mpthumb/euler.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/euler/">
Euler's Equation Applet
</a></b></big><br><small>
Demonstrates Taylor series expansion of complex exponentials.
</small></td>
</tr>

<tr><td><a href="http://falstad.com/euler/"><img src="http://falstad.com/mpthumb/fft.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/fft/">
Discrete Fourier Transform
</a></b></big><br><small>
Fourier transform in two dimensions.<img src="http://falstad.com/new.gif">
</small></td>
</tr>

<tr><td><a href="http://falstad.com/ray-optics/"><img src="http://falstad.com/mpthumb/rayoptics.png"></a></td>
<td><big><b>
<a href="https://phydemo.app/ray-optics/">
Ray Optics Simulation
</a></b></big><br><small>
A ray optics simulator by Rick Tu and Johnson (with some contributions from me)
</small></td>
</tr>

<tr><td><a href="http://falstad.com/thermal/"><img src="http://falstad.com/mpthumb/thermal.gif"></a></td>
<td><big><b>
<a href="http://falstad.com/thermal/">
Thermal Camera Pictures
</a></b></big><br><small>
Some sample pictures taken with a thermal (infrared) camera.  (This is not
an applet but I thought I'd throw it in here anyway.)
</small></td>
</tr>

</tbody></table>


<p>
<a href="http://falstad.com/licensing.html">Licensing info.</a>
</p><p>
Links to other educational sites with math/physics-related information
or java applets useful for teaching:
</p><ul>

<li><big><b>
<a target="_blank" href="http://falstad.com/lissajous">
Lissajous Lab
</a></b></big><br><small>
based on a Java applet by Ed Hobbs
</small></li><li><big><b>
<a target="_blank" href="http://falstad.com/complexviewer/">
A Complex Mapping Viewer
</a></b></big><br><small>
another converted Java applet
</small></li><li><big><b>
<a target="_blank" href="https://harryhatchard.com/hydrogen/index.html">
Another Hydrogen Orbital Applet
</a></b></big><br><small>
WebGL-based.
</small></li><li><big><b>
<a target="_blank" href="http://falstad.com/nw/slit.html">
Another Slit Diffraction Applet
</a></b></big><br><small>
Also here are <a href="http://falstad.com/nw/">more applets from Northwestern University</a>.
</small></li><li><big><b>
<a target="_blank" href="https://www.allaboutcircuits.com/">
All About Circuits
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://www.myphysicslab.com/">
MyPhysicsLab Simulations
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="https://www.compadre.org/physlets/">
Physlets
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="https://mafghani.com/atoms.html">
3-D Molecular Dynamics
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://oolong.co.uk/resonata.htm">
Resonata - A Wave Machine
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://phet.colorado.edu/index.php">
PhET Interactive Simulations
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://richiecarmichael.github.io/sat/index.html#">
All Satellites Currently Orbiting
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://www.circuit-diagram.org/">
a Circuit Diagram maker
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://capturedlightning.com/">
Captured Lightning
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://www.wondermagnet.com/">
Wondermagnet.com
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://micro.magnet.fsu.edu/primer/java/scienceopticsu/powersof10/index.html">
Powers of 10 Applet
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://www.geocities.com/piratord/Difra/difra.html">
Another Fresnel Diffraction Applet
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="https://www.acs.psu.edu/drussell/demos.html">
Acoustics and Vibration Animations
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://www.traipse.com/earth_and_moon/index.html">
Earth-Moon Distance
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://www.physics.umd.edu/ripe/icpe/newsletters/n34/marshmal.htm">
Finding the Speed of Light with Marshmallows
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://www.fourmilab.to/yoursky/">
Sky Chart
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://amasci.com/miscon/miscon.html">
Errors and Misconceptions
</a></b></big><br><small>
</small></li><li><big><b>
<a target="_blank" href="http://www.cs.ubc.ca/spider/kvdoel/sound_demo6.html">
Sound Lab
</a></b></big><br><small>
</small></li></ul>

<p>
And when you get tired of learning, here is some fun stuff:
</p><ul>
<li><big><b>
<a href="http://falstad.com/pong/">
Pong Simulation
</a></b></big><br><small>
Circuit-level simulation of original 1972 Pong.
</small></li><li><big><b>
<a href="http://falstad.com/maze/">
Java Maze Applet
</a></b></big><br><small>
3d perspective maze.
</small></li><li><big><b>
<a href="http://falstad.com/envelope/">
Acorn Envelope Applet
</a></b></big><br><small>
Cool videogame sounds.
</small></li></ul>

</td>
<td>

</td>
</tr>
</tbody></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Billion Row Challenge (1BRC) ‚Äì Step-by-Step from 71s to 1.7s (212 pts)]]></title>
            <link>https://questdb.io/blog/billion-row-challenge-step-by-step/</link>
            <guid>39467885</guid>
            <pubDate>Thu, 22 Feb 2024 14:49:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://questdb.io/blog/billion-row-challenge-step-by-step/">https://questdb.io/blog/billion-row-challenge-step-by-step/</a>, See on <a href="https://news.ycombinator.com/item?id=39467885">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><p>
  QuestDB is a high performance time series database with SQL 
  analytics that can power through data ingestion and analysis. 
  It's <a href="https://github.com/questdb/questdb">open source</a> 
  and integrates with many tools and languages. Give us a try!</p><hr><p>As I was browsing my timeline on the boring afternoon of the New Year's Day
2024,
<a href="https://twitter.com/gunnarmorling/status/1741839724933751238" target="_blank" rel="noopener noreferrer">this tweet by Gunnar Morling</a>
jumped out:</p><blockquote><p>How fast can YOU aggregate 1B rows using modern #Java? Grab your threads, flex
your SIMD, and kick off 2024 true coder style by joining this friendly little
competition. Submissions accepted until Jan 31.</p></blockquote><p>The challenge was this:</p><blockquote><p>Write a Java program for retrieving temperature measurement values from a text
file and calculating the min, mean, and max temperature per weather station.
There‚Äôs just one caveat: the file has 1,000,000,000 rows!</p></blockquote><p>My first thought was, "Pfft, min, mean and max, that's so simple!" And the
dataset was simple as well: just 413 unique keys, of quite uniform, short
lengths. Super-simple data format. A whole <em>month</em> to do it. Where's the
challenge?? As is often the case, the devil was in the details.</p><p>It soon dawned on the contestants that calculating only min, mean and max made
the competition harder, not easier. But why? There wasn't one obvious place
consuming CPU cycles. Opportunities to make it even faster lay everywhere, even
in the darkest corners of the CPU architecture.</p><p>As a saving grace, the challenge was held out in the open on GitHub. Copying
others' ideas wasn't just allowed, it was encouraged. This was to be a learning
experience, not a war of secrets.</p><p>It was also going to be a month-long frenzy of research, ingenuity, and just
plain <em>fun</em>. It grabbed the attention and devotion of hundreds of enthusiasts,
including at least a dozen or two top Java performance experts.</p><p>The winning solution is the one submitted by none other than Thomas Wuerthinger
(<a href="https://github.com/thomaswue" target="_blank" rel="noopener noreferrer">@thomaswue</a>), the lead of the GraalVM project ‚Äî
that's the kind of heavyweights I'm talking about! Along with several other key
contestants, he introduced many of the great ideas that everyone else grabbed
and incorporated into their own submissions.</p><p>My submission did quite well, ending up at spot #9. My QuestDB colleague,
Jaromir Hamala (<a href="https://github.com/jerrinot" target="_blank" rel="noopener noreferrer">@jerrinot</a>), fared even better,
placing 3rd ‚Äî just 73 milliseconds behind the winner!</p><figure><div><p><img alt="Screenshot of 1BRC Scoreboard" src="https://questdb.io/img/blog/2024-02-20/1brc-scoreboard.webp" loading="lazy"></p><figcaption>The Official 1BRC Scoreboard</figcaption></div></figure><h2>What came out on top<a href="#what-came-out-on-top" title="Direct link to heading">#</a></h2><p>Now that you read the rules, can you guess what's the actual challenge? Can you
visualize what the winning code would look like? Here,
<a href="https://github.com/gunnarmorling/1brc/blob/main/src/main/java/dev/morling/onebrc/CalculateAverage_thomaswue.java" target="_blank" rel="noopener noreferrer">have a look!</a></p><p>For that matter, look at <em>any</em> of the top 10 solutions, including
<a href="https://github.com/gunnarmorling/1brc/blob/main/src/main/java/dev/morling/onebrc/CalculateAverage_mtopolnik.java" target="_blank" rel="noopener noreferrer">mine</a>,
and especially at the hot loop in each of them ‚Äî the part of the code where the
program spends almost all of its time.</p><p>If you ever had the experience of writing a small program in C++ or Rust, and
then looking at the optimized machine code the compiler produced, you'll get
similar vibes here. Abstractions are spilled open, concerns are criss-crossing
and interleaving each other. A ton of utterly alien-looking, bit-twiddling
logic.</p><p>How could a human programmer possibly get to this point? Like in so many other
cases, it was people working together and improving step by step. Dozens of Java
experts iterated through many tricks and hacks, and as January rolled on, the
processing time kept dropping lower and lower.</p><p>The main thing I'd like to show you in this post is that a good part of that
amazing speed comes from easy-to-grasp, reusable tricks that you could apply in
your code as well. Towards the end, I'll also show you some of the magical parts
that take it beyond that level.</p><h2>The "normal" implementation<a href="#the-normal-implementation" title="Direct link to heading">#</a></h2><p>OK: 1,000,000,000 rows - here we go!</p><p>For context, this is a sample of the temperature input file. Each line contains
a station name and a temperature reading:</p><p>And this is the expected output:</p><p>As a first take, let's apply some
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog1.java" target="_blank" rel="noopener noreferrer">idiomatic Java code</a>
that would pass muster with any seasoned Java developer:</p><p>This code:</p><ul><li>uses parallel Java streams, which put all the CPU cores to work</li><li>doesn't fall into any known performance traps like Java regex</li><li>leans heavily into all the great building blocks provided by the JDK</li></ul><p>On a Hetzner CCX33 instance with OpenJDK 21.0.2, it takes 71 seconds to
complete. But the best solution takes 1.5 seconds ‚Äî that's a jaw-dropping 47
times faster! As we said, the way to get there is step by step, so let's start
with the first one.</p><h2>Optimization 0: Choose a good VM<a href="#optimization-0-choose-a-good-vm" title="Direct link to heading">#</a></h2><p>Before we touch the code, there's a low effort way to speed up your program: use
a modernized JVM. Many production deployments still run on Java 8 or 11, but the
pace of progress since those days has been significant.</p><p>During the 1BRC challenge, we found that <a href="https://www.graalvm.org/" target="_blank" rel="noopener noreferrer">GraalVM</a> is
one damn fast JVM. It also supports compiling into a native binary, which
eliminates the JVM startup cost.</p><p>By simply downloading GraalVM and making it the default, my solution improved
from 71 seconds to 66 ‚Äî a solid 7.5% improvement for very little effort.</p><p>When we get deeper into optimizing and bring down the runtime to 2-3 seconds,
eliminating the JVM startup provides another 150-200ms in relief. That becomes a
big deal.</p><h2>First profile, then optimize<a href="#first-profile-then-optimize" title="Direct link to heading">#</a></h2><p>Every successful 1BRC contestant used profiling of one kind or another to guide
their optimization efforts. I used a combination of three tools:</p><ol><li>Good old
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/" target="_blank" rel="noopener noreferrer">VisualVM</a></li><li><a href="https://github.com/async-profiler/async-profiler" target="_blank" rel="noopener noreferrer">Async Profiler</a></li><li><a href="https://perf.wiki.kernel.org/index.php/Tutorial" target="_blank" rel="noopener noreferrer"><code>perf</code></a> command-line tool</li></ol><p>Many people consider VisualVM outdated, but it harbors a hidden gem: The
VisualGC plugin. You have to install it from the Tools‚ÜíPlugins menu. Once you
attach it to a running Java program, VisualGC shows up as the rightmost tab in
the window.</p><p>Be sure to select the shortest refresh period (100 ms), and then enjoy the show.
A realtime animation of all the memory regions the garbage collector maintains,
along with a graph of JIT compilations and GC runs will appear. I used to spend
hours staring at this oddly satisfying, complex dance of GC's cogwheels. For the
1BRC program, I added a <code>while (true)</code> statement to keep processing the input
file forever; otherwise things just flash by.</p><p>The Async Profiler came from following Gunnar's advice on the
<a href="https://github.com/gunnarmorling/1brc?tab=readme-ov-file#flamegraphprofiling" target="_blank" rel="noopener noreferrer">1BRC GitHub page</a>.
The <code>jbang</code> tool provides very convenient access to it. You run the program
once, and get an HTML file with a flamegraph. The flamegraph then tells you
which functions/methods your program is spending the most time in.</p><p>The third tool, <code>perf</code>, has many features, but for Java the most popular choice
is <code>perf stat</code>. It doesn't analyze any specific method, but gives you insight
into low-level CPU counters. It shows:</p><ul><li>How many instructions it executed</li><li>How many branches and memory accesses</li><li>How many of those were branch/L1 cache misses.</li></ul><p>To receive these insights, I used the following command:</p><p>VisualGC was the most useful in the initial optimization phase. Then, once I
sorted out allocation, the flamegraph proved highly useful to pinpoint the
bottlenecks in the code. However, once the runtime went below ~3 seconds, its
usefulness declined. At this level we're squeezing out performance not from
methods, but from individual CPU instructions. This is where <code>perf stat</code> became
the best tool.</p><p>For reference, here's the <code>perf stat</code> report for our basic implementation:</p><p>It's most helpful to interpret the numbers on a per-row basis (dividing
everything by 1 billion). We can see that the program spends more than 2,000
instructions on each row. No need to get into more details; initially we'll be
driving down just this metric.</p><h2>Optimization 1: Parallelize I/O<a href="#optimization-1-parallelize-io" title="Direct link to heading">#</a></h2><p>A quick profiling run with VisualVM and
<a href="https://questdb.io/html/blog/profile-blog1.html" target="_blank" rel="noopener noreferrer">flamegraph</a> reveals no clear
bottleneck for our initial Streams API code.</p><blockquote><p><strong>Note:</strong> Scroll down the flamegraph page to see the graph!</p></blockquote><p>The time divides roughly equally among three main tasks:</p><ol><li><code>BufferedReader</code> work that outputs a string for each line</li><li>Processing these lines</li><li>Garbage collection (GC)</li></ol><p>VisualVM shows GC cycles running like crazy, 10 times per second or more. What's
worse, there's some spilling to the Old generation, triggering background GC
runs as well. We have to decide what to attack first.</p><p>The first thing most of us at the challenge realized was that we have to
parallelize the I/O. In the above code, a single thread does all the file
reading and emits a stream of lines. This includes finding the newline and
allocating a string for each line. On the other hand, the entire input file fits
into the disk cache. It's a great target for parallelization.</p><p>One tried-and-true approach is to split the file into as many chunks as there
are threads, and process each chunk independently. Unfortunately, in order to
take that step, we have to say goodbye to the concise Streams API and do
everything by hand.</p><p>We could read the chunks using the API of <code>RandomAccessFile</code>, but since it
doesn't natively support buffered reading, it would be a quirky implementation
that would involve copying from the native memory to the Java buffer.</p><p>Instead, everyone went for the <code>mmap</code> approach. This meant that you would work
with the file as if it was a large in-memory array. Java has supported <code>mmap</code>
for a long time, relying on the <code>ByteBuffer</code> API to read the native memory. It
uses <code>int</code> for indexing, limiting the mapped region size to 2 GB.</p><p>The JDK team is currently introducing a newer API based on <code>long</code> indexing,
<code>MemorySegment</code>. In the spirit of 1BRC, which encourages using the latest and
greatest Java features, let's go with that:</p><p>There are some finicky details involved in finding the exact place to split the
files, launch threads, wait on them, and so on. Tending to these details sees
our code explode from the initial 17 lines to 120. You can review it
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog2.java" target="_blank" rel="noopener noreferrer">here</a>
(for now we're using the commented-out "Variant 1" at
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog2.java#L84C20-L84C29" target="_blank" rel="noopener noreferrer">line 84</a>).</p><p>Let's focus on a few key snippets.</p><p>First, the hot loop now looks like this:</p><p>With the Streams API and <code>BufferedReader</code> gone, we run a hand-coded function,
<code>findByte()</code>, to find the separator characters. This avoids creating a string
for the whole line, but still creates strings for the name and the temperature,
using the method named <code>stringAt()</code>. Here are these two methods:</p><p>We also added code to collect the partial results from all the threads and merge
them. All put together, this brings the processing time down by a whopping 4x,
from 66 to 17 seconds!</p><p>On any other day, you may congratulate your expert self on this achievement. But
in the 1BRC, we were just getting started.</p><p>Let's see the <code>perf stat</code> report on this code:</p><p>We halved the number of instructions per row to 945.</p><p>Another <a href="https://questdb.io/html/blog/profile-blog2-variant1.html" target="_blank" rel="noopener noreferrer">flamegraph</a> reveals
that GC time has almost disappeared. But in VisualVM, we can see there's still a
lot of minor GC runs, although they use much less CPU because there's no more
promotion to the Old generation.</p><p>The CPU is now spending most of its time in <code>stringAt</code>, primarily in string
creation and in copying the data from native memory into a heap-allocated
<code>byte[]</code>. Significant time is also spent in <code>Map.computeIfAbsent()</code>,
<code>Double.parseDouble()</code>, and <code>findByte()</code>.</p><p>Let's attack temperature parsing first.</p><h2>Optimization 2: Directly parse temperature as int<a href="#optimization-2-directly-parse-temperature-as-int" title="Direct link to heading">#</a></h2><p>We can improve temperature parsing a lot. As it is, first we allocate a
<code>String</code>, then call <code>parseDouble()</code> on it, and then convert to <code>int</code> for
efficient storage and calculation. Instead, we should
directly create the integer:</p><p>This code is in the
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog2.java" target="_blank" rel="noopener noreferrer">same file as above</a>,
only using "Variant 2" at
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog2.java#L88" target="_blank" rel="noopener noreferrer">line 88</a>.</p><p>With this change alone, our time drops by 1.6x, to 11 seconds. Not only do we
spend much less CPU cycles on parsing, we also eliminate the allocation of a
temporary <code>String</code>.</p><p>And now, the <code>perf stat</code> report:</p><p>Instruction count dropped by another 1.6x, down to 607 per row.</p><p>The new <a href="https://questdb.io/html/blog/profile-blog2-variant2.html" target="_blank" rel="noopener noreferrer">flamegraph</a> shows
that temperature parsing shrunk from 21% of total time to just 6%. The time
spent in <code>stringAt()</code> has also dropped, since we now call it only once. However,
it still looms large, at 35% of total time.</p><p>What can we do?</p><h2>Optimization 3: Custom hashtable<a href="#optimization-3-custom-hashtable" title="Direct link to heading">#</a></h2><p>We'd like to avoid calling <code>stringAt()</code> for the station name, because it
involves copying the data and initializing a new string instance. In almost all
cases, the only purpose of that instance is to find the existing entry in the
<code>HashMap</code>.</p><p>However, avoiding calls to <code>stringAt()</code> will be pretty hard to accomplish if we
stick to using <code>HashMap</code>. It expects that we pass in an instance of the key
class that is equal to an existing instance. We'd rather avoid that. So‚Ä¶ maybe
we should build a custom hashtable?</p><p>This may sound crazy at first. Isn't Java supposed to already have a
super-optimized HashMap implementation? Were they all lying to us when they said
"don't be a smartass, use the standard library"?</p><p>Well, no. In general, they're totally right.</p><p>But here we have a highly specific, highly constrained problem, and we can do a
lot better with a custom implementation. Beyond our main motivation to get rid
of <code>stringAt()</code>, <code>HashMap</code> has to gracefully serve each and every use case, and
even defend from denial-of-service attacks.</p><p>We're fighting for every CPU cycle and want our implementation to do the bare
minimum that serves the purpose.</p><p>On top of all that, you'll see that implementing an open-addressed hashtable
with a predetermined size isn't all that much trouble. Here's most of the code
you need (full code
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog3.java" target="_blank" rel="noopener noreferrer">here</a>):</p><p>And here's the main loop that uses it:</p><p>Instead of creating a string every time, now we just store the location of the
name within the file. With this, we have completely eliminated allocation within
the hot loop. The GC thread is now idle.</p><p>That's great on its own, but the main benefit is something else: zero allocation
stops the churning of the CPU cache contents. Now the cache fills up with the
hashtable data, which is very important because that's the part of our in-memory
state where we can't avoid random access.</p><p>Now our runtime is down to 6.6 seconds, a 1.7x speedup ‚Äî our approach was worth
it.</p><p>Let's check in with <code>perf stat</code>:</p><p>We improved instructions-per row again by 1.6x. As predicted, cache misses
improved even more, by 2.2x.</p><p>And our <a href="https://questdb.io/html/blog/profile-blog3.html" target="_blank" rel="noopener noreferrer">flamegraph</a>? It now reveals
that 47% of total time is spent in <code>findAcc</code> ‚Äî we'll see if we can improve that.
Also it points out that, as we optimized other things, 20% of our CPU time is
now spent parsing the temperature. Hmmmm. More to do!</p><p>But before we go on, let's check into how GraalVM is working for us. So far,
we've been running all our optimization steps on GraalVM. But how would this
code run on OpenJDK?</p><p>It would take 9.6 seconds, or 3.3 seconds slower than GraalVM. That's a 45%
improvement!</p><h2>Optimization 4: sun.misc.Unsafe, SWAR<a href="#optimization-4-sunmiscunsafe-swar" title="Direct link to heading">#</a></h2><p>So far, we have improved on our initial solution by a clean order of magnitude:
from 66 seconds down to 6.6 seconds. Not bad. The techniques we applied are
relatively simple to digest and use standard, safe Java.</p><p>Even if you stop reading here, you'll walk away with a set of tricks that can
make you a performance hero in your own projects. <strong>But we want to push far
beyond this level of performance!</strong></p><p>For that, 1BRC contestants looked to more esoteric optimizations.</p><p>Some of them are obviously dangerous and can result in hard JVM crashes with a
low-level Segmentation Fault. Others are highly specific to this challenge.</p><p>Readability and maintainability also take a big hit, while providing diminishing
returns in performance. But, a challenge is a challenge, and the contestants
pressed on without looking back!</p><p>For this next iteration, we'll apply a few techniques that all the top solutions
shared:</p><ul><li><p>Use <code>sun.misc.Unsafe</code> instead of <code>MemorySegment</code> to avoid bounds checks</p></li><li><p>Avoid re-reading the same input bytes: reuse the same loaded value for hashing
and semicolon search</p></li><li><p>Process the data 8 bytes at a time, using a SWAR technique to find the
semicolon</p></li><li><p>Use <a href="https://github.com/MeryKitty" target="_blank" rel="noopener noreferrer">@merykitty</a>'s magic SWAR (SIMD Within A
Register) code to parse the temperature</p></li></ul><p>Now check out the new hot loop. It's
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog4.java" target="_blank" rel="noopener noreferrer">looking pretty alien</a>:</p><p>And wait till you see the methods this calls into:</p><p>That's a lot of bit-twiddling magic, but note one general thing: there are
almost no <code>if</code> statements, and that's the point. We replaced branch instructions
with straight-through bitwise calculation.</p><p>The CPU now tries to predict whether it will go into the "then" or the "else"
branch for each <code>if</code> statement, based on previous iterations. As a result, it
starts to decode the appropriate instructions before having all the data ready
to evaluate the condition.</p><p>So, whenever it gets it wrong, it has to discard all that work and start to
decode the other instructions. As a rule of thumb, a single branch misprediction
costs as much as 10-15 instructions.</p><p>We also applied the SWAR idea: SIMD Within A Register, which means treating a
<code>long</code> number as a vector of 8 byte values, and performing the same operation on
each.</p><p>In our case, <code>semicolonMatchBits()</code> locates the ASCII semicolon byte and returns
a <code>long</code> with bits set to one where it was found. Then the method <code>nameLen()</code>
turns that bit pattern into the number telling us where it is. This comes from a
standard technique, used for example in C to efficiently determine the length of
a zero-terminated string.</p><blockquote><p>Read a detailed explanation of a very similar approach in this insightful post
<a href="https://richardstartin.github.io/posts/finding-bytes#finding-null-terminators-without-branches" target="_blank" rel="noopener noreferrer">Finding Null Terminators without Branches</a>
by Richard Startin.</p></blockquote><p>The method <code>maskWord()</code> takes a <code>long</code> containing 8 bytes of input data and
zeroes out all the bytes beyond the semicolon. We need this to perform a fast
name equality check.</p><p>The algorithm in <code>parseTemperature()</code> and <code>dotPos()</code> is a genius creation by
<a href="https://github.com/MeryKitty" target="_blank" rel="noopener noreferrer">@merykitty</a> (Quan Anh Mai), who made it
specifically for this challenge. It leverages the properties of the bit patterns
of ASCII <code>-</code> and <code>.</code>, as well as several other tricks, and produces the integer
value of the two or three temperature digits, accounting for all four possible
patterns (<code>X.X</code>, <code>-X.X</code>, <code>XX.X</code> and <code>-XX.X</code>) in one go.</p><p>If you want to study it in more detail, keep in mind that the number string is
stored in the long in little-endian order. For example, this line:
<code>long signed = (invNumberBytes &lt;&lt; 59) &gt;&gt; 63;</code> isolates bit number 4 of the first
byte ‚Äì the one where the minus sign may appear ‚Äì and sign-extends it across the
<code>long</code>.</p><p>This bit is 0 in the <code>-</code> sign, and 1 in all the digits. The operation is done
after flipping all the bits (<code>~numberBytes</code>), so this becomes either all 1's if
the byte is <code>-</code>, or all 0's otherwise.</p><p>This parsing code deserves a blog post of its own, and it would distract us too
much to explain it in detail here. Instead I've thrown in
<a href="https://github.com/MeryKitty" target="_blank" rel="noopener noreferrer">@merykitty</a>'s original code, and expanded his
comments a bit more:</p><p>All these techniques put together result in a 2.8x speedup. From 6.6 seconds,
we're now down to 2.4 seconds. Our overall improvement is now 28x.</p><p>As <code>perf stat</code> reports:</p><p>There is a huge drop in instruction count, by 3x. Since that's just 120
instructions per row now, we should look into making the same number of
instructions execute faster. One thing stands out: there are 0.66
<code>branch-misses</code> per row.</p><p>Can we do something about that?</p><h2>Optimization 5: Win with statistics<a href="#optimization-5-win-with-statistics" title="Direct link to heading">#</a></h2><p>The <a href="https://questdb.io/html/blog/profile-blog4.html" target="_blank" rel="noopener noreferrer">flamegraph</a> for our current
solution indicates that the relative impact of methods hasn't changed much. The
CPU spends 45% of its time total inside <code>findAcc()</code>, and just <code>nameEquals()</code>
alone takes 19%:</p><p>On the surface, that looks pretty efficient. It compares the station names eight
bytes at a time, and even uses the trick of reusing the mask operation on the
last block, passing it in as <code>lastNameWord</code>. But, it has a loop, which results
in unpredictable branching, and it re-reads the input name from memory.</p><p>How do we know the branch instruction in the loop will be unpredictable? The
answer lies in the statistics of the station names.</p><p>If most of the names are less than 8 bytes long, the condition that decides
whether to go into another iteration will always be false, and that will result
in a predictable branch instruction.</p><p>So, what's the actual distribution of the name lengths? While doing the
challenge, I wrote some code on the side, in a file called
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Statistics.java" target="_blank" rel="noopener noreferrer">Statistics.java</a>,
to find out things like that.</p><p>The <code>distribution()</code> method prints out the statistical distribution of name
lengths. If you run it on a dataset generated using one of the scaffolding
scripts (<code>create_meauserements.sh</code>) from the 1BRC repo, you'll see that there's
an almost even split between the names up to and longer than 8 bytes.</p><p>I also wrote a method that simulates the CPU's branch prediction
(<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Statistics.java#L46" target="_blank" rel="noopener noreferrer"><code>branchPrediction()</code></a>
in the same file). The CPU has a Branch History Table (BHT) that tracks the
behavior of each branch instruction in the hot loop.</p><p>An entry in the table is a 2-bit saturating counter which increments/decrements
depending on the outcome of the branch condition. Instead of overflowing, it
gets stuck at the min/max value (in other words, it saturates). When the counter
is 0 or 1, it predicts that the branch will be taken; if it's 2 or 3, in
predicts it won't be taken.</p><p>Running <code>Statistics.branchPrediction()</code> with the condition
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Statistics.java#L63" target="_blank" rel="noopener noreferrer"><code>nameLen &gt; 8</code></a>
results in 50% branch mispredictions. But if we change the condition in that
line of code to <code>nameLen &gt; 16</code>, mispredictions drop to just 2.5%.</p><p>Informed by this finding, it's clear that we have to write some code to avoid
any branch instructions on the condition <code>nameLen &gt; 8</code>, and instead go directly
for <code>nameLen &gt; 16</code>.</p><p>To do that, we have to unroll the semicolon-searching loop along these lines:</p><ol><li>Perform the first two steps in one go, without checking any conditions</li><li>Use bit-twiddling logic to combine the results of finding the semicolon in
each of the two <code>long</code> words</li><li>Use the combined result in an <code>if</code> check, which now accounts for all the
initial 16 bytes</li></ol><p>We also need specialized variants of <code>findAcc()</code> and <code>nameEquals()</code> for the
cases where the name is up to 16 bytes or more.</p><p>In
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog5.java" target="_blank" rel="noopener noreferrer">my solution</a>,
this reduces the time to 1.8 seconds ‚Äî another 33% improvement, for the new
total improvement of ~40x.</p><p>And <code>perf stat</code> confirms our reasoning:</p><p>There's only a modest improvement in instructions per row, from 120 to 98. But
look at "branch-misses"! It dropped almost 8 times, from 0.657 to 0.084 per row.</p><p>This explains most of the speed improvement. Cache misses dropped as well, from
0.092 to 0.069 per row. This probably comes from the improved memory layout of
our stats accumulator, which now stores the first 16 name bytes inside the class
instance, and not in the separately-allocated array.</p><p>Another metric that people like to track is instructions-per-cycle (IPC). We can
see that it improved in this last step from 1.89 to 2.19. Reducing branch
mispredictions means that the CPU has to do a lot less rework, discarding the
speculatively executed instructions. This combines with the drop in
instructions-per-row to explain the overall 33% improvement.</p><h2>Optimization 6: Eliminate startup/cleanup costs<a href="#optimization-6-eliminate-startupcleanup-costs" title="Direct link to heading">#</a></h2><p>If we want to compare our current result of 1.8 seconds to the winner, 1.5
seconds, we have to take into account the measurement methodology.</p><p>All along this post, we've been reporting inner timings, that the code reports
for itself. The outer timing, as measured in the contest, includes both the JVM
startup and cleanup at the end. This adds 200 milliseconds - so we're actually
at 2.0 seconds compared to 1.5 seconds.</p><p>@thomaswue realized that around half of this time, 100 ms, is spent on unmapping
the memory-mapped file after the output is already produced. He found a way to
avoid paying for this with a hack, which was immediately copied by all the other
top contenders. He started a subprocess that would actually do the work, so that
the parent process could end as soon as it forwarded all the output. It would
then leave the subprocess to clean up in the background.</p><p>For this trick to work, contestants had to eliminate the JVM startup time as
well, otherwise they'd pay for it twice. This would cancel out all the
improvement! As a result, this forced everyone to also use ahead-of-time
compilation into a native binary.</p><p>With these two tricks added, our outer timing becomes almost identical to the
inner timing we've been reporting, which means we are truly getting close!</p><h2>Optimization 7: Use smaller chunks and work stealing<a href="#optimization-7-use-smaller-chunks-and-work-stealing" title="Direct link to heading">#</a></h2><p>At this point, we're deep into low-level optimization territory. The tricks that
further improve the timing are coupled to the detailed specifics of
<strong>everything</strong>, such as:</p><ul><li>CPU make and model</li><li>Architecture of the connection to the RAM subsystem</li><li>Minute details of the compiler</li></ul><p>Explaining all these tricks would get us deep into the weeds, and wouldn't be
reusable knowledge. Instead let me show you one last trick that's kind of cute,
and might come in handy in real-life scenarios.</p><p>The way we divide the work into a single chunk per thread, we can end up with
some threads getting "luckier" than others and completing sooner. When that
happens, the CPU is underutilized for the remaining computation.</p><p>To address this, we can introduce a small update that changes this to a larger
number of small, fixed-size chunks. Up-front we'll only calculate the number of
chunks, and then let the threads grab them and calculate their bounds when
they're ready.</p><p>The key element is in ensuring that every chunk gets processed <strong>exactly once</strong>.</p><p>And the beauty of it is that it's almost a one-liner:</p><p>And that's it! All the magic happens in the
<a href="https://github.com/mtopolnik/billion-row-challenge/blob/main/src/Blog6.java" target="_blank" rel="noopener noreferrer">atomic counter we increment</a>.
This trick ekes out one last tenth of a second, down to 1.7 seconds.</p><h2>Conclusion<a href="#conclusion" title="Direct link to heading">#</a></h2><p>At the end of our 1BRC speedrun, we managed a 42x improvement over the Parallel
Streams implementation on OpenJDK, from 71 seconds down to 1.7. You may notice
that my official 1BRC result was quite a bit worse, at 2.3 seconds. The code in
this post is different from what I submitted; some of it I wrote just for the
post. It turned out that I had to choose between one last round of optimization
at 1BRC, or giving full attention to the challenge I got while getting hired for
QuestDB. I'm very glad I chose the latter!</p><p>Performance optimizations we went through are certainly impressive, but do keep
in mind that a lot of the gains come from dispensing with all the best practices
that apply to production code: validations, bounds checks, hashtable resizing,
and so on.</p><p>The sole purpose of this code was to be fast at one very particularly specified,
error-free input file. It has absolutely no tolerance for any kind of deviation,
for example a single temperature reading that exceeds the three-digit maximum
would cause it to completely lose track, and probably crash.</p><p>But, coding challenges are meant to be fun ‚Äî and everybody knows input
validation is the opposite of fun!</p><div><p><a href="https://questdb.io/download/">Download QuestDB</a><span> Open source under Apache 2.0. Blazing fast ingest. SQL analytics. </span></p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Yale will again require standardized test scores for admission (114 pts)]]></title>
            <link>https://www.washingtonpost.com/education/2024/02/22/yale-sat-act-admissions-requirement-reinstated/</link>
            <guid>39467434</guid>
            <pubDate>Thu, 22 Feb 2024 14:21:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.washingtonpost.com/education/2024/02/22/yale-sat-act-admissions-requirement-reinstated/">https://www.washingtonpost.com/education/2024/02/22/yale-sat-act-admissions-requirement-reinstated/</a>, See on <a href="https://news.ycombinator.com/item?id=39467434">Hacker News</a></p>
Couldn't get https://www.washingtonpost.com/education/2024/02/22/yale-sat-act-admissions-requirement-reinstated/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Launch HN: Danswer (YC W24) ‚Äì Open-source AI search and chat over private data (158 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=39467413</link>
            <guid>39467413</guid>
            <pubDate>Thu, 22 Feb 2024 14:20:15 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=39467413">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><td><table>
        <tbody><tr id="39467413">
      <td><span></span></td>      <td><center><a id="up_39467413" href="https://news.ycombinator.com/vote?id=39467413&amp;how=up&amp;goto=item%3Fid%3D39467413"></a></center></td><td><span><a href="https://news.ycombinator.com/item?id=39467413">Launch HN: Danswer (YC W24) ‚Äì Open-source AI search and chat over private data</a></span></td></tr><tr><td colspan="2"></td><td><span>
          <span id="score_39467413">103 points</span> by <a href="https://news.ycombinator.com/user?id=yuhongsun">yuhongsun</a> <span title="2024-02-22T14:20:15"><a href="https://news.ycombinator.com/item?id=39467413">6 hours ago</a></span> <span id="unv_39467413"></span> | <a href="https://news.ycombinator.com/hide?id=39467413&amp;goto=item%3Fid%3D39467413">hide</a> | <a href="https://hn.algolia.com/?query=Launch%20HN%3A%20Danswer%20(YC%20W24)%20%E2%80%93%20Open-source%20AI%20search%20and%20chat%20over%20private%20data&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0">past</a> | <a href="https://news.ycombinator.com/fave?id=39467413&amp;auth=e5dba59dccbda2aa048d8452a8192a917c90f5bf">favorite</a> | <a href="https://news.ycombinator.com/item?id=39467413">72&nbsp;comments</a>        </span>
              </td></tr>
    <tr></tr><tr><td colspan="2"></td><td><div><p>Hey HN! Chris and Yuhong here from Danswer (<a href="https://github.com/danswer-ai/danswer">https://github.com/danswer-ai/danswer</a>). We‚Äôre building an open source and self-hostable ChatGPT-style system that can access your team‚Äôs unique knowledge by connecting to 25 of the most common workplace tools (Slack, Google Drive, Jira, etc.). You ask questions in natural language and get back answers based on your team‚Äôs documents. Where relevant, answers are backed by citations and links to the exact documents used to generate them.</p><p>Quick Demo: <a href="https://youtu.be/hqSouur2FXw" rel="nofollow">https://youtu.be/hqSouur2FXw</a></p><p>Originally Danswer was a side project motivated by a challenge we experienced at work. We noticed that as teams scale, finding the right information becomes more and more challenging. I recall being on call and helping a customer recover from a mission critical failure but the error was related to some obscure legacy feature I had never used. For most projects, a simple question to ChatGPT would have solved it; but in this moment, ChatGPT was completely clueless without additional context (which I also couldn‚Äôt find).</p><p>We believe that within a few years, every org will be using team-specific knowledge assistants. We also understand that teams don‚Äôt want to tell us their secrets and not every team has the budget for yet another SaaS solution, so we open-sourced the project. It is just a set of containers that can be deployed on any cloud or on-premise. All of the data is processed and persisted on that same instance. Some teams have even opted to self-host open-source LLMs to truly airgap the system.</p><p>I also want to share a bit about the actual design of the system (<a href="https://docs.danswer.dev/system_overview" rel="nofollow">https://docs.danswer.dev/system_overview</a>). If you have questions about any parts of the flow such as the model choice, hyperparameters, prompting, etc. we‚Äôre happy to go into more depth in the comments.</p><p>The system revolves around a custom Retrieval Augmented Generation (RAG) pipeline we‚Äôve built. During indexing time (we pull documents from connected sources every 10 minutes), documents are chunked and indexed into hybrid keyword+vector indices (<a href="https://github.com/danswer-ai/danswer/blob/main/backend/danswer/indexing/indexing_pipeline.py#L211">https://github.com/danswer-ai/danswer/blob/main/backend/dans...</a>).</p><p>For the vector index (which gives the system the flexibility to understand natural language queries), we use state of the art prefix-aware embedding models trained with contrastive loss. Optionally the system can be configured to go over each doc with multiple passes of different granularity to capture wide context vs fine details. We also supplement the vector search with a keyword based BM25 index + N-Grams so that the system performs well even in low data domains. Additionally we‚Äôve added in learning from feedback and time based decay‚Äîsee our custom ranking function (<a href="https://github.com/danswer-ai/danswer/blob/main/backend/danswer/document_index/vespa/app_config/schemas/danswer_chunk.sd#L187">https://github.com/danswer-ai/danswer/blob/main/backend/dans...</a> ‚Äì this flexibility is why we love Vespa as a Vector DB).</p><p>At query time, we preprocess the query with query-augmentation, contextual-rephrasing, as well as standard techniques like removing stopwords and lemmatization. Once the top documents are retrieved, we ask a smaller LLM to decide which of the chunks are ‚Äúuseful for answering the query‚Äù (this is something we haven‚Äôt seen much of elsewhere, but our tests have shown to be one of the biggest drivers for both precision and recall). Finally the most relevant passages are passed to the LLM along with the user query and chat history to produce the final answer. We post-process by checking guardrails and extracting citations to link the user to relevant documents. (<a href="https://github.com/danswer-ai/danswer/blob/main/backend/danswer/prompts/chat_prompts.py#L20">https://github.com/danswer-ai/danswer/blob/main/backend/dans...</a>)</p><p>The Vector and Keyword indices are both stored locally and the NLP models run on the same instance (we‚Äôve chosen ones that can run without GPU). The only exception is that the default Generative model is OpenAI‚Äôs GPT, however this can also be swapped out (<a href="https://docs.danswer.dev/gen_ai_configs/overview" rel="nofollow">https://docs.danswer.dev/gen_ai_configs/overview</a>).</p><p>We‚Äôve seen teams use Danswer on problems like: Improving turnaround times for support by reducing time taken to find relevant documentation; Helping sales teams get customer context instantly by combing through calls and notes; Reducing lost engineering time from answering cross-team questions, building duplicate features due to inability to surface old tickets or code merges, and helping on-calls resolve critical issues faster by providing the complete history on an error in one place; Self-serving onboarding for new members who don‚Äôt know where to find information.</p><p>If you‚Äôd like to play around with things locally, check out the quickstart guide here: <a href="https://docs.danswer.dev/quickstart" rel="nofollow">https://docs.danswer.dev/quickstart</a>. If you already have Docker, you should be able to get things up and running in &lt;15 minutes. And for folks who want a zero-effort way of trying it out or don‚Äôt want to self-host, please visit our Cloud: <a href="https://www.danswer.ai/">https://www.danswer.ai/</a></p></div></td></tr>        <tr></tr><tr><td colspan="2"></td><td><form action="comment" method="post"></form></td></tr>  </tbody></table>
  </td></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Pages CMS ‚Äì A CMS for GitHub (293 pts)]]></title>
            <link>https://pagescms.org</link>
            <guid>39467132</guid>
            <pubDate>Thu, 22 Feb 2024 13:58:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pagescms.org">https://pagescms.org</a>, See on <a href="https://news.ycombinator.com/item?id=39467132">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      
        <li>
          
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
          <h3>Configurable</h3>
          <p>Customize content types, views, search, and more.</p>
        </li>
      
        <li>
          
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path><path d="m15 5 4 4"></path></svg>
          <h3>Visual editor</h3>
          <p>Rich-text, syntax highlighting, and more.</p>
        </li>
      
        <li>
          
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z"></path><path d="M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z"></path><path d="M3 5a2 2 0 0 0 2 2h3"></path><path d="M3 3v13a2 2 0 0 0 2 2h3"></path></svg>
          <h3>Media manager</h3>
          <p>Drag and drop upload, multi-file selection, and more.</p>
        </li>
      
        <li>
          
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
          <h3>Search</h3>
          <p>Fast, full-text and faceted search across your content.</p>
        </li>
      
        <li>
          
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg>
          <h3>Github</h3>
          <p>Manage any website or app hosted on GitHub directly.</p>
        </li>
      
        <li>
          <span>Pro</span>
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z"></path><path d="m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10"></path></svg>
          <h3>Email invites</h3>
          <p>Invite users via email, no other account needed.</p>
        </li>
      
        <li>
          <span>Pro</span>
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path></svg>
          <h3>File storage</h3>
          <p>Connect with AWS S3, Cloudflare R2, and more.</p>
        </li>
      
        <li>
          <span>Pro</span>
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"></path><path d="M16 2v4"></path><path d="M8 2v4"></path><path d="M3 10h5"></path><path d="M17.5 17.5 16 16.25V14"></path><path d="M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"></path></svg>
          <h3>Scheduling</h3>
          <p>Easily schedule one-off or recurring content updates.</p>
        </li>
      
        <li>
          <span>Pro</span>
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="4" y1="21" y2="14"></line><line x1="4" x2="4" y1="10" y2="3"></line><line x1="12" x2="12" y1="21" y2="12"></line><line x1="12" x2="12" y1="8" y2="3"></line><line x1="20" x2="20" y1="21" y2="16"></line><line x1="20" x2="20" y1="12" y2="3"></line><line x1="2" x2="6" y1="14" y2="14"></line><line x1="10" x2="14" y1="8" y2="8"></line><line x1="18" x2="22" y1="16" y2="16"></line></svg>
          <h3>Permissions</h3>
          <p>Granular access control for different content types.</p>
        </li>
      
        <li>
          <span>Pro</span>
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"></path><path d="M13 17V9"></path><path d="M18 17V5"></path><path d="M8 17v-3"></path></svg>
          <h3>Analytics</h3>
          <p>Integrate with GA, Cloudflare Analytics, and more.</p>
        </li>
      
        <li>
          <span>Pro</span>
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
          <h3>Collaborative editing</h3>
          <p>Real-time content editing with other team members.</p>
        </li>
      
        <li>
          <span>Pro</span>
          
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="6" x2="6" y1="3" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path></svg>
          <h3>Comments</h3>
          <p>Let your team leave inline comments on any part of your content.</p>
        </li>
      
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Africa is building a Great Green Wall to prevent expansion of the Sahara (102 pts)]]></title>
            <link>https://www.youtube.com/watch?v=WCli0gyNwL0</link>
            <guid>39466851</guid>
            <pubDate>Thu, 22 Feb 2024 13:38:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.youtube.com/watch?v=WCli0gyNwL0">https://www.youtube.com/watch?v=WCli0gyNwL0</a>, See on <a href="https://news.ycombinator.com/item?id=39466851">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Stable Diffusion 3 (895 pts)]]></title>
            <link>https://stability.ai/news/stable-diffusion-3</link>
            <guid>39466630</guid>
            <pubDate>Thu, 22 Feb 2024 13:20:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://stability.ai/news/stable-diffusion-3">https://stability.ai/news/stable-diffusion-3</a>, See on <a href="https://news.ycombinator.com/item?id=39466630">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="page" role="main">
        
          
<article id="sections" data-page-sections="62f2452bc121595f4d87c71c">
  
  
    
    


  


<div data-content-field="main-content" data-item-id="" data-test="page-section" data-section-theme="bright-inverse" data-section-id="62f2452bc121595f4d87c71e" data-controller="SectionWrapperController" data-current-styles="{
&quot;imageOverlayOpacity&quot;: 0.15,
&quot;backgroundWidth&quot;: &quot;background-width--full-bleed&quot;,
&quot;sectionHeight&quot;: &quot;section-height--medium&quot;,
&quot;horizontalAlignment&quot;: &quot;horizontal-alignment--center&quot;,
&quot;verticalAlignment&quot;: &quot;vertical-alignment--middle&quot;,
&quot;contentWidth&quot;: &quot;content-width--wide&quot;,
&quot;sectionTheme&quot;: &quot;bright-inverse&quot;,
&quot;sectionAnimation&quot;: &quot;none&quot;,
&quot;backgroundMode&quot;: &quot;image&quot;
}" data-current-context="{
&quot;video&quot;: {
&quot;playbackSpeed&quot;: 0.5,
&quot;filter&quot;: 1,
&quot;filterStrength&quot;: 0,
&quot;zoom&quot;: 0,
&quot;videoSourceProvider&quot;: &quot;none&quot;
},
&quot;backgroundImageId&quot;: null,
&quot;backgroundMediaEffect&quot;: null,
&quot;divider&quot;: null,
&quot;typeName&quot;: &quot;blog-side-by-side&quot;
}" data-animation="none">
  <article id="article-">
  
    <div data-layout-label="Post Body" data-type="item" id="item-65d5e5f32fb63e6125283244"><div data-test="image-block-inline-outer-wrapper" data-block-type="5" id="block-yui_3_17_2_1_1708545802439_2722">

      

      
        <figure>
          
        
        

        
          
            
          
        

        
          
          <figcaption>
            <p><em>Prompt: Epic anime artwork of a wizard atop a mountain at night casting a cosmic spell into the dark sky that says "Stable Diffusion 3" made out of colorful energy</em></p>
          </figcaption>
        
      
        </figure>
      

    </div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-75ac78fe9c5c87851f32">
  <p>Announcing Stable Diffusion 3 in early preview, our most capable text-to-image model with greatly improved performance in multi-subject prompts, image quality, and spelling abilities.&nbsp;</p><p>While the model is not yet broadly available, today, we are opening the waitlist for an early preview. This preview phase, as with previous models, is crucial for gathering insights to improve its performance and safety ahead of an open release. You can sign up to join the waitlist <a href="http://stability.ai/stablediffusion3" target="_blank"><span>here</span></a>.&nbsp;</p>
</div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1708545802439_5443">

<p>The Stable Diffusion 3 suite of models currently range from 800M to 8B parameters. This approach aims to align with our core values and democratize access, providing users with a variety of options for scalability and quality to best meet their creative needs. Stable Diffusion 3 combines a <a href="https://arxiv.org/abs/2212.09748" target="_blank"><span>diffusion transformer architecture</span></a> and <a href="https://arxiv.org/abs/2210.02747" target="_blank"><span>flow matching</span></a>. We will publish a detailed technical report soon.</p>




















  
  



</div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1708545802439_9832">

<p>We believe in safe, responsible AI practices. This means we have taken and continue to take reasonable steps to prevent the misuse of Stable Diffusion 3 by bad actors. Safety starts when we begin training our model and continues throughout the testing, evaluation, and deployment. In preparation for this early preview, we‚Äôve introduced numerous safeguards. By continually collaborating with researchers, experts, and our community, we expect to innovate further with integrity as we approach the model‚Äôs public release.&nbsp;</p>




















  
  



</div><div data-block-type="2" data-border-radii="{&quot;topLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;topRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomLeft&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0},&quot;bottomRight&quot;:{&quot;unit&quot;:&quot;px&quot;,&quot;value&quot;:0.0}}" id="block-yui_3_17_2_1_1708545802439_10732">
  <p>Our commitment to ensuring generative AI is open, safe, and universally accessible remains steadfast. With Stable Diffusion 3, we strive to offer adaptable solutions that enable individuals, developers, and enterprises to unleash their creativity, aligning with our mission to activate humanity‚Äôs potential.</p><p>If you‚Äôd like to explore using one of our other image models for commercial use prior to the Stable Diffusion 3 release, please visit our<a href="https://stability.ai/membership" target="_blank"> </a><a href="https://stability.ai/membership"><span>Stability AI Membership</span></a> page to self host or our<a href="https://platform.stability.ai/" target="_blank"> </a><a href="https://platform.stability.ai/"><span>Developer Platform</span></a> to access our API.&nbsp;<br></p><p>To stay updated on our progress follow us on <a href="https://twitter.com/stabilityai" target="_blank"><span>Twitter</span></a>, <a href="https://www.instagram.com/stability.ai/" target="_blank"><span>Instagram</span></a>, <a href="https://www.linkedin.com/company/stability-ai" target="_blank"><span>LinkedIn</span></a>, and join our <a href="https://discord.gg/stablediffusion" target="_blank"><span>Discord Community</span></a>.</p>
</div></div>
  
</article>

</div>

  
</article>


          

          
            
              

            
          
        
      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Reading "A Programmer's Guide to Common Lisp" (175 pts)]]></title>
            <link>https://journal.paoloamoroso.com/reading-a-programmers-guide-to-common-lisp</link>
            <guid>39466417</guid>
            <pubDate>Thu, 22 Feb 2024 13:00:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://journal.paoloamoroso.com/reading-a-programmers-guide-to-common-lisp">https://journal.paoloamoroso.com/reading-a-programmers-guide-to-common-lisp</a>, See on <a href="https://news.ycombinator.com/item?id=39466417">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>I got a cheap used copy of the book <a href="https://books.google.it/books/about/A_Programmer_s_Guide_to_COMMON_LISP.html?id=saIZAQAAIAAJ"><em>A Programmer's Guide to COMMON LISP</em></a> by Deborah G. Tatar, Digital Press, 1987.</p>

<p><a href="https://i.snap.as/tqNa1b4B.jpg"><img src="https://i.snap.as/tqNa1b4B.jpg" alt="The book A Programmer's Guide to COMMON LISP by Deborah G."></a></p>

<p>Why did I read such an old book, published a few years after CLtL1 and well before ANSI finalized the Common Lisp standard?</p>

<p>I'm always looking for good Lisp books. Since <a href="https://interlisp.org/">Medley</a> is my primary Lisp environment, I'm particularly interested in books published when the system was originally developed and used. These works are relevant because they cover a set of features close to the state of the Common Lisp implementation of Medley, and present a programming style typical of Lisp development in those years.</p>

<p>Two old reviews got me curious about <em>A Programmer's Guide to COMMON LISP</em>, one <a href="https://dl.acm.org/doi/10.1145/1862396.1862402">by Daniel Weinreb</a> and the other <a href="https://dl.acm.org/doi/pdf/10.1145/24900.885745">by Richard Caruana</a>.</p>

<p>Both reviews point out the book is different from most contemporary introductory Lisp books which focus on AI. Although Tatar's does contain some AI code, such as an interesting and complete toy expert system, the sample code spans a wider range of domains like a text formatter similar to <code>nroff</code>.</p>

<p>What sets <em>A Programmer's Guide to COMMON LISP</em> apart from other Lisp books is its environment independent discussion of the interactive Lisp programming process. Writing code in the editor, evaluating expressions from the editor, interacting with the REPL for testing expressions and exploring, and so on.</p>

<p>I've never seen the process expressed so clearly in any book, past of present. I'm familiar with it but the material is particulary helpful for complete beginners.</p>

<p>Although the short chapter on macros presents some interesting examples like a simplified version of <code>defstruct</code>, it doesn't discuss <code>gensym</code> and variable capture. This is unusual. But it's only one of a few issues and the book is a valuable addition to my Lisp library.</p>

<p><a href="https://journal.paoloamoroso.com/tag:CommonLisp"><span>#</span><span>CommonLisp</span></a> <a href="https://journal.paoloamoroso.com/tag:books"><span>#</span><span>books</span></a> <a href="https://journal.paoloamoroso.com/tag:Lisp"><span>#</span><span>Lisp</span></a></p>

<p><a href="https://remark.as/p/journal.paoloamoroso.com/reading-a-programmers-guide-to-common-lisp">Discuss...</a>
<a href="mailto:info@paoloamoroso.com?subject=Reply%20to%20Paolo%20Amoroso%27s%20Journal">Email</a> | Reply <a href="https://journal.paoloamoroso.com/@/amoroso@fosstodon.org">@<span>amoroso@fosstodon.org</span></a></p>


</div></div>]]></description>
        </item>
    </channel>
</rss>