<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Thu, 18 Apr 2024 17:00:08 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Meta Llama 3 (394 pts)]]></title>
            <link>https://llama.meta.com/llama3/</link>
            <guid>40077533</guid>
            <pubDate>Thu, 18 Apr 2024 15:57:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://llama.meta.com/llama3/">https://llama.meta.com/llama3/</a>, See on <a href="https://news.ycombinator.com/item?id=40077533">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Halo 2 in HD: Pushing the Original Xbox to the Limit (184 pts)]]></title>
            <link>https://icode4.coffee/?p=738</link>
            <guid>40076345</guid>
            <pubDate>Thu, 18 Apr 2024 14:01:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://icode4.coffee/?p=738">https://icode4.coffee/?p=738</a>, See on <a href="https://news.ycombinator.com/item?id=40076345">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
									
									
<p>This blog post goes over all of the work I’ve done to add HD resolution support to the Original Xbox version of Halo 2. From patching the game to modifying the hardware of the Xbox console to writing custom tools for performance benchmarking, my goal with this project was to push the limits of both and see how far I could go. I’ve tried to keep this blog post as short as I could and only include the most technically interesting parts but even then it ended up quite long.</p>



<h2>Prelude</h2>



<p>A long time friend who goes by the handle “doom” has spent the past few years reverse engineering and researching the hardware and software on the original Xbox. His end goal was to learn more about PC hardware and see how far he could push the console. Some of his work includes swapping out the stock Pentium 3 CPU running at 733Mhz for a variant of the Pentium 3 CPU running at 1.4Ghz using a custom made CPU interposer board, and even being able to overclock it upwards of ~2Ghz. </p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/xbox_upgraded_cpu.png" target="_blank" rel="noopener"><img loading="lazy" width="960" height="720" src="https://icode4.coffee/wp-content/uploads/xbox_upgraded_cpu.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/xbox_upgraded_cpu.png 960w, https://icode4.coffee/wp-content/uploads/xbox_upgraded_cpu-300x225.png 300w, https://icode4.coffee/wp-content/uploads/xbox_upgraded_cpu-768x576.png 768w" sizes="(max-width: 960px) 100vw, 960px"></a><figcaption>Pentium 3 Tualatin on Doom’s custom interposer</figcaption></figure></div>



<p>Doom also wrote custom patches for the Xbox kernel in order to on-the-fly patch timing calculations for games so they ran properly with the faster CPU. Combined with a few other hardware upgrades such as additional RAM and an SSD, doom started to refer to these as “god boxes”. These god boxes were also running a custom kernel (or BIOS image) that doom made to support all of the hardware modifications and push the hardware and software as far as they could go. One of his demos for his work was showing the opening sequence in Half-Life 2 which is notorious for abysmally slow loading times and poor performance on the Xbox, running at a solid 30 FPS and loading in a matter of seconds. But there were still additional benefits to be had. Doom wanted someone to create a proper HD resolution patch for a popular game and really utilize the hardware upgrades he performed. </p>



<p>One night while talking over Discord doom asked if I would be interested in developing an HD patch for Halo 2 and in exchange he would provide me with a god box to develop it on. Halo 2 has a max supported video resolution of 480p and patching in support for 720p (and possibly 1080i) would get a lot of attention to demonstrate the benefits of all this work. We both knew that many of the community “HD” or “720p” game patches were not actually functioning correctly and that patching in HD resolution support for a game was more work than just searching for 640/480 in a disassembler and changing the resolution. These patches require a deep understanding of 3D graphics, DirectX APIs, and a lot of specific knowledge about the game and Xbox console. Having spent years reverse engineering the Xbox and Halo 2’s game engine I had the perfect background to take on the task. As doom would put it “there’s nobody more qualified than you to do it for halo 2 so that’s why I asked”. While it piqued my interest (and I was pretty jealous of these god boxes and all the experience he’d gotten developing them), I made a request/requirement before I would even entertain the idea. </p>



<p>The upgraded CPU has more than double the processing power compared to the stock CPU, however, the GPU was going to take on most of the increased processing load once the video resolution was increased. After all, each additional pixel in the output image would result in more pixel shader calculations which meant more work the GPU would have to do. If he could manage to overclock the GPU I would do it, but at stock clock speeds it wasn’t worth the time it would take to develop this patch just to have it fall over on the GPU. He said he would look into it, and after a few weeks time he came back and said it was done. He managed to overclock the GPU by ~15%, and said he had the “GENESIS-3” console ready for me (a nickname for the 3rd iteration of the “god box” upgrades he’d been working on).</p>



<h2>Part 1: Rendering in HD</h2>



<p>Having spent the past few years reverse engineering and re-implementing the Halo 2 rendering engine I already had a mental list of things I’d need to change to support higher video resolutions. The first thing that needed to be changed was the size of the D3D front and back buffers. The setup for the D3D device has 3 functions that need to be modified in order to use the proper resolution for the current video mode. The first is _rasterizer_detect_video_mode which checks the video mode and sets some global variables for widescreen and progressive video modes. Next is _rasterizer_init_screen_bounds which sets up the screen dimensions used for creating the D3D device, view frustum, and a number of other things. Lastly is rasterizer_device_initialize which is responsible for setting up the D3D device. Below is a shortened version of these 3 functions with the lines of interest highlighted. All of the code shown in this post has been reverse engineered from assembly back into C for ease of understanding.</p>



<div id="urvanov-syntax-highlighter-662143868a2df916053336" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p><p>51</p><p>52</p><p>53</p><p>54</p><p>55</p><p>56</p><p>57</p><p>58</p><p>59</p><p>60</p><p>61</p><p>62</p><p>63</p><p>64</p><p>65</p></div>
				</td>
						<td><div><p><span>void</span><span> </span><span>_rasterizer_detect_video_mode</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>DWORD </span><span>videoStandard</span><span> </span><span>=</span><span> </span><span>XGetVideoStandard</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>DWORD </span><span>videoFlags</span><span> </span><span>=</span><span> </span><span>XGetVideoFlags</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>videoStandard</span><span> </span><span>==</span><span> </span><span>XC_VIDEO_STANDARD_PAL_I</span><span>)</span></p><p><span>		</span><span>g_refresh_rate_hz</span><span> </span><span>=</span><span> </span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_PAL_60Hz</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span> </span><span>?</span><span> </span><span>60</span><span> </span><span>:</span><span> </span><span>50</span><span>;</span></p><p><span>	</span><span>g_letterbox_enabled</span><span> </span><span>=</span><span> </span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_LETTERBOX</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>g_widescreen_enabled</span><span> </span><span>=</span><span> </span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_WIDESCREEN</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>g_progressive_scan_enabled</span><span> </span><span>=</span><span> </span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_HDTV_480p</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span></p><p><span>void</span><span> </span><span>_rasterizer_init_screen_bounds</span><span>(</span><span>int</span><span> </span><span>x_off</span><span>,</span><span> </span><span>int</span><span> </span><span>y_off</span><span>,</span><span> </span><span>float</span><span> </span><span>scale</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>float</span><span> </span><span>width</span><span> </span><span>=</span><span> </span><span>640.0f</span><span> </span><span>*</span><span> </span><span>scale</span><span>;</span></p><p><span>	</span><span>float</span><span> </span><span>height</span><span> </span><span>=</span><span> </span><span>480.0f</span><span> </span><span>*</span><span> </span><span>scale</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x0</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y0</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span> </span><span>=</span><span> </span><span>(</span><span>int</span><span>)</span><span>width</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span> </span><span>=</span><span> </span><span>(</span><span>int</span><span>)</span><span>height</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>frame_bounds</span><span>.</span><span>x0</span><span> </span><span>=</span><span> </span><span>x_off</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>frame_bounds</span><span>.</span><span>y0</span><span> </span><span>=</span><span> </span><span>y_off</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>frame_bounds</span><span>.</span><span>x1</span><span> </span><span>=</span><span> </span><span>(</span><span>int</span><span>)</span><span>width</span><span> </span><span>-</span><span> </span><span>x_off</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>frame_bounds</span><span>.</span><span>y1</span><span> </span><span>=</span><span> </span><span>(</span><span>int</span><span>)</span><span>height</span><span> </span><span>-</span><span> </span><span>y_off</span><span>;</span></p><p><span>}</span></p><p><span>bool</span><span> </span><span>rasterizer_device_initialize</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>D3DPRESENT_PARAMETERS </span><span>PresentParams</span><span> </span><span>=</span><span> </span><span>{</span><span>0</span><span>}</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferWidth</span><span> </span><span>=</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span> </span><span>-</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x0</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferHeight</span><span> </span><span>=</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span> </span><span>-</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferFormat</span><span> </span><span>=</span><span> </span><span>D3DFMT_A8R8G8B8</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>EnableAutoDepthStencil</span><span> </span><span>=</span><span> </span><span>TRUE</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>AutoDepthStencilFormat</span><span> </span><span>=</span><span> </span><span>D3DFMT_D24S8</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>=</span><span> </span><span>D3DPRESENTFLAG_LOCKABLE_BACKBUFFER</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>FullScreen_RefreshRateInHz</span><span> </span><span>=</span><span> </span><span>g_refresh_rate_hz</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>FullScreen_PresentationInterval</span><span> </span><span>=</span><span> </span><span>D3DPRESENT_INTERVAL_IMMEDIATE</span><span>;</span></p><p><span>	</span><span>switch</span><span> </span><span>(</span><span>g_presentation_interval</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>case</span><span> </span><span>0</span><span>:</span></p><p><span>			</span><span>PresentParams</span><span>.</span><span>SwapEffect</span><span> </span><span>=</span><span> </span><span>D3DSWAPEFFECT_FLIP</span><span>;</span></p><p><span>			</span><span>PresentParams</span><span>.</span><span>FullScreen_PresentationInterval</span><span> </span><span>=</span><span> </span><span>D3DPRESENT_INTERVAL_IMMEDIATE</span><span>;</span></p><p><span>			</span><span>break</span><span>;</span></p><p><span>		</span><span>case</span><span> </span><span>1</span><span>:</span></p><p><span>			</span><span>PresentParams</span><span>.</span><span>SwapEffect</span><span> </span><span>=</span><span> </span><span>D3DSWAPEFFECT_DISCARD</span><span>;</span></p><p><span>			</span><span>PresentParams</span><span>.</span><span>FullScreen_PresentationInterval</span><span> </span><span>|=</span><span> </span><span>g_present_immediately</span><span> </span><span>!=</span><span> </span><span>0</span><span> </span><span>?</span><span> </span><span>D3DPRESENT_INTERVAL_ONE</span><span> </span><span>:</span><span> </span><span>0</span><span>;</span></p><p><span>			</span><span>break</span><span>;</span></p><p><span>		</span><span>case</span><span> </span><span>2</span><span>:</span></p><p><span>			</span><span>PresentParams</span><span>.</span><span>SwapEffect</span><span> </span><span>=</span><span> </span><span>D3DSWAPEFFECT_DISCARD</span><span>;</span></p><p><span>			</span><span>PresentParams</span><span>.</span><span>FullScreen_PresentationInterval</span><span> </span><span>|=</span><span> </span><span>g_present_immediately</span><span> </span><span>!=</span><span> </span><span>0</span><span> </span><span>?</span><span> </span><span>D3DPRESENT_INTERVAL_TWO</span><span> </span><span>:</span><span> </span><span>0</span><span>;</span></p><p><span>			</span><span>break</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>g_pDirect3D</span><span>-&gt;</span><span>CreateDevice</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DDEVTYPE_HAL</span><span>,</span><span> </span><span>NULL</span><span>,</span><span> </span><span>D3DCREATE_HARDWARE_VERTEXPROCESSING</span><span>,</span><span> </span><span>&amp;</span><span>PresentParams</span><span>,</span><span> </span><span>&amp;</span><span>g_pD3DDevice</span><span>)</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<h4>Halo 2 already supports 480p, or does it…</h4>



<p>If you’ve ever looked at the back of the game case for Halo 2 you might have seen it supports 480p. However, looking at line 42 above, the D3DPRESENTFLAG_PROGRESSIVE flag is not being set on the present parameters. And, if we look at the call site for the _rasterizer_init_screen_bounds function we see this:</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/ida_init_screen_bounds.png" target="_blank" rel="noopener"><img loading="lazy" width="605" height="471" src="https://icode4.coffee/wp-content/uploads/ida_init_screen_bounds.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/ida_init_screen_bounds.png 605w, https://icode4.coffee/wp-content/uploads/ida_init_screen_bounds-300x234.png 300w" sizes="(max-width: 605px) 100vw, 605px"></a><figcaption>Call site for _rasterizer_init_screen_bounds</figcaption></figure></div>



<p>The scale parameter is always set to 1.0f, which means the screen_bounds are always set to 640×480 regardless of what the video mode is set to on the console. On the Original Xbox 480p is considered to be 720×480, which means that <strong>Halo 2 does not render in 480p natively</strong> regardless of what the video settings are set to. If you enable 480p mode on the console you’ll get a 480p signal out but that’s because after the game is done drawing to the 640×480 back buffer it’ll get up-scaled to 720×480 by the GPU before being fed to the video encoder. I often get comments saying “that’s not not a 16:9 resolution” or “that’s not real 480p”, but “480p” <a rel="noreferrer noopener" href="https://en.wikipedia.org/wiki/480p#Resolutions" target="_blank">encapsulates a range of resolutions and aspect ratios</a> and 720×480 is the resolution the Xbox considers to be 480p (so take it up with Microsoft, not me…).</p>



<p>If you’ve ever played Halo 2 in 480p mode with wide screen enabled you may have noticed that things look a little weird. That’s because when wide screen mode is enabled the game will use an anamorphic camera with an aspect ratio of 1.33:1. That means it renders 1.3x the width into the same 640×480 surface as it would when wide screen mode is disabled. Here is a comparison showing the effect anamorphic scaling has on the Zanzibar wheel:</p>







<p>I’m not entirely sure why it does this and my only guess is if you set your TV to stretch mode it would “cancel out” the horizontal “squish” introduced by the anamorphic scaling and look somewhat normal. However, I personally hate it and wanted the cleanest image I could get out of the console so I added an option to disable the anamorphic scaling entirely.</p>



<h4>Back to the back buffer…</h4>



<p>To create the D3D front/back buffers with the right dimensions we’ll need to change g_progressive_scan_enabled to be set when 720p is enabled, set the screen_bounds and frame_bounds variables based on the proper video resolution for the video mode set, and finally set some additional flags on the D3D present parameters depending on if the video mode is progressive or interlaced (1080i mode). The pseudo code for the modifications is shown below with the changed lines highlighted. I ignored the scale variable in _rasterizer_init_screen_bounds because it’s only ever set to 1.0 anyway.</p>



<div id="urvanov-syntax-highlighter-662143868a2ec296228442" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p><p>51</p><p>52</p><p>53</p><p>54</p><p>55</p><p>56</p><p>57</p><p>58</p><p>59</p><p>60</p><p>61</p><p>62</p><p>63</p><p>64</p><p>65</p><p>66</p><p>67</p><p>68</p><p>69</p><p>70</p><p>71</p><p>72</p><p>73</p><p>74</p><p>75</p><p>76</p><p>77</p><p>78</p><p>79</p><p>80</p><p>81</p><p>82</p><p>83</p><p>84</p></div>
				</td>
						<td><div><p><span>void</span><span> </span><span>_rasterizer_detect_video_mode</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>DWORD </span><span>videoStandard</span><span> </span><span>=</span><span> </span><span>XGetVideoStandard</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>DWORD </span><span>videoFlags</span><span> </span><span>=</span><span> </span><span>XGetVideoFlags</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>videoStandard</span><span> </span><span>==</span><span> </span><span>XC_VIDEO_STANDARD_PAL_I</span><span>)</span></p><p><span>		</span><span>g_refresh_rate_hz</span><span> </span><span>=</span><span> </span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_PAL_60Hz</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span> </span><span>?</span><span> </span><span>60</span><span> </span><span>:</span><span> </span><span>50</span><span>;</span></p><p><span>	</span><span>g_letterbox_enabled</span><span> </span><span>=</span><span> </span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_LETTERBOX</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>g_widescreen_enabled</span><span> </span><span>=</span><span> </span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_WIDESCREEN</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>g_progressive_scan_enabled</span><span> </span><span>=</span><span> </span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>(</span><span>XC_VIDEO_FLAGS_HDTV_480p</span><span> </span><span>|</span><span> </span><span>XC_VIDEO_FLAGS_HDTV_720p</span><span>)</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span></p><p><span>void</span><span> </span><span>_rasterizer_init_screen_bounds</span><span>(</span><span>int</span><span> </span><span>x_off</span><span>,</span><span> </span><span>int</span><span> </span><span>y_off</span><span>,</span><span> </span><span>float</span><span> </span><span>scale</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Set default resolution to 640x480.</span></p><p><span>	</span><span>float</span><span> </span><span>width</span><span> </span><span>=</span><span> </span><span>640.0f</span><span>;</span></p><p><span>	</span><span>float</span><span> </span><span>height</span><span> </span><span>=</span><span> </span><span>480.0f</span><span>;</span></p><p><span>	</span><span>// Adjust resolution based on current video mode set.</span></p><p><span>	</span><span>DWORD </span><span>videoFlags</span><span> </span><span>=</span><span> </span><span>XGetVideoFlags</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_HDTV_1080i</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>width</span><span> </span><span>=</span><span> </span><span>1920</span><span>;</span></p><p><span>		</span><span>height</span><span> </span><span>=</span><span> </span><span>1080</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>else</span><span> </span><span>if</span><span> </span><span>(</span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_HDTV_720p</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>width</span><span> </span><span>=</span><span> </span><span>1280</span><span>;</span></p><p><span>		</span><span>height</span><span> </span><span>=</span><span> </span><span>720</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>else</span><span> </span><span>if</span><span> </span><span>(</span><span>(</span><span>videoFlags</span><span> </span><span>&amp;</span><span> </span><span>XC_VIDEO_FLAGS_HDTV_480p</span><span>)</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>width</span><span> </span><span>=</span><span> </span><span>720</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x0</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y0</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span> </span><span>=</span><span> </span><span>(</span><span>int</span><span>)</span><span>width</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span> </span><span>=</span><span> </span><span>(</span><span>int</span><span>)</span><span>height</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>frame_bounds</span><span>.</span><span>x0</span><span> </span><span>=</span><span> </span><span>x_off</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>frame_bounds</span><span>.</span><span>y0</span><span> </span><span>=</span><span> </span><span>y_off</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>frame_bounds</span><span>.</span><span>x1</span><span> </span><span>=</span><span> </span><span>(</span><span>int</span><span>)</span><span>width</span><span> </span><span>-</span><span> </span><span>x_off</span><span>;</span></p><p><span>	</span><span>rasterizer_globals</span><span>.</span><span>frame_bounds</span><span>.</span><span>y1</span><span> </span><span>=</span><span> </span><span>(</span><span>int</span><span>)</span><span>height</span><span> </span><span>-</span><span> </span><span>y_off</span><span>;</span></p><p><span>}</span></p><p><span>bool</span><span> </span><span>rasterizer_device_initialize</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>D3DPRESENT_PARAMETERS </span><span>PresentParams</span><span> </span><span>=</span><span> </span><span>{</span><span>0</span><span>}</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferWidth</span><span> </span><span>=</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span> </span><span>-</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x0</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferHeight</span><span> </span><span>=</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span> </span><span>-</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferFormat</span><span> </span><span>=</span><span> </span><span>D3DFMT_A8R8G8B8</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>EnableAutoDepthStencil</span><span> </span><span>=</span><span> </span><span>TRUE</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>AutoDepthStencilFormat</span><span> </span><span>=</span><span> </span><span>D3DFMT_D24S8</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>=</span><span> </span><span>D3DPRESENTFLAG_LOCKABLE_BACKBUFFER</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>FullScreen_RefreshRateInHz</span><span> </span><span>=</span><span> </span><span>g_refresh_rate_hz</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>FullScreen_PresentationInterval</span><span> </span><span>=</span><span> </span><span>D3DPRESENT_INTERVAL_IMMEDIATE</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>// Check if wide screen mode is enabled.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>g_widescreen_enabled</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>		</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>|=</span><span> </span><span>D3DPRESENTFLAG_WIDESCREEN</span><span>;</span></p><p><span>	</span><span>// Check if the video mode supports progressive scan.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>g_progressive_scan_enabled</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>		</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>|=</span><span> </span><span>D3DPRESENTFLAG_PROGRESSIVE</span><span>;</span></p><p><span>	</span><span>// Check the resolution width to see if 1080i is enabled.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span> </span><span>==</span><span> </span><span>1920</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>&amp;=</span><span> </span><span>~</span><span>D3DPRESENTFLAG_PROGRESSIVE</span><span>;</span></p><p><span>		</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>|=</span><span> </span><span>D3DPRESENTFLAG_INTERLACED</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>g_pDirect3D</span><span>-&gt;</span><span>CreateDevice</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DDEVTYPE_HAL</span><span>,</span><span> </span><span>NULL</span><span>,</span><span> </span><span>D3DCREATE_HARDWARE_VERTEXPROCESSING</span><span>,</span><span> </span><span>&amp;</span><span>PresentParams</span><span>,</span><span> </span><span>&amp;</span><span>g_pD3DDevice</span><span>)</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>Booting up the game with these changes gives some less than pleasing results. Looking at the main menu the first thing we can see is the blue filter is now gone, and there’s some repeating line pattern strewn across the screen. Looking a bit closer and we can see part of the water geometry is also cut off, suspiciously at where the old 640 width would be compared to the new width of 720.</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/main_menu_issues.png" target="_blank" rel="noopener"><img loading="lazy" width="720" height="480" src="https://icode4.coffee/wp-content/uploads/main_menu_issues.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/main_menu_issues.png 720w, https://icode4.coffee/wp-content/uploads/main_menu_issues-300x200.png 300w" sizes="(max-width: 720px) 100vw, 720px"></a><figcaption>Rendering issues in the main menu</figcaption></figure></div>



<h2>Making efficient use of D3D memory</h2>



<p>The Xbox uses a unified memory architecture meaning the CPU and GPU share the same RAM. Unlike a PC there’s no concept of creating a D3D allocation in VRAM and having the GPU manage it. On Xbox the CPU can create an allocation for textures, render targets, vertex buffers, etc, and pass the allocation address directly to the GPU. This gives developers the ability to allocate one buffer and have multiple resource “views” that utilize the memory. Consider the following code which shows how to create a render target letting D3D do all the work and how to create a render target by hand:</p>



<div id="urvanov-syntax-highlighter-662143868a2f2073411409" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>// How to create a render target with D3D:</span></p><p><span>IDirect3DSurface8</span><span>*</span><span> </span><span>pRenderTarget</span><span> </span><span>=</span><span> </span><span>NULL</span><span>;</span></p><p><span>g_pD3DDevice</span><span>-&gt;</span><span>CreateRenderTarget</span><span>(</span><span>/* width */</span><span> </span><span>1024</span><span>,</span><span> </span><span>/* height */</span><span> </span><span>1024</span><span>,</span><span> </span><span>/* format */</span><span> </span><span>D3DFMT_A8R8G8B8</span><span>,</span><span> </span><span>NULL</span><span>,</span><span> </span><span>FALSE</span><span>,</span><span> </span><span>&amp;</span><span>pRenderTarget</span><span>)</span><span>;</span></p><p><span>// How to create a render target by hand:</span></p><p><span>// Allocate and initialize the texture header.</span></p><p><span>IDirect3DSurface8</span><span>*</span><span> </span><span>pRenderTarget</span><span> </span><span>=</span><span> </span><span>(</span><span>IDirect3DSurface8</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>IDirect3DSurface8</span><span>)</span><span>)</span><span>;</span></p><p><span>DWORD </span><span>textureSize</span><span> </span><span>=</span><span> </span><span>XGSetTextureHeader</span><span>(</span><span>/* width */</span><span> </span><span>1024</span><span>,</span><span> </span><span>/* height */</span><span> </span><span>1024</span><span>,</span><span> </span><span>/* levels */</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>/* format */</span><span> </span><span>D3DFMT_A8R8G8B8</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>pRenderTarget</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>)</span><span>;</span></p><p><span>// Allocate memory for the pixel buffer.</span></p><p><span>void</span><span>*</span><span> </span><span>pSurfaceBuffer</span><span> </span><span>=</span><span> </span><span>D3D_AllocContiguousMemory</span><span>(</span><span>/* size */</span><span> </span><span>textureSize</span><span>,</span><span> </span><span>/* alignment */</span><span> </span><span>D3DSURFACE_ALIGNMENT</span><span>)</span><span>;</span></p><p><span>pRenderTarget</span><span>-&gt;</span><span>Register</span><span>(</span><span>pSurfaceBuffer</span><span>)</span><span>;</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>While the latter looks more messy it provides greater control to the developer and is something Halo 2 makes great use of to conserve memory for all the render targets it uses. In total Halo 2 has approximately 25 different render targets it uses but there’s only 4-5 unique buffers allocated for them which saves a lot of memory. So what does this have to do with the issues we saw in the main menu? Well if Halo 2 is creating render targets by hand it’ll need to encode the width and height of the surface into the header of the render target structure. If it’s hard coded to use 640×480 resolution it would cause issues that could result in cut off images or repeating line patterns as the pitch of the surface would not match the pitch of the back buffer. Essentially, there’s two different “views” for the same memory but the views see the memory as being of different widths which results in misplaced pixels when spanning each scan line. </p>



<p>Looking around the D3D/raster initialization code I found a function I called rasterizer_primary_targets_initialize that does exactly this. It takes the back, front, and depth buffers created by D3D and creates additional render targets and texture views from them, using hard coded dimensions of 640×480. Here is the C representation of the disassembly:</p>



<div id="urvanov-syntax-highlighter-662143868a2f5014285151" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p></div>
				</td>
						<td><div><p><span>bool</span><span> </span><span>rasterizer_primary_targets_initialize</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Get the back buffer, front buffer, and depth buffer surfaces.</span></p><p><span>	</span><span>global_d3d_device</span><span>-&gt;</span><span>GetBackBuffer</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DBACKBUFFER_TYPE_MONO</span><span>,</span><span> </span><span>&amp;</span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_device</span><span>-&gt;</span><span>GetBackBuffer</span><span>(</span><span>-</span><span>1</span><span>,</span><span> </span><span>D3DBACKBUFFER_TYPE_MONO</span><span>,</span><span> </span><span>&amp;</span><span>global_d3d_surface_render_primary</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_device</span><span>-&gt;</span><span>GetDepthStencilSurface</span><span>(</span><span>&amp;</span><span>global_d3d_surface_render_primary_z</span><span>)</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>global_d3d_texture_render_primary</span><span>[</span><span>0</span><span>]</span><span> </span><span>=</span><span> </span><span>(</span><span>IDirect3DTexture8</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>IDirect3DTexture8</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_texture_render_primary</span><span>[</span><span>1</span><span>]</span><span> </span><span>=</span><span> </span><span>(</span><span>IDirect3DTexture8</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>IDirect3DTexture8</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>// Setup texture views for back/front buffers.</span></p><p><span>	</span><span>for</span><span> </span><span>(</span><span>int</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>2</span><span>;</span><span> </span><span>i</span><span>++</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>XGSetTextureHeader</span><span>(</span><span>640</span><span>,</span><span> </span><span>480</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>D3DFMT_LIN_A8R8G8B8</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span></p><p><span>			</span><span>global_d3d_texture_render_primary</span><span>[</span><span>i</span><span>]</span><span>,</span><span> </span><span>global_d3d_surface_render_primary</span><span>[</span><span>i</span><span>]</span><span>-&gt;</span><span>Data</span><span>,</span><span> </span><span>0</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>// Create a render target surface for the depth buffer that matches the size and format of the back buffer.</span></p><p><span>	</span><span>global_d3d_surface_z_as_target</span><span> </span><span>=</span><span> </span><span>(</span><span>IDirect3DSurface8</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>IDirect3DSurface8</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>memcpy</span><span>(</span><span>global_d3d_surface_z_as_target</span><span>,</span><span> </span><span>global_d3d_surface_render_primary</span><span>,</span><span> </span><span>sizeof</span><span>(</span><span>IDirect3DSurface8</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_surface_z_as_target</span><span>-&gt;</span><span>Data</span><span> </span><span>=</span><span> </span><span>global_d3d_surface_render_primary_z</span><span>-&gt;</span><span>Data</span><span>;</span></p><p><span>	</span><span>// Create two textures for the depth buffer, one in ARGB format and one in ABGR format.</span></p><p><span>	</span><span>global_d3d_texture_z_as_target</span><span>[</span><span>0</span><span>]</span><span> </span><span>=</span><span> </span><span>(</span><span>IDirect3DTexture8</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>IDirect3DTexture8</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>XGSetTextureHeader</span><span>(</span><span>640</span><span>,</span><span> </span><span>480</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>D3DFMT_LIN_A8R8G8B8</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span></p><p><span>		</span><span>global_d3d_texture_z_as_target</span><span>[</span><span>0</span><span>]</span><span>,</span><span> </span><span>global_d3d_surface_render_primary_z</span><span>-&gt;</span><span>Data</span><span>,</span><span> </span><span>0</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_texture_z_as_target</span><span>[</span><span>1</span><span>]</span><span> </span><span>=</span><span> </span><span>(</span><span>IDirect3DTexture8</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>IDirect3DTexture8</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>XGSetTextureHeader</span><span>(</span><span>640</span><span>,</span><span> </span><span>480</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>D3DFMT_LIN_A8B8G8R8</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span></p><p><span>		</span><span>global_d3d_texture_z_as_target</span><span>[</span><span>1</span><span>]</span><span>,</span><span> </span><span>global_d3d_surface_render_primary_z</span><span>-&gt;</span><span>Data</span><span>,</span><span> </span><span>0</span><span>)</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>This is relatively easy to fix, we simply need to hook this function, let it run normally, and then fix up the dimensions of the textures/surfaces afterwards. The pseudo code for this hook can be seen below:</p>



<div id="urvanov-syntax-highlighter-662143868a2f8039876927" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p></div>
				</td>
						<td><div><p><span>bool</span><span> </span><span>Hook_rasterizer_primary_targets_initialize</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Call the trampoline and let the real function complete.</span></p><p><span>	</span><span>bool</span><span> </span><span>result</span><span> </span><span>=</span><span> </span><span>rasterizer_primary_targets_initialize_trampoline</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>// Update the dimensions of the surface/textures created to match the resolution of the back buffer.</span></p><p><span>	</span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>global_d3d_texture_render_primary</span><span>[</span><span>0</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>global_d3d_texture_render_primary</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>global_d3d_texture_z_as_target</span><span>[</span><span>0</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>global_d3d_texture_z_as_target</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>return</span><span> </span><span>result</span><span>;</span></p><p><span>}</span></p><p><span>void</span><span> </span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>D3DBaseTexture</span><span>*</span><span> </span><span>pResource</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Calculate the correct pitch for the texture with tiling enabled. This can be different than the normal pitch</span></p><p><span>	</span><span>// value and if set incorrectly will cause a "striping" effect on the back buffer.</span></p><p><span>	</span><span>DWORD </span><span>format</span><span> </span><span>=</span><span> </span><span>(</span><span>pResource</span><span>-&gt;</span><span>Format</span><span> </span><span>&gt;&gt;</span><span> </span><span>8</span><span>)</span><span> </span><span>&amp;</span><span> </span><span>0xFF</span><span>;</span></p><p><span>	</span><span>DWORD </span><span>pitch</span><span> </span><span>=</span><span> </span><span>D3D_CalcTilePitch</span><span>(</span><span>/* width */</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span>,</span><span> </span><span>/* texture format */</span><span> </span><span>format</span><span>)</span><span>;</span></p><p><span>	</span><span>// Set the new dimensions of the texture using the size of the back buffer.</span></p><p><span>	</span><span>XGSetTextureHeader</span><span>(</span><span>/* width */</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span>,</span><span> </span><span>/* height */</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span>,</span></p><p><span>		</span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>format</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>pResource</span><span>,</span><span> </span><span>pResource</span><span>-&gt;</span><span>Data</span><span>,</span><span> </span><span>pitch</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>There’s one additional thing to note here and it’s that the memory used for the back, front, and depth buffers is a special type of memory known as “tiled” memory. Tiled memory stores the pixel data in a way that’s more efficient to read and write to based on the design of the actual RAM chip’s memory cells. Storing the pixel data in tiled memory decreases the overall bandwidth required when reading and writing these buffers. The gotcha here is that the pitch value for the surface/texture is not always the same as it would be for a texture in normal memory (width * bpp). This is why I call D3D_CalcTilePitch in the the Hack_UpdateD3dPixelContainerForScreenResolution helper function. It will calculate the correct pitch for tiled memory based on the width and bits per pixel for the texture format. If the pitch value is calculated incorrectly (ex: by doing width * bpp) you’ll end up getting a “striping” effect on the back buffer (which affects 1080i video resolutions specifically). If you’re curious what tiled memory looks like if you don’t “un-tile” it here you go:</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/tiled_back_buffer.png" target="_blank" rel="noopener"><img loading="lazy" width="1095" height="616" src="https://icode4.coffee/wp-content/uploads/tiled_back_buffer.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/tiled_back_buffer.png 1095w, https://icode4.coffee/wp-content/uploads/tiled_back_buffer-300x169.png 300w, https://icode4.coffee/wp-content/uploads/tiled_back_buffer-768x432.png 768w" sizes="(max-width: 1095px) 100vw, 1095px"></a><figcaption>D3D back buffer of the main menu in tiled form</figcaption></figure></div>



<p>This is the main menu image from earlier (only in 720p) dumped straight from the back buffer without un-tiling the data. If you squint hard enough you can almost make out the Halo 2 logo in the center. That aside it’s time to test the new patches and see if the modifications to the surface dimensions fixed our issues. Loading up the game with this new set of modifications gives us this:</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/main_menu_issues2.png" target="_blank" rel="noopener"><img loading="lazy" width="720" height="480" src="https://icode4.coffee/wp-content/uploads/main_menu_issues2.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/main_menu_issues2.png 720w, https://icode4.coffee/wp-content/uploads/main_menu_issues2-300x200.png 300w" sizes="(max-width: 720px) 100vw, 720px"></a><figcaption>Main menu with some issues fixed</figcaption></figure></div>



<p>Okay so the striping effect from using the incorrect pitch value in the back/front buffer surfaces is now fixed. However, the water geometry is still cutoff even after we changed the resolutions of all the render targets/textures, right? Well we only updated the <em>primary</em> render targets, we still need to update the intermediate render targets used by the game’s rasterizer, and this is where having game engine specific knowledge comes in handy.</p>



<h2>Resizing the rasterizer targets</h2>



<p>As I mentioned earlier there’s ~25 render targets Halo 2 uses for different passes in the render loop such as detail texture blending, water, reflections, fog, shadows, etc. The game’s rasterizer system allows for creating a render target with child render targets that utilize the same underlying memory. The 25 render targets the game creates are backed by only 4-5 unique memory allocations and uses this parent/child relationship to make efficient use of the memory. When one render target is no longer in use the others are free to use that memory. While most render targets are smaller than the back buffer (ranging from 512×512 all the way down to 64×64) there’s one in particular that needs to match the back buffer resolution which is the texture accumulator target, or taxaccum for short.</p>



<p>The DirectX implementation on Xbox only allows for sampling from 4 textures per pixel shader pass. If you want to render something that uses more than 4 input textures you’ll need to do it in two or more passes. This is what the texaccum layer is for. Objects in the game that use more than 4 textures will first render all the detail textures to the texaccum layer. When the texaccum pass is completed the taxaccum render target will be fed into the lightmap pass as an input and combined with any additional textures for the object along with the lightmap texture to get the final output.</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/taxaccum_lightmap_pass.png" target="_blank" rel="noopener"><img loading="lazy" width="1901" height="1080" src="https://icode4.coffee/wp-content/uploads/taxaccum_lightmap_pass-1901x1080.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/taxaccum_lightmap_pass-1901x1080.png 1901w, https://icode4.coffee/wp-content/uploads/taxaccum_lightmap_pass-300x170.png 300w, https://icode4.coffee/wp-content/uploads/taxaccum_lightmap_pass-768x436.png 768w, https://icode4.coffee/wp-content/uploads/taxaccum_lightmap_pass-1536x873.png 1536w, https://icode4.coffee/wp-content/uploads/taxaccum_lightmap_pass-2048x1164.png 2048w" sizes="(max-width: 1901px) 100vw, 1901px"></a><figcaption>Texaccum and lightmap shader passes</figcaption></figure></div>



<p>Here’s an example using the ground geometry in coagulation. In the texaccum pass the detail textures for the ground geometry are blended together into the texaccum render target. Then in the lightmap pass the texaccum render target is used as an input texture along with a bump map and lightmap texture to create the final image. The reason the water geometry in the main menu is cut off is because it’s being rendered to the texaccum render target which has a hard coded size of 640×480. Now that we’re rendering in larger video resolutions the dimensions of the texaccum target will need to be increased. Looking through the rasterizer initialization code we’ll find a function I called rasterizer_targets_initialize that allocates buffers for the various render targets and initializes them:</p>



<div id="urvanov-syntax-highlighter-662143868a2fb981828718" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p></div>
				</td>
						<td><div><p><span>bool</span><span> </span><span>rasterizer_targets_initialize</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Allocate and initialize the texaccum render target.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>!</span><span>_rasterizer_alloc_and_create_render_target</span><span>(</span><span>1</span><span>,</span><span> </span><span>640</span><span>,</span><span> </span><span>480</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>false</span><span>)</span><span>)</span></p><p><span>		</span><span>return</span><span> </span><span>false</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span></p><p><span>bool</span><span> </span><span>_rasterizer_alloc_and_create_render_target</span><span>(</span><span>int</span><span> </span><span>target_index</span><span>,</span><span> </span><span>int</span><span> </span><span>width</span><span>,</span><span> </span><span>int</span><span> </span><span>height</span><span>,</span><span> </span><span>int</span><span> </span><span>unk</span><span>,</span><span> </span><span>bool</span><span> </span><span>z_surface</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Calculate the allocation size rounded up to the nearest page size.</span></p><p><span>	</span><span>int</span><span> </span><span>allocationSize</span><span> </span><span>=</span><span> </span><span>(</span><span>(</span><span>(</span><span>(</span><span>width</span><span> </span><span>+</span><span> </span><span>63</span><span>)</span><span> </span><span>&amp;</span><span> </span><span>~</span><span>64</span><span>)</span><span> </span><span>*</span><span> </span><span>height</span><span> </span><span>*</span><span> </span><span>4</span><span>)</span><span> </span><span>+</span><span> </span><span>4095</span><span>)</span><span> </span><span>&amp;</span><span> </span><span>~</span><span>4096</span><span>;</span></p><p><span>	</span><span>// Allocate memory from the game's self-managed memory pool.</span></p><p><span>	</span><span>void</span><span>*</span><span> </span><span>pPhysicalAllocPtr</span><span> </span><span>=</span><span> </span><span>physical_memory_globals</span><span>.</span><span>hi_stage_address</span><span>[</span><span>physical_memory_globals</span><span>.</span><span>current_stage</span><span>]</span><span> </span><span>-</span><span> </span><span>allocationSize</span><span>;</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pPhysicalAllocPtr</span><span> </span><span>&gt;</span><span> </span><span>physical_memory_globals</span><span>.</span><span>low_stage_address</span><span>[</span><span>physical_memory_globals</span><span>.</span><span>current_stage</span><span>]</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>physical_memory_globals</span><span>.</span><span>hi_stage_address</span><span>[</span><span>physical_memory_globals</span><span>.</span><span>current_stage</span><span>]</span><span> </span><span>=</span><span> </span><span>pPhysicalAllocPtr</span><span>;</span></p><p><span>		</span><span>// Mark the allocated memory as RW write-combine memory.</span></p><p><span>		</span><span>pPhysicalAllocPtr</span><span> </span><span>|=</span><span> </span><span>PHYSICAL_MEM_ADDRESS_MASK</span><span>;</span></p><p><span>		</span><span>XPhysicalProtect</span><span>(</span><span>pPhysicalAllocPtr</span><span>,</span><span> </span><span>allocationSize</span><span>,</span><span> </span><span>PAGE_READWRITE</span><span> </span><span>|</span><span> </span><span>PAGE_WRITECOMBINE</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>return</span><span> </span><span>_rasterizer_create_render_target</span><span>(</span><span>target_index</span><span>,</span><span> </span><span>/* type */</span><span> </span><span>1</span><span>,</span><span> </span><span>width</span><span>,</span><span> </span><span>height</span><span>,</span><span> </span><span>z_surface</span><span>,</span><span> </span><span>/* linear */</span><span> </span><span>true</span><span>,</span><span> </span><span>true</span><span>,</span><span> </span><span>pPhysicalAllocPtr</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>To fix the hard coded dimensions I simply hook the _rasterizer_alloc_and_create_render_target function, check the target_index parameter for the texaccum index, and change the dimensions to match the back buffer size. The pseudo code for the hook looks like this:</p>



<div id="urvanov-syntax-highlighter-662143868a2ff522909558" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>bool</span><span> </span><span>Hook__rasterizer_alloc_and_create_render_target</span><span>(</span><span>int</span><span> </span><span>target_index</span><span>,</span><span> </span><span>int</span><span> </span><span>width</span><span>,</span><span> </span><span>int</span><span> </span><span>height</span><span>,</span><span> </span><span>int</span><span> </span><span>unk</span><span>,</span><span> </span><span>bool</span><span> </span><span>z_surface</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Check the rasterizer target index and adjust the surface dimensions accordingly.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>target_index</span><span> </span><span>==</span><span> </span><span>1</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Texaccum rasterizer target:</span></p><p><span>		</span><span>width</span><span> </span><span>=</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span>;</span></p><p><span>		</span><span>height</span><span> </span><span>=</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>// Call the trampoline and create the render target.</span></p><p><span>	</span><span>return</span><span> </span><span>_rasterizer_alloc_and_create_render_target_trampoline</span><span>(</span><span>target_index</span><span>,</span><span> </span><span>width</span><span>,</span><span> </span><span>height</span><span>,</span><span> </span><span>unk</span><span>,</span><span> </span><span>z_surface</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>Running the game with these modifications we can see the water geometry is no longer cutoff, and loading into a map doesn’t show any noticeable rendering issues:</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/main_menu_texaccum_fixed.png" target="_blank" rel="noopener"><img loading="lazy" width="720" height="480" src="https://icode4.coffee/wp-content/uploads/main_menu_texaccum_fixed.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/main_menu_texaccum_fixed.png 720w, https://icode4.coffee/wp-content/uploads/main_menu_texaccum_fixed-300x200.png 300w" sizes="(max-width: 720px) 100vw, 720px"></a><figcaption>Main menu with the texaccum layer fixed</figcaption></figure></div>



<p>The game looks okay in 480p but the real goal of this work is to get the game playing decently in 720p, and maybe booting in 1080p, even though it won’t play well at that resolution nor will the Xbox output a 1080p video signal (but I can still take some sweet screenshots!). We still need to fix the missing blue filter on the main menu but in the interest of keeping this post as short as possible I’m going to skip the blue filter fix as it’s not very interesting anyway (spoiler: it was just a simple size check that needed updating). Changing the video settings on my console to 720p and booting the game results in… well it results in the game crashing on startup. The reason? Due to the increased size of the front/back/depth buffers and rasterizer targets we’re out of memory, or at least, out of memory that the game is able to use.</p>



<h2>Part 2: Memory Management and RAM Upgrades</h2>



<p>The original Xbox had two different console types, the retail consoles that consumers would buy with 64MB of RAM, and a development console (or dev kit/debug console) that was used by game developers with 128MB of RAM. The extra RAM on the development console helped developers debug their games and run additional test code during the development process. The motherboard used by both console types is nearly identical with the main difference being the software they run and the additional RAM chips on the dev kit motherboards (they also have a slightly different south bridge for security purposes but that’s not really important here). However, retail motherboards still had the placements for the 4 additional RAM chips and over the years people found that they could solder in the missing RAM chips and run a modified Xbox kernel to give them access to the extra memory. Retail games won’t make any use of that extra memory, but homebrew applications like Xbox Media Center will use it for things like video decoding when watching movies or streaming media. </p>



<p>I’ve neglected to mention that up until this point the only way I was able to get the game to boot with the increased back buffer size is by running it on a console with 128MB of RAM and using an Xbox kernel with support for the additional 64MB of RAM. As-is the game will not utilize any of the additional memory, however, this kernel has additional logic to “force” certain types of memory allocations into the upper 64MB region to make space for allocations that must be in the lower 64MB region. Going into this project I already knew that the only way this game would boot in 720p would be with the RAM upgrade. In fact, the only way to get it to boot in proper 480p resolution without the RAM upgrade was to steal some memory back from the game’s in-memory texture cache which ends up causing additional texture pop-in. But all of this can be fixed by patching the game’s memory allocator to support the additional 64MB of RAM.</p>



<h2>Halo 2’s memory management</h2>



<p>It’s quite common for game developers to write their own memory management system, especially on older hardware where the built-in memory allocator may be slow or even buggy. Developers would use the built-in memory allocator to make a couple large allocations that they’d wrap in their own allocator to chunk it up and dish out as needed. At startup Halo 2 creates one large allocation that uses ~48.9MB of the available 64MB of RAM on the console, basically, every last page of memory they could possibly get once you account for the Xbox kernel and game executable. This region of memory is then chunked up for various subsystems in the game such as level metadata, texture, geometry, animation, and sound caches, rasterizer targets, network and simulation resources, etc. </p>



<p>In order to patch Halo 2’s memory allocator I was going to need a way to visualize memory usage so I could see where things are located and how much space is being used. I spent a few nights working on a tool (<a rel="noreferrer noopener" href="https://github.com/grimdoomer/XboxImageGrabber" data-type="URL" data-id="https://github.com/grimdoomer/XboxImageGrabber" target="_blank">GitHub: XboxImageGrabber</a>) that would walk the page table entries for all the RAM on the console and create a crude bitmap that color codes various chunks of data, allowing me to create a visualization of what memory looks like:</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/h2_retail_runtime_data.png" target="_blank" rel="noopener"><img loading="lazy" width="1697" height="1080" src="https://icode4.coffee/wp-content/uploads/h2_retail_runtime_data-1697x1080.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/h2_retail_runtime_data-1697x1080.png 1697w, https://icode4.coffee/wp-content/uploads/h2_retail_runtime_data-300x191.png 300w, https://icode4.coffee/wp-content/uploads/h2_retail_runtime_data-768x489.png 768w, https://icode4.coffee/wp-content/uploads/h2_retail_runtime_data-1536x977.png 1536w, https://icode4.coffee/wp-content/uploads/h2_retail_runtime_data-2048x1303.png 2048w, https://icode4.coffee/wp-content/uploads/h2_retail_runtime_data-110x70.png 110w" sizes="(max-width: 1697px) 100vw, 1697px"></a><figcaption>Memory profile of Halo 2</figcaption></figure></div>



<p>This might look like pixel barf and be hard to interpret but it was really only intended for my own use so I never bothered to make it pretty. The first column on the left shows the memory usage by the Xbox OS. At the very beginning is the Xbox kernel, down in the 0x83000000 region we have the Halo 2 executable and some virtual memory allocations, and at 0x84000000 is the end of the 64MB retail RAM region. This was taken on a console with 128MB of memory so everything after 0x84000000 is the “debug” memory region. The center column shows Halo 2’s memory usage for runtime data and d3d resources. This particular image doesn’t have color coding enabled so you can get an idea of how much memory the game reserves for this runtime data region. That blue blob? That’s the ~49MB allocation the game makes on startup. The column on the right shows combined memory usage, basically what has been allocated and what is free with no further classification for what the memory is used for. We can see that the stock version of the game uses almost every available page of memory it can get, sparing only a few as a safety net.</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile.png" target="_blank" rel="noopener"><img loading="lazy" width="1697" height="1080" src="https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-1697x1080.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-1697x1080.png 1697w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-300x191.png 300w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-768x489.png 768w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-1536x977.png 1536w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-2048x1303.png 2048w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-110x70.png 110w" sizes="(max-width: 1697px) 100vw, 1697px"></a><figcaption>Halo 2 memory profile with data classification</figcaption></figure></div>



<p>Here’s the same memory profile image with the runtime data region color coded to show the various subsystem allocations. There’s actually a few more not pictured here but they aren’t too important. The ones we’re concerned with are going to be tag data, texture cache, geometry cache, and rasterizer buffer. The runtime data allocation appearing immediately after the Xbox kernel is not a coincidence, it’s purposefully allocated at a hard coded address of 0x80061000. The “tag data” region is actually all the metadata for every object in a map file in the form of C-structs that have been serialized using the predetermined base address of 0x80061000. The tag data system is designed to be as flexible and performant as possible, and, in my opinion the inner workings are really a feat of engineering. I could write an entire blog post about the inner workings of the tag data system and why I think it makes the Blam engine one of the most flexible engines ever made, but that isn’t relevant to this post. The key takeaway here is that this data needs to always be at the same address or else the game won’t work. But all of the other data in the runtime region can be moved around at will.</p>



<h4>Patching the memory allocator</h4>



<p>The regions we’ll want to move out of the runtime data buffer are the rasterizer targets (at least the ones we’ll be increasing in size), and the texture and geometry caches so we can increase their size to help reduce pop-in issues. We’ll also want to reduce the size of the runtime data buffer to account for the things we’re removing so we don’t waste any memory by not filling it. The patches for the memory allocator will consist of 3 main changes:</p>



<ol><li>Hooking certain allocation calls and moving them to the debug memory region. </li><li>When these allocations are “released” (ex: when loading a new level) we’ll need to call the appropriate free function.</li><li>Adjusting the size of the runtime data region to reclaim memory that’s no longer being used.</li></ol>



<p>I’ve called the memory allocation function we’ll need to hook physical_memory_malloc, and it’s unfortunately inlined by the compiler which means each “call site” for it will need a unique patch, and the same is true for when an allocation is free’d. The pseudo code for the memory allocator patches looks like this:</p>



<div id="urvanov-syntax-highlighter-662143868a302749205471" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p><p>48</p><p>49</p><p>50</p><p>51</p><p>52</p><p>53</p><p>54</p><p>55</p><p>56</p><p>57</p><p>58</p></div>
				</td>
						<td><div><p><span>struct</span><span> </span><span>physical_memory_alloc_info</span></p><p><span>{</span></p><p><span>	</span><span>const</span><span> </span><span>char</span><span>*</span><span> </span><span>name</span><span>;</span><span>				</span><span>// Name for the allocation, ex: "texture cache"</span></p><p><span>	</span><span>unsigned</span><span> </span><span>int</span><span> </span><span>override_size</span><span>;</span><span>		</span><span>// If non-zero use this size for the allocation</span></p><p><span>	</span><span>void</span><span>*</span><span> </span><span>address</span><span>;</span><span>					</span><span>// Allocation address</span></p><p><span>}</span><span>;</span></p><p><span>// Enum used to index into Hack_PhysicalMemoryRegionInfoTable</span></p><p><span>enum</span></p><p><span>{</span></p><p><span>	</span><span>PHYS_MEM_REGION_RASTERIZER_TEXACCUM_TARGET</span><span>,</span></p><p><span>	</span><span>PHYS_MEM_REGION_GEOMETRY_CACHE</span><span>,</span></p><p><span>	</span><span>PHYS_MEM_REGION_TEXTURE_CACHE</span><span>,</span></p><p><span>}</span><span>;</span></p><p><span>// Global array of tracked allocations:</span></p><p><span>physical_memory_alloc_info </span><span>Hack_PhysicalMemoryRegionInfoTable</span><span>[</span><span>]</span><span> </span><span>=</span></p><p><span>{</span></p><p><span>	</span><span>{</span><span> </span><span>"rasterizer texaccum target"</span><span>,</span><span> 	</span><span>0</span><span>,</span><span> </span><span>NULL</span><span> </span><span>}</span><span>,</span></p><p><span>	</span><span>{</span><span> </span><span>"geometry cache"</span><span>,</span><span> 				</span><span>0</span><span>,</span><span> </span><span>NULL</span><span> </span><span>}</span><span>,</span></p><p><span>	</span><span>{</span><span> </span><span>"texture cache"</span><span>,</span><span> 					</span><span>0</span><span>,</span><span> </span><span>NULL</span><span> </span><span>}</span><span>,</span></p><p><span>}</span><span>;</span></p><p><span>void</span><span>*</span><span> </span><span>Hack_PhysicalMemoryAlloc</span><span>(</span><span>unsigned</span><span> </span><span>int</span><span> </span><span>regionIndex</span><span>,</span><span> </span><span>unsigned</span><span> </span><span>int</span><span> </span><span>size</span><span>,</span><span> </span><span>int</span><span> </span><span>protect</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Get a pointer to the allocation info structure.</span></p><p><span>	</span><span>physical_memory_alloc_info</span><span>*</span><span> </span><span>pAllocInfo</span><span> </span><span>=</span><span> </span><span>&amp;</span><span>Hack_PhysicalMemoryRegionInfoTable</span><span>[</span><span>regionIndex</span><span>]</span><span>;</span></p><p><span>	</span><span>// If the override size is specified use it for the allocation.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pAllocInfo</span><span>-&gt;</span><span>override_size</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>		</span><span>size</span><span> </span><span>=</span><span> </span><span>pAllocInfo</span><span>-&gt;</span><span>override_size</span><span>;</span></p><p><span>	</span><span>// Round the size up to the nearest page interval.</span></p><p><span>	</span><span>size</span><span> </span><span>=</span><span> </span><span>(</span><span>size</span><span> </span><span>+</span><span> </span><span>PAGE_SIZE</span><span>-</span><span>1</span><span>)</span><span> </span><span>&amp;</span><span> </span><span>~</span><span>(</span><span>PAGE_SIZE</span><span>-</span><span>1</span><span>)</span><span>;</span></p><p><span>	</span><span>// TODO: Allocate memory from the debug region...</span></p><p><span>	</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span> </span><span>=</span><span> </span><span>NULL</span><span>;</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span></p><p><span>		</span><span>DebugBreak</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>// Debug print the allocation info.</span></p><p><span>	</span><span>DbgPrint</span><span>(</span><span>"physical_memory_malloc %s %ld at 0x%08x\n"</span><span>,</span><span> </span><span>pAllocInfo</span><span>-&gt;</span><span>name</span><span>,</span><span> </span><span>size</span><span>,</span><span> </span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span>)</span><span>;</span></p><p><span>	</span><span>return</span><span> </span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span>;</span></p><p><span>}</span></p><p><span>void</span><span> </span><span>Hack_PhysicalMemoryFree</span><span>(</span><span>unsigned</span><span> </span><span>int</span><span> </span><span>regionIndex</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Get a pointer to the allocation info structure.</span></p><p><span>	</span><span>physical_memory_alloc_info</span><span>*</span><span> </span><span>pAllocInfo</span><span> </span><span>=</span><span> </span><span>&amp;</span><span>Hack_PhysicalMemoryRegionInfoTable</span><span>[</span><span>regionIndex</span><span>]</span><span>;</span></p><p><span>	</span><span>// If the allocation is valid free it.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span> </span><span>!=</span><span> </span><span>NULL</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// TODO: Free the allocation...</span></p><p><span>		</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span> </span><span>=</span><span> </span><span>NULL</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>This allows me to hook individual call sites where the physical_memory_malloc function is inlined using a patch like so:</p>



<div id="urvanov-syntax-highlighter-662143868a307402357472" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p><span>push</span><span>	</span><span>404h</span><span>								</span><span>; PAGE_WRITECOMBINE | PAGE_READWRITE</span></p><p><span>push</span><span>	</span><span>ecx</span><span>									</span><span>; size, calculated earlier in function</span></p><p><span>push</span><span>	</span><span>PHYS</span><span>_</span><span>MEM</span><span>_</span><span>REGION</span><span>_</span><span>GEOMETRY</span><span>_</span><span>CACHE</span><span>		</span><span>; regionIndex</span></p><p><span>mov</span><span>		</span><span>eax</span><span>,</span><span> </span><span>Hack</span><span>_</span><span>PhysicalMemoryAlloc</span></p><p><span>call</span><span>	</span><span>eax</span><span>									</span><span>; Call our helper function to perform the allocation</span></p><p><span>; Jump over code we no longer need to execute.</span></p><p><span>push</span><span>	</span><span>0012DA73h</span></p><p><span>ret</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>Now you’re probably wondering why the lines that perform the allocation and free calls in the pseudo code above are labeled as “TODO”, and that’s because allocating physical contiguous memory in the debug memory region is problematic… </p>



<h2>Xbox memory architecture</h2>



<p>Earlier I mentioned that the original Xbox uses a unified memory design allowing the CPU and GPU to share the same RAM. When the CPU provides a memory address to the GPU (ex: address of a texture or vertex buffer) it must use a physical memory address and the memory span must be contiguous (meaning the pages backing the allocation are all consecutive with no gaps). This is because the GPU doesn’t have any concept of page tables or virtual memory addresses so it’s unable to translate virtual addresses to perform memory accesses. It simply treats the memory address as an offset from the start of RAM and reads data as needed starting from this offset. There’s specific APIs for allocating “video” or “GPU” memory but these are all wrappers for allocating memory that is physical and contiguous.</p>



<p>The Xbox kernel provides various functions for allocating memory but there’s two main types of memory allocations that can be made. Physical memory which is also contiguous, and virtual memory which is not explicitly contiguous (it can end up being contiguous by chance but it’s virtual memory so it’s not required to be contiguous). On an unmodified retail Xbox console there’s only 64MB of RAM and the entire 64MB region can be used to make physical or virtual allocations. When using a console with 128MB of RAM and kernel with extra RAM support only the first 64MB of RAM can be used for physical allocations, but virtual allocations can be made anywhere in the 128MB region. If you try to make a physical allocation and there’s not enough free contiguous memory in the first 64MB of RAM, the kernel will attempt to relocate virtual allocations into the upper 64MB region to satisfy the allocation request.</p>



<p>This was done on purpose to provide a closer experience to the retail hardware for developers to work with. The additional 64MB of “debug” memory was to allow developers to run extra code and profiling tools that consumed memory without having to take away from the memory their game would normally have. There’s no benefit to allowing developers to allocate more “video” memory in the debug region as it doesn’t exist on retail hardware and can’t be used in a final version of the game. However, this limits me in terms of how much additional memory I can give Halo 2 for video allocations.</p>



<h2>Hot patching the Xbox kernel</h2>



<p>Looking at the memory profile image above we can see the “runtime data region” consumes most of the first 64MB of RAM. Not everything allocated in this region is required to be “video” memory (and thus needs to be in physical memory), so I could move as many things as possible out of that region and into the upper 64MB of RAM as a virtual allocation. But this gets quite messy to track down all of the allocations being made and patch each call site, and it won’t give us as much memory as we really need for additional performance tweaks later on. Rather than go for a sub-par solution I decided to take matters (or memory) into my own hands and try something crazy.</p>



<p>I ran some tests where I made a video memory allocation “by hand” and just stole some unused page table entries for the upper 64MB address space. Instead of asking the kernel to allocate the memory for me, I just “commandeered” the page tables and did it myself. Feeding this address to the GPU for rendering worked just fine which meant that the limitation of only being able to allocate “video” memory in the lower 64MB of RAM is not a hardware limitation it’s a software one. The only thing preventing me from making physical memory allocations in the upper 64MB of RAM is the kernel. After spending a few nights digging through the memory management functions in the Xbox kernel I found the blocker that was preventing me from making physical allocations passed the 64MB mark:</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/max_pfn_check-1.png" target="_blank" rel="noopener"><img loading="lazy" width="879" height="516" src="https://icode4.coffee/wp-content/uploads/max_pfn_check-1.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/max_pfn_check-1.png 879w, https://icode4.coffee/wp-content/uploads/max_pfn_check-1-300x176.png 300w, https://icode4.coffee/wp-content/uploads/max_pfn_check-1-768x451.png 768w" sizes="(max-width: 879px) 100vw, 879px"></a><figcaption>Max PFN check in MmAllocateContiguousMemoryEx</figcaption></figure></div>



<p>The MmAllocateContiguousMemoryEx function used to allocate contiguous physical memory takes in two parameters that let the caller specify the lowest and highest acceptable addresses for the memory allocation. This is how Halo 2 gets the runtime data region to always be at the address 0x80061000, by specifying the highest acceptable address as 0x61000 (the upper most bits are masked out). The kernel takes both of these parameters and converts them into page frame numbers (basically an index for the page of memory that corresponds to that address), and checks they’re less than or equal to this constant I called MAX_USABLE_PFN. The MAX_USABLE_PFN constant corresponds to the address 0x83FE0000, which is equal to 64MB – 128KB. What is the significance of this value? The top 128kb of RAM is always reserved with 64KB used as a “scratch” region for the GPU and the other 64KB used for the CPU page tables. I believe the GPU “scratch” region is used for storing data related to depth buffer compression tags and possibly processed vertex data that is still passing through the shader pipeline, but I’ve never actually confirmed this myself.</p>



<p>This check is our blocker for allocating physical memory in the upper 64MB of RAM. I changed this value at runtime after my test application loaded and confirmed I was able to allocate memory in the upper 64MB of RAM using MmAllocateContiguousMemoryEx, and the GPU was able to use that memory just fine. So now all I needed to do is write a function to hot patch the Xbox kernel when the game boots, no big deal right? For this patch I’ll first make sure the console has 128MB of RAM installed, then resolve the address of the MmAllocateContiguousMemoryEx function, search for the “mov edx, 0x3FDF” instruction, and patch it to use a new “MAX_USABLE_PFN” value suitable for 128MB RAM configuration. Here’s the pseudo code for the patch:</p>



<div id="urvanov-syntax-highlighter-662143868a309300802937" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p></div>
				</td>
						<td><div><p><span>bool</span><span> </span><span>PatchMaxPFN</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Search for the max PFN value.</span></p><p><span>	</span><span>BYTE</span><span>*</span><span> </span><span>pPtr</span><span> </span><span>=</span><span> </span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>pMmAllocateContiguousMemoryEx</span><span>;</span></p><p><span>	</span><span>BYTE</span><span>*</span><span> </span><span>pEndPtr</span><span> </span><span>=</span><span> </span><span>(</span><span>BYTE</span><span>*</span><span>)</span><span>pMmAllocateContiguousMemoryEx</span><span> </span><span>+</span><span> </span><span>0x80</span><span>;</span></p><p><span>	</span><span>while</span><span> </span><span>(</span><span>pPtr</span><span> </span><span>&lt;</span><span> </span><span>pEndPtr</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Check for the max PFN value.</span></p><p><span>		</span><span>if</span><span> </span><span>(</span><span>*</span><span>(</span><span>DWORD</span><span>*</span><span>)</span><span>pPtr</span><span> </span><span>==</span><span> </span><span>0x00003FDF</span><span>)</span></p><p><span>		</span><span>{</span></p><p><span>			</span><span>_asm</span></p><p><span>			</span><span>{</span></p><p><span>				</span><span>// Disable write protect.</span></p><p><span>				</span><span>pushf</span></p><p><span>				</span><span>cli</span><span>							</span><span>// Disable interrupts</span></p><p><span>				</span><span>mov		</span><span>eax</span><span>,</span><span> </span><span>cr0</span><span>			</span><span>// Get the control register value</span></p><p><span>				</span><span>push	</span><span>eax</span><span>					</span><span>// Save it for later</span></p><p><span>				</span><span>and</span><span>		</span><span>eax</span><span>,</span><span> </span><span>0xFFFEFFFF</span><span>		</span><span>// Disable write-protect</span></p><p><span>				</span><span>mov		</span><span>cr0</span><span>,</span><span> </span><span>eax</span></p><p><span>				</span><span>// Update the max PFN to use the 128MB limit value.</span></p><p><span>				</span><span>mov		</span><span>eax</span><span>,</span><span> </span><span>pPtr</span></p><p><span>				</span><span>mov		</span><span>dword </span><span>ptr</span><span> </span><span>[</span><span>eax</span><span>]</span><span>,</span><span> </span><span>0x00007FCF</span></p><p><span>				</span><span>// Re-enable write-protect.</span></p><p><span>				</span><span>pop		</span><span>eax</span></p><p><span>				</span><span>mov		</span><span>cr0</span><span>,</span><span> </span><span>eax</span><span>			</span><span>// Re-enable write-protect</span></p><p><span>				</span><span>popf</span></p><p><span>			</span><span>}</span></p><p><span>			</span><span>return</span><span> </span><span>true</span><span>;</span></p><p><span>		</span><span>}</span></p><p><span>		</span><span>// Next round.</span></p><p><span>		</span><span>pPtr</span><span>++</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>// Failed to patch max PFN value.</span></p><p><span>	</span><span>return</span><span> </span><span>false</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>Now that the memory allocation problems are solved we can fill in the two missing lines from the Hack_PhysicalMemoryAlloc/Hack_PhysicalMemoryFree functions above to use MmAllocateContiguousMemoryEx and MmFreeContiguousMemory. Once we hot patch the kernel we can call MmAllocateContiguousMemoryEx using a lowest acceptable address of 0 and highest acceptable address of 0xFFFFFFFF (which the function will override with our new MAX_USABLE_PFN value). The kernel will walk the page tables in reverse starting from the highest acceptable page number and search for a span of free pages large enough to satisfy the allocation request. This will guarantee the upper 64MB of RAM will take preference during allocation but allows using any available space in all 128MB of RAM to satisfy the request.</p>



<div id="urvanov-syntax-highlighter-662143868a30c283487506" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p></div>
				</td>
						<td><div><p><span>void</span><span>*</span><span> </span><span>Hack_PhysicalMemoryAlloc</span><span>(</span><span>unsigned</span><span> </span><span>int</span><span> </span><span>regionIndex</span><span>,</span><span> </span><span>unsigned</span><span> </span><span>int</span><span> </span><span>size</span><span>,</span><span> </span><span>int</span><span> </span><span>protect</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Get a pointer to the allocation info structure.</span></p><p><span>	</span><span>physical_memory_alloc_info</span><span>*</span><span> </span><span>pAllocInfo</span><span> </span><span>=</span><span> </span><span>&amp;</span><span>Hack_PhysicalMemoryRegionInfoTable</span><span>[</span><span>regionIndex</span><span>]</span><span>;</span></p><p><span>	</span><span>// If the override size is specified use it for the allocation.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pAllocInfo</span><span>-&gt;</span><span>override_size</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>		</span><span>size</span><span> </span><span>=</span><span> </span><span>pAllocInfo</span><span>-&gt;</span><span>override_size</span><span>;</span></p><p><span>	</span><span>// Round the size up to the nearest page interval.</span></p><p><span>	</span><span>size</span><span> </span><span>=</span><span> </span><span>(</span><span>size</span><span> </span><span>+</span><span> </span><span>PAGE_SIZE</span><span>-</span><span>1</span><span>)</span><span> </span><span>&amp;</span><span> </span><span>~</span><span>(</span><span>PAGE_SIZE</span><span>-</span><span>1</span><span>)</span><span>;</span></p><p><span>	</span><span>// Allocate physical contiguous memory (using the entire 128MB address space).</span></p><p><span>	</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span> </span><span>=</span><span> </span><span>MmAllocateContiguousMemoryEx</span><span>(</span><span>size</span><span>,</span><span> </span><span>/* LowestAcceptableAddress */</span><span> </span><span>0</span><span>,</span><span> </span><span>/* HighestAcceptableAddress */</span><span> </span><span>0xFFFFFFFF</span><span>,</span><span> </span><span>/* Alignment */</span><span> </span><span>PAGE_SIZE</span><span>,</span><span> </span><span>/* PageAccess */</span><span> </span><span>protect</span><span>)</span><span>;</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span> </span><span>==</span><span> </span><span>NULL</span><span>)</span></p><p><span>		</span><span>DebugBreak</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>// Debug print the allocation info.</span></p><p><span>	</span><span>DbgPrint</span><span>(</span><span>"physical_memory_malloc %s %ld at 0x%08x\n"</span><span>,</span><span> </span><span>pAllocInfo</span><span>-&gt;</span><span>name</span><span>,</span><span> </span><span>size</span><span>,</span><span> </span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span>)</span><span>;</span></p><p><span>	</span><span>return</span><span> </span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span>;</span></p><p><span>}</span></p><p><span>void</span><span> </span><span>Hack_PhysicalMemoryFree</span><span>(</span><span>unsigned</span><span> </span><span>int</span><span> </span><span>regionIndex</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Get a pointer to the allocation info structure.</span></p><p><span>	</span><span>physical_memory_alloc_info</span><span>*</span><span> </span><span>pAllocInfo</span><span> </span><span>=</span><span> </span><span>&amp;</span><span>Hack_PhysicalMemoryRegionInfoTable</span><span>[</span><span>regionIndex</span><span>]</span><span>;</span></p><p><span>	</span><span>// If the allocation is valid free it.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span> </span><span>!=</span><span> </span><span>NULL</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Free the allocation.</span></p><p><span>		</span><span>MmFreeContiguousMemory</span><span>(</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span>)</span><span>;</span></p><p><span>		</span><span>pAllocInfo</span><span>-&gt;</span><span>address</span><span> </span><span>=</span><span> </span><span>NULL</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<h4>Visualizing the results</h4>



<p>That was a lot of work but the results are well worth it. As I mentioned earlier the only way to get the game to run in 720p or higher is with a RAM upgrade. Even running the game in proper 480p on a console without the RAM upgrade requires stealing memory back from the game to offset the additional memory requirements, which exacerbates the texture pop-in issues that are prevalent even in the game’s unmodified form. I’ve rambled on about memory management enough, here’s what the game looks like in 720p:</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/halo_2_720p.png" target="_blank" rel="noopener"><img loading="lazy" width="1280" height="720" src="https://icode4.coffee/wp-content/uploads/halo_2_720p.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/halo_2_720p.png 1280w, https://icode4.coffee/wp-content/uploads/halo_2_720p-300x169.png 300w, https://icode4.coffee/wp-content/uploads/halo_2_720p-768x432.png 768w" sizes="(max-width: 1280px) 100vw, 1280px"></a><figcaption>Zanzibar beach in 720p</figcaption></figure></div>



<p>It looks great! But it doesn’t play great… The FPS is noticeably lower to the point where it’s dipping to 10 FPS or lower in heavy scenes. While I was expecting a performance hit I wasn’t expecting it to be this bad, but that’s okay because there’s things we can do to improve this quite a bit. Before that, lets give 1080p a try and see what it looks like. Remember that while the game is rendering natively in 1080p the Xbox console is only able to output a 1080i video signal. However, by dumping the D3D back buffer directly I’m able to get a proper 1080p screenshot before the GPU converts it into half frames for the video encoder to display on screen:</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/1080p_zanzibar.png" target="_blank" rel="noopener"><img loading="lazy" width="1920" height="1080" src="https://icode4.coffee/wp-content/uploads/1080p_zanzibar-1920x1080.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/1080p_zanzibar.png 1920w, https://icode4.coffee/wp-content/uploads/1080p_zanzibar-300x169.png 300w, https://icode4.coffee/wp-content/uploads/1080p_zanzibar-768x432.png 768w, https://icode4.coffee/wp-content/uploads/1080p_zanzibar-1536x864.png 1536w" sizes="(max-width: 1920px) 100vw, 1920px"></a><figcaption>Zanzibar beach in 1080p</figcaption></figure></div>



<h4>Unforeseen consequences</h4>



<p>Okay so this kernel hot patching does have some undesirable side effects which is understandable since I just changed a pretty crucial aspect of how memory management works mid-execution. Hot patching the kernel and letting Halo 2 run works fine until you exit the game without cold rebooting the console. If you do a warm reboot (returning to the dashboard, ejecting the dvd tray, etc) the console is basically “hosed” and the next application/game to run will have severe graphical artifacting, and the console will most likely crash shortly after. This is likely because there’s more changes required to expand the physical memory region outside of the single change I made. I have some theories as to what the remaining issues are but having spent a significant amount of time on memory management patches I decided to take the cop out solution here. To make this more “robust” I added additional patches that would cold reboot the console (which reloads the kernel) whenever you exit the game so all of the side effects of this hot patching are hidden from the end user. This would prove useful later on as there’s additional changes I make that really should be reset after exiting the game and cold rebooting the console solves all of this.</p>



<h2>Part 3: Performance Improvements and Overclocking</h2>



<p>Now that the game is rendering in 720p and 1080p it’s time to address the performance issues and make it playable, at least in 720p. Adding 1080p support is really just a bonus to get nice screenshots and I have no expectations that the console will be able to run the game at that resolution and be “playable”, regardless of what performance improvements I can make. The first step was to get some baseline performance measurements on a stock Xbox console and the god box that doom sent me. The god box also had two different BIOS images, one that overclocked just the CPU, and one that overclocked both CPU and GPU. This would let me get three different measurements: one for stock hardware (no overclocking), one for CPU overclocking, and one for CPU + GPU overclocking. From these measurements I could determine where the performance bottlenecks were and start from there.</p>



<p>I found a particularly heavy area on Zanzibar that I’ll refer to as the “zanzibar benchmark scene”, which was a decent test case for performance benchmarks. While collecting the performance measurements I immediately realized that the FPS between all three setups was almost identical when under heavy load which was extremely suspicious. If overclocking the CPU and GPU show no improvement in performance then the bottleneck was certainly elsewhere. My first thought was I might be maxing the memory bandwidth now that the GPU has a lot more pixel calculations to do and thus a lot more memory to read and write. However, after spending a few nights running tests and bouncing ideas off doom I realized I’d overlooked something very obvious while staring at a performance graph.</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/stock_perf_double_buffer-2.png" target="_blank" rel="noopener"><img loading="lazy" width="1920" height="961" src="https://icode4.coffee/wp-content/uploads/stock_perf_double_buffer-2-1920x961.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/stock_perf_double_buffer-2-1920x961.png 1920w, https://icode4.coffee/wp-content/uploads/stock_perf_double_buffer-2-300x150.png 300w, https://icode4.coffee/wp-content/uploads/stock_perf_double_buffer-2-768x384.png 768w, https://icode4.coffee/wp-content/uploads/stock_perf_double_buffer-2-1536x769.png 1536w, https://icode4.coffee/wp-content/uploads/stock_perf_double_buffer-2-2048x1025.png 2048w" sizes="(max-width: 1920px) 100vw, 1920px"></a><figcaption>Performance graph for stock console at 720p (double buffered)</figcaption></figure></div>



<p>This graph shows GPU use (yellow), CPU use (red), frames per second (blue), and swap stall rate (teal). Initially I didn’t know what “swap stall” was and I couldn’t find any documentation about it in the Xbox SDK docs. But after I realized the game was running with vsync on it made perfect sense, swap stall = swap chain stall, the GPU was stalling because the swap chain was full and vsync was on.</p>



<h4>VSync and swap chains</h4>



<p>Halo 2 runs with vsync on and uses double buffering so it only has 2 buffers in the swap chain (one front buffer and one back buffer). The back buffer is used by the GPU to render the current frame while the front buffer is the previous frame that was rendered and is now being displayed on screen. When the GPU finishes drawing the current frame it needs to swap the back and front buffers (or rotate the swap chain) so the newly completed frame can be drawn on screen and the old one can be used by the GPU for the next frame. But when vsync is on the GPU can only rotate the swap chain at the start of a vertical blanking (vblank) period (when the TV retraces to the top and starts drawing the image from the beginning). If you turn vsync off the GPU can rotate the swap chain at any time, but if the front buffer is only partially displayed on screen when you rotate the swap chain it’ll result in a “tearing” effect on screen (hence why you want vsync on as it prevents this).</p>



<p>The swap stall line in the graph above is the rate at which the GPU had to stall and wait for a vblank period in order to rotate the swap chain. Basically, the GPU isn’t able to render frames fast enough to keep up with the refresh rate of the screen and it ends up having to wait until the next screen refresh to rotate the swap chain. In hindsight this seems so obvious but at the time I was preoccupied with all the hardware modifications I completely forgot about vsync.</p>



<h2>From double to triple buffering</h2>



<p>This is relative easy to fix as we can just increase the number of buffers in the swap chain to 3 which allows us to queue a completed frame and immediately begin processing the next frame, even if the GPU needs to wait for the next vblank before rotating the swap chain. Here’s the updated pseudo code for the rasterizer_device_initialize hook:</p>



<div id="urvanov-syntax-highlighter-662143868a30f384347295" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p></div>
				</td>
						<td><div><p><span>bool</span><span> </span><span>rasterizer_device_initialize</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>D3DPRESENT_PARAMETERS </span><span>PresentParams</span><span> </span><span>=</span><span> </span><span>{</span><span>0</span><span>}</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferWidth</span><span> </span><span>=</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span> </span><span>-</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x0</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferHeight</span><span> </span><span>=</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span> </span><span>-</span><span> </span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>y1</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferFormat</span><span> </span><span>=</span><span> </span><span>D3DFMT_A8R8G8B8</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>EnableAutoDepthStencil</span><span> </span><span>=</span><span> </span><span>TRUE</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>AutoDepthStencilFormat</span><span> </span><span>=</span><span> </span><span>D3DFMT_D24S8</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>=</span><span> </span><span>D3DPRESENTFLAG_LOCKABLE_BACKBUFFER</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>FullScreen_RefreshRateInHz</span><span> </span><span>=</span><span> </span><span>g_refresh_rate_hz</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>FullScreen_PresentationInterval</span><span> </span><span>=</span><span> </span><span>D3DPRESENT_INTERVAL_IMMEDIATE</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>// Setup back buffer count and swap effect for triple buffering.</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>BackBufferCount</span><span> </span><span>=</span><span> </span><span>2</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>SwapEffect</span><span> </span><span>=</span><span> </span><span>D3DSWAPEFFECT_DISCARD</span><span>;</span></p><p><span>	</span><span>PresentParams</span><span>.</span><span>PresentationInterval</span><span> </span><span>=</span><span> </span><span>D3DPRESENT_INTERVAL_ONE</span><span>;</span></p><p><span>	</span><span>// Check if wide screen mode is enabled.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>g_widescreen_enabled</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>		</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>|=</span><span> </span><span>D3DPRESENTFLAG_WIDESCREEN</span><span>;</span></p><p><span>	</span><span>// Check if the video mode supports progressive scan.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>g_progressive_scan_enabled</span><span> </span><span>!=</span><span> </span><span>0</span><span>)</span></p><p><span>		</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>|=</span><span> </span><span>D3DPRESENTFLAG_PROGRESSIVE</span><span>;</span></p><p><span>	</span><span>// Check the resolution width to see if 1080i is enabled.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>rasterizer_globals</span><span>.</span><span>screen_bounds</span><span>.</span><span>x1</span><span> </span><span>==</span><span> </span><span>1920</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>&amp;=</span><span> </span><span>~</span><span>D3DPRESENTFLAG_PROGRESSIVE</span><span>;</span></p><p><span>		</span><span>PresentParams</span><span>.</span><span>Flags</span><span> </span><span>|=</span><span> </span><span>D3DPRESENTFLAG_INTERLACED</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>g_pDirect3D</span><span>-&gt;</span><span>CreateDevice</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DDEVTYPE_HAL</span><span>,</span><span> </span><span>NULL</span><span>,</span><span> </span><span>D3DCREATE_HARDWARE_VERTEXPROCESSING</span><span>,</span><span> </span><span>&amp;</span><span>PresentParams</span><span>,</span><span> </span><span>&amp;</span><span>g_pD3DDevice</span><span>)</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>Here I’ve increased the back buffer count to 2 (default is 1), and set the swap effect such that the swap chain will be rotated on each present call. This will give us 3 buffers to work with (2 back and 1 front), but we’ll need to make another modification to the game’s rendering engine to account for this additional buffer. Earlier when I was going through the process of resizing the game’s render targets I showed some code for how the game sets up texture views for the back and front buffers for use in rendering passes:</p>



<div id="urvanov-syntax-highlighter-662143868a312449942468" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p></div>
				</td>
						<td><div><p><span>bool</span><span> </span><span>rasterizer_primary_targets_initialize</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Get the back buffer, front buffer, and depth buffer surfaces.</span></p><p><span>	</span><span>global_d3d_device</span><span>-&gt;</span><span>GetBackBuffer</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DBACKBUFFER_TYPE_MONO</span><span>,</span><span> </span><span>&amp;</span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_device</span><span>-&gt;</span><span>GetBackBuffer</span><span>(</span><span>-</span><span>1</span><span>,</span><span> </span><span>D3DBACKBUFFER_TYPE_MONO</span><span>,</span><span> </span><span>&amp;</span><span>global_d3d_surface_render_primary</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_device</span><span>-&gt;</span><span>GetDepthStencilSurface</span><span>(</span><span>&amp;</span><span>global_d3d_surface_render_primary_z</span><span>)</span><span>;</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>	</span><span>global_d3d_texture_render_primary</span><span>[</span><span>0</span><span>]</span><span> </span><span>=</span><span> </span><span>(</span><span>IDirect3DTexture8</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>IDirect3DTexture8</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_texture_render_primary</span><span>[</span><span>1</span><span>]</span><span> </span><span>=</span><span> </span><span>(</span><span>IDirect3DTexture8</span><span>*</span><span>)</span><span>malloc</span><span>(</span><span>sizeof</span><span>(</span><span>IDirect3DTexture8</span><span>)</span><span>)</span><span>;</span></p><p><span>	</span><span>// Setup texture views for back/front buffers.</span></p><p><span>	</span><span>for</span><span> </span><span>(</span><span>int</span><span> </span><span>i</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span><span> </span><span>i</span><span> </span><span>&lt;</span><span> </span><span>2</span><span>;</span><span> </span><span>i</span><span>++</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>XGSetTextureHeader</span><span>(</span><span>640</span><span>,</span><span> </span><span>480</span><span>,</span><span> </span><span>1</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>D3DFMT_LIN_A8R8G8B8</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span></p><p><span>			</span><span>global_d3d_texture_render_primary</span><span>[</span><span>i</span><span>]</span><span>,</span><span> </span><span>global_d3d_surface_render_primary</span><span>[</span><span>i</span><span>]</span><span>-&gt;</span><span>Data</span><span>,</span><span> </span><span>0</span><span>)</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>.</span><span>.</span><span>.</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>Each frame after the game calls Present() it’ll swap the Data field in global_d3d_surface_render_primary[0]/[1] and global_d3d_texture_render_primary[0]/[1] so they point to the correct memory for the new back and front buffers. This works fine when the game is double buffered but now that we introduced a third buffer into the swap chain we’ll need to account for this after the game calls Present(). We’ll also need to update the rasterizer_primary_targets_initialize hook from earlier to initialize these buffers correctly before the first frame is drawn. Here is the pseudo code for these functions:</p>



<div id="urvanov-syntax-highlighter-662143868a315969332592" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p><p>33</p><p>34</p><p>35</p><p>36</p><p>37</p><p>38</p><p>39</p><p>40</p><p>41</p><p>42</p><p>43</p><p>44</p><p>45</p><p>46</p><p>47</p></div>
				</td>
						<td><div><p><span>void</span><span> </span><span>Hook_IDirect3DDevice8_Swap</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Call the trampoline and let the real function run.</span></p><p><span>	</span><span>IDirect3DDevice8_Swap_trampoline</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>// Check if triple buffering is enable.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>Hack_TripleBufferingEnabled</span><span> </span><span>==</span><span> </span><span>false</span><span>)</span></p><p><span>		</span><span>return</span><span>;</span></p><p><span>	</span><span>// Release references to the old back buffer.</span></p><p><span>	</span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>-&gt;</span><span>Release</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_surface_render_primary</span><span>[</span><span>1</span><span>]</span><span>-&gt;</span><span>Release</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>// Get the new back buffer and increment the reference count twice.</span></p><p><span>	</span><span>global_d3d_device</span><span>-&gt;</span><span>GetBackBuffer</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DBACKBUFFER_TYPE_MONO</span><span>,</span><span> </span><span>&amp;</span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>global_d3d_device</span><span>-&gt;</span><span>GetBackBuffer</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DBACKBUFFER_TYPE_MONO</span><span>,</span><span> </span><span>&amp;</span><span>global_d3d_surface_render_primary</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>// Update the Data field for the back buffer textures.</span></p><p><span>	</span><span>global_d3d_texture_render_primary</span><span>[</span><span>0</span><span>]</span><span>-&gt;</span><span>Data</span><span> </span><span>=</span><span> </span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>-&gt;</span><span>Data</span><span>;</span></p><p><span>	</span><span>global_d3d_texture_render_primary</span><span>[</span><span>1</span><span>]</span><span>-&gt;</span><span>Data</span><span> </span><span>=</span><span> </span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>-&gt;</span><span>Data</span><span>;</span></p><p><span>}</span></p><p><span>bool</span><span> </span><span>Hook_rasterizer_primary_targets_initialize</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>// Call the trampoline and let the real function complete.</span></p><p><span>	</span><span>bool</span><span> </span><span>result</span><span> </span><span>=</span><span> </span><span>rasterizer_primary_targets_initialize_trampoline</span><span>(</span><span>)</span><span>;</span></p><p><span>	</span><span>// Check if triple buffering is enabled.</span></p><p><span>	</span><span>if</span><span> </span><span>(</span><span>Hack_TripleBufferingEnabled</span><span> </span><span>!=</span><span> </span><span>true</span><span>)</span></p><p><span>	</span><span>{</span></p><p><span>		</span><span>// Set both primary render surfaces to point to the active back buffer.</span></p><p><span>		</span><span>global_d3d_device</span><span>-&gt;</span><span>GetBackBuffer</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DBACKBUFFER_TYPE_MONO</span><span>,</span><span> </span><span>&amp;</span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>)</span><span>;</span></p><p><span>		</span><span>global_d3d_device</span><span>-&gt;</span><span>GetBackBuffer</span><span>(</span><span>0</span><span>,</span><span> </span><span>D3DBACKBUFFER_TYPE_MONO</span><span>,</span><span> </span><span>&amp;</span><span>global_d3d_surface_render_primary</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span></p><p><span>		</span><span>// Update the Data field for the back buffer textures.</span></p><p><span>		</span><span>global_d3d_texture_render_primary</span><span>[</span><span>0</span><span>]</span><span>-&gt;</span><span>Data</span><span> </span><span>=</span><span> </span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>-&gt;</span><span>Data</span><span>;</span></p><p><span>		</span><span>global_d3d_texture_render_primary</span><span>[</span><span>1</span><span>]</span><span>-&gt;</span><span>Data</span><span> </span><span>=</span><span> </span><span>global_d3d_surface_render_primary</span><span>[</span><span>0</span><span>]</span><span>-&gt;</span><span>Data</span><span>;</span></p><p><span>	</span><span>}</span></p><p><span>	</span><span>// Update the dimensions of the surface/textures created to match the resolution of the back buffer.</span></p><p><span>	</span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>global_d3d_texture_render_primary</span><span>[</span><span>0</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>global_d3d_texture_render_primary</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>global_d3d_texture_z_as_target</span><span>[</span><span>0</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>Hack_UpdateD3dPixelContainerForScreenResolution</span><span>(</span><span>global_d3d_texture_z_as_target</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span></p><p><span>	</span><span>return</span><span> </span><span>result</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>With this change global_d3d_surface_render_primary[0]/[1] and global_d3d_texture_render_primary[0]/[1] will always reference the current back buffer. After the Swap hook returns the game will still swap global_d3d_surface_render_primary[0]/[1] and global_d3d_texture_render_primary[0]/[1] internally but this is basically a no-op since they point to the same underlying memory. Now, you might be thinking global_d3d_surface_render_primary[1] is supposed to point to the front buffer per the game’s original implementation, so what happens now that global_d3d_surface_render_primary[1] always points to the back buffer? And the answer, is nothing. The game never used the front buffer because it can’t do anything meaningful with it while it’s being drawn to screen. It only held the pointer so it could swap the surfaces every frame. With these changes in place I loaded up the Zanzibar benchmark scene and collected some new performance measurements:</p>



<figure><a href="https://icode4.coffee/wp-content/uploads/stock_perf_triple_buffer-1.png" target="_blank" rel="noopener"><img loading="lazy" width="1920" height="962" src="https://icode4.coffee/wp-content/uploads/stock_perf_triple_buffer-1-1920x962.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/stock_perf_triple_buffer-1-1920x962.png 1920w, https://icode4.coffee/wp-content/uploads/stock_perf_triple_buffer-1-300x150.png 300w, https://icode4.coffee/wp-content/uploads/stock_perf_triple_buffer-1-768x385.png 768w, https://icode4.coffee/wp-content/uploads/stock_perf_triple_buffer-1-1536x769.png 1536w, https://icode4.coffee/wp-content/uploads/stock_perf_triple_buffer-1-2048x1026.png 2048w" sizes="(max-width: 1920px) 100vw, 1920px"></a><figcaption>Performance graph for stock console at 720p (triple buffered)</figcaption></figure>



<p>As we can see the swap stall line is gone and the FPS is sitting at ~22 which is +~3 FPS higher than before. You might be thinking that a 3 FPS increase isn’t really much but when the game is capped at 30 FPS this is actually a 10% increase which is pretty nice. Also remember that the main goal here was to eliminate the swap stall which prevented the GPU from running as fast as it could. Looking at the graph some more we can see the GPU is now maxed! This might seem bad but we now know the GPU is the bottleneck. We’re still running on stock GPU clock speed and once we overclock the GPU the performance should increase quite a bit.</p>



<h2>Overclocking the GPU</h2>



<p>I spent a few nights digging through some PIX traces, running tests, and trying to find any other low hanging fruit for cheap performance gains. I was able to get another +1-2 FPS by tiling the texaccum render target but it seemed like that was all I was going to get for cheap gains. There’s one or two ideas I had that might get some performance increase but they required a decent amount of changes and I wasn’t sure if the end result would even get me a 1 FPS increase, so I decided to leave it alone and maybe loop back on it another day. With the changes to tile the texaccum render target the Zanzibar benchmark scene was sitting at 23-24 FPS which was a solid improvement over the original ~19 FPS. Now it was time to turn to overclocking, and running the Zanzibar benchmark scene on the god box with overclocked GPU gave a solid 27-28 FPS. Running around the map felt smooth and the FPS was typically holding at a steady 30 FPS, though there were still some areas (like the benchmark scene) where the FPS would drop. Overall I considered it to be highly playable and was relatively satisfied with the results. </p>



<p>The only problem is that the god box is running a one-off bespoke BIOS image that doom made for it. While the GPU overclocking settings could be patched into other community BIOS images it wouldn’t be great if the requirement to run this HD patch was “patch your BIOS image and reflash it to your console”. Luckily I wouldn’t have to resort to that because the GPU clock generator can be controlled entirely by memory mapped IO registers. Using these registers you can control the coefficients for the clock generator and change the clock speed on the fly. So for this next patch I’m going to have the game dynamically overclock the GPU on startup.</p>



<h4>Adjusting the clock speed</h4>



<p>The clock signal for the GPU is calculated as follows:</p>



<div id="urvanov-syntax-highlighter-662143868a319551302372" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					
				</td>
						<td><div><p>NVPLL_COEFF (32 bits):</p><p>	Bits 0-7: M</p><p>	Bits 8-15: N</p><p>	Bits 16-18: P</p><p>BASE_CLK = 16.6667 Mhz</p><p>nvclk = (N * BASE_CLK / (1 &lt;&lt; P) / M)</p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>The M and P values are set to 1 by default, and BASE_CLK is always 16.6667 Mhz which is sourced from a crystal on the motherboard. So the formula can be shortened to: (N * 16.6667) / 2. We’ll be modifying the N component which is set to 28 by default for a GPU clock speed of 233.33 Mhz. This will let us step the clock speed in increments of ~8 Mhz which I made configurable via an ini file that the patch loads on startup. The pseudo code for overclocking the GPU looks like this:</p>



<div id="urvanov-syntax-highlighter-662143868a31c754659487" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p></div>
				</td>
						<td><div><p><span>void</span><span> </span><span>Util_OverclockGPU</span><span>(</span><span>int</span><span> </span><span>step</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>/*</span></p><p><span>		NVPLL_COEFF (32 bits):</span></p><p><span>			Bits 0-7: M</span></p><p><span>			Bits 8-15: N</span></p><p><span>			Bits 16-18: P</span></p><p><span>		BASE_CLK = 16.6667 Mhz</span></p><p><span>		nvclk = (N * BASE_CLK / (1 &lt;&lt; P) / M)</span></p><p><span>	*/</span></p><p><span>	</span><span>// Read the current clock config from the NVPLL_COEFF register.</span></p><p><span>	</span><span>DWORD </span><span>clockConfig</span><span> </span><span>=</span><span> </span><span>*</span><span>(</span><span>DWORD</span><span>*</span><span>)</span><span>(</span><span>NV_GPU_BASE_ADDRESS</span><span> </span><span>+</span><span> </span><span>NVPLL_COEFF</span><span>)</span><span>;</span></p><p><span>	</span><span>// Mask out the old N value.</span></p><p><span>	</span><span>clockConfig</span><span> </span><span>&amp;=</span><span> </span><span>~</span><span>0xFF00</span><span>;</span></p><p><span>	</span><span>// Mask in the new N value.</span></p><p><span>	</span><span>clockConfig</span><span> </span><span>|=</span><span> </span><span>(</span><span>(</span><span>step</span><span> </span><span>&amp;</span><span> </span><span>0xFF</span><span>)</span><span> </span><span>&lt;&lt;</span><span> </span><span>8</span><span>)</span><span>;</span></p><p><span>	</span><span>// Write the new NVPLL_COEFF value.</span></p><p><span>	</span><span>*</span><span>(</span><span>DWORD</span><span>*</span><span>)</span><span>(</span><span>NV_GPU_BASE_ADDRESS</span><span> </span><span>+</span><span> </span><span>NVPLL_COEFF</span><span>)</span><span> </span><span>=</span><span> </span><span>clockConfig</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>That’s it, the GPU is now overclocked. Kind of lack luster I know, but you’re probably wondering how far can we overclock the GPU? And what does the new performance graph look like?</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/oc_perf_triple_buffer.png" target="_blank" rel="noopener"><img loading="lazy" width="1920" height="961" src="https://icode4.coffee/wp-content/uploads/oc_perf_triple_buffer-1920x961.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/oc_perf_triple_buffer-1920x961.png 1920w, https://icode4.coffee/wp-content/uploads/oc_perf_triple_buffer-300x150.png 300w, https://icode4.coffee/wp-content/uploads/oc_perf_triple_buffer-768x384.png 768w, https://icode4.coffee/wp-content/uploads/oc_perf_triple_buffer-1536x769.png 1536w, https://icode4.coffee/wp-content/uploads/oc_perf_triple_buffer-2048x1025.png 2048w" sizes="(max-width: 1920px) 100vw, 1920px"></a><figcaption>Performance graph for 300Mhz GPU OC at 720p (triple buffered)</figcaption></figure></div>



<p>With the GPU overclocked to 300 Mhz (up from 233.33 Mhz stock) there’s a solid 3 FPS increase in performance in the Zanzibar benchmark scene compared to stock GPU clock speed. This doesn’t seem very impressive but remember this is the “benchmark” test, it was chosen because it puts a massive load on the GPU. Outside of this area there’s a noticeable increase in FPS and running around Zanzibar the game stays at 30 FPS most of the time, dipping slightly in a few heavy areas. So how far can we push the GPU? More speed better performance, right? </p>



<p>Semiconductor fabrication is not a perfect process and every chip has imperfections in it. While every GPU that made it into an Xbox console has minimum functional and quality requirements it had to meet, the maximum capabilities of each chip varies greatly. A lot of the GPUs in the 1.0-1.4 revision consoles are on the weaker end and seem to cap out in the low 300 Mhz range, while the GPUs in the 1.6 revision consoles have been able to go upwards of 400 Mhz stable. That’s almost a 100% increase in clock speed which is very impressive, but this won’t really improve the FPS much more (or so I think). There’s another bottleneck here, and one that can’t easily be worked around.</p>



<h4>Another chip, another clock…</h4>



<p>I spent a large amount of time throughout this project wondering if part of the bottleneck issue was memory bandwidth. There’s a number of articles in the Xbox SDK docs that go into great detail about the hardware in the console, the rendering pipeline, and all the gotchas you can hit that will hurt your game’s performance. There’s a number of times that memory bandwidth is mentioned and it seems the engineers believed you could max the memory bus bandwidth fairly easily. The bus has a theoretical maximum throughput of 6.4GB/s but only about 70% of that is usable in practice, for a practical max throughput of ~4.5GB/s. I captured a number of PIX traces on the game and the estimated memory usage for a single frame was never higher than low 40MBs. No matter how I ran the numbers I just could not see the memory bus bandwidth being maxed out. In my most generous calculation I estimated max throughput of 4GB/s / 30 FPS = ~135MB/frame. Even if we assume the CPU is consuming something like 50MBs that still gives ~80MBs for GPU data. Yeah 1280×720 is a lot of pixels but this would mean each frame is accessing more data than there is RAM on the console, and it was just hard to believe. However, I know very little in this area and it was very well possible that one of these numbers was off (perhaps PIX?). The engineers certainly believed it was possible so I was most likely missing or misunderstanding something.</p>



<p>Doom suggested I try increasing the RAM clock speed and see if FPS increases, which would indicate that memory is the likely bottleneck. The only problem is the RAM is already clocked at the practical maximum frequency of 200Mhz so you can only increase the speed by about ~10Mhz before it becomes unstable and the console crashes. After running some calculations I wrote the following snippet of code to change the memory clock speed:</p>



<div id="urvanov-syntax-highlighter-662143868a31e597178597" data-settings=" minimize scroll-mouseover">
				<table>
					<tbody><tr>
				<td data-settings="show">
					<div><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p><p>7</p><p>8</p><p>9</p><p>10</p><p>11</p><p>12</p><p>13</p><p>14</p><p>15</p><p>16</p><p>17</p><p>18</p><p>19</p><p>20</p><p>21</p><p>22</p><p>23</p><p>24</p><p>25</p><p>26</p><p>27</p><p>28</p><p>29</p><p>30</p><p>31</p><p>32</p></div>
				</td>
						<td><div><p><span>void</span><span> </span><span>OverclockRAM</span><span>(</span><span>)</span></p><p><span>{</span></p><p><span>	</span><span>DWORD </span><span>MPLLCoeff</span><span> </span><span>=</span><span> </span><span>0</span><span>;</span></p><p><span>	</span><span>// Read CR_CPU_MPLL_COEFF</span></p><p><span>	</span><span>HalReadWritePCISpace</span><span>(</span><span>0</span><span>,</span><span> </span><span>0x60</span><span>,</span><span> </span><span>0x6C</span><span>,</span><span> </span><span>&amp;</span><span>MPLLCoeff</span><span>,</span><span> </span><span>sizeof</span><span>(</span><span>MPLLCoeff</span><span>)</span><span>,</span><span> </span><span>0</span><span>)</span><span>;</span></p><p><span>	</span><span>/*</span></p><p><span>		CR_CPU_MPLL_COEFF</span></p><p><span>			Bits 0-7: M</span></p><p><span>			Bits 8-15: N</span></p><p><span>			Bits 16-19: FSB_P</span></p><p><span>			Bits 20-23: MEM_P</span></p><p><span>		BASE_CLK = 16.6667 Mhz</span></p><p><span>		VCOFreq = (BASE_CLK / M) * FSB_P * 2 * N</span></p><p><span>		MEMCLK = VCOFreq / (2 * MEM_P)</span></p><p><span>	*/</span></p><p><span>	</span><span>// M/N values for 208 Mhz MEMCLK:</span></p><p><span>	</span><span>DWORD</span><span> </span><span>M</span><span> </span><span>=</span><span> </span><span>3</span><span>;</span></p><p><span>	</span><span>DWORD</span><span> </span><span>N</span><span> </span><span>=</span><span> </span><span>25</span><span>;</span></p><p><span>	</span><span>// Update PLL coefficients.</span></p><p><span>	</span><span>MPLLCoeff</span><span> </span><span>=</span><span> </span><span>(</span><span>MPLLCoeff</span><span> </span><span>&amp;</span><span> </span><span>~</span><span>0xFF</span><span>)</span><span> </span><span>|</span><span> </span><span>(</span><span>M</span><span> </span><span>&amp;</span><span> </span><span>0xFF</span><span>)</span><span>;</span></p><p><span>	</span><span>MPLLCoeff</span><span> </span><span>=</span><span> </span><span>(</span><span>MPLLCoeff</span><span> </span><span>&amp;</span><span> </span><span>~</span><span>0xFF00</span><span>)</span><span> </span><span>|</span><span> </span><span>(</span><span>(</span><span>N</span><span> </span><span>&amp;</span><span> </span><span>0xFF</span><span>)</span><span> </span><span>&lt;&lt;</span><span> </span><span>8</span><span>)</span><span>;</span></p><p><span>	</span><span>// Update PPL value.</span></p><p><span>	</span><span>HalReadWritePCISpace</span><span>(</span><span>0</span><span>,</span><span> </span><span>0x60</span><span>,</span><span> </span><span>0x6C</span><span>,</span><span> </span><span>&amp;</span><span>MPLLCoeff</span><span>,</span><span> </span><span>sizeof</span><span>(</span><span>MPLLCoeff</span><span>)</span><span>,</span><span> </span><span>1</span><span>)</span><span>;</span></p><p><span>}</span></p></div></td>
					</tr>
				</tbody></table>
			</div>



<p>The M and N values above are chosen such that the resulting memory clock speed will be ~208 Mhz. I could adjust them some more and get closer to 210 Mhz but this was good enough to test. With these changes in place I booted up Halo 2, loaded up the Zanzibar benchmark scene and watched the perf monitor. I ran this test a number of times with and without the memory overclocking and the result was a solid 0.7 FPS increase when the memory overclocking was active. These test results aren’t conclusive but they’re definitely compelling. </p>



<p>There’s different RAM chips that work on the Xbox console and have a maximum clock speed of 250 Mhz. I searched around online and placed an order for some, but at the time of writing this I haven’t gotten to installing them or running any further tests. Doom has already tried using these memory chips and said he had trouble getting them above ~230 Mhz while the GPU was overclocked, and that there’s likely another piece to the puzzle to get them running any higher. I wanted to “push the console to the limits” with this patch but I was now 3 months into development of it and needed a break. Ultimately, even if I could get these other RAM chips running close to 250 Mhz I’d more or less be the only person able to utilize it as they’re hard to come by, quite costly, and require removing any existing RAM chips from the console motherboard before installing. With the chips on order I decided to save this experiment for future me and continue on with finishing the patch.</p>



<h2>Reducing pop-in</h2>



<p>Halo 2 had some notoriously bad pop-in issues with textures and geometry and this issue has only been exacerbated on consoles that are still running the original mechanical HDDs from the early 2000s. But now that we have all this extra RAM this should be easy to solve. Earlier I talked about the game making a single large memory allocation of ~48.9MB that I referred to as the “runtime data region”. This memory region is divided up into smaller sections for various subsystems in the game such as network resources, geometry cache, texture cache, sound cache, level data, etc. </p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile.png" target="_blank" rel="noopener"><img loading="lazy" width="1697" height="1080" src="https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-1697x1080.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-1697x1080.png 1697w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-300x191.png 300w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-768x489.png 768w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-1536x977.png 1536w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-2048x1303.png 2048w, https://icode4.coffee/wp-content/uploads/h2_retail_memory_profile-110x70.png 110w" sizes="(max-width: 1697px) 100vw, 1697px"></a><figcaption>Halo 2 retail memory profile</figcaption></figure></div>



<p>The ones we’re interested in are the texture cache and geometry cache. The geometry cache is given 6.5MB of space for single player maps and 7MB for multiplayer maps. The texture cache size varies and is given all the remaining data after the “tag data” section and before the “low detail texture cache”. The larger the map the smaller the texture cache will be and the more pressure that’ll be put on it (especially for single player maps). These caches are “least recently used” data structures (or “lruv caches” as the game refers to them, not sure what the v is…), and work by evicting the least recently used data after a certain time period has elapsed. Every 30 frames (~1 second) the game will iterate through each cache and evict any data that hasn’t been used in the last 30 frames to free up space. If a request is made to load in data and there’s enough free space in the cache the data is loaded immediately (typically asynchronously, though it can block) and the request is satisfied once the read completes. If the cache is full there’s two code paths that can be taken:</p>



<ol><li>The caller can specify a parameter that indicates they want to force eviction on some other data. In this case the game will iterate through every entry in the cache and forcefully evict the least recently used items until there’s enough free space to satisfy the load request. If those items are currently being displayed on screen they’ll disappear in the next frame (and most likely submit new cache load requests). </li><li>The caller specifies they don’t want to force eviction and the load request fails. The object will not appear on screen this frame and the game will try to load it again next frame.</li></ol>



<p>Almost every call site for a load request falls down code path #2 with very few locations falling down code path #1. This is the first cause of pop-in, a request to load data is made and fails resulting in the object not being displayed on screen at the proper time. When the data is successfully loaded it will “pop” on screen and typically be far enough into the players field of view that they notice it. In the case of texture loads the map file can have up to 3 different texture buffers for low, medium, and high level of detail (LOD) versions of the same image. This is not to be confused with mip maps because each texture LOD will have its own set of mip maps. When a request is made to load in a texture the game will default to using the highest LOD possible, and if the load request fails it will try again using medium and low LOD buffers in hope that they require less memory and the load request may be possible to satisfy without waiting for memory to become available. If a load for a lower LOD version of the texture succeeds the game will attempt to load the highest LOD possible in the next few frames when more memory (hopefully) becomes available. When this happens the texture will be visible immediately at lower detail and then “pop” to higher detail when it becomes available. This is typically noticeable in cut-scenes which have the highest on-demand load requirements compared to normal game play.</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/pop_in_fbf.png" target="_blank" rel="noopener"><img loading="lazy" width="1439" height="480" src="https://icode4.coffee/wp-content/uploads/pop_in_fbf.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/pop_in_fbf.png 1439w, https://icode4.coffee/wp-content/uploads/pop_in_fbf-300x100.png 300w, https://icode4.coffee/wp-content/uploads/pop_in_fbf-768x256.png 768w" sizes="(max-width: 1439px) 100vw, 1439px"></a><figcaption>Master chief texture popping from low to high LOD</figcaption></figure></div>



<h4>Using cache eviction to find super bounces</h4>



<p>One additional note is that each map file also contains a “low detail texture cache” which contains an “emergency” version of almost every bitmap the map uses, in sizes from 2×2 pixels to at largest 8×8 pixels, which is always resident in memory while playing. This is used in cases where a model is present in memory but the load request for the texture(s) failed at all LODs. In this scenario there would normally be no textures to render the model with but the emergency low detail texture cache can be used temporarily to get the model on screen until the normal texture can be loaded into memory. Back in the Xbox Live days of Halo 2 there used to be a “glitch” where if you pulled up the Xbox Live friends menu and then closed it the level geometry would be rendered with extremely low detail textures. If you looked closely enough you could see “cracks” in the geometry (really, just where non-co-planar triangles were joined together) that you could try and use for super bounces. This technique was used to find suitable places for performing super bounces and I even remember finding a few myself using this method. It turns out this isn’t actually a “glitch” but the game using the emergency low detail texture cache because the normal textures for geometry were evicted and the geometry needs to be rendered this frame.</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/low_detail_textures.png" target="_blank" rel="noopener"><img loading="lazy" width="720" height="480" src="https://icode4.coffee/wp-content/uploads/low_detail_textures.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/low_detail_textures.png 720w, https://icode4.coffee/wp-content/uploads/low_detail_textures-300x200.png 300w" sizes="(max-width: 720px) 100vw, 720px"></a><figcaption>Foundation with low detail textures</figcaption></figure></div>



<h4>Visualizing cache usage</h4>



<p>When I first started adjusting the geometry and texture cache sizes I could definitely see pop-in was being reduced but I didn’t really have any good indication of when the caches were large enough and further tweaks were just redundant. After scraping through every Halo 2 build I had along with the Vista and MCC versions on PC, I was able to find enough info to recreate a debugging feature that Bungie had implemented in their debug builds of the game (this was such a pita). Using this graph visualization I could see exactly how much of the cache memory was being used at any given time which let me fine tune the sizes to what I felt was a pretty good result.</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/texture_cache_stock_chief.png" target="_blank" rel="noopener"><img loading="lazy" width="720" height="480" src="https://icode4.coffee/wp-content/uploads/texture_cache_stock_chief.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/texture_cache_stock_chief.png 720w, https://icode4.coffee/wp-content/uploads/texture_cache_stock_chief-300x200.png 300w" sizes="(max-width: 720px) 100vw, 720px"></a><figcaption>Halo 2 Outskirts stock texture cache</figcaption></figure></div>



<p>On the stock version of the game the campaign map Outskirts (old mombasa) has a texture cache size of ~19MB. I chose this map as my test map because the opening cinematic had pretty noticeable pop-in and with the original HDD in the console it could be comically bad at times. The image above shows the texture cache graph visualization. The graph is broken up into pairs of 2 lines. The first line indicates how the memory is being used: gray = free, red = in use high detail, purple = in use medium or lower detail (aka memory pressure), pink = stolen. The second line indicates when the memory was last used: green = in use this frame, blue = in use the last 30 frames. As a side note the game can steal memory from the texture cache for other purposes such as for rasterizer render targets that are only used in cinematic cutscenes, playing the intro/attraction/credits videos, etc. As we can see in the image above master chief is being rendered using the low detail texture cache because the normal texture cache is full and there’s no memory to satisfy the texture load request. Every single texture in the cache is either in use this frame or some time in the last 30 frames. So until enough textures age out and get evicted, master chief will be stuck in low detail.</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/texture_cache_stock_sniper.png" target="_blank" rel="noopener"><img loading="lazy" width="720" height="480" src="https://icode4.coffee/wp-content/uploads/texture_cache_stock_sniper.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/texture_cache_stock_sniper.png 720w, https://icode4.coffee/wp-content/uploads/texture_cache_stock_sniper-300x200.png 300w" sizes="(max-width: 720px) 100vw, 720px"></a><figcaption>Halo 2 Outskirts stock texture cache</figcaption></figure></div>



<p>This scene with the sniper team is one of the heavier scenes in the opening cutscene and would often result in model and texture pop-in. We can see from the texture cache graph that almost all of the memory is in use and there’s quite a few textures that are being loaded at medium or lower detail (in purple) due to the memory pressure. I also implemented an almost identical graph view for the geometry cache and using both of these I began to fine tune the cache sizes until the pop-in issues were more or less gone. </p>



<h4>Increasing the cache sizes</h4>



<p>The final result is the geometry cache being increased from 6.5/7MB to 20MB, and the texture cache increased to a static size of 30MB, nearly doubling both caches in size from the stock version of the game. At these sizes I felt the caches had adequate space and texture and model pop-in was more or less resolved. </p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/texture_cache_upgrade.png" target="_blank" rel="noopener"><img loading="lazy" width="1439" height="480" src="https://icode4.coffee/wp-content/uploads/texture_cache_upgrade.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/texture_cache_upgrade.png 1439w, https://icode4.coffee/wp-content/uploads/texture_cache_upgrade-300x100.png 300w, https://icode4.coffee/wp-content/uploads/texture_cache_upgrade-768x256.png 768w" sizes="(max-width: 1439px) 100vw, 1439px"></a><figcaption>Halo 2 Outskirts upgraded texture cache</figcaption></figure></div>



<p>As we can see the scene where master chief would appear with low detail textures now appears with high detail textures immediately (no more pop-in!) and there’s even plenty of free space in the texture cache. For the sniper scene we can see that in the previous frames all of the cache memory was being utilized, but not all at the same time as there’s plenty of chunks where the texture data has aged out of the cache. However, there were still a few cases where things would pop-in even though there was free space in the caches. To further fix this I ended up adding support to increase the HDD transfer speed from the stock UDMA 2 speed (~33.3MB/s) to UDMA 3 (~44.4MB/s) or UDMA 5 (~100MB/s) if your console had an 80 pin IDE cable. This provided a 10% increase in transfer speeds for consoles running the stock IDE cable and up to a 300% increase (theoretically, the actual transfer speeds depend greatly on the size of data being transferred) for consoles with an upgraded IDE cable. This not only helped with the remaining pop-in issues but greatly reduced loading times for the game as well. At this point I was pretty satisfied with the result.</p>



<h4>The final memory profile</h4>



<p>So after all these changes what does the final memory profile look like for Halo 2 in 720p on a console with 128MB of RAM?</p>



<div><figure><a href="https://icode4.coffee/wp-content/uploads/720p_memory_profile.png" target="_blank" rel="noopener"><img loading="lazy" width="1697" height="1080" src="https://icode4.coffee/wp-content/uploads/720p_memory_profile-1697x1080.png" alt="" srcset="https://icode4.coffee/wp-content/uploads/720p_memory_profile-1697x1080.png 1697w, https://icode4.coffee/wp-content/uploads/720p_memory_profile-300x191.png 300w, https://icode4.coffee/wp-content/uploads/720p_memory_profile-768x489.png 768w, https://icode4.coffee/wp-content/uploads/720p_memory_profile-1536x977.png 1536w, https://icode4.coffee/wp-content/uploads/720p_memory_profile-2048x1303.png 2048w, https://icode4.coffee/wp-content/uploads/720p_memory_profile-110x70.png 110w" sizes="(max-width: 1697px) 100vw, 1697px"></a><figcaption>Halo 2 720p memory profile</figcaption></figure></div>



<p>The geometry and texture caches are now huge, and more than 75% of the available 128MB of RAM has been utilized. For 1080p mode I actually had to dial the geometry and texture cache sizes back a bit as the memory used by the swap chain and rasterizer targets was so large there wasn’t enough memory remaining for the increased caches, and more or less all 128MB of RAM was in use.</p>



<h2>Conclusion</h2>



<p>I wanna thank everyone that took the time to read all the way through this blog post. This is the longest post I’ve written to date and I tried to keep it as short as possible and even cut a bunch of smaller, less interesting things out. I also wanna give a huge thanks to Doom for encouraging me to do this work, providing hardware for testing, and insight into some deep technical areas. This project was a ton of fun to work on and I learned a lot throughout the process. I always wanted to work at Bungie on a game like Halo but never got the chance to do so, and working on this project in some ways felt like I actually got to work on the game. There’s still room for improvement with a lot of the performance and memory changes I made. But overall I feel this HD patch has pushed Halo 2 and the Xbox console to their limits and I’m satisfied with the results without trying to go any further.</p>



<p>You can find the download and source code for the Halo 2 HD patch here: <a rel="noreferrer noopener" href="https://github.com/grimdoomer/Halo-2-HD" data-type="URL" data-id="https://github.com/grimdoomer/Halo-2-HD" target="_blank">GitHub</a></p>



<p>I also made a video showing side-by-side comparisons of the stock game vs the HD patch, and performance metrics for each video resolution:</p>



<figure><p>
<iframe loading="lazy" title="Halo 2 in HD on the Original Xbox" width="470" height="264" src="https://www.youtube.com/embed/O_nk21389u8?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p><figcaption>YouTube video showing a comparison between stock game and HD patch</figcaption></figure>
									
																		
								</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The invisible seafaring industry that keeps the internet afloat (156 pts)]]></title>
            <link>https://www.theverge.com/c/24070570/internet-cables-undersea-deep-repair-ships</link>
            <guid>40075402</guid>
            <pubDate>Thu, 18 Apr 2024 12:16:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theverge.com/c/24070570/internet-cables-undersea-deep-repair-ships">https://www.theverge.com/c/24070570/internet-cables-undersea-deep-repair-ships</a>, See on <a href="https://news.ycombinator.com/item?id=40075402">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

	
	
	

	
			<p><span>O</span><span>n</span><span>On</span>  the afternoon of March 11th, 2011, Mitsuyoshi Hirai, the chief engineer of the cable maintenance ship Ocean Link,<em> </em>was sitting in his cabin 20 miles off Japan’s eastern coast, completing the paperwork that comes at the end of every repair. Two weeks earlier, something — you rarely knew what — damaged the 13,000-mile fiber optic cable connecting Kitaibaraki, Japan, and Point Arena, California. Alarms went off; calls were made; and the next day, Hirai was sailing out of the port in Yokohama to fix it.</p>
	
					


	
			<div>
								<p>The repair was now nearly done. All that remained was to rebury the cable on the seafloor, which they were doing using a bulldozer-sized remotely operated submersible named Marcas — and, of course, the paperwork.&nbsp;</p>


								<p>Suddenly, the ship began to shudder. Hirai got to his feet, found he could barely stand, and staggered out of his cabin, grasping the handrail as he pulled himself up the narrow stairway to the bridge. “Engine trouble?” Hirai asked the captain, who’d already checked and replied that everything seemed normal. The ship continued to tremble. Looking out from the bridge, the sea appeared to be boiling.</p>


			</div>
	
					<div>
				<video muted="" loop="" autoplay="" playsinline="" data-sourcedesktop="https://s3.amazonaws.com/assets.sbnation.com/csk/uploads/verge-features/underwater-cables/236543_Deep_sea_cable_repair_GTakayama_0199_shrunk_1.mp4" data-sourcetablet="https://s3.amazonaws.com/assets.sbnation.com/csk/uploads/verge-features/underwater-cables/236543_Deep_sea_cable_repair_GTakayama_0199_shrunk_1.mp4" data-sourcemobile="https://s3.amazonaws.com/assets.sbnation.com/csk/uploads/verge-features/underwater-cables/236543_Deep_sea_cable_repair_GTakayama_0199_shrunk_1.mp4" type="video/mp4">
				</video>
				
				
				
					<p>
						A sketch of the Ocean Link in port in Yokohama transitions into a video of the ship. A bird flies overhead and waves lap at its hull.
					</p>
			</div>



	
			<div>
								<p>They turned on the television. An emergency alert showed that an earthquake had struck 130 miles northeast of their location. The shaking finally stopped, and in the silence, Hirai’s mind leapt to what would come next: a tsunami.</p>


								<p>Hirai feared these waves more than most people. He had grown up hearing the story of how one afternoon in 1923, his aunt felt the ground shake, swept up her two-year-old brother, and sprinted uphill to the cemetery, narrowly escaping floods and fires that killed over 100,000 people. That child became Hirai’s father, so he owed his existence to his aunt’s quick thinking. Now, he found himself in the same position. He knew tsunamis become dangerous when all the water displaced by the quake reaches shallow water and slows and grows taller. The Ocean Link, floating in less than 500 feet of water, was too shallow for comfort. </p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/01_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/01_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/01_mobile_min.jpg" alt="A photo of Mitsuyoshi Hirai, the former chief engineer of the Ocean Link. He sits at a table, his hands folded on a chart." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/01_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p>In the family tree of professions, submarine cable work occupies a lonely branch somewhere between heavy construction and neurosurgery. It’s precision engineering on a shifting sea using heavy metal hooks and high-tension lines that, if they snap, can cut a person in half. In Hirai’s three decades with Kokusai Cable Ship Company (KCS), he had learned that every step must be followed, no matter how chaotic the situation. Above all else, he often said, “you must always be cool.”&nbsp;</p>


								<p>Across Ocean Link’s 400-foot deck, the ship’s 50 crew members were emerging from their cabins and workstations, trying to figure out what had just occurred. Over the intercom, the captain announced that there had been an earthquake, a tsunami was coming, and the crew should ready the ship to evacuate to deeper water. The crew fanned out to check fuel tanks and lash down machinery. Inside a darkened, monitor-filled shipping container on the starboard deck, the submersible’s pilot steered Marcas back toward the ship as fast as the bulky robot’s propellers could carry it. Minutes later, the submersible was hoisted aboard and the Ocean Link was underway. </p>


			</div>
	

						<div>
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/02_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/02_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/02_mobile_min.jpg" alt="The controls on the bridge of the Ocean Link. A video screen shows a complicated output; there are many gauges and buttons." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/02_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/03_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/03_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/03_mobile_min.jpg" alt="Rows of binoculars sit next to a window as the Ocean Link looks out over the port." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/03_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/04_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/04_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/04_mobile_min.jpg" alt="A bright orange lifeboat on the deck of the Ocean Link." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/04_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/05_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/05_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/05_mobile_min.jpg" alt="Two large wheels guide a cable attached to the Marcas submersible (not pictured)." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/05_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
								</div>
	
			<div>
								<p>The tsunami passed under them imperceptibly on their way out to sea, and when they came to a stop three hours later, the television was showing the first images of destruction. Members of the crew who weren’t working gathered on the bridge to watch the news, which continued to display a tsunami warning, a map of Japan with its eastern seaboard glowing red. They took turns trying to reach loved ones using the ship’s satellite phone, but no calls went through.&nbsp;</p>


								<p>As night fell, periodic aftershocks thumped against the hull. Hirai thought about his wife, who was working at a department store in Yokohama near the Ocean Link’s port; his son, a junior in high school at the time; and his parents, whom the family lived with in his hometown of Yokosuka — none of whom he’d been able to reach. Everyone had someone they were worried about.</p>


								<p>But Hirai also began to think about the work he knew lay ahead. The Ocean Link was one of a small number of ships that maintain the subsea cables that carry 99 percent of the world’s data. Positioned in strategic locations around the planet, these ships stand ready to sail out and fix faults the moment they are detected, and most of the time, they are more than equal to the task. But earthquakes, Hirai knew from experience, were different. They didn’t just break one cable — they broke many, and badly. If what he feared had happened, Japan risked being cut off from the world in its moment of need.</p>


								<p>Sure enough, that night, a call came from headquarters confirming the Ocean Link was safe and directing them to remain at sea until further notice, followed by messages announcing cable failure after cable failure, including the one they had just finished repairing. </p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/06_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/06_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/06_mobile_min.jpg" alt="Fumihide Kobayashi standing in front of the submersible Marcas." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/06_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p>Cable industry professionals tend to be pragmatic people, preoccupied with the material realities of working planet-scale construction. But in conversations about landing high-bandwidth cables in digitally neglected regions or putting millions of people back in contact with every fiber strand melted together, they often hint at a sense of larger purpose, an awareness that they are performing a function vital to a world that, if they do their jobs well, will continue to be unaware of their service.</p>


								<p>For the Ocean Link crew, this awareness was bound up in a still unfolding national tragedy. They knew that whenever they returned to land, they would have to care for their loved ones quickly, because they would soon be going back out to sea. For how long, no one knew. </p>


							

			</div>
	
			<div>
								<p><span>T</span><span>he</span><span>The</span>  world’s emails, TikToks, classified memos, bank transfers, satellite surveillance, and FaceTime calls travel on cables that are about as thin as a garden hose. There are about 800,000 miles of these skinny tubes crisscrossing the Earth’s oceans, representing nearly 600 different systems, according to the industry tracking organization TeleGeography. The cables are buried near shore, but for the vast majority of their length, they just sit amid the gray ooze and alien creatures of the ocean floor, the hair-thin strands of glass at their center glowing with lasers encoding the world’s data.&nbsp;</p>


								<p>If, hypothetically, all these cables were to simultaneously break, modern civilization would cease to function. The financial system would immediately freeze. Currency trading would stop; stock exchanges would close. Banks and governments would be unable to move funds between countries because the Swift and US interbank systems both rely on submarine cables to settle over $10 trillion in transactions each day. In large swaths of the world, people would discover their credit cards no longer worked and ATMs would dispense no cash. As US Federal Reserve staff director Steve Malphrus said at a 2009 cable security conference, “When communications networks go down, the financial services sector does not grind to a halt. It snaps to a halt.”</p>


			</div>
	
			
<div>
	<p>A map of the world showing the dozens of fibre optic cable systems which stretch across the oceans, connecting continents and island chains. Some of these cables are extremely long. The map animates to show the cables laid down between 1989 and the present, with planned cables up to 2027 also displayed.</p>
	
	
	
</div>
	
			<div>
								<p>Corporations would lose the ability to coordinate overseas manufacturing and logistics. Seemingly local institutions would be paralyzed as outsourced accounting, personnel, and customer service departments went dark. Governments, which rely on the same cables as everyone else for the vast majority of their communications, would be largely cut off from their overseas outposts and each other. Satellites would not be able to pick up even half a percent of the traffic. Contemplating the prospect of a mass cable cut to the UK, then-MP Rishi Sunak concluded, “Short of nuclear or biological warfare, it is difficult to think of a threat that could be more justifiably described as existential.”</p>


								<p>Fortunately, there is enough redundancy in the world’s cables to make it nearly impossible for a well-connected country to be cut off, but cable breaks do happen. On average, they happen every other day, about 200 times a year. The reason websites continue to load, bank transfers go through, and civilization persists is because of the thousand or so people living aboard 20-some ships stationed around the world, who race to fix each cable as soon as it breaks.</p>


			</div>
	

						<div>
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/07_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/07_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/07_mobile_min.jpg" alt="Bright yellow grapnel flukes of varying lengths on the deck of the Ocean Link." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/07_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/08_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/08_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/08_mobile_min.jpg" alt="A zoomed out view of the grapnels, situating them relative to the ship." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/08_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/09_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/09_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/09_mobile_min.jpg" alt="Mushroom anchors aboard the Ocean Link. The lack of flukes helps to avoid entangling cables." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/09_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/10_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/10_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/10_mobile_min.jpg" alt="The two wide channels of the Ocean Link’s bow sheave help guide cables and grapnels as they pass over into the sea. " src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/10_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/11_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/11_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/11_mobile_min.jpg" alt="A view of the Ocean Link’s bridge from the foredeck." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/11_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
								</div>
	
			<div>
								<p>The industry responsible for this crucial work traces its origins back far beyond the internet, past even the telephone, to the early days of telegraphy. It’s invisible, underappreciated, analog. Few people set out to join the profession, mostly because few people know it exists.&nbsp;</p>


								<p>Hirai’s career path is characteristic in its circuitousness. Growing up in the 1960s in the industrial city of Yokosuka, just down the Miura Peninsula from the Ocean Link’s port in Yokohama, he worked at his parents’ fish market from the age of 12. A teenage love of American rock ‘n’ roll led to a desire to learn English, which led him to take a job at 18 as a switchboard operator at the telecom company KDDI as a means to practice. When he was 26, he transferred to a cable landing station in Okinawa because working on the beach would let him perfect his windsurfing. This was his introduction to cable maintenance and also where he met his wife. Six years later, his English proficiency got him called back to KDDI headquarters to help design Ocean Link for KCS, a KDDI subsidiary. Once it was built, he decided to go to sea with it, eventually becoming the ship’s chief engineer.</p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/12_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/12_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/12_mobile_min.jpg" alt="Captain Shoichi Suzuki sits in front of the control panels in the bridge of the Ocean Link." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/12_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p>Others come to the field from merchant navies, marine construction, cable engineering, geology, optics, or other tangentially related disciplines. When Fumihide Kobayashi, the submersible operator — a tall and solidly built man from the mountain region of Nagano — joined KCS at the age of 20, he thought he would be working on ship maintenance, not working aboard a maintenance ship. He had never been on a boat before, but Hirai enticed him to stay with stories of all the whales and other marine creatures he would see on the remote ocean.</p>


								<p>Once people are in, they tend to stay. For some, it’s the adventure — repairing cables in the churning currents of the Congo Canyon, enduring hull-denting North Atlantic storms. Others find a sense of purpose in maintaining the infrastructure on which society depends, even if most people’s response when they hear about their job is, <em>But isn’t the internet all satellites by now?</em> The sheer scale of the work can be thrilling, too. People will sometimes note that these are the largest construction projects humanity has ever built or sum up a decades-long resume by saying they’ve laid enough cable to circle the planet six times.</p>


								<p>KCS has around 80 employees, many of whom, like Hirai, have worked there for decades. Because the industry is small and careers long, it can seem like everyone knows one another. People often refer to it as a family. Shipboard life lends itself to a strong sense of camaraderie, with periods of collaboration under pressure followed by long stretches — en route to a worksite or waiting for storms to pass — without much to do but hang out. Kobayashi learned to fish off the side of the ship and attempted to improve the repetitive cuisine by serving his crewmates sashimi. (His favorite is squid, but his colleagues would prefer he use the squid to catch mackerel.) Hirai, an enthusiastic athlete, figured out how to string up a net on the Ocean Link’s<em> </em>helideck and play tennis. Other times, he would join the crew for karaoke in the lounge, a wood-paneled room behind an anomalous stained-glass door containing massage chairs, a DVD library, and a bar. A self-described “walking jukebox,” Hirai favored Simon &amp; Garfunkel and Billy Joel, though he said the younger members of the fleet didn’t go in for it as much.</p>


			</div>
	

						<div>
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/13_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/13_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/13_mobile_min.jpg" alt="The Ocean Link’s galley features enough tables and chairs for 20 or more people." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/13_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/14_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/14_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/14_mobile_min.jpg" alt="Pale green curtains frame an on-ship shrine with decorated figures and a plant." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/14_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/15_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/15_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/15_mobile_min.jpg" alt="The lounge aboard the Ocean Link, including a large recliner, a bar, and a dartboard." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/15_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/16_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/16_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/16_mobile_min.jpg" alt="Dozens of condiments on one of the tables in the Ocean Link’s galley." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/16_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
								</div>
	
			<div>
								<p>The world is in the midst of a cable boom, with multiple new transoceanic lines announced every year. But there is growing concern that the industry responsible for maintaining these cables is running perilously lean. There are 77 cable ships in the world, according to data supplied by SubTel Forum, but most are focused on the more profitable work of laying new systems. Only 22 are designated for repair, and it’s an aging and eclectic fleet. Often, maintenance is their second act. Some, like Alcatel’s Ile de Molene, are converted tugs. Others, like Global Marine’s Wave Sentinel, were once ferries. Global Marine <a href="https://www.datacenterdynamics.com/en/analysis/the-cable-ship-capacity-crunch/">recently told Data Centre Dynamics</a> that it’s trying to extend the life of its ships to 40 years, citing a lack of money. One out of 4 repair ships have already passed that milestone. The design life for bulk carriers and oil tankers, by contrast, is 20 years.&nbsp;</p>


								<p>“We’re all happy to spend billions to build new cables, but we’re not really thinking about how we’re going to look after them,” said Mike Constable, the former CEO of Huawei Marine Networks, who gave a presentation on the state of the maintenance fleet at an industry event in Singapore last year. “If you talk to the ship operators, they say it’s not sustainable anymore.”</p>


								<p>He pointed to a case last year when four of Vietnam’s five subsea cables <a href="https://vietnaminsider.vn/vietnams-internet-connection-disrupted-as-four-of-five-undersea-cables-broken/">went down</a>, slowing the internet to a crawl. The cables hadn’t fallen victim to some catastrophic event. It was just the usual entropy of fishing, shipping, and technical failure. But with nearby ships already busy on other repairs, the cables didn’t get fixed for six months. (One promptly <a href="https://e.vnexpress.net/news/news/vietnam-s-undersea-cable-malfunctions-right-after-getting-fixed-4623749.html">broke again</a>.)&nbsp;</p>


								<p>But perhaps a greater threat to the industry’s long-term survival is that the people, like the ships, are getting old. In a profession learned almost entirely on the job, people take longer to train than ships to build. </p>


			</div>
	
			<div>
			<p><span>Key components of the KDDI Ocean Link</span></p><p><span>Drum engine</span>
			      	<span>A powerful but delicate 12-foot diameter electro-hydraulic steel drum used for paying out and recovering cables and grapnels during repairs.</span>
				</p>
				<p><span>Linear cable engine</span>
			      	<span>A conveyor comprised of 21 pairs of cable-gripping tires used for laying and retrieving cables.</span>
				</p>
				<p><span>Cable control room</span>
			      	<span>A command center adjoining the bridge where cable tension is monitored and all cable operations are managed.</span>
				</p>
				<p><span>Cable tanks</span>
			      	<span>Three tanks capable of holding a total of 2,800 miles of cable.</span>
				</p>
				<p><span>Bow Sheave</span>
			      	<span>A rolling sheave that cables and grapnel ropes are passed over.</span>
				</p>
				<p><span>Thrusters</span>
			      	<span>Bow and stern thrusters are used to maneuver into wind, waves, and currents to keep the ship stationary during repairs.</span>
				</p>
				<p><span>MARCAS ROV</span>
			      	<span>Remote submersible capable of operating at up to 8,000ft. Equipped with cameras, sensors, a robotic arm, and a powerful water jet for burying cables.</span>
				</p>
		</div>
	
			<div>
								<p>“One of the biggest problems we have in this industry is attracting new people to it,” said Constable. He recalled another panel he was on in Singapore meant to introduce university students to the industry. “The audience was probably about 10 university kids and 60 old gray people from the industry just filling out their day,” he said. When he speaks with students looking to get into tech, he tries to convince them that subsea cables are also part — a foundational part — of the tech industry. “They all want to be data scientists and that sort of stuff,” he said. “But for me, I find this industry fascinating. You’re dealing with the most hostile environment on the planet, eight kilometers deep in the oceans, working with some pretty high technology, traveling all over the world. You’re on the forefront of geopolitics, and it’s critical for the whole way the world operates now.”</p>


								<p>The lifestyle can be an obstacle. A career in subsea means enduring long stretches far from home, unpredictable schedules, and ironically, very poor internet.</p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/17_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/17_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/17_mobile_min.jpg" alt="Kaida Takashi stands on the foredeck of the Ocean Link." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/17_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p>“Everyone complains about that,” said Kaida Takashi, a senior advisor at KCS, who is trying to get the Ocean Link<em> </em>set up with Starlink. It’s a generational difference, he said. For someone like him, a 62-year-old ham radio enthusiast, Wi-Fi barely fast enough to email is a luxury. Other industry veterans reminisced about the days when they felt fortunate to get faxes on board, or waiting for the mailbag in port, or the novelty of using the very cable they were laying to make calls from the middle of the ocean. But for people who grew up with an expectation of constant connectivity, the disconnection of shipboard life can cause visible discomfort. “It’s a part of them,” one industry veteran marveled of his younger colleagues. “They can’t let it go.”&nbsp;</p>


								<p>The industry’s biggest recruiting challenge, however, is the industry’s invisibility. It’s a truism that people don’t think about infrastructure until it breaks, but they tend not to think about the fixing of it, either. In his 2014 essay, “Rethinking Repair,” professor of information science Steven Jackson argued that contemporary thinking about technology romanticizes moments of invention over the ongoing work of maintenance, though it is equally important to the deployment of functional technology in the world. There are few better examples than the subsea cable industry, which, for over a century, has been so effective at quickly fixing faults that the public has rarely had a chance to notice. Or as one industry veteran put it, “We are one of the best-kept secrets in the world, because things just work.”&nbsp;  </p>


							

			</div>
	
			<div>
								<p><span>T</span><span>he</span><span>The</span>  Ocean Link spent two nights at sea before receiving orders to return. As they neared land, Hirai saw debris from the tsunami’s backwash floating in the water: fishing nets, tires, the roofs of buildings, the bloated body of what he guessed was a cow.&nbsp;</p>


								<p>The earthquake measured 9.1 on the Richter scale, the fourth largest ever recorded and the largest to ever hit Japan. But it was the series of tsunami waves that arrived half an hour later that dealt the most destruction, surging miles inland and sweeping buildings, cars, and thousands of people out to sea. The death toll would eventually climb to nearly 20,000, and the day would become a national tragedy referred to simply as “3/11.”</p>


								<p>The full extent of the devastation was still becoming clear when the Ocean Link returned, but the disaster had already entered a new phase. One hundred and sixty miles north of Tokyo, a 50-foot tsunami wave overtopped a seawall protecting the Fukushima power plant, swamping the emergency generators that were cooling the reactors through its automatic post-quake shutdown and precipitating a nuclear meltdown.&nbsp;</p>


								<p>Hirai’s wife and son had made it back home to their house in Yokosuka, where they lived with Hirai’s parents. Kobayashi’s family, too, was safe. Some crew lost loved ones; others sent family to stay with relatives in the south out of fear of radiation. They all knew that they had only a few days before they would be sent back out to sea.</p>


			</div>
	
					<div>
				
				
				
					<p>
						The Ocean Link in a storm in the North Pacific. The ship pitches wildly in the heavy swell, the waves crashing over its bow.&nbsp;
					</p>
			</div>


	
			<div>
								<p>The disaster had severed phone lines and wrecked cell towers, causing phone service to cut out almost immediately after the earthquake struck. Instead, people turned to email, Skype, and other online services that were mostly able to route around damage to the network. There was a sense, according to one engineer’s postmortem <a href="https://www.ausnog.net/sites/default/files/ausnog-05/presentations/ausnog-05-d01p03-tomoya-yoshida-ntt.pdf">presentation</a>, that the internet was the only media that survived.</p>


								<p>But its survival was more tenuous than the public knew. While the cables connecting Japan to the rest of the world survived the initial destruction, later that night, as millions of people tried to find their way home with trains stopped and power intermittent, engineers in Tokyo network operation centers watched as one cable after another failed. By the next morning, seven of Japan’s 12 transpacific cables were severed. Engineers working through the night and following days managed to shift traffic to those that remained, but the new routes were near their maximum capacity. The head of telecom company NTT’s operation center at the time estimated that if another cable failed, it would have lost all traffic to the US. With servers for most major internet companies located there, Japan would have effectively lost the internet.&nbsp;</p>


								<p>Normally, the sequence of repairs would be determined by whichever cable owner reported the fault first, but given the extraordinary circumstances, the usually self-interested cable owners agreed to defer to KCS. The priority was to repair a cable — any cable — as fast as possible.&nbsp;</p>


								<p>It was impossible to know the state of the cables on the ocean floor, so like forensic investigators, Hirai and the other engineers had to work with the sparse facts available. By having the cable landing stations on either side of the ocean beam light down their end of the line and time the reflections back, they were able to locate the faults nearest to them within a few meters. Most of the faults lay in deep water, in the canyons channeling into the Japan Trench. This, plus the timing of the faults, indicated it wasn’t the quake that broke them but the underwater avalanches it triggered. </p>


			</div>
	
			<section>
	
	
	<p>“It hasn’t changed in 150 years... The Victorians did it that way and we’re doing it the same way.”</p>
</section>
	
			<div>
								<p>Submarine landslides are awesome events whose existence was only discovered in the 1950s, when scientists analyzed the timing of 12 cable faults that severed communication between Europe and North America two decades earlier. Before then, according to oceanographer Mike Clare, “It was assumed that deep water was boring and nothing happens down there.” In fact, the ocean floor is riven with mountains and canyons that experience avalanches that dwarf anything found on land, cascades of sediment and debris racing for hundreds of miles. Hirai had dealt with them in Taiwan in 2006, one of the most notorious events in the annals of cable repair.&nbsp;</p>


								<p>On December 26th, an earthquake dislodged sediment on Taiwan’s southern coast and sent it rushing 160 miles into the Luzon Strait, one of several global cable chokepoints. Nine cables were severed and Taiwan was knocked almost entirely offline. Banking, airlines, and communications were disrupted throughout the region. Trading of the Korean won was halted. The cables, buried under mountains of debris, were nearly impossible to find. It took 11 ships, including the Ocean Link, nearly two months to finish repairs.</p>


								<p>Often in a multi-cable disaster like the Taiwan earthquake, every ship in the region comes to assist. But with Japan, there was an unprecedented complication: the majority of the faults were located offshore of the ongoing nuclear meltdown at Fukushima. Ship operators deemed assistance too risky, which meant that, for the time being, the Ocean Link was on its own.&nbsp;</p>


						
								<p>The crew felt not only duty bound to work but uniquely capable of doing so. They had dealt with radiation before, though not at this scale. In 1993, shortly before the Ocean Link was to lay a cable linking Japan, Korea, and Russia, they learned the Soviets had dumped radioactive waste in the ocean along the planned route. With some trepidation, KCS proceeded with the job. They bought Geiger counters and protective gear, flew in nurses from the US with chemical weapons training, and scanned the water for radiation as they went. When none was detected, they put the gear in storage.&nbsp;</p>


								<p>Now, as they readied the ship for departure, an employee was dispatched to the depot to find the old radiation gear. A local university donated a few more sensors and trained the crew on how to use them.&nbsp;</p>


								<p>They decided to begin with the same cable they had just finished repairing when the earthquake struck. On a drizzling afternoon eight days after returning to port, with smoke still rising from the Fukushima power plant, the Ocean Link set back out to sea. </p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/18_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/18_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/18_mobile_min.jpg" alt="Cables are wrapped around a large metal structure in the KCS depot." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/18_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p><span>T</span><span>o</span><span>To</span>  the extent he is remembered, Cyrus Field is known to history as the person responsible for running a telegraph cable across the Atlantic Ocean, but he also conducted what at the time was considered an equally great technical feat: the first deep-sea cable repair.&nbsp;</p>


								<p>Field, a 35-year-old self-made paper tycoon, had no experience in telegraphy — which helps explain why, in 1854, he embarked on such a quixotic mission. Though small bodies of water like the English Channel had been bridged by telegraph, failure was routine and costly. Cables shorted out, snapped under tension, snagged on rocks, were sliced by anchors, twisted by currents, tangled around whales, attacked by swordfish, and devoured by a <a href="https://atlantic-cable.com/Article/Clifford/teredo.htm">“miserable little mollusc”</a> called the Teredo worm with an appetite for jute insulation.&nbsp;</p>


								<p>Field fared no better. Twelve years after he began, he had endured severed cables, near sinkings, and had one “success”: a cable laid in 1858 that prompted celebrations so enthusiastic that revelers set fire to New York City Hall. The cable failed weeks later.</p>


			</div>
	

						<div>
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/19_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/19_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/19_mobile_min.jpg" alt="A woodcut illustration of the SS Great Eastern as it attempts to recover the broken transatlantic telegraph cable in 1865. Men line the decks to watch the operation." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/19_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/20_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/20_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/20_mobile_min.jpg" alt="A woodcut illustration of sailors aboard the SS Great Eastern in 1865. Eighteen figures work to coil a cable around a large capstan." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/20_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/21_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/21_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/21_mobile_min.jpg" alt="A photograph of a display showing cables of various thickness as well as a model of a grapnel." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/21_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/22_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/22_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/22_mobile_min.jpg" alt="An illustration of Cyrus West Field sitting in an armchair reading a book." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/22_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
								</div>
	
			<div>
								<p>Field tried again seven years later only for the cable to snap halfway across the Atlantic. The next year, he set out yet again, promising not only to finally lay a working transatlantic cable but to recover the broken cable and finish that one, too.&nbsp;</p>


								<p>By that time, a crude method had been developed for fixing cables in shallow water. A ship would drag a hooked grapnel anchor across the seafloor, until, like the tremor of a fishing line, increasing tension showed they’d caught the cable, which they would then haul on board to fix. Field’s plan was basically this but bigger: bigger hooks, stronger rope, more powerful winding engine, all aboard the largest ship afloat, a passenger liner called the SS Great Eastern that had been retrofitted for the mission. William Thomson, the project’s scientific adviser and the future Lord Kelvin, did the math and deemed it feasible.&nbsp;</p>


								<p>“When it was first proposed to drag the bottom of the Atlantic for a cable lost in waters two and a half miles deep, the project was so daring that it seemed to be almost a war of the Titans upon the gods,” wrote Cyrus’ brother Henry. “Yet never was anything undertaken less in the spirit of reckless desperation. The cable was recovered as a city is taken by siege — by slow approaches, and the sure and inevitable result of mathematical calculation.”</p>


			</div>
	
			<section>
	
	
	<p>Humans continue to be by far the single greatest threat to cables</p>
</section>
	
			<div>
								<p>Field’s crew caught the cable on the first try and nearly had it aboard when the rope snapped and slipped back into the sea. After 28 more failed attempts, they caught it again. When they brought it aboard and found it still worked, the crew fired rockets in celebration. Field withdrew to his cabin, locked the door, and wept.</p>


								<p>Cable repair today works more or less the same as in Field’s day. There have been some refinements: ships now hold steady using automated dynamic positioning systems rather than churning paddle wheels in opposite directions, and Field’s pronged anchor has spawned a medieval-looking arsenal of grapnels — long chains called “rennies,” diamond-shaped “flat fish,” spring-loaded six-blade “son of sammys,” three-ton detrenchers with seven-foot blades for digging through marine muck — but at its core, cable repair is still a matter of a ship dragging a big hook along the ocean floor. Newfangled technologies like remotely operated submersibles can be useful in shallow water, but beyond 8,000 feet or so, conditions are so punishing that simple is best.</p>


			</div>
	
			<section>
	
	<span>A schematic view of the ocean depths, with the Ocean Link at the surface. A cable leads down from the ship into the depths. We pass through the Euphotic (Sunlight) zone where familiar animals live, before hitting the twilight zone 656 ft below sea level. The fauna gets more exotic and the light dimmer until we reach the Bathypelagic (Midnight) zone, at 3,280 ft. Here we see giant squid and anglerfish. Travelling further, the Abyssopelagic (abyssal) zone starts at 13,123 ft, and features a couple of weird fish and cephalopods. Finally, the cable terminates in a grapnel in the Hadopelagic (hadal) zone at 19,685 ft. It has hooked its target.</span>
	<p>The deepest repair the Ocean Link conducted in the aftermath of the 2011 earthquake was 6,200 meters (20,340 feet).</p>
</section>
	
			<div>
								<p>“It hasn’t changed in 150 years,” said Alasdair Wilkie, chair of the Atlantic Cable Maintenance &amp; Repair Agreement (ACMA). “The Victorians did it that way and we’re doing it the same way. I just think it’s one of those things that, if it ain’t broke, don’t fix it.”</p>


								<p>Nor have the causes of faults changed in the last century and a half. The first submarine cable, strung across the English Channel in 1850, survived for a single day before — in what may be apocryphal cable industry <a href="https://atlantic-cable.com/stamps/Cableships/indexstc.htm">slander</a> — a French eel fisherman accidentally hooked it, sliced off a piece, and came ashore bragging about his discovery of a new type of metal seaweed. In his history of global telecommunications, <em>How the World Was One</em>, Arthur C. Clarke declared this the first blow in a war between cable companies and other users of the sea that has continued to this day. </p>


			</div>
	
					<div>
				<video muted="" loop="" autoplay="" playsinline="" data-sourcedesktop="https://s3.amazonaws.com/assets.sbnation.com/csk/uploads/verge-features/underwater-cables/236543_Deep_sea_cable_repair_GTakayama_0199_shrunk.mp4" data-sourcetablet="https://s3.amazonaws.com/assets.sbnation.com/csk/uploads/verge-features/underwater-cables/236543_Deep_sea_cable_repair_GTakayama_0199_shrunk.mp4" data-sourcemobile="https://s3.amazonaws.com/assets.sbnation.com/csk/uploads/verge-features/underwater-cables/236543_Deep_sea_cable_repair_GTakayama_0199_shrunk.mp4" type="video/mp4">
				</video>
				
				
				
					<p>
						A sketch of the Ocean Link from the foredeck transitions into a video of the ship in port.
					</p>
			</div>



	
			<p>Humans continue to be by far the single greatest threat to cables. Fishing accounts for about 40 percent of faults, according to the International Cable Protection Committee (ICPC). Bottom trawling, particularly as it extends into new regions and deeper water in pursuit of depleting fish stocks, is especially damaging. Last year, <a href="https://apnews.com/article/matsu-taiwan-internet-cables-cut-china-65f10f5f73a346fa788436366d7a7c70#:~:text=The%20National%20Communications%20Commission%2C%20citing,cut%20the%20second%2C%20NCC%20said.">Chinese fishing vessels</a> severed cables to one of Taiwan’s outlying islands, triggering an international incident. (Severing Taiwan’s cables is one of the first moves in war games of a Chinese siege.) The year before, trawlers cut multiple cables <a href="https://www.bloomberg.com/news/articles/2023-04-24/fishing-boats-keep-running-over-ocean-internet-cables">off the coast of Scotland</a>, knocking several islands offline. Dragged anchors from cruise ships, cargo vessels, and pleasure boats are another common culprit. Last year, an improperly moored mega yacht knocked out <a href="https://nationwideradiojm.com/mega-yacht-causes-islandwide-communications-meltdown-in-anguilla/">all communication for the Caribbean island of Anguilla</a>.</p>
	

						
	
			<div>
								<p>One thing that is not a threat to cables, many in the industry are eager to emphasize, is sharks. The idea that sharks eat submarine cables — repeated in news stories and even some government reports — stems from an incident in the late 1980s when AT&amp;T was testing one of the first subsea fiber optic cables off the coast of the Canary Islands. The cable kept suffering mysterious faults, and when a repair ship hauled it up, teeth were found embedded near the breaks. A study was launched. Bell Labs scientists measured jaw radii and bite strength and, at one point, tried to feed captured sharks samples of cable. The culprit turned out to be a deepwater crocodile shark, possibly attracted to the electromagnetic field emitted from the power repeaters.&nbsp;</p>


								<p>Wrapping cables in metal tape seems to have solved any shark problems. Nevertheless, when an old YouTube video of a shark biting a cable went viral in 2014, it incited global news coverage. The ICPC issued a statement (“Sharks are not the nemesis of the internet — ICPC findings”) saying that it didn’t even look like a data cable, fish bites haven’t caused a fault in many years, and that humans are almost always to blame. Yet the myth endures, possibly because there is something satisfying about the idea of the modern world being brought down by the appetites of a prehistoric creature, and possibly because the idea of sharks eating the internet seems only slightly less improbable than the internet consisting of tubes on the bottom of the sea. </p>


							

			</div>
	
			<div>
								<p><span>O</span><span>n</span><span>On</span>  March 22nd, with the world’s attention fixed on the crisis at Fukushima, the<em> </em>Ocean Link reached its worksite 160 miles to the south. They had chosen one of the faults farthest from the meltdown, but the winter wind was blowing from the north and the crew remained inside the ship until it was deemed safe to go outside.&nbsp;</p>


								<p>As the chief engineer and one of the oldest members of the crew, Hirai felt it was his duty to perform the radiation checks. He pulled on the slick yellow coveralls and boots, strapped on a mask and goggles, and opened the heavy steel door leading to the foredeck.&nbsp;</p>


								<p>The sky was overcast and low, and the ship rocked on a building swell as Hirai walked out onto the pocked green-painted deck and held out the wand of his Geiger counter to see what the wind carried. To his relief, it registered only background radiation. Next, he walked to the side and lowered a sensor into the sea. Again, nothing. He would do it all again in two hours, but for now, work could begin.&nbsp;</p>


								<p>They spent the first day and night surveying the worksite, moving slowly along the cable route while measuring the depth and current. Conditions worsened overnight and dawn greeted them with 15-foot waves and gale-force winds, too violent for delicate cable work. They would have to wait.</p>


								<p>At the most basic level, a broken cable is fixed by patching the break with a piece of new cable, but because the break is miles away on the ocean floor, this must be done in several steps. The first step is to cut the cable near the break (often, the cable will have been damaged but not cleanly severed, and cables are laid with so little slack that they cannot be pulled to the surface in one piece). This is done by dragging a bladed grapnel across the cable in a so-called “cutting drive.” The ship then swaps the bladed grapnel for a hooked one and catches one end of the severed cable, hoists it to the surface, and attaches it to a buoy. Then they catch the other cable end, splice the spare cable to it, and tow the spare cable back to the first buoyed cable to complete the patch. The ship is now holding a working cable but one that is considerably longer than it used to be. This process of bringing each cable end to the surface separately means that every repair makes a cable longer — in deep water, by several miles. In order to minimize slack that could get tangled and snagged, the loop of new cable is towed to the side of the original route until it can lay taut on the ocean floor once again.</p>


			</div>
	

						<div>
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/25_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/25_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/25_mobile_min.jpg" alt="A hatch leading below deck in the Ocean Link. The room below is brightly illuminated." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/25_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/26_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/26_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/26_mobile_min.jpg" alt="The interior of the Ocean Link. Netted-off areas lead to the cable tanks. To the left is the jointing station, where cables are spliced." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/26_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/27_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/27_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/27_mobile_min.jpg" alt="The Ocean Link’s two powerful drum cable engines, used for paying out and reeling in cables and grapnel ropes." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/27_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/28_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/28_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/28_mobile_min.jpg" alt="A large collection of bright yellow tools stored on shelves." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/28_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/29_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/29_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/29_mobile_min.jpg" alt="A side view of a drum cable engine." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/29_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
								</div>
	
			<div>
								<p>The Ocean Link had repaired this same stretch of cable five years earlier, which meant they had already added the slack required to bring it to the surface, no cutting required. It should have been sitting on the seafloor in the form of a 12-mile loop. If they could catch it, Hirai reasoned, they would save time and — this was important — precious spare cable. Every cable ship is stationed next to a depot with a certain amount of spare cable for each system in its jurisdiction. If the Ocean Link used too much on their first repair, it would take six months to manufacture and deliver enough new cable to fix the remaining faults.</p>


								<p>By the afternoon, the Ocean Link was still plunging through heavy seas, but with the storm predicted to pass overnight, they decided to begin. From the arsenal of yellow-enameled grapnels strapped to the foredeck, Hirai selected a “jamming-type sliding prong,” a mace-like implement comprised of two metal bars studded with foot-long barbs, well suited for dragging across rocky seabed without getting stuck. They lowered it over the bow sheave and into the water. The ocean floor was more than three miles down, and it took the grapnel more than six hours to hit bottom. The Ocean Link began to move slowly forward.</p>


								<p>From this point onward, Hirai or another engineer would be in the cable control room — an instrument-filled command center behind the bridge — their attention fixed on the tension meter, a circular dial set into a pale green wall. The retro-looking analog gauge was less precise than a digital one but far better for intuitively conveying changes in tension than a jittery numerical readout. The steady wavering of its arm would mean the grapnel was plowing through the gray ooze of the ocean floors. A staccato spike; they had hooked a rock. A steady rise; the cable had been caught. Part of being an effective chief engineer, Hirai found, was the ability to read what was happening on the ocean floor from the limited information of the moving dial.&nbsp;</p>


								<p>At 6AM the next day, the engineer on duty saw the telltale rise of a caught cable, and the Ocean Link came to a stop. They had hooked the cable on the first run — rare in an earthquake repair — and began to reel it in.</p>


			</div>
	
			<section>
	
	
	<p>The ships are aging; the people are aging; and it’s unclear where the money will come from to turn things around</p>
</section>
	
			<div>
								<p>Almost immediately, there was a sign something was amiss. The tension was rising too high too fast. The cable must be pinned under debris, Hirai thought. He ordered the winding engine to slow lest the cable snap, reeling in the grapnel at a grinding 10 feet per minute.&nbsp;</p>


								<p>The morning passed, then the afternoon, Hirai suiting up every few hours to check for radiation. The drum engine continued its slow rotation. Night fell. Half past midnight, after 19 hours of winding, the cable reached the surface.&nbsp;</p>


								<p>The grapnel came over the bow and was illuminated by the deck lights. Hirai was horrified at what he saw. They had caught the cable, but it was mangled unlike anything he had seen before. Hooked around one of the grapnel’s lower barbs, the cable’s polyethylene and wire sheath had been stripped by extreme tension and sprang in coiled loops like Slinkys put through a dryer.&nbsp;</p>


						
								<p>It was a dangerous situation. There was no telling how much tension a cable this badly damaged could withstand. It was like a three-mile rubber band stretched tight from the ocean floor, being tested with every rocking wave. If it snapped, the grapnel would fly across the deck, killing anyone it hit before smashing into the cable engine room.&nbsp;</p>


								<p>They had to get the cable off the ship, but doing so involved working closely with the explosive bundle hovering, taut, above the deck. First, crew members lashed chains to either end of the cable to take the tension off the grapnel, which they then swapped for a version with a sharp blade at its center, typically used for severing cables on the ocean floor. This done, they evacuated the foredeck.&nbsp;</p>


								<p>The grapnel, cable, and chains were slowly lowered back over the prow and into the sea, the ship maneuvering delicately to minimize any sudden changes in tension. Once the cable was safely beneath the waves, they released the chains. Suddenly, pulled tight over the blade, the cable split and sank back to the ocean floor.&nbsp;</p>


								<p>For Hirai, relief at a disaster averted was soon followed by foreboding. The landslides created by the earthquake must have been far greater than he had imagined, dragging the cable for miles, mangling it, and burying it beneath who knew how much debris. He couldn’t think how to proceed. </p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/30_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/30_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/30_mobile_min.jpg" alt="The cable tension meter and other indicators in the Ocean Link’s cable control room." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/30_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p><span>D</span><span>ebates</span><span>Debates</span>  about the future of cable repair have become a staple of industry events. They typically begin with a few key facts: the ships are aging; the people are aging; and it’s unclear where the money will come from to turn things around.&nbsp;</p>


								<p>For much of the 20th century, cable maintenance wasn’t a distinct business; it was just something giant, vertically integrated telecom monopolies had to do in order to function. As they started laying coaxial cables in the 1950s, they decided to pool resources. Rather than each company having its own repair vessel mostly sitting idle, they divided the oceans into zones, each with a few designated repair ships.&nbsp;</p>


								<p>When the telcos were split up at the turn of the century, their marine divisions were sold off. Cable &amp; Wireless Marine became Global Marine. AT&amp;T’s division is now the New Jersey-based SubCom. (Both are now owned by private equity companies; KCS remains a subsidiary of KDDI.) The zone system continued, now governed by contracts between cable owners and ship operators. Cable owners can sign up with a nonprofit cooperative, like the Atlantic Cable Maintenance &amp; Repair Agreement, and pay an annual fee plus a day rate for repairs. In exchange, the zone’s three ships — a Global Marine vessel in Portland, UK, another in Curaçao, and an Orange Marine vessel in Brest, France — will stand ready to sail out within 24 hours of being notified of a fault.</p>


						
								<p>This system has been able to cope with the day-to-day cadence of cable breaks, but margins are thin and contracts are short-term, making it difficult to convince investors to spend $100 million on a new vessel.</p>


								<p>“The main issue for me in the industry has to do with hyperscalers coming in and saying we need to reduce costs every year,” said Wilkie, the chair of the ACMA, using the industry term for tech giants like Google and Meta. “We’d all like to have maintenance cheaper, but the cost of running a ship doesn’t actually change much from year to year. It goes up, actually. So there has been a severe lack of investment in new ships.”</p>


								<p>At the same time, there are more cables to repair than ever, also partly a result of the tech giants entering the industry. Starting around 2016, tech companies that previously purchased bandwidth from telcos began pouring billions of dollars into cable systems of their own, seeking to ensure their cloud services were always available and content libraries synced. The result has been not just a boom in new cables but a change in the topology of the internet. “In the old days we connected population centers,” said Constable, the former Huawei Marine executive. “Now we connect data centers. Eighty percent of traffic crossing the Atlantic is probably machines talking to machines.” </p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/31_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/31_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/31_mobile_min.jpg" alt="A black and white photograph of the bow of a cable ship." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/31_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p>Maintenance providers regard these changes with ambivalence. The cable boom means there will be no shortage of cables to fix, but it also means a future of negotiating with a handful of tech giants that can use their tremendous buying power to squeeze ship operators further.&nbsp;</p>


								<p>Market forces pose one challenge; geopolitics another. Tensions with China, including the increasing difficulty of getting permission to repair cables in the contested waters of the South China Sea, are contributing to decisions to route new systems through the Philippines and other less direct passages. Conflict in the Middle East has the industry looking nervously at the Red Sea, an infamous cable chokepoint: in February, a freighter struck by Houthi rockets dragged its anchor across three crucial connections between Asia and Europe, degrading connectivity and raising the frightening prospect of conducting repairs under fire. The Red Sea vulnerability has in turn renewed interest in an Arctic route, made potentially feasible by melting sea ice, though, for years, one of the fatal flaws of this proposal has been the question of who would repair such a cable, there being no ice-capable maintenance vessels.</p>


								<p>These and other recent events, like the 2022 Nord Stream pipeline explosion, have led governments to take a greater interest in cable security, often focusing on the specter of a deliberate attack. Late last year, NATO convened a symposium on undersea infrastructure and the future of “seabed warfare,” while the UK commissioned naval vessels to patrol their subsea connections. Meanwhile, the <a href="https://digital-strategy.ec.europa.eu/en/library/recommendation-security-and-resilience-submarine-cable-infrastructures">European Union</a>, India, and other governments have proposed investing in maintenance vessels directly.</p>


						
								<p>“The amount of ships is relatively limited, and there are a number of places where it could get critical,” said Christian Bueger, the lead author of a 2022 EU Parliament study on threats to subsea data infrastructure. As part of the study, he visited a cable repair ship in Cape Town, South Africa. It was old, he said, with oily, clanging machinery demanding hard physical labor — the opposite of the clean digital space he associated with the internet. One of his recommendations was that governments figure out a way to invest in cable fleets rather than rely on companies focused on cost cutting and efficiency.</p>


								<p>The situation of SubCom illustrates the industry’s strange moment. The company has been withdrawing from maintenance work, according to industry sources, in order to focus on more lucrative installations, many of which are for Google. At the same time, the company is <a href="https://www.reuters.com/investigates/special-report/us-china-tech-subcom/">increasingly intertwined with the US government</a>, which waged a pressure campaign to help SubCom beat China’s HMN Tech for the contract to build a major Asia-to-Europe cable, according to <em>Reuters</em>. SubCom also recently won a contract to operate the US’s first “cable security fleet.”</p>


								<p>Like the involvement of the tech giants, industry veterans regard this new government interest with ambivalence. More funding would be welcome, but the world of subsea cables is one of unforgiving tradeoffs, and it’s easy for well-intentioned policies to go awry. One often proposed solution, for example, is to corral cables into protected corridors, which can make them easier to guard against malicious actors but also makes it possible for a single landslide to take them all out at once. </p>


			</div>
	
			<section>
	
	
	<p>“Did any of us know that we went viral on TikTok?”</p>
</section>
	
			<div>
								<p>Secrecy, too, is a double-edged sword. Classifying cable locations might make them more difficult to attack while worsening exposure to what is their actual greatest threat: fishing accidents and other forms of human negligence. Greater secrecy could also heighten the tension between the industry’s near-total obscurity and its need for new recruits. Ships are a relatively easy problem to solve; they just take money. People take years to train.</p>


								<p>The submarine cable world has never been particularly public. The industry is small and competitive, and cable owners don’t want their cables to get a reputation for breaking, so they bind maintenance providers with nondisclosure agreements. The result is that in the rare case that a fault reaches public awareness, ship operators almost never talk about it. Add in national security concerns, and the result is a code of silence that pervades the entire business. (Which is also why many of the sources in this story are “industry veterans” or other anonymous descriptors.) The industry has begun to recognize that this poses a recruiting challenge.</p>


								<p>In 2022, the industry organization SubOptic gathered six cable employees in their 20s and 30s for a panel on the future of the industry. Most of them had stumbled into their jobs inadvertently after college, and the consensus was that the industry needed to be much better about raising public awareness, especially among the young.&nbsp;</p>


						
								<p>“I don’t know if anyone saw, but during the pandemic, submarine cables actually went viral on TikTok,” said one panelist, a young cable engineer from Vodafone. “People didn’t know they existed, and then suddenly, out of nowhere, they were viral. I think it’s engaging with youth and children through their own avenues — yes, you can have science museums and things like that, but they are online, they are on their iPads, they’re on their phones.”</p>


								<p>“We’ve got some pretty senior decision-makers and influencers in the subsea cable industry here,” said one audience member. “Did any of us know that we went viral on TikTok?” he asked, to laughter.&nbsp;</p>


								<p>“As this panel rightfully said upfront, it’s not that we have a brand problem,” said another audience member, “we just don’t have a brand at all.”</p>


							

			</div>
	
			<div>
								<p><span>I</span><span>t</span><span>It</span>  took the Ocean Link a month to complete its first repair. Failed grapnel runs, fishing gear entanglements, repeated radiation checks, and storms: it had been among the most difficult repairs Hirai had faced. They continued to work through the spring, but by June, they faced a dilemma.&nbsp;</p>


								<p>Many of the remaining faults lay 50 miles off the coast of Chiba, deep in the Japan Trench, where eight different cable lines passed near and sometimes over each other. It was a cable chokepoint, and a landslide must have crashed down and wrecked them all. It would be difficult to catch one without cutting its neighbor. Even if they could, it wasn’t clear they had enough spare cable to fix each fault individually, with all the loops of slack they would need to add to bring the cables to the surface.&nbsp;</p>


								<p>Hirai decided the only solution was to abandon the tangled mess and lay a new system on top of it. It would mean abandoning miles of cable as well as a branching unit: a 2,000-pound device that splits one cable into two different lines going to two destinations. But by reducing the number of loops, it would reduce the amount of cable required. Even then, it wasn’t clear they had enough. They did, however, have a lot of small bits of cable they had been careful to salvage during previous repairs — three miles here, five miles there. With a lot of work, they could be spliced together.</p>


								<p>Takashi Kurokawa had joined KCS 12 years earlier, after hearing about the company from a teacher while in engineering school. Unlike many of his colleagues who moved roles every few years, after Kurokawa learned to joint, he just kept jointing. He enjoyed the way jointing’s strict rules and standards for success created a structure within which he could push himself to attain ever greater precision and speed. </p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/32_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/32_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/32_mobile_min.jpg" alt="Takashi Kurokawa preparing to splice a fiber." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/32_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p>The work is extraordinarily delicate. Cables must be stripped of their polyurethane sheaths, copper conducting tubes, wire armor, and enamel coating until the clear glass threads themselves are exposed. Kurokawa then takes a glass strand from each cable, cleans them in a sonic bath (touching them risks damage and splinters), cleaves their ends at perfect right angles, and places them inside a black toaster-sized box called a fusion splicer, their ends almost but not quite touching. In an instant, the device aligns the ends and zaps an electric arc between them, melting the glass together. Kurokawa then winds the newly spliced fiber into a metal tube called a joint box and does it all again for the next fiber strand. The entire process can take 20 hours, with Kurokawa and his team working in shifts. Every step demands hunched, jeweler-like focus as they seek perfect precision — not in a seismically isolated clean room but in the belly of a rocking ship. Each joint is expected to function untouched under crushing pressure for at least 25 years.</p>


								<p>To speed matters, they decided to assemble what they could in port at Yokohama, with the Ocean Link moored and relatively stable. Working in shifts over 10 days, Kurokawa and his colleagues spliced 10 joints, four repeaters, and a branching unit — assembling a three-part, 100-mile system from the spare bits of cable they had on hand. At night, he dreamed of winding cables back and forth between storage tanks to get at the segments he needed. On June 26th, they tested the apparatus. It worked. They set sail the same day, with no estimate for how long it would take.</p>


								<p>Hirai had mapped out the plan to a meticulous 23 steps. They began by severing the cable running from the branching unit to Murayama in the south, catching the landward end, splicing the new cable to it, and sailing northward to the point where they planned to deposit the new branching unit. There, they attached the cable to a buoy and lowered it into the ocean. Then they were off to the northern cable, which they caught, spliced, and pulled back to the buoy. It took 12 days to get here, and now came the difficult part.</p>


			</div>
	

						<div>
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/33_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/33_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/33_mobile_min.jpg" alt="The cable jointing station aboard the Ocean Link. A large tarpaulin hangs over the station." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/33_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/34_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/34_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/34_mobile_min.jpg" alt="A close-up view of a metal vise, used to hold cables during repairs." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/34_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/44_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/44_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/44_mobile_min.jpg" alt="A cable is mounted in a vise and stripped to reveal the fiber strands at its core." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/44_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/45_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/45_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/45_mobile_min.jpg" alt="Each fiber is coated in colored enamel so workers can tell which is which." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/45_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/35_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/35_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/35_mobile_min.jpg" alt="Kurokawa selects a fiber to splice." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/35_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/36_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/36_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/36_mobile_min.jpg" alt="The colored enamel coating of the fiber is stripped, revealing the glass itself." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/36_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/37_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/37_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/37_mobile_min.jpg" alt="Kurokawa holds the stripped glass fiber close to the camera." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/37_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/38_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/38_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/38_mobile_min.jpg" alt="The fiber is cleaned in an ultrasound bath." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/38_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/39_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/39_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/39_mobile_min.jpg" alt="The fiber is cleaved at a right angle." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/39_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/40_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/40_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/40_mobile_min.jpg" alt="The fiber is placed inside the splicing machine. The stripping, cleaning, and cleaving process is repeated with the other fiber to be spliced and placed end to end with the first strand inside the machine." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/40_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/46_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/46_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/46_mobile_min.jpg" alt="" src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/46_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/41_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/41_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/41_mobile_min.jpg" alt="A plastic sheath is placed over the splice to reinforce it." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/41_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/42_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/42_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/42_mobile_min.jpg" alt="Each completed fiber splice is placed inside a sealed enclosure called a “joint box.”" src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/42_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
								</div>
	
			<div>
								<p>The final splice is the most precarious moment of the repair. On the first splice, the ship can pivot 360 degrees around the dangling cable in order to angle into the wind and waves and maintain position. But on the second splice, there are two cables hanging off the prow, and the ship’s maneuverability is far more restricted should the weather turn foul.</p>


								<p>With the branching unit, they had to complete two final splices — one for each leg — then deposit the whole apparatus to the ocean floor intact. This, the Ocean Link crew knew, would be its own challenge. A 2,000-pound weight dangling for miles through the water column can do funny things. In 2008, the Ocean Link was called to recover a branching unit that another cable ship accidentally dropped into the Japan Trench while trying to deploy it. With a typhoon approaching, they caught the cable, brought up the unit, and fashioned a webbing loincloth-like harness between the unit’s two legs for additional support before lowering it back to the bottom.</p>


								<p>They would again be working in deep water — nearly four miles — but what troubled Hirai was the current. A powerful river of warm water called the Kuroshio Current snakes unpredictably up from the south along Japan’s coast, and it happened to be racing through the worksite at four knots, aquamarine and glittering in the summer sun. The Ocean Link would have to constantly adjust its thrusters to maintain position against the stream and prevent the branching unit from banging against the hull as it descended. But the weather was fair and the swell was light, so they decided to proceed.&nbsp;</p>


								<p>Hirai, Kurokawa, Kobayashi, and more than a dozen other members of the crew assembled on the foredeck. The white-painted prow glared bright in the sun as the branching unit was brought out, a metal tube with two black accordion legs that tapered to slender cables. They had drilled this maneuver before leaving port. Clad in hard hats, the crew gingerly placed it on a metal dolly and strapped it down. Hirai tied yellow webbing between its legs to form a harness and affixed a safety rope. Kurokawa stood by the prow, watching the unit as it was rolled toward him. Kobayashi stood back by the drum engine, watching the cable unspool and worrying what would happen if it snapped, envisioning weeks of splicing plunging to the ocean floor. </p>


			</div>
	
					<div>
	<picture>
		<img data-sourcedesktop="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/47_min.jpg" data-sourcetablet="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/47_min.jpg" data-sourcemobile="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/47_mobile_min.jpg" alt="A group photo of the crew of the Ocean Link in 2011. The ship itself is in the background." src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/photos/min/47_mobile_min.jpg">
    	
    	
		<div>
					<p><img src="https://cdn.vox-cdn.com/csk/fe4f780a-1a25-4bcc-8489-4ea4403cece8/740a5e3d-5577-4a46-a47b-5580b718c574/images/logomark.svg" alt=""></p><p>Loading <span>.</span><span>.</span><span>.</span></p>
				</div>

	</picture>
	
</div>
	
			<div>
								<p>The ship’s thrusters hummed and moved the Ocean Link ever so slowly backward. One end of the branching unit lifted off the dolly as it was pulled up onto the bow sheave. To an observer, the ship would look nearly stationary as the current flowed around it. The unit went over the top of the prow and descended, hanging from its harness, until it slipped below the surface and out of sight.</p>


								<p>It was August by the time the Ocean Link finished the branching unit repair. Other ships, deeming the crisis at Fukushima stable enough to work, had arrived to help. Hirai sometimes advised them on the area’s tricky currents and rugged bathymetry, but mostly, they stayed out of each other’s way; the last thing you want to do is tangle two grapnels.</p>


								<p>The final repair was an easy one. They had to finish the job that had been interrupted by the earthquake nearly five months earlier. They returned to the site where they had made their rushed escape, deployed the submersible, and buried the rest of the cable beneath the sand.&nbsp;</p>


								<p>The repair was so close to port that there was no time to celebrate during their return, nor was there much of a mood to do so. The earthquake had caused more than 20 faults, and the Ocean Link had repaired 11 of them. It had taken 154 days of continuous work. They had missed a time of national mourning, school graduations, harvest celebrations, and the slow resumption of normalcy.&nbsp;</p>


								<p>After they docked, the crew departed for their homes. Hirai stayed behind to finish writing his final daily report, then made for home as well. As he rode the train back to Yokosuka, he watched his fellow passengers absorbed in their phones. <em>We completed the job,</em> he thought with satisfaction, <em>and they have no idea</em>. </p>


			</div>
<p><span>Creative Director: Kristen Radtke</span><span>Photo Editor: Amelia Holowaty Krales</span><span>Engineer: Graham MacAree</span>
</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I Know the secret to the quiet mind. I wish I'd never learned it (2021) (158 pts)]]></title>
            <link>https://www.theatlantic.com/health/archive/2021/06/car-accident-brain-injury/619227/</link>
            <guid>40074520</guid>
            <pubDate>Thu, 18 Apr 2024 09:50:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theatlantic.com/health/archive/2021/06/car-accident-brain-injury/619227/">https://www.theatlantic.com/health/archive/2021/06/car-accident-brain-injury/619227/</a>, See on <a href="https://news.ycombinator.com/item?id=40074520">Hacker News</a></p>
<div id="readability-page-1" class="page"><section data-event-module="article body" data-flatplan-body="true"><p data-flatplan-paragraph="true"><small><i data-stringify-type="italic">This article was featured in the One Story to Read Today newsletter. </i><i data-stringify-type="italic"><a data-event-element="inline link" data-sk="tooltip_parent" data-stringify-link="https://www.theatlantic.com/newsletters/sign-up/one-story-to-read-today/" delay="150" href="https://www.theatlantic.com/newsletters/sign-up/one-story-to-read-today/" rel="noopener noreferrer" target="_blank">Sign up for it here</a></i><i data-stringify-type="italic">.</i></small></p><p data-flatplan-paragraph="true">The worst things can happen on the most beautiful days. My family’s worst day was a perfect one in the summer of 2019. We picked my daughter up from camp and talked about where to go for lunch: the diner or the burger place. I don’t remember which we chose. What I do remember: being woken up, again and again, by doctors who insist on asking me the same questions—my name, where I am, what month it is—and telling me the same story, a story that I am sure is wrong.</p><p data-flatplan-paragraph="true">“You were in a car accident,” they say. But this cannot be. We’re having lunch and then going on a hike. I had promised the think tank where I work that I’d call in to a 4 p.m. meeting.</p><p data-flatplan-paragraph="true">“You are in Dartmouth-Hitchcock Hospital in New Hampshire.” Another ludicrous statement. I started the day in Vermont. Surely if I had crossed the river to New Hampshire I would know it.</p><p data-flatplan-paragraph="true">“What’s your name?” they ask me, and I tell them and tell them and tell them.</p><p data-flatplan-paragraph="true">“Where are you?” “New Hampshire,” I say, except for one time when I say “Vermont.” “New Hampshire,” they correct, and I want to say, “Really, we are so close to the border here, can’t you just give it to me this once?”</p><p data-flatplan-paragraph="true">“You were in a car accident,” they tell me again. “Your husband broke his leg and your son broke his collarbone.” These do not seem like horrible injuries, so I am waiting for the worse news, the news that my daughter is dead. She is the youngest and the smallest. She was born with albinism, and her existence has always felt improbable, and so now it must be over.</p><p data-flatplan-paragraph="true">But—thank God—it’s not. “Your daughter has fractures in her spine and damage to her lower intestine from the seat belt.” They tell me that my lower intestine was also injured, and that I’ve had surgery. I lift up my hospital gown and am surprised to see an angry red line and industrial-size staples. I remember an article I’d read about seat belts not being designed for women, and I ask the doctor if he sees more women with these injuries than men. I have yet to take in the reality of what has happened to me, to my family. Instead I am thinking about writing an exposé about the sexist seat-belt industry.</p><p data-flatplan-paragraph="true">They wake me up and ask me where I am and what my name is. A doctor asks me who the president is. “I don’t want to say,” I reply. He smiles. I am at Dartmouth for three days before I am transferred to the University of Vermont, where my husband and children are. The days pass like minutes, a loop of sleep interrupted by people asking me questions and telling me terrible things.</p><p id="injected-recirculation-link-0" data-view-action="view link - injected link - item 1" data-event-element="injected link" data-event-position="1"><a href="https://www.theatlantic.com/ideas/archive/2021/05/car-accident/618766/">Joshua Sharpe: </a><a href="https://www.theatlantic.com/ideas/archive/2021/05/car-accident/618766/">We should all be more afraid of driving</a></p><p data-flatplan-paragraph="true">One of the things I am told is that I have a brain bleed and a traumatic brain injury. I wonder if this is why I am slurring my words, but am told that the slurring is from the anti-seizure medication I am on. This sounds good. The slurring will stop. A doctor tells me I “got my bell rung.” This is a bad analogy. Bell clappers are meant to slam against the side of the bell. The brain is not meant to slam against the side of the skull.</p><p data-flatplan-paragraph="true" data-flatplan-dropcap="true">O<span>f all the injuries</span> my family is suffering from, mine is the worst. This is my totally biased opinion. My husband’s leg will take almost a year to heal. My daughter would have died if not for the surgery to repair her flayed abdomen. She is 10, and one of her friends tells her that because of the scar she will never be able to wear a bikini. She spends many days attempting to suss out whether she cares. She doesn’t yet know if she is the bikini-wearing type.</p><p data-flatplan-paragraph="true">My 13-year-old son is the only one who remembers the accident. He remembers a woman in a ponytail calling 911, the smell of gasoline and burnt metal. He remembers his father yelling “Jesus Christ.” He will have to live with the memory of his sister looking at my body and asking, “Is Mama dead?”</p><p data-flatplan-paragraph="true">These are terrible injuries, and yet, the other members of my family don’t walk around thinking, <em>Am I still me?</em> My brain injury has shaken my confidence in my own personality, my own existence. This is the worst injury.</p><p data-flatplan-paragraph="true">When we leave the hospital and move into a hotel, I frequently get lost in the hallway. The first time I roll into occupational therapy with my walker, I am grateful for the obvious signage pointing me toward the check-in desk. It’s almost as though the clinic is expecting people with brain damage.</p><p data-flatplan-paragraph="true">My therapist is a smiling, 40-something woman with dirty-blond hair. She reminds me of me before the accident. She asks if I am having any thinking problems or memory problems. I tell her about an incident with Parmesan cheese.</p><p data-flatplan-paragraph="true">“Can you get the Parmesan?” my husband asked.</p><p data-flatplan-paragraph="true">I opened the fridge and looked. I looked and looked.</p><p data-flatplan-paragraph="true">“I can’t find it,” I said with a shrug.</p><p data-flatplan-paragraph="true">My son opened the fridge and pulled out a block of Parmesan.</p><p data-flatplan-paragraph="true">It hadn’t occurred to me that this was a brain issue. Sometimes you just can’t find the Parmesan. Right?</p><p data-flatplan-paragraph="true">A test confirms that I have trouble<a data-event-element="inline link" href="https://msktc.org/tbi/factsheets/vision-problems-and-traumatic-brain-injury"> scanning a visual field</a> for objects. My brain is struggling to recognize what I see, but without a pre-accident baseline to judge from, there is no way to know how much worse I am at it now. Have I always been bad at finding things? Maybe? There are limits to how well an injured brain can scrutinize an injured brain.</p><p data-flatplan-paragraph="true">I have other visual-processing issues. At first I can’t watch television because my brain is unable to merge the images from my two eyes, so I see doubles of everything—two Phoebes, two Chandlers. I can watch with one eye closed, but I’m distracted, seething at my brain for failing to do such a simple task.</p><div data-flatplan-inline_image="true"><figure><picture><img alt="a face inside of a spiral" loading="lazy" sizes="(min-width: 729px) 655px, (min-width: 576px) calc(100vw - 48px), 100vw" srcset="https://cdn.theatlantic.com/thumbor/eiRQDwubiDbd9u68hFAUvHoFBho=/0x0:1080x1350/655x819/media/img/posts/2021/06/Patricia_Voulgaris/original.jpg 655w, https://cdn.theatlantic.com/thumbor/Xi73piGUB7i8lgSL109MioUqZ90=/0x0:1080x1350/750x938/media/img/posts/2021/06/Patricia_Voulgaris/original.jpg 750w, https://cdn.theatlantic.com/thumbor/J60ROHpmk9--89tS_nmkAFl22-g=/0x0:1080x1350/850x1063/media/img/posts/2021/06/Patricia_Voulgaris/original.jpg 850w, https://cdn.theatlantic.com/thumbor/3QBYBw90bCLgpcA-Zsh9DT5PWS0=/0x0:1080x1350/928x1160/media/img/posts/2021/06/Patricia_Voulgaris/original.jpg 928w" src="https://cdn.theatlantic.com/thumbor/eiRQDwubiDbd9u68hFAUvHoFBho=/0x0:1080x1350/655x819/media/img/posts/2021/06/Patricia_Voulgaris/original.jpg" width="655" height="819"></picture><figcaption>Patricia Voulgaris</figcaption></figure></div><p data-flatplan-paragraph="true">In one session, the therapist tells me we are going to play a game. She pulls out a deck of cards and asks me to turn cards over while saying the number or the color or the suit. The game is so difficult, I want to physically remove my brain from my skull and hurl it against a wall. I will never play this game again as long as I live.</p><p data-flatplan-paragraph="true">Eventually I graduate from occupational therapy. But occupational therapy isn’t about getting people back on their feet so they can return to think tanks. It is about making sure they can run errands without getting lost. I am someone who has always taken pride in my intelligence, and now I am not so smart. I am just a functional human being, according to occupational therapy.</p><p data-flatplan-paragraph="true" data-flatplan-dropcap="true">W<span>hen we go out in public</span> as a family, we are a walking nightmare. “Wow,” a stranger says, marveling at the device that is bolted into my husband’s femur. And then my son appears with his arm in a sling, my daughter limps over in her back brace. An injured couple is potentially funny. There is nothing funny about an injured family. “What happened to you guys?”</p><p data-flatplan-paragraph="true">When we tell the story, we explain that we were in no way at fault, which feels important. We wore our seat belts and drove the speed limit and the weather wasn’t bad and yet this happened to us. Someone was driving a pickup truck in the opposite direction. He was late to a job interview or to get his kid, or maybe he was just antsy. In front of him was a motorcycle slowing him down. Maybe he’d been behind that motorcycle for miles. Maybe he liked to take risks. He pulled into our lane and passed the motorcycle while going up a hill at 70 miles per hour. I don’t know who makes this kind of decision. Did he think, <em>I can’t believe I did something this stupid?</em> Did he also yell “Jesus Christ”?</p><p data-flatplan-paragraph="true">Because we are not at fault, <em>accident</em> feels like the wrong word. Not just wrong, but unfair. My husband starts calling it <em>the incident</em>, but an <em>incident</em> is a small thing, not something that scars you for life. <em>The smashing</em>? <em>The destruction</em>? <em>Newbury</em>, after the town where it occurred? The only thing that comes close is <em>the devastation</em>.</p><p data-flatplan-paragraph="true">The devastated me is different. My brain used to race, making lists and plans, skipping from an article I was researching to whether my kids were in appropriate after-school programs to what vacation we should take in February. Now it does none of that. There are no plans to make.</p><p data-flatplan-paragraph="true">A few days after regaining consciousness, I check my Twitter feed. I have always been a news junkie. But I have missed nothing. The news seems to be not just familiar but actually repeating itself. Something bonkers happened in the White House. People are dying in a country I’ve never been to. A company did something possibly illegal. There was a house fire in the Bronx. Are these the things I used to care about?</p><p data-flatplan-paragraph="true">The most interesting piece of news is the one I am experiencing. In the hospital we are waiting to make sure my daughter can poop through her reconstructed colon. This article isn’t in <em>The New York Times.</em></p><p data-flatplan-paragraph="true">When we return to New York I take the subway to doctor appointments. I don’t take out my phone, I just sit. My brain is quiet, which I find suspicious, but also soothing. Before the accident I went to yoga retreats and tried meditation. I said things like “I just need to unplug.” Apparently what I needed was to get hit by a truck. Perhaps I have discovered the secret to a peaceful mind, and it is traumatic brain injury. I fantasize about opening an expensive spa where busy people pay me money to whack them on the head with a baseball bat.</p><p data-flatplan-paragraph="true">The day of the accident I had been working on a project to improve how homeless people are placed into shelters. I say out loud, “I don’t care about homeless people” to see how it feels. It doesn’t ring true; I do care about homeless people. I just don’t feel like working. I have always been a regular exerciser. Now I can’t imagine wanting to do a burpee, let alone 10 of them. I always ate healthy things. But did you know that you can eat whole grains and still get hit by a truck?</p><p data-flatplan-paragraph="true">I have strange cravings. I think about apple cider all the time. Apple cider is not a normal part of my diet. I have a very detailed dream about eating chocolate cake. I eat the cake. That’s the entire dream. I find myself foraging in the fridge for flavors that don’t exist.</p><p data-flatplan-paragraph="true">I don’t know which symptoms are permanent and which are temporary. At first, the doctors say that after a year or two I’m likely to have a full return to my normal brain function. Or not. They don’t really know about the brain. It might be more like 95 percent. If I broke my elbow and someone told me I’d get 95 percent of my elbow function back, I’d be satisfied. But 95 percent of my brain function sounds terrifying. Which pieces will be missing?</p><p data-flatplan-paragraph="true">Some days I feel like myself. Other days all I can think about is the old life that is gone. Then, halfway through my recuperation, the coronavirus comes. The stores close, the schools close, the traffic on the avenue dwindles to a sporadic whoosh. And my busy friends who were always texting me about their crazy schedules are suddenly as quiet as I am. Together we wait for normal to return. The difference is that they know what normal looks like.</p><p data-flatplan-paragraph="true">In July it will be two years since the accident. The world is now coming back to life, my days slowly filling up with work and chores and exercise. Soon I will go back to in-person meetings and travel, and I wonder: Will I be up to the challenge? Or will I get lost in office buildings and airports?</p><p data-flatplan-paragraph="true">For now, in this liminal space between the old life and the new one, I often catch myself staring at my children. They have never been more beautiful. I chalk this up to the magic of braces––their teeth are finally coming into alignment––but I know this is ridiculous. They are beautiful because they are alive. I look at them, and I sit with the silence. Today, it is mine. Tomorrow, it may not be.</p></section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Cosmic Desktop: Hammering Out New Cosmic Features (190 pts)]]></title>
            <link>https://blog.system76.com/post/hammering-out-cosmic-features</link>
            <guid>40074383</guid>
            <pubDate>Thu, 18 Apr 2024 09:24:53 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.system76.com/post/hammering-out-cosmic-features">https://blog.system76.com/post/hammering-out-cosmic-features</a>, See on <a href="https://news.ycombinator.com/item?id=40074383">Hacker News</a></p>
Couldn't get https://blog.system76.com/post/hammering-out-cosmic-features: Error: Request failed with status code 404]]></description>
        </item>
        <item>
            <title><![CDATA[OpenBSD – Coming soon to a -current system near you: parallel raw IP input (121 pts)]]></title>
            <link>https://www.undeadly.org/cgi?action=article;sid=20240418050520</link>
            <guid>40073139</guid>
            <pubDate>Thu, 18 Apr 2024 05:05:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.undeadly.org/cgi?action=article;sid=20240418050520">https://www.undeadly.org/cgi?action=article;sid=20240418050520</a>, See on <a href="https://news.ycombinator.com/item?id=40073139">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p>Contributed by
<a href="http://bsdly.blogspot.com/">Peter N. M. Hansteen</a>
on <time datetime="2024-04-11T22:05:42Z">2024-04-11</time>
from the all the packets all at once dept.</p>
<p>The work to improve the capabilities of the network stack is about to take a noticeable step forward. In a message to <code>tech@</code> titled <a href="https://marc.info/?l=openbsd-tech&amp;m=171286702531925&amp;w=2">parallel raw IP input</a>, Alexander Bluhm (<code>bluhm@</code>) posted a patch that he describes as</p>
<blockquote><pre>List:       openbsd-tech
Subject:    parallel raw IP input
From:       Alexander Bluhm &lt;bluhm () openbsd ! org&gt;
Date:       2024-04-11 20:24:39

Hi,

As mvs@ mentioned, running raw IP in parallel is easier as it is
less complex than UDP.  Especially there is no socket splicing.

So I fixed one race in rip_input() and reused my shared net lock
ip_deliver() loop.
</pre></blockquote>

<blockquote><pre>The idea is that ip_deliver() may run with shared or exclusive net
lock.  The last parameter indicates the mode.  If is is running
with shared netlock and encounters a protocol that needs exclusive
lock, the packet is queued.

Before ip_ours() always queued the packet.  Now it tries to deliver
with shared net lock, and if that is not possible, it queues the
packet.

In case we have an IPv6 header chain that must switch from shared
to exclusive processing, the next protocol and mbuf offset are
stored in a mbuf tag.

The only drawback is that we have very limited test coverage for
raw IP.  The ip_deliver() shared locking change works also with
UDP, Hvroje has tested it in 2022.

ok?

bluhm
</pre></blockquote>
<p>Followed by the patch itself, which should apply to a then-recent -current checkout.</p>
<p>a little later, the patch was 
<a href="https://marc.info/?l=openbsd-cvs&amp;m=171312744110261&amp;w=2">committed</a>:</p>
<blockquote>
<pre>CVSROOT:	/cvs
Module name:	src
Changes by:	bluhm@cvs.openbsd.org	2024/04/14 14:46:27

Modified files:
	sys/net        : if_bridge.c 
	sys/netinet    : in_proto.c ip_input.c ip_var.h 
	sys/netinet6   : ip6_input.c 
	sys/sys        : mbuf.h protosw.h 

Log message:
Run raw IP input in parallel.

Running raw <abbr>IPv4</abbr> input with shared net lock in parallel is less
complex than <abbr>UDP</abbr>.  Especially there is no socket splicing.

New ip_deliver() may run with shared or exclusive net lock.  The
last parameter indicates the mode.  If is is running with shared
netlock and encounters a protocol that needs exclusive lock, the
packet is queued.  Old ip_ours() always queued the packet.  Now it
calls ip_deliver() with shared net lock, and if that cannot handle
the packet completely, the packet is queued and later processed
with exclusive net lock.

In case of an <abbr>IPv6</abbr> header chain, that switches from shared to
exclusive processing, the next protocol and mbuf offset are stored
in a mbuf tag.

OK mvs@
</pre>
</blockquote>
<p>
Via email, <code>bluhm@</code> added some further explanation:
</p><blockquote><pre>The commit from January is sending UDP in parallel.  Socket send,
when called from userland, uses shared net lock.  You need multiple
UDP sockets and threads writing to them to see an effect.

Now we are working on parallel input.  When traffic is directed to
different IP or ports, the network hardware can distribute flows
to different receive queues.  These queues are processed by one CPU
each.  Goal is to keep procssing parallel until data reaches userland.

IP input and forward runs parallel for a while.  Until last week
all protocol input was single threaded.  Now raw IP can run in
parallel.

Next step is UDP input in parallel.  It kind of works, but locking
in socket splicing is wrong.  In my experiments I see increase in
UDP througput of factor 4 to 7.  But the locking problems are quite
nasty.  I think we need more tests that agressively splice and
unsplice sockets.

Advantage of UDP over raw IP would be that testing is much easier.

Final protocol will be TCP, but that is hardest of all.  Single
stream TCP performance already got a performance boost by hardware
offloading.

hardware receive =&gt; IP input -&gt; protocol input =&gt; userland =&gt;
protocol output =&gt; IP output =&gt; hardware transmit

bluhm@ is working on -&gt; protocol input to make it parallel for more
protocols.  It is the final bottle neck.

mvs@ is looking at =&gt; to and from userland.  They behave differently
for UNIX domain, raw IP, UDP, and TCP, the latter is still single
threaded.
</pre></blockquote>
<p>
This all boils down to <em>faster packets</em>, due to the system's now ever more increasing ability to fully utilize multiple cores to process network traffic.
</p><p>
Testing is of course still appreciated, but this code is anyway destined to be in the next release.
</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Lions OS: secure – fast – adaptable (122 pts)]]></title>
            <link>https://trustworthy.systems/publications/papers/Heiser_24:eo.abstract</link>
            <guid>40072731</guid>
            <pubDate>Thu, 18 Apr 2024 03:39:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://trustworthy.systems/publications/papers/Heiser_24:eo.abstract">https://trustworthy.systems/publications/papers/Heiser_24:eo.abstract</a>, See on <a href="https://news.ycombinator.com/item?id=40072731">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      <main id="page-content">



<h2>Authors</h2>


<p>         &nbsp;&nbsp;&nbsp;&nbsp;School of Computer Science and Engineering <br>
             &nbsp;&nbsp;&nbsp;&nbsp;UNSW,<br>
         &nbsp;&nbsp;&nbsp;&nbsp;Sydney 2052, Australia
</p>

<h2>Abstract</h2><p>
  seL4 is the world's most secure operating system (OS) kernel, but
  it is a far cry from being an OS. As a microkernel, it provides core
  mechanisms for securely multiplexing the hardware, but none of the
  services application programmers expect, so adopters are forced to
  develop those themselves. Furthermore, a high level of expertise is
  required to design performant systems on top of seL4. The result is
  frequently a poor design, and far too often people giving up.
</p>

<p>
  The Trustworthy Systems team at UNSW has now decided to build Lions
  OS, a complete seL4-based OS aimed to support the needs of
  developers of cyberphysical, IoT and other embedded systems. Lions
  OS, named after John Lions (of Lions Book fame, arguably one of the
  fathers of open source), is being designed and implemented from
  scratch, with the seemingly conflicting goals of high performance,
  high security and adaptability to a wide class of use
  cases. Specifically we plan to prove the correct implementation of
  its critical components.
</p>

<p>
  In the talk I explain why I think this is not only achievable, but
  will be achieved within 2-3 years, by strictly adhering to the
  time-honoured engineering principle KISS – keep it simple, stupid! I
  will present our initial results that show that, with the right
  design, this simplicity can not only achieve excellent performance
  (outperforming Linux networking) but also enable proofs of
  implementation correctness. The talk serves as the public launch of
  Lions OS -- needless to say, it's open source.
</p>
<h2>BibTeX Entry</h2><pre>  @inproceedings{Heiser_24:eo,
    address          = {Gladstone, QLD, AU},
    author           = {Gernot Heiser},
    booktitle        = {Everything Open},
    month            = apr,
    organization     = {Linux Australia},
    title            = {{Lions OS}: Secure -- Fast -- Adaptable},
    year             = {2024}
  }</pre>
<h2>Download</h2>



      </main>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Google fires 28 employees involved in sit-in protest over $1.2B Israel contract (138 pts)]]></title>
            <link>https://nypost.com/2024/04/17/business/google-fires-28-employees-involved-in-sit-in-protest-over-1-2b-israel-contract/</link>
            <guid>40072295</guid>
            <pubDate>Thu, 18 Apr 2024 02:17:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://nypost.com/2024/04/17/business/google-fires-28-employees-involved-in-sit-in-protest-over-1-2b-israel-contract/">https://nypost.com/2024/04/17/business/google-fires-28-employees-involved-in-sit-in-protest-over-1-2b-israel-contract/</a>, See on <a href="https://news.ycombinator.com/item?id=40072295">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
							


<p>Google has fired 28 employees over their participation in a 10-hour sit-in <a href="https://nypost.com/2024/04/16/business/google-staffers-storm-nyc-california-seattle-offices-to-protest-israel-ties/">at the search giant’s offices in New York and Sunnyvale, California</a>, to protest the company’s business ties with the Israel government, The Post has learned.</p>



<p>The pro-Palestinian staffers — who had donned traditional Arab headscarves as they stormed and occupied the office of a top executive in California on Tuesday — were terminated late Wednesday after an internal investigation, Google vice president of global security Chris Rackow said in a companywide memo.</p>



<p>“They took over office spaces, defaced our property, and physically impeded the work of other Googlers,” Rackow wrote in the memo obtained by The Post. “Their behavior was unacceptable, extremely disruptive, and made co-workers feel threatened.”</p>



<p>In New York, protesters had occupied the 10th floor of Google’s offices in the Chelsea section of Manhattan as part of a protest that also extended to the company’s offices in Seattle for what it called&nbsp;<a href="https://nypost.com/2024/03/05/business/google-engineer-accuses-company-exec-of-powering-genocide-over-israel-ties/">“No Tech for Genocide Day of Action.”</a></p>



<figure><div><p><a href="#" aria-controls="nyp-slideshow-modal" data-slideshow-modal="trigger" title="Open a slideshow of all 6 article images." aria-label="Open a slideshow of all 6 article images." data-slideshow-slide-number="1" data-slideshow-slides-total="6"><img decoding="async" fetchpriority="high" width="787" height="590" src="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?w=1024" alt="A large group of Google employees hold signs protesting their company's participation in &quot;Project Nimbus.&quot;" srcset="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?quality=75&amp;strip=all 1600w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=300,225&amp;quality=75&amp;strip=all 300w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=768,576&amp;quality=75&amp;strip=all 768w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=1024,768&amp;quality=75&amp;strip=all 1024w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=1536,1152&amp;quality=75&amp;strip=all 1536w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=945,709&amp;quality=75&amp;strip=all 945w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=333,250&amp;quality=75&amp;strip=all 333w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=785,589&amp;quality=75&amp;strip=all 785w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=661,496&amp;quality=75&amp;strip=all 661w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=120,90&amp;quality=75&amp;strip=all 120w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=576,432&amp;quality=75&amp;strip=all 576w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=440,330&amp;quality=75&amp;strip=all 440w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=376,282&amp;quality=75&amp;strip=all 376w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=180,135&amp;quality=75&amp;strip=all 180w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=124,93&amp;quality=75&amp;strip=all 124w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=95,71&amp;quality=75&amp;strip=all 95w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=200,150&amp;quality=75&amp;strip=all 200w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=231,173&amp;quality=75&amp;strip=all 231w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=322,242&amp;quality=75&amp;strip=all 322w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=77,58&amp;quality=75&amp;strip=all 77w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=208,156&amp;quality=75&amp;strip=all 208w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=150,113&amp;quality=75&amp;strip=all 150w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80168863.jpg?resize=50,38&amp;quality=75&amp;strip=all 50w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p></div><figcaption>A large group of Google employees hold signs protesting their company’s participation in “Project Nimbus.” <span>X/@NoTechApartheid</span></figcaption></figure>



<p>“Behavior like this has no place in our workplace and we will not tolerate it,” Rackow wrote. “It clearly violates multiple policies that all employees must adhere to – including our&nbsp;code of conduct&nbsp;and&nbsp;policy on harassment, discrimination, retaliation, standards of conduct, and workplace concerns.”</p>



<p>Rackow added that the company “takes this extremely seriously, and we will continue to apply our longstanding policies to take action against disruptive behavior – up to and including termination.”</p>


		
		


<p>The fired staffers are affiliated with a group called No Tech For Apartheid, which has been critical of Google’s response to the Israel-Hamas war. </p>



<p>The group had posted several videos and livestreams of the protests on its X account — including the exact moment that employees were issued final warnings and arrested by local police for trespassing.</p>



<p>The protesters have demanded that Google pull out of a $1.2 billion “Project Nimbus” contract — in which Google Cloud and Amazon Web Services provide cloud-computing and artificial intelligence services for the Israeli government and military.</p>



<figure><div><p><a href="#" aria-controls="nyp-slideshow-modal" data-slideshow-modal="trigger" title="Open a slideshow of all 6 article images." aria-label="Open a slideshow of all 6 article images." data-slideshow-slide-number="2" data-slideshow-slides-total="6"><img decoding="async" loading="lazy" width="989" height="590" src="https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?w=1024" alt="Protester pictured wearing a har that says &quot;You are on Native land&quot; " srcset="https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?quality=75&amp;strip=all 1044w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=300,179&amp;quality=75&amp;strip=all 300w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=768,458&amp;quality=75&amp;strip=all 768w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=1024,611&amp;quality=75&amp;strip=all 1024w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=419,250&amp;quality=75&amp;strip=all 419w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=878,524&amp;quality=75&amp;strip=all 878w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=744,444&amp;quality=75&amp;strip=all 744w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=151,90&amp;quality=75&amp;strip=all 151w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=576,344&amp;quality=75&amp;strip=all 576w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=440,263&amp;quality=75&amp;strip=all 440w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=424,253&amp;quality=75&amp;strip=all 424w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=180,107&amp;quality=75&amp;strip=all 180w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=140,84&amp;quality=75&amp;strip=all 140w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=107,64&amp;quality=75&amp;strip=all 107w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=200,119&amp;quality=75&amp;strip=all 200w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=231,138&amp;quality=75&amp;strip=all 231w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=322,192&amp;quality=75&amp;strip=all 322w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=87,52&amp;quality=75&amp;strip=all 87w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=234,140&amp;quality=75&amp;strip=all 234w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=150,90&amp;quality=75&amp;strip=all 150w, https://nypost.com/wp-content/uploads/sites/2/2024/04/protester-pictured-wearing-har-says-80167973_05525c.jpg?resize=50,30&amp;quality=75&amp;strip=all 50w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p></div><figcaption>The unruly staffers were terminated late Wednesday. <span>Twitch/notech4apartheid</span></figcaption></figure>



<p>Critics at the company raised concerns that the technology would be weaponized against Palestinians in Gaza.</p>



<p>The impacted workers blasted Google over the firings in a statement shared by No Tech For Apartheid spokesperson Jane Chung.</p>



<p>“This evening, Google indiscriminately fired 28 workers, including those among us who did not directly participate in yesterday’s historic, bicoastal 10-hour sit-in protests,” the workers said in the statement.</p>



<p>“This flagrant act of retaliation is a clear indication that Google values its $1.2 billion contract with the genocidal Israeli government and military more than its own workers — the ones who create real value for executives and shareholders.”</p>



<figure><div><p><a href="#" aria-controls="nyp-slideshow-modal" data-slideshow-modal="trigger" title="Open a slideshow of all 6 article images." aria-label="Open a slideshow of all 6 article images." data-slideshow-slide-number="3" data-slideshow-slides-total="6"><img decoding="async" loading="lazy" width="1024" height="574" src="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?w=1024" alt="Possibly inside Thomas Kurian's office " srcset="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?quality=75&amp;strip=all 1971w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=300,168&amp;quality=75&amp;strip=all 300w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=768,430&amp;quality=75&amp;strip=all 768w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=1024,574&amp;quality=75&amp;strip=all 1024w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=1536,860&amp;quality=75&amp;strip=all 1536w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=1064,596&amp;quality=75&amp;strip=all 1064w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=446,250&amp;quality=75&amp;strip=all 446w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=878,492&amp;quality=75&amp;strip=all 878w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=744,417&amp;quality=75&amp;strip=all 744w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=161,90&amp;quality=75&amp;strip=all 161w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=576,323&amp;quality=75&amp;strip=all 576w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=440,246&amp;quality=75&amp;strip=all 440w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=424,237&amp;quality=75&amp;strip=all 424w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=180,101&amp;quality=75&amp;strip=all 180w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=140,78&amp;quality=75&amp;strip=all 140w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=107,60&amp;quality=75&amp;strip=all 107w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=200,112&amp;quality=75&amp;strip=all 200w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=231,129&amp;quality=75&amp;strip=all 231w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=322,180&amp;quality=75&amp;strip=all 322w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=87,49&amp;quality=75&amp;strip=all 87w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=234,131&amp;quality=75&amp;strip=all 234w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=150,84&amp;quality=75&amp;strip=all 150w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167355_aae76b.jpg?resize=50,28&amp;quality=75&amp;strip=all 50w" sizes="(max-width: 1024px) 100vw, 1024px"></a></p></div><figcaption>Some donned traditional Arab headscarves as they stormed and occupied the office of a top executive in California. <span>Twitch/notech4apartheid</span></figcaption></figure>



<p>“Sundar Pichai and Thomas Kurian are genocide profiteers,” the statement added, referring to Google’s CEO and the CEO of its cloud unit, respectively. </p>



<p>“We cannot comprehend how these men are able to sleep at night while their tech has enabled 100,000 Palestinians killed, reported missing, or wounded in the last six months of Israel’s genocide — and counting.”</p>



<div>
			
			<div>
				<h3>
					Start your day with the latest business news right at your fingertips				</h3>
				<p>
					Subscribe to our daily Business Report newsletter!				</p>
			</div>
			<p>
				<h3>
					Thanks for signing up!				</h3>
			</p>
		</div>



<p>An NYPD spokesperson said the Tuesday protest “involved approximately 50 participants” in total and confirmed “four arrests were made for trespassing inside the Google building.”</p>



<p>The Sunnyvale Department of Public Safety said the protest in California “consisted of around 80 participants.”&nbsp;A total of five protesters who refused to leave the Google office were “arrested without incident for criminal trespassing,” booked and released, a spokesperson added.</p>



<p>It couldn’t immediately be learned if all nine arrested employees were among those who were fired. Google had earlier placed the employees on administrative leave and cut their access to internal systems.</p>



<figure><div><p><a href="#" aria-controls="nyp-slideshow-modal" data-slideshow-modal="trigger" title="Open a slideshow of all 6 article images." aria-label="Open a slideshow of all 6 article images." data-slideshow-slide-number="4" data-slideshow-slides-total="6"><img decoding="async" loading="lazy" width="437" height="590" src="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?w=759" alt="Possibly inside Thomas Kurian's office " srcset="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?quality=75&amp;strip=all 999w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=222,300&amp;quality=75&amp;strip=all 222w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=768,1036&amp;quality=75&amp;strip=all 768w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=759,1024&amp;quality=75&amp;strip=all 759w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=525,709&amp;quality=75&amp;strip=all 525w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=185,250&amp;quality=75&amp;strip=all 185w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=437,589&amp;quality=75&amp;strip=all 437w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=368,496&amp;quality=75&amp;strip=all 368w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=67,90&amp;quality=75&amp;strip=all 67w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=477,644&amp;quality=75&amp;strip=all 477w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=364,491&amp;quality=75&amp;strip=all 364w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=209,282&amp;quality=75&amp;strip=all 209w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=300,405&amp;quality=75&amp;strip=all 300w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=153,206&amp;quality=75&amp;strip=all 153w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=69,93&amp;quality=75&amp;strip=all 69w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=53,71&amp;quality=75&amp;strip=all 53w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=148,200&amp;quality=75&amp;strip=all 148w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=231,312&amp;quality=75&amp;strip=all 231w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=322,434&amp;quality=75&amp;strip=all 322w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=43,58&amp;quality=75&amp;strip=all 43w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=116,156&amp;quality=75&amp;strip=all 116w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=150,202&amp;quality=75&amp;strip=all 150w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167211_935306.jpg?resize=37,50&amp;quality=75&amp;strip=all 37w" sizes="(max-width: 759px) 100vw, 759px"></a></p></div><figcaption>When reached for comment, a Google spokesperson confirmed the firings. <span>X/@NoTechApartheid</span></figcaption></figure>



<p>Last month,&nbsp;<a href="https://nypost.com/2024/03/08/business/google-fires-engineer-who-claimed-company-powering-genocide/">Google fired a software engineer</a>&nbsp;who publicly blasted one of the company’s Israel-based executives during a tech conference in New York City.</p>



<p>When reached for comment, a Google spokesperson confirmed the firings.</p>



<p>“These protests were part of a longstanding campaign by a group of organizations and people who largely don’t work at Google,” the spokesperson said in a statement. </p>



<figure><div><p><a href="#" aria-controls="nyp-slideshow-modal" data-slideshow-modal="trigger" title="Open a slideshow of all 6 article images." aria-label="Open a slideshow of all 6 article images." data-slideshow-slide-number="5" data-slideshow-slides-total="6"><img decoding="async" loading="lazy" width="443" height="590" src="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?w=768" alt="Possibly inside Thomas Kurian's office " srcset="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?quality=75&amp;strip=all 1536w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=225,300&amp;quality=75&amp;strip=all 225w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=768,1024&amp;quality=75&amp;strip=all 768w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=1152,1536&amp;quality=75&amp;strip=all 1152w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=532,709&amp;quality=75&amp;strip=all 532w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=188,250&amp;quality=75&amp;strip=all 188w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=442,589&amp;quality=75&amp;strip=all 442w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=372,496&amp;quality=75&amp;strip=all 372w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=68,90&amp;quality=75&amp;strip=all 68w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=483,644&amp;quality=75&amp;strip=all 483w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=368,491&amp;quality=75&amp;strip=all 368w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=212,282&amp;quality=75&amp;strip=all 212w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=300,400&amp;quality=75&amp;strip=all 300w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=155,206&amp;quality=75&amp;strip=all 155w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=70,93&amp;quality=75&amp;strip=all 70w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=53,71&amp;quality=75&amp;strip=all 53w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=150,200&amp;quality=75&amp;strip=all 150w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=231,308&amp;quality=75&amp;strip=all 231w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=322,429&amp;quality=75&amp;strip=all 322w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=44,58&amp;quality=75&amp;strip=all 44w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=117,156&amp;quality=75&amp;strip=all 117w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=640,853&amp;quality=75&amp;strip=all 640w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167203_698d91.jpg?resize=38,50&amp;quality=75&amp;strip=all 38w" sizes="(max-width: 768px) 100vw, 768px"></a></p></div><figcaption>“These protests were part of a longstanding campaign by a group of organizations and people who largely don’t work at Google,” the spokesperson said in a statement. <span>X/@NoTechApartheid</span></figcaption></figure>



<p>“A small number of employee protesters entered and disrupted a few of our locations. Physically impeding other employees’ work and preventing them from accessing our facilities is a clear violation of our policies, and completely unacceptable behavior.”</p>



<p>“We have so far concluded individual investigations that resulted in the termination of employment for 28 employees, and will continue to investigate and take action as needed,” the spokesperson added.</p>



<p>The demonstrators stormed the personal office of Google Cloud CEO Thomas Kurian in Sunnyvale.</p>



<p>Kurian’s custom-made, framed Golden State Warriors jersey was visible on the office wall in the background of the livestream, and employees wrote a list of their demands on his white board.</p>



<figure><div><p><a href="#" aria-controls="nyp-slideshow-modal" data-slideshow-modal="trigger" title="Open a slideshow of all 6 article images." aria-label="Open a slideshow of all 6 article images." data-slideshow-slide-number="6" data-slideshow-slides-total="6"><img decoding="async" loading="lazy" width="444" height="590" src="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?w=771" alt="Possibly inside Thomas Kurian's office " srcset="https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?quality=75&amp;strip=all 1542w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=226,300&amp;quality=75&amp;strip=all 226w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=768,1020&amp;quality=75&amp;strip=all 768w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=771,1024&amp;quality=75&amp;strip=all 771w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=1157,1536&amp;quality=75&amp;strip=all 1157w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=534,709&amp;quality=75&amp;strip=all 534w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=188,250&amp;quality=75&amp;strip=all 188w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=443,589&amp;quality=75&amp;strip=all 443w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=373,496&amp;quality=75&amp;strip=all 373w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=68,90&amp;quality=75&amp;strip=all 68w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=485,644&amp;quality=75&amp;strip=all 485w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=370,491&amp;quality=75&amp;strip=all 370w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=212,282&amp;quality=75&amp;strip=all 212w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=300,398&amp;quality=75&amp;strip=all 300w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=155,206&amp;quality=75&amp;strip=all 155w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=70,93&amp;quality=75&amp;strip=all 70w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=53,71&amp;quality=75&amp;strip=all 53w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=151,200&amp;quality=75&amp;strip=all 151w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=231,307&amp;quality=75&amp;strip=all 231w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=322,428&amp;quality=75&amp;strip=all 322w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=44,58&amp;quality=75&amp;strip=all 44w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=117,156&amp;quality=75&amp;strip=all 117w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=150,199&amp;quality=75&amp;strip=all 150w, https://nypost.com/wp-content/uploads/sites/2/2024/04/possibly-inside-thomas-kurians-office-80167204_f8dd20.jpg?resize=38,50&amp;quality=75&amp;strip=all 38w" sizes="(max-width: 771px) 100vw, 771px"></a></p></div><figcaption>Critics at the company raised concerns that the technology would be weaponized against Palestinians in Gaza. <span>X/@NoTechApartheid</span></figcaption></figure>



<p>The companywide memo can be read in its entirety below.</p>



<p><em>Googlers,</em></p>



<p><em>You may have seen reports of protests at some of our offices yesterday. Unfortunately, a number of employees brought the event into our buildings in New York and Sunnyvale. They took over office spaces, defaced our property, and physically impeded the work of other Googlers. Their behavior was unacceptable, extremely disruptive, and made co-workers feel threatened. We placed employees involved under investigation and cut their access to our systems. Those who refused to leave were arrested by law enforcement and removed from our offices.&nbsp;</em></p>



<p><em>Following investigation, today we terminated the employment of twenty-eight employees found to be involved.&nbsp;We will continue to investigate and take action as needed.</em></p>



<p><em>Behavior like this has no place in our workplace and we will not tolerate it. It clearly violates multiple policies that all employees must adhere to – including our&nbsp;Code of Conduct&nbsp;and&nbsp;Policy on Harassment, Discrimination, Retaliation, Standards of Conduct, and Workplace Concerns.</em></p>







<p><em>We are a place of business and every Googler is expected to read our policies and apply them to how they conduct themselves and communicate in our workplace. The overwhelming majority of our employees do the right thing. If you’re one of the few who are tempted to think we’re going to overlook conduct that violates our policies, think again. The company takes this extremely seriously, and we will continue to apply our longstanding policies to take action against disruptive behavior – up to and including termination.&nbsp;</em></p>



<p><em>You should expect to hear more from leaders about standards of behavior and discourse in the workplace.</em></p>



<p><em>Chris</em></p>
						</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Goldene: A single atom layer of gold (195 pts)]]></title>
            <link>https://liu.se/en/news-item/ett-atomlager-guld-liu-forskare-skapar-gulden</link>
            <guid>40071956</guid>
            <pubDate>Thu, 18 Apr 2024 01:09:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://liu.se/en/news-item/ett-atomlager-guld-liu-forskare-skapar-gulden">https://liu.se/en/news-item/ett-atomlager-guld-liu-forskare-skapar-gulden</a>, See on <a href="https://news.ycombinator.com/item?id=40071956">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
                <header>
                    <p>16 April 2024</p>

                        
                </header>
                <p>
                    For the first time, scientists have managed to create sheets of gold only a single atom layer thick. The material has been termed goldene. According to researchers from Linköping University, Sweden, this has given the gold new properties that can make it suitable for use in applications such as carbon dioxide conversion, hydrogen production, and production of value-added chemicals.
                </p>
                    <figure>
                        <img src="https://liu.se/dfsmedia/dd35e243dfb7406993c1815aaf88a675/83338-50063/lars-hultman-och-shun-kashiwaya-20240223-19" alt="Two researchers in a lab.">
                            <figcaption>
                                    <span>Together with colleagues researchers Lars Hultman and Shun Kashiwaya have created goldene.</span>
                                                                                                    <span>Olov Planthaber</span>
                            </figcaption>
                    </figure>
                


                <div data-component="textfade">
                        <p>Scientists have long tried to make single-atom-thick sheets of gold but failed because the metal’s tendency to lump together. But researchers from Linköping University have now succeeded thanks to a hundred-year-old method used by Japanese smiths.</p>
<p>“If you make a material extremely thin, something extraordinary happens – as with graphene. The same thing happens with gold. As you know, gold is usually a metal, but if single-atom-layer thick, the gold can become a semiconductor instead,” says Shun Kashiwaya, researcher at the Materials Design Division at Linköping University.</p>
<h2>3D base material</h2>
<p>To create goldene, the researchers used a three-dimensional base material where gold is embedded between layers of titanium and carbon. But coming up with goldene proved to be a challenge. According to Lars Hultman, professor of thin film physics at Linköping University, part of the progress is due to serendipidy.</p>
<figure><img src="https://liu.se/dfsmedia/dd35e243dfb7406993c1815aaf88a675/83341-50063/lars-hultman-20240223-16" alt="Researcher holds small disc with tweezers close to face."><figcaption><span>Lars Hultman, professor of thin film physics at the Department of physics, chemistry and biology (IFM).</span><span aria-label="Photo credit">Olov Planthaber</span> </figcaption></figure>
<p>“We had created the base material with completely different applications in mind. We started with an electrically conductive ceramics called titanium silicon carbide, where silicon is in thin layers. Then the idea was to coat the material with gold to make a contact. But when we exposed the component to high temperature, the silicon layer was replaced by gold inside the base material,” says Lars Hultman.</p>
<p>This phenomenon is called intercalation and what the researchers had discovered was titanium gold carbide. For several years, the researchers have had titanium gold carbide without knowing how the gold can be exfoliated or panned out, so to speak.</p>
<h2>Japanese forging art</h2>
<p>By chance, Lars Hultman found a method that has been used in Japanese forging art for over a hundred years. It is called Murakami’s reagent, which etches away carbon residue and changes the colour of steel in knife making, for example. But it was not possible to use the exact same recipe as the smiths did. Shun Kashiwaya had to look at modifications:</p>
<figure><img src="https://liu.se/dfsmedia/dd35e243dfb7406993c1815aaf88a675/83345-50063/shun-kashiwaya-20240223-9" alt="Researcher in lab."><figcaption><span>Shun Kashiwaya, researcher at IFM.</span><span aria-label="Photo credit">Olov Planthaber</span> </figcaption></figure>
<p>“I tried different concentrations of Murakami’s reagent and different time spans for etching. One day, one week, one month, several months. What we noticed was that the lower the concentration and the longer the etching process, the better. But it still wasn’t enough,” he says.</p>
<p>The etching must also be carried out in the dark as cyanide develops in the reaction when it is struck by light, and it dissolves gold. The last step was to get the gold sheets stable. To prevent the exposed two-dimensional sheets from curling up, a surfactant was added. In this case, a long molecule that separates and stabilises the sheets, i.e. a tenside.</p>
<p>“The goldene sheets are in a solution, a bit like cornflakes in milk. Using a type of “sieve”, we can collect the gold and examine it using an electron microscope to confirm that we have succeeded. Which we have,” says Shun Kashiwaya.</p>
<h2>Many possible applications</h2>
<p>The new properties of goldene are due to the fact that the gold has two free bonds when two-dimensional. Thanks to this, future applications could include carbon dioxide conversion, hydrogen-generating catalysis, selective production of value-added chemicals, hydrogen production, water purification, communication, and much more.</p>
<figure><img src="https://liu.se/dfsmedia/dd35e243dfb7406993c1815aaf88a675/83344-50063/lars-hultman-och-shun-kashiwaya-20240223-21" alt="Researchers pour liquid into a beaker."><figcaption><span>To create goldene, the researchers used a three-dimensional base material where gold is embedded between layers of titanium and carbon.</span><span aria-label="Photo credit">Olov Planthaber</span> </figcaption></figure><p> Moreover, the amount of gold used in applications today can be much reduced.
</p><p>The next step for the LiU researchers is to investigate whether it is possible to do the same with other noble metals and identify additional future applications.</p>
<p>The research was funded by the Swedish Research Council, the Swedish Government Strategic Research Area in Materials Science (AFM) at Linköping University, the Knut and Alice Wallenberg Foundation, the Åforsk Foundation, the Olle Enqvist Foundation, the Carl Trygger Foundation, the Göran Gustafsson Foundations, MIRAI 2.0, the Swedish National Infrastructure for Computing (SNIC), and the National Academic Infrastructure for Supercomputing in Sweden (NAISS).</p>
<p><strong>Article:</strong> <a rel="noopener noreferrer" href="https://www.nature.com/articles/s44160-024-00518-4" target="_blank">Synthesis of goldene comprising single-atom layer gold</a>,&nbsp;Shun Kashiwaya, Yuchen Shi, Jun Lu, Davide G. Sangiovanni, Grzegorz Greczynski, Martin Magnuson, Mike Andersson, Johanna Rosen, and Lars Hultman; <em>Nature Synthesis</em>, published online 16 April 2024, DOI: 10.1038/s44160-024-00518-4</p>
<figure><img src="https://liu.se/dfsmedia/dd35e243dfb7406993c1815aaf88a675/83342-50063/lars-hultman-och-shun-kashiwaya-20240223-17" alt="Two researchers in a lab."><figcaption><span>LiU-researchers Shun Kashiwaya and Lars Hultman have succeeded in creating goldene thanks to a hundred-year-old method used by Japanese smiths.</span><span aria-label="Photo credit">Olov Planthaber</span> </figcaption></figure><br>
                    </div>
                
            </section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Implementing Natural Conversational Agents with Elixir (166 pts)]]></title>
            <link>https://seanmoriarity.com/2024/02/25/implementing-natural-conversational-agents-with-elixir/</link>
            <guid>40071843</guid>
            <pubDate>Thu, 18 Apr 2024 00:53:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://seanmoriarity.com/2024/02/25/implementing-natural-conversational-agents-with-elixir/">https://seanmoriarity.com/2024/02/25/implementing-natural-conversational-agents-with-elixir/</a>, See on <a href="https://news.ycombinator.com/item?id=40071843">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		
<p>In <a href="https://seanmoriarity.com/2024/02/25/nero-part-1-home-automations/">my last post</a>, I discussed some work I had done building Nero, the assistant of the future that I’ve always wanted. I ended up creating an end-to-end example which used Nx, OpenAI APIs, and ElevenLabs to create an in-browser home automation assistant. For a first product, it’s decent. Nero is a neat little party trick that I can use to impress my non-tech friends. I am, however, not in this business to impress my friends. I want Nero to <em>actually help me</em> and <em>actually feel like an assistant</em>. My previous version is not that.</p>



<p>One missing piece is the ability to converse naturally without browser interaction. The first implementation of Nero’s “conversational” abilities relied on user interaction with the screen every time we wanted to initiate a response or action. Nero also did not retain any conversational history. In short, Nero was not a great conversational assistant. It was one of the things I wanted to fix; however, I was motivated to do it sooner rather than later after watching <a href="https://beta.retellai.com/home-agent">an impressive demo from Retell</a>.</p>



<p>The Retell demo implements a conversational agent backed by their WebSocket API in a browser. The demonstration has:</p>



<ul>
<li>“Always on” recording</li>



<li>Low latency</li>



<li>Support for interrupts</li>



<li>Impressive filtering (e.g. snapping and other non-voice activity doesn’t seem to throw off the agent)</li>
</ul>



<p>Their documentation suggests they also have support for <a href="https://www.cs.utep.edu/nigel/bc/#:~:text=What%20is%20a%20Backchannel%3F,utterances%20such%20as%20uh%2Dhuh.">backchanneling</a> and intelligent end of turn detection—two things that are essential to natural conversational feel but which are very difficult to express programmatically.</p>



<p>I had previously convinced myself that I could implement a passable conversational agent experience in a short amount of time. So that is what I set out to do.</p>



<h2>Always On Recording</h2>



<p>The first thing that needed to change about Nero’s design was the speech to text pipeline. My original demonstration relied on an <a href="https://github.com/elixir-nx/bumblebee/blob/main/examples/phoenix/speech_to_text.exs">example from Bumblebee</a> which implemented a speech to text pipeline using Whisper. The pipeline uses mouse events in a <a href="https://hexdocs.pm/phoenix_live_view/js-interop.html#client-hooks-via-phx-hook">Phoenix LiveView Hook</a> to start and stop recordings before sending them to the server to initiate transcription. If you’re not familiar, <a href="https://hexdocs.pm/phoenix_live_view/Phoenix.LiveView.html">Phoenix LiveView</a> is a server-side rendering framework built on top of Elixir. LiveView has support for client-side JavaScript hooks which support bidirectional communication between client and server.</p>



<p>The original speech to text implementation used a hook with an event listener attached to <code>mousedown</code> and <code>mouseup</code> on a button to start and stop recording. After recording stops, the hook decodes the recorded buffer into a PCM buffer, converts the endianness, and then pushes the buffer to the server with an upload. The original hook implements most of the functionality we want; however, we need to make some minor tweaks. Rather than trigger recordings to stop and start on mouse events, we want to trigger recordings to start and stop exactly when a person starts and stops speaking. Simple, right?</p>



<p>My first idea in implementing what I called “always on recording” was to monitor the microphone’s volume, and trigger a recording when the volume reached a certain threshold. The recording would stop when the volume dipped below that threshold. At this point, I learned about <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia">getUserMedia</a>. <code>getUserMedia</code> prompts the user for permission to access media devices such as a microphone and/or webcam, and then produces a <code>MediaStream</code>. A <code>MediaStream</code> is a stream of media content containing information about audio and video tracks in the stream. We can use data from the <code>MediaStream</code> to determine speaker activity and thus trigger recordings.</p>



<p>To determine the volume for a given sample, we can use an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode">AnalyserNode</a>. Per the documentation <code>AnyalyserNode</code> is designed for processing generated audio data for visualization purposes, but we can use it to determine spikes in audio:</p>


<div><pre title="">navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) =&gt; {
  this.stream = stream;
  const analyser = this.audioContext.createAnalyser();
  const microphone = this.audioContext.createMediaStreamSource(this.stream);

  microphone.connect(analyser);

  analyser.fftSize = 512;
  const bufferLength = analyser.frequencyBinCount;
  const dataArray = new Uint8Array(bufferLength);

  const checkAudio = () =&gt; {
    analyser.getByteTimeDomainData(dataArray);

    let sum = 0;
    for (let i = 0; i &lt; bufferLength; i++) {
      sum += (dataArray[i] - 128) * (dataArray[i] - 128);
    }
    const volume = Math.sqrt(sum / bufferLength);

    if (volume &gt; VOLUME_THRESHOLD &amp;&amp; !this.isRecording) {
      this.startRecording();
    } else if (this.isRecording()) {
      this.stopRecording();
    }

    if (this.isMonitoring) {
      requestAnimationFrame(checkAudio);
    }
  }

  checkAudio();
})
</pre></div>


<p>This uses an analyser and repeatedly checks if the volume of the microphone at a given frame exceeds the given <code>VOLUME_THRESHOLD</code>. If it does, it checks to see if we are recording and if not, starts the recording.</p>



<p>After testing a bit, I realized this implementation sucked. Of the many issues with this approach, the biggest is that there are many natural dips in a person’s volume. Checking a single frame doesn’t account for these natural dips. To fix this, I thought it would be a good idea to introduce a timeout which only stopped recording after the volume was below a threshold for a certain amount of time:</p>


<div><pre title="">navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) =&gt; {
  this.stream = stream;
  const analyser = this.audioContext.createAnalyser();
  const microphone = this.audioContext.createMediaStreamSource(this.stream);

  microphone.connect(analyser);

  analyser.fftSize = 512;
  const bufferLength = analyser.frequencyBinCount;
  const dataArray = new Uint8Array(bufferLength);

  this.silenceTimeout = null;

  const checkAudio = () =&gt; {
    analyser.getByteTimeDomainData(dataArray);

    let sum = 0;
    for (let i = 0; i &lt; bufferLength; i++) {
      sum += (dataArray[i] - 128) * (dataArray[i] - 128);
    }
    const volume = Math.sqrt(sum / bufferLength);

    if (volume &gt; VOLUME_THRESHOLD) {
      if (!this.isRecording()) {
        this.startRecording();
      }
      
      clearTimeout(this.silenceTimeout);

      this.silenceTimeout = setTimeout(() =&gt; {
        if (this.isRecording()) {
          this.stopRecording();
        }
      }, SILENCE_TIMEOUT);
    }

    if (this.isMonitoring) {
      requestAnimationFrame(checkAudio);
    }
  }

  checkAudio();
})
</pre></div>


<p>This actually ended up working decent, but required tuning hyperparameters for both <code>VOLUME_THRESHOLD</code> and <code>SILENCE_TIMEOUT</code>. The challenge here is that higher <code>SILENCE_TIMEOUT</code> introduces additionally latency in transition time between a speaker and Nero; however, lower timeouts might be too sensitive to speakers with slower and quieter speaking rhythms. Additionally, a static <code>VOLUME_THRESHOLD</code> does not account for ambient noise. Now, despite these shortcomings, I found I was able to passably detect a single speaker in a quiet room.</p>



<p>After hooking this up to my existing LiveView and trying some end-to-end conversations, I realized something was significantly off. The transcriptions I was getting were off. I soon realized that they were always off at the beginning of a transcription. Shorter audio sequences were especially affected. It turns out that the detection algorithm always resulted in some amount of truncation at the beginning of an audio clip. When a speaker starts talking, their volume ramps up – it’s not an instantaneous spike. To account for this, I introduced a pre-recording buffer which always tracked the previous 150ms of audio. After recording started, I would stop the pre-recording buffer and start the actual recording, and then eventually splice these 2 together to send to the server for transcription.</p>



<p>Overall, this <em>actually</em> worked okay. While there are some obvious failure modes, it worked well enough to get a passable demonstration. If you can’t tell by now, I am not an audio engineer. I learned later that this is a very naive attempt at <a href="https://en.wikipedia.org/wiki/Voice_activity_detection">voice activity detection</a>. Later on in this post, I’ll run through some of the improvements I made based on my research into the field of VAD.</p>



<h2>End-to-End Implementation</h2>



<p>The demonstration I built for Nero in my <a href="https://seanmoriarity.com/2024/02/25/nero-part-1-home-automations/">first post</a> already contained the scaffolding for an end-to-end transcription -&gt; response -&gt; speech pipeline. I only needed to make some slight modifications to get the phone call demo to work. The end-to-end the pipeline looks like this:</p>



<p>When our algorithm detects that speech has stopped, it invokes the <code>stopRecording</code> method. <code>stopRecording</code> takes the recorded audio, does some client-side pre-processing, and uploads it to the server. The server consumes the uploaded entry as a part of <a href="https://hexdocs.pm/phoenix_live_view/uploads.html">LiveView’s normal uploads lifecycle</a> and then invokes an <a href="https://hexdocs.pm/phoenix_live_view/Phoenix.LiveView.html#module-arbitrary-async-operations">async task</a> to start transcription:</p>


<div><pre title="">  defp handle_progress(:audio, entry, socket) when entry.done? do
    binary =
      consume_uploaded_entry(socket, entry, fn %{path: path} -&gt;
        {:ok, File.read!(path)}
      end)

    audio = Nx.from_binary(binary, :f32)

    socket =
      start_async(socket, :transcription, fn -&gt;
        Nero.SpeechToText.transcribe(audio)
      end)

    {:noreply, socket}
  end
</pre></div>


<p>Note that because we did most of the pre-processing client-side, we can just consume the audio binary as an <code>Nx.Tensor</code>, without any additional work. The <code>SpeechToText</code> module implements transcription using <a href="https://hexdocs.pm/nx/Nx.Serving.html">Nx.Serving</a>:</p>


<div><pre title="">defmodule Nero.SpeechToText do
  @repo "distil-whisper/distil-medium.en"

  def serving() do
    {:ok, model_info} = Bumblebee.load_model({:hf, @repo})

    {:ok, featurizer} = Bumblebee.load_featurizer({:hf, @repo})
    {:ok, tokenizer} = Bumblebee.load_tokenizer({:hf, @repo})
    {:ok, generation_config} = Bumblebee.load_generation_config({:hf, @repo})

    Bumblebee.Audio.speech_to_text_whisper(model_info, featurizer, tokenizer, generation_config,
      task: nil,
      compile: [batch_size: 1],
      defn_options: [compiler: EXLA]
    )
  end

  def transcribe(audio) do
    output = Nx.Serving.batched_run(__MODULE__, audio)
    output.chunks |&gt; Enum.map_join(&amp; &amp;1.text) |&gt; String.trim()
  end
end
</pre></div>


<p><code>Nx.Serving</code> is an abstraction in the Elixir Nx ecosystem for serving machine learning models directly in an Elixir application. It implements dynamic batching, encapsulates pre-processing, inference, and post-processing, supports distribution and load-balancing between multiple GPUs natively, and in general is an extremely easy way to serve machine learning models.</p>



<p>After transcription completes, we get an async result we can handle to initiate a response:</p>


<div><pre title="">  def handle_async(:transcription, {:ok, transcription}, socket) do
    chat = socket.assigns.chat ++ [%{role: "user", content: transcription}]
    response = Nero.Agent.respond(chat)

    {:noreply,
     socket
     |&gt; assign(chat: chat)
     |&gt; speak(response)}
  end
</pre></div>


<p>Here <code>Nero.Agent.respond/1</code> returns an Elixir <code>Stream</code> of text. For my original demonstration I just used the Elixir OpenAI library to produce a stream from a GPT-3.5 response:</p>


<div><pre title="">  def respond(chat) do
    prompt = Nero.Prompts.response()

    response_stream =
      OpenAI.chat_completion(
        model: "gpt-3.5-turbo",
        messages: [%{role: "system", content: prompt} | chat],
        max_tokens: 400,
        stream: true
      )

    response_stream
    |&gt; Stream.map(&amp;get_in(&amp;1, ["choices", Access.at(0), "delta", "content"]))
    |&gt; Stream.reject(&amp;is_nil/1)
  end
</pre></div>


<p>The response stream is consumed by <code>speak/2</code>. <code>speak/2</code> implements the text to speech pipeline:</p>


<div><pre title="">  defp speak(socket, text) do
    start_async(socket, :speak, fn -&gt;
      Nero.TextToSpeech.stream(text)
    end)
  end
</pre></div>


<p>Where <code>Nero.TextToSpeech.stream/1</code> uses the <a href="https://elevenlabs.io/docs/api-reference/websockets">ElevenLabs WebSocket API</a> to stream text in and speech out. You can read a bit more about the implementation in my previous post.</p>



<p><code>Nero.TextToSpeech.stream/1</code> returns the consumed response as text so we can append that to the chat history after the <code>:speak</code> task finishes:</p>


<div><pre title="">def handle_async(:speak, {:ok, response}, socket) do
  chat = socket.assigns.chat ++ [%{role: "assistant", content: response}]
  {:noreply, assign(socket, :chat, chat)}
end
</pre></div>


<p>This is basically all of the scaffolding needed for an end-to-end demo, but I wanted to add a few more features. First, I wanted to support “intelligent” hang-ups. Basically, I wanted to be able to detect when a conversation was finished, and stop the recording. To do that, I used <a href="https://github.com/thmsmlr/instructor_ex">Instructor</a>:</p>


<div><pre title="">  def hang_up?(chat) do
    {:ok, %{hang_up: hang_up}} =
      Instructor.chat_completion(
        model: "gpt-3.5-turbo",
        messages: [
          %{
            role: "system",
            content:
              "Decide whether or not to hang up the phone given this transcript. You should hang up after the user says goodbye or that there's nothing else you can help them with. DO NOT HANG UP ON THE USER UNLESS THEY SAY GOODBYE."
          }
          | chat
        ],
        response_model: %{hang_up: :boolean}
      )

    hang_up
  end
</pre></div>


<p>Please ignore my wonderfully engineered prompt. This uses GPT-3.5 to determine whether or not a given conversation has ended. After every one of Nero’s turns, we check the transcript to possibly end the call:</p>


<div><pre title="">  def handle_async(:speak, {:ok, response}, socket) do
    chat = socket.assigns.chat ++ [%{role: "assistant", content: response}]

    socket =
      if Nero.Agent.hang_up?(chat) do
        push_event(socket, "hang_up", %{})
      else
        socket
      end

    {:noreply, assign(socket, :chat, chat)}
  end
</pre></div>


<p>This pushes a <code>hang_up</code> event to the socket:</p>


<div><pre title="">    this.handleEvent('hang_up', () =&gt; {
      hook.pushEvent("toggle_conversation");

      if (this.audioContext) {
        this.audioContext.close();
        this.audioContext = null;
      }

      if (this.isMonitoring) {
        this.stopMonitoring();
      }
    });
</pre></div>


<p>Which stops the recording, and then pushes an event to <code>toggle_conversation</code> back to the server. <code>toggle_conversation</code> implements the start/stop logic from the server:</p>


<div><pre title="">  def handle_event("toggle_conversation", _params, socket) do
    socket =
      if socket.assigns.conversing do
        stop_conversation(socket)
      else
        start_conversation(socket)
      end

    {:noreply, socket}
  end
</pre></div>


<p>Finally, I wanted to implement information extraction from the transcript. Again, I used instructor and defined an extraction schema:</p>


<div><pre title="">  defmodule Appointment do
    use Ecto.Schema

    embedded_schema do
      field :booked, :boolean
      field :date, :string
      field :time, :string
      field :name, :string
      field :phone_number, :string
      field :reason_for_visit, :string
    end
  end
</pre></div>


<p>And used GPT-3.5 with a rough prompt to get the necessary information from the transcript:</p>


<div><pre title="">  def extract_appointment(chat) do
    Instructor.chat_completion(
      model: "gpt-3.5-turbo",
      messages: [
        %{
          role: "system",
          content:
            "Extract appointemnt information from the transcript. If info is missing, leave it blank. If it seems like no appointment was booked, mark booked as false and leave everything else blank. An appointment is not booked if there's no established date."
        }
        | chat
      ],
      response_model: Appointment
    )
  end
</pre></div>


<p>And then anytime a conversation ends, we attempt to retrieve appointment information:</p>


<div><pre title="">defp stop_conversation(socket) do
  case Nero.Agent.extract_appointment(socket.assigns.chat) do
    {:ok, %{booked: true} = appointment} -&gt;
      assign(socket,
        message: "You made an appointment! Details:",
        appointment: appointment,
        conversing: false
      )

    _ -&gt;
      assign(socket,
        message: "Looks like you didn't actually book an appointment. Try again",
        conversing: false
      )
  end
end
</pre></div>


<p>Now this is essentially the exact implementation that produced <a href="https://twitter.com/sean_moriarity/status/1760435005119934862">this demonstration</a>. End-to-end this amounted to a couple of hours of work; however, I already had most of the basic scaffold implemented from my previous work on Nero. In my biased opinion, I think my demo is pretty good, but as others have pointed out Retell’s demo kicks my ass in:</p>



<ul>
<li>Latency</li>



<li>Reliability</li>



<li>Natural sounding voice</li>
</ul>



<p>And so, I set out to improve my implementation – starting with latency.</p>



<h2>Reducing Latency</h2>



<p>Human conversations have extremely tight “time-to-turn.” In-person conversations are especially rapid because we rely on visual as well as audio signals to determine when it’s our time to participate in a conversation. The “average” time-to-turn in a conversation can be as quick as 200ms. That means for a conversational agent to feel realistic, it needs an extremely quick turn around time for “time to first spoken word.”</p>



<p>After posting my original demonstration, I already knew there were some very easy optimizations I could make, so I set out to improve the average latency of my implementation as much as possible in a short amount of time. First, I needed at least some method for determining whether an optimization worked. My rudimentary approach was to use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/now">JavaScript Performance Timers</a> and logging. Basically, I computed a <code>startTime</code> from the exact moment an audio recording stopped and an <code>endTime</code> from the exact moment an audio output started, and then I logged that time to the console.</p>



<p>This is a very unscientific way of doing business. In the future, I’d like to implement a much more involved profiling and benchmarking methodology. For this process though, it worked well enough.</p>



<p>Next, I considered all of the areas that could introduce latency into the pipeline. From the moment a recording stops, these are all of the steps we take:</p>



<ol>
<li>Pre-process recording by converting to PCM buffer, and then converting endianness to match server (if necessary)</li>



<li>Upload buffer to server</li>



<li>Perform speech to text on buffer to produce text</li>



<li>Send text to LLM</li>



<li>Send streamed text to ElevenLabs</li>



<li>Receive streamed audio from ElevenLabs</li>



<li>Broadcast audio to client</li>



<li>Decode audio on client and play</li>
</ol>



<p>That’s a lot of steps that can introduce latency, including potentially 3 (in our case 2 because we own the STT pipeline) network calls.</p>



<p>Next, I wanted to esablish a “baseline” of performance. To demonstrate this iterative process, I did a baseline example on my M3 Mac CPU. Note that this is going to be slow relative to my previous demo because the previous demo runs on a GPU. The baseline performance I got from the original demo running on my mac was <code>4537 ms</code>. 4.5 seconds turn around time. Yikes. Lots of work to do.</p>



<p>To start, I knew that the <code>SILENCE_TIMEOUT</code> used to wait for speech to end was rather long. For the original demo, I used 1000 ms, which basically means a speaker has to stop talking for a full second before we’ll even start the long response process. After some trial and error, I figured 500 ms was a “passable” hyperparameter. After adjusting this down, the latency change was almost exactly correlated to the dip: <code>4079 ms</code>.</p>



<p>I had a hunch that my text to speech pipeline was not efficient. Fortunately, ElevenLabs gives us a nice <a href="https://elevenlabs.io/docs/api-reference/reducing-latency">Latency Guide</a>. The first suggestion is to use their turbo model by specifying <code>eleven_turbo_v2</code>. I set that and we got a slight performance boost: <code>4014 ms</code>.</p>



<p>Next, they suggest adding <code>optimize_streaming_latency</code>. I set the value to <code>3</code> and we get: <code>3791 ms</code>. Their next suggestion is to use a pre-made voice. I actually didn’t realize until much later that I was not using a pre-made voice so I don’t have a comparison for how that change impacted latency.</p>



<p>Now it says to limit closing WebSocket connections. my current implementation opens a connection everytime it speaks – which is not good. Basically every “turn” has to establish a new websocket connection. Additionally, ElevenLabs has a timeout of 20s from when you connect. So you need to send a message at least every 20s. I considered 2 options at this point:</p>



<ol>
<li>Open a global WebSocket connection, or maybe even a pool of connections, and try to keep the connection alive. But that seems really wasteful, and I don’t think is the intended use of their API</li>



<li>Open a WebSocket connection when convo starts. We don’t have to worry about 20s pauses</li>
</ol>



<p>I decided to go with option 2, but I still think there are some drawbacks and considerations for a production system. The implementation I used opens a websocket connection on first “speak” and stores the connection PID as an assign in the LiveView socket. If you have a system with potentially many concurrent users speaking, you run the risk of creating a potentially unbounded number of connections. A more robust solution would probably use connection pools; however, I’m not really worried about traffic or scaling here.</p>



<p>While adding this optimization, I struggled a bit because ElevenLabs would send the first frame back, then cut off. Then I realized that it was waiting to generate becuase it thought I was going to send more frames. So I needed to “flush” the generation after I finished sending my tokens. This also seemed to fix unnatural audio problems I was having. After applying this optimization, our time to first spoken word was slightly lower in the <code>3700 ms</code> range.</p>



<p>After perusing their docs a bit more, I learned that ElevenLabs will send PCM buffers instead of MP3. Web Browser’s have to decode MP3 to PCM, which potentially introduces some overhead. One drawback is that you need to be on the independent creator tier to receive PCM instead of MP3. Now, if you’re wondering if I spent $99 to save some milliseconds for a meaningless demo, the answer is absolutely yes I did.</p>



<p>At this point, I believe I’ve exhausted a lot of the “easy” optimizations for TTS latency. One thing that does bother me about the ElevenLabs Websocket API is that there’s no way to receive binary payloads instead of JSON payloads. This is probably because they send alignment data, but I’m not using the alignment data here. When handling an incoming frame from their API we have to first decode the JSON, and then decode the Base64 encoded audio buffer. I’m not sure what the latency impact is, but I’m sure we could shave <em>some</em> time by avoiding both of these conversions. I also think the Base64 representation results in slightly larger buffers which could impact network latency.</p>



<p>The next area I looked to improve was the speech-to-text pipeline. I am using <code>Nx.Serving</code> specifically for Speech-to-Text. The benefit of this approach is that we can avoid an additional network call just for transcription. Of course, that assumes our transcription pipeline can run fast enough on our own hardware. XLA is notoriously slow on CPUs (it’s getting better). The first “optimization” I did was to switch to my GPU: <code>2050 ms</code></p>



<p>And that right there is a bitter lesson, because it’s the largest performance boost we’re going to get.</p>



<p>Next, I realized the model isn’t using F16, which can introduce some solid speed-ups: <code>1800 ms</code>. Now, there are probably some additional optimizations we could add to Nx and EXLA specifically. For example, we don’t have a flash attention implementation. Of course, XLA does a great job of applying similar optimizations as a baseline, so I’m not sure how much it would help. There’s also <a href="https://github.com/sanchit-gandhi/whisper-jax">fast JAX implementations of Whisper</a> that claim up to 70x speed ups. One issue with a lof of these claimed speed-ups; however, is that they are almost <strong>always</strong> for long audio sequences. GPUs and TPUs do well with large batch sizes and sequence lengths, but not for batch size 1 and short sequence lengths like we care about in this implementation. One day I may go down the performance hole of fast batch size 1 transcription, but today is not that day.</p>



<p>At this point, I had moved on to improving some of the failure modes of my demo. While doing so, I learned much more about audio than I had previously known, and realized that the configuration I used to record audio can significantly improve whisper performance as well. Turns out there’s a <a href="https://dev.to/mxro/optimise-openai-whisper-api-audio-format-sampling-rate-and-quality-29fj">nice guide</a> of somebody discussing parameters that work. Specifically, you should use 16 kHz sample rate for transcriptions. Reducing the sample rate also should reduce network overhead because we have less data, but it could reduce quality of the transcription. Oh well. Additionally, I realized I wasn’t using a pre-made ElevenLabs voice. After introducing both of these optimizations, I was able to achieve <code>1520 ms</code> turn time.</p>



<p>Finally, I realized I was doing all of my benchmarks on a development server. I switched my phoenix environment from <code>dev</code> to <code>prod</code> and got: <code>1375 ms</code>. So, with all of these optimizations we’re sitting at about 1.3s turn around time in a conversation. When conversing, it starts to feel somewhat close to natural. I should also point out that this is also running over Tailscale, so there is about 100 ms ping between my Mac and the server running on my GPU. When I run this locally on my GPU, I can consistently get about <code>1000 ms</code> and sometimes <code>900 ms</code> turn around time. Still, unfortunately, this does not match Retell’s latency. According to them, they are able to achieve <code>800 ms</code> consistently. I have some musings at the end about how this is possible.</p>



<p>I believe the biggest area I could improve the implementation is to use a better VAD implementation that relies on small rolling windows of activity rather than frames. We could probably get away with using 20-30 ms windows, which could theoretically offer a 480 ms latency improvement. I would like to eventually explore this.</p>



<p>In all honesty though, I think that is a significant improvement, and I could <em>probably</em> stop right here and be done with it.</p>



<p>If I were to keep going, I would explore using a local LLM with Nx and Bumblebee. Nx and Bumblebee support LLMs like Mistral and Llama out-of-the box. And our text generation servings support streaming. That means we can possibly eliminate any network latency to OpenAI, and instead run 2 of the 3 models locally. One issue with this is that Nx currently does not have any quantized inference support (it’s coming I promise), so my single 4090 is not sufficient to deploy both Whisper and Mistral. Fortunately, the folks at <a href="https://fly.io/gpu">Fly.io</a> were kind enough to give me access to some 80GB A100s. I will post a demo when I get one deployed 🙂</p>



<p>Maybe one day I will implement StyleTTS2 and see how efficient we can get with an entirely local inference pipeline.</p>



<h2>Improving the Conversational Experience</h2>



<p>Some people pointed out that my original demo did not have the same conversational experience as Retell’s, and they are absolutely right. Aside from latency, mine was prone to failure, picks up system sounds, picks up random noises like keyboard and mouse clicks, and doesn’t do well with ambient noise. They also have support for backchanneling, fillers and interruptions which introduces some element of “realness” when interacting with their agent.</p>



<p>Now I didn’t get around to adding backchannels or fillers, but I was able to make some slight improvements to the VAD algorithm I used, and I added support for interruptions.</p>



<h3>Fixing Some Failure Modes with VAD</h3>



<p>The first failure mode that seems to happen is echo from the system sounds. Nero always records and will start transcribing after audio spikes over a certain threshold. After some digging into the <code>getUserMedia</code> API, I found options for <code>echoCancellation</code>, <code>noiseSuppression</code>, and <code>autoGainControl</code>. This is the same point I realized that I could specify the microphone sample rate for the optimization I could added from the last section. Most of these options are on by default depending on your browser, but I added them explicitly anyway:</p>


<div><pre title="">const audioOptions = {
  sampleRate: SAMPLING_RATE,
  echoCancellation: true,
  noiseSuppression: true,
  autoGainControl: true,
  channelCount: 1,
};

navigator.mediaDevices.getUserMedia({ audio: audioOptions }).then((stream) =&gt; {
  ...
}
</pre></div>


<p>Now that somewhat helped, but Nero still picks up it’s own audio. This probably requires a more sophisticated solution, but I moved on to the next problem.</p>



<p>The second obvious failure mode is the fact that it picks up keyboard clicks, and the silence timeout is hard to tune. My first attempt to fix this was to “ignore” large spikes in audio by “smoothing” the volume at each frame:</p>


<div><pre title="">let sum = 0;
for (let i = 0; i &lt; bufferLength; i++) {
  sum += (dataArray[i] - 128) * (dataArray[i] - 128);
}
const volume = Math.sqrt(sum / bufferLength);
const smoothedVolume = SMOOTHING_ALPHA * volume + (1 - SMOOTHING_ALPHA) * lastSmoothedVolume;

lastSmoothedVolume = smoothedVolume;
</pre></div>


<p>Then, with some advice from <a href="https://twitter.com/polvalente">Paulo Valente</a>, I implemented a biquad filter to with a low and high-pass in order to filter audio to the range of human speech:</p>


<div><pre title="">this.stream = stream;
const analyser = this.audioContext.createAnalyser();
const microphone = this.audioContext.createMediaStreamSource(this.stream);

var highPassFilter = this.audioContext.createBiquadFilter();
highPassFilter.type = 'highpass';
highPassFilter.frequency.value = FILTER_LOWER_BOUND;

var lowPassFilter = this.audioContext.createBiquadFilter();
lowPassFilter.type = 'lowpass';
lowPassFilter.frequency.value = FILTER_UPPER_BOUND;

microphone.connect(highPassFilter);
highPassFilter.connect(lowPassFilter);
lowPassFilter.connect(analyser);
</pre></div>


<p>In practice, both of these solutions actually seemed to work decent, but they could absolutely be better. I know it’s possible to improve the client-side filtering using a rolling-window that looks energy of the speaking frequences relative to energy of an entire sample. But, there are also machine learning models that perform VAD, and have <code>1ms</code> inference times. I realized that it’s probably quicker to just send all of the data over the websocket in chunks, and perform VAD on the server. I’ll discuss that implementation a little later.</p>



<h3>Supporting Interruptions</h3>



<p>Next I wanted to add support for interruptions. In the Retell example, the speaker will cut off mid-speech if it detects that you are speaking. To implement this feature in Nero, I added a <code>pushEvent</code> to the Microphone hook which would push an <code>interrupt</code> event to the server anytime speech is detectected:</p>


<div><pre title="">if (smoothedVolume &gt; VOLUME_THRESHOLD) {
  if (!this.isRecording()) {
    // To handle interrupts, push an event to the LV which will
    // then push an event to the TTS channel. Not sure how much
    // these round trips will lag. Alternatively we could create
    // a global audio context and stop that, but we would need
    // a different way to push alignment info to the server
    this.pushEvent("interrupt");
    this.startRecording();
  }
  ...
}
</pre></div>


<p>The server handles this event and broadcasts an event to the TTS channel to stop speaking:</p>


<div><pre title="">  def handle_event("interrupt", _params, socket) do
    NeroWeb.Endpoint.broadcast_from(
      self(),
      socket.assigns.audio_channel,
      "phx:audio-stop",
      %{}
    )

    {:noreply, socket}
  end
</pre></div>


<p>And the channel handles the event by clearing out the output audio stream and queue:</p>


<div><pre title="">  this.channel.on("phx:audio-stop", () =&gt; {
    if (hook.audioContext.state === 'running') {
      hook.audioContext.suspend().then(() =&gt; {
        if (hook.source) {
          hook.source.onended = null;
          hook.source.stop();
          hook.source = null;
        }
        hook.isPlaying = false;
        hook.audioQueue = [];
      });
    }
  });
</pre></div>


<p>Unfortunately, this does create a race condition. There’s a potential situation where a speaker interrupts and the speaking queue gets cleared on the client, but ElevenLabs is still streaming audio back to the server. The server is always going to just broadcast this info to the client, and as is the client will process it. This potentially creates a situation with weird continutations in the audio. To get around this, I refactored the TTS implementation so that each audio broadcast appends a 6 digit token to the payload. Then, all we need to do is keep the token in sync with the client and server. On the client, when processing the audio queue, it simply checks whether or not the token at the beginning of the payload matches, and if it doesn’t it ignores that sample.</p>



<p>The limitation with this implementation is it does not update the chat transcript. It’s entirely possible because we have access to the alignment information from ElevenLabs, but I just didn’t implement it at this time.</p>



<h3>Time-based Hang Ups</h3>



<p>Another thing the Retell demo has support for is cues and hang ups after a duration of silence. If you are silent for too long, you’ll get a cue from the AI speaker asking you if you’re still there. After another duration of silence, it will hang up. This is something that’s pretty easy to do with LiveView and <code>Process.send_after/4</code>:</p>


<div><pre title="">  defp nudge(socket) do
    nudge_pid = Process.send_after(self(), :nudge, @nudge_ms)
    assign(socket, :nudge_pid, nudge_pid)    
  end
</pre></div>


<p>And then we can cancel the timer anytime we receive a transcription, and restart it after every turn speaking. Note that we can’t depend on the Phoenix <code>speak</code> async task ending as the trigger to send nudges. Instead, we need to push an event from the speaker hook that the audio has ended. This avoids a case where the speaker initiates a really long speech, which overlaps with the <code>nudge_ms</code> duration. Now, we can control the number of nudges with an assign. In my case, I just used a boolean:</p>


<div><pre title="">  def handle_info(:nudge, socket) do
    socket =
      if socket.assigns.nudged? do
        stop_conversation(socket)
      else
        socket
        |&gt; speak(["Are ", "you ", "still ", "there? "])
        |&gt; assign(nudged?: true)
      end

    {:noreply, socket}
  end
</pre></div>


<figure></figure>



<h2>Re-doing the Entire Thing</h2>



<p>Somewhere along the line I realized that my attempts at engineering solid VAD client-side were never going to deliver the experience that I wanted. I discussed with <a href="https://twitter.com/ac_alejos">Andres Alejos</a> a bit, and he found a <a href="https://github.com/snakers4/silero-vad">Silero VAD</a> model which is capable of performing VAD in <code>1ms</code> on a single CPU thread. They also had an ONNX model—and we have a library in the Elixir ecosystem called <a href="https://github.com/elixir-nx/ortex">Ortex</a> which allows us to execute ONNX models.</p>



<p>To accomodate for the new VAD model, I ended up re-implementing the original LiveView I had as a WebSocket. This actually works out well because the WebSocket server is generic, and can be consumed by any language with a WebSocket client. The implementation is also relatively simple, and easily expanded to accomodate for other LLMs, TTS, and STT models. The WebSocket implementation has low latency (when running on a GPU), and supports interrupts.</p>



<p>You can find the <a href="https://github.com/seanmor5/echo">project on my GitHub</a> as well as an <a href="https://github.com/seanmor5/echo_example">example using the server</a>.</p>



<h2>Musings</h2>



<p>The final implementation I ended up with still does not match the quality of the Retell demo. That said, I think it’s a solid start for future work. I believe I acted with some hubris when first posting about this project, and I would like to say that Retell’s work should not be understated. I can appreciate the attention to detail that goes into making an effective conversational agent, and Retell’s demo shows they paid a lot of attention to the details. Kudos to them and their team.</p>



<p>I will also admit that my demo is playing to one benchmark. I’m optimizing the hell out of latency to support a single user—me. I think this solution would change if it needed to accomodate for multiple concurrent users.</p>



<p>Retell’s website claims they have a conversation orchestration model under the hood to manage the complexities of conversation. I had my doubts about that going into this, but I believe it now. Whether or not this model is actually a single model or a series of models for VAD, adding backchannels, etc. I’m not sure. I think eventually it <em>will</em> be a single model, but I’m not sure if it is now, which leads me to my next point.</p>



<h3>Another Bitter Lesson</h3>



<p>While doing all of these optimizations, I could not help but think that it will eventually be all for naught. Not because I don’t think people will find it useful, but because large models trained on lots of data simply seem to always beat engineering effort. I believe the future of this area of work is in joint models. I think the only way to achieve real-time conversations is to merge parts of the stack. I predict in less than a year we will see an incredibly capable joint speech/text model. I recently saw a large audio model called <a href="https://github.com/QwenLM/Qwen-Audio">Qwen-Audio</a> that I believe is similar to what I envision.</p>



<p>Specifically, if somebody were kind enough to give me some money to throw at this problem, here is exactly what I would do:</p>



<ol>
<li>Generate an <a href="https://github.com/tatsu-lab/stanford_alpaca/blob/main/alpaca_data.json">Alpaca-style</a> and/or LLaVA-style dataset of synthetic speech. Note that it would require a bit of pre-processing to change Alpaca inputs to mirror a style compatible with spoken-word. I would use ElevenLabs to generate the dataset in mulitple voices. Of course this dataset would be a bit too “clean,” so we’d need to apply some augmentations which add ambient noise, change speaking pitch and speed, etc. Bonus points: adding samples of “noise” which require no response to merge the VAD part of the pipeline in as well. You can even throw in text prompts that dictate when and when not to respond to support things like <a href="https://picovoice.ai/platform/porcupine/">wake word detection</a> without needing to train a separate model.</li>



<li>Create a LLaVA-style model with a Whisper or equivalent base, an LLM, and a projection layer.</li>



<li>Secure H100s, train model, and “turn H100s into $100s” (thank you <a href="https://twitter.com/thmsmlr?lang=en">@thmsmlr</a>)</li>
</ol>



<p>If you want to give me some $$$, my e-mail is smoriarity.5@gmail.com 🙂</p>



<p>I believe we are also close to just having full-on speech-to-speech models. A specific challenge I can see when creating these models is coming up with a high-quality dataset. I think if you make a deliberate attempt at “recording conversations” for the purposes of training, you will actually probably end up with a lower-quality dataset. People tend to change their behavior under observation. Additionally, conversations from movies and TV shows aren’t actually very natural. Even some podcasts have an unnatural converastional rhythm.</p>



<p>While watching <a href="https://en.wikipedia.org/wiki/Love_Is_Blind_(TV_series)">Love is Blind</a> with my fiancé, I realized you could probably get a decent amount of quality data from reality tv shows. The conversations in reality TV are overly dramatic and chaotic, but are (I think) closer to realistic than anything else.</p>



<h3>Conversational Knowledge Base?</h3>



<p>I do wonder what a solid RAG implementation looks like on top of a conversational agent. RAG and complex CoT pipelines will introduce latency which could deteriorate the conversational experience. However, there are clever ways you can hide this. In conversations that require “search” between humans, e.g. like scheduling an appointment, you’ll often have one party saying “one moment please” before performing a system search. Building something like that in is entirely possible. Additionally, if your agent requires information up front about an individual, it’s possible to include that in the initial prompt.</p>



<h3>You Should Use Elixir</h3>



<p>I was very excited for this problem in particular because it’s literally the perfect application of Elixir and Phoenix. If you are building conversational agents, you should seriously consider giving Elixir a try. A large part of how quick this demo was to put together is because of how productive Elixir is.</p>



<h2>Conclusion</h2>



<p>This was a fun technical challenge. I am pleased with the performance of the final demonstration. I’m also happy I was able to OSS a small library for others to build off of. If you are interested in conversational agents, I encourage you to check it out, give feedback, and contribute! I know it’s very rough right now, but it will get better with time.</p>



<p>Additionally, I plan to periodically build out the rest of the Nero project, so please follow me on <a href="https://twitter.com/sean_moriarity">Twitter</a> if you’d like to stay up to date.</p>
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Short Stack: World’s smallest Nintendo Wii (534 pts)]]></title>
            <link>https://github.com/loopj/short-stack</link>
            <guid>40071826</guid>
            <pubDate>Thu, 18 Apr 2024 00:51:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/loopj/short-stack">https://github.com/loopj/short-stack</a>, See on <a href="https://news.ycombinator.com/item?id=40071826">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><div dir="auto">
  
  <p dir="auto"><h4 tabindex="-1" dir="auto">World's Smallest Nintendo Wii, using a trimmed motherboard and custom stacked PCBs</h4><a id="user-content-worlds-smallest-nintendo-wii-using-a-trimmed-motherboard-and-custom-stacked-pcbs" aria-label="Permalink: World's Smallest Nintendo Wii, using a trimmed motherboard and custom stacked PCBs" href="#worlds-smallest-nintendo-wii-using-a-trimmed-motherboard-and-custom-stacked-pcbs"></a></p>
  <p dir="auto">
    <a href="#features">Features</a> ·
    <a href="#size--scale">Size &amp; Scale</a> ·
    <a href="#components">Components</a> ·
    <a href="#build-guide">Build Guide</a>
  </p>
</div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/render-blue.jpg"><img src="https://github.com/loopj/short-stack/raw/main/images/render-blue.jpg" alt="Short Stack Render"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Features</h2><a id="user-content-features" aria-label="Permalink: Features" href="#features"></a></p>
<ul dir="auto">
<li>World's smallest "to scale" Wii console</li>
<li>Powered by USB-C</li>
<li>HDMI for lossless digital audio and video (powered by <a href="https://github.com/ikorb/gcvideo">GCVideo</a>)</li>
<li>Bluetooth for Wii remotes and accessories</li>
<li>MicroSD card stores games and saves, instead of disc drive &amp; memory cards</li>
<li>4 GameCube controller ports</li>
<li>Power, reset, and sync buttons</li>
<li>Power indicator LED and iconic blue glowing disc slot</li>
<li>Soft shutdown, power on/off via Wiimote</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Size &amp; Scale</h2><a id="user-content-size--scale" aria-label="Permalink: Size &amp; Scale" href="#size--scale"></a></p>
<p dir="auto">This is a <strong>1:2.38 scale</strong> model of an original Nintendo Wii console, but since that is hard to visualize here are some other stats:</p>
<ul dir="auto">
<li>Same size as a typical deck of playing cards</li>
<li><strong>7.4% the volume</strong> of an original Wii console</li>
<li>You could fit <strong>13.5</strong> of these inside an original Wii</li>
</ul>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/deck-of-cards.jpg"><img src="https://github.com/loopj/short-stack/raw/main/images/deck-of-cards.jpg" alt="Size comparison"></a></p>
<p dir="auto">I'm pretty sure this sets the record for the smallest functional scale-model Wii console, but let me know if I'm wrong!</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Could we go smaller?</h3><a id="user-content-could-we-go-smaller" aria-label="Permalink: Could we go smaller?" href="#could-we-go-smaller"></a></p>
<p dir="auto">Yes! It is definitely possible to go smaller than this. My <a href="https://github.com/loopj/short-stack/blob/main/images/trim.png">version of the Omega trim</a> keeps all four main mounting holes, which makes it around 7mm wider than a classic Omega trim. Additionally <a href="https://twitter.com/Weskmods" rel="nofollow">Wesk</a> has managed to get a Wii motherboard down to 52x52mm on his final destination trim, which is a a full 10mm narrower than my trim. I estimate you could reduce the volume by a further 25-30% without losing any functionality, but it would be an incredibly tight fit and tricky to assemble.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Components</h2><a id="user-content-components" aria-label="Permalink: Components" href="#components"></a></p>
<p dir="auto">As the name implies, <em>Short Stack</em> is built from a stack of custom PCBs, and a custom heatsink, that are all designed to fit together in a compact and modular way.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">A modular motherboard</h3><a id="user-content-a-modular-motherboard" aria-label="Permalink: A modular motherboard" href="#a-modular-motherboard"></a></p>
<p dir="auto">Making a tiny build like this is made possible by trimming the Wii motherboard down to the bare essentials. The result is a board which is just <em>62x62mm</em>, but still contains the CPU, GPU, RAM and flash memory.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/motherboard-front.jpg"><img src="https://github.com/loopj/short-stack/raw/main/images/motherboard-front.jpg" width="45%"></a> <a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/motherboard-back.jpg"><img src="https://github.com/loopj/short-stack/raw/main/images/motherboard-back.jpg" width="45%"></a></p>
<p dir="auto">Since we removed the original power circuitry and trimmed off the USB, Bluetooth, and GameCube connectors, we need to provide power and data to the board another way. I designed a couple of boards which solder directly to the front of a trimmed Wii motherboard to provide power and data, which help avoid a tangled mess of wires.</p>
<p dir="auto">The <a href="https://github.com/loopj/wii-power-strip">Wii Power Strip</a> supplies power to the Wii motherboards using a Molex Pico-Lock connector, and additionally has footprints to help relocate of a couple of capacitors which are typically removed when trimming a Wii.</p>
<p dir="auto"><a href="https://github.com/loopj/periphlex">Periphlex</a> is a flex PCB which breaks out the Bluetooth, USB and GameCube controller data lines, as well as the power, shutdown, and reset GPIOs. These are then made available via a 14-pin FFC connector. This approach replaces 11 magnet wires with a single, removable ribbon cable.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/periphlex-render.png"><img src="https://github.com/loopj/short-stack/raw/main/images/periphlex-render.png" alt="Periphlex"></a></p>
<p dir="auto">On the back of the motherboard, I'm using two open-source boards designed by the very talented <a href="https://github.com/mackieks">YveltalGriffin</a>. <a href="https://github.com/mackieks/fujiflex">fujiflex</a> provides digital A/V output using GCVideo, and <a href="https://github.com/mackieks/nandFlex">nandFlex</a> relocates the Wii's NAND memory chip, to enable the tight trim.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Custom PCBs</h3><a id="user-content-custom-pcbs" aria-label="Permalink: Custom PCBs" href="#custom-pcbs"></a></p>
<p dir="auto">In addition to the modular boards on the motherboard, I designed two PCBs specific to Short Stack which provide the rest of the functionality for the console.</p>
<p dir="auto">The <em>main board</em> PCB hosts the power regulators, USB to microSD logic, HDMI connector, GameCube ports, and a microcontroller for power management. A 14-pin ribbon cable connects this board to the Wii motherboard via <em>Periphlex</em>, and a power cable delivers power to the <em>Power Strip</em>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/main-board.jpg"><img src="https://github.com/loopj/short-stack/raw/main/images/main-board.jpg" alt="Main Board"></a></p>
<p dir="auto">The <em>front panel</em> PCB hosts the power, reset, and sync buttons, as well as the power LED and disc slot LEDs. This board connects to the main board via a short 8-pin ribbon cable.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/front-panel.jpg"><img src="https://github.com/loopj/short-stack/raw/main/images/front-panel.jpg" alt="Front Panel Board"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Cooling</h3><a id="user-content-cooling" aria-label="Permalink: Cooling" href="#cooling"></a></p>
<p dir="auto">The final part of the "stack" is a custom heatsink which is designed to be as low profile as possible, while still providing adequate cooling for the Wii's CPU and GPU. The heatsink is designed to be machined from aluminum or copper, and incorporates mounting holes which align with those on the Wii motherboard.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/heatsink.jpg"><img src="https://github.com/loopj/short-stack/raw/main/images/heatsink.jpg" alt="Heatsink"></a></p>
<p dir="auto">I managed to find a tiny 5V blower fan (<a href="https://catalog.pelonistechnologies.com/item/air-g-series-micro-fans-and-micro-blowers/micro-fans-and-micro-blowers/agb208n" rel="nofollow">Pelonis AGB208N</a>) which measures just 20x20x8mm and somehow puts out 0.84 CFM of air. This blows air through the heasink fins, out the side of the case.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Case</h3><a id="user-content-case" aria-label="Permalink: Case" href="#case"></a></p>
<p dir="auto">The stack is housed in a custom 3D printed case, secured with four M2.5 screws and spacers. The rest of case is assembled using self-tapping M1.2 screws. The screw locations and fan vents are positioned to match the original Wii case as closely as possible, to minimize visible screws.</p>
<p dir="auto">You can access files on the SD card by connecting the console to a computer via USB, but I also included an access panel on the front of the case where the original Wii SD card slot is found. This panel is held in place by magnets and can be removed to access the SD card without opening the case. Shout out to Wesk for the magnet idea!</p>
<p dir="auto">To keep the clean aesthetic of the original Wii I wanted to hide the GameCube controller ports behind a panel. I always hated the hinged design of the original, and it is quite difficult to replicate at this scale, so I redesigned this panel to be a sliding panel.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/gamecube-ports.png"><img src="https://github.com/loopj/short-stack/raw/main/images/gamecube-ports.png" alt="GameCube Ports"></a></p>
<p dir="auto">The Wii's iconic disc slot lights are recreated using a 1.5mm thick custom cut acrylic light diffuser, which is illuminated by two side-mounted addressable LEDs on the front panel board. The power, reset, and sync buttons are all also 3D printed, and the power button hosts a tiny light pipe to allow the power LED to shine through.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/front-assembly.png"><img src="https://github.com/loopj/short-stack/raw/main/images/front-assembly.png" alt="Front assembly"></a></p>
<p dir="auto">I FDM printed the case on a Voron 2.4 in ABS using a 0.4mm nozzle at 0.1mm layer height, but it should print fine in PLA or PETG on a well-tuned printer. At this scale, dimensional accuracy is important. In theory it should be possible to print this on an SLA printer, but I haven't tried it.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Build Guide</h2><a id="user-content-build-guide" aria-label="Permalink: Build Guide" href="#build-guide"></a></p>
<div dir="auto"><p dir="auto">Caution</p><p dir="auto">This is not a beginner project! This build requires performing a challenging motherboard trim, fine pitch soldering, and PCB assembly. If you are not comfortable with these tasks, I would recommend starting with a simpler project and working your way up - check out the <a href="https://bitbuilt.net/" rel="nofollow">BitBuilt forums</a> for some awesome project worklogs.</p>
</div>
<p dir="auto"><h3 tabindex="-1" dir="auto">What you'll need</h3><a id="user-content-what-youll-need" aria-label="Permalink: What you'll need" href="#what-youll-need"></a></p>
<ul dir="auto">
<li>4-layer Wii motherboard</li>
<li><a href="https://github.com/mackieks/nandFlex">nandFlex</a> board (or <a href="https://4layertech.com/products/rvl-nand-flex-board-pack-of-2" rel="nofollow">4Layer Technologies RVL-NAND</a>)</li>
<li>Assembled <a href="https://github.com/mackieks/fujiflex">fujiflex</a> (or <a href="https://electron-shepherd.com/products/electronave-kit" rel="nofollow">ElectronAVE</a>)</li>
<li>Assembled <a href="https://github.com/loopj/wii-power-strip/tree/r1">Wii Power Strip</a> - <strong>must be revision 1!</strong></li>
<li>Assembled <a href="https://github.com/loopj/periphlex">Periphlex</a></li>
<li><a href="https://github.com/loopj/short-stack/blob/main/main-board/KiCad">Short Stack main board</a> - 1.2mm thickness, stencil recommended</li>
<li><a href="https://github.com/loopj/short-stack/blob/main/front-panel/KiCad">Short Stack front panel</a> - 0.8mm thickness, black soldermask, stencil recommended</li>
<li><a href="https://github.com/loopj/short-stack/blob/main/case/heatsink.step">Heatsink</a> - machined from aluminum or copper</li>
<li><a href="https://github.com/loopj/short-stack/blob/main/case/disc-light-diffuser.dxf">Light diffuser</a> - cut from 1.5mm thick acrylic</li>
<li>The components and hardware from the <a href="https://github.com/loopj/short-stack/blob/main/full-bom.xlsx">bill of materials</a></li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Assembly</h3><a id="user-content-assembly" aria-label="Permalink: Assembly" href="#assembly"></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/loopj/short-stack/blob/main/images/case-assembly.gif"><img src="https://github.com/loopj/short-stack/raw/main/images/case-assembly.gif" alt="Case Exploded" data-animated-image=""></a></p>
<ul dir="auto">
<li>Assemble main board and front panel PCBs
<ul dir="auto">
<li>I recommend using a solder stencil and a hot plate or reflow oven</li>
<li>If using a hot plate, hand solder the headphone connectors after reflowing the rest of the components</li>
<li>Secure two 3 x 1mm magnets inside the holes on the front panel board using a dab of CA glue</li>
</ul>
</li>
<li>Flash the <a href="https://github.com/loopj/short-stack/blob/main/main-board/firmware">main board firmware</a></li>
<li>Prepare and trim the Wii motherboard
<ul dir="auto">
<li>Relocate the NAND, test it still boots</li>
<li>Perform a wireless U10 relocation, test it still boots - you may wish to wire a magnet wire to the <a href="https://bitbuilt.net/forums/index.php?threads/soft-shutdown-power-on-via-bluetooth.6239/" rel="nofollow"><code>SHUTDOWN</code> via</a> first</li>
<li>Install fujiflex, and test digital A/V output works</li>
<li>Trim the motherboard (see <a href="https://github.com/loopj/short-stack/blob/main/images/trim.png">trim dimensions</a>)</li>
</ul>
</li>
<li>Assemble and install <em>Power Strip</em> (<a href="https://github.com/loopj/wii-power-strip/tree/r1#installation">see instructions</a>)</li>
<li>Assemble and install <em>Periphlex</em> (<a href="https://github.com/loopj/periphlex#installation">see instructions</a>)</li>
<li>Connect the boards
<ul dir="auto">
<li>Connect the main board to the motherboard via a 14-pin FFC cable to <em>Periphlex</em></li>
<li>Connect the main board to the motherboard via a 5-pin Molex Pico-Lock cable to <em>Power Strip</em></li>
<li>Connect the front panel board to the main board via an 8-pin FFC cable</li>
<li>Connect the fan to the main board</li>
<li>Apply thermal paste to the CPU and GPU</li>
<li>Stack the components: heatsink, motherboard, M2.5 x 3mm spacers, main board</li>
<li>Install the stack to the case bottom using M2.5 x 12mm wafer head screws</li>
</ul>
</li>
<li>Secure the top of the case to the bottom using four M1.2 x 4mm screws</li>
<li>Secure the front panel PCB to the front of the case using two M1.2 x 3mm screws</li>
<li>Secure the front of the case to the bottom of the case using two M1.2 x 4mm screws</li>
<li>Press-fit two 3 x 1mm magnets into the holes on the sd card cover, make sure they match polarity with the magnets on the front panel PCB</li>
<li>Slide the side panel into the case</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">Permissively released under the Solderpad Hardware License v2.1</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Math Puzzles (155 pts)]]></title>
            <link>https://jrmf.org/puzzle/</link>
            <guid>40071463</guid>
            <pubDate>Wed, 17 Apr 2024 23:59:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jrmf.org/puzzle/">https://jrmf.org/puzzle/</a>, See on <a href="https://news.ycombinator.com/item?id=40071463">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="ajax">
                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/iconV4.png" alt="3-in-a-Row">
                            </p>
                            <p>
                                3-in-a-Row                            </p>
                            <p>Can you be the first player to get 3-in-a-row?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActApplePickingNoBdr.png" alt="Apple Picking">
                            </p>
                            <p>
                                Apple Picking                            </p>
                            <p>After a long day of picking apples, can you eat the last, juiciest apple?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/3ae305b14698922c3f311f606a2288f4bd520551-1303x776-1-e1656533075857.webp" alt="Billiards Geometry">
                            </p>
                            <p>
                                Billiards Geometry                            </p>
                            <p>Embrace your inner pool shark and try to make every shot.
</p>
                            
                        </div>

                                        <div>
                            
                            <p><img src="https://jrmf.org/wp-content/uploads/JRMF-IconAct-BlueDotSolitaireNoBdr-e1702649166246.png" alt="Blue Dot Solitaire">
                            </p>
                            <p>
                                Blue Dot Solitaire                            </p>
                            <p>Can you remove all the dots?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/Bridges-Icon.png" alt="Bridges">
                            </p>
                            <p>
                                Bridges                            </p>
                            <p>Can you build a bridge that connects the stars?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/CatchUpIcon.png" alt="Catch Up">
                            </p>
                            <p>
                                Catch Up                            </p>
                            <p>Can you make the longest line?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActChameleonIslandNoBdr.png" alt="Chameleon Island">
                            </p>
                            <p>
                                Chameleon Island                            </p>
                            <p>Help all the chameleons on the island change into the same color.</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActChocolateFixNoBdr.png" alt="Chocolate Fix">
                            </p>
                            <p>
                                Chocolate Fix                            </p>
                            <p>Can you make the perfect chocolate box for your customers?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/chomp-e1656535652106.png" alt="Chomp">
                            </p>
                            <p>
                                Chomp                            </p>
                            <p>Can you avoid taking the yucky chocolate piece?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconAct-ColorTrianglesNoBdr.png" alt="Color Triangles">
                            </p>
                            <p>
                                Color Triangles                            </p>
                            <p>Create beautiful, colorful triangular patterns.</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/colored-loops-e1656535434264.png" alt="Colored Loops">
                            </p>
                            <p>
                                Colored Loops                            </p>
                            <p>Create colorful loops so that you can always find your way back to the beginning of the path.</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActCountdownNoBdr.png" alt="Countdown">
                            </p>
                            <p>
                                Countdown                            </p>
                            <p>Be the player to take the last token!</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconAct-CrackTheCodeNoBdr.png" alt="Crack the Code">
                            </p>
                            <p>
                                Crack the Code                            </p>
                            <p>Crack the secret code in as few guesses as you can!</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActCupStackingNoBdr.png" alt="Cup Stacking">
                            </p>
                            <p>
                                Cup Stacking                            </p>
                            <p>Can you find a way to stack every cup?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/Dice-Bingo-Icon.png" alt="Dice Bingo">
                            </p>
                            <p>
                                Dice Bingo                            </p>
                            <p>Can you make a winning bingo card?</p>
                            
                        </div>

                                        <div>
                            
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/digit-sums.png" alt="Digit Sums">
                            </p>
                            <p>
                                Digit Sums                            </p>
                            <p>Use every digit of your numbers to solve these unique and challenging number puzzles.</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/IconV2-1.png" alt="Domino Dissection">
                            </p>
                            <p>
                                Domino Dissection                            </p>
                            <p>Can you tile the board using each domino exactly once?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/DoodlesIcon-1.png" alt="Doodles">
                            </p>
                            <p>
                                Doodles                            </p>
                            <p>Can you trace each doodle without lifting your marker?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/Asset-30-1.png" alt="Dueling Dice">
                            </p>
                            <p>
                                Dueling Dice                            </p>
                            <p>Can you make a better die than your partner?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconAct-FrogsNToadsNoBdr.png" alt="Frogs and Toads">
                            </p>
                            <p>
                                Frogs and Toads                            </p>
                            <p>Can you help the frogs and toads get to the other side of the pond?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/icon-2.png" alt="Gerrymandering">
                            </p>
                            <p>
                                Gerrymandering                            </p>
                            <p>Can you split up each puzzle so that more than half of the groups are purple groups?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/JRMF-IconAct-GraceGraphsAutumn2.png" alt="Graceful Gourds">
                            </p>
                            <p>
                                Graceful Gourds                            </p>
                            <p>Can you gracefully label these pumpkin patches?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/JRMF-IconAct-Flexagons.png" alt="Hexaflexagons">
                            </p>
                            <p>
                                Hexaflexagons                            </p>
                            <p>Learn the mysteries of the simple yet surprising hexaflexagon, and take one home to show your friends!</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActJuiceJumbleNoBdr.png" alt="Juice Jumble">
                            </p>
                            <p>
                                Juice Jumble                            </p>
                            <p>Order these jumbled juices to make a beautiful rainbow.</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActJumpJuliaBunnyNoBdr.png" alt="Jumping Julia">
                            </p>
                            <p>
                                Jumping Julia                            </p>
                            <p>Can you jump your way from start to finish?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActKonigsbergNoBdr.png" alt="Königsberg">
                            </p>
                            <p>
                                Königsberg                            </p>
                            <p>Everything is made up of one, continuous line. Can you figure out what belongs in town?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActLadybugsNoBdr.png" alt="Ladybugs">
                            </p>
                            <p>
                                Ladybugs                            </p>
                            <p>Help as many ladybugs as possible land on the leaves.</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconAct-LotsOPlotsNoBdr.png" alt="Lots o’ Plots">
                            </p>
                            <p>
                                Lots o’ Plots                            </p>
                            <p>Fill your entire garden with plots of carrots.</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/final-flower-image.png" alt="Magic Flowers">
                            </p>
                            <p>
                                Magic Flowers                            </p>
                            <p>Can you arrange 5 numbers into a Magic Flower in which every group of three numbers in a line adds up to the same magic number?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconAct-MapColoringNoBdr.png" alt="Map Coloring">
                            </p>
                            <p>
                                Map Coloring                            </p>
                            <p>Can you color each map so that no two neighboring states are colored the same color?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/meepletownicon_1.png" alt="Meeple Town">
                            </p>
                            <p>
                                Meeple Town                            </p>
                            <p>Can you find all the places where the Meeple can live?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/JRMF-IconsAct-MonsterTownNoBdr.png" alt="Monster Town">
                            </p>
                            <p>
                                Monster Town                            </p>
                            <p>Race your friends to find the patterns in these Halloween-themed SET cards!</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/IconV3.png" alt="Mosaics">
                            </p>
                            <p>
                                Mosaics                            </p>
                            <p>Can you make each mosaic?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/palindromeicon.png" alt="Palindrome Swap">
                            </p>
                            <p>
                                Palindrome Swap                            </p>
                            <p>Can you make palindromes in the fewest number of swaps?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconAct-PanningForGoldNoBdr.png" alt="Panning for Gold">
                            </p>
                            <p>
                                Panning for Gold                            </p>
                            <p>Among all the counterfeits there is only one true gold bar. Can you find it?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/icon.png" alt="Pentominoes">
                            </p>
                            <p>
                                Pentominoes                            </p>
                            <p>Can you find a way to cover the shapes with pentominoes?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/icon-5.png" alt="Poly Puzzles">
                            </p>
                            <p>
                                Poly Puzzles                            </p>
                            <p>Can you build a polyhedron using the shapes in each puzzle?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconAct-PoolTestingNoBdr.png" alt="Pool Testing">
                            </p>
                            <p>
                                Pool Testing                            </p>
                            <p>Learn how doctors help patients using pool testing through this engaging game.</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActPrimeCubesNoBdr.png" alt="Prime Cubes">
                            </p>
                            <p>
                                Prime Cubes                            </p>
                            <p>Armed with only your understanding of prime numbers, play against your friends to find the best way to fill in our colorful cube.</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActRiverCrossingsNewWebsite.png" alt="River Crossings">
                            </p>
                            <p>
                                River Crossings                            </p>
                            <p>Help your wolf, goat, and cabbage cross the river.</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/RooksMoveIcon2.png" alt="Rook’s Move">
                            </p>
                            <p>
                                Rook’s Move                            </p>
                            <p>Race your friends to get the rook to the end of the chessboard. Can you find a way to win every time?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/icon-4.png" alt="Rubik’s Riddles">
                            </p>
                            <p>
                                Rubik’s Riddles                            </p>
                            <p>Can you make the pattern in the puzzle by rotating the cube?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconAct-SkyscrapersBeginNoBdr.png" alt="Skyscrapers">
                            </p>
                            <p>
                                Skyscrapers                            </p>
                            <p>Help the city planner build up the city with new skyscrapers.</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActSmileysNoBdr.png" alt="Smileys">
                            </p>
                            <p>
                                Smileys                            </p>
                            <p>Smiling is contagious! Can you turn every frown upside down?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/JRMF-IconAct-SprigsGPurp.png" alt="Sprigs">
                            </p>
                            <p>
                                Sprigs                            </p>
                            <p>Take turns drawing curves to connect dots. Can you be the one to draw the last curve?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/StarBattleIcon.png" alt="Star Battle">
                            </p>
                            <p>
                                Star Battle                            </p>
                            <p>Can you place the stars on the grid?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Number </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/IconNew.png" alt="Stepping Stones">
                            </p>
                            <p>
                                Stepping Stones                            </p>
                            <p>Can you find a way to place the next stepping stone?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/icon-1.png" alt="Tile with Style">
                            </p>
                            <p>
                                Tile with Style                            </p>
                            <p>Can you cover the entire square with pattern blocks?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActTippyToadsNoBdr.png" alt="Tippy Toads">
                            </p>
                            <p>
                                Tippy Toads                            </p>
                            <p>How many toads can you help sunbathe by balancing them on a lilypad?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/IconV2-2.png" alt="Toothpick Squares">
                            </p>
                            <p>
                                Toothpick Squares                            </p>
                            <p>Can you make the right number of squares out of toothpicks?</p>
                            
                        </div>

                                        <div>
                            <p><span>3rd - 12th Grade</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/TriangleIcon.png" alt="Toothpick Triangles">
                            </p>
                            <p>
                                Toothpick Triangles                            </p>
                            <p>Can you make the right number of triangles out of toothpicks?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Logic </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/2022/06/JRMF-IconsActTowersOfHanoiNoBdr.png" alt="Tower of Hanoi">
                            </p>
                            <p>
                                Tower of Hanoi                            </p>
                            <p>Can you solve these puzzles based on an ancient legend, golden disks, and the end of the world?</p>
                            
                        </div>

                                        <div>
                            <p><span>For All Ages</span>
                                <span>Shape </span>
                            </p>
                            <p><img src="https://jrmf.org/wp-content/uploads/wolvesandsheepicon_1.png" alt="Wolves and Sheep">
                            </p>
                            <p>
                                Wolves and Sheep                            </p>
                            <p>Keep your sheep safe from the wolves!</p>
                            
                        </div>

                    
                </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Wayfair fired a bunch of people again today, after using them to train AI (131 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=40070566</link>
            <guid>40070566</guid>
            <pubDate>Wed, 17 Apr 2024 22:07:48 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=40070566">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <tbody><tr id="40074546"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_40074546" href="https://news.ycombinator.com/vote?id=40074546&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>Oh yes, Wayfair. In this case I’m pretty sure AI will be an improvement. Their customer support was abysmal. I needed to send a package back, they sent a company to get it and then refused to refund me because they somehow lost a piece of furniture and it never arrived.<p>I sent them the documents showing that the package was collected and then came a reply if I could check the apartment better, maybe I’ll end up finding the missing piece of furniture
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="40074513"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_40074513" href="https://news.ycombinator.com/vote?id=40074513&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>To me was always weird how a company whose only means of doing business is a website, always had friction towards testability, to the point where I was continuously told by managers “we’re not a tech company”, while also having to revert multiple commits per day because of broken / untested code</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="40071903"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_40071903" href="https://news.ycombinator.com/vote?id=40071903&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>A friend of mine was just fired after he worked on a 6-month death march project.  He worked until 2am almost every night with meetings at 7am the next day, including weekends. He missed New years, Christmas events, kids birthdays/other family events, and any planned vacations.<p>His reward was the elimination of his position at the end of the project.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="40074537"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074537" href="https://news.ycombinator.com/vote?id=40074537&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>These kind of people are detrimental to the whole sector, I am kinda happy when I hear these stories, maybe in his next job he will work contract hours</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="40073069"><td></td></tr>
            <tr id="40072392"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40072392" href="https://news.ycombinator.com/vote?id=40072392&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>NEVER sacrifice your life for an artificial deadline.<p>How to determine if something is an artificial deadline? Because if it were a real deadline with significance to the business, they'd pull more hands on deck, remove roadblocks relentlessly day after day, and even offer to take portions of your work on themselves so that the deadlines can be met.</p><p>If they are not making such moves, rest assured that the deadline is not critical - but only required for some BS stack ranking, or for the management's own promotion. They WILL fire you after putting all the work if it fits their BS processes.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="40073021"><td></td></tr>
                <tr id="40074248"><td></td></tr>
                  <tr id="40073569"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_40073569" href="https://news.ycombinator.com/vote?id=40073569&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>I'd go further and say to never sacrifice your life for any deadline at all. Part of having a work contract specifically means that all risks rests on capital holders shoulders and not yourself.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="40073874"><td><table>  <tbody><tr>    <td indent="3"><img src="https://news.ycombinator.com/s.gif" height="1" width="120"></td><td>
      <center><a id="up_40073874" href="https://news.ycombinator.com/vote?id=40073874&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>That is an incredibly succinct way of summarising the way I started to see the world about a decade ago (and more than a decade into my career as a developer).</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="40074450"><td><table>  <tbody><tr>    <td indent="3"><img src="https://news.ycombinator.com/s.gif" height="1" width="120"></td><td>
      <center><a id="up_40074450" href="https://news.ycombinator.com/vote?id=40074450&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>This seems trivially false.  The risk that a worker stops being paid because their capital holder no longer has income is always going to be there, and that could be because one or more workers were unable to accomplish one or more tasks necessary for the capital holders to sell a product or service.<p>Of course, some workers are also capital holders, and should be negotiating appropriate terms such that their mission critical contribution is appropriately rewarded.  And no one should be compelled to sacrifice their life without this “appropriate reward”, but exactly what that is is always in flux depending on many parameters.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="40074540"><td><table>  <tbody><tr>    <td indent="4"><img src="https://news.ycombinator.com/s.gif" height="1" width="160"></td><td>
      <center><a id="up_40074540" href="https://news.ycombinator.com/vote?id=40074540&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>It's on the capital holders to make sure that the deadlines are reachable and appropriate to the amount of time you actually have working normally, rushing as a worker doesn't make any sense.<p>Either they miscalculated the number of employees they needed or they just aren't profitable enough to sustain the workload, both cases are failures on the company side.</p><p>And sure, if the company is willing to, they can share some of that risk and reward associated with it to the employees
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                        <tr id="40073287"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_40073287" href="https://news.ycombinator.com/vote?id=40073287&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>Just adding more people to a team isn't useful if you don't have the time to integrate them well in a project.<p>Even then, it might be what you call a "real deadline", doesn't mean you should overwork for months, a couple of days or even some weeks is okay, but you should also be compensated for it.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                  <tr id="40074019"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074019" href="https://news.ycombinator.com/vote?id=40074019&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>Seeing people working overtime with the idea it may pay in the future always put a smile on my face. Luckilly new generations are not that stupid and they are much more hesitant to do it than boomers or even millenials.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="40073529"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_40073529" href="https://news.ycombinator.com/vote?id=40073529&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>It seems that senior management in these companies you are talking about are following Royce du Pont's advice.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="40073593"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40073593" href="https://news.ycombinator.com/vote?id=40073593&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>I had to double check the reference just to make sure you were in fact talking about business luminary Royce du Pont. His negotiation tactics are second to none.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="40074438"><td></td></tr>
            <tr id="40072431"><td></td></tr>
                <tr id="40074134"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074134" href="https://news.ycombinator.com/vote?id=40074134&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>I don't really understand the moral issue with a company eliminating jobs. Similarly, I also don't think these companies are doing a moral good for creating jobs in the first place.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="40074410"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_40074410" href="https://news.ycombinator.com/vote?id=40074410&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>I think the issue that most people have is also that companies expect a certain level of respect and dedication from their employees but are not willing to reciprocate.<p>Make sure to work as hard as possible for us, pleas work extra hours if the company is doing bad. Don't take your vacations when it might impact team performance badly. If you leave give up a big heads up.</p><p>However we'll refuse your raises and bonuses if we feel like it. Also must be willing to move and uproot your whole life with no guarantee we'll keep you for long. We'll fire you one day after telling you your job was safe, and close all your company accounts before you get to save any of your documents or say bye to your colleagues. And remember no complaining after you leave, or we'll get you. Happened to quite a few people I know, not me thankfully.</p><p>And just "get an other job if you company sucks" doesn't always work. You might not know that your company sucks until you're out the door, or finding a new job in your field or without moving your whole family might not be easy
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="40074274"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_40074274" href="https://news.ycombinator.com/vote?id=40074274&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>The moral issue comes because these jobs are tied to people's livelihoods and ability to provide essentials like food, housing, healthcare, etc for themselves and their families.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="40074285"><td><table>  <tbody><tr>    <td indent="3"><img src="https://news.ycombinator.com/s.gif" height="1" width="120"></td><td>
      <center><a id="up_40074285" href="https://news.ycombinator.com/vote?id=40074285&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>So is the company doing a morally good thing when it provides the ability for someone to have food, housing, healthcare, etc? If not, it doesn't make sense to blame the company for eliminating jobs if they also don't get credit for employing people for however many years.</span></p></div></td></tr>
        </tbody></table></td></tr>
                        <tr id="40074422"><td></td></tr>
                <tr id="40074521"><td></td></tr>
                        <tr id="40070991"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_40070991" href="https://news.ycombinator.com/vote?id=40070991&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>Wasn’t this the company where the ceo urged everyone to work insane hours?<p>These people only care about themselves.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="40073008"><td></td></tr>
                <tr id="40074283"><td></td></tr>
                  <tr id="40073204"><td></td></tr>
                  <tr id="40070647"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_40070647" href="https://news.ycombinator.com/vote?id=40070647&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>It seems one of AI's major successes will be the production of schadenfreude (as when this effort goes disastrously pear shaped.)</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="40074532"><td></td></tr>
                  <tr id="40071502"><td></td></tr>
                <tr id="40074472"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074472" href="https://news.ycombinator.com/vote?id=40074472&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>It's not a new thing, every time a new consultancy is hired to "help you" and begins process of "discovery" it's a signal to get your CVs updated.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="40074001"><td></td></tr>
            <tr id="40074483"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074483" href="https://news.ycombinator.com/vote?id=40074483&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>Buyers choosing to buy equivalent or sufficiently “good“ products or services sold at the lowest price is a very, very old thing.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="40074318"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074318" href="https://news.ycombinator.com/vote?id=40074318&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>It's similar to how people buy meat all nicely wrapped in plastic from the supermarket and pretend the slaughter and cruelty doesn't happen. Many of them claim to be "animal lovers" too. Self-delusion is a powerful thing. It lets people do things they wouldn't otherwise feel comfortable with. Treating people like humans, getting to know them, making friends etc. means you inevitably start thinking of them like equals. That's no way to get on top.</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="40074550"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_40074550" href="https://news.ycombinator.com/vote?id=40074550&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>In an opposite way, a process of abstraction also protects the top from the bottom. We keep talking about this fictitious entity called "Wayfair", yet this thread does not yet mention the name of the CEO, Niraj S. Shah, even omce, or anything about him. Yet he is the actual person who exists in the material world.</span></p></div></td></tr>
        </tbody></table></td></tr>
                        <tr id="40073053"><td></td></tr>
            <tr id="40072852"><td></td></tr>
                <tr id="40074478"><td></td></tr>
            <tr id="40073065"><td></td></tr>
                <tr id="40073521"><td></td></tr>
                <tr id="40074229"><td><table>  <tbody><tr>    <td indent="3"><img src="https://news.ycombinator.com/s.gif" height="1" width="120"></td><td>
      <center><a id="up_40074229" href="https://news.ycombinator.com/vote?id=40074229&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>With the right system prompt, you can also have it answer questions wrong and then insist to you that the correct information must be mistaken or malicious.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="40073787"><td></td></tr>
            <tr id="40074292"><td></td></tr>
                              <tr id="40073473"><td><table>  <tbody><tr>    <td indent="0"><img src="https://news.ycombinator.com/s.gif" height="1" width="0"></td><td>
      <center><a id="up_40073473" href="https://news.ycombinator.com/vote?id=40073473&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>Step 1: have a moral compass and don’t work for shit tier companies.<p>Is it really that hard?</p><p>I find it hilarious when people work for these garbage companies in the first place. And then I’m supposed to do what when they turn on you? Cool story?</p><p>It’s really on them imo. There are other jobs out there. Better yet you can do your own thing. But nah fam.
              </p></span></p></td></tr>
        </tbody></table></td></tr>
                <tr id="40074108"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074108" href="https://news.ycombinator.com/vote?id=40074108&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>Ex-Wayfair engineer here. Problem is that not every company is shit from the start. They were pretty cool when I joined. Not so much when they cut my entire department 7 months later. (They started getting noticeably less cool 3 mo in to my tenure, but still.)</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="40074489"><td></td></tr>
                  <tr id="40073814"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40073814" href="https://news.ycombinator.com/vote?id=40073814&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><p><span>Step 1: have parents rich enough to support you for a while so you don’t have to take a job with the shit company that exploits you<p>Is it really that hard?
              </p></span></p></td></tr>
        </tbody></table></td></tr>
            <tr id="40073577"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40073577" href="https://news.ycombinator.com/vote?id=40073577&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>Although I don't disagree with what you said, I disagree with how you said it. Some people are in a though spot and need a job fast. And not everyone else is able to create a startup and be an entrepreneur. It's never that simple.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="40074365"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074365" href="https://news.ycombinator.com/vote?id=40074365&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>As much as I agree that people should try to avoid companies with bad ethics, it is not always that simple. I know some junior in tech that need to send 300+ applications for even just an internship and it is not uncommon for even more seasoned people to have to send 100s of applications to just even get a decent number of interviews. It is just hard to get a perfect view of the ethics of these hundred of companies. And if you just do that check at the interview step, which I am sure quite a few people will do, it can be tough to refuse 80% of your interviews because of companies have bad practices, when you struggled badly to land these few interviews.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="40073225"><td></td></tr>
            <tr id="40071174"><td></td></tr>
                      <tr id="40074238"><td></td></tr>
            <tr id="40073083"><td></td></tr>
                <tr id="40073176"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40073176" href="https://news.ycombinator.com/vote?id=40073176&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>Wayfair is like a retail outlet for garbage products right? Why wouldn't they sell to anyone with money?</span></p></div></td></tr>
        </tbody></table></td></tr>
                <tr id="40073930"><td><table>  <tbody><tr>    <td indent="2"><img src="https://news.ycombinator.com/s.gif" height="1" width="80"></td><td>
      <center><a id="up_40073930" href="https://news.ycombinator.com/vote?id=40073930&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>Eh idk, I've had some Wayfair stuff in the past and it's all been solid. I'm sure a lot of it is subpar though.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  <tr id="40074235"><td></td></tr>
            <tr id="40074260"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074260" href="https://news.ycombinator.com/vote?id=40074260&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>ICE as in the US federal law enforcement agency? Yes, US companies do sell products to the US government sometimes.</span></p></div></td></tr>
        </tbody></table></td></tr>
            <tr id="40074102"><td><table>  <tbody><tr>    <td indent="1"><img src="https://news.ycombinator.com/s.gif" height="1" width="40"></td><td>
      <center><a id="up_40074102" href="https://news.ycombinator.com/vote?id=40074102&amp;how=up&amp;goto=item%3Fid%3D40070566"></a></center>    </td><td><br><div>
                  <p><span>It this really an issue? It's selling chairs to a legitimate government agency. People's politics have become so skewed. That's just completely normal behavior.</span></p></div></td></tr>
        </tbody></table></td></tr>
                  </tbody></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Flying Aircraft Carriers (2019) (155 pts)]]></title>
            <link>https://neverwasmag.com/2019/08/flying-aircraft-carriers/</link>
            <guid>40069987</guid>
            <pubDate>Wed, 17 Apr 2024 20:57:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://neverwasmag.com/2019/08/flying-aircraft-carriers/">https://neverwasmag.com/2019/08/flying-aircraft-carriers/</a>, See on <a href="https://news.ycombinator.com/item?id=40069987">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

			
<p>Flying aircraft carriers show up in steampunk, dieselpunk and atompunk fiction so often, we can consider them a genre trope. From <em>Castle Wulfenbach</em> in <em>Girl Genius</em> to the British aircraft carriers in <em>Sky Captain and the World of Tomorrow</em> to the helicarriers of S.H.I.E.L.D., here is a look at these behemoths of the sky.</p>



<p>Flying aircraft carriers have a basis in reality. A few World War I-era British airships carried biplanes that could defend the mothership from attack. The United States Navy experimented with a similar “parasite aircraft” program in the 1930s.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork.jpg"><img fetchpriority="high" decoding="async" width="738" height="410" data-attachment-id="121498" data-permalink="https://neverwasmag.com/tupolev-tb-3-bomber-artwork/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork.jpg" data-orig-size="900,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Tupolev TB-3 bomber artwork" data-image-description="<p>Tupolev TB-3 bomber artwork</p>
" data-image-caption="<p>Tupolev TB-3 bomber artwork</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork-300x167.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork-738x410.jpg" data-id="121498" src="https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork-738x410.jpg" alt="Tupolev TB-3 bomber artwork" srcset="https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork-738x410.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork-300x167.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork-768x427.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/09/Tupolev-TB-3-bomber-artwork.jpg 900w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Tupolev TB-3 artwork</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber.jpg"><img decoding="async" width="738" height="397" data-attachment-id="120616" data-permalink="https://neverwasmag.com/tupolev-tb-3-bomber/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber.jpg" data-orig-size="1300,700" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Tupolev TB-3 bomber" data-image-description="<p>Tupolev TB-3 bomber in flight carrying five smaller planes</p>
" data-image-caption="<p>Tupolev TB-3 bomber in flight carrying five smaller planes</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-300x162.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-738x397.jpg" data-id="120616" src="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-738x397.jpg" alt="Tupolev TB-3 bomber" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-738x397.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-300x162.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-768x414.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-996x536.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber.jpg 1300w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Tupolev TB-3 in flight carrying five smaller planes</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1.jpg"><img decoding="async" width="738" height="246" data-attachment-id="120617" data-permalink="https://neverwasmag.com/tupolev-tb-3-bomber-2/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1.jpg" data-orig-size="1200,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Tupolev TB-3 bomber" data-image-description="<p>Tupolev TB-3 bomber carrying three Polikarpov I-5 fighter planes (Wikimedia Commons)</p>
" data-image-caption="<p>Tupolev TB-3 bomber carrying three Polikarpov I-5 fighter planes (Wikimedia Commons)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1-300x100.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1-738x246.jpg" data-id="120617" src="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1-738x246.jpg" alt="Tupolev TB-3 bomber" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1-738x246.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1-300x100.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1-768x256.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1-996x332.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Tupolev-TB-3-bomber-1.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Tupolev TB-3 carrying three Polikarpov I-5 fighter planes (<em>Wikimedia Commons</em>)</figcaption></figure>
</figure>



<p>So did the Soviet Union. The Zveno project put small fighter planes on the wings of Tupolev TB-1 and TB-3 bombers. This configuration was used in Romania in the early days of World War II.</p>


<div>
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover.jpg"><img loading="lazy" decoding="async" width="328" height="492" data-attachment-id="120888" data-permalink="https://neverwasmag.com/popular-science-october-1923-cover/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover.jpg" data-orig-size="800,1200" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Popular Science October 1923 cover" data-image-description="<p>Popular Science (October 1923)</p>
" data-image-caption="<p>Popular Science (October 1923)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover-133x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover-328x492.jpg" src="https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover-328x492.jpg" alt="Popular Science October 1923 cover" srcset="https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover-328x492.jpg 328w, https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover-133x200.jpg 133w, https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover-768x1152.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover-738x1107.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/09/Popular-Science-October-1923-cover.jpg 800w" sizes="(max-width: 328px) 100vw, 328px"></a><figcaption><em>Popular Science</em> (October 1923)</figcaption></figure></div>


<p>Rear Admiral William W. Moffett of the United States Navy had written for <em>Popular Science</em> in 1923 that airships carrying airplanes, like “lifeboats on ocean-going vessels,” weren’t far away.</p>



<p>He pointed out that airplanes had already been carried, launched and picked up by airships.</p>



<blockquote><p>The future airship, developed for naval use, will carry a sting that will make it one of the most formidable contenders for supremacy of the air, sea and earth that has ever been conceived.</p></blockquote>



<p>Moffett predicted that airships would carry a dozen planes to protect it against attack, “and in addition will mount a battery of guns that will command the respect of any enemy marauder.”</p>


<div>
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway.jpg"><img loading="lazy" decoding="async" width="738" height="211" data-attachment-id="120890" data-permalink="https://neverwasmag.com/sky-leviathan-cutaway/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway.jpg" data-orig-size="1400,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sky Leviathan cutaway" data-image-description="<p>“Sky Leviathan of Tomorrow” cutaway, from Popular Science (October 1923)</p>
" data-image-caption="<p>“Sky Leviathan of Tomorrow” cutaway, from Popular Science (October 1923)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway-300x86.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway-738x211.jpg" src="https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway-738x211.jpg" alt="Sky Leviathan cutaway" srcset="https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway-738x211.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway-300x86.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway-768x219.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway-996x285.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/09/Sky-Leviathan-cutaway.jpg 1400w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>“Sky Leviathan of Tomorrow” cutaway, from <em>Popular Science</em> (October 1923)</figcaption></figure></div>


<p>He didn’t see much difficulty for planes taking off:</p>



<blockquote><p>The launching of them is merely a matter of pushing the planes off into space, where they can recover themselves with the ease of a bird thrown into the air.</p></blockquote>



<p>The United States Navy in fact built two such airships, <em>Akron</em> and <em>Macon</em>, launched in 1931 and 1933, respectively. They were the largest helium-filled airships ever built. (The hydrogen-filled <em>Graf Zeppelin II</em> and <em>Hindenburg</em> were 5 meters taller and slightly more voluminous.) Both the American airships were lost in bad weather.</p>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway.jpg"><img loading="lazy" decoding="async" width="1200" height="600" data-attachment-id="123497" data-permalink="https://neverwasmag.com/uss-macon-airship-cutaway/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway.jpg" data-orig-size="1200,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="USS Macon airship cutaway" data-image-description="<p>Cutaway of the flying aircraft carrier USS Macon</p>
" data-image-caption="<p>Cutaway of the flying aircraft carrier USS Macon</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway-300x150.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway-738x369.jpg" src="https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway.jpg" alt="USS Macon airship cutaway" srcset="https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway.jpg 1200w, https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway-300x150.jpg 300w, https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway-738x369.jpg 738w, https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway-768x384.jpg 768w, https://neverwasmag.com/wp-content/uploads/2020/05/USS-Macon-airship-cutaway-996x498.jpg 996w" sizes="(max-width: 1200px) 100vw, 1200px"></a><figcaption>Cutaway of the USS <em>Macon</em></figcaption></figure>


<div>
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover.jpg"><img loading="lazy" decoding="async" width="328" height="492" data-attachment-id="119281" data-permalink="https://neverwasmag.com/modern-mechanix-october-1934-cover/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover.jpg" data-orig-size="800,1200" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Modern Mechanix October 1934 cover" data-image-description="<p>Modern Mechanix (October 1934)</p>
" data-image-caption="<p>Modern Mechanix (October 1934)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover-133x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover-328x492.jpg" src="https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover-328x492.jpg" alt="Modern Mechanix October 1934 cover" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover-328x492.jpg 328w, https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover-133x200.jpg 133w, https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover-768x1152.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover-738x1107.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Modern-Mechanix-October-1934-cover.jpg 800w" sizes="(max-width: 328px) 100vw, 328px"></a><figcaption><em>Modern Mechanix</em> (October 1934)</figcaption></figure></div>


<p>Another proposal, as reported in <em>Modern Mechanix</em> in October 1934, was to use a landing strip that could double as solar panel:</p>



<blockquote><p>The ordinary cigar-shaped dirigible would in effect have a slice taken from the upper half of her gas bag. This would provide a large deck on which could be mounted solar photo cells, an airplane runway and a hangar. Planes could land on the dirigible, floating over the sea, to refuel for transocean passenger service.</p></blockquote>



<p>Goodyear advertised a “flying carrier for warplanes” in the May 1942 edition of <em>Popular Mechanics</em> that it said could cruise at a speed of 50 nautical miles per hour, “more than twice the speed of surface aircraft carriers.”</p>



<blockquote><p>Immune, of course, to submarine attack, the airship would be expected to operate beyond the range of lang-based enemy planes and at altitudes above the effective gun range of surface vessels.</p></blockquote>


<div>
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway.jpg"><img loading="lazy" decoding="async" width="738" height="308" data-attachment-id="120668" data-permalink="https://neverwasmag.com/flying-carrier-cutaway/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway.jpg" data-orig-size="1200,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flying carrier cutaway" data-image-description="<p>Cutaway of a “flying carrier for warplanes”, from Popular Mechanics (May 1942)</p>
" data-image-caption="<p>Cutaway of a “flying carrier for warplanes”, from Popular Mechanics (May 1942)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway-300x125.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway-738x308.jpg" src="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway-738x308.jpg" alt="Flying carrier cutaway" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway-738x308.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway-300x125.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway-768x320.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway-996x415.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-carrier-cutaway.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Cutaway of a “flying carrier for warplanes” from <em>Popular Mechanics</em> (May 1942)</figcaption></figure></div>


<p>A year later, <em>Popular Science</em> reported on a design by Horace Chapman Young and Eric Langlands that could double as passenger ship and flying aircraft carrier.</p>



<blockquote><p>The Airwing, as the craft is called, is built as a flying wing with space within its single-wing body for helium, fuel, crew and payload and tunnels in which propellers or blowers operate.</p></blockquote>



<p>The idea was that the plane would pull and push itself forward — “pulling through suction caused by a semivacuum created in front, and driven by exhaust pressure at the rear.” The helium would give it additional lifting power.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration.jpg"><img loading="lazy" decoding="async" width="738" height="369" data-attachment-id="120672" data-permalink="https://neverwasmag.com/flying-aircraft-carrier-illustration/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration.jpg" data-orig-size="1200,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flying aircraft carrier illustration" data-image-description="<p>Illustration of a flying aircraft carrier from Popular Science (February 1943)</p>
" data-image-caption="<p>Illustration of a flying aircraft carrier from Popular Science (February 1943)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration-300x150.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration-738x369.jpg" data-id="120672" src="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration-738x369.jpg" alt="Flying aircraft carrier illustration" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration-738x369.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration-300x150.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration-768x384.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration-996x498.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-illustration.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway.jpg"><img loading="lazy" decoding="async" width="677" height="492" data-attachment-id="120671" data-permalink="https://neverwasmag.com/flying-aircraft-carrier-cutaway/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway.jpg" data-orig-size="1100,800" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Flying aircraft carrier cutaway" data-image-description="<p>Cutaway of a flying aircraft carrier from Popular Science (February 1943)</p>
" data-image-caption="<p>Cutaway of a flying aircraft carrier from Popular Science (February 1943)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway-275x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway-677x492.jpg" data-id="120671" src="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway-677x492.jpg" alt="Flying aircraft carrier cutaway" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway-677x492.jpg 677w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway-275x200.jpg 275w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway-768x559.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway-738x537.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway-996x724.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Flying-aircraft-carrier-cutaway.jpg 1100w" sizes="(max-width: 677px) 100vw, 677px"></a></figure>
<figcaption>Cutaway from <em>Popular Science</em> (February 1943)</figcaption></figure>



<p>A more serious study was carried out by Lockheed in the 1950s. Its CL-1201 was meant to be a giant nuclear-powered aircraft carrier with a whole string of jets under its wing. It would have been the largest plane ever built — but it never was.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic.jpg"><img loading="lazy" decoding="async" width="738" height="470" data-attachment-id="120622" data-permalink="https://neverwasmag.com/lockheed-cl-1201-schematic/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic.jpg" data-orig-size="1100,700" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Lockheed CL-1201 schematic" data-image-description="<p>Schematic of a Lockheed CL-1201</p>
" data-image-caption="<p>Schematic of a Lockheed CL-1201</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic-300x191.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic-738x470.jpg" data-id="120622" src="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic-738x470.jpg" alt="Lockheed CL-1201 schematic" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic-738x470.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic-300x191.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic-768x489.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic-996x634.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-schematic.jpg 1100w" sizes="(max-width: 738px) 100vw, 738px"></a></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork.jpg"><img loading="lazy" decoding="async" width="738" height="335" data-attachment-id="120618" data-permalink="https://neverwasmag.com/lockheed-cl-1201-artwork/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork.jpg" data-orig-size="1100,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Lockheed CL-1201 artwork" data-image-description="<p>Artist’s impression of a Lockheed CL-1201</p>
" data-image-caption="<p>Artist’s impression of a Lockheed CL-1201</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork-300x136.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork-738x335.jpg" data-id="120618" src="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork-738x335.jpg" alt="Lockheed CL-1201 artwork" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork-738x335.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork-300x136.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork-768x349.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork-996x453.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Lockheed-CL-1201-artwork.jpg 1100w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Artist’s impression of a Lockheed CL-1201</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway.jpg"><img loading="lazy" decoding="async" width="738" height="335" data-attachment-id="120620" data-permalink="https://neverwasmag.com/boeing-747-cutaway/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway.jpg" data-orig-size="1100,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Boeing 747 cutaway" data-image-description="<p>Cutaway of a Boeing 747 converted into an aircraft carrier</p>
" data-image-caption="<p>Cutaway of a Boeing 747 converted into an aircraft carrier</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway-300x136.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway-738x335.jpg" data-id="120620" src="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway-738x335.jpg" alt="Boeing 747 cutaway" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway-738x335.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway-300x136.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway-768x349.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway-996x453.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-cutaway.jpg 1100w" sizes="(max-width: 738px) 100vw, 738px"></a></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork.jpg"><img loading="lazy" decoding="async" width="738" height="295" data-attachment-id="120621" data-permalink="https://neverwasmag.com/boeing-747-artwork/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork.jpg" data-orig-size="1000,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Boeing 747 artwork" data-image-description="<p>Artist’s impression of a Boeing 747 converted into an aircraft carrier</p>
" data-image-caption="<p>Artist’s impression of a Boeing 747 converted into an aircraft carrier</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork-300x120.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork-738x295.jpg" data-id="120621" src="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork-738x295.jpg" alt="Boeing 747 artwork" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork-738x295.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork-300x120.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork-768x307.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork-996x398.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Boeing-747-artwork.jpg 1000w" sizes="(max-width: 738px) 100vw, 738px"></a></figure>
<figcaption>Cutaway of a Boeing 747 converted into an aircraft carrier</figcaption></figure>



<p>In the early 1970s, the United States Air Force studied the possibility of converting a Boeing 747 into a flying aircraft carrier. The problem was developing fighter jets small enough to fit inside.</p>



<p>Such practicalities don’t bother us ‘punks. Let’s move on to the fictional examples!</p>



<p>The best-known is S.H.I.E.L.D.’s helicarrier from the Marvel comic books and movies. It has gone through various iterations, from literally a flying ship to the rotor-blade version of the most recent cinematic adaptations.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier.jpg"><img loading="lazy" decoding="async" width="656" height="492" data-attachment-id="119286" data-permalink="https://neverwasmag.com/shield-helicarrier/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier.jpg" data-orig-size="1200,900" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="SHIELD helicarrier" data-image-description="<p>S.H.I.E.L.D. helicarrier (Comic Unknown)</p>
" data-image-caption="<p>S.H.I.E.L.D. helicarrier (Comic Unknown)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier-267x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier-656x492.jpg" data-id="119286" src="https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier-656x492.jpg" alt="SHIELD helicarrier" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier-656x492.jpg 656w, https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier-267x200.jpg 267w, https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier-768x576.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier-738x554.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier-996x747.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/SHIELD-helicarrier.jpg 1200w" sizes="(max-width: 656px) 100vw, 656px"></a><figcaption>S.H.I.E.L.D. helicarrier (Comic Unknown)</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene.jpg"><img loading="lazy" decoding="async" width="656" height="492" data-attachment-id="119285" data-permalink="https://neverwasmag.com/secret-war-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene.jpg" data-orig-size="1200,900" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Secret War scene" data-image-description="<p>S.H.I.E.L.D. helicarrier art by Gabriele Dell’Otto from Secret War, Volume 1</p>
" data-image-caption="<p>S.H.I.E.L.D. helicarrier art by Gabriele Dell’Otto from Secret War, Volume 1</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene-267x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene-656x492.jpg" data-id="119285" src="https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene-656x492.jpg" alt="Secret War scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene-656x492.jpg 656w, https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene-267x200.jpg 267w, https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene-768x576.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene-738x554.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene-996x747.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/Secret-War-scene.jpg 1200w" sizes="(max-width: 656px) 100vw, 656px"></a><figcaption>Art by Gabriele Dell’Otto from <em>Secret War,</em> Volume 1</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene.jpg"><img loading="lazy" decoding="async" width="738" height="492" data-attachment-id="119283" data-permalink="https://neverwasmag.com/nick-fury-agent-of-shield-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene.jpg" data-orig-size="1200,800" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Nick Fury Agent of SHIELD scene" data-image-description="<p>Helicarrier in Nick Fury: Agent of S.H.I.E.L.D. (1998)</p>
" data-image-caption="<p>Helicarrier in Nick Fury: Agent of S.H.I.E.L.D. (1998)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene-300x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene-738x492.jpg" data-id="119283" src="https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene-738x492.jpg" alt="Nick Fury Agent of SHIELD scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene-738x492.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene-300x200.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene-768x512.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene-996x664.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/Nick-Fury-Agent-of-SHIELD-scene.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Helicarrier in <em>Nick Fury: Agent of S.H.I.E.L.D.</em> (1998)</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene.jpg"><img loading="lazy" decoding="async" width="738" height="369" data-attachment-id="119284" data-permalink="https://neverwasmag.com/captain-america-the-winter-soldier-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene.jpg" data-orig-size="1200,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Captain America The Winter Soldier scene" data-image-description="<p>Helicarrier in Captain America: The Winter Soldier (2014)</p>
" data-image-caption="<p>Helicarrier in Captain America: The Winter Soldier (2014)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene-300x150.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene-738x369.jpg" data-id="119284" src="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene-738x369.jpg" alt="Captain America The Winter Soldier scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene-738x369.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene-300x150.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene-768x384.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene-996x498.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/Captain-America-The-Winter-Soldier-scene.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Helicarrier in <em>Captain America: The Winter Soldier</em> (2014)</figcaption></figure>
</figure>


<div>
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene.jpg"><img loading="lazy" decoding="async" width="738" height="431" data-attachment-id="119288" data-permalink="https://neverwasmag.com/captain-scarlet-and-the-mysterons-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene.jpg" data-orig-size="1200,700" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Captain Scarlet and the Mysterons scene" data-image-description="<p>Cloudbase in Captain Scarlet and the Mysterons (1967-68)</p>
" data-image-caption="<p>Cloudbase in Captain Scarlet and the Mysterons (1967-68)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene-300x175.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene-738x431.jpg" src="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene-738x431.jpg" alt="Captain Scarlet and the Mysterons scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene-738x431.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene-300x175.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene-768x448.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene-996x581.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/Captain-Scarlet-and-the-Mysterons-scene.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Cloudbase in <em>Captain Scarlet and the Mysterons</em></figcaption></figure></div>


<p>Spectrum, the international security agency in <em>Captain Scarlet and the Mysterons</em>&nbsp;(1967-68), has a similar skyborne headquarters called Cloudbase.</p>



<p>So does the United Nations Intelligence Taskforce (UNIT) in <em>Doctor Who</em>. Its flying aircraft carrier is called the <em>Valiant</em>.</p>



<p>Peter McKinstry’s concept art for the <em>Valiant</em> looks remarkably similar to Kevin Conran’s for <em>Sky Captain and the World of Tomorrow</em> (2004). I’m not sure if that was deliberate.</p>



<p>The carriers of <em>Sky Captain</em> ended up looking differently and they do not belong to any international organization. Rather, because the United Kingdom was still the world’s premier sea power in the real-world 1930s, in the film they are part of the British fleet.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art.jpg"><img loading="lazy" decoding="async" width="738" height="431" data-attachment-id="119290" data-permalink="https://neverwasmag.com/doctor-who-concept-art/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art.jpg" data-orig-size="1200,700" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Doctor Who concept art" data-image-description="<p>Doctor Who concept art by Peter McKinstry</p>
" data-image-caption="<p>Doctor Who concept art by Peter McKinstry</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art-300x175.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art-738x431.jpg" data-id="119290" src="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art-738x431.jpg" alt="Doctor Who concept art" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art-738x431.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art-300x175.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art-768x448.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art-996x581.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-concept-art.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Concept art by Peter McKinstry</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene.jpg"><img loading="lazy" decoding="async" width="738" height="431" data-attachment-id="119291" data-permalink="https://neverwasmag.com/doctor-who-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene.jpg" data-orig-size="1200,700" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Doctor Who scene" data-image-description="<p>Flying aircraft carrier Valiant in “The Poison Sky”</p>
" data-image-caption="<p>Flying aircraft carrier Valiant in “The Poison Sky”</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene-300x175.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene-738x431.jpg" data-id="119291" src="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene-738x431.jpg" alt="Doctor Who scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene-738x431.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene-300x175.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene-768x448.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene-996x581.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/Doctor-Who-scene.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption><em>Valiant</em> in “The Poison Sky”</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5.jpg"><img loading="lazy" decoding="async" width="1100" height="730" data-attachment-id="113484" data-permalink="https://neverwasmag.com/2016/12/kevin-conrans-sky-captain-concept-art/sky-captain-concept-art-by-kevin-conran-6/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5.jpg" data-orig-size="1100,730" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Sky Captain concept art by Kevin Conran" data-image-description="<p>Concept art for Sky Captain and the World of Tomorrow by Kevin Conran</p>
" data-image-caption="<p>Concept art for Sky Captain and the World of Tomorrow by Kevin Conran</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5-300x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5-738x490.jpg" data-id="113484" src="https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5.jpg" alt="Sky Captain concept art by Kevin Conran" srcset="https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5.jpg 1100w, https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5-300x200.jpg 300w, https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5-768x510.jpg 768w, https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5-738x490.jpg 738w, https://neverwasmag.com/wp-content/uploads/2016/12/Sky-Captain-concept-art-by-Kevin-Conran-5-996x661.jpg 996w" sizes="(max-width: 1100px) 100vw, 1100px"></a><figcaption>Concept art by Kevin Conran</figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene.jpg"><img loading="lazy" decoding="async" width="1200" height="675" data-attachment-id="118198" data-permalink="https://neverwasmag.com/2020/05/what-if-world-war-ii-never-happened/sky-captain-and-the-world-of-tomorrow-scene-2/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene.jpg" data-orig-size="1200,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sky Captain and the World of Tomorrow scene" data-image-description="<p>Flying British aircraft carriers in Sky Captain and the World of Tomorrow (2004)</p>
" data-image-caption="<p>Flying British aircraft carriers in Sky Captain and the World of Tomorrow (2004)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene-300x169.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene-738x415.jpg" data-id="118198" src="https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene.jpg" alt="Sky Captain and the World of Tomorrow scene" srcset="https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene.jpg 1200w, https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene-300x169.jpg 300w, https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene-768x432.jpg 768w, https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene-738x415.jpg 738w, https://neverwasmag.com/wp-content/uploads/2018/09/Sky-Captain-and-the-World-of-Tomorrow-scene-996x560.jpg 996w" sizes="(max-width: 1200px) 100vw, 1200px"></a><figcaption>Scene in <em>Sky Captain and the World of Tomorrow</em></figcaption></figure>
</figure>



<p>The French-Canadian animation series <em>Skyland</em> (2005-07) features two flying aircraft carriers, the <em>Saint Nazaire</em> and the <em>Calisto</em>. Both carry ten fighter aircraft called Mosquitos. Their enemies, the dictatorial Sphere, operate a vertical mothership called <em>The Monolith</em>, which carries both smaller fighters and troops.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1.jpg"><img loading="lazy" decoding="async" width="738" height="410" data-attachment-id="120626" data-permalink="https://neverwasmag.com/skyland-scene-2/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1.jpg" data-orig-size="900,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Skyland scene" data-image-description="<p>The Saint Nazaire, one of the rebel airships in Skyland (2005-07)</p>
" data-image-caption="<p>The Saint Nazaire, one of the rebel airships in Skyland (2005-07)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1-300x167.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1-738x410.jpg" data-id="120626" src="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1-738x410.jpg" alt="Skyland scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1-738x410.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1-300x167.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1-768x427.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-1.jpg 900w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>The <em>Saint Nazaire</em> in <em>Skyland</em></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene.jpg"><img loading="lazy" decoding="async" width="656" height="492" data-attachment-id="120625" data-permalink="https://neverwasmag.com/skyland-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene.jpg" data-orig-size="800,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Skyland scene" data-image-description="<p>The Monolith, a vertical aircraft carrier operated by the dictatorial Sphere in Skyland (2005-07)</p>
" data-image-caption="<p>The Monolith, a vertical aircraft carrier operated by the dictatorial Sphere in Skyland (2005-07)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-267x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-656x492.jpg" data-id="120625" src="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-656x492.jpg" alt="Skyland scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-656x492.jpg 656w, https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-267x200.jpg 267w, https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-768x576.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene-738x554.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Skyland-scene.jpg 800w" sizes="(max-width: 656px) 100vw, 656px"></a><figcaption><em>The Monolith</em> in <em>Skyland</em></figcaption></figure>
</figure>



<p>Steampunk fans will be familiar with <em><a href="http://www.girlgeniusonline.com/">Girl Genius</a></em>, Phil and Kaja Foglio’s long-running webcomic. The series has not a flying aircraft carrier per se but a flying fortress, called <em>Castle Wulfenbach</em>, that can hold entire airships in its vast hangar bays. It is the headquarters of Baron Klaus Wulfenbach, the tyrant of Europe.</p>



<p>In <em>Iron Sky</em> (2012, our review <a href="https://neverwasmag.com/2012/04/iron-sky/">here</a>), the Nazis fly similarly oversized zeppelins, except these can go into space and carry a squadron of flying discs.</p>



<p>A smaller version can be found in the 2008 game <em>Turning Point: Fall of Liberty</em>, where a German <em>Flugzeugträger</em> carries a complement of fighter jets and smaller patrol zeppelins.</p>



<p>In the world of <em>The Magnificent Kotobuki</em> (2019), airships ferry goods between distant parts of the world. Each carries a squadron of fighter planes in its belly to defend against sky pirates.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene.jpg"><img loading="lazy" decoding="async" width="1100" height="600" data-attachment-id="119292" data-permalink="https://neverwasmag.com/girl-genius-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene.jpg" data-orig-size="1100,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Girl Genius scene" data-image-description="<p>Castle Wulfenbach in Girl Genius</p>
" data-image-caption="<p>Castle Wulfenbach in Girl Genius</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene-300x164.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene-738x403.jpg" data-id="119292" src="https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene.jpg" alt="Girl Genius scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene.jpg 1100w, https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene-300x164.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene-768x419.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene-738x403.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Girl-Genius-scene-996x543.jpg 996w" sizes="(max-width: 1100px) 100vw, 1100px"></a><figcaption><em>Castle Wulfenbach</em> in <em>Girl Genius</em></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene.jpg"><img loading="lazy" decoding="async" width="1200" height="675" data-attachment-id="120910" data-permalink="https://neverwasmag.com/iron-sky-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene.jpg" data-orig-size="1200,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Iron Sky scene" data-image-description="<p>Zeppelin in Iron Sky (2012)</p>
" data-image-caption="<p>Zeppelin in Iron Sky (2012)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene-300x169.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene-738x415.jpg" data-id="120910" src="https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene.jpg" alt="Iron Sky scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene.jpg 1200w, https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene-300x169.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene-768x432.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene-738x415.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/09/Iron-Sky-scene-996x560.jpg 996w" sizes="(max-width: 1200px) 100vw, 1200px"></a><figcaption>Zeppelin in <em>Iron Sky</em></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene.jpg"><img loading="lazy" decoding="async" width="1100" height="600" data-attachment-id="120651" data-permalink="https://neverwasmag.com/turning-point-fall-of-liberty-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene.jpg" data-orig-size="1100,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Turning Point: Fall of Liberty scene" data-image-description="<p>Zeppelin in Turning Point: Fall of Liberty (2008)</p>
" data-image-caption="<p>Zeppelin in Turning Point: Fall of Liberty (2008)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene-300x164.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene-738x403.jpg" data-id="120651" src="https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene.jpg" alt="Turning Point: Fall of Liberty scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene.jpg 1100w, https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene-300x164.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene-768x419.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene-738x403.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Turning-Point-Fall-of-Liberty-scene-996x543.jpg 996w" sizes="(max-width: 1100px) 100vw, 1100px"></a><figcaption>Zeppelin in <em>Turning Point: Fall of Liberty</em></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene.jpg"><img loading="lazy" decoding="async" width="1200" height="675" data-attachment-id="120665" data-permalink="https://neverwasmag.com/the-magnificent-kotobuki-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene.jpg" data-orig-size="1200,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The Magnificent Kotobuki scene" data-image-description="<p>Airship in The Magnificent Kotobuki (2019)</p>
" data-image-caption="<p>Airship in The Magnificent Kotobuki (2019)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene-300x169.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene-738x415.jpg" data-id="120665" src="https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene.jpg" alt="The Magnificent Kotobuki scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene.jpg 1200w, https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene-300x169.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene-768x432.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene-738x415.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/The-Magnificent-Kotobuki-scene-996x560.jpg 996w" sizes="(max-width: 1200px) 100vw, 1200px"></a><figcaption>Airship in <em>The Magnificent Kotobuki</em></figcaption></figure>
</figure>



<p>The <em>Ace Combat</em>&nbsp;series is extremely fond of flying aircraft carriers. The games start off with the fairly conventional-looking UI-4053&nbsp;<em>Sphyrna</em> in&nbsp;<em>Ace Combat 3: Electrosphere</em>&nbsp;(1999), an airship with a hangar deck. It ups the ante in <em>Ace Combat 6: Fires of Liberation</em> (2007) with the <em>Aigaion</em>, a kilometer-wide flying wing with an even bigger hangar deck. The next game, <em>Ace Combat 7: Skies Unknown</em>&nbsp;(2019), has a propeller aircraft <a href="https://neverwasmag.com/2018/04/strange-aircraft-of-the-third-reich-real-and-imagined/">not unlike the flying wing</a> in <em>Captain America: The First Avenger</em> (2011) that can carry eighty attack drones.</p>



<p><em>Saints Row: The Third</em> (2011) features the <em>Daedalus</em>, a mobile aircraft carrier similar to some interpretations of the S.H.I.E.L.D. helicarrier.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene.jpg"><img loading="lazy" decoding="async" width="738" height="415" data-attachment-id="120632" data-permalink="https://neverwasmag.com/ace-combat-3-electrosphere-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene.jpg" data-orig-size="1200,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Ace Combat 3: Electrosphere scene" data-image-description="<p>UI-4053 Sphyrna in Ace Combat 3: Electrosphere (1999)</p>
" data-image-caption="<p>UI-4053 Sphyrna in Ace Combat 3: Electrosphere (1999)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene-300x169.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene-738x415.jpg" data-id="120632" src="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene-738x415.jpg" alt="Ace Combat 3: Electrosphere scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene-738x415.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene-300x169.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene-768x432.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene-996x560.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-3-Electrosphere-scene.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>UI-4053 <em>Sphyrna</em> in <em>Ace Combat 3: Electrosphere</em></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene.jpg"><img loading="lazy" decoding="async" width="738" height="415" data-attachment-id="120633" data-permalink="https://neverwasmag.com/ace-combat-6-fires-of-liberation-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene.jpg" data-orig-size="1200,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Ace Combat 6: Fires of Liberation scene" data-image-description="<p>Aigaion in Ace Combat 6: Fires of Liberation (2007)</p>
" data-image-caption="<p>Aigaion in Ace Combat 6: Fires of Liberation (2007)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene-300x169.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene-738x415.jpg" data-id="120633" src="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene-738x415.jpg" alt="Ace Combat 6: Fires of Liberation scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene-738x415.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene-300x169.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene-768x432.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene-996x560.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-6-Fires-of-Liberation-scene.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption><em>Aigaion</em> in <em>Ace Combat 6: Fires of Liberation</em></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene.jpg"><img loading="lazy" decoding="async" width="738" height="415" data-attachment-id="120634" data-permalink="https://neverwasmag.com/ace-combat-7-skies-unknown-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene.jpg" data-orig-size="1200,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Ace Combat 7: Skies Unknown scene" data-image-description="<p>Arsenal Bird in Ace Combat 7: Skies Unknown (2019)</p>
" data-image-caption="<p>Arsenal Bird in Ace Combat 7: Skies Unknown (2019)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene-300x169.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene-738x415.jpg" data-id="120634" src="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene-738x415.jpg" alt="Ace Combat 7: Skies Unknown scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene-738x415.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene-300x169.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene-768x432.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene-996x560.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Ace-Combat-7-Skies-Unknown-scene.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption><em>Arsenal Bird</em> in <em>Ace Combat 7: Skies Unknown</em></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene.jpg"><img loading="lazy" decoding="async" width="738" height="415" data-attachment-id="120635" data-permalink="https://neverwasmag.com/saints-row-the-third-scene/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene.jpg" data-orig-size="1200,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Saints Row: The Third scene" data-image-description="<p>Daedalus in Saints Row: The Third (2011)</p>
" data-image-caption="<p>Daedalus in Saints Row: The Third (2011)</p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene-300x169.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene-738x415.jpg" data-id="120635" src="https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene-738x415.jpg" alt="Saints Row: The Third scene" srcset="https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene-738x415.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene-300x169.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene-768x432.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene-996x560.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/08/Saints-Row-The-Third-scene.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption><em>Daedalus</em> in <em>Saints Row: The Third</em></figcaption></figure>
</figure>



<p>Artists have given their on take on the trope. Here are examples by “<a href="https://www.deviantart.com/aoiwaffle0608">AoiWaffle0608</a>“, <a href="https://mike-doscher.squarespace.com/">Mike Doscher</a>, <a href="https://www.deviantart.com/the-necromancer">M.L. Hopp</a>, <a href="https://www.deviantart.com/javoraj">Jakub Javora</a> and <a href="https://www.deviantart.com/edarneor">Alex Pushkarev</a>.</p>



<figure data-carousel-extra="{&quot;blog_id&quot;:1,&quot;permalink&quot;:&quot;https:\/\/neverwasmag.com\/2019\/08\/flying-aircraft-carriers\/&quot;}">
<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork.jpg"><img loading="lazy" decoding="async" width="394" height="492" data-attachment-id="119294" data-permalink="https://neverwasmag.com/aoiwaffle0608-artwork-2/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork.jpg" data-orig-size="800,1000" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AoiWaffle0608 artwork" data-image-description="<p>Art by <a href=&quot;https://www.deviantart.com/aoiwaffle0608&quot;>AoiWaffle0608</a></p>
" data-image-caption="<p>Art by <a href=&quot;https://www.deviantart.com/aoiwaffle0608&quot;>AoiWaffle0608</a></p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork-160x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork-394x492.jpg" data-id="119294" src="https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork-394x492.jpg" alt="AoiWaffle0608 artwork" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork-394x492.jpg 394w, https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork-160x200.jpg 160w, https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork-768x960.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork-738x923.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/AoiWaffle0608-artwork.jpg 800w" sizes="(max-width: 394px) 100vw, 394px"></a><figcaption>Art by <a href="https://www.deviantart.com/aoiwaffle0608">AoiWaffle0608</a></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5.jpg"><img loading="lazy" decoding="async" width="738" height="415" data-attachment-id="119622" data-permalink="https://neverwasmag.com/mike-doscher-artwork-7/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5.jpg" data-orig-size="1200,675" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Mike Doscher artwork" data-image-description="<p>Art by <a href=&quot;https://mike-doscher.squarespace.com&quot;>Mike Doscher</a></p>
" data-image-caption="<p>Art by <a href=&quot;https://mike-doscher.squarespace.com&quot;>Mike Doscher</a></p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5-300x169.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5-738x415.jpg" data-id="119622" src="https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5-738x415.jpg" alt="Mike Doscher artwork" srcset="https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5-738x415.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5-300x169.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5-768x432.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5-996x560.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/04/Mike-Doscher-artwork-5.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Art by <a href="https://mike-doscher.squarespace.com/">Mike Doscher</a></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork.jpg"><img loading="lazy" decoding="async" width="738" height="341" data-attachment-id="119317" data-permalink="https://neverwasmag.com/ml-hopp-artwork/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork.jpg" data-orig-size="1300,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="M.L. Hopp artwork" data-image-description="<p>Art by <a href=&quot;https://www.deviantart.com/the-necromancer&quot;>M.L. Hopp</a></p>
" data-image-caption="<p>Art by <a href=&quot;https://www.deviantart.com/the-necromancer&quot;>M.L. Hopp</a></p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork-300x138.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork-738x341.jpg" data-id="119317" src="https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork-738x341.jpg" alt="M.L. Hopp artwork" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork-738x341.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork-300x138.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork-768x354.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork-996x460.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/ML-Hopp-artwork.jpg 1300w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Art by <a href="https://www.deviantart.com/the-necromancer">M.L. Hopp</a></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork.jpg"><img loading="lazy" decoding="async" width="656" height="492" data-attachment-id="119293" data-permalink="https://neverwasmag.com/jakub-javora-artwork/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork.jpg" data-orig-size="1200,900" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Jakub Javora artwork" data-image-description="<p>Art by <a href=&quot;https://www.deviantart.com/javoraj&quot;>Jakub Javora</a></p>
" data-image-caption="<p>Art by <a href=&quot;https://www.deviantart.com/javoraj&quot;>Jakub Javora</a></p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork-267x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork-656x492.jpg" data-id="119293" src="https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork-656x492.jpg" alt="Jakub Javora artwork" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork-656x492.jpg 656w, https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork-267x200.jpg 267w, https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork-768x576.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork-738x554.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork-996x747.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/Jakub-Javora-artwork.jpg 1200w" sizes="(max-width: 656px) 100vw, 656px"></a><figcaption>Art by <a href="https://www.deviantart.com/javoraj">Jakub Javora</a></figcaption></figure>



<figure><a href="https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork.jpg"><img loading="lazy" decoding="async" width="738" height="492" data-attachment-id="119296" data-permalink="https://neverwasmag.com/alex-pushkarev-artwork/" data-orig-file="https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork.jpg" data-orig-size="1200,800" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Alex Pushkarev artwork" data-image-description="<p>Art by <a href=&quot;https://www.deviantart.com/edarneor&quot;>Alex Pushkarev</a></p>
" data-image-caption="<p>Art by <a href=&quot;https://www.deviantart.com/edarneor&quot;>Alex Pushkarev</a></p>
" data-medium-file="https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork-300x200.jpg" data-large-file="https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork-738x492.jpg" data-id="119296" src="https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork-738x492.jpg" alt="Alex Pushkarev artwork" srcset="https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork-738x492.jpg 738w, https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork-300x200.jpg 300w, https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork-768x512.jpg 768w, https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork-996x664.jpg 996w, https://neverwasmag.com/wp-content/uploads/2019/03/Alex-Pushkarev-artwork.jpg 1200w" sizes="(max-width: 738px) 100vw, 738px"></a><figcaption>Art by <a href="https://www.deviantart.com/edarneor">Alex Pushkarev</a></figcaption></figure>
</figure>

		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Hardest Problem in Computer Science: Centering Things (1095 pts)]]></title>
            <link>https://tonsky.me/blog/centering/</link>
            <guid>40069599</guid>
            <pubDate>Wed, 17 Apr 2024 20:17:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tonsky.me/blog/centering/">https://tonsky.me/blog/centering/</a>, See on <a href="https://news.ycombinator.com/item?id=40069599">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>
        
        <p>This is my claim: we, as a civilization, forgot how to center things.</p>
        <p>I mean, we know <em>how</em> to do it. It has never been simpler:</p>
        <pre><code>display: flex;
justify-content: center; /* Horizontal centering */
align-items: center; /* Vertical centering */</code></pre>
        <p>(don’t ask why you need to remember four words instead of just horizontal/vertical, <em>it’s still better than before</em>)</p>
        <p>Or you can use grids if you want:</p>
        <pre><code>display: grid;
justify-items: center; /* Horizontal centering */
align-items: center; /* Vertical centering */</code></pre>
        <p>(also don’t ask why <code>justify-content</code> became <code>justify-items</code>)</p>
        <p>If you feel like school today, we can deduce it from the first principles:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/formula@2x.png?t=1713310106" width="360" height="230">        </figure>
        <p>Hey, even ChatGPT knows how to center things:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/chatgpt@2x.png?t=1713310106" width="720" height="720">        </figure>
        <p>Okay, maybe not right away, but eventually it gets there.</p>
        <p>What I’m saying is: everybody knows how to center things. It’s trivial. And if you are lost, the knowledge is right there.</p>
        <p>Yet, when we look at actual applications, we see that these methods are not used. We see this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/telegram_date@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>or this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/google_maps_cross@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>or even this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/feedly_beta@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>So something is clearly getting lost between know-how and applying that knowledge.</p>
        <figure>
<img src="https://tonsky.me/blog/centering/something.png?t=1713310106" width="1050" height="525">        </figure>
        <p>In theory, there’s no difference between theory and practice. Unfortunately, we live in practice.</p>
        <p>So what’s happening? Let’s find out.</p>
        <h2 id="fonts">Fonts</h2>
        <p>Fonts are one of the biggest offenders. You can see poorly aligned text everywhere. Let me showcase.</p>
        <p>Apple can’t do it:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/apple_buttons_big_sur@2x.png?t=1713310106" width="720" height="270">        </figure>
        <p>Microsoft can’t do it:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/windows@2x.webp?t=1713310106" width="720" height="337">        </figure>
        <p>GitHub can’t do it:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/github@2x.webp?t=1713310106" width="720" height="230">        </figure>
        <p>Valve can’t do it:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/steam@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Slack can’t do it:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/slack_button@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Telegram can’t do it:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/telegram@2x.webp?t=1713310106" width="720" height="170">        </figure>
        <p>Google Maps can’t do it:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/google_maps@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Honestly, I can provide an endless supply of poorly-aligned buttons without even having to look for them:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/buttons@2x.png?t=1713310106" width="720" height="650">        </figure>
        <p>I think you get the idea. Myriad companies big and small, native or web, and none are safe from text-centering problems.</p>
        <h2 id="line-height">Line height</h2>
        <p>If font metrics are not enough, the next problem on our way to perfect centering is line-height.</p>
        <p>Line height is... complicated. A canonical article to learn about it is Vincent De Oliveira’s <a href="https://iamvdo.me/en/blog/css-font-metrics-line-height-and-vertical-align" target="_blank">Deep dive CSS: font metrics, line-height and vertical-align</a>.</p>
        <p>This is how it looks applied in practice. Slack:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/slack@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Notion:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/notion@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Airbnb:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/airbnb@2x.webp?t=1713310106" width="720" height="75">        </figure>
        <p>YouTube:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/youtube@2x.webp?t=1713310106" width="720" height="150">        </figure>
        <p>Aligning two things in different containers is almost impossible:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/name@2x.webp?t=1713310106" width="720" height="130">        </figure>
        <p>Although many have tried:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/american_airlines@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Not many have succeeded:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/addons@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>CSS might get in the way (different controls having different defaults which you have to undo before even starting trying to align):</p>
        <figure>
<img src="https://tonsky.me/blog/centering/controls@2x.webp?t=1713310106" width="720" height="100">        </figure>
        <p>No easy solution here, just roll up your sleeves and delve into specifications.</p>
        <h2 id="icons">Icons</h2>
        <p>Icons are like small rectangles put in line with text. Therefore all problems caused by text AND line height apply here. Aligning icons next to text is a notoriously hard task.</p>
        <p>Atom:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/atom@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Platform formerly known as Twitter:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/twitter@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>iOS:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/ios@2x.webp?t=1713310106" width="720" height="300">        </figure>
        <p>Mozilla:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/mozilla@2x.webp?t=1713310106" width="720" height="100">        </figure>
        <p>YouTube:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/youtube_likes@2x.webp?t=1713310106" width="720" height="260">        </figure>
        <p>Sometimes icon wins over text:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/meet@2x.webp?t=1713310106" width="720" height="220">        </figure>
        <p>Sometimes text wins over icon:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/ical@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Sometimes both lose:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/name_button@2x.webp?t=1713310106" width="720" height="150">        </figure>
        <p>Some icons are just plain old HTML form controls:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/git_butler@2x.webp?t=1713310106" width="720" height="300">        </figure>
        <p>Some are stylized:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/by_bee@2x.webp?t=1713310106" width="720" height="515"><figcaption>Thanks @bee for the picture</figcaption>        </figure>
        <p>Sometimes people will get creative to achieve perfect alignment:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/github_close@2x.webp?t=1713310106" width="720" height="250">        </figure>
        <p>But overall it’s a pretty hopeless game:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/apple_id@2x.webp?t=1713310106" width="720" height="250">        </figure>
        <p>The problem is, CSS doesn’t help us either. There are 13 possible values for the <code>vertical-align</code> property, but none would align the icon in a meaningful way:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/text_align@2x.png?t=1713310106" width="720" height="810">        </figure>
        <p><code>text-align: middle</code> comes closest, but it aligns by x-height, not cap-height, which still looks unbalanced:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/middle@2x.webp?t=1713310106" width="720" height="560">        </figure>
        <p>That’s exactly why people love web programming so much. There’s always a challenge.</p>
        <h2 id="icon-fonts">Icon fonts</h2>
        <p>Aligning rectangles is relatively easy. Aligning text is hard. Icons are rectangles. So what if we put icons into a font file?</p>
        <p>Now we can’t align anything:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icon_fonts@2x.webp?t=1713310106" width="720" height="550">        </figure>
        <p>Neither can we set icon size! In the example above, all icons were set to the same font size and line height. As you can see, all of them come out different sizes, with different paddings, and none were properly aligned.</p>
        <p>Despite many shortcomings and almost no upsides, companies rushed to add icon fonts everywhere. The result is this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/calculators@2x.png?t=1713310106" width="720" height="1288"><figcaption>macOS 10.14 → macOS 10.15</figcaption>        </figure>
        <p>Notice how operators are not vertically aligned anymore and are also blurry. All because of switching to icon font.</p>
        <p>Apple was so committed to icon fonts they even ruined the QuickTime record button:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/quicktime@2x.webp?t=1713310106" width="720" height="260">        </figure>
        <p>Just look at it:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/quicktime_button@2x.webp?t=1713310106" width="720" height="400">        </figure>
        <p>Yes, it actually looks like this to this day. As does the calculator.</p>
        <p>But they are far from being the only ones. One:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icon_1@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Two:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icon_3@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Three:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icon_4@2x.webp?t=1713310106" width="720" height="196">        </figure>
        <p>Four:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icon_5@2x.webp?t=1713310106" width="720" height="100">        </figure>
        <p>Five:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icon_6@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>Six:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icon_7@2x.webp?t=1713310106" width="720" height="288">        </figure>
        <p>Seven:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icon_8@2x.webp?t=1713310106" width="720" height="120">        </figure>
        <p>Same as with text alignment, there’s an endless supply of poorly aligned icons.</p>
        <h2 id="skill-issue">Skill issue</h2>
        <p>Not only programmers fail to center things. Designers do it, too:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/things@2x.webp?t=1713310106" width="720" height="250"><figcaption><a href="https://culturedcode.com/things/blog/2024/02/things-for-apple-vision-pro/" target="_blank">Current version</a> / my fix</figcaption>        </figure>
        <p>The problem with icons is that sometimes you have to take their shape into account for things to look good:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/apple_logo@2x.webp?t=1713310106" width="720" height="300"><figcaption>Bad centering / good centering</figcaption>        </figure>
        <p>Triangle is notably tricky:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/triangle@2x.webp?t=1713310106" width="720" height="190">        </figure>
        <p>Sometimes it is too far to the left:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/triangle_left@2x.webp?t=1713310106" width="720" height="150">        </figure>
        <p>Sometimes it’s too far to the right:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/triangle_right@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>It can even be too high up (line-height strikes again):</p>
        <figure>
<img src="https://tonsky.me/blog/centering/triangle_up@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <h2 id="horizontal-centering">Horizontal centering</h2>
        <p>You might think that only centering things vertically is hard. Not only! Horizontal might be hard, too:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/apple_sign_in_business@2x.webp?t=1713310106" width="720" height="540">        </figure>
        <p>I don’t think there’s a deep reason for these, except for people just being sloppy:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/twitter_horizontal@2x.webp?t=1713310106" width="720" height="250">        </figure>
        <p>Just, come on!</p>
        <figure>
<img src="https://tonsky.me/blog/centering/android@2x.webp?t=1713310106" width="720" height="230">        </figure>
        <p>Can this be a deliberate decision?</p>
        <figure>
<img src="https://tonsky.me/blog/centering/teams@2x.png?t=1713310106" width="720" height="250">        </figure>
        <p>I don’t know. Icons can suffer from it, too:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/drive@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <p>As can text:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/steam_horizontal@2x.webp?t=1713310106" width="720" height="200">        </figure>
        <h2 id="what-can-be-done-designers">What can be done: designers</h2>
        <p>So what <em>is</em> the problem?</p>
        <p>It all starts with the font. Right now, the bounding box of a text block looks like this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/text_bounding_box@2x.png?t=1713310106" width="360" height="158">        </figure>
        <p>The problem is, it can also look like this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/text_bounding_box_2@2x.png?t=1713310106" width="360" height="158">        </figure>
        <p>or this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/text_bounding_box_3@2x.png?t=1713310106" width="360" height="161">        </figure>
        <p>Now, what will happen if you try to center text by centering its bounding box?</p>
        <figure>
<img src="https://tonsky.me/blog/centering/text_bounding_box_4.png?t=1713310106" width="720" height="290">        </figure>
        <p>The text will be off! Even though rectangles are perfectly centered.</p>
        <p>But even if font <em>can</em> have its metrics unbalanced, it doesn’t mean it does. What happens in reality?</p>
        <p>In reality, <em>most</em> of the popular fonts have metrics slightly off. Many have it <em>significantly</em> off:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/metrics@2x.png?t=1713310106" width="720" height="1322"><figcaption>Percentages are of cap-height</figcaption>        </figure>
        <p>10% is not a small number. It’s a whole pixel in font size 13! Two, if you have 2× scaling! It’s easily noticeable.</p>
        <p>Basically, Segoe UI is the reason why Github on Windows looks like this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/github@2x.webp?t=1713310106" width="720" height="230">        </figure>
        <p>The solution is simple: make tight bounding boxes and centering will become trivial:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/text_bounding_box_5.png?t=1713310106" width="720" height="290">        </figure>
        <p>If you use Figma, it already can do this (although it’s not the default):</p>
        <figure>
<img src="https://tonsky.me/blog/centering/figma_vertical_trim@2x.png?t=1713310106" width="353" height="561">        </figure>
        <h2 id="what-can-be-done-font-designers">What can be done: font designers</h2>
        <p>If you are a font designer, make life easier for everybody by setting your metrics so that <code>ascender − cap-height = descender</code>:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/font_metrics_numbers@2x.png?t=1713310106" width="720" height="400">        </figure>
        <p>Or the same idea, visually:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/font_metrics@2x.png?t=1713310106" width="720" height="400">        </figure>
        <p>Important! You don’t have to <em>actually</em> extend your ascenders/descenders to these boundaries. As you can see in the picture, my ascender space, for example, is way underutilized. Just make the numbers match.</p>
        <p>For both web and native, to avoid headaches, choose a font that already follows this rule. SF Pro Text, Inter, and Martian Mono seem to do this already, so they will center perfectly with no extra effort.</p>
        <p>See <a href="https://tonsky.me/blog/font-size/">Font size is useless; let’s fix it</a> for more information.</p>
        <h2 id="what-can-be-done-web-developers">What can be done: web developers</h2>
        <p>From the developer side, it’s a bit more tricky.</p>
        <p>The first thing to understand, you need to know which font you’ll be using. Unfortunately, this doesn’t work if you plan to substitute fonts.</p>
        <p>We’ll use IBM Plex Sans, a font used on this very page. IBM Plex Sans has the following metrics:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/ibm_plex_sans@2x.png?t=1713310106" width="720" height="350">        </figure>
        <p>When you set <code>font-size</code>, what you set is UPM (this will also be equal to <code>1em</code>). However, the actual space occupied by the text block is the space between the ascender and descender.</p>
        <figure>
<img src="https://tonsky.me/blog/centering/ibm_plex_sans_notes@2x.png?t=1713310106" width="720" height="350">        </figure>
        <p>With a few simple calculations, we get that extra <code>padding-bottom: 0.052em</code> should do the trick:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/numi@2x.webp?t=1713310106" width="720" height="325">        </figure>
        <p>Should work like this:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/ibm_plex_sans_padding@2x.png?t=1713310106" width="720" height="520">        </figure>
        <p>Or in actual CSS (select text to see default text bounding box):</p>
<p>
    <span>Andy</span>
</p>        <p>You can get the required font metrics for your font from <a href="https://opentype.js.org/font-inspector.html" target="_blank">opentype.js.org/font-inspector.html</a> (ascender, descender, sCapHeight).</p>
        <p>Now that we have that sorted, aligning icons is not that hard too. You set <code>vertical-align: baseline</code> and then move them down by <code>(iconHeight - capHeight) / 2</code>:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/ibm_plex_sans_icon@2x.png?t=1713310106" width="720" height="307">        </figure>
        <p>This, unfortunately, requires you to know both font metrics and icon size. But hey, at least it works:</p>
<p>
    <span>
    <span></span>
    Andy
    </span>
</p>        <p>Again, select the text above to see how different the browser’s bounding box is from the correct position.</p>
        <h2 id="what-can-be-done-icons-fonts">What can be done: icons fonts</h2>
        <p>STOP.</p>
        <p>USING.</p>
        <p>FONTS.</p>
        <p>FOR.</p>
        <p>ICONS.</p>
        <p>Use normal image format. The one with dimensions, you know? Width and height?</p>
        <p>Here, I drew a diagram for you, to help you make a decision:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/diagram@2x.png?t=1713310106" width="720" height="720">        </figure>
        <p>Just look at how hard Apple tries to put the checkmark inside the rectangle, and the rectangle next to the text label:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/apple_sign_in@2x.webp?t=1713310106" width="720" height="508">        </figure>
        <p>And they still fail!</p>
        <p>Nothing is easier than aligning two rectangles. Nothing is harder than trying to align text that has an arbitrary amount of empty space around it.</p>
        <p>This is a game that can’t be won.</p>
        <h2 id="what-can-be-done-optical-compensations">What can be done: optical compensations</h2>
        <p>We, developers, can only mathematically align perfect rectangles. So for anything that requires manual compensation, please wrap it in a big enough rectangle and visually balance your icon inside:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/icons_baked@2x.png?t=1713310106" width="720" height="650">        </figure>
        <h2 id="what-can-be-done-everyone">What can be done: everyone</h2>
        <p>Please pay attention. Please care. Bad centering can ruin otherwise decent UI:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/win@2x.webp?t=1713310106" width="720" height="120">        </figure>
        <p>But a properly aligned text can make your UI sing:</p>
        <figure>
<img src="https://tonsky.me/blog/centering/win_fix@2x.webp?t=1713310106" width="720" height="120">        </figure>
        <p>Even if it’s hard. Even if tools make it inconvenient. Even if you have to search for solutions. Together, I trust, we can find our way back to putting one rectangle inside another rectangle without messing it up.</p>
        <p>I, for one, want to live in a world of beautiful well-balanced UIs. I trust that you do, too. </p>
        <p>It’s all worth it in the end.</p>
        <h2 id="honorable-mention">Honorable mention</h2>
        <p>Our article would be incomplete without this guy:</p>
        <figure>
          <video autoplay="" muted="" loop="" preload="auto" playsinline="" controls="" width="720" height="200">
            <source src="https://tonsky.me/blog/centering/spinner.mp4?t=1713310106" type="video/mp4">
          </video>
        </figure>
        <p>Take care!</p>
        
      </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Cyc: History's Forgotten AI Project (254 pts)]]></title>
            <link>https://outsiderart.substack.com/p/cyc-historys-forgotten-ai-project</link>
            <guid>40069298</guid>
            <pubDate>Wed, 17 Apr 2024 19:46:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://outsiderart.substack.com/p/cyc-historys-forgotten-ai-project">https://outsiderart.substack.com/p/cyc-historys-forgotten-ai-project</a>, See on <a href="https://news.ycombinator.com/item?id=40069298">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><blockquote><p><span>The Cyc group at MCC is attempting to build a single intelligent agent whose knowledge base contains […] tens of millions of entries. We believe such a system will be a useful, perhaps necessary, platform on which to undertake the next generation of work in expert systems, natural language understanding, and machine learning.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-1-143686236" href="https://outsiderart.substack.com/p/cyc-historys-forgotten-ai-project#footnote-1-143686236" target="_self" rel="nofollow ugc noopener">1</a></span></p></blockquote><p>Six miles north of downtown Austin, Texas, in an unassuming office park just off the Mopac Expressway, stands the headquarters of Cyc, one of the most ambitious artificial intelligence projects in history – a four decade-long effort to codify the common-sense knowledge that is the foundation of human reasoning. Its researchers have produced a corpus of 1.5 million concepts and 25 million rules that feed an inference engine with more than a thousand specialized submodules. The system can use both common-sense knowledge and deep domain expertise to make deductions from chains of reasonings that are thousands of steps long. Its users range from an Ohio research hospital to the National Security Agency.</p><p>Yet despite its impressive achievements, Cyc has been largely forgotten, left behind by a new generation of machine-learning algorithms that power the chatbots and self-driving cars of today. How did one of the grandest experiments in AI end up as a historical footnote?</p><p>In 1983, a group of AI researchers met at Stanford to discuss a vexing issue in AI research: how to program machines with common sense.</p><p><span>The organizer of the meeting, Stanford professor Doug Lenat, had been thinking about the problem for some time. In the 1970s, he had made a name for himself with a series of programs that exhibited striking flashes of intelligence. The first, AM (short for 'Automated Mathematician'), was pre-programmed with some elementary mathematics and told to search for 'interesting' theorems. It found hundreds, many mundane but some of them remarkably creative; one discovery mirrored work done by the mathematical prodigy </span><a href="https://en.wikipedia.org/wiki/Srinivasa_Ramanujan" rel="nofollow ugc noopener">Srinivasa Ramanujan</a><span>.</span></p><p><span>AM's biggest shortcoming was the fact that its heuristics were hard-coded – meaning that it couldn't change tactics once it ran out of ideas. In Lenat's next program, EURISKO, the heuristics themselves could be evaluated and modified by the program. Lenat used EURISKO to compete against human opponents at a complicated table-top board game called Traveller Trillion Credit Squadron. Guided by Lenat, the system suggested a highly unorthodox strategy that seemed unlikely to work. But the unconventional strategy paid off, and Lenat–EURISKO won the tournament.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-2-143686236" href="https://outsiderart.substack.com/p/cyc-historys-forgotten-ai-project#footnote-2-143686236" target="_self" rel="nofollow ugc noopener">2</a></span></p><p>Still, EURISKO eventually slowed down, too. Lenat wagered that a machine that could draw on a large body of general knowledge – what humans call 'common sense' – when it got stuck would have a better chance of achieving genuine intelligence than clever but simple-minded programs like AM and EURISKO.</p><p>At the time, the cutting edge in artificial intelligence was so-called 'expert systems'. Unlike traditional programs that proceeded mechanically along a hard-coded path (like a glorified flowchart), expert systems made inferences and deductions from a set of facts and rules written by domain experts in fields like medical diagnosis and organic chemistry. They were (in theory) capable of performing a rudimentary kind of reasoning and dealing more flexibly with complex situations.</p><p>However, each expert system had its own database of rules, which meant both wasteful duplication and the inability of different expert systems to talk to one another. Lenat saw that a shared bank of common-sense knowledge could be the foundation for a new generation of even more effective systems.</p><p>At the Stanford meeting, Lenat and the other researchers calculated that a machine would need to know several million rules before it reached the 'crossover point' when it could begin to learn on its own. Assembling such a knowledge base would take 2,000 person-years of effort – not unthinkable, but beyond the resources of a busy professor and a few grad students.</p><p><span>Lenat soon got the chance to pursue his vision outside the confines of academic research. The year after the Stanford meeting, ten US companies formed the Microelectronics and Computer Technology Corporation (MCC), a research consortium to counter an </span><a href="https://en.wikipedia.org/wiki/Fifth_Generation_Computer_Systems" rel="nofollow ugc noopener">ambitious computing initiative</a><span> launched by the Japanese government. Lenat was considering a tenured position as a professor at Stanford, but the attraction of private-sector-scale resources proved too great. He signed on as MCC's chief scientist. Armed with a half-billion dollar budget and hundreds of employees, he headed MCC's flagship project: to produce the massive knowledge base that machines would need to reason like humans. They called it Cyc, from 'encyclopedia'.</span></p><p><span>Despite its name, Cyc was not meant to be encyclopedic </span><em>per se</em><span>; it would cover an even more basic level of knowledge – propositions like 'A person is born only once' and 'Animals can't talk except in fairy tales' that are so obvious that no one bothers to write them down. Cyc would be the foundation for specialized expert systems that would have domain knowledge about things like chemical compounds and human anatomy.</span></p><p><span>Cyc's knowledge base is a collection of </span><em>frames</em><span> (also called </span><em>units</em><span>), with </span><em>slots</em><span> for properties and </span><em>entries</em><span> for their values. Concretely, the frame 'Texas' has a 'capital' slot with the entry 'Austin'. Frames are organized into a global ontology, meaning that each frame belongs to one or more categories, and categories themselves belong to categories, all the way up to a root 'Thing' category that encompasses everything in the knowledge base.</span></p><p>On top of frames sits a constraint language that allows the system to express logical concepts like quantification ('every X is Y') and disjunction ('X or Y but not both'), and an inference engine to make deductions and answer queries. While there is a general-purpose reasoning engine, specialized inference engines are used for most queries for efficiency.</p><p>Cyc has 'microtheories' which allow it to reconcile seemingly contradictory facts from different domains, for example classical physics and quantum mechanics. In general, Cyc does not have 'probability factors', but it does have coarse notions of likelihood, as well as awareness that some facts (like the population of a country) are estimates and others (like the fact that dogs have four legs) are only true by default.</p><p>The 'ontological engineers' employed by Cyc originally entered the frames by hand. One technique they used was reading English text and looking for sentences with ambiguous pronouns: in a case where a pronoun like 'he' or 'she' was syntactically ambiguous, what common-sense knowledge does a human use to identify the referent? Consider these two sentences:</p><blockquote><p>Tom was mad at Joe because he stole his lunch.</p><p>Tom was mad at Joe so he stole his lunch.</p></blockquote><p>As any speaker of English can deduce without conscious effort, the word 'he' refers to Joe in the first sentence but Tom in the second, despite differing by only one word. We know this because of our understanding of human behavior and the concepts of anger and theft – it is logical that Tom would be mad at Joe if Joe stole Tom's lunch, but not if Tom stole Joe's lunch. But machines do not know this and must be taught explicitly.</p><p>Another technique was looking at pairs of sentences and figuring out the subtext that links them. For instance: "Of the five schools that accepted her, Mary decided to go to Harvard. She graduated with a degree in chemistry." Between the two sentences, we infer that Mary probably left home and went to Massachusetts for a period of approximately four years; took a few dozen courses, many but not all of which were in chemistry; met other students and professors at the university; and many other things that are left unstated. An intelligent system like Cyc ought to be able to make these inferences; if it cannot, the ontological engineers have to figure out what axioms to add to the knowledge base so that it can.</p><p><span>Work on Cyc progressed steadily through the ten years that MCC was funded. In a 1989 book-length report on the project, the Cyc team projected optimism. The knowledge base had reached 1 million 'pieces of data', including 50,000 individual units and 6,000 collections. Many "representational thorns" – difficulties in representing real-world knowledge within the system, some of which were in fact ancient problems in philosophy</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-3-143686236" href="https://outsiderart.substack.com/p/cyc-historys-forgotten-ai-project#footnote-3-143686236" target="_self" rel="nofollow ugc noopener">3</a></span><span> – were encountered and dealt with. The guiding philosophy was pragmatism over elegance: age-old philosophical problems were side-stepped with practical solutions. The infamous </span><a href="https://plato.stanford.edu/entries/causation-metaphysics/" rel="nofollow ugc noopener">problem of causation</a><span>, for instance, was reduced to the idea that 'E1 causes E2' means 'if E1 is observed, predict that E2 will happen'.</span></p><p><span>When MCC disbanded in 1994, Cyc was spun off under a new company called Cycorp (pronounced "SIGH-core"). Cycorp sustained itself financially through contracts with the government and corporations. Much of what Cycorp did in this period has not been publicly disclosed, but a few projects have come to light through research papers and technical reports. Cyc was used by the Cleveland Clinic for answering </span><em>ad hoc</em><span> questions from medical researchers; it reduced the time from as long as a month of manual back-and-forth between medical and database experts, to less than an hour. Cycorp also partnered with the US intelligence community to assist in building a 'terrorism knowledge base' that analysts could query. Cyc's grasp of common-sense knowledge helped it 'fill in the blanks' in synthesizing information from different sources that was often incomplete or contradictory.</span></p><p>In the 2000s, Cycorp released a subset of the knowledge base as OpenCyc, and offered researchers an expanded version called ResearchCyc. A few outside researchers published papers based on the Cyc system. But the core product remained proprietary, and OpenCyc releases stopped in 2012.</p><p><span>While Cyc was slowly but steadily growing its knowledge base, the field of artificial intelligence was radically changing. Most expert systems were long gone by the 2000s. Neural networks using deep learning, a type of statistical machine learning based on generic, opaque algorithms trained on massive amounts of data, were making huge breakthroughs. It was practically the antithesis of Cyc's logical reasoning and painstakingly handcrafting knowledge base of explicit rules. But despite their lack of common-sense knowledge, deep-learning algorithms proved to be fantastically successful at previously intractable problems. Beginning with </span><a href="https://en.wikipedia.org/wiki/AlexNet" rel="nofollow ugc noopener">AlexNet</a><span> in 2012, neural nets revolutionized the field of image recognition. Game-playing programs by Google's DeepMind lab trounced the previous strongest chess-playing program and beat one of the world's top go players. And neural nets were behind the astonishing success of large language models like ChatGPT and Gemini. In a field now dominated by machine learning, Cyc's rule-based, symbolic approach increasingly looked like an anachronism.</span></p><p>Yet, forty years after its inception, Cyc is still here. It has grown to a knowledge base of 25 million rules, 1.5 million concepts, and more than a thousand specialized inference engines. Cycorp employs 50 technical staff members and is completely funded by its commercial contracts. Nevertheless, to the extent that Cyc is remembered at all in the AI community, it is as a cautionary tale of tremendous effort wasted on a misguided approach.</p><p><span>The verdict is harsh – but the expectations were high. In 1989, Lenat and co-author </span><a href="https://en.wikipedia.org/wiki/Ramanathan_V._Guha" rel="nofollow ugc noopener">R. V. Guha</a><span> wrote "we hope that by 1999 no one would even </span><em>think</em><span> about having a computer that doesn't have Cyc running on it". They have had to settle for more modest victories. Surviving for forty years in an industry notorious for its boom-and-bust cycles is a noteworthy achievement, but Cyc's impact has failed to be revolutionary. While outsiders cannot assess the capabilities of the proprietary system, it is fair to infer that if Cyc had achieved an epoch-making breakthrough, the wider world would have heard about it.</span></p><p>Still, while overshadowed by flashier programs like ChatGPT, Cyc should not be counted out. Lenat, who passed away in 2023, wrote his final paper about the opportunities for Cyc and LLMs to complement each other. LLMs are fluent and knowledgeable, but often inconsistent and inaccurate. Cyc is not as good at understanding and generating English text, but its conclusions are always supported by a chain of reasoning that can be audited by a human. An integrated Cyc–LLM system could be a powerful synthesis.</p><p>The course of progress is unpredictable: fertile areas of research turn barren and methodologies that were left for dead suddenly come back to life. Neural nets were invented in the 1940s, then fell out of favor for decades. Rule-based systems like Cyc were once the vanguard of AI. Perhaps their time will come again.</p><p><span>Douglas B. Lenat and John Seely Brown. 1984. Why AM and EURISKO appear to work. </span><em>Artificial Intelligence</em><span> 23, 3 (August 1984), 269–294. </span><a href="https://doi.org/10.1016/0004-3702(84)90016-X" rel="nofollow ugc noopener">https://doi.org/10.1016/0004-3702(84)90016-X</a></p><blockquote><p>A description of Lenat's earlier work that partially inspired Cyc.</p></blockquote><p><span>Douglas B. Lenat and R. V. Guha. 1989. </span><em>Building Large Knowledge-Based Systems: Representation and Inference in the Cyc Project</em><span>. Addison-Wesley. </span><a href="https://dl.acm.org/doi/book/10.5555/575523" rel="nofollow ugc noopener">https://dl.acm.org/doi/book/10.5555/575523</a></p><blockquote><p>A book-length report on the Cyc project's progress after five years. Thirty years out of date but still the most complete reference on the system.</p></blockquote><p><span>Douglas B. Lenat, R. V. Guha, Karen Pittman, Dexter Pratt, and Mary Shepherd. 1990. Cyc: toward programs with common sense. </span><em>Communications of the ACM</em><span> 33, 8 (Aug. 1990), 30–49. </span><a href="https://doi.org/10.1145/79173.79176" rel="nofollow ugc noopener">https://doi.org/10.1145/79173.79176</a></p><blockquote><p>A shorter article covering much of the same ground as the 1989 book.</p></blockquote><p><span>Douglas B. Lenat and Chris Deaton. 2008. Terrorism Knowledge Base. Government technical report (April 2008). </span><a href="https://www.researchgate.net/publication/235042082_Terrorism_Knowledge_Base_TKB" rel="nofollow ugc noopener">https://www.researchgate.net/publication/235042082_Terrorism_Knowledge_Base_TKB</a></p><blockquote><p>A report on Cycorp's partnership with the US intelligence community to build a database on global terrorism.</p></blockquote><p><span>Douglas Lenat, Michael Witbrock, David Baxter, Eugene Blackstone, Chris Deaton, Dave Schneider, Jerry Scott, and Blake Shepard. 2010. Harnessing Cyc to answer clinical researchers' ad hoc queries. </span><em>AI Magazine</em><span> 31, 3 (Fall 2010), 13–32. </span><a href="https://doi.org/10.1609/aimag.v31i3.2299" rel="nofollow ugc noopener">https://doi.org/10.1609/aimag.v31i3.2299</a></p><blockquote><p>A report on Cycorp's partnership with the Cleveland Clinic for medical research.</p></blockquote><p><span>Douglas Lenat. 2022. Creating a 30-million-rule system: MCC and Cycorp. </span><em>IEEE Annals of the History of Computing</em><span> 44, 1 (Jan.–Mar. 2022), 44–56. </span><a href="https://muse.jhu.edu/pub/87/article/853382/pdf" rel="nofollow ugc noopener">https://muse.jhu.edu/pub/87/article/853382/pdf</a></p><blockquote><p>A history of the Cyc project, from its origins in the AI research of the 1970s to the present day.</p></blockquote><p><span>Doug Lenat and Gary Marcus. 2023. Getting from generative AI to trustworthy AI: what LLMs might learn from Cyc. arXiv preprint (July 2023). </span><a href="https://arxiv.org/abs/2308.04445" rel="nofollow ugc noopener">https://arxiv.org/abs/2308.04445</a></p><blockquote><p>Lenat's final paper. Compares the strengths of weaknesses of Cyc with LLMs.</p></blockquote><p><span>Cynthia Matuszek, John Cabral, Michael Witbrock, and John DeOliveira. 2006. An introduction to the syntax and content of Cyc. AAAI Spring Symposium (2006). </span><a href="https://www.researchgate.net/publication/221250660_An_Introduction_to_the_Syntax_and_Content_of_Cyc" rel="nofollow ugc noopener">https://www.researchgate.net/publication/221250660_An_Introduction_to_the_Syntax_and_Content_of_Cyc</a></p><blockquote><p>An account of CycL, the representation language used for the knowledge base, as of the mid 2000s.</p></blockquote><p><a href="https://www.nytimes.com/1990/04/01/business/technology-the-software-with-good-sense.html" rel="nofollow ugc noopener">The Software With Good Sense by George Harrar</a><span> in </span><em>The New York Times</em><span> (April 1, 1990, p. 7)</span></p><blockquote><p>An early newspaper article on the Cyc project.</p></blockquote><p><a href="https://www.bloomberg.com/news/articles/1997-06-22/dueling-brainscapes-in-artificial-intelligence" rel="nofollow ugc noopener">Dueling Brainscapes In Artificial Intelligence</a><span> in </span><em>Bloomberg</em><span> (June 23, 1997)</span></p><blockquote><p>A comparison of Cyc's "top-down" directed approach with a robotics company's "bottom-up" learning-based approach.</p></blockquote><p><a href="https://www.wired.com/2016/03/doug-lenat-artificial-intelligence-common-sense-engine/" rel="nofollow ugc noopener">One Genius’ Lonely Crusade to Teach a Computer Common Sense</a><span> by Cade Metz in </span><em>Wired</em><span> (2016)</span></p><blockquote><p>Fairly recent detailed account in the popular press of the current state of the Cyc project.</p></blockquote><p><a href="https://news.ycombinator.com/item?id=21781597" rel="nofollow ugc noopener">Cyc</a><span> on Hacker News (2019)</span></p><blockquote><p>An online discussion in which a couple former Cycorp employees chimed in.</p></blockquote><p><a href="https://cyc.com/wp-content/uploads/2021/04/Cyc-Technology-Overview.pdf" rel="nofollow ugc noopener">Cyc Technology Overview</a><span> published by Cycorp (2021)</span></p><blockquote><p>A description of Cyc's commercial uses and comparison to machine learning.</p></blockquote><p><a href="https://www.youtube.com/watch?v=3wMKoSRbGVs&amp;t=0s&amp;ab_channel=LexFridman" rel="nofollow ugc noopener">Douglas Lenat: Cyc and the Quest to Solve Common Sense Reasoning in AI</a><span> on the Lex Fridman Podcast (2021)</span></p><blockquote><p>Recent in-depth interview with Doug Lenat on the Cyc project and its future.</p></blockquote><p><a href="https://garymarcus.substack.com/p/doug-lenat-1950-2023" rel="nofollow ugc noopener">Doug Lenat, 1950–2023</a><span> by Gary Marcus on Substack (2023)</span></p><blockquote><p>An obituary of Doug Lenat by a fellow researcher who knew him personally.</p></blockquote></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How Antithesis finds bugs (150 pts)]]></title>
            <link>https://antithesis.com/blog/sdtalk/</link>
            <guid>40068187</guid>
            <pubDate>Wed, 17 Apr 2024 18:07:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://antithesis.com/blog/sdtalk/">https://antithesis.com/blog/sdtalk/</a>, See on <a href="https://news.ycombinator.com/item?id=40068187">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
        <header>
            
            
            
            <p>April 17, 2024</p>
            
        </header>
        <p><img src="https://antithesis.com/blog/sdtalk/images/snoutyplays.webp" alt="Snouty navigates a tricky level of his own."></p>
<p data-sid="6000006">A year and a half ago, our friends at <a href="https://tigerbeetle.com/">TigerBeetle</a> invited me to give a sneak preview of Antithesis at <a href="https://systemsdistributed.com/">Systems Distributed</a>. This talk was recorded, but never published (since we were in stealth at the time).</p>
<p data-sid="6000007">We’re publishing it now because it answers one of the most common questions we get: how exactly does Antithesis explore the state spaces of complex systems, and how does it find bugs so quickly? It also explains something Alex alluded to in <a href="https://antithesis.com/blog/deterministic_hypervisor/">his post</a>: our deterministic hypervisor isn’t just about getting perfect reproducibility of the bugs we find, it also helps us find the bugs in the first place.</p>
<p data-sid="6000008">And it explains all of this using everybody’s favorite Italian plumber. Check it out:</p>

<p data-sid="6000009">As we announced before, our platform has been <a href="https://antithesis.com/blog/ag8bi/">playing and beating Nintendo games for many years</a>. Hopefully you now have some idea of why we use these programs for our bug-finding research. Far from being simple toy problems, they’re actually strictly harder to explore than “real” software in several important ways.</p>
<p data-sid="6000010">In the talk above I skipped to the end of the Super Mario Brothers solution that our platform autonomously discovered, but we’ve embedded the full video below (sped up so you can enjoy the whole thing). Antithesis can find this solution in about forty-five minutes on a 2018-era workstation CPU. The only hints our platform received were the locations in memory that hold Mario’s X and Y coordinates in a level, and which level he’s on.</p>

<p data-sid="6000011">Along the way, we can draw heatmaps of where Antithesis spends most of its time in the game. Since clipping through a wall is a relatively rare event, these heatmaps end up visibly reproducing some very recognizable level outlines:</p>
<p>
    <img alt="The heatmap of our fuzzer's path through Mario" src="https://antithesis.com/blog/sdtalk/images/marioheatmap.webp">
</p>
<p data-sid="6000012">And here we are (sped up) playing a <a href="https://en.wikipedia.org/wiki/Kaizo">Kaizo</a> ROM hack with the exact same configuration – zero tweaking, zero hyperparameter tuning, and zero iteration on the platform. This happened literally the first time we turned the system on with the new levels. Notice that we actually get stuck at the end, but we do play the game pretty well (and we find a bug!).</p>

<p data-sid="6000013">Finally, the answer to the question I’m sure you’ve all been wondering about this whole time! Does Antithesis make it to the <a href="https://en.wikipedia.org/wiki/Minus_World">Minus World</a>? You better believe it does:</p>

<p data-sid="6000014">Super Mario Bros. is a simple game, but its state space is inconceivably vast. As far as we know, we're the first autonomous system to explore that state space efficiently enough to beat the game (albeit with one or two hints).</p>
<p data-sid="6000015">That same capability for efficient state space exploration is what enables us to find bugs and deliver value to <a href="https://antithesis.com/solutions/case_studies/">our customers</a>. If you're interested in learning whether Antithesis can improve your software quality or development velocity, <a href="https://antithesis.com/contact">contact us!</a></p>

    </section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[CFPB Takes Action Against Coding Boot Camp BloomTech and CEO Austen Allred (661 pts)]]></title>
            <link>https://www.consumerfinance.gov/about-us/newsroom/cfpb-takes-action-against-coding-boot-camp-bloomtech-and-ceo-austen-allred-for-deceiving-students-and-hiding-loan-costs/</link>
            <guid>40067939</guid>
            <pubDate>Wed, 17 Apr 2024 17:48:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.consumerfinance.gov/about-us/newsroom/cfpb-takes-action-against-coding-boot-camp-bloomtech-and-ceo-austen-allred-for-deceiving-students-and-hiding-loan-costs/">https://www.consumerfinance.gov/about-us/newsroom/cfpb-takes-action-against-coding-boot-camp-bloomtech-and-ceo-austen-allred-for-deceiving-students-and-hiding-loan-costs/</a>, See on <a href="https://news.ycombinator.com/item?id=40067939">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                <p data-block-key="naos7"><b>WASHINGTON, D.C.</b> – Today, the Consumer Financial Protection Bureau (CFPB) issued an order against BloomTech and its CEO, Austen Allred, for deceiving students about the cost of loans and making false claims about graduates’ hiring rates. The CFPB found that BloomTech and Allred falsely told students the school’s “income share” agreement contracts were not loans, when in fact the agreements were loans carrying an average finance charge of around $4,000. BloomTech and Allred lured prospective enrollees with inflated promises of job-placement rates as high as 86 percent, when the company’s internal metrics showed placement rates closer to 50 percent and in some cases as low as 30 percent. The order permanently bans BloomTech from all consumer-lending activities and bans Allred from any student-lending activities for ten years. The CFPB is also ordering BloomTech and Allred to cease collecting payments on income share loans for graduates who did not have a qualifying job, eliminate finance changes for certain agreements, and allow students the option to withdraw without penalty. BloomTech and Allred must also pay over $164,000 in civil penalties, which will be deposited in the CFPB’s victims relief fund.</p><p data-block-key="7fbmi">“BloomTech and its CEO sought to drive students toward income share loans that were marketed as risk-free, but in fact carried significant finance charges and many of the same risks as other credit products,” said CFPB Director Rohit Chopra. “Today’s action underscores our increased focus on investigating individual executives and, when appropriate, charging them with breaking the law.”</p><p data-block-key="dhpkr">BloomTech is a for-profit vocational school that is headquartered in San Francisco and owned primarily by Allred and various Silicon Valley venture-capital funds. Allred founded the company as the Lambda School in 2017, and rebranded it as BloomTech or the Bloom Institute of Technology in 2022.</p><p data-block-key="ahhmu">BloomTech operates short-term, typically six-to-nine-month training programs in areas such as web development, data science, and backend engineering. Since 2017, BloomTech originated at least 11,000 income share loans, with most of BloomTech students funding their tuition with these loans. Under almost all these loans, students who earn more than $50,000 in a related field are required to pay BloomTech 17 percent of their pre-tax income each month until they make 24 payments or hit a “cap” of $30,000 in total payments.</p><p data-block-key="6ng1i">The CFPB found that BloomTech students were lured with false promises and deceptive marketing. BloomTech and Allred:</p><ul><li data-block-key="dvq1c"><b>Hid the cost and true nature of students’ debt:</b> BloomTech falsely claimed its “income share” agreements were not loans, did not create debt, did not carry a finance charge, and were “risk free.” In fact, the agreements are loans with an average finance charge of $4,000. The loans carry substantial risk, as a single missed payment triggers a default and the remainder of the $30,000 “cap” becomes due immediately. BloomTech further hid the cost and nature of the “income share” loans by not disclosing key terms like the finance charge and annual percentage rate, as required by law.</li><li data-block-key="afs34"><b>Tricked prospective students with inflated job-placement rates:</b> BloomTech advertised on its website that 71 to 86 percent of students were placed in jobs within six months of graduation, when its non-public reporting to investors consistently showed placement rates closer to 50 percent. Allred tweeted that the school achieved a 100 percent job-placement rate in one of its cohorts, and later acknowledged in a private message that the sample size was just one student.</li><li data-block-key="9ndtn"><b>Misrepresented their financial interests by selling loans to investors</b>: BloomTech’s marketing represented that its own interests were aligned with students, through claims such as “We don’t get paid until you do,” and “Because we invest in you, instead of the other way around, we only make money when you do.” In fact, the company was selling many “income share” loans to investors and thus often got paid long before a student finished the program and started earning a salary.</li><li data-block-key="fa6v1"><b>Engaged in illegal contract practices:</b> BloomTech violated a federal consumer protection known as the Holder Rule, by failing to include a required provision making any owner of the loan subject to the legal claims and defenses that students could assert against BloomTech. Students were therefore deprived of rights they should have had when their “income share” loan was sold to an investor.</li></ul><p data-block-key="fub1t"><b>Enforcement Action</b></p><p data-block-key="98igb">Under the Consumer Financial Protection Act (CFPA), the CFPB has the authority to take action against institutions violating consumer financial laws, including engaging in unfair, deceptive, or abusive acts or practices. The CFPB found that BloomTech and Allred used deceptive statements and took unreasonable advantage of consumers’ reasonable reliance on BloomTech to act in their interests.</p><p data-block-key="7mb1e">Under the CFPB’s order, BloomTech and Allred must:</p><ul><li data-block-key="e8404"><b>Cease collecting payments on certain graduates:</b> BloomTech must not collect any additional payments on “income share” loans for graduates who did not have a qualifying job in the past year.</li><li data-block-key="bgf7q"><b>Amends “income share” loan contracts:</b> The order reforms “income share” loan terms to eliminate the finance charge for consumers who graduated the program more than 18 months ago and obtained a qualifying job making $70,000 or less.</li><li data-block-key="6bj8u"><b>Allow students to withdraw without penalty:</b> Current students will have the option to withdraw from the program and cancel their “income share” loans or continue in the program with a third-party loan.</li><li data-block-key="3opcf"><b>Pay over $164,000 in penalties:</b> BloomTech will pay over $64,000 and Allred will pay $100,000 in penalties to the <a href="https://www.consumerfinance.gov/enforcement/payments-harmed-consumers/civil-penalty-fund/">CFPB’s victims relief fund</a>.</li></ul><p data-block-key="e7jmt"><a href="https://www.consumerfinance.gov/enforcement/actions/bloom-institute-of-technology/">Read today’s order</a>.</p><p data-block-key="791ol">Consumers can also submit complaints about financial products or services by visiting the <a href="https://www.consumerfinance.gov/complaint/">CFPB’s website</a> or by calling <a href="tel:(855)411-2372">(855) 411-CFPB (2372)</a>.</p><p data-block-key="6hnef">Employees of companies who they believe their company has violated federal consumer financial laws are encouraged to send information about what they know to <a href="mailto:whistleblower@cfpb.gov">whistleblower@cfpb.gov</a>.</p>
            </div><div>



    <hr><p data-block-key="a99be"><i>The Consumer Financial Protection Bureau is a 21st century agency that implements and enforces Federal consumer financial law and ensures that markets for consumer financial products are fair, transparent, and competitive. For more information, visit</i> <a href="http://www.consumerfinance.gov/"><i>www.consumerfinance.gov</i></a><i>.</i></p>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Speeding up LLM inference 2x times (possibly) (381 pts)]]></title>
            <link>https://asciinema.org/a/piP22yYwcaohu5cA2gyuv1W61</link>
            <guid>40067677</guid>
            <pubDate>Wed, 17 Apr 2024 17:26:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://asciinema.org/a/piP22yYwcaohu5cA2gyuv1W61">https://asciinema.org/a/piP22yYwcaohu5cA2gyuv1W61</a>, See on <a href="https://news.ycombinator.com/item?id=40067677">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p><span title="Terminal environment">
            <span>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
    <path fill-rule="evenodd" d="M2.25 6a3 3 0 013-3h13.5a3 3 0 013 3v12a3 3 0 01-3 3H5.25a3 3 0 01-3-3V6zm3.97.97a.75.75 0 011.06 0l2.25 2.25a.75.75 0 010 1.06l-2.25 2.25a.75.75 0 01-1.06-1.06l1.72-1.72-1.72-1.72a.75.75 0 010-1.06zm4.28 4.28a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z" clip-rule="evenodd"></path>
  </svg>
</span> macOS ◆ xterm-256color ◆ zsh
          </span>

          <span title="Total views">
            <span>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 15a3 3 0 100-6 3 3 0 000 6z"></path>
    <path fill-rule="evenodd" d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z" clip-rule="evenodd"></path>
  </svg>
</span> 10071 views
          </span>
        </p>

          <hr>
          <div><p>
A quick preview of the Effort algorithm - more details on <a href="https://kolinko.github.io/effort/">https://kolinko.github.io/effort/</a></p>
</div>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Reddit is taking over Google (242 pts)]]></title>
            <link>https://www.businessinsider.com/why-reddit-is-taking-over-google-right-now-2024-4</link>
            <guid>40067605</guid>
            <pubDate>Wed, 17 Apr 2024 17:20:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.businessinsider.com/why-reddit-is-taking-over-google-right-now-2024-4">https://www.businessinsider.com/why-reddit-is-taking-over-google-right-now-2024-4</a>, See on <a href="https://news.ycombinator.com/item?id=40067605">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>If you think you've been seeing an awful lot more Reddit results lately when you search on Google, you're not imagining things.</p><p>The internet is in upheaval, and for website owners the rules of "winning" <a target="_blank" href="https://www.businessinsider.com/google-search-generative-experience-ai-lady-gaga-sge-2024-3" data-analytics-product-module="body_link" rel="">Google Search</a> have never been murkier.</p><div><p>Coming from the other direction is an influx of posts from Reddit, Quora, and other internet forums that have climbed up through the traditional set of Google links.</p><p>Data analysis from Semrush, which predicts traffic based on search ranking, shows that traffic to Reddit has climbed at an impressive clip since August. Semrush estimated that Reddit had over 132 million visitors in August 2023. At the time of publishing, it was projected to have over 346 million visitors in April 2024.</p><figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <div>
                          
                          <meta itemprop="contentUrl" content="https://i.insider.com/661cf4d73f923f7dab07ce46">
                          <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/png" data-srcs="{&quot;https://i.insider.com/661cf4d73f923f7dab07ce46&quot;:{&quot;contentType&quot;:&quot;image/png&quot;,&quot;aspectRatioW&quot;:1090,&quot;aspectRatioH&quot;:341}}" alt="A graph showing a dramatic increase in organic search traffic to Reddit since August 2023">
                        </p></div>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  Organic search traffic to Reddit over the past two years
                                  
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          Semrush
                          
                          </span>
                                </figcaption>
                              </span>
                          </figure><p>None of this is accidental. For years, Google has been watching users tack on "Reddit" to the end of search queries and finally decided to do something about it.</p><p>Google <a target="_blank" href="https://blog.google/products/search/more-content-by-people-for-people-in-search/" data-analytics-product-module="body_link" rel=" nofollow">started dropping hints</a> in 2022 when it promised to do a better job of promoting sites that weren't just chasing the top of search but were more helpful and human.</p><p>Last August, Google rolled out a big update to Search that seemed to kick this into action. Reddit, Quora, and other forum sites started getting more visibility in Google, both within the traditional links and within a new "discussions and forums" section, which you may have spotted if you're US-based.</p><p>The timing of this Reddit bump has led to some conspiracy theories. In February, <a target="_blank" href="https://blog.google/inside-google/company-announcements/expanded-reddit-partnership/" data-analytics-product-module="body_link" rel=" nofollow">Google and Reddit announced</a> a blockbuster deal that would let Google train its AI models on Reddit content. Google said the deal, <a target="_blank" href="https://www.reuters.com/technology/reddit-ai-content-licensing-deal-with-google-sources-say-2024-02-22/" data-analytics-product-module="body_link" rel=" nofollow">reportedly worth $60 million</a>, would "facilitate more content-forward displays of Reddit information," leading to some speculation that Google promised Reddit better visibility in exchange for the valuable training data. A few weeks later, <a target="_blank" href="https://www.businessinsider.com/reddits-ipo-set-to-take-front-page-of-internet-public-2024-3" data-analytics-product-module="body_link" rel="">Reddit also went public</a>.</p><p>A Google spokesperson told BI: "Our agreement with Reddit absolutely did not include ranking its content higher on Search."</p><p>Indeed, SEO experts have watched this Reddit bump since August when Google rolled out a crucial search update six months before the deal was announced. </p><p>It's not just Reddit. Q&amp;A forum Quora is getting a huge visibility bump in Google search results, per Semrush and Sistrix data. Google says "hundreds" of other forums and communities across the web are also getting the bump.</p><p>Still, given Reddit's size, its rise is the most noticeable. Per Sistrix data, Reddit is now as visible in top Google Search results as Instagram.</p><figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <div>
                          
                          <meta itemprop="contentUrl" content="https://i.insider.com/661e8ef120b15f0ff42841fb">
                          <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/png" data-srcs="{&quot;https://i.insider.com/661e8ef120b15f0ff42841fb&quot;:{&quot;contentType&quot;:&quot;image/png&quot;,&quot;aspectRatioW&quot;:2078,&quot;aspectRatioH&quot;:878}}" alt="Sistrix data showing the rise in visibility of Reddit and Instagram in Google Search">
                        </p></div>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  Reddit's visibility in Google Search now matches that of Instagram
                                  
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          Sistrix
                          
                          </span>
                                </figcaption>
                              </span>
                          </figure><p>Steve Paine, marketing manager at Sistrix, called the rise of Reddit "unprecedented."</p><p>"There hasn't been a website that's grown so much search visibility so quickly in the US in at least the last five years," he told Business Insider.</p><p>Right now, Reddit ranks high for product searches. Reddit's main competitors are Wikipedia, YouTube, and Fandom, Paine said, and it also competes in "high-value commercial searches," putting it up against Amazon. The "real competitors," he said, are the subreddits that compete with brands on the web. </p><h2>Giving the people what they want</h2><p>Why is Google doing this, and why <em>now</em>?</p><p>The company's stance here is simple: it's giving users what they want.</p><p>"Our research has shown that people often want to learn from others' experiences with a topic, so we've continued to make it easier to find helpful perspectives on Search when it's relevant to a query," a Google spokesperson told BI. "Our systems surface content from hundreds of forums and other communities across the web, and we conduct rigorous testing to ensure results are helpful and high quality."</p><p><a target="_blank" href="https://twitter.com/searchliaison/status/1775580045278597617" data-analytics-product-module="body_link" rel=" nofollow">Responding to a post on X</a>, Google search liaison Danny Sullivan said users not only like seeing "forum content" but that they "proactively seek it out."</p><p>This shift in search behavior has already been happening for several years. In July 2022, Google's search head <a target="_blank" href="https://techcrunch.com/2022/07/12/google-exec-suggests-instagram-and-tiktok-are-eating-into-googles-core-products-search-and-maps/" data-analytics-product-module="body_link" rel=" nofollow">Prabhakar Raghavan said</a> younger users were turning to alternative sources such as TikTok and Instagram for information and recommendations. Last year, during the <a target="_blank" href="https://www.businessinsider.com/reddit-blackout-48-hour-what-you-need-to-know-2023-6" data-analytics-product-module="body_link" rel="">Reddit blackout</a> in June, <a target="_blank" href="https://www.theverge.com/2023/6/13/23759942/google-reddit-subreddit-blackout-protests" data-analytics-product-module="body_link" rel=" nofollow">Google Search got considerably worse</a>.</p><figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <div>
                          
                          <meta itemprop="contentUrl" content="https://i.insider.com/660c036c3f923f7dab037214">
                          <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/jpeg" data-srcs="{&quot;https://i.insider.com/660c036c3f923f7dab037214&quot;:{&quot;contentType&quot;:&quot;image/jpeg&quot;,&quot;aspectRatioW&quot;:5337,&quot;aspectRatioH&quot;:3355}}" alt="Google CEO Sundar Pichai on stage at Google IO 2023">
                        </p></div>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  Google CEO Sundar Pichai on stage at Google IO 2023
                                  
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          JOSH EDELSON/GETTY
                          
                          </span>
                                </figcaption>
                              </span>
                          </figure><p>Google's Reddit deal and its endorsement of Reddit content in Search show how much it sees Reddit as a crucial part of the future of search.</p><section data-component-type="content-recommendations" data-component-location="" data-delay-third-party-scripts="true" data-provider="dad" data-excluded-verticals="bi-video" data-premium-state="" data-renderer="three-related-posts" data-size="3" data-container-name="content-recommendations-three-related-posts" data-theme-class="" data-recommendations-placement="" data-root-margin="250px 0px" data-track-view="{&quot;event&quot;: &quot;engagement&quot;, &quot;eventCategory&quot;: &quot;in_content_recirc&quot;, &quot;eventAction&quot;: &quot;module_in_view&quot;, &quot;eventLabel&quot;: &quot;module_in_view&quot;, &quot;element_name&quot;: &quot;in_content_recirc&quot;, &quot;lts_segment&quot;: &quot;bi_value_unassigned&quot;, &quot;product_field&quot;: &quot;bi_value_unassigned&quot;}">
                          <p>
                              Related stories
                            </p>
                        
                          
                        </section><p>"It's obvious that Google has this vision that they need more user-generated content," said Aleyda Solis, an SEO consultant for Orainti, who added that this is one way Google can respond to the rise in TikTok, Instagram, and other social spaces.</p><p>While Google might not be pumping Reddit results in exchange for training data, Google's AI systems would benefit from the more up-to-date information Reddit can give, <a target="_blank" href="https://www.businessinsider.com/google-uses-ai-search-queries-links-answers-2024-4" data-analytics-product-module="body_link" rel="">especially when SGE rolls out in full</a>. </p><p>Furthermore, <a target="_blank" href="https://arxiv.org/pdf/2310.03214.pdf" data-analytics-product-module="body_link" rel=" nofollow">a paper written by several Google employees</a>, published in late 2023, claims that pulling information from an internet search can better improve the accuracy of chatbots.</p><p>Named FreshPrompt, the method would incorporate "relevant and up-to-date information retrieved from a search engine" to improve a chatbot such as <a target="_blank" href="https://www.businessinsider.com/google-gemini-explainer-ai-model-2023-9" data-analytics-product-module="body_link" rel="">Google's Gemini</a> or <a target="_blank" href="https://www.businessinsider.com/everything-you-need-to-know-about-chat-gpt-2023-1" data-analytics-product-module="body_link" rel="">OpenAI's ChatGPT</a>.</p><h2>Grifters can hijack search</h2><p>The question is whether this Reddit bump will continue or Google will nerf it. There are risks associated with Reddit, which relies on unpaid moderators to police unsavory content and spam.</p><p>Google told BI its systems work on all websites, including Quora and Reddit. Still, there's evidence that people are already abusing the rise of these sites in Google rankings. In a <a target="_blank" href="https://detailed.com/forum-serps/" data-analytics-product-module="body_link" rel=" nofollow">February study</a>, SEO blogger Glen Allsopp found that 51% of Reddit's top-ranking threads in Google Search's forums sections contained spam as a top comment.</p><p>YouTube already has heaps of videos offering advice on hijacking Reddit to rise to the top of Google Search. One of the most popular videos right now teaches viewers to purchase abandoned Reddit accounts, seek out popular Reddit posts to post comments filled with affiliate links, and then artificially inflate their popularity using "upvotes" purchased from third-party websites. This way, they can feasibly rocket to the top of Google.</p><p>It might not be that difficult. <a target="_blank" href="https://www.searchenginejournal.com/reddit-post-ranks-within-minutes" data-analytics-product-module="body_link" rel=" nofollow">Search Engine Journal reported</a> this week that one Reddit user climbed to top-ranking Google Search results in minutes (BI could confirm the post ranked in the top 10, but couldn't independently verify the time it took to get there).</p><p>A Google spokesperson said the company's anti-spam policies apply to all content and that it takes particular attention to searches for sensitive topics such as health or finance.</p><p>Still, it's unclear how much Google's spam-attacking systems, <a target="_blank" href="https://blog.google/products/search/google-search-update-march-2024/" data-analytics-product-module="body_link" rel=" nofollow">which just got a boost</a>, work right now. Reddit is "heavily manipulated at the end of the day," and people can easily take advantage of it by posting content there, Solis said.</p><p>Lily Ray, vice president of SEO strategy and research for marketing agency Amsive, told BI she is concerned that Google is "shifting the burden" of monitoring abuse onto Reddit moderators. Neglected subreddits risk getting spammed with unhelpful or even false content.</p><p><a target="_blank" href="https://www.linkedin.com/posts/lily-ray-44755615_reddit-seo-google-activity-7183851130827784192-iE_A/" data-analytics-product-module="body_link" rel=" nofollow">Ray wrote on LinkedIn last week</a> that she found an example of Reddit ranking prominently at the top of Google when she searched "How to lose 10 pounds in a week".</p><p>"A redditor suggested 'cutting your arm off,'" she wrote.</p><p>This raises questions about whether Google can keep bad content from being eaten by its AI-generated search engine, which often sources its responses from the top search results. Already, Google is fighting an influx of AI-generated content flooding the web. At the same time, rivals such as OpenAI and Perplexity try to steal Google's lunch with AI chatbots that work like search engineers.</p><p>A Google spokesperson told BI that the company's analysis did not find that more harmful content on Search comes from forums.</p><figure data-type="img" data-e2e-name="image-figure-image" data-media-container="image" itemscope="" itemtype="https://schema.org/ImageObject">
                          
                          
                          
                            <div>
                          
                          <meta itemprop="contentUrl" content="https://i.insider.com/65de1a6a90413ab8e1d724e6">
                          <p><img src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' width='1' height='1'/%3E" data-content-type="image/jpeg" data-srcs="{&quot;https://i.insider.com/65de1a6a90413ab8e1d724e6&quot;:{&quot;contentType&quot;:&quot;image/jpeg&quot;,&quot;aspectRatioW&quot;:4000,&quot;aspectRatioH&quot;:2667}}" alt="Reddit CEO Steve Huffman speaks at a conference">
                        </p></div>
                          
                          <span>
                                <figcaption data-e2e-name="image-caption">
                                  Reddit CEO Steve Huffman
                                  
                          <span data-e2e-name="image-source" itemprop="creditText">
                          
                          Greg Doherty/Getty Images
                          
                          </span>
                                </figcaption>
                              </span>
                          </figure><h2>There's room to grow - and that's good news for Reddit investors</h2><p>The assessment in the SEO community right now is that Google has leaned too hard into community discussion, and it may need to recalibrate once users start complaining that, actually, too much Reddit in Google results can be a bad thing.</p><p>Sistrix's Paine said 48.9% of the reddit.com ranking content appears in the top 10 Google Search results, yet only 8% show in the top 3, according to a study from his firm — giving plenty of room for Reddit only to grow, which is something <a target="_blank" href="https://www.businessinsider.com/who-got-rich-reddit-ipo-2024-3" data-analytics-product-module="body_link" rel="">Reddit investors will be pleased to know.</a></p><p>Google may also decide to course-correct.</p><p>"Personally, I would expect this current dominance by Reddit to calm down once Google notes that the search experience has not been improved by the increased inclusion of Reddit," SEO consultant Natalie Slater told BI.</p><p>"One of the questions is, will it retain this visibility?" Paine said of Reddit. "On one hand, this is unprecedented growth, and there's a feeling that it must end soon."</p><p>On the other, he added, there's plenty of space for Reddit's presence in Google Search to grow even bigger.</p><p>For now, Reddit and Google need each other, and it may be in neither of their interests to stop a good thing.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How Nestlé gets children hooked on sugar in lower-income countries (266 pts)]]></title>
            <link>https://stories.publiceye.ch/nestle-babies/</link>
            <guid>40067575</guid>
            <pubDate>Wed, 17 Apr 2024 17:18:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://stories.publiceye.ch/nestle-babies/">https://stories.publiceye.ch/nestle-babies/</a>, See on <a href="https://news.ycombinator.com/item?id=40067575">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="article" role="main">
      <header id="section-Hbe7pDgCwy" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsInRleHRGYWRlIjoibm9uZSIsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
        
        
      </header>
      <section id="group-section-z78LATXHpf">
        <div data-scrollymoly-basis="true" data-testid="ENG-5457" id="section-z78LATXHpf" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsInRleHRGYWRlIjoibm9uZSIsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                  <p><span><strong>Nestlé’s leading baby-food brands, promoted in low- and middle-income countries as healthy and key to supporting young children’s development, contain high levels of added sugar. In Switzerland, where Nestlé is headquartered, such products are sold with no added sugar. These are the main findings of a new investigation by Public Eye and the International Baby Food Action Network (IBFAN), which shed light on Nestlé’s hypocrisy and the deceptive marketing strategies deployed by the Swiss food giant.</strong></span></p>
                </div>
        <div id="section-HHpfpqazNp" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                      <p>Meagan Adonis was 23 when she became blind as a result of a serious health condition. That same year she found out that she was pregnant, and was worried about the challenges of being a blind mum. She has now found her motherhood feet, and recently gave birth to a second child. Based in Johannesburg, South Africa, the “blind goddess” – as she calls herself – now documents her life for more than 125,000 followers on social media and chronicles her daily routine with her new baby.</p>
                      <figure>
                        
                        <figcaption></figcaption>
                      </figure>
                      <p>Last year, Meagan posted several videos on TikTok promoting Cerelac infant cereals for babies from six months of age. “As you can see, I have a very active baby”, she <a href="https://www.tiktok.com/@meaganadonis/video/7317231120582577414" target="_blank">explains</a> in a video in December. “As a blind mum, feeding time is always an adventure! […] Now let’s go and prepare his favourite meal of the day. Little bodies need big support with Nestlé Cerelac being the perfect addition to our mealtime,” she assures her audience in a cheerful tone – while omitting to mention that this maternal counsel comes as part of a paid partnership with Nestlé.</p>
                      <p>Thousands of kilometres away, in Guatemala, a father films his energetic little daughter. “There’s no greater satisfaction than seeing a strong, healthy child”, says Billy Saavedra, a <em>reggaeton </em>artist better known as <em>Billy the Diamond</em>. “That’s why we prefer Nido 1+, which supports the development of her bones and muscles, as well as her immune system”, he adds in a <a href="https://www.instagram.com/p/CqGPA4vgN_5/" target="_blank">video</a> promoting the brand’s formulas for young children in March on his Instagram account, which has more than 550,000 followers.</p>
                      <figure>
                        
                        <figcaption></figcaption>
                      </figure>
                      <p>The use of influencers, such as Meagan or Billy (and their children), is at the core of Nestlé’s marketing strategy to boost sales of its baby foods. This approach, which has become increasingly important in many sectors, allows companies to reach a broad audience, building on a sense of identification and relatability. Coming from parents with similar experiences, advertising messages are regarded as benevolent advice that can be trusted.</p>
                      <h2><strong>A growing market</strong></h2>
                      <p>Fifty years after the “baby killers” infant formula scandal, Nestlé <a href="http://claims/" target="_blank">claims</a> to have learned from the past and <a href="https://www.nestle.com/media/news/breast-milk-substitutes-who-code-compliance-report-2022" target="_blank">proclaims</a> its “unwavering commitment” to the “responsible marketing” of breast-milk substitutes.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>Cover of the “The baby killer” brochure © War on Want / Mike Muller</p>
                          <p>Cover of the “The baby killer” brochure © War on Want / Mike Muller</p>
                        </figcaption>
                      </figure>
                      <p>The food giant is doing everything it can to present itself as the world leader in infant nutrition, meticulously targeting each stage in a child’s first years of life. It currently controls 20 percent of the baby-food market, valued at nearly $70 billion.</p>
                      <p>Cerelac and Nido are some of Nestlé’s best-selling baby-food brands in low- and middle-income countries. According to exclusive data obtained from Euromonitor, a market analysis firm specializing in the food industry, their sales value in this category was greater than $2.5 billion in 2022.</p>
                      <p>In its own communications or via third parties, Nestlé <a href="https://www.nestle.com/csv/global-initiatives/healthier-kids/nestle-products-brands" target="_blank">promotes</a> Cerelac and Nido as brands whose aim is to help children “live healthier lives”. Fortified with vitamins, minerals and other micronutrients, these products are, according to the multinational, tailored to the needs of babies and young children and help to strengthen their growth, immune system and cognitive development.</p>
                      <p>But do these infant cereals and powdered milks really offer “the best nutrition,” as Nestlé claims? That’s what Public Eye and the International Baby Food Action Network (IBFAN) wanted to find out, by focusing on one of the key public enemies when it comes to nutrition: sugar.</p>
                    </div>
      </section>
      <section id="group-section-Double-standard-WF3vgr9VkI">
        <div data-scrollymoly-basis="true" data-testid="ENG-5457" id="section-Double-standard-WF3vgr9VkI" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsInRleHRGYWRlIjoibm9uZSIsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                  <p>
                    <h2><strong>An unjustifiable double standard</strong></h2>
                  </p>
                </div>
        <div id="section-hUFQuRiJBJ" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                      <p>Spoiler alert: Our investigation shows that, for Nestlé, not all babies are equal when it comes to added sugar. While in Switzerland, where the company is headquartered, the main infant cereals and formula brands <a href="https://www.nestlebaby.ch/fr/nestle-baby" target="_blank">sold</a> by the multinational come without added sugar, most Cerelac and Nido products marketed in lower-income countries do contain added sugar, often at high levels.</p>
                      <p>For example, in Switzerland, Nestlé promotes its biscuit-flavoured cereals for babies aged from six months with the claim “no added sugar”, while in Senegal and South Africa, Cerelac cereals with the same flavour <a href="https://www.shoprite.co.za/All-Departments/Baby/Baby-Food/Baby-and-Toddler-Breakfast/Nestl%C3%A9-Cerelac-Baby-Cereal-With-Milk-Biscuit-Flavour-250g/p/10782004EA" target="_blank">contain</a> 6 grams of added sugar per serving.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>In Switzerland, Nestlé’s biscuit-flavoured baby cereal contains no added sugar. In South Africa and Senegal, Cerelac products of the same flavour contain more than one cube of sugar per serving. © Anne-Laure Lechat</p>
                          <p>In Switzerland, Nestlé’s biscuit-flavoured baby cereal contains no added sugar. In South Africa and Senegal, Cerelac products of the same flavour contain more than one cube of sugar per serving. © Anne-Laure Lechat</p>
                        </figcaption>
                      </figure>
                      <p>Similarly, in Germany, France and the UK – Nestlé’s <a href="https://www.nestle.com/sites/default/files/2023-03/2022-annual-review-en.pdf" target="_blank">main European markets</a> – all formulas for young children aged 12-36 months sold by the company contain no added sugar. And while some infant cereals for young children over one year old contain added sugar, cereals for babies aged six months do not.</p>
                      <p>Cerelac wheat-based cereals for six-month-old babies sold by Nestlé in Germany and the UK has no added sugar, while the same product contains over 5 grams per serving in Ethiopia and 6 grams in Thailand.</p>
                      <figure>
                        
                        <figcaption></figcaption>
                      </figure>
                      <p>“There is a double standard here that can’t be justified,” said Nigel Rollins, scientist at the World Health Organization (WHO), when presented with our findings. For Rollins, the fact that Nestlé does not add sugar to these products in Switzerland but is quite happy to do it in lower resources settings “is problematic both from a public health and ethical perspective.” Rollins says that manufacturers may try to get children accustomed to a certain level of sugar at a very early age, so that they prefer products high in sugar. “This is totally inappropriate,” he believes.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>Cerelac baby cereals wheat are sold with no added sugar in Germany and the UK. In lower income countries, but the same product comes with high levels of added sugar. © Anne-Laure Lechat</p>
                          <p>Cerelac baby cereals wheat are sold with no added sugar in Germany and the UK. In lower income countries, but the same product comes with high levels of added sugar. © Anne-Laure Lechat</p>
                        </figcaption>
                      </figure>
                      <h2><strong>On the trail of hidden sugar</strong></h2>
                      <p>The amount of added sugar is often not even disclosed in the nutritional information available on the packaging of these kinds of products. In most countries, including Switzerland and across Europe, companies are only required to indicate the amount of total sugars, which also includes those naturally present in milk or whole fruit, and are <a href="https://www.who.int/news/item/04-03-2015-who-calls-on-countries-to-reduce-sugars-intake-among-adults-and-children" target="_blank">not considered</a> harmful to health.</p>
                      <p>While Nestlé prominently highlights the vitamins, minerals and other nutrients contained in its products using idealizing imagery, it’s not transparent when it comes to added sugar. To uncover these “hidden sugars,” we obtained Cerelac and Nido products from a number of countries to examine their labels and, in some cases, have them analyzed by a specialized laboratory.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>In Brazil, one of the main markets, Cerelac baby cereals are sold under the brand name “Mucilon”. The added sugar content is not declared. © Anne-Laure Lechat</p>
                          <p>In Brazil, one of the main markets, Cerelac baby cereals are sold under the brand name “Mucilon”. The added sugar content is not declared. © Anne-Laure Lechat</p>
                        </figcaption>
                      </figure>
                      <p>This turned out to be more complicated than expected. Several laboratories approached in Switzerland refused to conduct the sugar analysis of Nestlé products. One lab even wrote that it could not take part in the project because the results “could potentially have a negative impact” on its existing customers. Stonewalled, we decided to approach a lab based in Belgium. The results are edifying.</p>
                    </div>
      </section>
      <section id="group-section-One-sugar-cube-per-portion-AOIvN74QDN">
        <div data-scrollymoly-basis="true" data-testid="ENG-5457" id="section-One-sugar-cube-per-portion-AOIvN74QDN" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsInRleHRGYWRlIjoibm9uZSIsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                  <p>
                    <h2><strong>One sugar cube per portion</strong></h2>
                  </p>
                </div>
        <div id="section-FhP6gxhbCc" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                      <p>Cerelac is the world’s number one baby cereal brand, with sales exceeding $1 billion in 2022, according to Euromonitor. We examined 115 products sold in Nestlé’s main markets in Africa, Asia and Latin America. No less than 108 of them (94 percent) contained added sugar.</p>
                      <p>For 67 of these products, we were able to determine the amount of added sugar. On average, our analysis found almost 4 grams per serving, or about one sugar cube. The highest amount – 7.3 grams per serving – was detected in a product <a href="https://www.lazada.com.ph/products/cerelac-mixed-fruits-soya-infant-cereal-250g-pack-of-2-i265172963-s22391103398.html?c=&amp;channelLpJumpArgs=&amp;clickTrackInfo=query%253Acerelac%252Bmixed%252Bfruits%252Band%252Bsoya%253Bnid%253A265172963%253Bsrc%253ALazadaMainSrp%253Brn%253Ac7b11df740b300df8963809f161a73eb%253Bregion%253Aph%253Bsku%253A265172963_PH%253Bprice%253A292%253Bclient%253Adesktop%253Bsupplier_id%253A100124417%253Bpromotion_biz%253A%253Basc_category_id%253A24800%253Bitem_id%253A265172963%253Bsku_id%253A22391103398%253Bshop_id%253A137320&amp;fastshipping=0&amp;freeshipping=0&amp;fs_ab=2&amp;fuse_fs=&amp;lang=en&amp;location=Bulacan&amp;price=292&amp;priceCompare=skuId%3A22391103398%3Bsource%3Alazada-search-voucher%3Bsn%3Ac7b11df740b300df8963809f161a73eb%3BoriginPrice%3A29200%3BdisplayPrice%3A29200%3BsinglePromotionId%3A-1%3BsingleToolCode%3A-1%3BvoucherPricePlugin%3A0%3Btimestamp%3A1695473246028&amp;ratingscore=4.922800718132854&amp;request_id=c7b11df740b300df8963809f161a73eb&amp;review=292&amp;sale=3563&amp;search=1&amp;source=search&amp;spm=a2o4l.searchlist.list.i40.6ada371b121Pv4&amp;stock=1" target="_blank">sold</a> in the Philippines and targeted at six-month-old babies.</p>
                      <figure>
                        
                        <figcaption></figcaption>
                      </figure>
                      <p>In India, where sales surpassed $250 million in 2022, all Cerelac baby cereals contain added sugar, on average nearly 3 grams per serving. The same situation prevails in South Africa, the main market on the African continent, where all Cerelac baby cereals contain four grams or more of added sugar per serving. In Brazil, the world’s second-largest market, with sales of around $150 million in 2022, three-quarters of Cerelac baby cereals (known as Mucilon in the country) contain added sugar, on average 3 grams per serving.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>This product, sold in the Philippines and intended for six-month-old babies, contains almost two cubes of sugar per serving. ©&nbsp;Anne-Laure Lechat</p>
                          <p>This product, sold in the Philippines and intended for six-month-old babies, contains almost two cubes of sugar per serving. ©&nbsp;Anne-Laure Lechat</p>
                        </figcaption>
                      </figure>
                      <p>“This is a big concern,” comments Rodrigo Vianna, epidemiologist and Professor at the Department of Nutrition of the Federal University of Paraíba in Brazil. “Sugar should not be added to foods offered to babies and young children because it is unnecessary and highly addictive. Children get used to the sweet taste and start looking for more sugary foods, starting a negative cycle that increases the risk of nutrition-based disorders in adult life. These include obesity and other chronic non-communicable diseases, such as diabetes or high blood-pressure,” laments the expert.</p>
                    </div>
        <div id="section-Ll689TvBg8" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                      <h2><strong>“A form of colonization”</strong></h2>
                      <p>Although less pronounced, this trend is confirmed with the Nido<em> </em>brand, the most <a href="https://www.nestle.com/brands/baby-foods/nido" target="_blank">popular</a> on the growing-up milks market. In 2022, global sales of Nido products for young children aged one to three had exceeded $1 billion according to Euromonitor. We examined 29 of these products sold by Nestlé in some of the main markets in low- and middle-income countries. The result: 21 of them (72 percent) contain added sugar<em>.</em></p>
                      <p>For ten of these products, we were able to determine the amount of added sugar. On average, our analysis found almost two grams per serving. The maximum value – 5.3 grams per serving – was detected in a <a href="https://www.nestleagustoconlavida.com/nido-1" target="_blank">product</a> sold in Panama.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>Here are some of the Nido products examined in this investigation. On average, they contain almost 2 grams of added sugar per serving. © Anne-Laure Lechat</p>
                          <p>Here are some of the Nido products examined in this investigation. On average, they contain almost 2 grams of added sugar per serving. © Anne-Laure Lechat</p>
                        </figcaption>
                      </figure>
                      <p>With sales at around $400 million in 2022, Indonesia is the world’s leading market for Nido, known locally as Dancow. The two products for children aged one and over sold in the country contain added sugar – more than 0.7 grams per serving.</p>
                      <figure>
                        
                        <figcaption></figcaption>
                      </figure>
                      <p>While the multinational is quick to highlight that these products are “without added sucrose,” they do contain added sugar in the form of honey. However, honey and sucrose are both considered by the WHO as sugars that should not be added to baby food. Indeed, Nestlé itself <a href="https://www.nidokids.co.za/nutrition-and-healthy-eating/sugar-fact-fiction-quiz" target="_blank">explains</a><a href="https://www.nidokids.co.za/nutrition-and-healthy-eating/sugar-fact-fiction-quiz"> </a>it very well in an educational quiz on Nido’s website in South-Africa: replacing sucrose with honey has “no scientific health benefit”, as both can contribute “to weight gain and possibly obesity”.</p>
                      <p>In Brazil, the world’s second-largest market for Nido, Nestlé <a href="https://www.ninho.com.br/ninho-fases1" target="_blank">claims</a> not to add sugar to its products out of concern for children’s health and diet: “It’s ideal to avoid consuming these ingredients in childhood, as the sweet flavour can influence a child’s preference for this type of food in the future,” warns the food giant on the brand’s website in Brazil.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>A shop covered with Nido products in Managua (Nicaragua). © Laurent Gaberell</p>
                          <p>A shop covered with Nido products in Managua (Nicaragua). © Laurent Gaberell</p>
                        </figcaption>
                      </figure>
                      <p>However, in most Central American countries, where Nestlé aggressively promotes Nido using influencers, the formulas for children aged one year and above contain over a sugar cube per serving. In Nigeria, Senegal, Bangladesh and South Africa – where Nido is very popular – all products for young children aged one to three contain added sugar.</p>
                      <p>“I do not understand why products for sale in South Africa should be different from those that are sold in high-income settings,” states Karen Hofman, Professor of Public Health at the University of Witwatersrand in Johannesburg and a qualified paediatrician. “It is a form of colonization and should not be tolerated,” she adds. “There is no valid reason to add sugar to baby food anywhere,” Hofman insists.</p>
                    </div>
      </section>
      <section id="group-section-First-two-years-of-life-Mwlq7k1QJj">
        <div data-scrollymoly-basis="true" data-testid="ENG-5457" id="section-First-two-years-of-life-Mwlq7k1QJj" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsInRleHRGYWRlIjoibm9uZSIsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                  <p>
                    <h2><strong>The first two years of life</strong></h2>
                  </p>
                </div>
        <div id="section-82hnrCQGG0" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                      <p>This view is shared by the WHO, which has <a href="https://news.un.org/en/story/2019/07/1042441" target="_blank">warned</a> for several years now about the high added-sugar content in baby-food products. “This study stresses the need for urgent action to reshape the food environment for children,” Dr Francesco Branca, Director of the WHO Department of Nutrition and Food Safety, told Public Eye and IBFAN. “Eliminating added sugars from food products for young children would be an important way to implement early prevention of obesity.”</p>
                      <p>The WHO is <a href="https://www.who.int/health-topics/obesity" target="_blank">alarmed</a> that obesity is dramatically on the rise, particularly in low- and middle-income countries, where it has now reached “epidemic proportions” and is fuelling an increase of non-communicable diseases such as cardiovascular disease, cancer and diabetes. Increased consumption of ultra-processed foods, often high in sugar, is singled out as one of the main causes of this epidemic.</p>
                      <p>Youngest children are not immune to this scourge: childhood obesity has increased tenfold over the past four decades, <a href="https://www.who.int/news-room/fact-sheets/detail/obesity-and-overweight" target="_blank">according to the UN agency.</a> It’s estimated that 39 million children under the age of 5 are overweight or obese, the vast majority of which live in low- and middle-income countries.</p>
                      <p>“The first two years of a child’s life are particularly important, as optimal nutrition during this period lowers morbidity and mortality, reduces the risk of chronic disease, and fosters better development overall,” <a href="https://www.who.int/news-room/fact-sheets/detail/infant-and-young-child-feeding" target="_blank">explains</a> the WHO. In 2022, the UN agency <a href="https://apps.who.int/iris/bitstream/handle/10665/364678/WHO-EURO-2022-6681-46447-67287-eng.pdf?sequence=1&amp;isAllowed=y" target="_blank">called for</a> a ban on added sugars and sweeteners in food products for babies and children under the age of three, and <a href="https://apps.who.int/iris/bitstream/handle/10665/364678/WHO-EURO-2022-6681-46447-67287-eng.pdf?sequence=1&amp;isAllowed=y" target="_blank">urged</a> industry to “be proactive” and “support public health goals” by reformulating its baby food products.</p>
                      <p>But Nestlé seems to be turning a deaf ear to these appeals. While the multinational publicly <a href="https://www.bebe.nestle.fr/introduire-nourriture-bebe" target="_blank">recommends</a> avoiding baby foods containing added sugar, these wise words don’t seem to apply to low- and middle-income countries, where Nestlé continues to add high levels of sugar to some of its most popular products.</p>
                      <p>Nestlé did not respond to specific questions about this double standard. But the company told Public Eye and IBFAN that it “has reduced by 11% the total amount of added sugars in [its] infant cereal portfolio worldwide” over the past decade and that it will “further reduce the level of added sugars without compromising on quality, safety and taste”. Nestlé also indicated that it is phasing out sucrose and glucose syrup of its Nido “growing up milks” globally. The company added that its products “fully comply” with the Codex Alimentarius and local laws.</p>
                      <h2><strong>Weak regulation</strong></h2>
                      <p>These baby-food products with added sugar are permitted under national legislation despite the fact that they go against WHO guidelines. National legislation is often based on the Codex Alimentarius, a collection of international standards developed by an intergovernmental commission based in Rome. The stated aim is to protect consumers’ health and ensure fair practices in the food trade. These standards, which gained importance as reference points for trade disputes following the establishment of the World Trade Organisation in 1995, tolerate added sugar in baby foods up to certain limits specific for each type of product – up to 20 percent in infant cereals.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>Codex Alimentarius Commission meeting in Rome. ©&nbsp;FAO&nbsp;/ Alessandra Benedetti</p>
                          <p>Codex Alimentarius Commission meeting in Rome. ©&nbsp;FAO&nbsp;/ Alessandra Benedetti</p>
                        </figcaption>
                      </figure>
                      <p>Codex standards for baby foods have been strongly <a href="https://iris.who.int/bitstream/handle/10665/260137/9789241513470-eng.pdf?sequence=1" target="_blank">criticized</a> by the WHO, which deems them “inadequate”, particularly concerning sugar, as children establish their food preferences early in life. The agency has called for the standards to be updated and brought into line with WHO guidelines, with a particular focus on banning the addition of sugars. Current Codex standards are insufficient to determine whether a food is appropriate for promotion for infants and young children, according to the UN agency.</p>
                      <p>“WHO recommendations are independent of all industry influence,” Nigel Rollins told Public Eye and IBFAN. “At Codex, you have substantive lobbying: the sugar industry, the baby-food industry, and others are all present in the rooms where the decisions are taken.” Although the Codex Commission is an intergovernmental body, industry representatives may participate as observers, or even as members of national delegations. At a recent review of the standard for follow-up formula, industry lobbyists <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9309967/" target="_blank">accounted for</a> over 40 percent of participants. For Rollins, this is the main reason why Codex standards – and by extension national laws – are less protective than WHO guidelines.</p>
                    </div>
      </section>
      <section id="group-section-Controversial-marketing-practices-B9ha91LIay">
        <div data-scrollymoly-basis="true" data-testid="ENG-5457" id="section-Controversial-marketing-practices-B9ha91LIay" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsInRleHRGYWRlIjoibm9uZSIsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                  <p>
                    <h2><strong>Controversial marketing practices</strong></h2>
                  </p>
                </div>
        <div id="section-JHuGeAM4xh" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                      <p>Our investigation shows that Nestlé uses aggressive marketing methods to promote Nido and Cerelac in low- and middle-income countries, despite the WHO’s International Code which <a href="https://www.who.int/tools/elena/interventions/regulation-breast-milk-substitutes" target="_blank">prohibits</a> the commercial promotion of such products. The Code, originally adopted in 1981 in the wake of the “baby killers” <a href="https://www.theguardian.com/sustainable-business/nestle-baby-milk-scandal-food-industry-standards" target="_blank">scandal,</a> and clarified and strengthened by later Resolutions, bans all promotion of infant formula in order to protect breastfeeding. The ban also <a href="https://iris.who.int/bitstream/handle/10665/260137/9789241513470-eng.pdf?sequence=1" target="_blank">applies</a> to formulas for young children and baby foods that, like Cerelac, do not meet nutrition guidelines and contain “high levels of sugar”.</p>
                      <p>Nestlé responds that it “complies with the WHO Code and subsequent WHA resolutions as implemented by national governments everywhere in the world.” “Where local law is less stringent than our Policy for implementing the Code, we adhere to our strict Policy,” Nestlé adds.</p>
                      <p>In practice, while 70% of countries have adopted laws based on the Code, many contain loopholes and implementation is generally <a href="https://www.who.int/news-room/events/detail/2023/06/20/default-calendar/global-congress-on-implementation-of-the-international-code-of-marketing-of-breast-milk-substitutes" target="_blank">weak</a> in low- and middle-income countries, often as a result of pressures from the baby-food industry and exporting countries. Furthermore, the Nestlé policy neither applies to formulas for children aged one year or more, nor to other baby foods, although these are all covered by the Code.</p>
                      <p>What’s more, Nestlé promotes its Nido and Cerelac products as healthy and essential for children’s development, although they contain added sugar and carry many risks for children’s health and development. “Often manufacturers’ health claims are not supported by the science,” says Rollins, in response to reading our report. “If you have a pharmaceutical product for which you want to claim that it improves brain development in babies, or improve growth in babies, you would have to pass very high standards of evidence,” he explains. “But because it’s a food, you don’t have to pass those standards.”</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>In Central and West Africa, Nestlé is active on Facebook with a page called “Nido Mums”.</p>
                          <p>In Central and West Africa, Nestlé is active on Facebook with a page called “Nido Mums”.</p>
                        </figcaption>
                      </figure>
                      <p>Nutrition and health claims “idealize the product, imply that it is better than family foods, and mask the risks,” the WHO <a href="https://iris.who.int/bitstream/handle/10665/260137/9789241513470-eng.pdf?sequence=1" target="_blank">explained</a> in a recent report that warns of baby-food marketing practices that compromise the progress made in infant and young-child nutrition. They mislead consumers as to the real content of these foods and should not be made, according to the UN agency. Yet Nestlé has made them a core pillar of its marketing strategy.</p>
                      <h2><strong>“Grow smart”</strong></h2>
                      <p>“Grow smart”. Huge billboards in the centre of Jakarta and other main Indonesian cities display the slogan. It’s at the heart of Nestlé’s campaign to promote its Nido brand, known in the country as Dancow, as the “parents’ partner for children’s growth and development”. “Inspired by mum’s love for baby nutrition, Dancow is the healthiest choice”, <a href="https://www.facebook.com/DancowIndonesia/" target="_blank">claims</a> Nestlé, while failing to disclose that its product contains added sugar.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>“Grow smart”. Advertising for Nido (Dancow) products in central Jakarta. Both products targeted at young children from one year contain added sugar © Ibfan</p>
                          <p>“Grow smart”. Advertising for Nido (Dancow) products in central Jakarta. Both products targeted at young children from one year contain added sugar © Ibfan</p>
                        </figcaption>
                      </figure>
                      <p>Last year, Nestlé launched a <a href="https://www.dancow.co.id/dpc/akudankausukadancow" target="_blank">campaign</a> aimed at “supporting the potential of children of 1 year and above in Indonesia”. The campaign managed to engage 2 million mothers in sharing “exciting moments” with their children on social media, effectively turning them into unpaid advertisers and brand ambassadors. “Thank you @dancow for accompanying my child’s growth and development,” writes one of the mothers.</p>
                      <p>Nestlé deploys the same, finely honed strategy in Brazil to promote its Cerelac (Mucilon) infant cereal brand. Its campaign is based on the concept of “nutrition enriched by Mucilon and chosen by mothers,” <a href="https://grandesnomesdapropaganda.com.br/anunciantes/nova-campanha-mostra-o-amor-dos-pais-e-a-nutricao-fortificada-por-tras-de-cada-colherada-de-mucilon/" target="_blank">muses</a> Dani Ribeiro, director of the advertising agency in charge. It plays on parents’ love for their babies, and highlights “the benefits of nutrients that contribute to babies’ immunity and brain development,” she explains. “Parents are nourished by the fact that they are making the right choice for their children,” Ribeiro adds.</p>
                      <figure>
                        
                        <figcaption>
                          <p>In Brazil, Nestlé promotes Cerelac (Mucilon) baby cereals as being rich in nutrients which contribute to children's immunity and cerebral development.</p>
                        </figcaption>
                      </figure>
                      <p>In South Africa, Nestlé promotes Cerelac as a source of 12 essential vitamins and minerals under the theme “little bodies need big support”. “For over 150 years, generations of parents have trusted Nestlé Cerelac to provide just what their baby needs,” <a href="https://www.facebook.com/CerelacSA/" target="_blank">trumpets</a> the multinational. Yet all Cerelac products sold in this country, which is facing a veritable obesity <a href="https://extranet.who.int/ncdccs/Data/ZAF_B10_National%20Strategy%20for%20prevention%20and%20Control%20of%20Obesity%204%20August.pdf" target="_blank">epidemic,</a> contain high levels of added sugar.</p>
                      <figure>
                        <p>For over 150 years, generations of parents have trusted NESTLÉ® CERELAC® to provide just what their baby needs.
                          #LittleBodiesNeedBigSupport.</p>
                        
                        <figcaption>
                          <p>In South Africa, Nestlé is promoting Cerelac baby cereals under the theme "little bodies need big support". All products contain a minimum of one cube of added sugar per serving.</p>
                        </figcaption>
                      </figure>
                      <p>Chris Van Tulleken, Professor at the University of London and author of the best-selling book <em>Ultra-Processed People</em>, which explores the pervasiveness and impact of ultra-processed food, is extremely concerned about the marketing strategy used by Nestlé. “These are not healthy products. They are not necessary. They are inferior to real food,” he stated. “These types of products are part of a global nutrition transition to an ultra-processed diet which is associated with weight gain and obesity, but also many other adverse health outcomes."</p>
                    </div>
      </section>
      <section id="group-section-Educational-platform-cKUNF0L8ps">
        <div data-scrollymoly-basis="true" data-testid="ENG-5457" id="section-Educational-platform-cKUNF0L8ps" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsInRleHRGYWRlIjoibm9uZSIsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                  <p>
                    <h2><strong>An “educational” platform</strong></h2>
                  </p>
                </div>
        <div id="section-ncKXxCDC9T" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                      <p>Nestlé pioneered “medical marketing,” involving a set of techniques that have become standard practice in the industry today, says Phillip Baker, a senior research fellow at the University of Sydney in Australia and author of numerous studies on the subject. The strategy is based on strengthening links with health professionals and obtaining the endorsement of leading scientific authorities, while positioning the company as a partner for parents in the nutrition and development of their children.</p>
                      <p>While the main goal is to increase sales on the baby-food market itself, it plays another key role for Nestlé: developing loyal consumers for life. Baker describes it as a “cradle-to-grave marketing strategy.” “The idea being to get consumers from a very young age, develop that brand loyalty, develop those taste preferences for their products”, he explains.</p>
                      <p>Nestlé has created Baby and Me, an “educational platform” available in over 60 countries, with the stated aim of promoting healthy eating for babies and offering “expert-backed” information. Parents looking for information on infant nutrition may be directed to this platform and be exposed to content that steers them towards Nestlé products.</p>
                      <figure data-lazyload-container="true" data-lazyload-trigger="true">
                        
                        <figcaption>
                          <p>Nestlé has created the “Baby and Me” educational platform, whose stated aim is to promote healthy eating for babies and provide information that is “expert-backed”. But the advertising is never far away.</p>
                          <p>Nestlé has created the “Baby and Me” educational platform, whose stated aim is to promote healthy eating for babies and provide information that is “expert-backed”. But the advertising is never far away.</p>
                        </figcaption>
                      </figure>
                      <p>“Parenteam,” the Filipino version of the scheme, offers ovulation and pregnancy calendars as well as a due-date calculator. In South Africa, parents can access a “major moment checklist” to help them “win in every aspect of modern parenting”. Mexico has an allergy calculator and Brazil a guide to finding the perfect name. These websites are packed with advice, tools and recipes designed to attract parents. But ads for Nestlé products and “buy now” buttons are never far away.</p>
                      <h2><strong>Experts in white coats</strong></h2>
                      <p>Nestlé regularly organizes events on the Nido and Cerelac online channels with health professionals. Although most of the time the experts speak about child-nutrition related issues and do not directly promote the products, the Nido and Cerelac brands feature prominently, leading parents to believe that these products are endorsed by eminent scientific authorities and that Nestlé’s health and nutrition claims have scientific support.</p>
                      <p>Our investigation also uncovered cases of experts in white coats directly promoting Nestlé products. “Nido’s specialized nutrition system is designed to protect every stage of your child’s development,” explains nutritionist Kenia Lawrence in a <a href="https://www.instagram.com/p/C2_ILm-rMhp/" target="_blank">video</a> posted on Instagram in Panama. “Nido1+ helps protect and strengthen the immune system, thanks to probiotics and prebiotics, and contains key nutrients for child development.” Not a word on the one and a half sugar cubes added to each portion of the product in question.</p>
                      <figure>
                        
                        <figcaption></figcaption>
                      </figure>
                      <p>For Baker, it is evident that “by using health professionals, the companies powerfully shape parents’ decision making”. An influence that “can very often be harmful,” he believes. This practice also goes against WHO <a href="https://iris.who.int/bitstream/handle/10665/374182/9789240084490-eng.pdf?sequence=1" target="_blank">guidelines,</a> which state that manufacturers must not encourage healthcare professionals to support and recommend their brands and products.</p>
                      <p>In a <a href="https://iris.who.int/bitstream/handle/10665/353604/9789240046085-eng.pdf?sequence=2" target="_blank">recent report,</a> the UN agency severely criticized the marketing practices used by the baby-food industry to promote its products online, pointing the finger at the use of various strategies that are often not identifiable as advertising. These include the use of baby-clubs, as well as the use of health professionals and influencers such as Meagan Adonis and Billy Saavedra. The UN agency <a href="https://www.who.int/news/item/28-04-2022-who-reveals-shocking-extent-of-exploitative-formula-milk-marketing" target="_blank">called</a> on manufacturers to put an end to their “exploitative marketing practices”.</p>
                      <p>Nothing can justify the double standards highlighted by the Public Eye and IBFAN investigation. If Nestlé truly intends to act responsibly, it must follow the recommendations and guidelines of the WHO and stop getting babies and young children hooked on sugar, regardless of the country in which they were born.</p>
                    </div>
        <div data-scrollymoly-basis="true" data-testid="ENG-5457" id="section-VNNwLx9L6R" data-effects="eyJ0ZXh0UGVyTGluZSI6ZmFsc2UsImhhc0VmZmVjdHMiOmZhbHNlLCJuZWVkc0JhY2tncm91bmRDbG9uZSI6ZmFsc2UsImVuY29kZWQiOiIifQ==">
                    <figure data-lazyload-container="true" data-lazyload-trigger="true">
                      
                      <figcaption>
                        
                        
                      </figcaption>
                    </figure>
                    <p>Swiss NGO <strong>Public Eye</strong> offers a critical analysis of the impact that Switzerland, and its companies, has on economically disadvantaged countries. Through research, advocacy and campaigning, Public Eye also demands the respect of human rights and of the environment throughout the world. With a strong support of some 28,000 members, Public Eye focuses on global justice. <strong>Reports like this one are only possible thanks to the people who support us</strong>: <a href="https://www.publiceye.ch/en/donate" target="_blank"><span>with a donation,</span></a> you help us remain entirely independent.</p>
                    
                    <h3><strong>Imprint</strong></h3>
                    <p><br><strong>Text:</strong> Laurent Gaberell, Manuel Abebe, Patti Rundall<br><strong>English translation:</strong> Manuel Abebe<br><strong>Editing:</strong> alphadoc <br><strong>Web implementation: </strong>Fabian Lang, Rebekka Köppel<br></p>
                    
                  </div>
        
      </section>
      
    </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[AltStore PAL, the first alternative app marketplace on iPhone, is available now (190 pts)]]></title>
            <link>https://mastodon.social/@stroughtonsmith/112287515017810339</link>
            <guid>40067556</guid>
            <pubDate>Wed, 17 Apr 2024 17:16:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://mastodon.social/@stroughtonsmith/112287515017810339">https://mastodon.social/@stroughtonsmith/112287515017810339</a>, See on <a href="https://news.ycombinator.com/item?id=40067556">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Effort – a possibly new algorithm for LLM Inference (126 pts)]]></title>
            <link>https://kolinko.github.io/effort/</link>
            <guid>40067489</guid>
            <pubDate>Wed, 17 Apr 2024 17:09:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://kolinko.github.io/effort/">https://kolinko.github.io/effort/</a>, See on <a href="https://news.ycombinator.com/item?id=40067489">Hacker News</a></p>
<div id="readability-page-1" class="page"><article>

      
      <p>A possibly new algorithm for LLM Inference</p>
      <section>
        <p>
        With Effort you can adjust smoothly - and in real time - how many calculations you'd like to do during inference of an LLM model. 
        </p><p>
          At 50% calculations it is as fast as regular matrix multiplications on Apple Silicon chips. At 25% effort it's twice as fast and still retains most of the quality.
          </p><p>
            You can also freely choose to skip loading the least important weights.
          </p><p>
            It is implemented for Mistral now, it should work for all the other models just as well. No retraining needed, just conversion to a different format and some precomputation.

          </p><p>
          <img src="https://kolinko.github.io/effort/ryc/ryc0.1.png">
</p><p>
You can download the implementation here - <a href="https://github.com/kolinko/effort">from Github</a>. It should run right after fetching the converted weights.
</p><p>
The implementation is done for FP16 only for now. The multiplications are fast, but inference overall is still slightly lacking because some non-essential parts - softmax etc - need improvement.

</p><p>Mixtral and Q8 are in the works. 
</p><p>
Oh, and it also allows to <b>dynamically decide how much of the model you want to load into the memory</b>. You can skip the least important 10-20-30% weights while loading. It doesn't require any conversion steps - it just loads less data. Sort of an ad-hoc distillation, you could say.
</p><p>
  Let's see it in action now.
  </p><figure id="demo">
 
  


The actual speed is constrained by the implementation overhead. Even on 0%, it still takes 15ms on my machine (and a few seconds on M1 Air) to produce a single token. These parts are done in &lt;1ms in Llama.cpp/Ollama, and I could use help from a Swift/Metal engineer to fix this.
</figure>
<p>
  <a href="https://github.com/kolinko/effort">You can download and test it yourself from Github.</a>
</p><p>
  Getting back to benchmarks...
</p><figure>
          <img src="https://kolinko.github.io/effort/ryc/ryc0.2.png">

The pink line is actual speed, with a suboptimal implementation of the overhead (calculating norms, attn scores etc). There is a ~15ms overhead to every token that I didn't manage to fix, but Llama.cpp/Ollama/MLX don't seem to have. Help would be appreciated here from someone proficient in Metal/Swift.
</figure>
  <p>
  Let's talk quality now. 
  </p><p>
    First, of the multiplication approximation itself.
  </p><figure>
<img src="https://kolinko.github.io/effort/ryc/ryc0.3.png">
Tracked by taking a sample input state vector, multiplying it by say wq, or w1. Some Matrixes seem to be easier to approximate using this method, some are slightly more difficult. But more or less the output looks like here.
  </figure>
  <p>
And now for the model itself.
</p><figure>
  <img src="https://kolinko.github.io/effort/ryc/ryc0.4.png">
  Measured by generating a 500 token text first, and then comparing predictions of the tokens when this text would be given as an input. Perplexity score would be nice here, see notes at the end why it's not yet done.
</figure>
<p>
  And basic QA tests:
  </p><figure>
  <img src="https://kolinko.github.io/effort/ryc/ryc0.5.png">
  BasicQ is a list of a few tricky QA prepared by GPT-4. Hopefully this and the working demo are enough to show the potential. Performing HumanEval and HellaSWAG needs fixes in the implementation first - see below.
</figure>
<p>
If you're still sceptical - as I would be - please head out to the <a href="https://kolinko.github.io/effort/pesky.html">Help Needed!</a> section to see what's needed for the better tests to be performed.
</p><p>
  The initial results (and undocumented experiments with Mixtral) seem to be robust enough to warrant publication. I hope though that the above is enough to convince you to <a href="https://github.com/kolinko/effort">play with the 0.0.1B version</a>.
</p></section>
 <section>
  <h2>
    Deep dive into the algorithm.
  </h2>

<p>
  - <a href="https://kolinko.github.io/effort/equations.html">The Basics</a>
</p>
<p>
  - <a href="https://kolinko.github.io/effort/bucketmul.html">Introducing bucketMul</a>
</p>
  <p>
    - <a href="https://kolinko.github.io/effort/gpu.html">The GPU implementation</a>
  </p>
    <p>
    - <a href="https://kolinko.github.io/effort/q8.html">MoE, quantization and the others.</a>
    </p>
    <p>
      - <a href="https://kolinko.github.io/effort/pesky.html">Pesky details (or: Help Needed!)</a>
    </p>
    <h2>And of course...</h2>
    <p>
      - <a href="https://kolinko.github.io/effort/about.html">About the Author(s)</a>
    </p>
    <p>
      - <a href="https://kolinko.github.io/effort/setup.html">Download and Run</a>
</p>
    <p>
      - Citations, notes and so on
    </p>

  </section>
    </article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Embeddings are a good starting point for the AI curious app developer (586 pts)]]></title>
            <link>https://bawolf.substack.com/p/embeddings-are-a-good-starting-point</link>
            <guid>40067486</guid>
            <pubDate>Wed, 17 Apr 2024 17:09:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://bawolf.substack.com/p/embeddings-are-a-good-starting-point">https://bawolf.substack.com/p/embeddings-are-a-good-starting-point</a>, See on <a href="https://news.ycombinator.com/item?id=40067486">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p>Vector embeddings have been an Overton window shifting experience for me, not because they’re sufficiently advanced technology indistinguishable from magic, but the opposite. Once I started using them, it felt obvious that this was what the search experience was always supposed to be: less “How did you do that?” and more mundanely, “Why isn’t this everywhere?”</p><p>This feels like the right place to start if you’re an app developer looking for an excuse to dip your toes into this new AI world. Embeddings are just arrays of numbers, but they contain a compressed form of a considerable amount of human knowledge and shrink features that used to be substantial specialized projects into ones that individual product engineers can take on.</p><p>There are a ton of tooling options available to use embeddings. I’ll highlight our choices and note where you might want to make different ones for your situation. Here are some points I hope you take away:</p><ul><li><p>Vector embeddings work for search and recommendations because they’re good at measuring similarity to arbitrary input. This even works for different spoken languages like French or Japanese.</p></li><li><p><a href="https://github.com/pgvector/pgvector/" rel="nofollow ugc noopener">Pgvector</a><span> is a Postgres extension that stores and queries embeddings without adding a new service. It’s powerful because it can combine standard SQL logic with embedding operations.</span></p></li><li><p>Unlike LLMs, working with embeddings feels like regular deterministic code. </p></li></ul><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png" data-component-name="Image2ToDOM" rel="nofollow ugc noopener"><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png" width="1456" height="832" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/cb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:832,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:2508240,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fcb972599-8305-4943-a8e6-689a7f30bae3_1792x1024.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a></figure></div><p><span>My friend Charlie Yuan and I built this mini </span><a href="https://www.v0.app/" rel="nofollow ugc noopener">icon app</a><span> to help people discover icons. It’s pretty short and sweet. We have icon sets you can query, bookmark, and add to your project.</span></p><p><span>There are a bunch of </span><a href="https://lakefs.io/blog/12-vector-databases-2023/" rel="nofollow ugc noopener">specialized vector databases</a><span> to choose from. Instead, we chose Postgres with </span><a href="https://github.com/pgvector/pgvector/" rel="nofollow ugc noopener">pgvector</a><span> to blend embedding search with business logic like filtering and scoring. While it’s not the fastest vector database, we didn’t want to have to compare results across multiple data sources. Pgvector probably already has </span><a href="https://github.com/pgvector/pgvector" rel="nofollow ugc noopener">a library for your favorite database client</a><span>. Our project was Typescript through and through, and we used </span><a href="https://github.com/pgvector/pgvector-node?tab=readme-ov-file#drizzle-orm" rel="nofollow ugc noopener">drizzle-orm</a><span>. The docs will be a more robust place for setup documentation, so I’m leaving out that part to focus on the features you can build.</span></p><p>Once set up with pgvector, we created a strategy for encoding our icon data into vector embeddings. Embeddings are points in many-dimensional space, up to thousands of dimensions. Unfortunately, the axes of that grid are not humanly grokable ideas like “size” or “brightness.” They’re a bit of a black box. Luckily, like any good abstraction, they’re a black box with a good API.</p><p>The best practice seems to be finding the details that best represent what people want to search for and creating a function that outputs that as a string. Our icons can be a part of many use-case-based ‘categories’ and have many descriptive ‘tags’ associated with them. We encoded that information along with the icon name because that best represents what the icon is. Whereas the name of the icon set the icon belongs to, or its dimensions aren’t relevant. The strings we generated looked basically like this:</p><pre><code>const createIconEmbeddingsString = (icon) =&gt; `icon: "${icon.name}", categories: [${categories}] tags: [${tags}]`;</code></pre><p><span>Next, we chose an embedding model. </span><a href="https://platform.openai.com/docs/guides/embeddings" rel="nofollow ugc noopener">OpenAI’s embedding models</a><span> will probably work just fine. We’re using their `text-embedding-3-small`. If you want to dive in, check out the </span><a href="https://huggingface.co/spaces/mteb/leaderboard" rel="nofollow ugc noopener">leaderboard</a><span> and pick the model that best meets your needs. Whether you use an embeddings API or self-host an open source option, the interface should be text in and embeddings out.</span></p><p><span>Many sites implement search, but most icon sites implement search by </span><a href="https://icon-sets.iconify.design/?query=woof" rel="nofollow ugc noopener">text</a><span> </span><a href="https://react-icons.github.io/react-icons/search/#q=woof" rel="nofollow ugc noopener">matching</a><span> or full-text search. If you’re looking for a dog icon, they search over the icon metadata for icons that have ‘dog’ in them. If they want to get </span><a href="https://fontawesome.com/search?q=woof&amp;o=r" rel="nofollow ugc noopener">craftier</a><span>, they come up with a bag of words related to ‘dog,’ like maybe ‘k9’, ‘puppy,’ and ‘woof’ to catch near misses. That’s pretty fragile. Someone has to choose tags for each icon; if they miss an important one, users won’t find what they’re looking for.</span></p><p><span>Our app gets relevant results when searching for ‘</span><a href="https://www.v0.app/search?g=popularity&amp;q=dog&amp;qid=nmezx8efde3pvydym2f2sk9n" rel="nofollow ugc noopener">dog</a><span>.’ We also get solid results for ‘</span><a href="https://www.v0.app/search?g=popularity&amp;q=puppy&amp;qid=v27kjdebk8ex7n30qe4b5tfs" rel="nofollow ugc noopener">puppy</a><span>’ without a bag of words by measuring the cosine similarity between the embeddings of your search query and each icon. There are multiple ways to measure how similar embeddings are to each other, but OpenAI’s embeddings are designed to work well with cosine distance. Cosine similarity is just the opposite of cosine distance. Order by cosine distance wherever you can to take advantage of </span><a href="https://github.com/pgvector/pgvector?tab=readme-ov-file#why-isnt-a-query-using-an-index" rel="nofollow ugc noopener">indexes</a><span>.</span></p><pre><code>cosine_similarity(x,y) = 1 - cosine distance(x,y)</code></pre><p><span>You can even try dog breeds like ‘</span><a href="https://www.v0.app/search?q=hound" rel="nofollow ugc noopener">hound</a><span>,’ ‘</span><a href="https://www.v0.app/search?q=poodle" rel="nofollow ugc noopener">poodle</a><span>,’ or my favorite ‘</span><a href="https://www.v0.app/search?q=samoyed" rel="nofollow ugc noopener">samoyed</a><span>.’ It pretty much just works. But that’s not all; it also works for other languages. Try ‘</span><a href="https://www.v0.app/search?g=popularity&amp;q=chien&amp;qid=mcbp6rk9z3y8lb1emt1zblev" rel="nofollow ugc noopener">chien</a><span>’ and even ‘</span><a href="https://www.v0.app/search?g=popularity&amp;q=%E7%8A%AC&amp;qid=hd8whx733f3rljhadasgfzb9" rel="nofollow ugc noopener">犬</a><span>’</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-1-143207380" href="https://bawolf.substack.com/p/embeddings-are-a-good-starting-point#footnote-1-143207380" target="_self" rel="nofollow ugc noopener">1</a></span><span>! With pgvector, we can get these results with simple SQL queries.</span></p><pre><code>SELECT
  1 - cosine_distance (search_query.embedding,
    icon.embedding) as similarity,
  *
FROM
  icon
  join search_query on search_query.text = 'dog'
ORDER BY
  cosine_distance (search_query.embedding, icon.embedding) ASC
LIMIT 50;</code></pre><p>Since we’re ordering by distance, every search returns every result in the table in order of closeness. We cut off results by a fixed number to make this manageable, limiting the query to the top 50. Using an arbitrary distance cut-off is tempting, like querying for results with a cosine similarity of less than 0.8. Unfortunately, the absolute distance for one query to produce correct-feeling results might differ drastically from another. We limit by the number of results, not by a minimum value, whenever possible.</p><p><span>If we only wanted similarity search, any vector database would be fine, but Postgres allowed us to layer more features on top. The initial search looks across </span><em>all icons</em><span> in </span><em>all  icon sets</em><span>, but our user’s style might only match some of the icon sets. We can filter by values like in any other Postgres query.</span></p><pre><code>SELECT
  1 - cosine_distance (search_query.embedding,
    icon.embedding) AS similarity,
  *
FROM
  icon
  JOIN search_query ON search_query.text = 'dog'
  JOIN icon_set ON icon_set.slug = icon.icon_set_slug
WHERE
  icon_set.slug in('lucide', 'mdi')
ORDER BY
  cosine_distance (search_query.embedding,
    icon.embedding) ASC
LIMIT 50;</code></pre><p>This is deterministic; everyone searching for a ‘dog’ will get the same results. However, the inputs are still unbounded, so embedding search doesn’t guarantee that the best results will be produced for every input. We can try different embedding models or ways of encoding icons into embeddings to improve the system.</p><p>The embedding search usually puts the correct icon on the page, but the correct icon isn’t always the first result. We could make a simple algorithm that adjusts to user feedback and improves over time. To do this, we’d count every time a user clicks on an icon for a particular search query. When ranking search results, we’d create a score for each icon that combines the embedding search with the click data.&nbsp;</p><p><span>Here’s a simple ranking algorithm. The details look messy because there’s some null checking and unit conversions</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-2-143207380" href="https://bawolf.substack.com/p/embeddings-are-a-good-starting-point#footnote-2-143207380" target="_self" rel="nofollow ugc noopener">2</a></span><span>, but here are the basics. </span></p><ol><li><p>Get the cosine similarity of the icon for the search query. It will be a number between 0 and 1. Multiply it by 0.5.</p></li><li><p>Divide the number of clicks for each icon by the icon with the most clicks for that query. This normalizes the most clicked icon to 1, and the least clicked to 0. Multiply by 0.5.</p></li><li><p><span>The final score is these two values added together for a range between 0-1.</span><span><a data-component-name="FootnoteAnchorToDOM" id="footnote-anchor-3-143207380" href="https://bawolf.substack.com/p/embeddings-are-a-good-starting-point#footnote-3-143207380" target="_self" rel="nofollow ugc noopener">3</a></span></p></li></ol><pre><code>SELECT
  (
    0.5 * COALESCE(      -- so nulls are turned into 0
     1 - cosine_distance (search_query.embedding, icon.embedding),
     0
    ) + 0.5 *     -- so clicks matter less than embeddings.
    COALESCE( 
      search_query_selection. "count"::decimal / 
        max(search_query_selection. "count") OVER (),
    0)
  ) AS score,
  icon.*
FROM
  icon
  LEFT JOIN search_query_selection
    ON icon.id = search_query_selection.icon_id
  LEFT JOIN search_query
    ON search_query.text = 'dog'
      AND search_query.id = search_query_selection.search_query_id
  ORDER BY score DESC
  LIMIT 50;</code></pre><p>Should vector embedding distance and clicks be equally weighted? Should the order of magnitude of clicks matter more than the raw number? The algorithm might need tuning, but this is just an example of how the database handles the calculation nicely.</p><p>With a separate vector database, we might have to get values for all icons from both databases before comparing them in application code or making tradeoffs like pulling 100 results from the vector db and filtering the Postgres query for click score to those results or vice versa. Instead, we simply query for results and display them.</p><p><span>Additionally, we include a content forward section of each </span><a href="https://www.v0.app/icon/lucide/arrow-up" rel="nofollow ugc noopener">icon page</a><span> with other icons in the same icon set and category. That way, you can see other ‘navigation’ icons when looking at `arrow-up` in case you need those. Unfortunately, not all of our icon sets have categories. In these cases, we make a similar icons section using embeddings. Instead of getting an embedding from user input, we can compare the same cosine similarity measure against the selected icon’s embedding.</span></p><pre><code>WITH current_icon AS (
&nbsp;&nbsp;&nbsp;&nbsp;SELECT
&nbsp;&nbsp;&nbsp;   embedding,
&nbsp;&nbsp;&nbsp;   slug,
&nbsp;&nbsp;&nbsp;   icon_set_slug
&nbsp;&nbsp;&nbsp;&nbsp;FROM
&nbsp;&nbsp;&nbsp;   icon
&nbsp;&nbsp;&nbsp;&nbsp;WHERE
&nbsp;&nbsp;&nbsp;   icon_set_slug = 'lucide'
&nbsp;&nbsp;&nbsp;   AND slug = 'activity'
)
SELECT
&nbsp;&nbsp;&nbsp;&nbsp;*
FROM
&nbsp;&nbsp;&nbsp;&nbsp;icon
INNER JOIN current_icon ON
icon.icon_set_slug = current_icon.icon_set_slug
AND icon.slug != current_icon.slug
ORDER BY
&nbsp;&nbsp;&nbsp;&nbsp;1 - cosine_distance (
&nbsp;&nbsp;&nbsp; icon.embedding,
&nbsp;&nbsp;&nbsp; current_icon.embedding
)
LIMIT 50;</code></pre><p>I hope you have a good experience playing with our app and vector embeddings! We owe a big thanks to all the engineers who pushed the state of the art so far that we can stand on their shoulders. I hope this modest contribution helps make adding embedding features to your app approachable!</p><p>Here is a summary of our implementation decisions and some sources for other options.</p><p><span>We chose </span><a href="https://github.com/pgvector/pgvector" rel="nofollow ugc noopener">pgvector</a><span>/Postgres, but there are plenty of </span><a href="https://lakefs.io/blog/12-vector-databases-2023/" rel="nofollow ugc noopener">other choices</a><span>, including some for other standard databases like MongoDB.</span></p><p><span>We worked in Typescript and chose </span><a href="https://github.com/pgvector/pgvector-node?tab=readme-ov-file#drizzle-orm" rel="nofollow ugc noopener">drizzle-orm</a><span>. I’ve also worked in the Phoenix elixir ecosystem using the </span><a href="https://github.com/pgvector/pgvector-elixir" rel="nofollow ugc noopener">elixir library</a><span> with Ecto. You can find a library for your client of choice </span><a href="https://github.com/pgvector/pgvector/?tab=readme-ov-file#languages" rel="nofollow ugc noopener">here</a><span>.</span></p><p><span>Our app is hosted on </span><a href="https://neon.tech/" rel="nofollow ugc noopener">Neon</a><span>. I’ve also used </span><a href="https://fly.io/" rel="nofollow ugc noopener">fly.io</a><span>, though their option wasn’t </span><em>really</em><span> a managed instance at the time. Now, they have a </span><a href="https://fly.io/docs/reference/supabase/" rel="nofollow ugc noopener">managed solution</a><span> with Supabase. If you want to look up someone else, Pgvector has a clumsy list of hosts that support it in </span><a href="https://github.com/pgvector/pgvector/issues/54" rel="nofollow ugc noopener">this git issue</a><span>.</span></p><p><span>We chose OpenAI’s `text-embedding-3-small`. If you want to try something else, check out Huggingface’s </span><a href="https://huggingface.co/spaces/mteb/leaderboard" rel="nofollow ugc noopener">leaderboard</a><span>.</span></p><p><span>We embedded strings of key and value pairs for the attributes we thought best described our icons. It doesn’t seem like any of the major players are doing anything crazy here; the significant knobs appear to be whether or not to embed keys or just values and which attributes of your records are relevant. Other examples in OpenAI’s </span><a href="https://cookbook.openai.com/examples/vector_databases/readme" rel="nofollow ugc noopener">cookbook</a><span> show </span><a href="https://github.com/vercel/examples/blob/main/storage/postgres-pgvector/prisma/seed.ts#L35" rel="nofollow ugc noopener">other</a><span> </span><a href="https://github.com/neondatabase/yc-idea-matcher/blob/18eb9dd6ddd14eeeb2167d78088f092ab6882f42/generate-embeddings.ts#L51" rel="nofollow ugc noopener">choices</a><span>.</span></p><p><span>We used cosine similarity as our distance function because that’s what OpenAI </span><a href="https://platform.openai.com/docs/guides/embeddings/which-distance-function-should-i-use" rel="nofollow ugc noopener">recommends</a><span> for their embeddings. Other embeddings may be optimized for different strategies. Pgvector </span><a href="https://github.com/pgvector/pgvector?tab=readme-ov-file#distances" rel="nofollow ugc noopener">supports</a><span> l2 distance, inner product, and cosine distance.</span></p><p>In these examples, we limited our queries to the top 50 results. You can also limit your search to be above or below a certain distance threshold. That doesn’t seem super reliable. Relative distances seem more meaningful than discrete amounts. If you’re set on using a threshold, I’d recommend keeping it pretty wide, like 0.1 or 0.05, and using it with a limit. You may get some mileage using a wide range to avoid returning irrelevant long-tail results.</p></div></article></div></div>]]></description>
        </item>
    </channel>
</rss>