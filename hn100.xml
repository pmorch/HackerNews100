<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 17 Mar 2024 06:00:06 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[How web bloat impacts users with slow devices (519 pts)]]></title>
            <link>https://danluu.com/slow-device/</link>
            <guid>39729057</guid>
            <pubDate>Sat, 16 Mar 2024 20:08:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://danluu.com/slow-device/">https://danluu.com/slow-device/</a>, See on <a href="https://news.ycombinator.com/item?id=39729057">Hacker News</a></p>
<div id="readability-page-1" class="page"><div> <meta property="og:image" content="/slow-device-performance.png"> <p>In 2017, <a href="https://danluu.com/web-bloat/">we looked at how web bloat affects users with slow connections</a>. Even in the U.S., <a href="https://twitter.com/danluu/status/1116565029791260672">many users didn't have broadband speeds</a>, making much of the web difficult to use. It's still the case that many users don't have broadband speeds, both inside and outside of the U.S. and that much of the modern web isn't usable for people with slow internet, but the exponential increase in bandwidth (Neilsen suggests <abbr title="Unfortunately, I don't know of a pubic source for low-end data, say 10%-ile or 1%-ile; let me know if you have numbers on this">this is 50% per year for high-end connections</abbr>) has outpaced web bloat for typical sites, making this less of a problem than it was in 2017, although it's still a serious problem for people with poor connections.</p> <p>CPU performance for web apps hasn't scaled nearly as quickly as bandwidth so, while more of the web is becoming accessible to people with low-end connections, more of the web is becoming inaccessible to people with low-end devices even if they have high-end connections. For example, if I try browsing a "modern" Discourse-powered forum on a <code>Tecno Spark 8C</code>, it sometimes crashes the browser. Between crashes, on measuring the performance, the responsiveness is significantly worse than browsing a BBS with an <code>8 MHz 286</code> and a <code>1200 baud</code> modem. On my <code>1Gbps</code> home internet connection, the <code>2.6 MB</code> compressed payload size "necessary" to load message titles is relatively light. The over-the-wire payload size has "only" increased by <code>1000x</code>, which is dwarfed by the increase in internet speeds. But the opposite is true when it comes to CPU speeds — for web browsing and forum loading performance, the <code>8-core (2 1.6 GHz Cortex-A75 / 6 1.6 GHz Cortex-A55)</code> CPU can't handle Discourse. The CPU is something like <code>100000x</code> faster than our <code>286</code>. Perhaps a <code>1000000x</code> faster device would be sufficient.</p> <p>For anyone not familiar with the <code>Tecno Spark 8C</code>, today, a new <code>Tecno Spark 8C</code>, a quick search indicates that one can be hand for <code>USD 50-60</code> in Nigeria and perhaps <code>USD 100-110</code> in India. As <abbr title="The estimates for Nigerian median income that I looked at seem good enough, but the Indian estimate I found was a bit iffier; if you have a good source for Indian income distribution, please pass it along.">a fraction of median household income, that's substantially more than a current generation iPhone in the U.S. today.</abbr></p> <p>By worldwide standards, the <code>Tecno Spark 8C</code> isn't even close to being a low-end device, so we'll also look at performance on an <code>Itel P32</code>, which is a lower end device (though still far from the lowest-end device people are using today). Additionally, we'll look at performance with an <code>M3 Max Macbook (14-core)</code>, an <code>M1 Pro Macbook (8-core)</code>, and the <code>M3 Max</code> set to <code>10x</code> throttling in Chrome dev tools. In order to give these devices every advantage, we'll be on fairly high-speed internet (1Gbps, with a WiFi router that's benchmarked as having lower latency under load than most of its peers). We'll look at some blogging platforms and micro-blogging platforms (this blog, Substack, Medium, Ghost, Hugo, Tumblr, Mastodon, Twitter, Threads, Bluesky, Patreon), forum platforms (Discourse, Reddit, Quora, vBulletin, XenForo, phpBB, and myBB), and platforms commonly used by small businesses (Wix, Squarespace, Shopify, and WordPress again).</p> <p>In the table below, every row represents a website and every non-label column is a metric. After the website name column, we have the compressed size transferred over the wire (<code>wire</code>) and the raw, uncompressed, size (<code>raw</code>). Then we have, for each device, Largest Contentful Paint* (<code>LCP*</code>) and CPU usage on the main thread (<code>CPU</code>). Google's docs explain <code>LCP</code> as</p> <blockquote> <p>Largest Contentful Paint (LCP) measures when a user perceives that the largest content of a page is visible. The metric value for LCP represents the time duration between the user initiating the page load and the page rendering its primary content</p> </blockquote> <p><code>LCP</code> is a common optimization target because it's presented as one of the primary metrics in Google PageSpeed Insights, a "Core Web Vital" metric. There's an asterisk next to <code>LCP</code> as used in this document because, <code>LCP</code> as measured by Chrome is about painting a large fraction of the screen, as opposed to the definition above, which is about content. As sites have optimized for <code>LCP</code>, it's not uncommon to have a large paint (update) that's completely useless to the user, with the actual content of the page appearing well after the <code>LCP</code>. In cases where that happens, I've used the timestamp when useful content appears, not the <code>LCP</code> as defined by when a large but useless update occurs. The full details of the tests and why these metrics were chosen are discussed in an appendix.</p> <p>Although CPU time isn't a "Core Web Vital", it's presented here because it's a simple metric that's highly correlated with my and other users' perception of usability on slow devices. See appendix for more detailed discussion on this. One reason CPU time works as a metric is that, if a page has great numbers for all other metrics but uses a ton of CPU time, the page is not going to be usable on a slow device. If it takes 100% CPU for 30 seconds, the page will be completely unusable for 30 seconds, and if it takes 50% CPU for 60 seconds, the page will be barely usable for 60 seconds, etc. Another reason it works is that, relative to commonly used metrics, it's hard to cheat on CPU time and make optimizations that significantly move the number without impacting user experience.</p> <p>The color scheme in the table below is that, for sizes, more green = smaller / fast and more red = larger / slower. Extreme values are in black.</p>  <table> <tbody><tr> <th rowspan="2">Site</th><th colspan="2">Size</th><th colspan="2">M3 Max</th><th colspan="2">M1 Pro</th><th colspan="2">M3/10</th><th colspan="2">Tecno S8C</th><th colspan="2">Itel P32</th></tr> <tr> <th>wire</th><th>raw</th><th>LCP*</th><th>CPU</th><th>LCP*</th><th>CPU</th><th>LCP*</th><th>CPU</th><th>LCP*</th><th>CPU</th><th>LCP*</th><th>CPU</th></tr> <tr> <td>danluu.com</td><td><span color="white">6kB</span></td><td><span color="white">18kB</span></td><td><span color="white">50ms</span></td><td><span color="white">20ms</span></td><td><span color="white">50ms</span></td><td><span color="white">30ms</span></td><td><span color="white">0.2s</span></td><td><span color="white">0.3s</span></td><td>0.4s</td><td><span color="white">0.3s</span></td><td>0.5s</td><td>0.5s</td></tr> <tr> <td>HN</td><td><span color="white">11kB</span></td><td><span color="white">50kB</span></td><td><span color="white">0.1s</span></td><td><span color="white">30ms</span></td><td><span color="white">0.1s</span></td><td><span color="white">30ms</span></td><td><span color="white">0.3s</span></td><td><span color="white">0.3s</span></td><td>0.5s</td><td>0.5s</td><td>0.7s</td><td>0.6s</td></tr> <tr> <td>MyBB</td><td><span color="white">0.1MB</span></td><td><span color="white">0.3MB</span></td><td><span color="white">0.3s</span></td><td><span color="white">0.1s</span></td><td><span color="white">0.3s</span></td><td><span color="white">0.1s</span></td><td>0.6s</td><td>0.6s</td><td>0.8s</td><td>0.8s</td><td>2.1s</td><td>1.9s</td></tr> <tr> <td>phpBB</td><td>0.4MB</td><td>0.9MB</td><td><span color="white">0.3s</span></td><td><span color="white">0.1s</span></td><td>0.4s</td><td><span color="white">0.1s</span></td><td>0.7s</td><td>1.1s</td><td>1.7s</td><td>1.5s</td><td>4.1s</td><td>3.9s</td></tr> <tr> <td>WordPress</td><td>1.4MB</td><td>1.7MB</td><td><span color="white">0.2s</span></td><td><span color="white">60ms</span></td><td><span color="white">0.2s</span></td><td><span color="white">80ms</span></td><td>0.7s</td><td>0.7s</td><td>1s</td><td>1.5s</td><td>1.2s</td><td>2.5s</td></tr> <tr> <td>WordPress (old)</td><td>0.3MB</td><td>1.0MB</td><td><span color="white">80ms</span></td><td><span color="white">70ms</span></td><td><span color="white">90ms</span></td><td><span color="white">90ms</span></td><td>0.4s</td><td>0.9s</td><td>0.7s</td><td>1.7s</td><td>1.1s</td><td>1.9s</td></tr> <tr> <td>XenForo</td><td>0.3MB</td><td>1.0MB</td><td>0.4s</td><td><span color="white">0.1s</span></td><td>0.6s</td><td><span color="white">0.2s</span></td><td>1.4s</td><td>1.5s</td><td>1.5s</td><td>1.8s</td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td></tr> <tr> <td>Ghost</td><td>0.7MB</td><td>2.4MB</td><td><span color="white">0.1s</span></td><td><span color="white">0.2s</span></td><td><span color="white">0.2s</span></td><td><span color="white">0.2s</span></td><td>1.1s</td><td>2.2s</td><td>1s</td><td>2.4s</td><td>1.1s</td><td>3.5s</td></tr> <tr> <td>vBulletin</td><td>1.2MB</td><td>3.4MB</td><td>0.5s</td><td><span color="white">0.2s</span></td><td>0.6s</td><td><span color="white">0.3s</span></td><td>1.1s</td><td>2.9s</td><td>4.4s</td><td>4.8s</td><td>13s</td><td>16s</td></tr> <tr> <td>Squarespace</td><td>1.9MB</td><td>7.1MB</td><td><span color="white">0.1s</span></td><td>0.4s</td><td><span color="white">0.2s</span></td><td>0.4s</td><td>0.7s</td><td>3.6s</td><td>14s</td><td>5.1s</td><td>16s</td><td>19s</td></tr> <tr> <td>Mastodon</td><td>3.8MB</td><td>5.3MB</td><td><span color="white">0.2s</span></td><td><span color="white">0.3s</span></td><td><span color="white">0.2s</span></td><td>0.4s</td><td>1.8s</td><td>4.7s</td><td>2.0s</td><td>7.6s</td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td></tr> <tr> <td>Tumblr</td><td>3.5MB</td><td>7.1MB</td><td>0.7s</td><td>0.6s</td><td>1.1s</td><td>0.7s</td><td>1.0s</td><td>7.0s</td><td>14s</td><td>7.9s</td><td>8.7s</td><td>8.7s</td></tr> <tr> <td>Quora</td><td>0.6MB</td><td>4.9MB</td><td>0.7s</td><td>1.2s</td><td>0.8s</td><td>1.3s</td><td>2.6s</td><td>8.7s</td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td><td>19s</td><td><span color="white">29s</span></td></tr> <tr> <td>Bluesky</td><td>4.8MB</td><td>10MB</td><td>1.0s</td><td>0.4s</td><td>1.0s</td><td>0.5s</td><td>5.1s</td><td>6.0s</td><td>8.1s</td><td>8.3s</td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td></tr> <tr> <td>Wix</td><td>7.0MB</td><td>21MB</td><td>2.4s</td><td>1.1s</td><td>2.5s</td><td>1.2s</td><td>18s</td><td>11s</td><td>5.6s</td><td>10s</td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td></tr> <tr> <td>Substack</td><td>1.3MB</td><td>4.3MB</td><td>0.4s</td><td>0.5s</td><td>0.4s</td><td>0.5s</td><td>1.5s</td><td>4.9s</td><td>14s</td><td>14s</td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td></tr> <tr> <td>Threads</td><td>9.3MB</td><td>13MB</td><td>1.5s</td><td>0.5s</td><td>1.6s</td><td>0.7s</td><td>5.1s</td><td>6.1s</td><td>6.4s</td><td>16s</td><td><span color="white">28s</span></td><td><span color="white">66s</span></td></tr> <tr> <td>Twitter</td><td>4.7MB</td><td>11MB</td><td>2.6s</td><td>0.9s</td><td>2.7s</td><td>1.1s</td><td>5.6s</td><td>6.6s</td><td>12s</td><td>19s</td><td>24s</td><td><span color="white">43s</span></td></tr> <tr> <td>Shopify</td><td>3.0MB</td><td>5.5MB</td><td>0.4s</td><td><span color="white">0.2s</span></td><td>0.4s</td><td><span color="white">0.3s</span></td><td>0.7s</td><td>2.3s</td><td>10s</td><td><span color="white">26s</span></td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td></tr> <tr> <td>Discourse</td><td>2.6MB</td><td>10MB</td><td>1.1s</td><td>0.5s</td><td>1.5s</td><td>0.6s</td><td>6.5s</td><td>5.9s</td><td>15s</td><td><span color="white">26s</span></td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td></tr> <tr> <td>Patreon</td><td>4.0MB</td><td>13MB</td><td>0.6s</td><td>1.0s</td><td>1.2s</td><td>1.2s</td><td>1.2s</td><td>14s</td><td>1.7s</td><td><span color="white">31s</span></td><td>9.1s</td><td><span color="white">45s</span></td></tr> <tr> <td>Medium</td><td>1.2MB</td><td>3.3MB</td><td>1.4s</td><td>0.7s</td><td>1.4s</td><td>1s</td><td>2s</td><td>11s</td><td>2.8s</td><td><span color="white">33s</span></td><td>3.2s</td><td><span color="white">63s</span></td></tr> <tr> <td>Reddit</td><td>1.7MB</td><td>5.4MB</td><td>0.9s</td><td>0.7s</td><td>0.9s</td><td>0.9s</td><td>6.2s</td><td>12s</td><td>1.2s</td><td><span color="white">∞</span></td><td><span color="white">FAIL</span></td><td><span color="white">FAIL</span></td></tr> </tbody></table> <p>At a first glance, the table seems about in that the sites that feel slow unless you have a super fast device show up as slow in the table (as in, <code>max(LCP*,CPU))</code> is high on lower-end devices). When I polled folks about what platforms they thought would be fastest and slowest on our slow devices (<a href="https://mastodon.social/@danluu/111994437263038931">Mastodon</a>, <a href="https://twitter.com/danluu/status/1761875263359537652">Twitter</a>, <a href="https://www.threads.net/@danluu.danluu/post/C3yVpfKS-RP">Threads</a>), they generally correctly predicted that Wordpress and Ghost and Wordpress would be faster than Substack and Medium, and that Discourse would be much slower than old PHP forums like phpBB, XenForo, and vBulletin. I also pulled Google PageSpeed Insights (PSI) scores for pages (not shown) and the correlation isn't as strong with those numbers <abbr title="For the 'real world' numbers, this is also because users with slow devices can't really use some of these sites, so their devices aren't counted in the distribution and PSI doesn't normalize for this.">because</abbr> a handful of sites have managed to optimize their PSI scores without actually speeding up their pages for users.</p> <p>If you've never used a low-end device like this, the general experience is that many sites are unusable on the device and loading anything resource intensive (an app or a huge website) can cause crashes. Doing something too intense in a resource intensive app can also cause crashes. While <a href="https://www.youtube.com/watch?v=U1JMRFQWK70">reviews note</a> that <a href="https://www.youtube.com/watch?v=McawfNlydqk">you can run PUBG and other 3D games with decent performance</a> on a <code>Tecno Spark 8C</code>, this doesn't mean that the device is fast enough to read posts on modern text-centric social media platforms or modern text-centric web forums. While <code>40fps</code> is achievable in PUBG, we can easily see less than <code>0.4fps</code> when scrolling on these sites.</p> <p>We can see from the table how many of the sites are unusable if you have a slow device. All of the pages with <code>10s+ CPU</code> are a fairly bad experience even after the page loads. Scrolling is very jerky, frequently dropping to a few frames per second and sometimes well below. When we tap on any link, the delay is so long that we can't be sure if our tap actually worked. If we tap again, we can get the dreaded situation where the first tap registers and then causes the second tap to register after things have started changing, causing us to tap some random target, but if we wait, we realize that the original tap didn't actually register (or it registered, but not where we thought it did). Although MyBB doesn't service up a mobile site and is penalized by Google for not having a mobile friendly page, it's actually much more usable on these slow mobiles than all but the fastest sites because scrolling and tapping actually work.</p> <p>Another thing we can see is how much variance there is in the relative performance on different devices. For example, comparing an <code>M3/10</code> and a <code>Tecno Spark 8C</code>, for danluu.com and Ghost, an <code>M3/10</code> gives a halfway decent approximation of the <code>Tecno Spark 8C</code> (although danluu.com loads much too quickly), but the <code>Tecno Spark 8C</code> is about three times slower (<code>CPU</code>) for Medium, Substack, and Twitter, roughly four times slower for Reddit and Discourse, and over an order of magnitude faster for Shopify. For Wix, the <code>CPU</code> approximation is about accurate, but our `<code>Tecno Spark 8C</code> is more than 3 times slower on <code>LCP*</code>. It's great that Chrome lets you conveniently simulate a slower device from the convenience of your computer, but just enabling Chrome's CPU throttling (or using any combination of out-of-the-box options that are available) gives fairly different results than we get on many real devices. The full reasons for this are beyond the scope of the post; for the purposes of this post, it's sufficient to note that slow pages are often super-linearly slow as devices get slower and that slowness on one page doesn't strongly predict slowness on another page.</p> <p>If take a site-centric view instead of a device-centric view, another way to look at it is that sites like Discourse, Medium, and Reddit, don't use all that much CPU on our fast <code>M3</code> and <code>M1</code> computers, but they're among the slowest on our <code>Tecno Spark 8C</code> (Reddit's CPU is shown as <code>∞</code> because, no matter how long we wait with no interaction, Reddit uses <code>~90% CPU</code>). Discourse also sometimes crashed the browser after interacting a bit or just waiting a while. For example, one time, the browser crashed after loading Discourse, scrolling twice, and then leaving the device still for a minute or two. For consistency's sake, this wasn't marked as <code>FAIL</code> in the table since the page did load but, realistically, having a page is so resource intensive that the browser crashes is a significantly worse user experience than any of the <code>FAIL</code> cases in the table. When we looked at how <a href="https://danluu.com/web-bloat/">web bloat impacts users with slow connections</a>, we found that <abbr title="One thing to keep in mind here is that having a slow device and a slow connection have multiplicative impacts.">much of the web was unusable for people with slow connections and slow devices are no different</abbr>.</p> <p>Another pattern we can see is how the older sites are, in general, faster than the newer ones, with sites that (visually) look like they haven't been updated in a decade or two tending to be among the fastest. For example, MyBB, the least modernized and oldest looking forum is <code>3.6x / 5x faster (LCP* / CPU)</code> than Discourse on the <code>M3</code>, but on the <code>Tecno Spark 8C</code>, the difference is <code>19x / 33x</code> and, given the overall scaling, it seems safe to guess that the difference would be even larger on the Itel P32 if Discourse worked on such a cheap device.</p> <p>Another example is Wordpress (old) vs. newer, trendier, blogging platforms like Medium and Substack. Wordpress (old) is is <code>17.5x / 10x faster (LCP* / CPU)</code> than Medium and <code>5x / 7x faster (LCP* / CPU)</code> faster than Substack on our <code>M3 Max</code>, and <code>4x / 19x</code> and <code>20x / 8x</code> faster, respectively, on our <code>Tecno Spark 8C</code>. Ghost is a notable exception to this, being a modern platform (launched a year after Medium) that's competitive with older platforms (modern Wordpress is also arguably an exception, but many folks would probably still consider that to be an old platform).</p> <p>Sites that use modern techniques like partially loading the page and then dynamically loading the rest of it, such as Discourse, Reddit, and Substack, tend to be less usable than the scores in the table indicate. Although, in principle, you could build such a site in a simple way that works well with cheap devices but, in practice sites that use dynamic loading tend to be complex enough that the sites are extremely janky on low-end devices. It's generally difficult or impossible to scroll a predictable distance, which means that users will sometimes accidentally trigger more loading by scrolling too far, causing the page to lock up. Many pages actually remove the parts of the page you scrolled past as you scroll; all such pages are essentially unusable. Other basic web features, like page search, also generally stop working. Pages with this kind of dynamic loading can't rely on the simple and fast ctrl/command+F search and have to build their own search. How well this works varies (this used to work quite well in Google docs, but for the past few months or maybe a year, it takes so long to load that I have to deliberately wait after opening a doc to avoid triggering the browser's useless built in search; Discourse search has never really worked on slow devices or even not very fast but not particular slow devices).</p> <p>In principle, these modern pages that burn a ton of CPU when loading could be doing pre-work that means that later interactions on the page are faster and cheaper than on the pages that do less up-front work (this is a common argument in favor of these kinds of pages), but that's not the case for pages tested, which are slower to load initially, slower on subsequent loads, and slower after they've loaded.</p> <p>To understand why the theoretical idea that doing all this work up-front doesn't generally result in a faster experience later, this exchange between a distinguished engineer at Google and one of the founders of Discourse (and CEO at the time) is <abbr title="the founder has made similar comments elsewhere as well, so this isn't a one-off analogy for him, nor do I find it to be an unusual line of thinking in general">illustrative</abbr>, in <a href="https://danluu.com/jeff-atwood-trashes-qualcomm-engineering.png">a discussion where the founder of Discourse says that you should test mobile sites on laptops with throttled bandwidth but not throttled CPU</a>:</p> <ul> <li><b>Google</b>: *you* also don't have slow 3G. These two settings go together. Empathy needs to extend beyond iPhone XS users in a tunnel.</li> <li><b>Discourse</b>: Literally any phone of vintage iPhone 6 or greater is basically as fast as the "average" laptop. You have to understand how brutally bad Qualcomm is at their job. Look it up if you don't believe me.</li> <li><b>Google</b>: I don't need to believe you. I know. This is well known by people who care. My point was that just like not everyone has a fast connection not everyone has a fast phone. Certainly the iPhone 6 is frequently very CPU bound on real world websites. But that isn't the point.</li> <li><b>Discourse</b>: we've been trending towards infinite CPU speed for decades now (and we've been asymptotically there for ~5 years on desktop), what we are not and will never trend towards is infinite bandwidth. Optimize for the things that matter. and I have zero empathy for @qualcomm. Fuck Qualcomm, they're terrible at their jobs. I hope they go out of business and the ground their company existed on is plowed with salt so nothing can ever grow there again.</li> <li><b>Google</b>: Mobile devices are not at all bandwidth constraint in most circumstances. They are latency constraint. Even the latest iPhone is CPU constraint before it is bandwidth constraint. If you do well on 4x slow down on a MBP things are pretty alright</li> <li>...</li> <li><b>Google</b>: Are 100% of users on iOS?</li> <li><b>Discourse</b>: The influential users who spend money tend to be, I’ll tell you that ... Pointless to worry about cpu, it is effectively infinite already on iOS, and even with Qualcomm’s incompetence, will be within 4 more years on their embarrassing SoCs as well</li> </ul> <p>When someone asks the founder of Discourse, "just wondering why you hate them", he responds with a link that cites the Kraken and Octane benchmarks from <a href="https://www.anandtech.com/show/9146/the-samsung-galaxy-s6-and-s6-edge-review/5">this Anandtech review</a>, which have the Qualcomm chip at 74% and 85% of the performance of the then-current Apple chip, respectively.</p> <p>The founder and then-CEO of Discourse considers Qualcomm's mobile performance embarrassing and finds this so offensive that he thinks Qualcomm engineers should all lose their jobs for delivering <abbr title="I think it could be reasonable to cite a lower number, but I'm using the number he cited, not what I would cite">74% to 85% of the performance of Apple</abbr>. Apple has what I consider to be an all-time great performance team. Reasonable people could disagree on that, but one has to at least think of them as a world-class team. So, producing a product with <abbr title="recall that, on a Tecno Spark 8, Discourse is 33 times slower than MyBB, which isn't particularly optimized for performance">74% to 85% of an all-time-great team is considered an embarrassment worthy of losing your job</abbr>.</p> <p>There are two attitudes on display here which I see in a lot of software folks. First, that CPU speed is infinite and one shouldn't worry about CPU optimization. And second, that gigantic speedups from hardware should be expected and the only reason hardware engineers wouldn't achieve them is due to spectacular incompetence, so the slow software should be blamed on hardware engineers, not software engineers. Donald Knuth expressed a similar sentiment in</p> <blockquote> <p>I might as well flame a bit about my personal unhappiness with the current trend toward multicore architecture. To me, it looks more or less like the hardware designers have run out of ideas, and that they’re trying to pass the blame for the future demise of Moore’s Law to the software writers by giving us machines that work faster only on a few key benchmarks! I won’t be surprised at all if the whole multiithreading idea turns out to be a flop, worse than the "Itanium" approach that was supposed to be so terrific—until it turned out that the wished-for compilers were basically impossible to write. Let me put it this way: During the past 50 years, I’ve written well over a thousand programs, many of which have substantial size. I can’t think of even five of those programs that would have been enhanced noticeably by parallelism or multithreading. Surely, for example, multiple processors are no help to TeX ... I know that important applications for parallelism exist—rendering graphics, breaking codes, scanning images, simulating physical and biological processes, etc. But all these applications require dedicated code and special-purpose techniques, which will need to be changed substantially every few years. Even if I knew enough about such methods to write about them in TAOCP, my time would be largely wasted, because soon there would be little reason for anybody to read those parts ... The machine I use today has dual processors. I get to use them both only when I’m running two independent jobs at the same time; that’s nice, but it happens only a few minutes every week.</p> </blockquote> <p>In the case of Discourse, a hardware engineer is an embarrassment not deserving of a job if they can't hit 90% of the performance of an all-time-great performance team but, as a software engineer, delivering 3% the performance of a non-highly-optimized application like MyBB is no problem. In Knuth's case, hardware engineers gave programmers a 100x performance increase every decade for decades with little to no work on the part of programmers. The moment this slowed down and programmers had to adapt to take advantage of new hardware, hardware engineers were "all out of ideas", but learning a few "new" (1970s and 1980s era) ideas to take advantage of current hardware would be a waste of time. And <a href="https://www.patreon.com/posts/54329188">we've previously discussed Alan Kay's claim that hardware engineers are "unsophisticated" and "uneducated" and aren't doing "real engineering" and how we'd get a 1000x speedup if we listened to Alan Kay's "sophisticated" ideas</a>.</p> <p>It's fairly common for programmers to expect that hardware will solve all their problems, and then, when that doesn't happen, pass the issue onto the user, explaining why the programmer need't do anything to help the user. A question one might ask is how much performance improvement programmers have given us. There are cases of algorithmic improvements that result in massive speedups but, as we noted above, Discourse, the fastest growing forum software today, seems to have given us an approximately <code>1000000x</code> slowdown in performance.</p> <p>Another common attitude on display above is the idea that users who aren't wealthy don't matter. When asked if 100% of users are on iOS, the founder of Discourse says "The influential users who spend money tend to be, I’ll tell you that". We see the same attitude all over comments on <a href="https://tonsky.me/blog/js-bloat/">Tonsky's JavaScript Bloat post</a>, with people expressing <a href="https://danluu.com/cocktail-ideas/">cocktail-party sentiments</a> like "Phone apps are hundreds of megs, why are we obsessing over web apps that are a few megs? Starving children in Africa can download Android apps but not web apps? Come on and "surely no user of gitlab would be poor enough to have a slow device, let's be serious" (paraphrased for length).</p> <p>But when we look at the size of apps that are downloaded in Africa, we see that people who aren't on high-end devices use apps like Facebook Lite (a couple megs) and commonly use apps that are a single digit to low double digit number of megabytes. There are multiple reasons app makers care about their app size. One is just the total storage available on the phone; if you watch real users install apps, they often have to delete and uninstall things to put a new app on, so the smaller size is both easier to to install and has a lower chance of being uninstalled when the user is looking for more space. Another is that, if you look at data on app size and usage (I don't know of any public data on this; please pass it along if you have something public I can reference), when large apps increase the size and memory usage, they get more crashes, which drives down user retention, growth, and engagement and, conversely, when they optimize their size and memory usage, they get fewer crashes and better user retention, growth, and engagement.</p> <p>On the bit about no programmers having slow devices, I know plenty of people who are using hand-me-down devices that are old and slow. Many of them aren't even really poor; they just don't see why (for example) their kid needs a super fast device, and they don't understand how much of the modern web works poorly on slow devices. After all, the "slow" device can play 3d games and (with the right OS) compile codebases like Linux or Chromium, so why shouldn't the device be able to interact with a site like gitlab?</p> <p>Contrary to the claim from the founder of Discourse that, within years, every Android user will be on some kind of super fast Android device, it's been six years since his comment and it's going to be at least a decade before almost everyone in the world who's using a phone has a high-speed device and this could easily take two decades or more. If you look up marketshare stats for Discourse, it's extremely successful; it appears to be the fastest growing forum software in the world by a large margin. The impact of having the fastest growing forum software in the world created by an organization whose then-leader was willing to state that he doesn't really care about users who aren't "influential users who spend money", who don't have access to "infinite CPU speed", is that a lot of forums are now inaccessible to people who don't have enough wealth to buy a device with effectively infinite CPU.</p> <p>If the founder of Discourse were an anomaly, this wouldn't be too much of a problem, but he's just verbalizing the implicit assumptions a lot of programmers have, which is why we see that so many modern websites are unusable if you buy the income-adjusted equivalent of a new, current generation, iPhone in a low-income country.</p> <p><i>Thanks to Yossi Kreinen, Fabian Giesen, John O'Nolan, Joseph Scott, @acidshill, Alex Russell, Tobias Marschner, and David Turner for comments/corrections/discussion.</i></p> <h3 id="appendix-gaming-lcp">Appendix: gaming LCP</h3> <p>We noted above that we used <code>LCP*</code> and not <code>LCP</code>. This is because <code>LCP</code> basically measures when the largest change happens. When this metric was not deliberately gamed in ways that don't benefit the user, this was a great metric, but this metric has become less representative of the actual user experience as more people have gamed it. In the less blatant cases, people do small optimizations that improve <code>LCP</code> but barely improve or don't improve the actual user experience.</p> <p>In the more blatant cases, developers will deliberately flash a very large change on the page as soon as possible, generally a loading screen that has no value to the user (actually negative value because doing this increases the total amount of work done and the total time it takes to load the page) and then they carefully avoid making any change large enough that any later change would get marked as the <code>LCP</code>.</p> <p>For the same reason <a href="https://en.wikipedia.org/wiki/Volkswagen_emissions_scandal">that VW didn't publicly discuss how it was gaming its emissions numbers</a>, developers tend to shy away from discussing this kind of <code>LCP</code> optimization in public. An exception to this is Discourse, where <a href="https://meta.discourse.org/t/introducing-discourse-splash-a-visual-preloader-displayed-while-site-assets-load/232003" rel="nofollow">they publicly announced this kind of <code>LCP</code> optimization, with comments from their devs and the then-CTO (now CEO)</a>, noting that their new "Discourse Splash" feature hugely reduced <code>LCP</code> for sites after they deployed it. And then developers ask why their <code>LCP</code> is high, the standard advice from Discourse developers is to keep elements smaller than the "Discourse Splash", so that the <code>LCP</code> timestamp is computed from this useless element that's thrown up to optimize <code>LCP</code>, as opposed to having the timestamp be computed from any actual element that's relevant to the user. <a href="https://meta.discourse.org/t/theme-components-and-largest-contentful-paint-lcp/258680" rel="nofollow">Here's a typical, official, comment from Discourse</a></p> <blockquote> <p>If your banner is larger than the element we use for the "Introducing Discourse Splash - A visual preloader displayed while site assets load" you gonna have a bad time for LCP.</p> </blockquote> <p>The official response from Discourse is that you should make sure that your content doesn't trigger the <code>LCP</code> measurement and that, instead, our loading animation timestamp is what's used to compute `LCP.</p> <p>The sites with the most extreme ratio of <code>LCP</code> of useful content vs. Chrome's measured <code>LCP</code> were:</p> <ul> <li>Wix <ul> <li><code>M3</code>: <code>6</code></li> <li><code>M1</code>: <code>12</code></li> <li><code>Tecno Spark 8C</code>: <code>3</code></li> <li><code>Itel P32</code>: <code>N/A</code> <code>(FAIL)</code></li> </ul></li> <li>Discourse: <ul> <li><code>M3</code>: <code>10</code></li> <li><code>M1</code>: <code>12</code></li> <li><code>Tecno Spark 8C</code>: <code>4</code></li> <li><code>Itel P32</code>: <code>N/A</code> <code>(FAIL)</code></li> </ul></li> </ul> <p>Although we haven't discussed the gaming of other metrics, it appears that some websites also game other metrics and "optimize" them even when this has no benefit to users.</p> <h3 id="appendix-designing-for-low-performance-devices">Appendix: designing for low performance devices</h3> <p>When using slow devices or any device with low bandwidth and/or poor connectivity, the best experiences, by far, are generally the ones that load a lot of content at once into a static page. If the images have proper width and height attributes and alt text, that's very helpful. Progressive images (as in progressive jpeg) isn't particularly helpful.</p> <p>On a slow device with high bandwidth, any lightweight, static, page works well, and lightweight dynamic pages can work well if designed for performance. Heavy, dynamic, pages are doomed unless the page weight doesn't cause the page to be complex.</p> <p>With low bandwidth and/or poor connectivity, lightweight pages are fine. With heavy pages, the best experience I've had is when I trigger a page load, go do something else, and then come back when it's done (or at least the HTML and CSS are done). I can then open each link I might want to read in a new tab, and then do something else while I wait for those to load.</p> <p>A lot of the optimizations that modern websites do, such as partial loading that causes more loading when you scroll down the page, and the concomitant hijacking of search (because the browser's built in search is useless if the page isn't fully loaded) causes the interaction model that works to stop working and makes pages very painful to interact with.</p> <p>Just for example, a number of people have noted that Substack performs poorly for then because it does partial page loads. <a href="https://danluu.com/substack.mp4">Here's a video by @acidshill of what it looks like to load a Substack article and then scroll on an iPhone 8</a>, where the post has a fairly fast <code>LCP</code>, but if you want to scroll past the header, you have to wait <code>6s</code> for the next page to load, and then on scrolling again, you have to wait maybe another <code>1s</code> to <code>2s</code>:</p> <p>As an example of the opposite approach, I tried loading some fairly large plain HTML pages, such as <a href="https://danluu.com/diseconomies-scale/">https://danluu.com/diseconomies-scale/</a> (<code>0.1 MB wire</code> / <code>0.4 MB raw</code>) and <a href="https://danluu.com/threads-faq/">https://danluu.com/threads-faq/</a> (<code>0.4 MB wire</code> / <code>1.1 MB raw</code>) and these were still quite usable for me even on slow devices. <code>1.1 MB</code> seems to be larger than optimal and breaking that into a few different pages would be better on a low-end devices, but a single page with <code>1.1 MB</code> of text works much better than most modern sites on a slow device. While you can get into trouble with HTML pages that are so large that browsers can't really handle them, for pages with a normal amount of content, it generally isn't until you have <a href="https://nolanlawson.com/2023/01/17/my-talk-on-css-runtime-performance/">complex CSS payloads</a> or JS that the pages start causing problems for slow devices. Below, we test pages that are relatively simple, some of which have a fair amount of media (<code>14 MB</code> in one case) and find that these pages work ok, as long as they stay simple.</p> <h3 id="appendix-articles-on-web-performance-issues">Appendix: articles on web performance issues</h3> <ul> <li>2015: Maciej Cegłowski: <a href="https://idlewords.com/talks/website_obesity.htm">The Website Obesity Crisis</a> <ul> <li>Size: <code>1.0 MB</code> / <code>1.1 MB</code></li> <li><code>Tecno Spark 8C</code>: <code>0.9s</code> / <code>1.4s</code> <ul> <li>Scrolling a bit jerky, images take a little bit of time to appear if scrolling very quickly (jumping halfway down page from top), but delay is below what almost any user would perceive when scrolling a normal distance.</li> </ul></li> </ul></li> <li>2015: Nate Berkopec: <a href="https://www.speedshop.co/2015/11/05/page-weight-doesnt-matter.html">Page Weight Doesn't Matter</a> <ul> <li>Size: <code>80 kB</code> / <code>0.2 MB</code></li> <li><code>Tecno Spark 8C</code>: <code>0.8s</code> / <code>0.7s</code> <ul> <li>Does lazy loading, page downloads <code>650 kB</code> / <code>1.8 MB</code> if you scroll through the entire page, but scrolling is only a little jerk and the lazy loading doesn't cause delays. Probably the only page I've tried that does lazy loading in a way that makes the experience better and not worse on a slow device; I didn't test on a slow connection, where this would still make the experience worse.</li> </ul></li> <li><code>Itel P32</code>: <code>1.1s</code> / <code>1s</code> <ul> <li>Scrolling basically unusable; scroll extremely jerky and moves a random distance, often takes over <code>1s</code> for text to render when scrolling to new text; can be much worse with images that are lazy loaded. Even though this is the implementation of lazy loading I've seen in the wild, the <code>Itel P32</code> still can't handle it.</li> </ul></li> </ul></li> <li>2017: Dan Luu: <a href="https://danluu.com/web-bloat/">How web bloat impacts users with slow connections</a> <ul> <li>Size: <code>14 kB</code> / <code>57 kB</code></li> <li><code>Tecno Spark 8C</code>: <code>0.5s</code> / <code>0.3s</code> <ul> <li>Scrolling and interaction work fine.</li> </ul></li> <li><code>Itel P32</code>:<code>0.7s</code> / <code>0.5 s</code></li> </ul></li> <li>2017-2024+: Alex Russell: <a href="https://infrequently.org/series/performance-inequality/">The Performance Inequality Gap (series)</a> <ul> <li>Size: <code>82 kB</code> / <code>0.1 MB</code></li> <li><code>Tecno Spark 8C</code>: <code>0.5s</code> / <code>0.4s</code> <ul> <li>Scrolling and interaction work fine.</li> </ul></li> <li><code>Itel P32</code>: <code>0.7s</code> / <code>0.4s</code> <ul> <li>Scrolling and interaction work fine.</li> </ul></li> </ul></li> <li>2024: Nikita Prokopov (Tonsky): <a href="https://tonsky.me/blog/js-bloat/">JavaScript Bloat in 2024</a> <ul> <li>Size: <code>14 MB</code> / <code>14 MB</code></li> <li><code>Tecno Spark 8C</code>: <code>0.8s</code> / <code>1.9s</code> <ul> <li>When scrolling, it takes a while for images to show up (500ms or so) and the scrolling isn't smooth, but it's not jerky enough that it's difficult to scroll to the right place.</li> </ul></li> <li><code>Itel P32</code>: <code>2.5s</code> / <code>3s</code> <ul> <li>Scrolling isn't smooth. Scrolling accurately is a bit difficult, but can generally scroll to where you want if very careful. Generally takes a bit more than <code>1s</code> for new content to appear when you scroll a significant distance.</li> </ul></li> </ul></li> <li>2024: Dan Luu: <a href="https://danluu.com/slow-device/">This post</a> <ul> <li>Size: <code>25 kB</code> / <code>74 kB</code></li> <li><code>Tecno Spark 8C</code>: <code>0.6s</code> / <code>0.5s</code> <ul> <li>Scrolling and interaction work fine.</li> </ul></li> <li><code>Itel P32</code>: <code>1.3s</code> / <code>1.1s</code> <ul> <li>Scrolling and interaction work fine, although I had to make a change for this to be the case —&nbsp;this doc originally had an embedded video, which the <code>Itel P32</code> couldn't really handle. <ul> <li>Note that, while these numbers are worse than the numbers for "Page Weight Doesn't Matter", this page is usable after load, which that other page isn't beacuse it execute some kind of lazy loading that's too complex for this phone to handle in a reasonable timeframe.</li> </ul></li> </ul></li> </ul></li> </ul> <p>Just as an aside, something I've found funny for a long time is that I get quite a bit of hate mail about the styling on this page (and a similar volume of appreciation mail). By hate mail, I don't mean polite suggestions to change things, I mean the equivalent of road rage, but for web browsing; web rage. I know people who run sites that are complex enough that they're unusable by a significant fraction of people in the world. How come people are so incensed about the styling of this site and, proportionally, basically don't care at all that the web is unusable for so many people?</p> <p>Another funny thing here is that the people who appreciate the styling generally appreciate that the site doesn't override any kind of default styling, letting you make the width exactly what you want (by setting your window size how you want it) and it also doesn't override any kind of default styling you apply to sites. The people who are really insistent about this want everyone to have some width limit they prefer, some font they prefer, etc., but it's always framed in a way as if they don't want it, it's really for the benefit of people at large even though accommodating the preferences of the web ragers would directly oppose the preferences of people who prefer (just for example) to be able to adjust the text width by adjusting their window width.</p> <p>Until I pointed this out tens of times, this iteration would usually start with web ragers telling me that "studies show" that narrower text width is objectively better, but on reading every study that exists on the topic that I could find, I didn't find this to be the case. Moreover, on asking for citations, it's clear that people saying this generally hadn't read any studies on this at all and would sometimes hastily send me a study that they did not seem to have read. When I'd point this out, people would then change their argument to how studies can't really describe the issue (odd that they'd cite studies in the first place), although one person cited a book to me (which I read and they, apparently, had not since it also didn't support their argument) and then move to how this is what everyone wants, even though that's clearly not the case, both from the comments I've gotten as well as the data I have from when I made the change.</p> <p>Web ragers who have this line of reasoning generally can't seem to absorb the information that their preferences are not universal and will insist that they regardless of what people say they like, which I find fairly interesting. On the data, when I switched from Octopress styling (at the time, the most popular styling for programming bloggers) to the current styling, I got what appeared to be a causal an increase in traffic and engagement, so it appears that not only do people who write me appreciation mail about the styling like the styling, the overall feeling of people who don't write to me appears to be that the site is fine and apparently more appealing than standard programmer blog styling. When I've noted this, people either become further invested in the idea that their preferences are universal and people who think they have other preferences are wrong and reply with total nonsense.</p> <p>I would understand this kind of anger about how much the web has been made unusable for people who aren't, by global standards, fairly well off, but it's curious that so many people find a site that is accessible but accedes to other people's preferences to be a topic worth sending so many angry rants about, as well as one where it's worth fabricating "objective" evidence for their opinion.</p> <h3 id="appendix-empathy-for-non-rich-users">Appendix: empathy for non-rich users</h3> <p>Something I've observed over time, as programming has become more prestigious and more lucrative, is <a href="https://mastodon.social/@danluu/109901711437753852">that people have tended to come from wealthier backgrounds</a> and have less exposure to people with different income levels. An example we've discussed before, is at a well-known, prestigious, startup that has a very left-leaning employee base, where everyone got rich, on a discussion about the covid stimulus checks, in a slack discussion, a well meaning progressive employee said that it was pointless because people would just use their stimulus checks to buy stock. This person had, apparently, never talked to any middle-class (let alone poor) person about where their money goes or looked at the data on who owns equity. And that's just looking at American wealth. When we look at world-wide wealth, the general level of understanding is much lower. People seem to really underestimate the dynamic range in wealth and income across the world. From having talked to quite a few people about this, a lot of people seem to have mental buckets for "poor by American standards" (buys stock with stimulus checks) and "poor by worldwide standards" (maybe doesn't even buy stock), but the range of poverty in the world dwarfs the range of poverty in America to an extent that not many wealthy programmers seem to realize.</p> <p>Just for example, <a href="https://mastodon.social/@danluu/109537302116865694">in this discussion how lucky I was (in terms of financial opportunities) that my parents made it to America</a>, someone mentioned that it's not that big a deal because they had great financial opportunities in Poland. For one thing, with respect to the topic of the discussion, the probability that someone will end up with a high-paying programming job (senior staff eng at a high-paying tech company) or equivalent, I suspect that, when I was born, being born poor in the U.S. gives you better odds than being fairly well off in Poland, but I could believe the other case as well if presented with data. But if we're comparing Poland v. U.S. to Vietnam v. U.S., if I spend <abbr title="so, these probably aren't the optimal numbers one would use for a comparison, but I think they're good enough for this purpose">15 seconds looking up rough wealth numbers for these countries</abbr> in the year I was born, the GDP/capita ratio of U.S. : Poland was ~8:1, whereas it was ~50 : 1 for Poland : Vietnam. The difference in wealth between Poland and Vietnam was roughly the square of the difference between the U.S. and Poland, so Poland to Vietnam is roughly equivalent to Poland vs. some hypothetical country that's richer than the U.S. by the amount that the U.S. is richer than Poland. These aren't even remotely comparable, but a lot of people seem to have this mental model that there's "rich countries" and "not rich countries" and "not rich countries" are all roughly in the same bucket. GDP/capita isn't ideal, but it's easier to find than percentile income statistics; the quick search I did also turned up that annual income in Vietnam them was something like $200-$300 a year. Vietnam was also going through the tail end of a famine whose impacts are a bit difficult to determine because statistics here seem to be gamed, but if you believe the mortality rate statistics, the famine caused total overall mortality rate to jump to double the normal baseline<sup id="fnref:L"><a rel="footnote" href="#fn:L">1</a></sup>.</p> <p>Of course, at the time, the median person in a low-income country wouldn't have had a computer, let alone internet access. But, today it's fairly common for people in low-income countries to have devices. Many people either don't seem to realize this or don't understand what sorts of devices a lot of these folks use.</p>  <p>On the Discourse founder's comments on iOS vs. Android marketshare, Fabian notes</p> <blockquote> <p>In the US, according to the most recent data I could find (for 2023), iPhones have around 60% marketshare. In the EU, it's around 33%. This has knock-on effects. Not only do iOS users skew towards the wealthier end, they also skew towards the US.</p> <p>There's some secondary effects from this too. For example, in the US, iMessage is very popular for group chats etc. and infamous for interoperating very poorly with Android devices in a way that makes the experience for Android users very annoying (almost certainly intentionally so).</p> <p>In the EU, not least because Android is so much more prominent, iMessage is way less popular and anecdotally, even iPhone users among my acquaintances who would probably use iMessage in the US tend to use WhatsApp instead.</p> <p>Point being, globally speaking, recent iOS + fast Internet is even more skewed towards a particular demographic than many app devs in the US seem to be aware.</p> </blockquote> <p>And on the comment about mobile app vs. web app sizes, Fabian said:</p> <blockquote> <p>One more note from experience: apps you install when you install them, and generally have some opportunity to hold off on updates while you're on a slow or metered connection (or just don't have data at all).</p> <p>Back when I originally got my US phone, I had no US credit history and thus had to use prepaid plans. I still do because it's fine for what I actually use my phone for most of the time, but it does mean that when I travel to Germany once a year, I don't get data roaming at all. (Also, phone calls in Germany cost me $1.50 apiece, even though T-Mobile is the biggest mobile provider in Germany - though, of course, not T-Mobile US.)</p> <p>Point being, I do get access to free and fast Wi-Fi at T-Mobile hotspots (e.g. major train stations, airports etc.) and on inter-city trains that have them, but I effectively don't have any data plan when in Germany at all.</p> <p>This is completely fine with mobile phone apps that work offline and sync their data when they have a connection. But web apps are unusable while I'm not near a public Wi-Fi.</p> <p>Likewise I'm fine sending an email over a slow metered connection via the Gmail app, but I for sure wouldn't use any web-mail client that needs to download a few MBs worth of zipped JS to do anything on a metered connection.</p> <p>At least with native app downloads, I can prepare in advance and download them while I'm somewhere with good internet!</p> </blockquote> <p>Another comment from Fabian (this time paraphrased since this was from a conversation), is that people will often justify being quantitatively hugely slower because there's a qualitative reason something should be slow. One example he gave was that screens often take a long time to sync their connection and this is justified because there are operations that have to be done that take time. For a long time, these operations would often take seconds. Recently, a lot of displays sync much more quickly because Nvidia specifies how long this can take for something to be "G-Sync" certified, so display makers actually do this in a reasonable amount of time now. While it's true that there are operations that have to be done that take time, there's no fundamental reason they should take as much time as they often used to. Another example he gave was on how someone was justifying how long it took to read thousands of files because the operation required a lot of syscalls and "syscalls are slow", which is a qualitatively true statement, but if you look at the actual cost of a syscall, in the case under discussion, the cost of a syscall was many orders of magnitude from being costly enough to be a reasonable explanation for why it took so long to read thousands of files.</p> <p>On this topic, when people point out that a modern website is slow, someone will generally respond with the qualitative defense that the modern website has these great features, which the older website is lacking. And while it's true that (for example) Discourse has features that MyBB doesn't, it's hard to argue that its feature set justifies being <code>33x</code> slower.</p> <h3 id="appendix-experimental-details">Appendix: experimental details</h3> <p>With the exception of danluu.com and, arguably, HN, for each site, I tried to find the "most default" experience. For example, for WordPress, this meant a demo blog with the current default theme, twentytwentyfour. In some cases, this may not be the most likely thing someone uses today, e.g., for Shopify, I looked at the first thing that theme they give you when you browse their themes, but I didn't attempt to find theme data to see what the most commonly used theme is. For this post, I wanted to do all of the data collection and analysis as a short project, something that takes less than a day, so there were a number of shortcuts like this, which will be described below. I don't think it's wrong to use the first-presented Shopify theme in a decent fraction of users will probably use the first-presente theme, but that is, of course, less representative than grabbing whatever the most common theme is and then also testing many different sites that use that theme to see how real-world performance varies when people modify the theme for their own use. If I worked for Shopify or wanted to do competitive analysis on behalf of a competitor, I would do that, but for a one-day project on how large websites impact users on low-end devices, the performance of Shopify demonstrated here seems ok.</p> <p>For the tests on laptops, I tried to have the laptop at ~60% battery, not plugged in, and the laptop was idle for enough time to return to thermal equilibrium in a room at 20°C, so pages shouldn't be impacted by prior page loads or other prior work that was happening on the machine.</p> <p>For the mobile tests, the phones were at ~100% charge and plugged in, and also previously at 100% charge so the phones didn't have any heating effect you can get from rapidly charging. As noted above, these tests were formed with <code>1Gbps</code> WiFi. No other apps were running, the browser had no other tabs open, and the only apps that were installed on the device, so no additional background tasks should've been running other than whatever users are normally subject to by the device by default. A real user with the same device is going to see worse performance than we measured here in almost every circumstance.</p> <p>Sizes were all measured on mobile, so in cases where different assets are loaded on mobile vs. desktop, the we measured the mobile asset sizes. <code>CPU</code> was measured as CPU time on the main thread (I did also record time on other threads for sites that used other threads, but didn't use this number; if <code>CPU</code> were a metric people wanted to game, time on other threads would have to be accounted for to prevent sites from trying to offload as much work as possible to other threads, but this isn't currently an issue and time on main thread is more directly correlated to usability than sum of time across all threads, and the metric that would work for gaming is less legible with no upside for now).</p> <p>For WiFi speeds, speed tests had the following numbers:</p> <ul> <li><code>M3 Max</code> <ul> <li>Netflix (fast.com) <ul> <li>Download: <code>850 Mbps</code></li> <li>Upload: <code>840 Mbps</code></li> <li>Latency (unloaded / loaded): <code>3ms</code> / <code>8ms</code></li> </ul></li> <li>Okta <ul> <li>Download: <code>900 Mbps</code></li> <li>Upload: <code>840 Mbps</code></li> <li>Latency (unloaded / download / upload): <code>3ms</code> / <code>8ms</code> / <code>13ms</code></li> </ul></li> </ul></li> <li><code>Tecno Spark 8C</code> <ul> <li>Netflix (fast.com) <ul> <li>Download: <code>390 Mbps</code></li> <li>Upload: <code>210 Mbps</code></li> <li>Latency (unloaded / loaded): <code>2ms</code> / <code>30ms</code></li> </ul></li> <li>Okta <ul> <li>Okta web app fails, can't see results</li> </ul></li> </ul></li> <li><code>Itel P32</code> <ul> <li>Netflix <ul> <li>Download: <code>44 Mbps</code></li> <li>Upload: test fails to work (sends one chunk of data and then hangs, sending no more data)</li> <li>Latency (unloaded / loaded): <code>4ms</code> / <code>400ms</code></li> </ul></li> <li>Okta <ul> <li>Download: <code>45 Mbps</code></li> <li>Upload: test fails to work</li> <li>Latency: test fails to display latency</li> </ul></li> </ul></li> </ul> <p>One thing to note is that the <code>Itel P32</code> doesn't really have the ability to use the bandwidth that it nominally has. Looking at the top Google reviews, none of them mention this. <a href="https://www.nairaland.com/4628841/itel-p32-review-great-those" rel="nofollow">The first review reads</a></p> <blockquote> <p>Performance-wise, the phone doesn’t lag. It is powered by the latest Android 8.1 (GO Edition) ... we have 8GB+1GB ROM and RAM, to run on a power horse of 1.3GHz quad-core processor for easy multi-tasking ... I’m impressed with the features on the P32, especially because of the price. I would recommend it for those who are always on the move. And for those who take battery life in smartphones has their number one priority, then P32 is your best bet.</p> </blockquote> <p><a href="https://techjaja.com/itel-p32-review-dual-camera-smartphone-alarming-price-tag/" rel="nofollow">The second review reads</a></p> <blockquote> <p>Itel mobile is one of the leading Africa distributors ranking 3rd on a continental scale ... the light operating system acted up to our expectations with no sluggish performance on a 1GB RAM device ... fairly fast processing speeds ... the Itel P32 smartphone delivers the best performance beyond its capabilities ... at a whooping UGX 330,000 price tag, the Itel P32 is one of those amazing low-range like smartphones that deserve a mid-range flag for amazing features embedded in a single package.</p> </blockquote> <p><a href="https://pctechmag.com/2018/08/itel-p32-full-review-much-more-than-just-a-budget-entry-level-smartphone/" rel="nofollow">The third review reads</a></p> <blockquote> <p>"Much More Than Just a Budget Entry-Level Smartphone ... Our full review after 2 weeks of usage ... While switching between apps, and browsing through heavy web pages, the performance was optimal. There were few lags when multiple apps were running in the background, while playing games. However, the overall performance is average for maximum phone users, and is best for average users [screenshot of game] Even though the game was skipping some frames, and automatically dropped graphical details it was much faster if no other app was running on the phone.</p> </blockquote> <p>Notes on sites:</p> <ul> <li>Wix <ul> <li>www.wix.com/website-template/view/html/3173?originUrl=https%3A%2F%2Fwww.wix.com%2Fwebsite%2Ftemplates%2Fhtml%2Fmost-popular&amp;tpClick=view_button&amp;esi=a30e7086-28db-4e2e-ba22-9d1ecfbb1250: this was the first entry when I clicked to get a theme</li> <li><code>LCP</code> was misleading on every device</li> <li>On the <code>Tecno Spark 8C</code>, scrolling never really works. It's very jerky and this never settles down</li> <li>On the <code>Itel P32</code>, the page fails non-deterministically (different errors on different loads); it can take quite a while to error out; it was <code>23s</code> on the first run, with the CPU pegged for <code>28s</code></li> </ul></li> <li>Patreon <ul> <li>www.patreon.com/danluu: used my profile where possible</li> <li>Scrolling on Patreon and finding old posts is so painful that I maintain <a href="https://danluu.com/#pt">my own index of my Patreon posts</a> so that I can find my old posts without having to use Patreon.</li> </ul></li> <li>Threads <ul> <li>threads.net/danluu.danluu: used my profile where possible</li> <li>On the <code>Itel P32</code>, this technically doesn't load correctly and could be marked as <code>FAIL</code>, but it's close enough that I counted it. The thing that's incorrect is that profile photos have a square box around then <ul> <li>However, as with the other heavy pages, interacting with the page doesn't really work and the page is unusable, but this appears to be for the standard performance reasons and not because the page failed to render</li> </ul></li> </ul></li> <li>Twitter <ul> <li>twitter.com/danluu: used my profile where possible</li> </ul></li> <li>Discourse <ul> <li>meta.discourse.org: this is what turned up when I searched for an official forum.</li> <li>As discussed above, the <code>LCP</code> is highly gamed and basically meaningless. We linked to a post where the Discourse folks note that, on slow loads, they put a giant splash screen up at <code>2s</code> to cap the <code>LCP</code> at <code>2s</code>. Also notable is that, on loads that are faster than the 2s, the <code>LCP</code> is also highly gamed. For example, on the <code>M3 Max</code> with low-latency <code>1Gbps</code> internet, the <code>LCP</code> was reported as <code>115ms</code>, but the page loads actual content at <code>1.1s</code>. This appears to use the same fundamental trick as "Discourse Splash", in that it paints a huge change onto the screen and then carefully loads smaller elements to avoid having the actual page content detected as the <code>LCP</code>.</li> <li>On the <code>Tecno Spark 8C</code>, scrolling is unpredictable and can jump too far, triggering loading from infinite scroll, which hangs the page for <code>3s-10s</code>. Also, the entire browser sometimes crashes if you just let the browser sit on this page for a while.</li> <li>On the <code>Itel P32</code>, an error message is displayed after <code>7.5s</code></li> </ul></li> <li>Bluesky <ul> <li>bsky.app/profile/danluu.com</li> <li>Displays a blank screen on the <code>Itel P32</code></li> </ul></li> <li>Squarespace <ul> <li>cedar-fluid-demo.squarespace.com: this was the second theme that showed up when I clicked themes to get a theme; the first was one called "Bogart", but that was basically a "coming soon" single page screen with no content, so I used the second theme instead of the first one.</li> <li>A lot of errors and warnings in the console with the <code>Itel P32</code>, but the page appears to load and work, although interacting with it is fairly slow and painful</li> <li><code>LCP</code> on the <code>Tecno Spark 8C</code> was significantly before the page content actually loaded</li> </ul></li> <li>Tumblr <ul> <li>www.tumblr.com/slatestarscratchpad: used this because I know this tubmlr exists. I don't read a lot of tumblers (maybe three or four), and this one seemed like the closest thing to my blog that I know of on tumblr.</li> <li>This page fails on the <code>Itel P32</code>, but doesn't <code>FAIL</code>. The console shows that the JavaScript errors out, but the page still works fine (I tried scrolling, clicking links, etc., and these all worked), so you can actually go to the post you want and read it. The JS error appears to have made this page load much more quickly than it other would have and also made interacting with the page after it loaded fairly zippy.</li> </ul></li> <li>Shopify <ul> <li>themes.shopify.com/themes/motion/styles/classic/preview?surface_detail=listing&amp;surface_inter_position=1&amp;surface_intra_position=1&amp;surface_type=all: this was the first theme that showed up when I looked for themes</li> <li>On the first <code>M3/10</code> run, Chrome dev tools reported a nonsensical <code>697s</code> of CPU time (the run completed in a normal amount of time, well under <code>697s</code> or even <code>697/10s</code>. This run was ignored when computing results.</li> <li>On the <code>Itel P32</code>, the page load never completes and it just shows a flashing cursor-like image, which is deliberately loaded by the theme. On devices that load properly, the flashing cursor image is immediately covered up by another image, but that never happens here.</li> <li>I wondered if it wasn't fair to use this example theme because there's some stuff on the page that lets you switch theme styles, so I checked out actual uses of the theme (the page that advertises the theme lists users of the theme). I tried the first two listed real examples and they were both much slower than this demo page.</li> </ul></li> <li>Reddit <ul> <li>reddit.com</li> <li>Has an unusually low <code>LCP*</code> compared to how long it takes for the page to become usable. Although not measured in this test, I generally find the page slow and sort of unusable on Intel Macbooks which are, by historical standards, extremely fast computers (unless I use old.reddit.com)</li> </ul></li> <li>Mastodon <ul> <li>mastodon.social/@danluu: used my profile where possible</li> <li>Fails to load on <code>Itel P32</code>, just gives you a blank screen. Due to how long things generally take on the <code>Itel P32</code>, it's not obvious for a while if the page is failing or if it's just slow</li> </ul></li> <li>Quora <ul> <li>www.quora.com/Ever-felt-like-giving-up-on-your-dreams-How-did-you-come-out-of-it: I tried googling for quora + the username of a metafilter user who I've heard is now prolific on Quora. Rather than giving their profile page, Google returned this page, which appears to have nothing to do with the user I searched for. So, this isn't comparable to the social media profiles, but getting a random irrelevant Quora result from Google is how I tend to interact with Quora, so I guess this is representative of my Quora usage.</li> <li>On the <code>Itel P32</code>, the page stops executing scripts at some point and doesn't fully load. This causes it to fail to display properly. Interacting with the page doesn't really work either.</li> </ul></li> <li>Substack <ul> <li>Used thezvi.substack.com because I know Zvi has a substack and writes about similar topics.</li> </ul></li> <li>vBulletin: <ul> <li>forum.vbulletin.com: this is what turned up when I searched for an official forum.</li> </ul></li> <li>Medium <ul> <li>medium.com/swlh: I don't read anything on Medium, so I googled for programming blogs on Medium and this was the top hit. From looking at the theme, it doesn't appear to be unusually heavy or particularly customized for a Medium blog. Since it appears to be widely read and popular, it's more likely to be served from a CDN and than some of the other blogs here.</li> <li>On a run that wasn't a benchmark reference run, on the <code>Itel P32</code>, I tried scrolling starting 35s after loading the page. The delay to scroll was <code>5s-8s</code> and scrolling moved an unpredictable amount, making the page completely unusable. This wasn't marked as a <code>FAIL</code> in the table, but one could argue that this should be a <code>FAIL</code> since the page is unusable.</li> </ul></li> <li>Ghost <ul> <li>source.ghost.io because this is the current default Ghost theme and it was the first example I found</li> </ul></li> <li>Wordpress <ul> <li>2024.wordpress.net because this is the current default wordpress theme and this was the first example of it I found</li> </ul></li> <li>XenForo <ul> <li>xenforo.com/community/: this is what turned up when I searched for an official forum</li> <li>On the <code>Itel P32</code>, the layout is badly wrong and page content overlaps itself. There's no reasonable way to interact with the element you want because of this, and reading the text requires reading text that's been overprinted multiple times.</li> </ul></li> <li>Wordpress (old) <ul> <li>Used thezvi.wordpress.com because it has the same content as Zvi's substack, and happens to be on some old wordpress theme that used to be a very common choice</li> </ul></li> <li>phpBB <ul> <li>www.phpbb.com/community/index.php: this is what turned up when I searched for an official forum.</li> </ul></li> <li>MyBB <ul> <li>community.mybb.com: this is what turned up when I searched for an official forum.</li> <li>Site doesn't serve up a mobile version. In general, I find the desktop version of sites to be significantly better than the mobile version when on a slow device, so this works quite well, although they're likely penalized by Google for this.</li> </ul></li> <li>HN <ul> <li>news.ycombinator.com</li> <li>In principle, HN should be the slowest social media site or link aggregator because it's written in a custom Lisp that isn't highly optimized and the code was originally written with brevity and cleverness in mind, which generally gives you fairly poor performance. However, that's only poor relative to what you'd get if you were writing high-performance code, which is not a relevant point of comparison here.</li> </ul></li> <li>danluu.com <ul> <li>Self explanatory</li> <li>This currently uses a bit less CPU than HN, but I expect this to eventually use more CPU as the main page keeps growing. At the moment, this page has 176 links to 168 articles vs. HN's 199 links to 30 articles but, barring an untimely demise, this page should eventually have more links than HN. <ul> <li>As noted above, I find that pagination for such small pages makes the browsing experience much worse on slow devices or with bad connections, so I don't want to "optimize" this by paginating it or, even worse, doing some kind of dynamic content loading on scroll.</li> </ul></li> </ul></li> <li>Woo Commerce <ul> <li>I originally measured Woo Commerce as well but, unlike the pages and platforms tested above, I didn't find that being fast or slow on the initial load was necessarily representative of subsequent performance of other action, so this wasn't included in the table because having this in the table is sort of asking for a comparison against Shopify. In particular, while the "most default" Woo theme I could find was significantly faster than the "most default" Shopify theme on initial load on a slow device, performance was multidimensional enough that it was easy to find realistic scenarios where Shopify was faster than Woo and vice versa on a slow device, which is quite different from what I saw with newer blogging platforms like Substack and Medium compared to older platforms like Wordpress, or a modern forum like Discourse versus the older PHP-based forums. A real comparison of shopping sites that have carts, checkout flows, etc., would require a better understanding of real-world usage of these sites than I was going to get in a single day.</li> </ul></li> </ul> <p>Another kind of testing would be to try to configure pages to look as similar as possible. I'd be interested in seeing that results for that if anyone does it, and maybe I'll try doing that on another day if no one else does it.</p>  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[IBM 360 in UK need a home (114 pts)]]></title>
            <link>https://www.ibm360.co.uk/</link>
            <guid>39728994</guid>
            <pubDate>Sat, 16 Mar 2024 20:00:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.ibm360.co.uk/">https://www.ibm360.co.uk/</a>, See on <a href="https://news.ycombinator.com/item?id=39728994">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="primary"><main id="main" role="main">
    
<article id="post-911">
			<p><a href="https://www.ibm360.co.uk/?p=911"><img width="8870" height="3908" src="https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0591.jpg" alt="" decoding="async" fetchpriority="high" srcset="https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0591.jpg 8870w, https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0591-300x132.jpg 300w, https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0591-768x338.jpg 768w, https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0591-1024x451.jpg 1024w" sizes="(max-width: 8870px) 100vw, 8870px"></a>
       </p>
       	<div>
			<p>Hello! If you’re still here reading this blog, I’m impressed. We haven’t posted anything of note for some years now and frankly, thats because we haven’t done anything of note with the project. The machines have been sitting in their home, virtually untouched, for 4 years now. Chris &amp; I (Adam) are just too busy with our respective professional and personal lives to give them a second look, and we’ve come to the difficult decision that it’s time to look at letting the systems go. When we originally moved the systems to Creslow, part of our agreement was to provide PR visibility for the services offered by ecom. Whilst this initially obviously garnered some visibility, our lack of progress with the project has obviously had…</p>
<p><a href="https://www.ibm360.co.uk/?p=911">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-902">
			<p><a href="https://www.ibm360.co.uk/?p=902"><img width="2560" height="910" src="https://www.ibm360.co.uk/wp-content/uploads/2022/05/IMG_3653-scaled.jpeg" alt="" decoding="async" srcset="https://www.ibm360.co.uk/wp-content/uploads/2022/05/IMG_3653-scaled.jpeg 2560w, https://www.ibm360.co.uk/wp-content/uploads/2022/05/IMG_3653-300x107.jpeg 300w, https://www.ibm360.co.uk/wp-content/uploads/2022/05/IMG_3653-1024x364.jpeg 1024w, https://www.ibm360.co.uk/wp-content/uploads/2022/05/IMG_3653-768x273.jpeg 768w, https://www.ibm360.co.uk/wp-content/uploads/2022/05/IMG_3653-1536x546.jpeg 1536w, https://www.ibm360.co.uk/wp-content/uploads/2022/05/IMG_3653-2048x728.jpeg 2048w" sizes="(max-width: 2560px) 100vw, 2560px"></a>
       </p>
       	<div>
			<p>Dear Reader, Wow, it’s been a while since our last post here, almost 2 years! Time has totally flown by. I checked the traffic this morning and was pleasantly surprised to see that we’re still getting 2,000+ hits per month which is just incredible given that we haven’t published any updates. So, I’m guessing you probably want to know whats going on and why we’re not posting here. Let me summarily answer your most important questions below: Are all of you okay? – Yes. Is the project dead? – No. Do you have any updates for us? – Unfortunately, not really. So, the reason we haven’t been posting here is mainly because, well, nothing has changed. Chris &amp; I have both been insanely busy with…</p>
<p><a href="https://www.ibm360.co.uk/?p=902">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-891">
			<p><a href="https://www.ibm360.co.uk/?p=891"><img width="1200" height="675" src="https://www.ibm360.co.uk/wp-content/uploads/2020/05/Silicon-Glen-TX-1.jpeg" alt="" decoding="async" srcset="https://www.ibm360.co.uk/wp-content/uploads/2020/05/Silicon-Glen-TX-1.jpeg 1200w, https://www.ibm360.co.uk/wp-content/uploads/2020/05/Silicon-Glen-TX-1-300x169.jpeg 300w, https://www.ibm360.co.uk/wp-content/uploads/2020/05/Silicon-Glen-TX-1-1024x576.jpeg 1024w, https://www.ibm360.co.uk/wp-content/uploads/2020/05/Silicon-Glen-TX-1-768x432.jpeg 768w" sizes="(max-width: 1200px) 100vw, 1200px"></a>
       </p>
       	<div>
			<p>Well, what can I say. It seems as though the last update was a lifetime ago. The world has changed so much! As you might imagine we have been unable to complete any work on the IBM 360 over the last couple of months due to the lockdown restrictions in place in the UK. We are hopeful that in the coming months as the lockdown eases we will be able to return to the project and start posting regular updates again. We have received a few items off of the Amazon wishlist, and I will post the proper thanks in due course, I am currently unable to do so as they get delivered to my fathers house and due to the self isolation policies I…</p>
<p><a href="https://www.ibm360.co.uk/?p=891">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-813">
			<p><a href="https://www.ibm360.co.uk/?p=813"><img width="2560" height="1920" src="https://www.ibm360.co.uk/wp-content/uploads/2020/03/IMG_20200301_165051-scaled.jpg" alt="" decoding="async" loading="lazy" srcset="https://www.ibm360.co.uk/wp-content/uploads/2020/03/IMG_20200301_165051-scaled.jpg 2560w, https://www.ibm360.co.uk/wp-content/uploads/2020/03/IMG_20200301_165051-300x225.jpg 300w, https://www.ibm360.co.uk/wp-content/uploads/2020/03/IMG_20200301_165051-1024x768.jpg 1024w, https://www.ibm360.co.uk/wp-content/uploads/2020/03/IMG_20200301_165051-768x576.jpg 768w, https://www.ibm360.co.uk/wp-content/uploads/2020/03/IMG_20200301_165051-1536x1152.jpg 1536w, https://www.ibm360.co.uk/wp-content/uploads/2020/03/IMG_20200301_165051-2048x1536.jpg 2048w" sizes="(max-width: 2560px) 100vw, 2560px"></a>
       </p>
       	<div>
			<p>We know we’re a few months late, but we want to wish all of our readers a happy new year! And to kick off the new year (even if we are a bit late) heres our first post of 2020! We’ve all been rather busy in our personal and professional lives of late, and as such the updates haven’t been as regular as we would have liked. We’re hoping to get quite a few days of work in this year, and we promise we’ll update you all as much as possible! We all agreed to meet on Sunday the 1st of March to resume work on the machine. We didn’t really have any set goals for the day, except to continue cleaning the machine, and…</p>
<p><a href="https://www.ibm360.co.uk/?p=813">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-754">
			<p><a href="https://www.ibm360.co.uk/?p=754"><img width="2560" height="1920" src="https://www.ibm360.co.uk/wp-content/uploads/2019/12/PeterCleaning-scaled.jpg" alt="" decoding="async" loading="lazy" srcset="https://www.ibm360.co.uk/wp-content/uploads/2019/12/PeterCleaning-scaled.jpg 2560w, https://www.ibm360.co.uk/wp-content/uploads/2019/12/PeterCleaning-300x225.jpg 300w, https://www.ibm360.co.uk/wp-content/uploads/2019/12/PeterCleaning-1024x768.jpg 1024w, https://www.ibm360.co.uk/wp-content/uploads/2019/12/PeterCleaning-768x576.jpg 768w, https://www.ibm360.co.uk/wp-content/uploads/2019/12/PeterCleaning-1536x1152.jpg 1536w, https://www.ibm360.co.uk/wp-content/uploads/2019/12/PeterCleaning-2048x1536.jpg 2048w" sizes="(max-width: 2560px) 100vw, 2560px"></a>
       </p>
       	<div>
			<p>Another week, another blog post! So, there’s probably going to be a trend of things in the next few blog posts, and one of them is going to be, well, you guessed it! Cleaning! The machines were all very dirty when the arrived and it’s going to take us quite some time to clean the outsides, let alone the insides, so please bear with us whilst we post about it; hopefully you’ll find the process as satisfying as we do! Over the past week or so I’ve been conversing with a chap called Simon Van Winklen about working with us, and very kindly he’s volunteering some of his time to come and assist us with the restoration process. Simon is a retired Engineer who’s career…</p>
<p><a href="https://www.ibm360.co.uk/?p=754">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-666">
			<p><a href="https://www.ibm360.co.uk/?p=666"><img width="3024" height="4032" src="https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0587-1-e1574642700122.jpg" alt="" decoding="async" loading="lazy" srcset="https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0587-1-e1574642700122.jpg 3024w, https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0587-1-e1574642700122-225x300.jpg 225w, https://www.ibm360.co.uk/wp-content/uploads/2019/11/IMG_0587-1-e1574642700122-768x1024.jpg 768w" sizes="(max-width: 3024px) 100vw, 3024px"></a>
       </p>
       	<div>
			<p>So we mentioned in some of our earlier posts that we have a plethora of manuals that we found in the original building. These manuals are a rather obscure size being slightly longer than A3. This makes them very inconvenient to scan as they don’t fit on a regular scanner, and as such we needed a much bigger scanner. A0 scanners are particularly scarce, especially on the used market, and they command a high price (usually in the thousands). After browsing eBay for a while I happened upon a listing by a recycling company located fairly near to me for a Colortrac SmartLF Cx40 in unknown condition. For the price (&lt;£100) it was worth a punt! I won the bidding for just under £100 and…</p>
<p><a href="https://www.ibm360.co.uk/?p=666">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-485">
			<p><a href="https://www.ibm360.co.uk/?p=485"><img width="1600" height="1200" src="https://www.ibm360.co.uk/wp-content/uploads/2019/11/78F.jpg" alt="" decoding="async" loading="lazy" srcset="https://www.ibm360.co.uk/wp-content/uploads/2019/11/78F.jpg 1600w, https://www.ibm360.co.uk/wp-content/uploads/2019/11/78F-300x225.jpg 300w, https://www.ibm360.co.uk/wp-content/uploads/2019/11/78F-768x576.jpg 768w, https://www.ibm360.co.uk/wp-content/uploads/2019/11/78F-1024x768.jpg 1024w" sizes="(max-width: 1600px) 100vw, 1600px"></a>
       </p>
       	<div>
			<p>Well, where to start! The last few weeks have consisted primarily of anticipation, excitement, and towards the end, utter exhaustion. But finally, FINALLY, the IBM is home! It all started after our friend John Oates at the register shared our plight as detailed in our last blog post (see here). This was read by a chap in Melbourne, Australia called Kevin Silk, who then saw a LinkedIn post by a chap called Dan Apperley and left a comment: I had no idea any of this was going on until the following day when I received a call in my office just after 9am. The caller introduced himself as Dan and said he was from a company called Sunspeed. Dan told me that he had read…</p>
<p><a href="https://www.ibm360.co.uk/?p=485">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-477">
			<p><a href="https://www.ibm360.co.uk/?p=477"><img width="682" height="455" src="https://www.ibm360.co.uk/wp-content/uploads/2019/10/ezgif-6-300af96f3a06.jpg" alt="" decoding="async" loading="lazy" srcset="https://www.ibm360.co.uk/wp-content/uploads/2019/10/ezgif-6-300af96f3a06.jpg 682w, https://www.ibm360.co.uk/wp-content/uploads/2019/10/ezgif-6-300af96f3a06-300x200.jpg 300w" sizes="(max-width: 682px) 100vw, 682px"></a>
       </p>
       	<div>
			<p>So it’s been a while since we’ve posted anything here, and we apologise for that. We’ve all been rather busy with our respective personal and professional lives and it’s not left much time for us to work on getting the machine back to the UK. We’ve recently begun engaging with various transportation providers and we’re somewhat struggling to find anybody capable and willing to move the machine, but we will persevere! We’re determined to get the machine back before the October 31st Brexit deadline if at all possible, this is especially important as nobody knows what the importing costs will be post Brexit and we don’t want to end up paying thousands more in storage costs in the event of nobody knowing whats going on…</p>
<p><a href="https://www.ibm360.co.uk/?p=477">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-409">
			<p><a href="https://www.ibm360.co.uk/?p=409"><img width="768" height="382" src="https://www.ibm360.co.uk/wp-content/uploads/2019/05/header10-1.png" alt="" decoding="async" loading="lazy" srcset="https://www.ibm360.co.uk/wp-content/uploads/2019/05/header10-1.png 768w, https://www.ibm360.co.uk/wp-content/uploads/2019/05/header10-1-300x149.png 300w" sizes="(max-width: 768px) 100vw, 768px"></a>
       </p>
       	<div>
			<p>Yesterday Afternoon (21st of May 2019) I received a WhatsApp message from our German Auction house contact (come Photographer extraordinaire), Günter Hiller. It was a series of photographs, firstly of the roof of the machine room. It would seem over the weekend that the roof had leaked significantly right onto where the punched cards and the processor had been stored! It looks like we removed everything just in the absolute nick of time! Included in the photos were bits of IBM equipment, along with some engineering manuals. These had apparently been found in the room behind the room the computer was in, buried under a load of Porsche parts! This came as a surprise to everyone as they had previously been informed these rooms were…</p>
<p><a href="https://www.ibm360.co.uk/?p=409">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

<article id="post-185">
			<p><a href="https://www.ibm360.co.uk/?p=185"><img width="1024" height="768" src="https://www.ibm360.co.uk/wp-content/uploads/2019/05/28.jpeg" alt="" decoding="async" loading="lazy" srcset="https://www.ibm360.co.uk/wp-content/uploads/2019/05/28.jpeg 1024w, https://www.ibm360.co.uk/wp-content/uploads/2019/05/28-300x225.jpeg 300w, https://www.ibm360.co.uk/wp-content/uploads/2019/05/28-768x576.jpeg 768w" sizes="(max-width: 1024px) 100vw, 1024px"></a>
       </p>
       	<div>
			<p>So, after our last visit we were all ready to get going on the big move. We had already recovered all of the documentation back to the UK on the last visit and we had the ramp constructed which would enable reasonably smooth removal of the machine from the building. Chris and I departed for London Stansted in the late afternoon of the Wednesday (15th of May) with cabin bags containing our clothes and 2x 20kg suitcases full of things we thought we might need (e.g. ratchet straps, cloths, lights, tools etc.). We got settled into our flight and soon enough we had touched down at Nuremberg. We briefly debated taking the U-Bahn and a tram to our AirBNB but soon decided against it as…</p>
<p><a href="https://www.ibm360.co.uk/?p=185">Continue Reading<span>→</span></a></p>
		</div>

</article><!-- #post-## -->

	
</main><!-- #main --></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[20 Years in the Making, GnuCOBOL Is Ready for Industry (127 pts)]]></title>
            <link>https://thenewstack.io/20-years-in-the-making-gnucobol-is-ready-for-industry/</link>
            <guid>39728519</guid>
            <pubDate>Sat, 16 Mar 2024 19:02:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://thenewstack.io/20-years-in-the-making-gnucobol-is-ready-for-industry/">https://thenewstack.io/20-years-in-the-making-gnucobol-is-ready-for-industry/</a>, See on <a href="https://news.ycombinator.com/item?id=39728519">Hacker News</a></p>
Couldn't get https://thenewstack.io/20-years-in-the-making-gnucobol-is-ready-for-industry/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Hackintosh Is Almost Dead (391 pts)]]></title>
            <link>https://aplus.rs/2024/hackintosh-almost-dead/</link>
            <guid>39728146</guid>
            <pubDate>Sat, 16 Mar 2024 18:16:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://aplus.rs/2024/hackintosh-almost-dead/">https://aplus.rs/2024/hackintosh-almost-dead/</a>, See on <a href="https://news.ycombinator.com/item?id=39728146">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

<p><a href="https://aplus.rs/categories/hardware">hardware</a></p>

    

<p>It was a good run, though.</p>
    
    <p>
    <span>Mar 16, 2024</span>
    
    by 
        
    <span>6 minute read</span>
    
    </p>
    <p>While I knew about and even tried <a href="https://aplus.rs/2004/mac-os-xhappily-running-on-my-amd-athlon/">various very early attempts</a> to run macOS on non-Apple hardware, it wasn’t until <a href="https://aplus.rs/2020/hmac/">early 2020</a> that I’ve built my first proper one. Then I built several more which are still seeing daily use.</p>
<p>I <a href="https://aplus.rs/2020/missing-developer-mac/">explained my reasoning</a> why it was worthwhile to attempt it. The technology was mostly there thanks to a group of dedicated hackers and timing <a href="https://aplus.rs/2020/hmac-2020/">was just right</a>:</p>
<blockquote>
<p>But if ever there was a time to do it, it’s now.<br>
Apple is transitioning to their own CPUs/GPUs over the next two years. Several years from now, I see myself purchasing whatever desktop Apple Silicon-based machine is there.</p>
</blockquote>
<p>I also offered a prognosis which turned out partially true:</p>
<blockquote>
<p>Many will tell you that buying Intel-based hardware from Apple is buying obsolete models. I don’t really agree with that since it’s a given that those Intel-based Macs will be supported for 7-10 years of future macOS updates.</p>
</blockquote>
<p>It’s true that latest macOS 14 (Sonoma) still supports the latest generations of Intel Macs and it’s very likely that at least one or two major versions will still be compatible. But there’s one particular development that is de-facto killing off the Hackintosh scene.</p>
<p>In Sonoma, <strong>Apple has completely removed all traces of driver support for their oldest WiFi/Bt cards</strong>, namely various Broadcom cards that they last used in 2012/13 iMac / MacBook models. Those Mac models are not supported by macOS for few years now thus it’s not surprising the drivers are being removed. Most likely reason is that Apple is moving drivers away from <code>.kext</code> (Kernel Extensions) to <code>.dext</code> (DriverKit) thus cleaning up obsolete and unused code from macOS. They did the same with Ethernet drivers in Ventura.</p>
<p>Those particular cards were the key ingredient to many fully functional Hackintosh builds for simple reason: they worked out of the box with every single (so-called) iService Apple has: Messages, FaceTime, AirDrop, Continuity, Handoff - you name it. <em>Everything worked.</em> Despite the <a href="https://dortania.github.io/OpenCore-Legacy-Patcher/SONOMA-DROP.html#versioning">valiant efforts of OCLP crew</a> to make workarounds, those cards can work in Sonoma <em>only</em> if you <a href="https://github.com/perez987/Broadcom-wifi-back-on-macOS-Sonoma-by-OCLP">seriously downgrade</a> the macOS security.</p>
<p>There was some hope that <a href="https://github.com/OpenIntelWireless/itlwm">OpenIntelWireless</a> could replace those cards due to <a href="https://github.com/OpenIntelWireless">amazing work</a> zxystd did in the last 4 years. I mean, the WiFi speeds in macOS with Intel’s WiFi6 cards are <a href="https://forum.amd-osx.com/threads/wi-fi-speed-test-intel-ax200-vs-bcm94360ng.4756/">nothing short of spectacular</a>. But Apple’s continued cleanup and rewrite of their driver stack has pretty much killed-off any reliable support for Message and FaceTime despite iCloud sync still working great. zxystd <a href="https://github.com/OpenIntelWireless/itlwm/issues/953#issuecomment-1920759538">describes the new mountain to climb</a>:</p>
<blockquote>
<p>From Sonoma, Apple drops IO80211FamilyLegacy, I build AirportItlwmV2 on the top of IO80211Family, but using some hacks, you can simply interpret it as me implementing a set of IO80211FamilyLegacy myself. <em>This implementation may have side effects such as the iService not working etc</em>. Since IO80211Family uses skywalk API instead of original Ethernet API (Also we can foresee that the Ethernet API will also be dropped in macOS 15), without these hacks we should follow the Apple’s API and <em>rewrite the whole driver</em>, that’s what I would never do.</p>
</blockquote>
<p>In 14.4, Apple <a href="https://www.tonymacx86.com/threads/usb-problems-after-14-4-update.329275/">seem to have made changes</a> in how USB subsystem works too. This was always a tedious challenge but if minor updates can almost <a href="https://forum.amd-osx.com/threads/update-from-14-3-1-to-14-4.5013/">brick the build</a> it becomes a headache. Still…USB is a known problem with known solution thus it’s annoying but solvable.</p>
<p>WiFi with iServices is sadly not.</p>
<p>I’ve long held the opinion that it would not be CPU nor GPU changes that kill the Hacks — it would be lack of reliable WiFi drivers. And now, ~4 years later, Hackintosh hits a brick wall of no easy WiFi options available, at all.  Given how much of the macOS useful features is dependent on presence of particular WiFi chips — a decision of Apple developers I really can’t understand — I can’t really consider builds without those features to call themselves Mac.</p>
<p>I did not come to this conclusion just by reading the forums.</p>
<p>I have a rag-tag build sitting on my desk for several months now. It was supposed to be a quick proof-of-concept Sonoma build with Intel AX200 WiFi/Bt, AMD CPU and GPU, NVMe SSDs - everything that modern Mac should work with. It’s everything that my current Hackintosh is, with SIP intact, incremental updates working on their own etc — a perfect Mac.</p>
<p><img src="https://aplus.rs/images/2024/rag-tag-build.jpg" alt="My wannabe Sonoma-compatible Mac"></p>
<p>But pretty much since day one I encountered one problem after another. Things were so volatile and random that it was hard to believe, at times. Like —</p>
<ul>
<li>One day Ethernet controller (Intel I225-V) would work great, the next day it would just hard-crash the entire machine. No freaking idea why. Tried multiple ways and custom drivers to make it work but nothing was perfectly stable.</li>
<li>WiFi works fantastic, iCloud is perfect but Messages/FaceTime wouldn’t connect at all. In either Monterey, Ventura or Sonoma. That same card worked perfectly on another motherboard with Monterey and Ventura, no issues with Messages / FaceTime at all. Again — no idea why.</li>
<li>Bluetooth would work great for days but if I turn it off and restart the machine, something would become so messed up that it starts being recognised as BCM_4350C2 chip instead of Intel AX200. Only a round-trip to Windows 11 would somehow bring the chip into a state that <a href="https://github.com/OpenIntelWireless/IntelBluetoothFirmware">IntelBluetooth driver</a> can work with it.</li>
<li>Sonoma 14.3.1 works great on this build. But 14.4 update won’t install. It starts booting the installer and just reboots back almost immediately.</li>
</ul>
<p>Hence — <strong>Hackintosh is on its death bed</strong>. Some things will work for few more months or maybe even years, depending on what you use it for and wether lack of WiFi bothers you or not. But not for me. I can live without AirDrop, Continuity and Handoff but Messages and FaceTime must work. There’re also some other things Sonoma brings that are important to me thus I want to update to it. Coupled with described lack of reliability and fretting if next minor or major update would leave me dry — nah, not worth it.</p>
<p>I don’t really complain. I had a good run which helped me skip over the worst price/performance Mac lineup that I remember. There’re now plenty good choices within the current crop of M1 / M2 / M3 machines and I’ll be following eBay closely for a good used Mac mini / studio models. Or maybe even splurge on something new.</p>
<p>Lest I forget — if macOS Ventura works for you, stay on it! That’s still perfectly stable without a single issue across a variety of build options.</p>
<hr>
<p>Just to clarify one thing, to preempt someone saying Apple did this on purpose to kill off Hackintosh: <strong>they didn’t</strong>. Apple never cared about Hackintosh scene, it’s entirely irrelevant to their business. They did what they should be doing, improving the macOS codebase. It’s always a good thing to remove obsolete and deprecated code thus Apple is doing the right thing for their product.</p>

  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Research shows that people who BS are more likely to fall for BS (2021) (122 pts)]]></title>
            <link>https://uwaterloo.ca/news/media/research-shows-people-who-bs-are-more-likely-fall-bs</link>
            <guid>39727529</guid>
            <pubDate>Sat, 16 Mar 2024 17:01:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://uwaterloo.ca/news/media/research-shows-people-who-bs-are-more-likely-fall-bs">https://uwaterloo.ca/news/media/research-shows-people-who-bs-are-more-likely-fall-bs</a>, See on <a href="https://news.ycombinator.com/item?id=39727529">Hacker News</a></p>
<div id="readability-page-1" class="page"><div property="content:encoded"><p><span><span>People who frequently try to impress or persuade others with misleading exaggerations and distortions are themselves more likely to be fooled by impressive-sounding misinformation, new research from the University of Waterloo shows.&nbsp;</span></span></p>

<p><span><span>The researchers found that people who frequently engage in “persuasive bullshitting” were actually quite poor at identifying it. Specifically, they had trouble distinguishing intentionally profound or scientifically accurate fact from impressive but meaningless fiction. Importantly, these frequent BSers are also much more likely to fall for fake news headlines.</span></span></p>

<p><span><span>“It probably seems intuitive to believe that you can’t bullshit a bullshitter, but our research suggests that this isn’t actually the case,” says Shane Littrell, lead author of the paper and cognitive psychology PhD candidate at Waterloo. “In fact, it appears that the biggest purveyors of persuasive bullshit are ironically some of the ones most likely to fall for it.”</span></span></p>

<p><span><span>The researchers define “bullshit” as information designed to impress, persuade, or otherwise mislead people that is often constructed without concern for the truth. They also identify two types of bullshitting— persuasive and evasive.&nbsp;“Persuasive” uses misleading exaggerations and embellishments to impress, persuade, or fit in with others, while ‘evasive’ involves giving irrelevant, evasive responses in situations where frankness might result in hurt feelings or reputational harm.&nbsp;</span></span></p>

<p><span><span>In a series of studies conducted with over 800 participants from the US and Canada, the researchers examined the relations between participants’ self-reported engagement in both types of BSing and their ratings of how profound, truthful, or accurate they found pseudo-profound and pseudo-scientific statements and fake news headlines. Participants also completed measures of cognitive ability, metacognitive insight, intellectual overconfidence, and reflective thinking.</span></span></p>

<p><span><span>“We found that the more frequently someone engages in persuasive bullshitting, the more likely they are to be duped by various types of misleading information regardless of their cognitive ability, engagement in reflective thinking, or metacognitive skills,” Littrell said. “Persuasive BSers seem to mistake superficial profoundness for actual profoundness. So, if something simply sounds profound, truthful, or accurate to them that means it really is. But evasive bullshitters were much better at making this distinction.”&nbsp;</span></span></p>

<p><span><span>The research may help shed light on the processes underlying the spread of some types of misinformation, which could have important implications for the fight against this growing problem.&nbsp;</span></span></p>

<p>The study, You can’t bullshit a bullshitter (or can you?): Bullshitting frequency predicts receptivity to various types of misleading information, authored by Littrell and Waterloo’s Faculty of Arts professors Evan Risko and Jonathan Fugelsang, appears in the <em>British Journal of Social Psychology</em>.</p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Parsing URLs in Python (107 pts)]]></title>
            <link>https://tkte.ch/articles/2024/03/15/parsing-urls-in-python.html</link>
            <guid>39727458</guid>
            <pubDate>Sat, 16 Mar 2024 16:53:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tkte.ch/articles/2024/03/15/parsing-urls-in-python.html">https://tkte.ch/articles/2024/03/15/parsing-urls-in-python.html</a>, See on <a href="https://news.ycombinator.com/item?id=39727458">Hacker News</a></p>
<div id="readability-page-1" class="page"><section>
      <p>tl;dr - Try <a href="https://github.com/tktech/can_ada">can_ada</a> if you need to parse URLs in Python.</p>
<h2>URLs</h2>
<p>Parsing URLs <em>correctly</em> is surprisingly hard. Who even defines what a "correct"
URL is? URLs have evolved drastically since they were originally defined in
<a href="https://tools.ietf.org/html/rfc1738">1994</a>. The <a href="https://whatwg.org/">WHATWG</a> has a <a href="https://url.spec.whatwg.org/">URL specification</a> that
is comprehensive and has helped standardize the behavior of URLs across
browsers, but this specification still isn't universal and ambiguities like
"how many slashes are you allowed" can definitely get on <a href="https://daniel.haxx.se/blog/2017/01/30/one-url-standard-please">your nerves</a>:</p>
<blockquote cite="Daniel Stenberg">
    So browsers accept URLs written with thousands of forward slashes instead of
    two. That is not a good reason for the spec to say that a URL may
    legitimately contain a thousand slashes. I’m totally convinced there’s no
    critical content anywhere using such formatted URLs and no soul will be sad
    if we’d restricted the number to a single-digit. So we should. And yeah,
    then browsers should reject URLs using more.
</blockquote>

<p><em>However</em>, if you're creating something new and want to handle URLs, the
WHATWG's URL specification probably is the best place to start.</p>
<h2>URLs in Python</h2>
<p>If you're working in Python, you'd probably start with the built-in <code>urllib</code>
module. It's been around forever, but unfortunately it's not compliant with
<em>any</em> URL specification, either the much older <a href="https://tools.ietf.org/html/rfc3986">rfc3978</a>:</p>
<blockquote cite="CPython source code">
    RFC 3986 is considered the current standard and any future changes to
    urlparse module should conform with it. The urlparse module is
    currently not entirely compliant with this RFC due to defacto
    scenarios for parsing, and for backward compatibility purposes, some
    parsing quirks from older RFCs are retained. The testcases in
    test_urlparse.py provides a good indicator of parsing behavior.
</blockquote>

<p>... or the WHATWG URL Parser spec:</p>
<blockquote cite="CPython source code">
    The WHATWG URL Parser spec should also be considered. We are not compliant
    with it either due to existing user code API behavior expectations (Hyrum's
    Law). It serves as a useful guide when making changes.
</blockquote>

<p>Having existed for over 16 years, so many projects depend on the urllib module
parsing URLs in <em>exactly</em> the way it does that it's unlikely to ever change in
any significant fashion.</p>
<h2>Ada</h2>
<p>The <a href="https://github.com/ada-url/ada">Ada</a> project is a new (2024) attempt to create a URL parsing library
that adheres to the WHATWG URL specification and works <a href="https://github.com/ada-url/ada?tab=readme-ov-file#ada-is-fast">really, really fast</a>,
parsing 7 URLs for every 1 parsed by cURL. Written in C++, it now has bindings
to several other languages, including <a href="https://github.com/ada-url/ada-python">Python</a>, and has become the
URL parsing library used by Node.js as of version 18 to great success:</p>
<blockquote cite="State of Node.js Performance 2023">
    Since Node.js 18, a new URL parser dependency was added to Node.js — Ada.
    This addition bumped the Node.js performance when parsing URLs to a new
    level. Some results could reach up to an improvement of 400%.
</blockquote>

<p>The ada-python binding is perfectly functional, and the official binding for the
project. However, the ada-python bindings are built on <a href="https://cffi.readthedocs.io/en/latest/">CFFI</a>, an approach
that has the binding between C and Python written in Python itself, which loses
some of the performance benefits of using Ada in the first place when most of
the time is spent just making the function call.</p>
<h2>can_ada</h2>
<p><a href="https://lemire.me/">Daniel Lemire</a>, one of the developers behind the Ada project asked me to
<a href="https://github.com/ada-url/ada-python/pull/1#issuecomment-1550405501">take a look</a> at the ada-python bindings and out of that was born
<a href="https://github.com/tktech/can_ada">can_ada</a>, a new Python binding that uses <a href="https://pybind11.readthedocs.io/en/stable/">pybind11</a> and template magic
to generate the binding code, which is then compiled into a Python extension
module. This approach has the potential to be much faster than the ada-python
bindings, and indeed when comparing the two bindings, the new can_ada binding
is about 2x faster than the ada-python bindings which in turn is about 2x
faster than <code>urllib.parse</code>!</p>
<div><pre><span></span><code><span>---------------------------------------------------------------------------------</span>
<span>Name (time in ms)              Min                 Max                Mean       </span>
<span>---------------------------------------------------------------------------------</span>
<span>test_can_ada_parse         54</span><span>.</span><span>1304 (1</span><span>.</span><span>0)       54</span><span>.</span><span>6734 (1</span><span>.</span><span>0)       54</span><span>.</span><span>3699 (1</span><span>.</span><span>0) </span>
<span>test_ada_python_parse     107</span><span>.</span><span>5653 (1</span><span>.</span><span>99)     108</span><span>.</span><span>1666 (1</span><span>.</span><span>98)     107</span><span>.</span><span>7817 (1</span><span>.</span><span>98)</span>
<span>test_urllib_parse         251</span><span>.</span><span>5167 (4</span><span>.</span><span>65)     255</span><span>.</span><span>1327 (4</span><span>.</span><span>67)     253</span><span>.</span><span>2407 (4</span><span>.</span><span>66)</span>
<span>---------------------------------------------------------------------------------</span>
</code></pre></div>

<p>At the same time, using the pybind11 approach allows for a very succinct and
<a href="https://github.com/TkTech/can_ada/blob/main/src/binding.cpp">readable</a> binding definition, coming in at just <strong>60</strong> lines of code and
almost a 1:1 with the underlying C++ API.</p>
<p>Binary builds are available now for CPython 3.7 to 3.12, and PyPy 3.7 to 3.9 on
many OS's and architectures. Install it with pip or <a href="https://github.com/tktech/can_ada">get the source</a>:</p>


<h2>Example</h2>
<div><pre><span></span><code><span>import</span> <span>can_ada</span>
<span>urlstring</span> <span>=</span> <span>"https://www.GOoglé.com/./path/../path2/"</span>
<span>url</span> <span>=</span> <span>can_ada</span><span>.</span><span>parse</span><span>(</span><span>urlstring</span><span>)</span>
<span># prints www.xn--googl-fsa.com, the correctly parsed domain name according</span>
<span># to WHATWG</span>
<span>print</span><span>(</span><span>url</span><span>.</span><span>hostname</span><span>)</span>
<span># prints /path2/, which is the correctly parsed pathname according to WHATWG</span>
<span>print</span><span>(</span><span>url</span><span>.</span><span>pathname</span><span>)</span>
</code></pre></div>

<p>Compare this to the urllib version, which is not WHATWG compliant:</p>
<div><pre><span></span><code><span>import</span> <span>urllib.parse</span>
<span>urlstring</span> <span>=</span> <span>"https://www.GOoglé.com/./path/../path2/"</span>
<span>url</span> <span>=</span> <span>urllib</span><span>.</span><span>parse</span><span>.</span><span>urlparse</span><span>(</span><span>urlstring</span><span>)</span>
<span># prints www.googlé.com</span>
<span>print</span><span>(</span><span>url</span><span>.</span><span>hostname</span><span>)</span>
<span># prints /./path/../path2/</span>
<span>print</span><span>(</span><span>url</span><span>.</span><span>path</span><span>)</span>
</code></pre></div>
    </section></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Flash Attention in ~100 lines of CUDA (199 pts)]]></title>
            <link>https://github.com/tspeterkim/flash-attention-minimal</link>
            <guid>39726781</guid>
            <pubDate>Sat, 16 Mar 2024 15:31:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/tspeterkim/flash-attention-minimal">https://github.com/tspeterkim/flash-attention-minimal</a>, See on <a href="https://news.ycombinator.com/item?id=39726781">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">flash-attention-minimal</h2><a id="user-content-flash-attention-minimal" aria-label="Permalink: flash-attention-minimal" href="#flash-attention-minimal"></a></p>
<p dir="auto">A minimal re-implementation of Flash Attention with CUDA and PyTorch.
The official <a href="https://github.com/Dao-AILab/flash-attention">implementation</a> can be quite daunting for a CUDA beginner
(like myself), so this repo tries to be small and educational.</p>
<ul dir="auto">
<li>The entire forward pass is written in ~100 lines in <code>flash.cu</code>.</li>
<li>The variable names follow the notations from the original <a href="https://arxiv.org/abs/2205.14135" rel="nofollow">paper</a>.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Prerequisite</h3><a id="user-content-prerequisite" aria-label="Permalink: Prerequisite" href="#prerequisite"></a></p>
<ul dir="auto">
<li>PyTorch (with CUDA)</li>
<li><code>Ninja</code> for loading in C++</li>
</ul>
<p dir="auto"><h3 tabindex="-1" dir="auto">Benchmark</h3><a id="user-content-benchmark" aria-label="Permalink: Benchmark" href="#benchmark"></a></p>
<p dir="auto">Compare the wall-clock time between manual attention and minimal flash attention:</p>

<p dir="auto">Sample output on a <a href="https://aws.amazon.com/ec2/instance-types/g4/" rel="nofollow">T4</a>:</p>
<div data-snippet-clipboard-copy-content="=== profiling manual attention ===
...
Self CPU time total: 52.389ms
Self CUDA time total: 52.545ms

=== profiling minimal flash attention === 
...  
Self CPU time total: 11.452ms
Self CUDA time total: 3.908ms"><pre><code>=== profiling manual attention ===
...
Self CPU time total: 52.389ms
Self CUDA time total: 52.545ms

=== profiling minimal flash attention === 
...  
Self CPU time total: 11.452ms
Self CUDA time total: 3.908ms
</code></pre></div>
<p dir="auto">Speed-up achieved!</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">I don't have a GPU</h3><a id="user-content-i-dont-have-a-gpu" aria-label="Permalink: I don't have a GPU" href="#i-dont-have-a-gpu"></a></p>
<p dir="auto">Try out this <a href="https://colab.research.google.com/gist/tspeterkim/143bc7be7a845656817cf94c5228598e/demo-flash-attention-minimal.ipynb" rel="nofollow">online colab demo</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Caveats</h2><a id="user-content-caveats" aria-label="Permalink: Caveats" href="#caveats"></a></p>
<ul dir="auto">
<li>No backward pass! To be honest, I found it a lot more complex than the forward pass, which was enough to show the
use of shared memory to avoid large N^2 read/writes.</li>
<li>In the inner loop, I assign each thread to a row of the output matrix. This differs from the original implementation.</li>
<li>This thread-per-row simplification makes the matrix multiplications very slow. This is probably why for longer
sequences and larger block sizes, this gets slower than the manual implementation.</li>
<li>Q,K,Vs are in float32, unlike the original implementation which uses float16.</li>
<li>The block size is <a href="https://github.com/tspeterkim/flash-attention-minimal/blob/9b7ca8ef4e6afdbfeb149a9cd488c8dea9af9ad6/flash.cu#L85">fixed</a> at compile time to 32.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Todos</h2><a id="user-content-todos" aria-label="Permalink: Todos" href="#todos"></a></p>
<ul>
<li> Add backward pass</li>
<li> Speed up matmults</li>
<li> Dynamically set block size</li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[macOS 14.4 causes JVM crashes (152 pts)]]></title>
            <link>https://blogs.oracle.com/java/post/java-on-macos-14-4</link>
            <guid>39726292</guid>
            <pubDate>Sat, 16 Mar 2024 14:32:51 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blogs.oracle.com/java/post/java-on-macos-14-4">https://blogs.oracle.com/java/post/java-on-macos-14-4</a>, See on <a href="https://news.ycombinator.com/item?id=39726292">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

            <!-- RC84v1 -->
            <section>

                 <p><span><span><span><span><span>An issue introduced by macOS 14.4, which causes Java process to terminate unexpectedly, is affecting all Java versions from Java 8 to the early access builds of JDK 22. There is no workaround available, and since there is no easy way to revert a macOS update, affected users might be unable to return to a stable configuration unless they have a complete backup of their systems prior to the OS update.</span></span></span></span></span></p>

<p><span><span><span><span><span>The issue was not present in the early access releases for macOS 14.4, so it was discovered only after Apple released the update.</span></span></span></span></span></p>

<p><span><span><span><span><span>macOS on Apple silicon processors (M1, M2, and M3) includes a feature which controls how and when dynamically generated code can be either produced (written) or executed on a per-thread basis.&nbsp;</span></span></span></span></span></p>

<p><span><span><span><span>As a normal part of the just-in-time compile and execute cycle</span></span><span><span>, processes running on macOS may access memory in protected memory regions. Prior to the macOS 14.4 update, in certain circumstances, the macOS kernel would respond to these protected memory accesses by sending a signal,&nbsp;</span></span><span><span><span><span>SIGBUS</span></span></span></span><span><span>&nbsp;or&nbsp;</span></span><span><span><span><span>SIGSEGV</span></span></span></span><span><span>, to the process. The process could then choose to handle the signal and continue execution.&nbsp; With macOS 14.4, when a thread is operating in the write mode, if a memory access to a protected memory region is attempted, macOS will send the signal&nbsp;</span></span><span><span><span><span>SIGKILL </span></span></span></span><span><span>instead. That signal cannot be handled by the process and the process is unconditionally terminated. </span></span></span></span></p>

<p><span><span><span><span><span>The Java Virtual Machine generates code dynamically and leverages the protected memory access signal mechanism both for correctness (e.g., to handle the truncation of memory mapped files) and for performance. With macOS 14.4, programs that attempt this will now terminate instead of having the opportunity to handle the signal.</span></span></span></span></span></p>

<p><span><span><span><span><span>Ahead-of-Time compiled applications created with GraalVM Native Image should not be affected, but your ability to build new images may be.</span></span></span></span></span></p>

<p><span><span><span><span><span>Oracle has notified its customers, Apple, and our partners in OpenJDK of this situation. We recommend that users of Java on ARM-based Apple devices running macOS 14 delay applying the update until this issue is resolved.</span></span></span></span></span></p>

<p><span><span><span><span><span>The issue can be tracked on&nbsp;</span></span><span><a href="https://bugs.java.com/bugdatabase/view_bug?bug_id=8327860" title="https://bugs.java.com/bugdatabase/view_bug?bug_id=8327860"><span><span>bugs.java.com with bugID JDK-8327860</span></span></a></span></span></span></span></p>


            </section>
            <!-- /RC84v1 -->

            <!-- RC84v2 -->
            <div>
                        <p><img src="https://blogs.oracle.com/content/published/api/v1.1/assets/CONT8FA109D0B313456BA3072245A6090E81/Thumbnail?cb=_cache_a30&amp;channelToken=7e01516d535048508dfbd81a6ea0d1ed&amp;format=jpg" alt="">
                        </p>
                        <div>
                                <h4>Aurelio Garcia-Ribeyro</h4>
                                <h5>Senior Director of Product Management</h5>

                                <p>Aurelio&nbsp;has been involved in the development of the JDK since JDK 7. &nbsp;He is a frequent presenter at JavaOne, Oracle Code One, and with Java User Groups and Oracle Customers. &nbsp;Aurelio's role includes making sure that Java users, within and outside of Oracle, are well informed of changes as well as to present the most relevant features and enhancements in upcoming releases. He has received a JavaOne Rock Star Award.</p>
<p>Aurelio joined Oracle in 2010 through the Sun Microsystems acquisition.&nbsp;</p>
                            </div>
                    </div>
            <!-- /RC84v2 -->


        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Y Combinator's chief startup whisperer is demoting himself (115 pts)]]></title>
            <link>https://www.wired.com/story/plaintext-y-combinator-michael-seibel-startup-whisperer/</link>
            <guid>39725678</guid>
            <pubDate>Sat, 16 Mar 2024 13:24:12 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.wired.com/story/plaintext-y-combinator-michael-seibel-startup-whisperer/">https://www.wired.com/story/plaintext-y-combinator-michael-seibel-startup-whisperer/</a>, See on <a href="https://news.ycombinator.com/item?id=39725678">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-journey-hook="client-content" data-testid="BodyWrapper"><p>When Michael Seibel lost his position at the startup incubator Y Combinator, he didn’t find out in <a href="https://www.wired.com/story/plaintext-alphabets-layoffs-arent-very-googley/">typical tech industry fashion</a>, which might entail an email calling him to a Zoom meeting where the bad news would be delivered. He did it to himself. Today Seibel is announcing that he’s stepping down as YC’s managing director, a job that entailed running the heart of the business: selecting startup founders for the three-month program and running the boot-camp-style operation that hones the vision and execution of their ideas so they can raise money, release products, and attempt to become the next Airbnb or Stripe (both YC alumni).</p><p>Considering how important YC has been to the tech startup ecosystem, Seibel’s exit will have more resonance than your average corporate reshuffle. For one thing, the person who runs YC’s blue-chip accelerator has a significant hand in shaping the next generation of tech companies. And in recent months, YC has found itself in the crossfire of a war between tech and progressives. Whether intentional or not, Seibel, a well-liked entrepreneur and investor himself, is deftly stepping out of the line of fire.</p><p>Seibel explains the move as a more personal decision. Sometime last year he began to take stock, spurred in part by reading <a data-offer-url="https://www.amazon.com/Strength-Finding-Success-Happiness-Purpose/dp/059319148X" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.amazon.com/Strength-Finding-Success-Happiness-Purpose/dp/059319148X&quot;}" href="https://www.amazon.com/Strength-Finding-Success-Happiness-Purpose/dp/059319148X" rel="noopener" target="_blank"><em>Strength to Strength</em></a>, a book about career arcs, particularly pivots made late in life. He’s only 41, but precociousness is part of the founder mindset, and he’d been a startup CEO at 23. “I do everything early,” he says.</p><div data-testid="GenericCallout"><figure><p><span>Michael Seibel</span><span>Courtesy of Y Combinator</span></p></figure></div><p>He realized that he had been running batches for as long as the person who first imagined YC into being, <a href="https://www.wired.com/story/how-y-combinator-changed-the-world/">Paul Graham</a>. After Covid waned, YC had returned to an in-person experience, and the software that it had developed to smooth the remote Covid-era program made an IRL operation easier to manage. Now the program works by splitting each batch of new startups into four groups, none larger than <a href="https://www.newscientist.com/definition/dunbars-number/">Dunbar’s Number</a> of 150, estimated to be the maximum number of relationship’s a human brain can properly maintain. Each group has its own leader, so YC had less need for someone to oversee each cohort as a whole. And though Seibel enjoyed managing the overall program, he much preferred direct contact with company founders. So he will now become one of those four group leaders, who each mentor a quarter of the batch. It’s a particularly exciting time to do that, Seibel says, as many of the companies hinge on the AI boom.</p><p>Close observers of YC—and many in the startup ecosystem monitor the accelerator with the diligence of a behavior-tracking ad network—might wonder whether Seibel’s move might have something to do with his being passed over for the leadership of the entire operation. <a href="https://www.forbes.com/sites/alexkonrad/2024/03/08/inside-garry-tan-plan-restore-y-combinator-silicon-valley-glory/?sh=709b797b2103">Forbes has reported</a> that he was disappointed not to be tapped as CEO after the incubator’s president, Geoff Ralston, who had taken over when Sam Altman went full time leading OpenAI, left at the end of 2022. Ralston was replaced by YC’s former design guru, Garry Tan. Seibel tells me he did not feel dissed, though he would have accepted the job if offered. “If it was something that people thought was going to be the right thing, I was happy to do it. If not, I was more than happy to not,” he says. “My whole goal was to do whatever YC needed for me.”</p><p>Seibel’s self-demotion seems to be in keeping with a recent rethinking at Y Combinator: a refocusing toward a scrappy, boots-on-the-ground startup accelerator as it was under its initial leader and cofounder Graham. His successor, Altman, started a sprawling research operation that, among other things, launched OpenAI. Ralston had his own dreams, and YC started a continuity fund to enable it to make later-stage investments into maturing startups. Ralston was also enamored with scale. The Winter 2022 batch included 412 companies, each funded by the traditional seed investment from YC. <a data-offer-url="https://www.ycombinator.com/blog/ycs-500-000-standard-deal" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.ycombinator.com/blog/ycs-500-000-standard-deal&quot;}" href="https://www.ycombinator.com/blog/ycs-500-000-standard-deal" rel="noopener" target="_blank">Ralston boosted</a> that initial slug of capital from $125,000 to $500,000 per company, for a 7 percent stake. When <a href="https://www.wired.com/story/how-y-combinator-changed-the-world/">I last asked him</a> whether there was a limit to how many startups YC could accommodate in each batch, Ralston said there wasn’t. It was possible, he believed, for a batch to number “thousands” of startups.</p><p>Under Tan, who took over in January 2023, there’s been a refocus on the founders themselves. Tan says YC had become kind of an umbrella company saying yes to a lot of things. “I asked, ‘How do we focus on what made YC awesome in the first place?’” The answer was mentoring cool founders, chosen through an exacting application process. The continuity fund <a data-offer-url="https://www.theinformation.com/articles/y-combinator-to-end-late-stage-startup-continuity-fund" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.theinformation.com/articles/y-combinator-to-end-late-stage-startup-continuity-fund&quot;}" href="https://www.theinformation.com/articles/y-combinator-to-end-late-stage-startup-continuity-fund" rel="noopener" target="_blank">was discontinued</a>. YC had already <a data-offer-url="https://www.openresearchlab.org/blog/we-are-changing-our-name" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.openresearchlab.org/blog/we-are-changing-our-name&quot;}" href="https://www.openresearchlab.org/blog/we-are-changing-our-name" rel="noopener" target="_blank">separated itself</a> <a data-offer-url="https://www.ycombinator.com/blog/yc-research" data-event-click="{&quot;element&quot;:&quot;ExternalLink&quot;,&quot;outgoingURL&quot;:&quot;https://www.ycombinator.com/blog/yc-research&quot;}" href="https://www.ycombinator.com/blog/yc-research" rel="noopener" target="_blank">f</a>rom Altman’s research division, which is now called Open Research. The only remaining trace of Altman’s research operation within the company now is a financial stake in OpenAI. Most notably, batch sizes have been cut almost in half. Beginning Summer 2022, they numbered in the mid 200’s, with the current batch inching up to 260. This isn’t due to demand—27,000 companies applied for those slots.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Cloudflare loses 22% of its domains in Freenom .tk shutdown (283 pts)]]></title>
            <link>https://www.netcraft.com/blog/cloudflare-loses-22-of-its-domains-in-freenom-tk-shutdown/</link>
            <guid>39725303</guid>
            <pubDate>Sat, 16 Mar 2024 12:24:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.netcraft.com/blog/cloudflare-loses-22-of-its-domains-in-freenom-tk-shutdown/">https://www.netcraft.com/blog/cloudflare-loses-22-of-its-domains-in-freenom-tk-shutdown/</a>, See on <a href="https://news.ycombinator.com/item?id=39725303">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="text">
			
<p>A staggering 12.6 million domains on TLDs controlled by <a href="https://www.freenom.com/en/index.html?lang=en">Freenom</a> (<strong>.tk</strong>, <strong>.cf</strong> and <strong>.gq</strong>) have been shut down and no longer resolve, leading to a significant reduction in the number of websites hosted by <a href="https://www.cloudflare.com/en-gb/">Cloudflare</a>.</p>



<p>The disappearance of these websites was spotted during our monthly Web Server Survey and represents a 98.7% drop from the number of Freenom domains that were resolvable last month.</p>



<figure><img fetchpriority="high" decoding="async" width="2263" height="1305" src="https://www.netcraft.com/wp-content/uploads/2024/03/freenom.svg" alt=""></figure>



<p>Nearly all <strong>.tk</strong>, <strong>.cf</strong> and <strong>.gq</strong> domains have effectively disappeared.</p>



<p>The <strong>.tk</strong>, <strong>.cf</strong> and <strong>.gq</strong> TLDs are country code top-level domains (ccTLDs) for Tokelau, Central African Republic, and Equatorial Guinea. They were officially intended to be used by entities connected with these countries, but this was very rarely the case.</p>



<p>The huge drop is likely the culmination of a series of events that started last year, when <a href="https://www.netcraft.com/blog/impact-of-freenom-halting-registrations-on-cybercrime/">Freenom was sued by Meta for ignoring abuse complaints</a>. Freenom subsequently paused new domain registrations in March 2023, and Netcraft noticed a dramatic reduction in the amount of cybercrime across two TLDs that later moved away from the provider (<strong>.ga</strong> and <strong>.ml</strong>).</p>



<p>Finally, on 12 February 2024, Freenom announced that it had decided to exit the domain name business, including the operation of registries. The same press release (which has since been removed but is archived <a href="https://web.archive.org/web/20240219215920/https://www.freenom.com/en/freenom_pressstatement_02122024_v0100.pdf">here</a>) also announced that Freenom had resolved the Meta lawsuit on confidential monetary and business terms.</p>



<h3>Cloudflare losses</h3>



<p>The affected domains represent a big loss for <a href="https://www.cloudflare.com/en-gb/">Cloudflare</a>, with <strong>.tk</strong>, <strong>.cf</strong> and <strong>.gq</strong> previously accounting for 23.1% of all domains hosted on its platform – and nearly all of these have now gone.</p>



<p>The combined amount of <strong>.tk</strong>, <strong>.cf</strong> and <strong>.gq</strong> domains hosted by Cloudflare has fallen by 99.8% since our March 2024 Web Server Survey, leading to a noticeable 22.0% drop in the total number of all domains hosted by Cloudflare.</p>



<figure><img decoding="async" width="2263" height="1305" src="https://www.netcraft.com/wp-content/uploads/2024/03/cloudflare.svg" alt="" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></figure>



<p>All <em>domains</em> hosted by Cloudflare.<br>(Note sites like <strong><em>foo</em>.example.tk</strong> and <strong><em>bar</em>.example.tk</strong> would be counted as a single domain)</p>



<p>The <strong>.tk</strong> top level domain was the most popular of those operated by Freenom. Last month it accounted for 16.2% of all domains hosted by Cloudflare, but very few of these were used by popular websites. Amongst Netcraft’s top million websites dataset, there were only 59 sites across 57 <strong>.tk</strong> domains. 36 of these still resolve, which suggests they are paid-for domains.</p>



<p>But to the vast majority who registered these domain names for free, their sudden disappearance came as a bit of a surprise. Amongst the debate in the <a href="https://community.cloudflare.com/t/dot-tk-domains/612359">Cloudflare</a> <a href="https://community.cloudflare.com/t/the-site-got-down-suddenly-with-dns-probe-finished-nxdomain-and-err-name-not-resolved-error/612747">and </a><a href="https://www.reddit.com/r/freenom/comments/1akf1cv/every_domain_is_now_down/">Reddit </a>communities, some customers reported being able to get their domain names <a href="https://www.reddit.com/r/freenom/comments/1akf1cv/comment/kphvtrf/">back up and running</a> by having their domains marked as “paid domains”. </p>



<figure><img decoding="async" width="1024" height="573" src="https://www.netcraft.com/wp-content/uploads/2024/03/image-3-1024x573.png" alt="" srcset="https://www.netcraft.com/wp-content/uploads/2024/03/image-3-1024x573.png 1024w, https://www.netcraft.com/wp-content/uploads/2024/03/image-3-300x168.png 300w, https://www.netcraft.com/wp-content/uploads/2024/03/image-3-768x430.png 768w, https://www.netcraft.com/wp-content/uploads/2024/03/image-3-1536x859.png 1536w, https://www.netcraft.com/wp-content/uploads/2024/03/image-3.png 1620w" sizes="(max-width: 1024px) 100vw, 1024px" data-src="https://www.netcraft.com/wp-content/uploads/2024/03/image-3-1024x573.png" data-srcset="https://www.netcraft.com/wp-content/uploads/2024/03/image-3-1024x573.png 1024w, https://www.netcraft.com/wp-content/uploads/2024/03/image-3-300x168.png 300w, https://www.netcraft.com/wp-content/uploads/2024/03/image-3-768x430.png 768w, https://www.netcraft.com/wp-content/uploads/2024/03/image-3-1536x859.png 1536w, https://www.netcraft.com/wp-content/uploads/2024/03/image-3.png 1620w" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></figure>



<p>The Freenom website claims new registrations are temporarily out-of-order due to “technical issues”.</p>



<h3>When did the shutdown happen?</h3>



<p>The number of SSL certificates successfully issued to <strong>.tk</strong> domains provides a good indication of when the shutdown took effect, particularly as the two largest certificate authorities – Google and Let’s Encrypt – only issue <em>domain validated</em> certificates.</p>



<p>The issuance and renewal process for a domain validated certificate involves sending an HTTP request to the website it will be issued for, and so each subject domain must be resolvable for the process to succeed.</p>



<figure><img decoding="async" width="992" height="463" src="https://www.netcraft.com/wp-content/uploads/2024/03/image-5.png" alt="" srcset="https://www.netcraft.com/wp-content/uploads/2024/03/image-5.png 992w, https://www.netcraft.com/wp-content/uploads/2024/03/image-5-300x140.png 300w, https://www.netcraft.com/wp-content/uploads/2024/03/image-5-768x358.png 768w" sizes="(max-width: 992px) 100vw, 992px" data-src="https://www.netcraft.com/wp-content/uploads/2024/03/image-5.png" data-srcset="https://www.netcraft.com/wp-content/uploads/2024/03/image-5.png 992w, https://www.netcraft.com/wp-content/uploads/2024/03/image-5-300x140.png 300w, https://www.netcraft.com/wp-content/uploads/2024/03/image-5-768x358.png 768w" data-old-src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></figure>



<p>Certificates issued to <strong>.tk</strong> domains (hourly).</p>



<p>This graph shows the shutdown taking noticeable effect between 8 – 10 February 2024, crucially a few days before Freenom issued the 12 February press statement where it announced its exit from the domain name business. This lack of notice clearly caught lots of people by surprise.</p>



<p>The small trickle of issuances thereafter represents the small number of <strong>.tk</strong> domains that are still active, including those marked as “paid domains”.</p>



<p>The free and easily acquired domain names that Freenom used to provide were unsurprisingly attractive to criminals and were used to host many phishing sites, malware, and other types of cyberattacks. Consequently, one positive side effect of the shutdown is that the number of malicious URLs that we block on the affected TLDs has fallen by 86.9% since December 2023.</p>



<p>You can read more about the impacts on cybercrime in the aftermath of Freenom’s original announcement on the <a href="https://www.netcraft.com/blog/impact-of-freenom-halting-registrations-on-cybercrime/">Netcraft Blog</a>.</p>
		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Fuzzing Ladybird with tools from Google Project Zero (414 pts)]]></title>
            <link>https://awesomekling.substack.com/p/fuzzing-ladybird-with-tools-from</link>
            <guid>39725057</guid>
            <pubDate>Sat, 16 Mar 2024 11:49:57 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://awesomekling.substack.com/p/fuzzing-ladybird-with-tools-from">https://awesomekling.substack.com/p/fuzzing-ladybird-with-tools-from</a>, See on <a href="https://news.ycombinator.com/item?id=39725057">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><div dir="auto"><p><span>While </span><a href="https://ladybird.dev/" rel="">Ladybird</a><span> does an okay job with well-formed web content, I thought it would be useful to throw some security research tools at it and see what kind of issues it might reveal. So today we’ll be using “</span><strong><a href="https://github.com/googleprojectzero/domato" rel="">Domato</a></strong><a href="https://github.com/googleprojectzero/domato" rel=""> 🍅</a><span>”, a DOM fuzzer from </span><a href="https://googleprojectzero.blogspot.com/" rel="">Google Project Zero</a><span>, to stress test Ladybird and fix some issues found along the way.</span></p><p>The way this works is that Domato generates randomized web pages with lots of mostly-valid but strange HTML, CSS and JavaScript. I then load these pages into a debug build of Ladybird and observe what happens.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png" width="1456" height="924" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:924,&quot;width&quot;:1456,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:663971,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:&quot;image/png&quot;,&quot;href&quot;:null,&quot;belowTheFold&quot;:false,&quot;topImage&quot;:true,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F9bd74774-78da-4188-ab8b-dc3fbd2622c1_1741x1105.png 1456w" sizes="100vw" fetchpriority="high"></picture></div></a><figcaption>Domato generates HTML pages of roughly 500 KiB in size, filled with “interesting” JS, CSS and HTML to surprise and delight your browser engine!</figcaption></figure></div><p>The Domato README boasts a ton of bugs discovered in all major browsers, so I have no doubt it will find some in ours as well. Here we go!</p><p>Unsurprisingly, it took less than a second to find the first issue! The output produced by Domato is actually 562 KiB, but I was able to reduce it to the following:</p><pre><code>&lt;body&gt;
&lt;script&gt;
let mfrac = document.createElement("mfrac");
mfrac.appendChild(document.createElement("th"));
document.body.appendChild(mfrac);
&lt;/script&gt;</code></pre><p>I’ve compiled Ladybird with UBSAN (Undefined Behavior SANitizer) for this test, and I get the following very helpful trace output:</p><pre><code><strong>LibWeb/HTML/HTMLTableCellElement.cpp:55:36: runtime error: member call on null pointer of type 'Web::DOM::Node'
</strong><span>#0 0x7e9bfa1610dd in table_containing_cell LibWeb/HTML/HTMLTableCellElement.cpp:55:36
#1 0x7e9bfa1610dd in Web::HTML::HTMLTableCellElement::apply_presentational_hints(Web::CSS::StyleProperties&amp;) const LibWeb/HTML/HTMLTableCellElement.cpp:101:33
#2 0x7e9bf97c22d1 in Web::CSS::StyleComputer::compute_cascaded_values(Web::CSS::StyleProperties&amp;, Web::DOM::Element&amp;, AK::Optional&lt;Web::CSS::Selector::PseudoElement::Type&gt;, bool&amp;, Web::CSS::StyleComputer::ComputeStyleMode) const LibWeb/CSS/StyleComputer.cpp:1448:17
#3 0x7e9bf97e5899 in Web::CSS::StyleComputer::compute_style_impl(Web::DOM::Element&amp;, AK::Optional&lt;Web::CSS::Selector::PseudoElement::Type&gt;, Web::CSS::StyleComputer::ComputeStyleMode) const LibWeb/CSS/StyleComputer.cpp:2231:5
#4 0x7e9bf97e447e in Web::CSS::StyleComputer::compute_style(Web::DOM::Element&amp;, AK::Optional&lt;Web::CSS::Selector::PseudoElement::Type&gt;) const LibWeb/CSS/StyleComputer.cpp:2202:12
#5 0x7e9bf9a7e60c in Web::DOM::Element::recompute_style() LibWeb/DOM/Element.cpp:575:64</span></code></pre><p>It’s a good old-fashioned null pointer dereference!</p><p><span>As it turns out, we’ve implemented </span><code>&lt;th&gt;</code><span> and </span><code>&lt;td&gt;</code><span> elements with the assumption that there’s always a </span><code>&lt;table&gt;</code><span> somewhere above it in the DOM tree. We probably believed this because the following is not allowed by the HTML parser:</span></p><p><code>&lt;mfrac&gt;&lt;th&gt;</code></p><p><span>If you load the above markup in a spec-compliant browser, it will create a single </span><code>&lt;mfrac&gt;</code><span> element with nothing inside it.</span></p><p><span>However, when creating DOM nodes manually using JavaScript API, you can break some of the rules that the parser has to follow, and indeed put a </span><code>&lt;th&gt;</code><span> inside an </span><code>&lt;mfrac&gt;</code><span>!</span></p><p>Here’s the buggy function:</p><pre><code>HTMLTableElement const&amp; table_containing_cell(HTMLTableCellElement const&amp; node)
{
    auto parent_node = node.parent();
&nbsp;&nbsp;&nbsp; while (!is&lt;HTML::HTMLTableElement&gt;(parent_node))
  &nbsp;&nbsp;    parent_node = parent_node-&gt;parent();
 &nbsp;&nbsp;&nbsp;return static_cast&lt;HTML::HTMLTableElement const&amp;&gt;(*parent_node);
}</code></pre><p><span>It’s used to implement the ancient feature where </span><code>&lt;table border=3&gt;</code><span> and </span><code>&lt;table padding=5&gt;</code><span> applies CSS border and padding to each table cell, and not just the table box itself.</span></p><p><span>The fix is simply to stop assuming that </span><code>&lt;th&gt;</code><span> and </span><code>&lt;td&gt;</code><span> elements always have a containing </span><code>&lt;table&gt;</code><span> in the ancestor chain. We don’t need the </span><code>table_containing_cell</code><span> helper but can instead simply replace this:</span></p><pre><code>auto const&amp; table_element = table_containing_cell(*this);</code></pre><p>With this:</p><pre><code>auto const table_element = first_ancestor_of_type&lt;HTMLTableElement&gt;();
if (!table_element)
    return;</code></pre><p><span>And we’re done with issue #1! </span><a href="https://github.com/SerenityOS/serenity/commit/b9bacb3ff49ba675f9875434d646fb1b34d2c0df" rel="">(Fix committed here.)</a></p><p>We continue executing the fuzzer and once again, within less than 1 second, we hit a new problem. The Domato output is 472 KiB, but it whittles down to this:</p><pre><code>&lt;script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;var parser = new DOMParser();
&nbsp;&nbsp;&nbsp;&nbsp;var doc = parser.parseFromString("", "text/html");
&nbsp;&nbsp;&nbsp;&nbsp;var body = doc.createElement("body");
&nbsp;&nbsp;&nbsp;&nbsp;body.onblur = null;
&lt;/script&gt;</code></pre><p>When opened in Ladybird, we fail like so:</p><pre><code>VERIFICATION FAILED: m_ptr at LibJS/Heap/GCPtr.h:174
#1&nbsp; JS::GCPtr&lt;Web::HTML::Window&gt;::operator* at LibJS/Heap/GCPtr.h:174
#2&nbsp; Web::DOM::Document::window at LibWeb/DOM/Document.h:320
#3&nbsp; Web::HTML::HTMLBodyElement::global_event_handlers_to_event_target at LibWeb/HTML/HTMLBodyElement.cpp:104
#4&nbsp; Web::HTML::GlobalEventHandlers::set_onblur at LibWeb/HTML/GlobalEventHandlers.cpp:24
#5&nbsp; Web::Bindings::HTMLElementPrototype::onblur_setter at LibWeb/Bindings/HTMLElementPrototype.cpp:1153</code></pre><p><span>The reason things go wrong here is due to the special behavior of </span><code>onfoo</code><span> event handler attributes on the </span><code>&lt;body&gt;</code><span> element. For compatibility with ancient web content, assignments to </span><code>document.body.onfoo</code><span> must forward to </span><code>window.onfoo</code><span>. However, documents created via </span><code>DOMParser</code><span> </span><em>do not have a window object!</em></p><p>It turns out we’ve misunderstood this detail in our implementation, and structured our internal object model as if every document always has a window. Oops!</p><p><span>The fix is to make </span><code>Document::window()</code><span> return a nullable value, and then handle null in a bajillion places. When assigning </span><code>document.body.onblur</code><span> in a window-less document, we now simply do nothing, same as other browsers.</span></p><p><a href="https://github.com/SerenityOS/serenity/commit/b98a2be96bf03562ec21e80b48d4b3b97ad74cd6" rel="">(Fix committed here.)</a></p><p>Modern browsers have to support SVG both inline in HTML, and also as an external image format. This adds a whole host of new edge cases and interesting interactions.</p><p>For example, SVG allows declaring gradients that reference other gradients to inherit their colors. As it turns out, we hadn’t considered the case where a gradient references itself:</p><pre><code>&lt;svg&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;linearGradient id="oops" href="#oops"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;rect fill="url(#oops)" /&gt;
&lt;/svg&gt;</code></pre><p>The SVG above would cause our implementation to loop forever as it attempted to follow the chain of referenced gradients. Oops, indeed!</p><p>The obvious fix is to stop following the chain of linked gradients if the current gradient references itself. However, that doesn’t cover reference cycles that span multiple steps like so:</p><pre><code>&lt;svg&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;linearGradient id="lol" href="#lmao"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;linearGradient id="lmao" href="#even"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;linearGradient id="even" href="#lol"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;rect fill="url(#lol)" /&gt;
&lt;/svg&gt;</code></pre><p>To properly handle cyclical references, we have to keep track of all the gradients we’ve visited, and stop following the chain if we encounter a gradient we’ve already visited before.</p><p>Curiously, Firefox actually complains about these kind of gradients in their developer console:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png 1456w" sizes="100vw"><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png" width="842" height="40" data-attrs="{&quot;src&quot;:&quot;https://substack-post-media.s3.amazonaws.com/public/images/b10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png&quot;,&quot;srcNoWatermark&quot;:null,&quot;fullscreen&quot;:null,&quot;imageSize&quot;:null,&quot;height&quot;:40,&quot;width&quot;:842,&quot;resizeWidth&quot;:null,&quot;bytes&quot;:null,&quot;alt&quot;:null,&quot;title&quot;:null,&quot;type&quot;:null,&quot;href&quot;:null,&quot;belowTheFold&quot;:true,&quot;topImage&quot;:false,&quot;internalRedirect&quot;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb10a9009-633b-453e-ba7f-610dcb2af2f5_842x40.png 1456w" sizes="100vw" loading="lazy"></picture></div></a></figure></div><p><a href="https://github.com/SerenityOS/serenity/commit/2e0297d7035a807d4a18c89c8b310ec06bef005d" rel="">(Fix committed here.)</a></p><p>This one is interesting:</p><pre><code>&lt;iframe&gt;&lt;/iframe&gt;
&lt;script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;window.onload = function() {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let iframe = document.querySelector("iframe")
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let iframeWindow = iframe.contentWindow;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iframe.remove();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iframeWindow.getSelection();
&nbsp;&nbsp;&nbsp;&nbsp;}
&lt;/script&gt;</code></pre><p>The above test would crash like this:</p><pre><code><strong>LibWeb/HTML/WindowProxy.cpp:161:136: runtime error: reference binding to null pointer of type 'const BrowsingContext'</strong><span>
#0 0x77367675cadf in Web::HTML::WindowProxy::internal_get(JS::PropertyKey const&amp;, JS::Value, JS::CacheablePropertyMetadata*) const LibWeb/HTML/WindowProxy.cpp:161:5
#1 0x773670c4fcca in JS::Bytecode::get_by_id(JS::VM&amp;, AK::DeprecatedFlyString const&amp;, JS::Value, JS::Value, JS::Bytecode::PropertyLookupCache&amp;) LibJS/Bytecode/CommonImplementations.h:105:18
#2 0x773670c182d5 in JS::Bytecode::Op::GetById::execute_impl(JS::Bytecode::Interpreter&amp;) const LibJS/Bytecode/Interpreter.cpp:1088:28
#3 0x773670bc8e1f in execute LibJS/Bytecode/Op.h:1898:9
#4 0x773670bc8e1f in JS::Bytecode::Interpreter::run_bytecode() LibJS/Bytecode/Interpreter.cpp:409:38</span></code></pre><p><span>As it turns out, this is actually a bug in the HTML spec! When an iframe is removed from the DOM, its content document is detached from its browsing context. However, when getting or setting a property on a window object, we run a spec algorithm called </span><strong>"check if an access between two browsing contexts should be reported"</strong><span> which inspects the browsing context of the “accessor” and “accessed” window. The spec incorrectly assumed that both windows have an associated browsing context at the time of property access.</span></p><p><a href="https://github.com/whatwg/html/issues/10192" rel="">I’ve opened an issue against the HTML spec</a><span>, and patched this in Ladybird in the meantime by adding a null check.</span></p><p>Finding spec bugs is actually one of my favorite things while working on Ladybird. It allows us to improve the specs for everyone by submitting a bug report or fix.</p><p><a href="https://github.com/SerenityOS/serenity/commit/ad843b6e4a4404a4897b587711f9ce97a4504ed0" rel="">(Fix committed here.)</a></p><p>When opening the next page, it just wouldn’t finish loading. It just sat there chewing 100% CPU.</p><p>Here’s the reduction:</p><pre><code>&lt;div id="one"&gt;&lt;/div&gt;&lt;div id="two"&gt;&lt;/div&gt;
&lt;script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;two.before(one);
&lt;/script&gt;</code></pre><p><span>This was a mistake in the implementation of </span><code>before()</code><span>, which has to find the first preceding sibling of </span><code>&lt;div id=”two”&gt;</code><span> that isn’t one of its arguments (i.e </span><code>&lt;div id=”one”&gt;</code><span> in this case.) We had the following loop mistake in the implementation:</span></p><pre><code>while (auto previous_sibling = node-&gt;previous_sibling()) {
&nbsp; &nbsp; // check if previous_sibling is one of the arguments
}</code></pre><p><span>The problem here is that we kept fetching </span><code>node-&gt;previous_sibling</code><span>, instead of continuing to follow the sibling chain via </span><code>previous_sibling-&gt;previous_sibling</code><span>.</span></p><p>Here’s how I fixed it:</p><pre><code>for (auto sibling = node-&gt;previous_sibling(); sibling; sibling = sibling-&gt;previous_sibling()) {

&nbsp; &nbsp; // check if previous_sibling is one of the arguments

}</code></pre><p><a href="https://github.com/SerenityOS/serenity/commit/35f359c51c787153cd17c7289664ab87146241ea" rel="">(Fix committed here.)</a></p><p>This can probably go on for quite some time, so let’s call it a day. We found five real bugs, one of which was a spec bug, and were able to fix all of them.</p><p>Even though things went basically as I expected, it’s still quite interesting just how quickly we fall apart when confronted with strange and unexpected inputs. Fuzzers like Domato are an amazing resource for anyone who wants to make their software more robust.</p><p>The next step here will be to get Ladybird to the point where we can handle a sustained onslaught of fuzzed inputs. And once it’s reasonably stable, we can start running it automatically in the cloud somewhere, and hopefully shake out even more issues.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Rising Price of Power in Chips (101 pts)]]></title>
            <link>https://semiengineering.com/the-rising-price-of-power-in-chips/</link>
            <guid>39724966</guid>
            <pubDate>Sat, 16 Mar 2024 11:35:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://semiengineering.com/the-rising-price-of-power-in-chips/">https://semiengineering.com/the-rising-price-of-power-in-chips/</a>, See on <a href="https://news.ycombinator.com/item?id=39724966">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

					<p>Power is everything when it comes to processing and storing data, and much of it isn’t good.&nbsp;Power-related issues, particularly heat, dominate chip and system designs today, and those issues are widening and multiplying.</p>
<p>Transistor density has reached a point where these tiny digital switches are generating more heat than can be removed through traditional means. That may sound manageable enough, except it has created a slew of new problems that require the entire industry to solve — EDA companies, process equipment makers, fabs, packaging houses, field-level monitoring and analytics providers, materials suppliers, research groups, etc.</p>
<p>Underlying all of this activity is a continued focus on packing more transistors into a fixed area, and an associated and accelerating battle with leakage power. <a href="https://semiengineering.com/knowledge_centers/integrated-circuit/transistors/3d/finfet-3/">FinFETs</a>&nbsp;solved leaky gate issues at 16/14nm, but the problem resurfaced just two nodes later. At 3nm, a totally different transistor structure is being introduced with&nbsp;<a href="https://semiengineering.com/knowledge_centers/integrated-circuit/transistors/3d/gate-all-around-fet/">gate-all-around FETs</a>&nbsp;(a.k.a. nanosheets), which make design, metrology, inspection, and test significantly more challenging and expensive. At 2nm/18A, power delivery will begin flipping from the frontside of a chip to the backside to alleviate routing issues for even getting sufficient power to transistors, and beyond that the industry is likely to change its transistor structure once again to&nbsp;<a href="https://semiengineering.com/knowledge_centers/integrated-circuit/transistors/3d/cfet/">compound FETs</a> (CFETs). These are a lot of process and structural changes in a short time window, and each new node will include more issues that need to be tackled.</p>
<p>For example, a growing concern in high-density chips and packages is transient thermal gradients. They can move in unpredictable ways, sometimes very quickly and other times not, and they can vary based upon the workload. At 40nm, using thicker dielectrics and substrates, and more relaxed pitches, these were considered annoyances. With today’s leading-edge process technology, all of this needs to be taken much more seriously.</p>
<p>“The base leakage is lower than the previous technology, but the overall total power is higher,” said Melika Roshandell, product management director at <a href="https://semiengineering.com/entities/cadence-design-systems/">Cadence</a>. “So at the end of the day, your thermal is going to be worse because you’re packing a lot more transistors into one IC and you’re pushing the performance. You want to go to higher and higher frequencies, and to do that you’re increasing the voltage, you’re increasing the power. And now your total power is more than the previous generation, so your thermal is going to be worse. Not only that, when you go to a lower node, your area is also shrinking. That area shrinkage and increase in total power is going to be a recipe sometimes for disaster for your thermal, and you’re not going to meet your performance because your thermal is going to hit a lot faster than what you were expecting.”</p>
<p><img fetchpriority="high" decoding="async" src="https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-13-at-12.23.10%E2%80%AFPM.png?resize=980%2C864&amp;ssl=1" alt="" width="980" height="864" srcset="https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-13-at-12.23.10 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?w=980&amp;ssl=1 980w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-13-at-12.23.10 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=300%2C264&amp;ssl=1 300w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-13-at-12.23.10 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=768%2C677&amp;ssl=1 768w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-13-at-12.23.10 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=600%2C529&amp;ssl=1 600w" sizes="(max-width: 980px) 100vw, 980px" data-recalc-dims="1"><br>
<strong>Fig. 1: Thermal-mechanical co-simulation of 3D-IC design under operation. Source: Cadence</strong></p>
<p>Heat is becoming every hardware engineer’s shared nightmare, and it sets up some vicious cycles that are difficult to break and to model up front:</p>
<ul>
<li>Heat accelerates the breakdown of dielectric films (time-dependent dielectric breakdown, or TDDB) used to safeguard signals, and it adds mechanical stress, which can cause warping.</li>
<li>It accelerates electromigration and other aging effects, which can shrink data paths. That adds more heat due to higher resistance in circuits and an increase in energy required to drive those signals, until they are re-routed (if possible).</li>
<li>It can impact the speed at which memory operates, slowing overall performance of a system.</li>
<li>It creates noise, which impacts signal integrity. That noise can be transient, too, which makes partitioning much more difficult.</li>
</ul>
<p>All of these factors can shorten the lifespan of a chip, or even a portion of a chip. “Thermally degrading transistors can easily make or break a chip or IP,” said Pradeep Thiagarajan, principal product manager for analog and mixed-signal verification solutions at <a href="https://semiengineering.com/entities/mentor-a-siemens-business/">Siemens EDA</a>. “Fortunately, self-heating analysis of most devices can be done to assess the impact of localized heating on a design by means of a transient measurement for every MOS device, followed by loading that temperature delta data and assessing the impact of the waveforms. Now, novelty is required across the board, given increasing data transfer rate requirements. So the better every thermal interface material is modeled, the higher the chances of addressing those effects and making any appropriate design changes to avoid a short-term or long-term hardware failure. The net is that you need novel thermal solutions, but you also have to model it properly.”</p>
<p><strong>Power issues abound</strong><br>
Many chipmakers are just starting to wrestle with these issues, because most chips are not developed at the most advanced processes. But as chips increasingly become collections of chiplets, everything will have to be characterized and operate under conditions that are foreign to planar chips developed at 40nm or higher.</p>
<p>What is not always obvious is that increasing transistor density, whether in a single chip or inside an advanced package, isn’t necessarily the biggest knob to turn for boosting performance. It does, however, increase the power density, which limits the clock frequency. As a result, many of the big improvements are peripheral to the transistors themselves. Those include hardware-software co-design, faster PHYs and interconnects, new materials for insulation and electron mobility, more accurate pre-fetch with shorter recovery times for misses, sparser algorithms, and new power delivery options.</p>
<p>“The understanding of the full system stack is really important,” said Vincent Risson, senior principal CPU architect at <a href="https://semiengineering.com/entities/arm/">Arm</a>. “The computer, of course, has an important contribution to the power, but the rest of the system is also very important. That’s why we have different levels of cache, and the size of the cache is different. We have increased that over the last generation because it’s better to have something local so that the power downstream sees compute as local. And as we scale to 3D, we can imagine having 3D stacked caches, which is an opportunity to basically reduce data movement and improve efficiency.”</p>
<p>The key is to add efficiencies into every aspect of the design cycle, and not just for the hardware. While the chip industry has been talking about hardware-software co-design for the past couple decades, systems companies have prioritized that approach with their custom-designed micro-architectures, and mobile devices are looking to extend battery life significantly further for competitive reasons.</p>
<p>“There is a lot of tuning to extract more, and that’s a big focus for the CPU,” said Risson. “We are continuing to make improvements in all the pre-fetch engines, for example, to improve the accuracy of that and to reduce the downstream traffic. So we have better coverage, but we also initiate less traffic on the interconnect.”</p>
<p>That’s one piece of the puzzle, but more are required. Consider the breakdown of dielectric films over time, for example. It can be accelerated by different workloads or operating conditions, particularly inside a package filled with chiplets. “TDDB is a problem because we have so many signals and so many polygon nets running on different voltages,” said Norman Chang, fellow and chief technologist for <a href="https://semiengineering.com/entities/ansys/">Ansys’</a> Electronics, Semiconductor, and Optics business unit. “If you have a net next to a signal net with a different voltage, then the dielectric will see different voltages. As time goes on, you will see a time-dependent dielectric breakdown. This is a new problem, and we need to come up with a solution for it.”</p>
<p><strong>Inconsistencies</strong><br>
Thermal gradients are another challenge, particularly when they are transient, varying greatly from one workload to another. This problem is particularly acute in <a href="https://semiengineering.com/knowledge_centers/packaging/advanced-packaging/2-5d-ic/">2.5D</a>, where it can cause warpage, and in <a href="https://semiengineering.com/knowledge_centers/packaging/advanced-packaging/3d-ics/">3D-ICs</a>, which are expected to roll out sometime in the next couple years. In both cases, heat can become trapped, creating a snowball effect.</p>
<p><img decoding="async" src="https://i0.wp.com/semiengineering.com/wp-content/uploads/Ansys_Thermal-Management-in-3D-IC-fig1-Thermal-and-Warpage-3DIC-1.png?resize=549%2C480&amp;ssl=1" alt="" width="549" height="480" srcset="https://i0.wp.com/semiengineering.com/wp-content/uploads/Ansys_Thermal-Management-in-3D-IC-fig1-Thermal-and-Warpage-3DIC-1.png?w=549&amp;ssl=1 549w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Ansys_Thermal-Management-in-3D-IC-fig1-Thermal-and-Warpage-3DIC-1.png?resize=300%2C262&amp;ssl=1 300w" sizes="(max-width: 549px) 100vw, 549px" data-recalc-dims="1"><br>
<strong>Fig. 2: Thermal and mechanical analysis results showing temperature gradients on 2.5D IC, including warpage at 245°C. Source: Ansys</strong></p>
<p>“If you look at the power consumption in a 3D-IC, it’s very much related to temperature,” said Chang. “When the temperature increases, the leakage power will increase, and the thermal gradient distribution is the center of the multi-physics interaction in a 3D-IC. Temperature will affect power, but it also will affect the resistance. The resistance will increase when the temperature increases, and that also will affect the dielectric constant. That will affect the signal integrity and the power integrity, and it will affect the stress. And when you are mixing digital and analog in a 3D-IC, the analog is more sensitive to stress. You have to know where is the thermal gradient, where is the thermal hotspot, because you have to move the analog components away from the hotspot. If you see a thermal cycling for the analog component, you will speed up the aging of the device, you will start seeing a transistor mismatch, and the efficiency of the analog circuit will decline rapidly compared to the digital logic.”</p>
<p>And this is just getting started. Kenneth Larsen, senior director of product management at <a href="https://semiengineering.com/entities/synopsys-inc/">Synopsys</a>, noted that getting the placement wrong for various elements in stacked die can create unexpected issues such as thermal cross-talk, which also can degrade overall performance. “We’ve gone from monolithic to chiplet-based design, which is disaggregated, and now these devices are getting closer and can influence each other. When you put one device on top of another, how does the heat escape? This is a big challenge. With 3D-ICs, the first concern is can you build systems with structural integrity. But you also have other mechanical, thermal, and power concerns — the whole shebang.”</p>
<p>In the past, the simplest approach to managing heat was to lower the voltage. That approach is starting to run out of steam, because at extremely low voltages the slightest irregularity can cause problems. “Noise is a topic for very low power technologies, like near-threshold or sub-threshold devices, as well as for high-power devices,” said Roland Jancke, design methodology head in <a href="https://semiengineering.com/entities/fraunhofer-iis-eas/">Fraunhofer IIS’</a> Engineering of Adaptive Systems Division. “It’s also a topic that is hardly understood because it typically does not appear in simulation. It appears later on in the real world, and then you have to understand it and cope with it.”</p>
<p>Cross coupling, for example, can create noise in the substrate, but that isn’t always obvious in the design phase. “We started some years ago with a substrate simulator to figure out what are the cross couplings across a substrate,” said Jancke. “You’re thinking about a single device and the neighboring devices. You don’t think about the cross coupling at the input stage, which is far away, but it’s coupled through the substrate.”</p>
<p>These types of issues can cause problems in DRAM, as well, particularly as bit cell density increases, which also makes it more susceptible to noise. “There’s definitely thermal noise,” said Onur Mutlu, professor of computer science at ETH Zurich. “Also, when you access a cell, you’re creating a noise in the structure because of the electrical interference caused by the toggling of wires, for example, or the access transistor. That activation causes noise, and this leads to some reliability issues. We call it cell-to-cell interference. The row hammer problem is just one example of that. You’re activating one row and causing disturbance in adjacent rows. RowPress is another example, where you keep one row open for a longer period of time, and this disturbs what’s happening in other rows adjacent to it. This sort of cell interference is getting more prevalent as we reduce the size of each cell and put cells closer to each other and increase density. You can get silent data corruption, and that may be what’s happening in the field.”</p>
<p>With power, there are always unexpected issues. “For whatever clock frequency you’re running at, you’d like to run it at the lowest voltage possible, because that’s where you’re going to use the least amount of energy,” said Barry Pangrle, power architect at <a href="https://semiengineering.com/entities/movellus/">Movellus</a>. “There’s a certain amount you can model, but as with any models, sometimes you have surprises. I can take a chip, run it under different conditions, and I can play around with the voltage and frequency and get an idea of where it will work under different workloads. ‘Okay, I can use these points, and if I want to be a little bit more conservative, I can always back off a bit and put in a little bit of margin.’ But people aren’t going to do that for every chip. So do you create bins and say, ‘Okay the ones that fall in this category we’ll run at this clock and this voltage?’ Then, some of the granularity will be left up to whoever is selling that chip.”</p>
<p><strong>Other issues</strong><br>
There also is a monetary aspect to power, and that spans everything from the resources required to create a complex design, to the amount of power consumed in a data center. The higher the transistor density, the more energy it takes to power up and cool down a rack of servers. And with various flavors of AI, the goal is to maximize transistor utilization, which in turn consumes more power, generating more heat and requiring more cooling.</p>
<p>“These applications are drawing huge amounts of power, and they’re exponentially rising,” said Noam Brousard, vice president of engineering solutions at <a href="https://semiengineering.com/entities/proteantecs/">proteanTecs</a>. “Efficient power consumption will eventually translate into significant savings in the data center. That’s number one. Aside from that, we also have the environmental impact. And, we want to extend the lifetime of the electronics.”</p>
<p><img decoding="async" src="https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-12-at-1.06.50%E2%80%AFPM.png?resize=2368%2C1060&amp;ssl=1" alt="" width="2368" height="1060" srcset="https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-12-at-1.06.50 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?w=2368&amp;ssl=1 2368w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-12-at-1.06.50 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=300%2C134&amp;ssl=1 300w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-12-at-1.06.50 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=1024%2C458&amp;ssl=1 1024w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-12-at-1.06.50 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=768%2C344&amp;ssl=1 768w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-12-at-1.06.50 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=1536%2C688&amp;ssl=1 1536w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-12-at-1.06.50 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=2048%2C917&amp;ssl=1 2048w, https://i0.wp.com/semiengineering.com/wp-content/uploads/Screenshot-2024-03-12-at-1.06.50 https://semiengineering.com/the-rising-price-of-power-in-chips/PM.png?resize=600%2C269&amp;ssl=1 600w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"><br>
<strong>Fig. 3: Impact of power on chips. Source: proteanTecs</strong></p>
<p>Nor are power-related effects confined just to a chip. “With 2.5D, thermal stress is going to cause warpage, and because of that you run the risk of breaking the balls that connect the substrate to the PCB,” said Cadence’s Roshandell. “If it cracks, you get a short, and then your product is not going to work. So how you address that, and how you model it, is important. It has to happen in the earliest stages of the design where can envision it and do something about it.”</p>
<p>Things get even more complex in 3D-ICs. Once again, the emphasis is on sizing up the problems early in the design cycle, but in 3D-ICs there are additive effects. “Dynamic switching power is really tricky for 3D-ICs compared to an SoC,” said Ansys’ Chang. “We have to consider the physical architecture as early as possible, because if you have 15 chiplets in a 3D-IC, how do you partition the power among the 15 chiplets for dynamic workflow and time dimension? At a different time you may have a different workload on that chiplet, and that may create a thermal hotspot. But if the top die has a local hotspot and the bottom die also has a local hotspot, if the two local hotspots line up at a certain time, then that hotspot will become a global thermal hotspot. It may be 10 or 15 degrees hotter than the local hotspot if the other die is not switching. This caught 3D-IC circuit designers completely off guard, because when you run emulation for a chiplet in a 3D-IC, you probably cannot run an emulation for the whole 3D-IC with a realistic workflow.”</p>
<p>The problem is that there are so may dependencies that everything needs to be understood in context of something else. “There is no way you can optimize these devices independent of each other,” said Niels Faché, vice president and general manager for <a href="https://semiengineering.com/entities/keysight-technologies/">Keysight’s</a> design and simulation portfolio. “You might have an objective around thermal, such as maximum temperature, heat dissipation, but you need to understand that in the context of mechanical stress. You have to be able to model these individual physical effects. If they are very tightly coupled, you have to do it in the form of a co-simulation. We do that, for example, with an electro-thermal simulation. So when you look at the current that flows through a transistor, it’s going to have an effect on heat. Then, heat has an impact on electrical characteristics, which changes the electrical behavior, and you have to model those interactions.”</p>
<p><strong>Solutions</strong><br>
There is no single, comprehensive solution for power-related issues, but there are plenty of partial ones.</p>
<p>One approach, and probably the simplest, is to limit overdesign. “It all starts with focusing on the target use cases and defining the necessary features to address them,” said Steven Woo, <a href="https://semiengineering.com/entities/rambus-inc/">Rambus</a> fellow and distinguished inventor. “It’s tempting to add features here and there to address other potential markets and use cases, but that often leads to increased area, power, and complexities that can hurt performance for the main applications of the chip. All features must be looked at critically and judged in an almost ruthless manner to understand if they really need to be in the chip. Each new feature impacts PPA, so maintaining focus on the target markets and use cases is the first step.”</p>
<p>This can have a significant impact on the overall power consumption, particularly with AI. “In AI there are many options to consider, especially for edge devices,” Woo said. “Some options include how the chip will be powered, thermal constraints, if it needs to support training and/or inference, accuracy requirements, the environment in which the chip will be deployed, and supported number formats just to name a few. Supporting large feature sets means increasing area and power, and the added complexity of gating off features when they aren’t in use. And with data movement impacting performance and consuming large amounts of the power budget, designers need a good understanding of how much data needs to be moved to develop architectures that minimize data movement at the edge.”</p>
<p>Another approach is to run real workloads on a design. “What some customers are doing is saying, ‘Let’s run representative workloads because we don’t know what we don’t know,” said William Ruby, senior director of product management for low power solutions at Synopsys. “It’s like power coverage. ‘What do we believe is a sustained worst case? What do we believe is a good idle type of workload?’ But what they don’t know is how a new software update may change the entire activity profile. Hopefully it’s an incremental change and they’ve somehow budgeted for that, as opposed to being pessimistic and a little bit more conservative. But how do you predict what’s going to happen with a firmware update?”</p>
<p>Backside power delivery is another option, particularly at the most advanced nodes. “At some point you hit diminishing returns because you’ve got the stuff from the top layers down to the bottom, and a lot of time the stuff in the top layers is your power and ground routing,” said Movellus’ Pangrle. “If you can deliver that from the backside, and you don’t have to go through 17 metal layers up top, that’s a lot of layers you don’t have to go through. Being able to bypass that whole metal stack and come in the back door so you can be closer to the transistors and not have to worry about going through all those vias is like manufacturing magic.”</p>
<p>Using sensors inside of chips and packages to monitor changes in power-related behavior is yet another approach. “In the field there are many things that can degrade performance, so we have to bake in voltage guard-bands,” said proteanTecs’ Brousard. “We know there will be noise. We know there will be excessive workloads. We know that the chip will go through aging. All these factors force us to apply more voltage than is necessary in best-case VDD<sub>min</sub>.”</p>
<p>On top of that, copper wires can be used to conduct heat to where it can be dissipated. “You can do simple things like optimizing TSV placement with stacked die, and you may be able to use thermal vias, as well,” said Synopsys’ Larsen. “It’s very complex, but we have always dealt in exponentials in EDA. It’s things we will go and solve. But when you want to mitigate something, you add something that takes away some of the values you’re looking for, and that has to be addressed. For reliability, you may add in redundancies, which could be TSVs or hybrid bonds in the stack.”</p>
<p><strong>Conclusion</strong><br>
Power has been a problem for leading-edge chipmakers for the past couple decades. A smart phone will send out a warning that it is running too hot and shut down until it cools off, and a rack of servers may shift a load to another rack for the same reason. But chips increasingly are decomposed into various components and packaged together, and as industries such as automotive begin developing chips at 5nm and below, power issues will fan out in all directions.</p>
<p>Architecture, place-and-route, signal integrity, heat, reliability, manufacturability, and aging are all tightly coupled with power. And as the chip industry continues to combine different features in unique ways to address unique markets, the entire industry will need to learn how to work with or around power-related effects. Unlike in the past, when only the highest-volume chipmakers were concerned with power, it will be the rarer design that can ignore it.</p>
<p>—Ann Mutschler and Karen Heyman contributed to this report.</p>
<p><em><strong>Related Reading</strong><br>
<a href="https://semiengineering.com/next-gen-power-integrity-challenges/">Next-Gen Power Integrity Challenges</a><br>
Dealing with physical and electrical effects in advanced nodes and stacked die.<br>
<a href="https://semiengineering.com/backside-power-delivery-adds-new-thermal-concerns/">Backside Power Delivery Adds New Thermal Concerns</a><br>
Lack of shielding, routing issues, and new mechanical stresses could have broad impact on standard cell design.<br>
<a href="https://semiengineering.com/3d-ics-may-be-the-least-cost-option/">3D-ICs May Be The Least-Cost Option</a><br>
Advanced packaging has evolved from expensive custom solutions to those ready for more widespread adoption.</em></p>

					<br>

				</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla will be retiring the Mozilla Location Service (184 pts)]]></title>
            <link>https://github.com/mozilla/ichnaea/issues/2065</link>
            <guid>39724505</guid>
            <pubDate>Sat, 16 Mar 2024 09:41:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/mozilla/ichnaea/issues/2065">https://github.com/mozilla/ichnaea/issues/2065</a>, See on <a href="https://news.ycombinator.com/item?id=39724505">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-turbo-body="">
      


    <div>
      <p><a href="#start-of-content">Skip to content</a>
      <span data-view-component="true">
    <span data-view-component="true"></span>
</span></p><react-partial partial-name="keyboard-shortcuts-dialog" data-ssr="false">
  
  
  
</react-partial>



      

        

            


<header role="banner" data-color-mode="light" data-light-theme="light" data-dark-theme="dark">
  

  <div>
          <nav aria-label="Global">
            <ul>
                <li>
      
      <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Actions&quot;,&quot;label&quot;:&quot;ref_cta:Actions;&quot;}" href="https://github.com/features/actions">
      
      <div>
        <p>Actions</p><p>
        Automate any workflow
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Packages&quot;,&quot;label&quot;:&quot;ref_cta:Packages;&quot;}" href="https://github.com/features/packages">
      
      <div>
        <p>Packages</p><p>
        Host and manage packages
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Security&quot;,&quot;label&quot;:&quot;ref_cta:Security;&quot;}" href="https://github.com/features/security">
      
      <div>
        <p>Security</p><p>
        Find and fix vulnerabilities
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Codespaces&quot;,&quot;label&quot;:&quot;ref_cta:Codespaces;&quot;}" href="https://github.com/features/codespaces">
      
      <div>
        <p>Codespaces</p><p>
        Instant dev environments
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Copilot&quot;,&quot;label&quot;:&quot;ref_cta:Copilot;&quot;}" href="https://github.com/features/copilot">
      
      <div>
        <p>Copilot</p><p>
        Write better code with AI
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Code review&quot;,&quot;label&quot;:&quot;ref_cta:Code review;&quot;}" href="https://github.com/features/code-review">
      
      <div>
        <p>Code review</p><p>
        Manage code changes
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Issues&quot;,&quot;label&quot;:&quot;ref_cta:Issues;&quot;}" href="https://github.com/features/issues">
      
      <div>
        <p>Issues</p><p>
        Plan and track work
      </p></div>

    
</a></li>

                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Discussions&quot;,&quot;label&quot;:&quot;ref_cta:Discussions;&quot;}" href="https://github.com/features/discussions">
      
      <div>
        <p>Discussions</p><p>
        Collaborate outside of code
      </p></div>

    
</a></li>

            </ul>
          </div>
</li>


                <li>
      
      
</li>


                <li>
      
      <div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to GitHub Sponsors&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Sponsors;&quot;}" href="https://github.com/sponsors">
      
      <div>
        <p>GitHub Sponsors</p><p>
        Fund open source developers
      </p></div>

    
</a></li>

            </ul>
          </div>
          <div>
            <ul>
                <li>
  <a data-analytics-event="{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to The ReadME Project&quot;,&quot;label&quot;:&quot;ref_cta:The ReadME Project;&quot;}" href="https://github.com/readme">
      
      <div>
        <p>The ReadME Project</p><p>
        GitHub community articles
      </p></div>

    
</a></li>

            </ul>
          </div>
          
      </div>
</li>


                <li>
    <a data-analytics-event="{&quot;category&quot;:&quot;Header menu top item (logged out)&quot;,&quot;action&quot;:&quot;click to go to Pricing&quot;,&quot;label&quot;:&quot;ref_cta:Pricing;&quot;}" href="https://github.com/pricing">Pricing</a>
</li>

            </ul>
          </nav>

        <div>
                


<qbsearch-input data-scope="repo:mozilla/ichnaea" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="H2sHX5u6b_qygYwjVOs8l-20McarYcv_UIY_wLuDoXq2bz5ov88-UjOI8b5KgP8fTIUVbWFjZ-5sWKotmzvFYg" data-max-custom-scopes="10" data-header-redesign-enabled="false" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="mozilla/ichnaea" data-current-org="mozilla" data-current-owner="" data-logged-in="false" data-copilot-chat-enabled="false" data-blackbird-indexed-repo-csrf="<esi:include src=&quot;/_esi/rails_csrf_token_form_hidden?r=l4vxNKpZB1sFyChwoHBj7p%2FrQ9610rmXmNswCjxi%2Bnn%2Ba%2FMl6PgKXV%2FpPO8BO4e7zW2VSTs4QW7Vq%2FxNUx9rG5vR6YTIydStZcORNBF4jYzRv%2BoCCh5ulwul06wMGvoE60lkJOK1i9UA1Do8u3ssxzcBdGLsGrigPaKcmtweSSQoZW8kllZk9SjDzQMHJ6U0qwTGZkw1i675bpeLc%2FKF7%2FjXSUdlivF7%2B6mZh2QF%2BZ5rYPo5vU%2FUCay%2FuwxDtWhVqyzMZoIsAQMV%2Fklw4oxR0TuhxEpPavbrJMeKQlIDijn1adn4ChIgmlzTbSlvkvfJQ9veGjtBRwknySPC3HBdRAOsOwQWJqNbH4M2QYxLE6K7NojdddGJeuiI8Rwipeej7pO%2FxOKTo1G%2B6mi59L7I%2FNro%2Ff0xGQgcbcZH43yxdPpswbUTxOU7mElWNjopjpzDTCAL%2F4MesutLZvx2YCqxLXVPAXOH7FLsBwy9HnOAI6Wdps0g%2B6z1A2UJajC2rMzEMw2saS7DZernL5nEjkvoetsOT2IjIASIb60%3D--QOvBI2Rs5OTsjPh4--7l4m391dBkjIacfFlAMtLA%3D%3D&quot; />">
  
  
  <div>
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="feedback-dialog-title">
        Provide feedback
      </h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true">
    <div data-view-component="true">
    <p>
      <h2 id="custom-scopes-dialog-title">
        Saved searches
      </h2>
        <h2 id="custom-scopes-dialog-description">Use saved searches to filter your results more quickly</h2>
    </p>
    
  </div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        
      </scrollable-region>
      
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>

            <p><a href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&amp;source=header-repo&amp;source_repo=mozilla%2Fichnaea" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/mozilla/ichnaea/issues/2065&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="980001f8b17eea4ac32351041717f09fdf22bfec0edcbb5c9c01ff87ffec1a69" data-analytics-event="{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/<user-name>/<repo-name>/voltron/issues_fragments/issue_layout;ref_cta:Sign up;ref_loc:header logged out&quot;}">
              Sign up
            </a>
        </p></div>
      </div>
</header>

      
    </div>

  








    


    
    <include-fragment data-base-src="https://github.com/notifications/beta/shelf"></include-fragment>






  <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" data-commit-hovercards-enabled="" data-discussion-hovercards-enabled="" data-issue-and-pr-hovercards-enabled="">
    <main id="js-repo-pjax-container">
      
  


  
      
    

    






  
  <div id="repository-container-header" data-turbo-replace="">

      

        


          <nav data-pjax="#js-repo-pjax-container" aria-label="Repository" data-view-component="true">

  
    <div data-view-component="true">      <action-menu data-select-variant="none" data-view-component="true">
  <focus-group direction="vertical" mnemonics="" retain="">
    <tool-tip id="tooltip-dfb4facb-9671-4890-a4a2-a531c8b8cb15" for="action-menu-c677db56-f8db-44d0-b6de-77ca236acd88-button" popover="manual" data-direction="s" data-type="label" data-view-component="true">Additional navigation options</tool-tip>


<anchored-position id="action-menu-c677db56-f8db-44d0-b6de-77ca236acd88-overlay" anchor="action-menu-c677db56-f8db-44d0-b6de-77ca236acd88-button" side="outside-bottom" anchor-offset="normal" popover="auto" data-view-component="true">
  </anchored-position>  </focus-group>
</action-menu></div>
</nav>

  </div>

  



<turbo-frame id="repo-content-turbo-frame" target="_top" data-turbo-action="advance">
    <div id="repo-content-pjax-container" data-channel="eyJjIjoiaXNzdWU6MjE4NDU3MTExNzp0aW1lbGluZSIsInQiOjE3MTA2MDEyMDV9--62b4f47008ceced2ade9135ed7c1b5319de85e696fbef556228a35f86cc1c229" data-url="/mozilla/ichnaea/issues/2065/show_partial?partial=issues%2Ftitle&amp;sticky=true" data-gid="I_kwDOAJFJeM6CNejt" data-morpheus-enabled="false" data-pjax="" data-turbo-frame="">



          
<details>
  <summary data-ga-click="Issues, create new issue, view:issue_show location:issue_header style:button logged_in:false">
    
    New issue
  </summary>
  <details-dialog aria-label="Sign up for GitHub">
            <div>
  <p>
  <strong>Have a question about this project?</strong> Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
  </p>

  <!-- '"` --><!-- </textarea></xmp> -->
  <p>By clicking “Sign up for GitHub”, you agree to our <a href="https://docs.github.com/terms" target="_blank">terms of service</a> and
  <a href="https://docs.github.com/privacy" target="_blank">privacy statement</a>. We’ll occasionally send you account related emails.</p>

  <p>
    Already on GitHub?
    <a data-ga-click="(Logged out) New issue modal, clicked Sign in, text:sign-in" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;new issue modal&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://github.com/mozilla/ichnaea/issues/2065&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="f045e9bba9af6b1b79364b400273949959ceac629560f1dfa77780103812fae1" href="https://github.com/login?return_to=%2Fmozilla%2Fichnaea%2Fissues%2Fnew%2Fchoose">Sign in</a>
    to your account
  </p>
</div>
  </details-dialog>
</details>
        
      </div>

</turbo-frame>


    </main>
  </div>

          




    <cookie-consent id="cookie-consent-banner" data-initial-cookie-consent-allowed="" data-cookie-consent-required="true"></cookie-consent>


  

    <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default color-fg-default hx_rsm" open="">
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog="">
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

    

    <template id="snippet-clipboard-copy-button">
  <div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>
<template id="snippet-clipboard-copy-button-unpositioned">
  <div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>




    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[AutoDev: Automated AI-driven development by Microsoft (142 pts)]]></title>
            <link>https://arxiv.org/abs/2403.08299</link>
            <guid>39724356</guid>
            <pubDate>Sat, 16 Mar 2024 09:03:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arxiv.org/abs/2403.08299">https://arxiv.org/abs/2403.08299</a>, See on <a href="https://news.ycombinator.com/item?id=39724356">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content-inner">
    
    
                
    <p><a href="https://arxiv.org/pdf/2403.08299">Download PDF</a>
    <a href="https://arxiv.org/html/2403.08299v1">HTML (experimental)</a></p><blockquote>
            <span>Abstract:</span>The landscape of software development has witnessed a paradigm shift with the advent of AI-powered assistants, exemplified by GitHub Copilot. However, existing solutions are not leveraging all the potential capabilities available in an IDE such as building, testing, executing code, git operations, etc. Therefore, they are constrained by their limited capabilities, primarily focusing on suggesting code snippets and file manipulation within a chat-based interface. To fill this gap, we present AutoDev, a fully automated AI-driven software development framework, designed for autonomous planning and execution of intricate software engineering tasks. AutoDev enables users to define complex software engineering objectives, which are assigned to AutoDev's autonomous AI Agents to achieve. These AI agents can perform diverse operations on a codebase, including file editing, retrieval, build processes, execution, testing, and git operations. They also have access to files, compiler output, build and testing logs, static analysis tools, and more. This enables the AI Agents to execute tasks in a fully automated manner with a comprehensive understanding of the contextual information required. Furthermore, AutoDev establishes a secure development environment by confining all operations within Docker containers. This framework incorporates guardrails to ensure user privacy and file security, allowing users to define specific permitted or restricted commands and operations within AutoDev. In our evaluation, we tested AutoDev on the HumanEval dataset, obtaining promising results with 91.5% and 87.8% of Pass@1 for code generation and test generation respectively, demonstrating its effectiveness in automating software engineering tasks while maintaining a secure and user-controlled development environment.
    </blockquote>

    <!--CONTEXT-->
    
  </div><div>
      <h2>Submission history</h2><p> From: Michele Tufano [<a href="https://arxiv.org/show-email/d9255482/2403.08299">view email</a>]      <br>    <strong>[v1]</strong>
        Wed, 13 Mar 2024 07:12:03 UTC (273 KB)<br>
</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Affordable Wheel Based Refreshable Braille Display (224 pts)]]></title>
            <link>https://jacquesmattheij.com/refreshablebraille/BrailleDisplayProject.html</link>
            <guid>39724312</guid>
            <pubDate>Sat, 16 Mar 2024 08:52:48 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jacquesmattheij.com/refreshablebraille/BrailleDisplayProject.html">https://jacquesmattheij.com/refreshablebraille/BrailleDisplayProject.html</a>, See on <a href="https://news.ycombinator.com/item?id=39724312">Hacker News</a></p>
<div id="readability-page-1" class="page"><p><span>These are my notes on the Braille display project</span></p><p><span>Intro</span></p><p><span>On HN</span><sup><a href="#ftnt1" id="ftnt_ref1">[1]</a></sup><span>&nbsp;I came into contact with Mahmoud Al-Qudsi (</span><span><a href="mailto:mqudsi@neosmart.net">mqudsi@neosmart.net</a></span><span>) , who mentioned that he'd been working off-and-on on a braille reader that is both affordable and easy to manufacture. He sent me a some files and pointed to a patent</span><sup><a href="#ftnt2" id="ftnt_ref2">[2]</a></sup><span>&nbsp;that he took out on a device that uses octagonal wheels with codes on them, 8 to a wheel, two wheels side by side. His main frustration stemmed from the fact that in spite of dirt cheap mass produced devices with ridiculous precision an affordable braille reader simply doesn't exist. Devices are expensive, fragile and hard to get. This prompted me (Jacques) to offer my help and so we started mailing back and forth. Initially I think Mahmoud got a bit put off by my 'eager puppy enthusiasm', not hindered by any knowledge or experience I quickly ran into the limits of what is easily doable. But the sketch that Mahmoud made showed promise even if it had some serious issues which were the main reason why he never really got it to work. He abandoned the patent and seemed hopelessly stuck.</span></p><ul><li><span>some loose facts:</span></li></ul><ul><li><span>40 million blind people worldwide</span></li><li><span>lots of them in undeveloped countries</span></li><li><span>but even in developed countries access to readers is limited</span></li></ul><ul><li><span>Possibilities for economies of scale (which also lines up with actuator mechanisms)</span></li></ul><ul><li><span>per-dot</span></li></ul><ul><li><span>pins themselves</span></li><li><span>per-dot actuators</span></li></ul><ul><li><span>per-cell</span></li></ul><ul><li><span>cell housing</span></li></ul><ul><li><span>per-line</span></li></ul><ul><li><span>manufacture a whole line at once (should be cheaper than individual cells)</span></li><li><span>per-line actuators (rows and columns)</span></li></ul><ul><li><span>per-device</span></li></ul><ul><li><span></span></li><li><span>challenges</span></li></ul><ul><li><span>Braille letters were defined outside of a technological frame of reference so (fortunately) ease of use by the blind trumped any kind of acknowledgement of the technological impact of those definitions, which has a massive effect on the ease with which a Braille display can be constructed. In summary: it is a very hard mechanical problem. The size of the mechanical components is really small and the result is that standard (read: cheap) actuators all fail to satisfy the constraints placed on size and placement within the device. The result of this is that the Braille displays that are available tend to be really expensive, with the most affordable at $700 for a 40 cell 8 dot display or about $2 / dot. This price point seems to be the absolute lowest with the vast majority of the display at a fair multiple of that. Intuitively it should be possible to do *much* better than that.</span></li></ul><ul><li><span>Dimensional specifications</span><sup><a href="#ftnt3" id="ftnt_ref3">[3]</a></sup><span>&nbsp;</span></li></ul><ul><li><span>dot specifications 1.6 mm dia, 2.5 mm between dots</span></li><li><span>cell specifications 7.6 mm wide</span></li><li><span>line specifications 10 mm high</span></li></ul><ul><li><span>leverage maker scene</span></li></ul><ul><li><span>arduino's, teensy's etc</span></li><li><span>various io components</span></li><li><span>3D printers</span></li><li><span>laser cutters?</span></li></ul><ul><li><span>various possible parts</span></li></ul><ul><li><span>motors</span></li></ul><ul><li><span>motors have a downside of being power hungry and they consume a lot of space and are heavy but I don't see a way around either having a massive number of actuators or a much smaller number of motors. Either way a large number of motors or other actuators also increases cost for the drive electronics.</span></li><li><span>nema 8 (20 mm) stepper </span><span><a href="https://www.google.com/url?q=https://www.adafruit.com/product/4411&amp;sa=D&amp;source=editors&amp;ust=1709891107831374&amp;usg=AOvVaw2UwolehZWpss8ZgYSFShio">https://www.adafruit.com/product/4411</a></span><span>&nbsp;</span></li><li><span><a href="https://www.google.com/url?q=https://www.omc-stepperonline.com/nema-8-stepper-motor&amp;sa=D&amp;source=editors&amp;ust=1709891107831656&amp;usg=AOvVaw2k7YSftB7DouOhEMpDsJgf">https://www.omc-stepperonline.com/nema-8-stepper-motor</a></span><span>&nbsp;</span></li><li><span><a href="https://www.google.com/url?q=https://joy-it.net/en/products/NEMA08-03&amp;sa=D&amp;source=editors&amp;ust=1709891107831808&amp;usg=AOvVaw0r6YLRZeJUQ-oi79eI_cp6">https://joy-it.net/en/products/NEMA08-03</a></span><span>&nbsp;</span></li><li><span><a href="https://www.google.com/url?q=https://nl.aliexpress.com/w/wholesale-nema-8-stepper-motor.html?g%3Dy%26SearchText%3Dnema%2B8%2Bstepper%2Bmotor%26sortType%3Dprice_asc&amp;sa=D&amp;source=editors&amp;ust=1709891107831991&amp;usg=AOvVaw0qhWnHQzR2hKxa_Y38LsUV">https://nl.aliexpress.com/w/wholesale-nema-8-stepper-motor.html?g=y&amp;SearchText=nema+8+stepper+motor&amp;sortType=price_asc</a></span><span>&nbsp;</span></li><li><span>RC servos</span></li><li><span><a href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3D2vAoOYF3m8U&amp;sa=D&amp;source=editors&amp;ust=1709891107832186&amp;usg=AOvVaw16-jNLjsB126En45IIN3TW">https://www.youtube.com/watch?v=2vAoOYF3m8U</a></span><span>&nbsp;linear RC servo</span></li></ul><ul><li><span>Dot Actuators</span></li></ul><ul><li><span>ballpoint pen like mechanism</span></li></ul><ul><li><span>pros</span></li></ul><ul><li><span>cheap</span></li><li><span>locks in place</span></li><li><span>once locked zero power consumption</span></li></ul><ul><li><span>cons</span></li></ul><ul><li><span>noisy</span></li><li><span>bulky</span></li></ul><ul><li><span>voice coils</span></li><li><span>piezo</span></li><li><span>wax (expansion) based</span></li><li><span>jack (screw) based raise &amp; lower</span></li><li><span>cams per row or column</span></li><li><span>2d + z per-dot actuator ('x/y addressable push</span></li><li><span>plastic slide with some actuator mechanism attached</span></li></ul><ul><li><span>magnets</span></li></ul><ul><li><span><a href="https://www.google.com/url?q=https://www.magnetenspecialist.nl/winkel/schijfmagneten/schijfmagneet-2-x-2-mm/&amp;sa=D&amp;source=editors&amp;ust=1709891107833365&amp;usg=AOvVaw3LGU5e3Rv7GadZy-6jSGxq">https://www.magnetenspecialist.nl/winkel/schijfmagneten/schijfmagneet-2-x-2-mm/</a></span><sup><a href="#cmnt1" id="cmnt_ref1">[a]</a></sup><sup><a href="#cmnt2" id="cmnt_ref2">[b]</a></sup><span>&nbsp;</span></li><li><span><a href="https://www.google.com/url?q=https://www.supermagnete.nl/eng/disc-magnets-neodymium/disc-magnet-1mm-1mm_S-01-01-N&amp;sa=D&amp;source=editors&amp;ust=1709891107833775&amp;usg=AOvVaw0JFqXlnM-_x2tGo-vOv929">https://www.supermagnete.nl/eng/disc-magnets-neodymium/disc-magnet-1mm-1mm_S-01-01-N</a></span><span>&nbsp; </span></li><li><span><a href="https://www.google.com/url?q=https://www.guysmagnets.com/neodymium-magnets-c11/2-mm-x-1-mm-n38-grade-disk-pack-of-100-p29404&amp;sa=D&amp;source=editors&amp;ust=1709891107833951&amp;usg=AOvVaw2-lejY9HhfdjHj1IBOGcn7">https://www.guysmagnets.com/neodymium-magnets-c11/2-mm-x-1-mm-n38-grade-disk-pack-of-100-p29404</a></span><span>&nbsp;</span></li></ul><ul><li><span>Different ways of achieving the display</span></li></ul><ul><li><span><a href="https://www.google.com/url?q=https://www.youtube.com/watch?app%3Ddesktop%26v%3DrjWfIiaOFR4&amp;sa=D&amp;source=editors&amp;ust=1709891107834293&amp;usg=AOvVaw1Gathwy6eYpkj2cFn0gJcs">https://www.youtube.com/watch?app=desktop&amp;v=rjWfIiaOFR4</a></span><span>&nbsp;mechanical odometer counter like mechanism to drive the cells, each row in a cell would be one wheel, with a cam driving the dot pins up or down as required.</span></li><li><span></span></li></ul><ul><li><span>Mahmoud's design</span></li></ul><ul><li><span>very interesting, clever use of both materials and space, lots of ideas that I have not seen elsewhere or done much worse elsewhere &nbsp; &nbsp; </span></li></ul><ul><li><span>I like the vertical use of the wheels because it means the motion of the readers finger does not immediately result in the wheels moving even if they are not locked</span></li><li><span>complex and expensive drive train, I especially do not like the clutches</span></li><li><span>there is no re-use of pattern partials so you need a full 360 which makes a side drive a necessity</span></li><li><span>complex mechanical linkages</span></li><li><span>some pretty expensive parts such as miniature worm gears</span></li><li><span>not very wear proof</span></li><li><span>many single points of failure</span></li><li><span>very high manufacturing precision required</span></li><li><span>looks fragile</span></li><li><span>hard to service</span></li><li><span>but: if you can get it to work probably still cheaper than anything on the market</span></li></ul><ul><li><span></span></li><li><span>external resources</span></li></ul><ul><li><span><a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Refreshable_braille_display&amp;sa=D&amp;source=editors&amp;ust=1709891107835247&amp;usg=AOvVaw0PJ2TsjIO4wQfxwBRCI1NK">https://en.wikipedia.org/wiki/Refreshable_braille_display</a></span><span>&nbsp;</span></li><li><span><a href="https://www.google.com/url?q=https://up.codes/s/braille&amp;sa=D&amp;source=editors&amp;ust=1709891107835412&amp;usg=AOvVaw0CHA_-AK2Y5yer9ak_Y-Pt">https://up.codes/s/braille</a></span><span>&nbsp;</span></li><li><span>online Braille encoder </span><span><a href="https://www.google.com/url?q=https://www.brailletranslator.org/&amp;sa=D&amp;source=editors&amp;ust=1709891107835543&amp;usg=AOvVaw3hp6mrqxH5pnaeS1RLO4pJ">https://www.brailletranslator.org/</a></span><span>&nbsp;</span></li><li><span><a href="https://www.google.com/url?q=https://tsapps.nist.gov/publication/get_pdf.cfm?pub_id%3D151464&amp;sa=D&amp;source=editors&amp;ust=1709891107835689&amp;usg=AOvVaw0z7XPBlAPaClThDfNesp2d">https://tsapps.nist.gov/publication/get_pdf.cfm?pub_id=151464</a></span><span>&nbsp;</span></li><li><span></span></li></ul><ul><li><span>products on the market already</span></li></ul><ul><li><span>An overview article on the American Foundation for the Blind website: </span><span><a href="https://www.google.com/url?q=https://www.afb.org/node/16207/refreshable-braille-displays&amp;sa=D&amp;source=editors&amp;ust=1709891107835936&amp;usg=AOvVaw219EYUb3ptGdN4Bq9YXpf6">https://www.afb.org/node/16207/refreshable-braille-displays</a></span><span>&nbsp;interestingly, it quotes $3500 to $15000 for the devices but does not have the Orbit 20 on it </span><span>which seems strange as that one is priced very competitively</span><sup><a href="#cmnt3" id="cmnt_ref3">[c]</a></sup><sup><a href="#cmnt4" id="cmnt_ref4">[d]</a></sup><span>&nbsp;compared to the ones that they do list.</span></li><li><span>The Orbit 20</span></li></ul><ul><li><span><a href="https://www.google.com/url?q=http://www.orbitresearch.com/product/orbit-reader-20/&amp;sa=D&amp;source=editors&amp;ust=1709891107836275&amp;usg=AOvVaw2UEyrij1kOBhuH8lbeH-kF">http://www.orbitresearch.com/product/orbit-reader-20/</a></span><span>&nbsp;</span></li><li><span><a href="https://www.google.com/url?q=https://nfb.org/sites/default/files/images/nfb/publications/bm/bm17/bm1709/bm170912.htm&amp;sa=D&amp;source=editors&amp;ust=1709891107836438&amp;usg=AOvVaw17hmElNDJ_btFJrkTu0K95">https://nfb.org/sites/default/files/images/nfb/publications/bm/bm17/bm1709/bm170912.htm</a></span></li><li><span><a href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3DUMtuYVHIfog&amp;sa=D&amp;source=editors&amp;ust=1709891107836569&amp;usg=AOvVaw3fKg7rfDs77FeQO79eny2I">https://www.youtube.com/watch?v=UMtuYVHIfog</a></span><span>&nbsp;video which shows the display refreshing</span></li><li><span>17x11x3 cm</span></li></ul><ul><li><span>The 'Gold Standard' </span><span><a href="https://www.google.com/url?q=https://lexima-reinecker.nl/brailliant-bi-40x/&amp;sa=D&amp;source=editors&amp;ust=1709891107836749&amp;usg=AOvVaw3TjTRDTF1hgDc5p9tn1kXm">https://lexima-reinecker.nl/brailliant-bi-40x/</a></span><span>&nbsp;(about 3500 euros)</span></li><li><span><a href="https://www.google.com/url?q=https://www.techno-vision.co.uk/product/canute-360/&amp;sa=D&amp;source=editors&amp;ust=1709891107836909&amp;usg=AOvVaw2mmaiCCAtaiWLfjdU3j0Mt">https://www.techno-vision.co.uk/product/canute-360/</a></span><span>&nbsp;The Canute, 1900 pounds for the number of cells that's very cheap. Super noisy, terribly slow but it works. Update: It looks like it uses Mahmoud's wheels!</span></li><li><span>Baum 'David' </span><span><a href="https://www.google.com/url?q=https://upload.wikimedia.org/wikipedia/commons/9/98/Baum_David_System_90_%2528cropped%2529.jpg&amp;sa=D&amp;source=editors&amp;ust=1709891107837095&amp;usg=AOvVaw3rud2JOTd_iClMzDMtNfJk">https://upload.wikimedia.org/wikipedia/commons/9/98/Baum_David_System_90_%28cropped%29.jpg</a></span><span>&nbsp;</span></li></ul><ul><li><span>Interesting projects&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li></ul><ul><li><span>This one definitely rates a mention, Radek posted it in the chat, I had discarded it because 'non conformant' braille size but let's keep it because of the sheer innovation: </span></li></ul><p><span><a href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3DBXi1tG78AW4%26ab_channel%3DVijayVarada&amp;sa=D&amp;source=editors&amp;ust=1709891107837386&amp;usg=AOvVaw0Uos_MA_sBW4FBeNHB-AIe">https://www.youtube.com/watch?v=BXi1tG78AW4&amp;ab_channel=VijayVarada</a></span><span>&nbsp;The essence is an excentric with two states per pixel.</span></p><ul><li><span><a href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3DsBBqdEnZPck&amp;sa=D&amp;source=editors&amp;ust=1709891107837565&amp;usg=AOvVaw38VfYPwudiJw5bJLAQxzgC">https://www.youtube.com/watch?v=sBBqdEnZPck</a></span><span>&nbsp;fascinating wheel driven display, such incredible mechanical complexity.</span></li></ul><p><span><a href="https://www.google.com/url?q=https://nfb.org/sites/default/files/images/nfb/publications/bm/bm17/bm1709/bm170912.htm&amp;sa=D&amp;source=editors&amp;ust=1709891107837838&amp;usg=AOvVaw3OQ7_30YqE6CeqU-68FJ17">https://nfb.org/sites/default/files/images/nfb/publications/bm/bm17/bm1709/bm170912.htm</a></span></p><p><span>Challenges</span></p><ul><li><span>this is a complex undertaking that will require</span></li></ul><ul><li><span>electronics</span></li><li><span>mechanical parts</span></li><li><span>electro magnetics</span></li><li><span>extreme precision because of the size of the output</span></li><li><span>software</span></li></ul><ul><li><span>it will require a lot of time, it looks superficially easy but to stay the course and make at least one satisfactory working device is going to take months if not years</span></li><li><span>the temptation will always be to start over along some new and promising avenue, once a direction is picked for execution it should be maintained until there is a working device or it is a confirmed dead-end</span></li><li><span>it will cost a fair amount of money to make a working prototype</span></li><li><span>a working cell is the major challenge, everything else can wait until that one is solved</span></li><li><span>I can't read braille myself so I can't really test the machine once it is there but I can check registration</span></li><li><span>avoid burn-out</span></li><li><span></span></li></ul><p><span>Assumptions about relative importance of criteria</span></p><p><span>for an MVP one or more of these can be relaxed to the point where it starts to become useful for actually users of the device.</span></p><ul><li><span>safety</span></li></ul><ul><li><span>fingers should never ever be at risk</span></li><li><span>hair or clothing or jewelry should not be able to get entangled</span></li><li><span>absolutely fire-proof</span></li><li><span>impact and drop resistant, the device may break but may not become unsafe</span></li></ul><ul><li><span>comfortable to use</span></li></ul><ul><li><span>low noise</span></li><li><span>low weight</span></li><li><span>long off-power use</span></li><li><span>support all 'standard' software and use cases</span></li></ul><ul><li><span>character/dot quality</span></li></ul><ul><li><span>dots equally high</span></li><li><span>dots equally spaced</span></li><li><span>dots perfectly lined up</span></li><li><span>dots don't move when you touch them.</span></li></ul><ul><li><span>character width, 7.6 mm is the standard and that should be respected</span></li><li><span>line of text quality </span></li></ul><ul><li><span>perfect alignment</span></li></ul><ul><li><span>little heat rejection</span></li><li><span>long service life, excellent MTBF</span></li></ul><ul><li><span>low moving parts count</span></li><li><span>rugged design</span></li><li><span>waterproof </span></li><li><span>dust and grime proof</span></li><li><span>easy to service, preferably without tools, better still if it can be done without sight (almost a must)</span></li><li><span>as near as possible to solid state</span></li></ul><ul><li><span>price is also very important, more affordable opens up the device to more people aim for $5/cell</span></li></ul><ul><li><span>low cost materials</span></li><li><span>as little fancy tooling as possible</span></li><li><span>easy to manufacture</span></li></ul><ul><li><span>line-to-line distance is more critical than height of the device</span></li><li><span>low power consumption</span></li></ul><ul><li><span>USB C powered</span></li></ul><ul><li><span>speed of update</span></li></ul><ul><li><span>0.5 Hz</span></li></ul><ul><li><span>nice to haves (for now…</span></li></ul><ul><li><span>bitmap capability</span></li><li><span>alternative power sources</span></li></ul><ul><li><span>battery powered</span></li></ul><ul><li><span>cursor and line buttons</span></li></ul><p><span>Market Notes</span></p><p><span>In general all the devices that are on the market seem to be a mixture between nice ideas, engineered by people who were first and foremost looking at things from a usability/durability perspective rather than price point (even the 'cheap' ones and technically none of them are really cheap). </span></p><p><span>The ones that were made with a specific price point in mind seem to have all overrun the target price point, sometimes by a considerable margin (x2 or close to that), and the more rugged and feature complete devices go for a multiple. They are all very small in terms of the number</span></p><p><span>of characters they can display, there simply isn't the equivalent of an 80x25 or something like</span></p><p><span>that on the market at all, let alone at an affordable price point. Based on the per cell price</span></p><p><span>of the Orbit 20 ($35) such a device would cost a whopping $70K!! And that's the equivalent</span></p><p><span>of a 1980's text terminal. </span></p><p><span>It also seems as if there is an element of graft in there. It's fairly obvious that the blind themselves are more or less at the mercy of whatever is out there and they are very good at justifying why these things should be expensive ('niche market', 'lots of money spent on research') and so on. I don't think that anybody doing this is really doing it to rip off the blind but in the end they don't mind making a lot of money. </span></p><p><span>There is the 'dot6', which is a glorified dymo label printer that costs $1000, the equivalent manual device for sighted people sans electronics is $10. Overengineering and over-thinking solutions seems to be another issue.</span></p><p><span>Per cell prices range from $7 (the Canute) on the low and to $100 on the high side. </span></p><p><span>Studies</span></p><p><span>As with everything, talk is cheap. It's easy to come up with a hundred different ways of doing this. Most of them you can discard right off the bat simply because they are too expensive, too power consuming, too fragile or too complex. But some are at least in principle promising enough to at least try them.</span></p><p><span>Because of the limitations of the tools I have at my disposal (3D printer, laser cutter, various hand tools) I'm going to first make some 4:1 scale models. Those are large enough that you can debug the concept and evaluate it and small enough for some 'pretend' use to see if they would function as intended. </span></p><p><span>For now I will use only common stuff that I can get my hands on ready made off the shelf or bespoke stuff that is printed with the 3D printer. The laser cutter may be useful in some capacity but I don't think wood is the right kind of material for this project, it would cause all kinds of complications and jams and it isn't very wear proof.</span></p><p><span>I've dated them from the pictures. &nbsp;</span></p><p><span>Study #1; 'Pen Clicker' (Feb 22)</span></p><p><span>My first idea for doing this super cheap is to try to get the parts for the dots down into the cents realm using cheap mass manufacturing techniques such as injection molding. Robert's ball point pen experiments gave the idea to try to use a ball point pen like mechanism per dot. This provides immediate locking and per-pin addressable display capability. The downside is that the mechanisms are fairly large (typically about 7 mm cross section) because there is plenty of room inside a pen. </span></p><p><span>You then still need to have a dot, row or cell capable method of changing the state of the pins. Accuracy of the addressing method is a bit of an issue, at 2.5 mm pin spacing there isn't a whole lot of room but by making the 'target' as large as possible (say, 2.2 mm) and a 'pusher' pin that is less than half that size (say, 1 mm) you could get this to feasible </span><span>if</span><span>&nbsp;you can make the bi-stable pin mechanism in the first place. You'd also need to be able to sense the position of a pin (in or out) so that you can recover from power failure or any other state change that goes unrecorded. Here is an image of a test setup, scale 4:1 with 6 cheap retractable pens:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image12.jpg" title=""></span></p><p><span>I think this would work. You could make a very cheap matrix display with it but it would be fairly slow to update and it would be quite noisy because of the bi-stable nature of the mechanism (which results in two clicks per set or reset). Miniaturaization would be tricky, especially the casing (which would have to be 2.5 mm at maximum diameter). You might be able to improve a little it on that by placing the actual pins offset from the center and moving the mechanisms out as far as the wall thickness to the next pin would allow within the body of the cell.</span></p><p><span>It would not live very long though, I can't find any reliable statistics on how long a pen retraction mechanism would last but regardless these are *much* (2.5x) smaller and would wear correspondingly faster. You could set up a bunch of cells and do an accelerated aging test to get a good idea of how reliable such a device would be. </span></p><p><span>For now I'm parking this one because it has a lot of already visible issues and has a very large number of parts (4 per pin, rider, case, spring). But maybe I'll revisit it for a matrix display.</span></p><p><span>Study #2, Odometer (Feb 23)</span></p><p><span>Cars from before the age of electronics had a mechanical odometer that is set up as a number of side-by-side wheels that each cound a decade. When a wheel reaches '0' it carries the next wheel to the left along to the next digit and so on. These are cheap to manufacture and have the advantage that you can drive the whole thing from a single motor, though updating the last wheel requires an exponentially higher number of moves for the first.</span></p><p><span>My initial thought was to make a number of cams that push spring loaded pins up or down. Each wheel would drive either 2 or 4 pins. But at a reasonable scale for actual use that concept would quickly fail: the cams would wear very rapidly and it would get awfully crowded in there with precision parts on par with what a typical watchmaker would put out. Much too expensive. </span></p><p><span>Then I realized that it might be possible to put the dots immediately on the wheels. that way you don't need any pushrods or slides or way to fixate the rods as long as the wheels can't be driven directly by the user, &nbsp;the downside is the wheel rotates in the direction of the reading so you need to work against that. But the greatly reduced parts count (no springs required and no physically separate pins) makes it more than worth trying this out. What's funny is that Mahmouds original 8 code wheel already had this but I was so focused on cams and 'proper' pins that I totally forgot this and I didn't like the diameter and shape of the wheel.</span></p><p><span>Here is a photo of a trial two dot wide wheel:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image81.jpg" title=""></span></p><p><span>The dots protrude from the side of the wheel. To reduce the amount of rotation required to produce a pattern you can replicate the dots at different angles on the wheel, at least two offset by 180 degrees are possible (half the number of rotations required) and possibly even three. Another option to reduce the number of rotations is to allow the mechanism to spin in either direction, this would give you the option to move backwards if that gives a quicker path to the required combination.</span></p><p><span>Here is a model with three wheels in place: </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image36.jpg" title=""></span></p><p><span>Rotating a wheel through 4 different angles gives you zero dots, one on the left, one on the right or two dots. That way you need two blank spaces and two dots for all four combinations of two dots, which saves you half the rotation. For a six dot cell with one replica of the two dot pattern you'd have to spin the third wheel across three positions maximum (from 00 through 01, 11 and then 10) so that's three 'carry' operations, the previous wheel would then have to spin through three whole revolutions (so 18 carry operations) and the first wheel would go through nine. </span></p><p><span>With two patterns (00 11 00 11) a carry every half revolution the second wheel would have to spin 1.5 turns and the first through 4.5. </span></p><p><span>If you can put three patterns on a wheel (00 11 00 11 00 11) then the second wheel would spin once and the first woud spin twice. Two revolutions to pick any combination of 64 possibilities worst case, and on average only one revolution because on average you'd be only half the distance from the pattern that you want. That sounds very doable. Another interesting part here is that you could drive the first wheel through two small solenoids, one on the left and one on the right of the initial wheel mounted solidly to the axle.</span></p><p><span>This would protect against backdriving the wheels (modulo some slop in the gearing). It might also be possible to pick a suitable gear ratio to drive the wheels directly one to the other but it would be very hard not to have wheels 'in the middle' between two positions in order to position the furthest ones, similar to how when a clock indicates quarter past three the hour hand is already one quarter under way towards the '4' position.</span></p><p><span>Now the 2.5 mm inter dot spacing requirement actually helps us rather than that it hinders because it may help to allow us to squeeze in three patterns on a wheel. 360/3 is 120 per pattern, with each of the pattern elements (dot or space) offset by 30 degrees. That's nice because it squeezes the dots closer together making them protrude a bit further because they are both closer to the maximum protrusion due to the smaller angle (+- 15 degrees rather than +- 22.5 degrees). Here is a pattern wheel with three sets of patterns. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image56.jpg" title=""></span></p><p><span>Placing this wheel is a bit harder than the one with two patterns because there is always something sticking out but it is still doable. It *might* even be possible to add another pattern but that would require a trick to place the wheels, they would have to travel through the sidewalls somehow. Maybe you could cut every other sidewall out completely so that the wheels can temporarily move into the adjacent slot while traveling upwards towards their installed position but that's a bit awkward. </span></p><p><span>You can clearly see that the two dots are spaced closer than on the first wheels with only one pattern, the inter-dot distance is 7 mm here, which corresponds with roughly 3:1 scale factor. The wheel itself however is still at 4:1 so that's not 100% fair. It might be worth trying to scale the wheel down to 3:1 rather than 4:1 to see if such an intermediary step is useful but I'd rather first finish the whole thing so that it conceptually works, then scale it down to say 2:1, make that work and then finally get it as close to the required size as possible while still keeping a functional unit. </span></p><p><span>Note that in a real design that whole wheel is only 7.5 mm across, so the definition of the patterns is going to be much harder to achieve than scaled up. A 2:1 version still worked quite well but a 1:1 version did not have enough resolution to be able to even resolve the dots with the eye, let alone by touch.</span></p><p><span>An interesting observation: when you move the patterns clockwise side-to-side they go through the following sequence (with the middle two positions being at the top of the wheel): 110000 011000 001100 000100. If you don't turn the wheel through a whole revolution and you use only one 'three patterns' segment of the wheel that means that you can replace the wheel with a simple lever with the two dots at the top rotating across only 90 degrees. The starting position would be '0', then the first is 30, the second 60 and the final one 90 degrees. </span></p><p><span>Either extreme would be automatically 'locking', one extreme because you could run the side into a block, the other because it is blank so you'd have the four zeros covered (the wheels won't spontaneously rise out of their slots) and one of the ones. That leaves three 'one' positions to be somehow locked. Another option would be to add two more positions to engage the carry to the next slot (but that would increase the covered angle to 150 degrees for an 'up' and a 'down' carry position), or you could drive each wheel individually (right away much more expensive).</span></p><p><span>Study #3, 3 dot wheels; orientation vertical (Feb 23)</span></p><p><span>Mahmoud's design has a lot going for it, it uses fewer drive train components but the ones he has used are fragile and expensive and I think there are some possible ways to substantially improve on the design. For starters, he uses 8 distinct faces, one for each of the possible 8 3-bit combinations. This requires a full 360 to position the wheel. It does allow for elegance at the edges where the pattern approaches the casing but that's a lesser problem in my opinion so it may be better to ignore that for now and focus on the thing that matters most: that the dots line up in *exactly* the expected place and that the drive train isn't going to be too complex. Because within a single character there is no room for positioning errors at all.</span></p><p><span>By laying the sequences out so that they overlap the number of positions on the wheel is reduced a lot: 000, 001, 010, 011, 100, 101, 110, 111 becomes 01110100 which when wrapped around the wheel allow you to select all of the combinations. But that has 45 degrees per position, which is not ideal because the middle position will be much more raised than the side ones. You can compress the pattern quite a bit, at 22.5 degrees per position you need 180 degrees for the full pattern and as with concept #2 you can use 15 degrees and then the whole thing fits in 120 degrees of the wheel, so you can put three full patterns on a wheel. The matching pattern is then at most 1/6th of a turn away from where you are right now.</span></p><p><span>Another option is to use the other 240 degrees for the drivetrain, either by turning the bottom of the wheel into a gear or, even more elegant by using the whole thing as a motor. This is interesting for several reasons: the motors themselves are obvious weak spots, they require some kind of downgearing and/or a feedback mechanism and they are probably going to be at right angles to the wheels to give them enough space to work. </span></p><p><span>Here is a sample with a 3 pattern wheel:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image45.jpg" title=""></span></p><p><span>There is already quite a bit of room on the side so the wheel could be made thinner without penalty. There is quite a bit of gap between the dots, they are pretty easy to discern, the only part that is not so elegant is that the 'skirt' where the dots duck under the top surface is quite large relative to the size of the dots. The wheel is also about 2.7 times bigger in diameter than what would be ideal, at 27 mm versus the 10 that the specification requires. But the 'Orbit Slate 520' does much worse than that!</span></p><p><span><a href="https://www.google.com/url?q=https://www.orbitresearch.com/product/orbit-slate-520-multi-line-refreshable-braille-display/&amp;sa=D&amp;source=editors&amp;ust=1709891107845220&amp;usg=AOvVaw2-HXtchvkEC44xbicGa7pf">https://www.orbitresearch.com/product/orbit-slate-520-multi-line-refreshable-braille-display/</a></span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image41.png" title=""></span></p><p><span>So that should not be a problem at all for now, better to have slightly oversized lines than no lines at all. The dot pitch works out to about 3.3 mm vertically, that's not ideal and it should be reduced by 30% to be standard conformant. There are two principal ways of doing this, the first would be to scale the whole thing down (part of that will have to happen anyway), another way is to further reduce the angle until we get to the right dot spacing. I think that's the most interesting option because it would further reduce the movement of the wheel during repositioning and it would maybe allow for a fourth pattern. Note that even a partial fourth pattern would be useful.</span></p><p><span>It is also time to reduce the wheel width a bit and to space any two adjacent wheels the right distance apart. And to make two characters side-by-side again instead of mis-using the old case.</span></p><p><span>Study #4; thinner wheels (Feb 23)</span></p><p><span>This one is a lot slimmer than the previous ones. It uses wheels that are not quite the right size (still too thick) but much closer to where we should be. It has three patterns per wheel, two wheels side-by-side per cell and two cells side by side for a two character setup. This brings the size of the dots and the inter-dot spacing much closer to conformance than before.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image15.jpg" title=""></span></p><p><span>Having the three patterns on a wheel means we need to be able to move through 120-15 degrees for all 8 patterns to be exposed. I wonder if you'd only use a single pattern whether it would be possible to run the remaining 2/3rds of the wheel into a stepper with 8 positions. In hard drives such an arrangement is used to position the heads. A single magnet in the center could be used by the two wheels next to it (flattened in the middle) so that a coil riding the magnet would rotate the wheel. Hard drives use a servo mechanism and piezo electrics for the final detailed drive movement but we don't need that kind of precision, at 15 degrees per step all we need is a coarse positioning system with some kind of holding torque that doesn't break the bank in terms of BOM or assembly costs. </span></p><p><span>The feedback could be provided by a very basic quadrature encoder using leds on either side of the wheels or by deadheading it from a fixed reference point (for instance: a stop). An alternative would be to embed a magnet in half of the wheel and to put a bunch of coils next to it, each coil would pull the magnet towards it for that to become the indexed position. Travel from one coil to the next would dependent on the distance from the center of the wheel to where the coils live, this could be a multiple of the distance for the dots at the expensive of height and line spacing due to the increased swing of the arm. </span></p><p><span>A really steampunk version of this would use a spring and a pullrope, with the actual positioning mechanism somewhere else. To avoid calibration issues the return stop point would have to be reset upon power up (the point at which the wheel comes out of its rest position). The motors would live off to the side of the whole thing and take up as much space as you want. This is interesting, but fragile and hard to assemble and service but it would be pretty quick. </span></p><p><span>Another option is to use a travelling arrangement like in the Orbit 20 where a selector mechanism moves the wheel to the right position and then somehow locks it. I'm not a real fan of that arrangement, it has single points of failure and it's dead slow. For a larger display that simply wouldn't work unless you were really smart about the updates.</span></p><p><span>&nbsp;On the plus side if you did it for both axis it would probably be very cheap to build. The locking could possible be achieved by a ball loaded by a spring with a bunch of corresponding holes in the wheel, but from experience I know that assembling such devices is a complete nightmare. Another option might be that the presence of the setter carriage would automatically unlock the wheel, for instance by a relatively powerful magnet pulling back on the wheel lock. Moving the carriage would cause the lock to re-engage. That would also require a spring or there could be an embedded magnet to push the lock back into its position.</span></p><p><span>Study 5, Even thinner wheels (Feb 23)</span></p><p><span>These are the first dots that are as good as conformant. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image85.jpg" title=""></span></p><p><span>The wheels are thin, only 2.6 mm (so off by 1/10th compared to what I was shooting for). Three patterns to a wheel like before. What's nice is that the pins are now so closely spaced they don't drop as much for the outer two pins. This makes it much easier to read the code.</span></p><p><span>Wheel diameter is about 27 mm. I didn't feel like making a casing for these thin wheels because it's pretty obvious that they will work, *if* you manage to drive them. Looking at the wheels side by side made me wonder if I couldn't use the pins themselves as the driving mechanism. That's possible in theory if it weren't for those large blank spots. This is a bigger problem than it may seem at first glance because any kind of drivetrain would have to engage with the wheels deeper than the pins if it is to work at all. But using a relatively 'sharp' (or deep, depending on how you want to look at it) wormgear you could probably do it. With one major serious problem which is that 2.5 mm over there is another such wheel which also wants to be driven, independently. </span></p><p><span>Which made me wonder how big a single wheel with all 64 combinations would be. The braille standard says that you can have a minimum dot spacing of 2.3 mm with 1.5 mm dots. 64 x 2.3 is 147 linear millimeters, which results in a wheel that is 46 mm diameter. That is *very* far from ideal. *But*, and this is a huge advantage, suddenly the drive problem is relatively easy to solve, you just index that one wheel to get a reference and then you rotate it into position, done. It is self locking (property of worm gears, as Mahmoud also noted) and it reduces the number of moving parts per cell to one plus a small motor. That's well into 'doable' territory at the expense of the line spacing. But as noted above in the bit about the Orbit 520 that's not entirely out of bounds though it would have been far nicer to be more compact. </span></p><p><span>At 46 mm / wheel an 80x10 line screen would be 61 cm wide and 46 high (no other buttons or controls taken into account). That's too big to take with you, but then again, 80 wide is the larger dimension. At 40x10 it would be in the large laptop domain. The 'deep' wormgear will be a pain but unless you want to use two motors at different angles it would be tricky to do much better. The wormgear would have to be only a little bit deeper than the dots, and the dots could be reduced in depth (they are probably a bit on the deep side right now) so hopefully not too bad. Another option, at the expense of some more wheel diameter might be to compress the patterns a bit and to have a 'dummy' part of the wheel that is all 'ones' so that we never have to drive the wheel on the bare part.</span></p><p><span>So that's worth a try. </span></p><p><span>Study 6; whole character wheels (Feb 24)</span></p><p><span>A single wheel, 46 mm diameter with all of the patterns on it in one go, 64 different index positions each of which expose a new combination at the top face. The wheel will use 1.5 mm dots on a 2.3 mm spacing (tightest spacing allowed under the standard), with 0.8 mm between the dots so that's 1.5*2 + 0.8 = 3.8 mm wide. Compared to the 7.6 mm that a cell can be wide this is fairly luxurious and it is possible that a drive from the side is also an option but for now let's pretend we're driving with the dots themselves. Reducing the size of the 'space' between two letters would allow for closer packing but that may not work for readers, I just don't know. Some kind of feedback will be required so that we know exactly what the position of the wheel is, or, alternatively we can drive the whole thing with a stepper.</span></p><p><span>But first let's make a wheel. I tried twice to make the 64 slot wheel by hand assembling the codes into a long sequence 64 positions long that contains all the codes but I kept running into problems and had to backtrack. After the second time I gave up on trying to do it by hand and I wrote a piece of code to do it. These are the side-by-side codes:</span></p><p><span>&nbsp;0011101000111011101001111011111001011010000010011001011010000010</span></p><p><span>&nbsp;0011111111110110110110100100011011001011011001010010000010010000</span></p><p><span>The top one encodes the left hand wheel, the bottom the right hand one. All combinations are present so this wheel can generate all 6 dot braille codes. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image42.jpg" title=""></span></p><p><span>You could make index holes and positioning holes in the wheels to tell you where it is positioned. This could live on a thin circuit board positioned above the shaft. The front of the circuitboard could shine IR on an scale that is either embossed or it might be enough just to know when the index point is passing by. Another alternative would be to have 64 holes, one for each character position and one extra hole for the index. The lower part of the casing can house the rest of the drive hardware.</span></p><p><span>Crazy idea… So, now that we have the wheel with all of the 64 possible 6 bit character codes on them for 6-dot braille it still requires a motor per character, or some other drivetrain + locking mechanism. A simple drivetrain would require a gear on the side of the wheel, an idler gear and a wormgear. That's two sloppy interactions (resulting in wobbly characters) and complexity. That's also the expensive part and that's where everybody seems to run into the wall. They either economize and make carriages with bi-stable pins, solenoids, or they make it super expensive (or both…). But what if you didn't have to do that? Blind people read with their fingers and their fingers can't be everywhere at once. There are only so many spots where they could be and typically they will scan a line of text with their fingers. More experienced users may use multiple fingers next to each other and use the other hand to steady themselves when moving line-by-line. There is a great video here that shows the process: </span><span><a href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3DpQLxJ2-zwVk&amp;sa=D&amp;source=editors&amp;ust=1709891107848014&amp;usg=AOvVaw2yj8XbP0eaOXZIwauT6TZV">https://www.youtube.com/watch?v=pQLxJ2-zwVk</a></span><span>&nbsp;</span></p><p><span>But what if we cheated? What if we only concentrated on those letters where fingers are, or even more extreme if we only concentrated on *one* letter at the time per line of text. This would allow you to move *all* of the letter positions using a single motor. As long as you're 'there' by the time the person has their finger on the spot and the character doesn't seem to move then that's fine. A single motor would be a bit rough though, because when scanning left-to-right for instance you'd want the next letter to be in place just before the reader reaches it but not too early or you'd be interfering with the previous one. So maybe two or even three motors per line (previous, current and next characters) would be sufficient to create the illusion of a line of text. Alternatively you might have a couple of motors per so many characters.</span></p><p><span>You'd need some way of figuring out where the users' fingers are and in which direction they are moving so that you'd have enough time to make the adjustment.</span></p><p><span>*If* - big if - this works it would create massive cost savings, you'd only need the one motor (or a couple of them) and an indexing mechanism per line of text. In an even more extreme example you'd be driving all of the lines at the same time as long as you only read one character at the time that'd be fine. It wouldn't be very wear friendly though. And the whole idea feels a bit like a meatgrinder so it would be quite important to ensure that you would never get your hair caught in there (which is a safety issue with any wheel based device). </span></p><p><span>Driving the wheels from underneath could happen batch wise as well by having multiple 'driveshafts' run from left to right under the wheels. Gears could be pulled into contact with the wheels and the driveshafts to rotate the wheels to the next desired position. Multiple wheels that need to spin in the same direction could be engaged at once and if a wheel is at the right spot it could disengage while the rest would continue. Once all wheels would be positioned correctly the drive motor(s) would stop moving.</span></p><p><span>If you have any slop at all in the drivetrain then the wheels can move a bit when the user reads the characters. This is more than a little bit annoying, the distance between the dots and the size of the dots is such that even a small upset can cause a character to be mis-read. The consequences (think online banking or something like that) can be pretty bad so mis-reading and mis-positioning should be treated as failure of the concept. In order to fixate the wheels they can be locked into place after movement (and unlocked prior to movement) in many different ways, but possibly one of the simplest and effective ways to do so is to simply compress a block of characters (ideally a whole line of characters). That causes the sides of the wheels to come into contact with a large amount of surface of the casing and this will cause a lot of friction stopping the wheels from moving by accident. One way to do this would be to have a servo that pulls down on a wedge that locks the main shaft under compression. Prior to repositioning you'd move the lock up again and then all the wheels on that shaft could be spun. If the wheels are all locked to the main shaft using splines then that isn't necessary. Another option is to use the shaft as a means of selecting which bank of gears will move. This will require some space (as much as you need for the movement) to the side of the character lines. </span></p><p><span>Yet another way to drive the wheels would be to have a magnetic clutch ride along with the wheel, the bulk of the clutch could live inside the wheel itself, the counterpart would spin along with the shaft. The clutch would not even have to be perfect, as long as some movement happens you can just keep it engaged until the wheel reaches position. This is difficult for another reason which is that you some how need to provide power to the wheel itself, but that may be solvable (though probably not all that cheap). Another potential issue is that a magnetic clutch requires a field that may well extend past the wheel that you're interested in causing torque on the adjacent wheels. If those are supposed to keep moving that isn't a problem but if they aren't then it may cause a wheel to move that should not be moving.</span></p><p><span>Another option would be for all of the wheels to try to start moving but only those that are unlocked would actually move. This would require a fairly precise locking/unlocking mechanism but that may well be a lot simpler than powering and selecting clutches. Each wheel could have an embedded metal disc and next to the wheel you could spin a fairly powerful disk magnet or a number of smaller ones embedded in a carrier. Having one central carrier per two wheels would reduce the number of magnets required and would ensure symmetrical forces on the magnet bearing drive wheel. Yet another option would be a friction drive on the main shaft that is easy to lock out again. This would require the wheels to spin quite freely (so we don't need a lot of friction to move them). </span></p><p><span>It may be possible to have an 'addressable lock' that consists of a stepper and a magnet on a belt. Where the magnet is the corresponding lock will engage or disengage dependent on the direction of the current, all of the wheels would be given the same lock or unlock command but only one would actually do it.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image86.jpg" title=""></span></p><p><span>Two large wheels side-by-side in a casing, the casing isn't ideal yet and the skirt does not nicely line up with the tops of the dots. But this is 'draft' mode so very coarse layers and there is some play on the shaft. Fine tuning all that should make it a lot better. There are 5 rows of dots exposed in the window, that's two too many and shielding those from the reader is going to be tricky, the angular step between the dots is such that they are arriving nearly flat (good for the reading!) but that also means that the first two dots outside of the ones we are interested in are going to be *nearly* at the right height for reading. I'm not really sure how to deal with that yet, I can have some kind of cover over that part so your finger slides along the cover or maybe some other trick. One elegant way would be to have a depression that matches the shape of a finger at the spot where the centerline of the characters is, that way the 'high' parts would automatically cover slots -2 and +2 and slots -1, 0, and 1 would be neatly exposed.</span></p><p><span>If that works well then it might even allow for an even higher dot which would definitely be nice to have. &nbsp;</span></p><p><span>A wheel like this takes about 20 minutes to print in 'coarse' mode and an hour or more in fine mode. But if that makes workable parts that would already be a real victory. I think I should tune the dimensions and then move on to the drive train problem.</span></p><p><span>Study #7, Finger shaped depression in the casing (Feb 24)</span></p><p><span>The big wheels expose too many dots, this is a problem and it should be remedied. I don't see any way of solving this without bending the rules a bit. I'd like the top of the display to be perfectly flat but that simply doens't work with those large wheels, the initial drop at the top of the wheel arch is too low to reliably move the next and previous dots below the horizon. Very annoying. But with a very slight depression in the casing (alternative point of view: with a higher roof over the exposed parts that shouldn't be exposed) you can solve that problem.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image67.jpg" title=""></span></p><p><span>The wheels are in between two 'proper' positions in this image and you can see that by the time they've rotated through to a registered spot that the dots in -2 and +2 positions relative to the center (the code you are interested in) will be under the overhang. </span></p><p><span>It's a difficult decision. On the one hand I'd like to make it 'perfect' but if 'perfect' means unaffordable then that is even more of a non-starter. I will have to ask a blind person whether they believe this trade-off is worth it. </span></p><p><span>I've done a lot of sketching and thinking about a way to drive the wheels reliably and without too much extra cost and I think it can be done with a single motor for the whole device (no matter how many lines it has). The basic idea is super simple: the main shaft is driven by a motor, shafts can be coupled on to the next or, alternatively you could have a motor per shaft ($, heavier). The shafts themselves would look like ordinary shafts but they really aren't. Inside the shafts at the 7.6 mm pitch (identical to the character pitch) there are embedded magnets. These line up with magnets embedded in the wheels. This then transfers a little bit of torque (up to the strength of the field coupling) from the one to the other. If it works really well you might even be able to replace the magnet in the wheel with a steel insert (which would be much cheaper). A steel ring with inward pointing teeth could work. But first I'll try the magnets. Either way, the really good news about this method is that this 'magnetic limited slip clutch' provides protection against stuff breaking if a wheel should get jammed and it transfers torque at the same time. There is still the problem of the wheel in frictive contact with the shaft, especially an issue if the wheel is stationary but the shaft is moving. That will need to be solved. </span></p><p><span>Another thing that needs to be solved is the locking of the wheel. For this purpose the wheels will need some kind of arrestor and a detection mechanism to work out when they are in the right position. I think this can be done with a relay like contraption that pulls a brake or a segment of a gear away from a toothed ring on the inside of the wheel. That way the wheel will only want to lock in place when it is exactly centered on a character and releasing the lock will provide that centering action even if the wheel is still a bit before or even past the position we're shooting for. &nbsp;A ring of locking gear teeth could be made in the wall of the wheel, then the unlock/lock action would be to retrieve a pin and to release it again. The pin head would be shaped like a triangle so that it would push the wheel into it's exact position. </span></p><p><span>In a perfect world the only points of contact with the moving parts are the end bearings of the shaft, and for every wheel the point where the arrestor makes conact with the wheel rim. But unfortunately the shaft is also a point of contact. You could make it larger to increase the wear area but that would also increase friction and reduce available space for electronics and the arrestor. Maybe a small ball bearing could be press-fit into the wheel. But small ball bearings arent't cheap. </span></p><p><span>Study #8, Hollow wheel, index holes, spokes (Feb 25)</span></p><p><span>This is starting to look like alien jewelry:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image10.jpg" title=""></span></p><p><span>This didn't happen without some problems. The registration slits are super thin, only about .5 mm and as a result getting the first layer to be proper didn't work the first three tries. Finally after a very thorough cleaning of the printer bed I got a usable wheel out of it but clearly this isn't going to work for any kind of volume, besides that this wheel took a whopping 1h 20m to print. Not ideal, to put it mildly. </span></p><p><span>In this picture you can see the light shining through the registration slits so it did eventually work:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image29.jpg" title=""></span></p><p><span>But I would like a more reliable design that isn't as finicky to print. </span></p><p><span>While this was printing I was playing around with some options for locking the wheel and the first two (re-use of the slits and half circles cut out in the inner part of the rim) didn't really look good and didn't give me a feeling that they would be reliable.</span></p><p><span>So I re-did the whole thing, removed the spoke holes and added a ring of teeth to the bottom of the wheel. </span></p><p><span>That looks more reliable, the idea is that a spring loaded pin with a triangular (or just pointy!) head aims for the valley between two of the teeth. That should then lock the wheel in place and guide it. </span></p><p><span>Thinking about this a bit more: *if* that guidance works across 1/3rd of a tooth then that implies that you can use three of those 'lockers' to move the wheel around stepwise. That would require two of them to be powered up at all time (two *per wheel*) and that's a bit power hungry, but once locked in place it might be possible to release the other two without the wheel moving away from its set position. Two 'unlocks' would create a move. The 'dominant one' (the one that actually lines up with a slot) could be given a stronger spring so that the other two can be relaxed without being able to overpower the one that matters. Or maybe they'd cancel out (because they are both resting on opposite sides of a tooth). </span></p><p><span>This is quite interesting: it allows for stepwise movement of the wheel in a completely mechanical and automatically locking manner, kind of a mechanical three phase drive. I'm a bit afraid that it would be noisy, but that's mostly a matter of the material of the locking pins and whether they click against something in the back. In the Yamaha disklavier piano's there are massive solenoids that have been dampened to the point that you don't hear them at all. But there they have a lot of space to work with.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image23.jpg" title=""></span></p><p><span>If that works we no longer need a motor, the two magnets per wheel can be dropped and the wheel boss can be made the full 7.6 mm, so it will carry the wheel much better. We no longer need the slits other than a single 'home' slit to make sure we can sync up after the unit has lost power. The shaft that everything is mounted on would then be completely passive.</span></p><p><span>Another option would be to create a 'pancake' stepper motor with four small permanent magnets as the rotor and eight coils as the stator windings. That's pretty tricky though, even at only 64 steps per revolution that would require a lot of very precise engineering. It *might* be possible to use only four coils and a completely passive rotor (no magnets, just some steel teeth). To lock that you'd need some power though.</span></p><p><span>I'm a bit worried that if the lock/unlock mechanism would be used to drive the wheel that it might result in either a lot of noise or premature wear of the springs. We *could* use magnets instead of springs but that has it's own set of problems (it is also quite costly).</span></p><p><span>And I'm not even sure if it will work. If it does though, it might be worth it to try an accelerated aging test to see how long that setup lives. </span></p><p><span>These are about 10mm on the side:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image48.jpg" title=""></span><span>&nbsp;</span></p><p><span>So maybe that 'stepper' motor isn't such a bad idea. Another option would be to use only three coils, and to have the three coils offset by 1/3rd of a tooth. I really like the idea of making the wheels the centerpiece of everything, so they can be the code carriers, the indexer, the lock and eventually possibly even the motors. But a standard motor as the main component for the drive train also has its advantages, it ensures that that bit will be solid and reliable and more or less standard. It also keeps the wheels simple and robust and it wouldn't need a custom piece of metal to ride inside the wheel. Though such components may well be unavoidable. I would really have liked to have everything except for the wheels the wheel casing and the circuit board to be 'off the shelf' but that may simply not be a possibility with this project.</span></p><p><span>If you want to drive the wheel as a stepper rotor then the coils would have to be centered over the teeth. There would be 4 times 16 poles, so each coil engagement would immediately move the rotor to a new letter position. The advantage of doing that is that motor + lock are one and the same, you just keep the coil running at a lower current to fix the wheel in position. </span></p><p><span>Another advantage is that we can use standard double-H bridges to power the motor and likely (because it doesn't have any opposing force) it wouldn't take all that much power unless you *really* tried to stop it. But in that case it's fine if you succeed with that rather than that it shreds your fingers (because all of those dots at high speeds of rotation are probably an excellent way to get hurt, it already feels like very coarse sandpaper).</span></p><p><span>4 coils + 16 magnets spaced around the wheel would give you that, but 16 magnets is quite expensive (they're typically $.20 or so each). More coils = fewer magnets, but coils are also not cheap. But coils can magnetize more than one part of the device, you can add a little piece of metal and bend it up in a different place to move the magnetic field around. Before long you'll be making an actual stepper :)</span></p><p><span>But steppers make a lot of torque and we don't actually need that so maybe we can get away with much higher resistance coils and thin metal or even without any magnets at all, just metal inserts into the wheel at 16 spots. That's worth trying.</span></p><p><span>A simple metal insert would be a small nut pressed into a cavity in the wheel. The coils would have to ride pretty close to the metal to be able to attract it but I don't see any reason why that could not work.</span></p><p><span>A test with a single magnet in one slot and a small not in the oppositng one would give an idea of whether or not this can work or not.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image28.jpg" title=""></span></p><p><span>Not exactly high grade CAD work, but at least it shows the idea. So the four coils have a common wire and one that goes to the drive unit. Depending on whether you want 'full step' or 'half step' you'll need either 16 or 8 magnets and for 'half step' the stator pieces would have to be twice as far apart. Probably half step will require a bit more power because the coils are going to be much further away from the magnet. But it will cost much less per wheel. If the system already works with just a captive nut to attract then it is probably better to go with full step.</span></p><p><span>So, all that work to put those blocker teeth in there look to have been for nothing I find this idea too intriguing and I would like to try it. If it works it might just be the solution to all of the remaining engineering problems, it would also make the whole thing come in at an affordable price point.</span></p><p><span>Study #9, stepper integrated in the wheel (Feb 25)</span></p><p><span>There are two major variations on this theme: coils inside the wheel (more compact, less assembly friendly) or coils outside of the wheel (far less compact, but *much* easier to put together). For now I'm going with the coils outside of the wheel option. that will make it much easier to test things and if at some point I can get this to work and it looks reliable enough (and so that the neighboring wheels don't interfere, which is still a bit of a worry) then I can see if I can move the coils to the inside of the wheel (all that wasted space…). </span></p><p><span>So, for the first time we're going to have some electricity involved. The redesigned wheel looks like this:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image33.jpg" title=""></span></p><p><span>and yes, it is horribly ugly but right now I don't care about anything else but the drive and the lock because that seems to be pretty much the only hard problem that is left. One hard problem will be to ensure that with so many coils drawing power in the machine that we don't end up either overdrawing the power supply or emptying it too quickly (very important if the device ends up being battery powered). </span></p><p><span>This isn't a trivial problem to solve, but there are some hints about what might help: the current required to move the wheel to a new position could be substantial, but once it is there holding it there should be far less power draw. The power draw will probably be directly proportional to the amount of space between the coil core and the insert (magnet or piece of iron). And finally, you only need to 'hold' those wheels that are being read and maybe there is a way to detect the presence of a finger (capacitive, for instance) which would then allow you to ramp up the holding torque briefly. The wheels shouldn't all move at the same time, that will draw too much power but you can set an upper limit and then only pass the remaining information down the line when everybody 'upstream' is quiet. You could update multiple lines at once.</span></p><p><span>I think i2c is a nice and simple bus to use to string the devices together, alternatively something like what the WS2812B LEDs use might be applicable (though it runs at clockrates far in excess of what we need here). Either way, the idea is to daisy chain the wheels one to the next so that the microcontroller has a very easy time of interfacing with a display (essentially just one or two io bits).</span></p><p><span>The stepper test will use four coils, and 16 inserts for a full step test and four coils 8 inserts for a half step test. I'm fairly sure that 'quarter steps' will not work (the distance from the coil to the thing that it attracts is just too large) and I'd already be very happy if half stepping works (and works reliably enough that the wheels position accurately).</span></p><p><span>I'll need to finesse some coils for the test, maybe I can strip some print relais down and re-use the coils from those. Ideally the coils would end up mounted on the circuit board inside the wheels but for now I'll just make a test rig with a single wheel to see if it will spin at all.</span></p><p><span>If this stepper trick works I won't be using the encoder ring other than a single index pulse. But it might be somewhat useful: you could use the encoder ring to detect that a wheel is blocked because you didn't see the corresponding edges from the detector. Oh, I just realized you only need 32 holes for the encoder, you can use the rising *and* the falling edge separately. Just line up the edge with the slot. That would at least make the encoder holes a bit more manageable. And 'maximum light' (center hole) and 'minimum light' (center block) are also useful signals so maybe even 16 holes would still work though then the holes would get quite large and you are probably going to lose accuracy. But it might be enough to detect a stuck wheel, especially if you can store the minima and maxima of an unobstructed run for comparison.</span></p><p><span>Here is the wheel loaded up with little (6x2mm) neo's. I tried rotating the wheel with just some M3 nuts in there but it wouldn't work at all, basically you have to be within two mm or so before it would have any effect (5V coil from a small relay).</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image68.jpg" title=""></span></p><p><span>But with the neo's in there it worked reasonably well (that is, it attracted over a large enough distance that I think that I will be able to get the wheel to spin).. The big issue with this arrangement is that the next wheel over (and so on) will have another 8 neos in it. Once those all line up they will want to be close to each other far more than either of them wants to align with any electromagnets that happen to be close. So it does not immediately look as if this is going to work. A normal motor has a lot of metal short circuiting the magnets and here we do not have that so those stray fields are quite a problem. One possible solution would be to have a steel insert with some fingers focusing the magnetic field outward. Then you can load that up with magnets the strength is enough to interact with the coil but not so much that it affects the neighboring wheels. (and quite probably even the wheels in neighboring lines as well!!).</span></p><p><span>These little neos are ridiculously strong, the coil could *barely* pick up an M3 nut but the neos (which are 1/20th or so of the volume of the coil) will happily pick up a pair of pliers!! </span></p><p><span>Shielding with either mu-metal or plain steel between wheels is of course also an option but more cost and complexity, and it will use up some of that precious space.</span></p><p><span>Another thing that might work is to drive one wheel from the inside and the next one from the outside alternating the position of the neo's. This may work but it would be very easy to have a positioning error on the wheel that is driven from the inside because of the angular errors multiplying across the much longer difference in radius between where the magnets are placed and where the read-out takes place.</span></p><p><span>Another option, not quite as nice but it would work: little motors with a tiny pulley driving a much larger pulley integrated into the side of the wheel. The encoder would take care of the positioning and the motor would start up if the user would try to move the wheel outside of where it is supposed to be. You'd need two sets of LEDs and photo diodes for quadrature encoding and then you could even spin the rotor backwards and forwards at will. Not bad in itself, but a motor per character really adds up weight wise (of course, so does every other drive train). The advantage of that would be that it would be using no power unless a wheel was moving (or being forced to move). Another disadvantage is noise, those motors would have to be isolated really well.</span></p><p><span>Little motors might not live for very long though. Usually they are 'toy grade' and anything more serious would right away cost a lot. What's little? Well, check these out: 3 mm for the small one and 6 mm for the larger ones! </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image80.jpg" title=""></span></p><p><span>These are from a toy helicopter (remote controlled, no less) which sell for 35 bucks including a remote controller. So those motors can't be more than pennies but building them deep into the device would mean that if the motor fails you have a complicated service to perform. making the character cells 'pluggable' would remove that problem. </span></p><p><span>Study #10, Stepper test, (Feb 25)</span></p><p><span>Running the wheel as a stepper isn't all that simple, you need four coils very precisely positioned around the wheel and you need a bunch of electronics to drive them in sequence otherwise the wheel won't turn. It's a pretty crappy stepper in that it really only has four spots where it drives the wheel rather than in many places but we don't need to develop much torque, just enough to overcome the friction on the shaft. </span></p><p><span>Here is a sketch of a simple test stand, a base with four dismantled relays positioned strategically around the wheel (only one relay in the picture, the other three are the squares on the paper). Each relay is offset just so that it can attract the next magnet in sequence. Between two full steps the 'half steps' double the number of positions we can select. This is a bit tricky and highly dependent on the consistency of the positioning of the coils, the number of windings, the current stability and the strength of the magnets. But since it saves half the magnets I think it is worth trying to see if that gives satisfactory results.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image25.jpg" title=""></span></p><p><span>The wheel could be made the full width of the slot minus just enough room to smuggle out the coil wires, and a metal base to hold the whole thing to shield the neighboring wheels. That way adjacent magnets would not interfere with each other. Having the wheels that wide would help too with embedding the magnets, using really small ones (say, 2 mm) and fewer ones would also help to reduce the chances of the magnets interfering with each other. </span></p><p><span>Coils would lay flat on top of one another with the pole pieces protruding from between the coils. Those pole pieces would have to be very thin to allow for room to be left over for the coils themselves! You'd have to make them from thin sheet steel (lamination steel, very good magnetic properties). They'd be 0.4 mm each so with a wall of 1 mm on the wheel and 1 mm between cells that leaves 5.6 mm for two coils and four stacked laminations, which isn't a whole lot. Maybe the outer wall could serve as one of the pole pieces but then it would lose some of its shielding properties.</span></p><p><span>Another possibility is to have one coil on the inside and one on the outside, the one on the outside would live in the bottom half the case and the other would use the whole circle on the inside. The inside one would have a shorter arm so probably less accuracy and less holding/moving torque.</span></p><p><span>Josef Prusa should get a statue, a bit more than an hour to make the test stand:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image57.jpg" title=""></span></p><p><span>Some more relay mutilation</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image78.jpg" title=""></span></p><p><span>A lot of fiddling later I have it working!!</span><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image60.jpg" title=""></span></p><p><span>Initial tests: a bit noisy, probably due to inaccuracies in the machinery but when it is running slowly you can't really hear it. This should be easily fixable using more accuracy (for instance less axle play). The prints for both the wheel and the test stand itself were 'draft' mode so 0.3 mm layers, That alone probably accounts for a lot of the noise and there is some play in the shaft. </span></p><p><span>There is almost no torque. I don't want the system to have too much torque anyway but this is just way too little. The speed is pretty impressive, in full step mode it will go down to about 60 steps per second, and in half step mode to a very impressive 200 steps per second. That's 3.5 revolutions / second, and because you're always within half a revolution of the character you want that's 1/7th of a second update time!</span></p><p><span>So what we have now is a four pole, 8 magnet 32 step per revolution operating in 'half step' mode. Accuracy isn't very high yet, I can clearly see that some steps are not quite moving enough and others a bit too much. This is likely due to various inaccuracies as well as the fact that half-stepping isn't the most accurate thing that you can do with a stepper. Using 16 magnets would solve that (4*16 = 64), but it would cost quite a bit more and I'd like to reduce the parts count and cost rather than to increase it.</span></p><p><span>Hard to believe this worked on the first try even with the crappy setup, the low supply voltage and the less-than-ideal mechanics.</span></p><p><span>Next step will be to tighten up the mechanics a bit, all that slop really doesn't help and I'll add a bearing to make it more quiet. That should also improve precision. I'll reduce the air-gap between the magnets and the coils a bit which should improve the torque and probably the overshoot (which is quite noticable when stepping slowly). Adding a bearing was easy, I found a computer fan that had two really cute 8 mm bearings in it so I took it apart and used those. The inner dia is 3 mm so I've just snapped off the old 'shaft' (for want of a better name), drilled a 3 mm hole and stuck a drill in there. That's good enough for now and immediately it is a lot more quiet and it also spins much faster. Interestingly, there is now so little friction in the system that any dampening effects are gone and you really start to see how the magnetic fields act like a spring or an elastic band. </span></p><p><span>I can now see three full paths to the finish line: the current mechanism with either the steppers moved 'inboard' or outboard in the corners of the device (or in an extreme case: both, for maximum torque, though that would be more expensive than strictly necessary). Another option is to use a servo mechanism with an encoder and a regular little DC motor. This would require a drive component (gear or belt) as well (finicky and not a good life span). And finally a stepper motor such as is used in CD drives to engage with gear theeth on the side of the boss on the wheel. This would be pretty tight, those have worm gears that are three millimeters wide. The one big advantage of that method would be a very high holding torque even when not powered, but it would wear like crazy and likely not live long, especially not if a wheel should ever get jammed, the motor would just shear off the pins.</span></p><p><span>And you'd be dependent on sourcing those things and if there is no longer any economy of scale (for instance: because CD drives are very much out of fashion which really is already happening) then you would no longer able to make the device.</span></p><p><span>I'm a bit worried about the accuracy in half step mode. I could switch to 8 coils with 8 magnets or take the easy way out with 4 coils and 16 magnets, so I'll do that instead. That way I'm 100% sure that the angular movement is accurate and any registration error is eliminated. it's a bit crowded around the circumference if the wheel with these large magnets (hah, when I first started working with them I though they were small…), but presumably we can improve on that by using smaller diameter magnets or by using a single disk magnet with a bunch of fingers under it. You could alternate positive and negative poles like that as well which might open up some other possibilities. </span></p><p><span>What I really like about driving the thing on the outside of the wheel is that you have the full width to work with and if you use smaller magnets in the core of the wheel you minimize the chance of interference with the neighboring wheels because the distance between the magnets is a bit larger.</span></p><p><span>Another issue I've noticed is that the wheel wobbles a bit at the perimeter. This isn't extremely obvious but it might cause friction, wear and tracking errors near the top with the dots moving side-to-side. A full thickness wheel would eliminate that because it would ride against both sides of the case, but ideally I'd want the wheel to be free of the sides of the case by a tiny margin to cut down on wear.</span></p><p><span>Next step: a 16 magnet wheel and a 5.625 degree offset set of coils.</span></p><p><span>Study #11, 5.625° steps, 16 magnet rotor (Feb 25)</span></p><p><span>This necessitates a new test stand because the coils need to be re-positioned. I had to make a new one anyway to better place the 3 mm shaft at the center (I eyeballed the second test with the old one, it worked but it probably was a bit off-center).</span></p><p><span>Another issue is that the wall thickness is getting a bit low and the force required to push the magnets in is rather high. Between the two of them the wheel cracked in one spot. And the center boss that the bearing presses into is too thin so that will need to be fattened up a bit and maybe made higher to further reduce the wobble. It might be possible to make a 'fat' wheel in which case there could be a second bearing on the other wall. </span></p><p><span>Not the most productive day so far :( One of the sticking points is that with the wheel expanded to 16 magnets that there are a lot of opportunities for a magnet to meet something that it really likes. And once that happens you need more torque than the coils can (currently) provide to unstick it. This is a problem because with 4 poles and 16 magnets there is simply no way the coils are able to make the rotor move except for when they are 'lucky' and there is no nice match between an unpowered coil core and a magnet. As soon as that happens it is game over, and on average that seems to happen every 4 steps.</span></p><p><span>This is the second, higher version of the rotor with the thicker wall):</span><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image14.jpg" title=""></span></p><p><span>I see absolutely nothing wrong with it, but I can't get it to move.</span></p><p><span>This needs to be solved before there will be progress again. One way to solve it would be to double the number of motor poles, but that's difficult because of the way the coils are set up. Essentially by the time you do a full 360 you've lost one pole that you will not be able to make up. </span></p><p><span>One solution that I've thought of would be to give more (rather than fewer) magnets something to lock on to, that whey they will cancel out and the rotor should spin more freely without locking. The trick will be to balance the forces in such a way that it all adds up to 0. I'm going to try to achieve this using little nuts embedded in between the coil slots and one more at the last station. That way it does't take up more space on the test stand (that was empty space anyway). </span></p><p><span>Quite a few hours later… still no progress. This is frustrating. I don't quite understand what is going on. There is almost zero torque and the wheel twitches a bit but doesn't move to a new position. I'm going to make yet another wheel with the magnets radially to see if that narrows the field radiated by the wheel enough that it stops locking up. But it also doesn't really lock up, it spins quite freely if you give it a shove, it is when it is moving slowly that it starts to behave quite odd. Why 8 magnets worked flawlessly and 16 magnets doesn't work at all I don't quite get. You'd say that the only difference would be that the 16 magnet version would move with more accuracy but apparently things are not so simple. </span></p><p><span>I must be missing something very obvious here but it isn't cooking. </span></p><p><span>Study #12, radial magnets (feb 26)</span></p><p><span>This also doesn't seem to solve the problem, though it does seem to cog much less than before.</span></p><p><span>Interesting finding: at very low voltage and with slow pulse trains without any passive bits of metal it *does* actually move. Apparently the friction is so low now that the overshoot is tremendous and if you &nbsp;use a lot of power and then move too fast to the next pulse then you overshoot! </span></p><p><span>Ok, found it. That was *very* annoying. The ground of one of the coils had become disconnected inside its sleeve! Absolutely invisible. But now it is working as expected. I noticed because the current consumption didn't match what I expected during one phase engaged. </span></p><p><span>A lock might still be useful. But it need not work on a per-character basis, it is probably fine to lock a whole line at once, and to unlock the line briefly if a character on the line changes. If cells are to be 'modular' this will require some trickery with fixing the cell in place, ideally you could exchange them without any tooling and a lock from below that works on all of the cells at once would probably interfere with that goal. </span></p><p><span>Another thing I'm still concerned about is to what degree a cell is going to have an effect on the cell next to it. And if cells can be individually locked/unlocked you could protect against that to some degree, for instance by unlocking all the odd cells first, updating them and then locking them, then do the same for the even cells. The metal bits weren't useful so I'm going to remove them again, so we're back to using the test stand V2 and both wheels (with radial and axial magnets) work. The radial one works slightly better, it starts up at a lower voltage too and it stabilizes sooner.</span></p><p><span>Here it is running at speed:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image17.jpg" title=""></span></p><p><span>I'm not usually happy about motion blur but this time I am :) </span></p><p><span>This is the rotor when it isn't moving:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image63.jpg" title=""></span></p><p><span>It's dead quiet by the </span><sup><a href="#cmnt5" id="cmnt_ref5">[e]</a></sup><span>way, you can't hear it at all even with your ears practically glued to the device. This looks very promising. I'm still using half stepping but the wheel does not come to a stop on any of the odd numbered positions so there is always a character exposed.</span></p><p><span>The 16 magnet wheel is fairly heavy so it will build up a lot of momentum as it moves, especially when going faster.. This manifests as overshoot when you try to stop it. A ramp-up-coast-ramp-down approach might eliminate some of that.</span></p><p><span>So, now that this works: what to do about those coils? These are pretty big and ugly to boot, it would be nice to replace them with something that is *much* easier to integrate into the device and preferably not scavenged from relays. </span></p><p><span>I see two possibilities: the first is to stuff the coils into the four 'unused' corners of the square enclosing the wheel. That should in theory be plenty of space, but the angular offset may cause some issues there. Also, 16 magnets at $0.20 each is a big chunk of money, and a lot of work to assemble. It would be nice to replace them with a single magnet that is much larger and a metal spider for the stator. That will also be easier to assemble and in theory would allow for a 256 per rotation stepper, so four positions between each of the steps. The coil offsets would then be much smaller than they are now (5.625 / 4). </span></p><p><span>Another option is to place the coils inside the wheel. That's easier said than done but there are a lot of advantages to doing so: it allows the coils to use spiders so they'd work on the whole circle at once (probably much better torque) and the outer portion of the wheel would still be available for electronics. It would make things a little harder in terms of cooling. Yet another option with the coils on the outside would be to use a 'short circuit' rotor that contains metal that feeds the magnetic field to an opposing coil. That way there would be no permanent magnets at all, which would save a lot of money.</span></p><p><span>The number of options is increasing and that's nice but it also increases the chances of following dead ends. I like the radial setup, it probably will work best when using coils outside of the wheel but if the coils move to the inside of the wheel then the radial setup uses a lot of space in the wheel and that space can not be used for coils. </span></p><p><span>Coils inside are also nice in that it may be possible to use only a fraction of the number of magnets that we are using right now, one on one side of the stator and one on the other. </span></p><p><span>This seems like the best solution, but making four stacked coils that small is going to be very hard, essentially there is only 5 mm or so (wall, circuiit board, coils, spiders(4!), wheel, next wall) for that whole stack and that isn't a lot. This also increases the risk of interference with the next wheel because the coils at the extremes are very close to their counterparts in the next character cell. Applying 'holding current' to the wheels next door is probably going to be a requirement. Each set of coils would be offset half a tooth from the other. Some passive shielding metal could also be made part of the wheel but an airgap might work better and maybe the field will be contained enough by the spiders. </span></p><p><span>You could also make the four coils as quarters of the space inside the wheel (but then you'd need all 16 magnets again). </span></p><p><span>It might be possible to do away with the walls in that arrangement as well. You could just have a stack of wheels spinning side-by-side with a tiny gap between them. That would allow for maximum space for the coils but wiring them would become a nightmare (you'd have five wires come out of each character slot that need to make it to the controller somehow). </span></p><p><span>Yet another option is to put two coils on the inside and two on the outside. This would require some careful balancing of the forces so that you don't end up wiht a lot of torque on the one set and very little on the other. It would also be bad in that the outer coils appear to work best with the radial arrangement but the inner ones need that space so they more or less dictate the use of the axial shape. </span></p><p><span>Yet more possibilities: drive the coils with an H-bridge rather than to have four independent coils and reverse polarity to get the effect of four coils while using only two?</span></p><p><span>Torque (holding torque or moving torque) could be increased by running the coils that are not attracing the magnets in reverse. That would cause the magnets to want to avoid that space. This should be relatively easy to test: reverse the coils and drive three of them on and one off.</span></p><p><span>Ok, so that actually works. I just reversed the state of the output bits after reversing coil polarity and it does exactly what it should do. That trick will work with any magnet/coil arrangement, it's mostly a matter of drive electronics, ideally you'd use an H-bridge per coil (so 4 H-bridges of 4 transistors each) so that you can reverse the polarity of the coils. Then you'd drive 3 to exclude and one to attract the magnet for max torque.</span></p><p><span>Funny thought: you could do 'blinking text' by rocking the wheels up and down a fraction of a character. This may seem like a useless gimick but you can use it for cursors and such, and you could even use it to make a gray scale like effect if you withdraw the wheel a bit into the casing ('fading out the text'). Gray scale is a bit rude in the context of blindness but the effect would be analogous, the text would sink into the page in the most literal sense possible. </span></p><p><span>Yet another option do drive the motors. One problem with the way things are arranged right now is that the field has to travel through the face of the wheels. This makes things awkward: the faces have the studs on them which increases the air gap and the magnets have to ride a bit back from the face to allow for some material to remain. A possible improvement would be to lay all of the magnets flat in the wheel in cavities you'd then drive the wheel from below (if you think of the wheel as flat instead of upright the way it is going to be mounted in the case). </span></p><p><span>That's interesting for many reasons: the airgap can now be reduced to an absolute minimum, you could probably use *far* smaller magnets which would reduce the weight of the wheel considerably and it might be possible to put the coils directly on the circuit board as part of the traces instead of as a separate component. This would also greatly enhance the placement of the coils and would allow you to drive *all* of the magnets rather than just the four that happen to be in front of the coils. That's worth a try I think, but circuit boards and such will have to wait until we are approaching something like a final design so better to make another test stand and another wheel.</span></p><p><span>I also tried a quick alternative version with inserts in between the coils to improve on the fact that the magnets keep seeing a different amount of metal (which is the root cause of cogging) but that didn't help. (teststand #11/2)</span></p><p><span>Study #12, magnets flat, drive from the side (Feb 26)</span></p><p><span>This wheel is a bit more tricky than the ones so far. There is only a very thin layer of material for the base of the wheel and now the forces acting on the wheel will work directly against that thin layer rather than across the wheel towards the drive shaft. Any kind of play in the bearings or flex in the material will immediately have an effect on the wheel itself as well as on the positioning of the wheel in the readout window. Smaller magnets would certainly help but I only have the 6 mm x 2 mm round ones right now to play around with so I'll have to live with that. Another issue is that now the magnet fields and the drive fields are aligned across the long axis of the device rather than into the space around it. This massively increases the potential for one character to affect its neighbors. </span></p><p><span>You can combat that in a number of ways: apply holding torque to the neighbors that aren't supposed to move. Synchronize movement between neighbors as much as possible (this creates some very non-local control problems which would massively complicate the software). Shield neighboring characters from each other magnetically. For instance if you made the wheels of steel with a plastic rim with the dots on them that would be one way to create a shield that doesn't require extra space. That would add a weight penalty though, and accelerating and decelerating more mass means that the machine uses more power.</span></p><p><span>Driving this wheel, even temporarily is harder than driving the previous versions, those could be driven from the space around them (which is plentiful in these test setups). But this wheel with the magnets oriented flat is a lot harder to drive, the drive magnets will have to move under the wheel somehow. But since that is how they will eventually be deployed we may as well embrace it. I'm envisioning some kind of enclosure that you slide the coils into. This will be a lot more compact than before so I'll have to make sure that there is enough room.</span></p><p><span>Another lock option: to short circuit the coils that are not in the path of alignment so that any magnet that wants to move into that slot will be repelled by its own mirror image field. &nbsp;</span></p><p><span>The wheel is done:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image20.jpg" title=""></span></p><p><span>&nbsp;The drive side is the other side, the magnets are almost (.5 mm) on the surface so that's going to be a tiny air gap. This is even more suitable for a thin spider riding side the wheel with a few of these magnets to get a field. </span></p><p><span>And now that I have this wheel and I've thought about a way to drive it I suddenly see that there may be a way to get that original idea with the three bits on top of each other or two bits side-by side to work. But that can wait for now but it is a nice option to have just in case this becomes a dead end, or if we can make that one work better.</span></p><p><span>I can see some inherent advantages to this bigger wheel, for instance it always lines up the two columns, it levels the wear across a much larger number of dots so that should help longevity, it's super simple to assemble (just pop the wheel + circuit board into a case) and it is locked in one direction of movement by the design itself, you only need to stop the wheel from rotating. </span></p><p><span>But the smaller one is *smaller* and that's a huge advantage, it would probably be cheaper to make, would use less power, can't lose synchronization and update faster. Besides, the smaller ones doesn't even need a whole wheel, all it would take is 1/3rd of a wheel at 24 mm radius or so. With that 8 mm bearing that means that only 16 mm would be required for the 'wheel'. The left and right side of that cell would be driven at different distances from the center so they don't interfere. A casing that size is a lot smaller than the one for the big wheel (but there would also be less stuff in the casing), and that's a serious challenge. </span></p><p><span>Here is a sketch of what that could look like both halves would be partially concentric: </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image88.jpg" title=""></span></p><p><span>I'm pretty sure you could make that work and I will re-visit this once I have all of the challenges of the bigger wheel figured out. There are probably many more lessons left to learn from that. Next up, the testbed to drive this wheel. </span></p><p><span>Hm, yet another idea about that partial wheel version: it could even be voice coil activated, where you would calibrate the amount of current required for a given deflection.</span></p><p><span>Study #13, test driving the flat magnet wheel (Feb 27)</span></p><p><span>The testbed took a while to make, it wasn't obvious from the beginning how to lay it all out, I ended up tweaking the other testbed until I had a good enough version to play with, here it is:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image19.jpg" title=""></span></p><p><span>The coils live in the four spaces, the wheel rests on top of the shaft like before. But the magnets are now pointing 'up' (which in a real device would be from the right hand side of the wheel). I'm running out of PLA (the 3D printer has been running pretty much non-stop for the last week) so I've put a bunch on order. Silly details but it could easily cost a day or two if I had not noticed. I couldn't bring the magnets in close enough like this, so I made another one to open up the centers and to move the magnets in further towards the center, this also required trimming the base of the coils so the coils wouldn't interfere with each other. </span></p><p><span>And here is the wheel to go with it:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image44.jpg" title=""></span></p><p><span>Note the super thin layer at the bottom that retains the magnets. This could be reduced to zero if you really wanted but then you have to glue the magnets in place which I won't do for now.</span></p><p><span>But… it didn't work. The problem is that the magnets are so strong that they will overpower the magnetic field generated by the coils by a considerable margin. The effect is that the magnets will lock on on the cores of the relay coils and that will be that. The 'weak' version was better in that sense, the distance between the cores and the magnets was so large that the coils made a difference. But once the airgap is down to nothing it is game over. This cogging effect is a major showstopper, but I have an idea on how to improve on it.</span></p><p><span>It's interesting though, I learned a ton about how the magnetic fields in a motor or generator balance. I made a windmil a decade and a half ago and all that knowledge comes in very handy right now, but there is a major difference between getting a power generating device not to cog and doing the same thing with a stepper motor whose position is expressed in thousandths of a degree. That is a wholy different kind of demand.</span></p><p><span>What I've also decided is that for now I'm willing to compromise on:</span></p><ul><li><span>power requirements</span></li><li><span>costs</span></li><li><span>surface level (see the indentation)</span></li><li><span>line to line distance</span></li><li><span>speed of update</span></li><li><span>service life</span></li><li><span>serviceability</span></li><li><span>size of the whole machine</span></li><li><span>weight</span></li><li><span>how solidly the characters are locked (they can wiggle but they should always spring back)</span></li></ul><p><span>I do not care if it takes a nuclear power station to run it as long as it works and I don't care how much a single item will cost. Things I'm definitely not willing to compromise on</span></p><ul><li><span>character quality</span></li><li><span>inter-character distance</span></li><li><span>correct character displayed</span></li><li><span>full 6 bit set</span></li><li><span>sound level</span></li><li><span></span></li></ul><p><span>Study #14, very flat coreless coils (Feb 27)</span></p><p><span>So, what if you didn't need those cores? Just have cores that are all copper without any metal inserts to focus the magnetic field. This would require a ridiculously small airgap to work, but since we have no space to begin with I see that as an advantage and it might also help against wheels interfering with each other. The 'runaway fieldlines' are still quite focused when you are close to the coil, they start to spread sideways in the airgap and the whole point of the metal core of an electromagnet is that you focus those lines to where you want them: the exact center of the coil. But metal also introduces complications, for instance you might end up permanently magnetizing the core (so you'd need to de-Gauss the core!). </span></p><p><span>First step is to make a bunch of electro magnets, I scrounged up an old solenoid from an electric piano, and made a coil body and wound it. That seemed to work. Then I printed a bunch of absolutely tiny cores. These are 20 mm across but only 5 mm high, the lower right ones are the lids the rest are the core bodies. They're obviously not very strong at that thickness so removing them from the printer bed was a bit of a chore but it worked.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image66.jpg" title=""></span></p><p><span>This is what they look like assembled (USB connector for scale):</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image27.jpg" title=""></span></p><p><span>And here is the assembled coil on test stand #6.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image53.jpg" title=""></span></p><p><span>I wished I could say that that did the trick, but alas. As you can see on the lower picture the winding of the coil (on a cordless drill) pushed out the retaining flange so it rides a lot higher than it should have and that means that the airgap is much larger than it was meant to be.</span></p><p><span>For a quick test I put in a 2 mm drill to serve as temporary core but that of course immediately cogged like mad, enough to pull the wheel over! So this isn't going to work as is. </span></p><p><span>I did get to practice my coil winding skills and now I'll go and make another testbed that will hopefully eliminate the cogging issue.</span></p><p><span>Study #15, More Metal (Feb 27)</span></p><p><span>If coreless isn't going to work (and there are many reasons why it seems that that isn't going to work unless everything is 100% flat and there is absolutely zero play in the bearings, which is not exactly the case with the ones that I have) the we could alternatively fill up as much of the unused space with metal to make sure that the magnets always see an equal amount of it. The only differentating factor left then is the magnetic field of the coils as if the metal isn't there at all and that's the best way to focus the field as well which means the whole assembly will be a little bit more forgiving. </span></p><p><span>Here is teststand #7, the little m3 bolts have been screwed in until their heads are flush with the plate and the center hole is another m3 bolt running through the bearings. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image74.jpg" title=""></span></p><p><span>The wheel isn't the nicest wheel so far, it got a bit messed up during the printing, and if you fix it using a screw with that ball bearing in it (which is the wrong bearing) then you end up with the wheel at a slight tilt. </span></p><p><span>&nbsp;</span><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image58.jpg" title=""></span></p><p><span>But even with not all of the screw holes populated you can already tell that this will probably reduce the cogging a lot more. So I'll print up another wheel with a taller bearing support in the middle so that I can run two bearings and a thicker base so that the shaft has more length to align with.</span></p><p><span>Incidentally, that 'blinking text' idea may have more merit than I thought at first. You could subtly lower and raise the height of the character in the cell causing it to 'fade out' (this would require jacking up or down the whole assembly, which is a pretty complicated problem to begin with) and you could use it to display color by associating colors with frequency of vibration. Even a single octave would already give 12 different colors that you could recognize and two octaves would give 24 (or 14 if you just want 'white' keys).</span></p><p><span>Study #16, Thicker base, taller bearing support</span></p><p><span>This is just an incremental improvement over #15, but it really should tighten up the tolerances further. I've noticed one more thing that I can improve which is that the space next to the final two holes is large enough for another hole so I'll add that manually (I've already printed the base and don't feel like waiting another hour for an improved one). </span></p><p><span>Here is the base (which is used 'upside down', the part that touched the plate of the 3D printer is the side that faces the wheel):</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image55.jpg" title=""></span></p><p><span>You can clearly see the two reworked holes. This is the bottom (away from the wheel):</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image51.jpg" title=""></span><span>:</span></p><p><span>This can also be improved on: the magnets could rise a bit creating gap underneath and in that gap you could ride the screw heads (which are technically speaking the ends of the magetnetic poles of the electro magnets. This helps because it will even out the metal distribution under neath the wheel and hence will help align the fields with the magnets. It may be that with smaller magnets that will work against you but that I can not test that yet. Narrower magnets will also allow for narrower field poles so more room for windings (not a whole lot but ever little bit matters). That gap is not that simple: it requires the magnet support to start at a non-zero Z coordinate and that's something that is pretty tricky for a 3D printer. But maybe it will work, I will definitely try it. The ability to move the metal to the core of the wheel gives back some very valuable space and we don't exactly have a whole lot of that. This is the wheel with the bearings in it. The m3 nut is to give it something to ride against the base with, otherwise the wheel bearing will get into contact with the base and then there is a lot of friction so we need to offset the center of the bearing by just a tiny little bit. I would have rather done without that but for now this is fine, it's just a trial after all.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image61.jpg" title=""></span></p><p><span>The top of the wheel shows the extended wheel thickness to make up for the crappy bearing quality. Eventually a wheel should have a much larger diameter bearing in it. with a good press fit and a ground shaft running through the center for much more precise positioning. We could probably do away with a lot of the possible alignment problems by making the rim of the wheel the full cell width with a tiny gap to the next wheel. But that would stop the 'per cell independent' open and I think that's a powerful one to have (for instance: to improve serviceability, just pop out a cell and replace it) </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image50.jpg" title=""></span></p><p><span>Here is the base with the screws for the coils and the dummy screws in. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image16.jpg" title=""></span></p><p><span>The reverse clearly shows which is which. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image49.jpg" title=""></span></p><p><span>But… Mother Nature is suspiciously hard to fool. It still cogs like mad. A test with a single magnet in a wheel shows clearly what's going on: the dummy screws don't have enough meat to eliminate the cogging, it is reduced a little bit but it is still there. So remove the dummy screws again and replace them with full sized screws.</span></p><p><span>Study #17, all screws full length (Feb 28)</span></p><p><span>This is what it looks like:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image47.jpg" title=""></span></p><p><span>Ok, so that actually improves things quite a bit. It obviously makes placing the coils that much harder but the problem really does seem to be related to the total mass of iron being a particular position. This makes me wonder if you could replace dummy screws with a horizontally aligned chunk of metal or whether it actually has to be real thing at 90 degrees to the wheel. </span></p><p><span>Another option then would be to do away with the 'dummy' metal (though you could potentially use that to add another 8 coils and possibly do away with 8 of the magnets but as I noted in a previous bit that probably isn't effective cost wise, especially once you start using smaller magnets). </span></p><p><span>There is still some cogging which I attribute to: the wheel not being perfectly level (that's going to be one really difficult to satisfy requirement in a production design, it has to sit *exactly* right and at the top of the wheel the user is more or less on purpose trying to angle it by the scanning movement). </span></p><p><span>One very obvious factor that causes some of the cogging is the fact that the ninth spot is a slightly larger gap. I wonder what would happen if we simply divide the circle into 18 exactly equal parts and treat the result as a slightly longer track. 18 isn't a nice number to divide by. But you could use three coil groups like that and get 3x16 = 48 steps. Not enough, so then 3x 22 magnets for 66 positions instead of 64. That would work, just leave the last two spots blank (though this will slightly reduce the character height or you'd have to use a slightly larger wheel).</span></p><p><span>But I'm still a bit puzzled why 16 x 4 doesn't 'just work'. The fact that they line up and cause cogging is now easily explained because the magnets seek the cores of the screws but with only 8 screws present all positions should be of equal value and yet it cogs like mad. I really don't quite get that.</span></p><p><span>Many hours of endless tweaking of screws later. Ok, it *does* work, or, at least, it could work. But it really doesn't. And the reason why is an interesting one. The shaft hole isn't perfectly perpendicular to the surface of the testbed. So the wheel with the magnets rides a little bit closer to some of the screws than to others. you can adjust for that by screwing that screw 'out' a bit so there is less metal. Keep on looking which ones are the dominant ones every time you spin the wheel and eventually you can get it to be almost even.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image82.jpg" title=""></span></p><p><span>Some more testing: and it also seems as though not all magnets are created equal. Some are quite a bit stronger than others and this upsets the balance as well. Interesting because so far I assumed that all neos from a batch are the same but that does not appear to be the case. This might be an explanation for some of the other things I've seen as well. </span></p><p><span>But: matching neos or endless tweaking of screws is simply not an option, it needs to work regardless. If you go for 64 poles inside of a space that is 33 millimeters in diameter that gives you approximately 3.14 * 33 = ~100 mm of length to work with. Each pole would be only 1.5 mm wide or so.</span></p><p><span>Still, that's 'doable', you could make the pole shoes out of steel wire and bend them into the right shape or the whole thing could be 3d printed with the pole shoes inserted into the print.</span></p><p><span>Another option with far fewer poles would be to go completely based on reluctance alone. No permanent magnets (cheap!), just a bit of laminate. 18 coils (9 stator phases) and 8 stator poles would do the job. It would give 72 possible positions though, which is not ideal but we can fill in the remainder with blanks on the wheel (or maybe some spares for the most frequently used letters so we can do wear leveling or increased speed because they are closer?).</span></p><p><span>What I really like about that particular option (besides the price) is the fact that without permanent magnets where will be no cogging at all. The downside is that we'll need a hold-down soluion or we'll be expending more power.</span></p><p><span>Study #18, reluctance, 9 coil stator, 8 pole rotor (28/Feb)</span><span>&nbsp;</span></p><p><span>This is just a small variation on the previous setup, really. The base has been re-done to evenly divide all of the coils across the 360 degrees (40 degrees per coil) and the wheel has been set up with 8 m3 nuts as rotor core. Obviously that's not ideal, there is no 4-fold symmetry and the coil does not connect back to itself (though it might be possible to run a passive through to the other side, you could run the magnets to either side of the passive to repel but that would require 9 H-bridges to drive it). There simply isn't space for that, the coils would be dia and with a 1 mm coil body and 3 mm core that would leave you half a mm for the windings themselves. So instead we alternate side-to-side, which gives 9 usable coils.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image34.jpg" title=""></span></p><p><span>Top view, that's the cheapest wheel so far :) :</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image70.jpg" title=""></span></p><p><span>Coils are 10 mm high for now, with each coil 12 mm diameter. Inner diameter is 3.5 mm so there isn't a whole lot of winding space.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image18.jpg" title=""></span></p><p><span>That's 250 windings, the wire is .15 mm thick. I've left some space in the coil because I'm pretending that I can wind nicer coils that are lower. There also is some slop in the coil body relative to the 3 mm steel core so it might be possible to make that a bit narrower stil which would allow squeezing in another 3 layers of coils, say 75 more turns. Coil resistance is 5 Ohms, so at 5V this thing would burn up in a few seconds. And torque is obviously minimal.</span></p><p><span>Winding these is a complete PITA, this took an hour or so:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image79.jpg" title=""></span></p><p><span>Driving this will not be fun. the darlington chip that I've used so far only had 4 of its internal 7 transistor pairs wired up so that won't be enough, you need 9. I can add two more dairlington pairs the old fashioned way (and a flyback diode to protect them) or add another chip, but they're expensive. Another option would be to do all of the driver circuitry with discrete components but that will eat up a lot more circuit board space. It will be expensive and with this many coils they will need to be wound from angel hair and currents will be very low so the field per coil will be minimal. I don't think I've wound this many coils since the windmill project and there at least I could see the wire. You get 72 steps per revoluion (9x8) so there will be ~12% wasted space on the wheel.</span></p><p><span>I've wired up five of the coils with four of them connected to an output of the driver board:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image65.jpg" title=""></span></p><p><span>It's a bit crowded under there. I didn't quite get enough attraction out of the coils even at a whopping 0.9 A which I expect them to survive for no more than 10 seconds. Essentially these are fuses that are abused for their magnetic properties.</span></p><p><span>&nbsp;</span><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image43.jpg" title=""></span></p><p><span>Interesting: I briefly tried with magnets instead of a spider or nuts on top of the wheel and cogging is *very* low. Wonder what's going on with that.</span></p><p><span>So, overall not very successful. It took almost a day to make this one and I expected more of it, to be honest but it's fine, I can see that I cut a lot of corners: half the coils, no short-circuit along the back and the rotor is only driven from one side instead of two. But I like it a lot more than the 8 + one half scheme from the previous test and it has better symmetry. Cogging is clearly much less. </span></p><p><span>In spite of the lack of success I learned a lot from this one: </span></p><ul><li><span>symmetry really matters</span></li><li><span>coils need to have many more turns to be practical at these voltages and currents</span></li><li><span>4 stator poles is a practical maximum because otherwise wiring and drive get too complicated and coils get too small</span></li><li><span>cogging may not be a disadvantage, if used strategically it can solve part of the lock problem, the other part would be provided by a holding current (at the expense of some power consumption)</span></li><li><span>the amount of field strength the electromagnet puts out needs to exceed the field strength of any permanent magnets to overcome the cogging.</span></li><li><span>3D printing coils really is practical and you could automate the winding process fairly easily.</span></li><li><span>passive rotors (even without magnets) are a real option and if a full magnetic circuit can be achieved they'll probably have fairly impressive movement torque but essentially no holding torque at all unless they are fully powered up so you'll see a lot of power consumption and possibly the coils will run hot or need cooling.</span></li></ul><p><span>I'm sure someone that has studied EE would have a great time reading about all of these very basic things but for me they're not quite new, it's just that the scale at which this all manifests is making it much harder than I thought it would be. The windmill that I built also had a cogging issue which we solved by throwing away some of the field in the stator (rotating the laminations across 1/3rd of a pole). For power generation that's an easily solved problem: you just have a tiny little bit less power. But for positioning that's not so simple to solve: a positioning error in a direct drive stepper is essentially unforgivable. You could correct for it on the wheel but that would make the script uneven and that's not what I want and I think that's a rule that should not be broken. Characters should be identical and dots from one cell to the next should line up perfectly (I just added this to the constraints list, I had totally missed it as a constraint). </span></p><p><span>The holding torque is much better than the torque available for movement. This suggests a very weird variation on the drive theme, add on massive winding of only a few turns to the coils and use that for the movement by pulsing it with a very high current for a very short time. That would cause the wheel to start moving, and then immediately you engage the coil with many windings to stop it from moving just as it is about to pass the center. That way you arrest the movement and provide holding torque. That second coil could be wound with even thinner wire and could have thousands of turns allowing it to be energized for a long time without using a whole lot of current/power. There is the issue of inducing a very high voltage in the coil with lots of windings by the other one, after all this is really just a transformer so that would need to be dealt with somehow.</span></p><p><span>Of all the studies so far this one was *by far* the most elaborate one but it really lays bare some of the major remaining challenges and I'm happy I built it, since the windmill project this is the most elaborate electro mechanical device that I've made and I am now far more confident that this project has multiple feasible solutions. Adding higher resistance coils with many more windings and a magnetic circuit would be obvious ways to improve it substantially but I'll leave that for now because I know that can be done, it's just that I don't think the 9 coils version of the design warrants that kind of effort, it's essentially a dead end for many reasons.</span></p><p><span>Study #19, tri-phase, 16 pole rotor (29/Feb)</span></p><p><span>After the previous study I think drive train complexity should be reduced as much as possible. </span></p><p><span>The furthest that I can reduce it is to go for 3 phases x 22 rotor poles. That gives 66 possibilities which is a little wasted space but that's acceptable. You could do two phases as well, which would get you there exactly (4 basic steps and 16 magnets) and you'd have even more turns, and one coil reduction may not be worth it. Still, the two are very close and which one is the better one I can't really tell right now. It's tempting to just do a three phase drive with 16 magnets for 48 positions, at 7.5 degrees per step. I have plenty of wheels for that and I only need to see what kind of drive power and torque I can get out of that. And when I get smaller magnets I can put 22 on the perimeter and test with that. </span></p><p><span>The relays can be re-used again to drive it but I'll need another base to hold them, and I don't really like using the relays because they're scavenged but in principle it is fine for testing. The coils from the previous test are too weak to be of much use, they have very few turns and need a huge amount of current to do anything useful. </span></p><p><span>I could print a little universal relay holder that can then be glued at the right angle and radius from the wheel. A simple raised rim on the base would give you something to position the relay holders against. Angle markers every 5 degrees would allow you to easily pick out an angle to try.</span></p><p><span>I'm very confident that this one will work (thought the electronics will be nasty) and gives a lot of space for the coils because there are only three of them. but the placement of the coils is a bit tricky, they'd have to live under the wheel but for maximum torque you want the magnets to be near the outside. A little lamination could be made that routes the field from the top of the coil to the rim where the magnets are, and the bottom part of the coil would route the opposite pole to the other side. </span></p><p><span>That way you have only three coils but you still inject the field at two spots around the perimeter, once to attract the manget you're interested in and to repel the ones that you are not! This would double the effect of the coil at the expense of a tricky bit of metal fabrication. But a 3d printed stator with metal embedded in it might work (though placing the coil would get a bit more of a problem). Anyway, that's for later, first get this one to work, then make a version with the right number of steps.</span></p><p><span>Building it was pretty quick, I've done enough of these now that I no longer stare at the 3D printer to see if it will all work or not. I did notice that my tools have a strong tendency to become magnetized! Wonder why… </span></p><p><span>So, this is what the 3 phase setup looks like, the three coils are at 0, 127.5 and 255 degree positions. That means one of them is always in front of a magnet. Like with a two phase stepper that requires a bi-polar drive using H briges. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image90.jpg" title=""></span></p><p><span>The coils are wired up in 'delta' mode for a bit more torque (at the cost of more current</span><sup><a href="#ftnt4" id="ftnt_ref4">[4]</a></sup><span>), that means that they alternately pull the rotor towards them and push it away again but that really only works if the next magnet is in the reverse orientation. So half the magnets would have to have their north pole facing inward, the other half facing outward. </span></p><p><span>Each phase is offset by 120 degrees *within* the alternating pair of magnets on the rotor, and those are 22.5 degrees apart hence the 7.5 and then 15 degrees offset. So the phases will alternatively see 'nothing', a North pole, 'nothing' and a South pole, after that the whole cycle starts over again. </span></p><p><span>Study #20, Three phase stepper driver (29/Feb)</span></p><p><span>Approximating a sinusoidal drive with binary control is less than perfect (to put it very mildly), ideally you'd want to better approximate the shape of the wave, but PWM might help here to do that. It's pretty cray to have essentially a miniature tri-phase inverter inside a single character cell!</span></p><p><span>Tri-phase requires the drive to be bi-polar, This requires H-bridges</span><sup><a href="#ftnt5" id="ftnt_ref5">[5]</a></sup><span>&nbsp;to drive the windings, with every winding alternating between -, 0 and '+'. Here is a phase relation diagram to show what's going on, time is moving left-to-right indicated by the angles:</span></p><p><span>&nbsp;</span><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image59.jpg" title=""></span></p><p><span>Time between two magnet pairs is 360 degrees, the magnets can be imagined to try to 'match' the closest opposite of their own fields (because opposite poles attract). So think of the magnets as trying to 'ride' the peaks (followed by the South poles) and the valleys (followed by the North poles) of the the waves. Ideally you'd drive the phases with nicely changing wave forms but that is something that would consume power like crazy and waste most of it as heat (transistors like to be 'on' or 'off', not to sit in the middle where they act as resistors converting power into heat).</span></p><p><span>One way to solve that is to use PWM</span><sup><a href="#ftnt6" id="ftnt_ref6">[6]</a></sup><span>, you very rapidly</span><sup><a href="#ftnt7" id="ftnt_ref7">[7]</a></sup><span>&nbsp;switch the phase on and off to simulate an in-between voltage. That might give precise positioning even with fewer magnets but for now I'm going to stick with the plan to use 22 of them.</span></p><p><span>When phase R is at its peak at t=90 degrees it will have a South pole in front of it and 270 degrees (so 22.5 degrees of angle with 16 magnets) it will have a North pole in front of it. 180 degrees later at t 450 (or 90 again…) the cycle repeats. So that's two magnets that both have seen their 'ideal' spot, which means that the step is complete. Meanwhile phase s is doing the same thing, but 120 degrees offset: at t=210 it will face a South pole (but of a different magnet than the one that R saw, after all the coils are in completely different spots on the circumference), at 390 (or 30, if you wish) it will face a North pole and so on. And for phase T the North pole is present at 330 degrees of phase angle and the South pole will be present at 150 degrees.</span></p><p><span>And that's for six index positions of the rotor (2 magnets, 3 positions each). Here is the driving sequence for the best timing in steps of 15 degrees of phase, so 12 of these need to tick by for one full magnet step of the rotor (180 degrees of phase), with only those angles mentioned where there is a change:</span></p><a id="t.a10b4249c0d2e6ba463b754b82a5c5ea0a1e75cc"></a><a id="t.0"></a><table><tbody><tr><td colspan="1" rowspan="1"><p><span>phase angle (time)</span></p></td><td colspan="1" rowspan="1"><p><span>Phase R</span></p></td><td colspan="1" rowspan="1"><p><span>Phase S</span></p></td><td colspan="1" rowspan="1"><p><span>Phase t</span></p></td></tr><tr><td colspan="1" rowspan="1"><p><span>15</span></p><p><span>45</span></p><p><span>75</span></p><p><span>105</span></p><p><span>135</span></p><p><span>165</span></p><p><span>195</span></p><p><span>225</span></p><p><span>255</span></p><p><span>285</span></p><p><span>315</span></p><p><span>345</span></p></td><td colspan="1" rowspan="1"><p><span>0</span></p><p><span>+</span></p><p><span>+</span></p><p><span>+</span></p><p><span>0</span></p><p><span>0</span></p><p><span>0</span></p><p><span>-</span></p><p><span>-</span></p><p><span>-</span></p><p><span>0</span></p><p><span>0</span></p></td><td colspan="1" rowspan="1"><p><span>-</span></p><p><span>-</span></p><p><span>0</span></p><p><span>0</span></p><p><span>0</span></p><p><span>+</span></p><p><span>+</span></p><p><span>+</span></p><p><span>0</span></p><p><span>0</span></p><p><span>0</span></p><p><span>-</span></p></td><td colspan="1" rowspan="1"><p><span>0</span></p><p><span>0</span></p><p><span>0</span></p><p><span>-</span></p><p><span>-</span></p><p><span>-</span></p><p><span>0</span></p><p><span>0</span></p><p><span>0</span></p><p><span>+</span></p><p><span>+</span></p><p><span>+</span></p></td></tr></tbody></table><p><span>Phase angles 30(S), 90(R), 150(T), 210(S), 270(R), 330(T), &nbsp;are the 'full' step positions even if nothing changes at those particular times. One coil is 'on' while the other two are 'off'. Which is a nice reflection of the fact that you can command a motor to move but it will take some time to get there (look at say 75 degrees, that's when you switch off phase 'S' so the dominant phase is now 'R' but that doesn't mean that it immediately is in the dominant position, that movement will take 15 degrees of phase angle 'time' which corresponds to some actual wall clock time). &nbsp;</span></p><p><span>So, that would be the Rolls-Royce of three phase stepper driving, requiring three full H-bridges with six full step positions and six half steps in between. But we're cheap so we do it with three half bridges instead. This makes our approximation even more coarse, with only 6 possibilities.</span></p><p><span>Unfortunately I don't have any H-bridges lying around so I've put in an order and it should be here tomorrow. That's kind of annoying. I could cobble my own together but that's a nasty little circuit with 4 darlington pairs per bridge and I need three of them so it is probably even faster just to wait for the delivery.</span></p><p><span>I wonder what would happen if you left out half of the magnets, it might be that there would be enough remaining torque from the remaining ones to move the rotor around, but I do suspect that the positions where those magnets would be the dominant ones are going to be imprecise so better not to do that.</span></p><p><span>I've found two integrated circuits with H bridges in them, the L298N and the L293D. Both are *seriously* overpowered for this application, and probably a lot more expensive than need be. And you need 1.5 of them per character cell (though the other half could be shared with the next door neighbor cell). These are relatively expensive parts but the number of coils is now only three per character cell so that should create some savings.</span></p><p><span>Wiring this all up is going to be a bit odd, you use three half H bridges that normally would be used in pairs to drive one winding each but here we will combine them like this:</span></p><p><span>+ --------------------</span></p><p><span>&nbsp; &nbsp; | &nbsp; &nbsp; | &nbsp; &nbsp; |</span></p><p><span>&nbsp; &nbsp; / &nbsp; &nbsp; / &nbsp; &nbsp; /</span></p><p><span>&nbsp; &nbsp; | &nbsp;u &nbsp;| &nbsp;v &nbsp;| &nbsp;w</span></p><p><span>&nbsp; &nbsp; +UUUUU+UUUUU+UUUUU+--to 'R'</span></p><p><span>&nbsp; &nbsp;R| &nbsp; &nbsp;S| &nbsp; &nbsp;T|</span></p><p><span>&nbsp; &nbsp; / &nbsp; &nbsp; / &nbsp; &nbsp; /</span></p><p><span>&nbsp; &nbsp; | &nbsp; &nbsp; | &nbsp; &nbsp; |</span></p><p><span>- --------------------</span></p><p><span>Each vertical pair of switches is controlled by a single bit, so when one switch is on the other is off and vv.</span></p><p><span>What is interesting about that is that if you look at the problem naively you might think that you need three full H bridges to drive the motor, but you can optimize by connecting the points that have the same voltage for each coil pair together. At any given moment there is one phase negative, one zero and one positive. This helps to do away with half of the H-bridges. So then you're left with three halves with the coil pairs in the middle. </span></p><p><span>The coils are labelled u,v and w. R,S and T are the phases. Current will flow through the coils as a result of what R, S and T are set to. The big trick is that there are multiple ways of saying '0', you could leave all half bridges de-energized and that would be 0,0,0. Or you could switch both R and S to be high, then for the coil between them that too would be a 0! So even if a half bridge doesn't have a '0' input that doesn't matter because if both R and S are '+' then for coil u that's a zero. </span></p><p><span>Three bits of input give eight possibilities two of which leave the windings all idle, the remaining six correspond to each of the full step positions with two windings on at all times:</span></p><p><span>&nbsp;angle pos bits &nbsp; R S T &nbsp; &nbsp;U V W &nbsp; &nbsp;</span></p><p><span>&nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp;000 &nbsp; &nbsp;- - - &nbsp; &nbsp;0 0 0 all coils are off</span></p><p><span>&nbsp; 270 &nbsp; 1 &nbsp;001 &nbsp; &nbsp;- - + &nbsp; &nbsp;0 + - &nbsp;</span></p><p><span>&nbsp; 150 &nbsp; 2 &nbsp;010 &nbsp; &nbsp;- + - &nbsp; &nbsp;+ - 0 &nbsp; </span></p><p><span>&nbsp; 210 &nbsp; 3 &nbsp;011 &nbsp; &nbsp;- + + &nbsp; &nbsp;+ 0 -</span></p><p><span>&nbsp; &nbsp;30 &nbsp; 4 &nbsp;100 &nbsp; &nbsp;+ - - &nbsp; &nbsp;- 0 +</span></p><p><span>&nbsp; 220 &nbsp; 5 &nbsp;101 &nbsp; &nbsp;+ - + &nbsp; &nbsp;- + 0</span></p><p><span>&nbsp; &nbsp;90 &nbsp; 6 &nbsp;110 &nbsp; &nbsp;+ + - &nbsp; &nbsp;0 - +</span></p><p><span>&nbsp; &nbsp; &nbsp; &nbsp; 7 &nbsp;111 &nbsp; &nbsp;+ + + &nbsp; &nbsp;0 0 0 all coils are off</span></p><p><span>Current will only flow when one side of the connection is a + and the other a -. &nbsp;And adjacent phases are always going to be either opposite (- and + or + and -) or one or both will be zero (0,+ / +,0 / 0,- / -,0 / 0,0). That means that you can drive one side of each of those connected coils with the same half H-bridge. &nbsp;</span></p><p><span>The driving order is 4,6,2,3,1,5 so that all coils see the sequence - - 0 + + 0 offset by 120 degrees which corresponds to the 30,90,150,210,270 and 330 angles from the phase diagram (so only the peaks).</span></p><p><span>One reason why a two phase stepper may work out really well is because then you could in theory combine the space outside of the wheel in the corners *and* inside of the wheel divided into four quadrants for 8 coils in two phases in total. That would be extremely efficient use of all of the available space, with tri-phase that won't work. </span></p><p><span>So maybe it will be two phase drive after all, at the expensive of another half H-bridge you'd have fewer magnets, more torque, and so on). But first let's try this one.</span></p><p><span>Study #21, tiny magnets wheel (29/Feb)</span></p><p><span>Christmas arrived a bit early, I just got these in the mail:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image5.jpg" title=""></span></p><p><span>That's 250 of them, to save you some counting, 2x1 mm. Just seeing these is inspiring, I suddenly see two more ways of building the device:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image89.jpg" title=""></span></p><p><span>That's the most direct way of solving the problem so far, just have a tiny little solenoid that lifts the pin. Two variations on that The first is to lock the pin in place with a second tiny solenoid driving a horizontal non-magnetic block in place into the space vacated by the magnet. Another variation would be to stagger the adjacent pins so there is more room to drive them. This most likely isn't an original idea but it *seems* feasible anyway so I should definitely try it. But I suspect that play in the pins is going to basically doom any kind of guided pin principle to lesser quality lettering. But it may well be the only version where the line spacing can be done properly.</span></p><p><span>The whole thing could be injection molded on a per-cell basis. 8 pin dip housing underneath a single cell which you robotically assemble (because there is no way you're going to be handling these in quantity). Cells then get placed into a circuit board. Maybe the coils can be part of the circuit board again? How much can these little magnets lift? That I need an answer for. They can at least lift their own weight, then they need to lift the pin as well and overcome the friction of the hole. A regular plastic capped sewing pin has 3.4 mm diameter at the top and the pin itself is 0.6 mm. That top could easily be be ground down (just stick them in a steel guide along the edge, fix in place and run the guide progressively closer to a grinding wheel, that should turn them down in no time. So now there are possibly three completely different paths to a solution: large character wheel, small 3 bit wheels side-by-side and direct drive of the pins using the world's tinyest solenoids.</span></p><p><span>But first, that 22 miniature magnets wheel. </span></p><p><span>Here is a single small magnet on top of a single 'big' one on top of an M3 bolt, 6 mm screwhead and 3 mm threaded rod, hard to discern because it is hard to focus on the magnet:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image6.jpg" title=""></span></p><p><span>So these have 1/6th of the volume of the larger ones. In fact they are so small you can fit them behind every other set of dots on the wheel! Oh, and you can fit them behind *every* dot if you slide them in from the top or the bottom alternating… this is really interesting. I can already see the robotic assembly line forming in my head</span><sup><a href="#ftnt8" id="ftnt_ref8">[8]</a></sup><span>&nbsp;:) That's wasted energy right now but it helps to keep motivated so I don't envision myself doing microscopic pick-and-place on finicky little magnets. </span></p><p><span>I'm going to have to set up a magnetically safe workbench and keep proper accounting of where all the magnets are because these things are dangerous. The first wheel didn't really come out usable, the magnet size is slightly larger than the holes. This isn't a problem, we're operating at the edge of the feature size of what you can 3D print so we have to tweak things a bit to come out the way we want them. Keep in mind that 3D printing is a pretty imprecise process: you squeeze plastic out of a hot nozzle like toothpaste and then press it into the plastic already there. Some of that plastic will deform and end up in your carefully sized hole. Keep in mind too that this is printed in 'draft' mode with a 0.3 mm layer so it could be a lot more precise (but the weel orientation is flat so that shouldn't matter too much, it will help however with the definition of the dots, arguably the most important part of the wheel). The speed difference is worth it though, in draft printing these wheels takes 25 minutes each. I've added 0.2 mm to the thickness and the width of the magnets. I've also doubled the number of magnets and added a second ring of magnets on the other side to see if you can fit 64 of them. </span></p><p><span>If that works then that same trick can be used to put 44 magnets into the tri-phase wheel for 132 addressable positions. We don't really need that though, and 22 magnets is already quite the expense, but it does give one massive advantage: if you pull that trick with 64 magnets you could more or less lock the wheel in place because there is now always a magnet dead center on a letter position and that means you can apply a strong field to that position and every other position around the bottom of the wheel. &nbsp;</span></p><p><span>You could make the wheels out of two halves that are glued together in the middle (with registration pins to make sure they match up exactly). that way the magnets would be fully embedded in the wheel. You'd press the magnets in halfway on either side, then press once half on top of the other with some glue. Or maybe injection mold the whole thing in two steps, first a magnet carrier and then the plastic around it. </span></p><p><span>The second wheel just finished printing, it works better than the previous one in the sense that the magnets fit into the holes, I managed to put one in. To my surprise it immediately moved to the next vacant slot, the cavities line up perfectly (the way they should) but that means that there is a 2 mm high racetrack on the *inside* of the wheel. Accidental re-invention of the roller bearing. Hilarious, but not really what I intended, so I'll make the slots end in a half cylinder.</span></p><p><span>So, I've changed the wheel again because that didn't really work. The changes are to put a half round pocket at the bottom of the hole, this reduces the size of the gap between adjacent holes to the point that a magnet can't migrate. I've also added a pin hole to the bottom of the pocket so that you can push a magnet back out again if you want to. This ensures that you'll be able recover from an assembly error, such as to place a magnet the wrong way around.</span></p><p><span>I've also noticed that it is utterly impossible to spot the magnet in a hole once it is in, this is a nastly complication. You can use a magnet on the outside of the wheel though, to verify its presence or absence. And it might be a good idea to angle the sides of the hole to help guide the magnet into its intended position. </span></p><p><span>Another shoutout to the makers of OpenSCAD, it is incredible software and it hasn't crashed even once in more than a week of continuous use. Rendering is slow, especially if the shapes are complex, but that's about my only complaint (and previewing is plenty fast). Rendering the current wheel design takes about 13 minutes. Half the time it takes to print it.</span></p><p><span>I've gotten religious about cleaning the print bed prior to each print, there is a lot of detail in these and it is very fine so the first layer outlines that are made without any kind of connection to something else (so they have a well defined outline) need to stick immediately without coming loose. That has happened a couple of times now and it always ruins the print. So 10 seconds to clean prior to printing saves a lot of time on failed prints and PLA gone to waste.</span></p><p><span>45 minutes later… the print came out fine, but the first time I stuck a pin in a hole to see if it would work (prudent, just in case) I wrecked the wheel. The holes simple come out too small. But zooming in on the hole shows exactly why this is borderline anyway. The tiny pinholes are formed by running a perimeter around them, but the magnet slot right next to it is formed in the same way. The two interfere with each other and some of the plastic of the one is smeared into the other and vice versa. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image73.jpg" title=""></span></p><p><span>The dots on that wheel are spaced 2.3 mm apart and the dots themselves are 1.5 mm across, to give you an idea of what you're looking at. &nbsp;Short of using a much finer nozzle I don't see a way to solve this easily and I don't have any spare nozzles. Which is a thing I only just realized, if the 3D printer breaks I'm really up the creek without a paddle, I should probably order some spares just in case. </span></p><p><span>So instead of just widening the pin holes I will also offset them towards the center of the wheel (the magnet positions are more important than the pin holes). That will strengthen the walls a bit and will allow for a slightly larger hole. Another improvement is to angle the holes away from the magnets towards the center of the wheel. That way there is even less interference between the perimeter of the pinholes and the holes for the magnets and there is more wall. </span></p><p><span>I've found it often really hard to visualize what happens when I make an insert, to the point that it started to really bug me. I've wasted countless hours tweaking things this way and that to get a result that is satisfactory and it often felt like trial and error instead of by design. This is especially noticeable when things are already rotated into place and you want to change a detail. The way I will do this from now on is to treat the whole of the insert as an object, render that positive to visualize it centered around the origin and then to move it into place from outside of the object in its final position and to rotate it only then (as a complete whole) and subtract. That takes a lot of the frustrationg out of designing more complex cavities. A single magnet was doable, a magnet hole with a pocket at the bottom was harder and the one with the offset angled holes drove me nuts and took an hour. Then I decided to do the whole thing first as an object and that worked very well, took 10 minutes (still too long, probably but I'm still learning OpenSCAD as we go along) and it was much easier to see what's going on by looking at an object rather than the hole created in a workpiece by that object. </span></p><p><span>Those little neos are ridiculously powerful. I just did a bunch of tests to see how much they will lift and they lift 35 grams effortlessly. I estimate the 250 magnets weigh 5 grams or so, so that puts them at 0.2 grams each give or take. So they lift 175 times their own weight. </span></p><p><span>I have so many unfinished threads still that I'm starting to lose track so I'll list them here, I really should read all of these notes top to bottom to see if there is anything that I missed. That's how these projects usually go. You have a single starting point then you follow a track and it bifurcates and so on until you have many parallel but promising tracks and then they drop out again one-by-one until there is only one left. Or none… Here is the list of ideas that still need testing:</span></p><ul><li><span>revisit the small wheels with only 8 side-by-side codes on them</span></li><li><span>22/44 magnet wheels in tri-phase mode</span></li><li><span>32/64 magnet wheels in two phase mode</span></li><li><span>16 magnet wheel in tri-phase mode (this was waiting on the H-bridge, I just found one so I can finish that one now)</span></li><li><span>drive the two phase wheels from the inside and the outside all at once with four coils per phase (opposing sides, diagonally crossing in at the shaft)</span></li><li><span>pin and solenoid based system using the 2 mm magnets</span></li><li><span>tri-phase or two phase drive across the underside of the wheel</span></li><li><span>test the locking of the wheel when having more than one magnet in a known orientation at the bottom.</span></li></ul><p><span>Five test wheels later and I still don't have one with mounted magnets :( This is tricky, the difficulty factor just jumped up 10x or so. If you think about it conceptually, magnets 1/3rd the width and ½ the height it doesn't feel all that different. But if you try to handle them it hits home hard: this stuff is tiny. I'm printing up some tools to make basic tasks easier (separate a magnet from the stack for instance, that's something that should be trivially easy but it really isn't). Then I'll have another go at trying to assemble a wheel.</span></p><p><span>I'm also going to mark the faces of the magnets so that I know for sure which way I'm handling them. Each magnet is placed manually, that too is annoying (and error prone to boot). </span></p><p><span>I built a little tool to help unstack the magnets:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image7.jpg" title=""></span></p><p><span>It's pretty simple, really, you feed in magnets into the block in a stack, then you slide the other part through underneath and all the holes fill up with magnets (you need to do this on a steel backing to get it to work reliably). The I unstacked 64 magnets and put a dab of paint on the one side to help identify the polarity. Afterwards I figured better save than sorry and checked each magnet again to make sure they're sitting right side up before painting. Out of 64 magnets 15 (!!!) where the wrong way up. So much for being paranoid, I thought I might find one, maybe two. </span></p><p><span>Here they are all pretty blue on one side. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image83.jpg" title=""></span></p><p><span>The paint took forever to dry so I decided to take my chances and try assembling a wheel at the risk of having to pull out a magnet (which seems pretty much impossible).</span></p><p><span>That didn't go quite as easy as I would have liked but in the end it did work. Working with these magnets is like trying to build houses of cards with rice grains that have a will of their own. They'll jump like fleas if you don't pay attention. One of them escaped so fast I didn't spot where it went by my son Rob was paying better attention and recovered it stuck to a table leg. </span></p><p><span>This project has a unique level of challenges. Another problem is that they are just too small to reliably see while you're handing them, they are so tiny that if you try to hold on to one it just disappears. And I though tthose other magnets were tiny, they now seem huge.</span></p><p><span>After so many hours of working on this here is - finally - the assembled wheel with 64 magnets in it, 32 inserted from one side and 32 from the other. The top face looks half decent.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image84.jpg" title=""></span></p><p><span>The bottom face is a different story:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image71.jpg" title=""></span></p><p><span>If you zoom in on the wheel you can see in more detail what's going on:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image24.jpg" title=""></span></p><p><span>So the gap the magnets rest in is 1 mm high, the pinhole is about 1 mm diameter and the 3D printed features are about 0.3 to 0.5. When you look at it like this 3D printing is even more fascinating: the fact that it works at all with such a messy process.</span></p><p><span>I tried the wheel with some bearing in it while pointing a magnet at it from the side and I'm a bit surprised to admit that not much is happening. The field *seems* very weak, much weaker than expected. Think this may be do to two factors. The first is that such a tiny disc lives or dies by the airgap, and there is just way too much of that. The second reason is that the magnets that I'm using to test it with all have pole faces that are 6 mm across, so they see at least two and posisbly even three magnets. That doesn't help. So when trying to run this wheel it will be super important to have the poles line up *just so* with the magnets and to make them of a diameter to match the magnet faces. That will be a challenge but I think that will be the only way to get this wheel to spin.</span></p><p><span>I can't believe it took 5 tries to get this one to be good enough to assemble, it is borderline possible with just hand tools but I won't be making many wheels like this. It's just too finicky and error prone.</span></p><p><span>Study #22, tri phase stepper driver part II (1/Mar)</span></p><p><span>I have an L293 now, it turned out we had one lying around after all. So time to test the alternating pole wheel with 16 magnets and a driver for it. This will be interesting because I suspect that tri-phase will work a lot better than one-out-of-four or lots of little coils. Tesla wasn't stupid: three phases give a very nice optimum between ease of manufacture, torque and simplicity of drive &nbsp;(either for a motor or as a generator). In industry it is pretty much universal, all industrial gear runs on three phase alternating current motors. You also get the star/delta option for free.</span></p><p><span>But they're normally not just a few mm thick and they don't have pole pieces that are this small so it will be an interesting challenge in many ways. First to assemble the driver hardware on the breadboard so I can drive it with the Rasperry Pi. </span></p><p><span>And it worked! </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image52.jpg" title=""></span></p><p><span>Noticeably more torque than before, it ramps up smoother and it only uses three output bits on the controller. One fewer coil as well. I had a funny little setback again, couldn't find for a long time why the L293 didn't power up. It turned out that one of those cheapie jumper wires was borked. I'm going to do a continuity test on *all* of my experimental wires because I'm a bit done with these detours through debug land only to find out it is something basic like that. What is also interesting is that this wheel already starts rotating with the coils at only 3V, that's half as much as with the four coil drive before which only really started moving at 5.5 to 6V.</span></p><p><span>Really happy that it works and so smoothly. Doing this with the 64 magnet wheel is going to be super challenging: the linear distance between two magnets of the same polarity is only 5 millimeters, the distance between the top and bottom dots on a character cell. This of course always was the problem to solve but now it becomes very real and the three 120 degree offset phases will have to divide that 5 mm into three equal portions, in angles it will be 11.5 degrees (2x5.625 which is 360/65) so 3.833 degrees difference between the subsequent phases. That means that whichever phase exactly lines up with the slot is the one that *always* has a magnet in front of it, either as a + or a - 180 degrees later. That should give pretty good hold torque as well (though, as I wrote earlier the wheel doesn't feel as if there is a whole lot of fieldstrength, so we'll see how well it works in practice, we do have the option of hitting multiple magnets now, in fact as many as we want, and we could in theory make the one that lines up with the dots much more beefy so it has more holding strength).</span></p><p><span>If driving these from below will work with sufficient strength then we can do away with a lot of bits and pieces, the wheels can be the full 7.6 regulation millimeter thickness (including the space between characters) and the whole stack of wheels can sit passively on a shaft. That would be a major simplification (though it would make it slightly harder to service the device if a wheel should need to be replaced but you could simply pop out the whole shaft and replace that instead and have the other one refurbished, the cost of the shaft is mostly bearing, plastic and magnets). </span></p><p><span>And the 'space' between letters could have a printed version of the letter to the left on it as well so a sighted person can read along with a blind person and quickly verify if the machine is working properly.</span></p><p><span>Study #23, Driving the 64 magnet wheel with tri-phase (1/Mar)</span></p><p><span>So, this one is going to be a bit tricky. The tiny magnets leave 1/3rd of 5 mm (so 1.66 mm) per pole. Schematically it looks like this:</span></p><p><span>|&lt;---------5 mm---------&gt;|</span></p><p><span>+SSSSSSSSSS+ &nbsp;+NNNNNNNNNN+</span></p><p><span>| &nbsp;magnet &nbsp;| &nbsp;| &nbsp;magnet &nbsp;| etc</span></p><p><span>+NNNNNNNNNN+ &nbsp;+SSSSSSSSSS+</span></p><p><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AIRGAP</span></p><p><span>+------+ +------+ +------+ </span></p><p><span>| pole | | pole | | pole |</span></p><p><span>+------+ +------+ +------+</span></p><p><span>&nbsp;-3.833 &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; 3.833</span></p><p><span>So the coil on the right is energized opposite of the coil on the left and the coil in the middle is off. 180 degrees of phase later the situation is reversed and the wheel has moved exactly one letter position. </span></p><p><span>Given that the magnets are flat and that they don't have a lot of field minimizing the airgap will be quite important as well as hitting as many of them as possible. A single magnet will *probably* not be enough to pull the wheel along but if we hit more and more of them it should work.</span></p><p><span>Stator manufacturing is going to be another exercise in patience. Because everything is so small I really would like to use proper laminations to minimize eddy currents but making those gives me nightmares. You really should make those with tool-and-die but that's not a process amendable to trial and error so I'll have to hand make the first batch of them. I've also been thinking a lot about the wheel surface itself, the dots are small and made of plastic (PLA for now) and I suspect they will wear away pretty quickly. Some sort of coating would be good, and I'm leaning towards a cold liquid enamel. That has nice properties, it's super smooth and should be fairly durable, definitely compared to the plastic (toxicity? wear? thermal stability?).</span></p><p><span>I think we should try to hit at least 5 magnets in any position so that's 3 stator pieces with 5 pole shoes each. I'm not sure if I have anything suitable for laminations, I could scavenge it from a transformer and try a couple of them to take the thinnest material. One elegant way to get more holding torque is to have the coils that are 'on' when a character is in position to be larger. </span></p><p><span>If the movement torque can be made large enough that it can overcome some friction that would allow for stronger damping of the movement which in turn would help with overshoot (my son Luca: 'use a bad bearing to deal with the overshoot'). That might actually work and why not: use bronze bushings or something like that to create a 'bad bearing' that still has enough strength to least really long. It would consume a little bit more power though.</span></p><p><span>If the coils are on the inside of the poleshoe body then there is a trade-off between how many magnets you can hit and how large the coil can be, between two same polarity magnets there is only 5 mm so that gives you 5 mm total for both the coil, the coil body and the pole metal itself. That's not a whole lot of room. So maybe it would be better to leave out every other pole, instead of 1,2,3,4,5 you'd only use 1,3,5 and use much larger coils. I think that would work out as a net positive: larger coils = more coil turns and you'd get far more than twice the number of windings and lose only 40% of the poles. So I think I will try that strategy first. </span></p><p><span>I could put the magnets behind the pole body and use a single large coil with the pole shoes sticking out of the center of the large coil. That might work even better but would require a lot more space (height, mostly). I've let go of the idea of driving the wheel from the inside, but it may actually be a good idea to revive that principle. You could use the full wheel minus a thin skin to keep it all connected and then you'd be able to hit a full 120 degrees of the magnets. So that would allow you to drive 32/3 = 10 magnets at the time. You could do both… You could also use a 5x2x1 mm flat bar magnet, the 2 mm would be the width, the 1 mm the depth and the 5 mm the height. That way you'd go from 3.14 cubic mm magnet per slot to 10 cubic mm. Another option is to use the backs of the magnets to magnetize a pole shoe that comes out in between two magnets. That might not be a bad idea: the magnets would be used twice, both for their N and S sides at the same time. But then you couldn't drive them on both sides.</span></p><p><span>Yet another drive option: the 'rattler'. I don't particularly like it because I suspect it would be really noisy but you could have a ratchet on the side of the wheel and a solenoid pulling it through the 64 consecutive steps. The same concept might work for the 8 combination wheel with the 8th pull on the lever causing a reset to the beginning. Weak points: springs, multple moving parts per cell.</span></p><p><span>An improvement on messing around with tiny magnets might be to use a single disc magnet with a hole in it in the middle of two tiny 'hamstercages' with interlocking fingers like so:</span></p><p><span>NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN</span></p><p><span>&nbsp; N &nbsp; N &nbsp; N &nbsp; N &nbsp; N &nbsp; N &nbsp; N &nbsp; N &nbsp; N &nbsp;</span></p><p><span>S N S N S N S N S N S N S N S N S N S</span></p><p><span>S &nbsp; S &nbsp; S &nbsp; S &nbsp; S &nbsp; S &nbsp; S &nbsp; S &nbsp; S &nbsp; S</span></p><p><span>SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS</span></p><p><span>You could stack 4 mm worth of magnet in the middle with two 0.4mm thick laminations on top of them to guide the field to the teeth and have plenty left over for wall for the wheel and cell separator. Those would be directly exposed to the drive coils so the airgap would be absolutely minimal. This may well be one of the most efficient and powerful solutions, but you would not be able to drive it from inside the wheel. </span></p><p><span>Lots of fiddling with OpenScad later:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image38.jpg" title=""></span></p><p><span>It took me a while to figure out how to do that swept arc segment. That's a really useful component though, I'll definitely be using it more often. So, the idea is to have multiple poles that hit the magnets from the side with a step in between to allow for fair sized coils. For the first tests I'll make the poles out of M3 bolts, that's the quickest way to verify if this work and the lost power can be made up for in extra current ;) . Aligning these is going to be really nasty, the screws won't have a whole lot to set up against, basically just the threads in the hole. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image54.jpg" title=""></span></p><p><span>You can just make out the holes in the supports. This also does nothing with the other pole of the stators, so half the field is wasted.</span></p><p><span>Here is the first test:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image9.jpg" title=""></span></p><p><span>That realy didn't work. The airgap is pretty big and there just wasn't enough field passed on from the relay coils to the bolts to make this work. But this one did work:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image39.jpg" title=""></span></p><p><span>Well… it moves, and it actually moves to the right spot. So that's a win I guess. But in spite of drawing considerable power (a whopping 0.5 Amps) it isn't exactly a torque monster, those tiny neo's are super impressive once you are *very* close but at this distance (est: 1.8 mm which is *almost* the thickness of the magnets) most of the field is lost. It's also super slow.</span></p><p><span>I'm not quite sure how to improve considerably on this: there just isn't a lot of space for the magnets, we have three steps per character position so we could save there (that's that 22 magnets with three phases idea). The coils are already super large, much larger than I want them to be but thinner wire would help to cram more windings in while reducing the current a bit so that should give better consumption. I could replace the wheel with those squirrel cages for something that is easier to keep captive and much, much easier to assemble (and cheaper).</span></p><p><span>And finally I could add more coils but we're already at or over the budget (maximum would be about 100 degrees of angle before you exceed the sides. one possibility would be to make a very complex stator piece that would be just a single piece with the three coil phases inserted on top of each other (alternating slots). This would be quite efficient space wise and would allow the use of both the negative and positive poles.</span></p><p><span>But it would require some pretty complex thin metal fabrication. Combining that with the hamster wheel mentioned higher up would be interesting.</span></p><p><span>Study #24, It's all about the Airgap (2/Mar)</span></p><p><span>The airgap (the space between the outer magnet surface and the stator poles) is *much* too large. This is a problem because it means a lot of the field leaks away short circuiting around the magnet's side. I estimate the airgap to be 1.8 mm which is almost the thickness of the magnets so you can expect that most of it never makes it to the pole. On top of that the poles are too wide, they're Bolts and even though they are very cheap they are also made of the wrong metal *and* they're still too thick. </span></p><p><span>I did some experiments (and sacrificed the 64 tiny magnet wheel in the process, but fine, this one would never be used for real anyway and is just to help figuring out the drivetrain). If going through the front of the wheel including the braille dots isn't an option then maybe it could be done just to the side of that. So I ground off the dots to get in closer to the magnets with the poles and I trimmed the bolt tips down to about 2mm. That was just a quick job on the grinder so it isn't pretty but the lessons learned are much the same, before and after for the bolts:</span></p><a id="t.34c968869fbbdaac8fff0fec79919d98042a1192"></a><a id="t.1"></a><p><span>That already worked a lot better, it's a tiny change but the difference in torque is massive and given how the density of the field increases exponentially as you approach the magnet I suspect that getting closer could improve things much further still. 4V, 0.3A, 400 steps/sec, at 7V, 0.6A 700(!!) steps/second and 8V, 0.7A 1000(!!!) steps / second. so it is really important to get the stator as close as possible. </span></p><p><span>It doesn't have a lot of torque, but that might be an advantage safetywise, and combined with a hall sensor that picks up the magnets it could work as a closed loop system. One extra magnet behind the dots to synchronize to the zero position would round it off. And maybe coils made of thinner wire. This looks like it will work all the way.</span></p><p><span>The wheel itself would now be the regulation 7.6 mm thick, the magnetic rotor part would ride *just* below the surface of the space area and the pole piece would sit just outside that underneath. Obviously the wheel diameter is far from ideal, but there may be the option to use belts with the braille dots on them. Belts would serpentine around idlers underneath the face to be driven by a geartrain. This would probably be much more compact than what we have now, but I suspect it would be a bit more delicate. </span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image72.jpg" title=""></span></p><p><span>That could be very compact depending on the minimum bending radius of the belt, and if you use a belt. The two inner idlers should be arranged in such a way that they don't run into the dots. This has one more advantage that you can use a pretty tall gearing from the motor to the gear the belt runs across and if the belt and the gears have matching teeth you can use the same surface on the gear to drive both. I really like this arrangement because it seems to have endless possibilities for space optimizations which might even get you to perfect standards compliant braille. But it's far more complex mechanically and probably much less reliable, and belt material won't be good dot material (relatively soft, so wear prone).</span></p><p><span>Study #25, A better stator (3/Mar)</span></p><p><span>I can't really think of a way to do a proper 3 phase stator with overlapping coils at this size, that's frustrating, but it makes good sense: the size of the slots would be absolutely miniscule and you wouldn't get a lot of windings in there anyway. For instance for the windmill that I made for 16 magnets we had 3 times as many slots, so 48, because it's three phases. That was tight but doable, the stator was a full 300 mm in diameter and even so the fronts of the stator poles (the 'fingers') were quite </span><span>small</span><sup><a href="#cmnt6" id="cmnt_ref6">[f]</a></sup><span>. So I'll compromise and focus on the fronts of the stator poles and create as large a slot for a single phase behind it as I can without exceeding the width. That way we capture the bulk of the field and we have at least some room to work with.</span></p><p><span>Something like this, each phase gets two coils and one negative finger for the reverse of the field:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image69.jpg" title=""></span></p><p><span>That looks doable, but keep in mind that those mounting holes are only 3 mm diameter, the slot entrances are only 1 mm and the slots themselves are 2x deep... </span></p><p><span>But when you export the svg and transfer it to a template it suddenly looks a lot less doable:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image77.jpg" title=""></span></p><p><span>That's something for a goldsmith, I don't think I'm cut out for that level of detail. But I'll give it a try to see if this can be done. But even if I manage to make the piece what am I going to line the slots with? Even paper would already be pretty thick and eat away a fair amount of the slots.I don't think this is going to work. I can see that I can shave a bit of the height which immediately translates into the devices being that much lower and every little bit counts because we're already way too high as it is, which is good, and maybe a mm or two off the sides (but there I don't really need it). I could sacrifice that center pole had hope that the longer magnetic circuit around the back to the other phase slots could substitute for that. </span></p><p><span>That's probably a good idea, and make the slot fingers straight as well and the slots deeper at the back. And move the mounting holes to the middle where there is no interference with any area we want to stuff copper into, there is too little of that as it is. The current setup with the large coils has about 250 windings per coil and there are three coils per phase so that's 750 windings. We need a reasonable fraction of that to get this to work.</span></p><p><span>Study #26, A better stator, part II (3/Mar)</span></p><p><span>What I can actually make and what is manufacturable are two different things but I'm constrained by the tools and the materials I have at hand because I don't want to start throwing vast amounts of money at this - yet. I first want to get to any acceptable solution and then iteraratively improve on that because I think that constraint will force me to keep thinking in ways that result in a cheap and easy to manufacture device. Cost of labor is going to be a major part of this project and if that can be kept down and capital expense to get set up making them is small then there will be more adoption. </span></p><p><span>The stator from the previous study *probably* can be made, but I can't make it so it's a non-starter. But it can serve as a starting point for one that can be made, here is one that is much simpler and that I can make:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image4.png" title=""></span></p><p><span>The dots are the centers that I can use for drilling and then the rest is endless hacksaw and grinding work, eventually this would be stamped using tool-and-die.</span></p><p><span>Note that the mounting holes interfere with the magnetic circuit too much, there would need to be the equivalent of the steel in the fingers on the thinnest part of the back brace between them. </span></p><p><span>While driving today I was thinking about this stator a lot and how frustrating it is that the coils interfere with each other when I suddenly realized they don't *have* to interfere at all. You could wind the coils around the back of the stator just the same! But then there are only two spots where you can wind coils so you'd need to add another set of fingers. But that would increase the space for coils tremendously, and it might make it possible the shorten the fingers a bit as well. The mounting holes would need to move but that's a minor detail.</span></p><p><span>And right now the 9 coils that I have are active on 6 spots at once, the rest of the field is lost (because there are always two phases active there are always 6 coils out of the 9 energized at any point in time). So these six 'fingers' are a very close equivalent to that, only now none of the field is wasted, so it should use much less power to get the same amount of torque and speed.</span></p><p><span>Another option is to wind the coils for the outer two fingers where the mounting holes are indicated in the drawing and the middle ones on stator fingers. Not ideal beacuse the middle coils and the coils wound on the back would interfere. You could overcome that by moving the rightmost phase outward by one spot and then doing the same to the middle one. </span></p><p><span>Better probably to just treat the 'fingers' as the teeth on beefier poles and then to wind the coils around the poles to let the teeth complete the circuit. That's probably the easiest way to hit a larger number of magnets without having tiny coils. Something like this:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image37.png" title=""></span></p><p><span>That way there is ample room for coils and the whole thing still fits comfortably within the envelope dictated by the diameter of the wheel. At the expense of some height.</span></p><p><span>And there was one final optimization to make, to minimize the width of the coil supports:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image31.png" title=""></span></p><p><span>Given the space constraints I don't think that you can get much more out of this, maybe make the center hole in the coil supports a triangle but that would be minimal gain. Keep in mind that the stator + the height of *both* sides of the coil can't exceed the width of a character (7.6 mm), with a 2 mm stator that means that you have (assuming a skin of 1 mm for the coil body) only 4.6 mm for the copper on both sides, or so 2.3 mmtotal. With an 8 mm core length, effectively 7 (subtract the caps) you are left with 7x2.3 mm cross section for the coils, which will hold about 900 windings tops of .15 mm wire. If you wind *really* nicely. At .1 mm you would be able to double that. Which actually would be half decent. </span></p><p><span>But you won't be doing that well if you wind the coils by hand so a test setup will underperform considerably compared to a professionally manufactured coil and the same goes for the stator steel itself, it is of the wrong steel (too quick to saturate) and it isn't laminated (so you'll get eddy currents).</span></p><p><span>The reason for the endless fiddling with the design of the laminate is that 3D printing and laswer cutting are pretty quick for me, but making stuff out of 2 mm thick steel is a lot of hard labor and I'd like to really get this one right the first time I make it. But I really like this one (though I see some possibe optimizations) so I'm going to try it and to make a set of matching coils.</span></p><p><span>Study # 27, A better stator, part III (4/Mar)</span></p><p><span>First the coil bodies and a little tool to assmble them and wind them:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image62.jpg" title=""></span></p><p><span>The idea behind the tool is that you can stuff two halves of the coil holder on there, glue them without it getting stuck to the holder and then slide the whole thing off. This makes assembling the coil holders much quicker. And when winding you can slide a coil holder on the tool, then wind it without your fingers getting in the way of the wire all the time. These coil holders maximize the space, they're exactly 7.6 mm wide.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image46.jpg" title=""></span></p><p><span>Trial fit on the lamination, this worked quite well so I'm going to wind the coils.</span></p><p><span>Or not…</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image13.jpg" title=""></span></p><p><span>These are so delicate. But ok, toss it and wind another one. I tried salvaging the wire, not because I'm quite that cheap but because I'm not sure if I have enough of it, but failed.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image30.jpg" title=""></span></p><p><span>And… Success!! So, that's the first time I have achieved the main challenge, the character is standard width, it registers perfectly and it moves when it has to. In a way the challnge is over, from here on it is improvements on this theme and other tracks that I've left unexplored.</span></p><p><span>But in many other ways this is really just the beginning, what in the industry would be called a 'proof of concept'. it demonstrates that there is in fact a solution. Proper engineering, cost reduction, design with ease of manufacturing in mind and so on will all improve it considerably, so from here on in things can really only improve. There is one thing (ok, many things, but that one is dominant) that I'm not happy about which is that at 46 mm cross section and a good 64 in height it is larger than I would have liked. </span></p><p><span>Moving the coils under the wheel would solve at least the height issue (but the wheel would be the same size as it is now). It has less torque than I would like, and it would need more holding torque. But I suspect that having the stator exposed to more of the magnets at once (right now it sees less than 10% of the magnets!) would improve that considerably.</span></p><p><span>The cost for this iteration (estimate):</span></p><p><span>The bearing I estimate at $.10 or so in quantity (it can be a slide bearing, no ball bearing required) two concentric pieces of bronze is all it takes. The magnets are $.2 each in this quantity but drop to $0.02 in larger quantities so that's a $1.30 worth of magnets, 50 cents worth of copper wire and a cent or two of steel and another $.20 or so for the plastic. Say $2 for the mechanical and electromechanical bits. </span></p><p><span>That leaves $3 in the budget for the electronics and the assembly. I'm pretty sure that can be done. </span></p><p><span>But this really is a starting point, from here on in it is optimization on size, cost, power consumption, lifespan, torque, holding torque etc.</span></p><p><span>Study #28, Coils to the inside (5/Mar)</span></p><p><span>Lots of CAD work later I came up with this (exploded view to show what's going on):</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image40.png" title=""></span></p><p><span>It's a pretty massive change, the coils will move to the inside, change orientation and much more complicated stator pieces will be made that hit 90% of the magnets. Drawing this was hard enough, making it will be a lot harder, but that only goes for the prototypes, this is the first design where I'm really taking manufacturing into account and if you look carefully you'll see all kinds of little details that make it possible to mass manufacture these for very little money. For instance, the stator metal has, right at the point where the fingers make that right angle a tiny little step inwards over half the metal thickness. That is so that you can bend the fingers using a tool and die at the same time that you cut them. It's a single operation, bend, cut, eject. &nbsp;Still missing: the metal cores for the coils, but those should be easy to add. </span></p><p><span>What's nice about this design is that it uses the space extremely efficiently, and that it uses almost all of the magnets (or actually, ⅔ because one phase is always idle). The previous design hits 6 magnets maximum. I could not think of an easy way to rope in the remaining magnets, unlike the previous design you can't just connect the backs (or at least, I don't *think* you can but now I'm wondering if that is correct or not, it may be that i'm actually wrong about this).</span></p><p><span>The bigger question is whether or not I am able to manufacture this here with the tools that I've got, those stator pieces are pretty challenging, especially given the gaps to the wheel at the top and the sides are tiny. But I'll give it a try. The coils shoud pose no big problems, they're essentially just a beefed up version of the ones I made before, 12 mm diameter, 5.5 mm high (which is a good indication of how thin everything else is given that the total budget is 7.1 mm) so that leaves 4 mm of height x 9/2 = 20.25 mm^2 if I got it all right and that multiplied by two again, so 40.5 mm^2 because there are two coils per phase. Compared to the previous one at 16.1 that's a huge improvement especially when combined with the number of extra magnets that get hit. Those coils should be about 1100 windings of .15 mm each. </span></p><p><span>So I expect this one to do far better than the previous one, if I can actually make it. It may be necessary to make the inner core of the coils a little bit thicker so that we don't saturate the core. I think it is possible to squeeze one more magnet hit out of two of the phases but I'll let that be, it's only a few percent gain and it would make those two phases more powerful than the other one which may introduce cogging. Better to keep things balanced.</span></p><p><span>I'm a bit concerned about the wheel wall thickness and the number of magnets that we're pulling on at the same time, that could flex the wheel. If that happens then I'll need to increase the wheel wall at the expense of coil space (which would really hurt). Another fix would be to strengthen the wheel wall, for instance by making the wall of steel. But for now I'll stick with plastic because just injection molding plastic is a lot cheaper than mixed metal/plastic parts.</span></p><p><span>There is an error in that nice exploded view above, can you spot it</span><sup><a href="#ftnt9" id="ftnt_ref9">[9]</a></sup><span>? (hint: angle).</span></p><p><span>Oooh, this hurts: I've just found this: </span></p><p><span><a href="https://www.google.com/url?q=https://www.utopiamechanicus.com/article/braille-display-2017/&amp;sa=D&amp;source=editors&amp;ust=1709891107911388&amp;usg=AOvVaw0zB9wKnfS0sKW_hZ3krrD1">https://www.utopiamechanicus.com/article/braille-display-2017/</a></span></p><p><span>It's like looking at my own wheel, the thing is more or less a perfect twin. I could have saved myself a ton of time by doing a more thorough search. It even has the window!! But in a way that is logical, form really follows function here. The big difference is the drivetrain, that one is going to have a lot of slop in it, and it will be expensive. And we seem to have found a different way to line up the codes.</span></p><p><span>Study #29, Coils on the inside, part II (6/Mar)</span></p><p><span>Easier drawn than done that one. I've been at it for about a day now, non-stop filing, hacksawing and printing little helper tools and it is slowly getting there. This is a tricky thing to make (and it may not work…).</span></p><p><span>&nbsp;</span><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image2.jpg" title=""></span></p><p><span>I made 4 3D prints of the stator metal pieces, two for each part (top and bottom are slightly and confusingly different), then bolted those to some .75 mm steel sheet (I wanted 0.5 but couldn't find it locally). The the first round of filing to rough cut the shapes:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image3.jpg" title=""></span></p><p><span>That's a couple of hours worth of work. I cheated and used the dremel for a bit but ended up hitting my fingers more than the steel (because it wants to climb all the time) so back to manual.</span></p><p><span>Then I made a simple tool to be able to fold the finger exactly the right way:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image8.jpg" title=""></span></p><p><span>One folded, one to go</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image64.jpg" title=""></span></p><p><span>The teeth are supposed to be close to each other but not to touch:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image87.jpg" title=""></span></p><p><span>Then some more filing because I love it so much:</span><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image32.jpg" title=""></span></p><p><span>And then a test fit of a stator inside the wheel:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image76.jpg" title=""></span></p><p><span>and after printing a setof coil bodies a test of all the parts except the top stator part inside the wheel:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image11.jpg" title=""></span></p><p><span>It all fits, but I'm pretty skeptical about whether it will work or not, with a permanent magnet in between the two stator pieces I hardly noticed any gap on the stator sides where the magnet faces will be. I even tried with the 2x1 mm magnets to make sure I'm not accidentally seeing more than one pole at once but that didn't seem to matter much either. Only one way to find out…</span></p><p><span>Study #30, coils on the inside, part III (7/Mar)</span></p><p><span>I just put the magnets in the first wheel, but only the bottom, the top just wouldn't work, the plastic would shatter and those magnets that went in went at the weirdest angles and one of them broke. Very frustrating. It did work, after a fashion, and better than epected, it has quite a bit of torque, but it wouldn't move a whole sequence of steps and that's most likely because the positive half of the magnets was missing. </span></p><p><span>Another issue was that a number of the 'teeth' stood out enough that they were rubbing the inside of the wheel, very careful pusing with a small screwdriver fixed that so the wheel spins much more freely now. The top plate is only .5 mm now, that makes it very flexible. But any change in height there directly affects the amount of space available for coils.</span></p><p><span>Then there is the matter of flux flow from the coil cores to the stator laminations. I'm using simple M3 bolts for this right now because I don't have the means to properly join a steel post to the laminations on closing without risking damage to the coils. You'd need to hammer that in and that will most likely crush the coils in ways that are not at all healthy. So the bolts are a stand-in, but they have problems: for one then need to be countersunk at the top of the wheel because if they are not that robs you of even more space inside the wheel and height is very much at a premium. For another the bottom nuts are on the other side of the plastic of the test-stand, where they can't transfer any flux at all! </span></p><p><span>And I only realized that after I'd put the whole thing together including hot gluing all the wiring in place. Here is what it looks like:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image21.jpg" title=""></span></p><p><span>So that's a pretty substantial dilemma, I don't feel like re-doing all of this and yet it may stop the whole thing from working because only half the teeth are active. I've come up with a partial fix: remove one nut from each phase, thread the bolt back out until it is free of the plastic of the test stand and then increase the size of the hole in the plastic to the point where the nut can go in entirely. That will at least improve the cross section of the area where the flux travels through that nasty 90 degree corner. another thing that mighthelp is to chop off the long ends of the bolts sticking out the bottom. and if I hot-glue the whole assembly in place I might even get away with removing the other three bolts and increasing the size of the holes there as well. But that's pretty risky. What a dumb mistake. Alternatively, once the first three bolts are done then maybe add some washers and nuts to fix the whole thing in place and then do the other three?</span></p><p><span>I hate rework. </span></p><p><span>I've redesigned the wheel a bit. I noticed that the red plastic is a bit more brittle than the black that I used before and so much less forgiving of having force applied, such as when inserting magnets. A whole bunch of them broke out while trying to insert them. So now I've laid out the insert to be V shaped leading down into the pocket where the magnet will sit. That way insertion is a lot easier and needs far less force. We'll see how well that works in practice, especially the ones inserted from the top need to travel down quite a bit before they're in the right spot.</span></p><p><span>The redesigned wheel was a lot easier to load with magnets, that's the good bit. The bad bit is that it still didn't work, not even with three of the bottom nuts moved much closer to the surface of the stator plate (touching it).</span></p><p><span>Hah! Victory…</span></p><p><span>So, those bolts sticking out… that was it, chop the bolts, boom, instant movement. I had a suspicion but I actually didn't think the difference would be this big. &nbsp;But it still doesn't run very smoothly, though it does have a lot of torque when it does work. I think there are still a couple of things that might be off, for instance, every third tick is really harder than the other two, that suggests that the angle of placement of the pole pieces isn't optimal (which will be extremely annoying to fix), and there is the chance that those remaining three bolts (that are still not properly touching the bottom of the stator) are still too little in contact to transfer sufficient field to the stator. That's a tricky one to fix though. </span></p><p><span>But, I have very high confidence that those two can be solved and that this concept of 'motor in the wheel' will work. The big question really is how much more efficiency a proper motor designer can squeeze out of this envelope.</span></p><p><span>Hm… ok, so it did look like it was working, but more testing, especially with low speed turned up some issues. Some more investigating later: I've made a major mistake in calculating the angles of the blocks of poles for each of the phases, I don't know what I was thinking but for some reason I re-started the calculation for each phase from a multiple of 120 degrees. I guess I tried spreading them out across the circle nicely (which worked) but in the process messed up the link between one phase and the next (or previous one) which should always be 11.25 / 3 difference. But offsetting it by a multiple of 120 degrees totally upset that because that's implicitly adding another 1.875 degrees to each step. The really tricky part is that this means that the stators are wrong, but the individual phases can be re-used without having to go through another 10 hours of rework, if I can somehow fix the position of the stator parts without changing the relative position of the holes within them. It's worth trying to do this because of the time saved to make two completely new stator pieces. I'll just cut them into three pieces, re-use the coils (if I can keep them alive) and bolt it all to a new teststand. And it looked so good :(</span></p><p><span>Study #31, Reworked stator parts (8/Mar)</span></p><p><span>Reworking the stator was a real pain. It's super delicate when the coils aren't properly tied down and of course one of the coil hookups broke during the disassembly of the previous test stand. But I really didn't want to make another stator. So what I ended up doing is cut the connecting bits between the stator sections for each phase and reposition them on a new stand, then wire the whole thing up again.</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image35.jpg" title=""></span></p><p><span>Here you can clearly see the gaps between the stator segments for each phase. I've also used some proper cable terminators so I don't end up melting the screws right out of the base when making the connection, PLA is a thermoplast after all and heating those screws to the point where I can solder on the copper rings was a bit of a challenge. This is much easier.</span></p><p><span>After wiring it all up the moment of truth:</span></p><p><span><img alt="" src="https://jacquesmattheij.com/refreshablebraille/images/image75.jpg" title=""></span></p><p><span>And yes, this time it worked properly, it can step really nice and slow and quite fast as well and has a lot of torque and is still as quiet as before.</span></p><p><span>So, with that entry this ends the 'large wheel' section, this is my contribution to that particular way of solving the problem. Someone with manufacturing experience and much more knowledge about materials and electromagnetics should take over at this point to productize this. Prototypes are easy, products are hard and I know that to take this concept to market is going to be a pretty substantial undertaking. But from a bill-of-materials point of view this is about as cheap as you can make it, you're looking at stuff that made in quantity in the far East would sell for less than that it would take to ship it.</span></p><p><span>I will park this project for a bit now and focus on other things that need attention, then at some point in the near future, if there is still interest I'll tackle the side-by-side 3 bit wheels and finally the matrix based displays. This one, from an invention perspective is done, the rest is 'a mere matter of engineering'. Elapsed wall clock time: 16 days since the start, number of hours: I'd rather not tell…</span></p><hr><p><a href="#ftnt_ref4" id="ftnt4">[4]</a><span>&nbsp;I wonder how well that will mesh with using the very coarse approximated sine-wave, because in a normal situation you'd gradually ramp those currents up and down and here it is all or nothing, but I lack the imagination to be able to accurately predict what will happen. </span></p><p><a href="#ftnt_ref5" id="ftnt5">[5]</a><span>&nbsp;For a two-phase motor that would be two full H-bridges.</span></p><p><a href="#ftnt_ref6" id="ftnt6">[6]</a><span>&nbsp;That's exactly how micro-stepping stepper drivers work, you modulate the duty cycle of the windings to position the rotor in between stable positions. Depending on the implementation this can be fairly accurate.</span></p><p><a href="#ftnt_ref7" id="ftnt7">[7]</a><span>&nbsp;Fast enough that you wouldn't hear the pulses as sound. </span></p><p><a href="#ftnt_ref8" id="ftnt8">[8]</a><span>&nbsp;Rotate the wheel indexed to position guided by the index hole, eject a magnet from a stack of magnets in a borehole by advancing exactly 1 mm, then slide the magnet down into the hole until seated. Definitely doable, and you could similar techniques for other magnet orientations.</span></p><p><a href="#ftnt_ref9" id="ftnt9">[9]</a><span>&nbsp;Spoiler alert: I forgot to add the 11.5/3 offset to the phases so they're all exactly at 120 degrees instead of 0, 123.8333, 247.6666</span></p><div><p><a href="#cmnt_ref1" id="cmnt1">[a]</a><span>alternatief als te groot is (wel veel duurder):</span></p><p><span>https://www.supermagnete.nl/eng/disc-magnets-neodymium/disc-magnet-1mm-1mm_S-01-01-N?origin=pla&amp;kwd=&amp;adwords_nl_eng-shot&amp;gad_source=1&amp;gclid=CjwKCAiA_tuuBhAUEiwAvxkgTjJYkOFXnHoTzY839_dQU-fNihIKT5cvo3wy1ztwPYHbeTsUomIt_BoCleMQAvD_BwE</span></p></div><p><a href="#cmnt_ref2" id="cmnt2">[b]</a><span>ok, added that link to the document</span></p><p><a href="#cmnt_ref3" id="cmnt3">[c]</a><span>uit het artikel&nbsp;As of this writing, the Orbit Reader 20 is not yet ready to be sold to the general market. There simply aren't enough units to go around. However, the supply issues are being addressed, to the point where suppliers are now declaring that the Orbit Reader 20 is coming soon. And as far as I know, the price appears to be set at $449.</span></p><p><a href="#cmnt_ref4" id="cmnt4">[d]</a><span>in de orbit shop it is $699, I think that is from a while ago.</span></p><p><a href="#cmnt_ref5" id="cmnt5">[e]</a><span>re-read up to here</span></p><p><a href="#cmnt_ref6" id="cmnt6">[f]</a><span>dig up a picture</span></p></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Telefunken Datenspeicher (140 pts)]]></title>
            <link>https://retrocomputing.stackexchange.com/questions/29676/what-is-this-large-device-labelled-telefunken-datenspeicher-and-how-does-it-wo</link>
            <guid>39724161</guid>
            <pubDate>Sat, 16 Mar 2024 08:11:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://retrocomputing.stackexchange.com/questions/29676/what-is-this-large-device-labelled-telefunken-datenspeicher-and-how-does-it-wo">https://retrocomputing.stackexchange.com/questions/29676/what-is-this-large-device-labelled-telefunken-datenspeicher-and-how-does-it-wo</a>, See on <a href="https://news.ycombinator.com/item?id=39724161">Hacker News</a></p>
<div id="readability-page-1" class="page"><div itemprop="text">
                
<h2>It's a Demonstrator for an ALU and Memory.</h2>
<p>It's a serial ALU with registers, data path and a 6 byte storage, falling short to be a CPU.</p>
<hr>
<p>An <a href="https://en.wikipedia.org/wiki/Arithmetic_logic_unit" rel="noreferrer">ALU</a> (German as well <a href="https://de.wikipedia.org/wiki/Arithmetisch-logische_Einheit" rel="noreferrer">ALU</a>, sometimes 'Rechenwerk') is a function unit to combine two inputs, usually called A/B, according to defined rules into an output (called C).</p>
<p>The whole setup is somewhere half way between an ALU, a CPU and a computer as it additionally features registers and memory and data paths between them, but falls short of having a program sequencer or storage. Except for the memory it's best described with the German term <a href="https://de.wikipedia.org/wiki/Rechenwerk" rel="noreferrer">Rechenwerk</a> - <a href="https://en.wikipedia.org/wiki/Execution_unit" rel="noreferrer">Execution Unit</a> in today's view (although that being defined slightly different).</p>
<p>If it had an instruction unit, all of the buttons would be control lines from an instruction decode stage (<a href="https://de.wikipedia.org/wiki/Befehlsdecoder" rel="noreferrer">Befehlsdecoder</a>) (or a horizonal code word) setting the behaviour of each element for one execution cycle (<a href="https://de.wikipedia.org/wiki/Befehlszyklus#3._Befehl_ausf%C3%BChren" rel="noreferrer">Befehlsausführung</a>).</p>
<hr>
<p><strong><em>Please Note</em> All of the below are assumptions made from the pictures shown</strong> so take it with an appropriate amount of caution.</p>
<hr>
<blockquote>
<p>We found this device in our school.</p>
</blockquote>
<p>Neat, would love to have something like that at our <a href="https://blog.computeum.org/" rel="noreferrer">museum</a>.</p>
<blockquote>
<p>Does anyone know what this can do exactly, and how it could work?</p>
</blockquote>
<p>It seems like a simple Serial ALU. Operation get put in at AT/ET/EX, Data from A register or O/L and B-Register.</p>
<h2>Schematics are DIN 40700 based</h2>
<p>The best way to look up the exact function would be reading the schematics, which are printed right on top. The equations are rather straight forward as it's build from only AND, OR and FlipFlop. The schematic language is used according to DIN 40700 (*1):</p>
<p><strong><a href="https://en.wikipedia.org/wiki/AND_gate" rel="noreferrer">AND</a></strong> (<a href="https://de.wikipedia.org/wiki/Und-Gatter" rel="noreferrer">Und</a>)</p>
<p><a href="https://i.stack.imgur.com/UZQ5i.png" rel="noreferrer"><img src="https://i.stack.imgur.com/UZQ5i.png" alt="AND Gate"></a></p>
<p><strong><a href="https://en.wikipedia.org/wiki/OR_gate" rel="noreferrer">OR</a></strong> (<a href="https://de.wikipedia.org/wiki/Oder-Gatter" rel="noreferrer">Oder</a>)</p>
<p><a href="https://i.stack.imgur.com/LFm7M.png" rel="noreferrer"><img src="https://i.stack.imgur.com/LFm7M.png" alt="OR Gate"></a></p>
<p><strong><a href="https://en.wikipedia.org/wiki/Flip-flop_(electronics)" rel="noreferrer">FlipFlop</a></strong> (<a href="https://de.wikipedia.org/wiki/Flipflop" rel="noreferrer">Bistabile Kippstufe</a>)</p>
<p><a href="https://i.stack.imgur.com/5wIdJ.png" rel="noreferrer"><img src="https://i.stack.imgur.com/5wIdJ.png" alt="JK-FlipFlop"></a></p>
<p><em>(Most likely of the shown <a href="https://en.wikipedia.org/wiki/Flip-flop_(electronics)#JK_flip-flop" rel="noreferrer">JK type</a>)</em></p>
<blockquote>
<p>We managed to input values into the bit storage on the top, but nothing more. Can we calculate things by using the registers?</p>
</blockquote>
<p>As far as I can tell, yes.</p>
<blockquote>
<p>It would be already helpful to know what the symbols like AD, EX, AS,… mean. Or the dial with just 7 and 8 on it.</p>
</blockquote>
<h2>Operator Table</h2>
<p>First estimate for all buttons</p>
<ul>
<li>Top Row - <strong>Memory Access</strong>
<ul>
<li><strong><kbd>SETZEN</kbd></strong> -&gt; Wert Speichern (Set)</li>
<li><strong><kbd>A</kbd></strong>..<strong><kbd>F</kbd></strong> -&gt; Speicheradresse (Storage Address Selection)</li>
<li><strong><kbd>LÖSCHEN</kbd></strong> -&gt; Löschen (Clear)</li>
<li>Second Row - <strong>Function</strong></li>
<li>Block 1
<ul>
<li><strong><kbd>A-SP</kbd></strong> -&gt; A - Speicher (A - Storage)</li>
</ul>
</li>
<li>Block 2 - <strong>ALU Operation</strong>
<ul>
<li><strong><kbd>AD</kbd></strong> -&gt; Addition (Addition)</li>
<li><strong><kbd>ET</kbd></strong> -&gt; Et (&amp;) (See Below)</li>
<li><strong><kbd>EX</kbd></strong> -&gt; EXclusive oder (exclusive or)</li>
</ul>
</li>
<li>Block 3
<ul>
<li><strong><kbd>UMKEHREN</kbd></strong> Richtung Umkehren (Reverse Direction) (See Below)</li>
</ul>
</li>
</ul>
</li>
<li>Third Row - <strong>Register Transfer Operation</strong>
<ul>
<li>Block 1 Data - <strong>Operation on A</strong>
<ul>
<li><strong><kbd>AS</kbd></strong> -&gt; A Setzen/Speichern (Set A)</li>
<li><strong><kbd>AR</kbd></strong> -&gt; A Rückführung (Cycle A back to A)</li>
<li><strong><kbd>AB</kbd></strong> -&gt; A nach B (Move A to B)</li>
</ul>
</li>
<li>Block 2 Data - <strong>Operation on B</strong>
<ul>
<li><strong><kbd>BS</kbd></strong> -&gt; B Setzen/Speichern (Set A)</li>
<li><strong><kbd>BR</kbd></strong> -&gt; B Rückführung (Cycle B back to B)</li>
<li><strong><kbd>BA</kbd></strong> -&gt; B nach A (Move B to A)</li>
</ul>
</li>
</ul>
</li>
<li>Fourth Row
<ul>
<li>Left (Main) block - <strong>Data Input</strong>
<ul>
<li><strong><kbd>1</kbd></strong>..<strong><kbd>128</kbd></strong> -&gt; Input Data Value</li>
</ul>
</li>
<li>Right (Below Dial) - <strong>Single stepping</strong>
<ul>
<li><strong><kbd>O</kbd></strong> -&gt; Single Bit Data Input (See Below)</li>
<li><strong><kbd>L</kbd></strong> -&gt; Single Bit Data Input (")</li>
<li><strong><kbd>TAKT</kbd></strong> -&gt; Tact, one clock pulse</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong><kbd>ET</kbd></strong> is Latin for 'and' and the <a href="https://de.wikipedia.org/wiki/Et-Zeichen" rel="noreferrer">German name</a> for the '&amp;' symbol, commonly known as 'Und' (And) Symbol or 'Kaufmännisches Und' (Commercial And) or  'Firmen-Und' (Company-And) as it's often used in company names.</p>
<p><strong><kbd>UMKEHREN</kbd></strong> is 'Reverse Direction' (*2). A mystery  first. Considering it being located in the function control row and coloured black like <strong><kbd>A-SP</kbd></strong>, not white like the ALU functions, it might be about memory transfer direction. That would make sense by assuming that pressing <strong><kbd>A-SP</kbd></strong> connects lines O/L to the memory and <strong><kbd>UMKEHREN</kbd></strong> defines direction. When not pressed A transfers to memory, pressed transfers memory to A.</p>
<p>Connecting the memory for reading <em>and</em> writing at O/L als resolves why there are no other connections visible used for writing (*3). Except that the circuitry as drawn does not allow to read A at O/L. So while the operation seems plausible, the location memory writes are connected is still unclear.</p>
<p>The Dial works as clock circuit. A rotary dial emits 1..10 of pulses according to the value dialled (10 = 0). thus 7 and 8 are there to emit 7 or 8 clock pules. The other values are simply blocked as they make no sense with an 8 bit system.</p>
<p>On the main table O/L are data entry lines to feed the A register an external value. Most likely those two buttons enable loading of the value selected at the fourth row (or from memory).</p>
<p>Combined with the <strong><kbd>TAKT</kbd></strong> (tact) those buttons may work as a single step clocking instead of using the dial to handle a full 8 bit word at once. If that's true, then pressing <strong><kbd>TAKT</kbd></strong> will give a single clock pulse, while <strong><kbd>O</kbd></strong>/<strong><kbd>L</kbd></strong> can provide a single bit input value - if needed according to transfer mode setting (see above). This also explains why they are located at the dial - aka the central clock generator:)</p>
<h2>Main Table</h2>
<p>The main table is structured in three blocks:</p>
<ul>
<li>B-Register at the top</li>
<li>ALU in the middle (kind of framed by black clock lines)</li>
<li>A-Register on the bottom</li>
</ul>
<p>All logic symbols are according to DIN 40700. All connections are colour coded using</p>
<ul>
<li>Red/Green for <em>Data</em></li>
<li>Black for <em>Clock</em></li>
<li>Yellow for <em>ALU Operation</em></li>
<li>Blue for <em>Data Transfer Control</em></li>
</ul>
<p>Buttons are coloured</p>
<ul>
<li>White for Data and Control Input for ALU and Registers</li>
<li>Black for other all functions and</li>
</ul>
<p>Most of the symbols at the keyboard correspond directly to the same inputs visible on the main table, except for the register name:</p>
<ul>
<li>A-Register -&gt; Alu-Register, i.e. target for computation (and usually as well a source)</li>
<li>B-Register -&gt; Secondary value</li>
<li>U-Register -&gt; Übertrag (Carry)</li>
</ul>
<p>In addition the symbols O and L on the main board seem to correspond with the data output of the memory block, as well as the single step block at the operators panel.</p>
<h2>Memory Table</h2>
<p>The memory table seems to be an optional add-on as the main Block only marks a single external input (O/L) and no corresponding output. At least when going by schematics. Otherwise O/L could as well be used as output to memory.  Then again, mechanically the setup seems to fold into a single carrying case, right?</p>
<h2>Function</h2>
<p>The <strong>one bit ALU</strong> is formed by a network of AND/OR gates visible in the middle combining the operation (AD/ET/EX) with data input from A and B input (top 4 red/green lines below the B-register, coming from A/B registers) and a carry input (only enabled for additions).</p>
<p>C output comes from the second stage OR gates (the wide ones) and goes to the A register. A carry is created by two AND gates looking at the data value for that bit</p>
<p>The ALU works serial, one bit at a time. Each operation results in a new bit (shifted into A) and a carry value stored at U-Register to be used with the next data bit(s).</p>
<p>The <strong>A-Register</strong> holds the last result of any ALU operation and serves as A input for ALU operation. It can be feed from four sources</p>
<ul>
<li>Reload (feedback) of it's previous value (Enabled by AR)</li>
<li>Load from B (enabled by BA)</li>
<li>ALU result (lines from those wide OR-gates)</li>
<li>Load from external source (lines O/L)</li>
</ul>
<p>The later is most likely the way data is entered from console or memory. As mentioned the way (connection) data is transferred <em>to</em> memory is still unclear. It could as well work using O/L, but then the schematic is missing that part.</p>
<p>The <strong>B-register</strong> register can only be fed from the A-register or its previous value.</p>
<p>Both registers also feature <strong>Input Enable Function</strong>. Here xS (x=A or B) allows a register is to be set with a 'new' input value. This is important as serial operation is by default destructive, i.e if no 'new' value is selected the register will be cleared afterwards.</p>
<h2>Operation</h2>
<p>Operation <em>seems</em> rather straight forward, <strong>although it might need a few trials to get it right</strong>. Examples</p>
<p>Before each example/step unset all buttons.</p>
<ol>
<li><p>Load A from Keyboard</p>
<ul>
<li>Set value on <strong><kbd>1</kbd></strong>..<strong><kbd>128</kbd></strong> buttons</li>
<li>Set <strong><kbd>AS</kbd></strong> so A gets loaded</li>
<li><strong><kbd>Dial 8</kbd></strong> and enjoy</li>
</ul>
</li>
<li><p>Transfer A to B</p>
<ul>
<li>Set <strong><kbd>AB</kbd></strong></li>
<li>If the value in A is tobe retained
<ul>
<li>Set <strong><kbd>AS</kbd></strong> to enable setting of A</li>
<li>Set <strong><kbd>AR</kbd></strong> to reload A with A</li>
</ul>
</li>
<li><strong><kbd>Dial 8</kbd></strong> and watch</li>
</ul>
</li>
<li><p>Add B to A</p>
<ul>
<li>Set <strong><kbd>AD</kbd></strong> to select ALU function for addition</li>
<li>Set <strong><kbd>AS</kbd></strong> to store the result in A</li>
<li>If the value in B is to be retained
<ul>
<li>Set <strong><kbd>BS</kbd></strong> to enable setting of B</li>
<li>Set <strong><kbd>BR</kbd></strong> to reload B with B</li>
</ul>
</li>
<li><strong><kbd>Dial 8</kbd></strong> and listen</li>
</ul>
</li>
</ol>
<p>And so on...</p>
<p>Of course fun only starts by combination - like adding two numbers is done by sequence of 1,2,1,3. You're program and sequencer of this CPU, so do your job :)</p>
<p>Sounds like several very engaging class hours to analyze and document that device. Lucky kids!</p>
<hr>
<p>At that point several experiments should be done to validate above assumptions. For example storing to memory with and without  <strong><kbd>AR</kbd></strong> pressed to see if the write data is taken directly from A output or at/near O/L.</p>
<hr>
<h3>Sidenote:</h3>
<p>What I loved most is how clear and self defining the labelling is. Not just because of straight language, but equally by <em>not</em> using any self referencing technological terms - that kind of words "everyone knows", but in fact only experts in that area know - if at all - and use with laymen because of that assumption. Misuse being just a quantum leap away. Not so with this device.</p>
<hr>
<p>*1 - The symbols might be a bit unusual for people grown up using US style symbols or younger folks more familiar with those square IEC boxes. German Wiki has a <a href="https://de.wikipedia.org/wiki/Logikgatter#Typen_von_Logikgattern_und_Symbolik" rel="noreferrer">comparison table</a>.</p>
<p>*2 - Interpreting this as reversing or inverting bits doesn't make much sense, as there is no logic visible, neither for reversing nor inverting all bits. Also reversing would be 'Umdrehen', while inverting is 'Invertieren' in German</p>
<p>*3 - Too bad as it would prohibit any exchange operation.</p>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: deptry 0.14.0 – detect unused Python dependencies up to 10 times faster (131 pts)]]></title>
            <link>https://github.com/fpgmaas/deptry/releases/tag/0.14.0</link>
            <guid>39724132</guid>
            <pubDate>Sat, 16 Mar 2024 08:04:54 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/fpgmaas/deptry/releases/tag/0.14.0">https://github.com/fpgmaas/deptry/releases/tag/0.14.0</a>, See on <a href="https://news.ycombinator.com/item?id=39724132">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-pjax="true" data-test-selector="body-content" data-view-component="true"><h2>What's Changed</h2>
<p>This release significantly improves the speed of <code>deptry</code>, particularly for large projects, by utilizing Rust to manage the parsing of Abstract Syntax Trees (AST) from <code>.py</code> files and to extract the import statements. For some benchmarks, see below:</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/12008199/312599153-4f045622-7566-4cc3-a589-dbc6ea12ea5f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA2MTU5MDksIm5iZiI6MTcxMDYxNTYwOSwicGF0aCI6Ii8xMjAwODE5OS8zMTI1OTkxNTMtNGYwNDU2MjItNzU2Ni00Y2MzLWE1ODktZGJjNmVhMTJlYTVmLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE2VDE5MDAwOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg2MmM2OTI3YjcwM2ExZmE4Nzk1OGMzNDA5ZDUzMzdiMWRmZTRjMTc3ZDMxNjQ4Mjc1NTZlNmExOTI2NDg0NzYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.gLLoH1_lYlWeaqm8-gTDn7GuP0dSW0vwwCBqYuuF0K8"><img src="https://private-user-images.githubusercontent.com/12008199/312599153-4f045622-7566-4cc3-a589-dbc6ea12ea5f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA2MTU5MDksIm5iZiI6MTcxMDYxNTYwOSwicGF0aCI6Ii8xMjAwODE5OS8zMTI1OTkxNTMtNGYwNDU2MjItNzU2Ni00Y2MzLWE1ODktZGJjNmVhMTJlYTVmLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE2VDE5MDAwOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg2MmM2OTI3YjcwM2ExZmE4Nzk1OGMzNDA5ZDUzMzdiMWRmZTRjMTc3ZDMxNjQ4Mjc1NTZlNmExOTI2NDg0NzYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.gLLoH1_lYlWeaqm8-gTDn7GuP0dSW0vwwCBqYuuF0K8" width="75%" content-type-secured-asset="image/png"></a></p><h3>Changes</h3>
<p>Since the changes are all in the back-end, little has changed for the user other than the execution speed. The two minor notable changes are:</p>
<ul>
<li>Improved identification of <code>column</code> identifier in imports detection. Where earlier the column identifier for an imported module <code>foo</code> in the line <code>import foo</code> would be <code>0</code>, it now points to column <code>8</code>.</li>
<li>When a file can not be read, the error will be slightly more verbose and include the source file and line pointing to the location in deptry's source code responsible for logging the warning. So instead of <code>Warning: File file1.py could not be read. Skipping...</code>, the error will now read <code>WARNING  deptry.imports:imports.rs:66 Warning: File file1.py could not be read. Skipping...</code>. This will likely be reverted in the future.</li>
</ul>
<h3>Available wheels on PyPi</h3>
<p>Where earlier releases published a single <code>.whl</code> file to PyPi, with the move to Rust we now build and publish wheels for a variety of platforms and architectures. More specifically, wheel files for the following combinations are now available on PyPi:</p>
<ul>
<li>Linux: ABI3 wheels for <code>x86_64</code> and <code>aarch64</code> architectures.</li>
<li>Windows: ABI3 wheels for the <code>x64</code> architecture.</li>
<li>macOS: ABI3 wheels for <code>x86_64</code> and <code>aarch64</code> (Apple Silicon) architectures.</li>
</ul>
<p>Alongside the ABI3 wheels, we provide a source distribution (sdist) package.</p>
<p><strong>Full Changelog</strong>: <a href="https://github.com/fpgmaas/deptry/compare/0.13.0...0.14.0"><tt>0.13.0...0.14.0</tt></a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Libraries struggle to afford e-books, seek new laws in fight with publishers (240 pts)]]></title>
            <link>https://abcnews.go.com/US/wireStory/libraries-struggle-afford-demand-books-seek-new-state-108035200</link>
            <guid>39724045</guid>
            <pubDate>Sat, 16 Mar 2024 07:47:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://abcnews.go.com/US/wireStory/libraries-struggle-afford-demand-books-seek-new-state-108035200">https://abcnews.go.com/US/wireStory/libraries-struggle-afford-demand-books-seek-new-state-108035200</a>, See on <a href="https://news.ycombinator.com/item?id=39724045">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-testid="prism-article-body"><p><span>HARTFORD, Conn. -- </span>Whenever bestselling author Robin Cook releases a new medical thriller, the head of the public library in West Haven knows demand for digital copies will be high. So will the price.</p><p>Like many libraries, West Haven has been grappling with the soaring costs of e-books and audiobooks. The digital titles often come with a price tag that’s far higher than what consumers pay. While one hardcover copy of Cook’s latest novel costs the library $18, it costs $55 to lease a digital copy — a price that can't be haggled with publishers.</p><p>And for that, the e-book expires after a limited time, usually after one or two years, or after 26 checkouts, whichever comes first. While e-books purchased by consumers can last into perpetuity, libraries need to renew their leased e-material.</p><p>The modestly funded West Haven Library has spent more than $12,000 over the last three years to lease just 276 additional digital titles beyond what patrons can access through a consortium of public libraries. Eighty-four of those books are no longer available. If that same amount had been spent on paper books, it would have covered about 800 titles.</p><p>“Imagine if a playground was built at a school with tax dollars, only to be taken down after two years of use," librarian Colleen Bailie said at a recent public hearing.</p><p>Publishers, however, argue the arrangement is fair considering e-book licenses for libraries allow numerous patrons to “borrow” them and the per-reader cost is much less expensive than the per-reader rate. </p><p>Librarians in several states have been pushing for legislation to rein in the costs and restrictions on electronic material, which has been growing in popularity since the COVID-19 pandemic. Patrons are stuck on long waiting lists for audio and e-books, and digital offerings are limited. </p><p>This year, lawmakers in states including Connecticut, Massachusetts, Illinois, Hawaii and New Hampshire have proposed bills aimed at closing the affordability gap. A bill was introduced in Virginia but was tabled in February.</p><p>They face strong opposition from the publishing industry, which argues the legislation undermines intellectual property values and will harm the publishing ecosystem.</p><p>“They do have a funding problem, but the answer is not to take it out of the pockets of authors and destroy the rights of creators and pass unconstitutional legislation,” said Shelley Husband, senior vice president of government affairs at the Association of American Publishers, noting how more people than ever can access e-material that might otherwise have been purchased from booksellers.</p><p> Readers across the globe borrowed 662 million e-books, audiobooks and digital magazines last year, up 19% since 2022, according to data provided by OverDrive, the main distributor of digital content for libraries and schools.</p><p>Libraries Online Inc., a Connecticut interlibrary consortium, is currently spending roughly $20,000 a month on e-books for its 38 members. Replacing expired titles consumes 20% of the consortium’s budget, said e-book committee chair, Rebecca Harlow.</p><p>“If we replaced all of the content that has expired this year, the cost would exceed our entire annual budget for e-books,” Harlow recently told lawmakers. “We have completely lost the ability to build a library collection.”</p><p>The consortium leases fewer than 30 books a month for children and 30 books a month for teens, she said.</p><p>Dumping e-books and audio books isn’t considered an option for libraries with patrons like Casey Rosseau, 53, of West Hartford, Connecticut.</p><p>Rosseau, an information technology worker, has worsening eyesight. He reads about 200 audiobooks a year using OverDrive’s Libby app on his phone, and is typically on waiting lists for months at a time for the most coveted titles.</p><p>“I’ve always gone to the library to get the latest John Grisham or the latest James Patterson (novel),” he said. “Those come out so often that you have to have really deep pockets in order to be able to afford to buy them.”</p><p>In 2021, Maryland passed a law that would have required publishers to make e-books available on “reasonable terms” to libraries if they were being offered to the general public. That was struck down by a judge in 2022, after publishers successfully argued that federal copyright law bars states from regulating publishing transactions. New York Gov. Kathy Hochul vetoed a similar measure in 2021.</p><p>Many of the latest legislative proposals try a different approach.</p><p>An Illinois bill would void contracts between libraries and publishers that include certain provisions, such as restricting a library’s right to determine loan periods for licensed electronic material. Massachusetts and Connecticut are looking at similar proposals.</p><p>“Basically, rather than telling the publishers that they have to do anything in particular, our bill would tell the libraries on what terms they can make deals with the publishers,” said Connecticut state Rep. Matt Blumenthal, a Democrat.</p><p>Husband, of the Association of American Publishers, said she sees no real difference between the overturned Maryland law and these latest efforts. Last year, organizations representing publishers, booksellers and authors formed The Protect the Creative Economy Coalition to oppose state legislation.</p><p>But Julie Holden, assistant library director for the Cranston Public Library in Rhode Island, said that without legislative change, local librarians will not only continue to face financial strain, they’ll be bogged down examining lists of expiring digital leases to decide whether they can justify spending more money to renew each one.</p><p>“Taxpayers who fund our public libraries deserve better. Way better,” she said.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Brain Waves Appear to Wash Out Waste During Sleep (358 pts)]]></title>
            <link>https://jamanetwork.com/journals/jama/fullarticle/2816616</link>
            <guid>39723704</guid>
            <pubDate>Sat, 16 Mar 2024 06:01:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jamanetwork.com/journals/jama/fullarticle/2816616">https://jamanetwork.com/journals/jama/fullarticle/2816616</a>, See on <a href="https://news.ycombinator.com/item?id=39723704">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-userhasaccess="True">
    

            <p>Many important cellular functions occur during sleep, including the brain’s removal of waste and toxins. However, researchers previously lacked an understanding of the mechanisms behind this complex process. Now, research involving mice <a href="https://doi.org/10.1038/s41586-024-07108-6">recently published</a> in <i>Nature</i> suggests that brain waves are responsible for the self-cleansing.</p>            <p>Researchers observed neurons in the brains of sleeping mice. As neurons fired electrical signals, they acted as coordinated pumps, producing rhythmic waves that appeared to flush cerebrospinal fluid through brain tissue, washing out waste. After the researchers silenced certain areas of the brain to stop the waves, cerebrospinal fluid lost the ability to flow, leaving detritus in place.</p>            <p>First author Li-Feng Jiang-Xie, PhD, of the Washington University School of Medicine, noted in a <a href="https://www.eurekalert.org/news-releases/1035658">press release</a> that this knowledge has potential implications for neurological conditions such as Alzheimer disease and Parkinson disease, in which the accumulation of metabolic waste and “junk proteins” can lead to neurodegeneration.</p>            
                        <div>
                                <p><a href="#top" data-tab-toggle=".tab-nav-full-text">Back to top</a></p><p>
                                Article Information
                            </p>
                        </div>
<p><strong>Published Online:</strong> March 15, 2024. doi:10.1001/jama.2024.2077</p>

</div></div>]]></description>
        </item>
    </channel>
</rss>