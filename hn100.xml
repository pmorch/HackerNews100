<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 13 Apr 2025 06:30:02 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[BPS is a GPS alternative that nobody's heard of (142 pts)]]></title>
            <link>https://www.jeffgeerling.com/blog/2025/bps-gps-alternative-nobodys-heard</link>
            <guid>43669308</guid>
            <pubDate>Sun, 13 Apr 2025 01:31:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.jeffgeerling.com/blog/2025/bps-gps-alternative-nobodys-heard">https://www.jeffgeerling.com/blog/2025/bps-gps-alternative-nobodys-heard</a>, See on <a href="https://news.ycombinator.com/item?id=43669308">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>I came to the NAB (National Association of Broadcasters) show this year with my Dad to learn more about time in broadcast and live production.</p>

<p>I was expecting to learn more about grandmaster clocks, AV sync, timing in protocols like Dante, Livewire, AES67, and more—and I <em>have</em>. But then on the first day here I found this odd little corner of the building with a completely empty booth:</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/bps-demo-booth-empty.jpeg" width="700" height="467" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-c92190f2-fa60-4fb5-b03f-45b20588b7c4" data-insert-attach="{&quot;id&quot;:&quot;c92190f2-fa60-4fb5-b03f-45b20588b7c4&quot;,&quot;attributes&quot;:{&quot;alt&quot;:[&quot;alt&quot;,&quot;description&quot;],&quot;title&quot;:[&quot;title&quot;]}}" alt="BPS Demo Booth - it is empty"></p>

<p>When you see an oscilloscope that costs 3x the value of your car on a trade show floor... well, let's just say my interest was piqued.</p>

<p>I looked at it, and found something interesting—the trigger was on a GPS PPS timing signal output from a u-blox GPS receiver. But the 2nd channel was monitoring <a href="https://news3lv.com/">KSNV-TV</a>, a US television station broadcasting an <em>ATSC 3.0</em> signal.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/bps-gps-vs-ksnv-timing-signal.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-72f669c9-563f-466c-9c5b-a5d3b0634e6e" data-insert-attach="{&quot;id&quot;:&quot;72f669c9-563f-466c-9c5b-a5d3b0634e6e&quot;,&quot;attributes&quot;:{&quot;alt&quot;:[&quot;alt&quot;,&quot;description&quot;],&quot;title&quot;:[&quot;title&quot;]}}" alt="BPS KSNV-TV vs GPS pps"></p>

<p>The scope showed a PPS output (Pulse Per Second) demonstrating a pulse sync of +/- 10 ns between GPS and the TV signal output—which so happens to be <em>BPS</em>, an experimental timing standard that may be incorporated into the ATSC 3.0 rollout in the US (there are currently about 1,700 TV stations that could be upgraded).</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/bps-scope-10-ns-sync-gps.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-8926d48d-f994-4820-838c-2b2b8beed4bd" data-insert-attach="{&quot;id&quot;:&quot;8926d48d-f994-4820-838c-2b2b8beed4bd&quot;,&quot;attributes&quot;:{&quot;alt&quot;:[&quot;alt&quot;,&quot;description&quot;],&quot;title&quot;:[&quot;title&quot;]}}" alt="BPS showing 10ns sync"></p>

<p>After seeing the demo, I found out there <em>are</em> a few people who've heard of BPS... and many of them were presenting on it, as they were also the ones who were doing the initial rollout and experimentation.</p>

<p>ATSC 3.0 is a newer IP broadcast standard being rolled out in some countries—my own home city has two TV stations broadcasting it right now, under the 'NEXTGEN TV' moniker. But so far only a few TV stations are participating in the BPS testing.</p>

<p>Because accurate timing is critical in many areas, from media, to the power grid, to 5G and communications, having a reliable terrestrial backup to GPS—especially one that can be hardened against different types of jamming attempts—may be important to our economy, communications and power grid... or people like who just want to have a good time!</p>

<p>And speaking of time stuff at the NAB Show... can you guess what I'm pointing to in this photo, from the ASUS booth?</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/jeff-geerling-nab-2025-asus-proart-motherboard-pps-tgpio.jpeg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-8a6e7c70-c424-44e5-b834-fc4b80117316" data-insert-attach="{&quot;id&quot;:&quot;8a6e7c70-c424-44e5-b834-fc4b80117316&quot;,&quot;attributes&quot;:{&quot;alt&quot;:[&quot;alt&quot;,&quot;description&quot;],&quot;title&quot;:[&quot;title&quot;]}}" alt="Jeff Geerling pointing to PPS in out on ASUS ProArt motherboard"></p>

<p>If you guessed built-in PPS in/out connectors on a consumer Intel motherboard that syncs to <a href="https://eci.intel.com/docs/3.0/development/tcc-tools.html">TGPIO</a> (Time-Aware GPIO) on an Intel CPU... you'd be right! And if you have no clue what that means, well, I'll cover it more in depth later this year :)</p>

<p>Anyway, I am still learning about BPS, so I'll probably go deeper into it later in my timing series on my YouTube channel, but for now, I'll leave with with a quick video showing the demo (below), and a couple links for those who want to learn more:</p>

<div>
<p><iframe src="https://www.youtube.com/embed/cPCzNdUz5z0" frameborder="0" allowfullscreen=""></iframe></p>
</div>

<p>More resources:</p>

<ul>
<li><a href="https://www.nab.org/bps/ITM25-0009.pdf">BPS / NIST time experiment results</a></li>
<li><a href="https://nabpilot.org/broadcast-positioning-system-bps/">NAB PILOT - BPS Info</a></li>
<li><a href="https://www.ursanav.com/wp-content/uploads/UrsaNav-PTTI-Conference-Presentation.pdf">UrsaNav's eLoran timing</a></li>
</ul></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Experimental release of GrapheneOS for Pixel 9a (146 pts)]]></title>
            <link>https://grapheneos.social/@GrapheneOS/114327666433966529</link>
            <guid>43669185</guid>
            <pubDate>Sun, 13 Apr 2025 01:05:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://grapheneos.social/@GrapheneOS/114327666433966529">https://grapheneos.social/@GrapheneOS/114327666433966529</a>, See on <a href="https://news.ycombinator.com/item?id=43669185">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Anubis Works (181 pts)]]></title>
            <link>https://xeiaso.net/notes/2025/anubis-works/</link>
            <guid>43668433</guid>
            <pubDate>Sat, 12 Apr 2025 22:32:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://xeiaso.net/notes/2025/anubis-works/">https://xeiaso.net/notes/2025/anubis-works/</a>, See on <a href="https://news.ycombinator.com/item?id=43668433">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <article>
    
    
    <p>
        Published on <time datetime="2025-04-12">04/12/2025</time>, 441 words, 2 minutes to read
    </p>

    

    
        
            
    

    

        
    

    
        <center>
            <figure><picture><source type="image/avif" srcset="https://cdn.xeiaso.net/file/christine-static/hero/dominos-un.avif"><source type="image/webp" srcset="https://cdn.xeiaso.net/file/christine-static/hero/dominos-un.webp"><img alt="An image of A 'domino effect' meme starting with 'Amazon takes out my Git server' and ending with 'Software deployed by the United Nations'." loading="lazy" src="https://cdn.xeiaso.net/file/christine-static/hero/dominos-un.jpg"></picture></figure>
        </center>
        <small>A 'domino effect' meme starting with 'Amazon takes out my Git server' and ending with 'Software deployed by the United Nations'. - Meme generated on imgflip.com</small>
    

    <p>That meme is not an understatement, <a href="https://anubis.techaro.lol/">Anubis</a> has been deployed by the United Nations.</p>
<p>For your amusement, here is how the inner monologue of me finding out about this went:</p>
<div><div><p><img alt="Aoi is wut" loading="lazy" src="https://stickers.xeiaso.net/sticker/aoi/wut"></p><div><p><span><a href="https://xeiaso.net/characters#aoi">Aoi</a></span><span></span></p><p>What. You can't be serious, can you?</p></div></div><div><p><img alt="Cadey is coffee" loading="lazy" src="https://stickers.xeiaso.net/sticker/cadey/coffee"></p></div><div><p><img alt="Aoi is wut" loading="lazy" src="https://stickers.xeiaso.net/sticker/aoi/wut"></p><div><p><span><a href="https://xeiaso.net/characters#aoi">Aoi</a></span><span></span></p><p>No, that can't be a real domain of the United Nations, can it?</p></div></div><div><p><img alt="Cadey is coffee" loading="lazy" src="https://stickers.xeiaso.net/sticker/cadey/coffee"></p></div><div><p><img alt="Aoi is sus" loading="lazy" src="https://stickers.xeiaso.net/sticker/aoi/sus"></p><div><p><span><a href="https://xeiaso.net/characters#aoi">Aoi</a></span><span></span></p><p>No way. No fucking way. What the heck, how is this real. What is YOUR
LIFE??? God I got the worst 2025 bingo card this year.</p></div></div></div>
<p>I hate to shake my can and ask for donations, but if you are using Anubis and it helps, please <a href="https://patreon.com/cadey">donate on Patreon</a>. I would really love to not have to work in generative AI anymore because the doublethink is starting to wear at my soul.</p>
<p>Also, do I happen to know anyone at UNESCO? I would love to get in touch with their systems administrator team and see if they had any trouble with setting it up. I'm very interested in making it easier to install.</p>
<p>This makes the big deployments that I know about include:</p>
<ul>
<li>The Linux Kernel Mailing List archives</li>
<li>FreeBSD's SVN (and soon git)</li>
<li>SourceHut</li>
<li>FFmpeg</li>
<li>Wine</li>
<li>UNESCO</li>
<li>The Science Olympiad Student Center</li>
<li>Enlightenment (the desktop environment)</li>
</ul>
<p>The conversation I'm about to have with my accountant is going to be one of the most surreal conversations of all time.</p>
<p>The part that's the most wild to me is when I stop and consider the scale of these organizations. I think that this means that the problem is <em>much worse</em> than I had previously anticipated. I know that at some point YouTube was about to hit "the inversion" where they get more bot traffic than they get human traffic. I wonder how much this is true across most of, if not all of the Internet right now.</p>
<p>I guess this means that I really need to start putting serious amounts of effort into Anubis and the stack around it. The best way that can be ensured is if I can get enough money to survive so I can put my full time effort into it. I may end up hiring people.</p>
<p>This is my life now. Follow me <a href="https://bsky.app/profile/xeiaso.net">on Bluesky</a> if you want to know when the domino meme gets more ridiculous!</p>

    <hr>

    

    

    <p>Facts and circumstances may have changed since publication. Please contact me before jumping to conclusions if something seems wrong or unclear.</p>

    <p>Tags: </p>
</article>
        </div><div>
            <p>Copyright 2012-2025 Xe Iaso. Any and all opinions listed here are my own and
                not representative of any of my employers, past, future, and/or present.</p>
            
            <p>Served by xesite v4 (/app/xesite) with site version 
                        <a href="https://github.com/Xe/site/commit/39be1916f1f429bbae7da0b45534d72ceb01d8f0">39be1916</a>
                    , source code available <a href="https://github.com/Xe/site">here</a>.</p>
        </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[YAML: The Norway Problem (2022) (102 pts)]]></title>
            <link>https://www.bram.us/2022/01/11/yaml-the-norway-problem/</link>
            <guid>43668290</guid>
            <pubDate>Sat, 12 Apr 2025 22:10:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bram.us/2022/01/11/yaml-the-norway-problem/">https://www.bram.us/2022/01/11/yaml-the-norway-problem/</a>, See on <a href="https://news.ycombinator.com/item?id=43668290">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="page">
	<p><a href="#content">
		Skip to content	</a></p><!-- #masthead -->

	<div id="content">
		<main id="main">

			
<article id="post-31489">
		
	
	<div>
		<p><a href="https://www.bram.us/wordpress/wp-content/uploads/2022/01/yaml-e1641935644383.webp" data-slb-active="1" data-slb-asset="1019124662" data-slb-internal="0" data-slb-group="31489"><img fetchpriority="high" decoding="async" src="https://www.bram.us/wordpress/wp-content/uploads/2022/01/yaml-e1641935644383-560x194.webp" alt="" width="560" height="194" srcset="https://www.bram.us/wordpress/wp-content/uploads/2022/01/yaml-e1641935644383-560x194.webp 560w, https://www.bram.us/wordpress/wp-content/uploads/2022/01/yaml-e1641935644383-768x266.webp 768w, https://www.bram.us/wordpress/wp-content/uploads/2022/01/yaml-e1641935644383.webp 1110w" sizes="(max-width: 560px) 100vw, 560px"></a></p>
<p>Earlier this week, <a href="https://twitter.com/haroenv/">Haroen Viaene</a> posted this tweet about YAML:</p>
<blockquote>
<p lang="en" dir="ltr">worst part of yaml: <a href="https://t.co/iiK37EpChV">https://yaml.org/type/bool.html</a></p>
<p>— Haroen Viaene (@haroenv) <a href="https://twitter.com/haroenv/status/1480520812063080456?ref_src=twsrc%5Etfw">January 10, 2022</a></p></blockquote>

<p>The linked-to page contains the documentation on what defines a boolean in YAML, and details that it can be parsed using this <abbr title="Regular Expression">regex</abbr>:</p>
<pre><code>y|Y|yes|Yes|YES|n|N|no|No|NO
|true|True|TRUE|false|False|FALSE
|on|On|ON|off|Off|OFF</code></pre>
<p>~</p>
<p>The reason to why this is problematic in some cases, is “The Norway Problem” YAML has: when you abbreviate Norway to its ISO 3166-1 ALPHA-2 form <code>NO</code>, YAML will return <code>false</code> when parsing it:</p>
<pre><code>countries:
- GB
- IE
- FR
- DE
- NO</code></pre>
<pre><code>&gt;&gt;&gt; from pyyaml import load
&gt;&gt;&gt; load(the_configuration)
{'countries': ['GB', 'IE', 'FR', 'DE', False]}</code></pre>
<p>👉 The solution is to either escape these values in double quotes, or to use a library — such as StrictYAML for Python — that won’t convert <code>NO</code> to <code>False</code>.</p>
<p>~</p>
<p>Other problematic values in YAML are version numbers that end in <code>.0</code> and a lastname such as <code>Null</code>. By default these get converted to numbers or <code>NULL</code> respectively.</p>
<p><a href="https://hitchdev.com/strictyaml/why/implicit-typing-removed/">The Norway Problem →</a><br><a href="https://hitchdev.com/strictyaml/">StrictYAML →</a></p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

			<div>
	
	<p>
		Bramus is a frontend web developer from Belgium, working as a Chrome Developer Relations Engineer at Google. From the moment he discovered view-source at the age of 14 <em>(way back in 1997)</em>, he fell in love with the web and has been tinkering with it ever since <i><a href="https://www.bram.us/about">(more …)</a></i>		<a href="https://www.bram.us/author/bramus/" rel="author">
			View more posts		</a>
	</p><!-- .author-description -->
</div><!-- .author-bio -->
				
</article><!-- #post-31489 -->

	<nav aria-label="Posts">
		<h2>Post navigation</h2>
		
	</nav>
<!-- #comments -->

		</main><!-- #main -->
	</div><!-- #content -->

	<!-- #colophon -->

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[WebTUI – A CSS Library That Brings the Beauty of Terminal UIs to the Browser (114 pts)]]></title>
            <link>https://webtui.ironclad.sh</link>
            <guid>43668250</guid>
            <pubDate>Sat, 12 Apr 2025 22:02:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://webtui.ironclad.sh">https://webtui.ironclad.sh</a>, See on <a href="https://news.ycombinator.com/item?id=43668250">Hacker News</a></p>
<div id="readability-page-1" class="page"><div flex-="col gap:1" space-="px:1" data-astro-cid-j7pv25f6="">  <p tabindex="0" data-astro-cid-j7pv25f6="">
WebTUI is a modular CSS library that brings the beauty of Terminal
              UIs to the browser
</p> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Zod v4 Beta (154 pts)]]></title>
            <link>https://v4.zod.dev/v4</link>
            <guid>43667925</guid>
            <pubDate>Sat, 12 Apr 2025 21:03:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://v4.zod.dev/v4">https://v4.zod.dev/v4</a>, See on <a href="https://news.ycombinator.com/item?id=43667925">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div><p>Refer to the <a href="https://v4.zod.dev/v4/changelog">Changelog</a> for a complete list of breaking changes.</p></div></div>
<p>Zod 4 is now in beta after over a year of active development. It's faster, slimmer, more <code>tsc</code>-efficient, and implements some long-requested features.</p>
<p>To install the beta:</p>
<figure tabindex="0"></figure>
<p>Development will continue on the <a href="https://github.com/colinhacks/zod/tree/v4" rel="noreferrer noopener" target="_blank"><code>v4</code></a> branch over a 4-6 week beta period as I work with libraries to ensure day-one compatibility with the first stable release.</p>
<div><p>❤️</p><div><p>Huge thanks to <a href="https://go.clerk.com/zod-clerk" rel="noreferrer noopener" target="_blank">Clerk</a>, who supported my work on Zod 4 through their extremely generous <a href="https://clerk.com/blog/zod-fellowship" rel="noreferrer noopener" target="_blank">OSS Fellowship</a>. They were an amazing partner throughout the (much longer than anticipated!) development process.</p></div></div>

<p>Zod v3.0 was released in May 2021 (!). Back then Zod had 2700 stars on GitHub and 600k weekly downloads. Today it has 36.5k stars and 23M weekly downloads. After 24 minor versions, the Zod 3 codebase has hit a ceiling; the most commonly requested features and improvements require breaking changes.</p>
<p>Zod 4 implements all of these in one fell swoop. It uses an entirely new internal architecture that solves some long-standing design limitations, lays the groundwork for some long-requested features, and closes 9 of Zod's <a href="https://github.com/colinhacks/zod/issues?q=is%3Aissue%20state%3Aopen%20sort%3Areactions-%2B1-desc" rel="noreferrer noopener" target="_blank">10 most upvoted open issues</a>. With luck, it will serve as the new foundation for many more years to come.</p>
<p>For a scannable breakdown of what's new, see the table of contents. Click on any item to jump to that section.</p>

<p>You can run these benchmarks yourself in the Zod repo:</p>
<figure tabindex="0"></figure>
<p>Then to run a particular benchmark:</p>
<figure tabindex="0"></figure>
<h3 id="26x-faster-string-parsing"><a data-card="" href="#26x-faster-string-parsing">2.6x faster string parsing</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<figure tabindex="0"></figure>
<h3 id="3x-faster-array-parsing"><a data-card="" href="#3x-faster-array-parsing">3x faster array parsing</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<figure tabindex="0"></figure>
<h3 id="7x-faster-object-parsing"><a data-card="" href="#7x-faster-object-parsing">7x faster object parsing</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>This runs the <a href="https://moltar.github.io/typescript-runtime-type-benchmarks/" rel="noreferrer noopener" target="_blank">Moltar validation library benchmark</a>.</p>
<figure tabindex="0"></figure>

<p>Consider the following simple file:</p>
<figure tabindex="0"></figure>
<p>Compiling this file with <code>tsc --extendedDiagnostics</code> using <code>zod@3</code> results in &gt;25000 type instantiations. With <code>zod@4</code> it only results in ~1100.</p>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div><p>The Zod repo contains a <code>tsc</code> benchmarking playground. Try this for yourself using the compiler benchmarks in <code>packages/tsc</code>. The exact numbers may change as the implementation evolves.</p><figure tabindex="0"></figure></div></div>
<p>More importantly, Zod 4 has redesigned and simplified the generics of <code>ZodObject</code> and other schema classes to avoid some pernicious "instantiation explosions". For instance, chaining <code>.extend()</code> and <code>.omit()</code> repeatedly—something that previously caused compiler issues:</p>
<figure tabindex="0"></figure>
<p>In Zod 3, this took <code>4000ms</code> to compile; and adding additional calls to <code>.extend()</code> would trigger a "Possibly infinite" error. In Zod 4, this compiles in <code>400ms</code>, <code>10x</code> faster.</p>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div><p>Coupled with the upcoming <a href="https://github.com/microsoft/typescript-go" rel="noreferrer noopener" target="_blank"><code>tsgo</code></a> compiler, Zod 4's editor performance will scale to vastly larger schemas and codebases.</p></div></div>

<p>Consider the following simple script.</p>
<figure tabindex="0"></figure>
<p>It's about as simple as it gets when it comes to validation. That's intentional; it's a good way to measure the <em>core bundle size</em>—the code that will end up in the bundle even in simple cases. We'll bundle this with <code>rollup</code> using both Zod 3 and Zod 4 and compare the final bundles.</p>
<div><table><thead><tr><th>Package</th><th>Bundle (gzip)</th></tr></thead><tbody><tr><td><code>zod@3</code></td><td><code>12.47kb</code></td></tr><tr><td><code>zod@4</code></td><td><code>5.36kb</code></td></tr></tbody></table></div>
<p>The core bundle is ~57% smaller in Zod 4 (2.3x). That's good! But we can do a lot better.</p>

<p>Zod's method-heavy API is fundamentally difficult to tree-shake. Even our simple <code>z.boolean()</code> script pulls in the implementations of a bunch of methods we didn't use, like <code>.optional()</code>, <code>.array()</code>, etc. Writing slimmer implementations can only get you so far. That's where <code>@zod/mini</code> comes in.</p>
<figure tabindex="0"></figure>
<p>It's a sister library with a functional, tree-shakable API that corresponds one-to-one with <code>zod</code>. Where Zod uses methods, <code>@zod/mini</code> generally uses wrapper functions:</p>

<p>Not all methods are gone! The parsing methods are identical in <code>zod</code> and <code>@zod/mini</code>.</p>
<figure tabindex="0"></figure>
<p>There's also a general-purpose <code>.check()</code> method used to add refinements.</p>

<p>The following top-level refinements are available in <code>@zod/mini</code>. It should be fairly self-explanatory which <code>zod</code> methods they correspond to.</p>
<figure tabindex="0"></figure>
<p>This more functional API makes it easier for bundlers to tree-shaking the APIs you don't use. While <code>zod</code> is still recommended for the majority of use cases, any projects with uncommonly strict bundle size constraints should consider <code>@zod/mini</code>.</p>
<h3 id="66x-reduction-in-core-bundle-size"><a data-card="" href="#66x-reduction-in-core-bundle-size">6.6x reduction in core bundle size</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>Here's the script from above, updated to use <code>"@zod/mini"</code> instead of <code>"zod"</code>.</p>
<figure tabindex="0"></figure>
<p>When we build this with <code>rollup</code>, the gzipped bundle size is <code>1.88kb</code>. That's an 85% (6.6x) reduction in core bundle size compared to <code>zod@3</code>.</p>
<div><table><thead><tr><th>Package</th><th>Bundle (gzip)</th></tr></thead><tbody><tr><td><code>zod@3</code></td><td><code>12.47kb</code></td></tr><tr><td><code>zod@4</code></td><td><code>5.36kb</code></td></tr><tr><td><code>@zod/mini</code></td><td><code>1.88kb</code></td></tr></tbody></table></div>
<p>Learn more on the dedicated <a href="https://v4.zod.dev/packages/mini"><code>@zod/mini</code></a> docs page. Complete API details are mixed into existing documentation pages; code blocks contain separate tabs for <code>zod</code> and <code>@zod/mini</code> wherever their APIs diverge.</p>

<p>Zod 4 introduces a new system for adding strongly-typed metadata to your schemas. Metadata isn't stored inside the schema itself; instead it's stored in a "schema registry" that associates a schema with some typed metadata. To create a registry with <code>z.registry()</code>:</p>
<figure tabindex="0"></figure>
<p>To add schemas to your registry:</p>
<figure tabindex="0"></figure>
<p>Alternatively, you can use the <code>.register()</code> method on a schema for convenience:</p>
<!-- -->
<figure tabindex="0"></figure>
<h3 id="the-global-registry"><a data-card="" href="#the-global-registry">The global registry</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>Zod also exports a global registry <code>z.globalRegistry</code> that accepts some common JSON Schema-compatible metadata:</p>
<figure tabindex="0"></figure>
<h3 id="meta"><a data-card="" href="#meta"><code>.meta()</code></a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>To conveniently add a schema to <code>z.globalRegistry</code>, use the <code>.meta()</code> method.</p>
<!-- -->
<figure tabindex="0"></figure>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div><p>For compatibility with Zod 3, <code>.describe()</code> is still available, but <code>.meta()</code> is preferred.</p><figure tabindex="0"></figure></div></div>

<p>Zod 4 introduces first-party JSON Schema conversion via <code>z.toJSONSchema()</code>.</p>
<figure tabindex="0"></figure>
<p>Any metadata in <code>z.globalRegistry</code> is automatically included in the JSON Schema output.</p>
<figure tabindex="0"></figure>
<p>Refer to the <a href="https://v4.zod.dev/json-schema">JSON Schema docs</a> for information on customizing the generated JSON Schema.</p>

<p>Zod 4 introduces a new API for defining object types: <code>z.interface()</code>. This may seem surprising or confusing, so I'll briefly explain the reasoning here. (A full blog post on this topic is coming soon.)</p>
<h3 id="exacter-optional-properties"><a data-card="" href="#exacter-optional-properties">Exact(er) optional properties</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>In TypeScript a property can be "optional" in two distinct ways:</p>
<figure tabindex="0"></figure>
<p>In <code>KeyOptional</code>, the <code>prop</code> key can be omitted from the object ("key optional"). In <code>ValueOptional</code>, the <code>prop</code> key <em>must be set</em> however it can be set to <code>undefined</code> ("value optional").</p>
<p>Zod 3 cannot represent <code>ValueOptional</code>. Instead, <code>z.object()</code> automatically adds question marks to any key that accepts a value of <code>undefined</code>:</p>
<figure tabindex="0"></figure>
<p>This includes special schema types like <code>z.unknown()</code>:</p>
<figure tabindex="0"></figure>
<p>To properly represent "key optionality", Zod needed an <em>object-level</em> API for marking keys as optional, instead of trying to guess based on the value schema.</p>
<p>This is why Zod 4 introduces a new API for defining object types: <code>z.interface()</code>.</p>
<figure tabindex="0"></figure>
<p>Key optionality is now defined with a <code>?</code> suffix in the key itself. This way, you have the power to differentiate between key- and value-optionality.</p>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div><p>Besides this change to optionality, <code>z.object()</code> and <code>z.interface()</code> are functionality identical. They even use the same parser internally.</p></div></div>
<p>The <code>z.object()</code> API is <em>not deprecated</em>; feel free to continue using it if you prefer it! For the sake of backwards compatibility, <code>z.interface()</code> was added as an opt-in API.</p>
<h3 id="true-recursive-types"><a data-card="" href="#true-recursive-types">True recursive types</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>But wait there's more! After implementing <code>z.interface()</code>, I had a huge realization. The <code>?</code>-suffix API in <code>z.interface()</code> lets Zod sidestep a TypeScript limitation that has long prevented Zod from cleanly representing recursive (cyclical) types. Take this example from the old Zod 3 docs:</p>
<figure tabindex="0"></figure>
<p>This has been a thorn in my side for years. To define a cyclical object type, you must</p>
<ul>
<li>define a redundant interface</li>
<li>use <code>z.lazy()</code> to avoid reference errors</li>
<li>cast your schema to <code>z.ZodType</code></li>
</ul>
<p>That's terrible.</p>
<p>Here's the same example in Zod 4:</p>
<figure tabindex="0"></figure>
<p>No casting, no <code>z.lazy()</code>, no redundant type signatures. Just use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get" rel="noreferrer noopener" target="_blank">getters</a> to define any cyclical properties. The resulting instance has all the object methods you expect:</p>
<figure tabindex="0"></figure>
<p>This means Zod can finally represent commonly cyclical data structure like ORM schemas, GraphQL types, etc.</p>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div><p>Given its ability to represent both cyclical types and more exact optionality, I recommend always using <code>z.interface()</code> over <code>z.object()</code> without reservation. That said, <code>z.object()</code> will never be deprecated or removed, so feel free to keep using it if you prefer.</p></div></div>

<p>To validate <code>File</code> instances:</p>
<figure tabindex="0"></figure>

<p>Zod 4 introduces a new <code>locales</code> API for globally translating error messages into different languages.</p>
<figure tabindex="0"></figure>
<p>At the time of this writing only the English locale is available; There will be a call for pull request from the community shortly; this section will be updated with a list of supported languages as they become available.</p>

<p>The success of the <a href="https://www.npmjs.com/package/zod-validation-error" rel="noreferrer noopener" target="_blank"><code>zod-validation-error</code></a> package demonstrates that there's significant demand for an official API for pretty-printing errors. If you are using that package currently, by all means continue using it.</p>
<p>Zod now implements a top-level <code>z.prettifyError</code> function for converting a <code>ZodError</code> to a user-friendly formatted string.</p>
<figure tabindex="0"></figure>
<p>This returns the following pretty-printable multi-line string:</p>
<figure tabindex="0"></figure>
<p>Currently the formatting isn't configurable; this may change in the future.</p>

<p>All "string formats" (email, etc.) have been promoted to top-level functions on the <code>z</code> module. This is both more concise and more tree-shakable. The method equivalents (<code>z.string().email()</code>, etc.) are still available but have been deprecated. They'll be removed in the next major version.</p>
<figure tabindex="0"></figure>
<h3 id="custom-email-regex"><a data-card="" href="#custom-email-regex">Custom email regex</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>The <code>z.email()</code> API now supports a custom regular expression. There is no one canonical email regex; different applications may choose to be more or less strict. For convenience Zod exports some common ones.</p>
<figure tabindex="0"></figure>

<p>Zod 4 implements <code>z.templateLiteral()</code>. Template literal types are perhaps the biggest feature of TypeScript's type system that wasn't previously representable.</p>
<figure tabindex="0"></figure>
<p>Every Zod schema type that can be stringified stores an internal regex: strings, string formats like <code>z.email()</code>, numbers, boolean, bigint, enums, literals, undefined/optional, null/nullable, and other template literals. The <code>z.templateLiteral</code> constructor concatenates these into a super-regex, so things like string formats (<code>z.email()</code>) are properly enforced (but custom refinements are not!).</p>
<p>Read the <a href="https://v4.zod.dev/api#template-literals">template literal docs</a> for more info.</p>

<p>New numeric "formats" have been added for representing fixed-width integer and float types. These return a <code>ZodNumber</code> instance with proper minimum/maximum constraints already added.</p>
<figure tabindex="0"></figure>
<p>Similarly the following <code>bigint</code> numeric formats have also been added. These integer types exceed what can be safely represented by a <code>number</code> in JavaScript, so these return a <code>ZodBigInt</code> instance with the proper minimum/maximum constraints already added.</p>
<figure tabindex="0"></figure>

<p>The existing <code>z.coerce.boolean()</code> API is very simple: falsy values (<code>false</code>, <code>undefined</code>, <code>null</code>, <code>0</code>, <code>""</code>, <code>NaN</code> etc) become <code>false</code>, truthy values become <code>true</code>.</p>
<p>This is still a good API, and its behavior aligns with the other <code>z.coerce</code> APIs. But some users requested a more sophisticated "env-style" boolean coercion. To support this, Zod 4 introduces <code>z.stringbool()</code>:</p>
<figure tabindex="0"></figure>
<p>To customize the truthy and falsy values:</p>
<figure tabindex="0"></figure>
<p>Refer to the <a href="https://v4.zod.dev/api#stringbools"><code>z.stringbool()</code> docs</a> for more information.</p>

<p>The majority of breaking changes in Zod 4 involve the <em>error customization</em> APIs. They were a bit of a mess in Zod 3; Zod 4 makes things significantly more elegant, to the point where I think it's worth highlighting here.</p>
<p>Long story short, there is now a single, unified <code>error</code> parameter for customizing errors, replacing the following APIs:</p>
<p>Replace <code>message</code> with <code>error</code>. (The <code>message</code> parameter is still supported but deprecated.)</p>
<figure tabindex="0"></figure>
<p>Replace <code>invalid_type_error</code> and <code>required_error</code> with <code>error</code> (function syntax):</p>
<figure tabindex="0"></figure>
<p>Replace <code>errorMap</code> with <code>error</code> (function syntax):</p>
<figure tabindex="0"></figure>

<p>Discriminated union support has improved in a couple ways. First, you no longer need to specify the discriminator key. Zod now has a robust way to identify the discriminator key automatically. If no shared discriminator key is found, Zod will throw an error at schema initialization time.</p>
<figure tabindex="0"></figure>
<p>Discriminated unions schema now finally <em>compose</em>—you can use one discriminated union as a member of another. Zod determines the optimal discrimination strategy.</p>
<figure tabindex="0"></figure>

<p>The <code>z.literal()</code> API now optionally supports multiple values.</p>
<figure tabindex="0"></figure>

<p>In Zod 3, they were stored in a <code>ZodEffects</code> class that wrapped the original schema. This was inconvenient, as it meant you couldn't interleave <code>.refine()</code> with other schema methods like <code>.min()</code>.</p>
<figure tabindex="0"></figure>
<p>In Zod 4, refinements are stored inside the schemas themselves, so the code above works as expected.</p>
<figure tabindex="0"></figure>
<h3 id="overwrite"><a data-card="" href="#overwrite"><code>.overwrite()</code></a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>The <code>.transform()</code> method is extremely useful, but it has one major downside: the output type is no longer <em>introspectable</em> at runtime. The transform function is a black box that can return anything. This means (among other things) there's no sound way to convert the schema to JSON Schema.</p>
<figure tabindex="0"></figure>
<p>Zod 4 introduces a new <code>.overwrite()</code> method for representing transforms that <em>don't change the inferred type</em>. Unlike <code>.transform()</code>, this method returns an instance of the original class. The overwrite function is stored as a refinement, so it doesn't (and can't) modify the inferred type.</p>
<figure tabindex="0"></figure>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div><p>The existing <code>.trim()</code>, <code>.toLowerCase()</code> and <code>.toUpperCase()</code> methods have been reimplemented using <code>.overwrite()</code>.</p></div></div>

<p>While this will not be relevant to the majority of Zod users, it's worth highlighting. The addition of <code>@zod/mini</code> necessitated the creation of a third package <code>@zod/core</code> that contains the core functionality shared between <code>zod</code> and <code>@zod/mini</code>.</p>
<p>I was resistant to this at first, but now I see it as one of Zod 4's most important features. It lets Zod level up from a simple library to a fast validation "substrate" that can be sprinkled into other libraries.</p>
<p>If you're building a schema library, refer to the implementations of <code>zod</code> and <code>@zod/mini</code> to see how to build on top of the foundation <code>@zod/core</code> provides. Don't hesitate to get in touch in GitHub discussions or via <a href="https://x.com/colinhacks" rel="noreferrer noopener" target="_blank">X</a>/<a href="https://bsky.app/profile/colinhacks.com" rel="noreferrer noopener" target="_blank">Bluesky</a> for help or feedback.</p>

<p>I'm planning to write up a series of additional posts explaining the design process and rationale behind some major features like <code>@zod/mini</code> and <code>z.interface()</code>. I'll update this section as those get posted.</p>
<p>Zod 4 will remain in beta for roughly 6 weeks as I work with library authors and major adopters to ensure a smooth day-one transition from Zod 3 to Zod 4. I encourage all users of Zod to upgrade their installation and provide feedback during the beta window.</p>
<figure tabindex="0"></figure>
<p>Happy parsing!<br>
— Colin McDonnell <a href="https://x.com/colinhacks" rel="noreferrer noopener" target="_blank">@colinhacks</a></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HNInternal: Ask HN: How do you monetize personal code if it's not an "app"? (117 pts)]]></title>
            <link>https://news.ycombinator.com/item?id=43667887</link>
            <guid>43667887</guid>
            <pubDate>Sat, 12 Apr 2025 20:56:48 GMT</pubDate>
            <description><![CDATA[<p>See on <a href="https://news.ycombinator.com/item?id=43667887">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><td><table>
        <tbody><tr id="43667887">
      <td><span></span></td>      <td><center><a id="up_43667887" href="https://news.ycombinator.com/vote?id=43667887&amp;how=up&amp;goto=item%3Fid%3D43667887"></a></center></td><td><span><a href="https://news.ycombinator.com/item?id=43667887">Ask HN: How do you monetize personal code if it's not an "app"?</a></span></td></tr><tr><td colspan="2"></td><td><span>
          <span id="score_43667887">104 points</span> by <a href="https://news.ycombinator.com/user?id=splimeproject">splimeproject</a> <span title="2025-04-12T20:56:48 1744491408"><a href="https://news.ycombinator.com/item?id=43667887">7 hours ago</a></span> <span id="unv_43667887"></span> | <a href="https://news.ycombinator.com/hide?id=43667887&amp;goto=item%3Fid%3D43667887">hide</a> | <a href="https://hn.algolia.com/?query=Ask%20HN%3A%20How%20do%20you%20monetize%20personal%20code%20if%20it%27s%20not%20an%20%22app%22%3F&amp;type=story&amp;dateRange=all&amp;sort=byDate&amp;storyText=false&amp;prefix&amp;page=0">past</a> | <a href="https://news.ycombinator.com/fave?id=43667887&amp;auth=a791293e2baeb64a463f4745dab5fac204be12ad">favorite</a> | <a href="https://news.ycombinator.com/item?id=43667887">37&nbsp;comments</a>        </span>
              </td></tr>
    <tr><td></td></tr><tr><td colspan="2"></td><td><div><p>Hey HN,</p><p>I’ve been thinking a lot about this lately and wanted to ask — how do you monetize your personal code if it doesn’t really fit into a classic product or SaaS model?</p><p>For example:</p><p>* I have a trained ML model that solves a niche task really well — but turning it into a full-blown app seems like overkill.</p><p>* I’ve written a CLI tool that processes log files better than anything else I’ve found, but it’s too specialized to justify making a company out of it.</p><p>* I built a few small functions in different languages (Python, Go, Rust) that do neat things — data cleanup, API scraping, PDF generation — but none of them are “products” by themselves.</p><p>I’m exploring ways to package and expose this kind of work: maybe as paid APIs, small function services, or even “pocket FaaS” instances others can plug into.</p><p>Curious if anyone here has tried something similar — or if you’ve seen creative ways to turn technical tools or utilities into sustainable side income.</p><p>Thanks in advance for sharing ideas or examples!</p></div></td></tr>        <tr><td></td></tr><tr><td colspan="2"></td><td><form action="comment" method="post"></form></td></tr>  </tbody></table>
  </td></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: memEx, a personal knowledge base inspired by zettlekasten and org-mode (127 pts)]]></title>
            <link>https://gitea.bubbletea.dev/shibao/memex</link>
            <guid>43667061</guid>
            <pubDate>Sat, 12 Apr 2025 19:02:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gitea.bubbletea.dev/shibao/memex">https://gitea.bubbletea.dev/shibao/memex</a>, See on <a href="https://news.ycombinator.com/item?id=43667061">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
				



				
				
					
						

					
					
<div id="repo-files-table">
	<div>
		<div>
	
		<p><img loading="lazy" src="https://gitea.bubbletea.dev/avatars/d77ebd6c802813bab859df9afebed22f324e701735f587198fd9736e19e76fd0?size=48" title="shibao" width="24" height="24">
		
			<a title="shibao" href="https://gitea.bubbletea.dev/shibao"><strong>shibao</strong></a>
		
	
	<a rel="nofollow" href="https://gitea.bubbletea.dev/shibao/memEx/commit/926d4f983769542ff79e1e57c75514dabc7fc61a">
		<span>926d4f9837</span>
		
	</a>
	
	
		<span data-tippy="commit-statuses" tabindex="0">
			


	





		</span></p><div>
	<p>
		
			All checks were successful
		

		
	</p>

	<div>
		
			<div>
				


	





				<p>continuous-integration/drone/tag <span>Build is passing</span></p>
				
			</div>
		
			<div>
				


	





				<p>continuous-integration/drone/push <span>Build is passing</span></p>
				
			</div>
		
		
	</div>
</div>


	
	<p><span title="fix style"><span><a href="https://gitea.bubbletea.dev/shibao/memEx/commit/926d4f983769542ff79e1e57c75514dabc7fc61a">fix style</a></span>
		
	</span>

</p></div>
		<p><relative-time prefix="" tense="past" datetime="2025-04-05T04:02:14Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 04:02:14 +00:00</relative-time></p>
	</div>
	
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T04:02:14Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 04:02:14 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T04:02:14Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 04:02:14 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T04:02:14Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 04:02:14 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2023-02-04T17:36:27-05:00" data-tooltip-content="" data-tooltip-interactive="true">2023-02-04 17:36:27 -05:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2023-04-13T23:29:29-04:00" data-tooltip-content="" data-tooltip-interactive="true">2023-04-13 23:29:29 -04:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-02-13T22:01:54Z" data-tooltip-content="" data-tooltip-interactive="true">2025-02-13 22:01:54 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:51Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:51 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2022-12-19T21:09:50-05:00" data-tooltip-content="" data-tooltip-interactive="true">2022-12-19 21:09:50 -05:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-02-15T06:01:03Z" data-tooltip-content="" data-tooltip-interactive="true">2025-02-15 06:01:03 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2024-12-31T00:32:20-05:00" data-tooltip-content="" data-tooltip-interactive="true">2024-12-31 00:32:20 -05:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-04-05T03:42:43Z" data-tooltip-content="" data-tooltip-interactive="true">2025-04-05 03:42:43 +00:00</relative-time></p>
		</div>
	
		<div>
			
			
			
			
			
			<p><relative-time prefix="" tense="past" datetime="2025-02-15T06:01:03Z" data-tooltip-content="" data-tooltip-interactive="true">2025-02-15 06:01:03 +00:00</relative-time></p>
		</div>
	
</div>

					
						<div id="readme">

	

	<h4>
		
		
	</h4>
	<div>
			
				
<p dir="auto"><a href="https://gitea.bubbletea.dev/shibao/memEx/raw/branch/stable/home.png" target="_blank" rel="nofollow noopener"><img src="https://gitea.bubbletea.dev/shibao/memEx/raw/branch/stable/home.png" alt="home page screenshot"></a></p>
<p dir="auto">A structured personal knowledge base, inspired by zettlekasten and org-mode.</p>
<ul dir="auto">
<li>Notes: Document notes about individual items or concepts</li>
<li>Contexts: Provide context around a single topic and hotlink to individual
concepts in your notes</li>
<li>Pipelines: Document your processes, attaching contexts to each step.</li>
</ul>
<h2 id="user-content-features" dir="auto">Features</h2>
<ul dir="auto">
<li>Multi-user: Built with sharing and collaboration in mind</li>
<li>Privacy: Privacy controls on a per-note, context or pipeline basis</li>
<li>Convenient: Accessible from any internet-capable device</li>
<li>Backlinks: View referencing items from the referenced item</li>
</ul>
<h2 id="user-content-installation" dir="auto">Installation</h2>
<ol dir="auto">
<li>Install <a href="https://docs.docker.com/compose/install/" rel="nofollow">Docker Compose</a> or alternatively <a href="https://docs.docker.com/desktop/" rel="nofollow">Docker Desktop</a> on your machine.</li>
<li>Copy the example <a href="https://gitea.bubbletea.dev/shibao/memEx/src/branch/stable/docker-compose.yml" rel="nofollow">docker-compose.yml</a>. into your local machine where you want.
Bind mounts are created in the same directory by default.</li>
<li>Set the configuration variables in <code>docker-compose.yml</code>. You'll need to run
<code>docker run -it shibaobun/memex /app/priv/random.sh</code> to generate a new
secret key base.</li>
<li>Use <code>docker-compose up</code> or <code>docker-compose up -d</code> to start the container!</li>
</ol>
<p dir="auto">The first created user will be created as an admin.</p>
<h2 id="user-content-configuration" dir="auto">Configuration</h2>
<p dir="auto">You can use the following environment variables to configure memEx in
<a href="https://gitea.bubbletea.dev/shibao/memEx/src/branch/stable/docker-compose.yml" rel="nofollow">docker-compose.yml</a>.</p>
<ul dir="auto">
<li><code>HOST</code>: External url to generate links with. Must be set with your hosted
domain name! I.e. <code>memex.mywebsite.tld</code></li>
<li><code>PORT</code>: Internal port to bind to. Defaults to <code>4000</code>. Must be reverse proxied!</li>
<li><code>DATABASE_URL</code>: Controls the database url to connect to. Defaults to
<code>ecto://postgres:postgres@memex-db/memex</code>.</li>
<li><code>ECTO_IPV6</code>: If set to <code>true</code>, Ecto should use ipv6 to connect to PostgreSQL.
Defaults to <code>false</code>.</li>
<li><code>POOL_SIZE</code>: Controls the pool size to use with PostgreSQL. Defaults to <code>10</code>.</li>
<li><code>SECRET_KEY_BASE</code>: Secret key base used to sign cookies. Must be generated
with <code>docker run -it shibaobun/memex priv/random.sh</code> and set for server to start.</li>
<li><code>REGISTRATION</code>: Controls if user sign-up should be invite only or set to
public. Set to <code>public</code> to enable public registration. Defaults to <code>invite</code>.</li>
<li><code>LOCALE</code>: Sets a custom default locale. Defaults to <code>en_US</code>.</li>
<li><code>SMTP_HOST</code>: The url for your SMTP email provider. Must be set</li>
<li><code>SMTP_PORT</code>: The port for your SMTP relay. Defaults to <code>587</code>.</li>
<li><code>SMTP_USERNAME</code>: The username for your SMTP relay. Must be set!</li>
<li><code>SMTP_PASSWORD</code>: The password for your SMTP relay. Must be set!</li>
<li><code>SMTP_SSL</code>: Set to <code>true</code> to enable SSL for emails. Defaults to <code>false</code>.</li>
<li><code>EMAIL_FROM</code>: Sets the sender email in sent emails. Defaults to
<code>no-reply@HOST</code> where <code>HOST</code> was previously defined.</li>
<li><code>EMAIL_NAME</code>: Sets the sender name in sent emails. Defaults to "memEx".</li>
</ul>
<h2 id="user-content-contribution" dir="auto">Contribution</h2>
<p dir="auto">Contributions are greatly appreciated, no ability to code needed! You can browse
the <a href="https://gitea.bubbletea.dev/shibao/memex/src/branch/stable/contributing.md" rel="nofollow">Contribution
Guide</a>
to learn more.</p>
<p dir="auto">I can be contacted at <a href="mailto:shibao@bubbletea.dev" rel="nofollow">shibao@bubbletea.dev</a>, or on
the fediverse at
<a href="https://misskey.bubbletea.dev/@shibao" rel="nofollow">@shibao@misskey.bubbletea.dev</a>. Thank
you!</p>
<h2 id="user-content-license" dir="auto">License</h2>
<p dir="auto">memEx is licensed under AGPLv3 or later. A copy of the latest version of the
license can be found at
<a href="https://gitea.bubbletea.dev/shibao/memex/src/branch/stable/license.md" rel="nofollow">license.md</a>.</p>
<h2 id="user-content-links" dir="auto">Links</h2>
<ul dir="auto">
<li><a href="https://gitea.bubbletea.dev/shibao/memex" rel="nofollow">Gitea</a>: Main repo, feature
requests and bug reports</li>
<li><a href="https://github.com/shibaobun/memex" rel="nofollow">Github</a>: Source code mirror, please
don't open pull requests to this repository</li>
<li><a href="https://weblate.bubbletea.dev/engage/memex" rel="nofollow">Weblate</a>: Contribute to
translations!</li>
</ul>
<hr>
<p dir="auto"><a href="https://drone.bubbletea.dev/shibao/memEx" rel="nofollow"><img src="https://drone.bubbletea.dev/api/badges/shibao/memEx/status.svg?ref=refs/heads/dev" alt="Build
Status"></a>
<a href="https://weblate.bubbletea.dev/engage/memEx/" rel="nofollow"><img src="https://weblate.bubbletea.dev/widgets/memEx/-/svg-badge.svg" alt="translation
status"></a></p>

			
		</div>
</div>

					
				
			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Why is there a "small house" in IBM's Code page 437? (127 pts)]]></title>
            <link>https://blog.glyphdrawing.club/why-is-there-a-small-house-in-ibm-s-code-page-437/</link>
            <guid>43667010</guid>
            <pubDate>Sat, 12 Apr 2025 18:55:17 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.glyphdrawing.club/why-is-there-a-small-house-in-ibm-s-code-page-437/">https://blog.glyphdrawing.club/why-is-there-a-small-house-in-ibm-s-code-page-437/</a>, See on <a href="https://news.ycombinator.com/item?id=43667010">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <div>
<h4 id="note">Note:</h4>
<p>This post is a companion piece to my article <a href="https://blog.glyphdrawing.club/the-origins-of-del-0x7f-and-its-legacy-in-amiga-ascii-art/">The origins of DEL (0x7F) and its Legacy in Amiga ASCII art</a>. That article is all about the character DEL, what it is, how it was used, and why it even has a visual representation, but with a focus on Commodore's Amiga computers. Whereas AmigaOS's Topaz font renders DEL with diagonal lines, IBM's PC renders it... as a house. This bonus article is about that.</p>
<p>This article wouldn't have happened without the great help and insights of <a href="https://mw.rat.bz/">Michael Walden</a> and <a href="https://int10h.org/blog/">VileR</a>, thank you!</p>
<p>If you want to comment on something (minor or major), please send me an email at <strong><a href="mailto:hlotvonen@gmail.com">hlotvonen@gmail.com</a></strong>. I would greatly appreciate it, and if something needs fixing I would gladly update the article with proper credit.</p>
</div>
<hr>
<div>
<h2 id="a-b-c-d-x-y-zhouse">a-b-c-d-x-y-z...HOUSE?</h2>
<p>There's a small house ( <span>⌂</span> ) in the middle of IBM's infamous character set Code Page 437. <strong>"Small house"</strong>—that's the official IBM name given to the glyph at code position 0x7F, where a control character for "Delete" (DEL) should logically exist. It's cute, but a little strange. I wonder, how did it get there? Why did IBM represent DEL as a <em>house</em>, of all things?</p>
</div>
<figure>
    <img alt="Code Page 437 table, highlighting the character 'small house' at 0x7F" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/WtGwIoZIJW-512.png" width="512" height="640">
    <figcaption>IBM PC's Code Page 437</figcaption>
</figure>
<h2 id="the-rise-of-code-page-437">The rise of Code Page 437</h2>
<p>Released in 1981, the <em>IBM Personal Computer</em> (PC) launched IBM's first microcomputer model line. Alongside it, they introduced an 8-bit character set, which later became known as <em>Code Page 437</em> (CP437). Unlike earlier IBM machines, the PC was built using off-the-shelf components instead of proprietary IBM technology, which spawned a wave of third-party clones marketed as "IBM-compatible" systems. IBM PC architecture quickly became the dominant global computing standard. By the end of the '80s, 84% of all sold microcomputers were either IBM PC's or its clones.<sup><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p>The rise of PC also meant the widespread adoption of CP437, making it one of the most copied and recognizable character sets ever. VileR's <a href="https://int10h.org/oldschool-pc-fonts/">Ultimate Oldschool PC Font Pack</a> lists over 200 fonts based on CP437 from various IBM PC models and their clones.</p>
<p>CP437 was based on <em>American Standard Code for Information Interchange</em> (ASCII), which defines the first 127 characters. This was a big change for IBM who had previously used the fundamentally different EBCDIC standard. But as ASCII covers only 96 <em>printable</em> characters of the total 256 available in 8-bit code, IBM had to figure out what to do with the rest of them. Instead of basing their choices on any predefined standards extending ASCII, or copying others, they decided (yet again) to do their own thing.</p>
<h2 id="a-set-of-not-serious-characters">A set of "not serious" characters</h2>
<p>The extended bits (characters 128–255) of CP437 contain mainly a mishmash of international text characters, box drawing shapes and mathematical symbols. But for the undefined control characters they did something wildly different. Dr. David J. Bradley, one of the creators of the IBM PC, recounts the <a href="https://www.vintagecomputing.com/index.php/archives/790/the-ibm-smiley-character-turns-30"><em>origins of the ASCII smiley character</em></a> in an email conversation with Benj Edwards of <a href="http://vintagecomputing.com/">vintagecomputing.com</a>:</p>
<blockquote>
<p>"Now, what to do about the first 32 characters (x00-x1F)? ASCII defines them as control codes, carriage return, line feed, tab… These characters originated with teletype transmission. But we could display them on the character based screens. So we added a set of “not serious” characters. They were intended as display only characters, not for transmission or storage. Their most probable use would be in [text] character based games."<sup><a href="#fn2" id="fnref2">[2]</a></sup></p>
</blockquote>
<p>The first 32 characters (x00-x1F) of CP437 mentioned by Bradley include smileys, playing card suits, musical notes, a solar symbol, gender symbols and arrows. What Bradley doesn't explicitly mention is the character at 0x7F, which is also a (sort-of) control character used in teletype transmission. It's assigned to the Delete character, which was used to obliterate undesirable characters on paper tape by punching it full of holes. The all-holes pattern in ASCII is at the 127th code point, represented by 0x7F in hexadecimal. This character is like all the other 32 control characters in that it doesn't have a defined visual representation, nor any particular use in digital computers like the IBM PC. So, even though Bradley doesn't explicitly mention 0x7F, it's represented in CP437 as a tiny pixel-house ( <span>⌂</span> ), suggesting it also belongs to the "not serious" group of characters.</p>
<figure>
    <img alt="Code Page 437 table, highlighting the 'not serious' characters" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/td-XacaseR-304.png" width="304" height="568">
    <figcaption>The "not serious" characters</figcaption>
</figure>
<p>According to Bradley, the "not serious" characters were developed during a 4-hour plane travel. He's of course exaggerating, but gave it as an "indication of the rapidity in which many significant decisions were undertaken". But even though they developed them relatively quickly, they must have based them on <em>something</em>.</p>
<p>What is this something? IBM could have followed an existing standard and taken the graphics for control characters from ANSI X3.32-1973—but they are ambiguous and hard-to-use (see part 2 of <a href="https://blog.glyphdrawing.club/the-origins-of-del-0x7f-and-its-legacy-in-amiga-ascii-art/#part-2">The origins of DEL (0x7F) and its Legacy in Amiga ASCII art</a>). Instead, going with these "not serious" characters was arguably a better choice, especially as a business decision. Characters like the smiley face at 0x01 became iconic, precisely because they offered a simple way to represent player characters in text-based games like <a href="https://en.wikipedia.org/wiki/Rogue_(video_game)">Rogue</a> and <a href="https://en.wikipedia.org/wiki/ZZT">ZZT</a>.</p>
<p>IBM was by no means the first to include "not serious" characters. For example, Commodore's PETSCII character set from 1977 is known for its graphical shapes which also include card suites.<sup><a href="#fn3" id="fnref3">[3]</a></sup></p>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/P91gLYO8_N-259.png" width="259" height="293">
    <figcaption>PETSCII (manually ordered)</figcaption>
</figure>
<p>Even the American National Standards Institute's (ANSI) X3.2 committee considered including some "not serious" symbols for an official 8-bit ASCII extension.</p>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/IKput0bqT4-800.png" width="800" height="715">
    <figcaption>Proposal for an 8-bit extension for ASCII. It didn't get standardized. The closest to an "official" 8-bit extension to ASCII is ISO 8859-1 (also called ISO Latin-1), which extended support for additional Latin based languages, standardized by the International Organization for Standardization (ISO) in 1987.</figcaption>
</figure>
<p>But, why add these quirky characters, when arguably more useful characters, like extending support for additional languages or writing systems, could be added? Bob Bemer ("The Father of ASCII") defends their inclusion in an article for the <em>Interface Age</em> in July 1978:</p>
<blockquote>
<p>"Presumably the card suits will strike your eye, and you will wonder why so many other useful symbols were ignored in favor of these. Don't worry, they will always come in handy; it's sometimes useful to have symbols whose meaning you can reassign without harm to programming languages, etc."<sup><a href="#fn4" id="fnref4">[4]</a></sup></p>
</blockquote>
<p>This is definitely the case with Code Page 437's house symbol ( <span>⌂</span> ). It is ambiguous enough that it can resemble many different things, not just a house. For example, in the DOS games <a href="https://www.mobygames.com/game/16049/by-fire-sword/"><em>By Fire &amp; Sword</em></a> (1985) it's a <strong>town</strong>, in <a href="https://cheerfulghost.com/jdodson/posts/1179/zzt-an-epic-dos-ansi-adventure"><em>ZZT</em></a> (1991) it stands for <strong>"energizers"</strong>, in <a href="https://www.mobygames.com/game/67110/bugs/"><em>Bugs!</em></a> (1982) it's the <strong>player's gun</strong>, in <a href="https://www.mobygames.com/game/72491/ibm-personal-computer-basic-compiler-included-game/"><em>Target</em></a> (1982) it represents <strong>player's ammo</strong>, and in <a href="https://sparcie.wordpress.com/2018/03/28/numjump-for-dos/"><em>Numjump</em></a> (2017) they're deadly <strong>spikes</strong>.</p>
<figure>
    <img alt="Screenshot from Numjump. In this game, the house symbols represent spikes." loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/eiKv43OuWf-711.png" width="711" height="444">
    <figcaption>In the 2017 homebrew DOS game <em>Numjump</em> by Daniel Remar, the house symbols represent spikes.</figcaption>
</figure>
<figure>
    <img alt="Screenshot from ZZT. In this game, the house symbols represent energizers." loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/hjr_rWbs7m-640.gif" width="640" height="350">
    <figcaption>Screenshot from ZZT, made by Tim Sweeney (the CEO of Epic Games!) in 1991. In this game, the house symbols represent energizers (on the right edge of the game view).</figcaption>
</figure>
<p>PC ASCII artists have used the house symbol, not as a specific thing with meaning, but purely for its shape and size, to create what is called "newskool", or filled ASCII art. In the classic 8×16 pixels-per-character IBM VGA font, it's one of the few characters that sit one pixel <em>higher</em> from the baseline.</p>
<figure>
    <img alt="The house, compared to a and $" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/Qimy5q8QQv-260.png" width="260" height="178">
</figure>
<p>When combined with other characters that are just slighly larger or smaller creates an illusion of a continuous shape: <span>·∙•↔*⌂S§¼╣$♫b%⌂≈←·</span>.</p>
<p>It's also fairly wide and "dark" in its typographic color, so it fills the space it occupies, without leaving any considerable gaps of negative space. In other words, it doesn't stand out when used carefully.</p>
<p>Its angled top makes it useful for creating curves, as seen in ddrj's <a href="https://16colo.rs/pack/mimic73/drj-mmc.ans">drj-mmc.ans</a> from 2004 (house characters are highlighted in red):</p>
<figure>
    <img alt="Screenshot from Numjump. In this game, the house symbols represent spikes." loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/UuUNxQ4W3c-640.png" width="640" height="672">
    <figcaption>drj-mmc.ans. Colors have been changed from original to highlight the use of 0x7F.</figcaption>
</figure>
<h2 id="theories-on-the-origins-of-cp437s-house">Theories on the origins of CP437's house</h2>
<p>But what about IBM? Why did IBM decide to include a symbol representing a house in their character set? It's a strange glyph; adding a smiley is readily arguable, and playing card suits have existed in prior character sets, but a house—as far as I can tell—it didn't exist as a glyph anywhere before IBM's Code Page 437. It seems to come out of thin air. To my knowledge, there are no (surviving) documents on the design process of the character set. The little bit we know comes from a few interviews, like the one with David J. Bradley, and from meticulous research done by people like <a href="https://int10h.org/blog/2024/10/missing-ibm-pc-localization-disks-roms/">VileR</a>. So, the only thing I can do is speculate. Here are my thoughts:</p>
<div>
<h4 id="acknowledgements">Acknowledgements</h4>
<p>Most of these theories are based on my conversations with VileR and Michael Walden, credit goes to them!</p>
</div>
<h4 id="theory-1-house-as-a-symbol-for-home-computers">Theory #1: House as a symbol for home computers</h4>
<p>My first thought was that maybe the house was included as a symbol for IBM's new line of personal <strong>home</strong> computers? Before IBM PC's launch in 1981, IBM had largely been known for their business computers. So, it makes sense that, as IBM was entering the growing market of personal computers, they wanted to signal to the home users that their PC had something <em>fun</em> to offer—hence the "not serious" glyphs, like the smiley, which were added with text-based games in mind. So maybe they added the house glyph for the same reason? Surely the smileys must have a house they live in! It's compelling to think this might be true, but to be clear, this is pure speculation, and there's nothing to support this claim.</p>

<p>Another "hunch" was suggested by VileR. He entertained the idea that the house character itself was associated with the action of deleting text, or related to the backspace symbol ⌫ (U+232B). If you rotate ⌫ 90˚ clockwise, you do get a house ⌂ (with an × in it). It's an interesting idea, but there doesn't seem to be anything to support this claim either.</p>
<h4 id="theory-3-its-borrowed-from-system23-datamaster">Theory #3: It's borrowed from System/23 Datamaster</h4>
<p>In the Benj Edwards' email interview, David Bradley also mentions that the choice of "serious characters" was based on the immediate ancestor of PC at IBM, the System/23 Datamaster.<sup><a href="#fn5" id="fnref5">[5]</a></sup> VileR found the Datamaster <a href="https://forum.vcfed.org/index.php?threads/ibm-system-23-datamaster-display-and-character-generation.1247762/">character ROM image</a>, which confirms that some character sequences <em>were</em> copied to CP437 unchanged (üéâäàåçêëèïî). But, there is no house symbol, or anything resembling it.</p>
<h4 id="theory-4-its-borrowed-from-wang-word-processing-machines">Theory #4: It's borrowed from Wang word processing machines</h4>
<p>In a blog post <a href="https://www.os2museum.com/wp/weird-tales/">Weird Tales</a>, Michal Necasek of OS/2 Museum examines claims made by Bill Gates that Microsoft wanted IBM to copy some Wang word processing characters ("smiley faces and boxes and triangles and stuff") into the IBM PC's character set because they were considering creating their own Wang clone. Necasek half-debunks and half-confirms these claims, as none of the Wang character sets have smileys, yet they do share some strikingly similiar characters with CP437, that are unlikely to be a coincidence. These include left/right triangles, a box, a diamond, double exclamation mark, and several arrows.<sup><a href="#fn6" id="fnref6">[6]</a></sup> But again, none of the Wang character sets include a house symbol, so IBM couldn't have copied it from there.</p>
<h4 id="theory-5-it-comes-from-blissymbolics">Theory #5: It comes from Blissymbolics</h4>
<p>So, IBM didn't get the house glyph by copying it from other character sets. But it's unlikely that IBM's team designed the house symbol in a vacuum. If it's not from another computer system, then maybe they found it by looking at books for existing symbol systems and iconography?</p>
<figure>
    <img alt="An icon for a hotel resembles CP437's house glyph" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/C9a5Pmlz33-160.jpeg" width="160" height="160">
</figure>
<p>For example, a hotel icon used by the <abbr title="International Civil Aviation Organization">ICAO</abbr> in the 1970s is quite similar in shape to CP437's house.<sup><a href="#fn7" id="fnref7">[7]</a></sup></p>
<figure>
    <img alt="A house symbol from blissymbolics" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/eH3vupWSkh-160.jpeg" width="160" height="160">
</figure>
<p>Another possibile influence is Blissymbolics. It was originally developed in 1949, but gained some renewed popularity in the 1970s and 1980s.<sup><a href="#fn8" id="fnref8">[8]</a></sup> The Blissymbolics house glyph is striking similar to IBM's character at 0x7F.<sup><a href="#fn9" id="fnref9">[9]</a></sup> If IBM was looking at symbol books, searching for inspiration for their new character set, it's possible they would have come upon Blissymbolics. The timeline fits: a book <em>Teaching and Using Blissymbolics</em> was published in 1980, at the time when IBM was developing CP437.</p>

<h4 id="theory-6-botched-copy-of-a-dot-stretched-wang-delta">Theory #6: Botched copy of a dot-stretched Wang delta</h4>
<p>Or maybe it <em>does</em> come from Wang? Viler makes an interesting observation: a 1979 Wang character set for the <em>2236DE terminal</em> includes a delta symbol ( Δ ) at position 0x9A. At first glance this seemed unrelated to IBM's house symbol at 0x7F. But after viewing the ROM data as a bitmap, VileR discovered two interesting things. First, Wang's delta wasn't a clean equilateral triangle (angles at 60°, 60°, 60°); to avoid uneven displacements between scanlines, which could produce very obvious "jaggies" on low-res CRTs, the delta was instead rendered as a right triangle (angles 45°, 90°, 45°). However, because of this, the triangle's side-corners had to be chopped off, to fit it into its 7×7 pixels-per-character space. Secondly, VileR discovered that the bitmap's pixels were spaced-out, implying that the glyphs relied on some sort of dot-stretching effect in the display circuitry. After these realizations, rendering the bitmap with his <a href="https://int10h.org/blog/2021/01/simulating-crt-monitors-ffmpeg-pt-1-color/">CRT emulator</a> revealed that Wang's delta actually resembles IBM's blocky house symbol.</p>
<figure>
    <img alt="Comparison between Wang's character set as raw ROM data and CRT emulated" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/dwF5gRHI4L-740.png" width="740" height="792">
    <figcaption>Comparison between Wang's character set as raw ROM data and CRT emulated. Is this the origin of IBM PC's house? Compiled from images by VileR.</figcaption>
</figure>
<p>So, if Bill Gates was correct about IBM copying characters from Wang, it's entirely possible that the people at IBM, who were copying glyphs directly from a Wang terminal screen, misinterpreted the delta as a house, especially considering, as Bradley notes, that the whole process was rushed. This is not a definitive proof, but a compelling theory nonetheless!</p>
<h4 id="theory-7-is-it-delta">Theory #7: Is it delta?</h4>
<p>But, in an email conversation, Michael Walden speculates that it might not even be a coincidence that the DELete character has DELta as its printable character glyph.</p>
<p>Delta as a symbol ( Δ ) originates from the Greek alphabet. CP437 already includes some Greek characters in the 0xEO–0xEB range, notably 0xEB being the symbol for Greek <em>small</em> delta ( δ ). These characters were not included to support Greek language, but as math symbols. In mathematics and other sciences, the uppercase delta is often used to denote a "change of any changeable quantity", which might have been a reason to include it in the character set.</p>
<p>Delta doesn't only appear in Wang's character set, but in many character sets before it. For example, the Array-oriented Programming Language (APL), which originated at IBM in the 1960s, includes delta ( Δ ), and inverted delta ( ∇ ) in its syntax. As a curious but unrelated coincidence, the IBM name for the inverted delta is DEL—the same as the control character DEL (Delete) at 0x7F.<sup><a href="#fn10" id="fnref10">[10]</a></sup></p>
<p>The APL symbols appeared on some early IBM APL keyboards, like in the 1971 <a href="https://geekhack.org/index.php?topic=104046.0">IBM 3270</a>. VileR also notes that IBM's first desktop machines from the mid 1970s, the <a href="https://voidstar.blog/the-ibm-5100-5110-mame-emulators-how-to/">5100/5110/5120</a>, were intended for APL from the get go, but there's no evidence that they ever influenced the development of IBM PC in any way, even if they are in the same model numbering system (IBM PC is 5150). It's also worth noting that IBM's APL character sets, like the <a href="https://web.archive.org/web/20130121103608/http://www-03.ibm.com/systems/resources/systems_i_software_globalization_pdf_cp00909z.pdf">Code Page 909</a>, sometimes include both delta <em>and</em> the house symbol. As such, it doesn't seem like there's a strong connection between the house and APL's delta.</p>
<h4 id="theory-8-it-is-delta">Theory #8: It IS delta?!</h4>
<p>Hold on... let's examine our basic assumptions. How can we be <em>absolutely certain</em> that IBM even intended for the glyph <span>⌂</span> at 0x7F to represent a house? What if the whole premise is wrong?</p>
<p>When I browsed through the original 1981 <a href="https://www.minuszerodegrees.net/manuals/IBM_5150_Technical_Reference_6025005_AUG81.pdf"><em>Technical Reference</em></a> manual for IBM PC, I realized that there's no mention of a "house" anywhere. In fact, the character explicitly listed at position 0x7F isn't a house at all—it's a delta ( Δ )!</p>
<figure>
    <img alt="0x7F is displayed as delta" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/yQrMFrOoOU-800.png" width="800" height="67">
    <figcaption>1981 IBM PC Technical Reference</figcaption>
</figure>
<p>Was it intended to be delta all along?</p>
<p>But of course it's not so simple. The 1982 edition of <a href="https://archive.org/details/IBMBASICAV1.10Manual/page/n483/mode/2up"><em>IBM BASIC Manual</em></a> displays the code point 0x7F quite unambiguously as a <strong>house</strong>!</p>
<figure>
    <img alt="IBM BASIC Manual displays 0x7F as house" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/WCK0PI0uHp-218.png" width="218" height="66">
    <figcaption>1982 IBM BASIC Manual</figcaption>
</figure>
<p>What is going on? Was the 1981 Technical Reference was printed in error, and corrected later? It doesn't seem like it: the 1984 revised edition of the <a href="https://archive.org/details/IBMPCIBM5150TechnicalReference6322507APR84/page/n246/mode/1up">IBM PC <em>Technical Reference</em></a> still display 0x7F as <strong>delta</strong>. There's no mistake, even the <strong>text label</strong> of 0x7F is "delta", as listed in the printed System BIOS character generator routines.</p>
<figure>
    <img alt="0x7F is displayed as delta" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/Jg6U9BLOAT-673.png" width="673" height="92">
    <figcaption>1984 IBM PC Technical Reference</figcaption>
</figure>
<p>Still, the original 1981 <a href="https://int10h.org/oldschool-pc-fonts/fontlist/font?ibm_bios">IBM PC System BIOS fonts</a> clearly renders it as a <strong>house</strong>: <span>⌂</span>. It seems very unlikely that anybody would actually associate the shape of it with the delta character—let alone use the house character <em>as</em> delta in any scientific syntax.</p>
<p>Maybe it's just some careless disparity between printed material and the actual font rendering? It isn't so either: 0x7F isn't consistently rendered as a house in every CP437 font, as can be seen from the following chart, which display the 0x7F character from various <a href="https://github.com/viler-int10h/vga-text-mode-fonts/releases/tag/2020-11-25">CP437-compatible VGA fonts</a>:</p>

<p>While most of the fonts render 0x7F as a house, some of them are quite undeniably deltas (listed near the bottom of the chart).</p>
<p>To make matters more confusing (or maybe in an attempt to prevent further confusion?), in 1984, IBM's own authoritative registry of glyph names (<a href="https://public.dhe.ibm.com/software/globalization/gcoc/attachments/CP00437.txt">GCGID</a>) officially names 0x7F in CP437 as <strong>"small house"</strong>. In fact, originally <em>the whole character set had no name</em>, until this registration. Code Page 437 was not born as a real code page at all—it was merely a bunch of graphical glyphs, stored in the Read-Only Memory (ROM) of the System BIOS, available for the computer to use immediately on booting. Because the characters were implemented in the hardware, the font, and its derivatives, were often just called "OEM fonts", where OEM stands for "Original Equipment Manufacturer". All "official" IBM names, for the character set and its glyphs, were given retroactively in 1984.</p>
<p>But even officially naming the Code Page 437 and its glyphs wasn't enough to correct their rendering. In 1986, the <a href="https://int10h.org/oldschool-pc-fonts/fontlist/font?ibm_conv"><em>IBM PC Convertible</em></a> system font renders 0x7F as <strong>delta</strong>, and the 1986 <a href="https://bitsavers.org/pdf/ibm/pc/at/6183355_PC_AT_Technical_Reference_Mar86.pdf">IBM PC/AT <em>Technical Reference</em></a> still lists and labels 0x7F as delta. Even in 1989, the Olivetti <a href="https://www.minuszerodegrees.net/manuals/Olivetti/Olivetti%20-%20MS-DOS%203.30%20-%20Software%20Installation%20Guide.pdf"><em>MS-DOS Software Installation Guide</em></a> renders the 0x7F as delta.</p>
<h4 id="theory-9-it-must-be-a-delta-because-even-the-greek-delta-looks-like-a-house">Theory #9: It MUST be a delta because even the GREEK delta looks like a house!</h4>
<p>As I was taking another look at VileR's oldschool PC fonts page on the original <a href="https://int10h.org/oldschool-pc-fonts/fontlist/font?ibm_bios">IBM BIOS font</a>, something caught my eye. Because the IBM PC was sold in many non-English speaking countries, the original character set had language specific variants. The Greek language IBM PC of course added support for additional greek characters—including the actual Greek uppercase delta. And—this came to me as a complete surprise—its glyph looks <em>even more</em> like a house, than the actual house character!</p>
<figure>
    <img alt="The greek delta is displayed as a house!" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/3x0gTnaSLk-1184.png" width="1184" height="544">
    <figcaption>The Greek variant of IBM PC's font (Code Page 737) renders the greek delta as a house!</figcaption>
</figure>
<p>If even the actual Greek uppercase delta is, quite unmistakenly, rendered as a house, then the theory that DEL is just a badly formed uppercase Greek delta character with the bottom corners cut off (due to a lack of horizontal pixels) starts to seem more and more convincing.</p>
<h4 id="delta-theory-doubt">Delta theory doubt</h4>
<p>There is just one thing I cant't quite comprehend. Let's assume for a second that DEL was supposed to be delta. Did IBM seriously <em>not</em> try different ways of drawing a delta, before settling on the house glyph? With a little bit of effort, it is completely possible to draw a convincing delta, even in 8×8 pixel space. Here's a chart to compare. The first three are IBM's renditions of the "delta", the rest are my own attempts I threw together in 10 minutes. I think that any of the versions I drew could have been more clearly understood as deltas. So, if IBM <em>did</em> go through some versions of the delta, they would have likely landed on the same, or very similar shapes to mine—yet they <em>still</em> chose the house-looking glyph to represent it. Why would they do that?</p>
<p>Click on the patterns to change the view. You can also edit/draw on the canvas, see if you can come up with something better:</p>

<h3 id="what-do-we-know">What DO we know?</h3>
<p>It seems the only thing we know for certain is that even IBM was confused, or just didn't care, whether 0x7F should be a delta, or a house. The fact is, that while the character at code point 0x7F in the 1981 IBM PC's System BIOS font might look like a house, we can't definitely claim that it was <em>intended</em> to look like a house. The <em>only</em> thing we can say for sure, is that 0x7F has been labeled as "delta" in the IBM PC's System BIOS since 1981, and that the IBM's official registry named it "small house" in 1984.</p>
<p>What does this tell us? The consistent <em>inconsistencies</em> in IBM's technical documentations, fonts, and registries, sounds like a classic case of miscommunication between the different departments of IBM. Did the font's designers intend 0x7F to be a house, but the engineers interpreted it as a delta, mislabeling it in the System BIOS? Or did the designers intend it to be delta, but the botched rendering made it look like a house, and publications like the <em>IBM BASIC Manual</em> perpetuated the wrong interpretation until IBM decided to make it official in the registry? Or what? There is no clear answer.</p>
<div>
<h5 id="sidenote">Sidenote</h5>
<p>The house symbol ( ⌂ ) was added to Unicode in <a href="https://www.unicode.org/versions/Unicode1.1.0/appI.pdf">version 1.1.0</a> in 1993. It was given the Unicode value <a href="https://graphemica.com/%E2%8C%82">U+2302</a>.</p>
</div>
<p>Whether IBM meant 0x7F to be a delta, or a house, remains a mystery. But it doesn't really matter. <em>What</em> the house character looks like, is, after all, just a matter of interpretation. The legacy of CP437 is not defined by IBM's intentions, but by all the different ways designers, programmers, ASCII artists and other users adopted it. It is delta <em>and</em> house, but <em>also</em> rocket, players ammo, gun, spike, energizer, or whatever else we want it to be. As IBM engineer Charles E. Mackenzie observes in <em>Coded Character Sets, History and Development</em>:</p>
<blockquote>
<p>"There is an aspect of human nature which surfaces in data processing. Experience has shown that if graphics are provided on a computing system, they will be used in one way or another by customers, even if they have no intrinsic meaning."<sup><a href="#fn11" id="fnref11">[11]</a></sup></p>
</blockquote>
<p>This is probably best exemplified by how the house character is used in PC ASCII art. In the hands of ASCII artists, the character goes <em>beyond</em> meaning and returns to pure form, demonstrating that there is no shape that has an "intrinsic" meaning, until we give them meaning.</p>
<p>To see how <span>⌂</span> was used in PC ASCII art, I wrote a script that scanned the <a href="https://16colo.rs/">16colo.rs</a> archive for any artwork containing 0x7F. Here are some of my favourites:</p>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/SvDOE2Nk7y-640.png" width="640" height="352">
    <figcaption>1997_clit-63.zip_dy1-pen.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/dhNbpa5Z6m-640.png" width="640" height="368">
    <figcaption>1997_labia314.zip_dy1-bed.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/NCQKct_K5z-640.png" width="640" height="368">
    <figcaption>1999_bj-creep.zip_bjasc147.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/-91OA6w5tc-640.png" width="640" height="464">
    <figcaption>1999_mimic11.zip_ess#0002.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/0bwGdF8TaT-640.png" width="640" height="432">
    <figcaption>1999_mimic15.zip_dy-blue.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/9wYWhNRG4j-640.png" width="640" height="976">
    <figcaption>1999_mimic16.zip_bjasc159.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/8kZO9PXsO5-640.png" width="640" height="560">
    <figcaption>1999_mimic17.zip_bjasc168.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/XtHGRIXvcg-640.png" width="640" height="400">
    <figcaption>1999_rmrs-29.zip_tum-egun.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/3dyyxCviuh-640.png" width="640" height="464">
    <figcaption>1999_rmrs-29.zip_tum-jule.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/SFNAJP7TZM-640.png" width="640" height="384">
    <figcaption>2000_mimic25.zip_us-bj189.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/B4eDwlQUgz-640.png" width="640" height="336">
    <figcaption>2000_mimic27.zip_dr-mmc27.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/H2dvsbMk3d-640.png" width="640" height="560">
    <figcaption>2000_mimic30.zip_tb-epic.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/n_2YzSt_gv-640.png" width="640" height="416">
    <figcaption>2000_mimic30.zip_us-tw.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/RqS99D4ZR0-640.png" width="640" height="1184">
    <figcaption>2001_bommc01.zip_mmc10-12.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/9Bpo8RXOSm-640.png" width="640" height="384">
    <figcaption>2001_mimic33.zip_ko-cats.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/5gkIL2ajV--640.png" width="640" height="384">
    <figcaption>2001_mimic34.zip_h4-soap.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/BRK8idGZLx-640.png" width="640" height="384">
    <figcaption>2002_mimic44.zip_h4-tune.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/CTVHQJ086u-640.png" width="640" height="624">
    <figcaption>2003_buzina6.zip_crs-hmes.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/k4BtR32V6I-640.png" width="640" height="672">
    <figcaption>2003_galza-18.zip_shd-sx09.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/yDDh8oNUd6-640.png" width="640" height="384">
    <figcaption>2003_mimic57.zip_ko-taima.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/12Nv_Ymr4R-640.png" width="640" height="448">
    <figcaption>2003_mimic61.zip_us-m.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/H0Cj4pM1nR-640.png" width="640" height="496">
    <figcaption>2003_mimic66.zip_jf-fukk.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/FiXixDOiiT-640.png" width="640" height="368">
    <figcaption>2003_mimic66.zip_jf-inn2.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/F8dAk4q-3M-640.png" width="640" height="400">
    <figcaption>2004_mimic69.zip_us-nons.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/G2pfyFY8rk-640.png" width="640" height="672">
    <figcaption>2004_mimic73.zip_drj-mmc.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/Mi4fZ8WGUi-640.png" width="640" height="768">
    <figcaption>2004_mimic77.zip_je-eul.ans</figcaption>
</figure>
<hr>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://blog.glyphdrawing.club/assets/N3857PVjXi-640.png" width="640" height="960">
    <figcaption>2018_impure69.zip_arl-radio_final.ans</figcaption>
</figure><hr>
<section>
<ol>
<li id="fn1"><p>Reimer, Jeremy (2005): <a href="http://arstechnica.com/old/content/2005/12/total-share.ars/">Total Share: 30 Years of Computer Market Share Figures</a>, <em>Ars Technica</em>. 20.3.2025 <a href="#fnref1">↩︎</a></p>
</li>
<li id="fn2"><p>Edwards, Benj (2015): <a href="https://www.vintagecomputing.com/index.php/archives/790/the-ibm-smiley-character-turns-30#more-790">Origins of the ASCII Smiley Character: An Email Exchange With Dr. David Bradley (2011)</a>, <em><a href="http://vintagecomputing.com/">vintagecomputing.com</a></em>. 19.3.2025 <a href="#fnref2">↩︎</a></p>
</li>
<li id="fn3"><p>Reunanen, Markku; Heikkinen, Tero; Carlsson, Anders (2019): <a href="https://acris.aalto.fi/ws/portalfiles/portal/39040680/PETSCII_A_Character_Set_and_a_Creative_Platform.pdf"><em>PETSCII – A Character Set and a Creative Platform</em></a> <a href="#fnref3">↩︎</a></p>
</li>
<li id="fn4"><p>R.W. Bemer (1978): Inside ASCII, part 3 of 3 parts. Included in the "Source documents on the history of character codes, 1977-1981", compiled by Eric Fischer, <a href="https://archive.org/details/enf-ascii-1977-1981/page/n40/mode/1up">on Internet Archive</a> <a href="#fnref4">↩︎</a></p>
</li>
<li id="fn5"><p>Edwards, Benj (2015): <a href="https://www.vintagecomputing.com/index.php/archives/790/the-ibm-smiley-character-turns-30#more-790">Origins of the ASCII Smiley Character: An Email Exchange With Dr. David Bradley (2011)</a>, <em><a href="http://vintagecomputing.com/">vintagecomputing.com</a></em>. 19.3.2025 <a href="#fnref5">↩︎</a></p>
</li>
<li id="fn6"><p>Necasek, Michal (2021): <a href="https://www.os2museum.com/wp/weird-tales/">Weird Tales</a>, <em>OS/2 Museum</em>. 19.3.2025 <a href="#fnref6">↩︎</a></p>
</li>
<li id="fn7"><p>Dreyfuss, Henry (1972): <a href="https://archive.org/details/symbolsourcebook0000henr/page/n9/mode/2up"><em>Symbol sourcebook : an authoritative guide to international graphic symbols</em></a> <a href="#fnref7">↩︎</a></p>
</li>
<li id="fn8"><p>Radiolab (2012): <a href="https://radiolab.org/podcast/257194-man-became-bliss">Mr.Bliss</a> <a href="#fnref8">↩︎</a></p>
</li>
<li id="fn9"><p>Blissymbolics Communication Institute (1980): <a href="https://archive.org/details/OTUED_8-2-3-3/page/21/mode/1up"><em>Teaching and Using Blissymbolics</em></a> <a href="#fnref9">↩︎</a></p>
</li>
<li id="fn10"><p>Wikipedia article <a href="https://en.wikipedia.org/wiki/Digital_encoding_of_APL_symbols#Character_repertoire">Digital encoding of APL symbols</a> 3.4.2025 <a href="#fnref10">↩︎</a></p>
</li>
<li id="fn11"><p>Mackenzie, Charles E. (1980): <a href="https://archive.org/details/mackenzie-coded-char-sets/page/99/mode/1up"><em>Coded Character Sets, History and Development</em></a> <a href="#fnref11">↩︎</a></p>
</li>
</ol>
</section>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Nice Things with SVG (378 pts)]]></title>
            <link>https://fuma-nama.vercel.app/blog/svg-art</link>
            <guid>43666439</guid>
            <pubDate>Sat, 12 Apr 2025 17:40:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://fuma-nama.vercel.app/blog/svg-art">https://fuma-nama.vercel.app/blog/svg-art</a>, See on <a href="https://news.ycombinator.com/item?id=43666439">Hacker News</a></p>
<div id="readability-page-1" class="page"><article><a href="#svg"></a>
<p>More about SVG.
Note that the example code is written in JSX (or React), not ordinary HTML.</p>
<a href="#animated-wires"><h3 id="animated-wires"><span>#</span>Animated Wires</h3></a>
<p>Make the line, using <code>line</code> or <code>path</code>.</p>
<svg viewBox="0 0 50 50"><g><line x1="0" y1="0" x2="0" y2="50" stroke="white" stroke-width="1"></line></g></svg>
<pre tabindex="0"><code><span><span>&lt;</span><span>svg</span><span> viewBox</span><span>=</span><span>"0 0 50 50"</span><span> className</span><span>=</span><span>"bg-neutral-900 max-w-[100px] mx-auto"</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>g</span><span>&gt;</span></span>
<span><span>    &lt;</span><span>line</span><span> x1</span><span>=</span><span>"0"</span><span> y1</span><span>=</span><span>"0"</span><span> x2</span><span>=</span><span>"0"</span><span> y2</span><span>=</span><span>"50"</span><span> stroke</span><span>=</span><span>"white"</span><span> strokeWidth</span><span>=</span><span>"1"</span><span> /&gt;</span></span>
<span><span>  &lt;/</span><span>g</span><span>&gt;</span></span>
<span><span>&lt;/</span><span>svg</span><span>&gt;</span></span>
<span></span></code></pre>
<p>Make it a mask.</p>
<svg viewBox="0 0 50 50"><g><rect x="0" y="0" width="50" height="10" fill="red" mask="url(#line)"></rect><mask id="line"><line id="" x1="0" y1="0" x2="0" y2="50" stroke="white" stroke-width="1"></line></mask></g></svg>
<pre tabindex="0"><code><span><span>&lt;</span><span>svg</span><span> viewBox</span><span>=</span><span>"0 0 50 50"</span><span> className</span><span>=</span><span>"bg-neutral-900 max-w-[100px] mx-auto"</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>g</span><span>&gt;</span></span>
<span><span>    &lt;</span><span>rect</span><span> x</span><span>=</span><span>"0"</span><span> y</span><span>=</span><span>"0"</span><span> width</span><span>=</span><span>"50"</span><span> height</span><span>=</span><span>"10"</span><span> fill</span><span>=</span><span>"red"</span><span> mask</span><span>=</span><span>"url(#line)"</span><span> /&gt;</span></span>
<span><span>    &lt;</span><span>mask</span><span> id</span><span>=</span><span>"line"</span><span>&gt;</span></span>
<span><span>      &lt;</span><span>line</span><span> id</span><span>=</span><span>""</span><span> x1</span><span>=</span><span>"0"</span><span> y1</span><span>=</span><span>"0"</span><span> x2</span><span>=</span><span>"0"</span><span> y2</span><span>=</span><span>"50"</span><span> stroke</span><span>=</span><span>"white"</span><span> strokeWidth</span><span>=</span><span>"1"</span><span> /&gt;</span></span>
<span><span>    &lt;/</span><span>mask</span><span>&gt;</span></span>
<span><span>  &lt;/</span><span>g</span><span>&gt;</span></span>
<span><span>&lt;/</span><span>svg</span><span>&gt;</span></span>
<span></span></code></pre>
<p>Add animation.</p>
<svg viewBox="0 0 50 50"><g><rect x="0" y="0" width="50" height="10" fill="red" mask="url(#animated_line)" style="animation:to-down linear infinite 2s"></rect><mask id="animated_line"><line x1="0" y1="0" x2="0" y2="50" stroke="white" stroke-width="1"></line></mask></g></svg>

<pre tabindex="0"><code><span><span>&lt;</span><span>svg</span><span> viewBox</span><span>=</span><span>"0 0 50 50"</span><span> className</span><span>=</span><span>"bg-neutral-900 max-w-[100px] mx-auto"</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>g</span><span>&gt;</span></span>
<span><span>    &lt;</span><span>rect</span></span>
<span><span>      x</span><span>=</span><span>"0"</span></span>
<span><span>      y</span><span>=</span><span>"0"</span></span>
<span><span>      width</span><span>=</span><span>"50"</span></span>
<span><span>      height</span><span>=</span><span>"10"</span></span>
<span><span>      fill</span><span>=</span><span>"red"</span></span>
<span><span>      mask</span><span>=</span><span>"url(#animated_line)"</span></span>
<span><span>      style</span><span>=</span><span>{{</span></span>
<span><span>        animation: </span><span>"to-down linear infinite 2s"</span><span>,</span></span>
<span><span>      }}</span></span>
<span><span>    /&gt;</span></span>
<span><span>    &lt;</span><span>mask</span><span> id</span><span>=</span><span>"animated_line"</span><span>&gt;</span></span>
<span><span>      &lt;</span><span>line</span><span> x1</span><span>=</span><span>"0"</span><span> y1</span><span>=</span><span>"0"</span><span> x2</span><span>=</span><span>"0"</span><span> y2</span><span>=</span><span>"50"</span><span> stroke</span><span>=</span><span>"white"</span><span> strokeWidth</span><span>=</span><span>"1"</span><span> /&gt;</span></span>
<span><span>    &lt;/</span><span>mask</span><span>&gt;</span></span>
<span><span>  &lt;/</span><span>g</span><span>&gt;</span></span>
<span><span>&lt;/</span><span>svg</span><span>&gt;</span></span>
<span></span></code></pre>
<pre tabindex="0"><code><span><span>@keyframes</span><span> to-down</span><span> {</span></span>
<span><span>  0%</span><span> {</span></span>
<span><span>    transform</span><span>: </span><span>translateY</span><span>(</span><span>-10</span><span>px</span><span>);</span></span>
<span><span>  }</span></span>
<span></span>
<span><span>  100%</span><span> {</span></span>
<span><span>    transform</span><span>: </span><span>translateY</span><span>(</span><span>50</span><span>px</span><span>);</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>Make styles.</p>
<svg viewBox="0 0 50 50"><g><line x1="0" y1="0" x2="0" y2="50" stroke="rgb(50,50,50)" stroke-width="2"></line><rect x="0" y="0" width="100%" height="20" fill="url(#line_color)" mask="url(#animated_line_fancy)" style="--height:20px;animation:to-down-2 linear infinite 3s"></rect><defs><linearGradient id="line_color" x1="0" x2="0" y1="0" y2="1"><stop offset="0%" stop-color="rgba(255,0,255,0.1)"></stop><stop offset="100%" stop-color="rgb(255,100,255)"></stop></linearGradient></defs><mask id="animated_line_fancy"><line x1="0" y1="0" x2="0" y2="50" stroke="white" stroke-width="2"></line></mask></g></svg>

<pre tabindex="0"><code><span><span>&lt;</span><span>svg</span><span> viewBox</span><span>=</span><span>"0 0 50 50"</span><span> className</span><span>=</span><span>"bg-neutral-900 max-w-[100px] mx-auto"</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>g</span><span>&gt;</span></span>
<span><span>    &lt;</span><span>line</span><span> x1</span><span>=</span><span>"0"</span><span> y1</span><span>=</span><span>"0"</span><span> x2</span><span>=</span><span>"0"</span><span> y2</span><span>=</span><span>"50"</span><span> stroke</span><span>=</span><span>"rgb(50,50,50)"</span><span> strokeWidth</span><span>=</span><span>"2"</span><span> /&gt;</span></span>
<span><span>    &lt;</span><span>rect</span></span>
<span><span>      x</span><span>=</span><span>"0"</span></span>
<span><span>      y</span><span>=</span><span>"0"</span></span>
<span><span>      width</span><span>=</span><span>"100%"</span></span>
<span><span>      height</span><span>=</span><span>"20"</span></span>
<span><span>      fill</span><span>=</span><span>"url(#line_color)"</span></span>
<span><span>      mask</span><span>=</span><span>"url(#animated_line_fancy)"</span></span>
<span><span>      style</span><span>=</span><span>{{</span></span>
<span><span>        "--height"</span><span>: </span><span>"20px"</span><span>,</span></span>
<span><span>        animation: </span><span>"to-down-2 linear infinite 3s"</span><span>,</span></span>
<span><span>      }}</span></span>
<span><span>    /&gt;</span></span>
<span><span>    &lt;</span><span>defs</span><span>&gt;</span></span>
<span><span>      &lt;</span><span>linearGradient</span><span> id</span><span>=</span><span>"line_color"</span><span> x1</span><span>=</span><span>"0"</span><span> x2</span><span>=</span><span>"0"</span><span> y1</span><span>=</span><span>"0"</span><span> y2</span><span>=</span><span>"1"</span><span>&gt;</span></span>
<span><span>        &lt;</span><span>stop</span><span> offset</span><span>=</span><span>"0%"</span><span> stopColor</span><span>=</span><span>"rgba(255,0,255,0.1)"</span><span> /&gt;</span></span>
<span><span>        &lt;</span><span>stop</span><span> offset</span><span>=</span><span>"100%"</span><span> stopColor</span><span>=</span><span>"rgb(255,100,255)"</span><span> /&gt;</span></span>
<span><span>      &lt;/</span><span>linearGradient</span><span>&gt;</span></span>
<span><span>    &lt;/</span><span>defs</span><span>&gt;</span></span>
<span><span>    &lt;</span><span>mask</span><span> id</span><span>=</span><span>"animated_line_fancy"</span><span>&gt;</span></span>
<span><span>      &lt;</span><span>line</span><span> x1</span><span>=</span><span>"0"</span><span> y1</span><span>=</span><span>"0"</span><span> x2</span><span>=</span><span>"0"</span><span> y2</span><span>=</span><span>"50"</span><span> stroke</span><span>=</span><span>"white"</span><span> strokeWidth</span><span>=</span><span>"2"</span><span> /&gt;</span></span>
<span><span>    &lt;/</span><span>mask</span><span>&gt;</span></span>
<span><span>  &lt;/</span><span>g</span><span>&gt;</span></span>
<span><span>&lt;/</span><span>svg</span><span>&gt;</span></span>
<span></span></code></pre>
<pre tabindex="0"><code><span><span>@keyframes</span><span> to-down-2</span><span> {</span></span>
<span><span>  0%</span><span> {</span></span>
<span><span>    transform</span><span>: </span><span>translateY</span><span>(</span><span>calc</span><span>(</span><span>var</span><span>(</span><span>--height</span><span>) </span><span>*</span><span> -1</span><span>));</span></span>
<span><span>  }</span></span>
<span></span>
<span><span>  100%</span><span> {</span></span>
<span><span>    transform</span><span>: </span><span>translateY</span><span>(</span><span>100</span><span>%</span><span>);</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>Most of these similar things are using the same technique.
Mask out an animated block, putting some animations and probably designed some parts in Figma or other SVG editors.</p>
<p><a href="https://unkey.dev/" target="_blank" rel="noreferrer noopener">Unkey</a>'s landing page is a nice example.</p>
<a href="#clerk-toc"><h3 id="clerk-toc"><span>#</span>Clerk TOC</h3></a>
<p>I made a clerk-like style Table Of Contents (TOC) on <a href="https://fumadocs.vercel.app/" target="_blank" rel="noreferrer noopener">Fumadocs</a>, you can try it out and play with the nice TOC.</p>
<div><p><img src="https://fuma-nama.vercel.app/blog/fumadocs-toc.png" alt="preview"></p></div>
<p>To implement it, we have to render the TOC outline on server, without client-side JavaScript to make it compatible with SSR.</p>
<p>Since we're on server, we don't know the exact positions of elements.
My approach is to use <code>absolute</code> positions, render the outline as different "components", and snitch them together.</p>
<p><img src="https://fuma-nama.vercel.app/blog/toc.png" alt="toc"></p>
<p>This isn't hard, but we also want to render a highlighted part of outline where the items are active, or their corresponding heading is visible in the viewport.</p>
<p>Like:</p>
<p><img src="https://fuma-nama.vercel.app/blog/clerk-toc-highlight.png" alt="example"></p>
<p>I'll call it the <strong>thumb</strong>. It has to be animated, so we can't just change the color of these outline components.</p>
<p><img src="https://fuma-nama.vercel.app/blog/toc-2.png" alt="toc"></p>
<p>We cannot animate the thumb with simple CSS solutions, lucky we have the exact rendered positions of TOC items, since the thumb is meant to be interactive, it is <strong>rendered on client!</strong></p>
<p>Using the information from our browser, we can construct a "mask map" on client, look like this:</p>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 236"><path d="M1 0 L1 20 L13 36 L13 56 L1 72 L1 92 L13 108 L13 128 L1 144 L1 164 L1 180 L1 200 L13 216 L13 236" stroke="white" stroke-width="1" fill="none"></path></svg>
<p>The method to construct this map is <strong>SVG</strong> - yes, our old friend.</p>
<pre tabindex="0"><code><span><span>&lt;</span><span>svg</span><span> xmlns</span><span>=</span><span>"http://www.w3.org/2000/svg"</span><span> viewBox</span><span>=</span><span>"0 0 14 236"</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>path</span></span>
<span><span>    d</span><span>=</span><span>"M1 0 L1 20 L13 36 L13 56 L1 72 L1 92 L13 108 L13 128 L1 144 L1 164 L1 180 L1 200 L13 216 L13 236"</span></span>
<span><span>    stroke</span><span>=</span><span>"white"</span></span>
<span><span>    strokeWidth</span><span>=</span><span>"1"</span></span>
<span><span>    fill</span><span>=</span><span>"none"</span></span>
<span><span>  /&gt;</span></span>
<span><span>&lt;/</span><span>svg</span><span>&gt;</span></span>
<span></span></code></pre>
<p>The <code>d</code> property of SVG <code>&lt;path /&gt;</code> isn't a nonsense auto-generated string, it's a list of commands.
See the <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths" target="_blank" rel="noreferrer noopener">Web Docs</a> for more details, it's quite a powerful tool.</p>
<p>With our new tool, we can tell SVG to render a line connecting each point of the outline.</p>
<p><img src="https://fuma-nama.vercel.app/blog/toc-3.png" alt="toc"></p>
<p>This constructed a SVG that's <em>identical</em> to our original TOC outline pre-rendered on server.</p>
<p>Similar to the technique we've learnt from Animated Wires, we can use the CSS <code>mask-image</code> property to mask an animated <code>div</code> block to render the thumb - a highlighted part of outline.</p>
<pre tabindex="0"><code><span><span>&lt;</span><span>div</span></span>
<span><span>  style</span><span>=</span><span>{{</span></span>
<span><span>    maskImage: </span><span>`url("data:image/svg+xml,${</span></span>
<span><span>      // URI encoded SVG image</span></span>
<span><span>      encodeURIComponent</span><span>(</span></span>
<span><span>        `&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 236"&gt;...&lt;/svg&gt;`</span></span>
<span><span>      )</span></span>
<span><span>    })`</span><span>,</span></span>
<span><span>  }}</span></span>
<span><span>&gt;</span></span>
<span><span>  &lt;</span><span>div</span></span>
<span><span>    style</span><span>=</span><span>{{</span></span>
<span><span>      width: </span><span>1</span><span>,</span></span>
<span><span>      height: thumb.height,</span></span>
<span><span>      transform: </span><span>`translateY(${</span><span>thumb</span><span>.</span><span>top</span><span>}px)`</span><span>,</span></span>
<span><span>      transition: </span><span>"all 500ms"</span><span>,</span></span>
<span><span>      backgroundColor: </span><span>"white"</span><span>,</span></span>
<span><span>    }}</span></span>
<span><span>  /&gt;</span></span>
<span><span>&lt;/</span><span>div</span><span>&gt;</span></span>
<span></span></code></pre>
<p>Check the <a href="https://github.com/fuma-nama/fumadocs/blob/755554d6acbb22efcdedf31d40b1a83f54e2cf1a/packages/ui/src/components/layout/toc-clerk.tsx" target="_blank" rel="noreferrer noopener">source code</a> to see my implementation in React.js.</p>
<p>Huge thanks to Clerk for inspiring me on this, I've never thought the TOC of a documentation site can be that interesting to play with.</p></article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Paris said au revoir to cars. Air pollution maps reveal a dramatic change (479 pts)]]></title>
            <link>https://www.washingtonpost.com/climate-solutions/2025/04/12/air-pollution-paris-health-cars/</link>
            <guid>43665793</guid>
            <pubDate>Sat, 12 Apr 2025 16:26:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.washingtonpost.com/climate-solutions/2025/04/12/air-pollution-paris-health-cars/">https://www.washingtonpost.com/climate-solutions/2025/04/12/air-pollution-paris-health-cars/</a>, See on <a href="https://news.ycombinator.com/item?id=43665793">Hacker News</a></p>
Couldn't get https://www.washingtonpost.com/climate-solutions/2025/04/12/air-pollution-paris-health-cars/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[ArkType: Ergonomic TS validator 100x faster than Zod (138 pts)]]></title>
            <link>https://arktype.io/</link>
            <guid>43665540</guid>
            <pubDate>Sat, 12 Apr 2025 16:01:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arktype.io/">https://arktype.io/</a>, See on <a href="https://news.ycombinator.com/item?id=43665540">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div data-card="true"><h3>Unparalleled DX</h3><div><p>Type syntax you already know with safety and completions unlike anything you've ever seen</p><figure></figure></div></div><div data-card="true"><h3>Better Errors</h3><div><p>Deeply customizable messages with great defaults</p><figure></figure></div></div><div data-card="true"><h3>Clarity and Concision</h3><div><p>Definitions are half as long, type errors are twice as readable, and hovers tell you just what really matters</p><figure></figure></div></div><div data-card="true"><h3>Faster... everything</h3><div><p>100x faster than Zod and 2,000x faster than Yup at runtime, with editor performance that will remind you how autocomplete is supposed to feel</p><div><div><h6>Object Validation, Node v23.6.1</h6> <p><a target="_blank" href="https://moltar.github.io/typescript-runtime-type-benchmarks/">(source)</a></p></div><div><p>&nbsp;&nbsp;&nbsp;Zod 👍 1397 nanoseconds</p><p>&nbsp;&nbsp;&nbsp;Yup 🐌 40755 nanoseconds*</p><p>*scaling generously logarithmized</p></div></div></div></div><div data-card="true"><h3>Deep Introspectability</h3><div><p>ArkType uses set theory to understand and expose the relationships between your types at runtime the way TypeScript does at compile time</p><figure></figure></div></div><div data-card="true"><h3>Intrinsic Optimization</h3><div><p>Every schema is internally normalized and reduced to its purest and fastest representation</p><figure></figure></div></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Tunarr: Create and configure live TV channels from media on your servers (168 pts)]]></title>
            <link>https://tunarr.com/</link>
            <guid>43665201</guid>
            <pubDate>Sat, 12 Apr 2025 15:26:25 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tunarr.com/">https://tunarr.com/</a>, See on <a href="https://news.ycombinator.com/item?id=43665201">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-md-component="container">
      
      
        
          
        
      
      <main data-md-component="main">
        <div data-md-component="content">
              <article>
                
                  


  
  



<p>Create live TV channels from media on your Plex/Jellyfin servers, and more!</p>
<p>Configure your channels, programs, commercials, and settings using the Tunarr web UI.</p>
<p>Watch your channels by adding the spoofed Tunarr HDHomerun tuner to Plex, Jellyfin, or Emby. Or utilize generated M3U files with any 3rd party IPTV player app.</p>
<h2 id="what-is-this">What is this?<a href="#what-is-this" title="Permanent link">¶</a></h2>
<p>Tunarr was originally a fork of <a href="https://github.com/vexorian/dizquetv"><strong>dizqueTV</strong></a> (which in itself was a fork of other projects!) which evolved into a near-complete rewrite. This project was born out of both a love for TV and an appreciation for the work put into dizqueTV and its predecessors.</p>
<p>Tunarr has the following goals:</p>
<ul>
<li>Modernize the stack, both backend and frontend</li>
<li>Provide an <a href="https://tunarr.com/getting-started/setup/#migrating-from-dizquetv">migration path</a> for existing users</li>
<li>Stabilize the program, fix bugs, and improve performance (Tunarr currently is developed and tested on Node 20.11.1, which offers <a href="https://blog.rafaelgss.dev/state-of-nodejs-performance-2023">non-trivial performance improvements</a> over previous versions)</li>
<li>Modernize and "prettify" the Web UI</li>
<li>And of course, <strong>Add a ton great new features!</strong></li>
</ul>












                
              </article>
            </div>
        
      </main>
      
        
      
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs Lisp Elements (236 pts)]]></title>
            <link>https://protesilaos.com/emacs/emacs-lisp-elements</link>
            <guid>43665046</guid>
            <pubDate>Sat, 12 Apr 2025 15:09:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://protesilaos.com/emacs/emacs-lisp-elements">https://protesilaos.com/emacs/emacs-lisp-elements</a>, See on <a href="https://news.ycombinator.com/item?id=43665046">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content" aria-label="Content">

        

        

        

        <article>

	

	<div>
		<p>
This book, written by Protesilaos Stavrou, also known as “Prot”, provides a big picture view of the Emacs Lisp programming language.
</p>

<p>
The information furnished herein corresponds to stable version 1.0.0, released on 2025-04-12.
</p>

<ul>
<li>Official page: <a href="https://protesilaos.com/emacs/emacs-lisp-elements">https://protesilaos.com/emacs/emacs-lisp-elements</a></li>
<li>Git repository: <a href="https://github.com/protesilaos/emacs-lisp-elements">https://github.com/protesilaos/emacs-lisp-elements</a></li>
</ul>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#h:getting-started-with-emacs-lisp">1. Getting started with Emacs Lisp</a></li>
<li><a href="#h:evaluate-emacs-lisp">2. Evaluate Emacs Lisp</a></li>
<li><a href="#h:side-effect-and-return-value">3. Side effect and return value</a></li>
<li><a href="#h:buffers-as-data-structures">4. Buffers as data structures</a></li>
<li><a href="#h:text-has-its-own-properties">5. Text has its own properties</a></li>
<li><a href="#h:symbols-balanced-expressions-and-quoting">6. Symbols, balanced expressions, and quoting</a></li>
<li><a href="#h:partial-evaluation-inside-of-a-list">7. Partial evaluation inside of a list</a></li>
<li><a href="#h:evaluation-inside-of-a-macro-or-special-form">8. Evaluation inside of a macro or special form</a></li>
<li><a href="#h:mapping-through-a-list-of-elements">9. Mapping through a list of elements</a></li>
<li><a href="#h:the-match-data-of-the-last-search">10. The match data of the last search</a></li>
<li><a href="#h:switching-to-another-buffer-window-or-narrowed-state">11. Switching to another buffer, window, or narrowed state</a></li>
<li><a href="#h:basic-control-flow-with-if-cond-and-others">12. Basic control flow with <code>if</code>, <code>cond</code>, and others</a></li>
<li><a href="#h:control-flow-with-if-let-and-friends">13. Control flow with <code>if-let*</code> and friends</a></li>
<li><a href="#h:pattern-match-with-pcase-and-related">14. Pattern match with <code>pcase</code> and related</a></li>
<li><a href="#h:run-some-code-or-fall-back-to-some-other-code">15. Run some code or fall back to some other code</a></li>
<li><a href="#h:when-to-use-a-named-function-or-a-lambda-function">16. When to use a named function or a lambda function</a></li>
<li><a href="#h:make-your-interactive-function-also-work-from-lisp-calls">17. Make your interactive function also work from Lisp calls</a></li>
<li><a href="#h:copying">18. COPYING</a></li>
<li><a href="#h:gnu-free-documentation-license">19. GNU Free Documentation License</a></li>
<li><a href="#h:indices">20. Indices</a>
<ul>
<li><a href="#h:function-index">20.1. Function index</a></li>
<li><a href="#h:variable-index">20.2. Variable index</a></li>
<li><a href="#h:concept-index">20.3. Concept index</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-h:getting-started-with-emacs-lisp">
<h2 id="h:getting-started-with-emacs-lisp"><span>1.</span> Getting started with Emacs Lisp</h2>
<div id="text-h:getting-started-with-emacs-lisp">
<p>
The purpose of this book is to provide you with a big picture view of Emacs Lisp, also known as “Elisp”. This is the programming language you use to extend Emacs. Emacs is a programmable text editor: it interprets Emacs Lisp and behaves accordingly. You can use Emacs without ever writing a single line of code: it already has lots of features. Though you can, at any time, program it to do exactly what you want by evaluating some Elisp that either you wrote yourself or got from another person, such as in the form of a package.
</p>

<p>
Programming your own text editor is both useful and fun. You can, for example, streamline a sequence of actions you keep doing by combining them in a single command that you then assign to a key binding: type the key and—bam!—perform all the intermediate tasks in one go. This makes you more efficient while it turns the editor into a comfortable working environment.
</p>

<p>
The fun part is how you go about writing the code. There are no duties you have to conform with. None! You program for the sake of programming. It is a recreational activity that expands your horizons. Plus, you cultivate your Elisp skills, which can prove helpful in the future, should you choose to modify some behaviour of Emacs.
</p>

<p>
Tinkering with Emacs is part of the experience. It teaches you to be unapologetically opinionated about how your editor works. The key is to know enough Elisp so that you do not spend too much time having fun or getting frustrated because something trivial does not work. I am writing this as a tinkerer myself with no background in computer science or neighbouring studies: I learnt Emacs Lisp through trial and error by playing around with the editor. My nominal goal was to improve certain micro-motions I was repeating over and over: I sought efficiency only to discover something much more profound. Learning to extend my editor has been a fulfilling experience and I am more productive as a result. Emacs does what I want it to do and I am happy with it.
</p>

<p>
Each chapter herein is generally short and to-the-point. Some are more friendly to beginners while others dive deeper into advanced topics. There are links between the chapters, exactly how a reference manual is supposed to be done. You may then go back and forth to find what you need.
</p>

<p>
The text you will find here is a combination of prose and code. The latter may be actual Elisp or pseudo-code which captures the underlying pattern. I encourage you to read this book either inside of Emacs or with Emacs readily available. This way, you can play around with the functions I give you, to further appreciate their nuances.
</p>

<p>
The “big picture view” approach I am adopting is about covering the concepts that I encounter frequently while working with Emacs Lisp. This book is no substitute for the Emacs Lisp Reference Manual and should by no means be treated as the source of truth for any of the Elisp forms I comment on.
</p>

<p>
Good luck and enjoy!
</p>
</div>
</div>
<div id="outline-container-h:evaluate-emacs-lisp">
<h2 id="h:evaluate-emacs-lisp"><span>2.</span> Evaluate Emacs Lisp</h2>
<div id="text-h:evaluate-emacs-lisp">
<p>
Everything you do in Emacs calls some function. It evaluates Emacs Lisp code, reading the return values and producing side effects (<a href="#h:side-effect-and-return-value">Side effect and return value</a>).
</p>

<p>
You type a key on your keyboard and a character is written to the current buffer. That is a function bound to a key. It actually is an <i>interactive</i> function, because you are calling it via a key binding rather than through some program. Interactive functions are known as “commands”. Though do not let the implementation detail of interactivity distract you from the fact that every single action you perform in Emacs involves the evaluation of Emacs Lisp.
</p>

<p>
Another common pattern of interaction is with the M-x (<code>execute-extended-command</code>) key, which by default runs the command <code>execute-extended-command</code>: it produces a minibuffer prompt that asks you to select a command by its name and proceeds to execute it.
</p>

<p>
Emacs can evaluate Elisp code from anywhere. If you have some Elisp in your buffer, you can place the cursor at the end of its closing parenthesis and type C-x C-e (<code>eval-last-sexp</code>). Similarly, you can use the commands <code>eval-buffer</code> and <code>eval-region</code> to operate on the current buffer or highlighted region, respectively.
</p>

<p>
The <code>eval-last-sexp</code> also works on symbols (<a href="#h:symbols-balanced-expressions-and-quoting">Symbols, balanced expressions, and quoting</a>). For example, if you place the cursor at the end of the variable <code>buffer-file-name</code> and use C-x C-e (<code>eval-last-sexp</code>), you will get the value of that variable, which is either <code>nil</code> or the file system path to the file you are editing.
</p>

<p>
Sometimes the above are not appropriate for what you are trying to do. Suppose you intend to write a command that copies the file path of the current buffer. To do that, you need your code to test the value of the variable <code>buffer-file-name</code> (<a href="#h:buffers-as-data-structures">Buffers as data structures</a>). But you do not want to type out <code>buffer-file-name</code> in your actual file, then use one of the aforementioned commands for Elisp evaluation, and then undo your edits. That is cumbersome and prone to mistakes! The best way to run Elisp in the current buffer is to type M-: (<code>eval-expression</code>): it opens the minibuffer and expects you to write the code you want to evaluate. Type RET from there to proceed. The evaluation is done with the last buffer as current (the buffer that was current prior to calling <code>eval-expression</code>).
</p>

<p>
Here is some Emacs Lisp you may want to try in (i) a buffer that corresponds to a file versus (ii) a buffer that is not associated with any file on disk.
</p>

<div>
<pre>;; Use `eval-expression' to evaluate this code in a file-visiting
;; buffer versus a buffer that does not visit any file.
(if buffer-file-name
    (message "The path to this file is `%s'" buffer-file-name)
  (message "Sorry mate, this buffer is not visiting a file"))
</pre>
</div>

<p>
When you are experimenting with code, you want to test how it behaves. Use the command <code>ielm</code> to open an interactive shell. It puts you at a prompt where you can type any Elisp and hit RET to evaluate it. The return value is printed right below. Alternatively, switch to the <code>*scratch*</code> buffer. If it is using the major mode <code>lisp-interaction-mode</code>, which is the default value of the variable <code>initial-major-mode</code>, then you can move around freely in that buffer and type C-j (<code>eval-print-last-sexp</code>) at the end of some code to evaluate it. This works almost the same way as <code>eval-last-sexp</code>, with the added effect of putting the return value right below the expression you just evaluated.
</p>

<p>
In addition to these, you can rely on the self-documenting nature of Emacs to figure out what the current state is. For example, to learn about the buffer-local value of the variable <code>major-mode</code>, you can do C-h v (<code>describe-variable</code>), and then search for that variable. The resulting Help buffer will inform you about the current value of <code>major-mode</code>. This help command and many others like <code>describe-function</code>, <code>describe-keymap</code>, <code>describe-key</code>, and <code>describe-symbol</code>, provide insight into what Emacs knows about a given object. The Help buffer will show relevant information, such as the path to the file that defines the given function or whether a variable is declared as buffer-local.
</p>

<p>
Emacs is “self-documenting” because it reports on its state. You do not need to explicitly update the Help buffers. This happens automatically by virtue of evaluating the relevant code: Emacs effectively shows you the latest value of whatever it is you are working with.
</p>
</div>
</div>
<div id="outline-container-h:side-effect-and-return-value">
<h2 id="h:side-effect-and-return-value"><span>3.</span> Side effect and return value</h2>
<div id="text-h:side-effect-and-return-value">
<p>
Emacs Lisp has functions. They take inputs and produce outputs. In its purest form, a function is a computation that only returns a value: it does not change anything in its environment. The return value of a function is used as input for another function, in what effectively is a chain of computations. You can thus rely on a function’s return value to express something like “if this works, then also do this other thing, otherwise do something else or even nothing.”
</p>

<p>
Elisp is the language that extends and controls Emacs. This means that it also affects the state of the editor. When you run a function, it can make permanent changes, such as to insert some text at the point of the cursor, delete a buffer, create a new window, and so on. These changes will have an impact on future function calls. For example, if the previous function deleted a certain buffer, the next function which was supposed to write to that same buffer can no longer do its job: the buffer is gone!
</p>

<p>
When you write Elisp, you have to account for both the return value and the side effects. If you are sloppy, you will get unintended results caused by all those ill-considered changes to the environment. But if you use side effects meticulously, you are empowered to take Elisp to its full potential. For instance, imagine you define a function that follows the logic of “create a buffer, go there, write some text, save the buffer to a file at my preferred location, and then come back where I was before I called this function, while leaving the created buffer open.” All these are side effects and they are all useful. Your function may have some meaningful return value as well that you can employ as the input of another function. For example, your function would return the buffer object it generated, so that the next function can do something there like display that buffer in a separate frame and make its text larger.
</p>

<p>
The idea is to manipulate the state of the editor, to make Emacs do what you envision. Sometimes this means your code has side effects. At other times, side effects are useless or even run counter to your intended results. You will keep refining your intuition about what needs to be done as you gain more experience and expand the array of your skills (<a href="#h:symbols-balanced-expressions-and-quoting">Symbols, balanced expressions, and quoting</a>). No problem; no stress!
</p>
</div>
</div>
<div id="outline-container-h:buffers-as-data-structures">
<h2 id="h:buffers-as-data-structures"><span>4.</span> Buffers as data structures</h2>
<div id="text-h:buffers-as-data-structures">
<p>
A buffer holds data as a sequence of characters. For example, this data is the text you are looking at when you open a file. Each character exists at a given position, which is a number. The function <code>point</code> gives you the position at the point you are on, which typically corresponds to where the cursor is (<a href="#h:evaluate-emacs-lisp">Evaluate Emacs Lisp</a>). At the beginning of a buffer, <code>point</code> returns the value of <code>1</code> (<a href="#h:side-effect-and-return-value">Side effect and return value</a>). There are plenty of functions that return a buffer position, such as <code>point-min</code>, <code>point-max</code>, <code>line-beginning-position</code>, and <code>re-search-forward</code>. Some of those will have side effects, like <code>re-search-forward</code> which moves the cursor to the given match.
</p>

<p>
When you program in Emacs Lisp, you frequently rely on buffers to do some of the following:
</p>

<dl>
<dt>Extract file contents as a string</dt><dd>Think of the buffer as a large string. You can get the entirety of its contents as one potentially massive string by using the function <code>buffer-string</code>. You may also get a substring between two buffer positions, such as with the <code>buffer-substring</code> function or its <code>buffer-substring-no-properties</code> counterpart (<a href="#h:text-has-its-own-properties">Text has its own properties</a>). Imagine you do this as part of a wider operation that (i) opens a file, (ii) goes to a certain position, (iii) copies the text it found, (iv) switches to another buffer, and (v) writes what it found to this new buffer.</dd>
</dl>

<dl>
<dt>Present the results of some operation</dt><dd>You may have a function that shows upcoming holidays. Your code does the computations behind the scenes and ultimately writes some text to a buffer. The end product is on display. Depending on how you go about it, you will want to evaluate the function <code>get-buffer-create</code> or its more strict <code>get-buffer</code> alternative. If you need to clear the contents of an existing buffer, you might use the <code>with-current-buffer</code> macro to temporarily switch to the buffer you are targetting and then either call the function <code>erase-buffer</code> to delete everything or limit the deletion to the range betweeen two buffer positions with <code>delete-region</code>. Finally, the functions <code>display-buffer</code> or <code>pop-to-buffer</code> will place the buffer in an Emacs window.</dd>
</dl>

<dl>
<dt>Associate variables with a given buffer</dt><dd>In Emacs Lisp, variables can take a buffer-local value which differs from its global counterpart. Some variables are even declared to always be buffer-local, such as the <code>buffer-file-name</code>, <code>fill-column</code>, and <code>default-directory</code>. Suppose you are doing something like returning a list of buffers that visit files in a given directory. You would iterate through the return value of the <code>buffer-list</code> function to filter the results accordingly by testing for a certain value of <code>buffer-file-name</code> (<a href="#h:basic-control-flow-with-if-cond-and-others">Basic control flow with <code>if</code>, <code>cond</code>, and others</a>). This specific variable is always available, though you can always use the <code>setq-local</code> macro to assign a value to a variable in the current buffer.</dd>
</dl>

<p>
The latter point is perhaps the most open-ended one. Buffers are like a bundle of variables, which includes their contents, the major mode they are running, and all the buffer-local values they have. In the following code block, I am using the <code>seq-filter</code> function to iterate through the return value of the function <code>buffer-list</code> (<a href="#h:symbols-balanced-expressions-and-quoting">Symbols, balanced expressions, and quoting</a>).
</p>

<div>
<pre>(seq-filter
 (lambda (buffer)
   "Return BUFFER if it is visible and its major mode derives from `text-mode'."
   (with-current-buffer buffer
     ;; The convention for buffers which are not meant to be seen by
     ;; the user is to start their name with an empty space.  We are
     ;; not interested in those right now.
     (and (not (string-prefix-p " " (buffer-name buffer)))
          (derived-mode-p 'text-mode))))
 (buffer-list))
</pre>
</div>

<p>
This will return a list of buffer objects that pass the test of (i) being “visible” to the user and (ii) their major mode is either <code>text-mode</code> or derived therefrom. The above may also be written thus (<a href="#h:when-to-use-a-named-function-or-a-lambda-function">When to use a named function or a lambda function</a>):
</p>

<div>
<pre>(defun my-buffer-visble-and-text-p (buffer)
  "Return BUFFER if it is visible and its major mode derives from `text-mode'."
  (with-current-buffer buffer
    ;; The convention for buffers which are not meant to be seen by
    ;; the user is to start their name with an empty space.  We are
    ;; not interested in those right now.
    (and (not (string-prefix-p " " (buffer-name buffer)))
         (derived-mode-p 'text-mode))))

(seq-filter #'my-buffer-visble-and-text-p (buffer-list))
</pre>
</div>

<p>
As with buffers, Emacs windows and frames have their own parameters. I will not cover those as their utility is more specialised and the concepts are the same. Just know that they are data structures that you may use to your advantage, including by iterating through them (<a href="#h:mapping-through-a-list-of-elements">Mapping through a list of elements</a>).
</p>
</div>
</div>
<div id="outline-container-h:text-has-its-own-properties">
<h2 id="h:text-has-its-own-properties"><span>5.</span> Text has its own properties</h2>
<div id="text-h:text-has-its-own-properties">
<p>
Just as with buffers that work like data structures (<a href="#h:buffers-as-data-structures">Buffers as data structures</a>), any text may also have properties associated with it. This is metadata that you inspect using Emacs Lisp. For example, when you see syntax highlighting in some programming buffer, this is the effect of text properties. Some function takes care to “propertise” or to “fontify” the relevant text and decides to apply to it an object known as “face”. Faces are constructs that bundle together typographic and colour attributes, such as the font family and weight, as well as foreground and background hues. To get a Help buffer with information about the text properties at the point of the cursor, type M-x (<code>execute-extended-command</code>) and then invoke the command <code>describe-char</code>. It will tell you about the character it sees, what font it is rendered with, which code point it is, and what its text properties are.
</p>

<p>
Suppose you are writings your own major mode. At the early stage of experimentation, you want to manually add text properties to all instances of the phrase <code>I have properties</code> in a buffer whose major mode is <code>fundamental-mode</code>, so you do something like this (<a href="#h:the-match-data-of-the-last-search">The match data of the last search</a>):
</p>

<div>
<pre>(defun my-add-properties ()
  "Add properties to the text \"I have properties\" across the current buffer."
  (goto-char (point-min))
  (while (re-search-forward "I have properties" nil t)
    (add-text-properties (match-beginning 0) (match-end 0) '(face error))))
</pre>
</div>

<p>
Actually try this. Use C-x b (<code>switch-to-buffer</code>), type in some random characters that do not match an existing buffer, and then hit RET to visit that new buffer. It runs <code>fundamental-mode</code>, meaning that there is no “fontification” happening and, thus, <code>my-add-properties</code> will work as intented. Now paste the following:
</p>

<div>
<pre>This is some sample text. Will the phrase "I have properties" use the `bold' face?

What does it even mean for I have properties to be bold?
</pre>
</div>

<p>
Continue with M-: (<code>eval-expression</code>) and call the function <code>my-add-properties</code>. Did it work? The face it is applying is called <code>error</code>. Ignore the semantics of that word: I picked it simply because it typically is styled in a fairly intense and obvious way (though your current theme may do things differently).
</p>

<p>
There are functions which find the properties at a given buffer position and others which can search forward and backward for a given property. The specifics do not matter right now. All I want you to remember is that the text can be more than just its constituent characters. For more details, type M-x (<code>execute-extended-command</code>) to call the command <code>shortdoc</code>. It will ask you for a documentation group. Pick <code>text-properties</code> to learn more. Well, use <code>shortdoc</code> for everything listed there. I do it all the time.
</p>
</div>
</div>
<div id="outline-container-h:symbols-balanced-expressions-and-quoting">
<h2 id="h:symbols-balanced-expressions-and-quoting"><span>6.</span> Symbols, balanced expressions, and quoting</h2>
<div id="text-h:symbols-balanced-expressions-and-quoting">
<p>
To someone not familiar with Emacs Lisp, it is a language that has so many parentheses! Here is a simple function definition:
</p>

<div>
<pre>(defun my-greet-person (name)
  "Say hello to the person with NAME."
  (message "Hello %s" name))
</pre>
</div>

<p>
I just defined the function with the name <code>my-greet-person</code>. It has a list of parameters, specifically, a list of one parameter, called <code>name</code>. Then is the optional documentation string, which is for users to make sense of the code and/or understand the intent of the function. <code>my-greet-person</code> takes <code>name</code> and passes it to the function <code>message</code> as an argument to ultimately print a greeting. The <code>message</code> function logs the text in the <code>*Messages*</code> buffer, which you can visit directly with C-h e (<code>view-echo-area-messages</code>). At any rate, this is how you call <code>my-greet-person</code> with the one argument it expects:
</p>

<div>
<pre>(my-greet-person "Protesilaos")
</pre>
</div>

<p>
Now do the same with more than one parameters:
</p>

<div>
<pre>(defun my-greet-person-from-country (name country)
  "Say hello to the person with NAME who lives in COUNTRY."
  (message "Hello %s of %s" name country))
</pre>
</div>

<p>
And call it thus:
</p>

<div>
<pre>(my-greet-person-from-country "Protesilaos" "Cyprus")
</pre>
</div>

<p>
Even for the most basic tasks, you have lots of parentheses. But fear not! These actually make it simpler to have a structural understanding of your code. If it does not feel this way right now, it is because you are not used to it yet. Once you do, there is no going back.
</p>

<p>
The basic idea of any dialect of Lisp, Emacs Lisp being one of them, is that you have parentheses which delimit lists. A list consists of elements. Lists are either evaluated to produce the results of some computation or returned as they are for use in some other evaluation (<a href="#h:side-effect-and-return-value">Side effect and return value</a>):
</p>

<dl>
<dt>The list as a function call</dt><dd>When a list is evaluated, the first element is the name of the function and the remaining elements are the arguments passed to it. You already saw this play out above with how I called <code>my-greet-person</code> with <code>"Protesilaos"</code> as its argument. Same principle for <code>my-greet-person-from-country</code>, with <code>"Protesilaos"</code> and <code>"Cyprus"</code> as its arguments.</dd>

<dt>The list as data</dt><dd>When a list is not evaluated, then none of its elements has any special meaning at the outset. They are all returned as a list without further changes. When you do not want your list to be evaluated, you prefix it with a single quote character. For example, <code>'("Protesilaos" "Prot" "Cyprus")</code> is a list of three elements that should be returned as-is.</dd>
</dl>

<p>
Consider the latter case, which you have not seen yet. You have a list of elements and you want to get some data out of it. At the most basic level, the functions <code>car</code> and <code>cdr</code> return the first element and the list of all remaining elements, respectively:
</p>

<div>
<pre>(car '("Protesilaos" "Prot" "Cyprus"))
;; =&gt; "Protesilaos"

(cdr '("Protesilaos" "Prot" "Cyprus"))
;; =&gt; ("Prot" "Cyprus")
</pre>
</div>

<p>
The single quote here is critical, because it instructs Emacs to not evaluate the list. Otherwise, the evaluation of this list would treat the first element, namely <code>"Protesilaos"</code>, as the name of a function and the remainder of the list as the arguments to that function. As you do not have the definition of such a function, you get an error.
</p>

<p>
Certain data types in Emacs Lisp are “self-evaluating”. This means that if you evaluate them, their return value is what you are already seeing. For example, the return value of the string of characters <code>"Protesilaos"</code> is <code>"Protesilaos"</code>. This is true for strings, numbers, keywords, symbols, and the special <code>nil</code> or <code>t</code>. Here is a list with a sample of each of these, which you construct by calling the function <code>list</code>:
</p>

<div>
<pre>(list "Protesilaos" 1 :hello 'my-greet-person-from-country nil t)
;; =&gt; ("Protesilaos" 1 :hello 'my-greet-person-from-country nil t)
</pre>
</div>

<p>
The <code>list</code> function evaluates the arguments passed to it, unless they are quoted. The reason you get the return value without any apparent changes is because of self-evaluation. Notice that <code>my-greet-person-from-country</code> is quoted the same way we quote a list we do not want to evaluate. Without it, <code>my-greet-person-from-country</code> would be evaluated, which would return an error unless that was also defined as a variable.
</p>

<p>
Think of the single quote as an unambiguous instruction: “do not evaluate the following.” More specifically, it is an instruction to not perform evaluation if it would have normally happened in that context (<a href="#h:partial-evaluation-inside-of-a-list">Partial evaluation inside of a list</a>). In other words, you do not want to quote something inside of a quoted list, because that is the same as quoting it twice:
</p>

<div>
<pre>;; This is the correct way:
'(1 :hello my-greet-person-from-country)

;; It is wrong to quote `my-greet-person-from-country' because the
;; entire list would not have been evaluated anyway.  The mistake here
;; is that you are quoting what is already quoted, like doing
;; ''my-greet-person-from-country.
'(1 :hello 'my-greet-person-from-country)
</pre>
</div>

<p>
Now you may be wondering why did we quote <code>my-greet-person-from-country</code> but nothing else? The reason is that everything else you saw there is effectively “self-quoting”, i.e. the flip-side of self-evaluation. Whereas <code>my-greet-person-from-country</code> is a symbol. A “symbol” is a reference to something other than itself: it either represents some computation—a function—or the value of a variable. If you write a symbol without quoting it, you are effectively telling Emacs “give me the value this symbol represents.” In the case of <code>my-greet-person-from-country</code>, you will get an error if you try that because this symbol is not a variable and thus trying to get a value out of it is not going to work.
</p>

<p>
Keep in mind that Emacs Lisp has a concept of “macro”, which basically is a templating system to write code that actually expands into some other code which is then evaluated. Inside of a macro, you control how quoting is done, meaning that the aforementioned may not apply to calls that involve the macro, even if they are still used inside of the macro’s expanded form (<a href="#h:evaluation-inside-of-a-macro-or-special-form">Evaluation inside of a macro or special form</a>).
</p>

<p>
As you expose yourself to more Emacs Lisp code, you will encounter quotes that are preceded by the hash sign, like <code>#'some-symbol</code>. This “sharp quote”, as it is called, is the same as the regular quote with the added semantics of referring to a function in particular. The programmer can thus better articulate the intent of a given expression, while the byte compiler may internally perform the requisite checks and optimisations. In this light, read about the functions <code>quote</code> and <code>function</code> which correspond to the quote and sharp quote, respectively.
</p>
</div>
</div>
<div id="outline-container-h:partial-evaluation-inside-of-a-list">
<h2 id="h:partial-evaluation-inside-of-a-list"><span>7.</span> Partial evaluation inside of a list</h2>
<div id="text-h:partial-evaluation-inside-of-a-list">
<p>
You already have an idea of how Emacs Lisp code looks like (<a href="#h:symbols-balanced-expressions-and-quoting">Symbols, balanced expressions, and quoting</a>). You have a list that is either evaluated or taken as-is. There is another case where a list should be partially evaluated or, more specifically, where it should be treated as data instead of a function call with some elements inside of it still subject to evaluation.
</p>

<p>
In the following code block, I am defining a variable called <code>my-greeting-in-greek</code>, which is a common phrase in Greek that literally means “health to you” and is pronounced as “yah sou”. Why Greek? Well, you got the <code>lambda</code> that engendered this whole business with Lisp, so you might as well get all the rest (<a href="#h:when-to-use-a-named-function-or-a-lambda-function">When to use a named function or a lambda function</a>)!
</p>

<div>
<pre>(defvar my-greeting-in-greek "Γεια σου"
  "Basic greeting in Greek to wish health to somebody.")
</pre>
</div>

<p>
Now I want to experiment with the <code>message</code> function to better understand how evaluation works. Let me start with the scenario of quoting the list, thus taking it as-is:
</p>

<div>
<pre>(message "%S" '(one two my-greeting-in-greek four))
;;=&gt; "(one two my-greeting-in-greek four)"
</pre>
</div>

<p>
You will notice that the variable <code>my-greeting-in-greek</code> is not evaluated. I get the symbol, the actual <code>my-greeting-in-greek</code>, but not the value it represents. This is the expected result, because the entire list is quoted and, ipso facto, everything inside of it is not evaluated.
</p>

<p>
Now check the next code block to understand how I can tell Emacs that I want the entire list to still be quoted but for <code>my-greeting-in-greek</code> in particular to be evaluated, so it is replaced by its value:
</p>

<div>
<pre>(message "%S" `(one two ,my-greeting-in-greek four))
;; =&gt; "(one two \"Γεια σου\" four)"
</pre>
</div>

<p>
Pay close attention to the syntax here. Instead of a single quote, I am using the backtick or back quote, which is also known as a “quasi quote” in our case. This behaves like the single quote except for anything that is preceded by a comma. The comma is an instruction to “evaluate the thing that follows” and only works inside of a quasi-quoted list. The “thing” that follows is either a symbol or a list. The list can, of course, be a function call. Let me then use <code>concat</code> to greet a certain person all while returning everything as a list:
</p>

<div>
<pre>(message "%S" `(one two ,(concat my-greeting-in-greek " " "Πρωτεσίλαε") four))
;; =&gt; "(one two \"Γεια σου Πρωτεσίλαε\" four)"
</pre>
</div>

<p>
Bear in mind that you would get an error if you were not quoting this list at all, because the first element <code>one</code> would be treated as the symbol a function, which would be called with all other elements as its arguments. Chances are that <code>one</code> is not defined as a function in your current Emacs session or those arguments are not meaningful to it, anyway. Plus, <code>two</code> and <code>four</code> would then be treated as variables, since they are not quoted, in which case those would have to be defined as well, else more errors would ensue.
</p>

<p>
Other than the comma operator, there is the <code>,@</code> (how is this even pronounced? “comma at”, perhaps?), which is notation for “splicing”. This is jargon in lieu of saying “the return value is a list and I want you to remove the outermost parentheses of it.” In effect, the code that would normally return <code>'(one two three)</code> now returns <code>one two three</code>. This difference may not make much sense in a vacuum, though it does once you consider those elements as expressions that should work in their own right, rather than simply be elements of a quoted list. I will not elaborate on an example here, as I think this is best covered in the context of defining macros (<a href="#h:evaluation-inside-of-a-macro-or-special-form">Evaluation inside of a macro or special form</a>).
</p>

<p>
Chances are you will not need to use the knowledge of partial evaluation. It is more common in macros, though can be applied anywhere. Be aware of it regardless, as there are scenaria where you will, at the very least, want to understand what some code you depend on is doing.
</p>

<p>
Lastly, since I introduced you to some Greek words, I am now considering you my friend. Here is a joke from when I was a kid. I was trying to explain some event to my English instructor. As I lacked the vocabulary to express myself, I started using Greek words. My instructor had a strict policy of only responding to English, so she said “It is all Greek to me.” Not knowing that her answer is an idiom for “I do not understand you”, I blithely replied, “Yes, Greek madame; me no speak England very best.” I was not actually a beginner at the time, though I would not pass on the opportunity to make fun of the situation. Just how you should remember to enjoy the time spent tinkering with Emacs. But enough of that! Back to reading this book.
</p>
</div>
</div>
<div id="outline-container-h:evaluation-inside-of-a-macro-or-special-form">
<h2 id="h:evaluation-inside-of-a-macro-or-special-form"><span>8.</span> Evaluation inside of a macro or special form</h2>
<div id="text-h:evaluation-inside-of-a-macro-or-special-form">
<p>
In the most basic case of Emacs Lisp code, you have lists that are either evaluated or not (<a href="#h:symbols-balanced-expressions-and-quoting">Symbols, balanced expressions, and quoting</a>). If you get a little more fancy, you have lists that are only partially evaluated (<a href="#h:partial-evaluation-inside-of-a-list">Partial evaluation inside of a list</a>). Sometimes though, you look at a piece of code and cannot understand why the normal rules of quoting and evaluation do not apply. Before you see this in action, inspect a typical function call that also involves the evaluation of a variable:
</p>

<div>
<pre>(concat my-greeting-in-greek " " "Πρωτεσίλαε")
</pre>
</div>

<p>
You encountered this code in the section about partial evaluation. What you have here is a call to the function <code>concat</code>, followed by three arguments. One of these arguments is a variable, the <code>my-greeting-in-greek</code>. When this list is evaluated, what Emacs actually does is to first evaluate the arguments, including <code>my-greeting-in-greek</code>, in order to get their respective values and only then to call <code>concat</code> with those values. You can think of the entire operation as follows:
</p>

<ul>
<li>Here is a list.</li>
<li>It is not quoted.</li>
<li>So you should evaluate it.</li>
<li>The first element is the name of the function.</li>
<li>The remaining elements are arguments passed to that function.</li>
<li>Check what the arguments are.</li>
<li>Evaluate each of the arguments to resolve it to its actual value.</li>
<li>Strings are self-evaluating, while the <code>my-greeting-in-greek</code> is a variable.</li>
<li>You now have the value of each of the arguments, including the value of the symbol <code>my-greeting-in-greek</code>.</li>
<li>Call <code>concat</code> with all the values you got.</li>
</ul>

<p>
In other words, the following two yield the same results (assuming a constant <code>my-greeting-in-greek</code>):
</p>

<div>
<pre>(concat my-greeting-in-greek " " "Πρωτεσίλαε")

(concat "Γεια σου" " " "Πρωτεσίλαε")
</pre>
</div>

<p>
This is predictable. It follows the basic logic of the single quote: if it is quoted, do not evaluate it and return it as-is, otherwise evaluate it and return its value. But you will find plenty of cases where this expected pattern is seemingly not followed. Consider this common case of using <code>setq</code> to bind a symbol to the given value:
</p>

<div>
<pre>(setq my-test-symbol "Protesilaos of Cyprus")
</pre>
</div>

<p>
The above expression looks like a function call, meaning that (i) the list is not quoted, (ii) the first element is the name of a function, and (iii) the remaining elements are arguments passed to that function. In a way, this is all true. Though you would then expect the <code>my-test-symbol</code> to be treated as a variable, which would be evaluated in place to return its result which would, in turn, be the actual argument passed to the function. However, this is not how <code>setq</code> works. The reason is that it is a special case that internally does this:
</p>

<div>
<pre>(set 'my-test-symbol "Protesilaos of Cyprus")
</pre>
</div>

<p>
This is where things are as expected. There is no magic happening behind the scenes. The <code>setq</code>, then, is a convenience for the user to not quote the symbol each time. Yes, this makes it a bit more difficult to reason about it, though you get used to it and eventually it all makes sense. Hopefully, you will get used to such special forms, as you find them with <code>setq</code> but also with <code>defun</code>, among many others. Here is a function you have already seen:
</p>

<div>
<pre>(defun my-greet-person-from-country (name country)
  "Say hello to the person with NAME who lives in COUNTRY."
  (message "Hello %s of %s" name country))
</pre>
</div>

<p>
If the normal rules of evaluation applied, then the list of parametes should be quoted. Otherwise, you would expect <code>(name country)</code> to be interpreted as a function call with <code>name</code> as the symbol of the function and <code>country</code> as its argument which would also be a variable. But this is not what is happening because <code>defun</code> will internally treat that list of parameters as if it was quoted.
</p>

<p>
Another common scenario is with <code>let</code> (<a href="#h:control-flow-with-if-let-and-friends">Control flow with <code>if-let*</code> and friends</a>). Its general form is as follows:
</p>

<div>
<pre>;; This is pseudo-code
(let LIST-OF-LISTS-AS-VARIABLE-BINDINGS
  BODY-OF-THE-FUNCTION)
</pre>
</div>

<p>
The <code>LIST-OF-LISTS-AS-VARIABLE-BINDINGS</code> is a list in which each element is a list of the form <code>(SYMBOL VALUE)</code>. Here is some actual code:
</p>

<div>
<pre>(let ((name "Protesilaos")
      (country "Cyprus"))
  (message "Hello %s of %s" name country))
</pre>
</div>

<p>
Continuing with the theme of special forms, if <code>let</code> was a typical function call, the <code>LIST-OF-LISTS-AS-VARIABLE-BINDINGS</code> would have to be quoted. Otherwise, it would be evaluated, in which case the first element would be the name of the function. But that would return an error, as the name of the function would correspond to another list, the <code>(name "Protesilaos")</code>, rather than a symbol. Things work fine with <code>let</code> because it internally does the quoting of its <code>LIST-OF-LISTS-AS-VARIABLE-BINDINGS</code>.
</p>

<p>
Expect similar behaviour with many special forms as well as with macros such as the popular <code>use-package</code>, which is used to configure packages inside of your Emacs initialisation file. How each of those macros works depends on the way it is designed. I will not delve into the technicalities here, as I want the book to be useful long-term, focusing on the principles rather than the implementation details that might change over time.
</p>

<p>
To learn what a given macro actually expands to, place the cursor at the end of its closing parenthesis and call the command <code>pp-macroexpand-last-sexp</code>. It will produce a new buffer showing the expanded Emacs Lisp code. This is what is actually evaluated in the macro’s stead.
</p>

<p>
With those granted, it is time to write a macro. This is like a template, which empowers you to not repeat yourself. Syntactically, a macro will most probably depend on the use of the quasi-quote, the comma operator, and the mechanics of splicing (<a href="#h:partial-evaluation-inside-of-a-list">Partial evaluation inside of a list</a>). Here is a simple scenario where we want to run some code in a temporary buffer while setting the <code>default-directory</code> to the user’s home directory.
</p>

<div>
<pre>(defmacro my-work-in-temp-buffer-from-home (&amp;rest expressions)
  "Evaluate EXPRESSIONS in a temporary buffer with `default-directory' set to the user's home."
  `(let ((default-directory ,(expand-file-name "~/")))
     (with-temp-buffer
       (message "Running all expression from the `%s' directory" default-directory)
       ,@expressions)))
</pre>
</div>

<p>
In this definition, the <code>&amp;rest</code> makes the following parameter a list. So you can pass an arbitrary number of arguments to it, all of which will be collected into a single list called <code>EXPRESSIONS</code>. The judicious use of partial evaluation ensures that the macro will not be evaluated right now but only when it is called. The arguments passed to it will be placed where you have specified. Here is a call that uses this macro:
</p>

<div>
<pre>(progn
  (message "Now we are doing something unrelated to the macro")
  (my-work-in-temp-buffer-from-home
   (message "We do stuff inside the macro")
   (+ 1 1)
   (list "Protesilaos" "Cyprus")))
</pre>
</div>

<p>
If you place the cursor at the closing parenthesis of <code>my-work-in-temp-buffer-from-home</code>, you will be able to confirm what it expands to by typing M-x (<code>execute-extended-command</code>) and then invoking the command <code>pp-macroexpand-last-sexp</code>. This is what I get:
</p>

<div>
<pre>(let ((default-directory "/home/prot/"))
  (with-temp-buffer
    (message "Running all expression from the `%s' directory" default-directory)
    (message "We do stuff inside the macro")
    (+ 1 1)
    (list "Protesilaos" "Cyprus")))
</pre>
</div>

<p>
Piecing it together with the rest of the code in its context, I arrive at this:
</p>

<div>
<pre>(progn
  (message "Now we are doing something unrelated to the macro")
  (let ((default-directory "/home/prot/"))
    (with-temp-buffer
      (message "Running all expression from the `%s' directory" default-directory)
      (message "We do stuff inside the macro")
      (+ 1 1)
      (list "Protesilaos" "Cyprus"))))
</pre>
</div>

<p>
With this example in mind, consider Elisp macros to be a way of saying “this little thing here helps me express this larger procedure more succinctly, while the actual code that runs is still that of the latter.”
</p>

<p>
The above macro I wrote has its body start with a quasi-quote, so you do not get to appreciate the nuances of evaluation within it. Let me show you this other approach, instead, where I write a macro that lets me define several almost identical interactive functions (<a href="#h:make-your-interactive-function-also-work-from-lisp-calls">Make your interactive function also work from Lisp calls</a>).
</p>

<div>
<pre>(defmacro my-define-command (name &amp;rest expressions)
  "Define command with specifier NAME that evaluates EXPRESSIONS."
  (declare (indent 1))
  (unless (symbolp name)
    (error "I want NAME to be a symbol"))
  (let ((modifined-name (format "modified-version-of-%s" name)))
    `(defun ,(intern modifined-name) ()
       (interactive)
       ,(message "The difference between `%s' and `%s'" modifined-name name)
       ,@expressions)))
</pre>
</div>

<p>
The <code>my-define-command</code> can be broadly divided into two parts: (i) what gets evaluated outright and (ii) what gets expanded for further evaluation. The latter part starts with the quasi-quote. This distinction is important when we call the macro, because the former part will be executed right away so if we hit the error, it will never expand and then run the <code>EXPRESSIONS</code>. Try <code>pp-macroexpand-last-sexp</code> with the following to see what I mean. For your convenience, I include the macro expansions right below each case.
</p>

<div>
<pre>(my-define-command first-demo
  (message "This is what my function does")
  (+ 1 10)
  (message "And this"))
;; =&gt;
;;
;; (defun modified-version-of-first-demo nil
;;   (interactive)
;;   "The difference between ‘modified-version-of-first-demo’ and ‘first-demo’"
;;   (message "This is what my function does")
;;   (+ 1 10)
;;   (message "And this"))


(my-define-command second-demo
  (list "Protesilaos" "Cyprus")
  (+ 1 1)
  (message "Arbitrary expressions here"))
;; =&gt;
;;
;; (defun modified-version-of-second-demo nil
;;   (interactive)
;;   "The difference between ‘modified-version-of-second-demo’ and ‘second-demo’"
;;   (list "Protesilaos" "Cyprus")
;;   (+ 1 1)
;;   (message "Arbitrary expressions here"))


(my-define-command "error scenario"
  (list "Will" "Not" "Reach" "This")
  (/ 2 0))
;; =&gt; ERROR...
</pre>
</div>

<p>
Do you need macros? Not always, though there will be cases where a well-defined macro makes your code more elegant. What matters is that you have a sense of how evaluation works so that you do not get confused by all those parentheses. Otherwise you might expect something different to happen than what you actually get.
</p>
</div>
</div>
<div id="outline-container-h:mapping-through-a-list-of-elements">
<h2 id="h:mapping-through-a-list-of-elements"><span>9.</span> Mapping through a list of elements</h2>
<div id="text-h:mapping-through-a-list-of-elements">
<p>
A common routine in programming is to work through a list of items and perform some computation on each of them. Emacs Lisp has the generic <code>while</code> loop, as well as a whole range of more specialised functions to map over a list of elements, such as <code>mapcar</code>, <code>mapc</code>, <code>dolist</code>, <code>seq-filter</code>, <code>seq-remove</code>, and many more. Depending on what you are doing, you map through elements with the intent to produce some side effect and/or to test for a return value (<a href="#h:side-effect-and-return-value">Side effect and return value</a>). I will show you some examples and let you decide which is the most appropriate tool for the task at hand.
</p>

<p>
Starting with <code>mapcar</code>, it applies a function to each element of a list. It then takes the return value at each iteration and collects it into a new list. This is the return value of <code>mapcar</code> as a whole. In the following code block, I use <code>mapcar</code> over a list of numbers to increment them by <code>10</code> and return a new list of the incremented numbers.
</p>

<div>
<pre>(mapcar
 (lambda (number)
   (+ 10 number))
 '(1 2 3 4 5))
;; =&gt; (11 12 13 14 15)
</pre>
</div>

<p>
In the code block above, I am using a <code>lambda</code>, else an anonymous function (<a href="#h:when-to-use-a-named-function-or-a-lambda-function">When to use a named function or a lambda function</a>). Here is the same code, but with an eponymous function, i.e. a named function:
</p>

<div>
<pre>(defun my-increment-by-ten (number)
  "Add 10 to NUMBER."
  (+ 10 number))

(mapcar #'my-increment-by-ten '(1 2 3 4 5))
;; =&gt; (11 12 13 14 15)
</pre>
</div>

<p>
Notice that here we quote the eponymous function (<a href="#h:symbols-balanced-expressions-and-quoting">Symbols, balanced expressions, and quoting</a>).
</p>

<p>
The <code>mapcar</code> collects the return values into a new list. Sometimes this is useless. Suppose you want to evaluate a function that saves all unsaved buffers which visit a file. In this scenario, you do not care about accumulating the results: you just want the side effect of saving the buffer outright. To this end, you may use <code>mapc</code>, which always returns the list it operated on:
</p>

<div>
<pre>(mapc
 (lambda (buffer)
   (when (and (buffer-file-name buffer)
              (buffer-modified-p buffer))
     (save-buffer)))
 (buffer-list))
</pre>
</div>

<p>
An alternative to the above is <code>dolist</code>, which is used for side effects but always returns <code>nil</code>:
</p>

<div>
<pre>(dolist (buffer (buffer-list))
  (when (and (buffer-file-name buffer)
             (buffer-modified-p buffer))
    (save-buffer)))
</pre>
</div>

<p>
You will notice that the <code>dolist</code> is a macro, so some parts of it seem to behave differently than with basic lists and the evaluation rules that apply to them (<a href="#h:evaluation-inside-of-a-macro-or-special-form">Evaluation inside of a macro or special form</a>). This is a matter of getting used to how the code is expressed.
</p>

<p>
When to use a <code>dolist</code> as opposed to a <code>mapc</code> is a matter of style. If you are using a named function, a <code>mapc</code> looks cleaner to my eyes. Otherwise a <code>dolist</code> is easier to read. Here is my approach with some pseudo-code:
</p>

<div>
<pre>;; I like this:
(mapc #'NAMED-FUNCTION LIST)

;; I also like a `dolist' instead of a `mapc' with a `lambda':
(dolist (element LIST)
  (OPERATE-ON element))

;; I do not like this:
(mapc
 (lambda (element)
   (OPERATE-ON element))
 LIST)
</pre>
</div>

<p>
While <code>dolist</code> and <code>mapc</code> are for side effects, you can still employ them in the service of accumulating results, with the help of <code>let</code> and related forms (<a href="#h:control-flow-with-if-let-and-friends">Control flow with <code>if-let*</code> and friends</a>). Depending on the specifics, this approach may make more sense than relying on a <code>mapcar</code>. Here is an annotated sketch:
</p>

<div>
<pre>;; Start with an empty list of `found-strings'.
(let ((found-strings nil))
  ;; Use `dolist' to test each element of the list '("Protesilaos" 1 2 3 "Cyprus").
  (dolist (element '("Protesilaos" 1 2 3 "Cyprus"))
    ;; If the element is a string, then `push' it to the `found-strings', else skip it.
    (when (stringp element)
      (push element found-strings)))
  ;; Now that we are done with the `dolist', return the new value of `found-strings'.
  found-strings)
;; =&gt; ("Cyprus" "Protesilaos")


;; As above but reverse the return value, which makes more sense:
(let ((found-strings nil))
  (dolist (element '("Protesilaos" 1 2 3 "Cyprus"))
    (when (stringp element)
      (push element found-strings)))
  (nreverse found-strings))
;; =&gt; ("Protesilaos" "Cyprus")
</pre>
</div>

<p>
For completeness, the previous example would have to be done as follows with the use of <code>mapcar</code>:
</p>

<div>
<pre>(mapcar
 (lambda (element)
   (when (stringp element)
     element))
 '("Protesilaos" 1 2 3 "Cyprus"))
;; =&gt; ("Protesilaos" nil nil nil "Cyprus")


(delq nil
      (mapcar
       (lambda (element)
         (when (stringp element)
           element))
       '("Protesilaos" 1 2 3 "Cyprus")))
;; =&gt; ("Protesilaos" "Cyprus")
</pre>
</div>

<p>
Because <code>mapcar</code> happily accumulates all the return values, it returns a list that includes <code>nil</code>. If you wanted that, you would probably not even bother with the <code>when</code> clause there. The <code>delq</code> is thus applied to the return value of the <code>mapcar</code> to delete all the instances of <code>nil</code>. Now compare this busy work to <code>seq-filter</code>:
</p>

<div>
<pre>(seq-filter #'stringp '("Protesilaos" 1 2 3 "Cyprus"))
;; =&gt; ("Protesilaos" "Cyprus")
</pre>
</div>

<p>
The <code>seq-filter</code> is the best tool when all you need is to test if the element satisfies a predicate function and then return that element. But you cannot return something else. Whereas <code>mapcar</code> will take any return value without complaints, such as the following:
</p>

<div>
<pre>(delq nil
      (mapcar
       (lambda (element)
         (when (stringp element)
           ;; `mapcar' accumulates any return value, so we can change
           ;; the element to generate the results we need.
           (upcase element)))
       '("Protesilaos" 1 2 3 "Cyprus")))
;; =&gt; ("PROTESILAOS" "CYPRUS")

(seq-filter
 (lambda (element)
   (when (stringp element)
     ;; `seq-filter' only returns elements that have a non-nil return
     ;; value here, but it returns the elements, not what we return
     ;; here.  In other words, this `lambda' does unnecessary work.
     (upcase element)))
 '("Protesilaos" 1 2 3 "Cyprus"))
;; =&gt; ("Protesilaos" "Cyprus")
</pre>
</div>

<p>
How you go about mapping over a list of elements will depend on what you are trying to do. There is no one single function that does everything for you. Understand the nuances and you are good to go. Oh, and do look into the built-in <code>seq</code> library (use M-x (<code>execute-extended-command</code>), invoke <code>find-library</code>, and then search for <code>seq</code>). You are now looking at the source code of <code>seq.el</code>: it defines plenty of functions like <code>seq-take</code>, <code>seq-find</code>, <code>seq-union</code>. Another way is to invoke the command <code>shortdoc</code> and read about the documentation groups <code>list</code> as well as <code>sequence</code>.
</p>
</div>
</div>
<div id="outline-container-h:the-match-data-of-the-last-search">
<h2 id="h:the-match-data-of-the-last-search"><span>10.</span> The match data of the last search</h2>
<div id="text-h:the-match-data-of-the-last-search">
<p>
As you work with Emacs Lisp, you will encounter the concept of “match data” and the concomitant functions <code>match-data</code>, <code>match-beginning</code>, <code>match-string</code>, and so on. These refer to the results of the last search, which is typically performed by the functions <code>re-search-forward</code>, <code>looking-at</code>, <code>string-match</code>, and related. Each time you perform a search, the match data gets updated. Be mindful of this common side effect (<a href="#h:side-effect-and-return-value">Side effect and return value</a>). If you forget about it, chances are your code will not do the right thing.
</p>

<p>
In the following code block, I define a function that performs a search in the current buffer and returns a list of match data without text properties, where relevant (<a href="#h:text-has-its-own-properties">Text has its own properties</a>).
</p>

<div>
<pre>(defun my-get-match-data (regexp)
  "Search forward for REGEXP and return its match data, else nil."
  (when (re-search-forward regexp nil t)
    (list
     :beginning (match-beginning 0)
     :end (match-end 0)
     :string (match-string-no-properties 0))))
</pre>
</div>

<p>
You may then call it with a string argument, representing an Emacs Lisp regular expression:
</p>

<div>
<pre>(my-get-match-data "Protesilaos.*Cyprus")
</pre>
</div>

<p>
If the regular expression matches, then you get the match data. Here is some sample text:
</p>

<div>
<pre>Protesilaos lives in the mountains of Cyprus.
</pre>
</div>

<p>
Place the cursor before that text and use M-: (<code>eval-expression</code>) to evaluate <code>my-get-match-data</code> with the regexp I show above. You will get a return value, as intended.
</p>

<p>
The way <code>my-get-match-data</code> is written, it does two things: (i) it has the side effect of moving the cursor to the end of the text it found and (ii) it returns a list with the match data I specified. There are many scenaria where you do not want the aforementioned side effect: the cursor should stay where it is. As such, you can wrap your code in a <code>save-excursion</code> (<a href="#h:switching-to-another-buffer-window-or-narrowed-state">Switching to another buffer, window, or narrowed state</a>): it will do what it must and finally restore the <code>point</code> (<a href="#h:run-some-code-or-fall-back-to-some-other-code">Run some code or fall back to some other code</a>):
</p>

<div>
<pre>(defun my-get-match-data (regexp)
  "Search forward for REGEXP and return its match data, else nil."
  (save-excursion ; we wrap our code in a `save-excursion' to inhibit the side effect
    (when (re-search-forward regexp nil t)
      (list
       :beginning (match-beginning 0)
       :end (match-end 0)
       :string (match-string-no-properties 0)))))
</pre>
</div>

<p>
If you evaluate this version of <code>my-get-match-data</code> and then retry the function call I had above, you will notice how you get the expected return value without the side effect of the cursor moving to the end of the matching text. In practice, this is a useful tool that may be combined with <code>save-match-data</code>. Imagine you want to do a search forward inside of another search you are performing, such as to merely test if there is a match for a regular expression in the context, but need to inhibit the modification of the match data you planned to operate on. As such:
</p>

<div>
<pre>(defun my-get-match-data-with-extra-check (regexp)
  "Search forward for REGEXP followed by no spaces and return its match data, else nil."
  (save-excursion
    (when (and (re-search-forward regexp nil t)
               (save-match-data (not (looking-at "[\s\t]+"))))
      ;; Return the match data of the first search.  The second one
      ;; which tests for spaces or tabs is just an extra check, but we
      ;; do not want to use its match data, hence the `save-match-data'
      ;; around it.
      (list
       :beginning (match-beginning 0)
       :end (match-end 0)
       :string (match-string-no-properties 0)))))
</pre>
</div>

<p>
Evaluate the function <code>my-get-match-data-with-extra-check</code> and then call with M-: (<code>eval-expression</code>) to test that it returns a non-<code>nil</code> value with the second example below, but not the first one. This is the expected outcome.
</p>

<div>
<pre>(my-get-match-data-with-extra-check "Protesilaos.*Cyprus")
;; =&gt; nil


;; Protesilaos, also known as "Prot", lives in the mountains of Cyprus   .

(my-get-match-data-with-extra-check "Protesilaos.*Cyprus")
;; =&gt; (:beginning 41988 :end 42032 :string "Protesilaos lives in the mountains of Cyprus")


;; Protesilaos lives in the mountains of Cyprus.
</pre>
</div>
</div>
</div>
<div id="outline-container-h:switching-to-another-buffer-window-or-narrowed-state">
<h2 id="h:switching-to-another-buffer-window-or-narrowed-state"><span>11.</span> Switching to another buffer, window, or narrowed state</h2>
<div id="text-h:switching-to-another-buffer-window-or-narrowed-state">
<p>
As you use Emacs Lisp to do things programmatically, you encounter cases where you need to move away from where you are. You may have to switch to another buffer, change to the window of a given buffer, or even modify what is visible in the buffer you are editing. At all times, this involves one or more side effects which, most probably, should be undone when your function finishes its job (<a href="#h:side-effect-and-return-value">Side effect and return value</a>).
</p>

<p>
Perhaps the most common case is to restore the <code>point</code>. You have some code that moves back or forth in the buffer to perform a match for a given piece of text. But then, you need to leave the cursor where it originally was, otherwise the user will lose their orientation. Wrap your code in a <code>save-excursion</code> and you are good to go, as I show elsewhere (<a href="#h:the-match-data-of-the-last-search">The match data of the last search</a>):
</p>

<div>
<pre>(save-excursion ; restore the `point' after you are done
  MOVE-AROUND-IN-THIS-BUFFER)
</pre>
</div>

<p>
Same principle for <code>save-window-excursion</code>, which allows you to select another window, such as with <code>select-window</code>, move around in its buffer, and then restore the windows as they were:
</p>

<div>
<pre>(save-window-excursion
  (select-window SOME-WINDOW)
  MOVE-AROUND-IN-THIS-BUFFER)
</pre>
</div>

<p>
The <code>save-restriction</code> allows you to restore the current narrowing state of the buffer. You may then choose to either <code>widen</code> or <code>narrow-to-region</code> (and related commands like <code>org-narrow-to-subtree</code>), do what you must, and then restore the buffer to its original state.
</p>

<div>
<pre>;; Here we assume that we start in a widened state.  Then we narrow to
;; the current Org heading to get all of its contents as one massive
;; string.  Then we widen again, courtesy of `save-restriction'.
(save-restriction
  (org-narrow-to-subtree)
  (buffer-string))
</pre>
</div>

<p>
Depending on the specifics, you will want to combine the aforementioned. Beware that the documentation of <code>save-restriction</code> tells you to use <code>save-excursion</code> as the outermost call. Other than that, you will also find cases that require a different approach to perform some conditional behaviour (<a href="#h:run-some-code-or-fall-back-to-some-other-code">Run some code or fall back to some other code</a>).
</p>
</div>
</div>
<div id="outline-container-h:basic-control-flow-with-if-cond-and-others">
<h2 id="h:basic-control-flow-with-if-cond-and-others"><span>12.</span> Basic control flow with <code>if</code>, <code>cond</code>, and others</h2>
<div id="text-h:basic-control-flow-with-if-cond-and-others">
<p>
You do not need any conditional logic to perform basic operations. For example, if you write a command that moves 15 lines down, it will naturally stop at the end of the buffer when it cannot move past the number you specified. Using <code>defun</code>, you write an interactive function (i.e. a “command”) to unconditionally move down 15 lines using <code>forward-line</code> internally (call it with a negative number to move in the opposite direction):
</p>

<div>
<pre>(defun my-15-lines-down ()
  "Move at most 15 lines down."
  (interactive)
  (forward-line 15))
</pre>
</div>

<p>
The <code>my-15-lines-down</code> is about as simple as it gets: it wraps around a basic function and passes to it a fixed argument, in this case the number <code>15</code>. Use M-x (<code>execute-extended-command</code>) and then call this command by its name. It works! Things get more involved as soon as you decide to perform certain actions only once a given condition is met. This “control flow” between different branches of a logical sequence is expressed with <code>if</code>, <code>when</code>, <code>unless</code>, and <code>cond</code>, among others. Depending on the specifics of the case, <code>and</code> as well as <code>or</code> may suffice.
</p>

<p>
How about you make your <code>my-15-lines-down</code> a bit smarter? When it is at the absolute end of the buffer, have it move 15 lines up. Why? Because this is a demonstration, so why not? The predicate function that tests if the point is at the end of the buffer is <code>eobp</code>. A “predicate” is a function that returns true, technically non-<code>nil</code>, when its condition is met, else it returns <code>nil</code> (<a href="#h:side-effect-and-return-value">Side effect and return value</a>). As for the weird name, the convention in Emacs Lisp is to end predicate functions with the <code>p</code> suffix: if the name of the function consists of multiple words, typically separated by dashes, then the predicate function is named <code>NAME-p</code>, like <code>string-match-p</code>, otherwise it is <code>NAMEp</code>, like <code>stringp</code>.
</p>

<div>
<pre>(defun my-15-lines-down-or-up ()
  "Move at most 15 lines down or go back if `eobp' is non-nil."
  (interactive)
  (if (eobp)
      (forward-line -15)
    (forward-line 15)))
</pre>
</div>

<p>
Evaluate this function, then type M-x (<code>execute-extended-command</code>) and invoke <code>my-15-lines-down-or-up</code> to get a feel for it. Below is a similar idea, which throws and error and exits what it was doing if <code>eobp</code> returns non-<code>nil</code>:
</p>

<div>
<pre>(defun my-15-lines-down-or-error ()
  "Throw an error if `eobp' returns non-nil, else move 15 lines down."
  (interactive)
  (if (eobp)
      (error "Already at the end; will not move further")
    (forward-line 15)))
</pre>
</div>

<p>
A quirk of Emacs Lisp, which may be a feature all along, is how indentation is done. Just mark the code you have written and type TAB: Emacs will take care to indent it the way it should be done. In the case of the <code>if</code> statement, the “then” part is further in than the “else” part of the logic. There is no special meaning to this indentation: you could write everything on a single line like <code>(if COND THIS ELSE)</code>, which looks like your typical list, by the way (<a href="#h:symbols-balanced-expressions-and-quoting">Symbols, balanced expressions, and quoting</a>). What the indentation does is help you identify imbalances in your parentheses. If the different expressions all line up in a way that looks odd, then you are most probably missing a parentheses or have too many of them. Generally, expressions at the same level will all line up the same way. Those deeper in will have more indentation, and so on. Experience will allow you to spot mistakes with mismatching parentheses. But even if you do not identify them, you will get an error eventually. Rest assured!
</p>

<p>
The way <code>if</code> is written is like a function that takes two or more arguments. The “or more” all counts as part of the “else” logic. As such, <code>(if COND THIS)</code> has no “else” consequence, while <code>(if COND THIS ELSE1 ELSE2 ELSE3)</code> will run <code>ELSE1</code>, <code>ELSE2</code>, and <code>ELSE3</code> in order as part of the “else” branch. Here is how this looks once you factor in proper indentation:
</p>

<div>
<pre>(if COND
    THIS
  ELSE1
  ELSE2
  ELSE3)
</pre>
</div>

<p>
Now what if the <code>THIS</code> part needs to be more than one function call? Elisp has the <code>progn</code> form, which you can use to wrap function calls and pass them as a single argument. Putting it all together, your code will now look this like:
</p>

<div>
<pre>(if COND
    (progn
      THIS1
      THIS2
      THIS3)
  ELSE1
  ELSE2
  ELSE3)
</pre>
</div>

<p>
If you do not need the “else” part, use <code>when</code> to express your intention. Internally, this is a macro which actually stands for <code>(if COND (progn EXPRESSIONS))</code>, where <code>EXPRESSIONS</code> is one or more expressions. A <code>when</code> looks like this:
</p>

<div>
<pre>(when COND
  THIS1
  THIS2
  THIS3)
</pre>
</div>

<p>
Similarly, the <code>unless</code> has the meaning of <code>(when (not COND) EXPRESSIONS)</code>. It, too, is a macro that expands to an <code>if</code> statement:
</p>

<div>
<pre>(unless COND
  THIS1
  THIS2
  THIS3)
</pre>
</div>

<p>
When the condition you are testing for has multiple parts, you can rely on <code>and</code> as well as <code>or</code>:
</p>

<div>
<pre>(when (or THIS THAT)
  EXPRESSIONS)

(when (and THIS THAT)
  EXPRESSIONS)

(when (or (and THIS THAT) OTHER)
  EXPRESSIONS)
</pre>
</div>

<p>
Depending on the specifics of the case, the combination of multiple <code>if</code>, <code>when</code>, <code>or</code>, <code>and</code> will look awkward. You can break down the logic to distinct conditions, which are tested in order from top to bottom, using <code>cond</code>. The way <code>cond</code> is written is as a list of lists, which do not need quoting (<a href="#h:evaluation-inside-of-a-macro-or-special-form">Evaluation inside of a macro or special form</a>). In abstract, it looks like this:
</p>

<div>
<pre>(cond
 (CONDITION1
  CONSEQUENCES1)
 (CONDITION2
  CONSEQUENCES2)
 (CONDITION3
  CONSEQUENCES3)
 (t
  CONSEQUENCES-FALLBACK))
</pre>
</div>

<p>
Each of the consequences can be any number of expressions, like you saw above with <code>when</code>. This is a toy function to show how <code>cond</code> behaves:
</p>

<div>
<pre>(defun my-toy-cond (argument)
  "Return a response depending on the type of ARGUMENT."
  (cond
   ((and (stringp argument)
         (string-blank-p argument))
    (message "You just gave me a blank string; try harder!"))
   ((stringp argument)
    (message "I see you can do non-blanks string; I call that progress."))
   ((null argument)
    (message "Yes, the nil is an empty list like (), but do not worry about it"))
   ((listp argument)
    (message "Oh, I see you are in the flow of using lists!"))
   ((symbolp argument)
    (message "What's up with the symbols, mate?"))
   ((natnump argument)
    (message "I fancy those natural numbers!"))
   ((numberp argument)
    (message "You might as well be a math prodigy!"))
   (t
    (message "I have no idea what type of thing your argument `%s' is" argument))))
</pre>
</div>

<p>
I want you to evaluate it and pass it different arguments to test what it does (<a href="#h:evaluate-emacs-lisp">Evaluate Emacs Lisp</a>). Here are two examples:
</p>

<div>
<pre>(my-toy-cond "")
;; =&gt; "You just gave me a blank string; try harder!"

(my-toy-cond '(1 2 3))
;; =&gt; "Oh, I see you are in the flow of using lists!"
</pre>
</div>

<p>
All of the above are common in Emacs Lisp. Another powerful macro is <code>pcase</code>, which we will consider separately due to its particularities (<a href="#h:pattern-match-with-pcase-and-related">Pattern match with <code>pcase</code> and related</a>).
</p>
</div>
</div>
<div id="outline-container-h:control-flow-with-if-let-and-friends">
<h2 id="h:control-flow-with-if-let-and-friends"><span>13.</span> Control flow with <code>if-let*</code> and friends</h2>
<div id="text-h:control-flow-with-if-let-and-friends">
<p>
The <code>let</code> and <code>let*</code> declare variables that are available only within the current scope, else the <code>BODY</code> of the <code>let</code>. As such:
</p>

<div>
<pre>(let BINDINGS
  BODY)

(let ((variable1 value1)
      (variable2 value2))
  BODY)
</pre>
</div>

<p>
The <code>BINDINGS</code> is a list of lists, which does not need to be quoted (<a href="#h:evaluation-inside-of-a-macro-or-special-form">Evaluation inside of a macro or special form</a>). While <code>BODY</code> consists of one or more expressions, which I have also named <code>EXPRESSIONS</code> elsewhere in this book. The difference between <code>let</code> and <code>let*</code> (pronounced “let star”) is that the latter makes earlier bindings available to later bindings. Like this:
</p>

<div>
<pre>;; This works because `greeting' can access `name' and `country',
;; courtesy of `let*':
(let* ((name "Protesilaos")
       (country "Cyprus")
       (greeting (format "Hello %s of %s" name country)))
  (DO-STUFF-WITH greeting))

;; But this fails...
(let ((name "Protesilaos")
      (country "Cyprus")
      (greeting (format "Hello %s of %s" name country)))
  (DO-STUFF-WITH greeting))
</pre>
</div>

<p>
Sometimes what you want to do is create those bindings if—and only if—they are all non-<code>nil</code>. If their value is <code>nil</code>, then they are useless to you, in which case you do something else (<a href="#h:basic-control-flow-with-if-cond-and-others">Basic control flow with <code>if</code>, <code>cond</code>, and others</a>). Values may or may not be <code>nil</code> when you are creating a binding with the return value of a function call or some other variable. You could always write code like this:
</p>

<div>
<pre>(let ((variable1 (SOME-FUNCTION SOME-ARGUMENT))
      (variable2 (OTHER-FUNCTION OTHER-ARGUMENT)))
  (if (and variable1 variable2) ; simply test both for non-nil
      THIS
    ELSE))
</pre>
</div>

<p>
But you can do the same with <code>if-let*</code>, where the <code>THIS</code> part runs only if all the bindings are non-<code>nil</code>:
</p>

<div>
<pre>(if-let* ((variable1 (SOME-FUNCTION SOME-ARGUMENT))
          (variable2 (OTHER-FUNCTION OTHER-ARGUMENT)))
    THIS
  ELSE)
</pre>
</div>

<p>
In the <code>ELSE</code> part, the bindings <code>variable1</code> and <code>variable2</code> do not exist: they only exist for the <code>THIS</code> part of the code.
</p>

<p>
The <code>when-let*</code> is the same as <code>when</code>, meaning that it has no “else” logic. If one of its bindings is <code>nil</code>, then the whole <code>when-let*</code> returns <code>nil</code>. No need to belabour that point.
</p>

<p>
As you dig dipper into the Emacs Lisp ecosystem, you will come across uses of <code>if-let*</code> that (i) create multiple bindings like <code>let</code> or <code>let*</code> but (ii) also call a predicate function to test if they should continue with the <code>THIS</code> part of their logic. Remember that <code>if-let*</code> goes straight to <code>ELSE</code> if one of its bindings returns <code>nil</code>. Consider this example:
</p>

<div>
<pre>(if-let* ((variable1 (SOME-FUNCTION SOME-ARGUMENT))
          ;; The _ signifies intent: "do not bind this; I only care
          ;; about the return value being non-nil".  What we are doing
          ;; here is test if `variable1' is a string: if it is, we
          ;; continue with the bindings, otherwise we move to the ELSE
          ;; part of the code.
          (_ (string-match-p variable1))
          (variable2 (OTHER-FUNCTION OTHER-ARGUMENT)))
    THIS
  ELSE)
</pre>
</div>

<p>
There is no inherently superior way of doing things. It is a matter of using the right tool for the task at hand. Sometimes you want the bindings to be created, even if their value is <code>nil</code>. Choose what makes sense.
</p>
</div>
</div>

<div id="outline-container-h:run-some-code-or-fall-back-to-some-other-code">
<h2 id="h:run-some-code-or-fall-back-to-some-other-code"><span>15.</span> Run some code or fall back to some other code</h2>
<div id="text-h:run-some-code-or-fall-back-to-some-other-code">
<p>
Your typical code will rely on <code>if</code>, <code>cond</code>, and the like for control flow (<a href="#h:basic-control-flow-with-if-cond-and-others">Basic control flow with <code>if</code>, <code>cond</code>, and others</a>). Depending on your specific needs or stylistic considerations, it may even include <code>pcase</code> (<a href="#h:pattern-match-with-pcase-and-related">Pattern match with <code>pcase</code> and related</a>) as well as <code>if-let*</code> (<a href="#h:control-flow-with-if-let-and-friends">Control flow with <code>if-let*</code> and friends</a>). There are some cases, nonetheless, that make it imperative you run additional code after your primary operation concludes or exits. The idea is to clean up whatever intermediate state you created. The logic is “do this with all the necessary side effects, then whatever happens to it do that now to, inter alia, undo the side effects.” This is the concept of “unwinding”, which is implemented via <code>unwind-protect</code>.
</p>

<p>
In the following code block, I define a function which produces a minibuffer prompt asking you to provide a <code>y</code> or <code>n</code> answer, which is shorthand notation for “yes” or “no”. It tests the return value of <code>y-or-n-p</code> to determine what it needs to do. While the prompt is open, the function highlights all instances of the regular expression <code>(defun</code> in the current buffer. Those highlights must go away after you are done with the minibuffer and its consequences.
</p>

<div>
<pre>(defun my-prompt-with-temporary-highlight ()
  "Ask for confirmation and highlight all instances of a regexp while waiting."
  (let ((regexp "(defun"))
    (unwind-protect
        (progn
          (highlight-regexp regexp)
          (if (y-or-n-p "Should we proceed or not? ")
              (message "You have decided to proceed")
            (message "You prefer not to continue")))
      (unhighlight-regexp regexp))))
</pre>
</div>

<p>
Try the above in your Emacs to get a feel for it. While the “yes or no” prompt is active, also do C-g (<code>keyboard-quit</code>) or C-] (<code>abort-recursive-edit</code>) to confirm that the highlights are removed even though the code never gets past the prompting phase. You may even modify the function to produce an error: it will create a backtrace, which will still have the effect of unwinding after you do q (<code>debugger-quit</code>) from the <code>*Backtrace*</code> window.
</p>

<div>
<pre>(defun my-prompt-with-temporary-highlight-try-with-error ()
  "Ask for confirmation and highlight all instances of a regexp while waiting."
  (let ((regexp "(defun"))
    (unwind-protect
        (progn
          (highlight-regexp regexp)
          (error "This error makes no sense here; close the backtrace to test the unwinding")
          (if (y-or-n-p "Should we proceed or not? ")
              (message "You have decided to proceed")
            (message "You prefer not to continue")))
      (unhighlight-regexp regexp))))
</pre>
</div>

<p>
Taking a step back, you will figure out how <code>unwind-protect</code> is a more general form of specialists like <code>save-excursion</code> and <code>save-restriction</code> (<a href="#h:switching-to-another-buffer-window-or-narrowed-state">Switching to another buffer, window, or narrowed state</a>), while it underpins the <code>save-match-data</code> (<a href="#h:the-match-data-of-the-last-search">The match data of the last search</a>) among many other functions/macros, such as <code>with-temp-buffer</code> and <code>save-window-excursion</code>. What <code>unwind-protect</code> does not do is respond specially to signals, such as those coming from the <code>error</code> function: it will allow the error to happen, meaning that a backtrace will be displayed and your code will exit right there (but the unwinding will still work, as I already explained, once you dismiss the backtrace). To make your code treat signals in a more controlled fashion, you must rely on <code>condition-case</code>.
</p>

<p>
With <code>condition-case</code> you assume full control over the behaviour of your code, including how it should deal with errors. Put differently, your Elisp will express the intent of “I want to do this, but if I get an error I want to do that instead.” There are many signals to consider, all of which come from the <code>signal</code> function. These include the symbols <code>error</code>, <code>user-error</code>, <code>args-out-of-range</code>, <code>wrong-type-argument</code>, <code>wrong-length-argument</code>, and <code>quit</code>, in addition to anything else the programmer may consider necessary. In the following code blocks, I show you how <code>condition-case</code> looks like. Remember that sometimes you do not do quoting the usual way because of how the underlying form is implemented (<a href="#h:evaluation-inside-of-a-macro-or-special-form">Evaluation inside of a macro or special form</a>). The example I am using is the same I had for <code>unwind-protect</code>.
</p>

<div>
<pre>(defun my-prompt-with-temporary-highlight-and-signal-checks ()
  "Ask for confirmation and highlight all instances of a regexp while waiting."
  (let ((regexp "(defun"))
    (condition-case nil
        (progn
          (highlight-regexp regexp)
          (if (y-or-n-p "Should we proceed or not? ")
              (user-error "You have decided to proceed; but we need to return a `user-error'")
            (error "You prefer not to continue; but we need to return an `error'")))
      (:success
       (unhighlight-regexp regexp)
       (message "No errors, but still need to unwind what we did, plus whatever else we want here"))
      (quit
       (unhighlight-regexp regexp)
       (message "This is our response to the user aborting the prompt"))
      (user-error
       (unhighlight-regexp regexp)
       (message "This is our response to the `user-error' signal"))
      (error
       (unhighlight-regexp regexp)
       (message "This is our response to the `error' signal")))))
</pre>
</div>

<p>
The above function illustrates both the aforementioned concept of unwinding and the mechanics of handling signals. The abstract structure of <code>condition-case</code> looks to me like an amalgamation of <code>let</code>, <code>unwind-protect</code>, and <code>cond</code>. These conditions may include the special handler of <code>:success</code>, as I show there. Granted, the code I wrote will never lead to that specific success case, though you can modify what happens after the prompt to, say, call <code>message</code> instead of the <code>user-error</code> function, which will then count as a successful conclusion. Otherwise, I think the expressions I wrote tell you exactly how this program responds to the signals it receives.
</p>

<p>
What I have not covered yet, is the aspect of <code>condition-case</code> that is like the <code>let</code>, namely, how it binds the error data to a variable within this scope. In my implementation above, it is the <code>nil</code> you see there, meaning that I choose not to perform such a binding, as I have no use for its data. Below I decide to use it, just for the sake of demonstration.
</p>

<div>
<pre>(defun my-prompt-with-temporary-highlight-and-signal-checks-with-error-report ()
  "Ask for confirmation and highlight all instances of a regexp while waiting."
  (let ((regexp "(defun"))
    (condition-case error-data-i-got
        (progn
          (highlight-regexp regexp)
          (if (y-or-n-p "Should we proceed or not? ")
              (user-error "You have decided to proceed; but we need to return a `user-error'")
            (error "You prefer not to continue; but we need to return an `error'")))
      (:success
       (unhighlight-regexp regexp)
       (message "No errors, but still need to unwind what we did, plus whatever else we want here")
       (message "The error is `%s' and its data is `%S'" (car error-data-i-got) (cdr error-data-i-got)))
      (quit
       (unhighlight-regexp regexp)
       (message "This is our response to the user aborting the prompt")
       (message "The error is `%s' and its data is `%S'" (car error-data-i-got) (cdr error-data-i-got)))
      (user-error
       (unhighlight-regexp regexp)
       (message "This is our response to the `user-error' signal")
       (message "The error is `%s' and its data is `%S'" (car error-data-i-got) (cdr error-data-i-got)))
      (error
       (unhighlight-regexp regexp)
       (message "This is our response to the `error' signal")
       (message "The error is `%s' and its data is `%S'" (car error-data-i-got) (cdr error-data-i-got))))))
</pre>
</div>

<p>
There will be times when <code>unwind-protect</code> and <code>condition-case</code> are the right tools for the job. My hope is that these examples have given you the big picture view and you are now ready to write your own programs in Emacs Lisp.
</p>
</div>
</div>
<div id="outline-container-h:when-to-use-a-named-function-or-a-lambda-function">
<h2 id="h:when-to-use-a-named-function-or-a-lambda-function"><span>16.</span> When to use a named function or a lambda function</h2>
<div id="text-h:when-to-use-a-named-function-or-a-lambda-function">
<p>
The <code>lambda</code> is an anonymous function. It stands in juxtaposition to <code>defun</code>, which defines a function with a given name. When to use one or the other is largely a matter of style. Though there are some cases where a certain approach is more appropriate. The rule of thumb is this: if you need to use the function more than once, then give it a name and then call it by its name. Otherwise, you will effectively be redefining it each time, which makes it hard for you to rewrite your program. By contrast, if the function is only relevant ad-hoc, then a <code>lambda</code> is fine.
</p>

<p>
In some cases, you will have a named function that employs a <code>lambda</code> internally. To modify one of the examples you will find in this book (<a href="#h:mapping-through-a-list-of-elements">Mapping through a list of elements</a>):
</p>

<div>
<pre>(defun my-increment-numbers-by-ten (numbers)
  "Add 10 to each number in NUMBERS and return the new list."
  (mapcar
   (lambda (number)
     (+ 10 number))
   numbers))

(my-increment-numbers-by-ten '(1 2 3))
;; =&gt; (11 12 13)
</pre>
</div>

<p>
A <code>lambda</code> inside of a named function may also be used to do something over and over again, with the help of <code>let</code>. You may, for instance, have a function that needs to greet a list of people as a side effect with <code>mapc</code> and you do not want to define the same function more than once:
</p>

<div>
<pre>(defun my-greet-teams (&amp;rest teams)
  "Say hello to each person in TEAMS and return list with all persons per team.
Each member of TEAMS is a list of strings."
  (let* ((greet-name (lambda (name)
                       (message "Hello %s" name)))
         (greet-team-and-names (lambda (team)
                                 (message "Greeting the team of `%s'..." team)
                                 (mapc greet-name team))))
    (mapcar greet-team-and-names teams)))

(my-greet-teams
 '("Pelé" "Ronaldo")
 '("Maradona" "Messi")
 '("Beckenbauer" "Neuer")
 '("Platini" "Zidane")
 '("Baresi" "Maldini")
 '("Eusebio" "Cristiano Ronaldo")
 '("Xavi" "Iniesta")
 '("Charlton" "Shearer")
 '("Puskas" "Kubala")
 '("All of the Greece Euro 2004 squad ;)"))
;; =&gt; (("Pelé" "Ronaldo") ("Maradona" "Messi") ...)
</pre>
</div>

<p>
The greetings are a side effect in this case and are available in the <code>*Messages*</code> buffer. You can quickly access that buffer with C-h e (<code>view-echo-area-messages</code>). It does not really matter what <code>my-greet-teams</code> is doing. Focus on the combination of a named function and anonymous functions inside of it.
</p>
</div>
</div>
<div id="outline-container-h:make-your-interactive-function-also-work-from-lisp-calls">
<h2 id="h:make-your-interactive-function-also-work-from-lisp-calls"><span>17.</span> Make your interactive function also work from Lisp calls</h2>
<div id="text-h:make-your-interactive-function-also-work-from-lisp-calls">
<p>
Functions can be used interactively when they are declared with the <code>interactive</code> specification. This turns them into “commands”. They can be called via their name by first doing M-x (<code>execute-extended-command</code>) and then finding the command. They may also be assigned to a key and invoked directly by pressing that key. In its simplest form, the <code>interactive</code> specification is an unquoted list like <code>(interactive)</code>. Here is a trivial example that calls <code>read-string</code> to produce a minibuffer prompt which accepts user input and returns it as a string:
</p>

<div>
<pre>(defun my-greet-person ()
  (interactive)
  (message "Hello %s" (read-string "Whom to greet? ")))
</pre>
</div>

<p>
The problem with the above implementation is that it is only useful in interactive use. If you want to issue such a greeting non-interactively through a program, you need to write another function that does practically the same thing except that it takes a <code>NAME</code> argument. Like this:
</p>

<div>
<pre>(defun my-greet-person-with-name (name)
  "Greet person with NAME."
  (message "Hello %s" name))
</pre>
</div>

<p>
You do not need to write two separate functions which practically do the same thing. Instead, you can have one function, with its parameters, which decides how to get the values of the arguments passed to it depending on if it is called interactively or programmatically. Consider this scenario:
</p>

<div>
<pre>(defun my-greet-interactive-and-non-interactive (name)
  "Greet person with NAME.
When called interactively, produce a minibuffer prompt asking for NAME.

When called from Lisp, NAME is a string."
  (interactive (list (read-string "Whom to greet? ")))
  (message "Hello %s" name))
</pre>
</div>

<p>
The documentation I wrote there tells you exactly what is happening. Though let me explain <code>interactive</code> in further detail: it takes an argument, which is a list that corresponds to the argument list of the current <code>defun</code>. In this case, the <code>defun</code> has a list of arguments that includes a single element, the <code>NAME</code>. Thus, <code>interactive</code> also has a list with one element, whose value corresponds to <code>NAME</code>. If the parameters were more than one, then the <code>interactive</code> would have to be written accordingly: each of its elements would correspond to the parameter at the same index on the list.
</p>

<p>
This list of expressions you pass to <code>interactive</code> essentially is the preparatory work that binds values to the parameters. When you call the above function interactively, you practically tell Emacs that in this case <code>NAME</code> is the return value of the call to <code>read-string</code>. For more parameters, you get the same principle but I write it down just to be clear:
</p>

<div>
<pre>(defun my-greet-with-two-parameters (name country)
  "Greet person with NAME from COUNTRY.
When called interactively, produce a minibuffer prompt asking for NAME
and then another prompt for COUNTRY.

When called from Lisp, NAME and COUNTRY are strings."
  (interactive
   (list
    (read-string "Whom to greet? ")
    (read-string "Where from? ")))
  (message "Hello %s of %s" name country))

(my-greet-with-two-parameters "Protesilaos" "Cyprus")
;; =&gt; "Hello Protesilaos of Cyprus"
</pre>
</div>

<p>
Write <code>interactive</code> specifications with care and you will end up with a rich corpus of code that is economical and flexible.
</p>
</div>
</div>
<div id="outline-container-h:copying">
<h2 id="h:copying"><span>18.</span> COPYING</h2>
<div id="text-h:copying">
<p>
Copyright (C) 2025 Protesilaos Stavrou
</p>

<blockquote>
<p>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being “A GNU Manual,” and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled “GNU Free Documentation License.”
</p>

<p>
(a) The FSF’s Back-Cover Text is: “You have the freedom to copy and
modify this GNU manual.”
</p>
</blockquote>
</div>
</div>
<div id="outline-container-h:gnu-free-documentation-license">
<h2 id="h:gnu-free-documentation-license"><span>19.</span> GNU Free Documentation License</h2>
<div id="text-h:gnu-free-documentation-license">
<pre>
                GNU Free Documentation License
                 Version 1.3, 3 November 2008


 Copyright (C) 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
     <https: fsf.org="">
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

0. PREAMBLE

The purpose of this License is to make a manual, textbook, or other
functional and useful document "free" in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

This License is a kind of "copyleft", which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.


1. APPLICABILITY AND DEFINITIONS

This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The "Document", below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as "you".  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

A "Modified Version" of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

A "Secondary Section" is a named appendix or a front-matter section of
the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

The "Invariant Sections" are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

The "Cover Texts" are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

A "Transparent" copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not "Transparent" is called "Opaque".

Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML
or XML using a publicly available DTD, and standard-conforming simple
HTML, PostScript or PDF designed for human modification.  Examples of
transparent image formats include PNG, XCF and JPG.  Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the
machine-generated HTML, PostScript or PDF produced by some word
processors for output purposes only.

The "Title Page" means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, "Title Page" means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

The "publisher" means any person or entity that distributes copies of
the Document to the public.

A section "Entitled XYZ" means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as "Acknowledgements",
"Dedications", "Endorsements", or "History".)  To "Preserve the Title"
of such a section when you modify the Document means that it remains a
section "Entitled XYZ" according to this definition.

The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

2. VERBATIM COPYING

You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no
other conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

You may also lend copies, under the same conditions stated above, and
you may publicly display copies.


3. COPYING IN QUANTITY

If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to
give them a chance to provide you with an updated version of the
Document.


4. MODIFICATIONS

You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

A. Use in the Title Page (and on the covers, if any) a title distinct
   from that of the Document, and from those of previous versions
   (which should, if there were any, be listed in the History section
   of the Document).  You may use the same title as a previous version
   if the original publisher of that version gives permission.
B. List on the Title Page, as authors, one or more persons or entities
   responsible for authorship of the modifications in the Modified
   Version, together with at least five of the principal authors of the
   Document (all of its principal authors, if it has fewer than five),
   unless they release you from this requirement.
C. State on the Title page the name of the publisher of the
   Modified Version, as the publisher.
D. Preserve all the copyright notices of the Document.
E. Add an appropriate copyright notice for your modifications
   adjacent to the other copyright notices.
F. Include, immediately after the copyright notices, a license notice
   giving the public permission to use the Modified Version under the
   terms of this License, in the form shown in the Addendum below.
G. Preserve in that license notice the full lists of Invariant Sections
   and required Cover Texts given in the Document's license notice.
H. Include an unaltered copy of this License.
I. Preserve the section Entitled "History", Preserve its Title, and add
   to it an item stating at least the title, year, new authors, and
   publisher of the Modified Version as given on the Title Page.  If
   there is no section Entitled "History" in the Document, create one
   stating the title, year, authors, and publisher of the Document as
   given on its Title Page, then add an item describing the Modified
   Version as stated in the previous sentence.
J. Preserve the network location, if any, given in the Document for
   public access to a Transparent copy of the Document, and likewise
   the network locations given in the Document for previous versions
   it was based on.  These may be placed in the "History" section.
   You may omit a network location for a work that was published at
   least four years before the Document itself, or if the original
   publisher of the version it refers to gives permission.
K. For any section Entitled "Acknowledgements" or "Dedications",
   Preserve the Title of the section, and preserve in the section all
   the substance and tone of each of the contributor acknowledgements
   and/or dedications given therein.
L. Preserve all the Invariant Sections of the Document,
   unaltered in their text and in their titles.  Section numbers
   or the equivalent are not considered part of the section titles.
M. Delete any section Entitled "Endorsements".  Such a section
   may not be included in the Modified Version.
N. Do not retitle any existing section to be Entitled "Endorsements"
   or to conflict in title with any Invariant Section.
O. Preserve any Warranty Disclaimers.

If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.

You may add a section Entitled "Endorsements", provided it contains
nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.


5. COMBINING DOCUMENTS

You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

In the combination, you must combine any sections Entitled "History"
in the various original documents, forming one section Entitled
"History"; likewise combine any sections Entitled "Acknowledgements",
and any sections Entitled "Dedications".  You must delete all sections
Entitled "Endorsements".


6. COLLECTIONS OF DOCUMENTS

You may make a collection consisting of the Document and other
documents released under this License, and replace the individual
copies of this License in the various documents with a single copy
that is included in the collection, provided that you follow the rules
of this License for verbatim copying of each of the documents in all
other respects.

You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert a
copy of this License into the extracted document, and follow this
License in all other respects regarding verbatim copying of that
document.


7. AGGREGATION WITH INDEPENDENT WORKS

A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an "aggregate" if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.


8. TRANSLATION

Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

If a section in the Document is Entitled "Acknowledgements",
"Dedications", or "History", the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.


9. TERMINATION

You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.


10. FUTURE REVISIONS OF THIS LICENSE

The Free Software Foundation may publish new, revised versions of the
GNU Free Documentation License from time to time.  Such new versions
will be similar in spirit to the present version, but may differ in
detail to address new problems or concerns.  See
https://www.gnu.org/licenses/.

Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License "or any later version" applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

11. RELICENSING

"Massive Multiauthor Collaboration Site" (or "MMC Site") means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
"Massive Multiauthor Collaboration" (or "MMC") contained in the site
means any set of copyrightable works thus published on the MMC site.

"CC-BY-SA" means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

"Incorporate" means to publish or republish a Document, in whole or in
part, as part of another Document.

An MMC is "eligible for relicensing" if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole or
in part into the MMC, (1) had no cover texts or invariant sections, and
(2) were thus incorporated prior to November 1, 2008.

The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.


ADDENDUM: How to use this License for your documents

To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

    Copyright (c)  YEAR  YOUR NAME.
    Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.3
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
    A copy of the license is included in the section entitled "GNU
    Free Documentation License".

If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the "with...Texts." line with this:

    with the Invariant Sections being LIST THEIR TITLES, with the
    Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.

If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</https:></pre>

<!--
</div>
</div>
<div id="outline-container-h:indices" class="outline-2">
<h2 id="h:indices"><span class="section-number-2">20.</span> Indices</h2>
<div class="outline-text-2" id="text-h:indices">
</div>
<div id="outline-container-h:function-index" class="outline-3">
<h3 id="h:function-index"><span class="section-number-3">20.1.</span> Function index</h3>
<div class="outline-text-3" id="text-h:function-index">
</div>
</div>
<div id="outline-container-h:variable-index" class="outline-3">
<h3 id="h:variable-index"><span class="section-number-3">20.2.</span> Variable index</h3>
<div class="outline-text-3" id="text-h:variable-index">
</div>
</div>
<div id="outline-container-h:concept-index" class="outline-3">
<h3 id="h:concept-index"><span class="section-number-3">20.3.</span> Concept index</h3>
<div class="outline-text-3" id="text-h:concept-index">
-->
</div>
</div>
</div>

	</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Apple, Nvidia, Dell, and Others Get a Tariffs Exemption Under New Rules (209 pts)]]></title>
            <link>https://www.barrons.com/articles/tariffs-exclusions-exemptions-apple-nvidia-dell-smartphones-pcs-b2e069ff</link>
            <guid>43664665</guid>
            <pubDate>Sat, 12 Apr 2025 14:26:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.barrons.com/articles/tariffs-exclusions-exemptions-apple-nvidia-dell-smartphones-pcs-b2e069ff">https://www.barrons.com/articles/tariffs-exclusions-exemptions-apple-nvidia-dell-smartphones-pcs-b2e069ff</a>, See on <a href="https://news.ycombinator.com/item?id=43664665">Hacker News</a></p>
Couldn't get https://www.barrons.com/articles/tariffs-exclusions-exemptions-apple-nvidia-dell-smartphones-pcs-b2e069ff: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA["Slow Pay, Low Pay or No Pay": Blue Cross Approved Surgeries Then Refused to Pay (160 pts)]]></title>
            <link>https://www.propublica.org/article/blue-cross-blue-shield-louisiana-insurance-lawsuit-breast-cancer-doctors</link>
            <guid>43664660</guid>
            <pubDate>Sat, 12 Apr 2025 14:25:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.propublica.org/article/blue-cross-blue-shield-louisiana-insurance-lawsuit-breast-cancer-doctors">https://www.propublica.org/article/blue-cross-blue-shield-louisiana-insurance-lawsuit-breast-cancer-doctors</a>, See on <a href="https://news.ycombinator.com/item?id=43664660">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-pp-location="article body">

                    


        
                    <div data-pp-location="top-note">
                

                                                
            <p>ProPublica is a nonprofit newsroom that investigates abuses of power. Sign up to receive <a href="https://www.propublica.org/newsletters/the-big-story?source=www.propublica.org&amp;placement=top-note&amp;region=national">our biggest stories</a> as soon as they’re published.</p>

                

            </div><!-- end .article-body__top-notes -->
        
                    

<div>
    <h3>Reporting Highlights</h3>
    <ul>
                    <li><span>Shortchanged: </span> Blue Cross Louisiana OK’d mastectomies and breast reconstructions for women with cancer but refused to pay a hospital’s full bills. For some claims, it paid nothing.</li>
            <li><span>Exceptions: </span> Blue Cross denied payments for thousands of procedures involved in breast reconstruction. But it approved special deals for treatment for executives’ wives.</li>
            <li><span>Verdict: </span> A jury found Blue Cross liable for fraud and awarded the hospital $421 million. The insurance company denied wrongdoing and has appealed.</li>
            </ul>
    <p>
        These highlights were written by the reporters and editors who worked on this story. <span id="survey-placeholder"></span>
    </p>
</div>





        
        




                    

<figure data-pp-id="1" data-pp-blocktype="embed">

    


                        
            
    
<figcaption>
    
    
    
    </figcaption>


</figure>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="2.0">On a late afternoon in November 2017, Witney Arch told her 1-1/2-year-old son to stop playing and come inside. Upset, he grabbed her right breast when she picked him up. She experienced a shock of pain but did not think it was anything serious. A week later, however, the ache had not subsided. After trips to several doctors, a biopsy revealed that Arch had early-stage breast cancer. Her surgeon told her that it was likely invasive and aggressive.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="3.0">By the end of January, she had made two critical decisions. She would get a double mastectomy. And she wanted her operation at the Center for Restorative Breast Surgery in New Orleans, a medical facility renowned for its highly specialized approach to breast cancer care and reconstruction. The two surgeons who founded it had pioneered techniques that used a woman’s own body tissue to form new breasts post mastectomy. The idea of a natural restoration appealed to Arch. “I don’t judge anybody for getting implants, especially if you’ve had cancer,” she said. “But I felt like I was taking something foreign out of my body, cancer, and I did not want to put something foreign back in.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="4.0">Arch was a 42-year-old preschool teacher for her church, with four young children, living in a suburb of New Orleans. The 1-1/2-year-old had been born with Sturge-Weber syndrome, a rare neurological disorder. Caring for him consumed her life. By nature upbeat and optimistic, Arch felt blessed that her son’s act of defiance had led to an early diagnosis. “We’re going to pray about this and we’re going to figure it out,” she told her husband.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="5.0">Arch asked her insurer, Blue Cross and Blue Shield of Louisiana, for approval to go to the center for her care, and the company granted it, a process known as prior authorization. Then, a week or so before her surgery, Arch was wrangling child care and meal plans when she got a call from the insurer. The representative on the line was trying to persuade her to have the surgery elsewhere. She urged Arch to seek a hospital that, unlike the center, was in network and charged less. “Do you realize how much this is going to cost?” Arch remembered the agent asking. Arch did not need more stress, but here it was — from her own health plan. “I feel very comfortable with my decision,” she replied. “My doctor teaches other doctors around the world how to do this.” Over the next year, Arch underwent five operations to rid herself of cancer and reconstruct her breasts.</p>
        
    
                    

<figure data-pp-id="6" data-pp-blocktype="image">

    


                    
    


    <img alt="" width="3000" height="2000" loading="lazy" js-autosizes="" src="https://img.assets-d.propublica.org/v5/images/20250212-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=d9b3c6739554731046442c6cd39c0fb2" srcset="https://img.assets-d.propublica.org/v5/images/20250212-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=267&amp;q=75&amp;w=400&amp;s=a2f3d69de164367138257dca213ac881 400w, https://img.assets-d.propublica.org/v5/images/20250212-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=d9b3c6739554731046442c6cd39c0fb2 800w, https://img.assets-d.propublica.org/v5/images/20250212-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=800&amp;q=75&amp;w=1200&amp;s=52ae76f6cefb7c9f3c150796d20b1d78 1200w, https://img.assets-d.propublica.org/v5/images/20250212-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=867&amp;q=75&amp;w=1300&amp;s=11df6d45519843240a0dce3bb2e351ef 1300w, https://img.assets-d.propublica.org/v5/images/20250212-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=967&amp;q=75&amp;w=1450&amp;s=0216175c1ece258d481c21787a514d58 1450w, https://img.assets-d.propublica.org/v5/images/20250212-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1067&amp;q=75&amp;w=1600&amp;s=e7fb8ae67ad8e8d76cc76ee3732caeb3 1600w, https://img.assets-d.propublica.org/v5/images/20250212-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1333&amp;q=75&amp;w=2000&amp;s=aea81806a739cb5826602f1fd9186e45 2000w">

            
    
<figcaption>
        <span>Witney Arch received authorization from Blue Cross and Blue Shield of Louisiana for her mastectomy and breast restoration, but the insurer did not pay the full bill from the Center for Restorative Breast Surgery.</span>
    
        <span>
        <span>Credit: </span>
        Daniella Zalcman for ProPublica
    </span>
    
    
    </figcaption>

</figure>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="7.0">Arch did not know it at the time, but her surgery would become evidence in a long-running legal fight between the breast center’s founders, surgeons Frank DellaCroce and Scott Sullivan, and Blue Cross, Louisiana’s biggest health insurance company, with an estimated two-thirds share of the market. DellaCroce and Sullivan had repeatedly sued the insurer, alleging that it granted approvals for surgery but then denied payments or paid only a fraction of patients’ bills. They pointed to calls like the one Arch received as proof of the company’s effort to drive away patients. The aggressive legal attack, they knew, was fraught. Litigation against the $3.4 billion company would take a long time and a lot of money. The chances of winning were slight. “You fight dragons at great peril,” DellaCroce would tell friends. But this September, after 18 years and several defeats in court, jurors found Blue Cross liable for fraud. They awarded the center $421 million — one of the largest verdicts ever to a single medical practice outside of a class-action lawsuit. <a href="https://www.documentcloud.org/documents/25893394-statement-from-blue-cross-and-blue-shield-of-louisiana/">In a statement</a>, Blue Cross said it “disagrees with the jury’s decision, which we believe was wrong on the facts and the law. We have filed an appeal and expect to be successful.”</p>
        
    
                        
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="9.0">Frustration with insurers is at an all-time high. The December fatal shooting of United Healthcare CEO Brian Thompson allegedly by Luigi Mangione serves as an extreme and tragic example. Doctors and insurers are locked into a perpetual conflict over health care costs, with patients caught in the middle. Doctors accuse insurance plans of blocking payments for health care treatments that can save the patients’ lives. Insurance companies insist they shouldn’t pay for procedures that they say are unnecessary or overpriced. It is easy to emerge from an examination of the American health care system with a cynicism that both sides are broken and corrupt.</p>
        
    
                    
    
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="11.0">However, interviews with scores of doctors, patients and insurance executives, as well as reviews of internal documents, regulatory filings and academic studies, reveal a fundamental truth: The two sides are not evenly matched. Insurance companies are players in the fight over money, and they are also the referees. Insurers produce their own guidelines to determine whether to pay claims. When a doctor appeals a denial, insurers make all the initial decisions. In legal settings, insurers are often given favorable standing in their ability to set what conditions they are required to cover. Federal and state insurance regulators lack the resources to pursue individual complaints against multibillion-dollar companies. Six major insurers, which include some of the nation’s largest companies, cover half of all Americans. They are pitted against tens of thousands of doctors’ practices and large hospital chains.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="13.0">The Blue Cross trial provides a rare opportunity to expose in detail the ways that health insurance companies wield power over doctors and their patients. Blue Cross executives testified that the breast center charged too much money — sometimes more than $180,000 for an operation. The center, they said, deserved special attention because it had a history of questionable charges. But the insurer’s defense went even further, to the very meaning of “prior authorization,” which it had granted women like Arch to pursue surgery. The authorization, they said in court, recognized that a procedure was medically necessary, but it also contained a clause that it was “<em>not</em> a guarantee of payment.” Blue Cross was not obliged to pay the center anything, top executives testified. “Let me be clear: The authorization never says we’re going to pay you,” said Steven Udvarhelyi, who was the CEO for the insurer from 2016 to 2024, <a href="https://www.documentcloud.org/documents/25882446-steven-udvarhelyi-deposition/#document/p1/a2630959">in a deposition</a>. “That’s why there’s a disclaimer.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="14.0">From 2015 through 2023, the Baton Rouge-based insurer paid, on average, less than 9% of the charges billed by the breast center for more than 7,800 individual medical procedures — even though it had authorized all of them. Thousands of such claims were never paid at all, according to court records. Testimony revealed that the health plan never considered thousands of appeals filed by the center. Corporate documents showed Blue Cross executives had set up secret processes for approving operations and reimbursing the clinic and its doctors that resulted in reduced fees and payment delays. One lucrative strategy: A national-level policy allowed Blue Cross Louisiana to take a cut of any savings it achieved in paying the breast center on behalf of patients covered by out-of-state Blue Cross companies, meaning the less the insurer paid out, the more it earned.</p>
        
    
                    <figure data-pp-id="15" data-pp-blocktype="pull-quote">

    <blockquote>
        <p>Let me be clear: The authorization never says we’re going to pay you. That’s why there’s a disclaimer.</p>

    </blockquote>
        <figcaption>
        —Steven Udvarhelyi, former Blue Cross and Blue Shield of Louisiana CEO

    </figcaption>
    
</figure>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="16.0">In Sullivan’s words, the insurer was hypocritical, “morally bankrupt.” Blue Cross had stranded many of the center’s patients with high bills, amounts that it had absorbed over the years. On several occasions, though, Blue Cross executives had signed special one-time deals with the center, known as single case agreements, to pay for their wives’ cancer treatment. To Sullivan, it seemed the insurer was willing to pay the center when patients had connections but would fight when patients did not.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="17.0">Blue Cross declined to comment on any individual cases but said in a statement that single case agreements were “common in the industry” and were available to all members when needed to access out-of-network providers.</p>
        
    
                    

<figure data-pp-id="18" data-pp-blocktype="image">

    


                    
    


    <img alt="" width="3000" height="2000" loading="lazy" js-autosizes="" src="https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-017_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=5478a63f7dce159592f2fdff70bd53b5" srcset="https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-017_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=267&amp;q=75&amp;w=400&amp;s=d2da40b7bf2879b9dbec724de1c90384 400w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-017_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=5478a63f7dce159592f2fdff70bd53b5 800w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-017_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=800&amp;q=75&amp;w=1200&amp;s=615d2c3e71985994a86da1aef52d8f7e 1200w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-017_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=867&amp;q=75&amp;w=1300&amp;s=a742ecfd78eb703ecb3b38b46c0a9ff5 1300w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-017_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=967&amp;q=75&amp;w=1450&amp;s=cdf89671325ba0f4bd54380cf22a86e5 1450w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-017_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1067&amp;q=75&amp;w=1600&amp;s=553d75db6fc2164cd50562e46f48a58d 1600w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-017_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1333&amp;q=75&amp;w=2000&amp;s=74199eabf4f797f7d0cac8ee28ca64eb 2000w">

            
    
<figcaption>
        <span>Dr. Scott Sullivan, left, and Dr. Frank DellaCroce, the founding surgeons of the Center for Restorative Breast Surgery and St. Charles Surgical Hospital</span>
    
        <span>
        <span>Credit: </span>
        Daniella Zalcman for ProPublica
    </span>
    
    
    </figcaption>

</figure>

        
    
                    <p><span>Chapter 1</span></p><h3 data-pp-id="19" data-pp-blocktype="heading" id="the-center">
    The Center
</h3>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="20.0">Nobody would take <a href="https://www.breastcenter.com/">the breast center and its adjoining hospital</a> as an ordinary medical establishment. The two facilities take up a city block along St. Charles Avenue, the thoroughfare famous for its streetcars, Mardi Gras parades and Queen Anne mansions. Patients access the complex — created by merging a former law office, funeral home, car dealership and Dunkin’ Donuts — by driving around back where a porte cochere leads into a soaring atrium. Light pours in through windows set in the high ceiling. Arrangements of white orchids are scattered among comfortable couches and chairs. Here, women consult with doctors to plan their treatment. Surgeries are performed at the 39-bed hospital, which has an Icee machine in a family room. New-age music plays softly throughout the building. Rooms are designed to be as homey as possible, with medical gear hidden away and seascapes by a local artist hanging on the wall. One patient’s husband referred to it as a “spa-spital.”</p>
        
    
                        
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="22.0">The idea of combining the luxury feel of an upscale plastic surgery practice with the mission-driven zeal of a medical clinic came to DellaCroce and Sullivan while they were young surgeons. The two grew up in Louisiana. Sullivan spent much of his childhood in Mandeville, a suburb of New Orleans on the north side of Lake Ponchartrain, his dad employed in the oil and gas industry. His mother wanted him to be a priest or a doctor. “I definitely was not going to become a priest,” he said. DellaCroce’s father worked at the paper mill in West Monroe in the state’s northern neck. His mother, a nurse, gave him an appreciation for medicine as a career that was “meaningful and challenging.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="23.0">They became friends while working at the Louisiana State University medical center, where they earned the nickname “the Sushi Brothers” for their favorite lunch. They were drawn to microsurgery and breast reconstruction because it was an emerging field that was innovating and improving care. Both men became board-certified in plastic surgery. Sullivan, 60, is the hard-charging businessman, stocky, direct and blunt. DellaCroce, 58, with a ponytail, goatee and soft drawl, is more the diplomat, patient and cerebral. The pair have lectured around the world and written numerous medical journal articles.</p>
        
    
                    

<figure data-pp-id="24" data-pp-blocktype="image">

    


                    
    


    <img alt="" width="3000" height="2000" loading="lazy" js-autosizes="" src="https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-029_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=174b02e34a3bc96953cf1ecc9cdc177a" srcset="https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-029_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=267&amp;q=75&amp;w=400&amp;s=9377bbc7c9ec613ef5be734d1b3794ff 400w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-029_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=174b02e34a3bc96953cf1ecc9cdc177a 800w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-029_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=800&amp;q=75&amp;w=1200&amp;s=c9cbad3a014b8a97e1ce22a669950d45 1200w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-029_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=867&amp;q=75&amp;w=1300&amp;s=3896a57c2e26720feb9cd902d9a24301 1300w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-029_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=967&amp;q=75&amp;w=1450&amp;s=7831862bd1926415492b611e12901658 1450w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-029_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1067&amp;q=75&amp;w=1600&amp;s=9d4cd2c147cbe231f747539c1d866201 1600w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-029_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1333&amp;q=75&amp;w=2000&amp;s=0e1e233c04b57a686695f31ca8281432 2000w">

            
    
<figcaption>
        <span>A patient room in the St. Charles Surgical Hospital in New Orleans</span>
    
        <span>
        <span>Credit: </span>
        Daniella Zalcman for ProPublica
    </span>
    
    
    </figcaption>

</figure>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="25.0">They opened their first office in 2003 in a single room rented from a fellow doctor at what was then known as Memorial Medical Center, the hulking private hospital in New Orleans. They performed operations at facilities throughout the region but found that most gave little consideration to their patients’ comfort. They wanted to build a different kind of hospital. “Can we give them that little bit of extra without breaking the budget to make the experience less awful? Can’t make it great, but can you make it less awful?” DellaCroce explained. “Can you attend to the human side of this patient and give them the added value of peace and confidence?” Hurricane Katrina set back their construction plans, and the new edifice, named the St. Charles Surgical Hospital, did not open its doors until 2009. It boasts of being the only hospital in the country devoted solely to care for breast cancer patients who have received mastectomies. The center does not provide radiation or chemotherapy treatments. The majority of patients come from out of state.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="26.0">Women seeking to have their breasts restored after a mastectomy face two paths. Some choose a relatively straightforward surgical procedure using implants filled with silicon or another gel. The center specializes in the other option, what’s known as autologous tissue reconstruction, where a woman’s own fat is taken from one part of the body, like the bottom or the stomach, and used to rebuild the breast. The procedure requires a longer recovery time, but the new breasts become part of the body.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="27.0">The transplant surgery is lengthy and complex. Operations can last up to 12 hours with big medical teams involved. One surgeon performs the mastectomy while another creates a new breast by knitting together layers of fat and tissue. Concentration is intense. The surgeons stare through glasses with microscopes to connect new blood vessels with a needle that’s thinner than an eyelash, using thread less than half the width of a human hair. DellaCroce and Sullivan invented techniques, for example, allowing tissue to be taken from multiple sites when a woman did not have enough fat in one part of her body for a full restoration.</p>
        
    
                    

<figure data-pp-id="28" data-pp-blocktype="image">

    


                    
    


    <img alt="" width="3000" height="2000" loading="lazy" js-autosizes="" src="https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-032_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=95f690320a087a34962f33073241962d" srcset="https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-032_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=267&amp;q=75&amp;w=400&amp;s=868d35917a841ea74e1e30ce7fd06f3c 400w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-032_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=95f690320a087a34962f33073241962d 800w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-032_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=800&amp;q=75&amp;w=1200&amp;s=6e3ca99f0bd64e64c5de2ac3c418bb95 1200w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-032_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=867&amp;q=75&amp;w=1300&amp;s=01131df2905fc8401f16f5635110a354 1300w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-032_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=967&amp;q=75&amp;w=1450&amp;s=3a4a2a1022f02d610d1b3b28b54fc40e 1450w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-032_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1067&amp;q=75&amp;w=1600&amp;s=68ccc24d7e02ac27dde87ec3376371f2 1600w, https://img.assets-d.propublica.org/v5/images/20250122-Zalcman-Insurance-Denials-Sequence-032_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1333&amp;q=75&amp;w=2000&amp;s=63023591bcf90aac5e994f1aabb48ad5 2000w">

            
    
<figcaption>
        <span>Sullivan operates on a patient at St. Charles Surgical Hospital.</span>
    
        <span>
        <span>Credit: </span>
        Daniella Zalcman for ProPublica
    </span>
    
    
    </figcaption>

</figure>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="29.0">One afternoon last fall, DellaCroce strode into a cavernous operating room to check on a patient. On the table in front of him, a woman lay covered in curtains of blue surgical cloth, only her torso exposed. Earlier in the day, a surgical oncologist had removed her right breast as part of a mastectomy to treat her cancer. Later, another surgeon had taken flaps of fat from her stomach and interlaced them with blood vessels to create a new breast to replace the lost one. Now, in the fifth hour of surgery, a physician’s assistant leaned over her midsection, closing an incision along her side with some final stitches. Nurses hurried around the space, preparing to wrap up the operation. Paul Simon’s “<a href="https://www.youtube.com/watch?v=uq-gYOrU8bA">You Can Call Me Al</a>” played in the background. The smell of burnt flesh hung in the air. A blue light signaled that the new arteries were successfully pumping blood. “Wow, that woman looks really good,” DellaCroce told the physician’s assistant. “Nice job.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="30.0">There is no denying that the center’s high-end treatment means high costs. The median charge for an operation and hospital stay is about $165,000. DellaCroce and Sullivan hired consultants to review other well-regarded practices, who advised them their prices were competitive with their peers. “We weren’t asking to be paid Lebron James, best of the best, even though we feel we’re in the top 1 or 2% of the country,” Sullivan said. “We just wanted something fair.”</p>
        
    
                    <p><span>Chapter 2</span></p><h3 data-pp-id="31" data-pp-blocktype="heading" id="blue-cross-and-blue-shield">
    Blue Cross and Blue Shield
</h3>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="32.0">It is one of the quirks of the American health care system that insurers almost never pay the prices for procedures demanded by doctors and hospitals.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="33.0">To understand why requires a tour of the grand bargain at the heart of the health insurance system. Insurance companies negotiate with hospitals and doctors to discount reimbursements on medical procedures, like office visits or MRI scans. Providers who sign these contracts are in network. Insurance companies like in-network doctors because they can budget for health expenses and set premiums accordingly. Doctors and hospitals agree to be in network because they get a steady stream of insured patients.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="34.0">DellaCroce and Sullivan held contracts with insurers that resulted in average payments to the center’s doctors in the $20,000 to $30,000 range. But DellaCroce and Sullivan never came to an agreement with Blue Cross. That made them an exception in Louisiana — the insurer is so dominant that 97% of local physicians and hospitals are in network. DellaCroce and Sullivan said the company was not offering them enough money — in some cases not even enough to cover the cost of the surgeries, they argued in court documents. The doctors and their hospital remained out of network, meaning they charged Blue Cross the full price for their procedures.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="35.0">Such charges are controversial. Insurance companies and many health experts say they are too often inflated and untethered from actual costs. Physicians and hospitals say their fees are justified, reflecting the true price of medical care. In the end, insurers — especially in states like Louisiana, with few competitors — use their market power in negotiations to set reimbursements at what they want to pay, not what doctors charge.</p>
        
    
                        
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="37.0">At Blue Cross, Dwight Brower was charged with reviewing the bills from the breast center. He had worked as a physician at a small family practice in Baton Rouge and then at a local hospital before joining Blue Cross as a medical director. He helped oversee prior authorizations. While many patients assume that an approval means an insurer will pay for an operation, it is simply a recognition that a procedure is medically necessary. Federal law mandates that private insurers cover breast restorations for women who undergo mastectomies because of cancer or genetic risk. And patients, in general, are allowed to choose their own doctors.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="38.0">However, since the center was out of network and had no contract with the insurer, Blue Cross determined how much it would pay for the treatment, and Brower believed that the breast center’s bills were exorbitant. “I did not think that they were reasonable,” <a href="https://www.documentcloud.org/documents/25537636-2024-09-13-st-charles-20240913-am/?mode=document#document/p47/a2630973">he would later testify</a>. Surgeons doing lung transplants or brain surgery rarely billed Blue Cross more than $50,000 for their work. Why should DellaCroce and Sullivan get so much more? “Don’t get me wrong. The surgeons at the center are extremely skilled,” he acknowledged. The operations were often lengthy. “But so are open-heart surgeries,” he said. “Relative to some of the other extremely complicated surgeries done by other surgeons in other areas of the body, it just seemed like their fee schedule was extremely high.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="39.0">Blue Cross Louisiana executives testified that they did not even consider doctors’ invoices when making decisions on what to reimburse because such charges were “unregulated” and “nonstandard.” Instead, they paid “<a href="https://www.documentcloud.org/documents/25555648-2017-12-04-blue-cross-blue-shield-payment-for-out-of-network-providers/">an amount we establish</a>” — unless the doctor’s bill was cheaper. In the end, the insurer said it settled on reimbursing the breast center about the same as in-network doctors performing similar operations, even though DellaCroce and Sullivan did not benefit from having patients referred to them. In practice, that meant the insurer paid out a fraction of the breast center’s bills. Of the 7,837 medical procedures in dispute in the lawsuit, involving 1,680 patients, Blue Cross paid about $43 million on invoices totaling $500 million. Some 60% of the claims weren’t reimbursed at all. The difference between the bill and the payment could be striking. For example, in the case of Arch, Blue Cross paid $8,580 out of $102,722 for one operation. For another, it paid $3,190 out of $34,975.</p>
        
    
                    <figure data-pp-id="40" data-pp-blocktype="pull-quote">

    <blockquote>
        <p>Fundamentally, I think their problem was that we were doctors who had control. That was regarded as a threat.</p>

    </blockquote>
        <figcaption>
        —Dr. Frank DellaCroce, Center for Restorative Breast Surgery co-founder

    </figcaption>
    
</figure>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="41.0">Executives said the Blue Cross reimbursements were fair, designed to keep premiums low for the nearly 2 million Louisianans who depended on the insurer to cover their health care.&nbsp;Paying the breast center’s full fees would add to its customers’ burden, they said. “If we were to just agree to any rates or any prices set by physicians or any providers, it would cause cost to be exorbitantly high for both the plan and for members particularly, because we wouldn’t be able to forecast or make sure those plans are actually sound,” <a href="https://www.documentcloud.org/documents/25537645-208c471/#document/p5/a2630982">said</a> Curtis Anders, the vice president of provider networks for Blue Cross. “Premiums would increase.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="42.0">For many out-of-network doctors, payments lower than their invoices are an infuriating part of doing business. They absorb the costs, or pass them on to their patients, a practice known as balance billing that can result in medical debt. DellaCroce and Sullivan were the rare physicians with the tenacity to fight. The center collected money from both insurers and patients — but it carried the unpaid portion of invoices on its books. That amount grew every year as it battled Blue Cross.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="43.0">DellaCroce and Sullivan were convinced that Blue Cross had singled them out for their obstreperousness, but they had no proof. Then, during a phone call one day, an employee for the center was talking to a Blue Cross representative to obtain a prior authorization. The representative let slip that the request required special handling. The breast center’s doctors were flagged on an internal roster. It was called the targeted list.</p>
        
    
                    <p><span>Chapter 3</span></p><h3 data-pp-id="44" data-pp-blocktype="heading" id="discoveries">
    Discoveries
</h3>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="45.0">On Dec. 8, 2023, several dozen attorneys and paralegals from Chehardy Sherman Williams, one of New Orleans’ top law firms, were celebrating their annual holiday party. They had gathered in a private dining room with gilded mirrors and shimmering chandeliers at Arnaud’s restaurant, a bastion of Creole cuisine in the heart of the French Quarter. The waiters served shrimp remoulade, prime rib and turtle soup. Small talk filled the air.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="46.0">Suddenly, several attorneys’ cellphones buzzed as they all received the same email, a message from the lawyers for Blue Cross. It contained discovery for the case, more than 42,000 pages of internal documents, emails and policies. Matthew Sherman, one of the attorneys representing the center, turned to a colleague. “Can you believe this?” he asked. It was like something from a John Grisham novel, the kind of thing he and his friends had joked about at law school, a document dump at Christmas time. By long tradition, many of New Orleans’ biggest law firms hold their holiday parties on the same Friday afternoon in December. Afterward, rival attorneys from around town gather for drinks under a flag of truce at a local bar. Sherman realized there would be no afterparty this year. Nor much of a holiday vacation.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="47.0">The delivery of the documents was a Christmas gift nearly 20 years in the making. DellaCroce and Sullivan’s <a href="https://www.documentcloud.org/documents/25883705-2006-6487-crbs-v-bcbs-early-lawsuit/">first lawsuits</a> against Blue Cross, involving 88 breach-of-contract claims filed in a Louisiana civil court beginning in 2006, were dismissed because of a federal court ruling regarding jurisdiction. A <a href="https://www.documentcloud.org/documents/25883734-2010-04-06-2010-03356-crbs-v-bcbsla-complaint/">second lawsuit</a>, which lasted from 2010 through 2017, resulted in limited discovery and a two-day trial in federal court. Jurors found that Blue Cross had failed to tell the center how much it would pay for procedures, but they also ruled the center had not been financially harmed. A judge dismissed the remaining claims.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="48.0">DellaCroce and Sullivan launched their <a href="https://www.documentcloud.org/documents/25537857-2019-10-10-3rd-amended-complaint/">third lawsuit</a> in February 2017 with a novel legal theory: They accused Blue Cross of fraud. They contended that for years the insurer had issued prior authorizations without the intention of paying the actual bills. Their lawyers had sought the targeted list during discovery to help prove the case. Blue Cross denied it existed.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="49.0">But now, as Sherman and fellow attorney Patrick Follette began poring over the thousands of documents, they came upon a spreadsheet that said “<a href="https://www.documentcloud.org/documents/25537631-2024-09-06-am-st-charles-surgical-20240906-am/?mode=document#document/p56/a2624531">Targeted Provider List</a>.” The first names on the list were DellaCroce and Sullivan. It was labeled “confidential” and dated June 2007 — about a year after the pair had filed their first lawsuit against Blue Cross alleging nonpayment. More digging turned up other documents. There was a “blocked” list that also featured the two doctors.</p>
        
    
                        
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="51.0">A corporate policy document provided what DellaCroce and Sullivan considered the most revealing explanation for Blue Cross’ financial motivation. Blue Cross insurers are independent companies that operate under a common set of rules, similar to franchisees in a fast-food chain. When a person covered by Blue Cross in their home state receives treatment in another state, the Blue Cross where the treatment occurs pays the provider and then recoups the cost from the home-state plan. What the attorneys discovered was that Blue Cross Louisiana would receive a share of any savings it could generate for the home-state plan. Say, for instance, Blue Cross Alabama was facing a bill of $5,000 for a procedure. If Blue Cross Louisiana instead paid $1,000, it saved the Alabama plan $4,000. The policy allowed Blue Cross Louisiana <a href="https://www.documentcloud.org/documents/25537637-20736f1/?mode=document#document/p36/a2631133">to earn 16% of the savings</a> — in this scenario, $640.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="52.0">For DellaCroce and Sullivan, the revelations cemented their belief that Blue Cross was a bad corporate actor more interested in power and control than health care. The percentage fee incentivized the insurer to pay the doctors as little as possible. The bigger the savings, the more Blue Cross made. “It’s win-win,” DellaCroce said. “That’s their pay day.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="53.0">As the trial approached, Blue Cross attempted to settle the case. DellaCroce and Sullivan refused the offer as too low.</p>
        
    
                    

<figure data-pp-id="54" data-pp-blocktype="image">

    


                    
    


    <img alt="" width="3000" height="2000" loading="lazy" js-autosizes="" src="https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=d3ffc06f375bb3b7fb9223511311cf95" srcset="https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=267&amp;q=75&amp;w=400&amp;s=91fa7636a1a7bd9bbaa1f903c790d8a2 400w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=d3ffc06f375bb3b7fb9223511311cf95 800w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=800&amp;q=75&amp;w=1200&amp;s=8c6c0a411805309f0d54fc4e0a128e6c 1200w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=867&amp;q=75&amp;w=1300&amp;s=894966614600d619cc84ec1b65de42bb 1300w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=967&amp;q=75&amp;w=1450&amp;s=d8a0c3c15c60d52a0c5b87b93cda0ee8 1450w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1067&amp;q=75&amp;w=1600&amp;s=d8a0c693f5af6f61c9342cbb2156cf09 1600w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-011_preview_maxWidth_3000_maxHeight_3000_ppi_72_embedColorProfile_true_quality_95.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1333&amp;q=75&amp;w=2000&amp;s=f19d2f994f7163f1eca809eafae85c4f 2000w">

            
    
<figcaption>
        <span>James Williams, left, and Matthew Sherman, the lawyers who represented DellaCroce and Sullivan in their suit against Blue Cross and Blue Shield of Louisiana</span>
    
        <span>
        <span>Credit: </span>
        Daniella Zalcman for ProPublica
    </span>
    
    
    </figcaption>

</figure>

        
    
                    <p><span>Chapter 4</span></p><h3 data-pp-id="55" data-pp-blocktype="heading" id="the-trial">
    The Trial
</h3>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="56.0">On the afternoon of Sept. 5, 2024, the case — St. Charles Surgical Hospital, L.L.C. and Center for Restorative Breast Surgery, L.L.C. v. Louisiana Health Service &amp; Indemnity Company D/B/A Blue Cross/Blue Shield of Louisiana, Blue Cross &amp; Blue Shield of Louisiana, Inc. and HMO Louisiana, Inc. — opened in Division C of the Orleans Parish Civil District Court, a high-ceilinged room with dark brown benches and tables, fake marble columns and fluorescent lights. James Williams, the chief litigator for the hospital, had already impressed the 45 potential jurors by memorizing all their names and backgrounds during jury selection. Now, he stood up and placed a football on the plaintiff’s table in front of the 12 chosen to try the case, which included a third grade teacher, a movie stunt double and a hotel manager. He warned them that they would hear a lot of “insurance talk” from Blue Cross. “I’m going to ask you, ladies and gentlemen on the jury, keep your eye on the ball. Keep your eye on what this case is about,” Williams told them. “If they start saying things like, ‘Well, oh, we paid them what we thought was fair, 9%,’ keep your eye on the ball, right?”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="57.0">Over 10 days — interrupted by a two-day break to allow a hurricane to pass across Louisiana — Williams made his case that Blue Cross had defrauded his clients by making promises to pay but failing to deliver.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="58.0">Much of Blue Cross’ defense had relied on the notice that a prior authorization was no guarantee of payment. The insurer had not committed fraud, it said, since it never explicitly promised the center to reimburse anything. Udvarhelyi, the former CEO, had insisted on that. But on the stand, Blue Cross witnesses provided a more nuanced explanation. They acknowledged that the disclaimer was not meant as a general excuse to free the company from paying bills. A prior authorization “usually” resulted in a payment, testified Brower, who reviewed the center’s bills. He said that the notice was intended for specific situations. For instance, Blue Cross would not cover a woman who dropped out of her insurance before the operation. Nor would it pay anything if a patient had not met her deductible. But otherwise, Brower said, Blue Cross intended to compensate for a procedure that it had authorized. “It’s inappropriate for us as a company to approve a code and then turn around and deny it,” <a href="https://www.documentcloud.org/documents/25537637-20736f1/?mode=document#document/p13/a2624462">Brower said</a>.</p>
        
    
                    

<figure data-pp-id="59" data-pp-blocktype="image">

    


                    
    


    <img alt="" width="3000" height="2000" loading="lazy" js-autosizes="" src="https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-022_maxWidth_3000_maxHeight_3000_ppi_72_quality_95_embedColorProfile_true.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=2e048152efb16bfc48351754778160b8" srcset="https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-022_maxWidth_3000_maxHeight_3000_ppi_72_quality_95_embedColorProfile_true.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=267&amp;q=75&amp;w=400&amp;s=f78baa175bfe656474e4cdc97d167397 400w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-022_maxWidth_3000_maxHeight_3000_ppi_72_quality_95_embedColorProfile_true.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=533&amp;q=75&amp;w=800&amp;s=2e048152efb16bfc48351754778160b8 800w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-022_maxWidth_3000_maxHeight_3000_ppi_72_quality_95_embedColorProfile_true.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=800&amp;q=75&amp;w=1200&amp;s=03ba3082b2ff7342cd1d2219af825316 1200w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-022_maxWidth_3000_maxHeight_3000_ppi_72_quality_95_embedColorProfile_true.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=867&amp;q=75&amp;w=1300&amp;s=0298f851424932f63367c103df49df4a 1300w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-022_maxWidth_3000_maxHeight_3000_ppi_72_quality_95_embedColorProfile_true.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=967&amp;q=75&amp;w=1450&amp;s=dcee1cca8016f1524b0aad10e5d9ccdb 1450w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-022_maxWidth_3000_maxHeight_3000_ppi_72_quality_95_embedColorProfile_true.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1067&amp;q=75&amp;w=1600&amp;s=555094ff374ca0e9b11f47d0254253f0 1600w, https://img.assets-d.propublica.org/v5/images/20250205-Zalcman-Insurance-Denials-022_maxWidth_3000_maxHeight_3000_ppi_72_quality_95_embedColorProfile_true.jpg?crop=focalpoint&amp;fit=crop&amp;fm=webp&amp;fp-x=0.5&amp;fp-y=0.5&amp;h=1333&amp;q=75&amp;w=2000&amp;s=789452952ae9948ed4ff3ef0965ae013 2000w">

            
    
<figcaption>
        <span>During the trial, Williams told jurors to “keep your eye on the ball.”</span>
    
        <span>
        <span>Credit: </span>
        Daniella Zalcman for ProPublica
    </span>
    
    
    </figcaption>

</figure>

        
    
                    
<p data-pp-blocktype="copy" data-pp-id="60.0">Over the years, the center had appealed thousands of reimbursements for being too low. It hired additional employees to manage the paperwork. At the trial, Blue Cross revealed that it had never considered any of the appeals — nor had it ever told the center that they were pointless. “An appeal is not available to review an underpayment,” <a href="https://www.documentcloud.org/documents/25537645-208c471/#document/p37/a2630979">acknowledged</a> Paula Shepherd, a Blue Cross executive vice president. The insurer simply issued an edict — the payment was correct.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="61.0">This was the core of the case. The insurer set the rules. The insurer set the prices. Doctors could appeal to a state insurance regulator. But if that failed, and it often did, the only recourse was a long, costly lawsuit.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="62.0">Williams <a href="https://www.documentcloud.org/documents/25537630-2024-02/?mode=document#document/p27/a2631151">summed up</a> for the jury the center’s treatment at the hands of Blue Cross: “Our payments are slow pay, low pay or no pay.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="63.0">In countering those arguments, Blue Cross witnesses explained that the insurer was committed to paying for Louisianans’ health care and keeping costs low. As a nonprofit, it directed any excess revenue from operations back into the business. (Udvarhelyi, the CEO, did acknowledge that his salary, over $1 million, included bonuses that depended on hitting revenue targets and increasing membership.)</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="64.0">Brian West, a Blue Cross executive who monitored payments, <a href="https://www.documentcloud.org/documents/25537635-2024-09-10-st-charles-20240910/?mode=document#document/p14/a2631153">said the center</a> had engaged in “egregious” billing practices. “They are bad actors in the billing world,” he said. But company witnesses offered only a handful of examples. Sometimes the center mistakenly coded its bills in a way that appeared to charge for four separate breast reconstructions in a single operation. In other cases, the center asked for payment for two surgeons in the room at the same time. But Blue Cross, following Medicare guidelines, would pay two surgeons only 20% more than the reimbursement for a single surgeon.</p>
        
    
                    <figure data-pp-id="65" data-pp-blocktype="pull-quote">

    <blockquote>
        <p>An appeal is not available to review an underpayment.</p>

    </blockquote>
        <figcaption>
        —Paula Shepherd, Blue Cross Louisiana executive vice president

    </figcaption>
    
</figure>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="66.0">Blue Cross did not accuse the center of any intentional miscoding — but the sloppy billing led to additional scrutiny, the company’s witnesses said. The targeted list, a witness testified, had been created especially for the center, requiring all prior authorization requests to bypass normal routes for a special review by company doctors. The blocked list meant that each bill from the center received a manual scrub by payment specialists before reimbursement. <a href="https://www.documentcloud.org/documents/25537635-2024-09-10-st-charles-20240910/#document/p17/a2631155">Blue Cross acknowledged</a> the careful checking often resulted in the need for more information from the center, which could result in slower processing of claims. But the lists, executives insisted, were not designed to reduce payments. “Basically, no harm was done,” <a href="https://www.documentcloud.org/documents/25537634-2058691/#document/p55/a2631154">said</a> Becky Juncker, who was involved in approving surgical procedures.</p>
        
    
                        
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="68.0">Company witnesses explained that the 16% received in saving money for out-of-state Blue Cross insurers was a fee to cover the costs of handling adjustments of the claim — though they were not able to explain why Blue Cross did not charge a flat fee for its services.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="69.0">Blue Cross also defended itself against the accusation that it had paid nothing for 60% of the charges for individual procedures. Witnesses said the insurer had followed industry practice in bundling charges to make a single payment for an operation. An attorney for the center noted that it had never agreed to take bundled payments — Blue Cross had imposed them.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="70.0">As to the calls to women like Arch? That was an effort to save members money. “Our medical area would reach out to our members who were utilizing out-of-network providers to help them understand the, I would say, the financial implications,” said Shepherd, the Blue Cross executive vice president, <a href="https://www.documentcloud.org/documents/25892223-2023-12-11-paula-shepherd-depo/?mode=document#document/p1/a2631176">in a deposition</a>. “It could be financially catastrophic to a member to have an out-of-network claim that they are financially responsible for. It’s a huge difference.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="71.0">In summing up the case, Kim Boyle, the lead attorney for the company, told jurors that Blue Cross had not committed fraud. It had acted to ensure the company and its members paid a fair price for the center’s services, she said. “There’s no scheme. There’s no plot. There’s no mafia. There are no Blue Cross employees of Louisiana that are sitting in some smoke-filled room in Baton Rouge, plotting against these plaintiffs on St. Charles Avenue in New Orleans,” Boyle said. “It’s fiction; it’s fancy; it’s completely made up.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="72.0">On Sept. 20, at 1:57 p.m., Judge Sidney H. Cates IV sent the jurors to deliberate. The center attorneys retreated to a nearby hotel to await the verdict. About two hours later, they were summoned back to Division C. Williams put his head down and swore. He worried that such a quick return in the legally complex case meant victory for Blue Cross.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="73.0">The center’s lawyers paid close attention to Cates as he reviewed the jurors’ decision. It was a two-page form. If the jurors found in favor of Blue Cross, the judge would have no reason to read on. Cates flipped to the second page: The jurors had found Blue Cross liable for fraud. “Please express in dollars the total monetary compensation, if any, Blue Cross owes the hospital and the center for the damages,” Cates said, <a href="https://www.documentcloud.org/documents/25892343-2024-09-27-jury-form-with-verdict/?mode=document">reading from the verdict</a>. “Net damages, $421,488,633.” The center’s lawyers stood and shook hands as the insurer’s attorneys prepared to leave the courtroom.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="74.0">DellaCroce was in surgery at the hospital, having expected a longer deliberation. Sullivan was in the courtroom to hear the verdict. Afterward, jurors approached and thanked him for his work. He teared up. “We would have given more if we had been asked for more. That’s how egregious the fraud was,” Juliet Laughlin, a 58-year-old property manager who served as forewoman, later said. “There had been wrong done.”</p>
        
    
                                  
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="76.0">Blue Cross has appealed the verdict. A health insurance trade group has warned that the finding sets a dangerous precedent. If allowed to stand, insurance companies in Louisiana may find themselves forced to pay whatever price is demanded by out-of-network doctors — which in turn could raise health insurance premiums across the state, the Louisiana Association of Health Plans said in a statement.</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="77.0">For DellaCroce and Sullivan, the verdict was vindication. They had refused to sign contracts they thought unfair. They had rejected settlement offers they thought too low. The trial had revealed Blue Cross’ domineering behavior. “Fundamentally, I think their problem was that we were doctors who had control,” DellaCroce said. “That was regarded as a threat.”</p>
        
    
                    
<p data-pp-blocktype="copy" data-pp-id="78.0">In the months since the judgment, Blue Cross has not changed its practices, the doctors said. It has not approached with an offer that would bring the hospital in network. It still issues prior authorizations for women’s surgeries. And it still pays only a fraction of the billed fees.</p>
        
    
                    
<hr>

        
    
                    
        
    
                    <div data-pp-location="bottom-note">
                                    

                                    
        <p>Freelance photographer Daniella Zalcman contributed reporting.</p>

    
            </div><!-- end .article-body__bottom-notes -->
        
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Trump exempts phones, computers, chips from 'reciprocal' tariffs (253 pts)]]></title>
            <link>https://www.bloomberg.com/news/articles/2025-04-12/trump-exempts-phones-computers-chips-from-reciprocal-tariffs</link>
            <guid>43664121</guid>
            <pubDate>Sat, 12 Apr 2025 13:18:04 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bloomberg.com/news/articles/2025-04-12/trump-exempts-phones-computers-chips-from-reciprocal-tariffs">https://www.bloomberg.com/news/articles/2025-04-12/trump-exempts-phones-computers-chips-from-reciprocal-tariffs</a>, See on <a href="https://news.ycombinator.com/item?id=43664121">Hacker News</a></p>
Couldn't get https://www.bloomberg.com/news/articles/2025-04-12/trump-exempts-phones-computers-chips-from-reciprocal-tariffs: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Charts.css (101 pts)]]></title>
            <link>https://chartscss.org/</link>
            <guid>43663880</guid>
            <pubDate>Sat, 12 Apr 2025 12:43:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://chartscss.org/">https://chartscss.org/</a>, See on <a href="https://news.ycombinator.com/item?id=43663880">Hacker News</a></p>
<div id="readability-page-1" class="page"><div> <div><h2>Choose from a Variety of Charts</h2>       <div><a href="https://chartscss.org/charts/column/#multiple-datasets" aria-label="Multi-Dataset Column Chart"><svg viewBox="0 0 100 100"><rect x="5" y="65" width="15" height="19" style="fill:none;stroke:#fff;stroke-width:2px;"></rect> <rect x="25" y="40" width="15" height="45" style="fill:#fff;"></rect> <rect x="60" y="30" width="15" height="54" style="fill:none;stroke:#fff;stroke-width:2px;"></rect> <rect x="80" y="50" width="15" height="35" style="fill:#fff;"></rect></svg></a> <p>Multi-Dataset <br> Column Chart</p></div>       </div> <div><h2>Framework Benefits</h2> <div><h3>Semantic Structure</h3> <p>Uses HTML tags to display data</p></div> <div><h3>Customizable</h3> <p>Custom styling using CSS</p></div> <div><h3>Responsive</h3> <p>Scaled using media queries</p></div> <div><h3>Accessible</h3> <p>Raw data inside the markup</p></div> <div><h3>Large Variety</h3> <p>Many supported chart types</p></div> <div><h3>No dependencies</h3> <p>Zero external overhead</p></div> <div><h3>Small Library</h3> <p>76kb file size, 7kb gzipped</p></div> <div><h3>Better Performance</h3> <p>No JS = no rendering</p></div> <div><h3>Open Source</h3> <p>You can change the code</p></div></div> <div><h2>The People Behind The Project</h2> <div><p><img src="https://chartscss.org/assets/img/rami.jpg" title="Rami Yushuvaev"></p><h3>Rami Yushuvaev</h3> <p>Developer</p></div> <div><p><img src="https://chartscss.org/assets/img/lana.jpg" title="Lana Gordiievska"></p><h3>Lana Gordiievska</h3> <p>Designer</p></div></div> <p><strong>Charts.css</strong> is an open source framework licensed under the <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer">MIT license</a>.</p> <br></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Open source and self hostable/private file converter (477 pts)]]></title>
            <link>https://vert.sh</link>
            <guid>43663865</guid>
            <pubDate>Sat, 12 Apr 2025 12:40:13 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://vert.sh">https://vert.sh</a>, See on <a href="https://news.ycombinator.com/item?id=43663865">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><!--[--><!----><path d="M20 6 9 17l-5-5"><!----></path><!----><!--]--><!----><!----><!----><!----></svg><!----> Fully supported</p> <p><b>Status:</b> not ready</p> <p><b>Supported formats:</b> .png, .jpeg, .jpg, .webp, .gif, .hdr, .jpe, .mat, .pbm, .pfm, .pgm, .pnm, .ppm, .raw, .tif, .tiff, .jfif</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[AI can't stop making up software dependencies and sabotaging everything (178 pts)]]></title>
            <link>https://www.theregister.com/2025/04/12/ai_code_suggestions_sabotage_supply_chain/</link>
            <guid>43663777</guid>
            <pubDate>Sat, 12 Apr 2025 12:22:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theregister.com/2025/04/12/ai_code_suggestions_sabotage_supply_chain/">https://www.theregister.com/2025/04/12/ai_code_suggestions_sabotage_supply_chain/</a>, See on <a href="https://news.ycombinator.com/item?id=43663777">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="body">
<p>The rise of AI-powered code generation tools is reshaping how developers write software - and introducing new risks to the software supply chain in the process.</p>
<p>AI coding assistants, like large language models in general, have a habit of hallucinating. They suggest code that incorporates software packages that don't exist.</p>
<p>As we noted <a target="_blank" href="https://www.theregister.com/2024/03/28/ai_bots_hallucinate_software_packages/">in March</a> and <a target="_blank" href="https://www.theregister.com/2024/09/30/ai_code_helpers_invent_packages/">September</a> last year, security and academic researchers have found that AI code assistants invent package names. In a recent study, researchers found that about 5.2 percent of package suggestions from commercial models didn't exist, compared to 21.7 percent from open source models.</p>

    

<p>Running that code should result in an error when importing a non-existent package. But miscreants have realized that they can hijack the hallucination for their own benefit.</p>

        


        

<p>All that's required is to create a malicious software package under a hallucinated package name and then upload the bad package to a package registry or index like PyPI or npm for distribution. Thereafter, when an AI code assistant re-hallucinates the co-opted name, the process of installing dependencies and executing the code will run the malware.</p>
<p>The recurrence appears to follow a bimodal pattern - some hallucinated names show up repeatedly when prompts are re-run, while others vanish entirely - suggesting certain prompts reliably produce the same phantom packages.</p>

        

<p>As <a target="_blank" rel="nofollow" href="https://socket.dev/blog/slopsquatting-how-ai-hallucinations-are-fueling-a-new-class-of-supply-chain-attacks">noted</a> by security firm Socket recently, the academic researchers who explored the subject last year found that re-running the same hallucination-triggering prompt ten times resulted in 43 percent of hallucinated packages being repeated every time and 39 percent never reappearing.</p>
<p>Exploiting hallucinated package names represents a form of <a target="_blank" rel="nofollow" href="https://capec.mitre.org/data/definitions/630.html">typosquatting</a>, where variations or misspellings of common terms are used to dupe people. Seth Michael Larson, security developer-in-residence at the Python Software Foundation, has dubbed it "slopsquatting" – "slop" being a common pejorative for AI model output.</p>
<p>"We're in the very early days looking at this problem from an ecosystem level," Larson told <em>The Register</em>. "It's difficult, and likely impossible, to quantify how many attempted installs are happening because of LLM hallucinations without more transparency from LLM providers. Users of LLM generated code, packages, and information should be double-checking LLM outputs against reality before putting any of that information into operation, otherwise there can be real-world consequences."</p>

        

<p>Larson said that there are many reasons a developer might attempt to install a package that doesn't exist, including mistyping the package name, incorrectly installing internal packages without checking to see whether those names already exist in a public index (dependency confusion), differences in the package name and the module name, and so on.</p>
<p>"We’re seeing a real shift in how developers write code," Feross Aboukhadijeh, CEO of security firm Socket, told <em>The Register</em>. "With AI tools becoming the default assistant for many, '<a target="_blank" rel="nofollow" href="https://x.com/karpathy/status/1886192184808149383">vibe coding</a>' is happening constantly. Developers prompt the AI, copy the suggestion, and move on. Or worse, the AI agent just goes ahead and installs the recommended packages itself.</p>
<blockquote>

<p>The problem is, these code suggestions often include hallucinated package names that sound real but don't exist</p>
</blockquote>
<p>"The problem is, these code suggestions often include hallucinated package names that sound real but don’t exist. I’ve seen this firsthand. You paste it into your terminal and the install fails – or worse, it doesn’t fail, because someone has slop-squatted that exact package name."</p>
<p>Aboukhadijeh said these fake packages can look very convincing.</p>
<p>"When we investigate, we sometimes find realistic looking READMEs, fake GitHub repos, even sketchy blogs that make the package seem authentic," he said, adding that Socket's security scans will catch these packages because they analyze the way the code works.</p>
<blockquote>

<p>What a world we live in: AI hallucinated packages are validated and rubber-stamped by another AI that is too eager to be helpful</p>
</blockquote>
<p>"Even worse, when you Google one of these slop-squatted package names, you’ll often get an AI-generated summary from Google itself confidently praising the package, saying it’s useful, stable, well-maintained. But it’s just parroting the package’s own README, no skepticism, no context. To a developer in a rush, it gives a false sense of legitimacy.</p>
<p>"What a world we live in: AI hallucinated packages are validated and rubber-stamped by another AI that is too eager to be helpful."</p>
<p>Aboukhadijeh pointed to <a target="_blank" rel="nofollow" href="https://socket.dev/blog/gmail-for-exfiltration-malicious-npm-packages-target-solana-private-keys-and-drain-victim-s">an incident in January</a> in which Google's AI Overview, which responds to search queries with AI-generated text, suggested a malicious npm package @async-mutex/mutex, which was typosquatting the legitimate package async-mutex.</p>
<p>He also noted that recently a threat actor using the name "_Iain" published a playbook on a dark web forum detailing how to build a blockchain-based botnet using malicious npm packages.</p>
<p>Aboukhadijeh explained that _Iain "automated the creation of thousands of typo-squatted packages (many targeting crypto libraries) and even used ChatGPT to generate realistic-sounding variants of real package names at scale. He shared video tutorials walking others through the process, from publishing the packages to executing payloads on infected machines via a GUI. It’s a clear example of how attackers are weaponizing AI to accelerate software supply chain attacks."</p>
<ul>

<li><a href="https://www.theregister.com/2025/03/17/supply_chain_attack_github/">GitHub supply chain attack spills secrets from 23,000 projects</a></li>

<li><a href="https://www.theregister.com/2025/01/29/lazarus_groups_supply_chain_attack/">North Koreans clone open source projects to plant backdoors, steal credentials</a></li>

<li><a href="https://www.theregister.com/2025/01/14/snyk_npm_deployment_removed/">Snyk appears to deploy 'malicious' packages targeting Cursor for unknown reason</a></li>

<li><a href="https://www.theregister.com/2024/11/05/typosquatting_npm_campaign/">Ongoing typosquatting campaign impersonates hundreds of popular npm packages</a></li>
</ul>
<p>Larson said the Python Software Foundation is working constantly to make package abuse more difficult, adding such work takes time and resources.</p>
<p>"Alpha-Omega has sponsored the work of Mike Fiedler, our PyPI Safety &amp; Security Engineer, to work on reducing the risks of malware on PyPI such as by implementing an programmatic API to report malware, partnering with existing malware reporting teams, and implementing better detections for typo-squatting of top projects," he said.</p>
<p>"Users of PyPI and package managers in general should be checking that the package they are installing is an existing well-known package, that there are no typos in the name, and that the content of the package has been reviewed before installation. Even better, organizations can mirror a subset of PyPI within their own organizations to have much more control over which packages are available for developers." ®</p>                                
                    </div></div>]]></description>
        </item>
    </channel>
</rss>