<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Tue, 07 Jan 2025 10:30:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Stay Gold, America (108 pts)]]></title>
            <link>https://blog.codinghorror.com/</link>
            <guid>42620278</guid>
            <pubDate>Tue, 07 Jan 2025 07:45:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.codinghorror.com/">https://blog.codinghorror.com/</a>, See on <a href="https://news.ycombinator.com/item?id=42620278">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

    <header id="gh-navigation">
    <div>

        <p><a href="https://blog.codinghorror.com/">
                    <img src="https://blog.codinghorror.com/content/images/2025/01/codinghorror-landscape.png" alt="Coding Horror">
            </a>
                        
        </p>

        

        

    </div>
</header>

    

    


<div>

            <h2>
                Archive
            </h2>

        <main>
            <div>

                                <article>

    <header>

        <h2>
            <a href="https://blog.codinghorror.com/stay-gold-america/">Stay Gold, America</a>
        </h2>
            <p>We are at an unprecedented point in American history, and I'm concerned we may lose sight of the American Dream.</p>

            <div>
                <p><a href="https://blog.codinghorror.com/author/jeff-atwood/">
                                <img src="https://blog.codinghorror.com/assets/images/codinghorror.png" alt="Jeff Atwood">
                            </a>
                </p>
                <div>
                    
                    <p><time datetime="2025-01-07">07 Jan 2025</time>
                            <span><span>—</span> 10 min read</span>
                    </p>
                </div>
            </div>

        
    </header>

    <section>
        <p>We are at an unprecedented point in American history, and I'm concerned we may lose sight of the <a href="https://en.wikipedia.org/wiki/American_Dream?ref=blog.codinghorror.com" rel="noreferrer">American Dream</a>:</p><ul><li>The costs of housing, healthcare, and education have soared <a href="https://uvaro.com/blog/college-costs-vs-inflation-1982-present?ref=blog.codinghorror.com" rel="noreferrer">far beyond the pace of inflation and wage growth</a>.</li><li>We are a democracy, but 144 million Americans – 42% of the adults who live here – do not vote and have no say in what happens.</li><li><a href="https://youtu.be/QPKKQnijnsM?ref=blog.codinghorror.com" rel="noreferrer">Wealth concentration</a> has reached <a href="https://americancompass.org/economic-inequality-guide/?ref=blog.codinghorror.com" rel="noreferrer">historic levels</a>. The top 1% of households control 32% of all wealth, while the bottom 50% only have 2.6%.</li></ul><p>We must act now to keep the dream alive. Our family made <strong>eight $1 million donations</strong> to nonprofit groups working to support those most currently in need:</p><ul><li><a href="https://teamrubiconusa.org/?ref=blog.codinghorror.com" rel="noreferrer">Team Rubicon</a> – Mobilizing veterans to continue their service, leveraging their skills and experience to help Americans prepare, respond, and recover from natural disasters.</li><li><a href="https://childrenshungerfund.org/?ref=blog.codinghorror.com" rel="noreferrer">Children's Hunger Fund</a> – Provides resources to local churches in the United States and around the world to meet the needs of impoverished community members.</li><li><a href="https://pen.org/?ref=blog.codinghorror.com">PEN America</a> – Defends writers against censorship and abuse, supports writers in need of emergency assistance, and amplifies the writing of incarcerated prisoners. (One of my personal favorites; I've seen the power of writing transform our world <a href="https://www.weforum.org/stories/2016/03/10-novels-that-changed-the-world/?ref=blog.codinghorror.com" rel="noreferrer">many times</a>.)</li><li><a href="https://www.thetrevorproject.org/?ref=blog.codinghorror.com" rel="noreferrer">The Trevor Project</a> – Working to change hearts, minds, and laws to support the lives of young adults seeking acceptance as fellow Americans.</li><li><a href="https://www.naacpldf.org/?ref=blog.codinghorror.com" rel="noreferrer">NAACP Legal Defense and Educational Fund</a> – Legal organization with a historic record of advancing racial justice and reducing inequality.</li><li><a href="https://www.firstgenerationinvestors.com/?ref=blog.codinghorror.com" rel="noreferrer">First Generation Investors</a> –<strong> </strong>Introduces high school students in low-income areas to the fundamentals of investing, providing them real money to invest, encouraging long-term wealth accumulation and financial literacy among underserved youth.</li><li><a href="https://www.globalrefuge.org/?ref=blog.codinghorror.com" rel="noreferrer">Global Refuge</a> – Supporting migrants and refugees from around the globe, in partnership with community-based legal and social service providers nationwide, helping rebuild lives in America.</li><li><a href="https://www.plannedparenthood.org/?ref=blog.codinghorror.com" rel="noreferrer">Planned Parenthood</a> – Provides essential healthcare services and resources that help individuals and families lead healthier lives.</li></ul><p>I encourage every American to<strong> contribute soon, however you can, to organizations you feel are </strong><a href="https://www.charitynavigator.org/?ref=blog.codinghorror.com" rel="noreferrer"><strong>effectively helping</strong></a><strong> </strong>those most currently in need here in America.</p><p>We must also<em> </em>work toward deeper changes that will take decades to achieve. Over the next five years,<strong> my family pledges half our wealth </strong>towards long term efforts ensuring that all Americans continue to have access to the American Dream. </p><figure><img src="https://blog.codinghorror.com/content/images/2025/01/share-vertical-1.png" alt="" loading="lazy" width="328" height="500"></figure><div><p>I never thought my family would be able to do this. My parents are of hardscrabble rural West Virginia and rural North Carolina origins. They barely managed to claw their way to the bottom of the middle class by the time they ended up in Virginia. Unfortunately, due to the demons passed on to them by their parents, my father was an alcoholic and my mother participated in the drinking. She ended up divorcing my father when I was 16 years old. It was only after the divorce that my parents were able to heal themselves, heal their only child, and stop the drinking, which was so destructive to our family. If the divorce hadn't forced the issue, alcohol would have inevitably destroyed us all. </p><p>My parents may not have done everything right, but they both unconditionally loved me. <strong>They taught me how to fully, deeply receive love, and the profound joy of reflecting that love upon everyone around you. </strong></p></div><p>I went on to attend public school in Chesterfield County, Virginia. In 1992 I graduated from the University of Virginia, founded by <a href="https://en.wikipedia.org/wiki/Thomas_Jefferson?ref=blog.codinghorror.com">Thomas Jefferson</a>.</p><p>During college, I worked at Safeway as a part-time cashier, earning the <a href="https://www.dol.gov/agencies/whd/minimum-wage/history?ref=blog.codinghorror.com" rel="noreferrer">federal minimum wage</a>, scraping together whatever money I could through government Pell grants, scholarships, and other part-time work to pay my college tuition. Even with <a href="https://www.salliemae.com/blog/in-state-vs-out-of-state-tuition/?ref=blog.codinghorror.com" rel="noreferrer">lower in-state tuition</a>, it was rocky. Sometimes I could barely manage tuition payments. And that was in 1992, when tuition was only $3,000 per year. It is now $23,000 per year. <a href="https://educationdata.org/average-cost-of-college-by-year?ref=blog.codinghorror.com" rel="noreferrer">College tuition</a> at a state school increased by 8 times over the last 30 years. These <a href="https://uvaro.com/blog/college-costs-vs-inflation-1982-present?ref=blog.codinghorror.com" rel="noreferrer">huge cost increases</a> for healthcare, education, and housing are not compatible with the American Dream.</p><figure><a href="https://uvaro.com/blog/college-costs-vs-inflation-1982-present?ref=blog.codinghorror.com"><img src="https://blog.codinghorror.com/content/images/2025/01/image-6.png" alt="" loading="lazy" width="675" height="700" srcset="https://blog.codinghorror.com/content/images/size/w600/2025/01/image-6.png 600w, https://blog.codinghorror.com/content/images/2025/01/image-6.png 675w"></a></figure><div><p>Programmers all over the world helped make an American Dream happen <a href="https://web.archive.org/web/20080703183923/http://stackoverflow.com/" rel="noreferrer">in 2008</a> when we built <a href="https://stackoverflow.com/?ref=blog.codinghorror.com" rel="noreferrer">Stack Overflow</a>, a Q&amp;A website for programmers creating a shared <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en?ref=blog.codinghorror.com" rel="noreferrer">Creative Commons</a> knowledge base for the world. We did it democratically, because that's the <a href="https://en.wikipedia.org/wiki/American_way?ref=blog.codinghorror.com" rel="noreferrer">American way</a>. We voted to rank questions and answers, and held elections for community moderators using <a href="https://en.m.wikipedia.org/wiki/Ranked-choice_voting_in_the_United_States?ref=blog.codinghorror.com" rel="noreferrer">ranked choice voting</a>. We built a <strong>digital democracy</strong> – of the programmers, by the programmers, for the programmers. <a href="https://www.forbes.com/sites/vijaygurbaxani/2021/06/08/the-18-billion-acquisition-of-stack-overflow-aims-to-turbocharge-the-worlds-software-knowhow/?ref=blog.codinghorror.com" rel="noreferrer">It worked</a>. </p><p>With the guidance of my co-founder <a href="https://en.wikipedia.org/wiki/Joel_Spolsky?ref=blog.codinghorror.com" rel="noreferrer">Joel Spolsky</a>, I came to understand that the digital democracy of Stack Overflow was not enough. We must be brave enough to actively, openly share love with each other. That became the foundation for <a href="https://discourse.org/?ref=blog.codinghorror.com">Discourse</a>, a free, open source tool for constructive, empathetic community discussions that are also Creative Commons. We can disagree in those discussions because Discourse empowers communities to <a href="https://frameshiftconsulting.com/2017/09/10/the-intolerable-speech-rule-the-paradox-of-tolerance-for-tech-companies?ref=blog.codinghorror.com" rel="noreferrer">set boundaries the community agrees on</a>, providing tools to democratically govern and strongly moderate by enforcing these boundaries. <strong>Digital democracy <em>and empathy</em>,</strong> for everyone.</p></div><p>In order for digital democracy to work, we need to see each other through our screens.</p><figure><a href="https://xkcd.com/438/?ref=blog.codinghorror.com"><img src="https://blog.codinghorror.com/content/images/2025/01/xkcd438_condensed_b.png" alt="" loading="lazy" width="382" height="253"></a></figure><p><a href="https://blog.codinghorror.com/they-have-to-be-monsters/"><u>We often behave online in ways we never would in the real world</u></a> because we cannot see the person on the other side of the screen. But as our world becomes more digital, we must extend our kindness through that screen.</p><p>I've always felt Stack Overflow and Discourse are <a href="https://www.bcorporation.net/en-us/?ref=blog.codinghorror.com" rel="noreferrer">projects for the public good</a> that happen to be <a href="https://en.wikipedia.org/wiki/Company?ref=blog.codinghorror.com" rel="noreferrer">corporations</a>. I probably couldn't have accomplished this in any other country, and I was rewarded handsomely for a combination of hard work and good luck. That's what the <a href="https://www.britannica.com/topic/American-Dream?ref=blog.codinghorror.com" rel="noreferrer">American Dream</a> promises us. </p><figure><iframe width="200" height="113" src="https://www.youtube.com/embed/mXBMqbWcqzg?start=165&amp;feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" title="Field of Dreams (James Earl Jones Scene) | People Will Come in 4K HDR"></iframe></figure><p><a href="https://blog.codinghorror.com/the-field-of-dreams-strategy/"><u>We built it, and<em> people came</em></u></a>. I earned millions of dollars. I thought that was the final part of the American Dream. But it wasn't.</p><p>I recently attended a theater performance of <a href="https://en.wikipedia.org/wiki/The_Outsiders_(novel)?ref=blog.codinghorror.com">The Outsiders</a> at my son's public high school. All I really knew was the famous <a href="https://www.youtube.com/watch?v=f46JMzVzSB4&amp;ref=blog.codinghorror.com" rel="noreferrer">"stay gold" line</a> from the 1983 movie adaptation. But as I sat there in the audience among my neighbors, watching the complete story acted out in front of me by these teenagers, I slowly realized what staying gold actually meant: <a href="http://blog.asjournal.org/the-american-dream-reconsidered-the-outsiders-1967/?ref=blog.codinghorror.com" rel="noreferrer"><em>sharing</em> the American Dream</a>. </p><p>In the printed program, the director wrote:</p><blockquote>This play is a reminder that strength lies not just in overcoming hardships but in staying true to ourselves and lifting up those around us. <p>We hope you feel the raw emotions, sense the camaraderie, and <strong>connect with the enduring themes of resilience, empathy, and unity</strong>. Whether you've read this story recently, long ago, or not at all, I hope you are able to find inspiration in the strength and passion of youth. Thank you for being part of this journey with us.</p><p><a href="https://poets.org/poem/nothing-gold-can-stay?ref=blog.codinghorror.com">Stay gold</a>.</p></blockquote><p>I <a href="https://blog.codinghorror.com/im-loyal-to-nothing-except-the-dream/" rel="noreferrer">believe deeply</a> in sharing The American Dream. It is the foundation of our country, the second paragraph in our <a href="https://www.archives.gov/founding-docs/declaration-transcript?ref=blog.codinghorror.com" rel="noreferrer">Declaration of Independence</a>, written by the founder of the public university I attended:</p><blockquote>We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness.</blockquote><p>But the American Dream is not always available to every American. Its meaning can be distorted. Jimi Hendrix <a href="https://www.newyorker.com/culture/cultural-comment/rewinding-jimi-hendrixs-national-anthem?ref=blog.codinghorror.com" rel="noreferrer">captured this distortion</a> so eloquently in his rendition of our national anthem. </p><figure><iframe width="200" height="113" src="https://www.youtube.com/embed/sjzZh6-h9fM?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" title="Jimi Hendrix - The Star Spangled Banner [ National Anthem ] ( Live at Woodstock 1969 )"></iframe></figure><p>We are still trying to live up to those ideals today. In November 2024, <a href="https://en.wikipedia.org/wiki/2024_United_States_presidential_election?ref=blog.codinghorror.com" rel="noreferrer">enough of us voted</a> for people who interpret the dream in a way that I don't understand.</p><figure><a href="https://election.lab.ufl.edu/2024-general-election-turnout/?ref=blog.codinghorror.com"><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfe_wqbzOe_elPxK-9TqRLDAxtI2Qrd8GHAtxqtJ8DvQ87d69tFasQnClpWuRYvDP-Iofd-PDkfpQU5RayMlyDo2rlVZWzfacm-kr1aM8fZprnh_1XXkpbr63MbGUpiNNaibPmxVQ?key=gIYEBDEiC9EgZC24CSOXGvAl" alt="" loading="lazy" width="661" height="573"></a></figure><p>34% of adults in America <a href="https://apnews.com/projects/election-2024-our-very-complicated-democracy/election-2024-why-americans-dont-vote-episode-6.html?ref=blog.codinghorror.com" rel="noreferrer">did not exercise their right to vote</a>. Why? Is it <a href="https://en.wikipedia.org/wiki/Voter_suppression_in_the_United_States?ref=blog.codinghorror.com" rel="noreferrer">voter suppression</a>, <a href="https://en.wikipedia.org/wiki/Gerrymandering?ref=blog.codinghorror.com" rel="noreferrer">gerrymandering</a> causing indifference, or people who felt their vote didn't matter? The 7.6% that are ineligible to vote are mostly adults living in America who have not managed to attain citizenship, or people <a href="https://www.ncsl.org/elections-and-campaigns/felon-voting-rights?ref=blog.codinghorror.com" rel="noreferrer">convicted of a felony</a>. Whatever the reasons, 42% of adults living in America had no say in the 2024 election. The vote <a href="https://election.lab.ufl.edu/2024-general-election-turnout/?ref=blog.codinghorror.com" rel="noreferrer">failed to represent everyone</a>.</p><div><p>I think many of the Americans who did vote are telling us they no longer believe our government is effectively <em>keeping America fair for everyone</em>. Our status as the <a href="https://thefulcrum.us/ethics-leadership/democracy-index?ref=blog.codinghorror.com" rel="noreferrer">world's leading democracy</a> is in question. We should make it easier for more eligible Americans to vote, such as <strong>making election day a </strong><a href="https://www.actforamerica.org/act-now/Make-Election-Day-a-National-Holiday?ref=blog.codinghorror.com" rel="noreferrer"><strong>national holiday</strong></a><strong>, universal </strong><a href="https://tracker.votingrightslab.org/issues/universal-mailed-ballots?ref=blog.codinghorror.com#issues_map" rel="noreferrer"><strong>mail in voting</strong></a><strong>, and adopting </strong><a href="https://fairvote.org/our-reforms/ranked-choice-voting/?ref=blog.codinghorror.com" rel="noreferrer"><strong>ranked choice voting</strong></a> so all votes carry more weight. We should also strengthen institutions keeping democracy fair for everyone, such as state and local election boards, as well as the Federal Election Commission.</p><p>It was only after I attained the dream that I was able to <a href="https://www.youtube.com/watch?v=QPKKQnijnsM&amp;ref=blog.codinghorror.com" rel="noreferrer">fully see how many Americans have so very little</a>. This much wealth starts to unintentionally distance my family from other Americans. I no longer bother to look at how much items cost, because <em>I don't have to</em>. We don't have to think about all these things that are challenging or unreachable for so many others. The more wealth you attain, the more unmistakably clear it becomes how unequal life is for so many of us.</p><p>Even with the wealth I have, I can't imagine what it would feel like <a href="https://www.theatlantic.com/politics/archive/2024/11/democrats-harris-billionaire-mistake/680779/?ref=blog.codinghorror.com" rel="noreferrer">to be a billionaire</a><em>.</em> <strong>It is, for lack of a better word, </strong><a href="https://www.pewresearch.org/social-trends/2020/01/09/trends-in-income-and-wealth-inequality/?ref=blog.codinghorror.com" rel="noreferrer"><strong>unamerican</strong></a><strong>. </strong></p></div><figure><iframe width="200" height="113" src="https://www.youtube.com/embed/QPKKQnijnsM?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" title="Wealth Inequality in America"></iframe></figure><div><p>In 2012, the top 1% of Americans held 24% of our country's wealth. By 2021, the top 1% of Americans held 30%.  So many have so little, while a tiny few have massive, wildly disproportionate wealth, which keeps growing. Now the global top 1% hold nearly twice as much wealth <a href="https://www.oxfam.org/en/press-releases/richest-1-bag-nearly-twice-much-wealth-rest-world-put-together-over-past-two-years?ref=blog.codinghorror.com" rel="noreferrer">as the rest of the world combined</a>.</p><p>I grew up poor in America, inspired by the promise of the American Dream that I could better myself and my family by building things <a href="https://credo.library.umass.edu/view/full/mums312-b203-i031?ref=blog.codinghorror.com" rel="noreferrer">that <em>mattered</em></a>:</p></div><blockquote>Work is service, not gain. The object of work is life, not income. The reward of production is plenty, not private fortune. We should measure the prosperity of a nation not by the number of millionaires, but by<strong> the absence of poverty, the prevalence of health, the efficiency of the public schools, </strong>and the number of people who can and do read worthwhile books<strong>.</strong></blockquote><p>Our <a href="https://en.wikipedia.org/wiki/Capitalism?ref=blog.codinghorror.com#Types" rel="noreferrer">version of capitalism</a> delivered so much wealth to my family for my hard work in co-founding two successful companies. My partner and I gladly paid our <a href="https://en.wikipedia.org/wiki/Taxation_in_the_United_States?ref=blog.codinghorror.com" rel="noreferrer">full taxes</a>, and we always planned to give most of our remaining wealth to charities when we pass, following the <a href="https://givingpledge.org/pledger?pledgerId=177&amp;ref=blog.codinghorror.com" rel="noreferrer">Warren Buffet Philanthropic Pledge</a>:</p><blockquote>More than 99% of my wealth will go to philanthropy during my lifetime or at death.</blockquote><p>I admire Buffett, but even having only a tiny fraction of his $325 billion fortune, to me this pledge was incomplete. When would this wealth be transferred? </p><p>Last year he <a href="https://amp.cnn.com/cnn/2024/06/28/investing/warren-buffett-gates-donation?ref=blog.codinghorror.com" rel="noreferrer">amended the pledge</a>, giving all his wealth at death to a charitable trust run by his children, aged 71, 69, and 66, who <a href="https://www.axios.com/2024/07/01/warren-buffett-pledge-100-billion?ref=blog.codinghorror.com" rel="noreferrer">do not make for natural charitable bedfellows</a>. I am only holding back enough wealth for my children so they can afford college educations and buy a home. I am compelled to, because being a parent is <a href="https://blog.codinghorror.com/on-parenthood/" rel="noreferrer">the toughest job I've ever had</a>, and I am concerned about their future.</p><p>November 5th <a href="https://en.wikipedia.org/wiki/2024_United_States_presidential_election?ref=blog.codinghorror.com" rel="noreferrer">raised the stakes</a>. It is now time to allocate <strong>half the wealth</strong> I was so fortunate to be dealt within the next five years<strong>,</strong> not just for my own family, but for all my fellow Americans. </p><p>Our government seems to be slower and slower at delivering change due to the <a href="https://carnegieendowment.org/research/2023/09/polarization-democracy-and-political-violence-in-the-united-states-what-the-research-says?lang=en&amp;ref=blog.codinghorror.com" rel="noreferrer">increased polarization of our two party system</a>. The last meaningful constitutional amendment we've managed to pass in the last 60 years was the 26th amendment in 1971, lowering the voting age to 18 and giving more people a voice in our democracy. </p><p>Political polarization is at <a href="https://en.wikipedia.org/wiki/Political_polarization_in_the_United_States?ref=blog.codinghorror.com#Gilded_Age" rel="noreferrer">historically high levels</a> and rising. In a two party system, this <a href="https://blogs.cfainstitute.org/investor/2018/03/13/red-states-blue-states-two-economies-one-nation/?ref=blog.codinghorror.com" rel="noreferrer">level of polarization</a> is counterproductive and even dangerous.<strong> Do we all still believe in the same American Dream? </strong></p><figure><a href="https://www.facinghistory.org/resource-library/political-polarization-united-states?ref=blog.codinghorror.com"><img src="https://blog.codinghorror.com/content/images/2025/01/image-9.png" alt="" loading="lazy" width="739" height="500" srcset="https://blog.codinghorror.com/content/images/size/w600/2025/01/image-9.png 600w, https://blog.codinghorror.com/content/images/2025/01/image-9.png 739w" sizes="(min-width: 720px) 720px"></a></figure><p>I've always loved <a href="https://blog.codinghorror.com/im-loyal-to-nothing-except-the-dream/" rel="noreferrer">the ideals</a> behind the American Dream, though we continually struggle to live up to them. They are worth fighting for, even if it means making <a href="https://blogs.loc.gov/loc/2020/07/remembering-john-lewis-the-power-of-good-trouble/?ref=blog.codinghorror.com" rel="noreferrer">"good trouble"</a>. We must come together and believe in our shared American Dream so deeply that we can improve our democracy... but <a href="https://www.rogerebert.com/reviews/great-movie-the-night-of-the-hunter-1955?ref=blog.codinghorror.com" rel="noreferrer">which dream?</a></p><figure><iframe width="200" height="113" src="https://www.youtube.com/embed/QC6gI4gXYPw?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" title="Do the Right Thing | Radio Raheem's Story of LOVE and HATE"></iframe></figure><p>The American Dream contains the <a href="https://www.goodreads.com/quotes/376797-returning-hate-for-hate-multiplies-hate-adding-deeper-darkness-to?ref=blog.codinghorror.com" rel="noreferrer">path of hate</a>, and the <a href="https://kinginstitute.stanford.edu/king-papers/documents/loving-your-enemies-sermon-delivered-dexter-avenue-baptist-church?ref=blog.codinghorror.com" rel="noreferrer">path of love</a>. Throughout our history, one hand is always fighting the other. Which path are we choosing?</p><blockquote>Our family pledges <strong>half our wealth</strong> toward an <strong>American Dream founded on love</strong>.</blockquote>
<!--kg-card-begin: html-->
<!-- CSS for BlockQuote -->

<!--kg-card-end: html-->
<p>Here are some starting points for longer term efforts:</p><ul><li>We can support organizations making it easier for Americans to vote for a new Congress in two years and a new president in four years. My concern is damage to our democratic institutions may happen so quickly that our votes could matter even less within the coming years.</li><li>We could fund nonprofits that have a <a href="https://www.charitynavigator.org/about-us/our-methodology/ratings/?ref=blog.codinghorror.com" rel="noreferrer">proven track record</a> of protecting democratic institutions.</li><li>We could found a new organization loosely based on the original <a href="https://en.wikipedia.org/wiki/RAND_Corporation?ref=blog.codinghorror.com" rel="noreferrer">RAND Corporation</a>, but modernized like <a href="https://www.leverforchange.org/?ref=blog.codinghorror.com" rel="noreferrer">Lever for Change</a>. We can empower the best and brightest to determine a realistic, achievable path toward preserving the American Dream for <em>everyone,</em> working within the current system or outside it.</li><li>All states are shades of purple, not fully red or blue. We have <a href="https://today.yougov.com/politics/articles/50343-national-policy-proposals-with-bipartisan-support?ref=blog.codinghorror.com" rel="noreferrer">more in common on specific policies</a> than we realize. It would be very difficult to draw borders if we split. I know what divorce feels like, and we don't want this. Let's come together <a href="https://carnegieendowment.org/research/2023/09/polarization-democracy-and-political-violence-in-the-united-states-what-the-research-says?lang=en&amp;ref=blog.codinghorror.com">through our shared American Dream</a>. </li><li>We can start with change in our local communities. Vote in your own city, county, and state elections. Support local independent journalism and media. Find a local organization doing work you admire, ask what they need, and help them meet those needs. Listen to the stories of fellow volunteers, listen to the stories of the people you’re serving – that is the heart of Democracy.</li></ul><p>We've already completed the eight $1 million donations <a href="#" rel="noreferrer">listed above</a> to help those most immediately in need. Within the next five years, half of our family wealth will support longer term efforts. There is no single solution, so let's work together. I will gladly advise and <strong>empower others </strong>working towards the same goal.</p><figure><img src="https://blog.codinghorror.com/content/images/2025/01/share-landscape.png" alt="" loading="lazy" width="1235" height="690" srcset="https://blog.codinghorror.com/content/images/size/w600/2025/01/share-landscape.png 600w, https://blog.codinghorror.com/content/images/size/w1000/2025/01/share-landscape.png 1000w, https://blog.codinghorror.com/content/images/2025/01/share-landscape.png 1235w" sizes="(min-width: 720px) 720px"></figure><p>Please join us in <strong>Sharing the American Dream</strong>:</p><ol><li>Support organizations you feel are <a href="https://www.charitynavigator.org/?ref=blog.codinghorror.com" rel="noreferrer">effectively helping</a> those most in need across America right now.</li><li>Within the next five years, also contribute <strong>public dedications of time or funds towards longer term efforts </strong>to keep the American Dream fair and attainable for all our children.</li></ol><p><a href="https://poets.org/poem/nothing-gold-can-stay?ref=blog.codinghorror.com" rel="noreferrer">Stay gold</a>, America.</p>
<!--kg-card-begin: html-->
<small>(I could not have done this without the support of my partner Betsy Burton and the rest of my family. I'd also like to thank <a href="https://en.wikipedia.org/wiki/Steve_McConnell?ref=blog.codinghorror.com">Steve McConnell</a>, whose writing inspired me to start this blog in 2004. So many people from all walks of life generously shared their feedback to improve this post. <a href="https://blog.codinghorror.com/on-the-meaning-of-coding-horror/">We wrote it together</a>. Thank you all.)</small>
<!--kg-card-end: html-->

        
    </section>
</article>
                                <article>

    <header>

        <h2>
            <a href="https://blog.codinghorror.com/the-great-filter-comes-for-us-all/">The Great Filter Comes For Us All</a>
        </h2>

            <div>
                <p><a href="https://blog.codinghorror.com/author/jeff-atwood/">
                                <img src="https://blog.codinghorror.com/assets/images/codinghorror.png" alt="Jeff Atwood">
                            </a>
                </p>
                
            </div>

        
    </header>

    <section>
        <p>With a <a href="https://imagine.gsfc.nasa.gov/science/featured_science/tenyear/age.html?ref=blog.codinghorror.com" rel="noreferrer">13 billion year head start</a> on evolution, why haven't any other forms of life in the universe contacted us by now?</p><figure><a href="https://en.wikipedia.org/wiki/Arrival_(film)?ref=blog.codinghorror.com"><img src="https://blog.codinghorror.com/content/images/2024/11/image-28.png" alt="" loading="lazy" width="1024" height="692" srcset="https://blog.codinghorror.com/content/images/size/w600/2024/11/image-28.png 600w, https://blog.codinghorror.com/content/images/size/w1000/2024/11/image-28.png 1000w, https://blog.codinghorror.com/content/images/2024/11/image-28.png 1024w" sizes="(min-width: 720px) 720px"></a><figcaption><span>teaching the aliens how to exit Vim</span></figcaption></figure><p>(<a href="https://en.wikipedia.org/wiki/Arrival_(film)?ref=blog.codinghorror.com" rel="noreferrer">Arrival</a> is a <a href="https://www.youtube.com/watch?v=tFMo3UJ4B4g&amp;ref=blog.codinghorror.com" rel="noreferrer">fantastic movie</a>. Watch it, but don't stop there - read the <a href="https://en.wikipedia.org/wiki/Story_of_Your_Life?ref=blog.codinghorror.com" rel="noreferrer">Story of Your Life</a> novella it was based on for so much additional nuance.)</p><p>This is called the <a href="https://en.wikipedia.org/wiki/Fermi_paradox?ref=blog.codinghorror.com" rel="noreferrer">Fermi paradox</a>: </p>
<!--kg-card-begin: html-->
<blockquote>The Fermi Paradox is a contradiction between high estimates of the probability of the existence of extraterrestrial civilizations, such as in <a href="https://en.wikipedia.org/wiki/Drake_equation?ref=codinghorror.obox.agency" rel="noopener noreferrer" target="_blank">the Drake equation</a>, and lack of any evidence for such civilizations.<ul>
<li>There are billions of stars in the galaxy that are similar to the Sun including many billions of years older than Earth.</li>
<li>With high probability, some of these stars will have Earth-like planets, and if the Earth is typical, some might develop intelligent life.</li><li>Some of these civilizations might develop interstellar travel, a step the Earth is investigating now.</li><li>Even at the slow pace of currently envisioned interstellar travel, the Milky Way galaxy could be completely traversed in about a million years.<p>According to this line of thinking, <strong>the Earth should have already been visited by extraterrestrial aliens</strong>. In an informal conversation, Fermi noted no convincing evidence of this, nor any signs of alien intelligence anywhere in the observable universe, leading him to ask, “Where is everybody?”</p></li></ul>
</blockquote>
<!--kg-card-end: html-->
<blockquote>To me, this is a compelling argument, in the same way that <a href="https://en.wikipedia.org/wiki/Time_travel?ref=blog.codinghorror.com#Absence_of_time_travelers_from_the_future" rel="noreferrer">the lack of evidence of any time travellers</a> is:</blockquote><blockquote>Many have argued that the absence of time travelers from the future demonstrates that such technology will never be developed, suggesting that it is impossible. This is analogous to the Fermi paradox related to the absence of evidence of extraterrestrial life. As the absence of extraterrestrial visitors does not categorically prove they do not exist, so the absence of time travelers fails to prove time travel is physically impossible; it might be that time travel is physically possible but is never developed or is cautiously used. Carl Sagan once suggested the possibility that time travelers could be here but are disguising their existence or are not recognized as time travelers.</blockquote><p>It seems, to me at least, clear evidence that time travel is not possible, given the enormous amount of time behind us. Something, somewhere, would certainly have invented it by now... right?</p><p>So if not, what happened? <a href="https://en.wikipedia.org/wiki/Great_Filter?ref=blog.codinghorror.com" rel="noopener nofollow ugc">The Great Filter</a>&nbsp;maybe?</p><blockquote>The Great Filter theory says that at some point from pre-life to Type III intelligence, there’s a wall that all or nearly all attempts at life hit. There’s some stage in that long evolutionary process that is extremely unlikely or impossible for life to get beyond. That stage is The Great Filter.</blockquote><p>I liked&nbsp;<a href="http://waitbutwhy.com/2014/05/fermi-paradox.html?ref=blog.codinghorror.com" rel="noopener nofollow ugc">Wait But Why’s take on this</a>&nbsp;a lot, which covers three main filter possibilities:</p><ol><li><strong>Life is extraordinarily rare, almost impossible</strong></li></ol><figure><img src="https://blog.codinghorror.com/content/images/2024/12/image-1.png" alt="" loading="lazy" width="1024" height="538" srcset="https://blog.codinghorror.com/content/images/size/w600/2024/12/image-1.png 600w, https://blog.codinghorror.com/content/images/size/w1000/2024/12/image-1.png 1000w, https://blog.codinghorror.com/content/images/2024/12/image-1.png 1024w" sizes="(min-width: 720px) 720px"></figure><ol start="2"><li><strong>We are not a rare form of life, but near the first to evolve</strong></li></ol><figure><img src="https://blog.codinghorror.com/content/images/2024/12/image-2.png" alt="" loading="lazy" width="1024" height="438" srcset="https://blog.codinghorror.com/content/images/size/w600/2024/12/image-2.png 600w, https://blog.codinghorror.com/content/images/size/w1000/2024/12/image-2.png 1000w, https://blog.codinghorror.com/content/images/2024/12/image-2.png 1024w" sizes="(min-width: 720px) 720px"></figure><ol start="3"><li><strong>Almost no life makes it to this point</strong></li></ol><figure><img src="https://blog.codinghorror.com/content/images/2024/12/image-3.png" alt="" loading="lazy" width="1024" height="528" srcset="https://blog.codinghorror.com/content/images/size/w600/2024/12/image-3.png 600w, https://blog.codinghorror.com/content/images/size/w1000/2024/12/image-3.png 1000w, https://blog.codinghorror.com/content/images/2024/12/image-3.png 1024w" sizes="(min-width: 720px) 720px"></figure><p>Those are three Great Filter possibilities, but the question remains: why are we so alone in the observable universe? I grant you that&nbsp;<a href="https://en.wikipedia.org/wiki/Observable_universe?ref=blog.codinghorror.com" rel="noopener nofollow ugc">what we&nbsp;<em>can</em>&nbsp;observe is appallingly tiny</a>&nbsp;given the unimaginable scale of the universe, so “what we can observe” may not be enough by many orders of magnitude.</p><p>I encourage you to <a href="http://waitbutwhy.com/2014/05/fermi-paradox.html?ref=blog.codinghorror.com" rel="noreferrer">read the entire article</a>, it's full of great ideas explained well, including many other Great Filter possibilites. Mostly I wanted to share <strong>my personal theory of why we haven't encountered alien life by now</strong>. Like computers themselves, things don't get larger. They get <em>smaller</em>. And <em>faster</em>. And so does intelligent life. </p><blockquote>Why build planet-size anything when the real action is in the small things? Small spaces, small units of time, <strong>everything gets smaller</strong>.</blockquote><p>Large is inefficient and unnecessary. Look at the history of computers: from giant to tiny and tinier. From slow to fast and faster. Personally, I have a feeling really advanced life eventually does away with all physical stuff that slows you down as soon as they can, and enters <a href="https://blog.codinghorror.com/the-infinite-space-between-words/" rel="noreferrer">the infinite spaces between</a>:</p><blockquote>This is, of course, a variant on the Fermi paradox: We don’t see clues to widespread, large-scale engineering, and consequently we must conclude that we’re alone. But the possibly flawed assumption here is when we say that highly visible construction projects are an inevitable outcome of intelligence.&nbsp;<strong>It could be that it’s the engineering of the small, rather than the large, that is inevitable.</strong>&nbsp;This follows from the laws of inertia (smaller machines are faster, and require less energy to function) as well as the speed of light (small computers have faster internal communication). It may be – and this is, of course, speculation – that advanced societies are building small technology and have little incentive or need to rearrange the stars in their neighborhoods, for instance. They may prefer to build nanobots instead.<p>— <a href="https://web.archive.org/web/20040604012520/http://www.usnews.com/usnews/tech/nextnews/archive/next031104.htm" rel="noreferrer">Seth Shostak</a></p></blockquote><p>Seth delivers an excellent TED talk on this topic as well:</p><figure></figure><p>If we can <a href="https://en.wikipedia.org/wiki/Observable_universe?ref=blog.codinghorror.com" rel="noreferrer">barely see far in the universe as is</a>, there's no way we could possibly see into the infinite space and time between.</p><figure><iframe width="200" height="113" src="https://www.youtube.com/embed/dJTU48_yghs?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" title="Her Official Trailer #1 (2013) - Joaquin Phoenix, Scarlett Johansson Movie HD"></iframe></figure><p>That is of course just my opinion, but <a href="https://www.justwatch.com/us/movie/her?ref=blog.codinghorror.com" rel="noreferrer">we'll see</a>.. eventually.</p>
        
    </section>
</article>
                                <article>

    <header>

        <h2>
            <a href="https://blog.codinghorror.com/i-fight-for-the-users/">I Fight For The Users</a>
        </h2>

            <div>
                <p><a href="https://blog.codinghorror.com/author/jeff-atwood/">
                                <img src="https://blog.codinghorror.com/assets/images/codinghorror.png" alt="Jeff Atwood">
                            </a>
                </p>
                
            </div>

        
    </header>

    <section>
        <p>If you haven't been able to keep up with my blistering pace of one blog post per year, I don't blame you. There's a lot going on right now. It's a busy time. But let's pause and take a moment to celebrate that Elon Musk destroyed Twitter. I <a href="https://www.wired.com/story/god-did-us-a-favor-by-destroying-twitter/?ref=blog.codinghorror.com" rel="noreferrer">can't possibly say it better than Paul Ford</a> so I'll just refer you there:</p><blockquote>Every five or six minutes, someone in the social sciences publishes a PDF with a title like “Humans 95 Percent Happier in Small Towns, Waving at Neighbors and Eating Sandwiches.” When we gather in groups of more than, say, eight, it’s a disaster. Yet there is something fundamental in our nature that desperately wants to get everyone together in one big room, to “solve it.” Our smarter, richer betters (in Babel times, the king’s name was Nimrod) often preach the idea of a town square, a marketplace of ideas, a centralized hub of discourse and entertainment—and we listen. But when I go back and read Genesis, I hear God saying: “My children, I designed your brains to scale to 150 stable relationships. Anything beyond that is overclocking. You should all try Mastodon.”</blockquote><p>It's been clear for quite some time that the early social media strategery of "jam a million people in a colosseum and let them fight it out with free speech" isn't panning out, but never has it been more clear than now, under the Elon Musk regime, that <a href="https://www.rollingstone.com/culture/culture-features/elon-musk-isnt-funny-bad-jokes-twitter-1234712950/?ref=blog.codinghorror.com" rel="noreferrer">being beholden to the whims of a billionaire going through a midlife crisis</a> isn't exactly healthy for society. Or you. Or me. Or anyone, really.</p><p>I tried to be fair; I gave the post-Elon Twitter era a week, thinking "how bad could it possibly be?" and good lord, <em>it was so much worse than I could have possibly ever imagined</em>. It's like Elon read the Dilbert pointy-haired-manager book on management and bonked his head on every rung of the ladder going down, generating an ever-growing <a href="https://www.vanityfair.com/news/2022/04/elon-musk-twitter-terrible-things-hes-said-and-done?ref=blog.codinghorror.com" rel="noreferrer">laundry list of terrible things no manager should ever do</a>. And he <em>kept going!</em></p><p>It's undeniably sad. I really liked Twitter, warts and all, <a href="https://blog.codinghorror.com/twitter-service-vs-platform/" rel="noreferrer">from 2007 onward</a>. In fact, it was the only "social network" I liked at all. Even when it became clear in the Trump era that Twitter was unhealthy for human minds, I soldiered on, gleaning what I could. I'm not alone in that; Clay Shirky's moribund signoff at the end of 2022 reflected how I felt:</p><figure><img src="https://blog.codinghorror.com/content/images/2023/11/image.png" alt="" loading="lazy" width="1348" height="1495" srcset="https://blog.codinghorror.com/content/images/size/w600/2023/11/image.png 600w, https://blog.codinghorror.com/content/images/size/w1000/2023/11/image.png 1000w, https://blog.codinghorror.com/content/images/2023/11/image.png 1348w" sizes="(min-width: 720px) 720px"></figure><p>Indeed, Twitter was murdered at the whims of a billionaire high on Ketamine while it was (mostly) healthy, <a href="https://www.gbnews.com/news/world/elon-musk-x-twitter-purchase-daughter-jenna-musk-woke-virus?ref=blog.codinghorror.com" rel="noreferrer">because of the "trans woke virus"</a>.  </p><p>I urge you, all of you, <strong>to disavow Twitter and never look at it again</strong>. No one who cares about their mental health should be on Twitter at this point, or linking to Twitter and feeding it the attention it thrives on. We should entomb Twitter deep in concrete with this public warning on its capstone:</p><figure><img src="https://media.infosec.exchange/infosec.exchange/media_attachments/files/110/240/386/903/991/473/original/d3ff3462bf229383.png" alt="This place is not a place of honor...no highly esteemed deed is commemorated here ...nothing valued is here." loading="lazy"></figure><p>In the end, I begrudgingly realized, as did Paul Ford, that Elon unwittingly did us a favor by killing Twitter. He demonstrated <strong>the very real dangers of any platform run by a king, a dictator, a tyrant, a despot, an autocrat</strong>. You can have all your content rug-pulled out from under you at any time, or watch in horror as your favorite bar... slowly transforms into a nazi bar. </p><figure><img src="https://blog.codinghorror.com/content/images/2023/11/image-1.png" alt="" loading="lazy" width="1363" height="1920" srcset="https://blog.codinghorror.com/content/images/size/w600/2023/11/image-1.png 600w, https://blog.codinghorror.com/content/images/size/w1000/2023/11/image-1.png 1000w, https://blog.codinghorror.com/content/images/2023/11/image-1.png 1363w" sizes="(min-width: 720px) 720px"></figure><p>I've been saying for a long time that decentralization is the way to go. We can and should have sane centralized services, of course, but <strong>it's imperative that we <em>also</em> build decentralized services which empower users and give them control</strong>, rather than treating them <a href="https://blog.codinghorror.com/are-you-a-digital-sharecropper/" rel="noreferrer">like digital sharecroppers</a>. That's what our <a href="https://discourse.org/?ref=blog.codinghorror.com" rel="noreferrer">Discourse project</a> is all about. I propose collective ownership of the content and the communities we build online. Yeah, it's more work, it's not "free" (sorry not sorry), but I have some uncomfortable news for you: those so-called "free" services <em>aren't really free</em>.</p><figure><img src="https://blog.codinghorror.com/content/images/uploads/2014/02/6a0120a85dcdae970b01a3fcc55683970b-800wi.png" alt="Geek-and-poke-pigs-free" loading="lazy"></figure><p>Which, again, is not to say that "free" services don't have a place in the world, they do, but please don't harbor any illusions about what you are sacrificing in the name of "free". Grow up.</p><p>I take a rather <a href="https://en.wikipedia.org/wiki/Tron?ref=blog.codinghorror.com" rel="noreferrer">Tron-like</a> view of the world when it comes to this stuff; in the software industry, our goal should be to <em>empower</em> users (with strong moderation tools), not exploit them. </p><figure><img src="https://blog.codinghorror.com/content/images/2023/11/image-3.png" alt="" loading="lazy" width="504" height="640"></figure><p>So I encourage you to explore alternatives to Twitter, ideally open source, federated alternatives. Is it messy? <em>Hell yes it's messy</em>. But so is democracy; it's worth the work, because it's the only survivable long term path forward. Anything worth doing is never <em>easy</em>.</p><p>I'm currently on <a href="https://en.wikipedia.org/wiki/Mastodon_(social_network)?ref=blog.codinghorror.com" rel="noreferrer">Mastodon</a>, an open source, federated Twitter alternative at <a href="https://infosec.exchange/@codinghorror?ref=blog.codinghorror.com">https://infosec.exchange/@codinghorror</a> – I urge you to join me on the Mastodon server of your choice, or quite literally <em>any other platform</em> besides Twitter. Really, whatever works for you. Pick what you like. Help make it better for everyone.</p><p>To inspire that leap of faith, I am currently auctioning off, with all funds to benefit <a href="https://en.wikipedia.org/wiki/The_Trevor_Project?ref=blog.codinghorror.com" rel="noreferrer">the Trevor Project</a> which offers assistance to LGBTQ youth, these 10 museum quality brass plaques of what I consider to be the best tweet of all time, hands down:</p><figure><img src="https://blog.codinghorror.com/content/images/2023/11/IMG_3328.jpg" alt="" loading="lazy" width="2000" height="1134" srcset="https://blog.codinghorror.com/content/images/size/w600/2023/11/IMG_3328.jpg 600w, https://blog.codinghorror.com/content/images/size/w1000/2023/11/IMG_3328.jpg 1000w, https://blog.codinghorror.com/content/images/size/w1600/2023/11/IMG_3328.jpg 1600w, https://blog.codinghorror.com/content/images/size/w2400/2023/11/IMG_3328.jpg 2400w" sizes="(min-width: 720px) 720px"></figure><p>(Blissfully, <a href="https://mastodon.social/@Horse_ebooks?ref=blog.codinghorror.com" rel="noreferrer">@horse_ebooks is also on Mastodon</a>. As they should be. As should you. Because everything happens so much.)</p><p>If you'd like to bid on the 10 brass plaques, follow these links to eBay, and please remember, it's for a great cause, and will piss Elon off, which makes it even sweeter:</p><p>(apologies, I had to cancel the old auctions because I forgot to allow international shipping – I've also made shipping free, worldwide.)</p><ol><li><a href="https://www.ebay.com/itm/225903779136?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903779136</a></li><li><a href="https://www.ebay.com/itm/225903780761?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903780761</a></li><li><a href="https://www.ebay.com/itm/225903784597?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903784597</a></li><li><a href="https://www.ebay.com/itm/225903785269?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903785269</a></li><li><a href="https://www.ebay.com/itm/225903785648?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903785648</a></li><li><a href="https://www.ebay.com/itm/225903786591?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903786591</a></li><li><a href="https://www.ebay.com/itm/225903787053?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903787053</a></li><li><a href="https://www.ebay.com/itm/225903788754?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903788754</a></li><li><a href="https://www.ebay.com/itm/225903789412?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903789412</a></li><li><a href="https://www.ebay.com/itm/225903789881?ref=blog.codinghorror.com">https://www.ebay.com/itm/225903789881</a></li></ol><p>I will sign the back of every plaque, because each one comes with my personal guarantee that it will easily outlive what's left of Twitter.</p>
        
    </section>
</article>

                            <p><a href="https://blog.codinghorror.com/page/2">More Posts</a>
                    


            </p></div>

                <p>
                    <a href="https://blog.codinghorror.com/page/2">See all <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256"><path d="M224.49,136.49l-72,72a12,12,0,0,1-17-17L187,140H40a12,12,0,0,1,0-24H187L135.51,64.48a12,12,0,0,1,17-17l72,72A12,12,0,0,1,224.49,136.49Z"></path></svg></a>
                </p>
        </main>


    </div>




    

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Playing Chess with 84,688 Regular Expressions (179 pts)]]></title>
            <link>https://nicholas.carlini.com/writing/2025/regex-chess.html</link>
            <guid>42619652</guid>
            <pubDate>Tue, 07 Jan 2025 05:46:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://nicholas.carlini.com/writing/2025/regex-chess.html">https://nicholas.carlini.com/writing/2025/regex-chess.html</a>, See on <a href="https://news.ycombinator.com/item?id=42619652">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      <p><i>Can chess, with regular expressions?
        Yes. Can chess, with regular expressions.</i>
      </p>
      
      
      

      <p>
        Over the holidays I decided it's been too long since I did something
        with entirely no purpose. So without further ado, I present to you ...
        <b>Regex Chess</b>: sequence of 84,688 regular expressions that,
        when executed in order, will play a (valid; not <i>entirely</i> terrible) move given a chess board as input.
        Here, I'll show you.
      </p>

<div>
            
            <p>Current executing regular expression will show here...</p>
        </div>

    

    
      <p>
        Specifically, this is the entirety of the program that is playing a move against you (no really, <a href="https://github.com/carlini/regex-chess/blob/main/main.py">I'm not kidding</a>, it really is this short):
      </p>

    
      <div><p><span>let </span><span>regex_list</span><span> = [/* a very </span><span>long</span><span> </span><span>list</span><span> of regular expressions */]</span></p>
<p><span>let </span><span>board</span><span> = </span><span>"rnbqkbnr / pppppppp / 8 / 8 / 8 / 8 / PPPPPPPP / RNBQKBNR w KQkq - 0 1"</span><span>;</span></p>

<p><span>for</span><span> (regex of regex_list) {</span></p>
<p><span><span>&nbsp; &nbsp; </span>board = re.replace(regex.pattern, regex.target)</span></p>
<p><span>}</span></p>
<p><span>display(board)</span></p>
</div>

      <p>
        By the end of this post you'll (hopefully)
        understand why this sequence of regular
        
        <span id="footnote1">
          <a href="#footnote1">
            <label for="foot">[a]</label>
          </a>
          <span>
            Now some snobby people when they see this are going to say something like
        "yoU SaiD yoU'Re GoIng to uSe rEGUlar EXPresSIONs buT thESE ArE nOT <a href="https://en.wikipedia.org/wiki/Regular_language"><i>ReGULaR </i></a>!!" I do not care.
          </span>
        </span>

        
        expressions is possible,
        and also what the specific regular expressions do.
      </p>

      <p>
        (If you're someone who subscribed to this blog in the last six months or so,
        and have gotten accustom to me writing about "serious" and "important" things,
        please treat this as your fair warning that this is MY WEBSITE and I MAKE THE RULES HERE
        and so today you're learning about RegexChess whether you like it or not.)
      </p>

      <p>
        As always, code for this project is available on <a href="https://github.com/carlini/regex-chess">GitHub</a>.
      </p>
        
        
      <br>
      <h2>Getting Started: A Regular Expression CPU</h2>

      <p>
        So how are we going to get regular expressions to play chess?
        Well, by making a regular expression computer, of course!
        More specifically, we're going to design a Branch-Free,
        Conditional-Execution,
        Single-Instruction Multiple-Data instruction set.
        And then make a sequence of regular expressions that interpret these instructions.
        (Kind of like a GPU instruction set. And a bit of ARM.
        But a lot slower.)
        And then from there we can program our new computer to play chess.
        So let's get started.
      </p>
        

      <p>
        
        (Some people may say I have an unhealthy obsession with building
        weird computers, c.f. <a href="https://nicholas.carlini.com/writing/2021/unlimited-register-machine-game-of-life.html">my game of life computer</a>
        or my <a href="https://github.com/carlini/printf-tac-toe">printf computer</a>.
        Those people are wrong,
        and just have an unhealthy obsession with the banal and ordinary.)
       </p>
        

      <br>
  <h2>Computer Design</h2>
  
  <p>
    Let me get started by explaining how I'm going to organize the data
    that the computer is going to operate over.
    Because we're working with regular expressions,
    the current <code>state</code> of the computer is going to be represented as
    a single string containing both the program "stack", and all variables in the following format:
  </p>

  <p>%%
#stack:
top item on stack
second item on stack
....
#variable1: value 1
#variable2: value 2
...
#variablek: value k</p>

  <p>
    Each <code>instruction</code> will either manipulate some variables on the stack,
    or will read or write to a given variable. Let's look at some basic instructions.
  </p>

  <h3>Basic Stack Operations</h3>

<h4>The <code>Push</code> Instruction</h4>
<p>
  Here's the implementation of the <code>push</code> command that adds a value to the top of the stack:
</p>

<div><p><span>def</span><span> </span><span>push</span><span>(const):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(r</span><span>"(%%\n#stack:\n)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"\g&lt;1&gt;"</span><span>+const+r</span><span>"\n"</span><span>)]</span></p>
</div>

<p>
  You should read the return type of these functions as a list of tuples.
  Each tuple represents a regex transformation to apply,
  where the left element is the pattern to match, and the right element is the replacement.
</p>

<p>
  As a brief regular expression refresher.
  Each tuple in this list has two parts: the regular expression, and the replacement.
  A regular expression will <i>match</i> a string if it can find a substring of whatever it's being applied against (the <i>state</i>, in our case).
  Most characters in a regular expression match themselves, but parentheses create
  a "match group" that can be referenced later.
</p>

<p>
  The second argument is the replacement string.
  Again, most characters mean "Replace with this character",
  but special sequences like \g&lt;1&gt; are back-references that refer to previously captured groups.
  In this case, \g&lt;1&gt; references the first captured group (anything matched within the first set of parentheses)---which in this case is the "%%\n#stack:\n" header.
</p>

<p>
  So, as a result of this operation executing on the stack, we find the occurrence of
  "%%\n#stack:\n" in the state,
  and insert the constant value below that (to the top of the stack).
</p>

<p>
  Let's see this in practice. Say we start with an empty stack:
</p>

<p><span data-group="Group 1 (Matched by regex)">%%
#stack:</span></p>

<p>
  If we execute <code>push("hello")</code>, the regular expression will:
</p>

<ul>
  <li>Match the pattern <code>%%\n#stack:\n</code> at the start of our state</li>
  <li>Capture this header into group 1 (the parentheses in the pattern create this capture group)</li>
  <li>Replace it with the captured group (<code>\g&lt;1&gt;</code>) followed by our constant "hello" and a newline</li>
</ul>

<p>
  This gives us:
</p>

<p><span data-group="Group 1 (Original header)">%%
#stack:</span>
hello</p>

<p>
  If we then execute <code>push("world")</code>, the same process repeats and we get:
</p>

<p><span data-group="Group 1 (Original header)">%%
#stack:</span>
world
hello</p>

<p>
  The regular expression always matches at the top of the stack area, so new items get pushed on top while preserving the existing stack contents below them.
</p>  

<h4>The <code>Pop</code> Instruction</h4>
<p>
  The <code>pop</code> instruction removes the top element from the stack:
</p>

<div><p><span>def</span><span> </span><span>pop</span><span>():</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(r</span><span>"(%%\n#stack:\n)([^\n]*)\n"</span><span>,</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"\1"</span><span>)]</span></p>
</div>

<p>
  Here we start to see a few of the special operators that make regular expressions powerful.
  The [^\n] block means "match any character that isn't a newline" and the * means "match zero or more of these."
  So taken together we're looking for a line that starts with "%%\n#stack:\n",
  and then on the next line, zero or more characters that aren't a newline (so, the entire line).
  The replacement is just the first line, which has the effect of removing the second line,
  popping the top of the stack.
</p>

<p>
  Let's see how this works in practice. Say we start with this stack:
</p>

<p><span data-group="Group 1 (Stack header)">%%
#stack:</span>
<span data-group="Group 2 (Top element to pop)">world</span>
hello</p>

<p>
  When we execute <code>pop()</code>, the regular expression will:
</p>

<ul>
  <li>Match the pattern beginning with <code>%%\n#stack:\n</code> (captured in group 1)</li>
  <li>Match any characters until the next newline (captured in group 2 - the "world")</li>
  <li>Replace everything matched with just group 1 (the header), effectively removing the top element</li>
</ul>

<p>
  This gives us:
</p>

<p><span data-group="Group 1 (Stack header)">%%
#stack:</span>
hello</p>


<p>
  Each pop operation removes exactly one element from the top of the stack, preserving any remaining elements below it.
</p>
  <h3>Variable &lt;-&gt; Stack Instructions</h3>

  <h4>Variable <code>Lookup</code></h4>
<p>
  To load the contents of a variable onto the top of the stack:
</p>

<div><p><span>def</span><span> </span><span>lookup</span><span>(variable):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span># Find the variable's value and push it onto the stack </span><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(r</span><span>"(%%\n#stack:)([^%]*\n#"</span><span>+variable+</span><span>": )([^</span><span>\n</span><span>]*)</span><span>\n</span><span>"</span><span>,</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"\1\n\3\2\3\n"</span><span>)]</span></p>
</div>

<p>
  This regular expression is a bit more complex than our previous ones. Let's break down what it does:
</p>

<ul>
  <li>The <code>[^%]*</code> matches basically any character (% only appears at the start of the program)
    and so lets us find any variable anywhere in the program.
  </li><li>The <code>[^\n]*</code> matches the variable's value by capturing everything until the end of the line</li>
  <li>The replacement creates a copy of the value and places it on top of the stack</li>
</ul>

<p>
  Let's see how this works in practice. Say we start with this state:
</p>

<p><span data-group="Group 1 (Stack header)">%%
#stack:</span>
<span data-group="Group 2 (Everything up to our variable)">#foo: hello
#bar: </span><span data-group="Group 3 (The value we want)">world</span>
#baz: 42</p>

<p>
  If we execute <code>lookup("bar")</code>, the regular expression will:
</p>

<ul>
  <li>Match the stack header in group 1</li>
  <li>Match everything up to and including "#bar: " in group 2</li>
  <li>Match "world" in group 3</li>
  <li>Use these groups to reconstruct the state with the value copied to the top of the stack</li>
</ul>

<p>
  And so running the replacement will result in the following state:
</p>

<p><span data-group="Group 1 (Stack header)">%%
#stack:</span>
world
<span data-group="Group 2 (Original variable definition)">#foo: hello
#bar: </span><span data-group="Group 3 (Original value)">world</span>
#baz: 42</p>

<p>
  The lookup operation preserved the original variable and its value while also placing a copy of the value on top of the stack. This allows us to read variable values without modifying them.
</p>

  <h4>Variable <code>Assignment</code></h4>
  <p>
    Assigning to a variable presents an interesting challenge: we don't know if the variable
    already exists. We need to handle both cases: updating an existing variable or creating
    a new one.
  </p>


      <p>
        Let me show you the implementation and then I'll walk you through it case by case.
      </p>

      <div><p><span>def</span><span> </span><span>assign_pop</span><span>(varname):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"(%%)\n#stack:\n([^\n]*)\n"</span><span> +</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>"([^%]*#"</span><span> + varname + r</span><span>": )[^\n]*"</span><span>,</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"\1`\n#stack:\n\3\2"</span><span>),</span></p>

<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"(%%)([^`]\n?#stack:\n)([^\n%]*)\n([^%]*)"</span><span>,</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"\1`\2\4#"</span><span> + varname + r</span><span>": \3\n"</span><span>),</span></p>

<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"%%`"</span><span>,</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"%%"</span><span>)</span></p>
<p><span><span>&nbsp; &nbsp; </span>]</span></p>
</div>

      <p>
        To begin let's assume the variable already exists. That is, the stack starts
        off looking like this, and assume we're calling assign_pop("bar"):
      </p>

      <p>%%
#stack:
world
#foo: hello
#bar: something
#othervar: othervalue</p>

      <p>
        When we run this regular expression list, we create the following capture groups:
      </p>
        

      <p><span data-group="Group 1 (%%)">%%</span>
#stack:
<span data-group="Group 2 (world)">world</span>
#foo: hello
<span data-group="Group 3 (#bar: )">#bar: </span>something
#othervar: othervalue</p>
  

  

  <p>
    After the replacement operation, we get this output:
  </p>

  <p><span data-group="Header">%%`</span>
#stack:
<span data-group="Stack declaration">#foo: hello
#bar: </span><span data-group="Variables">world</span>
#othervar: othervalue
  </p>

  <p>
    Now we proceed on to the next instruction, and <i>we don't match it</i> because the second regex fails if there's a back-tick after the program start %%. So nothing happens. And then finally, the third regex cleans things up for us.
  </p>
  
  
<p>
  <b>Handling Non-Existent Variables:</b>
    Let's consider what happens if the variable doesn't already exist. Again, assume we're calling <code>assign_pop("bar")</code>:
  </p>

  <p>
%%
#stack:
world
#foo: hello
#othervar: othervalue
  </p>

  <p>
    The first regex tries to match but fails because there is no "#bar" anywhere. So it doesn't do anything. But now the second regex tries to match and succeeds. It creates the following capture groups:
  </p>

  <p><span data-group="Group 1">%%</span>
<span data-group="Group 2">#stack:
world</span>
<span data-group="Group 3">#foo: hello
#othervar: othervalue</span>
  </p>

  <p>
    From here, we perform the rewrite and get the following output:
  </p>

  <p>
%%
#stack:
#foo: hello
#bar: world
#othervar: othervalue
  </p>

<p>
  And then the third regex is applied and does nothing.
</p>

<p>
  There are lots of instructions that use this trick to make sure we don't
  apply things in the order we don't want. For example, as an exercise for
  yourself, try to understand how the "is equal" instruction works:
</p>

<div><p><span>def</span><span> </span><span>eq</span><span>():</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"(%%\n#stack:\n)([^\n]*)\n\2\n"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"\1`True\n"</span><span>),</span></p>

<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"(%%\n#stack:\n)([^`][^\n]*)\n([^\n]*)\n"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"\1False\n"</span><span>),</span></p>

</div>

<br>
<h2>(Branch-Free) Conditionals</h2>

<p>
  Programming languages, in order to be interesting, usually need to have some kind of
  control flow. It's very hard to write some program without ever having an if statement.
  So let's now show how we're going to do this.
  (And I hope you did your homework, because we're going to use the
  same conditional execution trick again!)
  Here's the implementation of a conditional instruction:
</p>

<div><p><span>def</span><span> </span><span>cond</span><span>(tag):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(r</span><span>"%(%\n#stack:\nTrue)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"%\1`"</span><span>),</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"%(\n#stack:\nFalse)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>tag+r</span><span>"\1`"</span><span>),</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"\n(True|False)`\n"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>"</span><span>\n</span><span>"</span><span>)]</span></p>
</div>

<p>
  Let's walk through how this is going to work, starting with the case where the
  top of the stack is False.
</p>

<p>%%
#stack:
False
#variable: value</p>

<p>
  Initially, the first regex will fail to match, because the top element on the stack
  isn't True. So we go to the next regex, and see if it applies. This one does match,
  and makes the corresponding match groups.
</p>

<p><span data-group="Group 1 (Initial state)">%%
#stack:
False</span>
#variable: value</p>


<p>
  After we apply the replacement, we get the following stack.
</p>

<p>%tag
#stack:
False`
#variable: value</p>

<p>
  (And finally, using the same cleanup trick, we'll remove the used marker.)
</p>

<p>
  Now see what happened here? The program <i>no longer begins with <code>%%</code></i>.
  This means that EVERY instruction will fail to match, because they always make sure
  that the program begins with %%. So nothing else will happen.... until we <i>reactivate</i>
  it later with the following simple instruction:
</p>



<div><p><span>def</span><span> </span><span>reactivate</span><span>(tag):</span></p>
<p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span>return</span><span> [(r</span><span>"%"</span><span>+tag+r</span><span>"\n([^%]*)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>r</span><span>"%%\n\1"</span><span>)]</span></p></div>

<p>
  Let's now return to the True case for the conditional. This is the easy case: we
  basically don't do anything at all. We replace the stack with True` on the second
  regex, and then delete this line on the third. Easy.
</p>

<p>
        Notice that this means our code is actually branch-free,
        because every instruction is a conditional instruction. (Kind of like ARM's predicated execution, where most instructions can be conditionally executed based on status flags rather than using explicit branch instructions.)</p>
        
        
      <br>
      <h3>Loops (are impossible)</h3>

      <p>
        Because our program just consists of a sequence of regular expressions,
        you can't loop at all! That, technically, means we can't actually perform
        <a href="https://en.wikipedia.org/wiki/Turing_completeness">Turing Complete</a>
        But we can do any bounded computation by just <i>unrolling</i> any loops we may have.
        And fortunately computing the next move in a chess position is a bounded computation, so we can do just that. 
      </p>
        
        
      <h2>Single-Instruction Multiple-Data</h2>

<p>
  And now for my absolute favorite part of the language we've developed.
  By the magic of regular expressions (and the fact that they perform
  substitution globally over the entire string), we can run multiple <i>threads</i>
  simultaneously!
</p>

<p>
  That is, if we just write our state string as:
</p>

<p><span data-group="Group 1 (First thread header)">%%
#stack:</span>
<span data-group="Group 2 (First operand)">int0000101010</span>
<span data-group="Group 3 (Second operand)">int0001011100</span>
<span data-group="Group 1 (Second thread header)">%%
#stack:</span>
<span data-group="Group 2 (First operand)">int0000001101</span>
<span data-group="Group 3 (Second operand)">int0110000000</span></p>

<p>
  When we call <code>binary_add()</code>, both additions happen simultaneously! After execution:
</p>

<p>%%
#stack:
int0010001110
%%
#stack:
int0110001101</p>

<p>
  The reason this happens is because the regular expression matches work globally. When we match the "begin thread"
  operator (<code>%%</code>) twice, we get to perform operations on both threads simultaneously.
</p>

<p>
  So how do we actually make use of this feature? Let's look at some instructions that help us create and manage threads.
</p>

<br>
<h3>The Fork Instructions</h3>

<p>
  Here's a simple fork instruction that splits every currently running thread into two, 
  with the second one starting off inactive with a given tag:
</p>

<div><p><span>def</span><span> </span><span>fork_inactive</span><span>(tag):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(r</span><span>"%%\n([^%]*)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"%%\n\1"</span><span> + </span><span>"%"</span><span>+tag+r</span><span>"\n\1"</span><span>)</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>]</span></p>
</div>

<p>
  We can also, for example, <code>fork()</code> on a boolean, giving one thread
  the True case and another the False case. (This is something like McCarthy's
  Amb operator <a href="https://linkinghub.elsevier.com/retrieve/pii/S0049237X08720184">reference</a>)
</p>

<div><p><span>def</span><span> </span><span>fork_bool</span><span>(variable):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(r</span><span>"%%\n([^%]*)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"%%\n\1#"</span><span>+variable+r</span><span>": True\n%%\n\1#"</span><span>+variable+r</span><span>": False\n"</span><span>)</span></p></div>

<p>
  Let's see what happens when we apply multiple forks. Starting with a simple state:
</p>

<p><span data-group="Group 1 (Thread content)">%%
#stack:
somevalue
#x: 10</span></p>

<p>
  After calling <code>fork_bool("condition")</code>, we get:
</p>

<p>%%
#stack:
somevalue
#x: 10
#condition: True
%%
#stack:
somevalue
#x: 10
#condition: False</p>

<p>
  If we then call <code>fork_bool("c2")</code>, each existing thread splits into two:
</p>

<p>%%
#stack:
somevalue
#x: 10
#condition: True
#c2: True
%%
#stack:
somevalue
#x: 10
#condition: True
#c2: False
%%
#stack:
somevalue
#x: 10
#condition: False
#c2: True
%%
#stack:
somevalue
#x: 10
#condition: False
#c2: False</p>

<p>
  Now we have four simultaneous execution paths, exploring every possible combination of our boolean conditions at the same time.
  This is exceptionally useful for chess, when we might frequently want to consider multiple
  possible board states at the same time, and (for example) score them to see which is best.
  Instead of having to loop over every possible board state, we can just pretend we were doing it
  once but have them all happen at the same time.
</p>

        
        
<br>
<h2>Compiling to our little language</h2>

<p>
  Now that we have our CPU emulator, we can build a compiler to target our new assembly
  language.
</p>

<p>
  <i>"But wait I'm not reading this post for a lesson in compilers!"</i> you say??
  Fair point.
  Also I didn't go into this project trying to build a compiler,
  so instead what I have is more of a macro-assembler.
  It turns python-ish programs like this:
</p>

<div><p><span>def</span><span> </span><span>fib</span><span>():</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>a</span><span> = 1</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>b</span><span> = 2</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>for</span><span> _ </span><span>in</span><span> </span><span>range</span><span>(10):</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>next</span><span> = a + b</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>a</span><span> = b</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>b</span><span> = </span><span>next</span></p>
</div>

<p>
  Into a sequence of instructions like this:
</p>

<p>push(1)
assign_pop('a')
push(2) 
assign_pop('b')
lookup('a')
lookup('b')
binary_add()
assign_pop('next')
lookup('b')
assign_pop('a')
lookup('next')
assign_pop('b')
[... repeated 8 more times ...]
</p>

<br>
<h3>Compiling Through Symbolic Execution</h3>

<p>
  Rather than writing a traditional compiler with parsing and code generation
  phases, I took an unusual approach: symbolic execution. The key insight is
  that we can "execute" the Python code in a special way that records what
  operations would happen rather than actually performing them.
</p>

<p>
  Here's how it works: the <code>variables</code> argument isn't actually a
  dictionary---it's a special object that records every operation performed on
  it. It creates what we call a "trace" of the execution. When you write:
</p>

<p>a = b + 1</p>

<p>
  The tracer object records four operations:
</p>

<ol>
  <li>A <code>lookup</code> of variable 'b'</li>
  <li>A <code>push</code> of the constant 1</li>
  <li>A <code>binary_add</code> operation</li>
  <li>An <code>assign_pop</code> to variable 'a'</li>
</ol>

<br>
<h3>Handling Control Flow</h3>

<p>
  The trickiest part of this approach is handling branching control flow---<code>if</code> statements, specifically.
  (What about loops? We don't have those, so I never use them. Loops can only have constants.)
  We need to make sure we capture all possible execution paths. Here's how we do it:
</p>

<p>
  When we hit a conditional, we create two separate paths in our trace---one for when the condition is true, and one for when it's false. Each path records its own sequence of operations. Later, we merge these paths back together.
</p>

<p>
  For example, this Python code:
</p>

<div><p><span>if</span><span> x &gt; 0:</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>y</span><span> = 1</span></p>
<p><span>else</span><span>:</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>y</span><span> = 2</span></p>
</div>

<p>
  Generates something like this trace structure:
</p>

<p>lookup('x')      # Get x's value
push(0)          # Push 0
greater_than()   # Compare
cond('tag1')     # Branch on result
  # True path:
  push(1)
  assign_pop('y')
pause('tag2')
reactivate('tag1')
  # False path:
  push(2)
  assign_pop('y')
reactivate('tag2')</p>

<p>
  The magic of the compiler lies in how it handles control flow through branching.
  Let me explain this in a little bit more detail.
</p>

<p>
  When our compiler first starts processing code, it maintains a single linear
  path of instructions in the CallTree. Each instruction gets appended one after
  another as we go. This list of instructions looks entirely linear.
  When we   reach a conditional statement, though, things get interesting.
</p>

<p>
  Consider what happens when we hit a conditional statement like the <code>x &gt; 0</code>
  conditional above.
  When this happens, I detect it, and create a branch in the call tree representing the two
  paths simultaneously.
  Then, I just pretend this conditional was true, and fill out the true case of the tree.
  When we reach the end of the program we've done <i>some</i> of our compilation, but not all of it.
</p>


<p>
  Now comes the clever part.
  When compiling, we don't just trace the program once.
  We trace many times.
  And each time we trace, we arrange for the conditionals to go through whichever branch has been
  taken least often.
  In this way, the second time around, we record the instructions for the false branch.
</p>

      <p>
        Finally, once the conditional is over, we detect this and merge the two branches back together.
  This branching and merging mechanism is more than just a clever trick---it's essential to how our regex-based CPU actually works. When we convert this tree into instructions, each branch gets translated into a conditional regex operation (using our cond instruction) that can selectively activate and deactivate different parts of our program state. The merge points become reactivate instructions that ensure we continue execution on the correct path.
</p>

<br>
      <h2>Writing a Chess Engine</h2>

      <p>
        Okay, so we're finally to the part of this post where we can actually start writing
        a chess engine. (And at the part where some of the emulator design decisions will
        make sense.)
      </p>

      <p>
        For the most part, this is entirely straightforward and mirrors how you would write a chess
        engine in any other programming language.
        But this branching thing with SIMD is what gives us the power to make things go fast.
      </p>

      <p>
        Let's consider the following (simplified) program that calculates
        all the valid pawn moves.
      </p>


<div><p><span>def</span><span> </span><span>pawn_moves</span><span>(initial_board):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span># Step 1: Find all pawns and create a list of their positions<span>&nbsp;</span></span><span></span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>pawnpos_list</span><span> = find_all_pawns(initial_board)</span></p>

<p><span><span>&nbsp; &nbsp; </span></span><span># Step 2: Create parallel states for each pawn (up to 8) </span><span></span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>MAX_PAWNS</span><span> = 8</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>for</span><span> iteration </span><span>in</span><span> </span><span>range</span><span>(MAX_PAWNS):</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>if</span><span> </span><span>not</span><span> pawn_list.is_empty():</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>pawn_pos</span><span> = pawnpos_lst.remove_first()</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>fork_inactive(</span><span>"waiting"</span><span>)</span></p>

<p><span><span>&nbsp; &nbsp; </span></span><span># Step 3: Switch to processing the parallel states </span><span></span></p>
<p><span><span>&nbsp; &nbsp; </span>pause(</span><span>"main"</span><span>)</span></p>
<p><span><span>&nbsp; &nbsp; </span>reactivate(</span><span>"inactive"</span><span>)</span></p>

<p><span><span>&nbsp; &nbsp; </span></span><span># Step 4: Generate moves for all pawns simultaneously<span>&nbsp;</span></span><span> </span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>candidate_moves</span><span> = []</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>if</span><span> initial_board[pawn_pos + (0, 1)].is_empty():</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>candidate_moves.append(pawn_pos + (0, 1))</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>if</span><span> pawn_pos.y == 2:</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>if</span><span> initial_board[pawn_pos + (0, 2)].is_empty():</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>candidate_moves.append(pawn_pos + (0, 2))</span></p>

<p><span><span>&nbsp; &nbsp; </span></span><span>if</span><span> initial_board[pawn_pos + (1, 1)].has_opponent():</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>candidate_moves.append(pawn_pos + (1, 1))</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>if</span><span> initial_board[pawn_pos + (-1, 1)].has_opponent():</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>candidate_moves.append(pawn_pos + (-1, 1))</span></p>

<p><span><span>&nbsp; &nbsp; </span></span><span># Step 5: Switch back and merge results<span>&nbsp;</span></span><span> </span></p>
<p><span><span>&nbsp; &nbsp; </span>pause(</span><span>"inactive"</span><span>)</span></p>
<p><span><span>&nbsp; &nbsp; </span>reactivate(</span><span>"main"</span><span>)</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>candidate_moves</span><span> = merge_variables_from_threads(</span><span>"inactive"</span><span>)</span></p>
</div>

<h3>Step 1: Finding the Pawns</h3>
<p>
  The <code>find_all_pawns()</code> function scans through our board representation,
  looking for white pawns (represented as 'P' in the FEN string).
  It returns a list of the position of each of these pawns.
  As an example, if we run our program on the following
  position with three pawns on d2, e2, and f2, this creates a semicolon-separated list in the pawnpos_lst variable as follows
</p>

<p>%%
#stack:
#board: 4k3/8/8/8/8/8/3PPP2/4K3
#pawnpos_lst: d2;e2;f2;</p>

<h3>Step 2: State Creation</h3>
<p>
  Now comes the clever part. The <code>fork_inactive</code> instruction, as described above, duplicates our entire program state. Each time it runs, it creates an exact copy of the currently running thread, but marks the new copy with %waiting instead of %%. (Recall this means instructions won't apply to this thread.) At the same time, it takes one position from our pawnpos_lst and assigns it to a new variable pawnpos in the copied state.
</p>

<p>
  When our loop runs three times, each <code>fork_inactive</code> operation splits off a new parallel universe where we'll process a different pawn. The regex operation that does this copying preserves all existing variables but adds the new pawnpos variable with the specific position for that copy to process.
</p>

<p>%%
#stack:
#board: 4k3/8/8/8/8/8/3PPP2/4K3
#pawnpos_lst: 

%waiting
#stack:
#board: 4k3/8/8/8/8/8/3PPP2/4K3
#pawnpos: d2

%waiting
#stack:
#board: 4k3/8/8/8/8/3PPP2/4K3
#pawnpos: e2

%waiting
#stack:
#board: 4k3/8/8/8/8/3PPP2/4K3
#pawnpos: f2</p>

<h3>Step 3: Activation Switch</h3>
<p>
  Recall that the pause and reactivate operations work by manipulating the %% markers that indicate which states are active. The pause("main") operation changes our original %% to %main, effectively deactivating it. Then reactivate("inactive") finds all states marked with %waiting and changes them to %%, making them the new active states.
</p>

<h3>Step 4: Parallel Move Generation</h3>
<p>
  Here's where the SIMD magic happens. Each check for a possible move---forward one square, forward two squares, or diagonal captures---executes across all active states simultaneously. When we check if the square ahead is empty, we're actually checking d3, e3, and f3 all in one operation. For each valid move, we add this to the candidate_moves list. 
</p>

<p>
  (I've significantly simplified the program for visual purposes here. In
  reality I don't work directly over the FEN strings but expand them to 64
  independent variables for each of the 64 squares and read and write to these
  squares directly. This makes processing the board state much easier. But for
  the purpose of this blog post it's easier to show visually as if it worked on FEN strings alone.)
</p>

<p>%main
#stack:
#board: 4k3/8/8/8/8/8/3PPP2/4K3
#pawnpos_lst: 

%%
#stack:
#board: 4k3/8/8/8/8/8/3PPP2/4K3
#pawnpos: d2
#candidate_moves: d3;d4

%%
#stack:
#board: 4k3/8/8/8/8/8/3PPP2/4K3
#pawnpos: e2
#candidate_moves: e3;e4

%%
#stack:
#board: 4k3/8/8/8/8/8/3PPP2/4K3
#pawnpos: f2
#candidate_moves: f3;f4</p>

<h3>Step 5: Merging Results</h3>
<p>
  The final merge operation combines all the candidate_moves lists from our parallel states. It first switches activation back to the main state using pause and reactivate. Then merge_variables_from_threads (again, a pseudo-op I've made up for visual clarity, in practice this requires like 10 different instructions on my real machine) match all the candidate_moves lists across our inactive states and concatenates them together.
</p>

<p>
  What this means is that while the code we wrote code <i>looks</i> like it processes one pawn at a time, our regex engine's ability to process multiple states means we're actually handling all pawns simultaneously. Every operation, from checking empty squares to building move lists, happens in parallel across all our active states.
</p>

      <p>
        And this is how every piece operation works.
        Because this post is already getting quite long, I won't walk through each piece one by one, but if you're interested definitely go look at the <a href="https://github.com/carlini/regex-chess/blob/main/chess_engine.py">chess-engine.py</a> for the details.
      </p>

      <br>
<h2>Playing a Turn</h2>

<p>
  Now let's walk through the overall game loop that handles everything.
</p>


<div><p><span>def</span><span> </span><span>play_turn</span><span>():</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span># Step 1: Read the human entered move from the input </span><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>board_before_move</span><span>, </span><span>src</span><span>, </span><span>dst</span><span> = from_pretty_utf8_to_fen()</span></p>

<p><span><span>&nbsp; &nbsp; </span></span><span># Step 2: Check if their move is valid </span><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>after_move</span><span> = board_before_move.make_move(src, dst)</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>next_boards</span><span> = compute_legal_boards(board_before_move)</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>next_board</span><span> = fork_on_list(next_boards)</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>if</span><span> after_move != next_board:</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>destroy_active_thread()</span></p>

<p><span><span>&nbsp; &nbsp; </span></span><span># Step 3: Generate the computer's reply<span>&nbsp;</span></span><span> <span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></span></p>
  <p><span><span>&nbsp; &nbsp; </span></span><span>candidate_boards</span><span> = compute_and_score_legal_boards(after_move)</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>candidate_board</span><span> = fork_on_list(candidate_boards)</span></p>

<p><span><span>&nbsp; &nbsp; </span>keep_best_scoring_board(score)</span></p>
<p><span><span>&nbsp; &nbsp; </span>from_fen_to_pretty_utf8(candidate_board)</span></p>

</div>

<p>
  Say we're at the start of a game, and the human enters "e2e4" (the king's pawn opening).
  Here's how our code processes this:
</p>

<h3>Step 1: Reading the Move</h3>

<p>
  Initially, the function <code>from_pretty_utf8_to_fen()</code> converts our pretty-printed
  board with Unicode chess pieces back into FEN notation.
  It also extracts the source and destination squares from the input:
</p>

<p>%%
#stack:
#board: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR
#src: e2
#dst: e4</p>

<h3>Step 2: Move Validation</h3>

<p>
  Now we need to check if this is a valid move.
  Rather than writing entirely new code that explicitly checks if a move is legal,
  we use our parallel processing power again.
  The process works in three stages:
</p>

<p>
  First, <code>make_move</code> applies the human's move to create a new board state:
</p>

<p>%%
#stack:
#board: rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR
#after_move: rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR</p>

<p>
  Then <code>compute_legal_boards</code> generates <i>all</i> possible legal moves from the starting position, creating a list like:
</p>

<p>%%
#stack:
#next_boards: rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR;
              rnbqkbnr/pppppppp/8/8/8/3P4/PPP1PPPP/RNBQKBNR;
              rnbqkbnr/pppppppp/8/8/8/4P3/PPPP1PPP/RNBQKBNR;
              ...</p>

<p>
  Finally, fork_on_list creates parallel states for each legal board position:
</p>

<p>%%
#stack:
#board: rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR

%%
#stack:
#board: rnbqkbnr/pppppppp/8/8/8/3P4/PPP1PPPP/RNBQKBNR

%%
#stack:
#board: rnbqkbnr/pppppppp/8/8/8/4P3/PPPP1PPP/RNBQKBNR</p>

<p>
  The <code>destroy_active_thread()</code> call removes any thread where the board doesn't match after_move.
  In our case, only the e2-e4 position survives, confirming it's a legal move.
  (If no legal move is made, I have a special regex that will replace the entire output with just the hard-coded text "Illegal Move.")
</p>

<h3>Step 3: Computer's Reply</h3>

<p>
  Now we repeat a similar process to find the best reply.
  First, <code>compute_and_score_legal_boards</code> generates all possible black responses.
  This function does a little bit of magic,
  and when it returns the next possible boards, it returns with each board
  <i>the score of that board after whites next best move</i>
  I'll explain how this works below. But suffice to know that what this function returns for
  now the possible positions as <code>compute_legal_boards</code> does, but also the score of the position.
        (This is where the MiniMax happens.
        The score here is how good each position is from the player's perspective, after they have
        made their best reply move.)
      </p>

<o>
  So running this function gives us something like this as output


<p>%%
#stack:
#board: rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR
#score: 100

%%
#stack:
#board: rnbqkbnr/ppppp1pp/8/5p2/4P3/8/PPPP1PPP/RNBQKBNR
#score: 102

%%
#stack:
#board: rnbqkb1r/pppppppp/5n2/8/4P3/8/PPPP1PPP/RNBQKBNR
  #score: 98</p>


<p>
  <code>keep_best_scoring_board(score)</code> collapses these parallel states,
  but this time keeping only the position with the highest score according to black (in this example, the f7-f5 response).
  This is the second half of the minimax search---the one where we look at all of the options where our
  opponent had a pick the first time around, and now we pick among these the best for us.
  Finally, from_fen_to_pretty_utf8 converts this position back to the pretty Unicode display format.
  As a result, I never have to build any explicit search algorithms or lists to store lists of positions,
  that's all handled by the parallel processing.
</p>

<br>
<h2>MiniMax Search (for free)</h2>
  
      <p>
        The final missing piece of this process is how to implement the <code>compute_and_score_legal_boards</code>
      function in a way that gets us the depth-2 minimax search.
      And here I cheat (a lot).
      </p>

<p>
  It is relatively easy to generate <i>pseudo-</i>legal moves---that is, moves that are basically legal, but might leave the king in check.
  In chess this isn't allowed (you can't end your turn in check) and so the second thing that has to happen
  is I have to delete all of the moves that would leave the king in check.
</p>

<p>
  The way to do this is to again generate all possible opponent replies and see if any of them would possible "capture" the king. If they would, then the position is illegal because that's the definition of check.
  But what this means is we're already doing a depth-2 search.
  We have our initial board state.
  Depth 1, we generate all possible moves the computer wants to make.
  Then depth 2, we generate all possible moves the opponent could make to ensure we're not in check.
</p>

<p>
  All I have to do now then is score each of these opponent-generated moves and return the score of the candidate
  position as the best scoring among all of these (from the perspective of the opponent).
  And then I can just take the best scoring of these (from the persepctive of the computer) as its best move
</p>

<p>
  Now there's one slight problem here, which is why real chess engines don't do this.
  And that is this isn't technically a full depth-2 minimax search because it would allow the opponent
  moves generated in reply to be illegal because they could put their king in check.
  So doing this fully correctly would require a depth-3 search, which would significantly increase
  the cost of the search.
  So I just don't do that.
</p>

<p>
  Importantly, the computer will never generate an illegal reply.
  This just means that, in some cases, the reply it generates won't be quite as strong as if it had
  done a full depth-2 minimax search because it might assume the opponent could make an illegal move.
</p>


<br>
<h2>Everything Else</h2>
      <p>
        There's a lot more that goes into the program than this. If you're curious I'd encourage you to read through the source
        code on <a href="https://github.com/carlini/regex-chess">GitHub</a>.
        Among the things I think are particularly interesting that I didn't talk about here:
      </p>

      <ul>
        <li>How to parallelize move generation for sliding pieces like bishops, rooks, and queens all at exactly the same time</li>
        <li>How castling is implemented with a specialized "is this square under attack" procedures</li>
        <li>Conversion to and from the FEN chess board to one has a single variable per square</li>
        <li>Detection of castling rights by tracking the king and rook positions</li>
        <li>The implementation of en passant capture detection and tracking</li>
        <li>An extensive 2000 lines of tests, validating the correctness of the engine over several thousand games</li>
      </ul>
        
        
      <br>
      <h2>Some Performance Tricks</h2>

      <p>
        Before I leave you, I thought I'd describe a few fun performance optimizations I made.
        My initial code would take roughly 30 minutes to generate a single human reply---perfect for chess by mail, less perfect for chess by browser.
        The final code, on my machine, takes somewhere between one and ten seconds depending on the position.
        So I managed about a factor of 100 speedup by making sure I got all the details right.
      </p>

      <p>
        (I've already shown you my favorite performance trick: parallel processing.
        Now I'll tell you a few more.)
      </p>

      <br>
      <h3>Delete Intermediate Variables</h3>

      <p>
        One of the biggest performance killers in the initial implementation was keeping
        too many intermediate variables around. Every variable lookup requires scanning
        through the entire state string to find the variable's value - an O(n) operation.
        Additionally, when we fork execution states, we need to copy all these variables,
        which bloats our memory usage significantly.
      </p>

      <p>
        By aggressively deleting variables as soon as they're no longer needed,
        and reusing variable names where possible, I was able to dramatically reduce
        both the computation time and memory usage. Evaluating a single move now
        takes about 300MB of internal state, down from 10GB in the unoptimized version.
      </p>
      
      <br>
      <h3>Fast Regex Matching</h3>
      <p>
        Recall earlier that I defined the conditional operator like this
      </p>

      <div><p><span>def</span><span> </span><span>cond</span><span>(tag):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(r</span><span>"%(%\n#stack:\nTrue)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"%\1`"</span><span>),</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"%(\n#stack:\nFalse)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>tag+r</span><span>"\1`"</span><span>),</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"\n(True|False)`\n"</span><span>,</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>"</span><span>\n</span><span>"</span><span>)]</span></p>
</div>

      <p>
        Why do you think the third regex is written this way? Wouldn't it just be shorter
        if it was like this instead:
      </p>
        
      <div><p><span>def</span><span> </span><span>cond</span><span>(tag):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(r</span><span>"%(%\n#stack:\nTrue)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>r</span><span>"%\1`"</span><span>),</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"%(\n#stack:\nFalse)"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>tag+r</span><span>"\1`"</span><span>),</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>(r</span><span>"(True|False)`\n"</span><span>,</span></p>
<p><span><span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></span><span>""</span><span>)]</span></p></div>

      <p>
        Notice the missing newline <code>\n</code>.
      </p>

      <p>
        As it turns out, the first version actually improves the efficiency of this
        instruction by a factor of two! By changing just one character!
        The reason for this is due to the details about how regular expressions work
        and how they're matched.
      </p>

      <p>
        There are going to be lots of True/False strings all throughout the code.
        But most of them will be part of variables, and not the top element on the stack.
        By requiring the preceding newline and "#stack:\n" prefix in our pattern,
        we ensure the regex engine can quickly skip over all the True/False strings
        that appear in variable names or values. This dramatically reduces the number
        of attempted matches the regex engine needs to make.
      </p>
        
      <br>
      <h3>Writing Special-Purpose Instructions</h3>

      <p>
        Sometimes it's worth writing specialized instructions rather than composing existing ones.
        For example, one of the slowest parts of the initial implementation was in a loop that scanned
        each of the squares to find all pieces of a given type. This required a bunch of conditionals,
        and within each conditional, a bunch of stack operations.
        But you can just smash the entire loop body into a single regex instruction:
      </p>

      <div><p><span>def</span><span> </span><span>do_piece_assign</span><span>(piece_chr, piece, x, y, pos):</span></p>
<p><span><span>&nbsp; &nbsp; </span></span><span>return</span><span> [(f</span><span>"%%([^%]*#</span><span>{pos}</span><span>: </span><span>{piece_chr}</span><span>[^%]*)"</span><span> +</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>f</span><span>"#</span><span>{piece}</span><span>x_lst: ([^</span><span>\n</span><span>]*)</span><span>\n</span><span>"</span><span> +</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>f</span><span>"#</span><span>{piece}</span><span>y_lst: ([^</span><span>\n</span><span>]*)</span><span>\n</span><span>"</span><span> +</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>f</span><span>"#</span><span>{piece}</span><span>pos_lst: ([^</span><span>\n</span><span>]*)</span><span>\n</span><span>"</span><span>,</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>fr</span><span>"%%\1#</span><span>{piece}</span><span>x_lst: </span><span>{x}</span><span>;\2\n"</span><span> +</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>fr</span><span>"#</span><span>{piece}</span><span>y_lst: </span><span>{y}</span><span>;\3\n"</span><span> +</span></p>
<p><span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>fr</span><span>"#</span><span>{piece}</span><span>pos_lst: </span><span>{pos}</span><span>;\4\n"</span><span>)]</span></p></div>

      <p>
        The final major optimization comes from maximizing how much we can do in parallel.
        Remember that our regex engine can process multiple states simultaneously---this means
        that instead of generating moves one at a time, we can generate them all at once.
      </p>

      <p>
        For example, when generating rook moves, instead of checking each direction
        sequentially, we can fork eight parallel states---one for each possible direction.
        (Notice that "up" and "down" are different directions.)
        Each state then moves its rook as far as it can go in that direction. This turns
        what would be a loop into a single parallel operation.
      </p>

      <p>
        Similarly, when evaluating positions, instead of scoring one position at a time,
        we create parallel states for each candidate position and evaluate them all simultaneously.
        This parallel evaluation is particularly effective because most of our operations
        (like counting piece values) work identically across all states.
      </p>

      <br>
      <h2>Conclusion</h2>

      <p>
        What do you want out of a conclusion to a blog post like this?
        I don't really have much to conclude.
        I guess I'll just say that
        I think more people should do entirely pointless things like this.
        It's a lot of fun,
        no one cares how long it takes you to finish,
        no one cares if it works or not,
        and incidentally, it teaches you more than you wanted to know about
        dozens of areas of computer science outside your field.
      </p>

      <p>
        I hope to have a few more entirely pointless things like this coming later this year.
        If you liked this sort of thing, you might find it fun to read this other article I wrote
        about <a href="https://github.com/carlini/printf-tac-toe">how to play tic-tac-toe</a>
        using C's <code>printf</code> statement,
        or how I wrote <a href="https://nicholas.carlini.com/writing/2019/javascript-doom-clone-13k.html">a Doom clone in 13kB of JavaScript</a>.
      </p>

    </o></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Nvidia's Project Digits is a 'personal AI supercomputer' (247 pts)]]></title>
            <link>https://techcrunch.com/2025/01/06/nvidias-project-digits-is-a-personal-ai-computer/</link>
            <guid>42619139</guid>
            <pubDate>Tue, 07 Jan 2025 04:14:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://techcrunch.com/2025/01/06/nvidias-project-digits-is-a-personal-ai-computer/">https://techcrunch.com/2025/01/06/nvidias-project-digits-is-a-personal-ai-computer/</a>, See on <a href="https://news.ycombinator.com/item?id=42619139">Hacker News</a></p>
Couldn't get https://techcrunch.com/2025/01/06/nvidias-project-digits-is-a-personal-ai-computer/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Nvidia announces next-gen RTX 5090 and RTX 5080 GPUs (127 pts)]]></title>
            <link>https://www.theverge.com/2025/1/6/24337396/nvidia-rtx-5080-5090-5070-ti-5070-price-release-date</link>
            <guid>42618761</guid>
            <pubDate>Tue, 07 Jan 2025 03:12:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theverge.com/2025/1/6/24337396/nvidia-rtx-5080-5090-5070-ti-5070-price-release-date">https://www.theverge.com/2025/1/6/24337396/nvidia-rtx-5080-5090-5070-ti-5070-price-release-date</a>, See on <a href="https://news.ycombinator.com/item?id=42618761">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Nvidia is officially <a href="https://go.skimresources.com/?id=1025X1701640&amp;xs=1&amp;url=https%3A%2F%2Fwww.nvidia.com%2Fen-gb%2Fgeforce%2Fnews%2Frtx-50-series-graphics-cards-gpu-laptop-announcements%2F">announcing its RTX 50-series</a> GPUs today. After months of leaks and rumors, the next-generation RTX Blackwell GPUs are now official, and there are four of them on the way. </p><p>Nvidia CEO Jensen Huang revealed the RTX 50-series GPUs during a CES keynote this evening, announcing a $1,999 RTX 5090, a $999 RTX 5080, a $749 RTX 5070 Ti, and a $549 RTX 5070. Nvidia’s new RTX 5090 and RTX 5080 GPUs will both be available on January 30th, with the RTX 5070 Ti and RTX 5070 to follow in February.</p><div><div role="button" aria-label="Zoom" tabindex="0"><figure><div><p><span><img alt="Nvidia’s RTX 5090 GPU is surprisingly small." loading="lazy" decoding="async" data-nimg="fill" sizes="(max-width: 1023px) 100vw, 744px" srcset="https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/376x212/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 376w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/384x216/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 384w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/415x233/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 415w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/480x270/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 480w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/540x304/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 540w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/640x360/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 640w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/750x422/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 750w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/828x466/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 828w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/1080x608/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 1080w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/1200x675/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 1200w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/1440x810/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 1440w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/1920x1080/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 1920w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/2048x1152/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 2048w, https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/2400x1350/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg 2400w" src="https://duet-cdn.vox-cdn.com/thumbor/0x0:3840x2160/2400x1350/filters:focal(1920x1080:1921x1081):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820626/geforce_rtx_5090_key_visual.jpg" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></span></p></div></figure></div><div><figcaption><em>Nvidia’s RTX 5090 GPU is surprisingly small.</em></figcaption> <p><cite>Image: Nvidia</cite></p></div></div><p>The RTX 50-series GPUs include a new design for the Founders Edition, with just two double flow-through fans, a 3D vapor chamber, and GDDR7 memory. All of the RTX 50-series cards are PCIe Gen 5 and include DisplayPort 2.1b connectors to drive displays up to 8K and 165Hz. </p><p>Surprisingly, the <a href="https://go.skimresources.com/?id=1025X1701640&amp;xs=1&amp;url=https%3A%2F%2Fwww.nvidia.com%2Fen-gb%2Fgeforce%2Fgraphics-cards%2F50-series%2Frtx-5090%2F">RTX 5090 Founders Edition</a> will be a two-slot GPU and will be capable of fitting inside small form factor PCs — a big departure from the size of the RTX 4090. The RTX 5090 has 32GB of GDDR7, a memory bandwidth of 1,792GB/sec, and a massive 21,760 CUDA cores. </p><p>This all adds up to a GPU that Nvidia says will be two times faster than the RTX 4090, thanks to DLSS 4 and the Blackwell architecture. But it will come at a cost of power consumption, as Nvidia says the RTX 5090 will have a total graphics power of 575 watts and a recommended PSU requirement of 1000 watts. That’s 125 watts more than the RTX 4090, but hopefully the RTX 5090 will be a lot more power efficient so that you’ll rarely be using the full 575 watts.</p><p>Nvidia demonstrated <em>Cyberpunk 2077</em> running on an RTX 5090 with DLSS 4 at 238fps compared to 106fps on an RTX 4090 with DLSS 3.5. Both GPUs are running the game with full ray tracing enabled.</p><p><a href="https://go.skimresources.com/?id=1025X1701640&amp;xs=1&amp;url=https%3A%2F%2Fwww.nvidia.com%2Fen-gb%2Fgeforce%2Fgraphics-cards%2F50-series%2Frtx-5080%2F">The RTX 5080</a> is designed to be twice as fast as the RTX 4080 and will include 16GB of GDDR7 memory, a memory bandwidth of 960GB/sec, and 10,752 CUDA cores. The RTX 5080 will have a total graphics power of 360 watts and Nvidia is recommending a 850-watt power supply. Nvidia is promising big performance gains with the RTX 5080 over the previous RTX 4080 model as a result of these specs.</p><div><div role="button" aria-label="Zoom" tabindex="0"><figure><div><p><span><img alt="RTX 5090 performance." loading="lazy" decoding="async" data-nimg="fill" sizes="(max-width: 1023px) 100vw, 744px" srcset="https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/376x247/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 376w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/384x252/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 384w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/415x273/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 415w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/480x315/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 480w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/540x355/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 540w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/640x420/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 640w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/750x493/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 750w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/828x544/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 828w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/1080x709/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 1080w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/1200x788/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 1200w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/1440x946/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 1440w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/1920x1261/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 1920w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/2048x1345/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 2048w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/2400x1576/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg 2400w" src="https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/2400x1576/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820676/nvidia_geforce_rtx_5090_performance_chart.jpg" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></span></p></div></figure></div><div><figcaption><em>RTX 5090 performance.</em></figcaption> <p><cite>Image: Nvidia</cite></p></div></div><div><div role="button" aria-label="Zoom" tabindex="0"><figure><div><p><span><img alt="Nvidia’s RTX 5080 performance promises." loading="lazy" decoding="async" data-nimg="fill" sizes="(max-width: 1023px) 100vw, 744px" srcset="https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/376x247/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 376w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/384x252/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 384w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/415x273/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 415w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/480x315/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 480w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/540x355/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 540w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/640x420/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 640w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/750x493/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 750w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/828x544/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 828w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/1080x709/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 1080w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/1200x788/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 1200w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/1440x946/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 1440w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/1920x1261/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 1920w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/2048x1345/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 2048w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/2400x1576/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg 2400w" src="https://duet-cdn.vox-cdn.com/thumbor/0x0:2687x1765/2400x1576/filters:focal(1344x883:1345x884):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820646/nvidia_geforce_rtx_5080_performance_chart.jpg" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></span></p></div></figure></div><div><figcaption><em>Nvidia’s RTX 5080 performance promises.</em></figcaption> <p><cite>Image: Nvidia</cite></p></div></div><p>Nvidia is also launching an <a href="https://go.skimresources.com/?id=1025X1701640&amp;xs=1&amp;url=https%3A%2F%2Fwww.nvidia.com%2Fen-gb%2Fgeforce%2Fgraphics-cards%2F50-series%2Frtx-5070-family%2F">RTX 5070 Ti</a> and <a href="https://go.skimresources.com/?id=1025X1701640&amp;xs=1&amp;url=https%3A%2F%2Fwww.nvidia.com%2Fen-gb%2Fgeforce%2Fgraphics-cards%2F50-series%2Frtx-5070-family%2F">RTX 5070</a>. The RTX 5070 Ti includes 16GB of GDDR7 memory, a memory bandwidth of 896GB/s, and 8,960 CUDA cores. The RTX 5070 has 12GB of GDDR7, a memory bandwidth of 672 GB/sec, and 6,144 CUDA cores. The RTX 5070 Ti will have a total graphics power of 300 watts and require a 750-watt PSU, while the RTX 5070 has a total graphics power of 250 watts and only needs a 650-watt PSU.</p><p>Nvidia says the RTX 5070 Ti will be 2x faster than the RTX 4070 Ti, and the RTX 5070 should be twice as fast as the RTX 4070. Huang even claimed on stage at CES that the RTX 5070 will deliver “RTX 4090 performance at $549,” but this will undoubtedly be because of DLSS 4 improvements and not pure rasterization performance.</p><p>Nvidia is also bringing its RTX 50-series to laptops, with the RTX 5090 laptop GPU debuting with 24GB of GDDR7 memory. The RTX 5080 laptop GPU will ship with 16GB of GDDR7 memory, the RTX 5070 Ti with 12GB of GDDR7 memory, and the RTX 5070 with just 8GB of GDDR7 memory. RTX 50-series laptops will be available starting in March from a variety of PC makers.</p><div><div role="button" aria-label="Zoom" tabindex="0"><figure><div><p><span><img alt="RTX 50-series laptops are coming in March." loading="lazy" decoding="async" data-nimg="fill" sizes="(max-width: 1023px) 100vw, 744px" srcset="https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/376x197/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 376w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/384x202/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 384w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/415x218/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 415w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/480x252/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 480w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/540x284/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 540w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/640x336/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 640w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/750x394/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 750w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/828x435/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 828w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/1080x567/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 1080w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/1200x630/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 1200w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/1440x756/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 1440w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/1920x1008/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 1920w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/2048x1075/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 2048w, https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/2400x1260/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg 2400w" src="https://duet-cdn.vox-cdn.com/thumbor/0x0:2400x1260/2400x1260/filters:focal(1200x630:1201x631):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25820645/geforce_rtx_50_series_laptops_key_visual.jpg" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></span></p></div></figure></div><div><figcaption><em>RTX 50-series laptops are coming in March.</em></figcaption> <p><cite>Image: Nvidia</cite></p></div></div><p>Huang demonstrated Nvidia’s RTX Blackwell GPUs with a real-time rendering demo at the beginning of the company’s CES keynote today. The demo included new RTX Neural Materials, RTX Neural Faces, text to animation, and even DLSS 4. “The new generation of DLSS can generate beyond frames, it can predict the future,” says Huang. “We used GeForce to enable AI, and now AI is revolutionizing GeForce.”</p><p>Nvidia’s new RTX Neural Shaders can be used to compress textures in games, while RTX Neural Faces aim to improve face quality using generative AI. The next generation of DLSS includes Multi Frame Generation, which generates up to three additional frames per traditional frame and can multiply frame rates by up to 8x over traditional rendering, according to Nvidia.</p><p>DLSS 4 also includes a real-time application of transformers to improve image quality, reduce ghosting, and add higher detail in motion. The DLSS 4 upgrade will even work on existing RTX GPUs, as features have been upgraded to the new transformer AI models. You can <a href="https://www.theverge.com/2025/1/6/24337402/nvidia-dlss-4-upscaling-announcement-ces-2025">read more about DLSS 4 right here</a>.</p><p>Nvidia’s RTX 50-series announcement comes more than two years after the <a href="https://www.theverge.com/2022/9/20/23362653/nvidia-rtx-4080-4090-price-release-date">RTX 4090 and RTX 4080 were announced</a>, based on Nvidia’s Ada Lovelace architecture. Nvidia’s RTX 40-series of GPUs focused on improving ray tracing with Deep Learning Super Sampling (DLSS)  version 3, and the RTX 4090 delivered some <a href="https://www.theverge.com/23398201/nvidia-rtx-4090-review-test-benchmark">truly impressive performance gains</a> over the previous RTX 3090 GPU.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Roman Empire's use of lead lowered IQ levels across Europe, study finds (140 pts)]]></title>
            <link>https://www.theguardian.com/science/2025/jan/06/roman-empires-use-of-lead-lowered-iq-levels-across-europe-study-finds</link>
            <guid>42618625</guid>
            <pubDate>Tue, 07 Jan 2025 02:48:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/science/2025/jan/06/roman-empires-use-of-lead-lowered-iq-levels-across-europe-study-finds">https://www.theguardian.com/science/2025/jan/06/roman-empires-use-of-lead-lowered-iq-levels-across-europe-study-finds</a>, See on <a href="https://news.ycombinator.com/item?id=42618625">Hacker News</a></p>
Couldn't get https://www.theguardian.com/science/2025/jan/06/roman-empires-use-of-lead-lowered-iq-levels-across-europe-study-finds: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Zig's Comptime Is Bonkers Good (151 pts)]]></title>
            <link>https://www.scottredig.com/blog/bonkers_comptime/</link>
            <guid>42618130</guid>
            <pubDate>Tue, 07 Jan 2025 01:15:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.scottredig.com/blog/bonkers_comptime/">https://www.scottredig.com/blog/bonkers_comptime/</a>, See on <a href="https://news.ycombinator.com/item?id=42618130">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="main"><h2><a href="#main"></a></h2>
<p>Programming has obvious abilities to increase productivity through automated manipulation of data.  Metaprogramming allows code to be treated as data, turning programming’s power back onto itself.  Programming close to the metal has perhaps the most to gain from metaprogramming as high level concepts need to be mapped precisely to low level operations.  Yet outside of functional languages I’ve always found the metaprogramming story to be a disappointment.  So when I saw that Zig lists metaprogramming as a major feature, I took interest.</p><p>Honestly, my first experience writing something using Zig’s comptime were pretty rough.  The concepts seemed foreign, and figuring out how to achieve the outcome I wanted was difficult.  Then with a perspective shift, everything clicked and suddenly I loved it.  To help speed you along that path of discovery, presented below are 6 different “views” of comptime.  Each view focuses on a different way you can translate existing programming knowledge into working with Zig.</p><p>This is also not a full guide on all you need to know to write comptime. It’s more focused on providing a breadth of strategies, stretching your understanding in different ways that together lend a fuller picture of how to think about comptime.</p><p>For clarity, all of the examples are valid Zig code, but the transformations done by the examples are only conceptual in nature.  They are not how Zig is implemented.</p><h2>View 0: You can ignore it.</h2><p>It’s pretty weird to say I love a feature, then immediately declare you can ignore it.  However, I’m starting with what I truly think is Zig comptime’s superpower.  The third item in <code>zig zen</code> is <q>Favor reading code over writing code.</q>  Being able to easily read code is important for all sorts of reasons, as it is how you build a conceptual understanding that is required to debug or make modifications to that codebase.</p><p>Metaprogramming can quickly land itself into the realm of “write only code”.  If you’re trying to work with macro based metaprogramming or code generation, there’s now two versions of the code: the source code and the expanded code.  The extra layer of indirection makes everything from reading to debugging the code more difficult.  If you determine the behavior of the program needs to change, you need to determine what the generated code needs to be, and then have determine how to get the metaprogramming to produce that code.</p><p>In Zig, none of that overhead necessary.  You can simply ignore that portions of the code are run at different times, conceptually mixing runtime and comptime.  To demonstrate this, let’s step through two different pieces of code.  The first is some normal runtime code to set a baseline for stepping through code, and the second utilizes comptime.</p><div><div id="08D759430C_0"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span></span>
<span></span>
<span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_1"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span></span>
<span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_2"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_3"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span><span>value</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_4"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
<span><span>value</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_5"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
<span><span>value</span><span>:</span> <span>i64</span> <span>=</span> <span>2</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_6"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
<span><span>value</span><span>:</span> <span>i64</span> <span>=</span> <span>2</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_7"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
<span><span>value</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_8"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>6</span><span>;</span></span>
<span><span>value</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_9"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>6</span><span>;</span></span>
<span></span>
</pre><pre><span></span>
</pre></div><div id="08D759430C_10"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>6</span><span>;</span></span>
<span></span>
</pre><pre><span>array's sum is 6.</span>
</pre></div><p><span id="08D759430C_previous" onclick="previous('08D759430C');">Previous</span><span id="08D759430C_reset" onclick="reset('08D759430C');">Reset</span><span id="08D759430C_next" onclick="next('08D759430C');">Next</span></p></div><p>Press next to step through the program, observing the changing state.  This one is simple enough: sum a list of numbers.  Now let’s do something weirder: sum the fields of a struct.  It’s a contrived example, but demonstrates the point well.</p><div><div id="6995E0E288_0"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span></span>
<span></span>
<span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_1"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span></span>
<span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_2"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_3"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"a"</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_4"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
<span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"a"</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_5"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
<span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"b"</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_6"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
<span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"b"</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_7"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
<span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"c"</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_8"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>6</span><span>;</span></span>
<span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"c"</span><span>;</span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_9"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>6</span><span>;</span></span>
<span></span>
</pre><pre><span></span>
</pre></div><div id="6995E0E288_10"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span><span>}</span><span>;</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span><span>my_struct</span><span>:</span> <span>MyStruct</span> <span>=</span> <span>.</span><span>{</span><span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span> <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span> <span>.</span><span>c</span> <span>=</span> <span>3</span><span>}</span><span>;</span></span>
<span><span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>6</span><span>;</span></span>
<span></span>
</pre><pre><span>array's sum is 6.</span>
</pre></div><p><span id="6995E0E288_previous" onclick="previous('6995E0E288');">Previous</span><span id="6995E0E288_reset" onclick="reset('6995E0E288');">Reset</span><span id="6995E0E288_next" onclick="next('6995E0E288');">Next</span></p></div><p>The comptime example here, compared to the array sum example, is pretty much a non-event.  That is the entire point!  An executable of this code is as efficient as if you hand wrote a sum function for the struct’s type in C, yet the code reads like something you might write in a language with runtime reflection.  While this isn’t how Zig actually works, this also isn’t some entirely theoretical exercise either: the Zig core team is working on a debugger that lets you step through code mixing comptime and runtime exactly like this example.</p><p>There’s a lot of Zig which is comptime, much more than some simple type reflection, yet you don’t need to dig into any of the details to simply read code.  Of course, if you want to actually write coding using comptime, you will eventually need to do more than ignore it.</p><h2>View 1: Oh look, generics.</h2><p>Generics are not a specific feature in Zig.  Instead a simple subset of comptime features together handle everything you need for generic programming.  This view doesn’t let you understand all of comptime, but it does provide you an entry point to complete many of the tasks you might use it for.  To make a type generic, simply wrap its definition in a function which takes a type, and returns a type.</p><div><div id="32927D716A_0"><pre><span><span>pub</span> <span>fn</span> <span>GenericMyStruct</span><span>(</span><span>comptime</span> <span>T</span><span>:</span> <span>type</span><span>)</span> <span>type</span> <span>{</span></span>
<span>    <span>return</span> <span>struct</span> <span>{</span></span>
<span>        <span>a</span><span>:</span> <span>T</span><span>,</span></span>
<span>        <span>b</span><span>:</span> <span>T</span><span>,</span></span>
<span>        <span>c</span><span>:</span> <span>T</span><span>,</span></span>
<span></span>
<span>        <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>GenericMyStruct</span><span>(</span><span>T</span><span>)</span><span>)</span> <span>T</span> <span>{</span></span>
<span>            <span>var</span> <span>sum</span><span>:</span> <span>T</span> <span>=</span> <span>0</span><span>;</span></span>
<span>            <span>const</span> <span>fields</span> <span>=</span> <span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>GenericMyStruct</span><span>(</span><span>T</span><span>)</span><span>)</span><span>;</span></span>
<span>            <span>inline</span> <span>for</span> <span>(</span><span>fields</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>                <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>            <span>}</span></span>
<span>            <span>return</span> <span>sum</span><span>;</span></span>
<span>        <span>}</span></span>
<span>    <span>}</span><span>;</span></span>
<span><span>}</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>my_struct</span><span>:</span> <span>GenericMyStruct</span><span>(</span><span>i64</span><span>)</span> <span>=</span> <span>.</span><span>{</span></span>
<span>        <span>.</span><span>a</span> <span>=</span> <span>1</span><span>,</span></span>
<span>        <span>.</span><span>b</span> <span>=</span> <span>2</span><span>,</span></span>
<span>        <span>.</span><span>c</span> <span>=</span> <span>3</span><span>,</span></span>
<span>    <span>}</span><span>;</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"structs's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>my_struct</span><span>.</span><span>sumFields</span><span>(</span><span>)</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre></div><p><span id="32927D716A_previous" onclick="previous('32927D716A');">Previous</span><span id="32927D716A_reset" onclick="reset('32927D716A');">Reset</span><span id="32927D716A_next" onclick="next('32927D716A');">Next</span></p></div><p>Generic functions are possible as well.</p><div><div id="F4F43A2C18_0"><pre><span><span>fn</span> <span>quadratic</span><span>(</span><span>comptime</span> <span>T</span><span>:</span> <span>type</span><span>,</span> <span>a</span><span>:</span> <span>T</span><span>,</span> <span>b</span><span>:</span> <span>T</span><span>,</span> <span>c</span><span>:</span> <span>T</span><span>,</span> <span>x</span><span>:</span> <span>T</span><span>)</span> <span>T</span> <span>{</span></span>
<span>    <span>return</span> <span>a</span> <span>*</span> <span>x</span><span>*</span><span>x</span> <span>+</span> <span>b</span> <span>*</span> <span>x</span> <span>+</span> <span>c</span><span>;</span></span>
<span><span>}</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>a</span> <span>=</span> <span>quadratic</span><span>(</span><span>f32</span><span>,</span> <span>21.6</span><span>,</span> <span>3.2</span><span>,</span> <span>-</span><span>3</span><span>,</span> <span>0.5</span><span>)</span><span>;</span></span>
<span>    <span>const</span> <span>b</span> <span>=</span> <span>quadratic</span><span>(</span><span>i64</span><span>,</span> <span>1</span><span>,</span> <span>-</span><span>3</span><span>,</span> <span>4</span><span>,</span> <span>2</span><span>)</span><span>;</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"Answer: {d}{d}\n"</span><span>,</span> <span>.</span><span>{</span><span>a</span><span>,</span> <span>b</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre></div><p><span id="F4F43A2C18_previous" onclick="previous('F4F43A2C18');">Previous</span><span id="F4F43A2C18_reset" onclick="reset('F4F43A2C18');">Reset</span><span id="F4F43A2C18_next" onclick="next('F4F43A2C18');">Next</span></p></div><p>It is also possible to infer the type of an argument by using the special type <code>anytype</code>, typically used if the type of the argument doesn’t matter to the rest of the function signature.</p><h2>View 2: Standard code, run at compile time.</h2><p>It’s a tale as old as <del>time</del> programming:  A way to automate commands is added.  Then you need variables, of course.  Oh, conditionals too.  Please, can I have loops?  The path to a shoehorned macro language is paved with reasonable feature requests.  Zig uses the same language in runtime, comptime, and even the build system.</p><p>Consider the classic fizz buzz.</p><div><div id="C8698F3BFB_0"><pre><span><span>fn</span> <span>fizzBuzz</span><span>(</span><span>writer</span><span>:</span> <span>std</span><span>.</span><span>io</span><span>.</span><span>AnyWriter</span><span>)</span> <span>!</span><span>void</span> <span>{</span></span>
<span>    <span>var</span> <span>i</span><span>:</span> <span>usize</span> <span>=</span> <span>1</span><span>;</span></span>
<span>    <span>while</span> <span>(</span><span>i</span> <span>&lt;=</span> <span>100</span><span>)</span> <span>:</span> <span>(</span><span>i</span> <span>+=</span> <span>1</span><span>)</span> <span>{</span></span>
<span>        <span>if</span> <span>(</span><span>i</span> <span>%</span> <span>3</span> <span>==</span> <span>0</span> <span>and</span> <span>i</span> <span>%</span> <span>5</span> <span>==</span> <span>0</span><span>)</span> <span>{</span></span>
<span>            <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"fizzbuzz\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span>        <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>i</span> <span>%</span> <span>3</span> <span>==</span> <span>0</span><span>)</span> <span>{</span></span>
<span>            <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"fizz\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span>        <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>i</span> <span>%</span> <span>5</span> <span>==</span> <span>0</span><span>)</span> <span>{</span></span>
<span>            <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"buzz\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span>        <span>}</span> <span>else</span> <span>{</span></span>
<span>            <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"{d}\n"</span><span>,</span> <span>.</span><span>{</span><span>i</span><span>}</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>    <span>}</span></span>
<span><span>}</span></span>
<span></span>
<span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>!</span><span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>out_writer</span> <span>=</span> <span>std</span><span>.</span><span>io</span><span>.</span><span>getStdOut</span><span>(</span><span>)</span><span>.</span><span>writer</span><span>(</span><span>)</span><span>.</span><span>any</span><span>(</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>fizzBuzz</span><span>(</span><span>out_writer</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre></div><p><span id="C8698F3BFB_previous" onclick="previous('C8698F3BFB');">Previous</span><span id="C8698F3BFB_reset" onclick="reset('C8698F3BFB');">Reset</span><span id="C8698F3BFB_next" onclick="next('C8698F3BFB');">Next</span></p></div><p>Simple enough.  Though, one thing that I always find funny about conversations of making Fizz Buzz fast is that the standard version of the problem always runs for exactly the first 100 numbers.  So given that the output is fixed, why not just precompute the answer and output that?  Using the exact same fizzBuzz function, we can do just that.</p><div><div id="E33E659A24_0"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>!</span><span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>full_fizzbuzz</span> <span>=</span> <span>comptime</span> <span>init</span><span>:</span> <span>{</span></span>
<span>        <span>var</span> <span>cw</span> <span>=</span> <span>std</span><span>.</span><span>io</span><span>.</span><span>countingWriter</span><span>(</span><span>std</span><span>.</span><span>io</span><span>.</span><span>null_writer</span><span>)</span><span>;</span></span>
<span>        <span>fizzBuzz</span><span>(</span><span>cw</span><span>.</span><span>writer</span><span>(</span><span>)</span><span>.</span><span>any</span><span>(</span><span>)</span><span>)</span> <span>catch</span> <span>unreachable</span><span>;</span></span>
<span></span>
<span>        <span>var</span> <span>buffer</span><span>:</span> <span>[</span><span>cw</span><span>.</span><span>bytes_written</span><span>]</span><span>u8</span> <span>=</span> <span>undefined</span><span>;</span></span>
<span>        <span>var</span> <span>fbs</span> <span>=</span> <span>std</span><span>.</span><span>io</span><span>.</span><span>fixedBufferStream</span><span>(</span><span>&amp;</span><span>buffer</span><span>)</span><span>;</span></span>
<span>        <span>fizzBuzz</span><span>(</span><span>fbs</span><span>.</span><span>writer</span><span>(</span><span>)</span><span>.</span><span>any</span><span>(</span><span>)</span><span>)</span> <span>catch</span> <span>unreachable</span><span>;</span></span>
<span></span>
<span>        <span>break</span> <span>:</span><span>init</span> <span>buffer</span><span>;</span></span>
<span>    <span>}</span><span>;</span></span>
<span></span>
<span>    <span>const</span> <span>out_writer</span> <span>=</span> <span>std</span><span>.</span><span>io</span><span>.</span><span>getStdOut</span><span>(</span><span>)</span><span>.</span><span>writer</span><span>(</span><span>)</span><span>.</span><span>any</span><span>(</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>out_writer</span><span>.</span><span>writeAll</span><span>(</span><span>&amp;</span><span>full_fizzbuzz</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre></div><p><span id="E33E659A24_previous" onclick="previous('E33E659A24');">Previous</span><span id="E33E659A24_reset" onclick="reset('E33E659A24');">Reset</span><span id="E33E659A24_next" onclick="next('E33E659A24');">Next</span></p></div><p>Here the comptime keyword indicates that the block it precedes will run during the compile.  Additionally the block is labeled “init”, so that the whole block can evaluate to a value with the later break.  A writer which counts how many bytes are written (but discards the actual bytes written) is used to determine the total length.  An array is created with that length, written to, and set as full_fizzbuzz.</p><p>Timing just the critical section, the precomputed version runs about 9 times faster.  Of course, this example is so small the total execution time is dominated by other factors, but you get the idea.</p><p>There are a few small differences between comptime and runtime.  Only comptime has access to variables of types <code>comptime_int, comptime_float, or type</code>.  Additionally some functions have only comptime arguments, effectively making them comptime only.  Runtime is the only one to have access to system calls, or anything which would use them.  If your code doesn’t use any of those features, it will work equally well in both comptime and runtime.</p><h2>View 3: Partial Evaluation</h2><p>Now we’re getting to the fun stuff.</p><p>One way to view evaluation of code is to substitute inputs with their runtime value, and then repeatedly substitute the first expression into the evaluated form until only the result remains.  This is common in CS theory contexts, and some functional languages.  As a set up to a later example, we’ll use the array sum to get an idea of this process:</p><div><div id="92FB17A09D_0"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>array</span><span>)</span> <span>|</span><span>value</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Break the for loop into individual statements.</span>
<span></span>
</pre></div><div id="92FB17A09D_1"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>{</span></span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>0</span><span>]</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>{</span></span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>1</span><span>]</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>{</span></span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>2</span><span>]</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Substitue array[0] with 1.</span>
<span></span>
</pre></div><div id="92FB17A09D_2"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>1</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>1</span><span>]</span><span>;</span> </span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>2</span><span>]</span><span>;</span> </span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Substitute value with 1.</span>
<span></span>
</pre></div><div id="92FB17A09D_3"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>{</span> </span>
<span></span>
<span>        <span>sum</span> <span>+=</span> <span>1</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>1</span><span>]</span><span>;</span> </span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>2</span><span>]</span><span>;</span> </span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Increment sum by 1.</span>
<span></span>
</pre></div><div id="92FB17A09D_4"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
<span> </span>
<span></span>
<span></span>
<span></span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>1</span><span>]</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>2</span><span>]</span><span>;</span> </span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Substitute array[1] with 2.</span>
<span></span>
</pre></div><div id="92FB17A09D_5"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
<span> </span>
<span></span>
<span></span>
<span></span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>2</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>2</span><span>]</span><span>;</span> </span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Substitute value with 2.</span>
<span></span>
</pre></div><div id="92FB17A09D_6"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>1</span><span>;</span></span>
<span> </span>
<span></span>
<span></span>
<span></span>
<span>    <span>{</span> </span>
<span></span>
<span>        <span>sum</span> <span>+=</span> <span>2</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>2</span><span>]</span><span>;</span> </span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span> </span>
<span>    <span>}</span> </span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Increment sum by 2.</span>
<span></span>
</pre></div><div id="92FB17A09D_7"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span>    <span>const</span> <span>array</span><span>:</span> <span>[</span><span>3</span><span>]</span><span>i64</span> <span>=</span> <span>.</span><span>{</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>}</span><span>;</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
<span> </span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>array</span><span>[</span><span>2</span><span>]</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span> </span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Substitute array[2] with 3.</span>
<span></span>
</pre></div><div id="92FB17A09D_8"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
<span> </span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>{</span> </span>
<span>        <span>const</span> <span>value</span> <span>=</span> <span>3</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>value</span><span>;</span></span>
<span>    <span>}</span> </span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Substitute value with 3.</span>
<span></span>
</pre></div><div id="92FB17A09D_9"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>3</span><span>;</span></span>
<span> </span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>{</span> </span>
<span></span>
<span>        <span>sum</span> <span>+=</span> <span>3</span><span>;</span></span>
<span>    <span>}</span> </span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Increment sum by 3.</span>
<span></span>
</pre></div><div id="92FB17A09D_10"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>6</span><span>;</span></span>
<span> </span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>sum</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Substitute sum with 6.</span>
<span></span>
</pre></div><div id="92FB17A09D_11"><pre><span><span>pub</span> <span>fn</span> <span>main</span><span>(</span><span>)</span> <span>void</span> <span>{</span></span>
<span></span>
<span></span>
<span> </span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>std</span><span>.</span><span>debug</span><span>.</span><span>print</span><span>(</span><span>"array's sum is {d}.\n"</span><span>,</span> <span>.</span><span>{</span><span>6</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre><pre><span>Next std.debug.print would be replaced by its implementation.</span>
<span>Stopping here for simplicity.</span>
</pre></div><p><span id="92FB17A09D_previous" onclick="previous('92FB17A09D');">Previous</span><span id="92FB17A09D_reset" onclick="reset('92FB17A09D');">Reset</span><span id="92FB17A09D_next" onclick="next('92FB17A09D');">Next</span></p></div><p>Partial evaluation is a technique by which you can pass some, but not necessarily all, of the arguments to a function.  The substitutions for expressions which use already only known values in this context can be performed.  This produces a new function which only takes the still unknown arguments.  Zig comptime can be viewed as a partial evaluation taking place during the compile process.  Taking another look at the sum struct example, gives us:</p><div><div id="605AF2C7FD_0"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span>inline for indicates that this for loop runs at comptime, so break the</span>
<span>iterations into individual statements.</span>
</pre></div><div id="605AF2C7FD_1"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>{</span></span>
<span>            <span>const</span> <span>field_name</span> <span>=</span> <span>"a"</span><span>;</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span>            <span>const</span> <span>field_name</span> <span>=</span> <span>"b"</span><span>;</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span>            <span>const</span> <span>field_name</span> <span>=</span> <span>"c"</span><span>;</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span>Replace field_name with its value.</span>
<span></span>
</pre></div><div id="605AF2C7FD_2"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>{</span></span>
<span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>"a"</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span>            <span>const</span> <span>field_name</span> <span>=</span> <span>"b"</span><span>;</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span>            <span>const</span> <span>field_name</span> <span>=</span> <span>"c"</span><span>;</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span>@field allows accessing a field using a comptime known string.</span>
<span></span>
</pre></div><div id="605AF2C7FD_3"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>{</span></span>
<span></span>
<span>            <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span>            <span>const</span> <span>field_name</span> <span>=</span> <span>"b"</span><span>;</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span>            <span>const</span> <span>field_name</span> <span>=</span> <span>"c"</span><span>;</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span>continue with the next field, skipping ahead a bit.</span>
<span></span>
</pre></div><div id="605AF2C7FD_4"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>{</span></span>
<span></span>
<span>            <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span></span>
<span>            <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>b</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span>            <span>const</span> <span>field_name</span> <span>=</span> <span>"c"</span><span>;</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span>and the last field, skipping ahead again.</span>
<span></span>
</pre></div><div id="605AF2C7FD_5"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>{</span></span>
<span></span>
<span>            <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span></span>
<span>            <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>b</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>{</span></span>
<span></span>
<span>            <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>c</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span>Cleaning up the unnessisary scopes.</span>
<span></span>
</pre></div><div id="605AF2C7FD_6"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span></span>
<span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span></span>
<span></span>
<span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>b</span><span>;</span></span>
<span></span>
<span></span>
<span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>c</span><span>;</span></span>
<span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span></span>
<span></span>
</pre></div><p><span id="605AF2C7FD_previous" onclick="previous('605AF2C7FD');">Previous</span><span id="605AF2C7FD_reset" onclick="reset('605AF2C7FD');">Reset</span><span id="605AF2C7FD_next" onclick="next('605AF2C7FD');">Next</span></p></div><p>The final function is “hand optimized”, but the work is done by Zig’s comptime.  This allows the intent to be directly coded.  No “remember to update the sum function when you change these fields” comment needed.  Any changes to <code>MyStruct</code>’s fields are just handled correctly.</p><h2>View 4: Comptime Evaluation, runtime code emission</h2><p>This is nearly the same as partial evaluation.  Here, there are two version of the code, input (pre-comptime) and output (post-comptime).  The input code is run by the compiler.  If a statement is knowable at compile time, it is simply evaluated.  However if a statement requires some runtime value, the statement is added to the output code.</p><div><div id="D58CE870A8_0"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_1"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_2"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"a"</span><span>;</span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_3"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"a"</span><span>;</span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_4"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"b"</span><span>;</span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_5"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"b"</span><span>;</span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>b</span><span>;</span></span>
<span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_6"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"c"</span><span>;</span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>b</span><span>;</span></span>
<span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_7"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span><span>field_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span> <span>=</span> <span>"c"</span><span>;</span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>b</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>c</span><span>;</span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_8"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>b</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>c</span><span>;</span></span>
<span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><div id="D58CE870A8_9"><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>            <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>        <span>}</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre><pre><span></span>
</pre><pre><span><span>const</span> <span>MyStruct</span> <span>=</span> <span>struct</span> <span>{</span></span>
<span>    <span>a</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>b</span><span>:</span> <span>i64</span><span>,</span></span>
<span>    <span>c</span><span>:</span> <span>i64</span><span>,</span></span>
<span></span>
<span>    <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>        <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>a</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>b</span><span>;</span></span>
<span>        <span>sum</span> <span>+=</span> <span>my_struct</span><span>.</span><span>c</span><span>;</span></span>
<span>        <span>return</span> <span>sum</span><span>;</span></span>
<span>    <span>}</span></span>
<span><span>}</span><span>;</span></span>
</pre></div><p><span id="D58CE870A8_previous" onclick="previous('D58CE870A8');">Previous</span><span id="D58CE870A8_reset" onclick="reset('D58CE870A8');">Reset</span><span id="D58CE870A8_next" onclick="next('D58CE870A8');">Next</span></p></div><p>This view is actually the closest to how Zig’s compiler handles comptime.  The primary difference is that Zig first parses the syntax of your code, and turns it into bytecode for a virtual machine.  That virtual machine running is how comptime is implemented.  This virtual machine will evaluate whatever it can, and emit new bytecode (which is later translated into machine code) for whatever needs to be handled at runtime.  Conditionals such as if statements with runtime inputs simply emit both paths.</p><p>A natural result of this is that dead code is never semantically analyzed.  This can take some getting used to, as writing an invalid function doesn’t always give you a compile error until you actually try to use it.  However this also makes compilation more efficient, and allows more natural looking conditional compilation, no <code>#ifdef</code>s here!</p><p>It’s worth noting how much comptime permeates Zig’s design.  All Zig code runs through this virtual machine, including functions with no obvious use of comptime.  Even where you see simple type names, such as function arguments, are actually expressions which evaluate in comptime to a variable of type <code>type</code>.  This is how the generics example above works.  It also means you can use a more complicated expressions to calculate a type, where appropriate.</p><p>Another consequence of this is that static analysis of Zig code is much more complicated than most statically typed languages, since significant portions of the compiler need to run to even determine all of the types.  So until Zig tooling is able to catch up, editor tools such as code completion don’t always work well.</p><h2>View 5: Textual Code Generation</h2><p>I lamented the difficulty of writing code that outputs new source code at the beginning of the post.  Yet it remains a powerful tool that, even in Zig, has its place in solving some problems.  If this method of metaprogramming is familiar to you then moving to Zig comptime might feel like a significant downgrade.  There is a familiar structure to writing code that, when run, produces code.</p><p>But wait, the last example did just that, right?  If you look at things in just the right way, there is an underlying equivalence between code that writes code and mixed comptime and runtime code.</p><p>The following example doesn’t step through code, instead it flips between two versions.  The first is an example which outputs the code, and the second is the familiar comptime example.  The two versions of code are aligned with the same logic on the same line.</p><div><div id="17333ED16D_0"><pre><span><span>pub</span> <span>fn</span> <span>writeSumFn</span><span>(</span></span>
<span>    <span>writer</span><span>:</span> <span>std</span><span>.</span><span>io</span><span>.</span><span>AnyWriter</span><span>,</span></span>
<span>    <span>type_name</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span><span>,</span></span>
<span>    <span>field_names</span><span>:</span> <span>[</span><span>]</span><span>[</span><span>]</span><span>const</span> <span>u8</span><span>,</span></span>
<span><span>)</span> <span>!</span><span>void</span> <span>{</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"fn sumFields(value: {s}) i64 {{\n"</span><span>,</span> <span>.</span><span>{</span><span>type_name</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"var sum: i64 = 0;\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>field_names</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"sum += value.{s};\n"</span><span>,</span> <span>.</span><span>{</span><span>field_name</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"return sum;\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"}}\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre></div><div id="17333ED16D_1"><pre><span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>MyStruct</span><span>)</span> <span>i64</span> <span>{</span></span>
<span>    <span>var</span> <span>sum</span><span>:</span> <span>i64</span> <span>=</span> <span>0</span><span>;</span></span>
<span>    <span>inline</span> <span>for</span> <span>(</span><span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>MyStruct</span><span>)</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>return</span> <span>sum</span><span>;</span></span>
<span><span>}</span></span>
<span></span>
</pre></div><p>Toggle</p><p>Notice how there are two conversions: The code which runs in the generator becomes the comptime part of the code.  The code which the generator outputs becomes the runtime part of the code.</p><p>Another thing I like about this example is it shows how generating code which uses type information as an input is much simpler with Zig.  The example handwaves where the type name and field name information comes from.  If you’re using some other form of input, such as a specification, Zig provides <code>@embedFile</code> which you can use to then parse like you normally would.</p><p>Bringing back the generics example, there are a few more subtleties worth highlighting:</p><div><div id="46445E3685_0"><pre><span><span>pub</span> <span>fn</span> <span>writeMyStructOfType</span><span>(</span></span>
<span>    <span>writer</span><span>:</span> <span>std</span><span>.</span><span>io</span><span>.</span><span>AnyWriter</span><span>,</span></span>
<span>    <span>T</span><span>:</span> <span>[</span><span>]</span><span>const</span> <span>u8</span><span>,</span></span>
<span><span>)</span> <span>!</span><span>void</span> <span>{</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"const MyStruct_{s} = struct {{\n"</span><span>,</span> <span>.</span><span>{</span><span>T</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"a: {s},\n"</span><span>,</span> <span>.</span><span>{</span><span>T</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"b: {s},\n"</span><span>,</span> <span>.</span><span>{</span><span>T</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"c: {s},\n"</span><span>,</span> <span>.</span><span>{</span><span>T</span><span>}</span><span>)</span><span>;</span></span>
<span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"fn sumFields(value: MyStruct_{s}) {s} {{\n"</span><span>,</span> <span>.</span><span>{</span><span>T</span><span>,</span><span>T</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"var sum: {s} = 0;\n"</span><span>,</span> <span>.</span><span>{</span><span>T</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>const</span> <span>fields</span> <span>=</span> <span>[</span><span>_</span><span>]</span><span>[</span><span>]</span><span>const</span> <span>u8</span><span>{</span> <span>"a"</span><span>,</span> <span>"b"</span><span>,</span> <span>"c"</span> <span>}</span><span>;</span></span>
<span>    <span>for</span> <span>(</span><span>fields</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>        <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"sum += value.{s};\n"</span><span>,</span> <span>.</span><span>{</span><span>field_name</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>}</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"return sum;\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"}}\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span>    <span>try</span> <span>writer</span><span>.</span><span>print</span><span>(</span><span>"}};\n"</span><span>,</span> <span>.</span><span>{</span><span>}</span><span>)</span><span>;</span></span>
<span><span>}</span></span>
</pre></div><div id="46445E3685_1"><pre><span><span>pub</span> <span>fn</span> <span>GenericMyStruct</span><span>(</span><span>comptime</span> <span>T</span><span>:</span> <span>type</span><span>)</span> <span>type</span> <span>{</span></span>
<span></span>
<span></span>
<span></span>
<span>    <span>return</span> <span>struct</span> <span>{</span></span>
<span>        <span>a</span><span>:</span> <span>T</span><span>,</span></span>
<span>        <span>b</span><span>:</span> <span>T</span><span>,</span></span>
<span>        <span>c</span><span>:</span> <span>T</span><span>,</span></span>
<span></span>
<span>        <span>fn</span> <span>sumFields</span><span>(</span><span>my_struct</span><span>:</span> <span>GenericMyStruct</span><span>(</span><span>T</span><span>)</span><span>)</span> <span>T</span> <span>{</span></span>
<span>            <span>var</span> <span>sum</span><span>:</span> <span>T</span> <span>=</span> <span>0</span><span>;</span></span>
<span>            <span>const</span> <span>fields</span> <span>=</span> <span>comptime</span> <span>std</span><span>.</span><span>meta</span><span>.</span><span>fieldNames</span><span>(</span><span>GenericMyStruct</span><span>(</span><span>T</span><span>)</span><span>)</span><span>;</span></span>
<span>            <span>inline</span> <span>for</span> <span>(</span><span>fields</span><span>)</span> <span>|</span><span>field_name</span><span>|</span> <span>{</span></span>
<span>                <span>sum</span> <span>+=</span> <span>@field</span><span>(</span><span>my_struct</span><span>,</span> <span>field_name</span><span>)</span><span>;</span></span>
<span>            <span>}</span></span>
<span>            <span>return</span> <span>sum</span><span>;</span></span>
<span>        <span>}</span></span>
<span>    <span>}</span><span>;</span></span>
<span><span>}</span></span>
</pre></div><p>Toggle</p><p>The fields retain the conversion above, but mix the two in a single line.  The field’s type expression is done by the generator/at comptime, while the field itself ends up as a definition used by the runtime code.</p><p>References to the name of the type are more direct with comptime, able to use the function directly instead of having to concat text into a name that has be to consistent across uses.</p><p>There is an exception to this view.  You can create types where the names of the fields are determined at comptime, however doing so involves calling a builtin function with a specification containing a list of field definitions.  As a result you can’t define declarations, such as methods, on these types.  In practice this doesn’t limit the expressiveness of your code, but it does limit what kinds of API you can expose to other code.</p><p>Relevant to this section are textual macros such as those in C.  Most of the sane things you can do can be done in comptime, though they rarely take a form that looks similar.  However, you can’t do everything that text macros allow.  For example, you can’t decide that you dislike a Zig keyword and have a macro substitute your own.  I think this is the right call, even if it’s a rough transition for those used to that ability.  Besides, Zig has half a century of programmers figuring out what is right, so its choices are far more sane.</p><h2>Conclusion</h2><p>When reading Zig code to understand the end behavior, taking comptime into consideration isn’t necessary.  When writing comptime code, I usually think about it in one of the forms of partial evaluation.  However, if you know how you’d solve a problem using a different methodology of metaprogramming, it’s very likely you’ll be able to translate it into comptime.</p><p>Realizing the textual code generation conversion exists is why I’m all in on Zig’s style of comptime metaprogramming.  On one hand, textual code generation is maximally powerful, on the other hand, the ability to ignore comptime while reading and debugging is maximally simple.  This is why, as I titled the post, Zig’s comptime is bonkers good.</p><h2>Further Reading</h2><p>Zig is not a one trick pony built upon comptime.  You can learn more about Zig at the <a href="https://ziglang.org/" target="_blank">official website</a>.</p><p>I used the same example multiple times in this post to simplify showing the different conversions that take place.  The downside of this is despite talking a lot about comptime, I haven’t actually shown much of it.  The <a href="https://ziglang.org/documentation/0.13.0/" target="_blank">language reference</a> goes over the specific features of comptime.</p><p>If you want to see more examples, I recommend just reading some of Zig’s standard library.  A few links for the curious:</p><p>The <a href="https://github.com/ziglang/zig/blob/0.13.0/lib/std/fmt.zig#L80" target="_blank">formatting function used by std.debug.print</a> in the examples is a powerful generic function.  Lots of languages parse their format strings at runtime, and possibly add some special validators to the string format to catch errors early.  In Zig, the format string is parsed at comptime, creating efficient output code while also performing all validation at compile time.</p><p><a href="https://github.com/ziglang/zig/blob/0.13.0/lib/std/array_list.zig#L25" target="_blank">ArrayList</a> is a fairly simple but fully featured generic container.</p><p>Zig main functions can have one of several different return types.  In typical Zig fashion, this isn’t some magical implementation in the compiler, but just some <a href="https://github.com/ziglang/zig/blob/0.13.0/lib/std/start.zig#L508" target="_blank">typical comptime code</a>.</p>
</div><hr><p>If you wish to reach me about this post to provide a comment or correction, please email me at <a href="mailto:blogcomments@scottredig.com">blogcomments@scottredig.com</a></p><p><a href="https://www.scottredig.com/rss.xml" type="application/rss+xml">Subscribe to the RSS feed to be notified of my next post.</a></p>
    </div>
  
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How I Program with LLMs (322 pts)]]></title>
            <link>https://crawshaw.io/blog/programming-with-llms</link>
            <guid>42617645</guid>
            <pubDate>Tue, 07 Jan 2025 00:07:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://crawshaw.io/blog/programming-with-llms">https://crawshaw.io/blog/programming-with-llms</a>, See on <a href="https://news.ycombinator.com/item?id=42617645">Hacker News</a></p>
Couldn't get https://crawshaw.io/blog/programming-with-llms: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[NYC Congestion Pricing Tracker (171 pts)]]></title>
            <link>https://www.congestion-pricing-tracker.com/</link>
            <guid>42616700</guid>
            <pubDate>Mon, 06 Jan 2025 22:22:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.congestion-pricing-tracker.com/">https://www.congestion-pricing-tracker.com/</a>, See on <a href="https://news.ycombinator.com/item?id=42616700">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[I live my life a quarter century at a time (187 pts)]]></title>
            <link>https://tla.systems/blog/2025/01/04/i-live-my-life-a-quarter-century-at-a-time/</link>
            <guid>42616699</guid>
            <pubDate>Mon, 06 Jan 2025 22:22:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tla.systems/blog/2025/01/04/i-live-my-life-a-quarter-century-at-a-time/">https://tla.systems/blog/2025/01/04/i-live-my-life-a-quarter-century-at-a-time/</a>, See on <a href="https://news.ycombinator.com/item?id=42616699">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-468">
	<!-- .entry-header -->

	
	
	<div>
		
<p>So, we are coming up on a little anniversary for me this weekend. On the 5th of January 2000, Steve Jobs unveiled the new Aqua user interface of Mac OS X to the world at Macworld Expo.</p>



<figure><p>
<iframe title="Macworld 2000 San Francisco" width="840" height="630" src="https://www.youtube.com/embed/AcGzCIlz8y0?start=6361&amp;feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
</p><figcaption>The Age of Aquarius</figcaption></figure>



<p>Towards the end of the presentation, he showed off the Dock. You all know the Dock, it’s been at the bottom of your Mac screen for what feels like forever (if you keep it in the correct location, anyway).</p>


<div>
<figure><img data-recalc-dims="1" fetchpriority="high" decoding="async" width="600" height="360" data-attachment-id="499" data-permalink="https://tla.systems/blog/2025/01/04/i-live-my-life-a-quarter-century-at-a-time/image-7/" data-orig-file="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-6.png?fit=600%2C360&amp;ssl=1" data-orig-size="600,360" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-6.png?fit=300%2C180&amp;ssl=1" data-large-file="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-6.png?fit=600%2C360&amp;ssl=1" src="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-6.png?resize=600%2C360&amp;ssl=1" alt="" srcset="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-6.png?w=600&amp;ssl=1 600w, https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-6.png?resize=300%2C180&amp;ssl=1 300w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 984px) 61vw, (max-width: 1362px) 45vw, 600px"><figcaption>“Now I’d like to show you one of the coolest things about Mac OS X…”</figcaption></figure></div>


<p>The version he showed was quite different to what actually ended up shipping, with square boxes around the icons, and an actual “Dock” folder in your user’s home folder that contained aliases to the items stored.</p>



<p>I should know – I had spent the previous 18 months or so as the main engineer working away on it. At that very moment, I was watching from a cubicle in Apple Cork, in Ireland. For the second time in my short Apple career, I said a quiet prayer to the gods of demos, hoping that things didn’t break. For context, I was in my twenties at this point and scared witless.</p>



<p>I didn’t design the dock – that was Bas Ording, a talented young UI designer that Steve had personally recruited. But it was my job to take his prototypes built in Macromind Director and turn them into working code, as part of the Finder team.</p>



<p>I had already written another dock – <a href="https://dragthing.com/">DragThing</a> – before I worked for Apple, and that had helped me get a job there. I moved over from Scotland to Ireland in late 1996 with my future wife, with both of us joining the small software team there. It was primarily a manufacturing plant, but there was a little bit of software and hardware testing and engineering that went on around the edges.</p>



<p>I worked on a number of things in the early days. I was on the <a href="https://en.wikipedia.org/wiki/Copland_(operating_system)">Copland</a> installer for two weeks before the project was cancelled. Then, a couple of <a href="https://www.macintoshrepository.org/26825-apple-magic-collection-3">Disney Print Studio CDs</a> that shipped with the Performas. I loved doing UI stuff, but somehow ended up working on a command line Mac OS X Server authentication component for <a href="https://en.wikipedia.org/wiki/At_Ease">At Ease</a> that was to be used with a new line of diskless netboot computers that nobody had actually seen. It turned out I’d actually been on the iMac project all this time, and in the end they got hard drives.</p>



<p>In the middle of all that, when I was out in Cupertino, I was asked if I wanted to work on a secret project with the code name “Überbar”. I was shown some prototypes and basically told that six people had seen it, and if it leaked they would know it was me that had talked. I figured if anybody was finally going to kill off DragThing, it might as well be me.</p>



<p>The new Finder (codename “Millennium”) was at this point being written on Mac OS 9, because Mac OS X wasn’t exactly firing on all cylinders quite yet. The filesystem wasn’t working well, which is not super helpful when you are trying to write a user interface on top of it. The Dock was part of the Finder then, and could lean on all the high level C++ interfaces for dealing with disks and files that the rest of the team was working on. So, I started on Mac OS 9, working away in Metrowerks Codewarrior. The Finder was a Carbon app, so we could actually make quite a bit of early progress on 9, before the OS was ready for us. I vividly remember the first time we got the code running on Mac OS X.</p>



<p>Because the Dock was a huge secret, along with the rest of the Aqua user interface, it was only enabled on a handful of machines. I didn’t see the shiny lickable buttons of Aqua itself for quite a while after I’d been working on the Dock . There were rumours that any screenshot of Aqua would have the hardware MAC address of the machine encoded into the image, so leaks could be tracked down.</p>



<p>Before I had ever seen the new UI, there was one moment where I had somehow – I genuinely don’t remember why on earth this happened – had been tasked with designing a placeholder boot screen for the OS itself. I made a blue shiny Apple with pinstripes, in the style of the iMac.</p>


<div>
<figure><img data-recalc-dims="1" decoding="async" width="449" height="336" data-attachment-id="481" data-permalink="https://tla.systems/blog/2025/01/04/i-live-my-life-a-quarter-century-at-a-time/image-5/" data-orig-file="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-4.png?fit=449%2C336&amp;ssl=1" data-orig-size="449,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="image" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-4.png?fit=300%2C224&amp;ssl=1" data-large-file="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-4.png?fit=449%2C336&amp;ssl=1" src="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-4.png?resize=449%2C336&amp;ssl=1" alt="" srcset="https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-4.png?w=449&amp;ssl=1 449w, https://i0.wp.com/tla.systems/blog/wp-content/uploads/2025/01/image-4.png?resize=300%2C224&amp;ssl=1 300w" sizes="(max-width: 449px) 85vw, 449px"><figcaption>Secret Stripes Suppressed</figcaption></figure></div>


<p>It lasted precisely one build before being yanked out extremely quickly. I assume because <em>somebody</em> was unhappy with the entirely coincidental Aqua-like appearance.</p>



<p>But I trundled away, making the best dock that I could while staying true to the original design, and making <a href="https://512pixels.net/2017/06/a-trip-to-infinite-loop-two-decades-later/">frequent trips to the US</a>, initially living out of the Cupertino Inn across the road from Infinite Loop.</p>



<p>You may have heard me tell this story before, and I apologise if so. But it’s been long enough that people just know me for PCalc, and don’t even remember DragThing, let alone events that happened before some of you were even born.</p>



<p>At one point during a trip over, Steve was talking to Bas and asked how things were coming along with the Dock. He replied something along the lines of “going well, the engineer is over from Ireland right now, etc”. Steve left, and then visited my <a href="https://en.wikipedia.org/wiki/Bertrand_Serlet">manager’s manager’s manager</a> and said the fateful words (as reported to me by people who were in the room where it happened).</p>



<p>“It has come to my attention that the engineer working on the Dock is in FUCKING IRELAND”.</p>



<p>I was told that I had to move to Cupertino. Immediately. Or else.</p>



<p>I did not wish to move to the States. I liked being in Europe. Ultimately, after much consideration, many late night conversations with my wife, and even buying a guide to moving, I said no.</p>



<p>They said ok then. We’ll just tell Steve you did move.</p>



<p>And so for the next year, I flew back and forth between Cork to Cupertino, and stayed out there as much as regulations would allow. I had an office on the Finder team corridor. I can only imagine that Steve would walk by looking for me, and they would say he’d just missed me, while I was being bundled onto a plane at the other end. I had to come over whenever there were Dock demos, but I was not allowed to be left in the same room as Steve, lest I reveal the truth. The demo room with the blanked out windows had two doors, and I went out one before he came in the other.</p>



<p>In the end, Macworld 2000 happened, and finally all the secrets were revealed to the world. I hoped that at this point, it didn’t matter where I was, and I could finally relax. Less than a month later, exactly on my birthday I believe, I got another call.</p>



<p>I had to move to Cupertino. Or else. And this time, the “else” was that I would be taken off the Dock and the Finder, and I couldn’t be guaranteed any interesting work ever again.</p>



<p>So I politely declined, and resigned. About three weeks later, the rest of the remaining software group in Cork was fired. Clearly, the plan had been to get rid of everybody, but they couldn’t tell me that at the time. I should have waited and I’d have got a payoff at least…</p>



<p>My version of the Dock shipped once to developers, with the Developer Preview 3 of Mac OS X. John Siracusa <em><a href="https://arstechnica.com/gadgets/2000/02/mac-os-x-dp3/">absolutely hated it</a></em>. We remain friends.</p>



<p>After that, the engineer who took over from me rewrote the Dock entirely, and none of my code actually shipped to the public in the end. Eighteen months of hard work out the window, ah well.</p>



<p>But I learned a great deal, made a lot of friends, and the experience spurred me on to resurrect DragThing for Mac OS X, which proved very popular for quite some time. <a href="https://pcalc.com/">PCalc</a> also came back to life around then, and that’s still going today!</p>



<p>As a final note, when I left Apple for the last time, and emptied out my drawers, at the very bottom of the last drawer I found my <em>distinctly unsigned NDA</em>.</p>






<div>
	<p><img alt="" src="https://secure.gravatar.com/avatar/589648381518b2328e8bcfceb3d62708?s=42&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/589648381518b2328e8bcfceb3d62708?s=84&amp;d=mm&amp;r=g 2x" height="42" width="42" loading="lazy" decoding="async">	</p><!-- .author-avatar -->

	<!-- .author-description -->
</div><!-- .author-info -->
	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Triptych Proposals (176 pts)]]></title>
            <link>https://alexanderpetros.com/triptych/</link>
            <guid>42615646</guid>
            <pubDate>Mon, 06 Jan 2025 20:52:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://alexanderpetros.com/triptych/">https://alexanderpetros.com/triptych/</a>, See on <a href="https://news.ycombinator.com/item?id=42615646">Hacker News</a></p>
Couldn't get https://alexanderpetros.com/triptych/: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Used Meta AI, now Instagram is using my face on ads targeted at me (286 pts)]]></title>
            <link>https://old.reddit.com/r/ABoringDystopia/comments/1ht7fft/used_meta_ai_to_edit_a_selfie_now_instagram_is/</link>
            <guid>42615538</guid>
            <pubDate>Mon, 06 Jan 2025 20:44:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://old.reddit.com/r/ABoringDystopia/comments/1ht7fft/used_meta_ai_to_edit_a_selfie_now_instagram_is/">https://old.reddit.com/r/ABoringDystopia/comments/1ht7fft/used_meta_ai_to_edit_a_selfie_now_instagram_is/</a>, See on <a href="https://news.ycombinator.com/item?id=42615538">Hacker News</a></p>
Couldn't get https://old.reddit.com/r/ABoringDystopia/comments/1ht7fft/used_meta_ai_to_edit_a_selfie_now_instagram_is/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Self-Hostable Form Back End – OSS Alternative to Formspree (116 pts)]]></title>
            <link>https://github.com/FormBee/FormBee</link>
            <guid>42614316</guid>
            <pubDate>Mon, 06 Jan 2025 19:19:09 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/FormBee/FormBee">https://github.com/FormBee/FormBee</a>, See on <a href="https://news.ycombinator.com/item?id=42614316">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><div dir="auto">
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/FormBee/FormBee/blob/main/client/FormBee/src/assets/FormBee%20(1).png"><img src="https://github.com/FormBee/FormBee/raw/main/client/FormBee/src/assets/FormBee%20(1).png" alt="FormBee" width="200"></a></p><p dir="auto"><h2 tabindex="-1" dir="auto">Form Data Handling Made Easy.</h2><a id="user-content-form-data-handling-made-easy" aria-label="Permalink: Form Data Handling Made Easy." href="#form-data-handling-made-easy"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">The open-source form backend for data privacy conscious developers.</h3><a id="user-content-the-open-source-form-backend-for-data-privacy-conscious-developers" aria-label="Permalink: The open-source form backend for data privacy conscious developers." href="#the-open-source-form-backend-for-data-privacy-conscious-developers"></a></p>
</div>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">🐝 Overview</h2><a id="user-content--overview" aria-label="Permalink: 🐝 Overview" href="#-overview"></a></p>
<p dir="auto">FormBee is an easy way to send form data that is submitted on your website to your email, Telegram, Webhooks, Etc. It is a "Form Backend" which means it allows you to have functional forms that send places without having to write any server side code yourself! We have a hosted option available here: <a href="https://formbee.dev/" rel="nofollow">FormBee Website</a> or you can self-host it!</p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Table of Contents</h2><a id="user-content-table-of-contents" aria-label="Permalink: Table of Contents" href="#table-of-contents"></a></p>
<ul dir="auto">
<li>✨ <a href="#-features">Features</a></li>
<li>🏠 <a href="#-self-hosting">Self Hosting</a></li>
<li>🔧 <a href="#-installationrun-locally">Installation/Run Locally</a>
<ul dir="auto">
<li>👨‍💻 <a href="#-client-side">Client Side</a></li>
<li>🖥 <a href="#-server-side">Server Side</a></li>
</ul>
</li>
<li>🌱 <a href="#-contributing">Contributing</a></li>
<li>🛠 <a href="#-tech-stack">Tech Stack</a></li>
<li>🏆 <a href="#-credits">Credits</a></li>
<li>📜 <a href="#-license">License</a></li>
</ul>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">✨ Features</h2><a id="user-content--features" aria-label="Permalink: ✨ Features" href="#-features"></a></p>
<ul dir="auto">
  <li>🌍 <b>Open Source</b>: Free to use, modify, and contribute.</li>
  <li>🔌 <b>Plugins</b>: Easily send your form data to email, Make.com, Telegram, n8n, Discord, or Webhooks</li>
  <li>🔒 <b>Captcha</b>: Protect your forms from spam with our (PoW) Proof Of Work captchas.</li>
  <li>🔑 <b>White List Domains</b>: Prevent others from using your form backend by whitelisting domains.</li>
  <li>↩️ <b>Automatic return emails </b>: Automatically send return emails to people who submit your forms.</li>
  <li>➕ <b>More Features </b>: FormBee has more to offer than we can fit in here! This is a work in progress passion project!</li>
</ul>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">🏠 Self Hosting</h2><a id="user-content--self-hosting" aria-label="Permalink: 🏠 Self Hosting" href="#-self-hosting"></a></p>
<p dir="auto">We want to make it as easy as possible to self host! In the <code>docker-images</code> folder of the project you will find many variations of the backend you can host, so you can host just what you want, without the bloat of the things you don't want. This is a work in progress, and we're constantly working on adding more. You can read more about self hosting in the <a href="https://docs.formbee.dev/docs/category/self-hosting" rel="nofollow">Official Formbee self-hosting docs</a>. The docs will walk you through pulling the docker images, and running them with the correct environmental variables, then you can host them wherever you like to host your containers!</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">🚆 Railway</h3><a id="user-content--railway" aria-label="Permalink: 🚆 Railway" href="#-railway"></a></p>
<p dir="auto">Formbee has official templates on Railway to make self hosting different Formbee backends as simple as clicking deploy and typing in a few environmental variables.</p>
<ul dir="auto">
  <li>📧 <b><a href="https://railway.app/template/NR9kSH" rel="nofollow">Email Only Template</a></b>: Host just a backend for recieving form data to your email.</li>
</ul>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">🔧 Installation/Run Locally</h2><a id="user-content--installationrun-locally" aria-label="Permalink: 🔧 Installation/Run Locally" href="#-installationrun-locally"></a></p>
<p dir="auto">Clone the repo:</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/FormBee/FormBee.git"><pre>git clone https://github.com/FormBee/FormBee.git</pre></div>
<p dir="auto">FormBee is a monorepo, here are instructions for both the frontend and the backend.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">👨‍💻 Client Side</h2><a id="user-content--client-side" aria-label="Permalink: 👨‍💻 Client Side" href="#-client-side"></a></p>
<p dir="auto">Enter client directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd FormBee\client\FormBee"><pre><span>cd</span> FormBee<span>\c</span>lient<span>\F</span>ormBee</pre></div>
<p dir="auto">Install dependencies:</p>

<p dir="auto">Make your way to <code>src/app/global-vars.ts</code> and change fetchUrl to <code>http://localhost:3000</code></p>
<p dir="auto">Run client side:</p>

<p dir="auto"><strong>With that, the client side should be running, go to <a href="http://localhost:4200/" rel="nofollow">localhost:4200</a>.</strong></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">🖥 Server Side</h2><a id="user-content--server-side" aria-label="Permalink: 🖥 Server Side" href="#-server-side"></a></p>
<p dir="auto">Enter server directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd FormBee/server/formbee"><pre><span>cd</span> FormBee/server/formbee</pre></div>
<p dir="auto">Install Dependencies:</p>

<p dir="auto">Copy .env.example:</p>

<p dir="auto">Configure your .env with your test database credentials (modify the <code>DEV_DB</code> env variables.)
The EMAIL env variables you see are for configuring the email which sends submission emails.</p>
<p dir="auto">Make your way to <code>src/data-source.ts</code> and comment out the second AppDataSource (Prod env vars), and uncomment the first AppDataSource (Dev env vars).
Lastly, make your way to <code>src/index.ts</code> and change the redirectUrl variable to <code>http://localhost:4200</code>, this is for CORS.</p>
<p dir="auto">Finally</p>

<p dir="auto"><strong>With that the server should be running.</strong></p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">🌱 Contributing</h2><a id="user-content--contributing" aria-label="Permalink: 🌱 Contributing" href="#-contributing"></a></p> <p dir="auto">We welcome contributions! Feel free to open an issue or submit a pull request if you'd like to help improve FormBee.</p> <ul dir="auto"> <li>Fork the repository</li> <li>Create a new branch (<code>git checkout -b feature-branch</code>)</li> <li>Make your changes</li> <li>Commit your changes (<code>git commit -m 'Add some feature'</code>)</li> <li>Push to the branch (<code>git push origin feature-branch</code>)</li> <li>Open a pull request</li> </ul>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">🏆 Credits</h2><a id="user-content--credits" aria-label="Permalink: 🏆 Credits" href="#-credits"></a></p> 
<p dir="auto">👋 Hey! I'm <a href="https://github.com/Oia20">Jacob Dement</a>, I created and currently maintain Formbee. Beyond this project I'm currently job hunting, for software engineering roles, so if you know of any openings, shoot me a message! My email is jacob.dement2002 @ gmail dot com US citizen able to relocate to anywhere in the US.</p> 
<a href="https://buymeacoffee.com/jacobdemenl" rel="nofollow"><img src="https://camo.githubusercontent.com/67f1b859c85032255c81e5f861a5f572fa25813c2ea5e7623b7efa91c395e37f/68747470733a2f2f63646e2e6275796d6561636f666665652e636f6d2f627574746f6e732f64656661756c742d6f72616e67652e706e67" alt="Buy Me A Coffee" height="41" width="174" data-canonical-src="https://cdn.buymeacoffee.com/buttons/default-orange.png"></a>
<p dir="auto">(When you contribute feel free to sign and plug yourself here in your PR)</p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">🛠 Tech Stack</h2><a id="user-content--tech-stack" aria-label="Permalink: 🛠 Tech Stack" href="#-tech-stack"></a></p>
<markdown-accessiblity-table><table> 
  <tbody><tr> 
    <td>
      <b>Frontend</b>
    </td> 
    <td>Angular</td> 
  </tr> <tr> <td><b>Backend</b></td> 
    <td>Node.js/Express</td> </tr> <tr> 
      <td><b>Database</b></td> 
      <td>Postgres/TypeORM</td> </tr> <tr> 
        <td><b>Styling</b></td> 
        <td>SCSS/CSS</td> </tr> 
</tbody></table></markdown-accessiblity-table>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">📜 License</h2><a id="user-content--license" aria-label="Permalink: 📜 License" href="#-license"></a></p> <p dir="auto">This project is licensed under the MIT License.</p>
<hr>
<p><a href="https://github.com/Formbee/Formbee/issues"> <img alt="Issues" src="https://camo.githubusercontent.com/87673f52599188858e4b3e905c9022871fb5e55eae81777a1996b619ef04f0cf/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f466f726d6265652f466f726d6265653f636f6c6f723d627269676874677265656e" data-canonical-src="https://img.shields.io/github/issues/Formbee/Formbee?color=brightgreen"> </a> <a href="https://github.com/Formbee/Formbee"> <img alt="GitHub Repo stars" src="https://camo.githubusercontent.com/ce350ac56feffe71ccea72ee02d0c17a4af79d111eae6d2b3f706911f07bcbce/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f466f726d6265652f466f726d6265653f7374796c653d736f6369616c" data-canonical-src="https://img.shields.io/github/stars/Formbee/Formbee?style=social"> </a> </p>
<p dir="auto"><i>Give it a go and recieve your form submissions easier than you ever have before.</i></p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[An autumn bike adventure down the US portion of the Eastern Divide Trail (173 pts)]]></title>
            <link>https://www.crazyguyonabike.com/doc/?doc_id=26078</link>
            <guid>42613878</guid>
            <pubDate>Mon, 06 Jan 2025 18:50:19 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.crazyguyonabike.com/doc/?doc_id=26078">https://www.crazyguyonabike.com/doc/?doc_id=26078</a>, See on <a href="https://news.ycombinator.com/item?id=42613878">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>

   <div>

        

        <h3>An autumn adventure down the US portion of the Eastern Divide Trail</h3><p>

        Copyright © 2024-2025 By
        <a href="https://www.crazyguyonabike.com/directory/?o=3d2&amp;user=zygomorph&amp;v=1" title="zygomorph joined September 21st 2024">zygomorph</a>&nbsp;&nbsp;<a href="https://www.crazyguyonabike.com/doc/guestbook/?o=3d2&amp;doc_id=26078&amp;v=j4" title="Contact"><i></i></a></p><p>
           <span>Completed Dec 2024</span> <br>

        

   3,877 miles (6,239 km) over
         77 days from October 1, 2024 to December 16, 2024 <br>

        <a href="https://www.crazyguyonabike.com/doc/latest/?o=3d2&amp;doc_id=26078&amp;v=j4">Updated</a>: Monday December 16, 2024 19:11 (US/Pacific) (edited Mon 16 Dec 2024 19:28 (US/Pacific))
        <br>
         
        <a href="https://www.crazyguyonabike.com/doc/thumbnails/?o=3d2&amp;doc_id=26078&amp;v=j4">342 pics</a>
           <br>
        12,540 hits since September 30, 2024 (hitcounts updated nightly) </p><p>

        <b>Topic</b>: 

   <a href="https://www.crazyguyonabike.com/doc/26078">Bicycle Touring</a>
      &nbsp;
   <br>
        <b>Categories</b>:
        <a href="https://www.crazyguyonabike.com/doc/categories/?o=3d2&amp;category_id=124&amp;doctype=journal">Tour diaries</a>, <a href="https://www.crazyguyonabike.com/doc/categories/?o=3d2&amp;category_id=1396&amp;doctype=journal">Bikepacking bikes</a>, <a href="https://www.crazyguyonabike.com/doc/categories/?o=3d2&amp;category_id=403&amp;doctype=journal">Camping</a>, <a href="https://www.crazyguyonabike.com/doc/categories/?o=3d2&amp;category_id=404&amp;doctype=journal">Motel</a>, <a href="https://www.crazyguyonabike.com/doc/categories/?o=3d2&amp;category_id=191&amp;doctype=journal">Offroad</a>, <a href="https://www.crazyguyonabike.com/doc/categories/?o=3d2&amp;category_id=405&amp;doctype=journal">Stealth camping</a>, <a href="https://www.crazyguyonabike.com/doc/categories/?o=3d2&amp;category_id=182&amp;doctype=journal">1-3 months</a><br>

        <b>Locales:</b> <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=7160709&amp;doctype=journal">North&nbsp;America</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=227&amp;doctype=journal">United&nbsp;States</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51172&amp;doctype=journal">Maine</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51182&amp;doctype=journal">New&nbsp;Hampshire</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51205&amp;doctype=journal">Vermont</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51185&amp;doctype=journal">New&nbsp;York</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51190&amp;doctype=journal">Pennsylvania</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51173&amp;doctype=journal">Maryland</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51209&amp;doctype=journal">West&nbsp;Virginia</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51207&amp;doctype=journal">Virginia</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51186&amp;doctype=journal">North&nbsp;Carolina</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51163&amp;doctype=journal">Georgia</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51153&amp;doctype=journal">Alabama</a>, <a href="https://www.crazyguyonabike.com/doc/locales/?o=3d2&amp;locale_id=51162&amp;doctype=journal">Florida</a><br>
        <b>Year:</b> <a href="https://www.crazyguyonabike.com/doc/years/?year=2024&amp;doctype=journal">2024</a><br>
           <b>Keywords</b>: Eastern Divide, bikepack, krampus <br>
        </p><p>

        <b>Permalink</b>: <a href="https://www.crazyguyonabike.com/doc/easterndivideq42024" title="Use this URL when linking to this journal">https://www.crazyguyonabike.com/doc/easterndivideq42024</a>
        <a href="#" title="Copy to clipboard" onclick="copyStringToClipboard('https://www.crazyguyonabike.com/doc/easterndivideq42024',true);return false;"><i></i></a>
        </p></div>

    

 <h3 id="toc">Table of Contents</h3>
      <dl>
      <dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=679670&amp;v=Mj" id="679670">Day 0</a>: A Long Expected Journey </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680093&amp;v=MX" id="680093">Day 1</a>: A Rough Start </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680102&amp;v=MA" id="680102">Day 2</a>: Bustin' Baxter </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680249&amp;v=M5" id="680249">Day 3</a>: Velogation Supreme </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680250&amp;v=Lv" id="680250">Day 4</a>: Wishes Come True </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680251&amp;v=LY" id="680251">Day 5</a>: Take Chances, Make Mistakes, and Get Messy </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680291&amp;v=Kv" id="680291">Day 6</a>: Emperor Nero </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680384&amp;v=Ks" id="680384">Day 7</a>: Zero's Paradox </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680439&amp;v=LJ" id="680439">Day 8</a>: A Grand Day Out </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680473&amp;v=KV" id="680473">Day 9</a>: The Man on the Silver Mountain </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680551&amp;v=KC" id="680551">Day 10</a>: Finite State Machine </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680553&amp;v=JW" id="680553">Day 11</a>: Splitting Headache </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680610&amp;v=Jd" id="680610">Day 12</a>: Chain of Fools </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680613&amp;v=JC" id="680613">Day 13</a>: By the Numbers </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680678&amp;v=Ik" id="680678">Day 14</a>: But It Pours </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680708&amp;v=J0" id="680708">Day 15</a>: Eugene Onagain </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680745&amp;v=I7" id="680745">Day 16</a>: Doorways in the Sand </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680842&amp;v=Hz" id="680842">Day 17</a>: When in Rome </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=680985&amp;v=HR" id="680985">Day 18</a>: Shore Leave </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681024&amp;v=He" id="681024">Day 19</a>: On the Straight and Narrow </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681087&amp;v=HD" id="681087">Day 20</a>: Canal Trail Strikes Back </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681116&amp;v=Gs" id="681116">Day 21</a>: Geographic Compression </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681162&amp;v=Ga" id="681162">Day 22</a>: Mixed Media </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681169&amp;v=Fr" id="681169">Day 23</a>: The Lord of the Rings </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681254&amp;v=Ff" id="681254">Day 24</a>: Happy Little Accidents </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681257&amp;v=FD" id="681257">Day 25</a>: State Pen </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681277&amp;v=Ej" id="681277">Day 26</a>: Cranksgiving </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681385&amp;v=Eh" id="681385">Day 27</a>: A Cold Day in Hellbender </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681386&amp;v=EC" id="681386">Day 28</a>: All's Well That Ends Well </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681388&amp;v=E5" id="681388">Day 29</a>: R&amp;R on the C&amp;O </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681410&amp;v=DM" id="681410">Day 30</a>: Country Roads </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681436&amp;v=Cu" id="681436">Day 31</a>: A Day in the Lonesome October </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681492&amp;v=CX" id="681492">Day 32</a>: Blackwater Park </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681493&amp;v=CX" id="681493">Day 33</a>: Robert Katz </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681507&amp;v=Bo" id="681507">Day 34</a>: Springs Into Action </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681564&amp;v=Bd" id="681564">Day 35</a>: An Abundance of Katherines </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681566&amp;v=B9" id="681566">Day 36</a>: Called on Account of Rain </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681587&amp;v=Al" id="681587">Day 37</a>: Logistical Nightmare </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681723&amp;v=Ar" id="681723">Day 45</a>: On the Road Again </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681807&amp;v=Ab" id="681807">Day 46</a>: Star Trek: Trans North Georgia </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681808&amp;v=AA" id="681808">Day 47</a>: Cirith Ungol </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681809&amp;v=AC" id="681809">Day 48</a>: Sweet Home Alabama </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681810&amp;v=9t" id="681810">Day 49</a>: Downhill From Here </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681843&amp;v=9N" id="681843">Day 50</a>: Ten Things I Hate About You </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681844&amp;v=96" id="681844">Day 51</a>: Judgement Call </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681912&amp;v=8x" id="681912">Day 52</a>: Tempting Fate </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681914&amp;v=8G" id="681914">Day 53</a>: Brooklyn 99 - 7 </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681915&amp;v=89" id="681915">Day 54</a>: Hope, the Greatest of All Treasures </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=681916&amp;v=7j" id="681916">Day 55</a>: Nice Ville Ya Got There </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682062&amp;v=7h" id="682062">Day 56</a>: Rattlesnake Lake, the Southern One </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682063&amp;v=76" id="682063">Day 57</a>: I'd Ride a Mile for a Camel Lake </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682064&amp;v=6w" id="682064">Day 58</a>: Your Two Tents </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682066&amp;v=6u" id="682066">Day 59</a>: Cycle of Thanks </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682071&amp;v=6E" id="682071">Day 60</a>: Tallahassle </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682155&amp;v=6Q" id="682155">Day 61</a>: Trails and Tribulations </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682173&amp;v=65" id="682173">Day 62</a>: Saint Marks the Spot </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682194&amp;v=5l" id="682194">Day 63</a>: Aucilla the Hun </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682222&amp;v=5N" id="682222">Day 64</a>: Skipping Ahead </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682244&amp;v=5F" id="682244">Day 65</a>: Many Are Cold, Few Are Frozen </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682269&amp;v=54" id="682269">Day 66</a>: Dream Cycle </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682352&amp;v=4m" id="682352">Day 67</a>: Bagels and Locks </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682354&amp;v=4Z" id="682354">Day 68</a>: Alex Springs Eternal </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682355&amp;v=4T" id="682355">Day 69</a>: What a Bear Does in the Woods </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682356&amp;v=3b" id="682356">Day 70</a>: Point A to Point B </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682397&amp;v=3f" id="682397">Day 71</a>: Insult to Injury </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682400&amp;v=36" id="682400">Day 72</a>: Merger and Acquisition </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682430&amp;v=2R" id="682430">Day 73</a>: Hell on Wheels </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682497&amp;v=29" id="682497">Day 74</a>: Pantera </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682498&amp;v=1l" id="682498">Day 75</a>: The Rainbow Connection </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682500&amp;v=1b" id="682500">Day 76</a>: Keystream </span></dd><dd>
         

   <span><a href="https://www.crazyguyonabike.com/doc/page/?o=3d2&amp;page_id=682510&amp;v=12" id="682510">Day 77</a>: You Just Gotta Ride, Clyde </span></dd></dl>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[C: Simple Defer, Ready to Use (157 pts)]]></title>
            <link>https://gustedt.wordpress.com/2025/01/06/simple-defer-ready-to-use/</link>
            <guid>42613671</guid>
            <pubDate>Mon, 06 Jan 2025 18:36:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gustedt.wordpress.com/2025/01/06/simple-defer-ready-to-use/">https://gustedt.wordpress.com/2025/01/06/simple-defer-ready-to-use/</a>, See on <a href="https://news.ycombinator.com/item?id=42613671">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Software is eating the world, all right (2024) (177 pts)]]></title>
            <link>https://medium.com/@metapgmr/software-is-eating-the-world-all-right-faedbab6d623</link>
            <guid>42613550</guid>
            <pubDate>Mon, 06 Jan 2025 18:28:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://medium.com/@metapgmr/software-is-eating-the-world-all-right-faedbab6d623">https://medium.com/@metapgmr/software-is-eating-the-world-all-right-faedbab6d623</a>, See on <a href="https://news.ycombinator.com/item?id=42613550">Hacker News</a></p>
Couldn't get https://medium.com/@metapgmr/software-is-eating-the-world-all-right-faedbab6d623: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[The Future of Htmx (660 pts)]]></title>
            <link>https://htmx.org/essays/future/</link>
            <guid>42613221</guid>
            <pubDate>Mon, 06 Jan 2025 18:05:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://htmx.org/essays/future/">https://htmx.org/essays/future/</a>, See on <a href="https://news.ycombinator.com/item?id=42613221">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    

  
  
    <address>Carson Gross, Alex Petros</address>
    <p><time>January 01, 2025</time></p><h2 id="in-the-beginning"><a href="#in-the-beginning" aria-label="Anchor link for: in-the-beginning">In The Beginning…</a></h2>
<p>htmx began life as <a rel="noopener" target="_blank" href="https://intercoolerjs.org/">intercooler.js</a>, a library built around jQuery that added behavior based
on HTML attributes.</p>
<p>For developers who are not familiar with it, <a rel="noopener" target="_blank" href="https://jquery.com/">jQuery</a> is a venerable JavaScript
library that made writing cross-platform JavaScript a lot easier during a time when browser implementations were very
inconsistent, and JavaScript didn’t have many of the convenient APIs and features that it does now.</p>
<p>Today many web developers consider jQuery to be “legacy software.” With all due respect to this perspective, jQuery is
currently used on <a rel="noopener" target="_blank" href="https://w3techs.com/technologies/overview/javascript_library">75% of all public websites</a>, a number that dwarfs all other JavaScript tools.</p>
<p>Why has jQuery remained so ubiquitous?</p>
<p>Here are three technical reasons we believe contribute to its ongoing success:</p>
<ul>
<li>It is very easy to add to a project (just a single, dependency-free link)</li>
<li>It has maintained a very consistent API, remaining largely backwards compatible over its life (intercooler.js works
with jQuery v1, v2 and v3)</li>
<li>As a library, you can use as much or as little of it as you like: it stays out of the way otherwise and doesn’t
dictate the structure of your application</li>
</ul>
<h2 id="htmx-is-the-new-jquery"><a href="#htmx-is-the-new-jquery" aria-label="Anchor link for: htmx-is-the-new-jquery">htmx is the New jQuery</a></h2>
<p>Now, that’s a ridiculous (and arrogant) statement to make, of course, but it is an <em>ideal</em> that we on the htmx team are
striving for.</p>
<p>In particular, we want to emulate these technical characteristics of jQuery that make it such a low-cost, high-value
addition to the toolkits of web developers. Alex has
discussed <a rel="noopener" target="_blank" href="https://www.youtube.com/watch?v=lASLZ9TgXyc">“Building The 100 Year Web Service”</a> and we want htmx to be a
useful tool for exactly that use case.</p>
<p>Websites that are built with jQuery stay online for a very long time, and websites built with htmx should be capable of
the same (or better).</p>
<p>Going forward, htmx will be developed with its <em>existing</em> users in mind.</p>
<p>If you are an existing user of htmx—or are thinking about becoming one—here’s what that means.</p>
<h3 id="stability-as-a-feature"><a href="#stability-as-a-feature" aria-label="Anchor link for: stability-as-a-feature">Stability as a Feature</a></h3>
<p>We are going to work to ensure that htmx is extremely stable in both API &amp; implementation. This means accepting and
documenting the <a rel="noopener" target="_blank" href="https://htmx.org/quirks/">quirks</a> of the current implementation.</p>
<p>Someone upgrading htmx (even from 1.x to 2.x) should expect things to continue working as before.</p>
<p>Where appropriate, we may add better configuration options, but we won’t change defaults.</p>
<h3 id="no-new-features-as-a-feature"><a href="#no-new-features-as-a-feature" aria-label="Anchor link for: no-new-features-as-a-feature">No New Features as a Feature</a></h3>
<p>We are going to be increasingly inclined to not accept new proposed features in the library core.</p>
<p>People shouldn’t feel pressure to upgrade htmx over time unless there are specific bugs that they want fixed, and they
should feel comfortable that the htmx that they write in 2025 will look very similar to htmx they write in 2035 and
beyond.</p>
<p>We will consider new core features when new browser features become available, for example we
are <a rel="noopener" target="_blank" href="https://htmx.org/examples/move-before/">already using</a> the experimental <code>moveBefore()</code> API on supported browsers.</p>
<p>However, we expect most new functionality to be explored and delivered via the
htmx <a rel="noopener" target="_blank" href="https://htmx.org/extensions/">extensions API</a>, and will work to make the extensions API more capable where
appropriate.</p>
<h3 id="quarterly-releases"><a href="#quarterly-releases" aria-label="Anchor link for: quarterly-releases">Quarterly Releases</a></h3>
<p>Our release schedule is going to be roughly quarterly going forward.</p>
<p>There will be no death march upgrades associated with htmx, and there is no reason to monitor htmx releases for major
functionality changes, just like with jQuery. If htmx 1.x is working fine for you, there is no reason to feel like you
need to move to 2.x.</p>

<p>htmx does not aim to be a total solution for building web applications and services:
it <a rel="noopener" target="_blank" href="https://dl.acm.org/doi/pdf/10.1145/3648188.3675127">generalizes hypermedia controls</a>, and that’s roughly about it.</p>
<p>This means that a very important way to improve htmx — and one with lots of work remaining — is by helping improve the tools
and techniques that people use <em>in conjunction</em> with htmx.</p>
<p>Doing so makes htmx dramatically more useful <em>without</em> any changes to htmx itself.</p>

<p>While htmx gives you a few new tools in your HTML, it has no opinions about other important aspects of building your
websites. A flagship feature of htmx is that it does not dictate what backend or database you use.</p>
<p>htmx is <a rel="noopener" target="_blank" href="https://htmx.org/essays/hypermedia-on-whatever-youd-like/">compatible with lots of backends</a>, and we want to
help make hypermedia-driven development work better for all of them.</p>
<p>One part of the hypermedia ecosystem that htmx has already helped improve is template engines. When
we <a rel="noopener" target="_blank" href="https://htmx.org/essays/template-fragments/">first wrote</a> about how “template fragments” make defining partial page
replacements much simpler, they were a relatively rare feature in template engines.</p>
<p>Not only are fragments much more common now, that essay
is <a rel="noopener" target="_blank" href="https://github.com/mitsuhiko/minijinja/issues/260">frequently</a> <a rel="noopener" target="_blank" href="https://github.com/sponsfreixes/jinja2-fragments">cited</a>
as an inspiration for building the feature.</p>
<p>There are many other ways that the experience of writing hypermedia-based applications can be improved, and we will
remain dedicated to identifying and promoting those efforts.</p>
<h3 id="writing-research-and-standardization"><a href="#writing-research-and-standardization" aria-label="Anchor link for: writing-research-and-standardization">Writing, Research, and Standardization</a></h3>
<p>Although htmx will not be changing dramatically going forward, we will continue energetically evangelizing the ideas of
hypermedia.</p>
<p>In particular, we are trying to push <a rel="noopener" target="_blank" href="https://dl.acm.org/doi/pdf/10.1145/3648188.3675127">the ideas</a> of htmx into the
HTML standard itself, via the <a rel="noopener" target="_blank" href="https://alexanderpetros.com/triptych/">Triptych project</a>. In an ideal world, htmx
functionality disappears into the web platform itself.</p>
<p>htmx code written <em>today</em> will continue working forever, of course, but in the very long run perhaps there will be no
need to include the library to achieve <a rel="noopener" target="_blank" href="https://htmx.org/examples">similar UI patterns</a> via hypermedia.</p>
<h2 id="intercooler-was-right"><a href="#intercooler-was-right" aria-label="Anchor link for: intercooler-was-right">Intercooler Was Right</a></h2>
<p>At the <a rel="noopener" target="_blank" href="https://intercoolerjs.org/docs#philosophy">end of the intercooler docs</a>, we said this:</p>
<blockquote>
<p>Many javascript projects are updated at a dizzying pace. Intercooler is not.</p>
<p>This is not because it is dead, but rather because it is (mostly) right: the basic idea is right, and the implementation
at least right enough.</p>
<p>This means there will not be constant activity and churn on the project, but rather
a <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/Stewardship_(theology)">stewardship</a> relationship: the main goal now is to not screw
it up. The documentation will be improved, tests will be added, small new declarative features will be added around the
edges, but there will be no massive rewrite or constant updating. This is in contrast with the software industry in
general and the front end world in particular, which has comical levels of churn.</p>
<p>Intercooler is a sturdy, reliable tool for web development.</p>
</blockquote>
<p>Leaving aside <a rel="noopener" target="_blank" href="https://www.youtube.com/watch?v=zGyAWH5btwY">the snark at the end of the third paragraph</a>, this thinking
is very much applicable to htmx. In fact, perhaps even more so since htmx is a standalone piece of software, benefiting
from the experiences (and mistakes) of intercooler.js.</p>
<p>We hope to see htmx, in its own small way, join the likes of giants like jQuery as a sturdy and reliable tool for
building your 100 year web services.</p>

  <p>
    &lt;/&gt;
  </p>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[All clocks are 30 seconds late (282 pts)]]></title>
            <link>https://victorpoughon.fr/all-clocks-are-30-seconds-late/</link>
            <guid>42612842</guid>
            <pubDate>Mon, 06 Jan 2025 17:40:49 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://victorpoughon.fr/all-clocks-are-30-seconds-late/">https://victorpoughon.fr/all-clocks-are-30-seconds-late/</a>, See on <a href="https://news.ycombinator.com/item?id=42612842">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    

    
        
    

    
        

        <p>
            <i>
                <time datetime="2025-01-06T10:00Z">
                    06 Jan, 2025
                </time>
            </i>
        </p>
    

    <p>OK, this is going to sound crazy: I believe all clocks are 30 seconds late.</p>
<p>Let's get a few things out of the way: this is neither about time zones, nor leap seconds.
It's not about synchronization of clocks, and it's not about relativity or any obscure corner of physics.
I'm talking about everyday clocks. The ones that you might have around in your house, like this one that sits on my desk:</p>
<p><img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/victorpoughon/post2image1-2.webp" alt="post2image1"></p>
<p>Or this one that stands in London:</p>
<p><img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/victorpoughon/572px-big_ben_elizabeth_tower_london_2023_01_detail.webp" alt="572px-Big_Ben_Elizabeth_Tower_London_2023_01_Detail"></p>
<p><em>(Photo from Wikipedia)</em></p>
<p>Or even the clock on your phone! Maybe they're all correctly set very precisely to a very accurate reference clock, but here I will argue that they are still exactly 30 seconds late. In other words:</p>
<blockquote>
<p>It would be more accurate if they were thirty seconds ahead.</p>
</blockquote>
<h2 id="what-are-you-on-about">What are you on about?</h2><p>All the above clocks have one thing in common: they don't show seconds. They truncate down to the nearest lower whole minute, right? So when it's actually <code>14:15:45</code>, they'll show <code>14:15</code>.
And when the actual time goes from <code>14:15:59</code> to <code>14:16:00</code>, then that's when your clock changes from <code>14:15</code> to <code>14:16</code>.</p>
<p>They apply the
<a href="https://en.wikipedia.org/wiki/Floor_and_ceiling_functions">floor function</a>!</p>
<p>Ok great. Now hear me out! Let's compute the average error between a usual (truncating) clock, and the precise current time.</p>
<div><pre><span></span><span>import</span> <span>datetime</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>import</span> <span>matplotlib.pyplot</span> <span>as</span> <span>plt</span>
<span>import</span> <span>matplotlib.dates</span> <span>as</span> <span>mdates</span>

<span># A datetime array from 14:00:15pm for 300 seconds</span>
<span>true_time</span> <span>=</span> <span>np</span><span>.</span><span>array</span><span>([</span><span>datetime</span><span>.</span><span>datetime</span><span>(</span><span>2024</span><span>,</span> <span>12</span><span>,</span> <span>20</span><span>,</span> <span>14</span><span>,</span> <span>00</span><span>,</span> <span>15</span><span>)</span> <span>+</span> <span>datetime</span><span>.</span><span>timedelta</span><span>(</span><span>seconds</span><span>=</span><span>i</span><span>)</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>300</span><span>)])</span>

<span># The clock truncates seconds</span>
<span>shown_time</span> <span>=</span> <span>[</span><span>t</span><span>.</span><span>replace</span><span>(</span><span>second</span><span>=</span><span>0</span><span>)</span> <span>for</span> <span>t</span> <span>in</span> <span>true_time</span><span>]</span>

<span># The clock error is the shown time minus the true time</span>
<span>error</span> <span>=</span> <span>[</span><span>dt</span><span>.</span><span>total_seconds</span><span>()</span> <span>for</span> <span>dt</span> <span>in</span> <span>(</span><span>shown_time</span> <span>-</span> <span>true_time</span><span>)]</span>

<span>fig</span><span>,</span> <span>ax</span> <span>=</span> <span>plt</span><span>.</span><span>subplots</span><span>(</span><span>figsize</span><span>=</span><span>(</span><span>10</span><span>,</span> <span>3.5</span><span>))</span>
<span>ax</span><span>.</span><span>plot</span><span>(</span><span>true_time</span><span>,</span> <span>error</span><span>,</span> <span>label</span><span>=</span><span>"clock error"</span><span>,</span> <span>color</span><span>=</span><span>"teal"</span><span>)</span>
<span>ax</span><span>.</span><span>hlines</span><span>(</span><span>np</span><span>.</span><span>mean</span><span>(</span><span>error</span><span>),</span> <span>xmin</span><span>=</span><span>true_time</span><span>[</span><span>0</span><span>],</span> <span>xmax</span><span>=</span><span>true_time</span><span>[</span><span>-</span><span>1</span><span>],</span> <span>label</span><span>=</span><span>"average"</span><span>,</span> <span>linestyle</span><span>=</span><span>"--"</span><span>,</span> <span>color</span><span>=</span><span>"orange"</span><span>)</span>
<span>ax</span><span>.</span><span>xaxis</span><span>.</span><span>set_major_formatter</span><span>(</span><span>mdates</span><span>.</span><span>DateFormatter</span><span>(</span><span>'%H:%M'</span><span>))</span>
<span>ax</span><span>.</span><span>set_ylim</span><span>([</span><span>-</span><span>60</span><span>,</span> <span>60</span><span>])</span>
<span>ax</span><span>.</span><span>set_title</span><span>(</span><span>"A normal clock"</span><span>)</span>
<span>ax</span><span>.</span><span>legend</span><span>()</span>
</pre></div>
<p><img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/victorpoughon/post2plot1-1.webp" alt="post2plot1"></p>
<ul>
<li>Sometimes the error is 1 or 2 seconds, like when the clock shows <code>14:02</code> and it's actually <code>14:02:01</code></li>
<li>Sometimes the error is almost 60 seconds, like when the clock shows <code>14:02</code> and it's actually <code>14:02:57</code></li>
</ul>
<p>So, the average error of a truncating clock is 30 seconds. Let that sink in for a moment: <strong>the average error of a clock is 30 seconds</strong>. If clocks
<a href="https://en.wikipedia.org/wiki/Rounding">rounded</a>
to the nearest minute instead of truncating, the average error would be 0. Therefore all clocks are 30 seconds late!</p>
<p>Similarly of course, all clocks that show seconds but not milliseconds are half a second late.</p>
<div><pre><span></span><span># The rounding clock! aka +30s</span>
<span>shown_time</span> <span>=</span> <span>[(</span><span>t</span> <span>+</span> <span>datetime</span><span>.</span><span>timedelta</span><span>(</span><span>seconds</span><span>=</span><span>30</span><span>))</span><span>.</span><span>replace</span><span>(</span><span>second</span><span>=</span><span>0</span><span>)</span> <span>for</span> <span>t</span> <span>in</span> <span>true_time</span><span>]</span>

<span># The clock error is the shown time minus the true time</span>
<span>error</span> <span>=</span> <span>[</span><span>dt</span><span>.</span><span>total_seconds</span><span>()</span> <span>for</span> <span>dt</span> <span>in</span> <span>(</span><span>shown_time</span> <span>-</span> <span>true_time</span><span>)]</span>

<span>fig</span><span>,</span> <span>ax</span> <span>=</span> <span>plt</span><span>.</span><span>subplots</span><span>(</span><span>figsize</span><span>=</span><span>(</span><span>10</span><span>,</span> <span>3.5</span><span>))</span>
<span>ax</span><span>.</span><span>plot</span><span>(</span><span>true_time</span><span>,</span> <span>error</span><span>,</span> <span>label</span><span>=</span><span>"clock error"</span><span>,</span> <span>color</span><span>=</span><span>"teal"</span><span>)</span>
<span>ax</span><span>.</span><span>hlines</span><span>(</span><span>np</span><span>.</span><span>mean</span><span>(</span><span>error</span><span>),</span> <span>xmin</span><span>=</span><span>true_time</span><span>[</span><span>0</span><span>],</span> <span>xmax</span><span>=</span><span>true_time</span><span>[</span><span>-</span><span>1</span><span>],</span> <span>label</span><span>=</span><span>"average"</span><span>,</span> <span>linestyle</span><span>=</span><span>"--"</span><span>,</span> <span>color</span><span>=</span><span>"orange"</span><span>)</span>
<span>ax</span><span>.</span><span>xaxis</span><span>.</span><span>set_major_formatter</span><span>(</span><span>mdates</span><span>.</span><span>DateFormatter</span><span>(</span><span>'%H:%M'</span><span>))</span>
<span>ax</span><span>.</span><span>set_ylim</span><span>([</span><span>-</span><span>60</span><span>,</span> <span>60</span><span>])</span>
<span>ax</span><span>.</span><span>set_title</span><span>(</span><span>"A rounding clock"</span><span>)</span>
<span>ax</span><span>.</span><span>legend</span><span>()</span>
</pre></div>
<p><img src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/victorpoughon/post2plot2-1.webp" alt="post2plot2"></p>
<h2 id="this-is-just-a-convention">This is just a convention</h2><blockquote>
<p>But this is just a convention! Truncating, rounding or even ceiling are all valid, as long as we pick one and stick to it. By your logic we should say that it's Tuesday as soon as it's one second past noon on Monday.</p>
</blockquote>
<p>Well... kind of.</p>
<p>It would be weird if we rounded for years, months and days, that's for sure. I think most people think of those scales as intervals. In other words, July is a period of time, with a start and an end. So are years, centuries, seasons. We are inside of it or outside.</p>
<p>Is it the same for the current minute of the current hour ? I'm not so sure.</p>
<p>Basically I'm arguing that rounding for clocks would be more useful than flooring.
This is especially apparent when you're trying to calculate "how much time until my next meeting?", and your next meeting is at noon. If it's 11:55, you would usually mentally subtract and conclude: the meeting is in 5 minutes. That's how I always do it myself anyway! But the most probable estimate given the available information is actually 4'30"!</p>
<p>If you had a rounding clock instead, 5 minutes would be the correct estimation.</p>
<p>In fact, as we go down the various scales of time all the way from years, months, days and we reach hours, that's when we start truncating! At hours! For example: if it's <code>10:43</code> and you are asked the time and (for some context appropriate reason) you reply with just hours, you would say it's 11! Personally, I would never say that it's 10 if the clock shows anything past <code>10:30</code>. I realize that's probably very different in other cultures, though! And I'd be interested to learn about how different cultures approximate time in language.</p>
<p>So, looking at the various scales of time and how I mentally view them:</p>
<ul>
<li><strong>Years</strong>: truncate. If the full date has <code>2019</code> in it, I'll say "the year is 2019" - all the way to the end. Saying "it's 2020" in September 2019 is super weird.</li>
<li><strong>Months</strong>: truncate. It's January all the way until it's February.</li>
<li><strong>Days</strong>: truncate. It gets a little weird if it's past midnight and I haven't slept yet. Is tomorrow today? Or is it the day after that? I think collectively we still haven't quite figured that one out yet. And that's ok. Kind of like how "next Friday" becomes ambiguous on Thursdays. Some cultures use times beyond 24:00, like 25:30 to indicate one hour and a half past midnight, and I think that's lovely!</li>
<li><strong>Hours</strong>: That's when mentally, I switch to rounding! At <code>15:48</code> I definitely feel like it's pretty much <code>16:00</code>.</li>
<li><strong>Minutes</strong>: At <code>15:48:57</code>, I definitely feel like it's <code>15:49</code>! But clocks switch back to flooring for for some reason! But mentally we round! This is why I feel like all clocks are 30 seconds late: because the truncating convention doesn't match my intuition at the minute scale.</li>
<li><strong>Seconds and below</strong>: definitely rounding.</li>
</ul>
<p>Please someone tell me I'm not crazy 🙃</p>


    

    
        

        
            


        
    


  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[3blue1brown YouTube Bitcoin video taken down as copyright violation (653 pts)]]></title>
            <link>https://twitter.com/3blue1brown/status/1876291319955398799</link>
            <guid>42612494</guid>
            <pubDate>Mon, 06 Jan 2025 17:10:46 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/3blue1brown/status/1876291319955398799">https://twitter.com/3blue1brown/status/1876291319955398799</a>, See on <a href="https://news.ycombinator.com/item?id=42612494">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[My little sister's use of ChatGPT for homework is heartbreaking (264 pts)]]></title>
            <link>https://old.reddit.com/r/ChatGPT/comments/1hun3e4/my_little_sisters_use_of_chatgpt_for_homework_is/</link>
            <guid>42611844</guid>
            <pubDate>Mon, 06 Jan 2025 16:19:20 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://old.reddit.com/r/ChatGPT/comments/1hun3e4/my_little_sisters_use_of_chatgpt_for_homework_is/">https://old.reddit.com/r/ChatGPT/comments/1hun3e4/my_little_sisters_use_of_chatgpt_for_homework_is/</a>, See on <a href="https://news.ycombinator.com/item?id=42611844">Hacker News</a></p>
Couldn't get https://old.reddit.com/r/ChatGPT/comments/1hun3e4/my_little_sisters_use_of_chatgpt_for_homework_is/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Justin Trudeau resigns (406 pts)]]></title>
            <link>https://www.bbc.com/news/live/clyjmy7vl64t</link>
            <guid>42611730</guid>
            <pubDate>Mon, 06 Jan 2025 16:07:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.com/news/live/clyjmy7vl64t">https://www.bbc.com/news/live/clyjmy7vl64t</a>, See on <a href="https://news.ycombinator.com/item?id=42611730">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article data-testid="content-post" id="asset:d8d78812-2c27-40cc-839b-ba2651f3bc82"><header><span><img src="https://static.files.bbci.co.uk/core/website/assets/static/news/incident-types/analysis.77b314ef10b5742f931e.svg" alt="Analysis" draggable="false"><h3 type="normal"><span role="text"><span>Once the fresh face of his party, Trudeau became a drag on its fortunes</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 17:38 Greenwich Mean Time</span></span></span></span></h3></span></header><p><span><span><span></span></span></span><span><strong>Jessica Murphy</strong><br>BBC News, Toronto</span></p><figure><p><span><img alt="Trudeau in dark suit with beard, next to blurry reflection of himself" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/1/6/201ddc2d-ea59-4b5f-8281-58cbfb0e429c.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/1/6/201ddc2d-ea59-4b5f-8281-58cbfb0e429c.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/1/6/201ddc2d-ea59-4b5f-8281-58cbfb0e429c.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/1/6/201ddc2d-ea59-4b5f-8281-58cbfb0e429c.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/1/6/201ddc2d-ea59-4b5f-8281-58cbfb0e429c.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/1/6/201ddc2d-ea59-4b5f-8281-58cbfb0e429c.jpg.webp 800w" width="1024" height="668"></span><span role="text"><span>Image source, </span>Getty Images</span></p><figcaption><span>Image caption, </span><p>Trudeau in 2020</p></figcaption></figure><p>For months now – in the face of a frustrated electorate, a political rival surging in the polls, and most importantly, a deepening dislike from voters - Prime Minister Justin Trudeau has faced variations of the same question: “Will you step down?”</p><p>He has always stood firm, vowing he would be the one to lead the party into the next election.</p><p>But the shock resignation of his key deputy, former Finance Minister Chrystia Freeland, in mid-December proved to be the toppling domino that led to todays’ announcement. </p><p>Trudeau swept to power nearly a decade ago, heralded as the fresh face of progressive politics. In 2015, swayed by his youthful charisma and a hopeful political message, voters catapulted the Liberals from a third-place party into a majority - unprecedented in Canadian political history.</p><p>He remains the only leader left standing among peers when he came into office, from Barack Obama to Angela Merkel, Shinzo Abe and David Cameron, and is currently the longest-serving leader in the G7. </p><p>But in the years since, and over two general elections, Trudeau and his brand have become a drag on the party’s fortunes.</p><p>A series of early ethics scandals began to take the sheen off the new government. He was found to have violated federal conflict of interest rules in the handling of a corruption inquiry – the SNC-Lavalin affair - and for luxury trips to the Bahamas.</p><p>In 2020, he faced scrutiny for picking a charity with ties to his family to manage a major government programme.</p><p>More recently, Trudeau faced headwinds over the cost of living and inflation, which have contributed to incumbent election upsets around the world.</p><p>And after more than nine years in power, he is among Canada’s longest serving prime ministers, and there is a general sense of fatigue and frustration with his government.</p><p>In the end, pressure from his own MPs, who over the holidays made it clear they no longer supported his leadership, made staying on near impossible.</p></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Spline Distance Fields (149 pts)]]></title>
            <link>https://zone.dog/braindump/spline_fields/</link>
            <guid>42611540</guid>
            <pubDate>Mon, 06 Jan 2025 15:49:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://zone.dog/braindump/spline_fields/">https://zone.dog/braindump/spline_fields/</a>, See on <a href="https://news.ycombinator.com/item?id=42611540">Hacker News</a></p>
<div id="readability-page-1" class="page">
    
    <p>
      December 31th, 2024
    </p>
    <h2 id="problem">Problem</h2>
    <p>
      Earlier this year I decided to put my main project Tangerine on hold
      indefinitely and began prototyping
      <a href="https://github.com/aeva/star-machine">a new renderer</a>
      in an <a href="https://en.wikipedia.org/wiki/C_Sharp_(programming_language)">unfamiliar language</a>
      using a <a href="https://github.com/libsdl-org/SDL/pull/9312">totally new graphics API</a>
      with the goal of overcoming all of Tangerine's technical shortcomings.
      The new renderer is an eccentric CPU ray tracer called Star Machine that
      boasts the ability to <em>effortlessly</em> push 4k frames at 120hz or
      better <em>irrespective of scene complexity</em>, a custom coordinate
      system that limits the play space to roughly <em>940.7 astronomical
      units</em> with a constant world resolution of 15 micrometers, and a
      <em>truly unique</em> visual style.  To prove out the underlying theories and
      help me prioritize what to work on, I am also developing a time trial
      racing game called
      <a href="https://mastodon.gamedev.place/@aeva/113104448301517076">Rainy Road</a>.
    </p>
    <p>
      At this time of writing, Rainy Road lacks a way to render terrain.  These
      are my requirements for its terrain rendering system:
    </p>
    <ol>
      <li>
        Some terrain features (roads specifically) must be defined as splines.
      </li>
      <li>
        Terrain features must be composable, allowing for map sections to be
        rapidly swapped out at runtime.
      </li>
      <li>
        The system must be useful for procedural object placement.
      </li>
      <li>
        Terrain data must be fast to process into rendering intermediaries.
      </li>
      <li>
        Terrain data must be very compact.  An implicit representation is
        preferred if possible.
      </li>
      <li>
        Iterating on designing level sections must be quick and easy.
      </li>
      <li>
        I'd like to use existing tools where possible.
      </li>
      <li>
        I'm not interested in using proprietary tools for this project.
      </li>
    </ol>
    <p>
      A quick survey of existing terrain editing tools revealed that virtually
      all general purpose terrain editors violate at least one of these
      constraints, and unsurprisingly I did not find any terrain tools
      available targeting my particular niche.
    </p>
    <p>
      The next most obvious course of action is to use low resolution
      heightmaps with a good noise function to give it the illusion of being
      continous.  I've seen games (which are now 20+ years old now) use this
      technique to great effect, so I consider this to be pretty low risk.
      Additionally, I figure I can use Blender to rapidly iterate on variations
      of this technique, and once I am satisfied it can function as the level
      editor.
    </p>
    <p>
      My experimentation in Blender (and lots of great feedback from internet
      people experienced on the subject) quickly revealed that reasoning about
      landscapes and roads in isolation from one another "adds skill" a bit
      more than I would like, and so I see this as a good opportunity to
      develop structured workflows and supporting tools to take me to the
      places I want to go.
    </p>
    <h2 id="solution">Solution</h2>
    <p>
      This particular conceptual brick in the washing machine has led me to
      deeply internalizing what I now know to be a fundamental law of design
      and composition that applies <em>universally</em>:
    </p>
    <p>
      <a href="https://en.wikipedia.org/wiki/Tobler%27s_first_law_of_geography">
        <strong><em>Everything Affects Everything</em></strong>
      </a>
    </p>
    <p>
      In the real world roads are built along whatever happens to be the most
      circumstantially optimal route through the world they are to exist
      within.  The landscape (among other things) affects the decision of
      where to put a road, and in turn the road changes the landscape.
    </p>
    <p>
      If we know where some things <em>must</em> be, then we can infer what
      surrounds those thing.  We can eschew the input height map entirely, and
      instead generate the terrain from only points and splines, possibly in
      real time.
    </p>
    <p>
      It turns out there's
      <a href="https://en.wikipedia.org/wiki/Spatial_analysis">a whole field of math about this stuff</a>
      already that I didn't even know existed until after developing the
      spline distance fields technique and posting about it on Mastodon, and
      at this time of writing, I have not yet explored it in any significant
      depth.
    </p>
    <p>
      According to my journal, on September 20th of 2024 I realized I could
      generate plausible terrain surfaces entirely from splines that describe
      the important terrain features (rivers, roads, rails, cliffs, etc).  In
      its simplest form each point in space has a corresponding closent point
      on the closest spline.  That closest-point-on-closest-spline (along with
      its corresponding binormal vector) defines a plane that determines the
      local elevation relative to your original arbitrary point in space.  This
      effectively is a method of extruding splines within a constraining
      volume of space that suspiciously resembles a voronoi diagram (because it
      secretly is one, but don't worry about that).
    </p>
    <p>
      Things get a bit dicey for sampling points that are close to the boundary
      of a spline field, but as I wrote in my journal, these inbetween spaces
      should simply be "interpolated somehow".  I call this the "liminality
      problem".  This can appear similar to subduction and obduction in real
      life, and so this quality may be reasonably considered a useful feature
      if it can be handled intentionally.  However, in most cases you will want
      your spline zones to flow together seamlessly, and so this article only
      describes a method that sweeps the problem under the rug.
    </p>
    <p>
      <a href="https://mastodon.gamedev.place/@aeva/113174121732654836">The next day</a>
      I put this idea to the test, and this is what I got:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/spline_field_a.png">
    </p>
    <p>
      Applying what I learned from making that first test, I produce this
      second attempt right away:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/spline_field_b.png">
    </p>
    <p>
      <a href="https://mastodon.gamedev.place/@aeva/113179963448228702">The following day</a>
      I pushed the technique further to experiment with procedural object
      placement and test out road generation.  This is what I came up with:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/spline_field_c.png">
    </p>
    <p>
      This is <em>exactly</em> the sort of thing I've been searching for.
    </p>
    <p>
      This technique is still an area of active experimentation and research
      for me:
    </p>
    <ul>
        <li>
          This technique can be modified to describe
          <a href="https://mastodon.gamedev.place/@aeva/113303633154607005">freeform 3D surfaces</a>
          instead of heightmaps.
        </li>
        <li>
          Exploring alternative
          <a href="https://mastodon.gamedev.place/@aeva/113320880275563952">interpolation strategies</a>.
        </li>
        <li>
          Whether or not
          <a href="https://mastodon.gamedev.place/@aeva/113344090802658027">sparse point clouds</a>
          are better than heightmaps as a rendering intermediary for Star Machine.
        </li>
        <li>
          Actually sitting down and implementing this in Star Machine.
        </li>
      </ul>
    
    <p>
      Unfortunately due to my yearly struggle with
      <a href="https://en.wikipedia.org/wiki/Seasonal_affective_disorder">Father Winter</a>
      and a very stressful ongoing dispute with my health insurance, I've
      stalled out on this research project for the time being.
    </p>
    <p>
      Until the rains of spring heal my soul and wash away the pain,
    </p>
    <h2 id="how_it_works">Here's How the Basic Version Works</h2>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/the_important_part.png">
    </p>
    <p>
      The above pseudo code outlines the entire technique.  If this tells you
      everything you need to know to implement it, great!  Be sure to at least
      take a quick look through the <a href="#appendix_b">pretty pictures</a>
      at the end of this post before you close the browser tab.
      Or don't!  Nobody is paying anyone to hold on to your attention.  You are
      free!  I don't even know if anyone is even reading this because I don't
      collect any analytics at all.
    </p>
    <p>
      Now, for everyone who wasn't born with perfect knowledge of everything,
      the next section of this post walks through how the <em>normal</em>,
      <em>tangent</em>, and <em>binormal</em> vectors work for splines in
      Blender; and the section after that steps through a real working
      implementation of this technique.  Example source files are also
      provided for you to use in any way you like.
    </p>

    <h2 id="relevant_spline_math">Relevant Spline Math</h2>
    <p>
      Blender's Geometry Nodes system provides a variety of useful high level
      functions for working with Blender's curve and point cloud primitives, so
      we're going to use those where possible.  This leaves a few bits of math
      to review  that are important to our implementation.  If you already know
      how to calculate a binormal vector, breeze on over to
      <a href="#generating_the_heightmap">the next section</a>.
    </p>
    <p>
      The first thing we need is the ability to define a plane for any given
      point on a spline.  For our purposes we'll use a point in space and the
      direction that is perpendicular to the plane (aka "the surface normal" of
      the plane).  In terms of spline parameters, these vectors are called the
      <em>position</em> and the <em>binormal</em>.  Blender does not provide
      the spline's <em>binormal</em>, but it is very easy to calculate it from
      the spline's <em>normal</em> and <em>tangent</em> vectors which Blender
      does provide.
    </p>
    <p>
      <strong><em>I cannot stress this enough</em></strong> the thing we want
      here is the thing you're probably used to calling "the surface normal",
      <strong>but</strong>—for
      <a href="https://en.wikipedia.org/wiki/Frenet%E2%80%93Serret_formulas#Definitions">reasons</a>
      I am <em>not</em> responsible for—the thing we want is instead called the
      "<strong>binormal</strong>" here and the thing that is called the "normal"
      is instead a different thing.  Why did the mathematicians do this to us?!
    </p>
    <p>
      Blender's splines always define a <em>tangent</em> and <em>normal</em>
      vector for all control points and all interpolated points.  These are
      "unit vectors", which means they always have a length of one, and they
      encode a direction.  The <em>binormal</em> is the cross product of these
      two vectors, which I'll illustrate in a little bit.
    </p>
    <h3 id="the_tangent_vector">The Tangent Vector</h3>
    <p>
      The <em>tangent</em> vector is a unit vector that grazes the point on the
      curve.  This vector rests on the surface of the plane we want to
      describe.  This is what it looks like:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/tangents.png">
    </p>
    <h3 id="the_normal_vector">The Normal Vector</h3>
    <p>
      The <em>normal</em> vector perpendicular to the <em>tangent</em> vector,
      and also rests on the surface of the plane we want to describe.  This is
      what it looks like:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/normals.png">
    </p>
    <h3 id="calculating_the_binormal">Calculating the Binormal</h3>
    <p>
      To calculate the <em>binormal</em>, take the cross product of the
      <em>normal</em> and <em>tangent</em>, like so:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/binormals.png">
    </p>

    <h2 id="generating_the_heightmap">Generating the Heightmap</h2>
    <p>
      With the spline's <em>binormal</em> in hand, now it is time to generate
      the height map.  Here's the eagle eye view:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/the_big_picture.png">
    </p>
    <p>
      I find it works best to keep the splines in their own collection.  This
      way the geometry node graph can read alll of the splines from it in one
      go, and you don't need to change any code to add more splines to your
      terrain.  Only one geometry nodes modifier is required to implement this
      technique, and that placed on an empty mesh.
    </p>
    <p>
      Let's examine the <strike>spaghetti</strike> program:
    </p>

    <h3 id="curves_to_surfels">Curves to Surfels</h3>
    <p>
      You may have already noticed this, but the curves are just a useful
      editing interface that is immediately discarded.
    </p>
    <p>
      What we're actually doing is using the curves to generate a set of
      primitives called surfels, and then using the surfels to extrapolate the
      surface of the terrain.  In this particular case, a surfel is defined as
      being a point in space with an associated <strike>normal</strike>
      <em>binormal</em> vector.  Maybe I should have named this technique
      "<em>surfel distance fields</em>".
    </p>
    <p>
      Since our heightmap starts as a flat subdivided plane, we'll get the best
      results if we project the surfels onto the XY plane before sampling them
      so that Blender's sampling functions behave the way we expect them to.
      We still need the original position, so we just capture that attribute to
      snapshot it before flattening.
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/overview_part_1.png">
    </p>

    <h3 id="surfel_sampling">Surfel Sampling</h3>
    <p>
      Next we create the geometry that will be deformed into our terrain.  For
      this we use the <em>Grid</em> node.  <strong>The density of the grid
      affects interpolation behavior</strong>.  The mesh generation method
      described in this page takes the "sweep the error under the rug"
      strategy.  <em>If your vertex density is too high, you will get abrupt
      changes in elevation between locations that belong to different
      curves.</em>  Likewise, if your vertex density is too low, your landscape
      will be soft and featureless.
    </p>
    <p>
      To sample the nearest surfel parameters, use the <em>Sample Nearest</em>
      node to find the index of the nearest surfel to a given vertex on the
      grid.  Then use the <em>Sample Index</em> node to translate that index
      into the parameters we want.  If you're not familiar with geometry
      nodes's
      <a href="https://docs.blender.org/manual/en/latest/modeling/geometry_nodes/fields.html">fields</a>
      concept, the following graph section will look confusing.
    </p>
    <p>
      The <em>Capture Attribute</em> at the end of this part of the program is
      not strictly necessary, but I've added it in hopes of making the data
      flow a little clearer.
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/overview_part_2.png">
    </p>

    <h3 id="generate_the_heightmap">Generate the Heightmap</h3>
    <p>
      I've mentioned a plane function many times now, and here it finally is!
      The graph section below starts by finding the distance of each point on
      the undeformed heightmap to the closest surfel.  The function for this is
      the <em>signed distance</em> from an arbitrary point in space to the
      nearest point on a plane.  The term "<em>signed distance</em>" means the
      distance can be a negative value, which usually indicates that the
      evaluated point was under the surface of the plane.
    </p>
    <p>
      However, that would imply that a negation would be needed in my code
      below, <em>which is curiously absent</em>.  The reason for this is I
      screwed up the math somewhere here in such a way that inverts the
      polarity of the result.  This elides the need for the negation.  The
      result appears to be correct though.  Please pretend that I am smart and
      meant to do this.  Someone smart once told me that every shipped game
      contains an even number of sign errors.
    </p>
    <p>
      Moving on, once you have the planar distance in hand, I find that bluring
      it a few iterations helps to smooth out any liminality problems, much
      like adjusting the vertex density.  This is not an exact science, but
      generally if you adjust the number of blur iterations or the number of
      verticies, you also have to adjust the other.
    </p>
    <p>
      Finally, we use the blurred distance field value as an position offset
      along the Z axis, and that gets us the deformed terrain mesh.
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/overview_part_3.png">
    </p>

    <h3 id="tada"><em>Tada!</em></h3>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/result.png">
    </p>

    <h2 id="appendix_a">Appendix A: Show Me the Source!</h2>
    <p>
      Here are the blend files for the examples shown above:
    </p>
    <ul>
      <li><a href="https://zone.dog/braindump/spline_fields/spline_vectors.blend">Spline Vector Illustrations</a></li>
      <li><a href="https://zone.dog/braindump/spline_fields/spline_distance_fields.blend">Full Spline Distance Field Implementation</a></li>
    </ul>
    <p>
      These example files are made available to you to use for whatever you
      like via your choice of
      <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a> or
      <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY</a>.
    </p>
    <p>
      If you do choose to provide attribution for some reason, credit me as
      "Aeva Palecek" and link to this article if it is reasonable to do so.
    </p>

    <h2 id="appendix_b">Appendix B: Examples in the Wild</h2>
    <h2 id="promising_prototype">Promising Prototype Provokes Preproduction Perturbation</h2>
    <p>
      I put one of my early prototypes into the hands of my dear friend
      <a href="https://bsky.app/profile/bmprager.bsky.social">Bitmap</a> and 30
      minutes later she sent me this message:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/unlimited_power_a.png">
    </p>
    <p>
      And the next day she sent me this:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/unlimited_power_b.png"><br>
      <small><em>
        The stripes on the vertical surfaces here are isolines added by a
        shader to show changes in elevation.
      </em></small>
    </p>
    <p>
      This caused quite a stir for the game production she's part of, as they
      ended up completely throwing out the Godot terrain tool they were using
      in favor of switching to a new workflow built around the prototype I gave
      her.  I'm equal parts honored and deeply terrified by this development.
    </p>
    <p>
      Bitmap <strike>fucking <em>hates</em></strike> tends to bounce off of
      conventional digital sculpting tools like z-brush and Blender's sculpt
      mode.  Her artistic background is primarily as a 2D illustrator, and
      she's found that the way she reasons about form and space is generally
      incompatible with those kinds of tools.
    </p>
    <p>
      I'm very eager to see what things she will create now that she can simply
      <em>draw the terrain</em>.
    </p>
    <p>
      I asked Bitmap and The Director if there were any recent(ish) screenshots
      that would also be ok for me to share in this blog post, and they
      provided me with a treasure trove of gorgeous preproduction progress
      photographs which I've included all of below except for the one The Director
      asked me not to:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/bmp_a.png">
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/bmp_b.png">
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/bmp_c.png">
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/bmp_d.png">
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/bmp_e.png">
    </p>
    <p>
      You may be wondering where all of that nice multitexturing in these
      screenshots fits into this technique.  Bitmap provides a set of flat
      subdivided quads with UVs already prepared, and the tool I provided
      deforms them.  Weight painting is used to control how the textures are
      combined.
    </p>
    <h2 id="sculptor">Sculptor: Non-Destructive 3D Modeling in Godot</h2>
    <p>
      My colleague <a href="https://mastodon.gamedev.place/@dbat">Dbat</a> has
      been hard at working building a procedural modeling tool in Godot called
      <a href="https://codeberg.org/dbat/godot-sculptor">Sculptor</a>.
      Sculptor is a non-destructive 3D sculpting tool that works by deforming
      meshes that have been generated via
      <a href="https://en.wikipedia.org/wiki/Constructive_solid_geometry">CSG</a>.
    </p>
    <p>
      To do this, Dbat has developed an advanced version of the spline distance
      fields technique that enables you to create freeform meshes instead of
      height maps.  Their technique uses ray tracing to iteratively deform
      meshes towards the implicit surface described by the input curves.
      Sculptor exposes parameters that allow you to control the projected shape
      and influence of each curve on the mesh deformation process.  Way cool!
    </p>
    <p>
      Dbat's technique would pair very nicely with an adaptive tessellation
      system.
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/sculptor_a.png">
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/sculptor_b.png">
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/sculptor_c.png">
    </p>
    <h2 id="Inverse_distance_weighting">Inverse Distance Weighting Variant</h2>
    <p>
      Math wizard <a href="https://mathstodon.xyz/@Danpiker">Danpiker</a>
      <a href="https://mathstodon.xyz/@Danpiker/113191759673781705">wisely pointed out to me</a>
      that the spline distance fields technique is very compatible with
      <a href="https://en.wikipedia.org/wiki/Inverse_distance_weighting">Inverse Distance Weighting</a>.
      Shortly after, Danpiker put together
      <a href="https://mathstodon.xyz/@Danpiker/113192150280297469">this awesome animated demo</a>
      of exactly that.  Here's a still frame from the demo:
    </p>
    <p>
      <img src="https://zone.dog/braindump/spline_fields/danpiker_inverse_distance_weighting.png">
    </p>
    <p>
      Inverse Distance Weighting solves the liminality problem, and produces a
      <em>very</em> slick look.  You can very the degree of influence by
      adjusting the exponents in the equation.
    </p>
    <p>
      I've found inverse distance weighting to be a bit tricky to implement
      efficiently in geometry nodes, however the introduction of the
      <em>for-each</em> nodes in Blender 4.3 improves things a bit.
    </p>
    <p>
      Personally, I find the smoothing effect is maybe a bit too effective at
      smoothing things out, as it tends to erase the earthy look I'm going for.
      However, I suspect this is easily overcome with a good displacement map.
    </p>
    <h2 id="closing_thoughts">Closing Thoughts</h2>
    <p>
      I like splines!
    </p>
    <h2 id="future_work">Future Work</h2>
    <p>
      I do not know what the future holds.  Let us brave it together.
    </p>
    </div>]]></description>
        </item>
        <item>
            <title><![CDATA[Stimulation Clicker (2148 pts)]]></title>
            <link>https://neal.fun/stimulation-clicker/</link>
            <guid>42611536</guid>
            <pubDate>Mon, 06 Jan 2025 15:48:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://neal.fun/stimulation-clicker/">https://neal.fun/stimulation-clicker/</a>, See on <a href="https://news.ycombinator.com/item?id=42611536">Hacker News</a></p>
Couldn't get https://neal.fun/stimulation-clicker/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Mashups – Resurrecting Yahoo Pipes, my side project (139 pts)]]></title>
            <link>https://www.mashups.io</link>
            <guid>42609819</guid>
            <pubDate>Mon, 06 Jan 2025 11:54:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.mashups.io">https://www.mashups.io</a>, See on <a href="https://news.ycombinator.com/item?id=42609819">Hacker News</a></p>
Couldn't get https://www.mashups.io: Error: timeout of 10000ms exceeded]]></description>
        </item>
        <item>
            <title><![CDATA[Dive into Time-Series Anomaly Detection: A Decade Review (358 pts)]]></title>
            <link>https://arxiv.org/abs/2412.20512</link>
            <guid>42609595</guid>
            <pubDate>Mon, 06 Jan 2025 11:10:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://arxiv.org/abs/2412.20512">https://arxiv.org/abs/2412.20512</a>, See on <a href="https://news.ycombinator.com/item?id=42609595">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content-inner">
    
    
                
    <p><a href="https://arxiv.org/pdf/2412.20512">View PDF</a>
    <a href="https://arxiv.org/html/2412.20512v1">HTML (experimental)</a></p><blockquote>
            <span>Abstract:</span>Recent advances in data collection technology, accompanied by the ever-rising volume and velocity of streaming data, underscore the vital need for time series analytics. In this regard, time-series anomaly detection has been an important activity, entailing various applications in fields such as cyber security, financial markets, law enforcement, and health care. While traditional literature on anomaly detection is centered on statistical measures, the increasing number of machine learning algorithms in recent years call for a structured, general characterization of the research methods for time-series anomaly detection. This survey groups and summarizes anomaly detection existing solutions under a process-centric taxonomy in the time series context. In addition to giving an original categorization of anomaly detection methods, we also perform a meta-analysis of the literature and outline general trends in time-series anomaly detection research.
    </blockquote>

    <!--CONTEXT-->
    
  </div><div>
      <h2>Submission history</h2><p> From: John Paparrizos [<a href="https://arxiv.org/show-email/6830b0c2/2412.20512" rel="nofollow">view email</a>]      <br>    <strong>[v1]</strong>
        Sun, 29 Dec 2024 16:11:46 UTC (10,831 KB)<br>
</p></div></div>]]></description>
        </item>
    </channel>
</rss>