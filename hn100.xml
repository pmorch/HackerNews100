<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Mon, 21 Apr 2025 16:30:02 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Pipelining might be my favorite programming language feature (136 pts)]]></title>
            <link>https://herecomesthemoon.net/2025/04/pipelining/</link>
            <guid>43751076</guid>
            <pubDate>Mon, 21 Apr 2025 12:16:16 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://herecomesthemoon.net/2025/04/pipelining/">https://herecomesthemoon.net/2025/04/pipelining/</a>, See on <a href="https://news.ycombinator.com/item?id=43751076">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content">
            <p>
              <em><strong>Epistemic status:</strong> Don’t take it too seriously. Or do. idk, I can’t stop you.</em>
            </p>
            <div>
              <figure data-imgstate="dither">
                <img alt="Pop culture reference." data-dither="/2025/04/pipelining/images/dithers/neat2_dithered.png" data-original="https://herecomesthemoon.net/2025/04/pipelining/images/neat2_hu11050317627517953672.webp" loading="lazy" src="https://herecomesthemoon.net/2025/04/pipelining/images/dithers/neat2_dithered.png">
                <div>
                  <figcaption>
                    <span> Pop culture reference. </span>
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                      <rect height="24.28" width="24.28" x="13.51" y="13.58"></rect>
                      <rect height="24.28" width="24.28" x="37.93" y="37.86"></rect>
                      <rect height="24.28" width="24.28" x="62.21" y="13.58"></rect>
                      <rect height="24.28" width="24.28" x="13.51" y="62.14"></rect>
                      <rect height="24.28" width="24.28" x="62.21" y="62.14"></rect>
                    </svg>
                    <p><span> Toggle original/dithered image </span>
                    </p>
                  </figcaption>
                </div>
              </figure>
            </div>
            <p>Pipelining might be my favorite programming language feature.</p>
            <p>
              What is pipelining? Pipelining is the feature that allows you to omit a single argument from your
              parameter list, by instead passing the previous value.
            </p>
            <p>When I say pipelining, I’m talking about the ability to write code like this:</p>
            <div>
              <pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>get_ids</span>(data: <span>Vec</span><span>&lt;</span>Widget<span>&gt;</span>)<span> </span>-&gt; <span>Vec</span><span>&lt;</span>Id<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>data.iter()<span>              </span><span>// get iterator over elements of the list
</span></span></span><span><span><span></span><span>        </span>.filter(<span>|</span>w<span>|</span><span> </span>w.alive)<span> </span><span>// use lambda to ignore tombstoned widgets
</span></span></span><span><span><span></span><span>        </span>.map(<span>|</span>w<span>|</span><span> </span>w.id)<span>       </span><span>// extract ids from widgets
</span></span></span><span><span><span></span><span>        </span>.collect()<span>           </span><span>// assemble iterator into data structure (Vec)
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre>
            </div>
            <p>
              As opposed to code like this. (This is not real Rust code. Quick challenge for the curious Rustacean, can
              you explain why we cannot rewrite the above code like this, even if we import all of the symbols?)
            </p>
            <div>
              <pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>get_ids</span>(data: <span>Vec</span><span>&lt;</span>Widget<span>&gt;</span>)<span> </span>-&gt; <span>Vec</span><span>&lt;</span>Id<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>collect(map(filter(iter(data),<span> </span><span>|</span>w<span>|</span><span> </span>w.alive),<span> </span><span>|</span>w<span>|</span><span> </span>w.id))<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre>
            </div>
            <p>
              I honestly feel like this should be so obvious that it shouldn’t even be up for debate. The first code
              example—with its nice ‘pipelining’ or ‘method chaining’ or whatever you want to call it—it
              <em>just works</em>. It can be read line-by-line. It’s easy to annotate it with comments. It doesn’t
              require introduction of new variables to become more readable since it’s already readable as is.
            </p>
            <p>
              As opposed to, y’know,
              <em>the first word in the line describing the final action our function performs</em>.
            </p>
            <p>
              Let me make it very clear: This is an <del>article</del> <em>hot take</em> about syntax. In practice,
              <em>semantics beat syntax every day of the week</em>. In other words, don’t take it too seriously.
            </p>
            <p>
              Second, this is not about imperative vs. functional programming. This article takes for granted that
              you’re already on board with concepts such as ‘map’ and ‘filter’. It’s possible to overuse that style, but
              I won’t talk about it here.
            </p>
            <ul>
              <li><a href="#you-already-agree-with-me">You already agree with me</a></li>
              <li><a href="#code-discovery">Code Discovery</a></li>
              <li><a href="#editing-benefits">Editing Benefits</a></li>
              <li><a href="#sql">SQL</a></li>
              <li><a href="#the-builder-pattern">The Builder Pattern</a></li>
              <li><a href="#rusts-pipelining-is-pretty-neat">Rust’s pipelining is pretty neat</a></li>
              <li><a href="#conclusion">Conclusion</a></li>
            </ul>
            <h2 id="you-already-agree-with-me">You already agree with me</h2>
            <p>
              Here is a feature that’s so bog-standard in modern programming languages that it barely feels like a
              feature at all. Member access for structs or classes with our beloved friend the <code>.</code>-operator.
            </p>
            <p>
              This is a form of pipelining. It puts the data first, the operator in the middle, and concludes with the
              action (restricting to a member field). That’s an instance of what I call pipelining.
            </p>
            <div>
              <pre tabindex="0"><code data-lang="go"><span><span><span>type</span> Bar <span>struct</span> {
</span></span><span><span>	field <span>int</span>
</span></span><span><span>}
</span></span><span><span>
</span></span><span><span><span>func</span> <span>get_field</span>(bar Bar) <span>int</span> {
</span></span><span><span>	<span>return</span> bar.field
</span></span><span><span>}
</span></span><span><span><span>// vs. syntax like that of Python's `getattr` function
</span></span></span><span><span><span></span><span>func</span> <span>get_field</span>(bar Bar) <span>int</span> {
</span></span><span><span>	<span>return</span> <span>getattr</span>(bar, <span>"field"</span>)
</span></span><span><span>}
</span></span></code></pre>
            </div>
            <p>
              You see what I am getting at, right? It’s the same principle. One of the reasons why
              <code>x.y</code>-style member access syntax (and <code>x.y()</code>-style method call syntax!) is popular
              is since it’s easy to read and chains easily.
            </p>
            <p>
              Let’s make the comparison slightly more fair, and pretend that we have to write <code>x.get(y)</code>.
              Compare:
            </p>
            <div>
              <pre tabindex="0"><code data-lang="go"><span><span>fizz.<span>get</span>(bar).<span>get</span>(buzz).<span>get</span>(foo)
</span></span><span><span><span>// vs.
</span></span></span><span><span><span></span><span>get</span>(<span>get</span>(<span>get</span>(fizz, bar), buzz), foo)
</span></span></code></pre>
            </div>
            <p>
              Which one of these is easier to read? The pipelined syntax, obviously. This example is easy to parse
              either way, but imagine you’d like to blend out some information and purely focus on the final operation.
            </p>
            <div>
              <pre tabindex="0"><code data-lang="go"><span><span>&lt;previous stuff&gt;.<span>get</span>(foo)
</span></span><span><span><span>// vs.
</span></span></span><span><span><span></span><span>get</span>(&lt;previous stuff&gt;, foo)
</span></span></code></pre>
            </div>
            <p>
              You see the problem, right? In the first example, we have ‘all of the previous stuff’ and then
              <em>apply another operation</em> to it. In the second example, the operation which we want to perform
              (<code>get</code>) and the new operand (<code>foo</code>) are spread out with ‘all of the previous stuff’
              sitting between them.
            </p>
            <p>Looking back at our original example, the problem should be obvious:</p>
            <div>
              <pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>get_ids</span>(data: <span>Vec</span><span>&lt;</span>Widget<span>&gt;</span>)<span> </span>-&gt; <span>Vec</span><span>&lt;</span>Id<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>collect(map(filter(iter(data),<span> </span><span>|</span>w<span>|</span><span> </span>w.alive),<span> </span><span>|</span>w<span>|</span><span> </span>w.id))<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span><span><span><span></span><span>-----------------------------</span><span>1</span><span> </span><span>// it's fun to parse the whole line to find the start
</span></span></span><span><span><span></span><span>------------------------</span><span>2</span><span>
</span></span></span><span><span><span></span><span>-----------------</span><span>3</span><span>
</span></span></span><span><span><span></span><span>---------------------------------------</span><span>4</span><span> </span><span>// all the way back to find the second arg
</span></span></span><span><span><span></span><span>-------------</span><span>5</span><span>
</span></span></span><span><span><span></span><span>------------------------------------------------------</span><span>6</span><span> </span><span>// and all the way back again
</span></span></span><span><span><span></span><span>-----</span><span>7</span><span> </span><span>// okay the final step is the first word in the line that makes sense
</span></span></span></code></pre>
            </div>
            <p>
              I cannot deny the allegations: I just don’t think it makes sense to write code like that as long as a
              clearly better option exists.
            </p>
            <p>
              Why would I have to parse the whole line just to figure out where my input comes in, and why is the data
              flow ‘from the inside to the outside’? It’s kind of silly, if you ask me.
            </p>
            <h2 id="editing-benefits">Editing Benefits</h2>
            <div>
              <figure data-imgstate="dither">
                <img alt="The experience of trying to use pipelining syntax in Python." data-dither="/2025/04/pipelining/images/dithers/pipe-rock_dithered.png" data-original="https://herecomesthemoon.net/2025/04/pipelining/images/pipe-rock_hu14726779274674611026.webp" loading="lazy" src="https://herecomesthemoon.net/2025/04/pipelining/images/dithers/pipe-rock_dithered.png">
                <div>
                  <figcaption>
                    <span> The experience of trying to use pipelining syntax in Python. </span>
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                      <rect height="24.28" width="24.28" x="13.51" y="13.58"></rect>
                      <rect height="24.28" width="24.28" x="37.93" y="37.86"></rect>
                      <rect height="24.28" width="24.28" x="62.21" y="13.58"></rect>
                      <rect height="24.28" width="24.28" x="13.51" y="62.14"></rect>
                      <rect height="24.28" width="24.28" x="62.21" y="62.14"></rect>
                    </svg>
                    <p><span> Toggle original/dithered image </span>
                    </p>
                  </figcaption>
                </div>
              </figure>
            </div>
            <p>
              Readability is nice, and I could add add a whole section complaining about the mess that’s Python’s
              ‘functional’ features.
            </p>
            <p>
              However, let’s take a step back and talk about ease of editing. Going back to the example above, imagine
              you’d like to add another <code>map</code> (or any other function call) in the middle there. How easy is
              this?
            </p>
            <div>
              <pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>get_ids</span>(data: <span>Vec</span><span>&lt;</span>Widget<span>&gt;</span>)<span> </span>-&gt; <span>Vec</span><span>&lt;</span>Id<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>collect(map(filter(map(iter(data),<span> </span><span>|</span>w<span>|</span><span> </span>w.toWingding()),<span> </span><span>|</span>w<span>|</span><span> </span>w.alive),<span> </span><span>|</span>w<span>|</span><span> </span>w.id))<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre>
            </div>
            <p>Consider:</p>
            <ol>
              <li>
                You’ll have to parse through the line, counting commas and parentheses to find the exact place to add
                the closing parenthesis.
              </li>
              <li>
                The <code>git diff</code> of this is going to be basically unreadable, everything is crammed onto one
                line.
              </li>
              <li>This line is getting long and unreadable, and at that point you’ll want to refactor it anyway!</li>
            </ol>
            <div>
              <pre tabindex="0"><code data-lang="rust"><span><span><span>fn</span> <span>get_ids</span>(data: <span>Vec</span><span>&lt;</span>Widget<span>&gt;</span>)<span> </span>-&gt; <span>Vec</span><span>&lt;</span>Id<span>&gt;</span><span> </span>{<span>
</span></span></span><span><span><span>    </span>data.iter()<span>
</span></span></span><span><span><span>        </span>.map(<span>|</span>w<span>|</span><span> </span>w.toWingding())<span>
</span></span></span><span><span><span>        </span>.filter(<span>|</span>w<span>|</span><span> </span>w.alive)<span>
</span></span></span><span><span><span>        </span>.map(<span>|</span>w<span>|</span><span> </span>w.id)<span>
</span></span></span><span><span><span>        </span>.collect()<span>
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre>
            </div>
            <p>
              This is adding a single line of code. No parentheses counting. It’s easy and obvious. It’s easy to write
              and easy to review. Perhaps most importantly, it shows up <em>incredibly nicely</em> in the
              <code>blame</code> layer of whatever editor or code exploration tool you’re using.
            </p>
            <p>
              You might think that this issue is <em>just</em> about trying to cram everything onto a single line, but
              frankly, trying to move away from that doesn’t help much. It will still mess up your git diffs and the
              blame layer.
            </p>
            <p>
              You can, of course, just assign the result of every <code>filter</code> and <code>map</code> call to a
              helper variable, and I will (begrudgingly) acknowledge that that works, and is
              <em>significantly</em> better than trying to do absurd levels of nesting.
            </p>
            <h2 id="code-discovery">Code Discovery</h2>
            <p>
              When you press <code>.</code> in your IDE, it will show a neat little pop-up that tells you which methods
              you can call or which fields you can access.
            </p>
            <p>
              This is probably the single IDE feature with the biggest value add, and if not that, then at least the
              single most frequently used one. Some people will tell you that static analysis for namespace or
              module-level code discovery is useless in the age of AI autocompletion and vibe coding, but I very much
              disagree.<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>
            </p>
            <p>A <a href="https://grugbrain.dev/" target="_blank">wise shaman once said</a>:</p>
            <blockquote>
              <p>
                “grug very like type systems make programming easier. for grug, type systems most value when grug hit
                dot on keyboard and list of things grug can do pop up magic. this 90% of value of type system or more to
                grug” — grug
              </p>
            </blockquote>
            <p>
              Words to live by. What he’s describing here is something that essentially <em>requires</em> pipelining to
              work at all. (And types or type annotation, but having those is the direction the industry is moving in
              anyway.)
            </p>
            <p>
              It doesn’t matter if it’s the trusty <code>.</code> operator, C++’s <code>-&gt;</code>, or if it’s
              something more bespoke such as Elm’s or Gleam’s <code>|&gt;</code> or Haskell’s <code>&amp;</code>. In the
              end, it’s a pipeline operator—the same principle applies. If your
              <a href="https://en.wikipedia.org/wiki/Language_Server_Protocol" target="_blank">LSP</a> knows the type of
              what’s on the left, it <em>should</em> in principle be able to offer suggestions for what to do next.
            </p>
            <p>
              If your favorite language’s LSP/IDE does a poor job at offering suggestions during pipelining, then it’s
              probably one of the following reasons:
            </p>
            <ol>
              <li>
                You don’t know which type you’re even holding. This happens most often when the language is dynamically
                typed, ’types’ are hard to deduce with static analysis, and you’re touching/writing code without type
                annotations. (e.g. Python)
              </li>
              <li>
                The ecosystem and LSP just didn’t have enough time put into them, or most active users don’t care
                enough. (e.g. any sufficiently obscure language)
              </li>
              <li>
                You are in a situation in which even looking up which methods are available is hard, often due to a
                bespoke build process that confuses the editor. (e.g. basically any build or runtime generation of code,
                or bespoke loading/selection of libraries).
              </li>
            </ol>
            <p>
              In either case, great editor/LSP support is more or less considered mandatory for modern programming
              languages. And of course, this is where pipelining shines.
            </p>
            <p>
              Ask any IDE, autocompleting <code>fizz.bu... -&gt; fizz.buzz()</code> is <em>much easier</em> than
              autocompleting <code>bu... -&gt; buzz(...)</code>, for the obvious reason that you
              <em>didn’t even write <code>fizz</code> in the second example yet</em>, so your editor has less
              information to work with.
            </p>
            <h2 id="sql">SQL</h2>
            <p>
              Pipelining is <em>amazing</em> at data processing, and allows you to transform code that’s commonly
              written with ‘inside-out’ control flow into ’line-by-line’ transformations.
            </p>
            <p>
              Where could this possibly be more clear than in SQL, the presumably single most significant language for
              querying and aggregating complex large-scale datasets?
            </p>
            <p>
              You’ll be pleased to hear that, yes, people are in fact working on bringing pipelining to SQL. (Whether
              it’s actually going to happen in this specific form
              <a href="https://sqlite.org/forum/forumpost/2d2720461b82f2fd" target="_blank">is a different question</a>,
              let’s not get too carried away here.)
            </p>
            <p>
              Unless you’re one of those people who spends so much time dealing with SQL that it’s become second nature,
              and the thought that the control flow of nested queries is hard to follow for the average non-database
              engineer is incomprehensible to you, I guess.
            </p>
            <p>Personally, I’m a fan.</p>
            <p>
              Anyway, if you’re interested, listen to this
              <a href="https://www.hytradboi.com/2025/f8582cd3-1e39-43a8-8749-46817b2910cf-pipe-syntax-in-sql-its-time" target="_blank">ten minute talk presented at HYTRADBOI 2025</a>.
            </p>
            <p>I’ll put their example of how a standard nested query can be simplified here, for convenience:</p>
            <div>
              <pre tabindex="0"><code data-lang="sql"><span><span><span>SELECT</span><span> </span>c_count,<span> </span><span>COUNT</span>(<span>*</span>)<span> </span><span>AS</span><span> </span>custdist<span>
</span></span></span><span><span><span>  </span><span>FROM</span><span>
</span></span></span><span><span><span>  </span>(<span>
</span></span></span><span><span><span>    </span><span>SELECT</span><span> </span>c_custkey,<span> </span><span>COUNT</span>(o_orderkey)<span> </span>c_count<span>
</span></span></span><span><span><span>    </span><span>FROM</span><span> </span>customer<span>
</span></span></span><span><span><span>    </span><span>LEFT</span><span> </span><span>OUTER</span><span> </span><span>JOIN</span><span> </span>orders<span>
</span></span></span><span><span><span>      </span><span>ON</span><span> </span>c_custkey<span> </span><span>=</span><span> </span>o_custkey<span>
</span></span></span><span><span><span>      </span><span>AND</span><span> </span>o_comment<span> </span><span>NOT</span><span> </span><span>LIKE</span><span> </span><span>'%unusual%'</span><span>
</span></span></span><span><span><span>    </span><span>GROUP</span><span> </span><span>BY</span><span> </span>c_custkey<span>
</span></span></span><span><span><span>  </span>)<span> </span><span>AS</span><span> </span>c_orders<span>
</span></span></span><span><span><span></span><span>GROUP</span><span> </span><span>BY</span><span> </span>c_count<span>
</span></span></span><span><span><span></span><span>ORDER</span><span> </span><span>BY</span><span> </span>custdist<span> </span><span>DESC</span>;<span>
</span></span></span></code></pre>
            </div>
            <p>Versus the SQL Syntax she told you not to worry about:</p>
            <div>
              <pre tabindex="0"><code data-lang="sql"><span><span><span>FROM</span><span> </span>customer<span>
</span></span></span><span><span><span></span><span>|&gt;</span><span> </span><span>LEFT</span><span> </span><span>OUTER</span><span> </span><span>JOIN</span><span> </span>orders<span>
</span></span></span><span><span><span>    </span><span>ON</span><span> </span>c_custkey<span> </span><span>=</span><span> </span>o_custkey<span>
</span></span></span><span><span><span>    </span><span>AND</span><span> </span>o_comment<span> </span><span>NOT</span><span> </span><span>LIKE</span><span> </span><span>'%unusual%'</span><span>
</span></span></span><span><span><span></span><span>|&gt;</span><span> </span><span>AGGREGATE</span><span> </span><span>COUNT</span>(o_orderkey)<span> </span><span>AS</span><span> </span>c_count<span>
</span></span></span><span><span><span>  </span><span>GROUP</span><span> </span><span>BY</span><span> </span>c_custkey<span>
</span></span></span><span><span><span></span><span>|&gt;</span><span> </span><span>AGGREGATE</span><span> </span><span>COUNT</span>(<span>*</span>)<span> </span><span>AS</span><span> </span>custdist<span>
</span></span></span><span><span><span>  </span><span>GROUP</span><span> </span><span>BY</span><span> </span>c_count<span>
</span></span></span><span><span><span></span><span>|&gt;</span><span> </span><span>ORDER</span><span> </span><span>BY</span><span> </span>custdist<span> </span><span>DESC</span>;<span>
</span></span></span></code></pre>
            </div>
            <p>
              Less nesting. More aligned with other languages and
              <a href="https://learn.microsoft.com/en-us/dotnet/csharp/linq/" target="_blank">LINQ</a>. Can easily be
              read line-by-line.
            </p>
            <p>
              Here’s a more
              <a href="https://www.linkedin.com/pulse/not-so-good-idea-pipe-syntax-sql-franck-pachot-dx6he" target="_blank">skeptical voice (warning, LinkedIn!)</a>. Franck Pachot raises the great point that the <code>SELECT</code> statement at the top of a query is
              (essentially) its function signature and specifies the return type. With pipe syntax, you lose some of
              this readability.
            </p>
            <p>I agree, but that seems like a solvable problem to me.</p>
            <h2 id="the-builder-pattern">The Builder pattern</h2>
            <div>
              <figure data-imgstate="dither">
                <img alt="A picture of some pipes half-way through to break up the text and make the article less monotonous." data-dither="/2025/04/pipelining/images/dithers/pipes_dithered.png" data-original="https://herecomesthemoon.net/2025/04/pipelining/images/pipes_hu12084032218752212129.webp" loading="lazy" src="https://herecomesthemoon.net/2025/04/pipelining/images/dithers/pipes_dithered.png">
                <div>
                  <figcaption>
                    <span>
                      A picture of some pipes half-way through to break up the text and make the article less
                      monotonous.
                    </span>
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                      <rect height="24.28" width="24.28" x="13.51" y="13.58"></rect>
                      <rect height="24.28" width="24.28" x="37.93" y="37.86"></rect>
                      <rect height="24.28" width="24.28" x="62.21" y="13.58"></rect>
                      <rect height="24.28" width="24.28" x="13.51" y="62.14"></rect>
                      <rect height="24.28" width="24.28" x="62.21" y="62.14"></rect>
                    </svg>
                    <p><span> Toggle original/dithered image </span>
                    </p>
                  </figcaption>
                </div>
              </figure>
            </div>
            <p>
              Out of the Gang of Four
              <a href="https://en.wikipedia.org/wiki/Design_Patterns" target="_blank">Design Patterns</a>, the
              <a href="https://en.wikipedia.org/wiki/Builder_pattern" target="_blank">builder pattern</a> is one that
              isn’t completely irredeemable.
            </p>
            <p>
              And—surprise, surprise—it fits pretty well into pipelining. Any situation where you need to construct a
              complex, stateful object (e.g. a client or runtime), it’s a great way to feed complex, optional arguments
              into an object.
            </p>
            <p>
              Some people say they prefer optional/named arguments, but honestly, I don’t understand why: An optional
              named <code>foo</code> parameter is harder to track down in code (and harder to mark as deprecated!) than
              all instances of a <code>.setFoo()</code> builder function.
            </p>
            <p>
              If you have no clue what I’m talking about, this here is the type of pattern I’m talking about. You have a
              ‘builder’ object, call some methods on it to configure it, and finally <code>build()</code> the object
              you’re actually interested in.
            </p>
            <div>
              <pre tabindex="0"><code data-lang="rs"><span><span><span>use</span><span> </span>tokio::runtime::Builder;<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>fn</span> <span>main</span>()<span> </span>{<span>
</span></span></span><span><span><span>    </span><span>// build runtime
</span></span></span><span><span><span></span><span>    </span><span>let</span><span> </span>runtime<span> </span><span>=</span><span> </span>Builder::new_multi_thread()<span>
</span></span></span><span><span><span>        </span>.worker_threads(<span>4</span>)<span>
</span></span></span><span><span><span>        </span>.thread_name(<span>"my-custom-name"</span>)<span>
</span></span></span><span><span><span>        </span>.thread_stack_size(<span>3</span><span> </span><span>*</span><span> </span><span>1024</span><span> </span><span>*</span><span> </span><span>1024</span>)<span>
</span></span></span><span><span><span>        </span>.build()<span>
</span></span></span><span><span><span>        </span>.unwrap();<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>    </span><span>// use runtime ...
</span></span></span><span><span><span></span>}<span>
</span></span></span></code></pre>
            </div>
            <p>This too, is pipelining.</p>
            <h2 id="making-haskell-slightly-more-readable">Making Haskell (slightly more) readable</h2>
            <p>Haskell is hard to read.</p>
            <p>
              It has these weird operators like <code>&lt;$&gt;</code>, <code>&lt;*&gt;</code>, <code>$</code>, or
              <code>&gt;&gt;=</code> and when you ask Haskell programmers about what they mean, they say something like
              “Oh, this is just a special case of the generalized
              <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#v:-62--61--62-" target="_blank">Kleisli Monad Operator</a>
              <code>&gt;=&gt;</code> in the category of endo-pro-applicatives over a locally small poset.” and your eyes
              have glazed over before they’ve even finished the sentence.
            </p>
            <p>(It also doesn’t help that Haskell allows you to define custom operators however you please, yes.)</p>
            <p>
              If you’re wondering “How could a language have so many bespoke operators?”, my understanding is that most
              of them are just fancy ways of telling Haskell to compose some functions in a highly advanced way. Here’s
              the second-most basic<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>
              example, the <code>$</code> operator.
            </p>
            <p>
              Imagine you have functions <code>foo</code>, <code>bar</code>, and some value <code>data</code>. In a
              “““normal””” language you might write <code>foo(data)</code>. In Haskell, this is written as
              <code>foo data</code>. This is since <code>foo</code> will automatically ‘grab’ values to the right as its
              arguments, so you don’t need the parentheses.
            </p>
            <p>
              A consequence of this is that <code>bar(foo(data))</code> is written as <code>bar (foo data)</code> in
              Haskell. If you wrote <code>bar foo data</code>, the compiler will interpret it as
              <code>bar(foo)(data)</code>, which would be wrong. This is what people mean when they say that Haskell’s
              function call syntax is
              <a href="https://en.wikipedia.org/wiki/Associative_property" target="_blank">left-associative</a>.
            </p>
            <p>
              The <code>$</code> operator is <em>nothing but syntactic sugar</em> that allows you to write
              <code>bar $ foo data</code> instead of having to write <code>bar (foo data)</code>. That’s it. People were
              fed-up with having to put parens everywhere, I guess.
            </p>
            <p>If your eyes glazed over at this point, I can’t blame you.</p>
            <p>Let’s get back on track.</p>
            <p>
              Talking about any of the fancier operators would be punching well above my weight-class, so I’ll just
              stick to what I’ve been saying throughout this entire post already. Here’s a stilted Haskell toy example,
              intentionally not written in
              <a href="https://wiki.haskell.org/Pointfree" target="_blank">pointfree</a> style.
            </p>
            <div>
              <pre tabindex="0"><code data-lang="haskell"><span><span><span>-- Take an input string `content`</span>
</span></span><span><span><span>-- Split into lines, check whether each line is a palindrome and stringify</span>
</span></span><span><span><span>-- Ex. "foo\nradar" -&gt; "False\nTrue"</span>
</span></span><span><span><span>checkPalindromes</span> <span>::</span> <span>String</span> <span>-&gt;</span> <span>String</span>
</span></span><span><span><span>checkPalindromes</span> content <span>=</span> unlines <span>$</span> map (show <span>.</span> isPalindrome) <span>$</span> lines <span>$</span> map toLower content
</span></span><span><span>  <span>where</span>
</span></span><span><span>    isPalindrome xs <span>=</span> xs <span>==</span> reverse xs
</span></span></code></pre>
            </div>
            <p>
              If you want to figure out the flow of data, this whole function body has to be read
              <em>right-to-left</em>.
            </p>
            <p>
              To make things even funnier, you need to start with the <code>where</code> clause to figure out which
              local “variables” are being defined. This happens (for whatever reason) at the end of the function instead
              of at the start. (Calling <code>isPalindrome</code> a variable is misleading, but that’s besides the
              point.)
            </p>
            <p>
              At this point you might wonder if Haskell has some sort of pipelining operator, and yes, it turns out that
              one was
              <a href="https://github.com/haskell/core-libraries-committee/issues/78#issuecomment-1183568372" target="_blank">added in 2014</a>! That’s pretty late considering that Haskell exists since 1990. This allows us to refactor the above
              code as follows:
            </p>
            <div>
              <pre tabindex="0"><code data-lang="haskell"><span><span><span>checkPalindromes</span> <span>::</span> <span>String</span> <span>-&gt;</span> <span>String</span>
</span></span><span><span><span>checkPalindromes</span> content <span>=</span>
</span></span><span><span>  content
</span></span><span><span>    <span>&amp;</span> map toLower
</span></span><span><span>    <span>&amp;</span> lines
</span></span><span><span>    <span>&amp;</span> map (show <span>.</span> isPalindrome)
</span></span><span><span>    <span>&amp;</span> unlines
</span></span><span><span>  <span>where</span>
</span></span><span><span>    isPalindrome xs <span>=</span> xs <span>==</span> reverse xs
</span></span></code></pre>
            </div>
            <p>Isn’t that way easier to read?</p>
            <p>
              <em>This</em> is code which you can show to an enterprise Java programmer, tell them that they’re looking
              at
              <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html" target="_blank">Java Streams</a>
              with slightly weird syntax, and they’ll get the idea.
            </p>
            <p>
              Of course, in reality nothing is as simple. The Haskell ecosystem seems to be split between users of
              <code>$</code>, users of <code>&amp;</code>, and users of the
              <a href="https://hackage.haskell.org/package/flow-2.0.0.0/docs/Flow.html#g:1" target="_blank">Flow</a>-provided operators, which allow the same functionality, but allow you to write
              <code>|&gt;</code> instead of <code>&amp;</code>.<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>
            </p>
            <p>
              I don’t know what to say about that, other than that—not entirely unlike C++—Haskell has its own share of
              operator-related and cultural historical baggage, and a split ecosystem, and this makes the language
              significantly less approachable than it has to be.
            </p>
            <h2 id="rusts-pipelining-is-pretty-neat">Rust’s pipelining is pretty neat</h2>
            <div>
              <figure data-imgstate="dither">
                <img alt="Pop(?) culture reference." data-dither="/2025/04/pipelining/images/dithers/magrittepipe_dithered.png" data-original="https://herecomesthemoon.net/2025/04/pipelining/images/magrittepipe_hu2509665480992580595.webp" loading="lazy" src="https://herecomesthemoon.net/2025/04/pipelining/images/dithers/magrittepipe_dithered.png">
                <div>
                  <figcaption>
                    <span> Pop(?) culture reference. </span>
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                      <rect height="24.28" width="24.28" x="13.51" y="13.58"></rect>
                      <rect height="24.28" width="24.28" x="37.93" y="37.86"></rect>
                      <rect height="24.28" width="24.28" x="62.21" y="13.58"></rect>
                      <rect height="24.28" width="24.28" x="13.51" y="62.14"></rect>
                      <rect height="24.28" width="24.28" x="62.21" y="62.14"></rect>
                    </svg>
                    <p><span> Toggle original/dithered image </span>
                    </p>
                  </figcaption>
                </div>
              </figure>
            </div>
            <p>
              In the beginning I said that ‘Pipelining is the feature that allows you to omit a single argument from
              your parameter list, by instead passing the previous value.’
            </p>
            <p>
              I still think that this is true, but it doesn’t get across the whole picture. If you’ve paid attention in
              the previous sections, you’ll have noticed that <code>object.member</code> and
              <code>iterator &amp; map</code> share basically <em>nothing</em> in common outside of the order of
              operations.
            </p>
            <p>
              In the first case, we’re accessing a value that’s <em>scoped</em> to the object. In the second, we’re
              ‘just’ passing an expression to a free-standing function.
            </p>
            <p>
              Or in other words, pipelining is not the same as pipelining. Even from an IDE-perspective, they’re
              different. In Java, your editor will look for methods associated with an object and walk up the
              inheritance chain. In Haskell, your editor will put a so-called
              <a href="https://downloads.haskell.org/~ghc/7.10.3-rc1/users_guide/typed-holes.html" target="_blank">’typed hole’</a>, and try to deduce which functions have a type that ‘fits’ into the hole using
              <a href="https://herecomesthemoon.net/2025/01/type-inference-in-rust-and-cpp/" target="_blank">Hindley-Milner Type Inference</a>.
            </p>
            <p>
              Personally, I like type inference (and
              <a href="https://en.wikipedia.org/wiki/Type_class" target="_blank">type classes</a>), but I also like if
              types have a namespace attached to them, with methods and associated functions. I am pragmatic like that.
            </p>
            <p>
              What I like about Rust is that it gives me the best out of both worlds here: You get traits and type
              inference without needing to wrap your head around a fully functional, immutable, lazy, monad-driven
              programming paradigm, and you get methods and associated values without the absolute dumpster fire of
              complex inheritance chains or AbstractBeanFactoryConstructors.
            </p>
            <p>
              I’ve not seen any other language that even comes close to the convenience of Rust’s pipelines, and its
              lack of higher-kinded types or inheritance did not stop it. Quite the opposite, if anything.
            </p>
            <h2 id="conclusion">Conclusion</h2>
            <p>
              I like pipelining. That’s the one thing that definitely should be obvious if you’ve read all the way
              through this article.
            </p>
            <p>I just think they’re neat, y’know?</p>
            <p>I like reading my code top-to-bottom, left-to-right instead of from-the-inside-to-the-outside.</p>
            <p>
              I like when I don’t need to count arguments and parentheses to figure out which value is the first
              argument of the second function, and which is the second argument of the first function.
            </p>
            <p>
              I like when my editor can show me all fields of a struct, and all methods or functions associated with a
              value, just when I press <code>.</code> on my keyboard. It’s great.
            </p>
            <p>
              I like when <code>git diff</code> and the <code>blame</code> layer of the code repository don’t look like
              complete ass.
            </p>
            <p>
              I like when adding a function call in the middle of a process doesn’t require me to parse the whole line
              to add the closing parenthesis, and doesn’t require me to adjust the nesting of the whole block.
            </p>
            <p>
              I like when my functions distinguish between ‘a main value which we are acting upon’ and ‘secondary
              arguments’, as opposed to treating them all as the same.
            </p>
            <p>
              I like when I don’t have to pollute my namespaces with a ton of helper variables or free-standing
              functions that I had to pull in from somewhere.
            </p>
            <p>
              If you’re writing pipelined code—and not trying overly hard to fit everything into a single, convoluted,
              nested pipeline—then your functions will naturally split up into a few pipeline chunks.
            </p>
            <p>
              Each chunk starts with a piece of ‘main data’ that travels on a conveyer belt, where every line performs
              exactly one action to transform it. Finally, a single value comes out at the end and gets its own name, so
              that it may be used later.
            </p>
            <p>
              And that is—in my humble opinion—exactly how it should be. Neat, convenient, separated ‘chunks’, each of
              which can easily be understood in its own right.
            </p>
            <p>
              Idk, subscribe to my <a href="https://buttondown.com/mond" target="_blank">newsletter</a> or something.
            </p>
            <p><em>Thanks to kreest for proofreading this article.</em></p>
          </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Fossil fuels fall below 50% of US electricity for the first month on record (112 pts)]]></title>
            <link>https://ember-energy.org/latest-updates/fossil-fuels-fall-below-50-of-us-electricity-for-the-first-month-on-record/</link>
            <guid>43750617</guid>
            <pubDate>Mon, 21 Apr 2025 11:17:06 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ember-energy.org/latest-updates/fossil-fuels-fall-below-50-of-us-electricity-for-the-first-month-on-record/">https://ember-energy.org/latest-updates/fossil-fuels-fall-below-50-of-us-electricity-for-the-first-month-on-record/</a>, See on <a href="https://news.ycombinator.com/item?id=43750617">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
            <p><span>The milestone is the result of a long term decline of fossil generation in the US power sector, with wind and solar growing substantially over the last decade. Ten years ago, in March 2015, fossil generation still provided 65% of US electricity generation. Wind and solar generation stood at just 5.7%. Since then, the share of wind and solar power has more than quadrupled.</span></p>
<p><span>Solar power is set to account for </span><a href="https://www.eia.gov/todayinenergy/detail.php?id=64586"><span>more than half</span></a><span> of new generating capacity installed in the US in 2025, with more than a third of new solar panels going to Texas. Solar’s rise has been extraordinary. Ten years ago, in March 2015, solar power accounted for just 1% of US electricity generation. By March 2025, this had grown to 9.2%.</span></p>
<p><span>Last month Ember published a special report, </span><a href="https://ember-energy.org/latest-insights/us-electricity-2025-special-report/"><span>US Electricity 2025</span></a><span>, on the changes and trends in the US power sector last year. It found that solar was the fastest and largest growing source of electricity in the US in 2024. Wind and solar power combined rose to a record 17% of the US electricity mix in 2024, overtaking coal for the first time which accounted for 15%.</span></p>

            </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Getting Forked by Microsoft (959 pts)]]></title>
            <link>https://philiplaine.com/posts/getting-forked-by-microsoft/</link>
            <guid>43750535</guid>
            <pubDate>Mon, 21 Apr 2025 11:05:44 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://philiplaine.com/posts/getting-forked-by-microsoft/">https://philiplaine.com/posts/getting-forked-by-microsoft/</a>, See on <a href="https://news.ycombinator.com/item?id=43750535">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><article><header><p><i></i> Apr 21, 2025<br><i></i> 5 min read</p></header><div><p>Three years ago, I was part of a team responsible for developing and maintaining Kubernetes clusters for end user customers. A main source for downtime in customer environments occurred when image registries went down. The traditional way to solve this problem is to set up a stateful mirror, however we had to work within customer budget and time constraints which did not allow it. During a Black Friday, we started getting hit with a ton of traffic while GitHub container registries were down. This limited our ability to scale up the cluster as we depended on critical images from that registry. After this incident, I started thinking about a better way to avoid these scalability issues. A solution that did not need a stateful component and required minimal operational oversight. This is where the idea for <a href="https://github.com/spegel-org/spegel">Spegel</a> came from.</p><p>As a sole maintainer of an open source project, I was enthused when Microsoft reached out to set up a meeting to talk about Spegel. The meeting went well, and I felt there was going to be a path forward ripe with cooperation and hopefully a place where I could onboard new maintainers. I continued discussions with one of the Microsoft engineers, helping them get Spegel running and answering any architecture questions they had. At the time I was positive as I saw it as a possibility for Micorosft to contribute back changes based on their learnings. As time went on, silence ensued, and I assumed work priorities had changed.</p><p>It was not until KubeCon Paris where I attended a talk that piqued my interest. The talk was about strategies to speed up image distribution where one strategy discussed was P2P sharing. The topics in the abstract sounded similar to Spegel so I was excited to hear other’s ideas about the problem. During the talk, I was enthralled seeing Spegel, my own project, be discussed as a P2P image sharing solution. When <a href="https://github.com/Azure/peerd">Peerd</a>, a peer to peer distributor of container content in Kubernetes clusters made by Microsoft, was mentioned I quickly researched it. At the bottom of the README there was a thank you to myself and Spegel. This acknowledgement made it look like they had taken some inspiration from my project and gone ahead and developed a version of their own.</p><p><img src="https://philiplaine.com/posts/getting-forked-by-microsoft/acknowledgement-blur.png" alt="Acknowledgement">
<small><a href="https://github.com/Azure/peerd?tab=readme-ov-file#acknowledgments">Source: Peerd</a></small></p><p>While looking into Peerd, my enthusiasm for understanding different approaches in this problem space quickly diminished. I saw function signatures and comments that looked very familiar, as if I had written them myself. Digging deeper I found test cases referencing Spegel and my previous employer, test cases that have been taken directly from my project. References that are still present to this day. The project is a forked version of Spegel, maintained by Microsoft, but under Microsoft’s MIT license.</p><p><img src="https://philiplaine.com/posts/getting-forked-by-microsoft/test-parse-path-blur.png" alt="Test Parse Path">
<small><a href="https://github.com/Azure/peerd/blob/e0c0c5442f74937d56b70c3325d97bc9533f130e/pkg/oci/distribution/v2_test.go#L49-L57">Source: Peerd</a></small></p><p><img src="https://philiplaine.com/posts/getting-forked-by-microsoft/test-container-blur.png" alt="Test Container Store Ads">
<small><a href="https://github.com/Azure/peerd/blob/e0c0c5442f74937d56b70c3325d97bc9533f130e/pkg/discovery/content/provider/provider_test.go#L21-L26">Source: Peerd</a></small></p><p>Spegel was published with an MIT license. Software released under an MIT license allows for forking and modifications, without any requirement to contribute these changes back. I default to using the MIT license as it is simple and permissive. The license does not allow removing the original license and purport that the code was created by someone else. It looks as if large parts of the project were copied directly from Spegel without any mention of the original source. I have included a short snippet comparing the code which adds the mirror configuration where even the function comments are the same.</p><p><img src="https://philiplaine.com/posts/getting-forked-by-microsoft/hosts-peerd.png" alt="Hosts Peerd">
<small><a href="https://github.com/Azure/peerd/blob/c6f946397536902bd4f36f69fb68bf26e53a566f/pkg/containerd/hosts.go#L36-L62">Source: Peerd</a></small></p><p><img src="https://philiplaine.com/posts/getting-forked-by-microsoft/hosts-spegel.png" alt="Hosts Spegel">
<small><a href="https://github.com/spegel-org/spegel/blob/8052b024827b72bd5fb7a32e065efa3cb764f1a7/pkg/oci/containerd.go#L471-L496">Source: Spegel</a></small></p><p>A negative impact from the creation of Peerd is that it has created confusion among new users. I am frequently asked about the differences between Spegel and Peerd. As a maintainer, it is my duty to come across as unbiased and factual as possible, but this tumultuous history makes it challenging. Microsoft carries a large brand recognition, so it has been difficult for Spegel to try and take up space next to such a behemoth.</p><p>As an open source maintainer I have dedicated ample time to community requests, bug fixes, and security fixes. In my conversation with Microsoft I was open to collaboration to continue building out a tool to benefit the open source community. Over the years I have contributed to a multitude of open source projects and created a few of my own. Spegel was the first project I created from the ground up that got some traction and seemed to be appreciated by the community. Seeing my project being forked by Microsoft made me feel like I was no longer useful. For a while I questioned if it was even worth continuing working on Spegel.</p><p>Luckily, I persisted. Spegel still continues strong with over 1.7k stars and 14.4 million pulls since its first release over two years ago. However, I am not the first and unfortunately not the last person to come across this David versus Goliath-esque experience. How can sole maintainers work with multi-billion corporations without being taken advantage of? With the changes of Hashicorp licensing having a rippling effect through the open source community, along with the strong decline in investment in open source as a whole, how does the community prevail? As an effort to fund the work on Spegel I have enabled GitHub sponsors. This experience has also made me consider changing the license of Spegel, as it seems to be the only stone I can throw.</p></div></article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Pope Francis has died (221 pts)]]></title>
            <link>https://www.bbc.co.uk/news/live/crknlnzlrzdt</link>
            <guid>43749449</guid>
            <pubDate>Mon, 21 Apr 2025 08:07:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.bbc.co.uk/news/live/crknlnzlrzdt">https://www.bbc.co.uk/news/live/crknlnzlrzdt</a>, See on <a href="https://news.ycombinator.com/item?id=43749449">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><main id="main-content" data-testid="main-content"><div><div><ul role="tablist"><li role="presentation" selected=""><a role="tab" id="tab-LiveReporting" href="#LiveReporting" tabindex="0" aria-selected="false">Live Reporting</a></li><li role="presentation"><a role="tab" id="tab-Watch&amp;listen" href="#Watch&amp;listen" tabindex="0" aria-selected="false">Watch &amp; listen</a></li></ul></div><div width="300" role="tabpanel" aria-labelledby="tab-LiveReporting" id="LiveReporting" tabindex="-1"><div id="summaryPoints"><h2 type="section-heading">Summary</h2><div spacing="4" data-testid="test-election-component-editorial-text"><ul role="list"><li><p>Pope Francis has died aged 88, <a href="https://www.bbc.co.uk/news/live/crknlnzlrzdt?post=asset%3Add577a2c-b3e1-442e-b2aa-5906bfee7d25#post">the Vatican says</a></p></li><li><p>The Pope, who was the first Latin American leader of the Roman Catholic Church, died at 07:35 local time on Easter Monday</p></li><li><p><a href="https://www.bbc.co.uk/news/live/crknlnzlrzdt?post=asset%3A27b7f460-4410-4471-981a-9c036501db1e#post">World leaders pay tribute</a> to his "contagious smile" and "boundless compassion", with French President Emmanuel Macron calling him <a href="https://www.bbc.co.uk/news/live/crknlnzlrzdt?post=asset%3A92a15719-ca32-4aa1-98e6-8428debecfec#post">a "man of humility"</a></p></li><li><p>His death comes a day after <a href="https://www.bbc.co.uk/news/live/crknlnzlrzdt?post=asset%3A4afaa8db-62fb-44cd-8311-c214bb734290#post">he appeared in St Peter's Square</a> to wish "Happy Easter" to thousands of worshippers</p></li><li><p>He was recently discharged from hospital last month after five weeks of treatment for an infection</p></li><li><p>Francis's death sets in motion the centuries-old process of <a href="https://www.bbc.co.uk/news/articles/c70q0980224o">electing a new Pope</a></p></li></ul></div></div><div data-testid="component-wrapper" role="group" aria-label="Key Highlight media"><figure><figcaption><span>Media caption, </span><p>Watch BBC's religion editor Aleem Maqbool on the life of the late Pope</p></figcaption></figure></div><div><div data-testid="byline-wrapper"><h2 type="section-heading">Live Reporting</h2><p>Edited by Thomas Spender and Jack Burgess</p></div><div data-testid="stream-container"><ol role="list" spacing="6" tabindex="0" data-testid="postList"><li><div><article data-testid="content-post" id="asset:3381edbb-7a31-4556-9512-7297b8b9acb0"><header><span><h3 type="normal"><span role="text"><span>UK politicians pay tribute to Pope's leadership</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 10:29 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="Kemi Badenoch delivering a speech" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/fb939c72-5344-4f89-ab07-2b450f08073d.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/fb939c72-5344-4f89-ab07-2b450f08073d.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/fb939c72-5344-4f89-ab07-2b450f08073d.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/fb939c72-5344-4f89-ab07-2b450f08073d.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/fb939c72-5344-4f89-ab07-2b450f08073d.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/fb939c72-5344-4f89-ab07-2b450f08073d.jpg.webp 800w" width="1879" height="1057"></span><span role="text"><span>Image source, </span>Getty Images</span></p><figcaption><span>Image caption, </span><p>Conservative leader Kemi Badenoch met the Pope in 2022</p></figcaption></figure><p>The leaders of UK political parties have praised Pope Francis's courage and leadership.</p><p>Conservative leader <b>Kemi Badenoch</b> pays tribute to the pontiff's "humility, courage and conviction".</p><p>Leader of the Liberal Democrats, <b>Sir Ed Davey</b>, calls Pope Francis a "leader of compassion and courage".</p><p>Reform UK leader <b>Nigel Farage</b> says his "sympathies go out to all in the Catholic Church".</p><p>Welsh First Minister <b>Eluned Morgan</b> praises the late Pope's "example of compassionate leadership".</p><p>Scottish First Minister <b>John Swinney</b> says the Pope "brought comfort, assurance and hope".</p><p>We haven't heard from the UK Prime Minister Sir Keir Starmer, or King Charles III yet, but we'll let you know as soon as we hear from them.</p></article></div></li><li><div><article data-testid="content-post" id="asset:7f667ccd-41bc-4c7a-8acc-d9718faad944"><header><span><h3 type="normal"><span role="text"><span>Health issues clouded the Pope's final months</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 10:21 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="The Pope gives the thumbs up from a balcony at his hospital in Rome." src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/ac9c35d7-f1fa-4199-8c2c-71103117e692.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/ac9c35d7-f1fa-4199-8c2c-71103117e692.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/ac9c35d7-f1fa-4199-8c2c-71103117e692.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/ac9c35d7-f1fa-4199-8c2c-71103117e692.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/ac9c35d7-f1fa-4199-8c2c-71103117e692.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/ac9c35d7-f1fa-4199-8c2c-71103117e692.jpg.webp 800w" width="887" height="499"></span><span role="text"><span>Image source, </span>EPA</span></p></figure><p>In the final months of his life, the Pope's ill-health saw him spend several weeks in hospital.</p><p>On 14 February, the 88-year-old was taken to the Gemelli hospital in Rome to be treated for pneumonia in both lungs. He had experienced difficulties breathing for several days.</p><p>He was discharged from hospital on 23 March.</p><p>The pontiff was particularly susceptible to pneumonia, which is an infection of the lungs that can be caused by bacteria, viruses or fungi, after undergoing a partial lung removal as a young man.</p></article></div></li><li><div><article data-testid="content-post" id="asset:767e821b-a9f1-4745-9666-f6367213e6dc"><header><span><h3 type="normal"><span role="text"><span>'My heart goes out': JD Vance pays tribute day after meeting Pope Francis</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 10:16 British Summer Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><figure><p><span><img alt="JD Vance and Pope." src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/690f942f-58b7-4cd2-8af7-670cb1766b53.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/690f942f-58b7-4cd2-8af7-670cb1766b53.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/690f942f-58b7-4cd2-8af7-670cb1766b53.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/690f942f-58b7-4cd2-8af7-670cb1766b53.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/690f942f-58b7-4cd2-8af7-670cb1766b53.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/690f942f-58b7-4cd2-8af7-670cb1766b53.jpg.webp 800w" width="948" height="533"></span><span role="text"><span>Image source, </span>Getty Images</span></p><figcaption><span>Image caption, </span><p>US Vice-President JD Vance had a brief meeting Pope Francis yesterday</p></figcaption></figure><p>US Vice-President JD Vance says he has just learned of the passing of Pope Francis.</p><p>He adds: "My heart goes out to the millions of Christians all over the world who loved him."</p><p>Vance arrived in Rome on Friday and on Saturday met Vatican officials.</p><p>He also had a brief private meeting with the Pope. </p></article></div></li><li><div><article data-testid="content-post" id="asset:fdf6cc53-18d6-4abc-9431-32f30664a17b"><header><span><h3 type="normal"><span role="text"><span>'A good, warm and sensitive man' - tributes continue to pour in for Pope Francis</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 10:13 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="Ursula von der Leyen and the Pope" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/3d5f59e8-064b-4366-b266-50538c7840b1.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/3d5f59e8-064b-4366-b266-50538c7840b1.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/3d5f59e8-064b-4366-b266-50538c7840b1.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/3d5f59e8-064b-4366-b266-50538c7840b1.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/3d5f59e8-064b-4366-b266-50538c7840b1.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/3d5f59e8-064b-4366-b266-50538c7840b1.jpg.webp 800w" width="882" height="496"></span><span role="text"><span>Image source, </span>Reuters</span></p><figcaption><span>Image caption, </span><p>Ursula von der Leyen, chief of the European Commission, says her thoughts are with all who feel this profound loss</p></figcaption></figure><p>We can bring you some more reaction now from leaders around the world:</p><ul><li spacing="rich-text"><b>European Commission President Ursula von der Leyen</b> says "he inspired millions, far beyond the Catholic Church, with his humility and love so pure for the less fortunate"
    </li><li spacing="rich-text"><b>India's Prime Minister Narendra Modi</b> says he is "deeply pained" by the passing of Pope Francis
    </li><li spacing="rich-text"><b>Polish Prime Minister Donald Tusk</b> remembers Pope Francis as a "good, warm and sensitive man"
    </li><li spacing="rich-text"><b>Egypt's President Abdul Fattah al-Sisi </b>says Pope Francis "was a voice of peace, love and compassion"
    </li></ul></article></div></li><li><div><article data-testid="content-post" id="asset:55d32dd5-6500-427d-b937-98ad1d882a4f"><header><span><h3 type="normal"><span role="text"><span>Pope Francis's rise from Buenos Aires to Catholic Church leader</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 10:01 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="Pope Francis in red robes as he sits while cardinals look at him" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/5c5a96c8-dae2-4345-9cb3-47fa0dfe006e.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/5c5a96c8-dae2-4345-9cb3-47fa0dfe006e.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/5c5a96c8-dae2-4345-9cb3-47fa0dfe006e.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/5c5a96c8-dae2-4345-9cb3-47fa0dfe006e.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/5c5a96c8-dae2-4345-9cb3-47fa0dfe006e.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/5c5a96c8-dae2-4345-9cb3-47fa0dfe006e.jpg.webp 800w" width="976" height="549"></span><span role="text"><span>Image source, </span>Reuters</span></p></figure><p>Pope Francis was born Jorge Mario Bergoglio, in Buenos Aires, Argentina, on 17 December 1936.</p><p>The eldest of five children, his parents had fled their native Italy to escape the evils of fascism.  </p><p>He enjoyed tango dancing and became a supporter of his local football club, San Lorenzo.</p><p>He was lucky to escape with his life after a serious bout of pneumonia, undergoing an operation to remove part of a lung. It would leave him susceptible to infection throughout his life.</p><p>As an elderly man he also suffered from pain in his right knee, which he described as a "physical humiliation".</p><p>The young Bergoglio worked as a nightclub bouncer and floor sweeper, before graduating as a chemist.</p><p>At a local factory, he worked closely with Esther Ballestrino, who campaigned against Argentina's military dictatorship. She was tortured, her body never found.</p><p>He became a Jesuit, studied philosophy and taught literature and psychology. Ordained a decade later, he won swift promotion, becoming provincial superior for Argentina in 1973.</p></article></div></li><li><div><article data-testid="content-post" id="asset:f6a845d2-6496-4de9-af02-76b80392acf1"><header><span><h3 type="normal"><span role="text"><span>Pope Francis leaves a profound legacy - Spanish PM</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:58 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="Pedro Sánchez" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/e70f16ab-2190-407f-925b-23986c104230.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/e70f16ab-2190-407f-925b-23986c104230.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/e70f16ab-2190-407f-925b-23986c104230.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/e70f16ab-2190-407f-925b-23986c104230.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/e70f16ab-2190-407f-925b-23986c104230.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/e70f16ab-2190-407f-925b-23986c104230.jpg.webp 800w" width="955" height="537"></span><span role="text"><span>Image source, </span>Getty Images</span></p></figure><p>Spain's Prime Minister Pedro Sánchez hails Pope Francis's commitment to the "most vulnerable".</p><p>He says in a post on the social media platform X: "I mourn the passing of Pope Francis. His commitment to peace, social justice, and the most vulnerable leaves a profound legacy.

Rest in peace."</p></article></div></li><li><div><article data-testid="content-post" id="asset:d670b0a8-4cde-4db4-b909-5889116fc0d8"><header><span><h3 type="normal"><span role="text"><span>'A great man has left us' - Italy's PM</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:55 British Summer Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><figure><p><span><img alt="Giorgia Meloni." src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/4a301ac1-7437-43f8-b8ee-d1511480e0c7.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/4a301ac1-7437-43f8-b8ee-d1511480e0c7.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/4a301ac1-7437-43f8-b8ee-d1511480e0c7.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/4a301ac1-7437-43f8-b8ee-d1511480e0c7.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/4a301ac1-7437-43f8-b8ee-d1511480e0c7.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/4a301ac1-7437-43f8-b8ee-d1511480e0c7.jpg.webp 800w" width="935" height="526"></span><span role="text"><span>Image source, </span>Getty Images</span></p></figure><p>Italian Prime Minister Giorgia Meloni says "this news saddens us deeply".</p><p>"I had the privilege of enjoying his friendship," she adds in the statement.</p><p>Meloni adds "he asked the world, once again, for the courage to change direction, to follow a path that 'does not destroy, but cultivates, repairs, protects'".</p><p>"His teaching and his legacy will not be lost. We greet the Holy Father with hearts full of sadness, but we know that he is now in the peace of the Lord."</p></article></div></li><li><div><article data-testid="content-post" id="asset:93946807-4b53-4fd9-ab2b-69e6a1777511"><header><span><h3 type="normal"><span role="text"><span>Pope Francis's final message: No peace without freedom of religion, thought and expression</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:54 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="Pope sitting in centre, with an aide on either side, on the balcony of St Peter's Basilica. Aide on left is reading out the Easter Sunday address on his behalf from a white-covered book." src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/f054de66-55b1-48a2-bd2d-138306d77d94.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/f054de66-55b1-48a2-bd2d-138306d77d94.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/f054de66-55b1-48a2-bd2d-138306d77d94.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/f054de66-55b1-48a2-bd2d-138306d77d94.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/f054de66-55b1-48a2-bd2d-138306d77d94.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/f054de66-55b1-48a2-bd2d-138306d77d94.jpg.webp 800w" width="2265" height="1274"></span><span role="text"><span>Image source, </span>Reuters</span></p></figure><p>Pope Francis' Easter Sunday message was one of peace and "respect for the views of others".</p><p>An aide read on his behalf:</p><div><blockquote><div spacing="rich-text"><p><span>Quote Message</span></p><p>There can be no peace without freedom of religion, freedom of thought, freedom of expression."</p></div></blockquote></div><p>In his final address, the pontiff remembered the people of Gaza, in particular its Christian population, as the conflict "causes death and destruction" and creates a "deplorable humanitarian situation". He also called growing global antisemitism "worrisome".</p><p>"What a great thirst for death, for killing we see in the many conflicts raging in different parts of the world," he said.</p><p>"I express my closeness to the sufferings... for all the Israeli people and the Palestinian people," the message said. "Call a ceasefire, release the hostages and come to the aid of a starving people that aspires to a future of peace."</p><p>The Pope also encouraged all parties involved in the Ukraine war to "pursue efforts aimed at achieving a just and lasting peace".</p></article></div></li><li><div><article data-testid="content-post" id="asset:387ff0cd-c90c-42b8-a8fa-8f0b22db6691"><header><span><h3 type="normal"><span role="text"><span>Church of England's acting head pays tribute</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:49 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="Archbishop of York." src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/364d3f0b-b71d-4c57-b4bb-bb059eed1bc0.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/364d3f0b-b71d-4c57-b4bb-bb059eed1bc0.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/364d3f0b-b71d-4c57-b4bb-bb059eed1bc0.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/364d3f0b-b71d-4c57-b4bb-bb059eed1bc0.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/364d3f0b-b71d-4c57-b4bb-bb059eed1bc0.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/364d3f0b-b71d-4c57-b4bb-bb059eed1bc0.jpg.webp 800w" width="1022" height="575"></span><span role="text"><span>Image source, </span>Getty Images</span></p></figure><p>Archbishop of York Stephen Cottrell - who is the acting head of the Church of England - has reacted to Pope Francis's death. The paid met in 2023.</p><p>"<i>We saw that compellingly in Francis’s service of the poor, his love of neighbour especially the displaced, migrant, the asylum seeker, his deep compassion for the well-being of the earth and his desire to lead and build the church in new ways.</i></p><p><i>"Francis showed us how to follow Jesus and encouraged us to go and do likewise... </i><i>In their humility and focus on those in the margins, those actions, his whole life, was instantly recognisable as those of one who followed Jesus."</i></p><p>Archbishop Cottrell also referred to Pope Francis's work to resolve religious differences, saying he had been "a<i>cutely aware of the divisions between our churches and how they stand in the way of seeing Jesus Christ more fully".</i></p><p>And he paid tribute to his character, describing him as a "holy man of God" who was "also very human".</p><div><blockquote><div spacing="rich-text"><p><span>Quote Message</span></p><p>I remember, in the brief times I spent with him, how this holy man of God was also very human. He was witty, lively, good to be with, and the warmth of his personality and interest in others shone out from him. May he rest in peace and rise in glory."</p></div></blockquote></div></article></div></li><li><div><article data-testid="content-post" id="asset:9ab97463-78fc-4a63-b20e-531522ada5fc"><header><span><h3 type="normal"><span role="text"><span>Pope's death comes in Catholic jubilee year</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:45 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="Pope with his back to the camera and both hands on the Holy Door. He is wearing white" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/65502b59-5024-49e6-bcb8-090ddb845295.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/65502b59-5024-49e6-bcb8-090ddb845295.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/65502b59-5024-49e6-bcb8-090ddb845295.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/65502b59-5024-49e6-bcb8-090ddb845295.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/65502b59-5024-49e6-bcb8-090ddb845295.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/65502b59-5024-49e6-bcb8-090ddb845295.jpg.webp 800w" width="3489" height="1962"></span><span role="text"><span>Image source, </span>Reuters</span></p></figure><p>The pontiff's death not only follows the most important calendar event for Catholics, but falls into the special jubilee year, which comes around every 25 years.</p><p>The jubilee kicked off when the Pope opened the usually bricked-up Holy Door at St Peter's Basilica on 24 December, and sees millions of pilgrims descend on the Vatican to pass through the doorway and seek forgiveness for their sins. </p><p>Tens of thousands of Catholics had gathered for the Easter Mass in this special year. </p></article></div></li><li><div><article data-testid="content-post" id="asset:4455a153-0225-4eb1-8036-c3d627f3a5c2"><header><span><h3 type="normal"><span role="text"><span>Watch: Pope Francis, the bouncer who became pontiff</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:41 British Summer Time</span></span></span></span></h3></span></header><p>The BBC's religion editor, Aleem Maqbool, takes us through the life of the late Pope Francis in this short, 90-second video:</p><div data-testid="component-wrapper"><figure><figcaption><span>Media caption, </span><p>Pope Francis: The bouncer who became pontiff</p></figcaption></figure></div></article></div></li><li><div><article data-testid="content-post" id="asset:27b7f460-4410-4471-981a-9c036501db1e"><header><span><h3 type="normal"><span role="text"><span>'A voice for peace with a contagious smile': World leaders' tributes</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:32 British Summer Time</span></span></span></span></h3></span></header><p>Tributes are pouring in now:</p><ul><li spacing="rich-text"><b>Dutch Prime Minister Dick Schoof </b>says "Pope Francis was in every way a man of the people"
    </li><li spacing="rich-text"><b>European Parliament President Roberta Metsola</b> says "his contagious smile captured millions of people’s hearts across the globe"
    </li><li spacing="rich-text"><b>Israeli President Isaac Herzog </b>hails his "boundless compassion"
    </li><li spacing="rich-text"><b>Swiss President Karin Keller-Sutter</b> says Pope Francis was a "great spiritual leader, a tireless advocate for peace"
    </li><li spacing="rich-text"><b>Scottish First Minister John Swinney</b> describes him as "a voice for peace, tolerance and reconciliation"
    </li></ul></article></div></li><li><div><article data-testid="content-post" id="asset:92a15719-ca32-4aa1-98e6-8428debecfec"><header><span><h3 type="normal"><span role="text"><span>Pope Francis was a 'man of humility', Macron says</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:29 British Summer Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><figure><p><span><img alt="Macron meeting Pope Francis" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/477783c5-8b75-4592-a10a-11de74081b81.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/477783c5-8b75-4592-a10a-11de74081b81.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/477783c5-8b75-4592-a10a-11de74081b81.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/477783c5-8b75-4592-a10a-11de74081b81.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/477783c5-8b75-4592-a10a-11de74081b81.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/477783c5-8b75-4592-a10a-11de74081b81.jpg.webp 800w" width="3000" height="1688"></span><span role="text"><span>Image source, </span>EPA</span></p><figcaption><span>Image caption, </span><p>The French president is pictured here meeting the Pope in 2023</p></figcaption></figure><p>French President Emmanuel Macron is among the first world leaders to pay tribute to Pope Francis, calling him a "man of humility, on the side of the most vulnerable and most fragile".</p></article></div></li><li><div><article data-testid="content-post" id="asset:4afaa8db-62fb-44cd-8311-c214bb734290"><header><span><h3 type="normal"><span role="text"><span>Pope's last public appearance was for Easter Sunday blessing</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:21 British Summer Time</span></span></span></span></h3></span></header><div data-testid="component-wrapper"><figure><figcaption><span>Media caption, </span><p>Watch: Pope Francis wishes the faithful a "happy Easter" to applause from Vatican crowds</p></figcaption></figure></div><p>The Pope's death comes fewer than 24 hours after he<a href="https://www.bbc.co.uk/news/articles/ckg291ngq7qo"> made an appearance at the Vatican's St Peter's Square</a> for Easter Sunday.</p><p>He came out in a wheelchair and waved from the balcony of St Peter's Basilica to cheering crowds and said: "Dear brothers and sisters, happy Easter."</p><ul></ul><figure><p><span><img alt="Pope sitting in wheelchair on balcony" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/243774d6-f18d-45e0-9595-8f9b53f08a08.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/243774d6-f18d-45e0-9595-8f9b53f08a08.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/243774d6-f18d-45e0-9595-8f9b53f08a08.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/243774d6-f18d-45e0-9595-8f9b53f08a08.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/243774d6-f18d-45e0-9595-8f9b53f08a08.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/243774d6-f18d-45e0-9595-8f9b53f08a08.jpg.webp 800w" width="3167" height="1781"></span><span role="text"><span>Image source, </span>Reuters</span></p></figure><p>His traditional Easter address and blessing was read by an aide while he sat, watching.</p><p>Following the blessing, he was driven around the square. As he passed through the crowds, his procession paused a number of times as babies were brought over for him to bless.</p><ul><li spacing="rich-text"><a href="https://www.bbc.co.uk/news/articles/ckg291ngq7qo">Read the full story from Sunday here</a></li></ul><figure><p><span><img alt="Pope in white roofless Mercedes being driven down a cleared path in the square. There are crowds behind barriers on either side" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/94a1217c-7b7a-48a5-a46c-0db16692d607.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/94a1217c-7b7a-48a5-a46c-0db16692d607.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/94a1217c-7b7a-48a5-a46c-0db16692d607.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/94a1217c-7b7a-48a5-a46c-0db16692d607.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/94a1217c-7b7a-48a5-a46c-0db16692d607.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/94a1217c-7b7a-48a5-a46c-0db16692d607.jpg.webp 800w" width="1022" height="575"></span><span role="text"><span>Image source, </span>Getty Images</span></p></figure></article></div></li><li><div><article data-testid="content-post" id="asset:2106656c-d1f6-4e12-924a-0e50383544ab"><header><span><h3 type="normal"><span role="text"><span>Watch the scene at the Vatican</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:18 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="A view of people in St Peter's Square, Vatican City" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/e4432eb6-5af3-4319-b281-cd4bce7acfdb.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/e4432eb6-5af3-4319-b281-cd4bce7acfdb.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/e4432eb6-5af3-4319-b281-cd4bce7acfdb.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/e4432eb6-5af3-4319-b281-cd4bce7acfdb.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/e4432eb6-5af3-4319-b281-cd4bce7acfdb.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/e4432eb6-5af3-4319-b281-cd4bce7acfdb.jpg.webp 800w" width="1920" height="1080"></span><span role="text"><span>Image source, </span>AFP</span></p></figure><p>See the latest at the Vatican in our live stream above - press <b>watch live </b>at the top of the page.</p></article></div></li><li><div><article data-testid="content-post" id="asset:a3644c58-c4ed-4b08-b70e-7d70ebd4a811"><header><span><h3 type="normal"><span role="text"><span>What happens when the Pope dies?</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:16 British Summer Time</span></span></span></span></h3></span></header><p>A papal funeral has traditionally been an elaborate affair, but Pope Francis recently approved plans to make the whole procedure less complex.</p><p>Previous pontiffs were buried in three nested coffins made of cypress, lead and oak. </p><p>Pope Francis has opted for a simple wooden coffin lined with zinc.</p><p>He has also scrapped the tradition of placing the Pope's body on a raised platform - known as a catafalque - in St Peter's Basilica for public viewing.</p><p>Instead, mourners will be invited to pay their respects while his body remains inside the coffin, with the lid removed.</p><p>Francis will also be the first Pope in more than a Century to be buried outside the Vatican.</p><p>He will be laid to rest in the Basilica of St Mary Major, one of four major papal basilicas in Rome.</p></article></div></li><li><div><article data-testid="content-post" id="asset:b716ce4e-34bb-4556-86f8-24962769f8bc"><header><span><h3 type="normal"><span role="text"><span>The first non-European Pope in centuries</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:11 British Summer Time</span></span></span></span></h3></span></header><figure><p><span><img alt="Alt: Graffiti of the pope waving on the back of a white building with a man walking in front of it" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/68969772-a073-47ef-a636-fe5ee67718d1.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/68969772-a073-47ef-a636-fe5ee67718d1.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/68969772-a073-47ef-a636-fe5ee67718d1.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/68969772-a073-47ef-a636-fe5ee67718d1.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/68969772-a073-47ef-a636-fe5ee67718d1.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/68969772-a073-47ef-a636-fe5ee67718d1.jpg.webp 800w" width="974" height="547"></span><span role="text"><span>Image source, </span>Reuters</span></p></figure><p>Francis's papacy heralded many firsts and while he never stopped introducing reforms to the Catholic Church, he remained popular among traditionalists.</p><p>He was the first Pope from the Americas or the southern hemisphere. Not since Syrian-born Gregory III died in 741 had there been a non-European Bishop of Rome.</p><p>He was also the first Jesuit to be elected to the throne of St Peter - Jesuits were historically looked on with suspicion by Rome.</p><p>Francis's predecessor, Benedict XVI, was the first Pope to retire voluntarily in almost 600 years and for almost a decade the Vatican Gardens hosted two popes.</p><p>As Cardinal Bergoglio of Argentina, he was already in his seventies when he became Pope in 2013.</p></article></div></li><li><div><article data-testid="content-post" id="asset:dd577a2c-b3e1-442e-b2aa-5906bfee7d25"><header><span><h3 type="normal"><span role="text"><span>Vatican announces Pope Francis's death - statement in full</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:06 British Summer Time</span></span></span></span></h3></span></header><p>A short while ago, His Eminence, Cardinal Farrell, announced with sorrow the death of Pope Francis, with these words:
“Dearest brothers and sisters, with deep sorrow I must announce the death of our Holy Father Francis.</p><div><blockquote><div spacing="rich-text"><p><span>Quote Message</span></p><p>At 7:35 this morning (local time), the Bishop of Rome, Francis, returned to the house of the Father. His entire life was dedicated to the service of the Lord and His Church."</p></div></blockquote></div><p>"He taught us to live the values ​​of the Gospel with fidelity, courage and universal love, especially in favour of the poorest and most marginalised."</p><p>Farrell adds: "With immense gratitude for his example as a true disciple of the Lord Jesus, we commend the soul of Pope Francis to the infinite merciful love of the One and Triune God.”</p></article></div></li><li><div><article data-testid="content-post" id="asset:9b3daf20-594e-4e1e-8d13-6da2b5de50d0"><header><span><h3 type="normal"><span role="text"><span>Vatican statement</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:01 British Summer Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><p>Pope Francis died on Easter Monday, April 21, 2025, at the age of 88 at his residence in the Vatican's Casa Santa Marta.</p><p>Follow our coverage by clicking the button at the top of this page.</p></article></div></li><li><div><article data-testid="content-post" id="asset:f5f70f5b-2bc6-4d15-bf3c-08068b1a7d55"><header><span><h3 type="normal"><span role="text"><span>Pope Francis dies aged 88</span><span><span data-testid="timestamp"><span data-testid="accessible-timestamp">published at 09:01 British Summer Time</span><p><span>Breaking</span></p></span></span></span></h3></span></header><figure><p><span><img alt="The Pope sat giving a sermon in front of a cross" src="https://ichef.bbci.co.uk/ace/standard/640/cpsprodpb/vivo/live/images/2025/4/21/a98184ec-c7b3-4362-958d-1350da5ef529.jpg.webp" srcset="https://ichef.bbci.co.uk/ace/standard/240/cpsprodpb/vivo/live/images/2025/4/21/a98184ec-c7b3-4362-958d-1350da5ef529.jpg.webp 240w, https://ichef.bbci.co.uk/ace/standard/320/cpsprodpb/vivo/live/images/2025/4/21/a98184ec-c7b3-4362-958d-1350da5ef529.jpg.webp 320w, https://ichef.bbci.co.uk/ace/standard/480/cpsprodpb/vivo/live/images/2025/4/21/a98184ec-c7b3-4362-958d-1350da5ef529.jpg.webp 480w, https://ichef.bbci.co.uk/ace/standard/624/cpsprodpb/vivo/live/images/2025/4/21/a98184ec-c7b3-4362-958d-1350da5ef529.jpg.webp 624w, https://ichef.bbci.co.uk/ace/standard/800/cpsprodpb/vivo/live/images/2025/4/21/a98184ec-c7b3-4362-958d-1350da5ef529.jpg.webp 800w" width="976" height="549"></span><span role="text"><span>Image source, </span>Reuters</span></p></figure><p>Pope Francis has died at the age of 88, the Vatican has announced.</p><p>Cardinal Jorge Mario Bergoglio was elected to lead the Catholic Church in March 2013 after Pope Benedict XVI stood down.</p></article></div></li></ol></div></div></div></div></main></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Pope Francis has died (659 pts)]]></title>
            <link>https://www.reuters.com/world/pope-francis-has-died-vatican-says-video-statement-2025-04-21/</link>
            <guid>43749405</guid>
            <pubDate>Mon, 21 Apr 2025 08:00:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.reuters.com/world/pope-francis-has-died-vatican-says-video-statement-2025-04-21/">https://www.reuters.com/world/pope-francis-has-died-vatican-says-video-statement-2025-04-21/</a>, See on <a href="https://news.ycombinator.com/item?id=43749405">Hacker News</a></p>
Couldn't get https://www.reuters.com/world/pope-francis-has-died-vatican-says-video-statement-2025-04-21/: Error: Request failed with status code 401]]></description>
        </item>
        <item>
            <title><![CDATA[Reworking 30 lines of Linux code could cut power use by up to 30 percent (120 pts)]]></title>
            <link>https://spectrum.ieee.org/data-center-energy-consumption</link>
            <guid>43749271</guid>
            <pubDate>Mon, 21 Apr 2025 07:34:07 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://spectrum.ieee.org/data-center-energy-consumption">https://spectrum.ieee.org/data-center-energy-consumption</a>, See on <a href="https://news.ycombinator.com/item?id=43749271">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-headline="Data Centers Can Slash Power Needs With One Coding Tweak"><p>Much of the world’s web traffic is routed through <a href="https://spectrum.ieee.org/tag/data-centers" target="_self"><u>data centers</u></a>, which also fuel power-guzzling <a href="https://spectrum.ieee.org/topic/artificial-intelligence/" target="_self"><u>artificial intelligence (AI)</u></a> applications. In the U.S. alone, <a href="https://www.energy.gov/articles/doe-releases-new-report-evaluating-increase-electricity-demand-data-centers" rel="noopener noreferrer" target="_blank"><u>data centers consumed around 4 percent of the country’s total electricity in 2023</u></a>, and that number is projected to rise up to 12 percent by 2028.</p><p>Some researchers are thinking big, formulating innovative schemes to <a href="https://spectrum.ieee.org/data-centers-designed-for-tropics" target="_self"><u>make data centers more sustainable</u></a>. Others, like <a href="https://cs.uwaterloo.ca/~mkarsten/" rel="noopener noreferrer" target="_blank"><u>Martin Karsten</u></a>, a professor of systems and networking at the <a href="https://uwaterloo.ca/" rel="noopener noreferrer" target="_blank"><u>University of Waterloo</u></a> in <a href="https://spectrum.ieee.org/tag/canada">Canada</a>, are enhancing current methods in the tiniest of ways to reduce <a href="https://spectrum.ieee.org/tag/data-center-energy">data center energy</a> consumption.</p><p>Karsten and his former master’s student, Peter Cai, uncovered inefficiencies in how the <a href="https://spectrum.ieee.org/tag/linux" target="_self"><u>Linux</u></a>&nbsp;<a href="https://spectrum.ieee.org/tag/operating-system">operating system</a> (OS) processes <a href="https://spectrum.ieee.org/tag/network-traffic">network traffic</a> at the kernel level: The <a href="https://www.redhat.com/en/topics/linux/what-is-the-linux-kernel" rel="noopener noreferrer" target="_blank"><u>Linux kernel</u></a> is the “seed” or core of the OS, managing communication and resources such as memory between the hardware and processes.</p><p>In the case of <a href="https://spectrum.ieee.org/tag/data-centers">data centers</a>, these processes entail figuring out where to send segments of information called “data packets” transmitted over the network. When the network receives a new packet, it triggers an interrupt request. The kernel sends this request to the CPU, which then puts its current task on hold to process the packet.</p><p>The OS also periodically polls the network to check for incoming packets before an interrupt request fires. This <a href="https://docs.kernel.org/networking/napi.html#poll" rel="noopener noreferrer" target="_blank"><u>busy polling</u></a> mechanism minimizes delays in network traffic processing at the cost of CPU power consumption. During low traffic conditions in particular, polling continues even without packets to process, leading to needless energy usage.</p><p>Karsten decided to optimize this approach. “Instead of always waiting for a fixed period of time, we dynamically wait based on what we know is going on in the application,” he says. He devised a technique such that busy polling happens during high network traffic periods, with unnecessary interrupt requests suspended. When network traffic dies down, interrupt-based delivery resumes. “That makes the resulting mechanism much more efficient and flexible,” he adds.</p><h2>Optimizing <a href="https://spectrum.ieee.org/tag/linux">Linux</a> for <a href="https://spectrum.ieee.org/tag/energy-efficiency">Energy Efficiency</a></h2><p>Putting theory into practice, Karsten partnered with <a href="https://blog.dama.to/about/" rel="noopener noreferrer" target="_blank"><u>Joe Damato</u></a>, a distinguished engineer at <a href="https://spectrum.ieee.org/tag/cloud-computing">cloud computing</a> services provider <a href="https://www.fastly.com/" rel="noopener noreferrer" target="_blank"><u>Fastly</u></a> and frequent Linux kernel contributor, to develop the changes. It turns out they didn’t have to write any new code.</p><p>“It’s really just reorganizing the way in which the data flow and the data processing is happening,” says Damato. “We piggyback on existing code in the Linux kernel, and we change the order in which things operate.”</p><p>That change led to around 30 lines of reworked code. They tested the functionality and performance of their modifications on different scenarios and workloads, and found that the kernel improvements can decrease power consumption by up to 30 percent.</p><p>This energy savings comes with a caveat. “It is sort of a best case because the 30 percent applies to the network stack or communication part of it,” Karsten explains. “If an application primarily does that, then it will see 30 percent improvement. If the application does a lot of other things and only occasionally uses the network, then the 30 percent will shrink to a smaller value.”</p><p>The altered code can especially benefit network-dominant applications like data centers whose traffic levels fluctuate during the day, because the change is automatic and dynamic based on network traffic load. Such a small code snippet could also have a huge cascading impact, with some reports noting that Linux is widely used by a majority of <a href="https://w3techs.com/technologies/breakdown/os-linux/data_center" rel="noopener noreferrer" target="_blank"><u>data center providers</u></a> and <a href="https://w3techs.com/technologies/details/os-linux" rel="noopener noreferrer" target="_blank"><u>websites</u></a>.</p><h2>Linux Kernel Update Goes Live</h2><p>The <a href="https://web.git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=80b6f094756f" rel="noopener noreferrer" target="_blank"><u>code</u></a> has been implemented as part of the <a href="https://kernelnewbies.org/Linux_6.13#NAPI_suspension_for_more_efficient_networking" rel="noopener noreferrer" target="_blank"><u>Linux kernel release version 6.13</u></a> in January. Karsten and Cai also published a related <a href="https://dl.acm.org/doi/abs/10.1145/3626780" rel="noopener noreferrer" target="_blank"><u>paper</u></a> in the <a href="https://dl.acm.org/toc/pomacs/2023/7/3" rel="noopener noreferrer" target="_blank"><u><em>Proceedings of the ACM on Measurement and Analysis of Computing Systems</em></u></a> in 2023 and presented it at the <a href="https://www.sigmetrics.org/sigmetrics2024/" rel="noopener noreferrer" target="_blank"><u>ACM SIGMETRICS 2024</u></a> conference.</p><p>Damato hopes to spread the word about their work at upcoming Linux kernel networking conferences this year. He’s also planning to add support for a similar mechanism in Fastly’s <a href="https://github.com/h2o" rel="noopener noreferrer" target="_blank"><u>H2O server</u></a>.</p><p>And because Linux is <a href="https://spectrum.ieee.org/tag/open-source" target="_self"><u>open source</u></a>, Damato hopes others would follow their lead. “Whether you use <a href="https://spectrum.ieee.org/tag/nginx">nginx</a> or Apache or whatever it happens to be as your web server, you’ll be able to use some of the code we put out there to help inspire and direct you into how you might implement the same thing for your web server.”</p><p>For Karsten, this work has motivated him to take on <a href="https://spectrum.ieee.org/tag/sustainability" target="_self"><u>sustainability</u></a> and <a href="https://spectrum.ieee.org/green-software" target="_self"><u>software efficiency</u></a> as his next research agenda.</p><p>“When I grew up in computer science in the 90s, everybody was concerned about efficiency. Because computers were small, they just had a small amount of memory. They were slow, so you had to worry about every cycle and every byte,” he says. “Somehow in the last 20 years, this has gotten lost. Everybody’s completely gung-ho about performance without any regard for efficiency or resource consumption. I think it’s time to pivot, where we can find ways to make things a little more efficient.”</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Python's new t-strings (413 pts)]]></title>
            <link>https://davepeck.org/2025/04/11/pythons-new-t-strings/</link>
            <guid>43748512</guid>
            <pubDate>Mon, 21 Apr 2025 04:31:35 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://davepeck.org/2025/04/11/pythons-new-t-strings/">https://davepeck.org/2025/04/11/pythons-new-t-strings/</a>, See on <a href="https://news.ycombinator.com/item?id=43748512">Hacker News</a></p>
<div id="readability-page-1" class="page"><div> <p>Template strings, also known as t-strings, have been <a href="https://peps.python.org/pep-0750/">officially accepted</a> as a feature in Python 3.14, which will ship in late 2025. 🎉</p>
<p>I’m excited; t-strings open the door to safer more flexible string processing in Python.</p>
<h4 id="whats-the-big-idea-with-t-strings">What’s the big idea with t-strings?</h4>
<p>Since they were introduced in Python 3.6, <a href="https://docs.python.org/3/tutorial/inputoutput.html#formatted-string-literals">f-strings</a> have become a <em>very</em> popular way to format strings. They are concise, readable, and powerful.</p>
<p>In fact, they’re <em>so</em> delightful that many developers use f-strings for everything… even when they shouldn’t!</p>
<p>Alas, f-strings are often dangerously (mis)used to format strings that contain user input. I’ve seen f-strings used for SQL (<code>f"SELECT * FROM users WHERE name = '{user_name}'"</code>) and for HTML (<code>f"&lt;div&gt;{user_name}&lt;/div&gt;"</code>). These are not safe! If <code>user_name</code> contains a malicious value, it can lead to <a href="https://owasp.org/www-community/attacks/SQL_Injection">SQL injection</a> or <a href="https://owasp.org/www-community/attacks/xss/">cross-site scripting</a>.</p>
<p>Template strings are a <em>generalization</em> of Python’s f-strings. Whereas f-strings immediately become a string, t-strings evaluate to a new type, <code>string.templatelib.Template</code>:</p>
<pre tabindex="0" data-language="python"><code><span><span>from</span><span> string.templatelib </span><span>import</span><span> Template</span></span>
<span><span>name </span><span>=</span><span> "World"</span></span>
<span><span>template: Template </span><span>=</span><span> t</span><span>"Hello </span><span>{name}</span><span>!"</span></span>
<span></span></code></pre>
<p>Importantly, <code>Template</code> instances are <em>not</em> strings. The <code>Template</code> type does not provide its own <code>__str__()</code> implementation, which is to say that calling <code>str(my_template)</code> does not return a useful value. Templates <em>must</em> be processed before they can be used; that processing code can be written by the developer or provided by a library and can safely escape the dynamic content.</p>
<p>We can imagine a library that provides an <code>html()</code> function that takes a <code>Template</code> and returns a safely escaped string:</p>
<pre tabindex="0" data-language="python"><code><span><span>evil </span><span>=</span><span> "&lt;script&gt;alert('bad')&lt;/script&gt;"</span></span>
<span><span>template </span><span>=</span><span> t</span><span>"&lt;p&gt;</span><span>{evil}</span><span>&lt;/p&gt;"</span></span>
<span><span>safe </span><span>=</span><span> html(template)</span></span>
<span><span>assert</span><span> safe </span><span>==</span><span> "&lt;p&gt;&amp;lt;script&amp;gt;alert('bad')&amp;lt;/script&amp;gt;&lt;/p&gt;"</span></span>
<span></span></code></pre>
<p>Of course, t-strings are useful for more than just safety; they also allow for more flexible string processing. For example, that <code>html()</code> function could return a new type, <code>HTMLElement</code>. It could also accept all sorts of useful substitutions in the HTML itself:</p>
<pre tabindex="0" data-language="python"><code><span><span>attributes </span><span>=</span><span> {</span><span>"src"</span><span>: </span><span>"roquefort.jpg"</span><span>, </span><span>"alt"</span><span>: </span><span>"Yum"</span><span>}</span></span>
<span><span>template </span><span>=</span><span> t</span><span>"&lt;img </span><span>{attributes}</span><span> /&gt;"</span></span>
<span><span>element </span><span>=</span><span> html(template)</span></span>
<span><span>assert</span><span> str</span><span>(element) </span><span>==</span><span> "&lt;img src='roquefort.jpg' alt='Yum' /&gt;"</span></span>
<span></span></code></pre>
<p>If you’ve worked with JavaScript, t-strings may feel familiar. They are the pythonic parallel to JavaScript’s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates">tagged templates</a>.</p>
<h4 id="how-do-i-work-with-t-strings">How do I work with t-strings?</h4>
<p>To support processing, <code>Template</code>s give developers access to the string and its interpolated values <em>before</em> they are combined into a final string.</p>
<p>The <code>.strings</code> and <code>.values</code> properties of a <code>Template</code> return tuples:</p>
<pre tabindex="0" data-language="python"><code><span><span>name </span><span>=</span><span> "World"</span></span>
<span><span>template </span><span>=</span><span> t</span><span>"Hello </span><span>{name}</span><span>!"</span></span>
<span><span>assert</span><span> template.strings </span><span>==</span><span> (</span><span>"Hello "</span><span>, </span><span>"!"</span><span>)</span></span>
<span><span>assert</span><span> template.values </span><span>==</span><span> (name,)</span></span>
<span></span></code></pre>
<p>There is always one more (possibly empty) string than value. That is, <code>t"".strings == ("",)</code> and <code>t"{name}".strings == ("", "")</code>.</p>
<p>As a shortcut, it’s also possible to iterate over a <code>Template</code>:</p>
<pre tabindex="0" data-language="python"><code><span><span>name </span><span>=</span><span> "World"</span></span>
<span><span>template </span><span>=</span><span> t</span><span>"Hello </span><span>{name}</span><span>!"</span></span>
<span><span>contents </span><span>=</span><span> list</span><span>(template)</span></span>
<span><span>assert</span><span> contents[</span><span>0</span><span>] </span><span>==</span><span> "Hello "</span></span>
<span><span>assert</span><span> contents[</span><span>1</span><span>].value </span><span>==</span><span> name</span></span>
<span><span>assert</span><span> contents[</span><span>2</span><span>] </span><span>==</span><span> "!"</span></span>
<span></span></code></pre>
<p>Developers writing complex processing code can also access the gory details of each interpolation:</p>
<pre tabindex="0" data-language="python"><code><span><span>name </span><span>=</span><span> "World"</span></span>
<span><span>template </span><span>=</span><span> t</span><span>"Hello </span><span>{name</span><span>!s:&gt;8</span><span>}</span><span>!"</span></span>
<span><span>assert</span><span> template.interpolations[</span><span>0</span><span>].value </span><span>==</span><span> name</span></span>
<span><span>assert</span><span> template.interpolations[</span><span>0</span><span>].expression </span><span>==</span><span> "name"</span></span>
<span><span>assert</span><span> template.interpolations[</span><span>0</span><span>].conversion </span><span>==</span><span> "s"</span></span>
<span><span>assert</span><span> template.interpolations[</span><span>0</span><span>].format_spec </span><span>==</span><span> "&gt;8"</span></span>
<span></span></code></pre>
<p>In addition to supporting the literal (<code>t"foo"</code>) form, <code>Template</code>s can also be instantiated directly:</p>
<pre tabindex="0" data-language="python"><code><span><span>from</span><span> string.templatelib </span><span>import</span><span> Template, Interpolation</span></span>
<span><span>template </span><span>=</span><span> Template(</span></span>
<span><span>	"Hello "</span><span>,</span></span>
<span><span>	Interpolation(</span><span>value</span><span>=</span><span>"World"</span><span>, </span><span>expression</span><span>=</span><span>"name"</span><span>),</span></span>
<span><span>	"!"</span></span>
<span><span>)</span></span>
<span></span></code></pre>
<p>Strings and interpolations can be provided to the <code>Template</code> constructor in any order.</p>
<h4 id="a-simple-t-string-example">A simple t-string example</h4>
<p>Let’s say we wanted to write code to convert all substituted words into pig latin. All it takes is a simple function:</p>
<pre tabindex="0" data-language="python"><code><span><span>def</span><span> pig_latin</span><span>(template: Template) -&gt; </span><span>str</span><span>:</span></span>
<span><span>	"""Convert a Template to pig latin."""</span></span>
<span><span>	result </span><span>=</span><span> []</span></span>
<span><span>	for</span><span> item </span><span>in</span><span> template:</span></span>
<span><span>		if</span><span> isinstance</span><span>(item, </span><span>str</span><span>):</span></span>
<span><span>			result.append(item)</span></span>
<span><span>		else</span><span>:</span></span>
<span><span>			word </span><span>=</span><span> item.value</span></span>
<span><span>			if</span><span> word </span><span>and</span><span> word[</span><span>0</span><span>] </span><span>in</span><span> "aeiou"</span><span>:</span></span>
<span><span>				result.append(word </span><span>+</span><span> "yay"</span><span>)</span></span>
<span><span>			else</span><span>:</span></span>
<span><span>				result.append(word[</span><span>1</span><span>:] </span><span>+</span><span> word[</span><span>0</span><span>] </span><span>+</span><span> "ay"</span><span>)</span></span>
<span><span>	return</span><span> ""</span><span>.join(result)</span></span>
<span></span>
<span><span>name </span><span>=</span><span> "world"</span></span>
<span><span>template </span><span>=</span><span> t</span><span>"Hello </span><span>{name}</span><span>!"</span></span>
<span><span>assert</span><span> pig_latin(template) </span><span>==</span><span> "Hello orldway!"</span></span>
<span></span></code></pre>
<p>This is a goofy example; if you’d like to see some <em>less</em> silly examples, check out the <a href="https://github.com/davepeck/pep750-examples/">PEP 750 examples repository</a>.</p>
<h4 id="whats-next-once-t-strings-ship">What’s next once t-strings ship?</h4>
<p>T-strings are a powerful new feature that will make Python string processing safer and more flexible. I hope to see them used in all sorts of libraries and frameworks, especially those that deal with user input.</p>
<p>In addition, I hope that the tooling ecosystem will adapt to support t-strings. For instance, I’d love to see <code>black</code> and <code>ruff</code> format t-string <em>contents</em>, and <code>vscode</code> <em>color</em> those contents, if they’re a common type like HTML or SQL.</p>
<p>It’s been fun to get to know and work with <a href="https://github.com/jimbaker">Jim</a>, <a href="https://github.com/pauleveritt">Paul</a>, <a href="https://github.com/koxudaxi">Koudai</a>, <a href="https://github.com/lysnikolaou">Lysandros</a>, and <a href="https://en.wikipedia.org/wiki/Guido_van_Rossum">Guido</a> on this project and to interact with <a href="https://discuss.python.org/t/pep750-template-strings-new-updates/71594">many more members of the Python community</a> online without whose input PEP 750 simply wouldn’t have come together. I can’t wait to see what developers build with t-strings once they ship!</p> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Effect of Deactivating Facebook and Instagram on Users' Emotional State (390 pts)]]></title>
            <link>https://www.nber.org/papers/w33697</link>
            <guid>43748486</guid>
            <pubDate>Mon, 21 Apr 2025 04:24:15 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nber.org/papers/w33697">https://www.nber.org/papers/w33697</a>, See on <a href="https://news.ycombinator.com/item?id=43748486">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    
    <div>
      
              <p>
                  <span>
      <a href="https://www.nber.org/people/matthew_gentzkow">Matthew Gentzkow</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/benjamin_wittenbrink">Benjamin Wittenbrink</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/juan_carlos_cisneros">Juan Carlos Cisneros</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/adriana_crespo-tenorio">Adriana Crespo-Tenorio</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/ddimmery">Drew Dimmery</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/deen_freelon">Deen Freelon</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/sandra_gonzalez-bailon">Sandra González-Bailón</a>,     </span>
                      <span>
        <span>
      <a href="https://www.nber.org/people/andyguess">Andrew M. Guess</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/young_mie_kim">Young Mie Kim</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/david_lazer">David Lazer</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/neil_malhotra">Neil Malhotra</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/devra_moehler">Devra Moehler</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/sameer_nair-desai">Sameer Nair-Desai</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/brendan_nyhan">Brendan Nyhan</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/jennifer_pan">Jennifer Pan</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/jaime_settle">Jaime Settle</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/emily_thorson">Emily Thorson</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/rebekah_tromble">Rebekah Tromble</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/carlos_velasco_rivera">Carlos Velasco Rivera</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/arjun_wilkins">Arjun Wilkins</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/magdalena_wojcieszak">Magdalena Wojcieszak</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/annie_franco">Annie Franco</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/chad_kiewiet_de_jonge">Chad Kiewiet de Jonge</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/winter_mason">Winter Mason</a>,     </span>
                  <span>
      <a href="https://www.nber.org/people/natalie_jomini_stroud">Natalie Jomini Stroud</a>    </span>
                  <span>
       &amp; <a href="https://www.nber.org/people/joshua_tucker">Joshua A. Tucker</a>    </span>
        </span>
    
      

    </p></div>
    
    <div>
        <p><span>Working Paper</span> 33697
  </p>

        <p><span>DOI</span> 10.3386/w33697
  </p>

        <p><span>Issue Date</span> <time datetime="2025-04-11T12:00:00Z">April 2025</time>

  </p>

          </div>
  </div><div>
    <p>
We estimate the effect of social media deactivation on users’ emotional state in two large randomized experiments before the 2020 U.S. election. People who deactivated Facebook for the six weeks before the election reported a 0.060 standard deviation improvement in an index of happiness, depression, and anxiety, relative to controls who deactivated for just the first of those six weeks. People who deactivated Instagram for those six weeks reported a 0.041 standard deviation improvement relative to controls. Exploratory analysis suggests the Facebook effect is driven by people over 35, while the Instagram effect is driven by women under 25.
</p>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[I thought I bought a camera, but no DJI sold me a LICENSE to use their camera [video] (315 pts)]]></title>
            <link>https://www.youtube.com/watch?v=aUOnQ_boqCw</link>
            <guid>43748133</guid>
            <pubDate>Mon, 21 Apr 2025 02:47:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.youtube.com/watch?v=aUOnQ_boqCw">https://www.youtube.com/watch?v=aUOnQ_boqCw</a>, See on <a href="https://news.ycombinator.com/item?id=43748133">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Reverse engineering the obfuscated TikTok VM (315 pts)]]></title>
            <link>https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering</link>
            <guid>43747921</guid>
            <pubDate>Mon, 21 Apr 2025 01:59:03 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering">https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering</a>, See on <a href="https://news.ycombinator.com/item?id=43747921">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">TikTok VM Reverse Engineering (webmssdk.js)</h2><a id="user-content-tiktok-vm-reverse-engineering-webmssdkjs" aria-label="Permalink: TikTok VM Reverse Engineering (webmssdk.js)" href="#tiktok-vm-reverse-engineering-webmssdkjs"></a></p>
<p dir="auto">This project is for reverse engineering the TikTok Virtual Machine (VM).</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Overview</h2><a id="user-content-overview" aria-label="Permalink: Overview" href="#overview"></a></p>
<p dir="auto">TikTok uses a custom virtual machine (VM) as part of its obfuscation and security layers. This project includes tools to:</p>
<ul dir="auto">
<li><strong>Deobfuscate</strong> <code>webmssdk.js</code> that has the virtual machine.</li>
<li><strong>Decompile</strong> TikTok’s virtual machine instructions into readable form.</li>
<li><strong>Script Inject</strong> Replace webmssdk.js with the deobfuscated VM <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/injector.js">injector</a>.</li>
<li><strong>Sign URLs</strong> Generate signed URLs which can be used to perform auth-based requests eg. Post comments.</li>
</ul>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Deobfuscating</h2><a id="user-content-deobfuscating" aria-label="Permalink: Deobfuscating" href="#deobfuscating"></a></p>
<p dir="auto">When looking at <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/deobfVersions/raw.js">webmssdk.js</a> you're met with a
heavily obfuscated file. The main method of obfuscating Javascript
is to take advantage of bracket notation which let's you index a variable
using another variable.</p>
<p dir="auto">So when you see something like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Line 3391 of ./deobfVersions/raw.js
r[Gb[301]](Gb[57], e))"><pre><span>// Line 3391 of ./deobfVersions/raw.js</span>
<span>r</span><span>[</span><span>Gb</span><span>[</span><span>301</span><span>]</span><span>]</span><span>(</span><span>Gb</span><span>[</span><span>57</span><span>]</span><span>,</span> <span>e</span><span>)</span><span>)</span></pre></div>
<p dir="auto">You have absolutely no idea what it's indexing.</p>
<p dir="auto">Each use of this method is using an array <code>Gb</code> defined as</p>
<div dir="auto" data-snippet-clipboard-copy-content="    var Gb = [&quot;ydTGHdFNV&quot;, &quot;sNxpGNHMrpLV&quot;, &quot;xyrNMLEN Fpp rpMu&quot;, &quot;ydWyNe&quot;, ...].map(function(a) {
        return a.split(&quot;&quot;).map(function(c) {
            return &quot;LsfVNxutyOcrEMpYAGdFHneaUKRXSgoJDbhqICzPZklivTmWBwQj&quot;.indexOf(c) == -1 ? c : &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;[&quot;LsfVNxutyOcrEMpYAGdFHneaUKRXSgoJDbhqICzPZklivTmWBwQj&quot;.indexOf(c)]
        }).join(&quot;&quot;)
    });"><pre>    <span>var</span> <span>Gb</span> <span>=</span> <span>[</span><span>"ydTGHdFNV"</span><span>,</span> <span>"sNxpGNHMrpLV"</span><span>,</span> <span>"xyrNMLEN Fpp rpMu"</span><span>,</span> <span>"ydWyNe"</span><span>,</span> ...<span>]</span><span>.</span><span>map</span><span>(</span><span>function</span><span>(</span><span>a</span><span>)</span> <span>{</span>
        <span>return</span> <span>a</span><span>.</span><span>split</span><span>(</span><span>""</span><span>)</span><span>.</span><span>map</span><span>(</span><span>function</span><span>(</span><span>c</span><span>)</span> <span>{</span>
            <span>return</span> <span>"LsfVNxutyOcrEMpYAGdFHneaUKRXSgoJDbhqICzPZklivTmWBwQj"</span><span>.</span><span>indexOf</span><span>(</span><span>c</span><span>)</span> <span>==</span> <span>-</span><span>1</span> ? <span>c</span> : <span>"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span>[</span><span>"LsfVNxutyOcrEMpYAGdFHneaUKRXSgoJDbhqICzPZklivTmWBwQj"</span><span>.</span><span>indexOf</span><span>(</span><span>c</span><span>)</span><span>]</span>
        <span>}</span><span>)</span><span>.</span><span>join</span><span>(</span><span>""</span><span>)</span>
    <span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">As you can see we can't even read this either as it's all encoded
using this string <code>"LsfVNxutyOcrEMpYAGdFHneaUKRXSgoJDbhqICzPZklivTmWBwQj"</code>.</p>
<p dir="auto">Because this code get's executed immediately we can simply take this snippet
and run it in any console and retrieve:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[
    &quot;isTrusted&quot;,
    &quot;beforeunload&quot;,
    &quot;filename too long&quot;,
    &quot;isView&quot;,
    ...
]"><pre><span>[</span>
    <span>"isTrusted"</span><span>,</span>
    <span>"beforeunload"</span><span>,</span>
    <span>"filename too long"</span><span>,</span>
    <span>"isView"</span><span>,</span>
    ...
<span>]</span></pre></div>
<p dir="auto">We can now see each of these strings, therefore we can use RegEx to go through
the script and replace all uses of the array as seen <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/deobfuscation/changeNotation.js#L322">here</a>
It will also convert the bracket notation back to readable dot notation.</p>
<p dir="auto">After that we've left with <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/deobfVersions/ems1.js">webmssdk1</a>.</p>
<p dir="auto">The example from above now looks like this</p>
<div dir="auto" data-snippet-clipboard-copy-content="r.addEventListener(&quot;abort&quot;, e),"><pre><span>r</span><span>.</span><span>addEventListener</span><span>(</span><span>"abort"</span><span>,</span> <span>e</span><span>)</span><span>,</span></pre></div>
<p dir="auto">Much better.</p>
<p dir="auto">Another significant obfuscation method used is for disguising function calls.</p>
<p dir="auto">Each function is defined in an array <code>Ab</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="  var Ab = [function(e) {
      return &quot;[object Array]&quot; === Object.prototype.toString.call(e)
  }
  , function(e) {
      return e &amp;&amp; e.__esModule &amp;&amp; Object.prototype.hasOwnProperty.call(e, &quot;default&quot;) ? e.default : e
  }
  , function() {
      var Ga;
      Ga = [0, 1],
      (je = !Ga[0],
      le &amp;&amp; (setTimeout(function() {
          document.dispatchEvent(new Event(pe))
      }, Ga[1]),
      document.removeEventListener(&quot;DOMContentLoaded&quot;, Ab[40]),
      document.removeEventListener(&quot;readystatechange&quot;, Ab[75])))
  }
  ...]"><pre>  <span>var</span> <span>Ab</span> <span>=</span> <span>[</span><span>function</span><span>(</span><span>e</span><span>)</span> <span>{</span>
      <span>return</span> <span>"[object Array]"</span> <span>===</span> <span>Object</span><span>.</span><span>prototype</span><span>.</span><span>toString</span><span>.</span><span>call</span><span>(</span><span>e</span><span>)</span>
  <span>}</span>
  <span>,</span> <span>function</span><span>(</span><span>e</span><span>)</span> <span>{</span>
      <span>return</span> <span>e</span> <span>&amp;&amp;</span> <span>e</span><span>.</span><span>__esModule</span> <span>&amp;&amp;</span> <span>Object</span><span>.</span><span>prototype</span><span>.</span><span>hasOwnProperty</span><span>.</span><span>call</span><span>(</span><span>e</span><span>,</span> <span>"default"</span><span>)</span> ? <span>e</span><span>.</span><span>default</span> : <span>e</span>
  <span>}</span>
  <span>,</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
      <span>var</span> <span>Ga</span><span>;</span>
      <span>Ga</span> <span>=</span> <span>[</span><span>0</span><span>,</span> <span>1</span><span>]</span><span>,</span>
      <span>(</span><span>je</span> <span>=</span> <span>!</span><span>Ga</span><span>[</span><span>0</span><span>]</span><span>,</span>
      <span>le</span> <span>&amp;&amp;</span> <span>(</span><span>setTimeout</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
          <span>document</span><span>.</span><span>dispatchEvent</span><span>(</span><span>new</span> <span>Event</span><span>(</span><span>pe</span><span>)</span><span>)</span>
      <span>}</span><span>,</span> <span>Ga</span><span>[</span><span>1</span><span>]</span><span>)</span><span>,</span>
      <span>document</span><span>.</span><span>removeEventListener</span><span>(</span><span>"DOMContentLoaded"</span><span>,</span> <span>Ab</span><span>[</span><span>40</span><span>]</span><span>)</span><span>,</span>
      <span>document</span><span>.</span><span>removeEventListener</span><span>(</span><span>"readystatechange"</span><span>,</span> <span>Ab</span><span>[</span><span>75</span><span>]</span><span>)</span><span>)</span><span>)</span>
  <span>}</span>
  <span>.</span><span>.</span><span>.</span><span>]</span></pre></div>
<p dir="auto">And it used by calling <code>Ab[index](args)</code> like:</p>

<p dir="auto">When using common IDE's if we click on this function it will just bring us to
the start of the array making it difficult to keep track of what function call
is calling what function.</p>
<p dir="auto">We can make this readable by:</p>
<ul dir="auto">
<li>Taking the array</li>
<li>Replace each of the function element with it's own standard function calling it <code>function Abindex(args)</code></li>
<li>Replace each call to <code>Ab[index](args)</code> with <code>Abindex(args)</code></li>
</ul>
<p dir="auto">We can do this by using the AST form of the script via bapel as seen <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/deobfuscation/bapel.js#L55">here</a></p>
<p dir="auto">Which gives us <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/deobfVersions/ems2.js#L1798">this</a></p>
<p dir="auto">The Virtual Machine part of the script, specifically when executing the bytecode
is a nested if else statement as seen <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/deobfVersions/ems2.js#L2235">here</a></p>
<p dir="auto">It is actually just a normal switch case but has been disguised pretty well. After manually
doing some of the cases, AI was able to help me out and do the rest. Which gave me <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/handleBytecode.js">this</a>,
which looks pretty standard for a bytecode VM.</p>
<p dir="auto">When debugging the Virtual Machine later and seeing which functions it uses
I was able to tell what it's doing and changed some of var names.</p>
<p dir="auto">After all of this and a few more small obfuscation techniques
<a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/latestDeobf.js">here</a> is the latest version of the file.</p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Decrypting Bytecode</h2><a id="user-content-decrypting-bytecode" aria-label="Permalink: Decrypting Bytecode" href="#decrypting-bytecode"></a></p>
<p dir="auto">With the file fully deobfuscated, figuring out the functionality was much easier,
I easily found how the VM was being initiated <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/latestDeobf.js#L3041">here</a>.</p>
<p dir="auto">The bytecode is stored as a long string that's all been XOR'ed with a key that
lies within the string.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Line 3046 of latestDeobf.js
// Getting XOR key
for (var t = atob(payload), r = 0, n = 4; n < 8; ++n) r += t.charCodeAt(n);

// Decryping bytecode
unZip(Uint8Array.from(t.slice(8), XOR, r % 256), {  i: 2 }, t &amp;&amp; t.out, t &amp;&amp; t.dictionary),

// Extracting strings, functions and metadata for each function
for (var n = leb128(t), o = 0; o < n; ++o) strings.push(Ab27(t)); 
i = leb128(t);
for (o = 0; o < i; ++o) {
  for (var argsLength = leb128(t), isStrictMode = Boolean(leb128(t)), exceptionHandlers = new Array(), p = leb128(t), m = 0; m < p; ++m)    exceptionHandlers.push([leb128(t), leb128(t), leb128(t), leb128(t)]);
  for (var instructions = new Array(), h = leb128(t), v = 0; v < h; ++v) instructions.push(leb128(t));
  instructionSets.push([instructions, argsLength, isStrictMode, exceptionHandlers]);
}"><pre><span>// Line 3046 of latestDeobf.js</span>
<span>// Getting XOR key</span>
<span>for</span> <span>(</span><span>var</span> <span>t</span> <span>=</span> <span>atob</span><span>(</span><span>payload</span><span>)</span><span>,</span> <span>r</span> <span>=</span> <span>0</span><span>,</span> <span>n</span> <span>=</span> <span>4</span><span>;</span> <span>n</span> <span>&lt;</span> <span>8</span><span>;</span> <span>++</span><span>n</span><span>)</span> <span>r</span> <span>+=</span> <span>t</span><span>.</span><span>charCodeAt</span><span>(</span><span>n</span><span>)</span><span>;</span>

<span>// Decryping bytecode</span>
<span>unZip</span><span>(</span><span>Uint8Array</span><span>.</span><span>from</span><span>(</span><span>t</span><span>.</span><span>slice</span><span>(</span><span>8</span><span>)</span><span>,</span> <span>XOR</span><span>,</span> <span>r</span> <span>%</span> <span>256</span><span>)</span><span>,</span> <span>{</span>  <span>i</span>: <span>2</span> <span>}</span><span>,</span> <span>t</span> <span>&amp;&amp;</span> <span>t</span><span>.</span><span>out</span><span>,</span> <span>t</span> <span>&amp;&amp;</span> <span>t</span><span>.</span><span>dictionary</span><span>)</span><span>,</span>

<span>// Extracting strings, functions and metadata for each function</span>
<span>for</span> <span>(</span><span>var</span> <span>n</span> <span>=</span> <span>leb128</span><span>(</span><span>t</span><span>)</span><span>,</span> <span>o</span> <span>=</span> <span>0</span><span></span><span>;</span> <span>o</span> <span>&lt;</span> <span>n</span><span>;</span> <span>++</span><span>o</span><span>)</span> <span>strings</span><span>.</span><span>push</span><span>(</span><span>Ab27</span><span>(</span><span>t</span><span>)</span><span>)</span><span>;</span> 
<span>i</span> <span>=</span> <span>leb128</span><span>(</span><span>t</span><span>)</span><span>;</span>
<span>for</span> <span>(</span><span>o</span> <span>=</span> <span>0</span><span>;</span> <span>o</span> <span>&lt;</span> <span>i</span><span>;</span> <span>++</span><span>o</span><span>)</span> <span>{</span>
  <span>for</span> <span>(</span><span>var</span> <span>argsLength</span> <span>=</span> <span>leb128</span><span>(</span><span>t</span><span>)</span><span>,</span> <span>isStrictMode</span> <span>=</span> <span>Boolean</span><span>(</span><span>leb128</span><span>(</span><span>t</span><span>)</span><span>)</span><span>,</span> <span>exceptionHandlers</span> <span>=</span> <span>new</span> <span>Array</span><span>(</span><span>)</span><span>,</span> <span>p</span> <span>=</span> <span>leb128</span><span>(</span><span>t</span><span>)</span><span>,</span> <span>m</span> <span>=</span> <span>0</span><span>;</span> <span>m</span> <span>&lt;</span> <span>p</span><span>;</span> <span>++</span><span>m</span><span>)</span>    <span>exceptionHandlers</span><span>.</span><span>push</span><span>(</span><span>[</span><span>leb128</span><span>(</span><span>t</span><span>)</span><span>,</span> <span>leb128</span><span>(</span><span>t</span><span>)</span><span>,</span> <span>leb128</span><span>(</span><span>t</span><span>)</span><span>,</span> <span>leb128</span><span>(</span><span>t</span><span>)</span><span>]</span><span>)</span><span>;</span>
  <span>for</span> <span>(</span><span>var</span> <span>instructions</span> <span>=</span> <span>new</span> <span>Array</span><span>(</span><span>)</span><span>,</span> <span>h</span> <span>=</span> <span>leb128</span><span>(</span><span>t</span><span>)</span><span>,</span> <span>v</span> <span>=</span> <span>0</span><span>;</span> <span>v</span> <span>&lt;</span> <span>h</span><span>;</span> <span>++</span><span>v</span><span>)</span> <span>instructions</span><span>.</span><span>push</span><span>(</span><span>leb128</span><span>(</span><span>t</span><span>)</span><span>)</span><span>;</span>
  <span>instructionSets</span><span>.</span><span>push</span><span>(</span><span>[</span><span>instructions</span><span>,</span> <span>argsLength</span><span>,</span> <span>isStrictMode</span><span>,</span> <span>exceptionHandlers</span><span>]</span><span>)</span><span>;</span>
<span>}</span></pre></div>
<p dir="auto">NOTE: The string was gZip-ed and each value was leb128 encoded both for compression</p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Virtual Machine decompiling</h2><a id="user-content-virtual-machine-decompiling" aria-label="Permalink: Virtual Machine decompiling" href="#virtual-machine-decompiling"></a></p>
<p dir="auto">TikTok is using a full-fledged bytecode VM, if you browse through <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/vm.js">it</a>, it supports
scopes, nested functions and exception handling. This isn't a typical VM and shows that
it is definitely sophiscated.</p>
<p dir="auto">To be able to write a form of decompilation I simply went through each of the cases
and wrote appropriate code for each one, and any case that jumps to another position
for loops like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="case 2:
    var a = instructions[index++];
    stack[pointer] ? --pointer : index += a;
    break;"><pre>case <span>2</span>:
    <span>var</span> <span>a</span> <span>=</span> <span>instructions</span><span>[</span><span>index</span><span>++</span><span>]</span><span>;</span>
    <span>stack</span><span>[</span><span>pointer</span><span>]</span> ? <span>--</span><span>pointer</span> : <span>index</span> <span>+=</span> <span>a</span><span>;</span>
    <span>break</span><span>;</span></pre></div>
<p dir="auto">I would simply stop it from doing so:</p>
<div dir="auto" data-snippet-clipboard-copy-content="case 2:
    var a = instructions[index++];
    //stack[pointer] ? --pointer : index += a;

    addCode(`// if (!v${pointer}) skip ${a} to ${index + a}`, byteCodePos)
    break;"><pre>case <span>2</span>:
    <span>var</span> <span>a</span> <span>=</span> <span>instructions</span><span>[</span><span>index</span><span>++</span><span>]</span><span>;</span>
    <span>//stack[pointer] ? --pointer : index += a;</span>

    <span>addCode</span><span>(</span><span>`// if (!v<span><span>${</span><span>pointer</span><span>}</span></span>) skip <span><span>${</span><span>a</span><span>}</span></span> to <span><span>${</span><span>index</span> <span>+</span> <span>a</span><span>}</span></span>`</span><span>,</span> <span>byteCodePos</span><span>)</span>
    <span>break</span><span>;</span></pre></div>
<p dir="auto">After doing this for all the cases I dumped each file <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/functions">here</a>.
It's not completely readable but you should be able to make out a general idea
of what each function is doing, for example <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/functions/VM223.js">VM223</a> which is
generating random characters.</p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Debugging</h2><a id="user-content-debugging" aria-label="Permalink: Debugging" href="#debugging"></a></p>
<p dir="auto">As this is a Javascript file executed on the web, it is actually possible to replace
the normal <code>webmssdk.js</code> with the deobfuscated file and use TikTok normally.</p>
<p dir="auto">This can be achieved by using two browser extensions known as <a href="https://chromewebstore.google.com/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en-GB" rel="nofollow">Tampermonkey</a> for executing
custom code and <a href="https://chromewebstore.google.com/detail/disable-content-security/ieelmcmcagommplceebfedjlakkhpden?hl=en-GB&amp;pli=1" rel="nofollow">CSP</a> to disable CSP so I can fetch files from blocked origins. This is so I
can put <code>latestDeobf.js</code> in my own file server and have it be fetched each time, this is so I can easily
edit the file and let the changes take effect each time I refresh. This makes it much easier to bebug
when reversing functions.</p>
<p dir="auto">The script can be found <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/injector.js">here</a></p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Requests</h2><a id="user-content-requests" aria-label="Permalink: Requests" href="#requests"></a></p>
<p dir="auto">Now that we have deobfuscated the file and decompiled the VM we can
start to reverse any function we want and figure out what it's doing.</p>
<p dir="auto">When you make a request to the server it usually consists of 3 additional headers.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Header</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>msToken</code></td>
<td>Sent by the server and reissued on each request.</td>
</tr>
<tr>
<td><code>X-Bogus</code></td>
<td>Generated by webmssdk.js based on request.</td>
</tr>
<tr>
<td><code>_signature</code></td>
<td>Generated by webmssdk.js based on request.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">When making a request that doesn't require authentication like querying a user. Only <code>X-Bogus</code> is
needed to be generated which can be done using <code>window.frontierSign</code>. <code>_signature</code> isn't needed
and any <code>msToken</code> can be used.</p>
<p dir="auto">This popular <a href="https://github.com/davidteather/TikTok-Api">API</a> let's you make those requests.
It uses a webdriver library called <a href="https://playwright.dev/python/docs/api/class-playwright" rel="nofollow">playwright</a>, that simply sets up a browser instance, so it can easily call <code>window.frontierSign</code>.</p>
<p dir="auto">When it comes to making authentication-based requests like posting a comment, <code>_signature</code> is needed
and isn't exposed to <code>window</code>.</p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Signer</h2><a id="user-content-signer" aria-label="Permalink: Signer" href="#signer"></a></p>
<p dir="auto">The inital function call for each request is <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/functions/VM86.js">VM86</a> which then calls</p>
<p dir="auto"><a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/functions/VM113.js">VM113</a> for <code>X-bogus</code></p>
<p dir="auto"><a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/functions/VM189.js">VM189</a> for <code>_signature</code></p>
<p dir="auto">I was able to write <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/signer.js">signer</a> which
succesfully signs URL's.</p>
<p dir="auto">Here's a demo of posting a comment and checking it using a
private browser to ensure it's successful.</p>
<details open="">
  <summary>
    
    <span aria-label="Video description PostCommentTest1.mp4">PostCommentTest1.mp4</span>
    <span></span>
  </summary>

  <video src="https://private-user-images.githubusercontent.com/50531317/435448001-746aa1a1-d171-487a-819b-5b0ca1894c47.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDUyMjA5MDEsIm5iZiI6MTc0NTIyMDYwMSwicGF0aCI6Ii81MDUzMTMxNy80MzU0NDgwMDEtNzQ2YWExYTEtZDE3MS00ODdhLTgxOWItNWIwY2ExODk0YzQ3Lm1wND9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNDIxVDA3MzAwMVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWY4MDE1ZWMwMTVlZWMzMzA0OTFhM2U3NmYzOGRjYTAyNTYwZjY4Zjk2Y2FiMmM0NzY1NTNjMTg4ZWY1ZTRmMTkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.jydUDrg3C7mj_xsXrRBA1-FfxEXN3PfYOKQa_fotZVM" data-canonical-src="https://private-user-images.githubusercontent.com/50531317/435448001-746aa1a1-d171-487a-819b-5b0ca1894c47.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDUyMjA5MDEsIm5iZiI6MTc0NTIyMDYwMSwicGF0aCI6Ii81MDUzMTMxNy80MzU0NDgwMDEtNzQ2YWExYTEtZDE3MS00ODdhLTgxOWItNWIwY2ExODk0YzQ3Lm1wND9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNDIxVDA3MzAwMVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWY4MDE1ZWMwMTVlZWMzMzA0OTFhM2U3NmYzOGRjYTAyNTYwZjY4Zjk2Y2FiMmM0NzY1NTNjMTg4ZWY1ZTRmMTkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.jydUDrg3C7mj_xsXrRBA1-FfxEXN3PfYOKQa_fotZVM" controls="controls" muted="muted">

  </video>
</details>

<p dir="auto">NOTE: There are also some bot protection methods such as mouse tracking (<a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/functions/VM120.js">VM120</a>)
and environment checking (<a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/functions/VM265.js">VM265</a>) within <a href="https://github.com/LukasOgunfeitimi/TikTok-ReverseEngineering/blob/main/decompiler/functions/VM86.js">VM86</a>, but it is a completely client-sided check and doesn't communicate
with the server about, so it can be ignored when generating the signatures.</p>
<hr>
<p dir="auto"><h2 tabindex="-1" dir="auto">Extra info</h2><a id="user-content-extra-info" aria-label="Permalink: Extra info" href="#extra-info"></a></p>
<ul dir="auto">
<li><strong>Note:</strong> The TikTok VM is constantly changing with new releases. There's a high chance the main algorithms will change and decompilation of the new VM is needed.</li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Pete Hegseth shared Yemen attack details in second Signal chat (155 pts)]]></title>
            <link>https://www.theguardian.com/us-news/2025/apr/20/pete-hegseth-signal-chat-yemen-attack</link>
            <guid>43747310</guid>
            <pubDate>Sun, 20 Apr 2025 23:27:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/us-news/2025/apr/20/pete-hegseth-signal-chat-yemen-attack">https://www.theguardian.com/us-news/2025/apr/20/pete-hegseth-signal-chat-yemen-attack</a>, See on <a href="https://news.ycombinator.com/item?id=43747310">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="maincontent"><p>Before the US launched military strikes on <a href="https://www.theguardian.com/world/yemen" data-link-name="in body link">Yemen</a> in March, <a href="https://www.theguardian.com/us-news/pete-hegseth" data-link-name="in body link">Pete Hegseth</a>, the defense secretary, sent detailed information about the planned attacks to a private Signal group chat that he created himself, which included his wife, his brother and about a dozen other people, <a href="https://www.nytimes.com/2025/04/20/us/politics/hegseth-yemen-attack-second-signal-chat.html?smid=nytcore-ios-share&amp;referringSource=articleShare" data-link-name="in body link">the New York Times reported</a> on Sunday.</p><p>The Guardian has independently confirmed the existence of Hegseth’s own private group chat.</p><p>According to unnamed sources familiar with the chat who spoke to the Times, Hegseth sent the private group of his personal associates some of the same information, including the flight schedules for the F/A-18 Hornets that would strike Houthi rebel targets in Yemen, that he also shared with another Signal group of top officials that was created by Mike Waltz, the national security adviser.</p><p>The existence of the Signal group chat created by Waltz, in which <a href="https://www.theguardian.com/us-news/2025/mar/24/journalist-trump-yemen-war-chat-reaction" data-link-name="in body link">detailed attack plans were divulged</a> by Hegseth to other Trump administration officials on the private messaging app, was <a href="https://www.theatlantic.com/politics/archive/2025/03/trump-administration-accidentally-texted-me-its-war-plans/682151/" data-link-name="in body link">made public last month</a> by Jeffrey Goldberg of the Atlantic, who had been accidentally added to the group by Waltz.</p><figure id="06b68203-5ef2-4f56-bfd6-b86c6e7646cb" data-spacefinder-role="richLink" data-spacefinder-type="model.dotcomrendering.pageElements.RichLinkBlockElement"><gu-island name="RichLinkComponent" priority="feature" deferuntil="idle" props="{&quot;richLinkIndex&quot;:4,&quot;element&quot;:{&quot;_type&quot;:&quot;model.dotcomrendering.pageElements.RichLinkBlockElement&quot;,&quot;prefix&quot;:&quot;Related: &quot;,&quot;text&quot;:&quot;Exclusive: how the Atlantic’s Jeffrey Goldberg got added to the White House Signal group chat&quot;,&quot;elementId&quot;:&quot;06b68203-5ef2-4f56-bfd6-b86c6e7646cb&quot;,&quot;role&quot;:&quot;richLink&quot;,&quot;url&quot;:&quot;https://www.theguardian.com/us-news/2025/apr/06/signal-group-chat-leak-how-it-happened&quot;},&quot;ajaxUrl&quot;:&quot;https://api.nextgen.guardianapps.co.uk&quot;,&quot;format&quot;:{&quot;design&quot;:0,&quot;display&quot;:0,&quot;theme&quot;:0}}"></gu-island></figure><p>The fact that Hegseth also shared the plans in a second Signal group chat, according to “people familiar with the matter” who spoke to the Times, is likely to add to <a href="https://www.politico.com/news/2025/04/18/defense-secretary-chief-of-staff-joe-kasper-departure-00299508" data-link-name="in body link">growing criticism</a> of the former Fox weekend anchor’s ability to manage the Pentagon, a massive organization which operates in matters of life and death around the globe.</p><p>According to the Times, the private chat also included two senior advisers to Hegseth – Dan Caldwell and Darin Selnick – who were fired last week after being accused of leaking unauthorized information.</p><p>Hegseth has <a href="https://www.youtube.com/watch?v=sYLUIBBUNJ0" data-link-name="in body link">previously been criticized</a> for including his wife, Jennifer, a former Fox News producer, <a href="https://www.theguardian.com/us-news/2025/mar/29/pete-hegseth-wife-jennifer-foreign-defense-official-meetings" data-link-name="in body link">in sensitive meetings with foreign leaders</a>, including a discussion of the war in Ukraine with British military leaders. Phil Hegseth, the secretary’s younger brother, was hired as a senior Pentagon adviser and is the defense department’s liaison to the Department of Homeland Security. It is unclear why either would need to know about the details of strikes plans in advance.</p><p>According to the Times, Hegseth used his private phone, rather than a government device, to access the Signal chat with his family and friends.</p><p>CNN <a href="https://www.cnn.com/2025/04/20/politics/hegseth-second-signal-chat-military-plans/index.html" data-link-name="in body link">reported later on Sunday</a> that three sources familiar with Hegseth’s private Signal group confirmed to the broadcaster that he had used it to share Yemen attack plans before the strikes were launched.</p><p>A person familiar with the contents and those who received the messages, confirmed the second chat to the Associated Press ands said that it included 13 people.</p><p>Shortly after the news of the second Signal chat broke, Politico published an opinion article by Hegseth’s former press secretary, John Ullyot, <a href="https://www.politico.com/news/magazine/2025/04/20/pentagon-chaos-ullyot-hegseth-00205594" data-link-name="in body link">who wrote</a>: “It’s been a month of total chaos at the Pentagon. From leaks of sensitive operational plans to mass firings, the dysfunction is now a major distraction for the president – who deserves better from his senior leadership”.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[How Thai authorities use online doxxing to suppress dissent (182 pts)]]></title>
            <link>https://citizenlab.ca/2025/04/how-thai-authorities-use-online-doxxing-to-suppress-dissent/</link>
            <guid>43747242</guid>
            <pubDate>Sun, 20 Apr 2025 23:15:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://citizenlab.ca/2025/04/how-thai-authorities-use-online-doxxing-to-suppress-dissent/">https://citizenlab.ca/2025/04/how-thai-authorities-use-online-doxxing-to-suppress-dissent/</a>, See on <a href="https://news.ycombinator.com/item?id=43747242">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="container"> <!--TODO move to stylesheet -->
		<main id="main" role="main" itemscope="" itemprop="mainContentOfPage" itemtype="http://schema.org/Blog">
			<section id="content">


						
							

     <article id="post-82154" dir="ltr" 82154role="article" itemscope="" itemprop="blogPost" itemtype="http://schema.org/BlogPosting">

        <header>
          <span dir="ltr"><a href="https://citizenlab.ca/category/research/">Back to Research</a></span>
            
            

          <!-- Display the link for the PDF version of the post -->
          
        </header>         
                <section itemprop="articleBody">
                  <h2><span><strong>Abstract</strong>&nbsp;</span></h2>
<p><span>A sustained, coordinated social media harassment and doxxing campaign – which we codenamed JUICYJAM – targeting the pro-democracy movement in Thailand has run uninterrupted, and unchallenged, since at least August 2020. We define doxxing as the search for and the publication of an individual’s personal data on the Internet with malicious intent, in this instance, to suppress and harass the Thai pro-democracy movement. The operation utilized an inauthentic persona over multiple social media platforms (primarily X and Facebook) to target pro-democracy protesters by doxxing individuals, continuously harassing them, and instructing followers to report them to the police. Through our analysis of public social media posts we determined that the campaign was not only inauthentic, but the information revealed could not have been reasonably sourced from a private individual. Thanks to a public leak of confidential military and police documents in March 2025, we can now attribute the campaign to the Royal Thai Armed Forces and/or the Royal Thai Police. With a high rate of following and engagement across platforms, JUICYJAM is an uncommon instance of a successful state-sponsored influence operation. JUICYJAM’s tactics support a larger network of judicial harassment and democratic suppression that is infrequently enforced by social media platforms, but poses a significant threat to civil society.&nbsp;</span></p>
<h2><strong>Key Findings</strong></h2>
<ul>
<li aria-level="1"><span>Since at least August 2020, a coordinated social media harassment and doxxing campaign targeting the Thai pro-democracy movement has run uninterrupted and unchallenged. We codenamed it JUICYJAM.&nbsp;</span></li>
<li aria-level="1"><span>Thanks to a public leak of confidential military and police documents that occurred in March 2025, we can now attribute the campaign to the Royal Thai Armed Forces and/or the Royal Thai Police, whose online repression efforts have allegedly been merged into a joint “Cyber Team” since 2023.</span></li>
<li aria-level="1"><span>The campaign operates within a broader context of dissent repression tactics, both online and offline, that closely resemble those we have previously analyzed in other regions – such as, for example, in Hong Kong.</span></li>
<li aria-level="1"><span>JUICYJAM’s longstanding, uninterrupted activity over multiple social media platforms (primarily X and Facebook) once again exposes the shortcomings of platforms in creating and enforcing policies on highly coordinated and harmful doxxing campaigns intended to suppress civil society.&nbsp;</span></li>
<li aria-level="1"><span>Platforms’ policies on doxxing seldom consider the behaviour in the context of coordinated – and often state-sponsored – campaigns against civil society. They also do not consider environmental factors, such as the doxxing happening during unrest and protests.</span></li>
</ul>
<h2><strong><a id="background"></a>Background</strong></h2>
<p><span>In 2014, Thailand faced its second military coup of the century, placing a military junta – the National Council for Peace and Order – in power. The junta immediately imposed martial law, ratified a military-backed constitution, and, in 2019, the former army chief who led the coup, Prayuth Chan-o-cha, was elected Prime Minister. In July 2020, youth-led pro-democracy protests broke out across the country, demanding a more democratic constitution and reforms to the monarchy. The protesters were met with severe repression, and after a two-year </span><a href="https://www.fidh.org/IMG/pdf/thailand_report_second_wave_774a_sg_au_210906.pdf" target="_blank" rel="noopener"><span>pause</span></a><span> of prosecutions, in November 2020, Prime Minister Prayuth ordered authorities to bring back the enforcement of </span><i><span>lèse-majesté</span></i><span>, or Section 112 of the Criminal Code, which criminalizes “insulting the monarchy”. Thailand’s use of </span><i><span>lèse-majesté</span></i><span> has been both arbitrary and prolific; protesters can be arrested for as little as </span><a href="https://www.bbc.com/thai/thailand-49963123" target="_blank" rel="noopener"><span>sharing social media posts</span></a><span> that are ‘insulting to the monarchy’. Furthermore, the weaponization of </span><i><span>lèse-majesté</span></i><span> has devastating consequences: those convicted under Section 112 face three to 15 years in prison per count. Thai authorities have extensively used </span><i><span>lèse-majesté </span></i><span>as a tool to punish pro-democracy advocates, with around 270 protesters detained and convicted </span><a href="https://www.ohchr.org/en/press-releases/2025/01/thailand-must-immediately-repeal-lese-majeste-laws-say-un-experts" target="_blank" rel="noopener"><span>since 2020</span></a><span>.</span></p>
<p><span>Weaponizing the judiciary has not been enough, however. Since the 2014 coup, the Thai pro-democracy movement has been heavily targeted through various digital means. In 2022, Citizen Lab researchers uncovered an extensive </span><a href="https://citizenlab.ca/2022/07/geckospy-pegasus-spyware-used-against-thailands-pro-democracy-movement/"><span>espionage campaign</span></a><span> impacting several groups within the movement, such as FreeYOUTH and WeVo. In fact, one of the authors of this report, Katekanok Wongsapakdee, was also found to be targeted.</span></p>
<p><span>Additionally, </span><a href="https://globaldemocracycoalition.org/library/state-sponsored-online-disinformation-impact-on-electoral-integrity-in-thailand/" target="_blank" rel="noopener"><span>multiple influence operations</span></a><span> (IOs) have been exposed for their attempts to discredit the pro-democracy movement and intimidate its members. In October 2020, the company now called X (formerly Twitter) exposed one of the most notorious online IOs targeting the Thai protest movement when it </span><a href="https://web.archive.org/web/20240810002008/https://blog.x.com/en_us/topics/company/2020/disclosing-removed-networks-to-our-archive-of-state-linked-information" target="_blank" rel="noopener"><span>announced</span></a><span> the removal of 926 covertly coordinated accounts. The network of accounts was attributed with high confidence to the Royal Thai Army (RTA). Twitter found the accounts to be “engaging in amplifying pro-RTA and pro-government content, as well as engaging in behavior targeting prominent political opposition figures.”<a id="fnref1" role="doc-noteref" href="#fn1"><sup>1</sup></a></span></p>
<p><span>Further analysis conducted by the </span><a href="https://purl.stanford.edu/ym245nv3149" target="_blank" rel="noopener"><span>Stanford Internet Observatory</span></a><span> found that this influence operation did not achieve any relevant traction with legitimate audiences. The authors state that “the accounts had few followers, the tweets received very low levels of engagement, and the magnitude of tweets is unlikely to have effectively diverted public attention”. Despite the relative investment of resources to conduct this operation, it appears to have failed.</span></p>
<p><span>Twitter’s takedown did not, however, stop influence operations from being deployed to repress the then still very active pro-democracy protests in Thailand. Within this context, we identified several social media campaigns for research candidates, and singled out one that appeared to show the hallmarks of a well-coordinated, and resourced, influence operation. We set out to investigate the campaign’s footprint, tactics, and to determine attribution.&nbsp;</span></p>
<p><span>We codenamed this operation JUICYJAM.</span></p>
<h2><strong>The Leak</strong></h2>
<p><span>While compiling our initial analysis on JUICYJAM, there was a significant leak of information from a Member of the Thai Parliament. On March 25, 2025, Thai MP Chayaphon Satondee, released confidential </span><a href="https://x.com/ThaiEnquirer/status/1904559473940955395" target="_blank"><span>documents</span></a><span> allegedly illustrating the influence operation’s machinery put in place by the Thai authorities to quash dissent.</span></p>
<p><span>It is important to clarify the following:</span></p>
<ul>
<li aria-level="1"><span>We could not independently verify the documents as authentic, or complete. The documents were released by a Thai opposition MP, who claimed to have obtained them from “military and police officers who love democracy,”<a id="fnref2" role="doc-noteref" href="#fn2"><sup>2</sup></a> in the context of a general debate for a vote of no confidence in Prime Minister Paethongtarn Shinawatra.</span></li>
<li aria-level="1"><span>The MP claims the documents originated from a joint-forces “Cyber ​​Team” created in 2023<a id="fnref3" role="doc-noteref" href="#fn3"><sup>3</sup></a>. They allegedly contain the “Weekly Cyber ​​Team Operations Report” for August 17-23, 2024, or the first week after Paethongtarn Shinawatra received parliamentary approval to assume the position of Prime Minister, and the report for October 19-25, 2024, or the period after Paethongtarn assumed the position of Prime Minister.&nbsp;</span></li>
<li aria-level="1"><span>We could review the available documents in detail thanks to the MP making them available on the web<a id="fnref4" role="doc-noteref" href="#fn4"><sup>4</sup></a>, which allowed us to assess them as, at the very least, highly plausible.</span>
<ul>
<li aria-level="2"><span>The documents’ layout, language, and alleged purpose are consistent with those from internal reports produced by a military or law enforcement agency.</span></li>
<li aria-level="2"><span>The documents were reported about in detail by international, as well as local, media, such as the </span><a href="https://www.bbc.com/thai/articles/c20lw5qx4z1o" target="_blank" rel="noopener"><span>BBC</span></a><span>.</span></li>
<li aria-level="2"><span>What caught our attention, however, was the presence, within a set of leaked presentation slides ostensibly explaining the strategy behind the IO, of several tweets where the account’s handle was consistently cut off from the presented screenshot, as if to protect it from inadvertent exposure.</span></li>
<li aria-level="2"><span>Through cross-comparison, we were able to confirm that the tweets seen in the documents had been posted by the X handle we had been researching as the main online asset for </span>JUICYJAM<span>: <code>@jjookklong3</code>.</span></li>
</ul>
</li>
</ul>
<p>If authentic, the leaked documents prove JUICYJAM to be a state-sponsored influence operation, designed to suppress the protest groups, and to counter protest narratives, through a variety of aggressive tactics.</p>
<h2><strong>A Well-Coordinated Suppression Network</strong></h2>
<h2><strong>Summary</strong></h2>
<p><i>Note</i><i><span>: as we have done in </span></i><a href="https://citizenlab.ca/2023/07/hkleaks-covert-and-overt-online-harassment-tactics-to-repress-the-2019-hong-kong-protests/"><i><span>previous research</span></i></a><i><span>, in this report we define </span></i><a href="https://www.tandfonline.com/doi/full/10.1080/01296612.2020.1850000" target="_blank" rel="noopener"><i><span>doxxing</span></i></a><i><span> as the search for and the publication of an individual’s personal data on the Internet with malicious intent.</span></i></p>
<p>JUICYJAM is a prolific set of social media entities, particularly on X and on Facebook, working in coordination to dox and harass individuals and groups within the broader Thai pro-democracy camp. It centres around a single persona, a supposed middle-aged businesswoman going by the name of “Ms. Juk Khlong Sam”. Visually, it consistently utilizes a character from the popular Japanese Anime comic “One Piece”<a id="fnref5" role="doc-noteref" href="#fn5"><sup>5</sup></a> in its profile and cover photos.</p>
<p>Unlike many other influence operations<a id="fnref6" role="doc-noteref" href="#fn6"><sup>6</sup></a>, JUICYJAM can be considered as highly successful. Utilizing its visible views and engagement metrics as a proxy measure for influence, we can observe that the campaign enjoys:</p>
<ul>
<li aria-level="1">Almost 110,000 followers on its X account, with tweet views often upwards of 15,000 (peaks of more than 50,000), and a consistent flow of likes, replies, and retweets.</li>
<li aria-level="1">A combined (non-unique) count of more than 133,000 followers on Facebook<span>, divided between Pages (claimed to be non-official, as we will see, but reposting the X account’s same doxxing content), and a Group. An average post by one of the Facebook Pages typically achieved several hundred reactions, and dozens of comments.</span></li>
<li aria-level="1"><span><span>The vast majority of that audience, and of the consequent engagement, appears to be authentic – i.e. generated by real users, rather than other accounts operated by JUICYJAM.</span></span></li>
</ul>
<figure><p><img fetchpriority="high" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig1-new.png" alt="" width="700" height="595" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 1" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig1-new.png 700w, https://citizenlab.ca/wp-content/uploads/2025/04/fig1-new-300x255.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig1-new-400x340.png 400w, https://citizenlab.ca/wp-content/uploads/2025/04/fig1-new-234x199.png 234w, https://citizenlab.ca/wp-content/uploads/2025/04/fig1-new-326x277.png 326w, https://citizenlab.ca/wp-content/uploads/2025/04/fig1-new-180x153.png 180w" sizes="(max-width: 700px) 100vw, 700px"></p><figcaption><strong>Figure 1.</strong>&nbsp;A <a href="https://www.facebook.com/photo/?fbid=680026037363826&amp;set=a.427559995943766" target="_blank" rel="noopener">doxxing post</a> <span>(</span><a href="https://archive.ph/ZRBFg" target="_blank" rel="noopener"><span>archive</span></a><span>) </span>published by the Facebook Page “เจ๊จุก คลองสาม FC v.1”, sharing the location of a bakery owned by the sister of pro-democracy protester Panusaya Sithijirawattanakul and encouraging followers to leave a negative review. The post shows over 2,000 reactions, 144 comments, and almost 50 shares.</figcaption></figure>
<h2><strong><a id="timeline"></a>Timeline</strong></h2>
<p>We can observe JUICYJAM’s activity as far back as August 2020. At that time, two identical blogs were created on separate platforms – WordPress<a id="fnref7" role="doc-noteref" href="#fn7"><sup>7</sup></a> and Blogger<a id="fnref8" role="doc-noteref" href="#fn8"><sup>8</sup></a>, respectively – only days apart. On them, the previously unseen alias “Ms. Juk Khlong Sam”<span> published two separate posts containing photos and private information – the veracity of which we could not verify – on two alleged members of the Thai protest movement. Some of the information being exposed included the names of the individuals’ family members; the schools they attended; or the name and location of the small businesses their families owned.</span></p>
<p><span>The blogs were no longer updated after the two posts were made. The persona, however, lived on.</span></p>
<p>On September 1, 2020, a Twitter (now X) account was created utilizing the same alias as the blogs: <code>@jjookklong3</code>. The profile for the first time displayed pictures of the “Big Mom” Anime character – which will remain a constant theme for the operation across its several years of activity.</p>
<figure><p><img decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-2.png" alt="" width="1043" height="545" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 2" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-2.png 1043w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-2-300x157.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-2-1024x535.png 1024w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-2-768x401.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-2-605x316.png 605w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-2-297x155.png 297w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-2-500x261.png 500w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-2-180x94.png 180w" sizes="(max-width: 1043px) 100vw, 1043px"></p><figcaption><strong>Figure 2.</strong> Header of the <code>@jjookklong3</code> X (Twitter) <a href="https://x.com/jjookklong3" target="_blank">account</a>, showing the “Big Mom” character from “One Piece” as the profile picture.</figcaption></figure>

<p><span>According to what is visible today, the account began posting approximately one week after its creation, on September 9, 2020. Its </span><a href="https://x.com/jjookklong3/status/1303518244414791680" target="_blank"><span>first known tweet</span></a><span> (</span><a href="https://archive.ph/oiIre" target="_blank" rel="noopener"><span>archive</span></a><span>) described the account’s operator as a woman, disconcerted and indignant with the protest movement’s actions. The persona will be further built over the following years, as we will see later in this report.</span></p>
<p><span>Shortly after the publishing of the Twitter account, several assets utilizing the same (or very similar) naming convention, and an identical “Big Mom” visual theme, surfaced on Facebook.</span></p>
<ul>
<li aria-level="1"><span>The first, created in mid November 2020, was a </span>Facebook <a href="https://www.facebook.com/groups/jjookklong3/" target="_blank" rel="noopener">Group</a> called “เจ๊จุก คลองสาม Family” (Ms. Juk Khlong Sam Family).
<ul>
<li aria-level="2">The Group was set as private, but visible<a id="fnref9" role="doc-noteref" href="#fn9"><sup>9</sup></a>, meaning that we could observe the existence of the Group itself, as well as some other information related to it, but not its contents.</li>
<li aria-level="2">The Facebook Group in question utilized the same alias, and the same anime character, seen everywhere else until that moment.</li>
<li aria-level="2">On its Twitter/X account, “Ms. Juk Khlong Sam” repeatedly claimed ownership of the Facebook Group<span>, even redirecting its followers to specific posts made within it.</span></li>
<li aria-level="2"><span>The Group remains very active to this day, with approximately 13 posts made per day, according to the visible statistics.</span></li>
</ul>
</li>
</ul>

<figure><p><img decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-3.png" alt="" width="1122" height="543" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 3" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-3.png 1122w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-3-300x145.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-3-1024x496.png 1024w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-3-768x372.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-3-605x293.png 605w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-3-297x144.png 297w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-3-500x242.png 500w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-3-180x87.png 180w" sizes="(max-width: 1122px) 100vw, 1122px"></p><figcaption><strong>Figure 3</strong>. The landing page for the Facebook Group “เจ๊จุก คลองสาม Family”, using the alias jjookklong3. The widget shows the creation date (November 12, 2020), as well as the privacy settings for the Group.</figcaption></figure>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-4.png" alt="" width="612" height="447" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 4" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-4.png 612w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-4-300x219.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-4-466x340.png 466w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-4-272x199.png 272w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-4-379x277.png 379w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-4-180x131.png 180w" sizes="auto, (max-width: 612px) 100vw, 612px"></p><figcaption><strong>Figure 4.</strong>&nbsp;A screenshot (captured on April 4, 2025) of the “Activity” widget on the landing page for the Facebook Group “เจ๊จุก คลองสาม Family”, showing posts and users statistics.</figcaption></figure>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-5.png" alt="" width="1061" height="434" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 5" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-5.png 1061w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-5-300x123.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-5-1024x419.png 1024w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-5-768x314.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-5-605x247.png 605w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-5-297x121.png 297w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-5-500x205.png 500w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-5-180x74.png 180w" sizes="auto, (max-width: 1061px) 100vw, 1061px"></p><figcaption><strong>Figure 5.</strong> A screenshot from a <a href="https://x.com/jjookklong3/status/1347468177555394565" target="_blank">tweet</a> (<a href="https://archive.ph/B5McT" target="_blank" rel="noopener">archive</a>) in which <code>@jjookklong3</code> redirects followers to the Facebook Group “เจ๊จุก คลองสาม Family” to watch a video attacking WeVo. The text translates to: “The full, long clip of the WeVo group’s arrogance is on the Facebook group ‘Jae Juk Khlong Sam Family’. Go watch it in full. Let me tell you, you’ll see every action and behavior. It’s like these drunk WeVo people can’t keep their cool.”</figcaption></figure>

<ul>
<li aria-level="1"><span>A few months after the Group, in March 2021, the first of several </span>Facebook Pages<span> (</span><a href="https://www.facebook.com/jjookklong3" target="_blank" rel="noopener"><span>1</span></a><span>, </span><a href="https://www.facebook.com/jjookklong3v1/" target="_blank" rel="noopener"><span>2</span></a><span>, </span><a href="https://www.facebook.com/jjookklong3v2" target="_blank" rel="noopener"><span>3</span></a><span>, </span><a href="https://www.facebook.com/profile.php?id=100064600722544" target="_blank" rel="noopener"><span>4</span></a><span>) using the same naming and visual patterns, and reposting the same content as the Twitter account, was published.</span>
<ul>
<li aria-level="2"><span>Unlike the Group, none of them were claimed by <code>@jjookklong3</code></span><span>&nbsp;– at that point steadily at the epicenter of the campaign. In fact, the X profile even </span><a href="https://archive.ph/7lvwK" target="_blank" rel="noopener"><span>repudiated</span></a><span> them on occasions, which apparently prompted the Pages’ administrators to </span><a href="https://archive.ph/NfDas" target="_blank" rel="noopener"><span>explain</span></a><span><a id="fnref10" role="doc-noteref" href="#fn10"><sup>10</sup></a> that their intent was to further amplify the contents of the Twitter account over Facebook.</span></li>
<li aria-level="2"><span>All Pages went inactive in 2021, except for </span><a href="https://www.facebook.com/jjookklong3v1" target="_blank" rel="noopener"><span>one</span></a><span> (เจ๊จุก คลองสาม FC v.1).</span></li>
</ul>
</li>
</ul>
<p><span>A broader set of social media accounts replicating the Twitter account’s and other existing profiles’ patterns was published in the subsequent years:</span></p>
<ul>
<li aria-level="1"><span>An Instagram </span><a href="https://instagram.com/jjook_klong3/" target="_blank" rel="noopener"><span>account</span></a><span> with two posts, which was linked to in the bio header of the <code>@jjookklong3</code></span><span>&nbsp;Twitter account, allowing us to confirm it as affiliated.</span></li>
<li aria-level="1"><span>A TikTok </span><a href="https://www.tiktok.com/@jjook_klong3" target="_blank" rel="noopener"><span>profile</span></a><span>, with only one video posted.</span></li>
<li aria-level="1"><span>A Telegram </span><a href="https://t.me/jjookklong3" target="_blank"><span>account</span></a><span> – we were unable to review its posts.</span></li>
<li aria-level="1"><span>A Threads </span><a href="https://www.threads.net/@jjook_klong3" target="_blank" rel="noopener"><span>profile</span></a><span> with approximately 30 publicly visible posts</span><span>.<a id="fnref11" role="doc-noteref" href="#fn11"><sup>11</sup></a></span></li>
</ul>
<p><span>On April 4, 2025, as we were preparing this report for publication, a new </span><a href="https://www.facebook.com/jjook.klongsam" target="_blank" rel="noopener"><span>Facebook Page</span></a><span> was created. For the first time, the X profile </span><code><span>@jjookklong3</span></code> <a href="https://archive.ph/vAkAr" target="_blank" rel="noopener"><span>claimed it</span></a><span> as its own, and asked its X audience to follow it. Given the limited available time, we did not conduct in-depth analysis of the Page’s activity.</span></p>
<p>Overall, the core of the activity for the operations appeared to rely on the X profile and the Facebook Group. However, the ostensibly “unofficial” (but evidently tolerated, at the very least) Facebook Pages effectively also acted as an amplifier for the same harassment and doxxing content posted on Twitter. <span>The newly created “official” Facebook Page could now also acquire a prominent role in the campaign, showing it as fully active as of April 2025.</span></p>
<h2><strong><a id="ecosystem"></a>A Broader Ecosystem</strong></h2>
<p><span>While their analysis is out of scope for this report, we nonetheless note that JUICYJAM does not exist in isolation. We were able to identify several other social media entities covertly amplifying its contents, as well as producing their own.</span></p>
<p><span>Several of the social media handles revealed as operated by the Thai authorities in the March 2025 leak were also found to be reposting, or otherwise interacting with JUICYJAM.</span></p>
<p><span>Finally, we found at least one news channel consistently amplifying and propagating JUICYJAM’s doxxing posts, both on broadcast and social media.</span></p>
<h2><strong>Confirming JUICYJAM as an Influence Operation</strong></h2>
<p><span>Several signals had pointed us towards the assessment that “Ms. Juk Khlong Sam”</span> <span>was most likely an inauthentic persona.</span></p>
<ol>
<li aria-level="1"><span>First, no piece of content ever posted by any of the JUICYJAM online assets contained verified identifiable information on the account’s owner. Claims that the operator owned a factory, that “she” was a middle-aged woman with a past in the protest movement herself, or that she had directly taken pictures of protesters – none of that could be confirmed through what the persona ever published.</span></li>
<li aria-level="1"><span>Secondly, a significant portion of the photographic and video footage included in the posts, as well as many of the personal details shared about the targets, could not reasonably have been sourced by a private individual. We show a few examples below.<br>
</span></li>
</ol>
<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-6.png" alt="" width="1074" height="949" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 6" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-6.png 1074w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-6-300x265.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-6-1024x905.png 1024w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-6-768x679.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-6-385x340.png 385w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-6-225x199.png 225w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-6-313x277.png 313w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-6-180x159.png 180w" sizes="auto, (max-width: 1074px) 100vw, 1074px"></p><figcaption><strong>Figure 6.</strong> A screenshot from a <a href="https://x.com/jjookklong3/status/1344546206555406337" target="_blank">tweet</a> (<a href="https://archive.ph/iKogj" target="_blank" rel="noopener">archive</a>) posted by <code>@jjookklong3</code> on December 31, 2020. In the text, the account operator claims to have “told my subordinates to take the video”. The recording happened in the middle of a riot police unit heading towards the suppression of a protest event.</figcaption></figure>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-7.png" alt="" width="1123" height="1004" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 7" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-7.png 1123w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-7-300x268.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-7-1024x915.png 1024w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-7-768x687.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-7-380x340.png 380w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-7-223x199.png 223w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-7-310x277.png 310w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-7-180x161.png 180w" sizes="auto, (max-width: 1123px) 100vw, 1123px"></p><figcaption><strong>Figure 7.</strong> Another example (<a href="https://x.com/jjookklong3/status/1344833884983160832" target="_blank">tweet</a>, <a href="https://archive.ph/jRZ8r" target="_blank" rel="noopener">archive</a>) of a video taken from within a group of police officers – therefore, most likely by one of them, or an authorized partner – during a confrontation with demonstrators.</figcaption></figure>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig8-new.png" alt="" width="497" height="776" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 8" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig8-new.png 497w, https://citizenlab.ca/wp-content/uploads/2025/04/fig8-new-192x300.png 192w, https://citizenlab.ca/wp-content/uploads/2025/04/fig8-new-218x340.png 218w, https://citizenlab.ca/wp-content/uploads/2025/04/fig8-new-127x199.png 127w, https://citizenlab.ca/wp-content/uploads/2025/04/fig8-new-177x277.png 177w, https://citizenlab.ca/wp-content/uploads/2025/04/fig8-new-180x281.png 180w" sizes="auto, (max-width: 497px) 100vw, 497px"></p><figcaption><strong>Figure 8. <span>A Facebook post originally published by iLaw, a Thai civil society organization, which was re-shared and captioned by a target who was later doxxed in a blog post on jjookklong3.wordpress[.]com. The screenshot was used as evidence that the target insulted the monarchy. The post’s privacy settings (highlighted in red) show that it was originally only visible&nbsp; to the target’s Facebook contacts. This denotes privileged access to the content by the JUICYJAM operators, either directly (for example, through the confiscation of a phone, or the planting of spyware on it), or via sources, such as a malicious or compromised contact who could view the post.&nbsp;</span></strong></figcaption></figure>
<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-9.png" alt="" width="1123" height="862" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 9" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-9.png 1123w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-9-300x230.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-9-1024x786.png 1024w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-9-768x590.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-9-443x340.png 443w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-9-259x199.png 259w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-9-361x277.png 361w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-9-180x138.png 180w" sizes="auto, (max-width: 1123px) 100vw, 1123px"></p><figcaption><strong>Figure 9.</strong> A<span>&nbsp;</span><a href="https://www.facebook.com/jjookklong3/posts/pfbid0dYyWxrovyyeyLwxnD2gLRi9PwWzQfReSvS6BcskbbCeCSCKuSB1cc7MG1RX8PnWvl" target="_blank" rel="noopener"><span>post</span></a><span> doxxing a protestor published by the Facebook Page “เจ๊จุก คลองสาม FC” on August 15, 2021. The composite of photos includes private pictures; pictures from a demonstration; one Facebook post by the target person originally set to be only visible to friends (therefore, only accessible by the person’s approved contacts, or by an actor with privileged access – such as for example the military, or the police); and a picture from a work badge (as seen in </span><a href="https://www.facebook.com/photo.php?fbid=10157827966752163&amp;set=p.10157827966752163&amp;type=3" target="_blank" rel="noopener"><span>this other post</span></a><span>).</span></figcaption></figure>

<h2><strong>Attributing JUICYJAM</strong></h2>
<p>Based on the leaked documents, as well as circumstantial evidence we have collected during our research, we can now attribute JUICYJAM to the Royal Thai Armed Forces and/or the Royal Thai Police. Drawing from our observations – discussed in the following section – on the content type, behavioural patterns, and language utilized for JUICYJAM, however, we assess that this particular operation is more likely to be run by the Royal Thai Police. We detail the rationale behind our assessment further below.</p>
<h2><strong>Evidence from Leaked Documents</strong></h2>
<p><span>It is important to start by saying that the documents released to the public on March 25, 2025 show an alleged coordinated effort across multiple branches of the Thai military and police forces since at least 2023. JUICYJAM – active since 2020 – was probably merged into the broader coordinated effort when that was formed.</span></p>
<p><span>As summarized by the local news outlet </span><a href="https://archive.ph/N10Gx" target="_blank" rel="noopener"><span>Thai Enquirer</span></a><span>, “documents from the army show that before the 2023 election, the military convened security meetings to analyze movements deemed anti-monarchy. This led to the creation of a “Special Security Task Force” coordinating operations across military branches.” Additionally, “the Cyber Team was established to coordinate efforts across agencies”, and “the IO structure was unified before the 2023 election”. The 2023 Thai general election happened on </span><a href="https://web.archive.org/web/20230320164814/https://ratchakitcha.soc.go.th/documents/140A022N0000000000100.pdf" target="_blank" rel="noopener"><span>May 14, 2023</span></a><span>.</span></p>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-10.png" alt="" width="893" height="818" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 10" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-10.png 893w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-10-300x275.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-10-768x703.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-10-371x340.png 371w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-10-217x199.png 217w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-10-302x277.png 302w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-10-180x165.png 180w" sizes="auto, (max-width: 893px) 100vw, 893px"></p><figcaption><strong>Figure 10.</strong>&nbsp;The organizational chart of the “Cyber Team” leadership, created in 2023 to coordinate the influence operations efforts by the Thai government, as shown on one of the leaked documents (คณะทำงาน ความมั่นคงพิเศษ ทบ Cyber team.pdf). The column at the right end identifies police officials – marked by red boxes – while the other columns show military officials. The picture was posted by the X account for Thai Enquirer at this <a href="https://x.com/ThaiEnquirer/status/1904559473940955395/photo/1" target="_blank">address</a> (<a href="https://archive.ph/Vb34j" target="_blank" rel="noopener">archive</a>).</figcaption></figure>

<p>In this context, we could identify at least two leaked presentations intended to demonstrate the Cyber Team’s tactics to an internal audience. As part of that demonstration, the two documents show a total of five tweets that we can prove were published by the Twitter (X) account <code>@jjookklong3</code>.</p>
<p>The files are titled “Our Strategy August 67”<a id="fnref12" role="doc-noteref" href="#fn12"><sup>12</sup></a> (ยุทธศาสตร์ฝ่ายเรา สิงหาคม 67.pdf) and “Our Strategy October 67” (ยุทธศาสตร์ฝ่ายเรา ตุลาคม 67.pdf), respectively.</p>
<p><span>The slides present the tweets by <code>@jjookklong3</code></span><span>&nbsp;– whose handle, as previously mentioned, is redacted – as tactical responses deployed to suppress protest narratives perceived as threatening for the establishment.</span></p>
<p><span>The first example showed how <code>@jjookklong3</code> </span><span>was utilized to counter a specific protest narrative. The narrative was popularized in response to the arrest and conviction of Jatuporn Sae-ung, an activist whose doxxing we address later on in this report.&nbsp;</span></p>
<p><span>In the leaked slides provided below, <code>@jjookklong3</code> </span><span>was employed by the ‘Cyber Team’ to counteract the protest narrative through two common IO methods:</span></p>
<ol>
<li aria-level="1"><span>Distraction: moving the focus of its audience towards a more defensible argument than the one for which the target was arrested and charged;</span></li>
<li aria-level="1"><span>Smear: discrediting the target by suggesting they were associated with a given person or group (in the example provided, a now disbanded political party in the Thai opposition).&nbsp;</span></li>
</ol>
<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-11.png" alt="" width="1120" height="628" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 11" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-11.png 1120w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-11-300x168.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-11-1024x574.png 1024w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-11-768x431.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-11-605x340.png 605w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-11-297x167.png 297w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-11-494x277.png 494w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-11-180x101.png 180w" sizes="auto, (max-width: 1120px) 100vw, 1120px"></p><figcaption><strong>Figure 11.</strong> A slide on page 33 of the leaked document “ยุทธศาสตร์ฝ่ายเรา สิงหาคม 67.pdf” (Our Strategy August 67.pdf), titled “Countering the distorted narrative: ‘Just wearing traditional Thai costume could get you charged under Section 112’”. The two screenshots presented are taken from tweets by <code>@jjookklong3</code>, originally posted <a href="https://x.com/jjookklong3/status/1825405903182643209" target="_blank">here</a> (<a href="https://archive.ph/9osXy" target="_blank" rel="noopener">archive</a>) and <a href="https://x.com/jjookklong3/status/1825839714475106715" target="_blank">here</a> (<a href="https://archive.ph/mukl3" target="_blank" rel="noopener">archive</a>).</figcaption></figure>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-12.png" alt="" width="666" height="1081" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 12" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-12.png 666w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-12-185x300.png 185w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-12-631x1024.png 631w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-12-209x340.png 209w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-12-123x199.png 123w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-12-171x277.png 171w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-12-180x292.png 180w" sizes="auto, (max-width: 666px) 100vw, 666px"></p><figcaption><strong>Figure 12.</strong> A screenshot from the original <a href="https://archive.ph/9osXy" target="_blank" rel="noopener">tweet</a> by <code>@jjookklong3</code> shown on the left half of the leaked presentation slide, highlighting a photo captioned:“Love the remix of the Royal Guards March on the background”. The caption on the&nbsp; post by <code>@jjookklong3</code> states: “It was not simply about wearing a traditional Thai costume. Whoever thinks this is not wrong, just come out and wear the costume. Do you dare to do that?”</figcaption></figure>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-13.png" alt="" width="848" height="945" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 13" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-13.png 848w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-13-269x300.png 269w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-13-768x856.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-13-305x340.png 305w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-13-179x199.png 179w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-13-249x277.png 249w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-13-180x201.png 180w" sizes="auto, (max-width: 848px) 100vw, 848px"></p><figcaption><strong>Figure 13.</strong> A screenshot from the original <a href="https://archive.ph/mukl3" target="_blank" rel="noopener">tweet</a> by <code>@jjookklong3</code> shown on the right half of the leaked presentation slide, with a caption stating “The organisers of the protest prepared everything from the theme, scene, actors, and banners. Anybody who sees this can immediately understand what their intention was. It is not simply wearing a traditional Thai costume.”</figcaption></figure>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-14.png" alt="" width="1122" height="673" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 14" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-14.png 1122w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-14-300x180.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-14-1024x614.png 1024w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-14-768x461.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-14-567x340.png 567w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-14-297x178.png 297w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-14-462x277.png 462w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-14-180x108.png 180w" sizes="auto, (max-width: 1122px) 100vw, 1122px"></p><figcaption><strong>Figure 14.</strong> A slide on page 18 of the leaked document “ยุทธศาสตร์ฝ่ายเรา สิงหาคม 67.pdf” (Our Strategy August 67.pdf), titled “Linking “New” Jatuporn Sae-ung to the Move Forward Party Leaders.”</figcaption></figure>

<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/fig-15.png" alt="" width="801" height="924" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 15" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/fig-15.png 801w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-15-260x300.png 260w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-15-768x886.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-15-295x340.png 295w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-15-173x199.png 173w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-15-240x277.png 240w, https://citizenlab.ca/wp-content/uploads/2025/04/fig-15-180x208.png 180w" sizes="auto, (max-width: 801px) 100vw, 801px"></p><figcaption><strong>Figure 15.</strong> A screenshot from the original tweet by <code>@jjookklong3</code> shown on the left half of the leaked presentation slide at page 18, with a caption stating: “Wearing a traditional Thai costume does not get you a lèse-majesté charge. So good at lying. You do not need to look so far to the Arun Temple. Just look at those who are close to you who wear traditional Thai costumes and do not get the charge. Stop lying to the people. #Supporting112 #MustEndUpInJail”. The tweet was originally posted <a href="https://x.com/jjookklong3/status/1825736668298490288" target="_blank">here</a> (<a href="https://archive.ph/pI1IF" target="_blank" rel="noopener">archive</a>).</figcaption></figure>

<p><span>In addition to the examples shown above, within the leaked slides we could also identify:</span></p>
<ul>
<li aria-level="1"><span>The targeted response to the publication of a book by an academic professor – Puangthong Pawakapan – critical of the military rule (document titled: “ยุทธศาสตร์ฝ่ายเรา ตุลาคม 67.pdf”, page 5. Original tweet posted </span><a href="https://x.com/jjookklong3/status/1849331238240477406" target="_blank"><span>here</span></a><span>, and archived </span><a href="https://archive.ph/3Y5GC" target="_blank" rel="noopener"><span>here</span></a><span>). The slide also illustrates the coordinated use of the hashtag </span><span>#ในนามความมั่นคงภายใน</span><span> (“</span><span>#InTheNameOfInternalSecurity</span><span>”).</span></li>
<li aria-level="1"><span>The deliberate framing of a protest leader – Panupong “Mike Rayong” Jadnok – as “living a comfortable life”, in an apparent attempt to discredit him in the eyes of his supporters (document titled: ยุทธศาสตร์ฝ่ายเรา ตุลาคม 67.pdf, page 4. Original tweets posted </span><a href="https://x.com/jjookklong3/status/1849292366441861369" target="_blank"><span>here</span></a><span> and </span><a href="https://x.com/jjookklong3/status/1848658805963505884" target="_blank"><span>here</span></a><span>; archived </span><a href="https://archive.ph/jpeD6" target="_blank" rel="noopener"><span>here</span></a><span> and </span><a href="https://archive.ph/xxwsJ" target="_blank" rel="noopener"><span>here</span></a><span>).</span></li>
<li aria-level="1"><span>A mocking, derogatory response to requests for an amnesty towards the protesters imprisoned under the Section 112 of the Thai Criminal Code (</span><i><span>Lèse-majesté</span></i><span>). (Document titled: ยุทธศาสตร์ฝ่ายเรา ตุลาคม 67.pdf, page 5. Original tweet posted </span><a href="https://x.com/jjookklong3/status/1848279553116123248" target="_blank"><span>here</span></a><span> (</span><a href="https://archive.ph/hgnGw" target="_blank" rel="noopener"><span>archive</span></a><span>)).</span></li>
</ul>
<p><span>The reproduction, verbatim, of tweets by <code>@jjookklong3</code></span><span>&nbsp;in the context of regular internal reports on the IO tactics deployed by the interforce “cyber team” has no other plausible explanation than the fact that the account – and therefore the entire campaign – was run by the Cyber Team itself.</span></p>
<p><span>As for the specific branch responsible for creating and operating JUICYJAM, we cannot reach a definitive conclusion. However, we do note</span> circumstantial evidence <span>that this particular IO could be conducted by the</span> Royal Thai Police<span>. For example:</span></p>
<ul>
<li>In the <a href="#background">mentioned 2020 influence operation</a> attributed to the Royal Thai Army by X, formerly Twitter, the tweets made available by the platform showed an insisted focus on promoting the Royal Thai Army and attacking individual protesters.</li>
<li>A qualitative comparison of the language used by the 2020 IO and @jjookklong3 shows a clear difference. @jjookklong3’s focus is on targeting individual protesters, calling for their arrest, and promoting the Royal Thai Police.</li>
<li>As mentioned before, several pieces of photographic and video content posted by @jjookklong3 – and the connected social media and blogging handles – appear to have been either captured or likely acquired by the Royal Thai Police.</li>
</ul>
<h2><strong><a id="real-life-impact-of-JJ"></a>The Real-Life Impact of JUICYJAM: A Multidimensional Attack on the Protest Movement</strong></h2>
<p><span>Like comparable influence operations designed to quash protest movements and prop autocratic regimes, it is critical to consider the real-life implications of JUICYJAM. Similarly to what we had highlighted in the context of the 2020-2021 pro-democracy protests in Hong Kong – see our report on the “</span><a href="https://citizenlab.ca/2023/07/hkleaks-covert-and-overt-online-harassment-tactics-to-repress-the-2019-hong-kong-protests/"><span>HKLEAKS</span></a><span>” campaign – the Thai actors appear to maximize their impact through the concurrent action of smear campaigns, intimidation, illegal assaults, and judicial harassment.</span></p>
<p><span>We identified a pattern that linked the doxxing and online harassment of individual protesters by </span><span><code>@jjookklong3</code> </span><span>to their arbitrary detention, and subsequent charging, by the local authorities. On some occasions, the targets have also been assaulted by unidentified masked gangs before their arrest.</span></p>
<p><span>The modus operandi utilized the following methods:</span></p>
<figure><p><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/JuicyJam-IO-tactics-1-e1744059145176.png" alt="" width="829" height="638" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 16" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/JuicyJam-IO-tactics-1-e1744059145176.png 829w, https://citizenlab.ca/wp-content/uploads/2025/04/JuicyJam-IO-tactics-1-e1744059145176-300x231.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/JuicyJam-IO-tactics-1-e1744059145176-768x591.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/JuicyJam-IO-tactics-1-e1744059145176-442x340.png 442w, https://citizenlab.ca/wp-content/uploads/2025/04/JuicyJam-IO-tactics-1-e1744059145176-259x199.png 259w, https://citizenlab.ca/wp-content/uploads/2025/04/JuicyJam-IO-tactics-1-e1744059145176-360x277.png 360w, https://citizenlab.ca/wp-content/uploads/2025/04/JuicyJam-IO-tactics-1-e1744059145176-180x139.png 180w" sizes="auto, (max-width: 829px) 100vw, 829px"></p><figcaption>View footnotes <a id="fnref13" role="doc-noteref" href="#fn13"><sup>13</sup></a> and&nbsp; <a id="fnref14" role="doc-noteref" href="#fn14"><sup>14</sup></a></figcaption></figure>
<p>The ultimate goal of following up doxxing with judicial harassment – a process that has been documented in <a href="https://www.tandfonline.com/doi/full/10.1080/13510347.2025.2461478" target="_blank" rel="noopener"><span>previous research</span></a><span> – is to reduce the target to silence and inaction, if not exile, through the combined power of covert and overt repression.</span></p>
<p><span>A few examples of the impact of these combined methods include:</span></p>
<ul>
<li aria-level="1"><b>Jatuporn Sae-ung (จตุพร แซ่อึง), also known as “New”</b>
<ul>
<li aria-level="1"><span>Jatuporn Sae-ung was at the centre of the </span><code>@jjookklong3</code> <span>tweets we observed as part of the leaked documents allowing us to attribute the campaign to the Thai authorities. She was accused by JUICYJAM of having mocked the Monarchy – a crime punishable under the </span><i><span>lèse-majesté</span></i><span> law, also known as Section 112 – for wearing a traditional Thai costume at a protest demonstration.</span></li>
<li aria-level="1"><span>The JUICYJAM action was twofold: it doxxed and belittled Jatuporn (tweet </span><a href="https://archive.ph/PCVLC" target="_blank" rel="noopener"><span>here</span></a><span>) and the protesters (</span><a href="https://archive.ph/mukl3" target="_blank" rel="noopener"><span>here</span></a><span>) in regards to the traditional costume, and to the related protest; and it sought to link her to the now-defunct opposition Move Forward Party (</span><a href="https://archive.ph/pI1IF" target="_blank" rel="noopener"><span>here</span></a><span>). Two of these tweets were shown in the leaked presentation slides promoting the “Cyber Team” actions internally, as seen in the previous sections.</span></li>
<li aria-level="1"><span>In September 2022, Jatuporn was </span><a href="https://archive.ph/atqtY" target="_blank" rel="noopener"><span>sentenced</span></a><span><span> to three years in prison for mocking Queen Suthida, and temporarily released on bail.<br>
</span></span></li>
</ul>
</li>
</ul>
<ul>
<li aria-level="1"><span><b>Itthikorn Sapchang</b> (</span><span>อิทธิกร ทรัพย์แฉ่ง)</span>
<ul>
<li aria-level="2"><span>Itthikorn Sapchang participated in several events organized by the </span><a href="https://www.facebook.com/FreeYOUTHth" target="_blank" rel="noopener"><span>Free YOUTH</span></a><span> (</span><span>เยาวชนปลดแอก) </span><span>movement, one of most active protest groups.&nbsp;</span></li>
<li aria-level="2"><span>On March 20, 2021, he joined a demonstration dubbed REDEM, which was organized by Free YOUTH and the Democracy Restoration Group (DRG) in Bangkok.&nbsp;</span></li>
<li aria-level="2"><span>Later on the same night, he was assaulted and brutally beaten by an unidentified group dressed in black. According to a Facebook </span><a href="https://www.facebook.com/poramin.rassameesawas/posts/pfbid0jpCoFpJSBUqA3JAAG8QeW2meA4hjypZRqVrjnGVRrU2BKiyvtZnAsBUzaTukqdvnl" target="_blank" rel="noopener"><span>post</span></a><span> published by a friend of his, he was beaten with steel batons, and “suffered a cracked head, a cracked cheek, and a cracked lip. He required 14 stitches in total. The doctor said it affected nerves and could cause disability, and he needed to be closely monitored.”</span></li>
<li aria-level="2"><span>A photo published on the same Facebook post showed the outcome of the attack [</span><b>WARNING</b><span><span>: graphic picture – click to view]</span></span><figure><p><a href="https://citizenlab.ca/wp-content/uploads/2025/04/fig-16.png"><img loading="lazy" decoding="async" src="https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8.png" alt="" width="715" height="715" title="JUICYJAM: How Thai Authorities Use Online Doxxing to Suppress Dissent 17" srcset="https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8.png 912w, https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8-300x300.png 300w, https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8-150x150.png 150w, https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8-768x768.png 768w, https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8-340x340.png 340w, https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8-199x199.png 199w, https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8-277x277.png 277w, https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8-180x180.png 180w, https://citizenlab.ca/wp-content/uploads/2025/04/3aef4b77-d28a-45c6-96bf-f0175ab329f8-125x125.png 125w" sizes="auto, (max-width: 715px) 100vw, 715px"></a></p><figcaption><strong>Figure 16. </strong><em>[Graphic content warning – click image to view]</em> A photo of of Itthikorn Sapchang lying on the ground immediately after the assault he suffered on March 20, 2021, following his participation in a protest in Bangkok. Originally <a href="https://www.facebook.com/poramin.rassameesawas/posts/pfbid0jpCoFpJSBUqA3JAAG8QeW2meA4hjypZRqVrjnGVRrU2BKiyvtZnAsBUzaTukqdvnl" target="_blank" rel="noopener">posted here</a>.</figcaption></figure></li>
</ul>
</li>
</ul>
<ul>
<li>
<ul>
<li aria-level="1"><span>The Royal Thai Police claimed that they could not identify the perpetrators, as they alleged that every CCTV camera in the area was broken – as claimed in the same Facebook post.</span></li>
<li aria-level="1"><span>On May 2, 2021, after Itthikorn had joined another REDEM demonstration on that same day, </span><span>@jjookklong3</span> <a href="https://x.com/jjookklong3/status/1388805856624484352" target="_blank"><span>posted</span></a><span> (</span><a href="https://archive.ph/QAS5H" target="_blank" rel="noopener"><span>archive</span></a><span>) photos of a man strongly resembling him, although his face was covered by a motorbike helmet. It asked its followers: “guess who [is it]?”</span>
<ul>
<li aria-level="1"><span>We note that the man shown in the photos has a similar build as Itthikorn, as well as similar clothing to the one he wore when he was assaulted on March 20, 2021. </span></li>
</ul>
</li>
<li aria-level="1">Eventually, on May 14, 2021, he was <a href="https://tlhr2014.com/archives/29719" target="_blank" rel="noopener">charged</a> with “gathering in groups of 10 or more people, using violence to cause chaos in the country, where one of the offenders is armed; when an official orders the gathering to stop and the offenders do not stop; gathering in violation of the Emergency Decree and the Communicable Disease Act; contempt of court or judges during a hearing; using a loudspeaker without permission; and obstructing the sidewalk in violation of the Traffic Act and the Cleanliness Act.”</li>
</ul>
</li>
</ul>
<ul>
<li aria-level="1"><b>Weeraphab Wongsaman (</b><b>วีรภาพ วงษ์สมาน)</b><b>, also known as “Rev’’</b>
<ul>
<li aria-level="2"><span>The protester nicknamed “Rev” was </span><a href="https://web.archive.org/web/20210327203140/https://twitter.com/jjookklong3/status/1375427669198696450" target="_blank" rel="noopener"><span>doxxed</span></a><span><a id="fnref15" role="doc-noteref" href="#fn15"><sup>15</sup></a> by <code>@jjookklong3</code> on March 26, 2021, after he allegedly participated in the mentioned March 20th REDEM protest. Rev became a frequent target of </span><span><code>@jjookklong3</code></span><span>, identifying him in protest images from </span><a href="https://web.archive.org/web/20210503065448/https://twitter.com/jjookklong3/status/1389111122372923392" target="_blank" rel="noopener"><span>May</span></a><span>, </span><a href="https://archive.ph/rWFic" target="_blank" rel="noopener"><span>July</span></a><span>, </span><a href="https://archive.ph/oMUM1" target="_blank" rel="noopener"><span>August</span></a><span>, and </span><a href="https://archive.ph/gWkuE" target="_blank" rel="noopener"><span>September</span></a><span> 2021.</span></li>
<li aria-level="2"><span>On May 14, 2021, he was arrested for participating in the May 2 REDEM rally and released on bail.&nbsp;</span></li>
<li aria-level="2"><span>On September 15, 2021, he was arrested for his alleged participation in the September 13 Din Daeng protest and held in pre-trial detention at the Bangkok Remand Prison.&nbsp;</span></li>
<li aria-level="2"><span>On October 29, 2021, “Rev” and another activist, Auttasit Nussa, were dragged and </span><a href="https://archive.ph/He9nr" target="_blank" rel="noopener"><span>beaten</span></a><span> by the police while they were in custody at the Din Daeng Police Station.</span></li>
<li aria-level="2"><span>In November 2021, “Rev” and Auttasit filed a complaint against the police at the Din Daeng police station, and later at the Department of Special Investigation (DSI). Despite requesting CCTV footage of the incident, the police refused to give it to them. The investigation was eventually </span><a href="https://archive.ph/XJIOI" target="_blank" rel="noopener"><span>closed</span></a><span>, as the Torture Sub-committee determined that the beating did not constitute torture.</span></li>
<li aria-level="2"><span>On September 28, 2023, he was </span><a href="https://archive.ph/qRigH" target="_blank" rel="noopener"><span>sentenced</span></a><span> to three years in prison for </span><i><span>lèse-majesté</span></i><span>. He remains in prison since then after having been denied multiple bail requests.</span></li>
</ul>
</li>
</ul>
<h2><strong>How Could JUICYJAM Operate Unchallenged For So Long?</strong></h2>
<h2><strong>Key Factors</strong></h2>
<ul>
<li aria-level="1"><span>The notion of doxxing is only sparsely captured within the policies of the main social media platforms.&nbsp; It is therefore difficult for an external reader to conclusively identify the rules and actions that the platforms promise to enact in response to its deployment.</span></li>
<li aria-level="1"><span>Moreover, as doxxing is typically framed merely as a privacy violation, the platforms’ policies do not expressly consider its use by adversarial coordinated actors, particularly in the context of state repression.</span></li>
<li aria-level="1"><span>Additionally, our analysis of JUICYJAM’s history shows that even when doxxing is specifically mentioned in policies, the related prohibitions are inconsistently enforced on.</span></li>
</ul>
<h2><strong>Reviewing the Policies on Doxxing for X and Meta</strong></h2>
<p><span>In the current version of their </span><a href="https://help.x.com/en/rules-and-policies/personal-information" target="_blank" rel="noopener"><span>Private Information policy</span></a><span> (last updated in March 2024), </span>X<span> states:&nbsp;</span></p>
<figure><div><span>“You may not threaten to expose, incentivize others to expose, or publish or post other people’s private information without their express authorization and permission, or share private media of individuals without their consent. </span><span>&nbsp;</span>
<p><span>Sharing someone’s private information online without their permission, sometimes called “doxxing,” is a breach of their privacy and can pose serious safety and security risks for those affected.”</span></p></div></figure>
<p><span>While JUICYJAM did primarily post pictures and videos taken at public demonstrations, it very frequently enriched them with private information and footage, including in certain cases government IDs and other official documents – which would most definitely qualify as “a breach of [the targets’] privacy” and posing “serious safety and security risks for those affected”. The continued, and highly prominent, activity and existence of the </span><code>@jjookklong3</code><span> account therefore appears to be a clear failure in this policy’s enforcement by the platform.</span></p>
<p><span>Additionally:</span></p>
<ul>
<li aria-level="1"><span>Platforms’ policies on doxxing seldom consider the behaviour in the context of coordinated – and often state-sponsored – campaigns against civil society, where the great imbalance of power between attackers and targets exponentially increases their harm, as we have seen in this report.&nbsp;</span></li>
<li aria-level="1"><span>They also do not consider environmental factors, such as the doxxing happening during unrest and protests.</span></li>
</ul>
<p><span>In <a href="https://www.oversightboard.com/news/673967193790462-oversight-board-publishes-policy-advisory-opinion-on-the-sharing-of-private-residential-information/" target="_blank" rel="noopener">2022</a>, these issues were addressed in a set of 17 recommendations made to Meta by the Oversight Board <a id="fnref16" role="doc-noteref" href="#fn16"><sup>16</sup></a> </span><span>&nbsp;in response to a request for a policy advisory opinion on “Sharing Private Residential Information”<a id="fnref17" role="doc-noteref" href="#fn17"><sup>17</sup></a>. Recommendations 11 and 12 are especially relevant to the case of JUICYJAM:</span></p>
<figure><div><table>
<tbody>
<tr>
<td><span><strong>Recommendation</strong><br>
</span></td>
<td><strong>Details</strong></td>
</tr>
<tr>
<td><a href="https://transparency.meta.com/en-gb/pao-private-residential-information-policy" target="_blank" rel="noopener"><span>Private Residential Info Policy Advisory Opinion – Recommendation #11</span></a></td>
<td>Meta should create a specific channel of communications for victims of doxing (available both for users and non-users). Additionally, Meta could provide financial support to organizations that already have hotlines in place. Meta should prioritize action when the impacted person references belonging to a group facing heightened risk to safety in the region where the private residence is located. The Board will consider this implemented when Meta creates the channel and publicly announces how to use it.</td>
</tr>
<tr>
<td><a href="https://transparency.meta.com/en-gb/pao-private-residential-information-policy" target="_blank" rel="noopener"><span>Private Residential Info Policy Advisory Opinion – Recommendation #12</span></a></td>
<td>Meta should consider the violation of its Privacy Violations policy as “severe,” prompting temporary account suspension, in cases where the sharing of private residential information is clearly related to malicious action that created a risk of violence or harassment. The Board will consider this implemented when Meta updates its Transparency Center description of the strikes system to make clear that some Privacy Violations are severe and may result in account suspension.</td>
</tr>
</tbody>
</table></div><figcaption><p><span><strong>Table 1.</strong> Recommendations 11 and 12 as provided by the Oversight Board to Meta. Excerpt from the </span><a href="https://transparency.meta.com/en-gb/pao-private-residential-information-policy" target="_blank" rel="noopener"><span>full list</span></a><span> of 17 recommendations provided in response to the company’s </span><a href="https://www.oversightboard.com/news/673967193790462-oversight-board-publishes-policy-advisory-opinion-on-the-sharing-of-private-residential-information/" target="_blank" rel="noopener"><span>request</span></a><span> for a policy advisory opinion on its “Sharing Private Residential Information” policy.</span></p></figcaption></figure>

<p><span>The Oversight Board’s </span><a href="https://transparency.meta.com/en-gb/oversight/oversight-board-recommendations/" target="_blank" rel="noopener"><span>recommendations</span></a><span> – unlike </span><span>decisions</span><span> – are not binding. </span><span>Neither of these recommendations were implemented by Meta at the time of publication of this report.&nbsp;</span></p>
<ul>
<li><span>Recommendation 11 was blocked (“no further action”), with Meta deferring its intended purposes to the existing partnership with “850 safety partners globally, including helplines and organisations that work with victims of harassment, online and offline”.</span></li>
<li><span>Recommendation 12 was initially labeled with “assessing feasibility”, stating that “to assess the board’s recommendation, we will first need to determine how to identify when sharing private residential information ‘is clearly related to malicious action that created a risk of violence or harassment’ and how we can log this type of information in our system.” However, the most recent update was shown to have happened on June 12, 2023.&nbsp;</span>
<ul>
<li><span>We note that in the </span><a href="https://transparency.meta.com/en-gb/oversight/oversight-board-recommendations/" target="_blank" rel="noopener"><span>complete list</span></a><span> of recommendations provided by the Oversight Board to Meta, Recommendation 12 on “Sharing Private Information” is also labelled as “no further action” and “no further updates”, signalling that the company has eventually decided not to implement it.</span></li>
</ul>
</li>
</ul>
<p><span>As shown before in this report <a id="fnref16" role="doc-noteref" href="#fn18"><sup>18</sup></a></span><span>, JUICYJAM’s inauthentic persona, and its doxxing and harassing content, continues to be visible – and highly reachable – on at least four Facebook Pages, one Facebook Group, one Instagram account, and one Threads account as of April 2025.</span></p>
<p><span>Finally, successes in enforcing policies against coordinated doxxing do happen, occasionally. In June 2021, shortly before JUICYJAM started, </span>Google <a href="https://www.reuters.com/world/asia-pacific/google-takes-down-maps-targeting-hundreds-thais-accused-opposing-king-2021-06-28/" target="_blank" rel="noopener"><span>removed</span></a><span> two custom Google Maps that “had listed the names and addresses of hundreds of Thai activists who were accused by royalists of opposing the monarchy”. The maps had been published by a team coordinated by Songklod “Pukem” Chuenchoopol, a prominent pro-monarchy activist, with the intention of reporting everyone named to the police for </span><i><span>lèse-majesté</span></i><span>. We also noticed that the hashtag </span><span>#CaptainPooKhem</span><span> – commonly used by his supporters to amplify his posts – appears to be blocked on </span>Facebook<span>, returning </span><a href="https://www.facebook.com/hashtag/captainpookhem" target="_blank" rel="noopener"><span>no results</span></a><span>. It remains however possible to post it, as can be seen on </span><a href="https://www.facebook.com/TheNationThailand/posts/10157447102161937" target="_blank" rel="noopener"><span>existing posts</span></a><span>.</span></p>
<h2><strong>Conclusions: The Ongoing Harm of Coordinated Doxxing Continues to be Underestimated</strong></h2>
<p><span>Government-operated doxxing campaigns are potent tools of repression, and it is no accident that they are often targeted against peaceful pro-democracy movements.&nbsp; Critically, whether in Hong Kong, Thailand, or </span><a href="https://eastasiaforum.org/2022/12/05/doxxing-and-deficiencies-in-indonesias-cybersecurity-framework/" target="_blank" rel="noopener"><span>elsewhere</span></a><span>, governments and their proxies often deploy them to complement and enhance more traditional forms of state repression, like violence and deprivation of liberty.</span></p>
<p><span>In the case of JUICYJAM, for example, targets of the campaign were also detained, charged, and often physically assaulted.<a id="fnref16" role="doc-noteref" href="#fn19"><sup>19</sup></a></span><span>&nbsp;The harm can be devastating.&nbsp;</span></p>
<h2><strong>Low Risk, High Reward</strong></h2>
<p><span>While JUICYJAM was ostensibly the work of a fictitious persona, the campaign was fueled with information and content only available to government entities. The veil of plausible deniability it offered to them was sufficient for the campaign to thrive for several years before being exposed as linked to the Thai authorities. There is also no guarantee that it will stop now.</span></p>
<p><span>In the conclusions to our </span><a href="https://citizenlab.ca/2023/07/hkleaks-covert-and-overt-online-harassment-tactics-to-repress-the-2019-hong-kong-protests/"><span>report</span></a><span> on the HKLEAKS influence operation – which, as we have seen, followed the same general playbook as JUICYJAM – we had stated: “If digital repression is about raising the cost of activism, then the HKLEAKS case suggests that doxxing can be a fairly low risk but potentially high reward instrument of digital repression.”</span></p>
<p><span>Despite the extremely serious harms for the targets of doxxing campaigns, this statement continues to be accurate.</span></p>
<h2><strong>Coordinated Government-Backed Doxxing: Likely to Grow</strong></h2>
<p><span>JUICYJAM’s five-year-and-counting run in Thailand without serious disruption shows that the current tools, attention, and approach to this problem were largely insufficient to mitigate the harm caused to peaceful protesters and activists.&nbsp;</span></p>
<p><span>Social media companies frame their limited action on doxxing as a necessary balance of freedom of expression and safety (and the difficulties of determining public vs. private information) <a id="fnref16" role="doc-noteref" href="#fn20"><sup>20</sup></a>.</span><span> However, repressive states specifically deploy coordinated doxxing as a technique to punish authentic freedom of expression </span><i><span>and</span></i><span> threaten safety. </span><span>Today, most major social media platforms are moving towards reducing, </span><a href="https://www.forbes.com/sites/thomasbrewster/2024/01/10/elon-musk-fired-80-per-cent-of-twitter-x-engineers-working-on-trust-and-safety/?sh=71c80f1c79b3" target="_blank" rel="noopener"><span>gutting</span></a><span>, and </span><a href="https://www.bbc.co.uk/news/articles/cly74mpy8klo" target="_blank" rel="noopener"><span>eliminating</span></a><span> programs originally aimed at increasing ecosystem safety and health initiatives.&nbsp; Campaigns like JUICYJAM are likely to become more common as states learn from each other and operate in an increasingly permissive environment on certain platforms. The playbook stands to be repeated on a potentially global scale in a world that is seeing a continued </span><a href="https://freedomhouse.org/report/freedom-world/2024/mounting-damage-flawed-elections-and-armed-conflict" target="_blank" rel="noopener"><span>trend of democratic decline</span></a><span>.</span></p>
<h2><strong>Outreach to Platforms</strong></h2>
<p><span>On April 9, 2025, we sent emails to </span><a href="https://citizenlab.ca/wp-content/uploads/2025/04/Citizen-Lab-Letter-to-Meta_Redacted.pdf"><span>Meta</span></a><span> and </span><a href="https://citizenlab.ca/wp-content/uploads/2025/04/Citizen-Lab-Letter-to-X_Redacted.pdf"><span>X</span></a><span> with questions and recommendations to address the concerns raised by our work. At the time of publication, we had not received a response from X. While Meta acknowledged receipt, they did not answer our questions.</span></p>
<p><span>Our recommendations to X and Meta include:</span></p>
<ol>
<li aria-level="1"><b>Provide an easily accessible and responsive way (i.e. a hotline) for victims of doxxing to report the malicious public sharing of their private content</b><span>. The content should be quickly removed after Meta and X verified it as the product of doxxing.</span></li>
<li aria-level="1"><b>Implement instruments for Meta and X to identify, and remove, networks acting in a coordinated manner to conduct doxxing</b><span>. The action should not only consist in the removal of individual pieces of content, but in the simultaneous removal, permanent ban, and subsequent monitoring of the networked actors responsible for the malicious activity.</span></li>
<li aria-level="1"><b>Develop and implement instruments for the protection of civil society from doxxing</b><span> through Meta’s and X’s platforms in hybrid and authoritarian regimes according to The Economist Democracy Index, or Partly Free and Not Free countries according Freedom House’s Freedom in the World survey. Such instruments should include appropriate solutions on both the policy and the technological side.</span></li>
<li aria-level="1"><b>Conduct an audit on the existence and activity of potential coordinated doxxing networks</b>, with priority on illiberal countries as defined per point above. Implement a coordinated removal of the networks confirmed as conducting doxxing. Publicly disclose proven cases of state-sponsored doxxing networks.</li>
</ol>
<h2><strong>Acknowledgements</strong></h2>
<p><span>We would like to thank Rebekah Brown and Siena Anstis, for peer reviewing this report. Special thanks to Adam Senft and Alyson Bruce.</span></p>
<p><span>Research for this project was supervised by Ronald Deibert.</span></p>

<h2><strong>Indicators</strong></h2>
<figure><div><table>
<thead>
<tr>
<th><b>Selector</b></th>
<th><b>Type</b></th>
<th><b>Platform</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>jjookklong3.wordpress[.]com</td>
<td><span>Blog</span></td>
<td><span>WordPress</span></td>
</tr>
<tr>
<td>jjookklong3.blogspot[.]com</td>
<td><span>Blog</span></td>
<td><span>Blogspot</span></td>
</tr>
<tr>
<td>https://www.facebook.com/jjookklong3</td>
<td><span>FB Page</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/jjookklong3v1/</td>
<td><span>FB Page</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/jjookklong3v2</td>
<td><span>FB Page</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/jjook.klongsam</td>
<td><span>FB Page</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/profile.php?id=100064600722544</td>
<td><span>FB Page</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/groups/jjookklong3/</td>
<td><span>FB Group</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/profile.php?id=100066932562498</td>
<td><span>FB Profile (admin of the FB Group)</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/profile.php?id=100061845026654</td>
<td><span>FB Profile (admin of the FB Group)</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/mam.bunyaporn.9</td>
<td><span>FB Profile (admin of the FB Group)</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/ce.cuk.khlxng.sam</td>
<td><span>FB Profile (admin of the FB Group)</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>https://www.facebook.com/profile.php?id=100060925375093</td>
<td><span>FB Profile (admin of the FB Group)</span></td>
<td><span>Facebook</span></td>
</tr>
<tr>
<td>instagram.com/jjook_klong3/</td>
<td><span>Instagram account</span></td>
<td><span>Instagram</span></td>
</tr>
<tr>
<td>https://www.threads.net/@jjook_klong3</td>
<td><span>Threads account</span></td>
<td><span>Threads</span></td>
</tr>
<tr>
<td>https://x.com/jjookklong3</td>
<td><span>X account</span></td>
<td><span>X</span></td>
</tr>
<tr>
<td>https://www.tiktok.com/@jjook_klong3</td>
<td><span>TikTok account</span></td>
<td><span>TikTok</span></td>
</tr>
<tr>
<td><a href="https://citizenlab.ca/cdn-cgi/l/email-protection" data-cfemail="d5bfbfbababebeb9bab8b2e695b2b8b4bcb9fbb6bab8">[email&nbsp;protected]</a><span> <a id="fnref16" role="doc-noteref" href="#fn21"><sup>21</sup></a></span></td>
<td><span>Email address</span></td>
<td><span>Gmail</span></td>
</tr>
<tr>
<td>https://t.me/jjookklong3</td>
<td><span>Telegram user</span></td>
<td><span>Telegram</span></td>
</tr>
<tr>
<td>jjookad</td>
<td><span>WordPress author</span></td>
<td><span>WordPress</span></td>
</tr>
<tr>
<td>https://www.blogger.com/profile/14058024983323444123</td>
<td><span>Blogger profile</span></td>
<td><span>Blogger/Blogspot</span></td>
</tr>
</tbody>
</table></div></figure>

<section id="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn1">“Disclosing networks to our state-linked information operations archive,” October 8, 2020. The entire company blog was scrubbed and is unavailable since the company named Twitter became known as X. <a role="doc-backlink" href="#fnref1">↩︎</a></li>
<li id="fn2">“ฝ่ายค้านกล่าวหารัฐบาลแพทองธาร ปล่อยให้กองทัพมีปฏิบัติการไอโอ – เผย 46 รายชื่อเป้าหมายถูก “ล็อกเป้า” (“Opposition accuses Paethongtarn’s government of allowing the military to carry out IO operations – Reveals 46 target names were “locked on””). <a href="https://www.bbc.com/thai/articles/c20lw5qx4z1o" target="_blank" rel="noopener">BBC News ไทย</a>.<a role="doc-backlink" href="#fnref2">↩︎</a></li>
<li id="fn3"><span>&nbsp;From a purely political point of view, this is notable since Thailand has ostensibly returned to civilian rule in 2023 following the 2014 military coup. Nevertheless, the documents show how the military, and the police, continue to operate covertly, and pervasively, to ensure that power remains in the hands of the pro-establishment representatives. From a technical standpoint, the leak of these documents presents a rare opportunity for researchers to observe the inner workings of a covert influence operation (IO)</span>. <a role="doc-backlink" href="#fnref3">↩︎</a></li>
<li id="fn4">At a <a href="https://drive.google.com/drive/folders/16n2xNG_NvlcEM52vW9uPlpi7bsfVUJ5q" target="_blank" rel="noopener">Google Drive folder</a> linked in a Facebook post on Satondee’s <a href="https://www.facebook.com/photo?fbid=1081526900659087&amp;set=a.307971828014602" target="_blank" rel="noopener">Facebook page</a>.<a role="doc-backlink" href="#fnref4">↩︎</a></li>
<li id="fn5">In the English version, Charlotte Linlin, better known as “<a href="https://onepiece.fandom.com/wiki/Charlotte_Linlin" target="_blank" rel="noopener">Big Mom</a>“, is a villain character, leader of the group called “Big Mom Pirates”. <a role="doc-backlink" href="#fnref5">↩︎</a></li>
<li id="fn6">It has been well documented over a decade of research how even major geopolitical powers like <a href="https://www.wired.com/story/china-bad-at-disinformation/" target="_blank" rel="noopener">China</a>, <a href="https://secondaryinfektion.org/report/lessons-learned-and-questions-unanswered/" target="_blank" rel="noopener">Russia</a>, or <a href="https://citizenlab.ca/2019/05/burned-after-reading-endless-mayflys-ephemeral-disinformation-campaign/">Iran</a> often struggle to acquire authentic audiences and engagement for their influence operations.<a role="doc-backlink" href="#fnref6">↩︎</a></li>
<li id="fn7">https://jjookklong3.wordpress[.]com<a role="doc-backlink" href="#fnref7">↩︎</a></li>
<li id="fn8">https://jjookklong3.blogspot[.]com<a role="doc-backlink" href="#fnref8">↩︎</a></li>
<li id="fn9">On Facebook, a Group is an online community that can be created by any one profile, and managed by multiple profiles at the same time. Groups can be either public or private; additionally, private groups can be either visible, or hidden.<a role="doc-backlink" href="#fnref9">↩︎</a></li>
<li id="fn10">We could no longer locate the original Facebook post shown in this tweet.<a role="doc-backlink" href="#fnref10">↩︎</a></li>
<li id="fn11">As total post numbers are not shown on Threads users’ headers, we cannot accurately estimate the actual amount of posting by the account.<a role="doc-backlink" href="#fnref11">↩︎</a></li>
<li id="fn12">“67” indicates the year 2567 in Buddhist Era according to the <a href="https://en.wikipedia.org/wiki/2024_in_Thailand#:~:text=The%20year%202024%20is%20reckoned,Buddhist%20Era%2C%20the%20Thai%20calendar" target="_blank" rel="noopener">Thai calendar</a>, and corresponds to 2024.<a role="doc-backlink" href="#fnref12">↩︎</a></li>
<li id="fn13">See “<a href="#ecosystem">A Broader Ecosystem</a>”.<a role="doc-backlink" href="#fnref13">↩︎</a></li>
<li id="fn14">It is often assumed within the protest movement that the attackers belonged to radical ultra-royalist groups, such as those united within the “Protecting the Monarchy” umbrella group. They have been <a href="https://prachatai.com/journal/2024/02/108012" target="_blank" rel="noopener">documented</a> as attacking pro-democracy demonstrators in an even overt manner.<a role="doc-backlink" href="#fnref14">↩︎</a></li>
<li id="fn15">Online archive services did not allow us to successfully archive the video attached to the post, which contains the doxxing of “Rev”.<a role="doc-backlink" href="#fnref15">↩︎</a></li>
<li id="fn16">The <a href="https://www.oversightboard.com/" target="_blank" rel="noopener">body was created in 2018</a> as an external reviewer and decision-maker on content moderation issues on Meta’s platforms.<a role="doc-backlink" href="#fnref16">↩︎</a></li>
<li id="fn17">This policy is captured, for Facebook, within the “Privacy violations” section of the platform’s <a href="https://transparency.meta.com/en-gb/policies/community-standards/privacy-violations/" target="_blank" rel="noopener">Community Standards</a>.<a role="doc-backlink" href="#fnref17">↩︎</a></li>
<li id="fn18">See “<a href="#timeline">Timeline</a>“.<a role="doc-backlink" href="#fnref18">↩︎</a></li>
<li id="fn19">See “<a href="#real-life-impact-of-JJ">The Real-Life Impact of JUICYJAM: a Multidimensional Attack on the Protest Movement</a>”<a role="doc-backlink" href="#fnref19">↩︎</a></li>
<li id="fn20">Meta, for example, had requested the mentioned Policy Advisory Opinion on its policy on private residential information from the Oversight Board stating the reason as being: “we found it significant and difficult as it creates tension between our values of voice and safety”. <a href="https://transparency.meta.com/en-gb/pao-private-residential-information-policy" target="_blank" rel="noopener">See here for reference</a>.<a role="doc-backlink" href="#fnref20">↩︎</a></li>
<li id="fn21">Shown on the unofficial Facebook pages. The address seems to misspell the JUICYJAM alias (“m” instead of “n”). <a role="doc-backlink" href="#fnref21">↩︎</a></li>
</ol>
</section>

                </section>
                                 
              </article> 
						
												

			</section>
		</main>
			 
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[TikZJax: Embedding LaTeX Drawings in HTML (119 pts)]]></title>
            <link>https://tikzjax.com/</link>
            <guid>43746831</guid>
            <pubDate>Sun, 20 Apr 2025 22:04:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://tikzjax.com/">https://tikzjax.com/</a>, See on <a href="https://news.ycombinator.com/item?id=43746831">Hacker News</a></p>
<div id="readability-page-1" class="page">
    

    <p>TikZJax converts <code>script</code> tags (containing TikZ code) into SVGs.</p>

    <p>See a live demo at <a href="https://tikzjax.com/">https://tikzjax.com/</a>.</p>

    <h2 id="example">Example</h2>

    <p>In the <code>&lt;head&gt;</code> of your HTML, include </p>

<pre><code>&lt;link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css"&gt;
&lt;script src="https://tikzjax.com/v1/tikzjax.js"&gt;&lt;/script&gt;
</code></pre>

<p>Then in the <code>&lt;body&gt;</code>, include TikZ code such as</p>

<pre><code>&lt;script type="text/tikz"&gt;
  \begin{tikzpicture}
    \draw (0,0) circle (1in);
  \end{tikzpicture}
&lt;/script&gt;
</code></pre>

<p>Your TikZ will be compiled into SVGs; the <code>&lt;script&gt;</code> element will be
replaced with the corresponding SVG.  For instance, the above code generates</p>  



<p>You can also use this for commutative diagrams.  For example, this code</p>

<pre><code>&lt;script type="text/tikz"&gt;
  \begin{tikzcd}
    A \arrow[r, "\phi"] \arrow[d, red]
      &amp; B \arrow[d, "\psi" red] \\
    C \arrow[r, red, "\eta" blue]
      &amp; |[blue, rotate=-15]| D
  \end{tikzcd}
&lt;/script&gt;
</code></pre>

<p>will be rendered as</p>



<h2 id="howdoesthiswork">How does this work?</h2>

<p>Using <a href="https://github.com/kisonecat/web2js">web2js</a>, the Pascal source of <code>tex</code>
is compiled to WebAssembly; the latex format is loaded (without all the hyphenation data), and </p>

<pre><code>\documentclass[margin=0pt]{standalone}
\def\pgfsysdriver{pgfsys-ximera.def}
\usepackage{tikz}
</code></pre>

<p>is executed.  Then core is dumped; the resulting core is compressed, and by reloading the dumped core in the browser, it is possible to very quickly get to a point where TikZ can be executed.  By using an SVG driver for PGF along with <a href="https://github.com/kisonecat/dvi2html">dvi2html</a>, the DVI output is converted to an SVG.</p>

<p>To emphasize this: <b>all of this happens in the browser.</b></p>


  

</div>]]></description>
        </item>
        <item>
            <title><![CDATA[Decomposing Transactional Systems (116 pts)]]></title>
            <link>https://transactional.blog/blog/2025-decomposing-transactional-systems</link>
            <guid>43746461</guid>
            <pubDate>Sun, 20 Apr 2025 20:54:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://transactional.blog/blog/2025-decomposing-transactional-systems">https://transactional.blog/blog/2025-decomposing-transactional-systems</a>, See on <a href="https://news.ycombinator.com/item?id=43746461">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    
    <hr>
    
    
    
    <div id="preamble">
  <p>Every transactional system does four things:</p>
<div>
<ul>
<li>
<p>It <em>executes</em> transactions.</p>
</li>
<li>
<p>It <em>orders</em> transactions.</p>
</li>
<li>
<p>It <em>validates</em> transactions.</p>
</li>
<li>
<p>It <em>persists</em> transactions.</p>
</li>
</ul>
</div>
<p><em>Executing</em> a transaction means evaluating the body of the transaction to produce the intended reads and writes.  There is still notable variety across systems as to how the body of a transaction is executed.  Writes might be applied to storage during this phase, or they might be buffered locally and submitted as a batch at the end.  A transaction might be executed more than once for different purposes.</p>
<p><em>Ordering</em> a transaction means assigning the transaction some notion of a time at which it occurred.  This could be a version, a timestamp, a log sequence number, or a more complex description of transaction IDs it happened before or after.  MVCC databases may assign two versions: an initial read version, and a final commit version. In this case, we’re mainly focused on the specific point at which the commit version is chosen — the time at which the database claims all reads and writes occurred atomically.</p>
<p><em>Validating</em> a transaction means enforcing concurrency control, or more rarely, domain-specific semantics.  If a transaction is going to be rejected for a system defined reason, such as having serializability conflicts with existing transactions, it will happen here.  When validation happens after ordering, it checks to see if the assigned order is valid.  When validation happens before ordering, it provides a range of acceptable commit versions, and the ordering step chooses one of them.</p>
<p><em>Persisting</em> a transaction makes making it durable, generally to disk.  Sometimes writes are incrementally made durable during transaction execution, but the key point in persistence is when all writes <em>and</em> the commit record marking the transaction as committed are durable.  Often this is noting how the system performs replication and persists the outcome of its atomic commitment protocol.  (And sometimes the lines between those two aren’t very clear.)</p>
<p>All four of these things must be done before the system may acknowledge a transaction’s result to a client.  However, these steps can be done in any order.  They can be done concurrently.  Different systems achieve different tradeoffs by reordering these steps.</p>
</div>
<h2 id="_examples">
Examples
</h2> 
<p>A classic optimistic concurrency control database will execute a transaction, and record the read and write sets.  Once execution finishes, a commit version is allocated, and concurrent transactions are checked for conflicts.  If no conflicts were found, the transaction is made durable, and acknowledged as committed.</p>
<p>Classic optimistic concurrency control databases break down as:</p>

<div>

<p><img src="https://transactional.blog/images/blog/2025-decomposing-transactional-systems/diag-dbdiag-spans-md5-a01c7120b9d79e78f31edef2e0cf5169.svg" alt="Diagram" width="420" height="35" )="">
</p>
</div>
<p>A classic pessimistic concurrency control database executes a transaction and acquires locks as it runs to exclude conflicting transactions.  When the transaction finishes, it acquires a commit version, and then is persisted to disk.  Then it releases the locks.</p>
<p>Classic pessimistic concurrency control databases break down as:<a id="_sideref_1"></a><sup>[1]</sup>
<span><a id="_sidedef_1"></a>[1]: Don’t try to infer anything out of these diagrams other than the just how the steps relate to each other.  These diagrams have no relationship to the performance or efficiency of different designs.  Thinner diagrams or more concurrent of steps aren’t necessarily better.</span></p>

<div>

<p><img src="https://transactional.blog/images/blog/2025-decomposing-transactional-systems/diag-dbdiag-spans-md5-34470f9433df60d34f90fce27f23d3e8.svg" alt="Diagram" width="350" height="65" )="">
</p>
</div>
<p>Now, let’s burn through some real world examples.</p>


<h3 id="_foundationdb">
FoundationDB
</h3> 
<p> <a href="https://scholar.google.com/scholar?cluster=4197497039785350505">FoundationDB</a><a id="_sideref_2"></a><sup>[2]</sup> is a distributed, transactional database, which unbundles the standard database architecture into a set of database microservices which may be scaled independently.  The paper describes its transaction processing flow as:
<span><a id="_sidedef_2"></a>[2]: <a id="FoundationDB"></a>Jingyu Zhou, Meng Xu, Alexander Shraer, Bala Namasivayam, Alex Miller, Evan Tschannen, Steve Atherton, Andrew J. Beamon, Rusty Sears, John Leach, Dave Rosenthal, Xin Dong, Will Wilson, Ben Collins, David Scherer, Alec Grieser, Young Liu, Alvin Moore, Bhaskar Muppana, Xiaoge Su, and Vishesh Yadav. 2021. FoundationDB: A Distributed Unbundled Transactional Key Value Store. In <em>Proceedings of the 2021 International Conference on Management of Data</em> (SIGMOD '21), Association for Computing Machinery, New York, NY, USA, 2653–2666. <a href="https://scholar.google.com/scholar?cluster=4197497039785350505">[scholar]</a></span></p>
<div>
<blockquote>
<p>A client transaction starts by contacting one of the Proxies to obtain
a read version (i.e., a timestamp). The Proxy then asks the Sequencer
for a read version that is guaranteed to be no less than any
previously issued transaction commit version, and this read version
is sent back to the client. <span>Then the client may issue multiple reads
to StorageServers and obtain values at that specific read version.
Client writes are buffered locally without contacting the cluster.</span>
At commit time, the client sends the transaction data, including
the read and write sets (i.e., key ranges), to one of the Proxies
and waits for a commit or abort response from the Proxy. If the
transaction cannot commit, the client may choose to restart the
transaction from the beginning again.</p>
<p>A Proxy commits a client transaction in three steps. <span>First, the
Proxy contacts the Sequencer to obtain a commit version that is
larger than any existing read versions or commit versions.</span> The
Sequencer chooses the commit version by advancing it at a rate of
one million versions per second. <span>Then, the Proxy sends the transaction
information to range-partitioned Resolvers, which implement
FDB’s optimistic concurrency control by checking for read-write
conflicts</span>. If all Resolvers return with no conflict, the transaction
can proceed to the final commit stage. Otherwise, the Proxy marks
the transaction as aborted. <span>Finally, committed transactions are sent
to a set of LogServers for persistence</span>. A transaction is considered
committed after all designated LogServers have replied to the
Proxy, which reports the committed version to the Sequencer (to
ensure that later transactions' read versions are after this commit)
and then replies to the client. At the same time, StorageServers
continuously pull mutation logs from LogServers and apply committed
updates to disks.</p>
</blockquote>
</div>
<p>So from breaking down this part of the paper, we see</p>
<div>
<ol>
<li>
<p>A client executes a transaction.</p>
</li>
<li>
<p>The proxy acquires a commit version.</p>
</li>
<li>
<p>The transaction is conflict checked.</p>
</li>
<li>
<p>The transaction is made durable.</p>
</li>
</ol>
</div>
<p>All as sequential steps.</p>

<div>

<p><img src="https://transactional.blog/images/blog/2025-decomposing-transactional-systems/diag-dbdiag-spans-md5-c8eb96033cc2c82c780ce564d6676d87.svg" alt="Diagram" width="483" height="35" )="">
</p>
</div>
<p>A familiar diagram!  FoundationDB operates as a classic optimistic concurrency control database.  With this in mind, if you’re trying to understand one piece of the system (e.g. distributed conflict checking in the resolvers), you can replace the other pieces temporarily with the minimal equivalents from the most simplistic optimistic database implementation (e.g. replace the log servers with appending to a single WAL on one disk).</p>
<h3 id="_spanner">
Spanner
</h3> 
<p> <a href="https://scholar.google.com/scholar?cluster=3523173873845838643">Spanner</a><a id="_sideref_3"></a><sup>[3]</sup> is Google’s flagship database, used extensively within Google, and inspired a generation of NewSQL databases that followed in its architectural footsteps<a id="_sideref_4"></a><sup>[4]</sup> of partitioned Paxos and distributed transactions.  For Spanner’s description of its transaction protocol, we see §4.2.1 Read-Write Transactions:
<span><a id="_sidedef_3"></a>[3]: <a id="Spanner"></a>James C. Corbett, Jeffrey Dean, Michael Epstein, Andrew Fikes, Christopher Frost, JJ Furman, Sanjay Ghemawat, Andrey Gubarev, Christopher Heiser, Peter Hochschild, Wilson Hsieh, Sebastian Kanthak, Eugene Kogan, Hongyi Li, Alexander Lloyd, Sergey Melnik, David Mwaura, David Nagle, Sean Quinlan, Rajesh Rao, Lindsay Rolig, Dale Woodford, Yasushi Saito, Christopher Taylor, Michal Szymaniak, and Ruth Wang. 2012. Spanner: Google’s Globally-Distributed Database. In <em>OSDI</em>. <a href="https://scholar.google.com/scholar?cluster=3523173873845838643">[scholar]</a></span>
<span><a id="_sidedef_4"></a>[4]: And comparing specifically how CockroachDB, TiDB, and YugabyteDB all differ from Spanner and each other is an insightful adventure.</span></p>
<div>
<blockquote>
<p>Like Bigtable, writes that occur in a transaction are
buffered at the client until commit. As a result, reads
in a transaction do not see the effects of the transaction’s
writes. This design works well in Spanner because a read
returns the timestamps of any data read, and uncommitted writes have not yet been assigned timestamps.</p>
<p>Reads within read-write transactions use wound-wait to avoid deadlocks.
<span>The client issues reads
to the leader replica of the appropriate group, which
acquires read locks and then reads the most recent
data. While a client transaction remains open, it sends
keepalive messages to prevent participant leaders from
timing out its transaction. When a client has completed
all reads and buffered all writes, it begins two-phase
commit.</span> The client chooses a coordinator group and
sends a commit message to each participant’s leader with
the identity of the coordinator and any buffered writes.
Having the client drive two-phase commit avoids sending data twice across wide-area links.</p>
<p><span>A non-coordinator-participant leader first acquires
write locks.</span> It then chooses a prepare timestamp that
must be larger than any timestamps it has assigned to previous transactions (to preserve monotonicity), and logs a
prepare record through Paxos. Each participant then notifies the coordinator of its prepare timestamp.</p>
<p>The coordinator leader also first acquires write locks,
but skips the prepare phase. <span>It chooses a timestamp for
the entire transaction after hearing from all other participant leaders.</span> The commit timestamp s must be greater or
equal to all prepare timestamps (to satisfy the constraints
discussed in Section 4.1.3), greater than TT.now().latest
at the time the coordinator received its commit message,
and greater than any timestamps the leader has assigned
to previous transactions (again, to preserve monotonicity). <span>The coordinator leader then logs a commit record
through Paxos (or an abort if it timed out while waiting
on the other participants).</span></p>
<p>Before allowing any coordinator replica to apply
the commit record, the coordinator leader waits until
TT.after(s), so as to obey the commit-wait rule described
in Section 4.1.2. Because the coordinator leader chose s
based on TT.now().latest, and now waits until that timestamp is guaranteed to be in the past, the expected wait
is at least 2 * epsilon. This wait is typically overlapped with
Paxos communication. After commit wait, the coordinator sends the commit timestamp to the client and all
other participant leaders. Each participant leader logs the
transaction’s outcome through Paxos. <span>All participants
apply at the same timestamp and then release locks.</span></p>
</blockquote>
</div>
<p>Spanner is a bit more complicated, partly because lock-related operations involved in transaction validation are stretched across the whole text.  It also tries to trick you by talking about details out of execution order, so make sure to always read closely for "then" to give hints on the ordering of the steps.</p>
<div>
<ol>
<li>
<p>The execute and validate steps seem to be intertwined, as read locks are acquired while the transaction executes.</p>
</li>
<li>
<p>Writes are buffered until the client is ready to commit.</p>
</li>
<li>
<p>Two-phase commit is started to check if the transaction can commit on all participants.</p>
</li>
<li>
<p>After the coordinator has heard all of the minimum required timestamps from its participants during the two-phase commit’s prepare, it decides the final commit version.</p>
</li>
<li>
<p>The transaction is then made durable.</p>
</li>
<li>
<p>Finally, read and write locks are released.</p>
</li>
</ol>
</div>
<p>Drawing this out, Spanner looks like:</p>

<div>

<p><img src="https://transactional.blog/images/blog/2025-decomposing-transactional-systems/diag-dbdiag-spans-md5-b1a436cd5d83f61872a8c8675e1b5eed.svg" alt="Diagram" width="378" height="65" )="">
</p>
</div>
<p>Oh hey, it still looks exactly like a classic pessimistic concurrency control database.  So despite the significantly more complicated explanation of how transactions are executed, it’s reasonable to approach the paper from the viewpoint of "How does this end up being equal to SERIALIZABLE MySQL?", and you can think through how the two systems differ piece by piece.</p>
<h3 id="_tapir">
TAPIR
</h3> 
<p> <a href="https://scholar.google.com/scholar?cluster=8784667365134534173">TAPIR</a><a id="_sideref_5"></a><sup>[5]</sup> is a strictly serializable database advertising itself as an improvement on Spanner that can commit transactions with better latency and throughput through the use of its novel replication protocol. The core of TAPIR is described in §5.2.1:
<span><a id="_sidedef_5"></a>[5]: <a id="TAPIR"></a>Irene Zhang, Naveen Kr. Sharma, Adriana Szekeres, Arvind Krishnamurthy, and Dan R. K. Ports. 2015. Building consistent transactions with inconsistent replication. In <em>Proceedings of the 25th Symposium on Operating Systems Principles</em> (SOSP '15), Association for Computing Machinery, New York, NY, USA, 263–278. <a href="https://scholar.google.com/scholar?cluster=8784667365134534173">[scholar]</a></span></p>
<div>
<blockquote>
<p><span>We begin with TAPIR’s protocol for executing transactions.</span></p>
<div>
<ol>
<li>
<p>For <code>Write(key, object)</code>, the client buffers <code>key</code> and <code>object</code> in
the write set until commit and returns immediately.</p>
</li>
<li>
<p>For <code>Read(key)</code>, if <code>key</code> is in the transaction’s write set, the
client returns <code>object</code> from the write set. If the transaction
has already read <code>key</code>, it returns a cached copy. Otherwise,
the client sends <code>Read(key)</code> to the replica.</p>
</li>
<li>
<p>On receiving <code>Read</code>, the replica returns <code>object</code> and <code>version</code>,
where <code>object</code> is the latest version of <code>key</code> and <code>version</code> is the
timestamp of the transaction that wrote that version.</p>
</li>
<li>
<p>On response, the client puts <code>(key, version)</code> into the transaction’s read set and returns <code>object</code> to the application.</p>
</li>
</ol>
</div>
<p>Once the application calls Commit or Abort, the execution
phase finishes. To commit, the TAPIR client coordinates
across all participants — the shards that are responsible for
the keys in the read or write set — to find a single timestamp,
consistent with the strict serial order of transactions, to assign
the transaction’s reads and writes, as follows:</p>
<div>
<ol>
<li>
<p><span>The TAPIR client selects a proposed timestamp. Proposed
timestamps must be unique, so clients use a tuple of their
local time and their client id.</span></p>
</li>
<li>
<p>The TAPIR client invokes <code>Prepare(txn, timestamp)</code> as an
IR consensus operation, where <code>timestamp</code> is the proposed
timestamp and <code>txn</code> includes the transaction id (<code>txn.id</code>)
and the transaction read (<code>txn.read set</code>) and write sets
(<code>txn.write set</code>). The client invokes Prepare on all participants
through IR as a consensus operations.</p>
</li>
<li>
<p>Each TAPIR replica that receives Prepare (invoked by IR
through ExecConsensus) first checks its transaction log for
<code>txn.id</code>. If found, it returns PREPARE-OK if the transaction
committed or ABORT if the transaction aborted.</p>
</li>
<li>
<p>Otherwise, the replica checks if txn.id is already in its
prepared list. If found, it returns PREPARE-OK.</p>
</li>
<li>
<p><span>Otherwise, the replica runs TAPIR’s OCC validation
checks, which check for conflicts with the transaction’s
read and write sets at timestamp, shown in Figure 8.</span></p>
</li>
<li>
<p>Once the TAPIR client receives results from all shards, the
client sends <code>Commit(txn, timestamp)</code> if all shards replied
PREPARE-OK or <code>Abort(txn, timestamp)</code> if any shards
replied ABORT or ABSTAIN. If any shards replied RETRY,
then the client retries with a new proposed timestamp (up
to a set limit of retries).</p>
</li>
<li>
<p><span>On receiving a Commit, the TAPIR replica: (1) commits the
transaction to its transaction log, (2) updates its versioned
store with w, (3) removes the transaction from its prepared
list (if it is there), and (4) responds to the client.</span></p>
</li>
<li>
<p>On receiving a Abort, the TAPIR replica: (1) logs the
abort, (2) removes the transaction from its prepared list (if
it is there), and (3) responds to the client.</p>
</li>
</ol>
</div>
</blockquote>
</div>
<p>Which initially feels like a lot of description to work through, but it breaks down into separable pieces pretty well:</p>
<div>
<ol>
<li>
<p>The transaction is executed.</p>
</li>
<li>
<p>The clients picks a proposed commit timestamp.</p>
</li>
<li>
<p>Each replica then concurrently runs an OCC check and persists the data to the prepare log.</p>
</li>
</ol>
</div>
<p>Thus, our diagram looks like:</p>

<div>

<p><img src="https://transactional.blog/images/blog/2025-decomposing-transactional-systems/diag-dbdiag-spans-md5-ef7fa2b2e107bd74079da8160f96f9a4.svg" alt="Diagram" width="371" height="65" )="">
</p>
</div>
<p>This also highlights the key aspect of TAPIR: its blending of the concurrency control validation and commit outcome persistence protocols.</p>
<p>Tangentially, TAPIR was the inspiration behind this way of decomposing databases, as it included a nice diagram which I occasionally fell back to when reading papers I struggled to make sense of:</p>

<div>

<p><img src="data:image/png;base64,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" alt="tapir diagram" )="">
</p>
</div>
<p>And this taxonomy is just adding transaction execution, and looking at how those layers are executed across a dimension of time as well.</p>
<h3 id="_calvin">
Calvin
</h3> 
<p> <a href="https://scholar.google.com/scholar?cluster=11098336506858442351">Calvin</a><a id="_sideref_6"></a><sup>[6]</sup> is the iconic system for deterministic databases, and subsequent papers improving on various aspects of its design all share the same overall characteristics.  In §3 System Architecture, Calvin’s architecture is introduced as:
<span><a id="_sidedef_6"></a>[6]: <a id="Calvin"></a>Alexander Thomson, Thaddeus Diamond, Shu-Chun Weng, Kun Ren, Philip Shao, and Daniel J. Abadi. 2012. Calvin: fast distributed transactions for partitioned database systems. In <em>Proceedings of the 2012 ACM SIGMOD International Conference on Management of Data</em> (SIGMOD/PODS '12), ACM. <a href="https://scholar.google.com/scholar?cluster=11098336506858442351">[scholar]</a></span></p>
<div>
<blockquote>
<p>The essence of Calvin lies in separating the system into three separate layers of processing:</p>
<div>
<ul>
<li>
<p><span>The sequencing layer (or “sequencer”) intercepts transactional inputs and places them into a global transactional input
sequence</span>—this sequence will be the order of transactions to
which all replicas will ensure serial equivalence during their
execution. <span>The sequencer therefore also handles the replication and logging of this input sequence.</span></p>
</li>
<li>
<p>The scheduling layer (or “scheduler”) <span>orchestrates transaction execution using a deterministic locking scheme to guarantee equivalence to the serial order specified by the sequencing layer while allowing transactions to be executed concurrently by a pool of transaction execution threads</span>. (Although
they are shown below the scheduler components in Figure 1,
these execution threads conceptually belong to the scheduling layer.)</p>
</li>
<li>
<p>The storage layer handles all physical data layout. Calvin
transactions access data using a simple CRUD interface; any
storage engine supporting a similar interface can be plugged
into Calvin fairly easily.</p>
</li>
</ul>
</div>
</blockquote>
</div>
<p>This means Calvin breaks down as:</p>
<div>
<ol>
<li>
<p>Sequence the transaction into a global log.</p>
</li>
<li>
<p>Make the log durable.</p>
</li>
<li>
<p>Take locks to know when one can safely execute in the serial order despite concurrency.</p>
</li>
<li>
<p>Execute the transaction.</p>
</li>
<li>
<p>Drop all locks acquired.</p>
</li>
</ol>
</div>

<div>

<p><img src="https://transactional.blog/images/blog/2025-decomposing-transactional-systems/diag-dbdiag-spans-md5-580fd0c2cfdaa3490920219d4b39b095.svg" alt="Diagram" width="399" height="65" )="">
</p>
</div>
<p>Calvin is the most well known example of a database which does <strong>not</strong> execute transactions before committing them. It gains some significant advantages from this, in that its commit process is completely immune to contention in the workload, and some disadvantages, in that long running transactions will stall any later committed transactions from executing.</p>
<h3 id="_curp">
CURP
</h3> 
<p> <a href="https://scholar.google.com/scholar?cluster=3451458773692631815">Exploiting Commutativity For Practical Fast Replication</a><a id="_sideref_7"></a><sup>[7]</sup> defines a Consistent Unordered Replication Protocol (CURP), that allows clients to replicate requests that have not yet been ordered, as long as they are commutative. Stitching together a few paragraphs from §3.2 Normal operation:
<span><a id="_sidedef_7"></a>[7]: <a id="CommutativeRaft"></a>Seo Jin Park and John Ousterhout. 2019. Exploiting Commutativity For Practical Fast Replication. In <em>16th USENIX Symposium on Networked Systems Design and Implementation (NSDI 19)</em>, USENIX Association, Boston, MA, 47–64. <a href="https://scholar.google.com/scholar?cluster=3451458773692631815">[scholar]</a></span></p>
<div>
<blockquote>
<p>Client interaction with masters is generally the same as it
would be without CURP. <span>Clients send update RPC requests
to masters.</span> If a client cannot receive a response, it retries the
update RPC. If the master crashes, the client may retry the
RPC with a different server.</p>
<p>For 1 RTT updates, masters return to clients before replication to
backups. <span>To ensure durability, clients directly record
their requests to witnesses concurrently while waiting for
responses from masters. Once all f witnesses have accepted
the requests, clients are assured that the requests will survive
master crashes, so clients complete the operations with the
results returned from masters.</span></p>
<p><span>A witness accepts a new record RPC from a client only
if the new operation is commutative with all operations that
are currently saved in the witness. If the new request doesn’t
commute with one of the existing requests, the witness must
reject the record RPC since the witness has no way to order
the two noncommutative operations consistent with the
execution order in masters. For example, if a witness already
accepted “x←1”, it cannot accept “x←5”.</span></p>
<p>Each of f witnesses operates independently; witnesses
need not agree on either ordering or durability of operations.
In an asynchronous network, record RPCs may arrive at
witnesses in different order, which can cause witnesses to
accept and reject different sets of operations. However, this
does not endanger consistency. First, as mentioned in §3.2.1,
a client can proceed without waiting for sync to backups
only if all f witnesses accepted its record RPCs. Second,
requests in each witness are required to be commutative
independently, and only one witness is selected and used
during recovery (described in §3.3).</p>
<p>The role of masters in CURP is similar to their role in
traditional primary-backup replications. Masters in CURP
receive, serialize, and execute all update RPC requests from
clients. <span>If an executed operation updates the system state, the
master synchronizes (syncs) its current state with backups by
replicating the updated value or the log of ordered operations.</span></p>
</blockquote>
</div>
<p>Thus, we can decompose CURP into its pieces:</p>
<div>
<ol>
<li>
<p>Clients read from the master and send the writes to both the leader and all the followers of a replication group.</p>
</li>
<li>
<p>Each replica concurrently checks for conflicts and records the transaction locally.</p>
</li>
<li>
<p>After replying to the client, the transactions are ordered.</p>
</li>
</ol>
</div>
<p>Thus, we have:</p>

<div>

<p><img src="https://transactional.blog/images/blog/2025-decomposing-transactional-systems/diag-dbdiag-spans-md5-4e0517a7fe96392bf97e711e36b52996.svg" alt="Diagram" width="336" height="65" )="">
</p>
</div>
<p>Which also very nicely shows how CURP is rather unique: ordering transactions is the last thing that it does, and ordering transactions last is how it derives all of its advantages.</p>
<h3 id="_tictoc">
TicToc
</h3> 
<p> <a href="https://scholar.google.com/scholar?cluster=7246772973103959497">TicToc</a><a id="_sideref_8"></a><sup>[8]</sup> introduces itself as a new transaction protocol that assigns read and write timestamps to data items and uses them to lazily compute a valid commit timestamp for each transaction. Doing so removes the need for centralized timestamp allocation, and commits transactions that would be aborted by conventional timestamp ordering schemes.
<span><a id="_sidedef_8"></a>[8]: <a id="TicToc"></a>Xiangyao Yu, Andrew Pavlo, Daniel Sanchez, and Srinivas Devadas. 2016. TicToc: Time Traveling Optimistic Concurrency Control. In <em>Proceedings of the 2016 International Conference on Management of Data</em> (SIGMOD/PODS'16), ACM. <a href="https://scholar.google.com/scholar?cluster=7246772973103959497">[scholar]</a></span></p>
<p>Sounds cool.  Stitching together some pieces of text from §3.2 Protocol Specification so that they read well in order, the transaction protocol is described as:</p>
<div>
<blockquote>
<p><span>In the read phase, the DBMS maintains a separate read set and write set of tuples for each transaction. During this phase, accessed tuples are
copied to the read set and modified tuples are written to the write
set, which is only visible to the current transaction. Each entry in
the read or write set is encoded as {tuple, data, wts, rts}, where
tuple is a pointer to the tuple in the database, data is the data value
of the tuple, and wts and rts are the timestamps copied from the tuple when it was accessed by the transaction. For a read set entry, TicToc maintains the invariant that the version is valid from wts to rts in timestamp order.</span></p>
<p>The first step of the validation phase is to lock
all the tuples in the transaction’s write set in their primary key order
to prevent other transactions from updating the rows concurrently.
Using this fixed locking order guarantees that there are no deadlocks with other transactions committing at the same time.</p>
<p><span>The second step in the validation phase is to compute the transaction’s commit timestamp from the timestamps stored within each
tuple entry in its read/write sets.</span> For a
tuple in the read set but not in the write set, the commit timestamp
should be no less than its wts since the tuple would have a different version before this timestamp. For a tuple in the transaction’s
write set, however, the commit timestamp needs to be no less than
its current rts + 1 since the previous version was valid till rts.</p>
<p><span>In the last step, the algorithm validates the tuples in the transaction’s read set. If the transaction’s commit_ts is less than or equal
to the rts of the read set entry, then the invariant wts ≤ commit_ts
≤ rts holds. This means that the tuple version read by the transaction is valid at commit_ts, and thus no further action is required.
If the entry’s rts is less than commit_ts, however, it is not clear
whether the local value is still valid or not at commit_ts. It is possible that another transaction has modified the tuple at a logical time
between the local rts and commit_ts, which means the transaction
has to abort. Otherwise, if no other transaction has modified the
tuple, rts can be extended to be greater than or equal to commit_ts,
making the version valid at commit_ts.</span></p>
<p><span>Finally, if all of the tuples that the transaction accessed pass validation, then the transaction enters the write phase. In this phase the transaction’s write set is written to the database.</span></p>
</blockquote>
</div>
<p>And so breaking that down, we see:</p>
<div>
<ol>
<li>
<p>The transaction is executed, with writes buffered until commit.</p>
</li>
<li>
<p><em>While</em> the transaction executes, timestamps are recorded which narrow the possible range of commit versions.</p>
</li>
<li>
<p>Once validation begins, a final commit timestamp is chosen and checked for conflicts.</p>
</li>
<li>
<p>If all other steps are successful, the transaction is finally persisted.</p>
</li>
</ol>
</div>
<p>Thus, the diagram looks something like:</p>

<div>

<p><img src="https://transactional.blog/images/blog/2025-decomposing-transactional-systems/diag-dbdiag-spans-md5-e90eb28ad5e40164e91264c7fe6eadb3.svg" alt="Diagram" width="364" height="65" )="">
</p>
</div>
<p>TicToc does <em>dynamic timestamp assignment</em>.  Instead of choosing a choosing a timestamp before execution, or proposing a timestamp right before commit, it narrows ranges of possible commit timestamps as it executes.</p>
<h2 id="_homework">
Homework
</h2> 
<p>With this in mind, here’s a completely arbitrary sampling<a id="_sideref_9"></a><sup>[9]</sup> of some further systems from the top of my mind which all do transaction processing in rather different ways that you can use for practice:
<span><a id="_sidedef_9"></a>[9]: Feel free to <a href="https://transactional.blog/about.html">send me</a> your favorite wacky transaction processing papers for inclusion too!</span></p>
<div>
<ul>
<li>
<p><a href="https://www.vldb.org/pvldb/vol12/p1471-fan.pdf">Ocean Vista: Gossip-Based Visibility Control for Speedy Geo-Distributed Transactions</a></p>
</li>
<li>
<p><a href="https://www.usenix.org/conference/osdi23/presentation/eldeeb">Chardonnay: Fast and General Datacenter Transactions for On-Disk Databases</a></p>
</li>
<li>
<p><a href="https://rescrv.net/papers/warp-tech-report.pdf">Warp: Lightweight Multi-Key Transactions for Key-Value Stores</a></p>
</li>
<li>
<p><a href="https://www.usenix.org/system/files/conference/osdi14/osdi14-paper-mu.pdf">Extracting More Concurrency from Distributed Transactions</a> (ROCOCO)</p>
</li>
<li>
<p><a href="https://www.usenix.org/system/files/conference/atc12/atc12-final118.pdf">Granola: Low-Overhead Distributed Transaction Coordination</a></p>
</li>
<li>
<p><a href="https://dl.acm.org/doi/pdf/10.1145/3318464.3386134">CockroachDB: The Resilient Geo-Distributed SQL Database</a></p>
<div>
<ul>
<li>
<p>But start with <a href="https://www.cockroachlabs.com/docs/stable/architecture/transaction-layer">the transaction layer docs</a>, and then add the parallel commit and read restarts optimizations as a later step.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<p>The diagrams in this post came from my <a href="https://transactional.blog/blog/2022-dbdiag-ophistory.html">Concurrent Operation Diagram Generator</a> tool.  Feel free to use it to generate your own!  There’s an interactive web version of it on the page, and you can see the <a href="https://github.com/transactionalblog/blog/blob/272739f039809924ca73aed10467f87a2460bc17/source/blog/2025-decomposing-transactional-systems.adoc?plain=1#L425">source for this blog post</a> for extra examples on how to express the diagram in text.</p>
<p>Some database creators have already done the homework for you and written their own blog post about how their system decomposes.  Go take a look!</p>
<div>
<ul>
<li>
<p><a href="https://brooker.co.za/blog/2025/04/17/decomposing.html">Aurora DSQL</a></p>
</li>
<li>
<p><a href="https://www.firebolt.io/blog/decomposing-firebolt-transactions">Firebolt</a></p>
</li>
</ul>
</div>
<h2 id="_composing_transactional_systems">
Composing Transactional Systems
</h2> 
<p>A fun part of such a decomposition is that it can be inverted to raise fun questions.  Draw any made up diagram of a possible ordering or interleaving of execute, order, validate, and persist.  Now answer the question: how would I need to design a database such that it would decompose to this diagram?</p>
<p>From all the possible orderings and sets of concurrently executing steps, there’s at least 74 different types of databases that can exist.  We’ve covered only a few of those, but each of them derives some interesting property from its different ordering of the steps of transaction processing.  Looking for a novel transactional system to build and publish about?  Find an ordering which hasn’t been well explored in the literature before, design a system that executes transactions in that fashion, and then figure out what it’s uniquely good and bad at.</p>
<details>
<summary>A Big List of Every Possible Ordering</summary>
<div>
<pre>Execute -&gt; Order -&gt; Persist -&gt; Validate
Execute -&gt; Order -&gt; Validate -&gt; Persist
Execute -&gt; Persist -&gt; Order -&gt; Validate
Execute -&gt; Persist -&gt; Validate -&gt; Order
Execute -&gt; Validate -&gt; Order -&gt; Persist
Execute -&gt; Validate -&gt; Persist -&gt; Order
Order -&gt; Execute -&gt; Persist -&gt; Validate
Order -&gt; Execute -&gt; Validate -&gt; Persist
Order -&gt; Persist -&gt; Execute -&gt; Validate
Order -&gt; Persist -&gt; Validate -&gt; Execute
Order -&gt; Validate -&gt; Execute -&gt; Persist
Order -&gt; Validate -&gt; Persist -&gt; Execute
Persist -&gt; Execute -&gt; Order -&gt; Validate
Persist -&gt; Execute -&gt; Validate -&gt; Order
Persist -&gt; Order -&gt; Execute -&gt; Validate
Persist -&gt; Order -&gt; Validate -&gt; Execute
Persist -&gt; Validate -&gt; Execute -&gt; Order
Persist -&gt; Validate -&gt; Order -&gt; Execute
Validate -&gt; Execute -&gt; Order -&gt; Persist
Validate -&gt; Execute -&gt; Persist -&gt; Order
Validate -&gt; Order -&gt; Execute -&gt; Persist
Validate -&gt; Order -&gt; Persist -&gt; Execute
Validate -&gt; Persist -&gt; Execute -&gt; Order
Validate -&gt; Persist -&gt; Order -&gt; Execute

{Execute, Order} -&gt; Persist -&gt; Validate
Execute -&gt; {Persist, Order} -&gt; Validate
Execute -&gt; Order -&gt; {Persist, Validate}
{Execute, Order} -&gt; Validate -&gt; Persist
Execute -&gt; {Order, Validate} -&gt; Persist
{Persist, Execute} -&gt; Order -&gt; Validate
Execute -&gt; Persist -&gt; {Order, Validate}
{Persist, Execute} -&gt; Validate -&gt; Order
Execute -&gt; {Persist, Validate} -&gt; Order
{Execute, Validate} -&gt; Order -&gt; Persist
Execute -&gt; Validate -&gt; {Persist, Order}
{Execute, Validate} -&gt; Persist -&gt; Order
Order -&gt; {Persist, Execute} -&gt; Validate
Order -&gt; Execute -&gt; {Persist, Validate}
Order -&gt; {Execute, Validate} -&gt; Persist
{Persist, Order} -&gt; Execute -&gt; Validate
Order -&gt; Persist -&gt; {Execute, Validate}
{Persist, Order} -&gt; Validate -&gt; Execute
Order -&gt; {Persist, Validate} -&gt; Execute
{Order, Validate} -&gt; Execute -&gt; Persist
Order -&gt; Validate -&gt; {Persist, Execute}
{Order, Validate} -&gt; Persist -&gt; Execute
Persist -&gt; {Execute, Order} -&gt; Validate
Persist -&gt; Execute -&gt; {Order, Validate}
Persist -&gt; {Execute, Validate} -&gt; Order
Persist -&gt; Order -&gt; {Execute, Validate}
Persist -&gt; {Order, Validate} -&gt; Execute
{Persist, Validate} -&gt; Execute -&gt; Order
Persist -&gt; Validate -&gt; {Execute, Order}
{Persist, Validate} -&gt; Order -&gt; Execute
Validate -&gt; {Execute, Order} -&gt; Persist
Validate -&gt; Execute -&gt; {Persist, Order}
Validate -&gt; {Persist, Execute} -&gt; Order
Validate -&gt; Order -&gt; {Persist, Execute}
Validate -&gt; {Persist, Order} -&gt; Execute
Validate -&gt; Persist -&gt; {Execute, Order}

{Execute, Order} -&gt; {Persist, Validate}
{Execute, Validate} -&gt; {Persist, Order}
{Persist, Execute} -&gt; {Order, Validate}
{Persist, Order} -&gt; {Execute, Validate}
{Order, Validate} -&gt; {Persist, Execute}
{Persist, Validate} -&gt; {Execute, Order}

Execute -&gt; {Order, Persist, Validate}
{Order, Persist, Validate} -&gt; Execute
Order -&gt; {Execute, Persist, Validate}
{Execute, Persist, Validate} -&gt; Order
Persist -&gt; {Execute, Order, Validate}
{Execute, Order, Validate} -&gt; Persist
Validate -&gt; {Execute, Order, Persist}
{Execute, Order, Persist} -&gt; Validate

{Execute, Order, Persist, Validate}</pre>
</div>
</details>
    <!-- TODO: consider https://utteranc.es/ for in-page comments. -->
      <hr>
      
      <p><a href="https://discu.eu/?q=https://transactional.blog/blog/2025-decomposing-transactional-systems.html&amp;submit_title=Decomposing%20Transactional%20Systems">See discussion of this page on Reddit, HN, and lobsters.</a></p>
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Find the Odd Disk (173 pts)]]></title>
            <link>https://colors2.alessandroroussel.com/</link>
            <guid>43745868</guid>
            <pubDate>Sun, 20 Apr 2025 19:17:58 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://colors2.alessandroroussel.com/">https://colors2.alessandroroussel.com/</a>, See on <a href="https://news.ycombinator.com/item?id=43745868">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>Click the disk that's a different color. Use your eyes only! Make sure to disable any blue-light filter on your screen.
		<br>Clique sur le disque qui est d'une couleur différente. Utilise seulement tes yeux ! Assurez-vous de désactiver tout filtre de lumière bleue sur votre écran.
		<br>Haz clic en el disco que tiene un color diferente. ¡Usa solo tus ojos! Asegúrate de desactivar cualquier filtro de luz azul en tu pantalla.</p><div id="end-screen">
		<h2>Game Over!</h2>
		
		<p>Thank you for participating. Please feel free to play again, the more data the better!
			<br>Merci pour ta participation. N'hésite pas à rejouer, plus il y a de données, mieux c’est !
			<br>Gracias por participar. ¡No dudes en jugar de nuevo, entre más datos tengamos, mejor!</p>
		
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: JuryNow – Get an anonymous instant verdict from 12 real people (215 pts)]]></title>
            <link>https://jurynow.app/</link>
            <guid>43745554</guid>
            <pubDate>Sun, 20 Apr 2025 18:32:29 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://jurynow.app/">https://jurynow.app/</a>, See on <a href="https://news.ycombinator.com/item?id=43745554">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[U.S. citizen in Arizona detained by immigration officials for 10 days (199 pts)]]></title>
            <link>https://news.azpm.org/p/news-articles/2025/4/18/224512-us-citizen-in-arizona-detained-by-immigration-officials-for-10-days/</link>
            <guid>43745469</guid>
            <pubDate>Sun, 20 Apr 2025 18:20:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://news.azpm.org/p/news-articles/2025/4/18/224512-us-citizen-in-arizona-detained-by-immigration-officials-for-10-days/">https://news.azpm.org/p/news-articles/2025/4/18/224512-us-citizen-in-arizona-detained-by-immigration-officials-for-10-days/</a>, See on <a href="https://news.ycombinator.com/item?id=43745469">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p><img src="https://media.azpm.org/master/image/2019/10/23/hero/ice.jpg" alt="ICE arrests">
<span>A March 2018 photo of U.S. Immigration and Customs Enforcement (ICE) officers.</span></p><p>ICE/Flickr</p>
</div><div>




<p>19-year-old Jose Hermosillo, who is visiting Tucson from Albuquerque, says he was lost and walking near the Border Patrol headquarters when an agent arrested him for illegally entering the country. Hermosillo was not carrying identification.</p>
<p>Court documents say a Border Patrol agent arrested Hermosillo “at or near Nogales, Arizona, without proper immigration documents” and that Hermosillo admitted to illegally entering the U.S.</p>
<p>Hermosillo and his girlfriend, who have a 9-month-old child together, live in Albuquerque, New Mexico, and are visiting family in Tucson. He says he has never been to Nogales. </p>
<p>His girlfriend’s aunt Grace Layva says she and her family made numerous calls looking for him before they found out he was being detained in the Florence Correctional Center, which Immigration and Customs Enforcement uses to detain people. </p>
<p>Another family member drove to the detention center, about 70 miles northwest of Tucson, but said officials wouldn’t provide any information or release him. </p>
<p>ICE did not respond to a request for comment about the wrongful detention. </p>
<p>The family later provided officials with his birth certificate and social security card.</p>
<p>“He did say he was a U.S. citizen, but they didn't believe him,” Layva said. “I think they would have kept him. I think they would have if they would have not got that information yesterday in the court and gave that to ICE and the Border Patrol. He probably would have been deported already to Mexico.”</p>
<p>A magistrate judge in Tucson dismissed his case on Thursday, and family says he was released much later that night. </p>
<p>There have been other recent cases of U.S. citizens being wrongly detained by immigration officials, including a man wrongly held in Florida after being pulled over during his commute to work. </p>
				</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[First hormone-free male birth control pill enters human trials (205 pts)]]></title>
            <link>https://scitechdaily.com/99-effective-first-hormone-free-male-birth-control-pill-enters-human-trials/</link>
            <guid>43745296</guid>
            <pubDate>Sun, 20 Apr 2025 17:54:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://scitechdaily.com/99-effective-first-hormone-free-male-birth-control-pill-enters-human-trials/">https://scitechdaily.com/99-effective-first-hormone-free-male-birth-control-pill-enters-human-trials/</a>, See on <a href="https://news.ycombinator.com/item?id=43745296">Hacker News</a></p>
Couldn't get https://scitechdaily.com/99-effective-first-hormone-free-male-birth-control-pill-enters-human-trials/: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[How encryption for Cinema Movies works (181 pts)]]></title>
            <link>https://serverless.industries/2024/05/31/digital-cinema.en.html</link>
            <guid>43745281</guid>
            <pubDate>Sun, 20 Apr 2025 17:52:50 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://serverless.industries/2024/05/31/digital-cinema.en.html">https://serverless.industries/2024/05/31/digital-cinema.en.html</a>, See on <a href="https://news.ycombinator.com/item?id=43745281">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p>The Cinema Industry is using its own standards for creating and distributing movies in a secure way. The DCI (Digital Cinema Initiatives) specification defines everything from file formats and encryption to the projection systems itself.</p>

<p>The specification itself is <a href="https://www.dcimovies.com/" target="_blank">publicly available</a> but relies on various IEEE (Institute of Electrical and Electronics Engineers) and SMPTE (Society of Motion Picture and Television Engineers) standards, which have to be purchased.</p>

<h2 id="scope">Scope</h2>

<p>This document will show a rough overview of the DCI workflow and describe in detail how the encryption of a DCI movie works. It will <strong>not</strong> show how to break any encryption and no encryption has been broken while writing this document. <strong>From our perspective, the DCI standard is safe</strong>.</p>

<p>The author of this document has been operating a cinema since 2021, without any insight to the distribution or production side of the industry. Some information may be incomplete.</p>

<h2 id="how-its-started">How it’s started</h2>

<p>End of 2023 the movie <a href="https://www.imdb.com/title/tt6166392/" target="_blank">WONKA</a> was released. Some cinemas reported, that they are unable to start this movie on their projector.</p>

<p>The reason was, that a certificate used by the distributor was expired. This certificate was used to sign the DCP files.</p>

<p>The distributor published new files, starting the movie worked again.</p>

<p>Out of curiosity the author started to check how the validation process on the projector is working.</p>

<h2 id="glossar">Glossar</h2>

<ul>
  <li>
<strong>DCP</strong>: Digital Cinema Package - A folder which contains all components of a movie. Metadata, Subtitles, Audio and Picture in seperate files</li>
  <li>
<strong>CPL</strong>: Composition Playlist - A DCP can contain multiple audio and video streams which will combined in a CPL</li>
  <li>
<strong>KDM</strong>: Key Delivery Message - A XML file which contains the cryptographical information to allow a movie playback on a specific DCI certified projection system</li>
  <li>
<strong>DKDM</strong>: Distribution Key Delivery Message - Similar to a KDM, but for a remastering or distribution system, not for a projection system</li>
</ul>

<h2 id="distribution-process">Distribution Process</h2>

<pre><code>graph TD
    classDef red fill:#a91900
    classDef green fill:#126500
    classDef purple fill:#650072
    legendprod[Producer]:::red
    legenddist[Distributor]:::green
    legendcine[Cinema]:::purple
    legendvendors[Projector Manufacturer]
</code></pre>

<pre><code>graph LR
    classDef red fill:#a91900
    classDef green fill:#126500
    classDef purple fill:#650072

    dcpcreated(["DCP\ncreated"]):::red --"AES Key"--&gt; dkdmcreated
    dkdmcreated(["DKDM\ncreated"]):::red --"encrypted\nAES Key"--&gt; dkdmp
    
    dkdmp[DKDM]:::green --&gt; verify(["Projector\nverified"]):::green
    dcpcreated --"to Distributor"--&gt; dcp(["DCP by\nDownload or\nHarddrive"]):::green
    distcert["Distributor\nCertificate"]:::green --"to Producer"--&gt; dkdmcreated
    
    verify --"to Cinema"--&gt; kdm[KDM]:::purple
    dcp --"to Cinema"--&gt; dcp2["DCP"]:::purple
    cinecert["Projector\nCertificate"]:::purple --"to Distributor"--&gt; verify
    trusted["Trusted Device List"] --&gt; verify
    dcp2 --&gt; projector[Projector]:::purple
    kdm --&gt; projector
</code></pre>

<h2 id="projection-systems">Projection Systems</h2>

<p>Most of the Projection Systems consists of Server, Audio Processor and Projector.</p>

<pre><code>graph LR
  server[Server] --&gt; mediablock[Media Block]
  hdmi[HDMI Source] --&gt; splitter[Audio Splitter]
  splitter --"Video"--&gt; projector
  splitter --"Audio"--&gt; sound
  subgraph Projector
   mediablock --"Video"--&gt; projector[Projector]
  end
  
  projector --&gt; screen[Theatre Screen]
  mediablock --"Audio"--&gt; sound[Audio Processor]
  sound --&gt; speakers[Speakers]
</code></pre>

<p>The Server stores the DCPs and KDMs, manages Playlists and controls the Projector and Audio Processor hardware.</p>

<p>Many Cinemas also connect their Theatre Automation (light, curtains, etc.) to the projector. By setting time-based commands into the playlists, lights and screen curtain can be controlled automatically. The Projector Server provides 12V/24V relays for this.</p>

<p>These time-based commands are also used to set the correct Aspect Ratio and Volume on the different DCPs in a Playlist.</p>

<p>The Server can be controlled remotely by a PC or in larger cinemas by a Theatre Management System.</p>

<p>The DCPs are imported from USB/CRU hard drives or by internet download to the server. They are stored encrypted at all times.</p>

<p>The projector includes a so called “Media Block” which handles DRM and decryption. It receives the DCP data and the KDM to decrypt each frame in real time.</p>

<p>On DCP playback the Projector will send the decrypted PCM audio to the Audio Processor which will then send each processed Audio Channel to the respective Speakers.</p>

<p><img src="https://serverless.industries/assets/digital-cinema-disks.jpg" alt="DCP Disks"></p>

<h2 id="dcp-format">DCP Format</h2>

<p>A DCP is a folder which contains XML metadata files and multiple MXF files for the actual movie.</p>

<h3 id="folder-naming-pattern">Folder Naming Pattern</h3>

<pre><code>AwesomeMovie_FTR-2_S_DE-XX_DE-16_51_4K_20240119_SMPTE_OV
</code></pre>

<ul>
  <li>
<code>AwesomeMovie</code>: A short version of the movie title</li>
  <li>
<code>FTR</code>: Media Type, in this case “Feature”</li>
  <li>
<code>2</code>: Version Number</li>
  <li>
<code>S</code>: Aspect ratio, in this case 2.35:1 aka “Sope”</li>
  <li>
<code>DE</code>: Audio Language</li>
  <li>
<code>XX</code>: Subtitle Language, in this case is no subtitle available</li>
  <li>
<code>DE</code>: Territory</li>
  <li>
<code>16</code>: Age Rating</li>
  <li>
<code>51</code>: Audio channels, in this case 5.1 surround sound</li>
  <li>
<code>4K</code>: Movie resolution, in this case 4096x1716 pixels</li>
  <li>
<code>20240119</code>: Mastering timestamp</li>
  <li>
<code>SMPTE</code>: DCP standard, there is also <code>Interop</code>
</li>
  <li>
<code>OV</code>: Package type, original version or <code>VF</code> for version file</li>
</ul>

<p>Credits: <a href="http://static.kinofreund.com/dcnt/" target="_blank">http://static.kinofreund.com/dcnt/</a></p>

<h3 id="mastering-process">Mastering Process</h3>

<p>During the Mastering Process a static AES 128 bit key is generated and the original medium is converted into MXF files. One for picture and one for audio.</p>

<p>For mastering the tool <a href="https://dcpomatic.com/" target="_blank">DCP-o-matic</a> can be used. There are also some commercial products.</p>

<pre><code>graph LR
    movie["Source"] --&gt; mastering{{"Movie Mastering"}}
    mastering --&gt; dcpkey["Static&lt;br&gt;AES-128 Key"]
    mastering --&gt; dcp["Digital Cinema Package (DCP)"]
    dcp --&gt; dcppics["Encrypted&lt;br&gt;Picture Data"]
    dcp --&gt; dcpsound["Encrypted&lt;br&gt;Audio Data"]
    dcp --&gt; dcpsub["Encrypted&lt;br&gt;Subtitle Data"]
</code></pre>

<p>The video stream is encoded as one single JPEG2000 picture per frame. Each frame is encrypted with the same static AES key.</p>

<p>The audio stream is (most likely) chunked into one BWF (Broadcast Wave Format) stream per frame and also encrypted separately. (The author haven’t found any information about this yet.)</p>

<p>A DCP can have a size of 200 GB or more. Some newer releases can hit the Terabyte, if multiple versions (Languages, Subtitles, 2D/3D) are shipped on the same harddrive.</p>

<p>The subtitles are provided in an XML file or are burned directly into the picture frames. If it is provided as an XML file, the projector will render the subtitles using a TTF font file.</p>

<div><pre><code><span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span>&lt;DCSubtitle</span> <span>Version=</span><span>"1.0"</span><span>&gt;</span>
    <span>&lt;SubtitleID&gt;</span>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx<span>&lt;/SubtitleID&gt;</span>
    <span>&lt;MovieTitle&gt;</span>MovieTitle<span>&lt;/MovieTitle&gt;</span>
    <span>&lt;ReelNumber&gt;</span>1<span>&lt;/ReelNumber&gt;</span>
    <span>&lt;Language&gt;</span>de<span>&lt;/Language&gt;</span>
    <span>&lt;LoadFont</span> <span>Id=</span><span>"Font1"</span> <span>URI=</span><span>"Arial.ttf"</span> <span>/&gt;</span>
    <span>&lt;Font</span> <span>Id=</span><span>"Font1"</span> <span>Color=</span><span>"ffffffff"</span> <span>Effect=</span><span>"border"</span> <span>EffectColor=</span><span>"ff000000"</span> <span>Italic=</span><span>"no"</span> <span>Script=</span><span>"normal"</span> <span>Size=</span><span>"42"</span> <span>Underlined=</span><span>"no"</span> <span>Weight=</span><span>"normal"</span> <span>AspectAdjust=</span><span>"1"</span> <span>Spacing=</span><span>"0em"</span><span>&gt;</span>
        <span>&lt;Subtitle</span> <span>SpotNumber=</span><span>"1"</span> <span>TimeIn=</span><span>"00:07:45:094"</span> <span>TimeOut=</span><span>"00:07:48:000"</span> <span>FadeUpTime=</span><span>"000"</span> <span>FadeDownTime=</span><span>"000"</span><span>&gt;</span>
            <span>&lt;Text</span> <span>HPosition=</span><span>"0"</span> <span>VAlign=</span><span>"bottom"</span> <span>VPosition=</span><span>"7"</span><span>&gt;</span>WÜSTE VON NEVADA - HEUTE<span>&lt;/Text&gt;</span>
        <span>&lt;/Subtitle&gt;</span>
    <span>&lt;/Font&gt;</span>
<span>&lt;/DCSubtitle&gt;</span>
</code></pre></div>



<p>A supplemental DCP allows to reuse the Original DCP (OV, Original File) picture and replace audio or subtitle tracks. This makes it possible to support different languages without the need of shipping hundreds of gigabytes of duplicated picture data to the cinemas.</p>

<pre><code>graph TD
    f[PaktDerWoelfe_FTR_S-235_FR-XX_DE_51_4K_SC_20230926_EGB_SMPTE_OV]
    f --&gt; a[PaktDerWoelBoC_FTR_S-235_DE-DE_DE_51_4K_SC_20231115_EGB_SMPTE_VF]
    f --&gt; b[PaktDerWoelBoC_FTR_S-235_FR-DE_DE_51_4K_SC_20231115_EGB_SMPTE_VF]
</code></pre>

<p>Example: One version file for German with German subtitles and one for French with German subtitles.</p>

<p>It is even possible to provide differnt cuts of a movie for different regions.</p>

<h3 id="software">Software</h3>

<p>Two Open Source C++ implementations, both in active development, one from the industry!</p>

<p>cth103/libdcp, a C++ library written by the makers of DCP-o-matic:</p>

<ul>
  <li><a href="https://git.carlh.net/gitweb/?p=dcpomatic.git;a=shortlog;h=refs/heads/main" target="_blank">https://git.carlh.net/gitweb/?p=dcpomatic.git;a=shortlog</a></li>
  <li>
<a href="https://dcpomatic.com/" target="_blank">https://dcpomatic.com/</a> (<a href="https://git.carlh.net/gitweb/?p=libdcp.git;a=summary" target="_blank">source code</a>)</li>
</ul>

<p>asdcplib, a C++ library written by companies active in the cinema industry:</p>

<blockquote>
  <p>The asdcplib project was originally exchanged by FTP. The project was on SourceForge between 2005 and 2008, when it moved to a release-only distribution via CineCert. As of late February 2019, its new home is on github.</p>

  <p>– <a href="https://github.com/cinecert/asdcplib" target="_blank">https://github.com/cinecert/asdcplib</a></p>
</blockquote>

<p>Almost all software, commercial or open source is using one of these libraries.</p>

<h2 id="distribution">Distribution</h2>

<p>The symmetric encryption key for the DCP has to be protected in some way. For this, the producer will create a DKDM XML file, containing the AES Key, which has been encrypted with the Certificate Public Key of the distributor.</p>

<p>The distributor can then use the DKDM to create KDM XML files for cinemas. This means decrypting the DCP AES Key and encrypting it again with the Certificate Public Key of the target projection system.</p>

<h2 id="certificate-chains">Certificate Chains</h2>

<p>Both projectors and distributors use SSL certificate chains to sign and encrypt/decrypt data.</p>

<p>A chain always consists of a Root Certificate Authority (CA), Intermediate CA and a Leaf Certificate.</p>

<pre><code>graph TD
    a["dnQualifier=ZwVjULQy61,CN=.smpte-430-2.root,OU=movies.serverless.industries,O=serverless.industries"]
    a --&gt; b["dnQualifier=/JLF0JtscFuJahVNXfYu1w1u7SI=,CN=.smpte-430-2.intermediate,OU=movies.serverless.industries,O=serverless.industries"]
    b --&gt; c["dnQualifier=TEqiLeRuVnkbNOUsPlbDHIdp1tM=,CN=CS.smpte-430-2.leaf,OU=movies.serverless.industries,O=serverless.industries"]
</code></pre>

<p>The field <code>dnQualifier</code> in the subject is the fingerprint of the public key of the generated certificate:</p>

<div><pre><code><span>cat </span>leaf.pem | openssl x509 <span>-pubkey</span> <span>-noout</span> | <span>\</span>
    openssl <span>base64</span> <span>-d</span> | <span>dd </span><span>bs</span><span>=</span>1 <span>skip</span><span>=</span>24 2&gt;/dev/null | <span>\</span>
    openssl sha1 <span>-binary</span> | openssl <span>base64</span>
</code></pre></div>

<p>Script for creating a certificate chain: <a href="https://github.com/NEU-Deli/dcitools/blob/master/create-smpte-chain.sh" target="_blank">create-smpte-chain.sh</a></p>

<h2 id="key-delivery-messages">Key Delivery Messages</h2>

<p>A KDM is a XML file which contains the AES key of the DCP encrypted with the projectors Public Key.</p>

<ul>
  <li>Various XML Schemas: SMPTE 430-1, SMPTE 430-3</li>
  <li>Document signing with XML-DSig</li>
  <li>One or more <code>&lt;enc:CipherValue&gt;</code> elements contain the AES keys and some metadata for multiple DCP OV/VF, both encrypted</li>
</ul>

<p>Decrypt the <code>&lt;enc:CipherValue&gt;</code> with <code>openssl</code>:</p>

<div><pre><code><span>cat </span>KDM_KaizoTrap_FTR-1_F_XX-XX_20_2K_20240119_SMPTE_OV_My_nonexistent_cinema_Nonexistent_Screen_1.xml | <span>\</span>
    xq <span>-r</span> <span>'.DCinemaSecurityMessage.AuthenticatedPrivate."enc:EncryptedKey"[0]."enc:CipherData"."enc:CipherValue"'</span> | <span>\</span>
    <span>base64</span> <span>-d</span> | <span>\</span>
    openssl pkeyutl <span>-decrypt</span> <span>-inkey</span> leaf.key <span>-pkeyopt</span> rsa_padding_mode:oaep <span>&gt;</span> kdminfo.bin
</code></pre></div>

<p>Output of <code>hexdump -C kdminfo.bin</code>:</p>

<pre><code>00000000  f1 dc 12 44 60 16 9a 0e  85 bc 30 06 42 f8 66 ab  |...D`.....0.B.f.|
00000010  28 fd 80 bf a9 bb f1 dc  48 d9 87 e9 5c c9 a5 41  |(.......H...\..A|
00000020  ab 8e 14 82 88 40 c3 90  2a 0b 46 21 b4 10 49 6b  |.....@..*.F!..Ik|
00000030  b8 a4 a9 4f 4d 44 41 4b  2e 2e 05 b5 bb ed 45 79  |...OMDAK......Ey|
00000040  96 cc 9c d6 00 ed db 4c  32 30 32 34 2d 30 31 2d  |.......L2024-01-|
00000050  32 38 54 31 39 3a 30 30  3a 30 30 2b 30 31 3a 30  |28T19:00:00+01:0|
00000060  30 32 30 32 34 2d 30 32  2d 30 34 54 32 30 3a 30  |02024-02-04T20:0|
00000070  30 3a 30 30 2b 30 31 3a  30 30 4c 3a b6 ed 71 eb  |0:00+01:00L:..q.|
00000080  29 25 90 48 6b 4f 96 2f  44 f6                    |)%.HkO./D.|
0000008a
</code></pre>

<p>The file can now be sliced into single fields with <code>dd</code>:</p>

<div><pre><code><span># fingerprint base64 encoded</span>
<span>dd </span><span>if</span><span>=</span>kdminfo.bin <span>bs</span><span>=</span>1 <span>skip</span><span>=</span>16 <span>count</span><span>=</span>20 <span>status</span><span>=</span>none | <span>base64</span>

<span># AES key in hexadecimal</span>
<span>dd </span><span>if</span><span>=</span>kdminfo.bin <span>bs</span><span>=</span>1 <span>skip</span><span>=</span>122 <span>count</span><span>=</span>16 <span>status</span><span>=</span>none | hexdump <span>-C</span>

<span># date string in plain text ASCII</span>
<span>dd </span><span>if</span><span>=</span>kdminfo.bin <span>bs</span><span>=</span>1 <span>skip</span><span>=</span>97 <span>count</span><span>=</span>25 <span>status</span><span>=</span>none<span>;</span> <span>echo</span>
</code></pre></div>

<p>Format:</p>

<table>
  <thead>
    <tr>
      <th>Start</th>
      <th>Length</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>16</td>
      <td>Structure ID, binary, static <code>0xf1dc124460169a0e85bc300642f866ab</code>
</td>
    </tr>
    <tr>
      <td>16</td>
      <td>20</td>
      <td>Signer certificate fingerprint, binary, <code>KP2Av6m78dxI2YfpXMmlQauOFII=</code>
</td>
    </tr>
    <tr>
      <td>36</td>
      <td>16</td>
      <td>Composition Playlist UUID, <code>8840c390-2a0b-4621-b410-496bb8a4a94f</code>
</td>
    </tr>
    <tr>
      <td>52</td>
      <td>4</td>
      <td>Key Type, ASCII, <code>MDAK</code> = Main Sound</td>
    </tr>
    <tr>
      <td>56</td>
      <td>16</td>
      <td>Key UUID, <code>2e2e05b5-bbed-4579-96cc-9cd600eddb4c</code>
</td>
    </tr>
    <tr>
      <td>72</td>
      <td>25</td>
      <td>Not valid before date string, ASCII, <code>2024-01-28T19:00:00+01:00</code>
</td>
    </tr>
    <tr>
      <td>97</td>
      <td>25</td>
      <td>Not valid after date string, ASCII, <code>2024-02-04T20:00:00+01:00</code>
</td>
    </tr>
    <tr>
      <td>122</td>
      <td>16</td>
      <td>AES decryption key, binary, <code>0x4c3ab6ed71eb292590486b4f962f44f6</code>
</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>Validate signer certificate: Should match the fingerprint of the leaf certificate used to sign the KDM XML structure</li>
</ul>

<div><pre><code>openssl asn1parse <span>-in</span> leaf.pem <span>-noout</span> <span>-strparse</span> 4 <span>-out</span> - | <span>\</span>
    openssl dgst <span>-sha1</span> <span>-binary</span> | <span>\</span>
    openssl <span>base64</span>
</code></pre></div>

<ul>
  <li>Validate Composition Playlist UUID: Should appear in the KDM XML field <code>&lt;CompositionPlaylistId&gt;</code>
</li>
  <li>Validate Key UUID: Should appear in the KDM XML field <code>&lt;KeyId&gt;</code>
</li>
  <li>Validate Key Type: Should match the type for the respective Key UUID <code>&lt;TypedKeyId&gt;</code> block</li>
  <li>Validate Dates: Should appear in the KDM XML fields <code>&lt;ContentKeysNotValidBefore&gt;</code> and <code>&lt;ContentKeysNotValidAfter&gt;</code>
</li>
</ul>

<p>(This is a subset of checks documented in the <a href="https://www.dcimovies.com/compliance_test_plan/" target="_blank">DCI Compliance Test Plan</a>)</p>

<p>The projector itself has no trusted CA store for validating KDMs or DCPs. The whole process relies on the fingerprint stored in the <code>&lt;enc:CipherValue&gt;</code> and that the recipient cinema has no access to the Projectors Private Key.</p>

<h2 id="trusted-device-list">Trusted Device List</h2>

<p>Could one just build their own DCI/DCP projector?</p>

<p>Yes and no.</p>

<p>The software exists, in theory just a Linux PC and any projector / sound system is required.</p>

<p>The distributors use a so called “Trusted Device List” provided by the DCI certified projection system manufacturers. Projectors which are not mentioned on these lists will not get a DCP/KDM from many distributors.</p>

<p>Also a DCI certified projection system must be installed by an authorized company.</p>

<ul>
  <li>KDM Request by Serial Number: Many distributors just ask for projector model and serial number. They can query the actual projection system certificate in their distribution system</li>
  <li>KDM Request by Certificate: The cinema has to provide their projector certificate which is then validated against the projection systems manufacturer root certificate</li>
</ul>

<p>If a cinema is not “playing by the rules”, a 30k+ EUR projection system will become an expensive brick.</p>

<h2 id="mxf-file-format">MXF File Format</h2>

<p>MXF is used by the whole movie and broadcasting industry.</p>

<p>The paper of the SMPTE standard is again purchase-only.</p>

<p>Since the standard is quite complex, the Author used <a href="https://github.com/Myriadbits/MXFInspect" target="_blank">MXFInspect</a> as a shortcut and only parsed a single Frame / Triplet.</p>

<h3 id="ber-encoding">BER Encoding</h3>

<p><strong>B</strong>asic <strong>E</strong>ncoding <strong>R</strong>ules:</p>

<ul>
  <li>BER is indicated if the first bit of the byte is a <code>1</code>
</li>
  <li>Bits 2-8 contain the number of bytes used for the length</li>
  <li>The length bytes contain the length of the data</li>
</ul>

<table>
  <thead>
    <tr>
      <th>BER Indicator</th>
      <th>Length</th>
      <th>Content</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
<code>0x83</code> = <code>10000011b</code><br>= 3 bytes for length</td>
      <td>
<code>0x004F0C</code><br>= <code>20236d</code>
</td>
      <td>20236 bytes of data</td>
    </tr>
  </tbody>
</table>

<h3 id="triplet-format-single-movie-frame">Triplet Format (Single Movie Frame)</h3>

<h4 id="frame-triplet-structure">Frame Triplet Structure</h4>

<table>
  <thead>
    <tr>
      <th>Start</th>
      <th>Type</th>
      <th>Length</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>DAT</td>
      <td>16</td>
      <td>Encrypted triplet key</td>
    </tr>
    <tr>
      <td>16</td>
      <td>BER</td>
      <td>1</td>
      <td>BER <code>0x83</code> = <code>10000011b</code> = Next field is 3 bytes long</td>
    </tr>
    <tr>
      <td>17</td>
      <td>LEN</td>
      <td>3</td>
      <td>
<code>0x004F0C</code> = <code>20236d</code> = Length of the data</td>
    </tr>
    <tr>
      <td>20</td>
      <td>BER</td>
      <td>1</td>
      <td>BER <code>0x83</code> = <code>10000011b</code> = Next field is 3 bytes long</td>
    </tr>
    <tr>
      <td>21</td>
      <td>LEN</td>
      <td>3</td>
      <td>
<code>0x000010</code> = <code>16d</code> = Length of the next field</td>
    </tr>
    <tr>
      <td>24</td>
      <td>DAT</td>
      <td>16</td>
      <td>Cryptographic Context Link</td>
    </tr>
    <tr>
      <td>40</td>
      <td>BER</td>
      <td>1</td>
      <td>BER <code>0x83</code> = <code>10000011b</code> = Next field is 3 bytes long</td>
    </tr>
    <tr>
      <td>41</td>
      <td>LEN</td>
      <td>3</td>
      <td>
<code>0x000008</code> = <code>8d</code> = Length of the next field</td>
    </tr>
    <tr>
      <td>44</td>
      <td>DAT</td>
      <td>8</td>
      <td>Plaintext offset</td>
    </tr>
    <tr>
      <td>52</td>
      <td>BER</td>
      <td>1</td>
      <td>BER <code>0x83</code> = <code>10000011b</code> = Next field is 3 bytes long</td>
    </tr>
    <tr>
      <td>53</td>
      <td>LEN</td>
      <td>3</td>
      <td>
<code>0x000010</code> = <code>16d</code> = Length of the next field</td>
    </tr>
    <tr>
      <td>56</td>
      <td>DAT</td>
      <td>16</td>
      <td>Source Key</td>
    </tr>
    <tr>
      <td>72</td>
      <td>BER</td>
      <td>1</td>
      <td>BER <code>0x83</code> = <code>10000011b</code> = Next field is 3 bytes long</td>
    </tr>
    <tr>
      <td>73</td>
      <td>LEN</td>
      <td>3</td>
      <td>
<code>0x000008</code> = <code>8d</code> = Length of the next field</td>
    </tr>
    <tr>
      <td>76</td>
      <td>DAT</td>
      <td>8</td>
      <td>Source Length</td>
    </tr>
    <tr>
      <td>84</td>
      <td>BER</td>
      <td>1</td>
      <td>BER <code>0x83</code> = <code>10000011b</code> = Next field is 3 bytes long</td>
    </tr>
    <tr>
      <td>85</td>
      <td>LEN</td>
      <td>3</td>
      <td>
<code>0x004e90</code> = <code>20112d</code> = Length of the next field</td>
    </tr>
    <tr>
      <td>88</td>
      <td>DAT</td>
      <td>20112</td>
      <td>Encrypted Source Value</td>
    </tr>
  </tbody>
</table>

<!--
```
Cryptographic Context Link = 2F347C27660A4F87844B36F957D753A6
Plaintext Offset           = 0000000000000000
Source Key                 = 060E2B34010201010D01030115010801
Source Length              = 0000000000004E61 = 20065d
```

> [color=#e862ea] TODO: What are these fields? 🤷‍♂️
-->

<h4 id="slice-the-data">Slice the data</h4>

<div><pre><code><span># slice the first frame from the MXF bodypartition</span>
<span># offsets from MXFInspect</span>
<span>dd </span><span>if</span><span>=</span>file.mxf <span>bs</span><span>=</span>1 <span>count</span><span>=</span>20256 <span>skip</span><span>=</span>16524 <span>of</span><span>=</span>block.bin

<span># slice data from the frame</span>
<span>dd </span><span>if</span><span>=</span>block.bin <span>skip</span><span>=</span>88 <span>count</span><span>=</span>20112 <span>bs</span><span>=</span>1 <span>of</span><span>=</span>block-encrypted-data.bin
</code></pre></div>

<h3 id="decrypt-frame-data">Decrypt Frame Data</h3>

<p>The DCP encryption key: <code>4c3ab6ed71eb292590486b4f962f44f6</code></p>

<h4 id="the-frame-iv">The frame IV</h4>

<p>Every Frame is using a unique IV (Initialization Vector), which ensures that the AES Block Cipher generates always different cipher texts and makes brute force harder. This works similar to a Password Salt.</p>

<div><pre><code><span># the data starts with 16 bytes of iv and 16 bytes of cv</span>
<span># AES iv bytes</span>
<span>dd </span><span>if</span><span>=</span>block-encrypted-data.bin <span>bs</span><span>=</span>1 <span>count</span><span>=</span>16 <span>of</span><span>=</span>iv.bin
</code></pre></div>

<p>Output of <code>hexdump -C iv.bin</code>:</p>

<div><pre><code>00000000  16 6e 7b d1 67 81 44 2e  7a ca de 3c 46 cc d7 39  |.n{.g.D.z..&lt;F..9|
00000010
</code></pre></div>

<h4 id="validate-cv">Validate CV</h4>

<p>Since there is no way to know if a decryption was successful when the content of the data is unknown, a CV (Check Value) is used. The Check Value is encrypted with the same AES Key + IV, but the plain text value is known.</p>

<div><pre><code><span># the data starts with 16 bytes of iv and 16 bytes of cv</span>
<span># AES cv bytes</span>
<span>dd </span><span>if</span><span>=</span>block-encrypted-data.bin <span>bs</span><span>=</span>1 <span>count</span><span>=</span>16 <span>skip</span><span>=</span>16 <span>of</span><span>=</span>cv.bin
</code></pre></div>

<div><pre><code><span>cat </span>cv.bin | openssl enc <span>-aes128</span> <span>-d</span> <span>\</span>
    <span>-K</span> 4c3ab6ed71eb292590486b4f962f44f6 <span>\</span>
    <span>-iv</span> 166e7bd16781442e7acade3c46ccd739 <span>\</span>
    <span>-nosalt</span> <span>-nopad</span> | hexdump <span>-C</span>
</code></pre></div>

<div><pre><code>00000000  43 48 55 4b 43 48 55 4b  43 48 55 4b 43 48 55 4b  |CHUKCHUKCHUKCHUK|
00000010
</code></pre></div>

<p>If the result matches <code>0x4348554B4348554B4348554B4348554B</code> the key is correct.</p>

<h4 id="decrypt-data">Decrypt data</h4>

<div><pre><code><span># Remove IV and CV from the encrypted data block</span>
<span>dd </span><span>bs</span><span>=</span>1 <span>skip</span><span>=</span>32 <span>\</span>
    <span>if</span><span>=</span>block-encrypted-data.bin <span>\</span>
    <span>of</span><span>=</span>block-encrypted-data-nocryptinfo.bin
</code></pre></div>

<div><pre><code><span># Decrypt data block</span>
<span>cat </span>block-encrypted-data-nocryptinfo.bin | <span>\</span>
    openssl enc <span>-aes128</span> <span>-d</span> <span>\</span>
        <span>-K</span> 4c3ab6ed71eb292590486b4f962f44f6 <span>\</span>
        <span>-iv</span> 166e7bd16781442e7acade3c46ccd739 <span>\</span>
        <span>-nosalt</span> <span>-nopad</span> <span>&gt;</span> block-decrypted-data.bin
</code></pre></div>

<p>MXFs created by DCP-o-Matic contain <code>libdcp</code> in the hexdump, which indicates that the decryption was successful.</p>

<p>Output of <code>hexdump -C block-decrypted-data.bin | head</code>:</p>

<div><pre><code>00000000  3a f0 b7 f5 53 49 eb b7  c0 c0 cb a5 c9 2f 35 19  |:...SI......./5.|
00000010  00 00 00 00 00 00 00 00  00 00 07 ce 00 00 04 38  |...............8|
00000020  00 00 00 00 00 00 00 00  00 03 0b 01 01 0b 01 01  |................|
00000030  0b 01 01 ff 52 00 12 01  04 00 01 01 05 03 03 00  |....R...........|
00000040  00 77 88 88 88 88 88 ff  5c 00 23 22 97 20 96 f0  |.w......\.#". ..|
00000050  96 f0 96 c0 8f 00 8f 00  8e e0 87 50 87 50 87 68  |...........P.P.h|
00000060  70 05 70 05 70 47 77 d3  77 d3 77 62 ff 55 00 13  |p.p.pGw.w.wb.U..|
00000070  00 50 00 00 00 4d 40 00  00 00 00 49 00 00 00 00  |.P...M@....I....|
00000080  49 ff 64 00 0a 00 01 6c  69 62 64 63 70 ff 90 00  |I.d....libdcp...|
00000090  0a 00 00 00 00 4d 40 00  03 ff 93 ef fe 2c 71 ff  |.....M@......,q.|
</code></pre></div>

<h2 id="magic-signatures">Magic Signatures</h2>

<p>At first, the decrypted Frame could not be opened in GIMP.</p>

<p>To enable programs to open a file in the correct way, many files contain so called “<a href="https://en.wikipedia.org/wiki/List_of_file_signatures" target="_blank">Magic Signatures</a>” at its beginning.</p>

<p>This magic value in <code>block-decrypted-data.bin</code> is incorrect for unknown reasons. When extracting a JPEG2000 frame from an unencrypted MXF, the signature is correct. As a simple hack, the author just copied the signature from the unencrypted MXF frame to the decrypted one:</p>

<div><pre><code><span># offset again from MXFInspect</span>
<span>dd </span><span>if</span><span>=</span>j2c_caa6b39e-bd57-4676-9797-112e96a6f0c3.mxf <span>bs</span><span>=</span>1 <span>skip</span><span>=</span>16524 <span>count</span><span>=</span>20085 <span>of</span><span>=</span>frame.bin

<span># unencrypted frame does not contain crypto info</span>
<span># so we just have to slice the first BER header</span>
<span>dd </span><span>if</span><span>=</span>framedata.bin.j2k <span>bs</span><span>=</span>1 <span>skip</span><span>=</span>20 <span>count</span><span>=</span>16 <span>of</span><span>=</span>j2k_header.bin

<span># now back to the decrypted mxf frame</span>
<span># replace signature</span>
<span>cp </span>j2k_header.bin frame.j2k
<span>dd </span><span>if</span><span>=</span>block-decrypted-data.bin <span>bs</span><span>=</span>1 <span>skip</span><span>=</span>16 <span>&gt;&gt;</span> image.j2k
</code></pre></div>

<p>It should now be possible to open the file in GIMP. GIMP will show the frame with wrong colors, as MXF files use a custom color space.</p>

<p><img src="https://serverless.industries/assets/kaizotrap-decrypted.jpg" alt="Movie Screenshot with wrong color space"></p>

<p>The original Frame with correct colors:</p>

<p><img src="https://serverless.industries/assets/kaizotrap-original.jpg" alt="Movie Screenshot with correct colors"></p>

<p>Credit: <a href="https://www.youtube.com/watch?v=lIES3ii-IOg" target="_blank">Kaizo Trap by Guy Collins Animation</a></p>

<h2 id="why-its-safe">Why it’s safe</h2>

<p>Everything relies on “never reusing AES Keys” and “protected private keys”.</p>

<ul>
  <li>KDM data is encrypted with a 2048 bit RSA key</li>
  <li>MXF data is encrypted with AES-128</li>
  <li>Decryption keys are always stored in TPM-like hardware</li>
  <li>Every DCP uses unique encryption keys</li>
  <li>Every projector uses unique certificates/keys</li>
  <li>A DCI certified projector is required</li>
  <li>Distributors can verify if a certificate belongs to a certified DCI projector</li>
</ul>

<h2 id="just-record-it">Just record it</h2>

<p>Encrypted DCPs use <a href="https://dcpomatic.com/forum/viewtopic.php?t=2372" target="_blank">Forensic Watermarks</a> which contain the serial number of the
projection system. So if a recorded copy of a movie appears online, the theatre will have to answer
serious questions and may never get movies again.</p>

<p>Pirated copies of movies have it’s origin most likely from other sources.</p>

<h2 id="how-its-going">How it’s going</h2>

<p>DCI has released version 1.4.4 of the <a href="https://www.dcimovies.com/specification/" target="_blank">specification</a>, which now allows playback of DCPs with expired signer certificate.</p>

<p>The manufacturers already started to work on a software update.</p>

<h2 id="sources">Sources</h2>

<ul>
  <li><a href="https://www.dcimovies.com/specification/index.html" target="_blank">DCI Specification</a></li>
  <li><a href="https://www.dcimovies.com/compliance_test_plan/" target="_blank">DCI Compliance Test Plan</a></li>
  <li><a href="https://marc.info/?l=openssl-users&amp;m=114884533706459&amp;w=2" target="_blank">OpenSSL Foo</a></li>
  <li><a href="https://github.com/wolfgangw/digital_cinema_tools_distribution/blob/master/cinemaslides#L1737" target="_blank">Key Types</a></li>
  <li><a href="https://github.com/wolfgangw/digital_cinema_tools_distribution/tree/master" target="_blank">DC Tools by WolfgangW</a></li>
  <li><a href="https://github.com/Myriadbits/MXFInspect" target="_blank">MXFInspect</a></li>
  <li><a href="https://tech.ebu.ch/docs/techreview/trev_2010-Q3_MXF-2.pdf" target="_blank">MXF Triplets</a></li>
  <li><a href="https://web.archive.org/web/20201103045630id_/https://ieeexplore.ieee.org/ielx7/8984679/8984680/08984681.pdf" target="_blank">SMPTE Standard</a></li>
  <li><a href="https://interop-docs.cinepedia.com/Document_Release_2.0/mpeg_ii_track_file_encryption.pdf" target="_blank">MXF Triplet Encryption</a></li>
  <li><a href="https://github.com/cth103/libdcp/issues/11" target="_blank">Showing jpeg2000 in Gimp / parsing jpeg2000 data from mxf</a></li>
  <li><a href="https://en.wikipedia.org/wiki/List_of_file_signatures" target="_blank">List of magic signatures</a></li>
  <li><a href="https://dcpomatic.com/forum/viewtopic.php?t=2372" target="_blank">Forensic Watermarks in DCPs</a></li>
</ul>

<h2 id="credits">Credits</h2>

<p>Thanks for reading and feedback goes to: Pliskin, babel</p>

    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[The Movie Mistake Mystery from "Revenge of the Sith" (423 pts)]]></title>
            <link>https://fxrant.blogspot.com/2025/04/the-movie-mistake-mystery-from-revenge.html</link>
            <guid>43745141</guid>
            <pubDate>Sun, 20 Apr 2025 17:29:28 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://fxrant.blogspot.com/2025/04/the-movie-mistake-mystery-from-revenge.html">https://fxrant.blogspot.com/2025/04/the-movie-mistake-mystery-from-revenge.html</a>, See on <a href="https://news.ycombinator.com/item?id=43745141">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>Movies are handmade, and just like any other art form, sometimes the seams that hold movies together become visible to the audience. For movie fans, these moments are very exciting. Catching a glimpse behind the scenes is an exhilarating experience. My favorite kind of “movie mistake” is the kind that is hiding in plain sight... but the casual viewer missed it upon first viewing. Or perhaps even the second viewing, or even the third.&nbsp;</p><p>I’m particularly obsessed with moments that reveal the craft and artistry of the magic trick of a shot that slightly shatters the illusion of cinema. These revealing moments have been in movies since the dawn of cinema, and are everywhere (if you know exactly where to look).</p><p>One of my favorite films of all time also has one of the funniest revealing mistakes I've seen. Edward Zwick's "Glory" (1989) takes place during the American Civil War, and this scene has a blink-and-you'll-miss-it reminder of the film's very modern production:</p><p>Because the audiences' eyes are firmly fixed on Morgan Freeman's character in the center of frame, very few will ever pick up the little kid with the extremely modern wristwatch that enters frame on far screen right. Sometimes the on-set teams that work with featured extras—as well as the costume department that dress the extras—will occasionally miss a modern piece of jewelry on an actor.</p><p>Here's a fun one from Martin Scorsese's masterpiece "Goodfellas" (1990), in one of the closing shots of a nail-bitingly tense scene where Karen nearly walks into an ambush:</p><p>The period-appropriate "movie" license plate dramatically dangles then completely falls off the car in the middle of the take, revealing the actual 1990-era license plate of the car used for the scene. This is an accidental and hilarious glimpse into the detailed hard work that goes into making a Hollywood period piece (this portion of the film takes place in 1980), where every license plate of every car in the movie needed special, detailed work to make them period-appropriate.&nbsp;</p><div><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhMcj2VC4Ju_5PCmfKdkGkSC6r2UzvK2qzh0d6NcxdtSdPSk24l8m5oTt3Yeq5GLp0wPZqjUlq1pHDiutRKWpMZucWukSa3qBfHw8J8KOu-dGExAWf97ym5Ikpif9BbZnKqLOwef_z1I2FXFFradn3C8BOr2GkMU8SfJzmBafEDtnv_4d8FeV4/s1908/illustration.png"><img data-original-height="1080" data-original-width="1908" height="226" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhMcj2VC4Ju_5PCmfKdkGkSC6r2UzvK2qzh0d6NcxdtSdPSk24l8m5oTt3Yeq5GLp0wPZqjUlq1pHDiutRKWpMZucWukSa3qBfHw8J8KOu-dGExAWf97ym5Ikpif9BbZnKqLOwef_z1I2FXFFradn3C8BOr2GkMU8SfJzmBafEDtnv_4d8FeV4/w400-h226/illustration.png" width="400"></a></p><p>The finale of James Cameron's epic "Aliens" (1986) features the android Bishop (Lance Henriksen) getting severed in half, but still functioning enough to save Newt (Carrie Henn) from getting sucked into the vacuum of space. The action-packed scene features an absolutely wonderful accidental reveal of how the cut-in-half android was accomplished on the set:</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgHvAdErohL2BD-qytmJ7mGVvxdRGRuzMOiwXiI8kR6y0Pw707rqoLC58rp3AWp3gHhAt-O5YeR-thdq5AbnQrlhTtoc44TQsDctIyA2Ykga8UQVB7gGQphV1-wPNOChutR7MIFC2dzrBfxkRyeWXr0NjwW9kwU8N28sIgHlotDkprZNKZP9EY/s1920/bishop.png"><img data-original-height="1036" data-original-width="1920" height="216" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgHvAdErohL2BD-qytmJ7mGVvxdRGRuzMOiwXiI8kR6y0Pw707rqoLC58rp3AWp3gHhAt-O5YeR-thdq5AbnQrlhTtoc44TQsDctIyA2Ykga8UQVB7gGQphV1-wPNOChutR7MIFC2dzrBfxkRyeWXr0NjwW9kwU8N28sIgHlotDkprZNKZP9EY/w400-h216/bishop.png" width="400"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrvAm_i6yGBzc5507CmHJY6q_LcLnMS-eTcXVQhyphenhyphenA8uYrX4dXL80CVd4EwJOAEbJZPgeGawDEUn2pdc5KqlBuZJLuaw7fWJdzoG-r2a1vy_uQU_neb-5N5Yz8AaiDR0UtxciF4GhUhY3Tc6-0VamANpf-FePIL0YbeFnucGGA4QEKyVhMau7E/s433/alienshole.2025-04-17%2012_43_03.gif"><img data-original-height="227" data-original-width="433" height="210" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrvAm_i6yGBzc5507CmHJY6q_LcLnMS-eTcXVQhyphenhyphenA8uYrX4dXL80CVd4EwJOAEbJZPgeGawDEUn2pdc5KqlBuZJLuaw7fWJdzoG-r2a1vy_uQU_neb-5N5Yz8AaiDR0UtxciF4GhUhY3Tc6-0VamANpf-FePIL0YbeFnucGGA4QEKyVhMau7E/w400-h210/alienshole.2025-04-17%2012_43_03.gif" width="400"></a></p><p><i><span>"Aliens" (1986)</span></i></p><p>The amazing makeup effects applied to Henriksen's body covers the bottom half of his body which is hidden through a hole in the set. But in order to get that little bit of extra athletic stretch to grab Newt, Henriksen popped his body out of the hole a little too far, revealing the classic stage trick. However, I'd gather that 99% of the audience has never noticed this little reveal of stagecraft since our eyes are fixed on Newt on screen right, sliding toward the airlock, and not on the ground contact of Bishop's half-body, which had already been firmly established in the scene.</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjU9LeqQEqiQZjf4bniZIvtLsXvLwZa6loSJneVo01NSsgsU60jw0nlF-YB-lQmdd3o-Uq1GOWb19_ctP1J5GMakIBHgCWrFCIlg2OQ1QS49k1ZIFyPaqOCOhpnfLCJCnWn3rWQ-QmSqboHlgpw6WxJPAy-OnoK0rnsMiPOX5SqBjT9fLJOQRc/s1045/circled.png"><img data-original-height="568" data-original-width="1045" height="217" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjU9LeqQEqiQZjf4bniZIvtLsXvLwZa6loSJneVo01NSsgsU60jw0nlF-YB-lQmdd3o-Uq1GOWb19_ctP1J5GMakIBHgCWrFCIlg2OQ1QS49k1ZIFyPaqOCOhpnfLCJCnWn3rWQ-QmSqboHlgpw6WxJPAy-OnoK0rnsMiPOX5SqBjT9fLJOQRc/w400-h217/circled.png" width="400"></a></p><p>Avoiding reflections of the crew appearing to camera is a constant struggle for filmmakers. In Steven Spielberg's first masterpiece "Duel" (1971), David (Dennis Weaver) gets into a phone booth to make a call, with the front glass face of the booth aimed directly at the camera, and if the audience's gaze drifted off of Weaver's face, they could catch a glimpse of the crew:</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiF2nMOIJJcigCUwmwYiNCUFK3LSPyqR98CGn7XdriPNtxl1cJ-wHIb11RxPjm3u9LVV8LmypcMzbLLQl8DTTNwrp5eGMx6rs-PPazN7hPp2PihyphenhyphenZrkldyEB49amd3N0gr4tlT-KCokNOIhysaS60VIYxoVWxvTWUoNJR6QUAzH99MOtfshAHY/s442/duel_short.gif"><img data-original-height="249" data-original-width="442" height="225" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiF2nMOIJJcigCUwmwYiNCUFK3LSPyqR98CGn7XdriPNtxl1cJ-wHIb11RxPjm3u9LVV8LmypcMzbLLQl8DTTNwrp5eGMx6rs-PPazN7hPp2PihyphenhyphenZrkldyEB49amd3N0gr4tlT-KCokNOIhysaS60VIYxoVWxvTWUoNJR6QUAzH99MOtfshAHY/w400-h225/duel_short.gif" width="400"></a></p><p><i><span>"Duel" (1971)</span></i></p><p>In the reflection, we see a few crew members on screen left, the camera itself, and director Spielberg on the right (he's the one shuffling left and right, who lowers his head in the middle of the take). Again, like all the examples I'm providing in this article, hardly anyone would ever notice these moments. When a viewer catches these brief moments, the illusion of the movie is briefly broken, but for fans of the filmmaking process, it's a joyful reminder of the overall magic trick. The most intimate movie scene with only two characters in a desolate, isolated environment actually was created by dozens and dozens of crew members standing slightly out of frame.</p><p>Look for another accidental 'crew caught on camera' moment in the reflection in a car window in the 'leave the gun, take the cannoli' scene from "The Godfather" (1972), one that very few people ever notice.</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgASHi1vEZJq9xexlwe6N6XnaKUFAH4aOLXmHKCv9BVNxVMiPwJ_Pj_nEabuKrD-nJqZDhITBBmRoNdyYmO3jKQEgLzkHPChAr50lpMRd5yJYt6whAJlaIVY7wOBLK18qVEOOpCbj4b7YeAIAjvItvDNC0tKFlLCk2P8s3NtQRy7Ahvy9kMCe8/s1920/duel_circle.png"><img data-original-height="1080" data-original-width="1920" height="225" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgASHi1vEZJq9xexlwe6N6XnaKUFAH4aOLXmHKCv9BVNxVMiPwJ_Pj_nEabuKrD-nJqZDhITBBmRoNdyYmO3jKQEgLzkHPChAr50lpMRd5yJYt6whAJlaIVY7wOBLK18qVEOOpCbj4b7YeAIAjvItvDNC0tKFlLCk2P8s3NtQRy7Ahvy9kMCe8/w400-h225/duel_circle.png" width="400"></a></p><p>Here's a super quick revealing mistake from "The Dark Knight" (2008) that is a true "you'll never see this in real time" moment:</p><div><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg914mIcnatARLUxXQIIv3YV-sMpkCbW5HIt6fqjlMW70OT5z6_Rn39zeenC42Sq_UYQk-eFX6DwW4aAUj9td-cqk0pzWhx0utnQOq8yuzxDn2hSJ2ptXYxhfydZaTz-F8Dho6lDeOgrdNuegiP2B0cHQe8UuDjRSX4EhWDSoU_HilsML5NXIA/s526/darkknight_crew_BRIGHTfull.2025-04-17%2012_56_27.gif"><img data-original-height="219" data-original-width="526" height="166" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg914mIcnatARLUxXQIIv3YV-sMpkCbW5HIt6fqjlMW70OT5z6_Rn39zeenC42Sq_UYQk-eFX6DwW4aAUj9td-cqk0pzWhx0utnQOq8yuzxDn2hSJ2ptXYxhfydZaTz-F8Dho6lDeOgrdNuegiP2B0cHQe8UuDjRSX4EhWDSoU_HilsML5NXIA/w400-h166/darkknight_crew_BRIGHTfull.2025-04-17%2012_56_27.gif" width="400"></a></p><p><i><span>"The Dark Knight" (2008)</span></i></p></div><p>Although "The Dark Knight" example gives the audience a much clearer look at the camera operator, the focus puller(?) and the camera itself reflected in the interrogation room’s mirrors, the shot is a lot harder to see the crew members and equipment in real time due to the chaotic and energetic camera movement, as opposed to the locked off nature of the "Duel" example.</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj0YNfNS0gG-xlaqmH-9KJDvwwpsHkIMycqul7SW8X2hE-LNZf0RHBM3LIXuQRlqQo0xD4sj5xzUW_Cu-A2gMXeBUmN55gZwHMlDuBL3nuxqCt0rJDDSGM2hTUzrkuWXxuxIg73mSaclQudBt75y_w_X8YsuWQRFC7iPc5NDSb6dQnQ2D3JxAQ/s1918/darkknight_compare.png"><img data-original-height="800" data-original-width="1918" height="166" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj0YNfNS0gG-xlaqmH-9KJDvwwpsHkIMycqul7SW8X2hE-LNZf0RHBM3LIXuQRlqQo0xD4sj5xzUW_Cu-A2gMXeBUmN55gZwHMlDuBL3nuxqCt0rJDDSGM2hTUzrkuWXxuxIg73mSaclQudBt75y_w_X8YsuWQRFC7iPc5NDSb6dQnQ2D3JxAQ/w400-h166/darkknight_compare.png" width="400"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibaiynJTHf2-1u0HH7_do8IU4-CU7kzWOzAUP4syOn9_7YRAVLSowGvKwEPI52YA3rk4xAUpd4BzXJbBpfnADRmYZoijN4Vkim_OHVJjFrp1S1e8p2AokM1GJDAPSojCoRP4DgcbKlGzmjGpRLrPrZoADLBab4haCQzNsrzxSHo7ThaySW63w/s500/abyss_wipe.gif"><img data-original-height="281" data-original-width="500" height="225" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibaiynJTHf2-1u0HH7_do8IU4-CU7kzWOzAUP4syOn9_7YRAVLSowGvKwEPI52YA3rk4xAUpd4BzXJbBpfnADRmYZoijN4Vkim_OHVJjFrp1S1e8p2AokM1GJDAPSojCoRP4DgcbKlGzmjGpRLrPrZoADLBab4haCQzNsrzxSHo7ThaySW63w/w400-h225/abyss_wipe.gif" width="400"></a></p><p><i><span>"The Abyss" (1989)</span></i></p><p>Amazingly, many folks who watch that clip from the dramatic drowning sequence cannot consciously see the bit of filmmaking that literally blocks the actors in an intimate moment. This is my favorite example of a movie's incredible emotional power — the scene is so dramatic and intense that most viewers cannot consciously see a giant cloth wiping away water from the lens of the camera in the middle of a shot.</p><p>Incidentally, <b>some of these revealing mistakes are being erased from cinema history</b> due to overzealous restoration projects — the process of “cleaning up” a film for newer formats like Blu-ray and 4K — which is deeply wrong. This is a much bigger topic on which I have very strong thoughts and the hottest of takes. Just look at what modern restorations have done to two of these revealing mistakes from "Goodfellas" and "Aliens":</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiHamPBMDtOZiH_6g10yv7e4Pp9vRyA26atkaG2cW-uzswK3zQqOUHwgGiH_mvWTXKWIvddFqc4RKdsaanqjgxHOtGHlUZa79k81xaf_i-YV1AeIpbNzfCx1DBMMSeHkBYMQWsyuKrevfCYObg-z5MoMRfn6k5uVnxSqPtvZFIqBlwmClkwU80/s640/LicensePlate%20_restoration.gif"><img data-original-height="362" data-original-width="640" height="226" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiHamPBMDtOZiH_6g10yv7e4Pp9vRyA26atkaG2cW-uzswK3zQqOUHwgGiH_mvWTXKWIvddFqc4RKdsaanqjgxHOtGHlUZa79k81xaf_i-YV1AeIpbNzfCx1DBMMSeHkBYMQWsyuKrevfCYObg-z5MoMRfn6k5uVnxSqPtvZFIqBlwmClkwU80/w400-h226/LicensePlate%20_restoration.gif" width="400"></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjczOajV2AciOuOHRI9NXzBIfGyIKJbjRdfinr7TKVb_TTBP-uQQtDCWqGuDeoaY1FJElsr6HXU_I8sqhXHx7gAdNKKbpk8WHL6ByirFITWb_Vhqsq_TL042SKHjqftXYhZSbYXDGxA73zmjHaF3vBPtHDp_POCUDligVeWAi5N5G8XYRKL_A/s500/alienshole_fullmoviewithtextandcompare.gif"><img data-original-height="270" data-original-width="500" height="216" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjczOajV2AciOuOHRI9NXzBIfGyIKJbjRdfinr7TKVb_TTBP-uQQtDCWqGuDeoaY1FJElsr6HXU_I8sqhXHx7gAdNKKbpk8WHL6ByirFITWb_Vhqsq_TL042SKHjqftXYhZSbYXDGxA73zmjHaF3vBPtHDp_POCUDligVeWAi5N5G8XYRKL_A/w400-h216/alienshole_fullmoviewithtextandcompare.gif" width="400"></a></p><p>Painting out these movie mistakes as part of a restoration is wrong. <i>What's in the movie is in the movie, </i>and altering the movie to this extent is a form of revisionist history. Cinema is worse off when over-aggressive restorations alter the action within the frame. To me, this is equivalent to swapping out an actor's performance with a different take, or changing the music score during an action sequence, or replacing a puppet creature with a computer graphics version of the same creature decades after release. But I digress.</p><p>• &nbsp;• &nbsp;• &nbsp;•</p><p>Like I said at the start, movies are handmade, and that's true even in today's landscape where digital visual effects are a prominent part of filmmaking. In the same way that physical crews use physical tools to build sets, construct costumes and craft props, visual effects artists use digital tools to craft an image. And with the hand-made nature of any art form, the lack of clinical accuracy lends to its charm and sometimes offers an accidental peek behind the scenes of how the art was constructed.</p><p>Every few years, a "Star Wars" revealing mistake bubbles up on the internet, one from the Mustafar sequence from Episode III, "Revenge of the Sith" (2005). But the bizarre moment in the single shot was not as easily explainable as the examples I've shown above.</p><p>Being in the privileged position of currently working at Industrial Light &amp; Magic, the visual effects company that made the visual effects for the movie (and having worked on that movie [and that sequence!]), I took it upon myself to try and solve the mystery.</p><p>Please enjoy the story, written by Ian Kintzle, of how I investigated the mystery of the "Force Ghost" in "Revenge of the Sith", as it originally appeared in the Star Wars Celebration Program for Japan 2025.</p><p>• &nbsp;• &nbsp;• &nbsp;• &nbsp;• &nbsp;• &nbsp;• &nbsp;•</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgEb2mtF1FNE5KEKPJjSs9hyphenhyphend5cAatilKzhr5B1E8cS-zRT1QI3XEXcX4SBRgLql4-C9ilaCiSSETbvWEl6SlxcbW495GsA6SbcjvulKOl6ZhyynisOsIH22CMDP-JmdMXb2opBnT-iOGoHglz_E6rgqXc8HSvqgbgm4Ibihz-P1RVnOKewPmQ/s1918/finalshot_singleframeA.jpg"><img data-original-height="816" data-original-width="1918" height="170" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgEb2mtF1FNE5KEKPJjSs9hyphenhyphend5cAatilKzhr5B1E8cS-zRT1QI3XEXcX4SBRgLql4-C9ilaCiSSETbvWEl6SlxcbW495GsA6SbcjvulKOl6ZhyynisOsIH22CMDP-JmdMXb2opBnT-iOGoHglz_E6rgqXc8HSvqgbgm4Ibihz-P1RVnOKewPmQ/w400-h170/finalshot_singleframeA.jpg" width="400"></a></p><p><i><b><span>THE FORCE GHOST IN THE MACHINE</span></b></i></p><p><i><span>By Ian Kintzle</span></i></p><p><i><span>April 2025, for Star Wars Celebration Japan</span></i></p><p><span>It was spring 2005, and Industrial Light &amp; Magic (ILM)— George Lucas’ dream factory—had just completed two years of work on one of its most ambitious projects yet: "Star Wars: Revenge of the Sith". A massive undertaking, "Sith" required a herculean effort from hundreds of artists and technicians at ILM, crafting 367 computer- generated models, hundreds of 3D and 2D environments, 47 practical miniature setups, and 13,000,000 renders and composites across 2,151 effects shots.</span></p><p><span>Out of all of the effects sequences in the picture, perhaps none was more challenging than the operatic duel between Darth Vader (Hayden Christensen) and Obi-Wan Kenobi (Ewan McGregor) on the volcanic planet of Mustafar. The battle starts within the Klegger Corp Mining Facility situated high on the rocky banks of a vast lava river, and progresses through the facility onto a heat-collection arm stretching over a fast- moving river of boiling magma, and then onto a pair of lava skiffs and panning droids. The battle finally ends on a bank with Vader severely burned and maimed.</span></p><p><span>For the Mustafar sequence, ILM’s team of compositors, led by Compositing Supervisor Pat Tubach and Sequence Supervisor Michael Conte, were faced with the daunting challenge of seamlessly blending all of these live-action plates, computer-generated imagery, and miniature effects, into one cohesive sequence. But with so many individual elements, mistakes happen, and in the case of Revenge of the Sith, a peculiar anomaly slipped through the cracks at precisely 1 hour, 59 minutes, and 2 seconds into the film.</span></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj9Y3af6L5NqwRyByVmK5V-h8fEwV8KjiN0r1UbtqwggsMCVMTciUmSBPrJO9YHUushdOESEJ2UsYi4113wq3UGQo2_Q1LRMccUwyI3_lR7dpLbGn3D0EQoVvELQYDjg8yHCrD9b6mN-evcA8cmvodXq1CS13glDu4Yw_rgxKZMR53P3gDJHGc/s500/finalsequence.gif"><span><img data-original-height="213" data-original-width="500" height="170" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj9Y3af6L5NqwRyByVmK5V-h8fEwV8KjiN0r1UbtqwggsMCVMTciUmSBPrJO9YHUushdOESEJ2UsYi4113wq3UGQo2_Q1LRMccUwyI3_lR7dpLbGn3D0EQoVvELQYDjg8yHCrD9b6mN-evcA8cmvodXq1CS13glDu4Yw_rgxKZMR53P3gDJHGc/w400-h170/finalsequence.gif" width="400"></span></a></p><p><span>The internet, ever vigilant, began to take notice of this curious artifact around 2015 – a blink-and-you’ll-miss- it moment of a ghostly-robed figure with dark hair that appears behind Anakin Skywalker for only a frame or two just as he leaps from the panning droid to meet Obi-Wan on the lava skiff. The strange figure sparked countless theories and speculation. Was it a “Force ghost”? An easter egg from a mischievous ILM artist?</span></p><p><span>Todd Vaziri, a seasoned veteran at ILM who also worked on the film as a compositor, was intrigued by the mystery. “Just before the release of The Force Awakens, I started to see this ‘easter egg’ bubble up on social media from time to time of what appears to be a Force ghost on Mustafar,” Vaziri says. “The discourse would really get going. Somebody would spot the artifact and go, ‘What the heck was this?’ And another would say, ‘What do you mean? I don’t see anything.’ And only when you step through the scene, frame-by-frame, do you see what looks like a ghostly face behind Anakin in the shot where he jumps up from the panning droid to continue the lightsaber duel on the lava skiff. And honestly, in-motion, nobody can spot this.”</span></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhYvOBxrHhHq0CiZlSavot6K1cDeaDHKK-OxHOqGpiSBTKMahcyR_4sUwab0y8EJscd2r8mJQ75Diy1xT2gfg4jxRGa6TTmg6dmtG7WUF2u08Se3LSXIRzPUQBE9ItefL8dKzv8yAISsj9fjyVb3VtciyuWcKQDtQpefp2SocuSAFUSMAxeL_M/s500/animation.gif"><span><img data-original-height="213" data-original-width="500" height="170" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhYvOBxrHhHq0CiZlSavot6K1cDeaDHKK-OxHOqGpiSBTKMahcyR_4sUwab0y8EJscd2r8mJQ75Diy1xT2gfg4jxRGa6TTmg6dmtG7WUF2u08Se3LSXIRzPUQBE9ItefL8dKzv8yAISsj9fjyVb3VtciyuWcKQDtQpefp2SocuSAFUSMAxeL_M/w400-h170/animation.gif" width="400"></span></a></p><p><span>Getting to the bottom of the mystery would prove difficult. ILM works on dozens of motion pictures and television shows per year, and as older projects are moved offline into their archives, the steps to bring them back to the servers are involved. Revenge of the Sith was no exception. It would require scavenging through terabytes of unaltered greenscreen photography that hasn’t been touched in years. So Vaziri put it behind him – for a time. But in 2024 when the discourse regarding the “Force ghost” roared alive again on social media, Vaziri decided that enough was enough. But in order to locate the anomaly, he would need to spelunk into the film’s digital archives at ILM which had since gone dark.</span></p><p><span>“I think it took 24 hours to unearth the footage and put it back on our servers. I was so excited, my heart was pounding out of my chest. No one had seen the original greenscreen footage for nearly twenty years,” Vaziri says. “The problem was I didn’t remember exactly what these plates looked like, both because it wasn’t my shot, and it was two decades prior. So I dug, and I dug, and finally I found the plate photography. I couldn’t believe it. There on set was a man—likely a stunt rigger—wearing not a robe, but a peculiar shirt that resembled one, standing behind Hayden, manually puppeteering the greenscreen lava skiff that he and Ewan were fighting on. His face and the “Force ghost” matched up frame-for-frame.” During this excavation process, Vaziri was also able to uncover a variety of in-progress versions of the shot composited with very basic layering. In those early takes, the robed man was not present. This meant one thing: the compositor had done some articulates to remove the mystery man, but the green screen extraction wasn’t quite done yet.</span></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjxmX6_02BHHum6AiA3Hz9X3NDxDsyzBCfeyj6Rs-rmTDZoZEw78OEj1hvTlxbHn1-G1R-Ur0Qdy7G2vhbuy_AP1tza0uAlHr216oz-MXNbrp0WWbLEGNjVDALO9UZJG8WYd1jKz2yv5HAic4dNDS4SpXNTxr1dWCdI4rmtyb8VLFBnqDvRw74/s1175/greenscreen_compare.png"><span><img data-original-height="1175" data-original-width="1024" height="400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjxmX6_02BHHum6AiA3Hz9X3NDxDsyzBCfeyj6Rs-rmTDZoZEw78OEj1hvTlxbHn1-G1R-Ur0Qdy7G2vhbuy_AP1tza0uAlHr216oz-MXNbrp0WWbLEGNjVDALO9UZJG8WYd1jKz2yv5HAic4dNDS4SpXNTxr1dWCdI4rmtyb8VLFBnqDvRw74/w349-h400/greenscreen_compare.png" width="349"></span></a></p><p><span>“We have to do frame-by-frame tweaking by hand, which means creating new garbage mattes in order to paint details into the motion- blurred edges,” Vaziri explains. “At some point during the process of refining the edges of the green screen extraction—which required new garbage mattes—the stunt rigger’s head was inadvertently revealed again in that paint process—but because you can’t see it unless you are stepping through it frame-by-frame— it was deemed finished by the artist, by the compositing supervisor, by the visual effects supervisor, by the editors, and by George Lucas himself. Nobody that was part of this process ever caught that and that’s how it made it in the movie. But in a way, I think it’s really wonderful. Plenty of my shots have mistakes in them, and as the saying goes: perfect is the enemy of good. We want our shots to be as perfect as they can be, but we can’t hit everything. In the last 20 years, we have evolved what we call the “Final Check” process, which is our way of scrutinizing shots before they leave ILM. An extra step of quality control, if you will. The bottom line is that we put human hands on every single one of the thousands of shots that you see in Star Wars. This world is handmade, and little things like this become part of ILM history.”</span></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiTXZ4c7qoZ-d8aejJQ29QoqgvIpqihCiRAzFobTxRC5Wd_fJxQThJNkviLOd6L1Af4jhMZrRBRq4ZqoqelEiwSrtaeucjjLlMbdIxhRj_JY9uZccfDtynD7uPPTj-leY98QlCpz2uyy8cFBtkyQiBRHMF2a7EsFY6sfBlL6gDr9XFN2VCBI7E/s1593/greenscreen_singleframeBCROP.jpeg"><span><img data-original-height="783" data-original-width="1593" height="196" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiTXZ4c7qoZ-d8aejJQ29QoqgvIpqihCiRAzFobTxRC5Wd_fJxQThJNkviLOd6L1Af4jhMZrRBRq4ZqoqelEiwSrtaeucjjLlMbdIxhRj_JY9uZccfDtynD7uPPTj-leY98QlCpz2uyy8cFBtkyQiBRHMF2a7EsFY6sfBlL6gDr9XFN2VCBI7E/w400-h196/greenscreen_singleframeBCROP.jpeg" width="400"></span></a></p><p><span><span><i>detail of the original greenscreen footage</i></span></span></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiMNJa-NicVw7dMWKVk8mXjvd0wilCDs1xhqFR8-_L8uo2WD7_q9AcNWKUmY6eO8KNuHB1RflBg_z2UnTAJV-EB4BUJJrkEqzWcr4SrauZGkSAK2TqA9LHHvNJ1-6oiNdIYZVlsaVrE4AV4l4uIqArxzA8HfgyNJkzXgHnPHUvWw2eBUa0SJzg/s1918/finalshot_singleframeB.jpg"><span><img data-original-height="816" data-original-width="1918" height="170" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiMNJa-NicVw7dMWKVk8mXjvd0wilCDs1xhqFR8-_L8uo2WD7_q9AcNWKUmY6eO8KNuHB1RflBg_z2UnTAJV-EB4BUJJrkEqzWcr4SrauZGkSAK2TqA9LHHvNJ1-6oiNdIYZVlsaVrE4AV4l4uIqArxzA8HfgyNJkzXgHnPHUvWw2eBUa0SJzg/w400-h170/finalshot_singleframeB.jpg" width="400"></span></a></p><p><span><span><i>the final shot as it appears in the film</i></span></span></p><p><span>So there you have it, readers. Another Star Wars mystery solved. In this case it wasn’t a Force ghost, but a stunt rigger who slipped into the shot during the compositing process, providing a wonderful look at the technical seams and handmade nature of the world of visual effects. Star Wars: Revenge of the Sith is streaming now on Disney+.</span></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Signal Carnival (125 pts)]]></title>
            <link>https://www.quiss.org/signal_carnival/</link>
            <guid>43745040</guid>
            <pubDate>Sun, 20 Apr 2025 17:13:32 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.quiss.org/signal_carnival/">https://www.quiss.org/signal_carnival/</a>, See on <a href="https://news.ycombinator.com/item?id=43745040">Hacker News</a></p>
<div id="readability-page-1" class="page"><section id="main_content_wrap">

<iframe width="560" height="315" src="https://www.youtube.com/embed/_Orvsms7Ils?si=z9KbNEWr_E6vsuZV" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>

<p>At Revision 2025, we released "Signal Carnival" (<a href="https://csdb.dk/release/?id=252090">csdb</a>, <a href="https://youtu.be/_Orvsms7Ils">YouTube</a>). This demo asks you to
switch the audio and video cable of your C64:</p>

<p><img src="https://www.quiss.org/signal_carnival/cross_small.png" alt="Diagram of audio and video crossed" title="">
(<strong>Diagram by Felidae</strong>)</p>

<p>Technically, "misplugging" those cables is not a completely new idea. In the
90s, it was a common thing to connect audio to both speaker and video,
to get screen flickering timed with the music beats.</p>

<p>However, "Signal Carnival" is the first production to switch both these
cables, while still being able to play meaningful audio and video.</p>

<h2>How to drive audio using a video signal</h2>

<p>The C64's VIC chip operates at a frequency of 7.9Mhz, and new values can be
written to it by the 6502 at a rate of up to 246kHz. Since even high
quality audio rarely exceeds 44kHz, this is easily a high enough frequency
to generate music.</p>

<p>Inspired by the music routine from freespin, we combined two timers to
get an interesting waveform, which is adjusted once per frame. This is
the code that drives audio:</p>

<pre><code>lda $dc06
ora $dd06
eor $02
sta $d020
</code></pre>

<p>Here, <code>$dc06</code> and <code>$dd06</code> are the lower bytes of the B timers of CIA #1 and #2,
respectively. They're in turn increased every time their A timers
overflow. And those are set to a new value for every new note.</p>

<p>Eor-ing with the value at zeropage <code>$02</code> allows to slightly tweak the waveform (and volume!),
and then the result is written to <code>$d020</code>, which is the screen color.
Only the brightness of said color matters (chrominance is encoded at the
PAL color carrier frequency, which is outside of the human hearing
range). There's no obvious relationship between the brightness of the C64 color
and its number, but that's fine - it actually makes the
waveforms more interesting.</p>

<p>Of course, the above uses up all four timers the C64 CIAs have, which means there
are no timers left for e.g. video stabilization, which is instead done
through the lightpen circuitry. (Finally! A use case for <code>$d013</code>. :))</p>

<p>Music is just one voice, but the song switches between voices (and
waveforms) often enough to sound mildly polyphonic.</p>

<h2>How to drive video using an audio signal</h2>

<p>The SID chip of the C64 internally operates (for PAL) at 9.85Mhz, and,
like the VIC, can be fed with new values at a rate of up to 246kHz.</p>

<p>The SID has a number of audio features. It can generate three voices
using multiple waveforms, it has an ADSR envelope generator, can sync
between voices, and apply filters.
Unfortunately, all this circuitry works at a (for video)
glacial pace: The highest frequency the chip can output is 3906Hz, which
is the equivalent of changing the video output every four rasterlines.
Similar with ADSR, for which the smallest possible configurable attack
time is 2 ms, so about 32 rasterlines.</p>

<p>But thankfully, there's also circuitry that is wired more directly and
and gives instant output: the volume register ($d418)!
This has been used in the past to generate samples at high frequencies
(16+ khz), and is a good choice for generating video, as well.</p>

<p>However, the C64 mainboard also, vexingly, passes the SID signal through
a analogue bandpass filter. And this always happens, regardless of
whether filtering is on or not.</p>

<p><img src="https://www.quiss.org/signal_carnival/filter.png" alt="Subsection of C64 mainboard circuit diagram" title=""></p>

<p>This means that the pixels we work with are very wide, and also horizontally
blurred. Here's one "pixel", displayed on my 1084 monitor:</p>

<p><img src="https://www.quiss.org/signal_carnival/onepixel_cropped.png" alt="Photo of 1084 display, with a blurry horizontal &quot;pixel&quot;" title=""></p>

<p>This blurryness poses an interesting constraint on effects. While technically,
you do have some degree of horizontal resolution, the blurriness makes it
unenticing to use it for scrollers. Here are a few letters, for illustration:</p>

<p><img src="https://www.quiss.org/signal_carnival/end.jpg" alt="Photo of three letters, heavily blurred" title=""></p>

<p>Signal Carnival makes heavy use of both axis,
but to cope with the bluriyness, the x axis is used for graphics elements that
are fine to blur, like e.g. textures.</p>

<p>Other than that, driving the video is just your normal vanilla video
bitbanging. Due to the bandpass filter, horizontal syncs (i.e., pulling
the signal line to ground) need to be precisely timed, so they get
recognized, but not mistaken for vertical syncs. (which differ from
horizontal syncs only in that the signal is pulled to ground a
little bit longer)</p>

<p>Video sync generation is happening at the same refresh frequency that
the VIC would have produced (so we can use raster interrupts and query
the lightpen), but we use a different horizontal frequency (64 cycles
per line instead of 63), since having that extra cycle proved useful
in a lot of effects. And besides, if you're generating your own
video signal, you might as well make your own rules!</p>

<h2>Loading</h2>

<p>I've written a new loader for probably every demo I've ever released on the C64,
and this one is no exception. Since a lot of the effects are quite
memory-hungry (we even play a sample at the end), loading breaks are
long enough that we can't just
<a href="http://www.quiss.org/freespin/loading.html">pause audio while they happen</a>.</p>

<p>Hence, we have to bitbang audio the entire time. Also while transferring
data from the drive to the C64. Also during decrunching. (The
decruncher actually unrolls all copy loops, also for that reason)</p>

<p>The loader has a few gimmicks, like doing on-the-fly GCR decoding that
allows to write to any page (not just stack), and it buffers (stashes) a
full kilobyte. <em>But</em> it's also a one-off, so it's missing tons of
features seen in fully-fledged C64 loaders. It doesn't even support
loading from tracks 18 and above yet (the demo uses 1-10.)
Also no checksumming. (So remember, kids, dust off your 1541 drives, or
Signal Carnival might not work!)</p>

<p>Talking about GCR decoding, I found it tedious to handcode the decoding
tables, so we instead wrote a solver that generates them given the code
that uses the tables, and the desired input/output. Very useful tool,
hopefully to be released soon.</p>


</section></div>]]></description>
        </item>
    </channel>
</rss>