<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Sun, 23 Jun 2024 02:30:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Ruby: A great language for shell scripts (105 pts)]]></title>
            <link>https://lucasoshiro.github.io/posts-en/2024-06-17-ruby-shellscript/</link>
            <guid>40763640</guid>
            <pubDate>Sun, 23 Jun 2024 00:46:26 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://lucasoshiro.github.io/posts-en/2024-06-17-ruby-shellscript/">https://lucasoshiro.github.io/posts-en/2024-06-17-ruby-shellscript/</a>, See on <a href="https://news.ycombinator.com/item?id=40763640">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
      
        <header>
          
          
            <p> 





  
    4 minute read
  


</p>
          
        </header>
      

      <section itemprop="text">
        
        <h2 id="intro">Intro</h2>

<p>Ruby is so associated with its most famous framework, Rails, that many people
forget how amazing this language is. I mean, I know a lot of people who says “I
don’t like Ruby” and when I ask why, they say something about Rails. Personally,
I consider Ruby one of my favorite programming languages, and the last time I
touched any Rails code was 7 years ago…</p>

<p>So, if I don’t use Rails anymore, what I do with Ruby? Well, Ruby is a very rich
and complete language, perhaps even more than its more famous relative, Python
(sadly, I can’t say the same about its ecosystem…). And one of the things that
I think that Ruby is better than Python is using it for writing shell
scripts.</p>

<p>That is, most of the cases Bash for me is enough, but if the script starts to
become complex, I switch to Ruby. Here I show the main features that might be
interesting for this case of use.</p>

<h3 id="goals">Goals</h3>

<ul>
  <li>
    <p>Show features of Ruby that are useful for writing shell scripts;</p>
  </li>
  <li>
    <p>Compare Ruby to Bash and Python;</p>
  </li>
</ul>

<h3 id="non-goals">Non-goals</h3>

<ul>
  <li>Replace <em>entirely</em> Bash scripts by Ruby scripts.</li>
</ul>

<h2 id="feature-1-calling-external-commands">Feature 1: calling external commands</h2>

<p>The first thing that you expect of language for writing shell scripts is to
call external commands. In Ruby, you do that using backticks (<code>`</code>):</p>



<p>That’s it! You don’t need <code>system</code>, <code>popen</code> or something like that, or import
a library. And if you set that to a variable, you’ll have the output of the
command:</p>



<blockquote>
  <p>Note: if you want to use <code>system</code> (e.g. if you want the output to be
redirected to stdout instead of a string) or <code>popen</code> (if you want to read or
write data from or to a subprocess), those are also available in Ruby!</p>
</blockquote>

<h2 id="feature-2-status-code">Feature 2: status code</h2>

<p>This is real quick: in Ruby, the variable <code>$?</code> contains the status code of the
last executed command. So, it’s really close to Bash:</p>

<div><pre><code><span>`true`</span>
<span>puts</span> <span>$?</span> <span># 0</span>

<span>`false`</span>
<span>puts</span> <span>$?</span> <span># 1</span>
</code></pre></div>

<h2 id="feature-3-its-a-typed-language">Feature 3: it’s a typed language</h2>

<p>Ruby is not a <em>statically</em> typed language, but it has types. In fact, it is a
object-oriented language, and it follow strictly the OOP paradigm (more than
Python, in some aspects even more than Java!). Bash, on the other hand,
everything is a string, and that leads to several safety issues…</p>

<div><pre><code><span>total_lines</span> <span>=</span> <span>`wc -l my_file`</span><span>.</span><span>to_i</span> <span># an int containing the number of lines of a file</span>
<span>half</span> <span>=</span> <span>total_lines</span><span>.</span><span>div</span> <span>2</span>           <span># integer division</span>
<span>puts</span> <span>`head -n </span><span>#{</span><span>half</span><span>}</span><span> my_file`</span>     <span># print half of the file</span>
</code></pre></div>

<h2 id="feature-4-functional-constructions">Feature 4: functional constructions</h2>

<p>Ruby implements <code>map</code>, <code>select</code> (filter), <code>reduce</code>, <code>flat_map</code> and other
functional operations as methods. So, you can, for example, apply a <code>map</code> over a
command output:</p>

<div><pre><code><span>puts</span> <span>`ls`</span><span>.</span><span>lines</span><span>.</span><span>map</span> <span>{</span> <span>|</span><span>name</span><span>|</span> <span>name</span><span>.</span><span>strip</span><span>.</span><span>length</span> <span>}</span> <span># prints the lengths of the filenames</span>
</code></pre></div>

<blockquote>
  <p>Note for Git lovers: I know that I could do that only using <code>git branch
--show-current</code>, but that was the first example that came in my mind to
demonstrate the use of regex…</p>
</blockquote>

<h2 id="feature-5-regex-matching">Feature 5: regex matching</h2>

<p>Regex is a type in Ruby, and operations using regex are built-in in the
language. Look at this example, where we get the current git branch name calling
<code>git branch</code>:</p>

<div><pre><code><span>current_branch_regex</span> <span>=</span> <span>/^\* (\S+)/</span>
<span>output_lines</span> <span>=</span> <span>`git branch`</span><span>.</span><span>lines</span>
<span>output_lines</span><span>.</span><span>each</span> <span>do</span> <span>|</span><span>line</span><span>|</span>
  <span>if</span> <span>line</span> <span>=~</span> <span>current_branch_regex</span> <span># match the string with the regex</span>
    <span>puts</span> <span>$1</span>                       <span># prints the match of the first group  </span>
  <span>end</span>
<span>end</span>
</code></pre></div>

<h2 id="feature-6-easy-threads">Feature 6: easy threads</h2>

<p>If want to work with multiple threads, Ruby is perhaps the one of the easiest
language to do it. Look:</p>

<div><pre><code><span>thread</span> <span>=</span> <span>Thread</span><span>.</span><span>new</span> <span>do</span>
  <span>puts</span> <span>"I'm in a thread!"</span>
<span>end</span>

<span>puts</span> <span>"I'm outside a thread!"</span>

<span>thread</span><span>.</span><span>join</span>
</code></pre></div>

<p>So, it can be useful for, for example, downloading several files at the same time:</p>

<div><pre><code><span>(</span><span>1</span><span>..</span><span>10</span><span>).</span><span>map</span> <span>do</span> <span>|</span><span>i</span><span>|</span>                       <span># iterates from i=1 to i=10, inclusive</span>
  <span>Thread</span><span>.</span><span>new</span> <span>do</span>
    <span>`wget http://my_site.com/file_</span><span>#{</span><span>i</span><span>}</span><span>`</span>  <span># you can use variables inside commands!  </span>
  <span>end</span>
<span>end</span><span>.</span><span>each</span> <span>{</span> <span>|</span><span>thread</span><span>|</span> <span>thread</span><span>.</span><span>join</span> <span>}</span>        <span># do/end and curly braces have the same purpose!</span>
</code></pre></div>

<h2 id="feature-7-builtin-file-and-dir-operations">Feature 7: builtin file and dir operations</h2>

<p>In Ruby, all the file operations are methods of the <code>File</code> class and all the
directory operations are methods of the <code>Dir</code> class, as it should be. In Python,
for example, if you want to read a file you use <code>open</code>, but if you want to
delete it you need to use <code>os.remove</code>, and <code>os</code> does a lot of other things that are
not related to files.</p>

<p>So, in Ruby:</p>

<div><pre><code><span>exists</span> <span>=</span> <span>File</span><span>.</span><span>exists?</span> <span>'My File'</span>           <span># methods that return booleans end in ?</span>
<span>file_content</span> <span>=</span> <span>File</span><span>.</span><span>open</span><span>(</span><span>'My File'</span><span>).</span><span>read</span>
<span>File</span><span>.</span><span>delete</span> <span>'My File'</span>                     <span># parentheses are optional if it's not ambiguous</span>
</code></pre></div>

<h2 id="conclusion">Conclusion</h2>

<p>I hope that after reading this short text you consider using Ruby as a
replacement for complex shell scripts. I mean, I don’t expect that you drop
Bash entirely, but consider using Ruby when things get complex. Of course, you
can do that in Python, Perl, even JS, but, as my personal choice I think that
Ruby is the most complete and easier Bash replacement for that!</p>

<p>If you find something wrong, or if you have any suggestion, please let me know
<a href="https://github.com/lucasoshiro/lucasoshiro.github.io/issues">here</a>.</p>

        
      </section>

      

      

      <!-- 
  <nav class="pagination">
    
      <a href="/posts-en/2024-05-11-splat-operator/" class="pagination--pager" title="Python: 10 cool tricks with the * operator
">Anterior</a>
    
    
      <a href="#" class="pagination--pager disabled">Próxima</a>
    
  </nav>
 -->
    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Simple script to cripple personalized targeting from Facebook (157 pts)]]></title>
            <link>https://gist.github.com/HyperCrowd/edc9b461ec23cf2454ea4d1e910fd1c6</link>
            <guid>40762433</guid>
            <pubDate>Sat, 22 Jun 2024 21:38:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gist.github.com/HyperCrowd/edc9b461ec23cf2454ea4d1e910fd1c6">https://gist.github.com/HyperCrowd/edc9b461ec23cf2454ea4d1e910fd1c6</a>, See on <a href="https://news.ycombinator.com/item?id=40762433">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="file-cutofffacebook-md">
    <article itemprop="text"><p dir="auto"><h2 dir="auto">Crippling Facebook</h2><a id="user-content-crippling-facebook" aria-label="Permalink: Crippling Facebook" href="#crippling-facebook"></a></p>
<p dir="auto">Facebook works with advertisers to target you.  These instructions are one of the many ways to begin crippling that relationship.  When AI targeting is crippled, your psychosecurity improves :)</p>
<ol dir="auto">
<li>On your desktop machine, goto <a href="https://accountscenter.facebook.com/ads/audience_based_advertising" rel="nofollow">https://accountscenter.facebook.com/ads/audience_based_advertising</a></li>
<li>Maximize the browser window</li>
<li>Press F12 and click on the Console tab</li>
<li>Select the code below, copy it, paste it upon the Console line (The area next to the &gt; character in the Console window), and press enter:</li>
</ol>
<div dir="auto"><pre><span>(</span><span>async</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>wait</span> <span>=</span> <span>async</span> <span>(</span><span>watcher</span><span>,</span> <span>timeout</span> <span>=</span> <span>10000</span><span>,</span> <span>interval</span> <span>=</span> <span>100</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>const</span> <span>startTime</span> <span>=</span> <span>Date</span><span>.</span><span>now</span><span>(</span><span>)</span>

    <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span><span>resolve</span><span>,</span> <span>reject</span><span>)</span> <span>=&gt;</span> <span>{</span>
      <span>const</span> <span>checkForElement</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        <span>const</span> <span>elements</span> <span>=</span> <span>watcher</span><span>(</span><span>)</span>

        <span>if</span> <span>(</span><span>elements</span><span>.</span><span>length</span> <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>
          <span>clearInterval</span><span>(</span><span>intervalId</span><span>)</span>
          <span>resolve</span><span>(</span><span>elements</span><span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>Date</span><span>.</span><span>now</span><span>(</span><span>)</span> <span>-</span> <span>startTime</span> <span>&gt;</span> <span>timeout</span><span>)</span> <span>{</span>
          <span>clearInterval</span><span>(</span><span>intervalId</span><span>)</span>
          <span>reject</span><span>(</span><span>new</span> <span>Error</span><span>(</span><span>`Timeout: Elements not found`</span><span>)</span><span>)</span>
        <span>}</span>
      <span>}</span>

      <span>const</span> <span>intervalId</span> <span>=</span> <span>setInterval</span><span>(</span><span>checkForElement</span><span>,</span> <span>interval</span><span>)</span>

      <span>checkForElement</span><span>(</span><span>)</span>
    <span>}</span><span>)</span>
  <span>}</span>

  <span>const</span> <span>delay</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>new</span> <span>Promise</span><span>(</span><span>resolve</span> <span>=&gt;</span> <span>setTimeout</span><span>(</span><span>resolve</span><span>,</span> <span>3000</span><span>)</span><span>)</span>
  <span>const</span> <span>getElementsByAriaLabel</span> <span>=</span> <span>(</span><span>label</span><span>)</span> <span>=&gt;</span> <span>document</span><span>.</span><span>querySelectorAll</span><span>(</span><span>`[aria-label="<span><span>${</span><span>label</span><span>}</span></span>"]`</span><span>)</span>
  <span>const</span> <span>getElementsByRoleAndWidth</span> <span>=</span> <span>(</span><span>role</span><span>,</span> <span>width</span><span>)</span> <span>=&gt;</span> 
      <span>Array</span><span>.</span><span>from</span><span>(</span><span>document</span><span>.</span><span>querySelectorAll</span><span>(</span><span>`[role="<span><span>${</span><span>role</span><span>}</span></span>"]`</span><span>)</span><span>)</span><span>.</span><span>filter</span><span>(</span><span>el</span> <span>=&gt;</span> <span>el</span><span>.</span><span>clientWidth</span> <span>===</span> <span>width</span><span>)</span>
  <span>const</span> <span>getElementsByText</span> <span>=</span> <span>(</span><span>text</span><span>)</span> <span>=&gt;</span> <span>Array</span><span>.</span><span>from</span><span>(</span><span>document</span><span>.</span><span>querySelectorAll</span><span>(</span><span>'*'</span><span>)</span><span>)</span><span>.</span><span>filter</span><span>(</span><span>el</span> <span>=&gt;</span> 
      <span>Array</span><span>.</span><span>from</span><span>(</span><span>el</span><span>.</span><span>childNodes</span><span>)</span><span>.</span><span>some</span><span>(</span><span>node</span> <span>=&gt;</span> <span>node</span><span>.</span><span>nodeType</span> <span>===</span> <span>Node</span><span>.</span><span>TEXT_NODE</span> <span>&amp;&amp;</span> <span>node</span><span>.</span><span>textContent</span><span>.</span><span>includes</span><span>(</span><span>text</span><span>)</span><span>)</span>
  <span>)</span>

  <span>const</span> <span>ads</span> <span>=</span> <span>getElementsByRoleAndWidth</span><span>(</span><span>'listitem'</span><span>,</span> <span>508</span><span>)</span>

  <span>for</span> <span>(</span><span>const</span> <span>ad</span> <span>of</span> <span>ads</span><span>)</span> <span>{</span>
      <span>console</span><span>.</span><span>log</span><span>(</span><span>ad</span><span>.</span><span>childNodes</span><span>[</span><span>0</span><span>]</span><span>.</span><span>textContent</span><span>)</span>
      <span>ad</span><span>.</span><span>childNodes</span><span>[</span><span>0</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>a</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByText</span><span>(</span><span>'They uploaded or used a list to reach you.'</span><span>)</span><span>)</span>
      <span>a</span><span>[</span><span>0</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>b</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByText</span><span>(</span><span>'Don\'t allow'</span><span>)</span><span>)</span>
      <span>b</span><span>[</span><span>1</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>c</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByText</span><span>(</span><span>'Don\'t allow'</span><span>)</span><span>)</span>
      <span>c</span><span>[</span><span>0</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>d</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByAriaLabel</span><span>(</span><span>'Back'</span><span>)</span><span>)</span>
      <span>d</span><span>[</span><span>2</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>e</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByAriaLabel</span><span>(</span><span>'Back'</span><span>)</span><span>)</span>
      <span>e</span><span>[</span><span>2</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>
  <span>}</span>
<span>}</span><span>)</span><span>(</span><span>)</span></pre></div>
<ol start="5" dir="auto">
<li>Watch as your slowly unsubscribe from all advertisers</li>
<li>Don't click or interact with the browser at all while this is going on.  Go do laundry or something.</li>
<li>Enjoy cutting off advertisers that hate you :)</li>
</ol>
</article>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Solar generates fifth of global electricity on summer solstice midday peak (125 pts)]]></title>
            <link>https://ember-climate.org/insights/in-brief/the-global-solar-revolution/</link>
            <guid>40761837</guid>
            <pubDate>Sat, 22 Jun 2024 20:18:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ember-climate.org/insights/in-brief/the-global-solar-revolution/">https://ember-climate.org/insights/in-brief/the-global-solar-revolution/</a>, See on <a href="https://news.ycombinator.com/item?id=40761837">Hacker News</a></p>
<div id="readability-page-1" class="page"><div role="main" aria-label="Main">
<article>

<div>
<div>
<p id="world-generates-fifth-of-its-electricity-from-solar-on-summer-solstice-midday-peak">
<h4>World generates fifth of its electricity from solar on summer solstice midday peak</h4>
<hr>
</p>
</div>
<div><p><span>Ember estimates that across the midday peaks on 21 June, the UN’s <a href="https://www.un.org/en/observances/solstice-day" target="_blank" rel="noopener noreferrer" data-stringify-link="https://www.un.org/en/observances/solstice-day" data-sk="tooltip_parent">International Day of the Celebration of the Solstice</a>&nbsp;– 20% of the world’s electricity will come from solar.&nbsp; In comparison, last year this value was 16%.</span></p>
<p><span>For the 24 hour average, Ember forecasts that solar will provide 8.2% of global electricity generation on 21 June. Although the solstice is the longest day of the year, all days in June are similar enough in length that solar generation on this day will be very close to the monthly average. The hourly profile was calculated by a weighted average of the hourly solar generation data.&nbsp;</span></p>
</div>

<div><h4><b>Global peaks in solar around summer months</b></h4>
<p><span>Across the year, global solar generation peaks in the summer months of the northern hemisphere, where Ember estimates 89% of the world’s solar panels are installed.</span></p>
<p><span>Ember tracks monthly electricity generation for 80 countries. Based on historical monthly data, monthly global solar generation is quite similar from May to August, although its share falls slightly towards August, as global electricity demand rises due to increased air conditioning demand in the northern hemisphere.&nbsp;</span></p>
<p><span>Ember’s forecast for June 2024 is 8.2%, compared to 6.7% recorded in June 2023. In absolute terms, Ember expects solar to rise by 28%, from 157 TWh in June 2023 to 201 TWh in June 2024.&nbsp;</span></p>
<p><span>Across the whole of 2023, solar generated a </span><a href="https://ember-climate.org/insights/research/global-electricity-review-2024/global-electricity-source-trends/#solar"><span>record 5.5%</span></a><span> of global electricity.</span></p>
</div>

<div><h4><b>Spotlight: Solar generation in the world’s four biggest solar markets</b></h4>
<p><span>In China, the world’s largest solar market accounting for 36% of global solar generation in 2023, we expect the share of solar in total electricity generation to reach 9.6% in June 2024, up from 7% in June 2023. On average, for the full year 2023, solar’s share in China’s electricity generation was 6.2%.</span></p>
<p><span>For the EU, </span><a href="https://ember-climate.org/insights/in-brief/wind-and-solar-displace-a-fifth-of-eu-fossil-generation-since-2019/"><span>a global wind and solar leader</span></a><span>, we expect the solar share across June to be more than double the global average at 20%, up from 17% in June 2023.&nbsp; On average, for the entire year 2023, the EU’s solar share was 9.2%. For Spain, which has one of the highest solar </span><span>shares in the EU and the world, the share of solar in June 2024 is expected to be even higher at 30%.</span></p>
<p><span>Meanwhile, the US and India are expected to have very similar solar share in June 2024, at 6.9% and 7.1% respectively compared to the global average of 8.2%. Both countries had very similar annual average solar share in 2023, with the US at 5.6% and India at 5.8%, slightly higher than the global average of 5.5%.</span></p>
</div>
<div>
<p id="solar-is-supercharging-the-global-clean-power-revolution">
<h4>Solar is supercharging the global clean power revolution</h4>
<hr>
</p>
</div>
<div>
<p><span>No other source of electricity has ever grown from 100 TWh to 1000 TWh of generation faster than solar. It took just 8 years for solar, making it ahead of wind (12 years), and far ahead of gas (28 years), coal (32 years) and hydro (39 years).&nbsp;</span></p>
</div>

<div><p><span>In 2023, records for solar additions and generation continued to be set.&nbsp; More than 2 million solar panels were installed on average every day, up from just over 1 million in 2022.</span></p>
<p><span>In 2023, solar added twice as much new electricity as coal and met 49% of global electricity demand growth. It was the fastest-growing source of electricity generation for the 19th year in a row.</span></p>
</div>

<div>
<p><span>For more detail on the rapid growth in solar generation, read the </span><a href="https://ember-climate.org/insights/research/global-electricity-review-2024/global-electricity-source-trends/#solar"><span>chapter on solar</span></a><span> in Ember’s Global Electricity Review. </span></p>
</div>
<div>
<p id="record-breaking-capacity-growth-in-2023">
<h4>Record-breaking capacity growth in 2023</h4>
<hr>
</p>
</div>
<div><p><span>China was the main driver behind a record-breaking 346 GW annual increase of global solar capacity in 2023. It was responsible for 63% of global solar additions in 2023. This was a record high share and a significant increase from China’s contribution of 43% of global solar additions in 2022.</span></p>
<p><span>China’s solar capacity additions increased by 152% compared to the previous year. This was more than three times faster than the growth in additions of all the G7 countries (+42%).&nbsp;</span></p>
<p><span>China has played a pivotal role in scaling up wind and solar deployment globally.&nbsp; With growing adoption, the cost of these technologies fell, making them the cheapest source of electricity. Overall, global solar capacity has boomed due to steep declines in costs, supportive policy environments, technological efficiency improvements and increased manufacturing capability. </span></p>
</div>

<div>
<p><span>For more detail on the rapid growth in solar capacity last year, read our </span><a href="https://ember-climate.org/insights/in-brief/2023s-record-solar-surge-explained-in-six-charts/"><span>recent post</span></a><span> on IRENA data.</span></p>
</div>
<div>
<p id="it-is-happening-everywhere">
<h4>It is happening everywhere</h4>
<hr>
</p>
</div>
<div><p><span>China is leading global solar capacity additions and solar generation, but rapid solar scale-up is also happening in countries with different geographies, stages of economic development and political systems, demonstrating that we have all the tools necessary to make this fast change happen in power sectors across the world.</span></p>
<p><span>Increased deployment worldwide is evident as there are now 34 economies that generate more than 10% of their electricity from solar. This is eight more than in 2022 , while less than a decade ago, in 2015, there were none. Of those 34 economies, nine are large electricity markets with more than 5 TWh of solar generation including Chile (20%), Greece (19%) and Hungary (18%).</span></p>
</div>

<div>
<p><span>Several countries made considerable progress in just the last year. Chile became the first country to reach 20% solar share in its mix – the target global average in the </span><a href="https://www.iea.org/reports/global-energy-and-climate-model/net-zero-emissions-by-2050-scenario-nze"><span>IEA’s Net Zero Energy scenario</span></a><span>. Meanwhile, the UAE surpassed Germany in terms of solar generation per capita, having surpassed the US in 2019.</span></p>
</div>
<div>
<p id="the-untapped-potential-of-the-sunniest-countries">
<h4>The untapped potential of the sunniest countries</h4>
<hr>
</p>
</div>
<div>
<p><span>Many sunny countries have yet to tap the potential of solar. While a few leaders like Australia and Spain are producing almost 20% of their power from solar, 66% of countries generate less than 5% of their electricity from solar. High solar generation even in countries with relatively poor insolation like Germany (12%) and the Netherlands (17%) highlights the potential solar has for meeting generation needs regardless of natural endowments.&nbsp;</span></p>
</div>

<div>
<p><span>Solar provides clean power that can be deployed quickly and locally to the demand source. New solar power produces the cheapest electricity in history, according to the </span><a href="https://www.iea.org/reports/world-energy-outlook-2020"><span>IEA</span></a><span>. This year’s northern hemisphere solstice may well be part of another record-breaking June for global solar generation, in part because most of the world’s solar installations are located there. Many high potential countries across the globe face financial and logistical challenges and it is important to enable solar development in these countries to lead the world towards a clean, electrified energy future. </span></p>
</div>
</div>
</article>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HH70, the first high-temperature superconducting Tokamak achieves first plasma (182 pts)]]></title>
            <link>https://www.energysingularity.cn/en/hh70-the-worlds-first-high-temperature-superconducting-tokamak-achieves-first-plasma/</link>
            <guid>40761713</guid>
            <pubDate>Sat, 22 Jun 2024 20:01:41 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.energysingularity.cn/en/hh70-the-worlds-first-high-temperature-superconducting-tokamak-achieves-first-plasma/">https://www.energysingularity.cn/en/hh70-the-worlds-first-high-temperature-superconducting-tokamak-achieves-first-plasma/</a>, See on <a href="https://news.ycombinator.com/item?id=40761713">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content" role="main">
						<article id="post-765">
				<div>
<p>Recently, the world’s first fully high-temperature superconducting Tokamak device, developed and constructed by Energy Singularity, known as “HH70,” has successfully achieved first plasma. HH70 has conducted discharge experiments based on two types of pre-ionization methods: localized helical magnetic flux injection (electron gun) and ion cyclotron heating (ICRF), and has successfully obtained the first plasma.</p>



<figure><img width="1024" height="691" src="https://www.energysingularity.cn/en/wp-content/uploads/2024/06/20240527-114257-1024x691.jpg" alt="" srcset="https://www.energysingularity.cn/en/wp-content/uploads/2024/06/20240527-114257-1024x691.jpg 1024w, https://www.energysingularity.cn/en/wp-content/uploads/2024/06/20240527-114257-300x203.jpg 300w, https://www.energysingularity.cn/en/wp-content/uploads/2024/06/20240527-114257-768x518.jpg 768w, https://www.energysingularity.cn/en/wp-content/uploads/2024/06/20240527-114257.jpg 1280w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<p>The toroidal&nbsp;magnetic&nbsp;field (B<sub>0</sub>) of HH70 is 0.6 Tesla, with a plasma major radius of 0.75 meters. Its magnet system consists of 26 high-temperature superconducting magnets. Designed, developed, and constructed by Energy Singularity, HH70 has independent intellectual property rights, with a localization rate exceeding 96%. The completion and operation of HH70 have taken the lead in the world in completing the engineering feasibility verification of high-temperature superconducting Tokamak, marking that China has gained a first-mover advantage in the key field of high-temperature superconducting magnetic confinement fusion. At the same time, the research and construction of HH70 have also achieved a number of innovative results:</p>



<ul><li><strong>The world’s first high-temperature superconducting magnetic confinement fusion device.</strong></li><li><strong>The world’s first high-temperature superconducting Tokamak.</strong></li><li><strong>The world’s first superconducting Tokamak built by a commercial company.</strong></li><li><strong>One of the four superconducting Tokamaks in operation worldwide.</strong></li></ul>



<p>The successful discharge of HH70 signifies that Energy Singularity has become the first and currently the only team in the world to build and operate a fully high-temperature superconducting Tokamak, as well as the first and currently the only commercial company to build and operate a fully superconducting Tokamak. Starting from the completion and operation of HH70, and taking HH70 as a key experimental platform, we will invest in the development of the next generation of high-field high-temperature superconducting Tokamak devices—HH170, which aims to achieve a deuterium-tritium equivalent energy gain (Q) greater than 10.</p>



<p>Controlled nuclear fusion is expected to provide humanity with an almost infinite, clean, and cheap source of energy, and is considered the ultimate energy solution. As the only magnetic confinement fusion technology route that has completed scientific feasibility verification, the Tokamak has always been the focus of global controlled nuclear fusion research and development. High-temperature superconducting Tokamak combines robust physics with engineering innovation, which is expected to greatly improve the cost-effectiveness of the device and accelerate the commercialization of fusion energy, and has become the direction of fusion energy research and development that attracts the most market-oriented funding worldwide. As a domestic institution that took the lead in focusing on the research and development of high-temperature superconducting Tokamak, since its establishment in 2021, Energy Singularity has taken “accelerating the realization of human energy freedom” as its mission, adhering to the values of “extreme efficiency and seeking truth from facts”, and has established an integrated high-temperature superconducting magnet design, processing, and testing platform, and built the capabilities for research and development, design, construction, and operation of high-temperature superconducting Tokamak devices.</p>
</div>			</article>
			
		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[AWS Lambda Web Adapter (103 pts)]]></title>
            <link>https://github.com/awslabs/aws-lambda-web-adapter</link>
            <guid>40760858</guid>
            <pubDate>Sat, 22 Jun 2024 18:01:45 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/awslabs/aws-lambda-web-adapter">https://github.com/awslabs/aws-lambda-web-adapter</a>, See on <a href="https://news.ycombinator.com/item?id=40760858">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">AWS Lambda Web Adapter</h2><a id="user-content-aws-lambda-web-adapter" aria-label="Permalink: AWS Lambda Web Adapter" href="#aws-lambda-web-adapter"></a></p>
<p dir="auto">A tool to run web applications on AWS Lambda</p>
<p dir="auto">AWS Lambda Web Adapter allows developers to build web apps (http api) with familiar frameworks (e.g. Express.js, Next.js, Flask, SpringBoot, ASP.NET and Laravel, anything speaks HTTP 1.1/1.0) and run it on AWS Lambda.
The same docker image can run on AWS Lambda, Amazon EC2, AWS Fargate, and local computers.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/docs/images/lambda-adapter-overview.png"><img src="https://github.com/awslabs/aws-lambda-web-adapter/raw/main/docs/images/lambda-adapter-overview.png" alt="Lambda Web Adapter"></a></p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Features</h2><a id="user-content-features" aria-label="Permalink: Features" href="#features"></a></p>
<ul dir="auto">
<li>Run web applications on AWS Lambda</li>
<li>Supports Amazon API Gateway Rest API and Http API endpoints, Lambda Function URLs, and Application Load Balancer</li>
<li>Supports Lambda managed runtimes, custom runtimes and docker OCI images</li>
<li>Supports any web frameworks and languages, no new code dependency to include</li>
<li>Automatic encode binary response</li>
<li>Enables graceful shutdown</li>
<li>Supports response payload compression</li>
<li>Supports response streaming</li>
<li>Supports non-http event triggers</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto">AWS Lambda Web Adapter work with Lambda functions packaged as both docker images and Zip packages.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Lambda functions packaged as Docker Images or OCI Images</h3><a id="user-content-lambda-functions-packaged-as-docker-images-or-oci-images" aria-label="Permalink: Lambda functions packaged as Docker Images or OCI Images" href="#lambda-functions-packaged-as-docker-images-or-oci-images"></a></p>
<p dir="auto">To use Lambda Web Adapter with docker images, package your web app (http api) in a Dockerfile, and add one line to copy Lambda Web Adapter binary to /opt/extensions inside your container:</p>
<div dir="auto" data-snippet-clipboard-copy-content="COPY --from=public.ecr.aws/awsguru/aws-lambda-adapter:0.8.3 /lambda-adapter /opt/extensions/lambda-adapter"><pre><span>COPY</span> --from=public.ecr.aws/awsguru/aws-lambda-adapter:0.8.3 /lambda-adapter /opt/extensions/lambda-adapter</pre></div>
<p dir="auto"><a href="https://docs.aws.amazon.com/lambda/latest/dg/images-create.html" rel="nofollow">Non-AWS base images</a> may be used since the <a href="https://docs.aws.amazon.com/lambda/latest/dg/images-create.html#images-ric" rel="nofollow">Runtime Interface Client</a> ships with the Lambda Web Adapter.</p>
<p dir="auto">By default, Lambda Web Adapter assumes the web app is listening on port 8080. If not, you can specify the port via <a href="#configurations">configuration</a>.</p>
<p dir="auto">Pre-compiled Lambda Web Adapter binaries are provided in ECR public repo: <a href="https://gallery.ecr.aws/awsguru/aws-lambda-adapter" rel="nofollow">public.ecr.aws/awsguru/aws-lambda-adapter</a>.
Multi-arch images are also provided in this repo. It works on both x86_64 and arm64 CPU architecture.</p>
<p dir="auto">Below is a Dockerfile for <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/expressjs">an example nodejs application</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="FROM public.ecr.aws/docker/library/node:20-slim
COPY --from=public.ecr.aws/awsguru/aws-lambda-adapter:0.8.3 /lambda-adapter /opt/extensions/lambda-adapter
ENV PORT=7000
WORKDIR &quot;/var/task&quot;
ADD src/package.json /var/task/package.json
ADD src/package-lock.json /var/task/package-lock.json
RUN npm install --omit=dev
ADD src/ /var/task
CMD [&quot;node&quot;, &quot;index.js&quot;]"><pre><span>FROM</span> public.ecr.aws/docker/library/node:20-slim
<span>COPY</span> --from=public.ecr.aws/awsguru/aws-lambda-adapter:0.8.3 /lambda-adapter /opt/extensions/lambda-adapter
<span>ENV</span> PORT=7000
<span>WORKDIR</span> <span>"/var/task"</span>
<span>ADD</span> src/package.json /var/task/package.json
<span>ADD</span> src/package-lock.json /var/task/package-lock.json
<span>RUN</span> npm install --omit=dev
<span>ADD</span> src/ /var/task
<span>CMD</span> [<span>"node"</span>, <span>"index.js"</span>]</pre></div>
<p dir="auto">This works with any base images except AWS managed base images. To use AWS managed base images, you need to override the ENTRYPOINT to start your web app.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Lambda functions packaged as Zip package for AWS managed runtimes</h3><a id="user-content-lambda-functions-packaged-as-zip-package-for-aws-managed-runtimes" aria-label="Permalink: Lambda functions packaged as Zip package for AWS managed runtimes" href="#lambda-functions-packaged-as-zip-package-for-aws-managed-runtimes"></a></p>
<p dir="auto">AWS Lambda Web Adapter also works with AWS managed Lambda runtimes. You need to do three things:</p>
<ol dir="auto">
<li>
<p dir="auto">attach Lambda Web Adapter layer to your function.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">AWS Commercial Regions</h4><a id="user-content-aws-commercial-regions" aria-label="Permalink: AWS Commercial Regions" href="#aws-commercial-regions"></a></p>
<ol dir="auto">
<li>x86_64: <code>arn:aws:lambda:${AWS::Region}:753240598075:layer:LambdaAdapterLayerX86:22</code></li>
<li>arm64: <code>arn:aws:lambda:${AWS::Region}:753240598075:layer:LambdaAdapterLayerArm64:22</code></li>
</ol>
<p dir="auto"><h4 tabindex="-1" dir="auto">AWS China Regions</h4><a id="user-content-aws-china-regions" aria-label="Permalink: AWS China Regions" href="#aws-china-regions"></a></p>
<ol dir="auto">
<li>cn-north-1 (Beijing)
<ul dir="auto">
<li>x86_64: <code>arn:aws-cn:lambda:cn-north-1:041581134020:layer:LambdaAdapterLayerX86:22</code></li>
</ul>
</li>
<li>cn-northwest-1 (Ningxia)
<ul dir="auto">
<li>x86_64: <code>arn:aws-cn:lambda:cn-northwest-1:069767869989:layer:LambdaAdapterLayerX86:22</code></li>
</ul>
</li>
</ol>
</li>
<li>
<p dir="auto">configure Lambda environment variable <code>AWS_LAMBDA_EXEC_WRAPPER</code> to <code>/opt/bootstrap</code>.</p>
</li>
<li>
<p dir="auto">set function handler to your web application start up script. e.g. <code>run.sh</code>.</p>
</li>
</ol>
<p dir="auto">For details, please check out <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/expressjs-zip">the example Node.js application</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Readiness Check</h2><a id="user-content-readiness-check" aria-label="Permalink: Readiness Check" href="#readiness-check"></a></p>
<p dir="auto">When a new Lambda Execution Environment starts up, Lambda Web Adapter will boot up as a Lambda Extension, followed by the web application.</p>
<p dir="auto">By default, Lambda Web Adapter will send HTTP GET requests to the web application at <code>http://127.0.0.1:8080/</code>. The port and path can be customized with two environment variables: <code>AWS_LWA_READINESS_CHECK_PORT</code> and <code>AWS_LWA_READINESS_CHECK_PATH</code>.</p>
<p dir="auto">Lambda Web Adapter will retry this request every 10 milliseconds until the web application returns an HTTP response (<strong>status code &gt;= 100 and &lt; 500</strong>) or the function times out.</p>
<p dir="auto">In addition, you can configure the adapter to preform readiness check with TCP connect, by setting <code>AWS_LWA_READINESS_CHECK_PROTOCOL</code> to <code>tcp</code>.</p>
<p dir="auto">After passing readiness check, Lambda Web Adapter will start Lambda Runtime and forward the invokes to the web application.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Configurations</h2><a id="user-content-configurations" aria-label="Permalink: Configurations" href="#configurations"></a></p>
<p dir="auto">The readiness check port/path and traffic port can be configured using environment variables. These environment variables can be defined either within docker file or as Lambda function configuration.</p>
<table>
<thead>
<tr>
<th>Environment Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS_LWA_PORT / PORT*</td>
<td>traffic port</td>
<td>"8080"</td>
</tr>
<tr>
<td>AWS_LWA_READINESS_CHECK_PORT / READINESS_CHECK_PORT*</td>
<td>readiness check port, default to the traffic port</td>
<td>PORT</td>
</tr>
<tr>
<td>AWS_LWA_READINESS_CHECK_PATH / READINESS_CHECK_PATH*</td>
<td>readiness check path</td>
<td>"/"</td>
</tr>
<tr>
<td>AWS_LWA_READINESS_CHECK_PROTOCOL / READINESS_CHECK_PROTOCOL*</td>
<td>readiness check protocol: "http" or "tcp", default is "http"</td>
<td>"http"</td>
</tr>
<tr>
<td>AWS_LWA_READINESS_CHECK_MIN_UNHEALTHY_STATUS</td>
<td>The minimum HTTP status code that is considered unhealthy</td>
<td>"500"</td>
</tr>
<tr>
<td>AWS_LWA_ASYNC_INIT / ASYNC_INIT*</td>
<td>enable asynchronous initialization for long initialization functions</td>
<td>"false"</td>
</tr>
<tr>
<td>AWS_LWA_REMOVE_BASE_PATH / REMOVE_BASE_PATH*</td>
<td>the base path to be removed from request path</td>
<td>None</td>
</tr>
<tr>
<td>AWS_LWA_ENABLE_COMPRESSION</td>
<td>enable gzip compression for response body</td>
<td>"false"</td>
</tr>
<tr>
<td>AWS_LWA_INVOKE_MODE</td>
<td>Lambda function invoke mode: "buffered" or "response_stream", default is "buffered"</td>
<td>"buffered"</td>
</tr>
<tr>
<td>AWS_LWA_PASS_THROUGH_PATH</td>
<td>the path for receiving event payloads that are passed through from non-http triggers</td>
<td>"/events"</td>
</tr>
</tbody>
</table>
<blockquote>
<p dir="auto"><strong>Note:</strong>
We use "AWS_LWA_" prefix to namespacing all environment variables used by Lambda Web Adapter. The original ones will be supported until we reach version 1.0.</p>
</blockquote>
<p dir="auto"><strong>AWS_LWA_PORT / PORT</strong> - Lambda Web Adapter will send traffic to this port. This is the port your web application listening on. Inside Lambda execution environment,
the web application runs as a non-root user, and not allowed to listen on ports lower than 1024. Please also avoid port 9001 and 3000.
Lambda Runtime API is on port 9001. CloudWatch Lambda Insight extension uses port 3000.</p>
<p dir="auto"><strong>AWS_LWA_ASYNC_INIT / ASYNC_INIT</strong> - Lambda managed runtimes offer up to 10 seconds for function initialization. During this period of time, Lambda functions have burst of CPU to accelerate initialization, and it is free.
If a lambda function couldn't complete the initialization within 10 seconds, Lambda will restart the function, and bill for the initialization.
To help functions to use this 10 seconds free initialization time and avoid the restart, Lambda Web Adapter supports asynchronous initialization.
When this feature is enabled, Lambda Web Adapter performs readiness check up to 9.8 seconds. If the web app is not ready by then,
Lambda Web Adapter signals to Lambda service that the init is completed, and continues readiness check in the handler.
This feature is disabled by default. Enable it by setting environment variable <code>AWS_LWA_ASYNC_INIT</code> to <code>true</code>.</p>
<p dir="auto"><strong>AWS_LWA_REMOVE_BASE_PATH / REMOVE_BASE_PATH</strong> - The value of this environment variable tells the adapter whether the application is running under a base path.
For example, you could have configured your API Gateway to have a /orders/{proxy+} and a /catalog/{proxy+} resource.
Each resource is handled by a separate Lambda functions. For this reason, the application inside Lambda may not be aware of the fact that the /orders path exists.
Use REMOVE_BASE_PATH to remove the /orders prefix when routing requests to the application. Defaults to empty string. Checkout <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/springboot">SpringBoot</a> example.</p>
<p dir="auto"><strong>AWS_LWA_ENABLE_COMPRESSION</strong> - Lambda Web Adapter supports gzip compression for response body. This feature is disabled by default. Enable it by setting environment variable <code>AWS_LWA_ENABLE_COMPRESSION</code> to <code>true</code>.
When enabled, this will compress responses unless it's an image as determined by the content-type starting with <code>image</code> or the response is less than 32 bytes. This will also compress HTTP/1.1 chunked streaming response.</p>
<p dir="auto"><strong>AWS_LWA_INVOKE_MODE</strong> - Lambda function invoke mode, this should match Function Url invoke mode. The default is "buffered". When configured as "response_stream", Lambda Web Adapter will stream response to Lambda service <a href="https://aws.amazon.com/blogs/compute/introducing-aws-lambda-response-streaming/" rel="nofollow">blog</a>.
Please check out <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/fastapi-response-streaming">FastAPI with Response Streaming</a> example.</p>
<p dir="auto"><strong>AWS_LWA_READINESS_CHECK_MIN_UNHEALTHY_STATUS</strong> - allows you to customize which HTTP status codes are considered healthy and which ones are not</p>
<p dir="auto"><strong>AWS_LWA_PASS_THROUGH_PATH</strong> - Path to receive events payloads passed through from non-http event triggers. The default is "/events".</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Request Context</h2><a id="user-content-request-context" aria-label="Permalink: Request Context" href="#request-context"></a></p>
<p dir="auto"><strong>Request Context</strong> is metadata API Gateway sends to Lambda for a request. It usually contains requestId, requestTime, apiId, identity, and authorizer. Identity and authorizer are useful to get client identity for authorization. API Gateway Developer Guide contains more details <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-proxy-integrations.html#api-gateway-simple-proxy-for-lambda-input-format" rel="nofollow">here</a>.</p>
<p dir="auto">Lambda Web Adapter forwards this information to the web application in a Http Header named "x-amzn-request-context". In the web application, you can retrieve the value of this http header and deserialize it into a JSON object. Check out <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/expressjs-zip">Express.js in Zip</a> on how to use it.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Lambda Context</h2><a id="user-content-lambda-context" aria-label="Permalink: Lambda Context" href="#lambda-context"></a></p>
<p dir="auto"><strong>Lambda Context</strong> is an object that Lambda passes to the function handler. This object provides information about the invocation, function, and execution environment. You can find a full list of properties accessible through the Lambda Context <a href="https://docs.aws.amazon.com/lambda/latest/dg/nodejs-context.html" rel="nofollow">here</a></p>
<p dir="auto">Lambda Web Adapter forwards this information to the web application in a Http Header named "x-amzn-lambda-context". In the web application, you can retrieve the value of this http header and deserialize it into a JSON object. Check out <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/expressjs-zip">Express.js in Zip</a> on how to use it.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Graceful Shutdown</h2><a id="user-content-graceful-shutdown" aria-label="Permalink: Graceful Shutdown" href="#graceful-shutdown"></a></p>
<p dir="auto">For a function with Lambda Extensions registered, Lambda enables shutdown phase for the function. When Lambda service is about to shut down a Lambda execution environment,
it sends a SIGTERM signal to the runtime and then a SHUTDOWN event to each registered external extensions. Developers could catch the SIGTERM signal in the lambda functions and perform graceful shutdown tasks.
The <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/expressjs/app/src/index.js">Express.js</a> gives a simple example. More details in <a href="https://github.com/aws-samples/graceful-shutdown-with-aws-lambda">this repo</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Local Debugging</h2><a id="user-content-local-debugging" aria-label="Permalink: Local Debugging" href="#local-debugging"></a></p>
<p dir="auto">Lambda Web Adapter allows developers to develop web applications locally with familiar tools and debuggers: just run the web app locally and test it. If you want to simulate Lambda Runtime environment locally, you can use AWS SAM CLI. The following command starts a local api gateway endpoint and simulate the Lambda runtime execution environment.</p>

<p dir="auto">Please note that <code>sam local</code> starts a Lambda Runtime Interface Emulator on port 8080. So your web application should avoid port <code>8080</code> if you plan to use <code>sam local</code>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Non-HTTP Event Triggers</h2><a id="user-content-non-http-event-triggers" aria-label="Permalink: Non-HTTP Event Triggers" href="#non-http-event-triggers"></a></p>
<p dir="auto">The Lambda Web Adapter also supports all non-HTTP event triggers, such as SQS, SNS, S3, DynamoDB, Kinesis, Kafka, EventBridge, and Bedrock Agents. The adapter forwards the event payload to the web application via http post to a path defined by the <code>AWS_LWA_PASS_THROUGH_PATH</code> environment variable. By default, this path is set to <code>/events</code>. Upon receiving the event payload from the request body, the web application should processes it and returns the results as a JSON response. Please checkout <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/sqs-expressjs">SQS Express.js</a> and <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/bedrock-agent-fastapi-zip">Bedrock Agent FastAPI in Zip</a> examples.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Examples</h2><a id="user-content-examples" aria-label="Permalink: Examples" href="#examples"></a></p>
<ul dir="auto">
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/fastapi">FastAPI</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/fastapi-zip">FastAPI in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/fastapi-background-tasks">FastAPI with Background Tasks</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/fastapi-response-streaming">FastAPI with Response Streaming</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/fastapi-response-streaming-zip">FastAPI with Response Streaming in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/flask">Flask</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/flask-zip">Flask in Zip</a></li>
<li><a href="https://github.com/aws-hebrew-book/serverless-django">Serverless Django</a>  by <a href="https://github.com/efi-mk">@efi-mk</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/expressjs">Express.js</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/expressjs-zip">Express.js in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/nextjs">Next.js</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/nextjs-zip">Next.js in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/nextjs-response-streaming">Next.js Response Streaming</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/springboot">SpringBoot</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/springboot-zip">SpringBoot in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/springboot-response-streaming-zip">SpringBoot Response Streaming</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/nginx">Nginx</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/php">PHP</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/rust-actix-web-zip">Rust Actix Web in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/rust-axum-zip">Rust Axum in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/gin">Golang Gin</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/gin-zip">Golang Gin in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/deno-zip">Deno Oak in Zip</a></li>
<li><a href="https://github.com/aws-samples/lambda-laravel">Laravel on Lambda</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/aspnet-mvc">ASP.NET MVC</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/aspnet-mvc-zip">ASP.NET MVC in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/aspnet-webapi-zip">ASP.NET Web API in Zip</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/sqs-expressjs">SQS Express.js</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/bedrock-agent-fastapi">Bedrock Agent FastAPI</a></li>
<li><a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/examples/bedrock-agent-fastapi-zip">Bedrock Agent FastAPI in Zip</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Acknowledgement</h2><a id="user-content-acknowledgement" aria-label="Permalink: Acknowledgement" href="#acknowledgement"></a></p>
<p dir="auto">This project was inspired by several community projects.</p>
<ul dir="auto">
<li><a href="https://github.com/apparentorder/reweb">re:Web</a></li>
<li><a href="https://github.com/glassechidna/serverlessish">Serverlessish</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Similar Projects</h2><a id="user-content-similar-projects" aria-label="Permalink: Similar Projects" href="#similar-projects"></a></p>
<p dir="auto">Several projects also provide similar capabilities as language specific packages/frameworks.</p>
<ul dir="auto">
<li><a href="https://github.com/awslabs/aws-serverless-java-container">Serverless Java Container</a></li>
<li><a href="https://github.com/vendia/serverless-express">Serverless Express</a></li>
<li><a href="https://github.com/zappa/Zappa">Serverless Python - Zappa</a></li>
<li><a href="https://github.com/customink/lamby">Serverless Rails - Lamby</a></li>
<li><a href="https://github.com/brefphp/bref">Serverless PHP - Bref</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Security</h2><a id="user-content-security" aria-label="Permalink: Security" href="#security"></a></p>
<p dir="auto">See <a href="https://github.com/awslabs/aws-lambda-web-adapter/blob/main/CONTRIBUTING.md#security-issue-notifications">CONTRIBUTING</a> for more information.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">This project is licensed under the Apache-2.0 License.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Creative workers deserve better than a choice as to who rips them off (101 pts)]]></title>
            <link>https://pluralistic.net/2024/06/21/off-the-menu/</link>
            <guid>40760042</guid>
            <pubDate>Sat, 22 Jun 2024 16:08:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://pluralistic.net/2024/06/21/off-the-menu/">https://pluralistic.net/2024/06/21/off-the-menu/</a>, See on <a href="https://news.ycombinator.com/item?id=40760042">Hacker News</a></p>
<div id="readability-page-1" class="page"><article id="post-8989">
	<!-- .entry-header -->

	
	
	<div>
		<p><!--
Tags:
openai, ai, llms, gai, generative ai, models, music, umg, universal music group, spotify, tiktok, copyfight, creative labor markets, chokepoint capitalism.

Summary:
Neither the devil you know nor the devil you don't; Hey look at this; Upcoming appearances; Recent appearances; Latest books; Upcoming books

URL:
https://pluralistic.net/2024/06/21/off-the-menu/

Title:
Pluralistic: Neither the devil you know nor the devil you don't (21 Jun 2024) off-the-menu

Bullet:
🛺

Separator:
^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^-^

Top Sources:
None

--><br>
<a href="https://pluralistic.net/2024/06/21/off-the-menu/"><img decoding="async" src="https://i0.wp.com/craphound.com/images/21Jun2024.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></a></p>
<h2>Today's links</h2>
<ul>
<li><a href="https://pluralistic.net/2024/06/21/off-the-menu/#universally-loathed">Neither the devil you know nor the devil you don't</a>: Creative workers deserve better than a choice as to who rips them off.
</li>
<li><a href="https://pluralistic.net/2024/06/21/off-the-menu/#linkdump">Hey look at this</a>: Delights to delectate.
</li>
<li><a href="https://pluralistic.net/2024/06/21/off-the-menu/#retro">This day in history</a>: 2004, 2014, 2019
</li>
<li><a href="https://pluralistic.net/2024/06/21/off-the-menu/#upcoming">Upcoming appearances</a>: Where to find me.
</li>
<li><a href="https://pluralistic.net/2024/06/21/off-the-menu/#recent">Recent appearances</a>: Where I've been.
</li>
<li><a href="https://pluralistic.net/2024/06/21/off-the-menu/#latest">Latest books</a>: You keep readin' em, I'll keep writin' 'em.
</li>
<li><a href="https://pluralistic.net/2024/06/21/off-the-menu/#upcoming-books">Upcoming books</a>: Like I said, I'll keep writin' 'em.
</li>
<li><a href="https://pluralistic.net/2024/06/21/off-the-menu/#bragsheet">Colophon</a>: All the rest.
</li>
</ul>

<hr>
<p><a name="universally-loathed"></a><br>
<img decoding="async" alt="A pair of bethroned demons, identical save for different colored robes, face each other. The left demon's throne arm is emblazoned with the OpenAI logo. The right demon's throne bears the Universal Music Group logo. The two thrones are joined by a hellmouth - an anthropomorphic nightmare maw. The eyes of the demons and the hellmouth have been replaced with the glaring red machine-eye of HAL9000 from Kubrick's '2001: A Space Odyssey.' Between the demons toil two medieval serfs, bearing threshing implements." src="https://i0.wp.com/craphound.com/images/the-devil-you-know.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<h2>Neither the devil you know nor the devil you don't (<a href="https://pluralistic.net/2024/06/21/off-the-menu/#universally-loathed">permalink</a>)</h2>
<p>Spotify's relationship to artists can be kind of confusing. On the one hand, they pay a laughably low per-stream rate, as in homeopathic residues of a penny. On the other hand, the Big Three labels get a <em>fortune</em> from Spotify. And on the other other hand, it makes sense that rate for a stream heard by one person should be less than the rate for a song broadcast to thousands or millions of listeners.</p>
<p>But the whole thing makes sense once you understand the corporate history of Spotify. There's a whole chapter about this in Rebecca Giblin's and my 2022 book, <em>Chokepoint Capitalism</em>; we even made the audio for it a "Spotify exclusive" (it's the only part of the audiobook you can hear on Spotify, natch):</p>
<p><a href="https://pluralistic.net/2022/09/12/streaming-doesnt-pay/#stunt-publishing">https://pluralistic.net/2022/09/12/streaming-doesnt-pay/#stunt-publishing</a></p>
<p>Unlike online music predecessors like Napster, Spotify sought licenses from the labels for the music it made available. This gave those labels a <em>lot</em> of power over Spotify, but not all the labels, just three of them. Universal, Warner and Sony, the Big Three, control more than 70% of all music recordings, and more than 60% of all music compositions. These three companies are remarkably inbred. Their execs routinely hop from one to the other, and they regularly cross-license samples and other rights to each other.</p>
<p>The Big Three told Spotify that the price of licensing their catalogs would be high. First of all, Spotify had to give significant ownership stakes to all three labels. This put the labels in an unresolvable conflict of interest: as owners of Spotify, it was in their interests for licensing payments for music to be as low as possible. But as labels representing creative workers – musicians – it was in their interests for these payments to be as <em>high</em> as possible.</p>
<p>As it turns out, it wasn't hard to resolve that conflict after all. You see, the money the Big Three got in the form of dividends, stock sales, etc was theirs to spend as they saw fit. They could share some, all, or none of it with musicians. The Big Three's contracts with musicians gave those workers a guaranteed share of Spotify's licensing payments.</p>
<p>Accordingly, the Big Three demanded those rock-bottom per-stream rates that Spotify is notorious for. Yeah, it's true that a streaming per-listener payment should be lower than a radio per-play payment (which reaches thousands or millions of listeners), but even accounting for that, the math doesn't add up. Multiply the per-listener stream rate by the number of listeners for, say, a typical satellite radio cast, and Spotify is clearly getting a <em>massive</em> discount relative to other services that didn't make the Big Three into co-owners when they were kicking off.</p>
<p>But there's still something awry: the Big Three take in <em>gigantic fortunes</em> from Spotify in licensing payments. How can the per-stream rate be so low but the licensing payments be so large? And why are artists seeing so little?</p>
<p>Again, it's not hard to understand once you see the structure of Spotify's deal with the Big Three. The Big Three are each guaranteed a monthly minimum payment, irrespective of the number of Spotify streams from their catalog that month. So Sony might be guaranteed, say, $30m a month from Spotify, but the ultra-low per-stream rate Sony insisted on means that all the Sony streams in a typical month add up to $10m. That means that Sony still gets $30m from Spotify, but only $10m is "attributable" to a specific recording artist who can make a claim on it. The rest of the money is Sony's to play with: they can spread it around all their artists, some of their artists, or none of their artists. They can spend it on "artist development" (which might mean sending top execs on luxury junkets to big music festivals). It's theirs. The lower the per-stream rate is, the more of that minimum monthly payment is unattributable, meaning that Sony can line its pockets with it.</p>
<p>But these monthly minimums are just part of the goodies that the Big Three negotiated for themselves when they were designing Spotify. They also get free promo, advertising, and inclusion on Spotify's top playlists. Best (worst!) of all, the Big Three have "most favored nation" status, which means that every other label – the indies that rep the 30% of music not controlled by the Big Three – have to eat shit and take the ultra-low per-stream rate. Only those indies don't get billions in stock, they don't get monthly minimum guarantees, and they have to pay for promo, advertising, and inclusion on hot playlists.</p>
<p>When you understand the business mechanics of Spotify, all the contradictions resolve themselves. It is simultaneously true that Spotify pays a very low per-stream rate, that it pays the Big Three labels gigantic sums every month, and that artists are grotesquely underpaid by this system.</p>
<p>There are many lessons to take from this little scam, but for me, the top takeaway here is that artists are the class enemies of both Big Tech <em>and</em> Big Content. The Napster Wars demanded that artists ally themselves with either the tech sector or the entertainment center, nominating one or the other to be their champion.</p>
<p>But for a creative worker, it doesn't matter who makes a meal out of you, tech or content – all that matters is that you're being devoured.</p>
<p>This brings me to the debate over training AI and copyright. A lot of creative workers are justifiably angry and afraid that the AI companies want to destroy creative jobs. The CTO of Openai literally just said that onstage: "Some creative jobs maybe will go away, but maybe they shouldn’t have been there in the first place":</p>
<p><a href="https://bgr.com/tech/openai-cto-thinks-ai-will-kill-some-jobs-that-shouldnt-have-existed-in-the-first-place/">https://bgr.com/tech/openai-cto-thinks-ai-will-kill-some-jobs-that-shouldnt-have-existed-in-the-first-place/</a></p>
<p>Many of these workers are accordingly cheering on the entertainment industry's lawsuits over AI training. In these lawsuits, companies like the <em>New York Times</em> and Getty Images claim that the steps associated with training an AI model infringe copyright. This isn't a great copyright theory based on current copyright precedents, and if the suits succeed, they'll narrow fair use in ways that will impact all kinds of socially beneficial activities, like scraping the web to make the Internet Archive's Wayback Machine:</p>
<p><a href="https://pluralistic.net/2024/05/13/spooky-action-at-a-close-up/#invisible-hand">https://pluralistic.net/2024/05/13/spooky-action-at-a-close-up/#invisible-hand</a></p>
<p>But you can't make an omelet without breaking eggs, right? For some creative workers, legal uncertainty for computational linguists, search engines, and archiving projects are a small price to pay if it means keeping AI from destroying their livelihoods.</p>
<p>Here's the problem: establishing that AI training requires a copyright license <em>will not</em> stop AI from being used to erode the wages and working conditions of creative workers. The companies suing over AI training are also notorious exploiters of creative workers, union-busters and wage-stealers. They don't want to get rid of generative AI, they just want to get paid for the content used to create it. Their use-case for gen AI is the same as Openai's CTO's use-case: get rid of creative jobs and pay less for creative labor.</p>
<p>This isn't hypothetical. Remember last summer's actor strike? The sticking point was that the studios wanted to pay actors a single fee to scan their bodies and faces, and then use those scans instead of hiring those actors, forever, without ever paying them again. Does it matter to an actor whether the AI that replaces you at Warner, Sony, Universal, Disney or Paramount (yes, three of the Big Five studios are also the Big Three labels!) was made by Openai without paying the studios for the training material, or whether Openai paid a license fee that the studios kept?</p>
<p>This is true across the board. The Big Five publishers categorically refuse to include contractual language promising not to train an LLM with the books they acquire from writers. The game studios require all their voice actors to start every recording session with an on-tape assignment of the training rights to the session:</p>
<p><a href="https://pluralistic.net/2023/02/09/ai-monkeys-paw/#bullied-schoolkids">https://pluralistic.net/2023/02/09/ai-monkeys-paw/#bullied-schoolkids</a></p>
<p>And now, with total predictability, Universal – the largest music company in the world – has announced that it will start training voice-clones with the music in its catalog:</p>
<p><a href="https://www.rollingstone.com/music/music-news/umg-startsai-voice-clone-partnership-with-soundlabs-1235041808/">https://www.rollingstone.com/music/music-news/umg-startsai-voice-clone-partnership-with-soundlabs-1235041808/</a></p>
<p>This comes hot on the heels of a massive blow-up between Universal and Tiktok, in which Universal professed its outrage that Tiktok was going to train voice-clones with the music Universal licensed to it. In other words: Universal's copyright claims over AI training cash out to this: "If anyone is going to profit from immiserating musicians, it's going to be us, not Tiktok."</p>
<p>I understand why Universal would like this idea. I just don't understand why any musician would root for Universal to defeat Tiktok, or Getty Images to trounce Stable Diffusion. Do you really think that Getty Images <em>likes</em> paying photographers and wants to give them a single penny more than they absolutely have to?</p>
<p>As we learned from George Orwell's avant-garde animated agricultural documentary <em>Animal Farm</em>, the problem isn't who holds the whip, the problem is the whip itself:</p>
<blockquote><p>
  The creatures outside looked from pig to man, and from man to pig, and from pig to man again; but already it was impossible to say which was which.
</p></blockquote>
<p>Entertainment execs and tech execs alike are obsessed with AI because they view the future of "content" as fundamentally passive. Here's Ryan Broderick putting it better than I ever could:</p>
<blockquote><p>
  At a certain audience size, you just assume those people are locked in and will consume anything you throw at them. Then it just becomes a game of lowering your production costs and increasing your prices to increase your margins. This is why executives love AI and why the average American can’t afford to eat at McDonald’s anymore.
</p></blockquote>
<p><a href="https://www.garbageday.email/p/ceo-passive-content-obsession">https://www.garbageday.email/p/ceo-passive-content-obsession</a></p>
<p>Here's a rule of thumb for tech policy prescriptions. Any time you find yourself, as a worker, rooting for the same policy as your boss, you should check and make sure you're on the right side of history. The fact that creative bosses are so obsessed with making copyright cover more kinds of works, restrict more activities, lasting longer and generating higher damages should make creative workers look askance at these proposals.</p>
<p>After 40 years of expanded copyright, we have a creative industry that's larger and more profitable than ever, and yet the share of income going to creative workers has been in steady decline over that entire period. Every year, the share of creative income that creative workers can lay claim to declines, both proportionally and in real terms.</p>
<p>As with the mystery of Spotify's payments, this isn't a mystery at all. You just need to understand that when creators are stuck bargaining with a tiny, powerful cartel of movie, TV, music, publishing, streaming, games or app companies, it doesn't matter how much copyright they have to bargain with. Giving a creative worker more copyright is like giving a bullied schoolkid more lunch-money. There's no amount of money that will satisfy the bullies and leave enough left over for the kid to buy lunch. They just take <em>everything</em>.</p>
<p>Telling creative workers that they can solve their declining wages with more copyright is a denial that creative workers are <em>workers</em> at all. It treats us as entrepreneurial small businesses, LLCs with MFAs negotiating B2B with other companies. That's how we lose.</p>
<p>On the other hand, if we address the problems of AI and labor as <em>workers</em>, and insist on labor rights – like the Writers Guild did when it struck last summer – then we ally ourselves with every other worker whose wages and working conditions are being attacked with AI:</p>
<p><a href="https://pluralistic.net/2023/10/01/how-the-writers-guild-sunk-ais-ship/">https://pluralistic.net/2023/10/01/how-the-writers-guild-sunk-ais-ship/</a></p>
<p>Our path to better working conditions lies through organizing and striking, not through helping our bosses sue other giant mulitnational corporations for the right to bleed us out.</p>
<p>The US Copyright Office has repeatedly stated that AI-generated works don't qualify for copyrights, meaning everything AI generated can be freely copied and distributed and the companies that make them can't stop them. This is <em>fantastic</em> news, because the only thing our bosses hate more than paying us is not being able to stop other people from copying the things we make for them. We should be shouting this from the rooftops, not demanding <em>more</em> copyright for AI.</p>
<p>Here's a thing: FTC chair Lina Khan recently told an audience that she was thinking of using her Section 5 powers (to regulate "unfair and deceptive" conduct) to go after AI training:</p>
<p><a href="https://www.youtube.com/watch?v=3mh8Z5pcJpg">https://www.youtube.com/watch?v=3mh8Z5pcJpg</a></p>
<p>Khan has already used these Section 5 powers to secure labor rights, for example, by banning noncompetes:</p>
<p><a href="https://pluralistic.net/2024/04/25/capri-v-tapestry/#aiming-at-dollars-not-men">https://pluralistic.net/2024/04/25/capri-v-tapestry/#aiming-at-dollars-not-men</a></p>
<p>Creative workers should be banding together with other labor advocates to propose ways for the FTC to prevent <em>all</em> AI-based labor exploitation, like the "reverse-centaur" arrangement in which a human serves as an AI's body, working at breakneck pace until they are psychologically and physically ruined:</p>
<p><a href="https://pluralistic.net/2022/04/17/revenge-of-the-chickenized-reverse-centaurs/">https://pluralistic.net/2022/04/17/revenge-of-the-chickenized-reverse-centaurs/</a></p>
<p>As workers standing with other workers, we can demand the things that help us, even (especially) when that means less for our bosses. On the other hand, if we confine ourselves to backing our bosses' plays, we only stand to gain whatever crumbs they choose to drop at their feet for us.</p>
<hr>

<h2>Hey look at this (<a href="https://pluralistic.net/2024/06/21/off-the-menu/#linkdump">permalink</a>)</h2>
<p><img decoding="async" src="https://i0.wp.com/craphound.com/images/heylookatthis.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<ul>
<li>The CEO Passive Content Obsession <a href="https://www.garbageday.email/p/ceo-passive-content-obsession">https://www.garbageday.email/p/ceo-passive-content-obsession</a>
</li>
<li>
<p>Fungal banking <a href="https://crookedtimber.org/2024/06/20/occasional-paper-fungal-banking/">https://crookedtimber.org/2024/06/20/occasional-paper-fungal-banking/</a></p>
</li>
<li>
<p>Gene Nora Jessen, Pioneering Aviator Who Was Part of an Enigmatic ‘Woman in Space Program,’ Dies at 87 <a href="https://www.wsj.com/business/gene-nora-jessen-pioneer-aviator-dead-87-dd960d2f?st=ife24pnayefd5ap&amp;reflink=desktopwebshare_permalink">https://www.wsj.com/business/gene-nora-jessen-pioneer-aviator-dead-87-dd960d2f?st=ife24pnayefd5ap&amp;reflink=desktopwebshare_permalink</a> (h/t Taylor Jessen)</p>
</li>
</ul>
<hr>
<p><a name="retro"></a><br>
<img decoding="async" alt="A Wayback Machine banner." src="https://i0.wp.com/craphound.com/images/wayback-machine-hed-796x416.png?resize=796%2C416&amp;ssl=1" data-recalc-dims="1"></p>
<h2>This day in history (<a href="https://pluralistic.net/2024/06/21/off-the-menu/#retro">permalink</a>)</h2>
<p>#20yrsago Tunneling ssh over DNS <a href="https://web.archive.org/web/20040916193409/http://www.doxpara.com/bo2004.ppt">https://web.archive.org/web/20040916193409/http://www.doxpara.com/bo2004.ppt</a></p>
<p>#10yrsago Open Wireless Movement’s router OS will let you securely share your Internet with the world <a href="https://arstechnica.com/tech-policy/2014/06/new-router-firmware-safely-opens-your-wi-fi-network-to-strangers/">https://arstechnica.com/tech-policy/2014/06/new-router-firmware-safely-opens-your-wi-fi-network-to-strangers/</a></p>
<p>#10yrsago Steve Wozniak wants you to support Mayday.US and get money out of politics <a href="https://www.youtube.com/watch?v=ZoZ-tJiwBvc">https://www.youtube.com/watch?v=ZoZ-tJiwBvc</a></p>
<p>#10yrsago Gangs run mass-scale romance cons with phished dating-site logins <a href="https://www.netcraft.com/blog/criminals-launch-mass-phishing-attacks-against-online-dating-sites/">https://www.netcraft.com/blog/criminals-launch-mass-phishing-attacks-against-online-dating-sites/</a></p>
<p>#10yrsago Greenhouse: browser plugin that automatically annotates politicians’ names with their funders <a href="https://allaregreen.us/">https://allaregreen.us</a></p>
<p>#10yrsago Judy Blume: parents shouldn’t worry about what their kids are reading <a href="https://www.telegraph.co.uk/culture/hay-festival/10868544/Judy-Blume-Parents-worry-too-much-about-what-children-read.html">https://www.telegraph.co.uk/culture/hay-festival/10868544/Judy-Blume-Parents-worry-too-much-about-what-children-read.html</a></p>
<p>#5yrsago Learning from Baltimore’s disaster, Florida city will pay criminals $600,000 to get free of ransomware attack <a href="https://apnews.com/article/0762caec21874fc09741abbdec0f78ab">https://apnews.com/article/0762caec21874fc09741abbdec0f78ab</a></p>
<p>#5yrsago Elizabeth Warren proposes a ban on private prisons and immigration facilities <a href="https://medium.com/@teamwarren/ending-private-prisons-and-exploitation-for-profit-cb6dea67e913">https://medium.com/@teamwarren/ending-private-prisons-and-exploitation-for-profit-cb6dea67e913</a></p>
<p>#5yrsago Google Maps is still overrun with scammers pretending to be local businesses, and Google’s profiting from them <a href="https://tech.slashdot.org/story/19/06/20/1746232/millions-of-business-listings-on-google-maps-are-fake----and-google-profits">https://tech.slashdot.org/story/19/06/20/1746232/millions-of-business-listings-on-google-maps-are-fake—-and-google-profits</a></p>
<p>#5yrsago America can only go to war against Iran if it reinstates the draft <a href="https://www.usatoday.com/story/opinion/2018/05/31/iran-regime-change-american-troops-military-draft-column/656240002/">https://www.usatoday.com/story/opinion/2018/05/31/iran-regime-change-american-troops-military-draft-column/656240002/</a></p>
<p>#5yrsago Independent audit finds Facebook activity has fallen by 20% since Cambridge Analytica <a href="https://www.theguardian.com/technology/2019/jun/20/facebook-usage-collapsed-since-scandal-data-shows">https://www.theguardian.com/technology/2019/jun/20/facebook-usage-collapsed-since-scandal-data-shows</a></p>
<p>#5yrsago Tennessee lawmaker defends operating an unregistered “Christian magic supply” business <a href="https://www.tennessean.com/story/news/politics/2019/06/20/matthew-hill-tennessee-house-speaker-christian-magic-supply-business-dock-haley-gospel-magic/1481310001/">https://www.tennessean.com/story/news/politics/2019/06/20/matthew-hill-tennessee-house-speaker-christian-magic-supply-business-dock-haley-gospel-magic/1481310001/</a></p>
<hr>

<h2>Upcoming appearances (<a href="https://pluralistic.net/2024/06/21/off-the-menu/#upcoming">permalink</a>)</h2>
<p><img decoding="async" alt="A photo of me onstage, giving a speech, holding a mic." src="https://i0.wp.com/craphound.com/images/appearances.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<ul>
<li>Locus Awards reading (virtual), Jun 21<br>
<a href="https://locusmag.com/2024-locus-awards-weekend/">https://locusmag.com/2024-locus-awards-weekend/</a>
</li>
<li>
<p>Locus Awards keynote (Oakland), Jun 22<br>
<a href="https://locusmag.com/2024-locus-awards-weekend/">https://locusmag.com/2024-locus-awards-weekend/</a></p>
</li>
<li>
<p>HOPE XV, Jul 14 (Queens, NY)<br>
<a href="https://www.hope.net/talks.html">https://www.hope.net/talks.html</a></p>
</li>
<li>
<p>Exile in Bookville, (Chicago), July 20<br>
<a href="https://exileinbookville.com/events/39808">https://exileinbookville.com/events/39808</a></p>
</li>
<li>
<p>American Association of Law Libraries keynote (Chicago), Jul 21<br>
<a href="https://www.aallnet.org/conference/agenda/keynote-speaker/">https://www.aallnet.org/conference/agenda/keynote-speaker/</a></p>
</li>
</ul>
<hr>
<p><a name="recent"></a><br>
<img decoding="async" alt="A screenshot of me at my desk, doing a livecast." src="https://i0.wp.com/craphound.com/images/recentappearances.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<h2>Recent appearances (<a href="https://pluralistic.net/2024/06/21/off-the-menu/#recent">permalink</a>)</h2>
<ul>
<li>Living Your Principles<br>
<a href="https://www.youtube.com/watch?v=UTfqxF5KyCc">https://www.youtube.com/watch?v=UTfqxF5KyCc</a>
</li>
<li>
<p>Reimagining the Internet<br>
<a href="https://publicinfrastructure.org/podcast/102-cory-doctorow-enshittification/">https://publicinfrastructure.org/podcast/102-cory-doctorow-enshittification/</a></p>
</li>
<li>
<p>Circulating ideas<br>
<a href="https://circulatingideas.com/2024/06/11/261-the-bezzle-by-cory-doctorow-summer-reading-spectacular/">https://circulatingideas.com/2024/06/11/261-the-bezzle-by-cory-doctorow-summer-reading-spectacular/</a></p>
</li>
</ul>
<hr>
<p><a name="latest"></a><br>
<img decoding="async" alt="A grid of my books with Will Stahle covers.." src="https://i0.wp.com/craphound.com/images/recent.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<h2>Latest books (<a href="https://pluralistic.net/2024/06/21/off-the-menu/#latest">permalink</a>)</h2>
<ul>
<li>The Bezzle: a sequel to "Red Team Blues," about prison-tech and other grifts, Tor Books (US), Head of Zeus (UK), February 2024 (<a href="http://the-bezzle.org/">the-bezzle.org</a>). Signed, personalized copies at Dark Delicacies (<a href="https://www.darkdel.com/store/p3062/Available_Feb_20th%3A_The_Bezzle_HB.html#/">https://www.darkdel.com/store/p3062/Available_Feb_20th%3A_The_Bezzle_HB.html#/</a>).
</li>
<li>
<p>"The Lost Cause:" a solarpunk novel of hope in the climate emergency, Tor Books (US), Head of Zeus (UK), November 2023 (<a href="http://lost-cause.org/">http://lost-cause.org</a>). Signed, personalized copies at Dark Delicacies (<a href="https://www.darkdel.com/store/p3007/Pre-Order_Signed_Copies%3A_The_Lost_Cause_HB.html#/">https://www.darkdel.com/store/p3007/Pre-Order_Signed_Copies%3A_The_Lost_Cause_HB.html#/</a>)</p>
</li>
<li>
<p>"The Internet Con": A nonfiction book about interoperability and Big Tech (Verso) September 2023 (<a href="http://seizethemeansofcomputation.org/">http://seizethemeansofcomputation.org</a>). Signed copies at Book Soup (<a href="https://www.booksoup.com/book/9781804291245">https://www.booksoup.com/book/9781804291245</a>).</p>
</li>
<li>
<p>"Red Team Blues": "A grabby, compulsive thriller that will leave you knowing more about how the world works than you did before." Tor Books <a href="http://redteamblues.com/">http://redteamblues.com</a>. Signed copies at Dark Delicacies (US): <a href="https://www.darkdel.com/store/p2873/Wed%2C_Apr_26th_6pm%3A_Red_Team_Blues%3A_A_Martin_Hench_Novel_HB.html#/"> and Forbidden Planet (UK): </a><a href="https://forbiddenplanet.com/385004-red-team-blues-signed-edition-hardcover/">https://forbiddenplanet.com/385004-red-team-blues-signed-edition-hardcover/</a>.</p>
</li>
<li>
<p>"Chokepoint Capitalism: How to Beat Big Tech, Tame Big Content, and Get Artists Paid, with Rebecca Giblin", on how to unrig the markets for creative labor, Beacon Press/Scribe 2022 <a href="https://chokepointcapitalism.com/">https://chokepointcapitalism.com</a></p>
</li>
<li>
<p>"Attack Surface": The third Little Brother novel, a standalone technothriller for adults. The <em>Washington Post</em> called it "a political cyberthriller, vigorous, bold and savvy about the limits of revolution and resistance." Order signed, personalized copies from Dark Delicacies <a href="https://www.darkdel.com/store/p1840/Available_Now%3A_Attack_Surface.html">https://www.darkdel.com/store/p1840/Available_Now%3A_Attack_Surface.html</a></p>
</li>
<li>
<p>"How to Destroy Surveillance Capitalism": an anti-monopoly pamphlet analyzing the true harms of surveillance capitalism and proposing a solution. <a href="https://onezero.medium.com/how-to-destroy-surveillance-capitalism-8135e6744d59?sk=f6cd10e54e20a07d4c6d0f3ac011af6b">https://onezero.medium.com/how-to-destroy-surveillance-capitalism-8135e6744d59?sk=f6cd10e54e20a07d4c6d0f3ac011af6b</a>) (signed copies: <a href="https://www.darkdel.com/store/p2024/Available_Now%3A__How_to_Destroy_Surveillance_Capitalism.html">https://www.darkdel.com/store/p2024/Available_Now%3A__How_to_Destroy_Surveillance_Capitalism.html</a>)</p>
</li>
<li>
<p>"Little Brother/Homeland": A reissue omnibus edition with a new introduction by Edward Snowden: <a href="https://us.macmillan.com/books/9781250774583">https://us.macmillan.com/books/9781250774583</a>; personalized/signed copies here: <a href="https://www.darkdel.com/store/p1750/July%3A__Little_Brother_%26_Homeland.html">https://www.darkdel.com/store/p1750/July%3A__Little_Brother_%26_Homeland.html</a></p>
</li>
<li>
<p>"Poesy the Monster Slayer" a picture book about monsters, bedtime, gender, and kicking ass. Order here: <a href="https://us.macmillan.com/books/9781626723627">https://us.macmillan.com/books/9781626723627</a>. Get a personalized, signed copy here: <a href="https://www.darkdel.com/store/p2682/Corey_Doctorow%3A_Poesy_the_Monster_Slayer_HB.html#/">https://www.darkdel.com/store/p2682/Corey_Doctorow%3A_Poesy_the_Monster_Slayer_HB.html#/</a>.</p>
</li>
</ul>
<hr>
<p><a name="upcoming-books"></a><br>
<img decoding="async" alt="A cardboard book box with the Macmillan logo." src="https://i0.wp.com/craphound.com/images/upcoming-books.jpg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<h2>Upcoming books (<a href="https://pluralistic.net/2024/06/21/off-the-menu/#upcoming-books">permalink</a>)</h2>
<ul>
<li>Picks and Shovels: a sequel to "Red Team Blues," about the heroic era of the PC, Tor Books, February 2025
</li>
<li>
<p>Unauthorized Bread: a middle-grades graphic novel adapted from my novella about refugees, toasters and DRM, FirstSecond, 2025</p>
</li>
</ul>
<hr>
<p><a name="bragsheet"></a><br>
<img decoding="async" src="https://i0.wp.com/craphound.com/images/colophonimages.jpeg?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<h2>Colophon (<a href="https://pluralistic.net/2024/06/21/off-the-menu/#bragsheet">permalink</a>)</h2>
<p>Today's top sources:</p>
<p><b>Currently writing: </b></p>
<ul>
<li>Enshittification: a nonfiction book about platform decay. Today's progress: 774 words (15308 words total).
</li>
<li>
<p>A Little Brother short story about DIY insulin PLANNING</p>
</li>
<li>
<p>Picks and Shovels, a Martin Hench noir thriller about the heroic era of the PC. FORTHCOMING TOR BOOKS JAN 2025</p>
</li>
<li>
<p>Vigilant, Little Brother short story about remote invigilation. FORTHCOMING ON TOR.COM</p>
</li>
<li>
<p>Spill, a Little Brother short story about pipeline protests. FORTHCOMING ON TOR.COM</p>
</li>
</ul>
<p><b>Latest podcast:</b> My 2004 Microsoft DRM Talk <a href="https://craphound.com/news/2024/06/16/my-2004-microsoft-drm-talk/">https://craphound.com/news/2024/06/16/my-2004-microsoft-drm-talk/&gt;</a></p>
<hr>
<p><img decoding="async" src="https://i0.wp.com/craphound.com/images/by.svg.png?w=840&amp;ssl=1" data-recalc-dims="1"></p>
<p>This work – excluding any serialized fiction – is licensed under a Creative Commons Attribution 4.0 license. That means you can use it any way you like, including commercially, provided that you attribute it to me, Cory Doctorow, and include a link to pluralistic.net.</p>
<p><a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
<p>Quotations and images are not included in this license; they are included either under a limitation or exception to copyright, or on the basis of a separate license. Please exercise caution.</p>
<hr>
<h2>How to get Pluralistic:</h2>
<p>Blog (no ads, tracking, or data-collection):</p>
<p><a href="http://pluralistic.net/">Pluralistic.net</a></p>
<p>Newsletter (no ads, tracking, or data-collection):</p>
<p><a href="https://pluralistic.net/plura-list">https://pluralistic.net/plura-list</a></p>
<p>Mastodon (no ads, tracking, or data-collection):</p>
<p><a href="https://mamot.fr/@pluralistic">https://mamot.fr/@pluralistic</a></p>
<p>Medium (no ads, paywalled):</p>
<p><a href="https://doctorow.medium.com/">https://doctorow.medium.com/</a></p>
<p>Twitter (mass-scale, unrestricted, third-party surveillance and advertising):</p>
<p><a href="https://twitter.com/doctorow">https://twitter.com/doctorow</a></p>
<p>Tumblr (mass-scale, unrestricted, third-party surveillance and advertising):</p>
<p><a href="https://mostlysignssomeportents.tumblr.com/tagged/pluralistic">https://mostlysignssomeportents.tumblr.com/tagged/pluralistic</a></p>
<p>"<em>When life gives you SARS, you make sarsaparilla</em>" -Joey "Accordion Guy" DeVilla</p>

	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>]]></description>
        </item>
        <item>
            <title><![CDATA[HybridNeRF: Efficient Neural Rendering (138 pts)]]></title>
            <link>https://haithemturki.com/hybrid-nerf/</link>
            <guid>40759333</guid>
            <pubDate>Sat, 22 Jun 2024 14:21:21 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://haithemturki.com/hybrid-nerf/">https://haithemturki.com/hybrid-nerf/</a>, See on <a href="https://news.ycombinator.com/item?id=40759333">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
    <div>
        <h3>Eyeful Tower Comparisons</h3>
        </div>
    <figure>
        <figcaption>
            We compare HybridNeRF to prior work (FPS shown for 2Kx2K rendering on a single Nvidia 4090 GPU). <a href="https://creiser.github.io/merf/">MERF</a>, <a href="https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/">3DGS</a>, and <a href="https://lioryariv.github.io/volsdf/">VolSDF<sup>*</sup></a> (our implementation using iNGP accleration primitives) do not support training models in HDR and therefore do not support exposure adjustments.
        </figcaption>
        <figcaption id="eyeful-comparison">
            Our quality is slightly better than <a href="https://vr-nerf.github.io/">VR-NeRF</a> while rendering over 10x faster. Our results are significantly better than faster rendering approaches, especially when modeling specular effects.
        </figcaption>
        <video width="90%" controls="" id="eyeful-video">
            <source src="https://haithemturki.com/hybrid-nerf/vids/workshop.mp4" type="video/mp4" poster="https://haithemturki.com/hybrid-nerf/images/workshop.jpg">
        </video>
    </figure>
</div><div>
    <p>
        <h3>Citation</h3>
    </p>
    <figure>
        <pre><code>@InProceedings{turki2024hybridnerf,
      title={HybridNeRF: Efficient Neural Rendering via Adaptive Volumetric Surfaces}, 
      author={Haithem Turki and Vasu Agrawal and Samuel Rota Bulò and Lorenzo Porzi and Peter Kontschieder and Deva Ramanan and Michael Zollh\"{o}fer and Christian Richardt},
      booktitle = {Computer Vision and Pattern Recognition (CVPR)},
      year={2024}
}</code></pre>
    </figure>
  </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Andrew S. Tanenbaum Receives ACM Software System Award (250 pts)]]></title>
            <link>https://vu.nl/en/news/2024/andrew-s-tanenbaum-receives-acm-software-system-award</link>
            <guid>40759277</guid>
            <pubDate>Sat, 22 Jun 2024 14:12:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://vu.nl/en/news/2024/andrew-s-tanenbaum-receives-acm-software-system-award">https://vu.nl/en/news/2024/andrew-s-tanenbaum-receives-acm-software-system-award</a>, See on <a href="https://news.ycombinator.com/item?id=40759277">Hacker News</a></p>
<div id="readability-page-1" class="page"><p>
                        Andrew S. Tanenbaum, professor emeritus of Computer Science at VU Amsterdam, receives the ACM Software System Award for MINIX, which influenced the teaching of Operating Systems principles to multiple generations of students and contributed to the design of widely used operating systems, including Linux. 
                    </p><div><p>Tanenbaum created MINIX 1.0 in 1987 to accompany his textbook, <em>Operating Systems: Design and Implementation</em>.&nbsp; MINIX was a small microkernel-based UNIX operating system for the IBM PC, which was popular at the time. It was roughly 12,000 lines of code, and in addition to the microkernel, included a memory manager, file system and core UNIX utility programs. It became free open-source software in 2000.&nbsp;&nbsp;</p><p><strong>Inspiration for LINUX</strong>&nbsp;<br>
Beyond enabling the success of Tanenbaum’s textbook, the impact of MINIX has been phenomenal. It was an inspiration for LINUX, which has grown into the most successful open-source operating system powering cloud servers, mobile phones and Internet of Things devices.&nbsp; MINIX was also the basis for the MeikOS operating system for Meikotransputer-based computers and runs inside popular microchips. A later version of MINIX, MINIX 3.0 is intended for resource-limited and embedded computers and for applications requiring high reliability. Beyond the direct impact of MINIX, Tanenbaum’s advocacy for microkernel design has impacted generations of operating system designers.&nbsp;&nbsp;&nbsp;</p><p><a href="https://awards.acm.org/software-system">The ACM Software System Award</a> is presented to an institution or individual(s) recognized for developing a software system that has had a lasting influence, reflected in contributions to concepts, in commercial acceptance, or both. The Software System Award carries a prize of $35,000. Financial support for the Software System Award is provided by IBM.&nbsp;</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[After my dad died, I ran and sold his company (2018) (586 pts)]]></title>
            <link>https://anandsanwal.me/2018/06/19/dad-company-sale/</link>
            <guid>40758767</guid>
            <pubDate>Sat, 22 Jun 2024 12:49:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://anandsanwal.me/2018/06/19/dad-company-sale/">https://anandsanwal.me/2018/06/19/dad-company-sale/</a>, See on <a href="https://news.ycombinator.com/item?id=40758767">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p>From tech in NYC to chemical manufacturing in Nasik (India), here’s a guide that hopefully nobody ever needs.</p>



<p>On April 17, 2017 my dad died.</p>



<p>It was the worst day of my life.</p>



<p>It was also the day I started to lead a second company – his company. (Note: the first company is CB Insights.)</p>



<p>His company was in India (a country I knew little about) in the chemical manufacturing industry (an industry I knew nothing about).</p>



<p>On June 1st, 2018, after running his company for 13 months, it was acquired.</p>



<p>While I don’t think most people would ever find themselves in a similar situation (I certainly hope not), I thought I’d share the story and some of my learnings &amp; observations from that time about business, M&amp;A, teams, India, and assorted miscellaneous thoughts.</p>



<p>Notes: &nbsp;This will probably be slightly rambly and stream-of-consciousness as there are lots of thoughts rolling around in my head.</p>



<p>So, here we go…</p>



<p>Warning: this is going to be long so a table of contents is below.</p>



<ul>
<li><a href="https://www.anandsanwal.me/dad-company-sale/#life">Life comes at you fast</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#newgig">Day 1 in my new gig</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#plan">What the F is the plan?</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#running">Running a business you know nothing about</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#coldcalls">Growth the old-fashioned way — cold calling and cold emailing prospects and customers</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#buyers">The M&amp;A buyers show up</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#sold">June 1st — Atlas is officially sold</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#farewell">The official farewell</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#CBimpact">What was the impact on CB Insights?</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#differences">The differences between CB Insights and Atlas</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#ma">Thoughts on M&amp;A</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#india">Thoughts on India</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#tech">Thoughts on technology &amp; data</a></li>



<li><a href="https://www.anandsanwal.me/dad-company-sale/#thanks">Thank you’s</a></li>
</ul>



<h3 id="life"><strong>Life comes at you fast</strong></h3>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18125433/atlas-1024x768.png?resize=1024%2C768&amp;ssl=1" alt="" data-recalc-dims="1"></figure>



<p>As I was going with family to cremate my father in a traditional Hindu funeral, someone who I didn’t know came up to me and said in Hindi, “<em>Saab, humara kya hoga?</em>”</p>



<p>That translates to “Sir, what will happen to us?”</p>



<p>I didn’t know who it was.</p>



<p>I assumed it was a worker from my Dad’s factory.</p>



<p>I was a mess at the time.</p>



<p>And I remember thinking to myself, “Why the F are you asking me about this right now?”</p>



<p>But this wasn’t the time for anger or to even to think about this so I just knee-jerk responded in my heavily American-accented Hindi that “<em>Meh dekh loonga</em>” which translates to “I’ll look after it.”</p>



<p>And so at that point, in addition to CB Insights, I knew I was going to run my Dad’s business. To be honest, I had already thought about this possibility when he was admitted to the hospital when the doctors said the situation was looking dire. &nbsp;</p>



<p>But no matter my age, Dad was always the strongest, smartest person I knew, and so I assumed he’d pull through and things would go back to normal. With him tirelessly working on Atlas, the company he founded, and me going back to CB Insights.</p>



<p>But then April 17th happened.</p>



<p>And now, I was going to run his business.</p>



<p>I was going to run Atlas.</p>



<p>I wasn’t ready for this.</p>



<p>Before we go further, a bit of context on Atlas, my Dad’s business.</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18125705/atlas-outside-1024x680.png?resize=1024%2C680&amp;ssl=1" alt="" data-recalc-dims="1"></figure>



<p>The company was recently renamed AIMS Impex, but it started and for most of its life, it was known as Atlas Fine Chemicals. Industry folks know it as Atlas, and my sisters and I grew up knowing it under that name so I will refer to it as Atlas going forward. &nbsp;</p>



<p>Atlas is a manufacturer of specialty flavor &amp; fragrance chemicals such as coumarin, 6-methyl coumarin, safranal, natural vanilla, and cyclocitral among others. Atlas’ customers include the world’s largest flavor &amp; fragrance houses including IFF, Givaudan, Firmenich, Takasago, and Symrise among others.</p>



<p>Atlas is based 4 hours from Mumbai in a city called Nasik (1.486 million people) and the manufacturing facility is about 35 minutes from Nasik in a small village called Sinnar.</p>



<p>If there ever was a polar opposite to CB Insights, it’s Atlas. &nbsp;</p>



<p>CB Insights is a technology company.</p>



<p>Atlas is an industrial manufacturing company. &nbsp;</p>



<p>(note: more on the differences below)</p>



<p>But here we were.</p>



<h3 id="newgig"><strong>Day 1 in my new gig</strong></h3>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18130130/good-quality-1024x768.png?resize=1024%2C768&amp;ssl=1" alt="" data-recalc-dims="1"></figure>



<p>I don’t remember the exact day I went to the office for the first time as the weeks after April 17th were a blur of family, tradition, and emotion.</p>



<p>Before even stepping foot in the office, I had asked the team to send me the reports they sent to Dad so I could get familiar with the business.</p>



<p>TBH, I didn’t know what I’d do with these reports, but I figured that acting like I knew what I might be doing might provide some confidence to the team. &nbsp;</p>



<p>Candidly, my only qualification to run Atlas at this time was that I was the founder’s son.</p>



<p>I had tried to be the good Indian son back in 1998-2000 and work at Atlas so knew the biz a bit in its earlier days, but 18 years is a long time for a business and my mind was jammed with all sorts of other experiences and ideas since then. My time at Atlas was just a distant memory.</p>



<p>In 1998, moving from the fun of NYC to small town India was tough especially as someone born and brought up in the US. Moreover, I was a know-it-all who had all the answers despite just graduating from college and so my dad’s inability to recognize my genius bothered me.</p>



<p>And so after 18 months working with Dad, I left to join Kozmo.com.</p>



<p>(Yes –&nbsp;<a href="https://www.cbinsights.com/research/biggest-startup-failures/">that Kozmo that spectacularly failed</a>. Clearly, I had great judgment.)</p>



<p>I still wonder what Atlas might have become if I could have figured out how to be more of a student and less of an Ivy League douche when I was working with my dad back then. What kind of duo might we have been?</p>



<p>So, in a strange and sad way, this was an opportunity to finally be the good Indian son and run Dad’s business.</p>



<p>In late April, I finally went to the office.</p>



<p>When I entered, everyone stood up to greet me. &nbsp;</p>



<p>Nobody called me Anand.</p>



<p>I was referred to as Sir, which is what everyone referred to my father as.</p>



<p>Yup — this felt strange.</p>



<p>I remember thinking this was odd at the time, and during all my visits to the office subsequently, but in many ways, this sort of cultural deference to the unqualified boss’ son is what enabled Atlas to carry on.</p>



<p>I imagine if the same had happened in the US, there would have been many more questions about my qualifications and capabilities. At Atlas, those conversations might have very well happened, but I doubt it. Or, if they did, these questions weren’t directed to me. I got lucky here.</p>



<p>Everyone, for better or worse, assumed I had a clue and was looking for me to develop a plan.</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18130425/hardhats-1024x680.png?resize=1024%2C680&amp;ssl=1" alt="" data-recalc-dims="1"></figure>



<h3 id="plan"><strong>What the F is the plan?</strong></h3>



<p>So I needed a plan. &nbsp;</p>



<p>Not on day 1, but pretty quickly.</p>



<p>Not because anyone was asking for one, but for myself. For Atlas.</p>



<p>How does one develop a plan when you don’t understand the business, the science, the industry, the country, and sometimes even the language? (I have passable Hindi but a lot of the local conversations at Atlas were in Marathi which I don’t understand.)</p>



<p>In my view, there were 4 options for the business.</p>



<h5 id="option1"><strong>Option 1 — Run the business and become this huge multi-industry conglomerate</strong></h5>



<p>I entertained Option 1 for about 6 weeks. The ill-conceived idea was that I’d figure out how to run both Atlas and CB Insights, going forward with Atlas&nbsp;as the beachhead for a larger industrials business and CB Insights&nbsp;as the first part of a massive technology arm.</p>



<p>Visions of grandeur and all that good stuff.</p>



<p>This was some stupid, naive thinking. &nbsp;</p>



<p>In India, you see all these families (Ambani, Birla, Tata, Godrej, Hinduja, etc) who are in every potential business line possible. I figured they all started somewhere. Maybe this would be my starting point.</p>



<p>After about 6 weeks of trying to be present at CB Insights, but doing calls every morning at 6am with the Atlas team and emails every evening responding to the team or to Atlas customers, it became apparent that Option 1 wasn’t feasible.</p>



<p>I kept this 6am morning call/evening email routine going for the last 13 months with CB Insights occupying the middle of the day and every other minute of idle brain time. Needless to say, I’ve aged immeasurably in the last 13 months. My desire to build a multi-industry conglomerate died because the idea was just too tiring.</p>



<h5 id="option2"><strong>Option 2 — Sell the company for its parts</strong></h5>



<p>For a second, I looked at what the company might fetch for its assets. Its land, plant, etc.</p>



<p>I’d never done something like this but I remember hearing about it when Gordon Gecko talked about it in the movie&nbsp;<em>Wall Street</em>&nbsp;so figured, why not?</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18130852/gecko.png?ssl=1" alt="" data-recalc-dims="1"></figure>



<p>If the strategy works in movies, it must work in real life too, right?</p>



<p>But this wasn’t a real option ever and was discounted in a few hours.</p>



<p>My dad built this company over 30 years with many of his team having been with him for 20+. Selling the company’s assets, even if feasible, would be me failing his team and him. &nbsp;</p>



<p>Not going to happen.</p>



<h5 id="option3"><strong>Option 3 — Find a young, aggressive, ambitious person to run Atlas</strong></h5>



<p>The third idea was to see if there was someone who could run Atlas with some guidance from Dad’s team and me (assuming I could eventually understand the business). And then give this person the ability to earn more and more equity over time.</p>



<p>Essentially, they’d run the company and eventually own it.</p>



<p>This idea was appealing as it’d let my family continue to be involved with the business while also finding someone capable to take it to the next level.</p>



<p>The problem here was that I had no network in India from which to even think about finding someone for this role. I spoke with a couple of candidates via introductions but nothing really stuck for them or me. Moving to Nasik was a challenge even for those in India, but that was just a symptom of not finding the right person.</p>



<p>This would have been an amazing opportunity for the right person, but it wasn’t in the cards.</p>



<h5 id="option4"><strong>Option 4 — Run the business until a buyer can be found</strong></h5>



<p>Option 4 was ultimately the most practical. &nbsp;</p>



<p>The challenge, however, was that Dad’s business didn’t have too many natural buyers and was considered a small market transaction making it even tougher.</p>



<p>And so I didn’t have any control on the M&amp;A side of things. &nbsp;</p>



<p>I focused on running the business and hoped a suitable acquirer would show up. If nobody showed up, I’d keep running it.</p>



<p>I gave myself 3 years to run both Atlas and CB Insights, thinking I could maintain the daily schedule of 6am calls and evening emails with India interspersed, with trips every 6-8 weeks before burning out. 3 years was a completely arbitrary timeline.</p>



<p>About 6 months in, I realized doing both for that long really wasn’t sustainable for a number of reasons — health, family, and it wasn’t optimal for either CB Insights or Atlas.</p>



<p>But I didn’t know the buyer market and couldn’t control it so I focused on what I could control.</p>



<p>And that was running Atlas.</p>



<h3 id="running"><strong>Running a business you know nothing about</strong></h3>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18131259/running-atlas-1024x768.png?resize=1024%2C768&amp;ssl=1" alt="" data-recalc-dims="1"></figure>



<p>Despite Atlas being very different than CB Insights, the answer about how to run it came to me easier than a lot of the other questions I had over the last 13 months.</p>



<p>Or perhaps I just oversimplified it to make a decision quickly.</p>



<p>I decided that business is about growth or margin.</p>



<p>To grow, we could do 1 of 2 things:</p>



<ul>
<li>Sell more of our existing products — primarily Coumarin</li>



<li>Add new products</li>
</ul>



<p>If we focused on margin, that’d mean focusing on:</p>



<ul>
<li>Increasing efficiency in manufacturing</li>



<li>Reducing expenses</li>
</ul>



<p>I looked at the financials for Atlas vs peers in the industry and talked to some of my dad’s trusted advisors, and it was apparent that Atlas’ margins were best-in-industry.</p>



<p>Dad was the ultimate bootstrapper. &nbsp;</p>



<p>Atlas was efficient, and my dad obsessed about margins, foregoing business that was low margin to keep overall profit margins high.</p>



<p>It was clear that focusing on the margin side wasn’t the best place for my time or energy. &nbsp;</p>



<p>Plus, most of the efficiency to be gained was in the manufacturing process and that is where I was zero value-add. Dad was also the ultimate technical co-founder. I was as non-technical as they come in a chemical manufacturing setting. &nbsp;</p>



<p>Plus, margin is hard to rally the team around. &nbsp;</p>



<p>Growth is tangible.</p>



<p>And I needed to paint a picture that the team could see. Improving margin by XX basis points wasn’t going to be what got anyone fired up.</p>



<p>So I decided to focus on growth. Growth not via new products as that would also require Dad, the technical co-founder.</p>



<p>I focused on growth of Coumarin — the company’s primary product.</p>



<p>This was also the only way to run the company that I had a chance of being useful in.</p>



<p>And it was also the way I could show the Atlas team we were doing well. And that I might have some value beyond being the boss’ son.</p>



<p>Selling is something everyone sees, especially in a manufacturing setting. From the workers at the factory to the plant staff, if they see trucks coming in for product dispatches, they know the product they’re making is selling. If the staff in the office is busy generating invoices and fielding customer calls, they see the product is selling.</p>



<p>And while I’m by no means a natural at selling, if armed with the right product, I can sell. And Atlas’ Coumarin was the best in the world.</p>



<p>In the chemical industry, it’s unheard of to be a single product company for 30 years. But Atlas was able to do that because the product is hard to make, and they are the best at it.</p>



<p>So growth it was.</p>



<p>Note: It is worth noting that in a competitive chemical product, margins cannot be ignored. So while growth was the focus, I did focus on major expenses — raw materials, shipping, packaging. But this was only 5% of my time as the very capable team at Atlas managed these expertly.</p>



<h3 id="coldcalls"><strong>Growth the old-fashioned way — cold calling and cold emailing prospects and customers</strong></h3>



<p>So with growth being the focus, I went about assembling a list of people and firms in the industry I should reach out to.</p>



<p>I went through my dad’s emails to see who he’d interacted with and reached out to all of them.</p>



<p>I visited various fragrance and flavor association and conference websites and took down their member and attendee names and reached out to them.</p>



<p>It wasn’t a particularly structured process, but I wanted those that knew my dad to know that Atlas was still humming and they could rely on us for product.</p>



<p>And for those that didn’t know us, the next time they had a need, they knew they could reach out to us.</p>



<p>This was a lot of cold emailing and cold calling. I have heightened respect for what SDRs do at CB Insights or anywhere. It is hard work. But also incredibly rewarding when someone closes based on your efforts.</p>



<p>At the same time, I also focused on price. Dad had built a high margin business which afforded me the opportunity to try to gain market share by being more aggressive with price.</p>



<p>Coumarin is probably a 6,000 ton product per year. Atlas was about 10-12% of the global market, but we had capacity at the plant that wasn’t being used so I knew we could produce and sell more. There is some supply-demand curve, marginal cost calculation I could have done here, but I didn’t do any of that.</p>



<p>I did some back of the envelope math in my head and had worked out a simple, rudimentary cost per kg formula in Excel to ensure we were always making something on a sale, but I ran Atlas on instinct a lot more than analysis.</p>



<p>Atlas has a great team with lots of experience. I assumed if I was doing something really really dumb, they’d tell me 🙂</p>



<p>In the last financial year (April 2017-March 2018), Atlas had its best revenue in history. In November 2017, we dispatched 100 tons of Coumarin to customers for the first time in the company’s history.</p>



<p>I remember taking&nbsp;<em>mithai</em>&nbsp;(sweets) to the site at the end of November when the 100 ton month happened and celebrating with the team. It was one of the proudest days I’ve ever had professionally. I was incredibly proud of the Atlas team who had seen a potentially company-sinking event happen with my dad’s death in April and who’d kept fighting and doing good work and then just had a historic month.</p>



<p>So, things were going well with the company.</p>



<p>What about a buyer?</p>



<h3 id="buyers"><strong>The M&amp;A buyers show up</strong></h3>



<p>As soon as I took over the business, the calls started coming from interested buyers or their investment banks. &nbsp;</p>



<p>Dad had already been in discussions with 1 firm prior to his death, and I’d met them once with him. They re-engaged.</p>



<p>The flavor &amp; fragrance industry in India is big, but small at the same time.</p>



<p>Everyone learned about Dad’s passing pretty quickly.</p>



<p>As a result, various buyers expressed interest. I reached out to a couple of our large customers to feel them out.</p>



<p>By the end of July, I had a group of buyers identified. &nbsp;</p>



<p>I had done some basic research on the space so I understood the players and sounded at least reasonably smart. A report by investment bank Avendus on the flavor &amp; fragrance industry was useful for a novice like me. Atlas was a base ingredient manufacturer. Our likely buyers were either larger base ingredient manufacturers or functional ingredient manufacturers who were interested in vertical integration.</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18131954/potential-buyers.png?ssl=1" alt="" data-recalc-dims="1"></figure>



<p>There were 5 buyers that either came to us or that I’d identified and gotten some expression of interest from.</p>



<ul>
<li>Buyer 1 – A publicly traded Indian firm that also makes Coumarin at much smaller volumes</li>



<li>Buyer 2 – An Atlas client who was interested in potential vertical integration</li>



<li>Buyer 3 – A wealthy family looking to buy a business for their son returning from the US</li>



<li>Buyer 4 – A private-equity backed chemical company</li>



<li>Buyer 5 – A family-held chemical company that also manufactured Coumarin</li>
</ul>



<p>Most of these buyers did not get very far. &nbsp;</p>



<p>But I had conversations with all of them.</p>



<p>Before digging into how things went with each buyer, it is worth understanding that there were certain criteria I had for a deal which made eliminating certain buyers easy.</p>



<p>My 3 deal criteria were simple:</p>



<ul>
<li><strong>They had to take care of the team</strong>&nbsp;— I wanted to find a growth-oriented company as ensuring the team that had helped build Atlas would be taken care of was critical. &nbsp;The biggest factor in any decision was this as I viewed it as intertwined with my dad’s legacy. He spent 30 years building this company with this team. It was important that this be maintained and hopefully taken to the next level. There is, of course, no way to know this for sure and this is where one’s gut and how the buyer across the table makes you feel is important.</li>



<li><strong>Simple deal&nbsp;</strong>— I was not interested in stock in a private company or an illiquid public company or a long earn-out or some other complex structure. Atlas wouldn’t be a big deal for any credible buyer. Complexity wasn’t required. I also didn’t have time to educate a buyer on the space.</li>



<li><strong>A fair price</strong>&nbsp;— When the founder/face of a company dies (my dad), a bunch of bottom feeding parasites can show up. I wasn’t expecting to get a top of the market price for Atlas, but I wanted a fair one. Moreover, the longer I ran Atlas, the more confident I became in my ability to run it. So the price was only going to go up with time.</li>
</ul>



<p>So now let’s look at each potential buyer.</p>



<h5 id="buyer1"><strong>Buyer 1 — A publicly traded Indian firm that also makes Coumarin at much smaller volumes</strong></h5>



<p>I met with one of the execs of this firm along with their investment bank once. &nbsp;</p>



<p>I shared high-level data on Atlas with them but the conversation ended after that. They were saddled with lots of debt as I could see given they were public and so didn’t think a deal with them would meet the criteria I had on fair price, simplicity, or even ability to take care of the team.</p>



<p>Not a good fit.</p>



<p>One conversation and things were done.</p>



<h5 id="buyer2"><strong>Buyer 2 — An Atlas client who was interested in potential vertical integration</strong></h5>



<p>This was a client I’d reached out to.</p>



<p>They were interested in Atlas. We talked a bit and they proposed a deal, but the structure was complicated and so I let this one go. They are a long-standing client and we were far enough away from any deal that it didn’t make sense to engage further.</p>



<h5 id="buyer3"><strong>Buyer 3 — A wealthy family looking to buy a business for their son returning from the US</strong></h5>



<p>This was an introduction from one of my dad’s advisors. &nbsp;</p>



<p>They were a family with a large industrial business and were interested in expanding into new lines as their son was returning to India from the US. (I guess really wealthy people do things like this).</p>



<p>They were super smart and impressive.</p>



<p>The challenge here was that it’d require lots of education about the industry and the probability of success even after investing would be low.</p>



<p>This wasn’t time I had. &nbsp;</p>



<p>After a couple of conversations, it was clear this wasn’t a fit.</p>



<h5 id="buyer4"><strong>Buyer 4 — A private-equity backed chemical company</strong></h5>



<p>This was the firm my dad was already in discussions with. The firm had seen Atlas’ numbers and had actually given an offer to my dad prior to his death. They seemed the most promising at the outset given the diligence they’d already done.</p>



<p>So I met them in May before leaving India.</p>



<p>It was an interesting meeting.</p>



<p>For an hour, they told me all the reasons Atlas wasn’t a great business. I listened as I’m probably too deferential to those older than me than I should be.</p>



<p>And after listening for a while, I asked them, “You’ve told me all the reasons Atlas is such a bad company. So why do you want to acquire it?”</p>



<p>That seemed to reset the conversation a bit.</p>



<p>Ultimately, there wasn’t a fit. &nbsp;</p>



<p>Part of this may have been culture fit and part of this was likely ownership by PE which complicated decision-making on their side. It’s important to understand the decision-making criteria and process of a buyer when discussing M&amp;A.</p>



<p>The firm wanted to follow their process. &nbsp;</p>



<p>I told them that process didn’t work for Atlas or me or my family. And I told them that process was what we needed to run. When they said no, I wished them luck and moved on.</p>



<p>I was nervous doing this tbh. There wasn’t a huge list of buyers for Atlas and shutting one of them out seemed at times like it might be foolish. But you have to go with your gut on these things.</p>



<p>Life went on.</p>



<h5 id="buyer5"><strong>Buyer 5 — A family-held chemical company that also manufactured Coumarin</strong></h5>



<p>Buyer 5 reached out via the company’s investment banker. &nbsp;</p>



<p>I’d received lots of calls from bankers prior and I insisted they tell me who they were representing as many were just fishing.</p>



<p>Buyer 5’s banker revealed the company’s name.</p>



<p>I knew my dad had had conversations with them some years ago.</p>



<p>We met in July and there was immediately a better fit.</p>



<p>I explained my criteria, they explained their vision, they put a non-binding offer together that was clean/clear and we got moving on diligence.</p>



<p>The rest is history.</p>



<h3 id="sold"><strong>June 1st — Atlas is officially sold</strong></h3>



<p>On May 31st, I flew back to India. &nbsp;It was my 8th trip in the last 13 months.</p>



<p>I landed at 10pm. The offices of Avendus, the investment bank representing Eternis, the buyer, was the first destination.</p>



<p>I arrived at 11pm and we worked until 5am to hash out final details of the deal.</p>



<p>We went away for 4.5 hours to shower and get some sleep and resumed at Eternis’ office at 930am on June 1st. By 4pm that day, the deal was done.</p>



<p>At 5pm, I left Mumbai for the 4-hour drive to Nasik.</p>



<p>The news broke within the industry pretty quickly. During the 4-hour drive to Nasik, folks started calling and WhatsApp messaging me — customers, vendors, etc. &nbsp;</p>



<p>And so did the Atlas team.</p>



<p>I’d only disclosed the deal conversation to 4 people at Atlas prior.</p>



<p>I was hoping to tell the team on Saturday (6 day workweek at Atlas) in the office so I felt bad that some of them heard about the deal on Friday evening through others.</p>



<p>The next day, I went to the factory and members of the Eternis team came. Manu of the Eternis team addressed the office and factory staff and gave a great view into their goals and their company.</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18133625/discussion-1024x768.png?resize=1024%2C768&amp;ssl=1" alt="" data-recalc-dims="1"></figure>



<h3 id="farewell"><strong>The official farewell</strong></h3>



<p>On June 4th, we decided that our family would officially say farewell to the entire Atlas team at the factory. We had everyone from the office come up.</p>



<p>My mom, kids, and wife flew in from the States. I wanted my kids to see what their “Dada” (grandfather) had built at least 1 time before it moved onto the next chapter in its story.</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18134514/sold-1024x680.png?resize=1024%2C680&amp;ssl=1" alt="" data-recalc-dims="1"></figure>



<p>And we wanted to say thanks to everyone on the Atlas team. &nbsp;</p>



<p>I had prepared a speech in English and my wife translated it to Hindi. My Hindi is not very good so beyond the emotion of this farewell, I was pretty scared of delivering a several minute speech in Hindi. I’d never done something like that.</p>



<p>We assembled in the warehouse, and I stood on top of the chemical mixer and talked to the team. I fought back tears several times during my speech. My Hindi was intelligible enough that I had several others on the Atlas team also crying so I guess that my message was understood.</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18134628/farewell-1024x680.png?resize=1024%2C680&amp;ssl=1" alt="" data-recalc-dims="1"></figure>



<p>My speech in English is below. &nbsp;It was delivered in Hindi, and the video is something I hope to show my kids when they are old enough to understand.</p>



<p>Speech:</p>



<p><em>My Hindi is not very good so please forgive me if I make any mistakes.</em></p>



<p><em>Dad started Atlas 29 years ago. As my sisters and I were growing up, we joked that Atlas was his 4th child.</em></p>



<p><em>But in reality, Atlas was less of a 4th child than a 2nd family to Dad.</em></p>



<p><em>He loved working with you all. Whether it was increasing production or improving our Sali to Coumarin yield or solving technical challenges to figuring out how to keep Chinese Coumarin out of India to showing the plant to foreign visitors, there was nothing he liked more.</em></p>



<p><em>And together with Dad, you all built something very special. &nbsp;</em></p>



<p><em>Many of you have been with Dad for 20+ years. He and you grew up and built Atlas together.</em></p>



<p><em>And now, Atlas Coumarin is known globally for being the highest quality coumarin in the world. All the leading multinational companies like IFF, Givaudan, Firmenich rely on Atlas.</em></p>



<p><em>Within India, Atlas Coumarin has more than 50% of the market.</em></p>



<p><em>And now, there are a group of new products such as 6-methyl coumarin, safranal, and cyclocitral which can make Atlas even bigger.</em></p>



<p><em>Of course, as you all know, Dad passed away last April and since then, I’ve been managing what you and he built and it’s been a privilege to do so.</em></p>



<p><em>Thank you for everything.</em></p>



<p><em>I’ve never worked with a group as smart, talented, hardworking, and kind as you all.</em></p>



<p><em>Although I didn’t know much about the business, you all helped me understand things and were patient and understanding throughout. I knew I’d never be able to be 10% as good as Dad but you never made me feel that way and for this, thank you.</em></p>



<p><em>And in the last 13 months, we did a lot of good things. In November, we had Atlas’ first ever month where we dispatched 100 tons. I remember coming to the site that day and distributing mitthai and feeling so proud to be part of this team. On the way back to Nasik that day, I remember crying and thinking about how proud Dad would have been of this team for achieving this milestone.</em></p>



<p><em>So, again, let me say thank you from me and my family for all of the outstanding work you do and the professionalism and kindness with which you do it.</em></p>



<p><em>And now, we’re moving to the next chapter of Atlas.&nbsp;</em></p>



<p><em>As most of you know, Atlas has been purchased by Eternis, a larger chemical company in the fragrance and flavor space. &nbsp;</em></p>



<p><em>There was a lot of interest in Atlas after Dad died. I didn’t like any of those companies except Eternis.</em></p>



<p><em>Eternis is family-owned and their personality and nature is similar to Atlas — humble and hardworking. And they are very focused on growth. Their goal is to take 50-60% of global market share for Coumarin.</em></p>



<p><em>This means more opportunities and growth for Atlas which I’m excited to see.</em></p>



<p><em>With their resources, Atlas can grow to new levels. I also expect that the Atlas team can and will teach them many things from how to improve their yields to their quality to the special style of Atlas jugaad that makes this such a special company.</em></p>



<p><em>My family and I are very excited to see where you all and the Eternis team take Atlas and we hope to visit in the future to see how much the plant expands and how big the team gets.</em></p>



<p><em>And finally, let me say that I’ve been overjoyed to see the impact that Atlas has had on education in some of your families. Dad always thought education was very important. He started a woman’s college in Rajasthan for this reason. He grew up in small village to a family of farmers. And education and hard work was how he achieved so much.</em></p>



<p><em>And as I’ve gotten to know many of you who have been with Dad for 20+ years, I’ve learned that many of you have sent, for the first time, your sons and your daughters on to become doctors, engineers, chartered accountants, and more.</em></p>



<p><em>I think this will be one of Atlas’ most lasting impacts on the community. And I know beyond Atlas, my dad was very proud of this given how important education was to him.</em></p>



<p><em>I hope that you’ll continue to push your sons and daughters forward in education so that one day, they’ll build the next Atlas.</em></p>



<p><em>Again, thank you for teaching me so much about business, India, and what a great team looks like over the last 13 months.</em></p>



<p><em>I could not be more excited to see what you accomplish in the future and I know Dad is looking down on us today and smiling knowing that Atlas is going to become even bigger in the years to come.</em></p>



<p><em>Thank you.</em></p>



<h3 id="CBimpact"><strong>What was the impact on CB Insights?</strong></h3>



<p>It’s a bit unknowable to assess exactly the impact the last 13 months had on CB Insights. We are a big enough company that the show goes on, but we are still not so big that everything is all figured out (not sure that ever happens).</p>



<p>The team continued to kick ass and we had a great year in 2017 growing revenue nearly 100% YoY again. &nbsp;</p>



<p>But the CBI of April 2017 was 114 people. &nbsp;</p>



<p>In the last 13 months, it climbed to over 200. &nbsp;</p>



<p>And so we are a different company.</p>



<p>So I’ll focus on the things that I know I didn’t do well over the last 13 months which may have had some impact, big or small, on CB Insights.</p>



<p><strong>Building relationships with the team</strong>&nbsp;— With our growth, I no longer know every person in the company (inevitable at some point). In the last year, I didn’t get a chance to build relationships with those new teammates. I also didn’t get a chance to grow existing relationships within the team.</p>



<p><strong>I missed lots of meetings and one-on-ones</strong>&nbsp;— Morning meetings with India or due diligence requests that required immediate attention caused me to miss lots of meetings or reschedule 1:1s. This was bad. I didn’t have my finger on what was going on as I always had before or know about challenges they were facing. I wasn’t providing enough feedback, direction, etc as a result.</p>



<p><strong>Internal communication suffered</strong>&nbsp;— Growing to 200 requires we change how we communicate with the team broadly and intra-team. Our methods here didn’t evolve over the last 13 months as much as we probably needed them to. It will be something we figure out now, but we are playing a bit of catch up.</p>



<p><strong>Physically there but not mentally there</strong>&nbsp;— My attention in conversations wasn’t where it always needed to be either due to being tired or just focused on something else — either CBI- or Atlas-related.</p>



<p><strong>Overly fast decisions</strong>&nbsp;— In the last 13 months, I valued expediency of decision-making more than I typically do. And while I will always believe that speed is a weapon that an insurgent company like CB Insights has on its side, decision-making esp as we scale must be well-considered and communicated. Time was always in short supply and so at times, I got into a mindset of let’s decide quickly without considering impacts to the org or teams or individuals.</p>



<p><strong>Didn’t create &amp; communicate strategic vision/product roadmap of CBI internally</strong>&nbsp;— When you’re a smaller company, everyone kind of knows the plan, the vision, even if via osmosis. Also, when you’re smaller and the numbers aren’t as big and the growth expectations are more modest, you can just get to where you need to be by outworking everyone. But as you scale up, hard work is necessary but not sufficient. We need to be more deliberate about the markets we’re attacking, the products we’re building, how we’re going to get there, etc, and we need to communicate and re-communicate that. This didn’t happen as it should have.</p>



<p><strong>Didn’t talk to enough clients</strong>&nbsp;— I’d set a goal of 150 client conversations in 2017 (3 per week) and failed on that goal. We were revenue-funded for most of our lives and I continue to believe our understanding of client needs is one of our most secret weapons. And that requires talking to clients regularly about what they dislike about the product, about their workflow, about their ideas, about their problems, etc. I am thankful we have a customer success team that does a great job of gathering this type of feedback. But this is something I am looking forward to getting back to.</p>



<p>Now that I’m back to 200% CBI, I hope to rectify the above. &nbsp;</p>



<p>Finally, I am thankful to be part of this team. Despite my shortcomings over this last year+, they’ve been patient, kind, and understanding. When my dad passed, many on the team who’d dealt with similar loss reached out with words of wisdom, offers to chat, and support. Special thanks to Jon, my co-founder, for picking up the slack.</p>



<h3 id="differences"><strong>The differences between CB Insights and Atlas</strong></h3>



<p>While it might seem obvious that a technology company and a manufacturing chemicals company would be different, I didn’t appreciate the difference fully until now.</p>



<p>Of course, being thrown into an industry I knew nothing about increased the perceptions of these differences. I imagine someone who grew up in chemicals or manufacturing would find software equally different or challenging.</p>



<p>From my perspective, here are a few key differences between the two that I observed.</p>



<p><strong>Atlas was much more complex</strong>&nbsp;— With China cracking down on pollution, what might that mean for competitors? What is the impact on pricing if a raw material supplier’s plant has shut down? Should we buy more raw material as we think there might be a disruption in the future? If the rupee is getting weaker, what does that mean for our margins? The supply chain considerations alone made it much more complex and there were a lot more exogenous/industry factors that had to be considered than at CB Insights.</p>



<p><strong>Competing on price is hard</strong>&nbsp;— Atlas Coumarin is the highest quality in the world, but there are others that make coumarin. And so while some customers pay for that quality, for many, it came down to price. This was a big change from CB Insights where there is no clear substitute for the product or its human analysts which are way way more expensive. In the case of CBI, it’s all about showing a customer or prospective customer the value that the platform can provide and explaining that our pricing reflects that value. That is not possible at Atlas.</p>



<p><strong>Regulatory requirements</strong>&nbsp;— This makes sense given we’re talking about chemicals and a chemical plant. But coming from software where you can run your business without really having to ask any third-parties for permission, this was an observable difference.</p>



<p><strong>Long-term product development &amp; planning is a different animal</strong>&nbsp;— Having a plan is important in any business. But in chemicals, adding a new product or expanding an existing product is a multi-month or multi-year process. In the last 6 months, the CB Insights team has rolled out patent analytics, market sizings, public company data, new profiles, market map maker and a ton of product capabilities that immediately help our customers and ultimately our top and bottom lines. This ability to stay close to customers and build product quickly for them and see it move the needle is one of the best parts of software. It is much harder (near impossible) to do this quickly in manufacturing.</p>



<p><strong>Touching the product makes it different&nbsp;</strong>— At CB Insights, we deliver data to customers. At Atlas, we deliver drums to customers. There is something unique and gratifying about making a tangible product which was new to me. Turning a bunch of raw materials into a finished product and watching them move from step-to-step in the production process is fun to see. Touching the product in the warehouse before it is dispatched to a customer is different. I’m not sure why or how, but it is. When I saw coumarin coming out of the dryer or the mixer and being packaged, it always made me smile. I remember when we started CB Insights, my dad would ask “What exactly are people buying?” And I’d explain SaaS and subscriptions, and he got it. But he’d also say “I like making stuff.” I didn’t understand it at the time, but I do now.</p>



<p><strong>The power of business</strong>&nbsp;— I’ve always thought business done right can have a massive impact on society, economies, etc. But with all the recent blather of technology companies changing the world, I’ve become a bit more jaded of late on the impact of business given folks are so quick and cavalier in how they define changing the world. Atlas reaffirmed for me the power of and the good that businesses can do in a community if it’s there long enough. There are several people on the Atlas team whose children have gone on to get degrees and become computer engineers, chartered accountants (equivalent to a CPA), and doctors. Some were the first in their family to do so. This is the type of impact that compounds over time and something that was exciting to see and hear about firsthand.</p>



<h3 id="ma"><strong>Thoughts on M&amp;A</strong></h3>



<p>I don’t have a basis of comparison as this was the first company I’ve ever sold, but here’s some of my observations/learnings on the M&amp;A process for those who may go through it.</p>



<p><strong>Should I have hired an investment bank?</strong>&nbsp;I didn’t have a bank representing me, i.e. I represented myself. Maybe I should have. I had access to data (thanks CB Insights) so knew valuation and transaction multiples. The bankers for the buyer served a project management function so I’m not sure if having bankers on my side would have helped on that front. Bankers might have helped negotiate a bit more, but given this was a small cap deal in India, the few bankers I met who deal in this range of the market were generally not of the caliber that I thought they’d add a ton of value. No clear answer here.</p>



<p><strong>Don’t let lawyers run the process</strong>&nbsp;— Lawyers, as they should be, are often about risk mitigation for both sides. But it’s important the parties in the deal be clear on what is valuable to them or understand how big the risks really are so that neither side gets bogged down in details or risks which are unimportant or have a low probability of happening. I think both sides did a pretty good job here in our deal, but it’s something to watch out for as letting the lawyers run the process costs you time and more lawyer fees.</p>



<p><strong>Know your goals. Communicate your goals</strong>&nbsp;— One of the things that worked well in this process was stating my goals to buyers upfront, i.e. the aforementioned deal criteria around taking care of the team, a simple deal and a fair price. It helped quickly determine if there was a potential fit with a buyer and also because I was dealing with people in the industry who we might work with in the future, it removed ambiguity and any sense of arbitrariness from our decisions. If someone started talking about private company stock or raising debt or doing dividend recap, I simply reminded them of the simplicity tenet.</p>



<p><strong>Don’t sweat the small stuff</strong>&nbsp;— The aforementioned decision-making framework/deal criteria also were very helpful in providing focus for me. If it wasn’t related to those 3 criteria, I tried to avoid worrying about it. This also prevented me from overcomplicating things at times which was incredibly helpful.</p>



<p><strong>“That’s industry standard”</strong>&nbsp;— This is one of the phrases to watch out for in negotiation. When a term cannot be defended on its merits, often the catch-all is “that’s standard in deals” or “that’s industry standard” is often trotted out by lawyers and bankers. That’s BS. Everything is negotiable, and just because others have gone with some nebulous standard doesn’t mean you have to. Again, that doesn’t mean negotiate for sport on every little thing, but it does mean that things should be supported with logic and reason and not the intellectually lazy “just because.”</p>



<p><strong>Conditions Precedent (CPs)</strong>&nbsp;— These are the conditions that have to be satisfied prior to a deal being closed— after the purchase agreement is executed but before it is closed, i.e., the money hitting the bank account. Pay attention to what is in the CPs and ensure you understand them, that they’re all meaningful, and that they can be achieved.</p>



<p><strong>Don’t do zero-sum negotiation</strong>&nbsp;— I believe both parties felt good about this deal and that was because the negotiations were generally solutions-focused. There wasn’t a zero sum mentality of “For me to win, you must lose.” I found this to be constructive throughout and made the general process more pleasant. Note: I wouldn’t describe the M&amp;A process as fun, but I do think minimizing acrimony is good. We mostly avoided that.</p>



<h3 id="india"><strong>Thoughts On India</strong></h3>



<p>India is an amazing place.</p>



<p>India is a complicated place.</p>



<p>Here are some simple, non-ground breaking thoughts.</p>



<p><strong>Regulatory overhead is still steep</strong>&nbsp;— India’s regulatory overhead is mostly well-intentioned but ill-defined. There are so many licenses and permits required but even experts in the industry can’t agree on what is what and what is required. Websites, especially regional ones, are not updated or clear.</p>



<p>The World Bank ease of doing business rankings are below. India jumped 30 spots so things are clearly getting better, but there is still a lot of work to do. Overall, I’d say I found things at the national or federal level much better defined than at the regional level.</p>



<p>This uncertainty creates angst for businesses as you never really know if you’re compliant with all the rules. It makes an M&amp;A process much more difficult needlessly. Checklists here would be amazing.</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18140018/ease-of-business.png?ssl=1" alt="" data-recalc-dims="1"></figure>



<p><strong>Women in the workforce are going to be a game changer</strong>&nbsp;— 2 of the 4 key management personnel at Atlas were women. Atlas is what it is because of their contributions, and this transaction wouldn’t have occurred without their steady hand. I’m impressed with my dad’s foresight here, especially in a city like Nasik, which is not as cosmopolitan as the big cities.</p>



<p>But throughout the process, whether it was at Atlas, or our lawyers or our bank or various other parties related to the deal, I found the women I worked with to be among the most responsive, smart, and able to get isht done. India remains a very patriarchal society but change is steadily coming here which will unlock an immense amount of talent.</p>



<p><strong>There are lots of middlemen</strong>&nbsp;— In B2B, there are lots of consultants and brokers in India involved in everything from regulatory approval to pricing of materials to selling of scrap metal. Technology has been shown to be good at disintermediating middlemen. I think there is a lot of opportunity to use technology to do this in India. I’ve noted a bunch of ideas down for the future.</p>



<p><strong>Traffic is soul crushing&nbsp;</strong>— Mumbai traffic is an absolute horror. Everyone there seems to have become used to it with 1.5- to 2-hour commute times each way becoming normal. With smartphones and technology, one can still be somewhat productive, but the amount of personal productivity lost here on a daily basis is unfathomable. And this will only get worse. I’d imagine that a progressive employer who figures out a remote work strategy might be able to recruit and retain really great talent.</p>



<p><strong>There is so much opportunity</strong>&nbsp;— India is messy and complicated and the traffic is ridiculous and there is a whole litany of “things wrong with India,” but there is so much good there. As an Indian-American, I often focused on all that was wrong with India before (viewing everything from an American lens on how things should be). Managing Atlas for 13 months made me see this and also revealed the immense opportunities there in business, in education, and more. I’m excited to explore those in the future.</p>



<h3 id="tech"><strong>Thoughts on Technology &amp; Data</strong></h3>



<p>It’s worth mentioning the impact of technology &amp; data on me in the last 13 months.</p>



<p>I could not have done this deal or managed Atlas without technology. Here are some of the technologies that made my life easier.</p>



<p><strong>Google</strong>&nbsp;— Dammit. Google is amazing. When researching some esoteric Indian regulation or trying to find flavor &amp; fragrance companies who might be customers, Google was my go-to. Google Sheets was also powerful for collaborating with the team.</p>



<p><strong>WhatsApp</strong>&nbsp;— India runs on WhatsApp. Also, the calling feature saved me tons of money when I had to call India from the US or vice-versa.</p>



<p><strong>Dropbox</strong>&nbsp;— The Atlas team and I used this to organize documents before sharing it in the deal room.</p>



<p><strong>SecureDocs</strong>&nbsp;— This was the deal room software I used. The software just works. And their team was incredibly responsive. The sales folks weren’t pushy and were helpful. And the pricing was transparent and reasonable. Big fan.</p>



<p><strong>YesWare</strong>&nbsp;— To send mail merges, absolutely critical.</p>



<p><strong>Data&nbsp;</strong>— Going in without a banker to these conversations could have been intimidating but I had data so I knew deals, valuations, etc. It was good to be a customer of CB Insights for a bit.</p>



<h3 id="thanks"><strong>Thank you’s</strong></h3>



<p>There are a ton of people to thank for all they did. Here goes. I apologize if I forgot someone.</p>



<p><strong>Family</strong>&nbsp;— First, my mom for her strength and for trusting me. She is the unheralded co-founder of Atlas. My wife who has been managing a career and 2 kids almost solo for the last 13 months and who would listen without judgment to me when I was frustrated or overwhelmed. My kids who got used to me being on the phone every morning talking to India instead of having breakfast with them.</p>



<p><strong>The Atlas team&nbsp;</strong>— As I said above, although I’m 10% as smart as my dad, you never made me feel this. Even after his death, Atlas kept humming because of your work. Many of you worked with Dad for 20+ years. It was good to work with you all directly to see firsthand how special of a company it is. Thanks especially to Mrs. Lakhpatwalla, Priti, and Nathe for all their help on this deal. Thanks as well to Abhay for constantly selling and talking to customers and to Kiran for driving so expertly throughout India and never once getting into an accident (driving in India is intense for those unfamiliar). Thanks to Mehetre and his leadership in the factory as well as to Jadhav, Nitin, and Anand in the plant. We have a group of veterans and young new stars that I’m excited about on the production side. Thank you to Pareshbhai for his friendship and steady advice on accounting and finance matters.</p>



<p><strong>The CB Insights team</strong>&nbsp;— This is a special company with an amazing team who continued to kick ass despite the impacts of my sometimes mental and physical absence. &nbsp;</p>



<p><strong>CB Insights newsletter readers</strong>&nbsp;— Since my dad’s death, the only constant has been the CBI newsletter. I didn’t miss a day since he died (although I’d queued up several prior so I was not writing them real-time for a while). Your pie charts, funny commentary, and even the haterade have always been a nice break.</p>



<p><strong>The deal players</strong>&nbsp;— M&amp;A deals are a good amount of work and given the stakes and long hours can probably bring out the worst in folks at times. I can say I left the negotiation/experience with great impressions of everyone involved. Thanks to Manu and the Eternis team (Chetan, Ram, Rahul) for always being true to their word and a class-act. Thanks to the Avendus team, who although representing Eternis, were always solutions-focused and fair. Thanks to the Majmudar team (Kritika, Amrit, and Sinjani) for their work and counsel as our lawyers. Thanks to Geeta of Kotak Bank for always figuring out a way to get things done even at the very last minute.</p>



<p>Finally, thanks to everyone for putting up with me always being tired.</p>



<figure><img decoding="async" src="https://i0.wp.com/research-assets.cbinsights.com/2018/06/18140649/AIMS-newspaper-668x1024.png?resize=668%2C1024&amp;ssl=1" alt="" data-recalc-dims="1"></figure>











<h2><a href="https://www.cbinsights.com/research/payments-market-momentum-2024/"></a></h2>



<h2><a href="https://www.cbinsights.com/research/nvidia-strategy-map-partnerships-investments-acquisitions/"></a></h2>



<h2><a href="https://www.cbinsights.com/research/report/big-tech-healthcare-amazon-google-microsoft-nvidia/"></a></h2>











<h4>YOU MIGHT ALSO LIKE:</h4>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: I made tool that let's you see everything about any website (199 pts)]]></title>
            <link>https://v1.web-check.xyz/</link>
            <guid>40757951</guid>
            <pubDate>Sat, 22 Jun 2024 10:43:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://v1.web-check.xyz/">https://v1.web-check.xyz/</a>, See on <a href="https://news.ycombinator.com/item?id=40757951">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Own Constant Folder in C/C++ (152 pts)]]></title>
            <link>https://www.neilhenning.dev/posts/yourownconstantfolder/</link>
            <guid>40757787</guid>
            <pubDate>Sat, 22 Jun 2024 10:07:05 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.neilhenning.dev/posts/yourownconstantfolder/">https://www.neilhenning.dev/posts/yourownconstantfolder/</a>, See on <a href="https://news.ycombinator.com/item?id=40757787">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p>I was talking with someone today that really really wanted the <code>sqrtps</code> to be used in some code they were writing. And because of a quirk with clang (still there as of clang 18.1.0), if you happened to use <code>-ffast-math</code> clang would butcher the use of the intrinsic. So for the code:</p>
<pre tabindex="0"><code>__m128 test(const __m128 vec)
{
    return _mm_sqrt_ps(vec);
}
</code></pre><p>Clang would compile it correctly without fast-math:</p>
<pre tabindex="0"><code>test:                                   # @test
        sqrtps  xmm0, xmm0
        ret
</code></pre><p>And create this monstrosity with <code>-ffast-math</code>:</p>
<pre tabindex="0"><code>.LCPI0_0:
        .long   0xbf000000                      # float -0.5
        .long   0xbf000000                      # float -0.5
        .long   0xbf000000                      # float -0.5
        .long   0xbf000000                      # float -0.5
.LCPI0_1:
        .long   0xc0400000                      # float -3
        .long   0xc0400000                      # float -3
        .long   0xc0400000                      # float -3
        .long   0xc0400000                      # float -3
test:
        rsqrtps xmm1, xmm0
        movaps  xmm2, xmm0
        mulps   xmm2, xmm1
        movaps  xmm3, xmmword ptr [rip + .LCPI0_0] # xmm3 = [-5.0E-1,-5.0E-1,-5.0E-1,-5.0E-1]
        mulps   xmm3, xmm2
        mulps   xmm2, xmm1
        addps   xmm2, xmmword ptr [rip + .LCPI0_1]
        mulps   xmm2, xmm3
        xorps   xmm1, xmm1
        cmpneqps        xmm0, xmm1
        andps   xmm0, xmm2
        ret
</code></pre><p>The optimization flow here in LLVM is:</p>
<ul>
<li>That under fast-math conditions, <code>sqrt(x)</code> == <code>x * rsqrt(x)</code>, so it uses <code>rsqrtps</code> instead.</li>
<li>But that has precision issues between Intel and AMD due to a high ULP tolerance for the <code>rsqrtps</code> instruction.</li>
<li>So LLVM does two newton-raphson iterations anytime it calls <code>rsqrtps</code> to correct the precision between the CPU implementations.</li>
</ul>
<p>The ‘fix’ here is just to use inline assembly to guarantee you’ll get the instruction selection you want always:</p>
<pre tabindex="0"><code>__m128 test(__m128 vec)
{
    __asm__ ("sqrtps %1, %0" : "=x"(vec) : "x"(vec));
    return vec;
}
</code></pre><p>But there is one additional thing I’d advocate you do if you need to use inline assembly - write your own constant folding.</p>
<p>See the one downside to the inline assembly above is that if <code>test</code> is inlined and <code>vec</code> was a constant, it wouldn’t constant fold it. For example:</p>
<pre tabindex="0"><code>__attribute__((always_inline)) __m128 test(__m128 vec)
{
    __asm__ ("sqrtps %1, %0" : "=x"(vec) : "x"(vec));
    return vec;
}

__m128 call_test()
{
    return test(_mm_setr_ps(1.f, 2.f, 3.f, 4.f));
}
</code></pre><p>Will produce:</p>
<pre tabindex="0"><code>test:
        sqrtps  xmm0, xmm0
        ret
.LCPI1_0:
        .long   0x3f800000                      # float 1
        .long   0x40000000                      # float 2
        .long   0x40400000                      # float 3
        .long   0x40800000                      # float 4
call_test:
        movaps  xmm0, xmmword ptr [rip + .LCPI1_0] # xmm0 = [1.0E+0,2.0E+0,3.0E+0,4.0E+0]
        sqrtps  xmm0, xmm0
        ret
</code></pre><p>So that even under inlining, when we could have constant folded it away entirely, we are still calling <code>sqrtps</code> when we don’t have to. So what is the fix?</p>
<p>LLVM has an intrinsic <code>is_constant</code> which can be got at via the Clang-supported GCC extension <code>__builtin_constant_p</code>. If we extend our <code>test</code> above to check when <code>vec</code> is constant, we can call <code>_mm_sqrt_ps</code> when it is constant, and benefit from the constant folder doing its thing and removing the call entirely. So our code becomes:</p>
<pre tabindex="0"><code>__attribute__((always_inline)) __m128 test(__m128 vec)
{
    if (__builtin_constant_p(vec))
    {
        return _mm_sqrt_ps(vec);
    }

    __asm__ ("sqrtps %1, %0" : "=x"(vec) : "x"(vec));
    return vec;
}

__m128 call_test()
{
    return test(_mm_setr_ps(1.f, 2.f, 3.f, 4.f));
}
</code></pre><p>And we get:</p>
<pre tabindex="0"><code>call_test:
        movaps  xmm0, xmmword ptr [rip + .LCPI11_0] # xmm0 = [1.0E+0,2.0E+0,3.0E+0,4.0E+0]
        sqrtps  xmm0, xmm0
        ret
</code></pre><p>What the heck?! It hasn’t constant folded! Turns out GCC is a bit picky with this builtin, and it looks like LLVM has inherited that funky behaviour. You cannot use it with a vector - even though LLVM happily has the support in the IR for it. But there is a workaround, an ugly one:</p>
<pre tabindex="0"><code>__attribute__((always_inline)) __m128 test(__m128 vec)
{
    if (__builtin_constant_p(vec[0]) &amp;&amp;
      __builtin_constant_p(vec[1]) &amp;&amp;
      __builtin_constant_p(vec[2]) &amp;&amp;
      __builtin_constant_p(vec[3]))
    {
        return _mm_sqrt_ps(vec);
    }

    __asm__ ("sqrtps %1, %0" : "=x"(vec) : "x"(vec));
    return vec;
}

__m128 call_test()
{
    return test(_mm_setr_ps(1.f, 2.f, 3.f, 4.f));
}
</code></pre><p>Will produce:</p>
<pre tabindex="0"><code>.LCPI15_0:
        .long   0x3f800000                      # float 1
        .long   0x3fb504f3                      # float 1.41421354
        .long   0x3fddb3d7                      # float 1.73205078
        .long   0x40000000                      # float 2
call_test:
        movaps  xmm0, xmmword ptr [rip + .LCPI15_0] # xmm0 = [1.0E+0,1.41421354E+0,1.73205078E+0,2.0E+0]
        ret
</code></pre><p>Nice! We’ve got the constant folding we want. And also nicely, if we mark <code>test</code> as <code>noinline</code> instead, the code for <code>test</code> is:</p>
<pre tabindex="0"><code>test:
        sqrtps  xmm0, xmm0
        ret
</code></pre><p>Meaning the branch is folded away. In both cases we now get the behaviour we want. We’ve wrote our own constant folder. Nice! You can see the full example on <a href="https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAMzwBtMA7AQwFtMQByARg9KtQYEAysib0QXACx8BBAKoBnTAAUAHpwAMvAFYTStJg1AB9U8lJL6yAngGVG6AMKpaAVxYMQkgMykHAGTwGTAA5dwAjTGIQAE4NUgAHVAVCWwZnNw8vXySUmwFA4LCWSOi4i0wrfIYhAiZiAgz3Tx8KqrTa%2BoJC0Iio2PiFOoamrNahrp7i0oGASgtUV2Jkdg4AUgAmbyDkNywAajXvR1UWFiCCYiCAOgQj7DWNAEFHp4B6N/2AFQRMfZI8MAgmJ9mgsNdXqYmARLnhwq4CJhTFAGKggrQgphZrN9qYWFwNgAOfbhJjoYyo9GYiB4gnEgBumGQs1eawA7AAhV77Hn7YiYAhLBi4s7GBQARwaxgSCggjOZRy5z3ZABFWc9aUTQWJaMZSeTKQwMcEICzlZzubz%2BYLiML9RS0UbqcZRUpLtLZVxrlRSPsNt7fd4A/tJN7sYrWWy1cqNcZobD4YjkRAxAB3JgATwUxipwWxuJddJJZLjtHTWZzTpNmoZTLNLwtz15fIFQpFLDFkoIHrldYj5ujL1j%2BK1olouvtacz2dzmFNkaVT2b1rbk7L08rxrnLo7buIPa9Pr9waDR9DVHD3kXqvV70%2BPz%2BNFUmHQoIwmAhsfjV0TSOMKMdLd8xrfYnwdWcaULLV5XrdlF2bKEFA7Yx9ggTYNglBoZUODYAFYuF9TZcI0dD9hAHCNiOFVVHQ3tmTIiiaI2DY6MveCrVbW19nlfsG0HSEoOJMddTAw0t3nc12J5FcuNEwDnVdAV9xlCBD19f0j1PX1zzYyN%2BK/GEfwRP8oCnCtZ2AwTQLwVRS3LGcq23KyYIXS0eUQ5DUPQzCCGwoiCJw4jSPI9CqKYliYIY9DwtYlkrzclsbWFHj4oHW8QOE4wwLMhzxNgxslw4pLrNsnLNwU3clIPYMNMDYMdLi68o1vV4Pm%2BX4SWIVAAGtGDfcEBO/OFjOTMTMUskdiXCLreoYcDHMgybuL7SSErwKhUNMeE6BsOa0AYCZBGlWKErghLl044Ud07KUVJc1LCp5G8Y0egsmCQ0wvOYny/LwgKiJI5iouYsLaMikLmJimDGoSmTkqZXjnqHJ4Mp1PUZsYea8tcpsitXDG5rG6tFPdFS1OPTT6rDGG0peqFDOGpN/xTddzMciai2mnrMbKiCQJc1bcZ5dbNr1VwdqCYx9sO7sEhOoXDgK5sLuK66fJ7e6pMV/TXo8z60O%2Brtfvwwi8MBjZgco7xqLButLahusadeuHluQRHmrpqzMq52a7I3CD8q1l2fZ51ncoqsUqrJmqTypi8naR282ofElMCGfqP0Ghnf1G%2BS8xxEDIiGLHnWclaGy1kXIO22hdqlgQZeOnjcI5EjcJVHFNgANm7gsa7r6W6iOuXm45Lg1nbzuNh76e%2B/F2vJcHwxZboieOUoyecJnru54lvaG6HlfR%2B8CeO/rZszoVlW2zVrsNb7B6L495GELjD6UINjCjYUQL/rN4KKKg2Yqxe2ttmRO2vlxFKTUdao3HHqNO3YiZzkDrDS6qdi7IJpCTZSnoY6UzPNTd2sC4zZxGszXm7MC5WSLt2Sh4l%2Bbl0vq9KuW154DwPsvJuCMW5tw7lvXubC971wOofbhbsW7j03t3QRYthFL2HqvFuG9%2BEyNnkIhe%2B9RFcJHjwjkJ9J7n15Mw5WeMuK31urKTWp1n4JT1h/by39f6myCkDCGVsbbAPBoxMBukFYu2gXpdKXs0a0L9mzbGgtnboLCfQiOe5qpHlqvsLSIYiEPSRhweYtBOC4V4J4DgWhSCoE4I4fYChFjLD%2BJsbwPBSAEE0Fk%2BY3UQDEX0JwSQ%2BTGnFM4LwBQIB4gNMKVk0gcBYAwEQCgVALAEh0CiOQSgaAZlzOiMgXYhhgBcEJFweINBa5RH6RAcI3TwjAmIBmTgdTTnMHOQAeXCNoJkQy6lLLYIIW5RoLnDNIFgeEwBHA6n6dwXgWAWAbPEN8/A/JrB4EZECopmBnzIGMpc3gFxKjdIxNNeoGZnBYG6bCFgqL5hUAMMABQAA1PAmBUy3ISIwVFMhBAiDEOwKQTL5BKDUN03QBEDBGBAKYKW%2Bg4T9MgPMVACRqhAoALS3O8LwVAjJiBXCwGK00bQnlpHsAwJwLhmgSA2H4XVUw%2BhlHiLkVIAhRieAJIkZIVqGCmpKP0colgtUCE6CMfVWQ7XuphZ64Y3RMTTFdYMINNrDUWCDc6mYcR5gVKWCsCQ2TcldO%2BSUjg%2BxVCEi7jKrukhQT8uAPsLZ1wvQaFQrgQgJAcK1NmLwIZWhsSkBad4IM7bO1du7V3dpHBOmkCJW0gpRTM19IGfUxp8wxmTKWbM%2BgZAKAQDnSslA6yjBbJ2XwHaBzKDHO%2BdcnFjLD13IeU8xlrzGAEA%2BbQL5RTfmuH%2BYCxloLwWrHvXgaFNg4XdMRUyFFwLyCCAxd8rFxAcV4vfY2q4RLgUkrJZS6ltL6UFLqfwZlY42XSHQ5ylQ6hvm6F8MWwVZgRXhHVRKqVaRZVUCoO9AgMqwUEAQPsOVCrinKtVWneACbKges8BABwka7UBBDWaiQXACKWuqMJ%2B1eQ0ixv6DsmImqA01AjT621Rr/XVC9cGoo4nJMEQmN6zItro2TDEy66IymE2VOTVwVNHA8mkBHYqzg2bc35sLeuktZaK1VvwEQYgdbHONqnfMX4ZJ%2Bgapyf23gQ74huZ6RwcdgyIuttafEOL7HktjsncMltcWNjptHb0grzb5jKpSHYSQQA">godbolt</a>.</p>
<p>It’d be nice if we could just use the vector in <code>__builtin_constant_p</code>, but I think the LLVM folks have purposefully tried to match what GCC would do. I’d personally advocate for a loosening of the builtin, and I might file a GitHub issue about just that.</p>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Language is primarily a tool for communication rather than thought [pdf] (375 pts)]]></title>
            <link>https://gwern.net/doc/psychology/linguistics/2024-fedorenko.pdf</link>
            <guid>40756176</guid>
            <pubDate>Sat, 22 Jun 2024 04:04:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://gwern.net/doc/psychology/linguistics/2024-fedorenko.pdf">https://gwern.net/doc/psychology/linguistics/2024-fedorenko.pdf</a>, See on <a href="https://news.ycombinator.com/item?id=40756176">Hacker News</a></p>
&lt;Not HTML&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Farm: Fast vite compatible build tool written in Rust (220 pts)]]></title>
            <link>https://www.farmfe.org/</link>
            <guid>40756034</guid>
            <pubDate>Sat, 22 Jun 2024 03:34:39 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.farmfe.org/">https://www.farmfe.org/</a>, See on <a href="https://news.ycombinator.com/item?id=40756034">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="__docusaurus_skipToContent_fallback"><main><div><div><p><img src="https://www.farmfe.org/assets/images/rocket-84b12b0b9c2fedde390e122d2563ecbc.png" role="img"></p><p><img src="https://www.farmfe.org/assets/images/rocket-84b12b0b9c2fedde390e122d2563ecbc.png" role="img"></p><div><h3>Extremely Fast</h3><p>Written in Rust, start a React / Vue project in milliseconds and perform an HMR update within 10ms for most situations.</p></div></div><div><p><img src="https://www.farmfe.org/assets/images/box-2073f27f31683afdfc3b2e6f1f775e1f.png" role="img"></p><p><img src="https://www.farmfe.org/assets/images/box-2073f27f31683afdfc3b2e6f1f775e1f.png" role="img"></p><div><h3>Incremental Building</h3><p>Incremental Building: Support persistent cache, module level cache enabled by default, any module won't be compiled twice until it's changed!</p></div></div><div><p><img src="https://www.farmfe.org/assets/images/feature-1a0545f4589a9c5ac2949f6ff0acde53.png" role="img"></p><p><img src="https://www.farmfe.org/assets/images/feature-1a0545f4589a9c5ac2949f6ff0acde53.png" role="img"></p><div><h3>Rich Features</h3><p>Farm support compiling Html, Css, Css Modules, Js/Jsx/Ts/Tsx, Json, Static Assets out of box, support sass, less, postcss, vue, react, solid by official plugins, support lazy compiling, partial bundling and more</p></div></div><div><p><img src="https://www.farmfe.org/assets/images/plug-509f8f982a9a08431017c8c46bb6d3bb.png" role="img"></p><p><img src="https://www.farmfe.org/assets/images/plug-509f8f982a9a08431017c8c46bb6d3bb.png" role="img"></p><div><h3>Fully Pluggable and Vite Compatible</h3><p>Everything inside Farm is powered by plugins, Supports both Rust and JavaScript plugins. Support Vite plugins out of box.</p></div></div><div><p><img src="https://www.farmfe.org/assets/images/box-2073f27f31683afdfc3b2e6f1f775e1f.png" role="img"></p><p><img src="https://www.farmfe.org/assets/images/box-2073f27f31683afdfc3b2e6f1f775e1f.png" role="img"></p><div><h3>Partial Bundling</h3><p>Partial Bundling: Bundle your project into a few reasonable bundles, speeding up resource loading without losing caching granularity.</p></div></div><div><p><img src="https://www.farmfe.org/assets/images/compatible-1387759c6885367cdeb0569560b3a950.png" role="img"></p><p><img src="https://www.farmfe.org/assets/images/compatible-1387759c6885367cdeb0569560b3a950.png" role="img"></p><div><h3>Consistency and Compatibility</h3><p>What you see in development will be the same as what you get in production. Supports both legacy (ES5) and modern browsers.</p></div></div></div></main></div></div>]]></description>
        </item>
    </channel>
</rss>