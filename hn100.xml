<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>HN100 - Readable Contents</title>
        <link>https://hn.algolia.com/api/v1/search_by_date?tags=%28story,poll%29&amp;numericFilters=points%3E100</link>
        <description>Uses Readability to add bodies to the RSS feed</description>
        <lastBuildDate>Thu, 11 Apr 2024 03:00:04 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[EPA Says 'Forever Chemicals' Must Be Removed from Tap Water (209 pts)]]></title>
            <link>https://www.nytimes.com/2024/04/10/climate/epa-pfas-drinking-water.html</link>
            <guid>39996433</guid>
            <pubDate>Wed, 10 Apr 2024 22:37:52 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.nytimes.com/2024/04/10/climate/epa-pfas-drinking-water.html">https://www.nytimes.com/2024/04/10/climate/epa-pfas-drinking-water.html</a>, See on <a href="https://news.ycombinator.com/item?id=39996433">Hacker News</a></p>
Couldn't get https://www.nytimes.com/2024/04/10/climate/epa-pfas-drinking-water.html: Error: Request failed with status code 403]]></description>
        </item>
        <item>
            <title><![CDATA[Aider: AI pair programming in your terminal (164 pts)]]></title>
            <link>https://github.com/paul-gauthier/aider</link>
            <guid>39995725</guid>
            <pubDate>Wed, 10 Apr 2024 21:06:42 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/paul-gauthier/aider">https://github.com/paul-gauthier/aider</a>, See on <a href="https://news.ycombinator.com/item?id=39995725">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">aider is AI pair programming in your terminal</h2><a id="user-content-aider-is-ai-pair-programming-in-your-terminal" aria-label="Permalink: aider is AI pair programming in your terminal" href="#aider-is-ai-pair-programming-in-your-terminal"></a></p>
<p dir="auto">Aider is a command line tool that lets you pair program with GPT-3.5/GPT-4,
to edit code stored in your local git repository.
Aider will directly edit the code in your local source files,
and <a href="https://aider.chat/docs/faq.html#how-does-aider-use-git" rel="nofollow">git commit the changes</a>
with sensible commit messages.
You can start a new project or work with an existing git repo.
Aider is unique in that it lets you ask for changes to <a href="https://aider.chat/docs/repomap.html" rel="nofollow">pre-existing, larger codebases</a>.</p>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://github.com/paul-gauthier/aider/blob/main/assets/screencast.svg"><img src="https://github.com/paul-gauthier/aider/raw/main/assets/screencast.svg" alt="aider screencast"></a>
</p>
<p dir="auto">
  <a href="https://discord.gg/Tv2uQnR88V" rel="nofollow">
    <img src="https://camo.githubusercontent.com/dfd919a27895c138700ce36a0a5e888d3c603d28784f798648443ca0006d1418/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a6f696e2d446973636f72642d626c75652e737667" data-canonical-src="https://img.shields.io/badge/Join-Discord-blue.svg">
  </a>
</p>
<ul dir="auto">
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#example-chat-transcripts">Example chat transcripts</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="https://aider.chat/docs/install.html#tutorial-videos" rel="nofollow">Tutorial videos</a></li>
<li><a href="#in-chat-commands">In-chat commands</a></li>
<li><a href="#tips">Tips</a></li>
<li><a href="https://aider.chat/docs/install.html" rel="nofollow">Installation</a></li>
<li><a href="https://aider.chat/docs/voice.html" rel="nofollow">Voice-to-code</a></li>
<li><a href="https://aider.chat/docs/faq.html" rel="nofollow">FAQ</a></li>
<li><a href="https://discord.gg/Tv2uQnR88V" rel="nofollow">Discord</a></li>
<li><a href="https://aider.chat/blog/" rel="nofollow">Blog</a></li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Getting started</h2><a id="user-content-getting-started" aria-label="Permalink: Getting started" href="#getting-started"></a></p>
<p dir="auto">See the
<a href="https://aider.chat/docs/install.html" rel="nofollow">installation instructions</a>
for more details, but you can
get started quickly like this:</p>
<div data-snippet-clipboard-copy-content="$ pip install aider-chat
$ export OPENAI_API_KEY=your-key-goes-here
$ aider hello.js

Using git repo: .git
Added hello.js to the chat.

hello.js> write a js script that prints hello world"><pre><code>$ pip install aider-chat
$ export OPENAI_API_KEY=your-key-goes-here
$ aider hello.js

Using git repo: .git
Added hello.js to the chat.

hello.js&gt; write a js script that prints hello world
</code></pre></div>
<p dir="auto"><h2 tabindex="-1" dir="auto">Example chat transcripts</h2><a id="user-content-example-chat-transcripts" aria-label="Permalink: Example chat transcripts" href="#example-chat-transcripts"></a></p>
<p dir="auto">Here are some example transcripts that show how you can chat with <code>aider</code> to write and edit code with GPT-4.</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://aider.chat/examples/hello-world-flask.html" rel="nofollow"><strong>Hello World Flask App</strong></a>: Start from scratch and have GPT create a simple Flask app with various endpoints, such as adding two numbers and calculating the Fibonacci sequence.</p>
</li>
<li>
<p dir="auto"><a href="https://aider.chat/examples/2048-game.html" rel="nofollow"><strong>Javascript Game Modification</strong></a>: Dive into an existing open-source repo, and get GPT's help to understand it and make modifications.</p>
</li>
<li>
<p dir="auto"><a href="https://aider.chat/examples/complex-change.html" rel="nofollow"><strong>Complex Multi-file Change with Debugging</strong></a>: GPT makes a complex code change that is coordinated across multiple source files, and resolves bugs by reviewing error output and doc snippets.</p>
</li>
<li>
<p dir="auto"><a href="https://aider.chat/examples/add-test.html" rel="nofollow"><strong>Create a Black Box Test Case</strong></a>: GPT creates a "black box" test case without access to the source of the method being tested, using only a
<a href="https://aider.chat/docs/repomap.html" rel="nofollow">high level map of the repository based on tree-sitter</a>.</p>
</li>
</ul>
<p dir="auto">You can find more chat transcripts on the <a href="https://aider.chat/examples/" rel="nofollow">examples page</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Features</h2><a id="user-content-features" aria-label="Permalink: Features" href="#features"></a></p>
<ul dir="auto">
<li>Chat with GPT about your code by launching <code>aider</code> from the command line with set of source files to discuss and edit together. Aider lets GPT see and edit the content of those files.</li>
<li>GPT can write and edit code in most popular languages: python, javascript, typescript, html, css, etc.</li>
<li>Request new features, changes, improvements, or bug fixes to your code. Ask for new test cases, updated documentation or code refactors.</li>
<li>Aider will apply the edits suggested by GPT directly to your source files.</li>
<li>Aider will <a href="https://aider.chat/docs/faq.html#how-does-aider-use-git" rel="nofollow">automatically commit each changeset to your local git repo</a> with a descriptive commit message. These frequent, automatic commits provide a safety net. It's easy to undo changes or use standard git workflows to manage longer sequences of changes.</li>
<li>You can use aider with multiple source files at once, so GPT can make coordinated code changes across all of them in a single changeset/commit.</li>
<li>Aider can <a href="https://aider.chat/docs/repomap.html" rel="nofollow">give <em>GPT-4</em> a map of your entire git repo</a>, which helps it understand and modify large codebases.</li>
<li>You can also edit files by hand using your editor while chatting with aider. Aider will notice these out-of-band edits and keep GPT up to date with the latest versions of your files. This lets you bounce back and forth between the aider chat and your editor, to collaboratively code with GPT.</li>
<li>If you are using gpt-4 through openai directly, you can add image files to your context which will automatically switch you to the gpt-4-vision-preview model</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"></a></p>
<p dir="auto">Run the <code>aider</code> tool by executing the following command:</p>
<div data-snippet-clipboard-copy-content="aider <file1> <file2> ..."><pre><code>aider &lt;file1&gt; &lt;file2&gt; ...
</code></pre></div>
<p dir="auto">If your pip install did not place the <code>aider</code> executable on your path, you can invoke aider like this:</p>
<div data-snippet-clipboard-copy-content="python -m aider.main <file1> <file2>"><pre><code>python -m aider.main &lt;file1&gt; &lt;file2&gt;
</code></pre></div>
<p dir="auto">Replace <code>&lt;file1&gt;</code>, <code>&lt;file2&gt;</code>, etc., with the paths to the source code files you want to work on.
These files will be "added to the chat session", so that GPT can see their contents and edit them according to your instructions.</p>
<p dir="auto">You can also just launch <code>aider</code> anywhere in a git repo without naming
files on the command line.  It will discover all the files in the
repo.  You can then add and remove individual files in the chat
session with the <code>/add</code> and <code>/drop</code> chat commands described below.
If you or GPT mention one of the repo's filenames in the conversation,
aider will ask if you'd like to add it to the chat.</p>
<p dir="auto">Think about the change you want to make and which files will need
to be edited -- add those files to the chat.
Don't add <em>all</em> the files in your repo to the chat.
Be selective, and just add the files that GPT will need to edit.
If you add a bunch of unrelated files, GPT can get overwhelmed
and confused (and it costs more tokens).
Aider will automatically
share snippets from other, related files with GPT so it can
<a href="https://aider.chat/docs/repomap.html" rel="nofollow">understand the rest of your code base</a>.</p>
<p dir="auto">Aider also has many
additional command-line options, environment variables or configuration file
to set many options. See <code>aider --help</code> for details.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">In-chat commands</h2><a id="user-content-in-chat-commands" aria-label="Permalink: In-chat commands" href="#in-chat-commands"></a></p>
<p dir="auto">Aider supports commands from within the chat, which all start with <code>/</code>. Here are some of the most useful in-chat commands:</p>
<ul dir="auto">
<li><code>/add &lt;file&gt;</code>: Add matching files to the chat session.</li>
<li><code>/drop &lt;file&gt;</code>: Remove matching files from the chat session.</li>
<li><code>/undo</code>: Undo the last git commit if it was done by aider.</li>
<li><code>/diff</code>: Display the diff of the last aider commit.</li>
<li><code>/run &lt;command&gt;</code>: Run a shell command and optionally add the output to the chat.</li>
<li><code>/voice</code>: Speak to aider to <a href="https://aider.chat/docs/voice.html" rel="nofollow">request code changes with your voice</a>.</li>
<li><code>/help</code>: Show help about all commands.</li>
</ul>
<p dir="auto">See the <a href="https://aider.chat/docs/commands.html" rel="nofollow">full command docs</a> for more information.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Tips</h2><a id="user-content-tips" aria-label="Permalink: Tips" href="#tips"></a></p>
<ul dir="auto">
<li>Think about which files need to be edited to make your change and add them to the chat.
Aider has some ability to help GPT figure out which files to edit all by itself, but the most effective approach is to explicitly add the needed files to the chat yourself.</li>
<li>Large changes are best performed as a sequence of thoughtful bite sized steps, where you plan out the approach and overall design. Walk GPT through changes like you might with a junior dev. Ask for a refactor to prepare, then ask for the actual change. Spend the time to ask for code quality/structure improvements.</li>
<li>Use Control-C to safely interrupt GPT if it isn't providing a useful response. The partial response remains in the conversation, so you can refer to it when you reply to GPT with more information or direction.</li>
<li>Use the <code>/run</code> command to run tests, linters, etc and show the output to GPT so it can fix any issues.</li>
<li>Use Meta-ENTER (Esc+ENTER in some environments) to enter multiline chat messages. Or enter <code>{</code> alone on the first line to start a multiline message and <code>}</code> alone on the last line to end it.</li>
<li>If your code is throwing an error, share the error output with GPT using <code>/run</code> or by pasting it into the chat. Let GPT figure out and fix the bug.</li>
<li>GPT knows about a lot of standard tools and libraries, but may get some of the fine details wrong about APIs and function arguments. You can paste doc snippets into the chat to resolve these issues.</li>
<li>GPT can only see the content of the files you specifically "add to the chat". Aider also sends GPT-4 a <a href="https://aider.chat/docs/repomap.html" rel="nofollow">map of your entire git repo</a>. So GPT may ask to see additional files if it feels that's needed for your requests.</li>
<li>I also shared some general <a href="https://news.ycombinator.com/item?id=36211879" rel="nofollow">GPT coding tips on Hacker News</a>.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<p dir="auto">See the <a href="https://aider.chat/docs/install.html" rel="nofollow">installation instructions</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">FAQ</h2><a id="user-content-faq" aria-label="Permalink: FAQ" href="#faq"></a></p>
<p dir="auto">For more information, see the <a href="https://aider.chat/docs/faq.html" rel="nofollow">FAQ</a>.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Kind words from users</h2><a id="user-content-kind-words-from-users" aria-label="Permalink: Kind words from users" href="#kind-words-from-users"></a></p>
<ul dir="auto">
<li><em>The best AI coding assistant so far.</em> -- <a href="https://www.youtube.com/watch?v=df8afeb1FY8" rel="nofollow">Matthew Berman</a></li>
<li><em>Hands down, this is the best AI coding assistant tool so far.</em> -- <a href="https://www.youtube.com/watch?v=MPYFPvxfGZs" rel="nofollow">IndyDevDan</a></li>
<li><em>Aider ... has easily quadrupled my coding productivity.</em> -- <a href="https://news.ycombinator.com/item?id=36212100" rel="nofollow">SOLAR_FIELDS</a></li>
<li><em>It's a cool workflow... Aider's ergonomics are perfect for me.</em> -- <a href="https://news.ycombinator.com/item?id=38185326" rel="nofollow">qup</a></li>
<li><em>It's really like having your senior developer live right in your Git repo - truly amazing!</em> -- <a href="https://github.com/paul-gauthier/aider/issues/124" data-hovercard-type="issue" data-hovercard-url="/paul-gauthier/aider/issues/124/hovercard">rappster</a></li>
<li><em>What an amazing tool. It's incredible.</em> -- <a href="https://github.com/paul-gauthier/aider/issues/6#issue-1722897858" data-hovercard-type="issue" data-hovercard-url="/paul-gauthier/aider/issues/6/hovercard">valyagolev</a></li>
<li><em>Aider is such an astounding thing!</em> -- <a href="https://github.com/paul-gauthier/aider/issues/82#issuecomment-1631876700" data-hovercard-type="issue" data-hovercard-url="/paul-gauthier/aider/issues/82/hovercard">cgrothaus</a></li>
<li><em>It was WAY faster than I would be getting off the ground and making the first few working versions.</em> -- <a href="https://twitter.com/d_feldman/status/1662295077387923456" rel="nofollow">Daniel Feldman</a></li>
<li><em>THANK YOU for Aider! It really feels like a glimpse into the future of coding.</em> -- <a href="https://news.ycombinator.com/item?id=38205643" rel="nofollow">derwiki</a></li>
<li><em>It's just amazing.  It is freeing me to do things I felt were out my comfort zone before.</em> -- <a href="https://discord.com/channels/1131200896827654144/1174002618058678323/1174084556257775656" rel="nofollow">Dougie</a></li>
<li><em>This project is stellar.</em> -- <a href="https://github.com/paul-gauthier/aider/issues/112#issuecomment-1637429008" data-hovercard-type="issue" data-hovercard-url="/paul-gauthier/aider/issues/112/hovercard">funkytaco</a></li>
<li><em>Amazing project, definitely the best AI coding assistant I've used.</em> -- <a href="https://github.com/paul-gauthier/aider/issues/84" data-hovercard-type="issue" data-hovercard-url="/paul-gauthier/aider/issues/84/hovercard">joshuavial</a></li>
<li><em>I am an aider addict. I'm getting so much more work done, but in less time.</em> -- <a href="https://discord.com/channels/1131200896827654144/1131200896827654149/1135913253483069470" rel="nofollow">dandandan</a></li>
<li><em>After wasting $100 on tokens trying to find something better, I'm back to Aider. It blows everything else out of the water hands down, there's no competition whatsoever.</em> -- <a href="https://discord.com/channels/1131200896827654144/1131200896827654149/1178736602797846548" rel="nofollow">SystemSculpt</a></li>
<li><em>Best agent for actual dev work in existing codebases.</em> -- <a href="https://twitter.com/NickADobos/status/1690408967963652097?s=20" rel="nofollow">Nick Dobos</a></li>
</ul>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Libgourou: A Free Implementation of Adobe's Adept DRM on ePub/PDF Files (126 pts)]]></title>
            <link>https://forge.soutade.fr/soutade/libgourou</link>
            <guid>39994339</guid>
            <pubDate>Wed, 10 Apr 2024 18:49:47 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://forge.soutade.fr/soutade/libgourou">https://forge.soutade.fr/soutade/libgourou</a>, See on <a href="https://news.ycombinator.com/item?id=39994339">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
			
				<h2 id="user-content-introduction" dir="auto">Introduction</h2>
<p dir="auto">libgourou is a free implementation of Adobe's ADEPT protocol used to add DRM on ePub/PDF files. It overcome the lacks of Adobe support for Linux platforms.</p>
<h2 id="user-content-architecture" dir="auto">Architecture</h2>
<p dir="auto">Like RMSDK, libgourou has a client/server scheme. All platform specific functions (crypto, network...) has to be implemented in a client class (that derives from DRMProcessorClient) while server implements ADEPT protocol.
A reference implementation using cURL, OpenSSL and libzip is provided (in <em>utils</em> directory).</p>
<p dir="auto">Main fucntions to use from gourou::DRMProcessor are :</p>
<ul dir="auto">
<li>Get an ePub from an ACSM file : <em>fulfill()</em> and <em>download()</em></li>
<li>Create a new device : <em>createDRMProcessor()</em></li>
<li>Register a new device : <em>signIn()</em> and <em>activateDevice()</em></li>
<li>Remove DRM : <em>removeDRM()</em></li>
<li>Return loaned book : <em>returnLoan()</em></li>
</ul>
<p dir="auto">You can import configuration from (at least) :</p>
<ul dir="auto">
<li>Kobo device    : .adept/device.xml, .adept/devicesalt  and .adept/activation.xml</li>
<li>Bookeen device : .adobe-digital-editions/device.xml, root/devkey.bin and .adobe-digital-editions/activation.xml</li>
</ul>
<p dir="auto">Or create a new one. Be careful : there is a limited number of devices that can be created bye one account.</p>
<p dir="auto">ePub are encrypted using a shared key : one account / multiple devices, so you can create and register a device into your computer and read downloaded (and encrypted) ePub file with your eReader configured using the same AdobeID account.</p>
<p dir="auto">For those who wants to remove DRM without adept_remove, you can export your private key and import it within <a href="https://calibre-ebook.com/" rel="nofollow">Calibre</a> an its DeDRM plugin.</p>
<h2 id="user-content-dependencies" dir="auto">Dependencies</h2>
<p dir="auto">For libgourou :</p>
<p dir="auto"><em>externals</em> :</p>
<ul dir="auto">
<li>libpugixml</li>
</ul>
<p dir="auto"><em>internals</em> :</p>
<ul dir="auto">
<li>uPDFParser</li>
</ul>
<p dir="auto">For utils :</p>
<ul dir="auto">
<li>libcurl</li>
<li>OpenSSL</li>
<li>libzip</li>
<li>libpugixml</li>
</ul>
<p dir="auto">Internal libraries are automatically fetched and statically compiled during the first run.
When you update libgourou's repository, <strong>don't forget to update internal libraries</strong> with :</p>
<pre><code>make update_lib
</code></pre>
<h2 id="user-content-compilation" dir="auto">Compilation</h2>
<p dir="auto">Use <em>make</em> command</p>
<pre><code>make [CROSS=XXX] [DEBUG=(0*|1)] [STATIC_UTILS=(0*|1)] [BUILD_UTILS=(0|1*)] [BUILD_STATIC=(0*|1)] [BUILD_SHARED=(0|1*)] [all*|clean|ultraclean|build_utils|install|uninstall]
</code></pre>
<p dir="auto">CROSS can define a cross compiler prefix (ie arm-linux-gnueabihf-)</p>
<p dir="auto">DEBUG can be set to compile in DEBUG mode</p>
<p dir="auto">BUILD_UTILS to build utils or not</p>
<p dir="auto">STATIC_UTILS to build utils with static library (libgourou.a) instead of default dynamic one (libgourou.so)</p>
<p dir="auto">BUILD_STATIC build libgourou.a if 1, nothing if 0, can be combined with BUILD_SHARED</p>
<p dir="auto">BUILD_SHARED build libgourou.so if 1, nothing if 0, can be combined with BUILD_STATIC</p>
<p dir="auto">other variables are DESTDIR and PREFIX to handle destination install directory</p>
<ul dir="auto">
<li>Default value</li>
</ul>
<h2 id="user-content-utils" dir="auto">Utils</h2>
<p dir="auto">First, add libgourou.so to your LD_LIBRARY_PATH</p>
<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$PWD
</code></pre>
<p dir="auto">You can optionaly specify your .adept directory</p>
<pre><code>export ADEPT_DIR=/home/XXX
</code></pre>
<p dir="auto">Then, use utils as following :</p>
<p dir="auto">You can import configuration from your eReader or create a new one with <em>utils/adept_activate</em> :</p>
<pre><code>./utils/adept_activate -u &lt;AdobeID USERNAME&gt;
</code></pre>
<p dir="auto">Then a <em>/home//.config/adept</em> directory is created with all configuration file</p>
<p dir="auto">To download an ePub/PDF :</p>
<pre><code>./utils/acsmdownloader &lt;ACSM_FILE&gt;
</code></pre>
<p dir="auto">To export your private key (for DeDRM software) :</p>
<pre><code>./utils/acsmdownloader --export-private-key [-o adobekey_1.der]
</code></pre>
<p dir="auto">To remove ADEPT DRM :</p>
<pre><code>./utils/adept_remove &lt;encryptedFile&gt;
</code></pre>
<p dir="auto">To list loaned books :</p>
<pre><code>./utils/adept_loan_mgt [-l]
</code></pre>
<p dir="auto">To return a loaned book :</p>
<pre><code>./utils/adept_loan_mgt -r &lt;id&gt;
</code></pre>
<p dir="auto">You can get utils full options description with -h or --help switch</p>
<h2 id="user-content-docker" dir="auto">Docker</h2>
<p dir="auto">A docker image (by bcliang) is available at <a href="https://github.com/bcliang/docker-libgourou/" rel="nofollow">https://github.com/bcliang/docker-libgourou/</a></p>
<h2 id="user-content-copyright" dir="auto">Copyright</h2>
<p dir="auto">Grégory Soutadé</p>
<h2 id="user-content-license" dir="auto">License</h2>
<p dir="auto">libgourou : LGPL v3 or later</p>
<p dir="auto">utils     : BSD</p>
<h2 id="user-content-special-thanks" dir="auto">Special thanks</h2>
<ul dir="auto">
<li><em>Jens</em> for all test samples and utils testing</li>
<li><em>Milian</em> for debug &amp; code</li>
<li><em>Berwyn H</em> for all test samples, feedbacks, patches and kind donation</li>
</ul>

			
		</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Code search is hard (177 pts)]]></title>
            <link>https://blog.val.town/blog/search-notes/</link>
            <guid>39993976</guid>
            <pubDate>Wed, 10 Apr 2024 18:15:08 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://blog.val.town/blog/search-notes/">https://blog.val.town/blog/search-notes/</a>, See on <a href="https://news.ycombinator.com/item?id=39993976">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-astro-cid-bvzihdzo=""> <article itemscope="" itemtype="https://schema.org/Article" data-astro-cid-bvzihdzo=""> <div data-astro-cid-bvzihdzo=""> <div data-astro-cid-bvzihdzo="">  <p><img src="https://blog.val.town/_astro/tom.Cx99M2g4_Z1L13eJ.webp" srcset="https://blog.val.town/_astro/tom.Cx99M2g4_Z2jf3OO.webp 1x, https://blog.val.town/_astro/tom.Cx99M2g4_Z2f6MW8.webp 2x, https://blog.val.town/_astro/tom.Cx99M2g4_Z2aXx4r.webp 3x" alt="Tom MacWright" }="true" data-astro-cid-bvzihdzo="" width="20" height="20" loading="lazy" decoding="async"> 
on
<time datetime="2024-04-10T00:00:00.000Z"> Apr 10, 2024 </time> </p> </div> <p>Val Town’s search functionality isn’t very good. Right now it’s built on the Postgres <a href="https://www.postgresql.org/docs/current/functions-matching.html">ILIKE</a> functionality, which just performs a substring search: if your search term is in the code, it appears in search results. There’s virtually no ranking involved, and queries with multiple words are pretty poorly supported.
Better search is <a href="https://github.com/val-town/val-town-product/discussions/69">one of our most-requested features</a>.</p>
<p>I’m working on improving this, but we haven’t found a solution that fits our needs yet.
Here are some notes from our research. So far what we’ve learned is that:</p>
<ul>
<li>Mainstream search solutions are designed for natural language, not code.</li>
<li>Big companies with code search needs have spent a lot of time and money
building their own custom solutions.</li>
<li>We have a lot of data already, and need a solution that scales well.</li>
<li>The infrastructure and complexity tradeoffs involved in using a separate
search service instead of a database extension are important.</li>
</ul>
<h3 id="code-search-versus-natural-language-search">Code search versus natural language search</h3>
<p>A common issue with off-the shelf search solutions is that they’re designed to work with English and other natural languages. For example, here are some of the algorithms you get by default with a usual FTS setup:</p>
<ul>
<li><strong>Stop words removal</strong>: words like “the” and “it” are removed from text before it is indexed, because they’re so common that they cause more problems for performance than they’re worth.</li>
<li><strong>Stemming</strong>: this mostly <a href="https://en.wikipedia.org/wiki/Grammatical_conjugation">reverses conjugation</a>, turning a word like “running” into “run” before it is added to the index, and doing the same for search queries, so that you can search for “runs” and get a search result for a document with the term “running.”</li>
<li><strong>Lemmatization</strong>: some search indexes are even fancy enough to substitute synonyms for more common words, so that you can search for “excellent” and get results for documents including “great.”</li>
</ul>
<p>All together, this means that the vector derived from a document that you’re storing in the index does not look like the document at all:</p>
<div><figure><pre tabindex="0"><code><div><p><span>select</span><span> </span><span>*</span><span> </span><span>from</span><span> to_tsvector(</span><span>'english'</span><span>, </span><span>'I am writing this example sentence'</span><span>);</span></p></div><div><p><span>--- 'exampl':5 'sentenc':6 'write':3</span></p></div></code></pre></figure></div>
<p>The problem with all of these rules is that they wreak havoc on code. <code>the</code> is not a stop-word in TypeScript: it’s a valid variable name that you might want to search for. Word boundaries aren’t the same, and stemming function names doesn’t make much sense.</p>
<div><figure><pre tabindex="0"><code><div><p><span>select</span><span> </span><span>*</span><span> </span><span>from</span><span> to_tsvector(</span><span>'english'</span><span>,</span></p></div><div><p><span>&nbsp; </span><span>'function stringifyNumber(a: number): string { return a.toString() }'</span><span>);</span></p></div><div><p><span>-- 'a.tostring':7 'function':1 'number':4 'return':6 'string':5 'stringifynumb':2</span></p></div></code></pre></figure></div>
<p>This is a pretty bad index: it has words that should be stop words, like <code>function</code>, and won’t split <code>a.toString()</code> into two tokens because <code>.</code> is not a default word boundary.</p>
<h3 id="full-text-search">Full Text Search</h3>
<p>Postgres has a <a href="https://www.postgresql.org/docs/current/textsearch.html">Full Text Search</a> extension which is supported by our hosting provider, <a href="https://docs.render.com/postgresql-extensions">Render</a>. I’ve used FTS in previous projects, and for certain scales, it works great. You can try and <a href="https://www.amazingcto.com/postgres-for-everything/">use Postgres for everything</a>, and frankly, so far we have: we’ve been using the heck out of Postgres. It’s a fantastic piece of technology with great documentation that is well-supported by our hosting provider.</p>
<p>If we can use Postgres for something, we will: keeping infrastructure as simple as possible is essential with a small team.</p>
<p>However, the previous projects I’ve used FTS for have run into performance problems and struggled to scale - <a href="https://observablehq.com/">Observable</a> ended up
moving to Elasticsearch. We have a ton of vals, and are testing the limits of a single-node Postgres cluster. It’s hard to find any accounts of code-search using FTS, though people might be quietly succeeding with it. I wanted to avoid this as a first option but keep it in my back pocket.</p>
<h3 id="pg_trgrm">pg_trgrm</h3>
<p>The solution that we’ve soft-launched as the v2 search algorithm is based on <a href="https://www.postgresql.org/docs/current/pgtrgm.html"><code>pg_trgrm</code></a>, which implements <a href="https://en.wikipedia.org/wiki/Trigram_search">trigram search</a> in Postgres. Code search <em>does</em> seem to succeed with trigrams: <a href="https://swtch.com/~rsc/regexp/regexp4.html">Russ Cox’s famous (to me?) piece from 2012 tells the story of how Google Code Search</a> used trigram indexes and a special regex implementation to succeed, technically. GitHub’s <a href="https://github.blog/2023-02-06-the-technology-behind-githubs-new-code-search/">new search system</a> uses trigram search too, in addition to a lot of technology that I’m jealous of. <a href="https://github.com/sourcegraph/zoekt">Sourcegraph</a> has a trigram-based search tool that they’ve inherited from Google, too.</p>
<p>Our work with the Postgres <code>pg_trgrm</code> approach has been heavily informed by <a href="https://devlog.hexops.com/2021/postgres-regex-search-over-10000-github-repositories/">Stephen Gutekanst’s blog post series about indexing repositories locally</a> in Postgres. We’ve created a <a href="https://www.postgresql.org/docs/current/gin.html">GIN</a> index with <code>gin_trgm_ops</code> on a column containing search text.</p>
<p>The conclusion so far is that this is a great solution for regex search, but we’re not doing regex search: most searches are more freeform. We’re using <a href="https://www.postgresql.org/docs/current/pgtrgm.html#PGTRGM-FUNCS-OPS">word_similarity</a> for search ranking, and it has been very hard to coax the algorithm into giving us anything like a reasonable ranking.</p>
<h3 id="the-universe-of-options">The universe of options</h3>
<table><thead><tr><th>Option</th><th>Architecture</th><th>Language</th><th>Stars</th></tr></thead><tbody><tr><td><a href="https://www.meilisearch.com/">Meilisearch</a></td><td>Standalone</td><td>Rust</td><td>41k</td></tr><tr><td><a href="https://typesense.org/">Typesense</a></td><td>Standalone</td><td>C++</td><td>17k</td></tr><tr><td><a href="https://github.com/sourcegraph/zoekt">Zoekt</a></td><td>Standalone</td><td>Go</td><td>406</td></tr><tr><td><a href="https://www.paradedb.com/">ParadeDB</a></td><td>Postgres extension</td><td>Rust</td><td>3.2k</td></tr><tr><td><a href="https://github.com/valeriansaliou/sonic">Sonic</a></td><td>Standalone</td><td>Rust</td><td>19.4k</td></tr></tbody></table>
<p>There are code-specific tools that exist, but most of them are closed-source: GitHub’s search is excellent, but is obviously the work of a dedicated team with a real time budget.</p>
<ul>
<li>Sourcegraph’s maintained fork of <a href="https://github.com/google/zoekt">Zoekt</a> is pretty cool, but is pretty fearfully niche and would be a big, new infrastructure commitment.</li>
<li><a href="https://github.com/elastic/elasticsearch">Elasticsearch</a> might be the eventual,
unavoidable solution to this problem. It doesn’t have code-specific handling, but can be
customized in nearly infinite ways. We’re not excited to start learning about Java memory
tuning and to introduce the first persistent disk storage to our application, as well as
an additional source of truth for our data. Possibly we could use Elasticsearch
<a href="https://www.elastic.co/cloud">Cloud</a> to avoid the maintenance overhead.</li>
<li><a href="https://github.com/meilisearch/meilisearch">Meilisearch</a> seems like a promising ES alternative with the shininess of ✨Rust✨, but they <a href="https://blog.meilisearch.com/meilisearch-vs-elasticsearch/">seem to emphasize latency over scalability</a>, and we’re not sure if the infrastructure commitment would be any lower.</li>
<li><a href="https://www.paradedb.com/">ParadeDB</a> promises to be like Elasticsearch but “just Postgres,” which is very appealing, but we <a href="https://docs.render.com/postgresql-extensions">can’t use their extension in Render yet</a>.</li>
</ul>
<hr>
<p>In short, we’re still working on it. Searching code instead of English makes the difficulty level a bit higher. For a small team, with an incentive to keep infrastructure simple, development environments easy to set up, and data in the same place, we’re trying to be careful not to commit to something that requires constant upkeep. There’s a reason why most mid and large-sized companies have a search “team,” not just a search service.</p> <a href="https://github.com/val-town/val-town-blog/edit/main/src/content/blog/search-notes.md" data-astro-cid-npoeh54f=""><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-astro-cid-npoeh54f=""><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125" data-astro-cid-npoeh54f=""></path></svg>
Edit this page
</a> </div> </article> </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Udio: Generate music in your favorite styles with a text prompt (145 pts)]]></title>
            <link>https://twitter.com/udiomusic/status/1778045322654003448</link>
            <guid>39993930</guid>
            <pubDate>Wed, 10 Apr 2024 18:10:31 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://twitter.com/udiomusic/status/1778045322654003448">https://twitter.com/udiomusic/status/1778045322654003448</a>, See on <a href="https://news.ycombinator.com/item?id=39993930">Hacker News</a></p>
Couldn't get https://twitter.com/udiomusic/status/1778045322654003448: Error: Request failed with status code 400]]></description>
        </item>
        <item>
            <title><![CDATA[Implementation of Google's Griffin Architecture – RNN LLM (151 pts)]]></title>
            <link>https://github.com/google-deepmind/recurrentgemma</link>
            <guid>39993626</guid>
            <pubDate>Wed, 10 Apr 2024 17:47:11 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://github.com/google-deepmind/recurrentgemma">https://github.com/google-deepmind/recurrentgemma</a>, See on <a href="https://news.ycombinator.com/item?id=39993626">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><h2 tabindex="-1" dir="auto">RecurrentGemma</h2><a id="user-content-recurrentgemma" aria-label="Permalink: RecurrentGemma" href="#recurrentgemma"></a></p>
<p dir="auto">RecurrentGemma is a family of open-weights Language Models by <a href="https://deepmind.google/" rel="nofollow">Google DeepMind</a>, based on the novel <a href="https://arxiv.org/abs/2402.19427" rel="nofollow">Griffin architecture</a>. This architecture achieves fast inference when generating long sequences by replacing global attention with a mixture of local attention and linear recurrences.</p>
<p dir="auto">This repository contains the model implementation and examples for sampling and fine-tuning. We recommend most users adopt the <a href="https://github.com/google/flax">Flax</a> implementation, which is highly optimized. We also provide an un-optimized <a href="https://github.com/pytorch/pytorch">PyTorch</a> implementation for reference.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Learn more about RecurrentGemma</h3><a id="user-content-learn-more-about-recurrentgemma" aria-label="Permalink: Learn more about RecurrentGemma" href="#learn-more-about-recurrentgemma"></a></p>
<ul dir="auto">
<li>The RecurrentGemma <a href="https://storage.googleapis.com/deepmind-media/gemma/recurrentgemma-report.pdf" rel="nofollow">technical report</a> gives specific details on the training and evaluation of RecurrentGemma.</li>
<li>The <a href="https://arxiv.org/abs/2402.19427" rel="nofollow">Griffin paper</a> describes the underlying model architecture.</li>
</ul>
<p dir="auto"><h2 tabindex="-1" dir="auto">Quick start</h2><a id="user-content-quick-start" aria-label="Permalink: Quick start" href="#quick-start"></a></p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Installation</h3><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"></a></p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Using Poetry</h4><a id="user-content-using-poetry" aria-label="Permalink: Using Poetry" href="#using-poetry"></a></p>
<p dir="auto">RecurrentGemma uses <a href="https://python-poetry.org/docs/" rel="nofollow">Poetry</a> for dependency
management.</p>
<p dir="auto">To install dependencies for the full project:</p>
<ul dir="auto">
<li>Checkout the code.</li>
<li><code>poetry install -E full</code> to create a virtual environment with all dependencies.</li>
<li><code>poetry shell</code> to activate the created virtual environment.</li>
</ul>
<p dir="auto">If you only need to install a subset of dependencies use one of the alternative
library-specific commands below.</p>
<p dir="auto"><h4 tabindex="-1" dir="auto">Using pip</h4><a id="user-content-using-pip" aria-label="Permalink: Using pip" href="#using-pip"></a></p>
<p dir="auto">If you want to use <code>pip</code> instead of Poetry,
then create a virtual environment (run <code>python -m venv recurrentgemma-demo</code> and <code>. recurrentgemma-demo/bin/activate</code>) and:</p>
<ul dir="auto">
<li>Checkout the code.</li>
<li><code>pip install .[full]</code></li>
</ul>
<p dir="auto"><h4 tabindex="-1" dir="auto">Installing library-specific packages</h4><a id="user-content-installing-library-specific-packages" aria-label="Permalink: Installing library-specific packages" href="#installing-library-specific-packages"></a></p>
<p dir="auto"><h5 tabindex="-1" dir="auto">JAX</h5><a id="user-content-jax" aria-label="Permalink: JAX" href="#jax"></a></p>
<p dir="auto">To install dependencies only for the JAX pathway use:
<code>poetry install -E jax</code> or (<code>pip install .[jax]</code>).</p>
<p dir="auto"><h5 tabindex="-1" dir="auto">PyTorch</h5><a id="user-content-pytorch" aria-label="Permalink: PyTorch" href="#pytorch"></a></p>
<p dir="auto">To install dependencies only for the PyTorch pathway use:
<code>poetry install -E torch</code> (or <code>pip install .[torch]</code>).</p>
<p dir="auto"><h5 tabindex="-1" dir="auto">Tests</h5><a id="user-content-tests" aria-label="Permalink: Tests" href="#tests"></a></p>
<p dir="auto">To install dependencies required for running unit tests use:
<code>poetry install -E test</code> (or <code>pip install .[test]</code>)</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Downloading the models</h3><a id="user-content-downloading-the-models" aria-label="Permalink: Downloading the models" href="#downloading-the-models"></a></p>
<p dir="auto">The model checkpoints are available through Kaggle at
<a href="http://kaggle.com/models/google/recurrentgemma" rel="nofollow">http://kaggle.com/models/google/recurrentgemma</a>.
Select either the <strong>Flax</strong> or <strong>PyTorch</strong> model variations, click the ⤓ button
to download the model archive, then extract the contents to a local directory.</p>
<p dir="auto">In both cases, the archive contains both the model weights and
the tokenizer.</p>
<p dir="auto"><h3 tabindex="-1" dir="auto">Running the unit tests</h3><a id="user-content-running-the-unit-tests" aria-label="Permalink: Running the unit tests" href="#running-the-unit-tests"></a></p>
<p dir="auto">To run the tests, install the optional <code>[test]</code> dependencies (e.g. using <code>pip install .[test]</code>) from the root of the source tree, then:</p>

<p dir="auto"><h2 tabindex="-1" dir="auto">Examples</h2><a id="user-content-examples" aria-label="Permalink: Examples" href="#examples"></a></p>
<p dir="auto">To run the example sampling script, pass the paths to the weights directory and tokenizer:</p>
<div data-snippet-clipboard-copy-content="python examples/sampling_jax.py \
  --path_checkpoint=/path/to/archive/contents/2b/ \
  --path_tokenizer=/path/to/archive/contents/tokenizer.model"><pre><code>python examples/sampling_jax.py \
  --path_checkpoint=/path/to/archive/contents/2b/ \
  --path_tokenizer=/path/to/archive/contents/tokenizer.model
</code></pre></div>
<p dir="auto"><h3 tabindex="-1" dir="auto">Colab notebook tutorials</h3><a id="user-content-colab-notebook-tutorials" aria-label="Permalink: Colab notebook tutorials" href="#colab-notebook-tutorials"></a></p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://colab.sandbox.google.com/github/google-deepmind/recurrentgemma/blob/main/colabs/sampling_tutorial_jax.ipynb" rel="nofollow"><code>colabs/sampling_tutorial_jax.ipynb</code></a>
contains a <a href="http://colab.google/" rel="nofollow">Colab</a> notebook with a sampling example using JAX.</p>
</li>
<li>
<p dir="auto"><a href="https://colab.sandbox.google.com/github/google-deepmind/recurrentgemma/blob/main/colabs/sampling_tutorial_pytorch.ipynb" rel="nofollow"><code>colabs/sampling_tutorial_pytorch.ipynb</code></a>
contains a <a href="http://colab.google/" rel="nofollow">Colab</a> notebook with a sampling example using PyTorch.</p>
</li>
<li>
<p dir="auto"><a href="https://colab.sandbox.google.com/github/google-deepmind/recurrentgemma/blob/main/colabs/fine_tuning_tutorial_jax.ipynb" rel="nofollow"><code>colabs/fine_tuning_tutorial_jax.ipynb</code></a>
contains a <a href="http://colab.google/" rel="nofollow">Colab</a> with a basic tutorial on how to
fine-tune RecurrentGemma for a task, such as English to French translation, using JAX.</p>
</li>
</ul>
<p dir="auto">To run these notebooks you will need to have a Kaggle account and first read and accept
the Gemma license terms and conditions from the <a href="http://kaggle.com/models/google/recurrentgemma" rel="nofollow">RecurrentGemma page</a>.
After this you can run the notebooks, which will automatically download the weights and tokenizer from there.</p>
<p dir="auto">Currently different notebooks are supported under the following hardware:</p>
<table>
<thead>
<tr>
<th>Hardware</th>
<th>T4</th>
<th>P100</th>
<th>V100</th>
<th>A100</th>
<th>TPUv2</th>
<th>TPUv3+</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sampling in Jax</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Sampling in PyTorch</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Finetuning in Jax</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
</tr>
</tbody>
</table>
<p dir="auto"><h2 tabindex="-1" dir="auto">System Requirements</h2><a id="user-content-system-requirements" aria-label="Permalink: System Requirements" href="#system-requirements"></a></p>
<p dir="auto">RecurrentGemma code can run on CPU, GPU or TPU.
The code has been optimized for running on TPU using the Flax implementation,
which contains a low level <a href="https://jax.readthedocs.io/en/latest/pallas/index.html" rel="nofollow">Pallas</a> kernel to perform the linear scan in the recurrent layers.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Contributing</h2><a id="user-content-contributing" aria-label="Permalink: Contributing" href="#contributing"></a></p>
<p dir="auto">We are open to bug reports and issues. Please see
<a href="https://github.com/google-deepmind/recurrentgemma/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</a> for details on PRs.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">License</h2><a id="user-content-license" aria-label="Permalink: License" href="#license"></a></p>
<p dir="auto">Copyright 2024 DeepMind Technologies Limited</p>
<p dir="auto">This code is licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License. You may obtain
a copy of the License at <a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">http://www.apache.org/licenses/LICENSE-2.0</a>.</p>
<p dir="auto">Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an AS IS BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.</p>
<p dir="auto"><h2 tabindex="-1" dir="auto">Disclaimer</h2><a id="user-content-disclaimer" aria-label="Permalink: Disclaimer" href="#disclaimer"></a></p>
<p dir="auto">This is not an official Google product.</p>
</article></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: Sonauto – a more controllable AI music creator (294 pts)]]></title>
            <link>https://sonauto.ai/</link>
            <guid>39992817</guid>
            <pubDate>Wed, 10 Apr 2024 16:48:01 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://sonauto.ai/">https://sonauto.ai/</a>, See on <a href="https://news.ycombinator.com/item?id=39992817">Hacker News</a></p>
&lt;Unparsable&gt;]]></description>
        </item>
        <item>
            <title><![CDATA[Ronda Rousey: "I never wanted to talk about concussion" (148 pts)]]></title>
            <link>https://www.theguardian.com/sport/2024/mar/31/ronda-rousey-i-never-wanted-to-talk-about-concussion-it-felt-like-a-weakness</link>
            <guid>39991815</guid>
            <pubDate>Wed, 10 Apr 2024 15:28:38 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theguardian.com/sport/2024/mar/31/ronda-rousey-i-never-wanted-to-talk-about-concussion-it-felt-like-a-weakness">https://www.theguardian.com/sport/2024/mar/31/ronda-rousey-i-never-wanted-to-talk-about-concussion-it-felt-like-a-weakness</a>, See on <a href="https://news.ycombinator.com/item?id=39991815">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="maincontent"><p><span>‘I</span> worry about it because we already have Alzheimer’s and dementia in our family, and those family members did not get whacked on the head a whole bunch,” <a href="https://www.theguardian.com/sport/ronda-rousey" data-link-name="in body link" data-component="auto-linked-tag">Ronda Rousey</a> says as she considers a future shrouded by the consequences of concussion and a past where she broke so many barriers for women before a shattering fall.</p><p>At her peak, in 2015, Rousey was described by <em>Sports Illustrated</em> as “the <a href="https://www.si.com/mma/2015/05/12/ronda-rousey-ufc-mma-fighter-armbar." data-link-name="in body link">world’s most dominant athlete</a>”. She had changed a brutal sport to become <a href="https://www.theguardian.com/sport/blog/2018/jan/30/ufc-ronda-rousey-wwe-mixed-martial-arts" data-link-name="in body link">the face of the UFC</a>, the billion-dollar juggernaut which drives the popularity of Mixed&nbsp;Martial Arts.</p><p>Apart from being the first woman signed by the deeply conservative <a href="https://www.theguardian.com/sport/ufc" data-link-name="in body link" data-component="auto-linked-tag">UFC</a> in 2012, Rousey had built a formidable 15-0 record in which her bouts lasted an average 34 seconds. But her ferocity was built on a hidden vulnerability. Rousey had suffered so many concussions in judo that she knew her brain could not withstand multiple more blows to the head. It was vital that she brought her fights in the UFC to a violent conclusion before she absorbed much punishment.</p><p>Rousey can now share her secret and is moving and amusing company as she reflects on the consequences of so many concussions. “Every time I forget my keys or lose my phone, I’m like: ‘I’m DYING! It’s OVER!” she says as she shouts out those words with comic flair.</p><p>She has just turned 37 and Rousey is thoughtful again. “Part of me has declined and I have moments where I’ll be singing my daughter a lullaby and I’ll get a word wrong. I’ll be like: ‘Oh my God! This is it [the onset of dementia]!’ On the drive home this morning, after dropping off my daughter for her first day of pre-school, I was passing corners I’d passed hundreds of times and, for a moment, I was like ‘Where am I?’ And then it’s a case of ‘Oh yeah’.”</p><figure id="08726153-d708-4ed2-8ef4-a98aa36f82a8" data-spacefinder-role="showcase" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-2"><picture><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=880&amp;dpr=2&amp;s=none" media="(min-width: 1300px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 1300px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=880&amp;dpr=1&amp;s=none" media="(min-width: 1300px)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=800&amp;dpr=2&amp;s=none" media="(min-width: 1140px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 1140px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=800&amp;dpr=1&amp;s=none" media="(min-width: 1140px)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=640&amp;dpr=2&amp;s=none" media="(min-width: 980px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 980px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=640&amp;dpr=1&amp;s=none" media="(min-width: 980px)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=620&amp;dpr=2&amp;s=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=620&amp;dpr=1&amp;s=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=605&amp;dpr=2&amp;s=none" media="(min-width: 480px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 480px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=605&amp;dpr=1&amp;s=none" media="(min-width: 480px)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=445&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=445&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="Ronda Rousey launches an attack on Sarah Kaufman during the Strikeforce event in 2012." src="https://i.guim.co.uk/img/media/385987113fe55cf70259948aaf7dfb02c0b1c4f5/0_0_3000_2000/master/3000.jpg?width=445&amp;dpr=1&amp;s=none" width="445" height="296.66666666666663" loading="lazy"></picture></div><figcaption><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>Ronda Rousey launches an attack on Sarah Kaufman during the Strikeforce event in 2012.</span> Photograph: Esther Lin/Forza LLC/Getty Images</figcaption></figure><p>We all have moments of brain-fade but, for Rousey, it carries a tangled undertow. Her <a href="https://www.penguin.co.uk/books/456155/our-fight-by-rousey-ronda/9781529912388" data-link-name="in body link">new book</a>, written with her sister Maria Burns Ortiz, is often gripping and, at its best, offers a raw personal history of concussion. She began judo at the age of 11 and, driven by the aim of winning an Olympic gold medal, Rousey tried to evade the fact “I’d been compounding concussion after concussion for so many years”.</p><p>She shrugs when I ask how many concussions she might have had in a calendar year as a young woman. “It’s hard to say because I wouldn’t rest when I had a concussion. I would continue to train and keep re-aggravating it. So instead of having symptoms for a few days, I would have them for weeks or even months. Most of the year I would be having concussion symptoms. There are grades of severity but my worst was being thrown on the back of my head at the Pan-American [Judo] Championships in Argentina. I completely blacked out till the next&nbsp;morning.”</p><p>Rousey’s concerns were ignored. “I’d be treated like I was complaining about a headache. People would say: ‘Your head hurts? Suck it up. What if your head hurts during the Olympics?’ That’s how I was taught to deal with it from a very young age. It became a way of life.”</p><p>Her mother, AnnMaria [Burns], had become the first American to win the world judo championships in 1984. She then lost her husband, and Ronda her father, after Ron Rousey took his life. Ronda was eight years old. Amid such adversity, AnnMaria began coaching Ronda and helped her win a gold medal at the 2004 World Junior Judo Championships and bronze at the 2008 Olympic Games.</p><p>When Ronda was a girl, there was little scientific knowledge about concussion in the public domain. “My mother just didn’t understand concussion,” she says. “Nobody did because research only started coming out towards the end of my judo career. I was afraid of it and tried to suppress it. I’d had so many more concussions than anybody else in a 10-year judo career and so when I started doing <a href="https://www.theguardian.com/sport/mma" data-link-name="in body link" data-component="auto-linked-tag">MMA</a> I didn’t want anyone to know. They already had enough reasons to try and stop me going into MMA and then the UFC. I didn’t want to give them any more about concussion and I was lucky to have the skills to win most fights really quick.” Rousey is suitably scathing about the ignorant machismo that haunts MMA and boxing: “People talk about your ‘chin’ with such reverence. It’s thrown around like it’s a personality trait or a sign of your willpower to absorb blows. That’s another reason why I never wanted to talk about concussion. It felt like it was a personal weakness and not a neurological degeneration I’ve been experiencing since I was a child.”</p><figure id="5a07215e-110a-482c-948e-934f4d6858b8" data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-3"><picture><source srcset="https://i.guim.co.uk/img/media/11997e243a9274b1005bac946d1172deb3113d91/0_0_2436_1544/master/2436.jpg?width=620&amp;dpr=2&amp;s=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/11997e243a9274b1005bac946d1172deb3113d91/0_0_2436_1544/master/2436.jpg?width=620&amp;dpr=1&amp;s=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/11997e243a9274b1005bac946d1172deb3113d91/0_0_2436_1544/master/2436.jpg?width=605&amp;dpr=2&amp;s=none" media="(min-width: 480px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 480px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/11997e243a9274b1005bac946d1172deb3113d91/0_0_2436_1544/master/2436.jpg?width=605&amp;dpr=1&amp;s=none" media="(min-width: 480px)"><source srcset="https://i.guim.co.uk/img/media/11997e243a9274b1005bac946d1172deb3113d91/0_0_2436_1544/master/2436.jpg?width=445&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/11997e243a9274b1005bac946d1172deb3113d91/0_0_2436_1544/master/2436.jpg?width=445&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="United States’ Ronda Rousey (blue) and Germany’s Annett Boehm compete in their women’s -70kg judo bronze medal match of the 2008 Beijing Olympic Games." src="https://i.guim.co.uk/img/media/11997e243a9274b1005bac946d1172deb3113d91/0_0_2436_1544/master/2436.jpg?width=445&amp;dpr=1&amp;s=none" width="445" height="282.0525451559934" loading="lazy"></picture></div><figcaption><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>Ronda Rousey (blue) on her way to beating Germany’s Annett Boehm in their women’s -70kg judo bronze medal match at the 2008 Olympic Games.</span> Photograph: Olivier Morin/AFP/Getty Images</figcaption></figure><p>She pushes her glasses higher up on the bridge of her nose. “It sucks because you see what happened to a lot of these fighters. <a href="https://www.theguardian.com/sport/muhammad-ali?page=2" data-link-name="in body link">Muhammad Ali</a> is one of my heroes and he had the greatest chin. But look what happened. I am not judging anyone as I would also accept living my life in a wheelchair if that was the price I had to pay to achieve all I did. I respect Ali for being willing to live that life because that’s something I tried to do as well.</p><p>“I hope I don’t end up that way but you never know. It might be decades later when you understand you’ve taken one hit too many. When you have kids and family, it’s much harder to gamble on your&nbsp;future. I went from being the most eligible bachelorette on earth to instant family, and it completely changes your priorities.”</p><p>Rousey experienced a whirlpool of fame which she has now gladly exchanged for a serene life on a regenerative farm she runs with her husband Travis Browne, the former UFC fighter, who has two teenage boys. The couple have two young children of their own and, surrounded by family and animals, Rousey has found a way to heal herself after the catastrophic end to her UFC domination.</p><p>The most powerful pages in Rousey’s book document the aftermath of her <a href="https://www.youtube.com/watch?v=vGhdcHWdW4o" data-link-name="in body link">crushing first defeat</a> when the former boxer <a href="https://www.theguardian.com/sport/2015/nov/15/holly-holm-stuns-ronda-rousey-for-ufc-womens-bantamweight-title" data-link-name="in body link">Holly Holm knocked her out</a> in front of the UFC’s then largest-ever crowd of 56,000 fans in Melbourne, and more than a million people who had paid to watch the broadcast in November 2015. Holm’s first punch concussed Rousey. It also split the champion’s lower lip wide open.</p><p>At the end of the round, Rousey bit off a small chunk of distended flesh, “ripping my teeth into my own lip like you would an apple”, and spat it out. She still feels the missing part of her inside lip today and remembers the desolation of her locker room after being knocked out in the second round.</p><figure id="0d8eb601-92ca-4d31-b927-f1438e58c57c" data-spacefinder-role="showcase" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-4"><picture><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=880&amp;dpr=2&amp;s=none" media="(min-width: 1300px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 1300px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=880&amp;dpr=1&amp;s=none" media="(min-width: 1300px)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=800&amp;dpr=2&amp;s=none" media="(min-width: 1140px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 1140px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=800&amp;dpr=1&amp;s=none" media="(min-width: 1140px)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=640&amp;dpr=2&amp;s=none" media="(min-width: 980px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 980px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=640&amp;dpr=1&amp;s=none" media="(min-width: 980px)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=620&amp;dpr=2&amp;s=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=620&amp;dpr=1&amp;s=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=605&amp;dpr=2&amp;s=none" media="(min-width: 480px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 480px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=605&amp;dpr=1&amp;s=none" media="(min-width: 480px)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=445&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=445&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="Ronda Rousey is on the canvas after being knocked out by Holly Holm in their UFC women’s bantamweight championship bout in 2015." src="https://i.guim.co.uk/img/media/a9144fcfaa2bf4b2eb81149d91635d9fe1dff68e/0_0_4000_2710/master/4000.jpg?width=445&amp;dpr=1&amp;s=none" width="445" height="301.4875" loading="lazy"></picture></div><figcaption><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>Ronda Rousey is on the canvas after being knocked out by Holly Holm in their UFC women’s bantamweight championship bout in 2015.</span> Photograph: Scott Barbour/Zuffa LLC/Getty Images</figcaption></figure><p>Rousey “sat alone on the cold, grey concrete floor” and “tears ran down my cheeks”. She was barefoot, silent and shivering. “I could taste the blood in my mouth, my tongue against a gaping hole of flesh and muscle where my inside bottom lip had once been.”</p><p>She could hear people outside revelling in her devastating defeat. “It was the worst moment of my life. It was the most intense pain, misery, embarrassment and shame I had ever felt. I wanted to kill myself. I wanted to swallow a bottle of painkillers, close my eyes, and end it.”</p><figure data-spacefinder-role="inline" data-spacefinder-type="model.dotcomrendering.pageElements.NewsletterSignupBlockElement"><a data-ignore="global-link-styling" href="#EmailSignup-skip-link-20">skip past newsletter promotion</a><p id="EmailSignup-skip-link-20" tabindex="0" aria-label="after newsletter promotion" role="note">after newsletter promotion</p></figure><p>Only one man could talk properly to her. Travis found the words as, while she sobbed in his arms, he reminded her: “You are so much more than a fighter.”</p><p>Rousey had been venerated for so long and pressured into fighting for the UFC so often. But after that defeat and another early<a href="https://www.theguardian.com/sport/blog/2016/dec/31/ronda-rousey-amanda-nunes-ufc" data-link-name="in body link"> stoppage loss to Amanda Nunes</a> in December 2016, <a href="https://www.theguardian.com/sport/2015/nov/17/holly-holm-defends-ronda-rousey-people-can-be-pretty-brutal" data-link-name="in body link">Rousey was ridiculed relentlessly</a> in a defining example of social media’s desire to destroy a famous figure as they stumble. She finally found a way out of such distress. It helped that Rousey knew she had to protect her brain and no longer risk being punched or kicked in the head. She also tells me how, with patience and humour, Travis showed her how to live normally again.</p><figure id="0e8aec81-ea04-4fc7-be75-66b320ed0a4b" data-spacefinder-role="supporting" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-5"><picture><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=380&amp;dpr=2&amp;s=none" media="(min-width: 1300px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 1300px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=380&amp;dpr=1&amp;s=none" media="(min-width: 1300px)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=300&amp;dpr=2&amp;s=none" media="(min-width: 980px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 980px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=300&amp;dpr=1&amp;s=none" media="(min-width: 980px)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=620&amp;dpr=2&amp;s=none" media="(min-width: 660px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 660px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=620&amp;dpr=1&amp;s=none" media="(min-width: 660px)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=605&amp;dpr=2&amp;s=none" media="(min-width: 480px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 480px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=605&amp;dpr=1&amp;s=none" media="(min-width: 480px)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=445&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=445&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="Ronda Rousey with husband Travis Browne." src="https://i.guim.co.uk/img/media/4f29ea792a69686bcd88eaa9eebed1da7e59caef/4_440_1790_2274/master/1790.jpg?width=445&amp;dpr=1&amp;s=none" width="445" height="565.3240223463688" loading="lazy"></picture></div><figcaption><span><svg width="18" height="13" viewBox="0 0 18 13"><path d="M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z"></path></svg></span><span>Ronda Rousey with husband Travis Browne.</span> Photograph: Eric Williams</figcaption></figure><p>“He was one of the very few people who saw me as more than just Ronda Rousey, the UFC champion. Here’s a perfect way to sum up Travis. When we first got together I told him that there was no way I was ever going to cook for a man. So for a year he cooked every single meal we had together because he loved me. Then one day I said: ‘I can make really nice pancakes. I want to make you some pancakes.’”</p><p>Rousey laughs in delight. “So I started making pancakes and then more and more meals. I wanted to show I loved him by cooking for him, as he had done for me. And then he did this really smart thing. He changed the voice on the GPS so that it had an Australian accent. It&nbsp;was because he didn’t want me to&nbsp;have any bad association with my&nbsp;defeat in Melbourne. To this day we still hear an Australian voice on&nbsp;our GPS.”</p><p>In California they have “our regenerative ranch where we started with one seed and we now have hundreds of acres of grassland”. “We’re figuring out how to use our animals and natural processes to bring this ecosystem to its fullest potential. We now have herds of antelope coming through and roe deer and migrating geese. We’ve taken this land that was so neglected and abused and made it a real refuge for all the wildlife in the area as well as raising our animals humanely so they can exhibit all their natural behaviours.</p><p>“We could have taken <a href="https://www.theguardian.com/sport/2015/aug/26/ronda-rousey-jabs-floyd-mayweather-again" data-link-name="in body link">the money we made</a> from fighting and put it into property and just been landlords. But I don’t want to leave our kids a pile of money that’s on fire because the world is burning. Regenerative agriculture is one of the most scalable solutions to combat climate change. I really believe in it.”</p><p>Rousey worked for a while as a wrestler in the WWE and she quickly discovered that, even in that circus, women were treated badly. But she is proud of how she changed combat sport and made women fighters integral to the business of the UFC. “I tried to win as quickly as possible, taking zero damage and I’m really proud of what I was able to accomplish – especially with my limitations.”</p><figure id="c930078f-4aa8-4081-b6d1-745122285b28" data-spacefinder-role="thumbnail" data-spacefinder-type="model.dotcomrendering.pageElements.ImageBlockElement"><div id="img-6"><picture><source srcset="https://i.guim.co.uk/img/media/f9425015ee99558919ebd19c1c403f9c34adca8a/0_0_1838_2775/master/1838.jpg?width=140&amp;dpr=2&amp;s=none" media="(min-width: 740px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 740px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/f9425015ee99558919ebd19c1c403f9c34adca8a/0_0_1838_2775/master/1838.jpg?width=140&amp;dpr=1&amp;s=none" media="(min-width: 740px)"><source srcset="https://i.guim.co.uk/img/media/f9425015ee99558919ebd19c1c403f9c34adca8a/0_0_1838_2775/master/1838.jpg?width=120&amp;dpr=2&amp;s=none" media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: 320px) and (min-resolution: 120dpi)"><source srcset="https://i.guim.co.uk/img/media/f9425015ee99558919ebd19c1c403f9c34adca8a/0_0_1838_2775/master/1838.jpg?width=120&amp;dpr=1&amp;s=none" media="(min-width: 320px)"><img alt="Front cover of Ronda Rousey autobiography entitled Our Fight" src="https://i.guim.co.uk/img/media/f9425015ee99558919ebd19c1c403f9c34adca8a/0_0_1838_2775/master/1838.jpg?width=120&amp;dpr=1&amp;s=none" width="120" height="181.1751904243743" loading="lazy"></picture></div></figure><p>She has also found peace even if she cannot be certain of the future health of her brain. “I need to enjoy the moment and be happy where I’m at,” Rousey says after an hour of sombre reflection and riotous laughter. “I don’t want my body to be perfect when it’s buried in the ground.</p><p>“I have no regrets and if I get to a point where you can just park me in front of the ocean and all I can do is sit and watch the whales, I should be happy with that. I would do it all again, but I wish I could do it with a little more science and knowledge in mind.”</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Kobo announces color e-readers (312 pts)]]></title>
            <link>https://www.theverge.com/2024/4/10/24124411/kobo-libra-colour-clara-colour-e-reader-kindle-e-ink</link>
            <guid>39991693</guid>
            <pubDate>Wed, 10 Apr 2024 15:18:27 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.theverge.com/2024/4/10/24124411/kobo-libra-colour-clara-colour-e-reader-kindle-e-ink">https://www.theverge.com/2024/4/10/24124411/kobo-libra-colour-clara-colour-e-reader-kindle-e-ink</a>, See on <a href="https://news.ycombinator.com/item?id=39991693">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><p>Rakuten Kobo is launching its first color e-readers, the <a href="https://go.skimresources.com/?id=1025X1701640&amp;xs=1&amp;url=https%3A%2F%2Fus.kobobooks.com%2Fproducts%2Fkobo-libra-colour">Kobo Libra Colour</a> and the <a href="https://go.skimresources.com/?id=1025X1701640&amp;xs=1&amp;url=https%3A%2F%2Fus.kobobooks.com%2Fcollections%2Fereaders%2Fproducts%2Fkobo-clara-colour">Kobo Clara Colour</a>. Both use E Ink’s latest Kaledio color screen technology, which has subtle, pastel-like hues and drops from a 300ppi grayscale resolution to 150ppi when you view content in color.</p><p>I’ll be testing both e-readers soon, but so far, they look like small upgrades to Kobo’s existing e-readers. That’s not a bad thing, though! The seven-inch Kobo Libra 2 is <a href="https://www.theverge.com/23769068/best-ebook-readers">my favorite e-reader</a> outside of Amazon’s ecosystem, offering the <a href="https://www.theverge.com/22745670/amazon-kindle-paperwhite-2021-review-usb-c-signature-edition-display-e-reader-books">Kindle Paperwhite’s</a> IPX8 waterproof design but with extras like physical page-turning buttons, no lockscreen ads, and more storage. </p><div><div><div role="button" aria-label="Zoom" tabindex="0"><p><span><span></span><img alt="The Kobo Libra Colour comes with physical page-turning buttons and is compatible with the Kobo Stylus 2 for taking notes." loading="lazy" decoding="async" data-nimg="responsive" sizes="(max-width: 639px) 100vw, (max-width: 1023px) 50vw, 350px" srcset="https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/256x256/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 256w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/376x376/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 376w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/384x384/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 384w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/415x415/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 415w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/480x480/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 480w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/540x540/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 540w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/640x640/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 640w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/750x750/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 750w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/828x828/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 828w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/1080x1080/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 1080w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/1200x1200/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 1200w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/1440x1440/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 1440w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/1920x1920/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 1920w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/2048x2048/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 2048w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/2400x2400/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg 2400w" src="https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/2400x2400/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382616/9_Libra_White_EN_Device_Angled_1080x1080.jpg" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></span></p></div><div><figcaption><em>The Kobo Libra Colour comes with physical page-turning buttons and is compatible with the Kobo Stylus 2 for taking notes.</em></figcaption> <p><cite>Image: Rakuten Kobo</cite></p></div></div><div><div role="button" aria-label="Zoom" tabindex="0"><p><span><span></span><img alt="The Kobo Clara Colour is just like the Clara 2E but with color, an improved processor, and more storage." loading="lazy" decoding="async" data-nimg="responsive" sizes="(max-width: 639px) 100vw, (max-width: 1023px) 50vw, 350px" srcset="https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/256x256/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 256w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/376x376/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 376w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/384x384/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 384w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/415x415/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 415w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/480x480/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 480w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/540x540/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 540w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/640x640/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 640w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/750x750/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 750w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/828x828/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 828w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/1080x1080/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 1080w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/1200x1200/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 1200w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/1440x1440/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 1440w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/1920x1920/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 1920w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/2048x2048/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 2048w, https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/2400x2400/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg 2400w" src="https://duet-cdn.vox-cdn.com/thumbor/0x0:1080x1080/2400x2400/filters:focal(540x540:541x541):format(webp)/cdn.vox-cdn.com/uploads/chorus_asset/file/25382621/2_Clara_Colour_EN_Device_Angled_1080x1080.jpg" data-old-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"></span></p></div><div><figcaption><em>The Kobo Clara Colour is just like the Clara 2E but with color, an improved processor, and more storage.</em></figcaption> <p><cite>Image: Rakuten Kobo</cite></p></div></div></div><p>The $219.99 Kobo Libra Colour retains all of those features but is also now compatible with the <a href="https://help.kobo.com/hc/en-us/articles/10733885674391-About-Kobo-Stylus-2#:~:text=Note%3A%20Kobo%20Stylus%202%20only,Elipsa%2C%20and%20Kobo%20Elipsa%202E.">Kobo Stylus 2</a>, just like the <a href="https://www.theverge.com/2023/4/5/23669572/kobo-elipsa-2e-e-reader-tablet-kindle-scribe-onyx-remarkable">Kobo Elipsa 2E</a>. However, it’s $30 more expensive than the Kobo Libra 2, and you’ll have to buy the stylus separately for $69.99. </p><p>The $149.99 Kobo Clara Colour is slightly more distinct from its closest sibling, the $139.99 <a href="https://www.theverge.com/23542918/kobo-clara-2e-ereader-review-amazon-kindle">Kobo Clara 2E</a>. It offers the same six-inch display and IPX8 waterproof design but now comes with 16GB of storage, as well as an improved processor. I hope so; the Kobo Clara 2E’s sluggish performance was one of my chief complaints.</p><p>Kobo also introduced an upgraded black-and-white Kobo Clara BW, with the same storage and processor upgrades, for $129.99.</p><p>All of the devices are available to preorder starting today and will ship on April 30th. </p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Meta MTIA v2 – Meta Training and Inference Accelerator (171 pts)]]></title>
            <link>https://ai.meta.com/blog/next-generation-meta-training-inference-accelerator-AI-MTIA/</link>
            <guid>39991675</guid>
            <pubDate>Wed, 10 Apr 2024 15:16:22 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://ai.meta.com/blog/next-generation-meta-training-inference-accelerator-AI-MTIA/">https://ai.meta.com/blog/next-generation-meta-training-inference-accelerator-AI-MTIA/</a>, See on <a href="https://news.ycombinator.com/item?id=39991675">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><div id="u_0_a_Cw"><p><img src="https://scontent.fzrh3-1.fna.fbcdn.net/v/t39.8562-6/341873634_933206851214321_6656088855482877648_n.svg?_nc_cat=104&amp;ccb=1-7&amp;_nc_sid=f537c7&amp;_nc_ohc=mGUHpaVA17EAb65o-qY&amp;_nc_ht=scontent.fzrh3-1.fna&amp;oh=00_AfBv4J_M2o8wil-9g4XTkhIXsd0XdjTBo_RbqYXE-3H1aw&amp;oe=661C9BF7" height="30" width="109" alt="Featured label"></p><p>Our next-generation Meta Training and Inference Accelerator</p><p>April 10, 2024 · 8 min read</p></div><div><div><p>The next generation of Meta’s large-scale infrastructure is <a href="https://about.fb.com/news/2023/05/metas-infrastructure-for-ai/" data-ms-clickable="true" data-ms="{&quot;creative&quot;:&quot;click_external-link&quot;,&quot;creative_detail&quot;:&quot;blog_newsroom-reimagine&quot;}" target="_blank" rel="noreferrer noopener" data-lnfb-mode="ie" id="u_0_h_bf">being built with AI in mind</a>, including supporting new generative AI (GenAI) products and services, recommendation systems, and advanced AI research. It’s an investment <a href="https://engineering.fb.com/2024/03/12/data-center-engineering/building-metas-genai-infrastructure/" data-ms-clickable="true" data-ms="{&quot;creative&quot;:&quot;click_external-link&quot;,&quot;creative_detail&quot;:&quot;blog_engineering-building&quot;}" target="_blank" rel="noreferrer noopener" data-lnfb-mode="ie" id="u_0_i_sa">we expect will grow</a> in the years ahead as the compute requirements to support AI models increase alongside the models’ sophistication.</p><p>Last year, we unveiled the <a href="https://ai.meta.com/blog/meta-training-inference-accelerator-AI-MTIA/" data-ms-clickable="true" data-ms="{&quot;creative&quot;:&quot;click_internal-link&quot;,&quot;creative_detail&quot;:&quot;blog_ai-mtiav1-intro&quot;}" target="_blank" rel="noreferrer noopener" data-lnfb-mode="ie" id="u_0_j_5/">Meta Training and Inference Accelerator (MTIA) v1</a>, our first-generation AI inference accelerator that we designed in-house with Meta’s AI workloads in mind – specifically our deep learning recommendation models that are improving a variety of experiences across our products.</p><p>MTIA is a long-term venture to provide the most efficient architecture for Meta’s unique workloads. As AI workloads become increasingly important to our products and services, this efficiency will improve our ability to provide the best experiences for our users around the world. MTIA v1 was an important step in improving the compute efficiency of our infrastructure and better supporting our software developers as they build AI models that will facilitate new and better user experiences.</p><p>Now, we’re sharing details about the next generation of MTIA.</p></div><div><p> Next generation MTIA chip model. Drag to rotate.<br></p></div><p>This inference accelerator is part of our broader full-stack development program for custom, domain-specific silicon that addresses our unique workloads and systems. This new version of MTIA more than doubles the compute and memory bandwidth of our previous solution while maintaining our close tie-in to our workloads. It is designed to efficiently serve the ranking and recommendation models that provide high-quality recommendations to users.</p></div><div id="u_0_l_LC"><p><img src="https://static.xx.fbcdn.net/rsrc.php/v3/y4/r/-PAXP-deijE.gif" alt="Close up photograph of a hand holding a chip" id="u_0_m_uf"></p></div><div><div><h2> Under the hood<br></h2><p>This chip’s architecture is fundamentally focused on providing the right balance of compute, memory bandwidth, and memory capacity for serving ranking and recommendation models. In inference we need to be able to provide relatively high utilization, even when our batch sizes are relatively low. By focusing on providing outsized SRAM capacity, relative to typical GPUs, we can provide high utilization in cases where batch sizes are limited and provide enough compute when we experience larger amounts of potential concurrent work.</p></div><div><p>This accelerator consists of an 8x8 grid of processing elements (PEs). These PEs provide significantly increased dense compute performance (3.5x over MTIA v1) and sparse compute performance (7x improvement). This comes partly from improvements in the architecture associated with pipelining of sparse compute. It also comes from how we feed the PE grid: We have tripled the size of the local PE storage, doubled the on-chip SRAM and increased its bandwidth by 3.5X, and doubled the capacity of LPDDR5.</p></div><div><p>Our new MTIA design also features an improved network on chip (NoC) architecture that doubles the bandwidth and allows us to coordinate between different PEs at low latency. These and other new functions in the PEs form the key technologies that are vital to our long-term roadmap to scale MTIA to a wider variety of more challenging workloads.</p></div></div><div><div><div><h2>The hardware</h2><p>Serving our workloads effectively is not simply a silicon challenge. Co-designing the hardware system and the software stack along with the silicon is essential for the success of the overall inference solution.</p></div><div><p>To support the next-generation silicon we have developed a large, rack-based system that holds up to 72 accelerators. This consists of three chassis, each containing 12 boards that house two accelerators each. We specifically designed the system so that we could clock the chip at 1.35GHz (up from 800 MHz) and run it at 90 watts compared to 25 watts for our first-generation design. Our design ensures we provide denser capabilities with higher compute, memory bandwidth, and memory capacity. This density allows us to more easily accommodate a broad range of model complexities and sizes.</p></div></div><div><div id="u_0_x_hb"><p><img src="https://static.xx.fbcdn.net/rsrc.php/v3/y4/r/-PAXP-deijE.gif" alt="Photograph of a person placing a motherboard into a server"></p></div><div id="u_0_y_g2"><p><img src="https://static.xx.fbcdn.net/rsrc.php/v3/y4/r/-PAXP-deijE.gif" alt="Photograph of a server rack with wires and chips"></p></div></div><div><p>Beyond this, we have upgraded the fabric between the accelerators and between the host and accelerators to PCIe Gen5 to increase the bandwidth and scalability of our system. There is also the option to add an RDMA NIC if we choose to scale out beyond the rack.</p></div></div><div><div><h2>The software stack</h2><p>Software has been one of our key areas of focus from the start of our investment in MTIA. <a href="https://ai.meta.com/blog/pytorch-builds-the-future-of-ai-and-machine-learning-at-facebook/" data-ms-clickable="true" data-ms="{&quot;creative&quot;:&quot;click_internal-link&quot;,&quot;creative_detail&quot;:&quot;blog_ai-pytorch-builds&quot;}" target="_blank" rel="noreferrer noopener" data-lnfb-mode="ie" id="u_0_z_p9">As the initial developers of PyTorch</a>, we value programmability and developer efficiency. Our MTIA stack is designed to fully integrate with PyTorch 2.0 and features like TorchDynamo and TorchInductor. Frontend graph-level capturing, analysis, transformation, and extraction mechanisms (such as TorchDynamo, torch.export, etc.) are agnostic to MTIA and are being reused The lower level compiler for MTIA takes the outputs from the frontend and produces highly efficient and device-specific code. This lower level compiler itself consists of a few components that are responsible for generating executable code for models and kernels.</p></div><div id="u_0_10_xe"><p><img src="https://scontent.fzrh3-1.fna.fbcdn.net/v/t39.8562-6/434734036_1552580315589962_4953415076977263638_n.jpg?_nc_cat=103&amp;ccb=1-7&amp;_nc_sid=f537c7&amp;_nc_ohc=_BJ5OdmLZfIAb5B55YB&amp;_nc_ht=scontent.fzrh3-1.fna&amp;oh=00_AfAZ86-X42WMruek_42kZa0zrA2Ffc8TmgNIIxQ34Iha3w&amp;oe=661C95E6" alt=""></p></div><div><div><p>Below this sits the runtime stack responsible for interfacing with the driver/firmware. The MTIA Streaming interface abstraction provides the basic and essential operations that both inference and (in the future) training software require to manage the device memory, as well as run operators and execute compiled graphs on the device. Finally, the runtime interacts with the driver, which sits in user space – a decision we made to enable us to iterate faster on the driver and firmware within our production stack.</p><p>In many ways this new chip system runs the software stack similarly to MTIA v1, which made it much faster for the team to deploy since we had already done much of the necessary integration and development work needed to be able to run our applications on this architecture. The new MTIA is designed to be compatible with code developed for MTIA v1. Since we had already integrated the full software stack to the silicon, we were up and running our traffic with this new chip in a matter of days. This allowed us to land this next-generation MTIA silicon rapidly, going from first silicon to production models running in 16 regions in less than nine months.</p></div><h3> Triton-MTIA<br></h3><div><p>We’ve further optimized the software stack by creating the Triton-MTIA compiler backend to generate high-performance code for the MTIA hardware. <a href="https://github.com/openai/triton" data-ms-clickable="true" data-ms="{&quot;creative&quot;:&quot;click_external-link&quot;,&quot;creative_detail&quot;:&quot;github_triton&quot;}" target="_blank" rel="noreferrer noopener" data-lnfb-mode="ie" id="u_0_11_hC">Triton</a> is an open source language and compiler for writing highly efficient ML compute kernels. It improves developer productivity for writing GPU code and we have found that the Triton language is sufficiently hardware-agnostic to be applicable to non-GPU hardware architectures like MTIA.</p><p>The Triton-MTIA backend performs optimizations to maximize hardware utilization and support high-performance kernels. It also exposes key knobs to leverage Triton and MTIA auto-tuning infrastructures to explore the kernel configuration and optimization space.</p><p>We have implemented support for the features of the Triton language and integration into PyTorch 2, providing extensive coverage for PyTorch operators. Thanks to TorchInductor, for example, our developers can leverage Triton-MTIA in both ahead-of-time (AOT) and just-in-time (JIT) workflows.</p><p>We observed dramatically improved developer efficiency with Triton-MTIA, which allowed us to scale up compute kernel authoring and significantly expand the support of PyTorch operators.</p></div></div></div><div><p><img src="https://static.xx.fbcdn.net/rsrc.php/v3/y4/r/-PAXP-deijE.gif" alt="Dark Meta gradient" id="u_0_12_Q7"></p><div><h2>Performance Results</h2><p>The results so far show that this MTIA chip can handle both the low complexity (LC) and high complexity (HC) ranking and recommendation models that are components of Meta’s products. Across these models, there can be a ~10x-100x difference in model size and the amount of compute per input sample. Because we control the whole stack, we can achieve greater efficiency compared to commercially available GPUs. Realizing these gains is an ongoing effort and we continue to improve performance per watt as we build up and deploy MTIA chips in our systems.</p><div><p>Early results show that this next generation silicon has already improved performance by 3x over our first generation chip across four key models we evaluated. At the platform level, with 2x the number of devices and a powerful 2-socket CPU, we are able to achieve 6x model serving throughput and a 1.5x performance per watt improvement over the first generation MTIA system. To achieve this, we have made significant progress optimizing kernels, compiler, runtime, and host serving stack. The time to optimize models is going down as the developer ecosystem matures, yet there is more headroom to improve efficiency in the future. </p><div><p>3x</p><p>improved performance over our first gen chip</p></div></div><p>MTIA has been deployed in the data center and is now serving models in production. We are already seeing the positive results of this program as it's allowing us to dedicate and invest in more compute power for our more intensive AI workloads. It is proving to be highly complementary to commercially available GPUs in delivering the optimal mix of performance and efficiency on Meta-specific workloads.</p></div></div><div><h2>Meta’s ongoing investment in custom silicon</h2><div><p>MTIA will be an important piece of our long-term roadmap to build and scale the most powerful and efficient infrastructure possible for Meta’s unique AI workloads.</p><p>We’re designing our custom silicon to work in cooperation with our existing infrastructure as well as with new, more advanced hardware (including next-generation GPUs) that we may leverage in the future. Meeting our ambitions for our custom silicon means investing not only in compute silicon but also in memory bandwidth, networking and capacity as well as other next-generation hardware systems.</p><p>We currently have several programs underway aimed at expanding the scope of MTIA, including support for GenAI workloads.</p><p>We’re only at the beginning of this journey, and we’re inviting people who want to be a part of it to visit <a href="https://www.metacareers.com/innovation" data-ms-clickable="true" data-ms="{&quot;creative&quot;:&quot;click_external-link&quot;,&quot;creative_detail&quot;:&quot;careers_innovation-open-roles&quot;}" target="_blank" rel="noreferrer noopener" data-lnfb-mode="ie" id="u_0_14_H+">Meta Careers</a> to learn about our open positions.</p></div></div><div><h4>Written by:</h4><h4>Eran Tal, Nicolaas Viljoen and Joel Coburn</h4></div></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Twitter's pivot to x.com is a gift to phishers (341 pts)]]></title>
            <link>https://krebsonsecurity.com/2024/04/twitters-clumsy-pivot-to-x-com-is-a-gift-to-phishers/</link>
            <guid>39991173</guid>
            <pubDate>Wed, 10 Apr 2024 14:35:37 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://krebsonsecurity.com/2024/04/twitters-clumsy-pivot-to-x-com-is-a-gift-to-phishers/">https://krebsonsecurity.com/2024/04/twitters-clumsy-pivot-to-x-com-is-a-gift-to-phishers/</a>, See on <a href="https://news.ycombinator.com/item?id=39991173">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
												<p>On April 9, Twitter/X began automatically modifying links that mention “twitter.com” to read “x.com” instead. But over the past 48 hours, dozens of new domain names have been registered that demonstrate how this change could be used to craft convincing phishing links — such as <strong>fedetwitter[.]com</strong>, which until very recently rendered as <strong>fedex.com</strong> in tweets.</p>
<div id="attachment_67139"><p><img aria-describedby="caption-attachment-67139" decoding="async" src="https://krebsonsecurity.com/wp-content/uploads/2024/04/ruseriousx.png" alt="" width="652" height="698"></p><p id="caption-attachment-67139">The message displayed when one visits carfatwitter.com, which Twitter/X displayed as carfax.com in tweets and messages.</p></div>
<p>A search at <a href="https://www.domaintools.com/" target="_blank" rel="noopener">DomainTools.com</a> shows at least 60 domain names have been registered over the past two days for domains ending in “twitter.com,” although research so far shows the majority of these domains have been registered “defensively” by private individuals to prevent the domains from being purchased by scammers.</p>
<p>Those include <strong>carfatwitter.com</strong>, which Twitter/X truncated to carfax.com when the domain appeared in user messages or tweets. Visiting this domain currently displays a message that begins, “Are you serious, X Corp?”</p>
<p><strong>Update:</strong> It appears Twitter/X has corrected its mistake, and no longer truncates any domain ending in “twitter.com” to “x.com.”</p>
<p><em>Original story:</em></p>
<p>The same message is on other newly registered domains, including <strong>goodrtwitter.com</strong> (goodrx.com), <strong>neobutwitter.com</strong> (neobux.com), <strong>roblotwitter.com</strong> (roblox.com), <strong>square-enitwitter.com</strong> (square-enix.com) and yandetwitter.com (yandex.com). The message left on these domains indicates they were defensively registered by <a href="https://compostintraining.club/@prplecake" target="_blank" rel="noopener">a user on Mastodon</a> whose bio says they are a systems admin/engineer. That profile has not responded to requests for comment.</p>
<p>A number of these new domains including “twitter.com” appear to be registered defensively by Twitter/X users in Japan. The domain netflitwitter.com (netflix.com, to Twitter/X users) now displays a message saying it was “acquired to prevent its use for malicious purposes,” along with a Twitter/X username.</p>
<p>The domain mentioned at the beginning of this story — fedetwitter.com — redirects users to the blog of a Japanese technology enthusiast. A user with the handle “amplest0e” appears to have registered <strong>space-twitter.com</strong>, which Twitter/X users would see as the CEO’s “space-x.com.” The domain “ametwitter.com” already redirects to the real americanexpress.com.<span id="more-67137"></span></p>
<p>Some of the domains registered recently and ending in “twitter.com” currently do not resolve and contain no useful contact information in their registration records. Those include <strong>firefotwitter[.]com</strong> (firefox.com), <strong>ngintwitter[.]com</strong> (nginx.com), and <strong>webetwitter[.]com</strong> (webex.com).</p>
<div id="attachment_67144"><p><img aria-describedby="caption-attachment-67144" decoding="async" loading="lazy" src="https://krebsonsecurity.com/wp-content/uploads/2024/04/sextwitter.png" alt="" width="750" height="491" srcset="https://krebsonsecurity.com/wp-content/uploads/2024/04/sextwitter.png 1299w, https://krebsonsecurity.com/wp-content/uploads/2024/04/sextwitter-768x503.png 768w, https://krebsonsecurity.com/wp-content/uploads/2024/04/sextwitter-782x512.png 782w" sizes="(max-width: 750px) 100vw, 750px"></p><p id="caption-attachment-67144">The domain setwitter.com, which Twitter/X until very recently rendered as “sex.com,” redirects to this blog post warning about the recent changes and their potential use for phishing.</p></div>
<p><strong>Sean McNee</strong>, vice president of research and data at DomainTools, told KrebsOnSecurity it appears Twitter/X did not properly limit its redirection efforts.</p>
<p>“Bad actors could register domains as a way to divert traffic from legitimate sites or brands given the opportunity — many such brands in the top million domains end in x, such as webex, hbomax, xerox, xbox, and more,” McNee said. “It is also notable that several other globally popular brands, such as Rolex and Linux, were also on the list of registered domains.”</p>
<p>The apparent oversight by Twitter/X was cause for amusement and amazement from many former users who have migrated to other social media platforms since the new CEO took over. <strong>Matthew Garrett</strong>, a lecturer at U.C. Berkeley’s School of Information, <a href="https://infosec.exchange/@mjg59@nondeterministic.computer/112243298637438787" target="_blank" rel="noopener">summed up</a> the Schadenfreude thusly:</p>
<p>“Twitter just doing a ‘redirect links in tweets that go to x.com to twitter.com instead but accidentally do so for all domains that end x.com like eg spacex.com going to spacetwitter.com’ is not absolutely the funniest thing I could imagine but it’s high up there.”</p>
											</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: ADS-B visualizer (254 pts)]]></title>
            <link>https://adsb.exposed/</link>
            <guid>39990346</guid>
            <pubDate>Wed, 10 Apr 2024 13:15:02 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://adsb.exposed/">https://adsb.exposed/</a>, See on <a href="https://news.ycombinator.com/item?id=39990346">Hacker News</a></p>
<div id="readability-page-1" class="page">
    
    <p>Examples:
        <span>Altitude &amp; Velocity</span>
        <span>Boeing vs. Airbus</span>
        <span>Helicopters</span>
        <span>Hi-Performance</span>
        <span>Light</span>
        <span>Gliders</span>
        <span>Ultralight</span>
        <span>Military</span>
        <span>Vertical Speed</span>
        <span>Roll Angle</span>
        <span>Steep</span>
        <span>Year</span>
        <span>A380</span>
        <span>IL-76</span>
        <span>F-16</span>
        <span>KLM</span>
        <span>N2163J</span>
        <span>Event Time</span>
        <span>Weekends</span>
        <span>Emergency</span>
        <span>Balloons</span>
        <span>Ground Vehicles</span>
        <span>Elon Musk</span>
        <span>All Airlines</span>
    </p>
    
    
    
    <p><span id="picture-copyright">Picture from Wikipedia, © the details at the corresponding page.</span></p>
    
    <p>👁</p>
    <p><img src="https://adsb.exposed/pointer.svg"></p>

    <p id="provider">
        <form>
            <label>
                
                Race
            </label>
            <br>
            <label>
                
                Cloud
            </label>
            <br>
            <label>
                
                Self-hosted (Intel)
            </label>
            <br>
            <label>
                
                Self-hosted (Graviton)
            </label>
        </form>
    </p>

    
    
    


</div>]]></description>
        </item>
        <item>
            <title><![CDATA[2023 ACM Turing Prize awarded to Avi Wigderson (230 pts)]]></title>
            <link>https://awards.acm.org/about/2023-turing</link>
            <guid>39990004</guid>
            <pubDate>Wed, 10 Apr 2024 12:36:43 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://awards.acm.org/about/2023-turing">https://awards.acm.org/about/2023-turing</a>, See on <a href="https://news.ycombinator.com/item?id=39990004">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
<p>ACM has named <a href="https://awards.acm.org/award-recipients/wigderson_3844537">Avi Wigderson</a> as recipient of the 2023 ACM A.M. Turing Award for foundational contributions to the theory of computation, including reshaping our understanding of the role of randomness in computation, and for his decades of intellectual leadership in theoretical computer science.</p>
<p>Wigderson is the Herbert H. Maass Professor in the School of Mathematics at the Institute for Advanced Study in Princeton, New Jersey. He has been a leading figure in areas including computational complexity theory, algorithms and optimization, randomness and cryptography, parallel and distributed computation, combinatorics, and graph theory, as well as connections between theoretical computer science and mathematics and science.</p>
<p>The ACM A.M. Turing Award, often referred to as the “Nobel Prize of Computing,” carries a $1 million prize with financial support provided by Google, Inc. The award is named for Alan M. Turing, the British mathematician who articulated the mathematical foundations of computing.</p>
<p><u>What is Theoretical Computer Science?</u></p>
<p>Theoretical computer science is concerned with the mathematical underpinnings of the field. It poses questions such as “Is this problem solvable through computation?” or “If this problem is solvable through computation, how much time and other resources will be required?”</p>
<p>Theoretical computer science also explores the design of efficient algorithms. Every computing technology that touches our lives is made possible by algorithms. Understanding the principles that make for powerful and efficient algorithms deepens our understanding not only of computer science, but also the laws of nature. While theoretical computer science is known as a field that presents exciting intellectual challenges and is often not directly concerned with improving the practical applications of computing, research breakthroughs in this discipline have led to advances in almost every area of the field—from cryptography and computational biology to network design, machine learning, and quantum computing.</p>
<p><u>Why is Randomness Important?</u></p>
<p>Fundamentally, computers are <em>deterministic</em> systems; the set of instructions of an algorithm applied to any given input uniquely determines its computation and, in particular, its output. In other words, the deterministic algorithm is following a predictable pattern. <em> Randomness </em> , by contrast, lacks a well-defined pattern, or predictability in events or outcomes. Because the world we live in seems full of random events (weather systems, biological and quantum phenomena, etc.), computer scientists have enriched algorithms by allowing them to make random choices in the course of their computation, in the hope of improving their efficiency. And indeed, many problems for which no efficient deterministic algorithm was known have been solved efficiently by probabilistic algorithms, albeit with some small probability of error (that can be efficiently reduced). But is randomness essential, or can it be removed? And what is the quality of randomness needed for the success of probabilistic algorithms?</p>
<p>These, and many other fundamental questions lie at the heart of understanding randomness and pseudorandomness in computation. An improved understanding of the dynamics of randomness in computation can lead us to develop better algorithms as well as deepen our understanding of the nature of computation itself.</p>
<p><u>Wigderson’s Contributions</u></p>
<p>A leader in theoretical computer science research for four decades, Wigderson has made foundational contributions to the understanding of the role of randomness and pseudorandomness in computation.</p>
<p>Computer scientists have discovered a remarkable connection between randomness and computational difficulty (i.e., identifying natural problems that have no efficient algorithms). Working with colleagues, Wigderson authored a highly influential series of works on trading hardness for randomness. They proved that, under standard and widely believed computational assumptions, every probabilistic polynomial time algorithm can be efficiently derandomized (namely, made fully deterministic). In other words, randomness is not necessary for efficient computation. This sequence of works revolutionized our understanding of the role of randomness in computation, and the way we think about randomness. This series of influential papers include the following three:</p>
<ul>
<li>“<a href="https://www.math.ias.edu/~avi/PUBLICATIONS/MYPAPERS/NOAM/HARDNESS/final.pdf">Hardness vs. Randomness</a>” (co-authored with Noam Nisan)<br>
Among other findings, this paper introduced a new type of pseudorandom generator, and proved that efficient deterministic simulation of randomized algorithms is possible under much weaker assumptions than previously known.</li>
<li>“<a href="https://link.springer.com/article/10.1007/BF01275486">BPP Has Subexponential Time Simulations Unless EXPTIME has Publishable Proofs</a>” (co-authored with László Babai, Lance Fortnow, and Noam Nisan)<br>
This paper used `hardness amplification’ to demonstrate that bounded-error probabilistic polynomial time (BPP) can be simulated in subexponential time for infinitely many input lengths under weaker assumptions.</li>
<li>“<a href="https://dl.acm.org/doi/pdf/10.1145/258533.258590">P = BPP if E Requires Exponential Circuits: Derandomizing the XOR Lemma</a>” (co-authored with Russell Impagliazzo)<br>
This paper introduces a stronger pseudo-random generator with essentially optimal hardness vs randomness trade-offs.</li>
</ul>
<p>Importantly, the impact of these three papers by Wigderson goes far beyond the areas of randomness and derandomization. Ideas from these papers were subsequently used in many areas of theoretical computer science and led to impactful papers by several leading figures in the field.</p>
<p>Still working within the broad area of randomness in computation, in <a href="https://www.math.ias.edu/~avi/PUBLICATIONS/MYPAPERS/CRVW01/crvw01.pdf"> papers</a>&nbsp;with Omer Reingold, Salil Vadhan, and Michael Capalbo, Wigderson gave the first efficient combinatorial constructions of expander graphs, which are sparse graphs that have strong connectivity properties. They have many important applications in both mathematics and theoretical computer science.</p>
<p>Outside of his work in randomness, Wigderson has been an intellectual leader in several other areas of theoretical computer science, including multi-prover interactive proofs, cryptography, and circuit complexity.</p>
<p><u>Mentoring</u></p>
<p>In addition to his groundbreaking technical contributions, Wigderson is recognized as an esteemed mentor and colleague who has advised countless young researchers. His vast knowledge and unrivaled technical proficiency—coupled with his friendliness, enthusiasm, and generosity—have attracted many of the best young minds to pursue careers in theoretical computer science.</p>
<p>“It’s important to point out that Avi Wigderson also received the Abel Prize, which is considered the most important honor for lifetime achievements in the field of mathematics,” explained ACM President Yannis Ioannidis. “Being selected for the ACM A.M. Turing Award is a fitting follow-up—as mathematics is foundational to computer science and Wigderson’s work has connected a wide range of mathematical sub-areas to theoretical computer science. Wigderson is a towering intellectual force in theoretical computer science, an exciting discipline that attracts some of the most promising young researchers to work on the most difficult challenges. This year’s Turing Award recognizes Wigderson’s specific work on randomness, as well as the indirect but substantial impact he has had on the entire field of theoretical computer science.”</p>
<p>"Avi Wigderson’s work on randomness and other topics has set the agenda in theoretical computer science for the past three decades,” explained Jeff Dean, Senior Vice President, Google. “From the earliest days of computer science, researchers have recognized that incorporating randomness was a way to design faster algorithms for a wide range of applications. Efforts to better understand randomness continue to yield important benefits to our field, and Wigderson has opened new horizons in this area. Google also salutes Wigderson’s role as a mentor. His colleagues credit him with generating great ideas and research directions, and then motivating a new generation of smart young researchers to work on them. We congratulate Avi Wigderson on receiving the ACM A.M. Turing Award—computing’s highest honor.”</p>
<p><strong><a href="https://www.acm.org/media-center/2024/april/turing-award-2023">News Release</a> | <a href="https://awards.acm.org/binaries/content/assets/press-releases/2024/april/news-release_wigderson_turing-award.pdf">Printable PDF</a></strong></p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Double-Entry Bookkeeping as a Directed Graph (474 pts)]]></title>
            <link>https://matheusportela.com/double-entry-bookkeeping-as-a-directed-graph</link>
            <guid>39988993</guid>
            <pubDate>Wed, 10 Apr 2024 10:13:23 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://matheusportela.com/double-entry-bookkeeping-as-a-directed-graph">https://matheusportela.com/double-entry-bookkeeping-as-a-directed-graph</a>, See on <a href="https://news.ycombinator.com/item?id=39988993">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
  
  <p><span>08 Apr 2024</span></p><h2 id="my-journey-into-accounting">My Journey into Accounting</h2>

<p>In the past couple of years, I’ve been working in billing and payments at <a href="https://www.justworks.com/">Justworks</a>. This experience introduced me to the world of bookkeeping and accounting in ways I didn’t expect: I took a <a href="https://www.udemy.com/course/accounting-fsa-a-solid-foundation-for-a-career-in-finance/">course</a> and <a href="https://link.springer.com/book/10.1007/978-1-349-20618-6">read a textbook</a> in accounting, adopted <a href="https://plaintextaccounting.org/">plain text accounting</a> for my personal finances, and worked in a double-entry ledger system.</p>

<p>Being such a fundamental part of the human experience, accounting has been around for literally millenia. It fostered mathematical and language development. In some cultures, it even predates <a href="https://en.wikipedia.org/wiki/Quipu">written language</a>. For this reason, it’s not surprising that accounting uses a very particular vocabulary and set of concepts that can be intimidating to a newcomer. Credits and debits. Assets and liabilities. Balance sheet. Ledgers and journals.</p>

<p>It took me a while to get used to these things. But once I did, I realized they aren’t <em>that</em> difficult. Maybe it is just a matter of finding the right way to explain them.</p>

<p>This series of articles is my attempt to capture some of my “a-ha” moments while learning accounting. Hopefully, it will help someone out there grasp these ideas in a more intuitive and modern way.</p>

<p>In this first article, we’ll start with the basics: bookkeeping.</p>

<p>Disclaimer: in this article, I’ll simplify some concepts and use slightly different terminology than traditional accounting for didactic purposes. If you’re an accountant, please bear with me.</p>

<h2 id="bookkeeping-without-ledgers">Bookkeeping Without Ledgers</h2>

<p>At its core, accounting is about keeping track of countable things over time. Some of the oldest documents archelogists have found register quantities in old societies: food, animals, people, money. Nowadays, accounting is usually interested in tracking money whereas other areas (such as inventory management or the census bureau) count the rest. For the rest of this article, we’ll focus on money.</p>

<p>Let’s start with a very simple example. Imagine you’re in a small town with two people: Alice and Bob. Alice has $100 in her pocket and Bob has $50 as of January 1st, 2024. We’ll record this data in a table as follows:</p>

<div><pre><code>| Person | Amount |
| ------ | ------ |
| Alice  | $100   |
| Bob    | $50    |
</code></pre></div>

<p>If nothing changes, our job is done. We just need to go around town and ask each person how much money they have, tabulate the data, and store it in a safe place. Badabing, badaboom!</p>

<p>But money is meant to be spent. Alice is studying for her finals and needs to buy a book. She notices Bob has one copy and proposes to buy it from him for $20. Bob is happy to sell her the book he hasn’t used in a while and cash in the extra $20. Great deal!</p>

<p>Now that money has changed hands, we need to update our records. Alice spent $20 and Bob received the same amount. Let’s update our table.</p>

<div><pre><code>| Person | Amount |
| ------ | ------ |
| Alice  | $80    |
| Bob    | $70    |
</code></pre></div>

<p>Before proceeding, let’s name a few things. In our records, Alice and Bob are <strong>accounts</strong>, i.e., places where money is stored. The amount of money in each account is called a <strong>balance</strong>. Saying that Alice has $80 is the same as saying that the Alice account’s balance is $80 as of February 1st, 2024.</p>

<blockquote>
  <p><strong>Definition 1: Account</strong></p>

  <p>A place where money is stored.</p>
</blockquote>

<blockquote>
  <p><strong>Definition 2: Balance</strong></p>

  <p>The amount of money in an account at a given point in time.</p>
</blockquote>

<p>Every month, we can go around town, ask people how much money they have and write it down. We’re basically creating a snapshot of the town’s financial situation monthly. (Surely, most people will be annoyed by this breach of privacy and I would probably be arrested for stalking but let’s ignore this for now.)</p>

<p>What kinds of questions can we answer with this data? Actually, many!</p>
<ul>
  <li>How much money does each person have?</li>
  <li>How much money has each person spent or gained over time?</li>
  <li>Who has the most money?</li>
  <li>Who has the least money?</li>
  <li>How much money is there in total in the town?</li>
</ul>

<p>Our records are simple but useful.</p>

<p>Now, consider Alice comes to us one day and asks “How come I have $80? I thought I had more!” Unfortunately, all we can answer is “That’s what I have written down” with our current data. We can’t tell, for instance, whether Alice initially had $0 and received $80 or if she had $10,000 and spent $9,920.</p>

<p>Why is this so?</p>

<p>Well, we’re only keeping track of the <em>current</em> balance of each account. Because we erase the old balance and replace it with a new one, we don’t know exactly what happened to that balance over time. We lose the changes that happened between snapshots are lost.</p>

<p>Could we do better?</p>

<p>Of course! Accountants have dealt with this problem for centuries and they have a solution: <strong>ledgers</strong>.</p>

<h2 id="bookkeeping-with-single-entry-ledgers">Bookkeeping with Single-Entry Ledgers</h2>

<p>Let’s now think how we could keep track of the historical changes in a systematic way. One way to do this is to write down each update as it happens, not only the balance in a certain date.</p>

<p>To do this, we’ll change the table a little bit. For example, we write down that on January 1st, 2024, Alice had $100.</p>

<div><pre><code>| Account | Description     | Date       | Amount | Balance |
| ------- | --------------- | ---------- | ------ | ------- |
| Alice   | Opening balance | 2024-01-01 | $100   | $100    |
</code></pre></div>

<p>We added some columns to the table:</p>
<ul>
  <li><strong>Description</strong>: A human-readable explanation of the transaction (e.g. what it is about, who got paid, a reference number, etc).</li>
  <li><strong>Date</strong>: When the transaction happened. Besides ordering transactions, this field can be used to group transactions by period (e.g. monthly reports). It can be enhanced with time information (e.g. hour, minute, second) if needed.</li>
  <li><strong>Balance</strong>: The balance of the account after the transaction. This field is redundant but it’s useful when inspecting the data.</li>
</ul>

<p>So far, so good.</p>

<p>Now, let’s take a look at how we can write down that Alice bought the book from Bob.</p>

<div><pre><code>| Account | Description     | Date       | Amount | Balance |
| ------- | --------------- | ---------- | ------ | ------- |
| Alice   | Opening balance | 2024-01-01 | $100   | $100    |
| Alice   | Bought book     | 2024-02-01 | -$20   | $80     |
</code></pre></div>

<p>This is different… Instead of just updating the existing balance, we’re <em>adding a new row</em> with the transaction details. The new columns we added earlier are helpful in understanding what happened to the account. We know that Alice had $100, then spent $20 when buying the book, and now has $80.</p>

<p>Time for more definitions: each row in this table is called an <strong>entry</strong> and the whole table is called a <strong>ledger</strong>.</p>

<blockquote>
  <p><strong>Definition 3: Entry</strong></p>

  <p>A record of a transaction that happened to an account.</p>
</blockquote>

<blockquote>
  <p><strong>Definition 4: Ledger</strong></p>

  <p>A collection of entries for an account.</p>
</blockquote>

<p>So far, we’ve updated only Alice’s ledger. Let’s take a look at Bob’s:</p>

<div><pre><code>| Account | Description     | Date       | Amount | Balance |
| ------- | --------------- | ---------- | ------ | ------- |
| Bob     | Opening balance | 2024-01-01 | $50    | $50     |
| Bob     | Sold book       | 2024-02-01 | $20    | $70     |
</code></pre></div>

<p>Now we have a ledger for each account. Great!</p>

<p>This system we implemented right now is called a <a href="https://en.wikipedia.org/wiki/Single-entry_bookkeeping"><strong>single-entry bookkeeping</strong></a> system. Each account has its own ledger and we write down entries that affect one account at a time. This is a simple system that works well for small businesses or personal finances.</p>

<p>Ledgers are sometimes called <strong>journal</strong> or <strong>book</strong> because, in the past, they were physical books where accountants would write down transactions. In the modern world, though, they’re usually stored in a database.</p>

<center><figure><img src="https://matheusportela.com/assets/images/double-entry-bookkeeping/handwritten-ledger.jpg" alt="Picture of a 1926 handwritten ledger"><figcaption>A 1926 handwritten ledger. Notice the accountant calculated the cash and bank balances daily. Source: <a href="https://www.business-case-analysis.com/ledger.html">Business Case Analysis</a>.</figcaption></figure></center>

<p>An important characteristic of a ledger is that the data is <em>immutable</em>. Once an entry is written, it cannot be changed at all because we want to preserve the ledger’s full history. No more erasing or scribbling over entries.</p>

<p>This raises the question: what happens if we make a mistake?</p>

<p>Here’s an example. Say the correct price for the book is $30 but we wrote down $20. If we were in a mutable system, we could just update the amount in the original entry as follows:</p>

<div><pre><code>| Account | Description     | Date       | Amount | Balance |
| ------- | --------------- | ---------- | ------ | ------- |
| Alice   | Opening balance | 2024-01-01 | $100   | $100    |
| Alice   | Bought book     | 2024-02-01 | -$30   | $70     |
</code></pre></div>

<p>There are many problems with this approach though. We lose the history of the original amount. We can’t tell that we made a mistake and corrected it. We also can’t tell if the original amount was correct and we made a mistake in the correction.</p>

<p>Could we do better?</p>

<p>Yes! Instead of updating the original entry, we can write a new entry to cancel the old one and write a new one with the correct amount. Let’s see how this looks:</p>

<div><pre><code>| Account | Description        | Date       | Amount | Balance |
| ------- | ---------------    | ---------- | ------ | ------- |
| Alice   | Opening balance    | 2024-01-01 | $100   | $100    |
| Alice   | Bought book        | 2024-02-01 | -$20   | $80     |
| Alice   | Correct book price | 2024-02-01 | $20    | $100    |
| Alice   | Bought book        | 2024-02-01 | -$30   | $70     |
</code></pre></div>

<p>The end result is the same as updating an entry in-place: the balance is $70. However, we can now see that we made a mistake and corrected it. We can also see the original amount and the reason for the correction. This gives us an <em>audit trail</em> of changes.</p>

<p>In a way, a ledger is similar to <a href="https://martinfowler.com/eaaDev/EventSourcing.html">event sourcing</a> in Computer Science. In event sourcing, we store events that happened in the system and use them to compute the current state of the system. This is in contrast to storing just the state of the system and updating it in-place. Event sourcing has many benefits, like being able to replay events or to rebuild the state of the system at any point in time.</p>

<p>If our system only cares about a single account at a time, a single-entry ledger system is enough. Think of a personal finance app that you use to keep track of your money or a gym that tracks how much their members paid for the service. However, financial systems are usually more complex than that and transactions typically involve multiple accounts at once.</p>

<p>For these complex scenarios, accountants developed a more robust system: <strong>double-entry bookkeeping</strong>.</p>

<h2 id="bookkeeping-with-double-entry-ledgers">Bookkeeping with Double-Entry Ledgers</h2>

<p>Let’s revisit the example of Alice buying the book from Bob and see the ledgers for both accounts:</p>

<div><pre><code>| Account | Description        | Date       | Amount | Balance |
| ------- | ------------------ | ---------- | ------ | ------- |
| Alice   | Opening balance    | 2024-01-01 | $100   | $100    |
| Alice   | Bought book        | 2024-02-01 | -$20   | $80     |

| Account | Description        | Date       | Amount | Balance |
| ------- | ------------------ | ---------- | ------ | ------- |
| Bob     | Opening balance    | 2024-01-01 | $50    | $50     |
| Bob     | Sold book          | 2024-02-01 | $20    | $70     |
</code></pre></div>

<p>Did you notice how the transactions are related to each other? The $20 Alice spent is the same $20 Bob received. We know that but the system doesn’t since we’re not explicitly stating this relationship in our ledgers. It could be the case the Alice bought the book from Bob and Bob received the money from Charlie. We can’t tell the difference when reading the ledgers.</p>

<p>A first step in making this relationship explicit is to group related entries into a <strong>transaction</strong>. Let’s add the <code>Transaction</code> column to our table:</p>

<div><pre><code>| Account | Transaction | Description        | Date       | Amount | Balance |
| ------- | ----------  | ------------------ | ---------- | ------ | ------- |
| Alice   | 1           | Opening balance    | 2024-01-01 | $100   | $100    |
| Alice   | 3           | Book sale          | 2024-02-01 | -$20   | $80     |

| Account | Transaction | Description        | Date       | Amount | Balance |
| ------- | ----------  | ------------------ | ---------- | ------ | ------- |
| Bob     | 2           | Opening balance    | 2024-01-01 | $50    | $50     |
| Bob     | 3           | Book sale          | 2024-02-01 | $20    | $70     |
</code></pre></div>

<p>In this example, we have the following transactions:</p>
<ul>
  <li>Transaction 1: Alice’s opening balance.</li>
  <li>Transaction 2: Bob’s opening balance.</li>
  <li>Transaction 3: Alice bought a book from Bob.</li>
</ul>

<p>Now, we explicitly state that the $20 Alice spent is the same $20 Bob received. No more ambiguity.</p>

<blockquote>
  <p><strong>Definition 5: Transaction</strong></p>

  <p>A group of related entries that affect different accounts.</p>
</blockquote>

<p>The difference between our current system and the previous one is that we’re now grouping related entries into transactions. Since each transaction affects multiple accounts, we can now see how money flows between accounts. By adding transactions to the tables, we are now working with a <a href="https://en.wikipedia.org/wiki/Double-entry_bookkeeping"><strong>double-entry bookkeeping</strong></a> system.</p>

<p>Traditionally, accountants would use two columns to represent the flow of money between accounts: <strong>credits</strong> and <strong>debits</strong>. When money leaves an account, the amounts goes in the credit column. Incoming money appears in the debit column.</p>

<blockquote>
  <p><strong>Definition 6: Credit</strong></p>

  <p>An entry that represents money leaving an account.</p>
</blockquote>

<blockquote>
  <p><strong>Definition 7: Debit</strong></p>

  <p>An entry that represents money entering an account.</p>
</blockquote>

<p>(Pro-tip: Ignore what you know about credit and debit cards for now.)</p>

<p>When Alice pays Bob $20, we say Alice’s account is credited $20 and Bob’s account is debited $20. Let’s represent this in our table:</p>

<div><pre><code>| Account | Transaction | Description        | Date       | Debit | Credit |
| ------- | ----------  | ------------------ | ---------- | ----- | ------ |
| Alice   | 1           | Opening balance    | 2024-01-01 | $100  |        |
| Alice   | 3           | Bought book        | 2024-02-01 |       | $20    |

| Account | Transaction | Description        | Date       | Debit | Credit |
| ------- | ----------  | ------------------ | ---------- | ----- | ------ |
| Bob     | 2           | Opening balance    | 2024-01-01 | $50   |        |
| Bob     | 3           | Sold book          | 2024-02-01 | $20   |        |
</code></pre></div>

<p>I wanted to make a few of points before continuing our journey.</p>

<p>First, the goal of double-entry bookkeeping is to reduce mistakes, especially the ones that are hard to notice. Remember that, for centuries, accountants were using pen and paper to keep track of insane amounts of money. Small mistakes could lead to big problems. Writing debits and credits in different columns, as we did above, reduces the chance of making mistakes. Your hand is literally moved to different places on the paper when writing debits and credits.</p>

<p>Real world accounting journals wouldn’t even put these columns side-by-side. Instead, they would be in different parts of the page. In fact, accounting journals were symmetrical: the left side was for debits and the right side, for credits. Something like this:</p>

<div><pre><code>Debit                          Alice's account                           Credit
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------
| Date       | Description     | $    | | Date       | Description     | $    |
| ---------- | --------------- | ---- | | ---------- | --------------- | ---- |
| 2024-01-01 | Opening balance | $100 | |            |                 |      |
|            |                 |      | | 2024-02-01 | Bought book     | $20  |
</code></pre></div>

<p>This format is commonly referred to as a <a href="https://en.wikipedia.org/wiki/Debits_and_credits#T-accounts">T-account</a> (an analogy to the same: the top with the account name, the left side with debits, and the right side with credits). For this reason, many accountants will refer to debits as entries that go on the left side and credits as the ones that go on the right side.</p>

<center><figure><img src="https://matheusportela.com/assets/images/double-entry-bookkeeping/general-post-office-accounting-book.jpg" alt="Picture of the General Post Office T-account as instituted by Benjamin Franklin"><figcaption>General Post Office T-account as instituted by Benjamin Franklin. Source: <a href="https://postalmuseum.si.edu/object/npm_1982.0786.1">Smithsonian National Post Museum</a>.</figcaption></figure></center>

<p>Computer systems don’t need to use this format, though, as it doesn’t necessary prevent software bugs. Instead, it is common to have a single amount column and another column to indicate whether the amount is a debit or a credit. For example:</p>

<div><pre><code>| Account | Transaction | Description        | Date       | Type   | Amount |
| ------- | ----------  | ------------------ | ---------- | ------ | ------ |
| Alice   | 1           | Opening balance    | 2024-01-01 | Debit  | $100   |
| Alice   | 3           | Bought book        | 2024-02-01 | Credit | $20    |
</code></pre></div>

<p>Second, notice how we’re using a positive number even when money is leaving Alice’s account. Historically, accountants don’t like negative numbers in the books as they only became popular much later in Europe. Computer systems are very good with negative numbers, though. Instead of having two columns, we could just use a single column and adopt a convention in which credits are negative and debits are positive, or vice-versa. For example:</p>

<div><pre><code>| Account | Transaction | Description        | Date       | Amount |
| ------- | ----------  | ------------------ | ---------- | ------ |
| Alice   | 1           | Opening balance    | 2024-01-01 | $100   |
| Alice   | 3           | Bought book        | 2024-02-01 | -$20   |
</code></pre></div>

<p>If you pay close attention to this last example, this is exactly what we were doing before. The difference is that now we understand that the amount is negative because it’s a credit. (Technically, using negative numbers for credits might be a limitation if we’re trying to undo a credit entry without creating a debit entry but we don’t need to be that picky for now.)</p>

<p>Finally, I’m not a big fan of old nomenclature for tradition’s sake. We could rename credits as <em>outgoing</em> money and debits as <em>incoming</em> money without losing precision. In my opinion, this is a bit less confusing.</p>

<div><pre><code>| Account | Transaction | Description        | Date       | Incoming | Outgoing |
| ------- | ----------  | ------------------ | ---------- | -------- | -------- |
| Alice   | 1           | Opening balance    | 2024-01-01 | $100     |          |
| Alice   | 3           | Bought book        | 2024-02-01 |          | $20      |

| Account | Transaction | Description        | Date       | Incoming | Outgoing |
| ------- | ----------  | ------------------ | ---------- | -------- | -------- |
| Bob     | 2           | Opening balance    | 2024-01-01 | $50      |          |
| Bob     | 3           | Sold book          | 2024-02-01 | $20      |          |
</code></pre></div>

<p>Sweet!</p>

<p>A fundamental principle of double-entry bookkeeping is that the total amount of money in the system remains the same after each transaction. A particular account can increase or decrease its balance over time but the sum of <em>all</em> balances must remain constant. Nothing is lost, nothing is created, everything is <em>transacted</em>. It is a closed system.</p>

<blockquote>
  <p><strong>Definition 6: Double-Entry Ledger</strong></p>

  <p>A system of accounting where each transaction is recorded one or more entries. The amount of money leaving accounts is equal to the amount of money entering other accounts in every transaction.</p>
</blockquote>

<p>Ok, you might be thinking: “Wait a minute, these opening balances go against what you just said!” and you’re right. Transactions 1 and 2 change the total amount of money in the system from $0 to $150. We should do better than stating a rule only to break it in the very next sentence.</p>

<p>Let’s assume all of the money that Alice and Bob have comes from a bank. Then, let’s create an account for this bank and use this account as the other side of the opening balance transactions.</p>

<div><pre><code>| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Bank    | 1           | Alice's opening balance    | 2024-01-01 |          | $100     |
| Bank    | 2           | Bob's opening balance      | 2024-01-01 |          | $50      |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Alice   | 1           | Opening balance            | 2024-01-01 | $100     |          |
| Alice   | 3           | Bought book                | 2024-02-01 |          | $20      |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Bob     | 2           | Opening balance            | 2024-01-01 | $50      |          |
| Bob     | 3           | Sold book                  | 2024-02-01 | $20      |          |
</code></pre></div>

<p>In this example, we don’t care where the opening balances come from exactly. We just need to make sure money is coming from somewhere. The bank account is a kind of phony account that is there just to help us follow the rules. In accounting terms, it is called a <a href="https://en.wikipedia.org/wiki/Debits_and_credits#Contra_account">contra account</a> to the other accounts. The important thing is that all transactions are <strong>balanced</strong>, i.e., “credits equal debits”.</p>

<blockquote>
  <p><strong>Definition 7: Contra Account</strong></p>

  <p>An account that is used to offset another account. It is used to keep the accounting equation in balance.</p>
</blockquote>

<p>Our system is now complete. We have a double-entry ledger system that keeps track of money flowing between accounts. We can answer many questions about the financial situation of Alice and Bob and we have a clear audit trail of all transactions that happened.</p>

<p>Let’s consider a more complex example. When Alice buys the book, she accidentally uses the wrong credit card and needs to pay $2 in foreign exchange fees. Bob, on the other hand, pays $2 in sales taxes to the government, $1 in credit card fees. How do we keep track of this?</p>

<p>The secret in double-entry bookkeeping is to use accounts for everything. As we did before, we model this flow by creating new accounts: one for the credit card company and another for the tax authority. Then, when creating the transaction, we add new entries as necessary.</p>

<div><pre><code>| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Bank    | 1           | Alice's opening balance    | 2024-01-01 |          | $100     |
| Bank    | 2           | Bob's opening balance      | 2024-01-01 |          | $50      |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Alice   | 1           | Opening balance            | 2024-01-01 | $100     |          |
| Alice   | 3           | Bought book                | 2024-02-01 |          | $20      |
| Alice   | 3           | Foreign exchange fee       | 2024-02-01 |          | $2       |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Bob     | 2           | Opening balance            | 2024-01-01 | $50      |          |
| Bob     | 3           | Sold book                  | 2024-02-01 | $20      |          |
| Bob     | 3           | Sales tax                  | 2024-02-01 |          | $2       |
| Bob     | 3           | Credit card fee            | 2024-02-01 |          | $1       |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| CC      | 3           | Alice's credit card fee    | 2024-02-01 | $2       |          |
| CC      | 3           | Bob's credit card fee      | 2024-02-01 | $1       |          |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Tax     | 3           | Bob's sales tax            | 2024-02-01 | $2       |          |
</code></pre></div>

<p>We modified transaction 3 as follows:</p>
<ul>
  <li>Alice pays $20 to Bob and $2 to the credit card company.</li>
  <li>Bob receives $20 from Alice, pays $2 to the tax authority, and $1 to the credit card company.</li>
  <li>The credit card company receives $2 from Alice and $1 from Bob.</li>
  <li>The tax authority receives $2 from Bob.</li>
</ul>

<p>Notice that transaction 3 has <em>more than two entries</em>. It has eight entries, to be precise. This is perfectly fine! We can have as many entries as we need to represent the flow of money between accounts as long as the transaction is balanced, i.e., credits = debits.</p>

<p>It is a common mistake to think that <em>double</em>-entry bookkeeping limits transactions to two entries at a time. The technique is called “double-entry” not because there are only two entries but because each transaction has <em>two sides</em>: one side where money leaves an account and another side where money enters another account. I guess “many-entry bookkeeping” doesn’t sound as good.</p>

<h2 id="double-entry-bookkeeping-is-a-directed-graph">Double-Entry Bookkeeping is a Directed Graph</h2>

<p>I hope these concepts are clear so far. We have accounts, entries, transactions, incoming money, and outgoing money. With practice, you’ll be able to read and write these tables with ease.</p>

<p>But I have a confession to make: I’m a visual person. I like to draw and see things when I’m learning. So I started to think: how can we visualize this data in a way that makes sense to me? After using double-entry bookkeeping for a while in my personal finances and trying to come with a visualization for my ledgers, it finally clicked: we’re modeling money flow as a <a href="https://en.wikipedia.org/wiki/Directed_graph"><em>directed graph</em></a>.</p>

<p>Think about this: An account is a <em>node</em> in the graph, a credit entry is an <em>outgoing edge</em> with an amount of money leaving this node whereas a debit is an <em>incoming edge</em> with money flowing to another node. A transaction, then, groups and enforces a condition on a set of edges: the outgoing edges must have the same sum of money as the incoming edges.</p>

<p>Let’s take a look at the example we’ve been using so far. First, we start with Alice’s and Bob’s accounts and the money they stored in the bank:</p>

<p><img src="https://matheusportela.com/assets/images/double-entry-bookkeeping/Picture%201.drawio.svg" alt="Graph for the first example: Alice's and Bob's initial balances with the Bank as a source"></p>

<p>A few comments on this graph:</p>
<ul>
  <li>An account is a round node with the account name.</li>
  <li>A transaction is a square node with the transaction number.</li>
  <li>A credit entry goes from an account to a transaction.</li>
  <li>A debit entry goes from a transaction to an account.</li>
  <li>The entry’s amount of money is written on the edge.</li>
  <li>An account’s balance is the sum of the amounts of the incoming edges minus the sum of the amounts of the outgoing edges.</li>
</ul>

<p>We can see that transaction 1 moves $100 from the bank to Alice. Transaction 2 moves $50 from the bank to Bob. The total amount of money in the system is $150.</p>

<p>Then, Alice buys a book from Bob:</p>

<p><img src="https://matheusportela.com/assets/images/double-entry-bookkeeping/Picture%202.drawio.svg" alt="Graph for the second example: Alice buys a book from Bob"></p>

<p>We can see that transaction 3 moves $20 from Alice to Bob. Hence, Alice has $80 and Bob, $70.</p>

<p>We haven’t added fees and taxes yet. Let’s do this:</p>

<p><img src="https://matheusportela.com/assets/images/double-entry-bookkeeping/Picture%203.drawio.svg" alt="Graph for the third example: fees and taxes"></p>

<p>Oof, that’s a lot of edges! Transaction 3 is very complex as it conflates what Alice is paying Bob with the fees and taxes they pay to other parties. We could make this easier by splitting this transaction into two smaller ones:</p>

<div><pre><code>| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Bank    | 1           | Alice's opening balance    | 2024-01-01 |          | $100     |
| Bank    | 2           | Bob's opening balance      | 2024-01-01 |          | $50      |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Alice   | 1           | Opening balance            | 2024-01-01 | $100     |          |
| Alice   | 3           | Bought book                | 2024-02-01 |          | $22      |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Bob     | 2           | Opening balance            | 2024-01-01 | $50      |          |
| Bob     | 3           | Sold book                  | 2024-02-01 | $19      |          |
| Bob     | 4           | Sales tax                  | 2024-02-01 |          | $2       |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| CC      | 3           | Transaction fee            | 2024-02-01 | $3       |          |

| Account | Transaction | Description                | Date       | Incoming | Outgoing |
| ------- | ----------  | -------------------------- | ---------- | -------- | -------- |
| Tax     | 4           | Bob's sales tax            | 2024-02-01 | $2       |          |
</code></pre></div>

<p>And as a graph:</p>

<p><img src="https://matheusportela.com/assets/images/double-entry-bookkeeping/Picture%204.drawio.svg" alt="Graph for the fourth example: simplified transactions"></p>

<p>We simplified the transactions a little bit:</p>
<ul>
  <li>Alice sees $22 leaving her account but Bob only receives $19. The remaining $3 goes to the credit card company.</li>
  <li>Bob pays sales taxes in a different transaction.</li>
</ul>

<p>Regardless of how we model the transactions, the account balances are the same. Alice has $78, Bob has $69, the tax authority has $2, and the credit card company has $3. It is the accountant’s job to decide how to group transactions and entries in a way that makes sense for the business as the bookkeeping system is flexible enough to accommodate different needs.</p>

<p>These simple examples show how we can visualize money flow in a double-entry bookkeeping system as a directed graph. The graph grows over time as new transactions are added but it’s properties remain the same. In my opinion, understanding bookkeeping as a graph is a powerful way to reason about many accounting concepts. Suddenly, things as <em>balance sheets</em>, <em>income statements</em>, and <em>cash flow statements</em> are just visualizations of this graph. Categories such as <em>assets</em>, <em>liabilities</em>, <em>equity</em>, <em>income</em>, and <em>expenses</em> are just groups of nodes in the graph and it is quite easy to understand whether credits or debits increase their balances. It’s a way to make accounting more intuitive and less intimidating to me!</p>

<p>We could go on and on with this example, adding more complexity to the transactions, creating new accounts, and visualizing the graph as it grows. But I think we did a great job today and should take a well-deserved break.</p>

<h2 id="takeaways">Takeaways</h2>

<p>In this article, we’ve covered the basics of bookkeeping. We started with a simple system that only kept track of balances, evolved it into a single-entry and, later, into a double-entry ledger system that models money flow between accounts. We’ve seen how to represent transactions as entries in a ledger and how to group related entries into transactions. Finally, we’ve seen how to visualize a double-entry ledger as a directed graph.</p>

<p>In the next article, we’ll dive deeper into basic accounting concepts and see how they relate to the graph representation we’ve seen here.</p>

<h2 id="resources">Resources</h2>

<p>When studying these concepts, I found the following resources particularly helpful:</p>
<ul>
  <li><a href="https://www.udemy.com/course/accounting-fsa-a-solid-foundation-for-a-career-in-finance/">Accounting &amp; Financial Statement Analysis: Complete Training</a>: A crash course in accounting in Udemy. It was my introduction to the topic and I highly recommend it.</li>
  <li><a href="https://link.springer.com/book/10.1007/978-1-349-20618-6">Mastering Accounting by George Bright and Michael Herbert</a>: A textbook that covers accounting from the basics to more advanced topics. Another great resource to deepen my understanding of accounting.</li>
  <li><a href="https://beancount.github.io/docs/the_double_entry_counting_method.html">Beancount’s documentation</a> has a great explanation of accounting as a graph over time. It was a big inspiration for this article.</li>
  <li><a href="https://www.moderntreasury.com/journal/accounting-for-developers-part-i">Modern Treasury</a> has a great series of articles that explain accounting concepts for developers. It is another big inspiration.</li>
  <li><a href="https://news.ycombinator.com/item?id=32495724">This particular thread on Hacker News</a>. Some comments are gold!</li>
  <li><a href="https://plaintextaccounting.org/">Plain text accounting</a> is a small but engaged community that uses plain text files and command-line tools to keep track of their finances. I use <a href="https://hledger.org/">hledger</a> for my personal finances.</li>
</ul>

</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Proton and Standard Notes are joining forces (120 pts)]]></title>
            <link>https://proton.me/blog/proton-standard-notes-join-forces</link>
            <guid>39988912</guid>
            <pubDate>Wed, 10 Apr 2024 10:01:14 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://proton.me/blog/proton-standard-notes-join-forces">https://proton.me/blog/proton-standard-notes-join-forces</a>, See on <a href="https://news.ycombinator.com/item?id=39988912">Hacker News</a></p>
<div id="readability-page-1" class="page"><div> <p><time datetime="2024-04-10T10:55:40">Published on April 10, 2024</time> </p> 
<p>At Proton, we have always been highly disciplined, focusing on how to best <a rel="" target="_self" href="https://proton.me/blog/sustaining-mission-over-time">sustain our mission over time<span>(new window)</span></a>. This job is incredibly difficult. Everything we create always takes longer and is more complex than it would be if we did it without focusing on privacy, and we generally have to do it with fewer resources. This also makes it a path that we walk alone as few other teams share our commitment to privacy and community and, therefore, understand the unique challenges we face day after day.</p>



<p>But we also know that making privacy the default online will take more than just us, which is why we’re always very excited to meet like-minded teams that are purpose and community-driven. In 2022, we met the team from <a rel="noreferrer noopener" target="_blank" href="https://simplelogin.io/">SimpleLogin<span>(new window)</span></a> and <a rel="" target="_self" href="https://proton.me/blog/proton-and-simplelogin-join-forces">joined forces<span>(new window)</span></a>, and today, <strong>we’re happy to announce that Standard Notes will also join us to advance our shared mission</strong>.</p>



<p><a rel="noreferrer noopener" target="_blank" href="https://standardnotes.com/">Standard Notes<span>(new window)</span></a>, as the name suggests, is an end-to-end encrypted note-taking application, available on mobile and desktop, that is used by over 300,000 people. Our personal notes often contain some of our most intimate and sensitive data, and protecting them with end-to-end encryption ensures that they always remain accessible only to you. This really makes Standard Notes complementary to the Proton ecosystem of services, and it is one that we have long used ourselves and are excited to introduce to the Proton community.</p>



<h2>What does this mean for Proton and Standard Notes users?</h2>



<p>Both Proton and Standard Notes share a strong commitment to our communities, so Standard Notes will remain open source, freely available, and fully supported. Prices are not changing, and if you have a current subscription to Standard Notes, it will continue to be honored. Proton aspires to do the right thing and be a responsible home for open-source projects, and just as we did with SimpleLogin, we are committed to preserving what makes Standard Notes special and much loved.</p>



<p>In the coming months, we hope to find ways to make Standard Notes more easily accessible to the Proton community. This way, in addition to protecting your email, calendar, files, passwords, and online activity, you can also protect your notes.</p>



<h2>Why Standard Notes</h2>



<p>Proton has long been guided by our unique values. We’ve always believed in putting people ahead of profits, from our start as a crowdfunded project created by scientists who met at CERN right up to the present day as we safeguard the privacy of over 100 million people. It’s hard enough to run a long-lasting and durable privacy company — even fewer have managed to do it without venture capital or other outside investors.</p>



<p>Standard Notes has been around since 2017 and has withstood the test of time. Standard Notes has also grown without venture capital funding and has demonstrated a commitment towards serving its community. This alignment in values is rare, and creates a natural fit to work together. We are proud to have the entire Standard Notes team join us on our journey, and we look forward to learning from them and growing stronger together. But most of all, we look forward to continuing to serve both the Proton and Standard Notes communities together in the years to come.</p>
 </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[U.S. imposes first-ever national drinking water limits on PFAS (130 pts)]]></title>
            <link>https://apnews.com/article/forever-chemicals-pfas-pollution-epa-drinking-water-1c8804288413a73bb7b99fc866c8fa51</link>
            <guid>39988718</guid>
            <pubDate>Wed, 10 Apr 2024 09:31:10 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://apnews.com/article/forever-chemicals-pfas-pollution-epa-drinking-water-1c8804288413a73bb7b99fc866c8fa51">https://apnews.com/article/forever-chemicals-pfas-pollution-epa-drinking-water-1c8804288413a73bb7b99fc866c8fa51</a>, See on <a href="https://news.ycombinator.com/item?id=39988718">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                                        <p>The Biden administration on Wednesday finalized strict limits on certain so-called “forever chemicals” in drinking water that will require utilities to reduce them to the lowest level they can be reliably measured. Officials say this will reduce exposure for 100 million people and help prevent thousands of illnesses, including cancers.</p><p>The rule is the first national drinking water limit on toxic PFAS, or perfluoroalkyl and polyfluoroalkyl substances, which are widespread and long lasting in the environment. </p><p>Health advocates praised the Environmental Protection Agency for not backing away from <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/epa-pfas-forever-chemicals-water-contamination-regulations-560d0ce3321e7fa8ed052f792c24f16f">tough limits the agency proposed last year</a></span>. But water utilities took issue with the rule, saying treatment systems are expensive to install and that customers will end up paying more for water.</p><p>Water providers are entering a new era with significant additional health standards that the EPA says will make tap water safer for millions of consumers — a Biden administration priority. The agency has also proposed <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/lead-epa-flint-discrimination-biden-white-house-ca10a72d628491fe03ec687432bf0b45">forcing utilities to remove dangerous lead pipes</a></span>. </p>




    

<p>Utility groups warn the rules will cost tens of billions of dollars each and <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/health-business-west-virginia-dementia-6770a6191b89b064bd77227e1b18639d">fall hardest on small communities with fewer resources</a></span>. Legal challenges are sure to follow. </p><p>EPA Administrator Michael Regan says the rule is the most important action the EPA has ever taken on PFAS.</p><p>“The result is a comprehensive and life-changing rule, one that will improve the health and vitality of so many communities across our country,” said Regan.</p>
    
<p>PFAS chemicals are hazardous because they don’t degrade in the environment and are linked to health issues such as low birth weight and liver disease, along with certain cancers. The EPA estimates the rule will cost about $1.5 billion to implement each year, but doing so will prevent nearly 10,000 deaths over decades and significantly reduce serious illnesses.</p>
    

<p>They’ve been used in everyday products including nonstick pans, firefighting foam and waterproof clothing. Although some of the most common types are phased out in the U.S., others remain. Water providers will now be forced to remove contamination put in the environment by other industries.</p><p>“It’s that accumulation that’s the problem,” said Scott Belcher, a North Carolina State University professor who researches PFAS toxicity. “Even tiny, tiny, tiny amounts each time you take a drink of water over your lifetime is going to keep adding up, leading to the health effects.”</p><p>PFAS is a broad family of chemical substances, and the new rule sets strict limits on two common types — called PFOA and PFOS — at 4 parts per trillion. Three other types that include GenEx Chemicals that are a major problem in North Carolina are limited to 10 parts per trillion. Water providers will have to test for these PFAS chemicals and tell the public when levels are too high. Combinations of some PFAS types will be limited, too. </p><p>Regan will announce the rule in Fayetteville, North Carolina, on Wednesday.</p><p>Environmental and health advocates praised the rule, but said PFAS manufacturers knew decades ago the substances were dangerous yet hid or downplayed the evidence. Limits should have come sooner, they argue. </p>
    

<p>“Reducing PFAS in our drinking water is the most cost effective way to reduce our exposure,” said Scott Faber, a food and water expert at Environmental Working Group. “It’s much more challenging to reduce other exposures such as PFAS in food or clothing or carpets.”</p><p>Over the last year, EPA has periodically released batches of utility test results for PFAS in drinking water. Roughly 16% of utilities found at least one of the two strictly limited PFAS chemicals at or above the new limits. These utilities serve tens of millions of people. The Biden administration, however, expects about 6-10% of water systems to exceed the new limits.</p><p>Water providers will generally have three years to do testing. If those test exceed the limits, they’ll have two more years to install treatment systems, according to EPA officials.</p><p>Some funds are available to help utilities. Manufacturer 3M recently agreed to <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/pfas-drinking-water-settlement-3m-fa41cadfe0d65b9723377a681df43af1">pay more than $10 billion to drinking water providers</a></span> to settle PFAS litigation. And the Bipartisan Infrastructure Law includes billions to combat the substance. But utilities say more will be needed.</p>
    

<p>For some communities, tests results were a surprise. Last June, a utility outside Philadelphia that serves nearly 9,000 people learned that one of its wells had a PFOA level of 235 parts per trillion, among the highest results in the country at the time.</p><p>“I mean, obviously, it was a shock,” said Joseph Hastings, director of the joint public works department for the Collegeville and Trappe boroughs, whose job includes solving problems presented by new regulations.</p><p>The well was quickly yanked offline, but Hastings still doesn’t know the contamination source. Several other wells were above the EPA’s new limits, but lower than those the state of Pennsylvania set earlier. Now, Hastings says installing treatment systems could be a multi-million dollar endeavor, a major expense for a small customer base.</p>
    

<p>The new regulation is “going to throw public confidence in drinking water into chaos,” said Mike McGill, president of WaterPIO, a water industry communications firm.</p><p>The American Water Works Association, an industry group, says it supports the development of PFAS limits in drinking water, but argues the EPA’s rule has big problems. </p><p>The agency underestimated its high cost, which can’t be justified for communities with low levels of PFAS, and it’ll raise customer water bills, the association said. Plus, there aren’t enough experts and workers — and supplies of filtration material are limited.</p><p>Work in some places has started. The company Veolia operates utilities serving about 2.3 million people across six eastern states and manages water systems for millions more. Veolia built PFAS treatment for small water systems that serve about 150,000 people. The company expects, however, that roughly 50 more sites will need treatment — and it’s working to scale up efforts to reduce PFAS in larger communities it serves.</p><p>Such efforts followed <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/article/pfas-epa-water-regulations-d2d5052c36a5a95f4e56866f028c9c4f">dramatic shifts in EPA’s health guidance</a></span> for PFAS in recent years as more research into its health harms emerged. Less than a decade ago, EPA issued a health advisory that PFOA and PFOS levels combined shouldn’t exceed 70 parts per trillion. Now, the agency says no amount is safe.</p><p>Public alarm has increased, too. In Minnesota, for example, Amara’s Law aims to stop avoidable PFAS use. It’s been nearly a year since the law’s namesake, Amara Strande, died from a rare cancer her family blames on PFAS contamination by 3M near her high school in Oakdale, although a connection between PFAS and her cancer can’t be proven. Biden administration officials say communities shouldn’t suffer like Oakdale. 3M says it extends its deepest condolences to Amara’s friends and family.</p><p>Losing Amara pushed the family towards activism. They’ve testified multiple times in favor of PFAS restrictions. </p><p>“Four parts per trillion, we couldn’t ask for a better standard,” Amara’s sister Nora said. “It’s a very ambitious goal, but anything higher than that is endangering lives.”</p><h2>___</h2><p>Associated Press data journalist Camille Fassett in San Francisco and reporter Matthew Daly in Washington D.C. contributed to this story.</p><h2>___</h2><p>The Associated Press receives support from the Walton Family Foundation for coverage of water and environmental policy. The AP is solely responsible for all content. For all of AP’s environmental coverage, visit <span><a data-gtm-enhancement-style="LinkEnhancementA" href="https://apnews.com/hub/environment">https://apnews.com/hub/climate-and-environment</a></span></p>
                                    </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Deep Bug (204 pts)]]></title>
            <link>https://www.marginalia.nu/log/a_104_dep_bug/</link>
            <guid>39988716</guid>
            <pubDate>Wed, 10 Apr 2024 09:30:59 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.marginalia.nu/log/a_104_dep_bug/">https://www.marginalia.nu/log/a_104_dep_bug/</a>, See on <a href="https://news.ycombinator.com/item?id=39988716">Hacker News</a></p>
<div id="readability-page-1" class="page"><div id="content"><p>The project has been haunted by a mysterious bug since sometime February. It relates to the code that constructs the index, particularly the code that merges partial indices.</p><p>In short the search engine constucts the reverse index through successive merging of smaller indices, which reduces the overall memory requirement.</p><p>You can conceptualize the revese index itself as two files, one with offset pointers into another file, which has sorted numbers. This code runs after each partition finishes crawling and processing its data, and has a run time of about 4 hours.</p><p>Suddenly the code that merges the indexes started to randomly fail.</p><p>What failed was the code that copies sorted numbers from one of the older indices to one of the newer, in the case when a keyword is present in only one of the indexes and no actual merging of sorted lists is needed.</p><p>If code suddenly starts acting up when the amount of data increases, all my intuition screams that this must be a 32 bit integer overflow. The index construction does all of its work in the bermuda triangle of 32 bit errors that is 1-32 GB file size range, so it really does seem like a very probable suspect.</p><p>I went over the code looking for such a thing, and found nothing. I added a bunch of guard clauses and assertions to get some hint about what was going on, but these didn’t turn up much other than the copy operation attempting to copy outside the file.</p><p>To my surprise, while doing this the construction process suddenly went through! The index it constructed was sane. Had I fixed it by perturbing the code somehow? I ran it again and it failed.</p><p>Some non-determinism is expected since the indexes are merged in parallel, so the order they’re merged in is a bit random even if the merging itself is completely deterministic. I felt this explained the random success: I got lucky with the ordering.</p><p>Since I had a work-around I left this be for a while. I had other work that was more pressing. The seven remaining partitions were coaxed through by just hitting the restart button until it worked, taking one or more days of hammering restarts. Annoying and time consuming, but it worked.</p><p>This week the final partition came through, and I had a moment to look deeper into this enigma.</p><p>Maybe it wasn’t an integer overflow? I checked the git log for any suspect changes between December when it worked and February when it didn’t work, and I found nothing. Again I combed over the code looking for integer overflows, and still found nothing.</p><p>I did find a function that shrinks the merged index, which is initially allocated to be the total size of the inputs. Since the merge function removes duplicates, the merged index is often smaller than the sum of its parts, but it’s impossible to know how small before actually merging.</p><p>This seemed like a plausible explanation, since if the files were truncated too hard, it would explain the files seemingly being “too small”. I disabled the truncation, and still got errors.</p><p>In investigating this, I stumbled on a very curious aberration. I’ll sketch out the gist of it:</p><div><pre tabindex="0"><code data-lang="java"><span><span>
</span></span><span><span>val <span>=</span> read<span>-</span>only mmapped file 
</span></span><span><span>      not subject to change
</span></span><span><span>counts <span>=</span> zeroed mmap<span>:</span>ed file 
</span></span><span><span>
</span></span><span><span><span>long</span> offset <span>=</span> 0<span>;</span>
</span></span><span><span><span>for</span> <span>(</span><span>int</span> i <span>=</span> 0<span>;</span> i <span>&lt;</span> length<span>;</span> i<span>++)</span> <span>{</span>
</span></span><span><span>  counts<span>[</span>i<span>]</span> <span>=</span> val<span>[</span>i<span>];</span>
</span></span><span><span>  offset <span>+=</span> val<span>[</span>i<span>];</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>long</span> size <span>=</span> 0<span>;</span>
</span></span><span><span><span>for</span> <span>(</span><span>int</span> i <span>=</span> 0<span>;</span> i <span>&lt;</span> length<span>;</span> i<span>++)</span> <span>{</span>
</span></span><span><span>   size <span>+=</span> counts<span>[</span>i<span>];</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>// ...
</span></span></span><span><span><span></span>
</span></span><span><span><span>assert</span> <span>(</span>size <span>==</span> offset<span>);</span>
</span></span><span><span>
</span></span><span><span><span>// ...
</span></span></span><span><span><span></span>
</span></span><span><span>truncate<span>(</span>size<span>);</span>
</span></span></code></pre></div><p>All this runs in sequence on the same thread, and nothing writes to <code>counts</code> other than this code.</p><p>The assertion would fail.</p><p>Alright, so it is an integer overflow! … you might think. Nope. These are all 64 bit longs, and the values being added are small and few enough not to overflow a 32 bit integer. At this point I could reliably isolate the particular inputs that triggered the behavior with the assert, so I did just that.</p><p>There are four lights, damnit!</p><p>At this point I patched production so that if this assertion were to fail, the input files were copied over to a separate directory. This gave me a 2 GB set of test-data that had been known to trigger the error that I could exfiltrate and examine locally.</p><p>The bug of course did not re-appear when I ran this code in isolation, but that actually says something important. I’d reduced the problem down to deterministic code being non-deterministic and outputting logical contradictions. This feels like a good reason to question other things than the program logic.</p><p>It’s probably safe to assume the problem is either the JVM, the linux kernel, or the hardware, in decreasing order of likelihood.</p><p>The JVM is at the top of the suspect list since one of the things that <em>had</em> in fact changed since the bug appeared was that the project migrated over to graalvm from openjdk.</p><p>Hardware errors typically don’t target only a specific function over and over, except I guess if you have some Homer-style divine grudge going on. Having not skipped over any libations, enraged gods could probably be ruled out, and to further sow doubts about this I was able to reproduce the error on another machine, not with the exfiltrated data but through reindexing Wikipedia’s data repeatedly. This also probably rules out some sort of linux kernel bug, since the kernels were a few versions apart; one machine was SMP and the other was not, one with ECC one not, etc.</p><p>So at this point the only remaining suspect on my list was the graalvm JDK. I migrated the project to the latest graalvm version, from jdk-21 to jdk-22 through oracle’s official docker images. This did absolutely nothing to address the problem. I switched the docker build process to use a temurin (openjdk) image instead of graalvm, and… the problem went away! Since then, it’s worked over and over.</p><p>At this point I’d love to file a bug report, although I’m having trouble isolating the problem enough to do so. “Doesn’t work” is famously not an error description. The relevant process is something like 5 KLOC, and the smallest dataset that triggers the bug somewhat reliably is about 54 GB.</p><p>I’ve isolated the code that manifests the bug and run it 50,000 times on the data exfiltrated from production on a machine that’s previously been able to trigger the problem, and it’s run without a hitch, so there appears to be some sort of spooky action at a distance going on. I’ve tried perturbing it in various ways, introducing page faults and so on, since that’s happening a lot in production, again to no avail.</p><p>In general I’d argue you haven’t fixed a bug unless you understand why it happened and why your fix worked, which makes this frustrating, since every indication is that the bug exists within proprietary code that is out of my reach. This feels like an impasse, not a solution, even though the error has nominally been corrected.</p><p>I can at least say make statements about what hasn’t caused the error.</p></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Client libraries are better when they have no API (141 pts)]]></title>
            <link>https://csvbase.com/blog/7</link>
            <guid>39988580</guid>
            <pubDate>Wed, 10 Apr 2024 09:10:24 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://csvbase.com/blog/7">https://csvbase.com/blog/7</a>, See on <a href="https://news.ycombinator.com/item?id=39988580">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
        <p>When I met a friend in a pub recently and I told him I was writing a client
library for csvbase, he did laugh a bit.  "Can't people just use curl?"</p>
<p>It's true.  On csvbase, you can just curl any table url and get a csv file.
Through the magic of HTTP, this web-page:</p>
<p><img src="https://csvbase.com/blog-static/stock-exchanges.png" alt="screenshot of csvbase table web
page"></p>
<p>becomes this csv file inside curl:</p>
<p><img src="https://csvbase.com/blog-static/curl.png" alt="screenshot of csvbase table in
curl"></p>
<p>[For details of how that trick works, see <a href="https://csvbase.com/blog/2">an older
blog post</a>]</p>
<p>That barely qualifies as an API, it's just HTTP.  So what possible use could a
client library be?</p>
<p>And of course client libraries add mental overhead of their own.  You have to
read some docs, learn some methods and then and the end you still have to add
some code to use whatever library it is.</p>
<p>Wouldn't you rather just not?</p>
<p>I would certainly rather not.  With that in mind, I've written a client library
that has no API.</p>
<h2>No API</h2>
<p>Wait, no API?:</p>
<div><pre><span></span><span>&gt;&gt;&gt;</span> <span>import</span> <span>pandas</span> <span>as</span> <span>pd</span>
<span>&gt;&gt;&gt;</span> <span>df</span> <span>=</span> <span>pd</span><span>.</span><span>read_csv</span><span>(</span><span>"csvbase://calpaterson/onion-vox-pops"</span><span>)</span>
<span>&gt;&gt;&gt;</span> <span>df</span><span>.</span><span>quote</span><span>[</span><span>0</span><span>]</span>
<span>"""I realize passengers are concerned, but speaking as a pilot,</span>
<span>there's no better place to drop acid than 40,000 feet in the air."""</span>
</pre></div>
<p>(A man after my own heart.)</p>
<p>But yes, no API.  I resent writing data APIs anyway (that's why I wrote
csvbase - to do it once, generically).  So if you want, just pull dataframes
down from csvbase with Pandas itself.  pip install
<a href="https://pypi.org/project/csvbase-client/"><code>csvbase-client</code></a> and Pandas will
suddenly learn the <code>csvbase://</code> url scheme.</p>
<p>And what if you want to write a dataframe to csvbase?  Is there an API for
that?  Again: no.  You call the usual method: <code>DataFrame.to_csv</code>:</p>
<div><pre><span></span><span>&gt;&gt;&gt;</span> <span>import</span> <span>string</span>  <span># from the stdlib</span>
<span>&gt;&gt;&gt;</span> <span>alphabet_df</span> <span>=</span> <span>pd</span><span>.</span><span>DataFrame</span><span>(</span><span>zip</span><span>(</span><span>range</span><span>(</span><span>1</span><span>,</span> <span>27</span><span>),</span> <span>string</span><span>.</span><span>ascii_lowercase</span><span>),</span>\
    <span>columns</span><span>=</span><span>(</span><span>"number"</span><span>,</span> <span>"letter"</span><span>))</span><span>.</span><span>set_index</span><span>(</span><span>"number"</span><span>)</span>
<span>&gt;&gt;&gt;</span> <span>alphabet_df</span><span>.</span><span>to_csv</span><span>(</span><span>"csvbase://calpaterson/alphabet"</span><span>)</span>
</pre></div>
<p>You do admittedly need to put your csvbase username and <strong>API key</strong> into
<code>~/.netrc</code> first.  Here's mine:</p>
<div><pre><span></span><span>machine csvbase.com</span><span></span>
<span>  </span><span>login calpaterson</span><span></span>
<span>  </span><span>password hunter42</span><span></span>
</pre></div>
<p>You can check up on <code>calpaterson/alphabet</code>: it's a <a href="https://csvbase.com/calpaterson/alphabet">real table on
csvbase.com</a> now.</p>
<p>But perhaps you don't like Pandas.  You prefer <a href="https://pola.rs/">Polars</a>, that
other dataframe library.  Again: I refuse to write an API.  You can just use
Polars itself:</p>
<div><pre><span></span><span>&gt;&gt;&gt;</span> <span>import</span> <span>polars</span> <span>as</span> <span>pl</span>
<span>&gt;&gt;&gt;</span> <span>pl</span><span>.</span><span>read_csv</span><span>(</span><span>"csvbase://calpaterson/alphabet"</span><span>)</span>
<span>shape</span><span>:</span> <span>(</span><span>26</span><span>,</span> <span>3</span><span>)</span>
<span>┌────────────────┬────────┬────────┐</span>
<span>│</span> <span>csvbase_row_id</span> <span>┆</span> <span>number</span> <span>┆</span> <span>letter</span> <span>│</span>
<span>│</span> <span>---</span>            <span>┆</span> <span>---</span>    <span>┆</span> <span>---</span>    <span>│</span>
<span>│</span> <span>i64</span>            <span>┆</span> <span>i64</span>    <span>┆</span> <span>str</span>    <span>│</span>
<span>╞════════════════╪════════╪════════╡</span>
<span>│</span> <span>1</span>              <span>┆</span> <span>1</span>      <span>┆</span> <span>a</span>      <span>│</span>
<span>│</span> <span>2</span>              <span>┆</span> <span>2</span>      <span>┆</span> <span>b</span>      <span>│</span>
<span>│</span> <span>3</span>              <span>┆</span> <span>3</span>      <span>┆</span> <span>c</span>      <span>│</span>
<span>│</span> <span>4</span>              <span>┆</span> <span>4</span>      <span>┆</span> <span>d</span>      <span>│</span>
<span>│</span> <span>5</span>              <span>┆</span> <span>5</span>      <span>┆</span> <span>e</span>      <span>│</span>
<span>│</span> <span>…</span>              <span>┆</span> <span>…</span>      <span>┆</span> <span>…</span>      <span>│</span>
<span>│</span> <span>22</span>             <span>┆</span> <span>22</span>     <span>┆</span> <span>v</span>      <span>│</span>
<span>│</span> <span>23</span>             <span>┆</span> <span>23</span>     <span>┆</span> <span>w</span>      <span>│</span>
<span>│</span> <span>24</span>             <span>┆</span> <span>24</span>     <span>┆</span> <span>x</span>      <span>│</span>
<span>│</span> <span>25</span>             <span>┆</span> <span>25</span>     <span>┆</span> <span>y</span>      <span>│</span>
<span>│</span> <span>26</span>             <span>┆</span> <span>26</span>     <span>┆</span> <span>z</span>      <span>│</span>
<span>└────────────────┴────────┴────────┘</span>
</pre></div>
<p>What about <a href="https://docs.dask.org/en/stable/">Dask</a>?  Same thing:</p>
<div><pre><span></span><span>&gt;&gt;&gt;</span> <span>import</span> <span>dask.dataframe</span> <span>as</span> <span>dd</span>
<span>&gt;&gt;&gt;</span> <span>dd</span><span>.</span><span>read_csv</span><span>(</span><span>"csvbase://calpaterson/alphabet"</span><span>)</span>
<span>Dask</span> <span>DataFrame</span> <span>Structure</span><span>:</span>
              <span>csvbase_row_id</span> <span>number</span>  <span>letter</span>
<span>npartitions</span><span>=</span><span>1</span>
                       <span>int64</span>  <span>int64</span>  <span>string</span>
                         <span>...</span>    <span>...</span>     <span>...</span>
<span>Dask</span> <span>Name</span><span>:</span> <span>read_csv</span><span>,</span> <span>1</span> <span>expression</span>
<span>Expr</span><span>=</span><span>ReadCSV</span><span>(</span><span>16</span><span>ad101</span><span>)</span>
</pre></div>
<p>I imported <code>pandas as pd</code>, I imported <code>polars as pl</code> and I imported
<code>dask.dataframe as dd</code>.  But I didn't import <code>csvbase_client</code>.  Unnecessary -
there is no API.</p>
<h2>Enter fsspec</h2>
<p>How is this all working?  Have I perpetrated a kind of grand, <a href="https://www.wired.com/story/jia-tan-xz-backdoor/">Jia Tan</a>-style
jedi mind trick on the maintainers of these dataframe libraries, secretly
sneaking csvbase-specific code into their repos?</p>
<p>I haven't.  All of these dataframe libraries (and probably others I haven't
thought of) use a standard filesystem interface library, called
<a href="https://github.com/fsspec/filesystem_spec/">fsspec</a>.  csvbase-client just
implements an adaptor for fsspec:</p>
<div><pre><span></span><span>from</span> <span>fsspec.spec</span> <span>import</span> <span>AbstractFileSystem</span><span>,</span> <span>AbstractBufferedFile</span>

<span>class</span> <span>CSVBaseFileSystem</span><span>(</span><span>AbstractFileSystem</span><span>):</span>
    <span>def</span> <span>_open</span><span>(</span><span>self</span><span>,</span> <span>path</span><span>,</span> <span>mode</span><span>=</span><span>"rb"</span><span>):</span>
        <span>return</span> <span>CSVBaseFile</span><span>(</span><span>self</span><span>,</span> <span>path</span><span>,</span> <span>mode</span><span>)</span>

<span>class</span> <span>CSVBaseFile</span><span>(</span><span>AbstractBufferedFile</span><span>):</span>
    <span>def</span> <span>_fetch_range</span><span>(</span><span>self</span><span>,</span> <span>start</span><span>:</span> <span>int</span><span>,</span> <span>end</span><span>:</span> <span>int</span><span>)</span> <span>-&gt;</span> <span>bytes</span><span>:</span>
        <span>...</span>
</pre></div>
<p>fsspec already comes with built-in adaptors for <a href="https://calpaterson.com/s3.html">object
stores</a>, webdav, Github, Dropbox and lots
more.  It's a pretty nice abstraction layer.  csvbase's client is just one more
adaptor.</p>
<p>For whatever reason, fsspec is not that well known.  It has less than 800 stars
<a href="https://github.com/fsspec/filesystem_spec/">on github</a>.  But it is well used:
it's downloaded <a href="https://pypistats.org/packages/fsspec">more than 8 million times a
day</a>, usually as an automatically
installed dependency of other libraries.  That actually makes it the 20th most
popular Python package - bigger in fact than Pandas.</p>
<p>At any rate, after my classes are written it just takes a short setuptools
incantation to wire my classes into place upon package install:</p>
<div><pre><span></span><span>from</span> <span>setuptools</span> <span>import</span> <span>setup</span>
<span>setup</span><span>(</span>
  <span>name</span><span>=</span><span>"csvbase-client"</span><span>,</span>
  <span>...</span><span>,</span> <span># [snip]</span>
  <span>entry_points</span><span>=</span><span>{</span>
    <span>"fsspec.specs"</span><span>:</span> <span>[</span>
      <span>"csvbase=csvbase_client.fsspec.CSVBaseFileSystem"</span><span>,</span>
    <span>],</span>
  <span>},</span>
<span>)</span>
</pre></div>
<p>Or in pyproject.toml:</p>
<div><pre><span></span><span>[project.entry-points."fsspec.specs"]</span><span></span>
<span>csvbase</span><span> </span><span>=</span><span> </span><span>"csvbase_client.fsspec.CSVBaseFileSystem"</span><span></span>
</pre></div>
<p>With all this working, the <code>csvbase://</code> url scheme becomes real and you can use
it inside anything which relies on fsspec, which is a surprisingly large number
of things.</p>
<h2>How to use fsspec in your own programs</h2>
<p>fsspec is pretty nice.  It's very useful when you want, for example, to write a
cli program that can write both to a file, and then later an S3 object.</p>
<p>Instead of calling the Python built-in <code>open</code>, you call <code>fsspec.open</code>.  It is a
mostly drop-in replacement.</p>
<div><pre><span></span><span>import</span> <span>fsspec</span>

<span>with</span> <span>fsspec</span><span>.</span><span>open</span><span>(</span><span>"csvbase://calpaterson/onion-vox-pops"</span><span>)</span> <span>as</span> <span>vox_pops_f</span><span>:</span>
   <span>print</span><span>(</span><span>vox_pops_f</span><span>.</span><span>read</span><span>(</span><span>100</span><span>))</span>
</pre></div>
<p>That's it.  It is extremely simple to integrate against.</p>
<p>There isn't just <code>open</code>, either, but <code>touch</code>, <code>rm</code>, <code>cp</code>, <code>mv</code> - the whole
gang.  <code>csvbase-client</code>'s support doesn't cover all of these yet, but that is
planned.</p>
<h2>And there's a cli tool</h2>
<p>I can't get out of writing a cli tool for csvbase.  There is no way to avoid
that - but I did make it a thin veneer over fsspec.</p>
<div><pre><span></span>$ csvbase-client table get calpaterson/alphabet
csvbase_row_id,number,letter
<span>1</span>,1,a
<span>2</span>,2,b
<span>3</span>,3,c
<span>[</span>you know the rest<span>]</span>
</pre></div>
<p>But <a href="https://csvbase.com/blog/5">other examples</a> are more fun:</p>
<div><pre><span></span>$ csvbase-client table get calpaterson/eurofxref-hist <span>|</span> <span>\</span>
grep USD <span>|</span> <span>\</span>
cut -d, -f <span>2</span>,4 <span>|</span> <span>\</span>
gnuplot -e <span>"set datafile separator ','; set term dumb; \</span>
<span>plot '-' using 1:2 with lines title 'usd'"</span>
</pre></div>
<p><img src="https://csvbase.com/blog-static/dumb-term.png" alt="a gnuplot graph in drawn in the
terminal"></p>
<h2>The bytes on the internet are free and you can take them home with you</h2>
<p>As with <a href="https://github.com/calpaterson/csvbase">csvbase proper</a>,
<a href="https://github.com/calpaterson/csvbase-client">csvbase-client</a> is open source,
so you can just <a href="https://github.com/calpaterson/csvbase-client/blob/main/csvbase_client/fsspec.py">take my
code</a>
as a starting point and write your own fsspec APIs.</p>
<p>I'm looking forward to expanding on it in future.  I'm particularly keen to use
fsspec to <a href="https://filesystem-spec.readthedocs.io/en/latest/features.html#mount-anything-with-fuse">mount csvbase.com as a
filesystem</a>
via FUSE.  That sounds fun.</p>
<p>Help me out:</p>
<ul>
<li>try <a href="https://pypi.org/project/csvbase-client/">csvbase-client</a></li>
<li>
do me a solid by <a href="https://github.com/calpaterson/csvbase-client">starring csvbase-client on
github</a><ul>
<li>star the <a href="https://github.com/calpaterson/csvbase">main
project</a> as well if you're feeling
extra generous</li>
<li>regardless, shoot <a href="https://github.com/fsspec/filesystem_spec/">fsspec</a> a
github star because they did almost the work</li>
</ul>
</li>
<li><a href="mailto:cal@calpaterson.com">email me your thoughts</a></li>
<li>or <a href="https://github.com/calpaterson/csvbase-client/issues">file bugs on github</a></li>
</ul>

      </div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Microsoft employees exposed internal passwords in security lapse (152 pts)]]></title>
            <link>https://techcrunch.com/2024/04/09/microsoft-employees-exposed-internal-passwords-security-lapse/</link>
            <guid>39988415</guid>
            <pubDate>Wed, 10 Apr 2024 08:46:40 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://techcrunch.com/2024/04/09/microsoft-employees-exposed-internal-passwords-security-lapse/">https://techcrunch.com/2024/04/09/microsoft-employees-exposed-internal-passwords-security-lapse/</a>, See on <a href="https://news.ycombinator.com/item?id=39988415">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
				<p id="speakable-summary">Microsoft has resolved a security lapse that exposed internal company files and credentials to the open internet.</p>
<p>Security researchers Can Yoleri, Murat Özfidan and Egemen Koçhisarlı with SOCRadar, a cybersecurity company that helps organizations find security weaknesses, discovered an open and public storage server hosted on Microsoft’s Azure cloud service that was storing internal information relating to Microsoft’s Bing search engine.</p>
<p>The Azure storage server housed code, scripts and configuration files containing passwords, keys and credentials used by the Microsoft employees for accessing other internal databases and systems.</p>
<p>But the storage server itself was not protected with a password and could be accessed by anyone on the internet.</p>
<p>Yoleri told TechCrunch that the exposed data could potentially help malicious actors identify or access other places where Microsoft stores its internal files. Identifying those storage locations “could result in more significant data leaks and possibly compromise the services in use,” Yoleri said.</p>
<p>The researchers notified Microsoft of the security lapse on February 6, and Microsoft secured the spilling files on March 5.</p>
<p>It’s not known for how long the cloud server was exposed to the internet, or if anyone other than SOCRadar discovered the exposed data inside. When reached by email, a spokesperson for Microsoft did not provide comment by the time of publication. Microsoft did not say if it had reset or changed any of the exposed internal credentials.</p>
<p>This is the latest security gaffe at Microsoft as the company tries to rebuild trust with its customers after a series of cloud security incidents in recent years. In a similar security lapse last year, researchers found that <a href="https://www.vice.com/en/article/m7gb43/microsoft-employees-exposed-login-credentials-azure-github" target="_blank" rel="noopener">Microsoft employees were exposing their own corporate network logins</a> in code published to GitHub.</p>
<p>Microsoft also came under fire last year after the company admitted it did not know <a href="https://techcrunch.com/2023/09/08/microsoft-hacker-china-government-storm-0558/">how China-backed hackers stole an internal email signing key</a> that allowed the hackers broad access to Microsoft-hosted inboxes of senior U.S. government officials. An independent board of cyber experts tasked with investigating the email breach wrote in their report, published last week, that the hackers succeeded because of a “cascade of security failures at Microsoft.”</p>
<p>In March, Microsoft said that <a href="https://techcrunch.com/2024/03/08/microsoft-ongoing-cyberattack-russia-apt-29/">it continues to counter an ongoing cyberattack</a> that allowed Russian state-backed hackers to steal portions of the company’s source code and internal emails from Microsoft corporate executives.</p>
			</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Verified curl (141 pts)]]></title>
            <link>https://daniel.haxx.se/blog/2024/04/10/verified-curl/</link>
            <guid>39988269</guid>
            <pubDate>Wed, 10 Apr 2024 08:20:30 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://daniel.haxx.se/blog/2024/04/10/verified-curl/">https://daniel.haxx.se/blog/2024/04/10/verified-curl/</a>, See on <a href="https://news.ycombinator.com/item?id=39988269">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
		
<p>Don’t trust. Verify.</p>


<div>
<figure><a href="https://daniel.haxx.se/blog/wp-content/uploads/2024/04/state-sponsor-your-open-source.png"><img decoding="async" width="1979" height="2800" src="https://daniel.haxx.se/blog/wp-content/uploads/2024/04/state-sponsor-your-open-source.png" alt=""></a><figcaption><em>I could not resist making a fake book cover</em></figcaption></figure></div>


<p>Here follows a brief description on how you can detect if the curl package would ever <a href="https://en.wikipedia.org/wiki/XZ_Utils_backdoor">make an xz</a>.</p>



<p>xz (and its library liblzma) was presumably selected as a target because it is an often used component and by extension via systemd it often used by openssh in several Linux distros. libcurl is probably an even more widely used software component and if infected, could potentially serve as an effective vessel to distribute evil into the world.</p>



<p>Conceivably, the xz attackers have infiltrated more than one other Open Source project to cover their bases. Which ones?</p>



<h2>No inexplicable binary blobs</h2>



<p>First, you can verify that there are no binary blobs stored in git that could host an encrypted attack payload, planted there for the future.</p>



<p>Every file in <a href="https://github.com/curl/curl">the curl git repository</a> has a benign meaning and purpose. As part of the products, the documentation, tooling or the test suites etc.</p>



<p>Without any secret “hide-out” in the git repository, you know that any backdoor needs to be provided either in plain code or using some crazy weird <a href="https://en.wikipedia.org/wiki/Steganography">steganography</a>. Or get inserted into the tarballs with content not present in git – read on for how to verify that this is not happening.</p>



<h2>No disabled fuzzers</h2>



<p>The xz attack would have been detected by proper fuzzing (and valgrind use) which is why the attacker made sure to sneakily disable such automated checks of code that was present in git.</p>



<p>While somewhat hard to verify, you can make sure that no such activities have been done in curl’s fuzzing or curl’s automated and CI testing,</p>



<h2>No hidden payloads in tarballs</h2>



<p>In the curl project we <em>generate</em> several files as part of the release process and those files end up in the release tarball. This means that not all files in the tarball are found in the git repository. (Because we don’t commit generated files.)</p>



<p>The generated files are produced with a small set of tools, and these tools use the source code available in git at the release tag. Anyone can check out the same code from that same release tag, make sure to have the corresponding tools (and versions) installed and then generate a version of the tarball themselves – to verify that this tarball indeed becomes an identical copy of the public release.</p>



<p>That process verifies that the tarballs we ship are generated only with legitimate tools and that the release contents originate only from the files present in git. No secret sauce added in the process. No malicious code can get inserted.</p>



<h2>Reproducible tarballs</h2>



<p>We have recently improved reproducibility as a direct result of the post xz-attack debate. To make sure that a repeated tarball creation actually produces the exact same results, but also to make it easier for others to verify our release tarballs. With more documentation (releases now contain documentation of exactly which tools and versions that generated the tarball) and by making it easier to run the exact same virtual machine and tool setup like the one that created the release. We aim to soon <a href="https://github.com/curl/curl/pull/13250">provide a Dockerfile</a> to make this process even smoother.</p>



<p>We also verify tarball reproducibility in a CI job: generating a release tarball with a given timestamp produces the identical binary output when done again for the same timestamp.</p>



<h2>Signed tarballs</h2>



<p>As an extra detail, everyone can also verify that the released tarballs are in fact shipped by me Daniel personally, as they are always signed with my GPG key as part of the release process. This should at least prove that new releases are made with the same keys as previous ones were, which should with a reasonable probability be me.</p>



<p>The signatures also help verify that the tarballs have not been tampered with in transition, from the point I generated them to the moment they land in your download directory. curl downloads are normally distributed via a third-party CDN which we normally trust of course, but if it would ever be breached or similar, a modified tarball would be detected when the digital signature is verified.</p>



<p>We do not provide checksums for the tarballs simply because providing checksums next to the downloads adds almost no extra verification. If someone can tamper with the tarballs, they can probably update the webpage which a fake checksum as well.</p>



<h2>Signed commits</h2>



<p>All commits done to curl done by me are signed, You can verify that I did them. Not all committers in the project do them signed, unfortunately. We hope to increase the share going forward. Over the last 365 days, 73% of the curl commits were signed.</p>



<p>These signatures only verify that the commits where done by a maintainer of the curl project (or someone who controls that account). A maintainer you may not trust and who might not be known under their real name and you do not even know in which country they live. And of course, even a trusted maintainer can suddenly go rogue.</p>



<h2>Is the content in git benign?</h2>



<p>The process above only verifies that tarballs are indeed generated (only) from contents present in git and that they are unaltered from the moment I made them.</p>



<p>How do you know that the contents in git does not contain any backdoors or other vulnerabilities?</p>



<p>Without trusting anyone else’s opinions and without just relying on the fact that you can run the test suite, fuzzers and static code analyzers without finding anything, you can review it. Or pay someone else to review it.</p>



<p>We have had <a href="https://curl.se/docs/audits.html">curl audited several times</a> by external organizations, but can you trust claimed random audits?</p>



<h2>Anonymous contributors</h2>



<p>We regularly accept contributions from anonymous and pseudonymous contributors in curl – and we always have. Our policy says that if a contribution is good: if it passes review and all tests run green, we have no reason to deny it – in the name of progress and improvement. That is also why we accept even single-letter typo fixes: even a very small fix is a step in the right direction.</p>



<p>A (to me) surprisingly large amount of contributions are done by people who do not state a full real name. They may chose to be anonymous for various reasons – we do not ask. Maybe they fear retaliation if they would propose something that ends up buggy? Sometimes people want to hide their affiliation/origin so that their contribution is not associated with the organization they work at. Another reason sometimes mentioned is that women do it to avoid revealing themselves as female. etc. As  I said: we do not ask so I cannot tell for sure.</p>



<h2>Anonymous maintainers</h2>



<p>We do not have anonymous maintainers, but we don’t actually have rules against it.</p>



<p>Right now, we have 18 members in the GitHub curl organization with the <em>rights</em> to push commits. I have not met all of them. I have not even seen the faces of all of them. They have all proven themselves worthy of their administrative rights based on their track record. I cannot know if anyone of them is using a false identity and I do not ask nor keep track in which country they reside. A former top maintainer in the curl projected even landed a large amount of changes under a presumed/false name during several years.</p>



<p>If a curl maintainer suddenly goes rogue and attempts to land malicious content, our only effective remedy is review. To rely on the curl community to have eyes on the changes and to test things.</p>



<h2>Can curl be targeted?</h2>



<p>I think it would be very hard but I can of course not rule it out. Possibly I am also blind for our weaknesses because I have lived with them for so long.</p>



<p>Everyone can help the greater ecosystem by verifying a package or two. If we all tighten all screws just a little bit more, things will get better.</p>



<h2>Vulnerabilities</h2>



<p>I maintain that planting a backdoor in curl code is so infuriatingly hard to achieve that efforts and energy are probably much rather spent on  finding security vulnerabilities and ways to exploit them. After all, we have <a href="https://curl.se/docs/security.html">155 published past vulnerabilities</a> in curl so far, out of which 42 have been at severity high or critical.</p>



<p>I can be fairy sure that none of those 42 somewhat serious issues were deliberately planted, because just about every one of them were found in code that I personally authored…</p>



<p>People often ask. But I have <strong>never</strong> seen a backdoor attempt in curl. Maybe that is just me being naive.</p>



<h2>Credits</h2>



<p>Top Image by <a href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=8577615">Gerd Altmann</a> from <a href="https://pixabay.com//?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=8577615">Pixabay</a>. Fake book cover by Daniel Stenberg.</p>
	</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Three major LLM releases in 24 hours (122 pts)]]></title>
            <link>https://simonwillison.net/2024/Apr/10/weeknotes-llm-releases/</link>
            <guid>39987769</guid>
            <pubDate>Wed, 10 Apr 2024 07:01:34 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://simonwillison.net/2024/Apr/10/weeknotes-llm-releases/">https://simonwillison.net/2024/Apr/10/weeknotes-llm-releases/</a>, See on <a href="https://news.ycombinator.com/item?id=39987769">Hacker News</a></p>
<div id="readability-page-1" class="page"><div data-permalink-context="/2024/Apr/10/weeknotes-llm-releases/">

<p>10th April 2024</p>

<p>I’m a bit behind on my <a href="https://simonwillison.net/tags/weeknotes/">weeknotes</a>, so there’s a lot to cover here. But first... a review of the last 24 hours of Large Language Model news. All times are in US Pacific.</p>
<ul>
<li>11:01am: Google Gemini Pro 1.5 hits general availability, here’s <a href="https://developers.googleblog.com/2024/04/gemini-15-pro-in-public-preview-with-new-features.html">the blog post</a>—their 1 million token context GPT-4 class model now has no waitlist, is available to anyone in 180 countries (not including Europe or the UK as far as I can tell) and most impressively all the API has a <strong>free tier</strong> that allows up to 50 requests a day, though rate limited to 2 per minute. Beyond that you can pay $7/million input tokens and $21/million output tokens, which is slightly less than GPT-4 Turbo and a little more than Claude 3 Sonnet. Gemini Pro also now support audio inputs and system prompts.</li>
<li>11:44am: OpenAI finally released the non-preview version of <strong>GPT-4 Turbo</strong>, integrating GPT-4 Vision directly into the model (previously it was separate). Vision mode now supports both functions and JSON output, previously unavailable for image inputs. OpenAI also claim that the new model is <a href="https://twitter.com/OpenAI/status/1777772582680301665">“Majorly improved”</a> but no-one knows what they mean by that.</li>
<li>6:20pm (3:20am in their home country of France): Mistral <a href="https://twitter.com/MistralAI/status/1777869263778291896">tweet a link</a> to a 281GB magnet BitTorrent of <strong>Mixtral 8x22B</strong>—their latest openly licensed model release, significantly larger than their previous best open model Mixtral 8x7B. I’ve not seen anyone get this running yet but it’s likely to perform extremely well, given how good the original Mixtral was.</li>
</ul>
<p>And while it wasn’t released today (it came out <a href="https://txt.cohere.com/command-r-plus-microsoft-azure/">last week</a>), this morning Cohere’s Command R+ (an excellent openly licensed model) <a href="https://fedi.simonwillison.net/@simon/112242034813525962">reached position 6 on the LMSYS Chatbot Arena Leaderboard</a>—the highest ever ranking for an open weights model.</p>
<p>Since I have a lot of software that builds on these models, I spent a bunch of time today publishing new releases of things.</p>

<p>I’ve been working on <a href="https://datasette.io/plugins/datasette-extract">Datasette Extract</a> for a while now: it’s a plugin for Datasette that adds structured data extraction from unstructured text, powered by GPT-4 Turbo.</p>
<p>I updated it for the new model releases <a href="https://github.com/datasette/datasette-extract/releases/tag/0.1a4">this morning</a>, and decided to celebrate by making <a href="https://www.youtube.com/watch?v=g3NtJatmQR0">a video</a> showing what it can do:</p>
<iframe src="https://www.youtube.com/embed/g3NtJatmQR0?si=OcLs6MqykLTFvZb3" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen"> </iframe>
<p>I want to start publishing videos like this more often, so this felt like a great opportunity to put that into practice.</p>
<p>The Datasette Cloud blog hasn’t had an entry in a while, so I <a href="https://www.datasette.cloud/blog/2024/datasette-extract/">published screenshots and notes there</a> to accompany the video.</p>
<h4 id="gemini-pro-system-prompts">Gemini Pro 1.5 system prompts</h4>
<p>I really like system prompts—extra prompts you can pass to an LLM that give it instructions about how to process the main input. They’re sadly <a href="https://simonwillison.net/2023/Apr/14/worst-that-can-happen/#gpt4">not a guaranteed solution for prompt injection</a>—even with instructions separated from data by a system prompt you can still over-ride them in the main prompt if you try hard enough—but they’re still useful for non-adversarial situations.</p>
<p><strong><a href="https://github.com/simonw/llm-gemini/releases/tag/0.1a2">llm-gemini 0.1a2</a></strong> adds support for them, so now you can do things like this:</p>
<div><pre>llm -m p15 <span><span>'</span>say hi three times three different ways<span>'</span></span> \
  --system <span><span>'</span>in spanish<span>'</span></span></pre></div>
<p>And get back output like this:</p>
<blockquote>
<p>¡Hola! 👋 ¡Buenos días! ☀️ ¡Buenas tardes! 😊</p>
</blockquote>
<p>Interestingly “in german” doesn’t include emoji, but “in spanish” does.</p>
<p>I had to reverse-engineer the REST format for sending a system prompt from the Python library as the REST documentation hasn’t been updated yet—<a href="https://github.com/simonw/llm-gemini/issues/6#issuecomment-2046460319">notes on that in my issue</a>.</p>
<h4 id="datasette-enrichments-turbo">datasette-enrichments-gpt using GPT-4 Turbo</h4>
<p>Another small release: the <a href="https://datasette.io/plugins/datasette-enrichments-gpt">datasette-enrichments-gpt</a> plugin can enrich data in a table by running prompts through GPT-3.5, GPT-4 Turbo or GPT-4 Vision. I released <a href="https://github.com/datasette/datasette-enrichments-gpt/releases/tag/0.4">version 0.4</a> switching to the new GPT-4 Turbo model.</p>
<h4 id="weeknotes-178-everything-else">Everything else</h4>
<p>That covers today... but my last weeknotes were nearly four weeks ago! Here’s everything else, with a few extra annotations:</p>
<h4 id="weeknotes-178-blog-entries">Blog entries</h4>
<p>All five of my most recent posts are about ways that I use LLM tools in my own work—see also my <a href="https://simonwillison.net/series/using-llms/">How I use LLMs and ChatGPT</a> series.</p>
<ul>
<li><a href="https://simonwillison.net/2024/Apr/8/files-to-prompt/">Building files-to-prompt entirely using Claude 3 Opus</a></li>
<li><a href="https://simonwillison.net/2024/Mar/30/ocr-pdfs-images/">Running OCR against PDFs and images directly in your browser</a></li>
<li><a href="https://simonwillison.net/2024/Mar/26/llm-cmd/">llm cmd undo last git commit—a new plugin for LLM</a></li>
<li><a href="https://simonwillison.net/2024/Mar/23/building-c-extensions-for-sqlite-with-chatgpt-code-interpreter/">Building and testing C extensions for SQLite with ChatGPT Code Interpreter</a></li>
<li><a href="https://simonwillison.net/2024/Mar/22/claude-and-chatgpt-case-study/">Claude and ChatGPT for ad-hoc sidequests</a></li>
</ul>
<h4 id="weeknotes-178-releases">Releases</h4>
<p>Many of these releases relate to ongoing work on <a href="https://www.datasette.cloud/">Datasette Cloud</a>. In particular there’s a flurry of minor releases to add descriptions to the action menu items added by various plugins, best illustrated by this screenshot:</p>
<p><img src="https://static.simonwillison.net/static/2024/action-menus.png" alt="A screenshot showing the database actions, table actions and row actions menus in Datasette running on Datasette Cloud. The database menu items are: Upload CSV. Create a new table by uploading a CSV file. Execute SQL write. Run queries like insert/update/delete against this database. Query this database with Al assistance. Ask a question to build a SQL query. Create table with Al extracted data. Paste in text or an image to extract structured data. Edit database metadata. Set the description, source and license for this database. Create a table. Define a new table with specified columns. Create table with pasted data. Paste in JSON, CSV or TSV data (e.g. from Google Sheets). Export this database. Create and download a snapshot of this SQLite database (1.3 GB). The table menu items: Delete this table. Delete table and all rows within it. Enrich selected data. Run a data cleaning operation against every selected row. Query this table with Al assistance. Ask a question to build a SQL query. Extract data into this table with Al. Paste in text or an image to extract structured data. Edit table metadata. Set the description, source and license for this table. Edit table schema. Rename the table, add and remove columns.... Make table public. Allow anyone to view this table. Configure full-text search. Select columns to make searchable for this table. The row menu items: Enrich this row. Run a dat acleaning operation against this row."></p>
<ul>
<li>
<strong><a href="https://github.com/datasette/datasette-enrichments-gpt/releases/tag/0.4">datasette-enrichments-gpt 0.4</a></strong>—2024-04-10<br>Datasette enrichment for analyzing row data using OpenAI’s GPT models</li>
<li>
<strong><a href="https://github.com/simonw/llm-gemini/releases/tag/0.1a2">llm-gemini 0.1a2</a></strong>—2024-04-10<br>LLM plugin to access Google’s Gemini family of models</li>
<li>
<strong><a href="https://github.com/simonw/datasette-public/releases/tag/0.2.3">datasette-public 0.2.3</a></strong>—2024-04-09<br>Make specific Datasette tables visible to the public</li>
<li>
<strong><a href="https://github.com/datasette/datasette-enrichments/releases/tag/0.3.2">datasette-enrichments 0.3.2</a></strong>—2024-04-09<br>Tools for running enrichments against data stored in Datasette</li>
<li>
<strong><a href="https://github.com/datasette/datasette-extract/releases/tag/0.1a4">datasette-extract 0.1a4</a></strong>—2024-04-09<br>Import unstructured data (text and images) into structured tables</li>
<li>
<strong><a href="https://github.com/simonw/datasette-cors/releases/tag/1.0">datasette-cors 1.0</a></strong>—2024-04-08<br>Datasette plugin for configuring CORS headers</li>
<li>
<strong><a href="https://github.com/simonw/asgi-cors/releases/tag/1.0">asgi-cors 1.0</a></strong>—2024-04-08<br>ASGI middleware for applying CORS headers to an ASGI application</li>
<li>
<strong><a href="https://github.com/simonw/files-to-prompt/releases/tag/0.2.1">files-to-prompt 0.2.1</a></strong>—2024-04-08<br>Concatenate a directory full of files into a single prompt for use with LLMs</li>
<li>
<strong><a href="https://github.com/datasette/datasette-embeddings/releases/tag/0.1a3">datasette-embeddings 0.1a3</a></strong>—2024-04-08<br>Store and query embedding vectors in Datasette tables</li>
<li>
<strong><a href="https://github.com/datasette/datasette-studio/releases/tag/0.1a3">datasette-studio 0.1a3</a></strong>—2024-04-06<br>Datasette pre-configured with useful plugins. Experimental alpha.</li>
<li>
<strong><a href="https://github.com/datasette/datasette-paste/releases/tag/0.1a5">datasette-paste 0.1a5</a></strong>—2024-04-06<br>Paste data to create tables in Datasette</li>
<li>
<strong><a href="https://github.com/datasette/datasette-import/releases/tag/0.1a4">datasette-import 0.1a4</a></strong>—2024-04-06<br>Tools for importing data into Datasette</li>
<li>
<strong><a href="https://github.com/datasette/datasette-enrichments-quickjs/releases/tag/0.1a2">datasette-enrichments-quickjs 0.1a2</a></strong>—2024-04-05<br>Enrich data with a custom JavaScript function</li>
<li>
<strong><a href="https://github.com/simonw/s3-credentials/releases/tag/0.16.1">s3-credentials 0.16.1</a></strong>—2024-04-05<br>A tool for creating credentials for accessing S3 buckets</li>
<li>
<strong><a href="https://github.com/simonw/llm-command-r/releases/tag/0.2">llm-command-r 0.2</a></strong>—2024-04-04<br>Access the Cohere Command R family of models</li>
<li>
<strong><a href="https://github.com/simonw/llm-nomic-api-embed/releases/tag/0.1">llm-nomic-api-embed 0.1</a></strong>—2024-03-30<br>Create embeddings for LLM using the Nomic API</li>
<li>
<strong><a href="https://github.com/simonw/textract-cli/releases/tag/0.1">textract-cli 0.1</a></strong>—2024-03-29<br>CLI for running files through AWS Textract</li>
<li>
<strong><a href="https://github.com/simonw/llm-cmd/releases/tag/0.1a0">llm-cmd 0.1a0</a></strong>—2024-03-26<br>Use LLM to generate and execute commands in your shell</li>
<li>
<strong><a href="https://github.com/simonw/datasette-write/releases/tag/0.3.2">datasette-write 0.3.2</a></strong>—2024-03-18<br>Datasette plugin providing a UI for executing SQL writes against the database</li>
</ul>
<h4 id="weeknotes-178-tils">TILs</h4>
<ul>
<li>
<a href="https://til.simonwillison.net/macos/impaste">impaste: pasting images to piped commands on macOS</a>—2024-04-04</li>
<li>
<a href="https://til.simonwillison.net/go/installing-tools">Installing tools written in Go</a>—2024-03-26</li>
<li>
<a href="https://til.simonwillison.net/chrome/headless">Google Chrome --headless mode</a>—2024-03-24</li>
<li>
<a href="https://til.simonwillison.net/clickhouse/github-public-history">Reviewing your history of public GitHub repositories using ClickHouse</a>—2024-03-20</li>
<li>
<a href="https://til.simonwillison.net/npm/self-hosted-quickjs">Running self-hosted QuickJS in a browser</a>—2024-03-20</li>
<li>
<a href="https://til.simonwillison.net/python/comparing-version-numbers">Programmatically comparing Python version strings</a>—2024-03-17</li>
</ul>
</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Show HN: CompressX, my FFmpeg wrapper for macOS (143 pts)]]></title>
            <link>https://compressx.app</link>
            <guid>39987579</guid>
            <pubDate>Wed, 10 Apr 2024 06:32:18 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://compressx.app">https://compressx.app</a>, See on <a href="https://news.ycombinator.com/item?id=39987579">Hacker News</a></p>
<div id="readability-page-1" class="page"><div><dl><p><dt>Up to 90% file size reduction.</dt> <dd>Compress your videos and images without significantly losing quality, powered by FFmpeg</dd></p><p><dt>Monitor folder for automatic compression.</dt> <dd>Automatically compress new files in monitored folders</dd></p><p><dt>Support 5 quality options.</dt> <dd>Further reduce video size to better suit your requirements.</dd></p><p><dt>Gif conversion.</dt> <dd>Just drop a video, select quality, FPS, and voilà.</dd></p><p><dt>Compatible with transparent video.</dt> <dd>Compress video with transparent background with the most powerful Apple APIs.</dd></p><p><dt>Export to MP4 or WebM.</dt> <dd>Export the compressed video in various formats, such as MP4 and WebM.</dd></p><p><dt>Multiple files at once.</dt> <dd>Increase your productivity by compressing multiple files simultaneously.</dd></p><p><dt>Raycast extension.</dt> <dd>Speed up your workflow by sending your file to Raycast.</dd></p><p><dt>Work 100% offline.</dt> <dd>Your files never leave your computer.</dd></p></dl></div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[Meta Used Monolithic Architecture to Ship Threads in Only Five Months (176 pts)]]></title>
            <link>https://www.infoq.com/news/2024/04/meta-threads-instagram-5-months/</link>
            <guid>39987466</guid>
            <pubDate>Wed, 10 Apr 2024 06:12:56 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://www.infoq.com/news/2024/04/meta-threads-instagram-5-months/">https://www.infoq.com/news/2024/04/meta-threads-instagram-5-months/</a>, See on <a href="https://news.ycombinator.com/item?id=39987466">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
								<p>Zahan Malkani <a href="https://qconlondon.com/presentation/apr2024/0-1-shipping-threads-5-months">talked during QCon London 2024 about Meta's journey</a> from identifying the opportunity in the market to shipping the Threads application only five months later. The company leveraged Instagram's existing monolithic architecture and quickly iterated to create a new text-first microblogging service in record time.</p>

<p>Soon after Elon Musk acquired Twitter, Meta saw an opportunity to create a competing service but had little time to launch it to attract existing Twitter users, who were looking for alternatives. The company initially tested whether better support for text-based posts on Instagram would be sufficient to sway some Twitter users over to Meta's products, but these efforts didn’t attract enough new users.</p>

<p>Meta formed a small team to devise an approach to delivering a new service that would directly compete with Twitter in just a few months. <a href="https://www.linkedin.com/in/zahanm">Zahan Malkani</a>, a software engineer at Meta, shared how his team was able to reuse the existing Instagram backend components, data stores, and large parts of the existing infrastructure stack but customize them to offer functionality comparable to what now is X.</p>

<p><img alt="" data-src="news/2024/04/meta-threads-instagram-5-months/en/resources/1meta-instagram-arch-1712608215163.jpeg" src="https://imgopt.infoq.com/fit-in/3000x4000/filters:quality(85)/filters:no_upscale()/news/2024/04/meta-threads-instagram-5-months/en/resources/1meta-instagram-arch-1712608215163.jpeg" rel="share"></p>

<p><em>Instagram / Threads High-Level Architecture (Source: <a href="https://www.linkedin.com/posts/danielbryantuk_qconlondon-ugcPost-7183060633251147776-a6Fx?utm_source=share&amp;utm_medium=member_desktop">Daniel Bryant’s LinkedIn post</a>)</em></p>

<p>Theads's technology stack is almost identical to Instagram's, consisting of a few monolithic application components and dedicated data stores. The main backend component is a large Python codebase using a custom version of the <a href="https://www.djangoproject.com/">Django Framework</a>, named Distillery, that integrates with an older PHP component called WWW. The data is stored in <a href="https://engineering.fb.com/2013/06/25/core-infra/tao-the-power-of-the-graph/">TAO</a>, a write-though cache that operates on a <a href="https://en.wikipedia.org/wiki/Graph_database">graph data model</a>, which in turn uses UDB, a sharded <a href="https://www.mysql.com/">MySQL</a> deployment, that stores all the data. Additionally, the <a href="https://engineering.fb.com/2021/08/06/core-infra/zippydb/">ZippyDB</a> key-value cache stores transient data, and <a href="https://engineering.fb.com/2020/08/17/production-engineering/async/">Async</a>, a serverless function compute platform, is used to execute asynchronous jobs outside of peak hours.</p>

<p>While working on Threads, the team used a <a href="https://www.apollographql.com/docs/technotes/TN0032-sdui-basics">Server-Driven UI (SDUI)</a> approach to enable a quick experimentation cycle in the early days of the project, using thousands of company employees for feedback.</p>

<p>Despite the apparent advantages of reusing Instagram's platform for Threads (much faster delivery time), Malkani admitted the company introduced a substantial amount of technical debt that must be addressed in the future. The team is working on gradually separating the data models from Instagram's as the Threads service gains new functionality so that both platforms can be separated, but the process will take some time.</p>

<p>Malkani recounted the stressful period when Threads launched in July 2023, including a few mishaps, like when users in&nbsp;Southeast Asia and other time zones were&nbsp;able to download the mobile app before the US team was ready to allow traffic in, due to the time zone confusion. Engineers also had to improve scalability of some processes to allow for importing followers from Instagram. The team has been working tirelessly to address any issues and ensure the stability of the platform, which saw unprecedented adoption. Ten million users downloaded the app on the first day, and 100 million in the first five days.</p>

<p>Since the launch, the team delivered new features like the "following" feed, trending conversations, and the limited availability of API access for reading and writing posts. Threads team is also actively working on adopting <a href="https://www.w3.org/TR/activitypub/">the ActivityPub protocol</a>, allowing users to share their posts to other social networks that support the protocol.</p>

								









  
    <div> <!-- main wrapper for authors section -->
        <h2>About the Author</h2> <!-- section title -->

        
            
                
            
            <div data-id="author-Rafal-Gancarz">
                    <h4><strong>Rafal Gancarz</strong></h4>
                    
                </div>
        
    </div>

							</div></div>]]></description>
        </item>
        <item>
            <title><![CDATA[A science fiction obsession led me to psychological war (164 pts)]]></title>
            <link>https://buttondown.email/thehypothesis/archive/how-a-science-fiction-obsession-led-me-to/</link>
            <guid>39986593</guid>
            <pubDate>Wed, 10 Apr 2024 03:08:55 GMT</pubDate>
            <description><![CDATA[<p>URL: <a href="https://buttondown.email/thehypothesis/archive/how-a-science-fiction-obsession-led-me-to/">https://buttondown.email/thehypothesis/archive/how-a-science-fiction-obsession-led-me-to/</a>, See on <a href="https://news.ycombinator.com/item?id=39986593">Hacker News</a></p>
<div id="readability-page-1" class="page"><div>
                <date>
                    
                        April 9, 2024
                    </date>
                
                

                

                
                    
                        <p>I've spent the past three years researching and writing a book about the history of psychological warfare in the United States. It’s called <a href="https://wwnorton.com/books/9780393881516?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank"><em>Stories Are Weapons: Psychological Warfare and the American Mind</em></a><em>, </em>and it comes out on June 4. The subject crept up on me, and not for the reasons you might think.</p>
<p>It all started over a decade ago at a science fiction convention in San Diego. I was talking to the writer Eugene Fisher about obscure writers that we loved. He mentioned Cordwainer Smith, a mid-twentieth century author who had written about human-animal hybrids of the distant future who led a revolution against their cyborg masters. It sounded amazing and weird, and I made a mental note to pick up some of Smith’s work. It was only later that I discovered that Cordwainer Smith was the pen name of Paul Linebarger, an intelligence operative who wrote the first Army manual devoted to the practice of psychological warfare in 1948.</p>
<p>I had to know more. So I started digging, and what follows is some of what I found. I was only able to cram a few of these gems into my book, so I've got a treasure trove of stuff here that I've been dying to talk about.</p>
<p>Linebarger’s father was a judge in the Philippines who became a devoted follower of Chinese nationalist Sun Yat-Sen. As a result, the young writer spent long stretches of his childhood under the tutelage of his godfather Sun Yat-Sen in China, learning statecraft from his father’s circle and Mandarin in school. He grew up with two names: 林白乐 (Lin Bai-lo) and Paul Linebarger. As an adult, he published science fiction as Cordwainer Smith, realist fiction under the name Felix C. Forrest, as well as a spy novel and an unpublished pop psychology book under the name Carmichael Smith. As a professional psywarrior, he worked to overthrow the Communists in China – not for the glory of America, but to continue the nationalist project of his mentor Sun Yat-Sen.&nbsp;</p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/74f2ad0d-1868-4f64-9556-6e84b9a3ca42.png?w=960&amp;fit=max"><figcaption>The 1948 edition of "Psychological Warfare," and "We the Underpeople," a collection of Cordwainer Smith's short stories and a novel.</figcaption></figure>
<p>Now declassified, Linebarger’s <em>Psychological Warfare</em> is available from a number of print-on-demand publishers. I ordered a copy online, and read it alongside a collection of Cordwainer Smith stories called <em>We the Underpeople</em>. I couldn’t believe the same person had written them. This guy who wrote about subversive cat women and robot cities and weapons made from angry psychic weasels and mind control sex between people who are literally floating naked inside a chamber of flames – he had <em>also</em> codified the U.S. military’s approach to psyops at the dawn of the Cold War? <em>Really??</em></p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/18215c15-3639-4b96-9c48-6c93a20f8e31.jpg?w=960&amp;fit=max"><figcaption>An array of membership and ID cards that Linebarger saved, now preserved among his papers at the Hoover Institute. Note that his "mystery writers" name is Carmichael Smith, a name he used to publish a Cold War novel called "Atomsk." Under his legal name, he was part of the Cosmos Club, a private club in DC for thought leaders; and of course he was an Eisenhower man.</figcaption></figure>
<p>I’m not the first person to ask this question using italics and lots of question marks. A miniscule cottage industry of writing about Linebarger’s life explores whether he was <a href="https://elms.faculty.ucdavis.edu/wp-content/uploads/sites/98/2014/07/20021-Behind-the-Jet1.pdf?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">secretly delusional</a>, or perhaps <a href="https://reactormag.com/the-what-he-did-the-poetic-science-fiction-of-cordwainer-smith/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">dropping subversive messages</a> in his stories. Gary K. Wolfe, a literary critic who has <a href="https://www.jstor.org/stable/4239107?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">written quite a bit</a> about Linebarger’s fiction, told me that some fans thought the author had to be a time traveler because his futures felt so vivid and bizarrely detailed. There are even questions surrounding the people who study Linebarger. <a href="https://nevalalee.wordpress.com/about/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">Alec Nevala-Lee</a>, author of <em>Astounding: John W. Campbell, Isaac Asimov, Robert A. Heinlein, L. Ron Hubbard, and the Golden Age of Science Fiction</em>, said that he’s heard a lot of wild speculation about UC Davis psychology professor <a href="https://www.cordwainer-smith.com/scholarly.htm?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">Alan C. Elms</a>, who spent decades writing a biography of Linebarger, but never published it for mysterious reasons.&nbsp;</p>
<p>My point is that Paul Linebarger was a psyop specialist whose life history reads like a psyop. It makes you want to do your own research, as the conspiracy influencers say. I couldn’t stop thinking about Linebarger, but it wasn’t because I thought he was some kind of time traveling superspy. His work made me realize how much American propaganda strategies owed to science fiction.&nbsp;</p>
<p>Eventually, I followed my curiosity to the Hoover Institution Library &amp; Archive at Stanford University, where Linebarger’s papers are kept alongside his father’s.</p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/7c91b14c-5ac7-4497-aecb-03eb9e28abea.png?w=960&amp;fit=max"><figcaption></figcaption></figure>
<p>This and the image below are from Linebarger’s personal diaries, which he kept between the ages of 10 and 16. Above is a note from October 17, 1926, when he was 13 years old. “I love Shanghai. Paradise!!!” he scrawls. “I don’t want to go away. Never! Never!! Never!!!!!!” He had just spent two years in China with his family, and was very enthusiastic about travel.</p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/5b7ed81d-834a-4e6d-ac7a-1793af7fb91e.png?w=960&amp;fit=max"><figcaption></figcaption></figure>
<p>Two photos taken February ninth, 1929. Linebarger was 15 years old, and was in his first year at George Washington University.&nbsp;</p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/51499013-2138-4d2f-9e2c-05229ba4e0a1.jpg?w=960&amp;fit=max"><figcaption></figcaption></figure>
<p>These are some slips of paper and pictures he kept tucked into the front flap of his teen journal: Chinese language practice, a picture of himself on a ship with a group of his father’s compatriots and Sun Yat-Sen followers, a picture of the Horsehead Nebula cut out from a magazine, and a list of women’s names (likely girls he’d had crushes on – his journals are full of urgent romantic commentary). It was wild to peer into the baby mind of a psywarrior, to see how closely his childhood interests aligned with his adult profession. He approached science fiction and international policy as two strands in the same project: Both were about explaining alien civilizations to each other, with a very specific goal in mind.</p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/66e01d49-e79f-4771-9c14-5995e81ae25d.png?w=960&amp;fit=max"><figcaption></figcaption></figure>
<p>The fragment of typewritten manuscript above is from a book called “Conversations with Sun Yat-sen,” which he co-wrote with his father in the early 1930s. It’s from the introduction, written exclusively by the younger Linebarger, when he was both a college student and an his father’s secretary, helping with policy and intelligence analysis for the Chinese nationalist government. He wanted to sow empathy for China among Americans, especially at a time when racist immigration policies and political ignorance had distorted many people's understanding of what was happening across the Pacific.</p>
<p>He writes: “China the Nation, in the mind of Sun Yat-sen, is the most difficult of all his principles to interpret to the Western understanding. Nationalism is so simple and intelligible a phenomenon when preached by Hitler and Mussolini that is seems impossible that any other doctrines should be nationalistic and yet run counter to the chauvinisms of the modern world.”</p>
<p>Linebarger goes on to describe Sun Yat-sen as something of a science fiction writer, teaching his people about alien worlds beyond China. “It was the duty of Sun Yat-sen to persuade a world that it was no world, but a nation; to persuade his fellow-countrymen that their customs and traditions were not the universal laws of reason, but only the peculiarly fine development of one civilization; to teach them that their world, whence patriotic and religious wars had long been banished, had to contend with a narrowing universe which had brought forth other worlds, fantastically different, upon the same globe.”</p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/bfa8b895-225c-423c-84d7-0e78655c3ea1.png?w=960&amp;fit=max"><figcaption></figcaption></figure>
<p>I had to know more about where this overlap between genre fiction and psychological warfare began. So I delved deeper -- reading histories, interviewing experts and practitioners -- and I found examples of U.S. psyops going back to the nation's earliest days. Two hundred years ago, propagandists were using narrative techniques borrowed from many kinds of popular storytelling: tabloid journalism, fantasy, cowboy stories, adventure tales, comedy, horror. This was a tradition that Linebarger had inherited from generations of Americans before him. In the nineteenth century, for example, popular Western dime novels inspired pundits who pushed "manifest destiny" as a policy. Newspaper accounts justifying the United States' wars on Indigenous nations often read like cowboy adventures set in an unclaimed, virgin land. Using the tropes of popular entertainment helped pro-expansionists sell settlers on the U.S. government policy of coercively relocating hundreds of thousands of people.</p>
<p>In World War II, Linebarger and many of his colleagues advised psywarriors to make their products resemble movies, pulp fiction, radio, and other forms of popular entertainment. They also studied advertising for hints about how to persuade reluctant adversaries, and imitated the language of scientists to make their lies sound trustworthy.&nbsp;</p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/b66a7721-1604-4d38-8e82-da34b248cc52.jpg?w=960&amp;fit=max"><figcaption>More of Paul Linebarger's identification cards -- these reflect his positions in the military and overseas.</figcaption></figure>
<p>I think psyops specialists are often cast as secret agents who suppress dissent, cover up the truth, and push mindless conformity. But most of Linebarger's work focused on fomenting revolutionary movements. He wanted his work to inspire ordinary people who feared their struggles against Nazis and dictators were doomed. In 1950, he wrote an unpublished monograph about how to encourage "passive resistance," which he described as "obstruction to authority" that doesn't involve an organized military force. People in such a movement don't plant bombs, he wrote, but "their hostility to authority outweighs their fear of authority." He credited this form of resistance movement with challenging tyranny in Ukraine, China, Japan, and India.</p>
<p>He also compared it to art. "Passive resistance in its more quiet and secret forms is essentially an artistic rather than a scientific undertaking," he wrote.</p>
<figure><img alt="Passive resistance in its more quiet and secret forms is essentially an artistic rather than a scientific undertaking.  It is no use trying to organize such a movement on a disciplined and controlled basis, even though particular elements within it may be subject to real instruction and to real indoctrination. Passive resistance as a whole must be sought in terms of a succession of spontaneous activities, some of which are incited by outside propaganda and some of which arise from the conditions prevailing under the hated regime." contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/e6228e6e-719f-4fa5-80db-195a7b41de88.png?w=960&amp;fit=max"><figcaption></figcaption></figure>
<p>He was right. Psyops are an unsung speculative art. Some are brilliant, and others are duds. But they are all attempts to create compelling, emotional stories that offer audiences a new perspective – and inspire them to take action.</p>
<p>Psyops are also, fundamentally, lies -- often with violent overtones. Still, the original 1948 version of <em>Psychological Warfare</em> concludes with a section about "psychological disarmament," where Linebarger imagined a world of psychological truths and peace. Border controls would be abolished, and the government would fund education and public parks, while also guaranteeing a free press.<br></p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/3383e857-05b1-4bf1-80d2-9c480b372d1b.png?w=960&amp;fit=max"><figcaption>Linebarger saved several ration cards from World War II, including this one for tobacco.</figcaption></figure>
<p>As the Cold War escalated, however, he abandoned this serene vision. In <a href="https://www.gutenberg.org/files/48612/48612-h/48612-h.htm?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">the 1954 edition of <em>Psychological Warfare</em></a>, he explained that he had replaced the disarmament chapters with a section on the future of psyops. His implication was that psychological warfare would be permanent, with no ceasefire or peaceful resolution. And, as propaganda production grew more sophisticated, he predicted that more authors would join the cause. "The artistic and cultural aspect of writing is readily converted to propaganda usage," Linebarger wrote in the book's new conclusion.</p>
<p>Throughout his life, Linebarger kept journals of his travels. Often, he would jot down a sentence or two, describing the sounds of aircraft carriers or the way light glinted on the Nile at sunset. And sometimes, those notes showed Linebarger realizing that the United States had its own set of oppressive systems that ought to be resisted.</p>
<figure><img contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/3317848e-35e1-466f-8ed5-f395550a129e.png?w=960&amp;fit=max"><figcaption></figcaption></figure>
<p>In an undated note from the 1950s, Linebarger noted: "The women assistants in Washington (Pentagon) astonish me more and more. One whom I have met has more brains than any of the officers around here."</p>
<p>Unlike most men in his profession at the time, Linebarger frequently acknowledged the contributions of women. Many of his major fictional characters are women, too -- including the heroes C'mel and D'joan, who lead resistance movements against the dictatorial Instrumentality, an interstellar government that looms over much of his work. <a href="https://www.jstor.org/stable/4239639?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">According to his biographer Alan C. Elms</a>, Linebarger had hoped to use the pseudonym Lucy Estes on his first two books, but his publisher convinced him to use a man's name.</p>
<p>I spoke to Linebarger's daughter Rosana Hart, who maintains <a href="http://www.cordwainer-smith.com/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">a website devoted to her father's work</a>. "I think he thought that women were superior to men," she told me. I wondered whether this feeling -- so out-of-step with dominant ideas about women in the 1950s -- might have fueled his urge to generate new identities for himself through writing. Maybe he was searching for a way to express an identity that was more fluid than the one the world allowed him.</p>
<figure><img alt="For your present purposes it does not matter whence, historically, your troubles came. Nor does it matter whether what you think about the origins of your troubles is factually true or not. What does matter is that you swing a searchlight from the vantage point of your watched mind across part of the vast terrain of your unwatched mind and that you find, here or there, the character of the trouble which is interfering in your reasonableness and your happiness. This can be illustrated with an example: You have something between your legs. If you are a man it is a small complicated bag of flesh. If you are a woman it is an inconspicuous but deep wrinkle. Whichever set of genitals it may be, the organ itself is actually surprisingly strong ..." contenteditable="false" draggable="false" src="https://assets.buttondown.email/images/e3332011-ee08-4105-8dde-93830f9e7e79.png?w=960&amp;fit=max"><figcaption>An excerpt from an unpublished manuscript from the mid-1950s, written under the name Carmichael Smith (Linebarger's "crime writer" pseudonym), devoted to what he called "ethical dianetics," or "mutual emotional aid." He points out that one source of "trouble" for human psychology is the fact of our genitals, which cannot be talked about openly.</figcaption></figure>
<p>After I talked to Hart, I kept thinking about Linebarger's fiction as a wrathful exercise in frustrated self-fashioning. There is an undeniable streak of cruelty in Linebarger’s sci-fi stories – he revels in describing intense mental and physical torture, and many of his characters die in gruesome ways. Hart told me that her father believed people should see the ugly side of humanity, in order to understand the truth about the world. When she was a little girl, he made a point of telling her about the horrific things people had done to each other in the wars he’d studied and experienced firsthand. “He would go into more detail about suffering than a child should have had to listen to,” she said.</p>
<p>No matter what Linebarger did, he was always trapped in a cold, liminal space between the worlds of China and the United States, propaganda and art. If he couldn't inhabit the world as it was, perhaps he could use his words to bash a better one into being.</p>
<p>With his book <em>Psychological Warfare</em>, he codified a form of creativity whose purpose is to persuade, but also to intimidate, demoralize, and mislead. He described psyops as an opportunity to aid the oppressed, but also a way to hurt adversaries.</p>
<p>This is the paradox at the heart of all propaganda. Unlike wild storytelling, psyops have a specific purpose: to become a weapon. Perhaps it is forged with the intention of bringing justice to the oppressed. And perhaps its emotional ammunition is aimed at the minds of the vulnerable. Either way, it is a weapon whose power cannot be contained. Like a gun or a tank, it can be transferred from the military into civilian life, exploding our domestic policies, school board meetings, healthcare access, and employment opportunities. And that is what <em>Stories Are Weapons</em> is about: how psyops designed for use against national adversaries became weapons in a culture war between people who live in the United States.</p>
<h2>Pre-order <em>Stories Are Weapons</em> now!</h2>
<p>You can <a href="https://wwnorton.com/books/9780393881516?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">pre-order <em>Stories Are Weapons</em> now</a> from your local indie bookstore! If you'd like a personalized and/or signed copy, you can order it from <a href="https://www.greenapplebooks.com/signed-annalee-newitz?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">Green Apple Bookstore</a> (just write in the "info" field how you would like it personalized).</p>
<p>Pre-orders help tremendously, by sending a signal to stores and my publisher that people are interested in the book -- and that can lead to more exposure for <em>Stories Are Weapons</em>.</p>
<h2>See me on my west coast book tour!</h2>
<p>Mark your calendars and get your tickets now! Here's the schedule (more dates may be added later):</p>
<p>6/4: Powell's Books in Portland (w/Dave Miller, host of OPB's "Think Out Loud")</p>
<p>6/6: Seattle Town Hall (w/Lindy West) -- ticketed event (link coming soon!)</p>
<p>6/13: Mechanics Institute in San Francisco (w/Alexis Madrigal)</p>
<p>6/18: <a href="https://app.gopassage.com/events/stories-are-weapons/event_times/1490223?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">Berkeley Arts &amp; Letters at the Hillside Club in Berkeley</a> (w/Ed Yong) -- ticketed event</p>
<h2>What I've been working on lately</h2>
<p>I reviewed two fascinating books about surveillance <a href="https://www.nytimes.com/2024/02/28/books/review/means-of-control-byron-tau-the-sentinel-state-minxin-pei.html?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">for the <em>New York Times</em>:</a> "The Sentinel State," by Minxin Pei, and "Means of Control" by Byron Tau. Comparing the high tech (and low tech) ways that China and the U.S. spy on their citizens is extremely instructive.</p>
<p>I have a new short story out in the glorious <em>Uncanny Magazine</em>! It's called "<a href="https://www.uncannymagazine.com/article/the-best-ever-cosplay-of-whistle-and-midnight/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">The Best-Ever Cosplay of Whistle and Midnight</a>," and it's about what happens when the biggest worm cosplay convention on the planet Sasky loses its venue. Get ready for interspecies dramas, last-minute costume decisions, and a lucky encounter with a very silly cat who works as a bartender at THE TONGUE FORKS. This story is partly a response to the many people who read <em>The Terraformers</em> and asked me, "What happened to the worms after they were able to speak?" But it's also a standalone tale about what it's like to celebrate your body, no matter what form it takes.</p>
<p>Also, if you are feeling saddened by the rise in Comstockery in the States, just remember that <a href="https://us.macmillan.com/books/9780765392121/thefutureofanothertimeline?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">I wrote a novel about time traveling feminists fighting Comstockers</a> across the timeline to restore reproductive rights in America. Hell yeah!</p>
<p>My <em>New Scientist</em> column comes out monthly, and is now outside the paywall! Check out some recent columns on <a href="https://www.newscientist.com/article/mg26134830-200-is-the-truth-out-there-yes-but-it-doesnt-involve-aliens/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">new ways of analyzing UFO sightings</a>, why the Taylor Swift psyops stories are <a href="https://www.newscientist.com/article/mg26134793-500-the-taylor-swift-psy-op-conspiracy-theory-offers-a-troubling-lesson/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">more dangerous than you think</a>, the <a href="https://www.newscientist.com/article/mg26034712-800-the-weird-tale-of-california-forever-a-tech-billionaire-instant-city/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">unregulated Utopian city</a> that billionaires are secretly trying to build on Northern California farmland, and why <a href="https://www.newscientist.com/article/2403999-trust-and-safety-the-most-important-tech-job-youve-never-heard-of/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">trust and safety</a> is the most important tech job you've never heard of.</p>
<p>And the amazing podcast that I co-host with Charlie Jane Anders, <a href="https://ouropinionsarecorrect.libsyn.com/?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">Our Opinions Are Correct</a>, comes out fortnightly! Check out our recent episode on <a href="https://ouropinionsarecorrect.libsyn.com/queer-horror-with-dr-chuck-tingle?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">queer horror</a> with guest Chuck Tingle, and our <a href="https://ouropinionsarecorrect.libsyn.com/we-failed-the-turing-test-walex-hanna-and-emily-m-bender?utm_source=thehypothesis&amp;utm_medium=email&amp;utm_campaign=how-a-science-fiction-obsession-led-me-to" rel="noopener noreferrer nofollow" target="_blank">evisceration of the Turing Test</a> with the help of AI researchers Alex Hanna and Emily M. Bender!</p>
                    
                

                

            </div></div>]]></description>
        </item>
    </channel>
</rss>